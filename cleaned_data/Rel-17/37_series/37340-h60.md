# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
Z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides an overview of the multi-connectivity operation
using E-UTRA and NR radio access technologies. Details of the network and
radio interface protocols are specified in companion specifications of the 36
and 38 series.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[3] 3GPP TS 38.300: \"NR; NR and NG-RAN Overall description; Stage 2\".
[4] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC) protocol
specification\".
[5] 3GPP TS 38.423: \"NG-RAN; Xn application protocol (XnAP)\".
[6] 3GPP TS 38.425: \"NG-RAN; NR user plane protocol\".
[7] 3GPP TS 38.401: \"NG-RAN; Architecture description\".
[8] 3GPP TS 38.133: \"NG-RAN; Requirements for support of radio resource
management\".
[9] 3GPP TS 36.423: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); X2 Application Protocol (X2AP)\".
[10] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[11] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[12] 3GPP TS 38.101-1: \"User Equipment (UE) radio transmission and reception;
Part 1: Range 1 Standalone\".
[13] 3GPP TS 38.101-2: \"User Equipment (UE) radio transmission and reception;
Part 2: Range 2 Standalone\".
[14] 3GPP TS 38.101-3: \"User Equipment (UE) radio transmission and reception;
Part 3: Range 1 and Range 2 Interworking operation with other radios\".
[15] 3GPP TS 36.323: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Packet Data Convergence Protocol (PDCP) specification\".
[16] 3GPP TS 38.323: \"NR; Packet Data Convergence Protocol (PDCP)
specification\".
[17] 3GPP TS 38.340: \"Backhaul Adaptation Protocol (BAP) specification\".
[18] 3GPP TS 23.287: \"Architecture enhancements for 5G System (5GS) to
support Vehicle-to-Everything (V2X) services \".
[19] 3GPP TS 23.285: \"Architecture enhancements for V2X services\".
[20] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[21] 3GPP TS 38.213: \"NR; Physical layer procedures\".
[22] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
[23] 3GPP TS 38.473: \"F1 application protocol (F1AP)\".
[24] 3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System
(5GS)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1] and TS 36.300 [2].
**Child node** : IAB-DU\'s or IAB-donor-DU\'s next hop neighbour IAB-node.
**Conditional PSCell Addition:** a PSCell addition procedure that is executed
only when PSCell addition execution condition is met.
**Conditional PSCell Change:** a PSCell change procedure that is executed only
when PSCell change execution condition is met.
**En-gNB:** node providing NR user plane and control plane protocol
terminations towards the UE, and acting as Secondary Node in EN-DC.
**Fast MCG link recovery:** in MR-DC, an RRC procedure where the UE sends an
MCG Failure Information message to the MN via the SCG upon the detection of a
radio link failure on the MCG.
**IAB-donor:** gNB that provides network access to UEs via a network of
backhaul and access links.
**IAB-MT:** IAB-node function that terminates the Uu interface to the parent
node using the procedures and behaviours specified for UEs unless stated
otherwise.
**IAB-node:** RAN node that supports NR access links to UEs and NR backhaul
links to parent nodes and child nodes. The IAB-node does not support
backhauling via E-UTRA.
**Master Cell Group** : in MR-DC, a group of serving cells associated with the
Master Node, comprising of the SpCell (PCell) and optionally one or more
SCells.
**Master node** : in MR-DC, the radio access node that provides the control
plane connection to the core network. It may be a Master eNB (in EN-DC), a
Master ng-eNB (in NGEN-DC) or a Master gNB (in NR-DC and NE-DC).
**MCG bearer** : in MR-DC, a radio bearer with an RLC bearer (or two RLC
bearers, in case of CA packet duplication in an E-UTRAN cell group, or up to
four RLC bearers in case of CA packet duplication in a NR cell group) only in
the MCG.
**MN terminated bearer:** in MR-DC, a radio bearer for which PDCP is located
in the MN.
**MCG SRB** : in MR-DC, a direct SRB between the MN and the UE.
**Multi-Radio Dual Connectivity:** Dual Connectivity between E-UTRA and NR
nodes, or between two NR nodes.
**Ng-eNB** : as defined in TS 38.300 [3].
**NR sidelink communication** : AS functionality enabling at least V2X
Communication as defined in TS 23.287 [18] and ProSe Communication (including
ProSe UE-to-Network Relay and non-Relay communication) as defined in TS 23.304
[24], between two or more nearby UEs, using NR technology but not traversing
any network node.
**NR sidelink discovery** : AS functionality enabling ProSe non-Relay
Discovery and ProSe UE-to-Network Relay discovery for Proximity based Services
as defined in TS 23.304 [24] between two or more nearby UEs, using NR
technology but not traversing any network node.
**Parent node:** IAB-MT\'s next hop neighbour node; the parent node can be
IAB-node or IAB-donor-DU.
**PCell** : SpCell of a master cell group.
**PSCell** : SpCell of a secondary cell group.
**RLC bearer:** RLC and MAC logical channel configuration of a radio bearer in
one cell group.
**Secondary Cell Group** : in MR-DC, a group of serving cells associated with
the Secondary Node, comprising of the SpCell (PSCell) and optionally one or
more SCells.
**Secondary node** : in MR-DC, the radio access node, with no control plane
connection to the core network, providing additional resources to the UE. It
may be an en-gNB (in EN-DC), a Secondary ng-eNB (in NE-DC) or a Secondary gNB
(in NR-DC and NGEN-DC).
**SCG bearer** : in MR-DC, a radio bearer with an RLC bearer (or two RLC
bearers, in case of CA packet duplication in an E-UTRAN cell group, or up to
four RLC bearers in case of CA packet duplication in a NR cell group) only in
the SCG.
**SN terminated bearer:** in MR-DC, a radio bearer for which PDCP is located
in the SN.
**SpCell** : primary cell of a master or secondary cell group.
**SRB3** : in EN-DC, NGEN-DC and NR-DC, a direct SRB between the SN and the
UE.
**Split bearer:** in MR-DC, a radio bearer with RLC bearers both in MCG and
SCG.
**Split PDU Session (or PDU Session split):** a PDU Session whose QoS Flows
are served by more than one SDAP entities in the NG-RAN.
**Split SRB** : in MR-DC, a SRB between the MN and the UE with RLC bearers
both in MCG and SCG.
**User plane resource configuration:** in MR-DC with 5GC, encompasses radio
network resources and radio access resources related to either one or more PDU
sessions, one or more QoS flows, one or more DRBs, or any combination thereof.
**V2X sidelink communication** : AS functionality enabling V2X Communication
as defined in TS 23.285 [19], between nearby UEs, using E-UTRA technology but
not traversing any network node.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1] and TS 36.300 [2].
BFD Beam Failure Detection
CHO Conditional Handover
CLI Cross Link Interference
CPA Conditional PSCell Addition
CPAC Conditional PSCell Addition or Change
CPC Conditional PSCell Change
DAPS Dual Active Protocol Stack
DC Intra-E-UTRA Dual Connectivity
DCP DCI with CRC scrambled by PS-RNTI
EN-DC E-UTRA-NR Dual Connectivity
IAB Integrated Access and Backhaul
MCG Master Cell Group
MN Master Node
MR-DC Multi-Radio Dual Connectivity
NE-DC NR-E-UTRA Dual Connectivity
NGEN-DC NG-RAN E-UTRA-NR Dual Connectivity
NR-DC NR-NR Dual Connectivity
RLM Radio Link Monitoring
SCG Secondary Cell Group
SMTC SS/PBCH block Measurement Timing Configuration
SN Secondary Node
V2X Vehicle-to-Everything
# 4 Multi-Radio Dual Connectivity
## 4.1 General
### 4.1.1 Common MR-DC principles
Multi-Radio Dual Connectivity (MR-DC) is a generalization of the Intra-E-UTRA
Dual Connectivity (DC) described in TS 36.300 [2], where a multiple Rx/Tx
capable UE may be configured to utilise resources provided by two different
nodes connected via non-ideal backhaul, one providing NR access and the other
one providing either E-UTRA or NR access. One node acts as the MN and the
other as the SN. The MN and SN are connected via a network interface and at
least the MN is connected to the core network.
The MN and/or the SN can be operated with shared spectrum channel access.
All functions specified for a UE may be used for an IAB-MT unless otherwise
stated. Similar as specified for UE, the IAB-MT can access the network using
either one network node or using two different nodes with EN-DC and NR-DC
architectures. In EN-DC, the backhauling traffic over the E-UTRA radio
interface is not supported.
NOTE 1: MR-DC is designed based on the assumption of non-ideal backhaul
between the different nodes but can also be used in case of ideal backhaul.
NOTE 2: All MR-DC normative text and procedures in this version of the
specification show the aggregated node case. The details about non-aggregated
node for MR-DC operation are described in TS 38.401 [7].
### 4.1.2 MR-DC with the EPC
E-UTRAN supports MR-DC via E-UTRA-NR Dual Connectivity (EN-DC), in which a UE
is connected to one eNB that acts as a MN and one en-gNB that acts as a SN.
The eNB is connected to the EPC via the S1 interface and to the en-gNB via the
X2 interface. The en-gNB might also be connected to the EPC via the S1-U
interface and other en-gNBs via the X2-U interface.
The EN-DC architecture is illustrated in Figure 4.1.2-1 below.
Figure 4.1.2-1: EN-DC Overall Architecture
### 4.1.3 MR-DC with the 5GC
#### 4.1.3.1 E-UTRA-NR Dual Connectivity
NG-RAN supports NG-RAN E-UTRA-NR Dual Connectivity (NGEN-DC), in which a UE is
connected to one ng-eNB that acts as a MN and one gNB that acts as a SN.
#### 4.1.3.2 NR-E-UTRA Dual Connectivity
NG-RAN supports NR-E-UTRA Dual Connectivity (NE-DC), in which a UE is
connected to one gNB that acts as a MN and one ng-eNB that acts as a SN.
#### 4.1.3.3 NR-NR Dual Connectivity
NG-RAN supports NR-NR Dual Connectivity (NR-DC), in which a UE is connected to
one gNB that acts as a MN and another gNB that acts as a SN. In addition, NR-
DC can also be used when a UE is connected to a single gNB, acting both as a
MN and as a SN, and configuring both MCG and SCG.
## 4.2 Radio Protocol Architecture
### 4.2.1 Control Plane
In MR-DC, the UE has a single RRC state, based on the MN RRC and a single
C-plane connection towards the Core Network. Figure 4.2.1-1 illustrates the
Control plane architecture for MR-DC. Each radio node has its own RRC entity
(E-UTRA version if the node is an eNB or NR version if the node is a gNB)
which can generate RRC PDUs to be sent to the UE.
RRC PDUs generated by the SN can be transported via the MN to the UE. The MN
always sends the initial SN RRC configuration via MCG SRB (SRB1), but
subsequent reconfigurations may be transported via MN or SN. When transporting
RRC PDU from the SN, the MN does not modify the UE configuration provided by
the SN.
In E-UTRA connected to EPC, at initial connection establishment SRB1 uses
E-UTRA PDCP. If the UE supports EN-DC, regardless whether EN-DC is configured
or not, after initial connection establishment, MCG SRBs (SRB1 and SRB2) can
be configured by the network to use either E-UTRA PDCP or NR PDCP (either SRB1
and SRB2 are both configured with E-UTRA PDCP, or they are both configured
with NR PDCP). Change from E-UTRA PDCP to NR PDCP (or vice-versa) is supported
via a handover procedure (reconfiguration with mobility) or, for the initial
change of SRB1 from E-UTRA PDCP to NR PDCP, with a reconfiguration without
mobility before the initial security activation.
If the SN is a gNB (i.e. for EN-DC, NGEN-DC and NR-DC), the UE can be
configured to establish a SRB with the SN (SRB3) to enable RRC PDUs for the SN
to be sent directly between the UE and the SN. RRC PDUs for the SN can only be
transported directly to the UE for SN RRC reconfiguration not requiring any
coordination with the MN. Measurement reporting for mobility within the SN can
be done directly from the UE to the SN if SRB3 is configured.
Split SRB is supported for all MR-DC options, allowing duplication of RRC PDUs
generated by the MN, via the direct path and via the SN. Split SRB uses NR
PDCP. This version of the specification does not support the duplication of
RRC PDUs generated by the SN via the MN and SN paths.
In EN-DC, the SCG configuration is kept in the UE during suspension. During
connection resumption, if the UE supports resuming with EN-DC, the UE can be
configured to release, restore, or reconfigure the SCG configuration.
Otherwise, the UE releases the SCG configuration (but not the radio bearer
configuration) during resumption initiation.
In MR-DC with 5GC, the UE stores the PDCP/SDAP configuration and the SCG
configuration when moving to RRC Inactive. During connection resumption, if
the UE supports resuming with MR-DC, the UE can be configured to release,
restore, or reconfigure the SCG configuration. Otherwise, it releases the SCG
configuration.
Figure 4.2.1-1: Control plane architecture for EN-DC (left) and MR-DC with 5GC
(right).
### 4.2.2 User Plane
In MR-DC, from a UE perspective, three bearer types exist: MCG bearer, SCG
bearer and split bearer. These three bearer types are depicted in Figure
4.2.2-1 for MR-DC with EPC (EN-DC) and in Figure 4.2.2-2 for MR-DC with 5GC
(NGEN-DC, NE-DC and NR-DC).
In E-UTRA connected to EPC, _if the UE supports EN-DC,_ regardless whether EN-
DC is configured or not, _the network can configure either E-UTRA PDCP or NR
PDCP for MN terminated MCG bearers while NR PDCP is always used for all other
bearers_. Change from E-UTRA to NR PDCP or vice-versa can be performed via a
reconfiguration procedure (with or without handover), either using release and
add of the DRBs or using the full configuration option.
_In MR-DC with 5GC, NR PDCP is always used for all bearer types. I_ n NGEN-DC,
E-UTRA RLC/MAC is used in the MN while NR RLC/MAC is used in the SN. _I_ n NE-
DC, NR RLC/MAC is used in the MN while E-UTRA RLC/MAC is used in the SN. In
NR-DC, NR RLC/MAC is used in both MN and SN.
Figure 4.2.2-1: Radio Protocol Architecture for MCG, SCG and split bearers
from a UE perspective in MR-DC with EPC (EN-DC)
Figure 4.2.2-2: Radio Protocol Architecture for MCG, SCG and split bearers
from a UE perspective in MR-DC with 5GC (NGEN-DC, NE-DC and NR-DC).
From a network perspective, each bearer (MCG, SCG and split bearer) can be
terminated either in MN or in SN. Network side protocol termination options
are shown in Figure 4.2.2-3 for MR-DC with EPC (EN-DC) and in Figure 4.2.2-4
for MR-DC with 5GC (NGEN-DC, NE-DC and NR-DC).
NOTE 1: Even if only SCG bearers are configured for a UE, for SRB1 and SRB2
the logical channels are always configured at least in the MCG, i.e. this is
still an MR-DC configuration and a PCell always exists.
NOTE 2: If only MCG bearers are configured for a UE, i.e. there is no SCG,
this is still considered an MR-DC configuration, as long as at least one of
the bearers is terminated in the SN.
Figure 4.2.2-3: Network side protocol termination options for MCG, SCG and
split bearers in MR-DC with EPC (EN-DC).
Figure 4.2.2-4: Network side protocol termination options for MCG, SCG and
split bearers in MR-DC with 5GC (NGEN-DC, NE-DC and NR-DC).
## 4.3 Network interfaces
### 4.3.1 Control Plane
#### 4.3.1.1 Common MR-DC principles
In MR-DC, there is an interface between the MN and the SN for control plane
signalling and coordination. For each MR-DC UE, there is also one control
plane connection between the MN and a corresponding CN entity. The MN and the
SN involved in MR-DC for a certain UE control their radio resources and are
primarily responsible for allocating radio resources of their cells.
Figure 4.3.1.1-1 shows C-plane connectivity of MN and SN involved in MR-DC for
a certain UE.
Figure 4.3.1.1-1: C-Plane connectivity for EN-DC (left) and MR-DC with 5GC
(right).
#### 4.3.1.2 MR-DC with EPC
In MR-DC with EPC (EN-DC), the involved core network entity is the MME. S1-MME
is terminated in MN and the MN and the SN are interconnected via X2-C.
#### 4.3.1.3 MR-DC with 5GC
In MR-DC with 5GC (NGEN-DC, NE-DC and NR-DC), the involved core network entity
is the AMF. NG-C is terminated in the MN and the MN and the SN are
interconnected via Xn-C.
### 4.3.2 User Plane
#### 4.3.2.1 Common MR-DC principles
There are different U-plane connectivity options of the MN and SN involved in
MR-DC for a certain UE, as shown in Figure 4.3.2.1-1. The U-plane connectivity
depends on the bearer option configured:
\- For _MN terminated bearers_ , the user plane connection to the CN entity is
terminated in the MN;
\- For _SN terminated bearers_ , the user plane connection to the CN entity is
terminated in the SN;
\- The transport of user plane data over the Uu either involves MCG or SCG
radio resources or both:
\- For _MCG bearers_ , only MCG radio resources are involved;
\- For _SCG bearers_ , only SCG radio resources are involved;
\- For _split bearers_ , both MCG and SCG radio resources are involved.
\- For split bearers, _MN terminated SCG bearers_ and _SN terminated MCG
bearers_ , PDCP data is transferred between the MN and the SN via the MN-SN
user plane interface.
Figure 4.3.2.1-1: U-Plane connectivity for EN-DC (left) and MR-DC with 5GC
(right).
#### 4.3.2.2 MR-DC with EPC
For MR-DC with EPC (EN-DC), X2-U interface is the user plane interface between
MN and SN, and S1-U is the user plane interface between the MN, the SN or both
and the S-GW.
#### 4.3.2.3 MR-DC with 5GC
For MR-DC with 5GC (NGEN-DC, NE-DC and inter-gNB NR-DC), Xn-U interface is the
user plane interface between MN and SN, and NG-U is the user plane interface
between the MN, the SN or both and the UPF.
# 5 Layer 1 related aspects
In MR-DC, two or more Component Carriers (CCs) may be aggregated over two cell
groups. A UE may simultaneously receive or transmit on multiple CCs depending
on its capabilities. The maximum number of configured CCs for a UE is 32 for
DL and UL. Depending on UE\'s capabilities, up to 31 CCs can be configured for
an E-UTRA cell group when the NR cell group is configured. For the NR cell
group, the maximum number of configured CCs for a UE is 16 for DL and 16 for
UL.
A gNB may configure the same Physical Cell ID (PCI) to more than one NR cell
it serves. To avoid PCI confusion for MR-DC, NR PCIs should be allocated in a
way that an NR cell is uniquely identifiable by a PCell identifier. This PCell
is in the coverage area of an NR cell included in the MR-DC operation. In
addition, NR PCIs should only be re-used in NR cells on the same SSB frequency
sufficiently distant from each other. X2-C/Xn-C signalling supports
disambiguation of NR PCIs by including the CGI of the PCell in respective
X2AP/XnAP messages (e.g. SGNB ADDITION REQUEST/S-NODE ADDITION REQUEST) and by
providing neighbour cell relationship via non-UE associated signaling (e.g.
via the Xn Setup procedure or the NG-RAN node Configuration Update procedure).
NR-DC supports the case of no synchronization between PCell and PSCell.
However, some UEs may support NR-DC only if slot-level synchronization between
PCell and PSCell is ensured.
In MR-DC, power sharing can be performed within a frequency range with either
semi-static or dynamic power sharing. With semi-static power sharing, the
maximum UE transmission power is semi-statically split between MCG and SCG by
RRC configuration. With dynamic power sharing:
\- when determining the UL transmission power of an SCG transmission in
(NG)EN-DC or in NR-DC, the UE takes into account transmission(s) on MCG
overlapping with any part of the SCG transmission;
\- when determining the UL transmission power of an MCG transmission in NE-DC,
the UE takes into account transmission(s) on SCG overlapping with any part of
the MCG transmission.
Details are specified in TS38.213[21].
In EN-DC, a UE configured with uplink Tx switching can have Tx dynamically
switched between E-UTRA uplink carrier and NR uplink carrier for enabling 2Tx
UL transmission on NR carrier.
# 6 Layer 2 related aspects
## 6.1 MAC Sublayer
In MR-DC, the UE is configured with two MAC entities: one MAC entity for the
MCG and one MAC entity for the SCG. The serving cells other than the PCell can
be activated/deactivated by RRC or MAC Control Element. For
activation/deactivation by MAC Control Element, the serving cells of the MCG
other than the PCell can only be activated/deactivated by the MAC Control
Element received on MCG, and the serving cells of the SCG other than PSCell
can only be activated/ deactivated by the MAC Control Element received on SCG.
The MAC entity applies the bitmap for the associated cells of either MCG or
SCG. When the SCG is not deactivated, the PSCell is always activated like the
PCell (i.e. deactivation timer is not applied to PSCell). With the exception
of PUCCH SCell, one deactivation timer is configured per SCell by RRC.
In MR-DC, semi-persistent scheduling (SPS) resources and configured grant (CG)
resources can be configured on serving cells in both MCG and SCG.
In MR-DC, for 4-step RA type, contention based random access (CBRA) procedure
is supported on both PCell and PSCell while contention free random access
(CFRA) procedure is supported on all serving cells in both MCG and SCG. For
2-step RA type, CBRA can be supported on the PCell, if the MN is a gNB (i.e.
for NE-DC and NR-DC) and on the PSCell, if the SN is a gNB (i.e, for EN-DC,
NGEN-DC and NR-DC) while CFRA is only supported on the PCell, if the MN is a
gNB (i.e. for NE-DC and NR-DC).
In (NG)EN-DC and NR-DC, when SCG is deactivated as described in clause 7.13,
the TA timer associated with SCG continues running, the UE considers the TA is
valid as long as TA timer is running. In case of SCG activation, the UE can be
instructed by the network to perform random access towards PSCell even if the
TA timer associated with PSCell is running and RLF and beam failure are not
declared. Besides, the UE can be instructed by the network to perform SCG
activation without performing random access, if the TA timer associated with
PSCell is running and RLM and beam failure detection are configured but RLF or
beam failure is not declared. In case of network-initiated SCG activation,
both CBRA and CFRA on PSCell are supported. For CFRA, the dedicated RACH
resources can be provided in the RRC message used to activate SCG.
In MR-DC, the BSR configuration, triggering and reporting are independently
performed per cell group. For split bearers, the PDCP data is considered in
BSR in the cell group(s) configured by RRC.
In MR-DC, separate DRX configurations are provided for MCG and SCG. A
secondary DRX group can be configured in MR-DC for a cell group that includes
cells in different Frequency Ranges as specified in TS 38.331 [4].
In MR-DC, PHR is independently configured per cell group. Events in one cell
group can trigger power headroom reporting in both MCG and SCG. Power headroom
information for one cell group is also included in a PHR transmitted in the
other cell group. While the SCG is deactivated, PHR for SCG is not reported.
In MR-DC, consistent LBT failure recovery procedure as described in clause
5.6.1 in TS 38.300 [3] can be configured for both MAC entities of MCG and/or
SCG when operating with shared spectrum channel access.
In MR-DC, for power saving purpose, the UE can be configured with DCP to be
monitored on the PCell, if the MN is a gNB (i.e. for NE-DC and NR-DC) and/or
with DCP to be monitored on the PSCell, if the SN is a gNB (i.e. for EN-DC,
NGEN-DC and NR-DC).
In MR-DC, the UE may be configured with enhanced intra-UE overlapping
resources prioritization on MN, if the MN is a gNB (i.e. for NE-DC and NR-DC)
and on SN, if the SN is a gNB (i.e. for EN-DC, NGEN-DC and NR-DC).
## 6.2 RLC Sublayer
Both RLC AM and UM can be configured for MR-DC, for all bearer types (MCG, SCG
and split bearers).
## 6.3 PDCP Sublayer
In EN-DC, CA duplication (see [3]) can be applied in the MN and in the SN, but
MCG bearer CA duplication can be configured only in combination with E-UTRAN
PDCP and MCG bearer CA duplication can be configured only if DC duplication is
not configured for any split bearer.
In NGEN-DC, CA duplication can only be configured for SCG bearer. In NE-DC, CA
duplication can only be configured for MCG bearer. In NR-DC, CA duplication
can be configured for both MCG and SCG bearers, and can be configured together
with DC duplication.
In MR-DC, RoHC and EHC (as described in TS 36.323 [15] and TS 38.323 [16]) can
be configured for all the bearer types. In MR-DC with 5GC, UDC (as described
in TS 38.323 [16]) can be configured for all the bearer types.
## 6.4 SDAP Sublayer
In MR-DC with 5GC, the network may host up to two SDAP protocol entities for
each individual PDU session, one for MN and another one for SN (see clause
8.1). The UE is configured with one SDAP protocol entity per PDU session.
## 6.5 BAP Sublayer
In EN-DC and NR-DC, IAB-node and IAB-donor-DU can be configured with BAP
sublayer for backhaul traffic (as described in TS 38.300 [3] and TS 38.340
[17]). In EN-DC, the BAP sublayer routes the backhaul traffic via only the NR
interface. In NR-DC, the BAP sublayer can route the backhaul traffic via the
two NR interfaces to the same IAB-donor.
# 7 RRC related aspects
## 7.1 System information handling
In MR-DC, the SN is not required to broadcast system information other than
for radio frame timing and SFN. System information for initial configuration
is provided to the UE by dedicated RRC signalling via the MN. The UE acquires,
at least, radio frame timing and SFN of SCG from the PSS/SSS and MIB (if the
SN is an eNB) / NR-PSS/SSS and PBCH (if the SN is a gNB) of the PSCell. In EN-
DC, SN may broadcast system information to allow only IAB-MT to access the SN.
NOTE: The option that the SN does not broadcast system information other than
radio frame timing and SFN relies on proper OAM configuration.
Additionally, upon change of the relevant system information of a configured
SCell, the network releases and subsequently adds the concerned SCell (with
updated system information), via one or more _RRC reconfiguration_ messages
sent on SRB1 or SRB3, if configured.
## 7.2 Measurements
If the measurement is configured to the UE in preparation for the Secondary
Node Addition procedure described in clause 10.2, the Master node should
configure the measurement to the UE.
In case of the intra-secondary node mobility described in clause 10.3, the SN
should configure the measurement to the UE in coordination with the MN, if
required.
The Secondary Node Change procedure described in clause 10.5 can be triggered
by both the MN (only for inter-frequency secondary node change) and the SN.
For secondary node changes triggered by the SN, the RRM measurement
configuration is maintained by the SN which also processes the measurement
reporting, without providing the measurement results to the MN.
Measurements can be configured independently by the MN and by the SN (intra-
RAT measurements on serving and non-serving frequencies). The MN indicates the
maximum number of frequency layers and measurement identities of intra-
frequency and inter-frequency measurement that can be used in the SN to ensure
that UE capabilities are not exceeded. In MR-DC, to assist MN to identify the
measurement type, the SN indicates to the MN the list of SCG serving
frequencies. In NR-DC, to assist SN to identify the measurement type, the MN
indicates also to SN the list of MCG serving frequencies. The SN can also
request the MN for new maximum values of the number of measurement identities
that it can configure, and it is up to the MN whether to accommodate the SN
request, based on the capability coordination principles as described in 7.3.
If the SN receives from the MN a new value for the maximum number of
measurement identities, is SN responsibility to ensure that its configured
measurement identities to comply with the new limit.
If MN and SN both configure measurements on the same carrier frequency then
the configurations need to be consistent (if the network wants to ensure these
are considered as a single measurement layer). Each node (MN and SN) can
configure independently a threshold for the SpCell quality. In (NG)EN-DC
scenario, when the PCell quality is above the threshold configured by the MN,
the UE is still required to perform inter-RAT measurements configured by the
MN on the SN RAT (while it\'s not required to perform intra-RAT measurements);
when the PSCell quality is above the threshold configured by the SN, the UE is
not required to perform measurements configured by the SN. In NR-DC or NE-DC
scenario, when the PCell quality is above the threshold configured by the MN,
the UE is not required to perform measurements configured by the MN; when the
PSCell quality is above the threshold configured by the SN, the UE is not
required to perform measurements configured by the SN.
NOTE: The SN cannot renegotiate the number of frequency layers allocated by
the MN in this version of the protocol.
In MR-DC, both the MN and the SN can configure CGI reporting. The MN can
configure CGI reporting for intra-RAT and inter-RAT cells but the SN can only
configure CGI reporting of intra-RAT cells. At any point in time, the UE can
be configured with at most one CGI reporting configuration. For CGI reporting
coordination, the SN sends the CGI measurement request and the embedded CGI
reporting configuration to the MN. Optionally, the SN sends the unknown cell
information to the MN. If there is no ongoing CGI reporting measurement on UE
side, the MN forwards the SN CGI measurement configuration to UE. Otherwise
the MN rejects the request by sending X2/Xn reject message. In case the SN
indicates the unknown cell information, and the CGI information of the
requested cell is already available in the MN, the MN can also reject the
request, and sends the CGI information of the requested cell to the SN. The SN
cannot configure the CGI measurement using the SRB3.
Both MN-configured and SN-configured RRM measurements are supported while the
SCG is deactivated. The PSCell measurement cycle when in deactivated SCG state
is configured by RRC.
When SRB3 is not configured or the SCG is deactivated, reports for
measurements configured by the SN are sent on SRB1. When SRB3 is configured
and SCG transmission of radio bearers is not suspended and the SCG is not
deactivated, reports for measurements configured by the SN are sent on SRB3.
Measurement results related to the target SN can be provided by MN to target
SN at MN initiated SN change procedure. Measurement results of target SN can
be forwarded from source SN to target SN via MN at SN initiated SN change
procedure. Measurement results related to the target SN can be provided by
source MN to target MN at Inter-MN handover with/without SN change procedure.
Measurement results according to measurement configuration from the MN are
encoded according to SN RRC when they are provided by MN to SN in _SgNB
Addition Request_ message / _SN Addition Request_ message. During SN initiated
SN change procedure, measurement results according to measurement
configuration from SN are encoded according to SN RRC when they are provided
by MN to SN in _SgNB Addition Request_ message / _SN Addition Request_
message.
Per-UE or per-FR measurement gaps can be configured, depending on UE
capability to support independent FR measurement and network preference. Per-
UE gap applies to both FR1 (E-UTRA, UTRA-FDD and NR) and FR2 (NR) frequencies.
For per-FR gap, two independent gap patterns (i.e. FR1 gap and FR2 gap) are
configured for FR1 and FR2 respectively. The UE may also be configured with a
per-UE gap sharing configuration (applying to per-UE gap) or with two separate
gap sharing configurations (applying to FR1 and FR2 measurement gaps
respectively) [8].
A measurement gap configuration is always provided:
\- In EN-DC, NGEN-DC and NE-DC, for UEs configured with E-UTRA inter-frequency
measurements as described in table 9.1.2-2 in TS 38.133 [8];
\- In EN-DC and NGEN-DC, for UEs configured with UTRAN and GERAN measurements
as described in table 9.1.2-2 in TS 38.133 [8];
\- In NR-DC, for UEs configured with E-UTRAN measurements as described in
table 9.1.2-3 in TS 38.133 [8];
\- In NR-DC, NE-DC, for UEs configured with UTRAN measurements as described in
table 9.4.6.3-1 and 9.4.6.3-2 in TS 38.133 [8];
\- In MR-DC, for UEs that support either per-UE or per-FR gaps, when the
conditions to measure SSB based inter-frequency measurement or SSB based
intra-frequency measurement as described in clause 9.2.4 in TS 38.300 [3] are
met;
If per-UE gap is used, the MN decides the gap pattern and the related gap
sharing configuration. If per-FR gap is used, in EN-DC and NGEN-DC, the MN
decides the FR1 gap pattern and the related gap sharing configuration for FR1,
while the SN decides the FR2 gap pattern and the related gap sharing
configuration for FR2; in NE-DC and NR-DC, the MN decides both the FR1 and FR2
gap patterns and the related gap sharing configurations.
In EN-DC and NGEN-DC, the measurement gap configuration from the MN to the UE
indicates if the configuration from the MN is a per-UE gap or an FR1 gap
configuration. The MN also indicates the configured per-UE or FR1 measurement
gap pattern and the gap purpose (per-UE or per-FR1) to the SN. Measurement gap
configuration assistance information can be exchanged between the MN and the
SN. For the case of per-UE gap, the SN indicates to the MN the list of SN
configured frequencies in FR1 and FR2 measured by the UE. For the per-FR gap
case, the SN indicates to the MN the list of SN configured frequencies in FR1
measured by the UE and the MN indicates to the SN the list of MN configured
frequencies in FR2 measured by the UE.
In NE-DC, the MN indicates the configured per-UE or FR1 measurement gap
pattern to the SN. The SN can provide a gap request to the MN, without
indicating any list of frequencies.
In NR-DC, the MN indicates the configured per-UE, FR1 or FR2 measurement gap
pattern and the gap purpose to the SN. The SN can indicate to the MN the list
of SN configured frequencies in FR1 and FR2 measured by the UE.
In (NG)EN-DC and NR-DC, SMTC can be used for PSCell addition/PSCell change to
assist the UE in finding the SSB in the target PSCell. In case the SMTC of the
target PSCell is provided by both MN and SN it is up to UE implementation
which one to use.
CLI measurements can be configured for NR cells in all MR-DC options. In EN-DC
and NGEN-DC, only the SN can configure CLI measurements. In NE-DC, only the MN
can configure CLI measurements. In NR-DC, both the MN and the SN can configure
CLI measurements, and the MN informs the SN about the maximum number of CLI
measurement resources that can be configured by the SN to ensure that the
total number of CLI measurement resources does not exceed the UE capabilities.
## 7.3 UE capability coordination
In (NG)EN-DC and NE-DC, the capabilities of a UE supporting MR-DC are carried
by different capability containers. Some MR-DC related capabilities are in the
MR-DC container e.g. MR-DC band combinations, while other MR-DC related
capabilities are contained in the E-UTRA and NR capability containers e.g.
feature sets as described in TS 38.300 [3]. The MR-DC capabilities in the MR-
DC container need to be visible to both MN and SN, while the capabilities in
the E-UTRA and NR containers only need to be visible to the node of the
concerned RAT.
In NR-DC, all NR-DC related capabilities are in the NR capability container
and are visible to both MN and SN.
When retrieving MR-DC related capabilities, the MN shall provide an MR-DC
filter that affects the MR-DC related capabilities in MR-DC, E-UTRA and NR
capability containers. When using different _UE capability enquiry_ messages
to retrieve the different containers, the MN shall employ the same MR-DC
filter in all enquiry messages. In the E-UTRA RRC UE capability enquiry, the
MR-DC filter is also used for retrieval of NR capabilities i.e. there is in
fact one MR-DC/NR filter (while there is a separate filter for E-UTRA
capabilities). Furthermore, the MN stores the retrieved capabilities and the
corresponding filter, used to retrieve those capabilities, in the core network
for later use.
For the UE capabilities requiring coordination between E-UTRA and NR (i.e.
band combinations, feature sets and the maximum power for FR1 the UE can use
in SCG) or between NR MN and NR SN (i.e. band combinations, feature sets and
the maximum power for FR1 and FR2), it is up to the MN to decide on how to
resolve the dependency between MN and SN configurations. The MN then provides
the resulting UE capabilities usable for SCG configuration to the SN,
including the list of allowed MR-DC band combinations and feature sets, and
the SN indicates the selected band combination and feature set to the MN. When
subsequently reconfiguring the SCG, the SN should inform the MN whenever the
band combination and/or feature set it selected for the SCG changes (i.e. even
if the selection concerns a band combination and feature set that is allowed).
As part of an SN initiated SN modification, the SN may also indicate the
desired UE capabilities usable for SCG configuration (e.g. a band combination
and a feature set) outside those allowed by the MN (i.e. it may re-negotiate
the UE capabilities for SCG configuration), and it is up to the MN to make the
final decision whether to accept or reject the request. If the MN accepts the
request, the MN may provide the resulting UE capabilities e.g. by indicating
the allowed band combinations and feature sets. If MN accepts but does not
provide resulting UE capabilities, SN assumes the UE capabilities usable for
SCG configuration are updated in accordance with the modification it
requested. Otherwise, the MN rejects the request by sending X2/Xn refuse
message.
In EN-DC and MR-DC with 5GC, the MN may provide the UE radio capability ID to
the SN. For EN-DC, the SN may retrieve the UE Radio Capability information
associated to a UE radio capability ID from the MN. For MR-DC with 5GC, the SN
may retrieve the UE radio capability information associated to a UE radio
capability ID from the 5GC.
## 7.4 Handling of combined MN/SN RRC messages
When both MCG and SCG reconfiguration is required due to the need for
coordination with the MN, the _SN RRC reconfiguration_ message is encapsulated
in an MN RRC message that also carries the corresponding MCG reconfiguration
that ensures that the combined configuration can be jointly processed by the
UE. If the MN terminates a bearer using NR PDCP, the NR PDCP configuration is
generated by the MN itself. If the SN terminates the bearer, the SN generates
the NR PDCP configuration and sends it to the MN as a separate container.
The UE uses a joint success/failure procedure for messages in an encapsulating
MN RRC message. A failure of the MN RRC messages, including one encapsulated
SN RRC message with or without any MCG reconfiguration fields, triggers a re-
establishment procedure. Each _SN RRC reconfiguration_ message should have its
own RRC response message even when the SN RRC message is encapsulated in an MN
RRC message. The SN RRC response message is forwarded over X2/Xn to the SN. If
a _SN RRC reconfiguration_ message is contained in a MN RRC message, the UE
sends a MN RRC response message that encapsulates the SN RRC response message.
NOTE: If the MN RRC message does not encapsulate an _SN RRC reconfiguration_
message (i.e. an SCG configuration) but only information elements generated by
the SN (e.g. the PDCP configuration for an SN terminated bearer), the UE will
not send an SN RRC response message.
## 7.5 SRB3
SRB3 is supported in EN-DC, NGEN-DC and NR-DC, but not in NE-DC.
The decision to establish SRB3 is taken by the SN, which provides the SRB3
configuration using an SN RRC message. SRB3 establishment and release can be
done at Secondary Node Addition and Secondary Node Change. SRB3
reconfiguration can be done at Secondary Node Modification procedure.
SRB3 may be used to send _SN RRC Reconfiguration_ , _SN RRC Reconfiguration
Complete_ , _SN Measurement Report, SN Failure Information_ _(i.e., in case of
failure for an SCG RLC bearer), SN UE Assistance Information_ message and _SN_
_IABOtherInformation_ , only in procedures where the MN is not involved. _SN
RRC Reconfiguration Complete_ messages are mapped to the same SRB as the
message initiating the procedure. _SN Measurement Report_ messages are mapped
to SRB3, if configured, regardless of whether the configuration is received
directly from the SN or via the MN. No MN RRC messages are mapped to SRB3.
If split SRB1 is not configured, SRB3 may be used by the UE to transmit to the
MN an encapsulated _MCG Failure Information_ message in the
_ULInformationTransferMRDC_ message and receive in response an encapsulated
_RRC reconfiguration_ message, _MobilityFromNRCommand_ message,
_MobilityFromEUTRACommand_ message or _RRC release_ message in the
_DLInformationTransferMRDC_ message.
SRB3 is modelled as one of the SRBs defined in TS 38.331 [4] and uses the NR-
DCCH logical channel type. RRC PDUs on SRB3 are ciphered and integrity
protected using NR PDCP, with security keys derived from S-K~gNB~. The SN
selects ciphering and integrity protection algorithms for the SRB3 and
provides them to the MN within the SCG Configuration for transmission to the
UE.
NOTE: A NR SCG RRC message sent via E-UTRA MCG SRB is protected by E-UTRA MCG
SRB security (NR security is not used in this case).
SRB3 is of higher scheduling priority than all DRBs. The default scheduling
priorities of split SRB1 and SRB3 are the same.
There is no requirement on the UE to perform any reordering of RRC messages
between SRB1 and SRB3.
When SCG is released, SRB3 is released.
## 7.6 Split SRB
Split SRB is supported for both SRB1 and SRB2 (split SRB is not supported for
SRB0 and SRB3) in all MR-DC cases. RRC PDUs on split SRB are ciphered and
integrity protected using NR PDCP.
Split SRB can be configured by the MN in Secondary Node Addition and/or
Modification procedure, with SN configuration part provided by the SN. A UE
can be configured with both split SRB and SRB3 simultaneously. SRB3 and the
SCG leg of split SRB can be independently configured.
For the split SRB, the selection of transmission path in downlink depends on
network implementation. For uplink, the UE is configured via MN RRC signalling
whether to use MCG path or duplicate the transmission on both MCG and SCG.
## 7.7 SCG/MCG failure handling
RLF is declared separately for the MCG and for the SCG.
If radio link failure is detected for MCG, fast MCG link recovery is
configured and the SCG is not deactivated, the UE triggers fast MCG link
recovery. Otherwise, the UE initiates the RRC connection re-establishment
procedure. During the execution of PSCell addition or PSCell change, if radio
link failure is detected for MCG, the UE initiates the RRC connection re-
establishment procedure.
During fast MCG link recovery, the UE suspends MCG transmissions for all radio
bearers, except SRB0, and, if any, BH RLC channels and reports the failure
with _MCGFailureInformation_ message to the MN via the SCG, using the SCG leg
of split SRB1 or SRB3.
The UE includes in the _MCGFailureInformation_ message the measurement results
available according to current measurement configuration of both the MN and
the SN. Once the fast MCG link recovery is triggered, the UE maintains the
current measurement configurations from both the MN and the SN, and continues
measurements based on configuration from the MN and the SN, if possible. The
UE initiates the RRC connection re-establishment procedure if it does not
receive an _RRCConnectionReconfiguration_ message, _RRCReconfiguration_
message, _MobilityFromNRCommand_ message, _MobilityFromEUTRACommand_ message,
_RRCConnectionRelease_ message or _RRCRelease_ message within a certain time
after fast MCG link recovery was initiated.
Upon reception of the _MCGFailureInformation_ message, the MN can send
_RRCConnectionReconfiguration_ message, _RRCReconfiguration_ message,
_MobilityFromNRCommand_ message, _MobilityFromEUTRACommand_ message,
_RRCConnectionRelease_ message or _RRCRelease_ message to the UE, using the
SCG leg of split SRB1 or SRB3. Upon receiving an
_RRCConnectionReconfiguration_ message, _RRCReconfiguration_ message,
_MobilityFromNRCommand_ message or _MobilityFromEUTRACommand_ message, the UE
resumes MCG transmissions for all radio bearers. Upon receiving an
_RRCConnectionRelease_ message or _RRCRelease_ message, the UE releases all
the radio bearers and configurations.
NOTE 1: It is up to network implementation to guarantee that the RRC-related
messages are delivered to the UE by the SN before the release of its control
plane resources.
The following SCG failure cases are supported:
\- SCG RLF;
\- SCG beam failure while the SCG is deactivated;
\- SN addition/change failure;
\- For EN-DC, NGEN-DC and NR-DC, SCG configuration failure or CPC
configuration failure (only for messages on SRB3);
\- For EN-DC, NGEN-DC and NR-DC, SCG RRC integrity check failure (on SRB3);
\- For EN-DC, NGEN-DC and NR-DC, consistent UL LBT failure on PSCell;
\- For IAB-MT, reception of a BH RLF indication from SCG;
\- CPA/CPC execution failure.
Upon SCG failure, if MCG transmissions of radio bearers are not suspended, the
UE suspends SCG transmissions for all radio bearers and, if any, BH RLC
channels, if the SCG failure is not triggered by SCG beam failure, and reports
the _SCGFailureInformation_ to the MN, instead of triggering re-establishment.
If SCG failure is detected while MCG transmissions for all radio bearers are
suspended, the UE initiates the RRC connection re-establishment procedure.
SCG/MCG failure handling by UE also applies to IAB MT.
In all SCG failure cases, the UE maintains the current measurement
configurations from both the MN and the SN and the UE continues measurements
based on configuration from the MN and the SN if possible. The SN measurements
configured to be routed via the MN will continue to be reported after the SCG
failure.
NOTE 2: UE may not continue measurements based on configuration from the SN
after SCG failure in certain cases (e.g. UE cannot maintain the timing of
PSCell).
The UE includes in the _SCGFailureInformation_ message the measurement results
available according to current measurement configuration of both the MN and
the SN. The MN handles the _SCGFailureInformation_ message and may decide to
keep, change, or release the SN/SCG. In all the cases, the measurement results
according to the SN configuration and the SCG failure type may be forwarded to
the old SN and/or to the new SN.
In case of CPA/CPC, upon transmission of the _SCGFailureInformation_ message
to the MN, the UE stops evaluating the CPA/CPC execution condition. The UE is
not required to continue measurements for candidate PSCell(s) for execution
condition upon transmission of the _SCGFailureInformation_ message to the MN.
## 7.8 UE identities
In MR-DC, two C-RNTIs are independently allocated to the UE: one for MCG, and
one for SCG.
## 7.9 Inter-node Resource Coordination
For MR-DC operations, MN and SN may coordinate their UL and DL radio resources
in semi-static manner via UE associated signalling. The MN may coordinate its
sidelink radio resources with the SN using the same UE associated signalling.
In EN-DC, CSI-RS based SgNB change between neighbour en-gNBs is supported by
enabling that neighbour en-gNBs can exchange their own CSI-RS configurations
and on/off status via the MeNB.
In NGEN-DC and NR-DC, CSI-RS based SN change between neighbour gNBs is
supported by enabling that neighbour gNBs can exchange their own CSI-RS
configurations and on/off status via the MN.
## 7.10 UE assistance information
In MR-DC, the UE can be configured to report MCG specific UE assistance
information if the MN is a gNB and/or SCG specific UE assistance information
if the SN is a gNB, if it prefers an adjustment on the connected mode DRX
parameters, the maximum aggregated bandwidth, the maximum number of secondary
component carriers, the maximum number of MIMO layers, whether the UE prefers
the SCG to be deactivated, the minimum scheduling offset for cross-slot
scheduling cycle length, and/or whether the UE is applying RLM/BFD
measurements relaxation for power saving. In these cases, it is up to the
network whether to accommodate the preference or how to use the relaxation
status indications. SCG specific UE assistance information for power saving
can be configured by the network via SRB1 or SRB3. SCG specific UE assistance
information for power saving is directly transmitted to the SN via SRB3, if
SRB3 is configured and the SCG is activated, otherwise UE transmits SCG
specific UE assistance information for power saving in a transparent container
to the MN. When network simultaneously configures the UE to perform radio link
monitoring on the SCG and beam failure detection on the SCG while the SCG is
deactivated, UE assistance information for the relaxation state report of
RLM/BFD measurements for SCG is reported over MCG. UE can implicitly indicate
a preference for NR SCG release by indicating zero number of carriers and zero
aggregated maximum bandwidth in both FR1 and FR2.
## 7.11 F1-C transfer over E-UTRA
In EN-DC, the F1-AP message encapsulated in SCTP/IP or F1-C related (SCTP/)IP
packet can be transferred between IAB-donor and IAB-node via E-UTRA, if
configured by IAB-donor, as specified in TS 38.331 [4]. When both E-UTRA and
NR are configured to transfer the F1-AP message encapsulated in SCTP/IP or
F1-C related (SCTP/)IP packet, it is up to the IAB implementation when to
select the E-UTRA. SRB2 is used for transporting the F1-AP message
encapsulated in SCTP/IP or F1-C related (SCTP/)IP packet between IAB-MT and MN
[10], and the F1-AP message encapsulated in SCTP/IP or F1-C related (SCTP/)IP
packet is transferred as a container via X2-AP between MN and SN, see TS
36.423 [9].
7.12 F1-C transfer in NR-DC
In NR-DC, the F1-AP message encapsulated in SCTP/IP or F1-C related (SCTP/)IP
packet can be transferred via BAP sublayer or via SRB between the IAB-node and
F1-terminating IAB-donor (as specified in TS 38.401 [7]), as specified in TS
38.331 [4]. When both MCG and SCG are configured to transfer the F1-AP message
encapsulated in SCTP/IP or F1-C related (SCTP/)IP packet, it is up to the IAB-
node implementation for path selection. Two scenarios are supported, as shown
in Figure 7.12-1.
Figure 7.12-1: F1-C transfer in NR-DC; a) Scenario 1; b) Scenario 2
**Scenario 1** : IAB-node exchanges F1-AP message encapsulated in SCTP/IP or
F1-C related (SCTP/)IP packet with the SN (F1-terminating IAB-donor as
specified in TS 38.401 [7]) using NR access link via MN (non-F1-terminating
IAB-donor), and exchanges F1-U traffic using backhaul link(s) with SN. SRB2 is
used for transporting the F1-AP message encapsulated in SCTP/IP or F1-C
related (SCTP/)IP packet between IAB-MT and MN (see TS 38.331 [4]), and the
F1-AP message encapsulated in SCTP/IP or F1-C related (SCTP/)IP packet is
transferred in a container via XnAP between MN and SN, see TS 38.423 [5].
**Scenario 2** : IAB-node exchanges F1-AP message encapsulated in SCTP/IP or
F1-C related (SCTP/)IP packet with the MN (F1-terminating IAB-donor) using NR
access link via SN (non-F1-terminating IAB-donor), and exchanges F1-U traffic
using backhaul link(s) with MN. Split SRB2 is used for transporting the F1-AP
message encapsulated in SCTP/IP or F1-C related (SCTP/)IP packet between IAB-
MT and SN (see TS 38.331 [4]), and the F1-AP message encapsulated in SCTP/IP
or F1-C related (SCTP/)IP packet is transferred in a container via XnAP
between SN and MN, see TS 38.423 [5].
The F1-AP message encapsulated in SCTP/IP or the F1-C related (SCTP/)IP packet
can be transferred either over BAP sublayer or over SRB, but the two
mechanisms cannot be supported simultaneously on the same parent link. The
F1-AP message encapsulated in SCTP/IP or the F1-C related (SCTP/)IP packet is
transferred over BAP sublayer, if the BH RLC channel used for transferring the
F1-C traffic is configured on the cell group indicated for F1-C traffic
transfer according to TS 38.331 [4].
7.13 Activation and Deactivation of SCG
To enable reasonable UE battery consumption while having fast usage of SCG
when (NG)EN-DC or NR-DC is configured, an activation/deactivation mechanism of
SCG is supported. While the SCG is deactivated, there is no transmission via
SCG RLC bearers. Only the NR SCG can be deactivated, and all SCG SCell(s) are
in deactivated state while the SCG is deactivated.
Upon SCG deactivation and while the SCG is deactivated, the network ensures
that there is no uplink control PDU transmission to the deactivated SCG (e.g.
the network releases statusReportRequired from PDCP entities of SCG bearers if
configured, the network does not perform QoS flow remapping from a DRB
associated to the deactivated SCG to another DRB). The network ensures the SCG
is activated while PDCP duplication is activated for SCG RLC entities
associated with a PDCP entity.
NOTE: Upon SCG (de)activation, it is up to the network to ensure there is no
pending SDUs or PDUs in SCG RLC entity (e.g. instructs the UE to perform PDCP
data recovery and RLC re-establishment/release, if needed).
While the SCG is deactivated, the UE will not transmit PUSCH, SRS and CSI
report on SCG, and the UE is not required to monitor PDCCH or receive DL-SCH
on SCG. If configured by the network, the UE performs radio link monitoring on
the SCG and beam failure detection on the SCG while SCG is deactivated. In
case of SCG activation without performing random access, the network can
indicate TCI states to UE for PDCCH/PDSCH reception on PSCell, if not
provided, the UE uses the previously activated TCI states.
The MN can configure the SCG as activated or deactivated upon e.g. PSCell
addition, PSCell change, RRC Resume or handover. In case the SCG is configured
as deactivated, the UE does not perform random access towards the PSCell. The
network can trigger SCG RRC reconfiguration (e.g. PSCell change, configuration
update) when deactivating the SCG and while the SCG is in deactivated state.
SCG activation can be requested by the MN, by the SN and by the UE. SCG
deactivation can be requested by the MN and by the SN. For UL data arrival on
SCG bearer(s) while the SCG is deactivated, the UE indicates to the MN that it
has UL data to transmit over SCG bearer. During handover procedure, the target
MN can indicate the SCG state in the RRC reconfiguration message sent to the
UE by the source MN.
Network can configure whether the UE is allowed to indicate a preference for
SCG deactivation to the MN.
## 7.14 RLM/BFD relaxation
For RLM and BFD relaxation, network may configure low mobility criterion in
the NR PCell for the case of NE-DC/NR-DC, and in the NR PSCell for the case of
EN-DC and NGEN-DC. MN informs SN when low mobility criterion has been
configured in the NR PCell for NR-DC.
For RLM relaxation, network may configure good serving cell criterion in the
NR PCell for the case of NE-DC/NR-DC, and in the NR PSCell for the case of EN-
DC, NGEN-DC and NR-DC.
For BFD relaxation, network may configure good serving cell criterion in the
NR PCell and/or SCell(s) for the case of NE-DC/NR-DC, and in the NR PSCell
and/or SCell(s) for the case of EN-DC, NGEN-DC and NR-DC.
For RLM/BFD relaxation, network may simultaneously configure the UE to perform
radio link monitoring on the SCG and beam failure detection on the SCG while
SCG is deactivated. In such case, UE initiates UE assistance information for
the relaxation state report of RLM/BFD measurements for SCG.
For RLM/BFD relaxation, network may simultaneously configure the UE not to
perform radio link monitoring on the SCG and beam failure detection on the SCG
while SCG is deactivated. In such case, UE assistance information for the
relaxation state report of RLM/BFD measurements for SCG will not be initiated.
# 8 Bearer handling aspects
## 8.1 QoS aspects
In EN-DC, the E-UTRAN QoS framework defined in TS 36.300 [2] applies:
\- An S1-U bearer is established between the EPC and the SN for SN terminated
bearers;
\- An X2-U bearer is established between the MN and the SN for split bearers,
MN terminated SCG bearers and SN terminated MCG bearers;
\- MN terminated and SN terminated bearers may have either MCG or SCG radio
resources or both, MCG and SCG radio resources, established;
In MR-DC with 5GC:
\- The NG-RAN QoS framework defined in TS 38.300 [3] applies;
\- QoS flows belonging to the same PDU session may be mapped to different
bearer types (see clause 4.2.2) and as a result there may be two different
SDAP entities for the same PDU session: one at the MN and another one at the
SN, in which case the MN decides which QoS flows are assigned to the SDAP
entity in the SN. If the SN decides that its SDAP entity cannot host a given
QoS flow any longer, the SN informs the MN and the MN cannot reject the
request. If the MN decides that its SDAP entity can host a given QoS flow
which has already been relocated to SN, the MN informs the SN;
\- The MN or SN node that hosts the SDAP entity for a given QoS flow decides
how to map the QoS flow to DRBs;
\- If the SDAP entity for a given QoS flow is hosted by the MN and the MN
decides that SCG resources are to be configured it provides to the SN
\- DRB QoS flow level QoS parameters, which the SN may reject, and
\- QoS flow to DRB mapping information and the respective per QoS flow
information;
\- If the SDAP entity for a given QoS flow is hosted by the SN and the SN
configures MCG resources, based on offered MCG resource information from the
MN, the SN provides to the MN
\- DRB QoS flow level QoS parameters, which the MN may reject, and
\- QoS flow to DRB mapping information and the respective per QoS flow
information.
\- If the SDAP entity for a given QoS flow is hosted by the SN, the MN
provides sufficient QoS related information to enable the SN to configure
appropriate SCG resources and to request the configuration of appropriate MCG
resources. The MN may offer MCG resources to the SN and may indicate for GBR
QoS flows the amount offered to the SN on a per QoS flow level. Otherwise, the
SN can only use SCG resources for the concerned QoS flow. The SN may request
the MN to release QoS flows from the SDAP entity hosted by the SN that the MN
cannot reject. The MN may also offer MCG resources per PDU Session for all
DRBs to which non-GBR QoS flows contained in the PDU Session are mapped.
\- MN decides the DL PDU session AMBR and UL PDU session AMBR limits to be
assigned to the SN, and indicates these to the SN:
\- The PDCP entity at the SN applies the received DL PDU session AMBR limi t
to the set of all bearers for which the SN hosts PDCP for the UE;
\- The MAC entity at the SN applies the received UL PDU session AMBR limit to
the scheduled uplink radio traffic at the SN for the UE.
> \- The MN can decide to reallocate one or more QoS flows from the MN to the
> SN. In such case, the SN decides which DRBs the offloaded QoS flows are
> mapped to. It is possible to avoid/ minimise loss and ensure in-order
> delivery when reallocating all QoS flows mapped to a given DRB in the MN by
> keeping the QoS flows mapped to the same DRB in the SN. To achieve this, the
> SN should behave similar to what is specified for the target NG-RAN node
> upon handover, see TS 38.300 clause 9.2.3.2.2 [3]. The corresponding
> behaviour applies when QoS flows are re-allocated from the SN to the MN.
\- The MN decides the DL UE Slice MBR and UL UE Slice MBR limits to be
assigned to the SN, and indicates these to the SN:
\- The PDCP entity at the SN applies the received DL UE Slice MBR limit to the
set of all bearers for which the SN hosts PDCP for the concerned Slice, as
defined in TS 23.501 [11];
\- The MAC entity at the SN applies the received UL UE Slice MBR limit to the
scheduled uplink radio traffic at the SN for the concerned Slice, as defined
in TS 23.501 [11].
In all MR-DC cases:
\- The MN decides the DL UE AMBR and UL UE AMBR limits to be assigned to the
SN, and indicates these to the SN:
\- The PDCP entity at the SN applies the received DL UE AMBR limit to the set
of all bearers for which the SN hosts PDCP for the UE;
\- The MAC entity at the SN applies the received UL UE AMBR limit to the
scheduled uplink radio traffic at the SN for the UE.
To support PDU sessions mapped to different bearer types, MR-DC with 5GC
provides the possibility for the MN to request the 5GC:
\- For some PDU sessions of a UE: Direct the User Plane traffic of the whole
PDU session either to the MN or to the SN. In that case, there is a single
NG-U tunnel termination at the NG-RAN for such PDU session.
\- The MN may request to change this assignment during the life time of the
PDU session.
\- For some other PDU sessions of a UE: Direct the User Plane traffic of a
subset of the QoS flows of the PDU session to the SN (respectively MN) while
the rest of the QoS flows of the PDU session is directed to the MN
(respectively SN). In that case, there are two NG-U tunnel terminations at the
NG-RAN for such PDU session.
\- The MN may request to change this assignment during the life time of the
PDU session.
To support notification control indication for GBR QoS flows along the QoS
framework specified in 38.300 [3] for MR-DC with 5GC, SN and MN may mutually
indicate whenever QoS requirements for GBR QoS flows cannot be fulfilled
anymore or can be fulfilled again. When indicating that GBR QoS flows cannot
be fulfilled anymore, SN or MN may additionally indicate the reference to the
QoS Parameter Set which it can currently fulfil.
## 8.2 Bearer type selection
In EN-DC, for each radio bearer the MN decides the location of the PDCP entity
and in which cell group(s) radio resources are to be configured. Once an SN
terminated split bearer is established, e.g. by means of the Secondary Node
Addition procedure or MN initiated Secondary Node Modification procedure, the
SN may remove SCG resources for the respective E-RAB, as long as the QoS for
the respective E-RAB is guaranteed. In case an SN terminated bearer is
released or reconfigured to an MN terminated bearer, only the MN generates the
corresponding configuration and the SN does not generate the release
configuration.
In MR-DC with 5GC, the following principles apply:
\- The MN decides per PDU session the location of the SDAP entity, i.e.
whether it shall be hosted by the MN or the SN or by both (split PDU session);
\- If the MN decides to host an SDAP entity it may decide some of the related
QoS flows to be realized as MCG bearer, some as SCG bearer, and others to be
realized as split bearer;
\- If the MN decides that an SDAP entity shall be hosted in the SN, some of
the related QoS flows may be realized as SCG bearer, some as MCG bearer, while
others may be realized as split bearer. In this case, the SN decides how to
realise the QoS flow, but if the MN does not offer MCG resources, the SN can
only realize the QoS flow as SCG bearer. The SN may remove or add SCG
resources for the respective QoS flows, as long as the QoS for the respective
QoS flow is guaranteed
\- If the MN decides that an SDAP entity shall be hosted in the SN,
coordination of DRB IDs between the MN and the SN is needed to ensure unique
allocation of DRBs for a UE. The SN is responsible to assign the DRB IDs for
the DRBs it terminates, based on the DRB IDs indicated by the MN.
\- For each PDU session, including split PDU sessions, at most one default DRB
may be configured (see [3]). The MN decides whether the SN is allowed to setup
the default DRB or not;
\- In case an SN terminated bearer is released or reconfigured to an MN
terminated bearer, the MN generates the corresponding configuration and the SN
does not generate the release configuration. The only exceptional case where
SN generates the release configuration is for the DRB release due to QoS flow
to DRB remapping within SN.
## 8.3 Bearer type change
In MR-DC, all the possible bearer type change options are supported:
\- MCG bearer to/from split bearer;
\- MCG bearer to/from SCG bearer;
\- SCG bearer to/from split bearer.
Bearer termination point change is supported for all bearer types, and can be
performed with or without bearer type change:
\- MN terminated bearer to/from SN terminated bearer.
For MR-DC:
\- when the security key is changed for a bearer due to a termination point
change, the associated PDCP and RLC entities are re-established, while MAC
behavior might depend on the solution selected by the network, e.g. MAC reset,
change of LCID, etc. (see Annex A);
\- for MCG bearer, split bearer and SCG bearer, during MN security key change
the MCG/SCG PDCP and RLC are re-established and MCG/SCG MAC is reset;
\- if a bearer type change happens together with MN security key change then
for MCG bearer, split bearer and SCG bearer, the MCG/SCG PDCP and RLC are re-
established and MCG/SCG MAC is reset;
\- if a bearer type change happens through SN change procedure, then SN
terminated PDCP and SCG RLC are re-established and SCG MAC is reset. MCG
RLC/MAC behavior depends on the solution selected by the network, see Annex A;
\- one step (direct) bearer type change between MN terminated bearer types
without using the handover procedure is supported;
\- one step (direct) bearer type change between SN terminated bearer types
without using the handover or SN change procedure is supported;
\- one step (direct) bearer type change from/to MN terminated bearer to/from
SN terminated bearer without using the handover procedure is supported;
\- PDCP SN length change for an AM DRB or RLC mode change for DRB is performed
using a release and add of the DRBs (in a single message) or full
configuration;
\- One step (direct) bearer type change with PDCP version change (only
applicable for EN-DC) is supported.
For MR-DC with 5GC:
\- in a bearer termination point change of a DRB from a source NG-RAN node to
a target NG-RAN node, for each DRB for which the source NG-RAN node provides
QoS flow to DRB mapping information to the target NG-RAN node, the source NG-
RAN node also offers the indicated DRB ID for usage at the target NG-RAN node.
The target NG-RAN node informs the source NG-RAN node if it accepts the DRB
offloading and takes the DRB ID into use.
NOTE 1: In this clause the term \"handover\" refers to an E-UTRA handover or
to an NR synchronous reconfiguration not necessarily implying a P(S)Cell
change with or without security key change.
NOTE 2: L2 handling for bearer type change in MR-DC is also summarized in
Annex A (the table does not consider the cases that PDCP SN length is changed
and avoiding reuse of COUNT).
## 8.4 User data forwarding
Upon EN-DC specific activities, user data forwarding may be performed for
E-RABs for which the bearer type change from/to MN terminated bearer to/from
SN terminated bearer is performed. The behaviour of the node from which data
is forwarded is the same as specified for the \"source eNB\" for handover, the
behaviour of the node to which data is forwarded is the same as specified for
the \"target eNB\" for handover.
For MR-DC with 5GC, user data forwarding may be performed between NG-RAN nodes
whenever the logical node hosting the PDCP entity changes. The behaviour of
the node from which data is forwarded is the same as specified for the
\"source NG-RAN node\" for handover, the behaviour of the node to which data
is forwarded is the same as specified for the \"target NG-RAN node\" for
handover.
For SN change involving full configuration, the source SN behaviour is the
same as the description as specified in intra-system data forwarding in TS
36.300 [2] for the source eNB or TS 38.300 [3] for the source NG-RAN node,
respectively. In case that a DRB DL forwarding tunnel was established, the
target SN may identify the PDCP SDUs for which delivery was attempted by the
source SN, by the presence of the PDCP SN in the forwarded GTP-U packet and
may discard them.
For mobility scenarios which involve more than two RAN nodes, either direct or
indirect data forwarding may be applied. Two transport layer addresses of
different versions may be provided to enable that the source RAN node can
select either IPv4 or IPv6.
Direct data forwarding from source SN to target NG-RAN node and from source
NG-RAN node to target SN for mobility scenario is supported. Direct data
forwarding from source SN to target SN for SN change scenario is also
supported.
Direct data forwarding for inter-system handover is specified in TS 38.300
[3]. If a gNB and an en-gNB are involved in direct data forwarding and
realised within the same network entity, inter-system handover to and from EN-
DC allows direct data forwarding being performed in a node-internal way, in
which case the source RAN node provides a UE context reference to the target
side as described in clause 10.16. If the gNB and en-gNB are not realised
within the same network entity, direct data forwarding for inter-system
handover to and from en-gNB/gNB could be supported if there is direct
connectivity between the two nodes.
For MR-DC with 5GC, offloading of QoS flows within one PDU session may be
performed between NG-RAN nodes. The handling of End Marker packets in case of
NG-RAN initiated PDU session split is described in clause 10.14.3 and 10.14.4.
# 9 Security related aspects
MR-DC can only be configured after security activation in the MN.
In EN-DC and NGEN-DC, for bearers terminated in the MN the network configures
the UE with K~eNB~; for bearers terminated in the SN the network configures
the UE with S-K~gNB~. In NE-DC, for bearers terminated in the MN the network
configures the UE with K~gNB~; for bearers terminated in the SN the network
configures the UE with S-K~eNB~. In NR-DC, for bearers terminated in the MN
the network configures the UE with K~gNB~; for bearers terminated in the SN
the network configures the UE with S-K~gNB~.
In NE-DC and NR-DC, a PCell change without K~gNB~ change does not require a
S-K~eNB~ change (NE-DC case) or a S-K~gNB~ change (NR-DC case).
In EN-DC, NGEN-DC and NR-DC, for a PSCell change that does not require a
K~eNB~ change (i.e. no simultaneous PCell handover in EN-DC and NGEN-DC) or a
K~gNB~ change (in NR-DC), S-K~gNB~ key refresh is not required if the PDCP
termination point of the SN is not changed. In NE-DC, a PSCell change always
requires a S-K~eNB~ change.
In EN-DC, the UE supports the NR security algorithms corresponding to the
E-UTRA security algorithms signalled at NAS level and the UE NR AS Security
capability is not signalled to the MN over RRC. Mapping from E-UTRA security
algorithms to the corresponding NR security algorithms, where necessary, is
performed at the MN. The MN sends the complete UE security capabilities
including all security capability bits previously received (after mapping,
where necessary) to the SN.
An EN-DC capable UE supporting user plane integrity protection when connected
to E-UTRA/EPC (see TS 24.301 [22]) shall support integrity protection for all
DRBs (MN and SN terminated) at any data rate, up to and including the highest
data rate supported by the UE for both UL and DL. MN and/or SN terminated DRBs
can have UP integrity protection activation either on or off, on a per radio
bearer basis.
For MR-DC with 5GC, UP integrity protection can be configured on a per radio
bearer basis. All DRBs which belong to the same PDU session always have the
same UP integrity protection activation, i.e., either on or off:
\- For NR-DC: MN and/or SN terminated DRBs of a PDU session can have UP
integrity protection activation either on or off. A UE configured to operate
in NR-DC shall support integrity protection for all DRBs (MN and SN
terminated) at any data rate, up to and including the highest data rate
supported by the UE for both UL and DL (see TS 38.300 [3]).
\- For NE-DC: MN terminated DRBs of a PDU session can have UP integrity
protection activation on; however, in this case, the MN will not at any point
offload any DRB of such PDU session to the SN. A UE configured to operate in
NE-DC shall support integrity protection for all MN terminated DRBs at any
data rate, up to and including the highest data rate supported by the UE\'s
radio access capabilities for both UL and DL (see TS 38.300 [3]). SN
terminated DRBs of a PDU session always have UP integrity protection
activation off.
\- For NGEN-DC: Both MN terminated and SN terminated DRBs of a PDU session
always have UP integrity protection activation off.
In MR-DC with 5GC, the MN sends the complete UE security capabilities to the
SN including all NR and E-UTRA security capability bits previously received by
the MN from the Core Network or from another NG-RAN node as specified in TS
38.300 [3].
In (NG)EN-DC and NR-DC, if the SCG is deactivated as described in clause 7.13,
whether to perform security key update upon SCG activation is up to network
implementation.
# 10 Multi-Connectivity operation related aspects
## 10.1 General
Similar procedures as defined under clause 10.1.2.8 (Dual Connectivity
operation) in TS 36.300 [2] apply for MR-DC.
Similar CHO principles as defined in TS 36.300 [2] and TS 38.300 [3] apply for
the Conditional PSCell Change and Conditional PSCell Addition in MR-DC.
Conditional PSCell Change and conditional PSCell addition are not supported
for the MR-DC options NE-DC and NGEN-DC.
Configuration of a deactivated SCG in a conditional configuration,
configuration of CPC while the SCG is deactivated and SCG deactivation while
CPC is configured are not supported.
In MR-DC, CHO is supported in Master Node to eNB/gNB Change procedure and
Conditional Handover with Secondary Node procedure.
## 10.2 Secondary Node Addition
### 10.2.1 EN-DC
The Secondary Node Addition procedure is initiated by the MN and is used to
establish a UE context at the SN to provide resources from the SN to the UE.
For bearers requiring SCG radio resources, this procedure is used to add at
least the first cell of the SCG. This procedure can also be used to configure
an SN terminated MCG bearer (where no SCG configuration is needed). In case of
CPA, the Conditional Secondary Node Addition procedure can be used for CPA
configuration and CPA execution.
**Secondary Node Addition**
Figure 10.2.1-1 shows the Secondary Node Addition procedure.
Figure 10.2.1-1: Secondary Node Addition procedure
1\. The MN decides to request the SN to allocate resources for a specific
E-RAB, indicating E-RAB characteristics (E-RAB parameters, TNL address
information corresponding to bearer type). In addition, for bearers requiring
SCG radio resources, MN indicates the requested SCG configuration information,
including the entire UE capabilities and the UE capability coordination
result. In this case, the MN also provides the latest measurement results for
SN to choose and configure the SCG cell(s). The MN may request the SN to
allocate radio resources for split SRB operation. The MN always provides all
the needed security information to the SN (even if no SN terminated bearers
are setup) to enable SRB3 to be setup based on SN decision. In case of bearer
options that require X2-U resources between the MN and the SN, the MN provides
X2-U TNL address information for the respective E-RAB, X2-U DL TNL address
information for SN terminated bearers, X2-U UL TNL address information for MN
terminated bearers. In case of SN terminated split bearers the MN provides the
maximum QoS level that it can support. The MN may request the SCG to be
activated or deactivated. The SN may reject the addition request.
NOTE 1: For split bearers, MCG and SCG resources may be requested of such an
amount, that the QoS for the respective E-RAB is guaranteed by the exact sum
of resources provided by the MCG and the SCG together, or even more. For MN
terminated split bearers, the MNs decision is reflected in step 1 by the E-RAB
parameters signalled to the SN, which may differ from E-RAB parameters
received over S1.
NOTE 2: For a specific E-RAB, the MN may request the direct establishment of
an SCG or a split bearer, i.e., without first having to establish an MCG
bearer. It is also allowed that all E-RABs can be configured as SN terminated
bearers, i.e. there is no E-RAB established as an MN terminated bearer.
2\. If the RRM entity in the SN is able to admit the resource request, it
allocates respective radio resources and, dependent on the bearer option,
respective transport network resources. For bearers requiring SCG radio
resources, the SN triggers Random Access so that synchronisation of the SN
radio resource configuration can be performed. The SN decides the PSCell and
other SCG SCells and provides the new SCG radio resource configuration to the
MN in a _NR RRC configuration_ message contained in the _SgNB Addition Request
Acknowledge_ message. In case of bearer options that require X2-U resources
between the MN and the SN, the SN provides X2-U TNL address information for
the respective E-RAB, X2-U UL TNL address information for SN terminated
bearers, X2-U DL TNL address information for MN terminated bearers. For SN
terminated bearers, the SN provides the S1-U DL TNL address information for
the respective E-RAB and security algorithm. If SCG radio resources have been
requested, the SCG radio resource configuration is provided. If the MN
requested the SCG to be deactivated, the SN may keep the SCG activated. If the
MN requests the SCG to be activated, the SN shall keep the SCG activated.
NOTE 3: For the SN terminated split bearer option, the SN may either decide to
request resources from the MN of such an amount, that the QoS for the
respective E-RAB is guaranteed by the exact sum of resources provided by the
MN and the SN together, or even more. The SNs decision is reflected in step 2
by the E-RAB parameters signalled to the MN, which may differ from E-RAB
parameters received in step 1. The QoS level requested from the MN shall not
exceed the level that the MN offered when setting up the split bearer in step
1.
NOTE 4: In case of MN terminated bearers, transmission of user plane data may
take place after step 2.
NOTE 5: In case of SN terminated bearers, data forwarding and the SN Status
Transfer may take place after step 2.
3\. The MN sends to the UE the _RRCConnectionReconfiguration_ message
including the NR RRC configuration message, without modifying it. Within the
MN _RRCConnectionReconfiguration_ message, the MN can indicate the SCG is
deactivated.
4\. The UE applies the new configuration and replies to MN with
_RRCConnectionReconfigurationComplete_ message, including a NR RRC response
message, if needed. In case the UE is unable to comply with (part of) the
configuration included in the _RRCConnectionReconfiguration_ message, it
performs the reconfiguration failure procedure.
5\. The MN informs the SN that the UE has completed the reconfiguration
procedure successfully via _SgNB ReconfigurationComplete_ message, including
the encoded NR RRC response message, if received from the UE.
6\. If configured with bearers requiring SCG radio resources and the SCG is
not deactivated, the UE performs synchronisation towards the PSCell of the SN.
The order the UE sends the _RRCConnectionReconfigurationComplete_ message and
performs the Random Access procedure towards the SCG is not defined. The
successful RA procedure towards the SCG is not required for a successful
completion of the RRC Connection Reconfiguration procedure.
7\. If PDCP termination point is changed to the SN for bearers using RLC AM,
and when RRC full configuration is not used, the MN sends the _SN Status
Transfer_ message.
8\. For SN terminated bearers moved from the MN, dependent on the bearer
characteristics of the respective E-RAB, the MN may take actions to minimise
service interruption due to activation of EN-DC (Data forwarding).
9-12. If applicable, the update of the UP path towards the EPC is performed.
**Conditional Secondary Node Addition**
Figure 10.2.1-2 shows the Conditional Secondary Node Addition procedure.
Figure 10.2.1-2: Conditional Secondary Node Addition procedure
1\. The MN decides to configure CPA for the UE and requests the candidate
SN(s) to allocate resources for a specific E-RAB, indicating E-RAB
characteristics (E-RAB parameters, TNL address information corresponding to
bearer type), indicating that the request is for CPAC and providing the upper
limit for the number of PSCells that can be prepared by the candidate SN. In
addition, for the bearers requiring SCG radio resources, the MN indicates the
requested SCG configuration information, including the entire UE capabilities
and the UE capability coordination result. In this case, the MN also provides
the candidate cells recommended by MN via the latest measurement results for
the candidate SN to choose from and configure the SCG cell(s). The MN may
request the candidate SN to allocate radio resources for split SRB operation.
The MN always provides all the needed security information to the candidate SN
(even if no SN terminated bearers are setup) to enable SRB3 to be setup based
on SN decision. In case of bearer options that require X2-U resources between
the MN and the candidate SN, the MN provides X2-U TNL address information for
the respective E-RAB, X2-U DL TNL address information for SN terminated
bearers, X2-U UL TNL address information for MN terminated bearers. In case of
SN terminated split bearers the MN provides the maximum QoS level that it can
support. The candidate SN may reject the addition request.
NOTE 6: For split bearers, MCG and SCG resources may be requested of such an
amount, that the QoS for the respective E-RAB is guaranteed by the exact sum
of resources provided by the MCG and the SCG together, or even more. For MN
terminated split bearers, the MN decision is reflected in step 1 by the E-RAB
parameters signalled to the candidate SN, which may differ from E-RAB
parameters received over S1.
NOTE 7: For a specific E-RAB, the MN may request the direct establishment of
an SCG or a split bearer, i.e., without first having to establish an MCG
bearer. It is also allowed that all E-RABs can be configured as SN terminated
bearers, i.e. there is no E-RAB established as an MN terminated bearer.
2\. If the RRM entity in the candidate SN is able to admit the resource
request, it allocates respective radio resources and, dependent on the bearer
option, respective transport network resources, and provides the prepared
PSCell ID(s) to the MN. For bearers requiring SCG radio resources, the
candidate SN configures Random Access so that synchronisation of the SN radio
resource configuration can be performed at the CPA execution. From the list of
cells indicated within the measurement results provided by the MN, the
candidate SN decides the list of PSCell(s) to prepare (considering the maximum
number indicated by the MN) and, for each prepared PSCell, the candidate SN
decides SCG SCells and provides the corresponding SCG radio resource
configuration to the MN in an NR _RRCReconfiguration** message_ contained in
the _SgNB Addition Request Acknowledge_ message. The candidate SN can either
accept or reject each of the candidate cells listed within the measurement
results indicated by the MN, i.e. it cannot configure any alternative
candidates. In case of bearer options that require X2-U resources between the
MN and the candidate SN, the candidate SN provides X2-U TNL address
information for the respective E-RAB, X2-U UL TNL address information for SN
terminated bearers, X2-U DL TNL address information for MN terminated bearers.
For SN terminated bearers, the candidate SN provides the S1-U DL TNL address
information for the respective E-RAB and security algorithm. If SCG radio
resources have been requested, the SCG radio resource configuration is
provided.
NOTE 8: For the SN terminated split bearer option, the candidate SN may either
decide to request resources from the MN of such an amount, that the QoS for
the respective E-RAB is guaranteed by the exact sum of resources provided by
the MN and the candidate SN together, or even more. The candidate SN decision
is reflected in step 2 by the E-RAB parameters signalled to the MN, which may
differ from E-RAB parameters received in step 1. The QoS level requested from
the MN shall not exceed the level that the MN offered when setting up the
split bearer in step 1.
NOTE 9: In case of SN terminated bearers, early data forwarding may take place
after step 2. For the early data forwarding of SN terminated bearers, the MN
forwards the PDCP SDU to the candidate SN and also sends the _Early Status
Transfer_ message. For the early transmission of MN terminated split/SCG
bearers, the MN forwards the PDCP PDU to the candidate SN.
3\. The MN sends to the UE an _RRCConnectionReconfiguration_ message including
the CPA configuration, i.e. a list of _RRCConnectionReconfiguration*_ messages
and associated execution conditions. Each _RRCConnectionReconfiguration*_
message contains the SCG configuration in the _RRCReconfiguration**_ message
received from the candidate SN in step 2 and possibly an MCG configuration.
Besides, the _RRCConnectionReconfiguration_ message can also include an
updated MCG configuration, e.g., to configure the required conditional
measurements.
4\. The UE applies the _RRCConnectionReconfiguration message received in step
3_ , stores the CPA configuration and replies to the MN with an
_RRCConnectionReconfigurationComplete_ message. In case the UE is unable to
comply with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
4a. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies
_RRCConnectionReconfiguration*_ message corresponding to the selected
candidate PSCell, and sends an _RRCConnectionReconfigurationComplete*_
message, including an NR _RRCReconfigurationComplete** message_ for the
selected candidate PSCell, and information enabling the MN to identify the SN
of the selected candidate PSCell.
5a-5c. The MN informs the SN of the selected candidate PSCell that the UE has
completed the reconfiguration procedure successfully via _SgNB Reconfiguration
Complete_ message, including the _RRCReconfigurationComplete**_ message. The
MN sends the _SgNB Release Request_ message(s) to cancel CPA in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
6\. The UE performs synchronisation towards the PSCell indicated in the
_RRCConnectionReconfiguration*_ message applied in step 4a. The order the UE
sends the _RRCConnectionReconfigurationComplete*_ message and performs the
Random Access procedure towards the SCG is not defined. The successful RA
procedure towards the SCG is not required for a successful completion of the
RRC Connection Reconfiguration procedure.
7\. If PDCP termination point is changed to the SN for bearers using RLC AM,
and when RRC full configuration is not used, the MN sends the _SN Status
Transfer_ message.
8\. For SN terminated bearers moved from the MN, dependent on the bearer
characteristics of the respective E-RAB, the MN may take actions to minimise
service interruption due to activation of EN-DC (Data forwarding).
9-12. If applicable, the update of the UP path towards the EPC is performed.
### 10.2.2 MR-DC with 5GC
The Secondary Node (SN) Addition procedure is initiated by the MN and is used
to establish a UE context at the SN in order to provide resources from the SN
to the UE. For bearers requiring SCG radio resources, this procedure is used
to add at least the initial SCG serving cell of the SCG. This procedure can
also be used to configure an SN terminated MCG bearer (where no SCG
configuration is needed). In case of CPA, the Conditional Secondary Node
Addition procedure can be used for CPA configuration and CPA execution.
**Secondary Node Addition**
Figure 10.2.2-1 shows the SN Addition procedure.
Figure 10.2.2-1: SN Addition procedure
1\. The MN decides to request the target SN to allocate resources for one or
more specific PDU Sessions/QoS Flows, indicating QoS Flows characteristics
(QoS Flow Level QoS parameters, PDU session level TNL address information, and
PDU session level Network Slice info). In addition, for bearers requiring SCG
radio resources, MN indicates the requested SCG configuration information,
including the entire UE capabilities and the UE capability coordination
result. In this case, the MN also provides the latest measurement results for
SN to choose and configure the SCG cell(s). The MN may request the SN to
allocate radio resources for split SRB operation. In NGEN-DC and NR-DC, the MN
always provides all the needed security information to the SN (even if no SN
terminated bearers are setup) to enable SRB3 to be setup based on SN decision.
The MN may request the SCG to be activated or deactivated.
For MN terminated bearer options that require Xn-U resources between the MN
and the SN, the MN provides Xn-U UL TNL address information. For SN terminated
bearers, the MN provides a list of available DRB IDs. The S-NG-RAN node shall
store this information and use it when establishing SN terminated bearers. The
SN may reject the request.
For SN terminated bearer options that require Xn-U resources between the MN
and the SN, the MN provides in step 1 a list of QoS flows per PDU Sessions for
which SCG resources are requested to be setup upon which the SN decides how to
map QoS flows to DRB.
NOTE 1: For split bearers, MCG and SCG resources may be requested of such an
amount, that the QoS for the respective QoS Flow is guaranteed by the exact
sum of resources provided by the MCG and the SCG together, or even more. For
MN terminated split bearers, the MN decision is reflected in step 1 by the QoS
Flow parameters signalled to the SN, which may differ from QoS Flow parameters
received over NG.
NOTE 2: For a specific QoS flow, the MN may request the direct establishment
of SCG and/or split bearers, i.e. without first having to establish MCG
bearers. It is also allowed that all QoS flows can be mapped to SN terminated
bearers, i.e. there is no QoS flow mapped to an MN terminated bearer.
2\. If the RRM entity in the SN is able to admit the resource request, it
allocates respective radio resources and, dependent on the bearer type
options, respective transport network resources. For bearers requiring SCG
radio resources the SN triggers UE Random Access so that synchronisation of
the SN radio resource configuration can be performed. The SN decides for the
PSCell and other SCG SCells and provides the new SCG radio resource
configuration to the MN within an SN RRC configuration message contained in
the _SN Addition Request Acknowledge_ message. If the MN requested the SCG to
be deactivated, the SN may keep the SCG activated. If the MN requests the SCG
to be activated, the SN shall keep the SCG activated. In case of bearer
options that require Xn-U resources between the MN and the SN, the SN provides
Xn-U TNL address information for the respective DRB, Xn-U UL TNL address
information for SN terminated bearers, Xn-U DL TNL address information for MN
terminated bearers. For SN terminated bearers, the SN provides the NG-U DL TNL
address information for the respective PDU Session and security algorithm. If
SCG radio resources have been requested, the SCG radio resource configuration
is provided.
NOTE 3: In case of MN terminated bearers, transmission of user plane data may
take place after step 2.
NOTE 4: In case of SN terminated bearers, data forwarding and the SN Status
Transfer may take place after step 2.
NOTE 5: For MN terminated bearers for which PDCP duplication with CA is
configured in NR SCG side, the MN allocates up to 4 separate Xn-U bearers and
the SN provides a logical channel ID for primary or split secondary path to
the MN.
For SN terminated bearers for which PDCP duplication with CA is configured in
NR MCG side, the SN allocates up to 4 separate Xn-U bearers and the MN
provides a logical channel ID for primary or split secondary path to the SN
via an additional MN-initiated SN modification procedure.
2a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message.
3\. The MN sends the _MN RRC reconfiguration_ message to the UE including the
SN RRC configuration message, without modifying it. Within the MN _RRC
reconfiguration_ message, the MN can indicate the SCG is deactivated.
4\. The UE applies the new configuration and replies to MN with _MN RRC
reconfiguration complete_ message, including an SN RRC response message for
SN, if needed. In case the UE is unable to comply with (part of) the
configuration included in the _MN RRC reconfiguration_ message, it performs
the reconfiguration failure procedure.
5\. The MN informs the SN that the UE has completed the reconfiguration
procedure successfully via _SN Reconfiguration Complete_ message, including
the SN RRC response message, if received from the UE.
6\. If configured with bearers requiring SCG radio resources and the SCG is
not deactivated, the UE performs synchronisation towards the PSCell configured
by the SN. The order the UE sends the _MN RRC reconfiguration complete_
message and performs the Random Access procedure towards the SCG is not
defined. The successful RA procedure towards the SCG is not required for a
successful completion of the RRC Connection Reconfiguration procedure.
7\. If PDCP termination point is changed to the SN for bearers using RLC AM,
and when RRC full configuration is not used, the MN sends the _SN Status
Transfer_ message.
8\. For SN terminated bearers or QoS flows moved from the MN, dependent on the
characteristics of the respective bearer or QoS flow, the MN may take actions
to minimise service interruption due to activation of MR-DC (Data forwarding).
9-12. If applicable, the update of the UP path towards the 5GC is performed
via a PDU Session Path Update procedure _._
**Conditional Secondary Node Addition**
Figure 10.2.2-2 shows the Conditional SN Addition procedure.
Figure 10.2.2-2: Conditional Secondary Node Addition procedure
1\. The MN decides to configure CPA for the UE. The MN requests the candidate
SN(s) to allocate resources for one or more specific PDU Sessions/QoS Flows,
indicating QoS Flows characteristics (QoS Flow Level QoS parameters, PDU
session level TNL address information, and PDU session level Network Slice
info), indicating that the request is for CPA and providing the upper limit
for the number of PSCells that can be prepared by the candidate SN. In
addition, for bearers requiring SCG radio resources, the MN indicates the
requested SCG configuration information, including the entire UE capabilities
and the UE capability coordination result. In this case, the MN also provides
the candidate cells recommended by MN via the latest measurement results for
the candidate SN to choose and configure the SCG cell(s). The MN may request
the candidate SN to allocate radio resources for split SRB operation. In NR-
DC, the MN always provides all the needed security information to the
candidate SN (even if no SN terminated bearers are setup) to enable SRB3 to be
setup based on SN decision.
For MN terminated bearer options that require Xn-U resources between the MN
and the candidate SN, the MN provides Xn-U UL TNL address information. For SN
terminated bearers, the MN provides a list of available DRB IDs. The candidate
SN shall store this information and use it when establishing SN terminated
bearers. The candidate SN may reject the addition request.
For SN terminated bearer options that require Xn-U resources between the MN
and the candidate SN, the MN provides in step 1 a list of QoS flows per PDU
Sessions for which SCG resources are requested to be setup upon which the
candidate SN decides how to map QoS flows to DRB.
NOTE 6: For split bearers, MCG and SCG resources may be requested of such an
amount, that the QoS for the respective QoS Flow is guaranteed by the exact
sum of resources provided by the MCG and the SCG together, or even more. For
MN terminated split bearers, the MN decision is reflected in step 1 by the QoS
Flow parameters signalled to the candidate SN, which may differ from QoS Flow
parameters received over NG.
NOTE 7: For a specific QoS flow, the MN may request the direct establishment
of SCG and/or split bearers, i.e. without first having to establish MCG
bearers. It is also allowed that all QoS flows can be mapped to SN terminated
bearers, i.e. there is no QoS flow mapped to an MN terminated bearer.
2\. If the RRM entity in the candidate SN is able to admit the resource
request, it allocates respective radio resources and, dependent on the bearer
type options, respective transport network resources, and provides the
prepared PSCell ID(s) to the MN. For bearers requiring SCG radio resources the
candidate SN configures Random Access so that synchronisation of the SN radio
resource configuration can be performed at the CPA execution. Fromthe list of
cells indicated within the measurement results provided by the MN, the
candidate SN decides the list of PSCell(s) to prepare (considering the maximum
number indicated by the MN) and, for each prepared PSCell, the candidate SN
decides other SCG SCells and provides the new corresponding SCG radio resource
configuration to the MN in an NR _RRCReconfiguration** message_ , contained in
the _SN Addition Request Acknowledge_ message. The candidate SN can either
accept or reject each of the candidate cells listed within the measurement
results indicated by the MN, i.e. it cannot configure any alternative
candidates. In case of bearer options that require Xn-U resources between the
MN and the candidate SN, the candidate SN provides Xn-U TNL address
information for the respective DRB, Xn-U UL TNL address information for SN
terminated bearers, Xn-U DL TNL address information for MN terminated bearers.
For SN terminated bearers, the candidate SN provides the NG-U DL TNL address
information for the respective PDU Session and security algorithm. If SCG
radio resources have been requested, the SCG radio resource configuration is
provided.
NOTE 8: For MN terminated bearers for which PDCP duplication with CA is
configured in NR SCG side, the MN allocates up to 4 separate Xn-U bearers and
the candidate SN provides a logical channel ID for primary or split secondary
path to the MN.
For SN terminated bearers for which PDCP duplication with CA is configured in
NR MCG side, the candidate SN allocates up to 4 separate Xn-U bearers and the
MN provides a logical channel ID for primary or split secondary path to the
candidate SN via an additional MN-initiated SN modification procedure.
NOTE 9: In case of SN terminated bearers, early data forwarding may take place
after step 2. For the early data forwarding of SN terminated bearers, the MN
forwards the PDCP SDU to the candidate SN. For the early transmission of MN
terminated split/SCG bearers, the MN forwards the PDCP PDU to the candidate
SN.
2a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message. In case of early
data forwarding in CPA, the MN sends the _Early Status Transfer_ message to
the candidate SN.
3\. The MN sends to the UE an _RRCReconfiguration_ message including the CPA
configuration, i.e. a list of _RRCReconfiguration*_ messages and associated
execution conditions. Each _RRCReconfiguration*_ message contains the SCG
configuration in the _RRCReconfiguration**_ received from the candidate SN in
step 2 and possibly an MCG configuration. Besides, the _RRCReconfiguration_
message can also include an updated MCG configuration. e.g. to configure the
required conditional measurements.
4\. The UE applies the _RRCReconfiguration message received in step 3_ ,
stores the CPA configuration and replies to the MN with an
_RRCReconfigurationComplete_ message. In case the UE is unable to comply with
(part of) the configuration included in the _RRCReconfiguration_ message, it
performs the reconfiguration failure procedure.
4a. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies
_RRCReconfiguration*_ message corresponding to the selected candidate PSCell,
and sends an MN _RRCReconfigurationComplete*_ message, including an
_RRCReconfigurationComplete** message_ for the selected candidate PSCell, and
information enabling the MN to identify the SN of the selected candidate
PSCell.
5a-5c. The MN informs the SN of the selected candidate PSCell that the UE has
completed the reconfiguration procedure successfully via _SN Reconfiguration
Complete_ message, including the _RRCReconfigurationComplete**_ message. The
MN sends the _SN Release Request_ message(s) to cancel CPA in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
6\. The UE performs synchronisation towards the PSCell indicated in the
_RRCReconfiguration*_ message applied in step 4a. The order the UE sends the
MN _RRCReconfigurationComplete*_ message and performs the Random Access
procedure towards the SCG is not defined. The successful RA procedure towards
the SCG is not required for a successful completion of the RRC Connection
Reconfiguration procedure.
7\. If PDCP termination point is changed to the SN for bearers using RLC AM,
and when RRC full configuration is not used, the MN sends the _SN Status
Transfer_ message.
8\. For SN terminated bearers or QoS flows moved from the MN, dependent on the
characteristics of the respective bearer or QoS flow, the MN may take actions
to minimise service interruption due to activation of MR-DC (Data forwarding).
> 9-12. If applicable, the update of the UP path towards the 5GC is performed
> via a PDU Session Path Update procedure _._
### 10.2.3 Conditional PSCell Addition
A Conditional PSCell Addition (CPA) is defined as a PSCell addition that is
executed by the UE when execution condition(s) is met. The UE starts
evaluating the execution condition(s) upon receiving the CPA configuration,
and stops evaluating the execution condition(s) once PSCell addition or PCell
change is triggered.
The following principles apply to CPA:
\- The CPA configuration contains the configuration of CPA candidate
PSCell(s), execution condition(s) and may contain the MCG configuration, to be
applied when CPA execution is triggered.
\- An execution condition may consist of one or two trigger condition(s) (see
_CondEvent_ , as defined in TS 38.331 [4] or TS 36.331 [10]). Only a single RS
type and at most two different trigger quantities (e.g. RSRP and RSRQ, RSRP
and SINR, etc.) can be used for the evaluation of CPA execution condition of a
single candidate PSCell.
\- Before any CPA execution condition is satisfied, upon reception of PSCell
addition command or PCell change command, the UE executes the PSCell addition
procedure as described in clause 10.2.1 or 10.2.2, or the PCell change
procedure as described in clause 9.2.3.2 in TS 38.300[3] or clause 10.1.2.1 in
TS 36.300 [2], regardless of any previously received CPA configuration. Upon
the successful completion of PSCell addition procedure or PCell change
procedure, the UE releases the stored CPA configuration.
\- While executing CPA, the UE is not required to continue evaluating the
execution condition of other candidate PSCell(s) or PCell(s).
\- Once the CPA procedure is executed successfully, the UE releases all stored
conditional reconfigurations (i.e. for CPA and for CHO, as specified in TS
38.300 [3] or TS 36.300 [2]).
CPA configuration in HO command, in PSCell addition command, or within any
conditional reconfiguration (i.e., CPA, CPC or CHO configuration) is not
supported.
## 10.3 Secondary Node Modification (MN/SN initiated)
### 10.3.1 EN-DC
The Secondary Node Modification procedure may be initiated either by the MN or
by the SN and be used to modify, establish or release bearer contexts, to
transfer bearer contexts to and from the SN or to modify other properties of
the UE context within the same SN. It may also be used to transfer an NR RRC
message from the SN to the UE via the MN and the response from the UE via MN
to the SN (e.g. when SRB3 is not used). In case of CPA or inter-SN CPC, this
procedure is used to modify CPA or inter-SN CPC configuration within the same
candidate SN. In case of CPA or inter-SN CPC, this procedure may also be
triggered by the candidate SN to add some prepared PSCells from the suggested
list or cancel part of the prepared PSCells. In case of intra-SN CPC, this
procedure is used to configure, modify or release intra-SN CPC configuration.
This procedure may be initiated by the MN or SN to request the SN or MN to
deactivate or activate the SCG.
The Secondary Node modification procedure does not necessarily need to involve
signalling towards the UE.
**MN initiated SN Modification**
Figure 10.3.1-1: SN Modification procedure - MN initiated
The MN uses the procedure to initiate configuration changes of the SCG within
the same SN, e.g. the addition, modification or release of SCG bearer(s) and
the SCG RLC bearer of split bearer(s), as well as configuration changes for SN
terminated MCG bearers. Bearer termination point change is realized by adding
the new bearer configuration and releasing the old bearer configuration within
a single MN initiated SN Modification procedure for the respective E-RAB. The
MN uses this procedure to perform handover within the same MN while keeping
the SN. The MN also uses the procedure to query the current SCG configuration,
e.g. when delta configuration is applied in an MN initiated SN change. The MN
also uses the procedure to provide the S-RLF related information to the SN.
The MN also uses this procedure to activate or deactivate the SCG. The MN may
not use the procedure to initiate the addition, modification or release of SCG
SCells. The SN may reject the request, except if it concerns the release of SN
terminated bearer(s) or the SCG RLC bearer of MN terminated bearer(s), or if
it is used to perform handover within the same MN while keeping the SN. Figure
10.3.1-1 shows an example signalling flow for an MN initiated SN Modification
procedure.
1\. The MN sends the _SgNB Modification Request_ message, which may contain
bearer context related or other UE context related information, data
forwarding address information (if applicable) and the requested SCG
configuration information, including the UE capability coordination result to
be used as basis for the reconfiguration by the SN. The MN may request the SCG
to be activated or deactivated. In case a security key update in the SN is
required, a new **_SgNB Security Key_ is included.** In case of SCG RLC re-
establishment for E-RABs configured with an MN terminated bearer with an SCG
RLC bearer for which no bearer type change is performed, the MN provides a new
UL GTP tunnel endpoint to the SN. The SN shall continue sending UL PDCP PDUs
to the MN with the previous UL GTP tunnel endpoint until it re-establishes the
RLC and use the new UL GTP tunnel endpoint after re-establishment. In case of
PDCP re-establishment for E-RABs configured with an SN terminated bearer with
an MCG RLC bearer for which no bearer type change is performed, the MN
provides a new DL GTP tunnel endpoint to the SN. The SN shall continue sending
DL PDCP PDUs to the MN with the previous DL GTP tunnel endpoint until it
performs PDCP re-establishment and use the new DL GTP tunnel endpoint starting
with the PDCP re-establishment.
2\. The SN responds with the _SgNB Modification Request Acknowledge_ message,
which may contain SCG radio resource configuration information within a NR RRC
configuration message and data forwarding address information (if applicable).
If the MN requested the SCG to be activated or deactivated, the SN indicates
whether the SCG is activated or deactivated. In case of a security key update
(with or without PSCell change), for E-RABs configured with the MN terminated
bearer option that require X2-U resources between the MN and the SN, for which
no bearer type change is performed, the SN provides a new DL GTP tunnel
endpoint to the MN. The MN shall continue sending DL PDCP PDUs to the SN with
the previous DL GTP tunnel endpoint until it performs PDCP re-establishment or
PDCP data recovery, and use the new DL GTP tunnel endpoint starting with the
PDCP re-establishment or data recovery. In case of a security key update (with
or without PSCell change), for E-RABs configured with the SN terminated bearer
option that require X2-U resources between the MN and the SN, for which no
bearer type change is performed, the SN provides a new UL GTP tunnel endpoint
to the MN. The MN shall continue sending UL PDCP PDUs to the SN with the
previous UL GTP tunnel endpoint until it re-establishes the RLC and use the
new UL GTP tunnel endpoint after re-establishment.
NOTE 00: In case SN includes the indication of full RRC configuration in _SgNB
Modification Request Acknowledge_ message to MN e.g. comprehension failure
upon intra-CU inter-DU change, MN performs release and add of the NR SCG part
of the configuration but does not release SN terminated radio bearers towards
the UE.
3-5. The MN initiates the RRC connection reconfiguration procedure, including
the NR RRC configuration message. The UE applies the new configuration,
synchronizes to the MN (if instructed, in case of intra-MN handover) and
replies with _RRCConnectionReconfigurationComplete_ , including a NR RRC
response message, if needed. In case the UE is unable to comply with (part of)
the configuration included in the _RRCConnectionReconfiguration_ message, it
performs the reconfiguration failure procedure.
6\. Upon successful completion of the reconfiguration, the success of the
procedure is indicated in the _SgNB Reconfiguration Complete_ message.
7\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SgNB addition procedure. Otherwise, the UE may perform UL
transmission after having applied the new configuration.
8\. If PDCP termination point is changed for bearers using RLC AM, and when
RRC full configuration is not used, the SN Status Transfer takes place between
the MN and the SN (Figure 10.3.1-1 depicts the case where a bearer context is
transferred from the MN to the SN).
NOTE 0: The SN may not be aware that a SN terminated bearer requested to be
released is reconfigured to a MN terminated bearer. The SN Status for the
released SN terminated bearers with RLC AM may also be transferred to the MN.
9\. If applicable, data forwarding between MN and the SN takes place (Figure
10.3.1-1 depicts the case where a bearer context is transferred from the MN to
the SN).
10\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE over the NR
radio for the E-RABs to be released and for the E-RABs for which the S1 UL GTP
Tunnel endpoint was requested to be modified.
NOTE 1: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related bearer is stopped.
11\. If applicable, a path update is performed.
**SN initiated SN Modification with MN involvement**
Figure 10.3.1-2: SN Modification procedure - SN initiated with MN involvement
The SN uses the procedure to perform configuration changes of the SCG within
the same SN, e.g. to trigger the release of SCG bearer(s) and the SCG RLC
bearer of split bearer(s) (upon which the MN may release the bearer or
maintain current bearer type or reconfigure it to an MCG bearer, either MN
terminated or SN terminated), to trigger the release of SCG resources (e.g.,
release SCG lower layer resources but keep SN), and to trigger PSCell change
(e.g. when a new security key is required or when the MN needs to perform PDCP
data recovery). The MN cannot reject the release request of SCG bearer and the
SCG RLC bearer of a split bearer and the release request of SCG resources. The
SN also uses this procedure to activate or deactivate the SCG. The MN shall
either accept modification of all of the requested SCG bearer(s) and the SCG
RLC bearer of split bearer(s) and the request of activation or deactivation of
the SCG, or fail the procedure. Figure 10.3.1-2 shows an example signalling
flow for an SN initiated SgNB Modification procedure, with MN involvement.
1\. The SN sends the _SgNB Modification Required_ message including a NR RRC
configuration message, which may contain bearer context related, other UE
context related information and the new SCG radio resource configuration. The
SN may request the SCG to be activated or deactivated. For bearer release or
modification, a corresponding E-RAB list is included in the _SgNB Modification
Required_ message. In case of change of security key, the _PDCP Change_
_Indication_ indicates that a S-K~gNB~ update is required. In case the MN
needs to perform PDCP data recovery, the _PDCP Change_ _Indication_ indicates
that PDCP data recovery is required. In case SN decides to trigger SCG
release, the E-RABs to be modified list includes all the E-RABs of the UE with
SCG resource indicated as not present for each E-RAB.
The SN can decide whether the change of security key is required.
NOTE 1a: In case SN includes the indication of full RRC configuration in _SgNB
Modification Required_ message to MN e.g. comprehension failure upon intra-CU
inter-DU change, MN performs release and add of the NR SCG part of the
configuration but does not release SN terminated radio bearers towards the UE.
NOTE 1b: In case that a MN initiated conditional reconfiguration (e.g. CHO or
MN initiated inter-SN CPC) is prepared, and if any execution of a prepared SN
initiated intra-SN CPC procedure or reconfiguration of the SCG, the SN
notifies to the MN via the _SgNB Modification Required_ message. In this case,
the steps 2 and 3 are skipped.
NOTE 1c: In case of SN initiated inter-SN CPC and in case that a candidate SN
triggered the SN Initiated SN Modification procedure to include some more
prepared PSCells (within the candidate cells suggested by the source SN in SN
initiated inter-SN CPC) or to remove some prepared PSCells, the MN may decide
to trigger the step 2 towards the source SN.
2/3. The MN initiated SN Modification procedure may be triggered by the _SN
Modification Required_ message (e.g. to provide information such as data
forwarding addresses, new SN security key, measurement gap, etc...)
NOTE 2: If only SN security key is provided in step 2, the MN does not need to
wait for the reception of step 3 to initiate the RRC connection
reconfiguration procedure.
4\. The MN sends the _RRCConnectionReconfiguration_ message including a NR RRC
configuration message to the UE including the new SCG radio resource
configuration.
5\. The UE applies the new configuration and sends the
_RRCConnectionReconfigurationComplete_ message, including an encoded NR RRC
response message, if needed. In case the UE is unable to comply with (part of)
the configuration included in the _RRCConnectionReconfiguration_ message, it
performs the reconfiguration failure procedure.
6\. Upon successful completion of the reconfiguration, the success of the
procedure is indicated in the _SgNB Modification Confirm_ message containing
the encoded NR RRC response message, if received from the UE.
7\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SN addition procedure. Otherwise, the UE may perform UL
transmission after having applied the new configuration.
8\. If PDCP termination point is changed for bearers using RLC AM, and when
RRC full configuration is not used, the SN Status Transfer takes place between
the MN and the SN (Figure 10.3.1-2 depicts the case where a bearer context is
transferred from the SN to the MN).
NOTE 2a: The SN may not be aware that a SN terminated bearer requesting to
release is reconfigured to a MN terminated bearer. The SN Status for the
released SN terminated bearers with RLC AM may also be transferred to the MN.
9\. If applicable, data forwarding between MN and the SN takes place (Figure
10.3.1-2 depicts the case where a bearer context is transferred from the SN to
the MN).
10\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE over the NR
radio for the E-RABs to be released.
NOTE 3: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related bearer is stopped.
11\. If applicable, a path update is performed.
**SN initiated SN Modification without MN involvement**
Figure 10.3.1-3: SN modification - SN initiated without MN involvement
The SN initiated modification without MN involved procedure is used to modify
the configuration within SN in case no coordination with MN is required,
including the addition/modification/release of SCG SCell and PSCell change
(e.g. when the security key does not need to be changed and the MN does not
need to be involved in PDCP recovery). The SN may initiate the procedure to
configure, modify or release intra-SN CPC configuration within the same SN.
Figure 10.3.1-3 shows an example signalling flow for SN initiated SN
modification procedure, without MN involvement. The SN can decide whether the
Random Access procedure is required.
1\. The SN sends the _RRCReconfiguration_ message to the UE through SRB3. The
UE applies the new configuration. In case the UE is unable to comply with
(part of) the configuration included in the _RRCReconfiguration_ message, it
performs the reconfiguration failure procedure.
2\. If instructed, the UE performs synchronisation towards the PSCell of the
SN.
3\. The UE replies with the _RRCReconfigurationComplete_ message.
**SN initiated Conditional SN Modification without MN involvement (SRB3 is
used)**
Figure 10.3.1-3a: SN Modification - SN-initiated without MN involvement and
SRB3 is used to configure intra-SN CPC.
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is used to configure intra-SN CPC.
1\. The SN sends the _RRCReconfiguration_ message including CPC configuration
to the UE through SRB3.
2\. The UE applies the new configuration. In case the UE is unable to comply
with (part of) the configuration included in the _RRCReconfiguration_ message,
it performs the reconfiguration failure procedure. The UE starts evaluating
the CPC execution conditions for the candidate PSCell(s). The UE maintains
connection with the source PSCell and replies with the
_RRCReconfigurationComplete_ message to the SN via SRB3.
3\. If at least one CPC candidate PSCell satisfies the corresponding CPC
execution condition, the UE detaches from the source PSCell, applies the
stored configuration corresponding to the selected candidate PSCell and
synchronises to the candidate PSCell.
4\. The UE completes the CPC execution procedure by sending an
_RRCReconfigurationComplete_ message to the new PSCell.
**Transfer of an NR RRC message to/from the UE (when SRB3 is not used)**
Figure 10.3.1-4: Transfer of an NR RRC message to/from the UE
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is not used.
1\. The SN initiates the procedure by sending the _SgNB Modification Required_
to the MN.
2\. The MN forwards the NR RRC message to the UE in the
_RRCConnectionReconfiguration_ message.
3\. The UE applies the new configuration and replies with the
_RRCConnectionReconfigurationComplete_ message. In case the UE is unable to
comply with (part of) the configuration included in the NR RRC message, it
performs the reconfiguration failure procedure.
4\. The MN forwards the NR RRC response message, if received from the UE, to
the SN in the _SgNB Modification Confirm_ message.
5\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SgNB Addition procedure. Otherwise the UE may perform UL
transmission after having applied the new configuration.
**SN initiated Conditional SN Modification without MN involvement (SRB3 is not
used)**
Figure 10.3.1-5: SN Modification - SN-initiated without MN involvement and
SRB3 is not used to configure intra-SN CPC
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is not used to configure intra-SN CPC.
1\. The SN initiates the procedure by sending the _SgNB Modification Required_
to the MN including the SN RRC reconfiguration message with CPC configuration.
2\. The MN forwards the SN RRC reconfiguration message to the UE including it
in the _RRCConnectionReconfiguration_ message.
3\. The UE replies with the _RRCConnectionReconfigurationComplete_ message by
including the SN RRC reconfiguration complete message. In case the UE is
unable to comply with (part of) the configuration included in the SN RRC
reconfiguration message, it performs the reconfiguration failure procedure.
The UE maintains connection with source PSCell after receiving CPC
configuration, and starts evaluating the CPC execution conditions for the
candidate PSCell(s).
4\. The MN forwards the SN RRC response message, if received from the UE, to
the SN by including it in the _SgNB Modification Confirm_ message.
5\. If at least one CPC candidate PSCell satisfies the corresponding CPC
execution condition, the UE completes the CPC execution procedure by an
_ULInformationTransferMRDC_ message to the MN which includes an embedded
_RRCReconfigurationComplete_ message to the selected target PSCell.
6\. The _RRCReconfigurationComplete_ message is forwarded to the SN embedded
in _RRC Transfer_ message.
7\. The UE detaches from the source PSCell, applies the stored corresponding
configuration and synchronises to the selected candidate PSCell.
### 10.3.2 MR-DC with 5GC
The SN Modification procedure may be initiated either by the MN or by the SN
and be used to modify the current user plane resource configuration (e.g.
related to PDU session, QoS flow or DRB) or to modify other properties of the
UE context within the same SN. It may also be used to transfer an RRC message
from the SN to the UE via the MN and the response from the UE via MN to the SN
(e.g. when SRB3 is not used). In NGEN-DC and NR-DC, the RRC message is an NR
message (i.e., _RRCReconfiguration_) whereas in NE-DC it is an E-UTRA message
(i.e., _RRCConnectionReconfiguration_). In case of CPA or inter-SN CPC, this
procedure is used to modify CPA or inter-SN CPC configuration within the same
candidate SN. In case of CPA or inter-SN CPC, this procedure may also be
triggered by the candidate SN to add some prepared PSCells from the suggested
list or cancel part of the prepared PSCells. In case of intra-SN CPC, this
procedure is used to configure, modify or release intra-SN CPC configuration.
This procedure may be initiated by the MN or SN to request the SN or MN to
activate or deactivate the SCG.
The SN modification procedure does not necessarily need to involve signalling
towards the UE.
**MN initiated SN Modification**
Figure 10.3.2-1: SN Modification procedure - MN initiated
The MN uses the procedure to initiate configuration changes of the SCG within
the same SN, including addition, modification or release of the user plane
resource configuration. The MN uses this procedure to perform handover within
the same MN while keeping the SN, when the SN needs to be involved (i.e. in
NGEN-DC). The MN also uses the procedure to query the current SCG
configuration, e.g. when delta configuration is applied in an MN initiated SN
change. The MN also uses the procedure to provide the S-RLF related
information to the SN or to provide additional available DRB IDs to be used
for SN terminated bearers. The MN also uses this procedure to activate or
deactivate the SCG. The MN may not use the procedure to initiate the addition,
modification or release of SCG SCells. The SN may reject the request, except
if it concerns the release of the user plane resource configuration, or if it
is used to perform handover within the same MN while keeping the SN. Figure
10.3.2-1 shows an example signalling flow for an MN initiated SN Modification
procedure.
1\. The MN sends the _SN Modification Request_ message, which may contain user
plane resource configuration related or other UE context related information,
PDU session level Network Slice info and the requested SCG configuration
information, including the UE capabilities coordination result to be used as
basis for the reconfiguration by the SN. In case a security key update in the
SN is required, a new **_SN Security Key_ is included.** In case the PDCP data
recovery in the SN is required, the _PDCP Change_ _Indication_ is included
which indicates that PDCP data recovery is required in SN.
2\. The SN responds with the _SN Modification Request Acknowledge_ message,
which may contain new SCG radio configuration information within an SN RRC
reconfiguration message _,_ and data forwarding address information (if
applicable). **If the MN requested the SCG to be activated or deactivated, the
SN indicates whether the SCG is activated or deactivated.**
NOTE 1: For MN terminated bearers to be setup for which PDCP duplication with
CA is configured in NR SCG side, the MN allocates up to 4 separate Xn-U
bearers and the SN provides a logical channel ID for primary or split
secondary path to the MN.
For SN terminated bearers to be setup for which PDCP duplication with CA is
configured in NR MCG side, the SN allocates up to 4 separate Xn-U bearers and
the MN provides a logical channel ID for primary or split secondary path to
the SN via an additional MN-initiated SN modification procedure.
2a. When applicable, the MN provides data forwarding address information to
the SN. For SN terminated bearers using MCG resources, the MN provides Xn-U DL
TNL address information in the _Xn-U Address Indication_ message.
3/4. The MN initiates the RRC reconfiguration procedure, including an _SN RRC
reconfiguration_ message. The UE applies the new configuration, synchronizes
to the MN (if instructed, in case of intra-MN handover) and replies with _MN
RRC reconfiguration complete_ message, including an SN RRC response message,
if needed. In case the UE is unable to comply with (part of) the configuration
included in the _MN RRC reconfiguration_ message, it performs the
reconfiguration failure procedure.
5\. Upon successful completion of the reconfiguration, the success of the
procedure is indicated in the _SN Reconfiguration Complete_ message.
6\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SN addition procedure. Otherwise, the UE may perform UL
transmission after having applied the new configuration.
7\. If PDCP termination point is changed for bearers using RLC AM, and when
RRC full configuration is not used, the SN Status Transfer takes place between
the MN and the SN (Figure 10.3.2-1 depicts the case where a bearer context is
transferred from the MN to the SN).
8\. If applicable, data forwarding between MN and the SN takes place (Figure
10.3.2-1 depicts the case where a user plane resource configuration related
context is transferred from the MN to the SN).
9\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE as described
in clause 10.11.2.
NOTE 2: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related QoS flow is stopped.
10\. If applicable, a PDU Session path update procedure is performed.
**SN initiated SN Modification with MN involvement**
Figure 10.3.2-2: SN Modification procedure - SN initiated with MN involvement
The SN uses the procedure to perform configuration changes of the SCG within
the same SN, e.g. to trigger the modification/release of the user plane
resource configuration, to trigger the release of SCG resources (e.g., release
SCG lower layer resources but keep SN), and to trigger PSCell changes (e.g.
when a new security key is required or when the MN needs to perform PDCP data
recovery). The MN cannot reject the release request of PDU session/QoS flows
and the release request of SCG resources. The SN also uses the procedure to
request the MN to provide more DRB IDs to be used for SN terminated bearers or
to return DRB IDs used for SN terminated bearers that are not needed any
longer. The SN also uses this procedure to activate or deactivate the SCG.
Figure 10.3.2-2 shows an example signalling flow for SN initiated SN
Modification procedure.
1\. The SN sends the _SN Modification Required_ message including an SN RRC
reconfiguration message, which may contain user plane resource configuration
related context, other UE context related information and the new radio
resource configuration of SCG. The SN may request the SCG to be activated or
deactivated. In case of change of security key, the _PDCP Change_ _Indication_
indicates that an SN security key update is required. In case the MN needs to
perform PDCP data recovery, the _PDCP Change_ _Indication_ indicates that PDCP
data recovery is required.
The SN can decide whether the change of security key is required.
NOTE 3a: In case that a MN initiated conditional reconfiguration (e.g. CHO or
MN initiated inter-SN CPC) is prepared, and if any execution of a prepared SN
initiated intra-SN CPC procedure or reconfiguration of the SCG, the SN
notifies to the MN via the _SN Modification Required_ message. In this case,
the steps 2 and 3 are skipped.
NOTE 3b: In case of SN initiated inter-SN CPC and in case that a candidate SN
triggered the SN Initiated SN Modification procedure to include some prepared
PSCells (within the candidate cells suggested by the source SN in SN initiated
inter-SN CPC) or to remove some prepared PSCells, the MN may decide to trigger
the step 2 towards the source SN.
2/3. The MN initiated SN Modification procedure may be triggered by _SN
Modification Required_ message, e.g. when an SN security key change needs to
be applied.
NOTE 3: For SN terminated bearers to be setup for which PDCP duplication with
CA is configured in NR MCG side, the SN allocates up to 4 separate Xn-U
bearers and the MN provides a logical channel ID for primary or split
secondary path to the SN via the nested MN-initiated SN modification
procedure.
4\. The MN sends the _MN RRC reconfiguration_ message to the UE including the
SN RRC reconfiguration message with the new SCG radio resource configuration.
5\. The UE applies the new configuration and sends the _MN RRC reconfiguration
complete_ message, including an SN RRC response message, if needed. In case
the UE is unable to comply with (part of) the configuration included in the
_MN RRC reconfiguration_ message, it performs the reconfiguration failure
procedure.
6\. Upon successful completion of the reconfiguration, the success of the
procedure is indicated in the _SN Modification Confirm_ message including the
SN RRC response message, if received from the UE.
7\. If instructed, the UE performs synchronisation towards the PSCell
configured by the SN as described in SN Addition procedure. Otherwise, the UE
may perform UL transmission directly after having applied the new
configuration.
8\. If PDCP termination point is changed for bearers using RLC AM, and when
RRC full configuration is not used, the SN Status Transfer takes place between
the MN and the SN (Figure 10.3.2-2 depicts the case where a bearer context is
transferred from the SN to the MN).
9\. If applicable, data forwarding between MN and the SN takes place (Figure
10.3.2-2 depicts the case where a user plane resource configuration related
context is transferred from the SN to the MN).
10\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE as described
in clause 10.11.2.
NOTE 4: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related QoS flow is stopped.
11\. If applicable, a PDU Session path update procedure is performed.
**SN initiated SN Modification without MN involvement**
This procedure is not supported for NE-DC.
Figure 10.3.2-3: SN Modification -- SN initiated without MN involvement
The SN initiated SN modification procedure without MN involvement is used to
modify the configuration within SN in case no coordination with MN is
required, including the addition/modification/release of SCG SCell and PSCell
change (e.g. when the security key does not need to be changed and the MN does
not need to be involved in PDCP recovery). The SN may initiate the procedure
to configure, modify or release intra-SN CPC configuration within the same SN.
Figure 10.3.2-3 shows an example signalling flow for SN initiated SN
modification procedure without MN involvement. The SN can decide whether the
Random Access procedure is required.
1\. The SN sends the _SN RRC reconfiguration_ message to the UE through SRB3.
2\. The UE applies the new configuration and replies with the _SN RRC
reconfiguration complete_ message. In case the UE is unable to comply with
(part of) the configuration included in the _SN RRC reconfiguration_ message,
it performs the reconfiguration failure procedure.
3\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SN Addition procedure. Otherwise the UE may perform UL
transmission after having applied the new configuration.
**SN initiated Conditional SN Modification without MN involvement (SRB3 is
used)**
This procedure is not supported for NE-DC and NGEN-DC.
Figure 10.3.2-3a: SN Modification -- SN-initiated without MN involvement and
SRB3 is used to configure intra-SN CPC.
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is used to configure intra-SN CPC.
1\. The SN sends the _SN RRC reconfiguration_ including CPC configuration to
the UE through SRB3.
2\. The UE applies the new configuration. In case the UE is unable to comply
with (part of) the configuration included in the SN RRC reconfiguration
message, it performs the reconfiguration failure procedure. The UE starts
evaluating the CPC execution conditions for the candidate PSCell(s). The UE
maintains connection with the source PSCell and replies with the
_RRCReconfigurationComplete_ message to the SN via SRB3.
3\. If at least one CPC candidate PSCell satisfies the corresponding CPC
execution condition, the UE detaches from the source PSCell, applies the
stored configuration corresponding to the selected candidate PSCell and
synchronises to the candidate PSCell.
4\. The UE completes the CPC execution procedure by sending an
_RRCReconfigurationComplete_ message to the new PSCell.
**Transfer of an NR RRC message to/from the UE (when SRB3 is not used)**
This procedure is supported for all the MR-DC options.
Figure 10.3.2-4: Transfer of an NR RRC message to/from the UE
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is not used.
1\. The SN initiates the procedure by sending the _SN Modification Required_
to the MN including the SN RRC reconfiguration message.
2\. The MN forwards the SN RRC reconfiguration message to the UE including it
in the _RRC reconfiguration_ message.
3\. The UE applies the new configuration and replies with the _RRC
reconfiguration complete_ message by including the SN RRC reconfiguration
complete message. In case the UE is unable to comply with (part of) the
configuration included in the SN RRC reconfiguration message, it performs the
reconfiguration failure procedure.
4\. The MN forwards the SN RRC response message, if received from the UE, to
the SN by including it in the _SN Modification Confirm_ message.
5\. If instructed, the UE performs synchronisation towards the PSCell of the
SN as described in SN Addition procedure. Otherwise the UE may perform UL
transmission after having applied the new configuration.
**SN initiated Conditional SN Modification without MN involvement (SRB3 is not
used)**
This procedure is not supported for NE-DC and NGEN-DC.
Figure 10.3.2-5: SN Modification -- SN-initiated without MN involvement and
SRB3 is not used to configure intra-SN CPC
The SN initiates the procedure when it needs to transfer an NR RRC message to
the UE and SRB3 is not used to configure intra-SN CPC.
1\. The SN initiates the procedure by sending the _SN Modification Required_
to the MN including the SN RRC reconfiguration message with CPC configuration.
2\. The MN forwards the SN RRC reconfiguration message to the UE including it
in the _RRCReconfiguration_ message.
3\. The UE replies with the _RRCReconfigurationComplete_ message by including
the SN RRC reconfiguration complete message. In case the UE is unable to
comply with (part of) the configuration included in the SN RRC reconfiguration
message, it performs the reconfiguration failure procedure. The UE maintains
connection with source PSCell after receiving CPC configuration, and starts
evaluating the CPC execution conditions for the candidate PSCell(s).
4\. The MN forwards the SN RRC response message, if received from the UE, to
the SN by including it in the _SN Modification Confirm_ message.
5\. If at least one CPC candidate PSCell satisfies the corresponding CPC
execution condition, the UE completes the CPC execution procedure by an
_ULInformationTransferMRDC_ message to the MN which includes an embedded
_RRCReconfigurationComplete_ message to the selected target PSCell.
6\. The _RRCReconfigurationComplete_ message is forwarded to the SN embedded
in _RRC Transfer_ message.
7\. The UE detaches from the source PSCell, applies the stored corresponding
configuration and synchronises to the selected candidate PSCell.
## 10.4 Secondary Node Release (MN/SN initiated)
### 10.4.1 EN-DC
The Secondary Node Release procedure may be initiated either by the MN or by
the SN and is used to initiate the release of the UE context at the SN. The
recipient node of this request can reject it, e.g., if a SN change procedure
is triggered by the SN.
In case of CPA or inter-SN CPC, this procedure may be initiated either by the
MN or the candidate SN, and it is used to cancel all the prepared PSCells at
the candidate SN and initiate the release of related UE context at the
candidate SN.
It does not necessarily need to involve signalling towards the UE, e.g., in
case of the RRC connection re-establishment due to Radio Link Failure in MN.
**MN initiated SN Release**
Figure 10.4.1-1: SN Release procedure -- MN initiated
Figure 10.4.1-1 shows an example signalling flow for the MN initiated
Secondary Node Release procedure when SN Release is confirmed by SN.
1\. The MN initiates the procedure by sending the _SgNB Release Request_
message. If applicable, the MN provides data forwarding addresses to the SN.
> 2\. The SN confirms SN Release by sending the _SgNB Release Request
> Acknowledge_ message. If appropriate, the SN may reject SN Release, e.g. if
> the SN change procedure is triggered by the SN.
NOTE 0: If CPA or inter-SN CPC is configured, upon reception of the _SgNB
Release Request Acknowledge_ message the MN cancels all CPAC with the target
candidate SN(s).
3/4. If required, the MN indicates in the _RRCConnectionReconfiguration_
message towards the UE that the UE shall release the entire SCG configuration.
In case the UE is unable to comply with (part of) the configuration included
in the _RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
NOTE 1: If data forwarding is applied, timely coordination between steps 1 and
2 may minimize gaps in service provision, this is however regarded to be an
implementation matter.
5\. For bearers using RLC AM, the SN sends the _SN Status Transfer_ message.
6\. Data forwarding from the SN to the MN may start.
7\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE over the NR
radio for the related E-RABs.
NOTE 2: If data forwarding is applied, the order the SN sends the _Secondary
RAT Data Usage Report_ message and starts data forwarding with MN is not
defined i.e., step 7 can take place before step 6. The SN does not need to
wait for the end of data forwarding to send the _Secondary RAT Data Usage
Report_ message.
8\. If applicable, the path update procedure is initiated.
9\. Upon reception of the _UE Context Release_ message, the SN releases radio
and C-plane related resources associated to the UE context. Any ongoing data
forwarding may continue.
**SN initiated SN Release**
Figure 10.4.1-2: SN Release procedure -- SN initiated
Figure 10.4.1-2 shows an example signalling flow for the SN initiated
Secondary Node Release procedure.
1\. The SN initiates the procedure by sending the _SgNB Release Required_
message which may contain inter-node message to support delta configuration.
> 2\. If applicable, the MN provides data forwarding addresses to the SN in
> the _SgNB Release Confirm_ message. The SN may start data forwarding and
> stop providing user data to the UE as early as it receives the _SgNB Release
> Confirm_ message.
NOTE 2a: If CPA or inter-SN CPC is configured, upon reception of the _SgNB
Release Required_ message the MN cancels all CPAC with the target candidate
SN(s).
3/4. If required, the MN indicates in the _RRCConnectionReconfiguration_
message towards the UE that the UE shall release the entire SCG configuration.
In case the UE is unable to comply with (part of) the configuration included
in the _RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
NOTE 3: If data forwarding is applied, timely coordination between steps 2 and
3 may minimize gaps in service provision. This is however regarded to be an
implementation matter.
5\. For bearers using RLC AM, the SN sends the _SN Status Transfer_ message.
6\. Data forwarding from the SN to the MN may start.
7\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE over the NR
radio for the related E-RABs.
NOTE 4: If data forwarding is applied, the order the SN sends the _Secondary
RAT Data Usage Report_ message and starts data forwarding with MN is not
defined i.e., step 7 can take place before step 6. The SN does not need to
wait for the end of data forwarding to send the _Secondary RAT Data Usage
Report_ message.
8\. If applicable, the path update procedure is initiated.
9\. Upon reception of the _UE Context Release_ message, the SN releases radio
and C-plane related resources associated to the UE context. Any ongoing data
forwarding may continue.
### 10.4.2 MR-DC with 5GC
The SN Release procedure may be initiated either by the MN or by the SN and is
used to initiate the release of the UE context and relevant resources at the
SN. The recipient node of this request can reject it, e.g., if an SN change
procedure is triggered by the SN.
In case of CPA or inter-SN CPC, this procedure may be initiated either by the
MN or the candidate SN, and it is used to cancel all the prepared PSCells at
the candidate SN and initiate the release of related UE context at the
candidate SN.
**MN initiated SN Release**
Figure 10.4.2-1: SN release procedure - MN initiated
Figure 10.4.2-1 shows an example signalling flow for the MN initiated SN
Release procedure.
1\. The MN initiates the procedure by sending the _SN Release Request_
message.
2\. The SN confirms SN Release by sending the _SN Release Request Acknowledge_
message. If appropriate, the SN may reject SN Release, e.g., if the SN change
procedure is triggered by the SN.
NOTE 00: If CPA or inter-SN CPC is configured, upon reception of the _SN
Release Request Acknowledge_ message the MN cancels all CPAC with the target
candidate SN(s).
2a. When applicable, the MN provides forwarding address information to the SN.
NOTE 0: The MN may send the _Xn-U Address Indication_ message to provide
forwarding address information before step 2.
3/4. If required, the MN indicates in the _MN RRC reconfiguration_ message
towards the UE that the UE shall release the entire SCG configuration. In case
the UE is unable to comply with (part of) the configuration included in the
_MN RRC reconfiguration_ message, it performs the reconfiguration failure
procedure.
NOTE 1: If data forwarding is applied, timely coordination between steps 1 and
2 may minimize gaps in service provision, this is however regarded to be an
implementation matter.
5\. If PDCP termination point is changed to the MN for bearers using RLC AM,
the SN sends the _SN Status Transfer_ message.
6\. Data forwarding from the SN to the MN may start.
7\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE as described
in clause 10.11.2.
NOTE 1a: If data forwarding is applied, the order the SN sends the _Secondary
RAT Data Usage Report_ message and starts data forwarding with MN is not
defined i.e., step 7 can take place before step 6. The SN does not need to
wait for the end of data forwarding to send the _Secondary RAT Data Usage
Report_ message.
8\. If applicable, the PDU Session path update procedure is initiated.
9\. Upon reception of the _UE Context Release_ message, the SN releases radio
and C-plane related resources associated to the UE context. Any ongoing data
forwarding may continue.
**SN initiated SN Release**
Figure 10.4.2-2: SN release procedure - SN initiated
Figure 10.4.2-2 shows an example signalling flow for the SN initiated SN
Release procedure.
1\. The SN initiates the procedure by sending the _SN Release Required_
message which may contain inter-node message to support delta configuration.
2\. If data forwarding is requested, the MN provides data forwarding addresses
to the SN in the _SN Release Confirm_ message. The SN may start data
forwarding and stop providing user data to the UE as early as it receives the
_SN Release Confirm_ message.
NOTE 1b: If CPA or inter-SN CPC is configured, upon reception of the _SN
Release Required_ message the MN cancels all CPAC with the target candidate
SN(s).
3/4. If required, the MN indicates in the _MN RRC reconfiguration_ message
towards the UE that the UE shall release the entire SCG configuration. In case
the UE is unable to comply with (part of) the configuration included in the
_MN RRC reconfiguration_ message, it performs the reconfiguration failure
procedure.
NOTE 2: If data forwarding is applied, timely coordination between steps 2 and
3 may minimize gaps in service provision. This is however regarded to be an
implementation matter.
5\. If PDCP termination point is changed to the MN for bearers using RLC AM,
the SN sends the _SN Status Transfer message_.
6\. Data forwarding from the SN to the MN may start.
7\. The SN sends the _Secondary RAT Data Usage Report_ message to the MN and
includes the data volumes delivered to and received from the UE as described
in clause 10.11.2.
NOTE 3: If data forwarding is applied, the order the SN sends the _Secondary
RAT Data Usage Report_ message and starts data forwarding with MN is not
defined i.e., step 7 can take place before step 6. The SN does not need to
wait for the end of data forwarding to send the _Secondary RAT Data Usage
Report_ message.
8\. If applicable, the PDU Session path update procedure is initiated.
9\. Upon reception of the _UE Context Release_ message, the SN releases radio
and C-plane related resources associated to the UE context. Any ongoing data
forwarding may continue.
## 10.5 Secondary Node Change (MN/SN initiated)
### 10.5.1 EN-DC
The Secondary Node Change procedure is initiated either by MN or SN and used
to transfer a UE context from a source SN to a target SN and to change the SCG
configuration in UE from one SN to another. In case of inter-SN CPC, the
Conditional Secondary Node Change procedure initiated either by the MN or SN
is also used for inter-SN CPC configuration and inter-SN CPC execution.
NOTE 1: Inter-RAT SN change procedure with single RRC reconfiguration is not
supported in this version of the protocol (i.e. no transition from EN-DC to
DC).
The Secondary Node Change procedure always involves signalling over MCG SRB
towards the UE.
**MN initiated SN Change**
Figure 10.5.1-1: SN Change -- MN initiated
Figure 10.5.1-1 shows an example signalling flow for the MN initiated
Secondary Node Change:
1/2. The MN initiates the SN change by requesting the target SN to allocate
resources for the UE by means of the SgNB Addition procedure. The MN may
include measurement results related to the target SN. If forwarding is needed,
the target SN provides forwarding addresses to the MN. The target SN includes
the indication of the full or delta RRC configuration.
NOTE 2: The MN may trigger the MN-initiated SN Modification procedure (to the
source SN) to retrieve the current SCG configuration before step 1.
NOTE 2a: In case the target SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE.
3\. If the allocation of target SN resources was successful, the MN initiates
the release of the source SN resources including a Cause indicating SCG
mobility. The Source SN may reject the release. If data forwarding is needed
the MN provides data forwarding addresses to the source SN. If direct data
forwarding is used for SN terminated bearers, the MN provides data forwarding
addresses as received from the target SN to source SN. Reception of the _SgNB
Release Request_ message triggers the source SN to stop providing user data to
the UE and, if applicable, to start data forwarding.
4/5. The MN triggers the UE to apply the new configuration. The MN indicates
to the UE the new configuration in the _RRCConnectionReconfiguration_ message
including the NR RRC configuration message generated by the target SN. The UE
applies the new configuration and sends the
_RRCConnectionReconfigurationComplete_ message, including the encoded NR RRC
response message for the target SN, if needed. In case the UE is unable to
comply with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
6\. If the RRC connection reconfiguration procedure was successful, the MN
informs the target SN via _SgNBReconfigurationComplete_ message with the
encoded NR RRC response message for the target SN, if received from the UE.
7\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the target SN.
8\. For SN terminated bearers using RLC AM, the source SN sends the _SN Status
Transfer message_ , which the MN sends then to the target SN, if needed.
9\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the _SgNB Release Request_
message from the MN.
10\. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to
the MN and includes the data volumes delivered to and received from the UE
over the NR radio for the related E-RABs.
NOTE 3: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related bearer is stopped.
11-15. If applicable, a path update is triggered by the MN.
16\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
**SN initiated SN Change**
Figure 10.5.1-2: SN Change -- SN initiated
Figure 10.5.1-2 shows an example signalling flow for the Secondary Node Change
initiated by the SN:
1\. The source SN initiates the SN change procedure by sending _SgNB Change
Required_ message which contains target SN ID information and may include the
SCG configuration (to support delta configuration) and measurement results
related to the target SN.
2/3. The MN requests the target SN to allocate resources for the UE by means
of the SgNB Addition procedure, including the measurement results related to
the target SN received from the source SN. If forwarding is needed, the target
SN provides forwarding addresses to the MN. The target SN includes the
indication of the full or delta RRC configuration.
NOTE 3a: In case the target SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE.
4/5. The MN triggers the UE to apply the new configuration. The MN indicates
the new configuration to the UE in the _RRCConnectionReconfiguration_ message
including the NR RRC configuration message generated by the target SN. The UE
applies the new configuration and sends the
_RRCConnectionReconfigurationComplete_ message, including the encoded NR RRC
response message for the target SN, if needed. In case the UE is unable to
comply with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
6\. If the allocation of target SN resources was successful, the MN confirms
the release of the source SN resources. If data forwarding is needed the MN
provides data forwarding addresses to the source SN. If direct data forwarding
is used for SN terminated bearers, the MN provides data forwarding addresses
as received from the target SN to source SN. Reception of the _SgNB Change
Confirm_ message triggers the source SN to stop providing user data to the UE
and, if applicable, to start data forwarding.
7\. If the RRC connection reconfiguration procedure was successful, the MN
informs the target SN via _SgNB Reconfiguration Complete_ message with the
encoded NR RRC response message for the target SN, if received from the UE.
8\. The UE synchronizes to the target SN.
9\. For SN terminated bearers using RLC AM, the source SN sends the _SN Status
Transfer message_ , which the MN sends then to the target SN, if needed.
10\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the _SgNB Change Confirm_ message
from the MN.
11\. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to
the MN and includes the data volumes delivered to and received from the UE
over the NR radio for the related E-RABs.
NOTE 4: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The
SgNB may send the report when the transmission of the related bearer is
stopped.
12-16. If applicable, a path update is triggered by the MN.
17\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
**MN initiated conditional SN Change**
The MN initiated conditional inter-SN change procedure is used for inter-SN
CPC configuration and inter-SN CPC execution.
Figure 10.5.1-3: Conditional SN Change -- MN initiated
Figure 10.5.1-3 shows an example signalling flow for the MN initiated
Conditional Secondary Node Change:
1/2. The MN initiates the conditional SN change by requesting the candidate
SN(s) to allocate resources for the UE by means of the SgNB Addition
procedure, indicating that the request is for CPAC. The MN also provides the
candidate cells recommended by MN via the latest measurement results for the
candidate SN(s) to choose and configure the SCG cell(s), and provides the
upper limit for the number of PSCells that can be prepared by the candidate
SN. From the measurement results indicated by the MN, the candidate SN decides
the list of PSCell(s) to prepare (considering the maximum number indicated by
the MN) and, for each prepared PSCell, the candidate SN decides other SCG
SCells and provides the new corresponding SCG radio resource configuration to
the MN in an NR _RRCReconfiguration** message_ contained in the _SgNB Addition
Request Acknowledge_ message with the prepared PSCell ID(s). If forwarding is
needed, the candidate SN provides forwarding addresses to the MN. The
candidate SN includes the indication of the full or delta RRC configuration.
The candidate SN can either accept or reject each of the candidate cells
listed within the measurement results indicated by the MN, i.e. it cannot
configure any alternative candidates.
NOTE 5: The MN may trigger the MN-initiated SN Modification procedure (to the
source SN) to retrieve the current SCG configuration before step 1.
NOTE 5a: In case the candidate SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE in the conditional configuration.
3\. The MN sends to the UE an _RRCConnectionReconfiguration_ message including
the CPC configuration, i.e. a list of _RRCConnectionReconfiguration*_ messages
and associated execution conditions, in which each
_RRCConnectionReconfiguration*_ message contains the SCG configuration in the
_RRCReconfiguration** message_ received from the candidate SN in step 2 and
possibly an MCG configuration. Besides, the _RRCConnectionReconfiguration_
message can also include an updated MCG configuration, e.g., to configure the
required conditional measurements.
4\. The UE applies the _RRCConnectionReconfiguration message received in step
3_ , stores the CPC configuration and replies to the MN with an
_RRCConnectionReconfigurationComplete_ message. In case the UE is unable to
comply with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
4a. Upon receiving the _RRCConnectionReconfigurationComplete_ message from the
UE, the MN triggers the Data Forwarding Address Indication procedure to the
source SN to inform that the CPC has been configured, the source SN, if
applicable, together with the Early Status Transfer procedure, starts early
data forwarding. The PDCP SDU forwarding may take place during early data
forwarding.
NOTE 5b: Separate Data Forwarding Address Indication procedures may be invoked
to provide different forwarding addresses of the prepared candidate target
SNs. In this case, it is up to the MN and the source SN implementations to
make sure that the EARLY STATUS TRANSFER message(s) from the source SN, if
any, is forwarded to the right target destination. The Data Forwarding Address
Indication procedure may further be invoked to indicate to the source SN to
stop already initiated early data forwarding for some SN-terminated bearers if
they are no longer subject to data forwarding due to the modification or
cancellation of the prepared conditional SN change procedures.
NOTE 5c: For the early transmission of MN terminated split/SCG bearers, the MN
forwards the PDCP PDU to the candidate SN(s).
5\. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies
_RRCConnectionReconfiguration*_ message corresponding to the selected
candidate PSCell, and sends an _RRCConnectionReconfigurationComplete*_
message, including an NR _RRCReconfigurationComplete** message_ for the
selected candidate PSCell, and information enabling the MN to identify the SN
of the selected candidate PSCell.
6a-6b. The MN triggers the MeNB initiated SgNB Release procedure to inform the
source SN to stop providing user data to the UE, and, if applicable, the
address of the SN of the selected candidate PSCell to start data forwarding.
7a-7c. If the RRC connection reconfiguration procedure was successful, the MN
informs the SN of the selected candidate PSCell via _SgNB Reconfiguration
Complete_ message, including the SN _RRCReconfigurationComplete**_ message.
The MN sends the _SgNB Release Request_ message(s) to cancel CPC in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
8\. The UE synchronizes to the PSCell indicated in the
_RRCConnectionReconfiguration*_ message applied in step 5.
9a-9b. For SN terminated bearers using RLC AM, the source SN sends the _SN
Status Transfer_ message, which the MN sends to the SN of the selected
candidate PSCell, if needed.
10\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the early data forwarding address
in step 4a.
11\. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to
the MN and includes the data volumes delivered to and received from the UE
over the NR radio for the related E-RABs.
NOTE 6: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related bearer is stopped.
12-16. If applicable, a path update is triggered by the MN.
17\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
**SN initiated conditional SN Change**
The SN initiated conditional SN change procedure is used for inter-SN CPC
configuration and inter-SN CPC execution.
The SN initiated conditional SN change procedure may also be initiated by the
source SN, to modify the existing SN initiated inter-SN CPC configuration, or
to trigger the release of the candidate SN by cancellation of all the prepared
PSCells at the candidate SN and releasing the CPC related UE context at the
candidate SN.
NOTE 6a0: To modify or release an existing intra-SN CPC configuration, the
source SN triggers an SN initiated Conditional SN Modification (with or
without SRB3) without MN involvement, as specified in 10.3.
Figure 10.5.1-4: Conditional SN Change -- SN initiated
Figure 10.5.1-4 shows an example signalling flow for the Conditional Secondary
Node Change initiated by the SN:
1\. The source SN initiates the conditional SN change procedure by sending
_SgNB Change Required_ message which contains a CPC initiation indication. The
message also contains candidate SN ID(s) information and may include the SCG
configuration (to support delta configuration), and contains the measurement
results related to the candidate SN(s). The message also includes a list of
proposed PSCell candidates recommended by the source SN, including execution
conditions, the upper limit for the number of PSCells that can be prepared by
each candidate SN, and may also include the SCG measurement configurations for
CPC (e.g. measurement ID(s) to be used for CPC).
> 2/3. The MN requests each candidate SN to allocate resources for the UE by
> means of the SgNB Addition procedure(s) , indicating the request is for
> CPAC, and the measurements results related to the candidate SN and
> indicating a list of proposed PSCell candidates received from the source SN,
> but not including execution conditions. Within the list of PSCells suggested
> by the source SN, the candidate SN decides the list of PSCell(s) to prepare
> (considering the maximum number indicated by the MN) and, for each prepared
> PSCell, the candidate SN decides SCG SCells and provides the new
> corresponding SCG radio resource configuration to the MN in an NR
> _RRCReconfiguration** message_ contained in the _SgNB Addition Request
> Acknowledge_ message. If data forwarding is needed, the candidate SN
> provides data forwarding addresses to the MN. The candidate SN includes the
> indication of full or delta RRC configuration, and the list of prepared
> PSCell IDs to the MN. The candidate SN can either accept or reject each of
> the candidate cells suggested by the source SN, i.e. it cannot configure any
> alternative candidates.
NOTE 6a: In case the candidate SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE in the conditional configuration.
4/5. The MN may indicate the candidate PSCells accepted by each candidate SN
to the source SN via _SgNB Modification Request_ message before it configures
the UE e.g., when not all candidate PSCells were accepted by the candidate
SN(s). If the MN does not send such indication, step 4 and 5 are skipped. If
requested,the source SN sends an _SgNB Modification Request Acknowledge_
message and if needed, provides an updated measurement configurations and/or
the execution conditions for CPC to the MN.
6\. The MN sends to the UE an _RRCConnectionReconfiguration_ message including
the CPC configuration, i.e. a list of _RRCConnectionReconfiguration*_ messages
and associated execution conditions, in which each
_RRCConnectionReconfiguration*_ message contains the SCG configuration in the
_RRCReconfiguration** message_ received from the candidate SN in step 3 and
possibly an MCG configuration. Besides, the _RRCConnectionReconfiguration_
message can also include an updated MCG configuration, as well as the NR
_RRCReconfiguration**_ * message generated by the source SN, e.g., to
configure the required conditional measurements.
7\. The UE applies the _RRCConnectionReconfiguration message received in step
6_ , stores the CPC configuration and replies to the MN with an
_RRCConnectionReconfigurationComplete_ message, which can include an NR
_RRCReconfigurationComplete**_ * message. In case the UE is unable to comply
with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
8\. If an NR RRC response message is included, the MN informs the source SN
with the NR _RRCReconfigurationComplete**_ * message via _SgNB Change Confirm_
message. If step 4 and 5 are skipped, the MN will indicate the candidate
PSCells accepted by each candidate SN to the source SN in the _SgNB Change
Confirm_ message.
The MN sends the _SgNB Change Confirm_ message towards the source SN to
indicate that CPC is prepared, and in such case the source SN continues
providing user data to the UE. If early data forwarding is applied, the MN
informs the source SN the data forwarding addresses as received from the
candidate SN(s), the source SN, if applicable, together with the Early Status
Transfer procedure, starts early data forwarding. The PDCP SDU forwarding may
take place during early data forwarding. In case multiple candidate SNs are
prepared, the MN includes a list of Target SgNB ID and list of data forwarding
addresses to the source SN.
NOTE 6b: The Data Forwarding Address Indication procedure may further be
invoked to indicate to the source SN to stop already initiated early data
forwarding for some PDCP SDUs if they are no longer subject to data forwarding
due to the modification or cancellation of the prepared conditional PSCell
change.
NOTE 6c: For the early transmission of MN terminated split/SCG bearers, the MN
forwards the PDCP PDU to the candidate SN(s).
9a-9d. The source SN may send the _SgNB Modification Required_ message to
trigger an update of CPC execution condition and/or corresponding SCG
measurement configuration for CPC. In such case in step 9b, the MN
reconfigures the UE and in step 9c the UE responds with
_RRCConnectionReconfigurationComplete_ , similarly as in steps 6 and 7.
10\. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies the
_RRCConnectionReconfiguration*_ message corresponding to the selected
candidate PSCell, and sends an _RRCConnectionReconfigurationComplete*_
message, including the NR _RRCReconfigurationComplete** message_ for the
selected candidate PSCell, and information enabling the MN to identify the SN
of the selected candidate PSCell.
11a-11b. The MN triggers the MeNB initiated SgNB Release procedure to inform
source SN to stop providing user data to the UE, and provide the address of
the SN of the selected candidate PSCell and if applicable, start late data
forwarding.
12a-12c. If the RRC connection reconfiguration procedure was successful, the
MN informs the SN of the selected candidate PSCell via _SgNB Reconfiguration
Complete_ message, including the SN _RRCReconfigurationComplete**_ message.
The MN sends the _SgNB Release Request_ message(s) to cancel CPC in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
13\. The UE synchronizes to the PSCell indicated in the
_RRCConnectionReconfiguration*_ message applied in step 10.
14a-14b. For SN terminated bearers using RLC AM, the source SN sends the _SN
Status Transfer_ message, which the MN sends then to the SN of the selected
candidate PSCell, if needed.
15\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the early data forwarding message
from the MN.
16\. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to
the MN and includes the data volumes delivered to and received from the UE
over the NR radio for the related E-RABs.
NOTE 7: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The
SgNB may send the report when the transmission of the related bearer is
stopped.
17-21. If applicable, a path update is triggered by the MN.
22\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
### 10.5.2 MR-DC with 5GC
**MN initiated SN Change**
The MN initiated SN change procedure is used to transfer a UE context from the
source SN to a target SN and to change the SCG configuration in UE from one SN
to another.
The Secondary Node Change procedure always involves signalling over MCG SRB
towards the UE.
Figure 10.5.2-1: SN change procedure - MN initiated
Figure 10.5.2-1 shows an example signalling flow for the SN Change initiated
by the MN:
1/2. The MN initiates the SN change by requesting the target SN to allocate
resources for the UE by means of the SN Addition procedure. The MN may include
measurement results related to the target SN. If data forwarding is needed,
the target SN provides data forwarding addresses to the MN. The target SN
includes the indication of the full or delta RRC configuration.
NOTE 1: The MN may trigger the MN-initiated SN Modification procedure (to the
source SN) to retrieve the current SCG configuration and to allow provision of
data forwarding related information before step 1.
2a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message.
3\. If the allocation of target SN resources was successful, the MN initiates
the release of the source SN resources including a Cause indicating SCG
mobility. The Source SN may reject the release. If data forwarding is needed
the MN provides data forwarding addresses to the source SN. If direct data
forwarding is used for SN terminated bearers, the MN provides data forwarding
addresses as received from the target SN to source SN. Reception of the _SN
Release Request_ message triggers the source SN to stop providing user data to
the UE.
4/5. The MN triggers the UE to apply the new configuration. The MN indicates
the new configuration to the UE in the _MN RRC reconfiguration message_
including the target SN RRC reconfiguration message. The UE applies the new
configuration and sends the _MN RRC reconfiguration complete_ message,
including the SN RRC response message for the target SN, if needed. In case
the UE is unable to comply with (part of) the configuration included in the
_MN RRC reconfiguration_ message, it performs the reconfiguration failure
procedure.
6\. If the RRC connection reconfiguration procedure was successful, the MN
informs the target SN via _SN Reconfiguration Complete_ message with the
included SN RRC response message for the target SN, if received from the UE.
7\. If configured with bearers requiring SCG radio resources the UE
synchronizes to the target SN.
8\. If PDCP termination point is changed for bearers using RLC AM, the source
SN sends the _SN Status Transfer_ message, which the MN sends then to the
target SN, if needed.
9\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the _SN Release Request_ message
from the MN.
10\. The source SN sends the _Secondary RAT Data Usage Report_ message to the
MN and includes the data volumes delivered to and received from the UE as
described in clause 10.11.2.
NOTE 2: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related QoS flow is stopped.
11-15. If applicable, a PDU Session path update procedure is triggered by the
MN.
16\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue
**SN initiated SN Change**
The SN initiated SN change procedure is used to transfer a UE context from the
source SN to a target SN and to change the SCG configuration in UE from one SN
to another.
Figure 10.5.2-2: SN change procedure - SN initiated
Figure 10.5.2-2 shows an example signalling flow for the SN Change initiated
by the SN:
1\. The source SN initiates the SN change procedure by sending the _SN Change
Required_ message, which contains a candidate target node ID and may include
the SCG configuration (to support delta configuration) and measurement results
related to the target SN.
2/3. The MN requests the target SN to allocate resources for the UE by means
of the SN Addition procedure, including the measurement results related to the
target SN received from the source SN. If data forwarding is needed, the
target SN provides data forwarding addresses to the MN. The target SN includes
the indication of the full or delta RRC configuration.
3a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message.
4/5. The MN triggers the UE to apply the new configuration. The MN indicates
the new configuration to the UE in the _MN RRC reconfiguration_ message
including the SN RRC reconfiguration message generated by the target SN. The
UE applies the new configuration and sends the _MN RRC reconfiguration
complete_ message, including the SN RRC response message for the target SN, if
needed. In case the UE is unable to comply with (part of) the configuration
included in the _MN RRC reconfiguration_ message, it performs the
reconfiguration failure procedure.
6\. If the allocation of target SN resources was successful, the MN confirms
the change of the source SN. If data forwarding is needed the MN provides data
forwarding addresses to the source SN. If direct data forwarding is used for
SN terminated bearers, the MN provides data forwarding addresses as received
from the target SN to source SN. Reception of the _SN Change Confirm_ message
triggers the source SN to stop providing user data to the UE and, if
applicable, to start data forwarding.
7\. If the RRC connection reconfiguration procedure was successful, the MN
informs the target SN via _SN Reconfiguration Complete_ message with the
included SN RRC response message for the target SN, if received from the UE.
8\. The UE synchronizes to the target SN.
9\. If PDCP termination point is changed for bearers using RLC AM, the source
SN sends the _SN Status Transfer_ message, which the MN sends then to the
target SN, if needed.
10\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the _SN Change Confirm_ message
from the MN.
11\. The source SN sends the _Secondary RAT Data Usage Report_ message to the
MN and includes the data volumes delivered to and received from the UE as
described in clause 10.11.2.
NOTE 3: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN/target SN is not defined. The SN may send
the report when the transmission of the related QoS flow is stopped.
12-16. If applicable, a PDU Session path update procedure is triggered by the
MN.
17\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
**MN initiated conditional SN Change**
The Conditional Secondary Node Change procedure is initiated by the MN for
inter-SN CPC configuration and inter-SN CPC execution.
Figure 10.5.2-3: Conditional SN change procedure - MN initiated
> Figure 10.5.2-3 shows an example signalling flow for the conditional SN
> Change initiated by the MN:
1/2. The MN initiates the conditional SN change by requesting the candidate
SN(s) to allocate resources for the UE by means of the SN Addition procedure,
indicating that the request is for CPAC. The MN also provides the candidate
cells recommended by MN via the latest measurement results for the candidate
SN(s) to choose and configure the SCG cell(s), provides the upper limit for
the number of PSCells that can be prepared by the candidate SN. Within the
list of cells as indicated within the measurement results indicated by the MN,
the candidate SN decides the list of PSCell(s) to prepare (considering the
maximum number indicated by the MN) and, for each prepared PSCell, the
candidate SN decides other SCG SCells and provides the new corresponding SCG
radio resource configuration to the MN in an NR _RRCReconfiguration_ **
message contained in the _SN Addition Request Acknowledge_ message with the
prepared PSCell ID(s). If data forwarding is needed, the candidate SN provides
data forwarding addresses to the MN. The candidate SN includes the indication
of the full or delta RRC configuration. The candidate SN can either accept or
reject each of the candidate cells listed within the measurement results
indicated by the MN, i.e. it cannot configure any alternative candidates.
NOTE 4: The MN may trigger the MN-initiated SN Modification procedure (to the
source SN) to retrieve the current SCG configuration and to allow provision of
data forwarding related information before step 1.
2a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message to the candidate
SN(s).
3\. The MN sends to the UE an _RRCReconfiguration_ message including the CPC
configuration, i.e. a list of _RRCReconfiguration*_ messages and associated
execution conditions, in which each _RRCReconfiguration*_ message contains the
SCG configuration in the _RRCReconfiguration** message_ received from the
candidate SN in step 2 and possibly an MCG configuration. Besides, the
_RRCReconfiguration_ message can also include an updated MCG configuration,
e.g., to configure the required conditional measurements.
4\. The UE applies the _RRCReconfiguration_ message received in step 3, stores
the CPC configuration and replies to the MN with an
_RRCReconfigurationComplete_ message. In case the UE is unable to comply with
(part of) the configuration included in the _RRCReconfiguration_ message, it
performs the reconfiguration failure procedure.
4a. Upon receiving the MN _RRCReconfigurationComplete_ message from the UE,
the MN informs the source SN that the CPC has been configured via Xn-U Address
Indication procedure, the source SN, if applicable, together with the Early
Status Transfer procedure, starts early data forwarding. The PDCP SDU
forwarding may take place during early data forwarding.
NOTE 4a: Separate Xn-U Address Indication procedures may be invoked to provide
different forwarding addresses of the prepared candidate target SNs. In this
case, it is up to the MN and the source SN implementations to make sure that
the EARLY STATUS TRANSFER message(s) from the source SN, if any, is forwarded
to the right target destination. The Xn-U Address Indication procedure may
further be invoked to indicate to the source SN to stop already initiated
early data forwarding for some SN-terminated bearers if they are no longer
subject to data forwarding due to the modification or cancellation of the
prepared conditional SN change procedures.
NOTE 4b: For the early transmission of MN terminated split/SCG bearers, the MN
forwads the PDCP PDU to the candidate SN(s).
5\. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies
_RRCReconfiguration*_ message corresponding to the selected candidate PSCell,
and sends an MN _RRCReconfigurationComplete*_ message, including an NR
_RRCReconfigurationComplete_ ** message for the selected candidate PSCell, and
information enabling the MN to identify the SN of the selected candidate
PSCell.
6a-6c. The MN triggers the MN initiated SN Release procedure to inform the
source SN to stop providing user data to the UE, and if applicable, triggers
the Xn-U Address Indication procedure to inform the source SN the address of
the SN of the selected candidate PSCell, to start late data forwarding.
7a-7c. If the RRC connection reconfiguration procedure was successful, the MN
informs the SN of the selected candidate PSCell via _SN Reconfiguration
Complete_ message, including the SN _RRCReconfigurationComplete**_ message.
The MN sends the _SN Release Request_ message(s) to cancel CPC in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
8\. The UE synchronizes to the PSCell indicated in the _RRCReconfiguration*_
message applied in step 5.
9a-9b. If PDCP termination point is changed for bearers using RLC AM, the
source SN sends the message, which the MN sends then to the SN of the selected
candidate PSCell, if needed.
10\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the early data forwarding address
in step 4a.
11\. The source SN sends the _Secondary RAT Data Usage Report_ message to the
MN and includes the data volumes delivered to and received from the UE as
described in clause 10.11.2.
NOTE 5: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related QoS flow is stopped.
12-16. If applicable, a PDU Session path update procedure is triggered by the
MN.
17\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
**SN initiated conditional SN Change**
The SN initiated conditional SN change procedure is used for inter-SN CPC
configuration and inter-SN CPC execution.
The SN initiated conditional SN change procedure may also be initiated by the
source SN, to modify the existing SN initiated inter-SN CPC configuration, or
to trigger the release of the candidate SN by cancellation of all the prepared
PSCells at the candidate SN and releasing the CPC related UE context at the
candidate SN.
NOTE 5a0: To modify or release an existing intra-SN CPC configuration, the
source SN triggers an SN initiated Conditional SN Modification (with or
without SRB3) without MN involvement, as specified in 10.3.
Figure 10.5.2-4: Conditional SN change procedure - SN initiated
> Figure 10.5.2-4 shows an example signalling flow for the conditional SN
> Change initiated by the SN:
1\. The source SN initiates the conditional SN change procedure by sending the
_SN Change Required_ message, which contains a CPC initiation indication. The
message also contains candidate node ID(s) and may include the SCG
configuration (to support delta configuration), and contains the measurements
results which may include cells that are not CPC candidates. The message also
includes a list of proposed PSCell candidates recommended by the source SN,
including execution conditions, the upper limit for the number of PSCells that
can be prepared by each candidate SN, and may also include the SCG measurement
configurations for CPC (e.g. measurement ID(s) to be used for CPC).
2/3. The MN requests each candidate SN(s) to allocate resources for the UE by
means of the SN Addition procedure(s), indicating the request is for CPAC, and
the measurements results which may include cells that are not CPC candidates
received from the source SN to the candidate SN, and indicating a list of
proposed PSCell candidates received from the source SN, but not including
execution conditions. Within the list of PSCells suggested by the source SN,
the candidate SN decides the list of PSCell(s) to prepare (considering the
maximum number indicated by the MN) and, for each prepared PSCell, the
candidate SN decides SCG SCells and provides the new corresponding SCG radio
resource configuration to the MN in an NR _RRCReconfiguration** message_
contained in the _SgNB Addition Request Acknowledge_ message. If data
forwarding is needed, the candidate SN provides data forwarding addresses to
the MN. The candidate SN includes the indication of full or delta RRC
configuration, and the list of prepared PSCell IDs to the MN. The candidate SN
can either accept or reject each of the candidate cells suggested by the
source SN, i.e., it cannot configure any alternative candidates.
3a. For SN terminated bearers using MCG resources, the MN provides Xn-U DL TNL
address information in the _Xn-U Address Indication_ message to the candidate
SN(s).
4/5. The MN may indicate the candidate PSCells accepted by each candidate SN
to the source SN via _SN Modification Request_ message before it configures
the UE, e.g., when not all candidate PSCells were accepted by the candidate
SN(s). If the MN does not send such indication, step 4 and 5 are skipped. If
requested, the source SN sends an _SN Modification Request Acknowledge message
and if needed,_ provides an updated measurement configurations and/or the
execution conditions to the MN.
6\. The MN sends to the UE an _RRCReconfiguration_ message including the CPC
configuration, i.e. a list of _RRCReconfiguration*_ messages and associated
execution conditions, in which each _RRCReconfiguration*_ message contains the
SCG configuration in the _RRCReconfiguration** message_ received from the
candidate SN in step 3 and possibly an MCG configuration. Besides, the
_RRCReconfiguration_ message can also include an updated MCG configuration, as
well as the NR _RRCReconfiguration**_ * message generated by the source SN,
e.g., to configure the required conditional measurements.
7\. The UE applies the _RRCReconfiguration message_ received in step 6, stores
the CPC configuration and replies to the MN with an
_RRCReconfigurationComplete_ message, which can include an NR
_RRCReconfigurationComplete*** message_. In case the UE is unable to comply
with (part of) the configuration included in the _RRCReconfiguration_ message,
it performs the reconfiguration failure procedure.
8\. If an SN RRC response message is included, the MN informs the source SN
with the SN _RRCReconfigurationComplete*** message_ via _SN Change Confirm_
message. If step 4 and 5 are skipped, the MN will indicate the candidate
PSCells accepted by each candidate SN to the source SN in the _SN Change
Confirm_ message.
The MN sends the _SN Change Confirm_ message towards the source SN to indicate
that CPC is prepared, and in such case the source SN continues providing user
data to the UE. If early data forwarding is applied, the MN informs the source
SN the data forwarding addresses as received from the candidate SN(s), the
source SN, if applicable, together with the Early Status Transfer procedure,
starts early data forwarding. The PDCP SDU forwarding may take place during
early data forwarding. In case multiple candidate SNs are prepared, the MN
includes a list of Target SN ID and list of data forwarding addresses to the
source SN.
NOTE 5a: The Xn-U Address Indication procedure may further be invoked to
indicate to the source SN to stop already initiated early data forwarding for
some PDCP SDUs if they are no longer subject to data forwarding due to the
modification or cancellation of the prepared conditional PSCell change.
NOTE 5b: For the early transmission of MN terminated split/SCG bearers, the MN
forwads the PDCP PDU to the candidate SN(s).
9a-9d. The source SN may send the _SN Modification Required_ message to
trigger an update of CPC execution condition and/or corresponding SCG
measurement configuration for CPC. In such case in step 9b, the MN
reconfigures the UE and in step 9c the UE responds with
_RRCReconfigurationComplete_ , similarly as in steps 6 and 7.
10\. The UE starts evaluating the execution conditions. If the execution
condition of one candidate PSCell is satisfied, the UE applies
_RRCReconfiguration*_ message corresponding to the selected candidate PSCell,
and sends an _RRCReconfigurationComplete*_ message, including an
_RRCReconfigurationComplete** message_ for the selected candidate PSCell, and
information enabling the MN to identify the SN of the selected candidate
PSCell.
11a-11c. The MN triggers the MN initiated SN Release procedure to inform the
source SN to stop providing user data to the UE, and triggers the Xn-U Address
Indication procedure to inform the source SN the address of the SN of the
selected candidate PSCell and if applicable, starts late data forwarding.
12a-12c. If the RRC connection reconfiguration procedure was successful, the
MN informs the SN of the selected candidate PSCell via _SN Reconfiguration
Complete_ message, including the SN _RRCReconfigurationComplete**_ message.
The MN sends the _SN Release Request_ message(s) to cancel CPC in the other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
13\. The UE synchronizes to the PSCell indicated in the _RRCReconfiguration*_
message applied in step 10.
14\. If PDCP termination point is changed for bearers using RLC AM, the source
SN sends the _SN Status Transfer_ message, which the MN sends then to the SN
of the selected candidate PSCell, if needed.
15\. If applicable, data forwarding from the source SN takes place. It may be
initiated as early as the source SN receives the data forwarding address
related information from the MN.
16\. The source SN sends the _Secondary RAT Data Usage Report_ message to the
MN and includes the data volumes delivered to and received from the UE as
described in clause 10.11.2.
NOTE 6: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN/target SN is not defined. The SN may send
the report when the transmission of the related QoS flow is stopped.
17-21. If applicable, a PDU Session path update procedure is triggered by the
MN.
22\. Upon reception of the _UE Context Release_ message, the source SN
releases radio and C-plane related resources associated to the UE context. Any
ongoing data forwarding may continue.
## 10.6 PSCell change
In MR-DC, a PSCell change does not always require a security key change.
If a security key change is required, this is performed through a synchronous
SCG reconfiguration procedure towards the UE involving random access on PSCell
and a security key change, during which the MAC entity configured for SCG is
reset and RLC configured for SCG is re-established regardless of the bearer
type(s) established on SCG. For SN terminated bearers, PDCP is re-established.
In all MR-DC options, to perform this procedure within the same SN, the SN
Modification procedure as described in clause 10.3 is used, setting the _PDCP
Change Indication_ to indicate that a S-K~gNB~ (for EN-DC, NGEN-DC and NR-DC)
or S-K~eNB~ (for NE-DC) update is required when the procedure is initiated by
the SN or including the _SgNB Security Key_ / _SN Security Key_ when the
procedure is initiated by the MN. In all MR-DC options, to perform a PSCell
change between different SN nodes, the SN Change procedure as described in
clause 10.5 is used.
If a security key change is not required (only possible in EN-DC, NGEN-DC and
NR-DC), this is performed through a synchronous SCG reconfiguration procedure
without security key change towards the UE involving random access on PSCell,
during which the MAC entity configured for SCG is reset and RLC configured for
SCG is re-established regardless of the bearer type(s) established on SCG. For
DRBs using RLC AM mode PDCP data recovery applies, and for DRBs using RLC UM
no action is performed in PDCP. For SRB3 PDCP may discard all stored SDUs and
PDUs. Unless MN terminated SCG or split bearers are configured, this does not
require MN involvement. In this case, if location information was requested
for the UE, the SN informs the MN about the PSCell change (as part of location
information) using the SN initiated SN modification procedure independently
from the reconfiguration of the UE. In case of MN terminated SCG or split
bearers, the SN initiated SN Modification procedure as described in clause
10.3 is used, setting the _PDCP Change Indication_ to indicate that a PDCP
data recovery is required. If the MN subscribes to PSCell changes to retrieve
the SCG UE history information, the SN informs the MN about the SCG UE history
information using the SN initiated SN modification procedure when the SCG UE
history information changes.
A Conditional PSCell Change (CPC) is defined as a PSCell change that is
executed by the UE when execution condition(s) is met. The UE starts
evaluating the execution condition(s) upon receiving the CPC configuration,
and stops evaluating the execution condition(s) once PSCell change or PCell
change is triggered. Intra-SN CPC without MN involvement, inter-SN CPC
initiated either by MN or SN are supported.
The following principles apply to CPC:
\- The CPC configuration contains the configuration of CPC candidate PSCell(s)
and execution condition(s) and may contain the MCG configuration for inter-SN
CPC, to be applied when CPC execution is triggered.
\- An execution condition may consist of one or two trigger condition(s) (see
_CondEvent_ , as defined in TS 38.331 [4] or TS 36.331 [10]). Only single RS
type and at most two different trigger quantities (e.g. RSRP and RSRQ, RSRP
and SINR, etc.) can be used for the evaluation of CPC execution condition of a
single candidate PSCell.
\- Before any CPC execution condition is satisfied, upon reception of PSCell
change command or PCell change command, the UE executes the PSCell change
procedure as described in clause 10.3 and 10.5 or the PCell change procedure
as described in clause 9.2.3.2 in TS 38.300[3] or clause 10.1.2.1 in TS 36.300
[2], regardless of any previously received CPC configuration. Upon the
successful completion of PSCell change procedure or PCell change procedure,
the UE releases all stored CPC configurations.
\- While executing CPC, the UE is not required to continue evaluating the
execution condition of other candidate PSCell(s) or PCell(s).
\- Once the CPC procedure is executed successfully, the UE releases all stored
conditional reconfigurations (i.e. for CPC and for CHO, as specified in TS
38.300 [3] or TS 36.300 [2]).
\- Upon the release of SCG, the UE releases the stored CPC configurations.
\- MN can inform SN of the maximum number of conditional reconfigurations the
SN is allowed to configure for SN initiated CPC including both intra-SN and
inter-SN CPC.
CPC configuration in HO command, in PSCell addition/change command or within
any conditional reconfiguration (i.e CPA, CPC or CHO configuration) is not
supported.
## 10.7 Inter-Master Node handover with/without Secondary Node change
### 10.7.1 EN-DC
Inter-Master Node handover with/without MN initiated Secondary Node change is
used to transfer context data from a source MN to a target MN while the
context at the SN is kept or moved to another SN. During an Inter-Master Node
handover, the target MN decides whether to keep or change the SN (or release
the SN, as described in clause 10.8).
NOTE 1: Void.
Figure 10.7.1-1: Inter-MN handover with/without MN initiated SN change
Figure 10.7.1-1 shows an example signaling flow for inter-Master Node handover
with or without MN initiated Secondary Node change:
NOTE 2: For an inter-Master Node handover without Secondary Node change, the
source SN and the target SN shown in Figure 10.7.1-1 are the same node.
1\. The source MN starts the handover procedure by initiating the X2 Handover
Preparation procedure including both MCG and SCG configuration. The source MN
includes the (source) SN UE X2AP ID, SN ID and the UE context in the (source)
SN in the _Handover Request_ message.
NOTE 3: The source MN may trigger the MN-initiated SN Modification procedure
(to the source SN) to retrieve the current SCG configuration before step 1.
2\. If the target MN decides to keep the UE context in SN, the target MN sends
_SgNB Addition Request_ to the SN including the SN UE X2AP ID as a reference
to the UE context in the SN that was established by the source MN. If the
target MN decides to change the SN allowing delta configuration, the target MN
sends the _SgNB Addition Request_ to the target SN including the UE context in
the source SN that was established by the source MN. Otherwise, the target MN
may send the _SgNB Addition Request_ to the target SN including neither the SN
UE X2AP ID nor the UE context in the source SN that was established by the
source MN.
3\. The (target) SN replies with _SgNB Addition Request Acknowledge_. The
(target) SN may include the indication of the full or delta RRC configuration.
NOTE 3a: In case the target SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE.
NOTE 3b: Void.
4\. The target MN includes within the _Handover Request Acknowledge_ message a
transparent container to be sent to the UE as an RRC message to perform the
handover, and may also provide forwarding addresses to the source MN. The
target MN indicates to the source MN that the UE context in the SN is kept if
the target MN and the SN decided to keep the UE context in the SN in step 2
and step 3.
5\. The source MN sends _SgNB Release Request_ to the (source) SN including a
Cause indicating MCG mobility. The (source) SN acknowledges the release
request. The source MN indicates to the (source) SN that the UE context in SN
is kept, if it receives the indication from the target MN. If the indication
as the UE context kept in SN is included, the SN keeps the UE context.
6\. The source MN triggers the UE to apply the new configuration.
7/8. The UE synchronizes to the target MN and replies with
_RRCConnectionReconfigurationComplete_ message.
9\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the (target) SN.
NOTE 3b1: The order the UE performs Random Access towards the MN (step 7) and
performs the Random Access procedure towards the SN (step 9) is not defined.
10\. If the RRC connection reconfiguration procedure was successful, the
target MN informs the (target) SN via _SgNB Reconfiguration Complete_ message.
11a. The SN sends the _Secondary RAT_ _Data Usage Report_ message to the
source MN and includes the data volumes delivered to and received from the UE
over the NR radio for the related E-RABs.
NOTE 4: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The
SgNB may send the report when the transmission of the related bearer is
stopped.
11b. The source MN sends the _Secondary RAT Report_ message to MME to provide
information on the used NR resource.
12\. For bearers using RLC AM, the source MN sends the _SN Status Transfer_
message, including, if needed, SN Status received from the source SN to the
target MN. The target forwards the SN Status to the target SN, if needed.
13\. If applicable, data forwarding takes place from the source side. If the
SN is kept, data forwarding may be omitted for SN-terminated bearers kept in
the SN.
14-17. The target MN initiates the S1 Path Switch procedure.
NOTE 5: If new UL TEIDs of the S-GW are included, the target MN performs the
MN initiated SN Modification procedure to provide them to the SN.
18\. The target MN initiates the UE Context Release procedure towards the
source MN.
19\. Upon reception of the _UE Context Release_ message, the (source) SN
releases C-plane related resources associated to the UE context towards the
source MN. Any ongoing data forwarding may continue. The SN shall not release
the UE context associated with the target MN if the UE context kept indication
was included in the _SgNB_ _Release Request_ message in step 5.
### 10.7.2 MR-DC with 5GC
Inter-MN handover with/without MN initiated SN change is used to transfer UE
context data from a source MN to a target MN while the UE context at the SN is
kept or moved to another SN. During an Inter-Master Node handover, the target
MN decides whether to keep or change the SN (or release the SN, as described
in clause 10.8). Only intra-RAT Inter-Master node handover with/without SN
change is supported (e.g. no transition from NGEN-DC to NR-DC).
Figure 10.7.2-1: Inter-MN handover with/without MN initiated SN change
procedure
Figure 10.7.2-1 shows an example signalling flow for inter-MN handover with or
without MN initiated SN change:
NOTE 1: For an Inter-Master Node handover without Secondary Node change, the
source SN and the target SN shown in Figure 10.7.2-1 are the same node.
1\. The source MN starts the handover procedure by initiating the Xn Handover
Preparation procedure including both MCG and SCG configuration. The source MN
includes the source SN UE XnAP ID, SN ID and the UE context in the source SN
in the _Handover Request_ message.
NOTE 2: The source MN may trigger the MN-initiated SN Modification procedure
(to the source SN) to retrieve the current SCG configuration and to allow
provision of data forwarding related information before step 1.
2\. If the target MN decides to keep the UE context in source SN, the target
MN sends _SN Addition Request_ to the SN including the SN UE XnAP ID as a
reference to the UE context in the SN that was established by the source MN.
If the target MN decides to change the SN allowing delta configuration, the
target MN sends the _SN Addition Request_ to the target SN including the UE
context in the source SN that was established by the source MN. Otherwise, the
target MN may send the _SN Addition Request_ to the target SN including
neither the SN UE XnAP ID nor the UE context in the source SN that was
established by the source MN.
3\. The (target) SN replies with _SN Addition Request Acknowledge_. The
(target) SN may include the indication of the full or delta RRC configuration.
NOTE 2a0: Void.
3a. For SN terminated bearers using MCG resources, the target MN provides Xn-U
DL TNL address information in the _Xn-U Address Indication_ message.
4\. The target MN includes within the _Handover Request Acknowledge_ message
the MN RRC reconfiguration message to be sent to the UE in order to perform
the handover, and may also provide forwarding addresses to the source MN. If
PDU session split is performed in the target side during handover procedure,
more than one data forwarding addresses corresponding to each node are
included in the _Handover Request Acknowledge_ message. The target MN
indicates to the source MN that the UE context in the SN is kept if the target
MN and the SN decided to keep the UE context in the SN in step 2 and step 3.
5a/5b. The source MN sends _SN Release Request_ message to the (source) SN
including a Cause indicating MCG mobility. The (source) SN acknowledges the
release request. The source MN indicates to the (source) SN that the UE
context in SN is kept, if it receives the indication from the target MN. If
the indication as the UE context kept in SN is included, the SN keeps the UE
context.
5c. The source MN sends XN-U Address Indication message to the (source) SN to
transfer data forwarding information. More than one data forwarding addresses
may be provided if the PDU session is split in the target side.
6\. The source MN triggers the UE to perform handover and apply the new
configuration.
7/8. The UE synchronizes to the target MN and replies with _MN RRC
reconfiguration complete_ message.
9\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the (target) SN.
NOTE 2a1: The order the UE performs Random Access towards the MN (step 7) and
performs the Random Access procedure towards the SN (step 9) is not defined.
10\. If the RRC connection reconfiguration procedure was successful, the
target MN informs the (target) SN via _SN Reconfiguration Complete_ message.
11a. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to
the source MN and includes the data volumes delivered to and received from the
UE over the NR/E-UTRA radio as described in clause 10.11.2.
NOTE 2a2: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The SN
may send the report when the transmission of the related QoS is stopped.
11b. The source MN sends the _Secondary RAT Report_ message to AMF to provide
information on the used NR/E-UTRA resource.
12\. For bearers using RLC AM, the source MN sends the _SN Status Transfer_
message to the target MN, including, if needed, SN Status received from the
source SN. The target forwards the SN Status to the target SN, if needed.
13\. If applicable, data forwarding takes place from the source side. If the
SN is kept, data forwarding may be omitted for SN terminated bearers or QoS
flows kept in the SN.
14-17. The target MN initiates the Path Switch procedure _._ If the target MN
includes multiple DL TEIDs for one PDU session in the _Path Switch Request_
message, multiple UL TEID of the UPF for the PDU session should be included in
the _Path Switch Ack_ message in case there is TEID update in UPF.
NOTE 3: If new UL TEIDs of the UPF for SN are included, the target MN performs
MN initiated SN Modification procedure to provide them to the SN.
18\. The target MN initiates the UE Context Release procedure towards the
source MN.
19\. Upon reception of the _UE Context Release_ message from source MN, the
(source) SN releases C-plane related resources associated to the UE context
towards the source MN. Any ongoing data forwarding may continue. The SN shall
not release the UE context associated with the target MN if the UE contest
kept indication was included in the _SN Release Request_ message in step 5.
## 10.8 Master Node to eNB/gNB Change
### 10.8.1 EN-DC
The Master Node to eNB Change procedure is used to transfer context data from
a source MN/SN to a target eNB.
Figure 10.8.1-1: Master Node to eNB Change procedure
Figure 10.8.1-1 shows an example signalling flow for the Master Node to eNB
Change procedure:
1\. The source MN starts the MN to eNB Change procedure by initiating the X2
Handover Preparation procedure, including both MCG and SCG configuration.
NOTE 1: The source MN may trigger the MN-initiated SN Modification procedure
(to the source SN) to retrieve the current SCG configuration before step 1.
2\. The target eNB includes the field in HO command which releases SCG
configuration, and may also provide forwarding addresses to the source MN.
3\. If the allocation of target eNB resources was successful, the MN initiates
the release of the source SN resources towards the source SN including a Cause
indicating MCG mobility. The SN acknowledges the release request. If data
forwarding is needed, the MN provides data forwarding addresses to the source
SN. Reception of the _SgNB Release Request_ message triggers the source SN to
stop providing user data to the UE and, if applicable, to start data
forwarding.
NOTE 1a: In case the handover is a conditional handover, step 3a and step 3b
are performed after the source MN receives an indication that the UE has
successfully accessed one of the potential target eNB(s) as described in step
11a in Figure 10.1.2.1a-1in TS 36.300 [2], i.e,. after step 6 in Figure
10.8.1-1.
NOTE 1b: In case the handover is a conditional handover, the Data Forwarding
Address Indication procedure is executed right after step 2. This Data
Forwarding Address Indication procedure notifies conditional handover to the
source SN, for which it may decide to perform, if applicable, early data
forwarding for SN-terminated bearers, together with the sending of an _EARLY
STATUS TRANSFER_ message to the source MN. Separate Data Forwarding Address
Indication procedures may be invoked to provide different forwarding addresses
of the prepared conditional handovers. In this case, it is up to the source MN
and SN implementations to make sure that the EARLY STATUS TRANSFER message(s)
from the source SN, if any, is forwarded to the right target destination. The
Data Forwarding Address Indication procedure may further be invoked to
indicate to the source SN to stop already initiated early data forwarding for
some SN-terminated bearers if they are no longer subject to data forwarding
due to the modification or cancellation of the prepared conditional handovers.
If applicable, the normal data forwarding and _SN STATUS TRANSFER_ message
would follow from the source SN once it receives the _SgNB Release Request_
message of the step 3a that is performed after step 6.
4\. The MN triggers the UE to apply the new configuration. Upon receiving the
new configuration, the UE releases the entire SCG configuration.
5/6. The UE synchronizes to the target eNB.
7\. For SN terminated bearers using RLC AM, the SN sends the _SN Status
Transfer_ message, which the source MN sends then to the target eNB.
8\. If applicable, data forwarding takes place from the source side.
9a. The source SN sends the _Secondary RAT_ _Data Usagee Report_ message to
the source MN and includes the data volumes delivered to and received from the
UE over the NR radio for the related E-RABs.
NOTE 2: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related bearer is stopped.
9b. The source MN sends the _Secondary RAT Report_ message to MME to provide
information on the used NR resource.
10-14. The target eNB initiates the S1 Path Switch procedure.
15\. The target eNB initiates the UE Context Release procedure towards the
source MN.
16\. Upon reception of the _UE Context Release_ message, the SN releases radio
and C-plane related resources associated to the UE context. Any ongoing data
forwarding may continue.
NOTE 3: Inter-system HO from E-UTRA with EN-DC configuration to NR or to
E-UTRA connected to 5GC is also supported.
### 10.8.2 MR-DC with 5GC
The MN to ng-eNB/gNB Change procedure is used to transfer UE context data from
a source MN/SN to a target ng-eNB/gNB. Both the cases where the source MN and
the target node belong to the same RAT (i.e. they are both ng-eNBs or both
gNBs) and the cases where the source MN and the target node belong to
different RATs are supported.
NOTE 0: Inter-system HO from ng-eNB/gNB MN to eNB is also supported.
Figure 10.8.2-1: MN to ng-eNB/gNB Change procedure
Figure 10.8.2-1 shows an example signalling flow for the MN to ng-eNB/gNB
Change procedure:
1\. The source MN starts the MN to ng-eNB/gNB Change procedure by initiating
the Xn Handover Preparation procedure, including both MCG and SCG
configuration.
NOTE 1: The source MN may trigger the MN-initiated SN Modification procedure
(to the source SN) to retrieve the current SCG configuration and to allow
provision of data forwarding related information before step 1.
2\. The target ng-eNB/gNB includes the field in HO command which releases the
SCG configuration, and may also provide forwarding addresses to the source MN.
3\. If the resource allocation of target ng-eNB/gNB was successful, the MN
initiates the release of the source SN resources towards the source SN
including a Cause indicating MCG mobility. The SN acknowledges the release
request. If data forwarding is needed, the MN provides data forwarding
addresses to the source SN. Reception of the _SN Release Request_ message
triggers the source SN to stop providing user data to the UE and, if
applicable, to start data forwarding.
NOTE 1a: In case the handover is a conditional handover, step 3a and step 3b
are performed after the source MN receives an indication that the UE has
successfully accessed one of the potential target gNB(s) as described in step
8a in Figure 9.2.3.4.2-1 in TS 38.300 [3], i.e., after step 6 in Figure
10.8.2-1.
NOTE 1b: In case the handover is a conditional handover, the step 3c is
executed right after step 2. The _Xn-U Address Indication_ message notifies
conditional handover to the source SN, for which it may decide to perform, if
applicable, early data forwarding for SN-terminated bearers, together with the
sending of an _EARLY STATUS TRANSFER_ message to the source MN. Separate Xn-U
Address Indication procedures may be invoked to provide different forwarding
addresses of the prepared conditional handovers. In this case, it is up to the
source MN and SN implementations to make sure that the EARLY STATUS TRANSFER
message(s) from the source SN, if any, is forwarded to the right target
destination. The Xn-U Address Indication procedure may further be invoked to
indicate to the source SN to stop already initiated early data forwarding for
some SN-terminated bearers if they are no longer subject to data forwarding
due to the modification or cancellation of the prepared conditional handovers.
If applicable, the normal data forwarding and _SN STATUS TRANSFER_ message
would follow from the source SN once it receives the _SN Release Request_
message of the step 3a that is performed after step 6. In case the step 3c
Xn-U Address Indication procedure corresponding to the conditional handover
that the UE successfully accessed was rejected by the source SN, the source MN
re-sends it after the step 3b that is performed after step 6.
4\. The MN triggers the UE to perform HO and apply the new configuration. Upon
receiving the new configuration, the UE releases the entire SCG configuration.
5/6. The UE synchronizes to the target ng-eNB/gNB.
7\. If PDCP termination point is changed for bearers using RLC AM, the SN
sends the _SN Status Transfer_ message, which the source MN sends then to the
target ng-eNB/gNB.
8\. If applicable, data forwarding takes place from the source side.
9a. The source SN sends the _Secondary RAT_ _Data Usage Report_ message to the
source MN and includes the data volumes delivered to and received from the UE
as described in clause 10.11.2.
NOTE 2: The order the SN sends the _Secondary RAT Data Usage Report_ message
and performs data forwarding with MN is not defined. The SN may send the
report when the transmission of the related QoS flow is stopped.
9b. The source MN sends the _Secondary RAT Report_ message to AMF to provide
information on the used NR/E-UTRA resource.
10-14. The target ng-eNB/gNB initiates the Path Switch procedure _._
15\. The target ng-eNB/gNB initiates the UE Context Release procedure towards
the source MN.
16\. Upon reception of the _UE Context Release_ message from the MN, the
source SN releases radio and C-plane related resources associated to the UE
context. Any ongoing data forwarding may continue.
## 10.9 eNB/gNB to Master Node change
### 10.9.1 EN-DC
The eNB to Master Node change procedure is used to transfer context data from
a source eNB to a target MN that adds an SN during the handover.
Figure 10.9.1-1: eNB to Master Node change
Figure 10.9.1-1 shows an example signaling flow for eNB to Master Node change:
1\. The source eNB starts the handover procedure by initiating the X2 Handover
Preparation procedure.
2\. The target MN sends _SgNB Addition Request_ to the target SN.
3\. The target SN replies with _SgNB Addition Request Acknowledge_. If data
forwarding is needed, the target SN provides forwarding addresses to the
target MN.
NOTE 0: Void.
4\. The target MN includes within the _Handover Request Acknowledge_ message a
transparent container to be sent to the UE as an E-UTRA RRC message, including
a NR RRC configuration message which also includes the SCG configuration, to
perform the handover, and may also provide forwarding addresses to the source
eNB.
5\. The source eNB triggers the UE to apply the new configuration.
6/7. The UE synchronizes to the target MN and replies with
_RRCConnectionReconfigurationComplete_ message.
8\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the target SN.
NOTE 0: The order the UE performs Random Access towards the target MN (step 6)
and performs the Random Access procedure towards the target SN (step 8) is not
defined.
9\. If the RRC connection reconfiguration procedure was successful, the target
MN informs the target SN.
10\. For bearers using RLC AM, the source eNB sends the _SN Status Transfer_
message, which the target MN forwards then to the target SN, if needed.
11\. Data forwarding from the source eNB takes place.
12-15. The target MN initiates the S1 Path Switch procedure.
NOTE 1: If new UL TEIDs of the S-GW are included, the target MN performs MN
initiated SN Modification procedure to provide them to the target SN.
16\. The target MN initiates the _UE Context Release_ procedure towards the
source eNB.
NOTE 2: Void.
NOTE 3: Void.
### 10.9.2 MR-DC with 5GC
The ng-eNB/gNB to MN change procedure is used to transfer UE context data from
a source ng-eNB/gNB to a target MN that adds an SN during the handover. Only
the cases where the source node and the target MN belong to the same RAT (i.e.
they are both ng-eNBs or both gNBs) are supported.
Figure 10.9.2-1: ng-eNB/gNB to MN change procedure
Figure 10.9.2-1 shows an example signalling flow for ng-eNB/gNB to MN change:
1\. The source ng-eNB/gNB starts the handover procedure by initiating the Xn
Handover Preparation procedure.
2\. The target MN sends _SN Addition Request_ to the target SN.
3\. The target SN replies with _SN Addition Request Acknowledge_. If data
forwarding is needed, the target SN provides forwarding addresses to the
target MN.
NOTE 0: Void.
3a. For SN terminated bearers using MCG resources, the target MN provides Xn-U
DL TNL address information in the _Xn-U Address Indication_ message.
4\. The target MN includes within the _Handover Request Acknowledge_ message
the SN RRC reconfiguration message to be sent to the UE that includes the SCG
configuration to perform the handover, and may also provide forwarding
addresses to the source ng-eNB/gNB.
5\. The source ng-eNB/gNB triggers the UE to perform handover and apply the
new configuration.
6/7. The UE synchronizes to the target MN and replies with _MN RRC
reconfiguration_ complete message including the SN RRC reconfiguration
complete message.
8\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the target SN.
NOTE 1: The order the UE performs Random Access towards the target MN (step 6)
and performs the Random Access procedure towards the target SN (step 8) is not
defined.
9\. If the RRC connection reconfiguration procedure was successful, the target
MN informs the target SN via _SN Reconfiguration Complete_ message.
10\. For bearers using RLC AM, the source ng-eNB/gNB sends the _SN Status
Transfer_ message, which the target MN forwards then to the target SN, if
needed.
11\. Data forwarding from the source ng-eNB/gNB takes place.
12-15. The target MN initiates the PDU Session Path Switch procedure.
NOTE 2: If new UL TEIDs of the UPF are included, the target MN performs MN
initiated SN Modification procedure to provide them to the target SN.
16\. The target MN initiates the _UE Context Release_ procedure towards the
source ng-eNb/gNB.
## 10.10 RRC Transfer
### 10.10.1 EN-DC
The RRC Transfer procedure is used to deliver an RRC message, encapsulated in
a PDCP PDU between the MN and the SN (and vice versa) so that it may be
forwarded to/from the UE using split SRB. The RRC transfer procedure is also
used for:
\- providing an NR measurement report, NR failure information, NR UE
assistance information or intra-SN CPC execution completion from the UE to the
SN via the MN. If UE is IAB-MT, providing NR IAB other information from the
IAB-MT to the SN via the MN;
\- providing MCG failure information from the UE to the MN via the SN and an
RRC reconfiguration, or release, or an inter-RAT handover command from the MN
to the UE via the SN.
Additional details of the RRC transfer procedure are defined in TS 36.423 [9].
**Split SRB:**
Figure 10.10.1-1: RRC Transfer procedure for the split SRB (DL operation)
Figure 10.10.1-1 shows an example signaling flow for the DL RRC Transfer in
case of the split SRB:
1\. The MN, when it decides to use the split SRBs, starts the procedure by
initiating the RRC Transfer procedure. The MN encapsulates the RRC message in
a PDCP-C PDU and ciphers with own keys.
NOTE: The usage of the split SRBs shall be indicated in the Secondary Node
Addition procedure or Modification procedure.
2\. The SN forwards the RRC message to the UE.
3\. The SN may send PDCP delivery acknowledgement of the RRC message forwarded
in step 2.
Figure 10.10.1-2: RRC Transfer procedure for the split SRB (UL operation)
Figure 10.10.1-2 shows an example signaling flow for the UL RRC Transfer in
case of the split SRB:
1\. When the UE provides response to the RRC message, it sends it to the SN.
2\. The SN initiates the RRC Transfer procedure, in which it transfers the
received PDCP-C PDU with encapsulated RRC message.
**NR measurement report, NR failure information, NR UE assistance information,
NR IAB other information or intra-SN CPC execution completion:**
Figure 10.10.1-3: RRC Transfer procedure for NR measurement report, NR failure
information**, NR UE assistance information, NR IAB other information** or
intra-SN CPC execution completion
Figure 10.10.1-3 shows an example signaling flow for RRC Transfer in case of
the forwarding of the NR measurement report, NR failure information, NR IAB
other information from the UE, NR UE assistance information or intra-SN CPC
execution completion:
1\. When the UE sends a measurement report, NR failure information, NR UE
assistance information, NR IAB other information or intra-SN CPC execution
completion, it sends it to the MN in a container within
_ULInformationTransferMRDC_ message as specified in TS 36.331 [10].
2\. The MN initiates the RRC Transfer procedure, in which it transfers the
received NR measurement report, NR failure information, NR UE assistance
information, NR IAB other information or intra-SN CPC execution completion as
an octet string.
**MCG failure information and RRC Reconfiguration / RRC Release / inter-RAT
handover command over SRB3:**
Figure 10.10.1-4: RRC Transfer procedure for MCG failure information
Figure 10.10.1-4 shows an example signaling flow for RRC Transfer in case of
the forwarding of the MCG failure information from the UE:
1\. When the UE sends EUTRA _MCGFailureInformation_ message over SRB3, it
sends it to the SN in a container within _ULInformationTransferMRDC_ message
as specified in TS 38.331 [4].
2\. The SN initiates the RRC Transfer procedure, in which it transfers the
received EUTRA _MCGFailureInformation_ message as an octet string.
3\. The MN initiates the RRC Transfer procedure, in which it transfers the
EUTRA _RRCConnectionReconfiguration_ message _,_ or EUTRA
_RRCConnectionRelease_ message _, or MobilityFromEUTRACommand_ message as an
octet string.
4\. The SN sends the received EUTRA RRC message to the UE over SRB3 in a
container within _DLInformationTransferMRDC_ , message as specified in TS
38.331 [4].
### 10.10.2 MR-DC with 5GC
The RRC Transfer procedure is used to deliver an RRC message, encapsulated in
a PDCP PDU between the MN and the SN (and vice versa) so that it may be
forwarded to/from the UE using split SRB. The RRC transfer procedure is also
used for:
\- providing a SN measurement report, failure information report, SN UE
assistance information or intra-SN CPC execution completion from the UE to the
SN. If UE is IAB-MT, providing NR IAB other information from the IAB-MT to the
SN when the IAB-donor is the SN;
\- providing MCG failure information from the UE to the MN via the SN and an
RRC reconfiguration, or release, or an inter-RAT handover command from the MN
to the UE via the SN;
\- providing F1-C traffic from an IAB-node to the MN via the SN, or F1-C
traffic from the MN to an IAB-node via the SN.
Additional details of the RRC transfer procedure are defined in TS 38.423 [5].
**Split SRB:**
Figure 10.10.2-1: RRC Transfer procedure for split SRB (DL operation)
Figure 10.10.2-1 shows an example signaling flow for DL RRC Transfer in case
of the split SRB:
1\. The MN, when it decides to use the split SRBs, starts the procedure by
initiating the RRC Transfer procedure. The MN encapsulates the RRC message in
a PDCP PDU and ciphers with own keys.
NOTE: The usage of the split SRBs shall be indicated in the Secondary Node
Addition procedure or Modification procedure.
2\. The SN forwards the RRC message to the UE.
3\. The SN may send PDCP delivery acknowledgement of the RRC message forwarded
in step 2.
Figure 10.10.2-2: RRC Transfer procedure for split SRB (UL operation)
Figure 10.10.2-2 shows an example signaling flow for UL RRC Transfer in case
of the split SRB:
1\. When the UE provides response to the RRC message, it sends it to the SN.
2\. The SN initiates the RRC Transfer procedure, in which it transfers the
received PDCP PDU with encapsulated RRC message.
**SN measurement report, failure information report, SN UE assistance
information, intra-SN CPC execution completion or IAB other information:**
Figure 10.10.2-3: RRC Transfer procedure for SN measurement report, failure
information report**, SN UE assistance informatio** n**,** intra-SN CPC
execution completion or IAB other information
Figure 10.10.2-3 shows an example signaling flow for RRC Transfer in case of
the forwarding of the SN measurement report, failure information report, SN UE
assistance information, intra-SN CPC execution completion **or IAB other
information** from the UE:
1\. When the UE sends an SN measurement report, failure information report, SN
UE assistance information, intra-SN CPC execution completion or IAB other
information it sends it to the MN in a container called
_ULInformationTransferMRDC_ message as specified in TS 38.331 [4].
2\. The MN initiates the RRC Transfer procedure, in which it transfers the
received SN measurement report, failure information, SN UE assistance
information, intra-SN CPC execution completion or IAB other information as an
octet string.
**MCG failure information and RRC Reconfiguration / RRC Release / inter-RAT
handover command over SRB3:**
Figure 10.10.2-4: RRC Transfer procedure for MCG failure information
Figure 10.10.2-4 shows an example signaling flow for RRC Transfer in case of
the forwarding of the MCG failure information from the UE:
1\. When the UE sends _MCGFailureInformation_ message over SRB3, it sends it
to the SN in a container called _ULInformationTransferMRDC_ message as
specified in TS 38.331 [4].
2\. The SN initiates the RRC Transfer procedure, in which it transfers the
received _MCGFailureInformation_ message as an octet string.
3\. The MN initiates the RRC Transfer procedure, in which it transfers the
_RRCConnectionReconfiguration_ message _,_ or _RRCReconfiguration_ message _,_
or _RRCConnectionRelease_ message _,_ or _RRCRelease_ message _, or
MobilityFromNRCommand_ message _, or MobilityFromEUTRACommand_ message as an
octet string.
4\. The SN sends the received RRC message to the UE in a container called
_DLInformationTransferMRDC_ message, as specified in TS 38.331 [4].
**F1-C traffic transfer:**
Figure 10.10.2-5: Scenario 2: F1-C Traffic Transfer procedure between IAB-MT
and MN (F1-terminating node) in NR-DC
1\. The IAB-MT sends a F1-AP message encapsulated in SCTP/IP or F1-C related
(SCTP/)IP packet to the SN (non-F1-terminating IAB-donor) via split SRB2 in a
container within _ULInformationTransfer_ message encapsulated in a PDCP PDU as
specified in TS 38.331 [4].
2\. The SN initiates the RRC Transfer procedure, in which it transfers the
received PDCP PDU (_ULInformationTransfer_ message) including F1-AP message.
3\. When the MN (F1-terminating IAB-donor) sends a F1-AP message encapsulated
in SCTP/IP or F1-C related (SCTP/)IP packet, it starts the procedure by
initiating the RRC Transfer procedure, if split SRB2 is determined to be used
and usage of SCG path is determined. The MN sends the F1-AP message to the SN
in a container within _DLInformationTransfer_ message encapsulated in a PDCP
PDU specified in TS 38.331 [4].
4\. The SN forwards the encapsulated _DLInformationTransfer_ message in a PDCP
PDU as specified in TS 38.331 [4] to IAB-MT.
## 10.11 Secondary RAT data volume reporting
### 10.11.1 EN-DC
The secondary RAT data volume reporting function is used to report the data
volume of secondary RAT to CN. In EN-DC, if configured, the MN reports the
uplink and downlink data volumes of used NR resources to the EPC on a per EPS
bearer basis as specified in TS 36.300 [2]. Periodic reporting is performed by
periodically sending the _Secondary RAT Data Usage Report_ messages to the
MME.
The data volume is counted by the node hosting PDCP. Downlink data volume is
counted in bytes of PDCP SDUs successfully delivered to the UE over NR (for
RLC AM) or transmitted to the UE over NR (for RLC UM). Uplink data volume is
counted in bytes of PDCP SDUs received by the node hosting PDCP over NR.
Forwarded packets shall not be counted when PDCP entity is relocated. When
PDCP duplication is activated, packets shall be counted only once.
Figure 10.11.1-1: Secondary RAT data volume periodic reporting - EN-DC
Figure 10.11.1-1 shows an example signalling flow for secondary RAT data
volume periodic reporting:
1\. If the periodic reporting is configured, then the SN periodically sends
the _Secondary RAT_ _Data Usage Report_ message to the MN and includes the
data volumes of used NR radio resources for the related SN-terminated E-RABs.
2\. The MN sends the _Secondary RAT Data Usage Report_ message to MME to
provide information on the used NR resource.
NOTE: The _Secondary RAT Data Usage Report_ message sent by the MN may also
include secondary RAT report information of MN-terminated bearers.
### 10.11.2 MR-DC with 5GC
The secondary RAT data volume reporting function is used to report the data
volume of secondary RAT to the 5GC. In MR-DC with 5GC, if configured, the MN
reports the uplink and downlink data volumes of used secondary RAT resources
to the 5GC as specified in TS 23.501 [11]. Configuration for reporting of
secondary RAT data volume may happen separately for NR and E-UTRA. Secondary
RAT data volume reporting indicates the secondary RAT type. For each PDU
session, it contains data volumes consumed for the whole PDU Session, or for
selected QoS flow, or both. Periodic reporting is performed by periodically
sending the _Secondary RAT Data Usage Report_ messages to the 5GC.
The data volume is counted by the node hosting PDCP. Downlink data volume is
counted in bytes of SDAP SDUs successfully delivered to the UE (for RLC AM) or
transmitted to the UE (for RLC UM). Uplink data volume is counted in bytes of
SDAP SDUs received by the node hosting PDCP. Forwarded packets shall not be
counted when PDCP entity is relocated. When PDCP duplication is activated,
packets shall be counted only once.
Figure 10.11.2-1: Secondary RAT data volume periodic reporting - MR-DC with
5GC
Figure 10.11.2-1 shows an example signalling flow for secondary RAT data
volume periodic reporting:
1\. For SN terminated bearers, the SN sends the _Secondary RAT_ _Data Usage
Report_ message to the MN and includes the data volumes of used secondary RAT
resources for PDU Sessions or selected QoS flows or both mapped to SN-
terminated bearers. If periodic reporting is configured, then the SN
periodically sends the _Secondary RAT_ _Data Usage Report_ message to the MN
and includes the data volumes of used radio resources.
2\. The MN sends the _Secondary RAT Data Usage Report_ message to the 5GC to
provide information on the used radio resources.
NOTE: The _Secondary RAT Data Usage Report_ message sent by the MN may also
include secondary RAT data volumes of used secondary RAT resources for MN
terminated bearers.
## 10.12 Activity Notification
### 10.12.1 EN-DC
The Activity Notification function is used to report user plane activity
within SN resources. It can either report inactivity or resumption of activity
after inactivity was reported. In EN-DC the Activity Reporting is provided
from the SN only. The MN may take further actions.
**EN-DC Activity Notification**
Figure 10.12.1-1: Support of Activity Notification in EN-DC
Support of Activity Notification in EN-DC is used to keep the MN informed
about user traffic activity in resources owned by the SN. The MN may take
appropriate action upon receiving such notification.
1\. The SN informs the MN about user data inactivity of resources owned by the
SN.
2\. The MN decides to keep SN resources.
3\. After a while the SN reports resumption of user plane activity.
**EN-DC with suspended RRC connection -- SCG configuration released in SN**
The Activity Notification function may be used to enable EN-DC with suspended
RRC connected operation. The MN node may decide, after inactivity is reported
from the SN and also MN resources show no activity, to send the UE to
suspended RRC connection. Resumption to RRC_CONNECTED may take place after
activity is reported from the SN for SN terminated bearers.
Figure 10.12.1-2: Support of Activity Notification in EN-DC with suspended RRC
connection -- SCG configuration released in SN
Figure 10.12.1-2 shows how Activity Notification function interacts with
E-UTRAN functions for suspended RRC connection and SgNB Modification
procedures in order to keep the higher layer EN-DC E-UTRAN resources
established for UEs in suspended RRC connection, including S1 and X2 interface
C-plane, U-plane and bearer contexts established while lower layer MCG and SCG
resources are released. E-UTRAN memorises the cell group configuration for MCG
in order to apply delta signalling at resume, as specified in TS 36.331 [4].
After the UE has transited successfully back to RRC_CONNECTED, lower layer SCG
resources are established afterwards by means of RRC Connection
Reconfiguration.
1\. The SN notifies the MN about user data inactivity for SN terminated
bearers.
2\. The MN decides to send the UE to suspended RRC connection.
3/4. The MN triggers the MN initiated SgNB Modification procedure, requesting
the SN to release lower layers.
5\. The UE is sent to suspended RRC connection.
6-8. After a period of suspended RRC connection, upon activity notification
from the SN, the UE returns to RRC_CONNECTED.
8bis. MN decides whether to reactivate the SN terminated bearers. If (e.g. due
to UE mobility), MN decides not to reactivate the SN terminated bearers, it
initiates the MN initiated SN release procedure and the procedure ends.
9/10. The MN triggers the MN initiated SgNB Modification procedure to re-
establish lower layers. The SN provides configuration data within an SN RRC
configuration message.
11-14. The RRC Connection Reconfiguration procedure commences.
**EN-DC with suspended RRC connection - SCG configuration suspended in SN**
The Activity Notification function may be used to enable EN-DC with suspended
RRC connection operation. The MN node may decide, after inactivity is reported
from the SN and also MN resources show no activity, to send the UE to
suspended RRC connection, while keeping the SCG configuration. Resumption to
RRC_CONNECTED may take place after activity is reported from the SN for SN
terminated bearers.
Figure 10.12.1-3: Support of Activity Notification in EN-DC with suspended RRC
connection - SCG configuration suspended in SN
Figure 10.12.1-3 shows how Activity Notification function interacts with
functions for suspended RRC connection and SgNB Modification procedures in
order to keep the full EN-DC resources established for UEs in suspended RRC
connection. When the UE transits successfully back to RRC_CONNECTED, lower
layer MCG and SCG configurations are restored or reconfigured by means of RRC
Connection Resume.
1\. The SN notifies the MN about user data inactivity for SN terminated
bearers.
2\. The MN decides to send the UE to suspended RRC connection.
3/4. The MN triggers the MN initiated SN Modification procedure, requesting
the SN to suspend lower layers.
5\. The UE is sent to suspended RRC connection.
6-7. After a period of suspended RRC connection, the MN receives activity
notification from the SN.
8\. The MN decides whether to reactivate the SN terminated bearers. If (e.g.
due to UE mobility), the MN decides not to reactivate the SN terminated
bearers, it initiates the MN initiated SN release procedure, rather than the
MN initiated SN modification procedure in steps 9/10. If the MN decides to
return the UE to RRC_CONNECTED, the network triggered state transition from
suspended RRC connection to RRC_CONNECTED commences.
9/10. The MN triggers the MN initiated SN Modification procedure to resume the
SCG lower layers. If the SCG configuration needs to be updated, the SN
provides the configuration data within an SN RRC configuration message.
11/12. The UE is instructed to resume both the MCG and the SCG. If the SCG
configuration is to be updated, the new configuration is provided in the
_RRCConnectionResume_ message.
13\. The MN informs the SN that the UE has completed the reconfiguration
procedure successfully, via the _SgNB Reconfiguration Complete_ message,
including the SN RRC response message, if received from the UE.
14\. The UE performs synchronisation towards the PSCell of the SN.
### 10.12.2 MR-DC with 5GC
The Activity Notification function is used to report user plane activity
within SN resources or to report a RAN Paging Failure event to the SN. It can
either report inactivity or resumption of activity after inactivity was
reported. In MR-DC with 5GC the Activity Reporting is provided from the SN
only. The MN may take further actions. RAN Paging Failure Reporting is
provided from the MN only.
**MR-DC with 5GC Activity Notification**
Figure 10.12.2-1: Support of Activity Notification in MR-DC with 5GC
1\. The SN notifies the MN about user data inactivity.
2\. The MN decides further actions that impact SN resources (e.g. send UE to
RRC_INACTIVE, bearer reconfiguration). In the case shown, MN takes no action.
3\. The SN notifies the MN that the (UE or PDU Session or QoS flow) is no
longer inactive.
**MR-DC with 5GC with RRC_INACTIVE -- SCG configuration released in SN**
The Activity Notification function may be used to enable MR-DC with 5GC with
RRC_INACTIVE operation. The MN node may decide, after inactivity is reported
from the SN and also MN resources show no activity, to send the UE to
RRC_INACTIVE. Resumption to RRC_CONNECTED may take place after activity is
reported from the SN for SN terminated bearers.
Figure 10.12.2-2: Support of Activity Notification in MR-DC with 5GC with
RRC_Inactive -- SCG configuration released in SN
Figure 10.12.2-2 shows how Activity Notification function interacts with NG-
RAN functions for RRC_INACTIVE and SN Modification procedures in order to keep
the higher layer MR-DC NG-RAN resources established for UEs in RRC_INACTIVE,
including NG and Xn interface C-plane, U-plane and bearer contexts established
while lower layer MCG and SCG resources are released. NG-RAN memorises the
cell group configuration for MCG in order to apply delta signalling at resume,
as specified in TS 38.331 [4]. After the UE has transited successfully back to
RRC_CONNECTED, lower layer SCG resources are established afterwards by means
of RRC Connection Reconfiguration.
1\. The SN notifies the MN about user data inactivity for SN terminated
bearers.
2\. The MN decides to send the UE to RRC_INACTIVE.
3/4. The MN triggers the MN initiated SN Modification procedure, requesting
the SN to release lower layers.
5\. The UE is sent to RRC_INACTIVE.
6-8. After a period of inactivity, upon activity notification from the SN, the
UE returns to RRC_CONNECTED.
8bis. MN decides whether to reactivate the SN terminated bearers. If (e.g. due
to UE mobility), MN decides not to reactivate the SN terminated bearers, it
initiates the MN initiated SN release procedure and the procedure ends.
9/10. The MN triggers the MN initiated SN Modification procedure to re-
establish lower layers. The SN provides configuration data within an _SN RRC
reconfiguration_ message.
11-14. The RRC Connection Reconfiguration procedure commences.
**MR-DC with 5GC with RRC_INACTIVE - SCG configuration suspended in SN**
The Activity Notification function may be used to enable MR-DC with 5GC with
RRC_INACTIVE operation. The MN node may decide, after inactivity is reported
from the SN and also MN resources show no activity, to send the UE to
RRC_INACTIVE, while keeping the SCG configuration. Resumption to RRC_CONNECTED
may take place after activity is reported from the SN for SN terminated
bearers.
Figure 10.12.2-3: Support of Activity Notification in MR-DC with 5GC with
RRC_Inactive - SCG configuration suspended in SN
Figure 10.12.2-3 shows how Activity Notification function interacts with NG-
RAN functions for RRC_INACTIVE and SN Modification procedures in order to keep
the full MR-DC NG-RAN resources established for UEs in RRC_INACTIVE. When the
UE transits successfully back to RRC_CONNECTED, lower layer MCG and SCG
configurations are restored or reconfigured by means of RRC (Connection)
Resume.
1\. The SN notifies the MN about user data inactivity for SN terminated
bearers.
2\. The MN decides to send the UE to RRC_INACTIVE.
3/4. The MN triggers the MN initiated SN Modification procedure, requesting
the SN to suspend lower layers.
5\. The UE is sent to RRC_INACTIVE.
6-7. After a period of inactivity, the MN receives activity notification from
the SN.
8\. The MN decides whether to reactivate the SN terminated bearers. If (e.g.
due to UE mobility), the MN decides not to reactivate the SN terminated
bearers, it initiates the MN initiated SN release procedure, rather than the
MN initiated SN modification procedure in steps 9/10. If the MN decides to
return the UE to RRC_CONNECTED, the network triggered state transition from
RRC_INACTIVE to RRC_CONNECTED commences as described in clause 9.2.2.4.2 in TS
38.300 [3].
9/10. The MN triggers the MN initiated SN Modification procedure to resume the
SCG lower layers. If the SCG configuration needs to be updated, the SN
provides the configuration data within an _SN RRC reconfiguration_ message.
11/12. The UE is instructed to resume both the MCG and the SCG. If the SCG
configuration is to be updated, the new configuration is provided in the
_RRC(Connection)Resume_ message.
13\. The MN informs the SN that the UE has completed the reconfiguration
procedure successfully, via the _SN Reconfiguration Complete_ message,
including the SN RRC response message, if received from the UE.
14\. The UE performs synchronisation towards the PSCell of the SN.
## 10.13 Notification Control Indication
### 10.13.1 EN-DC
Notification Control Indication procedure is not supported in EN-DC.
### 10.13.2 MR-DC with 5GC
The Notification Control Indication procedure may be initiated either by the
MN or by the SN and is used to indicate that GFBR for one or several QoS flows
cannot be fulfilled any more or can be fulfilled again by the reporting node.
Figure 10.13.2-1: Notification Control Indication procedure
Figure 10.13.2-1 shows an example signalling flow for the Notification Control
Indication procedure.
1\. The MN may, for an SN terminated bearer, indicate, that the GFBR requested
from the MN cannot be fulfilled anymore.\ In case the SN terminated bearer is
configured as a split bearer, the SN may decide to increase the share provided
by the SN or it may decide to notify the MN that resources requested for the
SN terminated bearer cannot fulfill the GFBR any more.
2\. Continuing the example message flow from step 1, the SN informs the MN
that the GFBR for an SN terminated bearer cannot be fulfilled any more.
3\. The MN decides to inform the 5GC that NG-RAN cannot fulfill the GFBR for a
GBR QoS flow any more.
## 10.14 PDU Session Split at UPF
### 10.14.1 PDU Session Split at UPF during PDU session resource setup
When a new PDU session needs to be established, the 5GC may provide two UL
TEID addresses during PDU Session Resource Setup in order to allow for PDU
session split. The MN may perform the SN Addition or the MN-initiated SN
Modification procedure. If the MN decides to split the PDU session, the MN
provides two DL TEID addresses and also the QoS flows associated with each
tunnel.
Figure 10.14.1-1: PDU Session Split at UPF during PDU session resource setup
1\. The 5GC provides two UL TEID addresses during PDU Session Resource Setup,
to be applied as the first UL tunnel on the NG-U interface and the additional
NG-U tunnel in case the MN decides to split the PDU session.
2\. The MN decides to setup two tunnels. The MN uses the SN Addition procedure
(as described in 10.2.2) or the MN-initiated SN Modification procedure (as
described in 10.3.2) up to step 6.
3\. The MN provides a DL TEID address to be applied as the first and an
additional DL tunnel address on the NG-U interface. The MN also provides which
QoS flows are associated with which tunnel.
### 10.14.2 PDU Session Split at UPF during PDU session resource modify (5GC
initiated)
The 5GC may provide an additional UL TEID address during PDU Session Resource
Modify in order to allow the MN to split the PDU session. The MN may perform
the SN Addition or the MN-initiated SN Modification procedure. If the MN
decides to split the PDU session, the MN provides a DL TEID address to be
applied as the additional DL tunnel address and the QoS flows associated with
that tunnel.
Figure 10.14.2-1: PDU Session Split at UPF during PDU session resource modify
1\. The 5GC provides an additional UL TEID address during PDU Session Resource
Modify, to be applied as the additional NG-U tunnel in case the MN decides to
split the PDU session.
2\. The MN decides to setup two tunnels. If the new tunnel is to be setup at
the SN, the MN uses the SN Addition procedure (as described in 10.2.2) or the
MN-initiated SN Modification procedure (as described in 10.3.2) up to step 6,
or up to step 8 if a QoS flow is moved to the SN and data forwarding applies.
3\. The MN provides a DL TEID address to be applied as the additional DL
tunnel address on the NG-U interface and the QoS flows associated with that
tunnel.
### 10.14.3 PDU Session Split at UPF (RAN initiated QoS flows offloading from
MN to SN)
When some QoS flows are offloaded from the MN to the SN, the MN may decide to
split the PDU session served by the MN into more than one NG-U tunnels. The MN
sends the _SN Addition/Modification Request_ message including UPF UL TEID
address used at the MN. Later on, if the MN receives a new UL TEID in the _PDU
Session Resource Modify Confirm_ message, the MN may provide the new UL TEID
to the SN.
Figure 10.14.3-1: PDU Session Split at UPF during RAN initiated PDU session
resource modify (QoS flows offloading from MN to SN)
1-2. If the MN decides to split a PDU session, it uses the SN Addition
procedure or the MN-initiated SN Modification procedure, including current UPF
UL NG-U tunnel used at the MN. If in-order delivery is required for some QoS
flows, an UL forwarding tunnel may be setup for the PDU session at this stage.
NOTE 1: In case the MN offloads some QoS flows to the SN within a PDU session
already split between the MN and the SN, the MN initiated SN Modification
procedure is used.
3-6d. If in-order delivery is required, the SN buffers the first packets
received from the UE for a certain QoS flow until it receives an GTP-U end
marker packet over the UL forwarding tunnel indicating that the MN has
delivered all UL packets from the source side to UPF for that QoS flow. Then
the SN starts delivering UL packets to UPF for that QoS flow using the UPF UL
TEID address used at the MN received at step 1.
7-8. The MN uses the _PDU Session Resource Modify Indication_ message to
inform 5GC that the PDU session is split into two tunnels and indicate which
QoS flows are associated with which DL tunnel. The 5GC triggers the sending of
DL End Marker packets without QFI tag at step 7a and confirms with the _PDU
Session Resource Modify Confirm_ message and allocates corresponding uplink
tunnels.
After receiving the End Marker packet(s) from UPF at step 7a, the MN
determines that the End Marker packets only work on the offloaded QoS flows,
and may stop delivering and discard DL packets of the offloaded QoS flows, and
the MN shall continue transmiting DL packets for the not offloaded QoS flows,
if any.
7a./7b. After receiving the DL end marker from 5GC at step 7a, the MN may
generate at step 7b DL End Marker packets without QFI tag towards the SN.
9-10. If the MN receives a new UL TEID in the _PDU Session Resource Modify
Confirm_ message for itself, the MN will use it to deliver UL packets to UPF.
If the MN receives a new UL TEID for the SN, then the MN-initiated SN
Modification procedure (i.e., step 9 and step 10) is used to provide the new
UL TEID to the SN and then the SN switches to use the new UL TEID to deliver
UL packets.
10.14.4 PDU Session Split at UPF (RAN initiates QoS flows offloading from SN
to MN)
When some QoS flows are offloaded from the SN to the MN, the MN may decide to
split the PDU session served by the SN into more than one NG-U tunnels. If the
MN requests to offload, the MN sends the _SN Modification Request_ message to
the SN. In case the SN requests to offload, the SN sends the _SN Modification
Required_ message to the MN.
Figure 10.14.4-1: PDU Session Split at UPF during RAN initiated PDU session
resource modify (QoS flows offloading from SN to MN)
1a-1c. When the MN requests to offload some QoS flows from the SN to the MN
for a PDU session, it sends the _SN Modification Request_ message. If in-order
delivery is required for some of the QoS flows, an UL forwarding tunnel may be
setup for the PDU session at this stage and the MN provides the UL forwarding
tunnel address information in the _Xn-U Address Indication_ message.
2a-2b. When the SN requests to offload some QoS flows to the MN for a PDU
session, the SN sends the _SN Modification Required_ message. If in-order
delivery is required for some of the QoS flows, an UL forwarding tunnel may be
setup for the PDU session at this stage and the MN provides the UL forwarding
tunnel address information in the _SN Modification Confirm_ message.
3-6d. If in-order delivery is required, the MN buffers the first packets
received from the UE for a certain QoS flow until it receives an GTP-U end
marker packet over the UL forwarding tunnel indicating that the SN has
delivered all UL packets from the source side to UPF for that QoS flow.
7-8. The MN uses the _PDU Session Resource Modify Indication_ message to
inform 5GC that the PDU session is split into two tunnels and indicate which
QoS flows are associated with which DL tunnel. The 5GC triggers the sending of
DL End Marker packets without QFI tag at step 7a and confirms with the _PDU
Session Resource Modify Confirm_ message and allocates corresponding uplink
tunnels.
After receiving the End Marker packet(s) from UPF at step 7a, the SN
determines that the End Marker packets only work on the offloaded QoS flows,
and may stop delivering and discard DL packets of the offloaded QoS flows, and
the SN shall continue transmiting DL packets for the not offloaded QoS flows,
if any.
7a./7b. After receiving the DL end marker from 5GC at step 7a, the SN may
generate at step 7b DL End Marker packets without QFI tag towards the MN.
9-10. If the MN receives a new UL TEID in the _PDU Session Resource Modify
Confirm_ message for itself, the MN will use it to deliver UL packets to UPF.
If the MN receives a new UL TEID for the SN, then the MN-initiated SN
Modification procedure (i.e., the step 9 and step 10) is used to provide the
new UL TEID to the SN and then the SN switches to use the new UL TEID to
deliver UL packets.
## 10.15 F1-C Traffic Transfer
In EN-DC/NR-DC, the F1-C Traffic Transfer message is sent by the MN to the SN
or by the SN to MN to transfer the F1-C traffic to and from an IAB-node.
Figure 10.15-1: F1-C transfer procedure in EN-DC
1\. When the IAB-MT sends a F1-AP message encapsulated in SCTP/IP or F1-C
related (SCTP/)IP packet, it sends it to the MN in a container within
_ULInformationTransfer_ message as specified in TS 36.331 [10].
2\. The MN initiates the F1-C Traffic Transfer procedure, in which it
transfers the received F1-AP message encapsulated in (SCTP/)IP or F1-C related
(SCTP/)IP packet as an octet string.
3\. When the SN sends a F1-AP message encapsulated in SCTP/IP or F1-C related
(SCTP/)IP packet, it sends it to the MN as an octet string through the F1-C
Traffic Transfer procedure.
4\. The MN sends the received F1-AP message encapsulated in SCTP/IP or F1-C
related (SCTP/)IP packet to the IAB-MT in a container within
_DLInformationTransfer_ message as specified in TS 36.331 [10].
Figure 10.15-2: Scenario 1: F1-C transfer between IAB-MT and SN
(F1-terminating node) in NR-DC
1\. The IAB-MT sends a F1-AP message encapsulated in SCTP/IP or F1-C related
(SCTP/)IP packet to the MN (non-F1-terminating node) via SRB2 in a container
within _ULInformationTransfer_ message as specified in TS 38.331 [4].
2\. The MN initiates the F1-C Traffic Transfer procedure, in which it
transfers the received F1-AP message encapsulated in (SCTP/)IP or F1-C related
(SCTP/)IP packet as an octet string.
3\. The SN (F1-terminating node) sends a F1-AP message encapsulated in SCTP/IP
or F1-C related (SCTP/)IP packet to the MN as an octet string through the F1-C
Traffic Transfer procedure.
4\. The MN sends the received F1-AP message encapsulated in SCTP/IP or F1-C
related (SCTP/)IP packet to the IAB-MT via SRB2 in a container within
_DLInformationTransfer_ message as specified in TS 38.331 [4].
## 10.16 Support of inter-system handover involving EN-DC or MR-DC with 5GC
### 10.16.1 General
Inter-system handover is specified in TS 23.501 [11] and TS 23.502 [20]. Data
forwarding for inter-system handover is specified in TS 38.300 [3] and clause
8.4.
Inter-system Inter-Master node handover with/without SN change is not
supported in this version of the protocol (e.g. no transition from EN-DC to
NGEN-DC or NR-DC).
Inter-system HO from NR to E-UTRA with EN-DC configuration is supported in
this version of the specification. N26 based inter-system HO will be executed
between source RAN and gNB.
Inter-system HO from E-UTRA connected to 5GC to E-UTRA with EN-DC
configuration is not supported. Inter-system HO from E-UTRA with EPC to MR-DC
with 5GC is not supported.
Inter-system handover with source gNB and the target en-gNB or the source en-
gNB and the target gNB being realised within the same network entity is
supported in this version of the specification as described in clause 10.16.2
and clause 10.16.3.
### 10.16.2 Inter-system handover from EPS to 5GS with the Secondary Node used
as target
Inter-system handover from EPS to 5GS with the Secondary Node used as target
refers to a deployment scenario where the source en-gNB and the target gNB are
realised within the same network entity.
Figure 10.16.2-1: Inter-system handover from EPS to 5GS with the Secondary
Node used as target
\- Step 1: The (source) eNB, performing EN-DC with the (source) en-gNB
triggers handover preparation including the SgNB UE X2AP ID within the Source
NG-RAN to Target NG-RAN Transparent Container.
\- Step 2: The target gNB infers from the received SgNB UE X2AP ID in the
_Handover Request_ message that direct data forwarding can be performed in a
node-internal way.
\- Step 3: DL UP data is forwarded in a node-internal way for the SN
terminated bearers.
\- Step 4: After the end marker has arrived from the SGW, the (target) gNB
processes UP data from the UPF.
### 10.16.3 Inter-system handover from 5GS to EPS with the Source Node used as
target Secondary Node
Inter-system handover from 5GS to EPS with the Source Node used as target
Secondary Node refers to a deployment scenario where the source gNB and the
target en-gNB are realised within the same network entity.
Figure 10.16.3-1: Inter-system handover from 5GS to EPS with the Source Node
used as target Secondary Node
1\. The (source) gNB triggers handover preparation phase including in the
Source eNB to Target eNB Transparent Container the Source NG-RAN node ID and
the RAN UE NGAP ID.
2\. The target eNB receives the Source NG-RAN node ID and the RAN UE NGAP ID
in the Source eNB to Target eNB Transparent Container.
3.-4. The X2AP SgNB Addition procedure is performed towards the (target) en-
gNB indicated in the Source NG-RAN node ID received in step 2. The eNB
includes the RAN UE NGAP ID received in step 2 in the X2 _SgNB Addition
Request_ message.
5.-8. Handover proceeds.
9\. DL UP data is forwarded in a node-internal way for the SN terminated
bearers.
## 10.17 Inter-Master Node RRC Resume without Secondary Node change
### 10.17.1 MR-DC with 5GC
Inter-MN RRC Resume without MN initiated SN change is used to transfer UE
context data from a source MN to a target MN while the UE context at the SN is
kept. During the procedure, the target MN may decide not to keep the SN.
Figure 10.17.1-1: Inter-MN RRC Resume without MN initiated SN change procedure
Figure 10.17.1-1 shows an example signalling flow for inter-MN RRC Resume
without MN initiated SN change:
1\. The UE resumes from RRC_INACTIVE, providing the I-RNTI, allocated by the
source MN, i.e., the last serving NG-RAN node.
2\. The target MN, if able to resolve the NG-RAN node identity contained in
the I-RNTI, requests the source MN to provide UE Context by initiating the Xn
Retrieve UE Context procedure.
3\. If the verification is successful, the source MN provides UE context data.
The source MN includes the SN UE XnAP ID, SN ID and the UE context in the SN
in the _Retrieve UE Context Response_ message.
NOTE 1: The source MN may trigger the MN-initiated SN Modification procedure
(to the SN) to retrieve the current SCG configuration and to allow provision
of data forwarding related information before step 3.4a. If the target MN
decides to keep the SN, the target MN sends _SN Addition Request_ to the SN
including the SN UE XnAP ID as a reference to the UE context in the SN that
was established by the source MN.
4b. The SN replies with _SN Addition Request Acknowledge_ message.
4c. For SN terminated bearers using MCG resources, the target MN provides Xn-U
DL TNL address information in the _Xn-U Address Indication_ message.
5/6. The target MN and UE complete the resumption of the RRC connection.
7\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the SN.
NOTE 2: The order the UE sends the _RRCResumeComplete_ message towards the
target MN (step 6) and performs the Random Access procedure towards the SN
(step 7) is not defined.
8\. If the RRC connection reconfiguration procedure was successful, the target
MN informs the SN via _SN Reconfiguration Complete_ message.
9\. If the RRC connection reconfiguration procedure was successful, the target
MN initiates the Xn Retrieve UE Context Confirm procedure and indicates to the
source MN whether the UE context in the SN is kept or not.
10\. The Xn-U Address Indication procedure may be invoked by the target MN to
provide forwarding address information if loss of DL user data buffered in the
source side needs to be avoided.
11a/11b. The source MN sends _SN Release Request_ message to the SN including
a Cause indicating MCG mobility. The SN acknowledges the release request. The
source MN indicates to the SN that the UE context in the SN is kept, if it
receives the indication from the target MN. If the indication as the UE
context kept in the SN is included, the SN keeps the UE context.
11c. If received in step 10, the source MN sends the _Xn-U Address Indication_
message to the SN to transfer data forwarding information. More than one data
forwarding addresses may be provided if the PDU session is split in the target
side.
12\. If applicable, data forwarding takes place from the source side. If the
SN is kept, data forwarding may be omitted for SN terminated bearers or QoS
flows kept in the SN.
13-16. The target MN initiates the Path Switch procedure _._ If the target MN
includes multiple DL TEIDs for one PDU session in the _Path Switch Request_
message, multiple UL TEID of the UPF for the PDU session should be included in
the _Path Switch Ack_ message in case there is TEID update in UPF.
NOTE 3: If new UL TEIDs of the UPF for SN terminated bearers are included, the
target MN performs MN initiated SN Modification procedure to provide them to
the SN.
17\. The target MN initiates the UE Context Release procedure towards the
source MN.
18\. Upon reception of the _UE Context Release_ message from source MN, the SN
releases C-plane related resources associated to the UE context towards the
source MN. Any ongoing data forwarding may continue. The SN shall not release
the UE context associated with the target MN if the UE context kept indication
was included in the _SN Release Request_ message in step 11.
## 10.18 Self-optimisation for PSCell change
### 10.18.1 General
For analysis of PSCell change failure, the UE makes the SCG Failure
Information available to the MN.
MN performs initial analysis to identify the node that caused the failure. The
MN may use the SCG Failure Information Report procedure to verify whether
intra-SN PSCell change has been triggered in the last serving SN and stores
the SCG Failure Information for the time needed to receive possible response
from the last serving SN. If the failure is caused by a source SN, the MN
forwards then the SCG Failure Information to the source SN. The node
responsible for the last PSCell change (the source SN, the last serving SN or
the MN) performs the final root cause analysis.
### 10.18.2 PSCell change failure
One of the functions of self-optimization for PSCell change is to detect
PSCell change failures that occur due to Too late PSCell change or Too early
PSCell change, or Triggering PSCell change to wrong PSCell. These problems are
defined as follows:
\- Too late PSCell change: an SCG failure occurs after the UE has stayed for a
long period of time in the PSCell; a suitable different PSCell is found based
on the measurements reported from the UE.
\- Too early PSCell change: an SCG failure occurs shortly after a successful
PSCell change from a source PSCell to a target PSCell or a PSCell change
failure occurs during the PSCell change procedure; source PSCell is still the
suitable PSCell based on the measurements reported from the UE.
\- Triggering PSCell change to wrong PSCell: an SCG failure occurs shortly
after a successful PSCell change from a source PSCell to a target PSCell or a
PSCell change failure occurs during the PSCell change procedure; a suitable
PSCell different with source PSCell or target PSCell is found based on the
measurements reported from the UE.
In the definition above, the \"successful PSCell change\" refers to the UE
state, namely the successful completion of the RA procedure.
## 10.19 Conditional Handover with Secondary Node
### 10.19.1 EN-DC
The Conditional Handover with Secondary Node procedure is used for
configuration and execution of CHO with SN. This procedure includes the cases
where the SN is kept, changed or added. If the SN is kept, the UE context at
the SN is kept. If the SN is changed, the UE context at the source SN is moved
to the target SN.
Figure 10.19.1-1: Conditional Handover with Secondary Node procedure
Figure 10.19.1-1 shows an example signaling flow for Conditional Handover with
Secondary Node.
NOTE 1: For a CHO without SN change, the source SN and the target SN shown in
Figure 10.19.1-1 are the same node.
NOTE 2: For a CHO with SN addition, the source SN and steps involving the
source SN in Figure 10.19.1-1 are ignored.
1\. The source MN starts the conditional handover procedure by initiating the
X2 Handover Preparation procedure including MCG configuration and, if the UE
is configured with an SCG, SCG configuration. The source MN may include the
(source) SN UE X2AP ID, SN ID, the UE context in the (source) SN and the
Conditional Handover Information Request IE in the _Handover Request_ message.
NOTE 3: In case of the CHO with/without SN change, the source MN may trigger
the MN-initiated SN Modification procedure (to the source SN) to retrieve the
current SCG configuration, if configured, before step 1.
2\. If the candidate MN decides to keep the UE context in the SN, the
candidate MN sends the _SgNB Addition Request_ message to the SN including the
SN UE X2AP ID as a reference to the UE context in the SN that was established
by the source MN. If the candidate MN decides to change the SN allowing delta
configuration, the candidate MN sends the _SgNB Addition Request_ message to
the candidate SN including the UE context in the source SN that was
established by the source MN. Otherwise, the candidate MN may send the _SgNB
Addition Request_ message to the candidate SN including neither the SN UE X2AP
ID nor the UE context in the source SN that was established by the source MN.
Within the _SgNB Addition Request_ message, the candidate MN also includes the
CHO related information, i.e., the source MN ID and the MN UE X2AP ID in the
source MN, in order to indicate that the SgNB Addition Preparation procedure
is triggered in relation to a CHO and to enable the SN to identify requests
related to the same UE.
NOTE 3a: The target MN and other potential target MNs may trigger the SgNB
Addition Preparation procedure to the same (target) SN.
NOTE 3b: The source MN may initiate additional X2 Handover Preparation
procedures towards the same or other target MNs. Based on each X2 Handover
Preparation procedure, each target MN may decide to trigger SgNB Addition
Preparation procedure.
3\. The (candidate) SN replies with the _SgNB Addition Request Acknowledge_
message. The (candidate) SN may include the indication of full or delta RRC
configuration.
NOTE 4: In CHO with SCG configuration, it is up to the candidate MN
implementation to make sure that the CG-Config provided from the (candidate)
SN can be used in all CHO preparations.
4\. The candidate MN includes within the _Handover Request Acknowledge_
message a transparent container to be sent to the UE as an RRC message to
perform the conditional handover, and may also provide forwarding addresses to
the source MN. The candidate MN indicates to the source MN that the UE context
in the SN is kept if the candidate MN and the SN decided to keep the UE
context in the SN in step 2 and step 3.
NOTE 4a0: Steps 1-4 may be produced in several instances, each instance
initiated with a separate Handover Preparation procedure (step 1). The order
of messages belonging to separate instances is not defined.
4a. The source MN sends the _Data Forwarding Address Indication_ message to
the (source) SN. This _Data Forwarding Address Indication_ message notifies
conditional handover to the (source) SN, which may decide to perform, if
applicable, early data forwarding for SN-terminated bearers, together with the
sending of an _Early Status Transfer_ message to the source MN.
NOTE 4a: Separate Data Forwarding Address Indication procedures may be
initiated to provide different forwarding addresses of the prepared
conditional handovers. In this case, it is up to the source MN and SN
implementations to make sure that the _Early Status Transfer_ message(s) from
the source SN, if any, is forwarded to the right target MN. The Data
Forwarding Address Indication procedure may further be initiated to indicate
to the (source) SN to stop already initiated early data forwarding for some
SN-terminated bearers, if they are no longer subject to data forwarding due to
the modification or cancellation of the prepared conditional handovers.
5\. The source MN sends an _RRCConnectionReconfiguration_ message to the UE,
including the CHO configuration, i.e. a list of
_RRCConnectionReconfiguration*_ messages and associated execution conditions,
in which each _RRCConnectionReconfiguration*_ message contains an MCG
configuration and possibly an SCG configuration in the _RRCReconfiguration**
message_ received from the candidate SN in step 3.
6\. The UE applies the _RRCConnectionReconfiguration_ message received in step
5, stores the CHO configuration and replies to the MN with an
_RRCConnectionReconfigurationComplete_ message.
7/8. The UE maintains connection with the source MN and, if the UE is
configured with a PSCell, with the source PSCell, after receiving CHO
configuration, and starts evaluating the CHO execution condition for the
candidate cell(s). If at least one CHO candidate cell satisfies the
corresponding CHO execution condition, the UE detaches from the source MN,
applies the stored corresponding configuration for that selected candidate
cell, synchronises to that candidate cell and completes the RRC handover
procedure by sending _RRCConnectionReconfigurationComplete*_ message to the
target MN. If the stored configuration for the selected candidate cell
includes an SCG configuration, the UE includes an embedded SN
_RRCReconfigurationComplete_ ** message for the target SN. The UE releases
stored CHO configurations after successful completion of RRC handover
procedure.
NOTE 5: In case the target SN includes the indication of full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE.
9\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the (target) SN.
NOTE 6: The order the UE performs Random Access towards the MN (step 7) and
performs the Random Access procedure towards the (target) SN (step 9) is not
defined.
10\. If the RRC connection reconfiguration procedure was successful, the
target MN informs the (target) SN via _SgNB Reconfiguration Complete_ message.
11\. The target MN sends the _Handover Success_ message to the source MN to
inform that the UE has successfully accessed the target cell.
12a/b. The source MN sends _SgNB Release Request_ message to the (source) SN
including a Cause indicating MCG mobility and, if applicable, data forwarding
information. The source MN indicates to the (source) SN that the UE context in
SN is kept, if it receives the indication from the target MN. The (source) SN
acknowledges the release request.
12c. The source MN sends the _Handover Cancel_ message toward the other
signalling connections or other candidate MNs, if any, to cancel CHO for the
UE.
12d/e. If the target MN is configured with other candidate PCell(s) associated
with other candidate SN(s) than the target SN, the target MN sends the _SgNB
Release Request_ message(s) to the corresponding candidate SN(s). Other
candidate MN(s) send(s) the _SgNB Release Request_ message(s) to other
candidate SN(s), if configured. The other candidate SN(s) acknowledges the
release request.
13a. The (source) SN sends the _Secondary RAT_ _Data Usage Report_ message to
the source MN and includes the data volumes delivered to and received from the
UE over the NR radio for the related E-RABs.
NOTE 7: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The
SgNB may send the report when the transmission of the related bearer is
stopped.
13b. The source MN sends the _Secondary RAT Data Usage Report_ message to MME
to provide information on the used NR resource.
14\. For bearers using RLC AM, the source MN sends the _SN Status Transfer_
message, including, if needed, SN Status received from the source SN to the
target MN. The target MN forwards the SN Status to the target SN, if needed.
15\. If applicable, data forwarding takes place from the source side (i.e.
source MN or source SN). If the SN is kept, data forwarding may be omitted for
SN-terminated bearers kept in the SN.
16-19. The target MN initiates the S1 Path Switch procedure.
NOTE 8: If new UL TEIDs of the S-GW are included, the target MN performs the
MN initiated SN Modification procedure to provide them to the SN.
20\. The target MN initiates the UE Context Release procedure towards the
source MN.
21\. Upon reception of the _UE Context Release_ message, the (source) SN
releases C-plane related resources associated to the UE context towards the
source MN. Any ongoing data forwarding may continue. The SN shall not release
the UE context associated with the target MN if the UE context kept indication
was included in the _SgNB_ _Release Request_ message in step 12a.
### 10.19.2 MR-DC with 5GC
The Conditional Handover with Secondary Node procedure is used for
configuration and execution of CHO with SN. This procedure includes the cases
where the SN is kept, changed or added. If the SN is kept, the UE context at
the SN is kept. If the SN is changed, the UE context at the source SN is moved
to the target SN.
Figure 10.19.2-1: Conditional Handover with Secondary Node procedure
Figure 10.19.2-1 shows an example signaling flow for Conditional Handover with
Secondary Node.
NOTE 1: For a CHO without SN change, the source SN and the target SN shown in
Figure 10.19.2-1 are the same node.
NOTE 2: For a CHO with SN addition, the source SN and steps involving the
source SN in Figure 10.19.2-1 are ignored.
1\. The source MN starts the conditional handover procedure by initiating the
Xn Handover Preparation procedure including MCG configuration and, if the UE
is configured with an SCG, SCG configuration. The source MN includes the
(source) SN UE XnAP ID, SN ID, the UE context in the (source) SN and the
Conditional Handover Information Request IE in the _Handover Request_ message.
NOTE 3: In case of the CHO with/without SN change, the source MN may trigger
the MN-initiated SN Modification procedure (to the source SN) to retrieve the
current SCG configuration, if configured, before step 1.
2\. If the candidate MN decides to keep the UE context in the SN, the
candidate MN sends the _SN Addition Request_ message to the SN including the
SN UE XnAP ID as a reference to the UE context in the SN that was established
by the source MN. If the candidate MN decides to change the SN allowing delta
configuration, the candidate MN sends the _SN Addition Request_ message to the
candidate SN including the UE context in the source SN that was established by
the source MN. Otherwise, the candidate MN may send the _SN Addition Request_
message to the candidate SN including neither the SN UE XnAP ID nor the UE
context in the source SN that was established by the source MN. Within the _SN
Addition Request_ message, the candidate MN also includes the CHO related
information, i.e., the source MN ID and the MN UE XnAP ID in the source MN, in
order to indicate that the SN Addition Preparation procedure is triggered in
relation to a CHO and to enable the SN to identify requests related to the
same UE.
NOTE 3a: The target MN and other potential target MNs may trigger the SN
Addition Preparation procedure to the same (target) SN.
NOTE 3b: The source MN may initiate additional Xn Handover Preparation
procedures towards the same or other target MNs. Based on each Xn Handover
Preparation procedure, each target MN may decide to trigger SN Addition
Preparation procedure.
3\. The (candidate) SN replies with the _SN Addition Request Acknowledge_
message. The (candidate) SN may include the indication of the full or delta
RRC configuration.
NOTE 4: In CHO with SCG configuration, it is up to the candidate MN
implementation to make sure that the CG-Config provided from the (candidate)
SN can be used in all CHO preparations.
3a. For the SN terminated bearers using MCG resources, the candidate MN
provides Xn-U DL TNL address information in the _Xn-U Address Indication_
message.
4\. The candidate MN includes within the _Handover Request Acknowledge_
message the MN RRC reconfiguration message to be sent to the UE in order to
perform the conditional handover, and may also provide forwarding addresses to
the source MN. If PDU session split is performed in the target side during
handover procedure, more than one data forwarding addresses corresponding to
each node are included in the _Handover Request Acknowledge_ message. The
candidate MN indicates to the source MN that the UE context in the SN is kept
if the candidate MN and the SN decided to keep the UE context in the SN in
step 2 and step 3.
NOTE 4a0: Steps 1-4 may be produced in several instances, each instance
initiated with a separate Handover Preparation procedure (step 1). The order
of messages belonging to separate instances is not defined.
4a. The source MN sends the _Xn-U Address Indication_ message to the (source)
SN. This _Xn-U Address Indication_ message notifies conditional handover to
the (source) SN, which may decide to perform, if applicable, early data
forwarding for SN-terminated bearers, together with the sending of an _Early
Status Transfer_ message to the source MN.
NOTE 4a: Separate Xn-U Address Indication procedures may be initiated to
provide different forwarding addresses of the prepared conditional handovers.
In this case, it is up to the source MN and SN implementations to make sure
that the _Early Status Transfer_ message(s) from the source SN, if any, is
forwarded to the right target MN. The Xn-U Address Indication procedure may
further be initiated to indicate to the (source) SN to stop already initiated
early data forwarding for some SN-terminated bearers, if they are no longer
subject to data forwarding due to the modification or cancellation of the
prepared conditional handovers.
5\. The source MN sends an RRC reconfiguration message to the UE, including
the CHO configuration, i.e. a list of RRC reconfiguration* messages and
associated execution conditions, in which each RRC reconfiguration* message
contains an MCG configuration and possibly an SCG configuration in the RRC
reconfiguration** _message_ received from the candidate SN in step 3.
6\. The UE applies the RRC reconfiguration message received in step 5, stores
the CHO configuration and replies to the MN with an RRC reconfiguration
complete message.
7/8. The UE maintains connection with the source MN and, if the UE is
configured with a PSCell, with the source PSCell, after receiving CHO
configuration, and starts evaluating the CHO execution condition for the
candidate cell(s). If at least one CHO candidate cell satisfies the
corresponding CHO execution condition, the UE detaches from the source MN,
applies the stored corresponding configuration for that selected candidate
cell, synchronises to that candidate cell and completes the RRC handover
procedure by sending RRC reconfiguration complete* message to the target MN.
If the stored configuration for the selected candidate cell includes an SCG
configuration, the UE includes an embedded SN _RRCReconfigurationComplete_ **
message for the target SN. The UE releases stored CHO configurations after
successful completion of RRC handover procedure.
NOTE 5: In case the target SN includes the indication of the full RRC
configuration, the MN performs release of the SN terminated radio bearer
configuration and release and add of the NR SCG configuration part towards the
UE.
9\. If configured with bearers requiring SCG radio resources, the UE
synchronizes to the (target) SN.
NOTE 6: The order the UE performs Random Access towards the MN (step 7) and
performs the Random Access procedure towards the (target) SN (step 9) is not
defined.
10\. If the RRC connection reconfiguration procedure was successful, the
target MN informs the (target) SN via _SN Reconfiguration Complete_ message.
11\. The target MN sends the _Handover Success_ message to the source MN to
inform that the UE has successfully accessed the target cell.
12a/b. The source MN sends _SN Release Request_ message to the (source) SN
including a Cause indicating MCG mobility. The source MN indicates to the
(source) SN that the UE context in SN is kept, if it receives the indication
from the target MN. The (source) SN acknowledges the release request.
12c. The source MN sends _XN-U Address Indication_ message to the (source) SN
to transfer data forwarding information. More than one data forwarding
addresses may be provided if the PDU session is split in the target side.
12d. The source MN sends the _Handover Cancel_ message toward the other
signalling connections or other candidate MNs, if any, to cancel CHO for the
UE.
12e/f. If the target MN is configured with other candidate PCell(s) associated
with other candidate SN(s) than the target SN, the target MN sends the _SN
Release Request_ message(s) to the corresponding candidate SN(s). Other
candidate MN(s) send(s) the _SN Release Request_ message(s) to other candidate
SN(s), if configured. The other candidate SN(s) acknowledges the release
request.
13a. The (source) SN sends the _Secondary RAT_ _Data Usage Report_ message to
the source MN and includes the data volumes delivered to and received from the
UE over the NR/E-UTRA radio as described in clause 10.11.2.
NOTE 7: The order the source SN sends the _Secondary RAT Data Usage Report_
message and performs data forwarding with MN/target SN is not defined. The SN
may send the report when the transmission of the related QoS is stopped.
13b. The source MN sends the _Secondary RAT Data Usage Report_ message to AMF
to provide information on the used NR/E-UTRA resource.
14\. For bearers using RLC AM, the source MN sends the _SN Status Transfer_
message to the target MN, including, if needed, SN Status received from the
source SN. The target MN forwards the SN Status to the target SN, if needed.
15\. If applicable, data forwarding takes place from the source side (i.e.
source MN or source SN). If the SN is kept, data forwarding may be omitted for
the SN terminated bearers or QoS flows kept in the SN.
16-19. The target MN initiates the Path Switch procedure _._ If the target MN
includes multiple DL TEIDs for one PDU session in the _Path Switch Request_
message, multiple UL TEID of the UPF for the PDU session should be included in
the _Path Switch Ack_ message in case there is TEID update in UPF.
NOTE 8: If new UL TEIDs of the UPF for SN are included, the target MN performs
MN initiated SN Modification procedure to provide them to the SN.
20\. The target MN initiates the UE Context Release procedure towards the
source MN.
21\. Upon reception of the _UE Context Release_ message from source MN, the
(source) SN releases C-plane related resources associated to the UE context
towards the source MN. Any ongoing data forwarding may continue. The SN shall
not release the UE context associated with the target MN if the UE contest
kept indication was included in the _SN Release Request_ message in step 12a.
# 11 Service related aspects
## 11.1 Roaming and Access Restrictions
The principles for conveying roaming and access restriction info for EN-DC are
described in TS 36.300 [2].
For MR-DC with 5GC, SCG (re)selection at the SN is based on roaming and access
restriction information in SN. If roaming and access restriction information
is not available at the SN, the SN shall consider that there is no restriction
for SCG (re)selection. Therefore, the MN needs to convey the latest roaming
and access restriction information as received from the Core Network or
another NG-RAN node to the SN via XnAP messages.
## 11.2 Support of Network Sharing
E-UTRAN and NG-RAN aspects of network sharing are specified in TS 36.300 [2]
and TS 38.300 [3].
## 11.3 ARPI/SPID Handling from MN
Usage of the Subscriber Profile ID for RAT/Frequency Priority (SPID) and the
Additional RRM Policy Index (ARPI) in E-UTRAN is specified in TS 36.300 [2]
and applies to EN-DC. Therefore, the MN needs to convey the up-to-date
ARPI/SPID information to the SN via X2AP messages.
# 12 X2/Xn Interface related aspects
Stage 2 specification for X2-C procedures for EN-DC is contained in TS 36.300
[2].
Xn-C procedures for MR-DC with 5GC are specified in TS 38.423 [5].
X2-U procedures for EN-DC and Xn-U procedures for MR-DC with 5GC are specified
in TS 38.425 [6].
# 13 Other aspects
## 13.1 Interference avoidance for in-device coexistence
In-Device Coexistence (IDC) solution as described in TS 36.300 [2] is extended
to address EN-DC operation. Only FDM solution, where the list of NR carriers
suffering from IDC problems is signalled in IDC indication, is supported in
this version of the specifications. The requirement on RRM/RLM/CSI
measurements in different phases of IDC interference defined in TS 36.300 [2]
is applicable except that for NR serving cell, the requirements in TS 38.133
[8] and TS 38.101-1 [12], TS 38.101-2 [13], TS 38.101-3 [14] apply.
## 13.2 Sidelink
NR Sidelink Communication, V2X Sidelink Communication and NR Sidelink
Discovery cannot be configured in MR-DC in this release.
## 13.3 SCG UE history information
The MN stores and correlates the UE History Information from MN and SN(s) as
long as the UE stays in MR-DC, forwards UE History Information and optional UE
History Information from the UE to its connected SNs. The resulting
information is then used by SN for dual-connectivity operation. The SN is in
charge of collecting SCG UE history information and providing the collected
information to the MN.
If the UE stays in a PSCell for a duration exceeding the maximum value of the
Time Stay parameter, the SN may store the PSCell information with consecutive
entries using the same PSCell identity. The total stay time in this PSCell is
the sum of stay time for all consecutive PSCell with the same identity.
The SN shall provide the collected SCG UE history information, if available,
to the MN in the following procedures:
\- the SN Release, and SN initiated SN Change procedures
\- the MN initiated SN Modification procedure if requested by the MN in this
procedure
\- the SN initiated SN modification procedure upon PSCell change if subscribed
in the SN Addition procedure
When the target NG-RAN node receives the SCG UHI from the source NG-RAN node
via Handover Request message for CHO, the target NG-RAN node updates the time
UE stayed in cell of the latest PSCell entry (i.e. the source PSCell) when the
UE successfully accesses to a candidate cell of the target NG-RAN node. The
updated value of the time UE stayed in the source PSCell is equal to the value
received from the source NG-RAN node during the Handover Preparation plus the
time from receiving Handover Request message from the source NG-RAN node to
receiving RRC Reconfiguration Complete message from the UE.
###### ## Annex A (informative): Layer 2 handling for bearer type change
This clause provides for information an overview on L2 handling for bearer
type change in MR-DC, with and without a security key change due to a change
of the termination point.
Table A-1: L2 handling for bearer type change with and without a security key
change due to a change of the termination point.
+---------+---------+---------+---------+---------+---------+---------+ | Bearer | MCG | Split | SCG | | | | | type | | | | | | | | change | | | | | | | | from | | | | | | | | row\ | | | | | | | | to col | | | | | | | +=========+=========+=========+=========+=========+=========+=========+ | | no | change | no | change | no | change | | | change | of | change | of | change | of | | | of | term | of | term | of | term | | | term | ination | term | ination | term | ination | | | ination | point | ination | point | ination | point | | | point | | point | | point | | | | | (key | | (key | | (key | | | (no key | change) | (no key | change) | (no key | change) | | | change) | | change) | | | | | | | | | | change) | | +---------+---------+---------+---------+---------+---------+---------+ | MCG | N/A | PDCP: | PDCP: | PDCP: | PDCP: | PDCP: | | | | | Reco | | | | | | | Re-es | nfigure | Re-es | R | Re-es | | | | tablish | | tablish | ecovery | tablish | | | | | MCG | | | | | | | MCG | RLC: No | MCG | MCG | MCG | | | | RLC: | action | RLC: | RLC: | RLC: | | | | | | | | | | | | See | MCG | See | See | See | | | | Note 1 | MAC: No | Note 1 | Note 3 | Note 3 | | | | | action | | | | | | | MCG | | MCG | MCG | MCG | | | | MAC: | SCG | MAC: | MAC: | MAC: | | | | | RLC: | | | | | | | See | Es | See | Reco | Reco | | | | Note 1 | tablish | Note 1 | nfigure | nfigure | | | | | | | | | | | | SCG | SCG | SCG | SCG | SCG | | | | RLC: | MAC: | RLC: | RLC: | RLC: | | | | | Reco | | | | | | | No | nfigure | Es | Es | Es | | | | action | | tablish | tablish | tablish | | | | | | | | | | | | SCG | | SCG | SCG | SCG | | | | MAC: | | MAC: | MAC: | MAC: | | | | | | | | | | | | No | | Reco | Reco | Reco | | | | action | | nfigure | nfigure | nfigure | +---------+---------+---------+---------+---------+---------+---------+ | Split | PDCP: | PDCP:\ | N/A | PDCP: | PDCP: | PDCP: | | | | Re-es | | | R | | | | R | tablish | | Re-es | ecovery | Re-es | | | ecovery | | | tablish | | tablish | | | | MCG | | | MCG | | | | MCG | RLC: | | MCG | RLC: | MCG | | | RLC: | See | | RLC: | | RLC: | | | | Note 1 | | | See | | | | No | | | See | Note 3 | See | | | action | MCG | | Note 1 | | Note 3 | | | | MAC: | | | MCG | | | | MCG | See | | MCG | MAC: | MCG | | | MAC: | Note 1 | | MAC: | | MAC: | | | | | | | Reco | | | | No | SCG | | See | nfigure | Reco | | | action | RLC: | | Note 1 | | nfigure | | | | See | | | SCG | | | | SCG | Note 4 | | SCG | RLC:\ | SCG | | | RLC: | | | RLC:\ | No | RLC:\ | | | | SCG | | See | action | See | | | See | MAC: | | Note 1 | | Note 1 | | | Note 4 | Reco | | | SCG | | | | | nfigure | | SCG | MAC:\ | SCG | | | SCG | | | MAC:\ | No | MAC:\ | | | MAC: | | | See | action | See | | | | | | Note 1 | | Note 1 | | | Reco | | | | | | | | nfigure | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | SCG | PDCP: | PDCP: | PDCP: | PDCP: | N/A | PDCP: | | | | | | | | | | | R | Re-es | Reco | Re-es | | Re-es | | | ecovery | tablish | nfigure | tablish | | tablish | | | | | | | | | | | MCG | MCG | MCG | MCG | | MCG | | | RLC: | RLC: | RLC: | RLC: | | RLC: | | | Es | | Es | | | | | | tablish | Es | tablish | Es | | No | | | | tablish | | tablish | | action | | | MCG | | MCG | | | | | | MAC: | MCG | MAC: | MCG | | MCG | | | Reco | MAC: | Reco | MAC: | | MAC: | | | nfigure | | nfigure | | | | | | | Reco | | Reco | | No | | | SCG | nfigure | SCG | nfigure | | action | | | RLC: | | RLC: No | | | | | | See | SCG | action | SCG | | SCG | | | Note 4 | RLC: | | RLC: | | RLC: | | | | | SCG | | | | | | SCG | See | MAC: No | See | | See | | | MAC: | Note 4 | action | Note 1 | | Note 1 | | | Reco | | | | | | | | nfigure | SCG | | SCG | | SCG | | | | MAC: | | MAC:\ | | MAC: | | | | | | See | | | | | | Reco | | Note 1 | | See | | | | nfigure | | | | Note 1 | +---------+---------+---------+---------+---------+---------+---------+
NOTE 1: For EN-DC and NGEN-DC MCG, NE-DC SCG: the MAC/RLC behaviour depends on
the solution selected by the network. It can be PCell handover (for EN-DC and
NGEN-DC) or PSCell change (for NE-DC), which triggers MAC reset and RLC re-
establishment. Alternatively, the logical channel identity can be changed,
either via RLC bearer release and add for the same DRB (including RLC re-
establishment), or via reconfiguration of the RLC bearer with RLC-re-
establishment.
For EN-DC and NGEN-DC SCG, NE-DC MCG, NR-DC MCG and SCG: the MAC/RLC behaviour
depends on the solution selected by the network. It can be reconfiguration
with sync, with MAC reset and RLC re-establishment. Alternatively, the logical
channel identity can be changed via RLC bearer release and add.
NOTE 2: Void
NOTE 3: For EN-DC and NGEN-DC: Re-establishment and release. For NE-DC and NR-
DC: Release.
NOTE 4: For NE-DC: Re-establishment and release. For EN-DC, NGEN-DC and NR-DC:
Release.
###### ##
###### ## Annex B (informative): Supported MR-DC Handover Scenarios
Table B-1 summarizes the supported handover scenarios involving MR-DC
configurations.
Table B-1: Supported MR-DC handover scenarios.
* * *
**To (column)\** E-UTRA with EPC**** E-UTRA with 5GC**** NR**** GERAN or
UTRAN**** EN-DC**** NGEN-DC**** NE-DC**** NR-DC**\  
HO from (row)**
* * *
**E-UTRA with EPC** YES YES YES YES YES NO NO NO
**E-UTRA with 5GC** YES YES YES NO NO YES NO NO
**NR** YES YES YES NOTE 1 YES NO YES YES
**GERAN or UTRAN** YES NO NO YES NO NO NO NO
**EN-DC** YES YES YES YES YES NO NO NO
**NGEN-DC** YES YES YES NO NO YES NO NO
**NE-DC** YES YES YES NOTE 1 NO NO YES NO
**NR-DC** YES YES YES NOTE 1 NO NO NO YES
* * *
NOTE 1: Only SRVCC handover of IMS voice bearer to UTRAN is supported.
NOTE 2: All handover scenarios according to Table B-1 that have a DC option in
the column \"from\" are supported during fast MCG failure recovery.
NOTE 3: Only intra-RAT conditional handover is supported except for E-UTRA
with 5GC scenario.
NOTE 4: DAPS handover is only supported from E-UTRA with EPC to E-UTRA with
EPC and from NR to NR.
###### ##
#