# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
GSMA 5GJA has introduced in document NG.116 [3] the concept of Generic Network
Slice Template (GST) from which several Network Slice Types (NESTs) can be
derived by assigning values to applicable attributes defined in the GST.
This study aims at identifying the gaps that need to be filled in providing
support in the specifications owned by SA WG2 for the Generic Network Slice
Template (GST) attributes.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System (5GS); Stage 2\".
[3] GSMA 5GJA NG.116: \"Generic Network Slice Template\".
[4] 3GPP TS 28.554: \"Management and orchestration; 5G end to end Key
Performance Indicators (KPI)\".
[5] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support
network data analytics services; Stage 2\".
[6] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[7] 3GPP TS 28.552: \"Management and orchestration; 5G performance
measurements\".
[8] 3GPP TR 23.740: \"Study on enhancement of network slicing\".
[9] 3GPP TS 32.255: \"Telecommunication management; Charging management; 5G
Data connectivity domain charging; stage 2\".
[10] 3GPP TS 32.256: \"Telecommunication management; Charging management; 5G
connection and mobility domain charging; stage 2\".
[11] 3GPP TS 28.202: \"Charging management; Network slice management charging
in the 5G System (5GS); Stage 2\".
[12] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1]
apply. A term defined in the present document takes precedence over the
definition of the same term, if any, in TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
GST Generic Network Slice Template
NEST Network Slice Type
# 4 Architectural Assumptions and Requirements
Editor\'s note: This clause will list general architectural assumptions and
principles for this study.
## 4.1 Architecture Assumptions
The following architectural assumptions apply:
\- A NEST is applied to a Network Slice even when supported by multiple
Network Slice instances.
\- It is not in the scope of this study to define a new Control Plane
interface for the BSS domain.
\- It is assumed that the UE context in the AMFs and data stored in NFs
involved with counting is kept in highly reliable storage that is robust to NF
failure.
## 4.2 Architectural Requirements
The following architectural requirements apply:
\- Solutions shall build on the 5G System architectural principles as in TS
23.501 [2], including flexibility and modularity for newly introduced
functionalities.
\- Subject to operator policy and national/regional regulations, solutions
shall be able to exempt Emergency services, Multimedia Priority Service, and
Mission Critical Service from quota limits.
NOTE: Handling of UE/PDU Session quota exemption and any pre-emption to other
non-mission critical services is expected to be controlled by operator policy.
\- While the support of network slicing applies only to 5GS, solutions
supports subscriptions that allows EPS/5GS interworking. Therefore EPS/5GS
interworking needs to be considered for the enforcement of quotas for maximum
number of UEs per network slice and for maximum number of PDU Sessions per
network slice.
# 5 Key Issues
Editor\'s note: This clause will describe the key issues for the enhancement
of Network Slicing.
## 5.1 Key Issue #1: Support of network slice related quota on the maximum
number of UEs
### 5.1.1 General Description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
**Number of terminals**
This attribute describes the maximum number of terminals that can use the
network slice simultaneously.
Either Number of connections or Number of terminals shall be present.
Table 5.1.1-1: Number of Terminals Table
+--------------------+--------------------------------+ | Parameters | | +====================+================================+ | Value | Integer | +--------------------+--------------------------------+ | Measurement unit | NA | +--------------------+--------------------------------+ | Example | 100 000 terminals | | | | | | 10 000 000 terminals (sensors) | +--------------------+--------------------------------+ | Attribute Presence | | +--------------------+--------------------------------+ | Mandatory | | +--------------------+--------------------------------+ | Conditional | X | +--------------------+--------------------------------+ | Optional | | +--------------------+--------------------------------+
**Additional information**
This is an important input to scale the network slice and provides enough
resources to the network slice. It is a significant difference if the network
slice is used to serve 10 users or 1 000 000 users simultaneously.
This key issue will study whether and how to support the quota on the maximum
number of UEs concurrently registering for a network slice defined by an
S-NSSAI. In particular, this KI will address:
\- How does 5GS know about the maximum number of UEs that the network slice
can support? Which NF(s) need to know such quota?
\- How does 5GS know about the current number of UEs accessing the network
slice? Which NF(s) need to know about this information?
\- Whether and how does 5GS enforce such quota when a UE registers for the
network slice and that would cause the quota to be exceeded.
\- How does 5GS selectively enable this quota only for Network Slices that
require it?
\- How does 5GS treat roaming UEs?
NOTE: As part of study to this KI interactions with OAM, if any, will be
determined.
## 5.2 Key Issue #2: Support of network slice related quota on the maximum
number of PDU Sessions
### 5.2.1 General Description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
**Number of connections**
This attribute describes the maximum number of concurrent sessions supported
by the network slice.
Table 5.2.1-1: Number of Connections Table
+--------------------+-----------------------+ | Parameters | | +====================+=======================+ | Value | NA | +--------------------+-----------------------+ | Measurement unit | 100 000 sessions | | | | | | 10 000 000 sessions | +--------------------+-----------------------+ | Example | Scalability attribute | +--------------------+-----------------------+ | Attribute Presence | | +--------------------+-----------------------+ | Mandatory | | +--------------------+-----------------------+ | Conditional | X | +--------------------+-----------------------+ | Optional | | +--------------------+-----------------------+
This key issue will study whether and how to support the quota on the maximum
number of PDU Sessions concurrently established within a network slice
associated with all DNNs, defined by an S-NSSAI. In particular, this KI will
address:
\- How does 5GS know about the maximum number of PDU Sessions that the network
slice can support? Which NF(s) need to know such quota?
\- How does 5GS know about the current number of PDU Sessions being
established in the network slice? Which NF(s) need to know about this
information?
\- Whether and how does 5GS enforce such quota when a UE requests to establish
a new PDU Session to the network slice and that would cause the quota to be
exceeded, e.g. whether 5GS rejects, accepts without guarantee, or accepts with
lower service quality? What is the mechanism needed in 5GS?
\- How does 5GS selectively enable this quota only for Network Slices that
require it?
\- Roaming aspects shall be considered.
NOTE: As part of study to this KI interactions with OAM, if any, will be
determined.
## 5.3 Key Issue #3: limitation of data rate per network slice in UL and DL
per UE
### 5.3.1 General description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
**Maximum downlink throughput**
This attribute describes the maximum data rate supported by the network slice
per UE in downlink. These parameters could be used to offer different contract
qualities like gold, silver and bronze.
Table 5.3.1-1: Maximum downlink throughput Table
+--------------------+----------------------------------+ | Parameters | | +====================+==================================+ | Value | Integer | +--------------------+----------------------------------+ | Measurement unit | kbps | +--------------------+----------------------------------+ | Example | Bronze customer: 50 000 Kbps | | | | | | Silver customer: 400 000 Kbps | | | | | | Gold customer: 1 000 000 Kbps | +--------------------+----------------------------------+ | Tags | Character attribute / Functional | | | | | | KPI | +--------------------+----------------------------------+ | Attribute Presence | | +--------------------+----------------------------------+ | Mandatory | | +--------------------+----------------------------------+ | Conditional | | +--------------------+----------------------------------+ | Optional | X | +--------------------+----------------------------------+
**Maximum uplink throughput per UE**
These parameters could be used in order to offer different contract qualities
like gold, silver and bronze.
Table 5.3.1-2: Maximum uplink throughput per UE Table
+--------------------+----------------------------------+ | Parameters | | +====================+==================================+ | Value | Integer | +--------------------+----------------------------------+ | Measurement unit | kbps | +--------------------+----------------------------------+ | Example | Bronze customer: 10 .000 Kbps | | | | | | Silver customer: 100 000 Kbps | | | | | | Gold customer: 200 000 Kbps | +--------------------+----------------------------------+ | Tags | Character attribute /Performance | | | | | | KPI | +--------------------+----------------------------------+ | Attribute Presence | | +--------------------+----------------------------------+ | Mandatory | | +--------------------+----------------------------------+ | Conditional | | +--------------------+----------------------------------+ | Optional | X | +--------------------+----------------------------------+
There is no way for a PLMN to support per slice data rate limitation for a UE
as so far it is possible to perform per PDU session (session-AMBR) or per UE
data rate limitation (UE-AMBR, see TS 23.501 [2]), but not per network
slice/UE which includes both GBR and non-GBR traffic.
This key issue shall study:
\- Whether and how to limit the data rate of UE which includes both GBR and
non-GBR traffic for a Network Slice, ensuring that the aggregate of the PDU
sessions that use the slice are rate limited to the rate defined for the
Network Slice in DL and UL on both GBR and non-GBR traffic, including:
\- How to signal the rate limits.
\- Impact on subscription data.
\- Any RAN impacts shall be identified and alignment with RAN WGs shall be
pursued if any impacts are identified.
## 5.4 Key Issue #4: Support for network slice quota event notification in a
network slice
### 5.4.1 General Description
This key issue will study whether and how to support event notifications
regarding Network Slice related quotas. This key issue covers Network Slice
related quotas defined in all KIs described in this TR, therefore, there will
not be an independent solution to this key Issue for each of the KIs addressed
in this TR.
In particular, this KI will address:
\- Whether and how an AF can request event notifications from 5GS and be
notified by 5GS on quotas on network slice related attributes? E.g. notifying
the AF whether a quota for certain attribute has reached a specified
threshold, thereby allowing the AF to influence 5GS routing decisions.
NOTE: As part of study to this KI interactions with OAM, if any, will be
determined.
## 5.5 Key Issue #5: Dynamic adjustment to meet the limitation of data rate
per network slice in UL and DL
### 5.5.1 General description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
**Maximum downlink throughput**
This attribute defines the maximum data rate supported by the network slice in
downlink. These parameters can be used to offer different network slice
contract qualities level, e.g. Gold, silver and bronze which have different
maximum throughput values applied to both GBR and non-GBR traffic.
Table 5.5.1-1: Maximum downlink throughput Table
+--------------------+------------------------+ | Parameters | | +====================+========================+ | Value | Integer | +--------------------+------------------------+ | Measurement unit | kbps | +--------------------+------------------------+ | Example | 100 Mbps | | | | | | 20 Gbps | +--------------------+------------------------+ | Tags | Scalability attributes | | | | | | KP | +--------------------+------------------------+ | Attribute Presence | | +--------------------+------------------------+ | Mandatory | | +--------------------+------------------------+ | Conditional | X | +--------------------+------------------------+ | Optional | | +--------------------+------------------------+
**Maximum uplink throughput**
This attribute defines the maximum data rate supported by the network slice in
uplink. These parameters can be used to offer different network slice contract
qualities level, e.g. Gold, silver and bronze which have different maximum
throughput values applied to both GBR and non-GBR traffic.
Table 5.5.1-2: Maximum uplink throughput
+--------------------+------------------------+ | Parameters | | +====================+========================+ | Value | Integer | +--------------------+------------------------+ | Measurement unit | kbps | +--------------------+------------------------+ | Example | 100 Mbps | | | | | | 20 Gbps | +--------------------+------------------------+ | Tags | Scalability attributes | | | | | | KP | +--------------------+------------------------+ | Attribute Presence | | +--------------------+------------------------+ | Mandatory | | +--------------------+------------------------+ | Conditional | X | +--------------------+------------------------+ | Optional | | +--------------------+------------------------+
While it is possible for a PLMN to support per slice data rate limitation e.g.
by configuration, In order to adhere to the GST parameters, the network may
need to make adjustment to network to control aggregate traffic in UL and DL
across the slice. e.g. trigger fairness across UE data rates in the PLMN when
this limit of data rate is reached.
This key issue shall study:
\- Whether and how to adjust per UE data rate limits which apply to both GBR
and non-GBR traffic.
\- Whether and how to adjust total number of UEs operating in the slice.
Editor\'s note: It is FFS whether this attribute will be used at the same time
as the max number of UEs, max bit rate of per UE per slice.
\- Identify other network parameters need to adjust.
## 5.6 Key Issue #6: Constraints on simultaneous use of the network slice
### 5.6.1 General description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
Simultaneous use of the network slice
This attribute describes whether a network slice can be simultaneously used
with other network slices.
Table 5.6.1-1
Parameters
* * *
Value Integer Measurement unit NA 0: Can be used with any network slice 1: Can
be used with network slices with same SST value Example 2: Can be used with
any network slice with same SD value 3: Cannot be used with another network
slice 4-15: Operator defined class Tags Character attribute / Functional
3GPP Rel-15 and Rel-16 specifications do not allow to enforce the constraints
related to simultaneous usage of Network Slices, as defined in this attribute.
This key issue will study:
1) How to enforce the constraints related to simultaneous usage of Network
Slices in the UE and in the network, both in roaming and non-roaming
scenarios.
2) How to ensure that the identified enforcement solution does not negatively
impact the network operations of Rel-15 and Rel-16 5GS deployments.
## 5.7 Key Issue #7: Support of 5GC assisted cell selection to access network
slice
### 5.7.1 General Description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
**Radio spectrum**
This attribute defines the radio spectrum supported by the network slice. This
is important information, as some terminals might be restricted in terms of
frequencies to be used.
Table 5.7.1-1: Radio Spectrum Table
+--------------------+-------------------------------+ | Parameters | | +====================+===============================+ | Value | {String, String, String, ...} | +--------------------+-------------------------------+ | Measurement unit | NA | +--------------------+-------------------------------+ | Example | n1 | | | | | | n77 | | | | | | n38 | +--------------------+-------------------------------+ | Tags | Scalability attribute | +--------------------+-------------------------------+ | Attribute Presence | | +--------------------+-------------------------------+ | Mandatory | | +--------------------+-------------------------------+ | Conditional | | +--------------------+-------------------------------+ | Optional | X | +--------------------+-------------------------------+
**Additional information**
This attribute simply tells which frequencies can be used to access the
network slice. More detailed example of 5G NR operating bands is described in
GSMA 5GJA NG.116 [3].
Today, the UE would have to attempt to select 5G-AN with no awareness as to
whether a 5G-AN support a S-NSSAI till the S-NSSAI is allowed. We need to
study whether and how to support S-NSSAI-aware 5G-AN selection.
This key issue will study how to select a particular cell that can be used to
access the network slice(s) when the operator manages a different range of
radio spectrums per network slice. In particular, this KI will address:
\- How does 5GS steer UEs to a 5G-AN (e.g. a specific frequency band) that can
support the network slices that the UE can use.
\- What information does 5GS need to take a decision to steer UE to a proper
5G-AN.
\- What information should be provided to the UE to select a proper 5G-AN and
how it is sent to the UE.
\- Any RAN impacts shall be identified and alignment with RAN WGs shall be
pursued if any impacts are identified.
NOTE: Work on this Key Issue depends on a LS exchange with SA WG1 and RAN WGs.
## 5.8 Key Issue #8: Area of service: impact on PLMN selection in roaming
### 5.8.1 General description
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
Area of service
This attribute specifies the area where the terminals can access a particular
network slice.
Therefore, the attribute specifies the list of the countries where the service
will be provided. The list is specific to NSPs and their roaming agreements.
If the list comprises more than one entry, roaming agreements between the
HPLMN and the VPLMNs are required.
If a S-NSSAI of the HPLMN can only be used with certain PLMNs in a country
where the UE is roaming, then before a certain S-NSSAI of the HPLMN can be
used the UE should perform selection of one of these PLMNs. It is assumed that
it is possible that:
1) The Preferred PLMNs in the visited country are not necessarily capable to
provide all the possible Network Slices the HPLMN is required to market to
their customers.
2) The PLMNs in the Preferred PLMNs list are not necessarily capable to
provide ubiquitous 5GS coverage hence it is possible that the HPLMN has to use
a non-preferred PLMNs in certain areas and not all of these PLMNs may support
a desired Network Slice.
This key issue will study the handling in the system of S-NSSAIs of HPLMN that
are available only on certain PLMNs.
Today, the UE would have to attempt to select PLMNs with no awareness as to
whether a PLMN support a S-NSSAI of the HPLMN till the S-NSSAI is allowed in
the PLMN or Configured NSSAI of the PLMN is provided. We need to study whether
and how to support S-NSSAI-aware PLMN selection.
NOTE: This key issue is not addressed within Rel-17 timeframe.
# 6 Solutions
## 6.0 Mapping Solutions to Key Issues
Table 6.0-1: Mapping of Solutions to Key Issues
Solution#\'s Solution Titles Key Issue #
* * *
1 PCF measurement based Network Slice SLA control for Maximum Number of UEs
parameter 1 2 Max number of UEs per Network Slice control at registration 1 3
AMF/NSSF based counting of UEs in a Network Slice 1 4 NWDAF enhancements for
supporting of network slice quota on the maximum number of UEs 1 5 NWDAF
enhancements for supporting of network slice quota on the maximum number of
PDU Sessions 2 6 PCF-based counting of PDU Sessions in a Network Slice 2 7
Support of Network Slice SLA for Maximum Number of PDU sessions parameter 2 8
AMF and O&M based solution 1, 2 & 4 9 Monitoring multiple quotas of number of
UEs/PDU Sessions per S-NSSAI at NWDAF 1, 2 & 4 10 Max number of PDU Sessions
per Network Slice control via NSQ function 2 11 Handling maximum number of
sessions using NF status 2 12 NSQ assisted dynamic adjustment of data rate per
slice via NAS signaling 5 13 Limitation of data rate per network slice in UL
and DL per UE 3 14 UE-Slice-AMBR adjustment to meet the limitation of data
rate per Network Slice 5 15 Using Back-off timer 1 16 Slice data rate
enforcement and dynamic adjustment 5 17 Support of radio spectrum attribute by
CN assisted RAN control 7 18 Proactive Slice Quota Management in AMF 1, 2, 4,
5 19 Support of network slice quota control and enforcement 1, 2 & 5 20
Reusing existing QoS model to ensure that to limit the Maximum throughput
UL/DL in a Network slice is not exceeded 3 & 5 21 Limitation of data rate per
network slice in UL and DL per UE without RAN involvement 3 22 Solution on
limitation of data rate per Network Slice in UL and DL per UE 3 23 Network
slice quota event notification 4 24 NSQ assisted dynamic adjustment of data
rate per slice via user plane adjustment 5 25 Enforcement of MBR UL/DL per
S-NSSAI 5 26 Network controlled enforcement of simultaneous usage of network
slices based on user preference 6 27 Network slices simultaneous usage
incompatibility support 6 28 Constraints on simultaneous use of the network
slice 6 29 Providing Operating Band Information in the Configured NSSAI 7 30
Preferred frequency bands in Configured NSSAI 7 31 Steering the UE to a
network slice in a different frequency band 7 32 Operator quota control policy
on the number of PDU session 2 33 Event notification of Slice SLA attributes 4
34 AF interaction for event notification 4 35 Quota enforcement considering
service type 2 36 Handover of a PDU session 2 37 Data rate control per network
slice per UE 3 38 Network slice quota control and enforcement provided by CHF
based solution 1 & 2 39 Support registration for incompatible network slice(s)
in UE\'s current serving RA or different one 6 40 Separate SUPI/GPSI per
isolated set of S-NSSAIs 6 41 Simultaneous use of the network slice via
Configured NSSAI 6 42 UE handling of constraints on simultaneous use of
network slices based on network assistance 6 43 UE Slice Maximum Bit Rate
related event notification 4 44 RAN controlled steering of the UE to a network
slice in a different frequency band 7 45 Compatibility of S-NSSAIs operating
frequency bands with UE Radio Capabilities 7 46 Support RAN-Based UE
redirection with enhanced RRC-level information 7
## 6.1 Solution #1: PCF measurement based Network Slice SLA control for
Maximum Number of UEs parameter
### 6.1.1 Introduction {#introduction-1}
This is a solution to Key Issue #1, \"Support of network slice related quota
on the maximum number of UEs\". This solution assumes the following:
\- It is assumed that Unified Data Repository (UDR) obtains information about
network slice related global quota on the slice SLA attributes, e.g. maximum
number of UEs from OAM to perform the enforcement of SLA of the number of UEs
in a control plane procedure, and supports the functionalities of storage and
retrieval of slice SLA data.
\- It is assumed that 5GC may have multiple enforcement points (e.g. PCF
instances of a Network Slice) to perform the SLA enforcement of network slice
related quota on the maximum number of UEs.
\- It is assumed that multiple enforcement points (i.e. PCF instances) of a
network Slice are controlled by a central enforcement point (i.e. a primary
PCF) of the network slice. The central enforcement point (i.e. a primary PCF
for the S-NSSAI) obtains the global quota of the slice SLA attributes, maximum
number of allowed UEs from UDR.
\- It is assumed the central enforcement point (i.e. the primary PCF of a
given S-NSSAI) supports the functionalities of controlling distribution of the
network slice related quota on maximum number of UEs parameter. The
functionalities include the (re)-distribution of the received global quota of
each slice SLA attribute from UDR to the associated multiple enforcement
points (i.e. secondary PCF instances of the associated S-NSSAI). The central
enforcement point (i.e. the primary PCF) can be found by its multiple
distributed enforcement points (i.e. secondary PCFs ) based on configuration
or the assistance of the UDR.
\- It is assumed that the support of Network Slice related quota on the
maximum number of UEs applies to the associated Network Slice even when
supported by multiple Network Slice instances.
### 6.1.2 High-level Description
**A global slice SLA information is the global quota of the maximum number of
UEs for a given S-NSSAI. A local slice SLA information is the local quota of
the maximum number of UEs for a given S-NSSAI, which is stored at the
enforcement points, e.g. PCF instances. The local quota of a slice SLA
attribute is based on the global quota of a slice SLA attribute.**
**The proposed solution highlights controlling distribution of network slice
related quota at the control plane performed by 5GC NFs: PCF and /UDR. It
considers a primary PCF of a given S-NSSAI for controlling distribution of the
network slice related local quota to its secondary PCF instances. The
secondary PCF instances, also known as AM-PCF for the access and mobility
management, apply/enforce the associated network slice related local quotas in
registration procedure.**
**The mechanisms of distributed management of a network slice attribute
related quota by a central enforcement point (i.e. a primary PCF of a given
S-NSSAI) provides a precise control of slice SLA for maximum number of UEs.**
### 6.1.3 Procedures
#### 6.1.3.1 General
The following figure represents a high-level principles and workflow procedure
of the solution.
Figure 6.1.3-1: A high-level workflow of the solution
1\. UDR in 5GC obtains from OAM global slice SLA information including a
global quota on the maximum number of allowed UEs per S-NSSAI and stores the
global slice SLA information. A primary PCF of a given S-NSSAI obtains the
global quota on the maximum number of allowed UEs from UDR to be used to
perform the distribution of local quota of slice SLA control on the number of
UEs. The UDR store the S-NSSAI and its associated primary PCF.
2\. A Primary PCF provides the local slice SLA information including local
quotas of the maximum number of allowed UEs per S-NSSAI to its secondary PCF
instances (which is for AM policy control) of the related Network Slice
(enforcement points). A primary PCF may keep a shared quota of the maximum
number of allowed UEs per S-NSSAI (e.g. to handle the delegation requests from
its secondary PCFs). The sum of the local quotas to the associated secondary
PCF instances of S-NSSAI shall be less or equal to the network slice related
global quota of the maximum number of UEs per S-NSSAI.
NOTE: This local quota distribution of a S-NSSAI can be performed before a UE
registration request for the S-NSSAI arrives (e.g. pre-configuration) or it
can be triggered by a primary PCF after the registration request(s) for the
S-NSSAI by a secondary PCF. It is also possible that a secondary PCF has no
local quota granted by a primary PCF, e.g. based on the operator\'s policy.
3\. When a UE registers for the network slice, the AMF instance of the network
slice interacts with the proper PCF instance (enforcement point) for the quota
enforcement by re-using existing Registration procedure, i.e. as part of the
AM Policy handling. The allowed S-NSSAI(s) of UE are provided to the PCF when
the AMF interacts with the PCF.
4\. Quota enforcement:
4a. For the S-NSSAI which needs quota control, each PCF instance (enforcement
point) associated to the S-NSSAI maintains the local quota sent by its primary
PCF for the associated number of allowed registered UEs. Each PCF instance
generates a policy counter to track the local quota (i.e. per S-NSSAI the
allowed number of registered UEs, received from primary PCF) and the local
quota status (i.e. per S-NSSAI the actual number of registered UEs). Upon
receiving UE registration request, the PCF instance decides, based on the
local quota status and local quota of the S-NSSAI, the acceptance or rejection
of the UE registration request for that S-NSSAI.
4b. In addition to step 4a, the PCF instance may send a delegation request of
quota enforcement for the indicated S-NSSAI to its primary PCF, e.g. when the
local quota of the S-NSSAI is consumed by the PCF instance or the secondary
PCF has no local quota granted per operator\'s policy. Based on the
global/shared quota status of the S-NSSAI the primary PCF (e.g. interaction
with UDR) decides the acceptance or rejection of the delegation request for
the UE registration on the indicated S-NSSAI and sends a response to the
delegation request with the decision to the PCF.
The PCF based quota enforcement naturally supports the handling of slice SLA
quota exceeding exceptions or exemptions by allowing special policies for the
quota enforcement, e.g. no quota enforcement for the VIP customers or
emergency services (e.g. MPS, MCX or PPDR).
The detail procedure of quota enforcement in registration procedure is
described in clause 6.1.3.2.
5\. Upon PCF decision from step 4, PCF sends the response of the registration
request for S-NSSAI(s) to the serving AMF. If all requested S-NSSAI included
in the UE registration request violates or exceeds the related quotas of the
requested S-NSSAIs the decision for the registration request can be decided
based on, e.g. operator policy in PCF, The PCF sends an indication, e.g.
rejection message, to the serving AMF. The Registration Reject message is sent
to the UE by a serving AMF along with the back-off timer and a suitable cause
value. If the registration request of one or more S-NSSAI is accepted, the AMF
send the Registration Accept message to the UE, which includes the Allowed
S-NSSAI(s), and Rejected S-NSSAI(s) and associated back-off timer if needed.
6\. It is possible at any time the UE initiates the registration procedure to
update the allowed S-NSSAI(s), e.g. adding/removing one S-NSSAI to the Allowed
NSSAI. In that case the AMF compares the updated Allowed NSSAI with the stored
Allowed NSSAI and notifies the status to the PCF. The PCF decides the update
the policy counter(s) of associated S-NSSAI(s).
7\. Independently of registration with quota enforcement procedure in step
1-6, local slice SLA quota re-distribution can be triggered by (secondary) PCF
instances or the primary PCF of the network slice at any time. The detail
procedure of controlling (re)-distribution of local quota is described in
clause 6.1.3.4.
7a. PCF instances (enforcement points) may request their local quotas update
for the indicated S-NSSAI (e.g. when the local quotas are (about to) consumed)
to the primary PCF. The primary PCF based on the received requests may re-
calculate and provide the updated local quota of the maximum number of UEs
associated with the indicated S-NSSAI to one or more PCF instances. The
primary PCF supports mechanisms for the (re)-distribution of local quota(s) to
one or more PCF instances of associated S-NSSAI based on the global quota
status of registered number of UEs of the indicated S-NSSAI.
7b. Independently of step 7a, one or more PCF instances (enforcement points)
shall report/notify the local quota statuses per S-NSSAI to the primary PCF
(e.g. periodically or event based). Based on the reported local quotas the
primary PCF can track the global status of number of registered UEs of
indicated S-NSSAI and provides to one or more PCF instances an updated local
quota (i.e. quota re-distribution) if required. It enables 5GS to know about
the current number of UEs accessing the network slice, i.e. specific S-NSSAI.
8\. Independently of registration with quota enforcement and controlling local
quota (re)-distribution, a de-registration for a S-NSSAI can be triggered by a
UE (or network) any time.
8a. A UE triggers a de-registration request to the serving AMF. The AMF
triggers the update of policy counter to the associated PCF during AM policy
association termination procedure.
8b. Upon receiving a deregistration request from the AMF, the secondary PCF of
the S-NSSAI increases the remaining local quota of the S-NSSAI by one. If the
secondary PCF has no local quota been granted per operator\'s policy, the
secondary PCF may interact with the primary PCF for the quota update.
8c. The response of the deregistration of the S-NSSAI is sent to the UE by the
serving AMF.
The detail procedure of deregistration of a S-NSSAI is described in clause
6.1.3.3.
In the roaming case, the quota control can be in the VPLMN or HPLMN. For more
detail, it is described in clause 6.1.3.5.
#### 6.1.3.2 General Registration with Quota Enforcement
Figure 6.1.3.2-1: General registration procedure with quota update
1\. Registration procedure (steps 1-15) according to clause 4.2.2.2.2 in TS
23.502 [6].
2\. The AMF performs an AM Policy Association Establishment/Modification. The
allowed S-NSSAI(s) and its associated operation (i.e. increment or decrement
of the associated policy counter) is also provided to the PCF.
3\. For each indicated allowed S-NSSAI, per the received allowed S-NSSAI(s)
and its associated operation the PCF verifies the status of the associated
local quota based on its policy counter of a slice parameter, the number of
registered UEs. A policy counter per S-NSSAI indicates the local quota and its
status, which comprises information of remaining number of allowed UEs and
consumed number of UEs. If the number of UEs for the specific S-NSSAI is still
within a valid bound, there is no negative affect for the registration request
of that S-NSSAI.
4a. Upon identification of no quota left or the secondary PCF has no local
quota granted, the PCF instance shall decide for the delegation of quota
enforcement to the secondary PCF. The delegation of quota enforcement message
includes the S-NSSAI and its associated operation.
4b. The primary PCF upon receiving the delegation message, verifies the status
of the shared quota of the requested S-NSSAI and decides the acceptance or
rejection based on the status of a shared quota of each requested S-NSSAI. The
primary PCF has its own policy counter per S-NSSAI to manages the status of a
shared quota in the same way as the secondary PCF per S-NSSAI4c. Based on step
4b, the primary PCF sends a message to its requested PCF instance. The
response message includes an indication to accept the registration or
rejection of the indicated S-NSSAI.
5\. Based on step 3 or 4b, the local quota status is updated (e.g. increase
the associated policy counter value for the indicated S-NSSAI by one).
6\. The PCF instance sends the response of quota enforcement (i.e. acceptance
or rejection) of S-NSSSAI(s), based on step 3 or step 4c, to the AMF instance.
If more than one allowed S-NSSAI is provided to PCF, it is possible that part
of S-NSSAIs is authorized and others are rejected per the action taken in step
3 or 4c.
**Alt A** : UE registration request includes at least one S-NSSAI, which does
not violate or exceed the local quota without delegation of quota enforcement,
or the shared/global quota with delegation of quota enforcement.
7\. Registration procedure (steps 17-22) according to clause 4.2.2.2.2 in TS
23.502 [6].
If one S-NSSAI is rejected, it is included in the rejected NSSAI and
associated with cause value and back-off timer.
If the transaction is not completed successfully, e.g. the registration accept
message is not received by the UE, the incorrect count at the PCF is corrected
when the AMF deregister the UE due to the periodic registration timer expires.
**Alt B:** All the S-NSSAIs in the UE registration request violates or exceeds
the local quota without delegation of quota enforcement, or the shared/global
quota with delegation of quota enforcement.
8\. The Network cleans the related state, e.g. the AMF changes the UE
registration state as deregistered.
9\. The AMF sends a registration reject message to the UE, which includes the
Rejected NSSAI, associated cause value and back-off timer.
In the following when the UE initiates the registration procedure to update
the registered S-NSSAI, e.g. adding one S-NSSAI to the Allowed NSSAI, the AMF
compares the updated Allowed NSSAI with the stored Allowed NSSAI.
If one S-NSSAI is added into the Allowed NSSAI, the AMF checks with the PCF on
whether this Allowed NSSAI is permitted per the status of quota information.
If one S-NSSAI is removed from the Allowed NSSAI, the AMF notifies this status
to the PCF.
#### 6.1.3.3 **Deregistration with Slice SLA Quota Update**
Figure 6.1.3.3-1: Deregistration procedure with Slice SLA quota update.
UE is deregistered, which slice Quota management is required.
1\. UE or network initiates a deregistration procedure according to (steps
1-5) in clause 4.2.2.3.2 or (step 1-4) in clause 4.2.2.3.3 in TS 23.502 [6],
accordingly.
2\. During the AM policy association termination procedure as defined in
clause 4.16.3.2 in TS 23.502 [6], for each S-NSSAI the PCF instance of the
deregistered UE decreases the policy counter value of a given S-NSSAI by one.
Optionally, If the PCF instance of the UE does not have local quota granted,
e.g. as per operator\'s policy, the PCF instance delegates the request of
policy counter update for the deregistration of the S-NSSAI to the primary
PCF. The primary PCF decreases the policy counter value of the indicated
S-NSSAI and sends the response to the secondary PCF.
NOTE: If the PCF instance has local quota granted before, during the de-
registration procedure, the involvement of the primary PCF is not required.
The local quota reporting and re-distribution mechanism described in clause
6.1.3.4 can be used to recover the previously delegated requests to the
primary PCF of the indicated S-NSSAI.
3\. UE or network initiates deregistration procedure according to (steps 6a-8)
in clause 4.2.2.3.2 or (steps 5a-7) in clause 4.2.2.3.3 in TS 23.502 [6],
accordingly.
#### 6.1.3.4 Controlling (re)-distribution of **local quota of Slice SLA
attributes**
Figure 6.1.3.4-1: Controlling (re)-distribution of local quotas of slice SLA
attributes
The procedures of local quota distribution and re-distribution between a
primary PCF and its secondary PCFs of a specific S-NSSAI are described in
Figure 6.1.3.4-1.
1\. Local quota distribution.
Based on the received global quota of maximum number of allowed UEs from UDR,
a primary PCF may proactively distributes the local quotas of maximum number
of allowed registered UEs to the associated PCFs of the specific S-NSSAI. For
example, a local quota is given to the secondary PCF to reduce signalling.
NOTE: How much local quota shall be distributed on each PCF instance of
S-NSSAI can be determined based on Operator policy (e.g. equal local quota
distribution, with respect to the estimated load of PCFs, based on
capabilities of PCF instances, etc.)
2\. For the specific S-NSSAI, Local quota re-distribution - Local quota status
reporting.
2a. The primary PCF subscribes the status of local quotas to its PCF
instances, which may include time interval or an event trigger, e.g. when the
remaining quota is less than 5% of the local quota or above a threshold.
2b. Each PCF instance triggers the report of the status of the local quota to
the primary PCF based on, e.g. events (as described in 2a) or periodically.
2c. Optionally, the primary PCF requests the status of local quotas to the
specific PCF instances.
2d. Upon receiving the request, the requested PCF instances send the statuses
of local quota report to the primary PCF.
3\. For the specific S-NSSAI, Local quota re-distribution - triggering.
3a. The primary PCF may trigger the update of quota re-distribution to the
other secondary PCF instances without the requests of quota update from these
PCFs. The trigger is initiated based on the status of global quota or based on
the local quota updates from other PCF instances of the same S-NSSAI, as
described in 2a.
3b. One or more PCF instances send request(s) for local quota(s) update to the
primary PCF.
3c. Upon receiving of one or more local quota update requests from secondary
PCFs, the primary PCF provides re-distribution of local quotas to one or more
PCF instances.
#### 6.1.3.5 Controlling quota of Slice SLA attribute of Maximum Number of UEs
at Roaming
Depending on the operator\'s requirement, two options for quota control can be
considered.
Quota control at the VPLMN: For the Roaming UEs, it is assumed that the local
quota for the allowed number of Roaming UEs per Subscribed S-NSSAI per home
PLMN is available at vPLMN, e.g. as per SLA or Roaming agreement. The AM-PCF
and primary PCF, in vPLMN of the given S-NSSAI, enforces Roaming UEs\'
requests for the registration or deregistration of the S-NSSAI and updates
(i.e. increase or decrease) the policy counter of the S-NSSAI per home PLMN
accordingly. The procedures of slice SLA quota enforcement and controlling for
Roaming UEs are the same as for clauses 6.1.3.2 - 6.1.3.4 with the additional
HPLMN\'s S-NSSAI information. That means for the same vPLMN only the indicated
HPLMN\'s S-NSSAI(s) need quota control.
Quota control at the HPLMN: If the primary PCF in hPLMN needs to perform
controlling or enforcing the requests of its visiting UEs, the interaction
between AM-PCFs in VPLMN and the primary PCF in hPLMN shall take place ( e.g.
via N24). The further considerations of any necessary interaction between
vPLMN and hPLMN for the roaming UEs will be left out for the normative work.
The H-PLMN primary PCF may also distribute a local quota to the AM-PCF in
VPLMN similar as the primary PCF distribute to the secondary PCF in the non-
roaming case.
#### 6.1.3.6 Network Slice Specific Authentication and Authorization **with
Slice SLA Quota Update**
Figure 6.1.3.6-1: Maximum Number of UEs updates on NSSAA related procedures
The maximum number of registered UEs of S-NSSAI is required to update based on
the related procedures of (re-)authentication and (re-)authorization for the
Network Slice specified by the S-NSSAI. Basically, the maximum number of UEs
of S-NSSAI is updated (i.e. increase or decrease by one in the associated
policy counter) by the following cases.
**Case 1: AMF triggers NSSAA procedure**
\- IF the related S-NSSAI has not been added into the Allowed NSSAI, for
pending Network Slice Specific Authentication and Authorisation (NSSAA) for
the S-NSSAI, AMF triggers NSSAA procedure according to the clause 4.2.9.2(step
1-step 17) in TS 23.502 [6]. If the pending NSSAA procedure is successful for
the S-NSSAI, before EAP success NAS message sent back to the UE, same as the
step 2-6 in clause 6.1.3.2, the AMF requests the AM-PCF to verify the local
quota and increase the policy counter of the S-NSSAI by one.
\- IF the related S-NSSAI has been added into the Allowed NSSAI. if the
authorization fails and the S-NSSAI needs to be removed from the Allowed NSSAI
according to the clause 4.2.9.2(step 1-step 17) in TS 23.502 [6], before EAP
failure NAS message sent back to the UE, same as the step 2 in clause 6.1.3.3,
the AMF requests the serving PCF to decrease the policy counter of the S-NSSAI
by one..
**Case 2: AAA Server (AAA-S) triggers Network Slice-Specific Re-authentication
and Re-authorization procedure**
The AAA-S initiates the re-authentication and re-authorization for the Network
Slice specified by the S-NSSAI for a UE according to the clause 4.2.9.3 in TS
23.502 [6]. If the AAA-S initiated the re-authentication and re-authorization
of the S-NSSAI for the UE results NSSAA failure for the S-NSSAI according to
the clause 4.2.9.2(step 1-step 17) in TS 23.502 [6], before EAP failure NAS
message sent back to the UE, same as the step 2 in clause 6.1.3.3, the AMF
requests the serving PCF to decrease the policy counter of the S-NSSAI by one.
**Case 3: AAA Server (AAA-S) triggers Slice-Specific Authorization
Revocation**
The AAA-S initiates the revocation of authorization for the Network Slice
specified by the S-NSSAI for a UE according to the clause 4.2.9.4 in TS 23.502
[6]. If the AAA-S initiated the revocation of authorization of the S-NSSAI for
the UE is successful, before UCU message sent to the UE, same as the step 2 in
clause 6.1.3.3, the AMF requests the serving PCF to decrease the policy
counter of the S-NSSAI by one.
The serving PCF sends a response message back to the AMF.
### 6.1.4 Impacts on services, entities and interfaces
UDR: obtaining, storing and allowing retrieval of global slice SLA information
including a global quota on the maximum number of registered UEs.
PCF: A primary PCF of a given S-NSSAI for distributing/providing the network
slice related shared/local quota on the maximum number of UEs; and its
secondary PCF to apply/enforce the network slice related local quota on the
number of UEs
AMF: handling of quota enforcement decision on the number of UEs
UE: handling of back-off timer and a (new) cause value as a rejection response
Editor\'s note: Impacts on existing services and interfaces are FFS for the
normative work.
## 6.2 Solution #2: Max number of UEs per Network Slice control at
registration
### 6.2.1 Introduction {#introduction-2}
This solution addresses the below requirements from Key Issue #1: Support of
network slice related quota on the maximum number of UEs.
\- How does 5GS know about the current number of UEs accessing the network
slice? Which NF(s) need to know about this information?
\- Whether and how does 5GS enforce such quota when a UE registers for the
network slice and that would cause the quota to be exceeded.
### 6.2.2 High-level Description
This solution allows to control and restrict the number of UEs per network
Slice identified by S-NSSAI.
Assumptions:
\- This solution assumes that the network slice related quota is managed by a
new function NSQ (Network Slice Quota) for Quota management which is
represented as a new network entity in this solution.
\- The granularity of the NSQ function is per PLMN as the network slice
granularity is per PLMN.
\- For each network slice the NSQ function maintains a list of UE Ids that are
registered with that network slice.
\- The quota for max number of UEs per network slice could be provisioned into
the OAM by the network operator or service provider. The NSQ can retrieve the
quota for max number of UEs per network slice from the OAM and it can also
subscribe for notifications of any updates to the max number of UEs per
network slice quota.
\- The solution is demonstrated for a single S-NSSAI however, it also applies
if the UE registers for multiple S-NSSAIs. In case of multiple S-NSSAIs, the
UE is counted for each S-NSSAI it registers for.
### 6.2.3 Procedures
#### 6.2.3.1 Max number of UEs per Network Slice control at registration
Figure 6.2.3.1-1: Max number of UEs per Network Slice control at registration
1) A UE triggers registration with the network for S-NSSAI.
**2) After successful UE authentication, the AMF sends Nnsq_NSQ_Check Request
message to the NSQ entity in order to check for the number of UEs per network
slice quota availability for S-NSSAI 1. The AMF includes in the message the
UE_Id and the S-NSSAI 1 for which the AMF wants to check the quota
availability. The AMF also includes the control mode parameter set to UE
numbers per network slice, meaning the number of UEs per network slice are to
be monitored and controlled.**
3) The number of UEs per network slice quota check - The NSQ checks whether
the quota for the max number of UEs per S-NSSAI_1 has already been reached. If
the UE is registering for multiple S-NSSAIs, the check is done for each of
them. If the UE_Id is included, the NSQ checks first whether the UE has
already been previously registered for S-NSSAI_1 (i.e. the UE has already been
included in the list of UEs registered with S-NSSAI_1). If the UE Id is
already in the list of UEs registered with S-NSSAI_1, then no quota
availability check is needed, i.e. quota is available.
4) The NSQ returns Nnsq_NSQ_Check Response in which the NSQ includes the
S-NSSAI_1 for which the quota availability check is done and NSQ status
parameter which indicates whether the quota is available or not. The NSQ
status parameter indicates \'no quota available\' if the max number of UEs per
S-NSSAI_1 has already been reached. The NSQ status parameter indicates \'quota
available\' if the max number of UEs per S-NSSAI_1 has not been reached yet.
**5a) If the max number of UEs per S-NSSAI_1 has already been reached and
S-NSSAI-1 is the only network slice the UE wants to register for, the AMF
returns the Registration Reject message to the UE where the AMF includes the
rejected S-NSSAI_1 in the rejected NSSAI list, a reject cause set to \'max
number of UEs per network slice reached\', and optionally a back-off timer. In
case the UE requests the registration for more than one network slice, the AMF
returns the Registration Reject message only when the max number of UEs per
network slice has been reached for all of them.**
5b) If the max number of UEs per S-NSSAI 1 has not been reached yet, the AMF
continues with the registration procedure.
6b) Unless the S-NSSAI_1 is subject to Network Slice Specific Authentication
and Authorisation, the AMF sends Nnsq_NSQ_Update Request message to the NSQ
entity in order to update the NSQ quota for S-NSSAI_1. The AMF includes in the
message the UE_Id, the S-NSSAI_1 and a quota_update_flag set to decrement.
7b) The number of UEs per network slice quota update - If the UE_Id is not in
the list of UEs registered with S-NSSAI_1, **the** NSQ entity adds the UE_Id
to the list of UEs registered for S-NSSAI 1 and increases the number of the
UEs registered for S-NSSAI 1, i.e. decrements the available quota. In case of
multiple S-NSSAIs, the number of UEs per network slice quota update is
repeated for each of them.
8b) The NSQ confirms the NSQ quota update for S_NSSAI 1.
9b) The AMF returns Registration Accept message for S-NSSAI 1to the UE. In
case the UE requests registration for more than one network slice, the AMF
returns in the Allowed NSSAI the network slices for which the max number of
UEs per network slice has not been reached and in the rejected NSSAI the
network slices for which the max number of UEs per network slice has already
been reached along with **a reject cause set to \'max number of UEs per
network slice reached\' and optionally a back-off timer.**
#### 6.2.3.2 Max number of UEs per Network Slice control at Network Slice
Specific Authentication and Authorisation (NSSAA)
Figure 6.2.3.2-1: Max number of UEs per Network Slice control at NSSAA
1) Registration procedure completed with rejection of S-NSSAI_1 for pending
Network Slice Specific Authentication and Authorisation (NSSAA) or the AAA
server triggers Network Slice Specific Re-authentication and Re-authorisation
for S-NSSAI_1.
2) AMF triggers NSSAA procedure for S-NSSAI_1.
3) EAP-messages are exchanged with the UE to authenticate/authorise S-NSSAI_1
according to TS 23.502 [6], clause 4.2.9.2.
If the S-NSSAI_1 status changes (e.g. from rejected to allowed or vice versa)
as a result of the NSSAA procedure, continue with steps 4 to 7.
4) The AMF sends Nnsq_NSQ_Update Request message to the NSQ entity in order to
update the NSQ quota for S-NSSAI_1. The AMF includes in the message the UE_Id,
the S-NSSAI_1 and a quota_update_flag set to decrement if the S-NSSAI_1 status
has changed from rejected to allowed (i.e. the available quota is reduced) or
set to increment if the S_NSSAI_1 status has changed from allowed to rejected
(i.e. the available quota is increased).
5) The number of UEs per network slice quota update - The NSQ entity updates
the available NSQ quota per the quota_update_flag value and adds the UE_Id to
the list of UEs registered for S-NSSAI_1 if the S-NSSAI_1 status has changed
from rejected to allowed or removes the UE_Id from the list of UEs registered
for S-NSSAI_1 if the S-NSSAI_1 status has changed from allowed to rejected. In
case of multiple S-NSSAIs, the number of UEs per network slice quota update is
repeated for each of them.
6) The NSQ confirms the NSQ quota update for S_NSSAI_1.
7) The AMF triggers the UE Configuration Update procedure. The AMF sends the
UE Configuration Update message to the UE in order to update the Allowed NSSAI
list and/or the Rejected NSSAI list.
#### 6.2.3.3 Max number of UEs per Network Slice control at deregistration.
Figure 6.2.3.3-1: Max number of UEs per Network Slice control at
deregistration
1) UE is registered for NSSAI_1. The UE or the network triggers
deregistration.
2) The AMF sends Nnsq_NSQ_Update Request message to the NSQ entity in order to
update the NSQ quota for S-NSSAI_1. The AMF includes in the message the UE_Id,
the S-NSSAI_1 and the quota_update_flag set to increment.
3) The number of UEs per network slice quota update - The NSQ entity removes
the UE_Id from the list of UEs registered for S-NSSAI_1 and decreases the
number of the UEs registered for S-NSSAI_1, i.e. decrements the available
quota. In case of multiple S-NSSAIs, the number of UEs per network slice quota
update is repeated for each of them.
4) The NSQ confirms the NSQ quota update for S_NSSAI_1.
#### 6.2.3.4 Max number of UEs per Network Slice control in roaming.
NOTE: The network slice quota management in roaming is subject to the GSMA
decision.
##### 6.2.3.4.1 Max number of UEs per Network Slice control in roaming by the
vPLMN.
A local quota of \'max number of UEs per network slice\' is allocated to the
vPLMN per SLA agreement and stored in the vNSQ. In roaming, the quota
monitoring and enforcement is done in the vPLMN by the vNSQ entity as per the
description in clause 6.2.3.1 to clause 6.2.3.3.
##### 6.2.3.4.2 Max number of UEs per Network Slice control in roaming by the
hPLMN.
A global quota of \'max number of UEs per network slice\' is allocated to the
hPLMN per SLA agreement and stored in the hNSQ. In roaming, the quota
monitoring and enforcement is done in the hPLMN by the hNSQ entity. Figure
6.2.3.4.2-1 shows the interaction between the vPLMN and the hPLMN.
Figure 6.2.3.4.2-1: Max number of UEs per Network Slice control in roaming by
the hPLMN
1) The vAMF sends Nnsq_NSQ_Check Request message to the hNSQ in order to check
the quota availability for S-NSSAI_1 or sends Nnsq_NSQ_Update Request message
in order to update the quota. The vAMF includes the UE_Id, the S-NSSAI_1 and
the quota_update_flag in case of quota update.
2) The number of UEs per network slice quota check/update - If the request is
for quota availability check, the hNSQ checks whether the \'max number of UEs
per S-NSSAI_1\' has already been reached. If the request is for quota update,
depending on the quota_update_flag value the hNSQ increments or decrements the
available quota and either adds the UE_Id to the list of UEs registered for
S-NSSAI_1 or removes it from the list. In case of multiple S-NSSAIs, the
number of UEs per network slice quota check/update is repeated for each of
them.
3) The hNSQ confirms the quota check/update for S-NSSAI_1.
### 6.2.4 Impacts on services, entities and interfaces
**UE:** A new registration reject cause \'max number of UEs per network slice
reached\' from AMF to the UE.
**AMF:** Interacts with the NSQ for quota management.
**NSQ** : A new NSQ entity/function.
\- Monitors, counts and enforces the number of registered UEs per S-NSSAI
quota.
\- A new service based interaction between AMF and NSQ.
### 6.2.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.3 Solution #3: AMF/NSSF based counting of UEs in a Network Slice
### 6.3.1 Introduction {#introduction-3}
This solution allows an operator to count how many UEs are in a Network Slice
identified by a S-NSSAI in the HPLMN. Then, several actions could be
implemented based on this information that is always up to date. For the
purposes of this solution, we assume a single global quota exists, i.e.
irrespective of roaming. However, with small modification it could be possible
to allot quotas per VPLMN also if that was desirable.
### 6.3.2 High-level Description
When a S-NSSAI of HPLMN is subject to counting, this is indicated in
Subscription Information. It indicates to the NSSF which S-NSSAIs subject to
quota management has been freshly requested so the NSSF knows which S-NSSAI
subject to quota management counter to update. When the Allowed NSSAI is
determined and the AMF is informed by the NSSF of the Allowed NSSAI, it is
assumed the related counters in the NSSF reliable storage has been
successfully updated for all applicable S-NSSAIs subject to quota management.
If a S-NSSAI of the HPLMN is marked for counting, then
1) the AMF shall always invoke the NSSF for decision on Allowed NSSAI for a
UE.
2) The NSSF knows this S-NSSAI is subject to counting so it increments a
counter if the S-NSSAI is allowed for the UE
3) If the quota is overflown the NSSF returns either the UE is allowed to use
the S-NSSAI but with an indication the quota is overflown, or, if that is the
policy, that the S-NSSAI is not allowed with cause \"quota overflown\". An
optional back-off timer may also be provided. The NSSF also may report the
information to the charging subsystem for Network Slice Customer (NSC) level
charging events collection. This information may also be logged in for OAM
Performance / SLA monitoring purposes.
4) When a UE no longer uses a S-NSSAI subject to counting, the AMF indicates
that to the NSSF which then decreases the counter for the S-NSSAI. When the
AMF receives Response from NSSF it is assumed the reliable storage of the NSSF
has been successfully updated.
5) In roaming case, the same behaviour applies, only the decision to allow an
S-NSSAI subject to counting involves the NSSF of the HPLMN, and the event of a
UE no longer using a S-NSSAI of HPLMN is also reported to the HPLMN NSSF. When
the NSSF in VPLMN receives a response message from NSSF in the HPLMN in
response to its request message, it is assumed the reliable storage of the
NSSF in HPLMN for quota management has been successfully updated.
6) When an AMF receives an indication from the NSSF that the S-NSSAI is
allowed but the quota is overflown, then this may trigger the AMF to report
this to the Charging subsystem.
7) Subscription Information may also include the Maximum Value of the counter
that defines the quota for the maximum number of terminals for the S-NSSAI.
This could avoid the need to configure the quotas in the NSSFs. This may help
to provide quotas to V-PLMNs. If a quota level is provided over the roaming
interface, then the VPLMN shall locally enforce the quota but still also
contact the HPLMN NSSF for global quota enforcement.
NOTE: The per VPLMN quota enforcement may be an operator specific attribute
not defined by GSMA NG.116 [3]. For simplicity this is not described in detail
in the procedures here below, but it is quite a straightforward extension.
### 6.3.3 Procedures
#### 6.3.3.1 Registration with S-NSSAIs subject to Quota management/capping
added
Figure 6.3.3.1-1: Registration with added S-NSSAI(s) subject to quota
management
1\. UE registers and indicates requested NSSAI. AMF checks the subscription
information that may indicate subscribed NSSAIs related to slices that are
subject to limitation of the number of UEs per slice.
2\. Some S-NSSAIs in requested NSSAI are subject to quota management based on
checking the subscription data, so NSSF interaction is invoked. The NSSF can
be provided the quota/cap value from subscription data if any is available but
otherwise the NSSF is expected to be configured with the number of UEs allowed
per S-NSSAI subject to quota/capping.
3\. The NSSF is given indication of what S-NSSAIs the UE is requesting which
are subject to counting and quota management (i.e. there is a new S-NSSAI
requested by the UE and subscription data indicates that it is subject to
quota management).
4\. The NSSF increments counters for all applicable S-NSSAIs and if any is
hitting the limit the NSSF may exclude them from allowed NSSAI or allow them
with indication that quota is reached. If some S-NSSAI subject to quota are
rejected and appropriate cause code is used, and an optional back-off timer
may be indicated. The NSSF may report some S-NSSAIs reaching quota to charging
subsystem.
5\. Only after step 4 is concluded by updating any counter data successfully,
the NSSF communicates the results of step 4 and may include any back-off timer
for the rejected S-NSSAI(s). The AMF may report some S-NSSAIs reaching quota
to charging subsystem.
6\. The AMF communicates the Allowed NSSAI and any rejected S-NSSAI(s) with
the cause code related to quota capping and any back-off timer. The UE may
present to the User or a local policy manager in the UE information related to
quota being reached for the user or UE to take any action (e.g. decide whether
to continue to use the slice services or not).
NOTE: In roaming case the VPLMN S-NSSAI mapping to HPLMN S-NSSAI is used to
decide which VPLMN S-NSSAI to subject to quota management and then the VPLMN
NSSF needs to interact with the HPLMN NSSF as described below in clause
6.3.3.4.
#### 6.3.3.2 Registration with S-NSSAIs subject to Quota management/capping
abandoned
Figure 6.3.3.2-1: Registration with abandoned S-NSSAI(s) subject to quota
management
1\. UE registers.
2\. Some S-NSSAIs in the previous Allowed NSSAI are missing from the Requested
NSSAI: those that are subject to capping need to be reported to NSSF so the
NSSF decrements the related counters.
3\. NSSF is invoked and explicit indication is given about S-NSSAI(s) subject
to capping that have been abandoned.
4\. NSSF decrements counters as needed for the S-NSSAI(s) that have been
abandoned.
5\. Only after step 4 is successfully concluded the NSSF provides Allowed
NSSAI and other usual information.
6\. The registration is accepted with the Allowed NSSAI.
NOTE: In roaming case the VPLMN S-NSSAI mapping to HPLMN S-NSSAI is used to
decide which VPLMN S-NSSAI to subject to quota management and then the VPLMN
NSSF needs to interact with the HPLMN NSSF as described below in clause
6.3.3.4.
#### 6.3.3.3 Deregistration with S-NSSAIs subject to Quota management /
capping
Figure 6.3.3.3-1: Deregistration with S-NSSAI(s) subject to quota management
1\. The UE deregisters, or the AMF decides to perform a Network-initiated
Deregistration procedure (either explicit or implicit) for the UE.
2\. If any of the S-NSSAIs in the Allowed NSSAI were subject to quota/capping
the AMF needs to report these have been abandoned by the UE in this step: note
there is no Requested NSSAI in this case.
3\. The NSSF decrements the counter for these S-NSSAIs.
4\. Only after step 3 is successfully concluded by updating counter data, the
NSSF acknowledges the message in step 2.
NOTE: In roaming case the VPLMN S-NSSAI mapping to HPLMN S-NSSAI is used to
decide which VPLMN S-NSSAI to subject to quota management and then the VPLMN
NSSF needs to interact with the HPLMN NSSF as described below in clause
6.3.3.4.
#### 6.3.3.4 V-NSSF to H-NSSF interaction for S-NSSAIs of HPLMN subject to
Quota management / capping.
Figure 6.3.3.4-1: V-NSSF-H-NSSF interactions
1\. The V-NSSF detects that certain S-NSSAIs of HPLMN mapping to V-PLMN
S-NSSAI are subject to quota management/capping and so the addition or removal
of a UE to the Network slice needs to be reported to the HPLMN NSSF.
2\. The V-NSSF reports the additions/removal of a UE to certain HPLMN
S-NSSAIs.
3\. The H-NSSF updates the counters as necessary and detects whether any
action is required for certain S-NSSAIs.
4\. Only after step 3 successfully updates counter data in the HPLMN NSSF, the
HPLMN NSSF responds to the Message in step 2 and if for any S-NSSAI of HPLMN
there was any action required, then this is communicated to the V-NSSF
alongside any back-off timer.
5\. The V-NSSF reports to the AMF with any action for S-NSSAIs of VPLMN
mapping to S-NSSAIs of the H-PLMN as per step 4.
### 6.3.4 Impacts on services, entities and interfaces
Editor\'s note: This clause describes impacts to existing services and
interfaces.
**UE:** handling of new cause codes.
**AMF:** handling of quota management as specified above.
**NSSF:** handling of quota management as specified above.
## 6.4 Solution #4: NWDAF enhancements for supporting of network slice quota
on the maximum number of UEs
This solution is for Key Issue #1.
### 6.4.1 Introduction {#introduction-4}
This solution described
\- how the NWDAF knows about the maximum number of UEs that the network slice
can support;
\- how the NWDAF knows about the current number of UEs accessing the network
slice;
\- how the NWDAF supports other network functions in 5GC to enforce such quota
when a UE registers for the network slice and that would cause the quota to be
exceeded;
\- how the 5GS selectively enable this quota only for Network Slices that
require it.
NOTE: This solution has a dependency with a FS_eNA_ph2.
This solution uses the following principles:
\- The O&M system knows about the maximum number of UEs that the network slice
can support.
\- When the O&M system instantiates a network slice constituent of several
network functions, a network function of the network slice has an information
available at the network function (e.g. NWDAF, AMF, PCF), whether a certain
S-NSSAI is subject to a network slice quota checking on the maximum number of
UEs. Such information can be made available, for example, as part of its local
configuration or operator\'s policy.
### 6.4.2 High-level Description
#### 6.4.2.1 NWDAF awareness of network slice quota on the maximum number of
UEs
As already described in the Key Issue#1, the network slice quota on the
maximum number of UEs is already specified by the attribute of \"Number of
Terminals\" in the GST. Normally, such quota information is available in the
OAM, before the OAM instantiates a network slice instance. Hence, it is
possible that the NWDAF gets such quota information from the OAM.
#### 6.4.2.2 NWDAF awareness of current number of UEs concurrently registered
to a network slice
NWDAF collects the information of the current number of UEs accessing a
network slice by one of the two following means:
\- AMF: Due to the fact that the AMF knows about the Allowed NSSAI of each UE,
the AMF could easily have an information of how many UEs are successfully
registered to which network slice identified by a S-NSSAI. The NWDAF gets the
current number of UEs being served by the AMF for a network slice. In case,
there are multiple AMFs serving for a network slice, the NWDAF would need to
collect this information from all AMFs of a S-NSSAI. See clause 6.4.3.2.1 for
details.
\- OAM: As specified in clause 6.2.1 and 6.2.2 in TS 28.554 [4], the OAM has
the Registered Subscribers of Single Network Slice Instance through AMF
(RegisteredAMFSubNbrMean) KPI that describes the total number of subscribers
that are registered to a network slice. The NWDAF may subscribe to the OAM to
get an up-to-date information on the total number of UEs successfully
registered to the network slice. See clause 6.4.3.2.2 for details.
#### 6.4.2.3 NWDAF supports for network slice quota enforcement by other 5GC
NFs
To support the 5GC to enforce such quota, in particular, when a UE registers
for the network slice and that would cause the quota to be exceeded, the NWDAF
has to provide the information on whether the network slice quota has been
reached to the AMF, which can be done by allowing the AMF to either
\- subscribe on the information whether the network slice quota has been
reached (see clause 6.4.3.3); or
\- request the NWDAF to check whether the network slice has been reached
before accepting the UE to be registered in the network slice (see clause
6.4.3.4).
Once the AMF gets such information from the NWDAF, if the network slice quota
has been reached is indicated, then the AMF sends to the UE the Rejected
S-NSSAI (see clause 6.4.3.5).
### 6.4.3 Procedures
#### 6.4.3.1 Procedure for network slice quota information from OAM
Figure 6.4.3.1-1 shows the procedure to get the network slice quota
information from the OAM.
1\. NWDAF requests the OAM for the network slice quota information of a
network slice identified by a S-NSSAI.
2\. OAM responses to the NWDAF with the maximum number of UEs that the slice
can support.
NOTE: To get an up-to-date network slice quota information, the NWDAF may
subscribe to the OAM to the event notification for a change of the network
slice quota information by using a similar subscribing procedure for data
collection from the OAM as specified in clause 6.2.3.2 in TS 23.288 [5].
Figure 6.4.3.1-1: Collection of network slice quota information from OAM
#### 6.4.3.2 Procedure for collection the information of the current number of
UEs registered to a network slice
##### 6.4.3.2.1 Procedure for collection the information of the current number
of UEs registered to a network slice from AMF
Figure 6.4.2.2.1-1 shows the procedure to get the information of the current
number of UEs registered to a network slice from the AMF.
1\. Namf_EventExposure_Subscribe Request (Input): NWDAF subscribes to the
event notification(s) related to the services provided by the AMF for
obtaining the number of UEs, which has successfully registered to a network
slice. The Request may include an Event Filter to specify when the AMF should
send a notification. Event Filter could be an indication that every time when
the number of UEs being served by the AMF for the specific network slice has
changed.
2\. Namf_EventExposure_Subscribe Response (Output): AMF responses to NWDAF if
the subscription is success or not.
3\. Data processing: AMF service producer prepares the data.
4\. Namf_EventExposure_Notify (notifyFileReady): Depending on the Event Filter
being included in the subscription request message sent in step 1, the AMF
notifies the NWDAF that the data file, which contain the information of the
current number of UEs successfully registered to a network through the AMF is
ready
Figure 6.4.3.2.1-1: Collection of current number of UEs registered to a
network slice information from AMF
##### 6.4.3.2.2 Procedure for collection the information of the current number
of UEs registered to a network slice from OAM
Figure 6.4.3.2.2-1 shows the procedure to get the information of the current
number of UEs registered to a network slice from the OAM.
NOTE 1: This procedure is only applicable, when the NWDAF does not collect the
information for the current number of UEs registered to the network slice from
AMF as described in clause 6.4.3.2.1.
1\. Subscribe (Input): NWDAF subscribes to the notification(s) related to the
services provided by the management service producer for obtaining the
Registered Subscribers of Single Network Slice Instance through AMF
(RegisteredAMFSubNbrMean) KPI. The Subscription Request may include an Event
Filter to specify when the OAM should send a notification. For example, the
Event Filter could indicate whenever there is a change of the number of UEs
for this network slice.
2\. Subscribe (Output): management service producer responses to NWDAF if the
subscription is success or not.
3\. Data processing: management service producer prepares the data.
4\. Notification (notifyFileReady): Depending on the Event Filter being
included in the subscription request message sent in step 1, the management
service producer notifies the data file is ready.
NOTE 2: Procedure for data collection from OAM is already specified in clause
6.2.3.2 in TS 23.288 [5], but so far not for collecting the Registered
Subscribers of Single Network Slice Instance through AMF
(RegisteredAMFSubNbrMean) KPI.
Figure 6.4.3.2.2-1: Collection of current number of UEs registered to a
network slice information from OAM
#### 6.4.3.3 Procedure for subscribing and notifying the event of network
slice quota reached status
Figure 6.4.3.3-1 shows the procedure for subscribing and notifying the event
of network slice quota reached status provided by the NWDAF.
1\. The NF subscribes to or cancels subscription to analytics information by
invoking the Nnwdaf_AnalyticsSubscription_Subscribe/
Nnwdaf_AnalyticsSubscription_Unsubscribe service operation. The request for
subscription includes an Analytics ID related to the NW Slice Quota for a
particular network slice identified by a S-NSSAI.
2\. If NF subscribes to analytics information, the NWDAF notifies the AMF with
the analytics information by invoking Nnwdaf_AnalyticsSubscription_Notify
service operation. The analytics information comprises of an indication
whether the network slice quota has been reached.
NOTE: Procedure for subscribe/unsubscribe the analytics information provided
by the NWDAF is already specified in clause 6.1.1.1 in TS 23.288 [5], but not
for notifying whether the network slice quota has been reached. Hence, either
a new Analytics ID or a new Analytics Filter is needed to be introduced.
The examples of NF are AMF, PCF.
Figure 6.4.3.3-1: Procedure for subscribing and notifying the event of network
slice quota reached
#### 6.4.3.4 Procedure for requesting for the network slice quota reached
status
Figure 6.4.3.4-1 shows the procedure for the NF to request for the network
slice quota reached status information.
1\. The NF requests analytics information of whether the network slice quota
has been reached by invoking Nnwdaf_AnalyticsInfo_Request service operation.
In this request message, the NF may ask for the network slice quota reached
status of multiple S-NSSAIs that are subject to network slice quota checking.
2\. The NWDAF responds with analytics information to the NF indicating whether
the network slice quota has been reached for the S-NSSAI(s).
NOTE: Procedure for analytics request by any 5GC NF is already specified in
clause 6.1.2.1 in TS 23.288 [5], but not specifically to provide the analytics
information whether the network slice quota has been reached. Hence, either a
new Analytics ID or a new Analytics Filter is needed to be introduced.
The examples of NF are AMF, PCF.
Figure 6.4.3.4-1: Procedure for request for the network slice quota reached
status
#### 6.4.3.5 Procedure for network slice quota checking in non-roaming or
local breakout roaming case
Figure 6.4.3.5-1 shows the procedure for the network slice quota checking for
non-roaming case or local breakout roaming case. For local breakout roaming
case, it is assumed that the NWDAF in V-PLMN receives the network slice quota
information from the OAM in V-PLMN.
1\. UE sends a Registration Request to register to the network including a
Requested NSSAI.
2\. Based on the local configuration or operator\'s policy available at the
AMF, the AMF checks whether the requested S-NSSAI(s) is subject to network
slice quota checking. For the S-NSSAI that is subject to network slice quota
checking, the AMF checks whether the network slice quota reached status
information is available at the AMF. If the network slice quota reached status
information is not available at the AMF, the AMF sends a request to the NWDAF
for getting the network slice quota reached status information as described in
clause 6.4.3.4.
NOTE: The AMF may subscribe for the event of network slice quota reached
status for the S-NSSAI(s), which the AMF supports, from the NWDAF by using the
procedure described in clause 6.4.3.3, and hence, the AMF does not need to
send a request to the NWDAF for getting the network slice quota reached status
information every time when the AMF receives a Registration Request from a UE.
3\. For a requested S-NSSAI that is subject to network slice quota checking
and the network slice quota has been reached, the AMF considers this S-NSSAI
as a Rejected S-NSSAI. In the response to the UE, the AMF sends this Rejected
S-NSSAI along with the rejection cause indicating that the network slice quota
has been reached. In addition, the AMF may include a back-off timer for this
Rejected S-NSSAI, so that the UE does not perform a request again for this
Rejected S-NSSAI while the back-off timer is running.
For a requested S-NSSAI that is subject to network slice quota checking and
the network slice quota has not been reached yet, the AMF considers this
S-NSSAI as an Allowed S-NSSAI. In case, no S-NSSAI can be provided in the
Allowed NSSAI, then the AMF provides an empty Allowed NSSAI.
Figure 6.4.3.5-1: Procedure for request for the network slice quota checking
in non-roaming or in LBO roaming case
#### 6.4.3.6 Procedure for the network slice quota checking in home-routed
roaming case
Figure 6.4.3.6-1 shows the procedure for network slice quota checking for the
home-routed roaming case.
1\. UE sends a Registration Request to register to the network including a
Requested NSSAI.
2\. Based on the local configuration or operator\'s policy available at the
V-AMF, the V-AMF checks whether a S-NSSAI is subject to network slice quota
checking. For the S-NSSAI that is subject to network slice quota checking, the
V-AMF checks whether the network slice quota reached status information for
the S-NSSAI is available at the V-AMF. If available, steps 3 to 6 are skipped
for the S-NSSAI. If not available, steps 3 to 6 are performed.
3\. The V-AMF sends a Npcf_AMPolicyControl_Create Request message to the
V-PCF. The message includes, for example, requested V-PLMN S-NSSAI(s), its
mapping requested H-PLMN S-NSSAI(s) and an indication of \"Network Slice Quota
Reached Status Checking\" for the S-NSSAI(s) subject to the network slice
quota checking.
4\. If the V-PCF does not have the network slice quota reached status
information for the H-PLMN S-NSSAI(s) subject to the network slice quota
checking, the V-PCF sends a Npcf_NetworkSliceQuotaCheck Request message to the
H-PCF including the H-PLMN S-NSSAI(s) subject to the network slice quota
checking.
5\. For each H-PLMN S-NSSAI subject to network slice quota checking, the H-PCF
checks whether the network slice quota reached status information is available
at the H-PCF. If not available, the H-PCF sends a request to the H-NWDAF to
get the network slice quota reached status information as described in clause
6.4.3.4. The H-PCF responds to the V-PCF and includes the information whether
the network slice quota has been reached for the H-PLMN S-NSSAI subject to
network slice quota checking.
NOTE: The H-PCF may subscribe for the event of network slice quota reached
status from the H-NWDAF by using the procedure described in clause 6.4.3.3,
and hence, the H-PCF does not need to send a request to the H-NWDAF for
getting the network slice quota reached status information every time when the
H-PCF receives a Npcf_NetworkSliceQuotaCheck Request message from the V-PCF.
6\. In the Npcf_AMPolicyControl_Create Response message, the V-PCF forwards
the information whether the network slice quota has been reached for the
S-NSSAI(s) subject to the network slice quota checking.
7\. For a requested V-PLMN S-NSSAI that is subject to network slice quota
checking and the network slice quota has been reached, the V-AMF considers
this requested V-PLMN S-NSSAI as a Rejected S-NSSAI. In the response to the
UE, the V-AMF sends this Rejected S-NSSAI along with the rejection cause
indicating that the network slice quota has been reached. In addition, the
V-AMF may include a back-off timer for this Rejected S-NSSAI, so that the UE
does not perform a request again for this Rejected S-NSSAI while the back-off
timer is running.
For a requested V-PLMN S-NSSAI that is subject to network slice quota checking
and the network slice quota has not been reached yet, the AMF considers this
S-NSSAI as an Allowed S-NSSAI.
If no S-NSSAI can be provided in the Allowed NSSAI, then the AMF provides an
empty Allowed NSSAI.
Figure 6.4.3.6-1: Procedure for network slice quota checking in Home-Routed
roaming case
### 6.4.4 Impacts on services, entities and interfaces
UE: handling of new cause codes.
AMF: handling of quota management as specified above.
NWDAF: handling of quota management as specified
PCF: Supporting retrieval the network slice quota checking across PLMNs.
## 6.5 Solution #5: NWDAF enhancements for supporting of network slice quota
on the maximum number of PDU Sessions
This solution is for Key Issue #2.
### 6.5.1 Introduction {#introduction-5}
This solution described:
\- how the NWDAF knows about the maximum number of PDU Sessions that the
network slice can support;
\- how the NWDAF knows about the current number of PDU Sessions accessing the
network slice;
\- how the NWDAF supports other network functions in 5GC to enforce such quota
when a UE requests to establish a new PDU Session to the network slice and
that would cause the quota to be exceeded;
\- how the 5GS selectively enable this quota only for Network Slices that
require it.
This solution uses the following principles:
\- The O&M system knows about the maximum number of PDU Sessions that the
network slice can support.
\- When the O&M system instantiates a network slice constituent of several
network functions, a network function of the network slice has an information
available at the network function (e.g. NWDAF, SMF, PCF), whether a certain
S-NSSAI is subject to a network slice quota checking on the maximum number of
PDU Sessions. Such information can be made available, for example, as part of
its local configuration or operator\'s policy.
### 6.5.2 High-level Description
#### 6.5.2.1 NWDAF awareness of network slice quota on the maximum number of
PDU Sessions
As already described in the Key Issue#2, the network slice quota on the
maximum number of PDU Sessions is already specified by the attribute of
\"Number of Connections\" in the GST. Normally, such quota information is
available in the OAM, before the OAM instantiates a network slice instance.
Hence, it is possible that the NWDAF gets such quota information from the OAM.
#### 6.5.2.2 NWDAF awareness of current number of PDU Sessions concurrently
established within a network slice
NWDAF collects the information of the current number of PDU Sessions
established within a network slice by one of the two following means:
\- SMF: Since the SMF is a network function entity that accepts or rejects a
PDU Session Establishment request sent by the UE, the SMF does have an
information of how many PDU Sessions that are successfully established within
a network slice identified by a S-NSSAI. The NWDAF gets the current number of
PDU Sessions being served by the SMF for a network slice, for example, by
means of subscribing/notify method or request/response method. In case, there
are multiple SMFs serving for a network slice, the NWDAF needs to collect this
information from all SMFs. See clause 6.5.3.2.1 for details.
\- OAM: As specified in clause 5.3.1.4 in TS 28.552 [7], the OAM has the
information on the number of PDU sessions successfully created by the SMF per
S-NSSAI (SM.PduSessionCreationSuccNSI.SNSSAI). The NWDAF may subscribe to the
OAM to get an-up-to-date information on the total number of PDU Sessions
successfully established within the network slice. See clause 6.5.3.2.2 for
details.
#### 6.5.2.3 NWDAF supports for network slice quota enforcement by other 5GC
NFs
To support the 5GC to enforce such quota, in particular, when a UE requests
for a PDU Session Establishment in a network slice and that would cause the
quota to be exceeded, the NWDAF has to provide the information on whether the
network slice quota has been reached to the SMF. This can be done by allowing
the SMF to either:
\- subscribe on the information whether the network slice quota has been
reached (see clause 6.5.3.3); or
\- request the NWDAF to check whether the network slice quota has been reached
before accepting the PDU Session to be established in the network slice (see
clause 6.5.3.4).
Once the SMF gets such information from the NWDAF, if the network slice quota
has been reached is indicated, then the SMF sends to the UE the PDU
Establishment Reject message (see clause 6.5.3.5). In case of home routed PDU
Session, based on condition, either V-SMF or H-SMF rejects the sessions based
on inputs from serving PLMN NWDAF i.e. V-SMF gets the information from V-NWDAF
and H-SMF gets the information from H-NWDAF, respectively.
### 6.5.3 Procedures
#### 6.5.3.1 Procedure for network slice quota information from OAM
Figure 6.5.3.1-1 shows the procedure to get the network slice quota
information from the OAM.
1\. NWDAF requests the OAM for the network slice quota information of a
network slice identified by a S-NSSAI.
NOTE 1: Frequency of the request is not for every second to avoid signalling,
it is only when a NWDAF determine to get the status e.g. only after reaching
certain threshold.
2\. OAM responses to the NWDAF with the maximum number of PDU Sessions that
the slice can support
NOTE 2: Procedure for data collection from OAM specified in clause 6.2.3.2 in
TS 23.288 [5] can also be used for providing such network slice quota
information which need to confirm with SA WG5.
Figure 6.5.3.1-1: Collection of network slice quota information from OAM
#### 6.5.3.2 Procedure for collection the information of the current number of
PDU Sessions established in a network slice
##### 6.5.3.2.1 Procedure for collection the information of the current number
of PDU Sessions established in a network slice from SMF
Figure 6.5.3.2.1-1 shows the procedure to get the information of the current
number of PDU Sessions registered in a network slice from the SMF. The trigger
condition is based on local policy of the NWDAF e.g. NWDAF may trigger
subscription upon an OAM notification.
1\. Nsmf_EventExposure_Subscribe Request (Input): NWDAF subscribes to the
event notification(s) related to the services provided by the SMF for
obtaining the number of PDU Sessions, which has successfully been established
in a network slice
2\. Nsmf_EventExposure_Subscribe Response (Output): SMF responses to NWDAF if
the subscription is successful or not.
3\. Data processing: SMF service producer prepares the data.
4\. Nsmf_EventExposure_Notify (notifyFileReady): SMF notifies the NWDAF that
the data file, which contain the information of the current number of PDU
Sessions successfully established in a network by the SMF, is ready
Figure 6.5.3.2.1-1: Collection of current number of PDU Sessions established
in a network slice information from SMF
##### 6.5.3.2.2 Procedure for collection the information of the current number
of PDU Sessions successfully established in a network slice quota from OAM
Figure 6.5.3.2.2-1 shows the procedure to get the information of the current
number of PDU Sessions successfully established in a network slice from the
OAM.
1\. Subscribe (Input): NWDAF subscribes to the notification(s) related to the
services provided by the management service producer for obtaining the
information on the number of PDU sessions successfully created by the SMF per
S-NSSAI (SM.PduSessionCreationSuccNSI.SNSSAI).
2\. Subscribe (Output): management service producer responses to NWDAF if the
subscription is success or not.
3\. Data processing: management service producer prepares the data.
4\. Notification (notifyFileReady): management service producer notifies the
data file is ready.
NOTE: Procedure for data collection from OAM is already specified in clause
6.2.3.2 in TS 23.288 [5], but so far not for collecting the information on the
number of PDU sessions successfully created by the SMF per S-NSSAI
(SM.PduSessionCreationSuccNSI.SNSSAI).
Figure 6.5.3.2.2-1: Collection of current number of PDU Sessions established
in a network slice information from OAM
#### 6.5.3.3 Procedure for subscribing and notifying the event of network
slice quota reached status
Figure 6.5.3.3-1 shows the procedure for subscribing and notifying the event
of network slice quota reached provided by the NWDAF.
1\. Based on the local policy, the SMF subscribes to or cancels subscription
to analytics information by invoking the
Nnwdaf_AnalyticsSubscription_Subscribe/
Nnwdaf_AnalyticsSubscription_Unsubscribe service operation. The request for
subscription includes an Analytics ID related to the NW Slice Quota for a
particular network slice identified by a S-NSSAI.
2\. If SMF subscribes to analytics information, the NWDAF notifies the SMF
with the analytics information by invoking Nnwdaf_AnalyticsSubscription_Notify
service operation. The analytics information comprises of an indication
whether the network slice quota has been reached.
NOTE: Procedure for subscribe/unsubscribe the analytics information provided
by the NWDAF is already specified in clause 6.1.1.1 in TS 23.288 [5], but not
for notifying whether the network slice quota has been reached. Hence, either
a new Analytics ID or a new Analytics Filter is needed to be introduced.
Figure 6.5.3.3-1: Procedure for subscribing and notifying the event of network
slice quota reached
#### 6.5.3.4 Procedure for requesting for the network slice quota reached
status
Figure 6.5.3.4-1 shows the procedure for the SMF to request for the network
slice quota reached status information.
1\. The SMF requests analytics information of whether the network slice quota
has been reached by invoking Nnwdaf_AnalyticsInfo_Request service operation.
NOTE 1: Frequency of the request is not for every PDU Session Request, it is
only when a SMF determine to get the status e.g. only after reaching certain
threshold.
2\. The NWDAF responds with analytics information to the SMF indicating
whether the network slice quota has been reached.
NOTE 2: Procedure for analytics request by any 5GC NF is already specified in
clause 6.1.2.1 in TS 23.288 [5], but not specifically to provide the analytics
information whether the network slice quota has been reached. Hence, either a
new Analytics ID or a new Analytics Filter is needed to be introduced.
Figure 6.5.3.4-1: Procedure for request for the network slice quota reached
status
#### 6.5.3.5 Procedure for network slice quota checking in non-roaming or
local breakout roaming case
Figure 6.5.3.5-1 shows the procedure for network slice quota checking for non-
roaming case or local breakout roaming case. This procedure is also applying
for the LBO scenario i.e. based on the analytical information from the
V-NWDAF, the V-SMF determine the quota for a UE.
1\. UE sends a PDU Session Establishment Request to the SMF in order to
establish a new PDU Session in a network slice identified by a S-NSSAI.
2\. Based on the local configuration or operator\'s policy available at the
SMF, the SMF checks whether the requested S-NSSAI is subject to network slice
quota checking. For the S-NSSAI that is subject to network slice quota
checking, the SMF checks the network slice quota reached status as described
in clause 6.5.3.4.
NOTE: The SMF may subscribe for the event of network slice quota reached
status for the S-NSSAI(s), which the SMF supports, from the NWDAF by using the
procedure described in clause 6.5.3.3, and hence, the SMF does not need to
send a request to the NWDAF for getting the network slice quota reached status
information every time when the SMF receives a PDU Session Establishment
Request from the UE.
3\. For the requested S-NSSAI that is subject to network slice quota checking
and the network slice quota has been reached, the SMF sends a PDU Session
Establishment Reject to the UE and optionally with the cause value indicating
the network slice quota has been reached. In addition, the SMF may include a
back-off timer for this PDU Session Establishment Reject message, so that the
UE does not perform a PDU Session Establishment request again for this S-NSSAI
while the back-off timer is running.
Figure 6.5.3.5-1: Procedure for request for the network slice quota checking
in non-roaming or in LBO roaming case
#### 6.5.3.6 Procedure for network slice quota checking in home-routed roaming
case
Figure 6.5.3.6-1 shows the procedure for network slice quota checking for the
home-routed roaming case.
1\. UE sends a PDU Session Establishment Request to the V-SMF in order to
establish a new PDU Session in a network slice identified by a S-NSSAI.
2\. Based on the local configuration or operator\'s policy available at the
V-SMF, the V-SMF checks whether the requested S-NSSAI is subject to network
slice quota checking. For the S-NSSAI that is subject to network slice quota
checking, the SMF checks whether the network slice quota reached status
information for the S-NSSAI is available at the V-SMF. If available, steps 3-5
are skipped. If not available, steps 3 to 5 are performed.
3\. V-SMF invokes the Nsmf_PDUSession_Create Request to the H-SMF as described
in step 6, Figure 4.3.2.2.2-1, TS 23.502 [6].
4\. Similar to step 2, based on the local policy or operator\'s policy
available at the H-SMF, the H-SMF checks whether the network slice quota
reached status information is available at the H-SMF and whether the network
slice quota has been reached. If the network slice quota reached status
information is not available at the H-SMF, the H-SMF sends a request to the
H-NWDAF to get the network slice quota reached status information as described
in clause 6.5.3.4.
5\. For the requested S-NSSAI that is subject to network slice quota checking
and the network slice quota has been reached, the H-SMF invokes the
Nsmf_PDUSession_Create Response with a rejection cause indicating the network
slice quota has been reached to the V-SMF as described in step 13, Figure
4.3.2.2.2-1, TS 23.502 [6].
6\. The V-SMF sends a PDU Session Establishment Reject to the UE and
optionally with the cause value indicating the network slice quota has been
reached. In addition, the V-SMF may include a back-off timer for this PDU
Session Establishment Reject message, so that the UE does not perform a PDU
Session Establishment request again for this S-NSSAI while the back-off timer
is running.
Figure 6.5.3.6-1: Procedure for request for the network slice quota reached
status
### 6.5.4 Impacts on services, entities and interfaces
**UE:** Handling of new cause codes.
**SMF:** Handling of quota management as specified above.
**NWDAF:** Handling of quota management as specified
## 6.6 Solution #6: PCF-based counting of PDU Sessions in a Network Slice
### 6.6.1 Introduction {#introduction-6}
This solution addresses KI#2 and may be applicable to KI#1 also with the
constraint the UE has a PDU session established at least. It allows an
operator to count how many PDU Sessions are in a Network Slice identified by a
S-NSSAI in the HPLMN. Then, several actions could be implemented based on this
information that is always up to date. For the purposes of this solution, we
assume a single global quota exists, i.e. irrespective of roaming. In this
Solution description PCF may also refer to PCF set when this is the deployed
approach in a PLMN. Also, this solution can be used to count the number of UEs
in a Network Slice that have at least one PDU Session established. Finally, in
scenarios where restricting the number of PDU Sessions/UEs per S-NSSAI by also
counting the UEs that have moved to or are in the EPS, this solution allows
that by letting the PGW-C/SMF interact with PCF for this purpose.
### 6.6.2 High-level Description
When a S-NSSAI of HPLMN is subject to PDU Sessions counting, this is indicated
in subscription information. This subscription information may also include a
quota (e.g. to avoid configuration of PCF especially in roaming LBO case).
If a S-NSSAI of the HPLMN is marked for counting, then:
1) the SMF shall always invoke the PCF to perform the counting and indicate
the counting is required to the PCF (and a quota if included in subscription
data).
2) The PCF increments a counter if the PDU Session is allowed to be
established. If the PCF counts the number of UEs/slice with one established
PDU Session, then the counting of UEs happens at first PDU Session established
in the Network Slice
3) The PCF is configured with the indication that whether the EPS and 5GS are
under the unified quota management or not. In case both of EPS and 5GS are
subject to unified quota management, a PLMN may be configured to keep the
counters also when the PDU Session of a network slice becomes a PDN connection
in EPS upon mobility. In this case the counter can be incremented also when
the PDN connection corresponding to a certain S-NSSAI is established in the
EPS or is handed over to EPS. In case only 5GS is subject to quota management,
the counters will be decremented when the PDU Session becomes a PDN connection
and incremented when a PDN connection becomes a PDU session. The counters will
keep the same when a PDN connection is established in the EPS.
4) If the quota is overflown the PCF returns either the PDU Session is allowed
but with an indication the quota is overflown, or, if that is the policy, that
PDU Session is rejected e.g. with cause indicating \"quota overflown\". An
optional back-off timer may also be provided. The PCF may also report the
information to the charging subsystem for Network Slice Customer (NSC)level
charging events collection. This information may also be logged in for OAM
Performance / SLA monitoring purposes.
5) When the PDU Session Establishment fails or an ongoing PDU Session is
released for a S-NSSAI subject to counting, the SMF indicates that to the PCF
which then decrements the PDU Sessions counter for the S-NSSAI. The counter of
UEs per Network Slice is decremented at PCF only if this was the last PDU
Session in the Network Slice for the UE.
6) In roaming case, only the PCF of the HPLMN performs the counting (involved
via VPLMN PCF in LBO case, or via SMF of HPLMN in Home Routed case).
7) When an SMF receives an indication from the PCF that the PDU Session is
allowed but the quota is overflown, then this may trigger the SMF to report
this to the Charging Subsystem.
8) Subscription information may also include the Maximum Value of the counter
that defines the quota for the maximum number of connections for the S-NSSAI.
This could avoid the need to configure the quotas in the PCFs. This may help
to provide quotas to V-PLMNs in LBO case. If a quota level is provided over
the roaming interface, then the VPLMN shall locally enforce the quota for LBO
case only, but also contact the HPLMN PCF for global quota enforcement.
9) if more than one PCF is used for a S-NSSAI in a PLMN, then
a) One PCF in the Network Slice is elected to act as primary (either by
configuration or other means).
b) The other PCFs in the Network Slice contact the primary PCF to increment or
decrement the counters.
c) In the LBO roaming case the primary PCF in the V-PLMN for the handling of
the V-PLMN S-NSSAI subject to quota management according the mapping of the
V-PLMN S-NSSAI to the H-PLMN S-NSSAI is the one that interacts with the HPLMN
PCF for the S-NSSAI.
NOTE: The per VPLMN quota enforcement may be an operator specific attribute
not defined by GSMA NG.116 [3]. For simplicity this is not described in detail
in the procedures here below, but it is quite a straightforward extension.
### 6.6.3 Procedures
#### 6.6.3.1 General
The clauses in this clause provide examples of how PCF based counting can
work. It is of course possible some PDU Sessions release is triggered by
Network-initiated Deregistration or other RM events, like a S-NSSAI no longer
being available. However, the conceptual operation is aligned with what is
shown in these example procedures here below in clauses 6.6.3.2 and 6.6.3.3.
While this is not in scope of this study, the same procedure could also be
used to count the number of PDU Sessions per DNN if an operator wants to do
so. The procedures may also be used to count the number of UEs per S-NSSAI
subject to the condition these establish at least one PDU Session.
A PLMN may be configured to count PDU Sessions/PDN Connections associated to
one S-NSSAI,
The interworking related procedures impacted are not shown but they require
some PCF+PCRF interactions at PDN Connection Establishment, Release and at
mobility to/from EPS to implement the counting policies of the PLMN.
Specifically: if counting applies across EPS and 5GS, there is no need to
inform the PCF when a PDU session becomes a PDN connection and vice versa, but
there is a need to do so if the PLMN policy is to count only PDU sessions in
5GS. Similarly, if a PDN Connection Established in EPS is not counted,
PCF+PCRF interaction for counting is not needed at PDN Connection
Establishment.
#### 6.6.3.2 PDU Session Establishment with S-NSSAIs subject to Quota
management/capping
Figure 6.6.3.2-1: PDU Session Establishment from TS 23.502 [6] with S-NSSAI
subject to quota management
In step 4: the SMF can inspect the subscription data and detect the PDU
Session belongs to an S-NSSAI subject to quota management/capping.
At step 7b (i.e. during SM policy association establishment only (see clause
4.16.4 of TS 23.502 [6]) which must be executed if the SMF detects the PDU
Session is subject to quota management) the PCF can increment a counter for
the PDU Session if it allows the PDU Session (despite the quota is overflown)
or the quota is not yet overflown. A counter of UE with active PDU Session in
the Network Slice can also be incremented if this is the first PDU Session in
the Network Slice.
If the quota is overflown, the PCF then can provide to the SMF actions
including back-off timers, limitations of number of PDU Sessions per
UE/S-NSSAI, a cause code for rejection, or just indication the quota is
overflown. The PCF can log the overflow events for OAM purposes, and also
provide a charging event at Network Slice Customer level.
If quota cap is reached and the PDU Session is rejected by PCF, an optional
back-off timer can be applied, i.e. the SMF creates a PDU SESSION
ESTABLISHMENT REJECT message including a suitable cause code and, if provided,
a back-off timer value (optional) and a 5GSM cause value.
The 5GSM cause value may correspond to #69 \"insufficient resources for
specific slice\" (for S-NSSAI only) or a new cause code may be used. Then the
PDU SESSION ESTABLISHMENT REJECT message is sent to the AMF. The AMF sends an
DL NAS TRNSPORT message carrying the PDU SESSION ESTABLISHMENT REJECT message.
The PCF may indicate to the SMF and the SMF to the UE that a limitation needs
to be applied to the number of PDU Sessions per UE in the S-NSSAI to enforce
some fairness across UEs in the Network Slice.
NOTE 1: In LBO roaming case the VPLMN S-NSSAI mapping to HPLMN S-NSSAI is used
to decide which VPLMN S-NSSAI to subject to quota management and then the
VPLMN PCF needs to interact with the HPLMN PCF as described below in clause
6.6.3.4.
NOTE 2: if this procedure is applied at DNN level (outside the scope of this
Study) or in addition to S-NSSAI level, then cause codes for rejection may
correspond to 26 \"insufficient resources\" (for DNN only), #67 \"insufficient
resources for specific slice and DNN\".
#### 6.6.3.3 PDU Session Release with S-NSSAIs subject to Quota
management/capping
Figure 6.6.3.3-1: PDU Session Release from TS 23.502 [6] with S-NSSAI subject
to quota management
When a PDU Session for which a PDU Session per S-NSSAI limitation applies is
released, then SMF shall trigger a policy association termination in step 12:
this decrements a counter in PCF for the S-NSSAI. for PCF initiated case, the
counter is decreased by the PCF and the PDU session Release is triggered at
step 1b. A counter of UE with active PDU Session in the Network Slice can also
be decremented if this is the last PDU Session in the Network Slice.
NOTE: In roaming case the VPLMN S-NSSAI mapping to HPLMN S-NSSAI is used to
decide which VPLMN S-NSSAI to subject to quota management and then the VPLMN
PCF needs to interact with the HPLMN PCFF as described below in clause
6.6.3.4.
#### 6.6.3.4 V-PCF to H-PCF interaction for S-NSSAIs of HPLMN subject to Quota
management/capping
Figure 6.6.3.4-1: V-PCF-H-PCF interactions
1\. The V-PCF detects that the S-NSSAI of HPLMN mapping to V-PLMN S-NSSAI of
the PDU Session is subject to quota management/capping and so
establishment/release of PDU Sessions needs to be reported to the HPLMN PCF
for quota management purposes.
2\. The V-PCF reports the establishment/release of PDU Session to H-PCF. The
H-PCF for the S-NSSAI is discovered as in the case of SMF discovery and
selection.
3\. The H-PCF updates the counters as necessary and detects whether any action
is required.
4\. If any action required, then this is communicated to the V-PCF alongside
any back-off timer and/or number of PDU Sessions limitation per (UE+S-NSSAI).
5\. The V-PCF reports to the SMF any quota management related action as per
step 4.
#### 6.6.3.5 PCF - Primary PCF interactions when multiple PCFs are used in a
Network Slice
Figure 6.6.3.4-1: PCF -Primary PCF interactions
1\. The PCF detects that the S-NSSAI of HPLMN mapping to V-PLMN S-NSSAI of the
PDU Session is subject to quota management/capping and so
establishment/release of PDU Sessions needs to be reported to the Primary PCF
for quota management purposes.
2\. The PCF reports the establishment/release of PDU Session to Primary-PCF.
3\. The Primary-PCF updates the counters as necessary and detects whether any
action is required.
4\. If any action required, then this is communicated to the PCF alongside any
back-off timer and/or number of PDU Sessions limitation per (UE+S-NSSAI).
5\. The PCF reports to the SMF any quota management related action as per step
4.
#### 6.6.3.6 Quota management during 5GS to EPS handover
Figure 6.6.3.6-1: Quota management during 5GS to EPS handover
0\. The PCF is configured by e.g. OAM ,with PDU session quota management
parameters of a network slice: (1) The maximum PDU session quota allowed for a
network slice; (2) The indication of whether the EPS and 5GS are subject to
unified PDU session quota management.
1-2a-2c. The same step as 4.11.1.2.1 in TS 23.502 [6].
3\. When the SMF determines that the network slice needs to do PDU session
quota management, it sends an SM Quota Policy Association Establishment
message to the PCF, the parameters of which include the parameters of the SM
Policy Association Establishment message and an indication that quota
management is required. The PCF executes counting of PDU sessions as follows:
(1) If the quota in EPS and 5GS is subject to unified management:
\- When a UE handovers from 5GS (PDU session) to EPS (PDN connection), the
number of PDU sessions of the counter in the PCF remains unchanged;
\- When the PDN connection is released, then decrements the PDU Sessions
counter for the S-NSSAI;
\- When there is a new PDN connection establishment request:
a) If the number of PDU sessions in the network slice does not reach the
quota, then increments the PDU Sessions counter for the S-NSSAI;
b) If the number of sessions in the network slice has reached the quota, there
are two processing methods:
\- allow the PDN connection to be established, then increments the PDU
Sessions counter for the S-NSSAI, but with an indication the quota is
overflown; or
\- the PDN connection is rejected with cause indicating \"quota overflown\".
(2) If the quota in 5GS is managed independently:
\- When a UE handovers from 5GS (PDU session) to EPS (PDN connection), then
decrements the PDU Sessions counter for the S-NSSAI.
\- When the PDN connection which is handover to EPS is released or new PDN
connection is established in EPS, the number of PDU sessions in the counter
remains unchanged.
4-11. Complete the subsequent session establishment and handover process,
refer to clause 4.11.1.2.1 of TS 23.502.
#### 6.6.3.7 Quota management during EPS to 5GS handover
Figure 6.6.3.7-1: Quota management during EPS to 5GS handover
0\. The PCF is configured by e.g. OAM, with PDU session quota management
parameters of a network slice: (1) The maximum PDU session quota allowed for a
network slice; (2) The indication of whether the quota in EPS and 5GS is
subject to unified management.
1-4. Step 1-4 the same as 4.11.1.2.2 in TS 23.502 [6].
5\. SMF+ PGW-C may initiate SMF initiated SM Policy Modification towards the
PCF. When the SMF determines that the network slice needs to do quota
management , it sends an SM Quota Policy Association Establishment message to
the PCF, the parameters of which include the parameters of the SM Policy
Association Establishment message and an indication that quota management is
required. The PCF executes counting of PDU sessions as follows:
(1) If the quota in EPS and 5GS is subject to unified management:
\- When a UE handovers from EPS (PDN connection ) to 5GS (PDU session), he
number of PDU sessions of the counter in the PCF remains unchanged;
\- When a PDU session is released, then decrements the PDU Sessions counter
for the S-NSSAI;
\- When there is a new PDU session establishment request:
a) If the number of sessions in the network slice does not reach the quota,
the session establishment is allowed, then increments the PDU Sessions counter
for the S-NSSAI;
b) If the number of sessions in the network slice has reached the quota, there
are two processing methods:
\- allow the PDU session establishment, increments the PDU Sessions counter
for the S-NSSAI, but with an indication the quota is overflown; or
\- the PDU session is rejected with cause indicating \"quota overflown\".
(2) If the quota in 5GS is managed independently:
\- When a UE handovers from EPS (PDN connection) to 5GS (PDU session):
a) If the number of sessions in the network slice does not reach the quota
limitation, the handover is allowed, then increments the PDU Sessions counter
for the S-NSSAI;
b) If the number of sessions in the network slice has reached the quota
limitation, then the handover request is rejected with cause indicating
\"quota overflown\".
\- When the PDU session handed over to 5GS is released, then decrements the
PDU Sessions counter for the S-NSSAI.
6-10. The same step as 4.11.1.2.2 in TS 23.502 [6].
### 6.6.4 Impacts on services, entities and interfaces
**UE:** Handling of new cause codes.
**SMF:** Handling of quota management as specified above.
**PCF:** Handling of quota management as specified above.
## 6.7 Solution #7: Support of Network Slice SLA for Maximum Number of PDU
sessions parameter
### 6.7.1 Introduction {#introduction-7}
This is a solution to Key Issue #2, \"Support of network slice related quota
on the maximum number of PDU sessions\". This solution assumes the following:
\- It is assumed that Unified Data Repository (UDR) obtains information about
network slice related global quota on the maximum number of PDU sessions to
perform the enforcement of SLA of the number of PDU sessions in a control
plane procedure, and supports the functionalities of storage and retrieval of
slice SLA data.
\- It is assumed that 5GC may have multiple enforcement points (e.g. PCF
instances of a Network Slice) to perform the SLA enforcement of network slice
related quota on the maximum number of PDU sessions.
\- It is assumed that multiple enforcement points (i.e. PCF instances) of a
network Slice are controlled by a central enforcement point (i.e. a primary
PCF) of the network slice. The central enforcement point (e.g. a primary PCF)
obtains the global quota of the slice SLA attributes, maximum number of PDU
sessions from UDR.
\- It is assumed that the support of Network Slice related quota on the
maximum number of PDU sessions applies to the associated Network Slice even
when supported by multiple Network Slice instances.
\- It is assumed that PCF instance makes policy decisions based on information
obtained from a central enforcement point (i.e. primary PCF) and local policy
in the PCF.
\- It is assumed the central enforcement point (i.e. the primary PCF of a
given S-NSSAI) supports the functionalities of controlling distribution of the
network slice related quota on slice SLA parameters. The functionalities
include the (re)-distribution of the received global quota of each slice SLA
attribute from UDR to the associated multiple enforcement points (e.g.
secondary PCF instances of the associated Network Slice). The central
enforcement point (i.e. the primary PCF) can be found by its multiple
distributed enforcement points (i.e. secondary PCFs) based on configuration or
the assistance of the UDR.
### 6.7.2 High-level Description
A global slice SLA information is the global quota of the **maximum number of
PDU sessions** for a given S-NSSAI, which is stored at the UDR. A local slice
SLA information is local quota of the **maximum number of PDU sessions** for a
given S-NSSAI, which is stored at the enforcement points, e.g. PCF instances.
The proposed solution highlights a distributed management of network slice
related quota at the control plane performed by 5GC NFs: PCF and UDR. It
considers a primary PCF of a given S-NSSAI for controlling distribution of the
network slice related local quota to PCF instances. The secondary PCF
instances, also known as SM-PCF for the session management apply/enforce the
associated network slice related local quota in PDU session establishment
procedure.
**The mechanisms of distributed management of a network slice attribute
related quota by a central enforcement point (e.g. a primary PCF of a given
S-NSSAI) provides a precise control of slice SLA for maximum number of PDU
sessions.**
At PDU session establishment, when local quota is not to be exceeded, PCF
decides to accept the PDU session establishment request.
At PDU session establishment, when the quota is to be exceeded or no local
quota is granted, a PCF makes a decision to delegate the request to the
associated central enforcement point (i.e. a primary PCF) of the S-NSSAI
whether to accept or reject the current PDU session establishment request. The
PCF decides the request according to the operator policy, and/or quota status.
The operator policy of acceptance or rejection of the PDU session
establishment request are based on the following information:
\- ARP in authorized default QoS;
\- DNN;
\- Internal Group Id;
\- PDU Session Type;
\- Access Type;
\- User Location Information.
### 6.7.3 Procedures
#### 6.7.3.1 General
The following figure represents a high-level principles and workflow of the
solution.
Figure 6.7.3-1: A high-level workflow of the solution
1\. UDR in 5GC obtains and stores from OAM global slice SLA information
including a global quota on the maximum number of allowed PDU sessions, to be
used to perform the SLA control on the number of PDU sessions. A primary PCF
of a given S-NSSAI obtains global quota from UDR to control the global quota
distribution into local quotas to the secondary PCF instances. The UDR store
the S-NSSAI and its associated primary PCF.
2\. A primary PCF provides the local slice SLA information including local
quotas of the maximum number of allowed PDU sessions per S-NSSAI to its
secondary PCF instances (which is for SM policy control) of the related
Network Slice (enforcement points). The sum of the local quota to the
associated secondary PCF instances of S-NSSAI shall be less or equal to the
network slice related the global quota of the maximum number of PDU sessions
per S-NSSAI.
3\. When a UE requests for a PDU session establishment for the network slice,
the SMF instance of the network slice interacts with the proper PCF instance
(enforcement point) for the quota enforcement by re-using existing PDU session
establishment procedure, i.e. as part of the SM Policy handling.
4\. Quota enforcement:
4a. Each PCF instance (enforcement point) associated to the S-NSSAI maintains
the local quota sent by its primary PCF for the associated number of
established PDU sessions. Each PCF instance generates a policy counter to
track the local quota and the local quota status (i.e. per S-NSSAI the actual
number of established PDU sessions and whether the quota is to be exceeded or
not). Upon receiving UE request for a PDU session establishment, the PCF
instance decides the acceptance or rejection of the UE request for a PDU
session establishment, based on local quota status, local quota and the
operator policy.
4b. Alternative to step 4a, the PCF instance may send a delegation request of
quota enforcement for the indicated S-NSSAI to its primary PCF, e.g. when the
local quota is to be consumed by the PCF instance. Based on the global quota
status of the S-NSSAI, the primary PCF decides the acceptance or rejection of
the delegation request for the UE request for a PDU session establishment on
the indicated S_NSSAI and sends a response to the delegation request with the
decision. The PCF instance checks the decision of delegation request and
decides the acceptance or rejection of the PDU session establishment request.
If there is no local quota left and the response to the delegation request
comprises rejection, the acceptance or rejection of the PDU session
establishment shall be based on the operator policy.
The PCF based quota enforcement naturally supports the handling of slice SLA
quota exceeding exceptions or exemptions by allowing special policies for the
quota enforcement, e.g. no quota enforcement for the VIP customers or
emergency services (e.g. MPS, MCX or PPDR).
The detail procedure of quota enforcement in PDU session establishment
procedure is described in clause 6.7.3.2
5\. Upon PCF decision from step 4, if a UE request for a PDU session
establishment violates or exceeds the local quota, the PCF sends an
indication, e.g. rejection message (e.g. based on the operator policy), to the
serving SMF. The PDU session establishment Reject message is sent to the UE by
the serving SMF (via the serving AMF) along with the back-off timer and a
suitable cause value.
6\. Controlling local quota re-distribution
6a. PCF instances (enforcement points) may request their local quotas update
for the indicated S-NSSAI (e.g. when their local quotas are (about to be)
consumed) to its primary PCF. The primary PCF based on the received requests
may re-calculate and provide the updated local quota of the maximum number of
PDU sessions associated with the indicated S-NSSAI to one or more PCF
instances. The primary PCF supports mechanisms for the (re)-distribution of
local quota(s) to one or more PCF instances of associated S-NSSAI based on the
global quota status of established number of PDU sessions of the indicated
S-NSSAI.
6b. Independently of step 6, one or more PCF instances (enforcement points)
may report/notify the local quota status to its primary PCF (e.g. periodically
or event based). Based on the reported local quota the primary PCF can track
the global status of number of established PDU sessions and provides to one or
more secondary PCF instances an updated local quota (i.e. quota re-
distribution) if required. It enables 5GS to know about the current number of
PDU sessions accessing the network slice.
The detail procedure of controlling (re)-distribution of local quota is
described in clause 6.1.3.4.
7\. A PDU session release for a S-NSSAI can be triggered by a UE (or network)
any time.
7a. A UE triggers a PDU session release request to the serving SMF (via AMF).
The SMF triggers the update of policy counter to the associated PCF during SM
Policy Association Termination procedure.
7b. Upon receiving a PDU session termination request from the SMF, the
secondary PCF of the S-NSSAI increases the remaining local quota of the
S-NSSAI by one. If the secondary PCF has no local quota been granted per
operator\'s policy, the secondary PCF may interact with the primary PCF for
the quota update.
7c. The response of the PDU session release request of the S-NSSAI is sent to
the UE by the serving SMF, via AMF.
The detail procedure of the PDU session release of a S-NSSAI is described in
clause 6.7.3.3.
In the roaming case, the quota control can be in the VPLMN or HPLMN. For more
detail, it is described in clause 6.7.3.5.
#### 6.7.3.2 **PDU Session establishment and Slice SLA Quota Update**
Figure 6.7.3.2-1: UE requested PDU session establishment procedure with quota
enforcement
1\. UE requested PDU session establishment procedure (steps 1-7a) according to
clause 4.3.2.2.1 in TS 23.502 [6].
2\. The SMF performs an SM Policy Association Establishment/Modification,
which include the corresponding S-NSSAI.
3\. The PCF instance creates and verifies the policy counter of a slice
parameter, the number of successfully established PDU sessions, for a specific
S-NSSAI. A policy counter per S-NSSAI indicates the local quota, local quota
status, which comprises information of available maximum number of allowed PDU
sessions and consumed number of PDU sessions. If the local value of a number
of allowed PDU sessions for the specific S-NSSAI is still within a valid
bound, there is no negative affect in PDU session establishment procedure.
4a. Upon identification of no quota left or the secondary PCF has no local
quota granted per operator\'s policy, the PCF instance shall decide for the
delegation of quota enforcement and sends the request to the primary PCF. The
delegation of quota enforcement message includes the S-NSSAI and its
associated operation.
4b. The primary PCF upon receiving the delegation message, verifies the status
of the shared quota of the requested S-NSSAI and decides the acceptance or
rejection based on the status of a shared quota of each requested S-NSSAI. The
primary PCF manages the shared quota in the same way as the secondary PCF
(i.e. by updating a policy counter).
4c. The primary PCF sends a message to requesting PCF instance allowing such
instance to be accepted or reject the PDU Session establishment. The response
message includes an indication to accept or reject the PDU session
establishment request for the indicated S-NSSAI.
5\. The policy counter value for the PDU session of the indicated S-NSSAI is
updated (e.g. increase the associated policy counter value for the indicated
S-NSSAI by one).
6\. The PCF instance sends the response of quota enforcement, based on step 3
or step 4c, to the SMF instance.
NOTE: PCF may also accept the UE request for a PDU session establishment
although the quota has been exceeded. In this case, the PCF may include an
indication of the quota exceed to the charging system.
**Alt A** : UE request for a PDU session establishment does not violate or
exceed the local quota without delegation of quota enforcement, or the global
quota with delegation of quota enforcement.
7\. PDU Session establishment procedure (steps 8-14) according to clause
4.3.2.2.1 in TS 23.502 [6] is executed.
**Alt B:** UE request for a PDU session establishment violates or exceeds the
local quota without delegation of quota enforcement, or the global quota with
delegation of quota enforcement
8\. UE request for a PDU session establishment is rejected.
#### 6.7.3.3 **PDU Session Release and Slice SLA Quota Update**
Figure 6.7.3.3-1: UE requested PDU session release procedure with quota
enforcement
UE is established for a PDU session associated with a specific S-NSSAI, which
slice quota management is required.
1\. UE or network initiates a PDU session release procedure according to
(steps 1-11) in clause 4.3.4.2 in TS 23.502 [6]. Then SMF invokes an SM Policy
Association Termination procedure.
2\. During the SM policy association termination procedure as defined in
clause 4.16.6 in TS 23.502 [6], the PCF instance of the UE decreases the
policy counter value.
Optionally, if the PCF instance of the UE does not have local quota granted,
e.g. as per operator\'s policy, the PCF instance delegates the request of
policy counter update for the PDU session release of the S-NSSAI to the
primary PCF. The primary PCF decreases the policy counter value of the
indicated S-NSSAI and sends the response to the secondary PCF.
NOTE: If the PCF instance has local quota granted before, during the PDU
Session release procedure, the involvement of the primary PCF is not required.
The quota re-distribution mechanism described in clause 6.1.3.4 can be used to
recover the global quota at the primary PCF of a specific S-NSSAI.
3\. UE or network initiates a PDU session release procedure according to
(steps 13-15) in clause 4.3.4.2 in TS 23.502 [6].
#### 6.7.3.4 Controlling (re)-distribution of local quota of Slice SLA
attributes
The procedure for the controlling (re)-distribution of local quota of slice
SLA attribute on maximum number of allowed PDU sessions for a specific S-NSSAI
is the same as per clause 6.1.3.4.
#### 6.7.3.5 Controlling quota of Slice SLA attribute of Maximum Number of PDU
sessions at Roaming
In LBO scenario for the Roaming UEs, the quota of the PDU session of a S-NSSAI
can be controlled by the VPLMN.
In HR scenario, the interaction between V-PCF (i.e. SM-PCF) and the primary
PCF in hPLMN shall take place.
##### 6.7.3.5.1 Controlling quota of maximum number of PDU session for Roaming
UEs by VPLMN
For the Roaming UEs, in LBO scenario, it is assumed that the local quota for
the allowed number of PDU sessions for Roaming UEs per Subscribed S-NSSAI per
home PLMN is available at vPLMN, e.g. as per SLA or Roaming agreement. The
V-PCF, primary or secondary instance in vPLMN of the given S-NSSAI, enforces
Roaming UEs\' requests for the PDU session establishment or release of the
S-NSSAI and updates (i.e. increase or decrease) the policy counter of the
S-NSSAI per home PLMN accordingly. The procedures of slice SLA quota
enforcement and controlling for Roaming UEs for the allowed number of PDU
sessions are the same as for clauses 6.7.3.2 - 6.7.3.4 and with the additional
HPLMN\'s S-NSSAI information. That means for the same vPLMN only the indicated
HPLMN\'s S-NSSAI(s) need quota control.
##### 6.7.3.5.2 Controlling quota of maximum number of PDU session for Roaming
UEs by HPLMN
For the Roaming UEs, in HR scenario, the interaction between SM-PCF (i.e.
secondary) and the H-PCF (primary) shall take place.
In this case, the procedure for a roaming UE\'s request to a serving PLMN on a
PDU session establishment or release of S-NSSAI is the same as the procedures
for non-roaming UEs according to the steps 1-2 of clause 6.7.3.2 or the step 1
of clause 6.7.3.3, respectively. Then the interaction between SM-PCF (i.e.
secondary) and the H-PCF (primary) shall take place for control and
enforcement of the Roaming UEs\' requests, e.g. via N24. The response of the
request to the roaming UE is handled by the serving PLMN as for steps 7-8
according to clause 6.7.3.2 for the PDU session establishment or as per step 3
according to clause 6.7.3.3 for the PDU session release, respectively.
### 6.7.4 Impacts on services, entities and interfaces
UDR: obtaining, storing and allowing retrieval of global slice SLA information
including a global quota on the maximum number of allowed PDU sessions.
PCF: A primary PCF of a given S-NSSAI for distributing/providing the network
slice related shared/local quota of the maximum number of PDU sessions and its
secondary PCF to apply/enforce the network slice related local quota on the
number of PDU sessions. When the quota is to be exceeded, PCF may reject or
accept new PDU session establishment requests based on the quota status and
operator policy.
SMF: handling of UE request for a PDU session establishment per the PCF
decision.
UE: handling of back-off timer and a (new) cause value as a rejection
response.
## 6.8 Solution #8: AMF and O&M based solution
### 6.8.1 Introduction {#introduction-8}
This solution is for Key Issue #1, 2 and 4.
This solution uses the following principles:
1\. The O&M system knows about the maximum number of UEs that the network
slice can support in a specific area, and any differentiation level that
require separate reporting e.g. for charging;
2\. The O&M system knows about the maximum number of PDU Sessions per Network
Slice that the network slice can support in a specific area, and any
differentiation level that require separate reporting e.g. for charging;
3\. The O&M system creates and Life Cycle Manages AMF Sets according to the
knowledge from 1 and 2;
4\. The AMF Sets enforces and reports to O&M system the requirements of 1 and
2
5\. The HPLMN provides any restriction related to the usage of the Network
Slice to roaming partners as part of SLAs.
6\. Roaming partners (VPLMNs) report Network Slice usage to HPLMN together
with other business related reporting (i.e. such reporting is outside of SA2
scope).
Editor\'s note: Whether to support a dynamic setting of counting between PLMNs
is FFS dependent on GSMA requirements.
### 6.8.2 High-level Description
The solution uses the principles from clause 6.8.1 with the following
additional clarifications:
\- Which AMF within the AMF Set to report to O&M can be e.g. one AMF
configured to report when a threshold is reached or that the AMF handling the
event causing the threshold to be reached also reports to O&M
### 6.8.3 Procedures
#### 6.8.3.1 Network Slice orchestration
The O&M system creates and LCM the Network Slice, and creates and manages AMF
Sets to cover the complete area that the Network Slice is to cover. The AMF
Sets are provisioned and possibly updated with the information:
\- Area to be supported by the AMF Set and the Network Slice;
\- Maximum number of UEs that the Network Slice supports;
\- Thresholds for AMF Set to report to the O&M system of number of UEs using
the Network Slice;
\- Maximum number of PDU Sessions per Network Slice that the network slice can
support in a specific area; and
\- Thresholds for AMF Set to report to the O&M system of number of PDU
Sessions per the Network Slice.
\- Guidance to the AMF Set on whether to reject additional UEs / PDU Sessions
if thresholds are exceeded
Figure 6.8.3.1-1 shows the AMF Sets that covers the area of the Network Slice.
Figure 6.8.3.1-1: AMF Sets covering the area of the Network Slice
If there are multiple AMF Sets supporting same S-NSSAI to be counted for the
same area, then the O&M can provide a subset of the maximum value for the
S-NSSAI to each AMF Set and indicate that the AMF Set reports to the O&M when
the max is reached. When the AMF Set reports to the O&M, the O&M may provide a
larger maximum value to the AMF Set in case the real maximum for the S-NSSAI
has not been reached yet. Such logic leverage on the already proposed logic
that O&M can update the AMF Sets and set thresholds when to report to the O&M.
#### 6.8.3.2 Procedure for counting number of UEs registered to a Network
Slice
Figure 6.8.3.2-1: Procedure for counting number of UEs registered to a Network
Slice
1\. UE registers (or deregisters) as per current procedures.
2\. If Registration procedure is requested then continues, as per current
procedure, until Allowed NSSAI decided.
3\. The AMF checks if Maximum number of UEs that the Network Slice supports or
a threshold is reached, the record of the counting is stored within the AMF
Set e.g. in UDSF.
4\. If Maximum number of UEs that the Network Slice supports or a threshold is
reached, and the AMF is configured to report to O&M, the AMF report the event
to O&M
NOTE 1: The interaction between AMF and O&M is to be defined by SA5.
5\. If Maximum number of UEs that the Network Slice supports not reached, the
AMF continues the procedure.
6\. The AMF completes the procedure and answers the UE with either
Deregistration Accept, Registration Accept or Registration Reject.
Registration Accept if an Allowed NSSAI is provided, possible with rejected
S-NSSAIs and a suitable cause code (existing or new) and if configured by O&M
to reject registrations from UEs if the maximum number or threshold is
reached, a Registration Reject in case no Allowed NSSAI is accepted, with a
suitable cause code (existing or new).
NOTE 2: It is assumed that CT1 will evaluate whether existing cause code can
be re-used or new cause code(s) is needed.
#### 6.8.3.3 Procedure for counting number of PDU Sessions per Network Slice
Figure 6.8.3.3-1: Procedure for counting number of PDU Sessions per Network
Slice.
1\. UE requests establishment or release of a PDU Session as per current
procedures.
2\. If it was a PDU Session Establishment procedure, it continues, as per
current procedure, until S-NSSAI for the PDU Session decided.
3\. The AMF checks if Maximum number of PDU Sessions or threshold is reached,
the record of the counting is stored within the AMF Set e.g. in UDSF.
4\. If Maximum number of PDU Sessions per the Network Slice or a threshold is
reached and the AMF is configured to report to O&M, the AMF report the event
to O&M.
NOTE 1: The interaction between AMF and O&M is to be defined by SA5.
5\. If maximum number of PDU Sessions not reached, the AMF continues the
procedure.
6\. The AMF answers the UE with either PDU Session Establishment/Release
Accept or if configured by O&M to reject PDU Session establishment from UEs if
the maximum number or threshold is reached, Reject. If Reject is provided the
AMF also provides a suitable cause code (existing or new).
NOTE 2: It is assumed that CT1 will evaluate whether existing cause code can
be re-used or new cause code(s) is needed.
#### 6.8.3.4 Procedure for handling counting at mobility between AMF Sets
##### 6.8.3.4.1 General
When the UE moves between two AMF Sets the count should be \"moved\" to the
New AMF Set.
##### 6.8.3.4.2 Idle mode mobility
Figure 6.8.3.4.2-1: Procedure for moving counting from source AMF Set to
target AMF Set at idle mode mobility
1\. UE performs Mobility Registration Update as per current procedures, until
step 3
2\. New AMF may retrieve context from Old AMF
3\. Old AMF provides UE context
4\. Existing procedure steps 6 to 9.
5\. New AMF reports it takes over the UE
6\. Old AMF reduce the count
7\. If count went below a threshold and AMF configured to report to O&M, the
Old AMF reports to O&M.
8\. As per existing procedure steps 11-14c
9\. UDM deregisters Old AMF
10\. Old AMF unsubscribes to events
11\. As per existing procedure steps 15-19c
12\. If Maximum number or a threshold is reached and the AMF is configured to
report to O&M, the AMF report the event to O&M.
NOTE 1: The interaction between AMF and O&M is to be defined by SA5.
13\. The AMF completes the procedure and answers the UE with either
Registration Accept or Registration Reject. Registration Accept if an Allowed
NSSAI is provided, possible with rejected S-NSSAIs and a suitable cause code
(existing or new) and a Registration Reject in case no Allowed NSSAI is
accepted, with a suitable cause code (existing or new).
NOTE 2: It is assumed that CT1 will evaluate whether existing cause code can
be re-used or new cause code(s) is needed.
##### 6.8.3.4.3 Connected mode mobility
Figure 6.8.3.4.3-1: Procedure for moving counting from source AMF Set to
target AMF Set at connected mode mobility
1\. As per existing N2 based HO Preparation phase.
2\. As per existing N2 based HO Execution phase, Figure 4.9.1.3.3-1 steps 1-4.
3\. Handover Notify as per existing procedure
4\. Namf_Communication_N2InfoNotify as per existing procedure.
5\. Old AMF reduce its count.
6\. If count went below a threshold and Old AMF configured to report to O&M,
the Old AMF reports to O&M.
7\. New AMF increases count, and if Maximum number or a threshold is reached
and the AMF is configured to report to O&M, the New AMF report the event to
O&M.
NOTE 1: The interaction between AMF and O&M is to be defined by SA WG5.
8\. The procedures continues, including the Registration procedure, and the UE
may get aware that a Network Slice been removed from the Allowed NSSAI if max
reached or a PDU Session been removed if max reached.
NOTE 2: It is assumed that CT1 will evaluate whether existing cause code can
be re-used or new cause code(s) is needed.
### 6.8.4 Impacts on services, entities and interfaces
The following impacts are foreseen by this solution:
O&M:
\- Provisions and possibly updates the AMF Sets with following information:
\- Area to be supported by the AMF Set and the Network Slice;
\- Maximum number of UEs that the Network Slice supports;
\- Thresholds for AMF Set to report to the O&M system of number of UEs using
the Network Slice;
\- Maximum number of PDU Sessions per Network Slice that the network slice can
support in a specific area; and
\- Thresholds for AMF Set to report to the O&M system of number of PDU
Sessions per the Network Slice.
\- Guidance to the AMF Set on whether to reject additional UEs / PDU Sessions
if thresholds are exceeded.
AMF:
\- Logic to count number of UEs and number of PDU Sessions per Network Slice
and report to the O&M system if a threshold is reached.
\- Store current count within the AMF Set e.g. in the UDSF.
\- Logic whether to reject a UE request in case a threshold is reached.
## 6.9 Solution #9: Monitoring multiple quotas of number of UEs/PDU Sessions
per S-NSSAI at NWDAF
### 6.9.1 Introduction {#introduction-9}
The solution applies to KI#1 \"Support of network slice related quota on the
maximum number of UEs\", KI#2 \"Support of network slice related quota on the
maximum number of PDU Sessions\" and KI#4 \"Support for network slice quota
event notification in a network slice\".
This solution assumes the following:
\- Multiple quotas of Network Slice attributes (e.g. numbers of UEs or numbers
of PDU Sessions) per S-NSSAI may be monitored.
\- In one example, a lower quota may trigger new (i.e. higher) charging rules
and another higher quota may trigger to start rejecting new UEs/PDU Sessions
for the S-NSSAI.
\- In another example, one quota of a Network Slice attribute can be applied
for roaming UEs, a second quota can be applied for non-roaming UEs and a third
quota can be applied for all UEs.
\- A network slice customer (represented by AF) can subscribe with 5GC for
notifications when certain quotas of numbers of UEs or PDU Sessions are
reached. The AF can determine an \"action\" (e.g. limitation) to be applied in
the 5GS upon exceeding a particular quota.
### 6.9.2 High-level Description
The solution is based on the principles of solution #4, e.g. NWDAF can
subscribe to collect data from AMFs about the number of UEs per S-NSSAI. The
term \"Networks Slice attribute\" used within this solution means either 1) a
quota of maximum number of UEs or 2) a quota of maximum number of PDU
Sessions.
This solution proposes the following high-level principles (in addition to the
principles of solution #4):
\- UDM, CHF, AMF or other NFs can be configured (e.g. via O&M during NF
instantiation) with quotas of Networks Slice attribute(s) (e.g. numbers of UEs
or numbers of PDU Sessions). These NFs request the NWDAF to provide data
analytics for the Networks Slice attribute(s).
\- The NWDAF subscribes with the AMFs (for non-roaming UEs) and with the
UDM(s) (for roaming UEs) to collect data about the Networks Slice attribute(s)
for an S-NSSAI.
\- The NWDAF may subscribes with the AMFs to collect data about the number of
PDU Sessions for an S-NSSAI. A Rel-16 AMF is aware about the established PDU
Sessions associated with an S-NSSAI and the AMF is able to gather and report
data about the current number of established PDU Sessions
\- For roaming UEs, the UDM(s) in the HPLMN gather information from the
visited AMFs (vAMFs) and report the data to the NWDAF.
\- For roaming UEs, the UDM(s) in the HPLMN gather information from the
visited AMFs (vAMFs) and report the data to the NWDAF.
\- The AF subscribes with the NWDAF for one or multiple quotas of UEs or PDU
Sessions for a particular S-NSSAI.
\- The AF can decide an \"action\" to be applied upon reach of a quota and the
AF can request the network to enforce the \"action\".
### 6.9.3 Procedures
#### 6.9.3.1 Monitoring a Network Slice attribute at NWDAF for roaming and
non-roaming UEs
The Figure 6.9.3.1-1 shows the signalling flow for monitoring a Network Slice
attribute for a particular Network Slice (e.g. S-NSSAIx) for roaming and non-
roaming UEs. The Network Slice attribute can be both 1) number of UEs or 2)
number of PDU Sessions using the S-NSSAIx.
Figure 6.9.3.1-1: Signalling flow for monitoring the number of UEs or PDU
Sessions using S-NSSAIx
0a. The UDM is configured with UE quota-U for S-NSSAIx. The UDM shall take
actions (e.g. not allow roaming UEs to use S-NSSAI-1) when the UE quota-U is
reached.
0b. The AMF may be configured with UE quota-A for S-NSSAIx. The AMF shall take
actions (e.g. not allow roaming UEs to use S-NSSAI-1) when the UE quota-A is
reached.
1a. The UDM(s) serving the UEs subscribed to S-NSSAIx subscribe for data
analytics with the NWDAF.
1b. [Optionally] If the AMF(s) in the HPLMN (hAMFs) are configured with the
quota(s) of UEs or PDU Sessions using S-NSSAIx, then the hAMF(s) can also
subscribe for data analytics with the NWDAF.
2a. The NWDAF subscribes with the UDM(s) to collect data for the [UE, PDU
Sessions] using the S-NSSAIx in the roaming scenario. The NWDAF can use the
parameters Event Filter [granularity] to indicate how often the UDM should
report, e.g. after a predetermined number of changes (e.g. 10 changes) or
periodically after a predetermined amount of time (e.g. every 10 minutes).
2b. (as per Solution #4) The NWDAF subscribes with the hAMF(s) to collect data
for the [UE, PDU Sessions] using the S-NSSAIx in the non-roaming scenario.
2c. Upon time, the hAMFs report the data about the number of [UEs, PDU
Sessions] using the S-NSSAIx.
3\. A roaming UE registers with a VPLMN via vAMF.
4\. The UDM determines that UE\'s Subscribed S-NSSAIs include S-NSSAIx and the
UDM subscribes with the vAMF to report the current number of [UEs or PDU
Sessions] for S-NSSAIx.
5\. The vAMF reports the current number [UEs or PDU Sessions] for S-NSSAIx.
6\. The vAMF subscribes for the event when the quota of number of [UEs or PDU
Sessions] for S-NSSAIx is reached.
7\. The NWDAF collects data for number of [UEs or PDU Sessions] for S-NSSAIx
and monitors whether Quota-U or Quota-A are reached.
8\. If the NWDAF determines that quota-U is reached, the NWDAF notifies the
UDM.
9\. It is assumed that UDM is pre-configured which action to take upon
exceeding the quota-U.
10\. The UDM sends a notification to all vAMF(s) which has subscribed in step
6. The notification contains an \"action ID\" indicating to the vAMFs which
action to take, e.g. (1) start rejecting the registration of new UEs or (2)
rejecting the establishment of new PDU Sessions towards the S-NSSAIx.
If the AMF rejects the PDU Session establishment request due to exceeded quota
of PDU Sessions per S-NSSAIx, the AMF may provide an appropriate reject cause
value to the UE. At any point later, the AMF may perform an update procedure
towards the UE (e.g. UE Configuration Update procedure) to allow again the PDU
Session establishment.
#### 6.9.3.2 AF requests monitoring a Network Slice attribute and determines
actions upon exceeded quota
The Figure 6.9.3.2-1 shows the signalling flow for AF requesting the
monitoring a Network Slice attribute for a particular Network Slice (e.g.
S-NSSAIx). The same procedure applies to both Network Slice attributes: number
of UEs or number of PDU Sessions.
Figure 6.9.3.2-1: AF requesting fore monitoring the number of UEs or PDU
Sessions using S-NSSAIx and enforcing actions upon reaching the quota
0a. The AF is configured with UE quota-W for the corresponding slice based on
agreed SLA.
1a. The AF using the services of S-NSSAIx subscribes for monitoring of event,
e.g. whether the number of UEs using the S-NSSAIx has reached the quota-W.
1b. The NEF discovers the NWDAF, discovers the S-NSSAI based on the AF-ID and
subscribes for data analytics with the NWDAF.
1c. The NWDAF acknowledges the start of data analytics.
2\. The NWDAF discovers UDM(s), AMF(s) serving the S-NSSAIx. The NWDAF
subscribes for data collection for number of [UEs, PDU Sessions] for S-NSSAIx.
3\. The NWDAF determine that UE quota-W is reached.
4\. The NWDAF notifies the AF via NEF.
5\. The AF determine which action to perform upon the exceed of quota-W, e.g.
the AF can decide to limit access to S-NSSAIx for further UEs or PDU Sessions.
6\. The AF requests the 5GC to create a new policy, e.g. policy/action ID
indicating the limitation of access to S-NSSAIs for further UEs.
8, 9. Alternative #1: the policy is enforced via UDM. The UDM can inform hAMF
and vAMFs to limit the access to S-NSSAIx.
10, 11. Alternative #2: the policy is enforced via PCF. The PCF enforcing
rejection of new [UEs, PDU Sessions] for S-NSSAIx. The PCF may modify the
Access and Mobility Management policies and provide them to hAMFs and to the
vAMFs via the vPCFs.
12\. The NEF responds to AF about the creation of the policy.
13\. The NWDAF determines that number of UEs currently using the S-NSSAIx
falls quota-W.
14\. The NWDAF sends notification to NWF/AF about the event of underrun of
quota-W.
15: The AF determines to delete the policy of limiting the access to S-NSSAIx.
16\. The AF sends a policy delete request to NEF.
17\. If Alternative #1 applies, the policy is deleted in the UDM.
18: If Alternative #2 applies, the policy is deleted in the PCF.
#### 6.9.3.3 Applying adaptive charging if a quota for a Network Slice
attribute is reached
Editor\'s note: It is FFS whether the adaptive charging is in the scope of the
FS_eNS_Ph2 objectives.
The Figure 6.9.3.3-1 shows the signalling flow for applying adaptive charging
for a Network Slice attribute for a particular Network Slice (e.g. S-NSSAIx).
The same procedure applies to both Network Slice attributes: number of UEs or
number of PDU Sessions.
Figure 6.9.3.3-1: Signalling flow for applying adaptive charging for S-NSSAIx
depending on the quota of UEs or PDU Sessions
0\. The CHF is configured with UE quotas C1 and C2 for S-NSSAIx. The
configuration can be performed via the OAM system. The CHF is aware which
charging rates to apply if C1 or C2 are reached.
1a. The CHF subscribes for data analytics with the NWDAF. The CHF may indicate
different quotas C1 and C2 (e.g. by using different Analytics Filters) and to
request notification if the number of UEs using the S-NSSAIx has reached the
quotas C1 or C2.
2\. The NWDAF discovers the NFs from which data for the analytics can be
collected. For example, the NWDAF may subscribe with UDM(s) and AMF(s) for
data collection for S-NSSAIx as shown in clause 6.9.3.1 steps 2-8.
3\. The NWDAF determines that UE quota-C1 is reached.
4\. The NWDAF notifies the CHF about the event that quota-C1 is reached.
5\. The CHF adapts the charging for S-NSSAIx according to the changed quota-C1
as per SLA with the Network Slice Customer.
6\. The NWDAF determines that UE quota-C2 is reached.
7\. The NWDAF notifies the CHF about the event that quota-C2 is reached.
8\. The CHF adapts the charging for S-NSSAIx according to the changed quota-C2
as per SLA with the Network Slice Customer.
### 6.9.4 Impacts on services, entities and interfaces
**AMF:**
\- Collecting and reporting data about [UEs, PDU Sessions] using S-NSSAIx;
\- The AMF enforces actions (e.g. rejection of new UE or PDU Sessions) upon
exceeding the quota of network slice attribute.
**UDM:**
\- Requests from NWDAF data analytics for network slice attributes (e.g.
number of UEs or PDU Sessions for S-NSSAIx), whereas certain UE quota (e.g.
quota-U) is included in the request;
\- Requests the AMFs (e.g. vAMFs in the V-PLMNs) to report the current number
of [UEs or PDU Sessions] using the S-NSSAIx.
**NWDAF:**
\- Provide data analytics whether one or multiple quota(s) of maximum number
of [UEs or PDU Sessions] for S-NSSAIx is reached;
\- Collecting data from:
\- Serving AMFs in the H-PLMN to report about the number of [UEs or PDU
Sessions] in the HPLMN;
\- Serving UDMs to report about the number of [UEs or PDU Sessions] in the
VPLMNs.
**CHF:**
\- Requesting data analytics for the quotas for number of [UEs, or PDU
Sessions] for S-NSSAIx.
\- Applying different charging policies depending on the exceeding of the
various quotas for number of [UEs, or PDU Sessions] for S-NSSAIx.
### 6.9.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.10 Solution #10: Max number of PDU Sessions per Network Slice control via
NSQ function
### 6.10.1 Introduction {#introduction-10}
This solution addresses the below requirements from Key Issue #2: Support of
network slice related quota on the maximum number of PDU Sessions.
\- How does 5GS know about the current number of PDU Sessions being
established in the network slice? Which NF(s) need to know about this
information?
\- Whether and how does 5GS enforce such quota when a UE requests to establish
a new PDU Session to the network slice and that would cause the quota to be
exceeded, e.g. whether 5GS rejects, accepts without guarantee, or accepts with
lower service quality? What is the mechanism needed in 5GS?
### 6.10.2 High-level Description
This solution allows to control and restrict the number of PDU Sessions per
Network Slice identified by S-NSSAI.
Assumptions:
\- This solution assumes that the network slice related quota is managed by a
new function NSQ (Network Slice Quota) which is represented as a new network
entity in this solution however, the solution is equally valid if the NSQ is
represented as a functional part of an existing network entity.
\- The granularity of the NSQ function is per PLMN so that it can be accessed
by all SMFs within the PLMN.
\- The quota for max number of PDU Sessions per network slice is provisioned
in the OAM. The NSQ can retrieve the quota for max number of PDU Sessions per
network slice from the OAM and it can also subscribe for notifications of any
updates to the max number of PDU Sessions per network slice quota.
### 6.10.3 Procedures
#### 6.10.3.1 Max number of PDU Sessions per Network Slice control at PDU
Session Establishment
Figure 6.10.3.1-1: Max number of PDU Sessions per Network Slice control at PDU
Session
1-2. The UE requests PDU Session establishment in a Network Slice represented
by S-NSSAI.
3\. If the SMF does not have the NSQ address, the SMF triggers NRF enquiry to
find the NSQ address. The SMF includes the S-NSSAI and also the NF_Type = NSQ
parameter in order to indicate to the NRF that the enquiry is for the NSQ
address. If the SMF knows the NSQ entity address, steps 3 and 4 are skipped.
4\. The NRF obtains the NSQ address that holds the information for S-NSSAI and
NRF returns the NSQ address.
5\. The SMF sends registration request to the NSQ in order to register the PDU
Session Id for that S-NSSAI.
6\. The NSQ entity checks for the S-NSSAI whether the max number of allowed
PDU sessions has already been reached.
If the max number of PDU Sessions per that S-NSSAI has not been reached, the
NSQ increases the number of PDU Sessions in S-NSSAI.
If the max number of PDU Sessions per S-NSSAI has already been reached, the
NSQ does not register the PDU_Session_Id for the S-NSSAI, i.e. does not
increase the number of PDU Sessions registered with that S-NSSAI.
7\. The NSQ responds to SMF. If the maximum number of PDU sessions in S-NSSAI
has already been reached, the NSQ returns a reject cause = max PDU Sessions
reached.
8-9. SMF returns PDU Sessions Establishment Accept or Reject to the UE. If the
PDU Session is rejected the SMF returns the S-NSSAI for which the PDU session
is rejected and SMF may also return S-NSSAI specific back-off timer.
#### 6.10.3.2 Max number of PDU Sessions per Network Slice control at PDU
Session Release
Figure 6.10.3.2-1: Max number of PDU Sessions per Network Slice control at PDU
Session Release
1-2. The UE requests PDU Session Release and indicates the PDU Session Id and
the S-NSSAI.
3\. If the SMF does not have the NSQ address, the SMF triggers NRF enquiry to
find the NSQ address. SMF sends de-registration request to the NSQ in order to
de-register the PDU Session Id for that S-NSSAI.
4\. The NSQ decrements the PDU Sessions counter for the S-NSSAI.
5\. The NSQ confirms the PDU Session de-registration.
6-7. The PDU Session is released.
#### 6.10.3.3 Max number of PDU Sessions per Network Slice control in roaming.
##### 6.10.3.3.1 Max number of UEs per Network Slice control in roaming by the
vPLMN.
A local quota of \'max number of PDU Sessions per network slice\' is allocated
to the vPLMN per SLA agreement and stored in the vNSQ. In roaming, the quota
monitoring and enforcement is done in the vPLMN by the vNSQ entity as per the
description in clause 6.10.3.1 to clause 6.10.3.2.
### 6.10.4 Impacts on services, entities and interfaces
**UE:** A new PDU Session establishment reject cause.
**SMF:** Interacts with NSQ for PDU Sessions per network slice quota
management.
**NSQ:** A new NSQ function for PDU Sessions per network slice quota control
and enforcement.
### 6.10.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.11 Solution #11: Handling maximum number of sessions using NF status
### 6.11.1 Introduction {#introduction-11}
Editor\'s note: This clause lists the key issue(s) addressed by this solution.
This solution addresses key issue #2 in particular for the maximum number of
PDU sessions per slice based on the quota.
### 6.11.2 High-level Description
Editor\'s note: This clause outlines solution principles, assumptions and
high-level architectures, etc.
Based on the slice configuration (called quota), each slice (defined per
S-NSSAI) is associated with the maximum number of PDU sessions concurrently
supported by the network slice. Based on this value, the 5GS performs the
actions including the slice selection, the NF selection, and the session
management control. This solution is based on the functionality of NRF, i.e.
collection of NF status information and provisioning this to the other NFs.
The high level description of the solution is as follows:
1) It is assumed that there is a slice-specific level NRF in the network. The
NRF collects the status of SMFs in the slice (i.e. the number of PDU sessions
currently served by each SMF), and it calculates the per slice value. For
doing this, the NRF and the SMF use the status updating procedures supported
in SBI.
NOTE 1: This operation is per SMF instance basis, and accordingly the NRF does
not need to process/store any UE-related context information. How to support
the reliable operation of NRF, e.g. using redundancy mechanism, is up to
implementation.
2) The NRF provides per slice information (i.e. the number of PDU sessions per
slice or the condition of reaching the quota) to AMF(s) by using the status
notification procedure.
3) If the maximum limit is reached, the AMF rejects the session setup request
from the UE with a proper cause value.
### 6.11.3 Procedures
Editor\'s note: This clause describes services and related high-level
procedures for the solution.
#### 6.11.3.1 PDU session establishment with S-NSSAI subject to Quota
management
Figure 6.11.3-1: Procedure for controlling the number of sessions per slice
1\. Slice-specific level NRF collects the status of SMFs in the slice, i.e.
the number of PDU sessions currently served for the slice (S-NSSAI) by using
the NF management services. How frequently this status information can be
gathered/reported from the SMFs is based on the operator\'s configuration.
2\. The NRF calculates the sum of PDU sessions currently established for the
slice.
3\. The NRF provides per slice status information to AMFs in the slice. To
doing this, it is assumed that the AMFs have subscribed to the NRF for being
notified with the information and the NRF provides the same information to all
AMFs in the slice.
NOTE: Steps 1, 2 and 3 can be performed independently from the other steps.
4\. UE sends a PDU session establishment request for the slice.
5\. Upon receiving the session setup request, the AMF determines whether a new
session can be established for the slice or not based on the information
received in step 2. If the session setup is not possible because of reaching
the limitation, step 6 is skipped.
6\. AMF may perform discovery and selection procedure for selecting an SMF for
the slice. If there are available sessions and SMF(s), the AMF performs SM
procedure as per the UE request.
7\. The AMF sends the PDU session establishment response to the UE. If the
slice quota has been reached, the AMF also provides the rejection cause and
back-off timer.
#### 6.11.3.2 Interaction for roaming scenario
Figure 6.11.3-2: Procedure for the roaming scenario
1\. V-NRF is configured that the certain S-NSSAI(s) of HPLMN are subject to
the quota management in the roaming scenario.
2\. The V-NRF reports the slice status on the number of PDU sessions to the
H-NRF. How frequently this status information can be gathered/reported is
based on the SLA between two operators.
3\. The H-NRF updates the slice status on the number of PDU sessions if
needed. The H-NRF also checks if the quota for the certain S-NSSAI(s) has been
reached or not.
4\. If the H-NRF decides that the slice quota has been reached, it notifies
this information to the V-NRF with additional parameters such as preferred
back-off timer.
5\. The V-NRF reports the information on the slice status to the AMF and steps
from 4 to 7 in 6.11.3.1 can be performed.
### 6.11.4 Impacts on services, entities and interfaces
Editor\'s note: This clause describes impacts to existing services and
interfaces.
**NRF:** Calculating per slice sessions number by using SMF status information
and provisioning to AMF.
**AMF:** Processing the session setup request based on the per slice
information.
**SMF:** Reporting the per slice session status information to NRF.
**UE:** Handling new rejection cause.
## 6.12 Solution #12: NSQ assisted dynamic adjustment of data rate per slice
via NAS signalling
### 6.12.1 Introduction {#introduction-12}
This solution is for Key Issue #5, \"Dynamic adjustment to meet the limitation
of data rate per network slice in UL and DL\". The solution is based on the
Network Function NSQ specified in solution#10.
The solution is based on the following architectural assumptions:
\- NSQ shall be configured with maximum allowed Slice-AMBR by the operator via
OAM or AF.
Actual Slice-AMBR = Aggregate of Session-AMBR of active PDU sessions +
Aggregate of MFBR of active GBR flows.
\- NSQ shall subscribe to SMF to get notified of any changes in Session-AMBR
or MFBR of the existing PDU sessions.
\- AMF/SMF shall subscribe to NSQ to get notified when the actual slice-AMBR
has reached the maximum allowed slice-AMBR or if a certain threshold has been
met, e.g. 90% of maximum allowed slice-AMBR has been reached.
### 6.12.2 High Level Description
\- NSQ keeps track of the actual slice-AMBR for a S-NSSAI.
\- During PDU session establishment procedure, SMF updates the NSQ with
Session-AMBR of the PDU session that is being established and MFBR of any GBR
flows which shall be established and requests if Slice-AMBR for a S-NSSAI is
available.
\- NSQ adds the Session-AMBR and MFBR value to the actual Slice-AMBR value.
\- If the actual Slice-AMBR has not hit the maximum allowed Slice-AMBR, NSQ
responds to SMF to proceed with PDU session establishment procedure with the
existing Session-AMBR and MFBR values.
\- If the actual Slice-AMBR has hit the maximum allowed Slice-AMBR, NSQ
responds to SMF to dynamically adjust the session-AMBR and MFBR values of the
existing PDU session by a certain threshold. Alternatively, the NSQ may
respond to AMF/SMF to reject the PDU session establishment with an appropriate
cause code.
\- Dynamic adjustment of existing PDU sessions can be performed via signalling
procedure:
\- Signalling method: PDU Session modification procedure initiated by SMF with
reduced Session-AMBR/MFBR values. One approach would be to start reducing
Session-AMBR for non-GBR PDU sessions up to a certain limit and later start
reducing MFBR for GBR PDU sessions.
### 6.12.3 Procedures
The procedure in Figure: 6.12.3-1 shows a signalling flow in which NSQ
performs dynamic adjustment of data rate for a slice when Slice-AMBR limit has
been reached.
Figure 6.12.3.1: NSQ assisted dynamic adjustment of data rate for a slice
As a pre-condition for this call flow, UE(s) 2..n have a PDU session
successfully established with the network.
NSQ keeps track of the Slice-AMBR for the S-NSSAI.
1\. UE1 initiates a PDU Session Establishment Request for a S-NSSAI to SMF.
2\. SMF sends the Nnsq_PDUCount_Availability_Check_Request message to SMF and
includes the SMF-ID, S-NSSAI, PDU Session ID, Session-AMBR (or) MFBR depending
on non-GBR or GBR session respectively.
3\. NSQ performs the following checks:
\- whether PDU session count quota available (KI#2);
\- whether Slice-AMBR limit has not been reached after adding the Session-AMBR
(or) MFBR received at step 2.
If PDU session count quota is not available, NSQ informs SMF to reject the PDU
session establishment request with an appropriate cause code. If PDU session
count quota is available, NSQ informs SMF to successfully create the PDU
session. This procedure is described in solution #10.
If Slice-AMBR limit is available after adding the Session-AMBR (or) MFBR from
step 2, NSQ informs SMF to successfully create the PDU session. If Slice-AMBR
limit is not available, NSQ informs SMF to dynamically adjust data rates of
the existing PDU sessions (in a fair manner) or may inform SMF to reject the
PDU session establishment request with an appropriate cause code.
In this example, the PDU session count quota is available but Slice-AMBR
maximum limit has been reached.
4\. NSQ initiates a new request informing all SMF(s) which have active PDU
session(s) associated with the same S-NSSAI to dynamically adjust the data
rates of all the PDU sessions active for the S-NSSAI via
Nnsq_DataRate_Update_Request service. NSQ includes the S-NSSAI, an appropriate
cause code, and the percentage of the data rate to be reduced for PDU Session
ID(s) of UE (2..n).
NOTE 1: The cause code can be an existing cause code, e.g. \"Insufficient
resources for specific slice or DNN\". Alternatively, a new cause code can be
defined to be specific to Slice-AMBR.
NOTE 2: The amount of data rate to be reduced has to be fair among the
different contract qualities. Hence, a percentage approach could be taken by
NSQ. For example, NSQ could request 5% or 10% reduction of data rate. However,
at any given point for GBR sessions, MFBR might not go as low as GFBR after
reduction of data rate. In general, the adjustment of data rate decision is
implementation specific.
NOTE 3: NSQ is not mandated to include a percentage of data rate to be
reduced. In this case, the SMF can take a decision, however, in a network with
multiple SMFs, a common network function, i.e. NSQ is in a better position to
make the decision.
5\. SMF initiates the PDU Session Modification procedure, as defined in TS
23.502 [6] clause 4.3.3.2 to reduce the Session-AMBR (and/or) MFBR for non-GBR
and GBR flows. SMF updates the QoS profiles for the PDU sessions sends it to
the UE via UPF and NG-RAN.
NOTE 4: SMF takes the decision to reduce the Session-AMBR of non-GBR PDU
sessions first, followed by MFBR or GBR PDU sessions.
6\. SMF completes the dynamic adjustment of data rate to a S-NSSAI and
provides the acknowledgment of completion via Nnsq_DataRate_Update_Response
message with the PDU session ID(s) and the corresponding Session-AMBR (or)
MFBR values.
7\. NSQ updates the Slice-AMBR value based on the received updated Session-
AMBR and MFBR values received in step 6. With the updated Slice-AMBR value,
NSQ will check if it can suffice the new PDU session establishment request in
step 2. In some cases, NSQ will also decrement the PDU count quota (KI#2) by 1
if the updated Slice-AMBR value can suffice the request at step 2.
8\. In cases when the updated Slice-AMBR value has not reached the limit after
reducing the Session-AMBR or MFBR value received in step 2, the NSQ provides a
success code to SMF for establishing the new PDU session from UE1.
9\. SMF sends PDU Session Establishment Accept message to UE1.
### 6.12.4 Impacts on services, entities and interfaces
\- NSQ should be provisioned with the Slice-AMBR value for a S-NSSAI.
\- NSQ should have the capability to provide the percentage of data rate (to
be adjusted or reduced) to the SMF.
\- New cause code may need to be defined specific to Slice-AMBR.
### 6.12.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.13 Solution #13: Limitation of data rate per network slice in UL and DL
per UE
### 6.13.1 Introduction {#introduction-13}
Each slice is associated with the following aggregate rate limit QoS
parameters for each UE:
Slice-UL-AMBR, per Slice UpLink Aggregate Maximum Bit Rate per UE
Slice-DL-AMBR, per Slice DownLink Aggregate Maximum Bit Rate per UE
These parameters limit the aggregate bit rate that can be expected to be
provided across non-GBR QoS flows of a UE by a specific network slice and the
existence of GBR flows within the same S-NSSAI.
Suppose when a UE initiates a PDU session establishment request, it carries a
capability identifier indicating whether the UE supports rate limitation
function for non-GBR data traffic, and SMF stores this capability identifier
for UE. SMF will prefer UE as the enforcement node for UpLink non-GBR data
rate limitation, and if UE does not support this feature, UPF will be selected
instead.
### 6.13.2 High-level Description
The proposed Slice-UL-AMBR and Slice-DL-AMBR should be part of user\'s
subscription data and could be configured by OAM and retrieved by PCF/UDR
flexibly. The subscribed Slice-UL-AMBR and Slice-DL-AMBR should firstly
guarantee the sum of GFBR of all active GBR flows for the UE within the
S-NSSAI, then the rest quota is for all Non-GBR flows on best-effort services
as authorized Slice-UL-AMBR and Slice-DL-ABMR.
Slice-UL-AMBR and Slice-DL-AMBR is calculated as follows:
1\. When there is no active GBR flows for a specific network slice of a UE,
i.e. all traffic is of Non-GBR flow, the authorized Slice-UL-AMBR and Slice-
DL-AMBR are set to the value of subscribed Slice-UL-AMBR and Slice-DL-AMBR
respectively.
2\. When a UE initiates a new PDU session, a Non-GBR flow is established by
default. It should not affects authorized Slice-UL-AMBR and Slice-DL-AMBR,
i.e. no need to update the authorized value.
3\. When a Non-GBR flow is to be established or terminated in existing
sessions for a specific S-NSSAI, for best-effort service, the procedure should
be as current defined in TS 23.502 [6] and the authorized Slice-UL-AMBR/Slice-
DL-AMBR values stay the same.
4\. Only when a GBR flow is to be established or terminated in existing
sessions, the authorized Slice-UL-AMBR and Slice-DL-AMBR should be re-
calculated by PCF and delivered to enforcement nodes. For example:
When a UE modifies a PDU session with new GBR flow request within an S-NSSAI,
PCF calculates the sum of GFBR of the target GBR flow and all active GBR flows
of that S-NSSAI for UL and DL separately.
a) If the sum of UL is no greater than the subscribed Slice-UL-AMBR, and the
sum of DL is no greater than the subscribed Slice-DL-AMBR, the new GBR flow is
OK to be established. Then the authorized Slice-UL-AMBR and Slice-DL-AMBR of
the UE will be set to the remaining of subscribed slice-AMBR excepting the sum
of GBR flows.
b) If the sum of UL is greater than the subscribed slice-UL-AMBR, or the sum
of DL is greater than the subscribed slice-DL-AMBR, PCF will decide whether to
pre-empt existing GBR flow for the new one based on ARP as defined in clause
5.7.2.2 of TS 23501. If old flow is pre-empty for new flow, the authorized
Slice-UL-AMBR and Slice-DL-AMBR of the S-NSSAI of the UE will be set to the
remaining of subscribed slice-AMBR regarding the new GBR flow. If not, the
establishment request will be rejected and the limit for Non-GBR flows stays
the same.
The authorized Slice-UL-AMBR of the S-NSSAI of the UE will be sent to UE for
enforcement. The authorized Slice-DL-AMBR of the S-NSSAI of the UE will be
sent to UPF for enforcement. (R)AN responsible for the enforcement for GBR
traffic, i.e. reserving resource for new flows while terminating old flows if
indicated by PCF.
To assure the accuracy of data limitation control, the proposed method is
based on the assumption that, the network selects the same SMF/UPF/PCF for all
the sessions of the same S-NSSAI per UE. It is recommended to add some
subscribed information (e.g. slice data rate limitation requirement
identification) in UDM for certain UE that means selecting the same SMF for
all PDU sessions with certain S-NSSAI. When such UE initiate a PDU session
establishment request, AMF selects the same SMF for the UE based on the
subscribed information of the UE in UDM and passes the relevant information to
SMF, thus SMF selects the same PCF and UPF for all the PDU sessions of the
same S-NSSAI per UE.
NOTE: The way for AMF to choose the same SMF for all PDU sessions per UE by
the subscription information in UDM has been specified in TS 23.501 [2].This
solution has taken such way, and extend to the all PDU sessions per UE per
Slice.
In home routed roaming, the same SMF and UPF in in home network are selected.
The PCF calculates the authorized Slice-AMBR per UE, and the UPF in home
network enforces the authorized Slice-AMBR which introduce less impact to
visited network.
In LBO roaming or both LBO and home routed roaming, the H-PCF send the
authorized Slice-AMBR to V-PCF and the V-UPF enforces the authorized Slice-
AMBR per UE. If LBO PDU sessions are established before home-routed PDU
sessions, the SMF and UPF selected before for LBO in the visited network are
selected as the conjoint V-SMF and V-UPF for home-routed PDU sessions, to make
same SMF and UPF selection for all PDU sessions in visited network. If home-
routed PDU sessions are established before LBO PDU sessions, V-SMF and V-UPF
for the established Home-routed PDU sessions before are re-selected to the
conjoint SMF and UPF of LBO PDU session if needed, then the enforcement of the
authorized Slice-AMBR is switched to V-UPF. This re-selection of V-SMF and
V-UPF follows the procedures in R15/R16.
Alternatively, by roaming agreement, the V-PCF may locally authorize the
Slice-AMBR for all the LBO sessions. For both LBO and home routed roaming, the
slice MBR is divided into visited network and home network. Then the home
network authorizes and enforces the Slice-AMBR for all the home routed
sessions, and visited network authorizes and enforces the Slice-AMBR for all
the LBO sessions, individually.
### 6.13.3 Procedures
The following takes a PDU session establishment with new GBR flow to
illustrate the procedure of Slice-UL-AMBR and Slice-DL-AMBR enforcement.
**1.** Suppose when a UE initiates a PDU session establishment request, it
carries a capability identifier indicating that the UE supports rate
limitation function for non-GBR data traffic, and SMF stores this capability
identifier for UE:
Figure 6.13.3-1: Slice-UL-AMBR and Slice-DL-AMBR enforcement at PDU Session
Establishment/Modification (When UE indicates that it can support rate
limitation function for non-GBR data traffic)
1-4. Same as specified in TS 23.502 [6].
5\. The PCF makes policy decision for the request of new GBR flow as described
in 6.13.2. If the new flow is accepted, PCF updates the authorized Slice-UL-
AMBR and Slice-DL-AMBR and selects the existing flow(s) with lower ARP value
to terminate in case of insufficient available resource.
6\. The PCF replies with the updated authorized Slice-UL-AMBR and Slice-DL-
AMBR to the SMF, as well as indication of which GBR flow(s) with lower ARP
value should be terminated for the new one if needed.
7\. The SMF provides the updated authorized Slice-DL-AMBR to the same UPF for
download data limitation enforcement per UE per slice for non-GBR flow.
8\. The SMF sends to AMF with the updated authorized Slice-UL-AMBR and the
indication of flows to be terminated if needed.
9-10. The Session modification result with updated authorized Slice-UL-AMBR is
delivered to (R)AN and UE. The upload data limitation per UE per slice is
enforced by UE for non-GBR flow. While the GBR flow resource is controlled by
(R)AN as current procedures defined in TS 23.501 [2].
**2.** Suppose when a UE initiates a PDU session establishment request, it
carries a capability identifier indicating that the UE cannot support rate
limitation function for non-GBR data traffic, and SMF stores this capability
identifier for UE:
Figure 6.13.3-2: Slice-UL-AMBR and Slice-DL-AMBR enforcement at PDU Session
Establishment/Modification (When UE indicates that it cannot support rate
limitation function for non-GBR data traffic)
1-4. Same as specified in TS 23.502 [6].
5\. The PCF makes policy decision for the request of new GBR flow as described
in 6.13.2. If the new flow is accepted, PCF updates the authorized Slice-UL-
AMBR and Slice-DL-AMBR and selects the existing flow(s) with lower ARP value
to terminate in case of insufficient available resource.
6\. The PCF replies with the updated authorized Slice-UL-AMBR and Slice-DL-
AMBR to the SMF, as well as indication of which GBR flow(s) with lower ARP
value should be terminated for the new one if needed
7\. The SMF provides the updated authorized Slice-UL/DL-AMBR to the same UPF
for download data limitation enforcement per UE per slice for non-GBR flow.
8\. The SMF sends to AMF with the indication of flows to be terminated if
needed.
9\. The Session establishment/modification result is delivered to (R)AN
including the indicator of existing GBR flow to be terminated if needed. While
the GBR flow resource is controlled by (R)AN as current procedures defined in
TS 23.501 [2].
### 6.13.4 Impacts on services, entities and interfaces
Impacts on UDM
\- Responsible for adding some subscribed information for certain UE (e.g.
slice data rate limitation requirement identification) that means selecting
the same SMF for all PDU sessions with certain S-NSSAI.
Impacts on UDR:
\- Responsible for the storage of subscribed Slice-UL-AMBR and Slice-DL-AMBR
Impacts on PCF:
\- In non-roaming and home routed, PCF is responsible for calculating the
authorized Slice-UL-AMBR and Slice-DL-AMBR in PDU session per UE
\- In LBO and both home routed and LBO, the H-PCF send the authorized Slice-
UL-AMBR and Slice-DL-AMBR in PDU session per UE to V-PCF.
\- Alternatively, by roaming agreement, the V-PCF may locally authorize the
Slice-AMBR for all the LBO sessions.
Impacts on AMF:
\- In non-roaming and home routed, AMF selects the same SMF for all the PDU
Sessions within the same S-NSSAI.
\- In LBO and both home routed and LBO, AMF selects the same V-SMF for all the
PDU Sessions within the same S-NSSAI. If Home-routed PDU sessions are
established before LBO PDU sessions, AMF re-selected the V-SMF for home routed
sessions to the conjoint SMF of LBO PDU session if needed.
\- Alternatively, by roaming agreement, the local network may individually
authorize and enforce the Slice-UL-AMBR and Slice-DL-AMBR, then AMF selects
the same V-SMF for all the LBO PDU Sessions within the same S-NSSAI.
Impacts on SMF:
\- Responsible for storing the capability indicator of data rate limitation
for UE, delivering the decision and authorized Slice-UL-AMBR and Slice-DL-AMBR
to UE and UPF respectively.
\- Select the same UPF for all the PDU Sessions within the same S-NSSAI.
Impacts on (R)AN:
\- Enforcement of GBR flow control and deliver authorized Slice-UL-AMBR to UE.
Impacts on UPF:
\- Enforcement of Slice-UL/DL-AMBR limitation per UE per S-NSSAI for download
non-GBR traffic.
Impacts on UE:
\- Adding a capability identifier indicating whether the UE support data rate
limitation for non-GBR data traffic.
\- Enforcement of Slice-UL-AMBR limitation per S-NSSAI for upload non-GBR
traffic.
## 6.14 Solution #14: UE-Slice-AMBR adjustment to meet the limitation of data
rate per Network Slice
### 6.14.1 Introduction {#introduction-14}
This solution addresses KI#5: Dynamic adjustment to meet the limitation of
data rate per network slice in UL and DL.
### 6.14.2 High-level Description
In this solution, the PCF limits the data rate per network slice by adjusting
the UE-Slice-AMBR based on NWDAF analytics on network slice data rate.
\- PCF decides the UE-Slice-AMBR based on NWDAF analytics on network slice
data rate.
\- Network slice data rate analyses supported by NWDAF:
\- Input: S-NSSAI, RAN UE throughput of the S-NSSAI, UE contract quality,
number of UEs, time stamp.
\- Output: S-NSSAI, applicable area, applicable time period, network slice
throughput, UE contract quality and average UE-Slice-AMBR.
\- PCF provides the UE-Slice-AMBR to AMF. The AMF provides the UE-Slice-AMBR
to RAN. RAN controls the UE-Slice-AMBR.
### 6.14.3 Procedures
#### 6.14.3.1 UE-Slice-AMBR Control based on Analytics Information from NWDAF
Figure 6.14.3.1-1: UE-Slice-AMBR Control based on analytics information from
NWDAF
1\. The PCF sends Nnwdaf_AnalyticsSubscription_Subscribe to NWDAF, requesting
for analytics for network slice throughput. The analytics ID is set to network
slice throughput, the target for analytics is set to S-NSSAI.
2\. The NWDAF requests the measurement information for the S-NSSAI from OAM,
derives the requested analytics and provides the analytics to the PCF.
3\. The PCF may decide the UE-Slice-AMBR for UE based on subscribed UE-Slice-
AMBR, contract quality of the UE and analytics information from NWDAF.
4\. The PCF sends Npcf_AMPolicyControl_UpdateNotify to AMF to update the UE-
Slice-AMBR of the UE.
5\. The AMF deploys the access and mobility control policy to provide UE-
Slice-AMBR to RAN.
### 6.14.4 Impacts on services, entities and interfaces
NWDAF: supports analyses of network slice throughput.
PCF: decides UE-Slice-AMBR based on analyses from NWDAF.
## 6.15 Solution #15: Using back-off timer for UE control
### 6.15.1 Introduction {#introduction-15}
This solution addresses key issue #1 in particular for the maximum UE per
slice based on the quota. This solution only defines the usage of the back-off
timer upon reaching the maximum number of UEs per slice during the mobility
management procedures. Thus, this solution can be co-existed with the other
solutions for KI #1.
### 6.15.2 High-level Description
The high-level description of the solution is as follows:
1) During the registration procedure, AMF determines that the quota on the
maximum number of UEs for some S-NSSAI(s) has been reached, possibly based on
the information from the counting NF(s).
2) The AMF provides the UE with the response message which includes a back-off
timer and Pending NSSAI including the related S-NSSAI(s). In this case, the
AMF also provides a cause value indicating that the request has been not
accepted for the S-NSSAI(s) due to the limit in the number of UEs for the
slice(s), so that the UE can distinguish the case from the NAS-level
congestion control and/or the NSSAA process.
3) The UE associates the received back-off time with the S-NSSAI(s) and
applies the timer. The UE shall not stop the back-off timer upon
Cell/TA/PLMN/RAT or Access Type change. While the timer is running, the UE is
not allowed to initiate the registration request for the associated S-NSSAI(s)
in this PLMN, if the rejection cause has indicated that the maximum number of
UEs has been reached for the slice(s).
4) When the timer is expired, the UE removes the S-NSSAI(s) from the Pending
NSSAI.
### 6.15.3 Procedure
The registration procedure 4.2.2.2.2-1 in TS 23.502 [6] applies with the
following modification.
\- In step 21, the AMF provides the UE with the cause value and the backoff
timer for the related S-NSSAI(s).
### 6.15.4 Impacts on services, entities and interfaces
AMF: provisioning of the back-off timer to the UE with a proper cause for the
quota enforcement.
UE: supporting the back-off timer per slice for the quota enforcement with
mobility management.
## 6.16 Solution #16: Slice data rate enforcement and dynamic adjustment
### 6.16.1 Introduction {#introduction-16}
This solution is for Key Issue #5, \"Dynamic adjustment to meet the limitation
of data rate per network slice in UL and DL\".
### 6.16.2 High-level Description
The main idea of the solution is that UPFs get quotas of UL/DL bitrate allowed
to transfer and enforce them to meet the limitation of the slice. The primary
PCF of the slice (i.e. Slice PCF) collects the actual bitrate in N6 interface
per S-NSSAI from the UPFs and periodically adjusts the bitrate quota
allocation according to the latest service distribution within the slice.
The SMF provides S-NSSAI of the PDU Sessions to UPF in N4 session. The UPF
enforces the UL/DL bitrate quota across all GBR and Non-GBR QoS Flows of the
PDU Sessions with the S-NSSAI as follows:
1) The UPF shall ensure that the traffics of GBR QoS Flows do not exceed the
sum of GFBR value of the respective QoS Flows. Whenever a GBR QoS Flow is
established or modified, the UPF shall check if the sum of the GFBR values
(including the new/modified QoS Flow) is larger than the bitrate quota value
of the S-NSSAI. If so, the UPF rejects the new/modified QoS Flow, and then SMF
may try to pre-empt any existing GBR QoS Flow within the slice based on the
ARP values or rejects the new/modified QoS Flow.
2) The UPF shall ensure that the aggregated bitrate across all GBR and Non-GBR
QoS Flows is not exceeding the UL/DL bitrate quota value of the S-NSSAI by
shaping the traffic of non-GBR QoS Flows and/or dropping packets exceeding the
GFBR from GBR QoS Flows with MFBR>GFBR. The details of the UL/DL bitrate quota
enforcement are implementation-specific.
NOTE: Existing queue management mechanisms will handle the packet dropping.
The ratio of packet shaping and packet dropping is up to operator
configuration.
In LBO roaming case, the UPFs in VPLMN enforce UL/DL bitrate quota according
to the corresponding HPLMN S-NSSAI and related quota.
In HR roaming case, the UPFs in HPLMN enforce UL/DL bitrate quota same as non-
roaming case.
### 6.16.3 Procedures
#### 6.16.3.1 Slice data rate enforcement at UPFs
The following figure represents a high-level procedure of the solution.
Figure 6.16.3-1: A high-level procedure of the solution
1\. During N4 association setup or update, the UPF which terminates N6
interface indicates the S-NSSAIs it supports to SMF. The SMF checks whether
slice bitrate enforcement is necessary. If so, the SMF asks the UPF to do the
throughput measurement and reporting for the indicated S-NSSAI periodically.
2\. The UPF measures the N6 interface UL/DL throughputs for the indicated
S-NSSA and reports the average N6 interface UL/DL bitrate per S-NSSAI and the
PDU session number of the slice to the Slice PCF via the SMF.
3\. The Slice PCF allocates UL/DL bitrate quota of the slice to the involved
active UPFs for the S-NSSAI if it is needed.
NOTE 1: The 1st time allocation of the bitrate quota of the slice to the UPF
can be delayed until the 1st PDU Session is established via this UPF.
4\. A PDU Session within the slice has been established/modified.
5\. During the PDU Session establishment procedure, for the N4 interaction to
configure the related N4 rules, the SMF provides the S-NSSAI of the PDU
Session to the UPF. The UPF checks if the sum of the GFBR values (including
the new/modified QoS Flow) is larger than the bitrate quota value of the
S-NSSAI. The UPF also enforces the UL/DL date rate allowed to transfer through
the N6 interface within the slice by shaping the traffic of related non-GBR
QoS Flows and/or dropping packets exceeding the GFBR from related GBR QoS
Flows with MFBR>GFBR.
NOTE 2: The UL data rate enforcement could be more relaxed based on
operator\'s policy as the received UL packet has already consumed the radio
resources.
6\. The Slice PCF collects the actual bitrate and PDU session number report of
each involved UPF in the slice periodically (e.g. per 10 minutes).
7\. The Slice PCF makes adjustments on the bitrate quota allocation between
involved active UPFs. Because of the PDU session number reported, the Slice
PCF may avoid allocating excessive bitrate quota to a UPF with very large
throughput but few PDU Sessions.
8\. If need, the Slice PCF updates the bitrate quota allocated to each
involved UPF according to the latest service distribution within the slice.
#### 6.16.3.2 Slice data rate enforcement at UPFs in roaming
For the HR roaming, the UPFs in HPLMN enforce UL/DL bitrate quota same as non-
roaming case.
For the LBO roaming, the AMF sends the corresponding S-NSSAI of the HPLMN from
the Mapping of Allowed NSSAI to the SMF during the PDU Session establishment
procedure. The UPF (PSA) in VPLMN enforce UL/DL bitrate quota according to the
corresponding HPLMN S-NSSAI and related Quota.
The enhancement to the procedure defined in clause 6.16.3.1 is as following:
1\. During the N4 association setup/update, per the S-NSSAI reported by the
UPF, the SMF check whether slice bitrate enforcement is necessary for the
corresponding HPLMN S-NSSAI. If so, the SMF asks the UPF to do the throughput
measurement and reporting for the indicated (HPLMN, HPLMN S-NSSAI)
periodically.
2\. The UPF communicate with the Slice PCF, which is located in VPLMN and
associated with the related (HPLMN, HPLMN S-NSSAI).
3\. When the slice PCF allocate the quota to the UPF, it also indicate the
allocated quota is associated with (HPLMN, HPLMN S-NSSAI).
Depending on the operator\'s deployment and SLA agreement, there two options
on who manage the quota:
Option A: Quota is provided to VPLMN. In this case the Slice PCF allocates the
quota by itself directly.
Option B: Quota is managed by the HPLMN. In this case the Slice PCF need
communicate with the Slice PCF at the HPLMN and applies the quota from HPLMN.
5\. During the PDU establishment, the SMF provide the (HPLMN, HPLMN S-NSSAI)
associated with this PDU Session to the UPF.
7\. Depending on who manage the Quota, the Quota management either be done by
the Slice PCF in VPLMN directly or it need involve the Slice PCF in HPLMN.
### 6.16.4 Impacts on services, entities and interfaces
PCF:
\- If bitrate control is needed for the slice, the Slice PCF allocates UL/DL
bitrate quota to each of the involved active UPFs for the S-NSSAI or for
(HPLMN, HPLMN S-NSSAI) in LBO roaming cases.
\- The Slice PCF collects the actual UL/DL bitrate of the slice from each
involved UPF and updates the bitrate quota allocation to each active UPF
according to the latest service distribution within the slice.
SMF:
\- Provide S-NSSAI or (HPLMN, HPLMN S-NSSAI) in case of LBO roaming in each N4
session establishment procedure to enable the UPF to associate the traffic to
a slice.
\- Relay quota allocation and actual bitrate report messages between the UPF
and the Slice PCF.
\- Configure the UPF to periodically report the actual UL/DL bitrate of the
slice.
UPF:
\- Enforce the bitrate quota allowed to transfer across all GBR and non-GBR
QoS Flows per S-NSSAI.
\- Measure the N6 interface UL/DL throughputs of per S-NSSAI or (HPLMN, HPLMN
S-NSSAI) in case of LBO roaming..
\- Provide the actual UL/DL bitrate per S-NSSAI or per (HPLMN, HPLMN S-NSSAI)
to the SMF per SMF instruction.
\- Check if the sum of the GFBR values (including the new/modified QoS Flow)
is larger than the bitrate quota.
## 6.17 Solution #17: Support of radio spectrum attribute by CN assisted RAN
control
### 6.17.1 Introduction {#introduction-17}
This solution addresses KI#7.
The principles of the solution is to follow the current procedures as much as
possible and if the network cannot accept the Requested NSSAI due to it is not
allowed within current TAI, the 5GC provides a Target NSSAI and corresponding
RFSP to NG-RAN for NG-RAN to select a suitable Radio Spectrum for the UE.
### 6.17.2 High-level Description
The following sequence of events are envisioned:
1\. The Network Slice is created supporting specific radio spectrum to support
vertical requirements, and other Network Slices, e.g. eMBB, are created
supporting the radio spectrum available for the operator;
2\. The UE has a subscription for both the vertical Network Slice and an eMBB
Network Slice;
3\. The subscription for the UE includes the vertical S-NSSAI and eMBB S-NSSAI
and the eMBB S-NSSAI is marked as default;
4\. The UE has been registered in the network and been configured with a
Configured NSSAI and provided an Allowed NSSAI including the eMBB but not the
vertical Network Slice;
5\. The UE/user decides to use the vertical S-NSSAI and therefore issues a
Requested NSSAI with only the vertical S-NSSAI.
6\. If at least one S-NSSAI in the Requested NSSAI is not allowed in the
current TAI, and the 5GC decides that the not allowed S-NSSAI is preferred
e.g. over any other S-NSSAI only available in the current TAI, the 5GC derive
a Target NSSAI that is same as the Requested NSSAI (excluding any S-NSSAIs
that are e.g. rejected for the PLMN or not allowed with the preferred S-NSSAI)
7\. The 5GC provides NG-RAN with a Target NSSAI and corresponding RFSP as to
allow NG-RAN to move the UE accordingly.
### 6.17.3 Procedures
Existing procedures are used with the changes shown (in **bold**) in the
following Figure 1 showing the information flow for when a UE registers from a
TA that is defined to not be supported by any of the S-NSSAIs in the Requested
NSSAI.
Figure 6.17.3-1: UE requests to be registered to vertical S-NSSAI while not
using the radio spectrum defined for the vertical Network Slice
The steps of Figure 6.17.3-1 are as follows:
1\. The UE decides to use Vertical S-NSSAI and sends a Registration Request
(Requested NSSAI=Vertical S-NSSAI), the RRC includes the GUAMI. NG-RAN selects
AMF as per current procedures i.e. this can be done from CM-IDLE or CM-
CONNECTED.
2\. The AMF and NSSF performs Network Slice selection. As the Vertical S-NSSAI
is not defined for the current TAI, the AMF/NSSF selects the eMBB S-NSSAI as
Allowed NSSAI due to it is defined as the default Subscribed S-NSSAI. If the
NSSF determines the UE is better served by the S-NSSAIs of the Requested NSSAI
(or a subset of it), then NSSF also returns a Target NSSAI.
3\. The Allowed NSSAI has not been changed, but the fact that at least one of
the S-NSSAIs in the Requested NSSAI is not allowed in the current TAI or that
NSSF has provided a Target NSSAI is taken as a trigger for AMF Policy Update
towards the PCF, the AMF provides Allowed NSSAI, Subscribed RFSP and also a
Target NSSAI with either the content of the Requested NSSAI, where the AMF
removes any S-NSSAI in Requested NSSAI that is not a Subscribed S-NSSAI or the
Target NSSAI provided by the NSSF.
4\. The PCF selects RFSP for both the Allowed NSSAI and the Target NSSAI
(without considering the current TAI) and sends both to the AMF.
5\. The AMF sends an N2 message to the NG-RAN with Allowed NSSAI and the
corresponding RFSP Index, and in addition the AMF sends the Target NSSAI and
the corresponding RFSP Index, and the NAS message that includes the eMBB
S-NSSAI as Allowed NSSAI and the Vertical S-NSSAI as a rejected S-NSSAI for
the RA.
6\. The NG-RAN forwards the NAS message to the UE.
7\. The NG-RAN determines the Radio Spectrum to be used in order to allow UE
access to the Target NSSAI and as the NG-RAN got the additional Target NSSAI
and RFSP Index for the Target NSSAI the NG-RAN decides to move the UE
accordingly.
8\. The NG-RAN issues an RRC Release and includes cell reselection priorities
or the NG-RAN performs a Reconfiguration and moves the UE according to the
RFSP for the Target NSSAI.
NOTE 1: Steps 6 and 8 can possibly be done at the same time, i.e. it is up to
NG-RAN. When moving the UE the NG-RAN takes into account UE radio
capabilities, as per current specifications.
9\. The UE realizes that the TAI is outside of the RA and issues a
Registration Request and includes the Vertical S-NSSAI in the Requested NSSAI
as the UE still wants to register to that Network Slice and the Vertical
S-NSSAI was previously only rejected for the RA (i.e. as per existing logic).
10\. Network Slice selection is performed as per current procedures.
11\. The AMF sends a Registration Accept as per current procedures and
includes the Vertical S-NSSAI as Allowed NSSAI.
If the eMBB slice is not supported for the radio spectrum dedicated to the
vertical Network Slice (i.e. not only a preference), the PDU Sessions for eMBB
are released as per existing procedures e.g. using PDU Session status.
NOTE 2: If the eMBB slice is not available on the radio spectrum dedicated to
the vertical Network Slice, as these Network Slices are to be isolated, when
an application in the UE requires connectivity for eMBB, the whole procedure
is repeated with the UE adding the eMBB slice in a Requested NSSAI.
Subsequently, if the UE moves to a new band within the same RA, the UE can
continue to use the Allowed NSSAI as is. If the UE wants to use another set of
S-NSSAIs, the UE issues a Requested NSSAI according to the procedure in figure
6.17.3-1, and if there is a need to move the UE the same procedure is re-used.
Consequently, there is no need for the UE to know which S-NSSAIs are supported
on specific frequency bands as the network controls the AS resources to use
and the UE is moved by existing RRC means to the AS resources to use.
NOTE 3: In the event the UE requests multiple S-NSSAI (sets) that require
separate frequency bands not possible to support at the same time, the
solution may result in more registration attempts.
### 6.17.4 Impacts on services, entities and interfaces
The impacts to the 5GS entities are the following:
UE:
\- No impacts foreseen.
NG-RAN:
\- Support getting additional Target NSSAI and RFSP Index for the Target
NSSAI, and support moving the UE accordingly.
AMF:
\- Support a new or extended Policy Control Request Trigger condition when
Allowed NSSAI is based on default Subscribed S-NSSAI(s) due to Requested NSSAI
was not supported in the current TAI;
\- Support providing Target NSSAI to the PCF in the
Npcf_AMPolicyControl_Update Request message, and support receiving RFSP Index
for the Target NSSAI in the Npcf_AMPolicyControl_Update Response message;
\- Support providing Target NSSAI and RFSP Index for the Target NSSAI to NG-
RAN in an N2 message.
NSSF:
\- Decision to provide a Target NSSAI to the AMF.
PCF:
\- Support determining an RFSP for the Target NSSAI; and
\- Support extending the Access and mobility related policy control
information with RFSP Index for the Target NSSAI.
## 6.18 Solution #18: Proactive Slice Quota Enforcement in AMF
### 6.18.1 Introduction {#introduction-18}
This solution addresses the key issue #1, key issue #2, key issue #4 and key
issue #5.
### 6.18.2 High-level Description
This solution the AMF is the local enforcement point for the following slice
quotas:
\- maximum number of UEs in the network slice (KI#1).
\- maximum number of PDU Sessions in the network slice (KI#2).
\- maximum data rate per network slice (KI#5).
The Slice Quota Management (SQM) is a function of Quota Management to manage
the slice quota within the PLMN. During the first UE registration in the
network slice(S-NSSAI), the AMF proactively retrieves the allowed value of
local slice quota(s) of the S-NSSAI from the SQM, it then enforces the local
slice quota(s) as follows:
\- (KI#1) For maximum number of UEs in the network slice the AMF ensures the
number of UE in the network slice does not exceed the allowed value in the
quota for the network slice. When new UE is initially registered in the
network slice (i.e. the S-NSSAI is added into the Allowed NSSAI) the AMF adds
the number of UE. When the UE is deregistered from the network slice (i.e. the
UE is deregistered from network or the S-NSSAI is removed from the Allowed
NSSAI), or the UE context is transferred to another AMF, the AMF reduce the
number of UE in the network slice.
\- (KI#2) For maximum number of PDU Sessions in the network slice the AMF
ensures the number of PDU session in the network slice does not exceed the
allowed value in the quota for the network slice. When new PDU Session is
established in the network slice or new PDU session context of the network
slice is transferred from another AMF, the AMF adds the number of PDU session
in the network slice. When the PDU session is released or the PDU session
context is transferred to another AMF, the AMF reduce the number of PDU
Session in the network slice.
\- (KI#5) For maximum data rate per network slice, the AMF sums the Slice-MBR
of all UEs in Connected mode which have established PDU Session in the network
slice and ensures the total data rate does not exceed the allowed value in the
quota for the network slice. When the first PDU session of the UE in the
network slice is established or the first PDU session context of the network
slice is transferred from another AMF, the AMF adds the Slice-MBR of the
network slice. When the last PDU session of the UE in the network slice is
released or the last PDU session context of the network slice is transferred
to another AMF, the AMF reduces the Slice-MBR of the network slice. In order
to calculate the real data the AMF needs to know the PDU Session status. The
AMF may subscribe event report from SMF/I-SMF/V-SMF on when the PDU Session is
activated or is deactivated. The AMF may also request the NG-RAN to report the
RRC state information.
Editor\'s note: For KI#5, this solution depends on the solution 6.22 in which
the Slice-MBR is available in the AMF.
In roaming case, during the first UE registration for a given HPLMN, the AMF
retrieves the allowed value of local slice quota of the S-NSSAI from the SQM
in the home PLMN and then enforces the local slice quota at the VPLMN
according to the corresponding mapped S-NSSAI in the home PLMN.
When the AMF detects the local quota of network slice is overflown it notifies
the SQM(KI#4). The SQM may provide new fresh quota for this network slice. In
case of no more quota available, the AMF acts as follows:
\- If the maximum number of UEs in the network slice exceeds the quota, AMF
shall reject any further UE registration in the network slice by adding the
S-NSSAI in the rejected NSSAI and the cause value is set to \"S-NSSAI is not
available in the current registration area\". In this case, the UE can still
request Emergency Registration towards the network. When the UE moves outside
of the registration area the UE initiates a registration procedure and can
request the S-NSSAI again. When the AMF receives further quota of this slice
the AMF then adds the S-NSSAI in the Allowed NSSAI and initiates UE
Configuration Update procedure to the UE.
\- If maximum number of PDU Sessions in the network slice exceeds the quota,
the AMF shall reject any further PDU session establishment request with the
S-NSSAI and send a back off timer to the UE so the UE will not send PDU
Session establishment request with same S-NSSAI before the timer expires. When
the UE moves outside of the registration area, the UE shall stop the back off
timer.
\- If maximum data rate per network slice exceeds the quota, the AMF shall
reject any further PDU session establishment request with the S-NSSAI and send
a back off timer to the UE so the UE will not send PDU Session establishment
request with same S-NSSAI before the timer expires. The AMF shall reject any
further service request to activate the PDU session in the network slice. When
the UE moves outside of the registration area, the UE shall stop the back off
timer.
At any time, the UE can request PDU Session establishment for Emergency
Service, for Mission Critical Service and for Multimedia Priority Services.
The AMF shall not reject such request.
NOTE 1: During congestion, the AMF may determine to pre-empt the PDU session
for non-priority service based on local configuration.
NOTE 2: The AMF cannot detect the real data rate usage of a network slice.
Therefore, the data rate of the slice may be calculated as exceeding the quota
even the real data rate of the slice is still lower than the quota. In that
case either the new PDU Session are not allowed to be established or the
existing PDU Session are not allowed to be activated.
The slice quota in SQM can be preconfigured by OAM, or can be provisioned by
the Application Function with quota management. The SQM may allocates local
quota based on the service layer agreement, the AMF location or AMF
capability, etc. When the SQM allocates the local quota for each AMF it shall
ensure the overall quota does not exceed the maximum quota, e.g. not initially
allocate all quota of the slice to AMFs.The SQM may request the AMF to notify
the SQM when the local quota is overflown. The SQM may also request the AMF to
report the remaining/used quota for the network slice. The report will be once
or periodically depending on SQM request.
The SQM may be deployed together with the PCF, NSSF, NRF, NWDAF, OAM, CHF or
deployed as standalone function.
### 6.18.3 Procedures
Editor\'s note: This clause describes high-level procedures and information
flows for the solution.
Figure 6.18.3-1: A high-level procedure of the solution
1\. The AF may send AF request to SQM to provision the quota of network slice.
The AF request may be sent via NEF if the AF is third party AF and the NEF
performs authorization.
2\. During the first UE registration in the network slice (i.e. the S-NSSAI is
within the allowed NSSAI) and AMF knows the S-NSSAI is subject to quota
management, the AMF sends quota request to the SQM to retrieve the quota of
network slice. The quota request message may include the capacity information
of the AMF, AMF identifier and S-NSSAI, etc.
For roaming case the AMF determines the mapped S-NSSAI of the S-NSSAI in the
allowed NSSAI is subject to quota management, the AMF sends quota request to
the hSQM in home PLMN via vSQM to retrieve the quota of network slice.
The AMF may be configured whether the S-NSSAI is subject to quota management,
or receives such information from the NSSF.
3\. Based on service layer agreement and AMF capability, the SQM determines
the quota information of the network slice for the AMF and returns the quota
information to the AMF.
In the case of AMF Set, the SQM determines the quota information per AMF set.
The SQM also subscribe the notification event about when the quota is
overflown or report the remaining quota periodically, or quota threshold is
reached.
4\. The AMF enforce the quota information as described in clause 6.18.2.
5\. In case of quota information is overflown or periodical timer expires or
the notification event is met, the AMF notifies the SQM. If there is no usage
of the local quota the SMQ may revoke the local quota for the AMF.
6\. Optional, the SQM sends further notification to AF.
7\. Optional, the AF may determine to sends AF request to add more quota
information to the SQM.
8\. The SQM sends notification response to the AMF.
9\. The SQM may send quota update request to the AMF to refresh quota
information. If the SQM decides to move some quota from one AMF to another
AMF, it needs to update both AMFs to ensure the overall quota is not
overflown.
10\. The AMF stores and reviews the new quota information to apply the latest
quota enforcement. The AMF sends quota update response to the SQM and may
include the remaining local quota for the network slice.
### 6.18.4 Impacts on services, entities and interfaces
Editor\'s note: This clause describes impacts to existing entities and
interfaces.
**AMF:**
\- Interact with the SQM to retrieve the local slice quota information,
including the quota request/update/notification.
\- Local slice quota enforcement
**SMF:**
\- Add new event for Nsmf_EventExposure service: PDU Session activation and
PDU Session deactivation.
**New SQM function**
\- Manage the slice quota per PLMN.
\- Determine the local slice quota for each AMF/AMF set.
### 6.18.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.19 Solution #19: Support of network slice quota control and enforcement
### 6.19.1 Introduction {#introduction-19}
This solution addresses KI #1, 2 and 5, mainly focuses on the network slice
quota control and enforcement. The network slice quota includes:
\- Global quota which is provided by OAM to Quota Control Function (QCF) and
indicates the maximum number of UE or the maximum number of PDU Session
supported by the network slice in the 5GS.
\- Local quota is a separate part of global quota, e.g. quotas for and is the
maximum number of UE or the maximum number of PDU Session supported by the
Quota Enforcement Function (QEF). It is decided by QCF based on global quota
and NWDAF analytics on network slice quota and enforced by the Quota
Enforcement Function (QEF).
The NWDAF is able to collect network slice information and to perform data
analytics to provide network slice quota statistics or predictions.
QCF and QEF are functions which could be existing NF. E.g. QCF could be PCF,
OAM, CHF, UDM or UDR. QEF could be PCF, SMF, AMF or NSSF.
### 6.19.2 High-level Description
#### 6.19.2.1 Network Functions
The function of QCF, NWDAF and QEF are as follows:
\- QCF:
\- Obtains NWDAF analytics on network slice quota.
\- Decides network slice local quota based on the global quota and NWDAF
analytics result.
\- Provides the network slice local quota to QEF.
\- NWDAF:
\- Collects network slice information from QEF, OAM.
\- Performs data analytics to provide network slice quota statistics or
predictions to QCF.
\- QEF: Enforce the network slice local quota and notify the event related to
the local quota to QCF.
#### 6.19.2.2 Input & Output Data of NWDAF
The detailed information collected by the NWDAF related to network slice quota
as defined in the Table 6.19.2.2-1.
Table 6.19.2.2-1: Data collection for \"Network Slice Quota\" analytics
* * *
Information Source Description S-NSSAI QCF Information to identify a network
slice RAN UE Throughput OAM TS 28.554 Average UE bitrate in the cell (Payload
data volume on RLC level per elapsed time unit on the air interface, for
transfers restricted by the air interface), per timeslot, per cell, per 5QI
and per S-NSSAI. Status of local quota for number of UEs QEF The status of
quota for number of UEs > NF ID Identification of the NF > Status of local
quota (1..max) The status of quota for number of UEs at time stamp. >> Number
of UEs The number of UEs observed in the network slice. >> Timestamp A time
stamp associated to the quota usage. Status of local quota for number of PDU
Sessions QEF The status of quota for number of PDU Sessions > NF ID
Identification of the NF > Status of local quota (1..max) The status of quota
for number of PDU Sessions at time stamp. >> Number of PDU Sessions The number
of PDU Sessions observed in the network slice. >> Timestamp A time stamp
associated to the quota usage.
* * *
The NWDAF outputs the network slice quota analytics. The output may consist of
statistics, predictions or both. The detailed information provided by NWDAF is
defined in Table 6.19.2.2-2 for statistics and Table 6.19.2.2-3 for
predictions.
Table 6.19.2.2-2: \"Network Slice Quota\" statistics
* * *
Information Description S-NSSAI Information to identify a network slice
Network slice throughput  
> Applicable Area A list of TAIs or Cell IDs within the location information
> that the analytics applies to. > Applicable Time Period The time period
> within the Analytics target period that the analytics applies to. > Network
> slice throughput Average bitrate of the network slice Status of global quota
> of number of UEs The average number of UEs in the network slice over the
> analytics target period List of status of local quota of number of UEs List
> of observed number of UEs for each NF > NF ID Identification of the NF >
> Number of UEs The average number of UEs over the analytics target period
> List of status of local quota of number of PDU Sessions List of observed
> number of PDU Sessions for each NF > NF ID Identification of the NF > Number
> of PDU Sessions The average number of PDU Sessions over the analytics target
> period Status of global quota of number of PDU Sessions The average number
> of PDU Sessions in the network slice over the analytics target period
* * *
Table 6.19.2.2-3: \"Network Slice Quota\" predictions
* * *
Information Description S-NSSAI Information to identify a network slice
Network slice throughput  
> Applicable Area A list of TAIs or Cell IDs within the location information
> that the analytics applies to. > Applicable Time Period The time period
> within the Analytics target period that the analytics applies to. > Network
> slice throughput The expected value of the throughput of the network slice
> List of status of local quota of number of UEs List of predicted number of
> UEs for each NF > NF ID Identification of the NF > Number of UEs The number
> of UEs predicted for the NF Status of global quota of number of UEs The
> number of UEs predicted for the network slice List of status of local quota
> of number of PDU Sessions List of predicted number of PDU Sessions for each
> NF > NF ID Identification of the NF > Number of PDU Sessions The number of
> PDU Sessions predicted for the NF Status of global quota of number of PDU
> Sessions The number of PDU Sessions predicted for the network slice
* * *
### 6.19.3 Procedures
#### 6.19.3.1 Network Slice Global Quota Control based on NWDAF Analytics
Figure 6.19.3.1-1: Network Slice Global Quota Control based on NWDAF Analytics
1\. The QCF sends Nnwdaf_AnalyticsSubscription_Subscribe (Analytics ID=Network
Slice Quota, Target of Analytics Reporting=list of NF IDs, Analytics Filter=
(S-NSSAI), Analytics target period, Notification Correlation Id and
Notification Target Address, Analytics Reporting Information) to the NWDAF.
2\. The NWDAF collects the data from OAM and QEF. The event exposure service
operation is used in step 2a. The procedure in step 2b is captured in clause
6.2.3.2 in TS 23.288 [5].
3\. The NWDAF derives requested analytics.
4\. The NWDAF provides the analytics to the QCF.
5\. The QCF decides the network slice local quota based on the network slice
global quota and NWDAF analytics.
6\. The QCF invokes Nqcf_Quota_Notify to notify the network slice local quota
to the QEF.
#### 6.19.3.2 Network Slice Local Quota Request
Figure 6.19.3.2-1: Network Slice Local Quota Request
1\. The QEF sends Nqcf_SliceQuotaAllocation_Request (S-NSSAI) to the QCF. The
trigger of the step is the QEF receives request related to S-NSSAI which
requests for quota control but there is no local quota of the S-NSSAI in QEF.
The S-NSSAIs for quota control is configured in the QEF.
2\. The QCF decides the local quota and sends
Nqcf_SliceQuotaAllocation_Response (local quota of UE number and/or local
quota of PDU Session number) to the QEF.
NOTE: The local quota included in the Nqcf_SliceQuotaAllocation Response is an
initial local quota decided by the QCF based on operator policy. The QCF
adjusts the local quota later based on NWDAF analytics.
#### 6.19.3.3 Network Slice Local Quota Enforcement
##### 6.19.3.3.1 General Network Slice Local Quota Enforcement procedure
Figure 6.19.3.3-1: Local quota enforcement
1\. The QEF detects the triggers to update the UE number or PDU Session number
of the S-NSSAI. The detail of the step is described in clause 6.19.3.3.2 and
clause 6.19.3.3.3.
2\. The QEF enforces the network slice local quota, i.e. decides whether the
update of the UE number or PDU Session number leads to exceeding of the local
quota. In LBO roaming case, the QEF in VPLMN enforces the quota for roaming
UE, the QCF in VPLMN decides the local quota for roaming UE based on the SLA
and provides it to QEF. In Home Routed roaming case, the QEF and QCF can exist
in VPLMN or HPLMN.
3\. [Conditional] If the local quota is exceeded, the QEF notifies the event
to the QCF.
4\. [Conditional] If the local quota to be exceeded event is received, the QCF
decides to updates the local quota (e.g. increase the local quota) based on
NWDAF analytics.
5\. [Conditional] The QCF sends the Nqcf_Quota_Notify to QEF to notify the new
local quota.
##### 6.19.3.3.2 UE Number Local Quota Enforcement
To enforce UE number local quota, the QEF is supported by AMF, the QCF is
supported by primary AMF or NSSF or OAM. If the QCF is supported by the
primary AMF, the information of the primary AMF is preconfigured in the AMF.
When AMF decides to update the Allowed NSSAI of the UE which leads to
increase/ decrease the UE number of the S-NSSAI by one, the AMF triggers the
procedure in clause 6.19.3.3.1.
The detailed triggers for local quota check and the action of AMF (e.g.
increase/ decrease the UE number of the S-NSSAI by one) is shown in Table
6.19.3.3.2-1. In roaming case, the AMF in VPLMN enforce the local quota for
roaming UE which is provided by OAM in VPLMN based on SLA.
Table 6.19.3.3.2-1: Triggers for UE Number Local Quota check and AMF action
+----------------------+----------------------+----------------------+ | Triggers for local | | **AMF action** | +----------------------+----------------------+----------------------+ | quota check | UE number update | Quota enforcement | +----------------------+----------------------+----------------------+ | The Registration | Increase UE number | Checks whether local | | Request is received | of the S-NSSAI by | quota of the S-NSSAI | | and the AMF decides | one. | is exceeded after UE | | to add the S-NSSAI | | number update. If | | into the Allowed | | yes, the AMF | | NSSAI. | | performs the steps | | | | 3-5 in | | | | clause 6.19.3.2. If | | | | the local quota | | | | returned in step 5 | | | | is increased, then | | | | the AMF adds the | | | | S-NSSAI in the | | | | Allowed NSSAI. | | | | Otherwise, the AMF | | | | sends the rejected | | | | S-NSSAI and a back | | | | off time to UE via | | | | UCU procedure. | +----------------------+----------------------+----------------------+ | The Deregistration | Decreases the UE | Not needed | | Request is received | number of S-NSSAI by | | | or network triggered | one. | | | deregistration is | | | | detected | | | +----------------------+----------------------+----------------------+ | AMF decides to | Decreases the UE | Checks whether local | | update the Allowed | number by one if the | quota of the S-NSSAI | | NSSAI e.g. due to | S-NSSAI is to be | is exceeded after UE | | subscription change, | removed, increases | number is increased | | to add or remove the | the UE number by one | by one. If yes, the | | S-NSSAI from the | if the S-NSSAI is to | AMF performs the | | Allowed NSSAI. The | be added. | steps 3-5 in | | new Allowed NSSAI | | clause 6.19.3.1. If | | does not affect | | the local quota | | existing | | returned in step 5 | | connectivity to | | is increased, then | | network slice | | the AMF adds the | | | | S-NSSAI in the | | | | Allowed NSSAI. | | | | Otherwise, the AMF | | | | does not add the | | | | S-NSSAI in the | | | | Allowed NSSAI. | +----------------------+----------------------+----------------------+ | AMF triggers NSSAA | Increases the UE | Checks whether local | | for pending S-NSSAI | number by one if the | quota of the S-NSSAI | | | NSSAA result | is exceeded after UE | | | indicates success, | number update. If | | | the UE number is not | yes, the AMF | | | changed if the | performs the steps | | | result indicates | 3-5 in | | | failure. | clause 6.19.3.1. If | | | | the local quota | | | | returned in step 5 | | | | is increased, then | | | | the AMF adds the | | | | S-NSSAI in the | | | | Allowed NSSAI. | | | | Otherwise, the AMF | | | | sends the rejected | | | | S-NSSAI and a back | | | | off time to UE via | | | | UCU procedure. | +----------------------+----------------------+----------------------+ | AAA-S triggered | Decreases the local | Not needed | | Network | quota by one if the | | | Slice-Specific | re-authenticat | | | Re-authentication | ion/re-authorization | | | and Re-authorization | result indicates | | | for S-NSSAI | failure, the local | | | | quota is not changed | | | | if the result | | | | indicates success. | | +----------------------+----------------------+----------------------+ | AAA-S revokes the | Decreases the local | Not needed | | authorization of the | quota by one. | | | S-NSSAI | | | +----------------------+----------------------+----------------------+ | AMF relocation | Source AMF: | For source AMF: not | | | decreases the local | needed. | | | quota of S-NSSAI by | | | | one. | For target AMF: | | | | Checks whether local | | | Target AMF: | quota of the S-NSSAI | | | increases the local | is exceeded after UE | | | quota of S-NSSAI by | number update. If | | | one. | yes, the AMF | | | | performs the steps | | | | 3-5 in | | | | clause 6.19.3.1. If | | | | the local quota | | | | returned in step 5 | | | | is increased, then | | | | the AMF adds the | | | | S-NSSAI in the | | | | Allowed NSSAI. | | | | Otherwise, the AMF | | | | sends the rejected | | | | S-NSSAI and a back | | | | off time to UE via | | | | UCU procedure. | +----------------------+----------------------+----------------------+
##### 6.19.3.3.3 PDU Session number local quota enforcement
To enforce PDU Session number local quota, the QEF is supported by SMF/PCF,
the QCF is supported by primary SMF/primary PCF or OAM.
If the QEF is supported by SMF in order to enforce PDU Session number local
quota, the enhancement to the existing procedures are as follows:
\- UE Requested PDU Session Establishment procedure in Non-Roaming and Roaming
with Local Breakout in clause 4.3.2.2.1 in TS 23.502 [6]: after step 4, the
SMF increases the PDU Session number of the S-NSSAI by one and checks whether
the increase leads to exceeding of the local quota of PDU Session. If yes, the
SMF performs the steps 3-5 in clause 6.19.3.3.1. If the local quota returned
in step 5 is increased, then the SMF continues the PDU Session establishment
procedure. Otherwise, the SMF rejects the procedure with a back-off time.
\- UE Requested PDU Session Establishment procedure in Home-routed Roaming in
clause 4.3.2.2.2 in TS 23.502 [6]:
\- if local quota control for roaming UE is enforced in VPLMN, after step 3a,
the V-SMF increases the PDU Session number of the S-NSSAI by one and checks
whether the increase leads to exceeding of the local quota of PDU Session. If
yes, the V-SMF performs the steps 3-5 in clause 6.19.3.3.1. If the local quota
returned in step 5 is increased, then the V-SMF continues the PDU Session
establishment procedure. Otherwise, the V-SMF rejects the procedure with a
back-off time. In this case, the QCF is in VPLMN.
\- if local quota control for roaming UE is enforced in HPLMN, after step 6,
the H-SMF increases the PDU Session number of the S-NSSAI by one and checks
whether the increase leads to exceeding of the local quota of PDU Session. If
yes, the H-SMF performs the steps 3-5 in clause 6.19.3.3.1. If the local quota
returned in step 5 is increased, then the H-SMF continues the PDU Session
establishment procedure. Otherwise, the H-SMF rejects the procedure with a
back-off time. In this case, the QCF is in HPLMN
\- UE or network requested PDU Session Release for Non-Roaming and Roaming
with Local Breakout in clause 4.3.4.2 in TS 23.502 [6]: the SMF decreases the
PDU Session number of the S-NSSAI by one after step 1.
\- UE Requested PDU Session Establishment with Network Modification to MA PDU
Session in clause 4.22.3 in TS 23.502 [6]: if SMF decides to modify the PDU
Session to MA PDU Session by adding the 3GPP access, the SMF increases the PDU
Session number of the S-NSSAI by one and checks whether the increase leads to
exceeding of the local quota of PDU Session. If yes, the SMF shall not modify
the PDU Session to MA PDU Session.
If the QEF is supported by PCF in order to enforce PDU Session number local
quota, the enhancement to the existing procedures are as follows:
\- SM Policy Association Establishment in clause 4.16.4 in TS 23.502 [6]:
after step 2, the PCF increases the PDU Session number of the S-NSSAI by one
and checks whether the increase leads to exceeding of the local quota of PDU
Session. If yes, the PCF performs the steps 3-5 in clause 6.19.3.3.1. If the
local quota returned in step 5 is increased, then the PCF continues the SM
Policy Association Establishment procedure. Otherwise, the PCF rejects the
procedure with a back-off time. In LBO roaming case, the PCF is V-PCF. In home
routed roaming case, the PCF is H-PCF.
\- SM Policy Termination in clause 4.16.6 in TS 23.502 [6]: after step 2, the
PCF decreases the PDU Session number of the S-NSSAI by one. In LBO roaming
case, the PCF is V-PCF. In home routed roaming case, the PCF is H-PCF.
#### 6.19.3.4 Network Slice Quota Event notification
Figure 6.19.3.4-1: Network Slice Quota Event notification via NWDAF
1\. The AF requests to receive analytics information via NEF by invoking the
Nnef_AnalyticsExposure_Subscribe service operation to request analytics
information on network slice quota, e.g. the number of UEs or PDU Sessions in
the network slice reaches a threshold.
2\. Based on the request from the AF, the NEF requests analytics information
by invoking the Nnwdaf_AnalyticsSubscription_Subscribe service operation.
3\. The NWDAF responds with the analytics information to the NEF.
4\. The NEF responds with the analytics information to the AF.
### 6.19.4 Impacts on services, entities and interfaces
Impacts on existing nodes and functionality:
\- QCF could be an existing NF (e.g. OAM, PCF or UDM) which is impacted to
support:
\- Obtains NWDAF analytics on network slice quota.
\- Decides network slice local quota based on the global quota and NWDAF
analytics result.
\- Provides the network slice local quota to QEF.
\- NWDAF:
\- Collects network slice information from QEF, OAM.
\- Performs data analytics to provide network slice quota statistics or
predictions to QCF.
\- QEF could be an existing NF (e.g. PCF, AMF or SMF) which is impacted to
support:
\- Enforces the network slice local quota; and
\- Notifies the event related to the local quota to QCF.
## 6.20 Solution #20: Reusing existing QoS model to ensure that to limit the
Maximum throughput UL/DL in a Network slice is not exceeded
### 6.20.1 Introduction {#introduction-20}
This solution proposes to reuse the existing QoS model and that the PCF
calculates the MBR per SDF, Session-AMBR, and UE-AMBR taking into the Slice-
MBR per S-NSSAI and UE configured by OAM in the PCF or stored in the UDR
(KI#3) or the Slice-MBR per S-NSSAI configured by OAM in the PCF (KI#5).
In KI#3, the Slice-MBR (i.e. UE Slice-MBR) limits the bitrate of UE in a
S-NSSAI ensuring that the aggregated MBR for all SDFs of the PDU sessions (and
therefore all QoS flows) of a UE that use the slice do not exceed the Slice-
MBR value.
Similarly, for KI#5, the Slice-MBR (i.e. Total Slice-AMBR) limits the bitrate
in a S-NSSAI ensuring that the aggregate MBR of the SDFs of the PDU sessions
of all UEs that use the slice do not exceed the Slice-MBR value.
Two solution alternatives are described both when the same PCF is selected to
serve all PDU sessions of a UE within a S-NSSAI (KI#3) or to serve all PDU
sessions within a S-NSSAI (KI#5) and when there are different PCFs serving
each PDU session within a S-NSSAI.
### 6.20.2 High-level Description
An example of how the PCF may assign the MBR per SDF of a PCC Rules or the
Session-AMBR follows, note that the exact mechanism in PCF is up to
implementation.
\- For each PCC Rule, the PCF calculates the MBR value per SDF and the
accumulated MBR for all SDFs per S-NSSAI. A similar action can be taken as for
the calculation of the Authorized Session-AMBR value.
\- if the accumulated MBR per S-NSSAI is not greater than the Slice-MBR, then
the PCF provides the MBR value in the PCC rule to the SMF for enforcement.
Note that the PCF may take other input into account, such as predictions on
the number of PDU session established for a UE to calculate the MBR value for
a SDF or prioritize allocation of MBR values for SDFs with GBR 5QIs over non
GBR 5QIs.
\- if the accumulated MBR per S-NSSAI is greater than the Slice-MBR, then the
PCF takes an action to ensure the Slice-MBR is not surpassed.
\- For each PDU session, the PCF calculates the Authorized Session-MBR for a
PDU Session and the accumulated Session-AMBR for all PDU sessions per S-NSSAI.
\- if the accumulated Session-AMBR per S-NSSAI is not greater than the Slice-
MBR, then the PCF provides the Authorized Session-AMBR value to the SMF for
enforcement.
\- if the accumulated Session-AMBR per S-NSSAI is greater than the Slice-AMBR,
then the PCF begins to collect the actual bitrate report of each UPF with
N6/N19 interface in the slice periodically and checks whether the actual data
rate of the slice is surpassed. The following actions are taken by the PCF to
ensure the Slice-AMBR is not surpassed:
\- if the actual data rate of the slice does not exceed the limitation of the
slice in UL/DL, the PCF may decrease the authorized Session-AMBR for new PDU
sessions and the existing PDU sessions gradually.
\- if the actual data rate of the slice exceeds the limitation of the slice in
UL/DL, the PCF decreases the authorized Session-AMBR for the new and the
existing PDU sessions. The PCF may not authorize new PDU sessions and may
release the existing PDU sessions with lower priority, if decreasing does not
work (e.g. limited by the minimum data rate required for the least service
experience, or continuously exceeding the data rate limit of the slice).
#### 6.20.2.1 Method 1: Same PCF selected to serve all DNNs to the same
S-NSSAI
In this method, PCF discovery and selection are performed by the SMF as
defined in TS 23.501 [2], clause 6.3.7.1, the (H-)SMF considers local policies
that assigns either the same (H-)PCF in non-roaming or home-routed for all PDU
sessions of a UE of a S-NSSAI in the HPLMN (KI#3) or the same the same (H-)PCF
in non-roaming or home routed for all PDU sessions of all UEs of a S-NSSAI in
the HPLMN (KI#5). Similarly, the (V-)SMF considers local policies that assigns
either the same V-PCF.
The (H-)PCF stores the accumulated values for the Session-AMBR and the MBR for
all SDFs of all PDU session of a UE within the S-NSSAI (KI#3) or the Session-
AMBR and the MBR for all SDFs of all PDU session of all UE within the S-NSSAI
(KI#5).
In order to enable the H-PCF to control the accumulated values for PDU
sessions in LBO, the V-PCF requests the H-PCF to check the Slice-MBR for each
of the PDU sessions in LBO.
The V-PCF performs H-PCF discovery and selection considering local policies
that assign the same H-PCF for a UE of a S-NSSAI, these local policies are
aligned and agreed with HPLMN.
According to the configuration, the UPFs measure the N6/N19 interface UL/DL
throughputs for the S-NSSAI and report the average N6/N19 interface UL/DL
bitrate per S-NSSAI to the PCF via the SMFs frequently, e.g. per minute. The
PCF collects the actual bitrate report from the UPFs and calculates the actual
data rate of the whole slice (KI#5).
#### 6.20.2.2 Method 2: PCF selected to serve each PDU session in an S-NSSAI
This method allows to select a PCF serving each PDU session, then the PCF read
and store:
\- The accumulated Session-AMBR and MBR per SDF per SUPI, and S-NSSAI in the
H-UDR (KI#3).
\- The accumulated Session-AMBR and MBR per SDF per S-NSSAI in the H-UDR
(KI#5).
NOTE: The V-PCF sends the accumulated values to the H-PCF that will check and
store in H-UDR.
According to the configuration, the UPFs measure the N6/N19 interface UL/DL
throughputs for the S-NSSAI and report the average N6/N19 interface UL/DL
bitrate per S-NSSAI to the PCFs via the SMFs frequently, e.g. per minute. The
PCFs store the latest received report from the UPFs in the UDR. Each PCF
involved can read the latest report of all the UPFs in the slice from the UDR
and calculate the actual data rate of the whole slice (KI#5).
### 6.20.3 Procedures
#### 6.20.3.1 Slice-AMBR and MBR per PCC Rule enforcement (Method 1)
Figure 6.20.3.1-1: SM Policy Association establishment - Slice-AMBR
enforcement
In non-roaming, the PCF is configured via OAM about Slice-MBR per UE (KI#3) or
Total-Slice-MBR (KI#5). In home routed the H-PCF is configured via OAM about
Slice-MBR per UE (KI#3) or Total-Slice-MBR (KI#5) for all home routed PDU
sessions. In LBO, the V-PCF may be configured via OAM about Slice-MBR per
roaming partner.
1\. The PCF discovery and selection by the SMF as described in TS 23.501 [2]
clause 6.3.7.1 using the local policies that indicates which PCF to select for
all PDU sessions within the S-NSSAI. The SMF request to provide Policy control
data for this PDU session to the PCF, the PCF calculates the Session MBR and
the MBR per PCC Rule taking the per UE Slice-AMBR (or Total Slice-MBR) into
account and the accumulated values. The PCF may decide to e.g. terminate a PDU
session for a bronze user if there is a total Slice-MBR for a S-NSSAI.
2\. The PCF provides the Session-AMBR, and PCC Rules for the PDU session as
defined in TS 23.502 [6] clause 4.16.4.
NOTE: The accumulated values are kept in the PCF then used in the calculation
of the authorized Session-AMBR, and MBR per SDFs for other PDU sessions for
the UE within the same S-NSSAI. An example of how to calculate the Authorized
Session-AMBR or the MBR per SDF is described in clause 6.20.2.
#### 6.20.3.2 Slice-AMBR and MBR per PCC Rule enforcement (Method 2)
Figure 6.20.3.2-1: SM Policy Association establishment - Slice-AMBR
enforcement
Each PCF within the S-NSSAI is configured via OAM about Slice-AMBR per UE
(KI#3) or Total Slice-AMBR (KI#5). The Policy Control Subscription data in the
UDR in the HPLMN stores the accumulated Slice-AMBR and MBR per SDF per UE,
S-NSSAI. The Policy Control Subscription Data in the UDR in the VPLMN stores
the accumulated Slice-AMBR and MBR per SDF for roamers in the S-NSSAI.
1\. The SMF request to provide Policy control data for this PDU session to the
PCF,
2-3. The PCF retrieves Policy Control Subscription Data for the S-NSSAI from
the UDR, as defined in TS 23.502 [6] clause 4.16, including the accumulated
Session-AMBR and the accumulated MBR per SDF for the SUPI, S-NSSAI (KI#3) or
the accumulated Session-AMBR and the accumulated MBR per SDF for the S-NSSAI
(KI#5).
4\. The PCF calculates the Session AMBR and the MBR per PCC Rule taking the
accumulated values retrieved from UDR, that is provided to the SMF.
5-6. The new accumulated values are stored in the UDR, these values take into
account if a PDU session is active or inactive.
### 6.20.4 Impacts on services, entities and interfaces
PCF:
\- It is configured by OAM with the Slice-MBR per UE (KI#3) or Total Slice-MBR
(KI#5). Different value may exist per user category.
\- It is configured by OAM with the Slice-MBR for roamers (KI#3) or Total
Slice-MBR for roamers (KI#5) applicable for local breakout.
\- In LBO, the V-PCF request the H-PCF to check if the Slice-MBR value is
exceeded.
\- Considers the per UE Slice-MBR (KI#3) or Total Slice- MBR (KI#5 to
calculate Authorized Session-AMBR, MBR per SDF in a PCC Rule or UE-AMBR.
\- Calculates the accumulated values of the Session-AMBR, MBR for SDFs, and
UE-AMBR. Calculates the accumulated values of the Session-AMBR, MBR for SDFs,
taking the actual data rate of the slice into account when deciding the
Session-AMBR for PDU sessions (KI#5).
\- In method 2, when different PCFs may be selected for each PDU session of a
UE and per each UE in a S-NSSAI., stores the accumulated values in UDR
UDR: For method 2.
\- The (H-)UDR for non-roaming or home-routed stores the accumulated Session-
AMBR and the accumulated MBR per SDFs for all PDU sessions of a UE within a
S-NSSAI (KI#3),
\- The (H-)UDR for non-roaming or hom-routed or V-UDR for local breakout
stores the accumulated Session-AMBR, and the accumulated MBR per SDFs for all
PDU sessions of all UEs within a S-NSSAI and the accumulated UE-AMBR in a
S-NSSAI (KI#5),
\- The (V-)UDR for local breakout stores the accumulated Session-AMBR and the
accumulated MBR per SDFs for all PDU sessions of roamers within a S-NSSAI.
SMF:
\- In method 1, it is configured to select the same PCF serving all PDU
sessions of a UE within a S-NSSAI for KI#3 or the same PCF serving all PDU
sessions within a S-NSSAI for KI#5.
## 6.21 Solution #21: Limitation of data rate per network slice in UL and DL
per UE without RAN involvement
### 6.21.1 Introduction {#introduction-21}
This solution addresses the Key Issue #3: limitation of data rate per network
slice in UL and DL per UE.
It is based on the assumption that the data rate limit per network slice in UL
and DL per UE, defined as maximumUESliceAMBR, is stored in the UDM or OAM and
can be retrieved by other NFs when needed.
In this solution, actualUESliceAMBR is defined as the accumulated session AMBR
across all the active PDU sessions associated with the same network slice per
UE + accumulated MFBR across all active GBR flows across all the established
PDU sessions associated with the same network slice per UE.
### 6.21.2 High-level Description
In this solution, the enforcement happens whenever:
1\. A new PDU Session associated with the network slice is being established;
or
2\. An existing PDU session associated with the network slice is undergoing
PDU Session Modification to add, modify or delete GBR flows, or to modify the
session-AMBR value.
The maximumUESliceAMBR is compared with the current actualUESliceAMBR (by
including the session-AMBR and MFBR for the PDU session/GBR flows to be
established). If the current actualUESliceAMBR exceeds the maximumUESliceAMBR
in either UL or DL:
1\. Session-AMBR for the PDU session shall be reduced such that
actualUESliceAMBR does not exceed the maximumUESliceAMBR. If actualUESliceAMBR
still exceeds maximumUESliceAMBR after reducing session AMBR to 0 (i.e. no
non-GBR flows shall be allowed on this PDU session), then
Editor\'s note: Whether and how session-AMBR of existing PDU sessions can be
adjusted when GBR flow(s) on new PDU session is being established is FFS.
2\. MFBR for the GBR flows being established or modified for this PDU Session
shall be reduced until it reaches GFBR such that actualUESliceAMBR does not
exceed the maximumUESliceAMBR. If there are multiple GBR flows, the GBR flows
shall be chosen in the order of ARP as candidates for reduction in MFBR. If
actualUESliceAMBR still exceeds maximumUESliceAMBR then
3\. The ongoing PDU Session establishment or modification procedure shall be
rejected with cause \'Insufficient Resources for Specific Slice\'
In this solution, the ongoing active flow bit rate (i.e. actual UL/DL
throughput) does not need to be considered at any moment. The UE and UPF shall
be responsible for session-AMBR and MFBR enforcement in UL and DL
respectively. This solution does not require any RAN or UE impacts.
Editor\'s note: It is FFS whether release of a PDU Session needs to be
notified to a SMF which is serving other ongoing PDU sessions.
### 6.21.3 Procedures
Since a network slice may include multiple PDU sessions per UE, and different
SMFs and UPFs may be selected to serve different PDU Sessions involved in a
slice, in this solution NSQ shall handle comparison between maximumUESliceAMBR
and actualUESliceAMBR, and provide the feedback to the SMF. While the UE is
registered, the NSQ shall maintain the current actualUESliceAMBR, which is
essentially the accumulated session AMBR across all the active PDU sessions
(across all SMFs) associated with the same network slice per UE + accumulated
MFBR across all active GBR flows across all the established PDU sessions
(across all SMFs) associated with the same network slice per UE.
NOTE: NSQ has been described in Solution#10.
The following changes to the existing procedures are necessary:
#### 6.21.3.1 PDU Session Establishment procedure
Figure 6.21.3.1-1: Limitation of data rate per network slice per UE during PDU
Session Establishment procedure
1\. NSQ is pre-provisioned with the maximumUESliceAMBR by OAM or UDM.
2\. UE initiates PDU Session Establishment procedure, including S-NSSAI \'a\'.
3\. SMF sends Nnsq_PDUSession_DataRate_Check_Request to NSQ, and includes the
S-NSSAI \'a\', UE-ID, PDU Session ID, Session-AMBR and MFBR values for all the
GBR flows to be established.
4\. NSQ compares the maximumUESliceAMBR with the [current actualUESliceAMBR +
session-AMBR + MFBR values received in step 3].
5a. If the current actualUESliceAMBR + session-AMBR + MFBR is within the
maximumUESliceAMBR in both UL and DL, NSQ sends
Nnsq_PDUSession_DataRate_Check_Response to SMF, and includes a success cause
code. Steps 5b and 6/7 are not executed.
5b. If the current actualUESliceAMBR + session-AMBR + MFBR exceeds the
maximumUESliceAMBR in either UL or DL, NSQ sends
Nnsq_PDUSession_DataRate_Check_Response to SMF, and includes the difference
between actualUESliceAMBR and maximumUESliceAMBR for UL and/or DL (i.e.
deltaUESliceAMBRuL and deltaUESliceAMBRdL). Additionally, NSQ includes cause
code \'MaximumUESliceAMBR reached\'.
6\. Based on the response from NSQ, if NSQ includes cause code
\'MaximumUESliceAMBR reached\', SMF shall then:
Step 1: If session-AMBR value is greater than or equal to deltaUESliceAMBR,
reduce the Session AMBR for the new PDU session by deltaUESliceAMBR and skip
steps 2 and 3 below. Else, reduce session-AMBR to minimum possible value (e.g.
0).
Step 2: Reduce the MFBR for the GBR flows such that cumulative reduction in
session-AMBR done in step 1 and reduction in MFBR done in step 2 is greater
than or equal to deltaUESliceAMBR. Reduction in MFBR per GBR flows shall only
be done until it reaches GFBR associated with the GBR flow. If there are
multiple GBR flows, the GBR flows shall be chosen in the order of ARP as
candidates for reduction in MFBR.
7\. If, at end of previous step, SMF is still unable to reduce the bit rates
by deltaUESliceAMBR, then SMF shall send PDU Session Establishment Reject to
UE and include cause code \'Insufficient Resources for network slice\'.
Subsequent steps shall not be executed.
8\. SMF updates NSQ with the adjusted session-AMBR value for the PDU Session
as well as adjusted MFBR values for the GBR flows associated with the PDU
session. SMF includes the S-NSSAI \'a\', PDU Session ID, UE-ID, and specifies
the \'Addition\' operation.
9\. NSQ checks if it already has a previous session-AMBR and/or MFBR values
associated with the same PDU Session ID for this UE. If yes, the previous
session-AMBR and MFBR values shall be subtracted from the current
actualUESliceAMBR, i.e.:
current actualUESliceAMBR = current actualUESliceAMBR - (old session-AMBR +
old MFBR values for PDU Session id for this UE-ID).
NSQ then updates actualUESliceAMBR such that:
actualUESliceAMBR = current actualUESliceAMBR + session-AMBR + MFBR values
received in step 8.
current actualUESliceAMBR = actualUESliceAMBR
10\. NSQ responds back to SMF with success cause code, and includes the
S-NSSAI \'a\', PDU Session ID, UE-ID.
11\. SMF proceeds with the PDU Session establishment procedure.
#### 6.21.3.2 PDU Session Modification Procedure
UE or network triggered PDU Session Modification procedure may be initiated to
add, delete or modify QoS flows. The signalling flow below is applicable to
addition or modification.
Figure 6.21.3.2-1: Limitation of data rate per network slice per UE during PDU
Session Modification procedure
1\. NSQ is pre-provisioned with the maximumUESliceAMBR by OAM or UDM.
2\. UE or network initiates PDU Session modification procedure to add or
modify QoS flows associated with existing PDU Session for S-NSSAI \'a\'.
3\. SMF sends Nnsq_PDUSession_DataRate_Check_Request to NSQ, and includes the
S-NSSAI \'a\', UE-ID, PDU Session ID, Session-AMBR and MFBR values for all the
GBR flows to be established or modified.
4\. NSQ shall compare the maximumUESliceAMBR with the [current
actualUESliceAMBR + session-AMBR + MFBR values received in step 3].
5a. If the current actualUESliceAMBR + session-AMBR + MFBR is within the
maximumUESliceAMBR in both UL and DL, NSQ sends
Nnsq_PDUSession_DataRate_Check_Response to SMF and includes a success cause
code. Steps 5b and 6/7 are not executed.
5b. If the current actualUESliceAMBR + session-AMBR + MFBR exceeds the
maximumUESliceAMBR in either UL or DL, NSQ sends
Nnsq_PDUSession_DataRate_Check_Response to SMF, and includes the difference
between actualUESliceAMBR and maximumUESliceAMBR for UL and/or DL (i.e.
deltaUESliceAMBRuL and deltaUESliceAMBRdL). Additionally, NSQ includes cause
code \'MaximumUESliceAMBR reached\'.
6\. Based on the response from NSQ, SMF shall then:
Step 1: If session-AMBR value is greater than or equal to deltaUESliceAMBR,
reduce the Session AMBR for the new PDU session by deltaUESliceAMBR and skip
steps 2 and 3 below. Else, reduce session-AMBR to minimum possible value (e.g.
0).
Step 2: Reduce the MFBR for the GBR flows such that cumulative reduction in
session-AMBR done in step 1 and reduction in MFBR done in step 2 is greater
than or equal to deltaUESliceAMBR. Reduction in MFBR per GBR flow shall only
be done until it reaches GFBR associated with the GBR flow. If there are
multiple GBR flows, the GBR flows shall be chosen in the order of ARP as
candidates for reduction in MFBR.
7\. If, at end of previous step, SMF is still unable to reduce the bit rates
by deltaUESliceAMBR, then SMF shall send PDU Session Modification Reject to UE
(in case of UE initiated PDU session modification procedure), and include
cause code \'Insufficient Resources for network slice\'. Subsequent steps
shall not be executed.
8\. SMF updates NSQ with the adjusted session-AMBR value for the PDU Session
as well as adjusted MFBR values for the GBR flows associated with the PDU
session. SMF includes the S-NSSAI \'a\', PDU Session ID, UE-ID, and specifies
the \'Addition\' operation.
9\. NSQ checks if it already has a previous session-AMBR and/or MFBR values
associated with the same PDU Session ID for this UE-ID. If yes, the previous
session-AMBR and MFBR values shall be subtracted from the current
actualUESliceAMBR, i.e.:
\- current actualUESliceAMBR = current actualUESliceAMBR - (old session-AMBR +
old MFBR values for PDU Session id for this UE-ID).
\- NSQ then updates actualUESliceAMBR such that:
\- actualUESliceAMBR = current actualUESliceAMBR + session-AMBR + MFBR values
received in step 8.
\- current actualUESliceAMBR = actualUESliceAMBR.
10\. NSQ responds back to SMF with success cause code, and includes the
S-NSSAI \'a\', PDU Session ID, UE-ID.
11\. SMF proceeds with the PDU Session modification procedure.
The following signalling flow is applicable to scenarios when QoS flows are
deleted by UE or network:
Figure 6.21.3.2-2: Update of actualUESliceAMBR during PDU Session Modification
procedure
1\. NSQ is pre-provisioned with the maximumUESliceAMBR by OAM or UDM.
2\. UE or network initiates PDU Session modification procedure to delete QoS
flows associated with existing PDU Session for S-NSSAI \'a\'.
3\. SMF updates NSQ with the session-AMBR value for the PDU Session as well as
MFBR values for the GBR flows associated with the PDU session which are still
valid (i.e. not deleted). SMF includes the S-NSSAI \'a\', PDU Session ID, UE-
ID, and specifies the \'Addition\' operation.
4\. NSQ checks if it already has a previous session-AMBR and/or MFBR values
associated with the same PDU Session ID for this UE-ID. If yes, the previous
session-AMBR and MFBR values shall be subtracted from the current
actualUESliceAMBR, i.e.:
current actualUESliceAMBR = current actualUESliceAMBR - (old session-AMBR +
old MFBR values for PDU Session id for this UE-ID).
NSQ then updates actualUESliceAMBR such that:
actualUESliceAMBR = current actualUESliceAMBR + session-AMBR + MFBR values
received in step 3.
current actualUESliceAMBR = actualUESliceAMBR.
5\. NSQ responds back to SMF with success cause code, and includes the S-NSSAI
\'a\', PDU Session ID, UE-ID.
6\. SMF proceeds with the PDU Session modification procedure.
#### 6.21.3.3 PDU Session Release Procedure
Figure 6.21.3.3-1: Update of actualUESliceAMBR during PDU Session Release
procedure
1\. NSQ is pre-provisioned with the maximumUESliceAMBR by OAM or UDM.
2\. UE or network initiates PDU Session release procedure for the PDU Session
associated with S-NSSAI \'a\'.
3\. SMF updates NSQ with the session-AMBR value for the PDU Session as well as
MFBR values for the GBR flows associated with the PDU session. SMF includes
the S-NSSAI \'a\', PDU Session ID, UE-ID, and specifies the \'Deletion\'
operation.
4\. NSQ then updates actualUESliceAMBR such that:
actualUESliceAMBR = current actualUESliceAMBR - session-AMBR - MFBR values
received in step 3.
current actualUESliceAMBR = actualUESliceAMBR.
5\. NSQ responds back to SMF with success cause code, and includes the S-NSSAI
\'a\', PDU Session ID, UE-ID.
6\. SMF proceeds with the PDU Session release procedure.
#### 6.21.3.4 Deregistration procedure
When a UE or network initiated de-registration procedure is initiated, AMF
shall update NSQ as described in Solution 2. NSQ shall additionally reset the
actualUESliceAMBR to 0.
### 6.21.4 Impacts on services, entities and interfaces
**UDM:** Store the maximumUESliceAMBR value for all the subscribed NSSAIs per
UE. Provide this information to NSQ.
**NSQ:** Retrieve the maximumUESliceAMBR value from UDM. Applies comparison
and update between actualUESliceAMBR and maximumUESliceAMBR.
**SMF:** According to the response from NSQ, SMF needs to apply reduction in
the session-AMBR and/or MFBR for the GBR flows. SMF may also need to reject
the PDU Session establishment procedure based on feedback from NSQ.
### 6.21.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.22 Solution #22: Solution on limitation of data rate per Network Slice in
UL and DL per UE
### 6.22.1 Introduction {#introduction-22}
The related attribute in the GST documented in GSMA is Maximum downlink/uplink
throughput per UE. There should be subscribed slice maximum bitrate in the UDM
as the attribute is per UE basis and could be used to offer different contract
qualities like gold, silver and bronze.
The maximum data rate supported by the network slice describes the capability
(i.e. supported resource) of a network slice. Hence, it should contain both
GBR and non-GBR resource types data rate limitation.
### 6.22.2 High-level Description
Each slice (S-NSSAI) per UE is associated with the following aggregate rate
limit QoS parameter:
\- Slice Maximum Bitrate (SMBR).
(R)AN will limit the aggregate bit rate that can be expected to be provided
across all GBR and Non-GBR QoS Flows of a specific slice within the (R)AN.
It is proposed to use same procedure as UE AMBR to control SMBR since (R)AN is
the only centralized node which could control all PDU Sessions of a UE within
a specific slice:
During the registration, the AMF will get the Subscribed SMBR from the UDM and
send it to the AN. (In roaming case, AMF may optionally send it to the V-PCF
for authorization of the value the HPLMN provides for the VPLMN based on
agreement.) It is considering both GBR and non-GBR resource types. Each (R)AN
shall set its SMBR to the sum of the Session-AMBR and MFBR for GBR QoS Flows
of all PDU Sessions with active user plane to this (R)AN within the specific
slice up to the value of the received SMBR from AMF.
The (R)AN enforces the SMBR across all GBR and Non-GBR QoS Flows of a UE
belonging to PDU Sessions with an active user plane of that specific slice as
follows:
1) The (R)AN shall ensure that the traffic of GBR QoS Flows is not affected up
to the amount indicated by the GFBR value of the respective QoS Flow. Whenever
a GBR QoS Flow is established or modified, the (R)AN shall check if the sum of
the GFBR values (including the new/modified QoS Flow) is larger than the SMBR
value. If so, the (R)AN determines whether the new/modified GBR QoS Flow can
pre-empt any existing GBR QoS Flow of the same or a different PDU Session of
the UE within the slice based on their ARP values. If this is not possible,
the (R)AN shall reject the establishment/modification of the QoS Flow.
2) The (R)AN shall ensure that the aggregated bitrate across all GBR and Non-
GBR QoS Flows is not exceeding the SMBR by shaping the traffic of non-GBR QoS
Flows and/or dropping packets exceeding the GFBR from GBR QoS Flows with
MFBR>GFBR. The details of the enforcement are implementation specific, e.g.
the ratio in which different non-GBR QoS Flows are served, the ratio between
shaping and packet dropping, the selection of which packet to drop and so on.
NOTE: Existing queue management mechanisms will handle the packet dropping for
the non-GBR QoS Flows.
### 6.22.3 Procedures
#### 6.22.3.0 General
It is proposed to add SMBR as a new parameter as following.
The AMF retrieves the Access and Mobility Subscription data and other
subscription data using Nudm_SDM_Get service operation. Subscribed SMBR is
included in Access and Mobility Subscription data (same as Subscribed UE
AMBR). In roaming case, the AMF sends Subscribed SMBR to the PCF for
authorization. PCF will send the authorized SMBR to the AMF. AMF send the
received SMBR, i.e. either Subscribed SMBR received from UDM or, if
applicable, authorized SMBR from PCF, to the (R)AN. The (R)AN sets its SMBR to
the sum of the Session-AMBR and MFBR for GBR QoS Flows of all PDU Sessions
with active user plane to this (R)AN within the specific slice up to the value
of the received SMBR from AMF. The (R)AN will limit the aggregate bit rate
that can be expected to be provided across all GBR and Non-GBR QoS Flows of a
specific slice within the AN as described in clause 6.22.2.
Some procedures could be impact as shown in following clauses.
#### 6.22.3.1 Registration
UE sends Initial Registration Request as described in step 1-3 of clause
4.2.2.2.2 of TS 23.502 [6].
The detail flows are shown in Figure 6.22.3-1.
Figure 6.22.3-1: Procedures for Slice-AMBR during registration
1-2. The AMF retrieves subscribed SMBR per S-NSSAI from UDM.
3\. The AMF may provide the Allowed NSSAI and the subscribed SMBR for each
S-NSSAI in the Allowed NSSAI to PCF in roaming case.
4\. The PCF may authorize the subscribed SMBR and send the dynamic serving
network SMBR for each S-NSSAI in the Allowed NSSAI to the AMF.
NOTE: The VPLMN may downgrade the SMBR for roaming users based on roaming
agreement.
5\. If received from PCF, the AMF sends the Authorized SMBR per S-NSSAI to
(R)AN when needed. Otherwise the AMF sends the Subscribed SMBR per S-NSSAI
obtained from the UDM to (R)AN.
#### 6.22.3.2 PDU session establishment
Figure 6.22.3.2-1
12\. In N2 SM information the GFBR of any GBR QoS flows is evaluated against
the SMBR for the S-NSSAI in the UE context. The RAN stops admitting more GBR
QoS flows when admitting them would imply overflow of the SMBR. The RAN shall
first reserve the cumulative GFBR needed for the GBR QoS Flows, and then
initiate the enforcement for the non-GBR QoS Flow.
#### 6.22.3.3 PDU session modification
Figure 6.22.3.3-1
4\. In N2 SM information the GFBR of GBR QoS flows is evaluated against the
SMBR for the S-NSSAI in the UE context. The RAN stops admitting more GBR QoS
flows when admitting them would cause overflow the SMBR. If the GFBR of the
QoS Flow cannot be allowed, then the RAN rejects the PDU session modification
in step 6. The RAN shall first reserve the cumulative GFBR needed for the GBR
QoS Flows, and then initiate the enforcement for the non-GBR QoS Flow.
#### 6.22.3.4 Service Request
Figure 6.22.3.4-1
In Step 12, in addition to the allowed NSSAI, the AMF provides to the RAN for
each S-NSSAI for which it is applicable, the SMBR.
### 6.22.4 Impacts on services, entities and interfaces
AMF:
\- Support Subscribed SMBR transfer during initial registration via Nudm_SDM
Service.
\- Support SMBR transfer via N2 interface and SMBR enforcement.
UDM:
\- Support Subscribed SMBR transfer during initial registration via Nudm_SDM
Service.
PCF:
\- Support authorized SMBR transfer via Npcf_AMPolicyControl Service.
RAN:
\- Support SMBR transfer via N2 interface and SMBR enforcement.
## 6.23 Solution #23: Network slice quota event notification
### 6.23.1 Introduction {#introduction-23}
This solution addresses the below requirements from Key Issue #4: \"Support
for network slice quota event notification in a network slice\":
\- Whether and how an AF can request event notifications from 5GS and be
notified by 5GS on quotas on network slice related attributes? e.g. notifying
the AF whether a quota for certain attribute has reached a specified
threshold, thereby allowing the AF to influence 5GS routing decisions.
### 6.23.2 High Level Description
The solution proposes to introduce new Network Slice Quota Notification
Function (NSQ-NF). A service provider (e.g. AF) may subscribe with the NSQ-NF
via the NEF for network slice quota event notifications for one or more
attributes of the network slice, e.g. max number of UEs per network slice, max
number of PDU Sessions per network slice and max UL or DL data rate per
network slice per UE. The network slice quota notification to the AF may be
triggered when a threshold is reached or periodically.
This solution is compatible with any of the solutions for network slice quota
control in KIs#1, KI#2 and KI#3 as the proposed NSQ-NF resides with the
network entity that is responsible and/or holds the up-to-date network slice
quota information, i.e. NSQ, NSSF, PCF, NWDAF, OAM or CHF or UDM.
### 6.23.3 Procedures
#### 6.23.3.1 Network slice quota event notification subscription by AF
Figure 6.23.3.1-1: Network slice quota event notification subscription by AF
1) The AF requests a subscription for network slice quota event notification
service by sending Nnef_EventExposure_Subscribe_Request message to the NEF.
The AF includes the following parameters:
\- network_slice_id - one or more network slice identities (i.e. S-NSSAIs) for
which the AF requires network slice quota notification subscription;
\- quota_event_id - one or multiple network slice quota attributes to be
monitored, e.g. max number of UEs per network slice quota; max number of PDU
Sessions per network slice quota; max UL or DL data rate per network slice per
UE quota.
\- quota_notification_type - the type of the network slice quota event
notifications:
o threshold based notification - the network slice quota event notification is
triggered when a certain threshold level of the quota is reached or is
remaining; or
o periodical notification - the network slice quota event notification is
triggered at expiry of a defined periodic timer;
\- quota_notification_threshold - an optional parameter. If the
quota_notification_type is threshold based notification the AF includes the
quota_notification_threshold parameter. When the quota_notification_threshold
is reached the network slice quota notification is triggered;
\- quota_notification_periodicity - an optional parameter. If the
quota_notification_type is periodical, the AF includes the
quota_notification_periodicity parameter. The quota_notification_periodicity
parameter can be a time value defining the time between consequent periodical
network slice quota notifications to the AF.
\- UE_ex_id - an optional parameter. If the quota_event_id is max UL/DL data
rate per network slice per UE, the AF may include the UE_ext_id as well (e.g.
GPSI or MSISDN).
2) AF authorization - The NEF checks whether the AF is authorized for network
slice quota notification subscription. If AF authorization is successful,
continue to step 4.
3) If the AF authorization fails, the NEF returns
Nnef_EventExpose_Subscribe_Reject message in which the NEF includes a reject
cause reject_cause=authorization_fail and the procedure ends here.
4) The NEF may inquire with the UDM to translate UE external identity
UE_ext_id (e.g. GPSI, MSISDN) to a 3GPP internal identity UE_id. Then the NEF
forwards the subscription request from the AF to the NSQ-NF via
Nnsq_EventExposure_Subscribe_Request (network_slice_id, quota_event_id,
quota_notification_type, quota_notification_threshold, quota_notification
periodicity, UE_id).
5) QuotaEventExposure Subscription - The NSQ-NF subscribes the AF for network
slice quota event notification in compliance with the requested event
notification parameters in step 1.
6) Nnsq_EventExposure_Subscribe_Response - The NSQ-NF confirms the AF\'s
subscription for network slice quota event notification to the NEF.
7) The NEF may inquire with the UDM in order to translate 3GPP internal UE_id
to UE_ext_id (e.g. GPSI, MSISDN) and then the NEF forwards the network slice
quota event notification subscription confirmation to the AF.
#### 6.23.3.2 Network slice quota event notification to AF
Figure 6.23.3.2-1: Network slice quota event notification to AF
1). When the network slice quota event notification threshold is reached or
the network slice quota event notification periodic timer expires, the NSQ-NF
triggers the network slice quota event notification procedure.
2). The NSQ-NF sends Nnsq_QuotaEvent_Notification message to the NEF with the
following parameters:
\- network_slice_id - one or more S-NSSAIs for which the network slice quota
event notification is applicable;
\- quota_event_id - one or more quota event identities, e.g. max number of UEs
per network slice quota; max number of PDU Sessions per network slice quota;
UL or DL data rate per network slice per UE quota;
\- quota_value - the quota_value represents the up-to-date status of the
network slice quota. It could be a numeric value (e.g. the current number of
UEs per network slice, the current number of PDUs Sessions per network slice,
the current value of the UL/DL data rate per network slice per UE) or the
quota_value may represent in percentage the used level of the network slice
quota or the remaining/available level of the network slice quota per one or
more types of quota_event_id;
\- UE_id - one or more UE identities (e.g. SUPI, IMSI, GUTI or S-TMSI) for
which the network slice quota notification is related to.
3) The NEF may inquire with the UDM in order to map the 3GPP internal UE_id to
UE_ext_id (e.g. GPSI, MSISDN). Then the NEF forwards the received network
slice quota event notification to the AF.
### 6.23.4 Impacts on services, entities and interfaces
\- A new network slice quota event notification function (NSQ-NF) which
resides with the network entity responsible for the network slice quota
management or monitoring (e.g. NSQ or NSSF or NWDAF, or PCF or CHF or OAM or
UDM).
\- A new network slice quota event subscription and notification service by
the AF via the NEF.
## 6.24 Solution #24: NSQ assisted dynamic adjustment of data rate per slice
via user plane adjustment
### 6.24.1 Introduction {#introduction-24}
This solution is for Key Issue #5, \"Dynamic adjustment to meet the limitation
of data rate per network slice in UL and DL\". The solution takes the baseline
network function NSQ from Solution#10.
The solution is based on the following architectural assumptions:
\- NSQ shall be configured with maximum allowed Slice-AMBR by the operator via
OAM or AF.
Actual Slice-AMBR = Aggregate of Session-AMBR of active PDU sessions +
Aggregate of MFBR of active GBR flows.
\- NSQ shall subscribe to SMF to get notified of any changes to Session-AMBR
or MFBR of the existing PDU sessions.
\- AMF/SMF shall subscribe to NSQ to get notified when the actual slice-AMBR
has reached the maximum allowed slice-AMBR or if a certain threshold has been
met, e.g. 90% of maximum allowed slice-AMBR has been reached.
### 6.24.2 High Level Description
\- NSQ keeps track of the actual slice-AMBR for a S-NSSAI.
\- During PDU session establishment procedure, SMF updates the NSQ with
Session-AMBR of the PDU session that is being established and MFBR of any GBR
flows which shall be established and requests if Slice-AMBR for a S-NSSAI is
available.
\- NSQ adds the Session-AMBR and MFBR value to the actual Slice-AMBR value.
\- If the actual Slice-AMBR has not hit the maximum allowed slice-AMBR, NSQ
responds to SMF to proceed with PDU session establishment procedure with the
existing Session-AMBR and MFBR values
\- If the actual Slice-AMBR has hit the maximum allowed Slice-AMBR, NSQ
responds to SMF to dynamically adjust the session-AMBR and MFBR values of the
existing PDU session by a certain threshold. Alternatively, the NSQ may
respond to AMF/SMF to reject the PDU session establishment with an appropriate
cause code.
\- Dynamic adjustment of existing PDU sessions can be performed via user plane
adjustment:
\- User plane adjustment at network side: initiated by SMF to inform UPF and
NG-RAN to reduce the Session-AMBR/MFBR for the downlink, while the UE is not
notified of the changes. For uplink user plane data from the UE, the NG-RAN
enforces the updated Session-AMBR values received from SMF and forwards to
UPF.
\- SDAP method: as part of the downlink IP packet sent to the user, 5GC shall
modify the QFI in the DRB associated with the slice specific PDU session. QFI
has 1:1 association with the MFBR and GFBR, as part of the QoS rules
configured by the network in initial PDU Session Establishment Accept message.
Thus, utilizing this procedure, we reduce the excessive signalling over the
control plane, and leverage the data plane for efficient QoS modification.
### 6.24.3 Procedures
The procedure in Figure: 6.24.3-1 shows a signalling flow in which NSQ
performs dynamic adjustment of data rate for a slice when Slice-AMBR limit has
been reached.
Figure 6.24.3-1: NSQ assisted dynamic adjustment of data rate for a slice
As a pre-condition for this call flow, UE(s) 2..n have one or more PDU
sessions associated with S-NSSAI \'a\' successfully established with the
network.
NSQ keeps track of the actual Slice-AMBR for the S-NSSAI.
1\. UE1 initiates a PDU Session Establishment Request for a S-NSSAI \'a\' to
SMF.
2\. SMF sends the Nnsq_PDUCount_Availability_Check_Request message to NSQ and
includes the SMF-ID, S-NSSAI \'a\', PDU Session ID, Session-AMBR for the PDU
session and MFBR for each GBR flow to be established.
3\. NSQ performs the following checks:
\- whether PDU session count quota available (existing KI#2 solution);
\- compute actual Slice AMBR = Aggregate of Session-AMBR of active PDU
sessions associated with S-NSSAI \'a\' across all UEs+ Aggregate of MFBR of
active GBR flows associated with S-NSSAI \'a\' across all UEs.
\- whether actual Slice AMBR is within the maximum allowed Slice-AMBR limit
(actual slice AMBR shall include the session-AMBR/MFBR received at step 2).
If PDU session count quota is not available, NSQ informs SMF to reject the PDU
session establishment request with an appropriate cause code. If PDU session
count quota is available, NSQ informs SMF to successfully create the PDU
session. This procedure is described in solution #10.
If actual Slice AMBR is within the maximum allowed Slice-AMBR limit, NSQ
informs SMF to proceed with PDU session establishment procedure.
If not, NSQ informs all SMF(s) which have active PDU session(s) associated
with the same S-NSSAI to dynamically adjust data rates of the existing PDU
sessions (in a fair manner) or may inform SMF to reject the PDU session
establishment request with an appropriate cause code.
In this example, the PDU session count quota is available but Slice-AMBR
maximum limit has been reached.
4\. NSQ initiates a new request informing all SMF(s) which have active PDU
session(s) associated with the same S-NSSAI to dynamically adjust the data
rates of all the PDU sessions active for the S-NSSAI via
Nnsq_DataRate_Update_Request service. NSQ includes the S-NSSAI, cause code
\"Insufficient resources for specific slice or DNN\", and the percentage or an
absolute value of the data rate to be reduced for session-AMBR associated with
PDU Session ID(s) of UE (2..n).
NOTE 1: The amount of data rate to be reduced has to be fair among all UEs.
Hence, a percentage approach could be taken by NSQ. For example, NSQ could
request 5% or 10% reduction of data rate. However, at any given point for GBR
sessions, MFBR shall not go as low as GFBR after reduction of data rate. In
general, the adjustment of data rate decision is implementation specific.
5\. SMF initiates the PDU Session Modification procedure as defined in TS
23.502 [6] clause 4.3.3.2 to reduce the Session-AMBR for the PDU sessions and
optionally MFBR GBR flows. Step 1(b-d) to step 8 of the procedure in clause
4.3.3.2 is performed, and step 5 shall not be performed. SMF informs UPF and
NG-RAN to reduce the Session-AMBR for the downlink and uplink respectively,
while the UE is not notified of the changes. The uplink values are not
modified. When the UE sends the uplink user plane data to NG-RAN, the NG-RAN
enforces the uplink data rate limitation for non-GBR flows as per the updated
Session-AMBR values received from SMF.
Alternatively, just for GBR sessions, Reflective QoS based QFI modification
may be initiated by the network. As part of the downlink data sent to the
user, network may update the QFI in the DRB associated with the PDU session(s)
of interest in order to update the MFBR/GFBR values. Via this procedure, the
signalling over control plane is minimized and user plane is leveraged for QoS
modification.
NOTE 2: It is assumed that during PDU Session Establishment procedure, network
has configured multiple QFI values, each of them having a different MFBR/GFBR
values.
NOTE 3: SMF shall first reduce the Session-AMBR of PDU Session, followed by
reduction of MFBR of GBR flows.
6\. SMF completes the dynamic adjustment of data rate to a S-NSSAI and
provides the acknowledgment of completion via Nnsq_DataRate_Update_Response
message with the PDU session ID(s) and the corresponding Session-AMBR (or)
MFBR values.
7\. NSQ updates the Slice-AMBR value based on the received updated Session-
AMBR and MFBR values received in step 6. With the updated Slice-AMBR value,
NSQ will check if it can suffice the new PDU session establishment request in
step 2. In some cases, NSQ will also decrement the PDU count (KI#2) quota by 1
if the updated Slice-AMBR value can suffice the request at step 2.
8\. In cases when the updated Slice-AMBR value has not reached the limit after
reducing the Session-AMBR or MFBR value received in step 2, the NSQ provides a
success code to SMF for establishing the new PDU session from UE1.
9\. SMF sends PDU Session Establishment Accept message to UE1.
### 6.24.4 Impacts on services, entities and interfaces
\- NSQ should be provisioned with the Slice-AMBR value for a S-NSSAI.
\- NSQ should have the capability to provide the percentage of data rate (to
be adjusted or reduced) to the SMF.
### 6.24.5 Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.25 Solution #25: enforcement of NetworkSlice-MBR(UL/DL)
### 6.25.1 Introduction {#introduction-25}
**The solution applies to Key Issue #5**
The enforcement of a MBR UL/DL for a network slice in general cannot assume
that there is a single link where this can be done (a S-NSSAI UPFs can be
multihomed to a DN). So, enforcement at a single link connected to a single
UPF cannot be achieved.
In addition, in the UL direction, it would be not efficient from a radio
resource utilization standpoint to e.g. discard excess traffic after it has
been received at a UPF. Therefore, it is quite important to restrict the
aggregate amount of traffic that UEs sand UL in the slice before it is sent to
the network over the radio. The proposed solution achieves this by either:
1) Restricting the number of UEs that can use the network slice and
configuring these UEs with a static UE-NetworkSlice_MBR-(UL/DL).
2) Modifying the UE-NetworkSlice_MBR (UL/DL) of the UEs as more UEs join or
leave a network slice with at least one PDU session.
### 6.25.2 High-level Description
\- It is assumed one Policy Control Function in the CN counts the number of
UEs that have at least one established PDU session for a S-NSSAI subject to
MBR per network slice limitation;
\- It is assumed this Policy Control Function is aware of the limitation of
the data rate per network slice UL/DL for the S-NSSAI;
\- The PCF can restrict the MBR for the S-NSSAI by restricting the # of UEs
with at least one PDU session in the S-NSSAI by providing them with a static
UE-NetworkSlice_MBR (UL/DL); or
\- The PCF can restrict the MBR for the S-NSSAI by providing UEs with at least
one PDU session in the S-NSSAI with a UE-NetworkSlice_MBR (UL/DL) that is
assumed to be adequate to control the aggregate rate for the S-NSSAI in UL/DL
to comply (within an operator specific margin) with the maximum rate for the
S-NSSAI UL and DL. this value can be adjusted dynamically by the PCF as more
UEs \"joins\" or \"leaves\" the S-NSSAI with an hysteresis based approach
(e.g. by triggering PDU sessions modifications over a low and high threshold).
The update needs to be done.
### 6.25.3 Procedures
#### 6.25.3.1 Registration
Figure 6.25.3.1-1
In step 14b the AMF obtains for the S-NSSAIs that are subject to rate
limitation a UE-NetworkSlice-MBR(UL/DL).
#### 6.25.3.2 PDU session establishment
Figure 6.25.3.2-1
7b. Any UE-NetworkSlice-MBR(UL/DL) for the S-NSSAI is modified if required.
The SMF provides this to the RAN by indicating it in N-AMF_Communciation_N1N2
Message transfer. Alternately the PCF decides the UE cannot be admitted to use
a PDU session in the network slice.
#### 6.25.3.3 PDU session modification
Figure 6.25.3.3-1
1b. The PCF may decide to update the UE-NetworkSlice_MBR (UL/DL) for the UEs
in the S-NSSAI. The SMF provides this to the RAN by indicating it in
N-AMFCommunciationN1N2 Message transfer.
### 6.25.4 Impacts on services, entities and interfaces
PCF:
Store per S-NSSAI the **UE-NetworkSlice-MBR(UL/DL).** If applicable adjust the
**UE-NetworkSlice-MBR(UL/DL)** or limit the number of UEs with a PDU session
in a S-NSSAI. Count the # of UEs with at least a PDU session in a S-NSSAI.
SMF:
Receive from PCF the **UE-NetworkSlice-MBR(UL/DL)** if applicable and provides
this to the RAN by indicating it in N-AMFCommunciationN1N2 Message transfer.
RAN:
Receives the **UE-NetworkSlice-MBR(UL/DL)** from AMF if applicable for a
S-NSSAI and enforces the **UE-NetworkSlice-MBR(UL/DL)** in UL and DL and
limits in admission control accepted GBR aggregate per S-NSSAI to the **UE-
NetworkSlice-MBR(UL/DL).**
## 6.26 Solution #26: Network controlled enforcement of simultaneous usage of
network slices based on user preference
### 6.26.1 Introduction {#introduction-26}
This solution addresses the attribute of Simultaneous use of network slices
(described in clause 3.4.25 of NG.116) for addressing KI#6, and it is believed
to be access agnostic, that is, without additional impacts on the 5G-AN e.g.
NG-RAN.
This is a solution to Key Issue #6, \"Constraints on simultaneous use of the
network slice\". It is based on existing Rel-16 slice selection mechanisms
described as solution 1.5 in TR 23.740 [8]. It implies that by letting the UE
to order the S-NSSAIs in priority order, the control is pushed on the network
side to select the S-NSSAIs that can be used simultaneously depending on the
applications in use.
This solution assumes the following:
\- The UE has internal logic to understand which applications are needed at a
given time and can prioritize the applications requiring different S-NSSAIs.
The UE also orders the S-NSSAIs in the Requested NSSAI according to their
priority from how the UE wants to use them (i.e. when an application is of
highest priority the associated S-NSSAI is derived, e.g. from the URSP, and
the S-NSSAI is put first in the Requested NSSAI). The UE continues to derive
the priority of the subsequent S-NSSAIs based on the importance of the
applications and places the resulting S-NSSAIs in priority order in the
Requested NSSAI. The UE derives S-NSSAIs for all the applications the UE wants
to use, and the UE should derive the priority order for at least the first few
S-NSSAIs.
\- If/when the UE is not able to sort all the S-NSSAIs in priority order, it
is enough if the UE can prioritize few S-NSSAIs which are essential or crucial
during the initial/start-up phase. In doing so, the UE shall convey to the
network with information about the number of S-NSSAIs it has sorted in
priority order.
\- The logic of the solution ensures that the UE gets the network slices the
UE prioritizes (at least the highest priority slice). If some network slice is
not accepted in the Allowed NSSAI, the UE gets a cause code clarifying that
the network slice is mutually exclusive from another slice and based on that
the UE can prioritize the network slice if the priority for the application
changes
\- The UE shall also include a capability indication towards the AMF/NSSF,
indicating that it can set the S-NSSAIs in priority order. This indication is
useful in scenarios where the network can use other strategies for selecting
S-NSSAIs to prioritize.
\- The AMF or NSSF may be configured with the list of mutually exclusive
network slices, or the serving PLMN has defined all the AMF Sets to serve
network slices that are not mutually exclusive in which case the AMF and NSSF
can select Allowed NSSAI based on which AMF Sets that are available.
\- If HPLMN has defined network slices to be mutually exclusive, the HPLMN
makes VPLMN aware of incompatibility information for determining mutually
exclusive slices by one of two options.
\- Option 1:UDM provides the information to the AMF, and the AMF is sending
the information to the NSSF. If received the AMF and NSSF uses the information
to further restrict the Allowed NSSAI; or
\- Option 2: NSSF is aware of HPLMN policies related to mutually exclusive
slices based on SLA.
\- The AMF/NSSF may use network heuristics to resolve conflicts that may arise
when the UE is not able to prioritize all S-NSSAIs in priority order or sorts
only some essential S-NSSAIs during initial/start-up phase.
\- The AMF/NSSF leverage on the UE capability indication that the Requested
NSSAI is sorted in a priority order, and that the AMF/NSSF does not include in
the Allowed NSSAI, the S-NSSAIs of lower priority which are Mutually Exclusive
from higher priority S-NSSAIs.
\- The AMF/NSSF may optionally send a Reject cause to the UE, where it states
the reason for rejecting few S-NSSAIs (if any) in the Allowed S-NSSAIs.
\- The UE, based on the reject cause received from the AMF/NSSF understands
that an S-NSSAI it requested (i.e. it exists in the Configured NSSAI for the
serving PLMN) which is not in the Allowed NSSAI is mutually exclusive to one
or more of the S-NSSAIs in the Allowed NSSAI. If the UE wants to access such
an S-NSSAI, the UE puts it with high priority in a new Requested NSSAI.
\- The PCF is provided with configuration information on the mutually
exclusive slices by the network. The Route Selection Descriptor (RSD) in the
URSP rule intended for the UE may include, for certain applications, with
priority, those slices that are not mutually exclusive, thereby, increasing
the options for the applications to run in a slice.
\- The PCF may be aware of the information and logic to create the policy
rules i.e. the PCF may be configured with the information on mutually
exclusive slices such that URSP rules can, if possible be adapted.
### 5.26.2 High-level Description
The feasibility of above assumptions for a solution can be illustrated in the
below example network configuration:
Figure 6.26.2.-1: Example Network configuration for Mutually Exclusive Network
Slices
The error information from AMF would include the S-NSSAIs that the S-NSSAI is
mutually exclusive to, which can help the UE to derive from the received
signalling the knowledge of which slices are incompatible with each other.
Example UE configuration:
\- Configured NSSAI: Slice A, B, C, D, E, F, G, H.
\- URSP/NSSP: App1a, App1b, App1c->Slice A, App2a, App2b->Slice B, App3a,
App3b->Slice C, App4->Slice D, App5->Slice E, App6->Slice F, App7->Slice G,
App8->Slice H.
Scenario 1:
1\. The UE receives RSD in URSP from PCF which, if possible, does not contain
mutually exclusive slices to increase the options for the application to run
in a slice.
2\. The UE wants to use 3 applications with priority App1a, App3a, App2a.
3\. Requested NSSAI (Slice A, Slice C, Slice B), and Capability Indication for
sorting the priority.
4\. Allowed NSSAI (Slice A, Slice B) and Reject cause (optional) for Slice C:
\- The network does not include Slice C in the Allowed NSSAI as it is not
allowed to be accessed at the same time as the higher prioritized Slice A.
5\. From the Allowed NSSAI and the Reject cause, the UE understands that Slice
C may be mutually exclusive from Slice A.
6\. Time pass and the UE wants to use App3a i.e. the UE puts the Slice C with
higher priority: Requested NSSAI (Slice C, Slice A, Slice B).
7\. Allowed NSSAI (Slice C) and Reject cause for Slice A and B:
\- UE anticipated that Slice A and Slice C would not be accepted into the
Allowed NSSAI but included them anyway to make network aware of UE wanted
slices.
In the above scenario the optimal Network Slice configuration is achieved
immediately.
Scenario 2:
1\. The UE receives RSD in URSP from PCF which, if possible, does not contain
not mutually exclusive slices to increase the options for the application to
run in a slice.
2\. The UE wants to use 6 applications App1a, App1b, App2a, App2b, App3a, App5
and highest priority is App1a. From URSP UE derives that App1a is to use Slice
A and so is App1b. Second priority is App2a, and from URSP the UE derives the
slice to be used and also that App2b is to use the same slice. The UE has no
further preferences on priority between the other applications but derives the
slices to be used and places these in the Requested NSSAI after the
prioritized slices. It is enough if the UE can prioritize few S-NSSAIs which
are essential or crucial during the initial or start-up phase, if/when it is
not able to sort all the S-NSSAIs in priority order. The UE sends the number
of slices which are put in priority order, if/when it cannot prioritize all of
them. This would help the UE to determine the relative priority of
applications to take a decision.
3\. Requested NSSAI (Slice A, Slice B, Slice C, Slice E) and Capability
Indication for sorting the priority:
\- The network handles the Requested NSSAI as the S-NSSAIs are in priority
order.
3\. Allowed NSSAI (Slice A, Slice B), and Reject cause for Slice C and E:
\- The network does not include Slice C and Slice E in the Allowed NSSAI as it
is not allowed to be accessed at the same time as the higher prioritized Slice
A and Slice B.
4\. From the Allowed NSSAI and Reject cause, the UE understands that Slice C
and Slice E may be mutually exclusive from Slice A and Slice B.
5\. Time pass and the UE wants to use App3a, and sends a new Requested NSSAI
(Slice C, Slice A, Slice B).
6\. Allowed NSSAI (Slice C) and Reject cause for Slice A and B:
\- The network does not include Slice A and Slice B in the Allowed NSSAI as
they are not allowed to be accessed at the same time as the higher prioritized
Slice C.
Scenario 3:
1\. The UE receives RSD in URSP from PCF which, if possible, does not contain
not mutually exclusive slices to increase the options for the application to
run in a slice.
2\. The UE wants to use 1 application App1a.
3\. Requested NSSAI (Slice A) and Capability Indication for sorting the
priority?
3\. Allowed NSSAI (Slice A).
4\. The UE establishes a PDU Session using Slice A.
5\. Time pass and the UE wants to use App3a i.e. two options exist:
Option 1:
\- the UE need to use App3a, but the current App1a is more important:
Requested NSSAI (Slice A, Slice C);
\- Allowed NSSAI (Slice A) and Reject cause for Slice C:
\- the UE knows that Slice A and Slice C may be mutually exclusive and to be
able to use App3 the UE needs to put Slice C with higher priority than Slice
A.
Option 2:
\- the UE really needs to use App3a, i.e. it is more important than current
App1a (even though it has an established PDU Session): Requested NSSAI (Slice
C, Slice A).
\- Allowed NSSAI (Slice C) and Reject cause for Slice A, and the network
releases the current PDU Session for Slice A as the PDU Session shall not be
allowed to be used when UE is registered to the Slice C.
\- the UE knows that Slice A and Slice C may be mutually exclusive.
\- the UE establishes a PDU Session for Slice C.
In the above scenario the optimal Network Slice configuration is achieved
immediately for both options.
The options 1 and 2 shows how to handle already established PDU Sessions.
### 6.26.3 Procedures
#### 6.26.3.1 General
The UE capability indication and the rejection cause by the 5GC require
updates to the Registration Management procedure specified in TS 23.502 [6]
clause 4.2.2.2.2.
\- UE provides an indication of its capability to sort out the S-NSSAIs which
are included in the Request S-NSSAIs in priority order in Registration Request
towards the 5GC in N2/NAS message? as in step 1 of clause 4.2.2.2.2 in TS
23.502 [6].
\- 5GC may optionally provide a Reject cause IE in the Registration Accept
message towards the UE in a NAS message as in step 21 of clause 4.2.2.2.2 in
TS 23.502 [6].
#### 6.26.3.2 Interactions with Rel-16 usage of Allowed NSSAI
In Rel-16, the S-NSSAIs that the UE proposed in the Requested NSSAI which were
not included in the Allowed NSSAI nor rejected are subscribed S-NSSAIs (as
included in the Configured NSSAI) but currently not available for usage. The
UE does not have more information than that as to why the S-NSSAI was not
registered, i.e. there is no defined procedure in Rel-15 for allowing the UE
to discover when an S-NSSAI becomes available for the UE.
Consequently, as the UE does not know when an S-NSSAI becomes available, the
UE has no other choice than to propose the same S-NSSAI again in the Requested
NSSAI. If the UE also puts the S-NSSAIs in priority order, then existing UE
logic can be maintained and the UE can always request all the S-NSSAIs it
wants to use.
If the UE does not indicate support for putting the Requested NSSAI in
priority order or the number of slices which are put in priority order, the
network may use network heuristics or policies to decide which Network Slices
to select, if there are mutually exclusive network slices in the Requested
NSSAI.
#### 6.26.3.3 Characteristics of the solution
The proposed solution leads to protocol impacts on the NAS messages sent
between the UE and 5GC.
In case SLA covers the agreements for enforcing constraints on simultaneous
usage of network slices, then there is no need for any signalling within the
network. In case SLA is not enough as a solution, then signalling of HPLMN
requirement to VPLMN maybe be required.
The solution achieves an optimal combination of network slice configuration
for a UE.
The logic that the UE orders the S-NSSAIs in priority order could be efficient
when the information the UE has available is outdated, i.e. this solution can
be also used when constraints on simultaneous usage of network slices are
standardized as to allow a network decision already before sending the updated
constraints information to the UE.
The Requested NSSAI becomes larger than necessary as the UE always provides
the slices the UE wants to use (derived by wanted applications and the URSP),
but thereby the network gets aware of which slices the UE really wants to
access and the network operator may try to address the customer needs by
creating new slice configuration accordingly.
The PCF receives configuration information on the mutually exclusive slices
provided by the O&M. The RSD in URSP rule intended for the UE may include, for
certain applications, with priority, those slices that are not mutually
exclusive, thereby, increasing the options for the applications to run in a
slice.
### 6.26.4 Impacts on services, entities and interfaces
UE impact:
\- The UE provides the list of S-NSSAIs in the Requested NSSAI in priority
order. Optionally an indication of number of S-NSSAIs that are put into
priority order, if/when the UE is not able to sort all the S-NSSAIs in
priority order.
\- The UE provides a capability indication to the 5GC indicating its ability
to sort out the S-NSSAIs in priority order (the capability indication can be
superseded by the number of S-NSSAIs that are put in priority order when the
number is equal to the number of S-NSSAIs in the Requested NSSAI).
\- The UE understands, from the Reject cause sent by the 5GC, that an S-NSSAI
it requested which is not in the Allowed NSSAI is mutual exclusive to one or
more of the S-NSSAIs in the Allowed NSSAI. If the UE wants to access such an
S-NSSAI, the UE puts it with highest priority in a new Requested NSSAI.
5GC impact (serving and home):
\- The AMF/NSSF, via the capability indication , or the indicated number of
sorted S-NSSAIs, from the UE understands that the UE provides the list of
S-NSSAIs in the Requested NSSAI in priority order.
\- The AMF or NSSF, and PCF may be configured with the list of mutually
exclusive network slices and UDM provides the information from HPLMN
perspective to AMF. If serving PLMN only defines AMF Sets that serves network
slices that are not mutually exclusive then AMF and NSSF does not need to be
explicitly configured with the information as the AMF selection ensures the UE
gets only network slices that can be used at the same time.
\- The HPLMNs S-NSSAIs incompatibility information for determining mutually
exclusive slices is either
\- Option 1: stored in the UDM in the 5GC network; or
\- Option 2: information is provided as part of the SLA and managed by the
NSSF.
\- The AMF/NSSF may optionally send a reject cause towards the UE for slices
not allowed in the Allowed NSSAIs, providing information to the UE about which
slices are mutually exclusive.
\- If the Requested NSSAI includes Mutually Exclusive S-NSSAIs, then the
AMF/NSSF does not include the S-NSSAIs of lower priority in the Allowed NSSAI
until all S-NSSAIs of the Allowed NSSAI are allowed to be accessed together.
## 6.27 Solution #27: Network slices simultaneous usage incompatibility
support
### 6.27.1 Introduction {#introduction-27}
This solution addresses the below requirements from Key Issue #6:
\"Constraints on simultaneous use of the network slice\":
1) How to enforce the constraints related to simultaneous usage of Network
Slices in the UE and in the network, both in roaming and non-roaming
scenarios.
2) How to ensure that the identified enforcement solution does not negatively
impact the network operations of Rel-15 and Rel-16 5GS deployments.
### 6.27.2 High Level Description
This solution proposes network slices simultaneous usage incompatibility
support by both, the UE and the network. It is based on the following high
level assumptions and principles:
\- The incompatibility for simultaneous usage of network slices relates to the
User Plane resources of Network Slices.
\- The UDM holds information about subscribed S-NSSAI\'s incompatibility for
simultaneous usage attribute (e.g. 0 - the network slice can be used
simultaneously with any network slice, 1 - the network slice can be used
simultaneously with any network slice with same SST value, 2 - the network
slice can be used simultaneously with any network slice with same SD value, 3
- the network slice cannot be used simultaneously with another network slice).
These attributes for subscribed S-NSSAI\'s incompatibility for simultaneous
usage can be provided to the UDM by the operator or they can also be provided
and updated by the Service Provider (e.g. AF) by invoking the
Nnef_ParameterProvision Service as described in TS 23.502 [6] clause 4.15.6.2.
\- The AMF retrieves the subscribed S-NSSAI\'s incompatibility for
simultaneous usage attribute from the UDM and stores it as part of the UE
context in the AMF for the duration of the UE registration with that AMF. At
mobility re-registrations, the network slices incompatibility for simultaneous
usage attributes are passed to the new AMF with the UE context.
\- If the UE supports the network slices simultaneous usage incompatibility
feature, the UE indicates its support for it in the Registration Request
message.
\- The AMF provides to the UE the allowed S-NSSAI\'s simultaneous usage
incompatibility attributes in the Registration Accept message or UE
Configuration Update message only if the UE has indicated its support for it;
\- The solution does not negatively impact the network operations of Rel-15
and Rel-16 5GS deployments. In Rel-15 and Rel-16 5GS deployment the network
does not support the network slice simultaneous usage incompatibility feature
so, the network does not provide to the UE network slice simulations usage
incompatibility attribute for the allowed S-NSSAI(s), i.e. there is no
negative impact to Rel-15 and Rel-16 5GS deployments.
\- The solution allows for light and full modes of incompatibility
enforcement:
In light mode the network slice simultaneous usage incompatibility attribute
is not provided to the UE. The enforcement for network slice simultaneous
usage incompatibility is in the network only (by the AMF) based on the network
slice simultaneous usage incompatibility attribute in the subscription
information. In light mode the incompatibility enforcement can also work for
UEs that do not support the incompatibility feature. In this case an existing
reject cause is returned to the UE.
In full mode the network slice simultaneous usage incompatibility attribute is
provided to the UE at registration per each allowed network slice. The
enforcement for network slice simultaneous usage incompatibility is in both
sides, in the network and in the UE.
NOTE: This is one solution (i.e. not alternatives). If the network (home or
visiting) do not provide the incompatibility attribute to the UE, the
incompatibility enforcement can be done by the network only which is called
light mode of operation.
### 6.27.3 Procedures
#### 6.27.3.1 Network slices simultaneous usage incompatibility control by the
UE
Figure 6.27.3.1-1: Network slices simultaneous usage incompatibility control
by the UE
1) The UE requests registration with the network and if the UE supports the
network slices simultaneous usage incompatibility feature, the UE also
includes in the Registrations Request message a network slice incompatibility
support indication.
2) If the AMF supports the network slices simultaneous usage incompatibility
feature, the AMF includes the network slices incompatibility support
indication to the UDM when retrieving UE\'s subscription information.
3) In return, if the AMF indicated a support for network slices simultaneous
usage incompatibility, the UDM returns the network slices incompatibility
attributes per each subscribed S-NSSAI which can have one of the following
values:
0 The network slice can be used simultaneously with any network slice;
1 The network slice can be used simultaneously with any network slice with
same SST value;
2 The network slice can be used simultaneously with any network slice with
same SD value;
3 The network slice cannot be used simultaneously with another network slice.
4) If the UDM provided the network slices incompatibility attribute for the
subscribed S-NSSAIs, the AMF stores the network slices incompatibility
attributes in the UE context.
5) When confirming the UE registration procedure, if the UE indicated its
support for network slices incompatibility in the Registration Request message
in step 1, then the AMF can include in the Registration Accept message the
network slices incompatibility attribute value (e.g. 0 - the network slice can
be used simultaneously with any network slice, 1 - the network slice can be
used simultaneously with any network slice with same SST value, 2 - the
network slice can be used simultaneously with any network slice with same SD
value, 3 - the network slice cannot be used simultaneously with another
network slice) per each S-NSSAI from the allowed NSSAI list. The AMF may
adjust the value of the incompatibility attribute based on the operator policy
or configuration.
6) The UE behaviour after receiving network slices incompatibility attributes
per allowed S-NSSAI - The UE shall not attempt to establish or request user
resources establishment for simultaneous PDU sessions on network slices that
are identified as incompatible based on the received network slices
incompatibility attributes. For example, if the UE has already established a
PDU Session(s) on one or more network slices and the UE wants to establish
another PDU Sessions on an additional network slice, the UE shall first check
for simultaneous usage incompatibility, based on the received network slices
incompatibility attributes, between the additional network slice and each of
the network slices on which there is an already establish PDU Session and
vice-versa. The UE may also check with the URSP rules whether the network
slice incompatibility can be avoided by selecting another network slice for
the new PDU Session,
#### 6.27.3.2 Network slice simultaneous usage incompatibility control by the
network
While the network slices simultaneous usage incompatibility supporting UE
manages the restrictions for network slices simultaneous usage incompatible at
its origin (i.e. by checking for simultaneous usage incompatibility before the
UE triggers a PDU session establishment on a new network slice as described in
Figure 6.27.3.1-1), it is still needed for the network to be able to control
the UE behaviour, i.e. whether the UE respects the network slices simultaneous
usage incompatibility attributes. Figure 6.27.3.2-1 demonstrates the network
control for network slices simultaneous usage incompatibility.
Figure 6.27.3.2-1: Network slices simultaneous usage incompatibility control
by the network
1) There are already established PDU Session(s) on one or more network slices.
2) The UE triggers a PDU Session Establishment on a new network slice
S-NSSAI_X.
3) The AMF checks for network slice simultaneous usage incompatibility between
the S-NSSAI_X and the network slices on which there are already established
PDU Session(s). The AMF already holds in the UE context the incompatibility
attributes for each allowed for the UE network slices acquired from the UDM
during the UE registration or via the UE context transfer from a previous AMF.
If (the new network slice S-NSSAI_X is incompatible for simultaneous use with
any other network slice on which a PDU Session has already been established)
OR (any network slice on which a PDU Session has already been established is
incompatible for simultaneous use with the new network slice S-NSSAI_X on
which the UE wants to establish a PDU Session), the PDU Session Request on
S-NSSAI_X shall be rejected for simultaneous usage incompatibility reason.
Otherwise, there is no simultaneous usage incompatibility between S-NSSAI_X
and the network slices already in use and the procedure continues to step 5.
4) AMF rejects the PDU Session Establishment Request on S-NSSAI_X. The AMF may
include in the PDU Session Establishment Reject message a reject cause for
network slice incompatibility. The AMF may also include the list of the
network slices with which the rejected network slice (i.e. S-NSSAI_X) is
incompatible for simultaneous use and the procedure ends here.
If the UE received a list of network slices that are incompatible for
simultaneous use with the rejected network slice, the UE shall not trigger
another PDU Session establishment on the rejected network slice until all PDU
Sessions on the reported incompatible network slices are released.
5) The AMF continues with the PDU Session establishment procedure on S-NSSAI_X
according to TS 23.502 [6].
### 6.27.4 Impacts on services, entities and interfaces
UE/AMF:
\- Network slice incompatibility indication in the Registration Request
message;
\- Network slice incompatibility attribute per allowed network slice in the
Registration Accept and UE Configuration Update message;
\- A new PDU Session rejection cause related to the network slice
incompatibility;
\- Logic for network slices simultaneous usage incompatibility check both in
the UE and the AMF.
UDM:
\- Holds network slices simultaneous usage incompatibility attributes per
subscribed network slice.
## 6.28 Solution #28: Compatibility Class based support for simultaneous use
of the network slice
### 6.28.1 Introduction {#introduction-28}
This solution, which addresses KI#6, allows the system to enforce policies on
Simultaneous use of Network Slices. It is based on network side awareness of
the Classes of Network Slices a S-NSSAI is compatible with (based on
subscription information) and the provision of this information to the UE as
part of the network slicing configuration.
The benefit of providing the compatibility class information to the UE is that
this is a policy of compatibility between Network Slices that the UE needs to
be aware of, so it requests a set of network slices in compatible classes
without trial and errors and thus it is possible minimize the failed attempts
to access a desired and compatible Network Slices Set. The word \"minimize\"
is used as the UE is aware of compatibility based on GST attribute. Other
compatibility issues, such as network deployment constraints (e.g. two slices
cannot be served in the serving network by the same AMF) or to be addressed in
KI#7(e.g. due to band) are not addressed by this solution. Should there be no
other compatibility issue, this Information in the UE would completely avoid
any trial and error. However, due to the partial information provided to the
UE, should there be other constraints such as concurrent network slice support
in AMFs, it is still possible that the UE would have perform a trial and error
to have a usable set of network slices.
### 6.28.2 High-level Description
The S-NSSAI subscription information is augmented with a \"simultaneous use
information\" defining the compatibility with other Network Slices.
This solution proposes that the Compatibility is decided by the HPLMN as it is
a policy of compatibility of usage irrespective of deployment constraint or
choices (which might also exists and be additional constraints - e.g. as per
KI#7 we may have additional constraints), hence it is part of the subscription
data so it can be enforced and provided to the UE by the serving AMF in any
PLMN when determining the allowed NSSAI.
The simultaneous use information is defined by a compatibility class, which
may be operator defined or standardised.
The following compatibility classes are proposed to be standardised:
Table 6.28.2-1: Standardised Compatibility Classes
Compatibility Class Rule
* * *
0 S-NSSAI can be used alongside S-NSSAIs with same SST field value 1 S-NSSAI
can be used alongside S-NSSAIs with same SD field value 2 S-NSSAI cannot be
used alongside any other S-NSSAI
The standardization is based on the standardised compatibility classed defined
in GSMA NG.116 and this solution proposes that these are provided to the UE
and the AMF by the UDM (both in roaming or in non-roaming case).
If there is no such simultaneous use information associated to a S-NSSAI, then
the PLMN assumes this S-NSSAI can be included alongside any other S-NSSAI in
an Allowed NSSAI, when the S-NSSAI can be supported in the current TA of the
UE.
The S-NSSAIs marked as default S-NSSAI shall be mutually compatible with each
other from the standpoint of the GST attribute handling. These are the ones
which shall be provided together in the Allowed NSSAI to the UE when the UE
indicates no S-NSSAI, subject to support in the local area where the UE is.
A UE shall signal its support of \"incompatible network slices handling\"
feature in the Registration Request message. If a UE does not support this
feature, it shall only be configured with Network Slices which can be used
simultaneously.
A UE shall not include in the Requested NSSAI S-NSSAIs that map to HPLMN
S-NSSAIs which are incompatible with each other.
If a UE attempts to register with a set of incompatible S-NSSAIs, and it
supports the \"incompatible network slices handling\" feature, it shall be
configured with a new Configured NSSAI, Mapping to HPLMN S-NSSAIs, HPLMN
S-NSSAIs and related \"simultaneous use information\". The NSSF/AMF provide an
Allowed NSSAI including only compatible S-NSSAIs based on their policies (e.g.
any default S-NSSA is or the broadest set of compatible slices including the
Default S-NSSAIs), and the other S-NSSAIs are rejected with cause code
\"incompatible S-NSSAIs with the S-NSSAIs in the Allowed NSSAI\". The UE may
also be requested to immediately re-register using the new configuration
information. Also, the UE nonetheless may autonomously re-register with the
new configuration even if the Network does not request it, so the UE can
request S-NSSAIs more adequate to run the applications the user is more
interested in.
If a UE attempts to register with a set of incompatible S-NSSAIs, and it does
not support the \"incompatible network slices handling\" feature, it shall be
configured with a new Configured NSSAI, Mapping to HPLMN S-NSSAIs, HPLMN
S-NSSAIs including only S-NSSAIs compatible with each other. The NSSF/AMF
provide an Allowed NSSAI including only compatible S-NSSAIs based on their
policies (e.g. any default S-NSSAIs or the broadest set of compatible slices
including the Default S-NSSAIs). The UE may also be requested to immediately
re-register using the new configuration information. Also, the UE nonetheless
may autonomously re-register with the new configuration even if the Network
does not request it, so the UE can request S-NSSAIs more adequate to run the
applications the user is more interested in.
The HPLMN shall provide to a V-PLMN only Subscribed S-NSSAIs which are
compatible with each other when the V-PLMN, based on roaming agreement, is
known to not support the handling of mutually incompatible slices. These
S-NSSAI(s) shall be provided with no compatibility class information to these
V-PLMNs.
### 6.28.3 Procedures
The registration procedure in TS 23.502 [6] clause 4.2.2.2.2 is impacted as
follows:
Figure 6.28.3-1
1\. UE includes indication it supports the \"incompatible network slices
handling\" feature and is shall include only compatible S-NSSAIs in the
requested NSSAI.
2\. The AMF selection shall include checking the compatibility of the S-NSSAIs
in the Requested NSSAI. The Compatibility class information is provided to the
NSSF alongside the Subscribed S-NSSAIs.
21\. Registration accept may include cause code \"incompatible S-NSSAIs with
the S-NSSAIs in the Allowed NSSAI\" in the Rejected S-NSSAIs if applicable.
The Registration with AMF re-allocation procedure in TS 23.502 [6] in clause
4.2.2.2.3 is impacted as follows (if the PLMN supports handling of
incompatible S-NSSAIs).
Figure 6.28.3-2
3a. The slice selection subscription data includes the compatibility class
information, if applicable.
4a. The AMF includes the \"Compatibility class information\" associated to any
S-NSSAI in the subscription data that includes such information.
7a/7b. If all the S-NSSAIs in the requested NSSAI are incompatible with the
S-NSSAIs in the current AMF and they are served by another AMF, and the
operator knows there is no routability between the source and target AMF, then
the UE is de-registered with a request to immediately register instead of
executing any of steps 7a/b.
### 6.28.4 Impacts on services, entities and interfaces
**UE:** Support of \"incompatible network slices handling \" as outlined.
**AMF:** Support of \"incompatible network slices handling\" feature as
outlined.
**UDM:** Support of new compatibility information per UE in subscription data
as outlined.
## 6.29 Solution#29: Operating Band Information is Provided with the
Configured NSSAI
### 6.29.1 Introduction {#introduction-29}
This solution is for Key Issue #7, \"Support of 5GC assisted cell selection to
access network slice\". The solution is based on the following architectural
assumption:
\- The solution introduces the restriction that the UE shall not
simultaneously register to slices that are not all accessible on the same
operating band(s). In other words, the UE shall not have S-NSSAIs in the
Allowed NSSAI that are not all available in a common operating band.
\- The solution adheres to the following principles:
\- The UE can establish and maintain PDU Session(s) with any slice(s) that are
in its Allowed NSSAI.
\- The Allowed NSSAI indicates the S-NSSAIs values the UE can use in the
Serving PLMN for the current Registration Area.
\- A TA is the set of all cells that broadcast the same TAC.
\- All Cells in a TA support the same set of S-NSSAIs.
\- All Cells in the RA support all of the S-NSSAIs in the Allowed NSSAI.
This does not rule out that the RAN is configured with preferences according
to which certain bands in a TA are preferred for the support of the DRBs/PDU
sessions associated with certain Network Slices.
### 6.29.2 High-level Description
The main idea of the solution is that the UE, if it indicates it supports this
feature, is provisioned with the operating band(s) that are allowed for
S-NSSAIs it can use in the PLMN which only work in a subset of the bands the
PLMN supports. This information is sent to the UE in association with the
Configured NSSAI. It is then understood that the UE will only request slices
that are all accessible in the same operating band(s) and the AMF will include
in the Allowed NSSAI only S-NSSAI(s) that are all accessible in the same
operating band(s).
Per existing Rel-15/16 behaviour, the RFSP Index will be determined based on
the Allowed NSSAI and any RFSP subscription information from the HPLMN.
Per existing Rel-15/16 behaviour, the serving AMF shall determine a
Registration Area such that all S-NSSAIs of the Allowed NSSAI for this
Registration Area are available in all Tracking Areas of the Registration
Area.
When the UE is provisioned with a Configured NSSAI (i.e. pre-provisioned,
provisioned during Registration, or provisioned during a UE Configuration
Update), the UE is also provisioned with the operating band(s) of S-NSSAIs in
the Configured S-NSSAI in the event that a S-NSSAI is only supported in
certain bands, but not all, bands used in the PLMN. In the case where the
operator slice deployment is governed by frequency ranges (e.g. FR1 and FR2),
the AMF may indicate that an S-NSSAI is supported on [FR1 only] or [FR2 only]
instead of explicitly listing out all the operating bands where a S-NSSAI is
supported.
The UE may take into account the operating band(s) of each S-NSSAI when the UE
selects a cell to camp on and/or generates a Requested NSSAI, e.g. UE selects
S-NSSAIs which are associated with the operating band that the UE is currently
using and generates a Requested NSSAI based on the operating band.
If the UE is interested to access an S-NSSAI which is not supported on the
currently camped operating band and not in the Allowed NSSAI, the UE may
choose to re-select to the new operating band, initiate the radio connection,
and send a Mobility Registration Update Request and include the S-NSSAI in the
Requested NSSAI. The UE may start an autonomous Cell Reselection, but any
frequency priorities provided by the RAN are considered first, before using
any other band not included in any dedicated priorities provided by the RAN.
When the UE requests a new NSSAI in connected mode, the AMF will reject the
S-NSSAI if it is not supported in the current RA, but will indicate to RAN
that the UE should be redirected to a cell in an RA that supports the Allowed
NSSAI and one or more of the Rejected S-NSSAI if possible. Once redirected, a
Mobility Registration Update can be triggered and the UE may again attempt to
add the Rejected S-NSSAI to the Allowed NSSAI.
### 6.29.3 Procedures
The Registration Accept message and UE Configuration Update Command from the
AMF to the UE in TS 23.502 [6] are updated to include permissible operating
band(s) of a S-NSSAI in the Configured S-NSSAI if the S-NSSAI relates to a
Network Slice that is only supported in a subset of the bands of the PLMN.
In the Registration and UE Configuration Update procedures, the AMF will only
include S-NSSAIs in the UE\'s Allowed NSSAI that are all available via the
UE\'s current operating band.
The AMF may be locally provisioned with operating band information for
S-NSSAIs that only works on a subset of the bands of the PLMN.
### 6.29.4 Impacts on services, entities and interfaces
AMF:
\- Provides the UE with permissible operating band(s) for some S-NSSAI in the
Configured NSSAI.
UE:
\- During the Registration and UE Configuration Update procedures, it may
indicate support for the feature and receives permissible operating band(s)
for some S-NSSAIs in the Configured NSSAI. The UE may perform, if needed, an
autonomous Cell Reselection when requesting a new NSSAI as described above.
## 6.30 Solution #30: Preferred frequency bands in Configured NSSAI
### 6.30.1 Introduction {#introduction-30}
This solution is for Key Issue #7, Support of 5GC assisted cell selection to
access network slice. This solution solves the particular problem in KI#7,
\"How does 5GS steer UEs to a 5G-AN (e.g. a specific frequency band)\", i.e.
how to steer the UE to cell(s) where the registration with the S-NSSAI(s) from
the Requested NSSAI can be successful. The solution is based on the following
architectural assumptions:
\- The Rel-15 concept is retained that homogenous availability of S-NSSAIs
from the Allowed NSSAI is provided within a Registration Area.
\- The UE may simultaneously register to S-NSSAIs that are accessible on
different operating frequency band(s).
\- If the UE is about to register to one or more network slices identified by
S-NSSAIs which are accessible on some preferred frequency band(s), then the UE
in Idle state considers the list of preferred band(s) of the S-NSSAIs for cell
selection when triggering the Registration request message.
\- If the UE Allowed NSSAI contains one or more S-NSSAIs which are accessible
on different frequency band(s), then the is provided with configuration from
the RAN (e.g. during RRC Connection Release procedure) to follow carrier
frequencies for Idle mode mobility.
\- It is assumed that the AMF (or NSSF, or both) and the NG-RAN are configured
with the preferred frequency band(s) per S-NSSAI. With this, signalling
enhancements to the N2 MM and N2 SM signalling are not needed.
### 6.30.2 High Level Description
The high-level principle of this solution is that the UE is provided with
preferred frequency band(s) (PFB) information per network slice (e.g. target
carrier frequencies per S-NSSAI) in the Configured NSSAI. The PFBs are
applicable to the S-NSSAIs of the Serving PLMN. The UE in Idle state, which
initiates a Registration procedure with a new Requested NSSAI, uses the PFBs
from the Configured NSSAI for cell selection procedure in order to select the
appropriate cell where to establish the RRC connection.
If an S-NSSAI is available over more than one frequency bands, The PFB
parameter may include a list of target carrier frequencies containing one or
more entries, and for each entry a carrier frequency priority index may be
associated as well. For example, the priority index indicating the priority
for scanning/selecting of a carrier frequency, if multiple carrier frequencies
are available.
After the Configured NSSAI has been updated and the UE is in Idle state (e.g.
the 5GC may initiate the release of N1 connection, if the Configured NSSAI has
been updated), the UE determines which S-NSSAIs it wants to register with,
i.e. the S-NSSAIs to be included in the Requested NSSAI. Then, the UE in Idle
state performs cell selection procedure considering the frequency priority
(and the priority index) from the PFB for the S-NSSAI(s) to be included in the
Requested NSSAI. The NAS layer provides the PFB information to the AS layer to
assist the cell selection procedure.
### 6.30.3 Procedures
The Configured NSSAI is provided to the UE during the Registration Accept
message and UE Configuration Update Command from the AMF. The AMF or NSSF when
creating the Configured NSSAI for the UE may include the preferred frequency
band (PFB) per S-NSSAI. If the AMF performs update of the Configured NSSAI,
the AMF may trigger N1 connection release procedure in order to allow the UE
to apply the new configuration when the UE is in Idle state.
With respect to the cell selection procedure in Idle state, the UE may first
create a Requested NSSAI (e.g. based on the Configured NSSAI) to be included
in the Registration Request message. The UE may then consider the list of PFBs
for the S-NSSAI values included in the Requested NSSAI. If there are more than
one S-NSSAIs in the Requested NSSAI, the UE may prioritize the S-NSSAIs, and
consequently, prioritize the PFBs to be used for cell selection. The
prioritization of S-NSSAIs is up to UE internal configuration (e.g. from
higher layers) or user priorities. The NAS layer provides the PFB information
to the AS layer for cell selection, i.e. the PFB may overwrite the frequency
configuration which has been stored in the AS layer from the last RRC
Connection Release procedure.
If a Service Request procedure or activation of UP resourced for a PDU Session
procedure result in use of multiple network slices operated in different
frequency bands, the NG-RAN node may decide to activate Dual Connectivity in
order to used different frequency bands simultaneously.
If the UE in CM-Connected state wants to use a new S-NSSAI, the UE uses the
Configured NSSAI to determine whether the new desired S-NSSAI operates in a
common frequency band with the S-NSSAI(s) of the current Allowed NSSAI. If the
new desired S-NSSAI does not operate in a common frequency band with the
current Allowed NSSAI, the UE send a Registration Request including only the
desired S-NSSAI in the Requested NSSAI. This avoids misinterpretation of the
UE preference in the AMF. The AMF applies the procedure in Solution 17 Figure
6.17.3-1, steps 5 - 8, or Solution 46 to steer (i.e. NG-RAN applies RRC
redirect or Handover) the UE to the new cell/TA where the desired S-NSSAI
operates.
### 6.30.4 Impacts on services, entities and interfaces
\- To AMF (or NSSF):
\- Takes into account the preferred frequency bands per S-NSSAI when
generating the Configured NSSAI, Allowed NSSAI and Rejected S-NSSAIs.
\- Provides to the UE preferred frequency bands per S-NSSAI within the
Configured NSSAI.
\- To UE:
\- In CM-Idles state, during Registration procedure with a new Requested
NSSAI, the UE takes into account the preferred frequency bands per S-NSSAI as
provided in the Configured NSSAI for the cell selection procedure.
\- In in CM-Connected state, the UE uses the Configured NSSAI to determine
whether a new desired S-NSSAI operates in a common frequency band with the
current Allowed NSSAI. If not, the UE includes only the new desired S-NSSAI in
the Requested NSSAI.
## 6.31 Solution #31: Steering the UE to a network slice in a different
frequency band
### 6.31.1 Introduction {#introduction-31}
This solution addresses the below requirements from Key Issue #7: Support of
5GC assisted cell selection to access network slice.
\- How does 5GS steer UEs to a 5G-AN (e.g. a specific frequency band) that can
support the network slices that the UE can use.
\- What information does 5GS need to take a decision to steer UE to a proper
5G-AN.
### 6.31.2 High Level Description
The solution is based on the following high-level assumptions and principles:
\- The UE is allocated Allowed NSSAI which can contain S-NSSAIs supported in
different frequency bands, however all S-NSSAIs are supported in all Tracking
Areas or the Registration Area.
### 6.31.3 Procedures
Figure 6.31.3.1-1: Steering the UE to a network slice in different frequency
band
1) The UE is in idle mode, registered via RAN-1 for S-NSSAI-1 and S-NSSAI-2.
RAN-1 is in FB-1 and supports S-NSSAI-1 and S-NSSAI-2. RAN-2 is in FB-2 and
also supports S-NSSAI-1 and S-NSSAI-2. The UE is configured with the FB
preferences for the allowed NSSAI (for example S-NSSAI-2 is better served in
FB-2).
2) An application in the UE needs to establish service on S-NSSAI-2 in FB-2
and the UE may start measurements on FB-2.
3) The UE establishes RRC connection with RAN-1.
4) The UE triggers PDU Session Establishment Request on S-NSSAI-2 via RAN-1.
Optionally, if the UE has a good measurement result for FB-2, the UE may
include an ARFCN information of FB-2.
5) The AMF is aware that S-NSSAI-2 is supported with preference in FB-2.
6) AMF requests RAN-1 to steer the UE to a RAN Node supporting S-NSSAI-2 in
FB-2. and the AMF may indicate the ARFCN from the FB-2, if available
7a) If dual connectivity cannot be supported (for example), the RAN-1 triggers
inter-frequency cell change to RAN-2 in FB-2 which supports better S-NSSAI-2
and is in UE\'s location. The RAN-1 may skip the connected mode measurements
for FB-2 if received ARFCN information in step 6.
NOTE: It is for RAN Working Groups to define the inter-frequency cell change
in connected mode e.g. Handover, Cell Change Order, RRC release with re-
direction or RRC Connection reconfiguration.
8a) AMF continues with the PDU Session establishment procedure on S-NSSAI-2
via RAN-2.
9a) After PDU session on S-NSSAI-2 is released, the UE falls-back (e.g. re-
selects back) to a cell in FB-1. This step is optional. If not implemented,
the UE will stay on FB-2 until it is steered back to FB-1 due to a new service
request on FB-2.
7b) If dual connectivity can be supported (for example), the UE stays on RAN-1
and RAN-1 triggers the Dual Connectivity configuration with RAN-2 as a
secondary RAN in order to establish the new PDU Session associated with
S-NSSAI-2.
### 6.31.4 Impacts on services, entities and interfaces
\- UE cell fall-back to a cell on the initial frequency band (optional).
\- AMF decision and request for handover to a cell from another frequency
band.
\- RAN: can decide to stay on the current cell and deploy Dual Connectivity
with a cell from another frequency band for the new PDU Session when there are
existing PDU Sessions.
## 6.32 Solution #32: Operator quota control policy on the number of PDU
session
### 6.32.1 Introduction {#introduction-32}
The solution addresses Key Issue #2, and only defines operator\'s policy
configuration for quota control. Thus, this solution can be co-existed with
the other solutions for KI#2.
This solution provides operators the flexibility to control the quota on the
number of PDU session per slice from the perspective of the network resource
usage, with assuming that there are some specific PDU sessions to use more
network resource rather than a general PDU session.
### 6.32.2 High-level Description
The high-level description of the solution is as follows:
\- Operator can configure the policy on quota control in SMF and/or NF which
controls the quota, especially, the number of PDU session per slice.
\- For operator specific quota control, some kinds of PDU session in 5GS are
considered, as follows:
a) a PDU session with ULCL usage;
b) a PDU session with multi-homing PDU usage;
c) a MA PDU session, etc.
\- When this kind of PDU session is establish, the operator can configure to
increase the counter by specific value (e.g. only one, or two).
\- When this kind of PDU session is release, the operator can configure to
decrease the counter by specific value (e.g. only one, or two).
\- When this kind of PDU session is modified (e.g. adding/removing ULCL or BP,
adding/removing one access for MA PDU, etc.), the operator can configure to
increase/decrease the counter by specific value (e.g. only one, or two), or
keep the counter as the same value without increasing/decreasing.
\- For operator specific quota control, a PDN connection established in EPC,
which is associated with an S-NSSAI for interworking between EPC and 5GC, may
be considered:
\- When this kind of PDN connection is established, the operator can configure
to increase the counter by specific value (e.g. one), or keep the counter as
the same value without increasing.
\- When this kind of PDN connection is release, the operator can configure to
decrease the counter by specific value (e.g. one), or keep the counter as the
same value without increasing.
\- When this kind of PDN connection is transferred into a PDU session with
interworking procedure, the operator can configure to increase the counter by
specific value (e.g. one), or keep the counter as the same value without
increasing.
### 6.32.3 Procedures
The following figure shows the high-level quota control procedures of this
solution.
Figure 6.32.3-1: Quota control on the number of PDU session per slice, based
on operator\'s policy
1\. The UE is registered and optionally has one or some PDU session(s).
2\. The PDU session related procedures are triggered, and the SMF recognizes
it.
3\. If the operator policy on quota control for specific PDU session is
configured in SMF, the SMF checks it and determines if it sends quota control
request to a NF which controls quota on the number of PDU session per slice,
or not.
4\. The SMF sends quota control request to a NF which controls quota on the
number of PDU session per slice. The SMF may include the information
indicating the specific PDU session in quota control request message.
5\. If the operator policy on quota control for specific PDU session is
configured in NF, the NF checks it and determines how to apply it for the
specific PDU session.
6\. The NF returns the quota control response to SMF.
7\. According to the corresponding procedure, the remaining steps of PDU
session related procedure are performed.
### 6.32.4 Impacts on services, entities and interfaces
SMF:
\- may be configured with quota control for specific PDU session.
\- may determines if it sends quota control request to a Quota control NF, or
not.
\- may include the information indicating the specific PDU session with quota
control request message.
PGW-C+SMF:
\- may be configured with quota control for specific PDN connection.
\- may determines if it sends quota control request to a Quota control NF, or
not.
\- may include the information indicating the specific PDN connection (i.e.
corresponding PDU session with interworking) with quota control request
message.
Quota control NF:
\- may be configured with quota control for specific PDU session and determine
how to apply it.
## 6.33 Solution #33: Event notification of Slice SLA attributes
### 6.33.1 Introduction {#introduction-33}
This solution mainly addresses the key issue #4. However, this is a generic
solution for the event notification of Network Slice related quota, therefore
it applies to the event notification for the slice SLA attributes defined in
key issue #1, key issue #2 and key issue #5.
### 6.33.2 High-level Description
The PCF based solution is proposed for the event notification of Network Slice
quota of the following slice SLA attributes:
\- Maximum number of UEs per S-NSSAI.
\- Maximum number of PDU sessions per S-NSSAI.
\- Maximum UL/DL data rate per S-NSSAI.
This solution considers the following principles:
\- A central quota enforcement NF (i.e. a primary PCF) maintains the global
quota status of the slice SLA attributes (e.g. maximum number of registered
UEs per S-NSSAI, maximum number allowed PDU sessions per S-NSSAI, maximum
UL/DL data rate per S-NSSAI).
\- A consumer of the network slice quota (e.g. AF or a 5GC internal consumer
NF or OAM) subscribes to the central quota enforcement NF (i.e. a primary PCF)
for the network slice quota event notification of specific network slice
attribute(s) of the S-NSSAI.
\- A consumer of the network slice quota (e.g. AF or a 5GC internal consumer
NF or OAM) requests to the central quota enforcement NF (i.e. a primary PCF)
for the network slice quota status reporting of specific network slice
attribute(s) of the S-NSSAI.
\- A central quota enforcement NF (i.e. a primary PCF) notifies an event
notification for the network slice quota subscription or reports the network
slice quota status for specific network slice attribute(s) of the S-NSSAI to
the consumer (e.g. AF, OAM, 5GC NF).
NOTE: This solution considers a primary PCF as a central quota enforcement NF,
however it can be other 5GC NF according to the alternative solution of the
respective key issue.
### 6.33.3 Procedures
#### 6.33.3.1 Interactions with AF for event notification and report of
Network Slice attributes related quota
Figure 6.33.3.1-1 The interaction of a primary PCF and AF for the Network
Slice quota event notification of slice SLA attributes
1\. A 5GC internal consumer NF or OAM subscribes for an event notification of
slice SLA attribute(s) of S-NSSAI to the primary PCF. The subscription request
includes the information of Network Slice, consumer information and event
notification information, e.g. threshold for quota notification.
If AF subscribes for an event notification via NEF, the NEF checks whether the
AF is authorised for the requested subscription. If this check successes, the
NEF query the NRF, UDR or others to find the primary PCF. The NEF initiate a
separated subscription request to the primary PCF.
2\. For each subscription, the primary PCF checks the event subscriptions
(e.g. threshold for quota notification related to the registered number of UEs
or periodic reporting event) and triggers the notification to the 5GC internal
consumer NF or OAM when the event occurs.
3\. The primary PCF notifies the event to the 5GC internal consumer NF or OAM
or AF (directly or via NEF) based on the event notification information of the
subscription.
4\. Independently, the 5GC internal consumer NF or OAM or AF (via NEF) may
request the Network slice quota status of slice SLA attribute (e.g. registered
number of UEs of the S-NSSAI) to the primary PCF. In case of AF request via
NEF, the NEF checks whether the AF is authorised for the request. If this
check successes, the NEF find the primary PCF and invokes a status request
service to the primary PCF.
5\. The primary PCF performs the Network slice quota status of slice SLA
attribute (e.g. registered number of UEs of the S-NSSAI).
6\. The primary PCF reports the request to the 5GC internal consumer NF or OAM
or AF (via NEF).
Based on the event notification from step 3 or the status report from step 6
about the registered number of UEs quota of the S-NSSAI, the related action
can be taken, e.g. slice SLA re-negotiation can be triggered.
### 6.33.4 Impacts on services, entities and interfaces
PCF: A primary PCF for providing the network slice quota event notification
service and (quota) status reporting of slice SLA attributes of a given
S-NSSAI service to the consumers (e.g. AF, OAM, 5GC NF).
NEF, providing the network slice quota event notification service and (quota)
status reporting of slice SLA attributes of a given S-NSSAI service to the
consumers (e.g. AF, OAM, 5GC NF).
### 6.33.5 Evaluation
This solution fulfils the requirement of Key Issue 4.
## 6.34 Solution #34: AF interaction for event notification
### 6.34.1 Introduction {#introduction-34}
This solution is for Key Issue #4, \"Support for network slice quota event
notification in a network slice\".
This solution is written based on the assumption that Slice PCF is used for
network slice quota management in 5GC, and only defines interaction between
Slice PCF and AF. However, under the design principle of service-based
architecture, the Slice PCF logic proposed in this solution can be supported
by other NFs such as NSQ, NSSF, etc. Therefore, this solution can be co-
existed with any other solutions proposing to use Control Plane NF.
### 6.34.2 High-level Description
The Slice PCF is a central NF supporting network slice related quota
management. The logical functionalities supported by the Slice PCF are
different than AM PCF and SM PCF. The Slice PCF supports per S-NSSAI operation
(not per UE operation) for AF interaction.
To enable the communication between the Slice PCF and AF, the Slice PCF
registers to the BSF with S-NSSAI(s) served by the Slice PCF. The BSF stores
the binding information between Slice PCF and corresponding S-NSSAI(s).
The AF can subscribe to event notification on network slice related quotas.
The Slice PCF records the event subscription including triggering conditions
and sends notification to the AF when the triggering condition is met, e.g. a
specified threshold is reached.
### 6.34.3 Procedures
#### 6.34.3.1 Slice PCF registration and AF interaction procedure
Figure 6.34.3.1-1: S Slice PCF registration and AF interaction for slice quota
management
1\. Slice PCF sends Register Request to BSF including S-NSSAI(s) for which the
Slice PCF supports network slice quota management.
The BSF stores the binding information between the Slice PCF and S-NSSAI(s).
2\. AF generates Slice Policy event subscription request including slice quota
event subscription message and corresponding S-NSSAI. The AF request is
targeting for a holistic view of S-NSSAI, not for an individual UE. The AF
request can be delivered to the Slice PCF directly or via NEF.
3\. AF/NEF consumes Discovery service operation providing S-NSSAI to find out
the relevant Slice PCF if the Slice PCF information is not available on the
AF/NEF, otherwise step 3 and step 4 are skipped.
4\. BSF selects a Slice PCF serving the S-NSSAI based on the binding
information between the Slice PCF and S-NSSAI(s). The BSF provides the Slice
PCF information in the Discovery response to AF/NEF.
5\. AF/NEF sends Slice Policy request to the Slice PCF.
If the slice quota event subscription request is authorized by the Slice PCF,
the Slice PCF stores the event subscription received from the AF/NEF.
6\. When event notification triggering condition is met, the Slice PCF sends
Slice Policy event notification to the AF directly or via NEF.
NOTE: Based on the conclusion of the study, if the Slice PCF logic proposed in
this solution is supported by other NFs such as NSQ, NSSF, etc., the Slice PCF
and BSF in Figure 6.34.3.1-1 represent the selected NF other than Slice PCF
and NRF, respectively.
### 6.34.4 Impacts on existing services and interfaces
NF supporting quota management:
\- Handles event subscription and notification for network slice related
attributes.
## 6.35 Solution #35: Quota enforcement considering service type
### 6.35.1 Introduction {#introduction-35}
This solution addresses key issue #2 the maximum number of PDU sessions per
slice based on the quota. As this solution only defines the differentiation of
service(s) when the current status of slice is close to the quota limitation,
the solution can co-operate with other solutions for KI #2 which support the
session number counting and the enforcement in normal service state.
### 6.35.2 High-level Description
A single network slice can be shared by two or more service types, e.g. DNNs.
For example, eMBB slice supports both the high-speed internet and the voice
service at the same time, for a given user. In this case, the priority among
services in the slice can be different, wherein some services should be
allowed in preference to other services. In addition, there can be specific
services which need different treatment (emergency service, priority service,
etc). For archiving this, it is required that the network should be able to
differentiate how and when to enforce the slice quota with respect to the
service types, based on the operator\'s policy and the service agreement.
The high level description of the solution is as follows:
\- 5GC supporting the slice quota enforcement considers the parameter on the
priority among services allowed within the slice in the quota enforcement.
\- The priority can be the standardized one such as DNN, ARP or default 5QI
value. This parameter can be provided by UDM (in the user subscription) or PCF
(in the session policy), or configured in the 5GC by OAM.
\- The NF receives the current slice information from the other NF providing
per slice session number counting. The information may include the early
notification for the slice quota, i.e. indication that the current number of
sessions is close to the quota limit.
\- Upon receiving the PDU session establishment request from UE, the NF
decides whether the request can be allowed in consideration of the latest
slice quota status and the related service type/priority.
\- 5GC may apply the pre-emption in case that the quota limit has been
reached, based on the operator policy and the service level agreement.
### 6.35.3 Procedures
When the quota management is enabled, during the PDU Session Establishment
procedure in clause 4.3.2.2 of TS 23.502 [6], the NF enforcing the quota
management determines the acceptance of the request, in consideration of the
current quota status and the priority of the service. The priority can be
determined by the either DNN, APR, or default 5QI value. The relative
priorities within a slice can be pre-configured in the NF, or provided to the
NF from the UDM (subscription) or the PCF (policy).
### 6.35.4 Impacts on services, entities and interfaces
**5GC:** Handling PDU session setup request in consideration of the priority
of request service type.
## 6.36 Solution #36: Handover of a PDU session
### 6.36.1 Introduction {#introduction-36}
This solution addresses Key Issue #2, in particular for how to count the
number of PDU sessions when switching an existing PDU session between 3GPP
access and non-3GPP access. Thus, this solution can be co-existed with the
other solutions for KI#2.
This solution is based on the assumption that the unified quota management is
applied, i.e. the quota limit and the counter on the sessions are shared
between 3GPP and N3GPP accesses. It can prevent the established PDU session
from being teared down due to the quota related reasons during handover
procedure.
Editor\'s note: It is FFS whether it needs to manage the quota limit and the
counter on the sessions independently for each access.
### 6.36.2 High-level Description
There is a chance that the PDU session request for a S-NSSAI via one access
network is accepted whereas the PDU session request for the same S-NSSAI via
another access network is rejected due to the excess of the quota. From the
network point of view for the quota management in control plane, it doesn\'t
matter which access network is used for the PDU session, the subject of
management is the quantity of established sessions regardless of access
networks. On the other hands, from the user point of view, which access
network is used to transfer data is a matter as it is highly related to their
data plan and charging. In such case, the UE may want to handover the existing
PDU session from the access network for which the PDU session has been
accepted to the preferred access network while keeping the quota granted to
the UE. Therefore, the solution proposes following:
\- When the PDU Session Establishment request is rejected, the UE may know
that the rejection is due to the excess of the quota based on the rejection
cause value and determine to handover an existing PDU session to the preferred
access network.
\- The rejection cause and the use of back-off timer associated with S-NSSAI
due to the slice quota management is different than NAS-level congestion. When
the UE receives the back-off timer associated with the S-NSSAI included in the
PDU Session Establishment Reject message due to the excess of the quota, the
UE shall not initiate the SM signalling for new PDU session establishment
associated with the S-NSSAI in the PLMN until the timer expires, which means
the UE can trigger the other SM procedures, e.g. PDU Session handover or PDU
Session modification procedure while the timer is on-going.
\- The UE can trigger PDU Session handover between 3GPP access and non-3GPP
access. If the Request Type of PDU Session Establishment is \"Existing PDU
Session\", it is not counted as the network has already granted the use of
S-NSSAI to the UE.
### 6.36.3 Procedures
When the quota management is enabled, during the PDU Session Establishment
procedure in clause 4.3.2.2 of TS 23.502 [6], the SMF does not count or
trigger interaction with the NF in charge of counting the number of PDU
sessions if the Request Type of PDU Session Establishment is \"Existing PDU
Session\".
### 6.36.4 Impacts on existing services and interfaces
UE:
\- Handles new rejection cause and back-off timer associated with the S-NSSAI.
SMF:
\- Takes action for quota management with the consideration of Request Type of
PDU Session Establishment.
## 6.37 Solution #37: Data rate control per network slice per UE
### 6.37.1 Introduction {#introduction-37}
This solution addresses the Key Issue #3 in the perspective of supporting per
slice data rate limitation for a UE. The solution describes slice data rate
control mechanism by either SMF or PCF. Which NF (SMF or PCF) performs slice
data rate control is up to operator policy.
### 6.37.2 High-level Description
A network slice (identified by S-NSSAI) is allowed to be used for a UE when
the UE has a valid subscription. GSMA further defines maximum uplink/downlink
throughput per UE and indicates that these parameters could be used to offer
different contract qualities in NG.116 [3]. Therefore, this solution assumes
that the maximum uplink/downlink throughput for a network slice can be
different for each UE based on UE subscription.
A subscribed S-NSSAI of the UE can be associated with per Slice Maximum Bit
Rate (Slice-MBR). The subscribed Slice-MBR is stored in the UDM as UE
subscription and provided to the SMF. The PCF may provide the authorized
Slice-MBR to the SMF.
The Slice-MBR limits the aggregate bit rate that can be expected to be
provided across all GBR and Non-GBR QoS Flows for all PDU sessions associated
with a same S-NSSAI. The SMF or PCF (if dynamic PCC is used) allocates the
Slice-MBR to the GBR QoS Flows and the remaining bit rate of the Slice-MBR to
the Non-GBR QoS Flows. Figure 6.37.2-1 shows the example of Slice-MBR shared
among multiple PDU sessions associated to the same S-NSSAI.
Figure 6.37.2-1: Slice-MBR shared among multiple PDU sessions associated to
the same S-NSSAI
Session-AMBR for each PDU session is determined with consideration of Slice-
MBR and status of all PDU sessions associated with the S-NSSAI. The Session-
AMBR for each PDU session is signalled to RAN and UPF accordingly. Figure
6.37.2-2 shows data rate control per network slice at RAN and UPF. For
downlink/uplink data rate control per network slice at RAN, the RAN performs
UE-AMBR enforcement as it is. For downlink data rate control per network slice
at UPF, the UPF performs Session-AMBR enforcement as it is. As the SMF/PCF
takes Slice-MBR into account when it determines Session-AMBR for each PDU
session, interaction among different UPFs for each PDU session (UPF#1 and
UPF#2 in the figure) is not required in order to share Slice-MBR properly. The
total amount of Slice-MBR reflects the accumulated bit rates across HR and LBO
PDU sessions in roaming case.
Figure 6.37.2-2: Slice-MBR shared among multiple PDU sessions associated to
the same S-NSSAI
To maximize use of Slice-MBR and share the available data rate across all PDU
sessions associated with the S-NSSAI, the Session-AMBR for Non-GBR QoS Flows
can be adjusted based on the status of PDU Sessions, e.g. session
established/released, UP connection activated/deactivated, etc. during the
lifetime of a PDU session. For example, if UP connection of a PDU session
becomes deactivated, the SMF/PCF may determine to allocate the amount of the
Session-AMBR used for the PDU session whose UP connection is deactivated to
the other active PDU sessions. To apply the changed Session-AMBR and deliver
the changed Session-AMBR to RAN and UPF, the SMF triggers PDU Session
Modification procedure.
### 6.37.3 Procedures
#### 6.37.3.1 Slice data rate control at PDU Session Establishment procedure
Figure 6.37.3.1-1: Slice-MBR control at PDU Session Establishment
1\. UE sends PDU Session Establishment Request including S-NSSAI.
2\. If, subject to operator policy, SMF performs slice data rate control, SMF
discovery and selection based on subscription information from UDM (i.e.
selecting the same SMF for all PDU sessions to the same S-NSSAI and DNN)
described in clause 6.3.2 of TS 23.501 [2] is enhanced, i.e. the UDM stores
indication whether the same SMF for all PDU sessions to the same S-NSSAI is
required.
3\. AMF sends the request to the SMF.
4\. If data rate control for the S-NSSAI is required, the UDM stores
subscribed Slice-MBR per S-NSSAI. SMF gets subscribed Slice-MBR from UDM as UE
subscription data. If SMF receives subscribed Slice-MBR from UDM, it
explicitly means to the SMF that the S-NSSAI requires data rate control per
network slice.
If, subject to operator policy (dynamic PCC is used), PCF performs slice data
rate control, step 5 to step 8 are performed.
Otherwise, SMF performs slice data rate control, the SMF changes subscribed
Session-AMBR based on subscribed Slice-MBR received from UDM and status of
each PDU session associated with the same S-NSSAI to set the Session-AMBR for
the PDU session. Step 5 to step 8 are skipped.
5\. The mechanism described in Solution #20 is used. In addition to Solution
#20, the mechanism described in step 6 to step 8 performs.
6\. Subscribed Slice-MBR, subscribed Session-AMBR are included in
Npcf_SMPolicyControl_Create/Update Request.
7\. The PCF determines authorized Session-AMBR based on subscribed Session-
AMBR, subscribed Slice-MBR received from SMF and status of each PDU session
associated with the same S-NSSAI. In roaming case, (V-)PCF may confirm the
authorized Session-AMBR based on roaming agreement.
8\. Authorized Session-AMBR, PCRF for PDU session status event subscription,
and optionally authorized Slice-MBR are included in
Npcf_SMPolicyControl_Create/Update Response.9. Same as specified in TS 23.502
[6].
10\. The SMF provides Slice-MBR to the AMF in order to forward it to the RAN
along with the Session-AMBR.
11\. The N2 messages includes Slice-MBR along with the Session-AMBR. The RAN
performs UE-AMBR enforcement for capping data traffic.
NOTE: It is up to RAN whether Slice-MBR is needed for RAN operation, e.g. to
set the UE-AMBR value.
12\. Same as specified in TS 23.502 [6].
#### 6.37.3.2 Slice data rate sharing across PDU sessions
To maximize the use of Slice-MBR and share the available data rate across all
PDU sessions associated with the S-NSSAI, the Session-AMBR for Non-GBR QoS
Flows can be adjusted based on the status of other PDU Sessions.
Figure 6.37.3.2-1: Slice-MBR sharing across PDU sessions
1\. PDU Session 1 and PDU Session 2 have been established as specified in
clause 6.37.3.1.
2\. The SMF detects the change of PDU session 2 status as specified in TS
23.502 [6].
3\. If PCF has subscribed to the event notification for the PDU session status
during PDU session establishment procedure, the SMF sends notification message
to the PCF.
4\. SMF/PCF re-evaluates Session-AMBR for the PDU Session 1, considering the
status of PDU Session 2.
5\. SMF/PCF initiates PDU Session Modification procedure as specified in TS
23.502 [6] clause 4.3.3.2 to deliver the changed Session-AMBR to RAN and UPF1
serving the PDU Session 1. UPF performs data rate control based on the changed
Session-AMBR for the PDU Session 1. RAN may re-evaluate UE-AMBR based on the
changed Session-AMBR.
### 6.37.4 Impacts on existing services and interfaces
UDM:
\- Stores subscribed Slice-MBR per S-NSSAI as UE subscription data.
[Conditional] If, subject to operator policy (dynamic PCC is not used), SMF
performs slice data rate control, the additional impacts are as follows.
UDM:
\- SMF discovery and selection based on subscription information from UDM
(i.e. selecting the same SMF for all PDU sessions to the same S-NSSAI and DNN)
described in clause 6.3.2 of TS 23.501 [2] is enhanced to support, subject to
operator policy, the same SMF for all PDU sessions to the same S-NSSAI.
SMF:
\- Determines Session-AMBR for the PDU session with consideration of Slice-MBR
and status of each PDU session associated with the same S-NSSAI, and provides
Slice-MBR to RAN.
[Conditional] If, subject to operator policy (dynamic PCC is used), PCF
performs slice data rate control, the additional impacts are as follows.
PCF:
\- Determines Session-AMBR for the PDU session with consideration of Slice-MBR
and status of each PDU session associated with the same S-NSSAI.
\- Provides authorized Slice-MBR on request from SMF.
\- Subscribes to event notification for the change of PDU Session status.
## 6.38 Solution #38: Network slice quota control and enforcement provided by
CHF based solution
### 6.38.1 Introduction {#introduction-38}
This solution addresses the KI#1 and KI#2 by leveraging the Telecom Management
and in particular the CHF/5G Converged Charging System functionalities
encompassing quota management capabilities.
Editor\'s note: The suitability of CHF or other OAM node (s) and for which
quotas that can be used for is to SA WG5. The call flows are just examples and
will be updated.
Editor\'s note: This solution needs further be evaluated by SA WG5.
### 6.38.2 High-level Description
#### 6.38.2.1 General
The following CHF/5G Converged Charging System capabilities are used for this
solution:
\- Slice SLA availability.
\- CHF control per new UE PDU session and registration.
Slice SLA is made available to CHF under the \"Network Slice Management
Charging\" feature (specified in TS 28.202 [11]): enables charging a Service
Provider (considered as the \"subscriber\" from charging\'s perspective) for
slice(s) creation based on SLA between this Service Provider and the Network
Operator.
The full description of attributes used for Network Slice creation to fulfil
the slice SLA are captured by the CHF. They include for each S-NSSAI,
associated attributes (defined in the GST documented in GSMA 5GJA NG.116 [3])
such as:
\- Maximum number of UEs (KI#1).
\- Maximum number of PDU sessions (KI#2).
CHF control per new UE PDU session is specified in TS 32.255 [9].
CHF control per registration is specified in TS 32.256 [10].
NOTE: The enforcement of Quota Management for roaming requires roaming
agreements between the HPLMN and the VPLMNs which are currently under
discussion in GSMA. The CHF quota management follows the roaming scenarios as
defined in TS 23.501 [2].
Editor\'s note: How to support roaming and NSSAA (Network Slice Specific
Authentication and Authorisation) is FFS.
#### 6.38.2.2 CHF based network slice quota management
In this solution the CHF is the enforcement point for slice quota management
associated to attributes in the GST defined by GSMA 5GJA NG.116 [3] which are
subject to quota management based on available Slice SLA: Maximum number of
UEs (KI#1) and Maximum number of PDU sessions (KI#2).
Slice quota management for \"Nb of PDU sessions\" is achieved by CHF
authorization of UE PDU session based on S-NSSAI received from SMF, and Slice
SLA (Max Nb of PDU sessions).
Slice quota management for \"Nb of registered UEs\" is achieved by CHF
authorization of UE registration in S-NSSAI(s) based on Allowed S-NSSAI(s)
received from AMF, and Slice SLA (Max Nb of registered UEs).
### 6.38.3 Procedures
#### 6.38.3.1 General
The following figure 6.38.3.1-1 represents the high-level entities involved in
the solution.
Figure 6.38.3.1-1: High level functional solution overview
Slice SLA is obtained by CHF from OAM at NSI creation via the \'service
profile\' according to TS 28.202 [11] (clause 5.1.3 \'Network slice related
requirements identified by a service profile\'), which includes per S-NSSAI:
maximum number of UEs, maximum number of allowed PDU sessions.
#### 6.38.3.2 CHF based Network slice quota management
##### 6.38.3.2.1 Maximum number of PDU Sessions
Figure 6.38.3.2.1-1: CHF quota management - PDU session establishment
The steps are according to TS 32.255 [9] clause 5.2.2.2.2 (using TS 23.502 [6]
figure 4.3.2.2.1-1 \'UE-requested PDU Session Establishment for non-roaming
and roaming with local breakout\' as the baseline) with the following
additions:
0ch. CHF maintains per S-NSSAI : Slice SLA (Max Nb of PDU sessions) and count
for \"Nb of PDU sessions\".
9ch-b. CHF checks whether this S-NSSAI is subject to quota management based on
Nb of PDU sessions, if so, whether the Slice SLA (Max Nb of PDU sessions) is
not exceeded with the new PDU session. If not, the PDU session is accepted and
the count for \"Nb of PDU sessions\" is increased by one, otherwise it is
rejected.
9ch-c. CHF rejects (in case PDU session is rejected) the new PDU session with
appropriate cause due to Max Nb of PDU sessions is already reached.
Figure 6.38.3.2.1-2: CHF quota management - PDU session release
The steps are according to TS 23.502 [6] clause 4.3.4.2 with the following
additions (Although no explicit message flows in TS 32.255 [9], the PDU
session release scenario is covered):
0ch. CHF maintains per S-NSSAI : Slice SLA (Max Nb of PDU sessions) and count
for \"Nb of PDU sessions\".
2ch-b. If this S-NSSAI is subject to quota management based on Nb of PDU
sessions, the count for \"Nb of PDU sessions\" is decreased by one.
##### 6.38.3.2.2 Maximum number of UEs
Figure 6.38.3.2.2-1: CHF quota management - Registration
The steps are according to TS 32.256 [10] clause 5.2.2.2.4 (using TS 23.502
[6] figure 4.2.2.2.2-1 \'Registration procedure\' as the baseline) with the
following additions:
0ch. CHF maintains per S-NSSAI : Slice SLA (Max Nb of registered UEs) and
count for \"Nb of registered UEs\" with UEs list.
16ch-b. CHF checks for each allowed S-NSSAI in the Allowed NSSAI subject to
Quota management based on Nb of registered UEs, if the Slice SLA (Max Nb of
registered UEs) is not exceeded with the new UE. If not, the count for \"Nb of
registered UEs\" is increased by one, and this UE is added to the list. If the
new UE cross the \"Max Nb of registered UEs\", the S-NSSAI is set to \"Not
allowed\". If the full set of S-NSSAI in the received Allowed NSSAI becomes
\"Not allowed\", the registration is rejected.
16ch-c. CHF provides appropriate answer: either authorizes the registration
with an updated list of \"Allowed NSSAI\" or rejects the registration with
appropriate cause.
Figure 6.38.3.2.2-2: CHF quota management - Deregistration
The steps are according to TS 32.256 [10] clause 5.2.2.2.8 (using TS 23.502
[6] figure 4.2.2.3.2-1 \'UE-initiated Deregistration\' as the baseline) with
the following additions:
0ch. CHF maintains per NSSAI : Slice SLA (Max Nb of registered UEs) and count
for \"Nb of registered UEs\" with UEs list.
1ch-b. CHF checks for each S-NSSAI in the allowed NSSAI subject to Quota
management based on Nb of registered UEs, if this UE was part of the List of
registered UEs, if so the UE is removed from the list and the count for \"Nb
of registered UEs\" is decreased by one.
### 6.38.4 Impacts on services, entities and interfaces
AMF:
\- receiving return cause from CHF and provide list of S-NSSAI in the Allowed
NSSAI by AMF.
\- new reject cause.
SMF:
\- new reject cause received from CHF.
CHF:
\- CHF(s) selections by SMF/AMF.
\- CHF(s) managed slice quota distributions.
\- define new reject cause for AMF, optional: sending updated list of Allowed
NSSAI.
\- define new reject cause for SMF.
Editor\'s note: The referenced TS 28.202 [11] (Release 16) is under completion
in SA WG5.
## 6.39 Solution #39: Support registration for incompatible network slice(s)
in UE\'s current serving RA or different one
### 6.39.1 Introduction {#introduction-39}
This solution addresses the below requirements from Key Issue #6:
\"Constraints on simultaneous use of the network slice\":
1) How to enforce the constraints related to simultaneous usage of Network
Slices in the UE and in the network, both in roaming and non-roaming
scenarios.
2) How to ensure that the identified enforcement solution does not negatively
impact the network operations of Rel-15 and Rel-16 5GS deployments.
### 6.39.2 High Level Description
The attributes in Network Slice Template describes whether a network slice can
be simultaneously used with other network slices. Based on this attribute the
operator can deploy network slice in the following two main scenarios:
1) Network slices are supported by different TA within the UE\'s current
geographical location. For example, S-NSSAI#1 is supported by TA1 and
S-NSSAI#2 are supported by TA2 within the same geographical location. When the
UE accesses via TA1 and requests both S-NSSAI#1 and S-NSSAI#2, the AMF can
generate the Registration Area with TA1 only and provide only S-NSSAI#1 in the
Allowed NSSAI and provide S-NSSAI#2 in the Rejected NSSAI with reject cause.
The UE should be able to register with S-NSSAI#2 because the S-NSSAI#2 is
available in TA2 within the UE\'s current geographical location.
2) Network slices are supported by same RA but they are incompatible by
configuration.
This solution is based on the following high-level principles:
\- The AMF/NSSF is configured via OAM about the network slice attribute on
simultaneous use with other network slice(s).
\- For scenario 1: if the requested S-NSSAI is not supported by the current
Tracking Area, the AMF rejects the S-NSSAI with reject cause indicating it is
not available in the Registration Area. This reject cause indicates that the
UE is able to select a different cell outside of the Registration Area in
order to register with the rejected S-NSSAI.
\- For scenario 2: If the requested S-NSSAI is supported by the current
Tracking Area but is incompatible with the Allowed NSSAI(e.g. current AMF
doesn\'t support it or is configured as incompatible with the Allowed NSSAI),
the AMF rejects the S-NSSAI with new reject cause indicating that the S-NSSAI
is supported in the Registration Area but incompatible with the Allowed NSSAI.
The UE is able to register with the rejected S-NSSAI within the Registration
Area. The UE should not set the 5G-S-TMSI or GUAMI in the RRC message. The UE
may set the new requested NSSAI in the AS layer so the NG-RAN can select a new
proper AMF.
### 6.39.3 Procedures
#### 6.39.3.1 Scenario 1: Incompatible network slices supported by different
TAs
Figure 6.39.3.1-1 Scenario 1: Incompatible network slices supported by
different TA
1\. The UE initiates the Registration Procedure with Requested NSSAI and
Mapping of Requested NSSAI if available. The UE generates the Requested NSSAI
based on the Default Configured NSSAI, Configured NSSAI for the Serving PLMN
and the Allowed NSSAI if available. The Requested NSSAI may include
incompatible S-NSSAIs, e.g. S-NSSAI(s) are supported by different TAs. In
addition, UE indicates its capability for \"Network Slice Incompatibility
Support\".
NOTE 1: There may be no suitable AMF can server all Requested NSSAI therefore
the RAN may select a default AMF. The default AMF then may redirect the
Registration Request to target AMF in step 2.
2\. The AMF and NSSF performs network slice selection. The AMF/NSSF determines
the Allowed NSSAI and the Rejected NSSAI. If the Requested S-NSSAI is not
supported by the current Tracking Area, the AMF/NSSF put it in the Rejected
NSSAI with cause value indicating that the S-NSSAI is not supported within the
current Registration Area.
3\. The AMF sends a Registration Accept message to the UE as per current
procedure and includes the Allowed NSSAI, Registration Area and Rejected NSSAI
with cause value.
4\. When the UE intends to initiate a PDU Session Establishment Procedure, the
UE first derives the requested S-NSSAI that matches the application based on
the URSP rules or UE Local Configuration.
5\. If the requested S-NSSAI is one of the Rejected NSSAI with cause value
indicating that it is not available in the current Registration Area, and the
UE realizes that there is other cells within the same PLMN outside the
Registration Area in the current location, then the UE perform cell
reselection to select a new cell.
NOTE 2: If there are multiple cells outside the Registration Area exist in the
UE location, the UE reselects the other cell one by one until it receives the
Allowed NSSAI including the interested S-NSSAI.
6\. The UE initiates Mobility Registration procedure via the selected new
cell. The UE includes the requested NSSAI in NAS message.
7\. The new AMF/NSSF performs network slice selection as per current
procedure. The AMF/NSSF determines the new Allowed NSSAI which includes the
requested NSSAI and new Registration Area.
8\. The new AMF sends a Registration Accept message to the UE as per current
procedure and includes the new Allowed NSSAI and the new Registration Area.
9\. After the successful Registration Procedure, the UE initiates a PDU
Session Establishment Procedure with the new requested NSSAI through the new
RAN towards the new AMF.
10\. The PDU Session Establishment Procedure continues as per current
procedure.
#### 6.39.3.2 Scenario 2: Incompatible network slices supported by same TA
Figure 6.39.3.2-1: Incompatible network slices supported by same TA
1\. The UE initiates the Registration Procedure with Requested NSSAI. The UE
generates the Requested NSSAI based on the Default Configured NSSAI, The
Configured NSSAI for the Serving PLMN and the Allowed NSSAI if available. The
Requested NSSAI may include incompatible S-NSSAI(s), e.g. S-NSSAI(s) are
supported by the same TA but by different AMF(s). In addition, UE indicates
its capability for \"Network Slice Incompatibility Support\".
2\. The AMF/NSSF performs network slice selection. The AMF/NSSF determines the
Registration Area and the Allowed NSSAI. The AMF/NSSF may determine by
configuration that one or more S-NSSAIs in the Requested NSSAI are
incompatible with the Allowed NSSAI, e.g. the requested S-NSSAI is not
supported by the current AMF or the requested S-NSSAI is supported by the AMF
but is incompatible with the Allowed NSSAI. If the UE is capable of \"Network
Slice Incompatibility Support\", then AMF puts it in the Rejected NSSAI with a
reject cause indicating the S-NSSAI is supported in the Registration Area but
is incompatible with the Allowed NSSAI. The UE can register with the rejected
S-NSSAI within the current Registration Area but should not set the 5G-S-TMSI
or GUAMI in the RRC message.
3\. The AMF sends a Registration Accept message to the UE as per current
procedure and includes the Allowed NSSAI, the Rejected S-NSSAI(s) with cause
value and the Registration Area.
4\. When the UE intends to initiate a PDU Session Establishment Procedure, the
UE first derives the requested S-NSSAI that matches the application based on
the URSP rules or the UE Local Configuration.
5\. If the requested S-NSSAI is within the Rejected NSSAI with cause value
indicating that the S-NSSAI is supported in the Registration Area but
incompatible with the Allowed NSSAI, the UE initiates Mobility Registration
procedure. The UE shall not set the 5G-S-TMSI or GUAMI in the RRC message. The
UE may set the new requested S-NSSAI that the UE requests in the RRC message
the NG-RAN can select a new proper AMF. The UE includes the requested NSSAI in
NAS message.
When the RAN doesn\'t select a different AMF, the following option A is
performed: When the RAN reselects a different AMF, the following option B is
performed.
Option A:
6\. The RAN forwards the Registration Request to the AMF1.
7\. The AMF/NSSF perform network slice selection. The AMF/NSSF determines the
new Allowed NSSAI including the new Requested NSSAI and the new Registration
Area.
8\. The new AMF1 sends a Registration Accept message towards the RAN node.
Option B:
9\. The RAN performs AMF selection based on the Requested NSSAI in the RRC
message. If no Requested NSSAI is provided by the UE in RRC message, the NG-
RAN selects the default AMF.
10\. The RAN forward the NAS Registration Request message to the new selected
AMF2 or default AMF.
11\. The default AMF may further redirects the NAS message to target AMF2. The
AMF2 /NSSF performs network slice selection as per current procedure and
determines the new Allowed NSSAI including the new Requested NSSAI and the new
Registration Area.
12\. The AMF2 sends a Registration Accept message to the RAN as per current
procedure.
13\. The RAN forwards the Registration Accept message to UE.
14\. After the successful Registration Procedure, the UE initiates a PDU
Session Establishment Procedure with the new requested S-NSSAI and the PDU
Session Establishment Procedure is executed as per current procedure.
### 6.39.4 Impacts on existing entities and interfaces
UE:
\- If the UE intends to request an S-NSSAI in the Rejected S-NSSAI with
existing cause value indicating it is not supported within the Registration
Area, the UE shall reselect a different cell outside of the Registration Area
in the UE current location and register with the rejected S-NSSAI via the new
cell.
\- If the UE intends to request an S-NSSAI in the Rejected S-NSSAI with new
cause value indicating is supported by the current Tracking Area but is
incompatible with the Allowed NSSAI, the UE perform registration with the
rejected S-NSSAI within the current Registration Area. The UE shall not set
the 5G-S-TMSI or GUAMI in the AS layer. The UE may set the new requested
S-NSSAI that the UE requests in the RRC message.
\- UE indicates its capability for \"Network Slice Incompatibility Support\".
AMF:
\- The AMF is configured via OAM or provided by NSSF about network slice
information including simultaneous use of the network slice attribute value.
\- Set proper reject cause value for Rejected S-NSSAI.
\- Recognize \"Network Slice Incompatibility Support\" from UE.
NSSF:
\- The NSSF is configured via OAM about network slice information including
simultaneous use of the network slice attribute value.
\- Set proper reject cause value for Rejected S-NSSAI.
## 6.40 Solution #40: Separate SUPI/GPSI per isolated set of S-NSSAIs
### 6.40.1 Introduction {#introduction-40}
This solution addresses KI#6 \"Constraints on simultaneous use of the network
slice\".
### 6.40.2 High-level Description
In this solution, in order to isolate the usage of slices by the UE, the UE is
allocated different identities to use with sets of S-NSSAIs that require
isolation. So, for example, the UE is allocated SUPI1/GPSI1 for S-NSSAI1, and
SUPI2/GPSI2 for S-NSSAI2 if S-NSSAI1, and S-NSSAI2 require isolation. The UE
has to register with the identity corresponding to the S-NSSAI it wants to
use. This ensures that the UE can never use the S-NSSAIs requiring isolation
simultaneously.
The network or operator ensures that the UE profile is created accordingly.
There is no need for real-time checking by the network as existing procedures
for configured S-NSSAI, and Allowed S-NSSAI are re-used for the registered
identity. Furthermore, UE profile can be updated by the network any time using
existing procedures.
To support the above, the UE will be provisioned with a User Profile
associated with a single subscription, but will also be allocated an
independent alias SUPI/ GPSI (s) for every set of S-NSSAIs that has be used
independently. These additional alias SUPI(s), GPSIs and the compatible
S-NSSAI(s) they are bound to, can also be used to authenticate the UE if the
S-NSSAI(s) require secondary authentication. Alias SUPIs have no subscription
associated with them. They are simply used for the purpose of slice switching
between isolated sets using the registration procedure. Alias SUPIs are
received at initial registration of the UE, in the Registration Accept
response, and are considered configuration information by the UE and stored
accordingly.
There will be a single alias SUPI associated with every set of compatible
slices(s). However, the number of GPSIs depend on how many S-NSSAIs in the
compatible slices require network authorization. There will also be a distinct
alias SUPI per set of compatible slices.
The alias SUPI enables the UE to request the network to use a new set of
compatible S-NSSAIs reusing the exiting Registration procedure but with a new
registration type.
After acquiring the Associated-Identifiers (alias SUPIs) following initial UE
registration, if the UE wants to use a different S-NSSAI (s) in a different
set, the UE initiates a new type of registration, for swapping set of slices.
This new Registration type reuses the same security association of the UE
subscription. This new Registration type instructs the AMF to terminate all
activity with the currently registered Identifier regarding the bound
S-NSSAI(s) for the registered identifier; meaning all PDU sessions using the
S-NSSAI(s) can be released. The new S-NSSAI(s) associated with the Registering
aliasSUPI of an Associated-Identifier will be the new Allowed NSSAI.
Only one SUPI can be registered at a time when an initial 5G registration
includes Associated-Identifiers in the Registration Accept response.
Only the SUPI associated with the subscription registers and/or deregisters
the UE completely.
A aliasSUPI cannot explicitly deregister, except through a Registration for
swapping slices of another aliasSUPI, including the subscription SUPI. Hence,
the deregistration of any aliasSUPI is implicit by the registration of another
(alias SUPI or subscriptionSUPI for slice swapping), and the AMF may release
the PDU sessions associated with the implicitly deregistered SUPI.
When it comes to subscription data, all subscription data in the profile
applies to primary SUPI and secondary SUPIs included in the Registration
Accept response.
A Registration for swapping slices refreshes the registration. A regular 5GC
registration (does not include the new registration type) equally refreshes
the registration regardless of the currently registered alias SUPI.
Regarding NSSAI configuration, the AMF will receive all sets of slices from
UDM during the registration procedure (partitioned as described). AMF then
sends a single list including all S-NSSAIs to NSSF (i.e. as per existing
Subscribed S-NSSAIs). NSSF returns the configured S-NSSAIs to AMF. AMF then
associates each S-NSSAI as needed to be returned based on the registering
SUPI. Hence the subscription SUPI will have a list of configured S-NSSAI,
allowed S-NSSAI, and required GPSIs. Similarly, each alias SUPI in the
Registration Accept response will equally have a list of configured S-NSSAI,
allowed S-NSSAI, and required GPSIs.
This keeps NSSF agnostic to alias SUPIs.
In this solution, the UE does not need to indicate its support to network for
Associated-Identifiers since the solution uses existing Release 15 and 16
mechanisms for configured and Allowed S-NSSAI.
### 6.40.3 Procedures
#### 6.40.3.1 Initial Registration of Default SUPI
The call flow below shows the typical registration for TS 23.502 [6] with the
added impacts from the solution in bold.
UDM will have to be pre-configured with the Associated-Information in the UE
profile.
Figure 6.40.3.1-1
\- If the UE has not received a Configured NSSAI for the current serving
network yet, it uses the subscription SUPI to register.
\- It can be seen in step 14b, that the UDM will be configured with
Associated-Identifier Information element (IE) as additional element in the
Access and Mobility subscription related data. The Associated-Identifier
Information element may contain a list of SUPIs, GPSIs and related subscribed
S-NSSAI for each SUPI/GPSI. This information is returned in step 14b, and it
is stored in AMF, and the AMF creates a Configured NSSAI per Associated-
Identifier. If this is a periodic Registration, then AMF does not impact the
currently registered Associated-Identifier, if applicable.
For each associated Identifier there is a single distinct alias SUPI
associated with every set of compatible slices(s). However, the number of
GPSIs depend on how many S-NSSAI in the compatible slices require network
authorization.
\- In step 21, Associated-Identifiers and the related Configured NSSAI are
included in Registration Accept. The UE stores this information just like the
AMF.
NOTE 1: The Associated Identifiers are part of the subscription information
provided by the Home PLMN. The serving network cannot create new Associated
Identifiers on demand.
NOTE 2: As with the Configured NSSAI since Rel-15, the AMF in the serving
network is able to remove S-NSSAIs coming from the UDM in the list of S-NSSAIs
provided to the UE, and this for each Associated Identifiers.
#### 6.40.3.2 Registration for swapping sets of Isolated slices
The Next call flow shows when the UE decides it wants to use a new slice
associated with a new Associated-Identifier.
The call flow shows the impact of a Registration for swapping sets of slices
on the Registration procedure depicted in TS 23.502 [6].
Figure 6.40.3.1-2
\- It can be seen in step 0 the UE selected the Associated-Identifier
corresponding to the requested S-NSSAI (created based on the Configured NSSAI
for the selected Associated-Identifier) and initiated registration with the
aliasSUPI associated with the selected Associated-Identifier for swapping
slices using a new Registration Type.
\- In steps 1 and 3, and if this is a Registration for swapping slices, and
not e.g. an initial or mobility registration, then the AMF will need to
acquire Associated-Identifiers from the old-AMF, in addition to other
information.
\- In step 5, AMF receives Associated-Identifiers.
\- In step 5b, AMF validates the registering Associated-Identifier. The AMF
always uses the subscription SUPI for the interaction with UDM.
\- In step 14f, the new AMF updates/Stores the received Associated-Identifiers
received from step 5b if any.
\- In step 14g, the AMF manages the PDU session associated with the
deregistering SUPI (alias SUPI for an Associated-Identifier or subscription
SUPI) based on operator policy.
\- In step 21, Associated-Identifiers may be included in Registration Accept
and the related Allowed NSSAI. The UE stores this information just like the
AMF if received. Since this a Registration for swapping set of isolated slices
the new GUTI, is based on the subscriptionSUPI.
### 6.40.3.3 Backward compatibility
The solution does not require any coordination for upgrades between elements
supporting this solution namely the UE and AMF at home or in any VPLMN, nor
does it require any declaration from the UE towards the network as to whether
it supports this feature or not. It is assumed that the UDM is upgraded. The
UDM will always send the information regarding the Associated-Identifiers to
the AMF regardless of its support (see step 14b above).
While the S-NSSAIs for all SUPIs (subscription SUPI and alias SUPI(s)) will be
provided together to the UE (regardless of its support) with the UCU or as
part of the Registration Accept, it is expected that a UE not supporting this
feature and interworking with an AMF supporting the feature only processes the
Configured S-NSSAI associated with the subscription SUPI. The non-supporting
UE will ignore the S-NSSAIs associated with the alias SUPIs and will not use
them.
A UE supporting this feature and interworking with an AMF not supporting the
feature will not receive the S-NSSAIs related to the alias SUPIs to the UE for
this serving network. The UE will not be able to use S-NSSAIs associated with
the alias SUPIs.
An AMF in the visited domain not supporting this feature behaves like a UE not
supporting the feature, and will ignore the information elements regarding the
Associated-Identifiers that it receives from the UDM. The UE, regardless of
its support for the feature or lack thereof, will not be able to use S-NSSAIs
associated with the alias SUPIs.
An AMF in the visited domain supporting this feature behaves like a UE
supporting the feature. The UE, regardless of its support for the feature or
lack thereof, will not be able to use S-NSSAIs associated with the alias SUPIs
if the home network does not support the feature.
### 6.40.4 Impacts on services, entities and interfaces
The following impacts are foreseen by this solution:
UE:
\- Handles Associated-Identifiers and related information (e.g. Configured
NSSAI, Allowed NSSAI, alias SUPI, etc.) received in Registration Accept (or UE
Configuration Update).
\- Support the new registration type for swapping sets of isolated slices.
AMF:
\- Supports the new registration type, and support required handling when the
subscription SUPI/alias SUPI of Associated-Identifier registers for swapping
sets of isolated slices.
UDM:
\- Supports the provisioning of Associated-Identifiers and subscribed S-NSSAIs
per Associated-Identifier, part of the Access and Mobility subscription data.
## 6\. 41 Solution #41: Simultaneous use of the network slice via Configured
NSSAI
### 6.41.1 Introduction {#introduction-41}
This solution addresses the Key Issue #6, \"Constraints on simultaneous use of
the network slice\", which defines different attributes of network slice to
describe whether a network slice can be simultaneously used with other network
slices.
This solution allows UE to request the network slices that can be
simultaneously used based on the attributes of network slice. The S-NSSAIs in
the Requested NSSAI would not be rejected by network due to slice
incompatibility. Therefore, this solution can improve the chances for UE to
register network slices successfully and has no impacts on the procedures of
network slice selection as defined in Rel-15/Rel-16.
This solution allows the UE to have active PDU Sessions simultaneously for all
the S-NSSAIs in the Allowed NSSAI. In other words, only network slices
S-NSSAIs for which the UE is able to have PDU Sessions simultaneously can be
included in the Allowed NSSAI.
This solution applies to both roaming and non-roaming scenarios. In roaming
scenario, the constraints on simultaneous use of the network slice depends on
the global constraints on network deployments from both VPLMN and HPLMN (see
clause 6.41.2 for details on how the HPLMN constraints are taken in account in
roaming scenario).
### 6.41.2 High-level Description
Based on the operator\'s operational or deployment needs, a network slice is
associated with one or more Simultaneous Usage Groups, in order to distinguish
which network slices can be grouped with this network slice. The network
slices belonging to the same Simultaneous Usage Group (called as SUG) can be
simultaneously used by the UE and served by the same/common AMF Set. The
purpose of a SUG identifier is just to compare whether two slices belong to
the same group (can be used simultaneously), and therefore its value is
arbitrary.
The Figure 6.41.2-1 depicts an example for Simultaneous Usage Group of Network
Slices, in which case the Network Slice A belongs to the multiple SUGs (i.e.
both in SUG#1 and SUG#2, and served by different Network Slice instances) and
can be simultaneously used with the Network Slice B from the SUG#1 or with
Network Slice C/ Network Slice D from the SUG#2. The Network Slice E belonging
to the SUG#3 is incompatible with other Network Slices and is served by a
dedicated AMF.
Figure 6.41.2-1: Example for the deployment of Simultaneous Usage Group of
Network Slices
It is assumed that the OAM is already configured with the network slices
deployment based on the GST information and the AMF/NSSF is configured with
the SUGs per S-NSSAI by the OAM.
To support simultaneous access to network slices in the UE, the AMF/NSSF
determines the SUGs of each S-NSSAI in the Configured NSSAI based on the
configuration. The NSSF/AMF analyses based on the different input (network
slice deployment, configuration derived from the SLA, subscriber information
coming from the UE, e.g. Subscribed S-NSSAIs) the compatibility matrix of the
different S-NSSAIs and derives a number of SUGs for the S-NSSAIs to be
provided in the Configured NSSAI. An updated Configured NSSAI can be sent
whenever the subscription is updated from the UDM (e.g. change of Subscribed
S-NSSAIs), or when network configuration is updated.
\- After receiving the SUGs included with the Configured NSSAI, the UE takes
into account the SUGs of each S-NSSAI in the Configured NSSAI when the UE
derives the Requested NSSAI by selecting only S-NSSAIs that all belong to at
least one common SUG.
For example, if the Configured NSSAI includes slices S1, S2, S3, with S1
belonging to SUG1 and SUG2, S2 belonging to SUG1 and S3 belonging to S3, it
can provide the following S-NSSAIs in the Requested NSSAI: {S1}, {S2}, {S3},
{S1, S2}, {S1, S3}, but not {S1, S2, S3} or {S2, S3}. How the UE determines
which combination to select among the possible choices is a UE internal
implementation consideration.
\- Only the S-NSSAIs belonging to the same SUG can be included in the
Requested NSSAI. The network determines the Allowed NSSAI based on Requested
NSSAI, which is the existing mechanism as defined in Rel-15/Rel-16. The
Allowed NSSAI granted by network allows the UE to have active PDU Sessions
simultaneously for all the S-NSSAIs in the Allowed NSSAI. If the UE does not
support the SUG functionality, or includes incompatible network slices due to
mis-implementation, the network rejects the incompatible slices as per the
existing specification.
\- For roaming scenario, the SUGs for VPLMN S-NSSAI are decided based on the
roaming SLA(e.g. slice mapping), the constraints on the simultaneous usage of
network slices both in the HPLMN and in the VPLMN. It means that the AMF/NSSF
in the serving PLMN should ensure the constraints on simultaneous use of the
network slices from HPLMN and simultaneous use of the mapped network slices
from VPLMN will not cause conflicts, based on the configuration.
\- If UE needs to access one or more S-NSSAI(s) which are not in the current
Allowed NSSAI and the UE has already established one or more PDU Session(s)
associated with specific S-NSSAIs, the UE shall first check the SUGs of each
S-NSSAI in the new Requested NSSAI. The UE or AMF may decide to release the
current PDU sessions based on preference if the SUGs of the S-NSSAI(s) for
current PDU sessions conflict with the SUGs of the S-NSSAI(s) from new
Requested NSSAI. If the PDU Session Release is triggered by AMF based on the
SUGs of the S-NSSAI(s), it is assumed that the S-NSSAI(s) from new Requested
NSSAI have high priority.
\- When a differentiated treatment is required between UEs, this can be
conveyed (since Rel-15) by using different S-NSSAIs (typically different SD
fields) in the subscription for the similar services (e.g. \"gold\" vs
\"silver\"), allowing the serving network to map the HPLMN network slices to
serving network network slices taking in account the SLA of the network. This
allows also to cover both separate \"compatibility\" constraints and
deployment constraints. As this is a mechanism already available since Rel-15,
it is not necessary to invent a different mechanism to support the same
functionality. - This solution allows to support in the same PLMN a deployment
where isolation is required between AMFs serving non-\"compatible\" network
slices (i.e. AMFs are not allowed to belong to both network slices), and a
deployment where isolation is not required, or even not desired (i.e. AMFs are
allowed or required to belong to both network slices). In that case, it is
even possible to support both network slices by the same network slice
instance if so desired.
NOTE 1: The mechanism supports any combination of (in)compatibility between
network slices that the UE supports.
\- This solution supports scenarios where a slice not subject to compatibility
or incompatibility constraints can be selected with both network slices being
not compatible with each other. This means that, given three slices S1, S2,
S3, if S1 and S2 are marked as incompatible with each other, this does not
prevent S3 to be compatible with both or either S1 and S2 as desired. Note
that the mechanism supports any combination of (in)compatibility between
network slices that the UE supports.
NOTE 2: While the solution is based on the clear definition that the network
slice compatibility parameter is defined per network, it could be enhanced (if
SA2 determines to go beyond the requirements of KI#6) by allowing the UDM in
the HPLMN, if wanted, to provide SUGs as part of the UE subscription
information for each S-NSSAI. In that case, the AMF/NSSF in the serving
network needs to determine the SUGs to be provided to the UE as part of the
registration or configuration update procedure by combining the input from the
UDM (UE Subscribed S-NSSAIs and possibly SUGs), the SLA information it may
already have, and the deployment constraints of the serving network.
\- As part of the registration, the UE provides an indication of its support
for SUGs. If it is not provided (e.g. Rel-15/Rel-16 UEs), the AMF may keep the
SUG information in UE Context for faster assessment of compatible network
slices in subsequent UE registrations, but does not send this information to
the UE. Slice rejection information is provided to the UE as in Rel-15/Rel-16.
NOTE: As a UE supporting SUGs should only send network slices that are not
incompatible with each other (i.e. all slices included in the Requested NSSAI
should have at least one SUG in common), there is no need for new rejection
codes for this scenario.
### 6.41.3 Procedures
During the Registration Accept message as described in the clause 4.2.2.2 of
TS 23.502 [6] and UE Configuration Update Command from the AMF as described in
the clause 4.2.4.2 of TS 23.502 [6], the SUGs per S-NSSAI are provided to the
UE with the Configured NSSAI.
After receiving the SUGs included with the Configured NSSAI, the UE takes into
account the SUGs of each S-NSSAI in the Configured NSSAI when it derives the
Requested NSSAI, which only contain the S-NSSAIs belonging to the same SUG.
The UE or AMF may decide to release the current PDU sessions as described in
the clause 4.3.4 of TS 23.502 [6], based on preference if the SUG IDs of the
S-NSSAI(s) for current PDU sessions conflict with the SUG IDs of the
S-NSSAI(s) from new Requested NSSAI.
### 6.41.4 Impacts on services, entities and interfaces
UE:
\- Support the handling of SUGs of each S-NSSAI included with the Configured
NSSAI.
AMF/NSSF:
\- Determine the SUGs of each S-NSSAI from Configured NSSAI.
(Optionally) UDM:
\- (if decided so by SA2) the UDM could send SUG information for Subscribed
S-NSSAIs.
## 6.42 Solution #42: UE handling of constraints on simultaneous use of
network slices based on network assistance
### 6.42.1 Introduction {#introduction-42}
One of the attributes in the GST documented in GSMA 5GJA NG.116 [3] is the
following:
Simultaneous use of the network slice
This attribute describes whether a network slice can be simultaneously used
with other network slices.
Table 6.42.1-1
Parameters
* * *
Value Integer Measurement unit NA 0: Can be used with any network slice 1: Can
be used with network slices with same SST value Example 2: Can be used with
any network slice with same SD value 3: Cannot be used with another network
slice 4-15: Operator defined class Tags Character attribute / Functional
This solution addresses the Key Issue #6 - Handling of constraints on
simultaneous use of network slice. Based on the \'simultaneous use of network
slice\' GST attribute value set for a specific network slice, constraints on
simultaneous use of network slices by a UE may be classified into the below
sub-categories. For example, if GST attribute \'Simultaneous use of network
slice\' is set to 1 for a specific network slice (i.e. it can be used with
network slices with same SST value), then the sub-categories are:
1\. Whether the network slices with same SST value are allowed to be
registered simultaneously.
2\. If the network slices with same SST value are allowed to be registered
simultaneously, then whether UE and network are allowed to establish PDU
sessions associated with more than one registered slice simultaneously.
3\. If the network slices with same SST value are allowed to have simultaneous
PDU sessions, then whether the UE and network are allowed to have active user
plane resources for the established PDU sessions simultaneously. For example,
this may help to achieve operation of network slice isolation in a lightweight
manner.
### 6.42.2 High Level Description
As part of Registration Request, the UE shall indicate \"Support for
simultaneous slice usage constraints\".
As part of Registration Accept, if the UE has indicated \"Support for
simultaneous slice usage constraints\", and if AMF is aware of the slice usage
constraints, AMF provides the UE with \"Slice compatibility\" information for
each of the S-NSSAI which are part of the UE\'s Configured NSSAI list. \"Slice
compatibility\" information consists of:
1\. List of other S-NSSAIs in the Configured NSSAI list the current S-NSSAI is
allowed to simultaneously register with.
2\. List of other S-NSSAIs in the Configured NSSAI list the current S-NSSAI is
allowed to have simultaneous PDU sessions with. This shall be a subset of #1
above, i.e. simultaneous establishment of PDU sessions for different network
slices are only possible when they are allowed to be registered
simultaneously.
3\. List of other S-NSSAIs in the Configured NSSAI list the current S-NSSAI is
allowed to have simultaneous active user plane resources for the established
PDU sessions with. This shall be a subset of #2 above, i.e. simultaneous
active user plane resources for PDU sessions for different network slices are
only possible when they are allowed to be established simultaneously.
#1 and #2 are mandatory, while #3 is optional. When #3 is not provided, it
shall be assumed that established PDU sessions are allowed to have active user
plane resources simultaneously.
An example is provided below:
Table 6.42.2-1: Example Slice compatibility information provided to the UE
A B C D E F
* * *
Configured NSSAI list SST SD List of S-NSSAIs the current S-NSSAI is allowed
to register simultaneously with List of S-NSSAIs the current S-NSSAI is
allowed to have simultaneous PDU sessions with List of S-NSSAIs the current
S-NSSAI is allowed to have simultaneous active user plane resources for the
established PDU sessions with S-NSSAI-A eMBB 1 S-NSSAI-B, S-NSSAI-C S-NSSAI-B
S-NSSAI-B S-NSSAI-B eMBB 2 S-NSSAI-A, S-NSSAI-C S-NSSAI-A S-NSSAI-A S-NSSAI-C
eMBB 3 S-NSSAI-A, S-NSSAI-B Nil Nil S-NSSAI-D URLLC 4 Nil Nil Nil
NOTE: It is left to Stage-3 specifications to define the exact format of how
the \"slice compatibility\" information would be provided to the UE to
optimize the message size. For example, information above may be reflected as
\"slice incompatibility\" information instead of \"slice compatibility\"
information such that the various configured S-NSSAIs are restricted from
being active at the same time based on restrictions in columns D, E and F.
Editor\'s note: In a roaming scenario, whether and how HPLMN configuration
would be taken into account for slice compatibility information is FFS.
In this example, though S-NSSAI-A, S-NSSAI-B and S-NSSAI-C are allowed to be
registered simultaneously (i.e. all three S-NSSAIs may be part of the Allowed
NSSAI list received from the network at the same time), the UE is only allowed
to simultaneously establish PDU Sessions and have active user plane resources
for PDU sessions associated with S-NSSAI-A and S-NSSAI-B. Thus, if UE wishes
to establish PDU session for S-NSSAI-C and activate user plane resources, it
shall first ensure that PDU sessions associated with S-NSSAI-A and S-NSSAI-B
are released or not established simultaneously.
Also, as seen in this example, the URLLC slice S-NSSAI-D is not allowed to be
registered simultaneously with the other configured S-NSSAIs. Thus, if the UE
wishes to access S-NSSAI-D, UE shall first initiate a mobility or periodic
registration procedure with the network with the Requested NSSAI to include
S-NSSAI-D. UE also shall ensure that PDU sessions associated with incompatible
slices are either released implicitly and indicated to the network via \"PDU
Session Status\" in Registration Request, or released explicitly via PDU
Session Release request.
Based on the slice compatibility information received by the UE, the UE shall
take responsibility of honouring the slice constraints. In case the UE
requests for incompatible slices in the Registration Request in Requested
NSSAI (e.g. a misbehaving UE), AMF shall only allow a set of compatible slices
as part of the Allowed NSSAI in the Registration Accept.
NOTE: How AMF selects which set of compatible slices to allow to register
simultaneously is left to AMF implementation. For example, AMF may choose to
allow the largest subset of requested slices which can be allowed to register
simultaneously, or, AMF may choose to allow the largest subset of requested
slices which includes the first slice in Requested NSSAI list.
Editor\'s note: If different UEs have different constraints for an identical
set of slices, how the AMF is aware of this is FFS.
Furthermore, AMF may also implement the behaviour as described in solution
#27, clause 6.27.3.2 to ensure a misbehaving UE does not violate slice
compatibility restrictions related to simultaneous PDU sessions.
From a UE perspective, having information about different levels of
compatibility helps in faster switching between incompatible network slices,
and thus better user experience. For example, S-NSSAI-A, S-NSSAI-B and
S-NSSAI-C are all allowed to simultaneously register, S-NSSAI-C is not allowed
to have simultaneous PDU session with S-NSSAI-A or S-NSSAI-B. When an
application on the UE which needs access to S-NSSAI-C is activated by the
user, the UE at this time need not re-register with the network to get allowed
for S-NSSAI-C, and then establish PDU session for S-NSSAI-C. Instead UE can
directly initiate PDU Session establishment for S-NSSAI-C as highlighted in
clause 6.42.3.2 in the solution.
From a network perspective, there can be cases where certain slices are not
served by a single AMF (e.g. S-NSSAI-A and S-NSSAI-D in the solution) in which
cases they shall not be allowed register simultaneously. In some other cases,
though more than one slice are served by a single AMF and are thus allowed to
register simultaneously, it may not be possible to have simultaneous PDU
sessions (and thus data transfer) on such slices (e.g. S-NSSAI-A and S-NSSAI-C
in the solution) because just as one e.g. the slices can operate on different
operating frequency bands, or due to operator policy.
It is clarified that as long as UE is registered to a slice, UE\'s
registration for the slice is counted for the slice UE quota handling (KI#1).
It is also clarified that as long as a PDU session is established for a
registered slice, it would be counted towards the PDU session quota (KI#2).
### 6.42.3 Procedures
The procedures are explained using the example scenario in clause 6.42.2:
#### 6.42.3.1 Initial Registration and PDU Session Establishment Procedure
Figure 6.42.3.1-1: Initial Registration and PDU Session Establishment
procedure
1\. UE initiates initial Registration Request, and includes the support for
the capability, \"Support for simultaneous slice usage constraints\".
2-3: AMF receives the subscribed NSSAI list from UDM.
4\. AMF provides the Subscribed NSSAI list, current PLMN, TAI to the NSSF. If
UE has included \"Support for simultaneous slice usage constraints\", then AMF
also provides this information to NSSF.
5\. NSSF provides the list of Configured NSSAI, and the slice compatibility
information for each slice in the Configured NSSAI, i.e. contents shown in
Figure 6.42.2-1.
6\. AMF stores the slice compatibility information as part of the UE context,
and continues with the rest of the registration procedure as described in
clause 4.2.2.2 in TS 23.502 [6].
7\. AMF sends Registration Accept to the UE. AMF includes the Configured
NSSAI, and the slice compatibility information for each Configured S-NSSAI.
It is possible that the slice compatibility information may be updated after
the UE is already registered. In such a case, AMF updates the slice
compatibility information at the UE by sending a UE Configuration Update
Command.
NOTE: If the Configured NSSAI for the UE\'s context at AMF has not changed,
and if the AMF had previously provided the slice incompatibility information
to the UE, AMF need not provide it to the UE during every registration
procedure.
8\. Based on the received slice compatibility information, UE shall take a
decision on which network slices to request registration as part of Requested
NSSAI list. In this example, UE includes S-NSSAI-A, S-NSSAI-B, S-NSSAI-C in
the Requested NSSAI list in Registration Request, as these three slices are
allowed to be registered simultaneously as per the received slice
compatibility information. UE may either trigger an initial registration
procedure, or a mobility/periodic registration update at this step.
9\. AMF proceeds with the registration procedure as described in clause
4.2.2.2 in TS 23.502 [6]. AMF sends Registration Accept to the UE, and
includes S-NSSAI-A, S-NSSAI-B, S-NSSAI-C in the list of Allowed NSSAI since
they are compatible. Any of these slices may get rejected due to quota
unavailability or other reasons.
10\. UE takes a decision to establish PDU sessions based on UE policy. Based
on the slice compatibility information, UE observes that it may only establish
simultaneous PDU sessions for S-NSSAI-A and S-NSSAI-B. Thus, UE proceeds with
PDU session establishment procedure for S-NSSAI-A and S-NSSAI-B, but not for
S-NSSAI-C.
#### 6.42.3.2 PDU Session Establishment Procedure for an incompatible slice
Figure 6.42.3.2-1: PDU Session Establishment Procedure for an incompatible
slice
1\. This step is same as step 10 in clause 6.42.3.1. At this step, the UE has
successfully established PDU sessions for the compatible slices S-NSSAI-A and
S-NSSAI-B.
2\. Based on user activity, or UE policy, UE needs to initiate PDU session for
S-NSSAI-C. Based on slice compatibility information, UE is aware that PDU
session for S-NSSAI-C may not be simultaneously established with PDU sessions
associated with S-NSSAI-A, or S-NSSAI-B.
3\. Alt-1: In this alternative, UE shall explicitly release all the
incompatible PDU sessions by sending PDU Session Release request. In this
example, UE sends two PDU Session Release request (for PDU session associated
with S-NSSAI-A, and for PDU session associated with S-NSSAI-B). AMF responds
with PDU Session Release command for each PDU session.
Alt-2: In this alternative, UE shall implicitly release the incompatible PDU
Sessions. UE initiates either a Service Request or Registration procedure. UE
includes \"PDU session status\" and does not include the PSI corresponding to
the PDU sessions associated with S-NSSAI-A and S-NSSAI-B. Based on the
indication that PDU sessions are implicitly released at the UE, the network
proceeds with releasing the PDU sessions.
4\. Since incompatible PDU sessions are released, UE initiates PDU Session
Establishment for S-NSSAI-C.
5-6: PDU Session Establishment procedure as described in clause 4.3.2.2.1-1 in
TS 23.502 [6]. UE receives PDU Session Establishment Accept. At this stage,
PDU session with active user plane resources is established for S-NSSAI-C.
#### 6.42.3.3 Registration Procedure for an incompatible slice
Figure 6.42.3.3-1: Registration Procedure for an incompatible slice
1\. This step is the same as steps 5-6 of clause 6.42.3.2. UE has an active
PDU session associated with S-NSSAI-C.
2\. The UE decides to initiate PDU session on S-NSSAI-D, however S-NSSAI-D is
not part of the Allowed NSSAI list, and thus a new registration procedure
needs to be initiated. However, since S-NSSAI-D is incompatible with
S-NSSAI-C, UE first needs to implicitly release PDU sessions associated with
S-NSSAI-C.
3\. UE sends Registration Request, it includes S-NSSAI-D as part of the
Requested NSSAI list. UE also includes \"PDU Session Status\" and indicates
that PDU session associated with S-NSSAI-C is implicitly released.
4\. UE does not provide the 5G S-TMSI to NG-RAN in RRC Connection setup
procedure so NG-RAN may trigger AMF selection based on the S-NSSAI(s) included
in the RRC signalling message.
5-6: AMF proceeds with the registration procedure. If AMF already has the
slice compatibility information, it does not need check it again with NSSF.
7\. AMF responds to UE with Registration Accept indicating that S-NSSAI-D is
allowed to use.
### 6.42.4 Impacts on existing entities and interfaces
UE:
\- indicate support for simultaneous slice usage constraints.
\- ability to interpret and process the received slice compatibility
information for the list of configured NSSAIs.
AMF:
\- include the UE\'s capability support for simultaneous slice constraints as
part of Nnssf_NSSelection_Get to NSSF.
\- able to save the slice compatibility information as part of UE context.
\- able to allow/reject slices based on slice compatibility information in UE
context.
NSSF:
\- provide the slice compatibility information based on the serving network
configuration to the AMF.
## 6.43 Solution #43: UE Slice Maximum Bit Rate related event notification
### 6.43.1 Introduction {#introduction-43}
This solution is proposed to solve KI#4 based on solution #22.
### 6.43.2 High-level Description
The AF and PCF subscribes the event of UE Slice Maximum Bit Rate (SMBR)
reached to AMF. The AF subscribes the event via NEF. The AMF requests the RAN
to notify the event when the UE SMBR is reached and sends the event to the PCF
and to the AF via NEF.
### 6.43.3 Procedures
Figure 6.43.3-1: UE SMBR event notification
1\. The AF or the PCF subscribes the event of the UE SMBR reached. The AF
subscribes the event via NEF using step 1a. The PCF subscribes the event using
step 1b.
2\. The AMF sends N2 message to RAN to subscribe the event that the SMBR of UE
is reached.
3\. The RAN detects that the SMBR is reached.
4\. The RAN sends N2 message including S-NSSAI and indication of UE SMBR is
reached to AMF.
5\. The AMF sends event notification to AF via NEF or to PCF. The PCF may
decide to update UE policy to steer the UE traffic in the slice to N3GPP
access.
### 6.43.4 Impacts on services, entities and interfaces
AMF:
\- Receive UE SMBR reached event subscribe request from NEF or PCF.
\- Request RAN to notify the UE SMBR reached.
\- Receive UE SMBR reached event notify from RAN and sends the event to NEF or
PCF.
NEF: Support UE SMBR reached event subscribe and notify.
PCF:
\- Subscribe the UE SMBR reached event to AMF.
\- Receive the UE SMBR reached event notify from AMF.
RAN:
\- Receive UE SMBR reached event request from AMF.
\- Report the UE SMBR reached event to AMF when detected.
AF: Support UE SMBR reached event subscribe and notify.
## 6.44 Solution #44: RAN controlled steering of the UE to a network slice in
a different frequency band
### 6.44.1 Introduction {#introduction-44}
This solution addresses the below requirements from Key Issue #7: Support of
5GC assisted cell selection to access network slice.
\- How does 5GS steer UEs to a 5G-AN (e.g. a specific frequency band) that can
support the network slices that the UE can use.
\- What information does 5GS need to take a decision to steer UE to a proper
5G-AN.
### 6.44.2 High Level Description
The solution is based on the following high level assumptions and principles:
\- The UE is allocated Allowed NSSAI which are supported by all cells in the
Registration area.
\- The NG-RAN is configured by O&M with RRM policies related to an S-NSSAI.
### 6.44.3 Procedures
Figure 6.44.3-1: Steering the UE to a network slice in different frequency
band
1) The UE is in idle mode, registered via RAN-1 for S-NSSAI-1, which
preferably operates only in frequency band 1 (FB-1) and S-NSSAI-2, which
preferably operates in frequency band 2 (FB-2).
2) An application in the UE needs to establish service on S-NSSAI-2. S-NSSAI-2
is defined in the network to prefer to use FB-2.
3) The UE establishes RRC connection with RAN-1.
4) The UE triggers PDU Session Establishment Request on S-NSSAI-2 via RAN-1,
and PDU Session Establishment continues towards SMF as per current
specifications.
5) SMF accepts the PDU session.
6) AMF forwards SM message from SMF to NG-RAN.
The NG-RAN takes the decision whether to perform option A or B.
Option A (e.g. used if the S-NSSAI-2 is preferred to be served by current
FB-2):
7a) PDU Session establishment procedure on S-NSSAI-2 via RAN-1 as per current
specifications.
8a) RAN-1 triggers inter-frequency cell change to RAN-2 which is preferred for
S-NSSAI-2.
Option B (e.g. used if UE CP should not be moved):
7b) NG-RAN adopts the AS and UP configurations to serve the new UP for
S-NSSAI-2 e.g. DC/CA.
8b) PDU Session establishment procedure on S-NSSAI-2 via RAN-1 as per current
specifications.
9) After PDU session on S-NSSAI-2 is deactivated or released, the NG-RAN
steers the UE accordingly to the policies for the Allowed NSSAI/ RFSP.
### 6.44.4 Impacts on services, entities and interfaces
No impacts.
## 6.45 Solution #45: Compatibility of S-NSSAIs operating frequency bands with
UE Radio Capabilities
### 6.45.1 Introduction {#introduction-45}
The solution addresses Key Issue #7, \"Support of 5GC assisted cell selection
to access network slice\", which defines that different radio spectrums can be
deployed per network slice by operator, and in particular the issue related to
the fact that the AMF is not aware, when creating an Allowed NSSAI for the UE,
of the UE radio capabilities and whether these are compatible with all
S-NSSAIs in the Allowed NSSAI in terms of the frequency bands over which such
S-NSSAIs operate.
This solution is based on the following assumption:
\- As defined in Rel-15, all S-NSSAIs of the Allowed NSSAI for a Registration
Area are available in all Tracking Areas of the Registration Area. The Allowed
NSSAI provided to the UE allows the UE to have active PDU Sessions
simultaneously for all the S-NSSAIs in the Allowed NSSAI.
\- The S-NSSAIs available at the TA can be deployed in different cells over
different operating bands. The UE might not support all the operating bands of
network slices.
The solution proposes to modify the conditions in which the AMF triggers the
UE Capability Match Request procedure during the UE Registration Procedure.
Moreover, it proposes that in this message (UE Capability Match Request) that
the AMF provides to the NG-RAN the list of S-NSSAIs that the AMF determines
should be in the Allowed NSSAI, so that the NG-RAN can verify the frequency
restrictions for such S-NSSAIs with respect to the frequencies supported by
the UE based on the UE Radio Capability information.
The solution does not propose to delegate the slice selection to the NG-RAN,
since the selection for the S-NSSAIs placed in the Allowed NSSAI for a UE is
still made by the AMF; however, this allows the AMF to verify that the
S-NSSAIs selected are not restricted to frequency bands that conflict with the
UE radio capabilities.
### 6.45.2 High Level Description
In order to allow the AMF to provide the UE with an Allowed NSSAI containing
only S-NSSAIs of slices that operate over frequency bands that are compatible
with the UE radio capabilities (i.e. ensure that the UE can operate in the
frequency bands associated to the S-NSSAIs the AMF places in the Allowed
NSSAI), the AMF:
\- After determining an Allowed NSSAI based on existing mechanisms, the AMF
triggers a UE Capability Match Request procedure and provides to the NG-RAN
the S-NSSAIs in the Allowed NSSAI.
\- the NG-RAN retrieves the UE radio capabilities from the UE, and verifies
whether the frequency bands required by each S-NSSAI received from the AMF
matches the UE radio capabilities.
\- the NG-RAN returns to the AMF the combination(s) of S-NSSAIs that operate
on frequencies compatible with the UE radio capabilities and therefore the UE
can use simultaneously, and/or provides an indication to the AMF of which
S-NSSAIs have frequency band incompatibilities with respect to the UE
capabilities.
\- the AMF modifies the Allowed NSSAI based on the information received from
the NG-RAN before providing it to the UE.
### 6.45.3 Procedures
#### 6.45.3.1 Overall Registration Procedure
Figure 6.45.3.1-1: Registration procedure
1\. The UE sends the Registration Request to the AMF including the Requested
NSSAI.
2\. The AMF checks Requested NSSAI based on the Subscribed NSSAI and the
availability of network slices.
3\. The AMF determines the UE\'s current TA has some S-NSSAIs not available on
all cells, which is indicated by NG-RAN during NG Setup procedure. The AMF
sends a UE Capability Match Request message to the NG-RAN as defined in the
clause 4.2.8a of the TS 23.502 [6] and provides the Target NSSAI to NG-RAN.
The Target NSSAI is the Allowed NSSAI determined so far by the AMF according
to existing mechanisms and based on the Requested NSSAI, Subscribed NSSAI and
the availability of network slices by AMF.
4\. Upon receiving the UE Capability Match Request message, if the NG-RAN has
not already received the UE radio capabilities, the NG-RAN requests the UE to
upload the UE radio capability information.
5\. Based on the UE Radio Capability, Target NSSAI and the RAN configuration,
the NG-RAN derives the S-NSSAIs that are compatible with the UE radio
capabilities and indicates them to the AMF, thus providing the combination(s)
of S-NSSAIs that can be simultaneously used by UE. Alternatively, the NG-RAN
may provide an indication to the AMF of which S-NSSAIs have frequency band
incompatibilities with respect to the UE capabilities.
6\. The AMF determines which combination of S-NSSAIs can be granted to UE as
Allowed NSSAI, based on configuration or taking in account the S-NSSAIs for
ongoing PDU Sessions, if any.
7\. [Conditional] If the S-NSSAI incompatible with the UE radio capabilities
is associated with existing PDU sessions, the AMF updates the Allowed NSSAI
and indicates to the SMF(s) which PDU Session ID(s) corresponding to the
relevant S-NSSAI shall be released. The SMF releases the PDU Session according
to clause 4.3.4.2 in TS 23.502 [6].
8\. The AMF sends Registration Accept message to UE including Registration
Area, Allowed NSSAI and optional Rejected NSSAI.
#### 6.45.3.2 Detailed Modification to Registration Procedure
Step 21 of the Registration Procedure in TS 23.502 [6] clause 4.2.2.2.2 is
modified as follows (see bold underlined text):
21\. New AMF to UE: Registration Accept (5G-GUTI, Registration Area, [Mobility
restrictions], [PDU Session status], [Allowed NSSAI], [Mapping Of Allowed
NSSAI], [Configured NSSAI for the Serving PLMN], [Mapping Of Configured
NSSAI], [rejected S-NSSAIs], [Pending NSSAI], [Periodic Registration Update
timer], [Active Time], [Strictly Periodic Registration Timer Indication],
[LADN Information], [accepted MICO mode], [IMS Voice over PS session supported
Indication], [Emergency Service Support indicator], [Accepted DRX parameters],
[extended idle mode DRX parameters], [Paging Time Window], [Network support of
Interworking without N26], [Access Stratum Connection Establishment NSSAI
Inclusion Mode], [Network Slicing Subscription Change Indication], [Operator-
defined access category definitions], [List of equivalent PLMNs], [Enhanced
Coverage Restricted information], [Supported Network Behaviour], [Service Gap
Time], [PLMN-assigned UE Radio Capability ID], [PLMN-assigned UE Radio
Capability ID deletion], [WUS Assistance Information], [Truncated 5G-S-TMSI
Configuration]).
If the Requested NSSAI does not include S-NSSAIs which map to S-NSSAIs of the
HPLMN subject to Network Slice-Specific Authentication and Authorization and
the AMF determines that no S-NSSAI can be provided in the Allowed NSSAI for
the UE in the current UE\'s Tracking Area and if no default S-NSSAI(s) not yet
involved in the current UE Registration procedure could be further considered,
the AMF shall reject the UE Registration and shall include in the rejection
message the list of Rejected S-NSSAIs, each of them with the appropriate
rejection cause value.
The Allowed NSSAI for the Access Type for the UE is included in the N2 message
carrying the Registration Accept message. The Allowed NSSAI contains only
S-NSSAIs that do not require, based on subscription information, Network
Slice-Specific Authentication and Authorization, or based on the UE Context in
the AMF, those S-NSSAIs for which Network Slice-Specific Authentication and
Authorization previously succeeded, regardless of the Access Type.
If the UE has indicated its support for Network Slice-Specific Authentication
and Authorization procedure in the UE MM Core Network Capability in the
Registration Request, AMF includes in the Pending NSSAI the S-NSSAIs that map
to an S-NSSAI of the HPLMN which in the subscription information has
indication that it is subject to Network Slice-Specific Authentication and
Authorization, as described in clause 4.6.2.4 of TS 24.501 [12]. In such case,
the AMF then shall trigger at step 25 the Network Slice-Specific
Authentication and Authorization procedure, specified in clause 4.2.9.2,
except, based on Network policies, for those S-NSSAIs for which Network Slice-
Specific Authentication and Authorization have already been initiated on
another Access Type for the same S-NSSAI(s). The UE shall not attempt re-
registration with the S-NSSAIs included in the list of Pending NSSAIs until
the Network Slice-Specific Authentication and Authorization procedure has been
completed, regardless of the Access Type.
If no S-NSSAI can be provided in the Allowed NSSAI because:
\- all the S-NSSAI(s) in the Requested NSSAI are to be subject to Network
Slice-Specific Authentication and Authorization; or
\- no Requested NSSAI was provided or none of the S-NSSAIs in the Requested
NSSAI matches any of the Subscribed S-NSSAIs, and all the S-NSSAI(s) marked as
default in the Subscribed S-NSSAIs are to be subject to Network Slice-Specific
Authentication and Authorization.
The AMF shall provide an empty Allowed NSSAI. Upon receiving an empty Allowed
NSSAI and a Pending NSSAI, the UE is registered in the PLMN but shall wait for
the completion of the Network Slice-Specific Authentication and Authorization
procedure without attempting to use any service provided by the PLMN except
emergency services (the AMF assigns the Tracking Areas of the Registration
Area as a Non-Allowed Area).
Editor\'s note: Mechanisms to prevent the UE from waiting indefinitely for the
completion of Slice-Specific Authentication and Authorization are defined in
Stage 3 specifications.
In the case of registration over 3GPP access, in order to verify the match
between the UE radio capabilities and the S-NSSAIs in the Allowed NSSAI, the
AMF performs the UE Capability Match Request procedure in clause 4.2.8a, and
provides the S-NSSAIs in the Allowed NSSAI determined so far by the AMF to the
NG-RAN, using a Target NSSAI. The AMF, upon receiving a Supported NSSAI from
the NG-RAN containing a set of one or more combinations of S-NSSAIs that are
compatible with the UE radio capabilities and can therefore be simultaneously
used by UE, and/or an indication to the AMF of which S-NSSAIs have frequency
band incompatibilities with respect to the UE capabilities, modifies the
Allowed NSSAI as needed (e.g. based on configuration or taking in account the
S-NSSAIs for ongoing PDU Sessions, if any) before providing it to the UE. If
the S-NSSAI(s) incompatible with the UE radio capabilities are associated with
existing PDU sessions, the AMF indicates to the SMF(s) which PDU Session ID(s)
corresponding to the relevant S-NSSAI shall be released. The SMF releases the
PDU Session according to clause 4.3.4.2 in TS 23.502 [6].
Editor\'s note It is not clear what problem space this solution addresses: the
UE clearly could access the slice in the TA, So it should be able to use the
slices supported in the TA at least from the band it is using in the TA. Then
if the UE supports this band, what is the conclusions the AMF or RAN can take?
The AMF stores the NB-IoT Priority retrieved in Step 14 and associates it to
the 5G-S-TMSI allocated to the UE.
The AMF sends a Registration Accept message to the UE indicating that the
Registration Request has been accepted. 5G-GUTI is included if the AMF
allocates a new 5G-GUTI. If the UE is already in RM-REGISTERED state via
another access in the same PLMN, the UE shall use the 5G-GUTI received in the
Registration Accept for both registrations. If no 5G-GUTI is included in the
Registration Accept, then the UE uses the 5G-GUTI assigned for the existing
registration also for the new registration. If the AMF allocates a new
Registration area, it shall send the Registration area to the UE via
Registration Accept message. If there is no Registration area included in the
Registration Accept message, the UE shall consider the old Registration Area
as valid. Mobility Restrictions is included if mobility restrictions applies
for the UE and Registration Type is not Emergency Registration. The AMF
indicates the established PDU Sessions to the UE in the PDU Session status.
The UE removes locally any internal resources related to PDU Sessions that are
not marked as established in the received PDU Session status. If the AMF
invokes the Nsmf_PDUSession_UpdateSMContext procedure for UP activation of PDU
Session(s) in step 18 and receives rejection from the SMF, then the AMF
indicates to the UE the PDU Session ID and the cause why the User Plane
resources were not activated. When the UE is connected to the two AMFs
belonging to different PLMN via 3GPP access and non-3GPP access then the UE
removes locally any internal resources related to the PDU Session of the
current PLMN that are not marked as established in received PDU Session
status. If the PDU Session status information was in the Registration Request,
the AMF shall indicate the PDU Session status to the UE.
If the RAT Type is NB-IoT and the network is configured to use the Control
Plane Relocation Indication procedure then the AMF shall include in the
Registration Accept message the Truncated 5G-S-TMSI Configuration that the UE
using Control Plane CIoT 5GS Optimisation uses to create the Truncated 5G-S-
TMSI, see TS 23.501 [2] clause 5.31.4.3.
The Allowed NSSAI provided in the Registration Accept is valid in the
Registration Area and it applies for all the PLMNs which have their Tracking
Areas included in the Registration Area. The Mapping Of Allowed NSSAI is the
mapping of each S-NSSAI of the Allowed NSSAI to the HPLMN S-NSSAIs. The
Mapping Of Configured NSSAI is the mapping of each S-NSSAI of the Configured
NSSAI for the Serving PLMN to the HPLMN S-NSSAIs.
The AMF shall include in the Registration Accept message the LADN Information
for the list of LADNs, described in TS 23.501 [2] clause 5.6.5, that are
available within the Registration area determined by the AMF for the UE. The
AMF may include Operator-defined access category definitions to let the UE
determinine the applicable Operator-specific access category definitions as
described in TS 24.501 [12].
If the UE included MICO mode in the Registration Request, then AMF responds in
the Registration Accept message whether MICO mode should be used. When MICO
mode is allowed for the UE, the AMF may include an Active Time value and/or
Strictly Periodic Registration Timer Indication in the Registration Accept
message. The AMF determines the Periodic Registration Update timer value,
Active Time value and the Strictly Periodic Registration Timer Indication
based on local configuration, Expected UE Behaviour if available, UE indicated
preferences, UE capability, UE subscription information and network policies,
or any combination of them so as to enable UE power saving, as described in TS
23.501 [2], clause 5.31.7. The AMF determines to apply the Strictly Periodic
Registration Timer Indication to the UE if the UE indicates its capability of
the Strictly Periodic Registration Timer Indication in the registration
request message, as described in step 1. If the AMF provides the Periodic
Registration Update timer value with the Strictly Periodic Registration Timer
Indication to the UE, the UE and the AMF start the Periodic Registration
Update timer after this step, as described in TS 23.501 [2], clause 5.31.7.5.
In the case of registration over 3GPP access, the AMF sets the IMS Voice over
PS session supported Indication as described in clause 5.16.3.2 of TS 23.501
[2]. In order to set the IMS Voice over PS session supported Indication the
AMF may need to perform the UE Capability Match Request procedure in clause
4.2.8a to check the compatibility of the UE and NG-RAN radio capabilities
related to IMS Voice over PS. If the AMF hasn\'t received Voice Support Match
Indicator from the NG-RAN on time then, based on implementation, AMF may set
IMS Voice over PS session supported Indication and update it at a later stage.
In the case of registration over non-3GPP access, the AMF sets the IMS Voice
over PS session supported Indication as described in clause 5.16.3.2a of TS
23.501 [2].
The Emergency Service Support indicator informs the UE that emergency services
are supported, i.e. the UE is allowed to request PDU Session for emergency
services. If the AMF received \"MPS priority\" from the UDM as part of Access
and Mobility Subscription data, based on operator policy, \"MPS priority\" is
included in the Registration Accept message to the UE to inform the UE whether
configuration of Access Identity 1 is valid within the selected PLMN, as
specified in TS 24.501 [12]. If the AMF received \"MCX priority\" from the UDM
as part of Access and Mobility Subscription data, based on operator policy and
UE subscription to MCX Services, \"MCX priority\" is included in the
Registration Accept message to the UE to inform the UE whether configuration
of Access Identity 2 is valid within the selected PLMN, as specified in TS
24.501 [12]. The Accepted DRX parameters are defined in clause 5.4.5 of TS
23.501 [2]. The AMF sets the Network support of Interworking without N26
parameter as described in clause 5.17.2.3.1 of TS 23.501 [2]. If the AMF
accepts the use of extended idle mode DRX, the AMF includes the extended idle
mode DRX parameters and Paging Time Window as described in 5.31.7.2 of TS
23.501 [2].
If the UDM intends to indicate the UE that subscription has changed, the
Network Slicing Subscription Change Indication is included. If the AMF
includes Network Slicing Subscription Change Indication, then the UE shall
locally erase all the network slicing configuration for all PLMNs and, if
applicable, update the configuration for the current PLMN based on any
received information.
The Access Stratum Connection Establishment NSSAI Inclusion Mode, as specified
in TS 23.501 [2] clause 5.15.9, is included to instruct the UE on what NSSAI,
if any, to include in the Access Stratum connection establishment. The AMF can
set the value to modes of operation a,b,c defined in TS 23.501 [2] clause
5.15.9 in the 3GPP Access only if the Inclusion of NSSAI in RRC Connection
Establishment Allowed indicates that it is allowed to do so.
For a UE registered in a PLMN, the AMF may provide a List of equivalent PLMNs
which is handled as specified in TS 24.501 [12]. For a UE registered in an
SNPN, the AMF shall not provide a list of equivalent PLMNs to the UE.
If the UE included support for restriction of use of Enhanced Coverage in step
1, the AMF sends the Enhanced Coverage Restricted information to the NG-RAN in
N2 message. The AMF also sends Enhanced Coverage Restricted information to the
UE in the Registration Accept message.
If the UE receives Enhanced Coverage Restricted information in the
Registration Accept message, the UE shall store this information and shall use
the value of Enhanced Coverage Restricted information to determine if Enhanced
Coverage feature should be used or not.
If the UE and the AMF have negotiated to enable MICO mode and the AMF uses the
Extended connected timer, then the AMF provides the Extended Connected time
value to NG-RAN (see clause 5.31.7.3 of TS 23.501 [2]) in this step. The
Extended Connected Time value indicates the minimum time the RAN should keep
the UE in RRC-CONNECTED state regardless of inactivity.
The AMF indicates the CIoT 5GS Optimisations it supports and accepts in the
Supported Network Behaviour information (see TS 23.501 [2], clause 5.31.2) if
the UE included Preferred Network Behaviour in its Registration Request.
The AMF may steer the UE from 5GC by rejecting the Registration Request. The
AMF should take into account the Preferred and Supported Network Behaviour
(see TS 23.501 [2], clause 5.31.2) and availability of EPC to the UE before
steering the UE from 5GC.
If the AMF accepts MICO mode and knows there may be mobile terminated data or
signalling pending, the AMF maintains the N2 connection for at least the
Extended Connected Time as described in clause 5.31.7.3 of TS 23.501 [2], and
provides the Extended Connected Time value to the RAN.
The AMF includes Service Gap Time if Service Gap Time is present in the
subscription information (steps 14a-c) or the Service Gap Time has been
updated by the Subscriber Data Update Notification to AMF procedure (see
clause 4.5.1) and the UE has indicated UE Service Gap Control Capability.
If the UE receives a Service Gap Time in the Registration Accept message, the
UE shall store this parameter and apply Service Gap Control (see TS 23.501 [2]
clause 5.31.16).
If the network supports WUS grouping (see TS 23.501 [2]), the AMF shall send
the WUS Assistance Information to the UE. If the UE provided the UE paging
probability information in Step 1, the AMF takes it into account to determine
the WUS Assistance Information.
When the UE and the AMF supports RACS as defined in TS 23.501 [2] clause
5.4.4.1a, and the AMF needs to configure the UE with a UE Radio Capability ID,
and the AMF already has the UE radio capabilities other than NB-IoT radio
capabilities for the UE, the AMF may provide the UE with the UE Radio
Capability ID for the UE radio capabilities the UCMF returns to the AMF in a
Nucmf_assign service operation for this UE. Alternatively, when the UE and the
AMF support RACS, the AMF may provide the UE with an indication to delete any
PLMN-assigned UE Radio Capability ID in this PLMN (see TS 23.501 [2] clause
5.4.4.1a).
#### 6.45.3.3 Detailed Modifications to UE Capability Match Request procedure
The UE Capability Match Request procedure of TS 23.502 [6] is modified as
follows (see **_bold italic_** text).
If the AMF requires more information on the UE radio capabilities support to
be able to set the IMS voice over PS Session Supported Indication (see TS
23.501 [2] clause 5.16.3) **_or for determining the match between the UE Radio
Capability information and the supported S-NSSAIs on the various frequency
bands_** , then the AMF may send a UE Radio Capability Match Request message
to the NG-RAN. This procedure is typically used during the registration
procedure or when AMF has not received the Voice Support Match Indicator (as
part of the 5GMM Context).
Figure 6.45.3.3-1: UE Capability Match Request
1\. The AMF indicates whether the AMF wants to receive Voice support match
indicator. The AMF may include the UE radio capability information it has
previously received from NG-RAN. **_The AMF may include the Target NSSAI
containing the S-NSSAIs that the AMF determined can be in the Allowed NSSAI
during the UE Registration Procedure as defined in clause 4.2.2.2.3_**.
2\. Upon receiving the UE Capability Match Request message, if the NG-RAN has
not already received the UE radio capabilities from the UE or from AMF in step
1, the NG-RAN requests the UE to upload the UE radio capability information.
3\. The UE provides the NG-RAN with its UE radio capabilities sending the RRC
UE Capability Information.
4\. **_If the AMF indicates in step 1 that it wants to receive Voice support
match indicator, then the_** NG-RAN checks whether the UE radio capabilities
are compatible with the network configuration for ensuring voice service
continuity of voice calls initiated in IMS.
For determining the appropriate UE Radio Capability Match Response, the NG-RAN
is configured by the operator to check whether the UE supports certain
capabilities required for Voice continuity of voice calls using IMS PS. In a
shared network, the NG-RAN keeps a configuration separately per PLMN.
NOTE 1: What checks to perform depends on network configuration, i.e.
following are some examples of UE capabilities to be taken into account:
\- E-UTRAN/NG-RAN Voice over PS capabilities;
\- the Radio capabilities for E-UTRAN/NG-RAN FDD and/or TDD; and/or
\- the support of E-UTRAN/NG-RAN frequency bands;
\- the SRVCC from NG-RAN to UTRAN capabilities and the support of UTRAN
frequency bands.
NOTE 2: The network configuration considered in the decision for the Voice
Support Match Indicator is homogenous within a certain area (e.g. AMF set) in
order to guarantee that the Voice Support Match Indicator from the NG-RAN is
valid within such area.
The NG-RAN provides a Voice Support Match Indicator to the AMF to indicate
whether the UE capabilities and networks configuration are compatible for
ensuring voice service continuity of voice calls initiated in IMS.
The AMF stores the received Voice support match indicator in the 5GMM Context
and uses it as an input for setting the IMS voice over PS Session Supported
Indication.
**_If the AMF provides in step 1 the Allowed NSSAI, the NG-RAN determines
whether the frequencies supported for each S-NSSAI in the Target NSSAI are
compatible with the UE radio capabilities and RAN configuration. The NG-RAN
returns to the AMF a Supported NSSAI containing the combination(s) S-NSSAIs in
the UE NSSAI that are compatible with the UE radio capabilities and that can
therefore be simultaneously used by UE, and/or provides an indication to the
AMF of which S-NSSAIs have frequency band incompatibilities with respect to
the UE capabilities._**
5\. If NG-RAN requested radio capabilities from UE in step 2 and 3, the NG-RAN
also sends the UE radio capabilities to the AMF. The AMF stores the UE radio
capabilities without interpreting them for further provision to the NG-RAN
according to TS 23.501 [2], clause 5.4.4.1.
NOTE 3: Steps 4 and 5 could be received by the AMF in any order.
### 6.45.4 Impacts on existing entities and interfaces
The following impacts are identified.
AMF:
\- upon implementation dependent conditions, the AMF triggers the UE
Capability Match Request procedure and provides in a Target NSSAI the S-NSSAIs
that it intends to place in the Allowed NSSAI, before returning the Allowed
NSSAI to the UE in the Registration Procedure.
\- The AMF determines which combination of S-NSSAIs can be granted to UE as
Allowed NSSAI, based on configuration or taking in account the S-NSSAIs for
ongoing PDU Sessions, if any.
NG-RAN
\- The NG-RAN is configured with the availability of network slices on all
cells within the TA and corresponding operating bands deployed per network
slice.
\- The NG-RAN indicates to the AMF that NG-RAN\'s TA has some S-NSSAIs not
available on all cells during NG Setup procedure.
\- the NG-RAN verifies the operating frequencies corresponding to the S-NSSAIs
received from the AMF with respect to the UE radio capabilities, and
determines the combinations of S-NSSAIs that are compatible with the UE Radio
Capability and can therefore be used simultaneously by the UE, based on the
Target NSSAI provided by AMF and the RAN configuration.
## 6.46 Solution #46: Support RAN-Based UE redirection with enhanced RRC-level
information
### 6.46.1 Introduction {#introduction-46}
This solution addresses KI#7.
The principles of the solution is to follow the current procedures as much as
possible and if the network cannot accept the Requested NSSAI due to it is not
allowed within current TAI, the 5GC provides a the Configured NSSAI, the
Rejected S-NSSAIs in addition to the Allowed NSSAI to NG-RAN for NG-RAN to
select a suitable Radio Spectrum for the UE. The AMF, also when the Requested
NSSAI is fully allowed, provides to the RAN also the Configured NSSAI as part
of the UE context so the NG-RAN, can indicate to the UE, if there are any
band-specific slices that are supported in the frequencies provided to the UE,
and which of the Configured NSSAI S-NSSAI(s) work in each of the bands in the
CellReselectionPriorities list indicated to the UE. The network also should
attempt to steer the UE only to bands where there are slices that the UE can
potentially use, with priority to the bands in the Allowed NSSAI taking also
into account the rejected S-NSSAIs if received from the AMF. The AMF decides
whether to send the rejected S-NSSAIs to the UE based on policy, e.g. when it
has to allocated a default S-NSSAI because the requested NSSAI was not
supported in the TA where the UE is.
When the RAN receives a list of rejected S-NSSAIs for the UE, it should
attempt to provide to the UE a CellReselectionPriorities in RRC Connection
Release with bands that should include these S-NSSAIs, if such bands are
available in neighbour cells of the cell where the UE currently is. These
should be prioritised so the UE can attempt to use these. The NG-RAN also
indicates for each frequency in the CellReselectionPriorities list which
S-NSSAI(s) of the Configured NSSAI are supported in this frequency if the
frequency supports band specific slices.
The NG-RAN should also always attempt to provide the UE with camping policies
that allow the UE to camp on cells that can potentially serve the greatest
possible number of S-NSSAIs of the Configured NSSAI S-NSSAIs, if possible, and
also avoid that the UE is provided priorities in bands that support none of
the S-NSSAIs the UE can potentially register with (i.e. the RAN shall not
provide the UE with a frequency priority placing it where none of the slices
in the configured NSSAI can work).
If the AMF cannot support certain S-NSSAI of the Configured NSSAI, it also
indicates this information to the NG-RAN (as part of the UE context or in any
N2 message causing the NG-RAN to release the UE RRC connection if no UE
context is yet present in the RAN) so the NG-RAN informs the UE when releasing
the RRC connection whether some S-NSSAI in the Configured NSSAI it sends to
the UE in the CellReselectionPriorities in the RRC connection Release message
require the UE to not send the GUAMI and S-TMSI so the UE is assigned to a
more optimal AMF right away, or, if the NSSAI cannot be included, to a default
AMF.
### 6.46.2 High-level Description
The following sequence of events are envisioned:
1\. Band-specific Network Slices are created supporting specific radio
spectrum, and other Network Slices, e.g. eMBB, are created supporting all the
radio spectrum available for the operator;
2\. The UE has a subscription for both the band-specific Network Slices and an
eMBB Network Slice;
3\. The subscription for the UE includes at least a band-specific Network
Slice and eMBB S-NSSAI and the eMBB S-NSSAI is marked as default;
4\. The UE has been registered in the network and been configured with a
Configured NSSAI and provided an Allowed NSSAI including the eMBB but not the
any band-specific Network Slice;
5\. The UE/user decides to use the band-specific Network Slice and therefore
issues a Requested NSSAI at least a band-specific Network Slice;
6\. If at least one S-NSSAI in the Requested NSSAI is not allowed in the
current TAI, and The AMF may provide to the RAN the rejected S-NSSAIs in
addition to the Allowed NSSAI and the Configured NSSAI to the NG-RAN to allow
NG-RAN to steer the UE according to the received information.
The NG-RAN, provides the UE with the list of S-NSSAIs among the S-NSSAIs of
the configured NSSAI which can be used in each band of the
CellReselectionPriorities list which supports band-specific Network Slices
(i.e. a band that supports all the S-NSSAIs of the configured NSSAI needs not
be associated with a list of S-NSSAIs).
### 6.46.3 Procedures
Existing procedures are used with the changes shown (in **bold**) in the
following Figure 1 showing the information flow for when a UE registers from a
TA that is defined to not be supported by any of the S-NSSAIs in the Requested
NSSAI.
Figure 6.46.3-1: UE requests to be registered to band-specific S-NSSAI while
not using the radio spectrum defined for the band-specific Network Slice
The steps of Figure 6.46.3-1 are as follows:
1\. The UE decides to use Band-specific S-NSSAI and sends a Registration
Request (Requested NSSAI=Band-specific S-NSSAI). NG-RAN selects AMF as per
current procedures i.e. this can be done from CM-IDLE or CM-CONNECTED; if the
UE was already CM-CONNECTED, the RAN already is assumed to have in the UE
context the Allowed NSSAI, the Configured NSSAI and also the Direct AMF
selection information.
2\. The AMF and, if necessary, NSSF performs Network Slice selection. As the
Band-specific S-NSSAI is not defined for the current TAI, the AMF and, if
applicable, the NSSF selects the eMBB S-NSSAI as Allowed NSSAI due to it is
defined as the default Subscribed S-NSSAI.;
3\. The AMF sends an N2 message to the NG-RAN with , if the UE was CM-IDLE,
Allowed NSSAI, Configured NSSAI, rejected S-NSSAI and any Direct AMF selection
information, and the NAS message that includes the eMBB S-NSSAI as Allowed
NSSAI and the Band-specific S-NSSAI as a rejected S-NSSAI for the RA; if the
UE was CM-CONNECTED, the AMF just updates the NG-RAN UE context with rejected
S-NSSAIs.
4\. The NG-RAN forwards the NAS message to the UE;
5\. The NG-RAN determines the Radio Spectrum based on the information received
from the AMF;
6\. The NG-RAN issues an RRC Release and includes cell reselection priorities
and the associated information of any band that only supports some Network
Slices in the Configured NSSAI (whether in the form of a block list or an
allowed list is up to stage 3), and also any indication that certain S-NSSAIs
are not supported by the current AMF so the UE can register without including
the GUAMI and S-TMSI and include the NSSAI if required. ; Alternatively, if
the UE has ongoing PDU sessions which can work in the target band (because the
target band supports the eMBB network slice, in this case) that work in the
current TA, the RAN can handover the UE to a suitable band directly outside
the RA based on policy, and if so the step 7 is skipped. If the UE was handed
over to a new TA as it was in CM-CONNECTED state, the NG-RAN removes the
rejected S-NSSAIs form the UE context or, if it is handing over the UE to
another NG-RAN node, it does not pass to the target NG-RAN the rejected
S-NSSAIs. The NG-RAN adds the RRC connection reconfiguration to the list of
S-NSSAIs available in the new TA.
NOTE 1: Steps 4 and 6 can possibly be done at the same time, i.e. it is up to
NG-RAN. When moving the UE the NG-RAN takes into account UE radio
capabilities, as per current specifications.
7\. The UE performs cell reselection if it was caused to become idle by the
NG-RAN.
8\. The UE realizes that the TAI of the selected cell is outside of the RA and
issues a Registration Request and includes the Band-specific S-NSSAI in the
Requested NSSAI as the UE still wants to register to that Network Slice and
the Band-specific S-NSSAI was previously only rejected for the RA (i.e. as per
existing logic);
9\. Network Slice selection may be performed as per current procedures if
required.
10\. The AMF sends a Registration Accept as per current procedures and
includes the Band-specific S-NSSAI in the Allowed NSSAI.
If the eMBB slice is not supported for the radio spectrum dedicated to the
band-specific Network Slice the PDU Sessions for eMBB are released as per
existing procedures e.g. using PDU Session status.
NOTE 2: If the eMBB slice is not available on the radio spectrum dedicated to
the band-specific Network Slice, as these Network Slices are to be isolated,
when an application in the UE requires connectivity for eMBB, the whole
procedure is repeated with the UE adding the eMBB slice in a Requested NSSAI.
NOTE 3: In the event the UE requests multiple S-NSSAI (sets) that require
separate frequency bands not possible to support at the same time, the
solution may result in more registration attempts.
### 6.46.4 Impacts on services, entities and interfaces
The impacts to the 5GS entities are the following:
UE:
\- No impacts foreseen for legacy UEs as the UE ignores the additional info in
RRC connection release making it aware of whether certain bands only support
certain s-NSSAIs, and also the \"direct AMF selection information\". If the UE
is supporting Ue, then it uses the information the RAN provides to understand
which bands support band specific slices in the priority list the RAN
provides, it also can understand whether to request NSSAI without inclusion of
GUAMI/GUTI when the AMF has indicated to the RAN it does not support certain
S-NSSAIs in the configured NSSAI and the RAN provides this information to the
UE when it is released.
NG-RAN:
\- Support taking into account the Configured NSSAI and rejected S-NSSAIs when
providing CellReselectionPriority list to the UE, storing Configured NSSAI and
any direct AMF selection information, provision of additional information in
RRC connection release or RRC connection reconfiguration as indicated above.
AMF:
\- providing configured NSSAI, rejected NSSAI and any Direct AMF selection
info to the NG-RAN as indicated above.
# 7 Evaluation
Editor\'s note: This clause will provide a general evaluation of the
solutions.
## 7.1 Evaluation on solutions of KI#1
From all 10 solutions proposed for KI#1 (Solution #1, #2, #3, #4, #8, #9, #15,
#18, #19, #38), some may have a complete solution and some not. But overall,
we can summarize that there are three main functionalities for supporting
quota management on the maximum number of UEs as described below.
\- **NW Slice quota information storage functionality:** This functionality is
responsible for storing a NW Slice quota information, which includes one or
more of the following information:
\- The maximum number of UEs for the S-NSSAI.
\- **NW Slice quota management functionality:** This functionality is
responsible for managing and updating NW Slice quotas of the maximum number of
UEs in a S-NSSAI, which includes one or more of the following functionalities:
\- Monitoring for counting, collecting and updating the number of UEs that
have been registered for a S-NSSAI that is subject to the network slice quota
management.
\- **NW Slice quota enforcement functionality:** This functionality is
responsible for enforcing a network slice SLA, which includes one or more of
the following functionalities:
\- Accept or reject the UE registration request in a S-NSSAI by taking the
network slice quota and the current monitored number of the registered UEs
into account.
\- In case of rejection, the function may provide a rejection cause and a
back-off timer.
Centralized Quota check vs Distributed Quota Check: In a centralized quota
check, the NW Slice quota enforcement functionality checks every new UE
registration against the quota at one centralized quota enforcement point. In
a distributed quota check, the quota that is a subset of S-NSSAI quota is
distributed to one or more NW Slice quota enforcement functionalities and
where every new UE registration is checked against the quota of one or more
distributed quota enforcement points. For each distributed quota enforcement
points, when the distributed quota are consumed then the NW Slice quota
enforcement functionality checks against the quota of NW Slice quota
management functionality for additional instructions. Depending on the
business needs, it is expected that both centralized quota check and
distributed quota check may coexist in the network.
Table 7.1-1 illustrates 5GS system impacts for all solutions proposed for the
KI#1. Moreover, it also compares where to place the afore-mentioned network
slice quota functionalities in the 5G system.
Table 7.1-1: Key impacts of the solutions
| UE | RAN | 5GC CN Impact | Notes |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
| Impact | Impact | Existing NF (Note 8) | New NF or new service operation in existing NF |  |  |  |  |   
|  |  | NW Slice Quota Storage | NW Slice Quota management | NW Slice Quota Enforce | NW Slice Quota Storage | NW Slice Quota Management | NW Slice Quota Enforce |   
Sol#1 | Yes | No | UDR, PCF | PCF | PCF AMF(back-off timer handling) | - | - | - | (Note 1) (Note 5)  
Sol#2 | Yes | No | - | - | AMF | NSQ | NSQ | (Note 1) (Note 5) (Note 7) |   
Sol#3 | Yes | No | NSSF | NSSF | NSSF, AMF | - | - | - | (Note 1) (Note 5)  
Sol#4 | Yes | No | NWDAF | AMF, PCF (roaming case) | - | - | - | (Note 1) (Note 5) |   
Sol#8 | Yes | No | O&M, AMF | O&M, AMF | OAM AMF | - | - | - | (Note 1) (Note 2) (Note 5)  
Sol#9 | Yes | No | UDM, NWDAF | NWDAF, CHF | AMF | - | - | - | (Note 1) (Note 5)  
Sol#15 | Yes | No | - | - | AMF | - | - | - | (Note 3)  
Sol#18 | No | No | SQM(NSSF for global) AMF for local- | AMF NSSF | AMF | - | - | (Note 4) (Note 5) (Note 7) |   
Sol#19 | No | No | NWDAF | - | QCF | QCF QEF | (Note 4) (Note 6) (Note 7) |  |   
Sol#38 | No | No | CHF | CHF | AMF, CHF | - | - | - | (Note 5) (Note 9)  
NOTE 1: Solution requires a UE to support a (new/existing) rejection cause and a (new/existing) back-off timer due to the network slice quota has been reached. NOTE 2: Solution has an impact on O&M to support either a network slice quota monitoring and/or a network slice quota distribution (if any). Multi-vendor case is unclear on how it works. NOTE 3: Solution only addresses the aspect of back-off timer to be sent to the UE for network slice quota enforcement. NOTE 4: Solution does not describe whether the UE should be aware of a rejection cause due to a network slice quota has been reached. NOTE 5: Solution requires a change in both the H-PLMN and the V-PLMN to support a network slice quota monitoring and a network slice quota enforcement. NOTE 6: No descriptions of roaming aspect NOTE 7: Although the solution proposes a new NF, this new NF could also be deployed together with an existing NF. In such case, no new NF is needed. NOTE 8: Even when the existing NF is reused, the new NF service may need to be introduced. NOTE 9: Solution requires a AMF to support a (new/existing) rejection cause due to the network slice quota has been reached. |  |  |  |  |  |  |  |  |   
From Table 7.1-1 above, one can derive a commonality among those solutions as
following:
\- No solutions require changes in RAN.
\- All solutions propose to store an information related to the network slice
quota information in the CN and the UE is not aware of it.
\- All solutions propose to monitor the number of UEs accessing a network
slice in the CN and to enforce the quota in the CN. Difference among those
solutions are a) where to store the network slice quota information, b) where
to place the network slice quota management and the network slice quota
enforcement. There are two main approaches, one is to put them into an
existing 5GC network function or introducing a new network function/new
service operation to be deployed in the existing 5GC network function.
\- Almost all solutions imply some form of interaction by the AMF with another
function which performs the counting.
Furthermore, there are some other aspects that we could also draw some
remarks, for example,
\- Rejection cause + Back-off timer: When a network slice quota in terms of
number of UEs is overflown, a CN NF sends a rejection to the UE requesting for
a S-NSSAI. To suppress further signalling load for a subsequent request for
the same S-NSSAI, the CN NF may provide a back-off timer to the UE. The CN NF
responsible for sending a rejection for the requested S-NSSAI and optionally
the back-off timer for the rejected S-NSSAI is the AMF. It is up to the
Stage-3 to determine whether a new rejection cause and a back-off timer or an
existing rejection cause and a back-off timer should be used.
To be able to decide which NF in 5GC should have the network slice quota
management functionality and the network slice quota enforcement
functionality, evaluation of all candidate solutions (except Sol#15 as Sol#15
only focuses on back-off timer and rejection cause aspect) can be further
evaluated by taking some criteria into account as described in Table 7.1-2.
Table 7.1-2: Further solutions evaluation
+-----------------+-----------------+-----------------+-----------+ | | **Amount of |** Scalability | **Notes** | | | signalling**| and | | | | | complexity** | | +=================+=================+=================+===========+ | Sol#1 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, | quota check. | | | | because the | | | | | primary PCF and | Require | | | | the secondary | additional | | | | PCFs would have | configurations | | | | to coordinate | to support | | | | with each other | distributed | | | | for quota | quota check. | | | | distribution. | | | | | | | | | | For roaming, if | | | | | quota control | | | | | at the H-PLMN, | | | | | the V-AMF needs | | | | | to communicate | | | | | with H-PCF, and | | | | | hence, | | | | | additional | | | | | signalling. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#2 | There are | No descriptions | (NOTE 10) | | | additional | on how | | | | signalling, as | distributed | | | | the centralized | quota check is | | | | new NF checks | supported. | | | | the quota per | | | | | each UE | | | | | registration/ | | | | | de-registration | | | | | request. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#3 | The NSSF needs | No descriptions | (NOTE 10) | | | to check the | on how | | | | quota for each | distributed | | | | requested | quota check is | | | | S-NSSAI before | supported. | | | | determining the | | | | | Allowed NSSAI. | | | | | Existing | | | | | signalling | | | | | between AMF and | | | | | NSSF is reused | | | | | for quota | | | | | management at | | | | | the NSSF. No | | | | | additional | | | | | signalling is | | | | | added here, if | | | | | the NSSF is | | | | | deployed in the | | | | | network. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#4 | There are some | No descriptions | (NOTE 10) | | | additional | on how | | | | signalling, | distributed | (NOTE 11) | | | because the | quota check is | | | | NWDAF needs to | supported. But | | | | collect the | the NWDAF and | | | | number of UEs | the AMF can be | | | | from the AMF, | configured to | | | | as well as the | support | | | | NWDAF has to | distributed | | | | send an | quota check as | | | | indication to | well, e.g. the | | | | the subscribed | NWDAF may act | | | | AMF about the | as a central | | | | event that the | network entity | | | | network slice | managing the | | | | quota is | global quota, | | | | consumed, so | and it may | | | | that the AMF | provide to the | | | | can reject the | AMF a threshold | | | | requested | information for | | | | S-NSSAI | a number of UEs | | | | accordingly. | indicating that | | | | However, the | the AMF should | | | | additional | notify the | | | | signalling is | NWDAF if | | | | not on a per UE | current number | | | | Registration | of UEs being | | | | /Deregistration | served by the | | | | Request, but | network slice | | | | the NWDAF may | has reached the | | | | set a threshold | threshold. In | | | | of the number | such case, the | | | | of UEs for the | NWDAF may | | | | AMF to report. | recalculate | | | | Also, the AMF | whether the | | | | does not need | threshold for | | | | to ask the | the other AMF | | | | NWDAF every | serving the | | | | time, when the | same network | | | | AMF receives a | slice should be | | | | UE Registration | updated or | | | | request with | reduced, so | | | | the Requested | that the AMF | | | | NSSAI. The AMF | that notifies | | | | can subscribe | the NWDAF | | | | to the NWDAF | earlier could | | | | for the event | be set with a | | | | notification | higher | | | | when the quota | threshold. In | | | | is consumed. | this way, this | | | | | AMF is kind of | | | | | given with a | | | | | higher local | | | | | quota. | | | | | | | | | | Alternatively, | | | | | there may be | | | | | distributed | | | | | NWDAF instances | | | | | in the network | | | | | and one of this | | | | | may act as a | | | | | primary NWDAF | | | | | and other | | | | | NWDAFs as a | | | | | secondary | | | | | NWDAF. The | | | | | primary NWDAF | | | | | and the | | | | | secondary | | | | | NWDAFs need to | | | | | coordinate for | | | | | splitting and | | | | | distributing | | | | | the global | | | | | quota in | | | | | multiple local | | | | | quotas. | | +-----------------+-----------------+-----------------+-----------+ | Sol#8 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling | quota check. | | | | exchanged | | | | | between O&M and | Require | | | | AMF. But within | additional | | | | the 5GC NFs, | configurations | | | | there are no | to support | | | | additional | distributed | | | | signalling. | quota check, | | | | | i.e. O&M has to | | | | | configure quota | | | | | for each AMF | | | | | set. | | +-----------------+-----------------+-----------------+-----------+ | Sol#9 | Same as Sol#4 | Same as Sol#4 | (NOTE 10) | | | | | | | | | | (NOTE 11) | +-----------------+-----------------+-----------------+-----------+ | Sol#18 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, | quota check. | | | | because the SQM | | | | | (may be | Require | | | | co-located with | additional | | | | NSSF) and the | configurations | | | | AMF has to | to support | | | | coordinate with | distributed | | | | each other on | quota check. | | | | requesting for | | | | | quota or for | | | | | updating the | | | | | quota. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#19 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, as | quota check. | | | | the QCF (may be | | | | | co-located with | Require | | | | existing NF) | additional | | | | would need to | configurations | | | | collect data of | to support | | | | current number | distributed | | | | of UEs/PDU | quota check. | | | | Sessions from | | | | | the NWDAF and | | | | | the | | | | | coordination | | | | | between the QCF | | | | | and QEF. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#38 | Whenever the | No descriptions | (NOTE 10) | | | AMF receives a | on how | | | | Registration | distributed | (NOTE 11) | | | Request or a | quota check is | | | | De-registration | supported. | | | | Request, the | | | | | CHF needs to be | | | | | involved to | | | | | keep tracking | | | | | the usage of | | | | | the network | | | | | slice quota. | | | | | Existing | | | | | signalling | | | | | between AMF and | | | | | CHF is enhanced | | | | | for quota | | | | | management at | | | | | the CHF. No | | | | | additional | | | | | signalling is | | | | | added here. | | | +-----------------+-----------------+-----------------+-----------+ | NOTE 10: The NF | | | | | entity or NF | | | | | entities | | | | | responsible for | | | | | network slice | | | | | quota | | | | | management | | | | | functionality | | | | | and for network | | | | | slice quota | | | | | management | | | | | enforcement | | | | | is/are | | | | | mandatory to be | | | | | deployed to | | | | | support the | | | | | feature of | | | | | network slice | | | | | quota | | | | | management. | | | | | | | | | | NOTE 11: | | | | | Although the | | | | | solution does | | | | | not describe | | | | | how to support | | | | | the distributed | | | | | quota check, | | | | | but the | | | | | solution could | | | | | be possibly | | | | | enhanced to | | | | | support the | | | | | distributed | | | | | quota check. | | | | +-----------------+-----------------+-----------------+-----------+
## 7.2 Evaluation on solutions of KI#2
From all 13 solutions proposed for KI#2 (Solution #5, #6, #7, #8, #9, #10,
#11, #18, #19, #32, #35, #36, #38), some may have a complete solution and some
not. It is noted that Sol#35 describes a solution for KI#2 on a different
aspect, i.e. considering a service type associated with the PDU Session to be
established and use it for differentiation of service(s) and even for
prioritization of granting a PDU Session when the status of slice is close to
the quota limitation. Since Sol#35 could be put on top of any other solutions,
Sol#35 is then not listed for comparison below.
Looking at all these solutions for KI#2, we can summarize that there are three
main functionalities for supporting quota management on the maximum number of
PDU Sessions as described below.
\- **NW Slice quota information storage functionality:** This functionality is
responsible for storing a NW Slice quota information, which includes one or
more of the following information:
\- The maximum number of PDU Sessions for the S-NSSAI.
\- **NW Slice quota management functionality:** This functionality is
responsible for managing and updating NW Slice quotas of the maximum number of
PDU Sessions in a S-NSSAI, which includes one or more of the following
functionalities:
\- Monitoring for counting, collecting and updating the number of PDU Sessions
that have been established in a S-NSSAI that is subject to the network slice
quota management.
\- **NW Slice quota enforcement functionality:** This functionality is
responsible for enforcing a network slice SLA, which consists one or more of
the following functionalities:
\- Accept or reject the PDU Session Establishment Request for the S-NSSAI by
taking into account the network slice quota and the current monitored number
of established PDU sessions.
\- In case of rejection, the function may provide a rejection cause and a
back-off timer.
Centralized Quota check vs Distributed Quota Check: In a centralized quota
check, the NW Slice quota enforcement functionality checks every new PDU
Session request against the global S-NSSAI quota at one centralized quota
enforcement point. In a distributed quota check, the local quota that is a
subset of global S-NSSAI quota is distributed to one or more NW Slice quota
enforcement functionalities and where every new PDU Session request is checked
against local quota of one or more distributed quota enforcement points. Only
when the Local quota is reached then the NW Slice quota enforcement
functionality checks against the global quota for additional instructions.
Depending on the business needs, it is expected that both centralized quota
check and distributed quota check may coexist in the network.
Table 7.2-1 below shows an overview of key impacts of all solutions and in
particular where the above functions are placed in the 5G system.
Table 7.2-1: Key impacts of the solutions
| UE | RAN | 5GC CN Impact | Notes |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
| Impact | Impact | Existing NF (Note 8) | New NF or new service operation in existing NF |  |  |  |  |   
|  |  | Information Storage | Quota Management | Quota Enforce | Information Storage | Quota Management | Quota Enforce |   
Sol#5 | Yes | No | NWDAF | SMF, PCF (roaming case) | - | - | - | (Note 1) (Note 5) |   
Sol#6 | Yes | No | UDR, PCF | PCF | PCF, SMF | - | - | - | (Note 1) (Note 5)  
Sol#7 | Yes | No | UDR, PCF | PCF | PCF, SMF(back-off timer handling) | - | - | - | (Note 1) (Note 5)  
Sol#8 | Yes | No | O&M, AMF | O&M, AMF | O&M AMF | - | - | - | (Note 1) (Note 2) (Note 5)  
Sol#9 | Yes | No | UDM, NWDAF | NWDAF, CHF | AMF | - | - | - | (Note 1) (Note 5)  
Sol#10 | Yes | No | - | - | SMF | NSQ | - | (Note 1) (Note 5) (Note 7) |   
Sol#11 | Yes | No | NRF | NRF | AMF | - | - | - | (Note 1) (Note 5)  
Sol#18 | No | No | SQM(NSSF), AMF | SQM(NSSF), AMF | AMF |  | - | (Note 4) (Note 5) (Note 7) |   
Sol#19 | No | No | NWDAF | - | QCF | QCF QEF | (Note 4) (Note 6) (Note 7) |  |   
Sol#32 | No | No | SMF | NF | NF | (Note 4) (Note 6) |  |  |   
Sol#38 | No |  | CHF | CHF | SMF, CHF | - | - | - | (Note 5) (Note 9)  
NOTE 1: Solution requires a UE to support a (new/existing) rejection cause and a (new/existing) back-off timer due to the network slice quota has been reached. NOTE 2: Solution has an impact on O&M to support either a network slice quota monitoring and/or a network slice quota distribution NOTE 3: Solution only addresses the aspect of back-off timer to be sent to the UE for network slice quota enforcement. NOTE 4: Solution does not describe whether the UE should be aware of a rejection cause due to a network slice quota has been reached. NOTE 5: Solution requires a change in both the H-PLMN and the V-PLMN to support a network slice quota management and a network slice quota enforcement. NOTE 6: No descriptions of roaming aspect. NOTE 7: Although the solution proposes a new NF, this new NF could be deployed together with existing NF. In such case, no new NF is needed. NOTE 8: Even when the existing NF is reused, the new NF service may need to be introduced. NOTE 9: Solution requires a SMF to support a (new/existing) rejection cause due to the network slice quota has been reached. |  |  |  |  |  |  |  |  |   
From Table 7.2-1 above, one can derive a commonality among those solutions as
following:
\- No solutions require changes in RAN.
\- All solutions propose to store an information related to the network slice
quota information in the CN and the UE is not aware of it.
\- All solutions propose to monitor the number of PDU Sessions associated with
a network slice in the CN and to enforce the quota in the CN. Difference among
those solutions are a) where to store the network slice quota information, b)
where to place the network slice quota management and the network slice quota
enforcement. There are two main approaches, one is to put them into an
existing 5GC network function or introducing a new network function/new
service operation to be deployed in the existing 5GC network function.
\- Almost all solutions imply some form of interaction of the SMF or AMF with
another function which performs the counting.
Furthermore, there are some other aspects that we could also draw some
remarks, for example,
\- Rejection cause / Back-off timer: When a network slice quota in terms of
number of PDU Sessions is reached, and a CN NF sends a rejection to the UE\'s
PDU Session Establishment Request for the network slice. To suppress further
signalling load for a subsequent request of the network slice, the CN NF may
provide a back-off timer to the UE. It is up to the Stage-3 to determine
whether a new rejection cause and a back-off timer or an existing rejection
cause and a back-off timer should be used.
To be able to decide which NF in 5GC should have the network slice quota
management functionality and the network slice quota enforcement
functionality, evaluation of all candidate solutions can be further evaluated
by taking some criteria into account as described in Table 7.2-2.
Table 7.2-2: Solutions comparison
+-----------------+-----------------+-----------------+-----------+ | | **Amount of |** Scalability | **Notes** | | | signalling**| and | | | | | complexity** | | +=================+=================+=================+===========+ | Sol#5 | There are some | No descriptions | (NOTE 10) | | | additional | on how | | | | signalling, | distributed | (NOTE 11) | | | because the | quota check is | | | | NWDAF needs to | supported. | | | | collect the | | | | | number of PDU | But the NWDAF | | | | Sessions from | and the SMF can | | | | the SMF, as | be configured | | | | well as the | to support | | | | NWDAF has to | distributed | | | | send an | quota check as | | | | indication to | well, e.g. the | | | | the subscribed | NWDAF may act | | | | SMF about the | as a central | | | | event that the | network entity | | | | network slice | managing the | | | | quota is | global quota, | | | | consumed, so | and it may | | | | that the SMF | provide to the | | | | can reject the | SMF a threshold | | | | requested | information for | | | | S-NSSAI | a number of PDU | | | | accordingly. | Sessions | | | | However, the | indicating that | | | | additional | the SMF should | | | | signalling is | notify the | | | | not on a per UE | NWDAF if | | | | Registration | current number | | | | /Deregistration | of PDU Sessions | | | | Request, but | being served by | | | | the NWDAF may | the network | | | | set a threshold | slice has | | | | of the number | reached the | | | | of PDU Sessions | threshold. In | | | | for the SMF to | such case, the | | | | report. Also, | NWDAF may | | | | the SMF does | recalculate | | | | not need to ask | whether the | | | | the NWDAF every | threshold for | | | | time, when the | the other SMF | | | | SMF receives a | serving the | | | | UE PDU Session | same network | | | | Establishment | slice should be | | | | request. The | updated or | | | | SMF can | reduced, so | | | | subscribe to | that the SMF | | | | the NWDAF for | that notifies | | | | the event | the NWDAF | | | | notification | earlier could | | | | when the quota | be set with a | | | | is consumed. | higher | | | | | threshold. In | | | | | this way, this | | | | | SMF is kind of | | | | | given with a | | | | | higher local | | | | | quota. | | | | | | | | | | Alternatively, | | | | | there may be | | | | | distributed | | | | | NWDAF instances | | | | | in the network | | | | | and one of this | | | | | may act as a | | | | | primary NWDAF | | | | | and other | | | | | NWDAFs as a | | | | | secondary | | | | | NWDAF. The | | | | | primary NWDAF | | | | | and the | | | | | secondary | | | | | NWDAFs need to | | | | | coordinate for | | | | | splitting and | | | | | distributing | | | | | the global | | | | | quota in | | | | | multiple local | | | | | quotas. | | +-----------------+-----------------+-----------------+-----------+ | Sol#6 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, | quota check. | | | | because the | | | | | primary PCF and | Require | | | | the secondary | additional | | | | PCFs would have | configurations | | | | to coordinate | to support | | | | with each other | distributed | | | | for quota | quota check. | | | | (re | | | | | -)distribution. | | | | | | | | | | For roaming, if | | | | | quota control | | | | | at the H-PLMN, | | | | | the V-PCF needs | | | | | to communicate | | | | | with H-PCF by | | | | | using a new | | | | | signalling for | | | | | quota | | | | | management | | | | | across PLMNs. | | | | | Hence, there is | | | | | an additional | | | | | signalling. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#7 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, | quota check. | | | | because the | | | | | primary PCF and | Require | | | | the secondary | additional | | | | PCFs would have | configurations | | | | to coordinate | to support | | | | with each other | distributed | | | | for quota | quota check. | | | | (re | | | | | -)distribution. | | | | | | | | | | For roaming, if | | | | | quota control | | | | | at the H-PLMN, | | | | | the V-PCF needs | | | | | to communicate | | | | | with H-PCF by | | | | | using an | | | | | existing | | | | | signalling for | | | | | quota | | | | | management | | | | | across PLMNs. | | | | | Hence, there is | | | | | no additional | | | | | signalling. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#8 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling | quota check. | | | | exchanged | | | | | between O&M and | Require | | | | AMF. But within | additional | | | | the 5GC NFs, | configurations | | | | there are no | to support | | | | additional | distributed | | | | signalling. | quota check, | | | | | i.e. O&M has to | | | | | configure quota | | | | | for each AMF | | | | | set. | | +-----------------+-----------------+-----------------+-----------+ | Sol#9 | Same as Sol#4 | Same as Sol#4 | (NOTE 10) | | | | | | | | | | (NOTE 11) | +-----------------+-----------------+-----------------+-----------+ | Sol#10 | There are | No descriptions | (NOTE 10) | | | additional | on how | | | | signalling, as | distributed | | | | the centralized | quota check is | | | | new NF checks | supported. | | | | the quota per | | | | | each PDU | | | | | Session | | | | | Establ | | | | | ishment/Release | | | | | request. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#11 | There are some | No descriptions | (NOTE 10) | | | additional | on how | | | | signalling, | distributed | | | | because the NRF | quota check is | | | | needs to | supported. | | | | collect the | | | | | number of PDU | | | | | Sessions from | | | | | each SMF | | | | | serving the | | | | | same S-NSSAI. | | | | | Moreover, the | | | | | NRF also needs | | | | | to provide the | | | | | slice status | | | | | information to | | | | | the AMF, so | | | | | that the AMF | | | | | can determine | | | | | whether to | | | | | accept or | | | | | reject the PDU | | | | | Session | | | | | Establishment | | | | | request for the | | | | | S-NSSAI. | | | | | | | | | | For roaming, | | | | | there are also | | | | | additional | | | | | signalling | | | | | between the | | | | | H-NRF and the | | | | | V-NRF to | | | | | reporting about | | | | | the slice | | | | | status | | | | | information | | | | | across PLMNs. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#18 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, | quota check. | | | | because the SQM | | | | | (may be | Require | | | | co-located with | additional | | | | NSSF) and the | configurations | | | | AMF has to | to support | | | | coordinate with | distributed | | | | each other on | quota check. | | | | requesting for | | | | | quota or for | | | | | updating the | | | | | quota. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#19 | There are some | Support | (NOTE 10) | | | additional | distributed | | | | signalling, as | quota check. | | | | the QCF (may be | | | | | co-located with | Require | | | | existing NF) | additional | | | | would need to | configurations | | | | collect data of | to support | | | | current number | distributed | | | | of PDU Sessions | quota check. | | | | from the NWDAF | | | | | and the | | | | | coordination | | | | | between the QCF | | | | | and QEF. | | | +-----------------+-----------------+-----------------+-----------+ | Sol#38 | Whenever the | No descriptions | (NOTE 10) | | | SMF receives a | on how | | | | PDU Session | distributed | (NOTE 11) | | | Establ | quota check is | | | | ishment/Release | supported. | | | | Request, the | | | | | CHF needs to be | | | | | involved to | | | | | keep tracking | | | | | the usage of | | | | | the network | | | | | slice quota. | | | | | Existing | | | | | signalling | | | | | between SMF and | | | | | CHF is enhanced | | | | | for quota | | | | | management at | | | | | the CHF. No | | | | | additional | | | | | signalling is | | | | | added here. | | | +-----------------+-----------------+-----------------+-----------+ | NOTE 10: The NF | | | | | entity or NF | | | | | entities | | | | | responsible for | | | | | network slice | | | | | quota | | | | | management | | | | | functionality | | | | | and for network | | | | | slice quota | | | | | management | | | | | enforcement | | | | | is/are | | | | | mandatory to be | | | | | deployed to | | | | | support the | | | | | feature of | | | | | network slice | | | | | quota | | | | | management. | | | | | | | | | | NOTE 11: | | | | | Although the | | | | | solution does | | | | | not describe | | | | | how to support | | | | | the distributed | | | | | quota check, | | | | | but the | | | | | solution could | | | | | be possibly | | | | | enhanced to | | | | | support the | | | | | distributed | | | | | quota check. | | | | +-----------------+-----------------+-----------------+-----------+
## 7.3 Evaluation on solutions of KI#3
Solutions can be categorized as follows:
\- Category A1: Those enforcing the Slice-MBR in the UPF, in CN i.e. solution
#13.
\- Category A2: Enforcing SMBR in the RAN and also admitting GFBR aggregate
for the slice only up to the SMBR at the admission control time in the RAN,
i.e. solution #22,
\- Category B: Those ensuring that the Slice-MBR limits the aggregated MBR and
GBR for QoS flows of established PDU sessions and related QoS flows, i.e.
solution #20, #21 and #37. Enforcement is done using the existing QoS
parameter.
Category A solutions:
\- Accuracy: The enforcing of the Slice-MBR in the user plane, i.e. solution
#13 in UE and UPF and solution #22 in NG-RAN and the UE, provides an accurate
mechanism to ensure that the aggregated MBR and GBR of those QoS flows in UE
PDU sessions to a slice is not exceeded.
\- Impacts on NF: Solution #13 impacts the UE (optional) and the UPF, only UPF
supporting this feature can be selected for a PDU session.
Solution #22 impacts NG-RAN (admission control) and UL/DL rate enforcement.
Category B solutions:
\- Accuracy: The enforcement of the existing QoS parameters ensuring that the
aggregated GBR and MBR for the QoS flows with a slice does not exceed the
Slice-MBR assumes that all PDU sessions are active and QoS flows run traffic,
and this may not be the case. Then, to resolve and mitigate this, these
solutions take both, the indication of inactive PDU sessions, a to reach a
higher level of accuracy at the cost of a much higher level of signalling.
However, the accuracy of Category B solutions is still lower than Category A
solutions as Category B solutions cannot be aware of the real bit rate of the
PDU Sessions within the slice even with such mechanism.
NOTE: Solution#20 and solution#37 indicates that the inactivity in the UP can
be used to know if a PDU session is active or not. This can be very demanding
in terms of signalling or it is very imprecise and can lead also to exceeding
the target rate unless the inactive PDU sessions are totally throttled back,
which also means their performance would be hampered.
\- Impacts on NFs; Solution #20 (method 1) impacts PCF only, (method 2)
impacts UDR as well, solution #21 defines a new NF.
\- Support for roaming: Solution #20 and #37 checks the Slice-MBR at the
H-PCF. Solution #21 checks the Slice-MBR at the NSQ serving the H-SMF.
Based on the above, solutions under category A provides higher accuracy at the
cost of impacting all NG-RAN nodes or a selected number of UPFs, while
category B solutions provides less accuracy, that is compensated based the
indication of active PDU sessions at the cost of much higher signalling and
lower performance for throttled back sessions and estimations on the number of
PDU sessions per UE. The impacts are limited to one control node PCF or NSQ,
the number of PCFs or NSQs is less than the number of UPFs or NG-RAN nodes in
the network.
Other aspects:
\- Category B solutions impact the Subscribed Session MBR of PDU sessions so
it will not allow to set a Session MBR that can be respected at all times.
\- The S-MBR value is assigned per subscriber category or per internal group
Id in the UDR. The NF, e.g. UDM or PCF is able to retrieve such value by
revoking the service of UDR.
\- Reporting that the SMBR is reached to the AF is proposed by solution #43,
it is not explained why the AF needs to be notified, since the AF is defined
on application level, and the SMBR is not application related parameters.
Impact on NF Discovery and selection:
\- Solution #22 has no impact on the current NF discovery and selection.
\- Solution #21 needs new NF discovery and selection mechanism on NSQ.
\- Solution #13, #20 (method 1) and #37 does not impact the NF discovery and
selection functionality but requires having the same NF selected for all the
PDU Sessions within a slice. Solution#20 (method 2) has no impact on the
current PCF discovery and selection and does not require to select the same
PCF for all PDU sessions in the slice either.
## 7.4 Evaluation on solutions of KI#4
High level aspects of the solutions:
\- Solution 8, 9, 18, 23, 33 and 43 depend on the conclusion of KI#1, KI#2 or
KI#3 or KI#5.
\- Sol#8 uses O&M as a centralized entity. However, the solution do not
specify the interaction between AMF and O&M and interaction between O&M and
AF. **It is unclear how could AF get the event notification and hence, it**
does not fulfil the requirements of KI#4**.** Also, it is not practically easy
to use Sol#8 in roaming and multi-vendor environments.
\- Sol#9 uses NWDAF as a centralized NF. The NWDAF manages event
subscription/notification for network slice quota from the AF, and sends an
event notification to the AF based on the data collected from AMFs and
optionally UDMs.
\- Sol#18, Sol#23, Sol#33 and Sol#34 uses a NF hosting/providing the quota
management functionality. Solutions describes the Event notification
functionality supported by the quota management NF. Solutions have been open-
ended on the location of the new functionalities, i.e. indicated that the new
functionality can be supported by a new NF or it can be co-located within the
existing 5GC NF.
\- In Solution 34 there are multiple Slice PCFs and BSF is used for Slice PCF
discovery and selection. The Slice PCF supports per S-NSSAI event
subscription/notification. The solution describe the Slice PCF discovery via
BSF in a scenario where there is a dedicated (or logically separated) slice
PCF for each S-NSSAI to handle the overall per S-NSSAI slice quota management
when multiple S-NSSAIs are subject to quota management.
\- Solution 43 proposes the NEF or PCF subscribes the UE SMBR reached event
from AMF and the AMF notifies the PCF or NEF. It is unclear why this
notification is needed because if the UE SMBR is reached the RAN will reject
the establishment of GBR QoS flow and the PCF/AF will get notified anyway.
Sol#43 has RAN impact.
## 7.5 Evaluation on solutions of KI#5
From all 8 solutions proposed for KI#5 (Solution #12, #14, #16, #18, #19, #20,
#24, #25), some may have a complete solution and some not. But overall, we can
summarize that there are three main functionalities for supporting limitation
of data rate per network slice in UL and DL as described below.
\- **NW Slice max. data rate Storage functionality:** This functionality is
responsible for storing a NW Slice maximum data rate quota information.
\- **NW Slice Quota Control functionality:** This functionality is responsible
to check that the aggregated data rate for the S-NSSAI in UL/DL complies with
the maximum rate for the S-NSSAI in the UL/DL.
\- **NW Slice Quota Enforcement functionality:** This functionality is
responsible to ensure that the data rate per slice is not exceeded. If
exceeded actions are taken to a) redistribute the data rates, or b) reject new
PDU session establishments or new UE registration or some other action such as
report to OAM to log the event.
Editor\'s note: It is FFS for NW Slice Quota Enforcement functionality whether
option a) or option b) or both options should be supported.
Table 7.5-1 illustrates 5GS system impacts for all solutions proposed for the
KI#5. Moreover, it also compares where to place the afore-mentioned network
slice quota functionalities in the 5G system.
Table 7.5-1: Key impacts of the solutions
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | UE | RAN | Notes | | | | | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | | I | I | NW | NW | NW | A | A | D | | | mpact | mpact | Slice | Slice | Slice | mount | mount | escri | | | | | max. | Quota | Quota | of | of | ption | | | | | data | co | E | signa | signa | | | | | | rate | ntrol | nforc | lling | lling | | | | | | St | | ement | for | for | | | | | | orage | | | e | adjus | | | | | | | | | nforc | tment | | | | | | | | | ement | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | No | NSQ | NSQ | N/A | The | If | For | | _Sol\ | | | | | | c | the | each | | #12_ _| | | | | | entra | Ne | PDU | | | | | | | | lized | twork | se | | | | | | | | new | Slice | ssion | | | | | | | | NF | max | SMF | | | | | | | | c | data | pro | | | | | | | | hecks | rate | vides | | | | | | | | the | is | to | | | | | | | | quota | re | NSQ | | | | | | | | per | ached | the | | | | | | | | each | the | autho | | | | | | | | PDU | NSQ | rized | | | | | | | | ses | con | Se | | | | | | | | sion. | tacts | ssion | | | | | | | | Addit | all | -AMBR | | | | | | | | ional | (or a | and | | | | | | | | signa | su | MFBR | | | | | | | | lling | bset) | for | | | | | | | | to | of | each | | | | | | | | PDU | SMFs | GBFR | | | | | | | | se | in | flow. | | | | | | | | ssion | the | If | | | | | | | | esta | slice | any | | | | | | | | blish | to | upd | | | | | | | | ment, | u | ates, | | | | | | | | and | pdate | the | | | | | | | | mo | Se | SMF | | | | | | | | dific | ssion | up | | | | | | | | ation | -AMBR | dates | | | | | | | | or | or | the | | | | | | | | when | MFBR | NSQ. | | | | | | | | a new | for | | | | | | | | | QoS | GFBR | | | | | | | | | is | data | | | | | | | | | estab | f | | | | | | | | | lishm | lows. | | | | | | | | | ent/u | | | | | | | | | | pdate | | | | | | | | | | d/rel | | | | | | | | | | ease. | | | | | | | | | | | | | | | | | | | | Addit | | | | | | | | | | ional | | | | | | | | | | signa | | | | | | | | | | lling | | | | | | | | | | to | | | | | | | | | | u | | | | | | | | | | pdate | | | | | | | | | | PDU | | | | | | | | | | se | | | | | | | | | | ssion | | | | | | | | | | bit | | | | | | | | | | r | | | | | | | | | | ates. | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | Yes | Yes | PCF | PCF/ | RAN | - | When | PCF | |_ Sol\ | | | | NWDAF | | | the | de | | #14**| | | | | | | n | cides | | | | | | | | | umber | the | |**(de | | | | | | | of UE | UE- | | pends | | | | | | | ch | Slice | | on | | | | | | | anges | -AMBR | | KI\ | | | | | | | and | based | | #3)**| | | | | | | new | on | | | | | | | | | anal | NWDAF | | | | | | | | | ytics | anal | | | | | | | | | comes | ytics | | | | | | | | | from | on | | | | | | | | | N | ne | | | | | | | | | WDAF, | twork | | | | | | | | | PCF | slice | | | | | | | | | a | data | | | | | | | | | djust | rate. | | | | | | | | | UE- | | | | | | | | | | Slice | PCF | | | | | | | | | -AMBR | pro | | | | | | | | | for | vides | | | | | | | | | each | the | | | | | | | | | UE. | UE- | | | | | | | | | | Slice | | | | | | | | | | -AMBR | | | | | | | | | | to | | | | | | | | | | AMF. | | | | | | | | | | The | | | | | | | | | | AMF | | | | | | | | | | pro | | | | | | | | | | vides | | | | | | | | | | the | | | | | | | | | | UE- | | | | | | | | | | Slice | | | | | | | | | | -AMBR | | | | | | | | | | to | | | | | | | | | | RAN. | | | | | | | | | | RAN | | | | | | | | | | con | | | | | | | | | | trols | | | | | | | | | | the | | | | | | | | | | UE-S | | | | | | | | | | lice- | | | | | | | | | | AMBR. | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | No | PCF | PCF | UPF | - | The | The | | *Sol\ | | | | | | | per | UPFs | | #16** | | | | | | | iodic | get | | | | | | | | | repo | q | | | | | | | | | rting | uotas | | | | | | | | | pro | of | | | | | | | | | posed | UL/DL | | | | | | | | | by | bi | | | | | | | | | UP | trate | | | | | | | | | F/SMF | al | | | | | | | | | to | lowed | | | | | | | | | PCF | to | | | | | | | | | helps | tra | | | | | | | | | dy | nsfer | | | | | | | | | namic | and | | | | | | | | | adjus | en | | | | | | | | | tment | force | | | | | | | | | of | them | | | | | | | | | local | to | | | | | | | | | quota | meet | | | | | | | | | a | the | | | | | | | | | lloca | limit | | | | | | | | | tion. | ation | | | | | | | | | It | of | | | | | | | | | can | the | | | | | | | | | inc | s | | | | | | | | | rease | lice. | | | | | | | | | the | The | | | | | | | | | a | PCF | | | | | | | | | mount | of | | | | | | | | | of | the | | | | | | | | | signa | slice | | | | | | | | | lling | (i.e. | | | | | | | | | be | Slice | | | | | | | | | tween | PCF) | | | | | | | | | the | col | | | | | | | | | PCF | lects | | | | | | | | | and | the | | | | | | | | | SMF. | a | | | | | | | | | | ctual | | | | | | | | | | bi | | | | | | | | | | trate | | | | | | | | | | in N6 | | | | | | | | | | inte | | | | | | | | | | rface | | | | | | | | | | per | | | | | | | | | | S- | | | | | | | | | | NSSAI | | | | | | | | | | from | | | | | | | | | | the | | | | | | | | | | UPFs | | | | | | | | | | and | | | | | | | | | | pe | | | | | | | | | | riodi | | | | | | | | | | cally | | | | | | | | | | ad | | | | | | | | | | justs | | | | | | | | | | the | | | | | | | | | | bi | | | | | | | | | | trate | | | | | | | | | | quota | | | | | | | | | | alloc | | | | | | | | | | ation | | | | | | | | | | acco | | | | | | | | | | rding | | | | | | | | | | to | | | | | | | | | | the | | | | | | | | | | l | | | | | | | | | | atest | | | | | | | | | | se | | | | | | | | | | rvice | | | | | | | | | | di | | | | | | | | | | strib | | | | | | | | | | ution | | | | | | | | | | w | | | | | | | | | | ithin | | | | | | | | | | the | | | | | | | | | | s | | | | | | | | | | lice. | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | No | SQM | SQM/ | AMF | When | . | The | | _Sol\ | | | | AMF | | SQM | | SQM | | #18_ _| | | | | | s | When | allo | | | | | | | | tanda | the | cates | |__(d | | | | | | lone, | local | a | | epend | | | | | | addit | quota | quota | | on | | | | | | ional | is | per | | KI\ | | | | | | signa | re | Slice | | #3)__| | | | | | lling | ached | and | | | | | | | | for | the | pro | | | | | | | | each | AMF | vides | | | | | | | | UE | not | it to | | | | | | | | re | ifies | AMF. | | | | | | | | gistr | the | | | | | | | | | ation | SQM | The | | | | | | | | to | for | AMF | | | | | | | | pr | fu | sums | | | | | | | | ovide | rther | the | | | | | | | | a | quota | Slic | | | | | | | | quota | or | e-MBR | | | | | | | | per | other | of | | | | | | | | Slice | ac | all | | | | | | | | if | tions | UEs | | | | | | | | not | | in | | | | | | | | avail | | Conn | | | | | | | | able. | | ected | | | | | | | | | | mode | | | | | | | | | | which | | | | | | | | | | have | | | | | | | | | | e | | | | | | | | | | stabl | | | | | | | | | | ished | | | | | | | | | | PDU | | | | | | | | | | Se | | | | | | | | | | ssion | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | ne | | | | | | | | | | twork | | | | | | | | | | slice | | | | | | | | | | and | | | | | | | | | | en | | | | | | | | | | sures | | | | | | | | | | the | | | | | | | | | | total | | | | | | | | | | data | | | | | | | | | | rate | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | e | | | | | | | | | | xceed | | | | | | | | | | the | | | | | | | | | | al | | | | | | | | | | lowed | | | | | | | | | | value | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | quota | | | | | | | | | | for | | | | | | | | | | the | | | | | | | | | | ne | | | | | | | | | | twork | | | | | | | | | | s | | | | | | | | | | lice. | | | | | | | | | | | | | | | | | | | | SQM | | | | | | | | | | is | | | | | | | | | | e | | | | | | | | | | ither | | | | | | | | | | stand | | | | | | | | | | alone | | | | | | | | | | or a | | | | | | | | | | fun | | | | | | | | | | ction | | | | | | | | | | ality | | | | | | | | | | of | | | | | | | | | | PCF, | | | | | | | | | | NSSF, | | | | | | | | | | NRF, | | | | | | | | | | N | | | | | | | | | | WDAF, | | | | | | | | | | OAM, | | | | | | | | | | CHF. | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | N/A | QCF | QEF | N/A | - | The | QCF | |_ Sol\ | | | | | | | QCF | deter | | #19**| | | | | | | may | mines | | | | | | | | | ini | the | | | | | | | | | tiate | local | | | | | | | | | adjus | slice | | | | | | | | | tment | quota | | | | | | | | | of | based | | | | | | | | | quota | on | | | | | | | | | di | the | | | | | | | | | strib | anal | | | | | | | | | ution | ytics | | | | | | | | | among | from | | | | | | | | | the | N | | | | | | | | | QEFs | WDAF. | | | | | | | | | when | The | | | | | | | | | the | QEF | | | | | | | | | NDWAF | enf | | | | | | | | | not | orces | | | | | | | | | ifies | the | | | | | | | | | new | ne | | | | | | | | | analy | twork | | | | | | | | | tics. | slice | | | | | | | | | | local | | | | | | | | | | q | | | | | | | | | | uota. | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | No | PCF | PCF | N/A | - | Addit | The | | *Sol\ | | | | | | | ional | PCF | | #20** | | | | | | | signa | (per | | | | | | | | | lling | s | | | | | | | | | to | lice) | | | | | | | | | u | aggre | | | | | | | | | pdate | gates | | | | | | | | | PDU | the | | | | | | | | | se | Se | | | | | | | | | ssion | ssion | | | | | | | | | bit | -AMBR | | | | | | | | | r | and | | | | | | | | | ates. | MBR | | | | | | | | | | per | | | | | | | | | | PCC | | | | | | | | | | Rule | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | slice | | | | | | | | | | and | | | | | | | | | | check | | | | | | | | | | if | | | | | | | | | | the | | | | | | | | | | quota | | | | | | | | | | is | | | | | | | | | | rea | | | | | | | | | | ched. | | | | | | | | | | | | | | | | | | | | When | | | | | | | | | | the | | | | | | | | | | quota | | | | | | | | | | is | | | | | | | | | | re | | | | | | | | | | ached | | | | | | | | | | the | | | | | | | | | | PCF | | | | | | | | | | (per | | | | | | | | | | s | | | | | | | | | | lice) | | | | | | | | | | de | | | | | | | | | | cides | | | | | | | | | | if a | | | | | | | | | | new | | | | | | | | | | PDU | | | | | | | | | | se | | | | | | | | | | ssion | | | | | | | | | | is | | | | | | | | | | e | | | | | | | | | | stabl | | | | | | | | | | ished | | | | | | | | | | or if | | | | | | | | | | other | | | | | | | | | | PDU | | | | | | | | | | se | | | | | | | | | | ssion | | | | | | | | | | needs | | | | | | | | | | recon | | | | | | | | | | figur | | | | | | | | | | ation | | | | | | | | | | based | | | | | | | | | | on | | | | | | | | | | int | | | | | | | | | | ernal | | | | | | | | | | poli | | | | | | | | | | cies. | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | No | No | NSQ | NSQ | N/A | - | User | Si | | _Sol\ | | | | | | | plane | milar | | #24_ _| | | | | | | adjus | as | | | | | | | | | tment | sol | | | | | | | | | is | ution | | | | | | | | | init | #12 | | | | | | | | | iated | | | | | | | | | | by | | | | | | | | | | SMF | | | | | | | | | | with | | | | | | | | | | re | | | | | | | | | | duced | | | | | | | | | | Se | | | | | | | | | | ssion | | | | | | | | | | -AMBR | | | | | | | | | | /MFBR | | | | | | | | | | v | | | | | | | | | | alues | | | | | | | | | | if | | | | | | | | | | the | | | | | | | | | | data | | | | | | | | | | rate | | | | | | | | | | quota | | | | | | | | | | runs | | | | | | | | | | out. | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | * | Yes | Yes | PCF | PCF | RAN | - | Adju | The | |_ Sol\ | | | | | | | sting | PCF | | #25**| | | | | | | the | (per | | | | | | | | | UE | s | |**(de | | | | | | | -Slic | lice) | | pends | | | | | | | e-MBR | allo | | on | | | | | | | of | cates | | KI\ | | | | | | | the | a | | #3)** | | | | | | | UEs | Slic | | | | | | | | | as | e-MBR | | | | | | | | | more | per | | | | | | | | | UEs | UE | | | | | | | | | join | that | | | | | | | | | or | is | | | | | | | | | leave | sent | | | | | | | | | a | to | | | | | | | | | ne | RAN | | | | | | | | | twork | for | | | | | | | | | slice | en | | | | | | | | | with | force | | | | | | | | | at | ment. | | | | | | | | | least | | | | | | | | | | one | | | | | | | | | | PDU | | | | | | | | | | ses | | | | | | | | | | sion. | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
From Table 7.5-1 above, one can derived the following three categories:
\- Category A with enforcement of Slice max bit rate for each UE in RAN
(#14,#25).
\- Category B with enforcement of Slice max bit rate in control plan function
to control that the accumulate bit rate for all PDU sessions within the Slice
do not exceed the Slice max bit rate.(#12,#18, #19, #20, #24).
\- Category C with enforcement of slice max bit rate in the user plane by
distributing a quota to UPF for enforcement.(#16).
For Category A and Category B, the control function is based on the authorized
maximum bitrate of each UE or each PDU session. Considering that not every UE
or every PDU session can reach the maximum data rate allowed simultaneously,
the data rate of the slice (i.e. the sum of the data rate of each UE or each
PDU session) may be treated as exceeding the quota even the actual data rate
of the slice is still lower than the quota. For Category C, the subset of NW
Slice maximum data rate quota is distributed to multiple UPFs in the slice and
the control function in the UPF is based on the actual data rate of the slice
against the local quota. Therefore category C provide more accurate quota
control than category A and B.
For Category C the enforcement function is also in the UPF. The UPF can
perform admission control for GBR QoS flow and enforces the UL/DL bitrate for
all GBR QoS flow and non GBR QoS flow within the slice not exceeding the local
quota.. This may not always be efficient because the UPF may discard the
uplink packets which has consumed the radio resource. The UPF may also not be
able to ensure fairness across UE data rates within the whole slice. This can
be resolved if the PCF can take into account the actual data rate of the slice
when authorizing the MBR per SDF and Session-AMBR. Additionally the PCF can
distribute/redistribute the data rate quota per slice for each UPF based on
the real throughput of the UPF for the specific slice and the amount of the
PDU Sessions.
The solutions, both #14 and #25, that propose RAN enforcement are linked to
KI#3 and their solutions, as they propose enforcement of UE-Slice-MBR in RAN.
There is no clear benefit that shows if using analytics as input to the
decision point adds value for slice quota enforcement.
From signalling point of view, the centralized NSQ in Sol#12 and Sol#24,
acting as both slice max data rate storage functionality and quota control
functionality has to check the quota per each PDU session which brings heavy
signalling load of centralized NF. Quota distribution from slice max data rate
storage functionality to quota control functionality can avoid the adverse
impacts to the scalability and reliability of the system. Introducing a new NF
causes increased signalling from AMF/SMF to these new NFs in every PDU session
establishment or at new UE registrations. As such, the new functionality for
control of the quota is included in an existing NF.
As for dynamic adjustment, considering that the number of NF is much less than
the number of involved UEs and PDU Sessions, the signalling load for dynamic
adjustment per NF is less than adjustment per UE or per PDU session.
## 7.6 Evaluation on solutions of KI#6
The related solutions are #26, #27, #28, #39, #40, #41, #42
Table 7.6-1
+---------------+-------------------------+-------------------------+ | Solution #26 | Network controlled | - it enables the UE to | | | enforcement of | determine the priority | | | simultaneous usage of | for all the requested | | | network slices based on | slices, or a subset of | | | user preference | them, based on the | | | | services/applications | | | | active in the UE. | | | | | | | | - It enables the CN to | | | | determine the Allowed | | | | NSSAI even if the UE | | | | does not provide any | | | | prioritization | | | | (basically in this case | | | | there is no particular | | | | behaviour and in fact | | | | the solution does | | | | nothing compared to | | | | rel-16 - so it is | | | | unlikely to effectively | | | | enforce any policy) | | | | | | | | - it requires | | | | coordination between | | | | the UE and the network, | | | | and that the network | | | | interprets the | | | | prioritization provided | | | | by the UE. | | | | | | | | - priority may | | | | conflict with | | | | compatibility based | | | | selection in the | | | | network, so it may be | | | | that the UE is limited | | | | to use very small set | | | | of compatible slices at | | | | a time. | +===============+=========================+=========================+ | Solution #27 | Network slices | Somehow similar to | | | simultaneous usage | solutions #28, #41, | | | incompatibility support | and #42 in the sense | | | | that the UE is provided | | | | configuration | | | | information with | | | | respect to network | | | | slice incompatibility | | | | attribute per allowed | | | | S-NSSAI for | | | | simultaneous use: | | | | | | | | - It is deterministic | | | | in the CN knowledge of | | | | whether the UE can | | | | support network slices | | | | simultaneous usage | | | | incompatibility | | | | feature, due to the UE | | | | explicit indication | | | | | | | | - The UE is provided | | | | explicit | | | | incompatibility | | | | information per allowed | | | | S-NSSAI. | | | | | | | | - It allows the UE to | | | | register to slices that | | | | are incompatible while | | | | using UP resources only | | | | for compatible sets of | | | | slices. The | | | | incompatible Slices, | | | | however, still need to | | | | be supported in all the | | | | TAs in the RA. | | | | | | | | - it relies on UE or | | | | network to release or | | | | deactivate PDU sessions | | | | if UE needs to | | | | establish or activate a | | | | PDU session for an | | | | incompatible slice | | | | | | | | - it does not require | | | | UE to re-register to | | | | get user plane | | | | resources for | | | | incompatible slices | | | | with respect to the | | | | current slices with | | | | active PDU Sessions | | | | | | | | - it allows an option | | | | for light mode of | | | | operation where the | | | | incompatibility | | | | attribute is not | | | | provided to the UE and | | | | the incompatibility | | | | enforcement is done in | | | | the network only. The | | | | light mode can be | | | | applied to UEs not | | | | supporting the | | | | incompatibility | | | | feature. In this case | | | | the incompatibility | | | | enforcement is done by | | | | the network only and an | | | | existing reject cause | | | | is returned to the UE. | | | | | | | | - The incompatibility | | | | for simultaneous use | | | | attribute is a | | | | subscription | | | | information, so it is | | | | only based on HPLMN | | | | policies. | +---------------+-------------------------+-------------------------+ | Solution #28 | Compatibility Class | Somehow similar to | | | based support for | solutions #27, #41, | | | simultaneous use of the | and #42 in the sense | | | network slice | that the UE is provided | | | | configuration | | | | information with | | | | respect to the sets of | | | | slices that are | | | | compatible. | | | | | | | | It proposes that the | | | | network provides to the | | | | UE for each S-NSSAI a | | | | \"simultaneous use | | | | information\" | | | | compatibility class | | | | defining the | | | | compatibility with | | | | other Network Slices, | | | | and that the UE shall | | | | not include in the | | | | Requested NSSAI | | | | S-NSSAIs that map to | | | | HPLMN S-NSSAIs which | | | | are incompatible with | | | | each other: | | | | | | | | - The UDM provides the | | | | AMF with compatibility | | | | class info if any | | | | applies to a S-NSSAI in | | | | subscription, in other | | | | words the | | | | incompatibility for | | | | simultaneous use | | | | attribute is a | | | | subscription | | | | information, so it is | | | | only based on HPLMN | | | | policies. | | | | | | | | - This is provided to | | | | the UE together with | | | | the Configured NSSAI | | | | | | | | - It allows the UE to | | | | be aware of the | | | | Compatibility Class | | | | information during the | | | | UE registration, so it | | | | avoids registering with | | | | incompatible slices. | | | | | | | | - If a VPLMN does not | | | | support the feature, | | | | only compatible slices | | | | can be sent as | | | | subscription data to | | | | that VPLMN. Thus it has | | | | no impact on existing | | | | networks. | | | | | | | | - If the UE does not | | | | support the feature, | | | | the Configured NSSAI | | | | the AMF sends only | | | | includes compatible | | | | slices, based on HPLMN | | | | decision (they are | | | | highlighted in | | | | subscription data as | | | | the compatible set to | | | | be provided in this | | | | case) | | | | | | | | - It prevents the UE | | | | to attempt to register | | | | with incompatible | | | | slices upfront as the | | | | UE is aware of what | | | | slices are compatible | | | | according to the policy | | | | it receives from the | | | | network. | +---------------+-------------------------+-------------------------+ | Solution #39 | Support registration | - It imposes minimal | | | for incompatible | impact to the UE, by | | | network slice(s) in | adding a cause code | | | UE\'s current serving | indicating a rejected | | | RA or different one | s-NSSAI is rejected due | | | | to compatibility with | | | | slices in the allowed | | | | NSSAI. | | | | | | | | - It does not | | | | differentiate the | | | | Rejected S-NSSAIs which | | | | are outside of the | | | | UE\'s current serving | | | | TA/RA. | | | | | | | | NOTE: The new Rejection | | | | Cause is necessary to | | | | allow same TA/RA to | | | | serve the | | | | compatible/incompatible | | | | slices because today | | | | Rejection Cause forbid | | | | UE to re-register | | | | Rejected S-NSSAI within | | | | the same TA/RA. | +---------------+-------------------------+-------------------------+ | Solution #40 | Separate SUPI/GPSI per | This solution enables | | | isolated set of | different \"UE | | | S-NSSAIs | profiles\" associated | | | | to different | | | | SUPIs/GPSIs and that | | | | identify specific set | | | | of S-NSSAIs that are | | | | compatible: | | | | | | | | - It assumes roaming | | | | agreements ensures that | | | | compatibility between | | | | S-NSSAIs is | | | | coordinated. | | | | | | | | - It does not require | | | | UE to declare what it | | | | supports to the network | | | | nor requires any | | | | coordination between | | | | VPLMN and HPLMN for | | | | upgrades since it is | | | | backward compatible | | | | with existing | | | | procedures and | | | | mechanism for | | | | allowe | | | | d/configured/subscribed | | | | slices. What is not | | | | understood is just | | | | ignored. | | | | | | | | - it has NAS impacts | | | | in terms of new | | | | registration procedure | | | | and new NAS mechanisms | | | | internal to the UE | | | | (e.g. switch between | | | | SUPIs) | +---------------+-------------------------+-------------------------+ | Solution #41 | Simultaneous use of the | The solution is similar | | | network slice via | to #27, #28, and #42 | | | Configured NSSAI | in the sense that the | | | | UE is provided | | | | configuration | | | | information with | | | | respect to the sets of | | | | slices that are | | | | compatible: | | | | | | | | - It can inform the UE | | | | of all the deployment | | | | and business | | | | constraints related to | | | | the Home and the | | | | serving network\'s | | | | network slices (based | | | | on network | | | | configuration, SLA with | | | | HPLMN and possibly | | | | dynamic information). | | | | | | | | - A supporting UE is | | | | provided with the SUG | | | | (Simultaneous Usage | | | | Group) information | | | | together with the | | | | Configured NSSAI of | | | | this serving PLMN, for | | | | use during the UE | | | | registration. | | | | | | | | - the supporting UE is | | | | expected not to | | | | register at the same | | | | time for incompatible | | | | slices, however the | | | | network is aware with | | | | SUGs and can handle | | | | this scenario, should | | | | the supporting UE | | | | misbehave. | +---------------+-------------------------+-------------------------+ | Solution #42 | UE handling of | The solution is similar | | | constraints on | to #27, #28, and #41 | | | simultaneous use of | in the sense that the | | | network slices based on | UE is provided | | | network assistance | configuration | | | | information with | | | | respect to the sets of | | | | slices that are | | | | compatible. | | | | | | | | - It requires UE to be | | | | aware of the category | | | | information during the | | | | UE registration. | | | | Furthermore, this | | | | solution proposes | | | | multi-level network | | | | slice compatibility. | | | | | | | | - the UE can never | | | | register at the same | | | | time for incompatible | | | | slices. | | | | | | | | - it requires UE to | | | | re-register to get data | | | | resources for | | | | incompatible slices | | | | with respect to the | | | | current slices with | | | | active PDU Sessions. | +---------------+-------------------------+-------------------------+
## 7.7 Evaluation on solutions of KI#7
The main issue to be resolved in KI#7 is how the 5GS steers UEs to a 5G-AN
(e.g. a specific frequency band supported by the UE) that supports the network
slices that the UE can use. Solutions 17, 29, 30, 31, 44 and 46 are for Key
Issue #7. All solutions are compatible with assumption that each cell in the
tracking area supports the same S-NSSAI(s).
Solution 17, 29, and 30 focus on the Registration procedure while solutions 31
and 44 focus on the PDU session establishment procedure.
Solution 45 is not oriented at supporting the UE to perform the selection of a
band suitable to register with a slice that only operates in that band. It
defines a check to match the UE radio capabilities with the frequency bands
supported by the slices in the Allowed NSSAI that the AMF intends to allocate
to the UE. It then may reject an S-NSSAI that work at the current UE location
on the basis it may not work in some bands of the TA as the UE does not
support those bands. The solution aims to give the AMF an opportunity to
create an Allowed NSSAI and a Registration Area assigned to the UE that
matches FBs supported by the UE. The problematic aspect then is that it may
not allow the UE to use some slices that work at the current location, or,
conversely, allow some S-NSSAIs that work in other cells of the TA/RA but not
at the current cell.
Solution 17 allows the UE to request registration for S-NSSAIs outside of the
Allowed NSSAI. The 5GC then determines which slices are preferred, and steers
the UE towards the preferred S-NSSAIs, or rejects the requested slice(s).
Thus, the solution assumes that the network decides which network slices it
expects the UE to register with to register without explicitly knowing what
network slice(s) the user prefers.
Solution 29 also allows the UE to request registration for S-NSSAIs outside of
the Allowed NSSAI. The UE is provided with frequency band information per
network slice in the Configured NSSAI. When the UE wants to register to
slice(s) the UE may perform cell selection/reselection based on the received
frequency band information of the slice(s). It is then understood that the UE
will only request slices that are accessible simultaneously in the selected
cell and the AMF will include in the Allowed NSSAI only S-NSSAI(s) that are
accessible simultaneously. Solution 29 has an impact on the UE.
Solution 30 also allows the UE to request registration for S-NSSAIs outside of
the Allowed NSSAI. The UE is provided with frequency band information per
network slice in the Configured NSSAI. Each of a slice\'s target carrier
frequencies can also be associated with a priority. The UE uses this
information during cell selection in Idle mode when the UE wants to use a
network slice (as in solution 29). In Solution 30, the UE is allowed to
register to multiple network slices which are accessible on different
preferred frequency band(s) within the Registration Area.
Editor\'s note: Impacts on the cell selection/reselection mechanisms would
require feedback from RAN WGs and CT WG1.
Solution 31 and solution 44 propose mechanisms to steer UEs to a 5G-AN (e.g. a
specific frequency band) during the PDU Session establishment procedure. Both
solutions assume that the network can be configured with preferred frequency
band information for each slice but this information is not provided to the
UE. The difference is in solution 31 the AMF decides to steer the UE to a
target RAN Node while in solution 44 the RAN decides to steer the UE to the
target RAN Node. It is unclear why we need solution 31 as the current system
behaviour is empowering the RAN to perform RRM, so it is unclear why solution
31 intends to shift RRM information to the CN.
Solution 44 doesn\'t have any impact on the system. Solution 44 does not
handle the case where the operator manages a different range of radio
spectrums for some network slices (i.e. some network slices cannot be accessed
via certain frequencies). It is illustrating how the concept of band
preference can cover a large number of use cases in the current system.
Solutions 30 does not explain how to handle the case where the UE attempts to
maintain PDU Sessions in slices that are not all accessible in the same
operating band. It proposes to optionally use NR/NR Dual Connectivity in order
to use different frequency bands simultaneously when the UE supports NR/NR
Dual Connectivity. This is not possible in all scenarios (e.g. if the UE is
registered to 3 slices that are available on a common operating band in the
primary cell or if the UE is not capable of NR/NR DC). Also, dual connectivity
assumes the primary cell supports the control plane of all the slices, and
this is the cell in the TA serving the UE, so it is unclear what it means that
a slice is not supported in the primary cell.
Solution #31 maintains the existing PDU sessions by transferring them all to
the target cell in the other frequency band as all the allowed network slices
are supported in both frequency bands. If Dual Connectivity is supported, then
the UE stays in the current frequency band and triggers Dual Connectivity in
order to use the other frequency band for the user plane.
Solution 46 provides means by which the RAN can provide to the UE more
information on what slices are supported in which bands, when the RRC
connection release provides CellReselectionPriorities. This is helpful to
allow the UE to prefer certain bands in the list so it can register with some
band specific slices. This minimizes the trial and errors and also permits the
selection of the right bands at the UE before attempting the registration. The
availability of the configured NSSAI in the RAN UE context allows to provide a
more complete list of bands to the UE in the RRC connection Release, by also
enabling the inclusion of bands that support band specific slices, based on
network policy. Additionally, the UE may obtain information on slices not
supported by the current AMF and so it may get indication whether to not
include GUTI and include NSSAI in RRC, to register with the right AMF upfront
(providing NSSAI in RRC can be seen as a privacy issue). For this purpose, the
AMF provides the configured NSSAI to the RAN, in addition to allowed NSSAI.
And also, the AMF indicates to RAN whether the AMF does not support some
S-NSSAIs in the configured NSSAI (which is already known using NG SETUP
procedure).
Table 7.7-1 summarized some differences between solutions 17, 29, 30, 31, 44,
45 and 46.
Table 7.7-1: Key Issue #7 Solution Comparison
+----+-------+-------+-------+-------+-------+-------+-------+-------+ | # | Cri | Sol | Sol | Sol | Sol | Sol | Sol | Sol | | | teria | ution | ution | ution | ution | ution | ution | ution | | | | 17 | 29 | 30 | 31 | 44 | 45 | 46 | +====+=======+=======+=======+=======+=======+=======+=======+=======+ | 1 | When | No | Yes | Yes | No | No | No | Yes | | | slic | | | | | | | | | | e(s), | UE | Supp | Supp | Slice | Slice | | UE | | | to | can | orted | orted | av | av | | can | | | which | s | bands | bands | ailab | ailab | | s | | | the | elect | are | of | ility | ility | | elect | | | UE | a | pro | the | based | based | | cell | | | wants | slice | vided | Se | on UP | on UP | | based | | | to | not | in | rving | reso | reso | | on | | | regi | avai | the | PLMN | urces | urces | | the | | | ster, | lable | Confi | are | | | | info | | | are | in | gured | pro | | | | it | | | not | cu | N | vided | | | | rec | | | avai | rrent | SSAI. | in | | | | eives | | | lable | cell | | the | | | | via | | | in a | and | | Confi | | | | RRC | | | cu | get | | gured | | | | conne | | | rrent | r | | N | | | | ction | | | cell, | e-dir | | SSAI. | | | | rel | | | is | ected | | | | | | ease. | | | the | to | | | | | | | | | UE | w | | | | | | UE | | | able | anted | | | | | | can | | | to | sli | | | | | | s | | | s | ce/TA | | | | | | elect | | | elect | | | | | | | a | | | a | | | | | | | slice | | | diff | | | | | | | not | | | erent | | | | | | | avai | | | cell | | | | | | | lable | | | /band | | | | | | | in | | | that | | | | | | | cu | | | sup | | | | | | | rrent | | | ports | | | | | | | cell | | | the | | | | | | | and | | | slic | | | | | | | get | | | e(s)? | | | | | | | r | | | | | | | | | | e-dir | | | (i.e. | | | | | | | ected | | | Is | | | | | | | to | | | the | | | | | | | w | | | UE | | | | | | | anted | | | aware | | | | | | | sli | | | of | | | | | | | ce/TA | | | what | | | | | | | | | | s | | | | | | | | | | lices | | | | | | | | | | are | | | | | | | | | | supp | | | | | | | | | | orted | | | | | | | | | | by | | | | | | | | | | each | | | | | | | | | | oper | | | | | | | | | | ating | | | | | | | | | | b | | | | | | | | | | and?) | | | | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 2a | Can | No | No | Yes | No | No | No | No | | | the | | | | | | | | | | UE | | | | | | | | | | have | | | | | | | | | | s | | | | | | | | | | lices | | | | | | | | | | in | | | | | | | | | | its | | | | | | | | | | Al | | | | | | | | | | lowed | | | | | | | | | | NSSAI | | | | | | | | | | that | | | | | | | | | | are | | | | | | | | | | not | | | | | | | | | | all | | | | | | | | | | avai | | | | | | | | | | lable | | | | | | | | | | on | | | | | | | | | | some | | | | | | | | | | c | | | | | | | | | | ommon | | | | | | | | | | oper | | | | | | | | | | ating | | | | | | | | | | ban | | | | | | | | | | d(s)? | | | | | | | | | | | | | | | | | | | | FFS: | | | | | | | | | | The | | | | | | | | | | need | | | | | | | | | | of | | | | | | | | | | this | | | | | | | | | | Cri | | | | | | | | | | teria | | | | | | | | | | de | | | | | | | | | | pends | | | | | | | | | | on | | | | | | | | | | RAN | | | | | | | | | | feed | | | | | | | | | | back. | | | | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 2b | Does | Yes | Yes | Yes | Yes | Yes | yes | yes | | | the | | | | | | | | | | sol | | | Valid | | | | | | | ution | | | if | | | | | | | allow | | | all | | | | | | | the | | | S-N | | | | | | | UE to | | | SSAIs | | | | | | | simu | | | of | | | | | | | ltane | | | the | | | | | | | ously | | | Al | | | | | | | use | | | lowed | | | | | | | all | | | NSSAI | | | | | | | s | | | op | | | | | | | lices | | | erate | | | | | | | in | | | c | | | | | | | the | | | ommon | | | | | | | Al | | | freq | | | | | | | lowed | | | uency | | | | | | | NSSAI | | | band | | | | | | | (i.e. | | | (e.g. | | | | | | | simu | | | in | | | | | | | ltane | | | the | | | | | | | ously | | | pr | | | | | | | mai | | | imary | | | | | | | ntain | | | c | | | | | | | PDU | | | ell). | | | | | | | Ses | | | | | | | | | | sions | | | | | | | | | | in | | | | | | | | | | all | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | Al | | | | | | | | | | lowed | | | | | | | | | | s | | | | | | | | | | lices | | | | | | | | | | per | | | | | | | | | | T | | | | | | | | | | S 23. | | | | | | | | | | 501 \ | | | | | | | | | | [2], | | | | | | | | | | clau | | | | | | | | | | se 5. | | | | | | | | | | 15.5. | | | | | | | | | | 1.1)? | | | | | | | | | | | | | | | | | | | | FFS: | | | | | | | | | | The | | | | | | | | | | need | | | | | | | | | | of | | | | | | | | | | this | | | | | | | | | | Cri | | | | | | | | | | teria | | | | | | | | | | de | | | | | | | | | | pends | | | | | | | | | | on | | | | | | | | | | RAN | | | | | | | | | | feed | | | | | | | | | | back. | | | | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | How | RAN | The | The | RAN | RAN | Not | RAN | | | does | Redi | UE is | UE is | s | s | spec | redi | | | 5GS | rects | told | told | teers | teers | ified | rects | | | steer | the | what | what | the | the | in | to | | | UEs | UE | oper | oper | UE | UE | this | b | | | to a | when | ating | ating | based | based | sol | ands. | | | 5G-AN | it | bands | bands | on | on | ution | In | | | (e.g. | det | will | will | the | the | | addt | | | a | ects, | work | work | requ | S- | | iotin | | | spe | as | with | with | ested | NSSAI | | at | | | cific | per | each | each | S- | pro | | any | | | freq | NSSAI | s | s | NSSAI | vided | | time | | | uency | and | lice. | lice. | pro | by | | the | | | band) | RFSP | The | The | vided | the | | UE is | | | that | pro | UE in | UE in | by | SMF | | pro | | | can | vided | Idle | Idle | the | in | | vided | | | su | by | mode | mode | AMF | the | | with | | | pport | AMF, | se | se | in | PDU | | a | | | the | that | lects | lects | the | Se | | view | | | ne | the | a | a | PDU | ssion | | of | | | twork | UE | cell | cell | Se | Est | | what | | | s | wants | in | in | ssion | ablis | | bands | | | lices | to | the | the | Est | hment | | in | | | that | a | freq | freq | ablis | Re | | the | | | the | ccess | uency | uency | hment | quest | | cell | | | UE | a | band | band | Re | proce | | r | | | wants | slice | of | of | quest | dure, | | esele | | | to | that | the | the | proce | and | | ction | | | use. | is | requ | requ | dure. | when | | prior | | | | not | ested | ested | | activ | | ities | | | | avai | N | N | | ating | | are | | | | lable | SSAI. | SSAI. | | UP | | suppo | | | | in | | | | resou | | rting | | | | the | The | The | | rces. | | some | | | | cu | ne | ne | | | | s | | | | rrent | twork | twork | | | | lices | | | | band. | can | can | | | | that | | | | | con | con | | | | are | | | | | sider | sider | | | | band | | | | | the | the | | | | spe | | | | | Al | Al | | | | cific | | | | | lowed | lowed | | | | so | | | | | NSSAI | NSSAI | | | | the | | | | | when | when | | | | UE | | | | | d | d | | | | can | | | | | eterm | eterm | | | | p | | | | | ining | ining | | | | refer | | | | | what | what | | | | these | | | | | cell | cell | | | | if it | | | | | to | to | | | | needs | | | | | han | han | | | | these | | | | | dover | dover | | | | sl | | | | | the | the | | | | ices. | | | | | UE to | UE to | | | | | | | | | | | | | | | | | | | The | The | | | | | | | | | ne | ne | | | | | | | | | twork | twork | | | | | | | | | can | can | | | | | | | | | con | con | | | | | | | | | sider | sider | | | | | | | | | the | the | | | | | | | | | Al | Al | | | | | | | | | lowed | lowed | | | | | | | | | NSSAI | NSSAI | | | | | | | | | when | when | | | | | | | | | c | c | | | | | | | | | onfig | onfig | | | | | | | | | uring | uring | | | | | | | | | the | the | | | | | | | | | UE\'s | UE\'s | | | | | | | | | cell | cell | | | | | | | | | sele | sele | | | | | | | | | ction | ction | | | | | | | | | p | p | | | | | | | | | riori | riori | | | | | | | | | ties. | ties. | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | What | RAN | Exi | Exi | RAN | RAN | N/A | The | | | i | uses | sting | sting | uses | uses | | ste | | | nform | the | Mecha | Mecha | the | the | | ering | | | ation | T | nisms | nisms | S- | S- | | ha | | | does | arget | (i.e. | (i.e. | NSSAI | NSSAI | | ppens | | | the | NSSAI | RFSP | RFSP | pro | pr | | like | | | 5G-AN | and | Index | Index | vided | ovide | | in | | | need | cor | and | and | by | by | | sol | | | to | respo | the | the | the | the | | ution | | | steer | nding | RAN | RAN | AMF | SMF | | 17. | | | UE to | RFSP | can | can | in | in | | | | | a | from | con | con | the | the | | How | | | p | the | sider | sider | PDU | PDU | | ever, | | | roper | AMF | the | the | Se | Se | | as an | | | 5 | | Al | Al | ssion | ssion | | im | | | G-AN. | | lowed | lowed | Est | Est | | prove | | | | | N | N | ablis | ablis | | ment, | | | | | SSAI) | SSAI) | hment | hment | | t | | | | | | | Re | Re | | hanks | | | | | | | quest | quest | | to | | | | | | | proc | proc | | the | | | | | | | edure | edure | | addit | | | | | | | | and | | ional | | | | | | | | | | i | | | | | | | | Exi | | nform | | | | | | | | sting | | ation | | | | | | | | Mecha | | the | | | | | | | | nisms | | RAN | | | | | | | | (i.e. | | prov | | | | | | | | RFSP | | ides: | | | | | | | | Index | | the | | | | | | | | and | | trial | | | | | | | | the | | and | | | | | | | | RAN | | e | | | | | | | | can | | rrors | | | | | | | | con | | are | | | | | | | | sider | | mini | | | | | | | | the | | mized | | | | | | | | Al | | and | | | | | | | | lowed | | the | | | | | | | | N | | need | | | | | | | | SSAI) | | of | | | | | | | | for | | ste | | | | | | | | subse | | ering | | | | | | | | quent | | is | | | | | | | | stee | | mini | | | | | | | | ring. | | mized | | | | | | | | | | as | | | | | | | | | | the | | | | | | | | | | RAN, | | | | | | | | | | if it | | | | | | | | | | pro | | | | | | | | | | vides | | | | | | | | | | the | | | | | | | | | | Ce | | | | | | | | | | llRes | | | | | | | | | | elect | | | | | | | | | | ionPr | | | | | | | | | | irori | | | | | | | | | | ties, | | | | | | | | | | it | | | | | | | | | | shall | | | | | | | | | | at | | | | | | | | | | tempt | | | | | | | | | | to | | | | | | | | | | also | | | | | | | | | | pr | | | | | | | | | | ovide | | | | | | | | | | some | | | | | | | | | | bands | | | | | | | | | | for | | | | | | | | | | the | | | | | | | | | | s | | | | | | | | | | lices | | | | | | | | | | that | | | | | | | | | | are | | | | | | | | | | band | | | | | | | | | | spe | | | | | | | | | | cific | | | | | | | | | | if | | | | | | | | | | they | | | | | | | | | | are | | | | | | | | | | avai | | | | | | | | | | lable | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | area | | | | | | | | | | where | | | | | | | | | | the | | | | | | | | | | UE | | | | | | | | | | is. | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | What | No | Supp | Supp | No | No | N/A | Cell | | | i | new | orted | orted | new | new | | prior | | | nform | i | bands | bands | i | i | | ities | | | ation | nform | are | of | nform | nform | | list | | | s | ation | pro | the | ation | ation | | augm | | | hould | is | vided | Se | is | is | | ented | | | be | sent | in | rving | sent | sent | | wiht | | | pro | to | the | PLMN | to | to | | the | | | vided | the | Confi | are | the | the | | i | | | to | UE. | gured | pro | UE. | UE. | | nfomr | | | the | | N | vided | | | | ation | | | UE to | | SSAI. | in | | | | of | | | s | | | the | | | | s | | | elect | | | Confi | | | | lices | | | a | | | gured | | | | which | | | p | | | N | | | | are | | | roper | | | SSAI. | | | | band | | | 5G-AN | | | | | | | spe | | | and | | | | | | | cific | | | how | | | | | | | a | | | it is | | | | | | | ssosi | | | sent | | | | | | | cated | | | to | | | | | | | to | | | the | | | | | | | ce | | | UE. | | | | | | | rtain | | | | | | | | | | bands | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | RAN | Su | None, | None, | RAN | None, | Han | Han | | | Im | pport | the | the | uses | the | dling | dling | | | pacts | ge | Al | Al | the | Requ | of | of | | | | tting | lowed | lowed | S- | ested | the | confi | | | | addit | NSSAI | NSSAI | NSSAI | NSSAI | new | gured | | | | ional | is | is | pro | is | apect | NSSAI | | | | T | al | al | vided | al | of | so | | | | arget | ready | ready | by | ready | the | the | | | | NSSAI | pro | pro | the | pro | proc | i | | | | and | vided | vided | AMF | vided | edure | nform | | | | RFSP | to | to | in | to | for | ation | | | | Index | the | the | the | the | UE | of | | | | for | RAN | RAN | PDU | RAN | radio | s | | | | the | via | via | Se | via | capab | lices | | | | T | N2. | N2. | ssion | N2 SM | ility | in | | | | arget | | | Est | mes | m | the | | | | N | | | ablis | sage. | atch. | bands | | | | SSAI, | | | hment | | | in | | | | and | | | Re | | | the | | | | su | | | quest | | | CellR | | | | pport | | | proc | | | esele | | | | m | | | edure | | | ction | | | | oving | | | to | | | Prior | | | | the | | | steer | | | ities | | | | UE | | | the | | | is | | | | ac | | | UE. | | | pro | | | | cordi | | | | | | vided | | | | ngly. | | | | | | to | | | | | | | | | | the | | | | | | | | | | UE, | | | | | | | | | | and | | | | | | | | | | the | | | | | | | | | | i | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | | to | | | | | | | | | | tr | | | | | | | | | | igger | | | | | | | | | | d | | | | | | | | | | irect | | | | | | | | | | AMF | | | | | | | | | | sele | | | | | | | | | | ction | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | RAN. | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 7 | UE | No | Yes | Yes | No | No | no | yes | | | Im | | | | | | | | | | pacts | | | (UE | (UE | (UE | | | | | | | | needs | needs | needs | | | | | | | | to | to | to | | | | | | | | su | su | su | | | | | | | | pport | pport | pport | | | | | | | | DC) | DC) | C | | | | | | | | | | A/DC) | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | Yes | Yes | Yes | Yes | Yes | Yes | N/A | Yes. | | | | | | | | | | | | | | As | | As | | | | | | | | sumes | | sumes | | | | | | | | AMF | | there | | | | | | | | sup | | is a | | | | | | | | ports | | cell | | | | | | | | the | | that | | | | | | | | s | | sup | | | | | | | | lices | | ports | | | | | | | | or | | the | | | | | | | | can | | req | | | | | | | | r | | uired | | | | | | | | e-all | | band. | | | | | | | | ocate | | | | | | | | | | to | | | | | | | | | | new | | | | | | | | | | AMF | | | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+ | 9 | Is | No | Yes | Yes, | N/A | N/A | N/A | Yes | | | the | | | but | | | | | | | sol | | | the | This | This | | | | | ution | | | UE | sol | sol | | | | | minim | | | may | ution | ution | | | | | izing | | | au | is | is | | | | | the | | | tonom | about | about | | | | | n | | | ously | band | band | | | | | umber | | | s | prefe | prefe | | | | | of | | | elect | rence | rence | | | | | atte | | | bands | | | | | | | mpts, | | | that | | | | | | | e.g. | | | are | | | | | | | does | | | not | | | | | | | it | | | the | | | | | | | allow | | | most | | | | | | | the | | | pref | | | | | | | sele | | | erred | | | | | | | ction | | | by | | | | | | | of | | | the | | | | | | | bands | | | RAN | | | | | | | that | | | | | | | | | | are | | | | | | | | | | sui | | | | | | | | | | table | | | | | | | | | | upf | | | | | | | | | | ront, | | | | | | | | | | or | | | | | | | | | | Re | | | | | | | | | | quest | | | | | | | | | | a set | | | | | | | | | | of | | | | | | | | | | compa | | | | | | | | | | tible | | | | | | | | | | S-N | | | | | | | | | | SSAIs | | | | | | | | | | upf | | | | | | | | | | ront? | | | | | | | | +----+-------+-------+-------+-------+-------+-------+-------+-------+
Editor\'s note: This table will need to be updated with new solutions from
SA2#141e.
# 8 Conclusions
Editor\'s note: This clause will capture conclusions from the study.
## 8.1 Conclusion for Key Issue #1
To enable a 5GS to support network slice related quota on the maximum number
of UEs, no change is required in the RAN. The following new functionalities in
the 5GS are needed:
\- Storing of network slice related quota information: If a network slice is
subject to a network slice quota checking on a maximum number of UEs, it is
assumed that the O&M should have for this network slice a) the information of
the quota of maximum number of UEs. To enable the network slice related quota
enforcement, this information is configured and stored in 5GC.
\- Managing and updating the network slice related quota on maximum number of
UEs registered for the network slice: This functionality is part of the 5GC
and it manages the NW Slice quota of maximum number of UEs in a S-NSSAI,
monitors the current number of UEs being registered for the network slice
subject to a network slice quota checking.
\- Enforcing the network slice related quota on the maximum number of UEs:
This functionality is part of the 5GC and it controls the registration request
on the S-NSSAI subject to the quota management by accepting or rejecting the
request on the S-NSSAI. In case of rejection, the function may provide a
rejection cause and optionally with a back-off timer.
\- A new NF is defined to support the storing of network slice information
(i.e. the maximum number of UEs allowed to be served by a network slice), and
managing, updating and enforcing the network slice information for the purpose
of network slice access control. The new NF can be deployed as standalone or
co-located within existing NF.
NOTE 1: Whether to use an existing rejection cause and a back-off timer or a
new rejection cause and a back-off timer, this is to be determined in Stage-3.
NOTE 2: The detailed operation for the network slice access control with the
consideration of different access types and EPC interworking will be
considered during the normative phase.
## 8.2 Conclusion for Key Issue#2
To enable a 5GS to support network slice related quota on the maximum number
of PDU Sessions, the following new functionalities in the 5GS are needed:
\- Storing of network slice related quota information: If a network slice is
subject to a network slice quota management on a maximum number of PDU
Sessions, it is assumed that the O&M should have for this network slice a) the
information of the quota of maximum number of PDU Sessions. To enable the
network slice related quota enforcement, this information is configured and
stored in 5GC.
\- Managing and updating the network slice related quota on maximum number of
PDU Sessions established in a S-NSSAI: This functionality is part of the 5GC
and it manages the NW Slice quota of maximum number of PDU Sessions in a
S-NSSAI, and updates the current number of PDU Sessions successfully
established in the network slice subject to a network slice quota checking on
a maximum number of PDU Sessions.
\- Enforcing the network slice related quota on the maximum number of PDU
Sessions: This functionality is part of the 5GC and it controls the
establishment of PDU session of a S-NSSAI subject to the quota management by
accepting or rejecting the request. In case of rejection, the function may
provide a rejection cause and optionally with a back-off timer.
\- A new NF is defined to support the storing of network slice information
(i.e. the maximum number of PDU Sessions allowed to be served by a network
slice), and managing, updating and enforcing the network slice information for
the purpose of network slice access control. The new NF can be deployed as
standalone or co-located with an existing NF.
NOTE 1: Whether to use an existing rejection cause and back-off timer or a new
rejection cause and back-off timer, this is to be determined in Stage-3.
NOTE 2: The detailed operation for the network slice access control with the
consideration of different access types and EPC interworking will be
considered during the normative phase.
## 8.3 Conclusion for Key Issue #3
For Key Issue #3 (Limitation of data rate per network slice in UL and DL per
UE):
\- A new QoS parameter, \"Slice-Maximum Bit Rate\" (S-MBR) is defined. The
UL/DL Slice-MBR QoS parameter limits the aggregate data rate in UL and DL per
UE across all GBR and Non-GBR QoS Flows for all PDU sessions associated with a
S-NSSAI for the UE. The value of UL/DL Slice-MBR is stored in the UDR.
\- Different UEs which can use a Network Slice identified with a certain
S-NSSAI value can have a different Slice-MBR QoS parameter value depending on
the UE subscription.
\- Solution #22 is used as basis of normative work (i.e. the RAN enforces the
UL/DL Slice-MBR as in solution #22).
\- The PCF shall be able to receive the S-MBR to be able to enable policy
control of existing QoS parameters for the PDU session(s) not to exceed the
S-MBR.
## 8.4 Conclusion for Key Issue #4
For Key Issue #4 (Support for network slice quota event notification in a
network slice):
\- The new 5GC NF (Control Plane NF within the 5G Core Network) has an
interface with AF (optionally via NEF) and manages event
subscription/notification from the AF for the network slice related quota on
the number of registered UEs, number of established PDU sessions. The AF is
allowed to set the triggering condition per S-NSSAI (not per UE), e.g.
threshold, in terms of number of registered UEs or number of established PDU
Sessions for the notification sent by the new 5GC NF.
\- The new 5GC NF determines whether event notification triggering condition
is met based on data received from other 5GC NFs via service based interface.
If the triggering condition is met, e.g. a specified threshold is reached, the
new 5GC NF sends notification to the AF.
## 8.5 Conclusion for Key Issue #5
To enable a 5GS to support KI#5(dynamic adjustment to meet the limitation of
data rate per network slice in UL and DL), the following new functionalities
in the 5GS are needed:
\- Storage: If a network slice is subject to limitation of data rate per
network slice, it is assumed that NW Slice maximum data rate parameter, which
is the aggregate data rate across all GBR and Non-GBR flows within the slice,
is configured and stored in the UDR.
\- Monitoring: The PCF monitors the aggregated data rate for the network slice
by computing the aggregate NW Slice data rate of the UEs that have PDU
sessions admitted in the network slice and/or the utilized bandwidth of the
Network Slice.
\- Enforcement: the PCF ensures that no new PDU sessions or QoS flows of
network slices with registered UEs are admitted if this may cause overflowing
the NW Slice maximum data rate parameter stored in the UDR.
\- Define a new AnalyticsID or reuse an available AnalyticsID as an outcome of
the eNA_Ph2 study, that provides UL/DL average throughput per S-NSSAI.
\- NWDAF determine the analytics for the UL/DL throughput per S-NSSAI based on
the following input data:
> Table 8.5-1: Data Collected from the UPF
Information Source Description
* * *
S-NSSAI UPF Identifies the Network Slice for which average throughput is
retrieved. Measurement period UPF Measurement period, the measurement is
period. Throughput UL/DL UPF Average Throughput UL/DL over the measurement
period. Timestamp UPF Time when measurements are taken.
NOTE 1: In the case of multiple UPFs are associated to a S-NSSAI, the NWDAF
collects the data from all associated UPFs.
\- Define that the PCF consumes the AnalyticsID on average throughput as input
to determine the S-MBR for each UE.
Table 8.5-2
Information Description
* * *
S-NSSAI Identifies the Network Slice for which analytics on average throughput
are provided Throughput UL/DL Average Throughput UL/DL over the time window
Applicable time window The time period that the analytics applies to
Confidence Confidence on the prediction (application for predictions only)
NOTE 2: Multiple PCFs for this key issue is to be addressed in normative
phase.
NOTE 3: NWDAF aspects is to be confirmed with eNA_Ph2 during normative phase.
## 8.6 Conclusion for Key Issue #6
Void.
## 8.7 Conclusion for Key Issue #7
Editor\'s note: The following is an interim conclusion for the KI#7 and are
subject to change dependent on RAN WGs feedback, and on evaluation of the new
solutions agreed in SA2#141e..
The existing capabilities of the 5GS, e.g. the ability to steer UEs to certain
frequencies based on RFSP, Allowed NSSAI and activated UP, together with a
suitable resource partitioning of the NG-RAN resources, enable the 5GS to
support the case where the network operator **prefers** that certain network
slices use certain frequencies (certain network slices may get dedicated
resources by NG-RAN resource partitioning in preferred frequencies). That is,
the existing 5GS supports steering/re-directing the UE to appropriately
preferred frequencies based on the S-NSSAIs in Allowed NSSAI or when the UP
resources are activated for the S-NSSAIs.
Existing capabilities of the 5GS do not fully support the case where certain
frequencies **cannot** be used to access a slice, in particular as described
in clause 5.7 \"how to select a particular cell that can be used to access the
network slice(s) when the operator manages a different range of radio
spectrums per network slice\".
\- Existing (Rel-15/16) 5GS behaviour is that when the UE attempts to
simultaneously register with slices that are not available in a common
operating band, it is assumed that the some requested slices will be not
allowed based on the network policies. The UE then can retry with a different
Requested NSSAI if the current Allowed NSSAI is not suitable for its needs.
This can result in several trials and errors till a stable state between UE
and network is achieved. Or, if the S-NSSAI not allowed is provided as a
Rejected S-NSSAI for the RA, the UE may wait to request the S-NSSAI until the
UE moves out of the RA.
The following conclusions are agreed:
\- The following is assumed e.g. to support legacy UEs:
\- all cells of a tracking area support the same S-NSSAI(s); and
\- the S-NSSAI(s) of the Allowed NSSAI are supported by all tracking areas in
a registration area.
\- To enable the possibility where certain frequencies, supported by the
network i.e. PLMN or SNPN, **cannot** be used to access a network slice, a
solution without UE impacts is required as to ensure any UE can be directed
towards a frequency/cell from which the UE can access the network slice.
\- The principles of solution #17/46 are used as basis for network based
solution with no UE impacts. The 5GC may provide to the RAN, in addition to
the Allowed NSSAI as in Rel-16, additional assistance information to steer the
UE to another cell. The assistance information can be at least one of the
rejected S-NSSAIs, the Configured NSSAI, or Target NSSAI and RFSP. This
assistance information allows the RAN to redirect the UE to a cell supporting
network slices not available in a current cell and RA.
NOTE: The details about the assistance information will be decided during the
normative phase.
#