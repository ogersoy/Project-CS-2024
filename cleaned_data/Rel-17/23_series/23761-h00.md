# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
Editor\'s note: This clause will describe the scope for this study item.
With the growing usage of Multi-USIM devices in the market 3GPP is considering
system enhancements that would allow better support of such devices.
This study item will address the objectives listed in the WID (SP-190248).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.304: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) procedures in idle mode\".
[3] 3GPP TS 38.304: \"NR; User Equipment (UE) procedures in idle mode\".
[4] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[5] 3GPP TS 22.101: \"3rd Generation Partnership Project; Technical
Specification Group Services and Systems Aspects; Service aspects; Service
principles\".
[6] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[7] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[8] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[9] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol
specification\".
[10] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[11] 3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) Centralized Services;
Stage 2\".
[12] 3GPP TS 33.501: \"Security architecture and procedures for 5G System\".
[13] IETF RFC 5626: \" Managing Client-Initiated Connections in the Session
Initiation Protocol (SIP)\".
[14] 3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access
Protocol (XCAP) over the Ut interface for Manipulating Supplementary
Services\".
[15] 3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); S1 Application Protocol (S1AP)\".
[16] 3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".
[17] 3GPP TS 23.272: \"Circuit Switched (CS) fallback in Evolved Packet System
(EPS); Stage 2\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply. An abbreviation defined in the present document takes precedence
over the definition of the same abbreviation, if any, in TR 21.905 [1].
# 4 Architectural Requirements and Assumptions
## 4.1 Architectural Requirements
The following architectural requirements apply:
\- The 3GPP system shall treat each registration from the USIMs of a Multi-
USIM devices independently.
\- Each registered USIM in a Multi-USIM device shall be associated with a
dedicated IMEI/PEI.
\- GSM, UMTS are out of scope.
\- End-user\'s determination on whether to have on-going service and/or
incoming service is controlled by user.
\- An Emergency call related to one USIM for a multi-USIM device shall not be
interrupted by the system autonomously without the calling or called party
initiating the interruption, i.e. emergency calls related to one USIM shall
not be interrupted autonomously by the system due to services for another
USIM.
\- Solutions shall build on the 5G System architectural principles as in TS
23.501 [4], including flexibility and modularity for newly introduced
functionalities.
## 4.2 Architectural Assumptions
The following architectural assumptions apply:
\- The study shall focus on Dual-USIM devices, the expectation being that the
enablers for Dual-USIM devices will also apply to Multi-USIM devices.
\- The study shall consider all of the following cases:
\- UE connected over 3GPP Access with EPS on one USIM and 5GS on the other
USIM.
\- UE connected over 3GPP Access with EPS on both USIMs.
\- UE connected over 3GPP Access with 5GS on both USIMs.
NOTE 1: The use of \"3GPP Access\" above is related to issues that can occur
due to concurrent transmission and/or reception in Multi-USIM device via two
or more 3GPP RATs.
\- Specific to Dual-USIM devices the study shall focus on Single Rx / Single
Tx UEs and Dual Rx / Single Tx UEs.
NOTE 2: Dual Rx allows the Dual-USIM device to simultaneously receive traffic
from two networks. Single Rx allows the Dual-USIM device to receive traffic
from one network at one time. Single Tx allows the Dual-USIM device to
transmit traffic to one network at one time.
\- The Multi-USIM device shall handle Emergency calls using clause 10.9 of TS
22.101 [5] as a basis.
\- The problem statement is common to 5GS and EPS, but the solutions for 5GS
and EPS need not be the same.
\- The system enablers for Multi-USIM devices are expected to apply for the
cases where the multiple USIMs are owned by the same or by different MNOs.
NOTE 3: While the solutions developed as part of this study might also be
applicable to DR-mode (single USIM) interworking between 5GS and EPS, 5GS-EPS
interworking use cases with DR-mode (single USIM) are considered outside the
scope of this study.
\- The solutions shall not require network coordination for the case where the
multiple USIMs in the Multi-USIM device are served by different serving
networks.
\- A multi-USIM device with different USIMs may be camping with all USIMs on
the same serving network RAN node, or it may be camping on different serving
networks RAN nodes.
\- For a multi-USIM device, the solutions may require in-device co-ordination
between the UEs represented by each USIM within the multi-USIM device. The
mechanism for in-device co-ordination shall be left for the multi-USIM device
implementation.
\- MUSIM features requiring new UE-network interactions are optional, hence
the UE may use MUSIM features requiring new UE-network interactions in one
PLMN when it has learnt that this PLMN supports these MUSIM features.
# 5 Key Issues
## 5.1 Key Issue 1: Handling of Mobile Terminated service with Multi-USIM
device
### 5.1.1 Description
Consider a Multi-USIM device that has concurrent registrations over 3GPP RAT
associated with multiple USIMs.
While actively communicating with the system associated with one USIM
(\"current system\"), the Multi-USIM device may need to perform some activity
(e.g. listen to paging, respond to paging, perform mobility update etc.) in
the other system(s). While the Multi-USIM device communicates with another
system, there may be interruption to the ongoing services in the current
system.
The present key issue shall study:
\- How to handle the MT service for a Multi-USIM device with the aim of
avoiding any unnecessary interruptions of the service in the current system
and saving system resources.
\- How to prevent the other system, which triggered the paging message, from
performing undesirable operations (e.g. wasting resources, reaching misleading
assumption of reachability, etc.).
\- Solutions shall be studied for both EPS and 5GS. For 5GS, the solutions
shall consider the cases where the Multi-USIM device in the current system is
in either IDLE state or RRC Inactive state.
## 5.2 Key Issue 2: Enabling Paging Reception for Multi-USIM Device
### 5.2.1 Description
Paging Occasions (POs) are calculated based on the UE identifier i.e. IMSI and
5G-S-TMSI for EPS and 5GS, respectively. The formulae for determination of the
POs are specified in TS 36.304 [2] and TS 38.304 [3] for E-UTRA and NR,
respectively.
Multi-USIM device that is unable to simultaneously monitor paging on all 3GPP
RATs and systems in which it is in Idle state or RRC_Inactive state (for 5GS)
needs to make a choice of the paging channel(s) to monitor which can lead to
unsuccessful paging on the other paging channel(s). In some cases the UE
identifier values associated with the different USIMs can lead to systematic
collisions which may result in corresponding missed pages. The present key
issue shall study:
\- How the system can enable operation when the paging associated with the
3GPP RATs and systems in which the Multi-USIM device is in Idle state or
RRC_Inactive state (for 5GS) overlap in time?
NOTE 1: The exact timing of paging on the radio interface is managed by RAN,
therefore coordination with the RAN Groups will be necessary.
\- Whether and how the network needs to be aware of specific UE communication
constraints (e.g. Single Rx) in order to enable the Multi-USIM device to
receive paging for each of the registered USIMs?
The solutions for enabling receiving paging for each of the registered USIMs
in 5GS and EPS may not be based on the same principles.
NOTE 2: For this key issue, coordination with RAN WGs is needed for final
solution decision. No E-UTRA radio interface impact is expected in RAN WGs.
## 5.3 Key Issue 3: Coordinated leaving for Multi-USIM device
### 5.3.1 Description
Consider a Multi-USIM device that has concurrent registrations associated with
several USIMs. While actively communicating with the system associated with
one USIM (the \"current system\"), the Multi-USIM device determines that it
needs to perform some activity in the system associated with another USIM
(e.g. respond to a page, or perform mobility update).
Today, in the absence of any procedure for notifying the network the Multi-
USIM device may autonomously leave or release the RRC connection with the
current system. This is likely to be interpreted as an error case by the
current system and has the potential to distort the statistics in the current
system, and misguide the algorithms that rely on them. Moreover, during the
Multi-USIM device\'s absence from the current system, if the UE cannot receive
downlink data or process the paging from the current system, it may result in
waste of resources. The present key issue shall study:
\- How to enable a Multi-USIM device to leave the current 3GPP system in
coordination with the network while avoiding wasting the network resource
during the leave.
\- How the network handles MT data or MT control-plane activity occurring when
Multi-USIM device has left?
NOTE 1: Any privacy implications of implicitly indicating to the MNO owning
one USIM that the UE is also using another USIM (potentially owned by another
MNO) will be studied by SA WG3.
NOTE 2: For this key issue, coordination with RAN WGs is needed for final
solution decision. No E-UTRA radio interface impact is expected in RAN WGs.
## 5.4 Key Issue 4: Emergency handling of MUSIM UE
### 5.4.1 General Description
TS 22.101 [5] defines the necessary requirements for and handling of Emergency
services for a MUSIM UE. As a result, the present TR need not address
Emergency services.
NOTE: Whether changes to Stage 2 TS are needed will be addressed in the
potential normative phase.
# 6 Solutions
Editor\'s note: This clause is intended to document the agreed architecture
solutions. Each solution should clearly describe which of the key issues it
covers and how.
## 6.0 Mapping Solutions to Key Issues
Table 6.0-1: Mapping of Solutions to Key Issues
              Key Issues
* * *
Solutions 1 2 3 4 1 X  
2 X  
3 X  
4 X  
5 X  
6 X  
7 X X  
8 X  
9 X  
10 X  
11 X  
12 X X  
13 X  
14 X  
15 X  
16 X  
17 X X  
18 X  
19 X  
20 X  
21 X  
22 X  
23 X X  
24 X X  
25 X X  
26 X X  
27 X X  
28 X
## 6.1 Solution #1: Handling of MT service with Paging Cause
### 6.1.1 Introduction
The solution applies to Key Issue #1 \"Handling of MT service\".
The solution applies to both 5GS (UE in either CM_IDLE or RRC_Inactive state)
and EPS (UE in CM_IDLE state only).
### 6.1.2 Functional Description
The solution is based on a Paging Cause that is delivered to the UE as part of
the [Uu] Paging message.
NOTE 1: The granularity of the paging information in the Paging Cause will be
coordinated with SA WG1 input, if needed.
NOTE 2: In this release, only the operator managed services, e.g. IMS voice,
is considered to be indicated in paging cause and only standardized values are
used for the Paging Cause. This does not preclude the use of a specific Paging
Cause value for \"Other\" services.
_Based on the Paging Cause and the service preferences configured by the user
or a pre-configured logic specific to the Multi-USIM device (and out of 3GPP
scope), the Multi-USIM device that is actively engaged in communication
associated with another USIM can decide whether to present the mobile
terminated service that triggered the paging to the user._
NOTE 3: An example of pre-configured logic in the Multi-USIM device is as
follows: MT service of \"voice\" type arriving on USIM A is always presented
to the user unless the user is engaged in \"voice\" service on USIM B.
Another example of pre-configured logic is as follows: MT service of \"voice\"
type arriving on USIM A is presented to the user even if the user is engaged
in \"voice\" service on USIM B (e.g. because USIM A is a business
subscription).
Another example of pre-configured logic is as follows: MT service of \"SMS\"
type arriving on USIM A can trigger the device to respond to respond to paging
regardless of the ongoing service on USIM B (e.g. because the interruption to
the ongoing service on USIM B due to picking up of a MT SMS on USIM A is
deemed acceptable by the user.
For a UE in CM_IDLE state:
\- For MT user plane traffic as part of the Network Triggered Service Request
procedure, and if Paging Policy Differentiation (PPD) applies, the SMF
determines Paging Policy Indicator (PPI) and optionally determines a Paging
Cause value based on the DSCP received from the UPF. The SMF includes the
Paging Cause, along with the PPI, the ARP and the 5QI of the corresponding QoS
Flow, in the N11 message sent to the AMF. The AMF uses this information to
derive a paging strategy and sends paging messages to NG-RAN over N2. The AMF
shall forward the Paging Cause in the PAGING message to NG-RAN if it was
received from the SMF.
Editor\'s note: Whether exposing the Paging Cause in clear poses as security
issue will be determined by SA WG3.
NOTE: It will be determined whether the Paging Cause can be used only for UEs
that have requested MUSIM assistance or unconditionally. If yes for UEs that
have requested MUSIM assistance, it will be further determined whether AMF
indicates the UE request for paging cause to the SMF.
\- For MT control plane traffic (e.g. MT SMS over NAS, or NAS signalling) the
AMF derives the paging strategy and Paging Cause based on the type of MT
control plane traffic and forwards the Paging Cause in the PAGING message to
NG-RAN.
For a UE in RRC_Inactive state:
\- For MT user plane traffic the SMF instructs the UPF to detect the DSCP in
the TOS (IPv4) / TC (IPv6) value in the IP header of the DL PDU and to
transfer the corresponding PPI and optionally the Paging Cause in the CN
tunnel header (by using a FAR with the PPI and Paging Cause value). The NG-RAN
can then utilize the PPI received in the CN tunnel header of an incoming DL
PDU in order to apply the corresponding paging policy for the case the UE
needs to be paged when in RRC Inactive state. If the Paging Cause was included
in the CN tunnel header of an incoming DL PDU the NG-RAN forwards the Paging
Cause to the UE for the case the UE needs to be paged when in RRC Inactive
state.
NOTE 3: The Paging Cause is included in the CN tunnel header in all data
packets.
\- For MT control plane traffic (e.g. MT SMS over NAS, or NAS signalling) the
AMF derives the Paging Cause based on the type of MT control plane traffic and
forwards the Paging Cause in the DOWNLINK NAS TRANSPORT message to NG-RAN.
The solution can also be used in EPS with the following changes:
\- It applies to UE in CM_IDLE only.
\- AMF, SMF and UPF in the description above are replaced with MME, SGW-C and
SGW-U, respectively.
### 6.1.3 Procedures
#### 6.1.3.1 Handling of MT service with Paging Cause for UE in CM_Idle in 5GS
The solution has impact on the Network Triggered Service Request procedure in
clause 4.2.3.3 of TS 23.502 [6]. The changes relative to the existing
procedure are indicated in bold underlined text. Only the impacted steps are
shown.
Figure 6.1.3.1-1: Network Triggered Service Request (based on TS 23.502 [6]
Figure 4.2.3.3-1)
_2c. The UPF forwards the downlink data packets towards the SMF if the SMF
instructed the UPF to do so (i.e. the SMF will buffer the data packets)._
_\- If the Paging Policy Differentiation feature is supported by the SMF and
if the PDU Session type is IP, the SMF determines the Paging Policy Indicator_
_[and optionally a Paging Cause]{.underline}__based on the DSCP in TOS (IPv4)
/ TC (IPv6) value from the IP header of the received downlink data packet and
identifies the corresponding QoS Flow from the QFI of the received DL data
packet._
_3a. [Conditional] SMF to AMF: Namf_Communication_N1N2MessageTransfer (SUPI,
PDU Session ID, N1 SM container (SM message), N2 SM information (QFI(s), QoS
profile(s), CN N3 Tunnel Info, S-NSSAI), Area of validity for N2 SM
information, ARP, Paging Policy Indicator,__[Paging Cause]{.underline}__, 5QI,
N1N2TransferFailure Notification Target Address, Extended Buffering support),
or NF to AMF: Namf_Communication_N1N2MessageTransfer (SUPI, N1 message)._
_[...]_
_When supporting Paging Policy Differentiation, the SMF determines the Paging
Policy Indicator_ _[and may also determine a Paging
Cause]{.underline}__related to the downlink data that has been received from
the UPF or triggered the Data Notification message, based on the DSCP as
described in TS 23.501 [4] clause 5.4.3, and indicates the Paging Policy
Indicator_ _[and the Paging Cause]{.underline}__in the
Namf_Communication_N1N2MessageTransfer._
_4b. [Conditional] If the UE is in CM-IDLE state in 3GPP access and the PDU
Session ID received from the SMF in step 3a has been associated with 3GPP
access and based on local policy the AMF decides to notify the UE through 3GPP
access even when UE is in CM-CONNECTED state for non-3GPP access, the AMF may
send a Paging message to NG-RAN node(s) via 3GPP access_ _[including the
Paging Cause provided by the SMF]{.underline}__. If the Paging Cause is not
provided by the SMF, the AMF may determine a Paging Cause based on_
HPLMN/DNN/5QI configuration and the ARP/PPI received from the SMF _._
_4c. If the UE is simultaneously registered over 3GPP and non-3GPP accesses in
the same PLMN, and the UE is in CM-CONNECTED state for non-3GPP access and in
CM-IDLE for 3GPP access,__the AMF may decide to send the NAS Notification
message containing the 3GPP Access Type to the UE over non-3GPP access
including the Paging Cause_ _._
_4d. If the UE is simultaneously registered over 3GPP and non-3GPP accesses in
the same PLMN, and the UE is in CM-CONNECTED state for non-3GPP access and in
CM-IDLE for 3GPP access_ _[and if the UE decides to not accept the incoming
service the UE shall respond with NAS Notification response message over the
non-3GPP access to indicate the same to the network.]{.underline}_ **
_6\. The UE may choose to respond to paging or NAS notification message based
on paging cause value or access type value (i.e._ paging message indicates
paging request is for a PDU Session associated to non-3GPP access _) by
executing service request procedure._
#### 6.1.3.2 Handling of MT service with Paging Cause in RRC_Inactive mode
Figure 6.1.3.2-1is the call flow of handling of MT service with Paging Cause
in RRC_Inactive mode.
Figure 6.1.3.2-1 Handling of MT service with Paging Cause in RRC_Inactive mode
1\. NG-RAN receives the DL data (control plane data and/or user plane data) in
RRC_Inactive mode. If handling of MT service with Paging Cause is supported by
NG-RAN, NG-RAN determines the Paging Cause based on the Paging Cause field
included in the CN tunnel header of an incoming DL PDU. Alternatively, the NG-
RAN determines the Paging Cause based on specific 5QI and ARP of the QoS flows
for the downlink data packet and the corresponding PPI in the CN tunnel
header.
NG-RAN sends the paging message with the Paging Cause.
#### 6.1.3.3 Handling of MT service with Paging Cause in EPS
Figure 6.1.3.3-1 is handling of MT service with Paging Cause in EPS.
Figure 6.1.3.3-1: Handling of MT service with Paging Cause in EPS
1\. If the handling of MT service with Paging Cause is supported by Serving
GW, Serving GW determines the Paging Cause based on DSCP in TOS (IPv4)/TC
(IPv6) value from the IP header of the downlink data packet. Alternatively, if
the Serving GW supports the Paging Policy Differentiation feature, then the
Serving GW unconditionally, for each bearer and for each packet of PDN type
IPv4, IPv6 or IPv4v6 that triggers a Downlink Data Notification, sends the
DSCP in TOS (IPv4) / TC (IPv6) information received in the IP payload of the
GTP-U packet from the PDN GW in the Paging Policy Indication in the Downlink
Data Notification.
2\. SGW includes the Paging Cause in the DDN message sent from SGW to MME. If
the Paging Cause is not received, but the Paging Policy Indication is
received, the MME determines the Paging Cause taking the configuration for
that HPLMN and/or APN and/or QCI into account.
For mobile terminating signalling and SMS over NAS, the MME determines an
appropriate Paging Cause.
3\. MME sends S1 paging message by including the Paging Cause information.
4\. RAN sends the paging message with Paging Cause.
#### 6.1.3.4 Paging Cause values
Editor\'s note: This list is just an example and not capturing a consensus-
based agreement on the exact causes.
Editor\'s note: It shall be decided whether allow for non-uniform support in
the RAN of the PLMN, which is pending to feedback from RAN WGs.
Editor\'s note: The anticipated use of each paging cause and how it addresses
the KI will be documented, so that the solution can be fully evaluated.
Table 6.1.3.4-1: Paging cause value mapping
Paging Cause value Type of downlink traffic
* * *
1 Voice service
Table 6.1.3.4-1 provides a Paging cause value mapping for the type of downlink
traffic.
Editor\'s note: Other Paging Cause values are FFS.
NOTE: The mechanism UE determines the current network (e.g. the whole PLMN or
the current gNB) supports paging cause or not will be determined.
### 6.1.4 Impacts on services, entities and interfaces
**For 5G:**
AF:
\- P-CSCF sets the DSCP value in the IP header to indicate the traffic type.
SMF:
\- Option 1: the SMF determines Paging Cause based on DSCP value from IP
header and HPLMN/APN/QCI configuration and includes the Paging Cause in DDN
sent to AMF.
\- Option 2: the SMF implements the existing, optional, Paging Policy
Differentiation feature.
UPF:
\- Option 1: the UPF determines Paging Cause based on DSCP value from IP
header and HPLMN/APN/QCI configuration and includes the Paging Cause in the
GTP-U tunnel header.
\- Option 2: the UPF implements the existing, optional, Paging Policy
Differentiation feature.
AMF:
\- determines the Paging Cause for NAS SMS and MT control plane traffic.
\- For user plane traffic:
\- Option 1: the AMF receives the Paging Cause from the SMF.
\- Option 2: the AMF determines a Paging Cause based on HPLMN/DNN/5QI
configuration and the ARP/PPI received from the SMF.
\- sends the N2 paging signalling with Paging Cause for all the UE; or sends
Paging Cause only for the UEs indicating request for Paging Cause or send the
NAS notification message over non-3GPP access if UE is registered with both
3GPP access and non-3GPP access on same PLMN. The AMF stores the UE request
for paging cause in the UE context, if received.
NG-RAN:
\- sends the paging message with Paging Cause.
\- in RRC_Inactive mode:
\- Option 1: NG-RAN determines the Paging Cause based on the Paging Cause
field included in the CN tunnel header of an incoming DL PDU.
\- Option 2: NG-RAN determines the Paging Cause based on specific 5QI and ARP
of the QoS flows for the downlink data packet and the corresponding PPI in the
CN tunnel header.
UE:
\- sends request for paging cause (for the option where Paging Cause is sent
only to device who indicate request for paging cause).
\- receives paging message with the Paging Cause information.
\- UE makes a decision whether to respond to paging or incoming NOTIFICATION
message (over non-3GPP access) based on paging cause or access type.
\- If UE decides not to respond to incoming request based on paging cause and
if UE is registered on both 3GPP access and non-3GPP access then UE shall
respond with NAS NOTIFICATION response message indicating its inability to
initiate service request procedure.
NOTE 1: Option 2 has no impact on SMF and UPF, but supports a limited number
of Paging Causes.
**For EPS:**
SGW:
\- Option 1: the SGW determines Paging Cause based on DSCP value from IP
header and HPLMN/APN/QCI configuration and includes the Paging Cause in DDN
sent to MME.
\- Option 2: the SGW implements the existing, optional, Paging Policy
Differentiation feature.
MME:
\- determines the Paging Cause for NAS SMS and MT control plane traffic.
\- For user plane traffic:
\- Option 1: the MME receives the Paging Cause from the SGW.
\- Option 2: the MME determines a Paging Cause based on HPLMN/APN/QCI
configuration and the ARP/PPI received in DNN.
\- sends the S1 paging signalling with Paging Cause for all the UE; or sends
Paging Cause only for the UEs indicating request for Paging Cause. The MME
stores the UE request for paging cause in the UE context, if received.
eNB:
\- sends the paging message with Paging Cause.
UE:
\- sends request for paging cause (for the option where Paging Cause is sent
only to device who indicate request for paging cause).
\- receives paging message with the Paging Cause information.
\- UE makes a decision whether to respond to paging based on paging cause.
## 6.2 Solution #2: Negotiated Short Period Absence
### 6.2.1 Introduction
This is a solution for Key Issue 1 Handling of Mobile Terminated service with
Multi-USIM device. This solution avoids any unaware interruptions of the
service in the current system, saves system resources, and prevents the other
system, which triggered the Paging, from performing undesirable operations on
the UE/the other USIM.
This solution is applicable to any UE that needs assistance to perform
operations on another network while connected to another.
### 6.2.2 Functional Description
This solution provides a mechanism to enable paging response for one USIM when
there are on-going services in the other USIMs for MUSIM UE.
The MUSIM UE negotiates a single short period of absence from the serving RAN
(USIM1) of current system. During the negotiated single short period of
absence, service specific data packets are transferred that allow a
determination of which service is preferred.
The negotiated single short period absence may also cover other IDLE/INACTIVE
mode MO \"light\" signalling such as TAU/RAU and RNAU on USIM B.
During the negotiated short period of absence, the UE may be in RRC_INACTIVE
state on the network the absence has been negotiated with. MT traffic during
the absence maybe delayed or discard based on, e.g. the QoS requirements for
the MT data. The duration of the negotiated short absence may be the same
length. If the UE returns before the period of absence expires, the UE signals
to network when it returns. If the UE does not return at the end of the
negotiated absence, then the network that the absence was negotiated with
assumes the UE has an ongoing service with the other network.
The solution to negotiate an absence may be used by E-UTRA or NR.
Editor\'s note: Confirmation from RAN WG2 is needed whether negotiated short
period absence for E-UTRA is in scope.
Editor\'s note: The detailed negotiation of the short period and an early
return request should be discussed and determined by RAN WGs and requires
their feedback.
### 6.2.3 Procedures
#### 6.2.3.1 Responding to Paging
The overall procedure below shows different examples of the UE selecting a
network, leaving the non-selected network and using or continuing to use the
selected network. Figure 6.2.3.1-1 shows the example of the UE determining to
continue with Network A, and the changing to Network B.
Figure 6.2.3.1-1: Selecting Network A or Network B
0\. UE is in CM_CONNECTED with Network A and is monitoring paging in Network
B.
1\. The UE is paged by Network B.
2\. The UE negotiates a one-off single short period of absence with Network
A\'s RAN to allow the UE to respond to paging from Network B.
RAN WGs will determine the details of the procedure used for absence
negotiation between UE and RAN, and the RRC state in network A.
3\. The UE responds to the paging from Network B. During the response to
paging the UE and Network B exchange service specific data packets which allow
the choice of service. After receiving the service specific packets the UE
starts its determination of which network to use.
4\. The UE determines which network service to use, either, continue with
Network A or use the services of Network B.
Editor\'s note: The service level interaction with Network B when determining
which service is preferred are FFS.
5\. [Conditional] If the UE determines to continue to use Network A, then
optionally in order to avoid wasting resources and to be able to return to
Network A before the end of the negotiated absence the UE can use the solution
to KI#3 to leave Network B and continue with its connection in Network A.
6\. If the UE determines to continue using Network A, then the UE continues
with Network A services and monitor the paging from Network B, matching the
preconditions in Step 0.
If the UE determines to use Network B then the preconditions in Step 0 are met
but with the roles of Network A and Network B reversed. When the Network A
detects that the UE does not return at the end of the negotiated absence, then
Network A determines that the UE chose to continue with the service on Network
B (i.e. an implicit signalling coordinated leave occurred). The Network A RRC
connection is autonomously released by RAN and the UE (i.e. without signalling
over the Uu interface).
### 6.2.4 Impacts on services, entities and interfaces
UE:
\- Request and use short period absence on the air interface (RAN only
impact).
RAN:
\- Assignment and use of short period absence on the air interface (RAN only
impact).
5GC:
\- None.
## 6.3 Solution #3: Busy indication as a paging response
### 6.3.1 Introduction
This solution relates the KI#1 and proposes a solution how to handle MT
service in case that the MultiSIM device judge the ongoing connection in the
other system more important. Assuming that, multi-USIM devices can efficiently
perform some activity (e.g. listen to paging, respond to paging, perform
mobility update etc.) in a system while communicating in another system, how
this is done is not part of this solution. Responding to the page is important
for the network, since it would allow the network to save paging resources as
a result of not escalating the page across a larger area. This solution
proposes a solution allowing the UE to send a busy indication to the network
as a response to a page.
### 6.3.2 Functional Description
This solution addresses KI#1 and assumes that solutions for KI#3 will be
selected. The solution is described as a MultiSIM device with two USIM A and
B. That corresponds to two UEs, UE A and UE B. The following principles are
used:
\- The procedure \"Busy indication as a paging response\" with network B is
based on the periodic absence time with network A. The periodic absence time
should be short enough and acceptable for the ongoing service associated with
UE A in the multi-USIM device.
NOTE: The time spent for the procedure \"Busy indication as a paging
response\" should be estimated to see whether the periodic absence time is
enough to perform the procedure \"Busy indication as a paging response\".
\- When the UE A is in RRC_CONNECTED it may use implementation specific method
to achieve a periodic absence in system A or it may request a periodic absence
time in RAN serving the UE A. The absence time requested coincides to when UE
B (which is in RRC-IDLE or RRC-Inactive) monitors paging occasions. During the
absence time, UE A is still in RRC-CONNECTED, but does not need to e.g.
monitor the control channel to detect whether downlink data is scheduled for
delivery.
\- If UE B identity is not part of the paging message, UE B can go back to
sleep.
\- If the UE B identity is part of the paging message, the MultiSIM device may
need to decide which communication is most important (UE A or UE B). This
decision can be done based on implementation in the device and may take into
account e.g. an already ongoing high priority communication for UE A and/or if
the UE B receives Network Assistance Information when paged and other
information.
Editor\'s note: Whether a solution for providing Network Assistance
Information when the UE is paged will be concluded later during this study.
\- If, at this moment, the MuSIM device decided not to setup the communication
for UE B service since the ongoing communication on UE A is more preferred, UE
B instead sends a NAS message to the network that it is currently busy, e.g. a
new cause value \"busy\" in the Service Request. The RAN node forwards the NAS
Service Request including the busy indication to the AMF using a N2 message.
\- When the AMF receives the cause value \"busy\", it can stop paging the UE B
and the corresponding paging escalation.
\- In case the UE B was in RRC-Inactive, then the RAN node will not need to
forward the busy indication to the AMF.
\- The network may store the MT traffic until UE B connects.
NOTE: During the normative phase SA WG2 can decide whether the Network may
apply a set of rules as discussed in solution #10, \"Network based paging
filtering\" or solution#5, \"Graceful leaving and resumption solutions\" and
whether the UE includes a busy time value together with the busy indication or
not.
### 6.3.3 Procedures
The procedure below assumes that UE A can pause the RRC-connection in a
periodic manner allowing UE B to perform page monitoring.
Figure 6.3.3-1: Procedure for the UE to send a busy indication as a paging
response
0\. A multi-USIM device with two USIM has the following states; UE A (USIM A)
is in connected mode and UE B (USIM B) is in idle mode. UE A may have
negotiated a periodic absence time allowing the MultiSIM device to perform
activities related to other USIMs.
1\. UE A enters a periodic absence time that allows UE B to monitor a
scheduled paging occasion and send a busy response.
2\. The AMF serving the UE B sends a N2 paging request message to RAN B.
3\. RAN B page UE B.
4\. UE B receives the page i.e. decodes the paging message and the associated
Network Assistance Information. The device evaluates which connection is more
important. The decision is based on implementation in the device and may take
into account the Network Assistance Information, what type of ongoing
communication and other information.
a. The MultiSIM device decides that UE B communication is more important and
decides to leave UE A connection according to solutions selected for KI#3.
This is not shown in this procedure.
b. The device decides that the UE A connection is more important and steps 5
to 8 follow.
5\. UE B performs Random Access procedure and sends a NAS Service Request
towards the AMF with the new cause value \"busy\" which indicates that the UE
has received the paging message but is not able to setup the communication for
UE B service.
NOTE 1: It is assumed that the UE can decode the paging message and respond
with the busy indication within a short time. The assumption is based on that
the preparation phase before performing the Random Access has already been
done when monitoring the paging occasion, and the time to execute msg1 to msg5
in the Random Access Procedure is less than 100ms.
6\. RAN B forwards the NAS Service Request message to the AMF.
7\. The AMF, based on the cause value \"busy\" in the Service Request, stops
paging escalation and paging repetition to the UE B and informs the network
node that triggered the Network Triggered Service Request procedure. The
failure cause in the Namf_Communication_N1N2MessageTransfer response indicates
that the N1 transfer failed, but the UE is still reachable.
NOTE 2: The new failure cause needs to be detailed so later MT triggered
services still triggers new paging events for the UE. New DL data on same or
other QoS Flow can trigger paging after the above mentioned N1 failure
response.
8\. NAS service request is accepted.
9\. RAN forwards the NAS Service accept to the UE.
10-13. The AMF shall further provide a new 5G-GUTI to UE.
14\. AMF sends N2 release after receiving 5G-GUTI ACK from UE.
15\. RAN release the UE.
NOTE 3: The procedure from step 8-15 are for conceptual illustrative purposes.
It is decided by CT WG1 and RAN WG2 if any optimization of these steps is
feasible. For instance, step 15 may not be needed and (8,10) and (9,11) may be
combined.
### 6.3.4 Impacts on services, entities and interfaces
UE:
\- Support sending a busy indication.
AMF:
\- Support receiving a busy indication as a response to the N2 paging request
message sent to RAN.
NOTE: The response could either be in the Service Request cause value or in
the N2 message, depending on potential RAN enhancements.
\- New response to SMF to indicate N1 transfer failed, but UE is still
reachable
SMF:
\- Handle the new response code from the AMF.
RAN:
\- None, if the Release/Suspend/Resume methods are reused for pausing the
connection for UE A and if the busy indication is sent as NAS service request
cause value.
\- Optionally: If RAN decides to enhance the operation, then possible
enhancement may be developed:
\- It is up to RAN WG1 and RAN WG2 to consider whether and how a UE may
request to pause an existing RRC connection e.g. similar to measurement gaps
for making inter-frequency and inter-RAT measurements. The gap should be a
short as possible to minimize the interruption of UE A connection.
\- It is up to RAN WG2 to consider whether the busy indication should be
included in the RRC Connection Establishment request cause value.
\- New busy indication received in RRC message shall be forwarded in the N2
message to the AMF.
SMF:
\- none.
UPF:
\- none.
## 6.4 Solution #4: Local leaving
### 6.4.1 Introduction
This solution relates the KI#3 Coordinated leaving for Multi-USIM device. A
local leaving mechanism is proposed to avoid network resource waste and to
ensure synchronization between the UE and the network. The resource is local
released on UE side and network side triggered by UE with a specific
indication for local leaving.
### 6.4.2 Functional Description
This solution provides a mechanism for the UE to indicate the network at NAS
that the multi-USIM device is switching from the current system to another
system, and thus the resources for this UE shall be released. The indication
is provided by the UE in UL NAS TRANSPORT (5GS) / UPLINK GENERIC NAS TRANSPORT
(EPS). This mechanism applies to both EPS and 5GS.
\- After sending the indication, the UE locally releases the RRC connection
and enters into RRC_IDLE state and CM_IDLE / ECM_IDLE state.
\- Upon receipt of the indication from the UE, the AMF (5GC) or MME (EPC)
triggers the AN Release procedure (5GS) or S1 Release procedure (EPS) with a
specific cause value in the N2 UE Release Context Command (5GS) or S1-AP:S1 UE
Context Release Command (EPS) sent to RAN.
\- Upon receipt of the specific cause value, RAN triggers the local release of
the RRC connection and notifies the AMF (5GC) or MME (EPC).
\- The AMF (5GC) or MME (EPC) proceeds with the residual steps of AN Release
Procedure (5GS) or S1 Release procedure (EPS) as specified in TS 23.501 [4]
(5GC) and TS 23.401 [7] (EPC).
NOTE: The mechanism above ensures no handshake between the UE and the network
is required, thus minimizing the time required for the UE to switch to the
other system from the moment the UE decides to leave the current system.
This solution also provides a mechanism for the UE to negotiate the local
leaving configuration with the network in advance. When the UE indicates local
leaving to the network, both the network and the UE performs local release RRC
connection or local suspend the RRC connection based on the local leaving
configuration. When the local leaving is negotiated via RRC signalling, the
mechanism applies to 5GS with NR access.
### 6.4.3 Procedures
#### 6.4.3.1 Procedure for local release based on the UE leaving indicated via
NAS message
Figure 6.4.3.1-1: local Release triggered via NAS
1\. The UE determines to leave the current system.
2\. Subject to network support, the UE sends an UL NAS TRANSPORT message (5GS)
or UPLINK GENERIC NAS TRANSPORT (EPS) with a local leaving indication to the
network.
Editor\'s note: How network support is indicated to the UE is FFS.
3\. After sending the local leaving indication to the network, the UE locally
releases RRC connection and enters RRC_IDLE state, CM-IDLE/ECM-IDLE state as
specified in clause 5.3.9 of TS 36.331 [8] (LTE) or clause 5.3.9 of TS 38.331
[9] (NR).
Editor\'s note: It is FFS whether the UE needs to maintain a timer after
sending the release request indication to initiate local RRC release.
4\. Upon receipt of the local leaving indication, the AMF/MME sends an N2 UE
Release Context Command (5GS) or an S1-AP:S1 UE Context Release Command (EPS)
with a specific cause value to RAN.
5\. Upon receipt of the specific cause value RAN initiates local resource
release.
6\. After the resources are released, RAN sends an N2 UE Release Context
Complete (5GS) or an S1-AP:S1 UE Context Release Complete (EPS) to the
AMF/MME.
7\. [Optional] The AMF/MME may send an N2 message (5GS) or a Modify Bearer
Request (EPS) with a specific cause value to the SMF/PGW which decides the
handling of PDU sessions/PDN connections accordingly.
Editor\'s note: AS support for the above is subject to RAN WG confirmation.
#### 6.4.3.2 Procedure for Local leaving negotiation with RAN
Figure 6.4.3.2-1: Local leaving negotiation with RAN
1\. When the UE detects it is in MUSIM, it triggers the local leaving
configuration negotiation with the RAN in advance, in order to support the
possible leaving subsequently. The UE indicates the local leaving
configuration request to the RAN via RRC message.
2a-2b. The RAN determines whether the UE should locally release or suspend the
RRC connection when the UE requests leaving. According to operator policy, the
RAN responses the local leaving configuration to the UE, indicating either
local release or locally suspend when the UE leaves the network. For local
suspend, the RAN additionally provides the suspend configuration to the UE as
well. The local leaving configuration is stored in the UE context in the RAN.
During UE mobility in connected more, the UE context is forwarded from the
source RAN to the target RAN. The target RAN can decide whether update the
local leaving configuration (e.g. suspend configuration) to the UE based on
local leaving configuration in the UE context and operator policy at the RAN
side.
#### 6.4.3.3 Procedure for local leaving indicated via RRC message
Figure 6.4.3.3-1: local leaving
1\. The UE decides to immediate leave the network (e.g. due to the more
preferred service at another network and the service is not delay tolerant).
2\. The UE notifies the local leaving to the RAN. After sending the local
leaving indication, the UE turns into RRC_IDLE or RRC_INACTIVE according to
the local leaving configuration received before, as defined in clause 6.4.3.1.
3\. Upon reception of the local leaving indication, based on the local leaving
configuration, the RAN also local release or suspend the UE\'s RRC connection
as shown in 3a and 3b respectively.
### 6.4.4 Impacts on services, entities and interfaces
Impact for local release based on the UE leaving indicated via NAS message.
UE:
\- Support sending a release request indication at NAS and initiating local
RRC release accordingly.
AMF:
\- Support receiving a release request indication at NAS from the UE and
triggering the necessary resource release procedures (i.e. AN Release
procedure and S1 Release procedure) with a specific cause value in the N2 and
S1 messages.
RAN:
\- Support locally releasing the RRC connections with the UE upon receipt of
the N2 and S1 messages from the AMF and MME in the AN Release and S1 Release
procedures.
SMF:
\- none.
UPF:
\- none.
Editor\'s note: The indication from the UE can trigger different PDU Session
handlings in the core network, but the main point of this solution is to
trigger AN/S1 Release. It is FFS the impacts to the core network entities
based on different PDU Session/PDN connection handlings.
Impact for local release based on the UE leaving indicated via RRC message.
UE
\- Triggers the local leaving configuration negotiation with the RAN.
\- Locally release RRC connection or locally suspend the RRC connection based
on the local leaving configuration, after sending the local leaving indication
to the network via RRC message.
RAN:
\- Provision local leaving configuration to the UE.
\- Locally release RRC connection or locally suspend the RRC connection based
on the local leaving configuration, upon reception of the local leaving
indication from the UE via RRC message.
## 6.5 Solution #5: Graceful leaving and resumption solutions
### 6.5.1 Introduction
The solutions address the key issue 3: Coordinated leaving for multi-USIM
device.
The solution aims to cover the following use cases for various durations of
the UE \"leaving\" the system:
\- The UE leaves for short time duration, e.g. a 100-500 ms, in order to
send/receive an SMS in the target system, e.g. perform periodic
registration/TAU or check the caller identity of incoming call;
\- The UE leaves for long time duration, e.g. a couple of minutes, in order to
make a call in the target system.
Editor\'s note: The short time duration range value is FFS and need to be
synchronized with RAN group and CT WG1.
One design principle of the solution is to minimize the signalling needed for
coordinated leaving (including leaving and return) and to minimize the service
interruption in the source system.
The solution applies to both 5GS and EPS.
### 6.5.2 Functional Description
For the single receiver multi-USIM device, if USIM1 is registered in 3GPP
system (e.g. PLMN 1), and decides to establish connection for USIM 2 in 3GPP
system (e.g. PLMN 2), either for a short stay (e.g. responding a MT service
paging) or possibly a long stay in PLMN 2, the UE(USIM1) informs the PLMN 1
that UE(USIM1) is leaving and PLMN 1 may suspend certain DL services for
UE(USIM1).
The UE/USIM(s) of the multi-USIM device first registered in PLMN(s)
separately.
The leaving procedure can either be initiated at NAS level or at AS level. The
UE(USIM) may provide MUSIM Release assistance Information (MUSIM-RAI) to the
network to assist the network for MT service delivery.
The detailed handling of MT service in the current system after leaving
procedure is described in the procedures in clause 6.5.3 below.
After UE/USIM2 ended the service in PLMN 2, or received notification (e.g.
Paging or NAS level notification) indicating there is a MT service with higher
priority in PLMN 1, the device resumes the service for UE/USIM 1 in PLMN 1.
NOTE: How device will receive MT service notification from PLMN1, is based on
the outcome of the KI 1 and KI 2.
The service resumption procedure can also be done at the NAS level or at AS
level. It can be the normal existing resumption procedures (e.g. NAS service
request or RRC resume).
The solution can be used for both LTE and 5G.
### 6.5.3 Procedures
#### 6.5.3.0 General
NAS procedures are documented in clause 6.5.3.1 (leaving) and 6.5.3.2
(resumption).
AS procedures are documented in clause 6.5.3.3 (leaving) and 6.5.3.4
(resumption).
The UE may determine whether to apply for short leaving (AS or NAS procedure
to suspend the RRC connection) or long leaving (AS or NAS procedure to move to
CM-IDLE mode). The decision may take into account the service type (either
provided to UE in paging request, NAS notification, or realized by UE for MO
service) at the target PLMN, and based on the supported or preferred
capabilities exchanged between UE/USIM and network.
Editor\'s note: It is FFS if both NAS and AS level solution is needed or only
one level solution is needed. The messages and details used in the flow is
also FFS.
After the procedures for leaving, the UE/USIM may end up in either CM-IDLE
mode or RRC Inactive mode.
#### 6.5.3.1 NAS Leaving procedure
##### 6.5.3.1.1 NAS Leaving procedure in 5GS
Figure 6.5.3.1.1-1 is the call flow of NAS Leaving procedure in 5GS in CM-
CONNECTED mode.
Figure 6.5.3.1.1-1: NAS Leaving procedure in 5GS
1\. UE sends NAS Service request to AMF indicating the cause of release. The
UE also optionally provides the release assistance info for MUSIM (MUSIM-RAI),
which includes the following:
\- PDU sessions, services or both that the UE want network to trigger (or not
trigger) MT service delivery indication (the services indicated by the UE is
corresponding to the services related to paging causes in solution 1). If UE
leaves current system for the IMS voice service in the other system, UE may
indicate MT service delivery for certain PDU session, e.g. Internet, in the
current system is not preferred). The UE may also indicate to the network that
no MT data shall be delivered at all (e.g. due to specific service in another
network and can\'t answer paging request).
\- The time period expected by the UE that will be away from this serving
network. Alternatively, the UE may just provide an indication that it is for a
\"short\" leaving (e.g. UE perform some periodic mobility procedure in the
other system. The short leaving period may can be realized by network based on
local configuration), otherwise network may interpret it as a rather long
period leaving.
2\. AMF may respond with NAS Service Accept message. The N2 Message may also
indicate the connection release.
If AMF does not have information to provide to UE, the Service Accept is
optional. The AMF may either use UE context release towards RAN to move UE to
IDLE mode directly or UE context modification towards RAN with release
assistance info and RAN decides to move UE to RRC Inactive, RRC_idle or
Suspend mode as in clause 4.8.1 of TS 23.502 [6].
The UE may conclude the NAS procedure based on the indication from low layer
when RRC connection release is released if no NAS response message is
received.
Editor\'s note: It is FFS if RRC layer need to have specific indication to NAS
that there is no NAS response message.
3\. RAN delivers the NAS message and releases the RRC connection with UE.
In case of UE context modification is received from AMF with release
assistance information, RAN decides if UE moves to RRC Inactive mode, Suspend
mode or RRC_Idle mode based on the policy at RAN and release assistance info
if available.
If RAN decides to move UE to RRC inactive mode, the RAN handles the MT service
as indicated in step 2 of clause 6.5.3.3.1 RRC leaving procedure in 5GS, and
step 4-7 below is not performed.
4\. Based on local policy and MUSIM-RAI provided by UE/USIM in step 1 and
decision from RAN side in step 3 (i.e. UE is moved to RRC_Inactive, Suspend
mode or RRC_IDLE), AMF sends N11 message to SMF indicating the possible N3
tunnel release and also includes the MT data handling info. The MT data
handling info shall include the following:
\- PDU sessions on 3GPP access that may release the N3 tunnels;
\- The possible MT data handling information (either discard/block or normal
MT service delivery handling for certain PDU sessions/services, and optionally
an applicable time period).
5\. Based on the MT data handling info, policy from PCF, DNN/S-NSSAI info in
the subscription or local configuration (e.g. operator may determine that
certain services/PDU sessions will trigger MT service delivery), the SMF
decides how to handle the PDU sessions and informs relevant UPFs.
For example, for PDU session 1, the SMF1 may decides to discard/block the DL
data transmission and send N4 Session Modification request message to UPF1
with data handling instruction information.
6\. Based on the received data handling instruction information, UPF1 keeps
the PDU session context but discard/block the DL data. The UPF1 send a
response message to SMF 1.
7\. The SMF1 sends response message back to AMF.
For a different PDU session, the SMF2 may decide to discard/block the DL data
for certain period. After this period, DL data shall trigger the UPF request
for the N3 tunnel setup as normal when there is no N3 tunnel.
The AMF does not trigger paging to the UE and discard/block any NAS data for
the UE if MUSIM-RAI indicates no MT data delivery at all.
##### 6.5.3.1.2 NAS Leaving procedure in EPS
Figure 6.5.3.1.2-1 is the call flow of NAS leaving procedure in EPS.
Figure 6.5.3.1.2-1: NAS leaving procedure in EPS
1\. UE sends NAS Extended Service request to MME indicating the cause of
release. The UE also optionally provides the MUSIM-RAI which includes the
following:
\- PDN connections or services that the UE want network to trigger (or not
trigger) MT service delivery indication (the services indicated by the UE is
corresponding to the services related to paging causes in solution 1). The UE
may also indicate to the network that no MT data shall be delivered at all
(e.g. due to specific service in another network and can\'t answer paging
request).
\- The time period expected by the UE that will be away from this serving
network. Alternatively, the UE may just provide an indication that it is for a
\"short\" leaving (e.g. UE perform some periodic mobility procedure in the
other system. The short leaving period may can be realized by network based on
local configuration), otherwise network may interpret it as a rather long
period leaving.
Editor\'s note: It is FFS how UE sets a proper value of expected time period.
2\. MME may respond with NAS Service Accept message. MME also indicate the
connection release in the S1 message.
The MME may either use UE context release towards RAN to move UE to IDLE mode
directly or UE context modification towards RAN with release assistance info,
and RAN decides to move UE to RRC_Idle or Suspend mode as in clause 5.3.4A of
TS 23.401 [7] as optional procedure.
The UE may conclude the NAS procedure based on the indication from low layer
when RRC connection release is released if no NAS response message is
received.
3\. RAN delivers the NAS message and releases the RRC connection with UE.
In the case of UE context modification with release indication, RAN decides if
UE moves to RRC_Suspend mode or RRC idle mode based on the policy of the RAN
and release assistance info if available. Step 4 to Step 7 are the same as
step 4 to step 7 in clause 6.5.3.1.1 with following differences:
MME replaces the role of SMF.
#### 6.5.3.2 NAS Resumption procedure
##### 6.5.3.2.1 NAS Resumption procedure in 5GS
Figure 6.5.3.2.1-1 is the call flow of NAS resumption procedure in 5GS.
Figure 6.5.3.2.1-1: NAS Resumption procedure in 5GS
1\. UE sends the NAS Service Request or Registration Request message to AMF
maybe with return indication. When return indication is provided by UE, the
paging filtering which UE provides to network when UE co-ordinately leaving
shall be stopped. If the UE returns shortly e.g. in order to send the mobility
registration, busy indication, in this case, the UE doesn\'t mean to return to
the network for service, UE returns to the network without the return
indication.
2\. AMF sends N11 message to SMF for different PDU sessions/Services
indicating the return to normal MT service handling.
3\. SMF sends the indication to UPF. UPF data handling becomes normal (e.g. DL
data will trigger N3 tunnel setup request if there is no N3 tunnel for the PDU
session).
4\. SMF sends the response message to AMF.
5\. AMF sends the NAS accept message to UE. The AMF may also provide normal
periodic mobility info to UE, if the UE was provided with adjusted periodic
mobility info in previous leaving procedure.
##### 6.5.3.2.2 NAS resumption procedure in EPS
Figure 6.5.3.3.2-1 is the call flow of NAS resumption procedure in EPS.
Figure 6.5.3.2.2-1: NAS resumption procedure in EPS
1\. UE sends the NAS Extended Service Request or TAU Request message to MME.
2\. MME sends S11 message to SGW for different PDN connections/services
indicating the return to normal MT service handling.
3\. SGW sends S5/S8 message to PGW with return indication. PGW data handling
change to normal handling.
4\. SGW sends the response message to MME.
5\. MME sends the NAS service or TAU accept message to UE. The MME may also
provide normal periodic mobility info to UE, if the UE was provided with
adjusted periodic mobility info in previous leaving procedure.
#### 6.5.3.3 RRC leaving procedure
##### 6.5.3.3.1 RRC leaving procedure in 5GS
Figure 6.5.3.2.1-1 is the call flow of RRC Leaving procedure in 5GS.
Figure 6.5.3.3.1-1: RRC leaving procedure in 5GS
1\. UE sends RRC request to RAN indicating the cause of release. The UE also
optionally provides the MUSIM-RAI, which includes the following, e.g.:
\- PDU sessions or services that the UE wants network to trigger (or not
trigger) MT service delivery.
\- The time period expected by the UE that will be away from this serving
network. Alternatively, the UE may just provide an indication that it is for a
\"short\" leaving (e.g. UE perform some periodic mobility procedure in the
other system. The short leaving period may can be realized by network based on
local configuration), otherwise network may interpret it as a rather long
period leaving.
2\. Based on the MUSIM-RAI from UE, RAN can either decides to move to RRC-
Inactive state or to RRC Idle state. RAN sends RRC message to UE to release
the RRC connection. In case of RRC-Inactive, RAN may also pre-configure a
pause timer e.g. based on local policy/configuration for the UE/USIM and
blocks the DL data transmission without paging UE if there are following DL
data received except services/PDU sessions that UE indicated not to trigger MT
delivery in step 1, or other services (e.g. for control signalling or
important services determined using Paging Policy Indication) based on
operator policy. The UE/USIM may locally transfer to RRC-Idle state if the
received timer (i.e. the periodic RNA update timer which is set by the RAN)
expires and it is not able to resume the connection. The RAN considers the UE
leaves current network normally based on the cause of release received in step
1.
3\. If pause timer activated in step 2 expires, and if RAN does not receive a
resume request from the UE, RAN sends a N2 request message to AMF including
the release assistance info if CN needs to handle MT data, and UE state in
network enters either CM-IDLE or suspend state as in clause 4.8.1 of TS 23.502
[6]. The UE/USIM also enters CM-IDLE/RRC_Idle or Suspended state, according to
the RRC release message in step 2.
In case of moving UE to RRC Idle state and consequently to CM-Idle, RAN sends
to the AMF UE context release indication. In case of moving UE to suspend
state, RAN sends to the AMF the UE context suspend request. RAN provides also
the release assistance info to the AMF.
4-7: Similar to 6.5.3.1.1 steps 4-7 with the following differences: AMF
receives the MUSIM-RAI from N2 interface instead of NAS message. The MT data
handling info provided by AMF to SMF may include the following:
\- PDU sessions on 3GPP access that may release the N3 tunnels;
\- The possible MT data handling information (either discard/block or normal
MT service delivery handling for certain applicable time period).
##### 6.5.3.3.2 RRC leaving procedure in EPS
Figure 6.5.3.2.2-1 is the call flow of RRC Leaving procedure in EPS.
Figure 6.5.3.3.2-1: RRC leaving procedure in EPS
1\. UE sends RRC request to RAN indicating the cause of release. The UE also
optionally provides the release assistance info which includes the following,
e.g.:
\- PDU sessions or services that the UE want network to trigger (or not
trigger) MT service delivery.
\- The time period expected by the UE that will be away from this serving
network.
NOTE: The RRC message may differ depending on the current RRC status.
2\. Based on the release assistance info from UE, RAN can either decides to
move to Suspend state or to RRC-Idle state. RAN sends RRC message to UE to
release the RRC connection. In case of Suspend, RAN may also pre-configure a
pause timer for the UE e.g. based on local policy/configuration. The UE may
locally transfer to RRC-Idle state if the received timer expires and it is not
able to resume the connection. The RAN considers the UE leaves current network
normally based on the cause of release received in step 1.
3\. If pause timer activated in step 2 expires, and if RAN does not receive a
resume request from the UE, RAN release AS context and move the UE to RRC-
Idle. The UE/USIM also release AS context and enters CM-IDLE mode, according
to the RRC release message in step 2.
RAN sends UE context release indication and provide the release assistance
info to the MME.
4-7: similar to 6.5.3.1.2 steps 4-7 with the following differences: MME
receives the release assistance info from S1-C interface instead of NAS
message.
#### 6.5.3.4 RRC Resumption procedure
##### 6.5.3.4.1 RRC Resumption procedure in 5GS
Figure 6.5.3.4.1-1: RRC Resumption procedure in 5GS
1\. If the UE is in RRC-Inactive state, the UE/USIM sends RRC Request message
(e.g. including resume indication) to RAN.
If the UE has transferred to CM-Idle state (e.g. due to expired pause timer),
the UE performs NAS Resumption procedure as described in clause 6.5.3.2.
2\. If the pause timer which is described in step 2 in Figure 6.5.3.3.1-1 is
activated and not expired, step 2 to step 4 are skipped. Otherwise, RAN sends
N2 request message to AMF to indicate the returning to CM-Connected mode and
normal MT service handling.
3\. AMF performs the step 2-4 similar to clause 6.5.3.2.1.
4\. AMF sends N2 response message to RAN. CN tunnel info may be provided to
RAN.
5\. RAN sends RRC response message to UE/USIM.
##### 6.5.3.4.2 RRC Resumption procedure in EPS
Figure 6.5.3.4.2-1: RRC resumption procedure in EPS
1\. UE sends RRC Request message to RAN. The UE may include return indication
if leaving procedure was performed previously and new periodic mobility info
has been received.
2\. RAN sends S1 Request message to MME to indicate the returning to CM-
Connected mode and normal MT service handling.
3\. MME performs the step 2-4 similar to clause 6.5.3.2.2.
4\. MME sends S1 response message to RAN. CN tunnel info may be provided to
RAN.
5\. RAN sends RRC response message to UE/USIM.
RAN may provide normal RNA provide periodic RNA info, if suspend is applied
afterwards.
### 6.5.4 Impacts on services, entities and interfaces
**SMF:**
\- decides how to handle the PDU session after receiving the MT data handling
info, based on release assistance information from UE, in N11 message.
\- initiates MT data handling instruction to UPF.
\- receiving return indication and initiate normal MT data handling
instruction to UPF.
**UPF:**
\- block the DL data transmission according to SMF\'s request.
**AMF/MME:**
\- receives the Release assistance info from UE through NAS message or from
RAN through N2 message.
\- provides NAS response to UE.
\- provides MT data handling info, based on release assistance info from UE,
to SMF.- If AMF does not have information to provide to UE, the Service Accept
is optional
**NG-RAN:**
\- Supports UE initiated RRC leaving procedure with release assistance info
according to clause 6.5.3.3.
\- Provides release assistance info the AMF.
\- Sends RRC response message to UE.
**UE:**
\- Supports NAS leaving procedure with release assistance info.
\- Supports RRC leaving procedure with release assistance info.
\- Supports NAS Resumption procedure with return indication.
\- Supports RRC Resumption procedure.
\- The UE may conclude the NAS procedure based on the indication from low
layer when RRC connection release is released if no NAS response message is
received.
## 6.6 Solution #6: UE leave and return
### 6.6.1 Introduction
This solution addresses the Key Issue 3: Coordinated leaving for multi-USIM
device.
### 6.6.2 Functional Description
The solution can be applied for both EPS and 5GS.
A multi-SIM device with 1Tx/1Rx or 1Tx/2Rx may not communicate with two
networks simultaneously. Hence the multi-SIM device will leave the current
3GPP system if it turns to communicate with another network. In order to
notify the current system the UE leave, it is proposed the Multi-USIM device
to initiate the leave to the current network and give up the ongoing service
associated with the current network. Then the NG-RAN can decide to release or
suspend the connection.
After leaving, the MT CP/UP data for the Multi-USIM device may continue to
arrive or be generated at the network side. There can be two options to handle
subsequent data after leaving:
1\. The network does not page the UE for a certain short period of time that
is up to network implementation.
If the UE state becomes CM-IDLE after the UE initiated leave, then the AMF
does not page the UE for a certain short period and the CN buffers the mobile
terminated data using the existing procedures. If the UE returns within the
period then any buffered data is delivered, no data is lost and no network
resource is wasted. If there is buffered data and if the UE does not return
within the period then the network pages the UE to deliver the buffered data.
If the UE does not respond to paging then the procedure is the same as the
existing paging failure procedures, i.e. data may be lost and some network
resources are wasted.
If the UE state becomes CM-CONNECTED with RRC inactive after the UE initiated
leave then the procedure is the same except it is NG-RAN that initiates the
paging and not the CN. If the UE does not respond to paging then the existing
procedure defined in clause 5.3.3.2.5 of TS 23.501 [4] for RAN paging failure
is performed.
2\. After the UE initiated leave the UE is not paged (either by the CN or
RAN). Some user data for the UE may be buffered depending upon the network
implementation. The potential buffered data will be delivered when the UE
returns to RRC-CONNECTED using any UE initiated procedure, e.g. Service
Request, Registration procedure or RAN based RRC resume procedure and the can
resume paging after the UE subsequently returns to either CM-IDLE or RRC-
Inactive. The network resource wastage can be entirely avoided however the UE
is not reachable.
NOTE: How to handle the MT service from the network may also be based on the
outcome of the KI 1.
### 6.6.3 Procedures
#### 6.6.3.1 UE initiated leave and return procedure
**\ **
Figure 6.6.3.1-1: UE initiated leave procedure
1\. If a UE in connected mode would like to leave a 5GS network, the UE
provides in the RRC message the indication for leaving. Upon reception of the
indication, based on UE context and operator policy, the NG RAN suspends or
releases the UE connection, as shown as step 2a, step 2b.
2a. RRC Release with suspend operation as defined in TS 38.331 [9]. It is up
to RAN\'s implementation to handle the current MT data, e.g. discarding the
current data. Subsequently, RAN paging may not be triggered fora certain
period that is up to RAN implementation. Alternatively, RAN paging may not be
triggered until the UE initiates resume procedure.
2b. NG-RAN initiated connection release as defined in Figure 4.2.6 AN Release
procedure in TS 23.502 [6], including N2 release and N3 resource release, with
the modification that NG-RAN provides in N2 UE Context Release Request message
the indication for UE coordinated leaving to AMF in step 1. It is up to
operator policy to trigger RRC release response ahead of or later than N2/N3
release. During this procedure, it is UPF\'s implementation to handle the
current MT data, e.g. discarding the current data. Subsequently, CN paging may
not be triggered fora certain period that is up to network implementation.
Alternatively, CN paging may not be triggered until the UE contacts the
network.
**\ **
When the multi-USIM device decides to return to the network, the multi-USIM
device initiates the return by using the existing procedure, either via RRC
resume procedure or via RRC setup procedure, corresponding to step 2a (i.e.
RRC suspend), step2b (i.e. RRC Release) in the leave procedure respectively.
### 6.6.4 Impacts on services, entities and interfaces
**NG RAN**
\- Upon reception of the indication for leaving, decide to suspend or release
the UE by using the existing procedure, based on operator policy and UE
context.
\- Send a cause to indicate release is a result of coordinated leave.
**UE**
\- Send an indication for leaving.
**AMF**
\- Option1: Don\'t page the UE after UE initiated leave for a certain
preconfigured short period; if there is buffered data and if the UE does not
return within the period then the network pages the UE to deliver the buffered
data
\- Option2: Don\'t page the UE after UE initiated leave until the UE returns.
## 6.7 Solution #7: Push Notification
### 6.7.1 Introduction
The solution applies to Key Issue #1 \"Handling of MT service\" and Key Issue
#2 \"Enabling Paging Reception\".
The solution applies to both 5GS and EPS.
The solution relies on Push Notification that is delivered via the Internet.
The solution applies to Single Rx Multi-USIM devices only.
### 6.7.2 Functional Description
Depicted in Figure 6.7.2-1 is a Dual-USIM device that is simultaneously
registered to 5GS/EPS A (system A) and 5GS/EPS B (system B).
Figure 6.7.2-1: Simultaneous paging from AMF A (or MME A) in system A and
system B
Upon registration to the network associated with USIM A the UE indicates to
the network (AMF) that it wants to register for paging events, e.g. because it
is unable to monitor the paging channel during an active communication via the
network associated with USIM B or would like to avoid creating reception gaps.
If the network (AMF) acknowledges the UE request, it indicates to the UE the
address (e.g. IP address or FQDN) of a 5GC network function, referred to as
Paging Server A, that has a service-based interface in 5GC (N99 in reference
point representation in Figure 6.7.2-1) and is also accessible via the
Internet. The AMF also provides a credential and an identity for the UE which
enables the UE to register for paging events at Paging Server A via the
Internet. The UE next registers with Paging Server A (e.g. using an HTTPS
connection) via Internet access provided by the network associated with USIM
B. This is illustrated in Figure 6.7.2-1 for the case where both systems are
5GS, but the same principle applies if either or both systems are EPS.
Editor\'s note: The security aspects of the communication between UE and
Paging Server, including the details for the assignment of UE identity and
credential which enable the UE to establish a secure connection with the
Paging Server via the Internet, as well as any privacy issues, will be
addressed by SA WG3.
Similarly, upon connecting to the network associated with USIM B the UE
obtains the address of a Paging Server B and registers for paging events at
Paging Server B via Internet access provided by the network associated with
USIM A.
NOTE 1: There is no business relationship between system A and system B in
this solution. UE registers with Paging Server A using the Internet access of
system B, and vice versa.
While connected to the network associated with USIM A the UE keeps an
established connection with Paging Server B via the Internet.
Similarly, while connected to the network associated with USIM B the UE keeps
an established connection with Paging Server A via the Internet.
When the UE needs to be paged for MT service in system A, the SMF (or MME) in
system A initiates the direct paging in system A (refer to red dashed line in
Figure 6.7.2-1) and after some delay (the value of which depends on configured
paging strategy in the AMF) it also sends a Push Notification via Paging
Server A (refer to the blue dash-dotted line in Figure 6.7.2-1). The following
cases may arise:
1\. UE was engaged in active communication via system B; in this case the UE
will not be able to listen to the Uu paging in system A, but it will receive
the Push Notification from Paging Server A via its Internet connection on
system B. Upon reception of the Push Notification the UE decides whether it
should suspend the communication in system B and respond to the Uu paging in
system A.
2\. UE was in Idle state in both system A and system B. The UE will be paged
sequentially: initially in system A only and after some delay also via its
Internet connection in system B with the Push Notification. In system B, a DL
packet for the UE is received, that triggers \"normal\" paging, which can be
successful or unsuccessful, independently from the fact that the UE has
responded in system A or not. If unsuccessful, the Push Notification packet is
dropped by system B.
NOTE 1a: The solution is not applicable when extended buffering is used.
The Push Notification content is equivalent to the content of the Uu Paging
message. As a minimum it includes an indication of the service type that
triggered the paging and an identifier that non-ambiguously points to the USIM
in the Multi-USIM device for which the paging is intended.
NOTE 2: The Push Notification in the UE is expected to be handled in an IP
application client that is able to communicate with the 3GPP layers in the UE
(cf. similar to the IMS client). The details of the IP application client
handling the Push Notifications is implementation dependent and is outside the
scope of this study. The registration for paging events is expected to be
performed by the same IP application client.
### 6.7.3 Procedures
Depicted in Figure 6.7.3-1 is the call flow for the case where UE A and UE B
are in Idle and Connected state, respectively, when a downlink user plane
packet (e.g. SIP INVITE) arrives at UPF A.
Figure 6.7.3-1: Push Notification: UE A in Idle; UE B in Connected
1\. User plane packet (e.g. SIP INVITE) arrives at the UPF in system A.
2-4. AMF pages the UE.
5\. In absence of UE A response during preconfigured time T~nr~ (e.g.
T~nr~\ Index Length 10_  
_> >Index Length 10_ _M_ _BIT STRING (SIZE(10))_ _Coded as specified in TS
38.304 [12] and TS 36.304 [29]._
* * *
**_** end of extract from TS 38.413 [16] **_**
_A_ _potential update to TS 36.304 [20]__clause 7.1 \"Discontinuous Reception
for paging\" is_ _[shown]{.underline}__below_
_UE_ID:_
_If the UE supports E-UTRA connected to 5GC and NAS indicated to use 5GC for
the selected cell:_
_5G-S-TMSI mod 1024, if P-RNTI is monitored on PDCCH._
_else_
**_[MUSIM Offset +]{.underline}_ * IMSI**[)]{.underline}*_mod 1024, if P-RNTI
is monitored on PDCCH._
**_[(MUSIM Offset +]{.underline}_ * IMSI**[)]{.underline}*_mod 4096, if P-RNTI
is monitored on NPDCCH._
**_[(MUSIM Offset +]{.underline}_ * IMSI**[)]{.underline}*_mod 16384, if
P-RNTI is monitored on MPDCCH or if P-RNTI is monitored on NPDCCH and the UE
supports paging on a non-anchor carrier, and if paging configuration for non-
anchor carrier is provided in system information._
_And also a potential update to TS 38.304 [3] clause 7.1 \"Discontinuous
Reception for paging\" is_ _[shown]{.underline}__below:_
**_UE_ID: (MUSIM Offset + 5G-S-TMSI) mod 1024._**
### 6.16.3 Procedures
The figure below illustrates the flows proposal above.
Figure 6.16.3-1: Registration/TAU request trigger upon PO collision risk
detection
Upon registration the UE is informed the network supports higher paging
repetition request.
1\. Upon the UE detecting paging collisions will occur between USIMs, the UE
initiates a Registration Update/TAU procedure in one of the colliding USIMs
requesting UE offset from the network.
2\. The network returns a Registration/TAU Accept to the UE including a UE
offset value.
3\. In the case of 5GS and RRC inactive deployment, AMF provides also the UE
identity index value info to RAN for RRC Inactive.
4\. UE enters CM-IDLE or RRC inactive and MT traffic comes, in case of CM-
IDLE, AMF/MME triggers the Paging Request with UE identity index value based
on UE offset. The RAN calculates the PF/PO based on UE identity index value
received from CN.
### 6.16.4 Impacts on services, entities and interfaces
UE:
\- determine optionally Offset Value based on number of active SIMs, their
IMSIs, and the cell configurations;
\- support signalling for indication offset support and Offset Value in
Attach/TAU/Registration Request/Accept.
\- support modified Paging Occasion calculation based on Offset Value
RAN:
\- update of TS 36.304 [2] (UE Idle mode spec) and TS 38.304 [3] (UE in Idle
mode and RRC Inactive State spec) likely to be required.
\- update TS 38.413 [16] to provide optional UE identity index value based on
Offset in Paging Request.
MME/AMF:
\- support signalling for indication and Offset Value in
Attach/TAU/Registration Request/Accept and abnormal case of loss of
TAU/Registration Complete.
\- support modified \"IMSI mod 1024\" or \"5G-S-TMSI mode 1024\" calculation
based on Offset Value.
\- non-volatile storage of the Offset Value.
## 6.17 Solution #17: Resolving paging conflict using MUSIM Assistance
Information.
### 6.17.1 Introduction
This solution addresses KI# 2.
The Assumption underlying this solution are the following:
1\. The UE is aware it has >1 USIM active. By active we define a USIM that is
related to a SUPI or IMSI registered with a PLMN.
2\. The UE is aware of potential paging occasion conflict and can take action
to remedy to such conflicts or make sure the impact of resources waste is
minimised. There is no need for network side detection of such conflicts.
3\. We cannot assume any two USIMs are served by the same PLMN nor same nodes
(AMFs or SMFs) inside the PLMN if both are registered in the same PLMN. This
may also be impossible even if the USIMs register with the same PLMN as AMF
for one USIM may be on a different Slice Set than other USIMs. In other words,
the network is not assumed to spend any effort to initiate actions on behalf
of MUSIM UEs or derive that a UE is using multiple USIMs based on network side
intelligence. It is only the UE responsibility to provide any assistance to
the network to improve the system behaviour when it is using multiple USIMs.
Based on the above assumptions, the following considerations can be made:
1) The UE detects whether it is single USIM or MUSIM at any point in time.
2) When the UE detects it is MUSIM, it can inform the PLMN for each USIM and
indicate to the network MUSIM assistance information in RM/MM messages.
3) When the UE detects it transitions back to single USIM, it can indicate
this to the PLMN of the remaining USIM by RM/MM message not including MUSIM
information. This needs not be instantaneous and may wait till next RM/MM
event.
4) When a MUSIM UE detects potential of paging conflict, it can indicate to
one PLMN of one USIM (or, in >2 USIMs case, to all applicable PLMNs)
assistance information to avoid paging conflict, e.g. a Replacement UE_ID for
paging occasion computation.
5) The MUSIM Assistance Information may include the number of USIMs that are
currently active so the PLMN may tune its paging strategy according to this
information (e.g. the number of paging attempts from CN and/or RAN could be
modified based on this information). The MUSIM-related information should be
orthogonal to any existing paging strategy as it is meant to modify it, hence
it should be provided to the system in a well identified MUSIM Assistance
INFO. This MUSIM Assistance INFO can be provided to the RAN so the RAN adapts
the way it pages the UE accordingly. This can be provided to the RAN via N2 in
connected mode 9to enable RRC inactive paging strategies) or when a paging
message is sent to the RAN via S1 or N2.
### 6.17.2 Functional Description
When a UE detects it is operating as MUSIM UE (i.e. it has active
registrations with >1 USIM) , it provides indication to the PLMNs it
registered with that it is a MUSIM UE.
The indication may be based on inclusion in the Registration Request, Attach
or TAU or service request messages of MUSIM Assistance Information.
If the UE becomes single USIM because only one registered USIM is left, when
the UE registers with this USIM again in the related PLMN but it does not
provide any indication it is MUSIM UE (i.e. it does not include any assistance
information). This registration may not need to wait for the next periodic or
mobility related registration trigger.
When the AMF or MME receive assistance information, they store it in the UE
context.
When some of the information is relevant for RRC Inactive state, then the
assistance information may be provided to the RAN in PLMNs that support RRC-
INACTIVE, when the UE context is configured in the RAN. The MUSIM assistance
information may also be provided to the RAN in the N2 Paging message to
trigger related behaviour in the RAN for Paging.
The assistance information may include:
1\. indication of the number or USIMs so the network may tune its paging
strategy as it may e.g. modify the number of paging attempts based on its own
policies. It may include indications of periodicity for UE reachability also
(e.g. in terms of DRX cycles during which the UE can be reached (or
periodicity etc, i.e., with reference to SFN DRX cycle zero is the first from
the SFN=0 etc.).
2\. Indication of a Replacement UE_ID for paging or any other information RAN
WGs may decide is relevant to modify the timing for PF/PO to avoid overlapping
POs across USIMs. If this is a Replacement UE_ID, this is used in the RAN to
compute the PF and PO for the UE. The page message itself is still related to
the UE_ID the UE has obtained from the CN, but the Replacement ID is just used
for paging PF/PO computation. Then there are no overlapping PF/PO across
USIMs, then this information is not present. When the UE has provided a
Replacement PF/PO, this is kept until this would create an overlapping PF/PO
for the USIM, in which case the UE updates the network by e.g. omitting the
information or by suggesting an alternate Replacement UE_ID. This Replacement
UE_ID is passed to the RAN in the N2 Paging message for Idle mode, or to the
RAN in the UE Context for storage when the UE is RRC-Inactive.
### 6.17.3 Procedures
#### 6.17.3.1 Providing MUSIM assistance information to the CN
This procedure in figure 6.17.3.1-1 is described using the 5GS but it equally
applies to EPS.
The UE provides the MUSIM assistance information in registration procedure and
a supporting network acknowledges the reception of the MUSIM assistance
information. Figure 6.x.3.1-1 describes in a very high-level manner the
procedure. This procedure can be executed at any time whenever the UE needs to
update the network with relevant MUSIM Assistance Information. If the UE is
RRC connected with the other USIM in the same or another PLMN, this message
procedure first requires creating a long enough gap in the RAN serving the
other USIM.
When the UE does not need any more MUSIM Assistance information to be sent to
the RAN, it registers without it.
Figure 6.17.3.1-1: Providing MUSIM assistance information to a PLMN in
Registration messages
1\. The UE includes MUSIM Assistance Information in a Registration Request
Message (tor provide or update MUSIM assistance information) or a Service
Request message (e.g. if the UE needs to update the MUSIM assistance
information in the CN) for one USIM.
2\. The AMF takes action based on the MUSIM assistance information and stores
it in the UE context. The AMF may provide or update, if and as applicable, to
the RAN the assistance information relevant to the RAN by N2 message. The RAN
stores Assistance Information that applies and retains it when the UE moves to
RRC inactive. The MUSIM Assistance Information also passed to the RAN in N2
Paging messages when MT services apply when a UE is in CM-IDLE mode.
3\. The AMF acknowledges support of MUSIM assistance information at
Registration Accept.
#### 6.17.3.2 Paging
Figure 6.17.3.2-1 is the call flow of Paging collision avoidance procedure.
UE has provided MUSIM assistance information to the AMF as it needs the AMF to
perform paging collision avoidance and AMF has accepted the MUSIM assistance
information.
AMF will indicate to the UE that the paging collision avoidance procedure is
requested by indicating MUSIM assistance information to the RAN.
The AMF includes the paging collision avoidance indication along with N2
paging message to RAN. RAN can decide the mechanism on how to avoid paging
collision based on the received MUSIM assistance information. This may include
e.g. an Alternative ID for Paging like in solution 15, or a selector of RAN
behaviour etc. The AMF may also take into account MUSIM Assistance Info
included to signal the UE availability pattern. The availability pattern could
be an even/odd pattern of DRX cycle relative to a given SFN or other
information indicating periodic interval of reachability. This pattern may
also be passed to the RAN.
Figure 6.17.3.2-1: Paging collision avoidance procedure with MUSIM assistance
Information
#### 6.17.3.3 Stopping paging on one PLMN
Figure 6.17.3.3-1 shows the UE can request the RAN and CN to stop paging upon
receiving a paging message by responding with a SR that includes a stop paging
indication. This indication to stop paging installs a (potentially temporary)
match all paging filter in the UE context in AMF and SMF that blocks DL
paging. To lift this condition the UE must update the MUSIM Assistance
Information by a registration procedure (see 6.17.3.1) including indication to
either resume the earlier paging filter or a new paging filter or no paging
filter. If the UE is RRC connected with the other USIM in the same or another
PLMN, this message procedure first requires creating a long enough gap in the
RAN serving the other USIM.
Figure 6.17.3.3-1: UE cause the network to stop paging
NOTE: The RAN immediately releases the connection when it receives the Stop
Paging indication in RRC MSG 5. The AMF does not establish any user plane when
the MUSIM assistance Information includes Stop Paging indication.
A PLMN may also be provisioned with a timer that lifts the effects of a stop
paging indication, or the UE can provide a UE specific timer if this is used
to indicate the intention of the UE to return within the specific time.
### 6.17.3.4 Coordinated leaving using the MUSIM assistance information
As shown in Figure 6.17.3.4-1, the MUSIM Assistance Info is included to signal
MUSIM assistance information including Paging and availability patterns info
in one PLMN. 1a and 1b are alternatives as NAS and RRC layer respectively. The
availability pattern could be a negotiated period of absence e.g. including a
time window when the UE is reachable and a time interval between time windows
when the UE is not available.
Figure 6.7.3.4-1: UE signals its availability pattern upon leaving
### 6.17.4 Impacts on services, entities and interfaces
UE: support of the MUSIM Assistance Information and procedures as specified
above.
RAN: calculation of PF/PO based on MUSIM Assistance Information, support of
Service request specific cause code indicating stop paging.
MME/AMF: support of storing and resending MUSIM Assistance Information to the
RAN (in N2/S1 messages as applicable. PF/PO calculation, provision of MUSIM
Assistance Information.
SMF/UPF: classification in Classes of Service and filtering per UE according
to the paging filters provided in the MUSIM Assistance Information,
Classification and Marking in DL for UEs for which filtering applies in RRC
inactive mode.
## 6.18 Solution #18: Sending paging on consecutive POs for Multi-USIM UE
### 6.18.1 Introduction
This solution is for Key Issue 2: Enabling Paging Reception for Multi-USIM
Device. If Paging Occasions (POs) on more than one RATs overlap in time, the
Single Rx MUSIM UE only monitors paging on one RAT, which may lead to
unsuccessful paging reception on the other RATs. The solution reuses the
existing procedures to address this key issue.
### 6.18.2 Functional Description
The UE alternates paging monitoring on RATs that overlap in time and RAN
repeats paging on several consecutive POs. As one of the POs will be monitored
by the UE, the paging will be received.
To avoid unnecessary waste of network resources, the first paging attempt on a
single PO may not be repeated. If the UE does not respond to the first paging
attempt, which may indicate the overlap occurred, then a second paging attempt
is made and the paging is repeated on two consecutive POs.
For a UE in RRC_Idle state, the MME/AMF sends the first attempt of paging with
existing Paging Attempt IE within the PAGING message set to \'1\' to RAN. The
RAN pages the UE. If the MME/AMF does not receive respond from the UE, the
MME/AMF sends the second attempt of paging with Paging Attempt Count set to
\'2\' to RAN. The RAN pages the UE on consecutive POs.
For a UE in RRC_inactive state, the serving RAN node sends the first attempt
of paging with Paging Attempt Count set to \'1\' to the RAN nodes within RNA.
The RAN nodes within RNA pages the UE without repetition. If the UE does not
respond, the serving RAN node sends the second attempt of paging to with
Paging Attempt Count set to \'2\' to the RAN nodes within RNA. The RAN nodes
within RNA page the UE on consecutive POs.
The AMF does not differentiate between whether consecutive POs needs to be
used when paging a UE. RAN WGs may determine applicability to the UE being
paged. This for instance can be based on reusing the UE radio capabilities for
paging information the UE provides to the network.
### 6.18.3 Procedures
No additional procedures or procedural changes are required for this solution.
It is assumed the RAN adapts its paging behaviour based on UE radio
capabilities for paging information the UE provides to the network. It is also
assumed the AMF/MME indicate the paging attempt number to the RAN.
### 6.18.4 Impacts on services, entities and interfaces
UE:
\- Alternately monitors paging on the overlapped RATs. Provided MUSIM related
information in UE radio capabilities for paging.
RAN:
\- Send paging on UE\'s consecutive POs if the UE does not respond paging
after the first attempt of paging.
Network:
\- send to the RAN the paging attempt number.
## 6.19 Solution #19: UE solution to address overlapping PO
### 6.19.1 Introduction
This solution relates to KI#2 Enabling Paging Reception for Multi-USIM Device.
The solution proposes a UE-only approach to handle PO collisions, while not
preventing PO collisions to occur.
This solution is based on the observation that, although particular
combinations of UE IDs and system parameters used to derive POs can lead to
systematic PO collisions, these combinations are neither systematic nor
permanent due to 5Gâ€‘GUTI re-allocation. When PO collisions occur, the UE can
minimize the impact thereof.
### 6.19.2 Functional Description
The solution consists simply in introducing the following requirements:
\- A MUSIM device shall be able to identify whether or not PO collisions can
occur between the USIMs
\- A MUSIM device that has identified PO collisions can occur between the
USIMs, shall be able to use UE implementation means to minimize page loss due
to collision taking into account paging repetition (for example by selecting
the order in which USIMs are operated for paging reception e.g. using a round-
robin approach).
### 6.19.3 Procedures
No new procedure is needed.
### 6.19.4 Impacts on services, entities and interfaces
UE:
\- Identifying whether collisions can occur.
\- USIM selection for paging reception, while ensuring paging reception
opportunity for all USIMs.
AMF:
\- none.
RAN:
\- none.
SMF:
\- none.
UPF:
\- none.
## 6.20 Solution #20: Triggering MRU upon PO collision detection
### 6.20.1 Introduction
This solution relates to KI#2 Enabling Paging Reception for Multi-USIM Device.
The solution proposes the UE to trigger a Mobility Registration Update when a
collision risk is detected by the UE, which prompts the AMF to assign a new
5G-GUTI to the UE.
### 6.20.2 Functional Description
The solution consists in the following:
\- A MUSIM device shall be able to identify whether or not PO collisions can
occur between the USIMs.
\- A MUSIM device that has identified PO collisions can occur between the
USIMs, initiates a Mobility Registration Update from one USIM\'s PLMN
indicating the need for a new 5G-GUTI.
Editor\'s note: It is FFS whether a specific indication need to be provided by
the UE in the Registration Request message or an existing indication can be
reused.
\- The AMF assigns a new 5G-GUTI to the UE in the Registration Accept message
sent back to the UE, according to existing specification (see clause 6.12.3 of
TS 33.501 [12]).
### 6.20.3 Procedures
The figure below illustrates the proposal above.
Figure 6.20.3-1: MRU trigger upon PO collision risk detection
Upon registration the UE is informed the network supports higher paging
repetition request.
1\. Upon the UE detecting paging collisions will occur between USIMs, the UE
initiates a Registration Update procedure in one of the colliding USIMs
requesting a new 5G-GUTI from the network.
2\. The network returns a Registration Accept to the UE including a new
5G-GUTI.
### 6.20.4 Impacts on services, entities and interfaces
UE:
\- Identifying whether paging collisions can occur between USIMs.
\- Selection of the USIM for which to request a new 5G-GUTI and setting the
corresponding indication in the Registration Request message.
AMF:
\- Detecting the indication from the UE in the Registration Request message
and, according to existing specification, returning a new 5G-GUTI in the
Registration Accept message to the UE.
RAN:
\- none.
SMF:
\- none.
UPF:
\- none.
## 6.21 Solution #21: Scheduling gap for Multi-SIM UE
### 6.21.1 Introduction
This solution addresses the key issue #2: Enabling Paging Reception for Multi-
USIM Device.
### 6.21.2 Functional Description
For the multi-USIM UE, if USIM A is in connected mode and USIM B is in idle or
RRC_INACTIVE mode, then the UE should be able to maintain RRC connection in
USIM A but may also be required to tune to USIM B periodically to listen to
paging. While the UE is absent from the network where USIM A is camped, if the
UE cannot receive DL data, it may result in waste of resources and degrade
USIM A connected mode performance, e.g. the RAN node for USIM A may determine
USIM A has lost the traffic and reduce the scheduling rate.
A proposed solution is to negotiate the \"scheduling gap\" on USIM A for UE to
tune away to USIM B in order to listen to paging and then return to USIM B.
Since the tune away for listening paging is happened periodically, the
\"scheduling gap\" negotiated between UE and RAN is applied periodically.
USIM A negotiate the \"scheduling gap\" with the served RAN node so the UE can
tune away from USIM A to perform the USIM B procedures. It is up to RAN WG2 to
decide the procedure that used to negotiate the \"scheduling gap\" between RAN
node and the UE.
But if UE needs to transmit MO data or receives MT data on USIM B, the core
network that served for USIM A should be informed, the details should be
discussed in Key issue 3.
### 6.21.3 Procedures
The access stratum procedure that the UE and served RAN node create a
\"scheduling gap\" is defined by RAN WG2.
### 6.21.4 Impacts on services, entities and interfaces
UE:
\- sends the \"scheduling gap\" to the served UE in AS signalling. The
procedure is decided by RAN.
## 6.22 Solution #22: AS-triggered coordinated leaving
### 6.22.1 Introduction
This solution is a simplified variant of Solution #5 to remove unnecessary
flexibility and complexity.
### 6.22.2 Functional Description
The solution consists of the following:
\- The UE triggers RRC Leaving including _Release Assistance Indication_
(incl. piggybacking of NAS indication of PDU Sessions (not) requiring MT
delivery indication) in the RRC Connection release request message.
\- Unlike Solution #5, the UE does not select between short or long leave. No
absence duration is provided by the UE to the network as this is not
accurately predictable by the UE.
\- The UE-triggered RRC connection release procedure is controlled by a UE RRC
timer started when sending the above _Release Assistance Indication_ and the
UE RRC timer value in the RRC Connection release request message, and at
expiry of which the UE proceeds with local RRC connection release (the UE RRC
timer value is specified such as to minimize any potential negative impact to
user experience) if no response (i.e. RRC Connection suspend/release) is
received from the network. It is possible the UE RRC timer value is zero when
for another system\'s services which triggers the UE to leave the current
system, leaving immediately is preferred.
\- Upon receiving the RRC Connection release request from the UE, the network
explicitly releases or suspends the RRC connection. If the RAN cannot transmit
the RRC signalling for explicitly releases or suspends the RRC connection
before the UE RRC timer expiry, the RAN local release the UE.
### 6.22.3 Procedures
Procedures are analogous to what is described in Solution #5, but with the
simplifications outlined above.
### 6.22.4 Impacts on services, entities and interfaces
UE:
\- RRC leaving procedure with (NAS) release assistance info.
\- NAS and RRC resumption.
AMF:
\- Reception of (NAS) release assistance info from RAN over N2.
\- Provides MT data handling info, based on (NAS) release assistance info to
the SMF.
SMF:
\- decides how to handle the PDU session after receiving the MT data handling
info from the AMF.
\- initiates MT data handling instruction to UPF.
\- receiving return indication and initiate normal MT data handling
instruction to UPF.
UPF:
\- Block the DL data transmission according to SMF\'s request.
RAN:
\- UE-initiated RRC leaving procedure with (NAS) release assistance info.
\- Provides release assistance info the AMF.
\- RRC response message to UE.
## 6.23 Solution #23: N3GPP for MUSIM Service Concurrency
### 6.23.1 Introduction
This is a solution for Key Issue 1 Handling of Mobile Terminated service with
Multi-USIM device and Key Issue 3 Coordinated leaving for Multi-USIM device.
This solution is applicable only when UE is in coverage of N3GPP access and
therefore cannot be considered as a complete solution for KI#1 and KI#3.
Due to the UE Tx/Rx capability, the UE can only maintain one USIM\'s
connection with the corresponding system. So KI#1 is to avoid unnecessary
interruptions of the service in the current system (e.g.USIM1), before the UE
determines the higher service priority between the ongoing service and the
imminent service that triggered paging in another system (e.g. USIM2), and
KI#3 is to address the coordinated leaving for Multi-USIM device.
The main reason is that it assumes the 3GPP access as the only available
technology to address the problems in MUSIM scenario. This solution uses the
MA PDU Sessions and N3GPP access for user services, so that both the USIM1\'s
ongoing services and USIM2\'s services that triggers paging may be performed.
### 6.23.2 Functional Description
The solution assumes the availability of N3GPP access and assumes no
coordination between USIMs on the network side, which means USIM1\'s network
does not know whether USIM2 has an available N3GPP connection or not.
In order to maximize the possibility to enable both USIMs\' services
simultaneously, the UE shall take the N3GPP access to transfer the matched
services. When N3GPP access is available and the Access Type preference in the
matched URSP for service is Multi-Access, then UE chooses the N3GPP access to
establish or activate the PDU sessions.
If the UE has MUSIM capability, it includes MUSIM capability in the
Registration Request to AMF, then the AMF informs the PCF that the MUSIM
communication would be enabled. This triggers the PCF to generate the MUSIM
specific UE Policy and deliver it to UE. Furthermore, the MUSIM specific UE
Policy may also include the valid area of such MUSIM specific policy, e.g.
PLMN lists, TAs per PLMN, geographical area.
Additionally, if the conditions for MA PDU session establishment are
fulfilled, the UE and network always choose to establish MA PDU Session(s) for
the MUSIM UE, so if N3GPP access is available and 3GPP access is unavailable,
the service data can be switched from the 3GPP path to the N3GPP path without
any service interruption.
### 6.23.3 Procedures
#### 6.23.3.1 MUSIM Specific UE Policy
Figure 6.23.3.1-1 MUSIM Policy Setup
1\. If UE has MUSIM capability, it includes MUSIM capability in the
Registration Request.
2\. The AMF retrieves the UE subscription from UDM, which may include the
MUSIM related subscription information.
3\. Based on the UE capability and UE subscription, the AMF determines that
the UE (i.e. USIM) is authorized to perform MUSIM communication.
4\. AMF returns Registration Accept to UE, as defined in clause 4.2.2.2.2,
step 21 of TS 23.502 [6].
5a. The AMF initiates the establishment of UE Policy Association with PCF by
the Npcf_UEPolicyControlCreate Request, as defined in clause 4.2.2.2.2, step
21b of TS 23.502 [6], and includes the MUSIM indication to inform the PCF that
the MUSIM communication would be enabled.
5b The PCF acknowledges the AMF by the Npcf_UEPolicyControlCreate Response, as
defined in clause 4.2.2.2.2, step 21b of TS 23.502 [6].
6\. After the UE Policy Association is established, the PCF generates the UE
Policy taking to account the MUSIM indication. The MUSIM specific UE Policy
indicates that the N3GPP access has a high priority than the 3GPP access in
specific URSPs. Furthermore, it may also include the valid area of such MUSIM
specific policy, e.g. PLMN lists, TAs per PLMN, geographical area.
The policy is delivered to the UE as defined in clause 4.2.4.3 of TS 23.502
[6].
7\. The UE chooses the N3GPP access to establish or activate the PDU sessions
according to the MUSIM specific UE Policy.
#### 6.23.3.2 MA PDU Session establishment for MUSIM
Figure 6.23.3.2-1 MA PDU Session Establishment for MUSIM
1\. If the matched URSP has multi access types, and UE has MUSIM capability
and is using multiple USIMs, it initiates MA PDU Session Establishment, see TS
23.502, clause 4.22.2.
2\. The UE sends the PDU Session Establishment Request and MA PDU indication
to AMF via the N1 message.
3\. Based on the UE capability and UE subscription, AMF determines that the UE
(i.e. USIM) is authorized to perform the MUSIM communication.
4a. The AMF sends Nsmf_PDUSession_CreateSMContext Request (PDU Session
establishment request, MA PDU indication, MUSIM indication) to the SMF.
4b. If the MUSIM indication is included, the SMF takes into account the MUSIM
indication when considering whether to initiate a MA PDU Session. If the UE
requests a single-access PDU Session, the network may decide to establish a MA
PDU Session instead using the procedure specified in clause 4.22.3 of TS
23.502 [6]. It may occur when the UE requests a single-access PDU Session but
no policy (e.g. no URSP rule) and no local restrictions in the UE mandate a
single access for the PDU Session.
4c. The SMF returns the Nsmf_PDUSession_CreateSMContext Response to AMF.
5\. The SMF initiates the SM policy association for the UE.
6\. The SMF sends the N1 info (QoS rules) to UE, as specified in specified in
clause 4.22.3 of TS 23.502 [6], and N2 info (QoS profiles) to RAN to complete
the MA PDU Session Establishment.
7\. If N3GPP access is available, even if no data is transmitted via N3GPP for
the MA PDU Session, the N3GPP path is activated and maintained.
8\. When UE determines that a higher priority service is initiated in another
USIM, it will switch the usage of 3GPP access from current USIM to the other
USIM. Then UE should indicate the suspension of 3GPP path to SMF.
9\. If N3GPP is available, the SMF switches the data transmission from the
3GPP path to N3GPP path.
### 6.23.4 Impacts on existing entities and interfaces
#### 6.23.4.1 For MUSIM Specific UE Policy:
UE:
\- Support sending a MUSIM indication to AMF.
\- Support receiving the MUSIM specific UE Policy from PCF.
AMF:
\- Support sending a MUSIM indication to PCF.
PCF:
\- Support generating the MUSIM specific UE Policy.
#### 6.23.4.2 For MA PDU Session:
UE:
\- Support sending a MUSIM indication to AMF via Registration procedure.
AMF:
\- Support sending a MUSIM indication to SMF.
SMF:
\- Support considering the MUSIM indication to initiate a MA PDU Session.
## 6.24 Solution #24: Procedure for providing paging cause to the UE when more
than one USIM of the UE are registered with same PLMN
### 6.24.1 Introduction
The solution applies to Key Issue 1: Handling of Mobile Terminated service
with Multi-USIM device.
### 6.24.2 Functional Description
The solution is applicable if more than one USIM\'s registers with same PLMN.
i.e. if both the USIMs of the UE camp on the same PLMN in number of occasions,
(hereafter USIM-1 stack of the MUSIM UE is referred to as UE-1 and USIM-2
stack of the MUSIM UE is referred as UE-2) for example:
\- Both the UE-1 and UE-2 of the MUSIM UE in roaming area may camp on common
roaming partner.
\- UE-1 may be in HPLMN, UE-2 may be in roaming area. Both camp on the same
PLMN. etc.
Following changes are proposed to resolve, key issue#1 and key issue#2 for
same PLMN case:
\- Enhance AMF\'s knowledge that both UE-1 and UE-2 belong to the same MUSIM
UE; and
\- Instead of blindly sending paging using broadcast mechanism sending
NOTIFICATION message over the connected mode N1 signalling connection.
NOTE 1: Whether the linkage between USIMs needs to be controlled based on
policy or subscription will be determined.
This procedure is applicable to both 5GS and EPS. Respective mobility
management nodes needs to be replaced with EPS nodes.
NOTE 2: For the case of UE context registering with different AMFs handling is
described in solution#26.
### 6.24.3 Procedures
#### 6.24.3.1 Procedure for enhancing AMF\'s knowledge of two USIM\'s belong
to same UE
Figure 6.24.3.1-1: Procedure for informing network two USIMs belongs to same
UE
1\. The UE-1 executes the registration procedure as specified in clause
4.2.2.2 of TS 23.502 [6]. Network allocates GUTI-1 to the UE-1.
2\. The UE-2 sends REGISTRATION REQUEST message. The REGISTRATION REQUEST
message includes an indication that GUTI-1 allocated to the UE-1 (for example
by including GUTI-1) is for the same MUSIM UE.
NOTE 1: If any security issues arise due to above step will be determined by
SA WG3.
NOTE 2: The registration procedure in above steps can be Initial Registration
procedure or Mobility Registration Update procedure.
3\. The AMF may execute Registration with AMF re-allocation(as specified in TS
23.502 [6]) based on local policy and understands that 5GMM context of UE-1
and 5GMM context of UE-2 belongs to the same MUSIM UE and thereafter maintains
this link information in the implementation dependent mechanism.
4\. The AMF in REGISTRATION ACCEPT message confirms to the UE-2 that both the
context of UE-1 and UE-2 are in the same AMF. After this information the MUSIM
UE will not read the paging channel if any one of the UEs of same MUSIM UE are
in CM_CONNECTED state.
#### 6.24.3.2 Procedure for providing paging cause in CM_IDLE state for USIM-1
when USIM-2 is in CM_CONNECTED state
Figure 6.24.3.1-1: Procedure for providing paging cause in CM_IDLE state
1\. The UE-2 is in CM_CONNECTED state and UE-1 is in CM_IDLE state.
2\. The conditions to initiate network triggered service request procedure for
downlink data or signalling over the 3GPP access are met for UE-1 as specified
in clause 4.2.3.3 of TS 23.502 [6].
3\. If the AMF knows UE-1 and UE-2 are part of the same MUSIM UE and the UE-2
is in CM-CONNECTED state, the AMF shall send the NAS NOTIFICATION message over
N1 NAS signalling connection of UE-2. The NAS NOTIFICATION message includes:
a) a paging cause parameter indicating the type of the traffic pending to be
delivered to the UE.
b) an indication that this message is the paging delivery for UE-1 (for
example by including GUTI-1 allocated to the UE-1).
NOTE 1: The mechanism to derive the paging cause parameter values by the AMF
is described in solution #1.
4\. The UE-1 may choose to respond the NAS Notification message based on the
paging cause by executing service request procedure as described in clause
4.2.3.3 of TS 23.502 [6].
5\. If the UE-1 decides not to respond to NAS Notification message based on
the paging cause value then the UE shall send NAS NOTIFICATION RESPONSE
message to the AMF indicating that UE will not be able to respond for the MT
service on UE-1 using N1 signalling connection of UE-2.
NOTE 2: The above solution describes the flow when the UE-2 is in CM_CONNECTED
state and UE-1 is in CM_IDLE state. The same logic is applicable for vice-
versa case.
### 6.24.4 Impacts on existing entities and interfaces
**For 5GS:**
UE:
\- UE provides GUTI-1 (allocated to the UE-1) during registration procedure of
UE-2 to inform network that both USIMs belong to same MUSIM UE.
\- If AMF confirms that both the UE-1 and UE-2 are in the same AMF, MUSIM UE
will not monitor the paging channel when one of the UE is in connected mode.
AMF:
\- When AMF receives a GUTI during registration procedure, it will check if
that GUTI context is available with it. If it is available it confirm to the
MUSIM UE that both UE-1 context and UE-2 context belongs to same AMF.
\- When downlink data/signalling is received for one UE (for example UE-1) and
another UE (for example UE-2) is in connected mode then, AMF will send
notification message for UE-1 over NAS N1 signalling connection of UE-2
instead of triggering paging procedure for UE-1. There by eliminating a need
for paging over UE-1.
**For EPS:**
Same impacts as 5GS. Replace AMF with MME.
## 6.25 Solution #25: Using Non-3GPP access to deliver NAS Notification
message
### 6.25.1 Introduction
This solution addresses the Key Issue #1 \"Handling of Mobile Terminated
service with Multi-USIM device\".
This solution is applicable only when UE is in coverage of N3GPP access and
therefore cannot be considered as a complete solution for KI#1.
Clause 4.2.3.3 step 4c of TS 23.502 [6] covers the case when the UE is in CM-
IDLE state in 3GPP access and in CM-CONNECTED state in non-3GPP access, the
network may initiate a Network Triggered Service Request procedure for 3GPP
access via non-3GPP access.
### 6.25.2 Functional Description
When the network needs to signal (e.g. N1 signalling to UE, mobile-terminated
SMS, user plane connection activation for PDU session to deliver mobile
terminating user data) with the Multi-USIM UE, and if the Multi-USIM UE:
1\. Is simultaneously registered over 3GPP and non-3GPP accesses in the same
PLMN;
2\. Is in CM-CONNECTED state for non-3GPP access;
3\. Has left the current 3GPP system for 3GPP access (e.g. to service a voice
call activity on the other USIM).
The UE shall indicate this step to AMF either via NAS Leaving procedure as
specified in solution#5, clause 6.5.3.1.1 or the RRC leaving procedure as
specified in solution#5, clause 6.5.3.3.1. The UE is either in a state after
step 3 of Figure 6.5.3.1.1-1 or after step 2 of Figure 6.5.3.3.1-1; and
4\. The PDU Session ID is associated with 3GPP access (applicable for user
plane connection activation for PDU session):
The AMF shall notify the UE through non-3GPP access, i.e. by sending a NAS
Notification message containing the 3GPP Access Type to the UE over non-3GPP
access and set a Notification timer. If the UE has provided the MUSIM-RAI as
specified in clauses 6.5.3.1.1 and 6.5.3.3.1, the UE can include those PDU
sessions in the MUSIM-RAI that the UE wants network to trigger (or not
trigger) MT service delivery indication using the non-3GPP access. The UE may
also indicate to the network that all MT data related to 3GPP access shall be
delivered over non-3GPP access.
If the UE is not in CM-CONNECTED state for non-3GPP access and if the UE is
leaving the current 3GPP system for 3GPP access, UE may then initiate service
request procedure via non-3GPP access as described in clause 4.12.4.1 of TS
23.502 [6] to request re-establishment of the NAS signalling connection.
Editor\'s note: Whether and how to handle the scenario where the UE is
registered over 3GPP and non-3GPP access in different PLMNs is FFS.
### 6.25.3 Procedures
Network Triggered Service Request procedure in clause 4.2.3.3 step 4c of TS
23.502 [6] applies.
### 6.25.4 Impacts on existing entities and interfaces
UE: upon coordinated leaving requests from the network to be paged via NAS
Notification.
AMF: when requested by the UE the AMF shall page the UE via NAS Notification.
## 6.26 Solution #26: MT service delivery when multiple USIMs are registered
in the same serving PLMN
### 6.26.1 Introduction
The solution applies to Key Issue #2 \"Enabling Paging Reception for Multi-
USIM Device\".
The solution applies to both 5GS and EPS.
NOTE: In case of EPS, the AMF and UDM network functions as used in this
solution are exchanged with MME and HSS.
### 6.26.2 Functional Description
The proposed solution is based on the following principles:
\- The user consent may allow the UE to indicate to the network that 1)
multiple USIMs are in the same UE and 2) both USIMs register with the same
serving PLMN.
\- If the multiple USIMs are registered with the same serving PLMN, the
network attempts to allocate the same serving AMF, if possible.
\- If the same AMF serves the registrations for USIM1 and USIM2, an internal
association is established between the MM contexts for USIM1 and USIM2.
\- If the serving AMFs for USIM1 and USIM2 cannot be co-located (e.g. because
different AMFs are serving different sets of Network Slices), the serving AMFs
establish an association between the MM contexts for USIM1 and USIM2.
\- During a paging procedure for UE using USIM1 and if the UE using USIM2 is
in CM-Connected state, the following applies:
\- The AMF may provide in the Paging request message the UE identifier of the
other USIM registration (e.g. USIM2 UE ID) which allows NG-RAN to schedule the
radio resources USIM2\'s transmissions in such that the UE using USIM1 is able
to receive the Paging message.
### 6.26.3 Procedures
This clause shows the Registration procedure for the case of multiple USIMs
registering to the same serving PLMN. The procedure includes two variants: (A)
when the same AMF serves the registrations for USIM1 and USIM2; and (B) when
different AMFs serve the registrations for USIM1 and USIM2.
Figure 6.26.3-1: Signalling flow for registration of a second USIM (USIM2) in
the same serving PLMN and MT service delivery
1\. UE registers with the network using USIM1. The AMF1 is serving network
entity.
2\. The UE is triggered to perform a second registration with second USIM
(USIM2). The UE, i.e. the ME part of the UE, detects that the selected serving
PLMN for the registration with USIM2 is the same PLMN which is used for the
registration with USIM1. The UE may request the user consent whether to reveal
to the network that both USIMs operate in the same UE.
If the user consent is positive, the UE may provide MUSIM-related information
to the network containing MUSIM support and the temporary ID of USIM1\'s
registration. If the user consent is negative, the UE does not provide MUSIM-
related information to the network.
3\. The UE sends Registration Request for USIM2. The UE may send an additional
MUSIM-related information to the network, particularly MUSIM support and an
identifier for the registration context of the USIM1 (e.g. USIM1 GUTI). The
USIM1 GUTI is an indication to AMF2 that the UE is registered with another
USIM in the same network.
NOTE 1: The sending of the USIM1 GUTI in the Registration Request for USIM2
has to be checked with SA WG3.
NOTE 2: The operator policy or UE subscription data may be used to determine
that association between the MM contexts of both USIMs is not allowed.
4\. The AMF2 attempts to discover AMF1 based on the USIM1 GUTI. Once the AMF2
verifies that the AMF1 is existing and reachable, the AMF2 determines whether
AMF1 can serve USIM2\'s registration request. The AMF2 can perform this based
on the internal configuration or together with NSSF (following the
determination of the Allowed NSSAI).
NOTE 3: If the AMF1 and AMF2 are isolated and cannot exchange signalling
messages, then the AMF2 completes the Registration procedure with an
indication that MUSIM support cannot be provided to the UE. The procedure
would continue with step 9.
**(A) USIM1 and USIM2 registrations are in the same AMF (i.e. the USIM1 and
USIM2 MM contexts are in the same AMF1):**
5\. The AMF2 initiates AMF relocation procedure towards the AMF1. For example,
the AMF relocation procedure is described in clause 4.2.2.2.3 of TS 23.501
[4]. The AMF1 completes the registration procedure for USIM2.
6\. The AMF1 serves both USIM1 registration and USIM2 registrations. The AMF1
internally links the MM contexts (i.e. the USIM1 MM context and USIM2 MM
context). The SUPI1 and SUPI2 are used as keys to link the MM contexts.
7\. A request for paging for USIM1 arrives at the AMF1. The AMF1 internally
checks the USIM2\'s MM context to find out the CM state of the USIM2\' MM
context.
In a particular case of USIM2 in CM-Connected state and USIM2 using Emergency
or priority service (MPS), the AMF1 may decide to not perform the paging to
USIM1.
8\. The AMF1 sends Paging request message for USIM1 as follows:
8a. If the USIM2 MM context is in CM-Idle state, the AMF1 sends Paging request
contains the UE identifier of the UE using USIM1 (UE-ID_USIM1) and the Paging
cause.
8b. If the USIM2 MM context is in CM-Connected state, the AMF1 sends N1
Notification message to USIM2 (over the USIM2 N1 signalling connection)
including the Paging request message USIM1.
**(B) USIM1 and USIM2 are registered in different AMFs:**
9\. In step 9a, If the AMF1 and AMF2 cannot be co-located, the AMF2 subscribes
with AMF1for notifications upon AMF change. Vice-versa the AMF1 subscribes
with AMF2 for updates upon AMF change.
NOTE 3: For example, if the AMF2 is re-located to AMF3, the AMF3 (based on the
MM context info about association with USIM1) updates AMF1 about the changed
USIM2 location to AMF3. AMF1 updates the USIM2 location with AMF3.
In step 9b, the AMF2 sends Registration Accept message to the UE.
NOTE 4: The solution works also in case that UE using USIM1 is registered in
NG-RAN/5GC and the UE using USIM2 is attached to LTE/EPC, if N26 is deployed.
10\. The AMF1 receives a request for MT service (and possibly the service
type).
11\. AMF1 to AMF2: sends a request for CM state information (USIM1\'s SUPI,
USIM2\'s SUPI, CM state).
12\. If the CM state for USIM2 is Connected, the AMF1 sends a N1 Notification
message containing the Paging message for USIM1. If the CM state for USIM2 is
Idle, the AMF1 sends Paging message to RAN (not shown in the Figure 6.X.3-1).
13a. The AMF2 delivers the N1 Notification message (including the Paging
message for USIM1) to the USIM2\'s NAS protocol stack.
13b. The UE forwards internally the N1 Notification message to USIM1 protocol
stack.
### 6.26.4 Impacts on existing entities and interfaces
\- Impacts to AMF:
\- Establish an association between the MM contexts for USIM1 and USIM2. This
can be either within the same AMF or between different AMFs;
\- Include in the Paging request message the UE identifier of the other USIM
registration.
\- Impacts to UE:
\- Determine that multiple USIMs are registering to the same serving PLMN;
\- Include additional UE identifier (e.g. GUTI) of the other USIM
registration.
## 6.27 Solution #27: User plane paging in a master PLMN
### 6.27.1 Introduction
This solution addresses KI#2,3. This is a user- plane-notifications-based
solution where the push notification server, acts as a transparent relay
carrying a secure Notifications towards the IP address of one USIM to the IP
address obtained in the PLMN where the other USIM is registered, which becomes
the master PLMN for paging notifications.
### 6.27.2 Functional Description
Figure 6.27.2-1
In this description we refer to 5GS and to the case of 2 USIMs, but it can be
generalised to EPS and to more than two USIMs. It is assumed that one PLMN
serving one subscription supports the feature.
1\. The UE registers as UE-1 on PLMN-1 and as UE-2 on PLMN-2. At this step the
UE may be provided with the configuration of address NAT traversal mechanism
for the UE to use to enable reachability to the paging notification server.
Which to use is based on the need to overcome also symmetric NATs so the ICE
suite including STUN and TURN may be considered (TURN being the last option if
STUN does not work).
NOTE 1: PLMN-1 and PLMN-2 need not be the HPLMN of the UE-1 for USIM-1 and
UE-2 USIM-2. They are just the serving PLMNs the virtual UEs the MUSIM UE is
comprised of select.
The PLMNs provide indication about whether they support paging notification
via user plane of the other network. This information could be provided either
in broadcast channel or in registration response message (the latter is used
in the message sequence).
2\. The UE-1 establishes a PDU session on PLMN-1 which is suitable to obtain
notifications (e.g. an Internet APN). This corresponds to address IP-1. If the
UE is behind a NAT, IP-1 may also be the result of a NAT traversal binding as
observed by a server in PLMN-2 provided at registration time (in which case
also a port number for NAT traversal may be added part of this information
also). The UE 1 runs the NAT traversal as necessary.
3\. The UE-2 establishes a PDU session on PLMN-2 which is suitable to obtain
notifications. This corresponds to address IP-2. If the UE is behind a NAT,
IP-2 may also be the result of a NAT traversal binding as observed by a server
in PLMN-2 provided at registration time (in which case also a port number for
NAT traversal may be part of this information also). The UE 2 runs the NAT
traversal as necessary.
4\. If PLMN-1 indicated support, UE-1 further registers with PLMN-1 AMF-1 the
IP-2 and provides the security key, SEC-2, which AMF-1 needs to use to encrypt
and integrity protect the notifications towards IP-2. AMF-1 returns to the
UE-1 a handle for PLMN-2 that UE-1 needs to use to specify that PLMN-2 is
actively receiving paging notifications on user plane for PLMN-1 and UE-1 at
IP-2, and it shall not start considering PLMN-2 active for such task till the
UE indicates so by a subsequent registration with this handle (Handle-2). At
any time, the UE-1 and PLMN-1 may refresh this Handle value and related
security key SEC-2 when executing a registration procedure. IP-2, Handle-2,
SEC2 are stored in the AMF-1 UE context.
5\. If PLMN-2 indicated support, UE-2 further registers with PLMN-2 AMF-2 the
IP-1 and provides a security key, SEC-1, which AMF-2 needs to use to encrypt
and integrity protect the notifications towards IP-1. AMF-2 returns to the
UE-2 a Handle (handle-2) for PLMN-1 that UE-2 needs to use to specify that
PLMN1 is actively receiving paging notifications on user plane for PLMN2 and
UE2 at IP-1, and it shall not start considering PLMN-1 active for such task
till the UE indicates so by a subsequent registration with this handle. [As an
alternative, the AMF may provide the security key SEC1 alongside handle 1
(Handle 1) At any time the UE2 and PLMN2 may refresh this Handle-1 value and
related security key SEC-1 when executing a registration procedure. IP-1,
Handle-1, SEC-1 are stored in the AMF-2 UE context
6\. The UE decides internally which PLMN should be the master and receive
paging notifications from other PLMNs to the UE.
7\. This decision could be a UE-specific implementation. One example would be
the UE utilizes the very first PLMN it registered to as master. Or, the MUSIM
UE selects the one where it is currently connected, if in all other PLMNs the
UE is idle mode.
8\. When (for example) the UE selects PLMN-1 to act as the PLMN where the user
plane paging notification need to be delivered for UE-2 (i.e. PLMN1 is
master), it causes UE-2 to indicate to PLMN-2 in a registration message that
the PLMN identified by Handle-1 is ready to take paging notifications on the
user plane for UE-2 at IP-1.
\- This causes PLMN-2 stop delivering paging on the control plane for UE-2.
\- UE-2 stops monitoring paging channel on PLMN-2.
NOTE 2: It can be observed that If PLMN-1 and PLMN-2 are the same PLMN, there
is no difference in behaviour as the handle per se identifies a UE+PLMN pair
and not just a PLMN.
9\. When (for example) UE-2 receives on PLMN-1 a notification at IP-1, this
notification message is encrypted, and integrity protected by using the Key
that UE-2 had provided and it includes that it needs to respond to a page for
PLMN-2 and the Handle-1 to identify the UE-2 in PLMN-2 and the security
association. The details of the paging notification format are FFS but it may
include a correlation ID to identify the paging transaction.
a) If the UE-2 decides to accept the paging notification, UE1 shall indicate
by mobility registration message to AMF-1 that PLMN identified by Handle-2 is
becoming the one receiving paging notifications on user plane at IP-2 for
UE-1, and then UE-2 proceed to execute a service request in PLMN-2. PLMN-1
stops paging the UE on C-plane in PLMN-1.
b) If the UE-2 decides NOT to respond to paging, it provides a response on the
user plane by replying to the incoming paging message, indicating to AMF-2 to
stop paging the ongoing paging on user plane towards IP-1 for UE-2 as it is
busy. The AMF-2 includes in the paging notification a correlation value so it
can understand what paging notification a response about. This message uses
the Handle-1 provided to AMF-2 by UE-2 to identify IP-1 on PLMN-1 for the
AMF-2 to understand the security association and decrypt the message using the
secret key UE-2 has provided for IP-1.
### 6.27.3 Procedures
Figure 6.27.3-1: Outline of the message flows involved in this solution
In the diagram above we only show interaction with AMFs. Similar concepts
apply with MMEs. Also, a Push notification server is not indicated however the
deployment may also comprise the AMFs interacting with a push notification
server by an open interface used to relay the messages to and from it.
Messages from the UE to the Push notification server shall include the GUAMI
for routing purposes.
NOTE 1: PLMN-1 and PLMN-2 need not be the HPLMN of the UE-1 for USIM-1 and
UE-2 USIM-2. They are just the serving PLMNs the UEs select.
1\. The UE-1 for USIM-1 registers in PLMN-1 and PLMN2. It indicates support of
UP paging notification in MUSIM assistance info). For sake of argument we
suppose both the two PLMNs support UP notification. The configuration for a
NAT traversal protocol server to be used is provided.
2\. The UE-2 for USIM-2 obtains a suitable IP address in PLMN2. It may here
execute a NAT traversal protocol to find out the outside IP@ and port number.
This is recorded as IP-2 in the UE. The UE 2 keeps the NAT state updated as
necessary
3\. The UE-1 for USIM 1 obtains a suitable IP address in PLMN 1. It may here
execute a NAT traversal protocol to find out the outside IP@ and port number.
This is recorded as IP-1 in the UE. The UE 1 keeps the NAT state updated as
necessary
4\. The UE-1 for USIM 1 may register with PLMN 1 AMF-1 the IP-2 and provide a
Security Key for the encryption and Integrity protection of Push notifications
SEC-2. The AMF-1 stores IP-2 and SEC-2 alongside a Handle it assigns to
identify this security association (Handle 2). Handle-2 is provided to the
UE-1 in registration accept.
5\. The UE-2 for USIM 2 may register with PLMN 2 AMF-2 the IP-1 and provide a
Security Key for the encryption and Integrity protection of Push notifications
SEC-1. The AMF-2 Stores IP-1 and SEC-1 alongside a Handle it assigns to
identify this security association (Handle 1). Handle-1 is provided to the
UE-2 in registration accept.
6\. The MUSIM UE determines that PLMN-1 is the master PLMN
7\. UE-2 by means of registration indicates that the paging messages need to
be delivered to the endpoint identified by Handle-1.
8\. The AMF-2 needs to page UE-2. Since UE-2 is registered for push
notification, AMF-2 initiates paging on the user plane towards IP-2 securing
the notification with SEC-1 and prepending handle -1 for identification of
security association.
NOTE 2: The format of the handle must ensure it is globally unique, it is FFS.
It shall enable using it to route to the right AMF that has assigned it.
9\. UE-1 received the paging notification on the user plane. It detects the
handle is associated to USIM2. So it delivers the notification to UE-2. The
two cases 10a or 10b may occur.
10a. The MUSIM UE decides to respond to paging for UE-2 on PLMN-2. UE-1
registers with AMF-1 PLMN2 as the one to send notifications to by providing
Handle-2. Then it abandons PLMN-1 and performs a service request in PLMN-2.
This cause the PLMN2 to become the master PLMN.
10b The MUSIM UE decides to not respond to paging. So it responds on the user
plane to AMF-2 to stop paging indicating Handle 1. The format of this message
is FFS, but it includes handle 1 so this can be routed to AMF-2.
### 6.27.4 Impacts on existing entities and interfaces
UE: support UP notifications as outlined above.
AMF, MME: support of support UP notifications as outlined above.
Paging notification server: may be required as new entity.
## 6.28 Solution #28: \"Important Service\" paging cause
### 6.28.1 Introduction
The solution applies to Key Issue #1 \"Handling of MT service\".
The solution reuses the overall mechanism of Solution #1. However, it is the
AMF/MME determines a paging cause for \"Important Service\" in the paging
message for UE in CM-Idle mode, if AMF/MME decides that the paging is for an
important service.
### 6.28.2 Functional Description
An \"important service\" indication (one paging cause) is needed to indicate
the important service i.e. voice service or others as UE requested (or based
on operator policy) in UE assistance information as discussed in KI#3 (e.g.
anything UE has not indicated restriction for MT service notification is
candidate for important service). Optionally, AMF/MME may determine services
other than voice service as important services based on subscription data from
UDM. However \"Voice service\" is always considered as the important service
by default.
Table 6.28.2-1: Important Service indication
                                 Description
* * *
Important Service indication The downlink traffic is corresponding to the
important service (by default it is voice service unless other information
indicating it is not important). UE determines to respond to the paging based
on the indication.
For UE in CM-Idle mode, AMF/MME determines it is an important service based on
HPLMN/DNN/5QI configuration and the ARP/PPI received from the SMF, UE provided
assistance info if any, or operator policy. Similar mechanism applies to NG-
RAN for UE in RRC-Inactive where NG-RAN uses the 5QI/ARP/PPI parameters and
assistance info from AMF if there is any to decide the setting of paging cause
of Important Service.
NOTE: In future release the UE can negotiate additional services with the
network that need to be considered as \"important service\".
### 6.28.3 Impacts on services, entities and interfaces
UE, AMF, MME, RAN:
\- Similar impact as in Solution #1 for the case with only one Paging Cause.
# 7 Evaluation
## 7.1 Evaluation of Solutions for Key Issue #1: Handling of Mobile Terminated
service with Multi-USIM device
Table 7.1-1
+---------------+-----------------------------------------------------+ | Solution #1 | This solution introduces additional information | | | into the paging message to indicate why the UE was | | | paged. Based on the indication and potential | | | ongoing service on the other USIM, the UE | | | determines whether to respond to the page or not. | | | The UE does not need to respond to paging. The | | | solution avoids responding to paging to identify | | | why the UE was paged, thus minimizing any impact on | | | the ongoing service on the other USIM. In the case | | | the UE does not respond to the page, the paging | | | request will be escalated and waste radio resources | | | within the whole registration area. Furthermore, | | | the AMF may think the UE suffers from RLF or lost | | | power. | | | | | | The granularity of the indication is under | | | discussion. A complete evaluation will be made once | | | this is finalized. | | | | | | The solution can be applied to both RRC_Inactive | | | and RRC_Idle. | | | | | | The solution has UE, RAN and core network impacts. | | | | | | Privacy considerations are under evaluation by | | | SA WG3. | +===============+=====================================================+ | Solution #2 | The solution introduces a mechanism for the UE | | | paged in network B to negotiate a one-off period of | | | absence with network A to allow responding to | | | paging in network B. Other activity may also be | | | performed by the UE during the negotiated period of | | | absence. However no user control of the solution is | | | described. While performing the other operations | | | some service interruption may occur in the other | | | USIM (depending upon service). | | | | | | The solution can prevent unnecessary interruptions | | | of the current service (depending on the impact of | | | the negotiated period of absence on the current | | | service) by determining full necessary details of | | | the incoming service (i.e. voice call form who, | | | what data etc.), as if the incoming service is not | | | desired the current service is not disconnected. | | | | | | The solution requires the UE to respond to paging, | | | thus preventing paging escalation (under normal | | | conditions). | | | | | | The solution has UE and RAN impacts. | | | | | | Whether solution #2 is similar to RRC procedure | | | for graceful leaving in clause 6.5.3.3 of solution | | | #5 where the pause time can also serve the same | | | purpose and therefore whether solution #2 can be | | | merged with solution #5 is subject to feedback | | | from RAN groups. | | | | | | The duration of the period of absence is subject to | | | RAN confirmation. | +---------------+-----------------------------------------------------+ | Solution #3 | This solution adds a response to paging to inform | | | the paging network that the UE has received the | | | page but does not want to / cannot fully engage in | | | the MT triggered service at this time, and is | | | intended to be used in addition to other solutions | | | for KI#1. While performing the response some | | | service interruption may occur in the other USIM | | | (depending upon service). | | | | | | The solution requires the UE to respond to paging, | | | thus preventing paging escalation (under normal | | | conditions). The solution may have RAN impact to | | | support RRC-Inactive. | | | | | | The solution has UE, RAN and core network impacts. | +---------------+-----------------------------------------------------+ | Solution #7 | Solution #7 additionally addresses \"Key Issue 2: | | | Enabling Paging Reception for Multi-USIM Device\". | | | | | | The solution is based on the deployment of an | | | internet facing IP based service protocol that the | | | UE accesses via the current serving network to | | | receive push notifications of paging. The protocol | | | used for the push notifications is to be defined. | | | | | | The UE must maintain a connection to the paging | | | server via the serving network while it is in | | | CONNECTED. The protocol used for paging via the | | | paging server is not defined. The details of the | | | authentication are to be defined. The NAS layer in | | | the UE has to support IP communications and be | | | triggered to respond to paging based on traffic via | | | IP. | | | | | | The solution requires paging the UE in network A | | | and after some delay via network B. If the UE | | | monitors paging in both networks, there is a | | | possibility that the UE does not receive either | | | paging. If the UE only monitors paging in network | | | B, the UE can receive the paging. The solution | | | introduces some delay for paging and paging | | | resource wastes. The MNO has to maintain a new | | | internet facing service for the UEs to register | | | with. The AMF/MME in the network also has to | | | connect to the external facing server. It is not | | | defined what protocol is used for the AMF/Paging | | | Server. | | | | | | When actively communicating with one network the UE | | | does not need to listen to paging in the other | | | network. | | | | | | The solution prevents unnecessary interruptions of | | | the current service to receive paging. | | | | | | The user, depending upon service plan from serving | | | network, may be charged by the serving network for | | | the data required for the paging server i.e. | | | control plane signalling in one network (typically | | | not charged to the end user) may end up being | | | charged to the user in the other network. | | | | | | The solution has UE and core network impacts. It | | | requires deployment of a paging server as well as | | | necessary secure interactions between this server, | | | the UE and the network. | +---------------+-----------------------------------------------------+ | Solution #8 | This solution uses N3GPP access to register with an | | | N3IWF on the non-serving network and a new paging | | | indication is sent via the N3GPP service to inform | | | the UE about paging. The AMF can determine whether | | | the UE is reachable via the 3GPP access based on | | | the N3GPP registration. Additional information to | | | enable paging filtering by the network for each PDU | | | Session may be provided. | | | | | | The solution requires the UE to support N3GPP | | | access and register and maintain a connection to | | | the N3IWF while the UE is in CONNECTED on the | | | serving network. | | | | | | The solution may prevent unnecessary interruptions | | | of the current service and the level of service | | | differentiation is at the PDU Session level. | | | Depending upon how services map onto PDU Sessions | | | broad categories for how the user/UE determines | | | what is unnecessary may only be possible. | | | | | | The solution prevents unnecessary interruptions of | | | the current service to receive paging. | | | | | | The user, depending upon service plan from serving | | | network, may be charged by the serving network for | | | the data required for the N3GPP access. | | | | | | The solution has UE and core network impacts. It | | | requires deployment of N3IWF as well as necessary | | | (secure) interactions with the UE and the network. | +---------------+-----------------------------------------------------+ | Solution #9 | This solution is intended to be used in addition to | | | solution #1 to filter paging into different groups | | | based on the incoming callers identity. The | | | identities are provided to the non-serving network | | | to enable the grouping and each of the groups | | | provide a different paging cause to the UE. | | | | | | There may be privacy issues providing the grouping | | | of preferred and non-preferred for each incoming | | | caller to the network. The additional benefit of | | | grouping by preferred and non-preferred is not | | | clear. The total number of groups is unclear as | | | some identities may not be included is either of | | | the groups and the behaviour in this case is not | | | clear. | | | | | | The solution has UE and core network and IMS | | | services impacts. | | | | | | The solution requires user interaction to determine | | | the callers identities and whether preferred/not | | | preferred and to update the settings in the | | | network. Additional MMI impacts are expected. | +---------------+-----------------------------------------------------+ | Solution #10 | The solution uses PPI to enable the network to | | | filter paging for the UE. The UE provides the rules | | | for filtering in the Registration procedure. | | | | | | When the network pages the UE, the network | | | determines whether to page based on the PPI and | | | filtering rules provided by the UE. The filtering | | | rules are expected to be coarse (voice, data, SMS | | | etc.). | | | | | | How and when the filtering rules are updated is not | | | defined. The rules apply at all times including | | | when the UE is in IDLE or CONNECTED on the serving | | | network, therefore incoming services maybe filtered | | | whether needed or not. A more dynamic update from | | | the UE will introduce significant additional | | | signalling and it is not clear how that signalling | | | interacts with the state of the serving network. | | | While performing the establishment of new filtering | | | rules, some service interruption may occur in the | | | other USIM (depending upon service).If the | | | filtering is only updated when the UE leaves the | | | network some overhead ay be reduced. | | | | | | The solution may prevent unnecessary interruptions | | | of the current service but only for very broad | | | categories for how the user/UE determines what is | | | unnecessary (i.e. voice call but not who from, data | | | arrival but not what etc.). | | | | | | The solution requires the UE to respond to paging | | | and avoids the network to page services that are | | | filtered out, thus preventing paging escalation | | | (under normal conditions). | | | | | | The solution makes the UE unreachable for services | | | that are filtered out. | | | | | | The solution has UE RAN and core network impacts. | | | The solution may require user interaction and | | | related MMI impacts are expected. | +---------------+-----------------------------------------------------+ | Solution #11 | This solution adds an upper time bound for when the | | | UE must respond to (NAS) paging and provides a | | | response to paging to inform the paging network | | | that the UE/user has received the page but does not | | | want to / cannot fully respond at this time. No | | | additional information is proposed in paging. | | | | | | The solution does not prevent unnecessary | | | interruptions of the current service (service | | | dependent), as it requires the UE to respond, | | | however the response may be delayed for a period of | | | time. The solution prevents paging escalation | | | (under normal conditions). The solution is expected | | | to only need a short duration gap. | | | | | | The solution has UE and core network impacts. | +---------------+-----------------------------------------------------+ | Solution #12 | Solution #12 additionally addresses \"Key Issue 2: | | | Enabling Paging Reception for Multi-USIM Device\". | | | | | | When the UE is paged, if there is no response an | | | SMS is sent to the UE using MSISDN of the serving | | | network. The UE has to provide the non-serving | | | network with the MSISDN the UE uses on the serving | | | network. | | | | | | There may be privacy issues with providing the | | | non-serving network the MSISDN from the serving | | | network. | | | | | | SMS is not a time critical service therefore the | | | SMS based paging notification maybe delayed without | | | warning. | | | | | | The solution requires paging the UE in network A | | | and after some delay via network B. If the UE | | | monitors paging in both networks, there is a | | | possibility that the UE does not receive either | | | paging. If the UE only monitors paging in network | | | B, the UE can receive the paging. The solution | | | introduces some delay for paging and paging | | | resource wastes. | | | | | | The NAS layer in the UE has to support being | | | triggered to respond to paging based on receiving | | | SMS messages from another network. The solution | | | does not introduce any mechanisms for the UE to | | | perform any activity with the other network that is | | | not actively communicating with (e.g. listen to | | | paging, respond to paging, perform mobility update | | | etc.), however the UE does not need to listen to | | | paging. | | | | | | The solution may prevent unnecessary interruptions | | | of the current service but only for very broad | | | categories for how the user/UE determines what is | | | unnecessary (i.e. voice call but not who from, data | | | arrival but not what etc.). The service categories | | | and how they are determined is not defined. | | | | | | The solution may not prevent paging escalation, as | | | the SMS may be delayed. | | | | | | The user, depending upon service plan from serving | | | network, may be charged by the serving network for | | | paging notification SMS. The solution has UE and | | | core network impacts. | +---------------+-----------------------------------------------------+ | Solution #13 | The solution targets asymmetric scenarios where a | | | \"serving\" network provides data services and a | | | \"non-serving\" network provides IMS voice and | | | SMS-over-IMS. It does not intend to support data | | | services on the non-serving network. | | | | | | The UE registers with the non-serving network via | | | its ePDG/N3IWF using an IP connection through the | | | serving network. Prior to registering the UE | | | detaches/enters MICO mode on the non-serving | | | network. When a MT IMS voice call or SMS is | | | received, SIP signalling is initiated towards the | | | UE via the ePDG/N3IWF. | | | | | | The solution relies on existing mechanisms (e.g., | | | paging) when in IDLE mode in the serving network to | | | inform the UE of MT services on the non-serving | | | network. | | | | | | The solution prevents unnecessary interruptions of | | | the current service to receive paging and to | | | respond for non-serving network\'s IMS voice and | | | SMS services. | | | | | | When the user accepts the voice call from the | | | \"non-serving\" network, the media plane can be | | | established over the top of the \"serving\" network | | | or directly over 3GPP access in the \"non-serving\" | | | network. In the case of the media plane being | | | established directly over the 3GPP access (step 10A | | | in Figure 6.13.3-1) the \"non-serving\" network | | | temporarily becomes the \"serving\" network for the | | | duration of the voice call and the solution does | | | not explain how MT services on the previous | | | \"serving\" network are handled. | | | | | | Charging records may be generated by the serving | | | network for the data required. | | | | | | The solution has UE and IMS network impacts. | +---------------+-----------------------------------------------------+ | Solution #23 | The solution is based on UE indicates MUSIM device | | | during registration. Then the network provides | | | MUSIM specific policy to UE which will trigger UE | | | to establish MA PDU session. The policy may also | | | include a valid area (e.g. PLMN list, or TAs per | | | PLMN). The network will establish N3GPP access | | | resources during PDU session establishment when it | | | is possible. By this, when UE is engaged in another | | | system, the UE can send suspending indication to | | | SMF and SMF will only delivery MT service | | | notification via N3GPP access. | | | | | | The solution allows to prevent service interruption | | | on one USIM when paging on another USIM and avoid | | | paging escalation. It introduces additional feature | | | dependency i.e. ATSSS and the related complexity. | | | Even with ATSSS supported, it is restricted to PDU | | | Sessions that can be multi-access. This solution | | | required repeated path switches, associated | | | signalling and related latency. | | | | | | The solution is only applicable when there is N3GPP | | | coverage and therefore cannot be considered as a | | | complete solution for KI#1 and KI#3. The solution | | | has UE and core network impacts. | +---------------+-----------------------------------------------------+ | Solution #24 | The solution requires that one USIM provides the | | | GUTI allocated to another USIM to the network | | | during registration. The GUTI will be used by the | | | network to selection the same AMF (e.g. via AMF | | | reallocation) for both USIMs and link the UE | | | contexts in AMF between the USIMs. When MT service | | | comes for one USIM in IDLE mode, the MT service | | | notification (i.e. the NAS Notification) will be | | | delivered via the other USIM if it is in CONNECTED | | | mode (i.e. If there is one USIM is in connected | | | mode, no need to monitoring paging channel of the | | | other USIM). The NAS notification includes the | | | paging cause in solution 1. | | | | | | The solution is targeting the specific scenario | | | when USIMs are registered in the same PLMN. The | | | solution seems also targeting only the case when | | | one USIM is in IDLE mode and the other is in | | | CONNECTED mode (e.g. paging is still required in | | | both systems if both USIMs are in IDLE mode). The | | | solution may prevent unnecessary interruptions of | | | the current service The solution has UE and core | | | network impacts. | | | | | | Additional system complexity is imposed to restrict | | | the UEs operation in this specific scenario (not | | | described in the solution). The solution may also | | | have AS impacts (to restrict operation in this | | | scenario). | +---------------+-----------------------------------------------------+ | Solution #25 | The solution enforces that UE performs N3GPP paging | | | in the current network if it is registered over | | | both 3GPPA and N3GPPA, i.e. when UE left the 3GPP | | | access of the current system (after providing an | | | indication) for services in another system. When MT | | | service comes, the AMF shall trigger NAS | | | notification via N3GPP if the UE is in CONNECTED | | | mode over N3GPPA. | | | | | | The solution may prevent unnecessary interruptions | | | of the current service over 3GPP access. | | | | | | The solution is only applicable when there is N3GPP | | | coverage and therefore cannot be considered as a | | | complete solution for KI#1. The solution has UE | | | and core network impacts. | +---------------+-----------------------------------------------------+ | Solution #26 | The solution is similar to solution #24 above. The | | | extra description is about the scenario when USIMs | | | are handled by different AMFs due to certain reason | | | (e.g. different slices): 1) Linkages between UE | | | contexts are established between AMFs based on | | | signalling exchanges. 2) If MT service comes for a | | | USIM in IDLE mode, the AMF retrieves the other USIM | | | CM state information from the other AMF. If the | | | other USIM state is in CONNECTED mode, the AMF | | | forward the NAS notification to other AMF and to | | | UE. | | | | | | The solution targeting the specific scenario when | | | USIMs are registered in the same PLMN. The solution | | | seems targeting only the case when one USIM is in | | | IDLE mode and the other is in CONNECTED mode (e.g. | | | paging is still required in both systems if both | | | USIMs are in IDLE mode). The signalling between two | | | AMFs delays the paging and signalling is wasted if | | | the other USIM is also in IDLE mode. The solution | | | may prevent unnecessary interruptions of the | | | current service. | | | | | | The solution has UE and core network impacts. | +---------------+-----------------------------------------------------+ | Solution #27 | The solution applies the similar logic as solution | | | #7 (e.g. deploy a paging server to deliver NAS | | | notification in one system via user plane in | | | another system) with the following differences: 1) | | | IP/security handles are exchanged between the 2 | | | systems/AMFs during registration/PDU session | | | establishment, before the paging notification can | | | be delivered via the other system. 2) UE can select | | | which system is the master PLMN and to receive MT | | | service notifications from other system. | | | | | | The solution introduces new logics for IP/security | | | handles exchange between two systems, and also new | | | entities for paging delivery via user plane. In | | | comparison to Sol #7 there is less delay and waste | | | of paging resources | | | | | | It requires deployment of a paging server as well | | | as necessary secure interactions between this | | | server, the UE and the network. | | | | | | The solution may prevent unnecessary interruptions | | | of the current service. | +---------------+-----------------------------------------------------+
Among the above solutions, solution 7, 8, 12, 13, and 27 can be thought of as
notification type solutions.
\- All the notification type solutions have no impact on RAN
\- Solutions 7 and 27 require a new network entity called paging server
\- Solution 8 relies on deployment of the N3IWF.
\- Solution 12 relies on SMS for delivery of MT service notification and can
suffer from unpredictable and large delays
\- Solution 13 relies on the ePDG being deployed, and has no impact on EPS/5GS
and the UE NAS layer. Alternative B of solution 13, which is optional, imposes
a user plane burden on the PLMN, which is carrying traffic towards the
ePDG/N3IWF and raises related charging issues that require SA WG5 involvement.
However, these could be addressed based on SLA between operators and user
subscription. These issues are expected to less problematic for intra-operator
scenarios, and are outside the scope of 3GPP as existing functionality is
used.
NOTE 1: Solution 13 can work with both ePDG and N3IWF.
## 7.2 Evaluation of Solutions for Key Issue #2: Enabling Paging Reception for
Multi-USIM Device
Many solutions (#7, #12, #14 #15, #16, #17, #18, #19, #20 and #21) are related
to KI#2 and address either one or two aspects of the key issue in clause 5.2.1
in TR 23.761. Below is a table of short summary of the solutions:
Table 7.2-1
+---------------+-----------------------------------------------------+ | Solution #7 | A solution to push \"paging request\" from one | | | system to UE via IP network and the user plane of | | | the other system. UE responds to the paging request | | | to either stop or encourage paging in different | | | systems. New network function (e.g. paging server | | | interacts between packer core NF and IP network) is | | | introduced. | | | | | | The solution provides the possibility for UE | | | monitoring paging only in one system thus the PO | | | overlapping aspect is not an issue. | +===============+=====================================================+ | Solution #8 | A solution to deliver NAS notification (instead of | | | paging request) of one system via user plane of | | | another system. This is achieved by UE registers | | | via N3IWF (via IP tunnel of the other system), thus | | | the AMF can normally consider the UE is reachable | | | via N3IWF and can deliver NAS notification in case | | | of MT service. | | | | | | The solution is not marked for KI #2. However, it | | | provides the possibility for UE monitoring paging | | | only in one system thus the PO overlapping aspect | | | is not an issue. | +---------------+-----------------------------------------------------+ | Solution #12 | Similar to solution 7/8, the delivery of \"paging | | | request/NAS notification\" via the other system. | | | However, the \"paging request/NAS notification\" in | | | this solution is delivered as SMS from one system | | | to another via SCEF/NEF and the SMS-SC. | +---------------+-----------------------------------------------------+ | Solution #14 | When UE detects paging collision possibility, it | | | requests the AMF to reallocate a new 5G-GUTI. The | | | UE also provides assistant info (e.g. a UE_ID or | | | range) to AMF, which is used by the AMF to generate | | | the desired 5G-GUTI (in the range) which will lead | | | to a different PO. | | | | | | Not applicable in case all multiple USIMs are | | | registered in EPS. | +---------------+-----------------------------------------------------+ | Solution #15 | When UE detects paging collision possibility, it | | | provides new UE_ID to network via NAS in one | | | system. CN will provide it, as the UE index value | | | for paging, to RAN (e.g. in the paging request), | | | and it is used by the RAN to re-calculate the PF/PO | | | during paging (The NAS temporary ID, e.g. 5G-GUTI, | | | does not need to be reallocated). | +---------------+-----------------------------------------------------+ | Solution #16 | When UE detects paging collision possibility in EPS | | | system, the UE provides \"offset\" value suggestion | | | via NAS to the network, and the network allocates | | | the final \"offset\" value which shall be used, | | | i.e. as part of the UE index value for paging, for | | | the calculation of PF/PO based on during paging. | +---------------+-----------------------------------------------------+ | Solution #17 | UE provides assistant info to the network which can | | | help the avoidance of the PO collision. The | | | assistance info can either be \"replacement ID\" | | | which can impact the PO calculation during paging | | | or info related to periodicity of UE reachability | | | (e.g. DRX cycle)/number of USIMs in the device, | | | which can impact the paging strategy (e.g. the | | | repetition).The assistant info may also indicate to | | | the network that the paging shall be stopped | | | totally. | +---------------+-----------------------------------------------------+ | Solution #18 | The solution proposes that network may conduct | | | paging on consecutive POs in case of PO collision, | | | and UE can monitor the consecutive PO in case of PO | | | collision happed in the previous PO. | +---------------+-----------------------------------------------------+ | Solution #19 | The solution proposes that UE based | | | solution/implementation shall be used to | | | minimize/solve the PO collision issue. | +---------------+-----------------------------------------------------+ | Solution #20 | When UE detects PO collision, it triggers the NAS | | | mobility Registration Request procedure indicating | | | new 5G-GUTI allocation is needed. No assistance | | | info from UE side in terms of new 5G-GUTI | | | regeneration. | | | | | | Not applicable in case all multiple USIMs are | | | registered in EPS. | +---------------+-----------------------------------------------------+ | Solution #21 | It proposes the UE schedules a \"gap\" with current | | | system in RRC connected mode for activities (e.g. | | | monitoring paging) in other system. This solution | | | addresses mainly the case that one system is in | | | connected mode and the other system in in IDLE or | | | RRC inactive. | | | | | | The procedure for negotiate the \"gap\" is RRC | | | level. | +---------------+-----------------------------------------------------+ | Solution #24 | This solution proposes to deliver NAS notification | | | with paging cause to USIM-1 in idle through the | | | connection of the other USIM-2 in connected when | | | the two USIMs are registered to the same AMF in | | | same network. AMF confirms and maintains the link | | | between the 5GMM context of USIM-1 and 5GMM context | | | of USIM-2. | | | | | | It is applicable for the case that multiple USIMs | | | in MUSIM UE registered in same PLMN and only when | | | one USIM is in IDLE mode and the other is in | | | CONNECTED mode (e.g. paging is still required in | | | both systems if both USIMs are in IDLE mode). | +---------------+-----------------------------------------------------+ | Solution #26 | This solution proposes to deliver NAS notification | | | to one USIM-1 in idle through the connection of the | | | other USIM-2 in connected when the two USIMs are | | | registered to the same/different AMF(s) in same | | | network. The AMF(s) establishes the association and | | | updates the states between the MM contexts of the | | | USIM-1 and USIM-2. | | | | | | It is applicable for the case that multiple USIMs | | | in MUSIM UE registered in same PLMN, and only when | | | one USIM is in IDLE mode and the other is in | | | CONNECTED mode (e.g. paging is still required in | | | both systems if both USIMs are in IDLE mode). | | | | | | The signalling between two AMFs delays the paging | | | and signalling is wasted if the other USIM is also | | | in IDLE mode. | +---------------+-----------------------------------------------------+ | Solution #27 | It proposes similar logic as solution#7, to deploy | | | a paging server to deliver the NAS notification in | | | one system via user plane in another system with | | | following differences: 1) IP/security handles are | | | exchanged between the 2 systems/AMFs during | | | registration/PDU session establishment before | | | delivering the paging notification. 2) UE can | | | select which system is the master PLMN and to | | | receive MT service notifications from other system. | | | | | | This solution requires deployment of a paging | | | server as well as necessary secure interactions | | | between this server,. In comparison to Sol #7 | | | there is less delay and waste of paging resources | +---------------+-----------------------------------------------------+ | Solution #28 | This solution introduces a paging cause \"important | | | service\" that can be set by the network upon | | | incoming MT traffic detected and classified to be | | | an \"important service\" based on indication | | | provided by the UE of \"important services\" or | | | based on subscription data. | | | | | | UE may prioritize to respond the paging with | | | important indication rather than based on | | | preconfigured rule in UE. | | | | | | The solution can be applied to both RRC_Inactive | | | and RRC_Idle. | | | | | | The solution has UE, RAN and core network impacts. | +---------------+-----------------------------------------------------+
These solutions can be further divided into following groups:
\- Group 1: Change parameters related to the PF/PO calculation to avoid PO
collision. Solution #14, #15, #16, partial #17 and #20 are part of this group.
\- Group 2: Change paging strategy to avoid PO collision. Solution #18 and
partial #17 are part of this group.
\- Group 3: Deliver MT service notification in the current system. Solution
#7, #8, #24, #26, #27 and #12 are part of this group.
\- Group 4: UE implementation solution. Solution #19 is part of this group.
\- Group 5: UE absence, in RRC Connected mode, based solution. Solution 21 is
part of this group.
For group 1, solution #14, #20 request 5G-GUTI change to impact the PF/PO
calculation while solution #15 and #16, partial #17 request extra NAS level ID
to impact the PF/PO calculation. All of them may lead to certain increased
signalling. The necessity of the UE provided input to influence the PO needs
further study.
For group 2, solution #18 is a solution to page on the consecutive POs.
However, this may lead to increases in the used paging resource and delay.
Solution #18 may have impact on the RAN paging implementation for MultiSIM
devices. Solution 17 partially proposes to use UE assistant info to influence
paging strategy. However, there are no details on how the paging strategy is
adapted. The effects of paging strategy change based on periodicity of the UE
reachability and number of USIMs are questionable.
For group 3, #7, #8, #12 and #27 of them introduce additional NFs in the Core
Network. The benefits, considering the cost/complexity, are not clear in
general. Solution 7 and Solution 12 also introduce delay and paging resource
wastage. Solution 13 proposes traffic from one system is delivered via another
system. #24 and #25 introduce the solutions when the multiple USIMs are
registered in same PLMN.
For group 4, solution 19 proposes UE implementation-based solution. This is
not limited by the 3GPP. Whether UE implementation based solution can be
considered \'good enough\' requires feedback from RAN WGs.
For group 5, solution 21 mainly addresses the scenario where a device is
connected in one system and IDLE/RRC inactive in another system. The solution
proposes a \"gap\" mechanism in RRC connected mode in the current system in
which paging is received. It is not clear how long the max value of this
\"gap\" can be.
Based on above, it is recommended to ask RAN a set of questions and wait for
their answers and feedback before SA WG2 concludes on this key issue. The
questions can be found in the LS out S2-2006037.
## 7.3 Evaluation of Solutions for Key Issue #3: Coordinated leaving for
Multi-USIM device
Editor\'s note: These are interim evaluation for Key issue #3
The solutions for key issue#3 can be analysed from the following aspects:
Table 7.3-1
+-------------------------------------------+---------------+ | Categorization | Reference | +===========================================+===============+ | NAS triggered leaving | Solution #4 | | | | | | Solution #5 | | | | | | Solution #23 | | | | | | Solution #25 | | | | | | Solution #27 | +-------------------------------------------+---------------+ | AS triggered UE leaving | Solution #5 | | | | | | Solution #6 | | | | | | Solution #22 | +-------------------------------------------+---------------+ | Short term leaving and long term leaving. | Solution #5 | +-------------------------------------------+---------------+ | With MUSIM-RAI | Solution #5 | | | | | | Solution #25 | +-------------------------------------------+---------------+ | Without MUSIM-RAI | Solution #6 | | | | | | Solution #23 | | | | | | Solution #27 | +-------------------------------------------+---------------+ | Local leaving | Solution #4 | | | | | | Solution #22 | +-------------------------------------------+---------------+
1) NAS triggered leaving (UE-requested Leave and Resumption via NAS
signalling) and RRC triggered leaving (UE-requested Leave and Resumption via
RRC signalling).
\- RRC triggered leaving has impacts on EUTRA/NR. For RRC triggered leaving,
RRC_Inactive or RRC_Idle can be applied based on the network decision. In
comparison to RRC_Idle, RRC_Inactive is beneficial for fast resumption. The
network acknowledgement for RRC triggered UE leaving can be done by the RAN
node immediately by means of RRC release procedure. If during the leave the UE
has been moved to Idle state, the resumption is performed with the Service
Request procedure.
\- NAS triggered leaving has impacts on S1/NG as defined in solution#4 and #5.
The network acknowledgement for NAS triggered UE leaving can be done by the
RAN node by means of RRC release procedure after the CN triggered NG/S1
release or update procedure.
Editor\'s note: Whether \"EUTRA impact\" includes the impacts on S1/NG is
pending to the feedback from RAN.
2) Short term leaving and long term leaving.
\- In solution#5, it introduces short term leaving and long term leaving.
Further clarification is needed on the definition of the two and how the UE
selects between the two.
3) With MUSIM Release Assistance Info (MUSIM-RAI) from the UE or without.
\- The optional Release assistance info for MUSIM is used to assist the
network to handle the MT data and decide whether to trigger paging to the UE
during the UE leaving.
\- In the MUSIM-RAI as described in solution#5, it states that the UE may
decide \"PDU sessions that the UE want network to trigger (or not trigger) MT
service delivery indication\". The network may discard/block MT service
delivery for the PDU session indicated by UE, considering together with the
policy in the network. In general, the PDU session can carry different kind of
services.
\- In current MUSIM-RAI as described in solution#5, it is also proposed
\"Services that the UE wants network to trigger (or not trigger) MT service
delivery indication\" and \"no MT data shall be delivered at all\" (e.g. due
to specific service in another network and can\'t answer paging request). The
network can discard/block MT data or attempt normal MT service delivery and
paging based on the MT service.
\- In current MUSIM-RAI as described solution#5, it is also proposed \"The
time period expected by the UE that will be away from this serving network\".
\- The network decides to put the UE in RRC inactive or in CM-IDLE based on
the time period reported by UE, together with other available info. The
benefit and the need for the UE to report time period needs further
discussion.
\- In some cases, MUSIM RAI may not be provided, for example if the UE does
not prepare it when triggering leaving, or the UE does not support providing
it.
\- In solution#6, leaving indication is provided. The MT data handling is
handled based on the network implementation.
4) Local leaving.
\- AS-level local leaving is the possibility for UE to leave the system
without waiting for network acknowledgement. UE is expected to receive
acknowledgment from the network when requesting NAS-triggered leaving or AS-
triggered leaving. It is FFS under which conditions that UE is allowed to
proceed with leaving the network without acknowledgment from the network.
# 8 Conclusions
## 8.1 Conclusions for Key Issue #1: Handling of Mobile Terminated service
with Multi-USIM device
The following conclusions are agreed for the baseline functionality:
\- For both EPS and 5GS, only the voice is supported to be indicated as the
paging cause to the UE. The indicated Paging Cause as voice can be determined
based on the PPI related to voice.
\- The network applies the Paging Cause only for UEs that have provided
indication they operate in MUSIM mode.
NOTE 1: The CS call indicator from MSC is handled differently (see TS 23.272
[17]) to this Release 16 Paging Cause.
\- The Paging Cause Solution shall ensure that a UE can detect when the
feature is not supported in the cell where it is camping (either because the
RAN or CN does not support the feature).
NOTE 2: \"voice\" refers to MMTel voice (5GS and EPS) and CS domain voice (EPS
only).
Editor\'s note: Final conclusion depends on further feedback from RAN WG2, RAN
WG3 and SA WG3.
\- If Multi-USIM device received paging by Network-A in RRC_Idle mode and the
device decides to accept the paging, UE shall perform as existing procedure
(send the Service Request message).
\- If Multi-USIM device received paging by Network-A in RRC_Idle mode and the
device decides not to accept the paging, a UE supporting NAS BUSY indication
attempts to send a BUSY Indication via the SERVICE REQUEST message to network
unless it is unable to do so e.g. due to UE implementation constraints.
\- As part of the SERVICE REQUEST message carrying the BUSY indication the UE
may provide assistance information to the network regarding MT data/signalling
handling, as described in clause 8.3.
NOTE 3: Whether Busy indication is supported for RRC_Inactive case is up to
RAN decision.
\- The UE MMI shall not require input from the user in order for the UE to
decide whether to respond to paging.
## 8.2 Conclusions for Key Issue #2: Enabling Paging Reception for Multi-USIM
Device
Editor\'s note: To be completed.
Based on the evaluation in clause 7.2 the following **[interim]{.underline}**
conclusions are agreed for the baseline functionality:
\- For paging reception in EPS when the paging collision is detected, the
following principles are agreed:
\- Upon the UE detecting paging collisions between two networks, the UE
initiates a TAU procedure to the MME of one network, to request an IMSI
offset.
\- UE may provide an IMSI offset to MME during TAU procedure.
> NOTE: Details on the request e.g. offset range will be defined during the
> normative phase.
\- The MME returns an IMSI offset to the UE in the TAU Accept.
\- During CN paging delivery, the MME provides to the RAN the UE_ID which is
derived based on the IMSI and the IMSI offset. RAN and UE use the UE ID as the
IMSI to calculate the PF/PO.
## 8.3 Conclusions for Key Issue #3: Coordinated leaving for Multi-USIM device
Based on the evaluation in clause 7.3 the following conclusions are agreed for
the baseline functionality:
\- For leaving in E-UTRA/EPS access, the NAS-level leaving MM procedure is
recommended to be supported. The UE sends NAS SERVICE REQUEST or TAU message
indicating leave request to releases the RRC-Connected state.
\- For leaving in NR/5GS access, both RRC-level leaving and the NAS-level
leaving MM procedure are recommended to be supported.
> NOTE 1: The support of the RRC-level leaving for NR/5GS is to be discussed
> in RAN WG.
\- For leaving in E-UTRA/5GS access and NR/5GS, the NAS-level leaving MM
procedure is recommended to be supported. The UE sends NAS Service Request or
Registration Request message indicating the leave request to release from the
RRC-Connected state and the UE enters CM-IDLE.
> NOTE 2: If a UE can be released to RRC_Inactive mode by a NAS-level leaving
> request in addition to CM_IDLE will be discussed during the normative work.
\- When the UE connection with the network is resumed, the previous assistance
info, if any, to temporarily restrict/filter MT data/signalling handling is
revoked:
\- When the UE performs the BUSY procedure (refer to clause 8.1) the UE may
include assistance information in the SERVICE REQUEST message for MT
data/signalling handling (e.g. paging restriction).
\- When the UE needs to remove the previously requested assistance information
from Idle state, the UE includes a release request indication in the SERVICE
REQUEST message. If no assistance information is provided, the existing paging
filtering is removed. This release request indication is needed so that the
network does not unnecessarily keep the UE in Connected state.
\- If the UE returns to the PLMN A from PLMN B to perform a TAU due to
mobility or periodic Update reasons, the TAU may include a release request
indication and optionally assistance information. If no assistance information
is provided, the existing paging filtering is removed. The release request
indication is needed so that the network does not unnecessarily keep the UE in
Connected state.
\- In the NAS SERVICE REQUEST or TAU message indicating leave request (EPS
case), the UE provides leaving indication to the CN and the UE may provide
assistance information to the network in the leaving procedure regarding MT
data/signalling handling.
\- The assistance information may include:
\- Information to temporarily restrict/filter MT data/signalling handling:
\- An indication that the UE should only be paged for voice (MMTel voice or CS
domain voice (for EPS)); or
\- An indication that the UE should not be paged at all; or
\- PDN connection(s) for MT notification/paging restriction.
> NOTE 3: Whether there is a need of an expected leaving time/duration
> information will be discussed in normative phase.
\- UE is expected to send a request for NAS level leaving or AS level leaving.
#