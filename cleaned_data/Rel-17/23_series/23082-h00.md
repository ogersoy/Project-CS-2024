# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document defines the stage 2 of the Call Forwarding (CF)
supplementary services for the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 0 Scope
The present document gives the stage 2 description of the call forwarding
supplementary services.
The group of supplementary services call offering supplementary services is
divided into 4 different supplementary services:
\- Call forwarding unconditional (CFU) (clause 1);
\- Call forwarding on mobile subscriber busy (CFB) (clause 2);
\- Call forwarding on no reply (CFNRy) (clause 3);
\- Call forwarding on mobile subscriber not reachable (CFNRc) (clause 4).
## 0.1 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP specifications\".
[2] 3GPP TS 22.004: \"General on supplementary services\".
[3] 3GPP TS 22.082: \"Digital cellular telecommunications system (Phase 2+);
Call Forwarding (CF) Supplementary Services ‑ Stage 1\".
[4] 3GPP TS 23.011: \"Technical realization of Supplementary Services\".
[5] 3GPP TS 23.015: \"Technical realisation of Operator Determined Barring
(ODB)\".
[6] 3GPP TS 22.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL); Service description, Stage 1\".
[7] 3GPP TS 23.018: \"Basic Call Handling; Technical ealization\".
[8] 3GPP TS 23.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL) Phase 3 -- Stage 2\".
[9] 3GPP TS 23.079: \"Support of Optional Routeing (SOR); Technical
realization\".
[10] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[11] 3GPP TS 23.093: \"Completion of Calls to Busy Subscriber (CCBS) ;
Stage2\".
[12] 3GPP TS 23.088: \"Call Barring (CB) Supplementary Service; Stage 2\".
## 0.2 Abbreviations
For the purposes of the present document, the abbreviations defined in 3G TR
21.905 apply.
## 0.3 The forwarded-to number
As indicated in 3GPP TS 22.082 the forwarded-to numbers are stored in the
international format.
If according to 3GPP TS 22.082 the served subscriber is provided with a
Translation Information Flag (TIF-CSI) then the HPLMN shall treat the
forwarded-to number transparently at the time of registration, i.e. not
perform any checks or translations. In this case the forwarded-to number shall
be stored in the format as it was received from the MS.
Therefore, if transferred, the forwarded-to number is transferred from the HLR
to other network entities and stored in the VLR always in the format as stored
in the HLR..
## 0.4 Cross phase compatibility
For the following supplementary services, a number of changes exist between
the present document and the Phase 1 specification:
\- Call forwarding unconditional;
\- Call forwarding on mobile subscriber busy;
\- Call forwarding on no reply;
\- Call forwarding on mobile subscriber not reachable.
The main body of the present document assumes that all network entities comply
with this version of the service. In each case an additional clause (clause
x.6) defines the additional requirements for when one or more network entities
or the MS complies with the Phase 1 specifications for the supplementary
service procedures.
## 0.5 Support of Long Forwarded-to Numbers
For the following supplementary services, it shall be possible to register a
long forwarded-to number which was not possible in previous versions of the
services:
\- Call forwarding unconditional;
\- Call forwarding on mobile subscriber busy;
\- Call forwarding on no reply;
\- Call forwarding on mobile subscriber not reachable.
The main body of the present document assumes that all network entities comply
with this version of the service. In each case an additional clause (clause
x.10) defines the additional requirements when one or more network entities
and/or the mobile station does not support Long Forwarded-to Numbers.
The functionality specified in this document does not imply any constraint on
the length of a forwarded to number, except where such a constraint is
explicitly stated.
## 0.6 Data stored in the HLR for all call forwarding services
The following data are stored in the HLR in common for all call forwarding
services:
\- The \"notification to CSE flag\". This flag applies for all call forwarding
services. When the data for any Call Forwarding are changed, the HLR checks
this flag. If the flag is set, the change is reported to the gsmSCF(s) defined
by the gsmSCF address list. See 3GPP TS 23.078.
\- The \"gsmSCF address list\", which is a list of gsmSCF addresses to which
Notification on Change of Subscriber Data is to be sent. This list applies to
all call forwarding services. See 3GPP TS 23.078.
# 1 Call forwarding unconditional (CFU)
## 1.1 Handling of call forwarding unconditional
### 1.1.1 Registration
At the beginning of registration subscription to the basic service, provision
of the supplementary service and sufficiency of registration information has
to be checked (see figure 1.2).
The following information has to be registered in the network:
1) the forwarded-to number (possibly including a sub-address);
2) information as to whether all calls or all calls of a specific basic
service group should be forwarded.
**The basic service group code**
If the registration request received by the HLR does not contain any basic
service group code, the registration shall be performed for all subscribed
basic service groups for which CFU is provided, see figure 1.2.
**The forwarded-to number**
If the forwarded-to number is a number in the HPLMN country, it may be entered
by the served mobile subscriber in three different formats, independent of his
actual location, according to the schemes:
1) national (significant) number;
2) (trunk) prefix plus national (significant) number;
3) international prefix, country code, national (significant) number.
The received number may have to be converted to an international number before
further processing.
The network may also validate the forwarded-to number before accepting the
call forwarding registration request.
If a served mobile subscriber is provided with the Translation Information
Flag (TIF-CSI) as part of the CAMEL subscriber data (refer to TS 23.078), the
network shall accept and store the forwarded-to number transparently at the
time of registration. In this case the network shall neither convert nor
validate the received number. Therefore the forwarded-to number may not comply
with the schemes indicated above.
For further details related to the handling of the forwarded-to number refer
to figure 1.2.
**Supplementary Service interaction**
Possible interaction situations between CFU and other call forwarding and
barring supplementary services must then be checked. This is described in
figure 1.2. Also see technical specifications 3GPP TS 22.004 and 3GPP TS
22.082. For interaction between CFU and other supplementary services (ie not
call barring or call forwarding services), the reader is referred to the
respective technical specification for those supplementary services.
**Interaction with CAMEL Phase 2 or higher**
Possible interaction between CFU and CAMEL Phase 2 or higher is described in
figure 1.2. If CAMEL Phase 2 or higher is not supported in the HLR, processing
continues from the \"No\" exit of the test \"Result=Pass\".
**Notifications to the subscriber**
When the mobile subscriber registers CFU, the network shall attempt to
register and activate the service. The network will return notification of
acceptance of the request. This notification will include the forwarded-to
number and possibly the basic service group code to which CFU is registered.
If the system cannot accept a registration request, the network sends a
notification that CFU registration was not successful to the served mobile
subscriber.
The information flow for registration of CFU is shown in figure 1.1.
MS MSC VLR HLR
───── ───── ───── ─────
│ │ │ │ │ │ │ │
│ │ Register CFU │ │ │ │ │ │
│ │--------------->│ │ │ │ │ │
│ │ │ │Register CFU│ │ │ │
│ │ │ │----------->│ │ │ │
│ │ │ │ │ │Register CFU│ │
│ │ │ │ │ │----------->│ │
│ │ │ │ │ │ │CFU1│
│ │ │ │ │ │ Acknowledge│ │
│ │ │ │ │ │\│ │ Erase CFU │ │ │ │
│ │ │ │----------->│ │ Erase CFU │ │
│ │ │ │ │ │----------->│ │
│ │ │ │ │ │ │CFU2│
│ │ │ │ │ │ Acknowledge│ │
│ │Release complete│ │ Acknowledge│ │\│ │ Activate CFU │ │ │ │
│ │ │ │-------------->│ │ Activate CFU │ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFU3│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │Deactivate CFU │ │ │ │
│ │ │ │-------------->│ │Deactivate CFU│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFU4│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ Acknowledge │ │\│ │ │ │ │ │
│ │ │ │Interrogate CFU│ │ │ │
│ │ │ │-------------->│ │ │ │
│ │ │ │ │ │Interrogate CFU│ │
│ │ │ │ │ │-------------->│ │
│ │ │ │ │ │ │ │
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ Info request │ │ │ │ │ │
│ │ │ │------------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ Info ack │MAF007│ │ │ │ │
│ │ │ │\│ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ Set-up │ │ │ │ │ │
│ │ │OR1:Y │-------------------------------------->│ │
│ │ │ │ │ │ │ │ │ │
│ │ Notification │ │ │ │ │ │ │ │
│ │\│ │ Info request │ │ │ │ │ │ │ │
│ │ │ │------------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Info ack │MAF007│ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Information request │ │ │ │ │ │
│ │ │OR1:Y │---------------------------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Information acknowledge │ │ │ │ │ │
│ │ │ │\│ │
│ │ Notification │ │ │ │ │ │ │ │ │ │
│ │\ A bit = 1, Q bit = 0;
2) Deactivated => A bit = 0, Q bit = 0 or 1
### 1.8.3 VLR only supports Phase 1 updating of subscriber information
When passing CFU information to a Phase 1 VLR, the HLR shall send the service
state information in a form which the VLR can accept, based on the logical
state held in the HLR, as follows:
1) (Provisioned, Not Registered, Not Active, Not Induced)
=> Erased, Deactivated;
2) (Provisioned, Registered, Not Active, Not Induced)
=> Registered, Deactivated;
3) (Provisioned, Registered, Active and Operative, Not Induced)
=> Registered, Activated;
4) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> Registered, Deactivated.
The HLR shall not pass a subaddress to a Phase 1 VLR.
### 1.8.4 GMSC only supports Phase 1 call handling
When a call is forwarded unconditionally, the HLR shall not pass the
subaddress to a Phase 1 GMSC. Calls shall be forwarded without the subaddress.
### 1.8.5 GMSC does not support CAMEL or supports CAMEL Phase 1 only
If the activation state of CFU is \"Active and Operative\" and if the
forwarded-to number is registered in a format other than international and if
the GMSC does not support CAMEL or supports CAMEL Phase 1 only, then when a
request for routeing information for a mobile terminated call is received in
the HLR, CFU shall not be invoked, i.e. the mobile terminated call
establishment will be continued towards the served mobile subscriber.
## 1.9 Contents of Messages
### 1.9.1 Messages on the C interface (MSC-HLR)
#### 1.9.1.1 Send Routing Info
This message is specified in 3GPP TS 23.018.
Send Routing Info contains the following IE\ specific to Long Forwarded-to
Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the GMSC supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 1.9.1.2 Send Routing Info ack
This message is specified in 3GPP TS 23.018.
Send Routing Info ack contains the following amendment to the Forwarded-\ to
number IE and an additional IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Forwarded-to number C E.164
number of the C subscriber. Shall be present if the HLR has determined that
the call is to be forwarded and at least one of the HLR and GMSC does not
support Long Forwarded-to Numbers; otherwise shall be absent. Long forwarded-
to number C Number of the C subscriber. Shall be present if the HLR has
determined that the call is to be forwarded and Long Forwarded-to Numbers are
supported by the HLR and the GMSC; otherwise shall be absent.
* * *
### 1.9.2 Messages on the Um, B and D interfaces (MS -- network)
#### 1.9.2.1 RegisterSS
This message corresponds to the MAP_REGISTER_SS service\ specified in 3GPP TS
29.002.
* * *
Information element name Required Description Long FTN supported C Shall be
present if the MS supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 1.9.2.2 ActivateSS
This message corresponds to the MAP_ACTIVATE_SS service\ specified in 3GPP TS
29.002.
* * *
Information element name Required Description Long FTN supported C Shall be
present if the MS supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 1.9.2.3 InterrogateSS
This message corresponds to the MAP_INTERROGATE_SS service\ specified in 3GPP
TS 29.002.
* * *
Information element name Required Description Long FTN supported C Shall be
present if the MS supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
### 1.9.3 Information flows on the J interface (HLR -- gsmSCF)
#### 1.9.3.1 Any Time Subscription Interrogation
This IF is specified in 3GPP TS 23.078.
Any Time Subscription Interrogation contains\ the following IE specific to
Long Forwarded-to Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the gsmSCF supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 1.9.3.2 Any Time Subscription Interrogation ack
This IF is specified in 3GPP TS 23.078.
The Call forwarding SS data IE within the Any Time Subscription Interrogation
ack IF contains the following amendment to the Forwarded-to number IE and an
additional IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Forwarded-to number C Shall be
present if at least one of the HLR and the gsmSCF does not support Long
Forwarded-to Numbers; otherwise shall be absent. Long forwarded-to number C
Shall be present if the HLR and the gsmSCF support Long Forwarded-to Numbers;
otherwise shall be absent.
* * *
#### 1.9.3.3 Any Time Modification
This IF is specified in 3GPP TS 23.078.
Any Time Modification contains the following IE specific to Long Forwarded-to
Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the gsmSCF supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 1.9.3.4 Any Time Modification ack
This IF is specified in 3GPP TS 23.078.
The Call forwarding SS data IE within the Any Time Modification ack IF
contains the following amendment to the Forwarded-to number IE and an
additional IE specific to Long Forwarded-to Numbers.
* * *
Information element name Required Description Forwarded-to number C Shall be
present if at least one of the HLR and the gsmSCF does not support Long
Forwarded-to Numbers; otherwise shall be absent. Long forwarded-to number C
Shall be present if the HLR and the gsmSCF support Long Forwarded-to Numbers;
otherwise shall be absent.
* * *
## 1.10 Exceptional Procedures
### 1.10.1 MS does not support Long Forwarded-to Numbers
The MS shall indicate whether it supports Long Forwarded-to Numbers in the
RegisterSS, ActivateSS and InterrogateSS messages.
If the MS does not support Long Forwarded-to Numbers, and a long forwarded-to
number is registered, the acknowledgement message shall not contain a
forwarded-to number.
### 1.10.2 HLR does not support Long Forwarded-to Numbers
The HLR shall not allow a subscriber to register a long forwarded-to number.
### 1.10.3 GMSC does not support Long Forwarded-to Numbers
The HLR can determine from the Send Routing Info message whether the GMSC
supports Long Forwarded-to Numbers.
If the GMSC does not support Long Forwarded-to Numbers and the HLR identifies
that CFU should be invoked, then:
\- If the registered forwarded-to number contains a maximum of 15 digits then
the HLR shall populate the Forwarded‑to number parameter in the Send Routing
Info ack message with the registered forwarded-to number.
\- If the registered forwarded-to number contains more than 15 digits then
\- If a default forwarded-to number (containing a maximum of 15 digits) is
stored in the HLR, the HLR shall populate the Forwarded-to number parameter in
the Send Routing Info ack message with the default forwarded-to number
\- Otherwise, the HLR shall instruct the GMSC to release the call.
# 2 Call forwarding on mobile subscriber busy
## 2.1 Handling of call forwarding on mobile subscriber busy
### 2.1.1 Registration
The same rules apply for the registration of Call Forwarding on Mobile
Subscriber Busy as were described for Call Forwarding Unconditional in clause
1.1.1 above, with the exception of the checking of interaction with other
supplementary services. Basic registration of information is illustrated in
figure 2.2.
**Supplementary Service Interaction**
Possible interaction situations between CFB and other supplementary services
must then be checked. This is described in figure 2.2. Also see 3GPP TS 22.004
and 3GPP TS 22.082. For interaction between CFB and other supplementary
services (ie not call barring or call forwarding services), the reader is
referred to the respective technical specification for those supplementary
services.
**Interaction with CAMEL Phase 2 or higher**
Possible interaction between CFB and CAMEL Phase 2 or higher is described in
figure 2.2. If CAMEL Phase 2 or higher is not supported in the HLR, processing
continues from the \"No\" exit of the test \"Result=Pass\".
The information flow for registration of CFB is shown in figure 2.1.
MS MSC VLR HLR
───── ───── ───── ─────
│ │ │ │ │ │ │ │
│ │ Register CFB │ │ │ │ │ │
│ │--------------->│ │ │ │ │ │
│ │ │ │Register CFB│ │ │ │
│ │ │ │----------->│ │ │ │
│ │ │ │ │ │Register CFB│ │
│ │ │ │ │ │----------->│ │
│ │ │ │ │ │ │CFB1│
│ │ │ │ │ │ Acknowledge│ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ Erase CFB │ │ │ │
│ │ │ │----------->│ │ │ │
│ │ │ │ │ │ Erase CFB │ │
│ │ │ │ │ │----------->│ │
│ │ │ │ │ │ │CFB2│
│ │ │ │ │ │ Acknowledge│ │
│ │ │ │ │ │\│ │ Activate CFB │ │ │ │
│ │ │ │-------------->│ │ Activate CFB │ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFB3│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ Acknowledge │ │\│ │Deactivate CFB │ │ │ │
│ │ │ │-------------->│ │Deactivate CFB│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFB4│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │Interrogate CFB│ │ │ │
│ │ │ │-------------->│ │ │ │
│ │ │ │ │ │ │ │
│ │ │ │ Acknowledge │ │ │ │
│ │ │ │\│ │Info req │ │ │ │ │ │ │ │ │ │
│ │ │ │-------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack │ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info request │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │NDUB │ │ │ │ │
│ │ │ │ │ │ │ │Busy subscriber │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │
│ │ Release │ │\│ │ Set-up │ │
│ │ │ │ │ │ │ │ │ │----------------->│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Notif │ │ │ │
│ │ │ │ │ │ │ │ │OR2:Y│------>│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │OR3:Y│ │ │ │ │
│ │Notification│ │\│ │Info req │ │ │ │ │ │ │ │ │ │
│ │ │ │-------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack │ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info request │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │Set-up │ │ │ │
│ │ │ │ │ │ │ │ │ │------>│ │ │ │
│ │ │ │ │ │ │ │ │ │ │UDUB │ │ │
│ │ │ │ │ │ │ │ │ │ UDUB │ │ │ │
│ │ │ │ │ │ │ │Busy subscriber │ │\│ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │
│ │ Release │ │\│ │ Set-up │ │
│ │ │ │ │ │ │ │ │ │------------------>│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │OR2:Y│ │ │ │ │
│ │Notification│ │\│ │Info req│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info request │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │NDUB │ │ │ │ │ │ │
│ │ │ │ │ │ │ │Busy subscriber │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │ │ │
│ │Release│ │\│ │Information req │ │ │ │
│ │ │ │ │ │ │ │ │ │--------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Information ack │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Notif│ │ │ │ │ │
│ │ │ │ │ │ │ │ │OR2:Y│---->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │OR3:Y│ │ │ │ │ │ │
│ │ Notif │ │\│ │Info req │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │-------->│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info request │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ Set-up│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │------>│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │UDUB│ │ │ │ │
│ │ │ │ │ │ │ │ │ │ UDUB │ │ │ │ │ │
│ │ │ │ │ │ │ │Busy subscriber│ │\│ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │ │ │
│ │Release│ │\│ │ Information req │ │ │ │
│ │ │ │ │ │ │ │ │ │----------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Information ack │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ Notification │OR2:Y│ │ │ │ │ │ │
│ │ Notif │ │\││Info request │ │ │ │ │ │
││││------------->│ │ │ │ │ │
││││││││││
││││Info ack │MAF008│ │ │ │ │
││││\│ │ │ │
││││││││││
││││Set-up │ │ │ │ │ │
│││OR1:Y │-------------------------------------->│ │
││││││││││
││Notification │ │ │ │ │ │ │ │
││\│ │ Info request │ │ │ │ │ │ │ │
││││------------->│ │ │ │ │ │ │ │
││││││││││││
││││Info ack │MAF008│ │ │ │ │ │ │
││││\│ │ │ │ │ │
││││││││││││
││││Information request │ │ │ │ │ │
│││OR1:Y │---------------------------------->││││
││││││││││││
││││Information acknowledge │ │ │ │ │ │
││││\│ │
││Notification │ │ ││││││││
││\ P bit =1, R bit = 1, A bit = 1, Q bit = 0;
2) Registered, Deactivated => P bit =1, R bit = 1, A bit = 0, Q bit = 0 or 1;
3) Erased => P bit =1, R bit = 0, A bit = 0, Q bit = 0 or 1.
### 2.8.3 VLR only supports Phase 1 updating of subscriber information
When passing CFB information to a Phase 1 VLR, the HLR shall send the service
state information in a form which the VLR can accept, based on the logical
state held in the HLR, as follows:
1) (Provisioned, Not Registered, Not Active, Not Induced)
=> Erased, Deactivated;
2) (Provisioned, Registered, Not Active, Not Induced)
=> Registered, Deactivated;
3) (Provisioned, Registered, Active and Operative, Not Induced)
=> Registered, Activated;
4) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> Registered, Deactivated.
The HLR shall not pass a subaddress to a Phase 1 VLR.
### 2.8.4 VLR only supports Phase 1 call handling
When a call is forwarded on busy, as the HLR does not pass the subaddress to
the VLR, calls shall be forwarded without the subaddress.
### 2.8.5 VLR does not support CAMEL or supports CAMEL Phase 1 only
When passing CFB information to a VLR not supporting CAMEL or supporting CAMEL
Phase 1 only, the HLR shall send the registration parameter \"forwarded-to
number\" only if it is registered in a format which the VLR can accept, i.e.
international format.
If the registration state for CFB is \"Registered\" and the forwarded-to
number is registered in a format other than international, then when updating
a VLR not supporting CAMEL or supporting CAMEL Phase 1 only the HLR shall
modify the service state information of CFB as follows.
1) (Provisioned, Registered, Not Active, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
2) (Provisioned, Registered, Active and Operative, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
3) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
According to the definitions in clause 2.5 no forwarded-to number will be
passed to the VLR in these cases. The modification of the service state
information sent to the VLR shall have no impact on the service state
information stored in the HLR.
If the VLR supports Phase 1 updating of subscriber information only, a further
translation of the service state information as defined in clause 2.8.3 shall
be performed by the HLR.
### 2.8.6 GMSC only supports Phase 1 call handling
When a call is forwarded on busy, the HLR shall not pass the subaddress to a
Phase 1 GMSC. Calls shall be forwarded without the subaddress.
### 2.8.7 GMSC does not support CAMEL or supports CAMEL Phase 1 only
If the activation state of CFB is \"Active and Operative\" and if the
forwarded-to number is registered in a format other than international and if
the GMSC does not support CAMEL or supports CAMEL Phase 1 only, then when a
request for routeing information for a mobile terminated call is received in
the HLR, CFB shall not be invoked. The HLR shall return a busy subscriber
error.
## 2.9 Contents of messages
The same additions apply for CFB as for CFU, see clause 1.9. The following
additions are specific to CFB.
### 2.9.1 Messages on the B interface (MSC-VLR)
#### 2.9.1.1 Send Info For Incoming Call ack
This message is specified in 3GPP TS 23.018.
Send Info For Incoming Call ack contains the following amendmentto the
Forwarded-to number IE,\ specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Forwarded-to number M Number of
the C subscriber.
* * *
### 2.9.2 Messages on the D interface (VLR-HLR)
#### 2.9.2.1 Insert Subscriber Data
This message corresponds to the MAP-INSERT-SUBSCRIBER-DATA service specified
in 3GPP TS 29.002.
Insert Subscriber Data contains the following IE\ specificto Long Forwarded-to
Numbers:
* * *
Information element name Required Description Long forwarded-to number C Shall
be present if the subscriber has a long forwarded-to number registered;
otherwise shall be absent.
* * *
#### 2.9.2.2 Update Location
This message corresponds to theMAP_UPDATE_LOCATION service specified in 3GPP
TS 29.002.
Update Location contains the following IE specific\ to Long Forwarded-to
Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the VLR supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
#### 2.9.2.3 Provide Roaming Number
This message is specified in 3GPP TS 23.018.
Provide Roaming Number contains the following IE specific\ to Long Forwarded-
to Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the GMSC and the HLR both support Long Forwarded-to Numbers;
otherwise shall be absent.
* * *
#### 2.9.2.4 Restore Data
This message corresponds to the MAP_RESTORE_DATA service specified in 3G TS
29.002.
Restore Data contains the following IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Long FTN supported C Shall be
present if the VLR supports Long Forwarded-to Numbers; otherwise shall be
absent.
* * *
### 2.9.3 Messages on the E interface (VMSC-GMSC)
#### 2.9.3.1 Resume Call Handling
This message is specified in 3GPP TS 23.079.
Resume Call Handling contains the following amendment to the Forwarded-to
number IE and an additional IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Forwarded-to number C E.164
number of the C subscriber. Shall be present if the VMSC does not support Long
Forwarded-to Numbers; otherwise shall be absent. Long forwarded-to number C
Number of the C subscriber. Shall be present if the VMSC supports Long
Forwarded-to Numbers; otherwise shall be absent.
* * *
### 2.9.4 Messages on the MSC internal interface
#### 2.9.4.1 Perform Call Forwarding
This message is specified in 3GPP TS 23.018.
Perform Call Forwarding contains the following amendment to the Forwarded-to
number IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description Forwarded-to number M Number of
the C subscriber.
* * *
#### 2.9.4.2 Perform Call Forwarding ack
This message is specified in 3GPP TS 23.018.
Perform Call Forwarding ack contains the following amendment to the Forwarded-
to number IE specific to Long Forwarded-to Numbers:
* * *
Information element name Required Description
Forwarded-to number M Number of the C subscriber.\ NOTE: This number may be
different from the Forwarded-to number received in the Perform Call
Forwarding, as a result of CAMEL handling.
* * *
## 2.10 Support of Long Forwarded-to Numbers
### 2.10.1 MS does not support Long Forwarded-to Numbers
The handling for CFB is the same as that for CFU, see clause 1.10.1.
### 2.10.2 HLR does not support Long Forwarded-to Numbers
The handling for CFB is the same as that for CFU, see clause 1.10.2.
### 2.10.3 GMSC does not support Long Forwarded-to Numbers
The MSC/VLR can determine from the PRN whether the GMSC supports Long
Forwarded-to Numbers. If the GMSC does not support Long Forwarded-to Numbers
and a long forwarded-to number is registered for CFB, then on invocation of
CFB, ORLCF shall not be invoked.
### 2.10.4 MSC/VLR does not support Long Forwarded-to Numbers
The handling for CFB in the HLR is the same as that for CFU, see clause
1.10.3.
The VLR shall indicate whether it supports Long Forwarded-to Numbers in the
Update Location and Restore Data messages to the HLR. If the VLR does not
support Long Forwarded-to Numbers and a Long Forwarded-to Number is registered
for CFB, then:
\- If a default forwarded-to number (containing a maximum of 15 digits) is
stored in the HLR, the HLR shall send to the VLR an Insert Subscriber Data
message containing the default forwarded-to number in the Forwarded-to number
parameter.
\- Otherwise, the HLR shall send the VLR the following service state
information:
\- (Provisioned, Not Registered, Not Active, Not Induced)
For an MT call, if the following conditions are met then the HLR shall include
the Forwarding interrogation required parameter in the first Send Routing Info
ack:
\- The GMSC supports Optimal Routeing and Long Forwarded-to Numbers, and
\- The MSC/VLR does not support Long Forwarded-to Numbers,and
\- CFB is active and operative, and
\- A long forwarded-to number is registered for CFB.
According to the rules of Optimal Routeing, when the GMSC receives a Resume
Call Handling message from the MSC/VLR, it shall send a second Send Routing
Info message to the HLR allowing the HLR to insert the correct long forwarded-
to number.
# 3 Call forwarding on no reply
## 3.1 Handling of call forwarding on no reply
### 3.1.1 Registration
The same rules apply for the registration of Call Forwarding on No Reply as
were described for Call Forwarding Unconditional in clause 1.1.1 above, with
the exceptions described below. Basic registration of information is
illustrated in figure 3.2.
##### The No Reply Condition Timer {#the-no-reply-condition-timer .H6}
If a value for the no reply condition timer is not included in the
registration request received from the MS, then the previous value set by the
mobile user or the network operator applies.
##### Supplementary Service Interaction {#supplementary-service-interaction
.H6}
Possible interaction situations between CFNRy and other supplementary services
must then be checked. This is described in figure 3.2. Also see 3GPP TS 22.004
and 3GPP TS 22.082. For interaction between CFNRy and other supplementary
services (ie not call barring or call forwarding services), the reader is
referred to the respective technical specification for those supplementary
services.
##### Interaction with CAMEL Phase 2 or higher {#interaction-with-camel-
phase-2-or-higher .H6}
Possible interaction between CFNRy and CAMEL Phase 2 or higher is described in
figure 3.2. If CAMEL Phase 2 or higher is not supported in the HLR, processing
continues from the \"No\" exit of the test \"Result=Pass\".
The information flow for registration of call forwarding on no reply is shown
in figure 3.1.
MS MSC VLR HLR
──── ──── ──── ───────
│ │ │ │ │ │ │ │
│ │Register CFNRy │ │ │ │ │ │
│ │--------------->│ │ │ │ │ │
│ │ │ │Register CFNRy│ │ │ │
│ │ │ │------------->│ │ │ │
│ │ │ │ │ │Register CFNRy│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFNRy1│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │Erase CFNRy │ │ │ │
│ │ │ │----------->│ │ │ │
│ │ │ │ │ │Erase CFNRy │ │
│ │ │ │ │ │----------->│ │
│ │ │ │ │ │ │CFNRy2│
│ │ │ │ │ │ Acknowledge│ │
│ │ │ │ │ │\│ │Activate CFNRy│ │ │ │
│ │ │ │------------->│ │Activate CFNRy│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFNRy3│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ Acknowledge │ │\│ │Deactivate CFNRy│ │ │ │
│ │ │ │--------------->│ │DeactivateCFNRy│ │
│ │ │ │ │ │-------------->│ │
│ │ │ │ │ │ │CFNRy4│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │Interrogate CFNRy│ │ │ │
│ │ │ │---------------->│ │ │ │
│ │ │ │ │ │ │ │
│ │ │ │ Acknowledge │ │ │ │
│ │ │ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │-------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Call conf│ │ │ │
│ │ │ │ │ │ │ │ │ start │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │
│ │Release │ │\│ │ Set-up │ │
│ │ │ │ │ │ │ │ │ │-------------------->│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Notif │ │ │ │
│ │ │ │ │ │ │ │ │ OR2:Y │-------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR3:Y │ │ │ │ │
│ │ Notif │ │\│ │Info req│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ Set-up │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │-------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Call conf│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ start │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │ │ │
│ │Release │ │\│ │ Info request │ │ │ │
│ │ │ │ │ │ │ │ │ │------------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Info acknowledge │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Notif │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ OR2:Y │-------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR3:Y │ │ │ │ │ │ │
│ │ Notif │ │\ P bit =1, R bit = 1, A bit = 1, Q bit = 0;
2) Registered, Deactivated => P bit =1, R bit = 1, A bit = 0, Q bit = 0 or 1;
3) Erased => P bit =1, R bit = 0, A bit = 0, Q bit = 0 or 1.
### 3.8.3 VLR only supports Phase 1 updating of subscriber information {#vlr-
only-supports-phase-1-updating-of-subscriber-information-2 .list-paragraph}
When passing CFNRy information to a Phase 1 VLR, the HLR shall send the
service state information in a form which the VLR can accept, based on the
logical state held in the HLR, as follows:
1) (Provisioned, Not Registered, Not Active, Not Induced)
=> Erased, Deactivated;
2) (Provisioned, Registered, Not Active, Not Induced)
=> Registered, Deactivated;
3) (Provisioned, Registered, Active and Operative, Not Induced)
=> Registered, Activated;
4) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> Registered, Deactivated.
The HLR shall not pass a subaddress to a Phase 1 VLR.
### 3.8.4 VLR only supports Phase 1 call handling
When a call is forwarded on no reply, as the HLR does not pass the subaddress
to the VLR, calls shall be forwarded without the subaddress.
### 3.8.5 VLR does not support CAMEL or supports CAMEL Phase 1 only
When passing CFNRy information to a VLR not supporting CAMEL or supporting
CAMEL Phase 1 only, the HLR shall send the registration parameter \"forwarded-
to number\" only if it is registered in a format which the VLR can accept,
i.e. international format.
If the registration state for CFNRy is \"Registered\" and the forwarded-to
number is registered in a format other than international, then when updating
a VLR not supporting CAMEL or supporting CAMEL Phase 1 only the HLR shall
modify the service state information of CFNRy as follows.
1) (Provisioned, Registered, Not Active, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
2) (Provisioned, Registered, Active and Operative, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
3) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced)
According to the definitions in clause 3.5 no forwarded-to number will be
passed to the VLR in these cases. The modification of the service state
information sent to the VLR shall have no impact on the service state
information stored in the HLR.
If the VLR supports Phase 1 updating of subscriber information only, a further
translation of the service state information as defined in clause 3.8.3 shall
be performed by the HLR.
## 3.9 Contents of messages
The same additions apply for CFNRy as for CFB, see clause 2.9 (additions to
Send Routing Info and Send Routing Info ack are not used in this case).
## 3.10 Support of Long Forwarded-to Numbers
The handling for early CFNRc is the same as that for CFU, see clause 1.10.
The handling for late CFNRy is the same as that for CFB, see clause 2.10.
# 4 Call forwarding on mobile subscriber not reachable
## 4.1 Handling of call forwarding on mobile subscriber not reachable
### 4.1.1 Registration
The same rules apply for the registration of Call Forwarding on Mobile
Subscriber Not Reachable as were described for Call Forwarding Unconditional
in clause 1.1.1 above, with the exception of the checking of interaction with
other supplementary services. Basic registration of information is illustrated
in figure 4.2.
##### Supplementary Service Interaction {#supplementary-service-interaction-2
.H6}
Possible interaction situations between CFNRc and other supplementary services
must then be checked. This is described in figure 4.2. Also see 3GPP TS 22.004
and 3GPP TS 22.082. For interaction between CFNRc and other supplementary
services (ie not call barring or call forwarding services), the reader is
referred to the respective technical specification for those supplementary
services.
##### Interaction with CAMEL Phase 2 or higher {#interaction-with-camel-
phase-2-or-higher-1 .H6}
Possible interaction between CFNRc and CAMEL Phase 2 or higher is described in
figure 4.2. If CAMEL Phase 2 or higher is not supported in the HLR, processing
continues from the \"No\" exit of the test \"Result=Pass\".
The information flow for registration of call forwarding on mobile subscriber
not reachable is shown in figure 4.1.
MS MSC VLR HLR
─── ─── ──── ───────
│ │ │ │ │ │ │ │
│ │ Register CFNRc │ │ │ │ │ │
│ │--------------->│ │ │ │ │ │
│ │ │ │Register CFNRc│ │ │ │
│ │ │ │------------->│ │ │ │
│ │ │ │ │ │Register CFNRc│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFNRc1│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │Erase CFNRc│ │ │ │
│ │ │ │---------->│ │ │ │
│ │ │ │ │ │Erase CFNRc│ │
│ │ │ │ │ │---------->│ │
│ │ │ │ │ │ │CFNRc2│
│ │ │ │ │ │Acknowledge│ │
│ │ │ │ │ │\│ │Activate CFNRc│ │ │ │
│ │ │ │------------->│ │Activate CFNRc│ │
│ │ │ │ │ │------------->│ │
│ │ │ │ │ │ │CFNRc3│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ Acknowledge │ │\│ │Deactivate CFNRc│ │ │ │
│ │ │ │--------------->│ │Deactivate CFNRc│ │
│ │ │ │ │ │--------------->│ │
│ │ │ │ │ │ │CFNRc4│
│ │ │ │ │ │ Acknowledge │ │
│ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │Interrogate CFNRc│ │ │ │
│ │ │ │---------------->│ │ │ │
│ │ │ │ │ │ │ │
│ │ │ │ Acknowledge │ │ │ │
│ │ │ │\│ │Info req│ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │
│ │ │ │ │ │-------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │
│ │ │ │Info ack│ │\│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Release │OR1:N│ │ │
│ │Release│ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │OR2:Y│ │ │
│ │ Notif │ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req│ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Release │OR1:N│ │ │ │ │
│ │Release │\│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Info ack │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │OR2:Y│ │ │ │ │
│ │Notif │ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │Paging │ │ │ │
│ │ │ │ │ │ │ │ │ │------>│ │ │ │
│ │ │ │ │ │ │ │ │ no │ │ │ │ │
│ │ │ │ │ │ │ │ │response│ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │
│ │ │ │ │ │ │ │ subscriber│ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │
│ │Release│ │\│ │ Set-up │ │
│ │ │ │ │ │ │ │ │ │----------------->│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR2:Y │ │ │ │ │
│ │ Notif │ │\│ │Info req │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │-------->│ │ Provide │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │-------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │Paging│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │----->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ no │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │response│ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ subscriber│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │ │ │
│ │Release│ │\│ │ Info req │ │ │ │
│ │ │ │ │ │ │ │ │ │-------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Info ack │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR2:Y │ │ │ │ │ │ │
│ │ Notif │ │\│ │Info req │ │ │ │ │ │ │ │ │ │
│ │ │ │-------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │
│ │ │ │Info ack │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ radio │ │ │ │ │
│ │ │ │ │ │ │ │ │congestion│ │ │ │ │
│ │ │ │ │ │ │ │ Radio │ │ │ │ │ │
│ │ │ │ │ │ │ │ congestion │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │
│ │Release│ │\│ │ Set-up │ │
│ │ │ │ │ │ │ │ │ │-------------->│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR2:Y │ │ │ │ │
│ │ Notif │ │\│ │Info req│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Roam No │ │ │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Info req │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ radio │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │congestion│ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Radio │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ congestion │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │ │ │ │ │ │ │
│ │ │ │ Release │ │ │ │ │ │ │ │
│ │Release│ │\│ │ Info req │ │ │ │
│ │ │ │ │ │ │ │ │ │------------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ Info ack │ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ Notification │ OR2:Y │ │ │ │ │ │ │
│ │ Notif │ │\│ │Info request│ │ │ │ │ │
│ │ │ │----------->│ │ Provide │ │ │ │
│ │ │ │ │ │ roaming No │ │ │ │
│ │ │ │ │ │----------->│ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Not │ │ │ │
│ │ │ │ │ │ reachable │ │ │ │
│ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │Notification│OR2:Y│ │ │ │ │ │ │
│ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ roaming No │ │ │ │ │ │ │ │
│ │ │ │ │ │----------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Not │ │ │ │ │ │ │ │
│ │ │ │ │ │ reachable │ │ │ │ │ │ │ │
│ │ │ │ │ │\│ │ Provide │ │ │ │
│ │ │ │ │ │ │ │ │ │roaming No│ │ │ │
│ │ │ │ │ │ │ │ │ │--------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Roaming No│ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ Notif │OR2:Y│ │ │ │ │ │ │ │ │ │ │
│ │\│ │Info request│ │ │ │ │ │
│ │ │ │----------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │MAF010│ │ │ │ │
│ │ │ │ Info ack │ │ │ │ │ │
│ │ Release │OR1:N│\│ │
│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │
│ │Notification│OR2:Y│ │ │ │ │ │ │
│ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │MAF010│ │ │ │ │ │ │ │ │
│ │ │ │Info ack│ │ │ │ │ │ │ │ │ │
│ │ Release │ │\│ │ Provide │ │ │ │
│ │ │ │ │ │ │ │ │ │roaming No│ │ │ │
│ │ │ │ │ │ │ │ │ │--------->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │Roaming No│ │ │ │
│ │ │ │ │ │ │ │ │ │\│ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ Notif │OR2:Y│ │ │ │ │ │ │ │ │ │ │
│ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Page MS │ │ │ │ │ │
│ │ │ │ │ │ │ │---------->│ │Paging │ │ │ │
│ │ │ │ │ │ │ │ │ │------>│ │ │ │
│ │ │ │ │ │ │ │ │ no │ │ │ │ │
│ │ │ │ │ │ │ │ │response│ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │
│ │ │ │ │ │ │ │ subscriber│ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │Info req│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Page MS │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │--------->│ │Paging│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │----->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ no │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │response│ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │subscriber│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Absent │ │\│ │roam No
│ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │---->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ (Note 1) │
│ │ │ │ │ │ │ │ │ │ │ │ │ │Roam │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │No │ │ │ │
│ │ │ │ │ Info ack │ │ │ │ │ │ │ │\│
│
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │Notif │OR2:Y│ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │\│ │Info req│ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Page MS │ │ │ │ │ │
│ │ │ │ │ │ │ │---------->│ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ radio │ │ │ │ │
│ │ │ │ │ │ │ │ │congestion│ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │
│ │ │ │ │ │ │ │ subscriber│ │ │ │ │ │
│ │ │ │ │ │ │ │\│ │Info req│ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │------->│ │ Provide │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ roam No │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │--------->│ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Page MS │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │--------->│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │ radio │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ │congestion│ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │ Absent │ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ │ │subscriber│ │ │ │ │ │ │ │ │ │
│ │ │ │ │ │ Absent │ │\│
│roam No │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │---->│ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │ (Note 1) │
│ │ │ │ │ │ │ │ │ │ │ │ │ │Roam │ │ │ │
│ │ │ │ │ │ │ │ │ │ │ │ │ │No │ │ │ │
│ │ │ │ │ Info ack │ │ │ │ │ │ │ │\│
│
│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │Notif │OR2│ │ │ │ │ │ │ │ │ │ │ │ │ │ │
│ │\ P bit =1, R bit = 1, A bit = 1, Q bit = 0;
2) Registered, Deactivated => P bit =1, R bit = 1, A bit = 0, Q bit = 0 or 1;
3) Erased => P bit =1, R bit = 0, A bit = 0, Q bit = 0 or 1.
### 4.8.3 VLR only supports Phase 1 updating of subscriber information
When passing CFNRc information to a Phase 1 VLR, the HLR shall send the
service state information in a form which the VLR can accept, based on the
logical state held in the HLR, as follows:
1) (Provisioned, Not Registered, Not Active, Not Induced)
=> Erased, Deactivated;
2) (Provisioned, Registered, Not Active, Not Induced)
=> Registered, Deactivated;
3) (Provisioned, Registered, Active and Operative, Not Induced)
=> Registered, Activated;
4) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> Registered, Deactivated.
The HLR shall not pass a subaddress to a Phase 1 VLR.
### 4.8.4 GMSC only supports Phase 1 call handling
When a call is forwarded on not reachable at the GMSC, the HLR shall not pass
the subaddress to a Phase 1 GMSC. Calls shall be forwarded without the
subaddress.
### 4.8.5 VLR only supports Phase 1 call handling
When a call is forwarded on not reachable at the VMSC, as the HLR does not
pass the subaddress to the VLR, calls shall be forwarded without the
subaddress.
### 4.8.6 VLR does not support CAMEL or supports CAMEL Phase 1 only
When passing CFNRc information to a VLR not supporting CAMEL or supporting
CAMEL Phase 1 only, the HLR shall send the registration parameter \"forwarded-
to number\" only if it is registered in a format which the VLR can accept,
i.e. international format.
If the registration state for CFNRc is \"Registered\" and the forwarded-to
number is registered in a format other than international, then when updating
a VLR not supporting CAMEL or supporting CAMEL Phase 1 only the HLR shall
modify the service state information of CFNRc as follows:
1) (Provisioned, Registered, Not Active, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced);
2) (Provisioned, Registered, Active and Operative, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced);
3) (Provisioned, Registered, Active and Quiescent, Not Induced)
=> (Provisioned, Not Registered, Not Active, Not Induced).
According to the definitions in clause 4.5 no forwarded-to number will be
passed to the VLR in these cases. The modification of the service state
information sent to the VLR shall have no impact on the service state
information stored in the HLR.
If the VLR supports Phase 1 updating of subscriber information only, a further
translation of the service state information as defined in clause 4.8.3 shall
be performed by the HLR.
### 4.8.7 GMSC does not support CAMEL or supports CAMEL Phase 1 only
If the activation state of CFNRc is \"Active and Operative\" and if the
forwarded-to number is registered in a format other than international and if
the GMSC does not support CAMEL or supports CAMEL Phase 1 only, then when a
request for routeing information for a mobile terminated call is received in
the HLR, CFNRc shall not be invoked in the HLR. The mobile terminated call
establishment shall be continued towards the MSCb.
NOTE: CFNRc will be handled in the VLRb according to the service state
information for CFNRc stored there.
## 4.9 Contents of messages
The same additions apply for CFNRc as for CFB, see clause 2.9.
## 4.10 Support of Long Forwarded-to Numbers
The handling for CFNRc is the same as that for CFB, see clause 2.10.
#