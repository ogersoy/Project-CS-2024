# Foreword
This Technical Specification has been produced by the 3GPP.
This TS defines the stage 2 of the line identification supplementary services
for the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of this TS, it will be re-released by the TSG with an identifying
change of release date and an increase in version number as follows:
Version 3.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 Indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the specification;
# 0 Scope
The present document gives the stage 2 description of the call identification
supplementary services.
The group line identification supplementary services are divided into the
following four supplementary services:
‑ Calling line identification presentation CLIP (clause 1);
‑ Calling line identification restriction CLIR (clause 2);
‑ Connected line identification presentation COLP (clause 3);
‑ Connected line identification restriction COLR (clause 4).
## 0.1 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 21.905: \"3G Vocabulary\".
[2] 3GPP TS 23.011: \"Technical Realization of Supplementary Services \-
General Aspects.
[3] 3GPP TS 23.018 : \"Basic Call Handling; Technical realization\".
[4] 3GPP TS 22.081: \"Line Identification supplementary services - Stage 1\".
## 0.2 Definitions and abbreviations
### 0.2.1 Definitions
#### 0.2.1.1 Definition of line identity
The line identity is made up of the following information units:
‑ The subscriber\'s international ISDN/MSISDN number;
‑ Optionally subaddress information.
For mobile originated calls, the ISDN/MSISDN shall always be provided within
the network. The subaddress shall only be included if it is provided by the
user (or user equipment).
The calling line identity is the line identity of the calling party. The
connected line identity is the line identity of the connected party.
The additional calling line identity provides additional line information for
the purpose of the calling line identification presentation service (CLIP).
The additional connected line identity provides additional line information
for the purpose of the connected line identification presentation service
(COLP).
For mobile originating calls the user (or user equipment) has no possibility
to provide an additional line identity. For mobile terminating calls the user
(or user equipment) has no possibility to provide an additional connected line
identity.
#### 0.2.1.2 Definition of presentation and screening indicators
In addition to, or instead of, the line identity or additional line identity,
the network may send a presentation indicator (PI) together with a Cause of no
CLI (CoNC) and/or a screening indicator (SI) to the MS as follows:
‑ Presentation Indicator:
a) Presentation allowed;
b) Presentation restricted;
c) Number not available.
‑ If the Presentation Indicator indicates \"presentation restricted\" the
Cause of no CLI may give a diagnostic:
a) Unavailable;
b) Rejected by user;
c) Interaction with other services;
d) Coin line/ Pay phone.
‑ Screening indicator:
a) User provided, verified and passed;
b) User provided, not screened;
c) network provided.
The screening indicator applies to the ISDN/MSISDN or the number given as
additional line identity respectively.
### 0.2.2 Abbreviations
Abbreviations used in the present document are listed in 3GPP TR 21.905.
# 1 Calling line identification presentation (CLIP)
## 1.1 Handling of calling line identification presentation
### 1.1.1 Interrogation
**[Status check]{.underline}**
The mobile subscriber can request the status of the supplementary service and
be informed if the service is provided to him/her. This procedure is
illustrated in figure 1.1.
Figure 1.1: Interrogation of calling line identification presentation
## 1.2 Functions and information flows
The following Mobile Additional Functions have been identified for the PLMN:
[MAF001]{.underline}
Determination of the calling line identification presentation subscription
The ability of a PLMN component to determine whether the sup­plementary
service is provisioned for the mobile subscriber. See figure 1.2.
Location: VLR.
[MAF002]{.underline}
Determination of the calling party number for offering to the called party
The ability of a PLMN component to determine and to forward the calling line
identity and related indications to the called party. See figure 1.3.
Location: destination MSC.
The information flow is shown in figure 1.9.
Figure 1.2: MAF001 Determination of calling line identification presentation
subscription\ (VLR)
Figure 1.3: MAF002 Determination of the information for offering to the called
party\ (destination MSC)
Figure 1.4: Procedure Cause_of_no_CLI
Figure 1.5: Addition of line identification information to Send Routeing Info
message.
Figure 1.6: Addition of line identification information to Provide Roaming
Number message.
Figure 1.7: Storing of Line Identification in destination VLR
Figure 1.8: Addition of line identification information to Complete
Call/Process Call Waiting message.
Figure 1.9: Information flow for calling line identification presentation:\
mobile station or fixed terminal to mobile station
> NOTE:\ **: A subaddress may be received from the originating MS or the TE\
> info: information SI: screening indicator aSI: additional screening
> indicator\ req: request PI: presentation indicator CoNC: cause of no CLI\
> aPI: additional presentation indicator\ ack: acknowledge LI: line identity
> aLI: additional line identity
>
> NOTE: For mapping rules of CLI parameters refer to Annex A.
### 1.2.1 Optional capability to carry calling line identification
When GMSC is performing Send Routing Info query it may pass calling line
identification to the HLRb. The calling line identification shall be in
international format. If the HLRb receives calling line identification within
Send Routing Info it may pass unmodified calling line identification within
Provide Roaming Number to the VLRb. HLR shall not pass calling line
identification in the HPLMN nor in the case where sending of the CLI
information is explicitly denied to the destination network..
If MSCb receives calling line identification only from signalling it shall use
that parameter for presentation purposes i.e. normal handling as described in
the previous clause applies.
If MSCb receives Cause of no CLI from signalling it shall be sent to the VLRb
by Send Info for Incoming Call query.
If MSCb receives calling line identification and/or Cause of no CLI from VLRb
and it supports the feature it shall use that parameter for presentation
purposes. In this case calling line identification is stored in the VLRb and
when the set-up message is processed the handling described in the previous
clause is done using the stored calling line identification.
### 1.2.2 Information elements used in the messages
Table 1.2.2.1: Information elements used in messages
+----------------+----------------+----------------+----------------+ | Information | Logical | Information | Information | | Element | Information | element | element | | | element name | Required | description | +----------------+----------------+----------------+----------------+ | Calling Party | SI | M | Calling Party | | Number | | | Number | | | PI | M | contains | | | | | screening | | | LI | M | indicator | | | | | (SI), | | | | | presentation | | | | | indicator (PI) | | | | | and line | | | | | identity (LI) | | | | | as mandatory | | | | | information. | +----------------+----------------+----------------+----------------+ | Generic Number | aSI | M | Generic Number | | | | | contains | | | aPI | M | additional | | | | | screening | | | aLI | M | indicator | | | | | (aSI), | | | | | additional | | | | | presentation | | | | | indicator | | | | | (aPI) and | | | | | additional | | | | | line identity | | | | | (aLI) as | | | | | mandatory | | | | | information. | +----------------+----------------+----------------+----------------+ | Cause of no | unavailable | M | Cause of no | | CLI | | | CLI contains | | | reject by user | M | detailed Cause | | | | | of no CLI | | | interaction | M | (unavailable, | | | with other | | reject by | | | service | M | user, | | | | | interaction | | | coin | | with other | | | line/payphone | | service, coin | | | | | line/payphone) | | | | | as mandatory | | | | | information. | +----------------+----------------+----------------+----------------+
### 1.2.3 Parameters in Send Routeing Info and Provide Roaming Number for CLI
Table 1.2.3.1: Messages between GMSC and HLR
+-------------+-------------+-------------+-------------+-------------+ | Message | Message | Information | Information | Information | | | sender | element | element | element | | | | name | Required | description | +-------------+-------------+-------------+-------------+-------------+ | Send | GMSC | - | - | Refer to | | Routeing | | | | 3GPP TS | | Info | | Calling | C | 23.018. | | | | Party | | | | | | Number | C | In | | | | | | addition: | | | | Generic | | | | | | Number | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | GMSC | | | | | | received | | | | | | calling | | | | | | party | | | | | | number from | | | | | | originating | | | | | | network; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | GMSC | | | | | | received | | | | | | additional | | | | | | calling | | | | | | party | | | | | | number from | | | | | | originating | | | | | | network or | | | | | | from gsmSCF | | | | | | because of | | | | | | a CAMEL | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+
Table 1.2.3.2: Messages between HLR and VLR
+-------------+-------------+-------------+-------------+-------------+ | Message | Message | Information | Information | Information | | | sender | element | element | element | | | | name | Required | description | +-------------+-------------+-------------+-------------+-------------+ | Provide | HLR | - | - | Refer to | | Roaming | | | | 3GPP TS | | Number | | Calling | C | 23.018. | | | | Party | | | | | | Number | C | In | | | | | | addition: | | | | Generic | | | | | | Number | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | HLR | | | | | | received | | | | | | calling | | | | | | party | | | | | | number from | | | | | | GMSC and MS | | | | | | B is | | | | | | outside of | | | | | | home | | | | | | country; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | HLR | | | | | | received | | | | | | additional | | | | | | calling | | | | | | party | | | | | | number from | | | | | | GMSC and MS | | | | | | B is | | | | | | outside of | | | | | | home | | | | | | country; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+
### 1.2.4 Messages between MSC and VLR in destination network
Table 1.2.4.1: Messages between MSC and VLR
+-------------+-------------+-------------+-------------+-------------+ | Message | Message | Information | Information | Information | | | sender | element | element | element | | | | name | Required | description | +-------------+-------------+-------------+-------------+-------------+ | Complete | VLR | - | - | Refer to | | Call | | | | 3GPP TS | | | | Calling | C | 23.018. | | | | Party | | | | | | Number | C | In | | | | | | addition: | | | | Generic | C | | | | | Number | | The | | | | | | information | | | | Cause of no | | element is | | | | CLI | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+ | Process | VLR | - | - | Refer to | | Call | | | | 3GPP TS | | Waiting | | Calling | C | 23.018. | | | | Party | | | | | | Number | C | In | | | | | | addition: | | | | Generic | C | | | | | Number | | The | | | | | | information | | | | Cause of no | | element is | | | | CLI | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | it is | | | | | | stored in | | | | | | VLR; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+ | Send Info | MSC | - | - | Refer to | | for | | | | 3GPP TS | | Incoming | | Cause of no | C | 23.018. | | Call | | CLI | | | | | | | | In | | | | | | addition: | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | MSC | | | | | | received | | | | | | Cause of no | | | | | | CLI; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+
## 1.3 Information stored in the HLR
CLIP may have the following logical states (refer to 3GPP TS 23.011 for an
explanation of the notation):
**Provisioning State Registration State Activation State HLR Induction State**
(Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Active and Operative, Not Induced)
The HLR shall store the logical state of CLIP (which shall be one of the valid
states listed above) on a per subscriber basis.
The HLR shall also store the subscription option \"override category\" on a
per subscriber basis.
This parameter takes one of the following values:
1\. yes;
2\. no.
## 1.4 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of CLIP. The state changes are caused by actions of
the service provider.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence they are not shown in the diagram.
Figure 1.9: State transition model for CLIP
## 1.5 Transfer of information from HLR to VLR
If the provisioning state for CLIP is \"Provisioned\" then, when the
subscriber registers on a VLR, the HLR shall send that VLR information about
the logical state of CLIP. The HLR shall send the override category if the VLR
is in the HPLMN country. The HLR may send the override category if the VLR is
outside the HPLMN country.
If the logical state of CLIP or the override category is changed while a
subscriber is registered on a VLR then the HLR shall inform the VLR of the new
logical state of CLIP. If the override category is changed and the
provisioning state of CLIP is \"Provisioned\" then the HLR shall inform the
VLR about the new override category when the VLR is in the HPLMN country. The
HLR may inform the VLR about the new override category when the VLR is outside
the HPLMN country.
## 1.6 Information stored in the VLR
For CLIP, the VLR shall store the service state information and override
category received from the HLR.
If not received from the HLR (case of roaming outside the HPLMN country), the
override category shall be set to the default value \"no\".
## 1.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
## 1.8 Interactions with other supplementary services
See 3GPP TS 22.081 [4] clause 1.6.
# 2 Calling line identification restriction (CLIR)
## 2.1 Handling of calling line identification restriction
### 2.1.1 General
If the originating party has calling line identification restriction
provisioned and it is impossible to indicate to the terminating network (due
to interworking) that the number should not be presented to the terminating
party, the calling line identity shall not be delivered to the terminating
network.
### 2.1.2 Permanent mode
If the subscriber has calling line identification restriction provisioned in
permanent mode, the originating party\'s CLI shall not be presented to the
terminating party (i.e. the terminating MS or TE), unless the terminating
party has calling line identification presentation provisioned with the
subscription option \"override category\" set (see clause 1).
### 2.1.3 Controlling presentation of the CLI when CLIR is provisioned in
temporary mode
A subscriber can have calling line identification restriction provisioned in
temporary mode with one of two default values: presentation restricted or
presentation allowed.
If the default value is set to presentation restricted, the default handling
is not to present the originating party\'s CLI to the terminating party (i.e.
the terminating MS or TE).
However, it is possible for the originating subscriber to present his CLI to
the terminating party. The originating subscriber must indicate during call
set‑up that the CLI must be presented to the terminating party. This procedure
is illustrated in figure 2.1.
Figure 2.1: MS indicating presentation of CLI when CLIR is provisioned in
temporary mode with default value \"presentation restricted\"
If the default value is set to presentation allowed, the default handling is
to present the originating party\'s CLI to the terminating party (i.e. the
terminating MS or TE).
However, it is possible for the originating subscriber to restrict
presentation of his CLI to the terminating party. The originating subscriber
must indicate during call set‑up that CLI presentation must be restricted.
This procedure is illustrated in figure 2.2.
Figure 2.2: MS invoking CLIR, when CLIR is provisioned in temporary mode with
default value \"presentation allowed\"
### 2.1.4 Interrogation
**[Data request]{.underline}**
The mobile subscriber can request the data of the supplementary service.
In response the following information shall be given:
‑ whether the service is provided or not;
‑ if provided which mode is subscribed;
‑ if subscribed to the temporary mode: which default value.
This procedure is illustrated in figure 2.3.
Figure 2.3: Interrogation of calling line identification restriction
## 2.2 Functions and information flows
The following Mobile Additional Functions have been identified for the PLMN:
[MAF003]{.underline}
Determination of the calling line identification restriction subscription
The ability of a PLMN component to determine whether the supplementary service
is provisioned for the mobile subscriber. See figure 2.4.
Location: VLR.
[MAF004]{.underline}
Determination of the calling party number for offering to the called party
The ability of a PLMN component to determine and to forward the calling line
identity and related indications to the called party. See figure 2.5.
Location: originating MSC.
The information flows are shown in figures 2.6 to 2.9.
Figure 2.4: MAF003 Determination of calling line identification restriction
subscription\ (VLR)
Figure 2.5: MAF004 Determination of the presentation indicator\ (originating
MSC)
Figure 2.6: Procedure Cause_of_no_CLI_CLIR
Figure 2.7: Information flow for calling line identification restriction in
permanent or temporary mode with the default value \"presentation restricted\"
NOTE: **: A subaddress may be received from the MS\ SI: screening indicator\
PI: presentation indicator\ LI: line identity
Figure 2.8: Information flow for allowing presentation of the CLI when CLIR is
provisioned in temporary mode with default value \"presentation restricted\"
NOTE: **: A subaddress may be received from the MS\ SI: screening indicator\
PI: presentation indicator\ LI: line identity\ CLI: calling line identity
NOTE: **: A subaddress may be received from the MS\ SI: screening indicator\
PI: presentation indicator\ LI: line identity
Figure 2.9: Information flow for calling line identification restriction in
temporary mode with default value \"presentation allowed\"
NOTE: **: A subaddress may be received from the MS\ SI: screening indicator\
PI: presentation indicator\ LI: line identity\ CLI: calling line identity
## 2.3 Information stored in the HLR
CLIR may have the following logical states (refer to 3GPP TS 23.011 for an
explanation of the notation):
**Provisioning State Registration State Activation State HLR Induction State**
(Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Active and Operative, Not Induced)
The HLR shall store the logical state of CLIR (which shall be one of the valid
states listed above) on a per subscriber basis.
The HLR shall also store the subscription option \"presentation mode\" on a
per subscriber basis.
This parameter takes one of the following values:
‑ permanent;
‑ temporary (presentation restricted);
‑ temporary (presentation allowed).
## 2.4 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of CLIR. The state changes are caused by actions of
the service provider.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence they are not shown in the diagram.
Figure 2.10: State transition model for CLIR
## 2.5 Transfer of information from HLR to VLR
When the subscriber registers on a VLR, the HLR shall send that VLR
information about the logical state of CLIR and the presentation mode.
If the logical state of CLIR or the presentation mode is changed while a
subscriber is registered on a VLR then the HLR shall inform the VLR of the new
logical state of CLIR and (if the provisioning state is \"Provisioned\") the
new presentation mode.
## 2.6 Information stored in the VLR
For CLIR, the VLR shall store the service state information and presentation
mode received from the HLR.
## 2.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
## 2.8 Interworking
The VPLMN needs to distinguish three cases in order to meet data privacy
requirements in an environment where support of CLIP and CLIR is optional:
a) the HPLMN supports CLIR, and CLIR is provisioned for the subscriber;
b) the HPLMN supports CLIR, but CLIR is not provisioned for the subscriber;
c) the HPLMN does not support CLIR.
In case a) the VPLMN must apply the CLIR subscription as indicated by the data
sent by the HPLMN.
In case b) the VPLMN must not apply CLIR.
In case c) the VPLMN must apply an implicit CLIR subscription.
To allow the VPLMN to make this distinction, the HLR and VLR behave as
follows:
‑ If the HLR supports CLIR, but CLIR is not provisioned for the subscriber,
the HLR shall inform the VLR that CLIR is not provisioned.
‑ If the VLR supports CLIR, but the HLR does not support CLIR, the VLR shall
behave in the same way as if CLIR (temporary (presentation restricted)) was
provisioned for the subscriber, i.e. the calling line identity shall not be
displayed to the called subscriber unless the called subscriber has CLIR
override capability. When interrogating the service status the subscriber
shall be informed that CLIR (temporary (presentation restricted)) is provided
to him and is active.
# 3 Connected line identification presentation (COLP)
## 3.1 Handling of connected line identification presentation
### 3.1.1 Interrogation
**[Status check]{.underline}**
The mobile subscriber can request the status of the supplementary service and
be informed if the service is provided to him/her. This procedure is
illustrated in figure 3.1.
Figure 3.1: Interrogation of connected line identification presentation
### 3.1.2 Interactions with call forwarding supplementary services
If the forwarding user selects the option that the calling user is not
notified of the call forwarding, then the calling user shall receive no
forwarding notification, and the calling user shall not receive the connected
user\'s identity when the call is answered, unless the calling user has
override capability.
## 3.2 Functions and information flows
The following Mobile Additional Functions have been identified for the PLMN:
[MAF005]{.underline}
Determination of the connected line identification presentation subscription
The ability of a PLMN component to determine whether the supplementary service
is provisioned for the mobile subscriber. See figure 3.2.
Location: VLR.
[MAF006]{.underline}
Determination of the connected party number for offering to the calling party
The ability of a PLMN component to determine and to forward the connected line
identity and related indications to the calling party. See figure 3.3.
Location: originating MSC.
[MAF039]{.underline}
Interaction of connected line identification presentation with the call
forwarding supplementary services
The ability of a PLMN component to determine the presentation indicator of the
connected party number after invocation of a call forwarding service. See
figure 3.4.
Location: forwarding MSC.
The information flow is shown in figure 3.5.
Figure 3.2: MAF005 Determination of connected line identification presentation
subscription\ (VLR)
Figure 3.3: MAF006 Determination of the information for offering to the
connected party\ (originating MSC) (CR A005r1)
Figure 3.4: MAF039 Interaction between COLP and call forwarding services\
(forwarding MSC)
Figure 3.5: Information flow for connected line identification presentation:\
mobile station to mobile station or fixed terminal
NOTE: OR1: COLP provisioned Y: yes N: no\ OR2: Presentation Indicator Value a:
allowed b: restricted c: not available\ OR3: Override category\ OR4:
additional line identity available Y: yes N: no\ OR5: COL in case of override
category a: LI b: aLI\ **: A connected subaddress may be received from the MS\
info: information SI: screening indicator aSI: additional screening indicator\
req: request PI: presentation indicator\ ack: acknowledge LI: line identity
aLI: additional line identity
## 3.3 Information stored in the HLR
COLP may have the following logical states (refer to 3GPP TS 23.011 for an
explanation of the notation):
**Provisioning State Registration State Activation State HLR Induction State**
(Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Active and Operative, Not Induced)
The HLR shall store the logical state of COLP (which shall be one of the valid
states listed above) on a per subscriber basis.
The HLR shall also store the subscription option \"override category\" on a
per subscriber basis.
This parameter takes one of the following values:
‑ yes;
‑ no.
## 3.4 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of COLP. The state changes are caused by actions of
the service provider.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence they are not shown in the diagram.
Figure 3.6: State transition model for COLP
## 3.5 Transfer of information from HLR to VLR
If the provisioning state for COLP is \"Provisioned\" then, when the
subscriber registers on a VLR, the HLR shall send that VLR information about
the logical state of COLP. The HLR shall send the override category if the VLR
is in the HPLMN country. The HLR may send the override category if the VLR is
outside the HPLMN country.
If the logical state of COLP or the override category is changed while a
subscriber is registered on a VLR then the HLR shall inform the VLR of the new
logical state of COLP. If the override category is changed and the
provisioning state of COLP is \"Provisioned\" then the HLR shall inform the
VLR about the new override category when the VLR is in the HPLMN country. The
HLR may inform the VLR about the new override category when the VLR is outside
of the HPLMN country.
## 3.6 Information stored in the VLR
For COLP, the VLR shall store the service state information and override
category received from the HLR.
If not received from the HLR (case of roaming outside the HPLMN country), the
override category shall be set to the default value \"no\".
## 3.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
# 4 Connected line identification restriction (COLR)
## 4.1 Handling of connected line identification restriction
### 4.1.1 General
If the terminating party has connected line identification restriction
provisioned and it is impossible to indicate to the originating network (due
to interworking) that the number should not be presented to the originating
party, the connected line identity shall not be delivered to the originating
network.
### 4.1.2 Interrogation
**[Status check]{.underline}**
The mobile subscriber can request the status of the supplementary service and
be informed if the service is provided to him/her. This procedure is
illustrated in figure 4.1.
Figure 4.1: Interrogation of connected line identification restriction
## 4.2 Functions and information flows
The following Mobile Additional Functions have been identified for the PLMN:
[MAF040]{.underline}
Determination of the connected line identification restriction subscription
The ability of a PLMN component to determine whether the sup­plementary
service is provisioned for the mobile subscriber. See figure 4.2.
Location: VLR.
[MAF041]{.underline}
Determination of the connected party number for offering to the calling party
The ability of a PLMN component to determine and to forward the connected line
identity and related indications to the calling party. See figure 4.3.
Location: terminating MSC.
The information flow is shown in figures 4.4.
Figure 4.2: MAF040 Determination of connected line identification restriction
subscription\ (VLR)
Figure 4.3: MAF041 Determination of the presentation indicator
Figure 4.4: Information flow for connected line identification restriction:\
mobile station or fixed terminal to mobile station
NOTE: OR1: COLR provisioned Y: yes N: no\ OR2: Presentation Indicator Value a:
allowed\ b: restricted\ OR3: Override category\ **: A subaddress may be
received from the MS\ info: information SI: screening indicator\ req: request
PI: presentation indicator\ ack: acknowledge LI: line identity
## 4.3 Information stored in the HLR
COLR may have the following logical states (refer to 3GPP TS 23.011 for an
explanation of the notation):
**Provisioning State Registration State Activation State HLR Induction State**
(Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Active and Operative, Not Induced)
The HLR shall store the logical state of COLR (which shall be one of the valid
states listed above) on a per subscriber basis.
## 4.4 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of COLR. The state changes are caused by actions of
the service provider.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence they are not shown in the diagram.
Figure 4.5: State transition model for COLR
## 4.5 Transfer of information from HLR to VLR
When the subscriber registers on a VLR, the HLR shall send that VLR
information about the logical state of COLR.
If the logical state of COLR is changed while a subscriber is registered on a
VLR then the HLR shall inform the VLR of the new logical state of COLR.
## 4.6 Information stored in the VLR
For COLR, the VLR shall store the service state information received from the
HLR.
## 4.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
## 4.8 Interworking
The VPLMN needs to distinguish three cases in order to meet data privacy
requirements in an environment where support of COLP and COLR is optional:
a) the HPLMN supports COLR, and COLR is provisioned for the subscriber;
b) the HPLMN supports COLR, but COLR is not provisioned for the subscriber;
c) the HPLMN does not support COLR.
In case a) the VPLMN must apply the COLR subscription as indicated by the data
sent by the HPLMN.
In case b) the VPLMN must not apply COLR.
In case c) the VPLMN must apply an implicit COLR subscription.
To allow the VPLMN to make this distinction, the HLR and VLR behave as
follows:
‑ If the HLR supports COLR, but COLR is not provisioned for the subscriber,
the HLR shall inform the VLR that COLR is not provisioned.
‑ If the VLR supports COLR, but the HLR does not support COLR, the VLR shall
behave in the same way as if COLR was provisioned for the subscriber, i.e. the
connected line identity shall not be displayed to the calling subscriber
unless the calling subscriber has COLR override capability. When interrogating
the service status the subscriber shall be informed that COLR is provided to
him and is active.
###### ##
###### ## Annex A (informative): Mapping of CLI
This annex defines the mapping rules of CLI parameters received via the NW-NW
interface to CLI parameters to be sent to the MS.
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | I | **I | | | | | | | | | nform | nform | | | | | | | | | ation | ation | | | | | | | | | rec | sent | | | | | | | | | eived | to | | | | | | | | | over | the | | | | | | | | | the | MS** | | | | | | | | | NW-NW | | | | | | | | | | inte | | | | | | | | | | rface | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | pr | line | addit | addit | Cause | pr | line | Cause | | | esent | ide | ional | ional | of No | esent | ide | of No | | | ation | ntity | pr | line | CLI | ation | ntity | CLI | | | indi | | esent | ide | | indi | | | | | cator | | ation | ntity | | cator | | | | | | | indi | | | | | | | | | | cator | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | CLIP | * | * | * | * | * | - | - | - | | not | | | | | | | | | | pro | | | | | | | | | | -visi | | | | | | | | | | on-ed | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | CLIP | - | - | - | - | - | not | - | - | | p | | | | | | avai | | | | rovis | | | | | | lable | | | | ioned | | | | | | | | | | wi | | | | | | | | | | thout | | | | | | | | | | ove | | | | | | | | | | rride | | | | | | | | | | cat | | | | | | | | | | egory | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | not | - | - | - | - | not | - | - | | | avai | | | | | avai | | | | | lable | | | | | lable | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | al | d | - | - | - | al | d | - | | | lowed | igits | | | | lowed | igits | | | | | | | | | | of | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | al | d | + | d | - | al | d | - | | | lowed | igits | | igits | | lowed | igits | | | | | | | | | | of | | | | | | | | | | addit | | | | | | | | | | ional | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | * | * | - | restr | - | - | | | icted | igits | | | | icted | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | * | * | u | restr | - | u | | | icted | igits | | | navai | icted | | navai | | | | | | | lable | | | lable | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | * | * | r | restr | - | r | | | icted | igits | | | eject | icted | | eject | | | | | | | by | | | by | | | | | | | user | | | user | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | * | * | i | restr | - | i | | | icted | igits | | | ntera | icted | | ntera | | | | | | | ction | | | ction | | | | | | | with | | | with | | | | | | | other | | | other | | | | | | | se | | | se | | | | | | | rvice | | | rvice | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | * | * | pay | restr | - | pay | | | icted | igits | | | phone | icted | | phone | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | - | not | - | - | | | icted | igits | | | | avai | | | | | by | | | | | lable | | | | | ne | | | | | | | | | | twork | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | al | d | - | al | d | - | | | icted | igits | lowed | igits | | lowed | igits | | | | by | | | | | | of | | | | ne | | | | | | addit | | | | twork | | | | | | ional | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | I | **I | | | | | | | | | nform | nform | | | | | | | | | ation | ation | | | | | | | | | rec | sent | | | | | | | | | eived | to | | | | | | | | | over | the | | | | | | | | | the | MS** | | | | | | | | | NW-NW | | | | | | | | | | inte | | | | | | | | | | rface | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | pr | line | addit | addit | Cause | pr | line | Cause | | | esent | ide | ional | ional | of No | esent | ide | of No | | | ation | ntity | pr | line | CLI | ation | ntity | CLI | | | indi | | esent | ide | | indi | | | | | cator | | ation | ntity | | cator | | | | | | | indi | | | | | | | | | | cator | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | CLIP | - | - | - | - | - | not | - | - | | p | | | | | | avai | | | | rovis | | | | | | lable | | | | ioned | | | | | | | | | | with | | | | | | | | | | ove | | | | | | | | | | rride | | | | | | | | | | cat | | | | | | | | | | egory | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | not | - | - | - | - | not | - | - | | | avai | | | | | avai | | | | | lable | | | | | lable | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | al | d | - | - | - | al | d | - | | | lowed | igits | | | | lowed | igits | | | | | | | | | | of | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | al | d | + | d | - | al | d | - | | | lowed | igits | | igits | | lowed | igits | | | | | | | | | | of | | | | | | | | | | addit | | | | | | | | | | ional | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | - | restr | d | - | | | icted | igits | | | | icted | igits | | | | | | | | | | of | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | + | d | - | restr | NOTE | - | | | icted | igits | | igits | | icted | 1 | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | + | d | u | restr | NOTE | u | | | icted | igits | | igits | navai | icted | 1 | navai | | | | | | | lable | | | lable | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | + | d | r | restr | NOTE | r | | | icted | igits | | igits | eject | icted | 1 | eject | | | | | | | by | | | by | | | | | | | user | | | user | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | + | d | i | restr | NOTE | i | | | icted | igits | | igits | ntera | icted | 1 | ntera | | | | | | | ction | | | ction | | | | | | | with | | | with | | | | | | | other | | | other | | | | | | | se | | | se | | | | | | | rvice | | | rvice | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | + | d | pay | restr | NOTE | pay | | | icted | igits | | igits | phone | icted | 1 | phone | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | u | restr | d | u | | | icted | igits | | | navai | icted | igits | navai | | | | | | | lable | | of | lable | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | r | restr | d | r | | | icted | igits | | | eject | icted | igits | eject | | | | | | | by | | of | by | | | | | | | user | | line | user | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | i | restr | d | i | | | icted | igits | | | ntera | icted | igits | ntera | | | | | | | ction | | of | ction | | | | | | | with | | line | with | | | | | | | other | | ide | other | | | | | | | se | | ntity | se | | | | | | | rvice | | | rvice | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | pay | restr | d | pay | | | icted | igits | | | phone | icted | igits | phone | | | | | | | | | of | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | - | - | - | restr | d | - | | | icted | igits | | | | icted | igits | | | | by | | | | | | of | | | | ne | | | | | | line | | | | twork | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | restr | d | al | d | - | al | d | - | | | icted | igits | lowed | igits | | lowed | igits | | | | by | | | | | | of | | | | ne | | | | | | addit | | | | twork | | | | | | ional | | | | | | | | | | line | | | | | | | | | | ide | | | | | | | | | | ntity | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
\- parameter not present
* parameter absent or present, if present it may have any value
\+ parameter present, it may have any value
NOTE 1: Network Option to send either digits of the line identity or digits of
additional line identity applies.
###### ##
#