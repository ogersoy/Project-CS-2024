# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the set of APIs and associated resource
structures and data models pertaining to the collection and reporting of UE-
related data (synonymously "UE data") by the Data Collection Application
Function (AF) in the 5G System for subsequent event exposure services offered
to network consumer entities, as defined in 3GPP TS 23.501 [2], TS 23.502 [3],
TS 23.288 [4], TS 29.517 [5], TS 29.510 [6] and TS 26.531 [7] .
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support
network data analytics services\".
[5] 3GPP TS 29.517: \"5G System; Application Function Event Exposure Service;
Stage 3\".
[6] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[7] 3GPP TS 26.531: \"_Data Collection and Reporting; General Description and
Architecture_ \".
[8] IETF RFC 6750: \"The OAuth 2.0 Authorization Framework: Bearer Token
Usage\".
[9] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[10] \"CORS (Cross-Origin Resource Sharing)\" protocol as defined in the
'Fetch' standard of WHATWG: https://fetch.spec.whatwg.org/#cors-protocol.
[11] 3GPP TS 29.502: \"5G System; Session Management Services; Stage 3\".
[12] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[13] 3GPP TS 26.512: "5G Media Streaming (5GMS); Protocols".
[14] 3GPP TS 29.122: \"T8 reference point for Northbound APIs\".
[15] 3GPP TS 29.572: \"5G System; Location Management Services; Stage 3\".
[16] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[17] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[18] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[19] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\".
[20] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[21] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[22] IETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range
Requests\".
[23] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".
[24] IETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1):
Authentication\".
[25] ISO 8601-1:2019: \"Date and time -- Representations for information
interchange -- Part 1: Basic rules\".
[26] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[27] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[28] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\", December 2017.
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1], TS 23.501 [2], TS 23.502 [3], TS 23.288 [4], TS 29.517 [5], TS 29.510
[6], TS 26.531 [7] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**example:** text used to clarify abstract rules by applying them literally.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1], TS 23.501 [2], TS 23.502 [3], TS 23.288 [4], TS 29.517 [5], TS 29.510
[6], TS 26.531 [7] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 [1].
AF Application Function
AS Application Server
ASP Application Service Provider
DC-AF Data Collection AF
DC-Client Data Collection Client
NEF Network Exposure Function
NRF Network Repository Function
NWDAF Network Data Analytics Function
# 4 Procedures for Data Collection and Reporting
## 4.1 General
This clause specifies the stage 3 procedures for data collection and
reporting.
## 4.2 Network-side procedures
### 4.2.1 General
This clause specifies the procedures used between network-side entities for UE
data collection and reporting, along with related functionality pertaining to
the provisioning, management, and delivery of such data between the Data
Collection AF and consumer entities.
### 4.2.2 Data Collection AF registration with NRF
This clause specifies the use of the _Nnrf_NFManagement_ service API as
defined in TS 29.510 [7] and invoked by a Data Collection AF instance to
register its profile with the NRF in order to enable the discovery of the Data
Collection AF by consumer entities.
### 4.2.3 Data collection and reporting provisioning
#### 4.2.3.1 General
An Application Service Provider, via its Provisioing AF, may use the
procedures in this clause to supply data collection and reporting provisioning
information, as defined in clause 4.2 of TS 26.531 [7], to the Data Collection
AF via reference point R1 in the form of Data Reporting Configuration
resources. A given Data Reporting Configuration comprises instructions and
other information to be followed/used by data collection clients in their
collection, processing and reporting to the Data Collection AF of UE data for
the associated application service. In addition, a Data Reporting
Configuration instance may contain data exposure restrictions for use by the
Data Collection AF in controlling access by consumers to event data pertaining
to the UE data that it has collected.
The provisioning process begins with the Provisioning AF using the procedures
defined in clause 4.2.3.2 to create a Provisioning Session resource as an
umbrella for subsequent Data Reporting Configuration resources.
The process then proceeds with the Provisioning AF using the procedures
defined in clause 4.2.3.3 to provide the Data Collection AF with one or more
Data Reporting Configuration resources. Each set of provisioning information
pertains to one application, identified by its External Application
Identifier, and one type of exposed event, uniquely identified in the 5G
System by its Event ID, as defined in clause 4.15.1 of TS 23.502 [3].
#### 4.2.3.2 Provisioning Session procedures
##### 4.2.3.2.1 General
Prior to provisioning of data collection and reporting , the Provisioning AF
shall create a new Provisioning Session. The following CRUD operations are
used to manage Provisioning Session resources. Additional details are provided
under clause 6.
##### 4.2.3.2.2 Create Provisioning Session
This procedure shall be used by the Provisioning AF to create a new
Provisioning Session. The HTTP POST method shall be used for this purpose.
Upon successful creation, the Data Collection AF shall respond with a _201
(Created)_ response message that includes the resource identifier of the newly
created Provisioning Session in the body of the reply, and along with the URL
of the resource, including its resource identifier, shall be returned as part
of the HTTP Location header field.
##### 4.2.3.2.3 Retrieve Provisioning Session properties
This procedure is used by the Provisioning AF to obtain the properties of an
existing Provisioning Session from the Data Collection AF. The HTTP GET method
shall be used for this purpose.
##### 4.2.3.2.4 Update Provisioning Session properties
The Update operation is not allowed on Provisioning Session resources.
##### 4.2.3.2.5 Destroy Provisioning Session
This procedure is used by the Provisioning AF to destroy a Provisioning
Session. The Data Collection AF shall use the HTTP DELETE method for this
purpose.
As a side-effect of destroying a Provisioning Session, the Data Collection AF
shall release any associated resources, purge any cached data, and delete all
UE data reporting configurations associated with this Provisioning Session.
#### 4.2.3.3 Data Reporting Configuration procedures
##### 4.2.3.3.1 General
Upon the successful creation of a Provisioning Session, the Provisioning AF
shall use the procedures defined in this clause to configure UE data
collection and reporting functionality specific to an application in the Data
Collection AF. This clause defines the basic procedures. Additional details
are provided under clause 6.3.
##### 4.2.3.3.2 Data Reporting Configuration entity
A given instance of a Data Reporting Configuration resource is identified by
the _dataReportingConfigurationId_ property of the
_DataReportingConfiguration_ resource, and applies to one type of data
collection client. The properties of this resource, as defined in the
following clauses, pertain to UE data collection and reporting by different
data collection clients to the Data Collection AF, and control of access by
different consumer entities to event data exposed by the Data Collection AF.
The type of a Data Reporting Configuration resource is identified by the
_dataCollectionClientType_ property of the _DataReportingConfiguration_
resource as specified in clause 6.3.2.2.
NOTE 1: The _dataCollectionClientType_ property corresponds to the _Data
collection client type_ parameter in table 4.6.2-1 of TS 26.531 [7].
The Data Reporting Configuration resource shall include one or more sets of
instructions for data collection clients on the collection and reporting of UE
data to the Data Collection AF, and may contain one or more sets of data
exposure restrictions, expressed as Data Access Profiles (see clause 6.3.2.3),
each one determining the level of access by event consumer entities to the
event-related UE data reported to the Data Collection AF. A Data Access
Profile defines the granularity of access to a particular subset of collected
event data parameters for the Event ID of concern. This granularity is
expressed as a set of data aggregation functions along the time, user, and
location dimensions. The subset of parameters to be exposed is identified
using a controlled vocabulary specific to the Event ID. An authorization
procedure is in place to determine which Data Access Profile is granted to a
particular event consumer entity.
NOTE 2: The process of matching event consumers to Data Access Profiles is
implementation-specific and therefore beyond the scope of the present
document.
##### 4.2.3.3.3 Create Data Reporting Configuration
This procedure is used by the Provisioning AF to create a Data Reporting
Configuration resource within the scope of a particular Provisioning Session.
The HTTP POST method shall be used for this purpose and the request message
body may include a _DataReportingConfiguration_ resource, as specified under
clause 6.3.2.2.
Upon success, the Data Collection AF shall respond with a _201 (Created)_
response message and the resource URL for the newly-created Data Reporting
Configuration resource shall be returned in the Location header field.
If the procedure is unsuccessful, the Data Collection AF shall provide an
error response status code as defined in clause 5.3.3.
This procedure may be performed multiple times to provision different Data
Reporting Configurations in the scope of a particular Provisioning Session.
##### 4.2.3.3.4 Retrieve Data Reporting Configuration
This procedure is used by the Provisioning AF to obtain the properties of an
existing Data Reporting Configuration resource from the Data Collection AF.
The HTTP GET method shall be used for this purpose.
If successful, the Data Collection AF shall respond with a _200 (OK)_ and the
requested _DataReportingConfiguration_ resource shall be returned in the body
of the HTTP response message.
If the procedure is unsuccessful, the Data Collection AF shall provide an
error response status code as defined in clause 5.3.3.
##### 4.2.3.3.5 Update Data Reporting Configuration
The update operation is invoked by the Provisioning AF to initially upload the
representation of a Data Reporting Configuration resource created using the
procedure in clause 4.2.3.3.3 or, in the case of an existing Data Reporting
Configuration resource, to entirely replace or modify certain properties of
that resource. All available properties may be updated. The HTTP PATCH or HTTP
PUT methods shall be used for the update operation.
If the procedure is successful, the Data Collection AF shall respond with a
_200 (OK)_ reflecting the successful update operation.
If the procedure is unsuccessful, the Data Collection AF shall provide a
response code as defined in clause 5.3.3.
##### 4.2.3.3.6 Destroy Data Reporting Configuration
This operation is used by the Provisioning AF to destroy a Data Reporting
Configuration resource and to terminate the related UE data reporting
procedure. The HTTP DELETE method shall be used for this purpose.
As a result, the Data Collection AF should release any associated resources,
deliver any pending data to subscribed recipients, as appropriate to the Event
ID in question, and delete any corresponding configurations.
If the procedure is successful, the Data Collection AF shall respond with a
_200 (OK)_ response message.
If the procedure is unsuccessful, the Data Collection AF shall provide an
error response status code as defined in clause 5.3.3.
### 4.2.4 Configuration of Indirect Data Collection Client
#### 4.2.4.1 General
Indirect reporting operation involves first a UE Application instance sending
domain-specific UE data to an Application Service Provider (ASP) server
instance across reference point R8. That UE data is passed from to an Indirect
Data Reporting Client function operated by the Application Service Provider to
be subsequently sent as data reports, possibly in processed form, to a Data
Collection AF instance. Operation of the latter procedure is conditioned upon
the Indirect Data Collection Client having acquired its data collection and
reporting configuration from the Data Collection AF by means of the
_Ndcaf_DataReporting_ service (either directly across the reference point R3
or via an equivalent service exposed by the NEF, depending on whether the
Indirect Data Collection Client and the Data Collection AF reside in the same
or separate trust domains).
The Indirect Data Collection Client shall obtain its configuration by invoking
the _Ndcaf_DataReporting_CreateSession_ service operation, as described under
clause 7.2,2,3.1.
The configuration information is contained in a generic data collection and
reporting configuration envelope that shall include at minimum the baseline
configuration parameters defined in clause 4.6.3 of TS 26.531 [7]. In
particular, the configuration shall specify the domain-specific parameters
associated with the specified Event ID(s) to be reported to the Data
Collection AF.
#### 4.2.4.2 Indirect Data Collection Client retrieves its initial
configuration by creating a Data Reporting Session
The call flow in figure 4.2.4.2‑1 shows the interaction between the Indirect
Data Collection Client and the Data Collection AF at the initial configuration
of the Indirect Data Collection Client.
**Figure 4.2.4.2-1: Initial configuration of Indirect Data Collection Client**
The steps in this procedure are as follows:
> 1\. The Indirect Data Collection Client invokes the
> _Ndcaf_DataReporting_CreateSession_ service operation by sending an HTTP
> POST request to the Data Collection AF (see clauses 7.2.2.2 and 7.2.2.3.1).
> A _DataReportingSession_ resource entity (see clause 7.3.2.1) is included in
> the request message body, but only properties _externalApplicationId_ and
> _supportedDomains_ are present (because the other properties are unknown to
> the Indirect Data Collection Client).
>
> 2\. In its _201 Created_ response, the Data Collection AF provides a
> _DataReportingSession_ resource entity in the message body, which expands
> the content of the request message body in step 1 by adding the properties
> _sessionId_ , _validUntil_ , _reportForDomains_ and _reportingCondition_.
> The _validUntil_ property of the provided _DataReportingSession_ should be a
> time in the future.
The Indirect Data Collection Client is now configured.
#### 4.2.4.3 Updating and renewing data collection and reporting configuration
##### 4.2.4.3.1 Introduction
The data collection and reporting configuration may change as a result of
subscriptions to events exposed by the Data Collection AF, for example, as a
result of narrower or wider filters applied to an event subscription. There
are two ways for a modified data collection and reporting configuration to be
acquired by the Indirect Data Collection Client:
1\. The Indirect Data Collection Client invokes the
_Ndcaf_DataReporting_RetrieveSession_ service operation (see clause
4.2.4.3.2).
2\. The Data Collection AF supplies a _DataReportingSession_ in response to a
data report submitted by the Indirect Data Collection Client (see clause
4.2.4.3.3).
##### 4.2.4.3.2 Indirect Data Collection Client retrieves up-to-date
configuration
This operation is typically performed when the _validUntil_ property of the
current _DataReportingSession_ stored in the Indirect Data Collection Client
is about to expire.
{width="5.302083333333333in" height="1.7291666666666667in"}
**Figure 4.2.4.3.2-1: Indirect Data Collection Client retrieves up-to-date
DataReportingSession**
The steps in this procedure are as follows:
> 1\. The Indirect Data Collection Client requests the _DataReportingSession_
> for the current session by using the _Ndcaf_DataReporting _RetrieveSession_
> service operation (see clauses 7.2.3.2 and 7.2.3.3.1).
>
> 2\. The Data Collection AF provides the latest _DataReportingSession_ in the
> message body of a _200 OK_ response. The _validUntil_ property of the
> provided _DataReportingSession_ should be a time in the future. In addition,
> the Data Collection AF may change properties _reportForDomains_ and
> _reportingCondition_.
##### 4.2.4.3.3 DataReportingSession updated in response to data reporting
See clause 4.2.6.
#### 4.2.4.4 Indirect Data Collection Client destroys Data Reporting Session
The Indirect Data Collection Client may destroy a Data Reporting Session and
the data collection and reporting configuration it represents by invoking the
_Ndcaf_DataReporting_DestroySession_ service operation.
**Figure 4.2.4.4-1: Indirect Data Collection Client destroys
DataReportingSession**
The steps in this procedure are as follows:
> 1\. The Indirect Data Collection Client invokes the
> _Ndcaf_DataReporting_DestroySession_ service operation by sending an HTTP
> DELETE request to the Data Collection AF (see clauses 7.2.3.2 and
> 7.2.3.3.3).
>
> 2\. The Data Collection AF acknowledges the destruction of the session and
> its configuration with a _204 No Content_ response.
### 4.2.5 Configuration of Application Server
#### 4.2.5.1 General
An Application Server (AS) instance, as a type of data collection client,
acquires its domain-specific data collection and reporting configuration from
a Data Collection AF instance by means of the _Ndcaf_DataReporting_ service
(either directly across reference point R4 or via an equivalent service
exposed by the NEF, depending on whether the AS and the Data Collection AF
reside in the same or separate trust domains).
Similar to clause 4.2.4, the AS shall obtain its configuration by invoking the
_Ndcaf_DataReporting_CreateSession_ service operation, as described under
clause 7.2.2.3.1.
The configuration information is contained in a generic data collection and
reporting configuration envelope that shall include at minimum the baseline
configuration parameters defined in clause 4.6.3 of TS 26.531 [7]. The
configuration shall specify the domain-specific parameters associated with the
specified Event ID(s) to be reported to the Data Collection AF.
#### 4.2.5.2 Application Server retrieves its initial configuration by
creating a Data Reporting Session
The call flow in figure 4.2.5.2‑1 shows the interaction between the
Application Server and the Data Collection AF at the initial configuration of
the Application Server.
**Figure 4.2.5.2-1: Initial configuration of Application Server**
The steps in this procedure are as follows:
> 1\. The Application Server invokes the _Ndcaf_DataReporting_CreateSession_
> service operation by sending an HTTP POST request to the Data Collection AF
> (see clauses 7.2.2.2 and 7.2.2.3.1). A _DataReportingSession_ resource
> entity (see clause 7.3.2.1) is included in the request message body, but
> only properties _externalApplicationId_ and _supportedDomains_ are present
> (because the other properties are unknown to the Application Server).
>
> 2\. In its _201 Created_ response, the Data Collection AF provides a
> _DataReportingSession_ resource entity in the message body, which expands
> the content of the request message body in step 1 by adding the properties
> _sessionId_ , _validUntil_ , _reportForDomains_ and _reportingCondition_.
> The _validUntil_ property of the provided _DataReportingSession_ should be a
> time in the future.
The Application Server is now configured.
#### 4.2.5.3 Updating and renewing data collection and reporting configuration
##### 4.2.5.3.1 Introduction
The data collection and reporting configuration may change as a result of
subscriptions to events exposed by the Data Collection AF, for example, as a
result of narrower or wider filters applied to an event subscription. There
are two ways for a modified data collection and reporting configuration to be
acquired by the Application Server:
1\. The Application Server invokes the _Ndcaf_DataReporting_RetrieveSession_
service operation (see clause 4.2.5.3.2).
2\. The Data Collection AF supplies a _DataReportingSession_ in response to a
data report submitted by the Application Server (see clause 4.2.5.3.3).
##### 4.2.5.3.2 Application Server retrieves up-to-date configuration
This operation is typically performed when the _validUntil_ property of the
current _DataReportingSession_ stored in the Application Server is about to
expire.
**Figure 4.2.5.3.2-1: Application Server retrieves up-to-date
DataReportingSession**
The steps in this procedure are as follows:
> 1\. The Application Server requests the _DataReportingSession_ for the
> current session by using the _Ndcaf_DataReporting _RetrieveSession_ service
> operation (see clauses 7.2.3.2 and 7.2.3.3.1).
>
> 2\. The Data Collection AF provides the latest _DataReportingSession_ in the
> message body of a _200 OK_ response. The _validUntil_ property of the
> provided _DataReportingSession_ should be a time in the future. In addition,
> the Data Collection AF may change properties _reportForDomains_ and
> _reportingCondition_.
##### 4.2.5.3.3 DataReportingSession updated in response to data reporting
See clause 4.2.7.
#### 4.2.5.4 Application Server destroys Data Reporting Session
The Application Server may destroy a Data Reporting Session and the data
collection and reporting configuration it represents by invoking the
_Ndcaf_DataReporting_DestroySession_ service operation.
**Figure 4.2.5.4-1: Application Server destroys DataReportingSession**
The steps in this procedure are as follows:
> 1\. The Application Server invokes the _Ndcaf_DataReporting_DestroySession_
> service operation by sending an HTTP DELETE request to the Data Collection
> AF (see clauses 7.2.3.2 and 7.2.3.3.3).
>
> 2\. The Data Collection AF acknowledges the destruction of the session and
> its configuration with a _204 No Content_ response.
### 4.2.6 Indirect data reporting
After acquiring its data collection and configuration from the Data Collection
AF, and in accordance with this configuration, the Indirect Data Collection
Client shall send reporting domain-specific data reports to the Data
Collection AF by invoking the _Ndcaf_DataReporting_Report_ service operation
across reference point R3 as described under clause 7.2.3.4.1. The data
reports shall be supplied in a generic data report envelope that includes at
minimum the baseline information for data reporting defined in clause 4.6.4 of
TS 26.531 [7].
The call flow in figure 4.2.6‑1 shows the procedure for indirect data
reporting.
> NOTE: It is assumed that the Indirect Data Collection Client is already
> configured per the procedures specified in clause 4.2.4.
>
> {width="4.864583333333333in" height="2.4166666666666665in"}
**Figure 4.2.6-1: Indirect data reporting**
> 1\. When the _reportCondition_ of a _DataReportingSession_ is fulfilled, the
> Indirect Data Collection Client invokes the _Ndcaf_DataReporting_Report_
> service operation (see clauses 7.2.3.2 and 7.2.3.4.1) by issuing an HTTP
> POST request to the Data Collection AF. The request message body is a
> _DataReport_ (see clause 7.3.2.3).
2\. In the HTTP response the Data Collection AF may provide an up-to-date
_DataReportingSession_. The Indirect Data Collection Client shall take note of
any changes and act accordingly.
### 4.2.7 Reporting by Application Server
After acquiring its data collection and configuration from the Data Collection
AF, and in accordance with this configuration, the Application Server shall
send reporting domain-specific data reports to the Data Collection AF by
invoking the _Ndcaf_DataReporting_Report_ service operation across reference
point R4 as described under clause 7.2.3.4.1. The data reports shall be
supplied in a generic data report envelope that includes at minimum the
baseline information for data reporting defined in clause 4.6.4 of TS 26.531
[7].
The call flow in figure 4.2.7‑1 shows the procedure for data reporting by the
Application Server.
> NOTE: It is assumed that the Application Server is already configured per
> the procedures specified in clause 4.2.5.
**Figure 4.2.7-1: Data reporting by Application Server**
> 1\. When the _reportCondition_ of a _DataReportingSession_ is fulfilled, the
> Application Server invokes the _Ndcaf_DataReporting_Report_ service
> operation (see clauses 7.2.3.2 and 7.2.3.4.1) by issuing an HTTP POST
> request to the Data Collection AF. The request message body is a
> _DataReport_ (see clause 7.3.2.3).
2\. In the HTTP response the Data Collection AF may provide an up-to-date
_DataReportingSession_. The Application Server shall take note of any changes
and act accordingly.
### 4.2.8 Event subscription, management and publication
This clause pertains to the use of the _Naf_EventExposure_ service API as
defined in TS 29.517 [5] and invoked by the NWDAF or an Application Server
Provider AF to subscribe to and receive UE data related event information from
a Data Collection AF.
## 4.3 UE-to-network procedures
### 4.3.1 General
This clause specifies the procedures used between the UE and Network Functions
in support of provisioning a data collection and reporting configuration in
the UE's Direct Data Collection Client, and subsequent reporting of the
collected UE data to the Data Collection AF.
### 4.3.2 Configuration of Direct Data Reporting Client
#### 4.3.2.1 General
A Direct Data Reporting Client instance acquires its domain-specific data
collection and reporting configuration from a Data Collection AF instance by
means of the _Ndcaf_DataReporting_ service across reference point R2.
The Direct Data Reporting Client shall obtain its configuration by invoking
the _Ndcaf_DataReporting_CreateSession_ service operation, as described under
clause 7.2.2.3.1.
The configuration information is contained in a generic data collection and
reporting configuration envelope that shall include at minimum the baseline
configuration parameters defined in clause 4.6.3 of TS 26.531 [7]. The
configuration shall specify the domain-specific parameters associated with the
specified Event ID(s) to be reported to the Data Collection AF.
#### 4.3.2.2 Direct Data Collection Client retrieves its initial configuration
by creating a Data Reporting Session
The call flow in figure 4.3.2.2‑1 shows the interaction between the Direct
Data Collection Client and the Data Collection AF at the initial configuration
of the Direct Data Collection Client.
Figure 4.3.2.2-1: Initial configuration of Direct Data Collection Client
The steps in this procedure are as follows:
1\. The Direct Data Collection Client invokes the
_Ndcaf_DataReporting_CreateSession_ service operation by sending an HTTP POST
request to the Data Collection AF (see clauses 7.2.2.2 and 7.2.2.3.1). A
_DataReportingSession_ resource entity (see clause 7.3.2.1) is included in the
request message body, but only properties _externalApplicationId_ and
_supportedDomains_ are present (because the other properties are unknown to
the Direct Data Collection Client).
2\. In its _201 Created_ response, the Data Collection AF provides an extended
version of the _DataReportingSession_ resource entity in the message body,
adding the properties _sessionId_ , _validUntil_ , _reportForDomains_ and
_reportingCondition_ to the entity received from the Direct Data Collection
Client in step 1. The _validUntil_ property of the provided
_DataReportingSession_ should be a time in the future.
The Direct Data Collection Client is now configured.
#### 4.3.2.3 Updating and renewing data collection and reporting configuration
##### 4.3.2.3.1 Introduction
The data collection and reporting configuration may change as a result of
subscriptions to events exposed by the Data Collection AF, for example, as a
result of narrower or wider filters applied to an event subscription. There
are two ways the data collection and reporting configuration can be updated or
renewed by the Direct Data Collection Client:
1\. The Direct Data Collection Client invokes the
_Ndcaf_DataReporting_RetrieveSession_ service operation (see clause
4.3.2.3.2).
2\. The Data Collection AF supplies a _DataReportingSession_ in response to a
data report submitted by the Direct Data Collection Client (see clause
4.3.2.3.3).
##### 4.3.2.3.2 Direct Data Collection Client retrieves up-to-date
configuration
This operation is typically performed when the _validUntil_ property of the
current _DataReportingSession_ stored in the Direct Data Collection Client is
about to expire.
Figure 4.3.2.3.2-1: Direct Data Collection Client retrieves up-to-date
DataReportingSession
The steps in this procedure are as follows:
1\. The Direct Data Collection Client requests the _DataReportingSession_ for
the current session by using the _Ndcaf_DataReporting_RetrieveSession_ service
operation (see clauses 7.2.3.2 and 7.2.3.3.1).
2\. The Data Collection AF provides the latest _DataReportingSession_ in the
message body of a _200 OK_ response. The _validUntil_ property of the provided
_DataReportingSession_ should be a time in the future. In addition, the Data
Collection AF may change properties _reportForDomains_ and
_reportingCondition_.
##### 4.3.2.3.3 DataReportingSession updated in response to data reporting
See clause 4.3.3.
#### 4.3.2.4 Direct Data Collection Client destroys Data Reporting Session
The Direct Data Collection Client may destroy a Data Reporting Session and the
data collection and reporting configuration it represents by invoking the
_Ndcaf_DataReporting_DestroySession_ service operation.
Figure 4.3.2.3-1: Direct Data Collection Client destroys DataReportingSession
The steps in this procedure are as follows:
1\. The Direct Data Collection Client invokes the
_Ndcaf_DataReporting_DestroySession_ service operation by sending an HTTP
DELETE request to the Data Collection AF (see clauses 7.2.2.2 and 7.2.3.3.3).
2\. The Data Collection AF acknowledges the destruction of the session and its
configuration with a _204 No Content_ response.
### 4.3.3 Direct data reporting
After acquiring its data collection and configuration from the Data Collection
AF, and in accordance with this configuration, the Direct Data Collection
Client shall send domain-specific data reports to the Data Collection AF by
invoking the _Ndcaf_DataReporting_Report_ service operation across reference
point R2 as described under clause 7.2.3.4.1. The data reports shall be
supplied in a generic data report envelope that includes at minimum the
baseline information for data reporting defined in clause 4.6.4 of TS 26.531
[7].
The call flow in figure 4.3.3‑1 shows the procedure for direct data reporting.
NOTE: It is assumed that the Direct Data Collection Client is already
configured per the procedures specified in clause 4.3.2.
Figure 4.3.3-1: Direct data reporting
1\. When the _reportCondition_ of a _DataReportingSession_ is fulfilled, the
Direct Data Collection Client invokes the _Ndcaf_DataReporting_Report_ service
operation (see clauses 7.2.2.2 and 7.2.3.4.1) by issuing an HTTP POST request
to the Data Collection AF. The request message body is a _DataReport_ (see
clause 7.3.2.3).
2\. In the HTTP response the Data Collection AF may provide an up-to-date
_DataReportingSession_. The Direct Data Collection Client shall take note of
any changes and act accordingly.
## 4.4 UE-internal procedures
### 4.4.1 General
This clause specifies the procedures used by internal UE entities, namely a UE
Application and the associated Direct Data Collection Client, in support of UE
data collection by the Direct DC-Client for subsequent reporting to the DC-AF.
As described in clause 4.2 of TS 26.531 [7], the UE Application shares
relevant data with the Direct Data Collection Client via reference point R7
using the API specified in clause 8. In this release, such data sharing is
enabled by UE Application configuration via R7 as specified in the subsequent
clauses.
The Direct Data Collection Client is presumed to operate as a background
service, and its functionality is invoked upon activation of the UE
Application (whose role or task is domain-specific).
Each running instance of a UE Application compliant with the present document
shall be associated with a dedicated instance of the Direct Data Collection
Client, i.e., a separate logical _data collection and reporting context_
exists for each pair of UE Application instance and Data Collection Client
instance. If there are multiple UE Applications running concurrently on a UE,
each UE Application requires a unique data collection and reporting context
mapped to a separate Data Reporting Session at reference point R2.
### 4.4.2 Application registration procedure
Upon activation, the UE Application requests its UE data collection and
reporting configuration from the Direct Data Collection Client by invoking the
_registerUeApplication_ method at reference point R7. The UE Application
provides as input parameters its External Application Identifier, Application
Service Provider identifier, and information on its callback listener (for
receiving notifications from the Direct Data Collection Client). Using another
input parameter, the UE Application also indicates its consent for the UE
identity (i.e. GPSI) to be included in Data Reports sent to the Data
Collection AF.
As a consequence, the Direct Data Collection Client establishes a new Data
Reporting Session with the Data Collection AF using the procedure specified in
clause 4.3.2.2. The _Ndcaf_DataReporting_CreateSession_ invocation includes
the GPSI of the UE (if consent is given by the UE Application) or otherwise
the Direct Data Collection Client shall instead generate an opaque client
reporting identifier that is globally unique and stable (e.g. a UUID) and
include this in the invocation of the service operation.
If successful, the Direct Data Collection Client returns a UE data collection
and reporting configuration to the UE Application based on the information
returned by the Data Collection AF in the newly created Data Reporting Session
resource. As indicated in TS 26.531 [7], a generic envelope containing that
data collection and reporting configuration information is employed and its
content, as indicated in table 4.6.3-1 of [7], is reporting domain-specific.
### 4.4.4 Data reporting procedure
The UE Application reports data to the Direct Data Collection Client by
invoking the _reportUeData_ method on the Direct Data Collection Client at
reference point R7.
As a consequence, the Direct Data Collection Client may report the UE data
provided by invoking the procedure specified in clause 4.3.3. Depending on the
Data Reporting Configuration, the Direct Data Collection Client may instead
store the UE data and forward it later.
### 4.4.5 Configuration update procedure
The Direct Data Collection Client notifies the UE Application of changes to
the UE data collection and reporting configuration by sending a
_dataCollectionAndReporting‌Configuration‌Changed_ callback notification.
The UE Application responds by invoking the
_getDataCollectionAnd‌ReportingConfiguration_ method at reference point R7 to
obtain the new configuration and acts upon it accordingly.
### 4.4.6 Procedure for changing consent to report the UE identifier
The UE Application can change its consent to reveal the GPSI of the UE in Data
Reports sent to the Data Collection AF during the course of a data reporting
session by invoking the _setUserConsent_ method on the Direct Data Collection
Client at reference point R7.
As a consequence, the Direct Data Collection Client shall destroy the current
Data Reporting Session and create a new one that includes either the GPSI of
the UE or the opaque client reporting identifier, according to whether consent
is granted or withdrawn.
### 4.4.7 Procedure for changing the opaque client reporting identifier
The UE Application may reset the opaque client reporting identifier at any
time by invoking the _resetClientReporting‌Identifier_ method at reference
point R7.
As a consequence, the Direct Data Reporting Client shall destroy the current
Data Reporting Session. It shall generate a new opaque client reporting
identifier (e.g. UUID) and shall include this value when invoking the
procedure to create a replacement Data Reporting Session specified in clause
4.3.2.2.
### 4.4.8 Application deregistration procedure
Upon deactivation, the UE Application revokes its data collection and
reporting context by invoking the _deregisterUe‌Application_ method at
reference point R7.
As a consequence, the Direct Data Collection Client shall destroy the Data
Reporting Session using the procedure specified in clause 4.3.2.4 after first
flushing any unreported UE data using the procedure specified in clause 4.3.3.
# 5 General Aspects of APIs for Data Collection and Reporting
## 5.1 Overview
## 5.2 HTTP resource URIs and paths
The resource URI used in each HTTP request to the API provider shall have the
structure defined in subclause 4.4.1 of TS 29.501 [17], i.e.:
_{apiRoot}_ /_{apiName}_ /_{apiVersion}_ /_{apiSpecificResourceUriPart}_
with the following components:
\- _{apiRoot}_ shall be set as described in TS 29.501 [17].
\- _{apiName}_ shall be set as defined by the following clauses.
\- _{apiVersion}_ shall be set to \"v1\".
\- _{apiSpecificResourceUriPart}_ shall be set as described in the following
clauses.
## 5.3 Usage of HTTP
### 5.3.1 HTTP protocol version
For interfaces internal to 5GC, HTTP/2, IETF RFC 7540 [18], shall be used as
specified in clause 5.2 of TS 29.500 [9].
For other interfaces, support of HTTP/1.1 (IETF RFC 7230 [19], IETF RFC 7231
[20], IETF RFC 7232 [21], IETF RFC 7233 [22], IETF RFC 7234 [23] and IETF RFC
7235 [24]) over TLS is mandatory and support of HTTP/2 (IETF RFC 7540 [18])
over TLS is recommended.
### 5.3.2 HTTP standard headers
#### 5.3.2.1 General
See clause 5.2.2 of TS 29.500 [9] for the usage of HTTP standard headers.
#### 5.3.2.2 Origin
The Origin header shall be supported by the Data Collection AF at reference
points R1, R2, R3 and R4.
#### 5.3.2.3 Content type
The format of HTTP message bodies specified in the present document shall be
JSON as specified in clause 5.4 of 3GPP TS 29.500 [9]. The use of the JSON
format shall be signalled by the content type \"application/json\", as
specified in section 11 of IETF RFC 8259 [12].
#### 5.3.2.4 Access-Control-Allow-Origin
The Access-Control-Allow-Origin header shall be supported by the Data
Collection AF at reference points R1, R2, R3, R4.
#### 5.3.2.5 Access-Control-Allow-Methods
The Access-Control-Allow-Methods header shall be supported by the Data
Collection AF at reference points R1, R2, R3 and R4.
#### 5.3.2.6 Access-Control-Allow-Headers
The Access-Control-Allow-Headers header shall be supported by the Data
Collection AF at reference points R1, R2, R3 and R4.
### 5.3.3 HTTP response codes
Guidelines for HTTP _4xx (Client Error)_ status codes in response to the
invocation of the UE data collection and reporting APIs defined in clauses 6
and 7 are specified in clause 4.8 of TS 29.501 [17].
## 5.4 Common API data types
### 5.4.0 General
Table 5.4.0‑1 specifies data types re-used from other specifications by the
common API data types defined in clause 5.4, including a reference to their
respective specifications.
Table 5.4.0‑1: Externally defined data types used by common data types
Data type Comments Reference
* * *
_Float_ A floating-point number. TS 29.571 [12] _Uri_ A Uniform Resource
Identifier.  
_Percentage_ A proportion represented as a floating-point number between 0.0
and 100.0. TS 26.512 [13] _LocationArea5G_ A list of areas where the UE is
located. TS 29.122 [14]
### 5.4.1 Simple data types
### 5.4.2 Structured data types
#### 5.4.2.1 DataSamplingRule type
Table 5.4.2.1‑1 Definition of DataSamplingRule type
+-------------+-------------+-------------+-----------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+===========+=============+ | _samp |_ Float _| 0..1 |__C: RW_ _| How often | | lingPeriod_ | | | | (expressed | | | | | **U: RW** | in seconds) | | | | | | the UE data | | | | | | p | | | | | | arameter(s) | | | | | | are to be | | | | | | measured | | | | | | and logged | | | | | | by the data | | | | | | collection | | | | | | client. | +-------------+-------------+-------------+-----------+-------------+ | _loca | * | 0..1 |__C: RW_ _| Indication | | tionFilter_ | array(Locat | | | of the UE | | | ionArea5G)_| |__U: RW_ * | location(s) | | | | | | at which UE | | | | | | data | | | | | | p | | | | | | arameter(s) | | | | | | are to be | | | | | | collected | | | | | | by the data | | | | | | collection | | | | | | client. | +-------------+-------------+-------------+-----------+-------------+ | NOTE: A | | | | | | logical | | | | | | conjunction | | | | | | (i.e., | | | | | | Boolean | | | | | | AND) is | | | | | | meant when | | | | | | more than | | | | | | one | | | | | | property is | | | | | | present in | | | | | | the same | | | | | | information | | | | | | element -- | | | | | | i.e., data | | | | | | is to be | | | | | | collected | | | | | | at the | | | | | | indicated | | | | | | sampling | | | | | | frequency | | | | | | when the UE | | | | | | is present | | | | | | at any of | | | | | | the | | | | | | indicated | | | | | | locations. | | | | | +-------------+-------------+-------------+-----------+-------------+
#### 5.4.2.2 DataReportingRule type
Table 5.4.2.2‑1 Definition of DataReportingRule type
+-------------+-------------+-------------+-----------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+===========+=============+ | * | * | 0..1 | **C: RW** | The | | reporting‌P | Percentage _| | | probability | | robability_ | | | **U: RW** | of | | | | | | reporting | | | | | | by the data | | | | | | collection | | | | | | client of | | | | | | the UE data | | | | | | p | | | | | | arameter(s) | | | | | | it has | | | | | | logged. | | | | | | | | | | | | If omitted, | | | | | | the default | | | | | | value of | | | | | | this | | | | | | parameter | | | | | | shall be | | | | | | 100 | | | | | | percent. | | | | | | | | | | | | On each | | | | | | occasion | | | | | | the | | | | | | reporting | | | | | | condition | | | | | | (see | | | | | | clau | | | | | | se 7.3.2.2) | | | | | | is met, the | | | | | | data | | | | | | collection | | | | | | client | | | | | | shall use a | | | | | | random | | | | | | number | | | | | | generator | | | | | | to produce | | | | | | an integer | | | | | | value | | | | | | between 0 | | | | | | and 100, | | | | | | and a | | | | | | report is | | | | | | sent to the | | | | | | Data | | | | | | Collection | | | | | | AF if the | | | | | | random | | | | | | value is | | | | | | less than | | | | | | or equal to | | | | | | this | | | | | | parameter. | +-------------+-------------+-------------+-----------+-------------+ | _report |_ Uri _| 1..1 |__C: RW_ _| The format | | ing‌Format_ | | | | of reports | | | | | **U: RW** | to be sent | | | | | | by the data | | | | | | collection | | | | | | client to | | | | | | the Data | | | | | | Collection | | | | | | AF (e.g., | | | | | | encoding | | | | | | rules, | | | | | | ordering of | | | | | | parameters, | | | | | | delineation | | | | | | marking | | | | | | between | | | | | | parameters, | | | | | | etc.). | | | | | | | | | | | | In the | | | | | | absence of | | | | | | a data | | | | | | reporting | | | | | | rule, a | | | | | | default | | | | | | reporting | | | | | | format for | | | | | | the data | | | | | | domain in | | | | | | question | | | | | | shall be | | | | | | assumed. | +-------------+-------------+-------------+-----------+-------------+ | _da |_ string _| 0..1 |__C: RW_ _| Strategy | | ta‌Packagin | | | | for | | g‌Strategy_ | | | **U: RW** | packaging | | | | | | UE data | | | | | | into | | | | | | reports | | | | | | sent to the | | | | | | Data | | | | | | Collection | | | | | | AF (e.g., | | | | | | maximum | | | | | | number of | | | | | | data | | | | | | records per | | | | | | report, | | | | | | maximum | | | | | | report | | | | | | size). | | | | | | | | | | | | If absent, | | | | | | the data | | | | | | collection | | | | | | client | | | | | | should | | | | | | employ the | | | | | | default | | | | | | data | | | | | | packaging | | | | | | strategy | | | | | | specified | | | | | | by the | | | | | | indicated | | | | | | reporting | | | | | | format or, | | | | | | in the | | | | | | absence of | | | | | | such | | | | | | spe | | | | | | cification, | | | | | | any | | | | | | reasonable | | | | | | data | | | | | | packaging | | | | | | strategy. | +-------------+-------------+-------------+-----------+-------------+ | NOTE: A | | | | | | logical | | | | | | conjunction | | | | | | (i.e., | | | | | | Boolean | | | | | | AND) is | | | | | | meant when | | | | | | more than | | | | | | one | | | | | | property is | | | | | | present in | | | | | | the same | | | | | | information | | | | | | element -- | | | | | | i.e., data | | | | | | is to be | | | | | | reported | | | | | | with the | | | | | | indicated | | | | | | p | | | | | | robability, | | | | | | according | | | | | | to the | | | | | | indicated | | | | | | reporting | | | | | | format and | | | | | | data | | | | | | packaging | | | | | | strategy. | | | | | +-------------+-------------+-------------+-----------+-------------+
### 5.4.3 Enumerated data types
#### 5.4.3.1 DataCollectionClientType enumeration
Enumeration of the _DataCollectionClientType_ is defined in table 5.4.3.1-1.
Table 5.4.3.1-1 Enumeration of DataCollectionClientType
Enumeration value Description
* * *
_DIRECT_ Direct Data Collection Client. _INDIRECT_ Indirect Data Collection
Client. _APPLICATION_SERVER_ Application Server performing the role of a data
collection client.
## 5.5 Explanation of API data model notation
The data models in the following API clauses are specified using the following
notational conventions:
1\. Data models are expressed as an unordered list of JSON properties [28]
with one property defined in each row of the data model table.
2\. The _Data type_ column defines the type of the property, according to JSON
notation [28].
3\. The keyword _Array_ in the _Data type_ column indicates that zero or more
elements of the data type in brackets are included. The number of elements in
the array may additionally be constrained by normative text in the
_Description_ column.
4\. The _Cardinality_ column defines whether a property is optional or
mandatory. An array with cardinality 0 indicates that the array property is
optional in the data structure. An array with cardinality 1 indicates that the
property is mandatory in the data structure, even when the array is empty.
5\. The keyword _Object_ in the _Data type_ column indicates a structured sub-
object of an unnamed type whose properties are defined inline in the indented
table rows immediately afterwards. The _Object_ type may be combined with the
_Array_ type.
6\. In the case of data types specifying RESTful resources, the additional
_Usage_ column defines the property behaviour for each CRUD Operation as
follows:
\- \"C\" (Create), \"R\" (Read) and \"U\" (Update) refers to the CRUD
procedure during which the property is present in the resource type. (The
Delete operation never takes any input data type.)
\- \"RO\" signifies a read-only property. Only the API provider function is
permitted to modify the property value. The API invoker can only read the
value.
\- \"RW\" signifies a read/write property. The API provider and API invoker
may both modify the property value.
7\. An additional read-only property (denoted \"C: ---\" and \"R: RO\") is
included at the start of all data models defining resources that are members
of a RESTful collection. This property is populated by the API provider at the
point of creation with the unique identifier of the resource within its parent
collection, and the value of this property corresponds to the leaf path
element in the RESTful URL of the created resource.
# 6 Ndcaf_DataReportingProvisioning service
## 6.1 General
This clause specifies the API used by the Provisioning AF of an Application
Service Provider to create and manage one or more Data Reporting Provisioning
Session resources in the Data Collection AF, and for each Data Reporting
Provisioning Session, to create and manipulate its subordinate Data Reporting
Configuration resource.
## 6.2 Resources
### 6.2.1 Resource structure
Figure 6.2.1-1 depicts the URL path model for the
_Ndcaf_DataReportingProvisioning_ service.
Figure 6.2.1‑1: URL path model of Ndcaf_DataReportingProvisioning service API
Table 6.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.1‑1: Resources and methods overview
+----------+----------+----------+----------+----------+----------+ | Service | O | Resource | Resource | HTTP | Des | | name | peration | name | pat | method | cription | | | name | | h suffix | | | +==========+==========+==========+==========+==========+==========+ | _Nd |_ Create | Data | / | POST | Prov | | caf_Dat | Session _| R | sessions | | isioning | | aReporti | | eporting | | | AF | | ng‌Provi | | Prov | | | est | | sioning_ | | isioning | | | ablishes | | | | Sessions | | | a Data | | | | co | | | R | | | | llection | | | eporting | | | | | | | Prov | | | | | | | isioning | | | | | | | Session | | | | | | | resource | | | | | | | at the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+ | | * | Data | /sessio | GET | R | | | Retrieve | R | ns/_{ses | | etrieves | | | Session_ | eporting | sionId}_| | an | | | | Prov | | | existing | | | | isioning | | | Data | | | | Session | | | R | | | | | | | eporting | | | | | | | Prov | | | | | | | isioning | | | | | | | Session | | | | | | | resource | | | | | | | from the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+ | |_ Destroy | | | DELETE | Destroys | | | Session _| | | | a Data | | | | | | | R | | | | | | | eporting | | | | | | | Prov | | | | | | | isioning | | | | | | | Session | | | | | | | r | | | | | | | esource. | +----------+----------+----------+----------+----------+----------+ | |_ Crea | Data | /session | POST | Creates | | | teConfig | R | s/‌ _{ses | | a Data | | | uration_ | eporting | sionId}_| | R | | | | Config | /‌config | | eporting | | | | urations | urations | | Confi | | | | co | | | guration | | | | llection | | | resource | | | | | | | at the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+ | |_ Retrie | Data | /sess | GET | R | | | veConfig | R | ions/‌ _{ | | etrieves | | | uration_ | eporting | sessionI | | an | | | | Confi | d}_/‌con | | existing | | | | guration | figurati | | Data | | | | | ons/‌_{c | | R | | | | | onfigura | | eporting | | | | | tionId}_| | Confi | | | | | | | guration | | | | | | | resource | | | | | | | from the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+ | |_ Upda | | | PUT, | Modifies | | | teConfig | | | | an | | | uration _| | | PATCH | existing | | | | | | | Data | | | | | | | R | | | | | | | eporting | | | | | | | Confi | | | | | | | guration | | | | | | | resource | | | | | | | at the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+ | |_ Destr | | | DELETE | Destroys | | | oyConfig | | | | a Data | | | uration* | | | | R | | | | | | | eporting | | | | | | | Confi | | | | | | | guration | | | | | | | resource | | | | | | | at the | | | | | | | Data | | | | | | | Co | | | | | | | llection | | | | | | | AF. | +----------+----------+----------+----------+----------+----------+
### 6.2.2 Data Reporting Provisioning Sessions resource collection
#### 6.2.2.1 Description
The Data Reporting Provisioning Sessions resource collection represents the
set of all Data Reporting Provisioning Sessions at a given Data Collection AF
(service) instance. The resource collection enables a Provisioning AF to
create and manage individual Data Reporting Provisioning Session resources at
the Data Collection AF.
#### 6.2.2.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-reporting-
provisioning/{apiVersion}/sessions**
This resource shall support the resource URL variables defined in table
6.2.2.2-1.
Table 6.2.2.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2. _apiVersion_ See clause 5.2.
#### 6.2.2.3 Resource Standard Methods
##### 6.2.2.3.1 Ndcaf_DataReportingProvisioning_CreateSession operation using
POST method
This service operation shall support the URL query parameters specified in
table 6.2.2.3.1-1.
Table 6.2.2.3.1-1: URL query parameters supported by the POST method on this
resource
Parameter Data type P Cardinality Description
* * *
This service operation shall support the request data structures specified in
table 6.2.2.3.1-2, the request headers specified in table 6.2.2.3.1-3. and the
response data structures and response codes specified in table 6.2.2.3.1-4.
Table 6.2.2.3.1-2: Data structures supported by the POST request body on this
resource
Data type P Cardinality Description
* * *
_DataReportingProvisioning‌Session_ M 1 Data supplied by the Provisioning AF
to enable creation of a new Data Reporting Provisioning Session at the Data
Collection AF.
Table 6.2.2.3.1-3: Headers supported for POST requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester. NOTE: If OAuth 2.0 authorization
is used the value is _Bearer_ followed by a string representing the access
token, see section 2.1 of RFC 6750 [8].
* * *
Table 6.2.2.3.1-4: Data structures supported by the POST response body on this
resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+=============+===============+ | _DataRep | M | 1 | 201 Created | The creation | | ortingProvisi | | | | of a Data | | oningSession_ | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource is | | | | | | confirmed by | | | | | | the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 6.2.2.3.1-5: Headers supported by the _201_ (_Created_) response code on
this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | The URL of the | | | | | | newly created | | | | | | resource at the | | | | | | Data Collection | | | | | | AF, according | | | | | | to the | | | | | | structure: | | | | | | {a | | | | | | piRoot}/ndcaf-d | | | | | | ata-reporting-p | | | | | | rovisioning/{ap | | | | | | iVersion}/sessi | | | | | | ons/{sessionId} | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
NOTE: Standard HTTP redirection using a 3xx response code with the Location
header as well as Alt-Svc are allowed.
### 6.2.3 Data Reporting Provisioning Session resource
#### 6.2.3.1 Description
The Data Reporting Provisioning Session resource represents a single session
within the collection of Data Reporting Provisioning Sessions at a given Data
Collection AF service instance.
#### 6.2.3.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-reporting-
provisioning/{apiVersion}/sessions/{sessionionId}**
This resource shall support the resource URI variables defined in table
6.2.3.2-1.
Table 6.2.3.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2. _apiVersion_ _String_ See clause 5.2
_sessionId_ _string_ Identifier of the Data Reporting Provisioning Session at
the Data Collection AF.
#### 6.2.3.3 Resource standard methods
##### 6.2.3.3.1 Ndcaf_DataReportingProvisioning_RetrieveSession operation
using GET method
This method shall support the URL query parameters specified in table
6.2.3.3.1-1 and the request headers specified in table 6.2.3.3.1-2.
Table 6.2.3.3.1-1: URL query parameters supported by the GET method on this
resource
Name Data type P Cardinality Description
* * *
Table 6.2.3.3.1-2: Headers supported for GET requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester. NOTE: If OAuth 2.0 authorization
is used, the value is _Bearer_ followed by a string representing the access
token, see section 2.1 RFC 6750 [8].
* * *
This method shall support the response data structures and response codes
specified in table 6.2.3.3.1-3.
Table 6.2.3.3.1-3: Data structures supported by the GET response body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | _DataRep | M | 1 | 200 OK | The requested | | ortingProvisi | | | | Data | | oningSession_ | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource is | | | | | | returned to | | | | | | the | | | | | | Provisioning | | | | | | AF by the | | | | | | Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Session | | | | | | Provisioning | | | | | | session | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" | | | | | | (Extended | | | | | | Support of | | | | | | HTTP 307/308 | | | | | | redirection | | | | | | as defined in | | | | | | TS 2 | | | | | | 9.502 [11]) | | | | | | is supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Session | | | | | | Provisioning | | | | | | session | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | This Data | | oblemDetails_ | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource does | | | | | | not exist | | | | | | (see NOTE 2). | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method as | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | sub | | | | | | clause 6.2.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.3.1-4: Headers supported by the 200 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.3.1-5: Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
##### 6.2.3.3.2 Ndcaf_DataReportingProvisioning_UpdateSession operation
The PUT or PATCH method shall not be used as the update operation is not
permitted on the Data Reporting Provisioning Session resource.
##### 6.2.3.3.3 Ndcaf_DataReportingProvisioning_DestroySession operation using
DELETE method
This service operation shall support the URL query parameters specified in
table 6.2.3.3.3-1.
Table 6.2.3.3.3-1: URL query parameters supported by the DELETE method on this
resource
Name Data type P Cardinality Description
* * *
This method shall support the request data structures and headers as specified
in tables 6.2.3.3.3-2 and 6.2.3.3.3-3, respectively. Furthermore, this method
shall support the response data structures as specified in table 6.2.3.3.3-4,
and the different response codes as specified in tables 6.2.3.3.3-5 and
6.2.3.3.3-6, respectively.
Table 6.2.3.3.3-2: Data structures supported by the DELETE request body on
this resource
Data type P Cardinality Description
* * *
Table 6.2.3.3.3-3: Headers supported for DELETE requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester.) NOTE: If OAuth 2.0 authorization
is used the value is _Bearer_ followed by a string representing the access
token, see section 2.1 of RFC 6750 [8].
* * *
Table 6.2.3.3.3-4: Data structures supported by the DELETE response body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Success case: | | | | | Content | The Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource | | | | | | matching the | | | | | | _sessionId_ | | | | | | was destroyed | | | | | | at the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" as | | | | | | defined in | | | | | | TS | | | | | | 29.502 [11] | | | | | | is supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | The Data | | oblemDetails_ | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource does | | | | | | not exist | | | | | | (see NOTE 2). | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | sub | | | | | | clause 6.2.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.3.3-5: Headers supported by the 204 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE._ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.3.3-6 Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS | | | | | | [10].Supplied | | | | | | if the request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _PATCH,_ | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
### 6.2.4 Data Reporting Configurations resource collection
#### 6.2.4.1 Description
The Data Reporting Configurations resource collection represents the set of
all Data Reporting Configurations that have been created within the scope of a
particular Data Reporting Provisioning Session at a given Data CollectionAF
(service) instance. The resource collection enables a Provisioning AF to
create and manage individual Data Reporting Configuration resources at the
Data Collection AF.
#### 6.2.4.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-reporting-
provisioning/{apiVersion}/sessions/{sessionId}/‌configurations/**
This resource shall support the resource URL variables defined in table
6.2.4.2-1.
Table 6.2.4.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2. _apiVersion_ See clause 5.2. _sessionId_
_ResourceId_ Identifier of the Data Reporting Provisioning Session resource at
the Data Collection AF.
#### 6.2.4.3 Resource standard methods
##### 6.2.4.3.1 Ndcaf_DataReportingProvisioning_CreateConfiguration operation
using POST method
This service operation shall support the URL query parameters specified in
table 6.2.4.3.1-1.
Table 6.2.4.3.1-1: URL query parameters supported by the POST method on this
resource
Parameter Data type P Cardinality Description
* * *
This service operation shall support the request data structures and headers
specified in tables 6.2.4.3.1-2 and 6.2.4.3.1‑3, respectively, and the
response data structures and response codes specified in table 6.2.4.3.1-4.
Table 6.2.4.3.1-2: Data structures supported by the POST request body on this
resource
Data type P Cardinality Description
* * *
_DataReportingConfiguration_ M 1 Configuration data supplied by the
Provisioning AF to the Data Collection AF regarding UE data collection and
reporting by data collection clients, and subsequent event exposure by the
Data Collection AF.
Table 6.2.4.3.1-3: Headers supported for POST requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester. NOTE: If OAuth 2.0 authorization
is used the value is _Bearer_ followed by a string representing the access
token, see section 2.1 of RFC 6750 [8].
* * *
Table 6.2.4.3.1-4: Data structures supported by the POST response body on this
resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+=============+===============+ | _D | M | 1 | 201 Created | The creation | | ataReportingC | | | | of a Data | | onfiguration_ | | | | Reporting | | | | | | Configuration | | | | | | resource is | | | | | | confirmed by | | | | | | the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
### 6.2.5 Data Reporting Configuration resource
#### 6.2.5.1 Description
A Data Reporting Configuration represents a subordinate resource of a single
Data Reporting Provisioning Session resource within the scope of an individual
application of an Application Service Provider and associated event. As
described in clause 4.2.3.3.2, it contains instructions for data collection
clients regarding the collection, processing and reporting of UE data to the
Data Collection AF, and may include data exposure restriction rules to be
followed by the Data Collection AF for controlling event exposure by to
subscriber entities.
#### 6.2.5.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-reporting-
provisioning/{apiVersion}/sessions/{sessionId}/‌configurations/{configurationId}**
This resource shall support the resource URL variables defined in table
6.2.5.2-1.
Table 6.2.5.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2. _apiVersion_ See clause 5.2. _sessionId_
_ResourceId_ Identifier of the Data Reporting Provisioning Session resource at
the Data Collection AF. _configurationId_ _ResourceId_ Identifier of the Data
Reporting Configuration resource at the Data Collection AF.
#### 6.2.5.3 Resource standard methods
##### 6.2.5.3.1 Ndcaf_DataReportingProvisioning_RetrieveConfiguration
operation using GET method
This method shall support the URL query parameters specified in table
6.2.5.3.1-1 and the headers specified in table 6.2.5.3.1-2.
Table 6.2.5.3.1-1: URL query parameters supported by the GET method on this
resource
Name Data type P Cardinality Description
* * *
Table 6.2.5.3.1-2: Headers supported for GET requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester. NOTE: If OAuth 2.0 authorization
is used, the value is _Bearer_ followed by a string representing the access
token, see section 2.1 RFC 6750 [8].
* * *
This method shall support the response data structures and response codes
specified in table 6.2.5.3.1-3.
Table 6.2.5.3.1-3: Data structures supported by the GET response body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | _D | M | 1 | 200 OK | The requested | | ataReportingC | | | | Data | | onfiguration_ | | | | Reporting | | | | | | Configuration | | | | | | resource is | | | | | | returned to | | | | | | the | | | | | | Provisioning | | | | | | AF by the | | | | | | Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Configuration | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" | | | | | | (Extended | | | | | | Support of | | | | | | HTTP 307/308 | | | | | | redirection | | | | | | as defined in | | | | | | TS 2 | | | | | | 9.502 [11]) | | | | | | is supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Session | | | | | | Configuration | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | This Data | | oblemDetails_ | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | resource does | | | | | | not exist | | | | | | (see NOTE 2). | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method as | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 6.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.5.3.1-4: Headers supported by the 200 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.5.3.1-5: Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
##### 6.2.5.3.2 Ndcaf_DataReportingProvisioning_UpdateConfiguration operation
using PUT or PATCH method
This method shall support the URL query parameters specified in table
6.2.5.3.2-1.
Table 6.2.5.3.2-1: URL query parameters supported by the PUT or PATCH method
on this resource
Name Data type P Cardinality Description
* * *
The PUT and PATCH methods shall support the request data structures specified
in tables 6.2.5.3.2-2 and 6.2.5.3.2-2a, respectively, the request headers
specified in 6.2.5.3.2-3, and the response data structures and response codes
specified in tables 6.2.5.3.2-4 and 6.2.5.3.2-5, respectively.
Table 6.2.5.3.2-2: Data structures supported by the PUT request body on this
resource
Data type P Cardinality Description
* * *
_DataReportingConfiguration_ M 1 Parameters to replace an existing Data
Reporting Configuration resource.
Table 6.2.5.3.2-2a: Data structures supported by the PATCH request body on
this resource
Data type P Cardinality Description
* * *
_DataReportingConfigurationPatch_ M 1 Parameters to modify an existing Data
Reporting Configuration resource.
Table 6.2.5.3.2-3: Headers supported for PUT or PATCH requests on this
resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester. NOTE : If OAuth 2.0 authorization
is used the value is _Bearer_ followed by a string representing the access
token, see section 2.1 RFC 6750 [8]
* * *
Table 6.2.5.3.2-4: Data structures supported by the PUT or PATCH response body
on this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | _D | M | 1 | 200 OK | Confirmation | | ataReportingC | | | | of successful | | onfiguration_ | | | | replacement | | | | | | or | | | | | | modification | | | | | | of a Data | | | | | | Reporting | | | | | | Configuration | | | | | | resource, | | | | | | along with a | | | | | | r | | | | | | epresentation | | | | | | of the status | | | | | | of the update | | | | | | operation, | | | | | | carried in | | | | | | the response | | | | | | body, is | | | | | | returned by | | | | | | the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _n/a_ | | 0 | 204 No | Confirmation | | | | | Content | of successful | | | | | | replacement | | | | | | or | | | | | | modification | | | | | | of a Data | | | | | | Reporting | | | | | | Configuration | | | | | | resource is | | | | | | returned by | | | | | | the Data | | | | | | Collection | | | | | | AF, without | | | | | | an associated | | | | | | response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection, | | | | | | during a Data | | | | | | Reporting | | | | | | Configuration | | | | | | update | | | | | | operation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" | | | | | | (Extended | | | | | | Support of | | | | | | HTTP 307/308 | | | | | | redirection | | | | | | as defined in | | | | | | TS 29.502 | | | | | | [11]) is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection, | | | | | | during a Data | | | | | | Reporting | | | | | | Configuration | | | | | | update | | | | | | operation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | This Data | | oblemDetails_ | | | | Reporting | | | | | | Configuration | | | | | | resource does | | | | | | not exist | | | | | | (see NOTE 2). | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | and PATCH | | | | | | methods | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 6.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.5.3.2-5: Headers supported by the 200 or 204 response code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.5.3.2-6: Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _PATCH,_ | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
##### 6.2.5.3.3 Ndcaf_DataReportingProvisioning_DestroyConfiguration operation
using DELETE method
This service operation shall support the URL query parameters specified in
table 6.2.5.3.3-1.
Table 6.2.5.3.3-1: URL query parameters supported by the DELETE method on this
resource
Name Data type P Cardinality Description
* * *
This method shall support the request data structures and headers specified in
tables 6.2.5.3.3-2 and 6.2.5.3.3-3, respectively. Furthermore, this method
shall support the response data structures specified in table 6.2.5.3.3-4, and
the different response codes specified in tables 6.2.5.3.3-5 and 6.2.5.3.3-6,
respectively.
Table 6.2.5.3.3-2: Data structures supported by the DELETE request body on
this resource
Data type P Cardinality Description
* * *
Table 6.2.5.3.3-3: Headers supported for DELETE requests on this resource
* * *
HTTP request header Data type P Cardinality Description Authorization _string_
M 1 For authentication of the Provisioning AF (see NOTE). Origin _string_ O
0..1 Indicates the origin of the requester.) NOTE: If OAuth 2.0 authorization
is used the value is _Bearer_ followed by a string representing the access
token, see section 2.1 of RFC 6750 [8].
* * *
Table 6.2.5.3.3-4: Data structures supported by the DELETE response body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Success case: | | | | | Content | The Data | | | | | | Reporting | | | | | | Configuration | | | | | | resource | | | | | | matching the | | | | | | _con | | | | | | figurationId_ | | | | | | was destroyed | | | | | | at the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Configuration | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" as | | | | | | defined in | | | | | | TS | | | | | | 29.502 [11] | | | | | | is supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Configuration | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | The Data | | oblemDetails_ | | | | Reporting | | | | | | Configuration | | | | | | resource does | | | | | | not exist | | | | | | (see NOTE 2). | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 6.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.5.3.3-5: Headers supported by the 204 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE._ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.5.3.3-6 Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS | | | | | | [10].Supplied | | | | | | if the request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _PATCH,_ | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
## 6.3 Data model
### 6.3.1 General
Table 6.3.1-1 specifies the data types used by the
_Ndcaf_DataReportingProvisioning_ service operations.
Table 6.3.1-1: Data types specific to Ndcaf_DataReportingProvisioning service
operations
Data type Clause defined Description
* * *
_DataReportingProvisioningSession_ 6.3.2.1 A session provisioned in the Data
Collection AF for the purpose of collecting, reporting and exposing UE data
for a particular type of Event. _DataReportingConfiguration_ 6.3.2.2 The
provisioned configuration for one type of data collection client within the
scope of a Data Reporting Provisioning Session.
_DataReportingConfigurationPatch_ 6.3.2.2A Parameters to be modified in an
existing provisioned configuration for one type of data collection client
within the scope of a Data Reporting Provisioning Session.
Table 6.3.1-2 specifies data types re-used from other specifications by the
_Ndcaf_DataReportingProvisioning_ service operations, including a reference to
their respective specifications.
Table 6.3.1-2: Externally defined data types used by
Ndcaf_DataReportingProvisioning service operations
Data type Comments Reference
* * *
_AfEvent_ Identifies a type of event. TS 29.517 [5] _ApplicationId_ Identifies
the reporting application. TS 29.571 [12] _DateTime_ A point in time,
expressed as an ISO 8601 [25] date and time.  
_DurationSec_ A period of time, expressed in seconds.  
_Double_  
_Float_  
_Int32_  
_Int64_  
_Uint16_  
_Uint32_  
_Uint64_  
_Uinteger_
### 6.3.2 Structured data types
#### 6.3.2.1 DataReportingProvisioningSession resource type
Table 6.3.2.1-1: Definition of DataReportingProvisioningSession resource type
+--------------+--------------+-------------+---------+--------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +==============+==============+=============+=========+==============+ | _provisioni |_ string _| 1..1 | C: R\ | A unique | | ngSessionId_ | | | R: RO\ | identifier | | | | | U: RO | for this | | | | | | Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session. | +--------------+--------------+-------------+---------+--------------+ | _aspId_ | _AspId_ | 1..1 | C: W\ | The identity | | | | | R: RO\ | of the | | | | | U: RO | Application | | | | | | Service | | | | | | Provider (as | | | | | | specified in | | | | | | cl | | | | | | ause 5.6.2.3 | | | | | | of | | | | | | TS 29 | | | | | | .514 [26]) | | | | | | whose | | | | | | Provisioning | | | | | | AF is | | | | | | responsible | | | | | | for this | | | | | | Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session. | +--------------+--------------+-------------+---------+--------------+ | _externalAp |_ Ap | 1..1 | C: RW\ | The external | | plicationId _| plicationID_ | | R: RO\ | application | | | | | U: RO | identifier | | | | | | (see | | | | | | TS 29. | | | | | | 571 [12]), | | | | | | nominated by | | | | | | the | | | | | | Provisioning | | | | | | AF, to which | | | | | | this Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | pertains, | | | | | | and which is | | | | | | present in | | | | | | data reports | | | | | | submitted to | | | | | | the Data | | | | | | Collection | | | | | | AF. | | | | | | | | | | | | This | | | | | | property may | | | | | | also be used | | | | | | by the Event | | | | | | Consumer AF | | | | | | (located | | | | | | outside | | | | | | trusted | | | | | | domain) to | | | | | | subscribe to | | | | | | events in | | | | | | the Data | | | | | | Collection | | | | | | AF (located | | | | | | inside | | | | | | trusted | | | | | | domain). | +--------------+--------------+-------------+---------+--------------+ | _internalAp |_ Ap | 0..1 | C: RW\ | The internal | | plicationId _| plicationID_ | | R: RO\ | application | | | | | U: RO | identifier | | | | | | (see | | | | | | TS 29 | | | | | | .571 [12]) | | | | | | to be used | | | | | | by event | | | | | | consumers | | | | | | inside the | | | | | | trusted | | | | | | domain | | | | | | (including | | | | | | the NWDAF, | | | | | | the Event | | | | | | Consumer AF | | | | | | and the NEF) | | | | | | when | | | | | | subscribing | | | | | | to events in | | | | | | the Data | | | | | | Collection | | | | | | AF. | | | | | | | | | | | | This shall | | | | | | be provided | | | | | | by a | | | | | | Provisioning | | | | | | AF deployed | | | | | | inside the | | | | | | trusted | | | | | | domain when | | | | | | it creates a | | | | | | Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session. | | | | | | When the | | | | | | Provisioning | | | | | | AF is | | | | | | deployed | | | | | | outside the | | | | | | trusted | | | | | | domain, the | | | | | | NEF shall | | | | | | supply this | | | | | | property on | | | | | | behalf of | | | | | | the | | | | | | Provisioning | | | | | | AF by | | | | | | translating | | | | | | the | | | | | | _externalAp | | | | | | plicationId_ | | | | | | value | | | | | | supplied | | | | | | above into | | | | | | the | | | | | | c | | | | | | orresponding | | | | | | internal | | | | | | application | | | | | | identifier | | | | | | here. | | | | | | | | | | | | Always | | | | | | present when | | | | | | this Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session is | | | | | | returned to | | | | | | an entity | | | | | | inside the | | | | | | trusted | | | | | | domain. | | | | | | Never | | | | | | present when | | | | | | the Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session is | | | | | | returned to | | | | | | an entity | | | | | | outside the | | | | | | trusted | | | | | | domain. | +--------------+--------------+-------------+---------+--------------+ | _eventId_ | _AfEvent_ | 1..1 | C: RO\ | The type of | | | | | R: RO\ | event to | | | | | U: RO | which this | | | | | | Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session | | | | | | pertains. | | | | | | (See clause | | | | | | 5.6.3.3 of | | | | | | TS 29 | | | | | | .517 [5].) | +--------------+--------------+-------------+---------+--------------+ | _dataRe |_ Array( | 0..1 | C: ---\ | A set of | | portingConfi | ResourceId)_| | R: RO\ | identifiers | | gurationIds_ | | | U: RO | for Data | | | | | | Reporting | | | | | | Co | | | | | | nfigurations | | | | | | currently | | | | | | associated | | | | | | with this | | | | | | Data | | | | | | Reporting | | | | | | Provisioning | | | | | | Session. | +--------------+--------------+-------------+---------+--------------+
#### 6.3.2.2 DataReportingConfiguration resource type
Table 6.3.2.2-1: Definition of DataReportingConfiguration resource type
+-------------+-------------+-------------+-----------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+===========+=============+ | _dataRep | * | 1..1 |__C: R_ _| A unique | | ortingConfi | ResourceId_ | | | identifier | | gurationId _| | |__U: --__| for this | | | | | | Data | | | | | | Reporting | | | | | | Con | | | | | | figuration. | +-------------+-------------+-------------+-----------+-------------+ |_ dat | _DataC | 1..1 |__C: RW_ _| The type of | | aCollection | ollection‌C | | | data | | ClientType_ | lient‌Type _| |__U: --__| collection | | | | | | client to | | | | | | which this | | | | | | Data | | | | | | Reporting | | | | | | Co | | | | | | nfiguration | | | | | | pertains | | | | | | (see | | | | | | claus | | | | | | e 5.4.3.1). | +-------------+-------------+-------------+-----------+-------------+ |_ author | _Url_ | **0..1** | **C: RW** | **A URL | | izationURL* | | | | that may be | | | | |** U: RW**| used to | | | | | | authorize | | | | | | the | | | | | | consumer | | | | | | entity | | | | | | prior to a | | | | | | data | | | | | | reporting | | | | | | subs | | | | | | cription.** | +-------------+-------------+-------------+-----------+-------------+ | _dataSam | * |__0..1_ _|__C: RW_ _|__A set of | | plingRules_ | array(Data _| | | d | | | | |__U: RW_ _| efinitions, | | |_ Sam | | | each | | | plingRule)_| | | pertaining | | | | | | to the | | | | | | doma | | | | | | in-specific | | | | | | parameters | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session, | | | | | | r | | | | | | epresenting | | | | | | i | | | | | | nstructions | | | | | | on how UE | | | | | | data is to | | | | | | be sampled | | | | | | by the data | | | | | | collection | | | | | | client.__| | | | | | | | | | | | If omitted | | | | | | or empty, | | | | | | each | | | | | | parameter | | | | | | shall be | | | | | | sampled at | | | | | | its default | | | | | | frequency | | | | | | in all | | | | | | locations. | +-------------+-------------+-------------+-----------+-------------+ |_ dataRepo | * | **0..1** | **C: RW** | **A set of | | rtingRules _| array(Data_ | | | d | | | | | **U: RW**| efinitions, | | |_Repo | | | each | | | rtingRule)_ | | | pertaining | | | | | | to the | | | | | | doma | | | | | | in-specific | | | | | | parameters | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session and | | | | | | logged by | | | | | | the data | | | | | | collection | | | | | | client, | | | | | | r | | | | | | epresenting | | | | | | i | | | | | | nstructions | | | | | | on how | | | | | | collected | | | | | | UE data is | | | | | | to be | | | | | | reported by | | | | | | the data | | | | | | collection | | | | | | client to | | | | | | the Data | | | | | | Collection | | | | | | AF.** | | | | | | | | | | | | If omitted | | | | | | or empty, | | | | | | UE data | | | | | | shall be | | | | | | reported | | | | | | whenever | | | | | | the | | | | | | relevant | | | | | | reporting | | | | | | condition | | | | | | (see | | | | | | clau | | | | | | se 7.3.2.2) | | | | | | is met, | | | | | | using a | | | | | | default | | | | | | reporting | | | | | | format and | | | | | | data | | | | | | packaging | | | | | | strategy | | | | | | for the | | | | | | data domain | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session. | +-------------+-------------+-------------+-----------+-------------+ | _dataAcce |_ array | **1..1** | **C: RW** | **One or | | ssProfiles _| (Data‌Acces | | | more Data | | | s‌Profile)_ | | **U: RW**| Access | | | | | | Profile | | | | | | d | | | | | | efinitions, | | | | | | each | | | | | | describing | | | | | | a set of | | | | | | data | | | | | | processing | | | | | | in | | | | | | structions, | | | | | | applied by | | | | | | the Data | | | | | | Collection | | | | | | AF when | | | | | | exposing | | | | | | events.** | +-------------+-------------+-------------+-----------+-------------+
#### 6.3.2.2A DataReportingConfigurationPatch resource type
Table 6.3.2.2A-1: Definition of DataReportingConfigurationPatch resource type
+-------------+-------------+-------------+-----------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+===========+=============+ | _author |_ Url _|__0..1_ _|__C: RW_ _|__A URL | | izationURL_ | | | | that may be | | | | | **U: RW** | used to | | | | | | authorize | | | | | | the | | | | | | consumer | | | | | | entity | | | | | | prior to a | | | | | | data | | | | | | reporting | | | | | | subs | | | | | | cription.**| +-------------+-------------+-------------+-----------+-------------+ | *dataSam | * |** 0..1**|** C: RW**|** A set of | | plingRules _| array(Data_ | | | d | | | | | **U: RW** | efinitions, | | | _Sam | | | each | | | plingRule)_ | | | pertaining | | | | | | to the | | | | | | doma | | | | | | in-specific | | | | | | parameters | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session, | | | | | | r | | | | | | epresenting | | | | | | i | | | | | | nstructions | | | | | | on how UE | | | | | | data is to | | | | | | be sampled | | | | | | by the data | | | | | | collection | | | | | | client.**| | | | | | | | | | | | If omitted | | | | | | or empty, | | | | | | each | | | | | | parameter | | | | | | shall be | | | | | | sampled at | | | | | | its default | | | | | | frequency | | | | | | in all | | | | | | locations. | +-------------+-------------+-------------+-----------+-------------+ | *dataRepo | * |** 0..1**|** C: RW**|** A set of | | rtingRules _| array(Data_ | | | d | | | | | **U: RW** | efinitions, | | | _Repo | | | each | | | rtingRule)_ | | | pertaining | | | | | | to the | | | | | | doma | | | | | | in-specific | | | | | | parameters | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session and | | | | | | logged by | | | | | | the data | | | | | | collection | | | | | | client, | | | | | | r | | | | | | epresenting | | | | | | i | | | | | | nstructions | | | | | | on how | | | | | | collected | | | | | | UE data is | | | | | | to be | | | | | | reported by | | | | | | the data | | | | | | collection | | | | | | client to | | | | | | the Data | | | | | | Collection | | | | | | AF.**| | | | | | | | | | | | If omitted | | | | | | or empty, | | | | | | UE data | | | | | | shall be | | | | | | reported | | | | | | whenever | | | | | | the | | | | | | relevant | | | | | | reporting | | | | | | condition | | | | | | (see | | | | | | clau | | | | | | se 7.3.2.2) | | | | | | is met, | | | | | | using a | | | | | | default | | | | | | reporting | | | | | | format and | | | | | | data | | | | | | packaging | | | | | | strategy | | | | | | for the | | | | | | data domain | | | | | | associated | | | | | | with the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session. | +-------------+-------------+-------------+-----------+-------------+ |_dataAcce |_ Array | **0..1**|** C: RW**|** One or | | ssProfiles _| (Data‌Acces | | | more Data | | | s‌Profile)_ | | **U: RW** | Access | | | | | | Profile | | | | | | d | | | | | | efinitions, | | | | | | each | | | | | | describing | | | | | | a set of | | | | | | data | | | | | | processing | | | | | | in | | | | | | structions, | | | | | | applied by | | | | | | the Data | | | | | | Collection | | | | | | AF when | | | | | | exposing | | | | | | events.** | +-------------+-------------+-------------+-----------+-------------+
#### 6.3.2.3 DataAccessProfile type
Table 6.3.2.3-1 Definition of DataAccessProfile type
+-------------+-------------+-------------+-----------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+===========+=============+ | _dataAcces |_ string _| 1..1 |__C: RW_ _| A unique | | sProfileId_ | | | | identifier | | | | | **U: RW** | for this | | | | | | Data Access | | | | | | Profile. | +-------------+-------------+-------------+-----------+-------------+ | _targ |_ Array | 1..1 | C:RW | The set of | | etEventCons | (Event‌Cons | | | Event | | umer‌Types _| umer‌Type)_ | | U:RW | consumer | | | | | | types (see | | | | | | clau | | | | | | se 6.3.3.1) | | | | | | to which | | | | | | this Data | | | | | | Access | | | | | | Profile is | | | | | | targeted. | | | | | | | | | | | | If the set | | | | | | is empty, | | | | | | this Data | | | | | | Access | | | | | | Profile | | | | | | applies to | | | | | | all types | | | | | | of Event | | | | | | consumer. | +-------------+-------------+-------------+-----------+-------------+ | * | _Arr | 1..1 | C:RW | The set of | | parameters_ | ay(String)_| | | UE data | | | | | U:RW | parameters | | | | | | to be | | | | | | collected | | | | | | by the data | | | | | | collection | | | | | | client, and | | | | | | for which | | | | | | the | | | | | | r | | | | | | estrictions | | | | | | specified | | | | | | by this | | | | | | Data Access | | | | | | Profile | | | | | | apply. | | | | | | | | | | | | The | | | | | | parameters | | | | | | are | | | | | | uniquely | | | | | | identified | | | | | | by a | | | | | | controlled | | | | | | vocabulary | | | | | | specific to | | | | | | the Event | | | | | | ID | | | | | | indicated | | | | | | by the | | | | | | parent Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session. | | | | | | | | | | | | If the set | | | | | | is empty, | | | | | | the | | | | | | r | | | | | | estrictions | | | | | | apply to | | | | | | all | | | | | | parameters | | | | | | for the | | | | | | Event ID of | | | | | | the parent | | | | | | Data | | | | | | Reporting | | | | | | P | | | | | | rovisioning | | | | | | Session. | +-------------+-------------+-------------+-----------+-------------+ |_ t | _Object_ | 0..1 | C:RW | Co | | imeAccessRe | | | | nfiguration | | strictions _| | | U:RW | for access | | | | | | r | | | | | | estrictions | | | | | | along the | | | | | | time | | | | | | dimension. | +-------------+-------------+-------------+-----------+-------------+ |_ duration _|_ D | 1..1 | C:RW | The period | | | urationSec _| | | of time | | | | | U:RW | over which | | | | | | access is | | | | | | to be | | | | | | aggregated. | +-------------+-------------+-------------+-----------+-------------+ |_ aggregatio | _Array | 1..1 | C:RW | An ordered, | | nFunctions_ | (Data‌Aggre | | | non-empty | | | gation‌Func | | U:RW | list of | | | tion‌Type)_| | | aggregation | | | | | | functions | | | | | | (see | | | | | | clau | | | | | | se 6.3.3.2) | | | | | | applied to | | | | | | the event | | | | | | data prior | | | | | | to exposure | | | | | | to event | | | | | | consumers. | +-------------+-------------+-------------+-----------+-------------+ |_ u | _Object_ | 0..1 | C:RW | Co | | serAccessRe | | | | nfiguration | | strictions _| | | U:RW | for access | | | | | | r | | | | | | estrictions | | | | | | along the | | | | | | user | | | | | | dimension. | +-------------+-------------+-------------+-----------+-------------+ |_ groupIds _|_ Arra | 1..1 | C:RW | Identifiers | | | y(GroupId)_| | | of the UE | | | | | U:RW | groups over | | | | | | which | | | | | | access is | | | | | | to be | | | | | | aggregated. | +-------------+-------------+-------------+-----------+-------------+ |_ userIds _| * | 1..1 | C:RW | Identifiers | | | Array(Gpsi) | | | of the UEs | | | or | | U:RW | comprising | | | A | | | a group | | | rray(Supi)_ | | | over which | | | | | | access is | | | | | | to be | | | | | | aggregated. | +-------------+-------------+-------------+-----------+-------------+ | _aggregatio |_ Array | 1..1 | C:RW | An ordered, | | nFunctions _| (Data‌Aggre | | | non-empty | | | gation‌Func | | U:RW | list of | | | tion‌Type)_ | | | aggregation | | | | | | functions | | | | | | (see | | | | | | clau | | | | | | se 6.3.3.2) | | | | | | applied to | | | | | | the event | | | | | | data prior | | | | | | to exposure | | | | | | to event | | | | | | consumers. | +-------------+-------------+-------------+-----------+-------------+ | _locat |_ Object _| 0..1 | C:RW | Co | | ionAccessRe | | | | nfiguration | | strictions_ | | | U:RW | for access | | | | | | r | | | | | | estrictions | | | | | | along the | | | | | | location | | | | | | dimension | +-------------+-------------+-------------+-----------+-------------+ | _loc |_ Ar | 1..1 | C:RW | Identifiers | | ationAreas _| ray(Locatio | | | of | | | n‌Area‌5G)_ | | U:RW | g | | | | | | eographical | | | | | | areas over | | | | | | which | | | | | | access is | | | | | | to be | | | | | | aggregated. | | | | | | Event data | | | | | | is grouped | | | | | | by the | | | | | | location of | | | | | | the UE | | | | | | during the | | | | | | data | | | | | | collection. | +-------------+-------------+-------------+-----------+-------------+ | _aggregatio |_ Array | 1..1 | C:RW | An ordered, | | nFunctions _| (Data‌Aggre | | | non-empty | | | gation‌Func | | U:RW | list of | | | tion‌Type)_ | | | aggregation | | | | | | functions | | | | | | (see | | | | | | clau | | | | | | se 6.3.3.2) | | | | | | applied to | | | | | | the event | | | | | | data prior | | | | | | to exposure | | | | | | to event | | | | | | consumers. | +-------------+-------------+-------------+-----------+-------------+ | NOTE: Data | | | | | | types | | | | | | _Du | | | | | | rationSec_ , | | | | | | _GroupId_ , | | | | | | _Gpsi_ , | | | | | | _Supi_ and | | | | | | _Loca | | | | | | tionArea5G_ | | | | | | are defined | | | | | | in | | | | | | TS _| | | | | | *__29.571_ | | | | | | * **[13]. | | | | | +-------------+-------------+-------------+-----------+-------------+
### 6.3.3 Simple data types and enumerations
#### 6.3.3.1 EventConsumerType enumeration
Table 6.3.3.1‑1: Definition of EventConsumerType enumeration
Enumeration value Description
* * *
_NWDAF_ The Network Data Analytics Function is the Event Consumer.
_EVENT_CONSUMER_AF_ The Event Consumer AF is the Event Consumer. _NEF_ The
Network Exposure Function is the Event Consumer.
#### 6.3.3.2 DataAggregationFunctionType enumeration
Table 6.3.3.2-1 Definition of DataAggregationFunctionType enumeration
Enumeration value Description
* * *
_NULL_ No aggregation is applied: all values of the UE data parameter(s) are
exposed to event consumers. _COUNT_ The number of observed events over the
indicated time period or the indicated set of users or the indicated set of
locations is exposed to event consumers. _MEAN_ The mean average of the values
of the UE data parameter(s) over the indicated time period or the indicated
set of users or the indicated set of locations is exposed to event consumers.
_MAXIMUM_ The maximum observed value of the UE data parameter(s) over the
indicated time period or the indicated set of users or the indicated set of
locations is exposed to event consumers. _MINIMUM_ The minimum observed value
of the UE data parameter(s) over the indicated time period or the indicated
set of users or the indicated set of locations is exposed to event consumers.
_SUM_ The sum of the values of the UE data parameter(s) over the indicated
time period or the indicated set of users or the indicated set of locations is
exposed to event consumers.
## 6.4 Error handling
Guidelines regarding error handling of API invocation associated with the
_Ndcaf_DataReportingProvisioning_ service are defined in clause 5.3.3.
## 6.5 Mediation by NEF
In the event that the Provisioning AF and the Data Collection AF are located
in different trust domains, e.g., the former entity resides within the trusted
domain and the latter entity resides outside the trusted domain (as in clause
A.3 or A 4 of TS 26.531 [7]), the NEF shall be employed to mediate the
interactions between them, via the _Nnef_DataReporting‌Provisioning_ service
API specified in TS 29.522 [27].
# 7 Ndcaf_DataReporting service
## 7.1 General
This clause specifies the APIs used by clients of the Data Collection AF to
obtain a data collection and reporting configuration from, and then report
data to, the Data Collection AF.
## 7.2 Resources
### 7.2.1 Resource structure
Figure 7.2.1‑1 depicts the URL path model for the _Ndcaf_DataReporting_
service.
Figure 7.2.1‑1: URL path model of Ndcaf_DataReporting service API
Table 7.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 7.2.1-1: Resources and methods overview
Service name Operation name Resource name Resource path suffix HTTP method or
custom operation path suffix Description
* * *
_Ndcaf_DataReporting_ _CreateSession_ Data Reporting Sessions /sessions POST
Data collection client establishes a UE data reporting session with the Data
Collection AF, providing information about what UE data it can report, and is
provided with a configuration in response. _RetrieveSession_ Data Reporting
Session /sessions/_{sessionId}_ GET Retrieves a Data Reporting Session
resource from the Data Collection AF. _DestroySession_ DELETE Destroys a Data
Reporting Session resource. _Report_ /report (POST) Data collection client
reports data to the Data Collection AF via the established Data Reporting
Session.
### 7.2.2 Data Reporting Sessions resource collection
#### 7.2.2.1 Description
The Data Reporting Sessions resource collection represents the set of all Data
Collection Sessions at a given Data Collection AF (service) instance. The
resource collection allows a data collection client to create a new Data
Reporting Session resource at, and to receive configuration details for that
session from, the Data Collection AF.
#### 7.2.2.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-reporting/{apiVersion}/sessions**
This resource shall support the resource URL variables defined in table
7.2.2.2-1.
Table 7.2.2.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2 _apiVersion_ _string_ See clause 5.2.
#### 7.2.2.3 Resource standard methods
##### 7.2.2.3.1 Ndcaf_DataReporting_CreateSession operation using POST method
This service operation shall support the URL query parameters specified in
table 7.2.2.3.1-1.
Table 7.2.2.3.1-1: URL query parameters supported by the POST method on this
resource
Parameter Data type P Cardinality Description
* * *
This service operation shall support the request data structures specified in
table 7.2.2.3.1-2 and the response data structures and response codes
specified in table 7.2.2.3.1-4.
Table 7.2.2.3.1-2: Data structures supported by the POST request body on this
resource
Data type P Cardinality Description
* * *
_DataReportingSession_ M 1 Data supplied by the data collection client to
enable creation of a new Data Reporting Session at the Data Collection AF.
Table 7.2.2.3.1-3: Headers supported for POST requests on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP request | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Authorization | _string_ | M | 1 | For | | | | | | authentication | | | | | | of the data | | | | | | collection | | | | | | client. | | | | | | (NOTE 1) | +-----------------+-----------+---+-------------+-----------------+ | Origin | _string_ | O | 0..1 | Indicates the | | | | | | origin of the | | | | | | requester. | | | | | | (NOTE 2) | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: If | | | | | | OAuth 2.0 | | | | | | authorization | | | | | | is used the | | | | | | value is | | | | | | _Bearer_ | | | | | | followed by a | | | | | | string | | | | | | representing | | | | | | the access | | | | | | token, see | | | | | | section 2.1 of | | | | | | RFC 6750 [8]. | | | | | | | | | | | | NOTE 2: The | | | | | | Origin header | | | | | | is always | | | | | | supplied if the | | | | | | data collection | | | | | | client is | | | | | | deployed in a | | | | | | web browser. | | | | | +-----------------+-----------+---+-------------+-----------------+
Table 7.2.2.3.1-4: Data structures supported by the POST response body on this
resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+=============+===============+ | _DataRepo | M | 1 | 201 Created | The creation | | rtingSession_ | | | | of a Data | | | | | | Reporting | | | | | | Session is | | | | | | confirmed and | | | | | | configuration | | | | | | data for the | | | | | | data | | | | | | collection | | | | | | client for | | | | | | the session | | | | | | is provided | | | | | | by the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 7.2.2.3.1-5: Headers supported by the _201_ (_Created_) response code on
this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | The URL of the | | | | | | newly created | | | | | | resource at the | | | | | | Data Collection | | | | | | AF. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
NOTE: Standard HTTP redirection using a 3xx response code with the Location
header as well as Alt-Svc are allowed.
### 7.2.3 Data Reporting Session resource
#### 7.2.3.1 Description
The Data Reporting Session resource represents a single session within the
collection of Data Reporting Sessions at a given Data Collection AF.
#### 7.2.3.2 Resource definition
Resource URL: **{apiRoot}/3gpp-ndcaf_data-
reporting/{apiVersion}/sessions/{sessionId}**
This resource shall support the resource URI variables defined in table
7.2.3.2-1.
Table 7.2.3.2-1: Resource URL variables for this resource
Name Data type Definition
* * *
_apiRoot_ _string_ See clause 5.2 _apiVersion_ _string_ See clause 5.2.
_sessionId_ _string_ Identifies a Data Reporting Session at the Data
Collection AF.
#### 7.2.3.3 Resource standard methods
##### 7.2.3.3.1 Ndcaf_DataReporting_RetrieveSession operation using GET method
This service operation shall support the URL query parameters specified in
table 7.2.3.3.1-1 and the request headers specified in table 7.2.3.3.1-2.
Table 7.2.3.3.1-1: URL query parameters supported by the GET method on this
resource
Name Data type P Cardinality Description
* * *
Table 7.2.3.3.1-2: Headers supported for GET requests on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP | Data type | P | Cardinality | Description | | request header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Authorization | _string_ | M | 1 | For | | | | | | authentication | | | | | | of the data | | | | | | collection | | | | | | client. NOTE1 | +-----------------+-----------+---+-------------+-----------------+ | Origin | _string_ | O | 0..1 | Indicates the | | | | | | origin of the | | | | | | requester. | | | | | | NOTE2 | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: If | | | | | | OAuth 2.0 | | | | | | authorization | | | | | | is used, the | | | | | | value is | | | | | | _Bearer_ | | | | | | followed by a | | | | | | string | | | | | | representing | | | | | | the access | | | | | | token, see | | | | | | section 2.1 of | | | | | | RFC 6750 [8]. | | | | | | | | | | | | NOTE 2: The | | | | | | Origin header | | | | | | is always | | | | | | supplied if the | | | | | | data collection | | | | | | client is | | | | | | deployed in a | | | | | | Web Browser. | | | | | +-----------------+-----------+---+-------------+-----------------+
This service operation shall support the response data structures and response
codes specified in table 7.2.3.3.1-3.
Table 7.2.3.3.1-3: Data structures supported by the GET response body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | _DataRepo | M | 1 | 200 OK | The requested | | rtingSession_ | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | resource is | | | | | | returned to | | | | | | the | | | | | | Provisioning | | | | | | AF by the | | | | | | Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Session | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" | | | | | | (Extended | | | | | | Support of | | | | | | HTTP 307/308 | | | | | | redirection | | | | | | as defined in | | | | | | TS 29.502 | | | | | | [11]) is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during a Data | | | | | | Reporting | | | | | | Session | | | | | | retrieval | | | | | | procedure. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | This Data | | oblemDetails_ | | | | Reporting | | | | | | Session | | | | | | resource does | | | | | | not exist. | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method as | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 7.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 7.2.3.3.1-4: Headers supported by the 200 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 7.2.3.3.1-5: Headers supported by the 307 and 308 response codes on this
resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_ | +-----------------+-----------+---+-------------+-----------------+
##### 7.2.3.3.2 Ndcaf_DataReporting_UpdateSession operation using PUT method
The update operation is not permitted on the Data Reporting Session resource.
##### 7.2.3.3.3 Ndcaf_DataReporting_DestroySession operation using DELETE
method
This service operation shall support the URL query parameters specified in
table 7.2.3.3.3-1.
Table 7.2.3.3.3-1: URL query parameters supported by the DELETE method on this
resource
Name Data type P Cardinality Description
* * *
This service operation shall support the request data structures and headers
as specified in tables 7.2.3.3.3-2 and 7.2.3.3.3-3, respectively. Furthermore,
this service operation shall support the response data structures as specified
in table 7.2.3.3.3-4, and the different response codes as specified in tables
7.2.3.3.3-5 and 7.2.3.3.3-6, respectively.
Table 7.2.3.3.3-2: Data structures supported by the DELETE request body on
this resource
Data type P Cardinality Description
* * *
Table 7.2.3.3.3-3: Headers supported for DELETE requests on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP | Data type | P | Cardinality | Description | | request header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Authorization | _string_ | M | 1 | For | | | | | | authentication | | | | | | of the data | | | | | | collection | | | | | | client. | | | | | | (NOTE 1) | +-----------------+-----------+---+-------------+-----------------+ | Origin | _string_ | O | 0..1 | Indicates the | | | | | | origin of the | | | | | | requester. | | | | | | (NOTE 2) | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: If | | | | | | OAuth 2.0 | | | | | | authorization | | | | | | is used the | | | | | | value is | | | | | | _Bearer_ | | | | | | followed by a | | | | | | string | | | | | | representing | | | | | | the access | | | | | | token, see | | | | | | section 2.1 of | | | | | | RFC 6750 [8]. | | | | | | | | | | | | NOTE 2: The | | | | | | Origin header | | | | | | is always | | | | | | supplied if the | | | | | | data collection | | | | | | client is | | | | | | deployed in a | | | | | | web browser. | | | | | +-----------------+-----------+---+-------------+-----------------+
Table 7.2.3.3.3-4: Data structures supported by the DELETE response body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | resource | | | | | | matching the | | | | | | sessionId was | | | | | | destroyed at | | | | | | the Data | | | | | | Collection | | | | | | AF. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 307 Temporary | Temporary | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Session | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" as | | | | | | defined in TS | | | | | | 29.502 [11] | | | | | | is supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 308 Permanent | Permanent | | oblemDetails_ | | | Redirect | redirection | | | | | | during Data | | | | | | Reporting | | | | | | Session | | | | | | destruction. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | _Pr | O | 0..1 | 404 Not Found | The Data | | oblemDetails_ | | | | Reporting | | | | | | Session | | | | | | resource does | | | | | | not exist. | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 7.4. | | | | | +---------------+---+-------------+---------------+---------------+
Table 7.2.3.3.3-5: Headers supported by the 204 response code on this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE._ | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
Table 7.2.2.3.3.3-6 Headers supported by the 307 and 308 response codes on
this resource
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Location | _string_ | M | 1 | An alternative | | | | | | URL of the | | | | | | resource | | | | | | located in | | | | | | another Data | | | | | | Collection AF | | | | | | (service) | | | | | | instance. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | _string_ | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS | | | | | | [10].Supplied | | | | | | if the request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _POST_ , _PUT_ , | | | | | | _DELETE_. | +-----------------+-----------+---+-------------+-----------------+ | Access-Control | _string_ | O | 0..1 | Part of | | -Expose-Headers | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Valid values: | | | | | | _Location_. | +-----------------+-----------+---+-------------+-----------------+
#### 7.2.3.4 Resource custom operations
##### 7.2.3.4.1 Ndcaf_DataReporting_Report operation using POST method
This operation shall support the URI query parameters specified in table
7.2.3.4.1-1.
Table 7.2.3.4.1-1: URI query parameters supported by the POST method on this
resource
Parameter Data type P Cardinality Description
* * *
This operation shall support the request data structures specified in table
7.2.3.4.1-2 and the request headers specified in table 7.2.3.4.1‑3.
Table 7.2.3.4.1-2: Data structures supported by the POST request body
Data type P Cardinality Description
* * *
_DataReport_ M 1 UE data reported by the data collection client.
Table 7.2.3.4.1-3: Headers supported for POST requests
+-----------------+-----------+---+-------------+-----------------+ | HTTP | Data type | P | Cardinality | Description | | request header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Authorization | _string_ | M | 1 | For | | | | | | authentication | | | | | | of the data | | | | | | collection | | | | | | client. | | | | | | (NOTE 1) | +-----------------+-----------+---+-------------+-----------------+ | Origin | _string_ | O | 0..1 | Indicates the | | | | | | origin of the | | | | | | requester. | | | | | | (NOTE 2) | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: If | | | | | | OAuth 2.0 | | | | | | authorization | | | | | | is used the | | | | | | value is | | | | | | _Bearer_ | | | | | | followed by a | | | | | | string | | | | | | representing | | | | | | the access | | | | | | token, see | | | | | | section 2.1 of | | | | | | RFC 6750 [8]. | | | | | | | | | | | | NOTE 2: The | | | | | | Origin header | | | | | | is always | | | | | | supplied if the | | | | | | data collection | | | | | | client is | | | | | | deployed in a | | | | | | web browser. | | | | | +-----------------+-----------+---+-------------+-----------------+
This operation shall support the response data structures and response codes
specified in table 7.2.3.4.1-4 and the response headers specified in table
7.2.3.4.1‑5.
Table 7.2.3.4.1-4: Data structures supported by the POST response body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | _DataRepo | O | 0..1 | 200 OK | The report | | rtingSession_ | | | | was accepted | | | | | | by the Data | | | | | | Collection | | | | | | AF. | | | | | | | | | | | | A data | | | | | | collection | | | | | | client | | | | | | configuration | | | | | | (updated or | | | | | | unchanged) is | | | | | | provided in | | | | | | the response. | +---------------+---+-------------+---------------+---------------+ | _n/a_ | | | 204 No | The report | | | | | Content | was accepted | | | | | | by the Data | | | | | | Collection AF | | | | | | and no | | | | | | content is | | | | | | returned in | | | | | | the response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | TS | | | | | | 29.500 [9] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 7.2.3.4.1-5: Headers supported by the 200 response code
+-----------------+-----------+---+-------------+-----------------+ | HTTP response | Data type | P | Cardinality | Description | | header | | | | | +-----------------+-----------+---+-------------+-----------------+ | Access-Contr | _string_ | O | 0..1 | Part of | | ol-Allow-Origin | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | +-----------------+-----------+---+-------------+-----------------+ | Access-Contro | _string_ | O | 0..1 | Part of | | l-Allow-Methods | | | | CORS [10]. | | | | | | Supplied if the | | | | | | request | | | | | | included the | | | | | | Origin header. | | | | | | | | | | | | Value: POST | +-----------------+-----------+---+-------------+-----------------+
NOTE: Standard HTTP redirection (using a 3xx response with a Location response
header) as well as Alt-Svc are allowed for this method.
## 7.3 Data model
### 7.3.1 General
Table 7.3.1-1 specifies the data types used by the _Ndcaf_DataReporting_
service operations.
Table 7.3.1-1: Data types used by Ndcaf_DataReporting service operations
Data type Clause defined Description
* * *
_DataReportingSession_ 7.3.2.1 Configuration exposed by the Data Collection AF
to a data collection client, specifying the UE data to be reported.
_DataReport_ 7.3.2.3 A set of UE data reported by the data collection client
to the Data Collection AF.
Table 7.3.1-2 specifies data types re-used from other specifications by the
_Ndcaf_DataReporting_ service operations, including a reference to their
respective specifications.
Table 7.3.1-2: Externally defined data types used by Ndcaf_DataReporting
service operations
Data type Comments Reference
* * *
_ApplicationId_ Identifies the reporting application. TS 29.571 [12]
_DateTime_ A point in time, expressed as an ISO 8601 [25] date and time.  
_DurationSec_ A period of time, expressed in seconds.  
_Double_  
_Float_  
_Int32_  
_Int64_  
_Uint16_  
_Uint32_  
_Uint64_  
_Uinteger_
### 7.3.2 Structured data types
#### 7.3.2.1 DataReportingSession resource type
Table 7.3.2.1-1: Definition of DataReportingSession resource type
+-------------+-------------+-------------+-------------+-------------+ | Property | Data type | Cardinality | Usage | Description | | name | | | | | +=============+=============+=============+=============+=============+ | _sessionId_ | _string_ | 0..1 | C: ---\ | Unique | | | | | R: RO | identifier | | | | | | for this | | | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | assigned by | | | | | | the Data | | | | | | Collection | | | | | | AF. | +-------------+-------------+-------------+-------------+-------------+ | * | _DateTime_ | 0..1 | C: ---\ | The time | | validUntil _| | | R: RO | when the | | | | | | information | | | | | | in this | | | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | expires. | | | | | | | | | | | | The data | | | | | | collection | | | | | | client, if | | | | | | still | | | | | | active, | | | | | | should | | | | | | request an | | | | | | up-to-date | | | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | before this | | | | | | time. | +-------------+-------------+-------------+-------------+-------------+ | * |_ App | 1 | C: RW\ | The | | externalApp | licationID _| | R: RO | external | | licationId_ | | | | application | | | | | | identifier, | | | | | | nominated | | | | | | by the data | | | | | | collection | | | | | | client, to | | | | | | which this | | | | | | Data | | | | | | Reporting | | | | | | Session | | | | | | pertains. | +-------------+-------------+-------------+-------------+-------------+ | _suppor |_ array(D | 1 | C: RW\ | Set of | | tedDomains _| ataDomain)_ | | R: RO | domains for | | | | | | which the | | | | | | data | | | | | | collection | | | | | | client | | | | | | declares | | | | | | that it is | | | | | | able to | | | | | | report UE | | | | | | data. (See | | | | | | claus | | | | | | e 7.3.3.1). | | | | | | | | | | | | An empty | | | | | | array | | | | | | indicates | | | | | | that no UE | | | | | | data can | | | | | | currently | | | | | | be | | | | | | reported. | +-------------+-------------+-------------+-------------+-------------+ | _sam |_ map | **0..1** | **C:** \---\ | A map | | plingRules _| (DataDomain | | R: RO | specifying | | | - >_ | | | for each | | | | | | reporting | | | _array | | | domain | | | (Data‌Sampl | | | listed a | | | ing‌Rule))_ | | | set of | | | | | | rules for | | | | | | sampling UE | | | | | | data (see | | | | | | claus | | | | | | e 6.3.3.3). | | | | | | | | | | | | The indices | | | | | | of the map | | | | | | shall be a | | | | | | subset of | | | | | | the | | | | | | reporting | | | | | | domains | | | | | | declared by | | | | | | the data | | | | | | collection | | | | | | client in | | | | | | _support | | | | | | edDomains_. | | | | | | | | | | | | If the | | | | | | array for a | | | | | | particular | | | | | | index in | | | | | | the map is | | | | | | empty, UE | | | | | | data | | | | | | collection | | | | | | shall be | | | | | | disabled | | | | | | for the | | | | | | indicated | | | | | | domain. | +-------------+-------------+-------------+-------------+-------------+ | _reporting |_ map | 1..1 | C: ---\ | A map | | Conditions _| (DataDomain | | R: RO | specifying | | | - >_ | | | for each | | | | | | reporting | | | _array( | | | domain | | | Reporting‌C | | | listed the | | | ondition))_ | | | set of | | | | | | conditions | | | | | | (see | | | | | | clau | | | | | | se 7.3.2.2) | | | | | | under which | | | | | | the data | | | | | | collection | | | | | | client | | | | | | reports UE | | | | | | data. | | | | | | | | | | | | The indices | | | | | | of the map | | | | | | shall be a | | | | | | subset of | | | | | | the | | | | | | reporting | | | | | | domains | | | | | | declared by | | | | | | the data | | | | | | collection | | | | | | client in | | | | | | _support | | | | | | edDomains_. | | | | | | | | | | | | If the | | | | | | array for a | | | | | | particular | | | | | | index in | | | | | | the map is | | | | | | empty, UE | | | | | | data | | | | | | reporting | | | | | | shall be | | | | | | disabled | | | | | | for the | | | | | | indicated | | | | | | domain. | +-------------+-------------+-------------+-------------+-------------+ | _repo |_ map | **0..1** | **C:** \---\ | A map | | rtingRules _| (DataDomain | | R: RO | specifying | | | - >_ | | | for each | | | | | | reporting | | | _array | | | domain | | | (Data‌Repor | | | listed a | | | ting‌Rule)_ | | | set of | | | | | | rules for | | | | | | reporting | | | | | | collected | | | | | | UE data | | | | | | (see | | | | | | claus | | | | | | e 6.3.3.4). | | | | | | | | | | | | The indices | | | | | | of the map | | | | | | shall be a | | | | | | subset of | | | | | | the | | | | | | reporting | | | | | | domains | | | | | | declared by | | | | | | the data | | | | | | collection | | | | | | client in | | | | | | _support | | | | | | edDomains_. | | | | | | | | | | | | If the | | | | | | array for a | | | | | | particular | | | | | | index in | | | | | | the map is | | | | | | empty, UE | | | | | | data | | | | | | reporting | | | | | | shall be | | | | | | disabled | | | | | | for the | | | | | | indicated | | | | | | domain. | +-------------+-------------+-------------+-------------+-------------+
#### 7.3.2.2 ReportingCondition type
Table 7.3.2.2-1: Definition of ReportingCondition type
+---------------+---------------+---+-------------+---------------+ | Property name | Data type | P | Cardinality | Description | +===============+===============+===+=============+===============+ | _type_ | _ReportingC | M | 1 | Type of | | | onditionType_ | | | reporting | | | | | | condition | | | | | | (see clause | | | | | | 7.3.3.2). | +---------------+---------------+---+-------------+---------------+ | _period_ | _DurationSec_ | C | 0..1 | The time | | | | | | period | | | | | | between UE | | | | | | data reports. | | | | | | | | | | | | Only present | | | | | | when type is | | | | | | _INTERVAL_. | +---------------+---------------+---+-------------+---------------+ | _parameter_ | _string_ | C | 0..1 | Identifies | | | | | | the parameter | | | | | | that triggers | | | | | | a UE data | | | | | | report when | | | | | | it crosses | | | | | | the value | | | | | | _threshold_. | | | | | | | | | | | | Only present | | | | | | when _type_ | | | | | | is | | | | | | _THRESHOLD_. | +---------------+---------------+---+-------------+---------------+ | _threshold_ | _Double, | C | 0..1 | The value | | | Float, Int32, | | | that | | | Int64, | | |_ parameter _| | | Uint16, | | | must cross to | | | Uint32, | | | trigger a UE | | | Uint64_ , or | | | data report. | | | _Uinteger_ | | | | | | | | | Only present | | | | | | when _type_ | | | | | | is | | | | | | _THRESHOLD_. | +---------------+---------------+---+-------------+---------------+ | _rep |_ boolean _| C | 0..1 | The direction | | ortWhenBelow_ | | | | in which the | | | | | | threshold | | | | | | must be | | | | | | crossed to | | | | | | trigger a UE | | | | | | data report. | | | | | | | | | | | | If _true_ , a | | | | | | report is | | | | | | triggered | | | | | | when the | | | | | | value of | | | | | | _parameter_ | | | | | | drops below | | | | | | _threshold_. | | | | | | | | | | | | If _false_ , a | | | | | | report is | | | | | | triggered | | | | | | when the | | | | | | value of | | | | | | _parameter_ | | | | | | exceeds | | | | | | _threshold_. | | | | | | | | | | | | Only present | | | | | | when _type_ | | | | | | is | | | | | | _THRESHOLD_. | +---------------+---------------+---+-------------+---------------+ | * | _Reporting | C | 0..1 | The type of | | eventTrigger_ | EventTrigger _| | | event that | | | | | | triggers a UE | | | | | | data report | | | | | | (see | | | | | | claus | | | | | | e 7.2.3.3.3). | | | | | | | | | | | | Only present | | | | | | when_ type _| | | | | | is_ EVENT*. | +---------------+---------------+---+-------------+---------------+
#### 7.3.2.3 DataReport type
Table 7.3.2.3-1: Definition of DataReport type
Property name Data type Cardinality Description
* * *
_externalApplicationId_ _ApplicationID_ 1 External application identifier.
_serviceExperienceRecords_ _array(ServiceExperienceRecord)_ 0..1 (see NOTE)
See clause A.2. _locationRecords_ _array(LocationRecord)_ See clause A.3.
_communicationRecords_ _array(CommunicationRecord)_ See clause A.4.
_performanceDataRecords_ _array(PerformanceDataRecord)_ See clause A.5.
_applicationSpecificRecords_ _array(ApplicationSpecificRecord)_ See clause
A.6. _tripPlanRecords_ _array(TripPlanRecord)_ See clause A.7.
_mediaStreaming‌Access‌Records_ _array(MediaStreaming‌AccessRecord)_ See TS
26.512 [13] clause 17.2. NOTE: Exactly one of these properties must be present
in a _DataReport_.
### 7.3.3 Simple data types and enumerations
#### 7.3.3.1 DataDomain enumeration
Table 7.2.3.3.1-1: DataDomain enumeration
* * *
Enumeration value Description Applicability\ (refer to Table 7.3.3.2.1-1)
* * *
_SERVICE_EXPERIENCE_ Service Experience data. _serviceExperienceRecords_
_LOCATION_ Location data. _locationRecords_
_COMMUNICATION_ Communication data. _communicationRecords_
_PERFORMANCE_ Performance data. _performanceDataRecords_
_APPLICATION_SPECIFIC_ Combination of QoE metrics and application service-
specific data. _applicationSpecificRecords_
_MS_ACCESS_ACTIVITY_ 5GMS access activity data. _mediaStreamingAccessRecords_
_PLANNED_TRIPS_ Data related to planned trips. _tripPlanRecords_
* * *
#### 7.3.3.2 ReportingConditionType enumeration
Table 7.3.3.2-1: ReportingConditionType enumeration
Enumeration value Description
* * *
_INTERVAL_ Report at a regular interval. _THRESHOLD_ Report when a threshold
is passed. _EVENT_ Report on event.
#### 7.3.3.3 ReportingEventTrigger enumeration
This enumeration lists the possible events (_EVENT_ in table 7.3.3.2-1) that
can be used to trigger a data report.
Table 7.3.3.3-1: Event enumeration
Enumeration value Description
* * *
_LOCATION_ A new location has been entered (refer to clause A.3).
_DESTINATION_ A new destination has been recorded (refer to clause A.7).
## 7.4 Error handling
Guidelines regarding error handling of API invocation associated with the
_Ndcaf_DataReporting_ service are defined in clause 5.3.3.
## 7.5 Mediation by NEF
NEF mediation of data collection client access to the data collection and
reporting configuration API exposed by the Data Collection AF is applicable
strictly to the Indirect Data Collection Client and the AS.
  * In the event that the Indirect Data Collection Client and the Data Collection AF are located in different trust domains, e.g., the former entity resides within the trusted domain and the latter entity resides outside the trusted domain (as in clause A.3 or A 4 of TS 26.531 [7]), the NEF shall be employed to mediate the interactions between them, via the _Nnef_DataReporting_ service API specified in TS 29.522 [27].
  * In the event that the AS and the Data Collection AF are located in different trust domains, e.g., the former entity resides within the trusted domain and the latter entity resides outside the trusted domain (as in clause A.4 of TS 26.531 [7]), the NEF shall be employed to mediate the interactions between them, via the _Nnef_Data‌Reporting_ service API specified in TS 29.522 [27].
# 8 UE Data Collection, Reporting and Notification API
## 8.1 Overview
This clause specifies the UE Data Collection, Reporting and Notification API
used by internal UE entities, namely a UE Application and the associated
Direct Data Collection Client, in support of UE data collection by the Direct
Data Collection Client for subsequent reporting to the Data Collection AF, and
related exchange of notifications.
As noted in clause 4.3 of TS 26.531 [7] this API is not used when the Direct
Data Collection Client is embedded in the UE Application (i.e., Collaboration
E according to clause A.6 of [7]). However, this clause can serve as guidance
to the design of the internal APIs for a UE Application with an embedded
Direct Data Collection Client.
The UE architecture depicting the overall interactions between the UE
Application and the Direct Data Collection Client is shown in figure 8.1-1.
**Figure 8.1‑1: UE architecture for data collection, reporting and
notification via R7 API**
## 8.2 Direct Data Collection Client state model
### 8.2.1 Overview
Figure 8.2.1-1 represents an informative Direct Data Collection Client state
model in order to properly describe the methods invoked on the R7 API. Five
different states as indicated in the diagram are described in table 8.2.1-1.
Figure 8.2.1-1: State model diagram
The depicted Direct Data Collection Client is dedicated to a corresponding UE
Application and would correspond to a context-specific instance in the case
where a single logical Direct Data Collection Client supports multiple UE
Applications in the UE. The state model does not imply any implementation
requirements for an instance of the Direct Data Collection Client, but rather
is intended for use as a model to support the description of the R7 API.
State changes may occur as result of:
\- Registration or deregistration of the UE Application at the Direct Data
Collection Client.
\- Data collection and reporting configuration request by the UE Application.
\- Data report received by the Direct Data Collection Client.
\- Notification received by the Direct Data Collection Client (e.g., of a busy
condition at, or impending failure/crash of, the UE Application).
\- Timeout at the Direct Data Collection Client due to inactivity or prolonged
busy state of the UE Application.
Table 8.2.1-1 defines the states of the Direct Data Collection Client.
Table 8.2.1-1: States of Direct Data Collection Client
State Definition
* * *
_IDLE_ The Direct Data Collection Client has not yet registered a UE
Application, or a previous registration has been revoked due to explicit
deregistration request from that UE Application, or upon receiving
notification of an impending fatal error condition at the UE Application, or
upon local timer expiration due to inactivity or prolonged busy state of the
UE Application. _REGISTERED_ The Direct Data Collection Client has received
valid registration from a UE Application. Having obtained the UE data
collection and reporting configuration for that UE Application, it is now
ready to provide the UE data collection and reporting configuration to the UE
Application. _READY_ The Direct Data Collection Client has received a valid
request from and returns a UE data collection and reporting configuration to,
the registered UE Application. _ACTIVE_ The Direct Data Collection Client has
received a UE data report, or a notification from the registered UE
Application that the latter has recovered from a previously busy/stalled
condition and is ready to send UE data reports to the Data Collection AF.
_BUSY_ The Direct Data Collection Client enters this state upon having
received notification that its registered UE Application is in a temporarily
busy state and unable to perform UE data reporting.
### 8.2.2 Direct Data Collection Client internal operations
This aspect is for further study.
### 8.2.3 Starting and stopping the Direct Data Collection Client
The Direct Data Collection Client (instance) shall be started (i.e.,
transition from _IDLE_ to _REGISTERED_ state) upon receiving a valid
registration over R7 from a UE Application. Correspondingly, the Direct Data
Collection Client shall be stopped (transition to _IDLE_ state from one of
several possible operating states) due to occurrence of one of the
corresponding conditions as described in table 8.2.1-1.
## 8.3 Methods
### 8.3.1 Overview
Table 8.3.1-1 provides an overview of the methods and notifications defined
for the UE Data Collection, Reporting and Notification API at reference point
R7. Different types of method are indicated, namely:
1\. State change of the Direct Data Collection Client triggered by the UE
Application action (registration or deregistration).
2\. Request from the UE Application to the Direct Data Collection Client for a
UE data collection and reporting configuration.
3\. Acknowledgment and related response information returned by the Direct
Data Collection Client to the UE Application for a successful UE Application
registration event.
4\. Data report by the UE Application to the Direct Data Collection Client
according to the previously obtained configuration.
5\. Notification from the UE Application to the Direct Data Collection Client.
Table 8.3.1-1: Methods invoked by the UE Application on the Direction Data
Collection Client
+----------------------+----------------------+----------------------+ | Method name | Type | Description | +======================+======================+======================+ | _re | State change | UE Application | | gisterUeApplication_ | | registers with the | | | | Direct Data | | | | Collection Client, | | | | including a callback | | | | listener for | | | | receiving event | | | | notifications. | +----------------------+----------------------+----------------------+ | _dere | State change | UE Application | | gisterUeApplication_ | | deregisters with the | | | | Direct Data | | | | Collection Client. | +----------------------+----------------------+----------------------+ | _setUserConsent_ | | UE Application | | | | grants permission | | | | for the Direct Data | | | | Reporting Client to | | | | include the GPSI | | | | when creating Data | | | | Reporting Sessions. | +----------------------+----------------------+----------------------+ | _getD | Configuration | UE Application | | ataCollectionAnd‌Rep | request | obtains its UE data | | ortingConfiguration_ | | collection and | | | | reporting | | | | configuration from | | | | the Direct Data | | | | Collection Client. | +----------------------+----------------------+----------------------+ | _reportUeData_ | Data report | UE Application | | | | reports collected UE | | | | data to the Direct | | | | Data Collection | | | | Client according to | | | | its configuration. | +----------------------+----------------------+----------------------+ | _resetClient | | UE Application | | ReportingIdentifier_ | | requests that the | | | | Direct Data | | | | Collection Client | | | | generates a new | | | | opaque client | | | | reporting identifier | | | | for use in data | | | | reporting until | | | | further notice. | | | | | | | | This requires any | | | | existing Data | | | | Reporting Session to | | | | be destroyed and a | | | | new one (including | | | | the replacement | | | | client reporting | | | | identifier) to be | | | | created. | +----------------------+----------------------+----------------------+ | _uEApplicationBusy_ | Notification | UE Application | | | | notifies the Direct | | | | Data Collection | | | | Client that it is | | | | temporarily unable | | | | to perform UE data | | | | collection and | | | | reporting due to a | | | | busy or stalled | | | | condition. | +----------------------+----------------------+----------------------+ | _impendingUe | Notification | UE Application | | Application‌Failure_ | | notifies the Direct | | | | Data Collection | | | | Client of an | | | | impending fatal | | | | error condition that | | | | will cause abrupt | | | | shutdown of the UE | | | | Application. | +----------------------+----------------------+----------------------+
Table 8.3.1‑2 lists the different callback notifications from the Direct Data
Collection Client to the UE Application.
Table 8.3.1-2: Notifications from the Direct Data Collection Client to the UE
Application
Callback notification name Description
* * *
_dataCollectionAndReporting‌Configuration‌Changed_ Direct Data Collection
Client notifies the UE Application that the data collection and reporting
configuration has changed. _dataCollectionClientBusy_ Direct Data Collection
Client notifies the UE Application that it is temporarily unable to support UE
data collection and reporting due to a busy or stalled condition.
_impendingDataCollectionClient‌Failure_ Direct Data Collection Client notifies
the UE Application of an impending fatal error condition that will cause
abrupt shutdown of the Direct Data Collection Client.
# 9 Security and Access Control
Security and access control functionality associated with UE data collection,
reporting and exposure are described in other clauses of the present document,
namely:
1\. TLS-based authentication for HTTP/S operations associated with invocation
of UE data collection, reporting and event exposure APIs is specified in
clause 5.3.1.
2\. Cross-Origin Resource Sharing (CORS [10]) HTTP response headers pertaining
to access control.
3\. Authentication or authorization by the Data Collection AF of network
entities when invoking the UE data collection, reporting and event exposure
APIs specified in clauses 6 and 7 including:
a) Authentication of the Provisioning AF via use of the Authorization HTTP
request header.
b) Authorization of resource access requests using OAuth 2.0 [8] access
tokens.
c) Use of the _authorizationURL_ property of the _DataReportingConfiguration_
resource for authorizing subscription requests by consumer entities to event
exposure services.
4\. Provisioning AF specification of Data Access Profiles associated with the
Data Reporting Configuration resource, for controlling event exposure by the
Data Collection AF to different event consumer entities is specified in clause
4.2.3.3.2.
###### ## Annex A (normative): Data reporting data models
# A.1 Introduction
This annex describes the format of the data reports submitted to the Data
Collection AF, as required by TS 23.288 [4].
Table A.1-1 specifies data types re-used from other specifications, including
a reference to their respective specifications.
Table A.1-1: Externally defined data types used by Ndcaf_DataReporting_Report
operation
Data type Comments Reference
* * *
_BitRate_ 3GPP TS 29.571 [12] _PacketDelBudget_  
_PacketLossRate_  
_DateTime_  
_DurationSec_  
_SvcExperience_ 3GPP TS 29.517 [5] _AddrFqdn_  
_TimeWindow_ 3GPP TS 29.122 [14] _Volume_  
_FlowInfo_  
_LocationArea5G_  
_LocationData_ 3GPP TS 29.572 [15] _HorizontalSpeed_
# A.2 Service Experience reporting
## A.2.1 ServiceExperienceRecord type
Table A.2.1-1: Definition of ServiceExperienceRecord type
Property name Data type Cardinality Description
* * *
_timestamp_ _DateTime_ 1 Time stamp of this record. _serviceExperienceInfos_
_array(PerFlowServiceExperienceInfo)_ 1 See clause A.2.2.
## A.2.2 PerFlowServiceExperienceInfo type
Table A.2.2-1: Definition of PerFlowServiceExperienceInfo type
Property name Data type Cardinality Description
* * *
_serviceExperience_ _SvcExperience_ 1  
_timeInterval_ _TimeWindow_ 1  
_remoteEndpoint_ _array(AddrFqdn)_ 1 FQDN or IP Address of remote endpoint
(e.g., server).
# A.3 UE Location reporting
## A.3.1 LocationRecord type
Table A.3.1-1: Definition of type LocationRecord
Attribute name Data type Cardinality Description
* * *
_timestamp_ _DateTime_ 1 Time stamp of this record. _location_
_LocationData5G_ 1 Represents the UE location.
# A.4 Communication reporting
## A.4.1 CommunicationRecord type
Table A.4.1-1: Definition of type CommunicationRecord
+------------------+--------------+-------------+------------------+ | Attribute name | Data type | Cardinality | Description | +==================+==============+=============+==================+ | _timestamp_ | _DateTime_ | 1 | Time stamp of | | | | | this record. | +------------------+--------------+-------------+------------------+ | _timeInterval_ | _TimeWindow_ | 1 | The time period | | | | | over which the | | | | | data volume was | | | | | measured. | +------------------+--------------+-------------+------------------+ | _uplinkVolume_ | _Volume_ | 0..1 | Volume of uplink | | | | | data over the | | | | | measurement | | | | | period. | | | | | | | | | | (See NOTE.) | +------------------+--------------+-------------+------------------+ | _downlinkVolume_ | _Volume_ | 0..1 | Volume of uplink | | | | | data over the | | | | | measurement | | | | | period. | | | | | | | | | | (See NOTE.) | +------------------+--------------+-------------+------------------+ | NOTE: At least | | | | | one of | | | | | _uplinkVolume_ | | | | | and | | | | | _downlinkVolume_ | | | | | shall be | | | | | present. | | | | +------------------+--------------+-------------+------------------+
# A.5 Network performance Data reporting
## A.5.1 PerformanceDataRecord type
Table A.5.1-1: Definition of type PerformanceDataRecord
Attribute name Data type Cardinality Description
* * *
_timestamp_ _DateTime_ 1 Time stamp of this record. _timeInterval_
_TimeWindow_ 1 The time period over which network performance was measured.
_location_ _LocationArea5G_ 0..1 Represents the UE location. _remoteEndpoint_
_AddrFqdn_ 0..1 FQDN or IP Address of remote endpoint (e.g., server)
_packetDelayBudget_ _PacketDelayBudget_ 0..1 Indicates average Packet Delay.
_packetLossRate_ _PacketLossRate_ 0..1 Indicates average Packet Loss Rate.
_uplinkThroughput_ _BitRate_ 0..1 Indicates the average uplink throughput.
_downlinkThroughput_ _BitRate_ 0..1 Indicates the average downlink throughput.
# A.6 Application-specific reporting
## A.6.0 Introduction
Application-specific reporting is intended to allow reporting of any
application-specific data.
## A.6.1 ApplicationSpecificRecord type
Different services will have different data that are of interest (depending on
the service type). The _ApplicationSpecificRecord_ type is intended to enable
services to report data specific for the service or application.
Table A.6.1-1: Definition of ApplicationSpecificRecord type
Property name Data type Cardinality Description
* * *
_timestamp_ _DateTime_ 1 Time stamp of this record. _recordType_ _Uri_ 1 A
controlled term in form of a URI that uniquely identifies the type of record
that follows. _recordContainer_ _Object container or array container_ 1
Container with the actual application-specific data.
# A.7 Trip Plan reporting
## A.7.0 Introduction
Trip Plan(s) enable the Data Collection AF to identify collective behavior
amongst UEs. See tables 6.5.2‑4 and 6.5.2‑5 in 3GPP TS 23.288 [4].
## A.7.1 TripPlanRecord type
Table A.7.1-1: Definition of TripPlanRecord type
Property name Data type Cardinality Description
* * *
_timestamp_ _DateTime_ 1 Time stamp of this record. _startingPoint_
_LocationData_ 1 The starting point of the planned trip. _waypoints_
_array(LocationData)_ 0..1 The route of the planned trip. _destination_
_LocationData_ 1 The destination of the planned trip. _estimatedAverageSpeed_
_HorizontalSpeed_ 0..1 Estimated average speed of the planned trip.
_EstimatedArrivalTime_ _DateTime_ 0..1 Estimated time of arrival at the
destination of the planned trip.
###### ## Annex B (normative): OpenAPI representation of REST APIs for data
collection and reporting
# B.1 General
This annex is based on the OpenAPI 3.0.0 specification [16] and provides
corresponding representations of all APIs defined in the present document.
NOTE 1: An OpenAPIs representation embeds JSON Schema representations of HTTP
message bodies.
This annex shall take precedence when being discrepant to other parts of the
present document with respect to the encoding of information elements and
methods within the API(s).
NOTE 2: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
# B.2 Data types applicable to multiple services
For the purpose of referencing entities defined in this clause, it shall be
assumed that the OpenAPI definitions below are contained in a physical file
named \"TS26532_CommonData.yaml\".
+----------------------------------------------------------------------+ | openapi: 3.0.0 | | | | info: | | | | title: Data Collection and Reporting Common Data Types | | | | version: 1.0.1 | | | | description: \| | | | | Data Collection and Reporting Common Data Types | | | | © 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, | | TTA, TTC). | | | | All rights reserved. | | | | tags: | | | | - name: Data Collection and Reporting Common Data Types | | | | description: \'Data Collection and Reporting: Common Data Types\' | | | | externalDocs: | | | | description: \'TS 26.532 V17.2.0; Data Collection and Reporting; | | Protocols and Formats\' | | | | url: \'https://www.3gpp.org/ftp/Specs/archive/26_series/26.532/\' | | | | paths: {} | | | | components: | | | | schemas: | | | | ################################# | | | | # Clause 5.4.1: Simple data types | | | | ################################# | | | | ### | | ################################## | | | | # Clause 5.4.2: Structured data types | | | | ### | | ################################## | | | | DataSamplingRule: | | | | description: \"Instructions on how UE data is to be sampled by the | | data collection client.\" | | | | type: object | | | | properties: | | | | samplingPeriod: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\' | | | | locationFilter: | | | | \$ref: | | \'TS29122_CommonData.yaml#/components/schemas/LocationArea5G\' | | | | DataReportingRule: | | | | description: \"Instructions on how collected UE data is to be | | reported by the data collection client to the Data Collection AF.\" | | | | type: object | | | | properties: | | | | reportingProbability: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Percentage\' | | | | reportingFormat: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | dataPackagingStrategy: | | | | type: string | | | | required: | | | | - reportingFormat | | | | ### | | ################################## | | | | # Clause 5.4.3: Enumerated data types | | | | ### | | ################################## | | | | DataCollectionClientType: | | | | description: \"Indicating a type of data collection client that | | reports UE data to the Data Collection AF.\" | | | | anyOf: | | | | - type: string | | | | enum: [DIRECT, INDIRECT, APPLICATION_SERVER] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | +----------------------------------------------------------------------+
# B.3 Ndcaf_DataReportingProvisioning service API
For the purpose of referencing entities defined in this clause, it shall be
assumed that the OpenAPI definitions below are contained in a physical file
named \"TS26532_Ndcaf_DataReportingProvisioning.yaml\".
+----------------------------------------------------------------------+ | openapi: 3.0.0 | | | | info: | | | | title: Ndcaf_DataReportingProvisioning | | | | version: 1.2.0 | | | | description: \| | | | | Data Collection AF: Provisioning Sessions API | | | | © 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, | | TTA, TTC). | | | | All rights reserved. | | | | tags: | | | | - name: Ndcaf_DataReportingProvisioning | | | | description: \'Data Collection and Reporting: Application Service | | Provider Provisioning (R1) APIs\' | | | | externalDocs: | | | | description: \'TS 26.532 V17.2.0; Data Collection and Reporting; | | Protocols and Formats\' | | | | url: \'https://www.3gpp.org/ftp/Specs/archive/26_series/26.532/\' | | | | servers: | | | | - url: \'{apiRoot}/3gpp-ndcaf_data-reporting-provisioning/v1\' | | | | variables: | | | | apiRoot: | | | | default: https://example.com | | | | description: See 3GPP TS 29.532 clause 5.2. | | | | security: | | | | - {} | | | | - oAuth2ClientCredentials: [] | | | | paths: | | | | /sessions: | | | | post: | | | | operationId: CreateSession | | | | summary: \'Create a new Data Reporting Provisioning Session\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingProvisioningSession\' | | | | responses: | | | | \'201\': | | | | description: \'Data Reporting Provisioning Session successfully | | created\' | | | | headers: | | | | Location: | | | | description: \'URL including the resource identifier of the newly | | created Data Reporting Provisioning Session.\' | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingProvisioningSession\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | /sessions/{sessionId}: | | | | parameters: | | | | - name: sessionId | | | | in: path | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | description: \'The resource identifier of an existing Data Reporting | | Provisioning Session.\' | | | | get: | | | | operationId: RetrieveSession | | | | summary: \'Retrieve an existing Data Reporting Provisioning | | Session\' | | | | responses: | | | | \'200\': | | | | description: \'Representation of Data Reporting Provisioning Session | | is returned\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingProvisioningSession\' | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'406\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/406\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | delete: | | | | operationId: DestroySession | | | | summary: \'Destroy an existing Data Reporting Provisioning Session\' | | | | responses: | | | | \'204\': | | | | description: \'Data Reporting Provisioning Session resource | | successfully destroyed\' | | | | # No Content | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | /sessions/{sessionId}/configurations/{configurationId}: | | | | parameters: | | | | - name: sessionId | | | | in: path | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | description: \'The resource identifier of an existing Data Reporting | | Provisioning Session.\' | | | | - name: configurationId | | | | in: path | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | description: \'The resource identifier of an existing Data Reporting | | Configuration.\' | | | | post: | | | | operationId: CreateConfiguration | | | | summary: \'Create a new Data Reporting Configuration subresource | | within the scope of an existing Data Reporting Provisioning | | Session\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | responses: | | | | \'201\': | | | | description: \'Data Reporting Configuration successfully created\' | | | | headers: | | | | Location: | | | | description: \'URL including the resource identifier of the newly | | created Data Reporting Configuration.\' | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | get: | | | | operationId: RetrieveConfiguration | | | | summary: \'Retrieve an existing Data Reporting Configuration\' | | | | responses: | | | | \'200\': | | | | description: \'Representation of Data Reporting Configuration is | | returned\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'406\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/406\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | put: | | | | operationId: UpdateConfiguration | | | | summary: \'Replace an existing Data Reporting Configuration | | subresource\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | responses: | | | | \'200\': | | | | description: \'Data Reporting Configuration successfully replaced | | and updated resource representation is returned\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | \'204\': | | | | description: \'Data Reporting Configuration successfully replaced\' | | | | # No Content. | | | | \'307\': | | | | \$ref: \'TS29122_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29122_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | patch: | | | | operationId: ModifyConfiguration | | | | summary: \'Modify an existing Data Reporting Configuration | | subresource\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/merge-patch+json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfigurationPatch\' | | | | responses: | | | | \'200\': | | | | description: \'Data Reporting Configuration successfully replaced | | and updated resource representation is returned\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingConfiguration\' | | | | \'204\': | | | | description: \'Data Reporting Configuration successfully replaced\' | | | | # No Content. | | | | \'307\': | | | | \$ref: \'TS29122_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29122_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | delete: | | | | operationId: DestroyConfiguration | | | | summary: \'Destroy an existing Data Reporting Configuration\' | | | | responses: | | | | \'204\': | | | | description: \'Data Reporting Configuration resource successfully | | destroyed\' | | | | # No Content | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | components: | | | | securitySchemes: | | | | oAuth2ClientCredentials: | | | | type: oauth2 | | | | flows: | | | | clientCredentials: | | | | tokenUrl: \'{tokenUri}\' | | | | scopes: {} | | | | description: > | | | | For a trusted Provisioning AF, \'ndcaf-datareportingprovisioning\' | | shall be used | | | | as \'scopes\' and \'{nrfApiRoot}/oauth2/token\' shall be used as | | \'tokenUri\'. | | | | schemas: | | | | DataReportingProvisioningSession: | | | | description: \"A representation of a Data Reporting Provisioning | | Session.\" | | | | type: object | | | | properties: | | | | provisioningSessionId: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | aspId: | | | | \$ref: | | \' | | TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/AspId\' | | | | externalApplicationId: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\' | | | | internalApplicationId: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\' | | | | eventId: | | | | \$ref: | | \'TS29517_Naf_EventExposure.yaml#/components/schemas/AfEvent\' | | | | dataReportingConfigurationIds: | | | | type: array | | | | items: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | minItems: 0 | | | | required: | | | | - provisioningSessionId | | | | - aspId | | | | - externalApplicationId | | | | - eventId | | | | - dataReportingConfigurationIds | | | | DataReportingConfiguration: | | | | description: \"A Data Reporting Configuration subresource.\" | | | | type: object | | | | properties: | | | | dataReportingConfigurationId: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | dataCollectionClientType: | | | | \$ref: | | \'TS26 | | 532_CommonData.yaml#/components/schemas/DataCollectionClientType\' | | | | authorizationURL: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | dataSamplingRules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataSamplingRule\' | | | | minItems: 0 | | | | dataReportingRules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataReportingRule\' | | | | minItems: 0 | | | | dataAccessProfiles: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataAccessProfile\' | | | | minItems: 1 | | | | required: | | | | - dataReportingConfigurationId | | | | - dataCollectionClientType | | | | - dataAccessProfiles | | | | DataReportingConfigurationPatch: | | | | description: \"A JSON patch for a Data Reporting Configuration.\" | | | | type: object | | | | properties: | | | | authorizationURL: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | dataSamplingRules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataSamplingRule\' | | | | minItems: 0 | | | | dataReportingRules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataReportingRule\' | | | | minItems: 0 | | | | dataAccessProfiles: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataAccessProfile\' | | | | minItems: 1 | | | | DataAccessProfile: | | | | description: \"A data access profile.\" | | | | type: object | | | | properties: | | | | dataAccessProfileId: | | | | type: string | | | | targetEventConsumerTypes: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/EventConsumerType\' | | | | minItems: 0 | | | | uniqueItems: true | | | | parameters: | | | | type: array | | | | items: | | | | type: string | | | | minItems: 0 | | | | uniqueItems: true | | | | timeAccessRestrictions: | | | | type: object | | | | properties: | | | | duration: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\' | | | | aggregationFunctions: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataAggregationFunctionType\' | | | | minItems: 0 | | | | uniqueItems: true | | | | required: | | | | - duration | | | | - aggregationFunctions | | | | userAccessRestrictions: | | | | type: object | | | | properties: | | | | groupIds: | | | | type: array | | | | items: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\' | | | | minItems: 0 | | | | uniqueItems: true | | | | userIds: | | | | type: array | | | | items: | | | | anyOf: | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\' | | | | minItems: 0 | | | | uniqueItems: true | | | | aggregationFunctions: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataAggregationFunctionType\' | | | | minItems: 0 | | | | uniqueItems: true | | | | required: | | | | - groupIds | | | | - userIds | | | | - aggregationFunctions | | | | locationAccessRestrictions: | | | | type: object | | | | properties: | | | | locationAreas: | | | | type: array | | | | items: | | | | \$ref: | | \'TS29122_CommonData.yaml#/components/schemas/LocationArea5G\' | | | | minItems: 1 | | | | uniqueItems: true | | | | aggregationFunctions: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataAggregationFunctionType\' | | | | minItems: 0 | | | | uniqueItems: true | | | | required: | | | | - locationAreas | | | | - aggregationFunctions | | | | required: | | | | - dataAccessProfileId | | | | - targetEventConsumerTypes | | | | - parameters | | | | EventConsumerType: | | | | description: \"The type of event consumer.\" | | | | anyOf: | | | | - type: string | | | | enum: [NWDAF, EVENT_CONSUMER_AF, NEF] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | | | | DataAggregationFunctionType: | | | | description: \"The type of data aggregation function.\" | | | | anyOf: | | | | - type: string | | | | enum: [\"NULL\", COUNT, MEAN, MAXIMUM, MINIMUM, SUM] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | +----------------------------------------------------------------------+
# B.4 Ndcaf_DataReporting service API
For the purpose of referencing entities defined in this clause, it shall be
assumed that the OpenAPI definitions below are contained in a physical file
named \"TS26532_Ndcaf_DataReporting.yaml\".
+----------------------------------------------------------------------+ | openapi: 3.0.0 | | | | info: | | | | title: Ndcaf_DataReporting | | | | version: 1.2.0 | | | | description: \| | | | | Data Collection AF: Data Collection and Reporting Configuration API | | and Data Reporting API | | | | © 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, | | TTA, TTC). | | | | All rights reserved. | | | | tags: | | | | - name: Ndcaf_DataReporting | | | | description: \'Data Collection and Reporting: Client Configuration | | and Data Reporting (R2/R3/R4) APIs\' | | | | externalDocs: | | | | description: \'TS 26.532 V17.2.0; Data Collection and Reporting; | | Protocols and Formats\' | | | | url: \'https://www.3gpp.org/ftp/Specs/archive/26_series/26.532/\' | | | | servers: | | | | - url: \'{apiRoot}/3gpp-ndcaf_data-reporting/v1\' | | | | variables: | | | | apiRoot: | | | | default: https://example.com | | | | description: See 3GPP TS 29.532 clause 5.2. | | | | security: | | | | - {} | | | | - oAuth2ClientCredentials: [] | | | | paths: | | | | /sessions: | | | | post: | | | | operationId: CreateSession | | | | summary: \'Create a new Data Reporting Session\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingSession\' | | | | responses: | | | | \'201\': | | | | description: \'Data Reporting Session successfully created\' | | | | headers: | | | | Location: | | | | description: \'URL including the resource identifier of the newly | | created Data Reporting Session.\' | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingSession\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | /sessions/{sessionId}: | | | | parameters: | | | | - name: sessionId | | | | in: path | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | description: \'The resource identifier of an existing Data Reporting | | Session.\' | | | | get: | | | | operationId: RetrieveSession | | | | summary: \'Retrieve an existing Data Reporting Session\' | | | | responses: | | | | \'200\': | | | | description: \'Representation of Data Reporting Session is | | returned\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingSession\' | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'406\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/406\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | delete: | | | | operationId: DestroySession | | | | summary: \'Destroy an existing Data Reporting Session\' | | | | responses: | | | | \'204\': | | | | description: \'Data Reporting Session resource successfully | | destroyed\' | | | | # No Content | | | | \'307\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/307\' | | | | \'308\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/308\' | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | /sessions/{sessionId}/report: | | | | parameters: | | | | - name: sessionId | | | | in: path | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | description: \'The resource identifier of an existing Data Reporting | | Session.\' | | | | post: | | | | operationId: Report | | | | summary: \'Report UE data in the context of an existing Data | | Reporting Session\' | | | | requestBody: | | | | required: true | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReport\' | | | | responses: | | | | \'200\': | | | | description: \'Data Report accepted and updated Data Reporting | | Session is returned\' | | | | headers: | | | | Location: | | | | description: \'URL including the resource identifier of the returned | | Data Reporting Session.\' | | | | required: true | | | | schema: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/Url\' | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/DataReportingSession\' | | | | \'204\': | | | | description: \'Data Report accepted\' | | | | # No Content | | | | \'400\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/400\' | | | | \'401\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/401\' | | | | \'403\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/403\' | | | | \'404\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'411\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/411\' | | | | \'413\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/413\' | | | | \'415\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/415\' | | | | \'429\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/429\' | | | | \'500\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | components: | | | | securitySchemes: | | | | oAuth2ClientCredentials: | | | | type: oauth2 | | | | flows: | | | | clientCredentials: | | | | tokenUrl: \'{tokenUri}\' | | | | scopes: {} | | | | description: > | | | | For a trusted data collection client, \'ndcaf-datareporting\' shall | | be used | | | | as \'scopes\' and \'{nrfApiRoot}/oauth2/token\' shall be used as | | \'tokenUri\'. | | | | schemas: | | | | DataReportingSession: | | | | description: \"A representation of a Data Reporting Session.\" | | | | type: object | | | | properties: | | | | sessionId: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/ResourceId\' | | | | validUntil: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | externalApplicationId: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\' | | | | supportedDomains: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/DataDomain\' | | | | minItems: 0 | | | | samplingRules: | | | | type: array | | | | items: | | | | type: object | | | | required: | | | | - dataDomain | | | | - rules | | | | properties: | | | | dataDomain: | | | | \$ref: \'#/components/schemas/DataDomain\' | | | | rules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataSamplingRule\' | | | | minItems: 0 | | | | reportingConditions: | | | | type: array | | | | items: | | | | type: object | | | | required: | | | | - dataDomain | | | | - conditions | | | | properties: | | | | dataDomain: | | | | \$ref: \'#/components/schemas/DataDomain\' | | | | conditions: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ReportingCondition\' | | | | minItems: 0 | | | | reportingRules: | | | | type: array | | | | items: | | | | type: object | | | | required: | | | | - dataDomain | | | | - rules | | | | properties: | | | | dataDomain: | | | | \$ref: \'#/components/schemas/DataDomain\' | | | | rules: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26532_CommonData.yaml#/components/schemas/DataReportingRule\' | | | | minItems: 0 | | | | required: | | | | - externalApplicationId | | | | - supportedDomains | | | | - reportingConditions | | | | ReportingCondition: | | | | description: \"A condition that triggers data reporting by a data | | collection client to the Data Collection AF.\" | | | | type: object | | | | properties: | | | | type: | | | | \$ref: \'#/components/schemas/ReportingConditionType\' | | | | period: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\' | | | | parameter: | | | | type: string | | | | threshold: | | | | anyOf: | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Double\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Int32\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Int64\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint16\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint64\' | | | | - \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\' | | | | reportWhenBelow: | | | | type: boolean | | | | eventTrigger: | | | | \$ref: \'#/components/schemas/ReportingEventTrigger\' | | | | required: | | | | - type | | | | DataReport: | | | | description: \"A data report sent by a data collection client to the | | Data Collection AF.\" | | | | type: object | | | | properties: | | | | externalApplicationId: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\' | | | | serviceExperienceRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ServiceExperienceRecord\' | | | | minItems: 1 | | | | locationRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/LocationRecord\' | | | | minItems: 1 | | | | communicationRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/CommunicationRecord\' | | | | minItems: 1 | | | | performanceDataRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/PerformanceDataRecord\' | | | | minItems: 1 | | | | applicationSpecificRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ApplicationSpecificRecord\' | | | | minItems: 1 | | | | tripPlanRecords: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/TripPlanRecord\' | | | | minItems: 1 | | | | mediaStreamingAccessRecords: | | | | type: array | | | | items: | | | | \$ref: | | \'TS26512_R4_ | | DataReporting.yaml#/components/schemas/MediaStreamingAccessRecord\' | | | | minItems: 1 | | | | required: | | | | - externalApplicationId | | | | DataDomain: | | | | description: \"A data reporting domain.\" | | | | anyOf: | | | | - type: string | | | | enum: [SERVICE_EXPERIENCE, LOCATION, COMMUNICATION, PERFORMANCE, | | APPLICATION_SPECIFIC, MS_ACCESS_ACTIVITY, PLANNED_TRIPS] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | | | | ReportingConditionType: | | | | description: \"The type of condition that triggers reporting by a | | data collection client to the Data Collection AF.\" | | | | anyOf: | | | | - type: string | | | | enum: [INTERVAL, THRESHOLD, EVENT] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | | | | ReportingEventTrigger: | | | | description: \"The type of event that triggers reporting by a data | | collection client to the Data Collection AF.\" | | | | anyOf: | | | | - type: string | | | | enum: [LOCATION, DESTINATION] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | | | | BaseRecord: | | | | description: \"Abstract base data type for UE data reporting | | records.\" | | | | type: object | | | | properties: | | | | timestamp: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | required: | | | | - timestamp | | | | ServiceExperienceRecord: | | | | description: \"A data reporting record for UE service experience.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | serviceExperienceInfos: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/PerFlowServiceExperienceInfo\' | | | | required: | | | | - serviceExperienceInfos | | | | PerFlowServiceExperienceInfo: | | | | description: \"Information about the service experience of a single | | flow.\" | | | | type: object | | | | properties: | | | | serviceExperience: | | | | \$ref: | | \'T | | S29517_Naf_EventExposure.yaml#/components/schemas/SvcExperience\' | | | | timeInterval: | | | | \$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\' | | | | remoteEndpoint: | | | | \$ref: | | \'TS29517_Naf_EventExposure.yaml#/components/schemas/AddrFqdn\' | | | | required: | | | | - serviceExperience | | | | - timeInterval | | | | - remoteEndpoint | | | | LocationRecord: | | | | description: \"A data reporting record for UE location.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | location: | | | | \$ref: | | \'TS29572_Nlmf_Location.yaml#/components/schemas/LocationData\' | | | | required: | | | | - location | | | | CommunicationRecord: | | | | description: \"A data reporting record for UE communication.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | timeInterval: | | | | \$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\' | | | | uplinkVolume: | | | | \$ref: \'TS29122_CommonData.yaml#/components/schemas/Volume\' | | | | downlinkVolume: | | | | \$ref: \'TS29122_CommonData.yaml#/components/schemas/Volume\' | | | | required: | | | | - timeInterval | | | | PerformanceDataRecord: | | | | description: \"A data reporting record for UE performance.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | timeInterval: | | | | \$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\' | | | | location: | | | | \$ref: | | \'TS29122_CommonData.yaml#/components/schemas/LocationArea5G\' | | | | remoteEndpoint: | | | | \$ref: | | \'TS29517_Naf_EventExposure.yaml#/components/schemas/AddrFqdn\' | | | | packetDelayBudget: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/PacketDelBudget\' | | | | packetLossRate: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/PacketLossRate\' | | | | uplinkThroughput: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\' | | | | downlinkThrougput: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\' | | | | required: | | | | - timeInterval | | | | ApplicationSpecificRecord: | | | | description: \"A typed application-specific UE data reporting | | record.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | recordType: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | recordContainer: | | | | {} | | | | # (Syntax determined by recordType.) | | | | required: | | | | - recordType | | | | - recordContainer | | | | TripPlanRecord: | | | | description: \"A data reporting record for UE performance.\" | | | | allOf: | | | | - \$ref: \'#/components/schemas/BaseRecord\' | | | | - type: object | | | | properties: | | | | startingPoint: | | | | \$ref: | | \'TS29572_Nlmf_Location.yaml#/components/schemas/LocationData\' | | | | waypoints: | | | | type: array | | | | items: | | | | \$ref: | | \'TS29572_Nlmf_Location.yaml#/components/schemas/LocationData\' | | | | minItems: 1 | | | | destination: | | | | \$ref: | | \'TS29572_Nlmf_Location.yaml#/components/schemas/LocationData\' | | | | estimatedAverageSpeed: | | | | \$ref: | | \ | | 'TS29572_Nlmf_Location.yaml#/components/schemas/HorizontalSpeed\' | | | | estimatedArrivalTime: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | required: | | | | - startingPoint | | | | - destination | +----------------------------------------------------------------------+
#