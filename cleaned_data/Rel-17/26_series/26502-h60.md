# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document defines an architecture and high-level procedures for
User Services conveyed using the 5G multicast--broadcast capabilities of the
5G System defined in TS 23.501 [2], TS 23.502 [3] and TS 23.247 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[5] 3GPP TS 23.247: \"Architectural enhancements for 5G multicast-broadcast
services; Stage 2\".
[6] 3GPP TS 26.348: \"Northbound Application Programming Interface (API) for
Multimedia Broadcast/Multicast Service (MBMS) at the xMB reference point\".
[7] 3GPP TS 26.501: \"5G Media Streaming (5GMS); General description and
architecture\".
[8] IETF RFC 3550: \"RTP: A Transport Protocol for Real-Time Applications\".
[9] IETF RFC 2250: \"RTP Payload Format for MPEG1/MPEG2 Video\".
[10] 3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming
Service (PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP
(3GP-DASH)\".
[11] 3GPP TS 26.531: \"Data Collection and Reporting; General Description and
Architecture\".
[12] 3GPP TS 23.468: \"Group Communication System Enablers for LTE
(GCSE_LTE)\".
[13] Void.
[14] 3GPP TS 23.468: \"Group Communication System Enablers for LTE
(GCSE_LTE)\".
[15] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[16] OMA: \"OMNA BCAST Service Class Registry\",
https://technical.openmobilealliance.org/OMNA/bcast/bcast-service-class-
registry.html.
[17] IANA: \"Reliable Multicast Transport (RMT) FEC Encoding IDs and FEC
Instance IDs\", https://www.iana.org/assignments/rmt-fec-parameters/rmt-fec-
parameters.xhtml#rmt-fec-parameters-1.
[18] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[19] 3GPP TS 33.246: \"Security of Multimedia Broadcast/Multicast Service
(MBMS)\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1], TS 23.501 [2], TS 23.502 [3], TS 23.247 [5] and the following apply. A
term defined in the present document takes precedence over the definition of
the same term, if any, in 3GPP TR 21.905 [1].
**Application Service Entry Point:** a document (e.g. an MPEG-DASH Media
Presentation Description or root HTML page) describing, and used to initiate,
an application layer service that is delivered using an MBS User Service.
**Broadcast MBS session: an MBS session to deliver the broadcast communication
service** , as defined in TS 23.247 [4]**.**
**distribution method: a mechanism (comprising the Object Distribution Method
and Packet Distribution Method) used by the MBSTF to deliver data to the MBS
Client as part of a User Service.**
**MBS Application Data Session:** time, protocols and protocol state (i.e.
parameters) provided by the MBSTF Client to the MBS-Aware Application.
**MBS Distribution Session Announcement:** metadata entity consumed by the
MBSTF Client that is used to advertise the current or imminent availability of
an MBS Distribution Session in the MBS System that provides parameters needed
by the MBSTF Client to receive it.
**MBS Application Service** : an end-user service for which parts or all of
the data are accessible by activating the reception of an MBS User Service.
**MBS-Aware Application: a UE-based application that consumes User Services by
invoking with MBS Client APIs.**
**MBS Client: the UE function that consumes User Services defined in the
present document.**
**MBS Distribution Session:** time, protocols and protocol state (i.e.
parameters) which define sender and receiver configuration and which use an
MBS Session for the delivery of an MBS User Data Ingest Session.
**MBS Session:** a multicast session or a broadcast session, as defined in TS
23.247 [4].
**MBS User Service:** an abstract transport-level service configured by the
MBSF and using one or more MBS Distribution Sessions, possibly in combination
with unicast, for the purpose of supporting an MBS-Aware Application via a set
of APIs that allows the MBS Client to activate and deactivate reception of the
MBS Session.
**MBS User Data Ingest Session:** time, protocols and protocol state (i.e.
parameters) provided by an MBS Application Provider for distribution over an
MBS User Service, and provided to the MBS-Aware Application as an MBS
Application Data Session.
**MBS User Service Announcement: metadata entity consumed by the MBSF Client
composed of one or more MBS Distribution Session Announcements.**
**MBS User Service Announcement Channel:** MBS Distribution Session generated
by the MBSF to carousel MBS User Service Announcements to the MBS Client using
the Object Distribution Method.
**MBS User Service Control:**. control of an MBS User Service by an MBS-Aware
Application interacting with an MBSF Client.
**MBS User Service Provisioning** : provisioning of an MBS User Service in the
MBSF by an MBS Application Provider.
**MBS User Service Session:** an instance of an MBS User Service.
**Multicast MBS session:** an MBS session to deliver the multicast
communication service, as defined in TS 23.247 [4].
**Object Distribution Method:** the distribution method supporting real-time
and non-real-time distribution of discrete binary objects, including media
segments, to MBS Clients as part of an MBS Session.
**Packet Distribution Method:** the distribution method supporting transparent
delivery of Application Data Units to MBS Clients as part of an MBS Session.
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1], TS 23.501 [2], TS 23.502 [3], TS 23.247 [4] and the following
apply. An abbreviation defined in the present document takes precedence over
the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].
5QI 5G QoS Identifier
AL‑FEC Application Level FEC
DN Data Network
FEC Forward Erasure Correction
MBS Multicast--Broadcast Services
MB‑SMF Multicast--Broadcast Session Management Function
MB‑UPF Multicast--Broadcast User Plane Function
MBSF Multicast--Broadcast Service Function
MBSTF Multicast--Broadcast Service Transport Function
LTE Long Term Evolution
NEF Network Exposure Function
PCF Policy and Charging Function
PDU Protocol Data Unit
QoS Quality of Service
SDU Service Data Unit
UE User Equipment
# 4 Reference architecture for 5G Multicast--Broadcast User Services
## 4.1 General
This clause defines a reference architecture for 5G Multicast--Broadcast User
Services, including the logical functions involved and the logical reference
points between them.
Interworking with LTE is specified in clause 5.2 of TS 23.247 [5] and its use
in the context of MBS User Services is further specified in clauses 4.9 and
A.1 of the present document.
## 4.2 System description
### 4.2.1 Network architecture
Figure 4.2.1-1 depicts the MBS network architecture defined in clause 5.1 of
TS 23.247 [5] using the reference point representation.
Figure 4.2.1-1: Network architecture for MBS User Services delivery and
control
The functions and reference points involved in providing MBS User Services
within the MBS System are highlighted in green. In particular:
\- Reference point Nmb10 is used by the AF/AS to provision MBS User Services
in the MBSF by invoking the _Nmbsf_ service defined in clause 7.2.
\- Reference point Nmb2 is used by the MBSF to configure and control MBS User
Services distribution methods in the MBSTF by invoking the _Nmbstf_ service
defined in clause 7.3.
When the MBS User Service Announcement Channel is in use (see clause 4.2.4),
the MBSF may additionally push object manifests describing a set of User
Service Announcement objects into the MBSTF at this reference point.
\- Reference point Nmb8 is used by the MBSTF to ingest content from the AF/AS.
### 4.2.2 User Services network architecture
MBS User Services enable high-level applications to make use of the low-level
features of the MBS System. An MBS User Service is provided by the MBSF and
MBSTF working in combination to support configuration option 2 and
configuration option 3 defined in annex A of TS 23.247 [5]. In addition to the
Network Functions defined in [5]:
\- The _MBS AF_ provides unicast User Service Announcements to the MBSF Client
in the user plane and to the MBSTF.
\- The _MBS AS_ provides unicast services such as Object Repair to the MBSTF
Client.
\- The _MBSSF_ supports the User Plane security procedure according to clause
W.4.1.3 of TS 33.501 [18] and provides a user plane authentication service to
the MBSF Client.
Together, these functions enable a complete service offering to an end-user,
via a set of APIs that allows the MBS Client to activate or deactivate
reception of MBS User Services.
The MBS User Services architecture depicted in figure 4.2.2-1 shows the MBS-
related entities involved in providing MBS User Services delivery and control.
These are described in the following clauses. The MBS Application Provider
plays the role of the AF/AS.
Figure 4.2.2-1: MBS User Services network architecture
### 4.2.3 User Services Distribution methods
The distribution methods defined for use by MBS User Services in clause 6 of
the present document make use of MBS Sessions (see clause 4.1 of TS 23.247
[5]) to deliver MBS data packets to the MBS Client. The distribution methods
may use either a multicast MBS Session or a broadcast MBS Session. A set of
MBS distribution methods is provided by the MBSTF. These provide functionality
such as security and key distribution, reliability control (by means of FEC
techniques) and associated delivery procedures.
**\- Object Distribution Method:** A distribution method that delivers
discrete binary objects over an MBS Session. This may be used to support real-
time distribution of media segments (as special objects) including Low-Latency
CMAF segments.
The use of MBS Sessions by the Object Distribution Method is specified in
clause 6.1.
**\- Packet Distribution Method:** A distribution method that supports
streaming of packetized media data over an MBS Session where Service Data
Units (SDUs) are conveyed to the UE as part of Protocol Data Units (PDUs) or
IP flows. Examples of upper layer SDUs are generic IP/UDP datagrams.
The use of MBS Sessions by the Packet Distribution Method is specified in
clause 6.2.
The above distribution methods may use either a multicast MBS Session or a
broadcast MBS Session to distribute content to an MBS Client and may also make
use of the Object Repair feature, as defined in clause 4.2.5 below.
### 4.2.4 User Service Announcement
The MBS User Service Announcement provides service access information needed
by the MBS Client to discover and activate the reception of one or more MBS
User Services. Depending on the User Service advertisement mode(s) provisioned
by the MBS Application Provider (AF/AS) at reference point Nmb10 (or N33+Nmb5)
MBS User Service Announcements may be delivered:
1\. Via a regular unicast PDU Session at reference point MBS‑5.
2\. Via a dedicated MBS Distribution Session provisioned and managed by the
MBSF called the _MBS User Service Announcement Channel_ at reference point
MBS‑4‑MC. User Service Announcements are delivered using the Object
Distribution Method.
NOTE: The MBS User Service Announcement Channel is provisioned using the
procedures defined in clause 5.3A.
3\. By application-private means via reference point MBS‑8.
The baseline information conveyed in User Service Announcements is defined in
clause 4.5.7. The procedures for User Service advertisement are defined in
clause 5.4.
### 4.2.5 User Services Reception Reporting
Reporting by the MBS Client to the MBSF is for further study and may be
realised by instantiating the data collection and reporting architecture
specified in TS 26.531 [11]. This may include, for example, dynamically
adjusting the Application Layer FEC redundancy level in the MBSTF according to
the Packet Error Rate (PER) reported by the MBS Client.
### 4.2.6 Object Repair
When using the Object Distribution Method, Object Repair may be provisioned by
the MBS Application Provider. This feature allows an MBS Client to retrieve
from the MBS AS (via reference point MBS‑4‑UC) missing portions of objects not
received intact from the MBSTF at reference point MBS‑4‑MC.
Two types of Object Repair are defined by the present document:
\- _Object Repair during the MBS Distribution Session_.
\- _Object Repair after the completion of the MBS Distribution Session_ ,
including a randomized back-off period for different MBS Clients in order to
avoid overloading the MBS AS.
The functions of the MBS AS are defined in clause 4.3.4.
## 4.3 Functional entities
### 4.3.1 General
The MBSF and MBSTF offer service layer functionality for sending data via MBS
Sessions. The MBSF (clause 4.3.2) offers control plane functionality while the
MBSTF (clause 4.3.3) offers user plane functionality. The MBSTF acts as a User
Plane anchor when it sources IP multicast traffic. Reference point Nmb2
provides the means for the MBSF to configure the delivery methods in the
MBSTF, and also supports push-based ingest of object manifests. Reference
point MBS‑11 supports pull-based ingest by the MBSTF of object manifests and
pull-based ingest of User Service Announcement objects for delivery to the MBS
Client via reference point MBS‑4‑MC (as described in clause 4.2.4).
Figure 4.3.1-1 shows the complete set of functional entities involved in
supporting MBS User Services when the MBS Application Provider is deployed in
the Trusted DN, including client functions in the UE.
NOTE: When the MBS Application Provider is deployed outside the Trusted DN, it
interacts with the MBSF via the NEF at reference point N33, as shown in figure
4.2.2‑1, instead of via Nmb10.
Figure 4.3.1-1 MBS User Service reference architecture
In the above architecture, MBS-specific functions such as the MBS AS and MBSF
are shown as independent and standalone. In deployments, they may be co-
located on physical devices with other functions. As an example, the MBS AS
may be hosted in the MBS Application Provider domain, or it may be hosted in a
5GMS AS.
### 4.3.2 MBSF
The functionality of the MBSF is defined in clause 5.3.2.11 of TS 23.247 [5].
It receives provisioning and control commands either directly at reference
point Nmb10 or at reference point Nmb5 (via the NEF). The MBSF invokes MBS
Session operations on the MB‑SMF at reference point Nmb1. The MBSF configures
the MBSTF at reference point Nmb2.
The User Service Announcement function of the MBSF provides session access
information which is consumed by the MBS Client and subsequently used to
discover and initiate the reception of one or multiple MBS User Services. The
session access information may contain information for presentation to the
end-user, as well as application parameters used in generating service content
for consumption by the MBS Client.
The present document defines additional Control Plane functionalities of the
MBSF to support MBS User Services including:
1\. Generating the User Service Announcement for each MBS Session.
2\. Managing User Service Announcement updates.
3\. Providing the User Service Announcement information to the MBS Client in a
timely manner using one or more of the following mechanisms:
a) Unicast User Service Announcement delivered by the MBS AF via reference
point MBS-5, including the possible use of push- or notification-based update
mechanisms.
b) User Service Announcement via an MBS Distribution Session delivered by the
MBSTF at reference point MBS-4-MC, optionally in the same MBS Distribution
Session as the content it is advertising, or else via a dedicated MBS
Distribution Session managed by the MBSF called the _MBS User Service
Announcement Channel_.
c) User Service Announcement via application-private means at reference point
MBS-8.
### 4.3.3 MBSTF
#### 4.3.3.1 General
The functionality of the MBSTF is defined in clause 5.3.2.12 of TS 23.247 [5].
It receives User Plane data traffic at reference point Nmb8 and sends MBS data
packets to the MB‑UPF via reference point Nmb9.
NOTE: The MBSTF may not be present in all deployments of the MBS System.
However, the MBSTF is an integral and necessary component of MBS User
Services, and the present document is not concerned with deployments in which
it is absent.
The present document defines additional User Plane functionalities of the
MBSTF to support MBS User Services as follows:
1\. Receiving MBS Distribution Session configurations from the MBSF at
reference point Nmb2.
2\. Sending notification events to the MBSF, e.g., data ingest failure,
session terminated, delivery started via reference point Nmb2.
3\. Based on the MBS Distribution Session configuration:
a) MBS delivery of ingested objects or sequences of objects to the MBS Client
using the Object Distribution Method (see clause 6.1). This may be used to
support real-time distribution of media segments (as special objects)
including CMAF segments.
b) MBS delivery of ingested packet streams to the MBS Client using the Packet
Distribution Method (see clause 6.2).
c) Delivery of MBS User Service Announcement information (including updates as
necessary) within the MBS Session.
#### 4.3.3.2 MBSTF subfunctions to support Object Distribution Method
The MBSTF subfunctions supporting the Object Distribution Method are depicted
in figure 4.3.3.2-1 below.
Figure 4.3.3.2-1: MBSTF architecture overview for Object Distribution Method
The _Object ingest_ subfunction supports:
\- _Pull-based ingest at reference point MBS‑11:_ The Object ingest
subfunction in this case fetches one or more objects from the MBS AF using
HTTPS for inclusion in the MBS User Service Announcement Channel. (The set of
objects to be included is listed in an object manifest previously fetched from
the MBS AF at the same reference point.)
\- _Push-based ingest at reference point Nmb2:_ The Object ingest subfunction
receives an object manifest from the MBSF that describes a set of objects for
inclusion in the MBS User Service Announcement Channel. The MBSTF goes on to
fetch the objects listed in the object manifest from the MBS AF via reference
point MBS‑11.- _Pull-based ingest at reference point Nmb8:_ The Object ingest
subfunction in this case fetches one or more objects from the MBS Application
Provider (AF/AS).
\- _Push-based ingest at reference point Nmb8:_ The Object ingest subfunction
receives one or more objects from the MBS Application Provider (AF/AS).
Object ingest procedures at reference point Nmb2 and MBS‑11 shall be a subset
of those at reference point Nmb8.
The _Object segmentation subfunction_ supports the partitioning of an object
into payload units suitable for MBS transmission.
The optional _Application Layer FEC_ subfunction supports object recovery when
some packets are not received by the MBMS Client.
The _Packetisation_ subfunction places the payload units (and, optionally, the
FEC data) into Nmb9 transmission packets according to clause 6.1.
The _Packet scheduling_ subfunction schedules the outgoing packet stream
according to target bit rate configuration.
The _Control_ subfunction offers support for MBSTF service configuration,
status query and notifications at reference point Nmb2.
#### 4.3.3.3 MBSTF subfunctions to support Packet Distribution Method
The MBSTF subfunctions supporting the Packet Distribution Method are depicted
in figure 4.3.3.3-1 below.
Figure 4.3.3.3-1: MBSTF architecture overview for Packet Distribution Method
The _Packet ingest_ subfunction supports the reception of a packet sequence at
reference point Nmb2 from authorized sources.
The optional _Application Layer FEC_ subfunction to support object recovery
when some packets are not received by the MBMS Client.
The _Packetisation_ subfunction places the ingested packets (and, optionally,
the FEC data) into Nmb9 transmission packets. Depending on the transmission
mode, ingested packets may be reformatted suitable for MBS transmission.
The _Packet scheduling_ subfunction schedules the outgoing data stream
according to target bit rate configuration.
The _Control_ subfunction offers support for MBSTF service configuration and
service notifications at reference point Nmb2.
### 4.3.3A MBS AF
The MBS AF is an optional entity that performs the following functions to
support MBS User Services:
\- Serving User Service Announcements to the MBSF Client via unicast reference
point MBS‑5.
\- Serving object manifests and/or User Service Announcements to the MBSTF via
reference point MBS‑11.
The MBS AF is configured by the MBSF at reference point MBS‑3. This
interaction is not further defined by the present document.
The MBS AF may be deployed as a standalone entity, or its functions may be co-
located with other Network Functions such as the MBSF (see clause 4.3.2), or
the 5GMS AF defined in TS 26.501 [7].
### 4.3.4 MBS AS
The MBS AS is an optional entity that performs the following functions to
support MBS User Services:
\- Providing a byte-range file repair service to the MBSTF Client (via
reference point MBS‑4‑UC) for use with the Object Distribution Method.
The MBS AS is configured by the MBSF at reference point MBS‑9. The MBS AS may
acquire content from the MBSTF. These interactions are not further defined by
the present document.
The MBS AS may be deployed as a standalone entity, or its functions may be co-
located with other Network Functions such as the MBSTF (see clause 4.3.3) or
the 5GMS AS defined in TS 26.501 [7].
### 4.3.4A MBSSF
The MBS Security Function (MBSSF) is an optional logical entity defined in
clause 6.13 of TS 23.247 [5] and TS 33.501 [18] that performs the following
functions to support MBS User Services:
\- Providing a security anchor to the MBSTF Client (see clause 4.3.5) via
reference point MBS‑10, realising the User Plane security procedure defined in
clause W.4.1.3 of TS 33.501 [18].
In deployment, the MBSSF may be co-located with the MBSF or with the MBSTF, as
described in clause 6.13 of TS 23.247 [5]. Interactions and procedures between
these three functions are not defined in the present document.
### 4.3.5 MBS Client
The MBS Client function is part of the UE. The functionality of the UE is
defined in clause 5.3.2.8 of TS 23.247 [5].
The MBS Client is further divided into the following subfunctions:
\- _MBSF Client:_ Communicates with the MBS AF at reference point MBS‑5 on MBS
User Service control aspects. Communicates with the MBSSF at reference point
MBS‑10 to authenticate access to security-protected MBS data (see clause W.4
of TS 33.501 [18]) that it has received from reference point MBS‑4‑MC.
\- _MBSTF Client:_ Communicates with the MBSTF at reference point MBS‑4‑MC
and/or with the MBS AS at reference point MBS‑4‑UC in order to provide an MBS
Application Data Session to the MBS-Aware Application.
The MBS Client performs the following functions to support MBS User Services:
\- Acquisition of MBSF-compiled User Service Announcements from the MBS AF at
reference point MBS‑5 and/or from the MBSTF at reference point MBS-4-MC.
\- Authorisation of access to security-protected MBS data by invoking the User
Plane security procedure defined in clause W.4.1.3 of TS 33.501 [18] at
reference point MBS‑10.
\- Reception of MBS data via reference point MBS‑4‑MC from either a Multicast
MBS Session or a Broadcast MBS Session.
\- Exposure of MBS Application Data Sessions towards an MBS-Aware Application.
\- Using AL-FEC to recover packets or objects, if this optional feature is
provisioned for the MBS Session.
\- Unicast recovery via reference point MBS‑4‑UC of the application payload
data carried in multicast/broadcast packets that are not successfully received
via MBS-4-MC, if unicast repair is provisioned for the MBS Session.
NOTE: Roaming of the MBS Client is for further study.
### 4.3.6 MBS-Aware Application
The MBS Client is typically controlled by an external application which
triggers the establishment of an MBS User Services session. The MBS-Aware
Application is not defined within the present document, but the function makes
use of the MBS Client and (indirectly) the Network Functions supporting MBS
User Services (MBSF, MBSTF and MBS AS) via reference points MBS‑6 and MBS‑7.
## 4.4 Reference points and interfaces
### 4.4.1 Overview
The following reference points defined in clause 5.1 of TS 23.247 [5] are
relevant to MBS User Services architecture: Nmb1, Nmb2, Nmb5, Nmb8, Nmb9,
Nmb10 and Nmb12.
The following additional reference points are defined by the present document:
**\- MBS-3:** Used by the MBSF to configure the MBS AF and to publish User
Service Announcements to it. This reference point is not described further in
the present document.
**\- MBS-4-MC:** Unidirectional multicast distribution of content from the
MBSTF to the MBS Client.
**\- MBS-4-UC:** User Plane interactions between the MBSTF Client and the MBS
AS for the purpose of file-based unicast repair.
**\- MBS-5:** User Plane interactions between the MBSF Client and the MBS AF
for the purpose of MBS control plane and service handling.
**\- MBS-6:** API exposed by the MBSF Client and used by the MBS-Aware
Application to manage and control MBS User Services.
**\- MBS-7:** API exposed by the MBSTF Client and used by the MBS-Aware
Application to receive user data information distributed using MBS User
Services.
**\- MBS-8:** Announcement of MBS User Services to the MBS-Aware Application
by the MBS Application Provider. The procedures at this reference point are
beyond the scope of 3GPP specification.
**\- MBS-9:** Used by the MBSF to configure the MBS AS. This reference point
is not described further in the present document.
**\- MBS-10:** User Plane interactions between the MBSF Client and the MBSSF
for the purpose of authorising access to security-protected MBS data by means
of the User Plane security procedure specified in clause W.4.1.3 of TS 33.501
[18].
**\- MBS-11:** Used by the MBSTF to retrieve object manifests and User Service
Announcements listed in object manifests from the MBS AF.
In addition, the following reference points are defined inside the MBS Client
function:
\- **MBS‑6′:** API exposed by the MBSTF Client and used by the MBSF Client to
(de)activate reception of an MBS Session by the MBSTF. The reception
parameters are supplied by the MBSF Client.
This reference point is outside the scope of MBS User Services and is not
described further in the present document.
\- **MBS‑7′:** API exposed by the MSTF Client and used by the MBSTF to supply
MBS Session configuration information that has been received from reference
point MBS‑4‑MC.
This reference point is outside the scope of MBS User Services and is not
described further in the present document.
## 4.5 Domain model
### 4.5.1 User Services domain model
The domain model for MBS User Services addresses different service and session
concepts that are established between the different functional entities of the
MBS User Services architecture, as shown in figure 4.5.1‑1.
Figure 4.5.1-1: MBS User Services domain model
In the above figure:
1\. The MBS Application Provider initiates _MBS User Service Provisioning_
with the MBSF to provision an _MBS User Service_.
2\. Subsequently, the MBS Application Provider provisions a number of time-
bound MBS User Data Ingest Sessions within the scope of the newly provisioned
MBS User Service, also by means of MBS User Service Provisioning.
When the current time enters the time window of a provisioned MBS User Data
Ingest Session:
3\. The MBSF establishes an _MBS User Service Session_ of the parent MBS User
Service by establishing an MBS Session in the MBS System. The reception
parameters of the MBS Session are advertised in an MBS User Service
Announcement, as defined in clause 4.5.2 below. The MBS User Service
Announcement is optionally passed back to the MBS Application Provider by
means of MBS User Service Provisioning (see step 7bis).
4\. The MBSTF establishes an _MBS User Data Ingest Session_ between itself and
the MBS Application Provider for the purpose of ingesting objects or packets,
according to the type of distribution method provisioned.
5\. The MBSTF establishes an _MBS Distribution Session_ and begins to transmit
objects or packets on it according to the configured distribution method as
and when they are available from the MBS User Data Ingest Session.
When an MBS User Service is established:
6\. The MBS-Aware Application instructs the MBSF Client to activate an MBS
User Service by means of _MBS User Service Control_.
7\. The MBSF Client may acquire the MBS User Service Announcement from the
MBSF via the MBS User Service [or via the MBS Distribution Session] and pass
selected application-facing parameters (such as the service class and service
names) up to the MBS-Aware Application by means of _MBS User Service Control_.
7bis. Alternatively, the MBS User Service Announcement may be made available
to the MBS Application Provider, in which case the MBS-Aware Application
obtains it via an application-private _MBS Application Service_ and then
provides it to the MBSF Client by means of MBS User Service Control.
8\. The MBS-Aware Application selects the announced MBS User Service via MBS
User Service Control and, as a result, the MBSF Client activates reception of
the corresponding MBS Distribution Session in the MBSTF Client.
9\. An _MBS Application Data Session_ is established between the MBSTF Client
and the MBS-Aware Application to supply the latter with received (and possibly
repaired) user data.
### 4.5.2 Static information model
Figure 4.5.2‑1 shows how the different service and session concepts depicted
in figure 4.5.1‑1 above relate to each other. In this figure:
1\. The MBS Application Provider provisions the parameters of a new MBS User
Service by invoking the _Nmbsf_ service either directly, or via the NEF. This
specifies which of the _Service announcement modes_ are to be used to
advertise the MBS User Service, as well as descriptive metadata for inclusion
in the MBS User Service Announcement.
2\. The MBS Application Provider provisions a number of time-bound MBS User
Data Ingest Sessions within the scope of the MBS User Service by invoking the
_Nmbsf_ service either directly, or via an equivalent _Nnef_ service provided
by the NEF. Each MBS User Data Ingest Session includes the details of one or
more MBS Distribution Sessions.
\- To indicate that it has a restricted MBS service area (i.e. corresponding
to a local MBS Service, as defined in clause 6.2.2 of TS 23.247 [5]), an MBS
Distribution Session may specify one or more _Target service areas_. In line
with [5], MBS data is not transmitted outside the MBS service area derived
from the indicated _Target service areas_.
\- To provision location-dependent variants of an MBS User Service (see clause
6.2.3 of TS 23.247 [5]), a number of MBS Distribution Sessions conveying
different MBS data may be provisioned within the scope of the same MBS User
Service by setting the _Location-dependent service flag_ on the MBS
Distribution Sessions of each variant. Location-dependent MBS Distribution
Session variants shall have the same _MBS Session Identifier_ , but they shall
have disjoint _Target service areas_.
\- When the _Multiplexed service flag_ is set on the MBS Distribution Session,
all MBS Distribution Sessions with an identical (or empty) set of _Target
service areas_ shall be multiplexed onto the same MBS Session. The _MBS
Session Identifier_ shall be the same for all MBS Distribution Sessions within
the multiplex. This feature may be combined with the _Location-dependent
service flag_ , in which case each location-dependent multiplex of MBS
Distribution Sessions is mapped into a separate MBS Session.
\- The MBS Application Provider may set the _Transport security protection_
flag to indicate that transport security protection (as specified in annex W
of TS 33.501 [18]) is required for the MBS Distribution Session. When the flag
is set, the MBSSF chooses between the control plane or user plane security
procedure.
The MBSF provisions additional MBS Distribution Session parameters (denoted in
table 4.5.6‑1 as assigned by the MBSF) and exposes some of them back to the
MBS Application Provider (as indicated by the NOTE to table 4.5.6‑1).
NOTE 1: The MBSF typically allocates an _MBS Session Identifier_ , such as a
Temporary Mobile Group Identity (TMGI) for each MBS Distribution session (see
step 4 below) as a side-effect of provisioning, but it is also possible for
the _Nmbsf_ service invoker to nominate a particular value during this
provisioning step if TMGI allocations are managed externally to the MBSF.
3\. The MBS Application Provider may additionally provision an MBS Consumption
Reporting Configuration within the scope of the MBS User Service by invoking
the _Nmbsf_ service either directly, or via the NEF.
NOTE 2: Reception reporting for MBS User Services is for future study.
Shortly before the current time enters the time window of a provisioned MBS
User Data Ingest Session:
4\. The MBSF provisions an MBS Session in the MBS System by invoking the
_Nmbsmf_ service on the MB‑SMF (see clause 9 of TS 23.247 [5]) to allocate a
TMGI (if one has not already been allocated) for each MBS Distribution Session
and to create an MBS Session Context for each one. The parameters of the MBS
Session Context shall be populated as specified in clause 4.5.9. In response,
the MB-SMF provides the MB-UPF ingest information (specifically, the MB‑UPF
tunnel endpoint address and traffic flow information to be used by the MBSTF)
to the MBSF.
5\. The MBSF provisions an MBS Distribution Session in the MBSTF by invoking
the _Nmbstf_ service at reference point Nmb2 using the parameters from the
newly created MBS Session Context.
6\. Using the parameters from the MBS Distribution Session and from the newly
created MBS Session Context, the MBSF compiles an MBS User Service
Announcement to advertise the availability of the MBS User Service and makes
this service access information available by one or more of the _Service
announcement modes_ provisioned in the MBS User Service.
NOTE 1 Square brackets after a parameter name indicate multiplicity; parameter
names rendered in italics with parentheses are optional. See the following
clauses for details.
NOTE 2: Parameters and entities not exposed to the MBS Application Provider
via the _Nmbsf_ service at reference point Nmb10 are annotated with the dagger
symbol †.
NOTE 3: MBS Session Identifier is defined by clause 6.5.1 of TS 23.247 [5] as
a Temporary Mobile Group Identity (TMGI) or a Source-Specific Multicast (SSM)
IP address.
Figure 4.5.2-1: MBS User Services static information model
### 4.5.3 MBS User Service parameters
This entity models an MBS User Service, as provisioned by the MBS Application
Provider and as managed by the MBSF. The baseline parameters of an MBS User
Service are listed in table 4.5.3‑1 below:
With the exception of _Service type_ , which is an immutable property of an
MBS User Service, any of the parameters assigned by the MBS Application
Provider may be updated by the MBS Application Provider at any time.
NOTE 1: Propagation of modified parameter values to the MBS Client in an
updated MBS User Service Announcement is subject to implementation-dependent
and operational latencies.
Table 4.5.3‑1: Baseline parameters of MBS User Service entity
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | User Service | 1..1 | MBSF | A unique | | Identifier | | | identifier for | | | | | this MBS User | | | | | Service in the | | | | | MBSF. | +-----------------+-------------+-----------------+-----------------+ | External | 1..* | MBS Application | A unique | | service | | Provider | identifier for | | identifiers | | | this MBS User | | | | | Service that is | | | | | also present in | | | | | the MBS User | | | | | Service | | | | | Announcement. | | | | | | | | | | If assigned in | | | | | a globally | | | | | unique manner, | | | | | this identifier | | | | | may be useful | | | | | in correlating | | | | | this MBS User | | | | | Service with | | | | | the same | | | | | service | | | | | delivered by a | | | | | different | | | | | system. | +-----------------+-------------+-----------------+-----------------+ | Service type | 1..1 | | Indicates | | | | | whether this | | | | | MBS User | | | | | Service is | | | | | distributed via | | | | | Multicast MBS | | | | | Session(s) or | | | | | Broadcast MBS | | | | | Session(s) | +-----------------+-------------+-----------------+-----------------+ | Service class | 1..1 | | The class of | | | | | this MBS User | | | | | Service, | | | | | expressed as a | | | | | fully-qualified | | | | | term identifier | | | | | from a | | | | | controlled | | | | | vocabulary such | | | | | as the OMNA | | | | | BCAST Service | | | | | Class [16], | | | | | e.g. | | | | | _u | | | | | rn:oma:bcast:om | | | | | a_bsc:st:1.0_. | +-----------------+-------------+-----------------+-----------------+ | Service | 1..* | | Determines | | announcement | | | whether the MBS | | modes | | | User Service | | | | | Announcement | | | | | compiled by the | | | | | MBSF is | | | | | advertised to | | | | | the MBSF Client | | | | | at reference | | | | | point MBS‑5 | | | | | and/or | | | | | advertised to | | | | | the MBSF Client | | | | | via the MBS | | | | | Distribution | | | | | Session and/or | | | | | passed back to | | | | | the MBS | | | | | Application | | | | | Provider via | | | | | reference point | | | | | Nmb10. | +-----------------+-------------+-----------------+-----------------+ | Service names | 1..* | | A set of | | | | | distinguishing | | | | | names for this | | | | | MBS User | | | | | Service, one | | | | | per language. | +-----------------+-------------+-----------------+-----------------+ | Service | 1..* | | A set of | | descriptions | | | descriptions of | | | | | this MBS User | | | | | Service, one | | | | | per language. | +-----------------+-------------+-----------------+-----------------+ | Main service | 0..1 | | The main | | language | | | language of | | | | | this MBS User | | | | | Service. | +-----------------+-------------+-----------------+-----------------+
MBS User Data Ingest Sessions (see clause 4.5.5) are separately provisioned
within the scope of an MBS User Service. It is valid for an MBS User Service
to have no MBS User Data Ingest Sessions currently provisioned.
An MBS Reception Reporting Configuration (see clause 4.5.4 below) may be
separately provisioned within the scope of an MBS User Service.
NOTE 2: Reception reporting for MBS User Services is for future study.
### 4.5.4 MBS Reception Reporting Configuration parameters
Reception reporting for MBS User Services is for future study.
### 4.5.5 MBS User Data Ingest Session parameters
This entity models an MBS User Data Ingest Session, as provisioned by the MBS
Application Provider and as managed by the MBSF. The baseline parameters for
an MBS User Data Ingest Session are listed in table 4.5.5‑1 below.
NOTE: A linkage from the MBS User Data Ingest Session to its parent MBS User
Service is additionally required at stage 3. The _User Service identifier_
defined in table 4.5.3‑1 serves this purpose.
The set of active periods may be updated by the MBS Application Provider at
any time. The state of constituent MBS Distribution Sessions (and their
corresponding MBS Distribution Session Announcements) may need to change as a
consequence.
Table 4.5.5‑1: Baseline parameters of MBS User Data Ingest Session entity
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | User Data | 1..1 | MBSF | An identifier | | Ingest Session | | | for this MBS | | Identifier | | | User Data | | | | | Ingest Session | | | | | that is unique | | | | | in the scope of | | | | | the parent MBS | | | | | User Service | | | | | (see | | | | | clause 4.5.3). | +-----------------+-------------+-----------------+-----------------+ | MBS User | 0..1 | | The MBS User | | Service | | | Service | | Announcement | | | Announcement | | | | | (see | | | | | clause 4.5.7) | | | | | currently | | | | | associated with | | | | | this MBS User | | | | | Data Ingest | | | | | Session. | | | | | | | | | | Present only if | | | | | all constituent | | | | | MBS | | | | | Distribution | | | | | Sessions are in | | | | | the | | | | | _ESTABLISHED_ | | | | | or _ACTIVE_ | | | | | state. | +-----------------+-------------+-----------------+-----------------+ | Active periods | 0..* | MBS Application | Periods of time | | | | Provider | during which | | | | | the MBS User | | | | | Data Ingest | | | | | Session is | | | | | active in the | | | | | MBS System. | | | | | | | | | | If omitted, the | | | | | MBS User Data | | | | | Ingest session | | | | | is intended to | | | | | be active until | | | | | further notice. | +-----------------+-------------+-----------------+-----------------+
The MBS User Data Ingest Session is composed of one or more MBS Distribution
Sessions (see clause 4.5.6 below) and these shall be provisioned in the same
operation as the enclosing MBS User Data Ingest Session. It is not valid for
an MBS User Data Ingest Session to have no MBS Distribution Sessions defined.
MBS Distribution Sessions may be added to or removed from an MBS User Data
Ingest Session by the MBS Application Provider at any time, subject to the
minimum number specified above. The MBS User Service Announcement may need to
change as a consequence to refer to a revised set of corresponding MBS
Distribution Session Announcements.
### 4.5.6 MBS Distribution Session parameters
This entity models an MBS Distribution Session, as provisioned by the MBS
Application Provider and as managed by the MBSF. This MBSF subsequently uses
this information to provision a corresponding MBS Distribution Session in the
MBSTF.
The following parameters assigned by the MBS Application Provider may be
updated by the MBS Application Provider at any time:
\- Target service areas,
\- MBS Frequency Selection Area (FSA) Identifier (applicable only to broadcast
Service type)
\- QoS information.
With the exception of the _MBS Session Identifier_ (which is immutable after
initial assignment) and the _Location-dependent service flag_ (which is
immutable after creation), all other parameters assigned by the MBS
Application Provider may be updated by the MBS Application Provider when the
MBS Distribution Session is in the _INACTIVE_ state.
The baseline parameters for an MBS Distribution Session that are common to all
distribution methods are listed in table 4.5.6‑1 below. All parameters are
exposed to the MBS Application Provider except where noted otherwise.
Table 4.5.6‑1: Common baseline parameters of MBS Distribution Session entity
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | Distribution | 1..1 | MBSF | An identifier | | Session | | | for this MBS | | Identifier | | | Distribution | | | | | Session that is | | | | | unique within | | | | | the scope of | | | | | the MBS User | | | | | Service (see | | | | | clause 4.5.3). | +-----------------+-------------+-----------------+-----------------+ | State | 1..1 | | The current | | | | | state of the | | | | | MBS | | | | | Distribution | | | | | Session: | | | | | _INACTIVE_ , | | | | | _ESTABLISHED_ , | | | | | _ACTIVE_ or | | | | | _DEACTIVATING_ | | | | | (see | | | | | clause 4.6.1). | +-----------------+-------------+-----------------+-----------------+ | MBS Session | 1..* | | As defined in | | Context | | | clause 6.9 of | | | | | TS 23.247 [5] | | | | | (see NOTE 1). | | | | | | | | | | There shall be | | | | | one MBS Session | | | | | Context | | | | | associated with | | | | | the MBS | | | | | Distribution | | | | | Session unless | | | | | multiple | | | | | _Target service | | | | | areas_ are | | | | | specified (see | | | | | below). | +-----------------+-------------+-----------------+-----------------+ | MB‑UPF tunnel | 0..1 | | The tunnel | | e | | | endpoint | | ndpoint address | | | address of the | | | | | MB‑UPF that | | | | | supports this | | | | | MBS | | | | | Distribution | | | | | Session at | | | | | reference point | | | | | Nmb9 | | | | | (see NOTE 1, | | | | | NOTE 4). | +-----------------+-------------+-----------------+-----------------+ | MBMS GW tunnel | 0..1 | | The tunnel | | endpoint | | | endpoint | | address | | | address of the | | | | | MBMS GW that | | | | | supports this | | | | | MBS | | | | | Distribution | | | | | Session at | | | | | reference point | | | | | SGi‑mb (see | | | | | NOTE 1, | | | | | NOTE 4). | +-----------------+-------------+-----------------+-----------------+ | User Plane | 0..1 | | Details of the | | traffic flow | | | MBS-4-MC User | | information | | | Plane traffic | | | | | flow to be used | | | | | by the MBSTF | | | | | for this MBS | | | | | Distribution | | | | | Session, | | | | | including the | | | | | multicast group | | | | | destination | | | | | address and | | | | | port number to | | | | | be used inside | | | | | the unicast | | | | | tunnel at | | | | | reference point | | | | | Nmb9 | | | | | (see NOTE 1). | | | | | | | | | | This parameter | | | | | is mandatory | | | | | except in the | | | | | case of Packet | | | | | Distribution | | | | | Method | | | | | operating in | | | | | Forward-only | | | | | mode, in which | | | | | case | | | | | mult | | | | | icast-addressed | | | | | packets | | | | | ingested at | | | | | reference point | | | | | Nmb8 are | | | | | relayed to Nmb9 | | | | | without | | | | | changing their | | | | | address. | +-----------------+-------------+-----------------+-----------------+ | MBS Session | 0..1 | MBSF or MBS | The Temporary | | Identifier | | Application | Mobile Group | | | | Provider | Identity (TMGI) | | | | | or | | | | | Source-Specific | | | | | Multicast (SSM) | | | | | IP address of | | | | | the MBS Session | | | | | supporting this | | | | | MBS | | | | | Distribution | | | | | Session (see | | | | | NOTE 2). | | | | | | | | | | Multiple MBS | | | | | Distribution | | | | | Sessions within | | | | | the scope of | | | | | the same MBS | | | | | User Service | | | | | may share the | | | | | same value if | | | | | they are | | | | | loc | | | | | ation-dependent | | | | | MBS Services, | | | | | as defined in | | | | | clause 6.2.3 of | | | | | TS 23.247[5]. | | | | | | | | | | TMGI values are | | | | | allocated by | | | | | the MBSF in | | | | | conjunction | | | | | with the MB‑SMF | | | | | unless supplied | | | | | by the MBS | | | | | Application | | | | | Provider at the | | | | | time of | | | | | provisioning. | +-----------------+-------------+-----------------+-----------------+ | Target service | 0..* | MBS Application | The set of | | areas | | Provider | regions | | | | | comprising the | | | | | MBS service | | | | | area in which | | | | | this MBS | | | | | Distribution | | | | | Session is to | | | | | be made | | | | | available (see | | | | | NOTE 2). | | | | | | | | | | The provided | | | | | set of regions | | | | | shall be | | | | | disjoint with | | | | | that of every | | | | | other MBS | | | | | Distribution | | | | | Session sharing | | | | | the same MBS | | | | | Session | | | | | Identifier. | | | | | | | | | | A unique MBS | | | | | Session Context | | | | | shall be | | | | | associated with | | | | | the MBS | | | | | Distribution | | | | | Session for | | | | | each declared | | | | | service area, | | | | | distinguishable | | | | | by its Area | | | | | Session | | | | | Identifier. | +-----------------+-------------+-----------------+-----------------+ | MBS Frequency | 0..1 | | (Applicable | | Selection Area | | | only to | | (FSA) | | | broadcast | | Identifier | | | _Service | | | | | type_.) | | | | | Identifies a | | | | | preconfigured | | | | | area within | | | | | which, and in | | | | | proximity to, | | | | | the cell(s) | | | | | announce the | | | | | MBS FSA ID and | | | | | the associated | | | | | frequency | | | | | corresponding | | | | | to this MBS | | | | | Distribution | | | | | Session (see | | | | | NOTE 3). | +-----------------+-------------+-----------------+-----------------+ | Loc | 0..1 | | An indication | | ation-dependent | | | that this MBS | | service flag | | | Distribution | | | | | Session | | | | | corresponds to | | | | | a | | | | | loc | | | | | ation-dependent | | | | | MBS Session. | | | | | | | | | | If the flag is | | | | | unset or | | | | | omitted, the | | | | | MBS | | | | | Distribution | | | | | Session is not | | | | | loca | | | | | tion-dependent. | +-----------------+-------------+-----------------+-----------------+ | Multiplexed | 0..1 | | If set, all MBS | | service flag | | | Distribution | | | | | Sessions in the | | | | | scope of the | | | | | same parent MBS | | | | | User Data | | | | | Ingest Session | | | | | with identical | | | | | or empty sets | | | | | of _Target | | | | | service areas_ | | | | | shall be | | | | | multiplexed | | | | | onto the same | | | | | MBS Session. | | | | | | | | | | All MBS | | | | | Distribution | | | | | Sessions in the | | | | | multiplex shall | | | | | be assigned the | | | | | same MBS | | | | | Session | | | | | Identifier. | +-----------------+-------------+-----------------+-----------------+ | Restricted | 0..1 | | (Applicable | | membership flag | | | only to | | | | | multicast | | | | | _Service | | | | | type_.) An | | | | | indication that | | | | | this MBS | | | | | Distribution | | | | | Session is | | | | | restricted to a | | | | | set of UEs | | | | | according to | | | | | their current | | | | | subscription | | | | | status in the | | | | | MBS System. | | | | | | | | | | If the flag is | | | | | set, only UEs | | | | | in the | | | | | restricted set | | | | | are permitted | | | | | to join thls | | | | | MBS | | | | | Distribution | | | | | Session; | | | | | otherwise, any | | | | | UE is permitted | | | | | to join. | +-----------------+-------------+-----------------+-----------------+ | QoS information | 0..1 | | A 5G QoS | | | | | Identifier | | | | | (5QI) [2] to | | | | | be applied to | | | | | the traffic | | | | | flow for this | | | | | MBS | | | | | Distribution | | | | | Session (see | | | | | NOTE 2). | | | | | | | | | | The 5QI | | | | | information is | | | | | used by the | | | | | MBSF to set the | | | | | Quality of | | | | | Service for the | | | | | MBS Session by | | | | | interacting | | | | | with the PCF at | | | | | reference point | | | | | Nmb12. | +-----------------+-------------+-----------------+-----------------+ | Maximum content | 1..1 | | The maximum bit | | bit rate | | | rate for | | | | | content in this | | | | | MBS | | | | | Distribution | | | | | Session. | +-----------------+-------------+-----------------+-----------------+ | Maximum content | 0..1 | | The maximum | | delay | | | end-to-end | | | | | content | | | | | distribution | | | | | delay that is | | | | | tolerated for | | | | | this MBS | | | | | Distribution | | | | | Session by the | | | | | MBS Application | | | | | Provider. | +-----------------+-------------+-----------------+-----------------+ | Distribution | 1..1 | | The | | method | | | distribution | | | | | method for this | | | | | MBS | | | | | Distribution | | | | | Session, as | | | | | defined in | | | | | clause 6. | +-----------------+-------------+-----------------+-----------------+ | Operating mode | 0..1 | | The operating | | | | | mode in the | | | | | case where | | | | | multiple modes | | | | | are defined in | | | | | clause 6 for | | | | | the indicated | | | | | distribution | | | | | method. | +-----------------+-------------+-----------------+-----------------+ | FEC | 0..1 | | Configuration | | configuration | | | for Application | | | | | Level FEC | | | | | (AL-FEC) | | | | | information | | | | | added by the | | | | | MBSTF to | | | | | protect this | | | | | MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | The AL‑FEC | | | | | scheme shall be | | | | | identified | | | | | using a term | | | | | from the | | | | | Reliable | | | | | Multicast | | | | | Transport (RMT) | | | | | controlled | | | | | vocabulary of | | | | | FEC Encoding | | | | | IDs [17] | | | | | expressed as a | | | | | fully-qualified | | | | | URI, e.g. | | | | | _urn:ietf:rmt:f | | | | | ec:encoding:0_. | | | | | | | | | | The overhead of | | | | | AL‑FEC | | | | | protection | | | | | shall be | | | | | specified as a | | | | | proportion of | | | | | the | | | | | (unprotected) | | | | | MBS data, e.g. | | | | | 1.1 for 10% | | | | | overhead. | | | | | | | | | | Additional | | | | | scheme-specific | | | | | parameters may | | | | | be signalled in | | | | | the form of | | | | | uncontrolled | | | | | name--value | | | | | pairs. | +-----------------+-------------+-----------------+-----------------+ | Transport | 1..1 | | A flag | | security | | | indicating | | protection | | | whether | | | | | transport | | | | | security | | | | | protection is | | | | | required by the | | | | | MBS Application | | | | | Provider for | | | | | this MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | The MBSSF | | | | | determines | | | | | whether the | | | | | control plane | | | | | security | | | | | procedure (see | | | | | NOTE 5) or the | | | | | user plane | | | | | security | | | | | procedure is | | | | | selected. (See | | | | | annex W of | | | | | T | | | | | S 33.501 [18] | | | | | for details of | | | | | these | | | | | procedures.) | +-----------------+-------------+-----------------+-----------------+ | Traffic marking | 0..1 | MBS Application | Information | | information | | Provider or | (e.g. a | | | | MBSF | Differentiated | | | | | Services Code | | | | | Point) used by | | | | | the MBSTF to | | | | | mark the | | | | | multicast | | | | | packets that it | | | | | conveys to the | | | | | MB‑UPF at | | | | | reference point | | | | | Nmb9. | +-----------------+-------------+-----------------+-----------------+ | NOTE 1: | | | | | Internal | | | | | parameter not | | | | | exposed to the | | | | | MBS Application | | | | | Provider. | | | | | | | | | | NOTE 2: | | | | | Parameter not | | | | | relevant to the | | | | | MBSTF. | | | | | | | | | | NOTE 3: Used to | | | | | guide frequency | | | | | selection by | | | | | the UE for a | | | | | broadcast MBS | | | | | Session. | | | | | | | | | | NOTE 4: At | | | | | least one of | | | | | _MB‑UPF tunnel | | | | | en | | | | | dpoint address_ | | | | | or _MBMS GW | | | | | tunnel endpoint | | | | | address_ shall | | | | | be present. | | | | | | | | | | NOTE 5: The | | | | | control plane | | | | | security | | | | | procedure (see | | | | | clause W.4.1.2 | | | | | of | | | | | TS | | | | | 33.501 [18]) | | | | | is applicable | | | | | only to | | | | | Multicast MBS | | | | | Session(s). | | | | +-----------------+-------------+-----------------+-----------------+
An MBS Distribution Session Announcement (see clause 4.5.8 below) shall be
associated with an MBS Distribution Session when the latter is in the
_ESTABLISHED_ or _ACTIVE_ state.
The following MBS Distribution Session parameters are additionally relevant
when the distribution method is the Object Distribution Method:
Table 4.5.6‑2: Additional MBS Distribution Session parameters for Object
Distribution Method
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | Object | 1..1 | MBS Application | Indicates | | acquisition | | Provider | whether the | | method | | | objects(s) to | | | | | be acquired and | | | | | possibly | | | | | distributed as | | | | | part of the | | | | | corresponding | | | | | MBS User Data | | | | | Ingest Session | | | | | are to be | | | | | pushed into the | | | | | MBSTF by the | | | | | MBS Application | | | | | Provider or | | | | | whether they | | | | | are to be | | | | | pulled from the | | | | | MBS Application | | | | | Provider by the | | | | | MBSTF. | | | | | | | | | | In the latter | | | | | case, the | | | | | _Object | | | | | acquisition | | | | | method_ | | | | | indicates | | | | | whether the | | | | | object(s) are | | | | | to be retrieved | | | | | once from the | | | | | MBS Application | | | | | Provider at the | | | | | start of each | | | | | active period | | | | | of the | | | | | corresponding | | | | | MBS User Data | | | | | Ingest Session, | | | | | or whether the | | | | | MBSTF is | | | | | required to | | | | | check their | | | | | validity | | | | | periodically, | | | | | for example | | | | | once per | | | | | rotation of an | | | | | object | | | | | carousel. | | | | | | | | | | When a | | | | | reference to an | | | | | object manifest | | | | | is provided as | | | | | the _Object | | | | | acquisition | | | | | identifiers_ , | | | | | it is the | | | | | responsibility | | | | | of the MBSTF to | | | | | check for | | | | | updates to the | | | | | object manifest | | | | | itself in an | | | | | efficient | | | | | manner. | +-----------------+-------------+-----------------+-----------------+ | Object | 0..* | | Directly or | | acquisition | | | indirectly | | identifiers | | | identifies the | | | | | object(s) to be | | | | | ingested and | | | | | distributed by | | | | | the MBSTF | | | | | during this MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | This could be | | | | | the ingest URL | | | | | of the object, | | | | | the ingest URL | | | | | of a manifest | | | | | describing a | | | | | set of objects | | | | | or the ingest | | | | | URL of an | | | | | Application | | | | | Service Entry | | | | | Point document. | | | | | | | | | | For both pull- | | | | | and push-based | | | | | object | | | | | acquisition, | | | | | values are | | | | | expressed as | | | | | URL paths to be | | | | | resolved | | | | | relative to the | | | | | _Object ingest | | | | | base URL_. | | | | | | | | | | Constraints on | | | | | this parameter | | | | | are specified | | | | | in table 6.1-1. | | | | | In particular, | | | | | when | | | | | referencing an | | | | | object | | | | | manifest, | | | | | exactly one | | | | | object | | | | | acquisition | | | | | identifier | | | | | shall be | | | | | present. | +-----------------+-------------+-----------------+-----------------+ | Object ingest | 0..1 | MBS Application | In the case of | | base URL | | Provider or | push-based | | | | MBSF | object | | | | | acquisition, a | | | | | URL indicating | | | | | the host part | | | | | and base path | | | | | on the MBSTF to | | | | | which objects | | | | | are published. | | | | | In this case, | | | | | the value shall | | | | | be nominated by | | | | | the MBSF and | | | | | shall be unique | | | | | for all MBS | | | | | Distribution | | | | | Sessions within | | | | | the MBS System. | | | | | | | | | | In the case of | | | | | pull-based | | | | | object | | | | | acquisition, a | | | | | URL indicating | | | | | a host part and | | | | | base path on | | | | | the MBS | | | | | Application | | | | | Provider\'s | | | | | origin server | | | | | (or, in the | | | | | case of the | | | | | User Service | | | | | Announcement | | | | | Channel, on the | | | | | MBS AF) | | | | | relative to | | | | | which objects | | | | | lacking an | | | | | absolute URL | | | | | are acquired. | | | | | In this case, | | | | | the value shall | | | | | be nominated by | | | | | the MBS | | | | | Application | | | | | Provider (or, | | | | | in the case of | | | | | the User | | | | | Service | | | | | Announcement | | | | | Channel, by the | | | | | MBSF) and need | | | | | not be unique. | | | | | | | | | | When present, | | | | | this URL prefix | | | | | is replaced by | | | | | the MBSTF with | | | | | the _Object | | | | | distribution | | | | | base URL_ prior | | | | | to distribution | | | | | of ingested | | | | | objects. | | | | | | | | | | If omitted, | | | | | nothing is | | | | | substituted in | | | | | the content | | | | | ingest URL when | | | | | forming the | | | | | object | | | | | distribution | | | | | URL | +-----------------+-------------+-----------------+-----------------+ | Obje | 0..1 | MBS Application | A URL prefix | | ct distribution | | Provider | substituted by | | base URL | | | the MBSTF in | | | | | place of the | | | | | _Object ingest | | | | | base URL_ prior | | | | | to distribution | | | | | of ingested | | | | | objects. | | | | | | | | | | If present, the | | | | | optional | | | | | _Object ingest | | | | | base URL_ shall | | | | | also be | | | | | present. | | | | | | | | | | If omitted, the | | | | | object | | | | | distribution | | | | | URL is the same | | | | | as the object | | | | | ingest URL. | +-----------------+-------------+-----------------+-----------------+ | Object repair | 0..1 | MBSF | A URL prefix | | base URL | | | substituted by | | | | | the | | | | | MBSTF Client in | | | | | place of the | | | | | _Object | | | | | distribution | | | | | base URL_ when | | | | | repairing | | | | | objects not | | | | | received | | | | | completely | | | | | intact from | | | | | this MBS | | | | | Distribution | | | | | Session (see | | | | | NOTE). The | | | | | value shall | | | | | point to the | | | | | MBS AS. | | | | | | | | | | Present only | | | | | when object | | | | | repair is | | | | | provisioned for | | | | | this MBS | | | | | Distribution | | | | | Session. | +-----------------+-------------+-----------------+-----------------+ | NOTE: Parameter | | | | | not relevant to | | | | | the MBSTF. | | | | +-----------------+-------------+-----------------+-----------------+
The following MBS distribution session are additionally relevant when the
distribution method is the Packet Distribution Method:
Table 4.5.6‑3: Additional MBS Distribution Session parameters for Packet
Distribution Method
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | Packet ingest | 1..1 | MBS Application | Indicates | | method | | Provider | whether packets | | | | | are to be | | | | | ingested using | | | | | multicast | | | | | ingest or | | | | | unicast ingest. | | | | | | | | | | Multicast | | | | | ingest is valid | | | | | for Proxy mode | | | | | only. In this | | | | | case, the MBSTF | | | | | shall join a | | | | | Source-Specific | | | | | Multicast (SSM) | | | | | group indicated | | | | | in _MBSTF | | | | | ingest endpoint | | | | | addresses_ | | | | | parameter. | | | | | | | | | | Unicast ingest | | | | | is valid for | | | | | Proxy mode and | | | | | Forward-only | | | | | mode. In this | | | | | case, the MBSTF | | | | | shall allocate | | | | | a listening IP | | | | | address and | | | | | port number for | | | | | packet ingest | | | | | and shall | | | | | return it to | | | | | the MBSF in the | | | | | _MBSTF ingest | | | | | endpoint | | | | | addresses_ | | | | | parameter | | | | | below. | +-----------------+-------------+-----------------+-----------------+ | MBSTF ingest | 1..1 | MBS Application | The endpoint | | end | | Provider, MBSF, | addresses used | | point addresses | | MBSTF | by the MBS | | | | | Application | | | | | Provider and | | | | | MBSTF to | | | | | establish a | | | | | connection at | | | | | reference point | | | | | Nmb8 prior to | | | | | the | | | | | commencement of | | | | | this MBS User | | | | | Data Ingest | | | | | Session. | | | | | | | | | | In the case of | | | | | Proxy mode, | | | | | this shall be | | | | | the | | | | | Source-Specific | | | | | Multicast (SSM) | | | | | endpoint | | | | | addresses | | | | | (including the | | | | | source IP | | | | | address, | | | | | destination | | | | | multicast group | | | | | address and | | | | | destination UDP | | | | | port) nominated | | | | | by the MBS | | | | | Application | | | | | Provider or | | | | | else by the | | | | | MBSF. | | | | | | | | | | In the case of | | | | | Forward-only | | | | | mode, this | | | | | shall be the IP | | | | | addresses and | | | | | UDP port | | | | | numbers at the | | | | | source and | | | | | destination | | | | | ends of the | | | | | content ingest | | | | | tunnel, | | | | | nominated | | | | | respectively by | | | | | the MBS | | | | | Application | | | | | Provider and | | | | | the MBSTF. | +-----------------+-------------+-----------------+-----------------+
### 4.5.7 MBS User Service Announcement parameters
This entity models an MBS User Service Announcement, which is compiled by the
MBSF and used to advertise the current or imminent availability of an MBS User
Service in the MBS System. The baseline parameters for an MBS User Service
Announcement are listed in table 4.5.7‑1 below:
Table 4.5.7‑1: Baseline parameters of MBS User Service Announcement entity
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | External | 1..* | MBS Application | A unique | | service | | Provider | identifier used | | identifiers | | | by the | | | | | MBSF Client to | | | | | distinguish | | | | | between MBS | | | | | User Services. | | | | | | | | | | If assigned in | | | | | a globally | | | | | unique manner, | | | | | this identifier | | | | | may be useful | | | | | to the | | | | | MBSF Client in | | | | | correlating the | | | | | MBS User | | | | | Service with | | | | | the same | | | | | service | | | | | delivered by a | | | | | different | | | | | system. | +-----------------+-------------+-----------------+-----------------+ | Service class | 1..1 | | The class of | | | | | the MBS User | | | | | Service, | | | | | expressed as a | | | | | term identifier | | | | | from a | | | | | controlled | | | | | vocabulary. | +-----------------+-------------+-----------------+-----------------+ | Start | 0..1 | | The point in | | date--time | | | time from which | | | | | this MBS User | | | | | Service | | | | | Announcement is | | | | | valid. | | | | | | | | | | If not present, | | | | | the | | | | | announcement is | | | | | already valid. | +-----------------+-------------+-----------------+-----------------+ | End date--time | 0..1 | | The point in | | | | | time after | | | | | which this MBS | | | | | User Service | | | | | Announcement is | | | | | no longer | | | | | valid. | | | | | | | | | | If not present, | | | | | the | | | | | announcement is | | | | | valid | | | | | indefinitely. | +-----------------+-------------+-----------------+-----------------+ | Service names | 1..* | | A set of | | | | | distinguishing | | | | | names for the | | | | | MBS User | | | | | Service, one | | | | | per language. | +-----------------+-------------+-----------------+-----------------+ | Service | 1..* | | A set of | | descriptions | | | descriptions of | | | | | the MBS User | | | | | Service, one | | | | | per language. | +-----------------+-------------+-----------------+-----------------+ | Main service | 0..1 | | The main | | language | | | language of the | | | | | MBS User | | | | | Service. | +-----------------+-------------+-----------------+-----------------+ | MBS | 1..* | MBSF | The set of MBS | | Distribution | | | Distribution | | Session | | | Session | | Announcements | | | Announcements | | | | | (see | | | | | clause 4.5.8) | | | | | currently | | | | | associated with | | | | | this MBS User | | | | | Service | | | | | Announcement. | +-----------------+-------------+-----------------+-----------------+
### 4.5.8 MBS Distribution Session Announcement parameters
This entity models an MBS Distribution Session Announcement, which is compiled
by the MBSF and used to advertise the current or imminent availability of an
MBS Distribution Session in the MBS System. The baseline parameters for an MBS
Distribution Session Announcement are listed in table 4.5.8‑1 below:
Table 4.5.8‑1: Baseline parameters of MBS Distribution Session Announcement
entity
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | MBS Session | 1..1 | MB‑SMF | The Temporary | | Identifier | | | Mobile Group | | | | | Identity (TMGI) | | | | | or | | | | | Source-Specific | | | | | Multicast (SSM) | | | | | IP address of | | | | | the MBS | | | | | Distribution | | | | | Session from | | | | | which this | | | | | announcement is | | | | | derived. | +-----------------+-------------+-----------------+-----------------+ | MBS Frequency | 0..1 | MBS Application | (Broadcast MBS | | Selection Area | | Provider or | Session only.) | | (FSA) | | MB-SMF | Identifies a | | Identifier | | | preconfigured | | | | | area within | | | | | which, and in | | | | | proximity to, | | | | | the cell(s) are | | | | | announcing the | | | | | MBS FSA ID and | | | | | the associated | | | | | frequency | | | | | corresponding | | | | | to this MBS | | | | | Distribution | | | | | Session | | | | | Announcement | | | | | (see NOTE) | +-----------------+-------------+-----------------+-----------------+ | Distribution | 1..1 | MBS Application | The | | method | | Provider | distribution | | | | | method (as | | | | | defined in | | | | | clause 6) of | | | | | the MBS | | | | | Distribution | | | | | Session from | | | | | which this | | | | | announcement is | | | | | derived. | +-----------------+-------------+-----------------+-----------------+ | Session | 1..* | MBSF | Additional | | Description | | | parameters | | parameters | | | needed to | | | | | receive the MBS | | | | | Distribution | | | | | Session from | | | | | which this | | | | | announcement is | | | | | derived, | | | | | including | | | | | relevant User | | | | | Plane traffic | | | | | flow | | | | | parameters. | +-----------------+-------------+-----------------+-----------------+ | Service | 0..1 | MBSSF | The security | | protection | | | parameters for | | description | | | the MBS | | | | | Distribution | | | | | Session (see | | | | | clause W.4.2 of | | | | | TS 33.501), | | | | | including: | | | | | | | | | | - Which form | | | | | of transport | | | | | security | | | | | protection is | | | | | in force, | | | | | whether UICC | | | | | key management | | | | | (see | | | | | TS | | | | | 33.246 [19]) | | | | | is selected | | | | | and/or whether | | | | | 2G GBA security | | | | | (see | | | | | TS | | | | | 33.246 [19]) | | | | | is selected. | | | | | | | | | | - The MBS | | | | | Session Key | | | | | (MSK) | | | | | identifier and | | | | | key domain. | | | | | | | | | | - The address | | | | | of the key | | | | | management | | | | | server (FQDN of | | | | | the MBSSF) when | | | | | user plane | | | | | security is in | | | | | force. | +-----------------+-------------+-----------------+-----------------+ | NOTE: Used to | | | | | guide frequency | | | | | selection by | | | | | the UE for a | | | | | broadcast MBS | | | | | Session. | | | | +-----------------+-------------+-----------------+-----------------+
The following session announcement parameters are additionally relevant when
_Distribution method_ above indicates the Object Distribution Method:
Table 4.5.8‑2: Additional MBS Distribution Session Announcement parameters for
Object Distribution Method
+-----------------+-------------+-----------------+-----------------+ | Parameter | Cardinality | Assigner | Description | +=================+=============+=================+=================+ | Object | 0..1 | MBS Application | A schedule | | distribution | | Provider | indicating when | | schedule | | | individual | | | | | objects are to | | | | | be delivered on | | | | | the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | Present only | | | | | when this | | | | | information has | | | | | been provided | | | | | in the _Object | | | | | acquisition | | | | | identifiers_ of | | | | | the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session (see | | | | | table 4.5.6‑2). | +-----------------+-------------+-----------------+-----------------+ | Obje | 0..1 | | A URL prefix | | ct distribution | | | substituted by | | base URL | | | the | | | | | MBSTF Client | | | | | with the | | | | | _Object repair | | | | | base URL_ when | | | | | repairing | | | | | objects not | | | | | received | | | | | completely | | | | | intact from the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | Present only | | | | | when object | | | | | repair is | | | | | provisioned for | | | | | the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session. | +-----------------+-------------+-----------------+-----------------+ | Object repair | 0..1 | MBSF | The base URL of | | base URL | | | the MBS AS to | | | | | be used for | | | | | object repair | | | | | of the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session. | | | | | | | | | | Present only | | | | | when object | | | | | repair is | | | | | provisioned for | | | | | the | | | | | corresponding | | | | | MBS | | | | | Distribution | | | | | Session. | +-----------------+-------------+-----------------+-----------------+
### 4.5.9 Mapping of MBS Distribution Session to MBS Session Context
Except when it is in the _INACTIVE_ state, an MBS Distribution Session in the
MBSF is associated with an MBS Session Context in the MB-SMF. When the MBSF
invokes the _Nmbsmf_MBSSession_ service, the parameters defined in clause 6.9
of TS 23.247 [5] shall be populated as indicated in table 4.5.9‑1 below.
Table 4.5.9‑1: Mapping of baseline parameters to MBS Session Context
parameters
+------------------+------------------+--------+------------------+ | MBS Session | Source | Clause | Source parameter | | Context | | | | | parameter | | | | +==================+==================+========+==================+ | State | MBS Distribution | 4.5.6 | State. | | | Session. | | | +------------------+------------------+--------+------------------+ | Source-Specific | MBS Distribution | 4.5.6 | MBS Session | | Multicast | Session. | | Identifier | | (SSM)IP address | | | | +------------------+------------------+--------+------------------+ | TMGI | | | | +------------------+------------------+--------+------------------+ | MBS Service Area | MBS Distribution | 4.5.6 | Target service | | | Session. | | area (see | | | | | NOTE 2) | +------------------+------------------+--------+------------------+ | Area Session | Assigned by | 4.5.6 | Lo | | Identifier | MB-SMF. | | cation-dependent | | | | | service flag | +------------------+------------------+--------+------------------+ | MBS Frequency | MBS Distribution | 4.5.6 | MBS Frequency | | Selection Area | Session. | | Selection Area | | (FSA) ID | | | | | (see NOTE 1) | | | | +------------------+------------------+--------+------------------+ | MB-SMF | Not applicable | N/A | Not applicable. | | | to MB-SMF. | | | +------------------+------------------+--------+------------------+ | AMF | Discovered by | N/A | Not applicable. | | | MB-SMF | | | +------------------+------------------+--------+------------------+ | SMF | Selected by AMF. | N/A | Not applicable. | +------------------+------------------+--------+------------------+ | PCF | [Selected by | N/A | Not applicable. | | | MBSF or | | | | | MB-UPF.] | | | +------------------+------------------+--------+------------------+ | QoS (flow) | MBS Distribution | 4.5.6 | QoS information | | information | Session. | | | +------------------+------------------+--------+------------------+ | Tunnel Endpoint | Assigned by | N/A | Not applicable. | | Identifier | MB‑SMF. | | | | (TEID) | | | | | for distribution | | | | +------------------+------------------+--------+------------------+ | IP multicast and | ? | N/A | Not applicable. | | source address | | | | | for | | | | | d | | | | | ata distribution | | | | +------------------+------------------+--------+------------------+ | NG-RAN IP | Selected by | N/A | Not applicable. | | address for | MB‑SMF. | | | | d | | | | | ata distribution | | | | +------------------+------------------+--------+------------------+ | NG-RAN Node | Not applicable | N/A | Not applicable. | | ID(s) | to MB-SMF. | | | +------------------+------------------+--------+------------------+ | UE IDs | Not applicable | N/A | Not applicable. | | | to MB-SMF. | | | +------------------+------------------+--------+------------------+ | NOTE 1: | | | | | Applicable to | | | | | Broadcast MBS | | | | | Session only. | | | | | | | | | | NOTE 2: Target | | | | | service area is | | | | | signalled to the | | | | | MBSF at | | | | | reference point | | | | | Nmb10/Nmb5 in | | | | | the form of a | | | | | Tracking Area | | | | | Identifier (TAI) | | | | | list and/or Cell | | | | | ID list. | | | | | External-facing | | | | | target service | | | | | area | | | | | identification | | | | | at reference | | | | | point N33 is | | | | | translated by | | | | | the NEF into the | | | | | appropriate | | | | | form(s) as | | | | | required. | | | | +------------------+------------------+--------+------------------+
In addition, the following parameters to the _Nmbsmf_MBSSession_Create_
service operation defined in clause 9.1.3.6 of TS 23.247 [5] shall be
populated as indicated in table 4.5.9‑2 below.
Table 4.5.9‑2: Mapping of baseline parameters to Nmbsmf_MBSSession_Create
parameters
MBSSessionCreate input parameter Source Clause Source parameter
* * *
MBS Service type MBS User Service 4.5.3 Service type MBS activation time MBS
User Data Ingest Session 4.5.5 Active period MBS termination time  
Indication that any UE may join (see NOTE) MBS Distribution Session 4.5.6
Restricted membership flag [MBS Service requirements or MBS Session
information] MBS Distribution Session 4.5.3 QoS information Data Network Name
(DNN) Selected by MBSF based on MBS Application Provider authorisation. N/A
Not applicable. Single-Network Slice Selection Assistance Information
(S-NSSAI) N/A Not applicable. NOTE: Applicable to Multicast MBS Session only.
### 4.5.10 Object manifest parameters
An object manifest describes a set of objects to be distributed in an MBS
Distribution Session that is provisioned in _OBJECT_COLLECTION_ or
_OBJECT_CAROUSEL_ operating mode. For each such object, the baseline
properties listed in table 4.5.10‑1 below are defined.
Table 4.5.10‑1: Baseline parameters of object manifest
+--------------------------+-------------+--------------------------+ | Parameter name | Cardinality | Description | +==========================+=============+==========================+ | Location | 1..1 | The URL from which the | | | | object is to be ingested | | | | by the MBSTF. | +--------------------------+-------------+--------------------------+ | Repetition period | 0..1 | The periodicity of the | | | | object in the MBS | | | | Distribution Session, | | | | expressed in appropriate | | | | time units (see NOTE). | | | | | | | | If omitted, the MBSTF | | | | shall determine the | | | | periodicity of the | | | | object. | +--------------------------+-------------+--------------------------+ | Update period | 0..1 | The maximum period of | | | | time that the MBSTF | | | | waits after acquiring | | | | the object and before | | | | checking for changes to | | | | the object at its origin | | | | _Location_ (see NOTE). | | | | | | | | In case of conflicting | | | | information, cache | | | | control metadata | | | | provided by the object | | | | origin should take | | | | precedence over this | | | | parameter. | | | | | | | | If omitted, the MBSTF | | | | shall not attempt to | | | | check for updates to the | | | | object. | | | | | | | | Any changes to the | | | | object that are detected | | | | by the MBSTF shall be | | | | reflected in the MBS | | | | Distribution Session at | | | | the earliest opportunity | | | | and the replacement of | | | | an object with a more | | | | up-to-date version shall | | | | be signalled to the | | | | MBSTF Client. | +--------------------------+-------------+--------------------------+ | Earliest fetch time | 0..1 | The MBSTF shall fetch | | | | the object no sooner | | | | than this time. | | | | | | | | If omitted, the object | | | | shall be present at the | | | | origin indicated by | | | | _Location_ and the MBSTF | | | | may fetch it at a time | | | | of its choosing. | +--------------------------+-------------+--------------------------+ | Latest fetch time | 0..1 | The MBSTF shall fetch | | | | the object no later than | | | | this time. | | | | | | | | If omitted, the object | | | | shall be present at the | | | | origin indicated by | | | | _Location_ and the MBSTF | | | | may fetch it at a time | | | | of its choosing. | +--------------------------+-------------+--------------------------+ | NOTE: Not applicable to | | | | _OBJECT_COLLECTION_ | | | | operating mode. | | | +--------------------------+-------------+--------------------------+
In addition, it shall be possible to specify an _update period_ for the object
manifest itself.
\- When a pull-based object acquisition method is provisioned, the MBSTF shall
poll for updates to the object manifest at this interval.
\- When a push-based object acquisition method is provisioned, any update
period indicated in the object manifest is ignored by the MBSTF.
## 4.6 Dynamic model
### 4.6.1 MBS Distribution Session life-cycle
The life-cycle model for the MBS Distribution Session is depicted in figure
4.6.1‑1 below. The current state of a provisioned MBS Distribution Session is
reflected in the _state_ parameter of the information entities maintained by
the MBSF and the MBSTF, and is exposed to the MBS Application Provider via the
_Nmbsf_ service.
Figure 4.6.1‑1: Life-cycle model for MBS Distribution Session
1\. An MBS Distribution Session shall be in the _INACTIVE_ state when it is
first provisioned in the MBSF by the MBS Application Provider. The MBSF shall
provision a corresponding MBS Distribution Session entity in the MBSTF. This
replica of the MBS Distribution Session shall also be in the _INACTIVE_ state.
If the provisioned end date--time of the parent MBS User Data Ingest Session
is in the past, the MBS Distribution Session shall immediately expire and
shall transition to a state in which it is no longer provisioned.
It is an error for the end date--time of the parent MBS User Data Ingest
Session to be prior to the start date--time. The MBSF shall reject such a
configuration at the time of provisioning.
2\. Shortly before the provisioned start date--time of the parent MBS User
Data Ingest Session (or immediately if the start date--time is in the past at
the point of provisioning) the MBS Distribution Session shall transition into
the _ESTABLISHED_ state.
At this point:
a. The MBSF shall reserve resources for the MBS Distribution Session in the
MBS System by interacting with the MB‑SMF at reference point Nmb1 using the
procedures defined in clause 7.1.1 of TS 23.247 [5].
b. The MBSF shall establish the MBS Distribution Session in the MBSTF by
invoking the MBS Distribution Session establishment procedure on the _Nmbstf_
service at reference point Nmb2 using the procedures defined in clause 5.4 of
the present document. As a result, the MBSTF shall attempt to establish an MBS
User Data Ingest Session with the upstream data source at reference point Nmb8
and may commence ingesting data (but not distributing it).
NOTE: Successfully establishing the MBS User Data Ingest Session requires, in
the case of the Object Distribution Method, successful retrieval of at least
an initial object from the MBS Application Provider via reference point Nmb8.
In the case of the Packet Distribution Method, successful establishment of the
MBS User Data Ingest Session may require a data ingest tunnel to be
established successfully with the MBS Application Provider at reference point
Nmb8 and receipt of at least one data packet through that tunnel.
If either of these procedures fail, a suitable error shall be returned to the
MBSF. Any successfully reserved resources in the MBS System shall be released
and the MBS Distribution Session shall return to the _INACTIVE_ state.
Otherwise, the MBSF shall advertise the successfully established MBS
Distribution Session to MBSF Clients (either directly via MBS‑5, or indirectly
via MBS‑8, depending on the provisioned advertisement mode) by means of an MBS
User Service Announcement that it has compiled. An MBS Client in receipt of
this advertisement may activate reception of the established MBS Distribution
Session at this point (but will not yet receive any MBS data packets).
3\. At the provisioned start date--time of the parent MBS User Data Ingest
Session (or immediately if the start date--time is in the past at the point of
provisioning) the MBS Distribution Session shall transition into the _ACTIVE_
state.
The MBSF shall inform the MBSTF of this state transition by invoking the MBS
Distribution Session activation procedure on the _Nmbstf_ service at reference
point Nmb2, as specified in clause 5.4 of the present document. As a result,
the MBSTF shall commence sending MBS data packets to the MB‑UPF at reference
point Nmb9, and any MBS Clients that have activated reception of the
previously advertised MBS Distribution Session in step 2 above may start to
receive MBS data packets at reference point MBS‑4‑MC.
4\. If the MBSTF encounters any error conditions when the MBS Distribution
Session is in the _ACTIVE_ state it shall notify the MBSF by invoking the MBS
Distribution Session notification procedure defined by the _Nmbstf_ service at
reference point Nmb2 per clause 5.4.
If the MBSF determines that the error is of such a severity that the MBS
Distribution Session cannot continue, it shall transition to the
_DEACTIVATING_ state.
a. The MBSF shall stop advertising the MBS Distribution Session by means of an
MBS User Service Announcement.
b. The MBSF shall inform the MBSTF of this state transition by invoking the
MBS Distribution Session deactivation procedure on the _Nmbstf_ service at
reference point Nmb2 using the procedures defined in clause 5.4 of the present
document. As a result, the MBSTF shall cease sending MBS data packets to the
MB‑UPF at reference point Nmb9.
c. The MBSF shall release the MBS Distribution Session in the MBSTF by
invoking the MBS Distribution Session release procedure on the _Nmbstf_
service at reference point Nmb2 using the procedures defined in clause 5.4 of
the present document. As a result, the MBSTF shall stop ingesting data at
reference point Nmb8 from the upstream data source. As a result of this
procedure, the MBSTF shall automatically transition to the _INACTIVE_ state.
d. The MBSF shall release resources in the MBS System associated with the MBS
Distribution Session by interacting with the MB‑SMF at reference point Nmb1
using the procedures defined in clause 7.1.1 of TS 23.247 [5]. As a result of
this procedure, the MBSF shall automatically transition to the _INACTIVE_
state.
5\. At the provisioned end date--time of the parent MBS User Data Ingest
Session (or immediately if the MBS Distribution Session or its parent MBS User
Data Ingest Session are destroyed by the MBS Application Provider earlier than
the provisioned end date--time) an MBS Distribution Session in the _ACTIVE_
state shall transition into the _DEACTIVATNG_ state and the deactivation
procedure described in steps 4a to 4d inclusive shall be followed.
Once the deactivation procedure is complete, the expired MBS Distribution
Session shall transition automatically to a state in which it is no longer
provisioned.
### 4.6.2 Notification events
During the lifecycle of a MBS User Service Session, a number of notification
messages may be sent by different Network Functions. The MBSF may modify event
information when passing on notifications from other Network Functions to the
MBS Application Provider (AF/AS) at reference point Nmb10 or (via the NEF) at
reference point Nmb5.
The events may originate from different sources:
\- If the event originates in the MB-SMF at reference point Nmb1 or in the PCF
at reference point Nmb12, it is propagated to the MBS Application Provider
(AF/AS) at reference point Nmb10 (or via the NEF at reference point Nmb5). The
MBSF conditions the event payload for external usage.
\- If the event originates in the MBSTF at reference point Nmb2, it is
propagated to the MBS Application Provider (AF/AS) at reference point Nmb10
(or via the NEF at reference point Nmb5). The MBSF conditions the event
payload for external usage.
\- If the event originates in the MBSF itself, it is propagated directly to
the MBS Application Provider (AF/AS) at reference point Nmb10 (or via the NEF
at reference point Nmb5).
The notification events listed in table 4.6.2-1 below are used by the MBSF to
notify the MBS Application Provider (AF/AS) or NEF. The relevant stimulating
reference point is indicated in brackets in the final column of the table.
Table 4.6.2-1: Notification events
+----------------------+----------------------+----------------------+ | Event | Description | Applicable | | | | reference point(s) | +======================+======================+======================+ | Session started | The MBS Session is | (Nmb1), Nmb10/Nmb5 | | | started. | | +----------------------+----------------------+----------------------+ | Session released | The MBS Session is | (Nmb1), Nmb10/Nmb5 | | | released. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBSF is starting | Nmb10/Nmb5 | | starting | to establish the MBS | | | | Distribution session | | | | at the MBSTF. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBSF failed to | Nmb10/Nmb5 | | establishment | successfully | | | failure | establish the MBS | | | | Distribution Session | | | | at the MBSTF. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBS Distribution | Nmb10/Nmb5 | | established | Session is | | | | established. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBS Distribution | (Nmb1), (Nmb2), | | service management | Session could not be | Nmb10/Nmb5 | | failure | started, for example | | | | because the | | | | necessary resources | | | | could not be | | | | allocated by the MBS | | | | System. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBS Distribution | (Nmb12), Nmb10/Nmb5 | | policy control | Session could not be | | | failure | started because of a | | | | policy | | | | a | | | | uthorization/control | | | | failure or | | | | rejection. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBS Distribution | (Nmb2), Nmb10/Nmb5 | | activated | Session is activated | | | | successfully. | | +----------------------+----------------------+----------------------+ | Distribution Session | The MBS Distribution | (Nmb2), Nmb10/Nmb5 | | deactivated | Session is | | | | deactivated. | | +----------------------+----------------------+----------------------+ | User Data Ingest | The MBSTF has | (Nmb2), Nmb10/Nmb5 | | Session established | successfully | | | | established the User | | | | Data Ingest Session. | | | | | | | | In the case of | | | | pull-based content | | | | ingest for the | | | | Object Distribution | | | | Method, the MBSTF | | | | has successfully | | | | connected at least | | | | once to the origin | | | | server at reference | | | | point Nmb8. | | | | | | | | In the case of the | | | | Packet Distribution | | | | Method or push-based | | | | content ingest for | | | | the Object | | | | Distribution Method, | | | | the MBSTF has | | | | successfully | | | | received some data | | | | at reference point | | | | Nmb8. | | +----------------------+----------------------+----------------------+ | User data ingest | The MBSTF is | (Nmb2), Nmb10/Nmb5 | | failure | expecting ingest | | | | data for an active | | | | MBS Distribution | | | | session but is not | | | | receiving data. | | +----------------------+----------------------+----------------------+ | User Data Ingest | The MBSTF has | (Nmb2), Nmb10/Nmb5 | | Session terminated | stopped the User | | | | Data Ingest Session | | | | at the end of the | | | | current active | | | | period. | | | | | | | | In the case of | | | | pull-based content | | | | ingest for the | | | | Object Distribution | | | | Method, the MBSTF | | | | has stopped pulling | | | | data. | | | | | | | | In the case of the | | | | Packet Distribution | | | | Method or push-based | | | | content ingest for | | | | the Object | | | | Distribution Method, | | | | the MBSTF is | | | | ignoring data. | | +----------------------+----------------------+----------------------+ | User Service | The MBSF advertises | Nmb10/Nmb5 | | advertisement | the User Service | | | | Announcement | | | | information to the | | | | MBS Application | | | | Provider. | | | | | | | | The event shall | | | | include the list of | | | | external service | | | | identifiers | | | | provisioned for the | | | | User Service | | | | Announcement if the | | | | _Service | | | | announcement modes_ | | | | parameter indicates | | | | unicast. | | | | | | | | The event shall | | | | include the full | | | | User Service | | | | Announcement | | | | information if the | | | | _Service | | | | announcement modes_ | | | | parameter indicates | | | | external delivery. | | +----------------------+----------------------+----------------------+
## 4.7 QoS model
How MBS User Services make use of the network Quality of Service primitives
defined in TS 23.247 [5] is for further study.
## 4.8 Security
The security protection of MBS traffic is supported by use of either a control
plane procedure or a user plane procedure at the service layer as defined in
annex W of TS 33.501 [18]. The control plane procedure is only applicable for
multicast sessions, while the user plane procedure is applicable for both
multicast sessions and broadcast sessions. The MBSSF, as a logical function
co-located with either the MBSF or the MBSTF, is responsible for key
generation, management and distribution, including both MBS Session Keys and
MBS Traffic Keys defined by [18]).
## 4.9 Interworking with eMBMS
Interworking between MBS and eMBMS is described in clause 5.2 of TS 23.247 [5]
and applies at the service layer in cases where the same Multicast/Broadcast
service is provided simultaneously via eMBMS and MBS. Figure 4.9‑1 depicts a
combined network architecture based on figure 4.2.1-1 in the present document
and figure 5.2-1 in TS 23.247 [5].
Figure 4.9‑1: MBS--eMBMS interworking system architecture
To support MBS-eMBMS interworking according to the description in clause 5.2
of TS 23.247 [5], the MBS User Services architecture supports the following
functionality:
1\. MBS User Services are provisioned in the MBSF via reference point Nmb10
per the present document. eMBMS User Services are separately provisioned in
the MBSF at reference point xMB-C per TS 26.348 [6] or at reference point
MB2-C per TS 23.468 [12]. A common TMGI is used in the MBS System and in the
eMBMS System. The two User Services should be provisioned to ingest the same
content if service continuity between the MBS System and the eMBMS System is
required.
2\. Signalling from the MBSF to the MBS Client is present in the MBS User
Service Announcement indicating that the equivalent User Service is also
available via eMBMS. By this, a UE that implements both an MBS Client and an
eMBMS Client may choose to receive the service from either network, and may
dynamically switch between them according to varying reception conditions.
Such an architecture is shown in figure 4.9‑2.
3\. Content for the provisioned MBS User Service is ingested logically by the
MBTSF at reference point Nmb8 per the present document. Content for the
provisioned eMBMS User Service is ingested logically by the MBSTF at reference
point xMB-U per TS 26.348 [6] or at reference point MB-2 per TS 23.468 [12].
If these reference points are compatible, the content is ingested once to
satisfy both logical ingests.
4\. MBS User Services distribution methods are compatible with eMBMS delivery
methods such that the same ingested content can be delivered to an MBS Client
and to an eMBMS Client. UEs supporting only eMBMS are served by this
architecture as well.
Figure 4.9‑2: MBS--eMBMS interworking reference architecture
# 5 Procedures for 5G Multicast--Broadcast User Services
## 5.1 General
This clause defines the high-level procedures for 5G Multicast--Broadcast User
Services. All events referred to in call flows are listed in table 4.6.2-1.
## 5.2 High-level baseline procedures
The high-level baseline procedures for MBS User Services are shown in figure
5.2-1.
NOTE: In the interests of brevity, the prefix MBS is omitted from the numbered
steps in the figure.
Figure 5.2-1: MBS User Service high-level baseline procedures
The basic procedures are as follows:
1\. The MBS Application Provider provisions an Application Service as an MBS
User Service by invoking the _Nmbsf_ service on the MBSF.
2\. The MBSF provisions one or more MBS Distribution Session by invoking the
_Nmbstf_ on the MBSTF.
3\. The MBSF provides an MBS User Service Announcement document that may be
accessed by the MBS Client of interested UEs.
4\. The MBS Application Provider informs the MBS-Aware Application via MBS-8
that the specific Application Service can be accessed via an MBS User Service
by means of an Application Service Announcement.
[Alternatively, the MBSF Client synthesises the Application Service
Announcement from the User Service Announcement received in step 3 and informs
the MBS-Aware Application via MBS‑6 that the Application Service can be
accessed via an MBS User Service.]
5\. The MBS Application Provider creates an MBS User Data Ingest Session with
the MBSTF (via the MBSF) and the latter ingests the user data via Nmb8.
6\. The MBS-Aware Application requests the MBS Client to access a specific MBS
User Service by invoking procedures at MBS-6.
7\. Optional: If it has not already been received in step 3 above, the MBSF
Client may discover additional access information about this MBS User Service
by querying the MBSF via MBS-5.
8\. The MBSF Client provides the MBS Distribution Session information acquired
as part of the User Service Announcement information to the MBSTF Client via
MBS-6′.
9\. The MBSTF Client activates reception of the MBS Distribution Session.
10\. The MBSF Client continuously handles the MBS Distribution Session data
based on updates received via MBS‑5.
11\. The MBSTF Client receives MBS Distribution Session data via MBS-4‑MC as
part of the MBS Distribution Session.
12\. The MBSTF provides the MBS Distribution Session data to the MBS-Aware
Application via MBS-7 in an MBS Application Data Session.
13\. The MBS-Aware Application controls the MBS User Service by invoking MBS
Application Service Control procedures on the MBSF Client via MBS-6.
## 5.3 Procedures for User Service provisioning
The procedure begins with the MBS Application Provider provisioning an MBS
User Service and, within its scope, a set of MBS User Data Ingest Sessions, as
shown in figures 5.3‑1 and 5.3.‑2 below.
Figure 5.3‑1: Call flow for MBS User Service provisioning by MBS Application
Provider
First, the MBS Application Provider provisions a new MBS User Service Session
in the MBS System:
1\. To support Use Cases (e.g. Group Communication) where there is a
requirement for TMGI allocation to be managed outside the MBS System, the MBS
Application Provider may pre-allocate a TMGI for some or all of the MBS
Distribution Sessions declared in step 3 below by invoking the
_Nmbsmf_TMGI_Allocate_ service operation on the MB‑SMF at reference point
Nmb13 (or N33+N29mb, if invoked via the NEF), as specified in clause 9.1.2.2
of TS 23.247 [5].
2\. The MBS Application Provider invokes the _Nmbsf_MBSUserService_Create_
service operation at reference point Nmb10 (or N33+Nmb5 if invoking via the
NEF) to create a new MBS User Service, as defined in clause 4.5.3.
Immediately, or at some later time, the MBS Application Provider creates at
least one MBS User Data Ingest Session (as defined in clause 4.5.5) within the
scope of the MBS User Service created in step 2 above:
3\. The MBS Application Provider creates an MBS User Data Ingest Session by
invoking the _Nmbsf_MBSUserDataIngestSession_Create_ service operation at
reference point Nmb10 (or N33+Nmb5, if invoked via the NEF).
The MBS User Data Ingest Session optionally includes a schedule of start and
end times referred to as _active periods_.
The MBS User Data Ingest Session comprises the details of one or more MBS
Distribution Session(s), as defined in clause 4.5.6. Each such MBS
Distribution Session fully specifies one of the distribution methods defined
in clause 6 and may optionally nominate a TMGI to be used if one was pre-
allocated in step 1 above.
4\. The MBS Application Provider subscribes to status events from the MBSF
relating to the MBS User Data Ingest Session just created by invoking
_Nmbsf_MBSUserDataIngestSession_StatusSubscribe_ service operation at
reference point Nmb10 (or N33+Nmb5, if invoked via the NEF).
5\. Void.
Shortly before a provisioned MBS User Data Ingest session is scheduled to
become active (see clause 4.5.5), or immediately if no schedule of active
periods is provisioned, the MBSF establishes in the MBSTF all MBS Distribution
Sessions comprising that MBS User Data Ingest Session as shown in figure 5.3‑2
below.
Figure 5.3‑2: Call flow for MBS User Service internal provisioning
For each such MBS Distribution Session of a parent MBS User Data Ingest
session:
6\. If no MBS Session ID was nominated by the MBS Application Provider in step
1 above, the MBSF may allocate a TMGI for it at this point by invoking the
_Nmbsmf_TMGI_Allocate_ service operation on the MB‑SMF at reference point
Nmb1, as specified in clause 9.1.2.2 of TS 23.247 [5].
7\. The MBSF creates an MBS Session to reserve resources in the MBS System for
the MBS Distribution Session by invoking the _Nmbsmf_MBSSession_Create_
service operation on the MB‑SMF at reference point Nmb1, as specified in
clause 9.1.3.6 of TS 23.247 [5]). The MBS Session ID provided for the MBS
Distribution Session in step 1 or reserved in step 6 above is provided as an
input parameter, if available. If needed, the MB‑SMF allocates a TMGI as a
side-effect of this operation. The MBSF determines the other input parameters
as specified in clause 4.5.9.
8\. For MBS Distribution Sessions of _Service type_ broadcast, the MB-SMF
notifies the MBSF upon successful establishment of the corresponding MBS
Session(s).
9\. Once it is satisfied that the Broadcast MBS Session has been successfully
established, the MBSF notifies the MBS Application Provider about the
successful establishment of the Broadcast MBS Session(s) corresponding to the
MBS Distribution Session using one or more _Session started_ events.
The following steps do not need to wait for the completion of step 8:
10\. The MBSF creates the MBS Distribution Session in the MBSTF by invoking
the _Nmbstf_‌MBS‌Distribution‌Session_‌Create_ service operation at reference
point Nmb2. This is a mirror of the entity in the MBSF (see clause 4.5.6).
\- In the case of the Object Distribution Method with push-based _Object
acquisition method_ , the response includes additional content ingest
parameters chosen by the MBSTF for this MBS Distribution Session (see _Object
ingest base URL_ in table 4.5.6‑2).
\- In the case of the Packet Distribution Method, the response includes
additional content ingest parameters chosen by the MBSTF for this MBS
Distribution Session (see _MBSTF ingest endpoint addresses_ in table 4.5.6‑3).
11\. The MBSF invokes the _Nmbsf_MBSUserDataIngestSession_‌StatusNotify_
service operation at reference point Nmb10 (or Nmb5+N33, if invoked via the
NEF) to inform the MBS Application Provider of the content ingest parameters
that have been chosen for this MBS Distribution Session using the
_Distribution Session starting_ event (see _MBSTF ingest endpoint addresses_
in table 4.5.6‑3).
12\. The MBSF subscribes to status events from the MBSTF relating to the MBS
Distribution Session just created by invoking the
_Nmbstf_MBSDistributionSessionStatusSubscribe_ service operation at reference
point Nmb2.
13\. In the case of the Packet Distribution Method and pull-based content
ingest using the Object Distribution Method, the MBSTF attempts to establish
content ingest from the MBS Application Provider at reference point Nmb8
according to the ingest parameters and distribution method provisioned for the
MBS Distribution Session in question (see table 4.5.6‑1).
On success, the state of the MBS Distribution Session in the MBSTF becomes
_ESTABLISHED_ ; on failure, it remains _INACTIVE_ (see step 2 in clause
4.6.1).
NOTE: Success of this step varies according to the provisioned distribution
method and its configuration. Success may, for example, be defined as
establishing a network association with the MBS Application Provider (using
the additional parameters defined in table 4.5.6‑3), or it may require
successful ingest of an initial object from the MBS Application Provider
(using the additional parameters defined in table 4.5.6‑2).
14\. The MBSTF invokes the _Nmbstf_MBSDistributionSession_StatusNotify_
callback service operation at reference point Nmb2 to inform the MBSF of the
(un)successful establishment of content ingest using the _Distribution Session
established_ event.
On success, the state of the MBS Distribution Session in the MBSF becomes
_ESTABLISHED_ ; on failure, it remains _INACTIVE_ (see step 2 in clause
4.6.1).
15\. The MBSF invokes the _Nmbsf_MBSUserDataIngestSession_StatusNotify_
callback service operation at reference point Nmb10 (or Nmb5+N33, if invoked
via the NEF) to inform the MBS Application Provider of the (un)successful
establishment of content ingest for the MBS Distribution Session in the
context of its parent MBS User Data Ingest Session using either the
_Distribution Session established_ event or _Distribution Session
establishment failure_ event, as appropriate.
16\. If content ingest was established successfully in step 11 above, the MBSF
compiles the metadata relating to this MBS Distribution Session into an MBS
Distribution Session Announcement, as defined in clause 4.5.8.
When the MBSF has completed its attempt to configure all MBS Distribution
Sessions required by the parent MBS User Data Ingest Session:
17\. The MBSF invokes the _Nmbsf_MBSUserDataIngestSession_StatusNotify_
callback service operation at reference point Nmb10 (or Nmb5+N33, if invoked
via the NEF) to inform the MBS Application Provider of the (un)successful
establishment of all MBS Distribution Sessions of the parent MBS User Data
Ingest Session using either the _User Data Ingest Session established_ event
or _User data ingest failure_ event, as appropriate.
## 5.3A Procedures for User Service Announcement Channel provisioning
The procedures depicted in figure 5.3A‑1 are optionally followed in
deployments where an MBS User Service Announcement Channel is provided at
reference point MBS‑4‑MC as part of the MBS System. Where deployed, the MBS
User Service Announcement Channel shall be provisioned as an MBS Distribution
Session using the _OBJECT_CAROUSEL_ operating mode of the Object Distribution
Method.
NOTE: This is a special case of the procedures for provisioning an MBS
Distribution Session defined in steps 6 to 15 of clause 5.3. At reference
point MBS-11, the MBSF in this case acts in a similar manner to an MBS
Application Provider (AF/AS) at reference point Nmb8 using pull-based object
ingest.
Figure 5.3A‑1: Procedures for User Service Announcement provisioning
The steps are as follows:
1\. The MBSF allocates a TMGI for the MBS User Service Announcement Channel by
invoking the _Nmbsmf_TMGI_Allocate_ service operation on the MB SMF at
reference point Nmb1, as specified in clause 9.1.2.2 of TS 23.247 [5].
2\. The MBSF creates an MBS Session to reserve resources in the MBS System for
the MBS User Service Announcement Channel by invoking the
_Nmbsmf_MBSSession_Create_ service operation on the MB‑SMF at reference point
Nmb1, as specified in clause 9.1.3.6 of TS 23.247 [5]). The MBS Session ID
reserved in the previous step is provided as an input parameter. The MBSF
determines the other input parameters as specified in clause 4.5.9.
3\. The MBSF creates the MBS Distribution Session in the MBSTF by invoking the
_Nmbstf_‌MBS‌Distribution‌Session_‌Create_ service operation at reference
point Nmb2. This is a mirror of the entity in the MBSF (see clause 4.5.6). The
Object Distribution Method and carousel operating mode are indicated. Either
push- or pull-based object acquisition may be provisioned. A single object
acquisition identifier is provisioned. In the case of pull-based object
acquisition, this is the path, relative to the _Object ingest base URL_ , of
an object manifest resource available for retrieval from the MBS AF. In the
case of push-based object acquisition it is a URL path, relative to the
_Object ingest base URL_ , to which the object manifest will be published by
the MBSF.
4\. The MBSF subscribes to status events from the MBSTF relating to the MBS
Distribution Session just created by invoking the
_Nmbstf_MBSDistributionSessionStatusSubscribe_ service operation at reference
point Nmb2.
5\. If pull-based ingest was provisioned in step 3, the MBSTF attempts to
establish content ingest from the MBS AF at reference point MBS‑11 according
to the ingest parameters and distribution method provisioned in step 3 (see
tables 4.5.6‑1 and 4.5.6‑2).
6\. The MBSTF invokes the _Nmbstf_MBSDistributionSession_StatusNotify_
callback service operation at reference point Nmb2 using the _Distribution
Session established_ event to inform the MBSF of the (un)successful
establishment of content ingest with the MBS AF.
As a consequence of this provisioning, the MBSTF now begins polling for
updates to the object manifest (see step 2B in clause 5.4) if pull-based
object acquisition was provisioned in step 3. If push-based object acquisition
was specified, the MBSTF instead waits for an object manifest with the
provisioned URL path to be published to it.
## 5.4 Procedures for User Service advertisement/discovery
At this point, the MBS User Service Session is advertised to the MBSF Client,
as shown in figure 5.4‑1 below, using one or more of the User Service
advertisement modes defined in clause 4.2.4.
Figure 5.4‑1: Call flow for MBS User Service advertisement/discovery
The steps are as follows:
1\. The MBSF compiles a composite MBS User Service Announcement from the set
of individual MBS Distribution Session Announcements compiled in step 14 of
clause 5.3. The compiled MBS User Service Announcement describes the current
set of MBS Distribution Sessions that comprise the active MBS User Data Ingest
Session. The advertised start date--time is the next start time indicated in
the MBS User Data Ingest Session schedule of active periods, or the current
date--time if no schedule is provisioned.
1a. The MBSF publishes the compiled MBS User Service Announcement to the MBS
AF via reference point MBS‑3 (not specified).
2\. The MBS User Service Announcement is distributed using one or more of the
following mechanisms:
A. The MBSF passes back to the MBS Application Provider a list of _External
service identifiers_ identifying the MBS User Service in question by invoking
the _Nmbsf_MBS‌UserData‌IngestSession_‌StatusNotify_ callback service
operation at reference point Nmb10 (or Nmb5+N33, if invoked via the NEF) using
the _User Service advertisement_ event. The MBS Application Provider
advertises an external service identifier to the MBS-Aware Application by
private means at reference point MBS‑8.
When the MBS-Aware Application subsequently selects the MBS User Service, it
invokes a suitable client API at reference point MBS‑6, passing the external
service identifier as a parameter. As a result, the MBS Client fetches MBS
User Service Announcement at reference point MBS‑5 using the provided external
service identifier.
B. An object manifest for the MBS User Service Announcement Channel is
compiled by the MBSF. This lists all of the MBS User Service Announcements to
be made available in the corresponding MBS Distribution Session and indicates
that the objects listed should be polled for updates.
If the MBS User Service Announcement Channel is provisioned for pull-based
object acquisition (illustrated), the object manifest for the MBS User Service
Announcement Channel is published by the MBSF to the MBS AF via reference
point MBS‑3 (not specified) and made available as a resource for unicast
retrieval by the MBSTF via reference point MBS‑11 at the location indicated by
the object acquisition identifier provisioned for the corresponding MBS
Distribution Session (see step 3 in clause 5.3A). The object manifest is
pulled by the MBSTF from the MBS AF at this reference point, as defined in
clause 4.3.3.2. The MBSTF continues to monitor the MBS AF for changes to the
object manifest and retrieves a new copy as needed.
If the MBS User Service Announcement Channel is provisioned for push-based
object acquisition (not illustrated), the object manifest for the MBS User
Service Announcement Channel is published by the MBSF to the provisioned URL
path on the MBSTF via reference point Nmb2, as defined in clause 4.3.3.2,
whenever it changes.
For both pull- and push-based acquisition, the MBSF invokes the
_Nmbsf_MBS‌UserData‌IngestSession_‌StatusNotify_ callback service operation at
reference point Nmb10 (or Nmb5+N33, if invoked via the NEF) using the _User
Service advertisement_ event to inform the MBS Application Provider that the
MBS User Data Ingest Session is being advertised. The notification conveys a
list of _External service identifiers_ identifying the MBS User Service in
question.
For both pull- and push-based acquisition, the MBS User Service Announcement
itself is pulled from the MBS AF by the MBSTF at reference point MBS‑11 as
directed by the object manifest for inclusion in the MBS User Service
Announcement Channel carousel, as defined in clause 4.3.3.2. In addition, the
object manifest may direct the MBSTF to fetch ancillary objects (e.g.,
Application Service Entry Point documents referenced by the MBS User Service
Announcement and/or MPEG‑DASH initialisation segments) for inclusion in the
MBS User Service Announcement Channel carousel.
Because it is directed to do so by the object manifest, the MBSTF polls the
MBS AF for changes to these objects and retrieves new copies as needed to
replace the previous versions in the MBS User Service Announcement Channel
carousel.
As a result, the most up-to-date MBS User Service Announcement and any
ancillary objects are delivered repeatedly by the MBSTF to the MBSTF Client
via the MBS User Service Announcement Channel at reference point MBS‑4‑MC
using the Object Distribution Method. Subsequently, by invoking a suitable
client API at reference point MBS-7′ API, the MBS User Service Announcement is
forwarded by the MBSTF Client to the MBSF Client.
Having earlier received the _User Service advertisement_ event, the MBS
Application Provider advertises one of the _External service identifiers_
identifying the MBS User Service (see table 4.5.7‑1) to the MBS-Aware
Application by private means at reference point MBS‑8.
The MBS-Aware Application subsequently uses this identifier to select the MBS
User Service by invoking a suitable client API at reference point MBS‑6.
C. The full MBS User Service Announcement is passed back to the MBS
Application Provider by invoking the
_Nmbsf_MBSUserDataIngestSession_StatusNotify_ callback service operation at
reference point Nmb10 (or Nmb5+N33, if invoked via the NEF) using the _User
Service advertisement_ event.
As a result, the MBS Application Provider advertises the MBS User Service
Announcement to the MBS-Aware Application by private means at reference point
MBS‑8.
When the MBS-Aware Application subsequently selects the MBS User Service, it
invokes a suitable client API at reference point MBS‑6, passing the full MBS
User Service Announcement as a parameter.
The MBSF may rescind an MBS User Service Announcement at any time for
operational reasons.
## 5.5 Procedures for User Service data transfer
### 5.5.1 MBS Distribution Session activation
At the next start time indicated in the MBS User Data Ingest Session schedule
of active periods, or immediately if no schedule is provisioned, the MBSF
activates all MBS Distribution Sessions comprising that MBS User Data Ingest
Session, as shown in figures 5.5‑1 and 5.5‑2 below.
Figure 5.5‑1: Call flow for MBS Distribution Session activation by MBSF
For each such MBS Distribution Session:
1\. For MBS Distribution Sessions of _Service type_ multicast, the MBSF
(re)activates the corresponding Multicast MBS Session in the MB‑SMF, allowing
UEs to join the MBS Session(s).
2\. Once it is satisfied that the Multicast MBS Session has been successfully
established or (re)activated, the MBSF notifies the MBS Application Provider
about the successful establishment of the MBS Session(s) corresponding to the
MBS Distribution Session using one or more _Session started_ events.
3\. The MBSF invokes the _Nmbstf_MBSDistributionSession_Update_ service
operation on the MBSTF at reference point Nmb2, updating the current state of
the MBS Distribution Session to _ACTIVE_ (see step 3 in clause 4.6.1). The
state of the MBS Distribution Session in the MBSTF remains _ACTIVE_ (see step
3 in clause 4.6.1); on failure, it transitions through _DEACTIVATING_ to
_INACTIVE_ (see step 4 in clause 4.6.1).
4\. The MBSTF notifies the MBSF about the successful activation of the MBS
Distribution Session by sending the _Distribution Session activated_ event.
5\. The MBSF notifies the MBS Application Provider about the successful
activation of the MBS Distribution Session by sending the _Distribution
Session activated_ event.
6\. As a direct result of step 3, the MBSTF begins to ingest content from the
MBS Application Provider (if the pull-based _Object acquisition method_ is
provisioned) or starts accepting content published by the MBS Application
Provider (if the Packet Distribution Method or the push-based _Object
acquisition method_ is provisioned).
7\. The MBSTF may process the ingested content according to the provisioned
distribution method, as defined in clause 4.3.3. This may optionally include
the computation of Application Level FEC (AL‑FEC) information.
8\. The MBSTF distributes the resulting MBS data at reference point MBS‑4‑MC.
This is achieved by passing the MBS data to the MB‑UPF via reference point
Nmb9 and/or to the MBMS‑GW via reference point SGi‑mb, according to the
protocol stacks defined in clause 8.2 of TS 23.247 [5].
9\. On unsuccessful content ingest and MBS data distribution, the state of the
MBS Distribution Session in the MBSTF may transition through _DEACTIVATING_ to
_INACTIVE_ (see step 4 in clause 4.6.1) in case of a severe fault.
Regardless of the severity of the fault, the MBSTF invokes the
_Nmbstf_MBSDistributionSession_StatusNotify_ callback service operation at
reference point Nmb2 using the _User data ingest failure_ event to inform the
MBSF of the failure.
10\. The MBSF invokes the _Nmbsf_MBSUserDataIngestSession_StatusNotify_
callback service operation at reference point Nmb10 (or Nmb5+N33, if invoked
via the NEF) using the _User data ingest failure_ event to inform the MBS
Application Provider of the failure.
### 5.5.2 MBS User Service reception activation
The MBS Client in the UE activates reception of an MBS User Service by
establishing an MBS User Service Session between the MBSF Client and the MBSF,
and consequently activating reception of one or more MBS Distribution Sessions
by the MBSTF Client that are currently being distributed by the MBSTF. This
call flow is shown in figure 5.5‑2 below:
Figure 5.5‑2: Call flow for MBS User Service activation by MBS Client
The steps are as follows:
11\. The MBS-Aware Application invokes a client API exposed by the MBSF Client
at reference point MBS-6 to activate the MBS User Service Session.
If the MBS User Service Announcement was received by the MBS-Aware Application
in step 2c in clause 5.4, this is passed as one of the parameters in the API
call.
Otherwise, the target service is identified by one of the external service
identifiers in the MBS User Service entity (see clause 4.5.3) and this
identifier is used by the MBSF Client to locate an MBS User Service
Announcement obtained according to step 2a or step 2b in clause 5.4.
For each MBS Distribution Session listed in the composite MBS User Service
Announcement:
12\. The MBSF Client invokes a client API exposed by the MBSTF Client at
reference point MBS‑6′ to activate reception of the MBS Distribution Session
in question. The Session Description parameters needed to receive the MBS
Distribution Session are taken from the relevant MBS Distribution Session
Announcement which, in turn, is extracted from the composite MBS User Service
Announcement.
13\. MBS data from the MBSTF is received by the MBSTF Client at reference
point MBS‑4‑MC.
### 5.5.3 MBS User Service reception termination
The MBS Client in the UE terminates reception of an MBS User Service by
deactivating the MBS User Service Session between the MBSF Client and the
MBSF, and consequently deactivating reception of all MBS Distribution Sessions
currently being received by the MBSTF Client within the scope of that MBS User
Service Session. This call flow is shown in figure 5.5.3-1 below:
Figure 5.5.3‑1: Call flow for MBS User Service activation by MBS Client
The steps are as follows:
14\. The MBS-Aware Application invokes a client API exposed by the MBSF Client
at reference point MBS-6 to deactivate the MBS User Service Session. The
target service is identified by one of its external service identifiers.
For each MBS Distribution Session:
15\. The MBSF Client invokes a client API exposed by the MBSTF Client at
reference point MBS‑6′ to deactivate reception of the MBS Distribution Session
in question.
16\. As a consequence of the previous step, MBS data from the MBSTF is no
longer received by the MBSTF Client at reference point MBS‑4‑MC.
### 5.5.4 MBS Distribution Session deactivation
At the next end time indicated in the MBS User Data Ingest Session schedule of
active periods, the MBSF deactivates all MBS Distribution Sessions comprising
that MBS User Data Ingest Session. This call flow is shown in figure 5.5‑3
below:
{width="6.695138888888889in" height="5.608333333333333in"}
Figure 5.5‑3: Call flow for MBS Distribution Session deactivation by MBSF
17: (Optional) The MBS Application Provider may explicitly terminate the MBS
User Data Ingest Session at any time.
The steps for deactivation of each MBS Distribution Session are as follows:
18\. The MBSF invokes the _Nmbstf_MBSDistributionSession_Update_ service
operation on the MBSTF at reference point Nmb2, updating the current state of
the MBS Distribution Session to _DEACTIVATING_ (see step 5 in clause 4.6.1).
19\. The MBSTF notifies the MBSF about the successful deactivation of the MBS
Distribution Session by sending the _Distribution Session deactivated_ event.
20\. When _Session type_ is broadcast or if the current period is the last in
the schedule, the MBSF tears down the MBS Session(s) corresponding to the MBS
Distribution Session.
21: When _Session type_ is multicast and the current period is not the last
active period in the schedule, the MBSF deactivates the MBS Session
corresponding to the MBS Distribution Session in question.
22\. Once it has completed sending the data it had already ingested, the MBSF
notifies the MBS Application Provider about the deactivation of the MBS
Distribution Session by sending the _Distribution Session deactivated_ event.
Finally, once all MBS Distribution Sessions in the scope of the parent MBS
User Data Ingest Session have been torn down:
23\. The MBSF notifies the MBS Application Provider about the termination of
data ingest by sending the _User Data Ingest Session terminated_ event.
## 5.6 Procedure for User Service data repair
In the case of the Object Distribution Method (as defined in clause 6.1), the
MBSTF Client may collaborate with the MBS AS at reference point MBS‑4‑UC to
recover lost portions of content corresponding to MBS data that was not
successfully received by the MBSTF Client at reference point MBS‑4‑MC (see
step 9 in clause 5.5).
The procedure for data repair is illustrated in figure 5.6‑1 below:
Figure 5.6-1: Call flow for MBS User Service data repair
# 6 MBS User Services distribution methods
## 6.1 Object Distribution Method
The Object Distribution Method is used to deliver binary objects to the MBS
Client over an MBS Session that have been received from the MBS Application
Provider over reference point Nmb8.
The following Use Cases are supported:
\- Single-shot object delivery.
\- Delivering a root object and its dependent objects as a collection, e.g. a
web page and all the assets needed to render it.
\- Object carouselling for object delivery, including updates of objects.
\- Real-time object streaming, for example for regular-latency or low-latency
streaming delivery. In the latter case, the objects distributed may be CMAF
segments as defined by the 5G Media Streaming DASH Interoperability Point
specified in clause 7.3.11 of TS 26.247 [10].
The operating modes for the Object Distribution Method are defined in table
6.1‑1 below.
Table 6.1‑1: Summary of operating modes for Object Distribution Method
+----------------------+----------------------+----------------------+ | Distribution method | Operating mode | Description | +======================+======================+======================+ | _OBJECT_ | _OBJECT_SINGLE_ | Each object ingested | | | | by the MBSTF is | | | | distributed once. | | | | | | | | Either pull-based | | | | and push-based | | | | object acquisition | | | | methods may be | | | | provisioned in | | | | combination with | | | | this operating mode. | | | | | | | | When the pull-based | | | | object acquisition | | | | method is | | | | provisioned, the MBS | | | | Distribution Session | | | | parameters (see | | | | table 4.5.6‑2) shall | | | | cite a set of one or | | | | more object URLs as | | | | _Object acquisition | | | | identifiers_. | | | | | | | | When the push-based | | | | object acquisition | | | | method is | | | | provisioned, the set | | | | of _Object | | | | acquisition | | | | identifiers_ shall | | | | be empty. | +----------------------+----------------------+----------------------+ | | _OBJECT_COLLECTION_ | A set of objects | | | | described by a | | | | manifest (see NOTE) | | | | is ingested by the | | | | MBSTF and | | | | distributed once. | | | | | | | | Either pull-based | | | | and push-based | | | | object acquisition | | | | methods may be | | | | provisioned in | | | | combination with | | | | this operating mode. | | | | | | | | When the push-based | | | | object acquisition | | | | method is | | | | provisioned, the | | | | object manifest | | | | (only) shall be | | | | pushed to the MBSTF; | | | | the objects | | | | referenced by the | | | | object manifest | | | | shall be pulled. | | | | | | | | The MBS Distribution | | | | Session parameters | | | | (see table 4.5.6‑2) | | | | shall cite a single | | | | object manifest URL | | | | in _Object | | | | acquisition | | | | identifiers_. | +----------------------+----------------------+----------------------+ | | _OBJECT_CAROUSEL_ | A set of one or more | | | | objects described by | | | | a manifest | | | | (see NOTE) is | | | | ingested by the | | | | MBSTF and | | | | distributed | | | | according to a | | | | repetition pattern | | | | specified in the | | | | manifest. | | | | | | | | Any change to an | | | | object during the | | | | course of the MBS | | | | Distribution Session | | | | is reflected in the | | | | distribution at the | | | | next available | | | | opportunity. | | | | | | | | Either pull-based | | | | and push-based | | | | object acquisition | | | | methods may be | | | | provisioned in | | | | combination with | | | | this operating mode. | | | | | | | | When the push-based | | | | object acquisition | | | | method is | | | | provisioned, the | | | | object manifest | | | | (only) shall be | | | | pushed to the MBSTF; | | | | the objects | | | | referenced by the | | | | object manifest | | | | shall be pulled. | | | | | | | | The MBS Distribution | | | | Session parameters | | | | (see table 4.5.6‑2) | | | | shall cite a single | | | | object manifest URL | | | | in _Object | | | | acquisition | | | | identifiers_. | +----------------------+----------------------+----------------------+ | | _OBJECT_STREAMING_ | A sequence of | | | | objects is ingested | | | | by the MBSTF and | | | | streamed in real | | | | time, for example | | | | according to a | | | | schedule described | | | | in an Application | | | | Service Entry Point | | | | document (e.g. DASH | | | | MPD). | | | | | | | | Either pull-based | | | | and push-based | | | | object acquisition | | | | methods may be | | | | provisioned in | | | | combination with | | | | this operating mode. | | | | | | | | For both object | | | | acquisition methods, | | | | the MBS Distribution | | | | Session parameters | | | | (see table 4.5.6‑2) | | | | shall cite a single | | | | Application Service | | | | Entry Point URL of | | | | each type in _Object | | | | acquisition | | | | identifiers_ (see | | | | NOTE 2). As a | | | | consequence, the | | | | referenced | | | | Application Service | | | | Entry Point | | | | document(s) shall be | | | | included in the MBS | | | | User Service | | | | Announcement Channel | | | | as ancillary | | | | objects. | | | | | | | | All Application | | | | Service Entry Points | | | | referenced by an MBS | | | | Distribution Session | | | | shall be for | | | | equivalent | | | | presentations, i.e., | | | | comprising common | | | | object streams | | | | according to | | | | compatible | | | | presentation | | | | timelines. | +----------------------+----------------------+----------------------+ | NOTE: | | | | _OBJECT_COLLECTION_ | | | | operating mode is a | | | | special case of | | | | _OBJECT_CAROUSEL_ | | | | operating mode in | | | | which the objects | | | | described by the | | | | manifest are | | | | distributed only | | | | once. The baseline | | | | parameters of the | | | | object manifest are | | | | defined in | | | | clause 4.5.10. | | | +----------------------+----------------------+----------------------+
Based on the configuration received from the MBSF via reference point Nmb2,
the objects are ingested by the MBSTF from the MBS Application Provider via
the pull-based or push-based object ingest method. As defined in clause 4, the
MBSTF segments the objects into appropriate payloads, adds the FEC redundancy
and schedules packet transmission to the MBS Client.
NOTE: Pull-based object ingest may occur once at the start of each active
period of the associated MBS User Data Ingest Session, or the pulled objects
may be revalidated (and possibly re-ingested) periodically, for example once
per rotation of an object carousel.
Object repair functionality may be utilized to repair object fragments that
are transmitted by the MBSTF using the Object Distribution Method, but lost or
corrupted in transit. In such cases, the MBS Client may request the missing
object fragments from the MBS AS using the procedure defined in clause 5.6.
This procedure may be invoked during an ongoing MBS User Services Session or
after an MBS User Services Session has finished.
## 6.2 Packet Distribution Method
The Packet Distribution Method is used to deliver **_p_** acket streams to the
MBS Client over an MBS Session that have been received from the MBS
Application Provider over reference point Nmb8. This distribution method is
particularly useful for multicast and broadcast of IP-based services for which
the content delivery protocols are defined outside the scope of the MBS
specification.
The MBSTF receives packet streams from the MBS Application Provider, typically
in the form of UDP/IP packets, and sends them to the configured MBS Session.
Optionally, packet sequence numbering and/or FEC redundancy may be added by
the MBSTF.
The Packet Distribution Session may be operated in one of two different modes:
\- In _Forward-only mode_ , the transport protocol on top of IP is opaque to
the MBS System, as described in clause B.3.1. The User Service Announcement
may be handled by the MBS Application Provider via external means at reference
point MBS-8.
\- In _Proxy mode_ , the UDP packet payload of the UDP streams is opaque to
the MBS Session, as described in clause B.3.2. An MBS Client is expected to
make the UDP Payloads available directly to the MBS-Aware Application, without
further knowledge of the content carried.
The operating modes for the Packet Distribution Method are summarised in table
6.2‑1 below.
Table 6.2‑1: Summary of operating modes for Packet Distribution Method
+----------------------+----------------------+----------------------+ | Distribution method | Operating mode | Description | +======================+======================+======================+ | _PACKET_ | _PA | The payloads of IP | | | CKET_FORWARD_ONLY_ | packets ingested by | | | | the MBSTF are | | | | forwarded to the | | | | MB-UPF in new IP | | | | packets (Layer 3 | | | | proxying). | +----------------------+----------------------+----------------------+ | | _PACKET_PROXY_ | The payloads of UDP | | | | packets ingested by | | | | the MBSTF are | | | | forwarded to the | | | | MB-UPF in new UDP | | | | packets (Layer 4 | | | | proxying). | +----------------------+----------------------+----------------------+ | NOTE 1: RTP packets | | | | formatted according | | | | to RFC 3550 [8] | | | | can be distributed | | | | using either of the | | | | above operating | | | | modes. | | | | | | | | NOTE 2: The MBSTF is | | | | not required to | | | | inspect or otherwise | | | | act on the payload | | | | of ingested UDP | | | | packets. | | | +----------------------+----------------------+----------------------+
# 7 Network Function services
## 7.1 General
The Network Function Services exposed by the MBSF and the MBSTF are defined in
this clause.
## 7.2 MBSF Services
### 7.2.1 General
The following table illustrates the set of Network Function services exposed
by the MBSF.
Table 7.2-1: NF services provided by MBSF
+----------------+----------------+----------------+----------------+ | Service name | Service | Operation | Example | | | operation name | semantics | consumer(s) | | | | | | | | | | (see NOTE) | +================+================+================+================+ | _Nmbsf_M |_ Create _| Re | AF, NEF | | BSUserService_ | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _Retrieve_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _Update_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _Destroy_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | _Nmbs |_ Create _| Re | AF, NEF | | f_MBSUserData | | quest/Response | | | IngestSession_ | | | | +----------------+----------------+----------------+----------------+ | | _Retrieve_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _Update_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _Destroy_ | Re | AF, NEF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | _St | Su | AF, NEF | | | atusSubscribe_ | bscribe/Notify | | +----------------+----------------+----------------+----------------+ | | _Stat | | AF, NEF | | | usUnsubscribe_ | | | +----------------+----------------+----------------+----------------+ | | _StatusNotify_ | | AF, NEF | +----------------+----------------+----------------+----------------+ | | _Statu | | AF, NEF | | | sSubscribeMod_ | | | +----------------+----------------+----------------+----------------+ | NOTE: To | | | | | support MBS | | | | | Application | | | | | Providers | | | | | (AF/AS) | | | | | outside the | | | | | trusted DN, | | | | | these services | | | | | shall be | | | | | exposed via | | | | | the NEF | | | | | (N33+Nmb5) as | | | | | _Nnef_M | | | | | BSUserService_ | | | | | and | | | | | _Nne | | | | | f_MBSUserData | | | | | IngestSession_ | | | | | respectively, | | | | | as specified | | | | | in clauses | | | | | 4.4.29.5 and | | | | | 4.4.29.6 | | | | | respectively | | | | | of | | | | | TS | | | | | 29.522 [15]. | | | | | In this case, | | | | | the NEF | | | | | performs any | | | | | necessary | | | | | mapping | | | | | between | | | | | external | | | | | parameters and | | | | | internal 5GC | | | | | parameters | | | | | (e.g., | | | | | translating | | | | | externally | | | | | formatted | | | | | target service | | | | | area | | | | | identification | | | | | to Tracking | | | | | Area | | | | | Identifier | | | | | (TAI) list | | | | | and/or Cell ID | | | | | list). | | | | +----------------+----------------+----------------+----------------+
### 7.2.2 Nmbsf MBS User Service operations
#### 7.2.2.1 Nmbsf_MBSUserService_Create service operation
**Service operation name:** _Nmbsf_MBSUserService_Create_
**Description:** Provision a new MBS User Service. The general data model is
illustrated in figure 4.5.2-1.
**Input parameters (Required):** Parameters in table 4.5.3-1 assigned by the
MBS Application Provider.
**Output parameters:** Result indication. MBS User Service identifier assigned
by the MBSF.
#### 7.2.2.2 Nmbsf_MBSUserService_Retrieve service operation
**Service operation name:** _Nmbsf_MBSUserService_Retrieve_
**Description:** Used by the NF/NEF to retrieve the properties of an existing
MBS User Service.
**Input parameters (Required): MBS User Service Identifier in request URL.**
**Output parameters:** Result indication. MBS User Service resource entity,
including parameters in table 4.5.3-1.
#### 7.2.2.3 Nmbsf_MBSUserService_Update service operation
**Service operation name:** _Nmbsf_MBSUserService_Update_
**Description:** Update the properties of an existing MBS User Service.
**Input parameters (Required, Optional):** MBS User Service Identifier.
Parameters in table 4.5.3-1 assigned by the MBS Application Provider.
**Output parameters(Required:** Result indication.
**Output parameters (Optional):** MBS User Service resource entity, including
parameters in table 4.5.3-1.
#### 7.2.2.4 Nmbsf_MBSUserService_Destroy service operation
**Service operation name:** _Nmbsf_MBSUserService_Destroy_
**Description:** Release the resources of the associated MBS User Service.
**Input parameters (Required):** MBS User Service Identifier.
**Output parameters:** Result indication.
### 7.2.3 Nmbsf MBS User Data Ingest Session operation
#### 7.2.3.1 Nmbsf_MBSUserDataIngestSession_Create service operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_Create_
**Description:** Create an MBS User Data Ingest Session, including a set of
subordinate MBS Distribution Session(s).
**Input parameters (Required, Optional):** Parameters in table 4.5.5‑1 and
table 4.5.6‑1, and either table 4.5.6‑2 or table 4.5.6‑3 assigned by the MBS
Application Provider, depending on the distribution method.
**Output parameters:** Result indication. MBS User Data Ingest Session
Identifier assigned by the MBSF.
#### 7.2.3.2 Nmbsf_MBSUserDataIngestSession_Retrieve service operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_Retrieve_
**Description:** Used by the AF/NEF to retrieve the properties of an existing
MBS User Data Ingest Session.
**Input parameters (Required):** User Data Ingest Session Identifier in
request URL.
**Output parameters:** Result indication. MBS User Data Ingest Session
resource entity, including parameters in table 4.5.5‑1 and table 4.5.6‑1, and
either table 4.5.6‑2 or table 4.5.6‑3, depending on the distribution method.
#### 7.2.3.3 Nmbsf_MBSUserDataIngestSession_Update service operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_Update_
**Description:** Update the properties of an existing MBS User Data Ingest
Session and its set of subordinate MBS Distribtion Session(s).
**Input parameters (Required, Optional):** MBS User Data Ingest Session
Identifier. Parameters in table 4.5.5‑1 and table 4.5.6‑1, and either table
4.5.6‑2 or table 4.5.6‑3, depending on the distribution method.
**Output parameters (Required):** Result indication.
**Output parameters (Optional):** MBS User Data Ingest Session resource
entity, including subordinate MBS Distribution Session data entities(s).
#### 7.2.3.4 Nmbsf_MBSUserDataIngestSession_Destroy service operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_Destroy_
**Description:** Destroy an MBS User Data Ingest Session along with its
subordinate MBS Distribution Session(s).
**Input parameters (Required):** MBS User Data Ingest Session Identifier.
**Output parameters:** Result indication.
#### 7.2.3.5 Nmbsf_MBSUserDataIngestSession_StatusSubscribe operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_StatusSubscribe_
**Description:** Invoked by AF/NEF on the MBSF when it needs to create a
subscription to monitor at least one event relevant to the MBS User Data
Ingest Session. The AF may subscribe to multiple events in a subscription.
**Input parameters (Required):** MBS User Data Ingest Session Identifier,
Event ID(s) as described in table 4.6.2-1, notification target address.
**Output parameters (Required, Optional):** When the subscription is accepted:
Subscription correlation ID.
#### 7.2.3.6 Nmbsf_MBSUserDataIngestSession_StatusUnsubscribe operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_StatusUnsubscribe_
**Description:** Remove an existing subscription.
**Input parameters (Required):** Subscription correlation ID.
**Output parameters:** Result Indication.
#### 7.2.3.7 Nmbsf_MBSUserDataIngestSession_StatusNotify operation
**Service operation name:** _Nmbsf_MBSUserDataIngestSession_StatusNotify_
**Description:** Used by the MBSF to notify the MBS Application Provider
(AF/AS) or NEF about the status change of the MBS User Data Ingest Session.
**Input parameters (Required):** MBS User Data Ingest Session Identifier,
Event ID(s) as described in table 4.6.2-1, informative message.
**Output parameters:** Result indication.
#### 7.2.3.8 Nmbsf_MBSUserDataIngestSession_StatusSubscribeMod operation
**Service operation name:**
_Nmbsf_MBSUserDataIngestSession_StatusSubscribeMod_
**Description:** Invoked by an MBS Application Provider (AF/AS) or NEF on the
MBSF to modify an existing status subscription.
**Input parameters (Required):** Subscription correlation ID.
**Input parameters (Optional):** Event ID(s) as described in table 4.6.2-1,
notification target address, subscription expiration time.
**Output parameters (Required, Optional):** Result indication.
## 7.3 MBSTF Services
### 7.3.1 General
The following table illustrates the set of NF services exposed by the MBSTF.
Table 7.3-1: NF services provided by MBSTF
Service name Service operation name Operation semantics Example consumer(s)
* * *
_Nmbstf_MBSDistributionSession_ _Create_ Request/Response MBSF _Retrieve_
Request/Response MBSF _Update_ Request/Response MBSF _Destroy_
Request/Response MBSF _StatusSubscribe_ Subscribe/Notify MBSF
_StatusUnsubscribe_ MBSF _StatusNotify_ MBSF _StatusSubscribeMod_ MBSF
### 7.3.2 Nmbstf_MBSDistributionSession service
#### 7.3.2.1 Nmbstf_MBSDistributionSession_Create service operation
**Service operation name:** _Nmbstf_MBSDistributionSession_Create_
**Description:** Create a new MBS Distribution Session within the MBSTF.
**Input parameters (Required, Optional):** Parameters in table 4.5.6‑1 and
either table 4.5.6‑2 or table 4.5.6‑3, depending on the distribution method.
**Output parameters:** Result indication.
#### 7.3.2.2 Nmbstf_MBSDistributionSession_Retrieve service operation
**Service operation name:** _Nmbstf_MBSDistributionSession_Retrieve_
**Description:** Retrieve the parameters of an existing MBS Distribution
Session.
**Input parameters (Required):** Distribution Session Identifier in request
URL.
**Output parameters:** MBS Distribution Session resource entity, including
parameters in table 4.5.6‑1 and either table 4.5.6‑2 or table 4.5.6‑3,
depending on the distribution method.
#### 7.3.2.3 Nmbstf_MBSDistributionSession_Update service operation
**Service operation name:** _Nmbstf_MBSDistributionSession_Update_
**Description:** Update an existing MBS Distribution Session, for example to
change the session stop time, object delivery session, application session,
packets delivery session, files, and ancillary information.
**Input parameters (Required, Optional):** MBS Distribution Session
Identifier. Parameters in table 4.5.6‑1 and either table 4.5.6‑2 or table
4.5.6‑3, depending on the distribution method.
**Output parameters (Required):** Result indication.
**Output parameters (Optional):** MBS Distribution Session resource entity.
#### 7.3.2.4 Nmbstf_MBSDistribtutionSession_Destroy service operation
**Service operation name:** _Nmbstf_MBSDistributionSession_Update_
**Description: D** estroy an existing MBS Distribution Session.
**Input parameters (Required):** MBS Distribution Session Identifier.
**Output parameters:** Result indication.
#### 7.3.2.5 Nmbstf_MBSDistributionSession_StatusSubscribe operation
**Service operation name:** _Nmbstf_MBSDistributionSession_StatusSubscribe_
**Description:** Invoked by MBSF on the MBSTF when it needs to monitor at
least one event relevant to the MBS Distribution session. The MBSF may
subscribe to multiple events in a subscription.
**Input parameters (Required):** MBS Distribution Session Identifier, Event
ID(s) as described in table 4.6.2-1, notification target address.
**Output parameters:** When the subscription is accepted: Subscription
correlation ID.
#### 7.3.2.6 Nmbstf_MBSDistributionSession_StatusUnsubscribe operation
**Service operation name:** _Nmbstf_MBSDistributionSession_StatusUnsubscribe_
**Description:** Remove an existing subscription.
**Input parameters (Required):** Subscription correlation ID.
**Output parameters:** Result indication.
#### 7.3.2.7 Nmbstf_MBSDistributionSession_StatusNotify operation
**Service operation name:** _Nmbstf_MBSDistributionSession_StatusNotify_
**Description:** Used by the MBSTF to notify the MBSF about the status change
of the MBS Distribution Session.
**Input parameters (Required):** MBS Distribution Session Identifier, Event
ID(s) as described in table 4.6.2-1, informative message.
**Output parameters:** Result indication.
#### 7.3.2.8 Nmbstf_MBSDistributionSession_StatusSubscribeMod operation
**Service operation name:** _Nmbstf_MBSDistributionSession_StatusSubscribeMod_
**Description:** Invoked by the MBSF on the MBSTF to modify an existing status
subscription.
**Input parameters (Required):** Subscription correlation ID.
**Input parameters (Optional):** Event ID(s) as described in table 4.6.2-1,
notification target address, subscription expiration time.
**Output parameters (Required, Optional):** Result indication.
###### ## Annex A (informative): Deployment and Collaboration Models
# A.1 Group Communication
The Group Communication (GC) Service is defined for use with LTC/EPC in TS
23.468 [14]. In order to allow GC Services to interwork with an MBS System,
the MBSF also supports reference point MB2‑C and the MBSTF also supports
reference point MB2‑U, as defined in clause 5.2 and annex C of TS 23.247 [5].
Figure A.1‑1: User Plane protocol stack for Group Communication services
The following MBS Distribution Session properties (see clause 4.5.6) are used
by the MBSF at reference point Nmb2 to provision this setup in the MBSTF:
\- Distribution method is set to Packet.
\- Operating mode is set to Forward-only.
\- Packet ingest method is set to Unicast.
\- User plane traffic flow information is omitted because ingested multicast
packets are not modified.
\- The tunnel endpoint addresses of the MBMS-GW (SGi-mb) and/or MB-UPF (Nmb9).
\- FEC configuration information is provided if AL‑FEC protection was
requested by the GCS AS in the MBMS bearer allocation request at MB2-C.
\- The MBSTF provides the MBSTF ingest endpoint addresses (representing the
BM‑SC address and BM‑SC port) via the MBSF to the GCS AS at reference point
MB2‑C so that the GCS AS can establish a UDP/IP tunnel with the MBSTF at MB2-U
and start sending tunnelled IP packets.
\- The MBSTF provides forward error protection according to the FEC
configuration for downlink IP packets ingested from GCS AS, and then sends the
source packets and any FEC packets to the MBMS GW at reference point SGi-mb.
# A.2 5G Media Streaming
The use of MBS User Services in collaboration with the 5G Media Streaming
architecture [7] is for further study.
# A.3 MBS Application Provider (AF/AS) in Trusted DN
Figure A.3-1 depicts a collaboration in which the MBS Application Provider
(AF/AS) is deployed within the Trusted DN.
1\. The AF/AS uses the _Nmbsf_ service directly at reference point Nmb10.
2\. The MBSTF injects packets into the MB‑UPF via reference point Nmb9.
NOTE: Italic type is used to annotate service-based interactions.
Figure A.3-1: Deployment with MBS Application Provider (AF/AS) in Trusted DN
# A.4 MBS Application Provider (AF/AS) in external DN
Figure A.4-1 depicts a collaboration in which the MBS Application Provider
(AF/AS) is deployed within the External DN.
1\. The AF/AS invokes the _Nnef_ service at reference point N33 to access the
MBSF via the NEF. The NEF, in turn, invokes the _Nmbsf_ service on the MBSF at
reference point Nmb5 on behalf of the AF/AS.
2\. The MBSTF injects packets into the MB‑UPF via reference point Nmb9.
NOTE: Italic type is used to annotate service-based interactions.
Figure A.4-1: Deployment with MBS Application Provider (AF/AS) in External DN
# A.5 MBSF/MBSTF-like functions in External DN
Figure A.5-1 depicts a transport-only deployment in which the MBS Application
Provider (AF/AS) hosts an \"MBSF-like\" function that mimics the MBSF at
reference point MBS-5 and an \"MBSTF-like\" function that mimics the MBSTF at
reference point MBS-4-MC. The \"MBSF-like\", \"MBSTF-like\" and \"MBS AS-
like\" functions produce data streams which are compliant with the present
document. Although the 5G System sets up a Transport-only Mode (see
configuration option 1 in annex A of TS 23.247 [5]), the MBS Client in the UE
follows the procedures defined in the present document.
1\. The MBSF-like function provisions MBS Services in the MB‑SMF via the
_Nnef_ service at reference point N33.
2 The MBS Application Provider (AF/AS) uses an MBSTF-like function to produce
packet data compliant with reference point MBS‑4‑MC. The packets are injected
directly into the MB-UPF at reference point N6mb (not shown).
3\. An MBS Application Provider (AF/AS) in an External DN uses an MBSF-like
function to generate a Service Announcement for MBS User Services.
4\. The MBS Application Provider (AF/AS) makes object repair available from an
MBS AS-like function that is compliant with reference point MBS‑4‑UC.
NOTE: Italic type is used to annotate service-based interfaces.
Figure A.5-1: Deployment with MBSF/MBSTF-like functions in External DN
###### ## Annex B (informative): Nmb8 User Plane ingest examples
# B.1 General
This annex provides an overview of the different Nmb8 User Plane protocol
stacks for the distribution methods defined in clause 6. The distribution
method is selected and configured at reference point Nmb2 based on Nmb10
provisioning.
# B.2 Object Distribution Method
## B.2.1 Object Distribution Method with pull-based ingest
Figure B.2.1-1 illustrates a setup in which the MBS Application Provider
(AF/AS) makes a set of objects available to the MBSTF to be ingested using
HTTP and distributed. The MBSTF handles all MBS-related complexity, e.g.,
converting the HTTP message payload into an IP multicast suitable protocol,
adding AL-FEC, etc. The AF/AS delegates to the MBSF the delivery of MBS
Service Announcement metadata to the MBS Client (i.e., IP multicast protocol
details, etc.).
Figure B.2.1-1: Object Distribution Method using\ pull-based object
acquisition method (HTTP GET)
In the special case of the MBS User Service Announcement Channel, an object
manifest referencing MBS User Service Announcement documents and ancillary
objects is ingested by the MBSTF from the MBS AF via reference point MBS‑11.
The objects listed in the object manifest are then also ingested by the same
means.
Figure B.2.1-2: MBS User Service Announcement Channel\ using pull-based object
acquisition method (HTTP GET)
The following Parameters are used by the MBS Application Provider (AF/AS) at
reference point Nmb10 (or, in the case of the MBS User Service Announcement
Channel, by the MBSF at reference point Nmb2) to provision this setup:
_\- Distribution method_ is set to _Object_.
_\- Object acquisition method_ (property specific to the distribution method)
is set to _Pull_.
_-_ _Operating mode_ is set to _OBJECT_SINGLE_ or _OBJECT_COLLECTION_ or
_OBJECT_CAROUSEL_ or _OBJECT_STREAMING_ , as appropriate.
\- _OBJECT_SINGLE_ : _Object acquisition identifiers_ contains a list of
object URL paths that are pulled by the MBSTF relative to the provisioned
_Object ingest base URL_ and each distributed once on the MBS Distribution
Session.
\- _OBJECT_COLLECTION_ : _Object acquisition identifiers_ contains the URL
path of an object manifest describing a set of objects to be distributed once.
The object manifest is pulled by the MBSTF relative to the provisioned _Object
ingest base URL_. Objects listed in the object manifest are pulled by the
MBSTF according to the time constraints specified in the object manifest
(_Earliest fetch time_ , _Latest fetch time_) for transmission in the MBS
Distribution Session.
\- _OBJECT_CAROUSEL_ : _Object acquisition identifiers_ contains the URL path
of an object manifest describing a set of objects and their repetition and
update pattern. The object manifest is pulled by the MBSTF relative to the
provisioned _Object ingest base URL_ and, if provisioned to do so, the MBSTF
periodically checks for updates to it, reacquiring it as necessary. Objects
listed in the object manifest are pulled by the MBSTF according to the time
constraints specified in the object manifest (_Earliest fetch time_ , _Latest
fetch time_) for transmission in the MBS Distribution Session according to the
repetition pattern indicated in the object manifest. If the update pattern in
the object manifest requires it, the MBSTF periodically checks for updates to
the objects, reacquiring them as necessary and updating the MBS Distribution
Session accordingly.
\- _OBJECT_STREAMING_ : _Object acquisition identifiers_ contains the URL
paths of one or more Application Service Entry Point documents (e.g., a DASH
MPD). The MBSTF pulls the Application Service Entry Point document(s). The
objects they reference (e.g., CMAF segments) are pulled by the MBSTF and
inserted into the MBS Distribution Session according to the presentation
timeline in the Application Service Entry Point document(s). Ancillary objects
(e.g., DASH initialisation segments) pulled by the MBSTF may additionally be
inserted into the User Service Announcement Channel. The Application Service
Entry Point document(s) themselves are inserted into the User Service
Announcement Channel and are referenced by the User Service Announcement._-_
When the _Object ingest base URL_ and the _Distribution base URL_ are both
present, the MBSTF replaces the _Object ingest base URL_ part of the object
ingest URL with the value of the _Distribution base URL_ for inclusion in MBS
Distribution Session metadata (e.g., FLUTE FDT instances) and (in some cases)
for referencing objects from the User Service Announcement.
## B.2.2 Object Distribution Method with push-based ingest
Figure B.2.2-1 illustrates a setup in which the MBS Application Provider
(AF/AS) pushes objects directly into the MBSTF at Nmb8 using HTTP PUT. The
MBSTF handles all MBS-related complexity, e.g. converting the HTTP message
payload into an IP multicast suitable protocol, adding AL-FEC, etc. The AF/AS
delegates MBS delivery of Service Announcement metadata destined for the MBS
Client (i.e., DASH MPD, IP multicast protocol details, etc.) to the MBSTF via
MBSF.
Figure B.2.2-1: Object Distribution Method using\ push-based object
acquisition method (HTTP PUT)
In the special case of the MBS User Service Announcement Channel, an object
manifest referencing MBS User Service Announcement documents and ancillary
objects is pushed to the MBSTF by the MBSF via reference point Nmb2.
Figure B.2.2-2: Delivery of object manifest for MBS User Service Announcement
channel\ using push-based object acquisition method (HTTP PUT)
The following MBS Distribution Session properties are used by the MBS
Application Provider (AF/AS) at reference point Nmb10 (or, in the case of the
MBS User Service Announcement Channel, by the MBSF at reference point Nmb2) to
provision this setup:
_\- Distribution method_ is set to _Object_.
_\- Object acquisition method_ is set to _Push_.
_\- Operating mode_ is set to _OBJECT_SINGLE_ or _OBJECT_COLLECTION_ or
_OBJECT_CAROUSEL_ or _OBJECT_STREAMING_ , as appropriate.
\- _OBJECT_SINGLE_ : _Object acquisition identifiers_ are ignored. Each pushed
object is distributed once on the MBS Distribution Session.
\- _OBJECT_COLLECTION_ : _Object acquisition identifiers_ contains a URL path
(resolved relative to the _Object ingest base URL_ on the MBSTF) to which an
object manifest will be published describing a set of objects to be
distributed once. When the object manifest is received by the MBSTF, the
objects listed are pulled by the MBSTF according to the time constraints
specified in the object manifest (_Earliest fetch time_ , _Latest fetch time_)
per figure B.2.1-1.
\- _OBJECT_CAROUSEL_ : _Object acquisition identifiers_ contains a URL path
(resolved relative to the _Object ingest base URL_ on the MBSTF) to which an
object manifest will be published describing a set of objects and their
repetition and update pattern. When the object manifest is received by the
MBSTF, the objects listed are pulled by the MBSTF according to the time
constraints specified in the object manifest (_Earliest fetch time_ , _Latest
fetch time_) for transmission in the MBS Distribution Session according to the
repetition pattern indicated in the object manifest per figure B.2.1-1 or (for
the MBS User Service Announcement Channel) figure B.2.1-2. If the update
pattern in the object manifest requires it, the MBSTF periodically checks for
updates to the objects, reacquiring them as necessary and updating the MBS
Distribution Session accordingly.
\- _OBJECT_STREAMING_ : _Object acquisition identifiers_ contains a non-empty
set of URL paths (resolved relative to the _Object ingest base URL_ on the
MBSTF) to which Application Service Entry Point documents (e.g., DASH MPD)
will be published. These and are inserted into Service Announcement. When one
of the declared Application Service Entry Point documents is received by the
MBSTF, the streaming session commences in accordance with the presentation
timeline specified in that document. Each object (e.g. CMAF segment) pushed to
the MBSTF that is part of the presentation described by the Application
Service Entry Point document is distributed once in accordance with the
presentation timeline.
\- _Object ingest base URL_ (assigned by the MBSF) contains the base URL at
the MBSTF to which objects are published.
_\- Object distribution base URL_ (assigned by the MBSF) contains the base URL
for the objects as they are distributed. The MBSTF replaces the _Object ingest
base URL_ part of the object ingest URL with the value of the Object
_distribution base URL_ for inclusion in MBS Distribution Session metadata
(e.g., FLUTE FDT instances) and (in some cases) for referencing objects from
the User Service Announcement.
# B.3 Packet Distribution Method
## B.3.1 Proxy mode
Figure B.3.1-1 illustrates a setup in which the MBS Application Provider
(AF/AS) injects UDP datagrams directly into the MBSTF at reference point Nmb8.
The MBSTF handles all MBS-related complexity, e.g. restamping the UDP datagram
headers and/or the IP packet headers, as required for distribution. The MBSTF
is not required to process the UDP payload of packets ingested at reference
point Nmb8.
Figure B.3.1-1: Packet Distribution Method using Proxy mode
The following MBS Distribution Session properties are used by the MBS
Application Provider (AF/AS) at reference point Nmb10 to provision this setup:
_\- Distribution method_ is set to _Packet._
_\- Operating mode_ is set to _PACKET_PROXY._
_\- Packet ingest method_ is set to _Multicast_ or _Unicast_.
\- When the _Packet ingest method_ indicates _Multicast ingest_ , then either
the MBS Application Provider (AF/AS) nominates the multicast IP address and
UDP port(s) to be used for reception at reference point Nmb8, or else the MBSF
allocates these values.
\- When the _Packet ingest method_ indicates _Unicast ingest_ , the MBSTF
allocates a UDP reception port for use at reference point Nmb8 and provides
the reception UDP port together with the reception IP address to the MBS
Application Provider (AF/AS) via the MBSF.
A unicast ingest packet delivery protocol is established at reference point
Nmb8 that allows the control of the unicast stream.
The MBSTF processes the UDP packet payloads received by the Packet ingest
subfunction and creates MBS-4-MC packets as described in clause 4.3.3.3. The
MBSTF encapsulates these packets into the Nmb9 tunnel.
\- The MBSF nominates the MBS-4-MC multicast group destination IP address and
UDP ports to be used inside the Nmb9 unicast tunnel in the _User plane traffic
flow information_.
## B.3.2 Forward-only mode
Figure B.3.2-1 illustrates a setup in which the MBS Application Provider
(AF/AS) injects multicast IP packets encapsulated in a unicast UDP/IP tunnel
directly into the MBSTF. The MBSTF decapsulates the multicast IP packets from
the tunnel and forwards them unmodified to the MBS Session at reference point
Nmb9.
Figure B.3.2‑1: Packet Distribution Method using Forward-only mode
The following MBS Distribution Session properties are used by the MBS
Application Provider (AF/AS) at reference point Nmb10 to provision this setup:
_\- Distribution method_ is set to _Packet._
_\- Operating mode_ is set to _PACKET_FORWARD_ONLY._
_\- Packet ingest method_ is set to _Unicast._
\- _User plane traffic flow information_ is omitted because ingested multicast
packets are not modified.
The MBSTF provides the _MBSTF ingest endpoint addresses_ via the MBSF to the
MBS Application Provider (AF/AS) so that it can establish the UDP/IP tunnel
with the MBSTF and start sending tunnelled IP packets.
A unicast ingest packet delivery protocol is established at reference point
Nmb8 that allows the control of the unicast stream.
The MBSTF Packet ingest subfunction receives ready-made multicast UDP/IP
packets from the MBS Application Provider (AF/AS) at reference point Nmb8.
\- When no _FEC configuration_ is provided, the MBSTF pushes the packets into
the Packet scheduling subfunction (see clause 4.3.3.3). The MBSTF encapsulates
these packets into the Nmb9 tunnel for transmission to the MB‑UPF.
\- When an _FEC configuration_ is provided, the MBSTF parses deep into the UDP
payload to create AL-FEC redundancy. Source block marking is appended to
source packets and the packet length fields are adjusted in UDP and IP
headers. AL-FEC redundancy is inserted into the stream according to the _FEC
configuration_. The resulting packets are handled by the Packet scheduling
subfunction (see clause 4.3.3.3). The MBSTF encapsulates these packets into
the Nmb9 tunnel.
###### ## Annex C (informative): Data model examples
# C.1 General
This annex contains a set of examples of the MBS User Services data model as
defined in clause 4.5.
# C.2 Object Distribution Method with push-based ingest
## C.2.1 DASH content distribution with push-based ingest
This example focuses on DASH content distribution with push-based ingest. The
DASH segment packager continuously publishes media segments to the MBSTF as
they become available. Media segments from all relevant DASH Adaptation Sets
and Representations are multiplexed into the same MBS Distribution session.
The data model parameters are provided in Figure C.2.1-1.
{width="5.05511811023622in" height="5.177165354330708in"}
Figure C.2.1-1: DASH content distribution with push-based ingest
The DASH segment packager is configured to use the _Object ingest base URL_ to
upload media segments using HTTP. Each segment is identified by a unique URL
relative to this base. The distribution URL generated by the MBSTF is formed
by replacing the _Object ingest base URL_ prefix with the value of _Object
distribution base URL_.
EXAMPLE:
URL of ingested object: _https://\
:443/base/\/video/segment_1000.m4s_
URL of distributed object: _https://\ /srv1/video/segment_1000.m4s_
where:
\- The string _ip_mbupf#A:port#A_ refers to the IP address and port for the
tunnel at which the MB-UPF expects the data for the MBS Session.
\- The string _\ _ refers to the IP address or the hostname of the
MBSTF function.
\- The string _\ _ refers to the TMGI, which is assigned to the MBS
Session.
NOTE: The TMGI of the MBS Session is used in this example to make the ingest
URL uniqueue within the 5G System. Other solutions to ensure uniqueness are
possible.
\- The term _\ _ refers to a fully qualified domain name of the CSP.
The MBSF needs access to the MPD URL in order to compile the MBS Distribution
Session Announcement. The MBSF may also modify the contents of the MPD
(\"conditioning\") before compiling it into the Session Announcement and/or
publishing it for retrieval at reference point MBS‑4‑UC.
The MBSTF does not need to inspect the contents of the DASH MPD.
The MBSTF uses a unicast tunnel to inject the generated MBS data into the MB-
UPF at reference point Nmb9, using the _Maximum bit rate_ parameter to pace
these packets.
## C.2.2 DASH content distribution with push-based ingest using separate MBS
Distribution Sessions for audio and video
This example focuses on DASH content distribution with push-based ingest. The
DASH segment packager continuously publishes media segments to the MBSTF as
they become available. In this case, media segments from the video and audio
Adaptation Sets are multiplexed into different MBS Distribution Sessions. In
this case, the MBS User Service is provisioned to distribute the audio and
video segments on separate MBS Distribution Sessions, with the two resulting
MBS Distribution Sessions multiplexed onto the same MBS Session.
{width="6.615in" height="4.283333333333333in"}
Figure C.2.2-1: DASH content distribution with push-based ingest\ using
separate MBS Distribution Sessions for audio and video
For each MBS Session, the MBSTF uses a specific _Maximum bit rate_ parameter
to pace the packets towards the MB-UPF (here 5 Mbps for video segments and 200
kbps for audio segments). For the ingest session, two separate Object ingest
base URLs are provided, namely:
and
_https://\ :443/base/\/_
The strings _\ _ and _\ _ are used to make the ingest URLs
unique within the 5G System. The last portion is a suffix for the individual
MBS Distribution Session. The usage of the TMGI of the MBS Session is one
example to make the ingest URL unique within the 5G System.
The MBSTF uses the same unicast tunnel to inject the data into the MB-UPF at
reference point Nmb9, so that the data is distributed via the same MBS
Session.
## C.2.3 Generic object distribution with push-based ingest
This example focuses on generic object distribution using push-based ingest.
In this case, a series of objects are pushed by the MBS Application Provider
(AF/AS) into the MBSTF where an MBS Distribution Session is provisioned to use
the _OBJECT_SINGLE_ operating mode, which requires no manifest.
{width="4.921259842519685in" height="5.149606299212598in"}
Figure C.2.3-1: Generic object distribution with push-based ingest
The case is very similar to the previous DASH content distribution cases, with
the difference that no _Object acquisition identifiers_ are provisioned. Any
object pushed to the _Object ingest base URL_ nominated by the MBSF is
distributed in the MBS Distribution Session by the MBSTF after substituting
the _Object ingest base URL_ prefix with the _Object distribution base URL_.
# C.3 Object Distribution Method with pull-based ingest
## C.3.1 DASH content distribution with pull-based ingest
This example focuses on DASH content distribution with pull-based ingest. The
DASH segment packager publishes media segments to an external origin server
and the MBSTF pulls them according to the timing model of a DASH presentation
specified in an MPD.
{width="4.18503937007874in" height="5.059055118110236in"}
Figure C.3.1-1: DASH content with pull-based ingest
The _Object ingest base URL_ remains empty, since the DASH media segments are
fetched according to the DASH presentation manifest referenced by the _Object
Acquisition identifiers_ property.
In this example, the _Object ingest base URL_ and _Object distribution base
URL_ are both omitted, resulting in the same URL used for fetching each media
segment being used for its distribution.
## C.3.2 DASH content distribution with pull-based ingest using separate MBS
Distribution Sessions for audio and video
This example focuses on DASH content distribution with pull-based ingest. The
DASH segment packager publishes media segments to an external origin server
and the MBSTF pulls them according to the timing model of a DASH presentation
specified in an MPD. In this case, the MBS User Service is provisioned to
distribute the audio and video segments on separate MBS Distribution Sessions,
which are multiplexed onto the same MBS Session.
{width="6.65in" height="4.6066666666666665in"}
Figure C.3.2-1: DASH content distribution with pull-based ingest\ using
separate MBS Distribution Sessions for audio and video
The _Object ingest base URL_ is ignored in this case because the media
segments are fetched according to the DASH MPD referenced by the _Object
acquisition identifiers_ property.
In this example, the _Object distribution base URL_ is also omitted, resulting
in the same URL used for fetching each media segments being used for its
distribution.
## C.3.3 Generic object distribution with pull-based ingest
This example focuses on generic object distribution using pull-based ingest.
In this case, objects are pulled into the MBSTF according to an object
manifest.
{width="4.421259842519685in" height="5.1299212598425195in"}
Figure C.3.3-1: Generic object distribution with pull-based ingest
The URL of the object manifest is provisioned by the MBS Application Provider
using the _Object acquisition identifiers_ parameter. The _Operating mode_ is
here _OBJECT_COLLECTION_ and the _Object acquisition identifiers_ cite a
single object manifest URL to be pulled. When the _Operating mode_ is set to
_OBJECT_SINGLE_ , the _Object acquisition identifiers_ cite the object URLs
directly.
In this example, the _Object ingest base URL_ and _Object distribution base
URL_ are both omitted, resulting in the same URL used for fetching each object
being used for its distribution.
# C.4 Location-dependent Object Distribution Method using push-based ingest
## C.4.1 Location-dependent DASH content distribution using push-based ingest
A location-dependent MBS Serivce allows regional content variants to be
distributed to different MBS Service Areas within the scope of a common MBS
Session. The UE receives the content variant appropriate to its current
location. This feature allows realization of MBS User Services such as local
traffic information.
{width="6.69375in" height="4.198611111111111in"}
Figure C.4.1-1: Location-dependent DASH content distribution using push-based
ingest
Two MBS Distribution Sessions with different _Target service areas_ are
provisioned. Each MBS Distribution Session has a different _Object ingest base
URL_ so that two content sources can push different media objects to the two
MBS Distribution Sessions. Each content source uses a different DASH
presentation manifest.
The MBSF provisions a different MBS Session in the MB-SMF for each MBS
Distribution Session and arranges for the user plane traffic of each one to be
distributed to the correct MBS Service Area.
The MBSTF uses a separate tunnel to inject the MBS data for each MBS
Distribution Session into the MB-UPF.
The MB-UPF listens on two separate UDP ports (_port#A_ and _port#B_) for the
location-specific MBS data streams.
## C.4.2 Location-dependent generic object distribution with push-based ingest
The location-dependent MBS Serivce described in this clause is very similar to
that in clause C.4.1. The difference is the distribution of a generic object
stream which is not described by a manifest.
{width="6.69375in" height="4.625in"}
Figure C.4.2-1: Location-dependent generic object distribution with push-based
ingest
As in clause C.2.3, no _Object acquisition identifiers_ are provisioned. Any
object pushed to one of the _Object ingest base URL_ s nominated by the MBSF
is distributed to the corresponding MBS Distribution Session by the MBSTF
after substituting the relevant _Object ingest base URL_ prefix with the
corresponding _Object distribution base URL_.
#