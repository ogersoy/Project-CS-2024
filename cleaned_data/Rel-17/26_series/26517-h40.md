# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document defines protocols and formats for User Services as
defined in TS 26.502 [6] and conveyed using the 5G multicast--broadcast
capabilities of the 5G System defined in TS 23.501 [2], TS 23.502 [3] and TS
23.247 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[5] 3GPP TS 23.247: \"Architectural enhancements for 5G multicast-broadcast
services; Stage 2\".
[6] 3GPP TS 26.502: \"5G multicast--broadcast services; User Service
architecture\".
[7] 3GPP TS 26.346: "MBMS; Protocols and Codecs\".
[8] IETF RFC 8866: \"Session Description Protocol\".
[9] W3C: \"XML Schema Part 2: Datatypes\".
[10] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[11] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[12] IETF RFC 3926: \"FLUTE - File Delivery over Unidirectional Transport\".
[13] IETF RFC 2616: \"Hypertext Transfer Protocol -- HTTP/1.1\".
[14] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[15] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[16] 3GPP TS 29.501: \"5G System: Principles and Guidelines for Services
Definition; Stage 3\".
[17] 3GPP TS 29.580: \"5G System; Multicast/Broadcast Service Function
services; Stage 3\".
[18] 3GPP TS 29.581: \"5G System; Multicast/Broadcast Service transport
services; Stage 3\".
[19] IETF RFC 9110: \"HTTP Semantics\", June 2022.
[20] IETF RFC 9111: \"HTTP Caching\", June 2022.
[21] IETF RFC 9112: \"HTTP/1.1\", June 2022.
[22] IETF RFC 9113: \"HTTP/2\", June 2022.
[23] Reserved for future use.
[24] IETF RFC 8446: \"The Transport Layer Security (TLS) Protocol Version
1.3\", August 2018.
[25] Open Mobile Alliance: \"OMNA BCAST Service Class Registry\",
https://technical.openmobilealliance.org/OMNA/bcast/bcast-service-class-
registry.html.
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1], TS 23.501 [2], TS 23.502 [3], TS 23.247 [5], TS 26.502 [6] and the
following apply. A term defined in the present document takes precedence over
the definition of the same term, if any, in 3GPP TR 21.905 [1].
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1], TS 23.501 [2], TS 23.502 [3], TS 23.247 [4] and the following
apply. An abbreviation defined in the present document takes precedence over
the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].
CMAF Common Media Application Format
FLUTE File Delivery over Unidirectional Transport
MBS Multicast--Broadcast Services
MB‑SMF Multicast--Broadcast Session Management Function
MB‑UPF Multicast--Broadcast User Plane Function
MBSF Multicast--Broadcast Service Function
MBSTF Multicast--Broadcast Service Transport Function
PCF Policy and Charging Function
NEF Network Exposure Function
SDP Session Description Protocol
TMGI Temporary Mobile Group Identity
UE User Equipment
UML Unified Markup Language
XML eXtensible Markup Language
# 4 System overview
# 5 MBS User Service Announcement
## 5.0 Overview
MBS User Service Announcement is needed in order to advertise MBS User
Services in advance of, and potentially during, the MBS User Service Sessions
described. MBS User Service Announcement (as defined in clauses 4.5.7 and
4.5.8 of TS 26.502 [3]) is provided by means of an _MBS User Service
Description_ , the syntax of which is defined in this clause.
## 5.1 MBS User Service Description data model
### 5.1.1 General
An MBS User Service Description is described by a set of metadata documents
that are delivered as described in clause 4.3.2 of TS 26.502 [3]. The data
model defined in this clause subdivides the parameters defined in [3] and
groups them into a set of _metadata documents_.
Each metadata document is divided into _metadata units_. A metadata unit is a
single uniquely identifiable block of metadata. The metadata itself describes
details of services. An obvious example of a metadata unit would be a single
SDP document [8].
The metadata consists of:
\- An _MBS User Service Bundle Description_ metadata unit (see clause 5.2.2)
describing a bundle of one or more MBS User Services, and containing one or
more:
\- _MBS User Service Description_ metadata unit (see clause 5.2.3) describing
an MBS User Service Session that is associated with:
\- One or more _MBS Distribution Session Description_ metadata units (see
clause 5.2.4), each of which references a Session Description document [8]
that may be packaged with the MBS User Service Bundle Description, and each of
which may optionally reference an Object Repair Parameters document (see
clause 5.2.7) describing the object repair parameters for the MBS Distribution
Session.
\- Zero or more _MBS Application Service Description_ metadata units (see
clause 5.2.5), each of which references an Application Service Entry Point
document that may be packaged with the MBS User Service Bundle Description.
Additional resources referenced by the entry point document may also be
packaged with the MBS User Service Bundle Description.
\- Zero or one _MBS Schedule Description_ metadata unit (see clause 5.2.6)
advertising the delivery schedule for the MBS User Service Session.
Figure 5.1‑1 illustrates the relationships between these metadata units using
UML for a single MBS User Service Bundle.
NOTE: "N" means any number in each instance.
Figure 5.1-1: User Service Data Model simple description
An MBS User Service Bundle Description document shall contain one or more
instances of the MBS User Service Description metadata unit, each of which
describes a single MBS User Service Session within the MBS User Service
Bundle.
Each instance of the MBS User Service Description metadata unit shall include
at least one _MBS Distribution Service Description_ metadata unit describing
the set of MBS Distribution Sessions currently associated with the MBS User
Service Session.
\- The MBS Distribution Session Description metadata unit shall refer to one
_Session Description document_.
\- Each MBS Distribution Session Description metadata unit may contain a
reference to an _Object Repair Parameters document_.
Each instance of the MBS User Service Description metadata unit may include
zero or more _MBS Application Service Description_ metadata units, each one
referencing an Application Service Entry Point document (e.g. a DASH MPD, HLS
Master Playlist or HTML document) which describes the root of the Application
Service associated with this MBS User Service. When multiple Application
Service Entry Point documents are referenced, an MBS Client shall select only
one on the basis of a distinct MIME content type indicated in the Application
Service Description.
Each instance of the MBS User Service Description metadata unit may include an
_MBS Schedule Description_ metadata unit. If included, the MBS Schedule
Description shall refer to a _Schedule Description document_ , and the UE can
expect to receive MBS User Service data during the time periods described in
the Schedule Description document.
In the case of the Object Distribution Method, the Schedule Description
document may include an object transmission schedule for objects associated
with the MBS User Service Session. The UE may select which objects to receive
based on the object transmission schedule information published in the
Schedule Description document.
## 5.2 Semantics
### 5.2.1 General
The following description in this clause presumes XML encoding of the metadata
units comprising the MBS User Service Announcement.
### 5.2.2 MBS User Service Bundle Description metadata unit
The root element of the MBS User Service Bundle Description metadata unit is
**bundleDescription**. This element is of type _bundleDescriptionType_. The
**bundleDescription** element contains one or several
**userService‌Description** child elements.
### 5.2.3 MBS User Service Description metadata unit
The root element of the MBS User Service Description metadata unit is the
**userServiceDescription** element. Each **userServiceDescription** element
shall signal a unique identifier in its \@serviceId attribute and this shall
be of URI format.
The **userServiceDescription** element may contain one or more **name** child
elements. The purpose of a **name** element is to communicate a human-readable
title of the MBS User Service. For each **name** element, the language shall
be specified according to XML datatypes (XML Schema Part 2 [9]).
The **userServiceDescription** element may contain one or more
**serviceLanguage** child elements. Each **serviceLanguage** element
represents the available languages of the MBS User Service. The language shall
be specified according to XML datatypes (XML Schema Part 2 [9]) using the
xml:lang attribute.
### 5.2.4 MBS Distribution Session Description metadata unit
Each MBS User Service Description metadata unit shall reference at least one
MBS Distribution Session Description.
The **distributionSessionDescription** element shall contain a
\@conformanceProfile attribute indicating the set of features that the MBS
Distribution Session conforms to and which the MBS Client needs to support in
order to fully receive the MBS Distribution Session. The value of this
attribute shall be a fully-qualified term identifier URI from the controlled
vocabulary defined in annex C.
The **distributionSessionDescription** element shall contain a
@**sessionDescriptionURI** attribute which references a Session Description
document. The element may also contain an \@objectRepairParametersURI
attribute referencing an Object Repair Parameters document.
The **distributionSessionDescription** element may contain a \@dataNetworkName
attribute indicating a Data Network Name (DNN) as defined in TS 23.003 [10].
When this attribute is present, the MBS Client shall use the given DNN for
interactions with the MBSF at reference point MBS‑5 and with the MBS AS at
reference point MBS‑4‑UC. If this attribute is not present, the MBS UE shall
use a default PDU Session for these network interactions.
The **userServiceDescription** element may include an **availabilityInfo**
child element providing additional information pertaining to the availability
of the MBS Distribution Session within the 5G Network. If present, the
**availabilityInfo** element shall include one or more **infoBinding** child
elements. The **infoBinding** element shall contain the child elements
**serviceArea** , **mbsFSAId** and **radiofrequency** :
\- The **serviceArea** element declares the one or more service areas in which
the MBS Session corresponding to this MBS Distribution Session is currently
available.
\- In the case of a broadcast MBS Session corresponding to this MBS
Distribution Session, the **mbsFSAId** element identifies a preconfigured area
within which, and in proximity to, the cell(s) announce the MBS FSA ID and its
associated frequency.
NOTE: This is used to guide frequency selection by the UE for a broadcast MBS
Session.
\- The **radioFrequency** element indicates the one or more radio frequencies
in the NG-RAN downlink which transmit the MBS Session corresponding to this
MBS Distribution Session in the service area(s) identified by the
**serviceArea** element.
### 5.2.5 Session Description metadata unit
The \@sessionDescriptionURI attribute of the MBS User Service Bundle
Description references a Session Description metadata unit. Each Session
Description metadata unit shall describe one MBS Distribution Session. The
Session Description metadata unit is conveyed in a Session Description
document that shall be formatted according to RFC 8866 [8]. The Session
Description document may be packaged in the same MBS User Service Bundle.
\- The session description for the MBS Object Distribution Method is specified
in clause 6.2.3
\- The session description for the MBS Packet Distribution Method is specified
in clause 7.2.3.
### 5.2.6 MBS Application Service Description metadata unit
In order to support application services in MBS, the MBS User Service Bundle
Description metadata unit shall contain an **appServiceDescription** element
referencing an _Application Service Entry Point_ document which contains the
descriptive information of the resources delivered via MBS and/or unicast
distribution. That Application Service Entry Point document shall be formatted
according to the value of the \@mimeType attribute.
If the MBS User Service Description contains a reference to an Application
Service Entry Point document, then:
1) At least one MBS Distribution Session Description of type Object
Distribution Method shall be present, i.e. the MBS User Service Description
shall include at least one **distributionSessionDescription** element
referencing a Session Description Document that describes an Object
Distribution Method as defined in clause 7.
2) When multiple MBS Distribution Session Descriptions of type Object
Distribution Method are present, the **appServiceDescription** element shall
define a mapping between the Application Service Entry Point document and the
associated MBS Distribution Session.
3) The MBS Distribution Session described by the Session Description document
shall deliver objects that are directly or indirectly referenced by the
Application Service Entry Point document.
4) When the Application Service Entry Point document is a DASH MPD, then all
of the following shall hold:
a) The MBS Distribution Session shall deliver the objects such that the last
packet of the delivered object is available to the MBS Client by no later than
its availability time as announced in the DASH MPD.
b) The **Content-Location** element in the FLUTE File Delivery Table for the
delivered object shall match the URL in the DASH MPD.
Editor's Note: Bullets 4 and 5 should be moved to Clause 7.
4) If an update to the Application Service Entry Point document is delivered
as a FLUTE transmission object then the **Content-Location** element in the
FLUTE File Delivery Table for the delivered object shall match the URL of the
referenced Application Service Entry Point document.
In the case of 3GP-DASH formatted content, the **appServiceDescription**
element may refer to a unified media manifest document which describes
Representations available for both MBS reception and unicast retrieval, and
this shall be used by MBS Clients compliant with this specification. In
practical deployments, different subsets of the Representations described by
the unified manifest document and referenced by such **appServiceDescription**
may be specified for:
\- Availability via MBS delivery only,
\- Availability via both unicast and MBS delivery,
\- Availability via unicast only, and the Representation is redundant in MBS
area coverage, i.e. the usage of these resources does not provide an improved
user experience. As an example, this may be a lower bitrate Representation of
a media component for which a higher bitrate is available over MBS
distribution, and
\- Availability always via unicast, and the Representation is supplementary in
MBS area coverage, i.e. even in MBS area coverage these resources provide an
improved user experience. As an example, this may be a secondary language that
is only accessible over unicast.
All resources that are directly or indirectly referenced in the Application
Service Entry Point document of this metadata unit that are expected to be
retrieved by HTTP GET shall be delivered by at least one of the MBS
Distribution Sessions associated with the MBS User Service Description.
### 5.2.7 MBS Schedule Description metadata unit
Availability of the Schedule Description metadata unit is indicated by the
presence of the **scheduleDescription** element in the MBS User Service Bundle
Description metadata unit. The URI of the Schedule Description instance
document is provided by the \@scheduleDescriptionURI attribute in the
**scheduleDescription** element.
A Schedule Description instance document describes the distribution schedule
of the MBS Distribution Session and the availability of content via unicast
delivery for an MBS User Service in terms of:
\- Start/stop lists,
\- Recurrence information,
\- The service ID or service class to which the schedule may apply,
An MBS User Service containing multiple content components may be carried on a
single MBS Distribution Session, or on multiple MBS Distribution Sessions. The
MBS Client can expect to receive MBS data during the described time period(s)
when at least one of the MBS Distribution Sessions for the MBS User Service is
active.
A Schedule Description instance document may also include a schedule of when
the objects are intended to be transmitted as part of an MBS Distribution
Session using the Object Distribution Method. The object schedule information
is defined in terms of:
\- The service ID or service class to which the object schedule applies,
\- An object transmission schedule listing for each object:
\- Object URI,
\- A list of start and end times for distribution of the object via MBS,
A Schedule Description instance document may be delivered to the MBS Client:
\- prior to the MBS Distribution Session as part of the MBS User Service
Announcement along with the Session Description metadata unit (out-of-band of
that session); or
\- in band within an MBS Distribution Session; or
\- via an MBS Distribution Session dedicated to the transport of Schedule
Description instance documents.
The most recently delivered Schedule Description instance document shall take
priority, such that schedule parameters received prior to -- and out-of-band
of -- the MBS Distribution Session they apply to are regarded as \"initial
defaults\", and schedule parameters received in-band with the MBS Distribution
Session overwrite the earlier received schedule parameters.
The Schedule Description instance document is clearly identified using a URI,
to enable cross-referencing by the MBS Client of instance documents delivered
in band and out of band.
The session schedule and object transmission schedule are described in the
Schedule Description instance document respectively by the **sessionSchedule**
and **objectSchedule** elements.
\- The start and stop time of a single **sessionSchedule** is specified by the
**start** and **stop** elements.
\- The start and stop time of a single **objectSchedule** is specified by the
\@start and \@end attributes.
In both cases the time is specified as the absolute date and UTC time. The
duration may be determined by subtracting the start time from the stop time.
The MBS Distribution Session shall be available to the MBS Client during the
time interval(s) announced by the session schedule (i.e.
**scheduleDescription/serviceSchedule/sessionSchedule** element of the
Schedule Description instance document), for either unicast or MBS reception.
In particular, for unicast reception, the Schedule Description is indicative
of the time availability for unicast access of an MBS User Service while the
TMGI for the MBS Distribution Session is not activated, as well as for unicast
fallback reception when the MBS Client is not located in the MBS coverage area
for the service.
The MBS Client may activate reception of that MBS Distribution Session only
within the **sessionSchedule** (and the **objectSchedule** if present) time
window.
When an **objectSchedule** element is present in a **serviceSchedule**
element, then:
\- The MBS Client should not expect that an object described by an
**objectSchedule** will be updated during a time window instance, defined by
\@start and \@end attributes, within a **deliveryInfo** element of that
**objectSchedule**.
\- There shall be only one object version (as defined in the \@File-ETag
attribute in the FLUTE File Delivery Table) transmitted in a time window
defined by the \@start and \@end attributes within a **deliveryInfo** element
for a given **objectSchedule** element.
\- If objectETag attribute is not present, the objects transmitted in the time
windows from different **deliveryInfo** elements in an **objectSchedule**
should not be expected to be the same object version.
\- If the \@objectETag attribute is present, there shall be only one object
version transmitted in all of the time windows delimited by the start and end
attributes of each of the one or more **deliveryInfo** elements.
\- In-band Schedule Description instance document updates can be used to
provide a dynamic schedule update to override the existing delivery schedule,
such as using the \@cancelled attribute mechanism specified in this clause.
\- A **sessionSchedule** element in the same **serviceSchedule** element shall
be present, and its **start** and **stop** elements shall specify a time
window that completely overlaps the time windows specified in each of the
**objectSchedule** elements of the same **serviceSchedule**.
When a **sessionSchedule** is present and there are no **objectSchedule**
child elements in a **serviceSchedule** , then the MBS Client should download
each new object, independently of whether the MBS Distribution Session uses
the MBS Object Distribution Method or the MBS Packet Distribution Method.
The **objectSchedule** element specifies details about the objects to be
delivered during an MBS Distribution Session. The \@sessionId attribute, if
present, identifies the MBS Distribution Session for each object. If not
present, an MBS Client shall instead determine the MBS Distribution Session by
examining the Session Description metadata unit for the MBS Distribution
Session. The \@objectETag attribute of the **objectSchedule** element is the
version identifier of the object. If present, the purpose of this entity tag
is to enable an MBS Client to determine if an object has changed since a prior
reception without having to download the object.
The **scheduleUpdate** element specifies a time after which MBS Client shall
seek to update its schedule information by acquiring the latest available
Schedule Description instance document.
An \@index attribute is included as a child of the **sessionSchedule**
element. If the **sessionSchedule** does not describe any session
reoccurrence, then the index corresponds to the single session occurrence. If
the **sessionSchedule** describes one or more reoccurrences the \@index is the
starting index of the first session occurrence with the index value increased
by one for each session reoccurrence.
A \@cancelled attribute is defined as a child of the
**objectSchedule/objectURI** element.
\- If the \@cancelled attribute is set to \"_true_ \" or \"_1_ \", then the
transmission of the object identified by the **objectURI** element is
cancelled, and the MBS Client shall cancel any applicable repair and/or
reception reporting procedures for that object.
If this object schedule-level cancellation indication in the updated schedule
description is received after the associated object has already been
delivered, then any related repair or reception reporting for that object
(associated with its parent service), either in progress or yet to occur,
shall be aborted.
\- If the \@cancelled attribute is set to \"_false_ \" or \"_0_ \" or is
absent, then normal object transmission and associated delivery procedures, if
applicable, shall occur.
A **sessionScheduleOverride** element is defined as a child of the
**serviceSchedule** element. If present, the **sessionScheduleOverride**
element indicates either the cancellation of the session occurrence, or
schedule override, as follows:
\- If the \@cancelled attribute (a child of **sessionScheduleOverride**
element) is set to \"_true_ \" or \"_1_ \", then the transmission of the MBS
Distribution Session identified by the index attribute (a child of
**sessionScheduleOverride** element) is cancelled, and the MBS Client shall
cancel any applicable repair and/or reception reporting for all objects
belonging to that MBS Distribution Session.
If this session schedule-level cancellation indication in the updated schedule
description is received after any of the associated objects have already been
delivered, then any related repair or reception reporting for those objects
(associated with their parent service(s)), either in progress or yet to occur,
shall be aborted.
\- If the \@cancelled attribute (a child of **sessionScheduleOverride**
element) is set to \"_false_ \" or \"_0_ \" or is absent, then the **start**
and **stop** time elements (children of **sessionScheduleOverride** element)
shall override the nominal start and stop time of the transmission schedule of
the session as identified by the \@index attribute (a child of
**sessionScheduleOverride** element).
The value of the \@index attribute in the **sessionScheduleOverride** element
corresponds to any of the value of the index element in the
**reoccurenceStartStopType** in the **sessionSchedule** element.
Schedule information received in the Schedule Description metadata unit shall
take precedence over timing information that may have been received in the
Session Description metadata unit (_t_ and/or _r_ lines in the SDP).
### 5.2.8 MBS Object Repair Parameters metadata unit
An Object Repair Parameters document for the object repair procedures may be
delivered to MBS Clients:
\- Prior to the MBS Distribution Session becoming active, along with the MBS
Distribution Session Description metadata unit (out of band of that session);
or
\- in band within an MBS Distribution Session.
The most recently delivered Object Repair Parameters document shall take
priority, such that configuration parameters received prior to -- and out-of-
band of -- the MBS Distribution Session they apply to are regarded as
\"initial defaults\", and configuration parameters received during -- and in
band with -- the MBS Distribution Session, override the earlier received
parameters. Thus, a method to update parameters dynamically on a short
timescale is provided but, as would be desirable where dynamics are minimal,
is not mandatory.
During the User Service Discovery/Announcement Procedure, the Object Repair
Parameters document is clearly identified using a URI, to enable UE cross-
referencing by the MBS Client of instance documents delivered in band and out
of band.
## 5.3 Delivery of User Service Description
### 5.3.1 General
An MBS User Service Description may be delivered to the MBS Client via MBS
Distribution Sessions at reference point MBS‑4‑MC (see clause 5.3.2) and/or
via a regular unicast PDU Session at reference point MBS‑5 (see clause 5.3.3)
and/or via application-private means at reference point MBS-8.
The syntax of the User Service Description is specified in clause A.2.
The MIME content type of the MBS User Service Description bundle is specified
in clause E.2.
### 5.3.2 Delivery of User Service Description in object carousel
In this case, a bundle of MBS User Service Descriptions is delivered
repeatedly by the MBSTF to the MBSTF Client via a suitable MBS Distribution
Session at reference point MBS‑4‑MC using the Object Distribution Method, as
defined in clause 4.2.4 of TS 26.502 [6]. The operating mode of this MBS
Distribution Session shall be set to _OBJECT_CAROUSEL and relies on an object
manifest to characterize the repetition and the update pattern of the MBS User
Service Announcement information._ The object manifest is specified in clause
6.1.2.
As defined in clause 5.4 of TS 26.502 [6], the MBSTF Client announces the
arrival of an MBS User Service Description to the MBSF Client using a suitable
notification at internal reference point MBS‑7′, and the MBSF Client may
subsequently retrieve the MBS User Service Description from the MBSTF Client
via internal reference point MBS‑6′. It may do so using procedures equivalent
to those specified for unicast retrieval at reference point MBS‑5 (see clause
5.3.3). In this case, the MBSTF Client acts as a proxy for the MBS AF.
### 5.3.3 Delivery of User Service Description via unicast PDU Session
In this case, a bundle of one or more MBS User Service Descriptions is
retrieved by the MBSF Client from the MBS AF at reference point MBS‑5 via a
regular unicast PDU Session.
The API at this reference point is specified in clause 9.2. The OpenAPI [14]
specification of the User Service Description retrieval API can be found in
clause A.2.
# 6 Object Distribution Method
## 6.1 General
### 6.1.1 Overview
The Object Distribution Method supports the transmission of media segments,
e.g. CMAF media segments [7] and also non-real-time objects.
The MBS Distribution Session shall be provisioned to accommodate the bit rate
of the aggregated object flow, accounting for in-band carriage of metadata
units, protocol header overheads, and FEC redundancy (if configured).
### 6.1.2 Object manifest
An object manifest document describes a list of objects to be distributed in
an MBS Distribution Session. The syntax of the object manifest is specified in
clause D.1. The semantics of the document are specified in table 6.1.2‑1
below.
For each object to be delivered in the MBS Distribution session, the
attributes under the _objects_ property in table 6.1.2‑1 shall be maintained
by the MBSTF.
Table 6.1.2‑1: Properties of object manifest
+-------------------------+-------------+--------------------------+ | Property name | Cardinality | Description | +=========================+=============+==========================+ | _updateInterval_ | Optional | The time interval, | | | | expressed in seconds, | | | | according to which the | | | | MBSTF attempts to | | | | re-acquire the object | | | | manifest when pull-based | | | | object acquisition is | | | | provisioned. | | | | | | | | Ignored by the MBSTF for | | | | push-based object | | | | acquisition. | +-------------------------+-------------+--------------------------+ | _objects_ | Mandatory | The list of objects to | | | | be carouselled from the | | | | MBSTF to the MBSTF | | | | Client. | +-------------------------+-------------+--------------------------+ | > _locator_ | Mandatory | The URL from which the | | | | object is to be ingested | | | | by the MBSTF. | +-------------------------+-------------+--------------------------+ | > _repetitionInterval_ | Optional | The time interval, | | | | expressed in | | | | milliseconds, according | | | | to which the MBSTF will | | | | periodically send the | | | | object to the MBSTF | | | | Client. | | | | | | | | If omitted, the MBSTF | | | | determines the | | | | repetition interval for | | | | the object. | | | | | | | | Ignored by the MBSTF in | | | | Object Collection | | | | operating mode. | +-------------------------+-------------+--------------------------+ | > _keepUpdatedInterval_ | Optional | The time interval, | | | | expressed in seconds, | | | | according to which the | | | | MBSTF is expected to | | | | check for updates made | | | | to the object at its | | | | origin (as indicated by | | | | _locator_ or a redirect | | | | from there to another | | | | location). | | | | | | | | In case of conflicting | | | | information, the MBSTF | | | | should give precedence | | | | in determining the | | | | update interval to the | | | | HTTP cache control | | | | metadata included in the | | | | HTTP response from the | | | | object origin. | | | | | | | | Any changes to the | | | | origin object that are | | | | detected by the MBSTF | | | | shall be reflected in | | | | the MBS Distribution | | | | Session at the earliest | | | | opportunity and the | | | | replacement of one | | | | object with another | | | | shall be signalled to | | | | the MBSTF Client by | | | | means of the object | | | | transport protocol | | | | provisioned at reference | | | | point MBS‑4‑MC. | | | | | | | | If omitted, the MBSTF | | | | shall not attempt to | | | | check for updates to the | | | | object. | | | | | | | | Ignored by the MBSTF in | | | | Object Collection | | | | operating mode. | +-------------------------+-------------+--------------------------+ | > _earliestFetchTime_ | Optional | The MBSTF shall fetch | | | | the object no sooner | | | | than this UTC timestamp. | | | | If absent, then the | | | | object shall be present | | | | at its origin (as | | | | indicated by _locator_ | | | | or a redirect from there | | | | to another location) and | | | | the MBSTF may fetch it | | | | at a time of its | | | | choosing. | +-------------------------+-------------+--------------------------+ | > _latestFetchTime_ | Optional | The MBSTF shall fetch | | | | the object no later than | | | | this UTC timestamp. If | | | | absent, then the object | | | | shall be present at its | | | | origin (as indicated by | | | | _locator_ or a redirect | | | | from there to another | | | | location) and the MBSTF | | | | may fetch it at a time | | | | of its choosing. | +-------------------------+-------------+--------------------------+
## 6.2 Usage of FLUTE for Object Distribution Method
### 6.2.1 General
If FLUTE [12] is used to realise the Object Distribution Method, the MBS
Distribution Session shall conform to the MBMS Download Profile as defined in
clause L.4 of TS 26.346 [7] with the additional requirements in clause 6.2 of
the present document.
The usage of this distribution method is identified in the MBS Session
Description metadata unit as defined in clause 6.2.3, in particular by the
indication of the protocol FLUTE/UDP in combination with the MBS service type.
The MBSTF shall use the Profiled FDT Schema according to clause L.6 of TS
26.346 [7] to describe the object list currently being transmitted in the MBS
Distribution Session.
Generally, the end of transmission of an object is the expiry time for the
latest FDT instance describing the object. Objects shall be described in an
FDT Instance with the _Expires_ attribute. Depending on the operating mode
(clause 6.2.4), different settings of the expiry time and different numbers of
objects per FDT Instance are recommended.
Inclusion of the \@Content-MD5 and \@File-ETag FDT Instance attributes is
optional.
\- The \@File-ETag represents the value of the HTTP entity tag as defined in
section 3.11 of RFC 2616 [13] which may also serve as the version identifier
of the **File** object described by the FDT Instance.
In order to fetch missing portions of an object, the MBS Client may use the
Object Repair services. The Object Repair service is realized as a Byte-Range
based File Repair, as specified in clause 9.3.6.2 of TS 26.346 [7].
NOTE: The use of Alternate-Content-Location-1 and Alternate-Content-Location-2
is not supported.
### 6.2.2 Session Description metadata unit
#### 6.2.2.1 General
The Session Description metadata unit contains the needed information to
activate the reception of an Object Distribution Method. The Session
Description metadata unit is formatted according to the Session Description
Protocol [8]. The Session Description metadata unit for the Object
Distribution Method is based on the Session Description parameters as defined
in clause 7.3 of TS 26.346 [7] with the following restrictions and extensions.
Restrictions:
\- The _Mode of MBMS bearer per media_ parameter (clause 7.3.2.7 of [7]) shall
not be used.
\- The _QoE Metrics_ (as defined in clauses 7.3.2.0 of [7]) shall not be used
\- The _Service-language(s) per media_ (clause 7.3.2.9 of [7]) shall not be
used. It is assumed that the service languages are described within an
application manifest.
\- The _Alternative TMGI_ (clause 7.3.2.12 of [7]) shall not be used.
\- The _Start time_ and _End time_ of the session (SDP _t_ -line) shall
indicate a superset of the active times specified in the MBS Schedule
Description metadata unit, if present. If there is no schedule specified, both
values should be set to zero indicating undefined times.
Extensions:
\- When an MBS Session is of MBS Service Type _Broadcast_ or when the
Multicast MBS Session Type uses a TMGI as MBS Session ID, the _MBS service
type of MBS Session_ declaration attribute as defined in clause 6.2.2.2 shall
be present in the Session Description.
#### 6.2.2.2 MBS service type of MBS Session
A new MBS service type declaration attribute is defined which results in,
e.g.:
\- _a=mbs-servicetype:broadcast 123869108302929_
or:
\- _a=mbs-servicetype:multicast 123869108302929_
The MBS service type declaration attribute shall be used in Session
Description metadata to indicate the type of the corresponding MBS
Distribution Session as defined in table 6.2.2.2‑1.
Table 6.2.2.2‑1: Assignment of mbs-servicetype attribute value
Attribute value Meaning
* * *
_multicast_ The MBS Distribution Session is delivered using a Multicast MBS
Session. _broadcast_ The MBS Distribution Session is delivered using a
Broadcast MBS Session.
The MBS service type attribute shall be declared at session level in the
Session Description metadata unit. The session level attribute applies to all
media entries without a media-level occurrence of the _mbs-servicetype_
attribute. The Session Description metadata unit shall include only a single
instance of MBS service type declaration attribute.
Definition:
\- _mbs-service-type-declaration-line = \"a=mbs-servicetype:\"
(\"broadcast\"/\"multicast\" SP tmgi) CRLF_
\- _tmgi = 1*15DIGIT_
EXAMPLE:
UK MCC = 234 _(MCC Digit 1 = 2; MCC Digit 2 = 3 and MCC Digit 3 = 4)_
Vodafone UK MNC = 15
and, with padding, Vodafone UK MNC = 15F _(MNC Digit 1 = 1; MNC Digit 2 = 5
and MNC Digit 3 = F)_
MBS Service ID = 70A886
Therefore, TMGI = 70A886 32F451 (Hex) or 123869108302929 (Decimal)
The Temporary Mobile Group Identity (_tmgi_) information element is defined in
TS 24.008 [11] including the coding of the fields. Octets 3 to 8 (MBS Service
ID, MCC and MNC) shall be placed in the _tmgi_ attribute of the MBS service
type declaration line, and are encoded as a decimal number. Octet 3 is the
most significant octet. Because this is encoded as a decimal number, leading
zeros of the MBS Service ID field may be omitted.
#### 6.2.2.3 SDP examples for FLUTE Session
Listing 6.2.2.3‑1 provides a full example of an SDP description describing a
FLUTE-based MBS Distribution Session using the Object Distribution Method with
a TMGI as MBS Session Id:
Listing 6.2.2.3‑1: Session Description metadata unit for\ FLUTE-based MBS
Distribution Session with TMGI
+--------------------------------------------------------------------+ | _v=0_ | | | | _o=user123 2890844526 2890842807 IN IP6 2201:056D::112E:144A:1E24_ | | | | _s=Object Distribution session example_ | | | | _i=More information_ | | | | _t=2873397496 2873404696_ | | | | _a=mbs-servicetype:broadcast 123869108302929_ | | | | _a=FEC-declaration:0 encoding-id=1_ | | | | _a=source-filter: incl IN IP6 * 2001:210:1:2:240:96FF:FE25:8EC9_ | | | | _a=flute-tsi:3_ | | | | _m=application 12345 FLUTE/UDP 0_ | | | | _c=IN IP6 FF1E:03AD::7F2E:172A:1E24/1_ | | | | _b=1000_ | | | | _a=lang:EN_ | | | | _a=FEC:0_ | +--------------------------------------------------------------------+
Listing 6.2.2.3‑2 provides a second example of an SDP description describing a
FLUTE-based MBS Distribution Session using the Object Distribution Method and
which indicates that 25% redundant FEC protection is applied to the FEC
encoding of the video Segments of the associated DASH-formatted content:
Listing 6.2.2.3‑2: Session Description metadata unit for\ FLUTE-based MBS
Distribution Session with TMGI and 25% FEC redundancy
+-------------------------------------------------------------------------+ | _v=0_ | | | | _o=user123 2890844526 2890842807 IN IP6 2201:056D::112E:144A:1E24_ | | | | _s=Object Distribution session carrying 2-hour DASH-packaged programme_ | | | | _i=More information_ | | | | _t=3615124600 3615131800_ | | | | _a=mbs-servicetype:broadcast 123869108302929_ | | | | _a=FEC-declaration:0 encoding-id=1_ | | | | _a=FEC-redundancy-level:0 redundancy-level=25_ | | | | _a=source-filter: incl IN IP6 * 2001:210:1:2:240:96FF:FE25:8EC9_ | | | | _a=flute-tsi:5_ | | | | _m=video 10111 FLUTE/UDP 0_ | | | | _c=IN IP6 FF1E:03AD::7F2E:172A:1E24/1_ | | | | _b=2048_ | | | | _a=lang:EN_ | +-------------------------------------------------------------------------+
### 6.2.3 Operating modes for Object Distribution Method
#### 6.2.3.1 Introduction
The operating modes for the Object Distribution Method are defined in clause
6.1 of TS 26.502 [6]. Operating modes primarily describe the operation of the
MBSTF to convert ingest data into an MBS Distribution Session. The following
clauses specify how FLUTE is used for each operating mode.
#### 6.2.3.2 Single object operating mode
Single object operating mode (_OBJECT_SINGLE_) refers to the case in which a
single object is distributed via the Object Distribution Method.
No specific aspects beyond the general provisions in clauses 6.1, 6.2.1 and
6.2.2 apply to this operating mode.
#### 6.2.3.3 Object collection operating mode
Object collection operating mode (_OBJECT_COLLECTION_) refers to the case in
which multiple objects are distributed via the Object Distribution Method. The
list of objects to be distributed is described by an object manifest document
as specified in clause 6.1.2. The objects listed in the manifest are
distributed only once. Each object listed in the manifest is pulled by the
MBSTF from the location indicated prior to inclusion in the FLUTE Session
corresponding to the MBS Distribution Session.
In this operating mode, the FDT Instance should describe all objects that are
part of the collection.
#### 6.2.3.4 Object carousel operating mode
Object carousel operating mode (_OBJECT_CAROUSEL_) refers to the case in which
one or multiple objects are distributed via the Object Distribution Method in
a repeated fashion. The list of objects to be distributed is described by an
object manifest document as specified in clause 6.1.2. Each object listed in
the manifest is pulled by the MBSTF from the location indicated prior to
inclusion in the FLUTE Session corresponding to the MBS Distribution Session.
The list of objects described in the manifest may be updated over time by
providing a replacement object manifest.
In this operating mode, the FDT Instance should describe all objects that are
currently available in the FLUTE Session, considering the potential object
update interval.
#### 6.2.3.5 Segment streaming operating mode
Segment streaming operating mode (_OBJECT_STREAMING_) refers to the case for
which a sequence of objects, typically representing timed segments from a
timed presentation, are distributed using the Object Distribution Method. The
sequence of objects is referred to as an _object flow_. This operating mode is
recommended for streaming DASH or HLS content to a Media Player in the UE
using MBS User Services.
NOTE: This operating mode may also be used for non-media object flows, e.g. in
the absence of an Application Service Description.
For each object associated with the object flow to be delivered in the MBS
distribution session the following information shall be maintained by the
MBSTF in an object list:
\- The URL used by the MBS-Aware Application to request the object, derived
from the object ingest URL.
\- The object's _latest availability start time_ at the MBS Client. After this
time, the MBS-Aware Application may request the full object from the MBSTF
Client by using the URL of the object.
This value is determined for each object based on an availability start time
at the point of ingest (i.e. reception of first byte of the object) combined
with a configured distribution offset.
\- The object's _availability end time_ from the MBSTF Client. After this
time, the object may no longer be requested by the MBS-Aware Application.
This value is determined for each object based on an availability start time
at the point of ingest (i.e. reception of first byte of the object) combined
with a configured clean-up time.
The object list is typically extended over time, for example as new objects
(e.g. media segments) become available.
The object list may, for example, be provided by an explicit object
distribution manifest.
NOTE: An object distribution manifest format is not defined in the present
document.
The object list may also be defined by a presentation manifest (e.g. DASH
MPD), for example in the case of an Application Service, for which the
manifest is provided as part of the User Service Description.
When the Application Service Entry Point document is a DASH MPD, this document
is used by the MBSTF to update the object list. The DASH MPD may itself be
included in the object list, and hence be delivered in band with the media
segment objects it describes on the same MBS Distribution Session. If the
content of the Application Service Entry Point document changes during an MBS
User Data Ingest Session, the updated document shall be reflected in the MBS
Distribution Session at the soonest opportunity.
For the segment streaming operating mode, the MBSTF acts as follows based on
the object list:
\- The MBSTF shall transmit each object in the object list such that the last
packet of the delivered FLUTE transmission object (including any FEC recovery
packets, when configured) is available at the MBSTF Client latest at its
latest availability start time.
\- An FDT Instance object should be sent frequently by the MBSTF, describing
all objects of the object list that are not yet fully transmitted.
\- The **Content-Location** element in the FDT Instance shall match the URL of
the corresponding object in the object list. The URL may be rewritten by the
MBSTF using the Object distribution base URL property of the MBS Distribution
Session.
\- The **File** \@Expires attribute for each object shall be set such that it
is equal to or earlier than its _latest availability start time_.
\- The **Cache-Control** \@Expires attribute shall be used to indicate the
_availability end time of the object._
**\- Content-MD5** and **File-ETag** may optionally be used.
# 7 Packet Distribution Method
## 7.1 General
The Packet Distribution Method reuses different delivery concepts from TS
26.346 [7]. Additional distribution methods may be defined in future.
## 7.2 Re-using MBMS Delivery Method as Packet Distribution Method
### 7.2.1 General
The Packet Distribution Method combines three different delivery methods of TS
26.346 [7] (namely the MBMS Streaming Delivery Method, Group Communication
Delivery Method and Transparent Delivery Method) into a single distribution
method, with a set of modifications.
For the Packet Distribution Method, the MBSTF may handle the ingested content
on three different protocol layers according to the operating mode provisioned
for the MBS Distribution Session:
\- _Proxy mode:_ The MBSTF handles UDP packet payloads and forwards UDP packet
payloads from ingest into the MBS Distribution Session. The MBSTF may use
different UDP ports for the MBS Distribution Session. The MBSTF re-uses the
Proxy Mode of the Transparent Delivery Method as defined in clause 8B of [7].
\- _Forward-only mode:_ The MBSTF receives complete IP packets and forwards
the ingested packets as MBS PDUs. The MBSTF re-uses the Group Communication
Delivery Method as defined in clause 8A of [7] and the Forward-Only Mode of
the Transparent Delivery Method as defined in clause 8B of [7].
### 7.2.3 Session Description
#### 7.2.3.1 General
The Session Description metadata unit contains the needed information to
activate the reception of a Packet Distribution Method. The Session
Description metadata unit is formatted according to the Session Description
Protocol [8]. The Session Description metadata unit for the Packet
Distribution Method is based on the Session Description parameters as defined
in clauses 8.3, 8A.3 and 8B.3 of TS 26.346 [7] with the following restrictions
and extensions.
Restrictions:
\- The _Mode of MBMS bearer per media_ parameter (clauses 8.3.1.5 and 8B.3.2
of [7]) shall not be used.
\- The _QoE Metrics_ (as defined in clauses 8.3.2.1 and 8.4 of [7]) shall not
be used.
\- ROHC header compression (as defined in clauses 8A.4 and 8B.4 of [7]) shall
not be used.
NOTE: ROHC is handled by RAN in 5MBS.
\- The _Alternative TMGI_ (clause 7.3.2.12 of [7]) shall not be used.
\- The _Start time_ and _End time_ of the session (SDP _t_ line) shall
indicate a superset of the active times specified in the MBS Schedule
Description metadata unit, if present. If there is no schedule specified, both
values should be set to zero indicating undefined times.
Extensions:
\- When the MBS User Service is of MBS Service Type _Broadcast_ or when an MBS
User Service of type _Multicast_ uses a TMGI as its MBS Session ID, the _MBS
service type of MBS Session_ declaration attribute as defined in clause
6.2.2.2 shall be present in the Session Description.
#### 7.2.3.2 SDP examples for Packet Distribution Method
Below is a full example of SDP description describing the media streams part
of an MBS Packet Distribution session for RTP streaming:
Listing 7.2.3.2‑1: Session description for RTP streaming
+----------------------------------------------------------------------+ | v=0\ | | o=ghost 2890844526 2890842807 IN IP4 192.168.10.10\ | | s=3GPP MBS Packet Distribution SDP Example\ | | i=Example of MBS Packet Distribution SDP file\ | | u=http://www.infoserver.example.com/ae600\ | | e=ghost\@mailserver.example.com\ | | _c=IN IP6 FF1E:03AD::7F2E:172A:1E24_ \ | | t=0 0 | | | | b=AS:77 | | | | a=mbs-mode:broadcast 123869108302929 | | | | a=source-filter: incl IN IP6 * 2001:210:1:2:240:96FF:FE25:8EC9 | | | | m=video 4002 RTP/AVP 96 | | | | b=TIAS:62000 | | | | b=RR:0 | | | | b=RS:600 | | | | a=maxprate:17 | | | | a=rtpmap:96 H264/90000\ | | a=fmtp:96 profile-level-id=42A01E; packetization-mode=1; | | sprop-parameter-sets=Z0IACpZTBYmI,aMljiA== | +----------------------------------------------------------------------+
The following is a full example of SDP description for transparent streaming
with two MPEG-2 Transport Streams:
Listing 7.2.3.2‑2: Session description for MPEG‑2 Transport Stream
+-----------------------------------------------------------------+ | v=0\ | | o=ghost 2890844526 2890842807 IN IP4 192.168.10.10\ | | s=3GPP MBS Transport-only SDP Example\ | | i=Example of MBS transport-only SDP file\ | | u=http://www.infoserver.example.com/ae600\ | | e=ghost\@mailserver.example.com\ | | _c=IN IP6 FF1E:03AD::7F2E:172A:1E24_ \ | | t=3034423619 3042462419 | | | | b=AS:8000000 | | | | a=mbs-mode:broadcast 123869108302929 | | | | a=source-filter: incl IN IP6 * 2001:210:1:2:240:96FF:FE25:8EC9 | | | | m=video 4002 UDP/RTP/AVP 96 | | | | b=TIAS:4000000 | | | | a=mms-framing-header:0 2 | | | | a=rtpmap:100 MP2T/90000 | | | | m=video 4002 RTP/AVP 98 | | | | b=TIAS:4000000 | | | | a=rtpmap:100 MP2T/90000 | | | | a=MBS-framing-trailer:0 2 | +-----------------------------------------------------------------+
# 8 General aspects of APIs for MBS User Services
## 8.1 HTTP resource URIs and paths
The resource URI used in each HTTP request to the API provider shall have the
structure defined in subclause 4.4.1 of TS 29.501 [16], i.e.:
_{apiRoot}_ /_{apiName}_ /_{apiVersion}_ /_{apiSpecificResourceUriPart}_
with the following components:
\- _{apiRoot}_ shall be set as described in TS 29.501 [16].
\- _{apiName}_ shall be set as defined by the following clauses.
\- _{apiVersion}_ shall be set to \"v1\" in this release.
\- _{apiSpecificResourceUriPart}_ shall be set as described in the following
clauses.
## 8.2 Usage of HTTP
### 8.2.1 HTTP protocol version
#### 8.2.1.1 General
Content interfaces at reference points specified in the present document shall
expose an HTTP/1.1 [21] endpoint to API clients. They may additionally expose
an HTTP/2 [22] endpoint, including support for the HTTP/2 starting mechanisms
specified in section 3 of [22]. The API client may choose any supported HTTP
protocol version. TLS [24] shall be supported on these interfaces and, where
the option to use cleartext HTTP is available in the version of HTTP selected
by the API client, it should opt for HTTPS interactions in preference.
#### 8.2.1.2 MBSF
The HTTP protocol version used to invoke _Nmbsf_ service operations on the
MBSF at reference point Nbm10 is specified in clauses 6.1.2.1 and 6.2.2.1 of
TS 29.580 [17].
#### 8.2.1.3 MBSTF
The HTTP protocol version used to invoke _Nmbstf_ service operations on the
MBSTF at reference point Nmb2 is specified in clause 6.1.2.1 of TS 29.581
[18].
The endpoint exposed to the MBSF at reference point Nmb2 for the purpose of
pushing object manifests into the MBSTF shall comply with the general
provisions specified in clause 8.2.1.1.
The endpoint exposed to the MBS Application Provider (AF/AS) at reference
point Nmb8 for the purpose of pushing objects into the MBSTF shall comply with
the general provisions specified in clause 8.2.1.1.
#### 8.2.1.4 MBS AF
The endpoint exposed to the MBSF Client at reference point MBS‑5 for the
purpose of retrieving User Service Descriptions using the API specified in
clause 9.2 shall comply with the general provisions specified in clause
8.2.1.1.
Editor\'s Note: Possibly add MBS‑10 here to specify the use of HTTP in the
User Plane security procedure, or else specify the use of this reference point
in a new clause 8.2.1.6 specifically for the MBSSF.
The endpoint exposed to the MBSTF at reference point MBS‑11 for the purpose of
retrieving object manifests and User Service Descriptions shall comply with
the general provisions specified in clause 8.2.1.1.
All responses from the MBS AF that carry a message body shall include a strong
entity tag in the form of an ETag response header field and a modification
timestamp in the form of a Last-Modified response header per section 8.8 of
RFC 9110 [19].
All endpoints exposed by the MBS AF shall support conditional HTTP requests
using the header fields If-none-Match and If-Modified-Since per section 13 of
RFC 9110 [19].
#### 8.2.1.5 MBS AS
The endpoint exposed to the MBSTF Client at reference point MBS‑4‑UC for the
purpose of unicast object repair shall comply with the general provisions
specified in clause 8.2.1.1.
Byte range requests per section 14 of RFC 9110 [19] shall be supported by the
MBS AS at reference point MBS‑4‑UC for the purpose of efficient unicast object
repair by the MBSTF Client.
### 8.2.2 HTTP message bodies for API resources
Individual APIs in the present document specify the syntax and encoding of
HTTP request and response message bodies. MIME content types for a subset of
these are registered in annex E.
### 8.2.3 Usage of HTTP headers
#### 8.2.3.1 General
Standard HTTP headers shall be used in accordance with clause 5.2.2 of TS
29.500 [15], encoded appropriately for the version of HTTP in use.
#### 8.2.3.2 User Agent identification
##### 8.2.3.2.1 General
When one of the MBS User Services functions defined in TS 26.502 [6] makes
requests to an HTTP endpoint specified in the present document, it shall
identify itself to the HTTP server using a User-Agent request header field
(see section 10.1.5 of RFC 9110 [19]) that includes a _product_ identifier
indicating the type of client function making the request in its _token_
element.
The optional _product-version_ suffix shall be present and should indicate the
version number of the present document (without the leading \"V\") with which
the client implementation complies and shall, at minimum, indicate the 3GPP
release number with which the implementation complies.
The User-Agent request header field may also include _comment_ elements (see
section 5.6.5 of RFC 9110 [19]) following the above specified _product_
identifier, as well as additional vendor-specific _product_ identifiers and
_comment_ elements compliant with the syntax and guidance provided in section
10.1.5 of RFC 9110 [19].
EXAMPLE 1: MBSTF/17.4.0 (build2114) libhttp/1.23.2
EXAMPLE 2: MBSFClient/17
##### 8.2.3.2.2 MBSF identification
When invoking the _Nmbstf_ service at reference point Nmb2, the MBSF
identifies itself to the MBSTF using a User-Agent request header as specified
in clauses 6.1.2.2.1 and 6.2.2.2.1 of TS 29.580 [17].
##### 8.2.3.2.3 MBSTF identification
When ingesting content using the pull-based object acquisition method (see
table 4.5.6‑2 of TS 26.502 [6]), the MBSTF shall identify itself to the MBS
Application Provider (AF/AS) at reference point Nmb8 and to the MBS AF at
reference point MBS‑11 using a User-Agent request header field that complies
with the general provisions specified in clause 8.2.3.2.1. The product
identifier _token_ shall be set to the value MBSTF.
##### 8.2.3.2.4 MBSF Client identification
The MBSF Client shall identify itself to the MBS AF at reference point MBS‑5
and to the MBSSF at reference point MBS‑10 using a User-Agent request header
field that complies with the general provisions specified in clause 8.2.3.2.1.
The product identifier _token_ shall be set to the value MBSF‌Client.
##### 8.2.3.2.5 MBSTF Client identification
The MBSTF Client shall identify itself to the MBS AS at reference point
MBS‑4‑UC using a User-Agent request header field that complies with the
general provisions specified in clause 8.2.3.2.1. The product identifier
_token_ shall be set to the value MBSTF‌Client.
#### 8.2.3.3 Server identification
##### 8.2.3.3.1 General
When one of the MBS User Services functions defined in TS 26.502 [6] responds
to an HTTP request, it shall identify itself to the requesting client using a
Server response header (see section 10.2.4 of RFC 9110 [19]) that includes a
_product_ identifier indicating the type and host name of the responding
server in its _token_ element. The server type and host name shall be
separated by a single hyphen (\'-\') character.
The optional _product-version_ suffix shall be present and should indicate the
version number of the present document (without the leading \"V\") with which
the server implementation complies and shall, at minimum, indicate the 3GPP
release number with which the implementation complies.
The Server response header field may also include _comment_ elements (see
section 5.6.5 of RFC 9110 [19]) following the above specified _product_
identifier, as well as additional vendor-specific _product_ identifiers and
_comment_ elements compliant with the syntax and guidance provided in section
10.2.4 of RFC 9110 [19].
EXAMPLE 1: MBSTF-vm10665.mno.net/17.4.0 (api=1.0.0) libsbi/2.1 libnf/1.2
EXAMPLE 2: MBSAF-vm10240.mno.net/17 (api=1.0.0) libsbi/2.1 libnf/1.2
##### 8.2.3.3.2 MBSF identification
When responding to _Nmbsf_ service operations made by the MBS Application
Provider (AF/AS) at reference point Nmb10, the MBSF\'s Server response header
is set as specified in clauses 6.1.2.2.1 and 6.2.2.2.1 of TS 29.580 [17].
##### 8.2.3.3.3 MBSTF identification
When responding to _Nmbstf_ service operations made by the MBSF at reference
point Nmb2, the MBSTF\'s Server response header is set as specified in clause
6.1.2.2.1 of TS 29.581 [18].
When acknowledging objects published using the push-based object acquisition
method by the MBSF at reference point Nmb2 or by the MBS Application Provider
(AF/AS) at reference point Nmb10, the MBSTF shall identify itself using a
Server response header field that complies with the general provisions
specified in clause 8.2.3.3.1. The product identifier token shall be set to
the value MBSTF.
##### 8.2.3.3.4 MBS AF identification
The MBS AF shall identify itself to the MBSF Client at reference point MBS‑5
and to the MBSTF at reference point MBS‑11 using a Server response header
field that complies with the general provisions specified in clause 8.2.3.3.1.
The product identifier token shall be set to the value MBSAF.
##### 8.2.3.3.5 MBS AS identification
The MBS AS shall identify itself to the MBSTF Client at reference points
MBS‑4‑UC using a Server response header field that complies with the general
provisions specified in clause 8.2.3.3.1. The product identifier token shall
be set to the value MBSAS.
#### 8.2.3.4 Support for conditional HTTP GET requests
The provisions in clause 5.2.2 of TS 29.500 [15] relating to conditional GET
requests using the If-None-Match and If-Modified-Since request headers apply
to all Network Functions in the MBS System. In particular:
\- This is specified for invocations of the _Nmbsf_ service at reference point
Nmb10 in clauses 6.1.2.2.1 and 6.2.2.2.1 of TS 29.580 [17].
\- This is specified for invocations of the _Nmbstf_ service at reference
point Nmb2 in clause 6.1.2.2.1 of TS 29.581 [18].
All responses from the MBS AF at reference points MBS‑5 and MBS‑11 that carry
a resource message body shall include:
\- a strong entity tag for the resource, conveyed in an ETag response header
per section 8.8.3 of RFC 9110 [19],
\- a resource modification timestamp, conveyed in a Last-Modified response
header per section 8.8.2 of RFC 9110 [19], and
\- a predicted time-to-live period for the resource, conveyed in a Cache-
Control: max-age response header per section 5.2 of RFC 9111 [20].
All API endpoints on the MBS AF that expose the HTTP GET method shall support
conditional requests using the If-None-Match and If-Modified-Since request
headers per section 13.1.2 and 13.1.3 respectively of RFC 9110 [19]. API
clients should not attempt to revalidate their cached copy of a resource using
a conditional GET request before the indicated time-to-live period has
elapsed.
#### 8.2.3.5 Support for conditional HTTP POST, PUT, PATCH and DELETE requests
The provisions in clause 5.2.2 of TS 29.500 [15] relating to conditional POST,
PUT, PATCH and DELETE requests using the If-Match request header apply to all
Network Functions in the MBS System. In particular:
\- This is specified for invocations of the _Nmbsf_ service at reference point
Nmb10 in clauses 6.1.2.2.1 and 6.2.2.2.1 of TS 29.580 [17].
\- This is specified for invocations of the _Nmbstf_ service at reference
point Nmb2 in clause 6.1.2.2.1 of TS 29.581 [18].
## 8.3 HTTP response codes
Guidelines for error responses to the invocation of APIs of NF services are
specified in clause 4.8 of TS 29.501 [16]. API-specific error responses are
specified in the respective technical specifications.
# 9 MBS AF APIs
## 9.1 General
This clause specifies the network APIs exposed by the MBS AF with reference to
the general provisions of clause 8 as they apply to the reference point in
question.
## 9.2 User Service Description retrieval API
### 9.2.1 General
In the case where _Service announcement modes_ (see table 4.5.3‑1 of TS 26.502
[6]) indicates that the MBS User Service Announcement for an MBS User Service
is advertised at reference point MBS‑5, the User Service Description retrieval
API is used by the MBSF Client to retrieve a User Service Description document
(or a set of User Service Description documents) from the MBS AF that enable
reception of the MBS User Service(s) to be initiated by the MBSF Client _._
In the case where _Service announcement modes_ (see table 4.5.3‑1 of TS 26.502
[6]) indicates that the MBS User Service Announcement for an MBS User Service
is advertised via the User Service Announcement Channel at reference point
MBS‑4‑MC, the User Service Description retrieval API is used by the MBSF
Client at reference point MBS‑7′ to retrieve a User Service Description
document (or a set of User Service Description documents) from the MBSTF
Client that enable reception of the MBS User Service(s) to be initiated by the
MBSF Client.
In the absence of prior knowledge about which Service announcement mode(s) are
configured for currently provisioned MBS User Services, an MBSF Client may use
either or both of the above procedures to proactively discover MBS User
Service Announcements.
### 9.2.2 Resource structure
The User Service Description retrieval API is accessible from the MBS AF at
reference point MBS‑5 and from the MBSTF Client at reference point MBS‑7′
through the following URL base path:
_{apiRoot}_ /3gpp-mbs-user-service-discovery/_{apiVersion}_ /
The operations and the corresponding HTTP methods in table 9.2.2-1 are
supported through the above API base path. In each case, the sub-resource path
specified in the second column shall be appended to the URL base path.
Table 9.2.2‑1: Operations supported by the User Service Description retrieval
API
+----------------+----------------+----------------+----------------+ | Operation | Sub-resource | Allowed HTTP | Description | | | path | method(s) | | +================+================+================+================+ | Discover | user | GET | Used to | | User Service | -service-descr | | discover a set | | Descriptions | iptions?‌ _{que | | of User | | | ryParameters}_ | | Service | | | | | Descriptions | | | | | that match a | | | | | set of | | | | | filtering | | | | | criteria | | | | | corresponding | | | | | to at least | | | | | one of the | | | | | query | | | | | parameters | | | | | specified in | | | | | table 9.2.2‑2. | | | | | | | | | | Multiple query | | | | | parameters may | | | | | be | | | | | concatenated | | | | | using the | | | | | ampersand | | | | | (\'&\') | | | | | character as a | | | | | separator with | | | | | the resulting | | | | | semantics of | | | | | logical | | | | | conjunction | | | | | (i.e., Boolean | | | | | AND). | | | | | | | | | | It is an error | | | | | to invoke this | | | | | operation with | | | | | no query | | | | | parameters. | | | | | | | | | | A | | | | | _UserServic | | | | | eDescriptions_ | | | | | bundle | | | | | resource (see | | | | | c | | | | | lause 9.2.3.1) | | | | | is returned | | | | | containing | | | | | User Service | | | | | Descriptions | | | | | matching all | | | | | of the | | | | | specified | | | | | filtering | | | | | criteria, | | | | | which may be | | | | | empty if none | | | | | match all of | | | | | the criteria. | +----------------+----------------+----------------+----------------+ | Retrieve | user-s | GET | The | | User Service | ervice-descrip | | _{exter | | Descritption | tions/‌_{exter | | nalServiceId}_| | | nalServiceId}_ | | uniquely | | | | | identifies a | | | | | single User | | | | | Service | | | | | Description | | | | | resource in | | | | | the MBS AF. | | | | | | | | | | If the | | | | | requested User | | | | | Service is | | | | | known to the | | | | | MBS AF, a | | | | | _User‌Servic | | | | | e‌Description_ | | | | | resource (see | | | | | c | | | | | lause 9.2.3.2) | | | | | is returned. | | | | | Otherwise, a | | | | | suitable HTTP | | | | | error response | | | | | code is | | | | | returned. | +----------------+----------------+----------------+----------------+
Table 9.2.2‑2 specifies the query parameters that may be combined with the
operations specified in table 9.2.2‑1.
Table 9.2.2‑2: Query parameters supported by the User Service Description
retrieval API
Applicable operation Filter name Query parameter Description
* * *
Discover User Service Descritptions Service class service-class=‌
_{serviceClassTermId}_ Used to select User Service Descriptions that are
tagged with the supplied service class term identifier (see table 4.5.3‑1 of
TS 26.502 [6]), which is expressed as a fully-qualified URI string from a
controlled vocabulary (e.g., OMNA BCAST Service Class [25]) with appropriate
URL encoding applied.
### 9.2.3 Data model
#### 9.2.3.1 UserServiceDescriptions resource type
The data model for the _UserServiceDescriptions_ bundle resource is specified
in clause 5.2.2 and clause A.2.
#### 9.2.3.2 UserServiceDescription resource type
The data model for the _UserServiceDescription_ resource is specified in
clause 5.2.3 and clause A.2.
###### ## Annex A (normative): Syntax for Service Announcement
# A.1 XML-based representation
## A.1.1 MBS User Service Description schema
The following schema shall have the filename
\"mbs_user_service_description.xml\".
+----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+
## A.1.2 Object Repair Parameters schema
Below is the formal XML syntax of associated distribution procedure
description instances. Documents following this schema can be identified with
the MIME type \"application/mbs‑object-repair-parameters+xml\". The schema
filename of distribution procedure description is objectrepairparameters.xsd.
+----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+
## A.1.3 Schedule Description schema
Below is the formal XML syntax of schedule information procedure. Documents
following this schema can be identified with the MIME type
\"application/mbms‑schedule+xml\". The file name of XML schema for schedule
description is Schedule-Description.xsd.
+----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+
# A.2 JSON-based representation
## A.2.1 MBS User Service Announcement schema
The following schema shall have the filename
\"TS26517_MBSUserServiceAnnouncement.yaml\".
+----------------------------------------------------------------------+ | openapi: 3.0.0 | | | | info: | | | | title: \'MBS User Service Announcement\' | | | | version: 1.2.0 | | | | description: \| | | | | MBS User Service Announcement Element units. | | | | © 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, | | TTA, TTC). | | | | All rights reserved. | | | | externalDocs: | | | | description: 3GPP TS 26.517 V17.4.0; 5G Multicast-Broadcast User | | Services; Protocols and Formats | | | | url: http://www.3gpp.org/ftp/Specs/archive/26_series/26.517/ | | | | paths: | | | | /user-service-descriptions: | | | | get: | | | | operationId: discoverUserServiceDescriptions | | | | summary: \'Discover User Service Descriptions\' | | | | description: \'Discover User Service Descriptions that match the | | supplied query filter(s). At least one filter query parameter must | | be included in the request URL.\' | | | | parameters: | | | | - in: query | | | | name: service-class | | | | schema: | | | | type: string | | | | required: true | | | | description: \'Filter for User Service Descriptions tagged with the | | supplied service class term identifier expressed as a | | fully-qualified URI string from a controlled vocabulary\' | | | | responses: | | | | \'200\': | | | | # OK | | | | description: \"Success\" | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/UserServiceDescriptions\' | | | | \'204\': | | | | # No Content (no matching User Service Descriptions) | | | | description: \"No Matches Found\" | | | | \'500\': | | | | # Internal Server Error | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | # Service Unavailable | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | /user-service-descriptions/{externalServiceId}: | | | | get: | | | | operationId: retrieveUserServiceDescription | | | | summary: \'Retrieve User Service Description\' | | | | description: \'Retrieve the User Service Description of a single | | service by supplying its external service identifier.\' | | | | parameters: | | | | - name: externalServiceId | | | | in: path | | | | required: true | | | | schema: | | | | type: string | | | | description: \'The external service identifier of a User Service | | provisioned in the MBSF.\' | | | | responses: | | | | \'200\': | | | | # OK | | | | description: \"Success\" | | | | content: | | | | application/json: | | | | schema: | | | | \$ref: \'#/components/schemas/UserServiceDescription\' | | | | \'404\': | | | | # Not Found | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/404\' | | | | \'500\': | | | | # Internal Server Error | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/500\' | | | | \'503\': | | | | # Service Unavailable | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/503\' | | | | default: | | | | \$ref: \'TS29571_CommonData.yaml#/components/responses/default\' | | | | components: | | | | schemas: | | | | UserServiceDescriptions: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/UserServiceDescription\' | | | | minItems: 1 | | | | UserServiceDescription: | | | | type: object | | | | properties: | | | | name: | | | | type: array | | | | items: | | | | type: string | | | | serviceLanguage: | | | | type: array | | | | items: | | | | type: string | | | | serviceId: | | | | type: string | | | | distributionSessionDescription: | | | | \$ref: \'#/components/schemas/DistributionSessionDescription\' | | | | appServiceDescription: | | | | \$ref: \'#/components/schemas/AppServiceDescription\' | | | | scheduleDescription: | | | | \$ref: \'#/components/schemas/ScheduleDescription\' | | | | availabilityInfo: | | | | \$ref: \'#/components/schemas/AvailabilityInformation\' | | | | required: | | | | - serviceId | | | | DistributionSessionDescription: | | | | type: object | | | | properties: | | | | distributionMethod: | | | | \$ref: \'#/components/schemas/DistributionMethod\' | | | | conformanceProfile: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | sessionDescriptionLocator: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | objectRepairParameters: | | | | \$ref: \'#/components/schemas/AssociatedProcedureDescription\' | | | | dataNetworkName: | | | | type: string | | | | mbsAppService: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ApplicationService\' | | | | unicastAppServices: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | unicastAppService: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ApplicationService\' | | | | required: | | | | - distributionMethod | | | | - sessionDescriptionLocator | | | | DistributionMethod: | | | | anyOf: | | | | - type: string | | | | enum: [OBJECT, PACKET] | | | | - type: string | | | | description: > | | | | This string provides forward-compatibility with future | | | | extensions to the enumeration but is not used to encode | | | | content defined in the present version of this API. | | | | AppServiceDescription: | | | | type: object | | | | properties: | | | | mediaEntryPointLocator: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | mimeType: | | | | type: string | | | | identicalContents: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | unicastAppService: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ApplicationService\' | | | | minItems: 2 | | | | alternativeContents: | | | | type: array | | | | items: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ApplicationService\' | | | | ApplicationService: | | | | type: object | | | | properties: | | | | basePattern: | | | | type: string | | | | required: | | | | - basePattern | | | | AvailabilityInformation: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/AvailabilityInformationBinding\' | | | | AvailabilityInformationBinding: | | | | type: object | | | | properties: | | | | mbsServiceArea: | | | | type: array | | | | items: | | | | \$ref: | | \'TS29571_CommonData.yaml#/components/schemas/MbsServiceArea\' | | | | mbsFSAId: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/MbsFsaId\' | | | | radioFrequency: | | | | type: array | | | | items: | | | | type: integer | | | | minimum: 0 | | | | AssociatedProcedureDescription: | | | | type: object | | | | properties: | | | | postObjectRepair: | | | | \$ref: \'#/components/schemas/PostObjectRepair\' | | | | mbsObjectRepair: | | | | \$ref: \'#/components/schemas/MbsObjectRepair\' | | | | PostObjectRepair: | | | | type: object | | | | properties: | | | | serviceLocators: | | | | type: array | | | | items: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | offsetTime: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\' | | | | randomTimePeriod: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\' | | | | MbsObjectRepair: | | | | type: object | | | | properties: | | | | sessionDescriptionURI: | | | | type: string | | | | ScheduleDescription: | | | | type: array | | | | items: | | | | \$ref: \'#/components/schemas/ServiceSchedule\' | | | | ServiceSchedule: | | | | type: object | | | | properties: | | | | sessionSchedule: | | | | \$ref: \'#/components/schemas/SessionSchedule\' | | | | sessionScheduleOverride: | | | | \$ref: \'#/components/schemas/SessionScheduleOverride\' | | | | objectSchedule: | | | | \$ref: \'#/components/schemas/ObjectSchedule\' | | | | serviceId: | | | | type: string | | | | serviceClass: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | required: | | | | - sessionSchedule | | | | - serviceId | | | | - serviceClass | | | | SessionSchedule: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | start: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | stop: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | reoccurencePattern: | | | | type: string | | | | numberOfTimes: | | | | type: integer | | | | minimum: 1 | | | | reoccurenceStopTime: | | | | type: string | | | | index: | | | | type: integer | | | | fDTInstanceLocator: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | required: | | | | - start | | | | - stop | | | | SessionScheduleOverride: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | start: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | stop: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | index: | | | | type: integer | | | | cancelled: | | | | type: boolean | | | | sessionDescriptionLocator: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | ObjectSchedule: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | objectLocator: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\' | | | | sessionId: | | | | type: string | | | | objectEtag: | | | | type: string | | | | unicastOnly: | | | | type: boolean | | | | deliveryInfo: | | | | type: array | | | | items: | | | | type: object | | | | properties: | | | | start: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | | | | stop: | | | | \$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\' | +----------------------------------------------------------------------+
###### ## Annex B (informative): Service Announcement examples
# B.1 XML-based representation
# B.2 JSON-based representation
+----------------------------------------------------------------------+ | { | | | | \"bundleDescription\":[ | | | | { | | | | \"userServiceDescription\":{ | | | | \"name\":[ | | | | \"test1\" | | | | ], | | | | \"serviceLanguage\":[ | | | | \"en-us\" | | | | ], | | | | \"serviceId\":\"urn:test:test:D4-Service:D4-SB:D4-US\", | | | | \"distributionSessionDescription\":{ | | | | \"conformanceProfile\":\"urn:3gpp:...\", | | | | \"session | | DescriptionURI\":\"http://www.test.com/D4-Service/D4-SB/D4-US.sdp\", | | | | \"dataNetworkName\":\"media-dnn\", | | | | \"mbsAppService\":[ | | | | {\"basePa | | ttern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/video/2048/\"}, | | | | {\"ba | | sePattern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/audio/1/\"} | | | | ], | | | | \"unicastAppServices\":[ | | | | {\"unicastAppService\":[ | | | | {\"basePa | | ttern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/video/1024/\"}, | | | | {\"base | | Pattern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/audio/1/\"}] | | | | }, | | | | {\"unicastAppService\":[ | | | | {\"basePa | | ttern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/video/2048/\"}, | | | | {\"base | | Pattern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/audio/1/\"}] | | | | } | | | | ] | | | | }, | | | | \"mbsAppService\":{ | | | | \"MediaManifestDescr | | iptionURI\":\"http://www.test.com/D4-Service/D4-SB/D4-US/adpd.xml\", | | | | \"mimeT | | ype\":\"application/dash+xml;profiles=urn:3GPP:PSS:profile:DASH10\", | | | | \"identicalContents\":[ | | | | { | | | | \"identicalContent\":[ | | | | {\"basePa | | ttern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/video/1024/\"}, | | | | {\"baseP | | attern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/video/2048/\"} | | | | ], | | | | },{ | | | | \"identicalContent\":[ | | | | {\"ba | | sePattern\":\"http://www.test.com/D4-Service/D4-SB/D4-US/audio/1/\"} | | | | ] | | | | }] | | | | }, | | | | \"availabilityInfo\":[ | | | | { | | | | \"infoBinding\":{ | | | | \"mbsServiceArea\":[ | | | | { | | | | \"ncgiList\":[ | | | | { | | | | \"NcgiTai\":{ | | | | \"tai\":{ | | | | \"plmnId\":{ | | | | \"mcc\":\"860\", | | | | \"mnc\":\"15\" | | | | }, | | | | \"tac\":\"0fa0\" | | | | }, | | | | \"cellList\":[ | | | | { | | | | \"Ncgi\":{ | | | | \"plmnId\":{ | | | | \"mcc\":\"860\", | | | | \"mnc\":\"15\" | | | | }, | | | | \"nrCellId\":\"999999999\" | | | | } | | | | }, | | | | { | | | | \"Ncgi\":{ | | | | \"plmnId\":{ | | | | \"mcc\":\"860\", | | | | \"mnc\":\"15\" | | | | }, | | | | \"nrCellId\":\"999999998\" | | | | } | | | | } | | | | ] | | | | } | | | | } | | | | ], | | | | \"taiList\":[ | | | | { | | | | \"tai\":{ | | | | \"plmnId\":{ | | | | \"mcc\":\"860\", | | | | \"mnc\":\"15\" | | | | }, | | | | \"tac\":\"0fa0\" | | | | } | | | | }, | | | | { | | | | \"tai\":{ | | | | \"plmnId\":{ | | | | \"mcc\":\"860\", | | | | \"mnc\":\"15\" | | | | }, | | | | \"tac\":\"0fa0\" | | | | } | | | | } | | | | ] | | | | } | | | | ], | | | | \"mbsFSAId\":[ | | | | \"25532\" | | | | ], | | | | \"radioFrequency\":[ | | | | \"9410\" | | | | ] | | | | } | | | | } | | | | ] | | | | } | | | | } | | | | ] | | | | } | +----------------------------------------------------------------------+
###### ## Annex C (normative): Controlled vocabulary of conformance profiles
The controlled vocabulary is for future study.
###### ## Annex D (normative): Syntax for object manifest
# D.1 Object manifest schema
Below is the formal syntax of the object manifest for use with the Object
Collection or Object Carousel operating mode. The schema shall have the
filename \"TS26517_MBSObjectManifest.yaml\".
+----------------------------------------------------------------------+ | openapi: 3.0.0 | | | | info: | | | | title: MBS User Services Object Manifest | | | | version: 1.0.0 | | | | description: \| | | | | MBS User Services Object Manifest syntax | | | | © 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, | | TTA, TTC). | | | | All rights reserved. | | | | tags: | | | | - name: MBS User Services Object Manifest | | | | description: \'5G Media Streaming: Common Data Types\' | | | | externalDocs: | | | | description: \'TS 26.517 V17.3.0; 5G Multicast-Broadcast User | | Services; Protocols and Formats\' | | | | url: \'https://www.3gpp.org/ftp/Specs/archive/26_series/26.517/\' | | | | paths: {} | | | | components: | | | | schemas: | | | | ObjectManifest: | | | | type: object | | | | description: A manifest describing a set of binary objects to be | | transmitted by the MBSTF as part of the MBS Distribution Session. | | | | required: | | | | - objects | | | | properties: | | | | updateInterval: | | | | type: integer | | | | format: int32 | | | | description: The time period (in seconds) after which the MBSTF | | attempts to re-acquire the object manfiest when pull-based object | | acquisition is provisioned. | | | | objects: | | | | type: array | | | | description: The list of binary objects to be carouselled from the | | MBSTF to the MBSTF Client. | | | | items: | | | | \$ref: \'#/components/schemas/Object\' | | | | Object: | | | | type: object | | | | description: A binary object to be transmitted by the MBSTF as part | | of the MBS Distribution Session. | | | | required: | | | | - locator | | | | properties: | | | | locator: | | | | \$ref: \'TS26512_CommonData.yaml#/components/schemas/AbsoluteUrl\' | | | | repetitionInterval: | | | | type: integer | | | | format: int32 | | | | description: The MBSTF sends the object repeatedly to the MBSTF | | Client with the given interval (in milliseconds). This parameter is | | ignored in the case of Object Collection operating mode. | | | | keepUpdatedInterval: | | | | type: integer | | | | format: int32 | | | | description: The MBSTF checks for changes to the object with the | | given interval (in seconds). This parameter is ignored in the case | | of Object Collection operating mode. | | | | earliestFetchTime: | | | | type: string | | | | format: date-time | | | | description: The MBSTF shall pull each object from its origin | | location no sooner than this time or, if this parameter is omitted, | | at a time of its choosing. | | | | latestFetchTime: | | | | type: string | | | | format: date-time | | | | description: The MBSTF shall pull each object from its origin | | location no later than this time, or, if this parameter is omitted, | | at a time of its choosing. | +----------------------------------------------------------------------+
###### ## Annex E (normative): IANA registration
# E.1 General
This annex provides the formal registrations of MIME media types for different
resources specified in the present document. It is referenced from the IANA
registry at http://www.iana.org/.
# E.2 Registration of MIME media type \"application/mbs-user-service-
description+json\"
## E.2.1 General
The MIME media type _application/mbs-user-service-description+json_ denotes
that the message body is an MBS User Service Description instance document
compliant with the YAML schema specified in clause A.2.1.
Table E.2.1-1 provides the MIME media type registration for _application/mbs-
user-service-description+json_.
Table E.2.1‑1: MIME media type registration for _application/mbs-user-service-
description+json_
+----------------------------------+----------------------------------+ | **Parameter** | **Value** | +==================================+==================================+ | MIME media type name | _application_ | +----------------------------------+----------------------------------+ | MIME subtype name | _mb | | | s-user-service-description+json_ | +----------------------------------+----------------------------------+ | Required parameters | None | +----------------------------------+----------------------------------+ | Optional parameters | The \'_profiles_ \' parameter as | | | specified in clause E.2.2. | +----------------------------------+----------------------------------+ | Encoding considerations | This is a JSON document, and the | | | encoding considerations are the | | | same as for media type | | | _application/json_ defined in | | | IETF RFC 8259. | +----------------------------------+----------------------------------+ | Security considerations | This media format is used to | | | configure the receiver on how to | | | participate in a service. This | | | format is highly susceptible to | | | manipulation or spoofing for | | | attacks desiring to mislead a | | | receiver about a session. Both | | | integrity protection and source | | | authentication are recommended | | | to prevent misleading of the | | | receiver. | +----------------------------------+----------------------------------+ | Interoperability considerations | The specification defines a | | | platform-independent expression | | | of an entry point document, and | | | it is intended that wide | | | interoperability can be | | | achieved. | +----------------------------------+----------------------------------+ | Published specification | 3GPP TS 26.517 | +----------------------------------+----------------------------------+ | Applications which use this | 3GPP MBS-based applications and | | media type | services | +----------------------------------+----------------------------------+ | Additional information | File extension(s): _json_ | | | | | | Intended usage: COMMON | +----------------------------------+----------------------------------+ | Other information/general | None | | comment | | +----------------------------------+----------------------------------+ | Person & email address to | Thomas Stockhammer | | contact for further information | (tsto\@qti.qualcomm.com) | | | | | | 3GPP TSG SA WG4 | +----------------------------------+----------------------------------+ | Restrictions on usage | None | +----------------------------------+----------------------------------+ | Author/Change controller | 3GPP TSG SA WG4 | +----------------------------------+----------------------------------+
## E.2.2 Profiles parameter
Table D.2.2-1 provides the definition of the _profiles_ parameter to be used
with the MBS User Service Description instance document as defined in clause
D.5.1.
Table E.2.2‑1: Definition of profiles parameter
+-----------------+---------------------------------------------------+ | Parameter | Value | +=================+===================================================+ | Parameter name | _profiles_ | +-----------------+---------------------------------------------------+ | Parameter value | Optional attribute indicating one or more | | | profiles to which the resource representation | | | claims conformance. The contents of this | | | attribute shall conform to either the | | | _pro‑simple_ or _pro‑fancy_ productions specified | | | in section 4.5 of IETF RFC 6381. | | | | | | The set of profile identifiers indicated in this | | | parameter should match the set indicated in the | | | profiles attribute of the corresponding User | | | Service Description. | +-----------------+---------------------------------------------------+
EXAMPLE:
application/mbs-user-service-description+json;profiles=\"1,2\"
#