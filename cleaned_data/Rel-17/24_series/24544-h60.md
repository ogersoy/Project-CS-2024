# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the protocol aspects for the group management
capability of SEAL to support vertical applications (e.g. V2X) over the 3GPP
system.
The present document is applicable to the User Equipment (UE) supporting the
group management client functionality as described in 3GPP TS 23.434 [2], to
the application server supporting the group management server functionality as
described in 3GPP TS 23.434 [2] and to the application server supporting the
vertical application server (VAL server) functionality as defined in specific
vertical application service (VAL service) specification.
NOTE: The specification of the VAL server for a specific VAL service is out of
scope for present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.434: \"Service Enabler Architecture Layer for Verticals (SEAL);
Functional architecture and information flows;\".
[3] IETF RFC 4825: \"The Extensible Markup Language (XML) Configuration Access
Protocol (XCAP)\".
[4] OMA OMA-TS-XDM_Group-V1_1_1-20170124-A: \"Group XDM Specification\".
[5] 3GPP TS 24.547: \"Identity management - Service Enabler Architecture Layer
for Verticals (SEAL); Protocol specification;\".
[6] IETF RFC 6750: \"The OAuth 2.0 Authorization Framework: Bearer Token
Usage\".
[7] OMA OMA-SUP-XSD_poc_listService-V1_0: \"PoC - List Service\", version 1.0.
[8] OMA OMA-SUP-XSD_xdm_extensions-V1_0: \"XML Schema Definition: XDM
Extensions\", version 1.0.
[9] OMA OMA-SUP-XSD_xdm2_1_extensions-V1_0: \"XML Schema Definition: XDM 2.1
-- Extensions\", version 1.0.
[10] IETF RFC 7159: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[11] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[12] IETF RFC 5875: \"An Extensible Markup Language (XML) Configuration Access
Protocol (XCAP) Diff Event Package\".
[13] IETF RFC 6050 (November 2010): \"A Session Initiation Protocol (SIP)
Extension for the Identification of Services\".
[14] IETF RFC 6665 (July 2012): \"SIP-Specific Event Notification\".
[14A] 3GPP TS 24.545: \"Location Management - Service Enabler Architecture
Layer for Verticals (SEAL); Protocol specification\".
[15] IETF RFC 7252: \"The Constrained Application Protocol (CoAP)\".
[16] IETF RFC 7959: \"Block-Wise Transfers in the Constrained Application
Protocol (CoAP) \".
[17] IETF RFC 7641: \"Observing Resources in the Constrained Application
Protocol (CoAP)\".
[18] IETF RFC 8323: \"CoAP (Constrained Application Protocol) over TCP, TLS,
and WebSockets\".
[19] IETF RFC 8949: \"Concise Binary Object Representation (CBOR)\".
[20] IETF RFC 9177: \"Constrained Application Protocol (CoAP) Block- Wise
Transfer Options Supporting Robust Transmission\".
[21] IETF RFC 8610: \"Concise Data Definition Language (CDDL): A Notational
Convention to Express Concise Binary Object Representation (CBOR) and JSON
Data Structures\".
[22] Constrained RESTful Environments (CoRE) Parameters at IANA,
https://www.iana.org/assignments/core-parameters/core-parameters.xhtml.
[23] 3GPP TS 24.546: \"Configuration management - Service Enabler Architecture
Layer for Verticals (SEAL); Protocol specification\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
**SEAL group management client** : An entity that provides the client side
functionalities corresponding to the SEAL group management service.
**SEAL group management server** : An entity that provides the server side
functionalities corresponding to the SEAL group management service.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.434 [2] apply:
**SEAL client**
**SEAL server**
**SEAL service**
**VAL group**
**VAL group member**
**VAL server**
**VAL service**
**VAL user**
**Vertical**
**Vertical application**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
MIME Multipurpose Internet Mail Extensions
SEAL Service Enabler Architecture Layer for verticals
SGM-C SEAL Group Management Client
SGM-S SEAL Group Management Server
# 4 General description
Group management is a SEAL service that provides the group management related
capabilities to one or more vertical applications. The present document
enables a SEAL group management client (SGM-C) and a VAL server to manage
group documents in a SEAL group management server (SGM-S).
# 5 Functional entities
## 5.1 SEAL group management client (SGM-C)
The SGM-C is a functional entity that acts as the application client for
management of groups.
To be compliant with the HTTP procedures in the present document, a SGM-C:
\- shall support the role of XCAP client as specified in IETF RFC 4825 [3];
\- shall support the role of XDMC as specified in OMA OMA-TS-XDM_Group-V1_1_1
[4];
\- shall support the procedure in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;
\- shall support the procedure in clause 6.2.9.
\- shall support the procedure in clause 6.2.10; and
\- shall support the procedure in clause 6.2.11.
To be compliant with the CoAP procedures in the present document the SGM-C:
\- shall support the role of CoAP client as specified in IETF RFC 7252 [15];
\- shall support the capability to observe resources as specified in IETF RFC
7641 [17];
\- shall support the block-wise transfer as specified in IETF RFC 7959 [16];
\- may support the robust block transfer as specified in IETF RFC 9177 [20];
\- should support CoAP over TCP and Websocket as specified in IETF RFC 8323
[18];
\- shall support CBOR encoding as specified in IETF RFC 8949 [19];
\- shall support the procedures in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;
\- shall support the procedure in clause 6.2.9;
\- shall support the procedure in clause 6.2.10; and
\- shall support the procedure in clause 6.2.11.
NOTE 1: The security mechanism to be supported for the CoAP procedures is
described in 3GPP TS 24.547 [5].
NOTE 2: Support for TCP for the CoAP procedures is required if the client
connects over the network which blocks or impedes the use of UDP, e.g. when
NATs are present in the communication path.
NOTE 3: The CoAP protocol supports mechanism for reliable message exchange
over UDP. Use of TCP can also be beneficial if reliable transport is required
for other reasons, e.g. better observability of resources. Usage of CoAP over
TCP is an implementation choice.
NOTE 4: Support for the robust block transfer mechanism for the CoAP
procedures is beneficial in environments where packet loss is highly
asymmetrical and where performance optimization of block transfers is
required.
## 5.2 SEAL group management server (SGM-S)
The SGM-S functional entity provides for management of groups supported within
the vertical application layer.
To be compliant with the HTTP procedures in the present document, a SGM-S:
\- shall support the role of XCAP server as specified in IETF RFC 4825 [3];
\- shall support the role of Group XDMS as specified in OMA OMA-TS-
XDM_Group-V1_1_1 [4];
\- shall support the procedure in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;
\- shall support the procedure in clause 6.2.9.
\- shall support the procedure in clause 6.2.10; and
\- shall support the procedure in clause 6.2.11.
To be compliant with the CoAP procedures in the present document the SGM-C:
\- shall support the role of CoAP server as specified in IETF RFC 7252 [15];
\- shall support the capability to observe resources as specified in IETF RFC
7641 [17];
\- shall support the block-wise transfer as specified in IETF RFC 7959 [16];
\- shall support the robust block transfer as specified in IETF RFC 9177 [20];
\- shall support CoAP over TCP and Websocket as specified in IETF RFC 8323
[18];
\- shall support CBOR encoding as specified in IETF RFC 8949 [19];
\- shall support the procedures in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;
\- shall support the procedure in clause 6.2.9;
\- shall support the procedure in clause 6.2.10; and
\- shall support the procedure in clause 6.2.11.
NOTE: The security mechanism to be supported for the CoAP procedures is
described in 3GPP TS 24.547 [5]
# 6 Group management procedures
## 6.1 General
## 6.2 On-network procedures
### 6.2.1 General
#### 6.2.1.1 Authenticated identity in HTTP request
Upon receiving an HTTP request, the SGM-S shall authenticate the identity of
the sender of the HTTP request as specified in 3GPP TS 24.547 [5], and if
authentication is successful, the SGM-S shall use the identity of the sender
of the HTTP request as an authenticated identity.
#### 6.2.1.2 Boot up procedure
Upon device boot up, the GMC in the UE shall subscribe to group announcement
events as specified in clause 6.2.8.1.2 or clause 6.2.8.1.1, and also fetch
the list of groups as specified in clause 6.2.10.1.
#### 6.2.1.3 Authenticated identity in CoAP request
Upon receiving an CoAP request, the SGM-S shall authenticate the identity of
the sender of the CoAP request as specified in 3GPP TS 24.547 [5], and if
authentication is successful, the SGM-S shall use the identity of the sender
of the CoAP request as an authenticated identity.
### 6.2.2 Group creation procedure
#### 6.2.2.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to create a group document, the
SGM-C shall create an XML document as specified in clause 7 and shall send the
XML document to the SGM-S according to procedures specified in IETF RFC 4825
[3] \"_Create or Replace a Document_ \". In the HTTP PUT request, the SGM-C:
a) shall set the Request URI to a XCAP URI identifying an XML document to be
created. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID;
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-group-doc+xml\"; and
d) shall include an application/vnd.3gpp.seal-group-doc+xml MIME body and in
the \ root element:
1) shall set \"uri\" attribute to the VAL group identity to be created;
2) may include \ element containing a human readable name of the
VAL group;
3) if the VAL user has requested to include administrator users, shall include
\ element of a \ element with list of
administrator users.
4) if the list of users available who are required to give user consent to be
member for the group, shall include such list of users into the \ element of a \ element;
5) if the list of users available who are members of the group, shall include
such list of users into the \ element of a \ element;
6) shall include \ element of a \ element. The \
element:
i) may include \ element indicating the title or description for
the group;
ii) shall include \ element indicating the category of the group;
iii) shall include one or more \ element(s) indicating list of
supported services by the group; and
iv) if the request is to configure VAL group request, shall include one or
more \ element(s), each element indicating list of geographical areas
to be addressed by the group; and
7) shall include \ element of a \. The
\ element:
i) may include \ element to the priority as specified by VAL
user; and
ii) may include \ element identifying the member UEs of the
VAL group at the 3GPP core network.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration. Based on VAL user\'s request, if group events
subscription is not already created, then the SGM-C shall create the group
events subscription as specified in clause 6.2.8.1.1 for the event
SUBSCRIBE_GROUP_MODIFICATION (0x02) as defined in clause A.1.2. If group
events subscription already exists then the SGM-C shall modify the
subscription as specified in clause 6.2.8.1.2.
#### 6.2.2.2 SGM server HTTP procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to initiate group creation, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) if value of the group URI received in HTTP PUT request does not conform to
local policy, shall respond with an HTTP 409 (Conflict) response to the HTTP
PUT request. The \ error element shall identify the error
condition. The SGM-S shall include at least one \ element in the
\ error element, whereby each \ element
contains a Group ID acceptable for the SGM-S. The SGM-S shall skip rest of the
steps; and
c) shall support receiving an XML document according to procedures specified
in IETF RFC 4825 [3] \"_PUT Handling_ \" where the Request-URI of the HTTP PUT
request identifies an XML document.
Upon successful creation of group, for each VAL user in \ element of a
\ element of the group document, the SGM-S shall send Group
Announcement notification as specified in clause 6.2.7.3.1 with following
clarification:
a) shall set the \"IsJoinReq\" parameter to \"false\"; and
b) shall include the \"Members-list\" parameter as specified in clause B.2.
#### 6.2.2.3 Group member SGM client HTTP procedure
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C shall follow the
procedure as specified in clause 6.2.7.2.1.
#### 6.2.2.4 SGM client CoAP procedure
Upon receiving a request from the VAL user to create a group document, the
SGM-C shall send a CoAP POST request to the SGM-S. In the CoAP POST request,
the SGM-C:
a) shall set the CoAP URI to the VAL Group Documents resource URI to according
to the resource definition in clause C.2.1.2.2.2:
1) the \"apiRoot\" is set to the SGM-S URI;
b) shall include Content-Format option set to \" application/vnd.3gpp.seal-
group-doc+cbor \";
c) shall include \" VALGroupDocument\" object:
1) shall set \"valGroupId\" attribute to the VAL group identity to be created;
2) may include \"groupName\" attribute containing a human readable name of the
VAL group;
3) may include \"grpDesc\" attribute containing a human readable description
of the VAL group;
4) if the VAL user has requested to include a list of users who are to be
members of the group, shall include \"memberDetails\" object, and for each
member:
i) shall set \"memberId\" attribute to the VAL user ID or VAL UE ID;
ii) if the VAL user has requested this member to be an administrator of the
group, shall set \"membershipType\" attribute to \"ADMINISTRATOR\";
iii) if the VAL user has requested this member to be required to give user
consent to be a member of the group, shall set \"membershipType\" attribute to
\"EXPLICIT\";
iv) if the VAL user has requested this member to not be required to give user
consent to be a member of the group, shall set \"membershipType\" attribute to
\"IMPLICIT\";
5) shall include \"category\" attribute indicating the category of the group;
6) may include one or more VAL service IDs in \"valServiceIds\" attribute
indicating a list of supported VAL services by the group;
7) if the request is to configure VAL group request, shall include one or more
geographical area identifiers in \"geoIds\" attribute, each identifier
indicating the geographical area to be addressed by the group;
8) may include \"priority\" attribute set to the priority as specified by VAL
user;
9) may include \"extGrpId\" attribute identifying the member UEs of the VAL
group at the 3GPP core network;
10) may include \"com5GLanType\" attribute set to the 5GLAN communication type
if requested by the VAL user;
11) may include \"valGrpConf\" attribute set to VAL specific configuration
data if provided by the VAL user;
12) if the request is to form a temporary group, shall include a list of VAL
group IDs of the constituent VAL groups in \"inclValGroupIds\" attribute; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
Upon receiving a CoAP 2.01 (Created) response, the SGM-C shall notify the VAL
user about successful group creation. Based on VAL user\'s request, the SGM-C
shall create a subscription to changes of the newly created as specified in
clause 6.2.8.1.3.2 for the Individual VAL Group Document resource.
#### 6.2.2.5 SGM server CoAP procedure
Upon reception of an CoAP POST request where the CoAP URI of the request
identifies the VAL Group Documents resource URI according to the resource
definition in clause C.2.1.2.2.2, the SGM-S:
a) shall determine the identity of the sender of the received CoAP POST
request as specified in clause 6.2.1.3, and:
1) if the identity of the sender of the received CoAP POST request is not
authorized to create the VAL group document, shall respond with a 4.03
(Forbidden) response to the CoAP POST request and skip rest of the steps;
b) shall support handling an CoAP POST request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall create a new Individual VAL Group Document resource and for each VAL
user in the list of members of the document shall create a new Individual
Group Member resource and shall return the VAL group document and its resource
URI in the CoAP 2.01 (Created) response as specified in clause C.2.1.2.2.3.1.
Upon successful creation of the group, for each group member the SGM-S shall
send Group Announcement notification as specified in clause 6.2.7.5.1
#### 6.2.2.6 Group member SGM client CoAP procedure
Upon receiving a group announcement notification, the SGM-C shall follow the
procedure as specified in clause 6.2.7.4.1.
### 6.2.3 Group information query procedure
#### 6.2.3.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to retrieve an element of a group
document, the SGM-C shall send an HTTP GET request to the SGM-S according to
procedures specified in IETF RFC 4825 [3] \"_Fetch an Element_ \". In HTTP GET
request, the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an element within an
XML document to be queried. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity;
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID which contains the element to be queried; and
4) the node selector is set to a node URI identifying the element to be
queried; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
#### 6.2.3.2 SGM server HTTP procedure
Upon reception of an HTTP GET request where the Request-URI of the HTTP GET
request identifies an element of a XML document as specified in clause 7, the
SGM-S:
a) shall determine the identity of the sender of the received HTTP GET request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP GET request is not
authorized to query group information, shall respond with a HTTP 403
(Forbidden) response to the HTTP GET request and skip rest of the steps;
b) shall support handling an HTTP GET request from a SGM-C according to
procedures specified in IETF RFC 4825 [3] \"_GET Handling_ \".
#### 6.2.3.3 SGM client CoAP procedure
Upon receiving a request from the VAL user to retrieve a part of a group
document, the SGM-C shall send a CoAP GET request to the SGM-S with the CoAP
URI set to the Individual VAL Group resource identifying the VAL group
document and with the content filtering query parameters set according to the
VAL user request. The procedure is described in clause 6.2.5.2.3.
#### 6.2.3.4 SGM server CoAP procedure
Upon reception of a CoAP GET request for a part of a group document from the
SGM-C, the SGM-S shall handle it as described in clause 6.2.5.2.4.
### 6.2.4 Group membership procedure
#### 6.2.4.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to update group membership element
of a group document, a SGM-C shall send an HTTP PUT request to the SGM-S
according to procedures specified in IETF RFC 4825 [3] \"_Create or Replace an
Element_ \". In HTTP PUT request, the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an element within an
XML document to be updated. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity;
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID which contains the element to be updated; and
4) the node selector is set to a node URI identifying the element to be
updated; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
NOTE1: The VAL client can use the procedure specified in this clause to update
all possible elements which can be updated.
NOTE 2: If the VAL client is adding new member to the group, it may include
VAL service specific information as an attribute of the new element or as an
child element of the new element.
#### 6.2.4.2 SGM server HTTP procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an element of a XML document as specified in clause 7, the
SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to update group information, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) shall support handling an HTTP PUT request from a SGM-C according to
procedures specified in IETF RFC 4825 [3] \"_PUT Handling_ \".
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_MEMBER_ADDED (0x01) as
specified in clause B.3.
#### 6.2.4.3 SGM client CoAP procedure
Upon receiving a request from the VAL user to update group membership of a
group document, the SGM-C shall send a CoAP PUT request to the SGM-S. In the
CoAP PUT request, the SGM-C:
a) shall set the CoAP URI identifying the individual VAL group document to be
updated according to the resource definition in clause C.2.1.2.3.2:
1) the \"apiRoot\" is set to the SGM-S URI; and
2) the \"groupDocId\" to point to the VAL group document;
b) shall include Content-Format option set to \"application/vnd.3gpp.seal-
group-doc+cbor\";
c) shall include \"VALGroupDocument\" object with \"members\" and
\"memberDetails\" lists including the member identities and member details
according to the requested group membership; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
NOTE 1: The VAL client can use the procedure specified in this clause to
update all possible attributes which can be updated.
NOTE 2: If the VAL client is adding a new member to the group, it may include
VAL service specific information in the \"memberConfig\" attribute of the
\"GroupMember\" object.
#### 6.2.4.4 SGM server CoAP procedure
Upon reception of an CoAP PUT request where the CoAP URI of the request
identifies Individual VAL Group Document resource as described in clause
C.2.1.2.3.2, the SGM-S:
a) shall determine the identity of the sender of the received CoAP PUT request
as specified in clause 6.2.1.3, and:
1) if the identity of the sender of the received CoAP PUT request is not
authorized to update the requested VAL group document, shall respond with a
CoAP 4.03 (Forbidden) response to the CoAP PUT request and skip rest of the
steps;
b) shall support handling an CoAP PUT request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall update the VAL group document pointed according to the
\"VALGroupDocument\" received in the request, and:
1) for each new member in the group shall create a new individual group member
resource; and
2) for each member removed from the group shall delete the corresponding
individual group member resource.
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.3.2.
### 6.2.5 Group configuration management procedure
#### 6.2.5.1 Update group configuration
##### 6.2.5.1.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to update a group document, the
SGM-C shall create an XML document as specified in clause 7 and shall send the
XML document to the SGM-S according to procedures specified in IETF RFC 4825
[3] \"_Create or Replace a Document_ \". In the HTTP PUT request, the SGM-C:
a) shall set the Request URI to a XCAP URI identifying an XML document to be
updated. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID;
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-group-doc+xml\"; and
d) shall include an application/vnd.3gpp.seal-group-doc+xml MIME body and in
the \ root element:
1) shall set \"uri\" attribute to the VAL group identity to be updated;
2) may include \ element containing a human readable name of the
VAL group;
3) if the VAL user has requested to include administrator users, shall include
\ element of a \ element with list of
administrator users.
4) if the list of users available who are required to give user consent to be
member for the group, shall include such list of users into the \ element of a \ element;
5) if the list of users available who are members of the group, shall include
such list of users into the \ element of a \ element;
6) shall include \ element of a \ element. The \
element:
i) may include \ element indicating the title or description for
the group;
ii) shall include \ element indicating the category of the group;
and
iii) shall include \ element indicating list of supported
services by the group; and
7) shall include \ element of a \. The
\ element:
i) may include \ element to the priority as specified by VAL
user
##### 6.2.5.1.2 SGM server HTTP procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to update the group document, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) shall support receiving an XML document as specified in application usage
of the specific vertical application according to procedures specified in IETF
RFC 4825 [3] \"_PUT Handling_ \".
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_CONFIG_UPDATE (0x03) as
specified in clause B.3.
##### 6.2.5.1.3 SGM client CoAP procedure
Upon receiving a request from the VAL user to update a group document, the
SGM-C shall send a CoAP PUT request to the SGM-S. In the CoAP PUT request, the
SGM-C:
a) shall set the CoAP URI identifying the individual VAL group document to be
updated according to the resource definition in annex C.2.1.2.3.2:
1) the \"apiRoot\" is set to the SGM-S URI; and
2) the \"groupDocId\" to point to the VAL group document;
b) shall include Content-Format option set to \"application/vnd.3gpp.seal-
group-doc+cbor\";
c) shall include \"VALGroupDocument\" object in the payload:
1) shall set \"valGroupId\" attribute to the same VAL group identity as in the
group document to be updated;
2) may include \"groupName\" attribute containing a human readable name of the
VAL group;
3) may include \"grpDesc\" attribute containing a human readable description
of the VAL group;
4) if the VAL user has requested to include a list of users who are to be
members of the group, shall include \"memberDetails\" object, and for each
member:
i) shall set \"memberId\" attribute to the VAL user ID or VAL UE ID;
ii) if the VAL user has requested this member to be an administrator of the
group, shall set \"membershipType\" attribute to \"ADMINISTRATOR\";
iii) if the VAL user has requested this member to be required to give user
consent to be a member of the group, shall set \"membershipType\" attribute to
\"EXPLICIT\";
iv) if the VAL user has requested this member to not be required to give user
consent to be a member of the group, shall set \"membershipType\" attribute to
\"IMPLICIT\";
5) shall include \"category\" attribute indicating the category of the group
6) shall include one or more VAL service IDs in \"valServiceIds\" attribute
indicating a list of VAL services supported by the group;
7) if the request is to configure VAL group request, shall include one or more
geographical area identifiers in \"geoIds\" attribute, each identifier
indicating the geographical area to be addressed by the group;
8) may include \"priority\" attribute set to the priority as specified by VAL
user;
9) may include \"extGrpId\" attribute identifying the member UEs of the VAL
group at the 3GPP core network;
10) may include \"com5GLanType\" attribute set to the 5GLAN communication type
if requested by the VAL user;
11) may include \"valGrpConf\" attribute set to VAL specific configuration
data if provided by the VAL user; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
##### 6.2.5.1.4 SGM server CoAP procedure
Upon reception of an CoAP PUT request where the CoAP URI of the request
identifies an Individual VAL Group Document resource as described in annex
C.2.1.2.3.2, the SGM-S:
a) shall determine the identity of the sender of the received CoAP PUT request
as specified in clause 6.2.1.3, and:
1) if the identity of the sender of the received CoAP PUT request is not
authorized to update the requested VAL group document, shall respond with a
CoAP 4.03 (Forbidden) response to the CoAP PUT request and skip rest of the
steps;
b) shall support handling an CoAP PUT request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall update the VAL group document pointed according to the
\"VALGroupDocument\" received in the request, and:
1) for each new member in the group shall create a new individual group member
resource; and
2) for each member removed from the group shall delete the corresponding
individual group member resource.
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.3.2.
#### 6.2.5.2 Retrieve group document
##### 6.2.5.2.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to retrieve a group document, the
SGM-C shall send an HTTP GET request to the SGM-S according to procedures
specified in IETF RFC 4825 [3] \"_Fetch a Document_ \". In HTTP GET request,
the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an XML document to be
retrieved. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
##### 6.2.5.2.2 SGM server HTTP procedure
Upon reception of an HTTP GET request where the Request-URI of the HTTP GET
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP GET request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP GET request is not
authorized to retrieve the group document, shall respond with a HTTP 403
(Forbidden) response to the HTTP GET request and skip rest of the steps;
b) shall support receiving an XML document as specified in application usage
of the specific vertical application according to procedures specified in IETF
RFC 4825 [3] \"_GET Handling_ \".
##### 6.2.5.2.3 SGM client CoAP procedure
Upon receiving a request from the VAL user to retrieve a group document, the
SGM-C shall send a CoAP GET request to the SGM-S. In the CoAP GET request, the
SGM-C:
a) shall set the CoAP URI identifying the group document to be retrieved
according to resource API definition in clause C.2.1.2:
1) the \"apiRoot\" is set to the SGM-S URI;
2) if the SGM-C does not know the \"groupDocId\" of the group document at the
SGM-S, the SGM-C:
i) shall use the VAL Group Documents resource GET and shall set \"val-group-
id\" query parameter to the VAL group ID and may set any of the other query
parameters as described in clause C.2.1.2.2.3.2; or
ii) shall use the Individual VAL Group Document GET and shall set
\"groupDocId\" to point to the VAL group document and may set any of the
content filtering query parameters as described in clause C.2.1.2.3.3.1; and
b) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
##### 6.2.5.2.4 SGM server CoAP procedure
Upon reception of an CoAP GET request where the CoAP URI of the request
identifies VAL Group Documents resource as described in clause C.2.1.2.2.3.2,
the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.3, and:
1) if the sender is not authorized to fetch the requested VAL group
document(s), shall respond with a 4.03 (Forbidden) response to the CoAP GET
request and skip rest of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall return a 2.05 (Content) response including all the VAL group
documents matching all the given values of the query parameters.
Upon reception of an CoAP GET request where the CoAP URI of the request
identifies Individual VAL Group Document resource as described in clause
C.2.1.2.3.3.1, the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.3, and:
1) if the sender is not authorized to fetch the requested VAL group document,
shall respond with a 4.03 (Forbidden) response to the CoAP GET request and
skip rest of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall check if the resource pointed at by the CoAP URI exists and:
1) if it exists, shall return the VAL document in a 2.05 (Content) response
with the content of the document matching the content filtering query
parameters; or
2) otherwise, shall return a 4.04 (Not found) response.
### 6.2.6 Location-based group creation procedure
#### 6.2.6.1 SGM client HTTP procedure
Upon receiving a request from the VAL user to create a location based group,
the SGM-C shall follow the procedure as defined in clause 6.2.2.1 with
following clarifications.
The SGM-C:
a) shall set \ child element of \ element of a \ element to the value \"location-based\" as defined in clause 7; and
b) shall set the location of tracking area in the \ child element of
\ element of a \ element.
#### 6.2.6.2 SGM server HTTP procedure
Upon receiving HTTP PUT request with \ child element of \
element of a \ element set to the value \"location-based\", the
SGM-S shall follow the procedure as defined in clause 6.2.2.2 with following
clarifications. The SGM-S:
a) shall obtain the list of users based on location as specified in clause
6.2.9 of 3GPP TS 24.545 [14A] and include the list of users in the group
document.
#### 6.2.6.3 SGM client CoAP procedure
Upon receiving a request from the VAL user to create a location based group,
the SGM-C shall follow the procedure as defined in clause 6.2.2.4 with
following clarifications. The SGM-C:
a) shall set \"category\" attribute to \"LOCATION_BASED\"; and
b) shall set the location of tracking area as an item in the list in the
\"geoIds\" attribute.
#### 6.2.6.4 SGM server CoAP procedure
Upon receiving a group creation request for a group with the \"category\"
attribute value of \"LOCATION_BASED\", the SGM-S shall follow the procedure as
defined in clause 6.2.2.5 with following clarifications. The SGM-S:
a) shall obtain the list of users based on the location provided in the
\"geoIds\" attribute as specified in clause 6.2.9 of 3GPP TS 24.545 [14A] and
include the list of users in the group document; and
b) for each new member in the group shall create a new individual group member
resource.
### 6.2.7 Group announcement and join procedure
#### 6.2.7.1 General
Upon successful creation of the group as specified in clause 6.2.2, the SGM-S
follow the HTTP procedure specified in clause 6.2.7.3 to notify group
announcement to group members and to handle group registration request from
SGM-C. If CoAP is used the respective procedures are specified in clause
6.2.7.5.
The SGM-C shall follow the HTTP procedure specified in clause 6.2.7.2 to
handle received group announcement notification and to request group
registration. If CoAP is used the respective procedures are specified in
clause 6.2.7.4.
#### 6.2.7.2 SGM client HTTP procedure
##### 6.2.7.2.1 Receiving group announcement notification
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as
specified in clause B.2, shall notify the VAL user about announcement of group
with group-ID and subject. If the notification contains \"IsJoinReq\"
parameter with value set to \"true\", the SGM-C shall ask VAL user to join the
group. The SGM-C may also decide to store the group announcement based on
user\'s request.
##### 6.2.7.2.2 Sending group registration request
Upon receiving request from VAL user to join the group, the SGM-C:
a) shall generate an HTTP POST request. In the HTTP POST request:
1) shall set the Request URI to the value \"/group-registration\";
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
4) shall include in the HTTP request entity-body the \"group-ID\" parameter
set to the group URI received in group announcement notification; and
5) may include the parameters specified in clause A.2.1 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10]; and
b) shall send an HTTP POST request to SGM-S.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration. Based on VAL user\'s request, if group events
subscription is not already created, then the SGM-C shall create the group
events subscription as specified in clause 6.2.8.1.1 for the event
SUBSCRIBE_GROUP_MODIFICATION (0x02) and SUBSCRIBE_GROUP_IDENTITY_LIST (0x04)
as defined in clause A.1.2. If group events subscription already exists then
the SGM-C shall modify the subscription as specified in the clause 6.2.8.1.2.
##### 6.2.7.2.3 Receiving group identity list notification
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as
specified in clause B.4, shall notify the VAL user about group list members.
#### 6.2.7.3 SGM server HTTP procedure
##### 6.2.7.3.1 Sending group announcement notification
Upon successful creation of group, for each VAL user in \ element of a \ element of the group document, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\";
3) shall include an HTTP request entity-body serialized into a JavaScript
Object Notation (JSON) structure; In the entity-body:
i) shall set the \"Identity\" parameter to the identity of the subscription;
ii) shall set the \"Event\" parameter to the value
SUBSCRIBE_GROUP_ANNOUNCEMENT (ox01) as specified in clause B.2;
iii) shall set the \"GroupID\" parameter to the identity of the VAL Group;
iv) may set the \"Subject\" parameter to the value of \ child
element of a \ element of a \ element from the group
document;
v) shall set the \"IsJoinReq\" parameter to \"true\";
vi) may include the \"Val-services\" parameter as specified in clause B.2;
vii) if there are no privacy concerns with sharing the identity list, may
include the \"Members-list\" parameter as specified in clause B.2; and
viii) if the group is created for 5G LAN-Type communication, may include the
\"5GVN Group Info\" parameter providing 5GVN group information; and
c) shall send the HTTP POST request towards SGM-C.
##### 6.2.7.3.2 Receiving group registration request
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request is set to \"/group-registration\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall update the members information in group document; and
c) shall send an HTTP 200 (OK) response to SGM-C.
##### 6.2.7.3.3 Sending group identity list notification
Upon successful creation of group, for each VAL user in \ element of a \ element of the group document, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\"; and
3) shall include an HTTP request entity-body serialized into a JavaScript
Object Notation (JSON) structure; In the entity-body,
i) shall set the \"Identity\" parameter to the identity of the subscription;
ii) shall set the \"Event\" parameter to the value
SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as specified in clause B.4;
iii) shall set the \"GroupID\" parameter to the identity of the VAL Group;
iv) shall include the \"Members-list\" parameter as specified in clause B.4
c) shall send the HTTP POST request towards SGM-C.
#### 6.2.7.4 SGM client CoAP procedure
##### 6.2.7.4.1 Subscribing to and receiving group announcement notification
In order to subscribe to group announcements, the SGM-C shall send an extended
CoAP GET request with the CoAP URI set to the URI of the observable VAL Group
Documents resource and with the \"memberId\" query parameter set to the VAL
user ID or VAL UE ID and with the Observe option set to 0 (Register) as
specified in IETF RFC 7641 [14].
Upon receiving a CoAP 2.05 (Content) response that matches the extended CoAP
GET request which initiated the subscription, and which contains the Observe
option, the SGM-C:
a) shall handle the response according to IETF RFC 7641 [14];
b) shall compare the received list of the VAL group documents with the local
list of VAL group documents to determine the new group(s) in which the VAL
user is a member, and for each such new group:
1) shall notify the VAL user about announcement of group with \"valGroupId\",
\"groupName\" and \"grpDesc\"; and
2) if VAL user\'s \"membershipType\" value is \"EXPLICIT\", the SGM-C shall
ask VAL user to join the group; and
c) shall update the local list of VAL group documents, and may also decide to
store the group announcement based on user\'s request.
##### 6.2.7.4.2 Sending group registration request
Upon receiving request from VAL user to join the group, the SGM-C shall send a
CoAP PUT request to the SGM-S. In the CoAP PUT request, the SGM-C:
a) shall set the CoAP URI to the \"resUri\" of the group member corresponding
to the VAL user, so that the CoAP URI of the request identifies the Individual
Group Member resource to be updated according to the resource definition in
clause C.2.1.2.4.3.2:
1) the \"apiRoot\" is set to the SGM-S URI;
2) the \"groupDocId\" is set to point to the VAL group document; and
3) the \"memberId\" is set to VAL user ID or VAL UE ID;
b) shall include Content-Format option set to \"application/vnd.3gpp.seal-
group-member-info+cbor\";
c) shall include \"GroupMember\" object which:
1) shall contain \"membershipState\" with the \"registered\" attribute set to
\"true\";
2) may contain \"messageFilter\" attribute; and
3) shall contain all the other attributes unchanged; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
Upon receiving a CoAP 2.04 (Changed), the SGM-C shall notify the VAL user
about successful group registration. Based on VAL user\'s request, if
subscription to modifications of this group is not already created, then the
SGM-C shall create such a subscription as specified in clause 6.2.8.1.3.2.
##### 6.2.7.4.3 Subscribing to and receiving group identity list notification
In order to subscribe to changes in the group\'s identity list, the SGM-C
shall send an extended CoAP GET request with the CoAP URI set to the URI of
the observable Individual VAL Group Document resource and with the \"group-
members\" query parameter set to \"true\" and with the Observe option set to 0
(Register) as specified in IETF RFC 7641 [14].
Upon receiving a CoAP 2.05 (Content) response that matches the extended CoAP
GET request which initiated the subscription, and which contains the Observe
option, the SGM-C:
a) shall handle the response according to IETF RFC 7641 [14]; and
b) shall notify the VAL user about group members.
#### 6.2.7.5 SGM server CoAP procedure
##### 6.2.7.5.1 Receiving group announcement subscription
Upon reception of an extended CoAP GET request with the CoAP URI set to the
URI of the observable VAL Group Documents resource with the \" member-id \"
query parameter and with the Observe option set to 0 (Register), the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.3, and:
1) if the sender is not authorized to fetch the requested VAL group
document(s), shall respond with a 4.03 (Forbidden) response to the CoAP GET
request and skip rest of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12];
c) shall register the SGM-C as an observer of this resource with the given
value of the \" member-id \" query parameter, as per IETF RFC 7641 [14]; and
d) shall send a CoAP 2.05 (Content) response with the Observer option set to
the initial sequence number of the notification and with the payload including
all the VAL group documents in which the given value of the \" member-id\"
query parameter matches any of the group members\' \"memberId\" attribute.
##### 6.2.7.5.2 Sending group announcement notification
Upon successful creation of a group, for each group member in the group
document which has \"EXPLICIT\" membership type, the SGM-S:
a) shall check whether a valid group announcement subscription exists with a
matching value of \" member-id \" as defined in clause 6.2.7.5.1 or not; if it
does not exists then skip rest of the steps;
b) shall send a CoAP 2.05 (Content) response with the Observer option set to
incremented sequence number of the notification and with the payload including
all the VAL group documents in which the subscription\'s value of the \"
member-id \" query parameter matches any of the group members\' \"memberId\"
attribute. Each included VAL group document shall also have the list of group
members included in \"memberDetails\" attribute.
##### 6.2.7.5.3 Receiving subscription request and sending group identity list
notification
Upon reception of an extended CoAP GET request with the CoAP URI set to the
URI of the observable Individual VAL Group Document resource with the \"group-
members\" query parameter set to \"true\" and with the Observe option set to 0
(Register), the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.1, and:
1) if the sender is not authorized to fetch the requested VAL group document,
shall respond with a 4.03 (Forbidden) response to the CoAP GET request and
skip rest of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall check if the resource pointed at by the CoAP URI exists and:
1) if it does not exist, shall return a 4.04 (Not found) response and skip
rest of the steps;
2) shall register the SGM-C as an observer of this resource as per IETF RFC
7641 [14]; and
3) shall send a CoAP 2.05 (Content) response with the Observe option set to
the initial sequence number of the notification and with the payload including
the VAL group document with the content of the document matching the content
filtering query parameters, i.e., including the member list in the \"members\"
attribute.
Upon a change in the list of group members of the VAL group document, for each
group identity list subscription, the SGM-S:
a) shall send a CoAP 2.05 (Content) response with the Observe option set to
incremented sequence number of the notification and with the payload including
the VAL group document with the content of the document matching the content
filtering query parameters, i.e., including the member list in the \"members\"
attribute.
### 6.2.8 Group subscription and notification procedure
#### 6.2.8.1 Management of group events subscription
##### 6.2.8.1.1 SIP based procedures
##### 6.2.8.1.1.1 General {#general-3 .H6}
The VAL service will use the same identity which has been authenticated by VAL
service with SIP core using SIP based REGISTER message. If VAL service do not
support SIP protocol, then HTTP based method needs to be used.
The SGM-C shall use mechanism provided by VAL service to add access-token in
SIP messages. The SGM-S shall identify the originating VAL user ID from the
access-token received from SGM-C using the mechanism defined in VAL service
specification.
##### 6.2.8.1.1.2 Create subscription {#create-subscription .H6}
In order to subscribe to notification of changes of one or more group
documents of VAL groups identified by VAL group IDs, a SGM-C shall send an
initial SIP SUBSCRIBE request to the network according to the UE originating
procedures specified in 3GPP TS 24.229 [11] and IETF RFC 5875 [12]. In the
initial SIP SUBSCRIBE request, the SGM-C:
a) shall set the Request-URI to the configured public service identity for
performing subscription proxy function of the SGM-S;
b) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [13];
c) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.seal\" in the Contact header field;
d) shall include an application/resource-lists+xml MIME body. In the
application/resource-lists+xml MIME body, the SGM-C shall include one \
element for each group document to be subscribed to, such that the \"uri\"
attribute of the \ element contains a relative path reference to XCAP
URI identifying an XML document to be subscribed to;
e) if the VAL server wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [14], to zero. Otherwise,
shall set the Expires header field to the duration for which VAL user has
requested for subscription;
Upon reception of an initial SIP SUBSCRIBE request:
a) with the Event header field set to xcap-diff;
b) with the Request-URI set to own public service identity for performing
subscription proxy function of the SGM-S;
c) with an application/resource-lists+xml MIME body; and
d) with the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\" (coded as
specified in 3GPP TS 24 229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [13];
the SGM-S:
d) shall identify the originating VAL user ID and shall use the originating
VAL user ID as an authenticated identity when performing the authorization;
b) if the authenticated identity is not authorized to subscribe to
notification of changes of any resource in the application/resource-lists+xml
MIME body, shall reject the request with a SIP 403 (Forbidden) response and
shall not continue with rest of the steps;
e) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.1.3 Modify subscription {#modify-subscription .H6}
In order to modify or refresh subscription, the SGM-C shall send SIP re-
SUBSCRIBE request on the same dialog as the existing subscription, and with
the same \"Event\" header. The SGM-C shall follow the steps specified in
clause 6.2.8.1.1.2.1 to create SIP SUBSCRIBE request.
Upon reception of a SIP re-SUBSCRIBE request:
a) with the Event header field set to xcap-diff; and
b) with an application/resource-lists+xml MIME body;
the SGM-S:
a) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.1.4 Delete subscription {#delete-subscription .H6}
In order to delete the subscription, the SGM-C shall send SIP re-SUBSCRIBE
request on the same dialog as the existing subscription, and with the same
\"Event\" header. The SGM-C shall follow the steps specified in clause
6.2.8.1.1.2.1 to create SIP SUBSCRIBE request with following clarification:
a) shall set the Expires header field to zero.
Upon reception of a SIP re-SUBSCRIBE request:
a) with the Event header field set to xcap-diff; and
b) with Expires header field set to zero;
the SGM-S:
a) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.2 HTTP based procedures
##### 6.2.8.1.2.1 Creating subscription {#creating-subscription .H6}
Upon successful service authorization of the VAL service, the SGM-C shall
create a subscription for group events by sending an HTTP POST request to the
SGM-S. In the HTTP POST request, the SGM-C:
a) shall set the Request URI to the URI of the SGM-S appended with VAL service
identity and the value \"/groupEventsSubscription\";
b) shall include the Host header with public user identity of SGM-S;
c) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
c) include the parameters specified in clause A.1.2 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10].
Upon reception of an HTTP POST request from SGM-C where the Request-URI of the
HTTP POST request contains \"/groupEventsSubscription\" without subscription
identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall generate unique subscription identity and store the subscription
details for the authorized user; and
c) shall send an HTTP 200 (OK) response including parameters specified in
clause A.1.3.
##### 6.2.8.1.2.2 Modify a subscription {#modify-a-subscription .H6}
Upon receiving a request from VAL user to modify existing subscription
identified with unique subscription identity, the SGM-C:
a) shall generate an HTTP PUT request. In the HTTP PUT request:
1) shall set the Request URI to the same Request URI used while creating
subscription in clause 6.2.8.1.2.1.1 appended with subscription identity;
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) include the parameters specified in clause A.1.2 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10].
b) shall send the HTTP PUT request to the SGM-S.
Upon reception of an HTTP PUT request from SGM-C where the Request-URI of the
HTTP PUT request is set to \"/groupEventsSubscription\" appended with
subscription identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP PUT request and skip rest of the steps;
b) shall determine whether subscription for group events exists or not based
on received subscription identity in request URI; and
1) if subscription does not exist, shall respond with an HTTP 406 (Not
Acceptable) response to the HTTP PUT request and skip rest of the steps;
c) shall update the subscription details based on received parameters from the
HTTP PUT request; and
d) shall send an HTTP 200 (OK) response including parameters specified in
clause A.1.3.
##### 6.2.8.1.2.3 Delete a subscription {#delete-a-subscription .H6}
Upon receiving a request from VAL user to delete existing subscription
identified with unique subscription identity, the SGM-C:
a) shall generate an HTTP DELETE request. In the HTTP DELETE request:
1) shall set the Request URI to the value \"/groupEventsSubscription\"
appended with subscription identity;
2) shall include the Host header with public user identity of SGM-S; and
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
b) shall send the HTTP DELETE request to the SGM-S.
Upon reception of an HTTP DELETE request from SGM-C where the Request-URI of
the HTTP DELETE request contains \"/groupEventsSubscription\" appended with
subscription identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP DELETE
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP DELETE request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP DELETE request and skip rest of the steps;
b) shall determine whether subscription for group events exists or not based
on received subscription identity in request URI; and
1) if subscription does not exist, shall respond with an HTTP 406 (Not
Acceptable) response to the HTTP DELETE request and skip rest of the steps;
c) shall delete the subscription details based on received parameters from the
HTTP DELETE request; and
d) shall send an HTTP 200 (OK) response to the SGM-C.
##### 6.2.8.1.3 CoAP based procedures
###### 6.2.8.1.3.1 General
CoAP based procedures shall use the mechanisms to observe a resource as
specified in IETF RFC 7641 [14].
NOTE: CoAP \"observe\" mechanism uses the principle of eventual consistency
where an intermediate state change can be lost when UDP is used. If it is
critical for the client to receive every change in the resource state (and not
just the latest state), TCP can be used to avoid missing notifications.
###### 6.2.8.1.3.2 Create a subscription
The CoAP resource representation defines in clause C.2.1.2 the following
observable resources:
a) VAL Group Documents resource which represents a collection resource of VAL
group documents, and which may be observed by the SGM-C with the purpose to be
notified when the VAL user is defined as a group member;
b) Individual VAL Group Document which represents a single VAL group document,
and which may be observed by the SGM-C with the purpose to be notified when
the VAL group document is modified. By means of the content filters the SGM-C
may choose the part of the VAL group document to be included in the
notification.
In order to subscribe to changes of an observable resource the SGM-C shall
send an extended CoAP GET request with the CoAP URI set to the URI of the
observable resource and with the Observe option set to 0 (Register) as
specified in IETF RFC 7641 [14].
Upon reception of such an extended CoAP request from SGM-C where the CoAP URI
of the request points at an observable resource and with the Observe option
set to 0 (Register), the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.3, and:
1) if the sender is not authorized to fetch the requested resource, shall
respond with a 4.03 (Forbidden) response to the CoAP GET request and skip rest
of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12];
c) shall register the SGM-C as an observer as per IETF RFC 7641 [14]; and
d) shall send a CoAP 2.05 (Content) response including the current content of
the resource and the Observe option with the initial sequence number of the
notification.
###### 6.2.8.1.3.3 Delete a subscription
In order to unsubscribe from changes of an observable resource the SGM-C shall
send a CoAP GET request matching the CoAP GET request used to create the
subscription but with the Observe option set to 1 (Deregister) as specified in
IETF RFC 7641 [14].
Upon reception of a CoAP GET that matches an active subscription but with the
Observe option set to 1 (Deregister), the SGM-S:
a) shall perform the steps as for a normal CoAP GET request for the observable
resource;
b) shall deregister the SGM-C as an observer as per IETF RFC 7641 [14]; and
c) shall send a CoAP 2.05 (Content) response including the current content of
the resource and shall not include the Observe option.
#### 6.2.8.2 Notifications
##### 6.2.8.2.1 SIP based procedures
###### 6.2.8.2.1.1 Client procedure {#client-procedure .list-paragraph}
Upon receiving a SIP NOTIFY request associated with a subscription created as
result of the sent initial SIP SUBSCRIBE request, the SGM-S:
a) shall handle the SIP NOTIFY request according to IETF RFC 5875 [12].
###### 6.2.8.2.1.2 Server procedure {#server-procedure .list-paragraph}
In order to send notification of group document update event, the SGM-S shall
send SIP NOTIFY to SGM-C according to IETF RFC 5875 [12].
##### 6.2.8.2.2 HTTP based procedures
##### 6.2.8.2.2.1 Receiving group modify notification {#receiving-group-
modify-notification .H6}
Upon receiving an HTTP POST request over a call back URI which was given to
the SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_MODIFICATION (0x02) as
specified in clause B.3, shall notify the VAL user about modification of group
with group-ID.
Based on VAL user\'s request, the SGM-C may also retrieve the group document
identified by group ID received in group modify notification as specified in
clause 6.2.5.2.
##### 6.2.8.2.2.2 Sending group modify notification {#sending-group-modify-
notification .H6}
To send the group modification notification to the SGM-C, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_MODIFICATION (0x02) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to the call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\"; and
3) shall include an HTTP request entity-body with the parameters specified in
clause B.3 serialized into a JavaScript Object Notation (JSON) structure; and
c) shall sent the HTTP POST request towards SGM-C.
##### 6.2.8.2.3 CoAP based procedures
###### 6.2.8.2.3.1 Client procedure
Upon receiving a CoAP 2.05 (Content) response that matches the extended CoAP
GET request which initiated the subscription, and which contains the Observe
option, the SGM-C:
a) shall handle the response according to IETF RFC 7641 [14]; and
b) shall handle the modification according to the observable resource.
###### 6.2.8.2.3.2 Server procedure
In order to send a notification when the resource which is being observed is
modified, the SGM-S shall send a CoAP 2.05 (Content) response to SGM-C
containing the modified resource and the Observe option according to IETF RFC
7641 [14]. The Content-Format specified in the 2.05 shall be the same as the
one used in the initial response to the GET request received for the
subscription.
### 6.2.9 Group member leave
#### 6.2.9.1 SGM client HTTP procedure
Upon receiving request from VAL user to leave the group, the SGM-C:
a) shall generate an HTTP POST request. In the HTTP POST request:
1) shall set the Request URI to the URI of the SGM-S appended with VAL service
identity and the value \"/group-deregistration\";
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) shall include in the HTTP request entity-body the \"group-ID\" parameter
set to the group URI of the group which VAL user has requested to leave; and
b) shall send the HTTP POST request to SGM-S.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration.
#### 6.2.9.2 SGM server HTTP procedure
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request is set to \"/group-deregistration\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall update the members information in group document; and
c) shall send an HTTP 200 (OK) response to SGM-C.
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_MEMBER_REMOVED (0x02) as
specified in clause B.3.
#### 6.2.9.3 SGM client CoAP procedure
Upon receiving request from VAL user to leave the group, the SGM-C shall send
a CoAP DELETE request to the SGM-S. In the CoAP DELETE request, the SGM-C:
a) shall set the CoAP URI to the \"resUri\" of the group member corresponding
to the VAL user, so that the CoAP URI of the request identifies the Individual
Group Member resource to be deleted according to the resource definition in
clause C.2.1.2.4.3.3:
1) the \"apiRoot\" is set to the SGM-S URI;
2) the \"groupDocId\" is set to point to the VAL group document; and
3) the \"memberId\" is set to VAL user ID or VAL UE ID; and
b) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
Upon receiving a CoAP 2.02 (Deleted) response, the SGM-C shall notify the VAL
user about successful group deregistration. Based on VAL user\'s request, if
subscription to modifications of this group is already created, then the SGM-C
shall delete that subscription as specified in clause 6.2.8.1.3.3.
#### 6.2.9.4 SGM server CoAP procedure
Upon reception of an CoAP DELETE request where the CoAP URI of the request
identifies Individual Group Member resource as described in clause
C.2.1.2.4.3.3, the SGM-S:
a) shall determine the identity of the sender of the received CoAP DELETE
request as specified in clause 6.2.1.3, and:
1) if the identity of the sender of the received CoAP DELETE request is not
authorized to delete the requested group member resource, shall respond with a
CoAP 4.03 (Forbidden) response to the CoAP DELETE request and skip rest of the
steps;
b) shall support handling an CoAP DELETE request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall delete the individual group member resource pointed at by the CoAP
URI and shall update the \"members\" and \"memberDetails\" lists in the VAL
group document.
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.3.2. In the notification, the SGM-S shall send the modified VAL
group document.
### 6.2.10 Group list fetch procedure
#### 6.2.10.1 SGM client HTTP procedure
Upon receiving request from VAL user to fetch the list of groups in which the
VAL user is a member, the SGM-C:
a) shall generate an HTTP POST request. In the HTTP POST request:
1) shall set the Request URI to the URI of the SGM-S appended with VAL service
identity and the value \"/group-list-fetch\";
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) shall include the parameters specified in clause A.3.1 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10]; and;
b) shall send an HTTP POST request to SGM-S.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about the
list of the groups where the VAL UE is a member.
Based on VAL user\'s request, if group events subscription is not already
created, then the SGM-C shall create the group events subscription as
specified in clause 6.2.8.1.1 for the event SUBSCRIBE_GROUP_MODIFICATION
(0x02) as defined in clause A.1.2. If group events subscription already exists
then the SGM-C shall modify the subscription as specified in clause 6.2.8.1.2.
#### 6.2.10.2 SGM server HTTP procedure
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request is set to \"/group-list-fetch\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall send an HTTP 200 (OK) response to SGM-C. In the response, the SGM-S
shall include the parameters specified in clause A.3.2 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10];
#### 6.2.10.3 SGM client CoAP procedure
Upon receiving request from VAL user to fetch the list of groups in which the
VAL user is a member, the SGM-C shall send a CoAP GET request with the CoAP
URI set to the URI of the VAL Group Documents resource with the \" member-id
\" query parameter set to the VAL user ID or VAL UE ID and optionally with the
\"time-period\" query parameter when the group was created.
Upon receiving request from VAL user to fetch the list of groups in which the
VAL user is a member, the SGM-C shall send a CoAP GET request to the SGM-S. In
the CoAP GET request, the SGM-C:
a) shall set the CoAP URI to the URI of the VAL Group Documents resource:
1) the \"apiRoot\" is set to the SGM-S URI; and
2) shall set \" member-id query parameter to the VAL user ID or VAL UE ID and
may set \"time-period\" query parameter to the time period when the group was
created as described in clause C.2.1.2.2.3.2; and
b) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [5].
Upon receiving a CoAP 2.05 (Content) response the SGM-C shall notify the VAL
user about the list of the groups where the VAL UE is a member.
#### 6.2.10.4 SGM server CoAP procedure
Upon reception of an CoAP GET request where the CoAP URI of the request
identifies VAL Group Documents resource as described in clause C.2.1.2.2.3.2,
the SGM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.3, and:
1) if the sender is not authorized to fetch the requested VAL group
document(s), shall respond with a 4.03 (Forbidden) response to the CoAP GET
request and skip rest of the steps;
b) shall support handling a CoAP GET request from a SGM-C according to
procedures specified in IETF RFC 7252 [12]; and
c) shall return a 2.05 (Content) response including all the VAL group
documents matching all the given values of the query parameters.
### 6.2.11 Temporary groups procedure
#### 6.2.11.1 SGM client HTTP procedure
In order to form a temporary group, the SGM-C shall generate an HTTP POST
request. In the HTTP POST request:
a) shall set the Request-URI to the URI of the SGM-S appended with the value
\"/temporary-groups\";
b) shall include the Host header with public user identity of SGM-S;
c) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
d) shall include the parameters specified in clause A.4.1 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10]; and
e) shall send the HTTP POST request to the SGM-S.
Upon receiving an HTTP POST request from SGM-S contains parameters of VAL
Group Ids and VAL Group Id, the SGM-C shall respond with an HTTP 200 (OK)
message including a parameter VAL Group Id set to the VAL group ID of the
temporary group.
#### 6.2.11.2 SGM server HTTP procedure
Upon receiving an HTTP POST request from SGM-S where the Request-URI of the
HTTP POST request contains \"/temporary-groups\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps; and
b) shall check whether any of the received VAL group IDs is a temporary group,
and:
1) if any of the received VAL group IDs is a temporary group, shall respond
with an HTTP 403 (Forbidden) response to the HTTP POST request and skip rest
of the steps; and
2) else shall create and store the received parameters in the HTTP POST
request message;
c) shall notify the VAL server regarding the temporary group creation with the
received parameters; and
d) shall generate an HTTP POST request message. In the HTTP POST request:
1) shall set the request URI to the URI of the SGM-C received at the time of
creating groups;
2) shall include the parameters specified in clause B.5 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10]; and
3) shall send the HTTP POST request to every SGM-C of the constituent VAL
groups.
Upon receiving an HTTP 200 (OK) message contains only one parameter of VAL
Group Id, the SGM-S shall send an HTTP 200 (OK) response to SGM-C. In the
response, the SGM-S shall include the parameters specified in clause A.4.2
serialized into a JavaScript Object Notation (JSON) structure as specified in
IETF RFC 7159 [10];
#### 6.2.11.3 SGM client CoAP procedure
In order to form a temporary group, the SGM-C shall follow the procedure to
create a group as defined in clause 6.2.2.4 with the following clarifications.
The SGM-C:
a) shall set \"category\" attribute to \"TEMPORARY\";
b) shall include the list of VAL group IDs of the constituent VAL groups in
the \"inclValGroupIds\" attribute.
Upon receiving a CoAP 2.01 (Created) response, the SGM-C shall notify the VAL
user about successful formation of the temporary group.
#### 6.2.11.4 SGM server CoAP procedure
Upon receiving a group creation request for a group with the \"category\"
attribute value of \"TEMPORARY\", the SGM-S shall follow the procedure as
defined in clause 6.2.2.5 with the following clarifications. The SGM-S:
a) before creating the group, shall check whether any of the received VAL
group IDs is a temporary group, and:
1) if any of the received VAL group IDs is a temporary group, shall not create
the group and respond with a CoAP 4.03 (Forbidden) response to the CoAP POST
request;
b) upon successful group creation, shall notify the VAL server regarding the
temporary group creation.
## 6.3 Off-network procedures
The off-network procedures are out of scope of the present document in this
release of the specification.
# 7 Coding
## 7.1 General
## 7.2 Application unique ID
The AUID shall be set to the VAL service ID as specified in specific VAL
service specification.
## 7.3 Data structure
The \ element:
a) shall include an \"uri\" attribute representing the VAL group identity;
b) may include a \ element containing a human readable name of
the VAL group;
c) shall include a \ element. The \ element:
1) may include a \ element indicating group description;
2) shall include a \ element indicating category of the group; and
3) shall include one or more \ element(s) indicating list of
services supported by the group; and
4) may include one or more \ element(s) indicating list of
geographical areas to be addressed by the group.
d) may include a \ element containing list of group members
who are administrator for the group;
e) may include a \ element containing list of users who
explicitly needs to register to join the group;
f) may include a \ element containing list of members who are implicitly
registered to join the group; and
g) shall include a \ element. The \
element:
1) may include a \ element; and
2) may include an\ element.
## 7.4 XML Schema
### 7.4.1 General
The Group Document shall be composed according to the XML schema described in
[7] and extended with extensions from the XML Schemas defined in [8] and [9],
and extended with extensions from the XML schema defined in clause 7.4.2.
### 7.4.2 XML schema for SEAL group document specific extension
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## 7.5 Semantics
The \ element of \ element contains a human
readable name of the VAL group.
The value of the \"uri\" attribute in the \ element shall
represent a VAL group identity.
The \ element of a \ element shall contain the
group members who are administrator of the group and have special authorities
as defined by VAL service to manage the group. The administrator user do not
require explicit registration to join the group.
The \ element of a \ element shall contain
the group members who are not administrator of the group and require explicit
registration to join the group.
The \ element of a \ element shall contain the group
members who are not administrator of the group and also do not require
explicit registration to join the group.
The \ child element of a \ element of a \
element shall indicate the title or description for the Group. The length of
the value of the \ element should not exceed 255 characters.
The \ child element of a \ element of a \
element shall indicate the category of the group. The possible values for this
element are \"normal\", \"location-based\" and \"regroup\".
The \ child element of a \ element of a \ element shall indicate the service supported by the group.
The \ child element of a \ element of a \
element shall indicate geographical area addressed by the group.
The \ child element of a \ element of a
\ element contains a positive number which provides VAL group
priority among different VAL groups within VAL service. More than one VAL
group can have same priority.
The \ child element of a \ element of
a \ element identifies the member UEs of the VAL group at the
3GPP core network
The VAL service may further extend the \ element of a
\ element to include VAL service specific configuration.
## 7.6 MIME type
The MIME type for VAL user profile configuration shall be set to
\"vnd.3gpp.seal-group-doc+xml\".
## 7.7 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.seal-group-doc+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in section 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in section 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP or in HTTP. So the
security considerations from IETF RFC 3261 apply while exchanging information
in SIP and the security considerations from IETF RFC 2616 apply while
exchanging information in HTTP.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.544 \"Group Management - Service Enabler Architecture Layer for
Verticals (SEAL); Protocol specification\", available via
http://www.3gpp.org/specs/numbering.htm.
Applications Usage:
Applications supporting the SEAL group management procedures as described in
the published specification.
Fragment identifier considerations:
The handling in section 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
###### ## Annex A (normative): Parameters for different operations
# A.1 Creating group events subscription
## A.1.1 General
The information in this annex provides a normative description of the
parameters which will be sent by SGM-C while creating group events
subscription and the parameters which will be sent by SGM-S as a response to
request for creating subscription.
## A.1.2 Client side parameters
The SGM-C shall convey the following parameters while sending request for
creating group events subscription.
Table A.1.2-1: Client side parameters for creating group events subscription
Parameter Description
* * *
VAL User Id REQUIRED. Represents a VAL user who initiates subscription.
Callback-URI REQUIRED. Represents where to send HTTP notifications
Subscription Info REQUIRED. Represents a space-separated list of the
subscription type information as specified in table A.1.2-2.
Table A.1.2-2: Subscription information
+------------------+--------------------------------------------------+ | Parameter | Description | +==================+==================================================+ | Event | REQUIRED. Represents the type of notification | | | which client requires. This specification | | | defines following type of notifications: | | | | | | - 0x01: SUBSCRIBE_GROUP_ANNOUNCEMENT | | | | | | - 0x02: SUBSCRIBE_GROUP_MODIFICATION | +------------------+--------------------------------------------------+ | expiry time | REQUIRED. Represents the time in seconds up to | | | which the subscription is desired to be kept | | | active and the time after which the subscribed | | | event shall stop generating notifications. | +------------------+--------------------------------------------------+ | Group ID list | REQUIRED if \"Event\" parameter is set to | | | SUBSCRIBE_GROUP_MODIFICATION (0x02) or | | | SUBSCRIBE_GROUP_IDENTITY_LIST (0x04). | | | Represents a space-separated list of VAL group | | | ID of the groups | +------------------+--------------------------------------------------+ | Minimum Interval | OPTIONAL. Indicates the minimum time interval | | | between consecutive notifications. Defaults to 0 | | | if not provided. | +------------------+--------------------------------------------------+
## A.1.3 Server side parameters
The SGM-S shall convey the following parameters while sending response to the
creating group events subscription request.
Table A.1.3-1: Server side parameters for response to creating group events
subscription
Parameter Description
* * *
Identity REQUIRED. A unique string representing subscription identity.
# A.2 Group registration (join) operation
## A.2.1 Client side parameters
The SGM-C shall convey the following parameters while sending group
registration request.
Table A.2.1-1: Client side parameters for group registration request
Parameter Description
* * *
Message Filters OPTIONAL. Group message communication will be sent to the VAL
UE after applying message filters as described in Table A.2.1-2.
Table A.2.1-2: Message Filter Information
+----------------------------------+----------------------------------+ | Parameter | Description | +==================================+==================================+ | VAL UE Id | Required. Represent the VAL UE | | | identity who has provided these | | | filters. | +----------------------------------+----------------------------------+ | Identities | OPTIONAL. Represents a | | | space-separated list of VAL UE | | | identities. The messages from | | | these VAL UEs will be send to | | | the VAL UE. | +----------------------------------+----------------------------------+ | Max number of messages (NOTE 1) | OPTIONAL. Represents the total | | | number of messages a VAL UE is | | | interested to receive in a given | | | time. | +----------------------------------+----------------------------------+ | Time frame | OPTIONAL. Represents the time in | | | seconds. This parameter is | | | required if Max number of | | | messages parameter is present. | +----------------------------------+----------------------------------+ | Message Types (NOTE 2) | OPTIONAL. Represents a | | | space-separated list of message | | | types (e.g. high priority | | | messages, or group configuration | | | messages, etc.). The messages of | | | these message types will be sent | | | to the VAL UE. | +----------------------------------+----------------------------------+ | NOTE 1: The value for max number | | | of messages is up to the | | | implementation of a particular | | | vertical requirement. | | | | | | NOTE 2: Message types are as | | | decided by the vertical which | | | uses the SEAL. | | +----------------------------------+----------------------------------+
# A.3 Creating group events subscription
## A.3.1 General
The information in this annex provides a normative description of the
parameters which will be sent by SGM-C while fetching list of groups and the
parameters which will be sent by SGM-S as a response to request for fetching
list of groups.
## A.3.2 Client side parameters
The SGM-C shall convey the following parameters while sending request for
fetching list of groups.
Table A.1.2-1: Client side parameters for creating group events subscription
Parameter Description
* * *
VAL User Id REQUIRED. Represents a VAL user who requests to fetch the list
group. Time period OPTIONAL. Represents start and end time to inform SMG-S to
provide list of the groups created between specified time period. If not
present, the SGM-S provides list of all groups in which the VAL user is a
member.
## A.3.3 Server side parameters
The SGM-S shall convey the following parameters while sending response to
fetching list of groups.
Table A.3.3-1: Server side parameters for response to creating group events
subscription
Parameter Description
* * *
VAL Group IDs OPTIONAL. Represents space separated list of group identities.
# A.4 Temporary groups
## A.4.1 Client side parameters
The SGM-C shall convey the following parameters while sending request for
forming a temporary group.
Table A.4.1-1: Client side parameters for forming a temporary group
**Parameter** **Description**
* * *
VAL Group Ids REQUIRED. Represents the list of VAL group IDs to be combined.
VAL Service Ids OPTIONAL. Represents a subset of the common VAL service(s) to
be applied for the temporary group.
## A.4.2 Server side parameters
The SGM-S shall convey the following parameters while sending response to the
request of forming a temporary group.
Table A.4.2-1: Server side parameters for response to form a temporary group
**Parameter** **Description**
* * *
VAL Group Id OPTIONAL. Represents the VAL group ID of the temporary group. VAL
Service Ids OPTIONAL. Represents the list of VAL services whose service
communications are to be enabled on this temporary group. Result REQUIRED.
Represents success or failure of the temporary group formation
###### ## Annex B (normative): Parameters for notifications
# B.1 General
The information in this annex provides a normative description of the
parameters which will be sent by SGM-S while sending different types of
notification
# B.2 Group announcement notification
The SGM-S shall convey the following parameters while sending group
announcement notification to SGM-C.
Table B.2-1: Parameters for group announcement notification
Parameter Description
* * *
Identity REQUIRED. A unique string representing notification channel identity.
Event REQUIRED. Shall be set to SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as
specified in table A.1.2-2. GroupID REQUIRED. An URI that represent a VAL
group identity Subject REQUIRED. A string representing the title or
description for the group. IsJoinReq OPTIONAL. A Boolean indicating whether
user needs to perform registration to join the group or not. This Boolean will
be set to \"true\" for each user in \ element if present
in the document. Val-services OPTIONAL. Represents list of services supported
by the group. Members-list OPTIONAL. Represents list of VAL users who are
member of the group. VAL service specific information OPTIONAL. Provides
placeholder for VAL service specific information. 5GVN Group Info OPTIONAL.
Represents a 5GVN group information as specified in table B.2-2.
NOTE: The Group announcement notification is considered as Group creation
notification when \"IsJoinReq\" parameter is not present or set to \"false\".
Table B.2-2: Parameters for 5GVN group information
+--------------------+------------------------------------------------+ | Parameter | Description | +====================+================================================+ | Communication Type | REQUIRED. Represents the type of the group. | | | This specification defiles following type of | | | the communication transport: | | | | | | - 0x01: ETHERNET_TYPE | | | | | | - 0x02: IPv4_TYPE | | | | | | - 0x04: IPv6_TYPE | | | | | | - 0x08: IPV4V6_TYPE | +--------------------+------------------------------------------------+ | DNN | OPTIONAL. Represents data network name for the | | | 5GVN group. | +--------------------+------------------------------------------------+ | S-NSSAI | OPTIONAL. Represents S-NSSAI for the 5GVN | | | group. | +--------------------+------------------------------------------------+
# B.3 Group modify notification
The SGM-S shall convey the following parameters while sending identify list
notification to SGM-C.
Table B.3-1: Parameters for group announcement notification
+----------------------------------+----------------------------------+ | Parameter | Description | +==================================+==================================+ | Identity | REQUIRED. A unique string | | | representing notification | | | channel identity. | +----------------------------------+----------------------------------+ | Event | REQUIRED. Shall be set to | | | SUBSCRIBE_GROUP_MODIFICATION | | | (0x02) as specified in table | | | A.1.2-2. | +----------------------------------+----------------------------------+ | groupID | REQUIRED. An URI that represent | | | a VAL group identity | +----------------------------------+----------------------------------+ | VAL service specific information | OPTIONAL. Provides placeholder | | | for VAL service specific | | | information. | +----------------------------------+----------------------------------+ | modificationType | REQUIRED. Specifies the type of | | | the modification of group | | | document. This specification | | | defines following types of | | | modifications: | | | | | | 0x01: GROUP_MEMBER_ADDED | | | | | | 0x02: GROUP_MEMBER_REMOVED | | | | | | 0x03: GROUP_CONFIG_UPDATE | +----------------------------------+----------------------------------+
# B.4 Group Identity List notification
The SGM-S shall convey the following parameters while sending identify list
notification to SGM-C.
Table B.4-1: Parameters for group identity list notification
+---------------------+-----------------------------------------------+ | Parameter | Description | +=====================+===============================================+ | Identity | REQUIRED. A unique string representing | | | notification channel identity. | +---------------------+-----------------------------------------------+ | Event | REQUIRED. Shall be set to | | | SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as | | | specified in table A.1.2-2. | +---------------------+-----------------------------------------------+ | GroupID | REQUIRED. An URI that represent a VAL group | | | identity | +---------------------+-----------------------------------------------+ | Members-list | REQUIRED. Represents list of VAL users who | | | are member of the group. | +---------------------+-----------------------------------------------+ | Message Filter List | OPTIONAL. Represents the message filters of | | | all VAL UEs that provided message filters. | | | Each message filter is specified as described | | | in Table A.2.1-2. | | | | | | This parameter is present only for the | | | identify list notification towards VAL | | | server, for the VAL server to apply those | | | filters during group communications. | +---------------------+-----------------------------------------------+
# B.5 Temporary group formation notification
The SGM-S shall convey the following parameters while sending temporary group
formation notification to SGM-C.
Table B.5-1: Parameters for temporary group formation notification
**Parameter** **Description**
* * *
VAL Group Ids REQUIRED. Represents the list of constituent VAL group IDs. VAL
Group Id REQUIRED. Represents the VAL group ID of the temporary group.
###### ## Annex C (normative): CoAP resource representation and encoding
# C.1 General
The information in this annex provides a normative description of CoAP
resource representation and encoding.
The general rules for resource URI structure, cache usage, error handling, and
common data types are described in Annex C.1 of 3GPP TS 24.546 [23].
# C.2 Resource representation and APIs for group management
## C.2.1 SU_GroupManagement API
### C.2.1.1 API URI
The CoAP URIs used in CoAP requests from SGM-C towards the SGM-S shall have
the Resource URI structure as defined in clause C.1.1 of 3GPP TS 24.546 [23]
with the following clarifications:
\- The \ shall be \"su-gm\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause C.2.1.2
### C.2.1.2 Resources
#### C.2.1.2.1 Overview
Figure C.2.1.2.1-1: Resource URI structure of the SU_GroupManagement API
Table C.2.1.2.1-1 provides an overview of the resources and applicable CoAP
methods.
Table C.2.1.2.1-1: Resources and methods overview
+-----------------+-----------------+-------------+-----------------+ | Resource name | Resource URI | CoAP method | Description | +=================+=================+=============+=================+ | VAL Group | / | POST | Create a new | | Documents | group-documents | | VAL group | | | | | document. | +-----------------+-----------------+-------------+-----------------+ | | | GET | Retrieve VAL | | | | | group documents | | | | | according to | | | | | the query | | | | | parameters. If | | | | | there are no | | | | | query | | | | | parameters, do | | | | | not fetch any | | | | | VAL group | | | | | document. | +-----------------+-----------------+-------------+-----------------+ | Individual VAL | /group-documen | GET | Retrieve an | | Group Document | ts/{groupDocId} | | individual VAL | | | | (NOTE) | group\'s | | | | | membership and | | | | | configuration | | | | | information | | | | | according to | | | | | query parameter | | | | | on the resource | | | | | identified by | | | | | {groupDocId}. | | | | | If there are no | | | | | query | | | | | parameter, | | | | | fetch the whole | | | | | VAL group | | | | | document | | | | | resource | | | | | identified by | | | | | {groupDocId}. | +-----------------+-----------------+-------------+-----------------+ | | | PUT | Update an | | | | | individual VAL | | | | | group\'s | | | | | membership and | | | | | configuration | | | | | information | | | | | identified by | | | | | {groupDocId}. | +-----------------+-----------------+-------------+-----------------+ | | | DELETE | Delete a VAL | | | | | group document. | +-----------------+-----------------+-------------+-----------------+ | Individual VAL | /gr | GET | Retrieve VAL | | Group Member | oup-documents/{ | | group member | | Information | groupDocId}/mem | (NOTE) | information | | | bers/{memberId} | | according to | | | | | the query | | | | | parameters. | +-----------------+-----------------+-------------+-----------------+ | | | PUT | Create or | | | | | update VAL | | | | | group member | | | | | information. | +-----------------+-----------------+-------------+-----------------+ | | | DELETE | Delete VAL | | | | | group member | | | | | information. | +-----------------+-----------------+-------------+-----------------+ | VAL Group | / | GET | Retrieve a list | | Membership | group-membershi | | of VAL groups | | | p/{valTargetUe} | (NOTE) | in which the | | | | | VAL user or VAL | | | | | UE is a member | | | | | according to | | | | | the query | | | | | parameters. | +-----------------+-----------------+-------------+-----------------+ | NOTE: The GET | | | | | method can also | | | | | be used to | | | | | observe this | | | | | resource. | | | | +-----------------+-----------------+-------------+-----------------+
> Editor\'s note: Whether any changes required in the API along with its data
> model based on limitations of constrained devices is FFS.
#### C.2.1.2.2 Resource: VAL Group Documents
##### C.2.1.2.2.1 Description
The VAL Group Documents resource represents all the VAL group documents that
are created at a given SGM-S, or allows to create a new VAL group.
##### C.2.1.2.2.2 Resource Definition
Resource URI: **{apiRoot}/su-gm/\ /group-documents**
This resource shall support the resource URI variables defined in the table
C.2.1.2.2.2-1.
Table C.2.1.2.2.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause C.1.1 of 3GPP TS 24.546 [23] apiVersion string See
clause C.2.1.1
##### C.2.1.2.2.3 Resource Standard Methods
##### C.2.1.2.2.3.1 POST {#c.2.1.2.2.3.1-post .H6}
This operation creates a VAL group at the SGM-S.
This method shall support the request data structures specified in table
C.2.1.2.2.3.1-1 and the response data structures and response codes specified
in table C.2.1.2.2.3.1-2, and the response options specified in table
C.2.1.2.2.3.1-3.
Table C.2.1.2.2.3.1-1: Data structures supported by the POST Request payload
on this resource
* * *
Data type P Cardinality Description VALGroupDocument M 1 Details of the VAL
group that needs to be created,
* * *
Table C.2.1.2.2.3.1-2: Data structures supported by the POST Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | VAL | M | 1 | 2.01 Created | VAL group | | GroupDocument | | | | created | | | | | | successfully. | | | | | | | | | | | | The | | | | | | \ | | | | | | "groupDocId\" | | | | | | of the | | | | | | created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Lo | | | | | | cation-Path\" | | | | | | option. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | shall also | | | | | | apply.. | | | | | +---------------+---+-------------+--------------+---------------+
Table C.2.1.2.2.3.1-3: Options supported by the 2.01 Response Code on this
resource
+---------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +---------------+-----------+---+-------------+-----------------+ | Location-Path | string | M | 1 | Contains the | | | | | | location path | | | | | | of the newly | | | | | | created | | | | | | resource | | | | | | relative to the | | | | | | request URI. | | | | | | | | | | | | It contains the | | | | | | groupDocId | | | | | | segment of the | | | | | | complete | | | | | | resource URI | | | | | | according to | | | | | | the structure: | | | | | | {apiRoot}/su-g | | | | | | m/\/group-documen | | | | | | ts/{groupDocId} | +---------------+-----------+---+-------------+-----------------+
##### C.2.1.2.2.3.2 GET {#c.2.1.2.2.3.2-get .H6}
This operation retrieves VAL group documents satisfying filter criteria.
This method shall support the URI query parameters specified in table
C.2.1.2.2.3.2-1.
Table C.2.1.2.2.3.2-1: URI query parameters supported by the GET Request on
this resource
* * *
Name Data type P Cardinality Description val-group-id string O 0..1 Identifies
a VAL group. val-service-id string O 0..1 Identifies a VAL service. member-id
ValTargetUe O 0..1 Identifies a VAL user or VAL UE to match a group member.
time-period array(DateTime) O 2..2 Identifies the time period within which the
group was created. The first element is the start time, followed by the end
time of the time period.
* * *
This method shall support the request options specified in table
C.2.1.2.2.3.2-2, the response data structures and response codes specified in
table C.2.1.2.2.3.2-3, and the response options specified in table
C.2.1.2.2.3.2-4.
Table C.2.1.2.2.3.2-2: Options supported by the GET Request on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Observe | Uinteger | O | 0..1 | When set to 0 | | | | | | (Register) it | | | | | | extends the GET | | | | | | request to | | | | | | subscribe to | | | | | | the changes of | | | | | | this resource. | | | | | | | | | | | | When set to 1 | | | | | | (Deregister) it | | | | | | cancels the | | | | | | subscription. | +-----------------+-----------+---+-------------+-----------------+ | NOTE: Other | | | | | | request options | | | | | | also apply in | | | | | | accordance with | | | | | | normal CoAP | | | | | | procedures. | | | | | +-----------------+-----------+---+-------------+-----------------+
This method shall support the response data structures and response codes
specified in table C.2.1.2.2.3.2 -3.
Table C.2.1.2.2.3.2-3: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | array(VALG | M | 0..N | 2.05 Content | List of VAL | | roupDocument) | | | | group | | | | | | documents. | | | | | | This response | | | | | | shall include | | | | | | VAL group | | | | | | documents | | | | | | matching all | | | | | | the query | | | | | | parameters | | | | | | provided in | | | | | | the request. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in table | | | | | | C.1.3-1 of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | also apply. | | | | | +---------------+---+-------------+--------------+---------------+
Table C.2.1.2.2.3.2-4: Options supported by the 2.05 Response Code on this
resource
* * *
Name Data type P Cardinality Description Observe Uinteger O 0..1 Sequence
number of the notification. NOTE: Other response options also apply in
accordance with normal CoAP procedures.
* * *
#### C.2.1.2.3 Resource: Individual VAL Group Document
##### C.2.1.2.3.1 Description
The Individual VAL Group Document resource represents an individual group
document that is created at the SGM-S.
##### C.2.1.2.3.2 Resource Definition
Resource URI: **{apiRoot}/su-gm/\ /group-documents/{groupDocId}**
This resource shall support the resource URI variables defined in the table
C.2.1.2.3.2-1.
Table C.2.1.2.3.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause C.1.1 of 3GPP TS 24.546 [23] apiVersion string See
clause C.2.1.1 groupDocId string Represents an individual group document
resource.
##### C.2.1.2.3.3 Resource Standard Methods
##### C.2.1.2.3.3.1 GET {#c.2.1.2.3.3.1-get .H6}
This operation retrieves VAL group information satisfying filter criteria.
This method shall support the URI query parameters specified in table
C.2.1.2.3.3.1-1.
Table C.2.1.2.3.3.1-1: URI query parameters supported by the GET method on
this resource
* * *
Name Data type P Cardinality Description group-members boolean O 0..1 This is
a content filtering flag. When set to \"true\", it indicates to the SGM-S to
include the members list information of the VAL group. Set to \"false\" or
omitted otherwise. group-member-details boolean O 0..1 This is a content
filtering flag. When set to \"true\", it indicates to the SGM-S to include the
details of all the members of the VAL group. Set to \"false\" or omitted
otherwise. group-configuration boolean O 0..1 This is a content filtering
flag. When set to \"true\", it indicates to the SGM-S to include the
configuration information of the VAL group. Set to \"false\" or omitted
otherwise.
* * *
This method shall support the request options specified in table
C.2.1.2.3.3.1-2, the response data structures and response codes specified in
table C.2.1.2.3.3.1-3, and the response options specified in table
C.2.1.2.3.3.1-4.
Table C.2.1.2.3.3.1-2: Options supported by the GET Request on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Observe | Uinteger | O | 0..1 | When set to 0 | | | | | | (Register) it | | | | | | extends the GET | | | | | | request to | | | | | | subscribe to | | | | | | the changes of | | | | | | this resource. | | | | | | | | | | | | When set to 1 | | | | | | (Deregister) it | | | | | | cancels the | | | | | | subscription. | +-----------------+-----------+---+-------------+-----------------+ | NOTE: Other | | | | | | request options | | | | | | also apply in | | | | | | accordance with | | | | | | normal CoAP | | | | | | procedures. | | | | | +-----------------+-----------+---+-------------+-----------------+
Table C.2.1.2.3.3.1-3: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | VAL | M | 1 | 2.05 Content | The VAL group | | GroupDocument | | | | information | | | | | | based on the | | | | | | request from | | | | | | the VAL | | | | | | server. | | | | | | | | | | | | This response | | | | | | shall include | | | | | | VAL group | | | | | | members list | | | | | | if | | | | | | group-members | | | | | | flag is set | | | | | | to \"true\" | | | | | | in the | | | | | | request, VAL | | | | | | group member | | | | | | details if | | | | | | group-m | | | | | | ember-details | | | | | | flag is set | | | | | | to \"true\" | | | | | | in the | | | | | | request, VAL | | | | | | group | | | | | | configuration | | | | | | information | | | | | | if the | | | | | | group- | | | | | | configuration | | | | | | flag is set | | | | | | to \"true\" | | | | | | in the | | | | | | request, VAL | | | | | | group | | | | | | identifier, | | | | | | the whole VAL | | | | | | group | | | | | | document | | | | | | resource if | | | | | | all the flags | | | | | | are | | | | | | omitted/set | | | | | | to \"false\" | | | | | | in the | | | | | | request. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in table | | | | | | C.1.3-1 of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | also apply. | | | | | +---------------+---+-------------+--------------+---------------+
Table C.2.1.2.3.3.1-4: Options supported by the 2.05 Response Code on this
resource
* * *
Name Data type P Cardinality Description Observe Uinteger O 0..1 Sequence
number of the notification. NOTE: Other response options also apply in
accordance with normal CoAP procedures.
* * *
##### C.2.1.2.3.3.2 PUT {#c.2.1.2.3.3.2-put .H6}
This operation updates the VAL group document.
This method shall support the request data structures specified in table
C.2.1.2.3.3.2-1 and the response data structures and response codes specified
in table C.2.1.2.3.3.2-2.
Table C.2.1.2.3.3.2-1: Data structures supported by the PUT Request payload on
this resource
* * *
Data type P Cardinality Description VALGroupDocument M 1 Updated details of
the VAL group document.
* * *
Table C.2.1.2.3.3.2-2: Data structures supported by the PUT Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | VAL | O | 0..1 | 2.04 Changed | The VAL group | | GroupDocument | | | | document | | | | | | updated | | | | | | successfully, | | | | | | and the | | | | | | updated VAL | | | | | | group | | | | | | document may | | | | | | be returned | | | | | | in the | | | | | | response. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
##### C.2.1.2.3.3.3 DELETE {#c.2.1.2.3.3.3-delete .H6}
This operation deletes the VAL group document.
This method shall support the response data structures and response codes
specified in table C.2.1.2.3.3.3-1.
Table C.2.1.2.3.3.3-1: Data structures supported by the DELETE Response
payload on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | n/a | | | 2.02 Deleted | The | | | | | | individual | | | | | | VAL group | | | | | | document | | | | | | matching the | | | | | | groupDocId is | | | | | | deleted. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | 1 of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### C.2.1.2.4 Resource: Individual VAL Group Member
##### C.2.1.2.4.1 Description
The Individual VAL Group Member resource represents an individual group member
information that is maintained at the SGM-S.
##### C.2.1.2.4.2 Resource Definition
Resource URI: **{apiRoot}/su-gm/\ /group-
documents/{groupDocId}/members/{memberId}**
This resource shall support the resource URI variables defined in the table
C.2.1.2.4.2-1.
Table C.2.1.2.3.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause C.1.1 of 3GPP TS 24.546 [23] apiVersion string See
clause C.2.1.1 groupDocId string Represents an individual group document
resource. memberId ValTargetUe Identifies an individual VAL group member.
##### C.2.1.2.4.3 Resource Standard Methods
##### C.2.1.2.4.3.1 GET {#c.2.1.2.4.3.1-get .H6}
This operation retrieves the individual VAL group member\'s information.
This method shall support the request options specified in table
C.2.1.2.4.3.1-1, the response data structures and response codes specified in
table C.2.1.2.4.3.1-2, and the response options specified in table
C.2.1.2.4.3.1-3.
Table C.2.1.2.4.3.1-1: Options supported by the GET Request on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Observe | Uinteger | O | 0..1 | When set to 0 | | | | | | (Register) it | | | | | | extends the GET | | | | | | request to | | | | | | subscribe to | | | | | | the changes of | | | | | | this resource. | | | | | | | | | | | | When set to 1 | | | | | | (Deregister) it | | | | | | cancels the | | | | | | subscription | +-----------------+-----------+---+-------------+-----------------+ | NOTE: Other | | | | | | request options | | | | | | also apply in | | | | | | accordance with | | | | | | normal CoAP | | | | | | procedures. | | | | | +-----------------+-----------+---+-------------+-----------------+
Table C.2.1.2.4.3.1-2: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | GroupMember | M | 1 | 2.05 Content | The VAL group | | | | | | member | | | | | | information. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in table | | | | | | C.1.3-1 of | | | | | | 3GPP TS | | | | | | 24.546 [23] | | | | | | also apply. | | | | | +---------------+---+-------------+--------------+---------------+
Table C.2.1.2.4.3.1-4: Options supported by the 2.05 Response Code on this
resource
* * *
Name Data type P Cardinality Description Observe Uinteger O 0..1 Sequence
number of the notification NOTE: Other response options also apply in
accordance with normal CoAP procedures.
* * *
##### C.2.1.2.4.3.2 PUT {#c.2.1.2.4.3.2-put .H6}
This operation creates or updates the VAL group member information.
This method shall support the request data structures specified in table
C.2.1.2.4.3.2-1 and the response data structures and response codes specified
in table C.2.1.2.4.3.2-2.
Table C.2.1.2.4.3.2-1: Data structures supported by the PUT Request payload on
this resource
* * *
Data type P Cardinality Description GroupMember M 1 New or updated details of
the VAL group member.
* * *
Table C.2.1.2.4.3.2-2: Data structures supported by the PUT Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | GroupMember | O | 0..1 | 2.01 Created | The VAL group | | | | | | member | | | | | | resource was | | | | | | created | | | | | | successfully, | | | | | | and the | | | | | | created | | | | | | resource may | | | | | | be returned | | | | | | in the | | | | | | response. | +---------------+---+-------------+--------------+---------------+ | GroupMember | O | 0..1 | 2.04 Changed | The VAL group | | | | | | member | | | | | | resource was | | | | | | updated | | | | | | successfully, | | | | | | and the | | | | | | updated | | | | | | resource may | | | | | | be returned | | | | | | in the | | | | | | response. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table C.1.3-1 | | | | | | of 3GPP TS | | | | | | 24.546 [23] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
##### C.2.1.2.4.3.3 DELETE {#c.2.1.2.4.3.3-delete .H6}
This operation deletes the VAL group member information.
This method shall support the response data structures and response codes
specified in table C.2.1.2.4.3.3-1.
Table C.2.1.2.4.3.3-1: Data structures supported by the DELETE Response
payload on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | n/a | | | 2.02 Deleted | The VAL group | | | | | | member | | | | | | resource | | | | | | matching the | | | | | | groupDocId | | | | | | and memberId | | | | | | is deleted. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | 1 of 3GPP TS | | | | | | 24.546 [23] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
### C.2.1.3 Data Model
#### C.2.1.3.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause C.1.X of TS 24.546 [23] apply to this API.
Table C.2.1.3.1-1 specifies the data types defined specifically for the
SU_GroupManagement API service.
Table C.2.1.3.1-1: SU_GroupManagement API specific Data Types
Data type Section defined Description Applicability
* * *
VALGroupDocument C.2.1.3.2.2 VAL group document details.  
GroupCategory C.2.1.3.3.3 Represents the category of the VAL group.  
GroupMember C.2.1.3.2.3 Represents membership and configuration details of the
VAL group member.  
MembershipType C.2.1.3.3.2 Represents the type of membership of the VAL group
member.  
MembershipState C.2.1.3.2.4 Represents the state of the member in the group.
E.g., an explicit member will register in the group by setting its
\"registered\" attribute to \"true\", or will set that attribute to \"false\"
when leaving the group.  
MessageFilter C.2.1.3.2.5 The message filter information applicable to member
VAL UEs or VAL users of the VAL group.
Table C.2.1.3.1-2 specifies data types re-used by the SU_GroupManagement API
service.
Table C.2.1.3.1-2: Re-used Data Types
Data type Reference Comments Applicability
* * *
ExternalGroupId 3GPP TS 24.546 [23] External group identifier.  
ScheduledCommunicationTime 3GPP TS 24.546 [23] Represents a scheduled
communication time.  
Uri 3GPP TS 24.546 [23] Unified resource identifier.  
ValTargetUe 3GPP TS 24.546 [23] Used to identify either a VAL User or a VAL
UE.
#### C.2.1.3.2 Structured data types
##### C.2.1.3.2.1 Introduction
##### C.2.1.3.2.2 Type: VALGroupDocument
Table C.2.1.3.2.2-1: Definition of type VALGroupDocument
Attribute name Data type P Cardinality Description Applicability
* * *
valGroupId string M 1 This is VAL group identity (VAL group ID) as per TS
23.434 [2], which is a unique identifier within the VAL service that
represents a VAL group, set of VAL users or VAL UEs according to the VAL
service.  
category GroupCategory M 1 Indicates the category of the group, e.g.
\"NORMAL\" or \"LOCATION_BASED\".  
groupName string O 0..1 A human readable name of the VAL group.  
grpDesc string O 0..1 Text description of the VAL group.  
members array(ValTrgetUe) O 1..N List of VAL User IDs or VAL UE IDs, which are
members of the VAL group.  
memberDetails array(GroupMember) O 1..N List of detailed member information
for each member of the VAL group.  
valGrpConf string O 0..1 Configuration data for the VAL group, provided by the
VAL client.  
inclValGroupIds array(string) O 1..N List of VAL group IDs constituting the
VAL group.  
valServiceIds array(string) O 1..N List of VAL services whose communications
are enabled on the group.  
resUri Uri O 0..1 The URI for individual VAL group document resource. (NOTE)  
extGrpId ExternalGroupId O 0..1 The external group identifier, identifying the
member UEs of the VAL group at the 3GPP core network.  
com5GLanType Com5GLanType O 0..1 Identifies the 5G LAN-Type communication.  
geoIds array(GeographicalAreaId) O 1..N List of geographical area ids
addressed by the VAL group.  
priority GroupPriority O 0..1 Indicates VAL group priority among different VAL
groups within VAL service.  
NOTE: The \"resUri\" attribute is set by the SGM-S and is not modifiable by
the SGM-C.
##### C.2.1.3.2.3 Type: GroupMember
Table C.2.1.3.2.3-1: Definition of type GroupMember
Attribute name Data type P Cardinality Description Applicability
* * *
memberId ValTargetUe M 1 This is a VAL group member identity (VAL user ID or
VAL UE ID) as per TS 23.434 [2].  
membershipType MembershipType M 1 Indicates the type of membership applicable
for the group member, e.g. \"ADMINISTRATOR\", \"EXPLICIT\" or \"IMPLICIT\".  
membershipState MembershipState O 0..1 Indicates the current state of the
member in the group, e.g. it may indicate that an \"EXPLICIT\" member is
registered (joined) the group. When absent the state is unknown.  
messageFilter MessageFilter O 0..1 The message filter applicable to traffic
sent to the group member in the context of the group.  
memberConfig string O 0..1 VAL service specific configuration.  
resUri Uri O 0..1 The URI for individual VAL group member resource. (NOTE)  
NOTE: The \"resUri\" attribute is set by the SGM-S and is not modifiable by
the SGM-C.
##### C.2.1.3.2.4 Type: MembershipState
Table C.2.1.3.2.3-1: Definition of type MembershipState
Attribute name Data type P Cardinality Description Applicability
* * *
registered boolean O 0..1 Indicates if the member is registered in the group.
It is set to \"true\" that an \"EXPLICIT\" member is registered (joined) the
group. When absent or \"false\" the member is not unregistered.  
NOTE: TBD
##### C.2.1.3.2.5 Type: MessageFilter
Table C.2.1.3.2.5-1: Definition of type MessageFilter
Attribute name Data type P Cardinality Description Applicability
* * *
tgtUe array(ValTargetUe) O 1..N List of VAL USER or UE IDs whose messages will
be sent to the owner of this message filter (VAL User or VAL UE).  
maxMsgs Uinteger O 0..1 Total number of messages allowed to be sent to the
owner of this message filter in the given time frame defined in the filter.  
scheds array(ScheduledCommunicationTime) O 1..N Time frame associated to the
total number of messages in maxMsgs attribute.  
msgTypes array(string) O 1..N List of message types allowed to be sent to the
owner of this message filter. Message types may be VAL service specific and
are not defined by this specification.
#### C.2.1.3.3 Simple data types and enumerations
##### C.2.1.3.3.1 Simple data types
Table C.2.1.3.3.1-1 Simple data types
* * *
Type name Description GeographicalAreaId String identifying a geographical
area. GroupPriority Integer between and including 0 and 255 which provides VAL
group priority among different VAL groups within VAL service.
* * *
##### C.2.1.3.3.2 Enumeration: MembershipType
Table C.2.1.3.3.2-1: Enumeration MembershipType
**Enumeration value** **Description** **Applicability**
* * *
ADMINISTRATOR This type of group membership indicates that the group member is
an administrator of the group and has special authorities as defined by VAL
service to manage the group. The administrator is not required to perform
explicit registration to join the group.  
EXPLICIT This type of group membership indicates that the group member is an
explicit member who is not an administrator of the group and who is required
to perform explicit registration to join the group.  
IMPLICIT This type of group membership indicates that the group member is an
implicit member who is not an administrator of the group and who is not
required to perform explicit registration to join the group.
##### C.2.1.3.3.3 Enumeration: GroupCategory
Table C.2.1.3.3.3-1: Enumeration GroupCategory
Enumeration value Description Applicability
* * *
NORMAL Indicates a \"normal\" group category.  
LOCATION_BASED Indicates a \"location based\" group category.  
REGROUP Indicates a \"regroup\" group category.  
TEMPORARY Indicates a \"temporary\" group category.
##### C.2.1.3.3.4 Enumeration: Com5GLanType
Table C.2.1.3.3.4-1: Enumeration Com5GLanType
**Enumeration value** **Description** **Applicability**
* * *
IPV4 IPv4  
IPV6 IPv6  
IPV4V6 IPv4 and IPv6  
ETHERNET Ethernet
### C.2.1.4 Error Handling
General error responses are defined in clause C.1.3 of 3GPP TS 24.546 [23].
### C.2.1.5 CDDL Specification
#### C.2.1.5.1 Introduction
The data model described in clause C.2.1.3 shall be binary encoded in the CBOR
format as described in IETF RFC 8949 [19].
Clause C.2.1.5.2 uses the Concise Data Definition Language described in IETF
RFC 8610 [21] and provides corresponding representation of the
SU_GroupManagement API data model.
#### C.2.1.5.2 CDDL document
;;; VALGroupDocument
;;+ Represents details of the VAL group document information.
VALGroupDocument = {
valGroupId: text ; The VAL group idenitity.
category: GroupCategory
? groupName: text ; A human readable name of the VAL group.
? grpDesc: text ; The text description of the VAL group.
? members: [+ ValTargetUe] ; The list of VAL User IDs or VAL UE IDs, which are
members of the VAL group.
? memberDetails: [+ GroupMember]; The list of detailed information of members
of the VAL group.
? valGrpConf: text ; Configuration data for the VAL group.
? inclValGroupIds: [+ text] ; The list of VAL group IDs constituting the VAL
group.
? valServiceIds: [+ text] ; The list of VAL services enabled on the group.
? resUri: Uri
? extGrpId: ExternalGroupId
? com5GLanType: Com5GLanType
? geoIds: [+ GeographicalAreaId]; The list of geographical area ids addressed
by the VAL group.
? priority: GroupPriority
}
;;; GroupCategory
;;+ The category of the VAL group.
GroupCategory = \"NORMAL\" / \"LOCATION_BASED\" / \"REGROUP\" / \"TEMPORARY\"
/ text ; text value provides forward-compatibility with future extensions to
the enumeration but is not used to encode content defined in the present
version of this API.
;;; GroupMember
;;+ Represents details of the VAL group member.
GroupMember = {
memberId: ValTargetUe ; Identifies the member of the VAL group. Once set, this
information cannot be updated.
membershipType: MembershipType
? membershipState: MembershipState
? messageFilter: MessageFilter
? memberConfig: text
? resUri: Uri
}
;;; GroupPriority
;;+ VAL group priority a positive integer which provides VAL group priority
among different VAL groups within VAL service.
GroupPriority = 0..255
;;; GeographicalAreaId
;;+ Identifies a geographical area.
GeographicalAreaId = text
;;; MembershipType
;;+ Indicates the type of group membership.
MembershipType = \"ADMINISTRATOR\" / \"EXPLICIT\" / \"IMPLICIT\" / text ; text
value provides forward-compatibility with future extensions to the enumeration
but is not used to encode content defined in the present version of this API.
;;; MembershipState
;;+ Represents the state of the member in the group.
MembershipState = {
? registered: bool
}
;;; MessageFilter
;;+ Represents the message filters applicable to a VAL User ID or VAL UE ID.
MessageFilter = {
? tgtUe: [+ ValTargetUe] ; List of VAL User or UE IDs whose message to be
sent.
? maxMsgs: Uinteger
? scheds: [+ ScheduledCommunicationTime]; Time frame associated with total
number of messages.
? msgTypes: [+ text] ; List of message types to be sent to VAL UE.
}
;;; ScheduledCommunicationTime
;;+ Represents an offered scheduled communication time.
ScheduledCommunicationTime = {
? daysOfWeek: [1*6 DayOfWeek] ; Identifies the day(s) of the week. If absent,
it indicates every day of the week.
? timeOfDayStart: TimeOfDay
? timeOfDayEnd: TimeOfDay
}
;;; ValTargetUe
;;+ Represents information identifying a VAL user ID or a VAL UE ID.
ValTargetUe = {
(
valUserId: text ; Unique identifier of a VAL user.
//
valUeId: text ; Unique identifier of a VAL UE.
)
}
;;; ExternalGroupId
;;+ string containing a local identifier followed by \"@\" and a domain
identifier. Both the local identifier and the domain identifier shall be
encoded as strings that do not contain any \"@\" characters. See Clauses 4.6.2
and 4.6.3 of 3GPP TS 23.682 for more information.
ExternalGroupId = text
;;; Com5GLanType
;;+ Communication type for a 5GVN-based group communication
Com5GLanType = \"IPV4\" / \"IPV6\" / \"IPV4V6\" / \"ETHERNET\" / text
;;; DayOfWeek
;;+ integer between and including 1 and 7 denoting a weekday. 1 shall indicate
Monday, and the subsequent weekdays shall be indicated with the next higher
numbers. 7 shall indicate Sunday.
DayOfWeek = 1..7
;;; TimeOfDay
;;+ String with format partial-time or full-time as defined in subclause 5.6
of IETF RFC 3339. Examples, 20:15:00, 20:15:00-08:00 (for 8 hours behind UTC).
TimeOfDay = text
;;; Uinteger
;;+ Unsigned Integer, i.e. only value 0 and integers above 0 are permissible.
Uinteger = int .ge 0
;;; Uri
;;+ string providing an URI formatted according to IETF RFC 3986.
Uri = text
### C.2.1.6 Media Type
The media type for a VAL group document shall be \"application/vnd.3gpp.seal-
group-doc+cbor\".
The media type for a VAL group member information shall be
\"application/vnd.3gpp.seal-group-member-info+cbor\".
Editor\'s Note: It is possible to specify other payload format for CoAP than
CBOR, and the details about other payload format is FFS.
### C.2.1.7 Media Type registration for application/vnd.3gpp.seal-group-
doc+cbor
Type name: application
Subtype name: vnd.3gpp.seal-group-doc+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [17]. See
\"VALGroupDocument\" data type in 3GPP TS 24.544 clause C.2.1.3.2.2 for
details.
Security considerations: See Section 10 of IETF RFC 8949 [17] and Section 11
of IETF RFC 7252 [12].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.544 \"Group Management - Service Enabler
Architecture Layer for Verticals (SEAL); Protocol specification\", available
via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL group
management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [17]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
### C.2.1.8 Media Type registration for application/vnd.3gpp.seal-group-
member-info+cbor
Type name: application
Subtype name: vnd.3gpp.seal-group-member-info+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [17]. See
\"GroupMember\" data type in 3GPP TS 24.544 clause C.2.1.3.2.3 for details.
Security considerations: See Section 10 of IETF RFC 8949 [17]and Section 11 of
IETF RFC 7252 [12].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.544 \"Group Management - Service Enabler
Architecture Layer for Verticals (SEAL); Protocol specification\", available
via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL group
management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [17]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
#