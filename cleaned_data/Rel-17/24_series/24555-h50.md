# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document defines User Equipment (UE) policies that are used to
configure the UE for Proximity-based Services (ProSe) in 5G System (5GS) based
on the architectural requirements defined in 3GPP TS 23.304 [2].
The protocol aspects for 5G ProSe are described in 3GPP TS 24.554 [3].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document in the same
Release as the present document.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System (5GS);
Stage 2\".
[3] 3GPP TS 24.554: \" Proximity-services (ProSe) in 5G System (5GS) protocol
aspects; Stage 3\".
[4] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
[5] ITU-T Recommendation E.212: \"The international identification plan for
public networks and subscriptions\", 2016-09-23.
[6] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[7] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC) protocol
specification\".
[8] 3GPP TS 38.101-1: \"NR; User Equipment (UE) radio transmission and
reception; Part 1: Range 1 Standalone\".
[9] 3GPP TS 38.101-2: \"NR; User Equipment (UE) radio transmission and
reception; Part 2: Range 2 Standalone\".
[10] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[11] 3GPP TS 24.526: \"User Equipment (UE) policies for 5G System (5GS); Stage
3\".
[12] IETF RFC 4122: \"A Universally Unique IDentifier (UUID) URN Namespace\".
[13] 3GPP TS 33.503: \"Security Aspects of Proximity based Services (ProSe) in
the 5G System (5GS)\".
[14] 3GPP TS 32.277: \" Proximity-based Services (ProSe) charging\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5G ProSe 5G Proximity-based Services
5G PKMF 5G ProSe Key Management Function
DUCK Discovery User Confidentiality Key
DUIK Discovery User Integrity Key
DUSK Discovery User Scrambling Key
FQDN Fully Qualified Domain Name
ProSeP 5G ProSe Policy
RSC Relay Service Code
# 4 Descriptions of UE policies for 5G ProSe
## 4.1 Overview
The ProSe policy in 5GS includes:
a) UE policies for 5G ProSe direct discovery (see clause 4.2);
b) UE policies for 5G ProSe direct communications (see clause 4.3);
c) UE policies for 5G ProSe UE-to-network relay (see clause 4.4); and
d) UE policies for 5G ProSe usage information reporting (see clause 4.5).
The ProSe policy can be delivered from the PCF to the UE. The UE policy
delivery procedure is specified in 3GPP TS 24.501 [4].
## 4.2 UE policies for 5G ProSe direct discovery
The UE policies for 5G ProSe direct discovery are defined in clause 5.2.3 of
3GPP TS 24.554 [3]. The generic description of the UE policies for 5G ProSe
direct discovery is specified in 3GPP TS 23.304 [2].
## 4.3 UE policies for 5G ProSe direct communications
The UE policies for 5G ProSe direct communications are defined in clause 5.2.4
of 3GPP TS 24.554 [3]. The generic description of the UE policies for 5G ProSe
direct communications is specified in 3GPP TS 23.304 [2].
## 4.4 UE policies for 5G ProSe UE-to-network relay
The UE policies for 5G ProSe UE-to-network relay UE are defined in clause
5.2.5 of 3GPP TS 24.554 [3]. The generic description of the UE policies for 5G
ProSe UE-to-network relay is specified in 3GPP TS 23.304 [2].
The UE policies for 5G ProSe remote UE are defined in clause 5.2.5 of 3GPP TS
24.554 [3]. The generic description of the UE policies for 5G ProSe remote UE
is specified in 3GPP TS 23.304 [2].
## 4.5 UE policies for 5G ProSe usage information reporting
The UE policies for 5G ProSe usage information reporting are defined in clause
5.2.6 of 3GPP TS 24.554 [3]. The generic description of the UE policies for 5G
ProSe usage information reporting is specified in 3GPP TS 32.277 [14].
# 5 Encoding of UE policies for 5G ProSe
## 5.1 Overview
The UE policies for 5G ProSe are provided to the UE in a 5G ProSe policy
(ProSeP) UE policy part using the UE policy delivery service as specified in
3GPP TS 24.501 [4] annex D.
## 5.2 Encoding of 5G ProSe policy UE policy part
The purpose of the ProSeP is to indicate UE policies for 5G ProSe direct
discovery, 5G ProSe direct communications, 5G ProSe UE-to-network relay UE, 5G
ProSe remote UE and UE policies for 5G ProSe usage information reporting.
The ProSeP is encoded as shown in figures 5.2.1 to 5.2.3 and table 5.2.1
according to the UE policy part top level format (see annex D of 3GPP TS
24.501 [4]).
+------------+---------+---+---+------------+---------+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +============+=========+===+===+============+=========+===+===+===+ | UE policy | octet 1 | | | | | | | | | part | | | | | | | | | | contents | octet 2 | | | | | | | | | length | | | | | | | | | +------------+---------+---+---+------------+---------+---+---+---+ | 0 | 0 | 0 | 0 | UE policy | octet 3 | | | | | | | | | part | | | | | | | | | | typ | | | | | | | | | | e={ProSeP} | | | | | +------------+---------+---+---+------------+---------+---+---+---+ | Spare | | | | | | | | | +------------+---------+---+---+------------+---------+---+---+---+ | UE policy | octet 4 | | | | | | | | | part | | | | | | | | | | conten | octet x | | | | | | | | | ts={ProSeP | | | | | | | | | | contents} | | | | | | | | | +------------+---------+---+---+------------+---------+---+---+---+
Figure 5.2.1: UE policy part when UE policy part type = {ProSeP}
+-----------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=================+===============+===+===+===+===+===+===+===+ | ProSeP info #1 | octet 4 | | | | | | | | | | | | | | | | | | | | octet a | | | | | | | | +-----------------+---------------+---+---+---+---+---+---+---+ | ProSeP info #2 | octet (a+1)* | | | | | | | | | | | | | | | | | | | | octet b* | | | | | | | | +-----------------+---------------+---+---+---+---+---+---+---+ | ... | octet (b+1)* | | | | | | | | | | | | | | | | | | | | octet w* | | | | | | | | +-----------------+---------------+---+---+---+---+---+---+---+ | ProSeP info #n | octet (w+1)* | | | | | | | | | | | | | | | | | | | | octet x* | | | | | | | | +-----------------+---------------+---+---+---+---+---+---+---+
Figure 5.2.2: ProSeP contents
+--------------------------------+-----------+---+---+------------------+---------+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +================================+===========+===+===+==================+=========+===+===+===+ | 0 | 0 | 0 | 0 | ProSeP info type | octet k | | | | +--------------------------------+-----------+---+---+------------------+---------+---+---+---+ | Spare | | | | | | | | | +--------------------------------+-----------+---+---+------------------+---------+---+---+---+ | Length of ProSeP info contents | octet k+1 | | | | | | | | | | | | | | | | | | | | octet k+2 | | | | | | | | +--------------------------------+-----------+---+---+------------------+---------+---+---+---+ | ProSeP info contents | octet k+3 | | | | | | | | | | | | | | | | | | | | octet l | | | | | | | | +--------------------------------+-----------+---+---+------------------+---------+---+---+---+
Figure 5.2.3: ProSeP info
Table 5.2.1: ProSeP information format
UE policy part type field is set to \'0100\' (=ProSeP) as specified in 3GPP TS
24.501 [4] annex D.
* * *
UE policy part contents length field indicate the length of the ProSeP
contents in octets.  
ProSeP contents (octets 4 to x)  
ProSeP contents consist of 1 or more ProSeP info(s) (see figure 5.2.2).  
ProSeP info type (bit 1 to 4 of octet k) shall be set according to the
following:  
Bits  
4 3 2 1  
0 0 0 1 UE policies for 5G ProSe direct discovery 0 0 1 0 UE policies for 5G
ProSe direct communications 0 0 1 1 UE policies for 5G ProSe UE-to-network
relay UE 0 1 0 0 UE policies for 5G ProSe remote UE 0 1 0 1 UE policies for 5G
ProSe usage information reporting All other values are reserved.  
Bits 8 to 5 of octet k are spare and shall be encoded as zero.  
Length of ProSeP info contents (octets k+1 to k+2) indicates the length of the
ProSeP info contents field.  
ProSeP info contents (octets k+3 to l) can be UE policies for 5G ProSe direct
discovery (see clause 5.3), UE policies for 5G ProSe direct communications
(see clause 5.4), UE policies for 5G ProSe UE-to-network relay UE (see clause
5.5), UE policies for 5G ProSe remote UE (clause 5.6) or UE policies for 5G
ProSe usage information reporting (clause 5.7).
## 5.3 Encoding of UE policies for 5G ProSe direct discovery
### 5.3.1 General
The UE policies for 5G ProSe direct discovery are coded as shown in figures
5.3.1.1 and table 5.3.1.1.
### 5.3.2 Information elements coding
+--------+--------+-------+-------+--------+--------+--------+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+=======+=======+========+========+========+===+===+ | 0 | 0 | 0 | 0 | ProSeP | octet | | | | | | | | | info | k | | | | | | | | | type = | | | | | | | | | | {UE | | | | | | | | | | po | | | | | | | | | | licies | | | | | | | | | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | direct | | | | | | | | | | disc | | | | | | | | | | overy} | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Spare | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Length | octet | | | | | | | | | of | k+1 | | | | | | | | | ProSeP | | | | | | | | | | info | octet | | | | | | | | | co | k+2 | | | | | | | | | ntents | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Va | octet | | | | | | | | | lidity | k+3 | | | | | | | | | timer | | | | | | | | | | | octet | | | | | | | | | | k+7 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Served | octet | | | | | | | | | by | k+8 | | | | | | | | | NG-RAN | | | | | | | | | | | octet | | | | | | | | | | o1 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Not | octet | | | | | | | | | served | o1+1 | | | | | | | | | by | | | | | | | | | | NG-RAN | octet | | | | | | | | | | o2 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | ProSe | octet | | | | | | | | | direct | o2+1 | | | | | | | | | dis | | | | | | | | | | covery | octet | | | | | | | | | UE ID | o2+3 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Group | octet | | | | | | | | | member | o2+4 | | | | | | | | | dis | | | | | | | | | | covery | octet | | | | | | | | | para | o3 | | | | | | | | | meters | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | ProSe | octet | | | | | | | | | ident | o3+1 | | | | | | | | | ifiers | | | | | | | | | | | octet | | | | | | | | | | o4 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | ProSe | octet | | | | | | | | | iden | o4+1 | | | | | | | | | tifier | | | | | | | | | | to | octet | | | | | | | | | d | l | | | | | | | | | efault | | | | | | | | | | desti | | | | | | | | | | nation | | | | | | | | | | l | | | | | | | | | | ayer-2 | | | | | | | | | | ID for | | | | | | | | | | i | | | | | | | | | | nitial | | | | | | | | | | dis | | | | | | | | | | covery | | | | | | | | | | sign | | | | | | | | | | alling | | | | | | | | | | m | | | | | | | | | | apping | | | | | | | | | | rules | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | 0 | 0 | 0 | 0 | 0 | H5DAI | octet | | | | | | | | | | l+1 | | | | Spare | Spare | Spare | Spare | Spare | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | HPLMN | octet | | | | | | | | | 5G | ( | | | | | | | | | DDNMF | l+2)* | | | | | | | | | a | | | | | | | | | | ddress | octet | | | | | | | | | infor | m* | | | | | | | | | mation | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+
Figure 5.3.2.1: ProSeP Info = {UE policies for 5G ProSe direct discovery}
Table 5.3.2.1: ProSeP Info = {UE policies for 5G ProSe direct discovery}
+-------------------------+-------+-------+-------------------------+ | ProSeP info type (bit 1 | | | | | to 4 of octet k) shall | | | | | be set to \"0001\" (UE | | | | | policies for 5G ProSe | | | | | direct discovery) | | | | +=========================+=======+=======+=========================+ | Length of ProSeP info | | | | | contents (octets k+1 to | | | | | k+2) indicates the | | | | | length of ProSeP info | | | | | contents. | | | | +-------------------------+-------+-------+-------------------------+ | Validity timer (octet | | | | | k+3 to k+7): | | | | | | | | | | The validity timer | | | | | field provides the | | | | | expiration time of | | | | | validity of the UE | | | | | policies for 5G ProSe | | | | | direct discovery. The | | | | | validity timer field is | | | | | a binary coded | | | | | representation of a UTC | | | | | time, in seconds since | | | | | midnight UTC of January | | | | | 1, 1970 (not counting | | | | | leap seconds). | | | | +-------------------------+-------+-------+-------------------------+ | Served by NG-RAN (octet | | | | | k+8 to o1): | | | | | | | | | | The served by NG-RAN | | | | | field is coded | | | | | according to | | | | | figure 5.3.2.2 and | | | | | table 5.3.2.2, and | | | | | contains configuration | | | | | parameters for 5G ProSe | | | | | direct discovery when | | | | | the UE is served by | | | | | NG-RAN. | | | | +-------------------------+-------+-------+-------------------------+ | Not served by NG-RAN | | | | | (octet o1+1 to o2): | | | | | | | | | | The not served by | | | | | NG-RAN field is coded | | | | | according to | | | | | figure 5.3.2.6 and | | | | | table 5.3.2.6, and | | | | | contains configuration | | | | | parameters for 5G ProSe | | | | | direct discovery when | | | | | the UE is not served by | | | | | NG-RAN. | | | | +-------------------------+-------+-------+-------------------------+ | ProSe Direct Discovery | | | | | UE ID (octet o2+1 to | | | | | o2+3): | | | | | | | | | | The ProSe Direct | | | | | Discovery UE ID is a | | | | | 24-bit long bit string. | | | | +-------------------------+-------+-------+-------------------------+ | Group member discovery | | | | | parameters (octet o2+4 | | | | | to o3): | | | | | | | | | | The group member | | | | | discovery parameters | | | | | field is coded | | | | | according to | | | | | figure 5.3.2.12 and | | | | | table 5.3.2.12 and | | | | | contains group member | | | | | discovery parameters. | | | | +-------------------------+-------+-------+-------------------------+ | ProSe identifiers | | | | | (octet o3+1 to o4): | | | | | | | | | | The ProSe identifiers | | | | | field is coded | | | | | according to | | | | | figure 5.3.2.14 and | | | | | table 5.3.2.14 and | | | | | contains ProSe | | | | | identifiers. | | | | +-------------------------+-------+-------+-------------------------+ | ProSe identifier to | | | | | default destination | | | | | layer-2 ID for initial | | | | | discovery signalling | | | | | mapping rules (octet | | | | | o4+1 to o5) (NOTE 2): | | | | | | | | | | The ProSe identifier to | | | | | default destination | | | | | layer-2 ID for initial | | | | | discovery signalling | | | | | mapping rules field is | | | | | coded according to | | | | | figure 5.3.2.15 and | | | | | table 5.3.2.15 and | | | | | contains ProSe | | | | | identifier to default | | | | | destination layer-2 ID | | | | | for initial discovery | | | | | signalling mapping | | | | | rules. The ProSe | | | | | identifier to default | | | | | destination layer-2 ID | | | | | for initial discovery | | | | | signalling mapping | | | | | rules field may contain | | | | | a default ProSe | | | | | identifier to default | | | | | destination layer-2 ID | | | | | for initial discovery | | | | | signalling mapping rule | | | | | for the ProSe services | | | | | that do not have | | | | | dedicated mapping | | | | | rules. | | | | +-------------------------+-------+-------+-------------------------+ | | | | | +-------------------------+-------+-------+-------------------------+ | HPLMN 5G DDNMF address | | | | | information indicator | | | | | (H5DAI) (octet l+1 bit | | | | | 1 to bit 3): (NOTE) | | | | | | | | | | Bits | | | | +-------------------------+-------+-------+-------------------------+ | **3** | **2** | **1** | | +-------------------------+-------+-------+-------------------------+ | 0 | 0 | 0 | HPLMN 5G DDNMF address | | | | | information is absent | +-------------------------+-------+-------+-------------------------+ | 0 | 0 | 1 | HPLMN 5G DDNMF FQDN is | | | | | present | +-------------------------+-------+-------+-------------------------+ | 0 | 1 | 0 | HPLMN 5G DDNMF IPv4 | | | | | address is present | +-------------------------+-------+-------+-------------------------+ | 1 | 0 | 0 | HPLMN 5G DDNMF IPv6 | | | | | address is present | +-------------------------+-------+-------+-------------------------+ | 1 | 1 | 0 | HPLMN 5G DDNMF IPv4 | | | | | address and IPv6 | | | | | address are present | +-------------------------+-------+-------+-------------------------+ | All other values are | | | | | reserved. | | | | +-------------------------+-------+-------+-------------------------+ | | | | | +-------------------------+-------+-------+-------------------------+ | HLMN 5G DDNMF address | | | | | information (octet l+2 | | | | | to octet m) (NOTE 1): | | | | | | | | | | The HPLMN 5G DDNMF | | | | | address information | | | | | field is coded | | | | | according to | | | | | figure 5.3.2.17 and | | | | | table 5.3.2.17 and | | | | | contains the 5G DDNMF | | | | | address information in | | | | | HPLMN. | | | | | | | | | | If the length of ProSeP | | | | | info contents field is | | | | | bigger than indicated | | | | | in figure 5.3.2.1, | | | | | receiving entity shall | | | | | ignore any superfluous | | | | | octets located at the | | | | | end of the ProSeP info | | | | | contents. | | | | +-------------------------+-------+-------+-------------------------+
+-------------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========================================+=============+===+===+===+===+===+===+===+ | Length of served by NG-RAN contents | octet k+8 | | | | | | | | | | | | | | | | | | | | octet k+9 | | | | | | | | +-------------------------------------------+-------------+---+---+---+---+---+---+---+ | Authorization for direct discovery info 1 | octet k+10 | | | | | | | | | | | | | | | | | | | | octet o50 | | | | | | | | +-------------------------------------------+-------------+---+---+---+---+---+---+---+ | Authorization for direct discovery info 2 | octet o50+1 | | | | | | | | | | | | | | | | | | | | octet o51 | | | | | | | | +-------------------------------------------+-------------+---+---+---+---+---+---+---+ | ... | octet o51+1 | | | | | | | | | | | | | | | | | | | | octet o52 | | | | | | | | +-------------------------------------------+-------------+---+---+---+---+---+---+---+ | Authorization for direct discovery info n | octet o52+1 | | | | | | | | | | | | | | | | | | | | octet o1 | | | | | | | | +-------------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.3.2.2: Served by NG-RAN
Table 5.3.2.2: Served by NG-RAN
+----------------------------------------------------------------------+ | Authorization for direct discovery info: | | | | The authorization for direct discovery info field is coded according | | to figure 5.3.2.3 and table 5.3.2.3. | +======================================================================+ | | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+------+-------+-----+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+======+=======+=====+=======+ | L | octet | | | | | | | | | ength | o50+1 | | | | | | | | | of | | | | | | | | | | aut | octet | | | | | | | | | horiz | o50+2 | | | | | | | | | ation | | | | | | | | | | for | | | | | | | | | | d | | | | | | | | | | irect | | | | | | | | | | disc | | | | | | | | | | overy | | | | | | | | | | info | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-----+-------+ | 0 | 0 | 0 | 0 | 0 | Role | Model | DDT | octet | | | | | | | | | | o50+3 | | spare | spare | spare | spare | spare | | | | | +-------+-------+-------+-------+-------+------+-------+-----+-------+ | Autho | octet | | | | | | | | | rized | o50+4 | | | | | | | | | PLMN | | | | | | | | | | info | octet | | | | | | | | | | o51 | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-----+-------+
Figure 5.3.2.3: Authorization for direct discovery info
Table 5.3.2.3: Authorization for direct discovery info
+----------------------------------------------------------------------+ | Direct discovery type (DDT) (octet o50+3 bit 1): | | | | Bit | | | | **1** | | | | 0 Open | | | | 1 Restricted | +======================================================================+ | Model (octet o50+3 bit 2): | | | | Bit | | | | **2** | | | | 0 A | | | | 1 B | +----------------------------------------------------------------------+ | If Model bit is set to \"A\", | | | | Role (octet o50+3 bit 3): | | | | Bit | | | | **3** | | | | 0 Announcing | | | | 1 Monitoring | +----------------------------------------------------------------------+ | If Model bit is set to \"B\", | | | | Role (octet o50+3 bit 3): | | | | Bit | | | | **3** | | | | 0 Discoverer | | | | 1 Discoveree | +----------------------------------------------------------------------+ | Authorized PLMN info (octet o50+4 to o51): | | | | The authorized PLMN info field is coded according to figure 5.3.2.4 | | and table 5.3.2.4. | +----------------------------------------------------------------------+ | If the length of authorization for direct discovery info field is | | bigger than indicated in figure 5.3.2.3, receiving entity shall | | ignore any superfluous octets located at the end of the | | authorization for direct discovery info. | +----------------------------------------------------------------------+
+-----------------------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=========================================+==================+===+===+===+===+===+===+===+ | Length of authorized PLMN info contents | octet o50+4 | | | | | | | | | | | | | | | | | | | | octet o50+5 | | | | | | | | +-----------------------------------------+------------------+---+---+---+---+---+---+---+ | Authorized PLMN 1 | octet (o50+6)* | | | | | | | | | | | | | | | | | | | | octet (o50+8)* | | | | | | | | +-----------------------------------------+------------------+---+---+---+---+---+---+---+ | Authorized PLMN 2 | octet (o50+9)* | | | | | | | | | | | | | | | | | | | | octet (o50+11)* | | | | | | | | +-----------------------------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o50+12)* | | | | | | | | | | | | | | | | | | | | octet o150* | | | | | | | | +-----------------------------------------+------------------+---+---+---+---+---+---+---+ | Authorized PLMN n | octet (o150+1)* | | | | | | | | | | | | | | | | | | | | octet o51* | | | | | | | | +-----------------------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.3.2.4: Authorized PLMN info
Table 5.3.2.4: Authorized PLMN
+----------------------------------------------------------------------+ | Authorized PLMN: | | | | The authorized PLMN field is coded according to figure 5.3.2.5 and | | table 5.3.2.5. | +----------------------------------------------------------------------+
8 7 6 5 4 3 2 1
* * *
MCC digit 2 MCC digit 1 octet o50+6  
MNC digit 3 MCC digit 3 octet o50+7  
MNC digit 2 MNC digit 1 octet o50+8
Figure 5.3.2.5: PLMN ID
Table 5.3.2.5: PLMN ID
+----------------------------------------------------------------------+ | Mobile country code (MCC) (octet o50+5, octet o50+6 bit 1 to 4): | | | | The MCC field is coded as in ITU-T Recommendation E.212 [5], | | annex A. | +======================================================================+ | Mobile network code (MNC) (octet o50+6 bit 5 to 8, octet o50+7): | | | | The coding of MNC field is the responsibility of each administration | | but BCD coding shall be used. The MNC shall consist of 2 or 3 | | digits. If a network operator decides to use only two digits in the | | MNC, MNC digit 3 shall be coded as \"1111\". | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o1+1 | | | | | | | | | of | | | | | | | | | | not | octet | | | | | | | | | s | o1+2 | | | | | | | | | erved | | | | | | | | | | by | | | | | | | | | | N | | | | | | | | | | G-RAN | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | 0 | 0 | 0 | 0 | 0 | 0 | PDNNI | octet | | | | | | | | | | o1+3 | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | NR | octet | | | | | | | | | radio | (o1 | | | | | | | | | param | +4)* | | | | | | | | | eters | | | | | | | | | | per | octet | | | | | | | | | ge | o10* | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | list | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | De | octet | | | | | | | | | fault | (o10 | | | | | | | | | PC5 | +1)* | | | | | | | | | DRX | | | | | | | | | | con | octet | | | | | | | | | figur | o2* | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 5.3.2.6: Not served by NG-RAN
Table 5.3.2.6: Not served by NG-RAN
+----------------------------------------------------------------------+ | 5G ProSe direct discovery when not served by NG-RAN indicator | | (PDNNI) (octet o1+3 bit 1): | | | | The PDNNI bit indicates whether the UE is authorized to perform 5G | | ProSe direct discovery when not served by NG-RAN. | | | | Bit | | | | **1** | | | | 0 Not authorized | | | | 1 Authorized | +======================================================================+ | NR radio parameters per geographical area list (octet o1+4 to o2): | | | | If PNNI bit is set to \"Authorized\", the NR radio parameters per | | geographical area list field is present otherwise the NR radio | | parameters per geographical area list field is absent. It is coded | | according to figure 5.3.2.7 and table 5.3.2.7. | | | | Default PC5 DRX configuration (octet o10+1 to o2): | | | | If PDNNI bit is set to \"Authorized\", the default PC5 DRX | | configuration is present otherwise the default PC5 DRX configuration | | is absent. It is coded according to figure 5.3.2.11a and table | | 5.3.2.11a. | +----------------------------------------------------------------------+ | If the length of not served by NG-RAN contents field is bigger than | | indicated in figure 5.3.2.6, receiving entity shall ignore any | | superfluous octets located at the end of the not served by NG-RAN | | contents. | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of radio | octet o1+4 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o1+5 | | | | | | | | | list contents | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o1+6)* | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o6* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o6+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o7* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | ... | octet (o7+1)* | | | | | | | | | | | | | | | | | | | | octet o8* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o8+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o10* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.3.2.7: Radio parameters per geographical area list
Table 5.3.2.7: Radio parameters per geographical area list
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.3.2.8 and table 5.3.2.8. | +======================================================================+ | | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o6+1 | | | | | | | | | of | | | | | | | | | | radio | octet | | | | | | | | | param | o6+2 | | | | | | | | | eters | | | | | | | | | | per | | | | | | | | | | ge | | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ge | octet | | | | | | | | | ograp | o6+3 | | | | | | | | | hical | | | | | | | | | | area | octet | | | | | | | | | | o9 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Radio | octet | | | | | | | | | param | o9+1 | | | | | | | | | eters | | | | | | | | | | | octet | | | | | | | | | | o7-1 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MI | 0 | 0 | 0 | 0 | 0 | 0 | 0 | octet | | | | | | | | | | o7 | | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 5.3.2.8: Radio parameters per geographical area info
Table 5.3.2.8: Radio parameters per geographical area info
+----------------------------------------------------------------------+ | Geographical area (octet o6+3 to o9): | | | | The geographical area field is coded according to figure 5.3.2.9 and | | table 5.3.2.9. | +======================================================================+ | Radio parameters (octet o9 to o7-1): | | | | The radio parameters field is coded according to figure 5.3.2.11 and | | table 5.3.2.11, applicable in the geographical area indicated by the | | geographical area field when not served by NG-RAN. | +----------------------------------------------------------------------+ | Managed indicator (MI) (octet o7 bit 8): | | | | The managed indicator indicates how the radio parameters indicated | | in the radio parameters field in the geographical area indicated by | | the geographical area field are managed. | | | | Bit | | | | **8** | | | | 0 Non-operator managed | | | | 1 Operator managed | +----------------------------------------------------------------------+ | If the length of radio parameters per geographical area contents | | field is bigger than indicated in figure 5.3.2.8, receiving entity | | shall ignore any superfluous octets located at the end of the radio | | parameters per geographical area contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet o6+3 | | | | | | | | | geographical area | | | | | | | | | | contents | octet o6+4 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 1 | octet (o6+5)* | | | | | | | | | | | | | | | | | | | | octet (o6+10)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 2 | octet (o6+11)* | | | | | | | | | | | | | | | | | | | | octet (o6+16)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (o6+17)* | | | | | | | | | | | | | | | | | | | | octet (o6-2+6*n)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate n | octet (o6-1+6*n)* | | | | | | | | | | | | | | | | | | | | octet (o6+4+6*n)* | | | | | | | | | | = octet o9* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.3.2.9: Geographical area
Table 5.3.2.9: Geographical area
+----------------------------------------------------------------------+ | Coordinate: | | | | The coordinate field is coded according to figure 5.3.2.10 and | | table 5.3.2.10. | +----------------------------------------------------------------------+
+-----------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========+=============+===+===+===+===+===+===+===+ | Latitude | octet o6+11 | | | | | | | | | | | | | | | | | | | | octet o6+13 | | | | | | | | +-----------+-------------+---+---+---+---+---+---+---+ | Longitude | octet o6+14 | | | | | | | | | | | | | | | | | | | | octet o6+17 | | | | | | | | +-----------+-------------+---+---+---+---+---+---+---+
Figure 5.3.2.10: Coordinate area
Table 5.3.2.10: Coordinate area
+----------------------------------------------------------------------+ | Latitude: | | | | The latitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +======================================================================+ | Longitude: | | | | The longitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +----------------------------------------------------------------------+
+-------------------------------------+------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+============+===+===+===+===+===+===+===+ | Length of radio parameters contents | octet o9+1 | | | | | | | | | | | | | | | | | | | | octet o9+2 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+ | Radio parameters contents | octet o9+3 | | | | | | | | | | | | | | | | | | | | octet o7-1 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+
Figure 5.3.2.11: Radio parameters
Table 5.3.2.11: Radio parameters
+----------------------------------------------------------------------+ | Radio parameters contents: | | | | Radio parameters are defined as _SL-PreconfigurationNR_ in | | clause 9.3 of 3GPP TS 38.331 [7]. | +======================================================================+ | | +----------------------------------------------------------------------+
+--------------------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==================================================+=============+===+===+===+===+===+===+===+ | Length of default PC5 DRX configuration contents | octet o10+1 | | | | | | | | | | | | | | | | | | | | octet o10+2 | | | | | | | | +--------------------------------------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX configuration contents | octet o10+3 | | | | | | | | | | | | | | | | | | | | octet o2 | | | | | | | | +--------------------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.3.2.11a: Default PC5 DRX configuration
Table 5.3.2.11a: Default PC5 DRX configuration
+----------------------------------------------------------------------+ | Default PC5 DRX configuration contents: | | | | The default PC5 DRX configuration field is coded as | | _sl-DefaultDRX-GC-BC-r17_ in clause 6.3.5 of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+
+-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=========================================+=================+===+===+===+===+===+===+===+ | Length of groupcast parameters contents | octet o2+4 | | | | | | | | | | | | | | | | | | | | octet o2+5 | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info 1 | octet (o2+6)* | | | | | | | | | | | | | | | | | | | | octet o51* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info 2 | octet (o51+1)* | | | | | | | | | | | | | | | | | | | | octet o52* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o52+1)* | | | | | | | | | | | | | | | | | | | | octet o53* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info n | octet (o53+1)* | | | | | | | | | | | | | | | | | | | | octet o3* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.3.2.12: Groupcast parameters
Table 5.3.2.12: Groupcast parameters
+----------------------------------------------------------------------+ | Application layer group info: | | | | The application layer group info field is coded according to | | figure 5.3.2.13 and table 5.3.2.13. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet o51+1 | | | | | | | | | application layer | | | | | | | | | | group info contents | octet o51+2 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Application layer | octet o51+3 | | | | | | | | | group identifier | | | | | | | | | | | octet o151 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ProSe layer-2 group | octet o151+1 | | | | | | | | | identifier | | | | | | | | | | | octet o151+3 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | User info ID | octet o151+4 | | | | | | | | | | | | | | | | | | | | octet (o151+9) = | | | | | | | | | | octet o52 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.3.2.13: Application layer group info
Table 5.3.2.13: Application layer group info
+----------------------------------------------------------------------+ | Application layer group identifier (octet o51+3 to o151): | | | | The first octet of application layer group identifier field is the | | length of application group identifier. The value of application | | group identifier field is a bit string. The format of application | | group identifier parameter is out of scope of this specification. | +======================================================================+ | ProSe layer-2 group identifier (octet o151+1 to o151+3) | +----------------------------------------------------------------------+ | The ProSe layer-2 group identifier field is a binary coded layer-2 | | identifier. | +----------------------------------------------------------------------+ | User info ID (octet o151+4 to o52) | +----------------------------------------------------------------------+ | The value of the User info ID parameter is a 48-bit long bit string. | | The format of the User info ID parameter is out of scope of this | | specification. | +----------------------------------------------------------------------+ | If the length of application layer group info contents field is | | bigger than indicated in figure 5.3.2.13, receiving entity shall | | ignore any superfluous octets located at the end of the application | | layer group info contents. | +----------------------------------------------------------------------+
+--------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +======================================+=================+===+===+===+===+===+===+===+ | Length of ProSe identifiers contents | octet o3+1 | | | | | | | | | | | | | | | | | | | | octet o3+2 | | | | | | | | +--------------------------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier 1 | octet (o3+3)* | | | | | | | | | | | | | | | | | | | | octet o31* | | | | | | | | +--------------------------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier 2 | octet (o31+1)* | | | | | | | | | | | | | | | | | | | | octet o32* | | | | | | | | +--------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o32+1)* | | | | | | | | | | | | | | | | | | | | octet o33* | | | | | | | | +--------------------------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier n | octet (o33+1)* | | | | | | | | | | | | | | | | | | | | octet o34* | | | | | | | | | | | | | | | | | | | | = octet o4* | | | | | | | | +--------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.3.2.14: ProSe identifiers
Table 5.3.2.14: ProSe identifiers
+----------------------------------------------------------------------+ | ProSe identifier (NOTE 1, NOTE 2): | | | | The ProSe identifier field contains a sequence of a sixteen octet OS | | Id field, a one octet OS App Id length field, and an OS App Id | | field. The OS Id field shall be transmitted first. The OS Id field | | contains a Universally Unique IDentifier (UUID) as specified in | | IETF RFC 4122 [12]. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o4+1 | | | | | | | | | identifier to | | | | | | | | | | default destination | octet o4+2 | | | | | | | | | layer-2 ID for | | | | | | | | | | initial discovery | | | | | | | | | | signalling mapping | | | | | | | | | | rules contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o4+3)* | | | | | | | | | default destination | | | | | | | | | | layer-2 ID for | octet o54* | | | | | | | | | initial discovery | | | | | | | | | | signalling mapping | | | | | | | | | | rule 1 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o54+1)* | | | | | | | | | default destination | | | | | | | | | | layer-2 ID for | octet o55* | | | | | | | | | initial discovery | | | | | | | | | | signalling mapping | | | | | | | | | | rule 2 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o55+1)* | | | | | | | | | | | | | | | | | | | | octet o56* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o56+1)* | | | | | | | | | default destination | | | | | | | | | | layer-2 ID for | octet l* | | | | | | | | | initial discovery | | | | | | | | | | signalling mapping | | | | | | | | | | rule n | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.3.2.15: ProSe identifier to default destination layer-2 ID for
initial discovery signalling mapping rules
Table 5.3.2.15: ProSe identifier to default destination layer-2 ID for initial
discovery signalling mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for initial discovery | | signalling mapping rule: | | | | The ProSe identifier to destination layer-2 ID for initial discovery | | signalling mapping rule field is coded according to figure 5.3.2.16 | | and table 5.3.2.16. | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of ProSe | octet o54+1 | | | | | | | | | identifier to | | | | | | | | | | default destination | octet o54+2 | | | | | | | | | layer-2 ID for | | | | | | | | | | initial discovery | | | | | | | | | | signalling mapping | | | | | | | | | | rule contents | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o54+3 | | | | | | | | | | | | | | | | | | | | octet o154 | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Destination layer-2 | octet o154+1 | | | | | | | | | ID for initial | | | | | | | | | | discovery | octet (o154+3) | | | | | | | | | signalling | | | | | | | | | | | = octet o55 | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.3.2.16: ProSe identifier to default destination layer-2 ID for
initial discovery signalling mapping rule
Table 5.3.2.16: ProSe identifier to default destination layer-2 ID for initial
discovery signalling mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o54+3 to o154): | | | | The ProSe identifiers field is coded according to figure 5.3.2.14 | | and table 5.3.2.14. In case of the default ProSe identifier to | | default destination layer-2 ID for initial discovery signalling | | mapping rule, the ProSe identifier is coded as the default ProSe | | identifier (see table 5.4.2.14). | +======================================================================+ | Destination layer-2 ID for initial discovery signalling (octet | | o154+1 to o55): | | | | The destination layer-2 ID for initial discovery signalling field is | | a binary coded layer-2 identifier. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to default destination layer-2 ID | | for initial discovery signalling mapping rule contents field is | | bigger than indicated in figure 5.3.2.16, receiving entity shall | | ignore any superfluous octets located at the end of the ProSe | | identifier to default destination layer-2 ID for initial discovery | | signalling mapping rule contents. | +----------------------------------------------------------------------+
+-------------------------------------------------------+-----------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +-------------------------------------------------------+-----------+---+---+---+---+---+---+---+ | Length of HPLMN 5G DDNMF address information contents | octet l+2 | | | | | | | | +-------------------------------------------------------+-----------+---+---+---+---+---+---+---+ | HPLMN 5G DDNMF address informationcontents | octet l+3 | | | | | | | | | | | | | | | | | | | | octet m | | | | | | | | +-------------------------------------------------------+-----------+---+---+---+---+---+---+---+
Figure 5.3.2.17: HPLMN 5G DDNMF address information
Table 5.3.2.17: HPLMN 5G DDNMF address information
+----------------------------------------------------------------------+ | Length of HPLMN 5G DDNMF address information (octet l+2): | | | | When the H5DAI is set to \"HPLMN 5G DDNMF FQDN is present\", the | | value of the length is the length of the HPLMN 5G DDNMF FQDN. | | | | When the H5DAI is set to \"HPLMN 5G DDNMF IPv4 address is present\", | | the value of the length is 4. | | | | When the H5DAI is set to \"HPLMN 5G DDNMF IPv6 address is present\", | | the value of the length is 16. | | | | When the H5DAI is set to \"HPLMN 5G DDNMF IPv4 address and IPv6 | | address are present\", the value of the length is 20. | | | | HPLMN 5G DDNMF address informationcontents (octet l+3 to octet m): | | | | When the H5DAI is set to \"HPLMN 5G DDNMF FQDN is present\", HPLMN | | 5G DDNMF address information filed contains the HPLMN 5G DDNMF FQDN | | and shall be coded as defined in clause 19.4.2.1 in | | 3GPP TS 23.003 [10]. | | | | When the H5DAI is to \"HPLMN 5G DDNMF IPv4 address is present\", | | HPLMN 5G DDNMF address information filed contains an IPv4 address in | | 4 octets. | | | | When the H5DAI is set to \"HPLMN 5G DDNMF IPv6 address is present\", | | HPLMN 5G DDNMF address information filed contains an IPv6 address in | | 16 octets. | | | | When the H5DAI is set to \"HPLMN 5G DDNMF IPv4 address and IPv6 | | address are present\", HPLMN 5G DDNMF address information filed | | contains a sequence of an IPv4 address in 4 octets and an IPv6 | | address in 16 octets. | +----------------------------------------------------------------------+
## 5.4 Encoding of UE policies for 5G ProSe direct communications
### 5.4.1 General
The UE policies for 5G ProSe direct communication are coded as shown in
figures 5.4.1.1 and table 5.4.1.1.
### 5.4.2 Information elements coding
+------------+------------+---+---+------------+---------+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +============+============+===+===+============+=========+===+===+===+ | 0 | 0 | 0 | 0 | ProSeP | octet k | | | | | | | | | info type | | | | | | | | | | = {UE | | | | | | | | | | policies | | | | | | | | | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | direct | | | | | | | | | | comm | | | | | | | | | | unication} | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Spare | | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Length of | octet k+1 | | | | | | | | | ProSeP | | | | | | | | | | info | octet k+2 | | | | | | | | | contents | | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Validity | octet k+3 | | | | | | | | | timer | | | | | | | | | | | octet k+7 | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Served by | octet k+8 | | | | | | | | | NG-RAN | | | | | | | | | | | octet o1 | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Not served | octet o1+1 | | | | | | | | | by NG-RAN | | | | | | | | | | | octet o2 | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | Privacy | octet o2+1 | | | | | | | | | config | | | | | | | | | | | octet o4 | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | 5G ProSe | octet o4+1 | | | | | | | | | direct | | | | | | | | | | com | octet o5 | | | | | | | | | munication | | | | | | | | | | in NR-PC5 | | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | ProSe | octet o5+1 | | | | | | | | | a | | | | | | | | | | pplication | octet o10 | | | | | | | | | to path | | | | | | | | | | preference | | | | | | | | | | mapping | | | | | | | | | | rules | | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+ | ProSe | octet | | | | | | | | | i | o10+1 | | | | | | | | | dentifiers | | | | | | | | | | to NR Tx | octet l | | | | | | | | | profile | | | | | | | | | | for | | | | | | | | | | broadcast | | | | | | | | | | and | | | | | | | | | | groupcast | | | | | | | | | | mapping | | | | | | | | | | rules | | | | | | | | | +------------+------------+---+---+------------+---------+---+---+---+
Figure 5.4.2.1: ProSeP Info = {UE policies for 5G ProSe direct communication}
Table 5.4.2.1: ProSeP Info = {UE policies for 5G ProSe direct communication}
+----------------------------------------------------------------------+ | ProSeP info type (bit 1 to 4 of octet k) shall be set to \"0010\" | | (UE policies for 5G ProSe direct communication) | +======================================================================+ | Length of ProSeP info contents (octets k+1 to k+2) indicates the | | length of ProSeP info contents. | +----------------------------------------------------------------------+ | Validity timer (octet k+3 to k+7): | | | | The validity timer field provides the expiration time of validity of | | the UE policies for 5G ProSe direct communication. The validity | | timer field is a binary coded representation of a UTC time, in | | seconds since midnight UTC of January 1, 1970 (not counting leap | | seconds). | +----------------------------------------------------------------------+ | Served by NG-RAN (octet k+8 to o1): | | | | The served by NG-RAN field is coded according to figure 5.4.2.2 and | | table 5.4.2.2, and contains configuration parameters for 5G ProSe | | direct communication when the UE is served by NG-RAN. | +----------------------------------------------------------------------+ | Not served by NG-RAN (octet o1+1 to o2): | | | | The not served by NG-RAN field is coded according to figure 5.4.2.5 | | and table 5.4.2.5, and contains configuration parameters for 5G | | ProSe direct communication when the UE is not served by NG-RAN. | +----------------------------------------------------------------------+ | Privacy config (octet o2+1 to o4): | | | | The privacy config field is coded according to figure 5.4.2.11 and | | table 5.4.2.11, and contains configuration parameters for privacy | | configuration. | +----------------------------------------------------------------------+ | 5G ProSe direct communication in NR-PC5 (octet o4+1 to o5): | | | | The 5G ProSe direct communication in NR-PC5 field is coded according | | to figure 5.4.2.16 and table 5.4.2.16, and contains configuration | | parameters for 5G ProSe direct communication in NR-PC5. | +----------------------------------------------------------------------+ | ProSe application to path preference mapping rules (octet o5+1 to | | o10): | | | | The ProSe application to path preference mapping rules field is | | coded according to figure 5.4.2.41 and table 5.4.2.41, and contains | | configuration parameters for ProSe application to path preference | | mapping rules. | +----------------------------------------------------------------------+ | ProSe identifiers to NR Tx profile for broadcast and groupcast | | mapping rules (octet o10+1 to l) (NOTE): | | | | The ProSe identifiers to NR Tx profiles for broadcast and groupcast | | mapping rules field is coded according to figure 5.4.2.43 and table | | 5.4.2.43, and contains configuration parameters for ProSe | | identifiers to NR Tx profile for broadcast and groupcast mapping | | rules. The ProSe identifiers to NR Tx profile for broadcast and | | groupcast mapping rules field may contain a default ProSe identifier | | to NR Tx profile for broadcast and groupcast mapping rule for the | | ProSe services that do not have dedicated mapping rules. | +----------------------------------------------------------------------+ | If the length of ProSeP info contents field is bigger than indicated | | in figure 5.4.2.1, receiving entity shall ignore any superfluous | | octets located at the end of the ProSeP info contents. | | | | NOTE: This field is prioritized in decreasing order according to the | | local configuration of the network. The default mapping rule for the | | ProSe services that do not have dedicated mapping rules, if present, | | is recommended to be the last one and with the lowest priority of | | this field. | +----------------------------------------------------------------------+
+-------------------------------------+------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+============+===+===+===+===+===+===+===+ | Length of served by NG-RAN contents | octet k+8 | | | | | | | | | | | | | | | | | | | | octet k+9 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+ | Authorized PLMN | octet k+10 | | | | | | | | | | | | | | | | | | | | octet o1 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+
Figure 5.4.2.2: Served by NG-RAN
Table 5.4.2.2: Served by NG-RAN
+----------------------------------------------------------------------+ | Authorized PLMN (octet k+10 to o1): | | | | The authorized PLMN field is coded according to figure 5.4.2.3 and | | table 5.4.2.3. | +======================================================================+ | If the length of served by NG-RAN contents field is bigger than | | indicated in figure 5.4.2.2, receiving entity shall ignore any | | superfluous octets located at the end of the served by NG-RAN | | contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet k+10 | | | | | | | | | authorized PLMN | | | | | | | | | | contents | octet k+11 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | PLMN ID 1 | octet (k+12)* | | | | | | | | | | | | | | | | | | | | octet (k+14)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | PLMN ID 2 | octet (k+15)* | | | | | | | | | | | | | | | | | | | | octet (k+17)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (k+18)* | | | | | | | | | | | | | | | | | | | | octet (k+8+n*3)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | PLMN ID n | octet (k+9+n*3)* | | | | | | | | | | | | | | | | | | | | octet (k+11+n*3)* | | | | | | | | | | = octet o1* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.4.2.3: Authorized PLMN
Table 5.4.2.3: Authorized PLMN
+----------------------------------------------------------------------+ | PLMN ID: | | | | The PLMN ID field is coded according to figure 5.4.2.4 and | | table 5.4.2.4. | +----------------------------------------------------------------------+
8 7 6 5 4 3 2 1
* * *
MCC digit 2 MCC digit 1 octet k+15  
MNC digit 3 MCC digit 3 octet k+16  
MNC digit 2 MNC digit 1 octet k+17
Figure 5.4.2.4: PLMN ID
Table 5.4.2.4: PLMN ID
+----------------------------------------------------------------------+ | Mobile country code (MCC) (octet k+15, octet k+16 bit 1 to 4): | | | | The MCC field is coded as in ITU-T Recommendation E.212 [5], | | annex A. | +======================================================================+ | Mobile network code (MNC) (octet k+16 bit 5 to 8, octet k+17): | | | | The coding of MNC field is the responsibility of each administration | | but BCD coding shall be used. The MNC shall consist of 2 or 3 | | digits. If a network operator decides to use only two digits in the | | MNC, MNC digit 3 shall be coded as \"1111\". | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+======+=======+ | L | octet | | | | | | | | | ength | o1+1 | | | | | | | | | of | | | | | | | | | | not | octet | | | | | | | | | s | o1+2 | | | | | | | | | erved | | | | | | | | | | by | | | | | | | | | | N | | | | | | | | | | G-RAN | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+ | 0 | 0 | 0 | 0 | 0 | 0 | 0 | PNNI | octet | | | | | | | | | | o1+3 | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+ | NR | octet | | | | | | | | | radio | (o1 | | | | | | | | | param | +4)* | | | | | | | | | eters | | | | | | | | | | per | octet | | | | | | | | | ge | o16* | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | list | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+ | PC5 | octet | | | | | | | | | DRX | (o16 | | | | | | | | | con | +1)* | | | | | | | | | figur | | | | | | | | | | ation | octet | | | | | | | | | for | o2* | | | | | | | | | broad | | | | | | | | | | cast, | | | | | | | | | | grou | | | | | | | | | | pcast | | | | | | | | | | and | | | | | | | | | | in | | | | | | | | | | itial | | | | | | | | | | signa | | | | | | | | | | lling | | | | | | | | | | of 5G | | | | | | | | | | ProSe | | | | | | | | | | d | | | | | | | | | | irect | | | | | | | | | | link | | | | | | | | | | est | | | | | | | | | | ablis | | | | | | | | | | hment | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+
Figure 5.4.2.5: Not served by NG-RAN
Table 5.4.2.5: Not served by NG-RAN
+----------------------------------------------------------------------+ | 5G ProSe direct communication when not served by NG-RAN indicator | | (PNNI) (octet o1+3 bit 1): | | | | The PNNI bit indicates whether the UE is authorized to use 5G ProSe | | direct communication when not served by NG-RAN. | | | | Bit | | | | **1** | | | | 0 Not authorized | | | | 1 Authorized | +======================================================================+ | NR radio parameters per geographical area list (octet o1+4 to o16): | | | | If PNNI bit is set to \"Authorized\", the NR radio parameters per | | geographical area list field is present otherwise the NR radio | | parameters per geographical area list field is absent. It is coded | | according to figure 5.4.2.6 and table 5.4.2.6. | +----------------------------------------------------------------------+ | PC5 DRX configuration for broadcast,groupcast and initial signalling | | of 5G ProSe direct link establishment (octet o16+1 to o2): | | | | If PNNI bit is set to \"Authorized\", the PC5 DRX configuration for | | broadcast, groupcast and initial signalling of 5G ProSe direct link | | establishment field is present otherwise the PC5 DRX configuration | | for broadcast, groupcast and initial signalling of 5G ProSe direct | | link establishment field is absent. It is coded according to | | figure 5.4.2.10a and table 5.4.2.10a. | +----------------------------------------------------------------------+ | If the length of not served by NG-RAN contents field is bigger than | | indicated in figure 5.4.2.5, receiving entity shall ignore any | | superfluous octets located at the end of the not served by NG-RAN | | contents. | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of radio | octet o1+4 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o1+5 | | | | | | | | | list contents | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o1+6)* | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o6* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o6+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o7* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | ... | octet (o7+1)* | | | | | | | | | | | | | | | | | | | | octet o8* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o8+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o16* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.4.2.6: Radio parameters per geographical area list
Table 5.4.2.6: Radio parameters per geographical area list
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.4.2.7 and table 5.4.2.7. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o6+1 | | | | | | | | | of | | | | | | | | | | radio | octet | | | | | | | | | param | o6+2 | | | | | | | | | eters | | | | | | | | | | per | | | | | | | | | | ge | | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ge | octet | | | | | | | | | ograp | o6+3 | | | | | | | | | hical | | | | | | | | | | area | octet | | | | | | | | | | o9 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Radio | octet | | | | | | | | | param | o9+1 | | | | | | | | | eters | | | | | | | | | | | octet | | | | | | | | | | o7-1 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MI | 0 | 0 | 0 | 0 | 0 | 0 | 0 | octet | | | | | | | | | | o7 | | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 5.4.2.7: Radio parameters per geographical area info
Table 5.4.2.7: Radio parameters per geographical area info
+----------------------------------------------------------------------+ | Geographical area (octet o6+3 to o9): | | | | The geographical area field is coded according to figure 5.4.2.8 and | | table 5.4.2.8. | +======================================================================+ | Radio parameters (octet o9 to o7-1): | | | | The radio parameters field is coded according to figure 5.4.2.10 and | | table 5.4.2.10, applicable in the geographical area indicated by the | | geographical area field when not served by NG-RAN. | +----------------------------------------------------------------------+ | Managed indicator (MI) (octet o7 bit 8): | | | | The managed indicator indicates how the radio parameters indicated | | in the radio parameters field in the geographical area indicated by | | the geographical area field are managed. | | | | Bit | | | | **8** | | | | 0 Non-operator managed | | | | 1 Operator managed | +----------------------------------------------------------------------+ | If the length of radio parameters per geographical area contents | | field is bigger than indicated in figure 5.4.2.7, receiving entity | | shall ignore any superfluous octets located at the end of the radio | | parameters per geographical area contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet o6+3 | | | | | | | | | geographical area | | | | | | | | | | contents | octet o6+4 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 1 | octet (o6+5)* | | | | | | | | | | | | | | | | | | | | octet (o6+10)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 2 | octet (o6+11)* | | | | | | | | | | | | | | | | | | | | octet (o6+16)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (o6+17)* | | | | | | | | | | | | | | | | | | | | octet (o6-2+6*n)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate n | octet (o6-1+6*n)* | | | | | | | | | | | | | | | | | | | | octet (o6+4+6*n)* | | | | | | | | | | = octet o9* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.4.2.8: Geographical area
Table 5.4.2.8: Geographical area
+----------------------------------------------------------------------+ | Coordinate: | | | | The coordinate field is coded according to figure 5.4.2.9 and | | table 5.4.2.9. | +----------------------------------------------------------------------+
+-----------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========+=============+===+===+===+===+===+===+===+ | Latitude | octet o6+11 | | | | | | | | | | | | | | | | | | | | octet o6+13 | | | | | | | | +-----------+-------------+---+---+---+---+---+---+---+ | Longitude | octet o6+14 | | | | | | | | | | | | | | | | | | | | octet o6+17 | | | | | | | | +-----------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.9: Coordinate area
Table 5.4.2.9: Coordinate area
+----------------------------------------------------------------------+ | Latitude: | | | | The latitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +======================================================================+ | Longitude: | | | | The longitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +----------------------------------------------------------------------+
+-------------------------------------+------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+============+===+===+===+===+===+===+===+ | Length of radio parameters contents | octet o9+1 | | | | | | | | | | | | | | | | | | | | octet o9+2 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+ | Radio parameters contents | octet o9+3 | | | | | | | | | | | | | | | | | | | | octet o7-1 | | | | | | | | +-------------------------------------+------------+---+---+---+---+---+---+---+
Figure 5.4.2.10: Radio parameters
Table 5.4.2.10: Radio parameters
+----------------------------------------------------------------------+ | Radio parameters contents: | | | | Radio parameters are defined as _SL-PreconfigurationNR_ in | | clause 9.3 of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of PC5 DRX | octet o16+1 | | | | | | | | | configuration for | | | | | | | | | | broadcast, | octet o16+2 | | | | | | | | | groupcast and | | | | | | | | | | initial signalling | | | | | | | | | | of 5G ProSe direct | | | | | | | | | | link establishment | | | | | | | | | | contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | PC5 QoS profile to | octet o16+3 | | | | | | | | | PC5 DRX cycle | | | | | | | | | | mapping rules | octet o17 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX | octet o17+1 | | | | | | | | | configuration | | | | | | | | | | | octet o2 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.10a: PC5 DRX configuration for broadcast, groupcast and initial
signalling of 5G ProSe direct link establishment
Table 5.4.2.10a: PC5 DRX configuration for broadcast, groupcast and initial
signalling of 5G ProSe direct link establishment
+----------------------------------------------------------------------+ | PC5 QoS profile to PC5 DRX cycle mapping rules: | | | | The PC5 QoS profile to PC5 DRX cycle mapping rules field is coded | | according to figure 5.4.2.10b and table 5.4.2.10b. | +======================================================================+ | | +----------------------------------------------------------------------+ | Default PC5 DRX configuration: | | | | The default PC5 DRX configuration field is coded accoding to | | figure 5.3.2.11a and table 5.3.2.11a. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | If the length of PC5 DRX configuration for broadcast, groupcast and | | initial signalling of 5G ProSe direct link establishment contents | | field indicates a length bigger than indicated in figure 5.4.2.5, | | receiving entity shall ignore any superfluous octets located at the | | end of the PC5 DRX configuration for broadcast, groupcast and | | initial signalling of 5G ProSe direct link establishment contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of PC5 QoS | octet o16+3 | | | | | | | | | profile to PC5 DRX | | | | | | | | | | cycle mapping rules | octet o16+4 | | | | | | | | | contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | PC5 QoS profile to | octet (o16+5)* | | | | | | | | | PC5 DRX cycle | | | | | | | | | | mapping rule 1 | octet o160* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | PC5 QoS profile to | octet (o160+1)* | | | | | | | | | PC5 DRX cycle | | | | | | | | | | mapping rule 2 | octet o161* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o161+1)* | | | | | | | | | | | | | | | | | | | | octet o162* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | PC5 QoS profile to | octet (o162+1)* | | | | | | | | | PC5 DRX cycle | | | | | | | | | | mapping rule n | octet o17* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.10b: PC5 QoS profile to PC5 DRX cycle mapping rules
Table 5.4.2.10b: PC5 QoS profile to PC5 DRX cycle mapping rules
+----------------------------------------------------------------------+ | PC5 QoS profile to PC5 DRX cycle mapping rule: | | | | The PC5 QoS profile to PC5 DRX cycle mapping rule field is coded | | according to figure 5.4.2.10c and table 5.4.2.10c. | +----------------------------------------------------------------------+
+---------------------+--------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+====================+===+===+===+===+===+===+===+ | Length of PC5 QoS | octet o160+1 | | | | | | | | | profile to PC5 DRX | | | | | | | | | | cycle mapping rule | octet o160+2 | | | | | | | | | contents | | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+ | PC5 QoS profile | octet o160+3 | | | | | | | | | | | | | | | | | | | | octet o1600 | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+ | PC5 DRX cycle | octet o1600+1=o161 | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+
Figure 5.4.2.10c: PC5 QoS profile to PC5 DRX cycle mapping rule
Table 5.4.2.10c: PC5 QoS profile to PC5 DRX cycle mapping rule
+----------------------------------------------------------------------+ | PC5 QoS profile: | | | | The PC5 QoS profile field is coded according to figure 5.4.2.33 and | | table 5.4.2.33. | +======================================================================+ | PC5 DRX cycle: | +----------------------------------------------------------------------+ | The PC5 DRX cycle field is coded as _sl-DRX-GC-BC-Cycle-r17_ in | | clause 6.3.5 of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+ | If the length of PC5 QoS profile to PC5 DRX cycle mapping rule | | contents field indicates a length bigger than indicated in | | figure 5.4.2.10b, receiving entity shall ignore any superfluous | | octets located at the end of the PC5 QoS profile to PC5 DRX cycle | | mapping rule contents. | +----------------------------------------------------------------------+
+--------------------------------------+------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +======================================+============+===+===+===+===+===+===+===+ | Length of privacy config contents | octet o2+1 | | | | | | | | | | | | | | | | | | | | octet o2+2 | | | | | | | | +--------------------------------------+------------+---+---+---+---+---+---+---+ | ProSe applications requiring privacy | octet o2+3 | | | | | | | | | | | | | | | | | | | | octet o4-2 | | | | | | | | +--------------------------------------+------------+---+---+---+---+---+---+---+ | Privacy timer | octet o4-1 | | | | | | | | | | | | | | | | | | | | octet o4 | | | | | | | | +--------------------------------------+------------+---+---+---+---+---+---+---+
Figure 5.4.2.11: Privacy config
Table 5.4.2.11: Privacy config
+----------------------------------------------------------------------+ | ProSe applications requiring privacy (octet o2+3 to o4-2) (NOTE): | | | | The ProSe applications requiring privacy field is coded according to | | figure 5.4.2.12 and table 5.4.2.12. The ProSe applications requiring | | privacy field may contain a default ProSe application requiring | | privacy for the ProSe services that do not have dedicated ProSe | | application requiring privacy. | +======================================================================+ | Privacy timer (octet o4-1, octet o4): | +----------------------------------------------------------------------+ | The privacy timer field contains binary encoded duration, in units | | of seconds, after which the UE shall change the source layer-2 ID | | self-assigned by the UE while performing transmission of 5G ProSe | | direct communication when privacy is required. | +----------------------------------------------------------------------+ | If the length of privacy config contents field is bigger than | | indicated in figure 5.4.2.11, receiving entity shall ignore any | | superfluous octets located at the end of the privacy config | | contents. | | | | NOTE: This field is prioritized in decreasing order according to the | | local configuration of the network. The default mapping rule for the | | ProSe services that do not have dedicated mapping rules, if present, | | is recommended to be the last one and with the lowest priority of | | this field. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o2+3 | | | | | | | | | applications | | | | | | | | | | requiring privacy | octet o2+4 | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe application | octet (o2+5)* | | | | | | | | | requiring privacy 1 | | | | | | | | | | | octet o12* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe application | octet (o12+1)* | | | | | | | | | requiring privacy 2 | | | | | | | | | | | octet o13* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o13+1)* | | | | | | | | | | | | | | | | | | | | octet o14* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe application | octet (o14+1)* | | | | | | | | | requiring privacy n | | | | | | | | | | | octet (o4-2)* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.12: ProSe applications requiring privacy
Table 5.4.2.12: ProSe applications requiring privacy
+----------------------------------------------------------------------+ | ProSe application requiring privacy: | | | | The ProSe application requiring privacy field is coded according to | | figure 5.4.2.13 and table 5.4.2.13. | +----------------------------------------------------------------------+
+--------------------------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========================================================+=============+===+===+===+===+===+===+===+ | Length of ProSe application requiring privacy contents | octet o12+1 | | | | | | | | | | | | | | | | | | | | octet o12+2 | | | | | | | | +--------------------------------------------------------+-------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o12+3 | | | | | | | | | | | | | | | | | | | | octet o15 | | | | | | | | +--------------------------------------------------------+-------------+---+---+---+---+---+---+---+ | Geographical areas | octet o15+1 | | | | | | | | | | | | | | | | | | | | octet o13 | | | | | | | | +--------------------------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.13: ProSe application requiring privacy
Table 5.4.2.13: ProSe application requiring privacy
+----------------------------------------------------------------------+ | ProSe identifiers (octet o12+3 to o15): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe application | | requiring privacy, the ProSe identifier is coded as the default | | ProSe identifier (see table 5.4.2.14). | +======================================================================+ | Geographical areas (octet o15+1 to o13): | | | | The geographical areas field is coded according to figure 5.4.2.15 | | and table 5.4.2.15. | +----------------------------------------------------------------------+ | If the length of ProSe applications requiring privacy contents field | | is bigger than indicated in figure 5.4.2.13, receiving entity shall | | ignore any superfluous octets located at the end of the ProSe | | applications requiring privacy contents. | +----------------------------------------------------------------------+
+--------------------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +======================================+==================+===+===+===+===+===+===+===+ | Length of ProSe identifiers contents | octet o12+3 | | | | | | | | | | | | | | | | | | | | octet o12+4 | | | | | | | | +--------------------------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier 1 | octet (o12+5)* | | | | | | | | | | | | | | | | | | | | octet o121* | | | | | | | | +--------------------------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier 2 | octet (o121+1)* | | | | | | | | | | | | | | | | | | | | octet o122* | | | | | | | | +--------------------------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o122+1)* | | | | | | | | | | | | | | | | | | | | octet o123* | | | | | | | | +--------------------------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier n | octet (o123+1)* | | | | | | | | | | | | | | | | | | | | octet o124* | | | | | | | | | | | | | | | | | | | | = octet o15* | | | | | | | | +--------------------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.14: ProSe identifiers
Table 5.4.2.14: ProSe identifiers
+----------------------------------------------------------------------+ | ProSe identifier (NOTE 1, NOTE 2): | | | | The ProSe identifier field contains a sequence of a sixteen octet OS | | Id field, a one octet OS App Id length field, and an OS App Id | | field. The OS Id field shall be transmitted first. The OS Id field | | contains a Universally Unique IDentifier (UUID) as specified in | | IETF RFC 4122 [12]. | +======================================================================+ | NOTE 1: Further definition of the format of OS App ID is beyond the | | scope of this specification. | | | | NOTE 2: The default ProSe identifier for the ProSe services that do | | not have dedicated configurations is coded as a sequence of a | | seventeen octet of \"0\". The default ProSe identifier matches all | | the ProSe services. | +----------------------------------------------------------------------+
+---------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======================================+=================+===+===+===+===+===+===+===+ | Length of geographical areas contents | octet o15+1 | | | | | | | | | | | | | | | | | | | | octet o15+2 | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | Geographical area 1 | octet (o15+3)* | | | | | | | | | | | | | | | | | | | | octet o23* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | Geographical area 2 | octet (o23+1)* | | | | | | | | | | | | | | | | | | | | octet o24* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o24+1)* | | | | | | | | | | | | | | | | | | | | octet o25* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | Geographical area n | octet (o25+1)* | | | | | | | | | | | | | | | | | | | | octet o13* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.15: Geographical areas
Table 5.4.2.15: Geographical areas
+----------------------------------------------------------------------+ | Geographical area: | | | | The geographical area field is coded according to figure 5.4.2.8 and | | table 5.4.2.8. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o4+1 | | | | | | | | | of 5G | | | | | | | | | | ProSe | octet | | | | | | | | | d | o4+2 | | | | | | | | | irect | | | | | | | | | | com | | | | | | | | | | munic | | | | | | | | | | ation | | | | | | | | | | in | | | | | | | | | | N | | | | | | | | | | R-PC5 | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | PI | 0 | 0 | 0 | 0 | 0 | 0 | octet | | | NFMRI | | | | | | | o4+3 | | Spare | | Spare | Spare | Spare | Spare | Spare | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | (o4 | | | | | | | | | ifier | +4)* | | | | | | | | | to | | | | | | | | | | ProSe | octet | | | | | | | | | NR | o45* | | | | | | | | | freq | | | | | | | | | | uency | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | o108 | | | | | | | | | ifier | | | | | | | | | | to | (see | | | | | | | | | d | NOTE) | | | | | | | | | estin | | | | | | | | | | ation | octet | | | | | | | | | la | o46 | | | | | | | | | yer-2 | | | | | | | | | | ID | | | | | | | | | | for | | | | | | | | | | broa | | | | | | | | | | dcast | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Grou | octet | | | | | | | | | pcast | o46+1 | | | | | | | | | param | | | | | | | | | | eters | octet | | | | | | | | | | o47 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | o47+1 | | | | | | | | | ifier | | | | | | | | | | to | octet | | | | | | | | | d | o48 | | | | | | | | | estin | | | | | | | | | | ation | | | | | | | | | | la | | | | | | | | | | yer-2 | | | | | | | | | | ID | | | | | | | | | | for | | | | | | | | | | un | | | | | | | | | | icast | | | | | | | | | | in | | | | | | | | | | itial | | | | | | | | | | signa | | | | | | | | | | lling | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | o48+1 | | | | | | | | | ifier | | | | | | | | | | to | octet | | | | | | | | | PC5 | o49 | | | | | | | | | QoS | | | | | | | | | | param | | | | | | | | | | eters | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | AS | octet | | | | | | | | | con | o49+1 | | | | | | | | | figur | | | | | | | | | | ation | octet | | | | | | | | | | o50 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | N | octet | | | | | | | | | R-PC5 | (o | | | | | | | | | un | 50+1) | | | | | | | | | icast | = | | | | | | | | | sec | | | | | | | | | | urity | octet | | | | | | | | | pol | o93 | | | | | | | | | icies | | | | | | | | | | | octet | | | | | | | | | | o84 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | (o | | | | | | | | | ifier | 84+1) | | | | | | | | | to | | | | | | | | | | de | octet | | | | | | | | | fault | o85 | | | | | | | | | mode | | | | | | | | | | of | | | | | | | | | | com | | | | | | | | | | munic | | | | | | | | | | ation | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | ident | (o | | | | | | | | | ifier | 85+1) | | | | | | | | | to | | | | | | | | | | d | octet | | | | | | | | | estin | o86 = | | | | | | | | | ation | octet | | | | | | | | | la | o5 | | | | | | | | | yer-2 | | | | | | | | | | ID | | | | | | | | | | for | | | | | | | | | | grou | | | | | | | | | | pcast | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rules | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
NOTE: The field is placed immediately after the last present preceding field.
Figure 5.4.2.16: 5G ProSe direct communication over PC5 in NR-PC5
Table 5.4.2.16: 5G ProSe direct communication over PC5 in NR-PC5
+----------------------------------------------------------------------+ | ProSe identifier to ProSe NR frequency mapping rules indicator | | (PINFMRI) (octet o4+3 bit 7): | | | | The PINFMRI bit indicates presence of the ProSe identifier to ProSe | | NR frequency mapping rules field. | | | | Bit | | | | **7** | | | | 0 ProSe identifier to ProSe NR frequency mapping rules field is | | absent | | | | 1 ProSe identifier to ProSe NR frequency mapping rules field is | | present | +======================================================================+ | | +----------------------------------------------------------------------+ | ProSe identifier to ProSe NR frequency mapping rules (octet o4+4 to | | o45) (NOTE): | | | | The ProSe identifier to ProSe NR frequency mapping rules field is | | coded according to figure 5.4.2.17 and table 5.4.2.17. The ProSe | | identifier to ProSe NR frequency mapping rules field may contain a | | default ProSe identifier to ProSe NR frequency mapping rule for the | | ProSe services that do not have dedicated mapping rules. | +----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for broadcast mapping | | rules (octet o108 to o46) (NOTE): | | | | The ProSe identifier to destination layer-2 ID for broadcast mapping | | rules field is coded according to figure 5.4.2.22 and | | table 5.4.2.22. The ProSe identifier to destination layer-2 ID for | | broadcast mapping rules field may contain a default ProSe identifier | | to destination layer-2 ID for broadcast mapping rule for the ProSe | | services that do not have dedicated mapping rules. | +----------------------------------------------------------------------+ | Groupcast parameters (octet o46+1 to o47): | | | | The groupcast parameters field is coded according to figure 5.4.2.24 | | and table 5.4.2.24. | +----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for unicast initial | | signalling mapping rules (octet o47+1 to o48) (NOTE): | | | | The ProSe identifier to destination layer-2 ID for unicast initial | | signalling mapping rules field is coded according to figure 5.4.2.26 | | and table 5.4.2.26. The ProSe identifier to destination layer-2 ID | | for unicast initial signalling mapping rules field may contain a | | default ProSe identifier to destination layer-2 ID for unicast | | initial signalling mapping rule for the ProSe services that do not | | have dedicated mapping rules. | +----------------------------------------------------------------------+ | ProSe identifier to PC5 QoS parameters mapping rules (octet o48+1 to | | o49) (NOTE): | | | | The ProSe identifier to PC5 QoS parameters mapping rules field is | | coded according to figure 5.4.2.28 and table 5.4.2.28. The ProSe | | identifier to PC5 QoS parameters mapping rules field may contain a | | default ProSe identifier to PC5 QoS parameters mapping rule for the | | ProSe services that do not have dedicated mapping rules. | +----------------------------------------------------------------------+ | AS configuration (octet o49+1 to o50): | | | | The AS configuration field is coded according to figure 5.4.2.30 and | | table 5.4.2.30. | +----------------------------------------------------------------------+ | NR-PC5 unicast security policies (octet o93 to o84) (NOTE): | | | | The NR-PC5 unicast security policies field is coded according to | | figure 5.4.2.34 and table 5.4.2.34. The NR-PC5 unicast security | | policies field may contain a default NR-PC5 unicast security policy | | for the ProSe services that do not have dedicated mapping rules. | +----------------------------------------------------------------------+ | ProSe identifier to default mode of communication mapping rules | | (o84+1 to o85) (NOTE):: | | | | The ProSe identifier to default mode of communication mapping rules | | is coded according to figure 5.4.2.37 and table 5.4.2.37. The ProSe | | identifier to default mode of communication mapping rules field may | | contain a default ProSe identifier to default mode of communication | | mapping rule for the ProSe services that do not have dedicated | | mapping rules. | | | | ProSe identifier to destination layer-2 ID for groupcast mapping | | rules (octet o85+1 to o5): | | | | The ProSe identifier to destination layer-2 ID for groupcast mapping | | rules field is coded according to figure 5.4.2.39 and | | table 5.4.2.39. | +----------------------------------------------------------------------+ | If the length of 5G ProSe direct communication over PC5 in NR-PC5 | | contents field is bigger than indicated in figure 5.4.2.16, | | receiving entity shall ignore any superfluous octets located at the | | end of the 5G ProSe direct communication over PC5 in NR-PC5 | | contents. | | | | NOTE: This field is prioritized in decreasing order according to the | | local configuration of the network. The default mapping rule for the | | ProSe services that do not have dedicated mapping rules, if present, | | is recommended to be the last one and with the lowest priority of | | this field. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o4+4 | | | | | | | | | identifier to ProSe | | | | | | | | | | NR frequency | octet o4+5 | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o4+6)* | | | | | | | | | ProSe NR frequency | | | | | | | | | | mapping rule 1 | octet o51* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o51+1)* | | | | | | | | | ProSe NR frequency | | | | | | | | | | mapping rule 2 | octet o52* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o52+1)* | | | | | | | | | | | | | | | | | | | | octet o53* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o53+1)* | | | | | | | | | ProSe NR frequency | | | | | | | | | | mapping rule n | octet o45* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.17: ProSe identifier to ProSe NR frequency mapping rules
Table 5.4.2.17: ProSe identifier to ProSe NR frequency mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to ProSe NR frequency mapping rule: | | | | The ProSe identifier to ProSe NR frequency mapping rule is coded | | according to figure 5.4.2.18 and table 5.4.2.18. | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of ProSe | octet o51+1 | | | | | | | | | identifier to ProSe | | | | | | | | | | NR frequency | octet o51+2 | | | | | | | | | mapping rule | | | | | | | | | | contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o51+3 | | | | | | | | | | | | | | | | | | | | octet o54 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | ProSe NR | octet o54+1 | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o52 | | | | | | | | | list | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.18: ProSe identifier to ProSe NR frequency mapping rule
Table 5.4.2.18: ProSe identifier to ProSe NR frequency mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o51+3 to o54): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifier to ProSe | | NR frequency mapping rule, the ProSe identifier is coded as the | | default ProSe identifier (see table 5.4.2.14). | +======================================================================+ | ProSe NR frequencies with geographical areas list (octet o54+1 to | | o52): | | | | The ProSe NR frequencies with geographical areas list field is coded | | according to figure 5.4.2.19 and table 5.4.2.19. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to ProSe NR frequency mapping rule | | contents field is bigger than indicated in figure 5.4.2.18, | | receiving entity shall ignore any superfluous octets located at the | | end of the ProSe identifier to ProSe NR frequency mapping rule | | contents. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe NR | octet o54+1 | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o54+2 | | | | | | | | | list contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe NR | octet (o54+3)* | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o55* | | | | | | | | | info 1 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe NR | octet (o55+1)* | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o56* | | | | | | | | | info 2 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o56+1)* | | | | | | | | | | | | | | | | | | | | octet o57* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe NR | octet (o57+1)* | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o52* | | | | | | | | | info n | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.19: ProSe NR frequencies with geographical areas list
Table 5.4.2.19: ProSe NR frequencies with geographical areas list
+----------------------------------------------------------------------+ | ProSe NR frequencies with geographical areas info: | | | | The ProSe NR frequencies with geographical areas info field is coded | | according to figure 5.4.2.20 and table 5.4.2.20. | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of ProSe NR | octet o55+1 | | | | | | | | | frequencies with | | | | | | | | | | geographical areas | octet o55+2 | | | | | | | | | info contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | ProSe NR | octet o55+3 | | | | | | | | | frequencies | | | | | | | | | | | octet o58 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Geographical areas | octet o58+1 | | | | | | | | | | | | | | | | | | | | octet o56 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.20: ProSe NR frequencies with geographical areas info
Table 5.4.2.20: ProSe NR frequencies with geographical areas info
+----------------------------------------------------------------------+ | ProSe NR frequencies (octet o55+3 to o58): | | | | The ProSe NR frequencies field is coded according to figure 5.4.2.21 | | and table 5.4.2.21. | +======================================================================+ | Geographical areas (octet o58+1 to o56): | | | | The geographical areas field is coded according to figure 5.4.2.15 | | and table 5.4.2.15. | +----------------------------------------------------------------------+ | If the length of ProSe NR frequencies with geographical areas info | | contents field is bigger than indicated in figure 5.4.2.20, | | receiving entity shall ignore any superfluous octets located at the | | end of the ProSe NR frequencies with geographical areas info | | contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of ProSe NR | octet o55+3 | | | | | | | | | frequencies | | | | | | | | | | contents | octet o55+4 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ProSe NR frequency | octet (o55+5)* | | | | | | | | | 1 | | | | | | | | | | | octet (o55+7)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ProSe NR frequency | octet (o55+8)* | | | | | | | | | 2 | | | | | | | | | | | octet (o55+10)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (o55+11)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o55+4+(n-1)*3)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ProSe NR frequency | octet | | | | | | | | | n | (o55+5+(n-1)*3)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o55+4+n*3)* = | | | | | | | | | | octet o58* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.4.2.21: ProSe NR frequencies
Table 5.4.2.21: ProSe NR frequencies
+----------------------------------------------------------------------+ | ProSe NR frequency: | | | | ProSe NR frequency is coded according to the NR-ARFCN value defined | | in 3GPP TS 38.101-1 [8] and 3GPP TS 38.101-2 [9]. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of ProSe | octet o108 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o108+1 | | | | | | | | | ID for broadcast | | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o108+2)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for broadcast | octet o59* | | | | | | | | | mapping rule 1 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o59+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for broadcast | octet o60* | | | | | | | | | mapping rule 2 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o60+1)* | | | | | | | | | | | | | | | | | | | | octet o61* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o61+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for broadcast | octet o46* | | | | | | | | | mapping rule n | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.22: ProSe identifier to destination layer-2 ID for broadcast
mapping rules
Table 5.4.2.22: ProSe identifier to destination layer-2 ID for broadcast
mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for broadcast mapping | | rule: | | | | The ProSe identifier to destination layer-2 ID for broadcast mapping | | rule field is coded according to figure 5.4.2.23 and table 5.4.2.23. | +----------------------------------------------------------------------+
+---------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+===============+===+===+===+===+===+===+===+ | Length of ProSe | octet o59+1 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o59+2 | | | | | | | | | ID for broadcast | | | | | | | | | | mapping rule | | | | | | | | | | contents | | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o59+3 | | | | | | | | | | | | | | | | | | | | octet o62 | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+ | Destination layer-2 | octet o62+1 | | | | | | | | | ID for broadcast | | | | | | | | | | | octet (o62+3) | | | | | | | | | | | | | | | | | | | | = octet o60 | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+
Figure 5.4.2.23: ProSe identifier to destination layer-2 ID for broadcast
mapping rule
Table 5.4.2.23: ProSe identifier to destination layer-2 ID for broadcast
mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o59+3 to o62): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifier to | | destination layer-2 ID for broadcast mapping rule, the ProSe | | identifier is coded as the default ProSe identifier (see | | table 5.4.2.14). | +======================================================================+ | Destination layer-2 ID for broadcast (octet o62+1 to o60): | | | | The destination layer-2 ID for broadcast field is a binary coded | | layer-2 identifier. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to destination layer-2 ID for | | broadcast mapping rule contents field is bigger than indicated in | | figure 5.4.2.23, receiving entity shall ignore any superfluous | | octets located at the end of the ProSe identifier to destination | | layer-2 ID for broadcast mapping rule contents. | +----------------------------------------------------------------------+
+-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=========================================+=================+===+===+===+===+===+===+===+ | Length of groupcast parameters contents | octet o46+1 | | | | | | | | | | | | | | | | | | | | octet o46+2 | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info 1 | octet (o46+3)* | | | | | | | | | | | | | | | | | | | | octet o63* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info 2 | octet (o63+1)* | | | | | | | | | | | | | | | | | | | | octet o64* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o64+1)* | | | | | | | | | | | | | | | | | | | | octet o65* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Application layer group info n | octet (o65+1)* | | | | | | | | | | | | | | | | | | | | octet 47* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.24: Groupcast parameters
Table 5.4.2.24: Groupcast parameters
+----------------------------------------------------------------------+ | Application layer group info: | | | | The application layer group info field is coded according to | | figure 5.4.2.25 and table 5.4.2.25. | +----------------------------------------------------------------------+
+-------+-------+------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o63+1 | | | | | | | | | of | | | | | | | | | | a | octet | | | | | | | | | pplic | o63+2 | | | | | | | | | ation | | | | | | | | | | layer | | | | | | | | | | group | | | | | | | | | | info | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+------+-------+-------+-------+-------+-------+-------+ | A | octet | | | | | | | | | pplic | o63+3 | | | | | | | | | ation | | | | | | | | | | layer | octet | | | | | | | | | group | o163 | | | | | | | | | ident | | | | | | | | | | ifier | | | | | | | | | +-------+-------+------+-------+-------+-------+-------+-------+-------+ | IPv4 | I | IPv6 | 0 | 0 | 0 | 0 | 0 | octet | | | Pv4AI | | | | | | | o | | | | | Spare | Spare | Spare | Spare | Spare | 163+1 | +-------+-------+------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | la | o | | | | | | | | | yer-2 | 163+2 | | | | | | | | | group | | | | | | | | | | ident | octet | | | | | | | | | ifier | o | | | | | | | | | | 163+4 | | | | | | | | +-------+-------+------+-------+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | group | o | | | | | | | | | IP | 163+5 | | | | | | | | | mult | | | | | | | | | | icast | octet | | | | | | | | | ad | o164 | | | | | | | | | dress | | | | | | | | | +-------+-------+------+-------+-------+-------+-------+-------+-------+ | IPv4 | octet | | | | | | | | | ad | (o164 | | | | | | | | | dress | +1)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o164 | | | | | | | | | | +4)* | | | | | | | | | | = | | | | | | | | | | octet | | | | | | | | | | 64* | | | | | | | | +-------+-------+------+-------+-------+-------+-------+-------+-------+
Figure 5.4.2.25: Application layer group info
Table 5.4.2.25: Application layer group info
+----------------------------------------------------------------------+ | Application layer group identifier (octet o63+3 to o163): | | | | The first octet of application layer group identifier field is the | | length of application group identifier. The value of application | | group identifier field is a bit string. The format of application | | group identifier parameter is out of scope of this specification. | +======================================================================+ | IPv4 (octet o163+1 bit 8): | | | | Bit | | | | **8** | | | | 0 IPv4 is not authorized | | | | 1 IPv4 is authorized | +----------------------------------------------------------------------+ | IPv4 address indicator (IPv4AI) (octet o163+1 bit 7): | | | | Bit | | | | **7** | | | | 0 IPv4 address is absent | | | | 1 IPv4 address is present | +----------------------------------------------------------------------+ | IPv6 (octet o163+1 bit 6): | | | | Bit | | | | **6** | | | | 0 IPv6 is not authorized | | | | 1 IPv6 is authorized | +----------------------------------------------------------------------+ | ProSe layer-2 group identifier (octet o163+2 to o163+4): | | | | The ProSe layer-2 group identifier field is a binary coded layer-2 | | identifier. | +----------------------------------------------------------------------+ | ProSe group IP multicast address (octet o163+5 to o164): | | | | The ProSe group IP multicast address field contains the IP multicast | | address for the group. If IPv4 field is set to \"IPv4 is | | authorized\" and IPv6 field is set to \"IPv6 is not authorized\", | | the ProSe group IP multicast address contains an IPv4 address. If | | IPv6 field is set to \"IPv6 is authorized\" and IPv4 field is set to | | \"IPv4 is not authorized\", the ProSe group IP multicast address | | contains an IPv6 address. If IPv4 field is set to \"IPv4 is | | authorized\" and IPv6 field is set to \"IPv6 is authorized\", the | | ProSe group IP multicast address contains an IPv4 address followed | | by an IPv6 address | +----------------------------------------------------------------------+ | IPv4 address (octet o164+1 to o164+4): | +----------------------------------------------------------------------+ | The IPv4 address field contains an IPv4 address as the source | | address for a specific group configured to operate using IPv4. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o47+1 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o47+2 | | | | | | | | | ID for unicast | | | | | | | | | | initial signalling | | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o47+3)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for unicast | octet o66* | | | | | | | | | initial signalling | | | | | | | | | | mapping rule 1 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o66+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for unicast | octet o67* | | | | | | | | | initial signalling | | | | | | | | | | mapping rule 2 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o67+1)* | | | | | | | | | | | | | | | | | | | | octet o68* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o68+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for unicast | octet o48* | | | | | | | | | initial signalling | | | | | | | | | | mapping rule n | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.26: ProSe identifier to destination layer-2 ID for unicast
initial signalling mapping rules
Table 5.4.2.26: ProSe identifier to destination layer-2 ID for unicast initial
signalling mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for unicast initial | | signalling mapping rule: | | | | The ProSe identifier to destination layer-2 ID for unicast initial | | signalling mapping rule field is coded according to figure 5.4.2.27 | | and table 5.4.2.27. | +----------------------------------------------------------------------+
+---------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+===============+===+===+===+===+===+===+===+ | Length of ProSe | octet o66+1 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o66+2 | | | | | | | | | ID for unicast | | | | | | | | | | initial signalling | | | | | | | | | | mapping rule | | | | | | | | | | contents | | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o66+3 | | | | | | | | | | | | | | | | | | | | octet o81 | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+ | Destination layer-2 | octet o81+1 | | | | | | | | | ID for unicast | | | | | | | | | | initial signalling | octet (o81+3) | | | | | | | | | | | | | | | | | | | | = octet o67 | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+
Figure 5.4.2.27: ProSe identifier to destination layer-2 ID for unicast
initial signalling mapping rule
Table 5.4.2.27: ProSe identifier to destination layer-2 ID for unicast initial
signalling mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o66+3 to o81): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifier to | | destination layer-2 ID for unicast initial signalling mapping rule, | | the ProSe identifier is coded as the default ProSe identifier (see | | table 5.4.2.14). | +======================================================================+ | Destination layer-2 ID for unicast initial signalling (octet o81+1 | | to o67): | | | | The destination layer-2 ID for unicast initial signalling field is a | | binary coded layer-2 identifier. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to destination layer-2 ID for | | unicast initial signalling mapping rule contents field is bigger | | than indicated in figure 5.4.2.27, receiving entity shall ignore any | | superfluous octets located at the end of the ProSe identifier to | | destination layer-2 ID for unicast initial signalling mapping rule | | contents. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o48+1 | | | | | | | | | identifier to PC5 | | | | | | | | | | QoS parameters | octet o48+2 | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o48+3)* | | | | | | | | | PC5 QoS parameters | | | | | | | | | | mapping rule 1 | octet o70* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o70+1)* | | | | | | | | | PC5 QoS parameters | | | | | | | | | | mapping rule 2 | octet o71* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o71+1)* | | | | | | | | | | | | | | | | | | | | octet o72* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o72+1)* | | | | | | | | | PC5 QoS parameters | | | | | | | | | | mapping rule n | octet o49* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.28: ProSe identifier to PC5 QoS parameters mapping rules
Table 5.4.2.28: ProSe identifier to PC5 QoS parameters mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to PC5 QoS parameters mapping rule: | | | | The ProSe identifier to PC5 QoS parameters mapping rule field is | | coded according to figure 5.4.2.29 and table 5.4.2.29. | +----------------------------------------------------------------------+
+-------+-------+-------+----+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+====+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o70+1 | | | | | | | | | of | | | | | | | | | | ProSe | octet | | | | | | | | | ident | o70+2 | | | | | | | | | ifier | | | | | | | | | | to | | | | | | | | | | PC5 | | | | | | | | | | QoS | | | | | | | | | | param | | | | | | | | | | eters | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rule | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | ProSe | octet | | | | | | | | | i | o70+3 | | | | | | | | | denti | | | | | | | | | | fiers | octet | | | | | | | | | | o74 | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | GFBRI | MFBRI | PL | RI | 0 | 0 | 0 | 0 | octet | | | | AMBRI | | | | | | o74+1 | | | | | | Spare | Spare | Spare | Spare | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | PQI | octet | | | | | | | | | | o74+2 | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | Guara | octet | | | | | | | | | nteed | (o74 | | | | | | | | | flow | +3)* | | | | | | | | | bit | | | | | | | | | | rate | octet | | | | | | | | | | (o74 | | | | | | | | | | +5)* | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | Ma | octet | | | | | | | | | ximum | o94* | | | | | | | | | flow | (see | | | | | | | | | bit | NOTE) | | | | | | | | | rate | | | | | | | | | | | octet | | | | | | | | | | (o94 | | | | | | | | | | +2)* | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | Per | octet | | | | | | | | | -link | o95* | | | | | | | | | aggr | (see | | | | | | | | | egate | NOTE) | | | | | | | | | ma | | | | | | | | | | ximum | octet | | | | | | | | | bit | (o95 | | | | | | | | | rate | +2)* | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+ | Range | octet | | | | | | | | | | o96* | | | | | | | | | | (see | | | | | | | | | | NOTE) | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o96 | | | | | | | | | | +1)* | | | | | | | | | | = | | | | | | | | | | octet | | | | | | | | | | o71* | | | | | | | | +-------+-------+-------+----+-------+-------+-------+-------+-------+
NOTE: The field is placed immediately after the last present preceding field.
Figure 5.4.2.29: ProSe identifier to PC5 QoS parameters mapping rule
Table 5.4.2.29: ProSe identifier to PC5 QoS parameters mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o70+3 to o74): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifier to PC5 | | QoS parameters mapping rule, the ProSe identifier is coded as the | | default ProSe identifier (see table 5.4.2.14). | +======================================================================+ | Guaranteed flow bit rate indicator (GFBRI) (octet o74+1 bit 8): | | | | The GFBRI bit indicates presence of guaranteed flow bit rate field. | | | | Bit | | | | **8** | | | | 0 Guaranteed flow bit rate field is absent | | | | 1 Guaranteed flow bit rate field is present | +----------------------------------------------------------------------+ | Maximum flow bit rate indicator (MFBRI) (octet o74+1 bit 7): | | | | The MFBRI bit indicates presence of maximum flow bit rate field. | | | | Bit | | | | **7** | | | | 0 Maximum flow bit rate field is absent | | | | 1 Maximum flow bit rate field is present | +----------------------------------------------------------------------+ | Per-link aggregate maximum bit rate indicator (PLAMBRI) (octet o74+1 | | bit 6): | | | | The PLAMBRI bit indicates presence of per-link aggregate maximum bit | | rate field. | | | | Bit | | | | **6** | | | | 0 Per-link aggregate maximum bit rate field is absent | | | | 1 Per-link aggregate maximum bit rate field is present | +----------------------------------------------------------------------+ | Range indicator (RI) (octet o74+1 bit 5): | | | | The RI bit indicates presence of range field. | | | | Bit | | | | **5** | | | | 0 Range field is absent | | | | 1 Range field is present | +----------------------------------------------------------------------+ | PQI (octet o74+2): | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 Reserved | | | | 0 0 0 0 0 0 0 1 | | | | to Spare | | | | 0 0 0 1 0 1 0 0 | | | | 0 0 0 1 0 1 0 1 PQI 21 | | | | 0 0 0 1 0 1 1 0 PQI 22 | | | | 0 0 0 1 0 1 1 1 PQI 23 | | | | 0 0 0 1 1 0 0 0 PQI 24 | | | | 0 0 0 1 1 0 0 1 PQI 25 | | | | 0 0 0 1 1 0 1 0 PQI 26 | | | | 0 0 0 1 1 0 1 1 | | | | to Spare | | | | 0 0 1 1 0 1 1 0 | | | | 0 0 1 1 0 1 1 1 PQI 55 | | | | 0 0 1 1 1 0 0 0 PQI 56 | | | | 0 0 1 1 1 0 0 1 PQI 57 | | | | 0 0 1 1 1 0 1 0 PQI 58 | | | | 0 0 1 1 1 0 1 1 PQI 59 | | | | 0 0 1 1 1 1 0 0 PQI 60 | | | | 0 0 1 1 1 1 0 1 PQI 61 | | | | 0 0 1 1 1 1 1 0 | | | | to Spare | | | | 0 1 0 1 1 0 0 1 | | | | 0 1 0 1 1 0 1 0 PQI 90 | | | | 0 1 0 1 1 0 1 1 PQI 91 | | | | 0 1 0 1 1 1 0 0 PQI 92 | | | | 0 1 0 1 1 1 0 1 PQI 93 | | | | 0 1 0 1 1 1 1 0 | | | | to Spare | | | | 0 1 1 1 1 1 1 1 | | | | 1 0 0 0 0 0 0 0 | | | | to Operator-specific PQIs | | | | 1 1 1 1 1 1 1 0 | | | | 1 1 1 1 1 1 1 1 Reserved | | | | If the UE receives a PQI value (excluding the reserved PQI values) | | that it does not understand, the UE shall choose a PQI value from | | the set of PQI values defined in this version of the protocol (see | | 3GPP TS 23.304 [2]) and associated with: | | | | - GBR resource type, if the ProSe identifier to PC5 QoS parameters | | mapping rule includes the guaranteed flow bit rate field; and | | | | - non-GBR resource type, if the ProSe identifier to PC5 QoS | | parameters mapping rule does not include the guaranteed flow bit | | rate field. | | | | The UE shall use this chosen PQI value for internal operations only. | | The UE shall use the received PQI value in subsequent 5G ProSe | | direct communication over PC5 signalling procedures. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Guaranteed flow bit rate (octet o74+3 to o74+5): | | | | The guaranteed flow bit rate field indicates guaranteed flow bit | | rate for both sending and receiving and contains one octet | | indicating the unit of the guaranteed flow bit rate followed by two | | octets containing the value of the guaranteed flow bit rate. | | | | Unit of the guaranteed flow bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the guaranteed flow bit rate is binary coded value of the | | guaranteed flow bit rate in units defined by the unit of the | | guaranteed flow bit rate. | +----------------------------------------------------------------------+ | Maximum flow bit rate (octet o94 to o94+2): | | | | The maximum flow bit rate field indicates maximum flow bit rate for | | both sending and receiving and contains one octet indicating the | | unit of the maximum flow bit rate followed by two octets containing | | the value of the maximum flow bit rate. | | | | Unit of the maximum flow bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the maximum flow bit rate is binary coded value of the | | maximum flow bit rate in units defined by the unit of the maximum | | flow bit rate. | +----------------------------------------------------------------------+ | Per-link aggregate maximum bit rate (octet o95 to o95+2): | | | | The per-link aggregate maximum bit rate field indicates per-link | | aggregate maximum bit rate for both sending and receiving and | | contains one octet indicating the unit of the per-link aggregate | | maximum bit rate followed by two octets containing the value of the | | per-link aggregate maximum bit rate. | | | | Unit of the per-link aggregate maximum bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the per-link aggregate maximum bit rate is binary coded | | value of the per-link aggregate maximum bit rate in units defined by | | the unit of the per-link aggregate maximum bit rate. | +----------------------------------------------------------------------+ | Range (octet o96 to o71): | | | | The range field indicates a binary encoded value of the range in | | meters. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to PC5 QoS parameters mapping rule | | contents field is bigger than indicated in figure 5.4.2.28, | | receiving entity shall ignore any superfluous octets located at the | | end of the ProSe identifier to PC5 QoS parameters mapping rule | | contents. | +----------------------------------------------------------------------+
+-------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+=============+===+===+===+===+===+===+===+ | Length of AS configuration contents | octet o49+1 | | | | | | | | | | | | | | | | | | | | octet o49+2 | | | | | | | | +-------------------------------------+-------------+---+---+---+---+---+---+---+ | SLRB mapping rules | octet o49+3 | | | | | | | | | | | | | | | | | | | | octet o50 | | | | | | | | +-------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.30: AS configuration
Table 5.4.2.30: AS configuration
+----------------------------------------------------------------------+ | SLRB mapping rules: | | | | The SLRB mapping rules field is coded according to figure 5.4.2.31 | | and table 5.4.2.31. | +----------------------------------------------------------------------+
+---------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======================================+=================+===+===+===+===+===+===+===+ | Length of SLRB mapping rules contents | octet o49+3 | | | | | | | | | | | | | | | | | | | | octet o49+4 | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | SLRB mapping rule 1 | octet (o49+5)* | | | | | | | | | | | | | | | | | | | | octet o75* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | SLRB mapping rule 2 | octet (o75+1)* | | | | | | | | | | | | | | | | | | | | octet o76* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o76+1)* | | | | | | | | | | | | | | | | | | | | octet o77* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+ | SLRB mapping rule n | octet (o77+1)* | | | | | | | | | | | | | | | | | | | | octet o50* | | | | | | | | +---------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.31: SLRB mapping rules
Table 5.4.2.31: SLRB mapping rules
+----------------------------------------------------------------------+ | SLRB mapping rule: | | | | The SLRB mapping rule field is coded according to figure 5.4.2.32 | | and table 5.4.2.32. | +----------------------------------------------------------------------+
+--------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +======================================+=============+===+===+===+===+===+===+===+ | Length of SLRB mapping rule contents | octet o75+1 | | | | | | | | | | | | | | | | | | | | octet o75+2 | | | | | | | | +--------------------------------------+-------------+---+---+---+---+---+---+---+ | PC5 QoS profile | octet o75+3 | | | | | | | | | | | | | | | | | | | | octet o78 | | | | | | | | +--------------------------------------+-------------+---+---+---+---+---+---+---+ | Length of SLRB | octet o78+1 | | | | | | | | | | | | | | | | | | | | octet o78+2 | | | | | | | | +--------------------------------------+-------------+---+---+---+---+---+---+---+ | SLRB | octet o78+3 | | | | | | | | | | | | | | | | | | | | octet o76 | | | | | | | | +--------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.32: SLRB mapping rule
Table 5.4.2.32: SLRB mapping rule
+----------------------------------------------------------------------+ | PC5 QoS profile octet (o75+3 to o78): | | | | The PC5 QoS profile field is coded according to figure 5.4.2.33 and | | table 5.4.2.33. | +======================================================================+ | SLRB (o78+3 to o76): | +----------------------------------------------------------------------+ | SLRB is defined as _SL-PreconfigurationNR_ in clause 9.3 of | | 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+ | If the length of SLRB mapping rule contents field is bigger than | | indicated in figure 5.4.2.32, receiving entity shall ignore any | | superfluous octets located at the end of the SLRB mapping rule | | contents. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o75+3 | | | | | | | | | of | | | | | | | | | | PC5 | octet | | | | | | | | | QoS | o75+4 | | | | | | | | | pr | | | | | | | | | | ofile | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | GFBRI | MFBRI | PL | RI | PLOI | AWI | MDBVI | 0 | octet | | | | AMBRI | | | | | | o75+5 | | | | | | | | | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | PQI | octet | | | | | | | | | | o75+6 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Guara | octet | | | | | | | | | nteed | (o75 | | | | | | | | | flow | +7)* | | | | | | | | | bit | | | | | | | | | | rate | octet | | | | | | | | | | (o75 | | | | | | | | | | +9)* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ma | octet | | | | | | | | | ximum | o97* | | | | | | | | | flow | (see | | | | | | | | | bit | NOTE) | | | | | | | | | rate | | | | | | | | | | | octet | | | | | | | | | | (o97 | | | | | | | | | | +2)* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Per | octet | | | | | | | | | -link | o98* | | | | | | | | | aggr | (see | | | | | | | | | egate | NOTE) | | | | | | | | | ma | | | | | | | | | | ximum | octet | | | | | | | | | bit | (o98 | | | | | | | | | rate | +2)* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Range | octet | | | | | | | | | | o99* | | | | | | | | | | (see | | | | | | | | | | NOTE) | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o99 | | | | | | | | | | +1)* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | 0 | 0 | 0 | 0 | Pri | octet | | | | | | | | | ority | o | | | | Spare | Spare | Spare | Spare | Spare | level | 100* | | | | | | | | | | | | | | | | | | | | (see | | | | | | | | | | NOTE) | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Aver | octet | | | | | | | | | aging | o | | | | | | | | | w | 101* | | | | | | | | | indow | | | | | | | | | | | (see | | | | | | | | | | NOTE) | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o101 | | | | | | | | | | +1)* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ma | octet | | | | | | | | | ximum | o | | | | | | | | | data | 102* | | | | | | | | | burst | | | | | | | | | | v | (see | | | | | | | | | olume | NOTE) | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o102 | | | | | | | | | | +1)* | | | | | | | | | | = | | | | | | | | | | octet | | | | | | | | | | o78* | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
NOTE: The field is placed immediately after the last present preceding field.
Figure 5.4.2.33:PC5 QoS profile
Table 5.4.2.33:PC5 QoS profile
+----------------------------------------------------------------------+ | Guaranteed flow bit rate indicator (GFBRI) (o75+5 bit 8): | | | | The GFBRI bit indicates presence of guaranteed flow bit rate field. | | | | Bit | | | | **8** | | | | 0 Guaranteed flow bit rate field is absent | | | | 1 Guaranteed flow bit rate field is present | +======================================================================+ | Maximum flow bit rate indicator (MFBRI) (o75+5 bit 7): | | | | The MFBRI bit indicates presence of maximum flow bit rate field. | | | | Bit | | | | **7** | | | | 0 Maximum flow bit rate field is absent | | | | 1 Maximum flow bit rate field is present | +----------------------------------------------------------------------+ | Per-link aggregate maximum bit rate indicator (PLAMBRI) (o75+5 bit | | 6): | | | | The PLAMBRI bit indicates presence of per-link aggregate maximum bit | | rate field. | | | | Bit | | | | **6** | | | | 0 Per-link aggregate maximum bit rate field is absent | | | | 1 Per-link aggregate maximum bit rate field is present | +----------------------------------------------------------------------+ | Range indicator (RI) (o75+5 bit 5): | | | | The RI bit indicates presence of range field. | | | | Bit | | | | **5** | | | | 0 Range field is absent | | | | 1 Range field is present | +----------------------------------------------------------------------+ | Priority level octet indicator (OPLI) (o75+5 bit 4): | | | | The OPLI bit indicates presence of the octet of the priority level | | field. | | | | Bit | | | | **4** | | | | 0 The octet of the priority level is absent | | | | 1 The octet of the priority level is present | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Averaging window indicator (AWI) (o75+5 bit 3): | | | | The AWI bit indicates presence of averaging window field. | | | | Bit | | | | **3** | | | | 0 Averaging window field is absent | | | | 1 Averaging window field is present | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Maximum data burst volume indicator (MDBVI) (o75+5 bit 2): | | | | The MDBVI bit indicates presence of maximum data burst volume field. | | | | Bit | | | | **2** | | | | 0 Maximum data burst volume field is absent | | | | 1 Maximum data burst volume field is present | +----------------------------------------------------------------------+ | PQI (o75+6): | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 Reserved | | | | 0 0 0 0 0 0 0 1 | | | | to Spare | | | | 0 0 0 1 0 1 0 0 | | | | 0 0 0 1 0 1 0 1 PQI 21 | | | | 0 0 0 1 0 1 1 0 PQI 22 | | | | 0 0 0 1 0 1 1 1 PQI 23 | | | | 0 0 0 1 1 0 0 0 PQI 24 | | | | 0 0 0 1 1 0 0 1 PQI 25 | | | | 0 0 0 1 1 0 1 0 PQI 26 | | | | 0 0 0 1 1 0 1 1 | | | | to Spare | | | | 0 0 1 1 0 1 1 0 | | | | 0 0 1 1 0 1 1 1 PQI 55 | | | | 0 0 1 1 1 0 0 0 PQI 56 | | | | 0 0 1 1 1 0 0 1 PQI 57 | | | | 0 0 1 1 1 0 1 0 PQI 58 | | | | 0 0 1 1 1 0 1 1 PQI 59 | | | | 0 0 1 1 1 1 0 0 PQI 60 | | | | 0 0 1 1 1 1 0 1 PQI 61 | | | | 0 0 1 1 1 1 1 0 | | | | to Spare | | | | 0 1 0 1 1 0 0 1 | | | | 0 1 0 1 1 0 1 0 PQI 90 | | | | 0 1 0 1 1 0 1 1 PQI 91 | | | | 0 1 0 1 1 1 0 0 PQI 92 | | | | 0 1 0 1 1 1 0 1 PQI 93 | | | | 0 1 0 1 1 1 1 0 | | | | to Spare | | | | 0 1 1 1 1 1 1 1 | | | | 1 0 0 0 0 0 0 0 | | | | to Operator-specific PQIs | | | | 1 1 1 1 1 1 1 0 | | | | 1 1 1 1 1 1 1 1 Reserved | | | | If the UE receives a PQI value (excluding the reserved PQI values) | | that it does not understand, the UE shall choose a PQI value from | | the set of PQI values defined in this version of the protocol (see | | 3GPP TS 23.304 [2]) and associated with: | | | | - GBR resource type, if the PC5 QoS profile includes the guaranteed | | flow bit rate field; and | | | | - non-GBR resource type, if the PC5 QoS profile does not include | | the guaranteed flow bit rate field. | | | | The UE shall use this chosen PQI value for internal operations only. | | The UE shall use the received PQI value in subsequent 5G ProSe | | direct communication over PC5 signalling procedures. | +----------------------------------------------------------------------+ | Guaranteed flow bit rate octet (o75+7 to o75+9): | | | | The guaranteed flow bit rate field indicates guaranteed flow bit | | rate for both sending and receiving and contains one octet | | indicating the unit of the guaranteed flow bit rate followed by two | | octets containing the value of the guaranteed flow bit rate. | | | | Unit of the guaranteed flow bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the guaranteed flow bit rate is binary coded value of the | | guaranteed flow bit rate in units defined by the unit of the | | guaranteed flow bit rate. | +----------------------------------------------------------------------+ | Maximum flow bit rate (o97 to o97+2): | | | | The maximum flow bit rate field indicates maximum flow bit rate for | | both sending and receiving and contains one octet indicating the | | unit of the maximum flow bit rate followed by two octets containing | | the value of the maximum flow bit rate. | | | | Unit of the maximum flow bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the maximum flow bit rate is binary coded value of the | | maximum flow bit rate in units defined by the unit of the maximum | | flow bit rate. | +----------------------------------------------------------------------+ | Per-link aggregate maximum bit rate (o98 to o98+2): | | | | The per-link aggregate maximum bit rate field indicates per-link | | aggregate maximum bit rate for both sending and receiving and | | contains one octet indicating the unit of the per-link aggregate | | maximum bit rate followed by two octets containing the value of the | | per-link aggregate maximum bit rate. | | | | Unit of the per-link aggregate maximum bit rate: | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 value is not used | | | | 0 0 0 0 0 0 0 1 value is incremented in multiples of 1 Kbps | | | | 0 0 0 0 0 0 1 0 value is incremented in multiples of 4 Kbps | | | | 0 0 0 0 0 0 1 1 value is incremented in multiples of 16 Kbps | | | | 0 0 0 0 0 1 0 0 value is incremented in multiples of 64 Kbps | | | | 0 0 0 0 0 1 0 1 value is incremented in multiples of 256 Kbps | | | | 0 0 0 0 0 1 1 0 value is incremented in multiples of 1 Mbps | | | | 0 0 0 0 0 1 1 1 value is incremented in multiples of 4 Mbps | | | | 0 0 0 0 1 0 0 0 value is incremented in multiples of 16 Mbps | | | | 0 0 0 0 1 0 0 1 value is incremented in multiples of 64 Mbps | | | | 0 0 0 0 1 0 1 0 value is incremented in multiples of 256 Mbps | | | | 0 0 0 0 1 0 1 1 value is incremented in multiples of 1 Gbps | | | | 0 0 0 0 1 1 0 0 value is incremented in multiples of 4 Gbps | | | | 0 0 0 0 1 1 0 1 value is incremented in multiples of 16 Gbps | | | | 0 0 0 0 1 1 1 0 value is incremented in multiples of 64 Gbps | | | | 0 0 0 0 1 1 1 1 value is incremented in multiples of 256 Gbps | | | | 0 0 0 1 0 0 0 0 value is incremented in multiples of 1 Tbps | | | | 0 0 0 1 0 0 0 1 value is incremented in multiples of 4 Tbps | | | | 0 0 0 1 0 0 1 0 value is incremented in multiples of 16 Tbps | | | | 0 0 0 1 0 0 1 1 value is incremented in multiples of 64 Tbps | | | | 0 0 0 1 0 1 0 0 value is incremented in multiples of 256 Tbps | | | | 0 0 0 1 0 1 0 1 value is incremented in multiples of 1 Pbps | | | | 0 0 0 1 0 1 1 0 value is incremented in multiples of 4 Pbps | | | | 0 0 0 1 0 1 1 1 value is incremented in multiples of 16 Pbps | | | | 0 0 0 1 1 0 0 0 value is incremented in multiples of 64 Pbps | | | | 0 0 0 1 1 0 0 1 value is incremented in multiples of 256 Pbps | | | | Other values shall be interpreted as multiples of 256 Pbps in this | | version of the protocol. | | | | Value of the per-link aggregate maximum bit rate is binary coded | | value of the per-link aggregate maximum bit rate in units defined by | | the unit of the per-link aggregate maximum bit rate. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Range (o99 to o99+1): | | | | The range field indicates a binary encoded value of the range in | | meters. | +----------------------------------------------------------------------+ | Priority level (octet o100 bit 1 to 3): | | | | The priority level field contains a ProSe per-packet priority value. | | | | Bits | | | | **3 2 1** | | | | 0 0 0 PPPP value 1 | | | | 0 0 1 PPPP value 2 | | | | 0 1 0 PPPP value 3 | | | | 0 1 1 PPPP value 4 | | | | 1 0 0 PPPP value 5 | | | | 1 0 1 PPPP value 6 | | | | 1 1 0 PPPP value 7 | | | | 1 1 1 PPPP value 8 | +----------------------------------------------------------------------+ | Averaging window (o101 to o101+1): | | | | The averaging window field indicates a binary representation of the | | averaging window for both sending and receiving in milliseconds. | +----------------------------------------------------------------------+ | Maximum data burst volume (o102 to o78): | | | | The maximum data burst volume field indicates a binary | | representation of the maximum data burst volume for both sending and | | receiving in octets. | +----------------------------------------------------------------------+ | If the length of PC5 QoS profile contents field is bigger than | | indicated in figure 5.4.2.33, receiving entity shall ignore any | | superfluous octets located at the end of the PC5 QoS profile | | contents. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of NR-PC5 | octet o93 | | | | | | | | | unicast security | | | | | | | | | | policies contents | octet o93+1 | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | NR-PC5 unicast | octet (o93+2)* | | | | | | | | | security policy 1 | | | | | | | | | | | octet o86* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | NR-PC5 unicast | octet (o86+1)* | | | | | | | | | security policy 2 | | | | | | | | | | | octet o87* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o87+1)* | | | | | | | | | | | | | | | | | | | | octet o88* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | NR-PC5 unicast | octet (o88+1)* | | | | | | | | | security policy n | | | | | | | | | | | octet o84* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.34: NR-PC5 unicast security policies
Table 5.4.2.34: NR-PC5 unicast security policies
+----------------------------------------------------------------------+ | NR-PC5 unicast security policy: | | | | The NR-PC5 unicast security policy field is coded according to | | figure 5.4.2.35 and table 5.4.2.35. | +----------------------------------------------------------------------+
+---------------------------------------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===================================================+=============+===+===+===+===+===+===+===+ | Length of NR-PC5 unicast security policy contents | octet o86+1 | | | | | | | | | | | | | | | | | | | | octet o86+2 | | | | | | | | +---------------------------------------------------+-------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o86+3 | | | | | | | | | | | | | | | | | | | | octet o89 | | | | | | | | +---------------------------------------------------+-------------+---+---+---+---+---+---+---+ | Security policy | octet o89+1 | | | | | | | | | | | | | | | | | | | | octet o89+2 | | | | | | | | +---------------------------------------------------+-------------+---+---+---+---+---+---+---+ | Geographical areas | octet o89+3 | | | | | | | | | | | | | | | | | | | | octet o87 | | | | | | | | +---------------------------------------------------+-------------+---+---+---+---+---+---+---+
Figure 5.4.2.35: NR-PC5 unicast security policy
Table 5.4.2.35: NR-PC5 unicast security policy
+----------------------------------------------------------------------+ | ProSe identifiers (o86+3 to o89): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default NR-PC5 unicast security | | policy, the ProSe identifier is coded as the default ProSe | | identifier (see table 5.4.2.14). | +======================================================================+ | Security policy (o89+1 to o89+2): | +----------------------------------------------------------------------+ | The security policy field is coded according to figure 5.4.2.36 and | | table 5.4.2.36. | +----------------------------------------------------------------------+ | Geographical areas (o89+3 to o87): | | | | The geographical areas field is coded according to figure 5.4.2.15 | | and table 5.4.2.15. | | | | If the length of NR-PC5 unicast security policy contents field is | | bigger than indicated in figure 5.4.2.35, the receiving entity shall | | ignore any superfluous octets located at the end of the NR-PC5 | | unicast security policy contents. | +----------------------------------------------------------------------+
+-------+----------+-------+----------+----------+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+==========+=======+==========+==========+===+===+===+===+ | 0 | Si | 0 | Si | octet | | | | | | | gnalling | | gnalling | o89+1 | | | | | | spare | c | spare | i | | | | | | | | iphering | | ntegrity | | | | | | | | policy | | pr | | | | | | | | | | otection | | | | | | | | | | policy | | | | | | +-------+----------+-------+----------+----------+---+---+---+---+ | 0 | User | 0 | User | octet | | | | | | | plane | | plane | o89+2 | | | | | | spare | c | spare | i | | | | | | | | iphering | | ntegrity | | | | | | | | policy | | pr | | | | | | | | | | otection | | | | | | | | | | policy | | | | | | +-------+----------+-------+----------+----------+---+---+---+---+
Figure 5.4.2.36: Security policy
Table 5.4.2.36: Security policy
+------------------------+-------+-------+---+------------------------+ | Signalling integrity | | | | | | protection policy | | | | | | (octet o89+1 bit 1 to | | | | | | 3): | | | | | +========================+=======+=======+===+========================+ | Bits | | | | | +------------------------+-------+-------+---+------------------------+ | **3** | **2** | **1** | | | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 0 | | Signalling integrity | | | | | | protection not needed | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 1 | | Signalling integrity | | | | | | protection preferred | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 0 | | Signalling integrity | | | | | | protection required | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 1 | | | +------------------------+-------+-------+---+------------------------+ | to Spare | | | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 0 | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 1 | | Reserved | +------------------------+-------+-------+---+------------------------+ | If the UE receives a | | | | | | signalling integrity | | | | | | protection policy | | | | | | value that the UE does | | | | | | not understand, the UE | | | | | | shall interpret the | | | | | | value as 010 | | | | | | \"Signalling integrity | | | | | | protection required\". | | | | | | | | | | | | Signalling ciphering | | | | | | policy (octet o89+1 | | | | | | bit 5 to 7): | | | | | +------------------------+-------+-------+---+------------------------+ | Bits | | | | | +------------------------+-------+-------+---+------------------------+ | **7** | **6** | **5** | | | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 0 | | Signalling ciphering | | | | | | not needed | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 1 | | Signalling ciphering | | | | | | preferred | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 0 | | Signalling ciphering | | | | | | required | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 1 | | | +------------------------+-------+-------+---+------------------------+ | to Spare | | | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 0 | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 1 | | Reserved | +------------------------+-------+-------+---+------------------------+ | If the UE receives a | | | | | | signalling ciphering | | | | | | policy value that the | | | | | | UE does not | | | | | | understand, the UE | | | | | | shall interpret the | | | | | | value as 010 | | | | | | \"Signalling ciphering | | | | | | required\". | | | | | | | | | | | | Bit 4 and 8 of octet | | | | | | o89+1 are spare and | | | | | | shall be coded as | | | | | | zero. | | | | | +------------------------+-------+-------+---+------------------------+ | User plane integrity | | | | | | protection policy | | | | | | (octet o89+2 bit 1 to | | | | | | 3): | | | | | +------------------------+-------+-------+---+------------------------+ | Bits | | | | | +------------------------+-------+-------+---+------------------------+ | **3** | **2** | **1** | | | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 0 | | User plane integrity | | | | | | protection not needed | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 1 | | User plane integrity | | | | | | protection preferred | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 0 | | User plane integrity | | | | | | protection required | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 1 | | | +------------------------+-------+-------+---+------------------------+ | to Spare | | | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 0 | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 1 | | Reserved | +------------------------+-------+-------+---+------------------------+ | If the UE receives a | | | | | | user plane integrity | | | | | | protection policy | | | | | | value that the UE does | | | | | | not understand, the UE | | | | | | shall interpret the | | | | | | value as 010 \"User | | | | | | plane integrity | | | | | | protection required\". | | | | | | | | | | | | User plane ciphering | | | | | | policy (octet o89+2 | | | | | | bit 5 to 7): | | | | | +------------------------+-------+-------+---+------------------------+ | Bits | | | | | +------------------------+-------+-------+---+------------------------+ | **7** | **6** | **5** | | | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 0 | | User plane ciphering | | | | | | not needed | +------------------------+-------+-------+---+------------------------+ | 0 | 0 | 1 | | User plane ciphering | | | | | | preferred | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 0 | | User plane ciphering | | | | | | required | +------------------------+-------+-------+---+------------------------+ | 0 | 1 | 1 | | | +------------------------+-------+-------+---+------------------------+ | to Spare | | | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 0 | | | +------------------------+-------+-------+---+------------------------+ | 1 | 1 | 1 | | Reserved | +------------------------+-------+-------+---+------------------------+ | If the UE receives a | | | | | | user plane ciphering | | | | | | policy value that the | | | | | | UE does not | | | | | | understand, the UE | | | | | | shall interpret the | | | | | | value as 010 \"User | | | | | | plane ciphering | | | | | | required\". | | | | | | | | | | | | Bit 4 and 8 of octet | | | | | | o89+2 are spare and | | | | | | shall be coded as | | | | | | zero. | | | | | +------------------------+-------+-------+---+------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of ProSe | octet o84+1 | | | | | | | | | identifier to | | | | | | | | | | default mode of | octet o84+2 | | | | | | | | | communication | | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o84+3)* | | | | | | | | | default mode of | | | | | | | | | | communication | octet o90* | | | | | | | | | mapping rule 1 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o90+1)* | | | | | | | | | default mode of | | | | | | | | | | communication | octet o91* | | | | | | | | | mapping rule 2 | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o91+1)* | | | | | | | | | | | | | | | | | | | | octet o92* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o92+1)* | | | | | | | | | default mode of | | | | | | | | | | communication | octet o85* | | | | | | | | | mapping rule n | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.4.2.37: ProSe identifier to default mode of communication mapping
rules
Table 5.4.2.37: ProSe identifier to default mode of communication mapping
rules
+----------------------------------------------------------------------+ | ProSe identifier to default mode of communication mapping rule: | | | | The ProSe identifier to default mode of communication mapping rule | | field is coded according to figure 5.4.2.38 and table 5.4.2.38. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-----+-------+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=====+=======+===+ | L | octet | | | | | | | | | ength | o90+1 | | | | | | | | | of | | | | | | | | | | ProSe | octet | | | | | | | | | ident | o90+2 | | | | | | | | | ifier | | | | | | | | | | to | | | | | | | | | | de | | | | | | | | | | fault | | | | | | | | | | mode | | | | | | | | | | of | | | | | | | | | | com | | | | | | | | | | munic | | | | | | | | | | ation | | | | | | | | | | ma | | | | | | | | | | pping | | | | | | | | | | rule | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-----+-------+---+ | ProSe | octet | | | | | | | | | i | o90+3 | | | | | | | | | denti | | | | | | | | | | fiers | octet | | | | | | | | | | o91-1 | | | | | | | | +-------+-------+-------+-------+-------+-------+-----+-------+---+ | 0 | 0 | 0 | 0 | 0 | 0 | DMC | octet | | | | | | | | | | o91 | | | Spare | Spare | Spare | Spare | Spare | Spare | | | | +-------+-------+-------+-------+-------+-------+-----+-------+---+
Figure 5.4.2.38: ProSe identifier to default mode of communication mapping
rule
Table 5.4.2.38: ProSe identifier to default mode of communication mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (o90+3 to o91-1): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifier to | | default mode of communication mapping rule, the ProSe identifier is | | coded as the default ProSe identifier (see table 5.4.2.14). | +======================================================================+ | Default mode of communication (DMC) (octet o91 bit 1 to 2): | | | | The DMC field indicates the default mode of communication. | | | | Bits | | | | **2 1** | | | | 0 0 unicast | | | | 0 1 groupcast | | | | 1 0 broadcast | | | | 1 1 spare | | | | If the DMC field is set to a spare value, the receiving entity shall | | ignore the ProSe application identifier to default mode of | | communication mapping rule. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to default mode of communication | | mapping rule contents field is bigger than indicated in | | figure 5.4.2.37, receiving entity shall ignore any superfluous | | octets located at the end of the ProSe identifier to default mode of | | communication mapping rule contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of ProSe | octet o85+1 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o85+2 | | | | | | | | | ID for groupcast | | | | | | | | | | mapping rules | | | | | | | | | | contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet o85+3 | | | | | | | | | destination layer-2 | | | | | | | | | | ID for groupcast | octet o851 | | | | | | | | | mapping rule 1 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o851+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for groupcast | octet o852* | | | | | | | | | mapping rule 2 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o852+1)* | | | | | | | | | | | | | | | | | | | | octet o853* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o853+1)* | | | | | | | | | destination layer-2 | | | | | | | | | | ID for groupcast | octet o86* | | | | | | | | | mapping rule n | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.39: ProSe identifier to destination layer-2 ID for groupcast
mapping rules
Table 5.4.2.39: ProSe identifier to destination layer-2 ID for groupcast
mapping rules
+----------------------------------------------------------------------+ | ProSe identifier to destination layer-2 ID for groupcast mapping | | rule (NOTE): | | | | The ProSe identifier to destination layer-2 ID for broadcast mapping | | rule field is coded according to figure 5.4.2.40 and table 5.4.2.40. | | The ProSe identifier to destination layer-2 ID for groupcast mapping | | rules field shall contain a default ProSe identifier to destination | | layer-2 ID for groupcast mapping rule for the ProSe services that do | | not have explicit mapping rules. | | | | NOTE: The default ProSe identifier to destination layer-2 ID for | | groupcast mapping rule should be the last one and with the lowest | | priority of the ProSe identifier to destination layer-2 ID for | | groupcast mapping rule field. | +----------------------------------------------------------------------+
+---------------------+--------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==============+===+===+===+===+===+===+===+ | Length of ProSe | octet o85+3 | | | | | | | | | identifier to | | | | | | | | | | destination layer-2 | octet o85+4 | | | | | | | | | ID for groupcast | | | | | | | | | | mapping rule | | | | | | | | | | contents | | | | | | | | | +---------------------+--------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o85+5 | | | | | | | | | | | | | | | | | | | | octet o854 | | | | | | | | +---------------------+--------------+---+---+---+---+---+---+---+ | Destination layer-2 | octet o854+1 | | | | | | | | | ID for groupcast | | | | | | | | | | | octet o851 | | | | | | | | +---------------------+--------------+---+---+---+---+---+---+---+
Figure 5.4.2.40: ProSe identifier to destination layer-2 ID for groupcast
mapping rule
Table 5.4.2.40: ProSe identifier to destination layer-2 ID for groupcast
mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (octet o85+5 to o854): | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe application | | requiring privacy, the ProSe identifier is coded as the default | | ProSe identifier (see table 5.4.2.14). | +======================================================================+ | Destination layer-2 ID for groupcast (octet o854+1 to o851): | | | | The destination layer-2 ID for groupcast field is a binary coded | | layer-2 identifier. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to destination layer-2 ID for | | groupcast mapping rule contents field is bigger than indicated in | | figure 5.4.2.40, receiving entity shall ignore any superfluous | | octets located at the end of the ProSe identifier to destination | | layer-2 ID for groupcast mapping rule contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of ProSe | octet o5+1 | | | | | | | | | application to path | | | | | | | | | | preference mapping | octet o5+2 | | | | | | | | | rules contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe application | octet (o5+3)* | | | | | | | | | to path preference | | | | | | | | | | mapping rule 1 | octet o150* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe application | octet (o150+1)* | | | | | | | | | to path preference | | | | | | | | | | mapping rule 2 | octet o151* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o151+1)* | | | | | | | | | | | | | | | | | | | | octet o152* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe application | octet (o152+1)* | | | | | | | | | to path preference | | | | | | | | | | mapping rule n | octet l* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.41: ProSe application to path preference mapping rules
Table 5.4.2.41: ProSe application to path preference mapping rules
+----------------------------------------------------------------------+ | ProSe application to path preference mapping rule (NOTE): | | | | The ProSe application to path preference mapping rule field is coded | | according to figure 5.4.2.42 and table 5.4.2.42. | +======================================================================+ | NOTE: The ProSe application to path preference mapping rule field is | | prioritized in decreasing order according to the local configuration | | of the network. The ProSe application to path preference mapping | | rule field with the service indication field set to value 1 \"For | | all ProSe services\", if present, is recommended to be the last one | | of the ProSe application to path preference mapping rules. | +----------------------------------------------------------------------+
+--------+--------+-------+-------+-------+----+----+--------+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+=======+=======+=======+====+====+========+===+ | Length | octet | | | | | | | | | of | o150+1 | | | | | | | | | ProSe | | | | | | | | | | appli | octet | | | | | | | | | cation | o150+2 | | | | | | | | | to | | | | | | | | | | path | | | | | | | | | | pref | | | | | | | | | | erence | | | | | | | | | | m | | | | | | | | | | apping | | | | | | | | | | rule | | | | | | | | | | co | | | | | | | | | | ntents | | | | | | | | | +--------+--------+-------+-------+-------+----+----+--------+---+ | 0 | 0 | 0 | 0 | 0 | SI | PP | octet | | | | | | | | | | o151 | | | Spare | Spare | Spare | Spare | Spare | | | | | +--------+--------+-------+-------+-------+----+----+--------+---+ | ProSe | octet | | | | | | | | | ident | o152* | | | | | | | | | ifiers | | | | | | | | | | | octet | | | | | | | | | | o18* | | | | | | | | +--------+--------+-------+-------+-------+----+----+--------+---+
Figure 5.4.2.42: ProSe application to path preference mapping rule
Table 5.4.2.42: ProSe application to path preference mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers (o152 to o18): | | | | If the service indication field is set to value 1 \"For all ProSe | | services\", the ProSe identifiers field shall not be included in | | ProSe application to path preference mapping rule field. | | | | If the service indication field is set to value 0 \"Not for all | | ProSe services\", the ProSe identifiers field is coded according to | | figure 5.4.2.14 and table 5.4.2.14. | +======================================================================+ | Path preference (PP) (octet o151 bit 1 to 2): | | | | The PP field indicates the path preference. | | | | Bits | | | | **2 1** | | | | 0 0 No preference | | | | 0 1 PC5 preferred | | | | 1 0 Uu preferred | | | | 1 1 spare | | | | If the PP field is set to a spare value, the receiving entity shall | | interpret as \"00\". | +----------------------------------------------------------------------+ | Service indication (SI) (octet o151 bit 3): | | | | The SI field indicates whether the path preference is for all ProSe | | services or not. | | | | Bits | | | | **3** | | | | 1 For all ProSe services | | | | 0 Not for all ProSe services | +----------------------------------------------------------------------+ | If the length of ProSe application to path preference mapping rule | | contents field is bigger than indicated in figure 5.4.2.42, | | receiving entity shall ignore any superfluous octets located at the | | end of the ProSe application to path preference mapping rule | | contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of ProSe | octet o10+1 | | | | | | | | | identifiers to NR | | | | | | | | | | Tx profile for | octet o10+2 | | | | | | | | | broadcast and | | | | | | | | | | groupcast mapping | | | | | | | | | | rules contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet (o10+3)* | | | | | | | | | to NR Tx profile | | | | | | | | | | for broadcast and | octet o103* | | | | | | | | | groupcast mapping | | | | | | | | | | rule 1 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet (o103+1)* | | | | | | | | | to NR Tx profile | | | | | | | | | | for broadcast and | octet o104* | | | | | | | | | groupcast mapping | | | | | | | | | | rule 2 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o104+1)* | | | | | | | | | | | | | | | | | | | | octet o105* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet (o105+1)* | | | | | | | | | to NR Tx profile | | | | | | | | | | for broadcast and | octet l* | | | | | | | | | groupcast mapping | | | | | | | | | | rule n | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.4.2.43: ProSe identifiers to NR Tx profile for broadcast and
groupcast mapping rules
Table 5.4.2.43: ProSe identifiers to NR Tx profile for broadcast and groupcast
mapping rules
+----------------------------------------------------------------------+ | ProSe identifiers to NR Tx profile for broadcast and groupcast | | mapping rule: | | | | The ProSe identifiers to NR Tx profile for broadcast and groupcast | | mapping rule field is coded according to figure 5.4.2.44 and | | table 5.4.2.44. | +======================================================================+ | | +----------------------------------------------------------------------+
+---------------------+--------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+====================+===+===+===+===+===+===+===+ | Length of ProSe | octet o103+1 | | | | | | | | | identifiers to NR | | | | | | | | | | Tx profile for | octet o103+2 | | | | | | | | | broadcast and | | | | | | | | | | groupcast mapping | | | | | | | | | | rule contents | | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+ | ProSe identifiers | octet o103+3 | | | | | | | | | | | | | | | | | | | | octet o1030 | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+ | NR Tx profile | octet o1030+1=o104 | | | | | | | | +---------------------+--------------------+---+---+---+---+---+---+---+
Figure 5.4.2.44: ProSe identifiers to NR Tx profile for broadcast and
groupcast mapping rule
Table 5.4.2.44: ProSe identifiers to NR Tx profile for broadcast and groupcast
mapping rule
+----------------------------------------------------------------------+ | ProSe identifiers: | | | | The ProSe identifiers field is coded according to figure 5.4.2.14 | | and table 5.4.2.14. In case of the default ProSe identifiers to NR | | Tx profile for broadcast and groupcast mapping rule, the ProSe | | identifier is coded as the default ProSe identifier (see | | table 5.4.2.14). | +======================================================================+ | | +----------------------------------------------------------------------+ | NR Tx profile: | +----------------------------------------------------------------------+ | The NR Tx profile field is coded as _SL-TxProfile-r17_ in clause 9.3 | | of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+
## 5.5 Encoding of UE policies for 5G ProSe UE-to-network relay UE
### 5.5.1 General
The UE policies for 5G ProSe UE-to-network relay UE are coded as shown in
figures 5.5.2.1 and table 5.5.2.1.
### 5.5.2 Information elements coding
+-----------+-----------+---+-----+-----------+---------+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========+===========+===+=====+===========+=========+===+===+===+ | 0 | 0 | 0 | PAI | ProSeP | octet k | | | | | | | | | info type | | | | | | | | | | = {UE | | | | | | | | | | policies | | | | | | | | | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | UE-t | | | | | | | | | | o-network | | | | | | | | | | relay UE} | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Spare | | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Length of | octet k+1 | | | | | | | | | ProSeP | | | | | | | | | | info | octet k+2 | | | | | | | | | contents | | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Validity | octet k+3 | | | | | | | | | timer | | | | | | | | | | | octet k+7 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Served by | octet k+8 | | | | | | | | | NG-RAN | | | | | | | | | | | octet o1 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Not | octet | | | | | | | | | served by | o1+1 | | | | | | | | | NG-RAN | | | | | | | | | | | octet o2 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Default | octet | | | | | | | | | de | o2+1 | | | | | | | | | stination | | | | | | | | | | layer-2 | octet o3 | | | | | | | | | IDs for | | | | | | | | | | sending | | | | | | | | | | the | | | | | | | | | | discovery | | | | | | | | | | s | | | | | | | | | | ignalling | | | | | | | | | | for | | | | | | | | | | ann | | | | | | | | | | ouncement | | | | | | | | | | and | | | | | | | | | | a | | | | | | | | | | dditional | | | | | | | | | | in | | | | | | | | | | formation | | | | | | | | | | and for | | | | | | | | | | receiving | | | | | | | | | | the | | | | | | | | | | discovery | | | | | | | | | | s | | | | | | | | | | ignalling | | | | | | | | | | for | | | | | | | | | | sol | | | | | | | | | | icitation | | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | User info | octet | | | | | | | | | ID for | o3+1 | | | | | | | | | discovery | | | | | | | | | | | octet | | | | | | | | | | o3+6 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | RSC info | octet | | | | | | | | | list | o3+7 | | | | | | | | | | | | | | | | | | | | octet o4 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | 5QI to | octet | | | | | | | | | PC5 QoS | o4+1 | | | | | | | | | p | | | | | | | | | | arameters | octet o5 | | | | | | | | | mapping | | | | | | | | | | rules | | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | ProSe | octet | | | | | | | | | i | o5+1 | | | | | | | | | dentifier | | | | | | | | | | to ProSe | octet o6 | | | | | | | | | ap | | | | | | | | | | plication | | | | | | | | | | server | | | | | | | | | | address | | | | | | | | | | mapping | | | | | | | | | | rules | | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | 5G PKMF | octet | | | | | | | | | address | (o6+1)* | | | | | | | | | in | | | | | | | | | | formation | octet l-2 | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+ | Privacy | octet l-1 | | | | | | | | | timer | | | | | | | | | | | octet l | | | | | | | | +-----------+-----------+---+-----+-----------+---------+---+---+---+
Figure 5.5.2.1: ProSeP Info = {UE policies for 5G ProSe UE-to-network relay
UE}
Table 5.5.2.1: ProSeP Info = {UE policies for 5G ProSe UE-to-network relay UE}
+----------------------------------------------------------------------+ | ProSeP info type (bit 1 to 4 of octet k) shall be set to \"0011\" | | (UE policies for 5G ProSe UE-to-network relay UE) | +======================================================================+ | PKMF address indication (PAI) (bit 5 of octet k) | +----------------------------------------------------------------------+ | The PAI indicates whether the 5G PKMF address information is | | included in the IE or not | +----------------------------------------------------------------------+ | Bit | +----------------------------------------------------------------------+ | **5** | +----------------------------------------------------------------------+ | 0 5G PKMF address information is not included | +----------------------------------------------------------------------+ | 1 5G PKMF address information is included | +----------------------------------------------------------------------+ | Length of ProSeP info contents (octets k+1 to k+2) indicates the | | length of ProSeP info contents. | +----------------------------------------------------------------------+ | Validity timer (octet k+3 to k+7): | | | | The validity timer field provides the expiration time of validity of | | the UE policies for 5G ProSe UE-to-network relay UE. The validity | | timer field is a binary coded representation of a UTC time, in | | seconds since midnight UTC of January 1, 1970 (not counting leap | | seconds). | +----------------------------------------------------------------------+ | Served by NG-RAN (octet k+8 to o1): | | | | The served by NG-RAN field is coded according to figure 5.5.2.2 and | | table 5.5.2.2, and contains configuration parameters for 5G ProSe | | UE-to-network relay UE when the UE is served by NG-RAN. | +----------------------------------------------------------------------+ | Not served by NG-RAN (octet o1+1 to o2): | | | | The not served by NG-RAN field is coded according to figure 5.5.2.5 | | and table 5.5.2.5, and contains configuration parameters for 5G | | ProSe UE-to-network relay discovery and communication when the UE is | | not served by NG-RAN. | +----------------------------------------------------------------------+ | Default destination layer-2 IDs for sending the discovery signalling | | for announcement and additional information and for receiving the | | discovery signalling for solicitation (octet o2+1 to o3): | | | | The default destination layer-2 IDs for sending the discovery | | signalling for announcement and additional information and for | | receiving the discovery signalling for solicitation is coded | | according to figure 5.5.2.11b and table 5.5.2.11b and contains a | | list of the default destination layer-2 IDs for the initial | | UE-to-network relay discovery signalling. | +----------------------------------------------------------------------+ | User info ID for discovery (octet o3+1 to o3+6): | | | | The value of the User info ID parameter is a 48-bit long bit string. | | The format of the User info ID parameter is out of scope of this | | specification. | +----------------------------------------------------------------------+ | RSC info list (octet o3+7 to o4): | | | | The RSC info list field is coded according to figure 5.5.2.12 and | | table 5.5.2.12 and contains the RSCs related paramters. | +----------------------------------------------------------------------+ | 5QI to PC5 QoS parameters mapping rules (octet o4+1 to o5): | | | | The 5QI to PC5 QoS parameters mapping rules field is coded according | | to figure 5.5.2.17 and table 5.5.2.17 and contains the 5QI to PC5 | | QoS parameters mapping rules. | +----------------------------------------------------------------------+ | ProSe identifier to ProSe application server address mapping rules | | (octet o5+1 to o6): | | | | The ProSe identifier to ProSe application server address mapping | | rules field is coded according to figure 5.5.2.19 and table 5.5.2.19 | | and contains the ProSe identifier to ProSe application server | | address mapping rules. | +----------------------------------------------------------------------+ | Privacy timer (octet l-1 to l): | | | | The privacy timer field contains binary encoded duration, in units | | of seconds, after which the UE shall change the source layer-2 ID | | self-assigned by the UE while performing transmission of 5G ProSe | | direct communication. | +----------------------------------------------------------------------+ | If the length of ProSeP info contents field is bigger than indicated | | in figure 5.5.2.1, receiving entity shall ignore any superfluous | | octets located at the end of the ProSeP info contents. | +----------------------------------------------------------------------+ | 5G PKMF address information (octet o6+1 to l-2) | | | | 5G PKMF address information contains the IPv4 address(es), IPv6 | | address(es) and/or FQDN of the 5G PKMF and is coded according to | | figure 5.5.2.21, figure 5.5.2.22, figure 5.5.2.23 and table | | 5.5.2.21. At least one of the address parameters (FQDN, IPv4 address | | list or IPv6 address list) shall be included. | +----------------------------------------------------------------------+
+-------------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========================================+=================+===+===+===+===+===+===+===+ | Length of served by NG-RAN contents | octet k+8 | | | | | | | | | | | | | | | | | | | | octet k+9 | | | | | | | | +-------------------------------------------+-----------------+---+---+---+---+---+---+---+ | Authorized PLMN list for layer-3 relay UE | octet (k+10)* | | | | | | | | | | | | | | | | | | | | octet o50* | | | | | | | | +-------------------------------------------+-----------------+---+---+---+---+---+---+---+ | Authorized PLMN list for layer-2 relay UE | octet (o50+1)* | | | | | | | | | | | | | | | | | | | | octet o1* | | | | | | | | +-------------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.5.2.2: Served by NG-RAN
Table 5.5.2.2: Served by NG-RAN
+----------------------------------------------------------------------+ | Authorized PLMN list for layer-3 relay UE: | | | | The authorized PLMN list for layer-3 relay UE field is coded | | according to figure 5.5.2.3 and table 5.5.2.3. | +======================================================================+ | | +----------------------------------------------------------------------+ | Authorized PLMN list for layer-2 relay UE: | | | | The authorized PLMN list for layer-2 relay UE field is coded | | according to figure 5.5.2.3 and table 5.5.2.3. | +----------------------------------------------------------------------+
+-----------------------------------------+-----------------+ | Length of authorized PLMN list contents | octet k+10 | | | | | | octet k+11 | +=========================================+=================+ | Authorized PLMN 1 | octet (k+12)* | | | | | | octet (k+14)* | +-----------------------------------------+-----------------+ | Authorized PLMN 2 | octet (k+15)* | | | | | | octet (k+17)* | +-----------------------------------------+-----------------+ | ... | octet (k+18)* | | | | | | octet (o50-3)* | +-----------------------------------------+-----------------+ | Authorized PLMN n | octet (o50-2)* | | | | | | octet o50* | +-----------------------------------------+-----------------+
Figure 5.5.2.3: Authorized PLMN list
Table 5.5.2.3: Authorized PLMN list
+----------------------------------------------------------------------+ | Authorized PLMN: | | | | The authorized PLMN field is coded according to figure 5.5.2.4 and | | table 5.5.2.4. | +======================================================================+ | | +----------------------------------------------------------------------+
8 7 6 5 4 3 2 1
* * *
MCC digit 2 MCC digit 1 octet k+15  
MNC digit 3 MCC digit 3 octet k+16  
MNC digit 2 MNC digit 1 octet k+17
Figure 5.5.2.4: PLMN ID
Table 5.5.2.4: PLMN ID
+----------------------------------------------------------------------+ | Mobile country code (MCC) (octet k+15, octet k+16 bit 1 to 4): | | | | The MCC field is coded as in ITU-T Recommendation E.212 [5], | | annex A. | +======================================================================+ | Mobile network code (MNC) (octet k+16 bit 5 to 8, octet k+17): | | | | The coding of MNC field is the responsibility of each administration | | but BCD coding shall be used. The MNC shall consist of 2 or 3 | | digits. If a network operator decides to use only two digits in the | | MNC, MNC digit 3 shall be coded as \"1111\". | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of not | octet o1+1 | | | | | | | | | served by NG-RAN | | | | | | | | | | contents | octet o1+2 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | NR radio parameters | octet o1+3 | | | | | | | | | per geographical | | | | | | | | | | area list for | octet o51 | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | NR radio parameters | octet o51+1 | | | | | | | | | per geographical | | | | | | | | | | area list for | octet o10 | | | | | | | | | UE-to-network relay | | | | | | | | | | communication | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX | octet o10+1 | | | | | | | | | configuration for | | | | | | | | | | UE-to-network relay | octet o2 | | | | | | | | | discovery | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.5.2.5: Not served by NG-RAN
Table 5.5.2.5: Not served by NG-RAN
+----------------------------------------------------------------------+ | NR radio parameters per geographical area list for UE-to-network | | relay discovery (octet o1+3 to o51): | | | | The NR radio parameters per geographical area list for UE-to-network | | relay discovery field is coded according to figure 5.5.2.6 and | | table 5.5.2.6. | +======================================================================+ | NR radio parameters per geographical area list for UE-to-network | | relay communication (octet o51+1 to o2): | | | | The NR radio parameters per geographical area list for UE-to-network | | relay communication field is coded according to figure 5.5.2.7 and | | table 5.5.2.7. | +----------------------------------------------------------------------+ | Default PC5 DRX configuration for UE-to-network relay discovery | | (octet o10+1 to o2): | | | | The default PC5 DRX configuration for UE-to-network relay discovery | | field is coded according to figure 5.5.2.11a and table 5.5.2.11a. | +----------------------------------------------------------------------+ | If the length of not served by NG-RAN contents field is bigger than | | indicated in figure 5.5.2.5, receiving entity shall ignore any | | superfluous octets located at the end of the not served by NG-RAN | | contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of NR radio | octet o1+3 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o1+4 | | | | | | | | | list for | | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet o1+5 | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o510 | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o510+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o511* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o511+1)* | | | | | | | | | | | | | | | | | | | | octet o512* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o512+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o51* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.5.2.6: NR radio parameters per geographical area list for UE-to-
network relay discovery
Table 5.5.2.6: NR radio parameters per geographical area list for UE-to-
network relay discovery
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.5.2.8 and table 5.5.2.8. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of NR radio | octet o51+1 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o51+2 | | | | | | | | | list for | | | | | | | | | | UE-to-network relay | | | | | | | | | | communication | | | | | | | | | | contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet o51+3 | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o513 | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o513+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o514* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o514+1)* | | | | | | | | | | | | | | | | | | | | octet o515* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o515+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o10* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.5.2.7: NR radio parameters per geographical area list for UE-to-
network relay communication
Table 5.5.2.7: NR radio parameters per geographical area list for UE-to-
network relay communication
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.5.2.8 and table 5.5.2.8. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o | | | | | | | | | of | 510+1 | | | | | | | | | radio | | | | | | | | | | param | octet | | | | | | | | | eters | o | | | | | | | | | per | 510+2 | | | | | | | | | ge | | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ge | octet | | | | | | | | | ograp | o | | | | | | | | | hical | 510+3 | | | | | | | | | area | | | | | | | | | | | octet | | | | | | | | | | o5100 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Radio | octet | | | | | | | | | param | o5 | | | | | | | | | eters | 100+1 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o | | | | | | | | | | 511-1 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MI | 0 | 0 | 0 | 0 | 0 | 0 | 0 | octet | | | | | | | | | | o511 | | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 5.5.2.8: Radio parameters per geographical area info
Table 5.5.2.8: Radio parameters per geographical area info
+----------------------------------------------------------------------+ | Geographical area (octet o510+3 to o5100): | | | | The geographical area field is coded according to figure 5.5.2.9 and | | table 5.5.2.9. | +======================================================================+ | Radio parameters (octet o5100+1 to o511-1): | | | | The radio parameters field is coded according to figure 5.3.2.11 and | | table 5.3.2.11, applicable in the geographical area indicated by the | | geographical area field when not served by NG-RAN. | +----------------------------------------------------------------------+ | Managed indicator (MI) (octet o511 bit 8): | | | | The managed indicator indicates how the radio parameters indicated | | in the radio parameters field in the geographical area indicated by | | the geographical area field are managed. | | | | Bit | | | | **8** | | | | 0 Non-operator managed | | | | 1 Operator managed | +----------------------------------------------------------------------+ | If the length of radio parameters per geographical area contents | | field is bigger than indicated in figure 5.5.2.8, receiving entity | | shall ignore any superfluous octets located at the end of the radio | | parameters per geographical area contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet o510+3 | | | | | | | | | geographical area | | | | | | | | | | contents | octet o510+4 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 1 | octet (o510+5)* | | | | | | | | | | | | | | | | | | | | octet (o510+10)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 2 | octet (o510+11)* | | | | | | | | | | | | | | | | | | | | octet (o510+16)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (o510+17)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o510-2+6*n)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate n | octet | | | | | | | | | | (o510-1+6*n)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o510+4+6*n)* = | | | | | | | | | | octet o5100* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.5.2.9: Geographical area
Table 5.5.2.9: Geographical area
+----------------------------------------------------------------------+ | Coordinate: | | | | The coordinate field is coded according to figure 5.5.2.10 and | | table 5.5.2.10. | +----------------------------------------------------------------------+
+-----------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========+===============+===+===+===+===+===+===+===+ | Latitude | octet o510+11 | | | | | | | | | | | | | | | | | | | | octet o510+13 | | | | | | | | +-----------+---------------+---+---+---+---+---+---+---+ | Longitude | octet o510+14 | | | | | | | | | | | | | | | | | | | | octet o510+17 | | | | | | | | +-----------+---------------+---+---+---+---+---+---+---+
Figure 5.5.2.10: Coordinate area
Table 5.5.2.10: Coordinate area
+----------------------------------------------------------------------+ | Latitude (octet o510+11 to o510+13): | | | | The latitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +======================================================================+ | Longitude (octet o510+14 to o510+17): | | | | The longitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +----------------------------------------------------------------------+
+-------------------------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+===============+===+===+===+===+===+===+===+ | Length of radio parameters contents | octet o5100+1 | | | | | | | | | | | | | | | | | | | | octet o5100+2 | | | | | | | | +-------------------------------------+---------------+---+---+---+---+---+---+---+ | Radio parameters contents | octet o5100+3 | | | | | | | | | | | | | | | | | | | | octet o511-1 | | | | | | | | +-------------------------------------+---------------+---+---+---+---+---+---+---+
Figure 5.5.2.11: Radio parameters
Table 5.5.2.11: Radio parameters
+----------------------------------------------------------------------+ | Radio parameters contents: | | | | Radio parameters are defined as _SL-PreconfigurationNR_ in | | clause 9.3 of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of default | octet o10+1 | | | | | | | | | PC5 DRX | | | | | | | | | | configuration for | octet o10+2 | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX | octet o10+3 | | | | | | | | | configuration for | | | | | | | | | | UE-to-network relay | octet o2 | | | | | | | | | discovery contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.5.2.11a: Default PC5 DRX configuration for UE-to-network relay
discovery
Table 5.5.2.11a: Default PC5 DRX configuration for UE-to-network relay
discovery
+----------------------------------------------------------------------+ | Default PC5 DRX configuration contents for UE-to-network relay | | discovery: | | | | Default PC5 DRX configuration for UE-to-network relay discovery | | field is coded as _sl-DefaultDRX-GC-BC-r17_ in clause 6.3.5 of | | 3GPP TS 38.331 [7]. | +======================================================================+ | | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of default | octet o2+1 | | | | | | | | | destination layer-2 | | | | | | | | | | IDs for sending the | octet o2+2 | | | | | | | | | discovery | | | | | | | | | | signalling for | | | | | | | | | | announcement and | | | | | | | | | | additional | | | | | | | | | | information and for | | | | | | | | | | receiving the | | | | | | | | | | discovery | | | | | | | | | | signalling for | | | | | | | | | | solicitation | | | | | | | | | | contents | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet o2+3 | | | | | | | | | layer-2 ID 1 | | | | | | | | | | | octet o2+5 | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet (o2+6)* | | | | | | | | | layer-2 ID 2 | | | | | | | | | | | octet (o2+8)* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | ... | octet (o2+9)* | | | | | | | | | | | | | | | | | | | | octet (o3-3)* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet (o3-2)* | | | | | | | | | layer-2 ID n | | | | | | | | | | | octet o3* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.5.2.11b: Default destination layer-2 IDs for sending the discovery
signalling for announcement and additional information and for receiving the
discovery signalling for solicitation
Table 5.5.2.11b: Default destination layer-2 IDs for sending the discovery
signalling for announcement and additional information and for receiving the
discovery signalling for solicitation
+-----------------------------------------------------------------+ | Default destination layer-2 ID (octet o2+3 to o2+5): | | | | The default destination layer-2 ID is a 24-bit long bit string. | +-----------------------------------------------------------------+
+----------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==================================+=================+===+===+===+===+===+===+===+ | Length of RSC info list contents | octet o3+7 | | | | | | | | | | | | | | | | | | | | octet o3+8 | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info 1 | octet o3+9 | | | | | | | | | | | | | | | | | | | | octet o52 | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info 2 | octet (o52+1)* | | | | | | | | | | | | | | | | | | | | octet (o53)* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o53+1)* | | | | | | | | | | | | | | | | | | | | octet (o54)* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info n | octet (o54+1)* | | | | | | | | | | | | | | | | | | | | octet o4* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.5.2.12: RSC info list
Table 5.5.2.12: RSC info list
+----------------------------------------------------------------------+ | RSC info: | | | | The RSC info field is coded according to figure 5.5.2.13 and | | table 5.5.2.13. | +----------------------------------------------------------------------+
+--------+--------+-------+-------+-------+------+----+--------+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+=======+=======+=======+======+====+========+===+ | Length | octet | | | | | | | | | of RSC | o52+1 | | | | | | | | | info | | | | | | | | | | co | octet | | | | | | | | | ntents | o52+2 | | | | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+ | RSC | octet | | | | | | | | | list | o52+3 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o520 | | | | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+ | Se | octet | | | | | | | | | curity | o520+1 | | | | | | | | | r | | | | | | | | | | elated | octet | | | | | | | | | para | o511 | | | | | | | | | meters | | | | | | | | | | for | | | | | | | | | | dis | | | | | | | | | | covery | | | | | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+ | 0 | 0 | 0 | 0 | 0 | CPSI | LI | octet | | | | | | | | | | o511+1 | | | Spare | Spare | Spare | Spare | Spare | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+ | NR-PC5 | octet | | | | | | | | | U | (o | | | | | | | | | E-to-n | 511+2) | | | | | | | | | etwork | | | | | | | | | | relay | octet | | | | | | | | | se | o530 | | | | | | | | | curity | | | | | | | | | | po | | | | | | | | | | licies | | | | | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+ | PDU | octet | | | | | | | | | s | (o53 | | | | | | | | | ession | 0+1)* | | | | | | | | | para | | | | | | | | | | meters | octet | | | | | | | | | for | o53* | | | | | | | | | l | | | | | | | | | | ayer-3 | | | | | | | | | | relay | | | | | | | | | | UE | | | | | | | | | +--------+--------+-------+-------+-------+------+----+--------+---+
Figure 5.5.2.13: RSC info
Table 5.5.2.13: RSC info
+----------------------------------------------------------------------+ | RSC list (octet o52+3 to o520): | | | | The RSC list field is coded according to figure 5.5.2.14 and | | table 5.5.2.14. | +======================================================================+ | Security related parameters for discovery (octet o520+1 to o511): | | | | The security related parameters for discovery field contains the | | security related parameters for discovery used when the security | | procedure over control plane as specified in 3GPP TS 33.503 [13] | | is used and is coded according to figure 5.5.2.15 and | | table 5.5.2.15. | +----------------------------------------------------------------------+ | Layer indication (LI) (octet o511+1 bit 1 to 2): | | | | Bits | | | | 2 1 | | | | 0 1 Layer 3 | | | | 1 0 Layer 2 | | | | The other values are reserved. | +----------------------------------------------------------------------+ | If LI is set to \"Layer 3\", the PDU session parameters for layer-3 | | relay UE is included in the RSC info, otherwise the PDU session | | parameters for layer-3 relay UE is not included. | +----------------------------------------------------------------------+ | Control plane security indication (CPSI) (octet o511+1 bit 3): | | | | The control plane security indication field indicates whether to use | | the security procedure over control plane as specified in | | 3GPP TS 33.503 [13] or not. | +----------------------------------------------------------------------+ | Bit | +----------------------------------------------------------------------+ | 3 | +----------------------------------------------------------------------+ | 0 security procedure over control plane is not used | +----------------------------------------------------------------------+ | 1 security procedure over control plane is used | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | NR-PC5 UE-to-network relay security policies (octet o511+2 to o530): | | | | The NR-PC5 UE-to-network relay security policies is coded as the | | NR-PC5 unicast security policies defined in figure 5.4.2.34 and | | table 5.4.2.34. | +----------------------------------------------------------------------+ | PDU session parameters for layer-3 relay UE (octet o530+1 to octet | | o53) | | | | The PDU session parameters for layer-3 relay UE field is coded | | according to figure 5.5.2.16 and table 5.5.2.16. | +----------------------------------------------------------------------+
+-----------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=============================+==================+===+===+===+===+===+===+===+ | Length of RSC list contents | octet o52+3 | | | | | | | | | | | | | | | | | | | | octet o52+4 | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC 1 | octet o52+5 | | | | | | | | | | | | | | | | | | | | octet o52+7 | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC 2 | octet (o52+8)* | | | | | | | | | | | | | | | | | | | | octet (o52+10)* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o52+11)* | | | | | | | | | | | | | | | | | | | | octet (o520-3)* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC n | octet (o520-2)* | | | | | | | | | | | | | | | | | | | | octet o520* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.5.2.14: RSC list
Table 5.5.2.14: RSC list
+----------------------------------------------------------------------+ | RSC (octet o52+5 to o52+7): | | | | The RSC identifies a connectivity service the UE-to-Network relay | | provides. The value of the RSC is a 24-bit long bit string. The | | values of the RSC from \"000001\" to \"00000F\" in hexadecimal | | representation are spare and shall not be used in this release of | | specification. The UE shall ignore the spare values of the RSC in | | this release of specification together with their associated | | parameters received in the RSC info field. For all other values, the | | format of the RSC is out of scope of this specification. | +----------------------------------------------------------------------+
+--------------------------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +============================================+==================+===+===+===+===+===+===+===+ | Security related parameters validity timer | octet o520+1 | | | | | | | | | | | | | | | | | | | | octet o520+5 | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+ | Code-sending security parameters | octet (o520+6)* | | | | | | | | | | | | | | | | | | | | octet o524* | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+ | Code-receiving security parameters | octet (o524+1)* | | | | | | | | | | | | | | | | | | | | octet o511* | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.5.2.15: Security related parameters for discovery
+-------------------+------------------+-------+-------+--------------+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===================+==================+=======+=======+==============+===+===+===+===+ | Spare | PDUCK | PDUIK | PDUSK | octet o520+6 | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUSK | octet (o520+7)* | | | | | | | | | | | | | | | | | | | | octet o521* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUIK | octet (o521+1)* | | | | | | | | | | | | | | | | | | | | octet o522* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUCK | octet (o522+1)* | | | | | | | | | | | | | | | | | | | | octet o523* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | Encrypted bitmask | octet (o523+1)* | | | | | | | | | | | | | | | | | | | | octet o524* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+
Figure 5.5.2.15a: Code-sending security parameters
+-------------------+------------------+-------+-------+--------------+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===================+==================+=======+=======+==============+===+===+===+===+ | Spare | PDUCK | PDUIK | PDUSK | octet o524+1 | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUSK | octet (o524+2)* | | | | | | | | | | | | | | | | | | | | octet o525* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUIK | octet (o525+1)* | | | | | | | | | | | | | | | | | | | | octet o526* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUCK | octet (o526+1)* | | | | | | | | | | | | | | | | | | | | octet o527* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | Encrypted bitmask | octet (o527+1)* | | | | | | | | | | | | | | | | | | | | octet o511* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+
Figure 5.5.2.15b: Code-receiving security parameters
Table 5.5.2.15: Security related parameters for discovery
Security related parameters validity timer:
* * *
The security related parameters validity timer field provides the expiration
time of validity of the security related parameters for discovery. The
security related parameters validity timer field is a binary coded
representation of a UTC time, in seconds since midnight UTC of January 1, 1970
(not counting leap seconds). Code-sending security parameters: The code-
sending security parameters field contains the security parameters needed by a
sending UE to protect a 5G ProSe direct discovery message over PC5 interface
as specified in 3GPP TS 33.503 [13]. Code-receiving security parameters The
code-receiving security parameters field contains the security parameters
needed by a receiving UE to process a 5G ProSe direct discovery message over
PC5 interface as specified in 3GPP TS 33.503 [13]. Presence of DUSK (PDUSK):
PDUSK indicates whether the DUSK field is present or not. Bit **1** 0 DUSK
field is not included 1 DUSK field is included Presence of DUIK (PDUIK): PDUIK
indicates whether the DUIK field is present or not. Bit **2** 0 DUIK field is
not included 1 DUIK field is included Presence of DUCK (PDUCK): PDUCK
indicates whether the DUCK field and the encrypted bitmask field are present
or not. Bot **3** 0 DUCK and encrypted bitmask fields are not included 1 DUCK
and encrypted bitmask fields are included DUSK: The DUSK field contains the
value of the DUSK. The use of the DUSK is defined in 3GPP TS 33.503 [13].
DUIK: The DUIK field contains the value of the DUIK. The use of the DUIK is
defined in 3GPP TS 33.503 [13]. DUCK: The DUCK field contains the value of the
DUCK. The use of the DUCK is defined in 3GPP TS 33.503 [13]. Encrypted
bitmask: The encrypted bitmask field contains the value of the encrypted
bitmask, which is a 184-bit bitmask which uses bit \"1\" to mark the positions
of the bits for which the DUCK encryption is applied.
+--------+--------+--------+--------+------+--------+--------+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+========+========+======+========+========+===+===+ | Length | octet | | | | | | | | | of PDU | o530+1 | | | | | | | | | s | | | | | | | | | | ession | octet | | | | | | | | | para | o530+2 | | | | | | | | | meters | | | | | | | | | | for | | | | | | | | | | l | | | | | | | | | | ayer-3 | | | | | | | | | | relay | | | | | | | | | | UE | | | | | | | | | | co | | | | | | | | | | ntents | | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | Spare | PATP | PSSCM | P | PDNN | PDU | octet | | | | | | | SNSSAI | | s | o530+3 | | | | | | | | | ession | | | | | | | | | | type | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | DNN | octet | | | | | | | | | | o530+4 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o531 | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | S | octet | | | | | | | | | -NSSAI | (o53 | | | | | | | | | | 1+1)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o5 | | | | | | | | | | 3-1)* | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | Spare | Access | SSC | octet | | | | | | | | type | mode | o53* | | | | | | | | pref | | | | | | | | | | erence | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+
Figure 5.5.2.16: PDU session parameters for layer-3 relay UE
Table 5.5.2.16: PDU session parameters for layer-3 relay UE
+----------------------------------+----------------------------------+ | PDU session type (bits 3 to 1 of | | | octet o530+3): | | | | | | The PDU session type field shall | | | be encoded as the PDU session | | | type value part of the PDU | | | session type information element | | | defined in clause 9.11.4.11 of | | | 3GPP TS 24.501 [4]. | | +==================================+==================================+ | Presence of DNN (PDNN) (bit 4 of | | | octet o530+3) | | +----------------------------------+----------------------------------+ | PDNN indicates whether the DNN | | | field is present or not, and it | | | shall be set to 1. | | +----------------------------------+----------------------------------+ | Presence of S-NSSAI (PSNSSAI) | | | (bit 5 of octet o53+3) | | +----------------------------------+----------------------------------+ | PSNSSAI indicates whether the | | | S-NSSAI field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **5** | | +----------------------------------+----------------------------------+ | 0 | S-NSSAI field is not included | +----------------------------------+----------------------------------+ | 1 | S-NSSAI field is included | +----------------------------------+----------------------------------+ | Presence of SSC mode (PSSCM) | | | (bit 6 of octet o530+3) | | +----------------------------------+----------------------------------+ | PSSCM indicates whether the SSC | | | mode field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **6** | | +----------------------------------+----------------------------------+ | 0 | SSC mode field is not included | | | (NOTE) | +----------------------------------+----------------------------------+ | 1 | SSC mode field is included | +----------------------------------+----------------------------------+ | Presence of access type | | | preference (PATP) (bit 7 of | | | octet o530+3) | | +----------------------------------+----------------------------------+ | PATP indicates whether the | | | access type preference mode | | | field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **7** | | +----------------------------------+----------------------------------+ | 0 | Access type preference field is | | | not included (NOTE) | +----------------------------------+----------------------------------+ | 1 | Access type preference field is | | | included | +----------------------------------+----------------------------------+ | DNN (octet o530+4 to o531): | | | | | | The DNN field shall be encoded | | | as a sequence of a one octet DNN | | | length field and a DNN value | | | field of a variable size. The | | | DNN value contains an APN as | | | defined in | | | 3GPP TS 23.003 [10]. | | +----------------------------------+----------------------------------+ | S-NSSAI (octet o531+1 to o53-1): | | | | | | The S-NSSAI field shall be | | | encoded as a sequence of a one | | | octet S-NSSAI length field and | | | an S-NSSAI value field of a | | | variable size. The S-NSSAI value | | | shall be encoded as the value | | | part of the S-NSSAI information | | | element defined in | | | clause 9.11.2.8 of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | SSC mode (bits 3 to 1 of octet | | | o53): | | | | | | The SSC mode field shall be | | | encoded as the value part of the | | | SSC mode information element | | | defined in clause 9.11.4.16 of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | Access type preference (bits 5 | | | to 4 of octet o53): | | | | | | The access type preference field | | | shall be encoded as the value | | | part of the access type | | | information element defined in | | | clause 9.11.2.1A of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | NOTE: Since SSC mode field and | | | access type preference field are | | | coded in the same octet, this | | | octet is not included only when | | | both PSSCM and PATP are set to | | | 0. | | +----------------------------------+----------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of 5QI to | octet o4+1 | | | | | | | | | PC5 QoS parameters | | | | | | | | | | mapping rules | octet o4+2 | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | 5QI to PC5 QoS | octet o4+3 | | | | | | | | | parameters mapping | | | | | | | | | | rule 1 | octet o55 | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | 5QI to PC5 QoS | octet (o55+1)* | | | | | | | | | parameters mapping | | | | | | | | | | rule 2 | octet o56* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o56+1)* | | | | | | | | | | | | | | | | | | | | octet o57* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | 5QI to PC5 QoS | octet (o57+1)* | | | | | | | | | parameters mapping | | | | | | | | | | rule n | octet o5* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.5.2.17: 5QI to PC5 QoS parameters mapping rules
Table 5.5.2.17: 5QI to PC5 QoS parameters mapping rules
+----------------------------------------------------------------------+ | 5QI to PC5 QoS parameters mapping rule: | | | | The 5QI to PC5 QoS parameters mapping rule field is coded according | | to figure 5.5.2.18 and table 5.5.2.18 and contains the 5QI to PC5 | | QoS parameters mapping rule. | +----------------------------------------------------------------------+
+---------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=================+===+===+===+===+===+===+===+ | Length of 5QI to | octet o55+1 | | | | | | | | | PC5 QoS parameters | | | | | | | | | | mapping rule | octet o55+2 | | | | | | | | | contents | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | 5QI | octet o55+3 | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | PQI | octet o55+4 | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | PDB adjustment | octet o55+5 | | | | | | | | | factor | | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+ | RSC list | octet (o55+6)* | | | | | | | | | | | | | | | | | | | | octet o56* | | | | | | | | +---------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.5.2.18: 5QI to PC5 QoS parameters mapping rule
Table 5.5.2.18: 5QI to PC5 QoS parameters mapping rule
+----------------------------------------------------------------------+ | 5QI (octet o55+3): | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 Reserved | | | | 0 0 0 0 0 0 0 1 5QI 1 | | | | 0 0 0 0 0 0 1 0 5QI 2 | | | | 0 0 0 0 0 0 1 1 5QI 3 | | | | 0 0 0 0 0 1 0 0 5QI 4 | | | | 0 0 0 0 0 1 0 1 5QI 5 | | | | 0 0 0 0 0 1 1 0 5QI 6 | | | | 0 0 0 0 0 1 1 1 5QI 7 | | | | 0 0 0 0 1 0 0 0 5QI 8 | | | | 0 0 0 0 1 0 0 1 5QI 9 | | | | 0 0 0 0 1 0 1 0 5QI 10 | | | | 0 0 0 0 1 0 1 1 | | | | to Spare | | | | 0 1 0 0 0 0 0 0 | | | | 0 1 0 0 0 0 0 1 5QI 65 | | | | 0 1 0 0 0 0 1 0 5QI 66 | | | | 0 1 0 0 0 0 1 1 5QI 67 | | | | 0 1 0 0 0 1 0 0 Spare | | | | 0 1 0 0 0 1 0 1 5QI 69 | | | | 0 1 0 0 0 1 1 0 5QI 70 | | | | 0 1 0 0 0 1 1 1 5QI 71 | | | | 0 1 0 0 1 0 0 0 5QI 72 | | | | 0 1 0 0 1 0 0 1 5QI 73 | | | | 0 1 0 0 1 0 1 0 5QI 74 | | | | 0 1 0 0 1 0 1 1 5QI 75 | | | | 0 1 0 0 1 1 0 0 5QI 76 | | | | 0 1 0 0 1 1 0 1 | | | | to Spare | | | | 0 1 0 0 1 1 1 0 | | | | 0 1 0 0 1 1 1 1 5QI 79 | | | | 0 1 0 1 0 0 0 0 5QI 80 | | | | 0 1 0 1 0 0 0 1 Spare | | | | 0 1 0 1 0 0 1 0 5QI 82 | | | | 0 1 0 1 0 0 1 1 5QI 83 | | | | 0 1 0 1 0 1 0 0 5QI 84 | | | | 0 1 0 1 0 1 0 1 5QI 85 | | | | 0 1 0 1 0 1 1 0 5QI 86 | | | | 0 1 0 1 0 1 1 1 | | | | to Spare | | | | 0 1 1 1 1 1 1 1 | | | | 1 0 0 0 0 0 0 0 | | | | to Operator-specific 5QIs | | | | 1 1 1 1 1 1 1 0 | | | | 1 1 1 1 1 1 1 1 Reserved | +======================================================================+ | | +----------------------------------------------------------------------+ | PQI (octet o55+4): | | | | Bits | | | | **8 7 6 5 4 3 2 1** | | | | 0 0 0 0 0 0 0 0 Reserved | | | | 0 0 0 0 0 0 0 1 | | | | to Spare | | | | 0 0 0 1 0 1 0 0 | | | | 0 0 0 1 0 1 0 1 PQI 21 | | | | 0 0 0 1 0 1 1 0 PQI 22 | | | | 0 0 0 1 0 1 1 1 PQI 23 | | | | 0 0 0 1 1 0 0 0 PQI 24 | | | | 0 0 0 1 1 0 0 1 PQI 25 | | | | 0 0 0 1 1 0 1 0 PQI 26 | | | | 0 0 0 1 1 0 1 1 | | | | to Spare | | | | 0 0 1 1 0 1 1 0 | | | | 0 0 1 1 0 1 1 1 PQI 55 | | | | 0 0 1 1 1 0 0 0 PQI 56 | | | | 0 0 1 1 1 0 0 1 PQI 57 | | | | 0 0 1 1 1 0 1 0 PQI 58 | | | | 0 0 1 1 1 0 1 1 PQI 59 | | | | 0 0 1 1 1 1 0 0 PQI 60 | | | | 0 0 1 1 1 1 0 1 PQI 61 | | | | 0 0 1 1 1 1 1 0 | | | | to Spare | | | | 0 1 0 1 1 0 0 1 | | | | 0 1 0 1 1 0 1 0 PQI 90 | | | | 0 1 0 1 1 0 1 1 PQI 91 | | | | 0 1 0 1 1 1 0 0 PQI 92 | | | | 0 1 0 1 1 1 0 1 PQI 93 | | | | 0 1 0 1 1 1 1 0 | | | | to Spare | | | | 0 1 1 1 1 1 1 1 | | | | 1 0 0 0 0 0 0 0 | | | | to Operator-specific PQIs | | | | 1 1 1 1 1 1 1 0 | | | | 1 1 1 1 1 1 1 1 Reserved | +----------------------------------------------------------------------+ | PDB adjustment factor (octet o55+5): | | | | The PDB adjustment factor field is a binary coded representation of | | a percentage of the standardized PDB identified by the PQI. | +----------------------------------------------------------------------+ | RSC list (octet o55+6 to o56): | | | | The RSC list field is coded according to figure 5.5.2.14 and | | table 5.5.2.14. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of ProSe | octet o5+1 | | | | | | | | | identifier to ProSe | | | | | | | | | | application server | octet o5+2 | | | | | | | | | address mapping | | | | | | | | | | rules contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o5+3)* | | | | | | | | | ProSe application | | | | | | | | | | server address | octet o150* | | | | | | | | | mapping rule 1 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o150+1)* | | | | | | | | | ProSe application | | | | | | | | | | server address | octet o151* | | | | | | | | | mapping rule 2 | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o151+1)* | | | | | | | | | | | | | | | | | | | | octet o152* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ProSe identifier to | octet (o152+1)* | | | | | | | | | ProSe application | | | | | | | | | | server address | octet (l-2)* | | | | | | | | | mapping rule n | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.5.2.19: ProSe identifier to ProSe application server address mapping
rules
Table 5.5.2.19: ProSe identifier to ProSe application server address mapping
rules
+----------------------------------------------------------------------+ | ProSe identifier to ProSe application server address mapping rule: | | | | The ProSe identifier to ProSe application server address mapping | | rule field is coded according to figure 5.5.2.20 and table 5.5.2.20. | +----------------------------------------------------------------------+
+--------+--------+-------+-------+-------+----+--------+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+=======+=======+=======+====+========+===+===+ | Length | octet | | | | | | | | | of | o150+1 | | | | | | | | | ProSe | | | | | | | | | | iden | octet | | | | | | | | | tifier | o150+2 | | | | | | | | | to | | | | | | | | | | ProSe | | | | | | | | | | appli | | | | | | | | | | cation | | | | | | | | | | server | | | | | | | | | | a | | | | | | | | | | ddress | | | | | | | | | | m | | | | | | | | | | apping | | | | | | | | | | rule | | | | | | | | | | co | | | | | | | | | | ntents | | | | | | | | | +--------+--------+-------+-------+-------+----+--------+---+---+ | ProSe | octet | | | | | | | | | ident | o150+3 | | | | | | | | | ifiers | | | | | | | | | | | octet | | | | | | | | | | o1500 | | | | | | | | +--------+--------+-------+-------+-------+----+--------+---+---+ | 0 | 0 | 0 | 0 | 0 | AT | octet | | | | | | | | | | o | | | | Spare | Spare | Spare | Spare | Spare | | 1500+1 | | | +--------+--------+-------+-------+-------+----+--------+---+---+ | ProSe | octet | | | | | | | | | appli | o | | | | | | | | | cation | 1500+2 | | | | | | | | | server | | | | | | | | | | a | octet | | | | | | | | | ddress | l-2 | | | | | | | | +--------+--------+-------+-------+-------+----+--------+---+---+
Figure 5.5.2.20: ProSe identifier to ProSe application server address mapping
rule
Table 5.5.2.20: ProSe identifier to ProSe application server address mapping
rule
+----------------------------------------------------------------------+ | ProSe identifiers (o150+3 to o1500): | | | | The ProSe identifiers field is coded according to figure 5.3.2.14 | | and table 5.3.2.14. | +======================================================================+ | Address type (AT) (octet o1500+1 bit 1 to 3): | | | | The AT field indicates the ProSe application server address type. | | | | Bits | | | | **3 2 1** | | | | 0 0 1 IPv4 | | | | 0 1 0 IPv6 | | | | 0 1 1 FQDN | | | | The other values are reserved. | +----------------------------------------------------------------------+ | If the AT indicates IPv4, then the ProSe application server address | | field contains an IPv4 address in 4 octets. | | | | If the AT indicates IPv6, then the ProSe application server address | | field contains an IPv6 address in 16 octets. | | | | If the AT indicates FQDN, then the ProSe application server address | | field contains a sequence of one octet FQDN length field and a FQDN | | value of variable size. The FQDN value field shall be encoded as | | defined in clause 28.3.2.1 in 3GPP TS 23.003 [10]. | +----------------------------------------------------------------------+ | If the length of ProSe identifier to ProSe application server | | address mapping rule contents field is bigger than indicated in | | figure 5.5.2.19, receiving entity shall ignore any superfluous | | octets located at the end of the ProSe identifier to ProSe | | application server address mapping rule contents. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+------+-------+-------+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+======+=======+=======+===+ | L | octet | | | | | | | | | ength | o6+1 | | | | | | | | | of 5G | | | | | | | | | | PKMF | octet | | | | | | | | | ad | o6+2 | | | | | | | | | dress | | | | | | | | | | i | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-------+---+ | 0 | octet | 0 | 0 | 0 | FQDN | IP | IP | | | | o6+3 | | | | | v6add | v4add | | | Spare | | Spare | Spare | Spare | | | | | +-------+-------+-------+-------+-------+------+-------+-------+---+ | IPv4 | octet | | | | | | | | | ad | (o6 | | | | | | | | | dress | +4)* | | | | | | | | | list | | | | | | | | | | | octet | | | | | | | | | | o | | | | | | | | | | 160* | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-------+---+ | IPv6 | octet | | | | | | | | | ad | (o160 | | | | | | | | | dress | +1)* | | | | | | | | | list | | | | | | | | | | | octet | | | | | | | | | | (o1 | | | | | | | | | | 61)* | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-------+---+ | FQDN | octet | | | | | | | | | | (o161 | | | | | | | | | | +1)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (l | | | | | | | | | | -2)* | | | | | | | | +-------+-------+-------+-------+-------+------+-------+-------+---+
Figure 5.5.2.21: 5G PKMF address information
+--------------------------+--------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==========================+==============+===+===+===+===+===+===+===+ | Number of IPv4 addresses | octet o6+4 | | | | | | | | +--------------------------+--------------+---+---+---+---+---+---+---+ | IPv4 address 1 | octet o6+5 | | | | | | | | | | | | | | | | | | | | octet o6+8 | | | | | | | | +--------------------------+--------------+---+---+---+---+---+---+---+ | IPv4 address 2 | octet o6+9 | | | | | | | | | | | | | | | | | | | | octet o6+12 | | | | | | | | +--------------------------+--------------+---+---+---+---+---+---+---+ | ... ... | | | | | | | | | +--------------------------+--------------+---+---+---+---+---+---+---+ | IPv4 address N | octet o160-3 | | | | | | | | | | | | | | | | | | | | octet o160 | | | | | | | | +--------------------------+--------------+---+---+---+---+---+---+---+
Figure 5.5.2.22: IPv4 address list
+--------------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==========================+===============+===+===+===+===+===+===+===+ | Number of IPv6 addresses | octet o160+1 | | | | | | | | +--------------------------+---------------+---+---+---+---+---+---+---+ | IPv6 address 1 | octet o160+2 | | | | | | | | | | | | | | | | | | | | octet o160+17 | | | | | | | | +--------------------------+---------------+---+---+---+---+---+---+---+ | IPv6 address 2 | octet o160+18 | | | | | | | | | | | | | | | | | | | | octet o160+33 | | | | | | | | +--------------------------+---------------+---+---+---+---+---+---+---+ | ... ... | | | | | | | | | +--------------------------+---------------+---+---+---+---+---+---+---+ | IPv6 address N | octet o161-15 | | | | | | | | | | | | | | | | | | | | octet o161 | | | | | | | | +--------------------------+---------------+---+---+---+---+---+---+---+
Figure 5.5.2.23: IPv6 address list
Table 5.5.2.21: 5G PKMF address information
+----------------------------------------------------------------------+ | IPv4 addresses (IPv4add) (o6+2 bit 1): (NOTE 1) | | | | Bit | | | | **1** | | | | 0 IPv4 address list is not present | | | | 1 IPv4 address list is present | | | | IPv6 addresses (IPv6add) (octet o6+2 bit 2): (NOTE 1) | | | | Bit | | | | **2** | | | | 0 IPv6 address list is not present | | | | 1 IPv6 address list is present | | | | FQDN (octet o6+3 bit 3): (NOTE 2) | | | | Bit | | | | **3** | | | | 0 FQDN is not present | | | | 1 FQDN is present | | | | IPv4 address list (octet o6+4 to octet o160) | +======================================================================+ | IPv4 address list contains the IPv4 address(es) of the 5G PKMF and | | shall be encoded as defined in figure 5.5.2.20. | | | | IPv6 address list (octet o160+1 to octet o161) | | | | IPv6 address list contains the IPv6 address(es) of the 5G PKMF and | | shall be encoded as defined in figure 5.5.2.20. | | | | FQDN (octet o161+1 to l) | | | | FQDN field contains a sequence of one octet FQDN length field and a | | FQDN value of variable size. The FQDN value field shall be encoded | | as defined in clause 28.3.2.1 in 3GPP TS 23.003 [10]. | +----------------------------------------------------------------------+ | NOTE 1: If multiple IPv4 addresses and/or IPv6 addresses are | | included, which one of these addresses is selected is implementation | | dependent. | | | | NOTE 2: If the 5G PKMF supports the 5G PKMF Services with \"https\" | | URI scheme (i.e. use of TLS is mandatory), then the FQDN shall be | | used to construct the target URI. | +----------------------------------------------------------------------+
## 5.6 Encoding of UE policies for 5G ProSe remote UE
### 5.6.1 General
The UE policies for 5G ProSe remote UE are coded as shown in figures 5.6.2.1
and table 5.6.2.1.
### 5.6.2 Information elements coding
+----------+----------+------+-----+----------+---------+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==========+==========+======+=====+==========+=========+===+===+===+ | 0 | 0 | NSII | PAI | ProSeP | octet k | | | | | | | | | info | | | | | | | | | | type = | | | | | | | | | | {UE | | | | | | | | | | policies | | | | | | | | | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | remote | | | | | | | | | | UE} | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Spare | | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Length | octet | | | | | | | | | of | k+1 | | | | | | | | | ProSeP | | | | | | | | | | info | octet | | | | | | | | | contents | k+2 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Validity | octet | | | | | | | | | timer | k+3 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | k+7 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Served | octet | | | | | | | | | by | k+8 | | | | | | | | | NG-RAN | | | | | | | | | | | octet o1 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Not | octet | | | | | | | | | served | o1+1 | | | | | | | | | by | | | | | | | | | | NG-RAN | octet o2 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Default | octet | | | | | | | | | des | o2+1 | | | | | | | | | tination | | | | | | | | | | layer-2 | octet o3 | | | | | | | | | IDs for | | | | | | | | | | sending | | | | | | | | | | the | | | | | | | | | | d | | | | | | | | | | iscovery | | | | | | | | | | si | | | | | | | | | | gnalling | | | | | | | | | | for | | | | | | | | | | soli | | | | | | | | | | citation | | | | | | | | | | and for | | | | | | | | | | r | | | | | | | | | | eceiving | | | | | | | | | | the | | | | | | | | | | d | | | | | | | | | | iscovery | | | | | | | | | | si | | | | | | | | | | gnalling | | | | | | | | | | for | | | | | | | | | | anno | | | | | | | | | | uncement | | | | | | | | | | and | | | | | | | | | | ad | | | | | | | | | | ditional | | | | | | | | | | inf | | | | | | | | | | ormation | | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | User | octet | | | | | | | | | info ID | o3+1 | | | | | | | | | for | | | | | | | | | | d | octet | | | | | | | | | iscovery | o3+6 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | RSC info | octet | | | | | | | | | list | o3+7 | | | | | | | | | | | | | | | | | | | | octet l | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | Privacy | octet | | | | | | | | | timer | l+1 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | l+2 | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | N3IWF | octet | | | | | | | | | s | (l+3)* | | | | | | | | | election | | | | | | | | | | inf | octet | | | | | | | | | ormation | m* | | | | | | | | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | layer-3 | | | | | | | | | | remote | | | | | | | | | | UE | | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+ | 5G PKMF | octet | | | | | | | | | address | q* | | | | | | | | | inf | | | | | | | | | | ormation | (see | | | | | | | | | | NOTE) | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | p* | | | | | | | | +----------+----------+------+-----+----------+---------+---+---+---+
NOTE: The field is placed immediately after the last present preceding field.
Figure 5.6.2.1: ProSeP Info = {UE policies for 5G ProSe remote UE}
Table 5.6.2.1: ProSeP Info = {UE policies for 5G ProSe remote UE}
+----------------------------------------------------------------------+ | ProSeP info type (bit 1 to 4 of octet k) shall be set to \"0100\" | | (UE policies for 5G ProSe remote UE) | +======================================================================+ | PKMF address indication (PAI) (bit 5 of octet k) | +----------------------------------------------------------------------+ | The PAI indicates whether the 5G PKMF address information is | | included in the IE or not | +----------------------------------------------------------------------+ | Bit | +----------------------------------------------------------------------+ | **5** | +----------------------------------------------------------------------+ | 0 5G PKMF address information is not included | +----------------------------------------------------------------------+ | 1 5G PKMF address information is included | | | | N3IWF selection information indication (NSII) (bit 6 of octet k) | | | | The NSII indicates whether the N3IWF selection information for 5G | | ProSe layer-3 remote UE is included in the IE or not | | | | Bit | | | | 6 | | | | 0 N3IWF selection information for 5G ProSe layer-3 remote UE is not | | included | | | | 1 N3IWF selection information for 5G ProSe layer-3 remote UE is | | included | +----------------------------------------------------------------------+ | Length of ProSeP info contents (octets k+1 to k+2) indicates the | | length of ProSeP info contents. | +----------------------------------------------------------------------+ | Validity timer (octet k+3 to k+7): | | | | The validity timer field provides the expiration time of validity of | | the UE policies for 5G ProSe remote UE. The validity timer field is | | a binary coded representation of a UTC time, in seconds since | | midnight UTC of January 1, 1970 (not counting leap seconds). | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Served by NG-RAN (octet k+8 to o1): | | | | The served by NG-RAN field is coded according to figure 5.6.2.2 and | | table 5.6.2.2, and contains configuration parameters for 5G ProSe | | remote UE when the UE is served by NG-RAN. | +----------------------------------------------------------------------+ | Not served by NG-RAN (octet o1+1 to o2): | | | | The not served by NG-RAN field is coded according to figure 5.6.2.5 | | and table 5.6.2.5, and contains configuration parameters for 5G | | ProSe UE-to-network relay discovery and communication when the UE is | | not served by NG-RAN. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Default destination layer-2 IDs for sending the discovery signalling | | for solicitation and for receiving the discovery signalling for | | announcement and additional information (octet o2+1 to o3): | | | | The default destination layer-2 IDs for sending the discovery | | signalling for solicitation and for receiving the discovery | | signalling for announcement and additional information is coded | | according to figure 5.6.2.11b and table 5.6.2.11b and contains a | | list of the default destination layer-2 IDs for the initial | | UE-to-network relay discovery signalling. | +----------------------------------------------------------------------+ | User info ID for discovery (octet o3+1 to o3+6): | | | | The value of the User info ID parameter is a 48-bit long bit string. | | The format of the User info ID parameter is out of scope of this | | specification. | +----------------------------------------------------------------------+ | RSC info list (octet o3+7 to l): | | | | The RSC info list field is coded according to figure 5.6.2.12 and | | table 5.6.2.12 and contains the RSCs related paramters. | +----------------------------------------------------------------------+ | Privacy timer (octet m+1 to m+2): | | | | The privacy timer field contains binary encoded duration, in units | | of seconds, after which the UE shall change the source layer-2 ID | | self-assigned by the UE while performing transmission of 5G ProSe | | direct communication. | | | | N3IWF selection information for 5G ProSe layer-3 remote UE (octet | | l+3 to m): | | | | The N3IWF selection information for 5G ProSe layer-3 remote UE field | | is coded according to figure 5.6.2.17 and table 5.6.2.17, and | | contains two parts: 1) N3IWF identifier configuration (either FQDN | | or IP address) for 5G ProSe layer-3 remote UE; 2) 5G ProSe layer-3 | | UE-to-network relay access node selection information. | +----------------------------------------------------------------------+ | 5G PKMF address information (octet m+3 to p) | | | | 5G PKMF address information contains the IPv4 address(es), IPv6 | | address(es) and/or FQDN of the 5G PKMF and is coded according to | | figure 5.5.2.21, figure 5.5.2.22, figure 5.5.2.23 and table | | 5.5.2.21. At least one of the address parameters (FQDN, IPv4 address | | list or IPv6 address list) shall be included. | | | | If the length of ProSeP info contents field is bigger than indicated | | in figure 5.6.2.1, receiving entity shall ignore any superfluous | | octets located at the end of the ProSeP info contents. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+======+=======+ | L | octet | | | | | | | | | ength | k+8 | | | | | | | | | of | | | | | | | | | | s | octet | | | | | | | | | erved | k+9 | | | | | | | | | by | | | | | | | | | | N | | | | | | | | | | G-RAN | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+ | 0 | 0 | 0 | 0 | 0 | 0 | 0 | L3RI | octet | | | | | | | | | | (k+ | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | 10)* | +-------+-------+-------+-------+-------+-------+-------+------+-------+ | Autho | octet | | | | | | | | | rized | (k+ | | | | | | | | | PLMN | 11)* | | | | | | | | | list | | | | | | | | | | for | octet | | | | | | | | | la | o1* | | | | | | | | | yer-2 | | | | | | | | | | r | | | | | | | | | | emote | | | | | | | | | | UE | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+------+-------+
Figure 5.6.2.2: Served by NG-RAN
Table 5.6.2.2: Served by NG-RAN
+----------------------------------------------------------------------+ | Layer-3 remote UE authorization indication (L3RI) (octet k+10, bit | | 1): | | | | The layer-3 remote UE authorization indication field indicates | | whether the UE is authorized to act as a layer-3 remote UE. | | | | Bits | | | | 1 | | | | 0 Not authorized to act as a layer-3 remote UE | | | | 1 Authorized to act as a layer-3 remote UE | +======================================================================+ | Authorized PLMN list for layer-2 remote UE (octet k+11 to o1): | | | | The authorized PLMN list for layer-2 remote UE field is coded | | according to figure 5.6.2.3 and table 5.6.2.3. | +----------------------------------------------------------------------+
+-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=========================================+=================+===+===+===+===+===+===+===+ | Length of authorized PLMN list contents | octet k+11 | | | | | | | | | | | | | | | | | | | | octet k+12 | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Authorized PLMN 1 | octet (k+13)* | | | | | | | | | | | | | | | | | | | | octet (k+15)* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Authorized PLMN 2 | octet (k+16)* | | | | | | | | | | | | | | | | | | | | octet (k+18)* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (k+19)* | | | | | | | | | | | | | | | | | | | | octet (o50-3)* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+ | Authorized PLMN n | octet (o50-2)* | | | | | | | | | | | | | | | | | | | | octet o50* | | | | | | | | +-----------------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.6.2.3: Authorized PLMN list
Table 5.6.2.3: Authorized PLMN list
+----------------------------------------------------------------------+ | Authorized PLMN: | | | | The authorized PLMN field is coded according to figure 5.6.2.4 and | | table 5.6.2.4. | +----------------------------------------------------------------------+
8 7 6 5 4 3 2 1
* * *
MCC digit 2 MCC digit 1 octet k+16  
MNC digit 3 MCC digit 3 octet k+17  
MNC digit 2 MNC digit 1 octet k+18
Figure 5.6.2.4: PLMN ID
Table 5.6.2.4: PLMN ID
+----------------------------------------------------------------------+ | Mobile country code (MCC) (octet k+16, octet k+17 bit 1 to 4): | | | | The MCC field is coded as in ITU-T Recommendation E.212 [5], | | annex A. | +======================================================================+ | Mobile network code (MNC) (octet k+17 bit 5 to 8, octet k+18): | | | | The coding of MNC field is the responsibility of each administration | | but BCD coding shall be used. The MNC shall consist of 2 or 3 | | digits. If a network operator decides to use only two digits in the | | MNC, MNC digit 3 shall be coded as \"1111\". | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of not | octet o1+1 | | | | | | | | | served by NG-RAN | | | | | | | | | | contents | octet o1+2 | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | NR radio parameters | octet o1+3 | | | | | | | | | per geographical | | | | | | | | | | area list for | octet o51 | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | NR radio parameters | octet o51+1 | | | | | | | | | per geographical | | | | | | | | | | area list for | octet o10 | | | | | | | | | UE-to-network relay | | | | | | | | | | communication | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX | octet o10+1 | | | | | | | | | configuration for | | | | | | | | | | UE-to-network relay | octet o2 | | | | | | | | | discovery | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.6.2.5: Not served by NG-RAN
Table 5.6.2.5: Not served by NG-RAN
+----------------------------------------------------------------------+ | NR radio parameters per geographical area list for UE-to-network | | relay discovery (octet o1+3 to o51): | | | | The NR radio parameters per geographical area list for UE-to-network | | relay discovery field is coded according to figure 5.6.2.6 and | | table 5.6.2.6. | +======================================================================+ | NR radio parameters per geographical area list for UE-to-network | | relay communication (octet o51+1 to o2): | | | | The NR radio parameters per geographical area list for UE-to-network | | relay communication field is coded according to figure 5.6.2.7 and | | table 5.6.2.7. | +----------------------------------------------------------------------+ | Default PC5 DRX configuration for UE-to-network relay discovery | | (octet o10+1 to o2): | | | | The default PC5 DRX configuration for UE-to-network relay discovery | | field is coded according to figure 5.6.2.11a and table 5.6.2.11a. | +----------------------------------------------------------------------+ | If the length of not served by NG-RAN contents field is bigger than | | indicated in figure 5.6.2.5, receiving entity shall ignore any | | superfluous octets located at the end of the not served by NG-RAN | | contents. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of NR radio | octet o1+3 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o1+4 | | | | | | | | | list for | | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet o1+5 | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o510 | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o510+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o511* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o511+1)* | | | | | | | | | | | | | | | | | | | | octet o512* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o512+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o51* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.6.2.6: NR radio parameters per geographical area list for UE-to-
network relay discovery
Table 5.6.2.6: NR radio parameters per geographical area list for UE-to-
network relay discovery
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.6.2.8 and table 5.6.2.8. | +----------------------------------------------------------------------+
+---------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+==================+===+===+===+===+===+===+===+ | Length of NR radio | octet o51+1 | | | | | | | | | parameters per | | | | | | | | | | geographical area | octet o51+2 | | | | | | | | | list for | | | | | | | | | | UE-to-network relay | | | | | | | | | | communication | | | | | | | | | | contents | | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet o51+3 | | | | | | | | | per geographical | | | | | | | | | | area info 1 | octet o513 | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o513+1)* | | | | | | | | | per geographical | | | | | | | | | | area info 2 | octet o514* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o514+1)* | | | | | | | | | | | | | | | | | | | | octet o515* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+ | Radio parameters | octet (o515+1)* | | | | | | | | | per geographical | | | | | | | | | | area info n | octet o10* | | | | | | | | +---------------------+------------------+---+---+---+---+---+---+---+
Figure 5.6.2.7: NR radio parameters per geographical area list for UE-to-
network relay communication
Table 5.6.2.7: NR radio parameters per geographical area list for UE-to-
network relay communication
+----------------------------------------------------------------------+ | Radio parameters per geographical area info: | | | | The radio parameters per geographical area info field is coded | | according to figure 5.6.2.8 and table 5.6.2.8. | +----------------------------------------------------------------------+
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | L | octet | | | | | | | | | ength | o | | | | | | | | | of | 510+1 | | | | | | | | | radio | | | | | | | | | | param | octet | | | | | | | | | eters | o | | | | | | | | | per | 510+2 | | | | | | | | | ge | | | | | | | | | | ograp | | | | | | | | | | hical | | | | | | | | | | area | | | | | | | | | | con | | | | | | | | | | tents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Ge | octet | | | | | | | | | ograp | o | | | | | | | | | hical | 510+3 | | | | | | | | | area | | | | | | | | | | | octet | | | | | | | | | | o5100 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Radio | octet | | | | | | | | | param | o5 | | | | | | | | | eters | 100+1 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o | | | | | | | | | | 511-1 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MI | 0 | 0 | 0 | 0 | 0 | 0 | 0 | octet | | | | | | | | | | o511 | | | Spare | Spare | Spare | Spare | Spare | Spare | Spare | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 5.6.2.8: Radio parameters per geographical area info
Table 5.6.2.8: Radio parameters per geographical area info
+----------------------------------------------------------------------+ | Geographical area (octet o510+3 to o5100): | | | | The geographical area field is coded according to figure 5.6.2.9 and | | table 5.6.2.9. | +======================================================================+ | Radio parameters (octet o5100+1 to o511-1): | | | | The radio parameters field is coded according to figure 5.3.2.11 and | | table 5.3.2.11, applicable in the geographical area indicated by the | | geographical area field when not served by NG-RAN. | +----------------------------------------------------------------------+ | Managed indicator (MI) (octet o511 bit 8): | | | | The managed indicator indicates how the radio parameters indicated | | in the radio parameters field in the geographical area indicated by | | the geographical area field are managed. | | | | Bit | | | | **8** | | | | 0 Non-operator managed | | | | 1 Operator managed | +----------------------------------------------------------------------+ | If the length of radio parameters per geographical area contents | | field is bigger than indicated in figure 5.6.2.8, receiving entity | | shall ignore any superfluous octets located at the end of the radio | | parameters per geographical area contents. | +----------------------------------------------------------------------+
+---------------------+---------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=====================+===+===+===+===+===+===+===+ | Length of | octet o510+3 | | | | | | | | | geographical area | | | | | | | | | | contents | octet o510+4 | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 1 | octet (o510+5)* | | | | | | | | | | | | | | | | | | | | octet (o510+10)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate 2 | octet (o510+11)* | | | | | | | | | | | | | | | | | | | | octet (o510+16)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | ... | octet (o510+17)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o510-2+6*n)* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+ | Coordinate n | octet | | | | | | | | | | (o510-1+6*n)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o510+4+6*n)* = | | | | | | | | | | octet o5100* | | | | | | | | +---------------------+---------------------+---+---+---+---+---+---+---+
Figure 5.6.2.9: Geographical area
Table 5.6.2.9: Geographical area
+----------------------------------------------------------------------+ | Coordinate: | | | | The coordinate field is coded according to figure 5.6.2.10 and | | table 5.6.2.10. | +----------------------------------------------------------------------+
+-----------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========+===============+===+===+===+===+===+===+===+ | Latitude | octet o510+11 | | | | | | | | | | | | | | | | | | | | octet o510+13 | | | | | | | | +-----------+---------------+---+---+---+---+---+---+---+ | Longitude | octet o510+14 | | | | | | | | | | | | | | | | | | | | octet o510+17 | | | | | | | | +-----------+---------------+---+---+---+---+---+---+---+
Figure 5.6.2.10: Coordinate area
Table 5.6.2.10: Coordinate area
+----------------------------------------------------------------------+ | Latitude (octet o510+11 to o510+13): | | | | The latitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +======================================================================+ | Longitude (octet o510+14 to o510+17): | | | | The longitude field is coded according to clause 6.1 of | | 3GPP TS 23.032 [6]. | +----------------------------------------------------------------------+
+-------------------------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================================+===============+===+===+===+===+===+===+===+ | Length of radio parameters contents | octet o5100+1 | | | | | | | | | | | | | | | | | | | | octet o5100+2 | | | | | | | | +-------------------------------------+---------------+---+---+---+---+---+---+---+ | Radio parameters contents | octet o5100+3 | | | | | | | | | | | | | | | | | | | | octet o511-1 | | | | | | | | +-------------------------------------+---------------+---+---+---+---+---+---+---+
Figure 5.6.2.11: Radio parameters
Table 5.6.2.11: Radio parameters
+----------------------------------------------------------------------+ | Radio parameters contents (octet o5100+3 to o511-1): | | | | Radio parameters are defined as _SL-PreconfigurationNR_ in | | clause 9.3 of 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+
+---------------------+-------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+=============+===+===+===+===+===+===+===+ | Length of default | octet o10+1 | | | | | | | | | PC5 DRX | | | | | | | | | | configuration for | octet o10+2 | | | | | | | | | UE-to-network relay | | | | | | | | | | discovery contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+ | Default PC5 DRX | octet o10+3 | | | | | | | | | configuration for | | | | | | | | | | UE-to-network relay | octet o2 | | | | | | | | | discovery contents | | | | | | | | | +---------------------+-------------+---+---+---+---+---+---+---+
Figure 5.6.2.11a: Default PC5 DRX configuration for UE-to-network relay
discovery
Table 5.6.2.11a: Default PC5 DRX configuration for UE-to-network relay
discovery
+----------------------------------------------------------------------+ | Default PC5 DRX configuration contents for UE-to-network relay | | discovery: | | | | Default PC5 DRX configuration for UE-to-network relay discovery | | field is coded as _sl-DefaultDRX-GC-BC-r17_ in clause 6.3.5 of | | 3GPP TS 38.331 [7]. | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of default | octet o2+1 | | | | | | | | | destination layer-2 | | | | | | | | | | IDs for sending the | octet o2+2 | | | | | | | | | discovery | | | | | | | | | | signalling for | | | | | | | | | | solicitation and | | | | | | | | | | for receiving the | | | | | | | | | | discovery | | | | | | | | | | signalling for | | | | | | | | | | announcement and | | | | | | | | | | additional | | | | | | | | | | information | | | | | | | | | | contents | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet o2+3 | | | | | | | | | layer-2 ID 1 | | | | | | | | | | | octet o2+5 | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet (o2+6)* | | | | | | | | | layer-2 ID 2 | | | | | | | | | | | octet (o2+8)* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | ... | octet (o2+9)* | | | | | | | | | | | | | | | | | | | | octet (o3-3)* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Default destination | octet (o3-2)* | | | | | | | | | layer-2 ID n | | | | | | | | | | | octet o3* | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.6.2.11b: Default destination layer-2 IDs for sending the discovery
signalling for solicitation and for receiving the discovery signalling for
announcement and additional information
Table 5.6.2.11b: Default destination layer-2 IDs for sending the discovery
signalling for solicitation and for receiving the discovery signalling for
announcement and additional information
+-----------------------------------------------------------------+ | Default destination layer-2 ID (octet o2+3 to o2+5): | | | | The default destination layer-2 ID is a 24-bit long bit string. | +-----------------------------------------------------------------+
+----------------------------------+-----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==================================+=================+===+===+===+===+===+===+===+ | Length of RSC info list contents | octet o3+7 | | | | | | | | | | | | | | | | | | | | octet o3+8 | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info 1 | octet o3+9 | | | | | | | | | | | | | | | | | | | | octet o52 | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info 2 | octet (o52+1)* | | | | | | | | | | | | | | | | | | | | octet o53* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | ... | octet (o53+1)* | | | | | | | | | | | | | | | | | | | | octet o54* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+ | RSC info n | octet (o54+1)* | | | | | | | | | | | | | | | | | | | | octet o4* | | | | | | | | +----------------------------------+-----------------+---+---+---+---+---+---+---+
Figure 5.6.2.12: RSC info list
Table 5.6.2.12: RSC info list
+----------------------------------------------------------------------+ | RSC info: | | | | The RSC info field is coded according to figure 5.6.2.13 and | | table 5.6.2.13. | +----------------------------------------------------------------------+
+----------+----------+-------+-----+------+-----+----+----------+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==========+==========+=======+=====+======+=====+====+==========+===+ | Length | octet | | | | | | | | | of RSC | o52+1 | | | | | | | | | info | | | | | | | | | | contents | octet | | | | | | | | | | o52+2 | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | RSC list | octet | | | | | | | | | | o52+3 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o520 | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | Security | octet | | | | | | | | | related | o520+1 | | | | | | | | | pa | | | | | | | | | | rameters | octet | | | | | | | | | for | o511 | | | | | | | | | d | | | | | | | | | | iscovery | | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | 0 | 0 | 0 | TDI | CPSI | NSI | LI | octet | | | | | | | | | | o511+1 | | | Spare | Spare | Spare | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | NR-PC5 | octet | | | | | | | | | UE-to | (o511+2) | | | | | | | | | -network | | | | | | | | | | relay | octet | | | | | | | | | security | o530 | | | | | | | | | policies | | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | PDU | octet | | | | | | | | | session | (o | | | | | | | | | pa | 530+1)* | | | | | | | | | rameters | | | | | | | | | | of | octet | | | | | | | | | layer-3 | o516* | | | | | | | | | relay | | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+ | Traffic | octet | | | | | | | | | de | (o | | | | | | | | | scriptor | 516+1)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o53* | | | | | | | | +----------+----------+-------+-----+------+-----+----+----------+---+
Figure 5.6.2.13: RSC info
Table 5.6.2.13: RSC info
+----------------------------------------------------------------------+ | RSC list (octet o52+3 to o520): | | | | The RSC list field is coded according to figure 5.6.2.14 and | | table 5.6.2.14. | +======================================================================+ | Security related parameters for discovery (octet o520+1 to o511): | | | | The security related parameters for discovery field contains the | | security related parameters for discovery used when the security | | procedure over control plane as specified in 3GPP TS 33.503 [13] | | is used and is coded according to figure 5.6.2.15 and | | table 5.6.2.15. | +----------------------------------------------------------------------+ | Layer indication (LI) (octet o511+1 bit 1 to 2): | | | | Bits | | | | 2 1 | | | | 0 1 Layer 3 | | | | 1 0 Layer 2 | | | | The other values are reserved. | +----------------------------------------------------------------------+ | If LI is set to \"Layer 3\", the PDU session parameters of layer-3 | | relay is included in the RSC info, otherwise the PDU session | | parameters of layer-3 relay is not included. | +----------------------------------------------------------------------+ | N3IWF support indication (NSI) (octet o511+1 bit 3): | | | | Bit | | | | 3 | | | | 0 Using N3IWF access for the relayed traffic is not supported | | | | 1 Using N3IWF access for the relayed traffic is supported | | | | The NSI is set to \"Using N3IWF access for the relayed traffic is | | supported\" only when the LI is set to \"Layer 3\". | +----------------------------------------------------------------------+ | Control plane security indication (CPSI) (octet o511+1): | | | | The control plane security indication field indicates whether to use | | the security procedure over control plane as specified in | | 3GPP TS 33.503 [13] or not. | +----------------------------------------------------------------------+ | Bit | +----------------------------------------------------------------------+ | 4 | +----------------------------------------------------------------------+ | 0 security procedure over control plane is not used | +----------------------------------------------------------------------+ | 1 security procedure over control plane is used | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | Traffic descriptor indication (TDI) (octet o511+1 bit 5): | | | | Bit | | | | 5 | | | | 0 Traffic descriptor field is not included | | | | 1 Traffic descriptor field is included | +----------------------------------------------------------------------+ | NR-PC5 UE-to-network relay security policies (octet o511+2 to o530): | | | | The NR-PC5 UE-to-network relay security policies is coded as the | | NR-PC5 unicast security policies defined in figure 5.4.2.34 and | | table 5.4.2.34. | +----------------------------------------------------------------------+ | PDU session parameters of layer-3 relay (octet o530+1 to o516): | | | | The PDU session parameters of layer-3 relay field is coded according | | to figure 5.6.2.16 and table 5.6.2.16. | +----------------------------------------------------------------------+ | Traffic descriptor (octet o516+1 to o53): | | | | The traffic descriptor field is coded according to figure 5.6.2.16a | | and table 5.6.2.16a. | +----------------------------------------------------------------------+
+-----------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=============================+==================+===+===+===+===+===+===+===+ | Length of RSC list contents | octet o52+3 | | | | | | | | | | | | | | | | | | | | octet o52+4 | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC 1 | octet o52+5 | | | | | | | | | | | | | | | | | | | | octet o52+7 | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC 2 | octet (o52+8)* | | | | | | | | | | | | | | | | | | | | octet (o52+10)* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | ... | octet (o52+11)* | | | | | | | | | | | | | | | | | | | | octet (o520-3)* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+ | RSC n | octet (o520-2)* | | | | | | | | | | | | | | | | | | | | octet o520* | | | | | | | | +-----------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.6.2.14: RSC list
Table 5.6.2.14: RSC list
+----------------------------------------------------------------------+ | RSC (octet o52+5 to o52+7): | | | | The RSC identifies a connectivity service that the remote UE wants. | | The value of the RSC is a 24-bit long bit string. The values of the | | RSC from \"000001\" to \"00000F\" in hexadecimal representation are | | spare and shall not be used in this release of the specification. | | The UE shall ignore the spare values of the RSC in this release of | | specification together with their associated parameters received in | | the RSC info field. For all other values, the format of the RSC is | | out of scope of this specification. | +----------------------------------------------------------------------+
+--------------------------------------------+------------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +============================================+==================+===+===+===+===+===+===+===+ | Security related parameters validity timer | octet o520+1 | | | | | | | | | | | | | | | | | | | | octet o520+5 | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+ | Code-sending security parameters | octet (o520+6)* | | | | | | | | | | | | | | | | | | | | octet o524* | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+ | Code-receiving security parameters | octet (o524+1)* | | | | | | | | | | | | | | | | | | | | octet o511* | | | | | | | | +--------------------------------------------+------------------+---+---+---+---+---+---+---+
Figure 5.6.2.15: Security related parameters for discovery
+-------------------+------------------+-------+-------+--------------+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===================+==================+=======+=======+==============+===+===+===+===+ | Spare | PDUCK | PDUIK | PDUSK | octet o520+6 | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUSK | octet (o520+7)* | | | | | | | | | | | | | | | | | | | | octet o521* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUIK | octet (o521+1)* | | | | | | | | | | | | | | | | | | | | octet o522* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUCK | octet (o522+1)* | | | | | | | | | | | | | | | | | | | | octet o523* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | Encrypted bitmask | octet (o523+1)* | | | | | | | | | | | | | | | | | | | | octet o524* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+
Figure 5.6.2.15a: Code-sending security parameters
+-------------------+------------------+-------+-------+--------------+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===================+==================+=======+=======+==============+===+===+===+===+ | Spare | PDUCK | PDUIK | PDUSK | octet o524+1 | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUSK | octet (o524+2)* | | | | | | | | | | | | | | | | | | | | octet o525* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUIK | octet (o525+1)* | | | | | | | | | | | | | | | | | | | | octet o526* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | DUCK | octet (o526+1)* | | | | | | | | | | | | | | | | | | | | octet o527* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+ | Encrypted bitmask | octet (o527+1)* | | | | | | | | | | | | | | | | | | | | octet o511* | | | | | | | | +-------------------+------------------+-------+-------+--------------+---+---+---+---+
Figure 5.6.2.15b: Code-receiving security parameters
Table 5.6.2.15: Security related parameters for discovery
Security related parameters validity timer:
* * *
The security related parameters validity timer field provides the expiration
time of validity of the security related parameters for discovery. The
security related parameters validity timer field is a binary coded
representation of a UTC time, in seconds since midnight UTC of January 1, 1970
(not counting leap seconds).  
Code-sending security parameters:  
The code-sending security parameters field contains the security parameters
needed by a sending UE to protect a 5G ProSe direct discovery message over PC5
interface as specified in 3GPP TS 33.503 [13].  
Code-receiving security parameters  
The code-receiving security parameters field contains the security parameters
needed by a receiving UE to process a 5G ProSe direct discovery message over
PC5 interface as specified in 3GPP TS 33.503 [13].  
Presence of DUSK (PDUSK):  
PDUSK indicates whether the DUSK field is present or not.  
Bit  
**1**  
0 DUSK field is not included 1 DUSK field is included Presence of DUIK
(PDUIK):  
PDUIK indicates whether the DUIK field is present or not.  
Bit  
**2**  
0 DUIK field is not included 1 DUIK field is included Presence of DUCK
(PDUCK):  
PDUCK indicates whether the DUCK field and the encrypted bitmask field are
present or not.  
Bit  
**3**  
0 DUCK and encrypted bitmask fields are not included 1 DUCK and encrypted
bitmask fields are included DUSK:  
The DUSK field contains the value of the DUSK. The use of the DUSK is defined
in 3GPP TS 33.503 [13].  
DUIK:  
The DUIK field contains the value of the DUIK. The use of the DUIK is defined
in 3GPP TS 33.503 [13].  
DUCK:  
The DUCK field contains the value of the DUCK. The use of the DUCK is defined
in 3GPP TS 33.503 [13].  
Encrypted bitmask:  
The encrypted bitmask field contains the value of the encrypted bitmask, which
is a 184-bit bitmask which uses bit \"1\" to mark the positions of the bits
for which the DUCK encryption is applied.
+--------+--------+--------+--------+------+--------+--------+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+========+========+======+========+========+===+===+ | Length | octet | | | | | | | | | of PDU | o530+1 | | | | | | | | | s | | | | | | | | | | ession | octet | | | | | | | | | para | o530+2 | | | | | | | | | meters | | | | | | | | | | of | | | | | | | | | | l | | | | | | | | | | ayer-3 | | | | | | | | | | relay | | | | | | | | | | co | | | | | | | | | | ntents | | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | Spare | PATP | PSSCM | P | PDNN | PDU | octet | | | | | | | SNSSAI | | s | o530+3 | | | | | | | | | ession | | | | | | | | | | type | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | DNN | octet | | | | | | | | | | o530+4 | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | o531 | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | S | octet | | | | | | | | | -NSSAI | (o53 | | | | | | | | | | 1+1)* | | | | | | | | | | | | | | | | | | | | octet | | | | | | | | | | (o51 | | | | | | | | | | 6-1)* | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+ | Spare | Access | SSC | octet | | | | | | | | type | mode | o516* | | | | | | | | pref | | | | | | | | | | erence | | | | | | | | +--------+--------+--------+--------+------+--------+--------+---+---+
Figure 5.6.2.16: PDU session parameters of layer-3 relay
Table 5.6.2.16: PDU session parameters for layer-3 relay
+----------------------------------+----------------------------------+ | PDU session type (bits 3 to 1 of | | | octet o530+3): | | | | | | The PDU session type field shall | | | be encoded as the PDU session | | | type value part of the PDU | | | session type information element | | | defined in clause 9.11.4.11 of | | | 3GPP TS 24.501 [4]. | | +==================================+==================================+ | Presence of DNN (PDNN) (bit 4 of | | | octet o530+3) | | +----------------------------------+----------------------------------+ | PDNN indicates whether the DNN | | | field is present or not, and it | | | shall be set to 1. | | +----------------------------------+----------------------------------+ | Presence of S-NSSAI (PSNSSAI) | | | (bit 5 of octet o530+3) | | +----------------------------------+----------------------------------+ | PSNSSAI indicates whether the | | | S-NSSAI field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **5** | | +----------------------------------+----------------------------------+ | 0 | S-NSSAI field is not included | +----------------------------------+----------------------------------+ | 1 | S-NSSAI field is included | +----------------------------------+----------------------------------+ | Presence of SSC mode (PSSCM) | | | (bit 6 of octet o530+3) | | +----------------------------------+----------------------------------+ | PSSCM indicates whether the SSC | | | mode field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **6** | | +----------------------------------+----------------------------------+ | 0 | SSC mode field is not included | | | (NOTE) | +----------------------------------+----------------------------------+ | 1 | SSC mode field is included | +----------------------------------+----------------------------------+ | Presence of access type | | | preference (PATP) (bit 7 of | | | octet o530+3) | | +----------------------------------+----------------------------------+ | PATP indicates whether the | | | access type preference mode | | | field is present or not. | | +----------------------------------+----------------------------------+ | Bit | | +----------------------------------+----------------------------------+ | **7** | | +----------------------------------+----------------------------------+ | 0 | Access type preference field is | | | not included (NOTE) | +----------------------------------+----------------------------------+ | 1 | Access type preference field is | | | included | +----------------------------------+----------------------------------+ | DNN (octet o530+4 to o531): | | | | | | The DNN field shall be encoded | | | as a sequence of a one octet DNN | | | length field and a DNN value | | | field of a variable size. The | | | DNN value contains an APN as | | | defined in | | | 3GPP TS 23.003 [10]. | | +----------------------------------+----------------------------------+ | S-NSSAI (octet o531+1 to | | | o516-1): | | | | | | The S-NSSAI field shall be | | | encoded as a sequence of a one | | | octet S-NSSAI length field and | | | an S-NSSAI value field of a | | | variable size. The S-NSSAI value | | | shall be encoded as the value | | | part of the S-NSSAI information | | | element defined in | | | clause 9.11.2.8 of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | SSC mode (bits 3 to 1 of octet | | | o516): | | | | | | The SSC mode field shall be | | | encoded as the value part of the | | | SSC mode information element | | | defined in clause 9.11.4.16 of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | Access type preference (bits 5 | | | to 4 of octet o516): | | | | | | The access type preference field | | | shall be encoded as the value | | | part of the access type | | | information element defined in | | | clause 9.11.2.1A of | | | 3GPP TS 24.501 [4]. | | +----------------------------------+----------------------------------+ | NOTE: Since SSC mode field and | | | access type preference field are | | | coded in the same octet, this | | | octet is not included only when | | | both PSSCM and PATP are set to | | | 0. | | +----------------------------------+----------------------------------+
+---------------------------------------+--------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=======================================+==============+===+===+===+===+===+===+===+ | Length of traffic descriptor contents | octet o516+1 | | | | | | | | | | | | | | | | | | | | octet o516+2 | | | | | | | | +---------------------------------------+--------------+---+---+---+---+---+---+---+ | Traffic descriptor | octet o516+3 | | | | | | | | | | | | | | | | | | | | octet o53 | | | | | | | | +---------------------------------------+--------------+---+---+---+---+---+---+---+
Figure 5.6.2.16a: Traffic descriptor
Table 5.6.2.16a: Traffic descriptor
+----------------------------------------------------------------------+ | Traffic descriptor (octet o516+3 to o53): | | | | The traffic descriptor field is coded according to figure 5.2.2 and | | table 5.2.1 in clause 5.2 of 3GPP TS 24.526 [11]. | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of N3IWF | octet (l+3)* | | | | | | | | | selection | | | | | | | | | | information for 5G | octet (l+4)* | | | | | | | | | ProSe layer-3 | | | | | | | | | | remote UE | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | N3IWF identifier | octet (l+5)* | | | | | | | | | configuration for | | | | | | | | | | 5G ProSe layer-3 | octet l0* | | | | | | | | | remote UE | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | 5G ProSe layer-3 | octet (l0+1)* | | | | | | | | | UE-to-network | | | | | | | | | | relays access node | octet m* | | | | | | | | | selection | | | | | | | | | | information | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.6.2.17: N3IWF selection information for 5G ProSe layer-3 remote UE
Table 5.6.2.17: N3IWF selection information for 5G ProSe layer-3 remote UE
+----------------------------------------------------------------------+ | N3IWF identifier configuration for 5G ProSe layer-3 remote UE (octet | | l+5 to l0): | | | | The N3IWF identifier configuration for 5G ProSe layer-3 remote UE | | contains a list of home N3IWF identifier entries and is coded | | according to figure 5.6.2.18 and table 5.6.2.18. | | | | 5G ProSe layer-3 UE-to-network relays access node selection | | information (octet l0+1 to m): | +----------------------------------------------------------------------+ | The 5G ProSe layer-3 UE-to-network relays access node selection | | information contains a sequence of the N3AN node selection | | information entries and is coded according to figure 5.6.2.19 and | | table 5.6.2.19. | +----------------------------------------------------------------------+
+---------------------+---------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+===============+===+===+===+===+===+===+===+ | Length of N3IWF | octet (l+5)* | | | | | | | | | identifier | | | | | | | | | | configuration for | octet (l+6)* | | | | | | | | | 5G ProSe layer-3 | | | | | | | | | | remote UE | | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+ | Contents of N3IWF | octet (l+7)* | | | | | | | | | identifier | | | | | | | | | | configuration for | octet l0* | | | | | | | | | 5G ProSe layer-3 | | | | | | | | | | remote UE | | | | | | | | | +---------------------+---------------+---+---+---+---+---+---+---+
Figure 5.6.2.18: N3IWF identifier configuration for 5G ProSe layer-3 remote UE
Table 5.6.2.18: N3IWF identifier configuration for 5G ProSe layer-3 remote UE
+----------------------------------------------------------------------+ | Contents of N3IWF identifier configuration for 5G ProSe layer-3 | | remote UE (octet l+7 to l01): | | | | The contents of N3IWF identifier configuration for 5G ProSe layer-3 | | remote UE shall be encoded as the encoding of home N3IWF identifier | | configuration defined in clause 5.3.3.3 of 3GPP TS 24.526 [11]. | +----------------------------------------------------------------------+
+---------------------+----------------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +=====================+================+===+===+===+===+===+===+===+ | Length of 5G ProSe | octet (l0+1)* | | | | | | | | | layer-3 | | | | | | | | | | UE-to-network | octet (l0+2)* | | | | | | | | | relays access node | | | | | | | | | | selection | | | | | | | | | | information | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+ | Contents of 5G | octet (l0+3)* | | | | | | | | | ProSe layer-3 | | | | | | | | | | UE-to-network | octet m* | | | | | | | | | relays access node | | | | | | | | | | selection | | | | | | | | | | information | | | | | | | | | +---------------------+----------------+---+---+---+---+---+---+---+
Figure 5.6.2.19: 5G ProSe layer-3 UE-to-network relays access node selection
information
Table 5.6.2.19: 5G ProSe layer-3 UE-to-network relays access node selection
information
+----------------------------------------------------------------------+ | Contents of 5G ProSe layer-3 UE-to-network relays access node | | selection information (octet l0+3 to m): | | | | The contents of 5G ProSe layer-3 UE-to-network relays access node | | selection information shall be encoded as the encoding of N3AN node | | selection information defined in clause 5.3.3.2 of | | 3GPP TS 24.526 [11]. | +----------------------------------------------------------------------+ | NOTE: In this release of specification, the \"preference\" bit (as | | shown in figure 5.3.3.2.2 of 3GPP TS 24.526 [11]) is always set to | | \"0\". | +----------------------------------------------------------------------+
## 5.7 Encoding of UE policies for 5G ProSe usage information reporting
### 5.7.1 General
The UE policies for 5G ProSe usage information reporting are coded as shown in
figure 5.7.2.1 and table 5.7.2.1.
### 5.7.2 Information elements coding
+--------+--------+-------+-------+--------+--------+--------+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +========+========+=======+=======+========+========+========+===+===+ | 0 | 0 | 0 | 0 | ProSeP | octet | | | | | | | | | info | k | | | | | | | | | type = | | | | | | | | | | {UE | | | | | | | | | | po | | | | | | | | | | licies | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | | for 5G | | | | | | | | | | ProSe | | | | | | | | | | usage | | | | | | | | | | infor | | | | | | | | | | mation | | | | | | | | | | repo | | | | | | | | | | rting} | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Length | octet | | | | | | | | | of | k+1 | | | | | | | | | ProSeP | | | | | | | | | | info | octet | | | | | | | | | co | k+2 | | | | | | | | | ntents | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Va | octet | | | | | | | | | lidity | k+3 | | | | | | | | | timer | | | | | | | | | | | octet | | | | | | | | | | k+7 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Coll | octet | | | | | | | | | ection | k+8 | | | | | | | | | period | | | | | | | | | | | octet | | | | | | | | | | k+10 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | Rep | octet | | | | | | | | | orting | k+11 | | | | | | | | | window | | | | | | | | | | | octet | | | | | | | | | | k+13 | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | LRI | GPRI | TIORI | TTRRI | DTRI | DRRI | octet | | | | | | | | | | k+14 | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | 0 | 0 | 0 | RPRI | QRI | AT | octet | | | | | | | | | | k+15 | | | | Spare | Spare | Spare | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+ | 5G | octet | | | | | | | | | DDNMF | k+16 | | | | | | | | | CTF | | | | | | | | | | (ADF) | octet | | | | | | | | | a | m | | | | | | | | | ddress | | | | | | | | | | infor | | | | | | | | | | mation | | | | | | | | | | for | | | | | | | | | | upl | | | | | | | | | | oading | | | | | | | | | | the | | | | | | | | | | usage | | | | | | | | | | infor | | | | | | | | | | mation | | | | | | | | | | r | | | | | | | | | | eports | | | | | | | | | +--------+--------+-------+-------+--------+--------+--------+---+---+
Figure 5.7.2.1: ProSeP Info = {UE policies for 5G ProSe usage information
reporting }
+----------------------------------------------------------------------+ | ProSeP info type (bit 1 to 4 of octet k) shall be set to \"0101\" | | (UE policies for 5G ProSe usage information reporting) | +----------------------------------------------------------------------+ | Length of ProSeP info contents (octets k+1 to k+2) indicates the | | length of ProSeP info contents. | +----------------------------------------------------------------------+ | Validity timer (octet k+3 to k+7): | | | | The validity timer field provides the expiration time of validity of | | the UE policies for 5G ProSe usage information reporting. The | | validity timer field is a binary coded representation of a UTC time, | | in seconds since midnight UTC of January 1, 1970 (not counting leap | | seconds). | | | | Collection period (octet k+8 to octet k+10): | | | | The collection period field indicates the time interval, in unit of | | minutes, at which the UE shall generate the usage information | | reports. Setting the value of collection period to 0 disables | | generation of usage information reports at the UE. | | | | Reporting window (octet k+11 to k+13): | | | | The reporting window field indicates the time window, in units of | | minutes, during which the UE shall upload the usage information | | report. Setting the value of reporting window to 0 disables upload | | of the usage information reports by the UE. | | | | UE locations reporting indicator (LRI) (octet k+14 bit 8): | | | | The UE locations reporting indicator field indicates whether or not | | the UE shall report the list of locations of the UE when in NG-RAN | | coverage during the reporting period in the usage information. | | | | Bit | | | | **8** | | | | 0 Not to report | | | | 1 Report | | | | Group parameters reporting indicator (GPRI) (octet k+14 bit 7): | | | | The Group parameters reporting indicator field indicates whether or | | not the UE shall report the group parameters in the usage | | information report, in the case of groupcast mode 5G ProSe direct | | communication. | +----------------------------------------------------------------------+ | Bit | | | | **7** | | | | 0 Not to report | | | | 1 Report | | | | Time stamps in and out of NG-RAN coverage reporting indicator | | (TIORI) (octet k+14 bit 6): | | | | The time stamps in and out of NG-RAN coverage reporting indicator | | field indicates whether or not the UE shall report the time stamps | | when it went in and out of NG-RAN coverage during the collection | | period in the usage information. | | | | Bit | | | | **6** | | | | 0 Not to report | | | | 1 Report | | | | Time stamps of the first transmission/reception reporting indicator | | (TTRRI) (octet k+14 bit 5): | | | | The time stamps of the first transmission/reception reporting | | indicator field indicates whether or not the UE shall report the | | time stamps of the first transmission/reception during the | | collection period in the usage information. | | | | Bit | | | | **5** | | | | 0 Not to report | | | | 1 Report | | | | Data transmitted reporting indicator (DTRI) (octet k+14 bits 4 to | | 3): | | | | The data transmitted reporting indicator field indicates whether or | | not the UE shall report the amount of data transmitted during the | | collection period in the usage information report, and whether with | | location information. | | | | Bits | | | | **4 3** | | | | 0 0 Not to report | | | | 0 1 Report with location information | | | | 1 0 Report without location information | | | | 1 1 reserved | | | | Data received reporting indicator (DRRI) (octet k+14 bits 2 to 1): | | | | The data received reporting indicator field indicates whether or not | | the UE shall report the amount of data received during the | | collection period in the usage information report, and whether with | | location information. | | | | Bits | | | | 2 1 | | | | 0 0 Not to report | | | | 0 1 Report with location information | | | | 1 0 Report without location information | | | | 1 1 reserved | | | | Bits 8 to 6 of octet k+15 are spare and shall be encoded as zero. | | | | Radio parameters reporting indicator (RPRI) (octet k+15 bit 5): | | | | The radio parameters reporting indicator field indicates whether or | | not the UE shall report the radio parameters used for ProSe direct | | communication during the reporting period in the usage information. | | | | Bit | | | | **5** | | | | 0 Not to report | | | | 1 Report | | | | QoS flow reporting indicator (QRI) (octet k+15 bit 4): | | | | The QoS flow reporting indicator field indicates whether or not the | | UE shall report the QoS flow information during the reporting period | | in the usage information. | | | | Bit | | | | **4** | | | | 0 Not to report | | | | 1 Report | +----------------------------------------------------------------------+ | Address type (AT) (octet k+15 bits 3 to 1): | | | | The AT field indicates the type of the 5G DDNMF CTF (ADF) address | | information for uploading the usage information reports. | | | | Bits | | | | **3 2 1** | | | | 0 0 1 IPv4 | | | | 0 1 0 IPv6 | | | | 0 1 1 FQDN | | | | 1 0 0 IPv4v6 | | | | The other values are reserved. | | | | If the AT indicates IPv4, then the 5G DDNMF CTF (ADF) address | | information for uploading the usage information reports field | | contains an IPv4 address in 4 octets. | | | | If the AT indicates IPv6, then the 5G DDNMF CTF (ADF) address | | information for uploading the usage information reports field | | contains an IPv6 address in 16 octets. | | | | If the AT indicates FQDN, then the 5G DDNMF CTF (ADF) address | | information for uploading the usage information reports field | | contains a sequence of one octet FQDN length field and a FQDN value | | of variable size. The FQDN value field shall be encoded as defined | | in clause 28.3.2.1 in 3GPP TS 23.003 [10]. | | | | If the AT indicates IPv4v6, then the 5G DDNMF CTF (ADF) address | | information for uploading the usage information reports field | | contains a sequence of an IPv4 address in 4 octets and an IPv6 | | address in 16 octets. | | | | 5G DDNMF CTF (ADF) address information for uploading the usage | | information reports (octet k+16 to octet m): | | | | The 5G DDNMF CTF (ADF) address information for uploading the usage | | information reports field indicates the address to which the UE | | shall upload the usage information reports. | | | | If the length of ProSeP info contents field is bigger than indicated | | in figure 5.7.2.1, receiving entity shall ignore any superfluous | | octets located at the end of the ProSeP info contents. | +----------------------------------------------------------------------+
#