# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# Introduction
This clause is optional. If it exists, it is always the second unnumbered
clause.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
ADRF Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the ADRF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3]. The stage 2 definition and procedures of
store and retrieve the collected data and analytics are contained in 3GPP TS
23.288 [14] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
> [12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
> Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[15] 3GPP TS 29.520: \"5G System; Network Data Analytics Services; Stage 3\".
[16] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[17] 3GPP TS 29.508: \"5G System; Session Management Event Exposure Service;
Stage 3\".
[18] 3GPP TS 29.518: \"5G System; Access and Mobility Management Services;
Stage 3\".
[19] 3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".
[20] 3GPP TS 29.517: \"5G System; Application Function Event Exposure
Services; Stage 3\".
[21] 3GPP TS 29.591: \"5G System; Network Exposure Function Southbound
Services; Stage 3\".
[22] 3GPP TS 29.122: \"T8 reference point for Northbound APIs\".
[23] 3GPP TS 29.574: \"5G System; Data Collection Coordination Services; Stage
3\".
[24] 3GPP TS 29.576: \"5G System; Messaging Framework Adaptor Services; Stage
3\".
[25] 3GPP TS 29.536: \"5G System; Network Slice Admission Control Services;
Stage 3\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
None.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
None.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
ADRF Analytics Data Repository Function
AF Application Function
AMF Access and Mobility Management Function
DCCF Data Collection Coordination Function
MFAF Messaging Framework Adaptor Function
NEF Network Exposure Function
NF Network Function
NRF Network Repository Function
NWDAF Network Data Analytics Function
NSACF Network Slice Admission Control Function
SMF Session Management Function
UDM Unified Data Management
# 4 Services offered by the ADRF
## 4.1 Introduction
The Analytics Data Repository Service is used for the Analytics Data
Repository Function (ADRF) to storage and retrieval of data by e.g. Consumers
NF(s) (e.g. NWDAF) which access the data using Nadrf service. The ADRF offers
to other NFs the following service:
\- Nadrf_DataManagement.
Table 4.1-1: Service provided by ADRF
+-------------+-------------+-------------+-------------+-------------+ | Service | Description | Service | Operation | Example | | Name | | Operations | | Consumer(s) | | | | | Semantics | | +=============+=============+=============+=============+=============+ | Nadrf_Dat | This | Sto | Request / | DCCF, | | aManagement | service | rageRequest | Response | NWDAF, MFAF | | | enables the | | | | | | NF service | | | | | | consumers | | | | | | to store, | | | | | | retrieve | | | | | | and remove | | | | | | the data or | | | | | | analytics | | | | | | in an ADRF. | | | | +-------------+-------------+-------------+-------------+-------------+ | | | Stor | Request / | DCCF, NWDAF | | | | ageSubscrip | Response | | | | | tionRequest | | | +-------------+-------------+-------------+-------------+-------------+ | | | Stor | Request / | DCCF, NWDAF | | | | ageSubscrip | Response | | | | | tionRemoval | | | +-------------+-------------+-------------+-------------+-------------+ | | | Retri | Request / | DCCF, NWDAF | | | | evalRequest | Response | | +-------------+-------------+-------------+-------------+-------------+ | | | Retriev | Subscribe / | DCCF, NWDAF | | | | alSubscribe | Notify | | +-------------+-------------+-------------+-------------+-------------+ | | | Retrieval | Subscribe / | DCCF, NWDAF | | | | Unsubscribe | Notify | | +-------------+-------------+-------------+-------------+-------------+ | | | Retr | Subscribe / | DCCF, NWDAF | | | | ievalNotify | Notify | | +-------------+-------------+-------------+-------------+-------------+ | | | Delete | Request / | DCCF, NWDAF | | | | | Response | | +-------------+-------------+-------------+-------------+-------------+ | NOTE: The | | | | | | services | | | | | | correspond | | | | | | to the | | | | | | Nadrf_Dat | | | | | | aManagement | | | | | | service as | | | | | | defined in | | | | | | 3GPP TS 23. | | | | | | 288 [14]. | | | | | +-------------+-------------+-------------+-------------+-------------+
Table 4.1-2 summarizes the corresponding APIs defined for this specification.
Table 4.1-2: API Descriptions
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex**
* * *
Nadrf_DataManagement 4.2 API for Nadrf_DataManagement nadrf_datamanagement
Annex A.2 Nadrf_DataManagement API
## 4.2 Nadrf_DataManagement Service
### 4.2.1 Service Description
#### 4.2.1.1 Overview
The Nadrf_DataManagement service as defined in 3GPP TS 23.288 [14], is
provided by the Analytics Data Repository Function (ADRF).
This service:
\- allows NF consumers to store data or analytics in the ADRF;
\- allows NF consumers to retrieve data or analytics from an ADRF; and
\- allows NF consumers to delete data or analytics from an ADRF.
NOTE: Storage of ML models in ADRF is not specified in this Release of the
specification.
#### 4.2.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Network Data
Analytics Exposure architecture is defined in 3GPP TS 23.288 [14].
The Nadrf_DataManagement service is part of the Nadrf service-based interface
exhibited by the Analytics Data Repository Function (ADRF).
Known consumers of the Nadrf_DataManagement service are:
\- Data Collection Coordination Function (DCCF)
\- Network Data Analytics Function (NWDAF)
\- Messaging Framework Adaptor Function (MFAF)
The Nadrf_DataManagement service is provided by the ADRF and consumed by the
NF service consumers as shown in figure 4.2.1.2-1 for the SBI representation
model and in figure 4.2.1.2-2 for the reference point representation model.
Figure 4.2.1.2-1: Reference Architecture for the Nadrf_DataManagement Service;
SBI representation
Figure 4.2.1.2-2: Nadrf_DataManagement service architecture, reference point
representation
#### 4.2.1.3 Network Functions
##### 4.2.1.3.1 Analytics Data Repository Function (ADRF)
The Analytics Data Repository Function (ADRF) provides the functionality to
allow NF consumers to store, retrieve, and remove data or analytics from the
ADRF.
##### 4.2.1.3.2 NF Service Consumers
The NWDAF and DCCF:
\- supports storing data or analytics in the ADRF;
\- supports retrieving data or analytics from an ADRF; and
\- supports deletion data or analytics from an ADRF.
The MFAF:
\- supports storing data or analytics in the ADRF.
### 4.2.2 Service Operations
#### 4.2.2.1 Introduction
Table 4.2.2.1-1: Operations of the Nadrf_DataManagement Service
Service operation name Description Initiated by
* * *
Nadrf_DataManagement_StorageRequest This service operation is used by an NF to
request the ADRF to store data or analytics. Data or analytics are provided to
the ADRF in the request message. NF service consumer (DCCF, NWDAF, MFAF)
Nadrf_DataManagement_StorageSubscriptionRequest This service operation is used
by an NF to request the ADRF to initiate a subscription for data or analytics.
Data or analytics provided in notifications as a result of the subsequent
subscription by the ADRF are stored in the ADRF. NF service consumer (DCCF,
NWDAF) Nadrf_DataManagement_StorageSubscriptionRemoval This service operation
is used by an NF to request that the ADRF no longer subscribes to data or
analytics it is collecting and storing. NF service consumer (DCCF, NWDAF)
Nadrf_DataManagement_RetrievalRequest This service operation is used by an NF
to retrieve stored data or analytics from the ADRF. NF service consumer (DCCF,
NWDAF) Nadrf_DataManagement_RetrievalSubscribe This service operation is used
by an NF to retrieve stored data or analytics from the ADRF and to receive
future notifications containing the corresponding data or analytics received
by ADRF. NF service consumer (DCCF, NWDAF)
Nadrf_DataManagement_RetrievalUnsubscribe This service operation is used by an
NF to request that the ADRF no longer sends data or analytics to a
notification endpoint. NF service consumer (DCCF, NWDAF)
Nadrf_DataManagement_RetrievalNotify This service operation is used by the
ADRF to notify an NF with either data or analytics, or instructions to fetch
the data or analytics from the ADRF. ADRF Nadrf_DataManagement_Delete This
service operation is used by an NF to delete stored data in ADRF. NF service
consumer (DCCF, NWDAF)
#### 4.2.2.2 Nadrf_DataManagement_StorageRequest service operation
##### 4.2.2.2.1 General
The Nadrf_DataManagement_StorageRequest service operation is used by an NF
service consumer to store data or analytics.
##### 4.2.2.2.2 Request Storage of data or analytics
Figure 4.2.2.2.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to store data or analytics.
Figure 4.2.2.2.2-1: NF service consumer requesting to store data or analytics
The NF service consumer shall invoke the Nadrf_DataManagement_StorageRequest
service operation to store data or analytics. The NF service consumer shall
send an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/data-store-records\" as Resource URI representing
the \"ADRF Data Store Records\" resource, as shown in figure 4.2.2.2.2-1, step
1, to create an \"Individual ADRF Data Store Record\" according to the
information in the message body. The NadrfDataStoreRecord data structure
provided in the request body shall include:
\- one of the following:
\- analytics subscription notification(s) within the \"anaNotifications\"
attribute together with the corresponding subscription information within the
\"anaSub\" attribute;
\- data subscription notification within the \"dataNotif\" attribute together
with the corresponding subscription information within the \" dataSub\"
attribute.
Upon the reception of an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/data-store-records\" as Resource URI and
NadrfDataStoreRecord data structure as request body, the ADRF shall:
\- create a new data store record;
\- assign a storeTransId;
\- store the data or analytics.
NOTE: If the data and/or analytics is already stored or being stored in the
ADRF, the ADRF will still create a new \"Individual ADRF Data Store Record\"
resource and assign a new storeTransId if the ADRF intends to not really store
the data again in the memory again based on the implementation.
If the ADRF created an \"Individual ADRF Data Store Record\" resource, the
ADRF shall respond with \"201 Created\" with the message body containing a
representation of the created record, as shown in figure 4.2.2.2.2-1, step 2.
The ADRF shall include a Location HTTP header field. The Location header field
shall contain the URI of the created record i.e. \"{apiRoot}/nadrf-
datamanagement/\/data-store-records/{storeTransId}\".
If an error occurs when processing the HTTP POST request, the ADRF shall send
an HTTP error response as specified in clause 5.1.7.
#### 4.2.2.3 Nadrf_DataManagement_StorageSubscriptionRequest service operation
##### 4.2.2.3.1 General
The Nadrf_DataManagement_StorageSubscriptionRequest service operation is used
by an NF service consumer to request that the ADRF creates a subscription to
data or analytics and subsequently stores notified data or analytics in the
ADRF.
##### 4.2.2.3.2 Requesting subscription and storage of data or analytics
Figure 4.2.2.3.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to subscribe for data or analytics to be stored in the
ADRF.
Figure 4.2.2.3.2-1: NF service consumer requesting that the ADRF subscribes to
and subsequently stores data or analytics
The NF service consumer shall invoke the
Nadrf_DataManagement_StorageSubscriptionRequest service operation to request
the ADRF to subscribe to data or analytics. The NF service consumer shall send
an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/request-storage-sub\" as URI, as shown in figure
4.2.2.3.2-1, step 1. The NadrfDataStoreSubscription data structure provided in
the request body shall include:
\- one of the following subscription attributes:
\- analytics subscription information within the \"anaSub\" attribute;
\- data subscription information within the \"dataSub\" attribute;
\- one of the following target identifiers:
\- DCCF or NWDAF instance identifier within the \"targetNfId\" attribute;
\- DCCF or NWDAF NF set identifier within the \"targetNfSetId\" attribute;
and may include:
\- formatting instructions within the \"formatInstruct\" attribute;
\- processing instructions within the \"procInstruct\" attribute.
Upon the reception of an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/request-storage-sub\" as URI and
NadrfDataStoreSubscription data structure as request body, the ADRF shall
assign a transaction reference identifier to this request and, if the request
is successfully processed and accepted, the ADRF shall respond with \"200 OK\"
as shown in figure 4.2.2.3.2-1 step 2, with the message body containing an
NadrfDataStoreSubscriptionRef data structure, which shall include the assigned
transaction reference identifier as \"transRefId\" attribute.
NOTE: If the data and/or analytics is already stored or being stored in the
ADRF, the ADRF will still assign a new transaction reference identifier if the
ADRF intends to not really store the data again in the memory again based on
the implementation.
If an error occurs when processing the HTTP POST request, the ADRF shall send
an HTTP error response as specified in clause 5.1.7.
In the case of a successful response, the ADRF may subsequently create a data
or analytics subscription (according to inputs that had been received in the
NadrfDataStoreSubscription data structure; this is not performed if the ADRF
determines that the data is already being stored based on an existing
subscription) with a DCCF as described in 3GPP TS 29.574 [23] or with an NWDAF
as described in 3GPP TS 29.520 [15], and create a mapping between the
previously assigned and returned transaction reference identifier and the
subscription that is used to serve the transaction.
#### 4.2.2.4 Nadrf_DataManagement_StorageSubscriptionRemoval service operation
##### 4.2.2.4.1 General
The Nadrf_DataManagement_StorageSubscriptionRemoval service operation is used
by an NF service consumer to request the ADRF to remove a subscription for
data or analytics.
##### 4.2.2.4.2 Requesting removal of subscription of data or analytics
Figure 4.2.2.4.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to unsubscribe for storage of data or analytics.
Figure 4.2.2.4.2-1: NF service consumer requesting the removal of a
subscription to storage of data or analytics
The NF service consumer shall invoke the
Nadrf_DataManagement_StorageSubscriptionRemoval service operation to request
the ADRF to remove a subscription to data or analytics that are stored in the
ADRF. The NF service consumer shall send an HTTP POST request with
\"{apiRoot}/nadrf-datamanagement/\/request-storage-sub-removal\"
as URI, as shown in figure 4.2.2.4.2-1, step 1. The POST request body shall
contain an NadrfDataStoreSubscriptionRef data structure, which shall include a
transaction reference identifier as \"transRefId\" attribute.
Upon the reception of an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/request-storage-sub-removal\" as URI, if the ADRF
successfully processed and accepted the received HTTP POST request, the ADRF
shall respond with HTTP \"204 No Content\" status. Subsequently, the ADRF
shall remove the (DCCF or NWDAF) subscription that had been created and mapped
to the received transaction reference identifier as described in clause
4.2.2.3, unless this subscription is mapped to further transaction reference
identifiers (of transactions that are still active).
If errors occur when processing the HTTP POST request, the ADRF shall send an
HTTP error response as specified in clause 5.1.7.
#### 4.2.2.5 Nadrf_DataManagement_RetrievalRequest service operation
##### 4.2.2.5.1 General
The Nadrf_DataManagement_RetrievalRequest service operation is used by an NF
service consumer to retrieve stored data or analytics.
##### 4.2.2.5.2 Request and get stored data or analytics from ADRF Data Store
Figure 4.2.2.5.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to retrieve stored data or analytics.
Figure 4.2.2.5.2-1: NF service consumer requesting to retrieve stored data or
analytics
The NF service consumer shall invoke the Nadrf_DataManagement_RetrievalRequest
service operation to retrieve stored data or analytics. The NF service
consumer shall send an HTTP GET request with \"{apiRoot}/nadrf-
datamanagement/v1/data-store-records\" as Resource URI representing the \"ADRF
Data Store Records\" resource, as shown in figure 4.2.2.5.2-1, step 1, to
request ADRF data store records according to the query parameter value of the
store transaction identifier within the \"store-trans-id\" attribute or the
query parameter value of the fetch correlation identifier(s) within the
\"fetch-correlation-ids\" attribute.
Upon the reception of the HTTP GET request, the ADRF shall:
\- find the data or analytics according to the requested parameters.
If the requested data or analytics is found, the ADRF shall respond with \"200
OK\" status code with the message body containing the NadrfDataStoreRecord
data structure. The NadrfDataStoreRecord data structure in the response body
shall include:
\- one of the following:
\- information about network analytics function events that occurred in the
\"anaNotifications\" attribute together with the corresponding subscription
information within the \"anaSub\" attribute;
\- information about data event within the \"dataNotif\" attribute together
with the corresponding subscription information within the \"dataSub\"
attribute.
If the requested analytics or data does not exist, the ADRF shall respond with
\"204 No Content\". If an error occurs when processing the HTTP GET request,
the ADRF shall send an HTTP error response as specified in clause 5.1.7.
#### 4.2.2.6 Nadrf_DataManagement_RetrievalSubscribe service operation
##### 4.2.2.6.1 General
The Nadrf_DataManagement_RetrievalSubscribe service operation is used by an NF
service consumer to subscribe to the ADRF to retrieve via notifications data
or analytics that is stored in the ADRF and to receive future notifications
with data or analytics when they are received by the ADRF.
##### 4.2.2.6.2 Requesting retrieval and subscription of data or analytics
Figure 4.2.2.6.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to retrieve and subscribe to data or analytics.
Figure 4.2.2.6.2-1: NF service consumer requesting to retrieve and subscribe
to data or analytics
The NF service consumer shall invoke the
Nadrf_DataManagement_RetrievalSubscribe service operation to retrieve and
subscribe to data or analytics. The NF service consumer shall send an HTTP
POST request with \"{apiRoot}/nadrf-datamanagement/\/data-
retrieval-subscriptions\" as Resource URI representing the \"ADRF Data
Retrieval Subscriptions\" resource, as shown in figure 4.2.2.6.2-1, step 1, to
create an \"Individual ADRF Data Retrieval Subscription\" according to the
information in the message body. The NadrfDataRetrievalSubscription data
structure provided in the request body shall include:
\- notification correlation identfier within the \"notifCorrId\" attribute;
\- one of the following:
> \- analytics subscription information within the \"anaSub\" attribute;
>
> \- data subscription information within the \"dataSub\" attribute;
\- a notification target address within the \"notificationURI\" attribute;
\- a time window for the data retrieval and subscription within the
\"timePeriod\" attribute;
Upon the reception of an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/v1/data-retrieval-subscriptions\" as Resource URI and
NadrfDataRetrievalSubscription data structure as request body, the ADRF shall:
\- create a new subscription;
\- assign a subscriptionId;
\- store the subscription.
If the ADRF created an \"Individual ADRF Data Retrieval Subscription\"
resource, the ADRF shall respond with \"201 Created\" with the message body
containing a representation of the created subscription, as shown in figure
4.2.2.6.2-1, step 2. The ADRF shall include a Location HTTP header field. The
Location header field shall contain the URI of the created record i.e.
\"{apiRoot}/nadrf-datamanagement/\/data-retrieval-
subscriptions/{subscriptionId}\".
If an error occurs when processing the HTTP POST request, the ADRF shall send
an HTTP error response as specified in clause 5.1.7.
#### 4.2.2.7 Nadrf_DataManagement_RetrievalUnsubscribe service operation
##### 4.2.2.7.1 General
The Nadrf_DataManagement_RetrievalUnsubscribe service operation is used by an
NF service consumer to remove a retrieval subscription to data or analytics.
##### 4.2.2.7.2 Requesting removal of retrieval subscription for data or
analytics
Figure 4.2.2.7.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to remove a retrieval subscription for data or analytics.
Figure 4.2.2.7.2-1: NF service consumer requesting to remove retrieval
subscription for data or analytics
The NF service consumer shall invoke the
Nadrf_DataManagement_RetrievalUnsubscribe service operation to remove a
retrieval subscription for data or analytics. The NF service consumer shall
send an HTTP DELETE request with \"{apiRoot}/nadrf-
datamanagement/\/data-retrieval-subscriptions/{subscriptionId}\"
as Resource URI representing an \"Individual ADRF Data Retrieval
Subscription\" resource, as shown in figure 4.2.2.7.2-1, step 1, where
\"{subscriptionId}\" is the identifier of the existing data retrieval
subscription that is to be deleted.
Upon the reception of an HTTP DELETE request with \"{apiRoot}/nadrf-
datamanagement/\/data-retrieval-subscriptions/{subscriptionId}\"
as Resource URI, if the ADRF successfully processed and accepted the received
HTTP DELETE request, the ADRF shall:
\- remove the corresponding subscription;
\- respond with HTTP \"204 No Content\" status.
If errors occur when processing the HTTP DELETE request, the ADRF shall send
an HTTP error response as specified in clause 5.1.7.
If the ADRF determines the received HTTP DELETE request needs to be
redirected, the ADRF shall send an HTTP redirect response as specified in
clause 6.10.9 of 3GPP TS 29.500 [4].
#### 4.2.2.8 Nadrf_DataManagement_RetrievalNotify service operation
##### 4.2.2.8.1 General
The Nadrf_DataManagement_RetrievalNotify service operation is used by ADRF to
notify NF service consumers about subscribed events related to data or
analytics.
##### 4.2.2.8.2 Notification about subscribed data or analytics
Figure 4.2.2.8.2-1 shows a scenario where the ADRF sends a request to the NF
service consumer to notify it about data or analytics events.
Figure 4.2.2.8.2-1: ADRF notifies the NF service consumer about subscribed
data or analytics
The ADRF shall invoke the Nadrf_DataManagement_RetrievalNotify service
operation to notify about subscribed data or analytics events. The ADRF shall
send an HTTP POST request to the \"{notificationURI}\" received in the
subscription (see clause 5.1.5 for the definition of this notificationURI), as
shown in figure 4.2.2.8.2-1, step 1. The NadrfDataRetrievalNotification data
structure provided in the request body shall include:
\- notification correlation Id within the \"notifCorrId\" attribute;
\- the time stamp which represents the time when ADRF completes preparation of
the requested data or analytics within the \"timeStamp\" attribute;
\- one of the following:
\- information about network data analytics function events that occurred in
the \"anaNotifications\" attribute;
> \- data collected from data sources (e.g. SMF, NEF) in the \"dataNotif\"
> attribute;
\- information for fetching the data or analytics in the \"fetchInstruct\"
attribute.
NOTE: The fetch correlation identifiers included in the fetch instructions of
the \"fetchInstruct\" attribute can be used to fetch data or analytics using
the Nadrf_DataManagement_RetrievalRequest service operation as described in
clause 4.2.2.5.2. The (mandatory) fetch URI included in the fetch instructions
of the \"fetchInstruct\" attribute is expected to be in line with the standard
resource URI defined for the Nadrf_DataManagement_RetrievalRequest service
operation, i.e. {apiRoot}/nadrf-datamanagement/\/data-store-
records, but it can be anything because it is actually not needed by the NF
service consumer in this case.
The NadrfDataRetrievalNotification data structure provided in the request body
may include:
\- a termination request provided by the ADRF within the \"terminationReq\"
attribute.
Upon the reception of an HTTP POST request with \"{notificationURI}\" as
Resource URI and NadrfDataRetrievalNotification data structure as request
body, if the NF service consumer successfully processed and accepted the
received HTTP POST request, the NF Service Consumer shall:
\- store the notification;
\- respond with HTTP \"204 No Content\" status code.
If errors occur when processing the HTTP POST request, the NF service consumer
shall send an HTTP error response as specified in clause 5.1.7.
If the NF service consumer determines the received HTTP POST request needs to
be redirected, the NF service consumer shall send an HTTP redirect response as
specified in clause 6.10.9 of 3GPP TS 29.500 [4].
#### 4.2.2.9 Nadrf_DataManagement_Delete service operation
##### 4.2.2.9.1 General
The Nadrf_DataManagement_Delete service operation is used by an NF service
consumer to delete stored data or analytics.
##### 4.2.2.9.2 Requesting removal of stored data or analytics
Figure 4.2.2.9.2-1 shows a scenario where the NF service consumer sends a
request to the ADRF to delete stored data or analytics.
Figure 4.2.2.9.2-1: NF service consumer requesting to remove stored data or
analytics
The NF service consumer shall invoke the Nadrf_DataManagement_Delete service
operation to remove stored data or analytics. The NF service consumer shall
send an HTTP DELETE request with \"{apiRoot}/nadrf-
datamanagement/\/data-store-records/{storeTransId}\" as Resource
URI representing an \"Individual ADRF Data Store Record\" resource, as shown
in figure 4.2.2.9.2-1, step 1, where \"{storeTransId}\" is the transaction
identifier of the stored record that is to be deleted.
Upon the reception of an HTTP DELETE request with \"{apiRoot}/nadrf-
datamanagement/\/data-store-records/{storeTransId}\" as Resource
URI, if the ADRF successfully processed and accepted the received HTTP DELETE
request, the ADRF shall:
\- remove the corresponding stored record;
\- respond with HTTP \"204 No Content\" status code.
If errors occur when processing the HTTP DELETE request, the ADRF shall send
an HTTP error response as specified in clause 5.1.7.
If the ADRF determines the received HTTP DELETE request needs to be
redirected, the ADRF shall send an HTTP redirect response as specified in
clause 6.10.9 of 3GPP TS 29.500 [4].
##### 4.2.2.9.3 Requesting removal of stored data or analytics using data or
analytics specification
Figure 4.2.2.9.3-1 shows a scenario where the NF service consumer sends a
request to the ADRF to delete stored data or analytics based on a data or
analytics specification.
Figure 4.2.2.9.3-1: NF service consumer requesting to remove stored data or
analytics
The NF service consumer shall invoke the Nadrf_DataManagement_Delete service
operation to remove stored data or analytics based on a data or analytics
specification. The NF service consumer shall send an HTTP POST request with
\"{apiRoot}/nadrf-datamanagement/\/remove-stored-data-analytics\"
as URI, as shown in figure 4.2.2.9.3-1, step 1. The POST request body shall
contain an NadrfStoredDataSpec data structure. The NadrfStoredDataSpec data
structure provided in the request body shall include:
\- a time window in which the data to be deleted was collected in the
\"timePeriod\" attribute; and
\- one of the following:
\- a data specification in the \"dataSpec\" attribute;
\- an analytics specification in the \"anaSpec\" attribute;
Upon the reception of an HTTP POST request with \"{apiRoot}/nadrf-
datamanagement/\/remove-stored-data-analytics\" as URI, if the
ADRF successfully processed and accepted the received HTTP POST request, the
ADRF shall respond with HTTP \"204 No Content\" status. The ADRF shall remove
any stored analytics or data that match the analytics or data specification
received in the request.
If errors occur when processing the HTTP POST request, the ADRF shall send an
HTTP error response as specified in clause 5.1.7.
# 5 API Definitions
## 5.1 Nadrf_DataManagement Service API
### 5.1.1 Introduction
The Nadrf_DataManagement service shall use the Nadrf_DataManagement API.
The API URI of the Nadrf_DataManagement API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"**nadrf-datamanagement** \".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
5.1.3.
### 5.1.2 Usage of HTTP
#### 5.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nadrf_DataManagement API is contained in Annex A.
#### 5.1.2.2 HTTP standard headers
##### 5.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 5.1.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 5.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be applicable.
### 5.1.3 Resources
#### 5.1.3.1 Overview
This clause describes the structure for the Resource URIs, the resources and
methods used for the service.
Figure 5.1.3.1-1 depicts the resource URIs structure for the
Nadrf_DataManagement API.
Figure 5.1.3.1-1: Resource URI structure of the Nadrf_DataManagement API
Table 5.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.1.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
ADRF Data Store Records /data-store-records GET Retrieve the stored data or
analytics POST Create a new Individual Data Store resource. Individual ADRF
Data Store Record /data-store-records/{storeTransId} DELETE Delete an
individual ADRF Data Store Record identified by {storeTransId}. ADRF Data
Retrieval Subscriptions /data-retrieval-subscriptions POST Create a new
Individual ADRF Data Retrieval Subscription resource. Individual ADRF Data
Retrieval Subscription /data-retrieval-subscriptions/{subscriptionId} DELETE
Delete an individual ADRF Data Retrieval Subscription identified by
{subscriptionId}.
#### 5.1.3.2 Resource: ADRF Data Store Records
##### 5.1.3.2.1 Description
The ADRF Data Store Records resource represents all data storage records to
the Nadrf_DataManagement Service at a given ADRF. The resource allows an NF
service consumer to create a new Individual ADRF Data Store Record resource
and to retrieve Individual ADRF Data Store Record resources that fulfil
certain criteria.
##### 5.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nadrf-datamanagement/\ /data-store-
records**
The \ shall be set as described in clause 5.1.1.
This resource shall support the resource URI variables defined in table
5.1.3.2.2-1.
Table 5.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1
##### 5.1.3.2.3 Resource Standard Methods
###### 5.1.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.1.3.2.3.1-1.
Table 5.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.1.3.2.3.1-2 and the response data structures and response codes specified in
table 5.1.3.2.3.1-3.
Table 5.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description NadrfDataStoreRecord M 1 New individual
Data Store Record to be created
* * *
Table 5.1.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | NadrfDa | M | 1 | 201 Created | The creation | | taStoreRecord | | | | of an | | | | | | Individual | | | | | | Data Store | | | | | | Record | | | | | | resource is | | | | | | confirmed, | | | | | | and a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.1.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 5.1.3.2.3.1-4: Headers supported by the 201 response code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nadrf-
datamanagement/\/data-store-records/{storeTransId}
* * *
###### 5.1.3.2.3.2 GET
This method shall support the URI query parameters specified in table
5.1.3.2.3.2-1.
Table 5.1.3.2.3.2-1: URI query parameters supported by the GET method on this
resource
Name Data type P Cardinality Description
* * *
store-trans-id string O 0..1 Identifies the \"Storage Transaction Identifier\"
of data store record in ADRF. (NOTE) fetch-correlation-ids array(string) O
1..N Identifies fetch correlation identifiers received as part of fetch
instruction. (NOTE) NOTE: Either \"store-trans-id\" or \"fetch-correlation-
ids\" shall be provided.
This method shall support the request data structures specified in table
5.1.3.2.3.1-2 and the response data structures and response codes specified in
table 5.1.3.2.3.1-3.
Table 5.1.3.2.3.1-2: Data structures supported by the GET Request Body on this
resource
Data type P Cardinality Description
* * *
n/a
Table 5.1.3.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | NadrfDa | M | 1 | 200 OK | Data Store | | taStoreRecord | | | | record. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | If the | | | | | Content | request ADRF | | | | | | Data Store | | | | | | Record does | | | | | | not exist, | | | | | | the ADRF | | | | | | shall respond | | | | | | with \"204 No | | | | | | Content \". | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
##### 5.1.3.2.4 Resource Custom Operations
None.
#### 5.1.3.3 Resource: Individual ADRF Data Store Record
##### 5.1.3.3.1 Description
The Individual ADRF Data Store Record resource represents data or analytics
stored via the Nadrf_DataManagement_StorageRequest in ADRF.
##### 5.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/nadrf-datamanagement/\ /data-store-
records/{storeTransId}**
The \ shall be set as described in clause 5.1.1.
This resource shall support the resource URI variables defined in table
5.1.3.3.2-1.
Table 5.1.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1. storeTransId string Identifies an individual
data store record.
##### 5.1.3.3.3 Resource Standard Methods
###### 5.1.3.3.3.1 DELETE
This method shall support the URI query parameters specified in table
5.1.3.3.3.1-1.
Table 5.1.3.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.1.3.3.3.1-2 and the response data structures and response codes specified in
table 5.1.3.3.3.1-3.
Table 5.1.3.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
Data type P Cardinality Description
* * *
n/a
Table 5.1.3.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | Individual | | | | | | ADRF Data | | | | | | Store Record | | | | | | resource was | | | | | | deleted | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | ADRF Data | | | | | | Store Record | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | ADRF | | | | | | (service) | | | | | | instance. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | ADRF Data | | | | | | Store Record | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | ADRF | | | | | | (service) | | | | | | instance. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.1.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative ADRF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.1.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative ADRF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.1.3.3.4 Resource Custom Operations
None in this release of the specification.
#### 5.1.3.4 Resource: ADRF Data Retrieval Subscriptions
##### 5.1.3.4.1 Description
The ADRF Data Retrieval Subscriptions resource represents all data retrieval
subscriptions to the Nadrf_DataManagement Service at a given ADRF. The
resource allows an NF service consumer to create a new Individual ADRF Data
Retrieval Subscription resource.
##### 5.1.3.4.2 Resource Definition
Resource URI: **{apiRoot}/nadrf-datamanagement/\ /data-retrieval-
subscriptions**
The \ shall be set as described in clause 5.1.1.
This resource shall support the resource URI variables defined in table
5.1.3.4.2-1.
Table 5.1.3.4.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1
##### 5.1.3.4.3 Resource Standard Methods
###### 5.1.3.4.3.1 POST
This method shall support the URI query parameters specified in table
5.1.3.4.3.1-1.
Table 5.1.3.4.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.1.3.4.3.1-2 and the response data structures and response codes specified in
table 5.1.3.4.3.1-3.
Table 5.1.3.4.3.1-2: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
NadrfDataRetrievalSubscription M 1 Individual ADRF Data Retrieval Subscription
resource to be created.
Table 5.1.3.4.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | Nadr | M | 1 | 201 Created | The creation | | fDataRetrieva | | | | of an | | lSubscription | | | | Individual | | | | | | ADRF Data | | | | | | Retrieval | | | | | | Subscription | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 5.1.3.4.3.1-4: Headers supported by the 201 response code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nadrf-
datamanagement/v1/data-retrieval-subscriptions/{subscriptionId}
* * *
##### 5.1.3.4.4 Resource Custom Operations
None in this release of the specification.
#### 5.1.3.5 Resource: Individual ADRF Data Retrieval Subscription
##### 5.1.3.5.1 Description
The Individual ADRF Data Retrieval Subscription resource represents single
ADRF data retrieval subscription to the Nadrf_DataManagement Service at a
given ADRF. The resource allows an NF service consumer to delete Individual
ADRF Data Retrieval Subscription resource.
##### 5.1.3.5.2 Resource Definition
Resource URI: **{apiRoot}/nadrf-datamanagement/v1/data-retrieval-
subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
5.1.3.5.2-1.
Table 5.1.3.5.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1 subscriptionId string Identifies a
subscription to the Nadrf_DataManagement service.
##### 5.1.3.5.3 Resource Standard Methods
###### 5.1.3.5.3.1 DELETE
This method shall support the URI query parameters specified in table
5.1.3.5.3.1-1.
Table 5.1.3.5.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.1.3.5.3.1-2 and the response data structures and response codes specified in
table 5.1.3.5.3.1-3.
Table 5.1.3.5.3.1-2: Data structures supported by the DELETE Request Body on
this resource
Data type P Cardinality Description
* * *
n/a
Table 5.1.3.5.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | Individual | | | | | | ADRF Data | | | | | | Retrieval | | | | | | Subscription | | | | | | resource was | | | | | | deleted | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | ADRF Data | | | | | | Retrieval | | | | | | Subscription | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | ADRF | | | | | | (service) | | | | | | instance. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | ADRF Data | | | | | | Retrieval | | | | | | Subscription | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | ADRF | | | | | | (service) | | | | | | instance. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.1.3.5.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative ADRF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.1.3.5.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative ADRF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.1.3.5.4 Resource Custom Operations
None in this release of the specification.
### 5.1.4 Custom Operations without associated resources
#### 5.1.4.1 Overview
The structure of the custom operation URIs of the Nadrf_DataManagement service
is shown in Figure 5.1.4.1-1.
Figure 5.1.4.1-1: Custom operation URI structure of the Nadrf_DataManagement
API
Table 5.1.4.1-1 provides an overview of the custom operations and applicable
HTTP methods.
Table 5.1.4.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/nadrf-datamanagement/\/request-storage-sub POST Request
the ADRF to create a subscription for data or analytics and then store the
received data or analytics in the ADRF. {apiRoot}/nadrf-
datamanagement/\/request-storage-sub-removal POST Request the ADRF
to remove a subscription for data or analytics. {apiRoot}/nadrf-
datamanagement/\/remove-stored-data-analytics POST Request the
ADRF to remove already stored data or analytics.
#### 5.1.4.2 Operation: request-storage-sub
##### 5.1.4.2.1 Description
The operation is used by the NF service consumer to request the ADRF to create
a subscription for data or analytics and then store the received data or
analytics in the ADRF.
##### 5.1.4.2.2 Operation Definition
This operation shall support the request data structures shown in Table
5.1.4.2.2-1 and the response data structures and error codes specified in
Tables 5.1.4.2.2-2.
Table 5.1.4.2.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NadrfDataStoreSubscription M 1 Information
about the storage subscription that the ADRF shall create.
* * *
Table 5.1.4.2.2-2: Data structures supported by the POST Response Body on this
resource
+-----------------+---+-------------+----------+-----------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +-----------------+---+-------------+----------+-----------------+ | NadrfDataStore | M | 1 | 200 OK | Successful | | SubscriptionRef | | | | request to | | | | | | trigger the | | | | | | creation of a | | | | | | subscription | | | | | | for data or | | | | | | analytics at | | | | | | the ADRF. A | | | | | | reference is | | | | | | provided. | +-----------------+---+-------------+----------+-----------------+ | NOTE: The | | | | | | manadatory HTTP | | | | | | error status | | | | | | code for the | | | | | | POST method | | | | | | listed in | | | | | | Table 5.1.7.1-1 | | | | | | of | | | | | | 3GPP | | | | | | TS 29.500 [4] | | | | | | also apply. | | | | | +-----------------+---+-------------+----------+-----------------+
#### 5.1.4.3 Operation: request-storage-sub-removal
##### 5.1.4.3.1 Description
The operation is used by the NF service consumer to request the ADRF to remove
a subscription for data or analytics which was used to store the received data
or analytics in the ADRF.
##### 5.1.4.3.2 Operation Definition
This operation shall support the request data structures shown in Table
5.1.4.3.2-1 and the response data structures and error codes specified in
Tables 5.1.4.3.2-2.
Table 5.1.4.3.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NadrfDataStoreSubscriptionRef M 1
Reference used to identify the subscription that the ADRF shall remove.
* * *
Table 5.1.4.3.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | request to | | | | | | trigger the | | | | | | removal of a | | | | | | subscription | | | | | | for data or | | | | | | analytics at | | | | | | the ADRF. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.1.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
#### 5.1.4.4 Operation: remove-stored-data-analytics
##### 5.1.4.4.1 Description
The operation is used by the NF service consumer to request the ADRF to remove
stored data or analytics based on a data or analytics specification.
##### 5.1.4.4.2 Operation Definition
This operation shall support the request data structures shown in Table
5.1.4.4.2-1 and the response data structures and error codes specified in
Tables 5.1.4.4.2-2.
Table 5.1.4.4.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NadrfStoredDataSpec M 1 Information about
the specification of data or analytics stored in ADRF.
* * *
Table 5.1.4.4.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | request to | | | | | | remove data | | | | | | or analytics | | | | | | at the ADRF | | | | | | based on a | | | | | | data or | | | | | | analytics | | | | | | s | | | | | | pecification. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.1.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
### 5.1.5 Notifications
#### 5.1.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 5.1.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | Retrieval | {no | POST | Report data or | | Notification | tificationURI} | | analytics from | | | | | ADRF. | +----------------+----------------+----------------+----------------+
#### 5.1.5.2 Retrieval Notification
##### 5.1.5.2.1 Description
The Retrieval Notification is used by the NF service producer to report one or
several data retrieval events to an NF service consumer that has subscribed to
such notifications.
##### 5.1.5.2.2 Target URI
The Callback URI **\"{notificationURI}\"** shall be used with the callback URI
variables defined in table 5.1.5.2.2-1.
Table 5.1.5.2.2-1: Callback URI variables
Name Definition
* * *
notificationURI String formatted as URI with the Callback Uri
##### 5.1.5.2.3 Standard Methods
###### 5.1.5.2.3.1 POST
This method shall support the request data structures specified in table
5.1.5.2.3.1-1 and the response data structures and response codes specified in
table 5.1.5.2.3.1-2.
Table 5.1.5.2.3.1-1: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
NadrfDataRetrievalNotification M 1 Provides information about observed data or
analytics.
Table 5.1.5.2.3.1-2: Data structures supported by the POST Response Body
Data type P Cardinality Response codes Description
* * *
n/a 204 No Content The receipt of the Notification is acknowledged.
RedirectResponse O 0..1 307 Temporary Redirect Temporary redirection, during
the retrieval notification. The response shall include a Location header field
containing an alternative URI representing the end point of an alternative NF
consumer (service) instance where the notification should be sent.
RedirectResponse O 0..1 308 Permanent Redirect Permanent redirection, during
the retrieval notification. The response shall include a Location header field
containing an alternative URI representing the end point of an alternative NF
consumer (service) instance where the notification should be sent. NOTE: The
mandatory HTTP error status codes for the POST method listed in Table
5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
Table 5.1.5.2.3.1-3: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
Table 5.1.5.2.3.1-4: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
### 5.1.6 Data Model
#### 5.1.6.1 General
This clause specifies the application data model supported by the
Nadrf_DataManagement API.
Table 5.1.6.1-1 specifies the data types defined for the Nadrf_DataManagement
service based interface protocol.
Table 5.1.6.1-1: Nadrf_DataManagement specific Data Types
Data type Clause defined Description Applicability
* * *
DataNotification 5.1.6.2.9 Represents a data subscription notification of one
of various possible data sources.  
DataSubscription 5.1.6.2.8 Contains information about Data specification.  
NadrfDataRetrievalNotification 5.1.6.2.5 Represents a notification that
corresponds with an Individual ADRF Data Retrieval Subscription resource.  
NadrfDataRetrievalSubscription 5.1.6.2.4 Represents an Individual ADRF Data
Retrieval Subscription resource.  
NadrfDataStoreRecord 5.1.6.2.2 Represents an Individual ADRF Data Store Record
resource.  
NadrfDataStoreSubscription 5.1.6.2.3 Contains information to be used by the
ADRF to create a Data or Analytics subscription.  
NadrfDataStoreSubscriptionRef 5.1.6.2.6 Contains a reference to a request for
a Data or Analytics subscription.  
NadrfStoredDataSpec 5.1.6.2.7 Contains information about Data or Analytics
specification.
Table 5.1.6.1-2 specifies data types re-used by the Nadrf_DataManagement
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Nadrf_DataManagement service based
interface.
Table 5.1.6.1-2: Nadrf_DataManagement re-used Data Types
Data type Reference Comments Applicability
* * *
AfEventExposureNotif 3GPP TS 29.517 [20] Represents notifications on AF
event(s) that occurred for an Individual AF Event Subscription resource.  
AfEventExposureSubsc 3GPP TS 29.517 [20] Represents AF event subscription.  
AmfEventNotification 3GPP TS 29.518 [18] Represents notifications on AMF
event(s) that occurred for an Individual AMF Event Subscription resource.  
AmfEventSubscription 3GPP TS 29.518 [18] Represents AMF event subscription.  
DateTime 3GPP TS 29.571 [16] Identifies the time.  
EeSubscription 3GPP TS 29.503 [19] Represents UDM event subscription.  
FetchInstruction 3GPP TS 29.576 [24] The fetch instruction indicates that the
data or analytics can be fetched by the consumer.  
FormattingInstruction 3GPP TS 29.574 [23] DCCF formatting Instructions.  
MonitoringReport 3GPP TS 29.503 [19] UDM Monitoring Report.  
NefEventExposureNotif 3GPP TS 29.591 [21] Represents notifications on network
exposure event(s) that occurred for an Individual Network Exposure Event
Subscription resource.  
NefEventExposureSubsc 3GPP TS 29.591 [21] Represents NEF event subscription.  
NfInstanceId 3GPP TS 29.571 [16] NF instance identifier.  
NfSetId 3GPP TS 29.571 [16] NF set identifier.  
NnwdafEventsSubscription 3GPP TS 29.520 [15] Represents an NWDAF analytics
subscription.  
NnwdafEventsSubscriptionNotification 3GPP TS 29.520 [15] Represents an NWDAF
analytics subscription notification.  
NotificationData 3GPP TS 29.510 [10] Represents an NRF event notification.  
NsmfEventExposure 3GPP TS 29.508 [17] Represents SMF event subscription.  
NsmfEventExposureNotification 3GPP TS 29.508 [17] Represents SMF event
notification.  
ProcessingInstruction 3GPP TS 29.574 [23] DCCF processing Instructions.  
SACEventReport 3GPP TS 29.536 [25] Represents an NSACF event notification.  
SACEventSubscription 3GPP TS 29.536 [25] Represents and NSACF event
subscription.  
SubscriptionData 3GPP TS 29.510 [10] Represents an NRF event subscription.  
TimeWindow 3GPP TS 29.122 [22] Represents a time window.  
Uri 3GPP TS 29.571 [16] URI.
#### 5.1.6.2 Structured data types
##### 5.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 5.1.6.2.2 Type: NadrfDataStoreRecord
Table 5.1.6.2.2-1: Definition of type NadrfDataStoreRecord
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | dataNotif | DataNot | C | 0..1 | Data | | | | ification | | | sub | | | | | | | scription | | | | | | | noti | | | | | | | fication. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | anaNoti | array(N | C | 1..N | List of | | | fications | nwdafEven | | | analytics | | | | tsSubscri | | | sub | | | | ptionNoti | | | scription | | | | fication) | | | notif | | | | | | | ications. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | anaSub | Nnwdaf | C | 0..1 | R | | | | EventsSub | | | epresents | | | | scription | | | the | | | | | | | sub | | | | | | | scription | | | | | | | in | | | | | | | formation | | | | | | | of the | | | | | | | corr | | | | | | | esponding | | | | | | | analytics | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \" | | | | | | | anaNotifi | | | | | | | cations\" | | | | | | | attribute | | | | | | | is | | | | | | | provided. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | dataSub | DataSub | C | 0..1 | R | | | | scription | | | epresents | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | in | | | | | | | formation | | | | | | | of the | | | | | | | corr | | | | | | | esponding | | | | | | | data | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \"da | | | | | | | taNotif\" | | | | | | | attribute | | | | | | | is | | | | | | | provided. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Exactly | | | | | | | one of | | | | | | | the | | | | | | | a | | | | | | | ttributes | | | | | | | \" | | | | | | | anaNotifi | | | | | | | cations\" | | | | | | | and | | | | | | | \"da | | | | | | | taNotif\" | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Exactly | | | | | | | one of | | | | | | | the | | | | | | | a | | | | | | | ttributes | | | | | | | \ | | | | | | | "anaSub\" | | | | | | | and | | | | | | | \" | | | | | | | dataSub\" | | | | | | | shall be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.1.6.2.3 Type: NadrfDataStoreSubscription
Table 5.1.6.2.3-1: Definition of type NadrfDataStoreSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | anaSub | Nnwdaf | C | 0..1 | S | | | | EventsSub | | | ubscribed | | | | scription | | | analytics | | | | | | | events. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dataSub | DataSub | C | 0..1 | R | | | | scription | | | epresents | | | | | | | requested | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | t | NfI | C | 0..1 | DCCF or | | | argetNfId | nstanceId | | | NWDAF NF | | | | | | | instance | | | | | | | i | | | | | | | dentifier | | | | | | | to which | | | | | | | the ADRF | | | | | | | shall | | | | | | | create | | | | | | | the | | | | | | | requested | | | | | | | subs | | | | | | | cription. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | targ | NfSetId | C | 0..1 | DCCF or | | | etNfSetId | | | | NWDAF NF | | | | | | | set | | | | | | | i | | | | | | | dentifier | | | | | | | to which | | | | | | | the ADRF | | | | | | | shall | | | | | | | create | | | | | | | the | | | | | | | requested | | | | | | | subs | | | | | | | cription. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | forma | For | O | 0..1 | F | | | tInstruct | mattingIn | | | ormatting | | | | struction | | | ins | | | | | | | tructions | | | | | | | to be | | | | | | | used for | | | | | | | sending | | | | | | | event | | | | | | | notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | pro | Pro | O | 0..1 | P | | | cInstruct | cessingIn | | | rocessing | | | | struction | | | ins | | | | | | | tructions | | | | | | | to be | | | | | | | used for | | | | | | | sending | | | | | | | event | | | | | | | notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Exactly | | | | | | | one of | | | | | | | these | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | One of | | | | | | | \"tar | | | | | | | getNfId\" | | | | | | | and | | | | | | | \"target | | | | | | | NfSetId\" | | | | | | | shall be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.1.6.2.4 Type: NadrfDataRetrievalSubscription
Table 5.1.6.2.4-1: Definition of type NadrfDataRetrievalSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | anaSub | Nnwdaf | C | 0..1 | S | | | | EventsSub | | | ubscribed | | | | scription | | | analytics | | | | | | | events. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dataSub | DataSub | C | 0..1 | R | | | | scription | | | epresents | | | | | | | requested | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | notifi | Uri | M | 1 | Not | | | cationURI | | | | ification | | | | | | | target | | | | | | | address. | | | | | | | This | | | | | | | attribute | | | | | | | shall | | | | | | | have the | | | | | | | same | | | | | | | value as | | | | | | | the | | | | | | | callback | | | | | | | URI | | | | | | | attribute | | | | | | | of the | | | | | | | requested | | | | | | | sub | | | | | | | scription | | | | | | | a | | | | | | | ttribute. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | T | M | 1 | R | | | imePeriod | imeWindow | | | epresents | | | | | | | a start | | | | | | | time and | | | | | | | a stop | | | | | | | time | | | | | | | during | | | | | | | which the | | | | | | | requested | | | | | | | data is | | | | | | | collected | | | | | | | and/or | | | | | | | will be | | | | | | | collected | | | | | | | at the | | | | | | | data | | | | | | | source. | | +-----------+-----------+---+-----------+-----------+-----------+ | no | string | M | 1 | Not | | | tifCorrId | | | | ification | | | | | | | co | | | | | | | rrelation | | | | | | | i | | | | | | | dentifier | | | | | | | provided | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | to be | | | | | | | used | | | | | | | later by | | | | | | | the ADRF | | | | | | | in the | | | | | | | noti | | | | | | | fications | | | | | | | that | | | | | | | c | | | | | | | orrespond | | | | | | | with this | | | | | | | subs | | | | | | | cription. | | | | | | | The value | | | | | | | of this | | | | | | | attribute | | | | | | | shall be | | | | | | | unique | | | | | | | per | | | | | | | sub | | | | | | | scription | | | | | | | for a | | | | | | | given NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Exactly | | | | | | | one of | | | | | | | these | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.1.6.2.5 Type: NadrfDataRetrievalNotification
Table 5.1.6.2.5-1: Definition of type NadrfDataRetrievalNotification
Attribute name Data type P Cardinality Description Applicability
* * *
notifCorrId string M 1 This attribute indicates the notification correlation
identifier provided by the NF service consumer during the data retrieval
subscription. This parameter can be useful if the NF service consumer uses a
common callback URI for multiple subscriptions.  
anaNotifications array(NnwdafEventsSubscriptionNotification) C 1..N List of
analytics subscription notifications. (NOTE)  
dataNotif DataNotification C 0..1 Data subscription notification. (NOTE)  
fetchInstruct FetchInstruction C 0..1 The fetch instruction indicates that the
data or analytics can be fetched by the consumer. (NOTE)  
terminationReq boolean O 0..1 If provided and set to \"true\", it indicates
that the subscription is requested to be terminated, i.e. no further
notifications related to this subscription will be provided. The default value
is \"false\".  
timeStamp DateTime M 1 It represents the time when ADRF completed preparation
of the requested data or analytics.  
NOTE: Exactly one of these attributes shall be provided.
##### 5.1.6.2.6 Type: NadrfDataStoreSubscriptionRef
Table 5.1.6.2.6-1: Definition of type NadrfDataStoreSubscriptionRef
Attribute name Data type P Cardinality Description Applicability
* * *
transRefId string M 1 Transaction reference identifier.
##### 5.1.6.2.7 Type: NadrfStoredDataSpec
Table 5.1.6.2.7-1: Definition of type NadrfStoredDataSpec
Attribute name Data type P Cardinality Description Applicability
* * *
dataSpec DataSubscription C 0..1 Represents data specification. (NOTE)  
anaSpec NnwdafEventsSubscription C 0..1 Represents analytics specification.
(NOTE)  
timePeriod TimeWindow M 1 Represents a start time and a stop time during which
the requested data to be removed was collected at the data source.  
NOTE: Exactly one of these attributes shall be provided.
##### 5.1.6.2.8 Type: DataSubscription
Table 5.1.6.2.8-1: Definition of type DataSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | a | Am | C | 0..1 | R | | | mfDataSub | fEventSub | | | epresents | | | | scription | | | requested | | | | | | | AMF | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | s | NsmfEven | C | 0..1 | R | | | mfDataSub | tExposure | | | epresents | | | | | | | requested | | | | | | | SMF | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | u | EeSub | C | 0..1 | R | | | dmDataSub | scription | | | epresents | | | | | | | requested | | | | | | | UDM | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | n | Nef | C | 0..1 | R | | | efDataSub | EventExpo | | | epresents | | | | sureSubsc | | | requested | | | | | | | NEF | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | afDataSub | Af | C | 0..1 | R | | | | EventExpo | | | epresents | | | | sureSubsc | | | requested | | | | | | | AF Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | n | Subscri | C | 0..1 | R | | | rfDataSub | ptionData | | | epresents | | | | | | | requested | | | | | | | NRF | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | nsa | SA | C | 0..1 | R | | | cfDataSub | CEventSub | | | epresents | | | | scription | | | requested | | | | | | | NSACF | | | | | | | Events | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Exactly | | | | | | | one of | | | | | | | these | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.1.6.2.9 Type: DataNotification
Table 5.1.6.2.9-1: Definition of type DataNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | afEv | array(AfE | C | 1..N | List of | | | entNotifs | ventExpos | | | noti | | | | ureNotif) | | | fications | | | | | | | on AF | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | amfEv | array(Amf | C | 1..N | List of | | | entNotifs | EventNoti | | | noti | | | | fication) | | | fications | | | | | | | on AMF | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | smfEv | array(Nsm | C | 1..N | List of | | | entNotifs | fEventExp | | | noti | | | | osureNoti | | | fications | | | | fication) | | | on SMF | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | udmEv | array | C | 1..N | List of | | | entNotifs | (Monitori | | | m | | | | ngReport) | | | onitoring | | | | | | | reports | | | | | | | c | | | | | | | ontaining | | | | | | | in | | | | | | | formation | | | | | | | about UDM | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | nefEv | a | C | 1..N | List of | | | entNotifs | rray(NefE | | | noti | | | | ventExpos | | | fications | | | | ureNotif) | | | on | | | | | | | network | | | | | | | exposure | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | nrfEv | array | C | 1..N | List of | | | entNotifs | (Notifica | | | noti | | | | tionData) | | | fications | | | | | | | on NRF | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | nsacfEv | arr | C | 1..N | List of | | | entNotifs | ay(SACEve | | | noti | | | | ntReport) | | | fications | | | | | | | on NSACF | | | | | | | event(s). | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | O | 0..1 | Indicates | | | | | | | the | | | | | | | timestamp | | | | | | | for the | | | | | | | event(s). | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Exactly | | | | | | | one of | | | | | | | these | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | \"ti | | | | | | | meStamp\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | DataNot | | | | | | | ification | | | | | | | data type | | | | | | | may be | | | | | | | provided | | | | | | | if any of | | | | | | | the | | | | | | | \"ti | | | | | | | meStamp\" | | | | | | | attribute | | | | | | | within | | | | | | | A | | | | | | | fEventNot | | | | | | | ification | | | | | | | contained | | | | | | | in the | | | | | | | AfE | | | | | | | ventExpos | | | | | | | ureNotif, | | | | | | | or within | | | | | | | AmfEv | | | | | | | entReport | | | | | | | contained | | | | | | | in the | | | | | | | Amf | | | | | | | EventNoti | | | | | | | fication, | | | | | | | or within | | | | | | | EventNot | | | | | | | ification | | | | | | | contained | | | | | | | in the | | | | | | | Nsm | | | | | | | fEventExp | | | | | | | osureNoti | | | | | | | fication, | | | | | | | or within | | | | | | | Monitori | | | | | | | ngReport, | | | | | | | or within | | | | | | | Ne | | | | | | | fEventNot | | | | | | | ification | | | | | | | contained | | | | | | | in the | | | | | | | Nef | | | | | | | EventExpo | | | | | | | sureNotif | | | | | | | or within | | | | | | | SACEventR | | | | | | | eportItem | | | | | | | contained | | | | | | | in the | | | | | | | SACEv | | | | | | | entReport | | | | | | | data type | | | | | | | is not | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.1.6.3 Simple data types and enumerations
None.
#### 5.1.6.4 Data types describing alternative data types or combinations of
data types
None.
### 5.1.7 Error Handling
#### 5.1.7.1 General
For the Nadrf_DataManagement API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.1.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.1.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nadrf_DataManagement API.
#### 5.1.7.2 Protocol Errors
No specific procedures for the Nadrf_DataManagement service are specified.
#### 5.1.7.3 Application Errors
The application errors defined for the Nadrf_DataManagement service are listed
in Table 5.1.7.3-1.
Table 5.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
### 5.1.8 Feature negotiation
The optional features in table 5.1.8-1 are defined for the
Nadrf_DataManagement API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 5.1.8-1: Supported Features
Feature number Feature Name Description
* * *
### 5.1.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nadrf_DataManagement API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nadrf_DataManagement API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nadrf_DataManagement service.
The Nadrf_DataManagement API defines a single scope \"nadrf-datamanagement\"
for the entire service, and it does not define any additional scopes at
resource or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI 3.0.0 specifications in YAML
format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Nadrf_DataManagement API
openapi: 3.0.0
info:
version: 1.0.2
title: Nadrf_DataManagement
description: \|
ADRF Data Management Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.575 V17.3.0; 5G System; Analytics Data Repository
Services; Stage 3.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.575/\'
#
servers:
\- url: \'{apiRoot}/nadrf-datamanagement/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
#
security:
\- oAuth2ClientCredentials:
\- nadrf-datamanagement
\- {}
#
paths:
/data-store-records:
post:
summary: Creates a new Individual Data Store Record resource.
operationId: CreateADRFDataStoreRecord
tags:
\- ADRF Data Store Records (Collection)
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreRecord\'
required: true
description: ADRF data store record to be stored.
responses:
\'201\':
description: Successful creation of new Individual ADRF Data Store Record
resource.
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/nadrf-datamanagement/\/data-store-records/{storeTransId}
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreRecord\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
get:
summary: Retrieves existing Individual ADRF Data Store Records.
operationId: GetAdrfDataStoreRecords
tags:
\- ADRF Data Store Records (Collection)
parameters:
\- name: store-trans-id
description: A storage transaction identifier of a data store record in ADRF.
in: query
required: false
schema:
type: string
\- name: fetch-correlation-ids
description: Fetch correlation identifiers received as part of fetch
instruction.
in: query
required: false
style: form
explode: false
schema:
type: array
items:
type: string
minItems: 1
responses:
\'200\':
description: Data store records are returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreRecord\'
\'204\':
description: No matching ADRF data were found.
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/data-store-records/{storeTransId}:
delete:
summary: Delete an existing Individual ADRF Data Store Record.
operationId: DeleteADRFDataStoreRecord
tags:
\- Individual ADRF Data Store Record (Document)
parameters:
\- name: storeTransId
in: path
description: String identifying a Data Store Record in ADRF.
required: true
schema:
type: string
responses:
\'204\':
description: >
No Content. The Individual ADRF Data Store Record resource matching the
storeTransId was deleted.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/data-retrieval-subscriptions:
post:
summary: Creates a new Individual ADRF Data Retrieval Subscription resource.
operationId: CreateADRFDataRetrievalSubscription
tags:
\- ADRF Data Retrieval Subscriptions (Collection)
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataRetrievalSubscription\'
required: true
description: Individual ADRF Data Retrieval Subscription resource to be
created.
responses:
\'201\':
description: Created a new Individual ADRF Data Retrieval Subscription
resource.
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/nadrf-datamanagement/\/data-retrieval-
subscriptions/{subscriptionId}
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataRetrievalSubscription\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
adrfDataRetrievalNotification:
\'{\$request.body#/notificationURI}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataRetrievalNotification\'
responses:
\'204\':
description: The receipt of the Notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/data-retrieval-subscriptions/{subscriptionId}:
delete:
summary: Delete an existing Individual ADRF Data Retrieval Subscription
resource.
operationId: DeleteADRFDataRetrievalSubscription
tags:
\- Individual ADRF Data Retrieval Subscription (Document)
parameters:
\- name: subscriptionId
in: path
description: >
String identifying a data retrieval subscription to the Nadrf_DataManagement
Service.
required: true
schema:
type: string
responses:
\'204\':
description: >
No Content. The Individual ADRF Data Retrieval Subscription resource matching
the subscriptionId was deleted.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/request-storage-sub:
post:
summary: Triggers the creation of a new ADRF Storage Subscription.
operationId: CreateADRFStorageSubscription
tags:
\- ADRF Storage Subscriptions
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreSubscription\'
required: true
responses:
\'200\':
description: >
Successful response with reference used to identify the subscription at the
ADRF.
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreSubscriptionRef\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/request-storage-sub-removal:
post:
summary: Triggers the removal of ADRF storage subscription.
operationId: DeleteADRFStorageSubscription
tags:
\- ADRF Storage Subscriptions
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfDataStoreSubscriptionRef\'
required: true
responses:
\'204\':
description: >
No Content. The ADRF Storage Subscription matching the provided reference was
deleted.
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/remove-stored-data-analytics:
post:
summary: Remove ADRF data based on data or analytics specification.
operationId: DeleteADRFData
tags:
\- ADRF Stored Data
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/NadrfStoredDataSpec\'
required: true
responses:
\'204\':
description: No Content. The ADRF data matching the provided specification is
deleted.
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nadrf-datamanagement: Access to the nadrf-datamanagement API
#
schemas:
#
NadrfDataStoreRecord:
description: Represents an Individual ADRF Data Store Record.
type: object
oneOf:
\- allOf:
\- required: [anaSub]
\- required: [anaNotifications]
\- allOf:
\- required: [dataSub]
\- required: [dataNotif]
properties:
dataNotif:
\$ref: \'#/components/schemas/DataNotification\'
anaNotifications:
type: array
items:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscriptionNotification\'
minItems: 1
description: List of analytics subscription notifications.
anaSub:
type: array
items:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscription\'
minItems: 1
description: >
Represents the subscription information of the corresponding analytics
notification.
dataSub:
type: array
items:
\$ref: \'#/components/schemas/DataSubscription\'
minItems: 1
description: >
Represents the subscription information of the corresponding data
notification.
#
NadrfDataStoreSubscription:
description: >
Contains information to be used by the ADRF to create a Data or Analytics
subscription.
type: object
allOf:
\- oneOf:
\- required: [anaSub]
\- required: [dataSub]
\- oneOf:
\- required: [targetNfId]
\- required: [targetNfSetId]
properties:
anaSub:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscription\'
dataSub:
\$ref: \'#/components/schemas/DataSubscription\'
targetNfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
targetNfSetId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfSetId\'
formatInstruct:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/FormattingInstruction\'
procInstruct:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/ProcessingInstruction\'
#
NadrfDataRetrievalSubscription:
description: Represents an Individual ADRF Data Retrieval Subscription.
type: object
required:
\- notifCorrId
\- notificationURI
\- timePeriod
oneOf:
\- required: [anaSub]
\- required: [dataSub]
properties:
anaSub:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscription\'
dataSub:
\$ref: \'#/components/schemas/DataSubscription\'
notificationURI:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
timePeriod:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
notifCorrId:
type: string
description: Notification correlation identifier.
#
NadrfDataRetrievalNotification:
description: >
Represents a notification that corresponds with an Individual ADRF Data
Retrieval Subscription.
type: object
required:
\- notifCorrId
\- timeStamp
oneOf:
\- required: [anaNotifications]
\- required: [dataNotif]
\- required: [fetchInstruct]
properties:
notifCorrId:
type: string
description: Notification correlation identifier.
anaNotifications:
type: array
items:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscriptionNotification\'
minItems: 1
description: List of analytics subscription notifications.
dataNotif:
\$ref: \'#/components/schemas/DataNotification\'
fetchInstruct:
\$ref:
\'TS29576_Nmfaf_3caDataManagement.yaml#/components/schemas/FetchInstruction\'#
terminationReq:
type: boolean
description: >
It indicates the termination of the data management subscription that
requested by the
ADRF.
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
#
NadrfDataStoreSubscriptionRef:
description: Contains a reference to a request for a Data or Analytics
subscription.
type: object
required:
\- transRefId
properties:
transRefId:
type: string
description: Transaction reference identifier.
#
NadrfStoredDataSpec:
description: Contains information about Data or Analytics specification.
type: object
required:
\- timePeriod
oneOf:
\- required: [dataSpec]
\- required: [anaSpec]
properties:
dataSpec:
\$ref: \'#/components/schemas/DataSubscription\'
anaSpec:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscription\'
timePeriod:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
#
DataSubscription:
description: Contains a data specification.
type: object
oneOf:
\- required: [amfDataSub]
\- required: [smfDataSub]
\- required: [udmDataSub]
\- required: [nefDataSub]
\- required: [afDataSub]
\- required: [nrfDataSub]
\- required: [nsacfDataSub]
properties:
amfDataSub:
\$ref:
\'TS29518_Namf_EventExposure.yaml#/components/schemas/AmfEventSubscription\'
smfDataSub:
\$ref:
\'TS29508_Nsmf_EventExposure.yaml#/components/schemas/NsmfEventExposure\'
udmDataSub:
\$ref: \'TS29503_Nudm_EE.yaml#/components/schemas/EeSubscription\'
afDataSub:
\$ref:
\'TS29517_Naf_EventExposure.yaml#/components/schemas/AfEventExposureSubsc\'
nefDataSub:
\$ref:
\'TS29591_Nnef_EventExposure.yaml#/components/schemas/NefEventExposureSubsc\'
nrfDataSub:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/SubscriptionData\'
nsacfDataSub:
\$ref:
\'TS29536_Nnsacf_SliceEventExposure.yaml#/components/schemas/SACEventSubscription\'
#
DataNotification:
description: Represents a Data Subscription Notification.
type: object
oneOf:
\- required: [amfEventNotifs]
\- required: [smfEventNotifs]
\- required: [udmEventNotifs]
\- required: [nefEventNotifs]
\- required: [afEventNotifs]
\- required: [nrfEventNotifs]
\- required: [nsacfEventNotifs]
properties:
amfEventNotifs:
type: array
items:
\$ref:
\'TS29518_Namf_EventExposure.yaml#/components/schemas/AmfEventNotification\'
minItems: 1
description: List of notifications of AMF events.
smfEventNotifs:
type: array
items:
\$ref:
\'TS29508_Nsmf_EventExposure.yaml#/components/schemas/NsmfEventExposureNotification\'
minItems: 1
description: List of notifications of SMF events.
udmEventNotifs:
type: array
items:
\$ref: \'TS29503_Nudm_EE.yaml#/components/schemas/MonitoringReport\'
minItems: 1
description: List of notifications of UDM events.
nefEventNotifs:
type: array
items:
\$ref:
\'TS29591_Nnef_EventExposure.yaml#/components/schemas/NefEventExposureNotif\'
minItems: 1
description: List of notifications of NEF events.
afEventNotifs:
type: array
items:
\$ref:
\'TS29517_Naf_EventExposure.yaml#/components/schemas/AfEventExposureNotif\'
minItems: 1
description: List of notifications of AF events.
nrfEventNotifs:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/NotificationData\'
minItems: 1
description: List of notifications of NRF events.
nsacfEventNotifs:
type: array
items:
\$ref:
\'TS29536_Nnsacf_SliceEventExposure.yaml#/components/schemas/SACEventReport\'
minItems: 1
description: List of notifications of NSACF events.
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
#
#