# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification provides the stage 3 definition of the Session
Management Event Exposure Service (Nsmf_EventExposure) of the 5G System.
The stage 2 definition and procedures of the Session Management Event Exposure
Service are contained in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [6]. The 5G
System Architecture is defined in 3GPP TS 23.501 [2].
Stage 3 call flows for policy and charging control use cases are provided in
3GPP TS 29.513 [7].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition of the 5G System are specified in 3GPP
TS 29.500 [4] and 3GPP TS 29.501 [5].
The Session Management Event Exposure Service is provided by the Session
Management Function (SMF). This service exposes events related to PDU Sessions
observed at the SMF.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[7] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[8] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[11] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[12] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[13] 3GPP TS 29.518: \"5G System; Access and Mobility Management Services;
Stage 3\".
[14] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[15] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[16] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[18] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[19] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[20] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[21] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[22] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[23] 3GPP TS 29.244: \"Interface between the Control Plane and the User Plane
of EPC Nodes\".
[24] 3GPP TS 29.122: \"T8 reference point for Northbound APIs\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
AMBR Aggregate Maximum Bit Rate
AMF Access and Mobility Management Function
API Application Programming Interface
DCCF Data Collection Coordination Function
DDD Downlink Data Delivery
DNAI DN Access Identifier
DNN Data Network Name
EAS Edge Application Server
FQDN Fully Qualified Domain Name
GPSI Generic Public Subscription Identifier
GUAMI Globally Unique AMF Identifier
HTTP Hypertext Transfer Protocol
H-SMF Home SMF
I-SMF Intermediate SMF
JSON JavaScript Object Notation
NEF Network Exposure Function
NF Network Function
NID Network Identifier
NRF Network Repository Function
NSSAI Network Slice Selection Assistance Information
NWDAF Network Data Analytics Function
PCF Policy Control Function
PRA Presence Reporting Area
QFI QoS Flow Identifier
SMCC Session Management Congestion Control
SMCCE Session Management Congestion Control Experience
SMF Session Management Function
SNPN Stand-alone Non-Public Network
SUPI Subscription Permanent Identifier
S-NSSAI Single Network Slice Selection Assistance Information
UDM Unified Data Management
UPF User Plane Function
V-SMF Visited SMF
# 4 Session Management Event Exposure Service
## 4.1 Service Description
### 4.1.1 Overview
The Session Management Event Exposure Service, as defined in 3GPP TS 23.502
[3] and 3GPP TS 23.503 [6], is provided by the Session Management Function
(SMF).
This service:
\- allows consumer NF service consumers to subscribe and unsubscribe for
events on a PDU session; and
\- notifies consumer NF service consumers with a corresponding subscription
about observed events on the PDU session.
The types of observed events applicable for (H-)SMF include:
\- UP path change (e.g. addition and/or removal of PDU session anchor);
\- access type change;
\- RAT type change;
\- PLMN change;
\- PDU session release;
\- PDU session establishment;
\- Downlink data delivery status (for non-roaming);
\- UE IP address/prefix change;
\- QFI allocation;
\- QoS monitoring;
\- SM congestion control experience for PDU Session;
\- Dispersion;
\- WLAN information for PDU Session; and/or
\- Redundant transmission experience for PDU Session.
The types of observed events applicable for V-SMF include:
\- Downlink data delivery status.
The types of observed events applicable for I-SMF include:
\- Downlink data delivery status.
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging related 5G architecture is also described in 3GPP TS 29.513 [7].
The Session Management Event Exposure Service (Nsmf_EventExposure) is part of
the Nsmf service-based interface exhibited by the Session Management Function
(SMF).
The known NF service consumers of the Nsmf_EventExposure service are:
\- Network Exposure Function (NEF),
\- Access and Mobility Management Function (AMF),
\- Application Function (AF),
\- Unified Data Management (UDM),
\- Network Data Analytics Function (NWDAF), and
\- Data Collection Coordination Function (DCCF).
The PCF accesses the Session Management Event Exposure Service at the SMF via
the N7 Reference point.
NOTE: The PCF can implicitly subscribe on behalf of the AF and NEF to the
UP_PATH_CH event and/or the QOS_MON event by including the information on AF
subscription within the PCC rule.
The AMF accesses the Session Management Event Exposure Service at the SMF via
the N11 Reference point.
Figure 4.1.2-1: Reference Architecture for the Nsmf_EventExposure Service; SBI
representation
Figure 4.1.2-2: Reference Architecture for the Nsmf_EventExposure Service:
reference point representation
### 4.1.3 Network Functions
#### 4.1.3.1 Session Management Function (SMF)
The Session Management function (SMF) provides:
\- Session Management e.g. Session establishment, modification and release;
\- UE IP address allocation & management;
\- Selection and control of UP function;
\- Termination of interfaces towards Policy control functions; and
\- Control part of policy enforcement and QoS.
#### 4.1.3.2 NF Service Consumers
The Network Exposure Function (NEF);
\- provides means to securely expose the services and capabilities provided by
3GPP network functions to e.g. 3rd parties or internal exposure.
The Access and Mobility Management function (AMF) provides:
\- Registration management;
\- Connection management;
\- Reachability management; and
\- Mobility Management.
The Application Function (AF)
\- interacts with the 3GPP Core Network to provide services.
The Unified Data Management (UDM).
\- has access to subscriber information, can determine the SMF serving a user
based on that data, and can then subscribe to event notifications for a user
(e.g. when triggered by the NEF).
The Network Data Analytics Function (NWDAF)
\- collects data based on event subscription provided by AMF, SMF, PCF, UDM,
AF (directly or via NEF) and OAM;
\- retrieves information about NFs;
\- performs on demand provision of analytics to NF service consumers, as
indicated in clause 6, 3GPP TS 23.288 [21].
The Data Collection Coordination Function (DCCF)
\- coordinates the collection and distribution of data and analytics.
## 4.2 Service Operations
### 4.2.1 Introduction
Table 4.2.1-1: Operations of the Nsmf_EventExposure Service
* * *
Service operation name Description Initiated by Notify Report UE PDU session
related event(s) to the NF service consumer which has subscribed to the event
report service. (H-)SMF, V-SMF, I-SMF Subscribe This service operation is used
by an NF service consumer to subscribe for event notifications on a specified
PDU session, or for all PDU Sessions of one UE, a group of UE(s) or any UE, or
to modify a subscription. NF service consumers (e.g. AMF, NEF, AF, UDM, NWDAF,
DCCF) UnSubscribe This service operation is used by an NF service consumer to
unsubscribe from event notifications. NF service consumers (e.g. AMF, NEF, AF,
UDM, NWDAF, DCCF) AppRelocationInfo This service operation is used by an NF
service consumer to acknowledge the notification from the SMF regarding UE PDU
Session related event(s) NF service consumers (e.g. NEF, AF)
* * *
### 4.2.2 Nsmf_EventExposure_Notify Service Operation
#### 4.2.2.1 General
The Nsmf_EventExposure_Notify service operation enables the SMF (i.e. (H-)SMF,
V-SMF and/or I-SMF) to send notifications to NF service consumers upon the
occurrence of a previously subscribed event on the related PDU session.
The following procedure using the Nsmf_EventExposure_Notify service operation
is supported:
\- notification about subscribed events.
#### 4.2.2.2 Notification about subscribed events
The present \"notification about subscribed events\" procedure is performed by
the SMF when any of the subscribed events occur.
The following applies with respect to the detection of subscribed events:
\- If:
\- the SMF supports the \"DownlinkDataDeliveryStatus\" feature,
\- the event \"downlink data delivery status\" is subscribed,
\- the traffic descriptors of the downlink data source have been provided for
that subscription, and
\- the SMF is informed that the UE corresponding to that subscription is
unreachable,
\- if the data is buffered at the UPF, then the SMF shall interact with the
UPF to notify that the UPF buffers the downlink packets. The SMF shall include
the traffic descriptor of the subscriptions in the PDR with a higher priority
if the PCC is not applied to the PDUsession or derive the PDR from the PCC
rule received from the PCF as defined in clause 4.2.4.27 of 3GPP TS 29.512
[14] if the PCC is applied to the PDU session and request the UPF to report
when there are corresponding buffered downlink packets or discarded packets in
the UPF as defined in clause 5.28.1 of 3GPP TS 29.244 [23]. When receiving the
report from the UPF, the SMF shall determine whether that subscribed event
with delivery status \"DISCARDED\" or \"BUFFERED\" occurred. The SMF shall
determine that subscribed event with delivery status \"TRANSMITTED\" occurred
by the fact that the related PDU session becomes ACTIVE.
\- if the data is buffered at the SMF, the SMF shall determine whether that
subscribed event occurred by comparing the downlink packets with the traffic
descriptors received in the corresponding event subscription. If the SMF
decides to buffer the packets, the subscribed event with delivery status
\"BUFFERED\" occurred. If the SMF decides to discard the packets, the
subscribed event with delivery status \"DISCARDED\" occurred. The SMF shall
determine that subscribed event with delivery status \"TRANSMITTED\" occurred
by the fact that the related PDU session becomes ACTIVE.
Figure 4.2.2.2-1 illustrates the notification about subscribed events.
Figure 4.2.2.2-1: Notification about subscribed events
If the SMF observes PDU Session related event(s) for which an NF service
consumer has subscribed, the SMF shall send an HTTP POST request with
\"{notifUri}\", as previously provided by the NF service consumer within the
corresponding subscription, as URI and NsmfEventExposureNotification data
structure as request body that shall include:
\- Notification correlation ID provided by the NF service consumer during the
subscription, or as provided by the PCF for implicit subscription of UP path
change as defined in clause 4.2.6.2.6.2 of 3GPP TS 29.512 [14], or as provided
by the PCF for implicit subscription of QoS Monitoring as defined in clause
4.2.3.25 of 3GPP TS 29.512 [14], as \"notifId\" attribute; and
\- information about the observed event(s) within the \"eventNotifs\"
attribute that shall contain for each observed event an \"EventNotification\"
data structure that shall include:
1\. the Event Trigger as \"event\" attribute;
2\. for a UP path change notification:
a) type of notification (\"EARLY\" or \"LATE\") as \"dnaiChgType\" attribute;
b) source DNAI and/or target DNAI as \"sourceDnai\" attribute and
\"targetDnai\" attribute if DNAI is changed, respectively (NOTE 3); and
c) if the PDU Session type is IP, for the source DNAI IP address/prefix of the
UE as \"sourceUeIpv4Addr\" attribute or \"sourceUeIpv6Prefix\" attribute; and
d) if the PDU Session type is IP, for the target DNAI IP address/prefix of the
UE as \"targetUeIpv4Addr\" attribute or \"targetUeIpv6Prefix\" attribute;
e) if available (NOTE 3), for the source DNAI, N6 traffic routing information
related to the UE as \"sourceTraRouting\" attribute;
f) if available (NOTE 3), for the target DNAI, N6 traffic routing information
related to the UE as \"targetTraRouting\" attribute; and
g) if the PDU Session type is Ethernet, the MAC address of the UE in the
\"ueMac\" attribute;
NOTE 1: UP path change notification, i.e. DNAI change notification and/or N6
traffic routing information change notification, can be the result of an
implicit subscription of the PCF on behalf of the NEF/AF as part of setting
PCC rule(s) via the Npcf_SMPolicyControl service (see clause 4.2.6.2.6.2 of
3GPP TS 29.512 [14]).
NOTE 2: If the DNAI is not changed while the N6 traffic routing information
change, the source DNAI and target DNAI are not provided.
NOTE 3: The change from the UP path status where no DNAI applies to a status
where a DNAI applies indicates the activation of the related AF request and
therefore only the target DNAI and N6 traffic routing information is provided
in the event notification; the change from the UP path status where a DNAI
applies to a status where no DNAI applies indicates the de-activation of the
related AF request and therefore only the source DNAI and N6 traffic routing
information is provided in the event notification.
3\. for a UE IP address change:
a) added new UE IP address or prefix as \"adIpv4Addr\" attribute or
\"adIpv6Prefix\" attribute, respectively; and/or
b) released UE IP address or prefix as \"reIpv4Addr\" attribute or
\"reIpv6Prefix\" attribute, respectively;
4\. for an access type change:
a) new access type as \"accType\" attribute;
5\. for a PLMN Change:
a) new PLMN as \"plmnId\" attribute;
6\. for a PDU Session Release:
a) ID of the released PDU session as \"pduSeId\" attribute;
b) DNN of the release PDU session as \"dnn\" attribute, if the
\"PduSessionStatus\" feature is supported;
c) The type of the release PDU session as \"pduSessType\" attribute, if the
\"PduSessionStatus\" feature is supported;
d) UE IPv4 address as \"ipv4Addr\" attribute and/or IPv6 information (IPv6
prefix(es) or IPv6 address(es)) as \"ipv6Prefixes\" or \"ipv6Addrs\"
attributes, if the released PDU session type is IP and the
\"PduSessionStatus\" feature is supported; and
e) S-NSSAI of the release PDU session as \"snssai\" attribute, if the
\"EneNA\" feature is supported and \"snssai\" attribute is present in the
subscribed \"NsmfEventExposure\" data type;
7\. the time at which the event was observed encoded as \"timeStamp\"
attribute;
8\. the SUPI as the \"supi\" attribute if the subscription applies to a group
of UE(s) or any UE;
9\. if available, the GPSI as the \"gpsi\" attribute if the subscription
applies to a group of UE(s) or any UE;
10\. for a Downlink Data Delivery Status, if the
\"DownlinkDataDeliveryStatus\" feature is supported:
a) the downlink data delivery status as \"dddStatus\" attribute;
b) the downlink data descriptors impacted by the downlink data delivery status
change within the \"dddTraDescriptor\" attribute; and
c) for downlink data delivery status \"BUFFERED\". the estimated maximum
waiting time as \"maxWaitTime\" attribute;
11\. for a Communication Failure, if the \"CommunicationFailure\" feature is
supported:
a) the detailed communication failure information (e.g. 5G SM cause) as
\"commFailure\" attribute; and
12\. for QoS Monitoring, if the \"QoSMonitoring\" feature is supported:
a) one or two uplink packet delays within the \"ulDelays\" attribute; or
b) one or two downlink packet delays within the \"dlDelays\" attribute; or
c) one or two round trip packet delays within the \"rtDelays\" attribute; or
d) if the feature \"PacketDelayFailureReport\" is supported, the packet delay
measurement failure indicator within the \"pdmf\" attribute;
NOTE 4: QoS Monitoring notification can be the result of an implicit
subscription of the PCF on behalf of the NEF/AF as part of setting PCC rule(s)
via the Npcf_SMPolicyControl service (see clause 4.2.3.25 of 3GPP TS 29.512
[14]).
13\. for a PDU Session Establishment, if the \"PduSessionStatus\" feature is
supported:
a) ID of the established PDU session as \"pduSeId\" attribute;
b) DNN of the release PDU session as \"dnn\" attribute;
c) The type of the release PDU session as \"pduSessType\" attribute;
d) UE IPv4 address as \"ipv4Addr\" attribute and/or IPv6 information (IPv6
prefix(es) or IPv6 address(es)) as \"ipv6Prefixes\" or \"ipv6Addrs\"
attributes if available at PDU session establishment; and
e) S-NSSAI of the established PDU session as \"snssai\" attribute, if the
\"EneNA\" feature is supported and \"snssai\" attribute is present in the
subscribed \"NsmfEventExposure\" data type;
14\. for a QFI allocation, if the \"QfiAllocation\" feature is supported:
a) QFI of the allocated QoS Flow ID for the application as \"qfi\" attribute;
b) DNN of the allocated PDU session as \"dnn\" attribute;
c) Slice of the allocated PDU session as \"snssai\" attribute;
d) The description of the application traffic as \"appId\", \"fDescs\" or
\"ethfDescs\" attribute; and
e) ID of the allocated PDU session as \"pduSeId\" attribute if the
subscription was for a UE, a group of UEs, or any UE, and not for a specific
PDU Session;
15\. for an RAT type change, if the \"EneNA\" feature is supported:
a) new RAT type as \"ratType\" attribute;
16\. for a SM congestion control experience for PDU Session, if the \"SMCCE\"
feature is supported:
a) DNN of the PDU session as \"dnn\" attribute if DNN based SMCC is applied
or Slice of the allocated PDU session as \"snssai\" attribute if S-NSSAI based
SMCC is applied;
b) Time window representing a start time and a stop time of the data
collection period as \"timeWindow\" attribute;
c) The information of the SM NAS requests from UE as \"smNasFromUe\"
attribute; and
d) The information of the SM NAS messages from SMF with backoff timer as
\"smNasFromSmf\" attribute;
17\. for transactions dispersion collection, if the Dispersion feature is
supported:
a) The transactions dispersion information collected as \"transacInfos\"
attribute; and
b) The UE IP address as \"ueIpAddr\" attribute if it is available and
requested in the subscription;
18\. for redundant transmission experience of PDU Session, if the
\"RedundantTransmissionExp\" feature is supported:
a) DNN associated with URLLC service for the PDU session as \"dnn\" attribute;
and
b) UP with redundant transmission setup as \"upRedTrans\" attribute;
19\. for WLAN information on PDU Session, if the \"WlanPerformance\" feature
is supported:
a) SSID or BSSID that the PDU session is related to as \"ssId\" or \"bssId\"
attribute; and
b) Start time or End time of the PDU Session for WLAN as \"startWLAN\" or
\"endWLAN\" attribute;
20\. for obtaining the UPF information, if the \"ServiceExperience\" and/or
\"DnPerformance\" feature is supported:
a) the information of the UPF serving the UE provided as \"upfInfo\"
attribute.
21\. for obtaining the User Plane status information, if the
\"UeCommunication\" feature is supported:
a) the information about the User Plane status provided as \"pduSessInfos\"
attribute.
\- an URI for further AF acknowledgement in the \"ackUri\" attribute if the
SMF determines to wait for the AF acknowledgement before activating the new UP
path associated with the new DNAI.
NOTE 5: Based on the indication of AF acknowledgment to be expected in the PCC
rules received from the PCF and local configuration, the SMF may determine to
wait for the AF acknowledgement before activating the new UP path associated
with the new DNAI.
Upon the reception of an HTTP POST request with \"{notifUri}\" as URI and an
NsmfEventExposureNotification data structure as request body, the NF service
consumer shall send an HTTP \"204 No Content\" response for a successful
processing.
If errors occur when processing the HTTP POST request, the NF service consumer
shall send the HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is not supported and,
\- if the NF service consumer is not able to handle the Notification but
another unknown NF service consumer could possibly handle the notification, it
shall reply with an HTTP \"404 Not found\" error response.
NOTE 6: An AMF as NF service consumer can change.
\- if the SMF becomes aware that a new NF service consumer is requiring
notifications (e.g. via the \"404 Not found\" response, or via
Namf_Communication service AMFStatusChange Notifications, see 3GPP TS 29.518
[13], or via link level failures or via the Nnrf_NFDiscovery Service (using
the service name and GUAMI obtained during the creation of the subscription)
to discover the other AMFs within the AMF set) specified in 3GPP TS 29.510
[12]), and the SMF knows alternate or backup IPv4 Address(es), IPv6
Address(es) or FQDN(s) where to send Notifications (e.g. via
\"altNotifIpv4Addrs\", \"altNotifIpv6Addrs\" or \"altNotifFqdns\" attributes
received when the subscription was created), the SMF shall exchange the
authority part of the Notification URI with one of those addresses and shall
use that URI in any subsequent communication. If the SMF received a \"404 Not
found\" response, the SMF should resend the failed notification to that URI.
If the feature \"ES3XX\" is supported, and the NF service consumer determines
the received HTTP POST request needs to be redirected, the NF service consumer
shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS
29.500 [4] and,
\- if the SMF receives a \"307 Temporary Redirect\" response, the SMF shall
resend the failed event notification request using the received URI in the
Location header field as Notification URI. Subsequent event notifications,
triggered after the failed one, shall be sent to the Notification URI provided
by the NF service consumer during the corresponding subscription
creation/update; or
\- if the SMF receives a \"308 Permanent Redirect\" response, the SMF shall
resend the failed event notification request and send the subsequent event
notification using the received URI in the Location header field as
Notification URI.
If the SMF in the VPLMN needs to send an event notification to the NEF in the
HPLMN, it may normalize the event based on roaming agreements when required
before provisioning the event report to the NEF of the HPLMN.
### 4.2.3 Nsmf_EventExposure_Subscribe Service Operation
#### 4.2.3.1 General
This service operation is used by an NF service consumer to subscribe to event
notifications on a specific PDU Session, or for all PDU Sessions of one UE,
group of UE(s) or any UE, or to modify an existing subscription.
The following procedures using the Nsmf_EventExposure_Subscribe service
operation are supported:
\- creating a new subscription;
\- modifying an existing subscription.
#### 4.2.3.2 Creating a new subscription
Figure 4.2.3.2-1 illustrates the creation of a subscription.
Figure 4.2.3.2-1: Creation of a subscription
To subscribe to event notifications, the NF service consumer shall send an
HTTP POST request with: \"{apiRoot}/nsmf-event-exposure/v1/subscriptions\" as
Resource URI and the NsmfEventExposure data structure as request body that
shall include:
\- if the subscription applies to events related to a single PDU session for a
UE, the PDU Session ID of that PDU session as \"pduSeId\" attribute and the UE
identification as \"supi\" or \"gpsi\" attribute;
\- if the subscription applies to events not related to a single PDU session,
identification of UEs to which the subscription applies via:
a) identification of a single UE by SUPI as \"supi\" attribute or GPSI as
\"gpsi\" attribute;
b) identification of a group of UE(s) via a \"groupId\" attribute; or
c) identification of any UE via the \"anyUeInd\" attribute set to true;
NOTE 1: The identification of any UE does not apply for local breakout roaming
scenarios where the SMF is located in the VPLMN and the NF service consumer is
located in the HPLMN.
\- an URI where to receive the requested notifications as \"notifUri\"
attribute;
\- a Notification Correlation Identifier provided by the NF service consumer
for the requested notifications as \"notifId\" attribute; and
\- if the NF service consumer is an AMF, the GUAMI encoded as \"guami\"
attribute:
\- a description of the subscribed events as \"eventSubs\" attribute that for
each event shall include:
a) an event identifier as \"event\" attribute; and
b) for event \"UP_PATH_CH\", whether the subscription is for early, late, or
early and late notifications of UP path reconfiguration in the \"dnaiChgType\"
attribute;
c) for event \"DDDS\", the traffic descriptor(s) of the downlink data source
in the \"dddTraDescriptors\" attribute;
and that may include:
a) for event \"DDDS\", the subscribed delivery statuses in the \"dddStati\"
attribute;
b) for event \"QFI_ALLOC\" or \"DISPERSION\", the application identifiers in
the \"appIds\" attribute;
c) for event \"SMCC_EXP\", the data collection target period in the
\"targetPeriod\" attribute;
d) for event \"DISPERSION\", the UE IP Address in the \"ueIpAddr\" attribute,
the indication of transaction dispersion collection in the \"transacDispInd\"
attribute and the requested transaction metrics in the \"transacMetrics\"
attribute;
e) for event \"WLAN_INFO\", the data collection target period in the
\"targetPeriod\" attribute; and/or;
f) for event \"RED_TRANS_EXP\", the data collection target period in the
\"targetPeriod\" attribute.
The NsmfEventExposure data structure as request body may also include:
\- if the NF service consumer is an AMF:
> a) the name of a service produced by the AMF that expects to receive the
> notifications about subscribed events encoded as \"serviceName\" attribute;
b) Alternate or backup IPv4 Address(es) where to send Notifications encoded as
\"altNotifIpv4Addrs\" attribute;
c) Alternate or backup IPv6 Address(es) where to send Notifications encoded as
\"altNotifIpv6Addrs\" attribute;
d) Alternate or backup FQDN(s) where to send Notifications encoded as
\"altNotifFqdns\" attribute;
\- A Data Network Name as \"dnn\" attribute;
\- A single Network Slice Selection Assistance Information as \"snssai\"
attribute;
\- Immediate reporting flag as \"ImmeRep\" attribute;
\- event notification method (periodic, one time, on event detection) as
\"notifMethod\" attribute;
\- Maximum Number of Reports as \"maxReportNbr\" attribute;
\- Monitoring Duration as \"expiry\" attribute;
\- Repetition Period for periodic reporting as \"repPeriod\" attribute;
\- sampling ratio as \"sampRatio\" attribute;
\- partitioning criteria for partitioning the UEs before performing sampling
as \"partitionCriteria\" attribute if the EneNA feature is supported; and/or
\- group reporting guard time as \"grpRepTime\" attribute; and/or
\- a notification flag as \"notifFlag\" attribute if the EneNA feature is
supported.
Upon the reception of an HTTP POST request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions\" as Resource URI and NsmfEventExposure data
structure as request body, the SMF shall:
\- create a new subscription;
\- assign a subscription correlation ID;
\- select an expiry time that is equal to or less than the expiry time
potentially received in the request;
\- store the subscription;
\- send an HTTP \"201 Created\" response with NsmfEventExposure data structure
as response body and a Location header field containing the URI of the created
individual subscription resource, i.e. \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{subId}\";
\- if the feature \"ERIR\" is not supported, and if the \"ImmeRep\" attribute
is included and set to true in the request, the SMF shall immediately notify
the NF service consumer of the current available value(s) using the
Nsmf_EventExposure_Notify service operation, as defined in clause 4.2.2.1;
\- if the feature \"ERIR\" is supported, and if the \"ImmeRep\" attribute is
included and set to true, the SMF may immediately notify the NF service
consumer with the current available value(s) for the subscribed event(s)
within the HTTP \"201 Created\" response as shown in figure 4.2.3.2-1, step 2.
The \"NsmfEventExposure\" data type in the response may include the
corresponding event(s) notification within the \"eventNotifs\" attribute.
\- if the sampling ratio attribute, as \"sampRatio\", is included in the
subscription without a \"partitionCriteria\" attribute, the SMF shall select a
random subset of UEs among the target UEs according to the sampling ratio and
only report the event(s) related to the selected subset of UEs. If the
\"partitionCriteria\" attribute is additionally included, then the SMF shall
first partition the UEs according to the value of the \"partitionCriteria\"
attribute and then select a random subset of UEs from each partition according
to the sampling ratio and only report the event(s) related to the selected
subsets of UEs;
\- when the group reporting guard time attribute, as \"grpRepTime\", is
included in the subscription, the SMF shall accumulate all the event reports
for the target UEs until the group reporting guard time expires. Then the SMF
shall notify the NF service consumer using the Nsmf_EventExposure_Notify
service operation, as described in clause 4.2.2.2; and
\- if the \"notifFlag\" attribute is included and set to \"DEACTIVATE\" in the
request, the SMF shall mute the event notification and store the available
events.
If the SMF received an GUAMI, the SMF may subscribe to GUAMI changes using the
AMFStatusChange service operation of the Namf_Communication service specified
in 3GPP TS 29.518 [13], and it may use the Nnrf_NFDiscovery Service specified
in 3GPP TS 29.510 [12] (using the obtained GUAMI and possibly service name) to
query the other AMFs within the AMF set.
#### 4.2.3.3 Modifying an existing subscription
Figure 4.2.3.3-1 illustrates the modification of an existing subscription.
{width="5.790972222222222in" height="1.8958333333333333in"}
Figure 4.2.3.3-1: Modification of an existing subscription
To modify an existing subscription to event notifications, the NF service
consumer shall send an HTTP PUT request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, where \"{**subId**}\"
is the subscription correlation ID of the existing subscription, and
NsmfEventExposure data structure as request body as described in clause
4.2.3.2.
NOTE 1: An alternate NF service consumer than the one that requested the
generation of the subscription resource can send the PUT. For instance, an AMF
as NF service consumer can change.
NOTE 2: The \"notifUri\" attribute within the NsmfEventExposure data structure
can be modified to request that subsequent notifications are sent to a new NF
service consumer.
When the \"notifFlag\" attribute is included, and set to \"DEACTIVATE\" in the
request, the SMF shall mute the event notification and store the available
events; if it is set to \"RETRIEVAL\" in the request, the SMF shall send the
stored events to the NF service consumer, mute the event notification again
and store available events; if it is set to \"ACTIVATE\" and the event
notifications are muted (due to a previously received \"DECATIVATE\" value),
the SMF shall unmute the event notification, i.e. start sending again
notifications for available events.
When the \"ImmRep\" attribute set to true is included in the subscription and
the subscribed event(s) are available:
\- if the feature \"ERIR\" is not supported, the SMF shall immediately notify
the NF service consumer with the current available value(s) for the subscribed
event(s) using the Nsmf_EventExposure_Notify service operation, as described
in clause 4.2.2.1.
\- if the feature \"ERIR\" is supported, the SMF may immediately notify the NF
service consumer with the current available value(s) for the subscribed
event(s) within the HTTP \"200 OK\" response as shown in figure 4.2.3.3-1,
step 2a. The \"NsmfEventExposure\" data type may include the corresponding
event(s) notification within the \"eventNotifs\" attribute.
NOTE 3: Only the newly added event(s) needs to be reported during the
subscription update.
If the \"sampRatio\" attribute is included in the request without a
\"partitionCriteria\" attribute, the SMF shall select a random subset of UEs
among the target UEs according to the sampling ratio and only report the
event(s) related to the selected subset of UEs. If the \"partitionCriteria\"
attribute is additionally included, then the SMF shall first partition the UEs
according to the value of the \"partitionCriteria\" attribute and then select
a random subset of UEs from each partition according to the sampling ratio and
only report the event(s) related to the selected subsets of UEs.
When the \"grpRepTime\" attribute is included in the request, the SMF shall
accumulate all the event reports for the target UEs until the group reporting
guard time expires. Then the SMF shall notify the NF service consumer using
the Nsmf_EventExposure_Notify service operation, as described in clause
4.2.2.2.
When the \"expiry\" attribute is included in the request, the SMF shall select
an expiry time that is equal to or less than the expiry time received in the
request.
Upon the reception of an HTTP PUT request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI and NsmfEventExposure
data structure as request body, if the received HTTP request is successfully
processed and accepted, the SMF shall:
\- update the concerned subscription; and
\- send an HTTP \"200 OK\" response with a response body containing a
representation of the updated subscription in the NsmfEventExposure data
structure or send a HTTP \"204 No Content\".
If errors occur when processing the HTTP PUT request, the SMF shall send an
HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the SMF determines the received
HTTP PUT request needs to be redirected, the SMF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [4].
### 4.2.4 Nsmf_EventExposure_UnSubscribe Service Operation
#### 4.2.4.1 General
This service operation is used by an NF service consumer to unsubscribe from
event notifications.
The following procedure using the Nsmf_EventExposure_UnSubscribe service
operation is supported:
\- unsubscription from event notifications.
#### 4.2.4.2 Unsubscription from event notifications
Figure 4.2.4.2-1 illustrates the unsubscription from event notifications.
Figure 4.2.4.2-1: Unsubscription from event notifications
To unsubscribe from event notifications, the NF service consumer shall send an
HTTP DELETE request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, where \"{**subId**}\"
is the subscription correlation ID of the existing subscription that is to be
deleted.
Upon the reception of the HTTP DELETE request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, if the received HTTP
request is successfully processed and accepted, the SMF shall:
\- remove the corresponding subscription; and
\- send an HTTP \"204 No Content\" response.
If errors occur when processing the HTTP DELETE request, the SMF shall send an
HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the SMF determines the received
HTTP DELETE request needs to be redirected, the SMF shall send an HTTP
redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [4].
### 4.2.5 Nsmf_EventExposure_AppRelocationInfo Service Operation
#### 4.2.5.1 General
The Nsmf_EventExposure_AppRelocationInfo service operation enables the NF
service consumer to acknowledge the notification of subscribed events on the
related PDU session from the SMF.
The following procedure using the Nsmf_EventExposure_AppRelocationInfo service
operation is supported:
\- acknowledgement of notification about subscribed events.
#### 4.2.5.2 Acknowledgement of Notification about subscribed events
Figure 4.2.5.2-1 illustrates the acknowledgement of notification about
subscribed events.
Figure 4.2.5.2-1: Acknowledgement of Notification about subscribed events
In order to acknowledge the SMF of the application relocation information
after the handling of a notification about UP path change event, an NF service
consumer shall send an HTTP POST request to the callback URI \"{ackUri}\" as
previously provided by the SMF in an attribute within the
NsmfEventExposureNotification data during UP path change notification
procedure as defined in clause 4.2.2.2.
The request body contains the AckOfNotify data structure that shall include:
\- Notification correlation ID provided by the SMF during UP path change
notification, as \"notifId\" attribute;
\- an identifier of UE (i.e. SUPI or GPSI), if available and the subscription
does not applies to a group of UE(s) or any UE; and
\- information about the AF acknowledgement within the \"ackResult\" attribute
that shall contain result status of the application relocation as \"afStatus\"
attribute. If the \"afStatus\" attribute sets to \"SUCCESS\", the N6 traffic
routing information associated to the target DNAI may be included as
\"trafficRoute\" attribute and, if the \"ULBuffering\" feature is supported,
an indication that buffering of uplink traffic to the target DNAI is needed
may be included as \"upBuffInd\" attribute and, if the feature
\"EASIPreplacement\" is supported, EAS IP replacement information may be
included as \"easIpReplaceInfos\" attribute. If the application relocation is
not completed on time, the \"afStatus\" attribute shall set to the
corresponding failure cause.
Upon the reception of an HTTP POST request with AckOfNotify data structure as
request body, the SMF shall send an HTTP \"204 No Content\" response for a
succesfull processing.
If errors occur when processing the HTTP POST request, the SMF shall send an
HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the SMF determines the received
HTTP POST request needs to be redirected, the SMF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [4].
# 5 Nsmf_EventExposure API
## 5.1 Introduction
The Session Management Event Exposure Service shall use the Nsmf_EventExposure
API.
The API URI of the Nsmf_EventExposure API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the SMF shall have the Resource URI structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nsmf-event-exposure\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [8], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [10] specification of HTTP messages and content bodies for the
Nsmf_EventExposure is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [18].
### 5.2.3 HTTP custom headers
The Nsmf_EventExposure API shall support HTTP custom header fields specified
in clause 5.2.3.2 of 3GPP TS 29.500 [4] and may support HTTP custom header
fields specified in clause 5.2.3.3 of 3GPP TS 29.500 [4].
In this Release of the specification, no specific custom headers are defined
for the Nsmf_EventExposure API.
## 5.3 Resources
### 5.3.1 Resource Structure
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 5.3.1-1 depicts the resource URIs structure for the Nsmf_EventExposure
API.
Figure 5.3.1-1: Resource URI structure of the Nsmf_EventExposure API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description SMF
Notification Subscriptions /subscriptions POST Create a new Individual SMF
Notification Subscription resource. Individual SMF Notification Subscription
/subscriptions/{subId} GET Read an Individual SMF Notification Subscription
resource. PUT Modify an existing Individual SMF Notification Subscription
resource. DELETE Delete an Individual SMF Notification Subscription resource
and cancel the related subscription.
* * *
### 5.3.2 Resource: SMF Notification Subscriptions
#### 5.3.2.1 Description
The SMF Notification Subscriptions resource represents the collection of
subscriptions to the SMF event exposure service at a given SMF.
#### 5.3.2.2 Resource definition
Resource URI: {apiRoot}/nsmf-event-exposure/v1/subscriptions
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposure M 1 Create a new
Individual SMF Notification Subscription resource.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
* * *
Data type P Cardinality Response codes Description NsmfEventExposure M 1 201
Created The creation of an Individual SMF Notification Subscription resource
is confirmed and a representation of that resource is returned. NOTE: The
mandatory HTTP error status codes for the POST method listed in table
5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
* * *
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nsmf-
event-exposure/v1/subscriptions/{**subId**}
* * *
#### 5.3.2.4 Resource Custom Operations
None.
### 5.3.3 Resource: Individual SMF Notification Subscription
#### 5.3.3.1 Description
The SMF Notification Subscriptions resource represents a single subscription
to the SMF event exposure service.
#### 5.3.3.2 Resource definition
Resource URI: {apiRoot}/nsmf-event-exposure/v1/subscriptions/{**subId**}
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1 subId string
Identifies a subscription to the SMF event exposure service formatted as
defined for the SubId type in table 5.6.3.2-1.
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Nsmf | M | 1 | 200 OK | A | | EventExposure | | | | r | | | | | | epresentation | | | | | | of the SMF | | | | | | Notification | | | | | | Subscription | | | | | | matching the | | | | | | subId is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported.. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
##### 5.3.3.3.2 PUT
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposure M 1 Modify the existing
Individual SMF Notification Subscription resource matching the subId according
to the representation in the NsmfEventExposure
* * *
Table 5.3.3.3.2-3: Data structures supported by the PUT Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Nsmf | M | 1 | 200 OK | Successful | | EventExposure | | | | case: The | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | resource | | | | | | matching the | | | | | | subId was | | | | | | modified and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | is returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | resource | | | | | | matching the | | | | | | subId was | | | | | | modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported.. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
##### 5.3.3.3.3 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.3-1.
Table 5.3.3.3.3-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.3-2 and the response data structures and response codes specified in
table 5.3.3.3.3-3.
Table 5.3.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | resource | | | | | | matching the | | | | | | subId was | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | SMF | | | | | | Notification | | | | | | Subscription | | | | | | deletion. The | | | | | | response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported.. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.3-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.3-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative SMF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
#### 5.3.3.4 Resource Custom Operations
None.
## 5.4 Custom Operations without associated resources
None.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 5.5.1-1: Notifications overview
* * *
Notification Callback URI HTTP method or custom operation Description (service
operation) Event Notification {notifUri} POST Provides information about
observed events. Acknowledgement of event notification {ackUri} POST Provides
acknowledgement of event notification
* * *
### 5.5.2 Event Notification
#### 5.5.2.1 Description
The Event Notification is used by the SMF to report one or several observed
Events to a NF service consumer that has subscribed to such Notifications.
NOTE 1: The definition of \"callbacks\" in the OpenAPI specification found in
clause A.2 associated to the POST method of the \"SMF Notification
Subscriptions\" resource is used as the notification request for both explicit
and implicit subscriptions.
NOTE 2: For implicit subscriptions, the PCF can have previously stored in the
SMF the notification URI to be used in the notifications initiated by the SMF.
See 3GPP TS 29.512 [14] for the details.
#### 5.5.2.2 Target URI
The Callback URI **\"{notifUri}\"** shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri The Notification Uri as assigned either
within the Individual SMF Notification Subscription Resource during the
explicit subscription service operation and described within the
NsmfEventExposure type (see table 5.6.2.2-1) or assigned during the implicit
subscription via the provisioning of the subscription information within the
PCC Rule from the PCF (see 3GPP TS 29.512 [14].
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposureNotification M 1 Provides
Information about observed events
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | ac | | | | | | knowledgement | | | | | | request | | | | | | should be | | | | | | sent. | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The NF | | roblemDetails | | | | service | | | | | | consumer can | | | | | | use this | | | | | | response when | | | | | | the | | | | | | notification | | | | | | can be sent | | | | | | to another | | | | | | host. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected. May be included if the feature
\"ES3XX\" is supported.
* * *
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
### 5.5.3 Acknowledgement of event notification
#### 5.5.3.1 Description
The Acknowledgement of Event Notification is used by the NF service consumer
to acknowledge the SMF about handling result of the event notification (e.g.
UP path change).
#### 5.5.3.2 Target URI
The Callback URI **\"{ackUri}\"** shall be used with the callback URI
variables defined in table 5.5.3.2-1.
Table 5.5.3.2-1: Callback URI variables
* * *
Name Data type Definition ackUri Uri Acknowledgement Uri as assigned during
the procedure of notification about subscribed events and described within the
NsmfEventExposureNotification data type (see table 5.6.2.3-1).
* * *
#### 5.5.3.3 Standard Methods
##### 5.5.3.3.1 POST
This method shall support the URI query parameters specified in table
5.5.3.3.1-1.
Table 5.5.3.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.3.3.1-2 and the response data structures and response codes specified in
table 5.5.3.3.1-3.
Table 5.5.3.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description AckOfNotify M 1 Acknowledgement
information of event notification
* * *
Table 5.5.3.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | ac | | | | | | knowledgement | | | | | | is | | | | | | successful. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | ac | | | | | | knowledgement | | | | | | of | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance | | | | | | where the | | | | | | ac | | | | | | knowledgement | | | | | | request | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | ac | | | | | | knowledgement | | | | | | of | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | SMF (service) | | | | | | instance | | | | | | where the | | | | | | ac | | | | | | knowledgement | | | | | | request | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative SMF (service) instance
towards which the acknowledgement should be redirected. 3gpp-Sbi-Target-Nf-Id
string O 0..1 Identifier of the target NF (service) instance towards which the
acknowledgement request is redirected
* * *
Table 5.5.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative SMF (service) instance
towards which the acknowledgement should be redirected. 3gpp-Sbi-Target-Nf-Id
string O 0..1 Identifier of the target NF (service) instance towards which the
acknowledgement request is redirected
* * *
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Nsmf_EventExposure
service based interface protocol.
Table 5.6.1-1: Nsmf_EventExposure specific Data Types
+----------------+----------------+----------------+----------------+ | Data type | Section | Description | Applicability | | | defined | | | +----------------+----------------+----------------+----------------+ | AckOfNotify | 5.6.2.7 | A | | | | | cknowledgement | | | | | information of | | | | | event | | | | | notification | | +----------------+----------------+----------------+----------------+ | A | 5.6.3.6 | The type of | SMCCE | | ppliedSmccType | | applied SM | | | | | congestion | | | | | control. | | +----------------+----------------+----------------+----------------+ | Eve | 5.6.2.5 | Describes | | | ntNotification | | notifications | | | | | about a single | | | | | event that | | | | | occurred. | | +----------------+----------------+----------------+----------------+ | Eve | 5.6.2.4 | Represents the | | | ntSubscription | | subscription | | | | | to a single | | | | | event | | +----------------+----------------+----------------+----------------+ | Noti | 5.6.3.4 | Represents the | | | ficationMethod | | notification | | | | | methods that | | | | | can be | | | | | subscribed | | +----------------+----------------+----------------+----------------+ | Nsm | 5.6.2.2 | Represents an | | | fEventExposure | | Individual SMF | | | | | Notification | | | | | Subscription | | | | | resource | | +----------------+----------------+----------------+----------------+ | N | 5.6.2.3 | Describes | | | smfEventExposu | | Notifications | | | reNotification | | about events | | | | | that occurred. | | +----------------+----------------+----------------+----------------+ | PduSessionInfo | 5.6.2.12 | Represents | U | | | | session | eCommunication | | | | information. | | +----------------+----------------+----------------+----------------+ | PduSess | 5.6.2.11 | Represents the | U | | ionInformation | | PDU session | eCommunication | | | | related | | | | | information. | | +----------------+----------------+----------------+----------------+ | Pd | 5.6.3.8 | Status of the | U | | uSessionStatus | | PDU Session. | eCommunication | +----------------+----------------+----------------+----------------+ | SmfEvent | 5.6.3.3 | Represents the | | | | | types of | | | | | events that | | | | | can be | | | | | subscribed | | +----------------+----------------+----------------+----------------+ | SubId | 5.6.3.2 | Identifies an | | | | | Individual SMF | | | | | Notification | | | | | Subscription. | | +----------------+----------------+----------------+----------------+ | SmNasFromSmf | 5.6.2.9 | Describes the | SMCCE | | | | information of | | | | | the SM NAS | | | | | messages from | | | | | SMF with | | | | | backoff timer | | +----------------+----------------+----------------+----------------+ | SmNasFromUe | 5.6.2.8 | Describes the | SMCCE | | | | information of | | | | | the SM NAS | | | | | requests from | | | | | UE | | +----------------+----------------+----------------+----------------+ | T | 5.6.2.10 | UE Session | Dispersion | | ransactionInfo | | Management | | | | | transaction | | | | | information. | | +----------------+----------------+----------------+----------------+ | Tra | 5.6.3.7 | Metric on UE | Dispersion | | nsactionMetric | | Session | | | | | Management | | | | | transactions. | | +----------------+----------------+----------------+----------------+ | UpfInformation | 5.6.2.13 | The | Ser | | | | information of | viceExperience | | | | the UPF | | | | | serving the | DnPerformance | | | | UE. | | +----------------+----------------+----------------+----------------+
Table 5.6.1-2 specifies data types re-used by the Nsmf_EventExposure service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Nsmf_EventExposure service based interface.
Table 5.6.1-2: Nsmf_EventExposure re-used Data Types
* * *
Data type Reference Comments Applicability AccessType 3GPP TS 29.571 [11]  
AfResultInfo 3GPP TS 29.522 [20] Represents application handling information.  
ApplicationId 3GPP TS 29.571 [11] The application identifier. QfiAllocation
CommunicationFailure 3GPP TS 29.518 [13] Represents the communication failure
information. CommunicationFailure DateTime 3GPP TS 29.571 [11]  
DlDataDeliveryStatus 3GPP TS 29.571 [11] Status of downlink data delivery
DownlinkDataDeliveryStatus DddTrafficDescriptor 3GPP TS 29.571 [11] Traffic
descriptor of source of downlink data DownlinkDataDeliveryStatus Dnai 3GPP TS
29.571 [11]  
DnaiChangeType 3GPP TS 29.571 [11] Describes the types of DNAI change.  
Dnn 3GPP TS 29.571 [11] QfiAllocation, PduSessionStatus DurationSec 3GPP TS
29.571 [11]  
EthFlowDescription 3GPP TS 29.514 [22] Ethernet flow description QfiAllocation
FlowDescription 3GPP TS 29.514 [22] IP flow description QfiAllocation Fqdn
3GPP TS 29.571 [11] FQDN  
Gpsi 3GPP TS 29.571 [11]  
GroupId 3GPP TS 29.571 [11]  
Guami 3GPP TS 29.571 [11] Globally Unique AMF Identifier  
IpAddr 3GPP TS 29.571 [11] UE IP address. Dispersion Ipv4Addr 3GPP TS 29.571
[11]  
Ipv6Addr 3GPP TS 29.571 [11]  
Ipv6Prefix 3GPP TS 29.571 [11]  
MacAddr48 3GPP TS 29.571 [11] MAC Address.  
NotificationFlag 3GPP TS 29.571 [11] Notification flag. EneNA
PartitioningCriteria 3GPP TS 29.571 [11] Used to partition UEs before applying
sampling. EneNA PduSessionId 3GPP TS 29.571 [11]  
PduSessionType 3GPP TS 29.571 [11] PDU session type. PduSessionStatus
PlmnIdNid 3GPP TS 29.571 [11] Identification of a network: the PLMN Identifier
or the SNPN Identifier (the PLMN Identifier and the NID).  
ProblemDetails 3GPP TS 29.571 [11]  
Qfi 3GPP TS 29.571 [11] QoS flow identifier. QfiAllocation RatType 3GPP TS
29.571 [11]  
RedirectResponse 3GPP TS 29.571 [11] Contains redirection related information.
ES3XX RouteToLocation 3GPP TS 29.571 [11] A traffic route to/from an DNAI  
SamplingRatio 3GPP TS 29.571 [11] Sampling Ratio.  
ServiceName 3GPP TS 29.510 [12] Name of the service instance.  
Snssai 3GPP TS 29.571 [11] S-NSSAI QfiAllocation Supi 3GPP TS 29.571 [11]  
SupportedFeatures 3GPP TS 29.571 [11] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
TimeWindow 3GPP TS 29.122 [24] A start time and a stop time of a time window.
SMCCE Uinteger 3GPP TS 29.571 [11]  
Uri 3GPP TS 29.571 [11]
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type NsmfEventExposure
Table 5.6.2.2-1: Definition of type NsmfEventExposure
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | C | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | I | | | | | | | dentifier | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | C | 0..1 | Generic | | | | | | | Public | | | | | | | Sub | | | | | | | scription | | | | | | | I | | | | | | | dentifier | | | | | | | (NOTE 1) | | | | | | | | | | | | | | This IE | | | | | | | is not | | | | | | | a | | | | | | | pplicable | | | | | | | to | | | | | | | \"SM | | | | | | | CC_EXP\" | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | anyUeInd | boolean | C | 0..1 | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | is | | | | | | | a | | | | | | | pplicable | | | | | | | to any | | | | | | | UE. | | | | | | | Default | | | | | | | value | | | | | | | \"false\" | | | | | | | is used, | | | | | | | if not | | | | | | | present | | | | | | | (NOTE 1) | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | groupId | GroupId | C | 0..1 | I | | | | | | | dentifies | | | | | | | a group | | | | | | | of UEs. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | pduSeId | Pdu | C | 0..1 | PDU | | | | SessionId | | | session | | | | | | | ID (NOTE | | | | | | | 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | O | 0..1 | Data | | | | | | | Network | | | | | | | Name. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | O | 0..1 | A single | | | | | | | Network | | | | | | | Slice | | | | | | | Selection | | | | | | | A | | | | | | | ssistance | | | | | | | Inf | | | | | | | ormation. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | subId | SubId | C | 0..1 | Sub | | | | | | | scription | | | | | | | ID.\ | | | | | | | This | | | | | | | parameter | | | | | | | shall be | | | | | | | supplied | | | | | | | by the | | | | | | | SMF in | | | | | | | HTTP | | | | | | | responses | | | | | | | that | | | | | | | include | | | | | | | an object | | | | | | | of | | | | | | | NsmfEven | | | | | | | tExposure | | | | | | | type. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifId | string | M | 1 | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID | | | | | | | provided | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | M | 1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | Noti | | | | | | | fications | | | | | | | sent by | | | | | | | the SMF. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv4Addrs | Ipv4Addr) | | | or backup | | | | | | | IPv4 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv6Addrs | Ipv6Addr) | | | or backup | | | | | | | IPv6 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altN | ar | O | 1..N | Alternate | | | otifFqdns | ray(Fqdn) | | | or backup | | | | | | | FQDN(s) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | eventSubs | array( | M | 1..N | S | | | | EventSubs | | | ubscribed | | | | cription) | | | events. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | ev | array( | O | 1..N | R | ERIR | | entNotifs | EventNoti | | | epresents | | | | fication) | | | the SMF | | | | | | | Events to | | | | | | | be | | | | | | | reported | | | | | | | in the | | | | | | | Ns | | | | | | | mf_EvenE | | | | | | | xposure_ | | | | | | | Subscribe | | | | | | | response. | | | | | | | | | | | | | | May be | | | | | | | present | | | | | | | when the | | | | | | | \"ERIR\" | | | | | | | feature | | | | | | | is | | | | | | | supported | | | | | | | and the | | | | | | | \" | | | | | | | ImmeRep\" | | | | | | | attribute | | | | | | | set to | | | | | | | true is | | | | | | | included | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | ImmeRep | boolean | O | 0..1 | It is | | | | | | | included | | | | | | | and set | | | | | | | to true | | | | | | | if the | | | | | | | immediate | | | | | | | reporting | | | | | | | of the | | | | | | | current | | | | | | | status of | | | | | | | the | | | | | | | s | | | | | | | ubscribed | | | | | | | event, if | | | | | | | available | | | | | | | is | | | | | | | required. | | +-----------+-----------+---+-----------+-----------+-----------+ | no | Notificat | O | 0..1 | If | | | tifMethod | ionMethod | | | \"noti | | | | | | | fMethod\" | | | | | | | is not | | | | | | | supplied, | | | | | | | the | | | | | | | default | | | | | | | value | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | applies. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | max | Uinteger | O | 0..1 | If | | | ReportNbr | | | | omitted, | | | | | | | there is | | | | | | | no limit. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | expiry | DateTime | C | 0..1 | This | | | | | | | attribute | | | | | | | indicates | | | | | | | the | | | | | | | expiry | | | | | | | time of | | | | | | | the | | | | | | | subs | | | | | | | cription, | | | | | | | after | | | | | | | which the | | | | | | | SMF shall | | | | | | | not send | | | | | | | any event | | | | | | | noti | | | | | | | fications | | | | | | | and the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid. | | | | | | | It may be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | request | | | | | | | and may | | | | | | | be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | response | | | | | | | based on | | | | | | | operator | | | | | | | policies. | | | | | | | If an | | | | | | | expiry | | | | | | | time was | | | | | | | included | | | | | | | in the | | | | | | | request, | | | | | | | then the | | | | | | | expiry | | | | | | | time | | | | | | | returned | | | | | | | in the | | | | | | | response | | | | | | | should be | | | | | | | less than | | | | | | | or equal | | | | | | | to that | | | | | | | value. If | | | | | | | the | | | | | | | expiry | | | | | | | time is | | | | | | | not | | | | | | | included | | | | | | | in the | | | | | | | response, | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | shall not | | | | | | | associate | | | | | | | an expiry | | | | | | | time for | | | | | | | the | | | | | | | subs | | | | | | | cription. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | repPeriod | Du | C | 0..1 | Is | | | | rationSec | | | supplied | | | | | | | for | | | | | | | not | | | | | | | ification | | | | | | | Method | | | | | | | \"pe | | | | | | | riodic\". | | +-----------+-----------+---+-----------+-----------+-----------+ | guami | Guami | C | 0..1 | The | | | | | | | Globally | | | | | | | Unique | | | | | | | AMF | | | | | | | I | | | | | | | dentifier | | | | | | | (GUAMI) | | | | | | | shall be | | | | | | | provided | | | | | | | by an AMF | | | | | | | as NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Se | O | 0..1 | If the NF | | | rviceName | rviceName | | | service | | | | | | | consumer | | | | | | | is an | | | | | | | AMF, it | | | | | | | should | | | | | | | provide | | | | | | | the name | | | | | | | of a | | | | | | | service | | | | | | | produced | | | | | | | by the | | | | | | | AMF that | | | | | | | makes use | | | | | | | of the | | | | | | | not | | | | | | | ification | | | | | | | about | | | | | | | s | | | | | | | ubscribed | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | List of | | | dFeatures | dFeatures | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | This | | | | | | | parameter | | | | | | | shall be | | | | | | | supplied | | | | | | | by NF | | | | | | | service | | | | | | | consumer | | | | | | | and SMF | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | request | | | | | | | the | | | | | | | creation | | | | | | | of an SMF | | | | | | | Not | | | | | | | ification | | | | | | | Subs | | | | | | | criptions | | | | | | | resource | | | | | | | and the | | | | | | | related | | | | | | | reply, | | | | | | | resp | | | | | | | ectively. | | +-----------+-----------+---+-----------+-----------+-----------+ | sampRatio | Samp | O | 0..1 | Indicates | | | | lingRatio | | | the ratio | | | | | | | of the | | | | | | | random | | | | | | | subset to | | | | | | | target | | | | | | | UEs, | | | | | | | event | | | | | | | reports | | | | | | | only | | | | | | | relates | | | | | | | to the | | | | | | | subset. | | +-----------+-----------+---+-----------+-----------+-----------+ | partitio | array(Par | O | 1..N | Defines | EneNA | | nCriteria | titioning | | | criteria | | | | Criteria) | | | for | | | | | | | par | | | | | | | titioning | | | | | | | the UEs | | | | | | | in order | | | | | | | to apply | | | | | | | the | | | | | | | sampling | | | | | | | ratio for | | | | | | | each | | | | | | | p | | | | | | | artition. | | | | | | | It may | | | | | | | only be | | | | | | | included | | | | | | | in event | | | | | | | sub | | | | | | | scription | | | | | | | requests | | | | | | | when the | | | | | | | \"sa | | | | | | | mpRatio\" | | | | | | | attribute | | | | | | | is also | | | | | | | provided. | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | g | Du | O | 0..1 | Indicates | | | rpRepTime | rationSec | | | the time | | | | | | | for which | | | | | | | the SMF | | | | | | | a | | | | | | | ggregates | | | | | | | the event | | | | | | | reports | | | | | | | detected | | | | | | | by the | | | | | | | UEs in a | | | | | | | group and | | | | | | | report | | | | | | | them | | | | | | | together | | | | | | | to the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifFlag | Notific | O | 0..1 | Indicates | EneNA | | | ationFlag | | | the | | | | | | | not | | | | | | | ification | | | | | | | flag, | | | | | | | which is | | | | | | | used to | | | | | | | mu | | | | | | | te/unmute | | | | | | | noti | | | | | | | fications | | | | | | | and to | | | | | | | retrieve | | | | | | | events | | | | | | | stored | | | | | | | during a | | | | | | | period of | | | | | | | muted | | | | | | | notif | | | | | | | ications. | | | | | | | | | | | | | | Default: | | | | | | | \"A | | | | | | | CTIVATE\" | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | If the | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | for a | | | | | | | specific | | | | | | | PDU | | | | | | | session, | | | | | | | the PDU | | | | | | | session | | | | | | | of a | | | | | | | single UE | | | | | | | (pduSeId, | | | | | | | and | | | | | | | g | | | | | | | psi/supi) | | | | | | | shall be | | | | | | | included; | | | | | | | otherwise | | | | | | | one and | | | | | | | only one | | | | | | | of a | | | | | | | single UE | | | | | | | (gp | | | | | | | si/supi), | | | | | | | a group | | | | | | | of UEs | | | | | | | ( | | | | | | | groupId), | | | | | | | or | | | | | | | anyUeInd | | | | | | | set to | | | | | | | true | | | | | | | shall be | | | | | | | included. | | | | | | | | | | | | | | NOTE 2: | | | | | | | If the | | | | | | | UDM as NF | | | | | | | service | | | | | | | consumer | | | | | | | s | | | | | | | ubscribes | | | | | | | to event | | | | | | | (e.g. | | | | | | | downlink | | | | | | | data | | | | | | | delivery | | | | | | | status, | | | | | | | PDU | | | | | | | Session | | | | | | | Estab | | | | | | | lishment, | | | | | | | PDU | | | | | | | Session | | | | | | | Release) | | | | | | | on behalf | | | | | | | of | | | | | | | AF/NEF, | | | | | | | \" | | | | | | | notifId\" | | | | | | | shall be | | | | | | | set the | | | | | | | same as | | | | | | | \"refe | | | | | | | renceId\" | | | | | | | received | | | | | | | from the | | | | | | | AF/NEF as | | | | | | | defined | | | | | | | in | | | | | | | clause | | | | | | | 6.4.6.2.4 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.50 | | | | | | | 3 [14]. | | | | | | | | | | | | | | NOTE 3: | | | | | | | For a | | | | | | | given | | | | | | | type of | | | | | | | par | | | | | | | titioning | | | | | | | criteria, | | | | | | | the UE | | | | | | | shall | | | | | | | belong to | | | | | | | only one | | | | | | | single | | | | | | | partition | | | | | | | as long | | | | | | | as it is | | | | | | | served by | | | | | | | the NF | | | | | | | service | | | | | | | producer. | | | | | | | | | | | | | | NOTE 4: | | | | | | | If EneNA | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported, | | | | | | | when the | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | is | | | | | | | presented | | | | | | | together | | | | | | | with | | | | | | | \"a | | | | | | | nyUeInd\" | | | | | | | attribute | | | | | | | and the | | | | | | | \"ev | | | | | | | entSubs\" | | | | | | | attribute | | | | | | | contains | | | | | | | \"PDU_S | | | | | | | ES_EST\" | | | | | | | and | | | | | | | \"PDU_SE | | | | | | | S_REL\", | | | | | | | then only | | | | | | | the | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | value is | | | | | | | a | | | | | | | pplicable | | | | | | | in the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | together | | | | | | | with | | | | | | | \"maxRe | | | | | | | portNbr\" | | | | | | | attribute | | | | | | | and/or | | | | | | | \ | | | | | | | "expiry\" | | | | | | | attribute | | | | | | | presence. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type NsmfEventExposureNotification
Table 5.6.2.3-1: Definition of type NsmfEventExposureNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | notifId | string | M | 1 | Not | | | | | | | ification | | | | | | | co | | | | | | | rrelation | | | | | | | ID used | | | | | | | to | | | | | | | identify | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | which the | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | corr | | | | | | | esponding | | | | | | | to. It | | | | | | | shall be | | | | | | | set to | | | | | | | the same | | | | | | | value as | | | | | | | the | | | | | | | \" | | | | | | | notifId\" | | | | | | | attribute | | | | | | | of | | | | | | | NsmfEven | | | | | | | tExposure | | | | | | | data type | | | | | | | or the | | | | | | | value of | | | | | | | \"notif | | | | | | | CorreId\" | | | | | | | within | | | | | | | the | | | | | | | UpPat | | | | | | | hChgEvent | | | | | | | data type | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 29.5 | | | | | | | 12 [14] | | | | | | | or the | | | | | | | value of | | | | | | | \"notif | | | | | | | CorreId\" | | | | | | | within | | | | | | | the | | | | | | | QosMonit | | | | | | | oringData | | | | | | | data type | | | | | | | defined | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 29.51 | | | | | | | 2 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+ | ev | array( | M | 1..N | Noti | | | entNotifs | EventNoti | | | fications | | | | fication) | | | about | | | | | | | I | | | | | | | ndividual | | | | | | | Events | | +-----------+-----------+---+-----------+-----------+-----------+ | ackUri | Uri | O | 0..1 | The URI | | | | | | | provided | | | | | | | by the | | | | | | | SMF for | | | | | | | the AF | | | | | | | acknowl | | | | | | | edgement. | | | | | | | | | | | | | | If | | | | | | | present, | | | | | | | it only | | | | | | | applies | | | | | | | to the | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | event | | | | | | | indicated | | | | | | | in the | | | | | | | \"even | | | | | | | tNotifs\" | | | | | | | a | | | | | | | ttribute. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.4 Type EventSubscription
Table 5.6.2.4-1: Definition of type EventSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | event | SmfEvent | M | 1 | S | | | | | | | ubscribed | | | | | | | events | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | DnaiC | C | 0..1 | For event | | | aiChgType | hangeType | | | UP path | | | | | | | change, | | | | | | | this | | | | | | | attribute | | | | | | | indicates | | | | | | | whether | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | is for | | | | | | | early, | | | | | | | late, or | | | | | | | early and | | | | | | | late DNAI | | | | | | | change | | | | | | | not | | | | | | | ification | | | | | | | shall be | | | | | | | supplied. | | +-----------+-----------+---+-----------+-----------+-----------+ | dddTraDe | array(Ddd | C | 1..N | The | Downlink | | scriptors | TrafficDe | | | traffic | DataDeliv | | | scriptor) | | | desc | eryStatus | | | | | | riptor(s) | | | | | | | of the | | | | | | | downlink | | | | | | | data | | | | | | | source. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"DDDS\". | | +-----------+-----------+---+-----------+-----------+-----------+ | dddStati | array(DlD | O | 1..N | May be | Downlink | | | ataDelive | | | included | DataDeliv | | | ryStatus) | | | for event | eryStatus | | | | | | \"DDDS\". | | | | | | | The | | | | | | | s | | | | | | | ubscribed | | | | | | | statuses | | | | | | | (d | | | | | | | iscarded, | | | | | | | tra | | | | | | | nsmitted, | | | | | | | buffered) | | | | | | | for the | | | | | | | event. If | | | | | | | omitted | | | | | | | all | | | | | | | statuses | | | | | | | are | | | | | | | su | | | | | | | bscribed. | | +-----------+-----------+---+-----------+-----------+-----------+ | appIds | ar | O | 1..N | May be | QfiA | | | ray(Appli | | | included | llocation | | | cationId) | | | for event | | | | | | | \"QFI | D | | | | | | _ALLOC\" | ispersion | | | | | | or | | | | | | | \"DISP | | | | | | | ERSION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | tar | T | O | 0..1 | Indicates | SMCCE | | getPeriod | imeWindow | | | the data | | | | | | | c | Redund | | | | | | ollection | antTransm | | | | | | target | issionExp | | | | | | period. | | | | | | | | WlanPe | | | | | | May be | rformance | | | | | | included | | | | | | | for event | | | | | | | \"SMC | | | | | | | C_EXP\", | | | | | | | \ | | | | | | | "RED_TRA | | | | | | | NS_EXP\" | | | | | | | or | | | | | | | \"WLAN | | | | | | | _INFO\". | | +-----------+-----------+---+-----------+-----------+-----------+ | trans | boolean | O | 0..1 | Indicates | D | | acDispInd | | | | the | ispersion | | | | | | sub | | | | | | | scription | | | | | | | for UE | | | | | | | tr | | | | | | | ansaction | | | | | | | d | | | | | | | ispersion | | | | | | | co | | | | | | | llection, | | | | | | | if it is | | | | | | | included | | | | | | | and set | | | | | | | to | | | | | | | \"true\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | | | | | | | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"DISP | | | | | | | ERSION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | trans | array( | O | 1..N | Requested | D | | acMetrics | Transacti | | | tr | ispersion | | | onMetric) | | | ansaction | | | | | | | metrics. | | | | | | | | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"DISP | | | | | | | ERSION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpAddr | IpAddr | O | 0..1 | Indicates | D | | | | | | the UE IP | ispersion | | | | | | address. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"DISP | | | | | | | ERSION\". | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.5 Type EventNotification
Table 5.6.2.5-1: Definition of type EventNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | event | SmfEvent | M | 1 | Event | | | | | | | that is | | | | | | | notified. | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | M | 1 | Time at | | | | | | | which the | | | | | | | event is | | | | | | | observed. | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | C | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | Id | | | | | | | entifier. | | | | | | | It is | | | | | | | included | | | | | | | when the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to a | | | | | | | group of | | | | | | | UE(s) or | | | | | | | any UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | C | 0..1 | I | | | | | | | dentifies | | | | | | | a GPSI. | | | | | | | It shall | | | | | | | contain | | | | | | | an | | | | | | | MSISDN. | | | | | | | It is | | | | | | | included | | | | | | | when it | | | | | | | is | | | | | | | available | | | | | | | and the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to a | | | | | | | group of | | | | | | | UE(s) or | | | | | | | any UE. | | | | | | | | | | | | | | This IE | | | | | | | is not | | | | | | | a | | | | | | | pplicable | | | | | | | to | | | | | | | \"SM | | | | | | | CC_EXP\" | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpAddr | IpAddr | C | 0..1 | Indicates | D | | | | | | the UE IP | ispersion | | | | | | address, | | | | | | | It is | | | | | | | included | | | | | | | for event | | | | | | | \"DIS | | | | | | | PERSION\" | | | | | | | when it | | | | | | | is | | | | | | | available | | | | | | | and | | | | | | | requested | | | | | | | in the | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | tra | arra | C | 1..N | Tr | D | | nsacInfos | y(Transac | | | ansaction | ispersion | | | tionInfo) | | | Inf | | | | | | | ormation. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"DISP | | | | | | | ERSION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Dnai | C | 0..1 | Source DN | | | ourceDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 1, | | | | | | | NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | t | Dnai | C | 0..1 | Target DN | | | argetDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 1, | | | | | | | NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | DnaiC | C | 0..1 | DNAI | | | aiChgType | hangeType | | | Change | | | | | | | Type. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | targetU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | targetUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceT | RouteT | C | 0..1 | N6 | | | raRouting | oLocation | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | source | | | | | | | DNAI. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if | | | | | | | available | | | | | | | (NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | targetT | RouteT | C | 0..1 | N6 | | | raRouting | oLocation | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | target | | | | | | | DNAI. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if | | | | | | | available | | | | | | | (NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMac | MacAddr48 | O | 0..1 | UE MAC | | | | | | | address. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | a | Ipv4Addr | O | 0..1 | Added | | | dIpv4Addr | | | | IPv4 | | | | | | | Add | | | | | | | ress(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | adI | I | O | 0..1 | Added | | | pv6Prefix | pv6Prefix | | | Ipv6 | | | | | | | Address | | | | | | | Pr | | | | | | | efix(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | r | Ipv4Addr | O | 0..1 | Removed | | | eIpv4Addr | | | | IPv4 | | | | | | | Add | | | | | | | ress(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | reI | I | O | 0..1 | Removed | | | pv6Prefix | pv6Prefix | | | Ipv6 | | | | | | | Address | | | | | | | Pr | | | | | | | efix(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | plmnId | PlmnIdNid | C | 0..1 | New PLMN | | | | | | | I | | | | | | | dentifier | | | | | | | or the | | | | | | | SNPN | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"PL | | | | | | | MN_CH\". | | | | | | | | | | | | | | (NOTE 7) | | +-----------+-----------+---+-----------+-----------+-----------+ | accType | A | C | 0..1 | New | | | | ccessType | | | Access | | | | | | | Type. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"AC_ | | | | | | | TY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | pduSeId | Pdu | C | 0..1 | PDU | | | | SessionId | | | session | | | | | | | ID. Shall | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"PDU_S | | | | | | | ES_REL\" | | | | | | | and | | | | | | | \"PDU_SE | | | | | | | S_EST\". | | | | | | | It shall | | | | | | | also be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI | | | | | | | _ALLOC\" | | | | | | | if the | | | | | | | sub | | | | | | | scription | | | | | | | was for a | | | | | | | UE, a | | | | | | | group of | | | | | | | UEs, or | | | | | | | any UE, | | | | | | | and not | | | | | | | for a | | | | | | | specific | | | | | | | PDU | | | | | | | Session. | | +-----------+-----------+---+-----------+-----------+-----------+ | ratType | RatType | C | 0..1 | New RAT | EneNA | | | | | | Type. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \'RAT_ | | | | | | | TY_CH\'. | | +-----------+-----------+---+-----------+-----------+-----------+ | dddStatus | Dl | C | 0..1 | Downlink | Downlink | | | DataDeliv | | | data | DataDeliv | | | eryStatus | | | delivery | eryStatus | | | | | | status | | | | | | | (d | | | | | | | iscarded, | | | | | | | tra | | | | | | | nsmitted, | | | | | | | b | | | | | | | uffered). | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \ | | | | | | | "downlink | | | | | | | data | | | | | | | delivery | | | | | | | status\", | | +-----------+-----------+---+-----------+-----------+-----------+ | ma | DateTime | C | 0..1 | The | Downlink | | xWaitTime | | | | estimated | DataDeliv | | | | | | maximum | eryStatus | | | | | | waiting | | | | | | | time for | | | | | | | downlink | | | | | | | data | | | | | | | delivery, | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \ | | | | | | | "downlink | | | | | | | data | | | | | | | delivery | | | | | | | status\" | | | | | | | with | | | | | | | status | | | | | | | \"BU | | | | | | | FFERED\". | | +-----------+-----------+---+-----------+-----------+-----------+ | dddTraD | Dd | C | 0..1 | The | Downlink | | escriptor | dTrafficD | | | downlink | DataDeliv | | | escriptor | | | data | eryStatus | | | | | | d | | | | | | | escriptor | | | | | | | impacted | | | | | | | by | | | | | | | downlink | | | | | | | data | | | | | | | delivery | | | | | | | status | | | | | | | change. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \ | | | | | | | "downlink | | | | | | | data | | | | | | | delivery | | | | | | | status\" | | +-----------+-----------+---+-----------+-----------+-----------+ | co | Co | C | 0..1 | Describes | Co | | mmFailure | mmunicati | | | the | mmunicati | | | onFailure | | | comm | onFailure | | | | | | unication | | | | | | | failure | | | | | | | cause for | | | | | | | the UE. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"COMM | | | | | | | _FAIL\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ipv4Addr | Ipv4Addr | O | 0..1 | IPv4 | PduSess | | | | | | address. | ionStatus | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"PDU_S | | | | | | | ES_REL\" | | | | | | | or | | | | | | | \"PDU_SE | | | | | | | S_EST\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ipv | array(Ip | O | 1..N | IPv6 | PduSess | | 6Prefixes | v6Prefix) | | | prefixes. | ionStatus | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"PDU_S | | | | | | | ES_REL\" | | | | | | | or | | | | | | | \"PDU_SE | | | | | | | S_EST\". | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | ipv6Addrs | array( | O | 1..N | IPv6 | PduSess | | | Ipv6Addr) | | | a | ionStatus | | | | | | ddresses. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"PDU_S | | | | | | | ES_REL\" | | | | | | | or | | | | | | | \"PDU_SE | | | | | | | S_EST\". | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | pd | PduSe | C | 0..1 | PDU | PduSess | | uSessType | ssionType | | | session | ionStatus | | | | | | type. | | | | | | | Shall be | | | | | | | included | | | | | | | if the | | | | | | | PduSess | | | | | | | ionStatus | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | qfi | Qfi | C | 0..1 | QoS flow | QfiA | | | | | | id | llocation | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\". | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | Appl | O | 0..1 | Contains | QfiA | | | icationId | | | the | llocation | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\". | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | eth | array(E | O | 1..N | Desc | Multip | | FlowDescs | thFlowDes | | | riptor(s) | leFlowDes | | | cription) | | | for | criptions | | | | | | non-IP | | | | | | | traffic | | | | | | | in which | | | | | | | only | | | | | | | ethernet | | | | | | | flow | | | | | | | de | | | | | | | scription | | | | | | | is | | | | | | | defined. | | | | | | | It allows | | | | | | | the | | | | | | | encoding | | | | | | | of | | | | | | | multiple | | | | | | | UL and/or | | | | | | | DL flows. | | | | | | | Each | | | | | | | entry of | | | | | | | the array | | | | | | | describes | | | | | | | a single | | | | | | | Ethernet | | | | | | | flow. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\", | | | | | | | when the | | | | | | | de | | | | | | | scription | | | | | | | of the | | | | | | | Ethernet | | | | | | | traffic | | | | | | | requires | | | | | | | multiple | | | | | | | UL and/or | | | | | | | DL flows. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | ethfDescs | array(E | O | 1..2 | Contains | QfiA | | | thFlowDes | | | the flow | llocation | | | cription) | | | de | | | | | | | scription | | | | | | | for the | | | | | | | Uplink | | | | | | | and/or | | | | | | | Downlink | | | | | | | Ethernet | | | | | | | flows. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\". | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | flowDescs | arra | O | 1..N | Desc | Multip | | | y(FlowDes | | | riptor(s) | leFlowDes | | | cription) | | | of IP | criptions | | | | | | traffic. | | | | | | | It allows | | | | | | | the | | | | | | | encoding | | | | | | | of | | | | | | | multiple | | | | | | | UL and/or | | | | | | | DL flows. | | | | | | | Each | | | | | | | entry of | | | | | | | the array | | | | | | | describes | | | | | | | a single | | | | | | | IP flow. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\", | | | | | | | when the | | | | | | | de | | | | | | | scription | | | | | | | of the IP | | | | | | | traffic | | | | | | | requires | | | | | | | multiple | | | | | | | UL and/or | | | | | | | DL flows. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | fDescs | arra | O | 1..2 | Contains | QfiA | | | y(FlowDes | | | the flow | llocation | | | cription) | | | de | | | | | | | scription | | | | | | | for the | | | | | | | Uplink | | | | | | | and/or | | | | | | | Downlink | | | | | | | IP flows. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\". | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | C | 0..1 | Data | QfiAl | | | | | | network | location, | | | | | | name, | PduSess | | | | | | Shall be | ionStatus | | | | | | included | | | | | | | for event | Redund | | | | | | \"QFI\ | antTransm | | | | | | _ALLOC\". | issionExp | | | | | | May be | | | | | | | included | SMCCE | | | | | | for event | | | | | | | \"PDU_S | | | | | | | ES_REL\" | | | | | | | or | | | | | | | \"PDU_SE | | | | | | | S_EST\". | | | | | | | Shall be | | | | | | | included | | | | | | | to | | | | | | | indiate | | | | | | | the DNN | | | | | | | a | | | | | | | ssociated | | | | | | | with | | | | | | | URLLC | | | | | | | service | | | | | | | for event | | | | | | | \" | | | | | | | RED_TRAN | | | | | | | S_EXP\". | | | | | | | | | | | | | | Shall be | | | | | | | included | | | | | | | if DNN | | | | | | | based | | | | | | | SMCC is | | | | | | | applied. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | C | 0..1 | I | QfiA | | | | | | dentifies | llocation | | | | | | the slice | | | | | | | inf | EneNA | | | | | | ormation. | | | | | | | Shall be | SMCCE | | | | | | included | | | | | | | for event | | | | | | | \"QFI\ | | | | | | | _ALLOC\". | | | | | | | | | | | | | | Shall be | | | | | | | included | | | | | | | if | | | | | | | S-NSSAI | | | | | | | based | | | | | | | SMCC is | | | | | | | applied. | | +-----------+-----------+---+-----------+-----------+-----------+ | ulDelays | array( | O | 1..N | Uplink | QoSM | | | Uinteger) | | | packet | onitoring | | | | | | delay in | | | | | | | units of | | | | | | | mill | | | | | | | iseconds. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QO | | | | | | | S_MON\". | | | | | | | (NOTE 5) | | +-----------+-----------+---+-----------+-----------+-----------+ | dlDelays | array( | O | 1..N | Downlink | QoSM | | | Uinteger) | | | packet | onitoring | | | | | | delay in | | | | | | | units of | | | | | | | mill | | | | | | | iseconds. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QO | | | | | | | S_MON\". | | | | | | | (NOTE 5) | | +-----------+-----------+---+-----------+-----------+-----------+ | rtDelays | array( | O | 1..N | Round | QoSM | | | Uinteger) | | | trip | onitoring | | | | | | delay in | | | | | | | units of | | | | | | | mill | | | | | | | iseconds. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QO | | | | | | | S_MON\". | | | | | | | (NOTE 5) | | +-----------+-----------+---+-----------+-----------+-----------+ | t | T | C | 0..1 | Time | SMCCE | | imeWindow | imeWindow | | | window | | | | | | | rep | | | | | | | resenting | | | | | | | a start | | | | | | | time and | | | | | | | a stop | | | | | | | time of | | | | | | | the data | | | | | | | c | | | | | | | ollection | | | | | | | period. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"SMC | | | | | | | C_EXP\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sm | array(SmN | C | 1..N | In | SMCCE | | NasFromUe | asFromUe) | | | formation | | | | | | | on the SM | | | | | | | NAS | | | | | | | messages | | | | | | | that SMF | | | | | | | receives | | | | | | | from UE | | | | | | | for PDU | | | | | | | Session. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"SMC | | | | | | | C_EXP\". | | +-----------+-----------+---+-----------+-----------+-----------+ | smN | a | C | 1..N | In | SMCCE | | asFromSmf | rray(SmNa | | | formation | | | | sFromSmf) | | | on the SM | | | | | | | c | | | | | | | ongestion | | | | | | | control | | | | | | | applied | | | | | | | SM NAS | | | | | | | messages | | | | | | | that SMF | | | | | | | sends to | | | | | | | UE for | | | | | | | PDU | | | | | | | Session. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"SMC | | | | | | | C_EXP\". | | +-----------+-----------+---+-----------+-----------+-----------+ | u | boolean | C | 0..1 | Indicates | Redund | | pRedTrans | | | | whether | antTransm | | | | | | the | issionExp | | | | | | redundant | | | | | | | tra | | | | | | | nsmission | | | | | | | is setup | | | | | | | or | | | | | | | te | | | | | | | rminated. | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | redundant | | | | | | | tra | | | | | | | nsmission | | | | | | | is setup, | | | | | | | otherwise | | | | | | | set to | | | | | | | \"false\" | | | | | | | if the | | | | | | | redundant | | | | | | | tra | | | | | | | nsmission | | | | | | | is | | | | | | | te | | | | | | | rminated. | | | | | | | Default | | | | | | | value is | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \" | | | | | | | RED_TRAN | | | | | | | S_EXP\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ssId | string | C | 0..1 | SSID that | WlanPe | | | | | | the PDU | rformance | | | | | | session | | | | | | | is | | | | | | | related | | | | | | | to. | | | | | | | (NOTE 6) | | +-----------+-----------+---+-----------+-----------+-----------+ | bssId | string | C | 0..1 | BSSID | WlanPe | | | | | | that the | rformance | | | | | | PDU | | | | | | | session | | | | | | | is | | | | | | | related | | | | | | | to. | | | | | | | (NOTE 6) | | +-----------+-----------+---+-----------+-----------+-----------+ | startWlan | DateTime | C | 0..1 | The time | WlanPe | | | | | | stamp | rformance | | | | | | that | | | | | | | indicates | | | | | | | when the | | | | | | | existing | | | | | | | PDU | | | | | | | S | | | | | | | ession\'s | | | | | | | access | | | | | | | type | | | | | | | changes | | | | | | | to WLAN | | | | | | | or when | | | | | | | the new | | | | | | | PDU | | | | | | | Session | | | | | | | for WLAN | | | | | | | is | | | | | | | est | | | | | | | ablished. | | | | | | | (NOTE 6) | | +-----------+-----------+---+-----------+-----------+-----------+ | endWlan | DateTime | C | 0..1 | The time | WlanPe | | | | | | stamp | rformance | | | | | | that | | | | | | | indicates | | | | | | | when the | | | | | | | existing | | | | | | | WLAN | | | | | | | based PDU | | | | | | | S | | | | | | | ession\'s | | | | | | | access | | | | | | | type is | | | | | | | not WLAN | | | | | | | any more | | | | | | | or when | | | | | | | the PDU | | | | | | | Session | | | | | | | for WLAN | | | | | | | is | | | | | | | released. | | | | | | | (NOTE 6) | | +-----------+-----------+---+-----------+-----------+-----------+ | pdu | a | C | 1..N | The PDU | UeComm | | SessInfos | rray(PduS | | | session | unication | | | essionInf | | | related | | | | ormation) | | | inf | | | | | | | ormation. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"U | | | | | | | P_STATUS | | | | | | | _INFO\". | | +-----------+-----------+---+-----------+-----------+-----------+ | upfInfo | UpfIn | C | 0..1 | The | ServiceE | | | formation | | | in | xperience | | | | | | formation | | | | | | | of the | DnPe | | | | | | UPF | rformance | | | | | | serving | | | | | | | the UE. | | | | | | | | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UPF | | | | | | | _INFO\". | | +-----------+-----------+---+-----------+-----------+-----------+ | pdmf | boolean | O | 0..1 | Packet | Packet | | | | | | delay | DelayFail | | | | | | me | ureReport | | | | | | asurement | | | | | | | failure | | | | | | | i | | | | | | | ndicator. | | | | | | | When set | | | | | | | to true, | | | | | | | it | | | | | | | indicates | | | | | | | that a | | | | | | | packet | | | | | | | delay | | | | | | | failure | | | | | | | has | | | | | | | occurred, | | | | | | | i.e. no | | | | | | | me | | | | | | | asurement | | | | | | | result is | | | | | | | available | | | | | | | during | | | | | | | the | | | | | | | reporting | | | | | | | period. | | | | | | | | | | | | | | Default | | | | | | | value is | | | | | | | false if | | | | | | | omitted. | | | | | | | | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"QO | | | | | | | S_MON\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | If the | | | | | | | DNAI is | | | | | | | not | | | | | | | changed | | | | | | | while the | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | changed, | | | | | | | the | | | | | | | \"sou | | | | | | | rceDnai\" | | | | | | | attribute | | | | | | | and | | | | | | | \"tar | | | | | | | getDnai\" | | | | | | | attribute | | | | | | | shall not | | | | | | | be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | target | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication; | | | | | | | the | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | de-a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | source | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | NOTE 3: | | | | | | | If | | | | | | | provided, | | | | | | | either | | | | | | | ipv | | | | | | | 6Prefixes | | | | | | | or | | | | | | | ipv6Addrs | | | | | | | shall be | | | | | | | present. | | | | | | | | | | | | | | NOTE 4: | | | | | | | Only one | | | | | | | of the | | | | | | | appId, | | | | | | | e | | | | | | | thfDescs, | | | | | | | ethF | | | | | | | lowDescs, | | | | | | | flowDescs | | | | | | | or fDescs | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 5: | | | | | | | In this | | | | | | | release | | | | | | | of the | | | | | | | spec | | | | | | | ification | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | elements | | | | | | | in the | | | | | | | array is | | | | | | | 2. If | | | | | | | more than | | | | | | | one value | | | | | | | is | | | | | | | received | | | | | | | at one | | | | | | | given | | | | | | | point of | | | | | | | time for | | | | | | | UL packet | | | | | | | delay, DL | | | | | | | packet | | | | | | | delay or | | | | | | | round | | | | | | | trip | | | | | | | packet | | | | | | | delay | | | | | | | resp | | | | | | | ectively, | | | | | | | the SMF | | | | | | | reports | | | | | | | the | | | | | | | minimum | | | | | | | and | | | | | | | maximum | | | | | | | packet | | | | | | | delays to | | | | | | | the | | | | | | | NEF/AF. | | | | | | | | | | | | | | NOTE 6: | | | | | | | If | | | | | | | notified | | | | | | | event is | | | | | | | \"WLAN | | | | | | | _INFO\", | | | | | | | then one | | | | | | | of the | | | | | | | \"ssId\" | | | | | | | or | | | | | | | \"bssId\" | | | | | | | attribute | | | | | | | and one | | | | | | | of the | | | | | | | \"st | | | | | | | artWLAN\" | | | | | | | or | | | | | | | \" | | | | | | | endWLAN\" | | | | | | | attribute | | | | | | | shall be | | | | | | | present. | | | | | | | | | | | | | | NOTE 7: | | | | | | | The SNPN | | | | | | | I | | | | | | | dentifier | | | | | | | consists | | | | | | | of the | | | | | | | PLMN | | | | | | | I | | | | | | | dentifier | | | | | | | and the | | | | | | | NID. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.6 void.
#### 5.6.2.7 Type AckOfNotify
Table 5.6.2.7-1: Definition of type AckOfNotify
* * *
Attribute name Data type P Cardinality Description Applicability notifId
string M 1 Notification correlation ID provided by the SMF during UP path
change notification.  
ackResult AfResultInfo M 1 Identifies the result of application layer
handling.  
supi Supi O 0..1 Subscription Permanent Identifier.  
gpsi Gpsi O 0..1 Identifies a GPSI.
* * *
#### 5.6.2.8 Type SmNasFromUe
Table 5.6.2.8-1: Definition of type SmNasFromUe
* * *
Attribute name Data type P Cardinality Description Applicability smNasType
string M 1 The type of SM NAS message transmitted by UE (e.g. PDU Session
Establishment Request, PDU Session Modification Request, etc.).  
timeStamp DateTime M 1 Indicates the time stamp when SMF receives SM NAS
message from UE.
* * *
#### 5.6.2.9 Type SmNasFromSmf
Table 5.6.2.9-1: Definition of type SmNasFromSmf
* * *
Attribute name Data type P Cardinality Description Applicability smNasType
string M 1 The type of SM NAS message with backoff timer provided to UE (e.g.
PDU Session Establishment Reject, PDU Session Modification Reject, PDU Session
Release Command, etc.).  
timeStamp DateTime M 1 Indicates the time stamp when SMF sends SM NAS message
to UE.  
backOffTimer DurationSec M 1 Indicates the value of backoff timer provided to
UE in terms of time units of seconds.  
appliedSmccType AppliedSmccType M 1 The type of applied SM congestion control,
i.e. DNN based congestion control or S-NSSAI based congestion control.
* * *
#### 5.6.2.10 Type TransactionInfo
Table 5.6.2.10-1: Definition of type TransactionInfo
* * *
Attribute name Data type P Cardinality Description Applicability transaction
Uinteger M 1 Number of transactions.  
snssai Snssai C 0..1 Identifier of the network slice.  
appIds array(ApplicationId) O 1..N Application Identifiers.  
transMetrics array(TransactionMetric) O 1..N Indicates Session Management
Transaction metrics.
* * *
#### 5.6.2.11 Type PduSessionInformation
Table 5.6.2.11-1: Definition of type PduSessionInformation
* * *
Attribute name Data type P Cardinality Description Applicability pduSessId
PduSessionId C 0..1 Identification of PDU Session. It shall be provided if
available.  
sessInfo PduSessionInfo C 0..1 Represents session information. It shall be
provided if available.
* * *
#### 5.6.2.12 Type PduSessionInfo
Table 5.6.2.12-1: Definition of type PduSessionInfo
* * *
Attribute name Data type P Cardinality Description Applicability n4SessId
string C 0..1 Identification of N4 Session. It shall be provided if available.  
sessInactiveTimer DurationSec C 0..1 The value of the session inactivity
timer. It shall be provided if available.  
pduSessStatus PduSessionStatus C 0..1 Status of the PDU Session. It shall be
provided if available.
* * *
#### 5.6.2.13 Type UpfInformation
Table 5.6.2.13-1: Definition of type UpfInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | upfId | string | C | 0..1 | I | | | | | | | dentifies | | | | | | | the UPF. | | | | | | | | | | | | | | (NOTE 1) | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | upfAddr | AddrFqdn | C | 0..1 | R | | | | | | | epresents | | | | | | | the IP | | | | | | | add | | | | | | | ress/FQDN | | | | | | | of the | | | | | | | UPF. | | | | | | | | | | | | | | (NOTE 1) | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | At least | | | | | | | one of | | | | | | | the | | | | | | | \"upfId\" | | | | | | | attribute | | | | | | | and | | | | | | | \" | | | | | | | upfAddr\" | | | | | | | attribute | | | | | | | shall be | | | | | | | included. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | \"upfId\" | | | | | | | attribute | | | | | | | and | | | | | | | \" | | | | | | | upfAddr\" | | | | | | | attribute | | | | | | | may | | | | | | | indicate | | | | | | | an anchor | | | | | | | UPF of | | | | | | | the PDU | | | | | | | session | | | | | | | c | | | | | | | ontaining | | | | | | | the QoS | | | | | | | flow. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability SubId string Identifies an
Individual SMF Notification Subscription. To enable that the value is used as
part of a URI, the string shall only contain characters allowed according to
the \"lower-with-hyphen\" naming convention defined in 3GPP TS 29.501 [5]. In
an OpenAPI [10] schema, the format shall be designated as \"SubId\".
* * *
#### 5.6.3.3 Enumeration: SmfEvent
Table 5.6.3.3-1: Enumeration SmfEvent
+-------------------+-----------------------+-----------------------+ | Enumeration value | Description | Applicability | +-------------------+-----------------------+-----------------------+ | AC_TY_CH | Access Type Change | | +-------------------+-----------------------+-----------------------+ | UP_PATH_CH | UP Path Change | | +-------------------+-----------------------+-----------------------+ | PDU_SES_REL | PDU Session Release | | +-------------------+-----------------------+-----------------------+ | PLMN_CH | PLMN Change | | +-------------------+-----------------------+-----------------------+ | UE_IP_CH | UE IP address change | | +-------------------+-----------------------+-----------------------+ | RAT_TY_CH | RAT Type Change | EneNA | +-------------------+-----------------------+-----------------------+ | DDDS | Downlink data | Downl | | | delivery status | inkDataDeliveryStatus | +-------------------+-----------------------+-----------------------+ | COMM_FAIL | Communication failure | CommunicationFailure | +-------------------+-----------------------+-----------------------+ | PDU_SES_EST | PDU Session | PduSessionStatus | | | Establishment | | +-------------------+-----------------------+-----------------------+ | QFI_ALLOC | QFI allocation | QfiAllocation | +-------------------+-----------------------+-----------------------+ | QOS_MON | QoS Monitoring | QoSMonitoring | +-------------------+-----------------------+-----------------------+ | SMCC_EXP | SM congestion control | SMCCE | | | experience for PDU | | | | Session | | +-------------------+-----------------------+-----------------------+ | DISPERSION | Session Management | Dispersion | | | transaction | | | | dispersion | | +-------------------+-----------------------+-----------------------+ | RED_TRANS_EXP | Redundant | Red | | | transmission | undantTransmissionExp | | | experience for PDU | | | | Session | | +-------------------+-----------------------+-----------------------+ | WLAN_INFO | WLAN information on | WlanPerformance | | | PDU session for which | | | | Access Type is | | | | NON_3GPP_ACCESS and | | | | RAT Type is | | | | TRUSTED_WLAN | | +-------------------+-----------------------+-----------------------+ | UPF_INFO | The UPF information, | ServiceExperience | | | including the UPF | | | | ID/address/FQDN | DnPerformance | | | information. | | +-------------------+-----------------------+-----------------------+ | UP_STATUS_INFO | User Plane status | UeCommunication | | | information | | +-------------------+-----------------------+-----------------------+
#### 5.6.3.4 Enumeration: NotificationMethod
The enumeration NotificationMethod represents the notification methods that
can be subscribed. It shall comply with the provisions defined in table
5.6.3.4-1.
Table 5.6.3.4-1: Enumeration NotificationMethod
* * *
Enumeration value Description Applicability PERIODIC The notification is
periodically sent.  
ONE_TIME The notification is only sent one time.  
ON_EVENT_DETECTION The notification is sent each time the event is detected.
* * *
#### 5.6.3.5 void.
#### 5.6.3.6 Enumeration: AppliedSmccType
Table 5.6.3.6-1: Enumeration AppliedSmccType
* * *
Enumeration value Description Applicability DNN_CC Indicates the DNN based
congestion control.  
SNSSAI_CC Indicates the S-NSSAI based congestion control.
* * *
#### 5.6.3.7 Enumeration: TransactionMetric
Table 5.6.3.7-1: Enumeration TransactionMetric
* * *
Enumeration value Description Applicability PDU_SES_EST PDU Session
Establishment  
PDU_SES_AUTH PDU Session Authenication  
PDU_SES_MODIF PDU Session Modification  
PDU_SES_REL PDU Session Release
* * *
#### 5.6.3.8 Enumeration: PduSessionStatus
Table 5.6.3.8-1: Enumeration PduSessionStatus
* * *
Enumeration value Description Applicability ACTIVATED Indicates the pdu
session status is activated.  
DEACTIVATED Indicates the pdu session status is deactivated.
* * *
## 5.7 Error handling
### 5.7.1 General
For the Nsmf_EventExposure API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5].
Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS
29.500 [4] shall be supported for an HTTP method if the corresponding HTTP
status codes are specified as mandatory for that HTTP method in table
5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nsmf_EventExposure API.
### 5.7.2 Protocol Errors
No specific procedures for the Nsmf_EventExposure service are specified.
### 5.7.3 Application Errors
The application errors defined for the Nsmf_EventExposure service are listed
in Table 5.7.3-1.
Table 5.7.3-1: Application errors
* * *
Application Error HTTP status code Description
* * *
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Nsmf_EventExposure
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [4].
Table 5.8-1: Supported Features
* * *
Feature number Feature Name Description 1 DownlinkDataDeliveryStatus This
feature indicates support for the \"Downlink data delivery status\" event. 2
CommunicationFailure This feature indicates support for the \"communication
failure\" event. 3 PduSessionStatus This feature indicates support for the PDU
session establishment event and enhancement (PDU session type, IP address) for
the PDU session release event. 4 QfiAllocation This feature indicates support
for the \"QFI allocation\" event. 5 QosMonitoring This feature indicates
support for the \"QoS Monitoring\" event. 6 ES3XX Extended Support for 3xx
redirections. This feature indicates the support of redirection for any
service operation, according to Stateless NF procedures as specified in
clauses 6.5.3.2 and 6.5.3.3 of 3GPP TS 29.500 [4] and according to HTTP
redirection principles for indirect communication, as specified in clause
6.10.9 of 3GPP TS 29.500 [4]. 7 EneNA This feature indicates support for the
enhancements of network data analytics requirements. 8 ULBuffering This
feature indicates support for Uplink buffering indication. (See NOTE) 9 SMCCE
This feature indicates support for Session Management Congestion Control
Experience for PDU Session. 10 Dispersion This feature indicates support for
Session Management transactions dispersion. 11 ERIR Indicates the support of
immediate report within the subscription response. 12 RedundantTransmissionExp
This feature indicates support for Redundant Transmission Experience. 13
WlanPerformance This feature indicates support for WLAN information on PDU
Session for which Access Type is NON_3GPP_ACCESS and RAT Type is TRUSTED_WLAN,
to support WLAN performance analytics. 14 EASIPreplacement This feature
indicates the support of provisioning of EAS IP replacement info (See NOTE).
15 BIUMR This feature bit indicates whether the NF Service Consumer (e.g. SMF)
and PCF supports Binding Indication Update for multiple resource contexts
specified in clauses 6.12.1 and 5.2.3.2.6 of 3GPP TS 29.500 [4]. 16
UeCommunication This feature indicates the support of UE communication
analytics. 17 ServiceExperience This feature indicates support for service
experience analytics. 18 DnPerformance This feature indicates support for DN
performance analytics. 19 MultipleFlowDescriptions This feature indicates the
support of the report of multiple UL and/or DL flows. 20
PacketDelayFailureReport This feature indicates the support of packet delay
failure report as part of QoS Monitoring procedures. This feature requires
that QosMonitoring feature is supported. NOTE: SMF and NF service consumers
shall determine the support of this feature.
* * *
## 5.9 Security
As indicated in 3GPP TS 33.501 [15] and 3GPP TS 29.500 [4], the access to the
Nsmf_EventExposure API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [16]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [12])
plays the role of the authorization server.
If OAuth2 is used, an NF service consumer, prior to consuming services offered
by the Nsmf_EventExposure API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [12], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF service consumer used for
discovering the Nsmf_EventExposure service.
The Nsmf_EventExposure API defines a single scope \"nsmf-event-exposure\" for
the entire service, and it does not define any additional scopes at resource
or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [10] specification of HTTP messages and
content bodies used by the Nsmf_EventExposure API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[19] and clause 5.3.1 of the 3GPP TS 29.501 [5] for further information).
# A.2 Nsmf_EventExposure API
openapi: 3.0.0
info:
version: 1.2.2
title: Nsmf_EventExposure
description: \|
Session Management Event Exposure Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.508 V17.10.0; 5G System; Session Management Event
Exposure Service.
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.508/
servers:
\- url: \'{apiRoot}/nsmf-event-exposure/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nsmf-event-exposure
paths:
/subscriptions:
post:
operationId: CreateIndividualSubcription
summary: Create an individual subscription for event notifications from the
SMF
tags:
\- Subscriptions (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
responses:
\'201\':
description: Created.
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/nsmf-event-exposure/v1/subscriptions/{subId}
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
myNotification:
\'{\$request.body#/notifUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposureNotification\'
responses:
\'204\':
description: No Content, Notification was successful.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
afAcknowledgement:
\'{request.body#/ackUri}\':
post:
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AckOfNotify\'
responses:
\'204\':
description: No Content (successful acknowledgement)
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/subscriptions/{subId}:
get:
operationId: GetIndividualSubcription
summary: Read an individual subscription for event notifications from the SMF
tags:
\- IndividualSubscription (Document)
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource representation is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
operationId: ReplaceIndividualSubcription
summary: Replace an individual subscription for event notifications from the
SMF
tags:
\- IndividualSubscription (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource was successfully modified and representation is
returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'204\':
description: No Content. Resource was successfully modified
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
operationId: DeleteIndividualSubcription
summary: Delete an individual subscription for event notifications from the
SMF
tags:
\- IndividualSubscription (Document)
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'204\':
description: No Content. Resource was successfully deleted
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nsmf-event-exposure: Access to the Nsmf_EventExposure API
schemas:
NsmfEventExposure:
description: >
Represents an Individual SMF Notification Subscription resource. The
serviveName property
corresponds to the serviceName in the main body of the specification**.**
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
anyUeInd:
type: boolean
description: >
Any UE indication. This IE shall be present if the event subscription is
applicable to
any UE. Default value \"false\" is used, if not present.
groupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
pduSeId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
subId:
\$ref: \'#/components/schemas/SubId\'
notifId:
type: string
description: Notification Correlation ID assigned by the NF service consumer.
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
altNotifIpv4Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
description: Alternate or backup IPv4 address(es) where to send Notifications.
minItems: 1
altNotifIpv6Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
description: Alternate or backup IPv6 address(es) where to send Notifications.
minItems: 1
altNotifFqdns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
minItems: 1
description: Alternate or backup FQDN(s) where to send Notifications.
eventSubs:
type: array
items:
\$ref: \'#/components/schemas/EventSubscription\'
minItems: 1
description: Subscribed events
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/EventNotification\'
minItems: 1
ImmeRep:
type: boolean
notifMethod:
\$ref: \'#/components/schemas/NotificationMethod\'
maxReportNbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
serviveName:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/ServiceName\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
sampRatio:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SamplingRatio\'
partitionCriteria:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartitioningCriteria\'
minItems: 1
description: Criteria for partitioning the UEs before applying the sampling
ratio.
grpRepTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
notifFlag:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NotificationFlag\'
required:
\- notifId
\- notifUri
\- eventSubs
NsmfEventExposureNotification:
description: Represents notifications on events that occurred.
type: object
properties:
notifId:
type: string
description: Notification correlation ID
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/EventNotification\'
minItems: 1
description: Notifications about Individual Events
ackUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
required:
\- notifId
\- eventNotifs
EventSubscription:
description: Represents a subscription to a single event**.**
type: object
properties:
event:
\$ref: \'#/components/schemas/SmfEvent\'
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
dddTraDescriptors:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DddTrafficDescriptor\'
minItems: 1
dddStati:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DlDataDeliveryStatus\'
minItems: 1
appIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
minItems: 1
targetPeriod:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
transacDispInd:
type: boolean
description: >
Indicates the subscription for UE transaction dispersion collectionon, if it
is included
and set to \"true\". Default value is \"false\".
transacMetrics:
type: array
items:
\$ref: \'#/components/schemas/TransactionMetric\'
description: Indicates Session Management Transaction metrics.
minItems: 1
ueIpAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
required:
\- event
EventNotification:
description: Represents a notification related to a single event that
occurred**.**
type: object
properties:
event:
\$ref: \'#/components/schemas/SmfEvent\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
ueIpAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
transacInfos:
type: array
items:
\$ref: \'#/components/schemas/TransactionInfo\'
description: Transaction Information.
minItems: 1
sourceDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
targetDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
sourceUeIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
sourceUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
targetUeIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
targetUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
sourceTraRouting:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
targetTraRouting:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
ueMac:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
adIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
adIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
reIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
reIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
plmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
accType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
pduSeId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
dddStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DlDataDeliveryStatus\'
dddTraDescriptor:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DddTrafficDescriptor\'
maxWaitTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
commFailure:
\$ref:
\'TS29518_Namf_EventExposure.yaml#/components/schemas/CommunicationFailure\'
ipv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ipv6Prefixes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
minItems: 1
ipv6Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
minItems: 1
pduSessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionType\'
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
appId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
ethFlowDescs:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
minItems: 1
description: >
Descriptor(s) for non-IP traffic. It allows the encoding of multiple UL and/or
DL flows.
Each entry of the array describes a single Ethernet flow.
ethfDescs:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
minItems: 1
maxItems: 2
description: >
Contains the UL and/or DL Ethernet flows. Each entry of the array describes a
single
Ethernet flow.
flowDescs:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/FlowDescription\'
minItems: 1
description: >
Descriptor(s) for IP traffic. It allows the encoding of multiple UL and/or DL
flows.
Each entry of the array describes a single IP flow.
fDescs:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/FlowDescription\'
minItems: 1
maxItems: 2
description: >
Contains the UL and/or DL IP flows. Each entry of the array describes a single
IP flow.
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
ulDelays:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
minItems: 1
dlDelays:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
minItems: 1
rtDelays:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
minItems: 1
pdmf:
type: boolean
description: Represents the packet delay measurement failure indicator.
timeWindow:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
smNasFromUe:
\$ref: \'#/components/schemas/SmNasFromUe\'
smNasFromSmf:
\$ref: \'#/components/schemas/SmNasFromSmf\'
upRedTrans:
type: boolean
description: >
Indicates whether the redundant transmission is setup or terminated. Set to
\"true\" if
the redundant transmission is setup, otherwise set to \"false\" if the
redundant
transmission is terminated. Default value is set to \"false\".
ssId:
type: string
bssId:
type: string
startWlan:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
endWlan:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
pduSessInfos:
type: array
items:
\$ref: \'#/components/schemas/PduSessionInformation\'
minItems: 1
upfInfo:
\$ref: \'#/components/schemas/UpfInformation\'
required:
\- event
\- timeStamp
SubId:
type: string
format: SubId
description: >
Identifies an Individual SMF Notification Subscription. To enable that the
value is used as
part of a URI, the string shall only contain characters allowed according to
the
\"lower-with-hyphen\" naming convention defined in 3GPP TS 29.501. In an
OpenAPI schema, the
format shall be designated as \"SubId\".
AckOfNotify:
description: Represents an a**cknowledgement information of an event
notification.**
type: object
properties:
notifId:
type: string
ackResult:
\$ref: \'TS29522_TrafficInfluence.yaml#/components/schemas/AfResultInfo\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
required:
\- notifId
\- ackResult
SmNasFromUe:
description: >
Represents information on the SM NAS messages that SMF receives from UE for
PDU Session**.**
type: object
properties:
smNasType:
type: string
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- smNasType
\- timeStamp
SmNasFromSmf:
description: >
Represents information on the SM congestion control applied SM NAS messages
that SMF sends
to UE for PDU Session**.**
type: object
properties:
smNasType:
type: string
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
backoffTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
appliedSmccType:
\$ref: \'#/components/schemas/AppliedSmccType\'
required:
\- smNasType
\- timeStamp
\- backoffTimer
\- appliedSmccType
TransactionInfo:
description: Represents SMF Transaction Information.
type: object
properties:
transaction:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
appIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
minItems: 1
transacMetrics:
type: array
items:
\$ref: \'#/components/schemas/TransactionMetric\'
minItems: 1
required:
\- transaction
PduSessionInformation:
description: Represents the PDU session related information.
type: object
properties:
pduSessId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
sessInfo:
\$ref: \'#/components/schemas/PduSessionInfo\'
PduSessionInfo:
description: Represents session information.
type: object
properties:
n4SessId:
type: string
description: The identifier of the N4 session for the reported PDU Session.
sessInactiveTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
pduSessStatus:
\$ref: \'#/components/schemas/PduSessionStatus\'
UpfInformation:
description: Represents the ID/address/FQDN of the UPF.
type: object
properties:
upfId:
type: string
upfAddr:
\$ref: \'TS29517_Naf_EventExposure.yaml#/components/schemas/AddrFqdn\'
SmfEvent:
anyOf:
\- type: string
enum:
\- AC_TY_CH
\- UP_PATH_CH
\- PDU_SES_REL
\- PLMN_CH
\- UE_IP_CH
\- RAT_TY_CH
\- DDDS
\- COMM_FAIL
\- PDU_SES_EST
\- QFI_ALLOC
\- QOS_MON
\- SMCC_EXP
\- DISPERSION
\- RED_TRANS_EXP
\- WLAN_INFO
\- UPF_INFO
\- UP_STATUS_INFO
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- AC_TY_CH: Access Type Change
\- UP_PATH_CH: UP Path Change
\- PDU_SES_REL: PDU Session Release
\- PLMN_CH: PLMN Change
\- UE_IP_CH: UE IP address change
\- RAT_TY_CH: RAT Type Change
\- DDDS: Downlink data delivery status
\- COMM_FAIL: Communication Failure
\- PDU_SES_EST: PDU Session Establishment
\- QFI_ALLOC: QFI allocation
\- QOS_MON: QoS Monitoring
\- SMCC_EXP: SM congestion control experience for PDU Session
\- DISPERSION: Session Management transaction dispersion
\- RED_TRANS_EXP: Redundant transmission experience for PDU Session
\- WLAN_INFO: WLAN information on PDU session for which Access Type is
NON_3GPP_ACCESS and
RAT Type is TRUSTED_WLAN
\- UPF_INFO: The UPF information, including the UPF ID/address/FQDN
information.
\- UP_STATUS_INFO: The User Plane status information.
NotificationMethod:
anyOf:
\- type: string
enum:
\- PERIODIC
\- ONE_TIME
\- ON_EVENT_DETECTION
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- PERIODIC
\- ONE_TIME
\- ON_EVENT_DETECTION
AppliedSmccType:
anyOf:
\- type: string
enum:
\- DNN_CC
\- SNSSAI_CC
description: >
This string indicates the type of applied SM congestion control.
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- DNN_CC: Indicates the DNN based congestion control.
\- SNSSAI_CC: Indicates the S-NSSAI based congestion control.
TransactionMetric:
anyOf:
\- type: string
enum:
\- PDU_SES_EST
\- PDU_SES_AUTH
\- PDU_SES_MODIF
\- PDU_SES_REL
\- type: string
description: >
This string Indicates Session Management Transaction metrics.
description: \|
Possible values are:
\- PDU_SES_EST: PDU Session Establishment
\- PDU_SES_AUTH: PDU Session Authentication
\- PDU_SES_MODIF: PDU Session Modification
\- PDU_SES_REL: PDU Session Release
PduSessionStatus:
anyOf:
\- type: string
enum:
\- ACTIVATED
\- DEACTIVATED
\- type: string
description: >
This string Indicates the status of the PDU Session.
description: \|
Possible values are:
\- ACTIVATED: PDU Session status is activated.
\- DEACTIVATED: PDU Session status is deactivated.
#