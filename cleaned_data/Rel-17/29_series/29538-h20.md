# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specified the Application Programming Interface (API) for
enabling the MSGin5G Service over MSGin5G-2/3/4 interfaces. The application
layer architecture, functional requirements, procedures and information flows
necessary for MSGin5G Service are contained in 3GPP TS 23.554 [2]. The
requirements for MSGin5G are specified in 3GPP TS 22.262 [3].
# 2 References {#references-1}
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.554: \"Application architecture for MSGin5G Service\".
[3] 3GPP TS 22.262: \"Message Service within the 5G System\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[7] 3GPP TS 23.222: \"Functional architecture and information flows to support
Common API Framework for 3GPP Northbound APIs; Stage 2\".
[8] 3GPP TS 29.222: \"Common API Framework for 3GPP Northbound APIs; Stage
3\".
[9] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[10] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\".
[11] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[12] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[13] IETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range
Requests\".
[14] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".
[15] IETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1):
Authentication\".
[16] IETF RFC 7240: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[17] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[18] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[19] 3GPP TR 33.862: \"Study on security aspects of the Message Service for
MIoT over the 5G System (MSGin5G)\".
[20] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[21] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[22] 3GPP TS 33.122: \"Security Aspects of Common API Framework for 3GPP
Northbound APIs\".
[23] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[24] 3GPP TS 29.122: \"T8 reference point for northbound APIs\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
For the purposes of the present document, the following terms and its
definitions given in 3GPP TS 23.554 [2] shall apply:
MSGin5G Service
MSGin5G message
MSGin5G UE
MSGin5G Group
MSGin5G Client
MSGin5G Server
Legacy 3GPP Message Gateway
Non-3GPP Message Gateway
Legacy 3GPP UE
Non-3GPP UE
Point-to-Point messaging
Point-to-Application messaging
Application-to-Point messaging
Group messaging
Broadcast messaging
Messaging Topic
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AS Application Server
BC Broadcast
CAPIF Common API Framework
# 4 Overview
The MSGin5G Service is designed and optimized for massive IoT device
communication including thing-to-thing communication and person-to-thing
communication and provides messaging capability in 5GS with messaging
communication models including Point-to-Point, Application-to-Point/Point-to-
Application, Group and Broadcast messaging.
3GPP TS 23.554 [2] has specified the application layer architecture,
architectural requirements, procedures, information flows and some APIs, in
order to support the MSGin5G Service. Various features are defined to ensure
the efficient use and deployment of MSGin5G Service, including configuration,
registration, message delivery, message aggregation, segmentation and
reassembly.
The present document specifies MSGin5G Services offered by MSGin5G Servers and
MSGin5G Gateway, and APIs in detail, needed over MSGin5G-2/3/4 interfaces for
interworking between MSGin5G Server and Legacy 3GPP UE, Non-3GPP UE or
Application Server, with following functionalities need to be supported:
1\. Server-side functionality with the sending and receiving of messages
to/from Application Servers and/or other MSGin5G Service endpoints on other
UEs, provided by MSGin5G Server.
2\. Interconnecting two different messaging delivery mechanisms and assure the
message integrity between different message delivery mechanisms, provided by
Message Gateway.
And the definition of APIs specified in TS 23.554 [2] clause 9 is introduced
in present document.
# 5 Services offered by the MSGin5G Servers
## 5.1 Introduction
The Table 5.1-1 lists the services provided by the MSGin5G Server and
corresponding service operations. A service description clause for each API
gives a general description of the related API.
Table 5.1-1 List of services provided by the MSGin5G Servers
+----------------+----------------+----------------+----------------+ | Service Name | Service | Operation | Example | | | Operations | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | MSGS_ | M | Re | AS | | ASRegistration | SGS_ASRegistr | quest/Response | | | | ation_Request | | | +----------------+----------------+----------------+----------------+ | | MSGS | | | | | _ASRegistrati | | | | | on_Deregister | | | +----------------+----------------+----------------+----------------+ | MSG | MS | Request/ | AS, Legacy | | S_MSGDelivery | GS_MSGDeliver | Response | 3GPP Message | | | y_ASODelivery | | Gateway, | | | | | Non-3GPP | | | | | Message | | | | | Gateway | +----------------+----------------+----------------+----------------+ | | MSGS_MS | | | | | GDelivery_ASO | | | | | DeliveryReport | | | +----------------+----------------+----------------+----------------+ | | MS | | | | | GS_MSGDeliver | | | | | y_UEODelivery | | | +----------------+----------------+----------------+----------------+ | | MSGS_MS | | | | | GDelivery_UEO | | | | | DeliveryReport | | | +----------------+----------------+----------------+----------------+
Table 5.1-2 summarizes the corresponding APIs defined in this specification.
Table 5.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName Annex
* * *
MSGS_ASRegistration 8.1 AS Registration Service
TS29538_MSGS_ASRegistration.yaml msgs_asregistration A.2 MSGS_MSGDelivery 8.2
Message Delivery Service TS29538_MSGS_MSGDelivery.yaml msgs_msgdelivery A.3
## 5.2 MSGS_ASRegistration Service
### 5.2.1 Service Description
The MSGS_ASRegistration API, as defined in 3GPP TS 23.554 [2], allows an AS
via Mm5s interface to register, and deregister at a given MSGin5G Server.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
The service operation defined for MSGS_ASRegistration API is shown in the
Table 5.2.2.1-1.
Table 5.2.2.1-1: Operations of the MSGS_ASRegistration API
Service operation name Description Initiated by
* * *
MSGS_ASRegistration_Request This service operation is used by the AS to
register itself to MSGin5G Server. AS MSGS_ASRegistration_Deregister This
service operation is used by the AS to deregister itself from a MSGin5G
Server. AS
#### 5.2.2.2 MSGS_ASRegistration_Request
##### 5.2.2.2.1 General
This service operation is used by the AS to register itself to MSGin5G Server.
##### 5.2.2.2.2 Application Server registering to MSGin5G Server using
MSGS_ASRegistration_Request operation
To register itself at the MSGin5G Server, the AS shall send an HTTP POST
message to the MSGin5G Server on the \"AS Registrations\" collection resource.
The body of the HTTP POST message shall include the AS profile information,
may include notification target URI for the registration, as specified in
clause 8.1.2.2.3.1.
Upon receiving the HTTP POST message from the AS, the MSGin5G Server shall:
1\. process the AS registration request information;
2\. verify the identity of the AS and check if the AS is authorized to
register itself at MSGin5G Server; and
3\. if the AS is authorized to register to MSGin5G Server, then the MSGin5G
Server shall:
a. store the AS registration information and create a new resource with the AS
registration information as specified in clause 8.1.2.1; and
b. return the AS registration information, the resource URI of the AS
registration information, in the response message.
#### 5.2.2.3 MSGS_ASRegistration_Deregister
##### 5.2.2.3.1 General
This service operation is used by the AS to deregister itself from a MSGin5G
Server.
##### 5.2.2.3.2 Application Server deregistering from MSGin5G Server using
MSGS_ASRegistration_Deregister operation
To deregister itself from the MSGin5G Server, the AS shall send HTTP DELETE
message to the MSGin5G Server on the \"AS DeRegistration\" collection
resource, as specified in clause 8.1.2.3.3.2.
Upon receiving the HTTP DELETE request, the MSGin5G Server shall:
1\. verify the identity of the AS and check if the AS is authorized to
deregister the AS registration information;
2\. if the AS is authorized to deregister the AS registration information,
then the MSGin5G Server shall deregister the AS profile from the MSGin5G
Server and delete the resource representing AS registration information; and
3\. return the \"200 OK\" message to the AS, indicating the successful
deregistration of the AS information.
## 5.3 MSGS_MSGDelivery Service
### 5.3.1 Service Description
The MSGS_MSGDelivery Service corresponding to Mm5s as defined in 3GPP TS
23.554 [2], is provided by the MSGin5G Server.
This service:
\- allows AS invokes services provided by MSGin5G Server to send MSGin5G
Messages to MSGin5G Server; and
\- allows L3G/N3G invokes services provided by MSGin5G Server to send MSGin5G
Messages to MSGin5G Server on behalf of Legacy 3GPP UE or Non-3GPP UE.
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
The service operation defined for MSGS_MSGDelivery Service is shown in the
Table 5.3.2.1-1.
Table 5.3.2.1-1: Operations of the MSGS_MSGDelivery Service
+----------------------+----------------------+----------------------+ | Service operation | Description | Initiated by | | name | | | +======================+======================+======================+ | MSGS_MSGD | This service | AS | | elivery_ASODelivery | operation is used by | | | | AS to deliver | | | | MSGin5G message to | | | | the MSGin5G Server. | | | | This service | | | | operation | | | | corresponds to | | | | clause 9.1.1.1.2 as | | | | defined in | | | | 3 | | | | GPP TS 23.554 [2]. | | +----------------------+----------------------+----------------------+ | MSGS_MSGDeliver | This service | AS | | y_ASODeliveryReport | operation is used by | | | | AS to deliver the | | | | delivery status | | | | report to the | | | | MSGin5G Server. This | | | | service operation | | | | corresponds to | | | | clause 9.1.1.2.2 as | | | | defined in | | | | 3 | | | | GPP TS 23.554 [2]. | | +----------------------+----------------------+----------------------+ | MSGS_MSGD | This service | Legacy 3GPP Message | | elivery_UEODelivery | operation is used by | Gateway | | | Legacy 3GPP Message | | | | Gateway or Non-3GPP | Non-3GPP Message | | | Message Gateway (on | Gateway | | | behalf of Legacy | | | | 3GPP UE or Non-3GPP | | | | UE) to deliver | | | | MSGin5G message to | | | | the MSGin5G Server. | | | | This service | | | | operation | | | | corresponds to | | | | clause 9.1.1.3.2 as | | | | defined in | | | | 3 | | | | GPP TS 23.554 [2]. | | +----------------------+----------------------+----------------------+ | MSGS_MSGDeliver | This service | Legacy 3GPP Message | | y_UEODeliveryReport | operation is used by | Gateway | | | Legacy 3GPP Message | | | | Gateway or Non-3GPP | Non-3GPP Message | | | Message Gateway (on | Gateway | | | behalf Legacy 3GPP | | | | UE or Non-3GPP UE) | | | | to deliver the | | | | delivery status | | | | report to the | | | | MSGin5G Server. This | | | | service operation | | | | corresponds to | | | | clause 9.2.1.4.2 as | | | | defined in | | | | 3 | | | | GPP TS 23.554 [2]. | | +----------------------+----------------------+----------------------+
#### 5.3.2.2 MSGS_MSGDelivery_ASODelivery
##### 5.3.2.2.1 General
This service operation corresponding to clause 9.1.1.1.2 as defined in 3GPP TS
23.554 [2], is used by AS to deliver MSGin5G message to the MSGin5G Server.
##### 5.3.2.2.2 AS Originating MSGin5G Message Delivery
Figure 5.3.2.2.2-1: AS Originating MSGin5G Message Delivery
When the AS needs to send the message to the MSGin5G Server, the AS shall send
the HTTP POST method as step 1 of the Figure 5.3.2.2.2-1.
The AS shall include ASMessageDelivery data structure in the payload body of
the HTTP POST request.
The ASMessageDelivery data structure shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient Address within the \"destAddr\" attribute;
\- the Message ID within the \"msgId\" attribute;
\- the store and forward flag within the \"stoAndFwInd\" attribute; and
may include:
\- the Application ID within the \"appId\" attribute;
\- the security credentials within the \"secCred\" attribute;
\- the indication whether the message delivery status report is required
within the \"delivStReqInd\" attribute;
\- the Payload within the \"payload\" attribute;
\- the priority type within the \"priority\" attribute;
\- the message segment flag within the \"segInd\" attribute;
\- the message segment parameters within the \"segParams\" attribute, this
attribute may include:
\- the segmentation set identifier within the \"segId\" attribute;
\- the total number of message segments within the \"totalSegCount\"
attribute;
\- the message segment number within the \"segNumb\" attribute; and
\- the last segment flag within the \"lastSegFlag\" attribute;
\- the store and forward parameters within the \"stoAndFwParams\" attribute,
this attribute may include:
\- the message expiration time within the \"exprTime\" attribute;
\- The latency within the \"latency\" attribute.
When the MSGin5G Server receives the HTTP POST request from the AS, the
MSGin5G Server shall make an authorization based on the information received
from the AS. If the authorization is successful, the MSGin5G Server shall
respond to the AS with a 200 OK message.
If errors occur when processing the HTTP POST request, the MSGin5G Server
shall apply error handling procedures as specified in clause 8.2.6.
#### 5.3.2.3 MSGS_MSGDelivery_ASODeliveryReport
##### 5.3.2.3.1 General
This service operation corresponds to clause 9.1.1.2.2 as defined in 3GPP TS
23.554 [2], is used by AS to deliver the delivery status report to the MSGin5G
Server.
##### 5.3.2.3.2 AS Originating Message Delivery Status Report
Figure 5.3.2.3.2-1: AS Originating MSGin5G Delivery Report
When the AS needs to send the delivery report to the MSGin5G Server, the AS
shall send the HTTP POST method as step 1 of the Figure 5.3.2.3.2-1.
The AS shall include DeliveryStatusReport data structure in the payload body
of the HTTP POST request.
The DeliveryStatusReport data structure shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID/AS Service ID within the \"destAddr\"
attribute;
\- the Message ID within the \"msgId\" attribute;
\- the delivery status within the \"delivSt\" attribute; and
may include:
\- the security credentials within the \"secCred\" attribute; and
\- the failure cause within the \"failureCause\" attribute;
When the MSGin5G Server receives the HTTP POST request from the AS, the
MSGin5G Server shall make an authorization based on the information received
from the AS. If the authorization is successful, the MSGin5G Server shall
respond to the AS with a 200 OK message.
If errors occur when processing the HTTP POST request, the MSGin5G Server
shall apply error handling procedures as specified in clause 8.2.6.
#### 5.3.2.4 MSGS_MSGDelivery_UEODelivery
##### 5.3.2.4.1 General
This service operation corresponds to clause 9.1.1.3.2 as defined in 3GPP TS
23.554 [2], is used by Legacy 3GPP Message Gateway or Non-3GPP Message Gateway
(on behalf of Legacy 3GPP UE or Non-3GPP UE) to deliver MSGin5G message to the
MSGin5G Server.
##### 5.3.2.4.2 UE Originating Message Delivery
Figure 5.3.2.4.2-1: Legacy 3GPP UE or Non-3GPP UE Originating MSGin5G Message
Delivery
When the Legacy 3GPP Message Gateway or Non-3GPP Message Gateway (on behalf of
Legacy 3GPP UE or Non-3GPP UE) needs to send the message to the MSGin5G
Server, the Legacy 3GPP Message Gateway or Non-3GPP Message Gateway shall send
the HTTP POST method as step 1of the Figure 5.3.2.4.2-1.
The Legacy 3GPP Message Gateway or Non-3GPP Message Gateway shall include
UEMessageDelivery data structure in the payload body of the HTTP POST request.
The UEMessageDelivery data structure shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient Address within the \"destAddr\" attribute;
\- the Message ID within the \"msgId\" attribute; and
\- the store and forward flag within the \"stoAndFwInd\" attribute;
and may include:
\- the Application ID within the \"appId\" attribute;
\- the security credentials within the \"secCred\" attribute;
\- the Payload within the \"payload\" attribute;
\- the indication whether the message delivery status report is required
within the \"delivStReqInd\" attribute; and
\- the message segment flag within the \"segInd\" attribute;
\- the message segment parameters within the \"segParams\" attribute, this
attribute may include:
\- the segmentation set identifier within the \"segId\" attribute;
\- the total number of message segments within the \"totalSegCount\"
attribute;
\- the message segment number within the \"segNumb\" attribute;
\- the last segment flag within the \"lastSegFlag\" attribute;
\- the store and forward parameters within the \"stoAndFwParams\" attribute,
this attribute may include:
\- the message expiration time within the \"exprTime\" attribute;
When the MSGin5G Server receives the HTTP POST request from the Legacy 3GPP
Message Gateway or Non-3GPP Message Gateway, the MSGin5G Server shall make an
authorization based on the information received from the Legacy 3GPP Message
Gateway or Non-3GPP Message Gateway. If the authorization is successful, the
MSGin5G Server shall respond to the Legacy 3GPP Message Gateway or Non-3GPP
Message Gateway with a 200 OK message.
If errors occur when processing the HTTP POST request, the MSGin5G Server
shall apply error handling procedures as specified in clause 8.2.6.
#### 5.3.2.5 MSGS_MSGDelivery_UEODeliveryReport
##### 5.3.2.5.1 General
This service operation corresponds to clause 9.2.1.4.2 as defined in 3GPP TS
23.554 [2], is used by Legacy 3GPP Message Gateway or Non-3GPP Message Gateway
(on behalf Legacy 3GPP UE or Non-3GPP UE) to deliver the delivery status
report to the MSGin5G Server.
##### 5.3.2.5.2 UE Originating Message Delivery Status Report
Figure 5.3.2.5.2-1: Legacy 3GPP UE or Non-3GPP UE Originating MSGin5G Delivery
Report
When the Legacy 3GPP Message Gateway or Non-3GPP Message Gateway (on behalf of
Legacy 3GPP UE or Non-3GPP UE) needs to send the delivery report to the
MSGin5G Server, the Legacy 3GPP Message Gateway or Non-3GPP Message Gateway
shall send the HTTP POST method as step 1 of the Figure 5.3.2.5.2-1.
The Legacy 3GPP Message Gateway or Non-3GPP Message Gateway shall include
DeliveryStatusReport data structure in the payload body of the HTTP POST
request.
The DeliveryStatusReport data structure shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID/AS Service ID within the \"destAddr\"
attribute;
\- the Message ID within the \"msgId\" attribute; and
\- the delivery status within the \"delivSt\" attribute;
and may include:
\- the security credentials within the \"secCred\" attribute;
\- The failure cause within the \"failureCause\" attribute;
When the MSGin5G Server receives the HTTP POST request from the Legacy 3GPP
Message Gateway or Non-3GPP Message Gateway, the MSGin5G Server shall make an
authorization based on the information received from the Legacy 3GPP Message
Gateway or Non-3GPP Message Gateway. If the authorization is successful, the
MSGin5G Server shall respond to the Legacy 3GPP Message Gateway or Non-3GPP
Message Gateway with a 200 OK message.
If errors occur when processing the HTTP POST request, the MSGin5G Server
shall apply error handling procedures as specified in clause 8.2.6.
# 6 Services offered by the Message Gateway
## 6.1 Introduction
The Table 6.1-1 lists the services provided by the MSGin5G Message Gateway and
corresponding service operations. A service description clause for each API
gives a general description of the related API.
Table 6.1-1 List of services provided by the MSGin5G Message Gateway
+----------------+----------------+----------------+----------------+ | Service Name | Service | Operation | Example | | | Operations | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | MSG | M | Re | MSGin5G Server | | G_L3GDelivery | SGG_L3GDelive | quest/Response | | | | ry_GTDelivery | | | +----------------+----------------+----------------+----------------+ | | MSGG_L | | | | | 3GDelivery_GT | | | | | DeliveryReport | | | +----------------+----------------+----------------+----------------+ | MSG | M | Request/ | MSGin5G Server | | G_N3GDelivery | SGG_N3GDelive | Response | | | | ry_GTDelivery | | | +----------------+----------------+----------------+----------------+ | | MSGG_N | | | | | 3GDelivery_GT | | | | | DeliveryReport | | | +----------------+----------------+----------------+----------------+
Table 6.1-2 summarizes the corresponding APIs defined in this specification.
Table 6.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName Annex
* * *
MSGS_L3GDelivery 9.1 L3G Message Delivery Service TS29538_MSGG_
L3GDelivery.yaml msgg-l3gdelivery A.4 MSGS_N3GDelivery 9.2 N3G Message
Delivery Service TS29538_MSGG_ N3GDelivery.yaml msgg-n3gdelivery A.5
## 6.2 MSGG_L3GDelivery Service
### 6.2.1 Service Description
The MSGG_L3GDelivery Service corresponding to Ml3g as defined in 3GPP TS
23.554 [2], is provided by the Legacy 3GPP Message Gateway.
This service:
\- allows MSGin5G Server invokes services provided by Legacy 3GPP Message
Gateway to send MSGin5G Messages to Legacy 3GPP Message Gateway.
### 6.2.2 Service Operations
#### 6.2.2.1 Introduction
The service operation defined for MSGG_L3GDelivery Service is shown in the
table 6.2.2.1-1.
Table 6.2.2.1-1: Operations of the MSGG_L3GDelivery Service
Service operation name Description Initiated by
* * *
MSGG_L3GDelivery_GTDelivery This service operation is used by MSGin5G Server
to deliver MSGin5G message to Legacy 3GPP Message Gateway. This service
operation corresponds to clause 9.2.1.1.2 as defined in 3GPP TS 23.554 [2].
MSGin5G Server MSGG_L3GDelivery_GTDeliveryReport This service operation is
used by MSGin5G Server to deliver the delivery status report to Legacy 3GPP
Message Gateway. This service operation corresponds to clause 9.2.1.3.2 as
defined in 3GPP TS 23.554 [2]. MSGin5G Server
#### 6.2.2.2 MSGG_L3GDelivery_GTDelivery
##### 6.2.2.2.1 General
This service operation corresponds to clause 9.2.1.1.2 as defined in 3GPP TS
23.554 [2], is used by MSGin5G Server to deliver MSGin5G message to the Legacy
3GPP Message Gateway.
##### 6.2.2.2.2 Legacy 3GPP Message Gateway Terminating Message Delivery
Figure 6.2.2.2.2-1: Legacy 3GPP Message Gateway Terminating Message Delivery
When the MSGin5G Server needs to send the message to the Legacy 3GPP Message
Gateway, the MSGin5G Server shall send the HTTP POST request towards the
\"deliver-message\" resource as shown in Figure 6.2.2.2.2-1.
The MSGin5G Server shall send a POST request to the resource with an
L3gMessageDelivery object in the request body.
The L3gMessageDelivery data type shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID/AS Service ID within the \"destAddr\"
attribute;
\- the Message ID within the \"msgId\" attribute; and
may include:
\- the Application ID within the \"appId\" attribute;
\- the indication whether the message delivery status report is required
within the \"delivStReqInd\" attribute;
\- the Payload within the \"payload\" attribute;
\- the Message is segmented within the \"segInd\" attribute; and
\- the message segment parameters within the \"segParams\" attribute, this
attribute may include:
\- the segmentation set identifier within the \"segId\" attribute;
\- the total number of message segments within the \"totalSegCount\"
attribute;
\- the message segment number within the \"segNumb\" attribute; and
\- the last segment flag within the \"lastSegFlag\" attribute.
When the Legacy 3GPP Message Gateway receives the HTTP POST request from the
MSGin5G Server, the Legacy 3GPP Message Gateway shall respond to the MSGin5G
Server with a 204 No Content message.
If errors occur when processing the HTTP POST request, the Legacy 3GPP Message
Gateway shall apply error handling procedures as specified in clause 9.1.6.
#### 6.2.2.3 MSGG_L3GDelivery_GTDeliveryReport
##### 6.2.2.3.1 General
This service operation corresponds to clause 9.2.1.3.2 as defined in 3GPP TS
23.554 [2], is used by MSGin5G Server to deliver the delivery status report to
the Legacy 3GPP Message Gateway.
##### 6.2.2.3.2 Legacy 3GPP Message Gateway Terminating Message Delivery
Status Report
Figure 6.2.2.3.2-1: Legacy 3GPP Message Gateway Terminating Delivery Status
Report
When the MSGin5G Server needs to send the delivery status report to the Legacy
3GPP Message Gateway, the MSGin5G Server shall send the HTTP POST request
towards the \"deliver-report\" resource as shown in Figure 6.2.2.3.2-1.
The MSGin5G Server shall send a POST request to the resource with a
DeliveryStatusReport object in the request body.
The DeliveryStatusReport data type shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID/AS Service ID within the \"destAddr\"
attribute;
\- the Message ID within the \"msgId\" attribute;
\- the delivery status within the \"delivSt\" attribute; and
may include:
\- the failure cause within the \"failureCause\" attribute.
When the Legacy 3GPP Message Gateway receives the HTTP POST request from the
MSGin5G Server, the Legacy 3GPP Message Gateway shall respond to the MSGin5G
Server with a 204 No Content message.
If errors occur when processing the HTTP POST request, the Legacy 3GPP Message
Gateway shall apply error handling procedures as specified in clause 9.1.6.
## 6.3 MSGG_N3GDelivery Service
### 6.3.1 Service Description
The MSGG_N3GDelivery Service corresponding to Mn3g as defined in 3GPP TS
23.554 [2], is provided by the Non-3GPP Message Gateway.
This service:
\- allows MSGin5G Server invokes services provided by Non-3GPP Message Gateway
to send MSGin5G Messages to Non-3GPP Message Gateway.
### 6.3.2 Service Operations
#### 6.3.2.1 Introduction
The service operation defined for MSGG_N3GDelivery Service is shown in the
table 6.3.2.1-1.
Table 6.3.2.1-1: Operations of the MSGG_N3GDelivery Service
Service operation name Description Initiated by
* * *
MSGG_N3GDelivery_GTDelivery This service operation is used by MSGin5G Server
to deliver MSGin5G message to Non-3GPP Message Gateway. This service operation
corresponds to clause 9.2.2.1.2 as defined in 3GPP TS 23.554 [2]. MSGin5G
Server MSGG_N3GDelivery_GTDeliveryReport This service operation is used by
MSGin5G Server to deliver the delivery status report to Non-3GPP Message
Gateway. This service operation corresponds to clause 9.2.2.2.2 as defined in
3GPP TS 23.554 [2]. MSGin5G Server
#### 6.3.2.2 MSGG_N3GDelivery_GTDelivery
##### 6.3.2.2.1 General
This service operation corresponds to clause 9.2.2.1.2 as defined in 3GPP TS
23.554 [2], is used by MSGin5G Server to deliver MSGin5G message to the
Non-3GPP Message Gateway.
##### 6.3.2.2.2 Non-3GPP Message Gateway Terminating Message Delivery
{width="6.441666666666666in" height="1.4805555555555556in"}
Figure 6.3.2.2.2-1: Non-3GPP Message Gateway Terminating Message Delivery
When the MSGin5G Server needs to send the message to the Non-3GPP Message
Gateway, the MSGin5G Server shall send the HTTP POST request towards the
\"deliver-message\" resource as shown in figure 6.3.2.2.2-1.
The MSGin5G Server shall send a POST request to the resource with an
N3gMessageDelivery object in the request body.
The N3gMessageDelivery data type shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID/AS Service ID within the \"destAddr\"
attribute;
\- the Message ID within the \"msgId\" attribute; and
may include:
\- the Application ID within the \"appId\" attribute;
\- the indication whether the message delivery status report is required
within the \"delivStReqInd\" attribute;
\- the Payload within the \"payload\" attribute;
\- the Message is segmented within the \"segInd\" attribute; and
\- the message segment parameters within the \"segParams\" attribute, this
attribute may include:
\- the segmentation set identifier within the \"segId\" attribute;
\- the total number of message segments within the \"totalSegCount\"
attribute;
\- the message segment number within the \"segNumb\" attribute; and
\- the last segment flag within the \"lastSegFlag\" attribute.
When the Non-3GPP Message Gateway receives the HTTP POST request from the
MSGin5G Server, the Non-3GPP Message Gateway shall respond to the MSGin5G
Server with a 204 No Content message.
If errors occur when processing the HTTP POST request, the Non-3GPP Message
Gateway shall apply error handling procedures as specified in clause 9.2.6.
#### 6.3.2.3 MSGG_N3GDelivery_GTDeliveryReport
##### 6.3.2.3.1 General
This service operation corresponds to clause 9.2.2.2.2 as defined in 3GPP TS
23.554 [2], is used by MSGin5G Server to deliver the delivery status report to
the Non-3GPP Message Gateway.
##### 6.3.2.3.2 Non-3GPP Message Gateway Terminating Message Delivery Status
Report
{width="6.441666666666666in" height="1.4805555555555556in"}
Figure 6.3.2.3.2-1: Non-3GPP Message Gateway Terminating Delivery Status
Report
When the MSGin5G Server needs to send the delivery status report to the
Non-3GPP Message Gateway, the MSGin5G Server shall send the HTTP POST request
towards the \"deliver-report\" resource as shown in figure 6.3.2.3.2-1.
The MSGin5G Server shall send a POST request to the resource with a
DeliveryStatusReport object in the request body.
The DeliveryStatusReport data type shall include:
\- the Originating UE Service ID/AS Service ID within the \"oriAddr\"
attribute;
\- the Recipient UE Service ID within the \"destAddr\" attribute;
\- the Message ID within the \"msgId\" attribute;
\- the delivery status within the \"delivSt\" attribute; and
may include:
\- the failure cause within the \"failureCause\" attribute.
When the Non-3GPP Message Gateway receives the HTTP POST request from the
MSGin5G Server, the Non-3GPP Message Gateway shall respond to the MSGin5G
Server with a 204 No Content message.
If errors occur when processing the HTTP POST request, the Non-3GPP Message
Gateway shall apply error handling procedures as specified in clause 9.2.6.
# 7 Common information applicable to several APIs
## 7.1 General
MSGin5G APIs allow secure access to the capabilities provided by the MSGin5G.
This document specifies the procedures triggered at different functional
entities as a result of API invocation requests and event notifications. The
stage-2 level requirements and signalling flows are defined in 3GPP TS 23.554
[2].
Several design aspects, as mentioned in the following clauses, are specified
in 3GPP TS 29.500 [4] and referenced by this specification.
## 7.2 Data Types
### 7.2.1 General
This clause defines structured data types, simple data types and enumerations
that are applicable to several APIs defined in the present specification and
can be referenced from data structures defined in the subsequent clauses.
In addition, data types that are defined in OpenAPI Specification [6] can also
be referenced from data structures defined in the subsequent clauses.
NOTE: As a convention, data types in the present specification are written
with an upper-case letter in the beginning. Parameters are written with a
lower-case letter in the beginning. As an exception, data types that are also
defined in OpenAPI Specification [6] can use a lower-case case letter in the
beginning for consistency.
Table 7.2.1-1 specifies data types re-used by the MSGin5G from other
specifications, including a reference to their respective specifications and
when needed, a short description of their use within the APIs of this
specification.
Table 7.2.1-1: Re-used Data Types
Data type Reference Comments
* * *
### 7.2.2 Referenced structured data types
Table 7.2.2-1 lists structured data types defined in this specification
referenced by multiple services.
Table 7.2.2-1: Referenced Structured Data Types
Data type Reference Description
* * *
MessageSegmentParameters Clause 8.2.5.2.5 Parameters for message segmentation
Address Clause 9.1.5.2.3 Represent an address
### 7.2.3 Referenced Simple data types and enumerations
Following simple data types defined in Table 7.2.3.1-1 are applicable to
several APIs in this document:
Table 7.2.3.1-1: Simple data types applicable to several APIs
Type name Reference Description
* * *
## 7.3 Usage of HTTP
For MSGin5G APIs, support of HTTP/1.1 (IETF RFC 7230 [10], IETF RFC 7231 [11],
IETF RFC 7232 [12], IETF RFC 7233 [13], IETF RFC 7234 [14] and IETF RFC 7235
[15]) over TLS is mandatory and support of HTTP/2 (IETF RFC 7540 [16]) over
TLS is recommended.
A functional entity desiring to use HTTP/2 shall use the HTTP upgrade
mechanism to negotiate applicable HTTP version as described in IETF RFC 7540
[16].
## 7.4 Content type
JSON, IETF RFC 8259 [17], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
## 7.5 URI structure
### 7.5.1 Resource URI structure
The resource URI structure of all the APIs specified in this document shall be
as specified in clause 5.2.4 of 3GPP TS 29.501 [9].
### 7.5.2 Custom operations URI structure
The custom operation definition is in Annex C of 3GPP TS 29.501 [9].
The URI of a custom operation which is associated with a resource shall have
the following structure:
**{apiRoot}/\
/\/\/\**
Custom operations can also be associated with the service instead of a
resource. The URI of a custom operation which is not associated with a
resource shall have the following structure:
**{apiRoot}/\ /\/\**
In the above URI structures, \"apiRoot\", \"apiName\", \"apiVersion\" and
\"apiSpecificResourceUriPart\" are as defined in clause 7.5.1 and
\"custOpName\" represents the name of the custom operation as defined in
clause 5.1.3.2 of 3GPP TS 29.501 [9].
## 7.6 Notifications
None.
## 7.7 Error Handling
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
## 7.8 Feature negotiation
The procedures in clause 6.6.2 of 3GPP TS 29.500 [4] shall be applicable for
the APIs defined in the present specification. For each of the APIs defined,
the applicable list of features is contained in the related API definition.
## 7.9 HTTP headers
The MSGin5G API shall support mandatory HTTP custom header fields specified in
clause 5.2.3.2 of 3GPP TS 29.500 [4] and may support HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4]. No specific custom headers
are defined for the MSGin5G API in the present specification.
## 7.10 Conventions for Open API specification files
The conventions for Open API specification files as specified in clause 5.3 of
3GPP TS 29.501 [9] shall be applicable for all APIs in this document.
# 8 Message Server API definition
## 8.1 MSGS_ASRegistration API
### 8.1.1 API URI
The MSGS_ASRegistration service shall use the MSGS_ASRegistration API.
The request URIs used in HTTP requests from the AS towards the MSGin5G Server
shall have the Resource URI structure as defined in clause 7.5 with the
following clarifications:
\- The \ shall be \"msgs-asregistration\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
8.1.2.
### 8.1.2 Resources
#### 8.1.2.1 Overview
Figure 8.1.2.1-1: Resource URI structure of the MSGS_ASRegistration API
Table 8.1.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.1.2.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
AS Registrations /registrations POST Registers a new AS at the MSGin5G Server.
AS DeRegistration /registrations/{registrationId} DELETE Removes an AS
registration resource.
#### 8.1.2.2 Resource: AS Registrations
##### 8.1.2.2.1 Description
This resource represents all the Application Servers that are registered at a
given MSGin5G Server.
##### 8.1.2.2.2 Resource Definition
Resource URI: **{apiRoot}/msgs-asregistration/\ /registrations**
This resource shall support the resource URI variables defined in the table
8.1.2.2.2-1.
Table 8.1.2.2.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause 7.5 apiVersion string See clause 8.1.1
##### 8.1.2.2.3 Resource Standard Methods
###### 8.1.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.1.2.2.3.1-1.
Table 8.1.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
Name Data type P Cardinality Description
* * *
n/a
This method shall support the request data structures specified in table
8.1.2.2.3.1-2 and the response data structures and response codes specified in
table 8.1.2.2.3.1-3.
Table 8.1.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
ASRegistration M 1 AS registration request information.
Table 8.1.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+=============+===============+ | ASRe | M | 1 | 201 Created | AS | | gistrationAck | | | | information | | | | | | is registered | | | | | | successfully | | | | | | at MSGin5G | | | | | | Server. | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.1.2.2.3.1-4: Headers supported by the POST method on this resource
Name Data type P Cardinality Description
* * *
n/a
Table 8.1.2.2.3.1-5: Headers supported by the 201 response code on this
resource
Name Data type P Cardinality Description
* * *
Location String M 1 Contains the URI of the newly created resource, according
to the structure: {apiRoot}/msgs-
asregistration/\/registrations/{registrationId}
Table 8.1.2.2.3.1-6: Links supported by the 200 Response Code on this endpoint
Name Resource name HTTP method or custom operation Link parameter(s)
Description
* * *
n/a
#### 8.1.2.3 Resource: AS DeRegistration
##### 8.1.2.3.1 Description
This resource represents all the Application Servers that are deregistered at
a given MSGin5G Server.
##### 8.1.2.3.2 Resource Definition
Resource URI: **{apiRoot}/msgs-asregistration/\
/registrations/{registrationId}**
This resource shall support the resource URI variables defined in the table
8.1.2.3.2-1.
Table 8.1.2.3.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause 7.5 apiVersion string See clause 8.1.1
registrationId string The AS registration resource id
##### 8.1.2.3.3 Resource Standard Methods
###### 8.1.2.3.3.1 DELETE
This method deregisters an AS registration from the MSGin5G Server. This
method shall support the URI query parameters specified in the table
8.1.2.3.3.1-1.
Table 8.1.2.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
Name Data type P Cardinality Description
* * *
n/a
This method shall support the request data structures specified in table
8.1.2.3.3.1-2 and the response data structures and response codes specified in
table 8.1.2.3.3.1-3.
Table 8.1.2.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
Data type P Cardinality Description
* * *
n/a
Table 8.1.2.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+-----------------+---+-------------+----------+-----------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +=================+===+=============+==========+=================+ | AS | M | 1 | 200 OK | The AS | | RegistrationAck | | | | DeRegistration | | | | | | information | | | | | | matching the | | | | | | registrationId | | | | | | is deleted. | +-----------------+---+-------------+----------+-----------------+ | NOTE: The | | | | | | mandatory HTTP | | | | | | error status | | | | | | codes for the | | | | | | POST method | | | | | | listed in | | | | | | table 5.2.7.1-1 | | | | | | of | | | | | | 3GPP | | | | | | TS 29.500 [4] | | | | | | shall also | | | | | | apply. | | | | | +-----------------+---+-------------+----------+-----------------+
Table 8.1.2.3.3.1-4: Headers supported by the DELETE method on this resource
Name Data type P Cardinality Description
* * *
n/a
Table 8.1.2.3.3.1-5: Headers supported by the 204 response code on this
resource
Name Data type P Cardinality Description
* * *
n/a
Table 8.1.2.3.3.1-6: Links supported by the 200 Response Code on this endpoint
Name Resource name HTTP method or custom operation Link parameter(s)
Description
* * *
n/a
### 8.1.3 Custom Operations without associated resources
None.
### 8.1.4 Notifications
None.
### 8.1.5 Data Model
#### 8.1.5.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 apply to this API Table 8.1.5.1-1 specifies the
data types defined specifically for the MSGS_ASRegistration API service.
Table 8.1.5.1-1: MSGS_ASRegistration API specific Data Types
Data type Section defined Description Applicability
* * *
ASRegistration 8.1.5.2.2 The AS registration request information.  
ASRegistrationAck 8.1.5.2.3 The AS registration response information.  
ASProfile 8.1.5.2.4 The profile information related to the AS in the
ASRegistration data type.
Table 8.1.5.1-2 specifies data types re-used by the MSGS_ASRegistration API
service.
Table 8.1.5.1-2: Re-used Data Types
Data type Reference Comments Applicability
* * *
ProblemDetails 3GPP TS 29.571 [5]  
Uri 3GPP TS 29.571 [5]
#### 8.1.5.2 Structured data types
##### 8.1.5.2.1 Introduction
##### 8.1.5.2.2 Type: ASRegistration
Table 8.1.5.2.2-1: Definition of type ASRegistration
Attribute name Data type P Cardinality Description Applicability
* * *
asSvcId string M 1 The MSGin5G identifier of the Application Server.  
appId string O 0..1 The identifier of the application specified by the
application provider  
targetUri Uri O 0..1 The URL for receiving message, message delivery status
report, etc. The MSGin5G Server uses this URL to interact to AS.  
asProf ASProfile O 0..1 The profile information of the AS.
##### 8.1.5.2.3 Type: ASRegistrationAck
Table 8.1.5.2.3-1: Definition of type ASRegistrationAck
Attribute name Data type P Cardinality Description Applicability
* * *
asSvcId string M 1 The MSGin5G identifier of the Application Server.  
result ProblemDetails M 1 The result of the registration.
##### 8.1.5.2.4 Type: ASProfile
Table 8.1.5.2.4-1: Definition of type ASProfile
Attribute name Data type P Cardinality Description Applicability
* * *
appName string O 1 The name of the Application Server  
appProviders array(string) O 1..N The provider of the Application Server  
appSenarios array(string) O 1..N The application scenario description.  
appCategory string O 0..1 The category or type of Application Server.  
asStatus string O 0..1 AS status (e.g. Enabled, Disabled etc.)
#### 8.1.5.3 Simple data types and enumerations
None.
### 8.1.6 Error Handling
General error responses will be defined in clause 7.7.
### 8.1.7 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.1.7-1 lists the supported features for AS_Registration API.
Table 8.1.7-1: Supported Features
Feature number Feature Name Description
* * *
## 8.2 MSGS_MSGDelivery API
### 8.2.1 API URI
The MSGS_MSGDelivery service shall use the MSGS_MSGDelivery API, The
MSGS_MSGDelivery API corresponding to Mm5s APIs as defined in in 3GPP TS
23.554 [2].
The request URIs used in HTTP requests from the Message Gateway (on behalf of
Legacy 3GPP UE or Non-3GPP UE) or the Application Server towards the MSGin5G
Server shall have the Resource URI structure as defined in clause 7.5 with the
following clarifications:
\- The \ shall be \"msgs-msgdelivery\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
8.2.2.
### 8.2.2 Resources
None.
### 8.2.3 Custom Operations without associated resources
#### 8.2.3.1 Overview
The structure of the custom operation URIs of the MSGS_MSGDelivery service is
shown in Figure 8.2.3.1-1.
Figure 8.2.3.1-1: Custom operation URI structure of the MSGS_MSGDelivery API
Table 8.2.3.1-1 provides an overview of the custom operations and applicable
HTTP methods.
Table 8.2.3.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/msgs-msgdelivery/\/deliver-as-message POST Request of AS
to deliver message to a given MSGin5G Server. {apiRoot}/msgs-
msgdelivery/\/deliver-ue-message POST Request of Message Gateway
(on behalf of Legacy 3GPP UE or Non-3GPP UE) to deliver message to a given
MSGin5G Server. {apiRoot}/msgs-msgdelivery/\/deliver-report POST
Request of Message Gateway (on behalf of Legacy 3GPP UE or Non-3GPP UE) to
deliver status report to a given MSGin5G Server.
#### 8.2.3.2 Operation: deliver-as-message
##### 8.2.3.2.1 Description
This operation is used by the Application Server to deliver message to a given
MSGin5G Server.
##### 8.2.3.2.2 Operation Definition
This operation shall support the response data structures and response codes
specified in Table 8.2.3.2.2-1 and Table 8.2.3.2.2-2.
Table 8.2.3.2.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
ASMessageDelivery M 1 Represents the data to be used for AS to deliver
message.
Table 8.2.3.2.2-2: Data structures supported by the POST Response Body on this
resource
+-----------------+---+-------------+----------+-----------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +=================+===+=============+==========+=================+ | Mes | M | 1 | 200 OK | AS Message is | | sageDeliveryAck | | | | delivered | | | | | | successfully. | +-----------------+---+-------------+----------+-----------------+ | NOTE: The | | | | | | manadatory HTTP | | | | | | error status | | | | | | code for the | | | | | | POST method | | | | | | listed in | | | | | | Table 5.2.7.1-1 | | | | | | of | | | | | | 3GPP | | | | | | TS 29.500 [4] | | | | | | also apply. | | | | | +-----------------+---+-------------+----------+-----------------+
#### 8.2.3.3 Operation: deliver-ue-message
##### 8.2.3.3.1 Description
This operation is used by the Message Gateway (on behalf of Legacy 3GPP UE or
Non-3GPP UE) to deliver message to a given MSGin5G Server.
##### 8.2.3.3.2 Operation Definition
This operation shall support the response data structures and response codes
specified in Table 8.2.3.3.2-1 and Table 8.2.3.3.2-2.
Table 8.2.3.3.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
UEMessageDelivery M 1 Represents the data to be used for Message Gateway (on
behalf of Legacy 3GPP UE or Non-3GPP UE) to deliver message.
Table 8.2.3.3.2-2: Data structures supported by the POST Response Body on this
resource
+-----------------+---+-------------+----------+-----------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +=================+===+=============+==========+=================+ | Mes | M | 1 | 200 OK | UE Message is | | sageDeliveryAck | | | | delivered | | | | | | successfully. | +-----------------+---+-------------+----------+-----------------+ | NOTE: The | | | | | | manadatory HTTP | | | | | | error status | | | | | | code for the | | | | | | POST method | | | | | | listed in | | | | | | Table 5.2.7.1-1 | | | | | | of | | | | | | 3GPP | | | | | | TS 29.500 [4] | | | | | | also apply. | | | | | +-----------------+---+-------------+----------+-----------------+
#### 8.2.3.4 Operation: deliver-report
##### 8.2.3.4.1 Description
This operation is used by the Message Gateway (on behalf of Legacy 3GPP UE or
Non-3GPP UE) or the Application Server to deliver status report to a given
MSGin5G Server.
##### 8.2.3.4.2 Operation Definition
This operation shall support the response data structures and response codes
specified in Table 8.2.3.4.2-1 and Table 8.2.3.4.2-2.
Table 8.2.3.4.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
DeliveryStatusReport M 1 Represents the data to be used for Message Gateway
(on behalf of Legacy 3GPP UE or Non-3GPP UE) or the Application Server to
deliver status report.
Table 8.2.3.4.2-2: Data structures supported by the POST Response Body on this
resource
+-----------------+---+-------------+----------+-----------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +=================+===+=============+==========+=================+ | Mes | M | 1 | 200 OK | The status | | sageDeliveryAck | | | | report is | | | | | | delivered | | | | | | successfully. | +-----------------+---+-------------+----------+-----------------+ | NOTE: The | | | | | | manadatory HTTP | | | | | | error status | | | | | | code for the | | | | | | POST method | | | | | | listed in | | | | | | Table 5.2.7.1-1 | | | | | | of | | | | | | 3GPP | | | | | | TS 29.500 [4] | | | | | | also apply. | | | | | +-----------------+---+-------------+----------+-----------------+
### 8.2.4 Notifications
None.
### 8.2.5 Data Model
#### 8.2.5.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 apply to this API. Table 8.2.5.1-1 specifies the
data types defined specifically for the MSGS_MSGDelivery API service.
Table 8.2.5.1-1: API specific Data Types
Data type Section defined Description Applicability
* * *
ASMessageDelivery 8.2.5.2.2 The AS message delivery request information.  
DeliveryStatus 8.2.5.3.3 Indicates if delivery is a failure, or if the message
is stored for deferred delivery.  
DeliveryStatusReport 8.2.5.2.7 The message delivery status report request
information.  
MessageDeliveryAck 8.2.5.2.4 The message delivery response information.  
MessageSegmentParameters 8.2.5.2.5 Contains the message segment information of
the message.  
Priority 8.2.5.3.5 Application priority level requested for this message.  
ReportDeliveryStatus 8.2.5.3.4 The delivery status description, including
success or failure in delivery.  
StoreAndForwardParameters 8.2.5.2.6 Contains the store forward information of
the message.  
UEMessageDelivery 8.2.5.2.3 The UE message delivery request information.
Table 8.2.5.1-2 specifies data types re-used by the MSGS_MSGDelivery API
service.
Table 8.2.5.1-2: Re-used Data Types
Data type Reference Comments Applicability
* * *
Address 9.1.5.2.3 The data type of the oriAddr and destAddr.  
DateTime 3GPP TS 29.571 [5] String with format \"date-time\" as defined in
OpenAPI Specification [6].
#### 8.2.5.2 Structured data types
##### 8.2.5.2.1 Introduction
##### 8.2.5.2.2 Type: ASMessageDelivery
Table 8.2.5.2.2-1: Definition of type ASMessageDelivery
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | sending | | | | | | | Ap | | | | | | | plication | | | | | | | Server | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | destAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | receiving | | | | | | | Legacy | | | | | | | 3GPP UE, | | | | | | | Non-3GPP | | | | | | | UE or | | | | | | | MSGin5G | | | | | | | UE. | | | | | | | | | | | | | | The | | | | | | | service | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | target | | | | | | | MSGin5G | | | | | | | Group. | | | | | | | | | | | | | | The | | | | | | | service | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | Broadcast | | | | | | | Service | | | | | | | Area | | | | | | | where the | | | | | | | message | | | | | | | needs to | | | | | | | be | | | | | | | b | | | | | | | roadcast. | | | | | | | | | | | | | | Indicates | | | | | | | which | | | | | | | Messaging | | | | | | | Topic | | | | | | | this | | | | | | | message | | | | | | | is | | | | | | | related | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | appli | | | | | | | cation(s) | | | | | | | for which | | | | | | | the | | | | | | | payload | | | | | | | is | | | | | | | intended. | | | | | | | | | | | | | | This list | | | | | | | of | | | | | | | Ap | | | | | | | plication | | | | | | | IDs IE is | | | | | | | required | | | | | | | when the | | | | | | | message | | | | | | | is sent | | | | | | | to one or | | | | | | | multiple | | | | | | | Ap | | | | | | | plication | | | | | | | Clients | | | | | | | served by | | | | | | | same | | | | | | | MSGin5G | | | | | | | Client. | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | secCred | string | O | 0..1 | Security | | | | | | | in | | | | | | | formation | | | | | | | required | | | | | | | by the | | | | | | | MSGin5G | | | | | | | Server. | | | | | | | | | | | | | | This is a | | | | | | | pl | | | | | | | aceholder | | | | | | | for SA3 | | | | | | | security | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | deli | boolean | O | 0..1 | Indicates | | | vStReqInd | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | payload | string | O | 0..1 | Payload | | | | | | | of the | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | priority | Priority | O | 0..1 | Ap | | | | | | | plication | | | | | | | priority | | | | | | | level | | | | | | | requested | | | | | | | for this | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | segInd | boolean | O | 0..1 | Indicates | | | | | | | this | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | segParams | Messag | O | 0..1 | The | | | | eSegmentP | | | message | | | | arameters | | | segment | | | | | | | pa | | | | | | | rameters. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of the | | | | | | | message | | | | | | | Segment | | | | | | | Flag IE | | | | | | | indicates | | | | | | | that | | | | | | | message | | | | | | | Segment | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | st | boolean | M | 1 | An | | | oAndFwInd | | | | indicator | | | | | | | of | | | | | | | whether | | | | | | | store and | | | | | | | forward | | | | | | | services | | | | | | | are | | | | | | | requested | | | | | | | for this | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if it is | | | | | | | required | | | | | | | to store | | | | | | | and | | | | | | | forward | | | | | | | services | | | | | | | for this | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | stoAn | StoreAn | O | 0..1 | P | | | dFwParams | dForwardP | | | arameters | | | | arameters | | | used by | | | | | | | MSGin5G | | | | | | | Server | | | | | | | for | | | | | | | providing | | | | | | | store and | | | | | | | forward | | | | | | | services, | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of the | | | | | | | Store and | | | | | | | forward | | | | | | | flag IE | | | | | | | indicates | | | | | | | that | | | | | | | store and | | | | | | | forward | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | latency | integer | O | 0..1 | The | | | | | | | latency | | | | | | | re | | | | | | | quirement | | | | | | | for the | | | | | | | message | | | | | | | which | | | | | | | only | | | | | | | applies | | | | | | | to AS | | | | | | | Or | | | | | | | iginating | | | | | | | MSGin5G | | | | | | | Message. | | | | | | | Unit: | | | | | | | mil | | | | | | | lisecond. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Only | | | | | | | \"AS\" is | | | | | | | a | | | | | | | pplicable | | | | | | | to the | | | | | | | addrType | | | | | | | attribute | | | | | | | in the | | | | | | | Address | | | | | | | data type | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | type of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.5.2.3 Type:UEMessageDelivery
Table 8.2.5.2.3-1: Definition of type UEMessageDelivery
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | sending | | | | | | | Legacy | | | | | | | 3GPP UE | | | | | | | or | | | | | | | Non-3GPP | | | | | | | UE | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | destAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | receiving | | | | | | | Ap | | | | | | | plication | | | | | | | Server or | | | | | | | MSGin5G | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | appli | | | | | | | cation(s) | | | | | | | for which | | | | | | | the | | | | | | | payload | | | | | | | is | | | | | | | intended. | | | | | | | | | | | | | | This list | | | | | | | of | | | | | | | Ap | | | | | | | plication | | | | | | | IDs IE is | | | | | | | required | | | | | | | when the | | | | | | | message | | | | | | | is sent | | | | | | | to one or | | | | | | | multiple | | | | | | | Ap | | | | | | | plication | | | | | | | Clients | | | | | | | served by | | | | | | | same | | | | | | | MSGin5G | | | | | | | Client. | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | secCred | string | O | 0..1 | Security | | | | | | | in | | | | | | | formation | | | | | | | required | | | | | | | by the | | | | | | | MSGin5G | | | | | | | Server. | | | | | | | | | | | | | | This is a | | | | | | | pl | | | | | | | aceholder | | | | | | | for SA3 | | | | | | | security | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | deli | boolean | O | 0..1 | Indicates | | | vStReqInd | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | payload | string | O | 0..1 | Payload | | | | | | | of the | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | segInd | boolean | O | 0..1 | Indicates | | | | | | | this | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | segParams | Messag | O | 0..1 | The | | | | eSegmentP | | | message | | | | arameters | | | segment | | | | | | | pa | | | | | | | rameters. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of the | | | | | | | message | | | | | | | Segment | | | | | | | Flag IE | | | | | | | indicates | | | | | | | that | | | | | | | message | | | | | | | Segment | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | st | boolean | M | 1 | An | | | oAndFwInd | | | | indicator | | | | | | | of | | | | | | | whether | | | | | | | store and | | | | | | | forward | | | | | | | services | | | | | | | are | | | | | | | requested | | | | | | | for this | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if it is | | | | | | | required | | | | | | | to store | | | | | | | and | | | | | | | forward | | | | | | | services | | | | | | | for this | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | stoAn | StoreAn | O | 0..1 | P | | | dFwParams | dForwardP | | | arameters | | | | arameters | | | used by | | | | | | | MSGin5G | | | | | | | Server | | | | | | | for | | | | | | | providing | | | | | | | store and | | | | | | | forward | | | | | | | services, | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of the | | | | | | | Store and | | | | | | | forward | | | | | | | flag IE | | | | | | | indicates | | | | | | | that | | | | | | | store and | | | | | | | forward | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Only | | | | | | | \"UE\" is | | | | | | | a | | | | | | | pplicable | | | | | | | to the | | | | | | | addrType | | | | | | | attribute | | | | | | | in the | | | | | | | Address | | | | | | | data type | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | type of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.5.2.4 Type: MessageDeliveryAck
Table 8.2.5.2.4-1: Definition of type MessageDeliveryAck
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | sending | | | | | | | Legacy | | | | | | | 3GPP UE, | | | | | | | Non-3GPP | | | | | | | UE or the | | | | | | | sending | | | | | | | Ap | | | | | | | plication | | | | | | | Server | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | status | Deliv | O | 0..1 | Indicates | | | | eryStatus | | | if | | | | | | | delivery | | | | | | | is a | | | | | | | failure, | | | | | | | or if the | | | | | | | message | | | | | | | is stored | | | | | | | for | | | | | | | deferred | | | | | | | delivery. | | +-----------+-----------+---+-----------+-----------+-----------+ | fai | string | C | 0..1 | The | | | lureCause | | | | reason | | | | | | | for | | | | | | | failure. | | | | | | | | | | | | | | May only | | | | | | | be | | | | | | | present | | | | | | | if the | | | | | | | Deliv | | | | | | | eryStatus | | | | | | | sets to | | | | | | | \"DELY_ | | | | | | | FAILED\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | \"UE\" or | | | | | | | \"AS\" | | | | | | | shall be | | | | | | | included | | | | | | | in the | | | | | | | addrType | | | | | | | attribute | | | | | | | in the | | | | | | | Address | | | | | | | data type | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | type of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.5.2.5 Type:MessageSegmentParameters
Table 8.2.5.2.5-1: Definition of type MessageSegmentParameters
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | segId | string | O | 0..1 | All | | | | | | | segmented | | | | | | | messages | | | | | | | a | | | | | | | ssociated | | | | | | | within | | | | | | | the same | | | | | | | set of | | | | | | | segmented | | | | | | | messages | | | | | | | (i.e. | | | | | | | a | | | | | | | ssociated | | | | | | | with the | | | | | | | same | | | | | | | MSGin5G | | | | | | | message) | | | | | | | are | | | | | | | assigned | | | | | | | the same | | | | | | | unique | | | | | | | id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | tota | integer | O | 0..1 | Indicates | | | lSegCount | | | | the total | | | | | | | number of | | | | | | | segments | | | | | | | for the | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | segNumb | integer | O | 0..1 | Indicates | | | | | | | segmented | | | | | | | message | | | | | | | number of | | | | | | | each | | | | | | | segmented | | | | | | | message | | | | | | | within a | | | | | | | set of | | | | | | | segmented | | | | | | | messages. | | +-----------+-----------+---+-----------+-----------+-----------+ | la | boolean | O | 0..1 | An | | | stSegFlag | | | | indicator | | | | | | | of | | | | | | | whether | | | | | | | this | | | | | | | segmented | | | | | | | message | | | | | | | is the | | | | | | | last | | | | | | | segment | | | | | | | in the | | | | | | | set of | | | | | | | segmented | | | | | | | messages | | | | | | | or not. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | segmented | | | | | | | message | | | | | | | is the | | | | | | | last | | | | | | | segment | | | | | | | in the | | | | | | | set of | | | | | | | segmented | | | | | | | messages. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.5.2.6 Type:StoreAndForwardParameters
Table 8.2.5.2.6-1: Definition of type StoreAndForwardParameters
Attribute name Data type P Cardinality Description Applicability
* * *
exprTime DateTime O 0..1 Indicates message expiration time.
##### 8.2.5.2.7 Type:DeliveryStatusReport
Table 8.2.5.2.5-1: Definition of type DeliveryStatusReport
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | sending | | | | | | | Legacy | | | | | | | 3GPP UE, | | | | | | | Non-3GPP | | | | | | | UE or the | | | | | | | sending | | | | | | | Ap | | | | | | | plication | | | | | | | Server | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | destAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | receiving | | | | | | | Legacy | | | | | | | 3GPP UE, | | | | | | | Non-3GPP | | | | | | | UE or the | | | | | | | receiving | | | | | | | Ap | | | | | | | plication | | | | | | | Server | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | secCred | string | O | 0..1 | Security | | | | | | | in | | | | | | | formation | | | | | | | required | | | | | | | by the | | | | | | | MSGin5G | | | | | | | Server. | | | | | | | | | | | | | | This is a | | | | | | | pl | | | | | | | aceholder | | | | | | | for SA3 | | | | | | | security | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | fai | string | C | 0..1 | The | | | lureCause | | | | Failure | | | | | | | Cause | | | | | | | indicates | | | | | | | the | | | | | | | failure | | | | | | | reason, | | | | | | | if | | | | | | | ap | | | | | | | plicable. | | | | | | | | | | | | | | May only | | | | | | | be | | | | | | | present | | | | | | | if the | | | | | | | Re | | | | | | | portDeliv | | | | | | | eryStatus | | | | | | | sets to | | | | | | | \"REP | | | | | | | T_DELY_ | | | | | | | FAILED\". | | +-----------+-----------+---+-----------+-----------+-----------+ | delivSt | Re | M | 1 | The | | | | portDeliv | | | delivery | | | | eryStatus | | | status | | | | | | | des | | | | | | | cription, | | | | | | | including | | | | | | | success | | | | | | | or | | | | | | | failure | | | | | | | in | | | | | | | delivery. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | \"UE\" or | | | | | | | \"AS\" | | | | | | | shall be | | | | | | | included | | | | | | | in the | | | | | | | addrType | | | | | | | attribute | | | | | | | in | | | | | | | Address | | | | | | | data type | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | type of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 8.2.5.3 Simple data types and enumerations
##### 8.2.5.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 8.2.5.3.2 Simple data types
None.
##### 8.2.5.3.3 Enumeration: DeliveryStatus
Table 8.2.5.3.3-1: Enumeration DeliveryStatus
Enumeration value Description Applicability
* * *
DELY_FAILED Indicates that the message delivery is failed.  
DELY_STORED Indicates that the message is stored for deferred delivery.
##### 8.2.5.3.4 Enumeration: ReportDeliveryStatus
Table 8.2.5.3.4-1: Enumeration ReportDeliveryStatus
Enumeration value Description Applicability
* * *
REPT_DELY_SUCCESS Indicates that the report delivery is successful.  
REPT_DELY_FAILED Indicates that the report delivery is failed.
##### 8.2.5.3.5 Enumeration:Priority
Table 8.2.5.3.5-1: Enumeration Priority
Enumeration value Description Applicability
* * *
HIGH Indicates the messages should be sent in high priority.  
MIDDLE Indicates the messages should be sent in middle priority.  
LOW Indicates the messages should be sent in low priority.
### 8.2.6 Error Handling
General error responses will be defined in clause 7.7.
### 8.2.7 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.2.7-1 lists the supported features for MSGS_MSGDelivery API.
Table 8.2.7-1: Supported Features
**Feature number** **Feature Name** **Description**
* * *
# 9 Message Gateway API definition
## 9.1 MSGG_L3GDelivery API
### 9.1.1 API URI
The MSGG_L3GDelivery service shall use the MSGG_L3GDelivery API, The
MSGG_L3GDelivery API corresponding to Ml3g APIs as defined in in 3GPP TS
23.554 [2].
The request URIs used in HTTP requests from the MSGin5G Server towards the
Legacy 3GPP Message Gateway shall have the Resource URI structure as defined
in clause 7.5 with the following clarifications:
\- The \ shall be \"msgg-l3gdelivery\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
9.1.3.
### 9.1.2 Resources
None.
### 9.1.3 Custom Operations without associated resources
#### 9.1.3.1 Overview
The structure of the custom operation URIs of the MSGG_L3GDelivery service is
shown in Figure 9.1.3.1-1.
Figure 9.1.3.1-1: Custom operation URI structure of the MSGG_L3GDelivery API
Table 9.1.3.1-1 provides an overview of the custom operations and applicable
HTTP methods.
Table 9.1.3.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/msgg-l3gdelivery/\/deliver-message POST Request of
MSGin5G Server to deliver message to a given Legacy 3GPP Message Gateway.
{apiRoot}/msgg-l3gdelivery/\/deliver-report POST Request of
MSGin5G Server to deliver status report to a given Legacy 3GPP Message
Gateway.
#### 9.1.3.2 Operation: deliver-message
##### 9.1.3.2.1 Description
This operation is used by the MSGin5G Server to deliver message to a given
Legacy 3GPP Message Gateway.
##### 9.1.3.2.2 Operation Definition
This operation shall support the response data structures and response codes
specified in table 9.1.3.2.2-1 and table 9.1.3.2.2-2.
Table 9.1.3.2.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
L3gMessageDelivery M 1 Represents the data to be used for MSGin5G Server to
deliver message.
Table 9.1.3.2.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The Message | | | | | Content | is Delivered | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
#### 9.1.3.3 Operation: deliver-report
##### 9.1.3.3.1 Description
This operation is used by the MSGin5G Server to deliver status report to a
given Legacy 3GPP Message Gateway.
##### 9.1.3.3.2 Operation Definition
This operation shall support the response data structures and response codes
specified in Table 9.1.3.3.2-1 and Table 9.1.3.3.2-2.
Table 9.1.3.3.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
DeliveryStatusReport M 1 Represents the data to be used for MSGin5G Server to
deliver status report.
Table 9.1.3.3.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The status | | | | | Content | report is | | | | | | Delivered | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
### 9.1.4 Notifications
None.
### 9.1.5 Data Model
#### 9.1.5.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 apply to this API. Table 9.1.5.1-1 specifies the
data types defined specifically for the MSGG_L3GDelivery API service.
Table 9.1.5.1-1: MSGG_L3GDelivery API specific Data Types
Data type Section defined Description Applicability
* * *
L3gMessageDelivery 9.1.5.2.2 Information within message delivery request.
Table 9.1.5.1-2 specifies data types re-used by the MSGG_L3GDelivery API
service.
Table 9.1.5.1-2: Re-used Data Types
Data type Reference Comments Applicability
* * *
MessageSegmentPapameters 8.2.5.2.5 Contains the message segment information of
the message.
#### 9.1.5.2 Structured data types
##### 9.1.5.2.1 Introduction
##### 9.1.5.2.2 Type: L3gMessageDelivery
Table 9.1.5.2.2-1: Definition of type L3gMessageDelivery
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | or | | | | | | | iginating | | | | | | | MSGin5G | | | | | | | Client or | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | Ap | | | | | | | plication | | | | | | | Server. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | destAddr | Address | M | 1 | The | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | receiving | | | | | | | entity. | | | | | | | The | | | | | | | receiving | | | | | | | entity | | | | | | | can only | | | | | | | be Legacy | | | | | | | 3GPP UE | | | | | | | Service | | | | | | | ID in | | | | | | | MSGG_L3 | | | | | | | GDelivery | | | | | | | API. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | appli | | | | | | | cation(s) | | | | | | | for which | | | | | | | the | | | | | | | payload | | | | | | | is | | | | | | | intended. | | | | | | | | | | | | | | This list | | | | | | | of | | | | | | | Ap | | | | | | | plication | | | | | | | IDs IE is | | | | | | | required | | | | | | | when the | | | | | | | message | | | | | | | is sent | | | | | | | to one or | | | | | | | multiple | | | | | | | Ap | | | | | | | plication | | | | | | | Clients | | | | | | | served by | | | | | | | same | | | | | | | MSGin5G | | | | | | | Client. | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message | | | | | | | request | | +-----------+-----------+---+-----------+-----------+-----------+ | deli | boolean | O | 0..1 | Indicates | | | vStReqInd | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | payload | string | O | 0..1 | Payload | | | | | | | of the | | | | | | | message. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | segInd | boolean | O | 0..1 | Indicates | | | | | | | this | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | segParams | Messag | O | 0..1 | The | | | | eSegmentP | | | message | | | | arameters | | | segment | | | | | | | pa | | | | | | | rameters. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of segInd | | | | | | | is true | | | | | | | to | | | | | | | indicate | | | | | | | that | | | | | | | message | | | | | | | Segment | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | addrType | | | | | | | in | | | | | | | Address | | | | | | | data type | | | | | | | shall | | | | | | | only | | | | | | | include | | | | | | | AS or UE | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 9.1.5.2.3 Type: Address
Table 9.1.5.2.3-1: Definition of type Address
Attribute name Data type P Cardinality Description Applicability
* * *
addrType AddressType M 1 Represent the type of message request.  
addr string M 1 Refer to UE Service ID or AS Service ID or Group Service ID or
Broadcast Area ID or Messaging Topic.
#### 9.1.5.3 Simple data types and enumerations
##### 9.1.5.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 9.1.5.3.2 Enumeration: AddressType
Table 9.1.5.3.2-1: Enumeration AddressType
Enumeration value Description Applicability
* * *
UE The address type is UE.  
AS The address type is AS.  
GROUP The address type is GROUP.  
BC The address type is BC.  
TOPIC The address type is TOPIC.
### 9.1.6 Error Handling
General error responses will be defined in clause 7.7.
### 9.1.7 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
9.1.7-1 lists the supported features for MSGG_L3GDelivery API.
Table 9.1.7-1: Supported Features
Feature number Feature Name Description
* * *
## 9.2 MSGG_N3GDelivery API
### 9.2.1 API URI
The MSGG_N3GDelivery service shall use the MSGG_N3GDelivery API, The
MSGG_N3GDelivery API corresponding to Mn3g APIs as defined in in 3GPP TS
23.554 [2].
The request URIs used in HTTP requests from the MSGin5G Server towards the
Non-3GPP Message Gateway shall have the Resource URI structure as defined in
clause 7.5 with the following clarifications:
\- The \ shall be \"msgg-n3gdelivery\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
9.2.3.
### 9.2.2 Resources
None.
### 9.2.3 Custom Operations without associated resources
#### 9.2.3.1 Overview
The structure of the custom operation URIs of the MSGG_N3GDelivery service is
shown in Figure 9.2.3.1-1.
Figure 9.2.3.1-1: Custom operation URI structure of the MSGG_N3GDelivery API
Table 9.2.3.1-1 provides an overview of the custom operations and applicable
HTTP methods.
Table 9.2.3.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/msgg-n3gdelivery/\/deliver-message POST Request of
MSGin5G Server to deliver message to a given Non-3GPP Message Gateway
{apiRoot}/msgg-n3gdelivery/\/deliver-report POST Request of
MSGin5G Server to deliver status report to a given Non-3GPP Message Gateway
#### 9.2.3.2 Operation: deliver-message
##### 9.2.3.2.1 Description
This operation is used by the MSGin5G Server to deliver message to a given
Non-3GPP Message Gateway.
##### 9.2.3.2.2 Operation Definition
This operation shall support the response data structures and response codes
specified in table 9.2.3.2.2-1 and table 9.2.3.2.2-2.
Table 9.2.3.2.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
N3gMessageDelivery M 1 Represents the data to be used for MSGin5G Server to
deliver message.
Table 9.2.3.2.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The Message | | | | | Content | is Delivered | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
#### 9.2.3.3 Operation: deliver-report
##### 9.2.3.3.1 Description
This operation is used by the MSGin5G Server to deliver status report to a
given Non-3GPP Message Gateway.
##### 9.2.3.3.2 Operation Definition
This operation shall support the response data structures and response codes
specified in table 9.2.3.3.2-1 and table 9.2.3.3.2-2.
Table 9.2.3.3.2-1: Data structures supported by the POST Request Body on this
resource
Data type P Cardinality Description
* * *
DeliveryStatusReport M 1 Represents the data to be used for MSGin5G Server to
deliver status report.
Table 9.2.3.3.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The status | | | | | Content | report is | | | | | | Delivered | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
### 9.2.4 Notifications
None.
### 9.2.5 Data Model
#### 9.2.5.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 apply to this API. Table 9.2.5.1-1 specifies the
data types defined specifically for the MSGG_N3GDelivery API service.
Table 9.2.5.1-1: MSGG_N3GDelivery API specific Data Types
Data type Section defined Description Applicability
* * *
N3gMessageDelivery 9.2.5.2.2 Information within message delivery request.
Table 9.2.5.1-2 specifies data types re-used by the MSGG_N3GDelivery API
service.
Table 9.2.5.1-2: Re-used Data Types
Data type Reference Comments Applicability
* * *
MessageSegmentPapameters 8.2.5.2.5 Contains the message segment information of
the message.  
Address 9.1.5.2.3 The data type of the oriAddr and destAddr.
#### 9.2.5.2 Structured data types
##### 9.2.5.2.1 Introduction
##### 9.2.5.2.2 Type: N3gMessageDelivery
Table 9.2.5.2.2-1: Definition of type N3gMessageDelivery
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | oriAddr | Address | M | 1 | The | | | | | | | oriAddr | | | | | | | is the | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | or | | | | | | | iginating | | | | | | | MSGin5G | | | | | | | Client or | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | Ap | | | | | | | plication | | | | | | | Server. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message | | | | | | | (NOTE). | | +-----------+-----------+---+-----------+-----------+-----------+ | destAddr | Address | M | 1 | The | | | | | | | destAddr | | | | | | | is the | | | | | | | service | | | | | | | identity | | | | | | | of the | | | | | | | receiving | | | | | | | entity. | | | | | | | The | | | | | | | receiving | | | | | | | entity | | | | | | | can only | | | | | | | be | | | | | | | Non-3GPP | | | | | | | UE | | | | | | | Service | | | | | | | ID in | | | | | | | MSGG_N3 | | | | | | | GDelivery | | | | | | | API. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | appli | | | | | | | cation(s) | | | | | | | for which | | | | | | | the | | | | | | | payload | | | | | | | is | | | | | | | intended. | | | | | | | | | | | | | | This list | | | | | | | of | | | | | | | Ap | | | | | | | plication | | | | | | | IDs IE is | | | | | | | required | | | | | | | when the | | | | | | | message | | | | | | | is sent | | | | | | | to one or | | | | | | | multiple | | | | | | | Ap | | | | | | | plication | | | | | | | Clients | | | | | | | served by | | | | | | | same | | | | | | | MSGin5G | | | | | | | Client. | | +-----------+-----------+---+-----------+-----------+-----------+ | msgId | string | M | 1 | Unique | | | | | | | i | | | | | | | dentifier | | | | | | | of this | | | | | | | message. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | deli | boolean | O | 0..1 | Indicates | | | vStReqInd | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if | | | | | | | delivery | | | | | | | acknow | | | | | | | ledgement | | | | | | | from the | | | | | | | recipient | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | payload | string | O | 0..1 | Payload | | | | | | | of the | | | | | | | message. | | | | | | | | | | | | | | This IE | | | | | | | is copied | | | | | | | from the | | | | | | | a | | | | | | | ssociated | | | | | | | inbound | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | segInd | boolean | O | 0..1 | Indicates | | | | | | | this | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if the | | | | | | | message | | | | | | | is part | | | | | | | of a | | | | | | | segmented | | | | | | | message. | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | segParams | Messag | O | 0..1 | The | | | | eSegmentP | | | message | | | | arameters | | | segment | | | | | | | pa | | | | | | | rameters. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | included | | | | | | | only if | | | | | | | the value | | | | | | | of segInd | | | | | | | is true | | | | | | | to | | | | | | | indicate | | | | | | | that | | | | | | | message | | | | | | | Segment | | | | | | | services | | | | | | | are | | | | | | | r | | | | | | | equested. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | addrType | | | | | | | in | | | | | | | Address | | | | | | | data type | | | | | | | shall | | | | | | | only | | | | | | | include | | | | | | | AS or UE | | | | | | | to | | | | | | | represent | | | | | | | the | | | | | | | or | | | | | | | iginating | | | | | | | of | | | | | | | message | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
### 9.2.6 Error Handling
General error responses will be defined in clause 7.7.
### 9.2.7 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
9.2.7-1 lists the supported features for MSGG_N3GDelivery API.
Table 9.2.7-1: Supported Features
Feature number Feature Name Description
* * *
# 10 Security
TLS shall be used to support the security communication between the MSGin5G
Server and the Application Server over MSGin5G-3 interface, and also between
MSGin5G Server and the Message Gateway over MSGin5G-2 or MSGin5G-4 interface
as specified in 3GPP TS 33.862 [19] and 3GPP TS 33.501 [20]. The access to the
MSGin5G Service APIs shall be authorized by means of OAuth2 protocol (see IETF
RFC 6749 [21]), based on local configuration, using the \"Client Credentials\"
authorization grant. If OAuth2 is used, a client, prior to consuming services
offered by the MSGin5G Service APIs, shall obtain a \"token\" from the
authorization server.
# 11 Using Common API Framework
## 11.1 General
When CAPIF is used with a MSGin5G service, the MSGin5G Server shall support
the following as defined in 3GPP TS 29.222 [8]:
\- the API exposing function and related APIs over CAPIF-2/2e and CAPIF-3/3e
reference points;
\- the API publishing function and related APIs over CAPIF-4/4e reference
point;
\- the API management function and related APIs over CAPIF-5/5e reference
point; and
\- at least one of the security methods for authentication and authorization,
and related security mechanisms.
In a centralized deployment as defined in 3GPP TS 23.222 [7], where the CAPIF
core function and API provider domain functions are co-located, the
interactions between the CAPIF core function and API provider domain functions
may be independent of CAPIF-3/3e, CAPIF-4/4e and CAPIF-5/5e reference points.
When CAPIF is used with a MSGin5G service, the MSGin5G Server shall register
all the features for northbound APIs in the CAPIF Core Function.
## 11.2 Security
When CAPIF is used for external exposure, before invoking the API exposed by
the MSGin5G Server, the NF service consumer (e.g. the Application Server) as
API invoker shall negotiate the security method (PKI, TLS-PSK or OAUTH2) with
CAPIF core function and ensure the MSGin5G Server has enough credential to
authenticate the NF service consumer (e.g. the Application Server), see 3GPP
TS 29.222 [8], clause 5.6.2.2 and clause 6.2.2.2.
If PKI or TLS-PSK is used as the selected security method between the NF
service consumer (e.g. the Application Server) and the MSGin5G Server, upon
API invocation, the MSGin5G Server shall retrieve the authorization
information from the CAPIF core function as described in 3GPP TS 29.222 [8],
clause 5.6.2.4.
As indicated in 3GPP TS 33.122 [22], the access to the MSGin5G APIs may be
authorized by means of the OAuth2 protocol (see IETF RFC 6749 [21]), using the
\"Client Credentials\" authorization grant, where the CAPIF core function (see
3GPP TS 29.222 [8]) plays the role of the authorization server.
NOTE 1: In this release, only \"Client Credentials\" authorization grant is
supported.
If OAuth2 is used as the selected security method between the NF service
consumer (e.g. the Application Server) and the MSGin5G Server, the the NF
service consumer (e.g. the Application Server), prior to consuming services
offered by the MSGin5G APIs, shall obtain a \"token\" from the authorization
server, by invoking the Obtain_Authorization service, as described in 3GPP TS
29.222 [8], clause 5.6.2.3.2.
The MSGin5G APIs do not define any scopes for OAuth2 authorization. It is the
MSGin5G Server responsibility to check whether the NF service consumer (e.g.
the Application Server) is authorized to use an API based on the \"token\".
Once the MSGin5G Server verifies the \"token\", it shall check whether the
MSGin5G Server identifier in the \"token\" matches its own published
identifier, and whether the API name in the \"token\" matches its own
published API name. If those checks are passed, the NF service consumer (e.g.
the Application Server) has full authority to access any resource or operation
for the invoked API.
NOTE 2: For aforementioned security methods, the MSGin5G Server needs to apply
admission control according to access control policies after performing the
authorization checks.
# 12 Usage of Network Capabilities
As specified in 3GPP TS 23.554 [2], MSGin5G Server may perform procedures of
UE reachability monitoring and device triggering by consuming the 3GPP core
network capabilities from SCEF/NEF as specified in 3GPP TS 29.522 [23], with
description of the AF applies to the MSGin5G Server. With usage of network
capabilities, the following procedure for UE reachability monitoring and
device triggering procedure could be supported. Upon the MSGin5G Server
receiving a request to send MSGin5G message to a MSGin5G UE, the MSGin5G
Server may determine whether the recipient MSGin5G Client is not reachable:
\- by using the recipient\'s information received when performing the
procedures specified in clause 8.9.2.2 of 3GPP TS 23.554 [2]; or
\- by using the recipient\'s availability information provided by MSGin5G
Client at registration as specified in clause 8.2.1 of 3GPP TS 23.554 [2].
If the recipient MSGin5G Client is not reachable, the MSGin5G Server may send
a request for device triggering to SCEF/NEF as specified in clause 4.4.3 of
3GPP TS 29.522 [23]. The request uses the information provided by the MSGin5G
Client at registration in the MSGin5G Client Triggering Information IE. And
the MSGin5G Server may use the MSGin5G Client communication availability
and/or pre-configured information to determine the timing of the device
triggering request, e.g. the trigger request may be sent to ensure that the
target UE is reachable prior to resuming MSGin5G communications.
As specified in clause 4.4.6 of 3GPP TS 29.122 [24], upon the MSGin5G Server
receiving an HTTP POST request from SCEF/NEF indicating the result of the
triggering delivery, the MSGin5G Server shall respond with an HTTP 200 OK or
204 No Content response.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex is based on the OpenAPI Specification [6] and provides
corresponding representations of all APIs defined in the present
specification.
NOTE 1: An OpenAPIs representation embeds JSON Schema representations of HTTP
message bodies.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 2: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository, that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[18] and clause 5.3.1 of the 3GPP TS 29.501 [9] for further information).
# A.2 MSGS_ASRegistration API
openapi: 3.0.0
info:
title: MSGS_ASRegistration
version: 1.0.0
description: \|
API for MSGS AS Registration Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.538 V17.1.0; Enabling MSGin5G Service; Application Programming
Interfaces (API)
specification; Stage 3
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.538/
servers:
\- url: \'{apiRoot}/msgs-asregistration/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- msgs-asregistration
paths:
/registrations:
post:
summary: Registers a new AS at a MSGin5G Server
tags:
\- AS registration
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ASRegistration\'
responses:
\'201\':
description: AS information is registered successfully at MSGin5G Server
content:
application/json:
schema:
\$ref: \'#/components/schemas/ASRegistrationAck\'
headers:
Location:
description: \'Contains the URI of the newly created resource\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/registrations/{registrationId}:
delete:
summary: Delete an existing AS registration at MSGin5G Server
tags:
\- AS DeRegistration
parameters:
\- name: registrationId
in: path
description: AS registration Id
required: true
schema:
type: string
responses:
\'200\':
description: The individual AS registration is deleted successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ASRegistrationAck\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
msgs-asregistration: Access to the as registration API
schemas:
#
# STRUCTURED DATA TYPES
#
ASRegistration:
description: AS registration data
type: object
required:
\- asSvcId
properties:
asSvcId:
type: string
appId:
type: string
targetUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
asProf:
\$ref: \'#/components/schemas/ASProfile\'
ASRegistrationAck:
description: AS registration response data
type: object
required:
\- asSvcId
\- result
properties:
asSvcId:
type: string
result:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
ASProfile:
description: AS profile information
type: object
properties:
appName:
type: string
appProviders:
type: array
items:
type: string
minItems: 1
description: The provider of the AS.
appSenarios:
type: array
items:
type: string
minItems: 1
description: The application scenario.
appCategory:
type: string
asStatus:
type: string
# A.3 MSGS_MSGDelivery API
openapi: 3.0.0
info:
title: MSGS_MSGDelivery
version: 1.0.0
description: \|
API for MSGG MSGin5G Server Message Delivery Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.538 V17.1.0; Enabling MSGin5G Service; Application Programming
Interfaces (API)
specification; Stage 3
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.538/
servers:
\- url: \'{apiRoot}/msgs-msgdelivery/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- msgs-msgdelivery
paths:
/deliver-as-message:
post:
summary: AS deliver message to MSGin5G Server
tags:
\- AS Message delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ASMessageDelivery\'
responses:
\'200\':
description: OK, AS Message delivery successful
content:
application/json:
schema:
\$ref: \'#/components/schemas/MessageDeliveryAck\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/deliver-ue-message:
post:
summary: UE deliver message to MSGin5G Server
tags:
\- UE Message delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/UEMessageDelivery\'
responses:
\'200\':
description: OK, UE Message delivery successful
content:
application/json:
schema:
\$ref: \'#/components/schemas/MessageDeliveryAck\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/deliver-report:
post:
summary: AS or UE deliver status report to MSGin5G Server
tags:
\- AS/UE status report delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/DeliveryStatusReport\'
responses:
\'200\':
description: OK, status report delivery successfully
content:
application/json:
schema:
\$ref: \'#/components/schemas/MessageDeliveryAck\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
msgs-msgdelivery: Access to the MSGS_MSGDelivery API
schemas:
#
# STRUCTURED DATA TYPES
#
ASMessageDelivery:
description: Contains the AS message delivery data
type: object
required:
\- oriAddr
\- destAddr
\- msgId
\- stoAndFwInd
properties:
oriAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
destAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
appId:
type: string
msgId:
type: string
secCred:
type: string
delivStReqInd:
type: boolean
payload:
type: string
priority:
\$ref: \'#/components/schemas/Priority\'
segInd:
type: boolean
segParams:
\$ref: \'#/components/schemas/MessageSegmentParameters\'
stoAndFwInd:
type: boolean
stoAndFwParams:
\$ref: \'#/components/schemas/StoreAndForwardParameters\'
latency:
type: integer
UEMessageDelivery:
description: Contains the UE message delivery data
type: object
required:
\- oriAddr
\- destAddr
\- msgId
\- stoAndFwInd
properties:
oriAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
destAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
appId:
type: string
msgId:
type: string
secCred:
type: string
delivStReqInd:
type: boolean
payload:
type: string
segInd:
type: boolean
segParams:
\$ref: \'#/components/schemas/MessageSegmentParameters\'
stoAndFwInd:
type: boolean
stoAndFwParams:
\$ref: \'#/components/schemas/StoreAndForwardParameters\'
MessageDeliveryAck:
description: Contains the message delivery ack data
type: object
required:
\- oriAddr
\- msgId
properties:
oriAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
msgId:
type: string
status:
\$ref: \'#/components/schemas/DeliveryStatus\'
failureCause:
type: string
MessageSegmentParameters:
description: Contains the message segment parameters data
type: object
properties:
segId:
type: string
totalSegCount:
type: integer
segNumb:
type: integer
lastSegFlag:
type: boolean
StoreAndForwardParameters:
description: Contains the store and forward parameters data
type: object
properties:
exprTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
DeliveryStatusReport:
description: Contains the delivery status report data
type: object
required:
\- oriAddr
\- destAddr
\- msgId
\- delivSt
properties:
oriAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
destAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
msgId:
type: string
secCred:
type: string
failureCause:
type: string
delivSt:
\$ref: \'#/components/schemas/ReportDeliveryStatus\'
#
# SIMPLE DATA TYPES
#
#
# ENUMERATIONS
#
DeliveryStatus:
anyOf:
\- type: string
enum:
\- DELY_FAILED
\- DELY_STORED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- DELY_FAILED: Indicates that the message delivery is failed.
\- DELY_STORED: Indicates that the message is stored for deferred delivery.
ReportDeliveryStatus:
anyOf:
\- type: string
enum:
\- REPT_DELY_SUCCESS
\- REPT_DELY_FAILED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- REPT_DELY_SUCCESS: Indicates that the report delivery is successful.
\- REPT_DELY_FAILED: Indicates that the report delivery is failed.
Priority:
anyOf:
\- type: string
enum:
\- HIGH
\- MIDDLE
\- LOW
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- HIGH: Indicates the messages should be sent in high priority.
\- MIDDLE: Indicates the messages should be sent in middle priority.
\- LOW: Indicates the messages should be sent in low priority.
# A.4 MSGG_L3GDelivery API
openapi: 3.0.0
info:
title: MSGG_L3GDelivery
version: 1.0.0
description: \|
API for MSGG L3G Message Delivery Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.538 V17.1.0; Enabling MSGin5G Service; Application Programming
Interfaces (API)
specification; Stage 3
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.538/
servers:
\- url: \'{apiRoot}/msgg-l3gdelivery/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- msgg-l3gdelivery
paths:
/deliver-message:
post:
summary: deliver message to Legacy 3GPP Message Gateway
tags:
\- L3G Message delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/L3gMessageDelivery\'
responses:
\'204\':
description: No Content, Message delivery successful
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/deliver-report:
post:
summary: deliver status report to Legacy 3GPP Message Gateway
tags:
\- L3G status report delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref:
\'TS29538_MSGS_MSGDelivery.yaml#/components/schemas/DeliveryStatusReport\'
responses:
\'204\':
description: No Content, status report delivery successfully
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
msgg-l3gdelivery: Access to the MSGG_L3GDelivery API
schemas:
#
# STRUCTURED DATA TYPES
#
L3gMessageDelivery:
description: Contains the L3G message delivery data
type: object
required:
\- oriAddr
\- destAddr
\- msgId
properties:
oriAddr:
\$ref: \'#/components/schemas/Address\'
destAddr:
\$ref: \'#/components/schemas/Address\'
appId:
type: string
msgId:
type: string
delivStReqInd:
type: boolean
payload:
type: string
segInd:
type: boolean
segParams:
\$ref:
\'TS29538_MSGS_MSGDelivery.yaml#/components/schemas/MessageSegmentParameters\'
Address:
description: Contains the Message type data
type: object
required:
\- addrType
\- addr
properties:
addrType:
\$ref: \'#/components/schemas/AddressType\'
addr:
type: string
#
# SIMPLE DATA TYPES
#
#
# ENUMERATIONS
#
AddressType:
anyOf:
\- type: string
enum:
\- UE
\- AS
\- GROUP
\- BC
\- TOPIC
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- UE: The address type is UE.
\- AS: The address type is AS.
\- GROUP: The address type is GROUP.
\- BC: The address type is BC.
\- TOPIC: The address type is TOPIC.
# A.5 MSGG_N3GDelivery API
openapi: 3.0.0
info:
title: MSGG_N3GDelivery
version: 1.0.0
description: \|
API for MSGG N3G Message Delivery Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.538 V17.1.0; Enabling MSGin5G Service; Application Programming
Interfaces (API)
specification; Stage 3
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.538/
servers:
\- url: \'{apiRoot}/msgg-n3gdelivery/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- msgg-n3gdelivery
paths:
/deliver-message:
post:
summary: deliver message to NON-3GPP Message Gateway
tags:
\- N3G Message delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/N3gMessageDelivery\'
responses:
\'204\':
description: No Content,Message delivery successful
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/deliver-report:
post:
summary: deliver status report to NON-3GPP Message Gateway
tags:
\- N3G status report delivery
requestBody:
required: true
content:
application/json:
schema:
\$ref:
\'TS29538_MSGS_MSGDelivery.yaml#/components/schemas/DeliveryStatusReport\'
responses:
\'204\':
description: No Content, status report delivery successfully
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
msgg-n3gdelivery: Access to the MSGG_N3GDelivery API
schemas:
#
# STRUCTURED DATA TYPES
#
N3gMessageDelivery:
description: N3G message delivery data
type: object
required:
\- oriAddr
\- destAddr
\- msgId
properties:
oriAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
destAddr:
\$ref: \'TS29538_MSGG_L3GDelivery.yaml#/components/schemas/Address\'
appId:
type: string
msgId:
type: string
delivStReqInd:
type: boolean
payload:
type: string
segInd:
type: boolean
segParams:
\$ref:
\'TS29538_MSGS_MSGDelivery.yaml#/components/schemas/MessageSegmentParameters\'
#