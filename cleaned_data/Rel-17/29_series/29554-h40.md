# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification provides the stage 3 definition of the Background
Data Transfer (BDT) Policy Control Service (Npcf_BDTPolicyControl) of the 5G
System.
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The stage 2
definition and related procedures for BDT Policy Control Service are specified
in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
The 5G System stage 3 call flows are provided in 3GPP TS 29.513 [5].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [6] and
3GPP TS 29.501 [7].
The Policy Control Function (PCF) provides the BDT Policy Control Service.
This service provides background data transfer policy negotiation function.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[5] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[6] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[7] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[8] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[11] 3GPP TS 29.504: \"5G System; Unified Data Repository Services; Stage 3\".
[12] 3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository service
for Policy Data, Application Data and Structured Data for exposure; Stage 3\".
[13] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[14] 3GPP TS 29.122: \"**T8 reference point for Northbound APIs** \".
[15] IETF RFC 7396: \"JSON Merge Patch\".
[16] IETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".
[17] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[18] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[19] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[20] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[21] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[22] 3GPP TS 29.520: \"5G System; Network Data Analytics Services; Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Background data transfer:** feature that enables a 3rd party service
provider to keep their costs lower by favouring time windows for data transfer
to specific UEs in a geographical area during non-busy hours that are less
costly and able to handle larger bitrates.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.501 [2], clause 3.1 apply:
**5G System**
**Network Function**
**NF service**
**NF service operation**
**Service based interface**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
ASP Application Service Provider
BDT Background Data Transfer
DNN Data Network Name
JSON JavaScript Object Notation
NEF Network Exposure Function
NG-RAN Next Generation - Radio Access Network
NRF Network Repository Function
NWDAF Network Data Analytics Function
PCF Policy Control Function
SBI Service Based Interface
S-NSSAI Single Network Slice Selection Assistance Information
TAI Tracking Area Identity
UDR Unified Data Repository
# 4 Background Data Transfer Policy Control Service
## 4.1 Service Description
### 4.1.1 Overview
The BDT Policy Control Service, as defined in 3GPP TS 23.502 [3] and 3GPP TS
23.503 [4], is provided by the Policy Control Function (PCF).
This service enables the NF service consumer to negotiate policy for a future
background data transfer and offers the following functionalities:
\- get background data transfer policies based on the request from the NF
service consumer;
\- update background data transfer policies based on the selection provided by
the NF service consumer; and
\- provide background data transfer warning notification to trigger
renegotiation of background data transfer policy.
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging related 5G architecture is also described in 3GPP TS 29.513 [5].
The BDT Policy Control Service (Npcf_BDTPolicyControl) is part of the Npcf
service-based interface exhibited by the Policy Control Function (PCF).
The only known NF service consumer of the Npcf_BDTPolicyControl service is the
Network Exposure Function (NEF).
The NEF accesses the BDT Policy Control Service at the PCF via the N30
Reference point. In the roaming scenario, the N30 reference point is located
between the PCF and the NEF in the home network only.
Figure 4.1.2-1: Reference Architecture for the Npcf_BDTPolicyControl Service;
SBI representation
Figure 4.1.2-2: Reference Architecture for the Npcf_BDTPolicyControl Service;
reference point representation
### 4.1.3 Network Functions
#### 4.1.3.1 Policy Control Function (PCF)
The Policy Control Function (PCF):
\- Provides background data transfer policies based on the request from the NF
service consumer. The PCF determines, based on information provided by the NF
service consumer and other available information (e.g. network policy, load
status estimation for the requested time window, network area, etc.) one or
more transfer policies.
\- Updates background data transfer policy based on the selection provided by
the NF service consumer.
\- Sends the background data transfer warning notification to the NF service
consumer.
#### 4.1.3.2 NF Service Consumers
The Network Exposure Function (NEF):
\- requests the PCF to provide background data transfer policies;
\- provides the selected background data transfer policy to the PCF; and
\- indicates to the PCF whether to provide a BDT warning notification.
## 4.2 Service Operations
### 4.2.1 Introduction
Table 4.2.1-1: Operations of the Npcf_BDTPolicyControl Service
* * *
Service operation name Description Initiated by Npcf_BDTPolicyControl_Create
Provides the requested background data transfer policies to the NF service
consumer. NF service consumer (e.g. NEF) Npcf_BDTPolicyControl_Update Updates
the PCF with the background data transfer policy selected by the NF service
consumer. NF service consumer (e.g. NEF) Npcf_BDTPolicyControl_Notify Sends
the BDT notification to the NF service consumer. PCF
* * *
### 4.2.2 Npcf_BDTPolicyControl_Create service operation
#### 4.2.2.1 General
The Npcf_BDTPolicyControl_Create service operation is used by an NF service
consumer to retrieve BDT policies from the PCF.
The following procedure using the Npcf_BDTPolicyControl_Create service
operation is supported:
\- retrieval of BDT policies.
#### 4.2.2.2 Retrieval of BDT policies
This procedure is used by the NF service consumer to request BDT policies from
the PCF, as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS
23.503 [4].
Figure 4.2.2.2-1 illustrates a retrieval of BDT policies.
Figure 4.2.2.2-1: Retrieval of BDT policies
Upon reception of a Background Data Transfer request from the AF indicating a
transfer policy request, the NF service consumer shall invoke the
Npcf_BDTPolicyControl_Create service operation by sending an HTTP POST request
to the URI representing a \"BDT policies\" collection resource of the PCF (as
shown in figure 4.2.2.2-1, step 1). The NF service consumer shall include a
\"BdtReqData\" data type in a payload body of the HTTP POST request. The
\"BdtReqData\" data type shall contain:
\- an ASP identifier in the \"aspId\" attribute;
\- a volume of data per UE in the \"volPerUe\" attribute;
\- an expected number of UEs in the \"numOfUes\" attribute;
\- a desired time window in the \"desTimeInt\" attribute; and
\- if \"BdtNotification_5G\" feature is supported a notification URI in the
\"notifUri\" attribute,
and may include:
\- a network area information (e.g. list of TAIs and/or NG-RAN nodes and/or
cells identifiers) in the \"nwAreaInfo\" attribute;
\- an identification of a group of UE(s) via an \"interGroupId\" attribute;
\- a traffic descriptor of background data within the \"trafficDes\"
attribute;
\- if \"BdtNotification_5G\" feature is supported an indication that BDT
warning notification is requested in the \"warnNotifReq\" attribute; and
\- a DNN and an S-NSSAI, corresponding to the ASP identifier, in the \"dnn\"
attribute and the \"snssai\" attribute respectively.
If the PCF cannot successfully fulfil the received HTTP POST request due to
the internal PCF error or due to the error in the HTTP POST request, the PCF
shall send the HTTP error response as specified in clause 5.7.
Otherwise, upon the reception of the HTTP POST request from the NF service
consumer indicating a BDT policies request, the PCF:
\- may invoke the Nudr_DataRepository_Query service operation, as described in
3GPP TS 29.504 [11] and 3GPP TS 29.519 [12], to request from the UDR all
stored transfer policies;
NOTE 1: In case only one PCF is deployed in the network, transfer policies can
be locally stored in the PCF and the interaction with the UDR is not required.
\- shall determine one or more acceptable transfer policies based on:
a) information provided by the NF service consumer; and
b) other available information (e.g. the existing transfer policies, network
policy, load status estimation for the desired time window); and
\- shall create a BDT Reference ID.
The PCF shall send to the NF service consumer a \"201 Created\" response to
the HTTP POST request, as shown in figure 4.2.2.2-1, step 2. The PCF shall
include in the \"201 Created\" response:
\- a Location header field; and
\- a \"BdtPolicy\" data type in the payload body containing the BDT Reference
ID in the \"bdtRefId\" attribute and acceptable transfer policy/ies in the
\"transfPolicies\" attribute.
The Location header field shall contain the URI of the created individual BDT
policy resource i.e. \"{apiRoot}/npcf-
bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\".
For each included transfer policy, the PCF shall provide:
\- a transfer policy ID in the \"transPolicyId\" attribute;
\- a recommended time window in the \"recTimeInt\" attribute; and
\- a reference to charging rate for the recommended time window in the
\"ratingGroup\" attribute,
and may provide a maximum aggregated bitrate for the uplink direction in the
\"maxBitRateUl\" attribute and/or a maximum aggregated bitrate for the
downlink direction in the \"maxBitRateDl\" attribute.
If the BdtNotification_5G feature is supported the PCF shall not assign value
\"0\" for any transfer policy ID.
NOTE 2: As specified in clause 4.2.3.2, value \"0\" of transfer policy ID is
reserved and indicates that no transfer policy is selected.
The PCF may map the ASP identifier into a target DNN and S-NSSAI based on
local configuration if the NF service consumer did not provide the DNN and
S-NSAAI to the PCF.
If the PCF included in the \"BdtPolicy\" data type:
\- more than one transfer policy, the PCF shall wait for the transfer policy
selected by the NF service consumer as described in clause 4.2.3; or
\- only one transfer policy, the PCF may invoke the Nudr_DataRepository_Update
service operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12]
clause 5.2.9.3.2, to update the UDR with the selected transfer policy, the
corresponding BDT Reference ID, the volume of data per UE, the expected number
of UEs and, if available, a network area information, the associated DNN and
S-NSSAI for the provided ASP identifier.
NOTE 3: In case only one PCF is deployed in the network, transfer policies can
be locally stored in the PCF and the interaction with the UDR is not required.
### 4.2.3 Npcf_BDTPolicyControl_Update service operation
#### 4.2.3.1 General
The Npcf_BDTPolicyControl_Update service operation is used by an NF service
consumer to update a BDT policy to the PCF.
The following procedure using the Npcf_BDTPolicyControl_Update service
operation are supported:
\- indication about selected transfer policy; and
\- modification of a BDT warning notification request indication.
#### 4.2.3.2 Indication about selected transfer policy
When the feature \"PatchCorrection\" is supported, this procedure is used by
the NF service consumer to inform the PCF about selected transfer policy, as
defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4], if
the AF selected the transfer policy from the received transfer policy list
after:
\- retrieval of the BDT policies as described in clause 4.2.2; or
\- reception of the BDT warning notification as described in clause 4.2.4.
Figure 4.2.3.2-1 illustrates an indication about selected transfer policy.
Figure 4.2.3.2-1: Indication about selected transfer policy
Upon reception of a Background Data Transfer request from the AF indicating
transfer policy selection, the NF service consumer shall invoke the
Npcf_BDTPolicyControl_Update service operation by sending an HTTP PATCH
request to the PCF, as shown in figure 4.2.3.2-1, step 1. The NF service
consumer shall set the request URI to \"{apiRoot}/npcf-
bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}\".
The NF service consumer shall include a \"PatchBdtPolicy\" data type in a
payload body of the HTTP PATCH request. When the AF selects a transfer policy,
the \"PatchBdtPolicy\" data type shall contain a \"bdtPolData\" attribute
which shall encode the transfer policy ID of the selected transfer policy in
the \"selTransPolicyId\" attribute. In the case of transfer policy re-
negotiation and if the BdtNotification_5G feature is supported and the AF did
not select any transfer policy, the NF service consumer shall set the
\"selTransPolicyId\" attribute to value \"0\" to indicate no transfer policy
is selected.
If the PCF cannot successfully fulfil the received HTTP PATCH request due to
the internal PCF error or due to the error in the HTTP PATCH request, the PCF
shall send the HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP PATCH request needs to be redirected, the PCF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [6].
Otherwise, upon the reception of the HTTP PATCH request from the NF service
consumer, the PCF:
\- in case of the initial transfer policy negotiation may invoke the
Nudr_DataRepository_Update service operation, as described in 3GPP TS 29.504
[11] and 3GPP TS 29.519 [12] clause 5.2.9.3.2, to update the UDR with the
selected transfer policy, the corresponding BDT Reference ID, the volume of
data per UE, the expected number of UEs and, if available, a network area
information, the associated DNN and S-NSSAI for the provided ASP identifier;
or
\- in case of transfer policy re-negotiation may invoke:
a) if a transfer policy is selected the Nudr_DataRepository_Update service
operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause
5.2.9.3.4, to update the UDR with the selected candidate transfer policy and
set the \"bdtpStatus\" attribute to value \"VALID\" within the BdtDataPatch
data type; or
b) if no transfer policy is selected the Nudr_DataRepository_Delete service
operation, as described in 3GPP TS 29.504 [11] and 3GPP TS 29.519 [12] clause
5.2.9.3.3, to remove the transfer policy from the UDR; and
NOTE: In case only one PCF is deployed in the network, transfer policies can
be locally stored in the PCF and the interaction with the UDR is not required.
\- shall send:
a) a \"204 No Content\" response (as shown in figure 4.2.3.2-1, step 2a); or
b) a \"200 OK\" response (as shown in figure 4.2.3.2-1, step 2b) with a
\"BdtPolicy\" data type in the payload body,
to the HTTP PATCH request to the NF service consumer.
#### 4.2.3.3 Modification of BDT warning notification request indication
This procedure is used by an AF to modify a BDT warning notification request
indication when the feature \"BdtNotification_5G\" and the feature
\"PatchCorrection\" are supported.
Upon reception of a request from the AF to modify the BDT warning notification
request indication, the NF service consumer shall invoke the
Npcf_BDTPolicyControl_Update service operation by sending an HTTP PATCH
request to the PCF, as described in clause 4.2.3.2. The NF service consumer
shall indicate whether a BDT warning notification shall be enabled or disabled
by including the \"warnNotifReq\" attribute in the \"bdtReqData\" attribute of
the \"PatchBdtPolicy\" data type.
If the BDT warning notification is not required anymore the NF service
consumer shall set the value of the \"warnNotifReq\" attribute to \"false\".
If the BDT warning notification is again required the NF service consumer
shall set the value of the \"warnNotifReq\" attribute to \"true\".
Upon the reception of the HTTP PATCH request from the NF service consumer
indicating a modification of the BDT warning notification request indication,
the PCF shall acknowledge that request by sending an HTTP response message as
described in clause 4.2.3.2.
### 4.2.4 Npcf_BDTPolicyControl_Notify service operation
#### 4.2.4.1 General
The Npcf_BDTPolicyControl_Notify service operation is used by the PCF to send
the BDT notification to the NF service consumer.
The following procedure using the Npcf_BDTPolicyControl_Notify service
operation is supported:
\- sending the BDT warning notification to the NF service consumer.
#### 4.2.4.2 Sending the BDT warning notification
This procedure is used by the PCF to inform the NF service consumer that
network performance in the area of interest goes below the criteria set by the
operator, as defined in clause 6.1.2.4 of 3GPP TS 23.503 [4].
Figure 4.2.4.2-1 illustrates a BDT warning notification from the PCF.
Figure 4.2.4.2-1: BDT warning notification
When the PCF knows that the network performance in the area of interest goes
below the criteria set by the operator from the NWDAF as described in 3GPP TS
29.520 [22] and if the BDT warning notification is enabled, the PCF may try to
re-negotiate the affected BDT policies with the affected AFs. To do this, the
PCF retrieves all the background transfer policies together with their
additionally stored AF provided information for BDT policy decision (e.g.
their corresponding desired time window, the number of UEs, the volume of data
per UE, etc.) from the UDR, identifies the BDT policy(ies) that are not
desirable anymore due to the degradation of the network performance and tries
to calculate one or more new candidate BDT policies based on the AF provided
information, the background transfer policies retrieved from the UDR and the
current network performance as follows:
\- If the BDT policies retrieved from the UDR include the \"bdtpStatus\"
attribute indicating the BDT policy is invalid, the PCF may calculate one or
more new candidate BDT policies without considering the invalid BDT policy.
\- If the PCF does not find any new candidate BDT policies, the previously
negotiated BDT policy shall be kept and no interaction with the AF shall
occur.
If one or more new candidate BDT policies are calculated, the PCF shall:
\- if the PCF has not locally stored the background transfer policies, invoke
the Nudr_DataRepository_Update service operation, as described in 3GPP TS
29.504 [11] and 3GPP TS 29.519 [12] clause 5.2.9.3.4, to invalidate the
affected background transfer policy stored in the UDR by including the
\"bdtpStatus\" attribute set to value \"INVALID\" within the BdtDataPatch data
type; and
\- invoke the Npcf_BDTPolicyControl_Notify service operation by sending the
HTTP POST request with the BDT warning notification to the NF service consumer
so that the NF service consumer can notify the AF.
The PCF shall include a \"Notification\" data type in a payload body of the
HTTP POST request.
The \"Notification\" data type provided in the request body:
\- shall contain the BDT Reference ID of the impacted transfer policy within
the \"bdtRefId\" attribute;
\- may contain the time window when the network performance will go below the
criteria set by the operator within the \"timeWindow\" attribute;
\- may contain the network area where the network performance will go below
the criteria set by the operator within the \"nwAreaInfo\" attribute; and
\- may contain the list of candidate transfer policies in the \"candPolicies\"
attribute.
NOTE: The AF might select a new background transfer policy or might not select
any new background transfer policy from the offered candidate list when
receives the BDT warning notification.
Upon the reception of the HTTP POST request from the PCF, the NF service
consumer shall acknowledge that request by sending an HTTP response message
with the corresponding status code.
If the HTTP POST request from the PCF is accepted, the NF service consumer
shall acknowledge the receipt of the notification with a \"204 No Content\"
response to HTTP POST request, as shown in figure 4.2.4.2-1, step 2.
If the HTTP POST request from the PCF is not accepted, the NF service consumer
shall send an HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the NF service consumer determines
the received HTTP POST request needs to be redirected, the NF service consumer
shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS
29.500 [6].
# 5 Npcf_BDTPolicyControl API
## 5.1 Introduction
The BDT Policy Control Service shall use the Npcf_BDTPolicyControl API.
The API URI of the Npcf_BDTPolicyControl API shall be:
**{apiRoot}/\ /\**
The request URI used in each HTTP request from the NF service consumer towards
the PCF shall have the structure defined in clause 4.4.1 of 3GPP TS 29.501
[7], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [7].
\- The \ shall be \"npcf-bdtpolicycontrol\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [8], shall be used as specified in clause 5.2 of 3GPP TS
29.500 [6].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [6].
The OpenAPI [10] specification of HTTP messages and content bodies for the
Npcf_BDTPolicyControl is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [6] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [6]. The use of the JSON format shall be signalled by the content type
\"application/json\".
JSON object used in the HTTP PATCH request shall be encoded according to
\"JSON Merge Patch\" and shall be signalled by the content type
\"application/merge-patch+json\", as defined in IETF RFC 7396 [15].
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [17].
### 5.2.3 HTTP custom headers
The Npcf_BDTPolicyControl API shall support mandatory HTTP custom header
fields specified in clause 5.2.3.2 of 3GPP TS 29.500 [6] and may support
optional HTTP custom header fields specified in clause 5.2.3.3 of 3GPP TS
29.500 [6].
In this Release of the specification, no specific custom headers are defined
for the Npcf_BDTPolicyControl API.
## 5.3 Resources
### 5.3.1 Resource Structure
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 5.3.1-1 depicts the resource URIs structure for the
Npcf_BDTPolicyControl API.
Figure 5.3.1-1: Resource URI structure of the Npcf_BDTPolicyControl API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | BDT policies | /bdtpolicies | POST | Npc | | | | | f_BDTPolicyCo | | | | | ntrol_Create. | | | | | Creates a new | | | | | Individual BDT | | | | | policy | | | | | resource. | +----------------+----------------+----------------+----------------+ | Individual BDT | /bdtpolicies | GET | Reads an | | policy | /{bdtPolicyId} | | Individual BDT | | | | | policy | | | | | resource. | +----------------+----------------+----------------+----------------+ | | | PATCH | Npc | | | | | f_BDTPolicyCo | | | | | ntrol_Update. | | | | | | | | | | Modifies an | | | | | existing | | | | | Individual BDT | | | | | policy | | | | | resource by | | | | | selecting or | | | | | reselecting a | | | | | transfer | | | | | policy. | +----------------+----------------+----------------+----------------+
### 5.3.2 Resource: BDT policies (Collection)
#### 5.3.2.1 Description
The BDT policies resource represents all the transfer policies that exist in
the BDT Policy Control service at a given PCF instance.
#### 5.3.2.2 Resource definition
Resource URI: **{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1.
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description BdtReqData M 1 Contains information for
the creation of a new Individual BDT policy resource.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | Codes | | +---------------+---+-------------+---------------+---------------+ | BdtPolicy | M | 1 | 201 Created | Successful | | | | | | case. | | | | | | | | | | | | The creation | | | | | | of an | | | | | | Individual | | | | | | BDT policy | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 303 See Other | The result of | | | | | | the HTTP POST | | | | | | request would | | | | | | be equivalent | | | | | | to the | | | | | | existing | | | | | | Individual | | | | | | BDT policy | | | | | | resource. The | | | | | | HTTP response | | | | | | shall contain | | | | | | a Location | | | | | | header field | | | | | | set to the | | | | | | URI of the | | | | | | existing | | | | | | individual | | | | | | BDT policy | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [6] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/npcf-
bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}.
* * *
Table 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the existing individual BDT policy resource.
* * *
#### 5.3.2.4 Resource Custom Operations
None.
### 5.3.3 Resource: Individual BDT policy (Document)
#### 5.3.3.1 Description
The Individual BDT policy resource represents the transfer policies that exist
in the BDT Policy Control service at a given PCF instance.
#### 5.3.3.2 Resource definition
Resource URI: **{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}**
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
+-------------+-----------+------------------------------------------+ | Name | Data type | Definition | +-------------+-----------+------------------------------------------+ | apiRoot | string | See clause 5.1. | +-------------+-----------+------------------------------------------+ | bdtPolicyId | string | Identifies the individual BDT policy | | | | resource in the PCF. | | | | | | | | To enable the value to be used as part | | | | of a URI, the string shall only contain | | | | allowed characters according to the | | | | \"lower-with-hyphen\" naming convention | | | | defined in clause 5.1.3 of | | | | 3GPP TS 29.501 [7] and rules for a | | | | path segment defined in | | | | IETF RFC 3986 [16]. | +-------------+-----------+------------------------------------------+
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | BdtPolicy | M | 1 | 200 OK | A | | | | | | r | | | | | | epresentation | | | | | | of an | | | | | | Individual | | | | | | BDT policy | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [6] | | | | | | for the GET | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.3.3.3.2 PATCH
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this
resource
* * *
Data type P Cardinality Description PatchBdtPolicy M 1 Contains modification
instructions to be performed on the BdtPolicy data structure to select a
transfer policy and in addition, may indicate whether the BDT warning
notification is enabled or disabled.
* * *
Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | Codes | | +---------------+---+-------------+---------------+---------------+ | BdtPolicy | M | 1 | 200 OK | Successful | | | | | | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | BDT Policy | | | | | | resource is | | | | | | modified and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | BDT Policy | | | | | | resource is | | | | | | modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [6] | | | | | | for the PATCH | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
## 5.4 Custom Operations without associated resources
No custom operation is defined in this Release of the specification.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [6] and clause
4.6.2.3 of 3GPP TS 29.501 [7].
Table 5.5.1-1: Notifications overview
* * *
Notification Callback URI HTTP method or custom operation Description (service
operation) BDT Notification {notifUri} POST Provides BDT notification.
* * *
### 5.5.2 BDT Notification
#### 5.5.2.1 Description
The BDT Notification is used by the PCF to notify the NF service consumer
about changed conditions for background data transfer e.g. that a network
performance in the area of interest goes below the criteria set by the
operator.
#### 5.5.2.2 Target URI
The Callback URI \"**{notifUri}** \" shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri It contains the URI of the recipient of
BDT notification as assigned by the NF service consumer during the Create
service operation and described within the BdtReqData (see table 5.6.2.3-1).
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description Notification M 1 Provides BDT
notification.
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The reception | | | | | | of the BDT | | | | | | notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [6] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Npcf_BDTPolicyControl
service based interface protocol.
Table 5.6.1-1: Npcf_BDTPolicyControl specific Data Types
* * *
Data type Section defined Description Applicability BdtPolicy 5.6.2.2
Represents an Individual BDT policy resource.  
BdtPolicyData 5.6.2.4 Describes an Individual BDT policy resource.  
BdtPolicyDataPatch 5.6.2.6 Contains modification instructions to be performed
on the \"bdtPolData\" property of the BdtPolicy data structure to select a
transfer policy.  
BdtReqData 5.6.2.3 Contains information for creation a new Individual BDT
policy resource.  
BdtReqDataPatch 5.6.2.12 Describes the modifications to the BDT request data
of an Individual BDT policy resource. PatchCorrection NetworkAreaInfo 5.6.2.8
Describes a network area information in which the NF service consumer requests
the number of UEs.  
Notification 5.6.2.10 Contains the BDT notification information.
BdtNotification_5G PatchBdtPolicy 5.6.2.11 Describes the modifications to the
BDT Policy Data and BDT Policy Request data of an Individual BDT policy
resource. PatchCorrection TransferPolicy 5.6.2.5 Describes a transfer policy.
* * *
Table 5.6.1-2 specifies data types re-used by the Npcf_BDTPolicyControl
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Npcf_BDTPolicyControl service based
interface.
Table 5.6.1-2: Npcf_BDTPolicyControl re-used Data Types
* * *
Data type Reference Comments Applicability BdtReferenceId 3GPP TS 29.122 [14]
Identifies transfer policy of background data transfer for provided ASP.  
BitRate 3GPP TS 29.571 [13] Specifies bitrate in kbits per second.  
Dnn 3GPP TS 29.571 [13] Identifies a Data Network Name.  
Ecgi 3GPP TS 29.571 [13] Represents an EUTRA cell identifier.  
GlobalRanNodeId 3GPP TS 29.571 [13] Represents an identity of the NG-RAN node.  
GroupId 3GPP TS 29.571 [13] Identifies a group of UEs.  
Ncgi 3GPP TS 29.571 [13] Represents an NR cell identifier.  
ProblemDetails 3GPP TS 29.571 [13] Used in error responses to provide more
detailed information about an error.  
RedirectResponse 3GPP TS 29.571 [13] Contains redirection related information.
ES3XX Snssai 3GPP TS 29.571 [13] Identifies a Single Network Slice Selection
Assistance Information.  
SupportedFeatures 3GPP TS 29.571 [13] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
Tai 3GPP TS 29.571 [13] Represents a tracking area identity.  
TimeWindow 3GPP TS 29.122 [14] Specifies a time interval.  
TrafficDescriptor 3GPP TS 29.122 [14] Represents a traffic descriptor.  
Uri 3GPP TS 29.571 [13] String providing an URI. BdtNotification_5G
UsageThreshold 3GPP TS 29.122 [14] Represents a data volume expected to be
transferred per UE.
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type BdtPolicy
Table 5.6.2.2-1: Definition of type BdtPolicy
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | b | BdtP | C | 0..1 | Describes | | | dtPolData | olicyData | | | the | | | | | | | auth | | | | | | | orization | | | | | | | data of | | | | | | | an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | created | | | | | | | by the | | | | | | | PCF. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | response | | | | | | | to the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | to GET | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | b | B | C | 0..1 | I | | | dtReqData | dtReqData | | | dentifies | | | | | | | the | | | | | | | service | | | | | | | req | | | | | | | uirements | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | to GET | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type BdtReqData
Table 5.6.2.3-1: Definition of type BdtReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | aspId | AspId | M | 1 | This IE | | | | | | | contains | | | | | | | an | | | | | | | identity | | | | | | | of an | | | | | | | ap | | | | | | | plication | | | | | | | service | | | | | | | provider. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | T | M | 1 | This IE | | | esTimeInt | imeWindow | | | indicates | | | | | | | a desired | | | | | | | time | | | | | | | window | | | | | | | for BDT. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | O | 0..1 | This IE | | | | | | | i | | | | | | | dentifies | | | | | | | a DNN. | | +-----------+-----------+---+-----------+-----------+-----------+ | int | GroupId | O | 0..1 | R | | | erGroupId | | | | epresents | | | | | | | an | | | | | | | internal | | | | | | | group | | | | | | | i | | | | | | | dentifier | | | | | | | and | | | | | | | i | | | | | | | dentifies | | | | | | | a group | | | | | | | of UEs. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | O | 0..1 | This IE | B | | | | | | indicates | dtNotific | | | | | | that the | ation_5G | | | | | | NF | | | | | | | service | | | | | | | consumer | | | | | | | requests | | | | | | | a BDT | | | | | | | not | | | | | | | ification | | | | | | | from the | | | | | | | PCF. It | | | | | | | contains | | | | | | | an URI of | | | | | | | the | | | | | | | recipient | | | | | | | of BDT | | | | | | | noti | | | | | | | fication. | | +-----------+-----------+---+-----------+-----------+-----------+ | n | Networ | O | 0..1 | This IE | | | wAreaInfo | kAreaInfo | | | r | | | | | | | epresents | | | | | | | a network | | | | | | | area | | | | | | | in | | | | | | | formation | | | | | | | in which | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | requests | | | | | | | a number | | | | | | | of UEs. | | | | | | | | | | | | | | It may be | | | | | | | present | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | to GET | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | numOfUes | integer | M | 1 | This IE | | | | | | | indicates | | | | | | | a number | | | | | | | of UEs. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | O | 0..1 | This IE | | | | | | | i | | | | | | | dentifies | | | | | | | a slice. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | request a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | TrafficD | O | 0..1 | Contains | | | rafficDes | escriptor | | | the | | | | | | | traffic | | | | | | | d | | | | | | | escriptor | | | | | | | of the | | | | | | | b | | | | | | | ackground | | | | | | | data. | | +-----------+-----------+---+-----------+-----------+-----------+ | volPerUe | Usage | M | 1 | This IE | | | | Threshold | | | indicates | | | | | | | a data | | | | | | | volume | | | | | | | expected | | | | | | | to be | | | | | | | tr | | | | | | | ansferred | | | | | | | per UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | war | boolean | O | 0..1 | This IE | B | | nNotifReq | | | | indicates | dtNotific | | | | | | whether | ation_5G | | | | | | the BDT | | | | | | | warning | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | enabled | | | | | | | or | | | | | | | disabled. | | | | | | | | | | | | | | It may be | | | | | | | present: | | | | | | | | | | | | | | - in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | and in | | | | | | | the | | | | | | | corr | | | | | | | esponding | | | | | | | response; | | | | | | | and | | | | | | | | | | | | | | - in | | | | | | | responses | | | | | | | to GET | | | | | | | and PATCH | | | | | | | requests. | | | | | | | | | | | | | | true: | | | | | | | enabled; | | | | | | | | | | | | | | false: | | | | | | | disabled | | | | | | | ( | | | | | | | default). | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.4 Type BdtPolicyData
Table 5.6.2.4-1: Definition of type BdtPolicyData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | bdtRefId | BdtRe | M | 1 | This IE | | | | ferenceId | | | indicates | | | | | | | transfer | | | | | | | policies | | | | | | | of | | | | | | | b | | | | | | | ackground | | | | | | | data | | | | | | | transfer | | | | | | | for | | | | | | | provided | | | | | | | ASP. | | +-----------+-----------+---+-----------+-----------+-----------+ | selTran | integer | C | 0..1 | This IE | | | sPolicyId | | | | contains | | | | | | | the | | | | | | | identity | | | | | | | of the | | | | | | | selected | | | | | | | transfer | | | | | | | policy. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | response | | | | | | | to the | | | | | | | PATCH | | | | | | | request | | | | | | | that | | | | | | | modifies | | | | | | | an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource | | | | | | | to | | | | | | | indicate | | | | | | | a | | | | | | | selected | | | | | | | transfer | | | | | | | policy. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the | | | | | | | PCF in | | | | | | | the | | | | | | | response | | | | | | | to the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | trans | arr | M | 1..N | This IE | | | fPolicies | ay(Transf | | | contains | | | | erPolicy) | | | transfer | | | | | | | policies. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the | | | | | | | PCF in | | | | | | | the | | | | | | | response | | | | | | | to the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | BDT | | | | | | | Policy | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.5 Type TransferPolicy
Table 5.6.2.5-1: Definition of type TransferPolicy
* * *
Attribute name Data type P Cardinality Description Applicability maxBitRateDl
BitRate O 0..1 This IE indicates a maximum aggregated bitrate in the downlink
direction authorized by the PCF.  
maxBitRateUl BitRate O 0..1 This IE indicates a maximum aggregated bitrate in
the uplink direction authorized by the PCF.  
ratingGroup integer M 1 This IE indicates a rating group for the recommended
time window.  
recTimeInt TimeWindow M 1 This IE indicates a recommended time window of a
transfer policy.  
transPolicyId integer M 1 This IE contains an identity of a transfer policy.
* * *
#### 5.6.2.6 Type BdtPolicyDataPatch
Table 5.6.2.6-1: Definition of type BdtPolicyDataPatch
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | selTran | integer | M | 1 | This IE | | | sPolicyId | | | | contains | | | | | | | an | | | | | | | identity | | | | | | | (i.e. the | | | | | | | tran | | | | | | | sPolicyId | | | | | | | value) of | | | | | | | a | | | | | | | selected | | | | | | | transfer | | | | | | | policy. | | | | | | | | | | | | | | If the | | | | | | | B | | | | | | | dtNotific | | | | | | | ation_5G | | | | | | | feature | | | | | | | is | | | | | | | supported | | | | | | | value | | | | | | | \"0\" | | | | | | | indicates | | | | | | | that no | | | | | | | transfer | | | | | | | policy is | | | | | | | selected. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.7 Void
#### 5.6.2.8 Type NetworkAreaInfo
Table 5.6.2.8-1: Definition of type NetworkAreaInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | ecgis | ar | O | 1..N | This IE | | | | ray(Ecgi) | | | contains | | | | | | | a list of | | | | | | | Eâ€‘UTRA | | | | | | | cell | | | | | | | id | | | | | | | entities. | | +-----------+-----------+---+-----------+-----------+-----------+ | ncgis | ar | O | 1..N | This IE | | | | ray(Ncgi) | | | contains | | | | | | | a list of | | | | | | | NR cell | | | | | | | id | | | | | | | entities. | | +-----------+-----------+---+-----------+-----------+-----------+ | gR | arra | O | 1..N | This IE | | | anNodeIds | y(GlobalR | | | contains | | | | anNodeId) | | | a list of | | | | | | | the | | | | | | | NGâ€‘RAN | | | | | | | nodes. | | | | | | | | | | | | | | The | | | | | | | \" | | | | | | | n3IwfId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | \ | | | | | | | "GlobalRa | | | | | | | nNodeId\" | | | | | | | data type | | | | | | | shall not | | | | | | | be | | | | | | | supplied. | | +-----------+-----------+---+-----------+-----------+-----------+ | tais | a | O | 1..N | This IE | | | | rray(Tai) | | | contains | | | | | | | a list of | | | | | | | tracking | | | | | | | area | | | | | | | id | | | | | | | entities. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | Networ | | | | | | | kAreaInfo | | | | | | | data type | | | | | | | allows | | | | | | | any | | | | | | | co | | | | | | | mbination | | | | | | | of | | | | | | | defined | | | | | | | pr | | | | | | | operties. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.9 Void
#### 5.6.2.10 Type Notification
Table 5.6.2.10-1: Definition of type Notification
* * *
Attribute name Data type P Cardinality Description Applicability bdtRefId
BdtReferenceId M 1 This IE indicates transfer policies of background data
transfer which the notification corresponds to.  
candPolicies array(TransferPolicy) O 1..N This IE contains a list of the
candidate transfer policies from which the AF may select a new transfer policy
due to a network performance is below the criteria set by the operator.  
nwAreaInfo NetworkAreaInfo O 0..1 This IE represents a network area where a
network performance will go below the criteria set by the operator.  
timeWindow TimeWindow O 0..1 This IE indicates a time window when a network
performance will go below the criteria set by the operator.
* * *
#### 5.6.2.11 Type PatchBdtPolicy
Table 5.6.2.11-1: Definition of type PatchBdtPolicy
* * *
Attribute name Data type P Cardinality Description Applicability bdtPolData
BdtPolicyDataPatch O 0..1 Describes the updates in BDT policy data of an
Individual BDT Policy resource, e.g., describes the selected BDT policy.  
bdtReqData BdtReqDataPatch O 0..1 Describes the updates in BDT policy request
data of an Individual BDT Policy resource, e.g., describes the updates in
warning notification requirements.
* * *
#### 5.6.2.12 Type BdtReqDataPatch
Table 5.6.2.12-1: Definition of type BdtReqDataPatch
* * *
Attribute name Data type P Cardinality Description Applicability warnNotifReq
boolean O 0..1 This IE indicates whether the BDT warning notification is
enabled or disabled. BdtNotification_5G
* * *
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability AspId string This IE
contains an identity of an application service provider.
* * *
## 5.7 Error handling
### 5.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [6].
For the Npcf_BDTPolicyControl API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [7].
Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS
29.500 [6] shall be supported for an HTTP method if the corresponding HTTP
status codes are specified as mandatory for that HTTP method in table
5.2.7.1-1 of 3GPP TS 29.500 [6].
In addition, the requirements in the following clauses shall apply.
### 5.7.2 Protocol Errors
In this Release of the specification, there are no additional protocol errors
applicable for the Npcf_BDTPolicyControl API.
### 5.7.3 Application Errors
The application errors defined for the Npcf_BDTPolicyControl API are listed in
table 5.7.3-1.
Table 5.7.3-1: Application errors
+------------------------+------------------+------------------------+ | Application Error | HTTP status code | Description | +------------------------+------------------+------------------------+ | B | 404 Not Found | The HTTP request is | | DT_POLICY_NOT_FOUND | | rejected because the | | | | specified Individual | | | | BDT policy resource | | | | does not exist. | | | | (NOTE 1) | +------------------------+------------------+------------------------+ | NOTE 1: This | | | | application error is | | | | included in the | | | | responses to the GET | | | | and PATCH requests. | | | | | | | | NOTE 2: Including a | | | | \"ProblemDetails\" | | | | data structure with | | | | the \"cause\" | | | | attribute in the HTTP | | | | response is optional | | | | unless explicitly | | | | mandated in the | | | | service operation | | | | clauses. | | | +------------------------+------------------+------------------------+
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Npcf_BDTPolicyControl
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6.2 of 3GPP TS 29.500 [6].
When requesting the PCF to create an Individual BDT policy resource the NF
service consumer shall indicate the optional features the NF service consumer
supports for the Npcf_BDTPolicyControl service by including the \"suppFeat\"
attribute in the \"BdtReqData\" data type of the HTTP POST request.
The PCF shall determine the supported features for the created Individual BDT
policy resource as specified in clause 6.6.2 of 3GPP TS 29.500 [6]. The PCF
shall indicate the supported features in the HTTP response confirming the
creation of the Individual BDT policy resource by including the \"suppFeat\"
attribute in the \"BdtPolicyData\" data type.
Table 5.8-1: Supported Features
+----------------+---------------------+-----------------------------+ | Feature number | Feature Name | Description | +----------------+---------------------+-----------------------------+ | 1 | BdtNotification_5G | This feature indicates the | | | | support of sending the BDT | | | | notification to the NF | | | | service consumer. | | | | | | | | This feature includes | | | | sending of the BDT warning | | | | notification to the NF | | | | service consumer. | +----------------+---------------------+-----------------------------+ | 2 | ES3XX | Extended Support for 3xx | | | | redirections. | | | | | | | | This feature indicates the | | | | support of redirection for | | | | any service operation, | | | | according to Stateless NF | | | | procedures as specified in | | | | clauses 6.5.3.2 and 6.5.3.3 | | | | of 3GPP TS 29.500 [6] and | | | | according to HTTP | | | | redirection principles for | | | | indirect communication, as | | | | specified in clause 6.10.9 | | | | of 3GPP TS 29.500 [6]. | +----------------+---------------------+-----------------------------+ | 3 | PatchCorrection | Indicates support of the | | | | correction to the PATCH | | | | method. | | | | | | | | When this feature is not | | | | supported, the | | | | interoperability between a | | | | NF service consumer and the | | | | PCF can only be ensured | | | | when it is not required the | | | | update of the Individual | | | | BDT policy resource. | +----------------+---------------------+-----------------------------+
## 5.9 Security
As indicated in 3GPP TS 33.501 [18] and 3GPP TS 29.500 [6], the access to the
Npcf_BDTPolicyControl API, based on local configuration, may be authorized by
means of the OAuth2 protocol (see IETF RFC 6749 [19]), using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [20])
plays the role of the authorization server.
If OAuth2 authorization is used, an NF service consumer, prior to consuming
services offered by the Npcf_BDTPolicyControl API, shall obtain a \"token\"
from the authorization server, by invoking the Access Token Request service,
as described in 3GPP TS 29.510 [20], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF service consumer used for
discovering the Npcf_BDTPolicyControl service.
The Npcf_BDTPolicyControl API defines a single scope \"npcf-bdtpolicycontrol\"
for OAuth2 authorization (as specified in 3GPP TS 33.501 [18]) for the entire
API, and it does not define any additional scopes at resource or operation
level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [10] specification of HTTP messages and
content bodies used by the Npcf_BDTPolicyControl API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[21] and clause 5.3.1 of the 3GPP TS 29.501 [7] for further information).
# A.2 Npcf_BDTPolicyControl API
openapi: 3.0.0
info:
title: Npcf_BDTPolicyControl Service API
version: 1.2.0
description: \|
PCF BDT Policy Control Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.554 V17.4.0; 5G System; Background Data Transfer Policy Control
Service.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.554/\'
servers:
\- url: \'{apiRoot}/npcf-bdtpolicycontrol/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- {}
\- oAuth2ClientCredentials:
\- npcf-bdtpolicycontrol
paths:
/bdtpolicies:
post:
summary: Create a new Individual BDT policy
operationId: CreateBDTPolicy
tags:
\- BDT policies (Collection)
requestBody:
description: >
Contains information for the creation of a new Individual BDT policy resource.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/BdtReqData\'
responses:
\'201\':
description: Background data transfer policies offered to an ASP.
content:
application/json:
schema:
\$ref: \'#/components/schemas/BdtPolicy\'
headers:
Location:
description: >
Contains the URI of the created individual BDT policy resource,
according to the structure
{apiRoot}/npcf-bdtpolicycontrol/v1/bdtpolicies/{bdtPolicyId}
required: true
schema:
type: string
\'303\':
description: >
See Other. The result of the POST request would be equivalent to the
existing Individual BDT policy resource.
headers:
Location:
description: Contains the URI of the existing individual BDT policy resource.
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
BdtNotification:
\'{\$request.body#/notifUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/Notification\'
responses:
\'204\':
description: No Content, a reception of the BDT notification was successful.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/bdtpolicies/{bdtPolicyId}:
get:
summary: Read an Individual BDT policy
operationId: GetBDTPolicy
tags:
\- Individual BDT policy (Document)
parameters:
\- name: bdtPolicyId
description: String identifying the individual BDT policy resource in the PCF.
in: path
required: true
schema:
type: string
responses:
\'200\':
description: Background data transfer policies offered to and selected by an
ASP.
content:
application/json:
schema:
\$ref: \'#/components/schemas/BdtPolicy\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
patch:
summary: Update an Individual BDT policy
operationId: UpdateBDTPolicy
tags:
\- Individual BDT policy (Document)
parameters:
\- name: bdtPolicyId
description: String identifying the individual BDT policy resource in the PCF.
in: path
required: true
schema:
type: string
requestBody:
description: >
Contains modification instruction to be performed on the BdtPolicy data
structure to select a transfer policy and in addition, may indicate whether
the BDT warning notification is enabled or disabled.
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/PatchBdtPolicy\'
responses:
\'200\':
description: >
The Individual BDT Policy resource is modified and a representation of that
resource is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/BdtPolicy\'
\'204\':
description: The Individual BDT Policy resource is modified.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
npcf-bdtpolicycontrol: Access to the Npcf_BDTPolicyControl API
schemas:
# Structured data types
BdtPolicy:
description: Represents an Individual BDT policy resource.
type: object
properties:
bdtPolData:
\$ref: \'#/components/schemas/BdtPolicyData\'
bdtReqData:
\$ref: \'#/components/schemas/BdtReqData\'
BdtReqData:
description: >
Contains service requirements for creation a new Individual BDT policy
resource.
type: object
required:
\- aspId
\- desTimeInt
\- numOfUes
\- volPerUe
properties:
aspId:
\$ref: \'#/components/schemas/AspId\'
desTimeInt:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
interGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
nwAreaInfo:
\$ref: \'#/components/schemas/NetworkAreaInfo\'
numOfUes:
description: Indicates a number of UEs.
type: integer
volPerUe:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/UsageThreshold\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
trafficDes:
\$ref:
\'TS29122_ResourceManagementOfBdt.yaml#/components/schemas/TrafficDescriptor\'
warnNotifReq:
description: Indicates whether the BDT warning notification is enabled or
disabled.
type: boolean
default: false
BdtPolicyData:
description: Describes the authorization data of an Individual BDT policy
resource.
type: object
required:
\- bdtRefId
\- transfPolicies
properties:
bdtRefId:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId\'
transfPolicies:
description: Contains transfer policies.
type: array
items:
\$ref: \'#/components/schemas/TransferPolicy\'
minItems: 1
selTransPolicyId:
description: Contains an identity of the selected transfer policy.
type: integer
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
PatchBdtPolicy:
description: >
Describes the updates in authorization data of an Individual BDT Policy
created
by the PCF.
type: object
properties:
bdtPolData:
\$ref: \'#/components/schemas/BdtPolicyDataPatch\'
bdtReqData:
\$ref: \'#/components/schemas/BdtReqDataPatch\'
BdtPolicyDataPatch:
description: >
A JSON Merge Patch body schema containing modification instruction to be
performed
on the bdtPolData attribute of the BdtPolicy data structure to select a
transfer
policy. Adds selTransPolicyId to BdtPolicyData data structure.
type: object
required:
\- selTransPolicyId
properties:
selTransPolicyId:
description: >
Contains an identity (i.e. transPolicyId value) of the selected transfer
policy. If the BdtNotification_5G feature is supported value 0 indicates that
no transfer policy is selected.
type: integer
BdtReqDataPatch:
description: >
A JSON Merge Patch body schema containing modification instruction to be
performed
on the bdtReqData attribute of the BdtPolicy data structure to indicate
whether
the BDT warning notification is enabled or disabled. Modifies warnNotifReq
from
BdtReqData data structure.
type: object
properties:
warnNotifReq:
description: Indicates whether the BDT warning notification is enabled or
disabled.
type: boolean
TransferPolicy:
description: Describes a transfer policy.
type: object
required:
\- ratingGroup
\- recTimeInt
\- transPolicyId
properties:
maxBitRateDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
maxBitRateUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ratingGroup:
description: Indicates a rating group for the recommended time window.
type: integer
recTimeInt:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
transPolicyId:
description: Contains an identity of a transfer policy.
type: integer
NetworkAreaInfo:
description: >
Describes a network area information in which the NF service consumer requests
the number of UEs.
type: object
properties:
ecgis:
description: Contains a list of E-UTRA cell identities.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ecgi\'
minItems: 1
ncgis:
description: Contains a list of NR cell identities.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ncgi\'
minItems: 1
gRanNodeIds:
description: Contains a list of NG RAN nodes.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GlobalRanNodeId\'
minItems: 1
tais:
description: Contains a list of tracking area identities.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
minItems: 1
Notification:
description: Describes a BDT notification.
type: object
required:
\- bdtRefId
properties:
bdtRefId:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId\'
candPolicies:
description: >
Contains a list of the candidate transfer policies from which the AF may
select a new transfer policy due to a network performance is below the
criteria
set by the operator.
type: array
items:
\$ref: \'#/components/schemas/TransferPolicy\'
minItems: 1
nwAreaInfo:
\$ref: \'#/components/schemas/NetworkAreaInfo\'
timeWindow:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
# Simple data types
AspId:
description: Contains an identity of an application service provider.
type: string
#