# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
N5g-ddnmf Service Based Interface. It provides stage 3 protocol definitions
and message flows, and specifies the API for each service offered by the 5G
DDNMF as specified in 3GPP TS 23.304 [4].
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [5] and
3GPP TS 29.501 [6].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System
(5GS)\".
[5] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[6] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[7] OpenAPI : \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[8] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[11] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[12] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[13] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[14] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[15] IETF RFC 7396: \"JSON Merge Patch\".
[16] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[17] 3GPP TS 23.003: \"Numbering, addressing and identification\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**5G DDNMF** : The 5G DDNMF is the logical function handling network related
actions required for dynamic ProSe Direct Discovery. The 5G DDNMF in the HPLMN
may interact with the 5G DDNMF in a VPLMN or Local PLMN in order to manage the
ProSe Direct Discovery service.
**ProSe Direct Discovery** : A procedure employed by a ProSe-enabled UE to
discover other ProSe-enabled UEs in its vicinity based on direct radio
transmissions between the two UEs with NR technology.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5G DDNMF 5G Direct Discovery Name Management Function
5G ProSe 5G Proximity-based Services
RPAUID Restricted ProSe Application User ID
PDUID ProSe Discovery UE ID
# 4 Overview
The 5G Direct Discovery Name Management Function (5G DDNMF) is the network
entity in the 5G Core Network (5GC) supporting Direct Discovery Services.
Within the 5GC, the 5G DDNMF in HPLMN invokes services provided by the 5G
DDNMF in Local PLMN and/or in VPLMN via the N5g-ddnmf service based interface
(see 3GPP TS 23.304 [4]).
Figure 4-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the 5G
DDNMF:
Figure 4-1: Reference model -- 5G DDNMF
The functionalities supported by the 5G DDNMF are listed in clause 4.3.2 of
3GPP TS 23.304 [4].
NOTE: Only service based interfaces between 5G DDNMFs will be covered in this
TS, other interfaces won\'t be covered for the time being.
# 5 Services offered by the 5G DDNMF
## 5.1 Introduction
The table 5.1-1 shows the 5G DDNMF Services and 5G DDNMF Service Operations:
Table 5.1-1: List of 5G DDNMF Services
+----------------+----------------+----------------+----------------+ | Service Name | Service | Operation | Example | | | Operations | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | N5g-dd | Ann | Re | 5G DDNMF | | nmf_Discovery | ounceAuthorize | quest/Response | | +----------------+----------------+----------------+----------------+ | | AnnounceUpdate | Re | 5G DDNMF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | Mo | Re | 5G DDNMF | | | nitorAuthorize | quest/Response | | +----------------+----------------+----------------+----------------+ | | MonitorUpdate | Re | 5G DDNMF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | Monit | Notify | 5G DDNMF | | | orUpdateResult | | | +----------------+----------------+----------------+----------------+ | | Disc | Re | 5G DDNMF | | | overyAuthorize | quest/Response | | +----------------+----------------+----------------+----------------+ | | MatchReport | Re | 5G DDNMF | | | | quest/Response | | +----------------+----------------+----------------+----------------+ | | Ma | Notify | 5G DDNMF | | | tchInformation | | | +----------------+----------------+----------------+----------------+
Table 5.1-2 summarizes the corresponding APIs defined for this specification.
Table 5.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName **Annex**
* * *
N5g-ddnmf_Discovery 6.1 N5g-ddnmf Discovery Service TS29555_
N5g-ddnmf_Discovery.yaml n5gddnmf-disc A.2
## 5.2 N5g-ddnmf_Discovery Service
### 5.2.1 Service Description
The N5g-ddnmf_Discovery service enables an NF or SCP to manage inter-PLMN
ProSe Direct Discovery operations for a target UE. The following are the key
functionalities of this NF service.
\- Allow the consumer NF to obtain the authorization from the 5G DDNMF for
announcing in the PLMN.
\- Allow the consumer NF to update or revoke the authorization from the 5G
DDNMF for announcing in the PLMN.
\- Allow the consumer NF to obtain the authorization from the 5G DDNMF for
monitoring in the PLMN.
\- Allow the consumer NF to update or revoke the authorization for the
indicated UE to monitor in the PLMN.
\- Allow the consumer NF to inform the 5G DDNMF of the monitoring revocation
results.
\- Allow the consumer NF to obtain the authorization from the 5G DDNMF for a
discoverer UE in the PLMN to operate Model B restricted discovery.
\- Allow the consumer NF to obtain the information about the indicated
discovery code from the 5G DDNMF.
\- Allow the consumer NF to receive from the 5G DDNMF of a matching result,
and the information can be used for charging purpose.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
This clause introduces the service operations defined for the
N5g-ddnmf_Discovery services as follows:
\- AnnounceAuthorize
\- AnnounceUpdate
\- MonitorAuthorize
\- MonitorUpdate
\- MonitorUpdateResult
\- DiscoveryAuthorize
\- MatchReport
\- MatchInformation
#### 5.2.2.2 AnnounceAuthorize
##### 5.2.2.2.1 General
The AnnounceAuthorize service operation shall be used by the NF Service
consumer to obtain the authorization to announce for a UE from the 5G DDNMF in
the PLMN. The following procedures are supported using the AnnounceAuthorize
service operation:
\- Discovery Request procedures (see 3GPP 3GPP TS 23.304 [4], clause 6.3.1.4)
\- Announcing Alert Procedures for restricted discovery (see 3GPP 3GPP TS
23.304 [4], clause 6.3.1.6)
\- Direct Discovery Update Procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.7)
##### 5.2.2.2.2 Obtain the authorization to announce for a UE
The AnnounceAuthorize service operation is invoked by a NF Service Consumer,
e.g. HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN
5G DDNMF) to request to obtain the authorization from the 5G DDNMF for
announcing for a target UE. See Figure 5.2.2.2.2-1. The request contains the
UE\'s identity (/{ueId}) which shall be a SUPI or GPSI and the discovery Entry
ID (/{discEntryId}) which is used to identify the discovery entry related to
this request.
Figure 5.2.2.2.2-1: Obtain the authorization to announce for a UE
1\. The NF Service Consumer shall send an HTTP PUT request to the resource
representing the authorization to announce for a UE to obtain the
authorization to announce for this UE. The request shall include the Discovery
Type, if the Discovery Type is OPEN the Announce Authorisation Data for open
discovery shall be included, and if the Discovery Type is RESTRICTED the
Announce Authorisation Data for restricted discovery shall be included in the
HTTP PUT request body.
2a. If the context indicated by the discEntryId doesn\'t exist, the 5G DDNMF
shall create the new resource, and upon success of creation of the resource,
\"201 created\" shall be returned.
2b. If the context indicated by the discEntryId already exists, the 5G DDNMF
shall replace the stored data using the received data, and upon success of the
update of the resource, \"204 No Content\" shall be returned.
2c. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.2.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.2.3.1-3.
#### 5.2.2.3 AnnounceUpdate
##### 5.2.2.3.1 General
The AnnounceUpdate service operation shall be used by the NF Service consumer
to update or revoke the authorization from the 5G DDNMF for announcing in the
PLMN. The following procedures are supported using the AnnounceUpdate service
operation:
\- Direct Discovery Update Procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.7)
##### 5.2.2.3.2 Update the authorization for announcing for a UE
The AnnounceUpdate service operation is invoked by a NF Service Consumer, e.g.
HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN 5G
DDNMF) to request to update the authorization for announcing in the PLMN from
the 5G DDNMF for a target UE. See Figure 5.2.2.3.2-1. The request contains the
UE\'s identity (/{ueId}) which shall be a SUPI or GPSI and the discovery Entry
ID (/{discEntryId}) which is used to identify the discovery entry related to
this request.
Figure 5.2.2.3.2-1: Update the authorization for announcing for a UE
1\. The NF Service Consumer shall send an HTTP PATCH request to the resource
representing the authorization to announce for a UE to update or revoke the
authorization from the 5G DDNMF for announcing in the PLMN. The request shall
include Discovery Type, the Validity Timer, and the ProSe Application Code if
the ProSe Application Code is changed in the HTTP PATCH request body. If the
Validity Timer sets to a full zero, it indicates to revoke the authorization
for the announcing in the PLMN.
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.2.3.2-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.2.3.2-3.
#### 5.2.2.4 MonitorAuthorize
##### 5.2.2.4.1 General
The MonitorAuthorize service operation shall be used by the NF Service
consumer to obtain the authorization from the 5G DDNMF for monitoring for an
UE in the PLMN. The following procedures are supported using the
MonitorAuthorize service operation:
\- Discovery Request procedures (see 3GPP 3GPP TS 23.304 [4], clause 6.3.1.4).
##### 5.2.2.4.2 Obtain the authorization to monitor for a UE
The MonitorAuthorize service operation is invoked by a NF Service Consumer,
e.g. HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN
5G DDNMF) to request to obtain the authorization from the 5G DDNMF for
monitoring for a target UE. See Figure 5.2.2.4.2-1. The request contains the
UE\'s identity (/{ueId}) which shall be a SUPI or GPSI and the discovery Entry
ID (/{discEntryId}) which is used to identify the discovery entry related to
this request.
Figure 5.2.2.4.2-1: Obtain the authorization to monitor for a UE
1\. The NF Service Consumer shall send an HTTP PUT request to the resource
representing the authorization to monitor for a UE to obtain the authorization
to monitor for this UE. The request shall include the Discovery Type, if the
Discovery Type is OPEN the Monitor Authorisation Data for open discovery shall
be included, and if the Discovery Type is RESTRICTED the Monitor Authorisation
Data for restricted discovery shall be included in the HTTP PUT request body.
2a. If the context indicated by the discEntryId doesn\'t exist, the 5G DDNMF
shall create the new resource, and upon success of creation of the resource,
\"201 created\" shall be returned. The response body shall contain the
parameters related to the determined authorization data to monitor for the UE.
2b. If the context indicated by the discEntryId already exists, the 5G DDNMF
shall replace the stored data using the received data, and upon success of the
update of the resource, \"204 No Content\" shall be returned.
2c. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.3.3.1-3.
#### 5.2.2.5 MonitorUpdate
##### 5.2.2.5.1 General
The MonitorUpdate service operation shall be used by the NF Service consumer
to update or revoke the authorization for the indicated UE to monitor in the
PLMN. The following procedures are supported using the MonitorUpdate service
operation:
\- Direct Discovery Update Procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.7).
##### 5.2.2.5.2 Update the authorization for monitoring for a UE
The MonitorUpdate service operation is invoked by a NF Service Consumer, e.g.
HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN 5G
DDNMF) to request to update the authorization for monitoring in the PLMN from
the 5G DDNMF for a target UE. See Figure 5.2.2.5.2-1. The request contains the
UE\'s identity (/{ueId}) which shall be a SUPI or GPSI and the discovery Entry
ID (/{discEntryId}) which is used to identify the discovery entry related to
this request.
Figure 5.2.2.5.2-1: Update the authorization for monitoring for a UE
1\. The NF Service Consumer shall send an HTTP PATCH request to the resource
representing the authorization to monitor for a UE to update or revoke the
authorization for the indicated UE to monitor in the PLMN. The request shall
include Discovery Type, if the Discovery Type indicates \"RESTRICTED\", the
ProSe Application ID Name, and the TTL shall be included in the HTTP PATCH
request body. And if the value of TTL in the request sets to zero, it
indicates to revoke the previously authorized monitoring to the given
Discovery Entry ID, if the Discovery Type indicates \"OPEN\", ProSe Restricted
Code, Application ID, Banned RPAUID, and Banned PDUID shall be included in the
HTTP PATCH request body, and monitorUpdateResultCallbackRef may be included in
the request body if the NF Service Consumer expects to receive the monitoring
revocation results
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.2-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.3.3.2-3.
#### 5.2.2.6 MonitorUpdateResult
##### 5.2.2.6.1 General
The MonitorUpdateResult service operation shall be used by the 5G DDNMF to
notify the NF Service consumer of the 5G DDNMF of the monitoring revocation
results. The following procedures are supported using the MonitorUpdateResult
service operation:
\- Direct Discovery Update Procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.7).
##### 5.2.2.6.2 Monitor Update Result Notification
The MonitorUpdateResult service operation notifies the NF service consumer
(e.g. HPLMN 5G DDNMF) serving the user about the monitoring revocation results
for the user. The request contains the monitorUpdateResultCallbackRef URI. See
Figure 5.2.2.6.2-1.
Figure 5.2.2.6.2-1: Monitor Update Result Notification
1\. The 5G DDNMF sends a POST request to the monitorUpdateResultCallbackRef to
notify the NF service consumer about the monitoring revocation results for the
user. The request shall the Discovery Type, the ProSe Restricted Code, the
Application ID, the Banned RPAUID, the Banned PDUID, and the monitoring
revocation results.
2a. On success, the NF service consumer responds with \"204 No Content\".
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.5.2.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.5.2.3.1-3.
#### 5.2.2.7 DiscoveryAuthorize
##### 5.2.2.7.1 General
The DiscoveryAuthorize service operation shall be used by the NF Service
consumer to obtain the authorization from the 5G DDNMF for a discoverer UE in
the PLMN to operate Model B restricted discovery. The following procedures are
supported using the DiscoveryAuthorize service operation:
\- Discovery Request procedures (see 3GPP 3GPP TS 23.304 [4], clause 6.3.1.4).
##### 5.2.2.7.2 Obtain the authorization for a discoverer UE to operate Model
B restricted discovery
The DiscoveryAuthorize service operation is invoked by a NF Service Consumer,
e.g. HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN
5G DDNMF) to request to obtain the authorization from the 5G DDNMF for a
discoverer UE in the PLMN to operate Model B restricted discovery. See Figure
5.2.2.7.2-1. The request contains the UE\'s identity (/{ueId}) which shall be
a SUPI or GPSI and the discovery Entry ID (/{discEntryId}) which is used to
identify the discovery entry related to this request.
Figure 5.2.2.7.2-1: Obtain the authorization for a discoverer UE to operate
Model B restricted discovery
1\. The NF Service Consumer shall send an HTTP PUT request to the resource
representing the authorization for a discoverer UE to obtain the authorization
for a discoverer UE to operate Model B restricted discovery. The request shall
include the Discovery Type, authorisation data for restricted discovery in the
HTTP PUT request body.
2a. If the context indicated by the discEntryId doesn\'t exist, the 5G DDNMF
shall create the new resource, and upon success of creation of the resource,
\"201 created\" shall be returned. The response body shall contain the
parameters related to the determined authorization data for the discoverer UE
to operate Model B restricted discovery.
2b. If the context indicated by the discEntryId already exists, the 5G DDNMF
shall replace the stored data using the received data, and upon success of the
update of the resource, \"204 No Content\" shall be returned.
2c. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.4.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.4.3.1-3.
#### 5.2.2.8 MatchReport
##### 5.2.2.8.1 General
The MatchReport service operation shall be used by the NF Service consumer to
obtain the information about the indicated discovery code from the 5G DDNMF.
The following procedures are supported using the MatchReport service
operation:
\- Discovery Reporting procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.5).
##### 5.2.2.8.2 Obtain the information about the indicated discovery code
The MatchReport service operation is invoked by a NF Service Consumer, e.g.
HPLMN 5G DDNMF, towards the 5G DDNMF (e.g. VPLMN 5G DDNMF or Local PLMN 5G
DDNMF) to request to obtain the information about the indicated discovery code
from the 5G DDNMF. See Figure 5.2.2.8.2-1. The request contains the UE\'s
identity (/{ueId}) which shall be a SUPI or GPSI, the type of request (/match-
report).
Figure 5.2.2.8.2-1: Obtain the information about the indicated discovery code
1\. The NF Service Consumer shall send an HTTP POST request to the resource
representing the information about the indicated discovery code to obtain the
information about the indicated discovery code. The request shall include the
Discovery Type, the ProSe Application Codes if the discovery type is OPEN in
the HTTP POST request body, and optionally includes Monitored PLMN ID in the
HTTP POST request body.
2a. On success, \"200 OK\" shall be returned. The response body shall contain
the parameters related to the information about the indicated discovery code.
2b On failure or redirection, one of the HTTP status code listed in Table
6.1.3.5.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.3.5.3.1-3.
#### 5.2.2.9 MatchInformation
##### 5.2.2.9.1 General
The MatchInformation service operation shall be used by the 5G DDNMF to notify
the NF Service consumer of a matching result, and the information that can be
used for charging purpose. The following procedures are supported using the
MatchInformation service operation:
\- Discovery Reporting procedures (see 3GPP 3GPP TS 23.304 [4], clause
6.3.1.5)
##### 5.2.2.9.2 Match Information Notification
The MatchInformation service operation notifies the NF service consumer (e.g.
VPLMN 5G DDNMF or Local PLMN 5G DDNMF) about match information including a
matching result, and the information can be used for charging purpose. The
request contains the matchInfoCallbackRef URI. See Figure 5.2.2.9.2-1.
Figure 5.2.2.9.2-1: Match Information Notification
1\. The 5G DDNMF sends a POST request to the matchInfoCallbackRef URI to
notify the NF service consumer about match information including a matching
result, and the information can be used for charging purpose. The request
shall include the Discovery Type, match report information for open discovery
type if match report information for open discovery type is OPEN, and match
report information for restricted discovery type if match report information
for open discovery type is RESTRICTED
2a. On success, the NF service consumer responds with \"204 No Content\".
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.5.3.3.1-3 may be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application error listed in Table 6.1.5.3.3.1-3.
# 6 API Definitions
## 6.1 N5g-ddnmf_Discovery Service API
### 6.1.1 Introduction
The N5g-ddnmf_Discovery shall use the N5g-ddnmf_Discovery API.
The API URI of the N5g-ddnmf_Discovery API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [6], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [6].
\- The \ shall be \"n5g-ddnmf-disc\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [8], shall be used as specified in clause 5 of 3GPP TS
29.500 [5].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [5].
The OpenAPI [7] specification of HTTP messages and content bodies for the
n5g-ddnmf-disc API is contained in Annex A.2.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [5]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [10].
JSON Merge Patch, as defined in IETF RFC 7396 [15], signalled by the content
type \"application/merge-patch+json\".
#### 6.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [5] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
### 6.1.3 Resources
#### 6.1.3.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 6.1.3.1-1 depicts the resource URIs structure for the
N5g-ddnmf_Discovery API.
Figure 6.1.3.1-1: Resource URI structure of the N5g-ddnmf_Discovery API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description
* * *
AnnounceData /{ueId}/announce-authorize/{discEntryId} PUT Obtain the
authorization to announce for a UE from the 5G DDNMF in the PLMN.
                                                              PATCH                             Update or revoke the authorization from the 5G DDNMF for announcing in the PLMN.
MonitorData /{ueId}/monitor-authorize/{discEntryId} PUT Obtain the
authorization from the 5G DDNMF for monitoring for an UE in the PLMN.
                                                              PATCH                             Update or revoke the authorization for the indicated UE to monitor in the PLMN.
DiscoveryData /{ueId}/discovery-authorize/{discEntryId} PUT Obtain the
authorization from the 5G DDNMF for a discoverer UE in the PLMN to operate
Model B restricted discovery.
UeData /{ueId}/match-report match-report\ Obtain the information about the
indicated discovery code from the 5G DDNMF. (POST)
* * *
#### 6.1.3.2 Resource: AnnounceData
##### 6.1.3.2.1 Description
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/n5g-ddnmf-disc/\ /{ueId}/announce-
authorize/{discEntryId}**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
ueId VarUeId Represents the Subscription Identifier SUPI or GPSI (see 3GPP TS
23.501 [2] clause 5.9.2)\ pattern: See pattern of type VarUeId in 3GPP TS
29.571 [16]
discEntryId DiscoveryEntryId Represents Discovery Entry Id.
* * *
##### 6.1.3.2.3 Resource Standard Methods
##### 6.1.3.2.3.1 PUT {#put .H6}
This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.
Table 6.1.3.2.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description AnnounceAuthReqData M 1 Contains the
Announce Authorization Data for the indicated UE and indicated discovery
entry.
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 201 Created | Upon success | | | | | | of creation | | | | | | of the | | | | | | resource, an | | | | | | empty | | | | | | response body | | | | | | shall be | | | | | | returned. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success | | | | | Content | of the update | | | | | | of the | | | | | | resource, an | | | | | | empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PR | | | | | | OSE_SERVICE\ | | | | | | _UNAUTHORIZED | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/announce-
authorize/{discEntryId}
* * *
Table 6.1.3.2.3.1-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.2.3.1-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.2.3.2 PATCH {#patch .H6}
This method shall support the URI query parameters specified in table
6.1.3.2.3.2-1.
Table 6.1.3.2.3.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.2-2 and the response data structures and response codes specified in
table 6.1.3.2.3.2-3.
Table 6.1.3.2.3.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description AnnounceUpdateData M 1 Contains the
Announce Authorization Data to update for the indicated UE and indicated
discovery entry.
* * *
Table 6.1.3.2.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon success, | | | | | | the execution | | | | | | report is | | | | | | returned. | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 422 | The \"cause\" | | roblemDetails | | | Unprocessable | attribute may | | | | | Entity | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | UNPROCESS | | | | | | ABLE_REQUEST | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | | | | | | | | NOTE 3: If | | | | | | all the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | implemented, | | | | | | the 5G DDNMF | | | | | | shall respond | | | | | | with 204 No | | | | | | Content | | | | | | response; if | | | | | | some of the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | discarded, | | | | | | and the NF | | | | | | service | | | | | | consumer has | | | | | | included in | | | | | | the | | | | | | supp | | | | | | orted-feature | | | | | | query | | | | | | parameter the | | | | | | \" | | | | | | PatchReport\" | | | | | | feature | | | | | | number, the | | | | | | 5G DDNMF | | | | | | shall respond | | | | | | with | | | | | | PatchResult. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.2-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.2.3.2-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.1.3.3 Resource: MonitorData
##### 6.1.3.3.1 Description
This resource represents the Monitor data.
##### 6.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/n5g-ddnmf-disc/\ /{ueId}/monitor-
authorize/{discEntryId}**
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
ueId VarUeId Represents the Subscription Identifier SUPI or GPSI (see 3GPP TS
23.501 [2] clause 5.9.2)\ pattern: See pattern of type VarUeId in 3GPP TS
29.571 [16]
discEntryId DiscoveryEntryId Represents Discovery Entry Id.
* * *
##### 6.1.3.3.3 Resource Standard Methods
##### 6.1.3.3.3.1 PUT {#put-1 .H6}
This method shall support the URI query parameters specified in table
6.1.3.3.3.1-1.
Table 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.1-2 and the response data structures and response codes specified in
table 6.1.3.3.3.1-3.
Table 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description MonitorAuthReqData M 1 Contains the
Monitor Authorization Data for the indicated UE and indicated discovery entry.
* * *
Table 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Monito | M | 1 | 201 Created | Upon success | | rAuthRespData | | | | of creation | | | | | | of the | | | | | | resource, a | | | | | | response body | | | | | | containing a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | authorized | | | | | | data to | | | | | | monitor for | | | | | | the UE shall | | | | | | be returned. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success | | | | | Content | of the update | | | | | | of the | | | | | | resource, an | | | | | | empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PR | | | | | | OSE_SERVICE\ | | | | | | _UNAUTHORIZED | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | APPLICATIO | | | | | | N_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/monitor-authorize/{discEntryId}
* * *
Table 6.1.3.3.3.1-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.3.1-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.3.2 PATCH {#patch-1 .H6}
This method shall support the URI query parameters specified in table
6.1.3.3.3.2-1.
Table 6.1.3.3.3.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.2-2 and the response data structures and response codes specified in
table 6.1.3.3.3.2-3.
Table 6.1.3.3.3.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description MonitorUpdateData M 1 Contains the Monitor
Authorization Data to update for the indicated UE and indicated discovery
entry.
* * *
Table 6.1.3.3.3.2-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon success, | | | | | | the execution | | | | | | report is | | | | | | returned. | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 422 | The \"cause\" | | roblemDetails | | | Unprocessable | attribute may | | | | | Entity | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | UNPROCESS | | | | | | ABLE_REQUEST | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | | | | | | | | NOTE 3: If | | | | | | all the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | implemented, | | | | | | the 5G DDNMF | | | | | | shall respond | | | | | | with 204 No | | | | | | Content | | | | | | response; if | | | | | | some of the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | discarded, | | | | | | and the NF | | | | | | service | | | | | | consumer has | | | | | | included in | | | | | | the | | | | | | supp | | | | | | orted-feature | | | | | | query | | | | | | parameter the | | | | | | \" | | | | | | PatchReport\" | | | | | | feature | | | | | | number, the | | | | | | 5G DDNMF | | | | | | shall respond | | | | | | with | | | | | | PatchResult. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.2-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.3.2-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.1.3.4 Resource: DiscoveryData
##### 6.1.3.4.1 Description
This resource represents the Discovery Data.
##### 6.1.3.4.2 Resource Definition
Resource URI: **{apiRoot}/n5g-ddnmf-disc/\ /{ueId}/discovery-
authorize/{discEntryId}**
This resource shall support the resource URI variables defined in table
6.1.3.4.2-1.
Table 6.1.3.4.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
ueId VarUeId Represents the Subscription Identifier SUPI or GPSI (see 3GPP TS
23.501 [2] clause 5.9.2)\ pattern: See pattern of type VarUeId in 3GPP TS
29.571 [16]
discEntryId DiscoveryEntryId Represents Discovery Entry Id.
* * *
##### 6.1.3.4.3 Resource Standard Methods
##### 6.1.3.4.3.1 PUT {#put-2 .H6}
This method shall support the URI query parameters specified in table
6.1.3.4.3.1-1.
Table 6.1.3.4.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.4.3.1-2 and the response data structures and response codes specified in
table 6.1.3.4.3.1-3.
Table 6.1.3.4.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description DiscoveryAuthReqData M 1 Contains the
Discovery Authorization Data for the indicated discoverer UE and indicated
discovery entry.
* * *
Table 6.1.3.4.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Discover | M | 1 | 201 Created | Upon success | | yAuthRespData | | | | of creation | | | | | | of the | | | | | | resource, a | | | | | | response body | | | | | | containing a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | authorized | | | | | | data for the | | | | | | discoverer UE | | | | | | in the PLMN | | | | | | to operate | | | | | | Model B | | | | | | restricted | | | | | | discovery | | | | | | shall be | | | | | | returned. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success | | | | | Content | of the update | | | | | | of the | | | | | | resource, an | | | | | | empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PR | | | | | | OSE_SERVICE\ | | | | | | _UNAUTHORIZED | | | | | | | | | | | | - | | | | | | ANNOUNCI | | | | | | NG_UNAUTHORI | | | | | | ZED_IN_PLMN | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | APPLICATIO | | | | | | N_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.4.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/discovery
-authorize/{discEntryId}
* * *
Table 6.1.3.4.3.1-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.4.3.1-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.1.3.5 Resource: UeData (Custom operation)
##### 6.1.3.5.1 Description
This resource represents the UE Data.
##### 6.1.3.5.2 Resource Definition
Resource URI: **{apiRoot}/n5g-ddnmf-disc/\ /{ueId}**
This resource shall support the resource URI variables defined in table
6.1.3.5.2-1.
Table 6.1.3.5.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
ueId VarUeId Represents the Subscription Identifier SUPI or GPSI (see 3GPP TS
23.501 [2] clause 5.9.2)\ pattern: See pattern of type VarUeId in 3GPP TS
29.571 [16]
* * *
##### 6.1.3.5.3 Resource Standard Methods
##### 6.1.3.5.4 Resource Custom Operations
No Standard Methods are supported for this resource.
##### 6.1.3.5.4.1 Overview {#overview-2 .H6}
Table 6.1.3.5.4.1-1: Custom operations
Operation name Custom operation URI Mapped HTTP method Description
* * *
match-report /{ueId}/match-report POST Obtain the information about the
indicated discovery code from the 5G DDNMF.
##### 6.1.3.5.4.2 Operation: match-report {#operation-match-report .H6}
##### 6.1.3.5.4.2.1 Description {#description-4 .H6}
This operation is used to request the 5G DDNMF to resolve a matched ProSe
Discovery Code(s) (ProSe Application Code for open discovery) and obtain the
corresponding ProSe Application ID Name(s) and additional information, e.g.
metadata.
##### 6.1.3.5.4.2.2 Operation Definition {#operation-definition .H6}
This operation shall support the request data structures specified in table
6.1.3.5.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.5.4.2.2-2.
Table 6.1.3.5.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description MatchReportReqData M 1 Contains the Match
Report information.
* * *
Table 6.1.3.5.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | MatchR | M | 1 | 200 OK | Upon success, | | eportRespData | | | | a response | | | | | | body | | | | | | containing a | | | | | | r | | | | | | epresentation | | | | | | of the Match | | | | | | Report | | | | | | Ac | | | | | | knowledgement | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same 5G DDNMF | | | | | | or 5G DDNMF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PR | | | | | | OSE_SERVICE\ | | | | | | _UNAUTHORIZED | | | | | | | | | | | | - | | | | | | ANNOUNCI | | | | | | NG_UNAUTHORI | | | | | | ZED_IN_PLMN | | | | | | | | | | | | - | | | | | | INVALID_APPL | | | | | | ICATION_CODE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.5.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.5.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same 5G | | | | | | DDNMF or 5G | | | | | | DDNMF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.1.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined for the N5g-ddnmf_Discovery Service.
### 6.1.5 Notifications
#### 6.1.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [5] and clause
4.6.2.3 of 3GPP TS 29.501 [6].
Table 6.1.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | Monit | {mon | POST | Report the | | orUpdateResult | itorUpdateResu | | monitoring | | | ltCallbackRef} | | revocation | | | | | results. | +----------------+----------------+----------------+----------------+ | Ma | {matchIn | POST | Report an | | tchInformation | foCallbackRef} | | observed | | | | | matching | | | | | result to a NF | | | | | service | | | | | consumer | +----------------+----------------+----------------+----------------+
#### 6.1.5.2 MonitorUpdateResult
##### 6.1.5.2.1 Description
The MonitorUpdateResult is used by the 5G DDNMF to report the monitoring
revocation results (e.g. 5G DDNMF)
##### 6.1.5.2.2 Target URI
The Callback URI **\"{monitorUpdateResultCallbackRef}\"** shall be used with
the callback URI variables defined in table 6.1.5.2.2-1.
Table 6.1.5.2.2-1: Callback URI variables
Name Definition
* * *
monitorUpdateResultCallbackRef String formatted as URI with the Callback Uri
##### 6.1.5.2.3 Standard Methods
##### 6.1.5.2.3.1 POST {#post .H6}
This method shall support the request data structures specified in table
6.1.5.2.3.1-1 and the response data structures and response codes specified in
table 6.1.5.2.3.1-1.
Table 6.1.5.2.3.1-2: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
MonitorUpdateResult M 1 The MonitorUpdateResult shall contain the monitoring
revocation results.
Table 6.1.5.2.3.1-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The NF | | | | | | service | | | | | | consumer | | | | | | shall | | | | | | generate a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The NF | | | | | | service | | | | | | consumer | | | | | | shall | | | | | | generate a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.2.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | A URI pointing | | | | | | to the endpoint | | | | | | of another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be sent. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.5.2.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | A URI pointing | | | | | | to the endpoint | | | | | | of another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be sent. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.1.5.3 MatchInformation
##### 6.1.5.3.1 Description
The POST method is used by the 5G DDNMF to report an observed matching result
to a NF service consumer (e.g. 5G DDNMF).
##### 6.1.5.3.2 Target URI
The Callback URI **\"{matchInfoCallbackRef}\"** shall be used with the
callback URI variables defined in table 6.1.5.3.2-1.
Table 6.1.5.3.2-1: Callback URI variables
Name Definition
* * *
matchInfoCallbackRef String formatted as URI with the Callback Uri
##### 6.1.5.3.3 Standard Methods
##### 6.1.5.3.3.1 POST {#post-1 .H6}
This method shall support the request data structures specified in table
6.1.5.3.3.1-1 and the response data structures and response codes specified in
table 6.1.5.3.3.1-1.
Table 6.1.5.3.3.1-1: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
MatchInformation M 1 The MatchInformation shall contain a matching result of
the corresponding operation.
Table 6.1.5.3.3.1-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The NF | | | | | | service | | | | | | consumer | | | | | | shall | | | | | | generate a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The NF | | | | | | service | | | | | | consumer | | | | | | shall | | | | | | generate a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of 3GPP | | | | | | TS | | | | | | 29.500 [5]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.3.3.1-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | A URI pointing | | | | | | to the endpoint | | | | | | of another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be sent. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.5.3.3.1-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | A URI pointing | | | | | | to the endpoint | | | | | | of another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be sent. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the N5g-ddnmf service
based interface protocol.
Table 6.1.6.1-1: N5g-ddnmf specific Data Types
Data type Clause defined Description Applicability
* * *
AnnounceAuthReqData 6.1.6.2.2 Represents Data used to request the
authorization to announce for a UE  
AnnounceAuthRespData 6.1.6.2.3 Represents the obtained Announce Authorize Data
for a UE  
AnnounceDiscDataForOpen 6.1.6.2.4 Represents Data for open discovery used to
request the authorization to announce for a UE  
AnnounceDiscDataForRestricted 6.1.6.2.5 Represents Data for restricted
discovery used to request the authorization to announce for a UE  
AnnounceUpdateData 6.1.6.2.6 Represents Announce Authorize Data to update.  
MonitorAuthReqData 6.1.6.2.7 Represents Data used to request the authorization
to monitor for a UE  
MonitorAuthRespData 6.1.6.2.8 Represents the obtained Monitor Authorize Data
for a UE  
MonitorDiscDataForOpen 6.1.6.2.9 Represents Data for open discovery used to
request the authorization to monitor for a UE  
MonitorDiscDataForRestricted 6.1.6.2.10 Represents Data for restricted
discovery used to request the authorization to monitor for a UE  
MonitorAuthDataForOpen 6.1.6.2.11 Represents the obtained Announce Authorize
Data for open discovery for a UE  
MonitorAuthDataForRestricted 6.1.6.2.12 Represents the obtained Announce
Authorize Data for restricted discovery for a UE  
MonitorUpdateData 6.1.6.2.13 Represents Monitor Authorize Data to update.  
DiscoveryAuthReqData 6.1.6.2.14 Represents Data used to request the
authorization for a discoverer UE  
DiscoveryAuthRespData 6.1.6.2.15 Represents the obtained authorization Data
for a discoverer UE.  
DiscDataForRestricted 6.1.6.2.16 Represents Data for restricted discovery used
to request the authorization for a discoverer UE  
AuthDataForRestricted 6.1.6.2.17 Represents obtained authorization Data for
restricted discovery for a discoverer UE  
MatchReportReqData 6.1.6.2.18 Represents the Match Report information  
MatchReportRespData 6.1.6.2.19 Represents Match Report Acknowledgement  
MonitorUpdateResult 6.1.6.2.20 Represents the monitoring revocation results.  
MatchInformation 6.1.6.2.21 Represents a report including a matching result,
and the information that can be used for charging purpose  
MatchInfoForOpen 6.1.6.2.22 Represents a report including a matching result,
and the information that can be used for charging purpose for the open
discovery type.  
MatchInfoForRestricted 6.1.6.2.23 Represents a report including a matching
result, and the information that can be used for charging purpose for the
restricted discovery type.  
RestrictedCodeSuffixPool 6.1.6.2.24 Contains the Restricted Code Suffix Pool.  
RestrictedCodeSuffixRange 6.1.6.2.25 Contains a range of the Restricted Code
Suffixes which are consecutive.  
ProseApplicationCodeSuffixPool 6.1.6.2.26 Contains the Prose Application Code
Suffix Pool.  
ProseAppCodeSuffixRange 6.1.6.2.27 Contains a range of the Prose Application
Code Suffixes which are consecutive.  
MonitorUpdateDataForOpen 6.1.6.2.28 Represents Monitor Update Data for the
Discovery Type \"OPEN\"  
MonitorUpdateDataForRestricted 6.1.6.2.29 Represents Monitor Update Data for
the Discovery Type \"RESTRICTED\".  
DiscoveryType 6.1.6.3.3 Represents Discovery Type for ProSe Service  
AuthorizationResult 6.1.6.3.4 Represents Authorization Result Type for ProSe
Service  
RevocationResult 6.1.6.3.5 Represents the monitoring Revocation Result for
ProSe Service
Table 6.1.6.1-2 specifies data types re-used by the N5g-ddnmf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the N~\~ service based interface.
Table 6.1.6.1-2: N5g-ddnmf re-used Data Types
Data type Reference Comments Applicability
* * *
VarUeId 3GPP TS 29.571 [16] String represents the SUPI or GPSI.  
DateTime 3GPP TS 29.571 [16] DataTime  
PlmnId 3GPP TS 29.571 [16] Plmn ID  
Supi 3GPP TS 29.571 [16] SUPI  
Uri 3GPP TS 29.571 [16] URI  
ProblemDetails 3GPP TS 29.571 [16]
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: AnnounceAuthReqData
Table 6.1.6.2.2-1: Definition of type AnnounceAuthReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | +-----------+-----------+---+-----------+-----------+-----------+ | ope | Annou | C | 0..1 | This IE | | | nDiscData | nceDiscDa | | | shall | | | | taForOpen | | | contain | | | | | | | the input | | | | | | | data of | | | | | | | announce | | | | | | | auth | | | | | | | orisation | | | | | | | for open | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | restricte | An | C | 0..1 | This IE | | | dDiscData | nounceDis | | | shall | | | | cDataForR | | | contain | | | | estricted | | | the input | | | | | | | data of | | | | | | | announce | | | | | | | auth | | | | | | | orisation | | | | | | | for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.3 Void
##### 6.1.6.2.4 Type: AnnounceDiscDataForOpen
Table 6.1.6.2.4-1: Definition of type AnnounceDiscDataForOpen
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | p | ProseAppl | M | 1 | This IE | | | roseAppId | icationId | | | shall | | | | | | | contain | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | ID. | | +-----------+-----------+---+-----------+-----------+-----------+ | vali | DateTime | M | 1 | This IE | | | dityTimer | | | | shall | | | | | | | contain | | | | | | | validity | | | | | | | timer up | | | | | | | to which | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code is | | | | | | | going to | | | | | | | expire. | | +-----------+-----------+---+-----------+-----------+-----------+ | pro | Pr | C | 0..1 | When | | | seAppCode | oseApplic | | | present, | | | | ationCode | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | proseAppC | Pros | C | 0..1 | When | | | odePrefix | eApplicat | | | present, | | | | ionPrefix | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code | | | | | | | Prefix. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | pros | Pro | O | 0..1 | This IE | | | eAppCodeS | seApplica | | | shall | | | uffixPool | tionCodeS | | | contain | | | | uffixPool | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code | | | | | | | Suffix | | | | | | | pool when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | metaData | MetaData | O | 0..1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | metadata | | | | | | | when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | attribute | | | | | | | pro | | | | | | | seAppCode | | | | | | | or | | | | | | | attribute | | | | | | | proseAppC | | | | | | | odePrefix | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.5 Type: AnnounceDiscDataForRestricted
Table 6.1.6.2.5-1: Definition of type AnnounceDiscDataForRestricted
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | rpauid | Rpauid | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | RPAUID. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | Appl | M | 1 | This IE | | | | icationId | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Ap | | | | | | | plication | | | | | | | ID | | +-----------+-----------+---+-----------+-----------+-----------+ | vali | DateTime | M | 1 | This IE | | | dityTimer | | | | shall | | | | | | | contain | | | | | | | validity | | | | | | | timer up | | | | | | | to which | | | | | | | the ProSe | | | | | | | R | | | | | | | estricted | | | | | | | Code is | | | | | | | going to | | | | | | | expire. | | | | | | | | | | | | | | If the | | | | | | | value | | | | | | | sets to a | | | | | | | full zero | | | | | | | (i.e., | | | | | | | 000 | | | | | | | 0-00-00T0 | | | | | | | 0:00:00), | | | | | | | it | | | | | | | indicates | | | | | | | to | | | | | | | removes | | | | | | | the | | | | | | | resources | | | | | | | indicated | | | | | | | by the | | | | | | | Discovery | | | | | | | Entry ID | | | | | | | for the | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | P | C | 0..1 | This IE | | | roseRestr | roseRestr | | | shall | | | ictedCode | ictedCode | | | contain | | | | | | | the ProSe | | | | | | | R | | | | | | | estricted | | | | | | | Code when | | | | | | | present. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | pro | Pro | C | 0..1 | This IE | | | seRestric | seRestric | | | shall | | | tedPrefix | tedPrefix | | | contain | | | | | | | the ProSe | | | | | | | R | | | | | | | estricted | | | | | | | Code | | | | | | | Prefix | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | codeS | Restri | O | 0..1 | This IE | | | uffixPool | ctedCodeS | | | shall | | | | uffixPool | | | contain | | | | | | | the | | | | | | | R | | | | | | | estricted | | | | | | | Code | | | | | | | Suffix | | | | | | | pool when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | attribute | | | | | | | p | | | | | | | roseRestr | | | | | | | ictedCode | | | | | | | or | | | | | | | attribute | | | | | | | pro | | | | | | | seRestric | | | | | | | tedPrefix | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.6 Type: AnnounceUpdateData
Table 6.1.6.2.6-1: Definition of type AnnounceUpdateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service, | | | | | | | only | | | | | | | value | | | | | | | \"OPEN\" | | | | | | | is | | | | | | | allowed. | | +-----------+-----------+---+-----------+-----------+-----------+ | val | DateTime | M | 1 | This IE | | | idityTime | | | | shall | | | | | | | contain | | | | | | | validity | | | | | | | timer up | | | | | | | to which | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code is | | | | | | | going to | | | | | | | expire. | | | | | | | | | | | | | | If the | | | | | | | value | | | | | | | sets to a | | | | | | | full zero | | | | | | | (i.e., | | | | | | | 000 | | | | | | | 0-00-00T0 | | | | | | | 0:00:00), | | | | | | | it | | | | | | | indicates | | | | | | | to revoke | | | | | | | the | | | | | | | auth | | | | | | | orization | | | | | | | for the | | | | | | | a | | | | | | | nnouncing | | | | | | | in the | | | | | | | PLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | pro | Pr | C | 0..1 | This IE | | | seAppCode | oseApplic | | | shall | | | | ationCode | | | contain | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code is | | | | | | | changed, | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | attribute | | | | | | | is a full | | | | | | | zero, | | | | | | | this IE | | | | | | | shall be | | | | | | | absent. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.7 Type: MonitorAuthReqData
Table 6.1.6.2.7-1: Definition of type MonitorAuthReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | +-----------+-----------+---+-----------+-----------+-----------+ | ope | Moni | C | 0..1 | This IE | | | nDiscData | torDiscDa | | | shall | | | | taForOpen | | | contain | | | | | | | the input | | | | | | | data of | | | | | | | monitor | | | | | | | auth | | | | | | | orisation | | | | | | | for open | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | restricte | M | C | 0..1 | This IE | | | dDiscData | onitorDis | | | shall | | | | cDataForR | | | contain | | | | estricted | | | the input | | | | | | | data of | | | | | | | monitor | | | | | | | auth | | | | | | | orisation | | | | | | | for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.8 Type: MonitorAuthRespData
Table 6.1.6.2.8-1: Definition of type MonitorAuthRespData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | aut | Moni | C | 0..1 | This IE | | | hDataOpen | torAuthDa | | | shall | | | | taForOpen | | | contain a | | | | | | | list of | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Codes | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | discovery | | | | | | | type is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | authDataR | M | C | 0..1 | This IE | | | estricted | onitorAut | | | shall | | | | hDataForR | | | contain | | | | estricted | | | the Prose | | | | | | | Ap | | | | | | | plication | | | | | | | Prefix | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | discovery | | | | | | | type in | | | | | | | request | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.9 Type: MonitorDiscDataForOpen
Table 6.1.6.2.9-1: Definition of type MonitorDiscDataForOpen
Attribute name Data type P Cardinality Description Applicability
* * *
proseAppIdNames array(ProseApplicationIdName) M 1..N This IE shall contain a
list of ProSe Application ID names.
##### 6.1.6.2.10 Type: MonitorDiscDataForRestricted
Table 6.1.6.2.10-1: Definition of type MonitorDiscDataForRestricted
Attribute name Data type P Cardinality Description Applicability
* * *
rpauid Rpauid M 1 This IE shall contain the RPAUID.  
targetPduid Pduid M 1 This IE shall contain the Target PDUID.  
appId ApplicationId M 1 This IE shall contain the Application ID  
targetRpauid Rpauid M 1 This IE shall contain the Target RPAUID.
##### 6.1.6.2.11 Type: MonitorAuthDataForOpen
Table 6.1.6.2.11-1: Definition of type MonitorAuthDataForOpen
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | pros | array(Pro | C | 1..N | This IE | | | eAppCodes | seApplica | | | shall | | | | tionCode) | | | contain a | | | | | | | list of | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Codes. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | prose | Pros | C | 0..1 | This IE | | | AppPrefix | eApplicat | | | shall | | | | ionPrefix | | | contain | | | | | | | the Prose | | | | | | | Ap | | | | | | | plication | | | | | | | Prefix. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | pros | array(Pro | M | 1..N | This IE | | | eAppMasks | seApplica | | | shall | | | | tionMask) | | | contain a | | | | | | | list of | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Masks. | | +-----------+-----------+---+-----------+-----------+-----------+ | ttl | integer | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the TTL. | | | | | | | | | | | | | | If the | | | | | | | value | | | | | | | sets to | | | | | | | zero, it | | | | | | | indicates | | | | | | | to revoke | | | | | | | the | | | | | | | auth | | | | | | | orization | | | | | | | for the | | | | | | | m | | | | | | | onitoring | | | | | | | in the | | | | | | | PLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | attribute | | | | | | | pros | | | | | | | eAppCodes | | | | | | | or | | | | | | | prose | | | | | | | AppPrefix | | | | | | | pro | | | | | | | seRestric | | | | | | | tedPrefix | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | discovery | | | | | | | type is | | | | | | | open. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.12 Type: MonitorAuthDataForRestricted
Table 6.1.6.2.12-1: Definition of type MonitorAuthDataForRestricted
Attribute name Data type P Cardinality Description Applicability
* * *
proseRestrictedCode ProseRestrictedCode M 1 This IE shall contain the ProSe
Restricted Code.  
validityTime DateTime M 1 This IE shall contain validity timer up to which the
ProSe Application Code is going to expire.
##### 6.1.6.2.13 Type: MonitorUpdateData
Table 6.1.6.2.13-1: Definition of type MonitorUpdateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | +-----------+-----------+---+-----------+-----------+-----------+ | openU | Monito | C | 0..1 | This IE | | | pdateData | rUpdateDa | | | shall | | | | taForOpen | | | contain | | | | | | | the | | | | | | | Monitor | | | | | | | Update | | | | | | | Data for | | | | | | | open | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | re | Mon | C | 0..1 | This IE | | | strictedU | itorUpdat | | | shall | | | pdateData | eDataForR | | | contain | | | | estricted | | | the | | | | | | | Monitor | | | | | | | Update | | | | | | | Data for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.14 Type: DiscoveryAuthReqData
Table 6.1.6.2.14-1: Definition of type DiscoveryAuthReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | | | | | | | | | | | | | Only | | | | | | | value | | | | | | | \"RES | | | | | | | TRICTED\" | | | | | | | is | | | | | | | allowed. | | +-----------+-----------+---+-----------+-----------+-----------+ | restricte | Dis | C | 0..1 | This IE | | | dDiscData | cDataForR | | | shall | | | | estricted | | | contain | | | | | | | the input | | | | | | | data of | | | | | | | auth | | | | | | | orisation | | | | | | | for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.15 Type: DiscoveryAuthRespData
Table 6.1.6.2.15-1: Definition of type DiscoveryAuthRespData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | authDataR | Aut | C | 0..1 | This IE | | | estricted | hDataForR | | | shall | | | | estricted | | | contain | | | | | | | the | | | | | | | a | | | | | | | uthorized | | | | | | | data for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | discovery | | | | | | | type in | | | | | | | request | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.16 Type: DiscDataForRestricted
Table 6.1.6.2.16-1: Definition of type DiscDataForRestricted
Attribute name Data type P Cardinality Description Applicability
* * *
rpauid Rpauid M 1 This IE shall contain the RPAUID.  
targetPduid Pduid M 1 This IE shall contain the Target PDUID.  
appId ApplicationId M 1 This IE shall contain the Application ID  
targetRpauid Rpauid M 1 This IE shall contain the Target RPAUID.
##### 6.1.6.2.17 Type: AuthDataForRestricted
Table 6.1.6.2.17-1: Definition of type AuthDataForRestricted
Attribute name Data type P Cardinality Description Applicability
* * *
proseQueryCodes array(ProseQueryCode) M 1..N This IE shall contain a list of
the authorised ProSe Restricted Code.  
proseRespCode ProseResponseCode M 1 This IE shall contain the authorised ProSe
Respond Code.  
validityTime DateTime M 1 This IE shall contain validity timer up to which the
ProSe Application Code is going to expire.
##### 6.1.6.2.18 Type: MatchReportReqData
Table 6.1.6.2.18-1: Definition of type MatchReportReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | | | | | | | | | | | | | Only | | | | | | | value | | | | | | | \"OPEN\" | | | | | | | is | | | | | | | allowed. | | +-----------+-----------+---+-----------+-----------+-----------+ | pros | array(Pro | C | 1..N | This IE | | | eAppCodes | seApplica | | | shall | | | | tionCode) | | | contain a | | | | | | | list of | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Codes | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | Disc | | | | | | | overyType | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | monite | PlmnId | C | 0..1 | This IE | | | redPlmnId | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Monitored | | | | | | | PLMN ID | | | | | | | when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.19 Type: MatchReportRespData
Table 6.1.6.2.19-1: Definition of type MatchReportRespData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | proseA | ar | C | 1..N | This IE | | | ppIdNames | ray(Prose | | | shall | | | | Applicati | | | contain a | | | | onIdName) | | | list of | | | | | | | ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | ID names | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | discovery | | | | | | | type in | | | | | | | the | | | | | | | request | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | val | DateTime | C | 0..1 | This IE | | | idityTime | | | | shall | | | | | | | contain | | | | | | | validity | | | | | | | timer up | | | | | | | to which | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | Code is | | | | | | | going to | | | | | | | expire | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | discovery | | | | | | | type in | | | | | | | the | | | | | | | request | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | metaData | MetaData | O | 0..1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | metadata | | | | | | | when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | metaDataI | array( | O | 1..N | This IE | | | ndexMasks | MetaDataI | | | shall | | | | ndexMask) | | | contain a | | | | | | | list of | | | | | | | the Meta | | | | | | | Data | | | | | | | Index | | | | | | | Masks | | | | | | | when | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.20 Type: MonitorUpdateResult
Table 6.1.6.2.20-1: Definition of type MonitorUpdateResult
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | | | | | | | | | | | | | Only | | | | | | | value | | | | | | | \"RES | | | | | | | TRICTED\" | | | | | | | is | | | | | | | allowed. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | P | M | 1 | This IE | | | roseRestr | roseRestr | | | shall | | | ictedCode | ictedCode | | | contain | | | | | | | the ProSe | | | | | | | R | | | | | | | estricted | | | | | | | Code. | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | Appl | M | 1 | This IE | | | | icationId | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Ap | | | | | | | plication | | | | | | | ID | | +-----------+-----------+---+-----------+-----------+-----------+ | ban | Rpauid | M | 1 | This IE | | | nedRpauid | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Banned | | | | | | | RPAUID. | | +-----------+-----------+---+-----------+-----------+-----------+ | ba | Pduid | M | 1 | This IE | | | nnedPduid | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Banned | | | | | | | PDUID. | | +-----------+-----------+---+-----------+-----------+-----------+ | revocat | Revocat | M | 1 | This IE | | | ionResult | ionResult | | | shall | | | | | | | contain | | | | | | | the | | | | | | | m | | | | | | | onitoring | | | | | | | r | | | | | | | evocation | | | | | | | results. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.21 Type: MatchInformation
Table 6.1.6.2.21-1: Definition of type MatchInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | discType | Disc | M | 1 | This IE | | | | overyType | | | shall | | | | | | | contain | | | | | | | the | | | | | | | discovery | | | | | | | type for | | | | | | | ProSe | | | | | | | Service. | | +-----------+-----------+---+-----------+-----------+-----------+ | op | MatchIn | C | 0..1 | This IE | | | enMatchIn | foForOpen | | | shall | | | foForOpen | | | | contain | | | | | | | the match | | | | | | | report | | | | | | | in | | | | | | | formation | | | | | | | for open | | | | | | | discovery | | | | | | | type when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"OPEN\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | r | Matc | C | 0..1 | This IE | | | estricted | hInfoForR | | | shall | | | MatchInfo | estricted | | | contain | | | | | | | the match | | | | | | | report | | | | | | | in | | | | | | | formation | | | | | | | for | | | | | | | r | | | | | | | estricted | | | | | | | discovery | | | | | | | when | | | | | | | present. | | | | | | | | | | | | | | If the | | | | | | | value of | | | | | | | discType | | | | | | | is | | | | | | | \"REST | | | | | | | RICTED\", | | | | | | | this IE | | | | | | | shall be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.22 Type: MatchInfoForOpen
Table 6.1.6.2.22-1: Definition of type MatchInfoForOpen
Attribute name Data type P Cardinality Description Applicability
* * *
supi Supi M 1 This IE shall contain the SUPI of UE.  
appId array(ApplicationId) M 1 This IE shall contain a list of the Application
IDs.
##### 6.1.6.2.23 Type: MatchInfoForRestricted
Table 6.1.6.2.23-1: Definition of type MatchInfoForRestricted
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | supi | Supi | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the SUPI | | | | | | | of UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | rpauid | Rpauid | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | | | | | | | | RPAUID. | | +-----------+-----------+---+-----------+-----------+-----------+ | tar | Rpauid | M | 1 | This IE | | | getRpauid | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Target | | | | | | | RPAUID. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | P | M | 1 | This IE | | | roseRestr | roseRestr | | | shall | | | ictedCode | ictedCode | | | contain | | | | | | | the ProSe | | | | | | | R | | | | | | | estricted | | | | | | | Code. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.24 Type: RestrictedCodeSuffixPool
Table 6.1.6.2.24-1: Definition of type RestrictedCodeSuffixPool
Attribute name Data type P Cardinality Description Applicability
* * *
codeSuffixList array(RestrictedCodeSuffix) C 1..N This IE shall contain a list
of the Restricted Code Suffixes  
codeSuffixRangeList array(RestrictedCodeSuffixRange) C 1..N This IE shall
contain a list of ranges of the Restricted Code Suffix.  
NOTE: At least one of attributes codeSuffixList and codeSuffixRangeList shall
be present.
##### 6.1.6.2.25 Type: RestrictedCodeSuffixRange
Table 6.1.6.2.25-1: Definition of type RestrictedCodeSuffixRange
Attribute name Data type P Cardinality Description Applicability
* * *
beginningSuffix RestrictedCodeSuffix M 1 This IE shall contain the lowest
ProSe Restricted Code Suffix in a consecutive sequence of ProSe Restricted
Code suffixes.  
endingSuffix RestrictedCodeSuffix M 1 This IE shall contain the highest ProSe
Restricted Code Suffix in a consecutive sequence of ProSe Restricted Code
suffixes.
##### 6.1.6.2.26 Type: ProseApplicationCodeSuffixPool
Table 6.1.6.2.26-1: Definition of type ProseApplicationCodeSuffixPool
Attribute name Data type P Cardinality Description Applicability
* * *
codeSuffix ProseAppCodeSuffix C 0..1 This IE shall contain the ProSe
Application Code Suffix.  
codeSuffixRange ProseAppCodeSuffixRange C 0..1 This IE shall contain the range
of the ProSe Application Code Suffix.  
NOTE: At least one of attributes codeSuffix and codeSuffixRange shall be
present.
##### 6.1.6.2.27 Type: ProseAppCodeSuffixRange
Table 6.1.6.2.27-1: Definition of type ProseAppCodeSuffixRange
Attribute name Data type P Cardinality Description Applicability
* * *
beginningSuffix ProseAppCodeSuffix M 1 This IE shall contain the lowest ProSe
Restricted Code Suffix in a consecutive sequence of ProSe Restricted Code
suffixes.  
endingSuffix ProseAppCodeSuffix M 1 This IE shall contain the highest ProSe
Restricted Code Suffix in a consecutive sequence of ProSe Restricted Code
suffixes.
##### 6.1.6.2.28 Type: MonitorUpdateDataForOpen
Table 6.1.6.2.28-1: Definition of type MonitorUpdateDataForOpen
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | prose | Pros | M | 1 | This IE | | | AppIdName | eApplicat | | | shall | | | | ionIdName | | | contain | | | | | | | the ProSe | | | | | | | Ap | | | | | | | plication | | | | | | | ID Name. | | +-----------+-----------+---+-----------+-----------+-----------+ | ttl | integer | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the TTL. | | | | | | | | | | | | | | If it | | | | | | | sets to | | | | | | | zero, it | | | | | | | indicates | | | | | | | to revoke | | | | | | | the | | | | | | | p | | | | | | | reviously | | | | | | | a | | | | | | | uthorized | | | | | | | mo | | | | | | | nitoring. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.29 Type: MonitorUpdateDataForRestricted
Table 6.1.6.2.29-1: Definition of type MonitorUpdateDataForRestricted
Attribute name Data type P Cardinality Description Applicability
* * *
proseRestrictedCode ProseRestrictedCode M 1 This IE shall contain the ProSe
Restricted Code.  
appId ApplicationId M 1 This IE shall contain the Application ID  
bannedRpauid Rpauid M 1 This IE shall contain the Banned RPAUID.  
bannedPduid Pduid M 1 This IE shall contain the Banned PDUID.  
monitorUpdateResultCallbackRef Uri O 0..1 A URI provided by 5G DDNMF to
receive (implicitly subscribed) notifications on the monitoring revocation
results.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability DiscoveryEntryId string
Discovery Entry ID  
ProseApplicationId string ProSe Application ID, the format of ProSe
Application ID is defined in 3GPP TS 23.003 [17]  
ProseApplicationCode string ProSe Application Code, the format of ProSe
Application Code is defined in 3GPP TS 23.003 [17]  
Rpauid string RPAUID  
ApplicationId string Application ID  
ProseRestrictedCode string ProSe Restricted Code, the format of ProSe
Restricted Code is defined in 3GPP TS 23.003 [17]  
ProseRestrictedPrefix string ProSe Restricted Code Prefix, the format of ProSe
Restricted Code Prefix is defined in 3GPP TS 23.003 [17]  
MetaData string metadata  
ProseApplicationIdName string ProSe Application ID name, the format of ProSe
Application ID name is defined in 3GPP TS 23.003 [17]  
Pduid string PDUID  
ProseApplicationPrefix string Prose Application Code Prefix, the format of
Prose Application Code Prefix is defined in 3GPP TS 23.003 [17]  
ProseApplicationMask string Prose Application Mask  
ProseQueryCode string ProSe Query Code, the format of ProSe Query Code is
defined in 3GPP TS 23.003 [17]  
ProseResponseCode string ProSe Response Code, the format of ProSe Response
Code is defined in 3GPP TS 23.003 [17]  
MetaDataIndexMask string Meta Data Index Mask  
RestrictedCodeSuffix string ProSe Restricted Code Suffix, the format of ProSe
Restricted Code Suffix is defined in 3GPP TS 23.003 [17]  
ProseAppCodeSuffix string ProSe Application Code Suffix, the format of ProSe
Restricted Code Suffix is defined in 3GPP TS 23.003 [17]
* * *
##### 6.1.6.3.3 Enumeration: DiscoveryType
The enumeration DiscoveryType represents Discovery Type for ProSe Service. It
shall comply with the provisions defined in table 6.1.6.3.3-1.
Table 6.1.6.3.3-1: Enumeration DiscoveryType
Enumeration value Description Applicability
* * *
\"OPEN\" Discovery type is \"open\".  
\"RESTRICTED\" Discovery type is \"restricted\".
##### 6.1.6.3.4 Void
##### 6.1.6.3.5 Enumeration: RevocationResult
The enumeration RevocationResult represents the monitoring Revocation Result
for ProSe Service. It shall comply with the provisions defined in table
6.1.6.3.5-1.
Table 6.1.6.3.5-1: Enumeration RevocationResult
Enumeration value Description Applicability
* * *
\"SUCCESSFUL\" The Monitoring Revocation is successful.  
\"FAILED\" The Monitoring Revocation is failed.
#### 6.1.6.4 Data types describing alternative data types or combinations of
data types
None.
#### 6.1.6.5 Binary data
None.
### 6.1.7 Error Handling
#### 6.1.7.1 General
For the N5g-ddnmf_Discovery API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [6]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [5] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [5].
In addition, the requirements in the following clauses are applicable for the
N5g-ddnmf_Discovery API.
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [5].
#### 6.1.7.3 Application Errors
The application errors defined for the N5g-ddnmf_Discovery service are listed
in Table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
PROSE_SERVICE_UNAUTHORIZED 403 Forbidden It is used when the requested ProSe
service is not authorized for this UE Identity.
ANNOUNCING_UNAUTHORIZED_IN_PLMN 403 Forbidden It is used when the ProSe
Application Code received is not authorized to be announced in the indicated
monitored/announcing PLMN for the specified PC5 radio technology
INVALID_APPLICATION_CODE 403 Forbidden It is used when none of the requested
ProSe Application Code(s) is valid CONTEXT_NOT_FOUND 404 Not Found It is used
when no corresponding context exists. APPLICATION_NOT_FOUND 404 Not Found It
is used when the requested ProSe Application doesn\'t exist
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the N5g-ddnmf_Discovery
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [5].
Table 6.1.8-1: Supported Features
Feature number Feature Name Description
* * *
1 PatchReport If some of the modifications included in the PATCH request are
not successfully implemented, the UDM reports the result of PATCH request
execution to the consumer. See clause 5.2.7.2 of 3GPP TS 29.500 [5].
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [11] and 3GPP TS 29.500 [5], the access to the
N5g-ddnmf_Discovery API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [12]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [13])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the N5g-ddnmf_Discovery API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [13], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the N5g-ddnmf_Discovery service.
The N5g-ddnmf_Discovery API defines a single scope \"n5g-ddnmf_discovery\" for
OAuth2 authorization (as specified in 3GPP TS 33.501 [11] for the entire
service, and it does not define any additional scopes at resource or operation
level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different 5G DDNMF service instance,
within the same 5G DDNMF or a different 5G DDNMF of an 5G DDNMF set, e.g. when
an 5G DDNMF service instance is part of an 5G DDNMF (service) set or when
using indirect communications (see 3GPP TS 29.500 [5]).
An SCP that reselects a different 5G DDNMF producer instance will return the
NF Instance ID of the new 5G DDNMF producer instance in the 3gpp-Sbi-Producer-
Id header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [5].
If an 5G DDNMF within an 5G DDNMF set redirects a service request to a
different 5G DDNMF of the set using an 307 Temporary Redirect or 308 Permanent
Redirect status code, the identity of the new 5G DDNMF towards which the
service request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id
header of the 307 Temporary Redirect or 308 Permanent Redirect response as
specified in clause 6.10.9.1 of 3GPP TS 29.500 [5].
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI 3.0.0 specifications in YAML
format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5.3.1 of 3GPP TS 29.501 [6]
and clause 5B of 3GPP TR 21.900 [14]).
# A.2 N5g-ddnmf_Discovery API
openapi: 3.0.0
info:
title: N5g-ddnmf_Discovery API
version: \'1.0.0\'
description: \|
N5g-ddnmf_Discovery Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.555 V17.1.0; 5G System; 5G Direct Discovery Name
Management Services; Stage 3.
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.555/
servers:
\- url: \'{apiRoot}/n5g-ddnmf-disc/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- n5g-ddnmf-disc
paths:
/{ueId}/announce-authorize/{discEntryId}:
put:
summary: Obtain the authorization to announce for a UE
operationId: ObtainAnnounceAuth
tags:
\- Obtain the authorization to announce for a UE
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
\- name: discEntryId
in: path
description: Discovery Entry Id
required: true
schema:
\$ref: \'#/components/schemas/DiscoveryEntryId\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/AnnounceAuthReqData\'
required: true
responses:
\'201\':
description: Successful creation of the resource
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/announce-
authorize/{discEntryId}
required: true
schema:
type: string
\'204\':
description: Successful update of the resource.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: Update the authorization for announcing for a UE
operationId: UpdateAnnounceAuth
tags:
\- Update the authorization for announcing for a UE
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
\- name: discEntryId
in: path
description: Discovery Entry Id
required: true
schema:
\$ref: \'#/components/schemas/DiscoveryEntryId\'
requestBody:
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/AnnounceUpdateData\'
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Expected response to a valid request
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'422\':
description: Unprocessable Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/monitor-authorize/{discEntryId}:
put:
summary: Obtain the authorization to monitor for a UE
operationId: ObtainMonitorAuth
tags:
\- Obtain the authorization to monitor for a UE
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
\- name: discEntryId
in: path
description: Discovery Entry Id
required: true
schema:
\$ref: \'#/components/schemas/DiscoveryEntryId\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/MonitorAuthReqData\'
required: true
responses:
\'201\':
description: Created
content:
application/json:
schema:
\$ref: \'#/components/schemas/MonitorAuthRespData\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/monitor-authorize/{discEntryId}
required: true
schema:
type: string
\'204\':
description: Successful update of the resource.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: Update the authorization for monitoring for a UE
operationId: UpdateMonitorAuth
tags:
\- Update the authorization for monitoring for a UE
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
\- name: discEntryId
in: path
description: Discovery Entry Id
required: true
schema:
\$ref: \'#/components/schemas/DiscoveryEntryId\'
requestBody:
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/MonitorUpdateData\'
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Expected response to a valid request
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'422\':
description: Unprocessable Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
callbacks:
onMonitorUpdateResult:
\'{request.body#/monitorUpdateResultCallbackRef}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/MonitorUpdateResult\'
responses:
\'204\':
description: Successful Notification response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
onMatchInformation:
\'{request.body#/matchInfoCallbackRef}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/MatchInformation\'
responses:
\'204\':
description: Successful Notification response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/discovery-authorize/{discEntryId}:
put:
summary: Obtain the authorization from the 5G DDNMF for a discoverer UE in the
PLMN to operate Model B restricted discovery
operationId: ObtainDiscAuth
tags:
\- Obtain the authorization for a discoverer UE
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
\- name: discEntryId
in: path
description: Discovery Entry Id
required: true
schema:
\$ref: \'#/components/schemas/DiscoveryEntryId\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/DiscoveryAuthReqData\'
required: true
responses:
\'201\':
description: Created
content:
application/json:
schema:
\$ref: \'#/components/schemas/DiscoveryAuthRespData\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure:
{apiRoot}/n5g-ddnmf-disc>/\/{ueId}/discovery-
authorize/{discEntryId}
required: true
schema:
type: string
\'204\':
description: Successful update of the resource.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
callbacks:
onMatchInformation:
\'{request.body#/matchInfoCallbackRef}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/MatchInformation\'
responses:
\'204\':
description: Successful Notification response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/match-report:
post:
summary: Obtain the information about the indicated discovery code from the 5G
DDNMF
operationId: MatchReport
tags:
\- Obtain the information about the indicated discovery code
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/VarUeId\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/MatchReportReqData\'
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/MatchReportRespData\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
n5g-ddnmf-disc: Access to the N5g-ddnmf_Discovery API
schemas:
# COMPLEX TYPES:
AnnounceAuthReqData:
type: object
description: Represents Data used to request the authorization to announce for
a UE
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
openDiscData:
\$ref: \'#/components/schemas/AnnounceDiscDataForOpen\'
restrictedDiscData:
\$ref: \'#/components/schemas/AnnounceDiscDataForRestricted\'
AnnounceDiscDataForOpen:
type: object
description: Represents Data for open discovery used to request the
authorization to announce for a UE
required:
\- proseAppId
\- validityTime
properties:
proseAppId:
\$ref: \'#/components/schemas/ProseApplicationId\'
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
proseAppCode:
\$ref: \'#/components/schemas/ProseApplicationCode\'
proseAppCodePrefix:
\$ref: \'#/components/schemas/ProseApplicationPrefix\'
proseAppCodeSuffixPool:
\$ref: \'#/components/schemas/ProseApplicationCodeSuffixPool\'
metaData:
\$ref: \'#/components/schemas/MetaData\'
AnnounceDiscDataForRestricted:
type: object
description: Represents Data for restricted discovery used to request the
authorization to announce for a UE
required:
\- rpauid
\- appId
\- validityTime
properties:
rpauid:
\$ref: \'#/components/schemas/Rpauid\'
appId:
\$ref: \'#/components/schemas/ApplicationId\'
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
proseRestrictedCode:
\$ref: \'#/components/schemas/ProseRestrictedCode\'
proseRestrictedPrefix:
\$ref: \'#/components/schemas/ProseRestrictedPrefix\'
codeSuffixPool:
\$ref: \'#/components/schemas/RestrictedCodeSuffixPool\'
AnnounceUpdateData:
type: object
description: Represents Announce Authorize Data to update
required:
\- discType
\- validityTime
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
proseAppCode:
\$ref: \'#/components/schemas/ProseApplicationCode\'
MonitorAuthReqData:
type: object
description: Represents Data used to request the authorization to monitor for
a UE
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
openDiscData:
\$ref: \'#/components/schemas/MonitorDiscDataForOpen\'
restrictedDiscData:
\$ref: \'#/components/schemas/MonitorDiscDataForRestricted\'
MonitorAuthRespData:
type: object
description: Represents the obtained Monitor Authorize Data for a UE
properties:
authDataOpen:
\$ref: \'#/components/schemas/MonitorAuthDataForOpen\'
authDataRestricted:
\$ref: \'#/components/schemas/MonitorAuthDataForRestricted\'
MonitorDiscDataForOpen:
type: object
description: Represents Data for open discovery used to request the
authorization to monitor for a UE
required:
\- proseAppIdNames
properties:
proseAppIdNames:
type: array
items:
\$ref: \'#/components/schemas/ProseApplicationIdName\'
minItems: 1
MonitorDiscDataForRestricted:
type: object
description: Represents Data for restricted discovery used to request the
authorization to monitor for a UE
required:
\- rpauid
\- targetPduid
\- appId
\- targetRpauid
properties:
rpauid:
\$ref: \'#/components/schemas/Rpauid\'
targetPduid:
\$ref: \'#/components/schemas/Pduid\'
appId:
\$ref: \'#/components/schemas/ApplicationId\'
targetRpauid:
\$ref: \'#/components/schemas/Rpauid\'
MonitorAuthDataForOpen:
type: object
description: Represents the obtained Announce Authorize Data for open
discovery for a UE
required:
\- proseAppMasks
\- ttl
properties:
proseAppCodes:
type: array
items:
\$ref: \'#/components/schemas/ProseApplicationCode\'
minItems: 1
proseAppPrefix:
\$ref: \'#/components/schemas/ProseApplicationPrefix\'
proseAppMasks:
type: array
items:
\$ref: \'#/components/schemas/ProseApplicationMask\'
minItems: 1
ttl:
type: integer
MonitorAuthDataForRestricted:
type: object
description: Represents the obtained Announce Authorize Data for restricted
discovery for a UE
required:
\- proseRestrictedCode
\- validityTime
properties:
proseRestrictedCode:
\$ref: \'#/components/schemas/ProseRestrictedCode\'
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
MonitorUpdateData:
type: object
description: Represents Monitor Authorize Data to update.
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
openUpdateData:
\$ref: \'#/components/schemas/MonitorUpdateDataForOpen\'
restrictedUpdateData:
\$ref: \'#/components/schemas/MonitorUpdateDataForRestricted\'
DiscoveryAuthReqData:
type: object
description: Represents Data used to request the authorization for a
discoverer UE.
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
restrictedDiscData:
\$ref: \'#/components/schemas/DiscDataForRestricted\'
DiscoveryAuthRespData:
type: object
description: Represents the obtained authorization Data for a discoverer UE
properties:
authDataRestricted:
\$ref: \'#/components/schemas/AuthDataForRestricted\'
DiscDataForRestricted:
type: object
description: Represents Data for restricted discovery used to request the
authorization for a discoverer UE
required:
\- rpauid
\- targetPduid
\- appId
\- targetRpauid
properties:
rpauid:
\$ref: \'#/components/schemas/Rpauid\'
targetPduid:
\$ref: \'#/components/schemas/Pduid\'
appId:
\$ref: \'#/components/schemas/ApplicationId\'
targetRpauid:
\$ref: \'#/components/schemas/Rpauid\'
AuthDataForRestricted:
type: object
description: Represents obtained authorization Data for restricted discovery
for a discoverer UE
required:
\- proseQueryCodes
\- proseRespCode
\- validityTime
properties:
proseQueryCodes:
items:
\$ref: \'#/components/schemas/ProseQueryCode\'
minItems: 1
proseRespCode:
\$ref: \'#/components/schemas/ProseResponseCode\'
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
MatchReportReqData:
type: object
description: Represents the Match Report information
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
proseAppCodes:
items:
\$ref: \'#/components/schemas/ProseApplicationCode\'
minItems: 1
moniteredPlmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
MatchReportRespData:
type: object
description: Represents Match Report Acknowledgement
properties:
proseAppIdNames:
items:
\$ref: \'#/components/schemas/ProseApplicationIdName\'
minItems: 1
validityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
metaData:
\$ref: \'#/components/schemas/MetaData\'
metaDataIndexMasks:
items:
\$ref: \'#/components/schemas/MetaDataIndexMask\'
minItems: 1
MonitorUpdateResult:
type: object
description: Represents the monitoring revocation results.
required:
\- discType
\- proseRestrictedCode
\- appId
\- bannedRpauid
\- bannedPduid
\- revocationResult
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
proseRestrictedCode:
\$ref: \'#/components/schemas/ProseRestrictedCode\'
appId:
\$ref: \'#/components/schemas/ApplicationId\'
bannedRpauid:
\$ref: \'#/components/schemas/Rpauid\'
bannedPduid:
\$ref: \'#/components/schemas/Pduid\'
revocationResult:
\$ref: \'#/components/schemas/RevocationResult\'
MatchInformation:
type: object
description: >
Represents a report including a matching result, and the information that
can be used for charging purpose.
required:
\- discType
properties:
discType:
\$ref: \'#/components/schemas/DiscoveryType\'
openMatchInfoForOpen:
\$ref: \'#/components/schemas/MatchInfoForOpen\'
restrictedMatchInfo:
\$ref: \'#/components/schemas/MatchInfoForRestricted\'
MatchInfoForOpen:
type: object
description: >
Represents a report including a matching result, and the information that
can be used for charging purpose for the open discovery type.
required:
\- supi
\- appId
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
appId:
items:
\$ref: \'#/components/schemas/ApplicationId\'
minItems: 1
MatchInfoForRestricted:
type: object
description: >
Represents a report including a matching result, and the information that
can be used for charging purpose for the restricted discovery type.
required:
\- supi
\- rpauid
\- targetRpauid
\- proseRestrictedCode
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
rpauid:
\$ref: \'#/components/schemas/Rpauid\'
targetRpauid:
\$ref: \'#/components/schemas/Rpauid\'
proseRestrictedCode:
\$ref: \'#/components/schemas/ProseRestrictedCode\'
RestrictedCodeSuffixPool:
type: object
description: Contains the Restricted Code Suffix Pool.
anyOf:
\- required: [ codeSuffixList ]
\- required: [ codeSuffixRangeList ]
properties:
codeSuffixList:
type: array
items:
\$ref: \'#/components/schemas/RestrictedCodeSuffix\'
minItems: 1
codeSuffixRangeList:
type: array
items:
\$ref: \'#/components/schemas/RestrictedCodeSuffixRange\'
minItems: 1
RestrictedCodeSuffixRange:
type: object
description: Contains a range of the Restricted Code Suffixes which are
consecutive.
required:
\- beginningSuffix
\- endingSuffix
properties:
beginningSuffix:
\$ref: \'#/components/schemas/RestrictedCodeSuffix\'
endingSuffix:
\$ref: \'#/components/schemas/RestrictedCodeSuffix\'
ProseApplicationCodeSuffixPool:
type: object
description: Contains the Prose Application Code Suffix Pool.
anyOf:
\- required: [ codeSuffix ]
\- required: [ codeSuffixRange ]
properties:
codeSuffix:
\$ref: \'#/components/schemas/ProseAppCodeSuffix\'
codeSuffixRange:
\$ref: \'#/components/schemas/ProseAppCodeSuffixRange\'
ProseAppCodeSuffixRange:
type: object
description: Contains a range of the Prose Application Code Suffixes which are
consecutive.
required:
\- beginningSuffix
\- endingSuffix
properties:
beginningSuffix:
\$ref: \'#/components/schemas/ProseAppCodeSuffix\'
endingSuffix:
\$ref: \'#/components/schemas/ProseAppCodeSuffix\'
MonitorUpdateDataForOpen:
type: object
description: Represents Monitor Update Data for the Discovery Type \"OPEN\".
required:
\- proseAppIdName
\- ttl
properties:
proseAppIdName:
\$ref: \'#/components/schemas/ProseApplicationIdName\'
ttl:
type: integer
minimum: 0
MonitorUpdateDataForRestricted:
type: object
description: Represents Monitor Update Data for the Discovery Type
\"RESTRICTED\".
required:
\- proseRestrictedCode
\- appId
\- bannedRpauid
\- bannedPduid
properties:
proseRestrictedCode:
\$ref: \'#/components/schemas/ProseRestrictedCode\'
appId:
\$ref: \'#/components/schemas/ApplicationId\'
bannedRpauid:
\$ref: \'#/components/schemas/Rpauid\'
bannedPduid:
\$ref: \'#/components/schemas/Pduid\'
monitorUpdateResultCallbackRef:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
# SIMPLE TYPES:
DiscoveryEntryId:
description: Contains the Discovery Entry ID.
type: string
ProseApplicationId:
description: Contains the ProSe Application ID.
type: string
ProseApplicationCode:
description: Contains the ProSe Application Code.
type: string
Rpauid:
description: Contains the RPAUID.
type: string
ApplicationId:
description: Contains the Application ID.
type: string
ProseRestrictedCode:
description: Contains the ProSe Restricted Code.
type: string
ProseRestrictedPrefix:
description: Contains the ProSe Restricted Code Prefix.
type: string
MetaData:
description: Contains the metadata.
type: string
ProseApplicationIdName:
description: Contains the ProSe Application ID name.
type: string
Pduid:
description: Contains the PDUID.
type: string
ProseApplicationPrefix:
description: Contains the Prose Application Code Prefix.
type: string
ProseApplicationMask:
description: Contains the Prose Application Mask.
type: string
ProseQueryCode:
description: Contains the ProSe Query Code.
type: string
ProseResponseCode:
description: Contains the ProSe Response Code.
type: string
MetaDataIndexMask:
description: Contains the Meta Data Index Mask.
type: string
RestrictedCodeSuffix:
description: Contains the ProSe Restricted Code Suffix.
type: string
ProseAppCodeSuffix:
description: Contains the ProSe Application Code Suffix.
type: string
# ENUMS:
DiscoveryType:
anyOf:
\- type: string
enum:
\- OPEN
\- RESTRICTED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- OPEN: Discovery type is \"open\".
\- RESTRICTED: Discovery type is \"restricted\".
RevocationResult:
anyOf:
\- type: string
enum:
\- SUCCESSFUL
\- FAILED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- SUCCESSFUL: The Monitoring Revocation is successful.
\- FAILED: The Monitoring Revocation is failed.
#