# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
\
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Niwmsc Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the SMS-
IWMSC.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
Stage 2 requirements for the Niwmsc services are specified in 3GPP TS 23.540
[14].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
[https://spec.openapis.org/oas/v3.0.0]{.underline}.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.540: \"Technical realization of Service Based Short Message
Service; Stage 2\".
[15] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[16] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[17] 3GPP TS 29.577: \"5G System; IP Short Message Gateway and SMS Router For
Short Message Service; Stage 3\".
[18] 3GPP TS 24.011: \" Point-to-Point (PP) Short Message Service (SMS)
support on mobile radio interface\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Niwmsc:** Service-based interface exhibited by the SMS-IWMSC
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
SM MO Short Message Mobile Originated
# 4 Overview
## 4.1 Introduction {#introduction-1}
The SMS-IWMSC offers services to the SMSF via the Niwmsc service based
interface (see 3GPP TS 23.501 [2], 3GPP TS 23.502 [3], and 3GPP TS 23.540
[14]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the SMS-
IWMSC.
Figure 4.1-1: Reference model -- SMS-IWMSC
The functionalities supported by the SMS-IWMSC are listed in clause 6.3 of
3GPP TS 23.540 [14].
# 5 Services offered by the SMS-IWMSC
## 5.1 Introduction {#introduction-2}
The SMS-IWMSC offers the following services via the Niwmsc interface:
\- Niwmsc_SMService Service
Table 5.1-1 summarizes the corresponding APIs defined for this specification.
Table 5.1-1: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName Annex
* * *
Niwmsc_SMService 6.1 SMS-IWMSC short message service TS29579_Niwmsc_
SMService.yaml niwmsc-smservice A.2
## 5.2 Niwmsc_SMService Service
### 5.2.1 Service Description
See 3GPP TS 23.540 [14] clause 6.3.1
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction {#introduction-3}
For the Niwmsc_SMService service the following service operations are defined:
> \- MoForwardSm
The Niwmsc_SMService Service is used by Consumer NFs (SMSF) to transfer MO
short message by means of the MoForwardSm service operation.
#### 5.2.2.2 MoForwardSm
##### 5.2.2.2.1 General
This clause provides a general description of the MoForwardSm service
operation.
##### 5.2.2.2.2 SBI-based MO SM transfer
The MoForwardSm service operation shall be used to transmit uplink SMS message
via SMS-IWMSC.
It is used in the following procedures:
\- Successful Mobile Originated short message transfer via SMS-IWMSC (see
clause 5.2.2 of 3GPP TS 23.540 [14]).
\- Unsuccessful Mobile Originated short message transfer via SMS-IWMSC (see
clause 5.2.3 of 3GPP TS 23.540 [14]).
The NF Service Consumer (e.g. SMSF) shall transmit uplink SMS message to the
SMS-IWMSC by using the HTTP POST method as shown in Figure 5.2.2.2.1-1.
Figure 5.2.2.2.2-1: SBI-based MO SM transfer
1\. The NF Service Consumer shall send a POST request to the resource
representing the UE\'s Mobile Originated Short Message Information resource
(i.e. .../mo-sm-info/{supi}/sendsms) of the SMS-IWMSC. The payload body of the
POST request shall contain the SMS message to be sent.
2a. On success, \"200 OK\" shall be returned with \"SmsDeliveryData\" object
contains the MO SMS Delivery Report in the response body.
2b. On failure, or redirection, one of the HTTP status code listed in Table
6.1.3.2.4.2.2-2 shall be returned.
# 6 API Definitions
## 6.1 Niwmsc_SMService Service API
### 6.1.1 Introduction {#introduction-4}
The Niwmsc_SMService shall use the Niwmsc_SMService API.
The API URI of the Niwmsc_SMService API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"niwmsc-smservice\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Niwmsc_SMService API is contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
Multipart messages shall also be supported (see clause 6.1.2.4) using the
content type \"multipart/related\", comprising:
\- one JSON body part with the \"application/json\" content type; and
\- one binary body part with 3gpp vendor specific content subtypes.
The 3gpp vendor specific content subtypes defined in Table 6.1.2.2.2-1 shall
be supported.
Table 6.1.2.2.2-1: 3GPP vendor specific content subtypes
content subtype Description
* * *
vnd.3gpp.sms Binary encoded payload, encoding SMS payload, as specified in
3GPP TS 23.040 [16] and 3GPP TS 24.011 [17]. NOTE: Using 3GPP vendor content
subtypes allows to describe the nature of the opaque payload (e.g. SMS
payload) without having to rely on metadata in the JSON payload.
See clause 6.1.2.4 for the binary payloads supported in the binary body part
of multipart messages.
#### 6.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
#### 6.1.2.4 HTTP multipart messages
HTTP multipart messages shall be supported, to transfer opaque SMS payload
(e.g. SMS message, CP Ack, etc.), in the following service operations (and
HTTP messages):
\- MoForwardSm service operation;
HTTP multipart messages shall include one JSON body part and one binary body
part comprising content of SMS payload content (see clause 6.1.6.5).
The JSON body part shall be the \"root\" body part of the multipart message.
It shall be encoded as the first body part of the multipart message. The
\"Start\" parameter does not need to be included.
The multipart message shall include a \"type\" parameter (see IETF RFC 2387
[18]) specifying the media type of the root body part, i.e.
\"application/json\".
NOTE: The \"root\" body part (or \"root\" object) is the first body part the
application processes when receiving a multipart/related message, see IETF RFC
2387 [18]. The default root is the first body within the multipart/related
message. The \"Start\" parameter indicates the root body part, e.g. when this
is not the first body part in the message.
A binary body part shall include a Content-ID header (see IETF RFC 2045 [19]),
and the JSON body part shall make a reference to the binary body part using
the Content-ID header field.
Examples of multipart/related messages can be found in Annex B.
### 6.1.3 Resources
#### 6.1.3.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 6.1.3.1-1 depicts the resource URIs structure for the Niwmsc_SMService
API.
Figure 6.1.3.1-1: Resource URI structure of the Niwmsc_SMService API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource | Resource URI | HTTP method or | Description | | purpose/name | (relative path | custom | (service | | | after API URI) | operation | operation) | +================+================+================+================+ | SMService | /mo-sm-info/ | sendsms | MO short | | | {supi}/sendsms | | message | | | | (POST) | transfer | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+
#### 6.1.3.2 Resource: MoSmInfo
##### 6.1.3.2.1 Description
This resource represents the collection of Mobile Originated Short Message
Information in SMS-IWMSC.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/\ /\/mo-sm-info{supi}**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
supi Supi Represents the Subscription Permanent Identifier (see 3GPP TS 23.501
[2] clause 5.9.2)\ pattern: See pattern of type Supi in 3GPP TS 29.571 [15]
* * *
##### 6.1.3.2.3 Resource Standard Methods
No HTTP method has been defined for the Mobile Originated Short Message
Information collection resource.
##### 6.1.3.2.4 Resource Custom Operations
##### 6.1.3.2.4.1 Overview {#overview-2 .H6}
Table 6.1.3.2.4.1-1: Custom operations
Operation name Custom operaration URI Mapped HTTP method Description
* * *
sendsms /mo-sm-infos/{supi}/sendsms POST Send MO SMS message or the related
Delivery Report.
##### 6.1.3.2.4.2 Operation: sendsms {#operation-sendsms .H6}
##### 6.1.3.2.4.2.1 Description {#description-1 .H6}
This custom operation is used for NF Service Consumers to send SMS message in
uplink direction.
##### 6.1.3.2.4.2.2 Operation Definition {#operation-definition .H6}
This custom operation is used to send a SMS payload to an UE\'s Mobile
Originated Short Message Information resource in the SMS-IWMSC.
This operation shall support the request data structures specified in table
6.1.3.2.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.2.4.2.2-2.
Table 6.1.3.2.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmsData M 1 Representation of the MO SMS
message to be sent.
* * *
Table 6.1.3.2.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Sm | M | 1 | 200 OK | This case | | sDeliveryData | | | | represents | | | | | | the | | | | | | successful of | | | | | | sending SMS | | | | | | message in | | | | | | uplink | | | | | | direction, | | | | | | with | | | | | | necessary | | | | | | response data | | | | | | on the | | | | | | received | | | | | | delivery | | | | | | report. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same | | | | | | SMS-IWMSC or | | | | | | SMS-IWMSC | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same | | | | | | SMS-IWMSC or | | | | | | SMS-IWMSC | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | This case | | roblemDetails | | | Request | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SMS_PAYL | | | | | | OAD_MISSING, | | | | | | > if the | | | | | | > expected | | | | | | > SMS payload | | | | | | > content is | | | | | | > missing; | | | | | | > | | | | | | > \- | | | | | | > SMS_PA | | | | | | YLOAD_ERROR, | | | | | | > if error | | | | | | > exists in | | | | | | > the SMS | | | | | | > payload | | | | | | > content. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > UNKNOWN\ | | | | | | _SERVICE_CEN | | | | | | TRE_ADDRESS, | | | | | | > if the | | | | | | > SMS-SC was | | | | | | > unknown; | | | | | | > | | | | | | > \- | | | | | | > SE | | | | | | RVICE_CENTRE | | | | | | _CONGESTION, | | | | | | > if the | | | | | | > SMS-SC was | | | | | | > in | | | | | | > congestion; | | | | | | > | | | | | | > \- | | | | | | > U | | | | | | SER_NOT_SER | | | | | | VICE_CENTER, | | | | | | > if the user | | | | | | > didn\'t | | | | | | > belongs to | | | | | | > the SMS-SC; | | | | | | > | | | | | | > \- | | | | | | > | | | | | | FACILITY_NO | | | | | | T_SUPPORTED, | | | | | | > if the | | | | | | > facility | | | | | | > not | | | | | | > supported; | | | | | | > | | | | | | > \- | | | | | | > INVALID_ | | | | | | SME_ADDRESS, | | | | | | > if the SME | | | | | | > address is | | | | | | > invalid.. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 504 Gateway | This case | | roblemDetails | | | Timeout | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > UNREACHA | | | | | | BLE_SMS_SC, | | | | | | > if the | | | | | | > response is | | | | | | > timeout. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same | | | | | | SMS-IWMSC or | | | | | | SMS-IWMSC | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.2.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same | | | | | | SMS-IWMSC or | | | | | | SMS-IWMSC | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.1.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined.
### 6.1.5 Notifications
In this release of this specification, no notification procedures are defined.
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Niwmsc_SMService
service based interface protocol.
Table 6.1.6.1-1: Niwmsc_SMService specific Data Types
Data type Clause defined Description Applicability
* * *
N/A
Table 6.1.6.1-2 specifies data types re-used by the Niwmsc_SMService service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Niwmsc_SMService service based interface.
Table 6.1.6.1-2: Niwmsc_SMService re-used Data Types
Data type Reference Comments Applicability
* * *
ProblemDetails 3GPP TS 29.571 [15] Common Data Type used in response bodies  
RedirectResponse 3GPP TS 29.571 [15] Redirect Response  
Supi 3GPP TS 29.571 [15] Subscription Permanent Identifier  
RefToBinaryData 3GPP TS 29.571 [15] Information for indicating the binary
content of SMS payload.  
Ipv4Addr 3GPP TS 29.571 [15] IPv4 address  
Ipv6Addr 3GPP TS 29.571 [15] IPv6 address  
SupportedFeatures 3GPP TS 29.571 [15] Supported Features  
SmsData 3GPP TS 29.577 [17] Information within request message invoking
MoForwardSm service operation, for delivering MO SMS.  
SmsDeliveryData 3GPP TS 29.571 [17] Information within response message
invoking MoForwardSm service operation, for delivering MO SMS Delivery Report.
#### 6.1.6.2 Structured data types
In this release of this specification, no structure to be used in resource
representations is defined.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction {#introduction-5}
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability N/A
* * *
#### 6.1.6.4 Data types describing alternative data types or combinations of
data types
None.
#### 6.1.6.5 Binary data
##### 6.1.6.5.1 Binary Data Types
Table 6.1.6.5.1-1: Binary Data Types
Name Clause defined Content type
* * *
SMS Payload Information 6.1.6.4.2 vnd.3gpp.sms
##### 6.1.6.5.2 SMS Payload Information
SMS Payload Information shall encode a SMS payload as specified in 3GPP TS
23.040 [16] and 3GPP TS 24.011 [18], using the vnd.3gpp.sms content-type.
SMS Payload Information may encode e.g. the following content:
> \- CP-DATA, CP-ACK, CP-ERROR as specified in 3GPP TS 23.040 [16] and 3GPP TS
> 24.011 [18].
### 6.1.7 Error Handling
#### 6.1.7.1 General
For the Niwmsc_SMService API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Niwmsc_SMService API.
#### 6.1.7.2 Protocol Errors
No specific procedures for the Niwmsc_SMService service are specified.
#### 6.1.7.3 Application Errors
The application errors defined for the Niwmsc_SMService service are listed in
Table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
SMS_PAYLOAD_MISSING 400 Bad Request The expected SMS payload content is
missing. SMS_PAYLOAD_ERROR 400 Bad Request Errors exist in the format of SMS
payload. SERVICE_CENTRE_CONGESTION 403 Forbidden The delivery of the MO short
message failed because SMS-SC was in congestion. USER_NOT_SERVICE_CENTER 403
Forbidden The delivery of the short message failed because the user didn\'t
belongs to the SMS-SC. FACILITY_NOT_SUPPORTED 403 Forbidden The delivery of
the MO short message failed because of facility not supported.
INVALID_SME_ADDRESS 403 Forbidden The delivery of the MO short message failed
because the SME address is invalid. UNREACHABLE_SMS_SC 504 Gateway Timeout The
delivery of the MO short message failed because the response is timeout.
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the Niwmsc_SMService
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Supported Features
Feature number Feature Name Description
* * *
N/A
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Niwmsc_SMService API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Niwmsc_SMService API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Niwmsc_SMService service.
The Niwmsc_SMService API defines a single scope \"niwmsc-smservice\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different SMS-IWMSC service instance,
within the same SMS-IWMSC or a different SMS-IWMSC of an SMS-IWMSC set, e.g.
when an SMS-IWMSC service instance is part of an SMS-IWMSC (service) set or
when using indirect communications (see 3GPP TS 29.500 [4]).
An SCP that reselects a different SMS-IWMSC producer instance will return the
NF Instance ID of the new SMS-IWMSC producer instance in the 3gpp-Sbi-
Producer-Id header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an SMS-IWMSC within an SMS-IWMSC set redirects a service request to a
different SMS-IWMSC of the set using a 307 Temporary Redirect or 308 Permanent
Redirect status code, the identity of the new SMS-IWMSC towards which the
service request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id
header of the 307 Temporary Redirect or 308 Permanent Redirect response as
specified in clause 6.10.9.1 of 3GPP TS 29.500 [4].
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5.3.1 of 3GPP TS 29.501 [5]
and clause 5B of 3GPP TR 21.900 [7]).
# A.2 Niwmsc_SMService API
openapi: 3.0.0
info:
title: \'Niwmsc_SMService\'
version: \'1.0.2\'
description: \|
SMS-IWMSC Short Message Service.
© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.579 V17.2.0; 5G System; SMS Services; Stage 3.
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.579/
servers:
\- url: \'{apiRoot}/niwmsc-smservice/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- oAuth2ClientCredentials:
\- niwmsc-smservice
\- {}
paths:
/mo-sm-infos/{supi}/sendsms:
post:
summary: Send SMS payload for a given UE
operationId: SendSMS
tags:
\- Send MO SMS message and the delivery report
parameters:
\- name: supi
in: path
required: true
description: Subscription Permanent Identifier (SUPI)
schema:
type: string
requestBody:
content:
multipart/related: # message with a binary body part
schema:
type: object
properties:
jsonData:
\$ref: \'#/components/schemas/SmsData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
required: true
responses:
\'200\':
description: sending delivery report
content:
multipart/related: # message with a binary body part
schema:
type: object
properties:
jsonData:
\$ref: \'#/components/schemas/SmsDeliveryData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'504\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/504\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
niwmsc-smservice: Access to the niwmsc-smservice API
schemas:
SmsData:
description: >
Information within resquest message invoking MoForwardSm service operation,
for delivering MO SMS.
type: object
required:
\- smsPayload
properties:
smsPayload:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
SmsDeliveryData:
description: >
Information within response message invoking MoForwardSm service operation,
for delivering MO SMS Delivery Report.
type: object
required:
\- smsPayload
properties:
smsPayload:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
# COMPLEX TYPES:
# SIMPLE TYPES:
# ENUMS:
###### ## Annex B (informative): Withdrawn API versions
# B.1 General
This Annex lists withdrawn API versions of the APIs defined in the present
specification. 3GPP TS 29.501 [5] clause 4.3.1.6 describes the withdrawal of
API versions.
# B.2 Niwmsc_SMService API
The API versions listed in table B.2-1 are withdrawn for the Niwmsc_SMService
API.
Table B.2-1: Withdrawn API versions of the Niwmsc_SMService service
API version number Remarks
* * *
\
#