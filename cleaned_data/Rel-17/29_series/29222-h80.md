# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification describes the protocol for the Common API Framework
(CAPIF) for 3GPP Northbound APIs. The CAPIF and the related stage 2
architecture and functional requirements are defined in 3GPP TS 23.222 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.222: \"Functional architecture and information flows to support
Common API Framework for 3GPP Northbound APIs; Stage 2\".
[3] Open API: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[4] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\".
[5] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[6] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[7] IETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range Requests\".
[8] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".
[9] IETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1): Authentication\".
[10] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[11] Void.
[12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[13] IETF RFC 6455: \"The Websocket Protocol\".
[14] 3GPP TS 29.122: \"T8 reference point for northbound Application
Programming Interfaces (APIs)\".
[15] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[16] 3GPP TS 33.122: \"Security Aspects of Common API Framework for 3GPP
Northbound APIs\".
[17] Void.
[18] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[19] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[20] IETF RFC 7239: \"Forwarded HTTP Extension\".
[21] Void.
[22] W3C HTML 4.01 Specification, [https://www.w3.org/TR/2018/SPSD-
html401-20180327/]{.underline}.
[23] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[24] IETF RFC 7519: \"JSON Web Token (JWT)\".
[25] IETF RFC 7515: \"JSON Web Signature (JWS)\".
[26] 3GPP TS 29.523: \"5G System; Policy Control Event Exposure Service; Stage
3\".
[27] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[28] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\"
[29] IETF RFC 5280: \"Internet X.509 Public Key Infrastructure Certificate and
Certificate Revocation List (CRL) Profile\".
[30] 3GPP TS 29.572: \"5G System; Location Management Services; Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**API exposing function location:** The location information (e.g. civic
address, GPS coordinates, data center ID) where the API exposing function
providing the service API is located.
**API registry:** API registry is a registry maintained by the CAPIF core
function to store information about the service APIs based on the data models
defined in this specification. The structure of the API registry is out of
scope of this specification.
**CAPIF administrator:** An authorized user with special permissions for CAPIF
operations.
**PLMN trust domain:** The entities protected by adequate security and
controlled by the PLMN operator or a trusted 3^rd^ party of the PLMN.
**Service API:** The interface through which a component of the system exposes
its services to API invokers by abstracting the services from the underlying
mechanisms.
**Subscriber:** A functional entity that subscribes to another functional
entity for notifications.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AEF API Exposing Function
AMF API Management Function
APF API Publishing Function
AS Application Server
CAPIF Common API Framework
CCF CAPIF Core Function
JSON JavaScript Object Notation
REST Representational State Transfer
SCEF Service Capability Exposure Function
SCS Service Capability Server
# 4 Overview
## 4.1 Introduction
In 3GPP, there are multiple northbound API-related specifications. To avoid
duplication and inconsistency of approaches between different API
specifications and to specify common services (e.g. authorization), 3GPP has
considered in 3GPP TS 23.222 [2] the development of a common API framework
(CAPIF) that includes common aspects applicable to any northbound service
APIs.
The present document specifies the APIs needed to support CAPIF.
## 4.2 Service Architecture
3GPP TS 23.222 [2], clause 6 specifies the functional entities and domains of
the functional model, which is depicted in Figure 4.2-1, in detail.
Figure 4.2-1: CAPIF Functional Model
CAPIF-1 and CAPIF-1e reference points connect an API invoker inside the PLMN
Trust Domain and an API invoker outside the PLMN Trust Domain respectively,
with the CAPIF core function.
CAPIF-2 and CAPIF-2e reference points connect an API invoker inside the PLMN
Trust Domain and an API invoker outside the PLMN Trust Domain respectively,
with the API exposing function.
CAPIF-3 reference point connects an API exposing function inside the PLMN
Trust Domain with the CAPIF core function.
CAPIF-4 reference point connects an API publishing function inside the PLMN
Trust Domain with the CAPIF core function.
CAPIF-5 reference point connects an API management function inside the PLMN
Trust Domain with the CAPIF core function.
NOTE: The API exposing function, API publishing function and API management
function are part the API provider domain which can be implemented by the
Service Capability Exposure Function (SCEF) and/or the Network Exposure
Function (NEF).
3GPP TS 23.222 [2], clause 6 specifies functional model for the CAPIF to
support 3^rd^ party API providers, which is depicted in Figure 4.2-2 in detail
Figure 4.2-2: Functional model for the CAPIF to support 3rd party API
providers
The CAPIF core function in the PLMN trust domain supports service APIs from
both the PLMN trust domain and the 3rd party trust domain having business
relationship with PLMN Trust Domain. The API invokers may exist within the
PLMN trust domain, or within the 3rd party trust domain or outside of both the
PLMN trust domain and the 3rd party trust domain.
CAPIF-3e reference point connects an API exposing function outside PLMN Trust
Domain with the CAPIF core function.
CAPIF-4e reference point connects an API publishing function outside PLMN
Trust Domain with the CAPIF core function.
CAPIF-5e reference point connects an API management function outside PLMN
Trust Domain with the CAPIF core function.
CAPIF-7 and CAPIF-7e reference points connect API exposing functions within
PLMN Trust Domain and outside PLMN Trust Domains respectively. 3GPP TS 23.222
[2] specifies functional model for interactions between API exposing
functions.
NOTE: CAPIF-7 reference point is not represented in the Figure 4.2-2 which is
aligning to TS 23.222 [2].
3GPP TS 23.222 [2], clause 6 specifies functional model to support CAPIF
interconnection, which is depicted in Figure 4.2-3 in detail.
Figure 4.2-3: CAPIF interconnection functional model
CAPIF-6 and CAPIF-6e reference points connect two CAPIF core functions located
in the same or different PLMN trust domains, respectively. The reference
points allows API invokers of a CAPIF provider to utilize the service APIs
from the 3rd party CAPIF provider or another CAPIF provider within trust
domain.
## 4.3 Functional Entities
### 4.3.1 API invoker
The API invoker is typically provided by a 3^rd^ party application provider
who has service agreement with PLMN operator. The API invoker may reside
within the same trust domain as the PLMN operator network.
The API invoker supports several capabilities such as supporting
\- the authentication and obtaining authorization and discovering using
CAPIF-1/CAPIF-1e reference point as defined in 3GPP TS 23.222 [2]; and
\- invoking the Service APIs using CAPIF-2/CAPIF-2e referenced point as
defined in 3GPP TS 23.222 [2], e.g. the T8 interface as defined in 3GPP TS
29.122 [14] or the NEF Northbound interface as defined in 3GPP TS 29.522 [15].
### 4.3.2 CAPIF core function
The CAPIF core function (CCF) supports the following capabilities over
CAPIF-1/CAPIF-1e reference point as defined in 3GPP TS 23.222 [2]:
\- authenticating the API invoker;
\- providing the authorization information; and
\- service API discovery.
The CAPIF core function supports the following capabilities over CAPIF-3 and
CAPIF-3e reference points as defined in 3GPP TS 23.222 [2]:
\- providing the service API access policy;
\- providing the authentication and authorization information of API invoker
for validation;
\- providing API routing information;
\- providing API topology hiding information;
\- logging of service API invocations; and
\- charging of service API invocations.
The CAPIF core function supports the following capabilities over CAPIF-4 and
CAPIF-4e reference points as defined in 3GPP TS 23.222 [2]:
\- publishing and storing the service APIs information.
The CAPIF core function supports the following capabilities over CAPIF-5 and
CAPIF-5e reference points as defined in 3GPP TS 23.222 [2]:
\- providing the service API invocation log for auditing;
\- providing monitoring information the status of service APIs and
\- storing configurations of the API provider policies.
\- registering of API provider domain functions.
\- update registration information of API provider domain functions.
The CAPIF core function supports the following capabilities over CAPIF-6 and
CAPIF-6e reference point as defined in 3GPP TS 23.222 [2]:
\- publishing of service APIs information with another CAPIF core function;
and
\- discovery of service APIs information with another CAPIF core function.
### 4.3.3 API exposing function
The API exposing function (AEF) is the provider of the Service APIs and is
also the service communication entry point of the Service API to the API
invokers using CAPIF-2/CAPIF-2e reference point as defined in 3GPP TS 23.222
[2]. The API exposing function consists of capabilities such as authenticating
the API invoker, validating the authorization provided by the CAPIF core
function and logging the Service API invocations at the CAPIF core function
using CAPIF-3 and CAPIF-3e reference points as defined in 3GPP TS 23.222 [2].
According to the distributed deployment scenarios specified in 3GPP TS 23.222
[2], it is possible that the CAPIF can be deployed by splitting the
functionality of the API exposing function among multiple API exposing
function entities, of which one acts as the entry point. The source API
exposing function communicates with the destination API exposing function over
CAPIF-7/7e reference points.
### 4.3.4 API publishing function
The API publishing function (APF) enables the API provider to publish the
Service APIs information using CAPIF-4 and CAPIF-4e reference points as
defined in 3GPP TS 23.222 [2] in order to enable the discovery of Service APIs
by the API invoker.
### 4.3.5 API management function
The API management function (AMF) enables the API provider to perform
administration of the Service APIs. The API management function supports
several capabilities such as querying the Service API invocation log for
auditing, monitoring the events, configuring the API provider policies and
monitoring the status of the Service APIs, register and maintain registration
information of the API provider domain functions on the CAPIF core function,
using CAPIF-5 and CAPIF-5e reference points as defined in 3GPP TS 23.222 [2].
# 5 Services offered by the CAPIF Core Function
## 5.1 Introduction of Services
The table 5.1-1 lists the CAPIF Core Function APIs below the service name. A
service description clause for each API gives a general description of the
related API.
Table 5.1-1: List of CAPIF Services
* * *
Service Name Service Operations Operation Semantics Consumer(s)
CAPIF_Discover_Service_API Discover_Service_API Request/ Response API Invoker,
CAPIF core function Event operations (NOTE) (NOTE) API Invoker
CAPIF_Publish_Service_API Publish_Service_API Request/ Response API Publishing
Function, CAPIF core function Unpublish_Service_API Request/ Response API
Publishing Function, CAPIF core function Update_Service_API Request/ Response
API Publishing Function, CAPIF core function Get_Service_API Request/ Response
API Publishing Function, CAPIF core function CAPIF_Events_API Subscribe_Event
Subscribe/Notify API Invoker, API Publishing Function, API Management
Function, API Exposing Function Notify_Event Subscribe/Notify API Invoker, API
Publishing Function, API Management Function, API Exposing Function
Unsubscribe_Event Subscribe/Notify API Invoker, API Publishing Function, API
Management Function, API Exposing Function CAPIF_API_Invoker_Management_API
Onboard_API_Invoker Request/ Response API Invoker Offboard_API_Invoker
Request/ Response API Invoker Notify_Onboarding_Completion Subscribe/Notify
API Invoker Update_API_Invoker_Details Request/Response API Invoker
Notify_Update_Completion Subscribe/Notify API Invoker CAPIF_Security_API
Obtain_Security_Method Request/ Response API Invoker Obtain_Authorization
Request/ Response API Invoker Obtain_API_Invoker_Info Request/ Response API
exposing function Revoke_Authorization Request/ Response API exposing function
CAPIF_Monitoring_API Event operations (NOTE) (NOTE) API Management Function
CAPIF_Logging_API_Invocation_API Log_API_Invocation Request/ Response API
exposing function CAPIF_Auditing_API Query_API_Invocation_Log Request/
Response API management function CAPIF_Access_Control_Policy_API
Obtain_Access_Control_Policy Request/Response API Exposing Function
CAPIF_API_Provider_Management_API Register_API_Provider Request/Response API
Management Function Update_API_Provider Request/Response API Management
Function Deregister_API_Provider Request/Response API Management Function
CAPIF_Routing_Info_API Obtain_ Routing_Info Request/Response API exposing
function NOTE: The service operations of CAPIF Events API are reused by the
CAPIF_Discover_Service_API, CAPIF_Publish_Service_API and CAPIF_Monitoring_API
for events related services.
* * *
Table 5.1-2 summarizes the corresponding APIs defined in this specification.
Table 5.1-2: API Descriptions
* * *
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex** CAPIF_Discover_Service_API 8.1 CAPIF API discovery
service TS29222_CAPIF_Discover_Service_API.yaml service-apis A.2
CAPIF_Publish_Service_API 8.2 CAPIF API Publish Service
TS29222_CAPIF_Publish_Service_API.yaml published-apis A.3 CAPIF_Events_API 8.3
CAPIF event service TS29222_CAPIF_Events_API.yaml capif-events A.4
CAPIF_API_Invoker_Management_API 8.4 CAPIF API Invoker Management Service
TS29222_CAPIF_API_Invoker_Management_API.yaml api-invoker-management A.5
CAPIF_Security_API 8.5 CAPIF Security Service TS29222_CAPIF_Security_API.yaml
capif-security A.6 CAPIF_Access_Control_Policy_API 8.6 CAPIF Access Control
Policy API Service TS29222_CAPIF_Access_Control_Policy_API.yaml access-
control-policy A.7 CAPIF_Logging_API_Invocation_API 8.7 CAPIF Logging API
Invocation Service TS29222_CAPIF_Logging_API_Invocation_API.yaml api-
invocation-logs A.8 CAPIF_Auditing_API 8.8 CAPIF Auditing API Service
TS29222_CAPIF_Auditing_API.yaml logs A.9 CAPIF_API_Provider_Management_API 8.9
CAPIF API Provider Management API Service
TS29222_CAPIF_API_Provider_Management_API.yaml api-provider-management A.11
CAPIF_Routing_Info_API 8.10 CAPIF Routing Information API Service
TS29222_CAPIF_Routing_Info_API.yaml capif-routing-info A.12
* * *
## 5.2 CAPIF_Discover_Service_API
### 5.2.1 Service Description
#### 5.2.1.1 Overview
The CAPIF discover service APIs, as defined in 3GPP TS 23.222 [2], allow API
invokers via CAPIF-1/1e reference points to discover service API available at
the CAPIF core function, and allow CAPIF core function via CAPIF-6 and
CAPIF-6e reference points to discover service API available at other CAPIF
core function.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
The service operation defined for CAPIF_Discover_Service_API is shown in table
5.2.2.1-1.
Table 5.2.2.1-1: Operations of the CAPIF_Discover_Service_API
* * *
**Service operation name** **Description** **Initiated by**
Discover_Service_API This service operation is used by an API invoker to
discover service API available at the CAPIF core function. This service
operation is also used by CAPIF core function to discover service APIs
available at other CAPIF core function. API invoker, CAPIF core function
* * *
#### 5.2.2.2 Discover_Service_API
##### 5.2.2.2.1 General
This service operation is used by:
\- an API invoker to discover service API available at the CAPIF core
function; or
\- a CAPIF core function to discover service API available at other CAPIF core
function in interconnection scenario.
##### 5.2.2.2.2 Consumer discovering service API using Discover_Service_API
service operation
To discover service APIs available at the CAPIF core function, the consumer
(e.g. API invoker) shall send an HTTP GET message with the API invoker
Identifier or CAPIF core function Identifier and query parameters to the CAPIF
core function as specified in clause 8.1.2.2.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall:
1\. verify the identity of the consumer (e.g. API invoker) and check if the
consumer is authorized to discover the service APIs;
2\. if the consumer is authorized to discover the service APIs, the CAPIF core
function shall:
a. search the CAPIF core function (API registry) for APIs matching the query
criteria;
b. apply the discovery policy, if any, on the search results and filter the
search results to obtain the list of service API description or the
information of the CAPIF core function which is required to be contacted
further for discovering the service APIs;
c. return the filtered search results or the information of the CAPIF core
function in the response message. The shareableInformation for each of
serviceAPIDescription is not provided in the filtered search results.
NOTE 1: The {apiRoot} part of the URI structure (defined in clause 5.2.4 of
3GPP TS 29.122 [14]) for the discovered APIs can be constructed by the API
invoker based on either the \"domainName\" attribute (which can include FQDN
and port information) or the \"interfaceDescriptions\" attribute of the
AefProfile data type.
## 5.3 CAPIF_Publish_Service_API
### 5.3.1 Service Description
#### 5.3.1.1 Overview
The CAPIF publish service APIs, as defined in 3GPP TS 23.222 [2], allow API
publishing function via CAPIF-4 and CAPIF-4e reference points to publish and
manage published service APIs at the CAPIF core function, and allow CAPIF core
function via CAPIF-6 and CAPIF-6e reference points to publish and manage
published service APIs at other CAPIF core function.
NOTE: Functions from 3rd party API provider domain can also access this API
with sufficient permissions.
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
The service operations defined for the CAPIF_Publish_Service API are shown in
table 5.3.2.1-1.
Table 5.3.2.1-1: Operations of the CAPIF_Publish_Service_API
* * *
**Service operation name** **Description** **Initiated by**
Publish_Service_API This service operation is used by an API publishing
function to publish service APIs on the CAPIF core function. This service
operation is also used by CAPIF core function to publish service APIs on other
CAPIF core function. API publishing function, CAPIF core function
Unpublish_Service_API This service operation is used by an API publishing
function to un-publish service APIs from the CAPIF core function. This service
operation is also used by CAPIF core function to un-publish service APIs on
other CAPIF core function. API publishing function, CAPIF core function
Get_Service_API This service operation is used by an API publishing function
to retrieve service APIs from the CAPIF core function. This service operation
is also used by CAPIF core function to retrieve service APIs on other CAPIF
core function. API publishing function, CAPIF core function Update_Service_API
This service operation is used by an API publishing function to update
published service APIs on the CAPIF core function. This service operation is
also used by CAPIF core function to update published service APIs on other
CAPIF core function. API publishing function, CAPIF core function
* * *
#### 5.3.2.2 Publish_Service_API
##### 5.3.2.2.1 General
This service operation is used by:
\- an API publishing function to publish service APIs on the CAPIF core
function: or
\- a CAPIF core function to publish service APIs on other CAPIF core function
in interconnection scenario.
##### 5.3.2.2.2 API publishing function publishing service APIs on CAPIF core
function using Publish_Service_API service operation
To publish service APIs at the CAPIF core function, the API publishing
function shall send an HTTP POST message to the CAPIF core function. The body
of the HTTP POST message shall include API Information as specified in clause
8.2.2.2.3.1.
Upon receiving the above described HTTP POST message, the CAPIF core function
shall:
1\. verify the identity of the API publishing function and check if the API
publishing function is authorized to publish service APIs;
2\. if the API publishing function is authorized to publish service APIs, the
CAPIF core function shall:
a. verify the API Information present in the HTTP POST message and add the
service APIs in the CAPIF core function (API registry);
b. If topology hiding is enabled as per policy, the CAPIF core function shall
i. determine the service APIs which require topology hiding as per policy;
ii. determine the API exposing function(s) responsible for the topology hiding
for each service API which requires topology hiding;
iii. create a API topology hiding information for each service API which
requires topology hiding by extracting the API identification information and
the API exposing function(s) information from the service API information
added to the CAPIF core function (API registry);
iv. replace the API exposing function(s) information in the service API
information added to the CAPIF core function (API registry) with the
corresponding API exposing function(s) information responsible for the
topology hiding for service API;
v. send a notification message with the API topology hiding information to the
API exposing function(s) which is responsible for the topology hiding for a
service API and that has subscribed to the API_TOPOLOGY_HIDING_CREATED event;
vi. store the API topology hiding information in the CAPIF core function;
c. create a new resource using the service API information in the CAPIF core
function (API registry) as specified in clause 8.2.2.1;
d. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event; and
e. return the CAPIF Resource URI in the response message.
##### 5.3.2.2.3 CAPIF core function publishing service APIs on other CAPIF
core function using Publish_Service_API service operation
To publish service APIs at other CAPIF core function, the CAPIF core function
shall send an HTTP POST message to the peer CAPIF core function. The body of
the HTTP POST message shall include API Information as specified in clause
8.2.2.2.3.1. For service API publishing on CAPIF-6 reference point, The CAPIF
core function shall also include the published API path \"pubApiPath\" as
specified in clause 8.2.4.2.2. The \"pubApiPath\" includes a list of CAPIF
core function Identifiers within the same CAPIF provider domain, such list
includes own CAPIF core function identifier and received CAPIF core function
identifier(s) from other CAPIF core function.
If the CAPIF core function knows the peer CAPIF core function identifier, it
shall not send the HTTP POST message to the peer CAPIF core function if the
peer CAPIF core function identifier is included in the published API path.
Upon receiving the above described HTTP POST message, the CAPIF core function
shall:
1\. verify the identity of the requesting CAPIF core function in the URI and
check if the CAPIF core function is authorized to publish service APIs;
2\. if the requesting CAPIF core function is authorized to publish service
APIs, the CAPIF core function shall check if own CAPIF core function
identifier is within the published API path (if received). If it is not within
the path, the CAPIF core function shall add its own identifier in the path;
otherwise reject the HTTP POST request.
3\. Then the CAPIF core function shall:
a. verify the rest API Information present in the HTTP POST message and add
the service APIs in the CAPIF core function (API registry);
b. create a new resource as specified in clause 8.2.2.1;
c. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event; and
d. return the CAPIF Resource URI in the response message.
#### 5.3.2.3 Unpublish_Service_API
##### 5.3.2.3.1 General
This service operation is used by:
\- an API publishing function to un-publish service APIs from the CAPIF core
function; or
\- a CAPIF core function to un-publish service APIs on other CAPIF core
function in interconnection scenario.
##### 5.3.2.3.2 Consumer un-publishing service APIs from CAPIF core function
using Unpublish_Service_API service operation
To un-publish service APIs from the CAPIF core function, the consumer (e.g.
API publishing function) shall send an HTTP DELETE message using the CAPIF
Resource URI received during the publish operation to the CAPIF core function
as specified in clause 8.2.2.3.3.3.
Upon receiving the above described HTTP DELETE message, the CAPIF core
function shall
1\. verify the identity of the consumer (e.g. API publishing function) and
check if the consumer is authorized to un-publish service APIs;
2\. if the consumer is authorized to un-publish service APIs, the CAPIF core
function shall:
a. delete the resource pointed by the CAPIF Resource URI;
b. delete the relevant service APIs from the CAPIF core function (API
registry);
c. If topology hiding is enabled as per policy, the CAPIF core function shall
i. determine the API topology hiding information associated with the service
API and delete the corresponding API topology hiding information in the CAPIF
core function;
ii. send a notification message with the deleted API topology hiding
information to the corresponding API exposing function(s) which were
responsible for the topology hiding of the service API and that subscribed to
the API_TOPOLOGY_HIDING_REVOKED event; and
d. send a notification message with the deleted service API, to all API
Invokers that subscribed to the Service API Update event.
#### 5.3.2.4 Get_Service_API
##### 5.3.2.4.1 General
This service operation is used by:
\- an API publishing function to retrieve service APIs from the CAPIF core
function; or
\- a CAPIF core function to retrieve service APIs from other CAPIF core
function in interconnection scenario.
##### 5.3.2.4.2 Consumer retrieving service APIs from CAPIF core function
using Get_Service_API service operation
To retrieve information about the published service APIs from the CAPIF core
function, the consumer (e.g. API publishing function) shall send an HTTP GET
message to the CAPIF core function. For retrieving the entire list of service
APIs, the HTTP GET message shall be sent to the collection of service APIs
resource representation URI as specified in clause 8.2.2.2.3.2. For retrieving
a specific service API, the HTTP GET message shall be sent to that service
API\'s resource representation URI as described in clause 8.2.2.3.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall
1\. verify the identity of the consumer (e.g. API publishing function) and
check if the consumer is authorized to retrieve information about the
published service APIs;
2\. if the consumer is authorized to retrieve information about the published
service APIs, the CAPIF core function shall:
a. respond with the requested API Information.
#### 5.3.2.5 Update_Service_API
##### 5.3.2.5.1 General
This service operation is used by:
\- an API publishing function to update published service APIs on the CAPIF
core function; or
\- a CAPIF core function to update published service APIs on other CAPIF core
function in interconnection scenario.
##### 5.3.2.5.2 Consumer updating published service APIs on CAPIF core
function using Update_Service_API service operation
To update information of published service APIs, the consumer (e.g. API
publishing function) shall send an HTTP PUT message to that service API\'s
resource representation URI in the CAPIF core function. The body of the HTTP
PUT message shall include updated API Information as specified in clause
8.2.2.3.3.2; otherwise, if the \"PatchUpdate\" feature defined in clause 8.2.6
is supported, the consumer (e.g. API publishing function) may send an HTTP
PATCH request message to the concerned service API resource URI in the CAPIF
core function. The body of the HTTP PATCH request message shall include the
requested modifications as specified in clause 8.2.2.3.3.4.
Upon receiving the above described HTTP PUT or PATCH request message, the
CAPIF core function shall
1\. verify the identity of the consumer (e.g. API publishing function) and
check if the consumer is authorized to update information of published service
APIs;
2\. if the consumer is authorized to update information of published service
APIs, the CAPIF core function shall:
a. verify the API Information present in the HTTP PUT or PATCH request message
and replace/modify the service APIs in the CAPIF core function (API registry);
b. If topology hiding is enabled as per policy, the CAPIF core function shall
i. if the service API being updated has a corresponding API topology hiding
information in the CAPIF core function, then update the API topology hiding
information with any updated API exposing function(s) information from the
service API information replaced at the CAPIF core function (API registry);
ii. replace/modify the API exposing function(s) information in the service API
information added to the CAPIF core function (API registry) with the
corresponding API exposing function(s) information responsible for the
topology hiding for service API;
iii. send a notification message with the API topology hiding information to
the API exposing function(s) which is responsible for the topology hiding for
a service API and that has subscribed to the API_TOPOLOGY_HIDING_CREATED
event;
iv. update the API topology hiding information in the CAPIF core function;
c. replace/modify the existing resource accordingly using the updated service
API information in the CAPIF core function (API registry); and
d. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event.
## 5.4 CAPIF_Events_API
### 5.4.1 Service Description
#### 5.4.1.1 Overview
The CAPIF events APIs, as defined in 3GPP TS 23.222 [2], allow an API invoker
via CAPIF-1/1e reference points, API exposure function via CAPIF-3/3e
reference points, API publishing function via CAPIF-4/4e reference points and
API management function via CAPIF-5/5e reference points to subscribe to and
unsubscribe from CAPIF events and to receive notifications from CAPIF core
function.
NOTE: The functional elements listed above are referred to as Subscriber in
the service operations described in the clauses below.
### 5.4.2 Service Operations
#### 5.4.2.1 Introduction
The service operations defined for the CAPIF_Events_API are shown in table
5.4.2.1-1.
Table 5.4.2.1-1: Operations of the CAPIF_Events_API
* * *
**Service operation name** **Description** **Initiated by** Subscribe_Event
This service operation is used by a Subscriber to subscribe to CAPIF events.
Subscriber Unsubscribe_Event This service operation is used by a Subscriber to
unsubscribe from CAPIF events Subscriber Notify_Event This service operation
is used by CAPIF core function to send a notification to a Subscriber CAPIF
core function
* * *
#### 5.4.2.2 Subscribe_Event
##### 5.4.2.2.1 General
This service operation is used by a Subscriber to subscribe to CAPIF events.
##### 5.4.2.2.2 Subscribing to CAPIF events using Subscribe_Event service
operation
To subscribe to CAPIF events, the Subscriber shall send an HTTP POST message
to the CAPIF core function. The body of the HTTP POST message shall include
Subscriber\'s Identifier, Event Type and a Notification Destination URI as
specified in clause 8.3.2.2.3.1.
For all events included in the HTTP POST message, if the Enhanced_event_report
feature is supported, the Subscriber may include an event report requirement
in the \"eventReq\" attribute including:
\- event notification method (periodic, one time, on event detection) in the
\"notifMethod\" attribute;
\- maximum Number of Reports in the \"maxReportNbr\" attribute;
\- monitoring duration in the \"monDur\" attribute;
\- repetition period for periodic reporting in the \"repPeriod\" attribute;
and/or
\- immediate reporting indication in the \"immRep\" attribute.
If the Enhanced_event_report feature is supported, the Subscriber may also
include an event filter in the \"eventFilters\" attribute. The
\"eventFilters\" attribute shall include:
\- if the event is SERVICE_API_AVAILABLE, SERVICE_API_UNAVAILABLE or
SERVICE_API_UPDATE, the API IDs in the \"apiIds\" attribute;
\- if the event is API_INVOKER_ONBOARDED or API_INVOKER_OFFBOARDED or
API_INVOKER_UPDATED, the API invoker IDs in the \"apiInvokerIds\" attribute;
\- if the event is ACCESS_CONTROL_POLICY_UPDATE, the API invoker IDs in the
\"apiInvokerIds\" attribute and/or API identifications in the \"apiIds\"
attribute; and/or
\- if the event is SERVICE_API_INVOCATION_SUCCESS or
SERVICE_API_INVOCATION_FAILURE, the API invoker IDs in the \"apiInvokerIds\"
attribute, AEF identifiers in the \"aefIds\" attribute and/or API IDs in the
\"apiIds\" attribute.
Upon receiving the above described HTTP POST message, the CAPIF core function
shall:
1\. verify the identity of the Subscriber and check if the Subscriber is
authorized to subscribe to the CAPIF events mentioned in the HTTP POST
message;
2\. if the Subscriber is authorized to subscribe to the CAPIF events, the
CAPIF core function shall:
a. create a new resource as specified in clause 8.3.2.1; and
b. return the CAPIF Resource URI in the response message.
#### 5.4.2.3 Unsubscribe_Event
##### 5.4.2.3.1 General
This service operation is used by a Subscriber to un-subscribe from CAPIF
events.
##### 5.4.2.3.2 Unsubscribing from CAPIF events using Unsubscribe_Event
service operation
To unsubscribe from CAPIF events, the Subscriber shall send an HTTP DELETE
message to the resource representing the event in the CAPIF core function as
specified in clause 8.3.2.3.3.1.
Upon receiving the HTTP DELETE message, the CAPIF core function shall:
1\. verify the identity of the Unsubscribing functional entity and check if
the Unsubscribing functional entity is authorized to Unsubscribe from the
CAPIF event associated with the CAPIF Resource URI; and
2\. if the Unsubscribing functional entity is authorized to unsubscribe from
the CAPIF events, the CAPIF core function shall delete the resource pointed by
the CAPIF Resource URI.
#### 5.4.2.4 Notify_Event
##### 5.4.2.4.1 General
This service operation is used by CAPIF core function to send a notification
to a Subscriber.
##### 5.4.2.4.2 Notifying CAPIF events using Notify_Event service operation
To notify CAPIF events, the CAPIF core function shall send an HTTP POST
message using the Notification Destination URI received in the subscription
request. The body of the HTTP POST message shall include an Event Notification
and CAPIF Resource URI.
If the Enhanced_event_report feature is supported, the CAPIF core function may
include an event detail in the \"eventDetail\" attribute. The \"eventDetail\"
attribute shall include:
\- if the event is SERVICE_API_AVAILABLE or SERVICE_API_UNAVAILABLE, the API
IDs in the \"apiIds\" attribute;
\- if the event is SERVICE_API_UPDATE, the API descriptions in the
\"serviceAPIDescriptions\" attribute;
\- if the event is API_INVOKER_ONBOARDED or API_INVOKER_OFFBOARDED or
API_INVOKER_UPDATED, the API invoker IDs in the \"apiInvokerIds\" attribute;
\- if the event is ACCESS_CONTROL_POLICY_UPDATE, the access control policy
information in the \"accCtrlPolList\" attribute;
\- if the event is SERVICE_API_INVOCATION_SUCCESS or
SERVICE_API_INVOCATION_FAILURE, the API invocation logs in the
\"invocationLogs\" attribute; or
\- if the event is API_TOPOLOGY_HIDING_CREATED or API_TOPOLOGY_HIDING_REVOKED,
the API topology hiding information in the \"apiTopoHide\" attribute.
Upon receiving the HTTP POST message, the Subscriber shall process the Event
Notification.
## 5.5 CAPIF_API_Invoker_Management_API
### 5.5.1 Service Description
#### 5.5.1.1 Overview
The CAPIF API invoker management APIs, as defined in 3GPP TS 23.222 [2], allow
API invokers via CAPIF-1/1e reference points to on-board and off-board itself
as a recognized user of the CAPIF or update the API invoker\'s details on the
CAPIF core function.
### 5.5.2 Service Operations
#### 5.5.2.1 Introduction
The service operations defined for the CAPIF API Invoker Management API are
shown in table 5.5.2.1-1.
Table 5.5.2.1-1: Operations of the CAPIF_API_Invoker_Management_API
* * *
**Service operation name** **Description** **Initiated by**
Onboard_API_Invoker This service operation is used by an API invoker to on-
board itself as a recognized user of CAPIF API invoker Offboard_API_Invoker
This service operation is used by an API invoker to off-board itself as a
recognized user of CAPIF API invoker Notify_Onboarding_Completion This service
operation is used by CAPIF core function to send an on-boarding notification
to the API invoker. CAPIF core function Update_API_Invoker_Details This
service operation is used by an API invoker to update API invoker\'s details
in the CAPIF core function. API Invoker Notify_Update_Completion This service
operation is used by CAPIF core function to send an update notification to the
API invoker CAPIF core function
* * *
#### 5.5.2.2 Onboard_API_Invoker
##### 5.5.2.2.1 General
This service operation is used by an API invoker to on-board itself as a
recognized user of CAPIF
##### 5.5.2.2.2 API invoker on-boarding itself as a recognized user of CAPIF
using Onboard_API_Invoker service operation
To on-board itself as a recognized user of the CAPIF, the API invoker shall
send an HTTP POST message to the CAPIF core function. The body of the HTTP
POST message shall include API invoker Enrolment Details, API List and a
Notification Destination URI for on-boarding notification as specified in
clause 8.4.2.2.3.1.
Upon receiving the above described HTTP POST message, the CAPIF core function
shall check if it can determine authorization of the request and on-board the
API invoker automatically. If the CAPIF core function:
1\. can determine authorization of the request and on-board the API invoker
automatically, the CAPIF core function:
a. shall process the API invoker Enrolment Details and the API List received
in the HTTP POST message and determine if the request sent by the API invoker
is authorized or not;
b. if the API invoker\'s request is authorized, the CAPIF core function shall:
i. create the API invoker Profile consisting of an API invoker Identifier,
Authentication Information, Authorization Information and CAPIF Identity
Information;
ii. verify the API List present in the HTTP POST message and create a API List
of APIs the API invoker is allowed to access;
iii. create a new resource as defined in clause 8.4.2.1;
iv. return the API invoker Profile, API List of APIs the API invoker is
allowed to access and the CAPIF Resource URI in the response message.
2\. cannot determine authorization of the request to on-board the API invoker
automatically, the CAPIF core function:
a. shall acknowledge the receipt of the on-boarding request to the API
invoker.
b. shall request the CAPIF administrator to validate the on-boarding request
or the API management to validate the on-boarding request by sharing the API
invoker Enrolment Details and the API List received in the HTTP POST message;
c. on receiving confirmation of successful validation of the on-boarding
request from the CAPIF administrator or the API management, the CAPIF core
function shall:
i. create the API invoker Profile consisting of an API invoker Identifier,
Authentication Information, Authorization Information and CAPIF Identity
Information;
ii. create a new resource as defined in clause 8.4.3;
iii. deliver the API invoker Profile, API List of APIs the API invoker is
allowed to access and the CAPIF Resource URI to the API invoker in a
notification.
NOTE 1: How the CAPIF core function determines that the CAPIF core function
can process the request and on-board the API invoker automatically is out-of-
scope of this specification.
NOTE 2: How the CAPIF core function determines that the API invoker\'s request
to on-board is authorized is specified in 3GPP TS 33.122 [16].
NOTE 3: Interactions between the CAPIF core function and the CAPIF
administrator or the API management is out-of-scope of this specification.
NOTE 4: The onboarding credential received by the API invoker from the service
provider as specified in 3GPP TS 33.122 [16] is included in the Authorization
header field of the HTTP request message as described in IETF RFC 7235 [9].
NOTE 5: After the onboarding operation is completed the API Invoker no longer
needs to maintain the Notification Destination URI and may delete it.
#### 5.5.2.3 Offboard_API_Invoker
##### 5.5.2.3.1 General
This service operation is used by an API invoker to stop being as a recognized
user of CAPIF
##### 5.5.2.3.2 API invoker off-boarding itself as a recognized user of CAPIF
using Offboard_API_Invoker service operation
To off-board itself as a recognized user of the CAPIF, the API invoker shall
send an HTTP DELETE message to its resource representation in the CAPIF core
function as specified in clause 8.4.2.3.3.1.
Upon receiving the HTTP DELETE message, the CAPIF core function shall:
1\. determine if the request sent by the API invoker is authorized or not;
2\. if the API invoker\'s request is authorized, the CAPIF core function
shall:
a. delete the resource representation pointed by the CAPIF Resource
Identifier; and
b. delete the related API invoker profile.
#### 5.5.2.4 Notify_Onboarding_Completion
##### 5.5.2.4.1 General
This service operation is used by the CAPIF core function to send a
notification about the completion of the Onboarding operation to the API
Invoker.
##### 5.5.2.4.2 Notifying Onboarding completion using
Notify_Onboarding_Completion service operation
When the CAPIF core function cannot immediately authorize the API invoker that
issued an Onboarding request (see clause 5.5.2.2.2) it will send a response
acknowledging the request and begin processing it. After completion, the CAPIF
core function shall send an HTTP POST message using the Notification
Destination URI received in the Onboarding request. The body of the HTTP POST
message shall include the API Invoker Profile, API List of the APIs the API
invoker is allowed to access and the CAPIF Resource URI.
Upon receiving the HTTP POST message, the API invoker shall process the
message in the same manner it would have processed an immediate response to
the Onboarding request, and respond to the HTTP POST message with an
acknowledgement and no body.
#### 5.5.2.5 Update_API_Invoker_Details
##### 5.5.2.5.1 General
This service operation is used by an API invoker to update the API invoker\'s
profile details on the CAPIF core function.
##### 5.5.2.5.2 API invoker updating its details on CAPIF using
Update_API_Invoker_Details service operation
To update the API invoker\'s profile details on the CAPIF core function, the
API invoker shall send a HTTP PUT message to the CAPIF core function to its
resource representation, requesting to replace all properties in the existing
resource, addressed by the URI received in the response to the request that
has created the API invoker profile resource. The properties \"apiInvokerId\"
and \"onboardingInformation\" shall remain unchanged from the previously
provided values. The body of the HTTP PUT message shall include the
APIInvokerEnrolmentDetails data structure with API invoker identity
information, API invoker details that need to be updated and a Notification
Destination URI for update notification as specified in clause 8.4.2.3.3.2.
API invoker details may include API invoker information and API List.
Otherwise, if the \"PatchUpdate\" feature defined in clause 8.4.6 is
supported, the consumer (e.g. API invoker function) may send an HTTP PATCH
request message to the concerned service API resource URI in the CAPIF core
function to modify the API invoker\'s profile. The body of the HTTP PATCH
request message shall include the APIInvokerEnrolmentDetailsPatch data
structure.
Upon receiving the above described HTTP PUT or PATCH request message:
1\. if the CAPIF core function decides to update the API list of the API
invoker without validation by CAPIF administrator, then the CAPIF core
function:
a. shall determine if the request in the HTTP PUT or PATCH request message by
the API invoker is authorized or not.
b. verify that the \"apiInvokerId\" and \"onboardingInformation\" properties
are same as in API invoker resource on CAPIF core function.
c. if the API invoker\'s request is authorized and the properties
\"apiInvokerId\" and \"onboardingInformation\" match, the CAPIF core function
shall:
i. if the request contains an API list:
\- create a list of APIs the API invoker is allowed to access; and
\- update the resource identified by the CAPIF Resource URI of the API
invoker\'s HTTP PUT or PATCH request with the updated information in the
request and the API list created in step A;
ii. if the request does not contain an API list, update the resource
identified by the CAPIF Resource URI of the API invoker\'s HTTP PUT or PATCH
request with the updated information in the request; and
iii. return the updated API invoker details;
2\. otherwise, the CAPIF core function:
a. shall acknowledge the receipt of the update API invoker details request to
the API invoker.
b. verify that the \"apiInvokerId\" and \"onboardingInformation\" properties
are same as in API invoker resource on CAPIF core function;
c. if the properties \"apiInvokerId\" and \"onboardingInformation\" match,
then shall request the CAPIF administrator to validate the request or the API
management to validate the request by sharing the API invoker identity
information and the updated information received in the HTTP PUT message or
PATCH request;
d. on receiving confirmation of successful validation of the request from the
CAPIF administrator or the API management, the CAPIF core function shall:
i. update the resource identified by the CAPIF Resource URI of the API
invoker\'s HTTP PUT or PATCH request, with validated information; and
ii. return the updated API invoker details.
NOTE 1: How the CAPIF core function determines that the CAPIF core function
can process the request and update the API list of the API invoker
automatically is out-of-scope of this specification.
NOTE 2: Interactions between the CAPIF core function and the CAPIF
administrator or the API management is out-of-scope of this specification.
NOTE 3: After the operation is completed the API Invoker no longer needs to
maintain the Notification Destination URI and may delete it.
#### 5.5.2.6 Notify_Update_Completion
##### 5.5.2.6.1 General
This service operation is used by the CAPIF core function to send a
notification about the completion of the update of API invoker\'s details.
##### 5.5.2.6.2 Notifying API invoker update completion using
Notify_Update_Completion service operation
When the CAPIF core function cannot immediately grant the update request (see
clause 5.5.2.5.2) it will send a response acknowledging the request and begin
processing it. After completion, the CAPIF core function shall send an HTTP
POST message using the Notification Destination URI received in the update
details request. The body of the HTTP POST message shall include the updated
API Invoker details.
Upon receiving the HTTP POST message, the API invoker shall process the
message in the same manner it would have processed an immediate response to
the update the details of the API invoker request, and respond to the HTTP
POST message with HTTP response 204 No content.
## 5.6 CAPIF_Security_API
### 5.6.1 Service Description
#### 5.6.1.1 Overview
The CAPIF security APIs, as defined in 3GPP TS 23.222 [2], allow:
\- API invokers via CAPIF-1/1e reference points to (re-)negotiate the service
security method and obtain authorization for invoking service APIs; and
\- API exposing function via CAPIF-3/3e reference points to obtain
authentication information of the API invoker for authentication of the API
invoker and revoke the authorization for service APIs.
### 5.6.2 Service Operations
#### 5.6.2.1 Introduction
The service operations defined for CAPIF_Security_API are shown in table
5.6.2.1-1.
Table 5.6.2.1-1: Operations of the CAPIF_Security_API
* * *
**Service operation name** **Description** **Initiated by**
Obtain_Security_Method This service operation is used by an API invoker to
negotiate and obtain information about service API security method for itself
with CAPIF core function. This information is used by API invoker for service
API invocations. API invoker Obtain_Authorization This service operation is
used by an API invoker to obtain authorization to access service APIs. API
invoker Obtain_API_Invoker_Info This service operation is used by an API
exposing function to obtain the authentication or authorization information
related to an API invoker. API exposing function Revoke_Authorization This
service operation is used by an API exposing function to invalidate the
authorization of an API invoker. API exposing function
* * *
Security information is generated when requested by an API invoker, and is
stored in the CAPIF Core function. The information can be accessed via a
resource representation URI using the API invoker ID as described in clause
8.5.2.3. The URI is provided to the API invoker in the HTTP response to the
creation request (via the Obtain_Security_Method service operation name).
Refer to clause 9.1.2a.2 for details about verifying that the API Exposing
function has the ability to authorize API invokers prior to invoking service
APIs.
#### 5.6.2.2 Obtain_Security_Method
##### 5.6.2.2.1 General
This service operation is used by an API invoker to negotiate and obtain
service API security method from the CAPIF core function. The information
received by API invoker shall be used for authentication with the API exposing
function.
##### 5.6.2.2.2 Request service API security method from CAPIF using
Obtain_Security_Method service operation
To negotiate and obtain service API security method information from the CAPIF
core function, the API invoker shall send an HTTP PUT message to the CAPIF
core function. The body of the HTTP PUT message shall include Security Method
Request and a Notification Destination URI for security related notifications.
The Security Method Request from the API invoker contains the unique interface
details of the service APIs and may contain a preferred method for each unique
service API interface as specified in clause 8.5.2.3.3.3.
Upon receiving the above described HTTP PUT message, the CAPIF core function
shall:
1\. determine the security method for each service API interface as specified
in 3GPP TS 33.122 [16];
2\. store the Notification Destination URI for security related notification;
3\. create a new resource as defined in clause 8.5.2.1; and
4\. return the security method information and the CAPIF Resource URI in the
response message.
#### 5.6.2.3 Obtain_Authorization
##### 5.6.2.3.1 General
This service operation is used by an API invoker to negotiate and obtain
authorization information from the CAPIF core function. The information
received by API invoker shall be used for authorization to invoke service APIs
exposed by the API exposing function.
##### 5.6.2.3.2 Obtain authorization using Obtain_Authorization service
operation
To obtain authorization information from the CAPIF core function to invoke
service APIs, the API invoker shall perform the functions of the resource
owner, client and redirection endpoints as described in clause 6.5.2.3 of 3GPP
TS 33.122 [16].
The API invoker shall send a POST request to the \"Token Endpoint\", as
described in IETF RFC 6749 [23], clause 3.2. The \"Token Endpoint\" URI shall
be:
> {apiRoot}/capif-security/v1/securities/{securityId}/token
>
> where {securityId} is the API invoker identifier and represents the
> \"Individual trusted API invoker\" resource created during obtain security
> method, as described in clause 5.6.2.2.\ \ The body of the HTTP POST request
> shall indicate that the required OAuth2 grant must be of type
> \"client_credentials\". The \"scope\" parameter (if present) shall include a
> list of AEF identifiers and its associated API names the API invoker is
> trying to access (i.e., the API invoker expected scope).
>
> The API invoker may use HTTP Basic authentication towards this endpoint,
> using the API invoker identifier as \"username\" and the onboarding secret
> as \"password\". Such username and password may be included in the header or
> body of the HTTP POST request.
On success, \"200 OK\" shall be returned. The payload body of the POST
response shall contain the requested access token, the token type and the
expiration time for the token. The access token shall be a JSON Web Token
(JWT) as specified in IETF RFC 7519 [24]. The access token returned by the
CAPIF core function shall include the claims encoded as a JSON object as
specified in clause 8.5.4.2.8 and then digitally signed using JWS as specified
in IETF RFC 7515 [25] and in Annex C.1 of 3GPP TS 33.122 [16].
The digitally signed access token shall be converted to the JWS Compact
Serialization encoding as a string as specified in clause 7.1 of IETF RFC 7515
[25].
If the access token request fails at the CAPIF core function, the CAPIF core
function shall return \"400 Bad Request\" status code, including a JSON object
in the response payload, that includes details about the specific error that
occurred.
#### 5.6.2.4 Obtain_API_Invoker_Info
##### 5.6.2.4.1 General
This service operation is used by an API exposing function to obtain the
security information of API Invokers to be able to authenticate them and
authorize each service API invocation by them.
##### 5.6.2.4.2 Obtain API invoker\'s security information using
Obtain_API_Invoker_Info service operation
To obtain authentication or authorization information from the CAPIF core
function to authenticate or authorize an API invoker, the API exposing
function shall send an HTTP GET message to that API invoker\'s resource
representation URI in the CAPIF core function with an indication to request
authentication and/or authorization information, as specified in clause
8.5.2.3.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall:
1\. determine the security information of API invoker for all the service API
interfaces of the API exposing function; and
2\. return the security information in the response message.
NOTE: Functions from 3rd party API provider domain can also access this
service operation with sufficient permissions.
#### 5.6.2.5 Revoke_Authentication
##### 5.6.2.5.1 General
This service operation is used by an API exposing function to invalidate the
authorization of a specified API Invoker to invoke service APIs exposed by the
calling API exposing function.
##### 5.6.2.5.2 Invalidate authorization using Revoke_Authorization service
operation
To invalidate authorization of an API invoker for all service APIs, the API
exposing function shall send an HTTP DELETE message to that API invoker\'s
resource representation URI in the CAPIF core function using the API invoker
ID as specified in clause 8.5.2.3.3.2.
Upon receiving the HTTP DELETE message, the CAPIF core function shall delete
the resource representation and shall notify the API invoker of the
authorization invalidation using the Notification Destination URI received in
the Obtain_Security_Method message.
The CAPIF core function shall also invalidate the previously assigned access
token when the authorization of all service APIs are revoked for the API
invoker.
To invalidate authorization of an API invoker for some service APIs, the API
exposing function shall send an HTTP POST message to that API invoker\'s
\"delete\" custom resource representation URI in the CAPIF core function with
a list of the service APIs that should be revoked.
Upon receiving the HTTP POST message, the CAPIF core function shall revoke the
authorization of the API invoker for the indicated service APIs (e.g. it may
update the list of unauthorized APIs locally); and shall notify the API
invoker of the authorization invalidation using the Notification Destination
URI received in the Obtain_Security_Method message.
In both alternatives, the CAPIF core function shall acknowledge the HTTP
request from the API exposing function.
NOTE: Functions from 3rd party API provider domain can also access this
service operation with sufficient permissions.
## 5.7 CAPIF_Monitoring_API
The CAPIF monitoring API as defined in 3GPP TS 23.222 [2], allow the API
management function via CAPIF-5/5e reference points to monitor service API
invocations and receive such monitoring events from the CAPIF core function.
The CAPIF_Monitoring_API shall use the CAPIF_Events_API as described in clause
8.3 by setting the CAPIFEvent to one of the events as described in clause
8.3.4.3.3.
## 5.8 CAPIF_Logging_API_Invocation_API
### 5.8.1 Service Description
#### 5.8.1.1 Overview
The Logging API invocations APIs, as defined in 3GPP TS 23.222 [2], allow API
exposing functions via CAPIF-3/3e reference points to log the information
related to service API invocations on the CAPIF core function.
NOTE: Functions from 3rd party API provider domain can also access this API
with sufficient permissions.
### 5.8.2 Service Operations
#### 5.8.2.1 Introduction
Table 5.8.2.1-1: Operations of the CAPIF_Logging_API_Invocation_API
* * *
**Service operation name** **Description** **Initiated by** Log_API_Invocation
This service operation is used by an API exposing function to log API
invocation information on CAPIF core function. API exposing function
* * *
#### 5.8.2.2 Log_API_Invocation_API
##### 5.8.2.2.1 General
This service operation is used by an API exposing function to log API
invocation information on CAPIF core function.
##### 5.8.2.2.2 Logging service API invocations using Log_API_Invocation
service operation
To log service API invocations at the CAPIF core function, the API exposing
function shall send an HTTP POST message to the CAPIF core function. The body
of the HTTP POST message shall include API exposing function identity
information and API invocation log information as specified in clause
8.7.2.2.3.1.
Upon receiving the above described HTTP POST message, the CAPIF core function
shall:
1\. verify the identity of the API exposing function and check if the API
exposing function is authorized to create service API invocation logs;
2\. if the API exposing function is authorized to create service API
invocation logs, the CAPIF core function shall:
a. process the API invocation log information received in the HTTP POST
message and store the API invocation log information in the API repository;
b. create a new resource as defined in clause 8.7.2.1; and
c. return the CAPIF Resource Identifier in the response message.
## 5.9 CAPIF_Auditing_API
### 5.9.1 Service Description
#### 5.9.1.1 Overview
The Auditing API, as defined in 3GPP TS 23.222 [2], allows API management
functions via CAPIF-5/5e reference points to query the log information stored
on the CAPIF core function.
NOTE: Functions from 3rd party API provider domain can also access this API
with sufficient permissions.
### 5.9.2 Service Operations
#### 5.9.2.1 Introduction
Table 5.9.2.1-1: Operations of the CAPIF_Auditing_API
* * *
**Service operation name** **Description** **Initiated by**
Query_Invocation_Logs This service operation is used by an API management
function to query API invocation information logs stored on CAPIF core
function. API management function
* * *
#### 5.9.2.2 Query_Invocation_Logs_API
##### 5.9.2.2.1 General
This service operation is used by an API management function to query API
invocation information logs stored on CAPIF core function.
##### 5.9.2.2.2 Query API invocation information logs using
Query_Invocation_Logs service operation
To query service API invocation logs at the CAPIF core function, the API
management function shall send an HTTP GET message with the API management
function identity information and the log query to the CAPIF core function as
specified in clause 8.8.2.2.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall:
1\. verify the identity of the API management function and check if the API
management function is authorized to query the service API invocation logs;
2\. if the API management function is authorized to query the service API
invocation logs, the CAPIF core function shall:
a. search the API invocation logs for logs matching the Log Query criteria;
and
b. return the search results in the response message.
## 5.10 CAPIF_Access_Control_Policy_API
### 5.10.1 Service Description
#### 5.10.1.1 Overview
The CAPIF access control policy APIs allow API exposing function via
CAPIF-3/3e reference points to obtain the service API access policy from the
CAPIF core function.
NOTE: Functions from 3rd party API provider domain can also access this API
with sufficient permissions.
### 5.10.2 Service Operations
#### 5.10.2.1 Introduction
Table 5.3.2.1-1: Operations of the CAPIF_Access_Control_Policy_API
* * *
**Service operation name** **Description** **Initiated by**
Obtain_Access_Control_Policy This service operation is used by an API exposing
function to obtain the access control policy from the CAPIF core function. API
exposing function
* * *
#### 5.10.2.2 Obtain_Access_Control_Policy
##### 5.10.2.2.1 General
This service operation is used by an API exposing function to obtain the
access control policy from the CAPIF core function.
##### 5.10.2.2.2 API exposing function obtaining access control policy from
the CAPIF core function using Obtain_Access_Control_Policy service operation
To obtain the access control policy from the CAPIF core function, the API
exposing function shall send an HTTP GET message to the CAPIF core function
with the API exposing function Identifier and API identification. The GET
message may include API invoker ID for retrieving access control policy of the
requested API invoker as specified in clause 8.6.2.2.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall
1\. verify the identity of the API exposing function and check if the API
exposing function is authorized to obtain the access control policy
corresponding to the API identification;
2\. if the API exposing function is authorized to obtain the access control
policy, the CAPIF core function shall respond with the access control policy
information corresponding to the API identification and API invoker ID (if
present) in the HTTP GET message.
### 5.10.3 Related Events
The CAPIF_Access_Control_Policy_API supports the subscription and notification
of the status of access control information via the CAPIF_Events_API. The
related events are specified in clause 8.3.4.3.3.
## 5.11 CAPIF_API_Provider_Management_API
### 5.11.1 Service Description
#### 5.11.1.1 Overview
The CAPIF API provider management APIs, as defined in 3GPP TS 23.222 [2],
allow API management functions via CAPIF-5 and CAPIF-5e reference points to
register, deregister and update registration information of API provider
domain functions (API Exposing Function, API Publishing Function, API
management Function) as a recognized API provider domain of the CAPIF domain.
### 5.11.2 Service Operations
#### 5.11.2.1 Introduction
The service operations defined for the CAPIF API Provider Management API are
shown in table 5.11.2.1-1.
Table 5.11.2.1-1: Operations of the CAPIF_API_Provider_Management_API
* * *
**Service operation name** **Description** **Initiated by**
Register_API_Provider This service operation is used by an API management
function to register API provider domain functions as a recognized API
provider domain of the CAPIF domain. API Management Function
Update_API_Provider This service operation is used by an API management
function to update the API provider domain functions details in the CAPIF
domain. API Management Function Deregister_API_Provider This service operation
is used by an API management function to deregister API provider domain
functions as a recognized API provider domain of the CAPIF domain. API
Management Function
* * *
#### 5.11.2.2 Register_API_Provider
##### 5.11.2.2.1 General
This service operation is used by an API management function to register API
provider domain functions as a recognized API provider of CAPIF domain.
##### 5.11.2.2.2 API provider domain functions registering as a recognized API
provider domain function of CAPIF using Register_API_Provider service
operation
To register API provider domain as a recognized API provider of the CAPIF, the
API management function shall send a HTTP POST message to the CAPIF core
function. The body of the HTTP POST message shall include API provider
Enrolment Details, consisting of details of all API provider domain functions
and security information for CAPIF core function to validate the registration
request.
Upon receiving the above described HTTP POST message, the CAPIF core function
validates the security information and determine if the request sent by API
management function is authorized or not. If the API management function is
authorized, CAPIF core function shall:
a. create the API provider domain profile consisting of API provider domain
ID, API provider domain functions profiles as per the request. CAPIF core
function shall assign the identities for the API provider domain functions;
b. create a new resource as defined in clause 8.9.2.2.3.1; and
c. return the API provider domain profile, the CAPIF Resource URI in the
response message and registration failure information specific to individual
API provider domain functions.
#### 5.11.2.3 Update_API_Provider
##### 5.11.2.3.1 General
This service operation is used by an API management function to update API
provider domain function details on the CAPIF domain.
##### 5.11.2.3.2 API management function updating API provider domain function
details on CAPIF using Update_API_Provider service operation
To update the API provider domain profile and its individual functions details
on CAPIF domain, the API management function shall send a HTTP PUT message to
its resource representation in the CAPIF core function as specified in clause
8.9.2.3.3.1, requesting to replace all properties in the existing resource,
addressed by the URI received in the response to the request that has created
the API provider domain profile resource. The property
\"apiProviderDomainId\", shall remain unchanged from the previously provided
values. The body of the HTTP PUT message shall include the
APIProviderEnrolmentDetails data structure that need to be updated. If the
\"PatchUpdate\" feature defined in clause 8.9.6 is supported for modification
of the API provider domain profile, the consumer (e.g. API publishing
function) may send an HTTP PATCH request message to the concerned service API
resource URI in the CAPIF core function. The body of the HTTP PATCH request
message shall include the APIProviderEnrolmentDetailsPatch data structure.
Upon receiving the described HTTP PUT or PATCH request message:
1\. the CAPIF core function shall process the updates received in the HTTP PUT
or PATCH request message and determine if the request sent by API management
function is authorized or not;
2\. verify that the \"apiProviderDomainId\" property is same as in the API
provider domain resource on CAPIF Core Function.
3\. if the API management function is authorized and the property
\"apiProviderDomainId\" matches, then the CAPIF core function shall:
a. replace/modify the representation of the resource identified by the CAPIF
Resource URI of the API management function\'s HTTP PUT or PATCH request with
updated information in the request;
b. update the individual API provider domain function profiles as per the
request. CAPIF core function shall create new API provider domain function
profiles along with assignment of identities, if the API provider domain
functions profiles in the request do not exist in CAPIF; and
c. return a \"200 OK\" status code with the updated API provider domain
information, or a \"204 No Content\" status code.
#### 5.11.2.4 Deregister_API_Provider
##### 5.11.2.4.1 General
This service operation is used by an API management function to deregister the
API provider domain function as a recognized API provider of the CAPIF domain.
##### 5.11.2.4.2 API provider domain functions deregistering as a recognized
API provider domain function of CAPIF using Deregister_API_Provider service
operation
To deregister API provider domain as a recognized API provider of the CAPIF
domain, the API management function shall send an HTTP DELETE message to its
resource representation in the CAPIF core function as specified in clause
8.9.2.3.3.2.
Upon receiving the HTTP DELETE message, the CAPIF core function shall:
1\. determine if the request sent by the API management functions is
authorized or not;
2\. if the API management function\'s request is authorized, the CAPIF core
function shall:
a. delete the resource representation pointed by the CAPIF Resource
Identifier; and
b. delete the related API provider domain profile.
## 5.12 CAPIF_Routing_Info_API
### 5.12.1 Service Description
#### 5.12.1.1 Overview
The CAPIF routing info API allows an API exposing function via CAPIF-3/3e
reference point to obtain the API routing information from the CAPIF core
function.
NOTE: Functions from 3rd party API provider domain can also access this API
routing information with sufficient permissions.
### 5.12.2 Service Operations
#### 5.12.2.1 Introduction
Table 5.12.2.1-1: Operations of the CAPIF_Routing_Info_API
* * *
Service operation name Description Initiated by Obtain_Routing_Info This
service operation is used by an API exposing function to obtain the API
routing information from the CAPIF core function. API exposing function
* * *
#### 5.12.2.2 Obtain_Routing_Info
##### 5.12.2.2.1 General
This service operation is used by an API exposing function to obtain the API
routing information from the CAPIF core function.
##### 5.12.2.2.2 API exposing function obtaining API routing information from
the CAPIF core function using Obtain_Routing_Info service operation
To obtain the API routing information from the CAPIF core function, the API
exposing function shall send an HTTP GET request message to the CAPIF core
function with the API exposing function Identifier and API identification as
specified in clause 8.10.2.2.3.1.
Upon receiving the above described HTTP GET message, the CAPIF core function
shall
1\. verify the identity of the API exposing function and check if the API
exposing function is authorized to obtain the API routing information
corresponding to the API identification;
2\. if the API exposing function is authorized to obtain the API routing
information, the CAPIF core function shall respond with the API routing
information corresponding to the API identification in the HTTP GET response
message.
# 6 Services offered by the API exposing function
## 6.1 Introduction of Services
The table 6.1-1 lists the API exposing function APIs below the service name. A
service description clause for each API gives a general description of the
related API.
Table 6.1-1: List of AEF Services
* * *
Service Name Service Operations Operation Semantics Consumer(s)
AEF_Security_API Initiate_Authentication Request/ Response API Invoker
Revoke_Authorization Request/ Response CAPIF core function
* * *
Table 6.1-2 summarizes the corresponding APIs defined in this specification.
Table 6.1-2: API Descriptions
* * *
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex** AEF_Security_API 9.1 AEF Security API Service
TS29222_AEF_Security_API.yaml aef-security A.10
* * *
## 6.2 AEF_Security_API
### 6.2.1 Service Description
#### 6.2.1.1 Overview
The AEF securityAPI, allows an API invokers via CAPIF-2/2e reference points to
request API exposing function to ensure that authentication parameters
necessary for authentication of the API invoker are available with the API
exposing function. If the necessary authentication parameters are not
available, the API exposing function fetches necessary authentication
parameters from CAPIF core function to authenticate the API invoker.
The AEF security API, also allows the CAPIF core function via CAPIF-3/3e
reference points to request API exposing function to revoke the authorization
of service APIs for an API invoker.
### 6.2.2 Service Operations
#### 6.2.2.1 Introduction
The service operation defined for AEF_Security_API is shown in table
6.2.2.1-1.
Table 6.2.2.1-1: Operations of the AEF_Security_API
* * *
Service operation name Description Initiated by Initiate_Authentication This
service operation is used by an API invoker to request API exposing function
to confirm necessary authentication data is available to authenticate the API
invoker API invoker Revoke_Authorization This service operation is used by the
CAPIF core function to request the API exposing function to revoke the
authorization of service APIs for an API invoker. CAPIF core function
* * *
#### 6.2.2.2 Initiate_Authentication
##### 6.2.2.2.1 General
This service operation is used by an API invoker to initiate authentication
with the API exposing function. On receiving the Initiate_Authentication the
API exposing function fetches the authentication information of the API
invoker from the CAPIF core function, if required.
##### 6.2.2.2.2 API invoker initiating authentication using
Initiate_Authentication service operation
To initiate authentication with the API exposing function, the API invoker
shall send an HTTP POST message to the API exposing function with the API
invoker ID to the URI \"{apiRoot}/aef-security/v1/check-authentication\".
Upon receiving the above described HTTP POST message, the API exposing
function shall check if the credentials of the API invoker for authentication
are available with the API exposing function. If the credentials of the API
invoker for authentication are not available, the API exposing function shall
use the service defined in clause 5.6.2.4.2 to fetch the credentials from the
CAPIF core function.
The API exposing function shall store the received credentials and respond to
the API invoker with 200 OK status code.
#### 6.2.2.3 Revoke_Authorization
##### 6.2.2.3.1 General
This service operation is used by CAPIF core function to revoke authorization
of service APIs (e.g. due to policy change in the CAPIF core function). On
receiving the Revoke_Authorization the API exposing function revokes
authorization of the API invoker for the service APIs indicated in the
request.
##### 6.2.2.3.2 CAPIF core function initiating revocation using
Revoke_Authorization service operation
To revoke authorization, the CAPIF core function shall send an HTTP POST
message to the API exposing function with the API invoker ID and a list of
service API IDs on the URI \"{apiRoot}/aef-security/v1/revoke-authorization\".
Upon receiving the HTTP POST message, the API exposing function shall revoke
the authorization of the API invoker for the indicated service APIs (e.g. it
may update the list of unauthorized APIs locally), and then respond to the
CAPIF core function with 200 OK status code.
The CAPIF core function shall also notify the API invoker of the authorization
invalidation using the Notification Destination URI received in the
Obtain_Security_Method message.
# 7 CAPIF Design Aspects Common for All APIs
## 7.1 General
CAPIF APIs are RESTful APIs that allow secure access to the capabilities
provided by CAPIF.
This document specifies the procedures triggered at different functional
entities as a result of API invocation requests and event notifications. The
stage-2 level requirements and signalling flows are defined in 3GPP TS 23.222
[2].
Several design aspects, as mentioned in the following clauses, are specified
in 3GPP TS 29.122 [14] and referenced by this specification.
## 7.2 Data Types
### 7.2.1 General
This clause defines structured data types, simple data types and enumerations
that are applicable to several APIs defined in the present specification and
can be referenced from data structures defined in the subsequent clauses.
In addition, data types that are defined in OpenAPI Specification [3] can also
be referenced from data structures defined in the subsequent clauses.
NOTE: As a convention, data types in the present specification are written
with an upper-case letter in the beginning. Parameters are written with a
lower-case letter in the beginning. Enumerations are written using
UPPER_WITH_UNDERSCORE case convention. As an exception, data types that are
also defined in OpenAPI Specification [3] can use a lower-case case letter in
the beginning for consistency.
Table 7.2.1-1 specifies data types re-used by the CAPIF from other
specifications, including a reference to their respective specifications and
when needed, a short description of their use within the CAPIF.
Table 7.2.1-1: Re-used Data Types
+--------------------+-----------------------+-----------------------+ | Data type | Reference | Comments | +--------------------+-----------------------+-----------------------+ | Uri | 3GPP TS 29.122 [14] | | +--------------------+-----------------------+-----------------------+ | TestNotification | 3GPP TS 29.122 [14] | Following | | | | clarifications apply: | | | | | | | | - The SCEF is the | | | | CAPIF core function; | | | | and | | | | | | | | - The SCS/AS is the | | | | Subscriber. | +--------------------+-----------------------+-----------------------+ | WebsockNotifConfig | 3GPP TS 29.122 [14] | Following | | | | clarifications apply: | | | | | | | | - The SCEF is the | | | | CAPIF core function; | | | | and | | | | | | | | - The SCS/AS is the | | | | Subscriber. | +--------------------+-----------------------+-----------------------+
### 7.2.2 Referenced structured data types
Table 7.2.2-1 lists structured data types defined in this specification
referenced by multiple services:
Table 7.2.2-1: Referenced Structured Data Types
* * *
Data type Reference Description Log Clause 8.7.4.2.3 Individual log entries
InterfaceDescription Clause 8.2.4.2.3 Description of the API interface
ServiceAPIDescription Clause 8.2.4.2.2 Description of the service API
* * *
### 7.2.3 Referenced Simple data types and enumerations
Following simple data types defined in Table 7.2.3.1-1 are applicable to
several APIs in this document:
Table 7.2.3.1-1: Simple data types applicable to several APIs
* * *
Type name Reference Description CAPIFResourceId n/a string chosen by the CAPIF
core function to serve as identifier in a resource URI. DataFormat Clause
8.2.4.3.4 Data format used by the API Protocol Clause 8.2.4.3.3 Protocol used
by the API
* * *
## 7.3 Usage of HTTP
For CAPIF APIs, support of HTTP/1.1 (IETF RFC 7230 [4], IETF RFC 7231 [5],
IETF RFC 7232 [6], IETF RFC 7233 [7], IETF RFC 7234 [8] and IETF RFC 7235 [9])
over TLS is mandatory and support of HTTP/2 (IETF RFC 7540 [10]) over TLS is
recommended. TLS shall be used as specified in 3GPP TS 33.122 [16].
A functional entity desiring to use HTTP/2 shall use the HTTP upgrade
mechanism to negotiate applicable HTTP version as described in IETF RFC 7540
[10].
## 7.4 Content type
The bodies of HTTP request and successful HTTP responses shall be encoded in
JSON format (see IETF RFC 8259 [12]).
The MIME media type that shall be used within the related Content-Type header
field is \"application/json\", as defined in IETF RFC 8259 [12] , unless
specified otherwise in the API definition.
The JSON objects defined in clause 5.2.3 of 3GPP TS 29.122 [14] for the HTTP
PATCH request shall be supported.
## 7.5 URI structure
7.5.1 Resource URI structure
All API URIs of CAPIF APIs shall be:
**{apiRoot}/\ /\**
\"apiRoot\" is configured by means outside the scope of the present document.
It includes the scheme (\"https\"), host and optional port, and an optional
prefix string. \"apiName\" and \"apiVersion\" shall be set dependent on the
API, as defined in the corresponding clauses below.
All resource URIs in the clauses below are defined relative to the above root
API URI.
NOTE 1: The \"apiVersion\" will only be increased if the new API version
contains backward incompatible changes. Otherwise, the supported feature
mechanism defined in clause 7.8 can be used to negotiate extensions.
NOTE 2: A different root structure can be used when the resource URI is
preconfigured in the API invoking entity.
The root structure may be followed by \"apiSpecificSuffixes\" that are
dependent on the API and are defined separately for each API as resource URI
where they apply:
**{apiRoot}/\ /\/\**
The naming conventions defined in subclause 5.2.4 of 3GPP TS 29.122 [14] shall
apply.
7.5.2 Custom operations URI structure
The custom operation definition is in Annex C of 3GPP TS 29.501 [18].
The URI of a custom operation which is associated with a resource shall have
the following structure:
**{apiRoot}/\
/\/\/\**
Custom operations can also be associated with the service instead of a
resource. The URI of a custom operation which is not associated with a
resource shall have the following structure:
**{apiRoot}/\ /\/\**
In the above URI structures, \"apiRoot\", \"apiName\", \"apiVersion\" and
\"apiSpecificResourceUriPart\" are as defined in clause 7.5.1 and
\"custOpName\" represents the name of the custom operation as defined in
clause 5.1.3.2 of 3GPP TS 29.501 [18].
## 7.6 Notifications
The functional entities
\- shall support the delivery of notifications using a separate HTTP
connection towards an address;
\- may support testing delivery of notifications; and
\- may support the delivery of notification using WebSocket protocol (see IETF
RFC 6455 [13]),
as described in 3GPP TS 29.122 [14], with the following clarifications:
\- the SCEF is the CAPIF core function; and
\- the SCS/AS is the Subscriber.
## 7.7 Error handling
Response bodies for error handling, as described in 3GPP TS 29.122 [14], are
applicable to all APIs in the present specification unless specified
otherwise, with the following clarifications:
\- the SCEF is the CAPIF core function; and
\- the SCS/AS is the functional entity invoking an API.
## 7.8 Feature negotiation
The functional entity invoking an API (i.e. the API invoker, the API exposing
function, the API publishing function or the API management function) and the
CAPIF core function use feature negotiation procedures defined in 3GPP TS
29.122 [14] to negotiate the supported features, with the following
clarifications:
\- description of the SCEF applies to the CAPIF core function;
\- description of the SCS/AS applies to the functional entity invoking an API;
\- the CAPIF Core Function should not register any feature in the NRF; and
\- the AEF should not register any feature for AEF_Security_API in the NRF.
## 7.9 HTTP headers
The HTTP headers and the HTTP custom headers described in 3GPP TS 29.122 [14]
are applicable to all APIs in this document.
## 7.10 Conventions for Open API specification files
The conventions for Open API specification files as specified in clause 5.2.9
of 3GPP TS 29.122 [14] shall be applicable for all APIs in this document.
# 8 CAPIF API Definition
## 8.1 CAPIF_Discover_Service_API
### 8.1.1 API URI
The CAPIF_Discover_Service_API service shall use the
CAPIF_Discover_Service_API.
The request URIs used in HTTP requests from the API invoker towards the CAPIF
core function shall have the Resource URI structure defined in clause 7.5 with
the following clarifications:
\- The \ shall be \"service-apis\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.1.2.
### 8.1.2 Resources
#### 8.1.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.1.2.1-1 depicts the resource URIs structure for the
CAPIF_Discover_Service_API.
Figure 8.1.2.1-1: Resource URI structure of the CAPIF_Discover_Service_API
Table 8.1.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.1.2.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | All published | / | GET | Discover | | service APIs | allServiceAPIs | | published | | | | | service APIs | | (Store) | (NOTE) | | and retrieve a | | | | | collection of | | | | | APIs according | | | | | to certain | | | | | filter | | | | | criteria. | +----------------+----------------+----------------+----------------+ | NOTE: The path | | | | | segment | | | | | \"al | | | | | lServiceAPIs\" | | | | | does not | | | | | follow the | | | | | related naming | | | | | convention | | | | | defined in | | | | | su | | | | | bclause 7.5.1. | | | | | The path | | | | | segment is | | | | | however kept | | | | | as currently | | | | | defined in | | | | | this | | | | | specification | | | | | for backward | | | | | compatibility | | | | | c | | | | | onsiderations. | | | | +----------------+----------------+----------------+----------------+
#### 8.1.2.2 Resource: All published service APIs
##### 8.1.2.2.1 Description
The All published service APIs resource represents a collection of published
service APIs on a CAPIF core function. The resource is modelled as a Store
resource archetype (see Annex C.3 of 3GPP TS 29.501 [18])
##### 8.1.2.2.2 Resource Definition
Resource URI: **{apiRoot}/service-apis/\ /allServiceAPIs**
This resource shall support the resource URI variables defined in table
8.1.2.2.2-1.
Table 8.1.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5
* * *
##### 8.1.2.2.3 Resource Standard Methods
###### 8.1.2.2.3.1 GET
This operation enables to retrieve a list of APIs currently registered in the
CAPIF core function, satisfying a number of filter criteria.
Table 8.1.2.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description Applicability api-invoker-id string M
1 It represents the identifier (assigned by the CCF) ofthe API invoker that is
sending the request. It may also represent the identifier of the CCF that is
sending the request if the request is sent over the CAPIF-6/6e reference
point. (NOTE)  
api-name string O 0..1 Contains the API name as {apiName} part of the URI
structure as defined in clause 5.2.4 of 3GPP TS 29.122 [14].  
api-version string O 0..1 Contains the API major version conveyed in the URI
(e.g. v1).  
comm-type CommunicationType O 0..1 Communication type used by the API (e.g.
REQUEST_RESPONSE).  
protocol Protocol O 0..1 Protocol used by the API.  
aef-id string O 0..1 AEF identifier.  
data-format DataFormat O 0..1 Data format used by the API (e.g. serialization
protocol JSON).  
api-cat string O 0..1 The service API category to which the service API
belongs.  
preferred-aef-loc AefLocation O 0..1 The preferred AEF location. If this
parameter is present, the CCF shall try to discover a matched AEF location the
service API supports. This parameter is ignored by the CCF if there is no
matching record found.  
supported-features SupportedFeatures O 0..1 To filter irrelevant responses
related to unsupported features.  
api-supported-features SupportedFeatures C 0..1 Features supported by the
discovered service API indicated by api-name parameter. This may only be
present if the api-name query parameter is present. ApiSupportedFeatureQuery
NOTE: This parameter is not part of API filter criteria so that it is not used
in matching APIs published in the CCF.
* * *
This method shall support the request data structures specified in table
8.1.2.2.3.1-2 and the response data structures and response codes specified in
table 8.1.2.2.3.1-3.
Table 8.1.2.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.1.2.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | D | M | 1 | 200 OK | The response | | iscoveredAPIs | | | | body contains | | | | | | the result of | | | | | | the search | | | | | | over the list | | | | | | of registered | | | | | | APIs. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 414 URI Too | Indicates | | roblemDetails | | | Long | that the | | | | | | server | | | | | | refuses to | | | | | | process the | | | | | | request | | | | | | because the | | | | | | r | | | | | | equest-target | | | | | | is too long. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.1.2.2.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.1.2.2.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.1.2.2.4 Resource Custom Operations
None.
### 8.1.3 Notifications
None.
### 8.1.4 Data Model
#### 8.1.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.1.4.1-1 specifies the data types defined specifically for the
CAPIF_Discover_Service_API.
Table 8.1.4.1-1: CAPIF_Discover_Service_API specific Data Types
* * *
Data type Section defined Description Applicability DiscoveredAPIs Clause
8.1.4.2.2 Definition of the service API
* * *
Table 8.1.4.1-2 specifies data types re-used by the CAPIF_Discover_Service_API
service.
Table 8.1.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability AefLocation Clause 8.2.4.2.10 AEF
location.  
CommunicationType Clause 8.2.4.3.5 Communication type used by the API.  
ProblemDetails 3GPP TS 29.122 [14] Represents additional information and
details on an error response.  
SupportedFeatures 3GPP TS 29.571 [19] Contains the supported features.
* * *
#### 8.1.4.2 Structured data types
##### 8.1.4.2.1 Introduction
This clause defines the structured data types to be used in resource
representations of the CAPIF_Discover_Service_API.
##### 8.1.4.2.2 Type: DiscoveredAPIs
Table 8.1.4.2.2-1: Definition of type DiscoveredAPIs
* * *
Attribute name Data type P Cardinality Description Applicability
serviceAPIDescriptions array(ServiceAPIDescription) O 1..N Description of the
service API as published by the service. (NOTE)  
NOTE: For the CAPIF_Discover_Service_API, the supportedFeatures attribute of
the ServiceAPIDescription data type shall be provided in the HTTP GET response
of a successful query. In addition, the supportedFeatures attribute may
include one or more supported feature(s) as defined in clause 8.1.6.
* * *
##### 8.1.4.2.3 Void
#### 8.1.4.3 Simple data types and enumerations
None.
### 8.1.5 Error Handling
General error responses are defined in clause 7.7.
### 8.1.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 8.1.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** 1 ApiSupportedFeatureQuery
Indicates the support of the query filter indicating the supported feature(s)
of a service API.
* * *
## 8.2 CAPIF_Publish_Service_API
### 8.2.1 API URI
The CAPIF_Publish_Service_API service shall use the CAPIF_Publish_Service_API.
The request URIs used in HTTP requests from the API publishing function
towards the CAPIF core function shall have the Resource URI structure as
defined in clause 7.5 with the following clarifications:
\- The \ shall be \"published-apis\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.2.2.
### 8.2.2 Resources
#### 8.2.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.2.2.1-1 depicts the resource URIs structure for the
CAPIF_Publish_Service_API.
Figure 8.2.2.1-1: Resource URI structure of the CAPIF_Publish_Service_API
Table 8.2.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.2.2.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description APF
published APIs /{apfId}/service-apis POST Publish a new API GET Retrieve all
published service APIs Individual APF published API /{apfId}/service-
apis/{serviceApiId} GET Retrieve a published service API PUT Update a
published service API PATCH Modify a published service API. DELETE Unpublish a
published service API.
* * *
#### 8.2.2.2 Resource: APF published APIs
##### 8.2.2.2.1 Description
The APF published APIs resource represents all published service APIs of a API
publishing function.
##### 8.2.2.2.2 Resource Definition
Resource URI: **{apiRoot}/published-apis/\ /{apfId}/service-apis**
This resource shall support the resource URI variables defined in table
8.2.2.2.2-1.
Table 8.2.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 apfId string
Identifies the API publishing function; for CAPIF interconnection case, this
string also identifies the CCF which is publishing the service API.
* * *
##### 8.2.2.2.3 Resource Standard Methods
###### 8.2.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.2.2.2.3.1-1.
Table 8.2.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.2.3.1-2 and the response data structures and response codes specified in
table 8.2.2.2.3.1-3.
Table 8.2.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description ServiceAPIDescription M 1 Definition of
the service API being published
* * *
Table 8.2.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | ServiceA | M | 1 | 201 Created | Service API | | PIDescription | | | | published | | | | | | successfully. | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.2.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure:
{apiRoot}/published-apis/\/{apfId}/service-apis/{serviceApiId}
* * *
###### 8.2.2.2.3.2 GET
This method shall support the URI query parameters specified in table
8.2.2.2.3.2-1.
Table 8.2.2.2.3.2-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.2.3.2-2 and the response data structures and response codes specified in
table 8.2.2.2.3.2-3.
Table 8.2.2.2.3.2-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.2.2.2.3.2-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | ar | O | 0..N | 200 OK | Definition of | | ray(ServiceAP | | | | all service | | IDescription) | | | | API(s) | | | | | | published by | | | | | | the API | | | | | | publishing | | | | | | function. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.2.2.2.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.2.2.2.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.2.2.2.4 Resource Custom Operations
None.
#### 8.2.2.3 Resource: Individual APF published API
##### 8.2.2.3.1 Description
The Individual APF published API resource represents an individual published
service API.
##### 8.2.2.3.2 Resource Definition
Resource URI: **{apiRoot}/published-apis/\ /{apfId}/service-
apis/{serviceApiId}**
This resource shall support the resource URI variables defined in table
8.2.2.3.2-1.
Table 8.2.2.3.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 apfId string
Identifies the API publishing function serviceApiId string Identifies an
individual published service API
* * *
##### 8.2.2.3.3 Resource Standard Methods
###### 8.2.2.3.3.1 GET
This method shall support the URI query parameters specified in table
8.2.2.3.3.1-1.
Table 8.2.2.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.3.3.1-2 and the response data structures and response codes specified in
table 8.2.2.3.3.1-3.
Table 8.2.2.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.2.2.3.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | ServiceA | M | 1 | 200 OK | Definition of | | PIDescription | | | | individual | | | | | | service API | | | | | | published by | | | | | | the API | | | | | | publishing | | | | | | function. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.2.2.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.2.2.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.2.2.3.3.2 PUT
This method shall support the URI query parameters specified in table
8.2.2.3.3.2-1.
Table 8.2.2.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.3.3.2-2 and the response data structures and response codes specified in
table 8.2.2.3.3.2-3.
Table 8.2.2.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description ServiceAPIDescription M 1 Updated
definition of the service API.
* * *
Table 8.2.2.3.3.2-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | ServiceA | M | 1 | 200 OK | Definition of | | PIDescription | | | | the service | | | | | | API updated | | | | | | successfully | | | | | | and the | | | | | | updated | | | | | | service API | | | | | | definition is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Definition of | | | | | Content | the service | | | | | | API updated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.2.2.3.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.2.2.3.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.2.2.3.3.3 DELETE
This method shall support the URI query parameters specified in table
8.2.2.3.3.3-1.
Table 8.2.2.3.3.3-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.3.3.3-2 and the response data structures and response codes specified in
table 8.2.2.3.3.3-3.
Table 8.2.2.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.2.2.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | individual | | | | | | published | | | | | | service API | | | | | | matching the | | | | | | serviceApiId | | | | | | is deleted. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.2.2.3.3.3-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.2.2.3.3.3-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.2.2.3.3.4 PATCH
This method shall support the URI query parameters specified in table
8.2.2.3.3.4-1.
Table 8.2.2.3.3.4-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.2.2.3.3.4-2 and the response data structures and response codes specified in
table 8.2.2.3.3.4-3.
Table 8.2.2.3.3.4-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description ServiceAPIDescriptionPatch M 1 Contains
the modifications to be applied to the concerned Individual APF published API
resource.
* * *
Table 8.2.2.3.3.4-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | ServiceA | M | 1 | 200 OK | The | | PIDescription | | | | definition of | | | | | | the service | | | | | | API is | | | | | | updated | | | | | | successfully | | | | | | and a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | modified | | | | | | service API | | | | | | definition is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | definition of | | | | | | the service | | | | | | API is | | | | | | updated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the HTTP | | | | | | PATCH method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.2.2.3.3.4-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.2.2.3.3.4-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.2.2.3.4 Resource Custom Operations
None.
### 8.2.3 Notifications
None.
### 8.2.4 Data Model
#### 8.2.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.2.4.1-1 specifies the data types defined specifically for the
CAPIF_Publish_Service_API service.
Table 8.2.4.1-1: CAPIF_Publish_Service_API specific Data Types
* * *
Data type Section defined Description Applicability AefLocation Clause
8.2.4.2.10 AEF location  
AefProfile Clause 8.2.4.2.4 AEF profile  
CommunicationType Clause 8.2.4.3.5 Communication type of the resource  
CustomOperation Clause 8.2.4.2.7 Custom operation  
DataFormat Clause 8.2.4.3.4 Data format  
InterfaceDescription Clause 8.2.4.2.3 Description of the API interface  
Operation Clause 8.2.4.3.7 HTTP method (e.g. PUT)  
Protocol Clause 8.2.4.3.3 Protocol used by the API  
PublishedApiPath Clause 8.2.4.2.9 The published API path within the same CAPIF
provider domain.  
Resource Clause 8.2.4.2.6 API resource  
SecurityMethod Clause 8.2.4.3.6 Security method (e.g. PKI)  
ServiceAPIDescription Clause 8.2.4.2.2 Description of a service API as
published by the APF.  
ServiceAPIDescriptionPatch Clause 8.2.4.2.11 Represents the parameters to
request the modification of an APF published API resource. PatchUpdate
ShareableInformation Clause 8.2.4.2.8 Information on whether a service API
and/or a service API category can be published to other CCFs.  
Version Clause 8.2.4.2.5 API version information
* * *
Table 8.2.4.1-2 specifies data types re-used by the CAPIF_Publish_Service_API
service:
Table 8.2.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability CivicAddress 3GPP TS 29.572 [30]  
DateTime 3GPP TS 29.122 [14]  
GeographicArea 3GPP TS 29.572 [30]  
Ipv4Addr 3GPP TS 29.122 [14]  
Ipv6Addr 3GPP TS 29.122 [14]  
Port 3GPP TS 29.122 [14]  
SupportedFeatures 3GPP TS 29.571 [19] Used to negotiate the applicability of
optional features defined in table 8.2.6-1. ApiSupportedFeaturePublishing
* * *
#### 8.2.4.2 Structured data types
##### 8.2.4.2.1 Introduction
##### 8.2.4.2.2 Type: ServiceAPIDescription
Table 8.2.4.2.2-1: Definition of type ServiceAPIDescription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | apiName | string | M | 1 | API name, | | | | | | | it is set | | | | | | | as | | | | | | | {apiName} | | | | | | | part of | | | | | | | the URI | | | | | | | structure | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 5.2.4 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.12 | | | | | | | 2 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiId | string | O | 0..1 | API | | | | | | | i | | | | | | | dentifier | | | | | | | assigned | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | published | | | | | | | service | | | | | | | API. | | | | | | | Shall not | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | from the | | | | | | | API | | | | | | | p | | | | | | | ublishing | | | | | | | function | | | | | | | to the | | | | | | | CAPIF | | | | | | | core | | | | | | | function. | | | | | | | Shall be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | response | | | | | | | from the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | API | | | | | | | p | | | | | | | ublishing | | | | | | | function | | | | | | | and in | | | | | | | the HTTP | | | | | | | GET | | | | | | | response | | | | | | | from the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | API | | | | | | | invoker | | | | | | | ( | | | | | | | discovery | | | | | | | API). | | +-----------+-----------+---+-----------+-----------+-----------+ | ae | array(Ae | C | 1..N | AEF | | | fProfiles | fProfile) | | | profile | | | | | | | inf | | | | | | | ormation, | | | | | | | which | | | | | | | includes | | | | | | | the | | | | | | | exposed | | | | | | | API | | | | | | | details | | | | | | | (e.g. | | | | | | | p | | | | | | | rotocol). | | | | | | | For | | | | | | | C | | | | | | | APIF-4/4e | | | | | | | i | | | | | | | nterface, | | | | | | | API | | | | | | | p | | | | | | | ublishing | | | | | | | function | | | | | | | shall | | | | | | | provide | | | | | | | this | | | | | | | attribute | | | | | | | to the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | in | | | | | | | service | | | | | | | API | | | | | | | pu | | | | | | | blishing. | | | | | | | For | | | | | | | C | | | | | | | APIF-1/1e | | | | | | | i | | | | | | | nterface, | | | | | | | the CAPIF | | | | | | | core | | | | | | | function | | | | | | | shall | | | | | | | provide | | | | | | | this | | | | | | | attribute | | | | | | | to the | | | | | | | API | | | | | | | Invoker | | | | | | | during | | | | | | | service | | | | | | | API | | | | | | | d | | | | | | | iscovery. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | de | string | O | 0..1 | Text | | | scription | | | | de | | | | | | | scription | | | | | | | of the | | | | | | | API | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | The | | | dFeatures | dFeatures | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | CAPIF | | | | | | | API. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | shar | Sh | O | 0..1 | R | | | eableInfo | areableIn | | | epresents | | | | formation | | | whether | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | and/or | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | category | | | | | | | can be | | | | | | | published | | | | | | | to other | | | | | | | CCFs. | | +-----------+-----------+---+-----------+-----------+-----------+ | serviceAP | string | C | 0..1 | The | | | ICategory | | | | service | | | | | | | API | | | | | | | category | | | | | | | to which | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | belongs | | | | | | | to. This | | | | | | | attribute | | | | | | | is only | | | | | | | a | | | | | | | pplicable | | | | | | | for | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | i | | | | | | | nterface. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | ccfId | string | C | 0..1 | CAPIF | | | | | | | core | | | | | | | function | | | | | | | i | | | | | | | dentifier | | | | | | | which can | | | | | | | be | | | | | | | contacted | | | | | | | further | | | | | | | for | | | | | | | di | | | | | | | scovering | | | | | | | the | | | | | | | details | | | | | | | of | | | | | | | service | | | | | | | API | | | | | | | inf | | | | | | | ormation. | | | | | | | This | | | | | | | attribute | | | | | | | is only | | | | | | | a | | | | | | | pplicable | | | | | | | for | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | interface | | | | | | | and shall | | | | | | | be | | | | | | | provided | | | | | | | with | | | | | | | s | | | | | | | erviceAPI | | | | | | | Category. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | api | Supporte | O | 0..1 | Provided | Ap | | SuppFeats | dFeatures | | | by the | iSupporte | | | | | | consumer | dFeatureP | | | | | | to | ublishing | | | | | | indicate | | | | | | | the | | | | | | | features | | | | | | | supported | | | | | | | by the | | | | | | | service | | | | | | | API. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | Publish | C | 0..1 | It | | | ubApiPath | edApiPath | | | contains | | | | | | | the | | | | | | | published | | | | | | | API path | | | | | | | within | | | | | | | the same | | | | | | | CAPIF | | | | | | | provider | | | | | | | domain. | | | | | | | it shall | | | | | | | be | | | | | | | provided | | | | | | | by the | | | | | | | CCF when | | | | | | | p | | | | | | | ublishing | | | | | | | the | | | | | | | service | | | | | | | API to | | | | | | | other CCF | | | | | | | via the | | | | | | | CAPIF-6 | | | | | | | reference | | | | | | | point. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | For | | | | | | | CA | | | | | | | PIF_Publ | | | | | | | ish_Serv | | | | | | | ice_API, | | | | | | | the | | | | | | | supported | | | | | | | features | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | | | | | | In | | | | | | | addition, | | | | | | | the | | | | | | | supporte | | | | | | | dFeatures | | | | | | | attribute | | | | | | | may | | | | | | | include | | | | | | | one or | | | | | | | more the | | | | | | | supported | | | | | | | features | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | clau | | | | | | | se 8.2.6. | | | | | | | | | | | | | | NOTE 2: | | | | | | | For | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | i | | | | | | | nterface, | | | | | | | at least | | | | | | | one of | | | | | | | ae | | | | | | | fProfiles | | | | | | | or | | | | | | | serviceAP | | | | | | | ICategory | | | | | | | and the | | | | | | | corr | | | | | | | esponding | | | | | | | ccfId | | | | | | | shall be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.4.2.3 Type: InterfaceDescription
Table 8.2.4.2.3-1: Definition of type InterfaceDescription
* * *
Attribute name Data type P Cardinality Description Applicability ipv4Addr
Ipv4Addr O 0..1 String identifying an IPv4 address (NOTE)  
ipv6Addr Ipv6Addr O 0..1 String identifying an IPv6 address (NOTE)  
port Port O 0..1 Port  
securityMethods array(SecurityMethod) M 1..N Security methods supported by the
interface. It takes precedence over the security methods provided in
AefProfile, for this specific interface  
NOTE: Only one of the attributes \"ipv4Addr\" or \"ipv6Addr\" shall be
included.
* * *
##### 8.2.4.2.4 Type: AefProfile
Table 8.2.4.2.4-1: Definition of type AefProfile
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | aefId | string | M | 1 | AEF | | | | | | | i | | | | | | | dentifier | | +-----------+-----------+---+-----------+-----------+-----------+ | versions | array | M | 1..N | API | | | | (Version) | | | version | | +-----------+-----------+---+-----------+-----------+-----------+ | protocol | Protocol | O | 0..1 | Protocol | | | | | | | used by | | | | | | | the API. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | D | O | 0..1 | Data | | | ataFormat | ataFormat | | | format | | | | | | | used by | | | | | | | the API | | +-----------+-----------+---+-----------+-----------+-----------+ | securi | arr | O | 1..N | Security | | | tyMethods | ay(Securi | | | methods | | | | tyMethod) | | | supported | | | | | | | by the | | | | | | | AEF for | | | | | | | all | | | | | | | in | | | | | | | terfaces. | | | | | | | Certain | | | | | | | i | | | | | | | nterfaces | | | | | | | may have | | | | | | | different | | | | | | | security | | | | | | | methods | | | | | | | supported | | | | | | | in the | | | | | | | attribute | | | | | | | inte | | | | | | | rfaceDesc | | | | | | | riptions. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | string | O | 0..1 | Domain to | | | omainName | | | | which API | | | | | | | belongs | | | | | | | to | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | int | array(Int | O | 1..N | Interface | | | erfaceDes | erfaceDes | | | details | | | criptions | cription) | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ae | Ae | O | 0..1 | The | | | fLocation | fLocation | | | location | | | | | | | in | | | | | | | formation | | | | | | | (e.g. | | | | | | | civic | | | | | | | address, | | | | | | | GPS | | | | | | | coo | | | | | | | rdinates, | | | | | | | data | | | | | | | center | | | | | | | ID) where | | | | | | | the AEF | | | | | | | providing | | | | | | | the | | | | | | | service | | | | | | | API is | | | | | | | located. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Only one | | | | | | | of the | | | | | | | a | | | | | | | ttributes | | | | | | | \"dom | | | | | | | ainName\" | | | | | | | or | | | | | | | \"inter | | | | | | | faceDescr | | | | | | | iptions\" | | | | | | | shall be | | | | | | | included. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Not | | | | | | | ification | | | | | | | or | | | | | | | callback | | | | | | | type of | | | | | | | resource | | | | | | | is not | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.2.4.2.5 Type: Version
Table 8.2.4.2.5-1: Definition of type Version
* * *
Attribute name Data type P Cardinality Description Applicability apiVersion
string M 1 API major version in URI (e.g. v1)  
expiry DateTime O 0..1 Expiry date and time of the AEF service. This
represents the planned retirement date as specified in clause 4.3.1.5 of 3GPP
TS 29.501 [18].  
resources array(Resource) O 1..N Resources supported by the API. It may
include the custom operations with resource association.  
custOperations array(CustomOperation) O 1..N Custom operations without
resource association.
* * *
##### 8.2.4.2.6 Type: Resource
Table 8.2.4.2.6-1: Definition of type Resource
* * *
Attribute name Data type P Cardinality Description Applicability resourceName
string M 1 Resource name  
commType CommunicationType M 1 Communication type used by the API resource  
uri string M 1 Relative URI of the API resource, it is set as
{apiSpecificSuffixes} part of the URI structure as defined in clause 5.2.4 of
3GPP TS 29.122 [14].  
custOpName string O 0..1 it is set as {custOpName} part of the URI structure
for a custom operation associated with a resource as defined in clause 5.2.4
of 3GPP TS 29.122 [14].  
operations array(Operation) C 1..N Supported HTTP methods for the API
resource. Only applicable when the protocol in AefProfile indicates HTTP.  
description string O 0..1 Text description of the API resource.
* * *
##### 8.2.4.2.7 Type: CustomOperation
Table 8.2.4.2.7-1: Definition of type CustomOperation
* * *
Attribute name Data type P Cardinality Description Applicability commType
CommunicationType M 1 Communication type used by the API resource  
custOpName string M 1 it is set as {custOpName} part of the URI structure for
a custom operation without resource association as defined in clause 5.2.4 of
3GPP TS 29.122 [14].  
operations array(Operation) C 1..N Supported HTTP methods for the API
resource. Only applicable when the protocol in AefProfile indicates HTTP.  
description string O 0..1 Text description of the custom operation.
* * *
##### 8.2.4.2.8 Type: ShareableInformation
Table 8.2.4.2.8-1: Definition of type ShareableInformation
* * *
Attribute name Data type P Cardinality Description Applicability isShareable
boolean M 1 Set to \"true\" indicates that the service API and/or the service
API category can be shared to the list of CAPIF provider domain information.
Otherwise set to \"false\".  
capifProvDoms array(string) O 1..N List of CAPIF provider domains to which the
service API information to be shared. (NOTE)  
NOTE: Only one CAPIF provider domain information shall be provided via the
CAPIF-6e interface.
* * *
##### 8.2.4.2.9 Type: PublishedApiPath
Table 8.2.4.2.9-1: Definition of type PublishedApiPath
* * *
Attribute name Data type P Cardinality Description Applicability ccfIds
array(string) O 1..N A list of CCF identifiers where the service API is
already published.
* * *
##### 8.2.4.2.10 Type: AefLocation
Table 8.2.4.2.10-1: Definition of type AefLocation
* * *
Attribute name Data type P Cardinality Description Applicability civicAddr
CivicAddress O 0..1 Identifies the civic address where the AEF providing the
service API is located. (NOTE)  
geoArea GeographicArea O 0..1 Identifies the geographic area where the AEF
providing the service API is located. (NOTE)  
dcId string O 0..1 Identifies the data center where the AEF providing the
service API is located. (NOTE)  
NOTE: At least one of the attributes shall be included.
* * *
##### 8.2.4.2.11 Type: ServiceAPIDescriptionPatch
Table 8.2.4.2.11-1: Definition of type ServiceAPIDescriptionPatch
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | ae | array(Ae | O | 1..N | AEF | | | fProfiles | fProfile) | | | profile | | | | | | | inf | | | | | | | ormation, | | | | | | | which | | | | | | | includes | | | | | | | the | | | | | | | exposed | | | | | | | API | | | | | | | details | | | | | | | (e.g. | | | | | | | p | | | | | | | rotocol). | | +-----------+-----------+---+-----------+-----------+-----------+ | de | string | O | 0..1 | Text | | | scription | | | | de | | | | | | | scription | | | | | | | of the | | | | | | | API | | +-----------+-----------+---+-----------+-----------+-----------+ | shar | Sh | O | 0..1 | R | | | eableInfo | areableIn | | | epresents | | | | formation | | | whether | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | and/or | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | category | | | | | | | can be | | | | | | | published | | | | | | | to other | | | | | | | CCFs. | | +-----------+-----------+---+-----------+-----------+-----------+ | serviceAP | string | O | 0..1 | The | | | ICategory | | | | service | | | | | | | API | | | | | | | category | | | | | | | to which | | | | | | | the | | | | | | | service | | | | | | | API | | | | | | | belongs. | | | | | | | This | | | | | | | attribute | | | | | | | is only | | | | | | | a | | | | | | | pplicable | | | | | | | for | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | i | | | | | | | nterface. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | ccfId | string | O | 0..1 | CAPIF | | | | | | | core | | | | | | | function | | | | | | | i | | | | | | | dentifier | | | | | | | which can | | | | | | | be | | | | | | | contacted | | | | | | | further | | | | | | | for | | | | | | | di | | | | | | | scovering | | | | | | | the | | | | | | | details | | | | | | | of | | | | | | | service | | | | | | | API | | | | | | | inf | | | | | | | ormation. | | | | | | | This | | | | | | | attribute | | | | | | | is only | | | | | | | a | | | | | | | pplicable | | | | | | | for | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | interface | | | | | | | and shall | | | | | | | be | | | | | | | provided | | | | | | | if the | | | | | | | \"se | | | | | | | rviceAPIC | | | | | | | ategory\" | | | | | | | attribute | | | | | | | is | | | | | | | provided. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | api | Supporte | O | 0..1 | Indicates | Ap | | SuppFeats | dFeatures | | | the | iSupporte | | | | | | features | dFeatureP | | | | | | supported | ublishing | | | | | | by the | | | | | | | service | | | | | | | API. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | Publish | O | 0..1 | It | | | ubApiPath | edApiPath | | | contains | | | | | | | the | | | | | | | published | | | | | | | API path | | | | | | | within | | | | | | | the same | | | | | | | CAPIF | | | | | | | provider | | | | | | | domain. | | | | | | | It is | | | | | | | a | | | | | | | pplicable | | | | | | | only for | | | | | | | the | | | | | | | CAPIF-6 | | | | | | | reference | | | | | | | point. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: For | | | | | | | C | | | | | | | APIF-6/6e | | | | | | | i | | | | | | | nterface, | | | | | | | either | | | | | | | the | | | | | | | \"aefP | | | | | | | rofiles\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"se | | | | | | | rviceAPIC | | | | | | | ategory\" | | | | | | | attribute | | | | | | | and the | | | | | | | corr | | | | | | | esponding | | | | | | | \"ccfId\" | | | | | | | attribute | | | | | | | may be | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 8.2.4.3 Simple data types and enumerations
##### 8.2.4.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 8.2.4.3.2 Simple data types
The simple data types defined in table 8.2.4.3.2-1 shall be supported.
Table 8.2.4.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability n/a
* * *
##### 8.2.4.3.3 Enumeration: Protocol
Table 8.2.4.3.3-1: Enumeration Protocol
* * *
Enumeration value Description Applicability HTTP_1_1 HTTP version 1.1  
HTTP_2 HTTP version 2
* * *
##### 8.2.4.3.4 Enumeration: DataFormat
Table 8.2.4.3.4-1: Enumeration DataFormat
* * *
Enumeration value Description Applicability JSON Serialization protocol:
JavaScript Object Notation
* * *
##### 8.2.4.3.5 Enumeration: CommunicationType
Table 8.2.4.3.5-1: Enumeration CommunicationType
* * *
Enumeration value Description Applicability REQUEST_RESPONSE The communication
is of the type request-response.  
SUBSCRIBE_NOTIFY The communication is of the type subscribe-notify
* * *
##### 8.2.4.3.6 Enumeration: SecurityMethod
Table 8.2.4.3.6-1: Enumeration SecurityMethod
* * *
Enumeration value Description Applicability PSK Security method 1 (Using TLS-
PSK) as described in 3GPP TS 33.122 [16].  
PKI Security method 2 (Using PKI) as described in 3GPP TS 33.122 [16].  
OAUTH Security method 3 (TLS with OAuth token) as described in 3GPP TS 33.122
[16].
* * *
##### 8.2.4.3.7 Enumeration: Operation
Table 8.2.4.3.7-1: Enumeration Operation
* * *
Enumeration value Description Applicability GET HTTP GET method  
POST HTTP POST method  
PUT HTTP PUT method  
PATCH HTTP PATCH method  
DELETE HTTP DELETE method
* * *
### 8.2.5 Error Handling
General error responses are defined in clause 7.7.
### 8.2.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 8.2.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** 1
ApiSupportedFeaturePublishing Indicates the support of publishing with
supported feature for a service API. 2 PatchUpdate Indicates the support of
the PATCH method for updating an APF published API resource.
* * *
## 8.3 CAPIF_Events_API
### 8.3.1 API URI
The CAPIF_Events_API service shall use the CAPIF_Events_API.
The request URIs used in HTTP requests from the Subscriber towards the CAPIF
core function shall have the Resource URI structure as defined in clause 7.5
with the following clarifications:
\- The \ shall be \"capif-events\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.3.2.
### 8.3.2 Resources
#### 8.3.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.3.2.1-1 depicts the resource URIs structure for the CAPIF_Events_API.
Figure 8.3.2.1-1: Resource URI structure of the CAPIF_Events_API
Table 8.3.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.3.2.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description
CAPIF Events Subscriptions /{subscriberId}/subscriptions POST Creates a new
individual CAPIF Event Subscription
Individual CAPIF Events Subscription /{subscriberId}/subscriptions/\ DELETE
Deletes an individual CAPIF Event Subscription identified by the
subscriptionId {subscriptionId}
* * *
#### 8.3.2.2 Resource: CAPIF Events Subscriptions
##### 8.3.2.2.1 Description
The CAPIF Events Subscriptions resource represents all subscriptions of
aSubscriber.
##### 8.3.2.2.2 Resource Definition
Resource URI: **{apiRoot}/capif-events/\
/{subscriberId}/subscriptions**
This resource shall support the resource URI variables defined in table
8.3.2.2.2-1.
Table 8.3.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 subscriberId string ID
of the Subscriber
* * *
##### 8.3.2.2.3 Resource Standard Methods
###### 8.3.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.3.2.2.3.1-1.
Table 8.3.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.3.2.2.3.1-2 and the response data structures and response codes specified in
table 8.3.2.2.3.1-3.
Table 8.3.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description EventSubscription M 1 Create a new
individual CAPIF Events Subscription resource.
* * *
Table 8.3.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | Even | M | 1 | 201 Created | CAPIF Events | | tSubscription | | | | Subscription | | | | | | resource | | | | | | created | | | | | | s | | | | | | uccessfully.\ | | | | | | \ | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.3.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/capif-
events/\/{subscriberId}/subscriptions/{subscriptionId}
* * *
##### 8.3.2.2.4 Resource Custom Operations
None.
#### 8.3.2.3 Resource: Individual CAPIF Events Subscription
##### 8.3.2.3.1 Description
The Individual CAPIF Events Subscription resource represents an individual
event subscription of aSubscriber.
##### 8.3.2.3.2 Resource Definition
Resource URI: **{apiRoot}/capif-events/\
/{subscriberId}/subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
8.3.2.3.2-1.
Table 8.3.2.3.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 subscriberId string ID
of the Subscriber subscriptionId string Identifies an individual Events
Subscription
* * *
##### 8.3.2.3.3 Resource Standard Methods
###### 8.3.2.3.3.1 DELETE
This method shall support the URI query parameters specified in table
8.3.2.3.3.1-1.
Table 8.3.2.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.3.2.3.3.1-2 and the response data structures and response codes specified in
table 8.3.2.3.3.1-3.
Table 8.3.2.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.3.2.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | individual | | | | | | CAPIF Events | | | | | | Subscription | | | | | | matching the | | | | | | s | | | | | | ubscriptionId | | | | | | is deleted. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.3.2.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.3.2.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.3.2.3.4 Resource Custom Operations
None.
### 8.3.3 Notifications
#### 8.3.3.1 General
The delivery of notifications shall conform to clause 7.6.
Table 8.3.3.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +----------------+----------------+----------------+----------------+ | Event | {notificati | POST | Notifies | | notification | onDestination} | | Subscriber of | | | | | a CAPIF Event | +----------------+----------------+----------------+----------------+
#### 8.3.3.2 Event Notification
##### 8.3.3.2.1 Description
Event Notification is used by the CAPIF core function to notify a Subscriber
of an Event. The Subscriber shall be subscribed to such Event Notification via
the Individual CAPIF Events Subscription Resource.
##### 8.3.3.2.2 Notification definition
The POST method shall be used for Event notification and the URI shall be the
one provided by the Subscriber during the subscription to the event.
Callback URI: **{notificationDestination}**
This method shall support the URI query parameters specified in table
8.3.3.2.2.1-1.
Table 8.3.3.2.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.3.3.2.2-2 and the response data structures and response codes specified in
table 8.3.3.2.2-3.
Table 8.3.3.2.2-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description EventNotification M 1 Notification
information of a CAPIF Event
* * *
Table 8.3.3.2.2-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.3.3.2.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
Table 8.3.3.2.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
### 8.3.4 Data Model
#### 8.3.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.3.4.1-1 specifies the data types defined specifically for the
CAPIF_Events_API service.
Table 8.3.4.1-1: CAPIF_Events_API specific Data Types
* * *
Data type Section defined Description Applicability AccessControlPolicyListExt
Clause 8.3.4.2.6 Represents the extension for access control policies  
CAPIFEvent Clause 8.3.4.3.2 Describes CAPIF events  
CAPIFEventDetail Clause 8.3.4.2.5 Represents the CAPIF event detail
Enhanced_event_report CAPIFEventFilter Clause 8.3.4.2.4 Represents the CAPIF
event filter Enhanced_event_report EventNotification Clause 8.3.4.2.3
Represents an individual CAPIF Event Subscription Notification  
EventSubscription Clause 8.3.4.2.2 Represents an individual CAPIF Event
Subscription resource  
TopologyHiding Clause 8.3.4.2.7 Represents the routing rules information of a
service API.
* * *
Table 8.3.4.1-2 specifies data types re-used by the CAPIF_Events_API service:
Table 8.3.4.1-2: Re-used Data Types
+----------------+----------------+----------------+----------------+ | Data type | Reference | Comments | Applicability | +----------------+----------------+----------------+----------------+ | Report | 3GPP TS | Used to | Enhanced\ | | ingInformation | 29.523 [26] | indicate the | _event_report | | | | reporting | | | | | requirement, | | | | | only the | | | | | following | | | | | information | | | | | are applicable | | | | | for CAPIF: | | | | | | | | | | - immRep | | | | | | | | | | - notifMethod | | | | | | | | | | - | | | | | maxReportNbr | | | | | | | | | | - monDur | | | | | | | | | | - repPeriod | | +----------------+----------------+----------------+----------------+ | Sup | 3GPP TS | Used to | | | portedFeatures | 29.571 [19] | negotiate the | | | | | applicability | | | | | of optional | | | | | features | | | | | defined in | | | | | table 8.3.6-1. | | +----------------+----------------+----------------+----------------+
#### 8.3.4.2 Structured data types
##### 8.3.4.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 8.3.4.2.2 Type: EventSubscription
Table 8.3.4.2.2-1: Definition of type EventSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | events | array(CA | M | 1..N | S | | | | PIFEvent) | | | ubscribed | | | | | | | events | | +-----------+-----------+---+-----------+-----------+-----------+ | eve | array | O | 1..N | S | Enhan | | ntFilters | (CAPIFEve | | | ubscribed | ced_even | | | ntFilter) | | | event | t_report | | | | | | filters. | | | | | | | | | | | | | | The n^th^ | | | | | | | entry in | | | | | | | the | | | | | | | \"event | | | | | | | Filters\" | | | | | | | attribute | | | | | | | shall | | | | | | | c | | | | | | | orrespond | | | | | | | to the | | | | | | | n^th^ | | | | | | | entry in | | | | | | | the | | | | | | | \ | | | | | | | "events\" | | | | | | | a | | | | | | | ttribute. | | | | | | | For event | | | | | | | not | | | | | | | having | | | | | | | event | | | | | | | filter, | | | | | | | an empty | | | | | | | event | | | | | | | filter | | | | | | | entry | | | | | | | without | | | | | | | any | | | | | | | sub- | | | | | | | attribute | | | | | | | shall be | | | | | | | provided. | | +-----------+-----------+---+-----------+-----------+-----------+ | eventReq | Re | O | 0..1 | R | Enhan | | | portingIn | | | epresents | ced_even | | | formation | | | the | t_report | | | | | | reporting | | | | | | | req | | | | | | | uirements | | | | | | | of the | | | | | | | event | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | notif | Uri | M | 1 | URI where | | | icationDe | | | | the | | | stination | | | | not | | | | | | | ification | | | | | | | should be | | | | | | | delivered | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | reque | boolean | O | 0..1 | Set to | Notific | | stTestNot | | | | true by | ation_te | | ification | | | | S | st_event | | | | | | ubscriber | | | | | | | to | | | | | | | request | | | | | | | the CAPIF | | | | | | | core | | | | | | | function | | | | | | | to send a | | | | | | | test | | | | | | | not | | | | | | | ification | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cl | | | | | | | ause 7.6. | | | | | | | Set to | | | | | | | false or | | | | | | | omitted | | | | | | | o | | | | | | | therwise. | | +-----------+-----------+---+-----------+-----------+-----------+ | websockNo | WebsockNo | O | 0..1 | Conf | Notif | | tifConfig | tifConfig | | | iguration | ication_ | | | | | | p | websocket | | | | | | arameters | | | | | | | to set up | | | | | | | not | | | | | | | ification | | | | | | | delivery | | | | | | | over | | | | | | | Websocket | | | | | | | protocol | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cl | | | | | | | ause 7.6. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | Used to | | | dFeatures | dFeatures | | | negotiate | | | | | | | the | | | | | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | API as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 7.8. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.3.4.2.3 Type: EventNotification
Table 8.3.4.2.3-1: Definition of type EventNotification
* * *
Attribute name Data type P Cardinality Description Applicability
subscriptionId string M 1 Identifier of the subscription resource to which the
notification is related -- CAPIF resource identifier  
events CAPIFEvent M 1 Notifications of individual events  
eventDetail CAPIFEventDetail O 0..1 Detailed information for the event.
Enhanced_event_report
* * *
##### 8.3.4.2.4 Type: CAPIFEventFilter
Table 8.3.4.2.4-1: Definition of type CAPIFEventFilter
* * *
Attribute name Data type P Cardinality Description Applicability apiIds
array(string) O 1..N API identifiers that the event subscriber wants to know
in the interested event.  
apiInvokerIds array(string) O 1..N API invokers that the event subscriber
wants to know in the interested event.  
aefIds array(string) O 1..N String identifying the AEF.
* * *
##### 8.3.4.2.5 Type: CAPIFEventDetail
Table 8.3.4.2.5-1: Definition of type CAPIFEventDetail
* * *
Attribute name Data type P Cardinality Description Applicability
serviceAPIDescriptions array(ServiceAPIDescription) O 1..N Description of the
service API as published by the APF.  
apiIds array(string) O 1..N API identifiers.  
apiInvokerIds array(string) O 1..N API invokers that are onboarded/offboarded.  
accCtrlPolList AccessControlPolicyListExt O 0..1 Access control policy updated
list.  
invocationLogs array(InvocationLog) O 1..N Invocation logs  
apiTopoHide TopologyHiding O 0..1 Topology hiding information for a service
API
* * *
##### 8.3.4.2.6 Type: AccessControlPolicyListExt
Table 8.3.4.2.6-1: Definition of type AccessControlPolicyListExt
* * *
Attribute name Data type P Cardinality Description Applicability apiId string
M 1 Identifier of the service API  
NOTE: This data type also contains all the properties defined for
AccessControlPolicyList data type.
* * *
##### 8.3.4.2.7 Type: TopologyHiding
Table 8.3.4.2.7-1: Definition of type TopologyHiding
* * *
Attribute name Data type P Cardinality Description Applicability apiId string
M 1 Identifier of the service API  
routingRules array(RoutingRule) M 1..N Routing rules
* * *
#### 8.3.4.3 Simple data types and enumerations
##### 8.3.4.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 8.3.4.3.2 Simple data types
None.
The simple data types defined in table 8.3.4.3.2-1 shall be supported.
Table 8.3.4.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability n/a
* * *
##### 8.3.4.3.3 Enumeration: CAPIFEvent
Table 8.3.4.3.3-1: Enumeration CAPIFEvent
* * *
Enumeration value Description Applicability SERVICE_API_AVAILABLE Events
related to the availability of service APIs after the service APIs are
published.  
SERVICE_API_UNAVAILABLE Events related to the unavailability of service APIs
after the service APIs are unpublished.  
SERVICE_API_UPDATE Events related to change in service API information  
API_INVOKER_ONBOARDED Events related to API invoker onboarded to CAPIF  
API_INVOKER_OFFBOARDED Events related to API invoker offboarded from CAPIF  
SERVICE_API_INVOCATION_SUCCESS Events related to the successful invocation of
service APIs  
SERVICE_API_INVOCATION_FAILURE Events related to the failed invocation of
service APIs  
ACCESS_CONTROL_POLICY_UPDATE Events related to the update for the access
control policy related to the service APIs  
ACCESS_CONTROL_POLICY_UNAVAILABLE Events related to the unavailability of the
access control policy related to the service APIs (NOTE)  
API_INVOKER_AUTHORIZATION_REVOKED Events related to the revocation of the
authorization of API invokers to access the service APIs. (NOTE)  
API_INVOKER_UPDATED Events related to API invoker profile updated to CAPIF.  
API_TOPOLOGY_HIDING_CREATED Events related to the creation or update of the
API topology hiding information of the service API after the service APIs are
published  
API_TOPOLOGY_HIDING_REVOKED Events related to the revocation of the API
topology information of the service API after the service APIs are unpublished  
NOTE: The present release does not specify further details (e.g. event
filters) for this event.
* * *
### 8.3.5 Error Handling
General error responses are defined in clause 7.7.
### 8.3.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.3.6-1 lists the supported features for CAPIF_Events_API.
Table 8.3.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** 1 Notification_test_event
Testing of notification connection is supported according to clause 7.6. 2
Notification_websocket The delivery of notifications over Websocket is
supported according to clause 7.6. This feature requires that the
Notification_test_event feature is also supported. 3 Enhanced_event_report
This feature supports the enhanced event report including event reporting
requirement and event reporting details as defined in clause 5.4.2.2.2.
* * *
## 8.4 CAPIF_API_Invoker_Management_API
### 8.4.1 API URI
The CAPIF_API_Invoker_Management_API service shall use the
CAPIF_API_Invoker_Management_API.
The request URIs used in HTTP requests from the API invoker towards the CAPIF
core function shall have the Resource URI structure as defined in clause 7.5
with the following clarifications:
\- The \ shall be \"api-invoker-management\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.4.2.
### 8.4.2 Resources
#### 8.4.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.4.2.1-1 depicts the resource URIs structure for the
CAPIF_API_Invoker_Management_API.
Figure 8.4.2.1-1: Resource URI structure of the
CAPIF_API_Invoker_Management_API
Table 8.4.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.4.2.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | On-boarded API | /onb | POST | On-boards a | | Invokers | oardedInvokers | | new API | | | | | invoker by | | | (NOTE) | | creating an | | | | | API invoker | | | | | profile | +----------------+----------------+----------------+----------------+ | Individual | /onbo | DELETE | Off-boards an | | On-boarded API | ardedInvokers/ | | individual API | | Invoker | {onboardingId} | | invoker by | | | | | deleting the | | | (NOTE) | | associated API | | | | | invoker | | | | | profile | | | | | identified by | | | | | {onboardingId} | +----------------+----------------+----------------+----------------+ | | | PATCH | Modifies the | | | | | API invoker | | | | | details of an | | | | | individual API | | | | | invoker | | | | | identified by | | | | | the | | | | | {onboardingId} | +----------------+----------------+----------------+----------------+ | | | PUT | Updates the | | | | | API invoker | | | | | details of an | | | | | individual API | | | | | invoker | | | | | identified by | | | | | the | | | | | {onboardingId} | +----------------+----------------+----------------+----------------+ | NOTE: The path | | | | | segment | | | | | \"onboa | | | | | rdedInvokers\" | | | | | does not | | | | | follow the | | | | | related naming | | | | | convention | | | | | defined in | | | | | su | | | | | bclause 7.5.1. | | | | | The path | | | | | segment is | | | | | however kept | | | | | as currently | | | | | defined in | | | | | this | | | | | specification | | | | | for backward | | | | | compatibility | | | | | c | | | | | onsiderations. | | | | +----------------+----------------+----------------+----------------+
#### 8.4.2.2 Resource: On-boarded API invokers
##### 8.4.2.2.1 Description
The On-boarded API Invokers resource represents all the API invokers that are
on-boarded at a given CAPIF core function.
##### 8.4.2.2.2 Resource Definition
Resource URI: **{apiRoot}/api-invoker-management/\
/onboardedInvokers**
This resource shall support the resource URI variables defined in table
8.4.2.2.2-1.
Table 8.4.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5
* * *
##### 8.4.2.2.3 Resource Standard Methods
###### 8.4.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.4.2.2.3.1-1.
Table 8.4.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.4.2.2.3.1-2 and the response data structures and response codes specified in
table 8.4.2.2.3.1-3.
Table 8.4.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description APIInvokerEnrolmentDetails M 1 Enrolment
details of the API invoker including notification destination URI for any on-
boarding related notifications and an optional list of APIs the API invoker
intends to invoke while on-board.
* * *
Table 8.4.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | APIInvokerEnr | M | 1 | 201 Created | API invoker | | olmentDetails | | | | on-boarded | | | | | | successfully | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | | | | | | A list of | | | | | | APIs the API | | | | | | invoker is | | | | | | allowed to | | | | | | invoke while | | | | | | on-board may | | | | | | also be | | | | | | included as | | | | | | part of the | | | | | | APIInvokerEnr | | | | | | olmentDetails | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body, if | | | | | | requested in | | | | | | the POST | | | | | | request. | +---------------+---+-------------+--------------+---------------+ | n/a | | | 202 Accepted | The CAPIF | | | | | | core has | | | | | | accepted the | | | | | | Onboarding | | | | | | request and | | | | | | is processing | | | | | | it. When | | | | | | processing is | | | | | | completed, | | | | | | the CAPIF | | | | | | core function | | | | | | will send a | | | | | | Noti | | | | | | fy_Onboardin | | | | | | g_Completion | | | | | | notification | | | | | | to the | | | | | | requesting | | | | | | API invoker. | | | | | | See | | | | | | cl | | | | | | ause 8.4.3.2. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+--------------+---------------+
Table 8.4.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/api-
invoker-management/\/onboardedInvokers/{onboardingId}
* * *
##### 8.4.2.2.4 Resource Custom Operations
None.
#### 8.4.2.3 Resource: Individual On-boarded API Invoker
##### 8.4.2.3.1 Description
The Individual On-boarded API Invokers resource represents an individual API
invoker that is on-boarded at a given CAPIF core function.
##### 8.4.2.3.2 Resource Definition
Resource URI: **{apiRoot}/api-invoker-management/\
/onboardedInvokers/{onboardingId}**
This resource shall support the resource URI variables defined in table
8.4.2.3.2-1.
Table 8.4.2.3.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 onboardingId string
String identifying an individual on-boarded API invoker resource
* * *
##### 8.4.2.3.3 Resource Standard Methods
###### 8.4.2.3.3.1 DELETE
This method shall support the URI query parameters specified in table
8.4.2.3.3.1-1.
Table 8.4.2.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the response codes specified in table 8.4.2.3.3.1-2
and the response data structures and response codes specified in table
8.4.2.3.3.1-3.
Table 8.4.2.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.4.2.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | individual | | | | | | on-boarded | | | | | | API invoker | | | | | | matching the | | | | | | onboardingId | | | | | | is deleted | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.4.2.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.4.2.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.4.2.3.3.2 PUT
The PUT method allows updating the API invoker details of the onboarded API
invoker. This method shall support the URI query parameters specified in table
8.4.2.3.3.2-1.
Table 8.4.2.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in the table
8.4.2.3.3.2-2 and the response data structures and response codes specified in
the table 8.4.2.3.3.2-3.
Table 8.4.2.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description APIInvokerEnrolmentDetails M 1 Updated
details of the API invoker and a notification destination URI for any update
request related notifications.
* * *
Table 8.4.2.3.3.2-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | APIInvokerEnr | M | 1 | 200 OK | API | | olmentDetails | | | | invoker\'s | | | | | | information | | | | | | updated | | | | | | successfully. | | | | | | | | | | | | Updated | | | | | | details of | | | | | | the API | | | | | | invoker as | | | | | | part of the | | | | | | A | | | | | | PIInvokerEnro | | | | | | lmentDetails, | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 202 Accepted | The CAPIF | | | | | | core has | | | | | | accepted the | | | | | | Update | | | | | | details | | | | | | request and | | | | | | is processing | | | | | | it. When | | | | | | processing is | | | | | | completed, | | | | | | the CAPIF | | | | | | core function | | | | | | will send a | | | | | | Notify_Updat | | | | | | e_Completion | | | | | | notification | | | | | | to the | | | | | | requesting | | | | | | API invoker. | | | | | | See | | | | | | cl | | | | | | ause 8.4.3.3. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | API | | | | | Content | invoker\'s | | | | | | information | | | | | | updated | | | | | | successfully, | | | | | | with no | | | | | | content to be | | | | | | sent in the | | | | | | response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.4.2.3.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.4.2.3.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.4.2.3.3.3 PATCH
This method shall support the URI query parameters specified in table
8.4.2.3.3.3-1.
Table 8.4.2.3.3.3-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.4.2.3.3.3-2 and the response data structures and response codes specified in
table 8.4.2.3.3.3-3.
Table 8.4.2.3.3.3-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description APIInvokerEnrolmentDetailsPatch M 1
Modified details of the API invoker and a notification destination URI for any
modify request related notifications.
* * *
Table 8.4.2.3.3.3-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | APIInvokerEnr | M | 1 | 200 OK | API | | olmentDetails | | | | invoker\'s | | | | | | information | | | | | | modified | | | | | | successfully. | | | | | | | | | | | | Modified | | | | | | details of | | | | | | the API | | | | | | invoker as | | | | | | part of the | | | | | | A | | | | | | PIInvokerEnro | | | | | | lmentDetails, | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 202 Accepted | The CAPIF | | | | | | core has | | | | | | accepted the | | | | | | modify | | | | | | details | | | | | | request and | | | | | | is processing | | | | | | it. When | | | | | | processing is | | | | | | completed, | | | | | | the CAPIF | | | | | | core function | | | | | | will send a | | | | | | Notify_Updat | | | | | | e_Completion | | | | | | notification | | | | | | to the | | | | | | requesting | | | | | | API invoker. | | | | | | See sub | | | | | | cl | | | | | | ause 8.4.3.3. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | API | | | | | Content | invoker\'s | | | | | | information | | | | | | modified | | | | | | successfully, | | | | | | with no | | | | | | content to be | | | | | | sent in the | | | | | | response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the HTTP | | | | | | PATCH method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.4.2.3.3.3-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location String M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.4.2.3.3.3-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location String M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.4.2.3.4 Resource Custom Operations
None.
### 8.4.3 Notifications
#### 8.4.3.1 General
The delivery of notifications shall conform to clause 7.6.
Table 8.4.3.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +----------------+----------------+----------------+----------------+ | No | {notificati | POST | Notify API | | tify_Onboardi | onDestination} | | invoker of | | ng_Completion | | | on-boarding | | | | | result | +----------------+----------------+----------------+----------------+ | Notify_Upda | {notificati | POST | Notify API | | te_Completion | onDestination} | | invoker of | | | | | update result | | | | | details. | +----------------+----------------+----------------+----------------+
#### 8.4.3.2 Notify_Onboarding_Completion
##### 8.4.3.2.1 Description
Notify_Onboarding_Completion is used by the CAPIF core function to notify an
API invoker of the on-boarding result.
##### 8.4.3.2.2 Notification definition
The POST method shall be used for Notify_Onboarding_Completion and the URI
shall be the one provided by the API invoker during the on-boarding request.
Callback URI: **{notificationDestination}**
This method shall support the URI query parameters specified in table
8.4.3.2.2-1.
Table 8.4.3.2.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.4.3.2.2-2 and the response data structures and response codes specified in
table 8.4.3.2.2-3.
Table 8.4.3.2.2-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description OnboardingNotification M 1 Notification
with on-boarding result
* * *
Table 8.4.3.2.2-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.4.3.2.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
Table 8.4.3.2.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
#### 8.4.3.3 Notify_Update_Completion
##### 8.4.3.3.1 Description
Notify_Update_Completion is used by the CAPIF core function to notify of the
update of API Invoker\'s details result.
##### 8.4.3.3.2 Notification definition
The POST method shall be used for Notify_Update_Completion and the URI shall
be the one provided by the API invoker during the API invoker details update
request.
Callback URI: **{notificationDestination}**
This method shall support the URI query parameters specified in table
8.4.3.3.2-1.
Table 8.4.3.3.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.4.3.3.2-2 and the response data structures and response codes specified in
table 8.4.3.3.2-3.
Table 8.4.3.3.2-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description OnboardingNotification M 1 Notification
with API Invoker\'s details update result.
* * *
Table 8.4.3.3.2-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.4.3.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
Table 8.4.3.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
### 8.4.4 Data Model
#### 8.4.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.4.4.1-1 specifies the data types defined specifically for the
CAPIF_API_Invoker_Management_API service.
Table 8.4.4.1-1: CAPIF_API_Invoker_Management_API specific Data Types
* * *
Data type Section defined Description Applicability APIInvokerEnrolmentDetails
Clause 8.4.4.2.2 API invoker\'s enrolment details.  
APIList Clause 8.4.4.2.4 List of APIs.  
OnboardingInformation Clause 8.4.4.2.5 On-boarding information of the API
invoker.  
OnboardingNotification Clause 8.4.4.2.7 Notification with on-boarding or
update result.  
APIInvokerEnrolmentDetailsPatch Clause 8.4.4.2.8 API invoker\'s enrolment
parameters list for modification. PatchUpdate
* * *
Table 8.4.4.1-2 specifies data types re-used by the
CAPIF_API_Invoker_Management_API service.
Table 8.4.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability SupportedFeatures 3GPP TS 29.571
[19] Used to negotiate the applicability of optional features defined in table
8.4.6-1.
* * *
#### 8.4.4.2 Structured data types
##### 8.4.4.2.1 Introduction
##### 8.4.4.2.2 Type: APIInvokerEnrolmentDetails
Table 8.4.4.2.2-1: Definition of type APIInvokerEnrolmentDetails
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | api | string | O | 0..1 | API | | | InvokerId | | | | invoker | | | | | | | ID | | | | | | | assigned | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | API | | | | | | | invoker | | | | | | | while | | | | | | | on | | | | | | | -boarding | | | | | | | the API | | | | | | | invoker. | | | | | | | Shall not | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | from the | | | | | | | API | | | | | | | invoker | | | | | | | to the | | | | | | | CAPIF | | | | | | | core | | | | | | | function, | | | | | | | to | | | | | | | on-board | | | | | | | itself. | | | | | | | Shall be | | | | | | | present | | | | | | | in all | | | | | | | other | | | | | | | HTTP | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | esponses. | | +-----------+-----------+---+-----------+-----------+-----------+ | onb | Onb | M | 1 | On | | | oardingIn | oardingIn | | | -boarding | | | formation | formation | | | in | | | | | | | formation | | | | | | | about the | | | | | | | API | | | | | | | invoker | | | | | | | necessary | | | | | | | for the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to | | | | | | | on-board | | | | | | | the API | | | | | | | invoker. | | +-----------+-----------+---+-----------+-----------+-----------+ | notif | Uri | M | 1 | URI where | | | icationDe | | | | the | | | stination | | | | not | | | | | | | ification | | | | | | | should be | | | | | | | delivered | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | reque | boolean | O | 0..1 | Set to | Notific | | stTestNot | | | | true by | ation_te | | ification | | | | S | st_event | | | | | | ubscriber | | | | | | | to | | | | | | | request | | | | | | | the CAPIF | | | | | | | core | | | | | | | function | | | | | | | to send a | | | | | | | test | | | | | | | not | | | | | | | ification | | | | | | | as | | | | | | | defined | | | | | | | in in | | | | | | | cl | | | | | | | ause 7.6. | | | | | | | Set to | | | | | | | false or | | | | | | | omitted | | | | | | | o | | | | | | | therwise. | | +-----------+-----------+---+-----------+-----------+-----------+ | websockNo | WebsockNo | O | 0..1 | Conf | Notif | | tifConfig | tifConfig | | | iguration | ication_ | | | | | | p | websocket | | | | | | arameters | | | | | | | to set up | | | | | | | not | | | | | | | ification | | | | | | | delivery | | | | | | | over | | | | | | | Websocket | | | | | | | protocol | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cl | | | | | | | ause 7.6. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiList | APIList | O | 0..1 | A list of | | | | | | | APIs. | | | | | | | When | | | | | | | included | | | | | | | by the | | | | | | | API | | | | | | | invoker | | | | | | | in the | | | | | | | HTTP | | | | | | | request | | | | | | | message, | | | | | | | it lists | | | | | | | the APIs | | | | | | | that the | | | | | | | API | | | | | | | invoker | | | | | | | intends | | | | | | | to invoke | | | | | | | while | | | | | | | onboard | | | | | | | or API | | | | | | | invoker | | | | | | | update. | | | | | | | When | | | | | | | included | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | in the | | | | | | | HTTP | | | | | | | response | | | | | | | message, | | | | | | | it lists | | | | | | | the APIs | | | | | | | that the | | | | | | | API | | | | | | | invoker | | | | | | | is | | | | | | | allowed | | | | | | | to invoke | | | | | | | while | | | | | | | onboard | | | | | | | or API | | | | | | | invoker | | | | | | | update. | | +-----------+-----------+---+-----------+-----------+-----------+ | api | string | O | 0..1 | Generic | | | InvokerIn | | | | in | | | formation | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | API | | | | | | | invoker | | | | | | | such as | | | | | | | details | | | | | | | of the | | | | | | | device or | | | | | | | the | | | | | | | app | | | | | | | lication. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | Used to | | | dFeatures | dFeatures | | | negotiate | | | | | | | the | | | | | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | API as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 7.8. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.4.4.2.3 Type: Void
##### 8.4.4.2.4 Type: APIList
Table 8.4.4.2.4-1: Definition of type APIList
* * *
Attribute name Data type P Cardinality Description Applicability
serviceAPIDescriptions array(ServiceAPIDescription) O 1..N Definition of the
service API.
* * *
##### 8.4.4.2.5 Type: OnboardingInformation
Table 8.4.4.2.5-1: Definition of type OnboardingInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | a | string | M | 1 | Public | | | piInvoker | | | | Key of | | | PublicKey | | | | API | | | | | | | Invoker | | +-----------+-----------+---+-----------+-----------+-----------+ | api | string | O | 0..1 | API | | | InvokerCe | | | | i | | | rtificate | | | | nvoker\'s | | | | | | | generic | | | | | | | client | | | | | | | cer | | | | | | | tificate. | | | | | | | | | | | | | | The | | | | | | | subject | | | | | | | field in | | | | | | | the | | | | | | | ce | | | | | | | rtificate | | | | | | | shall be | | | | | | | encoded | | | | | | | with API | | | | | | | invoker | | | | | | | ID as | | | | | | | Common | | | | | | | Name as | | | | | | | specified | | | | | | | in | | | | | | | IET | | | | | | | F RFC 528 | | | | | | | 0 [29]. | | +-----------+-----------+---+-----------+-----------+-----------+ | onboard | string | O | 0..1 | API | | | ingSecret | | | | i | | | | | | | nvoker\'s | | | | | | | o | | | | | | | nboarding | | | | | | | secret, | | | | | | | provided | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.4.4.2.6 Type: Void
##### 8.4.4.2.7 Type: OnboardingNotification
Table 8.4.4.2.7-1: Definition of type OnboardingNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | result | boolean | M | 1 | Set to | | | | | | | \"true\" | | | | | | | indicate | | | | | | | s | | | | | | | uccessful | | | | | | | on- | | | | | | | boarding. | | | | | | | Otherwise | | | | | | | set to | | | | | | | \"false\" | | +-----------+-----------+---+-----------+-----------+-----------+ | resourc | Uri | C | 1 | URI | | | eLocation | | | | pointing | | | | | | | to the | | | | | | | new CAPIF | | | | | | | resource | | | | | | | created | | | | | | | as a | | | | | | | result of | | | | | | | s | | | | | | | uccessful | | | | | | | on- | | | | | | | boarding. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | \ | | | | | | | 'result\' | | | | | | | attribute | | | | | | | is set to | | | | | | | \"true\". | | | | | | | Otherwise | | | | | | | it shall | | | | | | | not be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiInvok | APIInvok | C | 1 | Enrolment | | | erEnrolme | erEnrolme | | | details | | | ntDetails | ntDetails | | | of the | | | | | | | API | | | | | | | invoker | | | | | | | which are | | | | | | | verified | | | | | | | by the | | | | | | | CAPIF | | | | | | | admi | | | | | | | nistrator | | | | | | | or API | | | | | | | ma | | | | | | | nagement. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | \ | | | | | | | 'result\' | | | | | | | attribute | | | | | | | is set to | | | | | | | \"true\". | | | | | | | Otherwise | | | | | | | it shall | | | | | | | not be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiList | APIList | O | 0..1 | List of | | | | | | | APIs API | | | | | | | invoker | | | | | | | is | | | | | | | allowed | | | | | | | to | | | | | | | access. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | may be | | | | | | | present | | | | | | | if | | | | | | | \ | | | | | | | 'result\' | | | | | | | attribute | | | | | | | is set to | | | | | | | \"true\". | | | | | | | Otherwise | | | | | | | it shall | | | | | | | not be | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.4.4.2.8 Type: APIInvokerEnrolmentDetailsPatch
Table 8.4.4.2.8-1: Definition of type APIInvokerEnrolmentDetailsPatch
* * *
Attribute name Data type P Cardinality Description Applicability
onboardingInformation OnboardingInformation O 1 On-boarding information about
the API invoker necessary for the CAPIF core function to on-board the API
invoker.  
notificationDestination Uri O 1 URI where the notification should be delivered
to.  
apiList APIList O 0..1 A list of APIs. When included by the API invoker in the
HTTP request message, it lists the APIs that the API invoker intends to invoke
while onboard or API invoker update.  
apiInvokerInformation string O 0..1 Generic information related to the API
invoker such as details of the device or the application.
* * *
#### 8.4.4.3 Simple data types and enumerations
None.
### 8.4.5 Error Handling
General error responses are defined in clause 7.7.
### 8.4.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.4.6-1 lists the supported features for CAPIF_API_Invoker_Management_API.
Table 8.4.6-1: Supported Features
* * *
Feature number Feature Name Description 1 Notification_test_event Testing of
notification connection is supported according to clause 7.6. 2
Notification_websocket The delivery of notifications over Websocket is
supported according to clause 7.6. This feature requires that the
Notification_test_event feature is also supported. 3 PatchUpdate Indicates the
support of the PATCH method for updating an On-boarded API Invoker resource.
* * *
## 8.5 CAPIF_Security_API
### 8.5.1 API URI
The CAPIF_Security_API service shall use the CAPIF_Security_API.
The request URIs used in HTTP requests from the API invoker or the API
exposing function towards the CAPIF core function shall have the Resource URI
structure as defined in clause 7.5 with the following clarifications:
\- The \ shall be \"capif-security\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.5.2.
### 8.5.2 Resources
#### 8.5.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.5.2.1-1 depicts the resource URIs structure for the
CAPIF_Security_API.
Figure 8.5.2.1-1: Resource URI structure of the CAPIF_Security_API
Table 8.5.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.5.2.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | Trusted API | /t | n/a | | | invokers | rustedInvokers | | | | | | | | | | (NOTE) | | | +----------------+----------------+----------------+----------------+ | Individual | /tr | GET | Retrieve | | trusted API | ustedInvokers/ | | authentication | | invoker | {apiInvokerId} | | information of | | | | | an API invoker | | | (NOTE) | | | +----------------+----------------+----------------+----------------+ | | | PUT | Create a | | | | | security | | | | | context for | | | | | individual API | | | | | invoker | +----------------+----------------+----------------+----------------+ | | | DELETE | Revoke the | | | | | authorization | | | | | of the API | | | | | invoker | +----------------+----------------+----------------+----------------+ | | /trustedIn | update (POST) | Update the | | | vokers/{apiInv | | security | | | okerId}/update | | context (e.g. | | | | | re-negotiate | | | (NOTE) | | the security | | | | | methods). | +----------------+----------------+----------------+----------------+ | | /trustedIn | delete (POST) | Revoke the | | | vokers/{apiInv | | authorization | | | okerId}/delete | | of the API | | | | | invoker for | | | (NOTE) | | some APIs | +----------------+----------------+----------------+----------------+ | | /s | token (POST) | Obtain the | | | ecurities/{sec | | OAuth 2.0 | | | urityId}/token | | authorization | | | | | information | | | (NOTE) | | | +----------------+----------------+----------------+----------------+ | NOTE: The path | | | | | segment | | | | | \"tru | | | | | stedInvokers\" | | | | | does not | | | | | follow the | | | | | related naming | | | | | convention | | | | | defined in | | | | | su | | | | | bclause 7.5.1. | | | | | The path | | | | | segment is | | | | | however kept | | | | | as currently | | | | | defined in | | | | | this | | | | | specification | | | | | for backward | | | | | compatibility | | | | | c | | | | | onsiderations. | | | | +----------------+----------------+----------------+----------------+
#### 8.5.2.2 Resource: Trusted API invokers
##### 8.5.2.2.1 Description
The Trusted API Invokers resource represents all the API invokers that are
trusted by the CAPIF core function and have received authentication
information from the CAPIF core function.
##### 8.5.2.2.2 Resource Definition
Resource URI: **{apiRoot}/capif-security/\ /trustedInvokers**
This resource shall support the resource URI variables defined in table
8.5.2.2.2-1.
Table 8.5.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5
* * *
##### 8.5.2.2.3 Resource Standard Methods
###### 8.5.2.2.3.1 Void
##### 8.5.2.2.4 Resource Custom Operations
None.
#### 8.5.2.3 Resource: Individual trusted API invokers
##### 8.5.2.3.1 Description
The Individual trusted API Invokers resource represents an individual API
invokers that is trusted by the CAPIF core function and have received security
related information from the CAPIF core function.
##### 8.5.2.3.2 Resource Definition
Resource URI: **{apiRoot}/capif-security/\
/trustedInvokers/{apiInvokerId}**
This resource shall support the resource URI variables defined in table
8.5.2.3.2-1.
Table 8.5.2.3.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 apiInvokerId string
Identifies an individual API invoker
* * *
##### 8.5.2.3.3 Resource Standard Methods
###### 8.5.2.3.3.1 GET
This method shall support the URI query parameters specified in table
8.5.2.3.3.1-1.
Table 8.5.2.3.3.1-1: URI query parameters supported by the GET method on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | aut | boolean | O | 0..1 | When set to | | henticationInfo | | | | \'true\', it | | | | | | indicates the | | | | | | CAPIF core | | | | | | function to | | | | | | send the | | | | | | authentication | | | | | | information of | | | | | | the API | | | | | | invoker. Set to | | | | | | false or | | | | | | omitted | | | | | | otherwise. | | | | | | | | | | | | (NOTE) | +-----------------+-----------+---+-------------+-----------------+ | au | boolean | O | 0..1 | When set to | | thorizationInfo | | | | \'true\', it | | | | | | indicates the | | | | | | CAPIF core | | | | | | function to | | | | | | send the | | | | | | authorization | | | | | | information of | | | | | | the API | | | | | | invoker. Set to | | | | | | false or | | | | | | omitted | | | | | | otherwise. | | | | | | | | | | | | (NOTE) | +-----------------+-----------+---+-------------+-----------------+ | NOTE: The query | | | | | | parameters | | | | | | \"authe | | | | | | nticationInfo\" | | | | | | and | | | | | | \"auth | | | | | | orizationInfo\" | | | | | | do not follow | | | | | | the related | | | | | | naming | | | | | | convention | | | | | | defined in | | | | | | s | | | | | | ubclause 7.5.1. | | | | | | These query | | | | | | parameters are | | | | | | however kept as | | | | | | currently | | | | | | defined in this | | | | | | specification | | | | | | for backward | | | | | | compatibility | | | | | | considerations. | | | | | +-----------------+-----------+---+-------------+-----------------+
This method shall support the request data structures specified in table
8.5.2.3.3.1-2 and the response data structures and response codes specified in
table 8.5.2.3.3.1-3.
Table 8.5.2.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.5.2.3.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Se | M | 1 | 200 OK | The security | | rviceSecurity | | | | related | | | | | | information | | | | | | of the API | | | | | | Invoker based | | | | | | on the | | | | | | request from | | | | | | the API | | | | | | exposing | | | | | | function. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.2.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.5.2.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.5.2.3.3.2 DELETE
This method shall support the URI query parameters specified in table
8.5.2.3.3.2-1.
Table 8.5.2.3.3.2-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.5.2.3.3.2-2 and the response data structures and response codes specified in
table 8.5.2.3.3.2-3.
Table 8.5.2.3.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.5.2.3.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Authorization | | | | | Content | of the API | | | | | | invoker | | | | | | revoked, and | | | | | | a | | | | | | notification | | | | | | is sent to | | | | | | the API | | | | | | invoker as | | | | | | specified in | | | | | | c | | | | | | lause 8.5.3.2 | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.2.3.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.5.2.3.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.5.2.3.3.3 PUT
This method shall support the URI query parameters specified in table
8.5.2.3.3.3-1.
Table 8.5.2.3.3.3-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.5.2.3.3.3-2 and the response data structures and response codes specified in
table 8.5.2.3.3.3-3.
Table 8.5.2.3.3.3-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description
ServiceSecurity M 1 Security method request from the API invoker to the CAPIF
core function. The request indicates a list of service APIs and a preferred
method of security for the service APIs.\ \ The request also includes a
notification destination URI for security related notifications.
* * *
Table 8.5.2.3.3.3-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | Se | M | 1 | 201 Created | Security | | rviceSecurity | | | | method from | | | | | | the CAPIF | | | | | | core function | | | | | | to the API | | | | | | invoker is | | | | | | based on the | | | | | | received | | | | | | request. The | | | | | | response | | | | | | indicates the | | | | | | security | | | | | | method to be | | | | | | used for the | | | | | | service APIs\ | | | | | | \ | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.5.2.3.3.3-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/capif-
security/v1/trustedInvokers/{apiInvokerId}
* * *
##### 8.5.2.3.4 Resource Custom Operations
###### 8.5.2.3.4.1 Overview
Table 8.5.2.3.4.1-1: Custom operations
* * *
**Operation name** Custom operation URI Mapped HTTP method Description update
/trustedInvokers/{apiInvokerId}/update POST Update the security instance (e.g.
re-negotiate the security methods). delete
/trustedInvokers/{apiInvokerId}/delete POST Revoke the authorization of the
API invoker for some APIs token /securities/{securityId}/token POST Obtain the
OAuth 2.0 authorization information
* * *
###### 8.5.2.3.4.2 Operation: update
###### # 8.5.2.3.4.2.1 Description
This custom operation updates an existing Individual security instance
resource in the CAPIF core function.
###### # 8.5.2.3.4.2.2 Operation Definition
This method shall support the URI query parameters specified in table
8.5.2.3.4.2.2-1.
Table 8.5.2.3.4.2.2-1: URI query parameters supported by the POST method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This operation shall support the request data structures specified in table
8.5.2.3.4.2.2-2 and the response data structure and response codes specified
in table 8.5.2.3.4.2.2-3.
Table 8.5.2.3.4.2.2-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description
ServiceSecurity M 1 Security method request from the API invoker to the CAPIF
core function. The request indicates a list of service APIs and a preferred
method of security for the service APIs.\ \ The request also includes a
notification destination URI for security related notifications.
* * *
Table 8.5.2.3.4.2.2-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Se | M | 1 | 200 OK | Security | | rviceSecurity | | | | method from | | | | | | the CAPIF | | | | | | core function | | | | | | to the API | | | | | | invoker is | | | | | | based on the | | | | | | received | | | | | | request. The | | | | | | response | | | | | | indicates the | | | | | | security | | | | | | method to be | | | | | | used for the | | | | | | service APIs | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | security | | | | | | instance | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | security | | | | | | instance | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.2.3.4.2.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.5.2.3.4.2.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.5.2.3.4.3 Operation: delete
###### # 8.5.2.3.4.3.1 Description
This custom operation revokes authorization for some service APIs of an
existing Individual security instance resource in the CAPIF core function.
###### # 8.5.2.3.4.3.2 Operation Definition
This method shall support the URI query parameters specified in table
8.5.2.3.4.3.2-1.
Table 8.5.2.3.4.3.2-1: URI query parameters supported by the POST method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This operation shall support the request data structures specified in table
8.5.2.3.4.3.2-2 and the response data structure and response codes specified
in table 8.5.2.3.4.3.2-3.
Table 8.5.2.3.4.3.2-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SecurityNotification M 1 It includes a
list of API identifiers for which authorization needs to be revoked for an API
invoker.
* * *
Table 8.5.2.3.4.3.2-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The CAPIF | | | | | | core function | | | | | | revoked the | | | | | | authorization | | | | | | of the API | | | | | | invoker for | | | | | | the requested | | | | | | APIs. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | authorization | | | | | | revocation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | authorization | | | | | | revocation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.2.3.4.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.5.2.3.4.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.5.2.3.4.4 Operation: token
###### # 8.5.2.3.4.4.1 Description
This custom operation obtains OAuth 2.0 authorization information from an
existing Individual security instance resource in the CAPIF core function.
###### # 8.5.2.3.4.4.2 Operation Definition
This method shall support the URI query parameters specified in table
8.5.2.3.4.4.2-1.
Table 8.5.2.3.4.4.2-1: URI query parameters supported by the POST method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This operation shall support the request data structures specified in table
8.5.2.3.4.4.2-2 and the response data structure and response codes specified
in table 8.5.2.3.4.4.2-3.
Table 8.5.2.3.4.4.2-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description AccessTokenReq M 1 This IE shall contain
the request information for the access token request.
* * *
Table 8.5.2.3.4.4.2-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | A | M | 1 | 200 OK | This IE shall | | ccessTokenRsp | | | | contain the | | | | | | access token | | | | | | response | | | | | | information. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | obtaining | | | | | | authorization | | | | | | information. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | obtaining | | | | | | authorization | | | | | | information. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | A | M | 1 | 400 Bad | See | | ccessTokenErr | | | Request | IETF RF | | | | | | C 6749 [23] | | | | | | clause 5.2. | | | | | | | | | | | | The specific | | | | | | error shall | | | | | | be indicated | | | | | | in the | | | | | | \"error\" | | | | | | attribute of | | | | | | the | | | | | | A | | | | | | ccessTokenErr | | | | | | data type, | | | | | | containing | | | | | | any of the | | | | | | values: | | | | | | | | | | | | - | | | | | | inv | | | | | | alid_request | | | | | | | | | | | | - | | | | | | in | | | | | | valid_client | | | | | | | | | | | | - | | | | | | i | | | | | | nvalid_grant | | | | | | | | | | | | - | | | | | | unautho | | | | | | rized_client | | | | | | | | | | | | - | | | | | | unsupported | | | | | | _grant_type | | | | | | | | | | | | - | | | | | | i | | | | | | nvalid_scope | +---------------+---+-------------+---------------+---------------+ | A | M | 1 | 401 | See | | ccessTokenErr | | | Unauthorized | IETF RF | | | | | | C 6749 [23] | | | | | | clause 5.2. | | | | | | | | | | | | The specific | | | | | | error shall | | | | | | be indicated | | | | | | in the | | | | | | \"error\" | | | | | | attribute of | | | | | | the | | | | | | A | | | | | | ccessTokenErr | | | | | | data type, | | | | | | containing | | | | | | value: | | | | | | | | | | | | - | | | | | | in | | | | | | valid_client | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.2.3.4.4.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.5.2.3.4.4.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
### 8.5.3 Notifications
#### 8.5.3.1 General
The delivery of notifications shall conform to clause 7.6.
Table 8.5.3.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +----------------+----------------+----------------+----------------+ | Authorization | {notificati | POST | Notify API | | revoked | onDestination} | | invoker that | | notification | | | the | | | | | authorization | | | | | rights are | | | | | revoked by the | | | | | API exposing | | | | | function. | +----------------+----------------+----------------+----------------+
#### 8.5.3.2 Authorization revoked notification
##### 8.5.3.2.1 Description
Authorization revoked notification is used by the CAPIF core function to
notify an API invoker that the authorization rights are revoked by the API
exposing function.
##### 8.5.3.2.2 Notification definition
The POST method shall be used for Authorization revoked notification and the
URI shall be the one provided by the API invoker during the
Obtain_Security_Method service operation.
Callback URI: **{notificationDestination}**
This method shall support the URI query parameters specified in table
8.5.3.2.2-1.
Table 8.5.3.2.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.5.3.2.2-2 and the response data structures and response codes specified in
table 8.5.3.2.2-3.
Table 8.5.3.2.2-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description SecurityNotification M 1 Notification with
information related to revoked authorization.
* * *
Table 8.5.3.2.2-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | notification | | | | | | destination | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [4]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.5.3.2.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
Table 8.5.3.2.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative notification destination
towards which the notification should be redirected.
* * *
### 8.5.4 Data Model
#### 8.5.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.5.4.1-1 specifies the data types defined specifically for the
CAPIF_Security_API service.
Table 8.5.4.1-1: CAPIF_Security_API specific Data Types
* * *
Data type Section defined Description Applicability AccessTokenClaims Clause
8.5.4.2.8 The claims data structure for the access token.  
AccessTokenErr Clause 8.5.4.2.9 Represents an error in the access token
request.  
AccessTokenReq Clause 8.5.4.2.6 Data type for carrying information related to
access token request.  
AccessTokenRsp Clause 8.5.4.2.7 Data type for carrying information related to
access token response.  
Cause Clause 8.5.4.3.3 The cause for revoking the API invoker\'s authorization
to the service API.  
SecurityInformation Clause 8.5.4.2.3 Interface details and the security
method.  
SecurityNotification Clause 8.5.4.2.5 Revoked authorization notification
details.  
ServiceSecurity Clause 8.5.4.2.2 Details of the security method for each
service API interface. When included by the API invoker, it shall indicate the
preferred method of security. When included by the CAPIF core function, it
shall indicate the security method to be used for the service API interface.
* * *
Table 8.5.4.1-2 specifies data types re-used by the CAPIF_Security_API service
based interface:
Table 8.5.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability DurationSec 3GPP TS 29.122 [14]
Duration in seconds  
SecurityMethod Clause 8.2.4.3.6 Security method (e.g. PKI)  
SupportedFeatures 3GPP TS 29.571 [19] Used to negotiate the applicability of
optional features defined in table 8.5.6-1.
* * *
#### 8.5.4.2 Structured data types
##### 8.5.4.2.1 Introduction
##### 8.5.4.2.2 Type: ServiceSecurity
Table 8.5.4.2.2-1: Definition of type ServiceSecurity
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | sec | array(Se | M | 1..N | Security | | | urityInfo | curityInf | | | in | | | | ormation) | | | formation | | | | | | | for each | | | | | | | API | | | | | | | i | | | | | | | nterface. | | +-----------+-----------+---+-----------+-----------+-----------+ | notif | Uri | M | 1 | URI where | | | icationDe | | | | the | | | stination | | | | not | | | | | | | ification | | | | | | | should be | | | | | | | delivered | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | reque | boolean | O | 0..1 | Set to | Notific | | stTestNot | | | | true by | ation_te | | ification | | | | API | st_event | | | | | | invoker | | | | | | | to | | | | | | | request | | | | | | | the CAPIF | | | | | | | core | | | | | | | function | | | | | | | to send a | | | | | | | test | | | | | | | not | | | | | | | ification | | | | | | | as | | | | | | | defined | | | | | | | in in | | | | | | | cl | | | | | | | ause 7.6. | | | | | | | Set to | | | | | | | false or | | | | | | | omitted | | | | | | | o | | | | | | | therwise. | | +-----------+-----------+---+-----------+-----------+-----------+ | websockNo | WebsockNo | O | 0..1 | Conf | Notif | | tifConfig | tifConfig | | | iguration | ication_ | | | | | | p | websocket | | | | | | arameters | | | | | | | to set up | | | | | | | not | | | | | | | ification | | | | | | | delivery | | | | | | | over | | | | | | | Websocket | | | | | | | protocol | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cl | | | | | | | ause 7.6. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | Used to | | | dFeatures | dFeatures | | | negotiate | | | | | | | the | | | | | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | API as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 7.8. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.5.4.2.3 Type: SecurityInformation
Table 8.5.4.2.3-1: Definition of type SecurityInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | interfa | In | O | 0..1 | Details | | | ceDetails | terfaceDe | | | of the | | | | scription | | | interface | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | aefId | string | O | 0..1 | AEF | | | | | | | i | | | | | | | dentifier | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | apiId | string | C | 0..1 | API | SecurityI | | | | | | id | nfoPerAPI | | | | | | entifier. | | | | | | | | | | | | | | If API | | | | | | | invoker | | | | | | | supplies | | | | | | | this IE | | | | | | | in the | | | | | | | PUT | | | | | | | request, | | | | | | | CCF shall | | | | | | | respond | | | | | | | back with | | | | | | | this IE | | | | | | | and its | | | | | | | a | | | | | | | ssociated | | | | | | | security | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | arr | M | 1..N | Security | | | refSecuri | ay(Securi | | | methods | | | tyMethods | tyMethod) | | | preferred | | | | | | | by the | | | | | | | API | | | | | | | invoker | | | | | | | for the | | | | | | | API | | | | | | | interface | | +-----------+-----------+---+-----------+-----------+-----------+ | selSecur | Secur | O | 0..1 | Supplied | | | ityMethod | ityMethod | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function, | | | | | | | it | | | | | | | indicates | | | | | | | the | | | | | | | selected | | | | | | | security | | | | | | | method | | | | | | | for the | | | | | | | API | | | | | | | i | | | | | | | nterface. | | | | | | | If it is | | | | | | | not | | | | | | | provided, | | | | | | | it means | | | | | | | no common | | | | | | | supported | | | | | | | security | | | | | | | method by | | | | | | | the API | | | | | | | invoker | | | | | | | and the | | | | | | | AEF, or | | | | | | | the | | | | | | | selected | | | | | | | security | | | | | | | method is | | | | | | | not | | | | | | | allowed | | | | | | | by the | | | | | | | local | | | | | | | policy in | | | | | | | the CAPIF | | | | | | | core | | | | | | | function. | | +-----------+-----------+---+-----------+-----------+-----------+ | authentic | string | O | 0..1 | Authe | | | ationInfo | | | | ntication | | | | | | | related | | | | | | | in | | | | | | | formation | | +-----------+-----------+---+-----------+-----------+-----------+ | authoriz | string | O | 0..1 | Auth | | | ationInfo | | | | orization | | | | | | | related | | | | | | | in | | | | | | | formation | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Only | | | | | | | one of | | | | | | | the | | | | | | | a | | | | | | | ttributes | | | | | | | \"aefId\" | | | | | | | or | | | | | | | \" | | | | | | | interface | | | | | | | Details\" | | | | | | | shall be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.5.4.2.4 Void
##### 8.5.4.2.5 Type: SecurityNotification
Table 8.5.4.2.5-1: Definition of type SecurityNotification
* * *
Attribute name Data type P Cardinality Description Applicability apiInvokerId
string M 1 String identifying the API invoker assigned by the CAPIF core
function  
aefId string O 0..1 String identifying the AEF.  
apiIds array(string) M 1..N Identifier of the service API  
cause Cause M 1 The cause for revoking the API invoker authorization to the
service API
* * *
##### 8.5.4.2.6 Type: AccessTokenReq
Table 8.5.4.2.6-1: Definition of type AccessTokenReq
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | grant_type | string | M | 1 | This IE shall | | | | | | contain the | | | | | | grant type as | | | | | | \"client | | | | | | _credentials\" | | | | | | | | | | | | (NOTE 3, | | | | | | NOTE 4) | +-----------------+-----------+---+-------------+-----------------+ | client_id | string | M | 1 | This IE shall | | | | | | contain the API | | | | | | invoker | | | | | | Identifier. | | | | | | | | | | | | (NOTE 3) | +-----------------+-----------+---+-------------+-----------------+ | client_secret | string | O | 0..1 | This IE when | | | | | | present shall | | | | | | contain the | | | | | | onboarding | | | | | | secret which is | | | | | | got during API | | | | | | invoker | | | | | | onboarding. | | | | | | | | | | | | (NOTE 3) | +-----------------+-----------+---+-------------+-----------------+ | scope | string | O | 0..1 | This IE when | | | | | | present shall | | | | | | contain a list | | | | | | of AEF | | | | | | identifiers and | | | | | | its associated | | | | | | API names for | | | | | | which the | | | | | | access_token | | | | | | is authorized | | | | | | for use. | | | | | | | | | | | | It takes the | | | | | | format of | | | | | | 3gpp#aefId1:a | | | | | | piName1,apiName | | | | | | 2,...apiNameX;a | | | | | | efId2:apiName1, | | | | | | apiName2,...api | | | | | | NameY;...aefIdN | | | | | | :apiName1,apiNa | | | | | | me2,...apiNameZ | | | | | | | | | | | | Using delimeter | | | | | | \"#\" after | | | | | | the | | | | | | discriminator | | | | | | \"3gpp\", \":\" | | | | | | after AEF | | | | | | identifier, | | | | | | \",\" between | | | | | | API names and | | | | | | \";\" between | | | | | | the last API | | | | | | name of the | | | | | | previous AEF | | | | | | identifier and | | | | | | the next AEF | | | | | | identifier. | | | | | | (NOTE 2) | | | | | | | | | | | | Example: | | | | | | \'3gpp#aef-ji | | | | | | angsu-nanjing:3 | | | | | | gpp-monitoring- | | | | | | event,3gpp-as-s | | | | | | ession-with-qos | | | | | | ;aef-zhejiang-h | | | | | | angzhou:3gpp-cp | | | | | | -parameter-prov | | | | | | isioning,3gpp-p | | | | | | fd-management\' | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: This | | | | | | data structure | | | | | | shall not be | | | | | | treated as a | | | | | | JSON object. It | | | | | | shall be | | | | | | treated as a | | | | | | key, value pair | | | | | | data structure | | | | | | to be encoded | | | | | | using | | | | | | x | | | | | | -www-urlencoded | | | | | | format as | | | | | | specified in | | | | | | c | | | | | | lause 17.13.4.1 | | | | | | of W3C HTML | | | | | | 4.01 | | | | | | Specif | | | | | | ication [22]. | | | | | | | | | | | | NOTE 2: The | | | | | | scope may | | | | | | contain more | | | | | | space-delimited | | | | | | strings which | | | | | | further add | | | | | | additional | | | | | | access ranges | | | | | | to the scope, | | | | | | the definition | | | | | | of those | | | | | | additional | | | | | | strings is out | | | | | | of the scope of | | | | | | the present | | | | | | document. | | | | | | | | | | | | NOTE 3: The | | | | | | \ | | | | | | "grant_type\", | | | | | | \"client_id\" | | | | | | and | | | | | | \"c | | | | | | lient_secret\" | | | | | | attributes do | | | | | | not follow the | | | | | | related naming | | | | | | convention | | | | | | defined in | | | | | | s | | | | | | ubclause 7.2.1. | | | | | | These | | | | | | attributes are | | | | | | however kept as | | | | | | currently | | | | | | defined in this | | | | | | specification | | | | | | for backward | | | | | | compatibility | | | | | | considerations. | | | | | | | | | | | | NOTE 4: The | | | | | | enumeration | | | | | | value | | | | | | \"client | | | | | | _credentials\" | | | | | | of the | | | | | | \"grant_type\" | | | | | | attribute does | | | | | | not follow the | | | | | | related naming | | | | | | convention | | | | | | defined in | | | | | | s | | | | | | ubclause 7.2.1. | | | | | | This | | | | | | enumeration is | | | | | | however kept as | | | | | | currently | | | | | | defined in this | | | | | | specification | | | | | | for backward | | | | | | compatibility | | | | | | considerations. | | | | | +-----------------+-----------+---+-------------+-----------------+
##### 8.5.4.2.7 Type: AccessTokenRsp
Table 8.5.4.2.7-1: Definition of type AccessTokenRsp
+---------------+-------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +---------------+-------------+---+-------------+---------------+ | access_token | string | M | 1 | This IE shall | | | | | | contain JWS | | | | | | Compact | | | | | | Serialized | | | | | | r | | | | | | epresentation | | | | | | of the JWS | | | | | | signed JSON | | | | | | object | | | | | | containing | | | | | | Acce | | | | | | ssTokenClaims | | | | | | (see | | | | | | claus | | | | | | e 8.5.4.2.c). | | | | | | | | | | | | (NOTE 2) | +---------------+-------------+---+-------------+---------------+ | token_type | string | M | 1 | This IE shall | | | | | | contain the | | | | | | token type | | | | | | (i.e. | | | | | | \"Bearer\"). | | | | | | | | | | | | (NOTE 2, | | | | | | NOTE 3) | +---------------+-------------+---+-------------+---------------+ | expires_in | DurationSec | M | 1 | This IE when | | | | | | present shall | | | | | | contain the | | | | | | number of | | | | | | seconds after | | | | | | which the | | | | | | access_token | | | | | | is considered | | | | | | to be | | | | | | expired. | | | | | | | | | | | | (NOTE 2) | +---------------+-------------+---+-------------+---------------+ | scope | string | O | 0..1 | This IE when | | | | | | present shall | | | | | | contain a | | | | | | list of AEF | | | | | | identifiers | | | | | | and its | | | | | | associated | | | | | | API names for | | | | | | which the | | | | | | access_token | | | | | | is authorized | | | | | | for use. | | | | | | | | | | | | It takes the | | | | | | format of | | | | | | 3g | | | | | | pp#aefId1:ap | | | | | | iName1,apiNam | | | | | | e2,...apiName | | | | | | X;aefId2:apiN | | | | | | ame1,apiName2 | | | | | | ,...apiNameY; | | | | | | ...aefIdN:api | | | | | | Name1,apiName | | | | | | 2,...apiNameZ | | | | | | | | | | | | Using | | | | | | delimeter | | | | | | \"#\" after | | | | | | the | | | | | | discriminator | | | | | | \"3gpp\", | | | | | | \":\" after | | | | | | AEF | | | | | | identifier, | | | | | | \",\" between | | | | | | API names and | | | | | | \";\" between | | | | | | the last API | | | | | | name of the | | | | | | previous AEF | | | | | | identifier | | | | | | and the next | | | | | | AEF | | | | | | identifier. | | | | | | (NOTE 1) | | | | | | | | | | | | Example: | | | | | | \'3gpp | | | | | | #aef-jiangsu | | | | | | -nanjing:3gpp | | | | | | -monitoring-e | | | | | | vent,3gpp-as- | | | | | | session-with- | | | | | | qos;aef-zheji | | | | | | ang-hangzhou: | | | | | | 3gpp-cp-param | | | | | | eter-provisio | | | | | | ning,3gpp-pfd | | | | | | -management\' | +---------------+-------------+---+-------------+---------------+ | NOTE 1: The | | | | | | scope may | | | | | | contain more | | | | | | sp | | | | | | ace-delimited | | | | | | strings which | | | | | | further add | | | | | | additional | | | | | | access ranges | | | | | | to the scope, | | | | | | the | | | | | | definition of | | | | | | those | | | | | | additional | | | | | | strings is | | | | | | out of the | | | | | | scope of the | | | | | | present | | | | | | document. | | | | | | | | | | | | NOTE 2: The | | | | | | \"acc | | | | | | ess_token\", | | | | | | \" | | | | | | token_type\" | | | | | | and | | | | | | \" | | | | | | expires_in\" | | | | | | attributes do | | | | | | not follow | | | | | | the related | | | | | | naming | | | | | | convention | | | | | | defined in | | | | | | clause 7.2.1. | | | | | | These | | | | | | attributes | | | | | | are however | | | | | | kept as | | | | | | currently | | | | | | defined in | | | | | | this | | | | | | specification | | | | | | for backward | | | | | | compatibility | | | | | | co | | | | | | nsiderations. | | | | | | | | | | | | NOTE 3: The | | | | | | enumeration | | | | | | value | | | | | | \"Bearer\" of | | | | | | the | | | | | | \" | | | | | | token_type\" | | | | | | attribute | | | | | | does not | | | | | | follow the | | | | | | related | | | | | | naming | | | | | | convention | | | | | | defined in | | | | | | clause 7.2.1. | | | | | | This | | | | | | enumeration | | | | | | is however | | | | | | kept as | | | | | | currently | | | | | | defined in | | | | | | this | | | | | | specification | | | | | | for backward | | | | | | compatibility | | | | | | co | | | | | | nsiderations. | | | | | +---------------+-------------+---+-------------+---------------+
##### 8.5.4.2.8 Type: AccessTokenClaims
Table 8.5.4.2.8-1: Definition of type AccessTokenClaims
+---------------+-------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +---------------+-------------+---+-------------+---------------+ | iss | string | M | 1 | This IE shall | | | | | | contain the | | | | | | API invoker | | | | | | Identifier. | +---------------+-------------+---+-------------+---------------+ | scope | string | M | 1 | This IE shall | | | | | | contain a | | | | | | list of AEF | | | | | | identifiers | | | | | | and its | | | | | | associated | | | | | | API names for | | | | | | which the | | | | | | access_token | | | | | | is authorized | | | | | | for use. | | | | | | | | | | | | It takes the | | | | | | format of | | | | | | 3g | | | | | | pp#aefId1:ap | | | | | | iName1,apiNam | | | | | | e2,...apiName | | | | | | X;aefId2:apiN | | | | | | ame1,apiName2 | | | | | | ,...apiNameY; | | | | | | ...aefIdN:api | | | | | | Name1,apiName | | | | | | 2,...apiNameZ | | | | | | | | | | | | Using | | | | | | delimeter | | | | | | \"#\" after | | | | | | the | | | | | | discriminator | | | | | | \"3gpp\", | | | | | | \":\" after | | | | | | AEF | | | | | | identifier, | | | | | | \",\" between | | | | | | API names and | | | | | | \";\" between | | | | | | the last API | | | | | | name of the | | | | | | previous AEF | | | | | | identifier | | | | | | and the next | | | | | | AEF | | | | | | identifier. | | | | | | (NOTE) | | | | | | | | | | | | Example: | | | | | | \'3gpp | | | | | | #aef-jiangsu | | | | | | -nanjing:3gpp | | | | | | -monitoring-e | | | | | | vent,3gpp-as- | | | | | | session-with- | | | | | | qos;aef-zheji | | | | | | ang-hangzhou: | | | | | | 3gpp-cp-param | | | | | | eter-provisio | | | | | | ning,3gpp-pfd | | | | | | -management\' | +---------------+-------------+---+-------------+---------------+ | exp | DurationSec | M | 1 | This IE shall | | | | | | contain the | | | | | | number of | | | | | | seconds after | | | | | | which the | | | | | | access_token | | | | | | is considered | | | | | | to be | | | | | | expired. | +---------------+-------------+---+-------------+---------------+ | NOTE: The | | | | | | scope may | | | | | | contain more | | | | | | sp | | | | | | ace-delimited | | | | | | strings which | | | | | | further add | | | | | | additional | | | | | | access ranges | | | | | | to the scope, | | | | | | the | | | | | | definition of | | | | | | those | | | | | | additional | | | | | | strings is | | | | | | out of the | | | | | | scope of the | | | | | | present | | | | | | document. | | | | | +---------------+-------------+---+-------------+---------------+
##### 8.5.4.2.9 Type: AccessTokenErr
Table 8.5.4.2.9-1: Definition of type AccessTokenErr
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | error | string | M | 1 | This IE shall | | | | | | contain the | | | | | | error described | | | | | | in | | | | | | IETF R | | | | | | FC 6749 [23], | | | | | | clause 5.2. | | | | | | | | | | | | Enum: | | | | | | | | | | | | \"inv | | | | | | alid_request\" | | | | | | | | | | | | \"in | | | | | | valid_client\" | | | | | | | | | | | | \"i | | | | | | nvalid_grant\" | | | | | | | | | | | | \"unautho | | | | | | rized_client\" | | | | | | | | | | | | \"unsupported | | | | | | _grant_type\" | | | | | | | | | | | | \"i | | | | | | nvalid_scope\" | | | | | | | | | | | | (NOTE 1) | +-----------------+-----------+---+-------------+-----------------+ | err | string | O | 0..1 | When present, | | or_description | | | | this IE shall | | | | | | contain the | | | | | | human-readable | | | | | | additional | | | | | | information to | | | | | | indicate the | | | | | | error that | | | | | | occurred, as | | | | | | described in | | | | | | IETF R | | | | | | FC 6749 [23], | | | | | | clause 5.2. | | | | | | | | | | | | (NOTE 2) | +-----------------+-----------+---+-------------+-----------------+ | error_uri | string | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the URI | | | | | | identifying a | | | | | | human-readable | | | | | | additional | | | | | | information | | | | | | about the | | | | | | error, as | | | | | | described in | | | | | | IETF R | | | | | | FC 6749 [23], | | | | | | clause 5.2. | | | | | | | | | | | | (NOTE 2) | +-----------------+-----------+---+-------------+-----------------+ | NOTE 1: The | | | | | | enumeration | | | | | | values | | | | | | \"inva | | | | | | lid_request\", | | | | | | \"inv | | | | | | alid_client\", | | | | | | \"in | | | | | | valid_grant\", | | | | | | \"unauthor | | | | | | ized_client\", | | | | | | \"unsupported | | | | | | _grant_type\" | | | | | | and | | | | | | \"i | | | | | | nvalid_scope\" | | | | | | of the | | | | | | \"error\" | | | | | | attribute do | | | | | | not follow the | | | | | | related naming | | | | | | convention | | | | | | defined in | | | | | | clause 7.2.1. | | | | | | These | | | | | | enumeration | | | | | | values are | | | | | | however kept as | | | | | | currently | | | | | | defined in this | | | | | | specification | | | | | | for alignment | | | | | | with | | | | | | definitions in | | | | | | IETF | | | | | | RFC 6749 [23] | | | | | | and backward | | | | | | compatibility | | | | | | considerations. | | | | | | | | | | | | NOTE 2: The | | | | | | \"error | | | | | | _description\" | | | | | | and | | | | | | \"error_uri\" | | | | | | attributes do | | | | | | not follow the | | | | | | related naming | | | | | | convention | | | | | | defined in | | | | | | clause 7.2.1. | | | | | | These | | | | | | attributes are | | | | | | however kept as | | | | | | currently | | | | | | defined in this | | | | | | specification | | | | | | for alignment | | | | | | with | | | | | | definitions in | | | | | | IETF | | | | | | RFC 6749 [23] | | | | | | and backward | | | | | | compatibility | | | | | | considerations. | | | | | +-----------------+-----------+---+-------------+-----------------+
#### 8.5.4.3 Simple data types and enumerations
##### 8.5.4.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 8.5.4.3.2 Simple data types
The simple data types defined in table 8.5.4.3.2-1 shall be supported.
Table 8.5.4.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability n/a
* * *
##### 8.5.4.3.3 Enumeration: Cause
Table 8.5.4.3.3-1: Enumeration Cause
* * *
Enumeration value Description Applicability OVERLIMIT_USAGE The revocation of
the authorization of the API invoker is due to the overlimit usage of the
service API  
UNEXPECTED_REASON The revocation of the authorization of the API invoker is
due to unexpected reason.
* * *
### 8.5.5 Error Handling
#### 8.5.5.1 General
General error responses are defined in clause 7.7.
In addition, the requirements in the following subclauses shall apply.
#### 8.5.5.2 Protocol Errors
In this Release of the specification, there are no additional protocol errors
applicable for the CAPIF_Security_API.
#### 8.5.5.3 Application Errors
The application errors defined for the Obtain_Authorization service operation
are listed in Table 8.5.5.3-1, and correspond to the values of the \"error\"
attribute (see clause 8.5.4.2.9).
Table 8.5.5.3-1: Application errors
+------------------------+------------------+------------------------+ | Application Error | HTTP status code | Description | +------------------------+------------------+------------------------+ | invalid_request | 400 Bad Request | See | | | | IETF RFC 6749 [23] | +------------------------+------------------+------------------------+ | invalid_client | 400 Bad Request, | See | | | | IETF RFC 6749 [23] | | | 401 Unauthorized | | +------------------------+------------------+------------------------+ | invalid_grant | 400 Bad Request | See | | | | IETF RFC 6749 [23] | +------------------------+------------------+------------------------+ | unauthorized_client | 400 Bad Request | See | | | | IETF RFC 6749 [23] | +------------------------+------------------+------------------------+ | un | 400 Bad Request | See | | supported_grant_type | | IETF RFC 6749 [23] | +------------------------+------------------+------------------------+ | invalid_scope | 400 Bad Request | See | | | | IETF RFC 6749 [23] | +------------------------+------------------+------------------------+ | NOTE: These | | | | enumeration values | | | | defined in this table | | | | do not follow the | | | | related naming | | | | convention defined in | | | | clause 7.2.1. These | | | | enumeration values are | | | | however kept as | | | | currently defined in | | | | this specification for | | | | alignment with | | | | definitions in | | | | IETF RFC 6749 [23]. | | | +------------------------+------------------+------------------------+
### 8.5.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.5.6-1 lists the supported features for CAPIF_Security_API.
Table 8.5.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** 1 Notification_test_event
Testing of notification connection is supported according to clause 7.6. 2
Notification_websocket The delivery of notifications over Websocket is
supported according to clause 7.6. This feature requires that the
Notification_test_event feature is also supported. 3 SecurityInfoPerAPI
Indicates the support of negotiating and obtaining service API security method
information per API.
* * *
## 8.6 CAPIF_Access_Control_Policy_API
### 8.6.1 API URI
The CAPIF_Access_Control_Policy_API service shall use the
CAPIF_Access_Control_Policy_API.
The request URIs used in HTTP requests from the API exposing function towards
the CAPIF core function shall have the Resource URI structure as defined in
clause 7.5 with the following clarifications:
\- The \ shall be \"access-control-policy\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.6.2.
### 8.6.2 Resources
#### 8.6.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.6.2.1-1 depicts the resource URIs structure for the
CAPIF_Access_Control_Policy_API.
This resource is created by the CAPIF administrator on the CAPIF core
function.
NOTE: The details of the mechanisms used to create the Access Control Policy
List resource on the CAPIF core function is out of the scope of the present
document.
Figure 8.6.2.1-1: Resource URI structure of the
CAPIF_Access_Control_Policy_API
Table 8.6.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.6.2.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | Access Control | /accessCont | GET | Retrieves the | | Policy List | rolPolicyList/ | | access control | | | {serviceApiId} | | policy list | | | | | for a | | | (NOTE) | | published | | | | | service API. | +----------------+----------------+----------------+----------------+ | NOTE: The path | | | | | segment | | | | | \"accessContr | | | | | olPolicyList\" | | | | | does not | | | | | follow the | | | | | related naming | | | | | convention | | | | | defined in | | | | | clause 7.5.1. | | | | | The path | | | | | segment is | | | | | however kept | | | | | as currently | | | | | defined in | | | | | this | | | | | specification | | | | | for backward | | | | | compatibility | | | | | c | | | | | onsiderations. | | | | +----------------+----------------+----------------+----------------+
#### 8.6.2.2 Resource: Access Control Policy List
##### 8.6.2.2.1 Description
The Access Control Policy List resource represents the access control
information for all the service APIs per API invoker.
##### 8.6.2.2.2 Resource Definition
Resource URI: **{apiRoot}/access-control-policy/\
/accessControlPolicyList/{serviceApiId}**
This resource shall support the resource URI variables defined in table
8.6.2.2.2-1.
Table 8.6.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 serviceApiId string
Identifies an individual published service API
* * *
##### 8.6.2.2.3 Resource Standard Methods
###### 8.6.2.2.3.1 GET
This method shall support the URI query parameters specified in table
8.6.2.2.3.1-1.
Table 8.6.2.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description aef-id string M 1 AEF identifier api-
invoker-id string O 1 String identifying the API invoker supported-features
SupportedFeatures O 0..1 To filter irrelevant responses related to unsupported
features.
* * *
This method shall support the request data structures specified in table
8.6.2.2.3.1-2 and the response data structures and response codes specified in
table 8.6.2.2.3.1-3.
Table 8.6.2.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.6.2.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AccessCont | M | 1 | 200 OK | List of the | | rolPolicyList | | | | access | | | | | | control | | | | | | policy | | | | | | applicable | | | | | | for the | | | | | | service API | | | | | | requested. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.6.2.2.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.6.2.2.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.6.2.2.4 Resource Custom Operations
None.
### 8.6.3 Notifications
None.
### 8.6.4 Data Model
#### 8.6.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.6.4.1-1 specifies the data types defined specifically for the
CAPIF_Access_Control_Policy_API service.
Table 8.6.4.1-1: CAPIF_Access_Control_Policy_API specific Data Types
* * *
Data type Section defined Description Applicability AccessControlPolicyList
Clause 8.6.4.2.2 Access control policy list.  
ApiInvokerPolicy Clause 8.6.4.2.3 The policy of an API Invoker.  
TimeRangeList Clause 8.6.4.2.4 A time range during which the invocations (by
an API invoker) of a service API are allowed.
* * *
Table 8.6.4.1-2 specifies data types re-used by the
CAPIF_Access_Control_Policy_API service.
Table 8.6.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability DateTime 3GPP TS 29.122 [14]  
SupportedFeatures 3GPP TS 29.571 [19] Contains the features supported by an
API.
* * *
#### 8.6.4.2 Structured data types
##### 8.6.4.2.1 Introduction
This clause defines data structures to be used in resource representations.
##### 8.6.4.2.2 Type: AccessControlPolicyList
Table 8.6.4.2.2-1: Definition of type AccessControlPolicyList
* * *
Attribute name Data type P Cardinality Description Applicability
apiInvokerPolicies array(ApiInvokerPolicy) O 0..N Policy of each API invoker.
* * *
##### 8.6.4.2.3 Type: ApiInvokerPolicy
Table 8.6.4.2.3-1: Definition of type ApiInvokerPolicy
* * *
Attribute name Data type P Cardinality Description Applicability apiInvokerId
string M 1 API invoker ID assigned by the CAPIF core function  
allowedTotalInvocations integer O 0..1 Total number of invocations allowed on
the service API by the API invoker.  
allowedInvocationsPerSecond integer O 0..1 Invocations per second allowed on
the service API by the API invoker.  
allowedInvocationTimeRangeList array(TimeRangeList) O 0..N The time ranges
during which the invocations are allowed on the service API by the API
invoker.
* * *
##### 8.6.4.2.4 Type: TimeRangeList
Table 8.6.4.2.4-1: Definition of type TimeRangeList
* * *
Attribute name Data type P Cardinality Description Applicability startTime
DateTime M 1 The start time for the invocations to be allowed on the service
API by the API invoker.  
stopTime DateTime M 1 The end time for the invocations to be allowed on the
service API by the API invoker.
* * *
#### 8.6.4.3 Simple data types and enumerations
None.
### 8.6.5 Error Handling
General error responses are defined in clause 7.7.
### 8.6.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 8.6.8-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** n/a
* * *
## 8.7 CAPIF_Logging_API_Invocation_API
### 8.7.1 API URI
The CAPIF_Logging_API_Invocation_API service shall use the
CAPIF_Logging_API_Invocation_API.
The request URIs used in HTTP requests from the API exposing function towards
the CAPIF core function shall have the Resource URI structure as defined in
clause 7.5 with the following clarifications:
\- The \ shall be \"api-invocation-logs\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.7.2
### 8.7.2 Resources
#### 8.7.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.7.2.1-1 depicts the resource URIs structure for the
CAPIF_Logging_API_Invocation_API.
Figure 8.7.2.1-1: Resource URI structure of the
CAPIF_Logging_API_Invocation_API
Table 8.7.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.7.2.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description Logs
/{aefId}/logs POST Creates a new log entry for service API invocations
Individual log /{aefId}/logs/{logId} n/a Individual log entry
* * *
#### 8.7.2.2 Resource: Logs
##### 8.7.2.2.1 Description
The Logs resource represents all the log entries created by a API exposing
function at CAPIF core function.
##### 8.7.2.2.2 Resource Definition
Resource URI: **{apiRoot}/api-invocation-logs/\ /{aefId}/logs**
This resource shall support the resource URI variables defined in table
8.7.2.2.2-1.
Table 8.7.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 aefId string
Identifies of the API exposing function
* * *
##### 8.7.2.2.3 Resource Standard Methods
###### 8.7.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.7.2.2.3.1-1.
Table 8.7.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.7.2.2.3.1-2 and the response data structures and response codes specified in
table 8.7.2.2.3.1-3.
Table 8.7.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description InvocationLog M 1 Log of service API
invocations provided by API exposing function to store on the CAPIF core
function.
* * *
Table 8.7.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | InvocationLog | M | 1 | 201 Created | Log of | | | | | | service API | | | | | | invocations | | | | | | provided by | | | | | | API exposing | | | | | | function | | | | | | successfully | | | | | | stored on the | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.7.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/api-
invocation-logs/\/{aefId}/logs/{logId}
* * *
##### 8.7.2.2.4 Resource Custom Operations
None.
### 8.7.3 Notifications
None.
### 8.7.4 Data Model
#### 8.7.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.7.4.1-1 specifies the data types defined specifically for the
CAPIF_Logging_API_Invocation_API service.
Table 8.7.4.1-1: CAPIF_Logging_API_Invocation_API specific Data Types
* * *
Data type Section defined Description Applicability InvocationLog Clause
8.7.4.2.2 Set of Service API invocation logs to be stored on CAPIF core
function  
Log Clause 8.7.4.2.3 Individual log entries  
DurationMs Clause 8.7.4.3.2 Identifies a time period in milliseconds.
* * *
Table 8.7.4.1-2 specifies data types re-used by the
CAPIF_Logging_API_Invocation_API service.
Table 8.7.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability DateTime 3GPP TS 29.122 [14]  
SupportedFeatures 3GPP TS 29.571 [19] Used to negotiate the applicability of
optional features defined in table 8.7.6-1.  
Operation Clause 8.2.4.3.7 HTTP operation
* * *
#### 8.7.4.2 Structured data types
##### 8.7.4.2.1 Introduction
This clause defines the structured data types to be used in resource
representations of the CAPIF_Logging_API_Invocation_API.
##### 8.7.4.2.2 Type: InvocationLog
Table 8.7.4.2.2-1: Definition of type InvocationLog
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | aefId | string | M | 1 | Identity | | | | | | | in | | | | | | | formation | | | | | | | of the | | | | | | | API | | | | | | | exposing | | | | | | | function | | | | | | | r | | | | | | | equesting | | | | | | | logging | | | | | | | of | | | | | | | service | | | | | | | API | | | | | | | in | | | | | | | vocations | | +-----------+-----------+---+-----------+-----------+-----------+ | api | string | M | 1 | Identity | | | InvokerId | | | | of the | | | | | | | API | | | | | | | invoker | | | | | | | which | | | | | | | invoked | | | | | | | the | | | | | | | service | | | | | | | API | | +-----------+-----------+---+-----------+-----------+-----------+ | logs | a | M | 1..N | Service | | | | rray(Log) | | | API | | | | | | | i | | | | | | | nvocation | | | | | | | log | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | Used to | | | dFeatures | dFeatures | | | negotiate | | | | | | | the | | | | | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | API as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 7.8. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.7.4.2.3 Type: Log
Table 8.7.4.2.3-1: Definition of type Log
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | apiId | string | M | 1 | String | | | | | | | id | | | | | | | entifying | | | | | | | the API | | | | | | | invoked. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiName | string | M | 1 | Name of | | | | | | | the API | | | | | | | which was | | | | | | | invoked, | | | | | | | it is set | | | | | | | as | | | | | | | {apiName} | | | | | | | part of | | | | | | | the URI | | | | | | | structure | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 5.2.4 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.12 | | | | | | | 2 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+ | a | string | M | 1 | Version | | | piVersion | | | | of the | | | | | | | API which | | | | | | | was | | | | | | | invoked | | +-----------+-----------+---+-----------+-----------+-----------+ | res | String | M | 1 | Name of | | | ourceName | | | | the | | | | | | | specific | | | | | | | resource | | | | | | | invoked | | +-----------+-----------+---+-----------+-----------+-----------+ | uri | Uri | 0 | 0..1 | Full URI | | | | | | | of the | | | | | | | API | | | | | | | resource | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 5.2.4 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.12 | | | | | | | 2 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+ | protocol | Protocol | M | 1 | Protocol | | | | | | | invoked. | | +-----------+-----------+---+-----------+-----------+-----------+ | operation | Operation | C | 0..1 | Operation | | | | | | | that was | | | | | | | invoked | | | | | | | on the | | | | | | | API, only | | | | | | | a | | | | | | | pplicable | | | | | | | for HTTP | | | | | | | protocol. | | +-----------+-----------+---+-----------+-----------+-----------+ | result | string | M | 1 | For HTTP | | | | | | | protocol, | | | | | | | it | | | | | | | contains | | | | | | | HTTP | | | | | | | status | | | | | | | code of | | | | | | | the | | | | | | | i | | | | | | | nvocation | | +-----------+-----------+---+-----------+-----------+-----------+ | invoc | DateTime | O | 0..1 | Date on | | | ationTime | | | | which it | | | | | | | was | | | | | | | invoked | | +-----------+-----------+---+-----------+-----------+-----------+ | invocati | D | O | 0..1 | Latency | | | onLatency | urationMs | | | for the | | | | | | | API | | | | | | | in | | | | | | | vocation. | | +-----------+-----------+---+-----------+-----------+-----------+ | inputP | ANY TYPE | O | 0..1 | List of | | | arameters | | | | input | | | | (NOTE) | | | p | | | | | | | arameters | | +-----------+-----------+---+-----------+-----------+-----------+ | OutputP | ANY TYPE | O | 0..1 | List of | | | arameters | | | | output | | | | (NOTE) | | | p | | | | | | | arameters | | +-----------+-----------+---+-----------+-----------+-----------+ | src | In | O | 0..1 | Interface | | | Interface | terfaceDe | | | de | | | | scription | | | scription | | | | | | | of the | | | | | | | API | | | | | | | invoker. | | +-----------+-----------+---+-----------+-----------+-----------+ | dest | In | O | 0..1 | Interface | | | Interface | terfaceDe | | | de | | | | scription | | | scription | | | | | | | of the | | | | | | | API | | | | | | | invoked. | | +-----------+-----------+---+-----------+-----------+-----------+ | fwd | string | O | 0..1 | It | | | Interface | | | | includes | | | | | | | the node | | | | | | | i | | | | | | | dentifier | | | | | | | (as | | | | | | | defined | | | | | | | in | | | | | | | IE | | | | | | | TF RFC 72 | | | | | | | 39 [20] | | | | | | | of all | | | | | | | f | | | | | | | orwarding | | | | | | | entities | | | | | | | between | | | | | | | the API | | | | | | | invoker | | | | | | | and the | | | | | | | AEF, | | | | | | | con | | | | | | | catenated | | | | | | | with | | | | | | | comma and | | | | | | | space, | | | | | | | e.g. | | | | | | | 192.0 | | | | | | | .2.43:80, | | | | | | | unknown:\ | | | | | | | _OBFport, | | | | | | | 203 | | | | | | | .0.113.60 | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: Any | | | | | | | basic | | | | | | | data type | | | | | | | defined | | | | | | | in | | | | | | | OpenAPI S | | | | | | | pecificat | | | | | | | ion [3] | | | | | | | may be | | | | | | | used. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 8.7.4.3 Simple data types and enumerations
##### 8.7.4.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 8.7.4.3.2 Simple data types
The simple data types defined in table 8.7.4.3.2-1 shall be supported.
Table 8.7.4.3.2-1: Simple data types
* * *
**Type Name** **Type Definition** **Description** **Applicability** DurationMs
integer Unsigned integer identifying a period of time in units of
milliseconds.
* * *
### 8.7.5 Error Handling
General error responses are defined in clause 7.7.
### 8.7.6 Feature negotiation
Table 8.7.8-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** n/a
* * *
## 8.8 CAPIF_Auditing_API
### 8.8.1 API URI
The CAPIF_Auditing_API service shall use the CAPIF_Auditing_API.
The request URIs used in HTTP requests from the API management function
towards the CAPIF core function shall have the Resource URI structure as
defined in clause 7.5 with the following clarifications:
\- The \ shall be \"logs\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.8.2.
### 8.8.2 Resources
#### 8.8.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.8.2.1-1 depicts the resource URIs structure for the
CAPIF_Auditing_API.
Figure 8.8.2.1-1: Resource URI structure of the CAPIF_Auditing_API
Table 8.8.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.8.2.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | All service | /api | GET | Query and | | API invocation | InvocationLogs | | retrieve | | logs (Store) | | | service API | | | (NOTE) | | invocation | | | | | logs stored on | | | | | the CAPIF core | | | | | function | +----------------+----------------+----------------+----------------+ | NOTE: The path | | | | | segment | | | | | \"apiIn | | | | | vocationLogs\" | | | | | does not | | | | | follow the | | | | | related naming | | | | | convention | | | | | defined in | | | | | clause 7.5.1. | | | | | The path | | | | | segment is | | | | | however kept | | | | | as currently | | | | | defined in | | | | | this | | | | | specification | | | | | for backward | | | | | compatibility | | | | | c | | | | | onsiderations. | | | | +----------------+----------------+----------------+----------------+
#### 8.8.2.2 Resource: All service API invocation logs
##### 8.8.2.2.1 Description
The All service API invocation logs resource represents a collection of
service API invocation logs stored on the CAPIF core function. The resource is
modelled as a Store resource archetype (see annex C.3 of 3GPP TS 29.501 [18])
##### 8.8.2.2.2 Resource Definition
Resource URI: **{apiRoot}/logs/\ /apiInvocationLogs**
This resource shall support the resource URI variables defined in table
8.8.2.2.2-1.
Table 8.8.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5
* * *
##### 8.8.2.2.3 Resource Standard Methods
###### 8.8.2.2.3.1 GET
This method shall support the URI query parameters specified in table
8.8.2.2.3.1-1.
Table 8.8.2.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description aef-id string O 0..1 String
identifying the API exposing function api-invoker-id string O 0..1 String
identifying the API invoker which invoked the service API time-range-start
DateTime O 0..1 Start time of the invocation time range time-range-end
DateTime O 0..1 End time of the invocation time range api-id string O 0..1
String identifying the API invoked. api-name string O 0..1 API name, it is set
as {apiName} part of the URI structure as defined in clause 5.2.4 of 3GPP TS
29.122 [14]. api-version string O 0..1 Version of the API which was invoked
protocol Protocol O 0..1 Protocol invoked operation Operation O 0..1 Operation
that was invoked on the API result string O 0..1 HTTP status code of the
invocation resource-name string O 0..1 Name of the specific resource invoked
src-interface InterfaceDescription O 0..1 Interface description of the API
invoker. dest-interface InterfaceDescription O 0..1 Interface description of
the API invoked. supported-features SupportedFeatures O 0..1 To filter
irrelevant responses related to unsupported features.
* * *
This method shall support the request data structures specified in table
8.8.2.2.3.1-2 and the response data structures and response codes specified in
table 8.8.2.2.3.1-3.
Table 8.8.2.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.8.2.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | InvocationLog | O | 0..1 | 200 OK | Result of the | | | | | | query | | | | | | operation | | | | | | along with | | | | | | fetched | | | | | | service API | | | | | | invocation | | | | | | log data. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 414 URI Too | Indicates | | roblemDetails | | | Long | that the | | | | | | server is | | | | | | refusing to | | | | | | service the | | | | | | request | | | | | | because the | | | | | | r | | | | | | equest-target | | | | | | is too long. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.8.2.2.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.8.2.2.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.8.2.2.4 Resource Custom Operations
None.
### 8.8.3 Notifications
None.
### 8.8.4 Data Model
#### 8.8.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.8.4.1-1 specifies the data types defined specifically for the
CAPIF_Auditing_API service.
Table 8.8.4.1-1: CAPIF_Auditing_API specific Data Types
* * *
Data type Section defined Description Applicability n/a
* * *
Table 8.8.4.1-2 specifies data types re-used by the CAPIF_Auditing_API
service:
Table 8.8.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability DateTime 3GPP TS 29.122 [14]  
InvocationLog Clause 8.7.4.2.2 Logs of service API invocations stored on the
CAPIF core function.  
Operation Clause 8.2.4.3.7 HTTP operation  
ProblemDetails 3GPP TS 29.122 [14]  
SupportedFeatures 3GPP TS 29.571 [19] Contains the supported features.
* * *
#### 8.8.4.2 Structured data types
None.
#### 8.8.4.3 Simple data types and enumerations
None.
### 8.8.5 Error Handling
General error responses are defined in clause 7.7.
### 8.8.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 8.8.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** n/a
* * *
## 8.9 CAPIF_API_Provider_Management_API
### 8.9.1 API URI
The CAPIF_API_Provider_Management_API service shall use the
CAPIF_API_Provider_Management_API.
The request URIs used in HTTP requests from the API management function
towards the CAPIF core function shall have the Resource URI structure as
defined in clause 7.5 with the following clarifications:
\- The \ shall be \"api-provider-management\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.9.2.
### 8.9.2 Resources
#### 8.9.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.9.2.1-1 depicts the resource URIs structure for the
CAPIF_API_Provider_Management_API.
Figure 8.9.2.1-1: Resource URI structure of the
CAPIF_API_Provider_Management_API
Table 8.9.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.9.2.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description All API
Provider Domains Registrations /registrations POST Registers a new API
provider domain by creating an API provider domain with API provider domain
functions profiles. Individual API Provider Domain Registration
/registrations/{registrationId} PUT Updates an individual API provider domain
identified by {registrationId} PATCH Modifies an individual API provider
domain identified by {registrationId} DELETE Deregisters an API provider
domain by deleting the API provider domain and functions, identified by
{registrationId}.
* * *
#### 8.9.2.2 Resource: All API Provider Domains Registrations
##### 8.9.2.2.1 Description
The All API provider domains registrations resource represents all the API
provider domains that are registered at a given CAPIF core function.
##### 8.9.2.2.2 Resource Definition
Resource URI: **{apiRoot}/api-provider-management/\
/registrations**
This resource shall support the resource URI variables defined in table
8.9.2.2.2-1.
Table 8.9.2.2.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5
* * *
##### 8.9.2.2.3 Resource Standard Methods
###### 8.9.2.2.3.1 POST
This method shall support the URI query parameters specified in table
8.9.2.2.3.1-1.
Table 8.9.2.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.9.2.2.3.1-2 and the response data structures and response codes specified in
table 8.9.2.2.3.1-3.
Table 8.9.2.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description APIProviderEnrolmentDetails M 1 Enrolment
details of the API provider domain including individual API provider domain
function details.
* * *
Table 8.9.2.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+-------------+---------------+ | A | M | 1 | 201 Created | API provider | | PIProviderEnr | | | | domain | | olmentDetails | | | | registered | | | | | | successfully | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | | | | | | | | | | | | The list of | | | | | | successfully | | | | | | registered | | | | | | individual | | | | | | API provider | | | | | | domain | | | | | | functions, | | | | | | registration | | | | | | specific | | | | | | failure | | | | | | information | | | | | | of failed API | | | | | | provider | | | | | | domain | | | | | | function | | | | | | r | | | | | | egistrations, | | | | | | are included | | | | | | in | | | | | | A | | | | | | PIProviderEnr | | | | | | olmentDetails | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 8.9.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/api-
provider-management/\/registrations/{registrationId}
* * *
##### 8.9.2.2.4 Resource Custom Operations
None.
#### 8.9.2.3 Resource: Individual API Provider Domain Registration
##### 8.9.2.3.1 Description
The Individual API Provide Domain Registration resource represents an
individual API provider domain that is registered at a given CAPIF core
function.
##### 8.9.2.3.2 Resource Definition
Resource URI: **{apiRoot}/api-provider-management/\
/registrations/{registrationId}**
This resource shall support the resource URI variables defined in table
8.9.2.3.2-1.
Table 8.9.2.3.2-1: Resource URI variables for this resource
* * *
Name Data Type Definition apiRoot string See clause 7.5 registrationId string
Identifies an individual registered API Provider domain resource
* * *
##### 8.9.2.3.3 Resource Standard Methods
###### 8.9.2.3.3.1 PUT
The PUT method allows updating the registered API provider domain\'s detail.
The properties \"apiProviderDomainId\", and \"supportedFeatures\" shall remain
unchanged from previously provided values. This method shall support the URI
query parameters specified in table 8.9.2.3.3.1-1.
Table 8.9.2.3.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in the table
8.9.2.3.3.1-2 and the response data structures and response codes specified in
the table 8.9.2.3.3.1-3.
Table 8.9.2.3.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description APIProviderEnrolmentDetails M 1 Updated
details of the API provider domain.
* * *
Table 8.9.2.3.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | A | M | 1 | 200 OK | API provider | | PIProviderEnr | | | | domain\'s | | olmentDetails | | | | information | | | | | | updated | | | | | | successfully. | | | | | | | | | | | | Updated | | | | | | details of | | | | | | the API | | | | | | provider | | | | | | domain is | | | | | | part of the | | | | | | AP | | | | | | IProviderEnro | | | | | | lmentDetails, | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. The | | | | | | list of | | | | | | successfully | | | | | | updated | | | | | | individual | | | | | | API provider | | | | | | domain | | | | | | functions, | | | | | | registration | | | | | | update | | | | | | specific | | | | | | failure | | | | | | information | | | | | | of failed API | | | | | | provider | | | | | | domain | | | | | | function | | | | | | registration | | | | | | updates, are | | | | | | included in | | | | | | A | | | | | | PIProviderEnr | | | | | | olmentDetails | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | API provider | | | | | Content | domain\'s | | | | | | information | | | | | | updated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.9.2.3.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.9.2.3.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.9.2.3.3.2 DELETE
This method shall support the URI query parameters specified in table
8.9.2.3.3.2-1.
Table 8.9.2.3.3.2-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the response codes specified in table 8.9.2.3.3.2-2
and the response data structures and response codes specified in table
8.9.2.3.3.2-3.
Table 8.9.2.3.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.9.2.3.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The | | | | | Content | individual | | | | | | registered | | | | | | API provider | | | | | | domain | | | | | | matching the | | | | | | r | | | | | | egistrationId | | | | | | is deleted. | | | | | | All the | | | | | | individual | | | | | | API provider | | | | | | domain | | | | | | functions of | | | | | | the API | | | | | | provider | | | | | | domain are | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.9.2.3.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.9.2.3.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
###### 8.9.2.3.3.3 PATCH
This method shall support the URI query parameters specified in table
8.9.2.3.3.3-1.
Table 8.9.2.3.3.3-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
8.9.2.3.3.3-2 and the response data structures and response codes specified in
table 8.9.2.3.3.3-3.
Table 8.9.2.3.3.3-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description APIProviderEnrolmentDetails Patch M 1
Modified details of the API provider domain.
* * *
Table 8.9.2.3.3.3-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | A | M | 1 | 200 OK | API provider | | PIProviderEnr | | | | domain\'s | | olmentDetails | | | | information | | | | | | updated | | | | | | successfully. | | | | | | | | | | | | Updated | | | | | | details of | | | | | | the API | | | | | | provider | | | | | | domain is | | | | | | part of the | | | | | | AP | | | | | | IProviderEnro | | | | | | lmentDetails, | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. The | | | | | | list of | | | | | | successfully | | | | | | updated | | | | | | individual | | | | | | API provider | | | | | | domain | | | | | | functions, | | | | | | registration | | | | | | update | | | | | | specific | | | | | | failure | | | | | | information | | | | | | of failed API | | | | | | provider | | | | | | domain | | | | | | function | | | | | | registration | | | | | | updates, are | | | | | | included in | | | | | | A | | | | | | PIProviderEnr | | | | | | olmentDetails | | | | | | which is | | | | | | provided in | | | | | | the response | | | | | | body. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | API provider | | | | | Content | domain\'s | | | | | | information | | | | | | modified | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the HTTP | | | | | | PATCH method | | | | | | listed in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.9.2.3.3.3-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.9.2.3.3.3-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.9.2.3.4 Resource Custom Operations
None.
### 8.9.3 Notifications
None.
### 8.9.4 Data Model
#### 8.9.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.9.4.1-1 specifies the data types defined specifically for the
CAPIF_API_Provider_Management_API service.
Table 8.9.4.1-1: CAPIF_API_Provider_Management_API specific Data Types
* * *
Data type Section defined Description Applicability
APIProviderEnrolmentDetails Clause 8.9.4.2.2 API provider domain\'s enrolment
details.  
ApiProviderFuncRole Clause 8.9.4.3.3 The role (e.g. AEF, APF, etc.) of an API
provider domain function.  
APIProviderFunctionDetails Clause 8.9.4.2.3 API Provider domain function\'s
details.  
RegistrationInformation Clause 8.9.4.2.4 Registration information of the
individual API provider domain function.  
APIProviderEnrolmentDetailsPatch Clause 8.9.4.2.5 API provider domain\'s
enrolment parameter list for modification. PatchUpdate
* * *
Table 8.9.4.1-2 specifies data types re-used by the
CAPIF_API_Provider_Management_API service.
Table 8.9.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability SupportedFeatures 3GPP TS 29.571
[19] Used to negotiate the applicability of optional features defined in table
8.4.6-1.
* * *
#### 8.9.4.2 Structured data types
##### 8.9.4.2.1 Introduction
##### 8.9.4.2.2 Type: APIProviderEnrolmentDetails
Table 8.9.4.2.2-1: Definition of type APIProviderEnrolmentDetails
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | api | string | O | 0..1 | API | | | ProvDomId | | | | provider | | | | | | | domain ID | | | | | | | assigned | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | while | | | | | | | re | | | | | | | gistering | | | | | | | the API | | | | | | | provider | | | | | | | domain. | | | | | | | Shall not | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | from the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | to the | | | | | | | CAPIF | | | | | | | core | | | | | | | function, | | | | | | | to | | | | | | | on-board | | | | | | | itself. | | | | | | | Shall be | | | | | | | present | | | | | | | in all | | | | | | | other | | | | | | | HTTP | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | esponses. | | +-----------+-----------+---+-----------+-----------+-----------+ | regSec | string | M | 1 | Security | | | | | | | in | | | | | | | formation | | | | | | | necessary | | | | | | | for the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to | | | | | | | validate | | | | | | | the | | | | | | | reg | | | | | | | istration | | | | | | | of the | | | | | | | API | | | | | | | provider | | | | | | | domain. | | | | | | | Shall be | | | | | | | present | | | | | | | in HTTP | | | | | | | request | | | | | | | from API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | to CAPIF | | | | | | | core | | | | | | | function | | | | | | | for API | | | | | | | provider | | | | | | | domain | | | | | | | regi | | | | | | | stration. | | +-----------+-----------+---+-----------+-----------+-----------+ | api | array( | O | 1..N | A list of | | | ProvFuncs | APIProvid | | | i | | | | erFunctio | | | ndividual | | | | nDetails) | | | API | | | | | | | provider | | | | | | | domain | | | | | | | functions | | | | | | | details. | | | | | | | When | | | | | | | included | | | | | | | by the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | in the | | | | | | | HTTP | | | | | | | request | | | | | | | message, | | | | | | | it lists | | | | | | | the API | | | | | | | provider | | | | | | | domain | | | | | | | functions | | | | | | | that the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | intends | | | | | | | to | | | | | | | regist | | | | | | | er/update | | | | | | | in | | | | | | | reg | | | | | | | istration | | | | | | | or update | | | | | | | reg | | | | | | | istration | | | | | | | p | | | | | | | rocedure. | | | | | | | When | | | | | | | included | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | in the | | | | | | | HTTP | | | | | | | response | | | | | | | message, | | | | | | | it lists | | | | | | | the API | | | | | | | domain | | | | | | | functions | | | | | | | details | | | | | | | that are | | | | | | | r | | | | | | | egistered | | | | | | | or | | | | | | | updated | | | | | | | succ | | | | | | | essfully. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiPr | string | O | 0..1 | Generic | | | ovDomInfo | | | | in | | | | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | API | | | | | | | provider | | | | | | | domain | | | | | | | such as | | | | | | | details | | | | | | | of the | | | | | | | API | | | | | | | provider | | | | | | | appl | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | O | 0..1 | Used to | | | | dFeatures | | | negotiate | | | | | | | the | | | | | | | supported | | | | | | | optional | | | | | | | features | | | | | | | of the | | | | | | | API as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 7.8. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+ | f | string | O | 0..1 | Reg | | | ailReason | | | | istration | | | | | | | or update | | | | | | | specific | | | | | | | failure | | | | | | | in | | | | | | | formation | | | | | | | of failed | | | | | | | API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | regis | | | | | | | trations. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | in the | | | | | | | HTTP | | | | | | | response | | | | | | | body if | | | | | | | atleast | | | | | | | one of | | | | | | | the API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | reg | | | | | | | istration | | | | | | | or update | | | | | | | reg | | | | | | | istration | | | | | | | fails. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.9.4.2.3 Type: APIProviderFunctionDetails
Table 8.9.4.2.3-1: Definition of type APIProviderFunctionDetails
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | apiP | string | O | 0..1 | API | | | rovFuncId | | | | provider | | | | | | | domain | | | | | | | f | | | | | | | unctionID | | | | | | | assigned | | | | | | | by the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to the | | | | | | | API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | while | | | | | | | re | | | | | | | gistering | | | | | | | /updating | | | | | | | the API | | | | | | | provider | | | | | | | domain. | | | | | | | Shall not | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request | | | | | | | from the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | to the | | | | | | | CAPIF | | | | | | | core | | | | | | | function, | | | | | | | to | | | | | | | register | | | | | | | itself. | | | | | | | Shall be | | | | | | | present | | | | | | | in all | | | | | | | other | | | | | | | HTTP | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | esponses. | | +-----------+-----------+---+-----------+-----------+-----------+ | regInfo | Regis | M | 1 | In | | | | trationIn | | | formation | | | | formation | | | necessary | | | | | | | for the | | | | | | | CAPIF | | | | | | | core | | | | | | | function | | | | | | | to | | | | | | | register | | | | | | | the API | | | | | | | provider | | | | | | | domain | | | | | | | function. | | | | | | | | | | | | | | This | | | | | | | in | | | | | | | formation | | | | | | | shall be | | | | | | | present | | | | | | | in HTTP | | | | | | | POST/PUT | | | | | | | request | | | | | | | from API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | to CAPIF | | | | | | | core | | | | | | | function | | | | | | | for API | | | | | | | provider | | | | | | | domain | | | | | | | regi | | | | | | | stration. | | | | | | | In the | | | | | | | HTTP | | | | | | | response | | | | | | | message | | | | | | | from | | | | | | | CAPIF | | | | | | | core | | | | | | | function, | | | | | | | shall | | | | | | | include | | | | | | | the | | | | | | | updated | | | | | | | reg | | | | | | | istration | | | | | | | in | | | | | | | formation | | | | | | | for API | | | | | | | provider | | | | | | | domain | | | | | | | function. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiPro | A | M | 1 | Role of | | | vFuncRole | piProvide | | | API | | | | rFuncRole | | | provider | | | | | | | domain | | | | | | | function. | | | | | | | | | | | | | | The role | | | | | | | shall be | | | | | | | present | | | | | | | in the | | | | | | | HTTP | | | | | | | POST/PUT | | | | | | | request | | | | | | | that the | | | | | | | API | | | | | | | m | | | | | | | anagement | | | | | | | function | | | | | | | intends | | | | | | | to | | | | | | | regist | | | | | | | er/update | | | | | | | the API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | as. CAPIF | | | | | | | core | | | | | | | function | | | | | | | shall | | | | | | | register | | | | | | | the role | | | | | | | of API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | as per | | | | | | | the | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | apiPro | string | O | 0..1 | Generic | | | vFuncInfo | | | | in | | | | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | API | | | | | | | provider | | | | | | | domain | | | | | | | function | | | | | | | such as | | | | | | | details | | | | | | | of the | | | | | | | API | | | | | | | provider | | | | | | | appl | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 8.9.4.2.4 Type: RegistrationInformation
Table 8.9.4.2.4-1: Definition of type RegistrationInformation
* * *
Attribute name Data type P Cardinality Description Applicability apiProvPubKey
string M 1 Public Key of API Provider domain function.  
apiProvCert string O 0..1 API provider domain function\'s generic client
certificate
* * *
##### 8.9.4.2.5 Type: APIProviderEnrolmentDetailsPatch
Table 8.9.4.2.5-1: Definition of type APIProviderEnrolmentDetailsPatch
* * *
Attribute name Data type P Cardinality Description Applicability apiProvFuncs
array(APIProviderFunctionDetails) O 1..N A list of individual API provider
domain functions details. When included by the API management function in the
HTTP request message, it lists the API provider domain functions that the API
management function intends to register/update in registration or update
registration procedure.  
apiProvDomInfo string O 0..1 Generic information related to the API provider
domain such as details of the API provider applications.
* * *
#### 8.9.4.3 Simple data types and enumerations
##### 8.9.4.3.1 Introduction
This clause defines simple data types and enumerations that will be referenced
from data structures defined in the previous clauses.
##### 8.9.4.3.2 Simple data types
The simple data types defined in table 8.9.4.3.2-1 shall be supported.
Table 8.9.4.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability n/a
* * *
##### 8.9.4.3.3 Enumeration: ApiProviderFuncRole
Table 8.9.4.3.3-1: Enumeration ApiProviderFuncRole
* * *
Enumeration value Description Applicability AEF API provider function is API
Exposing Function.  
APF API provider function is API Publishing Function.  
AMF API provider function is API Management Function.
* * *
### 8.9.5 Error Handling
General error responses are defined in clause 7.7 of this specification.
### 8.9.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8. Table
8.9.6-1 lists the supported features for CAPIF_API_Invoker_Management_API.
Table 8.9.6-1: Supported Features
* * *
Feature number Feature Name Description 1 PatchUpdate Indicates the support of
the PATCH method for updating an API Provider Domain Registration resource.
* * *
## 8.10 CAPIF_Routing_Info_API
### 8.10.1 API URI
The CAPIF_Routing_Info_API service shall use the CAPIF_Routing_Info_API.
The request URIs used in HTTP requests from the API exposing function towards
the CAPIF core function shall have the Resource URI structure as defined in
clause 7.5 with the following clarifications:
\- The \ shall be \"capif-routing-info\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 8.10.2.
### 8.10.2 Resources
#### 8.10.2.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 8.10.2.1-1 depicts the resource URIs structure for the
CAPIF_Routing_Info_API.
Figure 8.10.2.1-1: Resource URI structure of the CAPIF_Routing_Info_API
Table 8.10.2.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 8.10.2.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description
Individual Service API routing info /service-apis/{serviceApiId} GET Retrieves
the API routing information for a published service API and API exposing
function which applies the topology hiding.
* * *
#### 8.10.2.2 Resource: Individual Service API routing info
##### 8.10.2.2.1 Description
The API Routing Information resource represents the API routing information
for the service API per API Exposing Function.
##### 8.10.2.2.2 Resource Definition
Resource URI: **{apiRoot}/capif-routing-info/\ /service-
apis/{serviceApiId}**
This resource shall support the resource URI variables defined in table
8.10.2.2.2-1.
Table 8.10.2.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 7.5 serviceApiId string
Identifies an individual published service API
* * *
##### 8.10.2.2.3 Resource Standard Methods
###### 8.10.2.2.3.1 GET
This method shall support the URI query parameters specified in table
8.10.2.2.3.1-1.
Table 8.10.2.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description aef-id string M 1 AEF identifier
supp-feat SupportedFeatures O 0..1 To filter irrelevant responses related to
unsupported features.
* * *
This method shall support the request data structures specified in table
8.10.2.2.3.1-2 and the response data structures and response codes specified
in table 8.10.2.2.3.1-3.
Table 8.10.2.2.3.1-2: Data structures supported by the GET Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 8.10.2.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | Codes | | +---------------+---+-------------+---------------+---------------+ | RoutingInfo | M | 1 | 200 OK | The Routing | | | | | | information | | | | | | applicable | | | | | | for the | | | | | | service API | | | | | | requested. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | CAPIF core | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 8.10.2.2.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
Table 8.10.2.2.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative CAPIF core function.
* * *
##### 8.10.2.2.4 Resource Custom Operations
None.
### 8.10.3 Notifications
None.
### 8.10.4 Data Model
#### 8.10.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 also apply to this API.
Table 8.10.4.1-1 specifies the data types defined specifically for the
CAPIF_Routing_Info_API service.
Table 8.10.4.1-1: CAPIF_Routing_Info_API specific Data Types
* * *
Data type Section defined Description Applicability RoutingInfo Clause
8.10.4.2.2 API routing information.  
RoutingRule Clause 8.10.4.2.3 API routing rule.  
Ipv6AddressRange Clause 8.10.4.2.4 IPv6 address range.
* * *
Table 8.10.4.1-2 specifies data types re-used by the CAPIF_Routing_Info_API
service.
Table 8.10.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability AefProfile Clause 8.2.4.2.4  
Ipv4AddressRange 3GPP TS 29.510 [28]  
Ipv6Addr 3GPP TS 29.122 [14]  
SupportedFeatures 3GPP TS 29.571 [19]
* * *
#### 8.10.4.2 Structured data types
##### 8.10.4.2.1 Introduction
This clause defines data structures to be used in resource representations.
##### 8.10.4.2.2 Type: RoutingInfo
Table 8.10.4.2.2-1: Definition of type RoutingInfo
* * *
Attribute name Data type P Cardinality Description Applicability routingRules
array(RoutingRule) M 1..N Routing rules
* * *
##### 8.10.4.2.3 Type: RoutingRule
Table 8.10.4.2.3-1: Definition of type RoutingRule
* * *
Attribute name Data type P Cardinality Description Applicability
ipv4AddrRanges array(Ipv4AddressRange) O 1..N The IPv4 address range for the
API invocation source IP address. (NOTE)  
ipv6AddrRanges array(Ipv6AddressRange) O 1..N The IPv6 address range for the
API invocation source IP address. (NOTE)  
aefProfile AefProfile M 1 The target AEF profile  
NOTE: If no IP address range is provided, it means the service API invocation
from any source IP address can be routed to the target AEF.
* * *
##### 8.10.4.2.4 Type: Ipv6AddressRange
Table 8.10.4.2.4-1: Definition of type Ipv6AddressRange
* * *
Attribute name Data type P Cardinality Description Applicability start
Ipv6Addr M 1 First value identifying the start of an IPv6 address range  
end Ipv6Addr M 1 Last value identifying the end of an IPv6 address range
* * *
#### 8.10.4.3 Simple data types and enumerations
None.
### 8.10.5 Error Handling
General error responses are defined in clause 7.7.
### 8.10.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 8.10.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** n/a
* * *
# 9 AEF API Definition
## 9.1 AEF_Security_API
### 9.1.1 API URI
The AEF_Security_API service shall use the AEF_Security_API.
The request URIs used in HTTP requests from the API invoker towards the API
exposing function shall have the Resource URI structure defined in clause 7.5
with the following clarifications:
\- The \ shall be \"aef-security\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 9.1.2a.
### 9.1.2 Resources
There is no resource defined for this API.
### 9.1.2A Custom Operations without associated resources
#### 9.1.2A.1 Overview
Custom operations used for this API are summarized in table 9.1.2A.1-1.
\"{apiRoot}\" and \"\\" are set as described in clause 7.5 and
clause 9.1.1 respectively.
Table 9.1.2A.1-1: Custom operations without associated resources
* * *
Operation name Custom operation URI Mapped HTTP method Description check-
authentication /check-authentication POST Check authentication request.
revoke-authentication /revoke-authorization POST Revoke authorization for
service APIs.
* * *
#### 9.1.2A.2 Operation: check-authentication
##### 9.1.2A.2.1 Description
This custom operation allows the API invoker to confirm from the API exposing
function, that necessary authentication data is available to authenticate the
API invoker on API invocation.
##### 9.1.2A.2.2 Operation Definition
This method shall support the URI query parameters specified in table
9.1.2A.2.2-1.
Table 9.1.2A.2.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This operation shall support the request and response data structures, and
response codes specified in tables 9.1.2A.2.2-2 and 9.1.2A.2.2-3.
Table 9.1.2A.2.2-2: Data structures supported by the POST Request Body on this
operation
* * *
Data type P Cardinality Description CheckAuthenticationReq M 1 Authentication
check request data
* * *
Table 9.1.2A.2.2-3: Data structures supported by the POST Response Body on
this operation
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | CheckAuth | M | 1 | 200 OK | The request | | enticationRsp | | | | was | | | | | | successful. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | a | | | | | | uthentication | | | | | | confirmation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | API exposing | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | a | | | | | | uthentication | | | | | | confirmation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | API exposing | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 9.1.2A.2.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative API exposing function.
* * *
Table 9.1.2A.2.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative API exposing function.
* * *
#### 9.1.2A.3 Operation: revoke-authorization
##### 9.1.2A.3.1 Description
This custom operation allows the CAPIF core function to request the API
exposing function to revoke the authorization of the API invoker for the
indicated service APIs.
##### 9.1.2A.3.2 Operation Definition
This method shall support the URI query parameters specified in table
9.1.2A.3.2-1.
Table 9.1.2A.3.2-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This operation shall support the request and response data structures, and
response codes specified in tables 9.1.2A.3.2-2 and 9.1.2A.3.2-3.
Table 9.1.2A.3.2-2: Data structures supported by the POST Request Body on this
operation
* * *
Data type P Cardinality Description RevokeAuthorizationReq M 1 Authorization
revocation request data
* * *
Table 9.1.2A.3.2-3: Data structures supported by the POST Response Body on
this operation
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | RevokeAut | M | 1 | 200 OK | The request | | horizationRsp | | | | was | | | | | | successful. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during | | | | | | authorization | | | | | | revocation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | API exposing | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during | | | | | | authorization | | | | | | revocation. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | API exposing | | | | | | function. | | | | | | | | | | | | Redirection | | | | | | handling is | | | | | | described in | | | | | | clause 5.2.10 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.122 [14]. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | table 5.2.6-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.122 [14] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 9.1.2A.3.2-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative API exposing function.
* * *
Table 9.1.2A.3.2-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative API exposing function.
* * *
### 9.1.3 Notifications
None.
### 9.1.4 Data Model
#### 9.1.4.1 General
This clause specifies the application data model supported by the API. Data
types listed in clause 7.2 apply to this API.
Table 9.1.4.1-1 specifies the data types defined specifically for the
AEF_Security_API service.
Table 9.1.4.1-1: AEF_Security_API specific Data Types
* * *
Data type Section defined Description Applicability CheckAuthenticationReq
Clause 9.1.4.2.2 Authentication check request data  
CheckAuthenticationRsp Clause 9.1.4.2.3 Authentication check response data  
RevokeAuthorizationReq Clause 9.1.4.2.4 Authorization revocation request data  
RevokeAuthorizationRsp Clause 9.1.4.2.5 Authorization revocation response data
* * *
Table 9.1.4.1-2 specifies data types re-used by the AEF_Security_API service.
Table 9.1.4.1-2: Re-used Data Types
* * *
Data type Reference Comments Applicability SecurityNotification Clause
8.5.4.2.5 Information about the revoked APIs  
SupportedFeatures 3GPP TS 29.571 [19] Used to negotiate the applicability of
optional features defined in table 9.1.6-1.
* * *
#### 9.1.4.2 Structured data types
##### 9.1.4.2.1 Introduction
This clause defines the structures to be used in resource representations for
the AEF_Security_API.
##### 9.1.4.2.2 Type: CheckAuthenticationReq
Table 9.1.4.2.2-1: Definition of type CheckAuthenticationReq
* * *
Attribute name Data type P Cardinality Description Applicability apiInvokerId
string M 1 API invoker ID assigned by the CAPIF core function to the API
invoker while on-boarding the API invoker.  
supportedFeatures SupportedFeatures M 1 Used to negotiate the supported
optional features of the API as described in clause 7.8.
* * *
##### 9.1.4.2.3 Type: CheckAuthenticationRsp
Table 9.1.4.2.3-1: Definition of type CheckAuthenticationRsp
* * *
Attribute name Data type P Cardinality Description Applicability
supportedFeatures SupportedFeatures M 1 Used to negotiate the supported
optional features of the API as described in clause 7.8.
* * *
##### 9.1.4.2.4 Type: RevokeAuthorizationReq
Table 9.1.4.2.4-1: Definition of type RevokeAuthorizationReq
* * *
Attribute name Data type P Cardinality Description Applicability revokeInfo
SecurityNotification M 1 It contains detailed revocation information.  
supportedFeatures SupportedFeatures M 1 Used to negotiate the supported
optional features of the API as described in clause 7.8.
* * *
##### 9.1.4.2.5 Type: RevokeAuthorizationRsp
Table 9.1.4.2.5-1: Definition of type RevokeAuthorizationRsp
* * *
Attribute name Data type P Cardinality Description Applicability
supportedFeatures SupportedFeatures M 1 Used to negotiate the supported
optional features of the API as described in clause 7.8.
* * *
#### 9.1.4.3 Simple data types and enumerations
None.
### 9.1.5 Error Handling
General error responses are defined in clause 7.7.
### 9.1.6 Feature negotiation
General feature negotiation procedures are defined in clause 7.8.
Table 9.1.6-1: Supported Features
* * *
**Feature number** **Feature Name** **Description** n/a
* * *
# 10 Security
## 10.1 General
Security methods for CAPIF are specified in 3GPP TS 33.122 [16].
## 10.2 CAPIF-1/1e security
Secure communication between API invoker and CAPIF core function over
CAPIF-1/1e reference points, using a TLS protocol based connection is defined
in 3GPP TS 33.122 [16].
For Onboard_API_Invoker service operation of the
CAPIF_API_Invoker_Management_API, the TLS protocol based connection shall be
established using server certificate as defined in 3GPP TS 33.122 [16].
For rest of the CAPIF APIs, the TLS protocol based connection shall be
established with certificate based mutual authentication as defined in 3GPP TS
33.122 [16].
## 10.3 CAPIF-2/2e security and securely invoking service APIs
For secure communication between API invoker and API exposing function and
ensuring secure invocations of service APIs, the API invoker:
\- shall negotiate the security method with the CAPIF core function using the
Obtain_Security_Method service operation of the CAPIF_Security_API;
\- shall initiate the authentication with the API exposing function using the
Initiate_Authentication service operation of the AEF_Security_API; and
\- shall establish a secure connection with the API exposing function as
defined in 3GPP TS 33.122 [16], using the method negotiated with the CAPIF
core function.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex is based on the OpenAPI Specification [3] and provides
corresponding representations of all APIs defined in the present
specification, in YAML format.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of 3GPP TR 21.900 [27]
and clause 5.3.1 of 3GPP TS 29.501 [18] for further information).
# A.2 CAPIF_Discover_Service_API
openapi: 3.0.0
info:
title: CAPIF_Discover_Service_API
description: \|
API for discovering service APIs.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.1\"
externalDocs:
description: 3GPP TS 29.222 V17.6.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/service-apis/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222.
paths:
/allServiceAPIs:
get:
description: >
Discover published service APIs and retrieve a collection of APIs according
to certain filter criteria.
parameters:
\- name: api-invoker-id
in: query
description: >
String identifying the API invoker assigned by the CAPIF core function.
It also represents the CCF identifier in the CAPIF-6/6e interface.
required: true
schema:
type: string
\- name: api-name
in: query
description: >
API name, it is set as {apiName} part of the URI structure as defined
in clause 5.2.4 of 3GPP TS 29.122.
schema:
type: string
\- name: api-version
in: query
description: API major version the URI (e.g. v1).
schema:
type: string
\- name: comm-type
in: query
description: Communication type used by the API (e.g. REQUEST_RESPONSE).
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/CommunicationType\'
\- name: protocol
in: query
description: Protocol used by the API.
schema:
\$ref: \'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/Protocol\'
\- name: aef-id
in: query
description: AEF identifer.
schema:
type: string
\- name: data-format
in: query
description: Data formats used by the API (e.g. serialization protocol JSON
used).
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/DataFormat\'
\- name: api-cat
in: query
description: The service API category to which the service API belongs to.
schema:
type: string
\- name: preferred-aef-loc
in: query
description: The preferred AEF location.
content:
application/json:
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/AefLocation\'
\- name: supported-features
in: query
description: Features supported by the NF consumer for the CAPIF Discover
Service API.
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
\- name: api-supported-features
in: query
description: >
Features supported by the discovered service API indicated by api-name
parameter.
This may only be present if api-name query parameter is present.
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: >
The response body contains the result of the search over the list of
registered APIs.
content:
application/json:
schema:
\$ref: \'#/components/schemas/DiscoveredAPIs\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
DiscoveredAPIs:
type: object
description: >
Represents a list of APIs currently registered in the CAPIF core function
and satisfying a number of filter criteria provided by the API consumer.
properties:
serviceAPIDescriptions:
type: array
items:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/ServiceAPIDescription\'
minItems: 1
description: >
Description of the service API as published by the service. Each service
API description shall include AEF profiles matching the filter criteria.
# A.3 CAPIF_Publish_Service_API
openapi: 3.0.0
info:
title: CAPIF_Publish_Service_API
description: \|
API for publishing service APIs.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.1\"
externalDocs:
description: 3GPP TS 29.222 V17.6.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/published-apis/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222.
paths:
# APF published API
/{apfId}/service-apis:
post:
description: Publish a new API.
parameters:
\- name: apfId
in: path
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
responses:
\'201\':
description: >
Service API published successfully The URI of the created resource
shall be returned in the \"Location\" HTTP header.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/published-apis/v1/{apfId}/service-apis/{serviceApiId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
get:
description: Retrieve all published APIs.
parameters:
\- name: apfId
in: path
required: true
schema:
type: string
responses:
\'200\':
description: Definition of all service API(s) published by the API publishing
function.
content:
application/json:
schema:
type: array
items:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
minItems: 0
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
# Individual APF published API
/{apfId}/service-apis/{serviceApiId}:
get:
description: Retrieve a published service API.
parameters:
\- name: serviceApiId
in: path
required: true
schema:
type: string
\- name: apfId
in: path
required: true
schema:
type: string
responses:
\'200\':
description: >
Definition of individual service API published by the API publishing function.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
put:
description: Update a published service API.
parameters:
\- name: serviceApiId
in: path
required: true
schema:
type: string
\- name: apfId
in: path
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
responses:
\'200\':
description: Definition of service API updated successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
\'204\':
description: No Content
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
patch:
description: Modify an existing published service API.
operationId: ModifyIndAPFPubAPI
tags:
\- Individual APF published API
parameters:
\- name: serviceApiId
in: path
required: true
schema:
type: string
\- name: apfId
in: path
required: true
schema:
type: string
requestBody:
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescriptionPatch\'
responses:
\'200\':
description: >
The definition of the service API is modified successfully and a
representation of the updated service API is returned in the request body.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceAPIDescription\'
\'204\':
description: No Content. The definition of the service API is modified
successfully.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
delete:
description: Unpublish a published service API.
parameters:
\- name: serviceApiId
in: path
required: true
schema:
type: string
\- name: apfId
in: path
required: true
schema:
type: string
responses:
\'204\':
description: The individual published service API matching the serviceAPiId is
deleted.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
# Components
components:
schemas:
# Data Type for representations
ServiceAPIDescription:
type: object
description: Represents the description of a service API as published by the
APF.
properties:
apiName:
type: string
description: API name, it is set as {apiName} part of the URI structure as
defined in clause 5.2.4 of 3GPP TS 29.122.
apiId:
type: string
description: >
API identifier assigned by the CAPIF core function to the published service
API.
Shall not be present in the HTTP POST request from the API publishing function
to the CAPIF core function. Shall be present in the HTTP POST response from
the
CAPIF core function to the API publishing function and in the HTTP GET
response
from the CAPIF core function to the API invoker (discovery API).
aefProfiles:
type: array
items:
\$ref: \'#/components/schemas/AefProfile\'
minItems: 1
description: >
AEF profile information, which includes the exposed API details (e.g.
protocol).
description:
type: string
description: Text description of the API
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
shareableInfo:
\$ref: \'#/components/schemas/ShareableInformation\'
serviceAPICategory:
type: string
apiSuppFeats:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
pubApiPath:
\$ref: \'#/components/schemas/PublishedApiPath\'
ccfId:
type: string
description: CAPIF core function identifier.
required:
\- apiName
InterfaceDescription:
type: object
description: Represents the description of an API\'s interface.
properties:
ipv4Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv4Addr\'
ipv6Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv6Addr\'
port:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Port\'
securityMethods:
type: array
items:
\$ref: \'#/components/schemas/SecurityMethod\'
minItems: 1
description: >
Security methods supported by the interface, it take precedence over
the security methods provided in AefProfile, for this specific interface.
oneOf:
\- required: [ipv4Addr]
\- required: [ipv6Addr]
AefProfile:
type: object
description: Represents the AEF profile data.
properties:
aefId:
type: string
description: Identifier of the API exposing function
versions:
type: array
items:
\$ref: \'#/components/schemas/Version\'
minItems: 1
description: API version
protocol:
\$ref: \'#/components/schemas/Protocol\'
dataFormat:
\$ref: \'#/components/schemas/DataFormat\'
securityMethods:
type: array
items:
\$ref: \'#/components/schemas/SecurityMethod\'
minItems: 1
description: Security methods supported by the AEF
domainName:
type: string
description: Domain to which API belongs to
interfaceDescriptions:
type: array
items:
\$ref: \'#/components/schemas/InterfaceDescription\'
minItems: 1
description: Interface details
aefLocation:
\$ref: \'#/components/schemas/AefLocation\'
required:
\- aefId
\- versions
oneOf:
\- required: [domainName]
\- required: [interfaceDescriptions]
Resource:
type: object
description: Represents the API resource data.
properties:
resourceName:
type: string
description: Resource name
commType:
\$ref: \'#/components/schemas/CommunicationType\'
uri:
type: string
description: >
Relative URI of the API resource, it is set as {apiSpecificSuffixes} part
of the URI structure as defined in clause 5.2.4 of 3GPP TS 29.122.
custOpName:
type: string
description: >
it is set as {custOpName} part of the URI structure for a custom operation
associated with a resource as defined in clause 5.2.4 of 3GPP TS 29.122.
operations:
type: array
items:
\$ref: \'#/components/schemas/Operation\'
minItems: 1
description: >
Supported HTTP methods for the API resource. Only applicable when the
protocol in AefProfile indicates HTTP.
description:
type: string
description: Text description of the API resource
required:
\- resourceName
\- commType
\- uri
CustomOperation:
type: object
description: Represents the description of a custom operation.
properties:
commType:
\$ref: \'#/components/schemas/CommunicationType\'
custOpName:
type: string
description: >
it is set as {custOpName} part of the URI structure for a custom operation
without resource association as defined in clause 5.2.4 of 3GPP TS 29.122.
operations:
type: array
items:
\$ref: \'#/components/schemas/Operation\'
minItems: 1
description: >
Supported HTTP methods for the API resource. Only applicable when the
protocol in AefProfile indicates HTTP.
description:
type: string
description: Text description of the custom operation
required:
\- commType
\- custOpName
Version:
type: object
description: Represents the API version information.
properties:
apiVersion:
type: string
description: API major version in URI (e.g. v1)
expiry:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
resources:
type: array
items:
\$ref: \'#/components/schemas/Resource\'
minItems: 1
description: Resources supported by the API.
custOperations:
type: array
items:
\$ref: \'#/components/schemas/CustomOperation\'
minItems: 1
description: Custom operations without resource association.
required:
\- apiVersion
ShareableInformation:
type: object
description: >
Indicates whether the service API and/or the service API category can be
shared
to the list of CAPIF provider domains.
properties:
isShareable:
type: boolean
description: >
Set to \"true\" indicates that the service API and/or the service API
category can be shared to the list of CAPIF provider domain information.
Otherwise set to \"false\".
capifProvDoms:
type: array
items:
type: string
minItems: 1
description: >
List of CAPIF provider domains to which the service API information to be
shared.
required:
\- isShareable
PublishedApiPath:
type: object
description: Represents the published API path within the same CAPIF provider
domain.
properties:
ccfIds:
type: array
items:
type: string
minItems: 1
description: A list of CCF identifiers where the service API is already
published.
AefLocation:
description: >
The location information (e.g. civic address, GPS coordinates, data center ID)
where the AEF providing the service API is located.
type: object
properties:
civicAddr:
\$ref: \'TS29572_Nlmf_Location.yaml#/components/schemas/CivicAddress\'
geoArea:
\$ref: \'TS29572_Nlmf_Location.yaml#/components/schemas/GeographicArea\'
dcId:
type: string
description: >
Identifies the data center where the AEF providing the service API is located.
ServiceAPIDescriptionPatch:
type: object
description: >
Represents the parameters to request the modification of an APF published API
resource.
properties:
aefProfiles:
type: array
items:
\$ref: \'#/components/schemas/AefProfile\'
minItems: 1
description:
type: string
description: Text description of the API
shareableInfo:
\$ref: \'#/components/schemas/ShareableInformation\'
serviceAPICategory:
type: string
apiSuppFeats:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
pubApiPath:
\$ref: \'#/components/schemas/PublishedApiPath\'
ccfId:
type: string
description: CAPIF core function identifier.
Protocol:
anyOf:
\- type: string
enum:
\- HTTP_1_1
\- HTTP_2
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- HTTP_1_1: HTTP version 1.1
\- HTTP_2: HTTP version 2
CommunicationType:
anyOf:
\- type: string
enum:
\- REQUEST_RESPONSE
\- SUBSCRIBE_NOTIFY
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- REQUEST_RESPONSE: The communication is of the type request-response
\- SUBSCRIBE_NOTIFY: The communication is of the type subscribe-notify
DataFormat:
anyOf:
\- type: string
enum:
\- JSON
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- JSON: JavaScript Object Notation
SecurityMethod:
anyOf:
\- type: string
enum:
\- PSK
\- PKI
\- OAUTH
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- PSK: Security method 1 (Using TLS-PSK) as described in 3GPP TS 33.122
\- PKI: Security method 2 (Using PKI) as described in 3GPP TS 33.122
\- OAUTH: Security method 3 (TLS with OAuth token) as described in 3GPP TS
33.122
Operation:
anyOf:
\- type: string
enum:
\- GET
\- POST
\- PUT
\- PATCH
\- DELETE
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- GET: HTTP GET method
\- POST: HTTP POST method
\- PUT: HTTP PUT method
\- PATCH: HTTP PATCH method
\- DELETE: HTTP DELETE method
# A.4 CAPIF_Events_API
openapi: 3.0.0
info:
title: CAPIF_Events_API
description: \|
API for event subscription management.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/capif-events/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/{subscriberId}/subscriptions:
post:
description: Creates a new individual CAPIF Event Subscription.
parameters:
\- name: subscriberId
in: path
description: Identifier of the Subscriber
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventSubscription\'
callbacks:
notificationDestination:
\'{request.body#/notificationDestination}\':
post:
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventNotification\'
responses:
\'204\':
description: No Content (successful notification)
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: Created (Successful creation of subscription)
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventSubscription\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/capif-events/v1/{subscriberId}/subscriptions/{subscriptionId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/{subscriberId}/subscriptions/{subscriptionId}:
delete:
description: Deletes an individual CAPIF Event Subscription.
parameters:
\- name: subscriberId
in: path
description: Identifier of the Subscriber
required: true
schema:
type: string
\- name: subscriptionId
in: path
description: Identifier of an individual Events Subscription
required: true
schema:
type: string
responses:
\'204\':
description: >
The individual CAPIF Events Subscription matching the subscriptionId is
deleted.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
EventSubscription:
type: object
description: Represents an individual CAPIF Event Subscription resource.
properties:
events:
type: array
items:
\$ref: \'#/components/schemas/CAPIFEvent\'
minItems: 1
description: Subscribed events
eventFilters:
type: array
items:
\$ref: \'#/components/schemas/CAPIFEventFilter\'
minItems: 1
description: Subscribed event filters
eventReq:
\$ref:
\'TS29523_Npcf_EventExposure.yaml#/components/schemas/ReportingInformation\'
notificationDestination:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
requestTestNotification:
type: boolean
description: >
Set to true by Subscriber to request the CAPIF core function to send a
test notification as defined in in clause 7.6. Set to false or omitted
otherwise.
websockNotifConfig:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/WebsockNotifConfig\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- events
\- notificationDestination
EventNotification:
type: object
description: Represents an individual CAPIF Event notification.
properties:
subscriptionId:
type: string
description: >
Identifier of the subscription resource to which the notification
is related -- CAPIF resource identifier
events:
\$ref: \'#/components/schemas/CAPIFEvent\'
eventDetail:
\$ref: \'#/components/schemas/CAPIFEventDetail\'
required:
\- subscriptionId
\- events
CAPIFEventFilter:
type: object
description: Represents a CAPIF event filter.
properties:
apiIds:
type: array
items:
type: string
minItems: 1
description: Identifier of the service API
apiInvokerIds:
type: array
items:
type: string
minItems: 1
description: Identity of the API invoker
aefIds:
type: array
items:
type: string
minItems: 1
description: Identifier of the API exposing function
CAPIFEventDetail:
type: object
description: Represents a CAPIF event details.
properties:
serviceAPIDescriptions:
type: array
items:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/ServiceAPIDescription\'
minItems: 1
description: Description of the service API as published by the APF.
apiIds:
type: array
items:
type: string
minItems: 1
description: Identifier of the service API
apiInvokerIds:
type: array
items:
type: string
minItems: 1
description: Identity of the API invoker
accCtrlPolList:
\$ref: \'#/components/schemas/AccessControlPolicyListExt\'
invocationLogs:
type: array
items:
\$ref:
\'TS29222_CAPIF_Logging_API_Invocation_API.yaml#/components/schemas/InvocationLog\'
minItems: 1
description: Invocation logs.
apiTopoHide:
\$ref: \'#/components/schemas/TopologyHiding\'
AccessControlPolicyListExt:
description: Represents the extension for access control policies.
allOf:
\- \$ref:
\'TS29222_CAPIF_Access_Control_Policy_API.yaml#/components/schemas/AccessControlPolicyList\'
\- type: object
properties:
apiId:
type: string
required:
\- apiId
TopologyHiding:
type: object
description: Represents the routing rules information of a service API.
properties:
apiId:
type: string
routingRules:
type: array
items:
\$ref: \'TS29222_CAPIF_Routing_Info_API.yaml#/components/schemas/RoutingRule\'
minItems: 1
required:
\- apiId
\- routingRules
CAPIFEvent:
anyOf:
\- type: string
enum:
\- SERVICE_API_AVAILABLE
\- SERVICE_API_UNAVAILABLE
\- SERVICE_API_UPDATE
\- API_INVOKER_ONBOARDED
\- API_INVOKER_OFFBOARDED
\- SERVICE_API_INVOCATION_SUCCESS
\- SERVICE_API_INVOCATION_FAILURE
\- ACCESS_CONTROL_POLICY_UPDATE
\- ACCESS_CONTROL_POLICY_UNAVAILABLE
\- API_INVOKER_AUTHORIZATION_REVOKED
\- API_INVOKER_UPDATED
\- API_TOPOLOGY_HIDING_CREATED
\- API_TOPOLOGY_HIDING_REVOKED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- SERVICE_API_AVAILABLE: Events related to the availability of service APIs
after the service APIs are published.
\- SERVICE_API_UNAVAILABLE: Events related to the unavailability of service
APIs after the service APIs are unpublished.
\- SERVICE_API_UPDATE: Events related to change in service API information.
\- API_INVOKER_ONBOARDED: Events related to API invoker onboarded to CAPIF.
\- API_INVOKER_OFFBOARDED: Events related to API invoker offboarded from
CAPIF.
\- SERVICE_API_INVOCATION_SUCCESS: Events related to the successful invocation
of service APIs.
\- SERVICE_API_INVOCATION_FAILURE: Events related to the failed invocation of
service APIs.
\- ACCESS_CONTROL_POLICY_UPDATE: Events related to the update for the access
control policy related to the service APIs.
\- ACCESS_CONTROL_POLICY_UNAVAILABLE: Events related to the unavailability of
the access control policy related to the service APIs.
\- API_INVOKER_AUTHORIZATION_REVOKED: Events related to the revocation of the
authorization of API invokers to access the service APIs.
\- API_INVOKER_UPDATED: Events related to API invoker profile updated to
CAPIF.
\- API_TOPOLOGY_HIDING_CREATED: Events related to the creation or update of
the API topology hiding information of the service APIs after the service APIs
are published.
\- API_TOPOLOGY_HIDING_REVOKED: Events related to the revocation of the API
topology hiding information of the service APIs after the service APIs are
unpublished.
# A.5 CAPIF_API_Invoker_Management_API
openapi: 3.0.0
info:
title: CAPIF_API_Invoker_Management_API
description: \|
API for API invoker management.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.1\"
externalDocs:
description: 3GPP TS 29.222 V17.7.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/api-invoker-management/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/onboardedInvokers:
post:
description: Creates a new individual API Invoker profile.
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
callbacks:
notificationDestination:
\'{request.body#/notificationDestination}\':
post:
description: Notify the API Invoker about the onboarding completion
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/OnboardingNotification\'
responses:
\'204\':
description: No Content (successful onboarding notification)
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: API invoker on-boarded successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/api-invoker-management/v1/onboardedInvokers/{onboardingId}
required: true
schema:
type: string
\'202\':
description: The CAPIF core has accepted the Onboarding request and is
processing it.
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/onboardedInvokers/{onboardingId}:
delete:
description: Deletes an individual API Invoker.
parameters:
\- name: onboardingId
in: path
description: String identifying an individual on-boarded API invoker resource
required: true
schema:
type: string
responses:
\'204\':
description: The individual API Invoker matching onboardingId was offboarded.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
put:
description: Updates an individual API invoker details.
parameters:
\- name: onboardingId
in: path
description: String identifying an individual on-boarded API invoker resource
required: true
schema:
type: string
requestBody:
description: representation of the API invoker details to be updated in CAPIF
core function
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
callbacks:
notificationDestination:
\'{request.body#/notificationDestination}\':
post:
description: Notify the API Invoker about the API invoker update completion
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/OnboardingNotification\'
responses:
\'204\':
description: No Content (successful API invoker update notification)
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
responses:
\'200\':
description: API invoker details updated successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
\'202\':
description: >
The CAPIF core has accepted the API invoker update details request and is
processing it.
\'204\':
description: >
API invoker\'s information updated successfully, with no content to be
sent in the response body.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
patch:
description: Modify an individual API invoker details.
operationId: ModifyIndApiInvokeEnrolment
tags:
\- Individual API Invoker enrolment details
parameters:
\- name: onboardingId
in: path
required: true
schema:
type: string
requestBody:
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetailsPatch\'
responses:
\'200\':
description: >
The definition of the service API is modified successfully and a
representation of the updated service API is returned in the request body.
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
\'202\':
description: The request is accepted and under processing.
\'204\':
description: No Content. The definition of the service API is modified
successfully.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
OnboardingInformation:
type: object
description: Represents on-boarding information of the API invoker.
properties:
apiInvokerPublicKey:
type: string
description: The API Invoker\'s public key
apiInvokerCertificate:
type: string
description: >
The API Invoker\'s generic client certificate, provided by the CAPIF core
function.
onboardingSecret:
type: string
description: >
The API Invoker\'s onboarding secret, provided by the CAPIF core function.
required:
\- apiInvokerPublicKey
APIList:
type: object
description: Represents a list of APIs.
properties:
serviceAPIDescriptions:
type: array
items:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/ServiceAPIDescription\'
minItems: 1
description: The list of service APIs that the API Invoker is allowed to
invoke.
APIInvokerEnrolmentDetails:
type: object
properties:
apiInvokerId:
type: string
description: >
API invoker ID assigned by the CAPIF core function to the API invoker while
on-boarding the API invoker. Shall not be present in the HTTP POST request
from the API invoker to the CAPIF core function, to on-board itself. Shall be
present in all other HTTP requests and responses.
readOnly: true
onboardingInformation:
\$ref: \'#/components/schemas/OnboardingInformation\'
notificationDestination:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
requestTestNotification:
type: boolean
description: >
Set to true by Subscriber to request the CAPIF core function to send a
test notification as defined in in clause 7.6. Set to false or omitted
otherwise.
websockNotifConfig:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/WebsockNotifConfig\'
apiList:
\$ref: \'#/components/schemas/APIList\'
apiInvokerInformation:
type: string
description: >
Generic information related to the API invoker such as details of
the device or the application.
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- onboardingInformation
\- notificationDestination
description: Information about the API Invoker that requested to onboard
OnboardingNotification:
type: object
description: Represents a notification of on-boarding or update result.
properties:
result:
type: boolean
description: Set to \"true\" indicate successful on-boarding. Otherwise set to
\"false\"
resourceLocation:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
apiInvokerEnrolmentDetails:
\$ref: \'#/components/schemas/APIInvokerEnrolmentDetails\'
apiList:
\$ref: \'#/components/schemas/APIList\'
required:
\- result
APIInvokerEnrolmentDetailsPatch:
type: object
description: Represents an API Invoker\'s enrolment details to be updated.
properties:
onboardingInformation:
\$ref: \'#/components/schemas/OnboardingInformation\'
notificationDestination:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
apiList:
\$ref: \'#/components/schemas/APIList\'
apiInvokerInformation:
type: string
description: >
Generic information related to the API invoker such as details of
the device or the application.
# A.6 CAPIF_Security_API
openapi: 3.0.0
info:
title: CAPIF_Security_API
description: \|
API for CAPIF security management.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/capif-security/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222.
paths:
/trustedInvokers/{apiInvokerId}:
get:
parameters:
\- name: apiInvokerId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
\- name: authenticationInfo
in: query
description: >
When set to \'true\', it indicates the CAPIF core function to send the
authentication information of the API invoker. Set to false or omitted
otherwise.
schema:
type: boolean
\- name: authorizationInfo
in: query
description: >
When set to \'true\', it indicates the CAPIF core function to send the
authorization information of the API invoker. Set to false or omitted
otherwise.
schema:
type: boolean
responses:
\'200\':
description: >
The security related information of the API Invoker based on the request
from the API exposing function.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceSecurity\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
put:
parameters:
\- name: apiInvokerId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
requestBody:
description: create a security context for an API invoker
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceSecurity\'
callbacks:
notificationDestination:
\'{request.body#/notificationDestination}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SecurityNotification\'
responses:
\'204\':
description: No Content (successful notification)
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: Successful created.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceSecurity\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/capif-security/v1/trustedInvokers/{apiInvokerId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
delete:
parameters:
\- name: apiInvokerId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
responses:
\'204\':
description: No Content (Successful deletion of the existing subscription)
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/trustedInvokers/{apiInvokerId}/update:
post:
parameters:
\- name: apiInvokerId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
requestBody:
description: Update the security context (e.g. re-negotiate the security
methods).
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceSecurity\'
responses:
\'200\':
description: Successful updated.
content:
application/json:
schema:
\$ref: \'#/components/schemas/ServiceSecurity\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/trustedInvokers/{apiInvokerId}/delete:
post:
parameters:
\- name: apiInvokerId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
requestBody:
description: Revoke the authorization of the API invoker for APIs.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SecurityNotification\'
responses:
\'204\':
description: Successful revoked.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/securities/{securityId}/token:
post:
parameters:
\- name: securityId
in: path
description: Identifier of an individual API invoker
required: true
schema:
type: string
requestBody:
required: true
content:
application/x-www-form-urlencoded:
schema:
\$ref: \'#/components/schemas/AccessTokenReq\'
responses:
\'200\':
description: Successful Access Token Request
content:
application/json:
schema:
\$ref: \'#/components/schemas/AccessTokenRsp\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
description: Error in the Access Token Request
content:
application/json:
schema:
\$ref: \'#/components/schemas/AccessTokenErr\'
\'401\':
description: Unauthorized
content:
application/json:
schema:
\$ref: \'#/components/schemas/AccessTokenErr\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
schemas:
ServiceSecurity:
type: object
description: >
Represents the details of the security method for each service API interface.
When included by the API invoker, it indicates the preferred method of
security.
When included by the CAPIF core function, it indicates the security method to
be
used for the service API interface.
properties:
securityInfo:
type: array
items:
\$ref: \'#/components/schemas/SecurityInformation\'
minimum: 1
notificationDestination:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
requestTestNotification:
type: boolean
description: >
Set to true by API invoker to request the CAPIF core function to send a
test notification as defined in in clause 7.6. Set to false or omitted
otherwise.
websockNotifConfig:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/WebsockNotifConfig\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- securityInfo
\- notificationDestination
SecurityInformation:
type: object
description: Represents the interface details and the security method.
properties:
interfaceDetails:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/InterfaceDescription\'
aefId:
type: string
description: Identifier of the API exposing function
apiId:
type: string
description: API identifier
prefSecurityMethods:
type: array
items:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/SecurityMethod\'
minItems: 1
description: Security methods preferred by the API invoker for the API
interface.
selSecurityMethod:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/SecurityMethod\'
authenticationInfo:
type: string
description: Authentication related information
authorizationInfo:
type: string
description: Authorization related information
required:
\- prefSecurityMethods
oneOf:
\- required: [interfaceDetails]
\- required: [aefId]
SecurityNotification:
type: object
description: Represents revoked authorization notification details.
properties:
apiInvokerId:
type: string
description: String identifying the API invoker assigned by the CAPIF core
function.
aefId:
type: string
description: String identifying the AEF.
apiIds:
type: array
items:
type: string
minItems: 1
description: Identifier of the service API
cause:
\$ref: \'#/components/schemas/Cause\'
required:
\- apiInvokerId
\- apiIds
\- cause
AccessTokenReq:
format: x-www-form-urlencoded
description: Represents the access token request information.
properties:
grant_type:
type: string
enum:
\- client_credentials
client_id:
type: string
client_secret:
type: string
scope:
type: string
required:
\- grant_type
\- client_id
AccessTokenRsp:
type: object
description: Represents the access token response information.
properties:
access_token:
type: string
description: >
JWS Compact Serialized representation of JWS signed JSON object
(AccessTokenClaims)
token_type:
type: string
enum:
\- Bearer
expires_in:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DurationSec\'
scope:
type: string
required:
\- access_token
\- token_type
\- expires_in
AccessTokenClaims:
type: object
description: Represents the claims data structure for the access token.
properties:
iss:
type: string
scope:
type: string
exp:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DurationSec\'
required:
\- iss
\- scope
\- exp
AccessTokenErr:
type: object
description: Represents an error in the access token request.
properties:
error:
type: string
enum:
\- invalid_request
\- invalid_client
\- invalid_grant
\- unauthorized_client
\- unsupported_grant_type
\- invalid_scope
error_description:
type: string
error_uri:
type: string
required:
\- error
Cause:
anyOf:
\- type: string
enum:
\- OVERLIMIT_USAGE
\- UNEXPECTED_REASON
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are:
\- OVERLIMIT_USAGE: The revocation of the authorization of the API invoker is
due to the overlimit usage of the service API
\- UNEXPECTED_REASON: The revocation of the authorization of the API invoker
is due to unexpected reason.
# A.7 CAPIF_Access_Control_Policy_API
openapi: 3.0.0
info:
title: CAPIF_Access_Control_Policy_API
description: \|
API for access control policy.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/access-control-policy/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/accessControlPolicyList/{serviceApiId}:
get:
description: Retrieves the access control policy list.
parameters:
\- name: serviceApiId
in: path
description: Identifier of a published service API
required: true
schema:
type: string
\- name: aef-id
in: query
required: true
description: Identifier of the AEF
schema:
type: string
\- name: api-invoker-id
in: query
description: Identifier of the API invoker
schema:
type: string
\- name: supported-features
in: query
description: To filter irrelevant responses related to unsupported features
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: OK.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AccessControlPolicyList\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
AccessControlPolicyList:
type: object
description: Represents the access control policy list for a published service
API.
properties:
apiInvokerPolicies:
type: array
items:
\$ref: \'#/components/schemas/ApiInvokerPolicy\'
minItems: 0
description: Policy of each API invoker.
ApiInvokerPolicy:
type: object
description: Represents the policy of an API Invoker.
properties:
apiInvokerId:
type: string
description: API invoker ID assigned by the CAPIF core function
allowedTotalInvocations:
type: integer
description: Total number of invocations allowed on the service API by the API
invoker.
allowedInvocationsPerSecond:
type: integer
description: Invocations per second allowed on the service API by the API
invoker.
allowedInvocationTimeRangeList:
type: array
items:
\$ref: \'#/components/schemas/TimeRangeList\'
minItems: 0
description: >
The time ranges during which the invocations are allowed on the service API
by the API invoker.
required:
\- apiInvokerId
TimeRangeList:
type: object
description: >
Represents the time range during which the invocation of a service API is
allowed
by the API invoker.
properties:
startTime:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
stopTime:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
# A.8 CAPIF_Logging_API_Invocation_API
openapi: 3.0.0
info:
title: CAPIF_Logging_API_Invocation_API
description: \|
API for invocation logs.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.1\"
externalDocs:
description: 3GPP TS 29.222 V17.6.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/api-invocation-logs/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/{aefId}/logs:
post:
description: Creates a new log entry for service API invocations.
parameters:
\- name: aefId
in: path
description: Identifier of the API exposing function
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/InvocationLog\'
responses:
\'201\':
description: >
Log of service API invocations provided by API exposing function successfully
stored on the CAPIF core function.
content:
application/json:
schema:
\$ref: \'#/components/schemas/InvocationLog\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/api-invocation-logs/v1/{aefId}/logs/{logId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/{aefId}/logs/{logId}:
description: Creates a new log entry for service API invocations.
parameters:
\- name: aefId
in: path
description: Identifier of the API exposing function
required: true
schema:
type: string
\- name: logId
in: path
description: Identifier of individual log entry
required: true
schema:
type: string
components:
schemas:
InvocationLog:
type: object
description: >
Represents a set of Service API invocation logs to be stored in a CAPIF core
function.
properties:
aefId:
type: string
description: >
Identity information of the API exposing function requesting logging of
service API invocations
apiInvokerId:
type: string
description: Identity of the API invoker which invoked the service API
logs:
type: array
items:
\$ref: \'#/components/schemas/Log\'
minItems: 1
description: Service API invocation log
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- aefId
\- apiInvokerId
\- logs
Log:
type: object
description: Represents an individual service API invocation log entry.
properties:
apiId:
type: string
description: String identifying the API invoked.
apiName:
type: string
description: >
Name of the API which was invoked, it is set as {apiName} part of the URI
structure as defined in clause 5.2.4 of 3GPP TS 29.122.
apiVersion:
type: string
description: Version of the API which was invoked
resourceName:
type: string
description: Name of the specific resource invoked
uri:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Uri\'
protocol:
\$ref: \'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/Protocol\'
operation:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/Operation\'
result:
type: string
description: For HTTP protocol, it contains HTTP status code of the invocation
invocationTime:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
invocationLatency:
\$ref: \'#/components/schemas/DurationMs\'
inputParameters:
description: >
List of input parameters. Can be any value - string, number, boolean, array or
object.
outputParameters:
description: >
List of output parameters. Can be any value - string, number, boolean, array
or object.
srcInterface:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/InterfaceDescription\'
destInterface:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/InterfaceDescription\'
fwdInterface:
type: string
description: >
It includes the node identifier (as defined in IETF RFC 7239 of all forwarding
entities between the API invoker and the AEF, concatenated with comma and
space,
e.g. 192.0.2.43:80, unknown:_OBFport, 203.0.113.60
required:
\- apiId
\- apiName
\- apiVersion
\- resourceName
\- protocol
\- result
DurationMs:
type: integer
description: Unsigned integer identifying a period of time in units of
milliseconds.
minimum: 0
# A.9 CAPIF_Auditing_API
openapi: 3.0.0
info:
title: CAPIF_Auditing_API
description: \|
API for auditing.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.1\"
externalDocs:
description: 3GPP TS 29.222 V17.6.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/logs/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222.
paths:
/apiInvocationLogs:
get:
description: Query and retrieve service API invocation logs stored on the
CAPIF core function.
parameters:
\- name: aef-id
in: query
description: String identifying the API exposing function.
schema:
type: string
\- name: api-invoker-id
in: query
description: String identifying the API invoker which invoked the service API.
schema:
type: string
\- name: time-range-start
in: query
description: Start time of the invocation time range.
schema:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
\- name: time-range-end
in: query
description: End time of the invocation time range.
schema:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/DateTime\'
\- name: api-id
in: query
description: String identifying the API invoked.
schema:
type: string
\- name: api-name
in: query
description: >
API name, it is set as {apiName} part of the URI structure as defined in
clause 5.2.4 of 3GPP TS 29.122.
schema:
type: string
\- name: api-version
in: query
description: Version of the API which was invoked.
schema:
type: string
\- name: protocol
in: query
description: Protocol invoked.
schema:
\$ref: \'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/Protocol\'
\- name: operation
in: query
description: Operation that was invoked on the API.
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/Operation\'
\- name: result
in: query
description: Result or output of the invocation.
schema:
type: string
\- name: resource-name
in: query
description: Name of the specific resource invoked.
schema:
type: string
\- name: src-interface
in: query
description: Interface description of the API invoker.
content:
application/json:
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/InterfaceDescription\'
\- name: dest-interface
in: query
description: Interface description of the API invoked.
content:
application/json:
schema:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/InterfaceDescription\'
\- name: supported-features
in: query
description: To filter irrelevant responses related to unsupported features
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: >
Result of the query operation along with fetched service API invocation log
data.
content:
application/json:
schema:
\$ref:
\'TS29222_CAPIF_Logging_API_Invocation_API.yaml#/components/schemas/InvocationLog\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
# A.10 AEF_Security_API
openapi: 3.0.0
info:
title: AEF_Security_API
description: \|
API for AEF security management.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.2.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/aef-security/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222.
paths:
/check-authentication:
post:
summary: Check authentication.
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/CheckAuthenticationReq\'
responses:
\'200\':
description: The request was successful.
content:
application/json:
schema:
\$ref: \'#/components/schemas/CheckAuthenticationRsp\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/revoke-authorization:
post:
summary: Revoke authorization.
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/RevokeAuthorizationReq\'
responses:
\'200\':
description: The request was successful.
content:
application/json:
schema:
\$ref: \'#/components/schemas/RevokeAuthorizationRsp\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
CheckAuthenticationReq:
type: object
description: Represents authentication check request data.
properties:
apiInvokerId:
type: string
description: >
API invoker ID assigned by the CAPIF core function to the API invoker
while on-boarding the API invoker.
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- apiInvokerId
\- supportedFeatures
CheckAuthenticationRsp:
type: object
description: Represents authentication check response data.
properties:
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- supportedFeatures
RevokeAuthorizationReq:
type: object
description: Represents authorization revocation request data.
properties:
revokeInfo:
\$ref:
\'TS29222_CAPIF_Security_API.yaml#/components/schemas/SecurityNotification\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- revokeInfo
\- supportedFeatures
RevokeAuthorizationRsp:
type: object
description: Represents authorization revocation response data.
properties:
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- supportedFeatures
# A.11 CAPIF_API_Provider_Management_API
openapi: 3.0.0
info:
title: CAPIF_API_Provider_Management_API
description: \|
API for API provider domain functions management.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.1.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/api-provider-management/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/registrations:
post:
description: Registers a new API Provider domain with API provider domain
functions profiles.
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetails\'
responses:
\'201\':
description: API provider domain registered successfully
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetails\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/api-provider-management/v1/registrations/{registrationId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/registrations/{registrationId}:
delete:
description: Deregisters API provider domain by deleting API provider domain
and functions.
parameters:
\- name: registrationId
in: path
description: String identifying an registered API provider domain resource.
required: true
schema:
type: string
responses:
\'204\':
description: The API provider domain matching registrationId is deleted.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
put:
description: Updates an API provider domain\'s registration details.
parameters:
\- name: registrationId
in: path
description: String identifying an registered API provider domain resource.
required: true
schema:
type: string
requestBody:
description: >
Representation of the API provider domain registration details to be updated
in CAPIF core function.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetails\'
responses:
\'200\':
description: API provider domain registration details updated successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetails\'
\'204\':
description: No Content
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
patch:
description: Modify an individual API provider details.
operationId: ModifyIndApiProviderEnrolment
tags:
\- Individual API Provider enrolment details
parameters:
\- name: registrationId
in: path
required: true
schema:
type: string
requestBody:
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetailsPatch\'
responses:
\'200\':
description: >
The definition of the service API is modified successfully and a
representation of the updated service API is returned in the request body.
content:
application/json:
schema:
\$ref: \'#/components/schemas/APIProviderEnrolmentDetails\'
\'204\':
description: No Content. The definition of the service API is modified
successfully.
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
APIProviderEnrolmentDetails:
type: object
description: Represents an API provider domain\'s enrolment details.
properties:
apiProvDomId:
type: string
description: >
API provider domain ID assigned by the CAPIF core function to the API
management
function while registering the API provider domain. Shall not be present in
the
HTTP POST request from the API Management function to the CAPIF core function,
to on-board itself. Shall be present in all other HTTP requests and responses.
readOnly: true
regSec:
type: string
description: >
Security information necessary for the CAPIF core function to validate the
registration of the API provider domain. Shall be present in HTTP POST request
from API management function to CAPIF core function for API provider domain
registration.
apiProvFuncs:
type: array
items:
\$ref: \'#/components/schemas/APIProviderFunctionDetails\'
minItems: 1
description: >
A list of individual API provider domain functions details. When included by
the API management function in the HTTP request message, it lists the API
provider domain functions that the API management function intends to
register/update in registration or update registration procedure. When
included by the CAPIF core function in the HTTP response message, it lists
the API domain functions details that are registered or updated successfully.
apiProvDomInfo:
type: string
description: >
Generic information related to the API provider domain such as details
of the API provider applications.
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
failReason:
type: string
description: >
Registration or update specific failure information of failed API provider
domain function registrations.Shall be present in the HTTP response
body if atleast one of the API provider domain function registration or update
registration fails.
required:
\- regSec
APIProviderFunctionDetails:
type: object
description: Represents API provider domain function\'s details.
properties:
apiProvFuncId:
type: string
description: >
API provider domain functionID assigned by the CAPIF core function to the
API provider domain function while registering/updating the API provider
domain.
Shall not be present in the HTTP POST request from the API management function
to
the CAPIF core function, to register itself. Shall be present in all other
HTTP
requests and responses.
regInfo:
\$ref: \'#/components/schemas/RegistrationInformation\'
apiProvFuncRole:
\$ref: \'#/components/schemas/ApiProviderFuncRole\'
apiProvFuncInfo:
type: string
description: >
Generic information related to the API provider domain function such as
details
of the API provider applications.
required:
\- regInfo
\- apiProvFuncRole
RegistrationInformation:
type: object
description: >
Represents registration information of an individual API provider domain
function.
properties:
apiProvPubKey:
type: string
description: Public Key of API Provider domain function.
apiProvCert:
type: string
description: API provider domain function\'s client certificate
required:
\- apiProvPubKey
ApiProviderFuncRole:
anyOf:
\- type: string
enum:
\- AEF
\- APF
\- AMF
\- type: string
description: >
This string provides forward-compatiblity with future extensions to the
enumeration
but is not used to encode content defined in the present version of this API.
description: \|
Possible values are:
\- AEF: API provider function is API Exposing Function.
\- APF: API provider function is API Publishing Function.
\- AMF: API Provider function is API Management Function.
APIProviderEnrolmentDetailsPatch:
type: object
description: Represents an API provider domain\'s enrolment details.
properties:
apiProvFuncs:
type: array
items:
\$ref: \'#/components/schemas/APIProviderFunctionDetails\'
minItems: 1
description: >
A list of individual API provider domain functions details. When included by
the API management function in the HTTP request message, it lists the API
provider domain functions that the API management function intends to
register/update in registration or update registration procedure.
apiProvDomInfo:
type: string
description: >
Generic information related to the API provider domain such as details
of the API provider applications.
# A.12 CAPIF_Routing_Info_API
openapi: 3.0.0
info:
title: CAPIF_Routing_Info_API
description: \|
API for Routing information.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
version: \"1.1.0\"
externalDocs:
description: 3GPP TS 29.222 V17.5.0 Common API Framework for 3GPP Northbound
APIs
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.222/
servers:
\- url: \'{apiRoot}/capif-routing-info/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 7.5 of 3GPP TS 29.222
paths:
/service-apis/{serviceApiId}:
get:
description: Retrieves the API routing information.
parameters:
\- name: serviceApiId
in: path
description: Identifier of a published service API
required: true
schema:
type: string
\- name: aef-id
in: query
required: true
description: Identifier of the AEF
schema:
type: string
\- name: supp-feat
in: query
required: false
description: To filter irrelevant responses related to unsupported features
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: OK.
content:
application/json:
schema:
\$ref: \'#/components/schemas/RoutingInfo\'
\'307\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
schemas:
RoutingInfo:
type: object
description: Represents an API routing information.
properties:
routingRules:
type: array
items:
\$ref: \'#/components/schemas/RoutingRule\'
minItems: 1
required:
\- routingRules
RoutingRule:
type: object
description: Represents an API routing rule.
properties:
ipv4AddrRanges:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/Ipv4AddressRange\'
minItems: 1
ipv6AddrRanges:
type: array
items:
\$ref: \'#/components/schemas/Ipv6AddressRange\'
minItems: 1
aefProfile:
\$ref:
\'TS29222_CAPIF_Publish_Service_API.yaml#/components/schemas/AefProfile\'
required:
\- aefProfile
Ipv6AddressRange:
type: object
description: Represents IPv6 address range.
properties:
start:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv6Addr\'
end:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv6Addr\'
required:
\- start
\- end
#