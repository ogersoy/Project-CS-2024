# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Policy Control Event Exposure Service of the 5G System. It provides stage 3
protocol definitions, message flows and specifies the API for the Npcf Event
Exposure service.
The 5G System stage 2 architecture and the procedures are specified in 3GPP TS
23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
The 5G System stage 3 call flows are provided in 3GPP TS 29.513 [8].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [5] and
3GPP TS 29.501 [6].
The Policy Control Event Exposure Service is provided by the Policy Control
Function (PCF). This service exposes policy control events observed at the
PCF.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[5] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[6] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[7] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[8] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[9] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[10] 3GPP TS 29.507: \"5G System; Access and Mobility Policy Control Service;
Stage 3\".
[11] 3GPP TS 29.525: \"5G System; UE Policy Control Service; Stage 3\".
[12] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[13] 3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".
[14] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[15] 3GPP TS 29.508: \"5G System; Session Management Event Exposure Service;
Stage 3\".
[16] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[17] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[18] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[19] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[20] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[21] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[22] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[23] 3GPP TS 29.534: \"5G System; Access and Mobility Policy Authorization
Service; Stage 3\".
[24] 3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository service
for Policy Data, Application Data and Structured Data for Exposure; Stage 3\".
[25] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**example:** text used to clarify abstract rules by applying them literally.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
AMF Access and Mobility Management Function
API Application Programming Interface
ATSSS Access Traffic Steering, Switching and Splitting
DNN Data Network Name
ePDG evolved Packet Data Gateway
GEO Geosynchronous Orbit
GPSI Generic Public Subscription Identifier
HTTP Hypertext Transfer Protocol
LEO Low Earth Orbit
MA Multi-Access
MEO Medium Earth Orbit
NEF Network Exposure Function
NID Network Identifier
NF Network Function
NRF Network Repository Function
NWDAF Network Data Analytics Function
OAM Operation And Maintenance
PCF Policy Control Function
RFSP RAT Frequency Selection Priority
SAC Service Area Coverage
S-NSSAI Single Network Slice Selection Assistance Information
SMF Session Management Function
SNPN Stand-alone Non-Public Network
SUPI Subscription Permanent Identifier
UDM Unified Data Management
UDR Unified Data Repository
URSP UE Route Selection Policy
# 4 Npcf_EventExposure Service
## 4.1 Service Description
### 4.1.1 Overview
The Policy Event Exposure Service, as defined in 3GPP TS 23.502 [3] and 3GPP
TS 23.503 [4], is provided by the Policy Control Function (PCF).
This service:
\- allows NF service consumers to subscribe to, modify and unsubscribe from
policy control events; and
\- notifies NF service consumers with a corresponding subscription about
observed events on the PCF.
The types of observed events include:
\- PLMN identifier notification;
NOTE: Within the PLMN identifier notification event the PLMN Identifier or
SNPN Identifier where the UE is currently located is provided. The SNPN
Identifier consists of the PLMN Identifier and the NID.
\- Access type change;
\- Satellite backhaul category change;
\- Service area coverage change; and
\- Successful or unsuccessful outcome of the UE Policy Delivery.
The target of the event reporting may include a group of UE(s) or any UE (i.e.
all UEs). When an event occurs, to which the NF service consumer has
subscribed, the PCF reports the requested information to the NF service
consumer based on the event reporting information definition requested by the
NF service consumer (see 3GPP TS 23.502 [3], clause 4.15.1).
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging related 5G architecture and signalling flows are also described in
3GPP TS 29.513 [8].
The Policy Event Exposure Service (Npcf_EventExposure) is part of the Npcf
service-based interface exhibited by the Policy Control Function (PCF).
The only known NF service consumer of the Npcf_EventExposure service is the
Network Exposure Function (NEF).
The Npcf_EventExposure service is provided by the PCF and consumed by NF
service consumers (e.g. NEF), as shown in figure 4.1.2-1 for the SBI
representation model and in figure 4.1.2-2 for reference point representation
model.
Figure 4.1.2-1: Npcf_EventExposure service Architecture, SBI representation
Figure 4.1.2-2: Npcf_EventExposure service Architecture, reference point
representation
NOTE: The NWDAF and the DCCF can be consumers of the Npcf_EventExposure
service to perform data collection. However, there is no data collected from
the PCF by the NWDAF or the DCCF defined in this release of the specification.
### 4.1.3 Network Functions
#### 4.1.3.1 Policy Control Function (PCF)
The PCF (Policy Control Function) is a functional element that encompasses
policy control decision and flow based charging control functionalities as
defined in 3GPP TS 29.512 [9], access and mobility policy decisions for the
control of the UE Service Area Restrictions and RAT/RFSP control as defined in
3GPP TS 29.507 [10] and UE Policy decisions for the control of Access network
discovery and selection policy and UE Route Selection Policy (URSP) as defined
in 3GPP TS 29.525 [11].
The policy control decision and flow based charging control functionalities
enable the PCF to provide network control regarding the service data flow
detection, gating, QoS and flow based charging (except credit management)
towards the SMF/UPF. The PCF offers these capabilities to the NF service
consumers (e.g. the AF and NEF) as defined in 3GPP TS 29.514 [12] and 3GPP TS
29.214 [13].
The PCF also offers the access and mobility policy control to the NF service
consumers as defined in 3GPP TS 29.534 [23].
The Policy Event Exposure Service enables the PCF to report policy control
events observed in one or more PCF services to NF service consumers.
#### 4.1.3.2 NF Service Consumers
As indicated in clause 4.1.2 above, the only known NF service consumer of the
Npcf_EventExposure service is the Network Exposure Function (NEF).
The Network Exposure Function (NEF) is a functional element that supports the
following functionalities:
\- The NEF securely exposes network capabilities and events provided by 3GPP
NFs to AF.
\- The NEF provides a means for the AF to securely provide information to 3GPP
network and can authenticate, authorize and assist in throttling the AF.
\- The NEF translates the information received from the AF to the one sent to
internal 3GPP NFs, and vice versa.
\- The NEF supports exposing information (collected from other 3GPP NFs) to
the AF.
## 4.2 Service Operations
### 4.2.1 Introduction
Service operations defined for the Npcf_EventExposure Service are shown in
table 4.2.1-1.
_Table 4.2.1-1: Npcf_EventExposure Service Operations_
* * *
Service Operation Name Description Initiated by Npcf_EventExposure_Subscribe
This service operation is used by an NF service consumer to subscribe for
event notifications on a specified policy control event for a group of UE(s)
or any UE, or to modify a subscription. NF service consumer (e.g. NEF)
Npcf_EventExposure_Unsubscribe This service operation is used by an NF service
consumer to unsubscribe from event notifications. NF service consumer (e.g.
NEF) Npcf_EventExposure_Notify This service operation is used by the PCF to
report UE related policy control event(s) to the NF service consumer which has
subscribed to the event report service. PCF
* * *
### 4.2.2 Npcf_EventExposure_Subscribe service operation
#### 4.2.2.1 General
This service operation is used by an NF service consumer to explicitly
subscribe for policy events notifications on a specified context for a group
of UE(s) or any UE, or to modify an existing subscription.
The following are the types of events for which a subscription can be made:
\- PLMN identifier notification;
NOTE 1: Within the PLMN identifier notification event the PLMN Identifier or
SNPN Identifier where the UE is currently located is provided. The SNPN
Identifier consists of the PLMN Identifier and the NID.
\- change of Access Type;
\- when the feature \"AMPoliciesEvents\" is supported, change of Service Area
Coverage;
\- when the feature \"SatelliteBackhaul\" is supported, satellite backhaul
category change; and
\- when the feature \"DeliveryOutcome\" is supported, UE Policy delivery
outcome.
The following procedures using the Npcf_EventExposure_Subscribe service
operation are supported:
\- creating a new subscription;
\- modifying an existing subscription.
NOTE 2: It is also possible to implicitly subscribe for policy events
notifications for a single UE, for a group of UE(s) or any UE. Implicit
subscription information is obtained from the UDR for application data. In
this case, the PCF will use the callback URI provided by the AF to the UDR,
see 3GPP TS 29.519 [24] for the details.
#### 4.2.2.2 Creating a new subscription
Figure 4.2.2.2-1 illustrates the creation of a subscription.
Figure 4.2.2.2-1: Creation of a subscription
To subscribe to event notifications, the NF service consumer shall send an
HTTP POST request with: \"{apiRoot}/npcf-eventexposure/v1/subscriptions\" as
request URI as shown in figure 4.2.2.2-1, step 1, and the
\"PcEventExposureSubsc\" data structure as request body.
The \"PcEventExposureSubsc\" data structure shall include:
\- identification of the policy events to subscribe as \"eventSubs\"
attribute;
\- indication of the UEs to which the subscription applies via:
a) identification of a group of UE(s) via a \"groupId\" attribute; or
b) identification of any UE by omitting the \"groupId\" attribute;
\- a URI where to receive the requested notifications as \"notifUri\"
attribute; and
\- a Notification Correlation Identifier assigned by the NF service consumer
for the requested notifications as \"notifId\" attribute.
The \"PcEventExposureSubsc\" data structure may also include:
\- description of the event reporting information as \"eventsRepInfo\", which
may include:
a) event notification method (periodic, one time, on event detection) as
\"notifMethod\" attribute;
b) Maximum Number of Reports as \"maxReportNbr\" attribute;
c) Monitoring Duration as \"monDur\" attribute;
d) repetition period for periodic reporting as \"repPeriod\" attribute;
e) immediate reporting indication as \"immRep\" attribute;
f) sampling ratio as \"sampRatio\" attribute;
g) group reporting guard time as \"grpRepTime\" attribute;
h) partitioning criteria for partitioning the UEs before performing sampling
as \"partitionCriteria\" attribute if the EneNA feature is supported; and/or
i) a notification flag as \"notifFlag\" attribute if the EneNA feature is
supported;
\- if the supported feature \"ExtendedSessionInformation\" is supported, to
filter the AF sessions for which the policy event report shall occur, the
identification of the services one or more AF sessions may belong to as
\"filterServices\" attribute, which may include per service identification:
a) a list of ethernet flows in the \"servEthFlows\" attribute; or
b) a list of IP flows in the \"servIpFlows\" attribute; and/or
c) an AF application identifier in the \"afAppId\" attribute;
\- to filter the DNNs for which the policy event report shall occur, the
identification of the DNNs in the \"filterDnns\" attribute;
\- to filter the S-NSSAIs for which the policy event report shall occur, the
identification of the S-NSSAIs in the \"filterSnssais\" attribute; and
\- when the feature \"EneNA\" is supported, to filter the specific DNN and
S-NSSAI combination list for which the policy event report shall occur, the
identification of each combination within the \"snssaiDnn\" attribute.
If the PCF cannot successfully fulfil the received HTTP POST request due to an
internal PCF error or an error in the HTTP POST request, the PCF shall send an
HTTP error response as specified in clause 5.7.
Upon successful reception of the HTTP POST request with \"{apiRoot}/npcf-
eventexposure/v1/subscriptions\" as request URI and \"PcEventExposureSubsc\"
data structure as request body, the PCF shall create a new \"Individual Policy
Events Subscription\" resource, store the subscription and send a HTTP \"201
Created\" response as shown in figure 4.2.2.2-1, step 2. The PCF shall include
in the \"201 Created\" response:
\- a Location header field; and
\- an \"PcEventExposureSubsc\" data type in the payload body.
The Location header field shall contain the URI of the created individual
application session context resource i.e. \"{apiRoot}/npcf-
eventexposure/v1/subscriptions/{subscriptionId}\".
The \"PcEventExposureSubsc\" data type payload body shall contain the
representation of the created \"Individual Policy Events Subscription\".
When the \"monDur\" attribute is included in the response, it represents a
server selected expiry time that is equal or less than a possible expiry time
in the request.
When the \"immRep\" attribute set to true is included in the subscription and
the subscribed policy control events are available:
\- if the feature \"ERIR\" is not supported, the PCF shall immediately notify
the NF service consumer with the current available value(s) for the subscribed
event(s) using the Npcf_EventExposure_Notify service operation, as described
in clause 4.2.4.2.
\- if the feature \"ERIR\" is supported, the PCF shall immediately notify the
NF service consumer with the current available value(s) for the subscribed
event(s) within the HTTP \"201 Created\" response as shown in figure
4.2.2.2-1, step 2. The \"PcEventExposureSubsc\" data type shall include the
corresponding event(s) notification within the \"eventNotifs\" attribute, as
described in clause 4.2.4.2.
When the sampling ratio as the \"sampRatio\" attribute is included in the
subscription without a \"partitionCriteria\" attribute, the PCF shall select a
random subset of UEs among the target UEs according to the sampling ratio and
only report the event(s) related to the selected subset of UEs. If the
\"partitionCriteria\" attribute is additionally included, then the PCF shall
first partition the UEs according to the value of the \"partitionCriteria\"
attribute and then select a random subset of UEs from each partition according
to the sampling ratio and only report the event(s) related to the selected
subsets of UEs.
When the group reporting guard time as the \"grpRepTime\" attribute is
included in the subscription, the PCF shall accumulate all the event reports
for the target UEs until the group reporting guard time expires. Then the PCF
shall notify the NF service consumer using the Npcf_EventExposure_Notify
service operation, as described in clause 4.2.4.2.
When the \"notifFlag\" attribute is included and set to \"DEACTIVATE\" in the
request, the PCF shall mute the event notification and store the available
events.
#### 4.2.2.3 Modifying an existing subscription
Figure 4.2.2.3-1 illustrates the modification of an existing subscription.
Figure 4.2.2.3-1: Modification of an existing subscription
To modify an existing subscription to event notifications, the NF service
consumer shall send an HTTP PUT request with: \"{apiRoot}/npcf-
eventexposure/v1/subscriptions/{**subscriptionId**}\" as request URI, as shown
in figure 4.2.2.3-1, step 1, where \"{**subscriptionId**}\" is the
subscription correlation ID of the existing subscription. The
\"PcEventExposureSubsc\" data structure is included as request body as
described in clause 4.2.2.2.
NOTE 1: An alternate NF service consumer than the one that requested the
generation of the subscription resource can send the PUT.
NOTE 2: The \"notifUri\" attribute within the PcEventExposureSubsc data
structure can be modified to request that subsequent notifications are sent to
a new NF service consumer.
If the PCF cannot successfully fulfil the received HTTP PUT request due to an
internal PCF error or an error in the HTTP PUT request, the PCF shall send an
HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP PUT request needs to be redirected, the PCF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].
Upon successful reception of an HTTP PUT request with: \"{apiRoot}/npcf-
eventexposure/v1/subscriptions/{**subscriptionId**}\" as request URI and
\"PcEventExposureSubsc\" data structure as request body, the PCF shall store
the subscription and send an HTTP \"200 OK\" response with the
\"PcEventExposureSubsc\" data structure as response body or an HTTP \"204 No
Content\" response, as shown in figure 4.2.2.3-1, step 2.
The \"PcEventExposureSubsc\" data structure payload body shall contain the
representation of the modified \"Individual Policy Events Subscription\".
When the \"monDur\" attribute is included in the response, it represents a NF
service producer selected expiry time that is equal or less than a possible
expiry time received in the request.
When the \"immRep\" attribute set to true is included in the updated
subscription and the subscribed policy control events are available:
\- if the feature \"ERIR\" is not supported, the PCF shall immediately notify
the NF service consumer with the current available value(s) for the subscribed
event(s) using the Npcf_EventExposure_Notify service operation, as described
in clause 4.2.4.2.
\- if the feature \"ERIR\" is supported, the PCF shall immediately notify the
NF service consumer with the current available value(s) for the subscribed
event(s) within the HTTP \"200 OK\" response as shown in figure 4.2.2.3-1,
step 2a. The \"PcEventExposureSubsc\" data type shall include the
corresponding event(s) notification within the \"eventNotifs\" attribute, as
described in clause 4.2.4.2.
When the sampling ratio as the \"sampRatio\" attribute is included in the
subscription without a \"partitionCriteria\" attribute, the PCF shall select a
random subset of UEs among the target UEs according to the sampling ratio and
only report the event(s) related to the selected subset of UEs. If the
\"partitionCriteria\" attribute is additionally included, then the PCF shall
first partition the UEs according to the value of the \"partitionCriteria\"
attribute and then select a random subset of UEs from each partition according
to the sampling ratio and only report the event(s) related to the selected
subsets of UEs.
When the group reporting guard time as the \"grpRepTime\" attribute is
included in the subscription, the PCF shall accumulate all the event reports
for the target UEs until the group reporting guard time expires. Then the PCF
shall notify the NF service consumer using the Npcf_EventExposure_Notify
service operation, as described in clause 4.2.4.2.
When the \"notifFlag\" attribute is included, and set to \"DEACTIVATE\" in the
request, the PCF shall mute the event notification and store the available
events; if it is set to \"RETRIEVAL\" in the request, the PCF shall send the
stored events to the NF service consumer, mute the event notification again
and store available events.
### 4.2.3 Npcf_EventExposure_UnSubscribe service operation
#### 4.2.3.1 General
This service operation is used by an NF service consumer to unsubscribe from
event notifications.
The following procedure using the Npcf_EventExposure_UnSubscribe service
operation is supported:
\- unsubscription from event notifications.
#### 4.2.3.2 Unsubscription from event notifications
Figure 4.2.3.2-1 illustrates the unsubscription from event notifications.
Figure 4.2.3.2-1: Unsubscription from event notifications
To unsubscribe from event notifications, the NF service consumer shall send an
HTTP DELETE request with: \"{apiRoot}/npcf-
eventexposure/v1/subscriptions/{**subscriptionId**}\" as request URI, as shown
in figure 4.2.3.2-1, step 1, where \"{**subscriptionId**}\" is the
subscription correlation identifier of the existing resource subscription that
is to be deleted.
If the PCF cannot successfully fulfil the received HTTP DELETE request due to
an internal PCF error or an error in the HTTP DELETE request, the PCF shall
send the HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP DELETE request needs to be redirected, the PCF shall send an HTTP
redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].
Upon successful reception of the HTTP DELETE request with: \"{apiRoot}/npcf-
eventexposure/v1/subscriptions/{**subscriptionId**}\" as request URI, the PCF
shall remove the corresponding subscription and send an HTTP \"204 No
Content\" response as shown in figure 4.2.3.2-1, step 2.
### 4.2.4 Npcf_EventExposure_Notify service operation
#### 4.2.4.1 General
The Npcf_EventExposure_Notify service operation enables the PCF to notify the
NF service consumers that the previously (explicitly or implicitly) subscribed
policy control event occurred.
The following procedure using the Npcf_EventExposure_Notify service operation
is supported:
\- notification about subscribed events.
#### 4.2.4.2 Notification about subscribed events
Figure 4.2.4.2-1 illustrates the notification about subscribed events.
Figure 4.2.4.2-1: Notification about subscribed events
If the PCF observes policy control related event(s) for which an NF service
consumer has subscribed explicitly as defined in clause 4.2.2 or implicitly
when the subscription information is obtained from the UDR for application
data, the PCF shall send an HTTP POST request as shown in figure 4.2.4.2-1,
step 1, with the \"{notifUri}\" as request URI containing the value previously
provided by the NF service consumer within the corresponding subscription or
containing the callback URI provided by the AF to the UDR, and the
\"PcEventExposureNotif\" data structure.
The \"PcEventExposureNotif\" data structure shall include:
\- The notification correlation ID provided by the NF service consumer during
the subscription as \"notifId\" attribute or obtained from the UDR as
specified in 3GPP TS 29.519 [24]; and
\- information about the observed event(s) within the \"eventNotifs\"
attribute that shall contain for each observed event an
\"PcEventNotification\" data structure that shall include:
1\. the Policy Control event as \"event\" attribute;
2\. for an access type change:
a) new access type as \"accType\" attribute;
b) the new RAT type as \"ratType\" attribute, if applicable for the notified
access type; and
c) if the \"ATSSS\" feature is supported:
i. if it is the first access type report for a PDU session, and both, 3GPP and
non-3GPP access information is available, the \"addAccessInfo\" attribute. The
\"addAccessInfo\" attribute contains the additional access type information,
where the access type is encoded in the \"accessType\" attribute, and the RAT
type is encoded in the \"ratType\" attribute when applicable for the notified
access type;
ii. if it is a subsequent access type change report:
\- if a new access type is added to the MA PDU session, the \"addAccessInfo\"
attribute with the added access type encoded in the \"accessType\" attribute,
and the RAT type encoded in the \"ratType\" attribute when applicable for the
notified access type;
\- if an access type is released in the MA PDU session, the \"relAccessInfo\"
attribute with the released access type encoded in the \"accessType\"
attribute, and the RAT type encoded in the \"ratType\" attribute when
applicable for the notified access type; and
NOTE 1: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF, the PCF includes the \"accessType\" attribute and the \"ratType\"
attribute with a currently active combination of access type and RAT type (if
applicable for the notified access type). When both 3GPP and non-3GPP accesses
are available, the PCF includes the information corresponding to the 3GPP
access.
d) for EPC interworking scenarios, the ePDG address as \"anGwAddr\" attribute,
if applicable for the notified access type;
3\. for a PLMN change:
a) new network identity containing the PLMN Identifier or the SNPN Identifier
in the \"plmnId\" attribute;
NOTE 2: The SNPN Identifier consists of the PLMN Identifier and the NID.
> 4\. when the feature \"AMPoliciesEvents\" is supported, for a service area
> coverage change, the new service area coverage in the \"appliedCov\"
> attribute, encoded as specified in 3GPP TS 29.534 [23], clause 4.2.7.4;
NOTE 3: The service area coverage change event is met and the notification is
triggered when the PCF determines the tracking areas where the service is
allowed in relation to the NF consumer requested service area coverage. The
actual service area coverage for the UE might be larger than the one reported
with the service area coverage change event.
5\. when the feature \"SatelliteBackhaul\" is supported, for a satellite
backhaul category change:
a) the satellite backhaul category (i.e., GEO, MEO, LEO, or other satellite)
or the indication of non-satellite backhaul category in the
\"satBackhaulCategory\" attribute;
6\. when the feature \"DeliveryOutcome\" is supported, to report the
unsuccessful outcome of the UE Policy Delivery related to the invocation of AF
provisioned service parameters, the reason of failure within the
\"delivFailure\" attribute;
7\. the identity of the affected UE in the \"supi\" attribute and, if
available, in the \"gpsi\" attribute;
8\. the time at which the event was observed encoded as \"timeStamp\"
attribute;
9\. if available, and if the feature \"ExtendedSessionInformation\" is
supported, information about the PDU session involved in the reported event in
the \"pduSessInfo\" attribute, that shall include:
a) the S-NSSAI of the PDU session in the \"snssai\" attribute;
b) the DNN of the PDU session in the \"dnn\" attribute; and
c) the IPv4 address in the \"ueIpv4\" attribute and/or the IPv6 prefix in the
\"ueIpv6\" attribute, or the Ethernet MAC address in the \"ueMac\" attribute;
and
> if the IPv4 address is included in the \"ueIpv4\" attribute, may include the
> IP domain in the \"ipDomain\" attribute;
10\. if available, and if the feature \"ExtendedSessionInformation\" is
supported, information about the services involved in the reported event in
the indicated PDU session in the \"repServices\" attribute, which may include
per identified service:
a) a list of Ethernet flows in the \"servEthFlows\" attribute which contains
an impacted Ethernet flow number within the \"flowNumber\" attribute in each
EthernetFlowInfo data structure; or
b) a list of IP flows in the \"servIpFlows\" attribute which contains an
impacted IP flow number within the \"flowNumber\" attribute in each IpFlowInfo
data structure; and/or
c) an AF application identifier in the \"afAppId\" attribute.
If the NF service consumer cannot successfully fulfil the received HTTP POST
request due to an internal error or an error in the HTTP POST request, the NF
service consumer shall send an HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the NF service consumer determines
the received HTTP POST request needs to be redirected, the NF service consumer
shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS
29.500 [5].
Upon successful reception of the HTTP POST request with \"{notifUri}\" as
request URI and a \"PcEventExposureNotif\" data structure as request body, the
NF service consumer shall send a \"204 No Content\" HTTP response, as shown in
figure 4.2.4.2-1, step 2, for a successful processing.
# 5 Npcf_EventExposure Service API
## 5.1 Introduction
The Npcf_EventExposure Service shall use the Npcf_EventExposure API.
The API URI of the Npcf_EventExposure API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the PCF shall have the Resource URI structure defined in clause 4.4.1 of 3GPP
TS 29.501 [6], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [6].
\- The \ shall be \"npcf-eventexposure\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [16], shall be used as specified in clause 5.2 of 3GPP
TS 29.500 [5].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [5].
The OpenAPI [7] specification of HTTP messages and content bodies for the
Npcf_EventExposure is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [17], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [5]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [18].
### 5.2.3 HTTP custom headers
#### 5.2.3.1 General
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [5] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [5] may be supported.
In this Release of the specification, no specific custom headers are defined
for the Npcf_EventExposure API.
## 5.3 Resources
### 5.3.1 Resource Structure
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 5.3.1-1 depicts the resource URIs structure for the Npcf_EventExposure
API.
Figure 5.3.1-1: Resource URI structure of the Npcf_EventExposure API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description Policy
Control Events Subscriptions /subscriptions POST Subscription to the
notification of policy control events and creation of an Individual Policy
Control Events Subscription resource. Individual Policy Control Events
Subscription /subscriptions/{subscriptionId} GET Reads an Individual Policy
Control Events Subscription resource. PUT Modifies an Individual Policy
Control Events Subscription. DELETE Cancels an individual subscription to
notifications of policy control events.
* * *
### 5.3.2 Resource: Policy Control Events Subscriptions (Collection)
#### 5.3.2.1 Description
The Policy Control Events Subscriptions resource represents all subscriptions
of the Npcf_EventExposure service at a given PCF.
#### 5.3.2.2 Resource definition
Resource URI: **{apiRoot}/npcf-eventexposure/v1/subscriptions**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description PcEventExposureSubsc M 1 Contains the
information required for the creation of a new individual policy control
events subscription.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
* * *
Data type P Cardinality Response codes Description PcEventExposureSubsc M 1
201 Created Contains the representation of the Individual Policy Control
Events Subscription resource. NOTE: The mandatory HTTP error status codes for
the POST method listed in table 5.2.7.1-1 of 3GPP TS 29.500 [5] also apply.
* * *
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/npcf-
eventexposure/v1/subscriptions/{subscriptionId}
* * *
#### 5.3.2.4 Resource Custom Operations
None.
### 5.3.3 Resource: Individual Policy Control Events Subscription (Document)
#### 5.3.3.1 Description
The Individual Policy Control Events Subscription resource represents a single
subscription of the Npcf_EventExposure service at a given PCF.
#### 5.3.3.2 Resource definition
Resource URI: **{apiRoot}/npcf-
eventexposure/v1/subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1 subscriptionId string
Identifies a subscription to the PCF event exposure service.
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PcEvent | M | 1 | 200 OK | A | | ExposureSubsc | | | | r | | | | | | epresentation | | | | | | of the | | | | | | Individual | | | | | | Policy | | | | | | Control | | | | | | Events | | | | | | Subscription | | | | | | is returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.3.3.3.2 PUT
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description PcEventExposureSubsc M 1 Modifies the
existing Individual Policy Control Events Subscription resource.
* * *
Table 5.3.3.3.2-3: Data structures supported by the PUT Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PcEvent | M | 1 | 200 OK | Successful | | ExposureSubsc | | | | case: The | | | | | | Individual | | | | | | Policy | | | | | | Control | | | | | | Events | | | | | | Subscription | | | | | | was modified | | | | | | and a | | | | | | r | | | | | | epresentation | | | | | | is returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | Policy | | | | | | Control | | | | | | Events | | | | | | Subscription | | | | | | was modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
##### 5.3.3.3.3 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.3-1.
Table 5.3.3.3.3-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.3-2 and the response data structures and response codes specified in
table 5.3.3.3.3-3.
Table 5.3.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | Policy | | | | | | Control | | | | | | Events | | | | | | Subscription | | | | | | resource | | | | | | matching the | | | | | | s | | | | | | ubscriptionId | | | | | | was deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.3-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.3-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
#### 5.3.3.4 Resource Custom Operations
None.
## 5.4 Custom Operations without associated resources
None.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply with clause 6.2 of 3GPP TS 29.500 [5] and clause
4.6.2.3 of 3GPP TS 29.501 [6].
Table 5.5.1-1: Notifications overview
* * *
Notification Callback URI HTTP method **or custom operation** Description
**(service operation)** Policy Control Event Notification {notifUri} POST
Notification of policy control event reporting.
* * *
### 5.5.2 Policy Control Event Notification
#### 5.5.2.1 Description
The Policy Control Event Notification is used by the PCF to report one or
several observed policy control events to the NF service consumer that has
subscribed to such notifications.
NOTE 1: The \"callback\" clause of the OpenAPI specification found in Annex
A.2 associated to the POST method of the \"Policy Control Events
Subscriptions\" resource is used as the notification request for both explicit
and implicit subscriptions.
NOTE 2: For implicit subscriptions, the NEF can have previously stored in the
UDR the notification URI to be used in the notifications initiated by the PCF.
See 3GPP TS 29.519 [24] for the details.
#### 5.5.2.2 Target URI
The Callback URI **\"{notifUri}\"** shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri The Notification Uri as assigned by the
NF service consumer either during the explicit subscription service operation
and described within the PcEventExposureSubsc data type (see table 5.6.2.2-1)
or during the implicit subscription via the provisioning of the corresponding
application data in UDR (see 3GPP TS 29.519 [24]. (NOTE). NOTE: When obtained
from the UDR, it corresponds to the notification URI previously stored by the
NEF.
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description PcEventExposureNotif M 1 Provides
Information about observed policy control events
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance ID towards
which the notification request is redirected.
* * *
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance ID towards
which the notification request is redirected.
* * *
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Npcf_EventExposure
service based interface protocol.
Table 5.6.1-1: Npcf_EventExposure specific Data Types
* * *
Data type Section defined Description Applicability EthernetFlowInfo 5.6.2.6
Identification of an UL/DL ethernet flow. ExtendedSessionInformation
IpFlowInfo 5.6.2.7 Identification of an UL/DL IP flow.
ExtendedSessionInformation PcEvent 5.6.3.3 Policy Control Events.  
PcEventExposureNotif 5.6.2.3 Describes notifications about Policy Control
events that occurred in an Individual Policy Events Subscription resource.  
PcEventExposureSubsc 5.6.2.2 Represents an Individual Policy Events
Subscription resource.  
PcEventNotification 5.6.2.8 Represents the information reported for a Policy
Control event.  
PduSessionInformation 5.6.2.9 Represents PDU session identification
information. ExtendedSessionInformation ReportingInformation 5.6.2.4
Represents the type of reporting the subscription requires.  
ServiceIdentification 5.6.2.5 Identification of the service to which the
subscription applies. ExtendedSessionInformation SnssaiDnnCombination 5.6.2.10
Represents a combination of S-NSSAI and DNN(s). EneNA
* * *
Table 5.6.1-2 specifies data types re-used by the Npcf_EventExposure service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Npcf_EventExposure service based interface.
Table 5.6.1-2: Npcf_EventExposure re-used Data Types
+----------------+----------------+----------------+----------------+ | Data type | Reference | Comments | Applicability | +----------------+----------------+----------------+----------------+ | AccessType | 3GPP TS | Access Type. | | | | 29.571 [14] | | | +----------------+----------------+----------------+----------------+ | Additi | 3GPP T | Indicates the | ATSSS | | onalAccessInfo | S 29.512 [9] | combination of | | | | | additional | | | | | Access Type | | | | | and RAT Type | | | | | for MA PDU | | | | | session. | | +----------------+----------------+----------------+----------------+ | AfAppId | 3GPP TS | AF application | ExtendedSess | | | 29.514 [12] | Identifier. | ionInformation | +----------------+----------------+----------------+----------------+ | AnGwAddress | 3GPP TS | Carries the | | | | 29.514 [12] | control plane | | | | | address of the | | | | | EPC untrusted | | | | | non-3GPP | | | | | access network | | | | | gateway. | | | | | (NOTE 1) | | +----------------+----------------+----------------+----------------+ | DateTime | 3GPP TS | Time stamp. | | | | 29.571 [14] | | | +----------------+----------------+----------------+----------------+ | Dnn | 3GPP TS | Identifies a | | | | 29.571 [14] | DNN. | | +----------------+----------------+----------------+----------------+ | DurationSec | 3GPP TS | Seconds of | | | | 29.571 [14] | duration. | | +----------------+----------------+----------------+----------------+ | EthF | 3GPP TS | Identifies an | ExtendedSess | | lowDescription | 29.514 [12] | ethernet flow | ionInformation | | | | description. | | | | | (NOTE 2) | | +----------------+----------------+----------------+----------------+ | Failure | 3GPP TS | Indicates the | D | | | 29.522 [25] | failure reason | eliveryOutcome | | | | for an | | | | | unsuccessful | | | | | outcome of the | | | | | UE Policy | | | | | Delivery. | | +----------------+----------------+----------------+----------------+ | F | 3GPP TS | Identifies an | ExtendedSess | | lowDescription | 29.514 [12] | IP flow | ionInformation | | | | description. | | +----------------+----------------+----------------+----------------+ | Gpsi | 3GPP TS | Generic Public | | | | 29.571 [14] | Subscription | | | | | Identifier. | | +----------------+----------------+----------------+----------------+ | GroupId | 3GPP TS | Identifies a | | | | 29.571 [14] | group of UEs. | | +----------------+----------------+----------------+----------------+ | MacAddr48 | 3GPP TS | Mac Address of | ExtendedSess | | | 29.571 [14] | the UE. | ionInformation | +----------------+----------------+----------------+----------------+ | No | 3GPP TS | Notification | EneNA | | tificationFlag | 29.571 [14] | flag. | | +----------------+----------------+----------------+----------------+ | Noti | 3GPP TS | Represents the | | | ficationMethod | 29.508 [15] | Notification | | | | | Method. | | +----------------+----------------+----------------+----------------+ | Partit | 3GPP TS | Used to | EneNA | | ioningCriteria | 29.571 [14] | partition UEs | | | | | before | | | | | applying | | | | | sampling. | | +----------------+----------------+----------------+----------------+ | PlmnIdNid | 3GPP TS | Identifies the | | | | 29.571 [14] | network: the | | | | | PLMN | | | | | Identifier or | | | | | the SNPN | | | | | Identifier. | | | | | (NOTE 3) | | +----------------+----------------+----------------+----------------+ | RatType | 3GPP TS | RAT Type. | | | | 29.571 [14] | | | +----------------+----------------+----------------+----------------+ | Re | 3GPP TS | Contains | ES3XX | | directResponse | 29.571 [14] | redirection | | | | | related | | | | | information. | | +----------------+----------------+----------------+----------------+ | SamplingRatio | 3GPP TS | Sampling | | | | 29.571 [14] | Ratio. | | +----------------+----------------+----------------+----------------+ | SatelliteBa | 3GPP TS | Indicates the | Sat | | ckhaulCategory | 29.571 [14] | satellite or | elliteBackhaul | | | | non-satellite | | | | | backhaul | | | | | category. | | +----------------+----------------+----------------+----------------+ | ServiceAr | 3GPP TS | Service area | AM | | eaCoverageInfo | 29.534 [23] | coverage in | PoliciesEvents | | | | terms of | | | | | tracking area | | | | | codes and | | | | | serving | | | | | network. | | +----------------+----------------+----------------+----------------+ | Snssai | 3GPP TS | Identifies a | | | | 29.571 [14] | S-NSSAI. | | +----------------+----------------+----------------+----------------+ | Supi | 3GPP TS | Identifies the | | | | 29.571 [14] | SUPI of the | | | | | UE. | | +----------------+----------------+----------------+----------------+ | Sup | 3GPP TS | Used to | | | portedFeatures | 29.571 [14] | negotiate the | | | | | applicability | | | | | of the | | | | | optional | | | | | features | | | | | defined in | | | | | clause 5.8. | | +----------------+----------------+----------------+----------------+ | Uinteger | 3GPP TS | Unsigned | | | | 29.571 [14] | integer. | | +----------------+----------------+----------------+----------------+ | NOTE 1: | | | | | \ | | | | | "AnGwAddress\" | | | | | data structure | | | | | is only used | | | | | to encode the | | | | | ePDG address | | | | | and is only | | | | | applicable to | | | | | the 5GS and | | | | | EPC/E-UTRAN | | | | | interworking | | | | | scenario as | | | | | defined in | | | | | 3GPP TS | | | | | 29.512 [9], | | | | | Annex B. | | | | | | | | | | NOTE 2: In | | | | | order to | | | | | support a set | | | | | of MAC | | | | | addresses with | | | | | a specific | | | | | range in the | | | | | traffic | | | | | filter, | | | | | feature | | | | | M | | | | | acAddressRange | | | | | as specified | | | | | in clause 5.8 | | | | | shall be | | | | | supported. | | | | | | | | | | NOTE 3: The | | | | | SNPN | | | | | Identifier | | | | | consists of | | | | | the PLMN | | | | | Identifier and | | | | | the NID. | | | | +----------------+----------------+----------------+----------------+
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type PcEventExposureSubsc
Table 5.6.2.2-1: Definition of type PcEventExposureSubsc
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | eventSubs | array | M | 1..N | S | | | | (PcEvent) | | | ubscribed | | | | | | | Policy | | | | | | | Control | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+ | even | Re | O | 0..1 | R | | | tsRepInfo | portingIn | | | epresents | | | | formation | | | the | | | | | | | reporting | | | | | | | req | | | | | | | uirements | | | | | | | of the | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | groupId | GroupId | C | 0..1 | R | | | | | | | epresents | | | | | | | an | | | | | | | internal | | | | | | | group | | | | | | | i | | | | | | | dentifier | | | | | | | and | | | | | | | i | | | | | | | dentifies | | | | | | | a group | | | | | | | of UEs. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | sub | | | | | | | scription | | | | | | | is | | | | | | | targeting | | | | | | | a Group | | | | | | | of UE(s). | | +-----------+-----------+---+-----------+-----------+-----------+ | f | a | O | 1..N | R | | | ilterDnns | rray(Dnn) | | | epresents | | | | | | | the DNNs | | | | | | | for which | | | | | | | the | | | | | | | policy | | | | | | | event | | | | | | | report | | | | | | | shall | | | | | | | apply. | | | | | | | Each DNN | | | | | | | is a full | | | | | | | DNN with | | | | | | | both the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and | | | | | | | Operator | | | | | | | Id | | | | | | | entifier, | | | | | | | or a DNN | | | | | | | with the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only. If | | | | | | | omitted | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | any DNN. | | +-----------+-----------+---+-----------+-----------+-----------+ | filt | arra | O | 1..N | R | | | erSnssais | y(Snssai) | | | epresents | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | for which | | | | | | | the | | | | | | | policy | | | | | | | event | | | | | | | report | | | | | | | shall | | | | | | | apply. If | | | | | | | omitted | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | any | | | | | | | S-NSSAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssaiDnn | array(Sns | O | 1..N | R | EneNA | | | saiDnnCom | | | epresents | | | | bination) | | | the | | | | | | | co | | | | | | | mbination | | | | | | | list of | | | | | | | S-NSSAI | | | | | | | and DNN | | | | | | | for which | | | | | | | the | | | | | | | policy | | | | | | | event | | | | | | | report | | | | | | | shall | | | | | | | apply. If | | | | | | | omitted, | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | any | | | | | | | com | | | | | | | bination. | | +-----------+-----------+---+-----------+-----------+-----------+ | filte | a | O | 1..N | R | Extended | | rServices | rray(Serv | | | epresents | SessionIn | | | iceIdenti | | | the | formation | | | fication) | | | services | | | | | | | for which | | | | | | | the | | | | | | | policy | | | | | | | event | | | | | | | report | | | | | | | shall | | | | | | | apply. If | | | | | | | omitted, | | | | | | | the | | | | | | | policy | | | | | | | event | | | | | | | report | | | | | | | shall | | | | | | | apply for | | | | | | | all the | | | | | | | active | | | | | | | services. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | M | 1 | Not | | | | | | | ification | | | | | | | URI for | | | | | | | Policy | | | | | | | Control | | | | | | | event | | | | | | | r | | | | | | | eporting. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifId | string | M | 1 | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID | | | | | | | assigned | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | ev | array(Pc | C | 1..N | R | ERIR | | entNotifs | EventNoti | | | epresents | | | | fication) | | | the | | | | | | | Policy | | | | | | | Control | | | | | | | Events to | | | | | | | be | | | | | | | reported | | | | | | | in the | | | | | | | Np | | | | | | | cf_EvenE | | | | | | | xposure_ | | | | | | | Subscribe | | | | | | | r | | | | | | | esponse.\ | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | resource | | | | | | | creati | | | | | | | on/update | | | | | | | response | | | | | | | when the | | | | | | | \"events | | | | | | | RepInfo\" | | | | | | | attribute | | | | | | | includes | | | | | | | the | | | | | | | \ | | | | | | | "immRep\" | | | | | | | attribute | | | | | | | set to | | | | | | | true. | | | | | | | O | | | | | | | therwise, | | | | | | | it shall | | | | | | | be | | | | | | | omitted. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request/ | | | | | | | response. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: In | | | | | | | the HTTP | | | | | | | request, | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | the set | | | | | | | of | | | | | | | features | | | | | | | supported | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | | | | | | In the | | | | | | | HTTP | | | | | | | response, | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | the set | | | | | | | of | | | | | | | features | | | | | | | supported | | | | | | | by both | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | and the | | | | | | | PCF. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type PcEventExposureNotif
Table 5.6.2.3-1: Definition of type PcEventExposureNotif
* * *
Attribute name Data type P Cardinality Description Applicability notifId
string M 1 Notification Correlation ID assigned by the NF service consumer.  
eventNotifs array(PcEventNotification) M 1..N Represents the Policy Control
Events to be reported according to the subscription corresponding to the
Notification Correlation ID.
* * *
#### 5.6.2.4 Type ReportingInformation
Table 5.6.2.4-1: Definition of type ReportingInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | immRep | boolean | O | 0..1 | I | | | | | | | ndication | | | | | | | of | | | | | | | immediate | | | | | | | r | | | | | | | eporting. | | | | | | | If | | | | | | | included, | | | | | | | when it | | | | | | | is set to | | | | | | | true it | | | | | | | indicates | | | | | | | immediate | | | | | | | reporting | | | | | | | of the | | | | | | | s | | | | | | | ubscribed | | | | | | | events, | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | O | | | | | | | therwise, | | | | | | | reporting | | | | | | | will | | | | | | | occur | | | | | | | when the | | | | | | | event is | | | | | | | met. | | +-----------+-----------+---+-----------+-----------+-----------+ | no | Notificat | O | 0..1 | R | | | tifMethod | ionMethod | | | epresents | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | method | | | | | | | ( | | | | | | | periodic, | | | | | | | one time, | | | | | | | on event | | | | | | | de | | | | | | | tection). | | | | | | | If | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | is not | | | | | | | supplied, | | | | | | | the | | | | | | | default | | | | | | | value | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | applies. | | +-----------+-----------+---+-----------+-----------+-----------+ | max | Uinteger | O | 0..1 | R | | | ReportNbr | | | | epresents | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | reports, | | | | | | | after | | | | | | | which the | | | | | | | sub | | | | | | | scription | | | | | | | ceases to | | | | | | | exist | | | | | | | (i.e., | | | | | | | the | | | | | | | reporting | | | | | | | ends). It | | | | | | | may be | | | | | | | present | | | | | | | for the | | | | | | | \"P | | | | | | | ERIODIC\" | | | | | | | and on | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | not | | | | | | | ification | | | | | | | methods. | | | | | | | If | | | | | | | omitted, | | | | | | | there is | | | | | | | no limit. | | +-----------+-----------+---+-----------+-----------+-----------+ | monDur | DateTime | C | 0..1 | R | | | | | | | epresents | | | | | | | the time | | | | | | | at which | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | ceases to | | | | | | | exist | | | | | | | (i.e. the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid | | | | | | | and the | | | | | | | reporting | | | | | | | ends). If | | | | | | | omitted, | | | | | | | there is | | | | | | | no time | | | | | | | limit. If | | | | | | | present | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | request, | | | | | | | it shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | response. | | +-----------+-----------+---+-----------+-----------+-----------+ | repPeriod | Du | O | 0..1 | Indicates | | | | rationSec | | | the time | | | | | | | interval | | | | | | | between | | | | | | | s | | | | | | | uccessive | | | | | | | event | | | | | | | notif | | | | | | | ications. | | | | | | | It is | | | | | | | supplied | | | | | | | for | | | | | | | not | | | | | | | ification | | | | | | | method | | | | | | | \"PE | | | | | | | RIODIC\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sampRatio | Samp | O | 0..1 | Indicates | | | | lingRatio | | | the ratio | | | | | | | of the | | | | | | | random | | | | | | | subset to | | | | | | | target | | | | | | | UEs, | | | | | | | event | | | | | | | reports | | | | | | | only | | | | | | | relates | | | | | | | to the | | | | | | | subset. | | +-----------+-----------+---+-----------+-----------+-----------+ | partitio | array(Par | O | 1..N | Defines | EneNA | | nCriteria | titioning | | | criteria | | | | Criteria) | | | for | | | | | | | par | | | | | | | titioning | | | | | | | the UEs | | | | | | | in order | | | | | | | to apply | | | | | | | the | | | | | | | sampling | | | | | | | ratio for | | | | | | | each | | | | | | | p | | | | | | | artition. | | | | | | | It may | | | | | | | only be | | | | | | | included | | | | | | | in event | | | | | | | sub | | | | | | | scription | | | | | | | requests | | | | | | | when the | | | | | | | \"sa | | | | | | | mpRatio\" | | | | | | | attribute | | | | | | | is also | | | | | | | provided. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | g | Du | O | 0..1 | Indicates | | | rpRepTime | rationSec | | | the time | | | | | | | during | | | | | | | which the | | | | | | | event | | | | | | | reports | | | | | | | detected | | | | | | | for the | | | | | | | concerned | | | | | | | UEs are | | | | | | | a | | | | | | | ggregated | | | | | | | in a | | | | | | | group, in | | | | | | | order to | | | | | | | be | | | | | | | reported | | | | | | | together | | | | | | | to the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifFlag | Notific | O | 0..1 | Indicates | EneNA | | | ationFlag | | | the | | | | | | | not | | | | | | | ification | | | | | | | flag, | | | | | | | which is | | | | | | | used to | | | | | | | mu | | | | | | | te/unmute | | | | | | | noti | | | | | | | fications | | | | | | | and to | | | | | | | retrieve | | | | | | | events | | | | | | | stored | | | | | | | during a | | | | | | | period of | | | | | | | muted | | | | | | | notif | | | | | | | ications. | | | | | | | | | | | | | | Default: | | | | | | | \"AC | | | | | | | TIVATE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: For | | | | | | | a given | | | | | | | type of | | | | | | | par | | | | | | | titioning | | | | | | | criteria, | | | | | | | the UE | | | | | | | shall | | | | | | | belong to | | | | | | | only one | | | | | | | single | | | | | | | partition | | | | | | | as long | | | | | | | as it is | | | | | | | served by | | | | | | | the NF | | | | | | | service | | | | | | | producer. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.5 Type ServiceIdentification
Table 5.6.2.5-1: Definition of type ServiceIdentification
* * *
Attribute name Data type P Cardinality Description Applicability servEthFlows
array(EthernetFlowInfo) C 1..N Ethernet flows of a service.
ExtendedSessionInformation servIpFlows array(IpFlowInfo) C 1..N IP flows of a
service. ExtendedSessionInformation afAppId AfAppId O 0..1 Contains an AF
application identifier. ExtendedSessionInformation NOTE: At least one of the
\"servEthFlows\", \"servIpFlows\" or \"afAppId\" attributes shall be present.
The \"servEthFlows\" attribute and the \"servIpFlows\" attribute shall not be
both present at the same time.
* * *
#### 5.6.2.6 Type EthernetFlowInfo
Table 5.6.2.6-1: Definition of type EthernetFlowInfo
* * *
Attribute name Data type P Cardinality Description Applicability ethFlows
array(EthFlowDescription) C 1..2 Contains the flow description for the Uplink
and/or Downlink Ethernet flows. It shall be present in the subscription
request. ExtendedSessionInformation flowNumber integer M 1 Identifies the
ordinal number of the Ethernet flow. ExtendedSessionInformation
* * *
#### 5.6.2.7 Type IpFlowInfo
Table 5.6.2.7-1: Definition of type IpFlowInfo
* * *
Attribute name Data type P Cardinality Description Applicability ipFlows
array(FlowDescription) C 1..2 Contains the flow description for the Uplink
and/or Downlink IP flows. It shall be present in the subscription request.
ExtendedSessionInformation flowNumber integer M 1 Identifies the ordinal
number of the IP flow. ExtendedSessionInformation
* * *
#### 5.6.2.8 Type PcEventNotification
Table 5.6.2.8-1: Definition of type PcEventNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | event | PcEvent | M | 1..N | Reported | | | | | | | Policy | | | | | | | Control | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | accType | A | C | 0..1 | Access | | | | ccessType | | | Type. It | | | | | | | shall be | | | | | | | included | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"AC_ | | | | | | | TY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | addA | Ad | O | 0..1 | Indicates | ATSSS | | ccessInfo | ditionalA | | | the | | | | ccessInfo | | | a | | | | | | | dditional | | | | | | | co | | | | | | | mbination | | | | | | | of Access | | | | | | | Type and | | | | | | | RAT Type | | | | | | | available | | | | | | | for MA | | | | | | | PDU | | | | | | | session. | | | | | | | It may be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"AC\ | | | | | | | _TY_CH\" | | | | | | | and the | | | | | | | PDU | | | | | | | session | | | | | | | is a | | | | | | | Mul | | | | | | | ti-Access | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | relA | Ad | O | 0..1 | Indicates | ATSSS | | ccessInfo | ditionalA | | | the | | | | ccessInfo | | | release | | | | | | | of a | | | | | | | co | | | | | | | mbination | | | | | | | of Access | | | | | | | Type and | | | | | | | RAT Type | | | | | | | available | | | | | | | for MA | | | | | | | PDU | | | | | | | session. | | | | | | | It may be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"AC\ | | | | | | | _TY_CH\" | | | | | | | and the | | | | | | | PDU | | | | | | | session | | | | | | | is a | | | | | | | Mul | | | | | | | ti-Access | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | anGwAddr | An | O | 0..1 | ePDG | | | | GwAddress | | | address. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | a | | | | | | | pplicable | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"AC_ | | | | | | | TY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ratType | RatType | O | 0..1 | RAT Type. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | a | | | | | | | pplicable | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"AC_ | | | | | | | TY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | plmnId | PlmnIdNid | C | 0..1 | PLMN | | | | | | | I | | | | | | | dentifier | | | | | | | or the | | | | | | | SNPN | | | | | | | Id | | | | | | | entifier. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"PL | | | | | | | MN_CH\". | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | a | Servi | C | 0..1 | The list | AMPolic | | ppliedCov | ceAreaCov | | | of | iesEvents | | | erageInfo | | | applied | | | | | | | allowed | | | | | | | Tracking | | | | | | | Areas for | | | | | | | the | | | | | | | serving | | | | | | | network | | | | | | | where the | | | | | | | UE is | | | | | | | camping. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"S | | | | | | | AC_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | C | 0..1 | SUPI of | | | | | | | the UE. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | Gpsi | | | | | | | shall | | | | | | | contain | | | | | | | either an | | | | | | | External | | | | | | | Id or an | | | | | | | MSISDN. | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | M | 1 | Time at | | | | | | | which the | | | | | | | event is | | | | | | | observed. | | +-----------+-----------+---+-----------+-----------+-----------+ | pd | Pdu | O | 0..1 | R | Extended | | uSessInfo | SessionIn | | | epresents | SessionIn | | | formation | | | PDU | formation | | | | | | session | | | | | | | in | | | | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | observed | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | re | Ser | O | 0..1 | R | Extended | | pServices | viceIdent | | | epresents | SessionIn | | | ification | | | service | formation | | | | | | in | | | | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | observed | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Satelli | C | 0..1 | Indicates | Satellit | | atBackhau | teBackhau | | | the | eBackhaul | | lCategory | lCategory | | | satellite | | | | | | | or | | | | | | | non- | | | | | | | satellite | | | | | | | backhaul | | | | | | | category | | | | | | | of the | | | | | | | PDU | | | | | | | session. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"SA | | | | | | | T_CATEGO | | | | | | | RY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | del | Failure | C | 0..1 | Indicates | Delive | | ivFailure | | | | the | ryOutcome | | | | | | failure | | | | | | | reason | | | | | | | for an | | | | | | | uns | | | | | | | uccessful | | | | | | | outcome | | | | | | | of the UE | | | | | | | Policy | | | | | | | Delivery. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | when the | | | | | | | reported | | | | | | | PcEvent | | | | | | | is | | | | | | | \"UNS | | | | | | | UCCESS_U | | | | | | | E_POL_D | | | | | | | EL_SP\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | SNPN | | | | | | | I | | | | | | | dentifier | | | | | | | consists | | | | | | | of the | | | | | | | PLMN | | | | | | | I | | | | | | | dentifier | | | | | | | and the | | | | | | | NID. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.9 Type PduSessionInformation
Table 5.6.2.9-1: Definition of type PduSessionInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | M | 1 | S-NSSAI | Extended | | | | | | of the | SessionIn | | | | | | PDU | formation | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | M | 1..N | Dnn of | Extended | | | | | | the PDU | SessionIn | | | | | | session, | formation | | | | | | a full | | | | | | | DNN with | | | | | | | both the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and | | | | | | | Operator | | | | | | | Id | | | | | | | entifier, | | | | | | | or a DNN | | | | | | | with the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpv4 | Ipv4Addr | C | 0..1 | The IPv4 | Extended | | | | | | address | SessionIn | | | | | | of the | formation | | | | | | served | | | | | | | UE. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpv6 | I | C | 0..1 | The IPv6 | Extended | | | pv6Prefix | | | prefix of | SessionIn | | | | | | the | formation | | | | | | served | | | | | | | UE. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ipDomain | string | O | 0..1 | I | Extended | | | | | | dentifies | SessionIn | | | | | | the IP | formation | | | | | | domain. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMac | MacAddr48 | C | 0..1 | UE MAC | Extended | | | | | | address. | SessionIn | | | | | | | formation | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | the | | | | | | | served UE | | | | | | | IP | | | | | | | address | | | | | | | (an | | | | | | | Ipv4Addr | | | | | | | or | | | | | | | I | | | | | | | pv6Prefix | | | | | | | or both | | | | | | | if | | | | | | | a | | | | | | | vailable) | | | | | | | or UE MAC | | | | | | | address | | | | | | | shall be | | | | | | | present. | | | | | | | | | | | | | | NOTE 2: | | | | | | | An | | | | | | | \"i | | | | | | | pDomain\" | | | | | | | a | | | | | | | ttribute, | | | | | | | may be | | | | | | | provided | | | | | | | in | | | | | | | co | | | | | | | mbination | | | | | | | with a | | | | | | | \ | | | | | | | "ueIpv4\" | | | | | | | a | | | | | | | ttribute. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.10 Type SnssaiDnnCombination
Table 5.6.2.10-1: Definition of type SnssaiDnnCombination
* * *
Attribute name Data type P Cardinality Description Applicability snssai Snssai
M 1 S-NSSAI  
dnns array(Dnn) M 1..N Dnn
* * *
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
#### 5.6.3.3 Enumeration: PcEvent
The enumeration PcEvent represents the policy control events that can be
subscribed. It shall comply with the provisions defined in table 5.6.3.3-1.
Table 5.6.3.3-1: Enumeration PcEvent
* * *
Enumeration value Description Applicability AC_TY_CH Access Type Change  
PLMN_CH PLMN Change  
SAC_CH Service Area Coverage change AMPoliciesEvents SAT_CATEGORY_CH Indicates
that a change between different satellite backhaul category, or non-satellite
backhaul, has been detected. SatelliteBackhaul SUCCESS_UE_POL_DEL_SP Indicates
about the successful UE Policy delivery related to the invocation of AF
provisioned service parameters. DeliveryOutcome UNSUCCESS_UE_POL_DEL_SP
Indicates about the unsuccessful UE Policy delivery related to the invocation
of AF provisioned service parameters. DeliveryOutcome
* * *
## 5.7 Error handling
### 5.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [5].
For the Npcf_EventExposure API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [6].
Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS
29.500 [5] shall be supported for an HTTP method if the corresponding HTTP
status codes are specified as mandatory for that HTTP method in table
5.2.7.1-1 of 3GPP TS 29.500 [5].
In addition, the requirements in the following clauses are applicable for the
Npcf_EventExposure API.
### 5.7.2 Protocol Errors
In this Release of the specification, there are no service specific protocol
errors applicable for the Npcf_EventExposure API.
### 5.7.3 Application Errors
The application errors defined for the Npcf_EventExposure service are listed
in table 5.7.3-1.
Table 5.7.3-1: Application errors
* * *
Application Error HTTP status code Description
* * *
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Npcf_EventExposure
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [5].
Table 5.8-1: Supported Features
* * *
Feature number Feature Name Description 1 ExtendedSessionInformation Indicates
the support of additional session information in the subscription and report
of policy control event. 2 MacAddressRange Indicates the support of a set of
MAC addresses with a specific range in the traffic filter. 3 ATSSS Indicates
the support of the report of the multiple access types of a MA PDU session. 4
ES3XX Extended Support for 3xx redirections. This feature indicates the
support of redirection for any service operation, according to Stateless NF
procedures as specified in clauses 6.5.3.2 and 6.5.3.3 of 3GPP TS 29.500 [5]
and according to HTTP redirection principles for indirect communication, as
specified in clause 6.10.9 of 3GPP TS 29.500 [5]. 5 AMPoliciesEvents Indicates
the support of the report of changes of service area coverage for a UE. 6
EneNA This feature indicates support for the enhancements of network data
analytics requirements. 7 SatelliteBackhaul Indicates the support of the
report of the satellite or non-satellite backhaul category of the PDU session.
8 DeliveryOutcome Indicates the support of notifications about the outcome of
the UE Policy delivery related to the invocation of AF provisioned service
parameters. 9 ERIR Indicates the support of immediate report within the
subscription response.
* * *
## 5.9 Security
As indicated in 3GPP TS 33.501 [19] and 3GPP TS 29.500 [5], the access to the
Npcf_EventExposure API, based on local configuration, may be authorized by
means of the OAuth2 protocol (see IETF RFC 6749 [20]), using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [21])
plays the role of the authorization server.
If OAuth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nnrf_NFManagement API, shall obtain a \"token\" from
the authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [21], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF where the NF Service Consumer invoked the
discovery of the Npcf_EventExposure service.
The Npcf_EventExposure API defines a single scope \"npcf-eventexposure\" for
the entire service, and it does not define any additional scopes at resource
or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [7] specification of HTTP messages and
content bodies used by the Npcf_EventExposure API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[22] and clause 5.3.1 of the 3GPP TS 29.501 [6] for further information).
# A.2 Npcf_EventExposure API
openapi: 3.0.0
info:
version: 1.2.0
title: Npcf_EventExposure
description: \|
PCF Event Exposure Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.523 V17.7.0; 5G System; Policy Control Event Exposure
Service; Stage 3.
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.523/
servers:
\- url: \'{apiRoot}/npcf-eventexposure/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- npcf-eventexposure
paths:
/subscriptions:
post:
summary: Creates a new Individual Policy Control Events Subscription resource
operationId: PostPcEventExposureSubsc
tags:
\- Policy Control Events Subscription (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureSubsc\'
responses:
\'201\':
description: Success
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureSubsc\'
headers:
Location:
description: >
Contains the URI of the created individual policy control events subscription
resource, according to the structure
{apiRoot}/npcf-eventexposure/v1/subscriptions/{subscriptionId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
PcEventNotification:
\'{\$request.body#/notifUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureNotif\'
responses:
\'204\':
description: No Content, Notification was succesfull.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/subscriptions/{subscriptionId}:
get:
summary: \"Reads an existing Individual Policy Control Events Subscription\"
operationId: GetPcEventExposureSubsc
tags:
\- Individual Policy Control Events Subscription (Document)
parameters:
\- name: subscriptionId
in: path
description: Policy Control Event Subscription ID.
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource representation is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureSubsc\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
summary: \"Modifies an existing Individual Policy Control Events Subscription
\"
operationId: PutPcEventExposureSubsc
tags:
\- Individual Policy Control Events Subscription (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureSubsc\'
parameters:
\- name: subscriptionId
in: path
description: Policy Control Event Subscription ID.
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource was succesfully modified and representation is
returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcEventExposureSubsc\'
\'204\':
description: No Content. Resource was succesfully modified.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: \"Cancels an existing Individual Policy Control Events Subscription
\"
operationId: DeletePcEventExposureSubsc
tags:
\- Individual Policy Control Events Subscription (Document)
parameters:
\- name: subscriptionId
in: path
description: Policy Control Event Subscription ID.
required: true
schema:
type: string
responses:
\'204\':
description: No Content. Resource was succesfully deleted.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
npcf-eventexposure: Access to the Npcf_EventExposure API.
schemas:
PcEventExposureNotif:
description: >
Represents notifications about Policy Control events related to an Individual
Policy Events Subscription resource**.**
type: object
properties:
notifId:
type: string
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/PcEventNotification\'
minItems: 1
required:
\- notifId
\- eventNotifs
PcEventExposureSubsc:
description: Represents an Individual Policy Events Subscription resource**.**
type: object
properties:
eventSubs:
type: array
items:
\$ref: \'#/components/schemas/PcEvent\'
minItems: 1
eventsRepInfo:
\$ref: \'#/components/schemas/ReportingInformation\'
groupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
filterDnns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
minItems: 1
filterSnssais:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
snssaiDnns:
type: array
items:
\$ref: \'#/components/schemas/SnssaiDnnCombination\'
minItems: 1
filterServices:
type: array
items:
\$ref: \'#/components/schemas/ServiceIdentification\'
minItems: 1
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notifId:
type: string
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/PcEventNotification\'
minItems: 1
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- eventSubs
\- notifId
\- notifUri
ReportingInformation:
description: Represents the type of reporting that the subscription
requires**.**
type: object
properties:
immRep:
type: boolean
notifMethod:
\$ref:
\'TS29508_Nsmf_EventExposure.yaml#/components/schemas/NotificationMethod\'
maxReportNbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
monDur:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
sampRatio:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SamplingRatio\'
partitionCriteria:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartitioningCriteria\'
minItems: 1
description: Criteria for partitioning the UEs before applying the sampling
ratio.
grpRepTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
notifFlag:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NotificationFlag\'
ServiceIdentification:
description: Identifies the service to which the subscription applies**.**
type: object
properties:
servEthFlows:
type: array
items:
\$ref: \'#/components/schemas/EthernetFlowInfo\'
minItems: 1
servIpFlows:
type: array
items:
\$ref: \'#/components/schemas/IpFlowInfo\'
minItems: 1
afAppId:
\$ref: \'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/AfAppId\'
# All conditions in allOf must be met
allOf:
# First condition is that servEthFlows and servIpFlows are mutually exclusive
\- not:
required: [servEthFlows, servIpFlows]
# Second condition is that at least one the servEthFlows, servIpFlows and
afAppId shall be present
\- anyOf:
\- required: [servEthFlows]
\- required: [servIpFlows]
\- required: [afAppId]
EthernetFlowInfo:
description: Identifies an UL/DL ethernet flow**.**
type: object
properties:
ethFlows:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
minItems: 1
maxItems: 2
flowNumber:
type: integer
required:
\- flowNumber
IpFlowInfo:
description: Identifies an UL/DL IP flow**.**
type: object
properties:
ipFlows:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/FlowDescription\'
minItems: 1
maxItems: 2
flowNumber:
type: integer
required:
\- flowNumber
PcEventNotification:
description: Represents the information reported for a Policy Control
event**.**
type: object
properties:
event:
\$ref: \'#/components/schemas/PcEvent\'
accType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
addAccessInfo:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo\'
relAccessInfo:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo\'
anGwAddr:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/AnGwAddress\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
plmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid\'
satBackhaulCategory:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/SatelliteBackhaulCategory\'
appliedCov:
\$ref:
\'TS29534_Npcf_AMPolicyAuthorization.yaml#/components/schemas/ServiceAreaCoverageInfo\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
pduSessionInfo:
\$ref: \'#/components/schemas/PduSessionInformation\'
repServices:
\$ref: \'#/components/schemas/ServiceIdentification\'
delivFailure:
\$ref: \'TS29522_ServiceParameter.yaml#/components/schemas/Failure\'
required:
\- event
\- timeStamp
PduSessionInformation:
description: Represents PDU session identification information**.**
type: object
properties:
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
ueIpv4:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
ipDomain:
type: string
ueMac:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
required:
\- snssai
\- dnn
oneOf:
\- required: [ueMac]
\- anyOf:
\- required: [ueIpv4]
\- required: [ueIpv6]
SnssaiDnnCombination:
description: Represents a combination of S-NSSAI and DNN(s)**.**
type: object
properties:
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
dnns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
minItems: 1
# Simple data types and Enumerations
PcEvent:
description: Represents the policy control events that can be subscribed**.**
anyOf:
\- type: string
enum:
\- AC_TY_CH
\- PLMN_CH
\- SAC_CH
\- SAT_CATEGORY_CH
\- SUCCESS_UE_POL_DEL_SP
\- UNSUCCESS_UE_POL_DEL_SP
\- type: string
#