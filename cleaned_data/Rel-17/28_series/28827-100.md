# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# Introduction
# 1 Scope
The present document studies the potential use cases, requirements, and
solutions for the 5G charging for additional roaming scenarios and actors, in
regards to roaming local break out and home routed and taking the requirements
brought by adoption of GSMA BCE (Billing Charging Evolution), as a replacement
for TAP.
The study will cover and identify gaps for:
\- charging _in the visited MNO network for the purpose of wholesale charging
towards the home MNO_
\- capabilities for _reconciliation of wholesale charging reports from the
visited MNO network with MNO home network information_
\- _charging in the visited MNO network_ and convey it _to the home MNO
network for the purpose of retail charging_
_\- charging in the MNO's network for the purpose of wholesale charging
towards an additional charging model actor e.g. MVNO_
\- _charging in the visited MNO network_ and convey it _to the home MNO's
network for the purpose of home MNO wholesale charging towards an additional
charging model actor e.g. MVNO_
\- _charging in the visited MNO network_ and convey it _to an MVNO hosted by a
home MNO for the purpose of retail charging_
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501:\"System Architecture for the 5G System\".
[3] GSMA TD.201: \"Common Billing and Charging Processes \".
[4] 3GPP TS 32.255:\" Charging management;5G Data connectivity domain
charging; stage 2\".
[5] 3GPP TS 32.256:\" Charging management; 5G connection and mobility domain
charging; Stage 2\".
[6] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
**\ :** \.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
BCE Billing and Charging Evolution
CHF Charging Function
HR Home Routed
LBO Local Breakout
# 4 Business roles
5G roaming scenarios involves the services or capabilities provided by
multiple actors and entities in the form of following business roles:
> \- Home Mobile Network Operator (home MNO): This is an operator of PLMN
> where the MCC and MNC of the PLMN identity match the MCC and MNC of the
> SUPI, provides related services for its subscribers.
>
> \- Visited Mobile Network Operator (visited MNO): This is an operator of
> PLMN serving UE which different from the HPLMN, also referred to as VPLMN
>
> \- Mobile Virtual Network Operator (MVNO): This is an operator which
> provides mobile services but does not own licensed radio spectrum. The MVNO
> obtains network services from MNO, and provides to its own subscribers.
In deployments, there could be scenarios where one or more of the business
roles are supported by a single enterprise, i.e., one enterprise may play a
single business role or multiple business roles. The present document does not
impose any restrictions to the possible deployment scenarios.
Editor's Note: description of home MNO, visited MNO and MVNO (additional
actor) is FFS.
There could be various business models in terms of charging for the network
services provided and between the entities being served, for example (but not
limited to):
\- Home MNO charges the subscribers for usage of network services in visited
MNO.
\- Home MNO charges the MVNO for its subscribers' network service usage in
home MNO, or network service usage in visited MNO
\- MVNO charges the subscribers for usage of network services in visited MNO
and/or home MNO.
\- Visited MNO charges home MNO for its subscribers' usage of network services
in visited MNO.
The solutions described in the present TR aim to flexibly support the charging
scenarios without restriction to any specific business model.
# 5 Concepts and overview
## 5.1 General
The 5G charging for additional roaming scenarios and actors includes the
following aspects:
\- HR Roaming (Home Routed), refer to TS 23.501 [2];
\- LBO Roaming (Local Breakout), refer to TS 23.501 [2];
\- BCE (Billing and Charging Evolution), refer to GSMA TD 201 [3].
## 5.2 Home Routed
The 5G System roaming architecture in the case of home routed scenario with
service-based interfaces within the Control Plane, as defined by TS 23.501[2]
Figure 4.2.4-3.
The 5G System roaming architecture in the case of home routed scenario using
the reference point representation, as defined by TS 23.501[2] Figure 4.2.4-6.
## 5.3 Local Breakout
The 5G System roaming architecture with local breakout with service-based
interfaces within the Control Plane as defined by TS 23.501[2] Figure 4.2.4-1.
The 5G System roaming architecture in the case of local break out scenario
using the reference point representation, as specified in TS 23.501 [2] Figure
4.2.4-4.
## 5.4 Billing and Charging Evolution (BCE)
The BCE process is a simplified and flexible optional settlement method,
tailor made for future wholesale roaming settlement needs of operators. The
process is driven by new formats like Usage Data Report, Billing Statement
Report and Detailed Data Record which together build a robust framework for
seamless revenue assurance.
The BCE Process as specified in GSMA TD.201 [3] clause 2.2.
# 6 Architecture considerations
Editor's Note: the charging architecture for additional roaming scenarios and
actors is FFS along with the related key issues.
# 7 Charging scenarios and key issues
## 7.1 Charging in visited MNO for wholesale charging towards home MNO
### 7.1.1 Use cases
#### 7.1.1.1 Use case #1a: Visited MNO charging home MNO for 5G data
connectivity provided to the home MNO's subscribers
This use case focuses on visited MNO and home MNO business roles.
A CSC (UE) has a subscription with the home MNO which allows usage of 5G data
connectivity.
The visited MNO to home MNO charging could be based on data volume that the
home MNO UE has used in the visited MNO's network considering of the following
aspects:
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- Rating Group
>
> \- Service ID
>
> \- Location
>
> \- QoS information.
Editor's Note: the list of the above aspects is ffs and should be check
whether in the BCE.
This use case is applicable for the Home Routed Roaming and Local Breakout
Roaming.
For the Home Routed Roaming using QBC, the visited MNO to home MNO charging
could be based on \"Roaming Charging Profile\", which may be negotiated
between the VPLMN and the HPLMN.
#### 7.1.1.2 Use case #1b: Visited MNO charging home MNO for 5G connection and
mobility provided to the home MNO's CSCs
This use case focuses on visited MNO and home MNO business roles.
A CSC (UE) has a subscription with the home MNO which allows usage of 5G data
connectivity connection and mobility.
The visited MNO to home MNO charging is based number of home MNO's UEs (i.e.
unique SUPI) connected to the visited MNO's network over a specific period of
time.
### 7.1.2 Potential charging requirements
**REQ-CH_VMNO-01:** The charging mechanism in visited MNO should support
charging based on the 5G data connectivity usage for each home MNO.
**REQ-CH_VMNO-02:** The charging mechanism in visited MNO should support
collecting charging information related to 5G data connectivity usage for each
home MNO.
**REQ-CH_VMNO-03:** The charging mechanism in visited MNO should support
charging based on the 5G connection and mobility usage for each home MNO.
**REQ-CH_VMNO-04:** The charging mechanism in visited MNO should support
collecting charging information related to 5G connection and mobility usage
for each home MNO.
**REQ-CH_VMNO-05:** The charging mechanism in visited MNO may support roaming
charging profile negotiation related to 5G data connectivity charging with
each home MNO for Home Routed roaming case.
### 7.1.3 Key issues
The following key issues are identified:
\- **Key Issue #1a** : Aggregation of charging information in visited MNO for
5G data connectivity usage per home MNO.
\- **Key Issue #1b** : Aggregation of charging information in visited MNO for
5G connection and mobility usage per home MNO.
### 7.1.4 Potential solutions
#### 7.1.4.1 Solution #1.1: CDR in VPLMN for wholesale of 5G data connectivity
##### 7.1.4.1.1 General
A possible solution for key issue 1a, wholesale charging for 5G data
connectivity provided to the home MNO by the visited MNO, covering both home
routed and local breakout case.
##### 7.1.4.1.2 Reference architecture
Figure 7.1.4.1.2-1: Roaming 5G data connectivity scenario in service-based
interface representation
Figure 7.1.4.1.2-2: Roaming 5G data connectivity scenario in reference point
representation
The SMF with CTF interact with CHF using Nchf interface. The CDRs produced by
CHF may send this for interconnect charging (shown as dashed in the figures),
which then can be used to aggregate and calculate the amount of data per home
MNO, the interconnect part is only included for completeness and is currently
outside the scope of 3GPP SA5.
##### 7.1.4.1.3 Message flows
For both home routed roaming and LBO, the flows for 5G data connectivity
charging would be the same as in clause 5.2.2.12 of TS 32.255 [4] with the
difference that for the LBO case would be that there would be no interaction
with the home PLMN's UPF, SMF and CHF.
#### 7.1.4.2 Solution #1.2: CDR in VPLMN for wholesale of 5G connection and
mobility
##### 7.1.4.2.1 General
A possible solution for key issues 1b, wholesale charging for 5G connection
and mobility (e.g. number of UEs) provided to the home MNO by the visited MNO,
covering both home routed and local breakout case.
##### 7.1.4.2.2 Reference architecture
Figure 7.1.4.2.2-1: Roaming 5G connection and mobility scenario in service-
based interface representation
Figure 7.1.4.2.2-2: Roaming 5G connection and mobility scenario in reference
point representation
The AMF with CTF interact with CHF using Nchf interface. The CDRs produced by
CHF may be send for interconnect charging (shown as dashed in the figures),
which then can be used to aggregate and calculate the number of connected UEs
per home MNO, the interconnect part is only included for completeness and is
currently outside the scope of 3GPP SA5.
##### 7.1.4.2.3 Message flows
The flows for 5G connection and mobility charging would be the same as in
clause 5.2.2.5 of TS 32.256 [5], with the exception that the there is no need
to interact with the home PLMN's CHF and that only PEC is required. The CDRs
generated in the CHF in VPLMN would in this case be used as input to the
wholesale charging of the HPLMN. The following figure 7.1.4.2.2-1 describes a
Registration charging message flow in PEC in VPLMN scenario for roaming, based
on figure 4.2.2.2.2-1 of TS 23.502 [6] description
Figure 7.1.4.2.3-1: Roaming Registration -- PEC in VPLMN
1-20a. Registration procedure initiated by UE per steps 1 to 20a of figure
4.2.2.2.2-1 of TS 23.502 [6], with PCF, AUSF and UDM in HPLMN.
21\. Upon successful procedure, Registration Accept sent to the UE.
21ch-a. The AMF in VPLMN sends Charging Data Request [Event] to the CHF in
VPLMN for the UE successful registration, indicating \"roamer in\".
21ch-b. The CHF in VPLMN creates the CDR for this registration.
21ch-c. The CHF in VPLMN acknowledges by sending Charging Data Response
[Event] to the AMF in VPLMN.
21b to 24. Same steps as in figure 4.2.2.2.2-1 of TS 23.502 [6].
#### 7.1.4.3 Solution #1.3: Nchf to HPLMN for wholesale of 5G data
connectivity
##### 7.1.4.3.1 General
A possible solution for key issue #1a, wholesale charging for 5G data
connectivity provided to the home MNO by the visited MNO, covering local
breakout case. In this case there is also charging information generated in
the home MNO.
##### 7.1.4.3.2 Reference architecture
Figure 7.1.4.3.2-1: Roaming 5G data connectivity scenario in service-based
interface representation
Figure 7.1.4.3.2-2: Roaming 5G data connectivity scenario in reference point
representation
##### 7.1.4.3.3 Message flows
For local breakout roaming, the flows for 5G data connectivity charging are
present as the following figure 7.1.4.3.3-1.
**Figure 7.1.4.3.3-1: Local breakout roaming for 5G data connectivity
charging**
1-3a. UE initiates a new PDU session. V-SMF selection by the AMF.
4ch-a. The UE is identified as a roamer (PLMN ID of the received SUPI is
different from VPLMN PLMN ID), the V-CHF is selected accordingly. A Charging
Data Request [Initial, Roaming Charging profile] is sent to V-CHF, indicating
\"in-bound roamer\".
4ch-b. The V-CHF opens a CDR (indicating \"in-bound roamer\")
4ch-c. The V-CHF acknowledges by sending Charging Data Response [Initial,
Roaming Charging profile] to the V-SMF.
7ch-a. A Charging Data Request [Update] is sent to V-CHF with charging
information received from V-SMF.
7ch-b. The V-CHF updates the CDR.
7ch-c. The V-CHF acknowledges by sending Charging Data Response [Update] to
the V-SMF.
10ch-a. A Charging Data Request [Termination] is sent to V-CHF.
10ch-b. The V-CHF closes the CDR
10ch-c. The V-CHF acknowledges by sending Charging Data Response [Termination]
to the V-SMF.
Step 5, Step 8 and Step 11 are detailed in Figure 7.2.4.2.1-2 clause 7.2.
## 7.2 Convey charging information from visited MNO to home MNO
### 7.2.1 Home MNO does retail charging towards subscribers
#### 7.2.1.1 Use cases
##### 7.2.1.1.1 Use case #2a: Home MNO charging subscriber for 5G data
connectivity at roaming using local breakout
This use case focuses on home MNO and subscriber business roles.
A subscriber has a UE and a subscription with the home MNO which allows usage
of 5G data connectivity while roaming. The subscriber is roaming in a visited
network and is allowed to use local breakout.
The home MNO charging of the subscriber could be based on data volume that the
home MNO UE has used in the visited MNO's network considering of the following
aspects:
> \- Visited network
>
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
##### 7.2.1.1.2 Use case #2b: Home MNO charging subscriber for 5G data
connectivity at roaming using home routed
This use case focuses on home MNO and subscriber business roles.
A subscriber has a UE and a subscription with the home MNO which allows usage
of 5G data connectivity while roaming. The subscriber is roaming in a visited
network and the connection is home routed.
The home MNO charging of the subscriber could be based on data volume that the
home MNO UE has used in the visited MNO's network considering of the following
aspects:
> \- Visited network
>
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
### 7.2.2 Potential charging requirements
**REQ-CH_CVTOH-01:** The charging mechanism in visited MNO should support
conveying charging information for the 5G data connectivity usage to the home
MNO for each UE.
**REQ-CH_ CVTOH-02:** The charging mechanism in visited MNO should support
collecting charging information related to 5G data connectivity usage for each
UE.
### 7.2.3 Key issues
The following key issues are identified:
\- **Key Issue #2a** : Collection of charging mechanism in visited MNO about
the 5G data connectivity usage.
\- **Key Issue #2b:** Conveying the charging information to the home MNO
\- **Key Issue #2c:** Finding the correct CHF
**\- Key Issue #2d:** Service based interface to use between visited CHF and
home CHF
**\- Key Issue #2e:** Trigger handling between visited CHF and home CHF
### 7.2.4 Potential solutions
#### 7.2.4.1 Solution #2.1: V-CHF communicating with H-CHF for retail charging
of 5G data connectivity
##### 7.2.4.1.1 General
A possible solution for key issues #2a and #2b, retail charging for 5G data
connectivity provided to the home MNO's users by the visited MNO, in the case
of local breakout.
##### 7.2.4.1.2 Reference architecture
Figure 7.2.4.1.2-1: Roaming 5G data connectivity scenario in service-based
interface representation
The visited CHF does converged charging for interconnect, while the home CHF
does converged charging for the subscriber.
Figure 7.2.4.1.2-2: Roaming 5G data connectivity scenario in reference point
representation
##### 7.2.4.1.3 Message flows
Figure 7.2.4.1.3-1 shows a scenario for session based charging (SCUR) with CHF
to CHF communication.
Figure 7.2.4.1.3-1: SCUR - Session based charging with CHF to CHF
communication
**1) Request for service delivery:** A request for session establishment is
received in the NF (CTF). The service is configured to be authorized by the
vCHF before start.
**2) Units determination:** the NF (CTF) determines the number of units
depending on the service requested by the UE in \"Decentralized Units
determination\" scenario.
**3) Charging data request [Initial, Quota requested]:** The NF (CTF) sends
the request to the vCHF for the service to be granted authorization to start,
and to reserve the number of units if determined in item 2.
**4) Determine hCHF:** the vCHF determines that it need to interact with hCHF
and which hCHF it should contact.
**5) Charging home request [Initial, Quota requested]:** The vCHF sends the
request to the hCHF for the service to be granted authorization to start, and
to reserve the number of units if determined in item 2.
**6) Account, Rating, Reservation control:** the hCHF rates the requests
either based on the number of units requested or on internal unit
determination, checks if corresponding funds can be reserved on the user\'s
account balance. If the account has sufficient funds, the hCHF performs the
corresponding reservations.
**7) Open CDR:** based on policies, the hCHF opens a CDR related to the
service.
**8) Charging home response [Initial, Quota granted]:** The hCHF grants
authorization to vCHF for the service to start, with the reserved number of
units.
**9) Open CDR:** based on policies, the vCHF opens a CDR related to the
service.
**10) Charging data response [Initial, Quota granted]:** The vCHF grants
authorization to NF (CTF) for the service to start, with the reserved number
of units.
**11) Granted units supervision:** the NF (CTF) monitors the consumption of
the granted units.
**12) Start of service delivery:** the NF (CTF) starts to deliver the
content/service based on the reserved number of units.
**13) Quota management trigger:** A trigger associated to quota management is
met. Unit determination is performed when applicable.
**14) Charging data request [Update, Unit used, Quota requested]:** the NF
(CTF) sends the request to the vCHF, for more units to be granted for the
service to continue and reporting the used units.
**15) Charging home request [Update, Unit used, Quota requested]:** the vCHF
sends the request to the hCHF, for more units to be granted for the service to
continue and reporting the used units.
**16) Account, Rating, Reservation control:** The hCHF performs the process
related to the reported usage and the requested reservation, involving rating
entity and user\'s account balance.
**17) Update CDR:** based on policies, the hCHF updates the CDR with charging
data related to the service.
**18) Charging home response [Update, Quota granted]:** The hCHF grants quota
to vCHF for the service to continue, with the reserved number of units.
**19) Update CDR:** based on policies, the vCHF updates the CDR with charging
data related to the service.
**20) Charging data response [Update, Quota granted]:** The vCHF grants quota
to NF (CTF) for the service to continue, with the reserved number of units.
**21) Granted units supervision:** the NF (CTF) monitors the consumption of
the granted units.
**22) Service delivery ongoing:** the NF (CTF) continues the service delivery
based on the granted quota.
**23) Service released:** the service is terminated or released.
**24) Charging data request [Termination,** **Unit used]:** the NF (CTF) sends
the request to the vCHF, for charging data related to the service termination
with the final consumed units.
**25) Charging home request [Termination,** **Unit used]:** the vCHF sends the
request to the hCHF, for charging data related to the service termination with
the final consumed units.
**26) Account, Rating control:** The hCHF performs the service termination
process involving rating entity and user\'s account balance.
**27) Close CDR:** based on policies, the hCHF closes the CDR with charging
data related to the service termination and the last reported units.
**28) Charging home response [Termination]:** The hCHF informs the vCHF on the
result of the request.
**29) Close CDR:** based on policies, the vCHF closes the CDR with charging
data related to the service termination and the last reported units.
**30) Charging data response [Termination]:** The vCHF informs the NF (CTF) on
the result of the request.
#### 7.2.4.2 Solution #2.2: Visited NF (CTF) communicating with both H-CHF and
V-CHF
##### 7.2.4.2.1 General
A possible solution for key issues #2a and #2b, retail charging for 5G data
connectivity provided to the home MNO's user by the visited MNO. Roaming 5G
data connectivity scenario in service-based interface representation is the
same with Figure 7.2.4.1.1-1.
The visited CHF does converged charging for interconnect, while the home CHF
does converged charging for the subscriber.
##### 7.2.4.2.2 Reference architecture
Figure 7.2.4.2.2-1: Roaming 5G data connectivity scenario in service-based
interface representation
Figure 7.2.4.2.2-2: Roaming 5G data connectivity scenario in reference point
representation
##### 7.2.4.2.3 Message flows
Figure 7.2.4.2.3-1 shows a scenario for session based charging (SCUR) with CTF
to both CHFs communication.
Figure 7.2.4.2.3-1: SCUR - Session based charging with CTF to two CHFs
communication
**1) Request for service delivery:** A request for session establishment is
received in the NF (CTF). The service is configured to be authorized by both
the vCHF and hCHF before start.
**2) Units determination:** the NF (CTF) determines the number of units
depending on the service requested by the UE in \"Decentralized Units
determination\" scenario.
**3) Charging data request [Initial]:** The NF (CTF) sends the request to the
vCHF for the service to be granted authorization to start.
**4) Open CDR:** based on policies, the vCHF opens a CDR related to the
service.
**5) Charging data response [Initial]:** The vCHF grants authorization to NF
(CTF) for the service to start.
**6) Charging data request [Initial, Quota requested]:** The NF (CTF) sends
the request to the hCHF for the service to be granted authorization to start,
and to reserve the number of units if determined in item 2.
**7) Account, Rating, Reservation control:** the hCHF rates the requests
either based on the number of units requested or on internal unit
determination, checks if corresponding funds can be reserved on the user\'s
account balance. If the account has sufficient funds, the hCHF performs the
corresponding reservations.
**8) Open CDR:** based on policies, the hCHF opens a CDR related to the
service.
**9) Charging data response [Initial, Quota granted]:** The hCHF grants
authorization to NF (CTF) for the service to start, with the reserved number
of units.
**10) Granted units supervision:** the NF (CTF) monitors the consumption of
the granted units.
**11) Start of service delivery:** the NF (CTF) starts to deliver the
content/service based on the reserved number of units.
**12) Quota management trigger:** A trigger associated to quota management is
met. Unit determination is performed when applicable.
**13) Charging data request [Update, Unit used]:** the NF (CTF) sends the
request to the vCHF, reporting the used units.
**14) Update CDR:** based on policies, the vCHF updates the CDR with charging
data related to the service.
**15) Charging data response [Update]:** The vCHF grants authorization to NF
(CTF) for the service to continue.
**16) Charging data request [Update, Unit used, Quota requested]:** the NF
(CTF) sends the request to the hCHF, for more units to be granted for the
service to continue and reporting the used units.
**17) Account, Rating, Reservation control:** The hCHF performs the process
related to the reported usage and the requested reservation, involving rating
entity and user\'s account balance.
**18) Update CDR:** based on policies, the hCHF updates the CDR with charging
data related to the service.
**19) Charging data response [Update, Quota granted]:** The hCHF grants quota
to NF (CTF) for the service to continue, with the reserved number of units.
**20) Granted units supervision:** the NF (CTF) monitors the consumption of
the granted units.
**21) Service delivery ongoing:** the NF (CTF) continues the service delivery
based on the granted quota.
**22) Service released:** the service is terminated or released.
**23) Charging data request [Termination,** **Unit used]:** the NF (CTF) sends
the request to the vCHF, for charging data related to the service termination
with the final consumed units.
**24) Close CDR:** based on policies, the vCHF closes the CDR with charging
data related to the service termination and the last reported units.
**25) Charging data response [Termination]:** The vCHF informs the NF (CTF) on
the result of the request.
**26) Charging data request [Termination,** **Unit used]:** the NF (CTF) sends
the request to the hCHF, for charging data related to the service termination
with the final consumed units.
**27) Account, Rating control:** The hCHF performs the service termination
process involving rating entity and user\'s account balance.
**28) Close CDR:** based on policies, the hCHF closes the CDR with charging
data related to the service termination and the last reported units.
**29) Charging data response [Termination]:** The hCHF informs the NF (CTF) on
the result of the request.
## 7.3 Charging in an MNO for the purpose of wholesale charging towards an
additional actor
#### 7.3.1 Use cases
##### 7.3.1.1 Use case #3a: MNO does wholesale charging for 5G data
connectivity towards additional actors
This use case focuses on MNO and MVNO business roles.
A subscriber has a UE and a subscription with the MVNO which allows usage of
5G data connectivity while in the home MNO.
The MNO to MVNO charging could be based on data volume that the MVNO UE has
used in the MNO's network considering of the following aspects:
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
### 7.3.2 Potential charging requirements
**REQ-CH_MNOMVNO-01:** The charging mechanism in MNO should support collecting
charging information related to 5G data connectivity usage for each MVNO.
**REQ-CH_MNOMVNO-02:** The charging mechanism in MNO should support collecting
charging information related to 5G connection and mobility usage for each
MVNO.
### 7.3.3 Key issues
The following key issues are identified:
\- **Key Issue #3a** : Collection of charging mechanism in home MNO about the
5G data connectivity usage per MVNO.
### 7.3.4 Potential solutions
#### 7.3.4.1 Solution #3.1: CDR and Nchf in HPLMN for wholesale of non-roaming
5G data connectivity of additional actor
##### 7.3.4.1.1 General
A possible solution for key issue #3a, charging for 5G data connectivity
provided to the additional actor by the home MNO, covering non-roaming case.
##### 7.3.4.1.2 Reference architecture
Figure 7.3.4.2-1: Additional actor 5G data connectivity scenario in service-
based interface representation
Figure 7.3.4.1.2-2: Additional actor 5G data connectivity scenario in
reference point representation
The SMF with CTF interact with CHF using Nchf interface, without any
requirement of quota management. The CCS produces CDRs which may be send for
wholesale charging which then can be used to aggregate and calculate the
amount of data per additional actor, it could be done based on SUPI, IMSI
series, SNSSAI(s), DNN(s) etc., the interconnect part is only included for
completeness and is currently outside the scope of 3GPP SA5.
##### 7.3.4.1.3 Message flows
The flows would be the same as the non-roaming cases in clause 5.2.2 of TS
32.255 [4].
## 7.4 Convey charging from an MNO to an additional actor
### 7.4.1 Use cases
#### 7.4.1.1 Use case #4a: Additional actor does retail charging for 5G data
connectivity
This use case focuses on MVNO and subscriber business roles.
A subscriber has a UE and a subscription with the MVNO which allows usage of
5G data connectivity. The MVNO has their own billing and charging (CHF), but
no other NFs.
The MVNO charging of the subscriber could be based on data volume that the UE
has used in the MNO's network considering of the following aspects:
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
#### 7.4.1.2 Use case #4b: Additional actor does retail billing for 5G data
connectivity
This use case focuses on additional actor (e.g., MVNO) and subscriber business
roles.
A subscriber has a UE and a subscription with the additional actor which
allows usage of 5G data connectivity. The additional actor has their own
billing, but no CHFs.
The additional actor charging of the subscriber could be based on data volume
that the UE has used in the home MNO's network considering of the following
aspects:
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
### 7.4.2 Potential charging requirements
**REQ-CH_CHTOA-01:** The charging mechanism in MNO should support conveying
charging information for the 5G data connectivity usage to the MVNO for each
UE.
**REQ-CH_ CHTOA-02:** The charging mechanism in MNO should support collecting
charging information related to 5G data connectivity usage for each UE.
### 7.4.3 Key issues
The following key issues are identified:
\- **Key Issue #4a** : Collection of charging mechanism in MNO about the 5G
data connectivity usage.
\- **Key Issue #4b:** Conveying the charging information to the MVNO
\- **Key Issue #4c:** Finding the additional actor's CHF
**\- Key Issue #4d:** Service based interface to use towards the additional
actor's CHF
**\- Key Issue #4e:** Trigger handling between towards the additional actor's
CHF
### 7.4.4 Potential solutions
#### 7.4.4.1 Solution #4.1: Additional actor has CHF and does retail charging
##### 7.4.4.1.1 General
The possible solutions for key issues #4a and #4b, retail charging for 5G data
connectivity provided by the additional actor, to the MVNO by the home MNO.
##### 7.4.4.1.2 Reference architecture
Figure 7.4.4.1.2-1: Additional actor with only CHF 5G data connectivity
scenario in service-based interface representation
Figure 7.4.4.1.2-2: Additional actor with only CHF 5G data connectivity
scenario in service-based interface representation
The MNO CHF interacts with the additional actor CHF does converged charging
for the subscriber.
##### 7.4.4.1.3 Potential charging flows
The flows would be the same as in clause 7.2.4.2 where the vCHF corresponds to
the home MNO's CHF and the hCHF corresponds to the additional actor's CHF.
#### 7.4.4.2 Solution #4.2: Additional actor only does retail billing of
subscribers
##### 7.4.4.2.1 General
The possible solutions for key issues #4a and #4b, retail billing for 5G data
connectivity by the additional actor, the 5G data connectivity is provided by
the home MNO.
##### 7.4.4.2.2 Reference architecture
Figure 7.4.4.2.2-1: Additional actor with only billing 5G data connectivity
scenario in service-based interface representation
Figure 7.4.4.2.2-2: Additional actor with only billing 5G data connectivity
scenario in service-based interface representation
The home MNO CCS produces CDRs that the additional actor uses for billing of
the subscriber.
##### 7.4.4.2.3 Potential charging flows
The flows would be the same as in clause 7.1.4.1.2 where the vCHF corresponds
to the home MNO's CHF and the interconnect would be replaced by sending
information for retail charging.
## 7.5 Convey charging from visited MNO to home MNO, and home MNO to an
additional actor
### 7.5.1 Use cases
#### 7.5.1.1 Use case #5a: Use case for additional actor does retail changing
for 5G data connectivity while roaming
This use case focuses on visited MNO, home MNO, MVNO and subscriber business
roles.
A subscriber has a UE and a subscription with the MVNO which allows usage of
5G data connectivity. The MVNO has their own billing and charging (CHF), but
no other NFs. The MVNO has an agreement with the home MNO that allows its
subscribers roaming and the home MNO as a roaming agreement with the visited
MNO.
The MVNO charging of the subscriber could be based on data volume that the UE
has used in the visited MNO's network considering of the following aspects:
> \- RAT type;
>
> \- S-NSSAI;
>
> \- DNN;
>
> \- QoS information.
### 7.5.2 Potential charging requirements
**REQ-CH_CVTOHTOA-01:** The charging mechanism in visited MNO should support
conveying charging information for the 5G data connectivity usage to home MNO,
allowing further conveying it to the MVNO for each UE.
**REQ-CH_ CVTOHTOA-02:** The charging mechanism in home MNO should support
conveying charging information for the 5G data connectivity usage to MVNO for
each UE.
**REQ-CH_ CVTOHTOA-03:** The charging mechanism in MVNO should support
receiving charging information related to 5G data connectivity usage for each
UE.
### 7.5.3 Key issues
The following key issues are identified:
\- **Key Issue #5a** : Collection of charging mechanism in visited MNO about
the 5G data connectivity usage.
\- **Key Issue #5b:** Conveying the charging information from visited to the
home MNO
\- **Key Issue #5c:** Conveying the charging information to the home MNO and
MVNO
\- **Key Issue #5d:** Finding the correct CHF in home MNO and MVNO
**\- Key Issue #5e:** Service based interface to use between visited CHF, home
CHF and MVNO
**\- Key Issue #5f:** Trigger handling between visited CHF, home CHF and MVNO
### 7.5.4 Potential solutions
#### 7.5.4.1 Solution #5.1: CHF communication
##### 7.5.4.1.1 General
A possible solution for key issue #5a, #5b, and #5c, charging for 5G data
connectivity provided to the additional actor by the visited MNO through the
home MNO.
##### 7.5.4.1.2 Reference architecture
Figure 7.5.4.1.2-1: Additional actor with only CHF 5G data connectivity
roaming scenario in service-based interface representation
Figure 7.5.4.1.2-2: Additional actor with only CHF 5G data connectivity
roaming scenario in reference point representation
The visited and home MNO CHF does converged charging for interconnect, while
the additional actor CHF does converged charging for the subscriber.
##### 7.5.4.1.3 Message flows
This would be a combination of the flows in clauses 7.2.4.1 and 7.4.4.1.
## 7.6 Reconciliation of wholesale charging from the visited MNO with home MNO
information
### 7.6.1 Use cases
#### 7.6.1.1 Use case #6a: support for validation of usage information
received from visited MNO at the home MNO
This use case focuses on visited MNO and home MNO business roles.
When the home MNO receives the interconnect charges it would like to have the
possibility to validate the received information with information controlled
by itself.
### 7.6.2 Potential charging requirements
**REQ-CH_RECON-01:** The charging mechanism should allow the home MNO to
monitor the usage without any involvement of the visited MNO.
### 7.6.3 Key issues
The following key issues are identified:
\- **Key Issue #6a** : Collection of usage of home MNO independent and without
control of the visited MNO.
### 7.6.4 Potential solutions
#### 7.6.4.1 Solution #6.1: Use home routing
##### 7.6.4.1.1 General
A possible solution for key issue #6a would be to use home routed, where the
connection is sent to the home MNO, see TS 32.255 [4].
# 8 Conclusions and recommendations
_Local Breakout has been present in the standards for a long time but a
solution for charging has been missing until now. The deployment of Network
Slices, Edge Computing and different use cases that need local traffic routing
have created the necessity of addressing all the gaps for deployments of local
breakout. In this TR some use cases have been covered and some solutions
provided._
_Considering the different solutions to the use cases, the solutions where the
SMF communicates with both the vCHF and hCHF at the same point in time i.e.,
solutions #2.2 (Visited NF (CTF) communicating with both H-CHF and V-CHF) and
#4.1 (Additional actor has CHF and does retail charging), are preferred. This
since these are the only solution that can be included in the time frame of
Rel-17 and that covers the needed requirements. The focus for the specified
solution will be to limit and minimize the impact on and to the CHF and SMF._
Editor's note: Other solutions may be added depending on further study.
#