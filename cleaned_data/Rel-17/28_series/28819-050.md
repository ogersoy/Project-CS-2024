# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# Introduction
This report studies multi-vendor CI-CD chains for 3GPP NFs. The report reviews
existing CI-CD and testing work in ETSI and NGMN in Section 4. Section 5
presents the concepts developed as part of this report. Section 6 reviews
various relevant user scenarios and provides high level solution alternatives.
Section 7 proposes a high-level overall process for the operator pipeline
supporting multi-vendor NF delivery. Based on the learning in this report
Section 8 provides recommendations for normative work.
# 1 Scope
The present document studies key issues in automating CI-CD based testing of
3GPP NFs after delivery to the operator's operation environment. The document
describes the support the 3GPP system provides for CI-CD and other testing
such as:
  1. Support for operational and simulation testing
  2. Information relating to NFs required for testing
  3. Feedback on the new NF's performance
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] NGMN -- "Continuous Delivery in Telecommunication Network Environments"
Version 1, 2019
[3] 3GPP TS 28.530: 3rd Generation Partnership Project; Technical
Specification Group Services and System Aspects; Management and orchestration;
Concepts, use cases and requirements
[4] ETSI GR NFV-TST 006 v1.1.1 (2020-01): "Network Functions Virtualisation
(NFV); Testing; Report on CICD and DevOps".
[5] ETSI GR NFV-TST 011 v1.1.1 (2019-03): "Network Functions Virtualisation
(NFV); Testing; Test Domain and Description Language Recommendations".
[6] ETSI GR NFV-TST 002 v1.1.1 (2016-10): "Network Functions Virtualisation
(NFV); Testing Methodology; Report on NFV Interoperability Testing
Methodology".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
**example:** text used to clarify abstract rules by applying them literally.
**Test task** : A test task is an executable unit containing a set of test
cases to be executed, outputting the execution results of test cases within
the test task.**Test orchestration** : Determine the execution order of test
cases in one test task, allocate/deallocate and reseve/release resources to
support testing.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
\ \
# 4 Related Work in Other SDOs
## 4.1 ETSI-TST
The ETSI GR NFV TST 006[4] provides guidance and recommendations on how to
leverage DevOps and CI/CD techniques across the boundary from VNF provider to
service provider, or any combination of developer, installation and
operational entities. The goal of the ETSI report is to establish a DevOps
Joint Pipeline between VNF provider to service provider.
  1. Exploring use cases
     * Single vendor to single operator: This scenario can be understood as splitting the CICD process of a single product into different organizations. Development, building, and testing are in the vendor part, and deployment and operation are in the operator part. And analysed the delivery and feedback method between the two organizations.
     * Multiple vendors to single operator: This scenario analyses the interval of delivery by multiple vendors and the timing of integration of multiple vendor products in the Operator part, and points out that the integrated test is not on a component but on the combined integrated VNF or NS.
     * Based on the analysis of use cases, two components of the DevOps process are recommended:
> DevOps server: Stage and operate for the operator part of DevOps process.
>
> Data handling component: Used to process sensitive information in feedback
> data to the vendor.
  1. Defining the test steps in the DevOps process:
     * Step 1: Test Definition
     * Step 2: Code/VNF Package Shipment
     * Step 3: Automated Test Execution
     * Step 4: Moving to Production
     * Step 5: Collecting operational data
  2. Providing recommendations on implementations
     * Test code/test function/description included in VNF Package
> VNF package is recommended to contain a testing section with various
> information concerning testing and DevOps. VNF Package is recommended to
> include a description of the acceptance test, the test code, and a framework
> or test VNF that automates the execution of the test code.
  * Implementation of automated test execution
> Option 1: Package the test function that automates the test execution as
> part of the VNF Package: for example, as test VNFC.
>
> Option 2: Implement the test function that automates the test execution as
> separate test VNF: for example, a test Network Service consists of test VNFs
> and the VNF under test.
  * Test feedback to VNF vendor
> It is recommended that a requirement be specified for the VNF to be capable
> to provide the information as feedback data.
>
> It is recommended that a requirement be specified for the OSS to be capable
> to receive the feedback from the VNF
Besides, there is a revision version of TST 006(TST006ed121) which is still
working in progress now. This revision will extend the scope of the report to
analyse and provide recommendations on how to enhance the support for joint
delivery pipeline, including:
  1. Defining the key components in the DevOps process
     * DevOps server：Analyse which specific NFV components are involved in related operations of DevOps server, and discuss related requirements for NFV MANO APIs.
     * Test Framework: Analyse which specific NFV components are involved in related operations of Test Framework, and discuss related requirements for NFV MANO APIs.
  2. Analyze implementation of automated test execution
     * Leverage a standard test case description file which will be defined in NFV TST013 Spec, Test Frame work will parse this machine-readable file to obtain information for automated test execution.
  3. Defining the CI-CD process in more detail based on the above analysis.
ETSI NFV has described a general framework to be used in CICD, with the
following major components:
  * As described in ETSI GR NFV-TST 006 [4], DevOps server is responsible for pre-checks of the NFVI, triggering the different testing phases, evaluating the testing phases, post event health checks of the VNF(s), sending feedback to the VNF Provider.
  * As described in ETSI GR NFV-TST 011 [5], a Test Execution Platform is responsible for managing the execution of test cases and managing all resources outside the System Under Test.
  * As described in ETSI GR NFV-TST 002 [6], the System Under Test includes the Virtual Network Functions, the NFV Infrastructure, and the associated management/orchestration and descriptors.
As introduced above, there are already some related works in ETSI. So, it is
helpful to use the results of the above ETSI GRs in this 3GPP study.
## 4.2 NGMN
The work done in NGMN on "Continuous Deliver in Telecommunication Network
environments" [2] highlights five main aspects that are to be considered for
standardization:
1\. The release model is the complete set of items required for instantiating
a software-based function. In terms of 3GPP NF this would be the information
and the supporting artefacts required instantiate the 3GPP NF
2\. The environment model describes the environment to which releases could be
deployed. This refers to the available software and hardware artefacts in that
environment. Release models may be specific to environment models
3\. Use of version control in the operator environment
4\. Automated deployment steps that include testing the software artefacts
delivered from across vendors in a staging environment
5\. Clear separation of development, testing and operations environment for
security reasons.
NGMN works acts as a guiding structure to the work in this study item. Some
concepts from the NGMN work, particularly, release models are reused in this
work.
# 5 Concepts
## 5.1 Roles Relevant to this Study
This report uses the roles as specified in item 4.8 of TS28.530[3]. The roles
that are particularly important for this document are:
\- Network Operator (NOP)
\- the NFVI Supplier
\- The Network equipment supplier: For the purposes of this report the network
equipment supplier is referred to as 3GPP NF supplier (or the VNF supplier if
the NF is virtualized).
5.2 Single and Multiple NF Suppliers CI-CD
{width="6.689583333333333in" height="1.3604166666666666in"}
**Figure** **1 Typical CI-CD Chain**
A typical CI-CD chain consists of several stages as shown in Figure 1:
Development Phase, Staging Phase and Operational Phase. Starting from the
Development Phase, the developers write the software of the NF, and the test
code used to test the NF. When the software is finished and committed, the CI-
CD tool will automatically trigger the building and testing. At the step of
testing, the integrity of software artifacts is checked and the
functional/non-functional acceptance testing are performed. At the staging
phase, the software which passes all the tests will be release to the
operational environment. At the Operational phase, the software is deployed in
the production environment with the real traffic/user load. The software
delivered in such typical CI-CD chain is usually provided by a single
supplier.
{width="6.695138888888889in" height="2.1958333333333333in"}
**Figure** **2 Multiple NF supplier to single operator**
In telco environments (see Figure 2), the coding, initial testing and package
part of the CI-CD chain is typically at the vendor premises, and the
validation, integration testing and deployment part is at the operator part.
The CI-CD tools used in the operator part is responsible for fetching
delivered artifacts, triggering tests, collecting test results and data,
deploying software to staging/production environment, collecting operational
data and sending feedback to the vendor.
{width="6.48125in" height="2.2152777777777777in"}
**Figure 3: Vendor and Operator internal processes**
As shown in Figure 3, the vendor internal CI-CD process can be vender
specific, which may include coding, testing, packaging . Additionally, an
operator receives software artifacts (for 3GPP NFs) from multiple vendors ,
and then follows its own internal CI-CD procedures (see Figure 3) as a part of
the CI-CD chain before deploying the NF to an operational platform. The
internal processes of the NF delivery process are not a subject of
standardization and are therefore not considered in this study.
## 5.3 Classification of tests
{width="6.683333333333334in" height="1.7833333333333334in"}
Figure X: Test classification
When a new NF is delivered to the operator, the operator expects to perform
certain tests. Tests can normally be classified into three basic types (see
Figure X)
  1. Unit and acceptance tests: These tests involve testing the independent functioning of the NF. The tests may be both functional and logistical in nature and include vertical testing. Vertical testing tests for aspects of the new NF such as claimed compatibility with the underlying hardware, software or virtualization platforms. These tests can be provided to the operator by the 3GPP NF supplier. In addition, the operators may specify their own set of unit and acceptance tests for each NF.
  2. Integration tests: Integration tests refer typically to limited functionality horizontal test with other NF. For example, when a new SMF is delivered, it may be tested for expected functionality against existing AMFs. This naturally requires the combination of AMF and SMF to be tested together vertically with the underlying virtualization system (e.g. the ETSI NFV network service (NS) supporting the NFs).
  3. System tests: In the context of 3GPP NFs a system test could refer to testing the NFs functionining as part of a complete NSSI, NSI or communication service instance.
  4. _Operational tests: Once all the above test (1-3) are completed to the operator's requirement the network operator may still roll out the new version of the NF into the operational environment slowly in a step wise process. At every step more responsibility (for example: more UEs, more geographical area) is assigned to the new version of the NF in comparison with the old one. Eventually, if the new NF version performs well and all functions of the old NF version may be assigned to the new NF, effectively replacing the old NF._
This classification of tests represents conceptual points on the continuum of
tests' complexity for the purposes of this document. A network operator may
define his own tests anywhere along this continuum.
# 6 Use cases and solutions for automated delivery chains
6.1 Scenario X: The operator is notified of the delivery of a new NF version
from the NF supplier
6.1.1 Description
{width="6.411111111111111in" height="0.9048611111111111in"}
**Figure** **1 A New NF is released**
_The NF supplier publishes a new release of an NF used by the operator in
Figure 1. When a new release is published the operator's 3GPP management
system should become aware of its availability and fetch the newly released
version of the NF. There are two possibilities for this use case_
  1. _The 3GPP management system fetches the new release of the NF from a location provided by the NF supplier_
  2. _The 3GPP management system receives the newly released NF from the NF supplier_
Both cases should be supported.
6.1.2 Potential Requirements
**REQ-New_NF_CICD-1** : The 3GPP Management system should be aware of the
locations where any authorized NF suppliers provide notification of new
releases of the NFs.
**REQ-New_NF_CICD-2** : The 3GPP Management system should be able to receive
the new _release of the_ NF from an authorized NF supplier.
**REQ-New_NF_CICD-3** : The 3GPP Management system should be able to fetch the
new _release of the_ NF from the location provided by an authorized NF
supplier
6.1.3 Possible solutions
6 _._ 1.3.1 Alternate 1
As part of the business agreement to purchase the license to use the NF, the
NF supplier indicates to the network operator where to subscribe to receive NF
software updates. The operator's 3GPP Management system subscribes to the said
address to receive notifications of new NF versions. When the vendor internal
processes are completed, and an updated new _release of the_ NF is available
for the network operator to test and deploy, the vendor provides a
notification to the operator. The notification may include information such as
authentication, payment details and the requests of data for feedback, the
location on where to fetch the new NF version and the corresponding NF
information , the NF information may include details such as:
  * The NF type - example: AMF, SMF.
  * An globally unique identifier (e.g., VnfdId) for the new release of the NF and the corresponding release model information
  * An identifier (e.g., DN) of the NF which needs to be updated, if any.
  * A list of newly added optional features in the new release and the corresponding variables to enable/disable those features
  * The tests to be run on the NF as provided by the vendor -- with an an address to fetch those tests (e.g., the location in the VNF package)
  * Vendor information
  * An address where to send feedback to the NF supplier related to operator testing and use of the NF.
These details are used by both the test management system as well as the
network management layer to conduct acceptance-integration-system and
operational tests, respectively
## 6.2 Operational testing
### 6.2.1 Description
The Network Slicing feature in 5G provides telecom operators the capability to
support multiple logical networks on the common physical network
infrastructure. Each of these Logical networks will cater to different
services and might have different operational requirements spanning across
domains. Therefore, in addition to the 5G feature, it is important for
operators to have the flexibility to manage these logical networks
independently. Cloud Native based platform and tools which are widely used in
the IT world has inbuilt frameworks for agile and flexible deployment. These
platforms are increasingly becoming the de-facto choice for 5G Telecom
Products. This highlights the importance of bringing many Cloud Native
benefits like CI-CD that are essential for automation and flexibility of 5G
networks. CI-CD automates and integrates the development phase, testing phase
and deployment phase to improve feature velocity. Enabling CI-CD in 5G
networks which includes the most transaction-intensive and time-sensitive RAN
network functions is still a challenge. Dynamic software upgrades and live
testing of 5G software components in production environment without service
interruptions remains the main challenge that need to be solved for enabling
CI-CD in 5G networks.
The ability to test the upgraded network nodes in the operational network will
increase the agility of 5G networks. Slicing and virtualization can be used to
assist in live testing. A test network slice instance or a test NF can be
created/deployed, using the upgraded network functions, for testing purpose.
The basic principles of the operational testing are:
  * Test network slice instance or test NF creation with appropriate information e.g., test cases, test duration, target network nodes etc.
  * Automatic UE selection: The set of UEs to be assigned to the test network slice instance or the test NF instance can be selected and updated over time to minimize the adverse effects of testing. The UEs can be selected based on any network or UE characteristics, such as current load of the network, location of the network nodes, UE mobility or dual connectivity etc.
  * Deployment location selection for the upgraded node: The location of the upgraded node can be selected to minimize the adverse impact of testing. The location of the Networks nodes that needs to be upgraded and tested can be selected based on load conditions of the Network nodes at a given location. The location of the node can also be based on the availability of UEs for testing in each location.
Furthermore, such operational testing could be further automated. When a new
version of NF is delivered to the operator that has passed all tests and can
now be rolled out into the operational network the roll out could be combined
with operational testing. This means that the new NF could be installed in the
operational network without being initially being used at all. If the
installation proceeds correctly then a small portion of the cases (examples:
UEs or events or requests) that were handled by the old NF version can now
automatically be assigned to the new NF version. If the new NF performs well
and no failures occur further entities could incrementally be assigned to the
new NF till eventually the old NF has no cases to handle and is rendered
redundant. At this point the old NF could be uninstalled and removed from the
operational network. In case of error or insufficient performance the system
rolls-back to the old NF.
### 6.2.2 Requirements
**REQ-CICD-OP-FUN-1** The 3GPP Management system shall be able to support
testing the upgraded software in the live network.
**REQ-CICD-OP-FUN-2** The 3GPP Management system shall be able to support
creating/deploying a slice for testing the upgraded network functions in the
live network.
**REQ-CICD-OP-FUN-3** The 3GPP Management system shall be able to support
selecting appropriate UE(s) to be assigned to the test slice minimizing the
service impacts, if any.
**REQ-CICD-OP-FUN-4** The 3GPP Management system shall be able to support
selecting appropriate location for the upgrade network functions deployment
minimizing the service impacts, if any.
REQ-CICD-OP-FUN-5: The 3GPP Management system should support configurations
that enable the automated roll-out of new NFs into the operational environment
while performing operational tests.
REQ-CICD-OP-FUN-6: The 3GPP Management system should support the roll-back of
new NFs to the previous version in an operation environment.
### 6.2.3 Possible Solutions
#### 6.2.3.1 Alternate 1 -- Test utilizing slicing
##### 6.2.3.1.1 Overview
The solution involves creating/instantiating a test entity (NSI, NSSI or a NF)
exclusively for testing purpose triggered by a software upgrade procedure. The
test entity will include information related with the testing including
Managed Function to be tested, test duration, test case etc.
The appropriate UE(s) are assigned to this test entity minimizing the service
impacts. **UEs can be selected based on the location of the network nodes
where the upgraded software is to be deployed. UEs can also be selected based
on the UE characteristics like UE mobility and UE capabilities like dual
connectivity or can just be percentage of available UEs**
**The location of the networks nodes that needs to be upgraded and tested can
be selected based on load conditions of the Network nodes at a given time. The
location of the node can also be based on (not limited too) the availability
of UEs for testing in each location.**
##### 6.2.3.1.2 Details
The solution requires the ability to indicate that a particular test entity
instance is meant for testing purpose. This will include enabling information
like list of nodes to be tested, test duration, procedures (e.g., rrc
connection setup, handover etc) to be tested etc.
Once the test network entity is instantiated, the UE(s) can be assigned to
this entity. The UEs selected for testing can be:
\- Based on UE capability
\- Carrier aggregation, Dual connectivity capability.
\- Based on UE characteristics
\- Based on User Mobility (which can be determined based on UEmobilityLevel).
\- Based on UE RRC_State (which can be determined based on the UE history
information stored with the operator)
\- Any Percentage of available UE
The testing location of the new node can be critical in terms of minimizing
the service experience and maintain better use experience. Selection of
deployment location of the test software in the field can be based on
\- the availability of radio and cloud resources;
\- the availability of UE selected; and
\- any other operator defined restrictions.
6.2.3.2 Alternate 2 -- Test of NF utilizing slicing
6.2.3.2.1 Overview
The solution involves creating/instantiating a network slice exclusively for
testing an updated version of an NF. An existing network slice is duplicated
and modified to contain the updated version of an NF. A selected number of UEs
are then allowed to use this network slice.
The procedure to be used depends on whether the NF is a physical network
function or a virtualized network function.
6.2.3.2.2 Test of physical network function
To test an updated version of a PNF, the operator (or an automated test
management system) selects an existing network slice which contains the
previous version of the PNF. The operator reads the management model for the
existing network slice, to find the NetworkSliceSubnet (TS 28.541) which
refers to the PNF.
The network operator instantiates a new physical network element which
contains the updated PNF. The network operator creates a duplicate of the
NetworkSliceSubnet and modifies the new NetworkSliceSubnet to refer to the
updated PNF.
The network operator creates a new network slice in the 3GPP Management
System. The new network slice is a duplicate of the existing network slice,
except that the original NetworkSliceSubnet which refers to the PNF is
replaced by the new NetworkSliceSubnet which refers to the new PNF. The new
network slice is configured with an S-NSSAI which is not already used in the
network.
The network operator selects a number of UEs which will use the new network
slice. These UEs may be automated test generators or may be a certain set of
actual customer UEs. The network operator provisions these UEs (using BSS
subscription management) with the S-NSSAI of the new network slice. The
network operator activates the new network slice.
During the testing period, the network operator monitors the performance
measurements and alarms from the new network slice to determine the
performance of the new network slice. The network operator investigates any
anomalies to check if they are related to the new version of the PNF.
At the end of the test period, the network operator may choose to delete the
new network slice from the 3GPP Management System and remove the new physical
network element which contains the updated PNF. Alternatively, the network
operator may choose to delete the old network slice use the new network slice
as its replacement.
Note that if the operator uses an automated test management system to conduct
the testing, then the operator needs to instruct the automated test management
system on how to connect to the 3GPP Management System (addressing, access
keys, etc). The operator needs to specify which network slice shoud be used as
the basis for testing. The automated test management system uses this
information to read and write provisioning data to the 3GPP Management System
and to collect alarms, performance measurements and KPIs.
6.2.3.2.3 Test of virtualized network function
To test an updated version of a VNF, the operator (or an automated test
management system) selects an existing network slice which contains the
previous version of the VNF. The operator reads the management model for the
existing network slice, to find the Network Service Descriptor (NSD) which is
identified by the attribute nsInfo in NetworkSliceSubnet (TS 28.541).
The network operator creates a duplicate of the NSD and modifies the new NSD
to refer to the VNFD of the updated VNF. The operator onboards the new NSD and
the new VNFD to the MANO system.
The network operator creates a new network slice in the 3GPP Management
System. The new network slice is a duplicate of the existing network slice,
except that the nsInfo in NetworkSliceSubnet refers to the new NSD. The new
network slice is configured with an S-NSSAI which is not already used in the
network.
The network operator selects a number of UEs which will use the new network
slice. These UEs may be automated test generators or may be a certain set of
actual customer UEs. The network operator provisions these UEs (using BSS
subscription management) with the S-NSSAI of the new network slice. The
network operator activates the new network slice.
During the testing period, the network operator monitors the performance
measurements and alarms from the new network slice to determine the
performance of the new network slice. The network operator investigates any
anomalies to check if they are related to the new version of the VNF.
At the end of the test period, the network operator may choose to delete the
new network slice from the 3GPP Management System and remove the new NSD and
new VNFD from the MANO system. Alternatively, the network operator may choose
to delete the old network slice use the new network slice as its replacement.
Note that if the operator uses an automated test management system to conduct
the testing, then the operator needs to instruct the automated test management
system on how to connect to the 3GPP Management System (addressing, access
keys, etc). The operator needs to specify which network slice shoud be used as
the basis for testing. The automated test management system uses this
information to read and write provisioning data to the 3GPP Management System
and to collect alarms, performance measurements and KPIs.
### 6.2.4 Solution for automated roll-out
The operator may configure a "roll-out plan" for any new version of a 3GPP NF.
The roll-out plan may contain the following information
  * The increments to assign cases (example: UEs, requests etc) to the new version of the NF. For example, in case a new version of NSSF is available: As a first increment 10% of the request for slice selection could go to the new version of the NSSF, in a second increment this could be increased to 20%.
  * The conditions or thresholds to be met by the system to change from on increment to the next. For example: if there are no errors in the New version of the NSSF for the next 30 days move the increment 2.
  * Other performance KPIs
  * Conditions that signal a failure and may require a roll-back of the new NF. For example: Significantly higher drop rate for UEs assigned by the new version of the NSSF.
Based on such a roll-out plan and on being triggered by the conditions in the
network the 3GPP management may configure the cases in the core network. For
example: the selection of NSSF probability could be configured in the NRF.
## 6.3 Feature selection
An NF upgrade may provide the operator with several new features in the new
version of the NF. In such a case it should be possible for the network
operator to switch on or off the features that the operator doesn't wish to
use or features that cannot be supported in the operator network due to
technical considerations. For example, if Network function gNB-CU is upgraded
with features X, Y, Z but feature Y has dependency on the NG interface with
5GC. In this case, only feature X, Z should be tested and enabled in the
operational network till the 5GC is also upgraded with feature Y.
### 6.3.2 Requirements
**REQ-CICD-FS-FUN-1** The 3GPP Management system shall be able to support
partial feature testing of the upgraded network functions.
**REQ-CICD-FS-FUN-2** The 3GPP Management system shall be able to activate and
deactivate certain features of an NF in an operational network.
### 6.3.3 Possible Solutions
#### 6.3.3.1 Alternate 1
Each NF has a version number already represented in its NRM as each NF is a
child class of the ManagedElement defined in TS28.622. In addition, and
associated to the version number, is list of optional features that the
appropriate management service (example: provisioning service in an
operational environment or the test management service in the testing
environment is able to enable or disable). This association can be a part of
the NF NRM with a binary state of enabled or disabled on each per feature in
the feature list
.
## 6.4 Test task and test case management
### 6.4.1 Description
_Network operator_ _may want to test all newly delivered NFs . The test could
be any set of unit and acceptance tests, integration or sytems tests which are
carried out automatically when a new version of NF is delivered to the network
operator. The network operator may arrange relevant test cases in one test
task, and should have the possibility of adding, reading, updating and
deleting tests tasks, or adding, reading, updating and deleting test cases in
one test task to its internal process. These tests are run automatically over
every new version of the NF._
### 6.4.2 Potential Requirements
**REQ-CICD_TT-FUN-1** : The 3GPP Management system should have the ability to
allow CRUD operations on test tasks and test cases on a per NF basis to the
authorized consumer.
**REQ-CICD_TT-FUN-2** : The 3GPP Management system should have the ability to
automatically run tests associated to an NF by an authorized consumer when a
new version of the said NF is delivered to the _s_ ervice provider.
.
### 6.4.3 Possible Solutions
#### 6.4.3.1 Alternate 1
_To allow for CRUD operations of test. A solution is to add a test management
service that can associate tests to a particular or yet to come NF version in
a test inventory. When the new NF version is delivered, the tests that are
assigned to the NF version are automatically executed in the testing
environment. The order of test execution may be specified for enabling the
correct orchestration of tests._
6.5 Feedback to vendor
6.5.1 Description
_The network operator may conduct different steps during CI-CD procedure, like
verification, testing, deployment and so on when receiving the delivered NF
from 3GPP NF supplier. During each step there may be problems (e.g. testing
failure) happened or other useful information that need to feedback to the NF
supplier. The network operator will combine the reported errors and netwok
operation data to diagnose the problems and ask the NF supplier to make
improvements. The network operator can also feedback other related
information, like problem description, logs and so on to assist the
improvement._
6.5.2 Potential Requirements
**REQ-CICD_VF-FUN-1** : The 3GPP Management system should have the ability to
feedback the NF software problem during CI-CD procedure, related network
environment information and certain adjustment requirements to the 3GPP NF
supplier.
**REQ-CICD_VF-FUN-2: The 3GPP Management system should have the ability to
feedback data according to NF supplier's request.**
6.5.3 Solution Alternate 1
After analysing and _diagnose problems, 3GPP management system filters and
extracts the NF related information by sorting out the analysis results and
reports during CI-CD procedure, e,g, removing user specific information , and
then deliver the feedback to_ NF supplier _s through subscription/notification
mechanism._
_NF supplier can subscribe the feedback event generated by 3GPP management
system so that the NF supplier knows how to receive the feedback. The
notification should contain the NF information (e.g. NF version id, NF type),
description of the problem happened during operator CI-CD procedure, time
stamp (e.g. the time when the problem occurred, the duration of the problem),
analysis report, the address to fetch logs, related network environment data
and so on. If the_ NF supplier provides other requirements for the content of
the feedback, then the notification should include such information
accordingly. A _new MnS can be introduced in_ 3GPP _management system to
achieve the feedback scenario with the following capabilities:_
  * _Obtain the analysis results and reports, filter and extract the NF related information_
  * _Remova sensitive data , data deduplication and other necessary data processing for the NF related information_
  * Generate notification with feedback to vendors after data processing
## 6.6 Environment Data Collection
### 6.6.1 Description
_When conducting testing or in NF operation and maintenance, there may happen
test failure, fault or other problems, the network operator will sustain to
monitor network running status, collect network data, and use collected
environment data to analyze and diagnose problems. The environment data can be
obtained from fault supervision, performance management, NWDA, MDA and etc. To
fulfil the automatic CICD chains, the network operator should filter the
related data and may feedback them to the NF supplier according to analysis
results or NF supplier's requests. This function can interact with 3GPP other
MnFs to get data._
### 6.6.2 Potential Requirements
**REQ-CICD_EDC-FUN-1** : The 3GPP Management system should have the ability to
collect test-related information.
**REQ-CICD_EDC-FUN-2:** The 3GPP Management system should have the ability to
provide data to external CICD related systems..
### 6.6.3 Possible Solutions
#### 6.6.3.1 Alternate 1
The 3GPP management system needs to collect and manage test-related data for
supporting CICD automation, such as test status, test results. When the test
fails, 3GPP management system can use the data to position problem and analyse
root cause. After tests passed, the 3GPP management system will involve the NF
as part of operational network and keep continuous monitoring and collecting
performance data and fault data from _fault supervision, performance
management service_.
It is recommended that 3GPP management system has a new MnS for the following
responsibilities:
  * Collecting test related data
  * Providing the collected test data to the analysis management service (i.e. MDAS) for positioning problem and analysing root cause if needed.
  * Obtaining logs, configurations, fault information, performance information and othe information that are related to a specific NF from _fault supervision, performance management service and etc_.
  * Providing data to external CICD related system when it requests the test data or other environment information.
## 6.7 Test orchestration
### 6.7.1 Description
After the NFs are delivered, there have mulitiple kinds of test cases
(functional testing, performance testing and so on) to be conducted, the
network operator will construct test tasks, determine the execution order of
test cases, allocate and reseve resources to support testing based on test
types and requirements.
### 6.7.2 Potential Requirements
**REQ-CICD_TO-FUN-1** : The 3GPP Management system should have the ability to
provide network resource status and relevant information to external CICD
related systems for assisting test orchestration.
### 6.7.3 Possible Solutions
#### 6.7.3.1 Alternate 1
## 6.8 Simulated testing
### 6.8.1 Description
While system tests are expensive to perform, they do not represent the real
operational network. Therefore, the gap between a system test and an
operational network, especially in telecommunication network, maybe be a
rather large one.
To overcome this the operator may perform system testing in a (partially)
simulated environment of the live operational network or a recording of the
operational network based on specific events that the operator may want to
test against. A new version of the NF may replace the old NF in the simulated
environment and help the operator simulate how the new NF would perform in the
operational network.
### 6.8.2 Potential Requirements
**REQ-CICD-SE_FUN-1: The 3GPP management should provide to authorized consumer
the capability to configure the level of details required to create a
simulation of the operational network.**
**REQ-CICD-SE_FUN-2: The 3GPP management system should be able to periodically
provide to authorized consumers the information required to simulate the
operational network.**
**REQ-CICD-SE_FUN-3: The 3GPP management system should be able to record the
information required to create a simulation of the operational network.**
6.8.3 Possible solution
The 3GPP management system provides configurable parameters relating to
network and managed entity state and other relevant data to help maintain the
simulated environment which is as close as possible to the operational
network. The entity responsible for mantaining the simulated network copy
subscribes to the 3GPP management system to receive such changes in the 3GPP
network.
In certain cases the operator or another authorized entity may configure
events in the 3GPP network -- for example failure of an NF -- that result in
the 3GPP management system saving relevant information, as configured by the
authorized entity, to help recreate the network simulation at a later point in
time.
In these simulation environment the old version of the NF can be replaced by
the new NF version to conduct the simulated testing.
## 6.9 Test data analysis
### 6.9.1 Description
During the conduct of testing in operational environment, there will have
related network operations data and other environment data along with test
results. When test fails (e.g. a performance testing under a test slice), 3GPP
system can use these data to prelimary analyse where the problem is. If the
analysis results show it is the problem of the NF, the network operator can
send the improvement suggestions, problem description and relevant environment
data to the NF supplier.
### 6.9.2 Potential Requirements
**REQ-CICD_TDA-FUN-1** : The 3GPP Management system should have the ability to
analyse test related data and provide analysis results.
### 6.9.3 Possible Solutions
#### 6.9.3.1 Alternate 1
The 3GPP management system analyses test-related data, this solution suggets
to define a new MDAS capability to do the test data analysis.
## 6.10 Network function health analysis
### 6.10.1 Description
During normal operation, analysis of performance data and alarms may indicate
implementation problems in particular network functions. If the analysis
results show a problem with a particular NF, the network operator can send the
improvement suggestions, problem description and relevant environment data to
the NF supplier.
This same type of analysis may also be useful during operational testing of a
new or updated NF.
### 6.10.2 Potential Requirements
**REQ-CICD_NFH-FUN-1** : The 3GPP Management system should have the ability to
analyse management data to detect implementation problems related to network
functions.
### 6.10.3 Possible Solutions
#### 6.10.3.1 Alternate 1
It is proposed to define a new MDAS capability to perform analysis on the
health of the managed network. The new MDAS capability would analyze
performance data and alarms and report on possible problems.
There are many possible causes of network problems, and these include
implementation problems related to individual network functions. Other types
of problems are outside the scope of this study. Possible NF-related problems
may for example typically be found with a performance indicator of the NF that
is significantly different to NFs in a similar setting. The problems that may
be reported include:
  * Unexpected UE behaviour
  * Unexpected traffic loss or unexpected traffic rejection
  * Unexpected NF load
  * Inefficient use of infrastructure resources
  * Unnecessary use of resources (resource leaks)
  * Slow response to scaling requests or rejected scaling requests
  * Any unexpected or exceptional performance indicator
# 7\. Proposed Process for Multi-Vendor CI-CD
# 8 Conclusions and Recommendations
The process described in Section 7 puts several requirements on the NF as well
as the 3GPP management system which should be further standardized to enable
cross-vendor automation of the CI-CD and testing pipelines.
**Recommendation 1:** A newly delivered NF should have significant
standardized supporting information to help the 3GPP management system
identify the prioritization of tests relevant to the new NF and how to include
the tested NF in operations. Examples of this information include:
  * The NF types
  * The previous NF it replaces
  * The new list of optional features and the corresponding variables to enable/disable those features
  * The tests to be run on the NF as proposed by the vendor
  * Vendor information
  * Feedback address
Further work is required to specify an exhaustive list of such information.
**Recommendation 2:** For R18 3GPP SA5 needs to study software management
aspects. Examples include:
  * What information is needed in a software inventory
  * How and where are NF versions stored
  * How are they maintained -- for example: updated and replaced
**Recommendation 3:** 3GPP SA5 should work of specifying the following
management functions/capabilities for management system:
  * indicate a prioritization of tests for the CI-CD and operational testing and maintain information such as which tests are relevant for which NF
  * Test task and test case management, test orchestration
  * Uniformly collect and handle testing related data, be responsible for data fiter and processing to support the feedback to vendor
  * Collec an maintain information that may need to be provided to the 3GPP NF supplier, examples include:
    * _NF identifier_
    * _Test results_
    * _Description of problem_
    * _Time stamp (e.g. the time when the problem occurred, the duration of the problem)_
    * _Analysis report_
    * _Address of logs_
Further work is required to specify an exhaustive list of such information.
**Recommendation 4:** 3GPP SA5 should work of specifying enablers and
solutions to perform and automate operational , feature and simulated testing
to further enhance operator confidence and enable automatic rollout of the new
NF version into the operational environment.
## Annex \ (normative): \
## Annex \ (informative): \
# B.1 Heading levels in an annex
Heading levels within an annex are used as in the main document, but for
Heading level selection, the \"A.\", \"B.\", etc. are ignored. e.g. **B.1.2**
is formatted using **_Heading 2_** style.
###### ###
## Annex \ (informative): Change history
* * *
**Change history**  
**Date** **Meeting** **TDoc** **CR** **Rev** **Cat** **Subject/Comment** **New
version** 2021-05 SA5-137e S5-213059 Initial Skeleton 0.0.0 2021-05 SA5-137e
S5-213568 pCT 28.819 Add scope  
2021-05 SA5-137e S5-213144 pCR 28.819 Add NGMN Background  
2021-05 SA5-137e S5-213569 pCR 28.819 Add Explanation for related work in ETSI  
2021-05 SA5-137e S5-213570 pCR 28.819 Add Roles relevant to the study  
2021-05 SA5-137e S5-213216 Add Scenario on Supplier NF delivery  
2021-05 SA5-137e S5-213571 pCR 28.819 Usecase and requirements for CI-CD  
2021-05 SA5-137e S5-213291 pCR 28.819 Add Explanation for Single and Multiple
NF Suppliers CI-CD  
2021-05 SA5-137e S5-213670 Latest draft TR 28.819 0.1.0 2021-09 SA5-138e
S5-214498 pCR TR 28.819 Add test classifications  
2021-09 SA5-138e S5-214647 pCR 28.819 add use case on tests CRUD  
2021-09 SA5-138e S5-214648 pCR 28.819 Split operational testing scenario  
2021-09 SA5-138e S5-214500 pCR 28.819 add use case to provide vendor feedback  
2021-09 SA5-138e S5-214502 pcr 28.819 correct title  
2021-09 SA5-138e S5-214751 Latest draft TR28.819 0.2.0 2021-10 SA5-139e
S5-215527 pCR 28.819 solution for Dynamic software update and live testing  
2021-10 SA5-139e S5-215528 Add test task CRUD in 6.4 Tests' management  
2021-10 SA5-139e S5-215529 pCR 28.819 Definition of test orchestration and
test task  
2021-10 SA5-139e S5-215615 pCR 28.819 Use case of environment data collection  
2021-10 SA5-139e S5-215614 pCR 28.819 Supplement to the use case of providing
vendor feedback  
2021-10 SA5-139e S5-215616 pCR 28.819 Use case of test orchestration  
2021-10 SA5-139e S5-215413 pCR - 28.819 solution for new NF delivery  
2021-10 SA5-139e S5-215414 pCR - 28.819 solution for feature selection  
2021-10 SA5-139e S5-215415 pCR - 28.819 Add test management service  
2021-10 SA5-139e S5-215416 pCR - 28.819 add operational testing in
classification  
2021-10 SA5-139e S5-215634 Latest Draft TR28.819 0.3.0 2021-11 SA5-140e
S5-216587 pCR 28.819 Providing detailed information for testing an NF  
2021-11 SA5-140e S5-216588 pCR 28.819 Automated operational testing  
2021-11 SA5-140e S5-216249 pCR 28.819 Supplement for notification data  
2021-11 SA5-140e S5-216379 pCR 28.819 Add release model details  
2021-11 SA5-140e S5-216589 pCR 28.819 Solution of providing vendor feedback  
2021-11 SA5-140e S5-216590 pCR 28.819 Solution of environment data collection  
2021-11 SA5-140e S5-216592 pCR 28.819 Use case of test data analysis  
2021-11 SA5-140e S5-216366 pCR 28.819 Rapp Cleanup  
2021-11 SA5-140e S5-216593 pCR - 28.819 Add intial recomendations  
2021-11 SA5-140e S5-216626 pCR 28.819 Describe ETSI NFV testing framework  
2021-11 SA5-140e S5-216609 Latest Draft 28.819 0.4.0 2021-02 SA5-141e
**S5-221715** pCR 28.819 update notified of new NF version scenario  
2021-02 SA5-141e **S5-221440** pCR 28.819 Remove EN in Section 6.1.3  
2021-02 SA5-141e **S5-221211** **pCR 28.819 Add use case for test of NF
utilizing slicing**  
2021-02 SA5-141e **S5-221212** pCR 28.819 Add use case for network function
health analysis  
2021-02 SA5-141e **S5-221716** pCR 28.819 CI-CD process updates  
2021-02 SA5-141e **S5-221214** pCR 28.819 clarify feedback to vendor scenario  
2021-02 SA5-141e **S5-221435** pCR 28.819 Add Intro  
2021-02 SA5-141e **S5-221436** pCR 28.819 Update to feature selection solution  
2021-02 SA5-141e **S5-221437** pCR 28.819 Update Simulation Testing with
solution