# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
Z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is 3^rd^ part of a multi-part conformance test
specification for UE and is _valid for 3GPP Release 5 and above_. The
specification contains a TTCN design frame work and the detailed test
specifications in TTCN for the UE conformance at the Gm reference point.
3GPP TS 34.229-1 [5] contains a conformance test description in prose for 3G
and 4G.
3GPP TS 34.229-2 [6] contains a pro-forma for the UE Implementation
Conformance Statement (ICS).
3GPP TS 34.229-3 the present document.
3GPP TS 34.229-5 [55] contains a conformance test description in prose for 5G.
# 1 Scope
The present document specifies the protocol conformance testing in TTCN for
the 3GPP User Equipment (UE) at the Gm interface.
The present document is the 3^rd^ part of a multi-part test specification,
3GPP TS 34.229. The following TTCN test specification and design
considerations can be found in the present document:
\- the overall test suite structure;
\- the testing architecture;
\- the test methods and PCO definitions;
\- the test configurations;
\- the design principles, assumptions, and used interfaces to the TTCN tester
(System Simulator);
\- TTCN styles and conventions;
\- the partial PIXIT proforma;
\- the TTCN files for the mentioned protocols tests.
The Abstract Test Suites designed in the document are based on the test cases
specified in prose (3GPP TS 34.229‑1 [5] and TS 34.229-5 [55]).
The present document is valid for UE implemented according 3GPP Releases
starting from Release 5 up to the Release indicated on the cover page of the
present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document in the same
Release as the present document unless the context in which the reference is
made suggests a different Release is relevant (information on the applicable
release in a particular context can be found in e.g. test case title,
description or applicability, message description or content).
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 34.123-1: \"User Equipment (UE) conformance specification; Part 1:
Protocol conformance specification\".
[3] 3GPP TS 34.123-2: \"User Equipment (UE) conformance specification; Part 2:
Implementation Conformance Statement (ICS) proforma specification\".
[4] 3GPP TS 34.123-3: \"User Equipment (UE) conformance specification; Part 3:
Abstract Test Suites (ATS)\".
[5] 3GPP TS 34.229-1: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 1:
Protocol conformance specification\".
[6] 3GPP TS 34.229-2: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 2:
Implementation Conformance Statement (ICS) specification\".
[7] 3GPP TS 34.108: \"Common test environments for User Equipment (UE)
conformance testing\".
[8] ISO/IEC 9646-1: \"Information technology - Open systems interconnection -
Conformance testing methodology and framework - Part 1: General concepts\".
[9] ISO/IEC 9646-7: \"Information technology - Open systems interconnection -
Conformance testing methodology and framework - Part 7: Implementation
Conformance Statements\".
[10] ETSI ETS 300 406 (1995): \"Methods for testing and Specification (MTS);
Protocol and profile conformance testing specifications; Standardization
methodology\".
[11] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[12] ETSI ES 201 873-1: \"Methods for Testing and Specification (MTS); The
Testing and Test Control Notation version 3; Part 1: TTCN-3 Core Language\".
[13] IETF RFC 3320: \"**Signalling Compression (SigComp)** \".
[14] IETF RFC 3485: \"**The Session Initiation Protocol (SIP) and Session
Description Protocol (SDP) Static Dictionary for Signalling Compression
(SigComp)** \".
[15] IETF RFC 3486: \"**Compressing the Session Initiation Protocol (SIP)**
\".
[16] IETF RFC 3261: \"**SIP: Session Initiation Protocol** \".
[17] IETF RFC 4566: \"**SDP: Session Description Protocol** \".
[18] IETF RFC 1035: \"**Domain names - implementation and specification** \".
[19] IETF RFC 1533: \"**DHCP Options and BOOTP Vendor Extensions** \".
[20] IETF RFC 2131: \"**Dynamic Host Configuration Protocol** \".
[21] IETF RFC 3315: \"**Dynamic Host Configuration Protocol for Ipv6
(DHCPv6)** \".
[22] IETF RFC 3319: \"**Dynamic Host Configuration Protocol (DHCPv6) Options
for Session Initiation Protocol (SIP) Servers** \".
[23] IETF RFC 3361: \"**Dynamic Host Configuration Protocol (DHCP-for-Ipv4)
Option for Session Initiation Protocol (SIP) Servers** \".
[24] IETF RFC 3680: \"**A Session Initiation Protocol (SIP) Event Package for
Registrations** \".
[25] 3GPP TS 24.173: \"IMS multimedia telephony communication service and
supplementary services; Stage 3\".
[26] IETF RFC 4825: \"The Extensible Markup Language (XML) Configuration
Access Protocol (XCAP)\".
[27] IETF RFC 2616: \"Hypertext Transfer Protocol -- HTTP/1.1\".
[28] 3GPP TS 36.523-1: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
and Evolved Packet Core (EPC); User Equipment (UE) conformance specification;
Part 1: Protocol conformance specification\".
[29] 3GPP TS 36.523-2: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
and Evolved Packet Core (EPC); User Equipment (UE) conformance specification;
Part 2: Implementation Conformance Statement (ICS) proforma specification\".
[30] 3GPP TS 36.523-3: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
and Evolved Packet Core (EPC); User Equipment (UE) conformance specification;
Part 3: Test suites\".
[31] 3GPP TS 36.508: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Packet Core (EPC); Common test environments for User Equipment (UE)
conformance testing\".
[32] 3GPP TS 24.173: \"IMS Multimedia telephony communication service and
supplementary services; Stage 3\".
[33] 3GPP TS 24.109: \"Bootstrapping interface (Ub) and network application
function interface (Ua); Protocol details\".
> [34] 3GPP TS 33.220: \"Generic Authentication Architecture (GAA); Generic
> Bootstrapping Architecture\".
>
> [35] 3GPP TS 33.222: \"Generic Authentication Architecture (GAA); Access to
> network application functions using Hypertext Transfer Protocol over
> Transport Layer Security (HTTPS)\".
>
> [36] 3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access
> Protocol (XCAP) over the Ut interface for Manipulating Supplementary
> Services \".
[37] RFC 2617: \"HTTP Authentication: Basic and Digest Access
Authentication\".
[38] RFC 3966: \"The tel URI for Telephone Numbers\".
> [39] RFC 2141: \"URN Syntax\".
>
> [40] 3GPP TS 24.604: \"Communication Diversion (CDIV) using IP Multimedia
> (IM) Core Network (CN) subsystem; Protocol specification\".
>
> [41] 3GPP TS 24.607: \"**Originating Identification Presentation (OIP)** and
> **Originating Identification Restriction (OIR)** using IP Multimedia (IM)
> Core Network (CN) subsystem; Protocol specification\".
>
> [42] 3GPP TS 24.608: \"**Terminating Identification Presentation** (**TIP)**
> and **Terminating Identification Restriction (TIR)** using IP Multimedia
> (IM) Core Network (CN) subsystem; Protocol specification\".
>
> [43] 3GPP TS 24.611: \"Anonymous Communication Rejection **(ACR)** and
> **Communication Barring (CB)** using IP Multimedia (IM) Core Network (CN)
> subsystem; Protocol specification\".
[44] IETF RFC 4119 \"A Presence-based GEOPRIV Location Object Format\".
[45] IETF RFC 4575: \"A Session Initiation Protocol (SIP) Event Package for
Conference State\".
[46] IETF RFC 5628: \"Registration Event Package Extension for Session
Initiation Protocol (SIP) Globally Routable User Agent URIs (GRUUs)\".
[47] IETF RFC 3863 \"Presence Information Data Format (PIDF)\".
[48] IETF RFC 4745: \"Common Policy: A Document Format for Expressing Privacy
Preferences\".
[49] 3GPP TS 27.007: \"AT command set for 3G User Equipment (UE)\".
[50] 3GPP TS 34.229-4: \"User Equipment (UE) conformance specification; Part
4: Enabler for IP multimedia applications testing\".
[51] 3GPP TS 24.237: \"IP Multimedia (IM) Core Network (CN) subsystem IP
Multimedia Subsystem (IMS) Service Continuity\".
[52] 3GPP TS 31.121: \"UICC-terminal interface; Universal Subscriber Identity
Module (USIM) application test specification\".
[53] 3GPP TS 24.390: \"Unstructured Supplementary Service Data (USSD) using IP
Multimedia (IM) Core Network (CN) subsystem IMS\".
[54] 3GPP TS 38.523-3: \"5GS; UE conformance specification; Part 3: Protocol
Test Suites\".
[55] 3GPP TS 34.229-5: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 5:
Protocol conformance specification using 5G System (5GS)\".
[56] 3GPP TS 38.508-1: \"5GS; User Equipment (UE) conformance specification;
Part 1: Common test environment\".
[57] ETSI ES 201 873-9: \"Methods for Testing and Specification (MTS); The
Testing and Test Control Notation version 3; Part 9: Using XML schema with
TTCN-3\".
[58] IETF RFC 4479: \"A Data Model for Presence\".
[59] IETF RFC 8147: \"Next-Generation Pan-European eCall\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1], TS 34.229-1 [5] and TS 34.229-5 [55] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1], TS 34.229-1 [5] and TS 34.229-5 [55] apply.
# 4 Requirements on the TTCN development
A number of requirements are identified for the development and production of
TTCN specification for 3GPP UE at the Gm reference point.
1\. Top-down design, following 3GPP TS 34.229-1 [5], TS 34.108 [7], TS 36.508
[31], TS 34.229-5 [55], TS 38.508-1 [56].
2\. A unique testing architecture and test method for testing all protocol
layers of UE.
3\. Uniform TTCN style and naming conventions.
4\. Improve TTCN readability.
5\. Using TTCN-3 (ES 201 873-1 [12]).
6\. TTCN specification feasible, implementable and compilable.
7\. Test cases shall be designed in a way for easily adaptable, upwards
compatible with the evolution of the 3GPP core specifications and the future
Releases.
8\. The test declarations, data structures and data values shall be largely
reusable.
9\. Modularity and modular working method.
10\. Minimizing the requirements of intelligence on the emulators of the lower
testers.
11\. Giving enough design freedom to the test equipment manufacturers.
12\. Maximizing reuse of RFC BNF definitions from the relevant IETF core
specifications.
In order to fulfil these requirements and to ensure the investment of the test
equipment manufacturers having a stable testing architecture for a relatively
long period, a unique testing architecture and test method are applied to the
3GPP UE protocol tests.
# 5 Test method and test model
## 5.1 Test method
## 5.2 IMS CC test model
The test model over E-UTRA is shown in Figure 5.2-1a, the test model over
UTRAN is shown in figure 5.2-1b, the test model over WLAN is shown in figure
5.2-1c, the test model over fixed access is shown in figure 5.2-1d (NOTE: the
IPsec is not used by this model), and the test model over NR5GC is shown in
Figure 5.2-1e.
The IMS CC test cases are executed on top of the multi-testers test model
according to TS 36.523-3 [30] for E-UTRA, TS 34.123-3 [4] clause 6A for UTRAN
and TS 38.523-3 [54] for NR5GC.
Figure 5.2-1a: Multi-TestersTest Model to support E-UTRA SS interface
Figure 5.2-1b: Multi-Testers Test Model to support UTRAN SS interface
Figure 5.2-1c: Multi-Testers Test Model to support WLAN SS interface
Figure 5.2-1d: Multi-Testers Test Model to support fixed access SS interface
Figure 5.2-1e: Multi-Testers Test Model to support NR5GC SS interface
The IMS CC test cases run on the IMS-PTC which controls the IPCanEmu and the
IP-PTC. IPCanEmu is responsible for cell setup and DRB/RAB establishment and
the IP-PTC controls the IP related configurations. IPCanEmu and IP-PTC
interface to the SS according to TS 36.523-3 [30] or TS 34.123-3 [4] or TS
38.523-3 [54].
Clauses 4.2.4, 4.2.5 and 4.4.1.1 of TS 36.523-3 [30] describe the common
handling of IP data in the multi-testers model regarding IMS signalling. In
addition to support HTTP over TLS a TCP server may be established with
additional parameters for TLS which may be required for XCAP (depending on the
authentication mechanism to be applied for XCAP test case).
The test model extensions for support of XCAP are shown in Figure 5.2-2.
Clause 5.5 provides further information regarding support of XCAP.
Figure 5.2-2: Extended IP model to handle HTTP/XCAP data
NOTE: Figure 5.2-2 is just an example; further details are SS implementation
dependent.
### 5.2.1 Transport protocol
For SIP requests originated by the UE, the transport protocol in UL is
selected by the UE. This information is extracted in the TTCN-3 and used in
subsequent responses sent by the SS.
For SIP requests originated by the SS in DL UDP is used as transport protocol
at the test. For the purpose of test coverage, TCP is used in the specific
test cases as specified.
NOTE: According to RFC 3261 [16] clause 18.1.1 the server side (UE) has to be
able to cope with a maximum datagram size of 65,535 bytes (independent of any
guideline to restrict the maximum size of UDP packets at the client side).
### 5.2.2 IMS CC test cases over IP-CAN test model
The \"Enabler for IP multimedia applications testing\" is described in TS
34.229-4 [50]. In general IMS CC test cases can be run on this test model too
as test case implementation - in general - is independent of the test model.
The TTCN code for IMS and HTTP PTC is the same for TS 34.229-3 and TS 34.229-4
implementations whereas the MTC implementation is model specific. The
implementation of the MTC, the IP-CAN/IP adaptor and the MMI system interface
is part of TS 34.229-4 and out of scope for this document. Common interfaces
are documented in annex H of this document.
## 5.3 Upper Tester (UT)
The AT commands of TS 36.523-3 [30] Table 5.2 are used and in addition there
are IMS specific AT commands in Table 5.3-1. For all AT commands used in IMS
the principles of TS 36.523-3 [30] clause 5.1 apply.
Table 5.3-1: IMS specific AT commands
* * *
Command Reference AT+CASIMS TS 27.007 [49] AT+CCMMD TS 27.007 [49]
* * *
In addition to the common MMI commands of TS 36.523-3 [30] clause 5.2 there
are IMS specific MMI commands in Table 5.3-2.
Table 5.3-2: IMS specific MMI commands
+----------------------+----------------------+----------------------+ | Command | Parameters | | +======================+======================+======================+ | | Name | Value | +----------------------+----------------------+----------------------+ | ACTIVATE_IMS_TIR | (none) | | +----------------------+----------------------+----------------------+ | ACTIVATE_SUP | \"Su | \\ | | (NOTE 1) | | (NOTE 2) | +----------------------+----------------------+----------------------+ | | \"Mode\" | \"ACTIVATE\" \| | | | | \"DEACTIVATE\" | +----------------------+----------------------+----------------------+ | DEACTIVATE_IMS_TIR | (none) | | +----------------------+----------------------+----------------------+ | DEREGISTER | (none) | | +----------------------+----------------------+----------------------+ | IMS_ | (none) | | | INITIATE_CONFERENCE | | | +----------------------+----------------------+----------------------+ | IN | \"Uri\" | \ | | VITE_TO_CONFERENCE | | | +----------------------+----------------------+----------------------+ | LOCATION_INFO | (none) | | +----------------------+----------------------+----------------------+ | NO_PRECONDITIONS | (none) | | +----------------------+----------------------+----------------------+ | REFRESH | \"HomeDomain\" | \ | +----------------------+----------------------+----------------------+ | | \"PrivateUSerId\" | \ | +----------------------+----------------------+----------------------+ | | \"PublicUserId\" | \ | +----------------------+----------------------+----------------------+ | TRIGGER_SMS | (none) | | +----------------------+----------------------+----------------------+ | NOTE 1: Used in | | | | cases where there is | | | | no AT command to | | | | activate/deactivate | | | | a particular | | | | supplementary | | | | service. | | | | | | | | NOTE 2: | | | | \ =\ | | | | \"TERMINATING | | | | IDENTIFICATION | | | | RESTRICTION\"\ | | | | \"INCOMING | | | | COMMUNICATION | | | | BARRING EXCEPT | | | | SPECIFIC USER\"\ | | | | \"OUTGOING | | | | COMMUNICATION | | | | BARRING WHILE | | | | ROAMING\"\ | | | | \"INCOMING | | | | COMMUNICATION | | | | BARRING ANONYMOUS\" | | | +----------------------+----------------------+----------------------+
## 5.4 TTCN-3
TTCN is used as specification language. ES 201 873-1 [12] (TTCN-3) is applied
to the notation.
## 5.5 Support of XCAP
MTSI supplementary services (TS 24.173[25]) like communication barring (CB)
and communication diversion (CDIV) require the XCAP protocol (RFC 4825[26])
for transporting and manipulating XML documents in the network describing
these services. Test cases for these services are specified in e.g. TS
34.229-1 [5] clause 15. As shown in figure 5.2-2 the SS shall provide an XCAP
server to support XCAP test cases; the TTCN interface to this server is
specified in clause 6.5.
### 5.5.1 XCAP Server
Supplementary services are managed by the XCAP server in the simservs
documents according to TS 24.623 [36]. Test cases manipulating data related to
supplementary services are specified in e.g. TS 34.229-1 [5] clause 15. For
simplification of the TTCN implementation, the XCAP server functionality shall
be provided by the SS i.e. it is not implemented in the TTCN. Access to the
XCAP server can be distinguished into:
\- HTTP based transaction between the UE and the XCAP server
\- Initialisation and validation of the simservs document according to the
test cases
In addition the UE may exchange HTTP messages for authentication (depending on
the UE\'s security capabilities); see figure 5.5.1-1.
Figure 5.5.1-1: IMS CC test model
NOTE: In accordance to RFC 4825 clause 6.3 [26], the UE may use complex XPATH
expressions to modify the simservs document but this shall be handled by the
XCAP server; in the TTCN these expressions are not explicitly checked.
Furthermore test case implementation itself does not use complex XPATH
expressions to access the simservs document, but always considers the whole
document.
### 5.5.2 HTTP Signalling
RFC 4825 [26] specifies the protocol for accessing user data in the XCAP
server via HTTP requests. An HTTP request for an XCAP operation contains
basically three components:
\- Request line method, i.e. PUT, GET or DELETE
\- Request line uri - The XCAP expression to be evaluated to access the XCAP
document. The XCAP expression consists of the document selector followed by
the separator "\~\~" followed by the node selector pointing to the user data
to accessed or evaluated
\- body - Describing the value (an xml fragment) referenced by the XCAP
expression
Example 1
In order to set terminating-identity-presentation for user
sip:ob.stf160\@etsi.org, the UE sends following HTTP request:
PUT http://XCAP-
Server/simservs.ngn.etsi.org/users/sip%3Aob.stf160%40etsi.org/simservs.xml/\~\~
/simservs/terminating-identity-presentation/%40active
Body: true
If successful, the XCAP server responds with
HTTP/1.1 200 OK
Example 2
To get the value of terminating-identity-presentation for user
sip:ob.stf160\@etsi.org, the UE sends following HTTP request:
GET
/simservs/terminating-identity-presentation/%40active
If successful, the XCAP server responds with
HTTP/1.1 200 OK
Body: true
In this example
//XCAP-server/simservs.ngn.etsi.org/users/
sip%3Aob.stf160%40etsi.org/simservs.xml/-- **Document selector** for user .
\~\~ -- Document selector separator, see RFC 4825
/simservs/terminating-identity-presentation/%40active -- **Node selector**
pointing to the information in the XCAP server to be accessed. This is an
XPATH expression, see RFC 4825 section 6.3.
true -- Is the xml fragment (in this case very simple) to be set as value of
the XPATH expression
Following operations shall be implemented in the XCAP server, see RFC 4825.
G**ET** **\-- Returns the requested data as an XML fragment to be send to the
UE**
input parameters: charstring documentSelector, charstring xpathExpr
returns: XML fragment or XML document
**PUT** **\-- Builds an XML subtree or sets an attribute given by the
xmlFragment at the position pointed by the xpath expression**
input parameters: charstring documentSelector, charstring xpathExpr,
charstring xmlFragment or xmlDocument
**DELETE** **\-- Deletes an XML subtree or sets an attribute given by the
xmlFragment at the position pointed by the xpath expression**
input parameters: charstring documentSelector, charstring xpathExpr
## 5.6 Void
# 6 ASP definitions
This clause defines abstract system primitives (ASPs) for system interfaces
which are used additionally to the system interfaces defined in TS 36.523-3
[30], TS 34.123-3 [4] and TS 38.523-3 [54]. Further interfaces are documented
in annex H to support the IP-CAN test model according to TS 34.229-4 [50] but
these interfaces are not system interfaces in the scope of this document.
## 6.1 Void
## 6.2 Void
## 6.3 Void
## 6.4 Void
## 6.5 XCAP server ASP definitions
XCAP Layer ASPs are applicable to clause 5.2. and 5.6.
**Name** XCAP_REQ
* * *
**Port** XCAP_PORT  
**Comment** ASP type for sending a request to the external XCAP server
according to RFC 4825 [26]  
**Parameter Name** **Parameter Type** **Comment** method charstring GET, PUT,
DELETE or RESET xcapExpression charstring XCAP expression sent by the UE in
its http request line contentType charstring media type as contained in the
HTTP content type header (optional) xmlBody charstring XML fragment sent by
the UE in its http body or simservs document initialised by the test cases
(optional)
**Name** XCAP_RSP
* * *
**Port** XCAP_PORT  
**Comment** ASP type for sending the response to the XCAP_REQ from the XCAP
server to TTCN  
**Parameter Name** **Parameter Type** **Comment** errorInfo charstring string
indicating a system error (optional) contentType charstring media type as
contained in the HTTP content type header (optional) xmlBody charstring Result
returned by the XCAP server (optional)
# 7 Codec definitions for IP User Data
## 7.1 Introduction
SIP is a text-based protocol, thus the message exchange between the UE and the
SS are pure character strings. In the TTCN-3 ATS the messages are structured
and optimized to take the advantage of TTCN-3 functionality, and to make the
debugging and maintenance of the ATS easier.
## 7.2 General Aspects
IP user data for IMS conformance testing can be distinguished into:
1\. text based: SIP (including SDP and XML messages), HTTP (see clause 7.4)
2\. octetstring based: DHCP, DHCPv6, DNS (see clause 7.4)
In TTCN the following encoding information is used:
**Table 7.2-1: Encoding information (NOTE 2)**
Type definitions Encoding Encoding rule in TTCN-3
* * *
SMS_TypeDefs  
SMS_Declarations Tabular notated (NOTE 1) \"SMS Types\" SMS_UDH_Declarations
Tabular notated (NOTE 1) \"SMS_UDH Types\" DHCPv4_TypeDefs Tabular notated
(NOTE 1) \"DHCPv4-Codec\" DNS_TypeDefs Tabular notated (NOTE 1) \"DNS-Codec\"
LibSip_SIPTypesAndValues (see clause 7.3) \"SIPCodec\" LibSip_Common (see
clause 7.3) \"LibSip V3\" LibSip_SDPTypes (see clause 7.3) \"SDPCodec\"
HTTP_ASP_TypeDefs  
HTTP_ASP_Definitions (see clause 7.3) \"HttpCodec\"
NOTE 1: Tabular notated is performed by concatenation of all the present
fields in the TTCN-3 template.
NOTE 2: Encoding information is only needed for type definitions of peer-to-
peer signalling; encoding of ASPs used for system configuration or as co-
ordination messages between PTCs is out of scope for this document.
## 7.3 Requirements on abstract message syntax for IMS (SIP, SDP)
### 7.3.1 Type definition - Syntax / Semantic aspects
All given defined BNF grammars (e.g. the ABNF of RFC 3261) are unique. Thus
the syntax tree for each syntactically correct message derived with these
grammars are unique too and the parts of a message can be uniquely identified
(represented) by the terminal phrase belonging to a non terminal symbol and
its derivation path in the syntax tree.
The syntax tree of all given messages can be used to uniquely identify and
describe the parts of the messages. The leaves are the part of every message
and the nodes from the root to the leaves represent the sequence of rules to
be applied to derive that part
The IMS/SIP root message type is an ordered structured type, which is
represented as a record type in TTCN-3. For each grammar rule of the ABNF a
TTCN-3 record type is declared with the specific name of the rule. The
following rules are applied to the fields within a record:
\- A non-terminal symbol is declared as a record type for this symbol.
\- The order of the symbols in the rule are represented by an equal order of
the fields.
\- Repetitions are declared as \'set of\' or \'record of\' types.
\- Options are represented as optional record/set fields.
\- Alternatives are declared as union types.
### 7.3.2 Deviations of the type definition semantic
\- Most of the \'literals\' of a message (for example: the string \"Via\" or
\"v\" in the message header fields) are not represented.
\- The TTCN-3 charstring type is used where we stop structuring even if the
ABNF uses structured types. More details found in clause 8.3.3.
\- Wherever possible parts are mapped to their best type representation, e.g.
DIGIT based rules are mapped to integer type not to a charstring type.
\- All of the following delimiters (including preceding or following
whitespace) defined by the ABNF grammar to separate the parts of a message are
not represented (see note).
> STAR = SWS \"*\" SWS ; asterisk
>
> SLASH = SWS \"/\" SWS ; slash
>
> EQUAL = SWS \"=\" SWS ; equal
>
> LPAREN = SWS \"(\" SWS ; left parenthesis
>
> RPAREN = SWS \")\" SWS ; right parenthesis
>
> RAQUOT = \">\" SWS ; right angle quote
>
> LAQUOT = SWS \"\
> COMMA = SWS \",\" SWS ; comma
>
> SEMI = SWS \";\" SWS ; semicolon
>
> COLON = SWS \":\" SWS ; colon
>
> LDQUOT = SWS DQUOTE; open double quotation mark
>
> RDQUOT = DQUOTE SWS ; close double quotation mark
>
> HCOLON = *( SP / HTAB ) \":\" SWS
>
> SP = single space
>
> HTAB = tab
>
> SWS = sep whitespace
NOTE: If they are present within a pure charstring they will be handled like a
normal character and are still included.
\- Messages which are not of interest to the test suite are left undecoded as
a charstring and will not be further structured.
Further clarifications on the handling of delimiters are provided hereafter:
In many cases the TTCN-3 type definitions are of lower granularity than the
BNF and the codec shall consider the TTCN type definitions only. Therefore as
stated in the NOTE above the rules for handling of delimiters do not require
delimiters to be blindly removed from strings but the codec shall only deal
with the delimiters needed to encode/decode the TTCN-3 types; sub-structures
of the BNF being mapped to TTCN-3 charstrings need to be handled in TTCN and
are out of scope of the codec implementation.
Example 1:
According to the BNF Alert-Info is defined as
> Alert-Info = \"Alert-Info\" HCOLON alert-param *(COMMA alert-param)\ alert-
> param = LAQUOT absoluteURI RAQUOT *( SEMI generic-param )
The corresponding TTCN-3 type definition is
> type record AlertInfo { FieldName fieldName (ALERT_INFO_E),\
> AlertInfoBody_List alertInfoBody optional }\ type set of AlertInfoBody
> AlertInfoBody_List;\ type record AlertInfoBody { charstring url,\
> SemicolonParam_List genericParams optional }
⇒ LAQUOT and RAQUOT are delimiters of the URI field which shall be removed by
the codec in UL.
Example 2:
Some fields according to the BNF for SIP are defined as "(token LWS)/ quoted-
string", i.e. the field can be either a (case-insensitive) token or a quoted
string. In general in TTCN this can be mapped\ a) to a charstring or\ b) to a
union of two charstring (one for the token, one for the quoted string).\ In
case of a) the codec shall preserve the double-quotes for the quoted-string as
otherwise it cannot be distinguished from a token anymore which is vital when
case-sensitivity matters whereas in case of b) the double quotes shall be
removed.
### 7.3.3 Additional requirements for codec implementations (SIP/IMS Message
The SIP/IMS codec is based on a normalized encoding which is always produced
by an encoder. Decoder implementations, however, have to handle normalization
before, or when constructing the structured message value, e.g. long versus
compact form, whitespace compression, delimiter removal, same header grouping,
etc. All these aspects will be handled in the next clause.
#### 7.3.3.1 Differences between BNF - TTCN-3 Type Mapping
In normal cases the mapping is straight forward. Below you find the
exceptions, including potential examples.
\- The root message type is not a SIP-message but directly a Request or
Response type which is represented as a TTCN-3 record. All Method - Message
names (INVITE, BYE, ACK etc.) and all message header field names (To, From,
CallID, Cseq, Via etc.) are mapped to an enumerated type in TTCN-3 to simplify
the extension of new headers. During encoding, the long-form of these message
header fields is always used. The respective field in the header type is
restricted to values which are allowed.
+----------------------------------+--------------------------------------+ | BNF rules of RFC | TTCN-3 Type Mapping | +==================================+======================================+ | SIP-message = Request / Response | type record REGISTER_Request {...}, | | | | | | type record INVITE_Request {...}, | | | | | | type record PRACK_Request {...}, | | | | | | type record NOTIFY_Request {...}, | | | | | | type record UPDATE_Request {...}, | | | | | | ... | | | | | | type record Response {...} | +----------------------------------+--------------------------------------+
* * *
Method = INVITEm\ type enumerated Method { ACK_E, BYE_E, CANCEL_E, INVITE_E,
OPTIONS_E, REGISTER_E, ...} / ACKm\  
/ OPTIONSm\  
/ BYEm\  
/ CANCELm\  
/ REGISTERm\  
/ ...
* * *
\- The structure of the message header fields are mapped to a \"set \" type in
TTCN-3, because the order of these header fields is not mandatory. There is an
Unknown Header List given in the type system to decode unknown headers with ID
and Value.
+--------------------------+------------------------------------------+ | Message-header = ( | type **set** MessageHeader { | | | | | ... | ... | | | | | / Contact | Contact contact optional, | | | | | / Content-Disposition | ContentDisposition contentDisposition | | | optional, | | ... | | | | ... | | / Via | | | | Via via, | | / Warning | | | | Warning warning optional, | | / WWW-Authenticate | | | | WwwAuthenticate wwwAuthenticate | | / extension-header) CRLF | optional, | | | | | | UndefinedHeader_List | | | undefinedHeader_List optional | | | | | | } | +--------------------------+------------------------------------------+
\- The various parameter lists defined in the BNF are mapped and combined into
three different TTCN-3 sets of generic-param types. These types differ only in
their name: SemicolonParam_List, AmpersandParam_List, CommaParam_List to
distinguish between the relevant separators.
+----------------------------------+----------------------------------+ | Uri-parameters = *( \";\" | type set of GenericParam | | uri-parameter) | **SemicolonParam_List;** | +==================================+==================================+ | Authentication-Info = | type record AuthenticationInfo { | | \"Authentication-Info\" HCOLON | | | ainfo | FieldName | | | fie | | *(COMMA ainfo) | ldName(AUTHENTICATION_INFO_E), | | | | | | CommaParam_List ainfo | | | | | | } | +----------------------------------+----------------------------------+ | ainfo = nextnonce\ | type set of GenericParam | | / message-qop | **CommaParam_List** ; | | | | | / response-auth\ | | | / cnonce | | | | | | / nonce-count | | +----------------------------------+----------------------------------+ | Headers = \"?\" header *( \"&\" | type set of GenericParam | | header ) | **AmpersandParam_List** ; | +----------------------------------+----------------------------------+
\- Any more specific parameter rule (e.g. uri-param, user-param, lr-param ,
digest-cln, etc.) is simplified to the generic-param rule which will be mapped
as a record structure of two charstrings (ID and paramValue). This is
equivalent to a token with an optional generic value (token [ EQUAL gen-value
]).
+---------------------+--------------------------------+ | Digest-cln = realm\ | type record **GenericParam** { | | / domain\ | | | / nonce\ | charstring id , | | / opaque\ | | | / stale\ | charstring paramValue optional | | / algorithm | | | | } | | / qop-options\ | | | / auth-param | | +---------------------+--------------------------------+
\- In addition to the pure charstring as a base type, the TTCN-3 type system
provides base integer types which are unrestricted to the model e.g. the
portField, Cseq number, maxForward digit.
+---------------------------------------------+----------------+ | User = 1*( unreserved\ | **charstring** | | / escaped / user-unreserved\ | | | ) | | | | | | telephone-subscriber as defined in RFC 2806 | | +=============================================+================+ | password = *( unreserved\ | **charstring** | | / escaped\ | | | /\"&\"\ | | | / \"=\"\ | | | / \"+\"\ | | | / \"\$\"\ | | | / \",\"\ | | | ) | | +---------------------------------------------+----------------+
+-----------------------------+-------------+ | Port = 1*DIGIT | **integer** | +=============================+=============+ | Status-Code = Informational | **integer** | | | | | / Redirection | | | | | | / Success | | | | | | / Client-Error | | | | | | / Server-Error\ | | | / Global-Failure | | | | | | / extension-code | | +-----------------------------+-------------+
\- Where the same header type can appear multiple times within a message, they
will be decoded as a single header field, with multiple list elements. The
order of appearance of the headers will be preserved within the header list
value.
+----------------------------------+----------------------------------+ | Contact = (\"Contact\" / \"m\" ) | type record Contact { | | HCOLON | | | | FieldName fieldName(CONTACT_E), | | ( STAR / (contact-param\ | | | *(COMMA contact-param)\ | ContactBody contactBody | | )\ | | | ) | } | +==================================+==================================+ | contact-param = (name-addr / | type record ContactAddress { | | addr-spec)\ | | | *(SEMI contact-params) | Addr_Union addressField, | | | | | | SemicolonParam_List | | | contactParams optional | | | | | | } | | | | | | type union ContactBody { | | | | | | charstring wildcard, | | | | | | ContactAddress_List | | | contactAddresses | | | | | | } | | | | | | Used in | | | | | | type set of ContactAddress | | | **ContactAddress_List;** | +----------------------------------+----------------------------------+
\- The BNF (clause 7.3.1 Header Field Format RFC 3261 [16]) specifies that
several WWW or Proxy Authentication/Authorization headers should not be
combined into a single header; however they will be decoded into such in the
codec. If these need to be sent downlink then a new, \'raw\' (pure charstring)
message type will be introduced.
+----------------------------------+----------------------------------+ | Authorization = | type record Authorization { | | \"Authorization\" HCOLON | | | credentials | FieldName | | | fieldName(AUTHORIZATION_E), | | | | | | **Credentials body** | | | | | | } | +==================================+==================================+ | Credentials = (\"Digest\" LWS | type union Credentials { | | digest-response) | | | | CommaParam_List digestResponse, | | / other-response | | | | OtherAuth otherResponse | | | | | | } | +----------------------------------+----------------------------------+
\- The different schemes (sip, sips, tel, fax, absoluteUri) in the SIP URI are
all handled via the same type definition. The union "UriComponents" can be
enhanced to support further specific URI formats. Nevertheless it is possible
to use the "other" branch of "UriComponents" for any other URI format in which
case the charstring shall contain the URI without the scheme and the first
":".
+----------------------------------+----------------------------------+ | Request-URI = SIP-URI\ | type record SipUriComponents { | | / SIPS-URI\ | | | / absoluteURI | // sip-uri acc. To RFC 3261 | | | [16] cl. 19.1 | | with | | | | UserInfo userInfo optional, | | SIP-URI = \"sip:\" | | | | HostPort hostPort | | [ userinfo ]\ | | | hostport\ | } | | uri-parameters\ | | | [ headers ] | type record TelUriComponents { | | | | | and | // tel-uri acc. To RFC 3966 | | | [38] | | SIPS-URI = \"sips:\"\ | | | [ userinfo ]\ | charstring subscriber | | hostport\ | | | uri-parameters\ | } | | [ headers ] | | | | type record UrnUriComponents { | | and | | | | // urn-uri acc. To RFC 2141 | | absoluteURI = scheme \":\" ( | [39] | | hier-part / opaque-part ) | | | | charstring namespaceId, // e.g. | | | \"service\" | | | | | | charstring | | | namespaceSpecificString // e.g. | | | \"sos\" | | | | | | } | | | | | | type union UriComponents { | | | | | | SipUriComponents sip, // scheme: | | | \"sip\" or sips\" | | | | | | TelUriComponents tel, // scheme: | | | \"tel\" | | | | | | UrnUriComponents urn, // scheme: | | | \"urn\" | | | | | | charstring other | | | | | | } | | | | | | type record SipUrl { | | | | | | charstring **scheme** , | | | | | | UriComponents components, | | | | | | SemicolonParam_List | | | urlParameters optional, | | | | | | AmpersandParam_List headers | | | optional | | | | | | } | +----------------------------------+----------------------------------+
\- Universal charstrings shall be supported by the codec especially for the
Display name in the URI.
\- For downlink messages the len field in the ContentLength header is always
set to 0 by TTCN; in case of the SIP message containing a message body SS
shall replace the value by the actual length of the encoded message body (see
clause 7.3.4).
\- According to the SIP type definitions there are many 'charstring' fields
being optional in records;\ ⇒ in UL the decoder shall map missing information
by setting the respective field to omit rather than by assigning an empty
string ("").
\- type union Addr_Union\ As in \'NameAddr\' the field \'displayName\' is
optional in the first place the two branches of \'Addr_Union\' are equivalent
when there is no \'displayName\'; nevertheless in UL the decoder shall use the
branch 'nameAddr' if -- and only if -- the address information is surrounded
by '\' (what is needed at least when there is a display name followed
by the address information)
\- Ipv6 address in URI\ When an Ipv6 address is used as hostname in a SIP URI
it is typically surrounded by '[' and ']' what is matter of the codec: in DL
the codec shall add '[' and ']' when needed, in UL the '[' and ']' shall be
removed i.e. in the 'host' field of the SipUriComponents' hostPort there shall
be no '[' or ']' at the beginning or at the end.
#### 7.3.3.2 URL Encoding
Several fields or parameters in SIP headers require URL encoding (e.g. Contact
header, Accept-Contact header). In TTCN there is no encoding rule defined for
URL encoding and there is no specific type definition for URL encoded strings.
For that reason URL encoding/decoding is not a matter of codec implementation
but shall be done in TTCN.
### 7.3.4 Additional requirements for codec implementations (Message Body)
The message body of a SIP message may contain the message of other protocols
(SDP, SMS, etc.) and can be represented e.g. by XML. Therefore the type
definitions for these protocols can be TTCN-3 as well as XSD definitions.
As in principle the message body of a SIP message may host any XSD definition,
SIP and XSD definitions are decoupled:\ To avoid import of all potential XSD
definitions the XML body of SIP messages is defined as a charstring. This
requires a two-stage encoding and decoding: In DL an XML message needs to be
encoded in TTCN first before it gets put in the message body of a SIP message,
in UL the XML message contained in the message body needs to be explicitly
decoded in TTCN. By defining the XML message body as a charstring the SIP
definitions are independent from any XSD definitions and a specific XSD
definition needs to be known only when it is really used.
An SDP message may be contained in the message body itself or in a MIME
message. In both cases the SDP message is represented as charstring in the SIP
message and as for XML a two-stage encoding and decoding is applied in TTCN.
This allows explicit fail assignments in case of syntactically incorrect SDP
messages when syntactical correctness is a test requirement.
NOTE: Test specifications (e.g. TS 34.229-1 [5]) define the criteria for
syntactical correctness and codec implementations follow these criteria.
In detail the message body for SIP messages is defined as:
+----------------------------------------------------------------------+ | **type charstring XmlBody;** | | | | **type charstring SdpBody;** | | | | **type union MessageBody {** | | | | SdpBody sdpMessageBody | | | | XmlBody xmlBody, | | | | MIME_Message mimeMessageBody, | | | | charstring sipfrag, | | | | charstring textplain, | | | | SimpleMsgSummary simpleMsgSummary, | | | | octetstring smsMessage | | | | **}** ; | +======================================================================+ | NOTE: In contrast to SIP and SDP definitions which are commonly | | defined by ETSI the definition of the message body is project | | specific i.e. other IMS test projects at ETSI may use different | | definitions of the message body. | +----------------------------------------------------------------------+
### 7.3.5 Additional requirements for codec implementations (SDP Body)
The Session Description Protocol is defined in RFC 4566.
\- The \'type\' fields (such as \'v\' and \'o\' are not represented).
\- For the defined attributes, the att-field is also not represented (e.g.
\'curr\' is not represented in SDP_attribute_curr).
\- The Messages which are not of interest to a test suite are left undecoded
as a charstring and will not be further structured.
#### 7.3.5.1 Differences between BNF - SDP Type Mapping
In normal cases the mapping is straight forward. Below are the exceptions
which differ.
\- The numerical fields in the origin-field, the time-field and the timezone
field have been defined as charstring because they may not fit into a 32-bit
signed integer.
+--------------------------+--------------------------------+ | BNF Rules of RFC 4566 | TTCN 3 Type Mapping | +==========================+================================+ | origin = username | type record SDP_Origin { | | | | | sess-id | charstring username, | | | | | sess-version | charstring session_id, | | | | | nettype | charstring session_version, | | | | | addrtype | charstring net_type, | | | | | unicast-address | charstring addr_type, | | | | | | charstring addr | | | | | | } | +--------------------------+--------------------------------+ | time-fields = start-time | type record SDP_time_field { | | | | | stop-time | charstring start_time, | | | | | repeat-fields | charstring stop_time | | | | | [ zone-adjustments] | } | +--------------------------+--------------------------------+ | zone-adjustments = time | type record SDP_timezone { | | | | | typed-time | charstring adjustment_time, | | | | | | SDP_typed_time offset | | | | | | } | +--------------------------+--------------------------------+
\- The zone-adjustments field in the time-fields has been included as an
additional field in the top-level message definition.
+----------------------------------+----------------------------------+ | BNF Rules of RFC 4566 | TTCN 3 Type Mapping | +==================================+==================================+ | session-description = | type record SDP_Message { | | proto-version | | | | integer protocol_version, | | origin-field | | | | SDP_Origin origin, | | session-name-field | | | | charstring session_name, | | information-field | | | | charstring information optional, | | uri-field | | | | charstring uri optional, | | email-fields | | | | SDP_email_list emails | | phone-fields | optional, | | | | | connection-field | SDP_phone_list phone_numbers | | | optional, | | bandwitdh-fields | | | | SDP_connection connection | | time-fields | optional, | | | | | key-fields | SDP_bandwidth_list bandwidth | | | optional, | | attribute-fields | | | | SDP_time_list times, | | media-descriptions | | | | SDP_timezone_list | | | timezone_adjustments optional, | | | | | | SDP_key key optional, | | | | | | SDP_attribute_list attributes | | | optional, | | | | | | SDP_media_desc_list | | | media_list optional | +----------------------------------+----------------------------------+ | time-fields = start-time | type record SDP_time { | | | | | stop-time | SDP_time_field time_field, | | | | | repeat-fields | SDP_repeat_list time_repeat | | | optional | | [ zone-adjustments] | | | | } | +----------------------------------+----------------------------------+
\- The mappings for the email-address, phone-number and connection-address
fields have been simplified.
+----------------------------------------+--------------------------------+ | BNF Rules of RFC 4566 | TTCN 3 Type Mapping | +========================================+================================+ | email-address = address-and-comment | type record SDP_contact { | | | | | / dispname-and-address | charstring addr_or_phone, | | | | | / addrspec | charstring disp_name optional | | | | | | } | +----------------------------------------+--------------------------------+ | phone-number = email-safe | type record SDP_contact { | | | | | / email-safe \"\\" | charstring addr_or_phone, | | | | | / phone | charstring disp_name optional | | | | | | } | +----------------------------------------+--------------------------------+ | connection-address = multicast-address | type record SDP_conn_addr { | | | | | / unicast-address | charstring addr, | | | | | | integer ttl optional, | | | | | | integer num_of_addr optional | | | | | | } | +----------------------------------------+--------------------------------+
#### 7.3.5.2 Defined attributes
The SDP_attribute type is defined as a union of the following attribute types.
There is an unknown attribute given to decode undefined attributes with a name
and value.
+---------------+-----------------------------------------+ | SDP Attribute | TTCN 3 Type Mapping | +===============+=========================================+ | cat | type record SDP_attribute_cat { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | charset | type record SDP_attribute_charset { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | conf | type record SDP_attribute_curr { | | | | | | charstring preconditionType, | | | | | | charstring statusType, | | | | | | charstring direction | | | | | | } | +---------------+-----------------------------------------+ | curr | type record SDP_attribute_curr { | | | | | | charstring preconditionType, | | | | | | charstring statusType, | | | | | | charstring direction | | | | | | } | +---------------+-----------------------------------------+ | des | type record SDP_attribute_des { | | | | | | charstring preconditionType, | | | | | | charstring strength, | | | | | | charstring statusType, | | | | | | charstring direction | | | | | | } | +---------------+-----------------------------------------+ | fmtp | type record SDP_attribute_fmtp { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | framerate | type record SDP_attribute_framerate { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | inactive | type record SDP_attribute_inactive { | | | | | | } | +---------------+-----------------------------------------+ | keywds | type record SDP_attribute_keywds { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | lang | type record SDP_attribute_lang { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | orient | type record SDP_attribute_orient { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | ptime | type record SDP_attribute_ptime { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | quality | type record SDP_attribute_quality { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | recvonly | type record SDP_attribute_recvonly { | | | | | | } | +---------------+-----------------------------------------+ | rtcp | type record SDP_attribute_rtcp { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | rtpmap | type record SDP_attribute_rtpmap { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | sdplang | type record SDP_attribute_sdplang { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | sendrecv | type record SDP_attribute_sendrecv { | | | | | | } | +---------------+-----------------------------------------+ | sendonly | type record SDP_attribute_sendonly { | | | | | | } | +---------------+-----------------------------------------+ | Tool | type record SDP_attribute_tool { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | Type | type record SDP_attribute_type { | | | | | | charstring attr_value | | | | | | } | +---------------+-----------------------------------------+ | Unknown | type record SDP_attribute_tool { | | | | | | charstring name, | | | | | | charstring attr_value optional | | | | | | } | +---------------+-----------------------------------------+
### 7.3.6 Additional requirements for codec implementations (HTTP)
For HTTP the same types and header are used as for SIP.
⇒ Rules and requirements are applicable as defined for SIP in clause 7.3.
### 7.3.7 Additional requirements for codec implementations (XML)
XML data schema is used in IMS conformance testing according to ETSI ES 201
873-9 [57]. No further requirements are necessary.
## 7.4 Requirements for codec implementations (DHCP, DNS)
The DHCP/DNS codec converts TTCN descriptions into/from octet streams as
specified in the RFCs. The TTCN type definitions for DHCP/DNS types closely
follow the data formats defined in the corresponding RFCs (RFC 1035, RFC 1533,
RFC 2131, RFC 3315, RFC 3319 and RFC 3361).
# 8 Design consideration
## 8.1 Void
## 8.2 Void
## 8.3 Void
## 8.4 Void
## 8.5 Timer Tolerances
For timers used in conformance test cases according to TS 34.229-1 [5] and TS
34.229-5 [55], a tolerance of 10% shall be applied.
## 8.6 Bearer information for UTRAN
The Radio Access Bearer for IMS signalling is configured according to TS
34.108 [7] clause 6.10.2.4.1.26.
###### ## Annex A (normative): Abstract Test Suites (ATS)
This annex contains the approved ATSs.
The ATSs have been produced using the Testing and Test Control Notation
version 3 (TTCN-3) according to ES 201 873-1 [12].
# A.1 Baseline of specifications
Table A.1 lists the core specifications and the test specifications which the
delivered ATSs are referred to.
Table A.1: References of the test and Core specifications
Core specifications 3GPP TS 24.229 [11]
* * *
Test specifications 3GPP TS 34.229-1 [5] 3GPP TS 34.229-2 [6] 3GPP TS 34.229-5
[55] 3GPP TS 34.123-3 [2] 3GPP TS 36.523-3 [30]
# A.2 IMS-CC ATS
Table A.2 lists all approved test cases from TS 34.229-1 [5].
Table A.2: IMS-CC TTCN test cases from TS 34.229-1 [5]
* * *
Test case Description 6.3 Dedicated PDP Context Establishment 7.1 P-CSCF
Discovery via PDP Context 8.1 Initial registration 8.2 User Initiated Re-
Registration 8.3 Mobile Initiated Deregistration 8.4 Invalid behaviour- 423
Interval too brief 8.15 Refresh for ISIM parameters 8.16 User initiated re-
registration- 423 Interval Too Brief 9.1 Invalid Behaviour -- MAC Parameter
Invalid 9.2 Invalid Behaviour -- SQN out of range 10.1 Invalid Behaviour --
503 Service Unavailable 11.1 Network-initiated deregistration 11.2 Network
initiated re-authentication 12.2 MO Call -- 503 Service Unavailable 12.2a MO
Call -- 504 Server Time-out 12.12 MO MTSI Voice Call Successful with
preconditions 12.13 MT MTSI speech call 12.13a MT MTSI speech call when MO
reserves resources before sending INVITE 12.18 MTSI MO speech call / SSAC / 0%
access probability for MTSI MO speech call 12.19 MTSI MO video call / SSAC /
0% access probability for MTSI MO video call 12.20 Emergency call / Success /
SSAC / 0% access probability for MTSI MO speech call 12.21 MO MTSI Video call
12.22 MT MTSI Video call 12.23 MO MTSI speech call / EVS 12.24 MT MTSI speech
call / EVS 12.25 MO MTSI speech call / EVS / AMR-WB 12.26 MT MTSI speech call
/ EVS / AMR-WB IO mode 15.1 Originating Identification Presentation 15.2
Originating Identification Restriction 15.2a Originating Identification
Restriction / Signalling 15.3 Terminating Identification Presentation 15.4
Terminating Identification Restriction 15.4a Terminating Identification
Restriction / Signalling 15.5 Communication Forwarding unconditional 15.7
Communication Forwarding on non Reply: activation 15.8 Communication
Forwarding on non reply: MO call initiation 15.9 Communication Forwarding on
Busy 15.10 Communication Forwarding on Not logged-in 15.10a Communication
Forwarding on Not reachable 15.11 MO Call Hold without announcement 15.11a MO
Video Call Hold without announcement 15.12 MT Call Hold without announcement
15.12a MT Video Call Hold without announcement 15.13 Incoming Communication
Barring except for a specific user 15.14a Communication barring while roaming
15.14b Outgoing Communication Barring while roaming 15.15 Subscription to the
MWI event package 15.17 Creating a conference 15.19 Inviting user to
conference by sending a REFER request to the conference focus 15.19a Inviting
user to conference by sending a REFER request to the conference focus / Video
15.21a Three way session creation 15.21c Three way session creation / Video
15.25 MO Explicit Communication Transfer -- Consultative Call Transfer 15.27
Communication Waiting and answering the call 15.28 Communication Waiting and
cancelling the call 15.29 GBA authentication 16.2 Speech AMR, indicate
selective codec modes 16.3 Speech AMR-WB, indicate all codec modes 16.4 Speech
AMR-WB, indicate selective codec modes 17.1 MO Speech, add video remove video
17.2 MT Speech, add video remove video 18.1 Mobile Originating SMS 18.2 Mobile
Terminating SMS 19.1.1 Emergency call with emergency registration / Success /
Location information available 19.1.2 Emergency call with emergency
registration / Success / Location information not available 19.1.3 Emergency
call with emergency registration / Abnormal case / IM CN sends a 380 / UE
performs emergency call via CS domain / UTRAN or GERAN 19.1.5 Emergency call
with emergency registration / Emergency SIP signalling and media in parallel
with an other ongoing IM CN subsystem signalling and media 19.1.6 Emergency
call with emergency registration / Success / GIBA against a network with GIBA
support only 19.3.1 Non-UE detectable emergency call / IM CN sends a 1xx
response / UE geographical location information available 19.3.2 Non-UE
detectable emergency call / IM CN sends 380 Alternative Service including
emergency service URN and no emergency subservice type / Non-emergency IMS
registration / UTRAN or GERAN 19.3.2b Non-UE detectable emergency call / IM CN
sends a 380 with unavailable emergency service URN / UE performs normal call
via CS domain / UTRAN or GERAN 19.3.2c Non-UE detectable emergency call / IM
CN sends a 380 with available emergency service URN / UE performs CS Emergency
call via CS domain / UTRAN or GERAN 19.3.3 Non-UE detectable emergency call /
IM CN sends 380 Alternative Service / Emergency IMS registration 19.3.4 Non-UE
detectable emergency call / IM CN sends 380 with an Alternative Service /
Previous emergency IMS registration not expired 19.4.1 Emergency call without
emergency registration / EPS / UE does not contain an ISIM or USIM 19.4.2
Emergency call without emergency registration / EPS / UE contains an ISIM or
USIM / UE is in state EMM-REGISTERED.LIMITED-SERVICE 19.4.5 Emergency call
without emergency registration / UE credentials are not accepted 19.4.6
Emergency call without emergency registration / Failure of registration /
Rejected by 403(Forbidden) 19.4.7 Emergency call without emergency
registration / Failure of registration / against a network with GIBA support
only 19.5.1 New initial emergency registration / UE obtains from the serving
IP-CAN an IP address different than the IP address used for the emergency
registration 19.5.6 User-initiated emergency reregistration / UE has emergency
related ongoing dialog 19.5.7 User-initiated emergency reregistration / The
user initiates an emergency call 19.5.8 User-initiated emergency
reregistration / Standalone transactions exist 19.5.9 In parallel emergency
and non-emergency registrations 19.5.10 Deregistration upon emergency
registration expiration 20.1 Mobile Originating CAT -- Forking Model 21.1
eCall over IMS / Manual initiation / Normal registration / Emergency
registration / Success / 200 OK with ACK 21.2 eCall over IMS / Automatic
initiation / Normal registration / Emergency registration / Success / 200 OK
with ACK 21.4 eCall over IMS / Manual initiation / MSD transfer and 200 OK
with ACK / SIP INFO request for MSD Update / Success 21.5 eCall over IMS /
Automatic initiation / MSD transfer and 200 OK with ACK / SIP INFO request for
MSD Update / Success 21.6 eCall over IMS / Automatic initiation / MSD transfer
and 200 OK with ACK / SIP INFO request for unsupported MSD / UE indicates
unsuccessful in SIP INFO 22.1 MO Call -- UE is able to refresh the session
22.2 MO Call -- Remote end is refresher 22.3 MO Call -- Remote end does not
support Session Timer 22.4 MO Call -- Remote end seems oblivious to Session
Timer paramters 22.5 MT Call -- Remote end does not send Session-Expires 22.6
MT Call -- Remote end sends Session-Expires but does not choose refresher 22.7
MT Call -- Remote end chooses UE as refresher 22.8 MT Call -- Remote end does
not support Session Timer G.8.1 Initial Registration / WLAN G.12.1 MO MTSI
speech call / WLAN G.12.2 MT MTSI speech call / WLAN G.12.3 MO MTSI video call
/ WLAN G.12.4 MT MTSI video call / WLAN G.15.2 Originating Identification
Restriction / WLAN G.15.4 Terminating Identification Restriction / WLAN
G.15.11 MO Call Hold without announcement / WLAN G.15.12 MT Call Hold without
announcement / WLAN G.15.13 MO video Call Hold without announcement / WLAN
G.15.14 MT video Call Hold without announcement / WLAN G.15.17 Subscription to
the MWI event package / WLAN G.15.18 Inviting user to conference by sending a
REFER request to the conference focus / WLAN G.15.20 Three way session
creation / WLAN G.15.21 Inviting user to conference by sending a REFER request
to the conference focus for video / WLAN G.15.23 Three way session creation
for video / WLAN G.15.24 Communication Waiting and answering the call / WLAN
G.15.25 Communication Waiting and cancelling the call / WLAN G.17.1 MO Speech,
add video remove video / WLAN G.17.2 MT Speech, add video remove video / WLAN
J.8.1 Initial Registration / UE category M1 J.12.1 MO MTSI speech call / UE
category M1 J.12.2 MT MTSI speech call / UE category M1 J.15.1 Communication
Waiting and answering the call / UE category M1 J.15.2 Communication Waiting
and cancelling the call / UE category M1 J.15.3 Subscription to the MWI event
package / UE category M1 J.15.4 Originating Identification Restriction / UE
category M1 J.15.6 Communication forwarding on non reply: MO call initiation /
UE category M1 J.18.2 Mobile Terminating SMS / UE category M1 J.19.1 Emergency
call with emergency registration / Success / Location information available /
UE J.19.2 Emergency call with emergency registration / Success / Location
information not available / UE category M1
* * *
The Test Suite in TTCN-3 is contained in multiple ASCII files which accompany
the present document.
## A.2.1 Void
## A.2.2 Void
## A.2.3 Void
# A.3 IMS_NR5GC ATS
Table A.3 lists all approved test cases from TS 34.229-5 [55].
Table A.3: IMS_NR5GC TTCN test cases from TS 34.229-5 [55]
* * *
Test case Description 6.1.NR5GC Initial Registration / 5GS 6.2.NR5GC Initial
Registration Failures / 5GS 6.3.NR5GC Re-Registration Scenarios / 5GS
6.4.NR5GC De-Registration Scenarios / 5GS 6.6.NR5GC Re-Registration after
capability update / 5GS 6.7.NR5GC Authentication / MAC Parameter Invalid /
Only two consecutive invalid challenges / 5GS 6.8.NR5GC Authentication /
Security-Server missing / SQN out of range / 5GS 6.9.NR5GC Subscription / 503
Service Unavailable / 5GS 7.1.NR5GC MTSI MO Voice Call / 503 Service
Unavailable / 5GS 7.2.NR5GC MTSI MO Voice Call / 504 Server Time-out / 5GS
7.4.NR5GC MTSI MO Voice Call with preconditions at both originating UE and
terminating UE / 5GS 7.4a.NR5GC MTSI MO Voice Call with preconditions at both
originating UE and terminating UE / Default Configuration / 5GS 7.5.NR5GC MTSI
MO Voice Call without preconditions at both originating UE and terminating UE
/ 5GS 7.6.NR5GC MTSI MT Voice Call with preconditions at both originating UE
and terminating UE / 5GS 7.6a.NR5GC MTSI MT Voice Call with preconditions at
both originating UE and terminating UE / Default Configuration / 5GS 7.7.NR5GC
MTSI MT Voice Call without preconditions at both originating UE and
terminating UE / 5GS 7.8.NR5GC MTSI MT Voice Call without preconditions at
originating UE and with preconditions at terminating UE / 5GS 7.9.NR5GC MTSI
MT Voice Call with preconditions at originating UE and without preconditions
at terminating UE / 5GS 7.10.NR5GC MTSI MT Voice call without preconditions
and without SDP offer in MT INVITE / 5GS 7.11.NR5GC MTSI MT Voice call without
preconditions at terminating UE and originating UE requiring them / 5GS
7.12.NR5GC MTSI MO Voice Call with preconditions at originating UE and without
preconditions at terminating UE / 5GS 7.13.NR5GC MTSI MT Voice Call with RTCP
disabled / 5GS 7.14.NR5GC MTSI MO Video call with preconditions at both
originating UE and terminating UE / 5GS 7.15.NR5GC MTSI MO Video call without
preconditions at both originating UE and terminating UE / 5GS 7.16.NR5GC MTSI
MT Video call with preconditions at both originating UE and terminating UE /
5GS 7.17.NR5GC MTSI MT Video call without preconditions at both originating UE
and terminating UE / 5GS 7.18.NR5GC MTSI MO Voice Call / EVS / AMR-WB / 5GS
7.19.NR5GC MTSI MT Voice Call / EVS / AMR-WB IO mode / 5GS 7.20.NR5GC MTSI MO
Voice Call / add video and remove video / with preconditions at both
originating UE and terminating UE / 5GS 7.21.NR5GC MTSI MO Voice Call / add
video and remove video / without preconditions at both originating UE and
terminating UE / 5GS 7.22.NR5GC MTSI MT Voice Call / add video and remove
video / with preconditions at both originating UE and terminating UE / 5GS
7.23.NR5GC MTSI MT Voice Call / add video and remove video / without
preconditions at both originating UE and terminating UE / 5GS 7.24.NR5GC MTSI
MT Voice Call / Forking / UE receives CANCEL request for a forked MT voice
call / 5GS 7.24a.NR5GC MTSI MO Voice Call / Forking / UE receives two
preliminary responses and one early dialog termination / 5GS 7.24b.NR5GC MTSI
MO Voice Call / UE receives two preliminary responses and one final response /
5GS 7.25.NR5GC MTSI MT Voice call without SDP offer in INVITE / 5GS 7.26.NR5GC
Mobile Originating CAT / Forking Model / 5GS 7.27.NR5GC Session Timer / MO
Call / UE is able to refresh the session / 5GS 7.28.NR5GC Session Timer / MO
Call / Remote end is refresher / 5GS 7.29.NR5GC Session Timer / MO Call /
Remote end does not support Session Timer / 5GS 7.30.NR5GC Session Timer / MO
Call / Remote end supports but does not use Session Timer / 5GS 7.31.NR5GC
Session Timer / MT Call / Remote end supports but does not send Session-
Expires / 5GS 7.32.NR5GC Session Timer / MT Call / Remote end sends Session-
Expires but does not choose refresher / 5GS 7.33.NR5GC Session Timer / MT Call
/ Remote end chooses UE as refresher / 5GS 7.34.NR5GC Session Timer / MT Call
/ Remote end does not support Session Timer / 5GS 8.1.NR5GC Originating
Identification Presentation / Configuration / 5GS 8.2.NR5GC Originating
Identification Restriction / Configuration / 5GS 8.3.NR5GC Originating
Identification Restriction / Signalling / 5GS 8.4.NR5GC Terminating
Identification Presentation / Configuration / 5GS 8.5.NR5GC Terminating
Identification Restriction / Configuration / 5GS 8.6.NR5GC Terminating
Identification Restriction / Signalling / 5GS 8.7.NR5GC Communication
Forwarding Unconditional / Configuration / 5GS 8.8.NR5GC Communication
Forwarding Unconditional / Signalling / 5GS 8.9.NR5GC Communication Forwarding
on Not Logged-in / Configuration / 5GS 8.11.NR5GC Communication Forwarding on
Busy / Configuration / 5GS 8.13.NR5GC Communication Forwarding on Subscriber
Not Reachable / Configuration / 5GS 8.15.NR5GC Communication Forwarding on No
Reply / Configuration / 5GS 8.17.NR5GC Barring of All Incoming Calls /
Configuration / 5GS 8.19.NR5GC Barring of All Incoming Calls from anonymous
users / Configuration / 5GS 8.21.NR5GC Barring of all Outgoing Calls /
Configuration / 5GS 8.22.NR5GC Barring of Outgoing International Calls /
Configuration / 5GS 8.23.NR5GC Barring of Outgoing International Calls / ex
Home Country / Configuration / 5GS 8.25.NR5GC Barring of Incoming Calls / When
Roaming / Configuration / 5GS 8.26.NR5GC MO Call Hold without announcement /
5GS 8.27.NR5GC MO Video Call Hold without announcement / 5GS 8.28.NR5GC MT
Call Hold without announcement / 5GS 8.29.NR5GC MT Video Call Hold without
announcement / 5GS 8.30.NR5GC Subscription to the MWI event package / 5GS
8.31.NR5GC Creating and leaving a conference / 5GS 8.32.NR5GC Inviting user to
conference by sending a REFER request to the conference focus / 5GS 8.33.NR5GC
Inviting user to conference by sending a REFER request to the conference focus
/ Video / 5GS 8.34.NR5GC Three way session creation / 5GS 8.35.NR5GC Three way
session creation / Video / 5GS 8.36.NR5GC MO Explicit Communication Transfer /
Consultative Call Transfer / 5GS 8.37.NR5GC Communication Waiting and
answering the call / 5Gs 8.38.NR5GC Communication Waiting and cancelling the
call / 5GS 8.39.NR5GC GBA Authentication / 5GS 8.39a.NR5GC HTTP Digest
Authentication / 5GS 8.40.NR5GC User initiated USSI / 5GS 8.41.NR5GC
Communication Forwarding on No Reply: MO Call initiation with preconditions
9.1.NR5GC Mobile Originating SMS / 5GS 9.2.NR5GC Mobile Terminating SMS / 5GS
9.3.NR5GC Mobile Originating Concatenated SMS / 5GS 9.4.NR5GC Mobile
Terminating Concatenated SMS / 5GS 9.5.NR5GC Mobile Originating SMS / RP-ERROR
/ 5GS 10.1.NR5GC Emergency Call with emergency registration / Success /
Location information available / 5GS 10.2.NR5GC Emergency Call with emergency
registration / Success / Location information not available / 5GS 10.3.NR5GC
Emergency call with emergency registration / Emergency SIP signalling and
media in parallel with another ongoing IM CN subsystem signalling and media /
5GS 10.4.NR5GC Non-UE detectable emergency call / IM CN sends a 1xx response /
UE geographical location information available or not / 5GS 10.6.NR5GC Non-UE
detectable emergency call / IM CN sends 380 with an Alternative Service /
Previous emergency IMS registration not expired / 5GS 10.9.NR5GC Emergency
call without emergency registration / UE credentials are not accepted / 5GS
10.10.NR5GC Emergency call without emergency registration / Failure of
registration / Rejected by 403 (Forbidden) / 5GS 10.12.NR5GC User-initiated
emergency reregistration / UE has emergency related ongoing dialog / 5GS
10.13.NR5GC User-initiated emergency reregistration / User initiates an
emergency call / 5GS 10.14.NR5GC In parallel emergency and non-emergency
registrations / 5GS 11.1.NR5GC eCall over IMS / Manual initiation / Normal
registration / Emergency registration / Success / 200 OK with ACK / 5GS
11.2.NR5GC eCall over IMS / Automatic initiation / Normal registration /
Emergency registration / Success / 200 OK with ACK / 5GS 11.4.NR5GC eCall over
IMS / Manual initiation / MSD transfer and 200 OK with ACK / SIP INFO request
for MSD Update / Success / 5GS 11.5.NR5GC eCall over IMS / Automatic
initiation / MSD transfer and 200 OK with ACK / SIP INFO request for MSD
Update / Success / 5GS
* * *
###### ## Annex B (normative): Partial IXIT proforma
Notwithstanding the provisions of the copyright related to the text of the
present document, The Organizational Partners of 3GPP grant that users of the
present document may freely reproduce the partial IXIT proforma in this annex
so that it can be used for its intended purposes and may further publish the
completed partial IXIT.
# B.0 Introduction
This partial IXIT proforma contained in the present document is provided for
completion, when the related Abstract Test Suite is to be used against the
Implementation Under Test (IUT).
Text in _italics_ is comments for guidance for the production of an IXIT, and
is not to be included in the actual IXIT.
The completed partial IXIT will normally be used in conjunction with the
completed ICS, as it adds precision to the information provided by the ICS.
# B.1 Parameter values
## B.1.1 PIXITs
Table B.1.1: PIXIT
+-------------+-------------+------------+-------------+-------------+ | Parameter | Description | Type | Default | Supported | | name | | | value | value | +-------------+-------------+------------+-------------+-------------+ | px\ | TEL URI for | charstring | " | format | | _IMS_Assoc | the user | | +331234567" | shall be | | iatedTelUri | | | | TEL URI | +-------------+-------------+------------+-------------+-------------+ | px_IMS | URI of | charstring | \" | | | _CalleeUri | Callee, | | sip:User-B\ | | | | send by the | | @3gpp.org\" | | | | UE in | | | | | | INVITE (MO | | | | | | call | | | | | | est | | | | | | ablishment) | | | | | | to address | | | | | | the remote | | | | | | UE (NOTE 1) | | | | +-------------+-------------+------------+-------------+-------------+ | px_IMS\ | URI of | charstring | \" | | | _CalleeUri2 | Callee, | | sip:User- | | | | sent by the | | C\@3gpp.org | | | | UE in | | \" | | | | INVITE (MO | | | | | | call | | | | | | est | | | | | | ablishment) | | | | | | to address | | | | | | the remote | | | | | | UE (NOTE 1) | | | | +-------------+-------------+------------+-------------+-------------+ | px\ | URI | charstring | \"sip:User | | | _IMS_Calle | provided by | | -B-Contact\ | | | eContactUri | the remote | | @3gpp.org\" | | | | side (i.e. | | | | | | by SS) to | | | | | | be used by | | | | | | the UE as | | | | | | contact | | | | | | address in | | | | | | further SIP | | | | | | signalling | | | | | | of the | | | | | | dialog | | | | | | (NOTE 1) | | | | +-------------+-------------+------------+-------------+-------------+ | px_ | URI | charstring | \"sip:User | | | IMS_Callee | provided by | | -C-Contact\ | | | ContactUri2 | the remote | | @3gpp.org\" | | | | side (i.e. | | | | | | by SS) to | | | | | | be used by | | | | | | the UE as | | | | | | contact | | | | | | address in | | | | | | further SIP | | | | | | signalling | | | | | | of the | | | | | | dialog | | | | | | (NOTE 1) | | | | +-------------+-------------+------------+-------------+-------------+ | px_IMS_Ci | Ciphering | CiphAlgo | des | enumerated | | phAlgo_Def | Algorithm; | | _ede3_cbc | type: | | | | | | des\ | | | NOTE: | | | _ede3_cbc, | | | Unless | | | aes_cbc or | | | specified | | | nociph | | | otherwise | | | | | | in the test | | | | | | prose | | | | | | „nociph" | | | | | | shall not | | | | | | be used for | | | | | | v | | | | | | erification | | | | +-------------+-------------+------------+-------------+-------------+ | p | Home Domain | charstring | As defined | | | x_IMS_Hom | Name. | | in TS | | | eDomainName | | | 34.229-1 | | | | Applicable | | [5], | | | | when using | | Annex E | | | | an ISIM: | | | | | | same value | | | | | | as | | | | | | EF~DOMAIN~. | | | | | | | | | | | | (derived | | | | | | from the | | | | | | IMSI | | | | | | otherwise) | | | | | | | | | | | | FBBA: value | | | | | | as | | | | | | pr | | | | | | econfigured | | | | | | at the UE | | | | +-------------+-------------+------------+-------------+-------------+ | p | used in | charstring | \"refreshe | | | x_IMS_Hom | 8.15 | | d3gpp.org\" | | | eDomainName | | | | | | _Refreshed | | | | | +-------------+-------------+------------+-------------+-------------+ | px | used in | charstring | \ | | | _IMS_Priv | 8.15 | | "privateuse | | | ate_UserId | | | r\@refreshe | | | _Refreshed | | | d3gpp.org\" | | +-------------+-------------+------------+-------------+-------------+ | px_IM | used in | charstring | \"s | | | S_PublicUs | 8.15 | | ip:PublicId | | | erIdentity1 | | | 1\@refreshe | | | _Refreshed | | | d3gpp.org\" | | +-------------+-------------+------------+-------------+-------------+ | px_IMS_ | used in | charstring | \"\" | | | MessageAcco | 15.15 | | | | | untIdentity | | | | | +-------------+-------------+------------+-------------+-------------+ | p | List of | charstring | \"\" | | | x_IMS_SPI | comma | | | | | _ValidValu | separated | | | | | eList_PDN1 | integer | | | | | | values that | | | | | | can be used | | | | | | as SPI | | | | | | values for | | | | | | IMS | | | | | | security on | | | | | | PDN1; each | | | | | | value shall | | | | | | be ≥ 256 | | | | +-------------+-------------+------------+-------------+-------------+ | p | List of | charstring | \"\" | | | x_IMS_SPI | comma | | | | | _ValidValu | separated | | | | | eList_PDN2 | integer | | | | | | values that | | | | | | can be used | | | | | | as SPI | | | | | | values for | | | | | | IMS | | | | | | security on | | | | | | PDN2; each | | | | | | value shall | | | | | | be ≥ 256 | | | | +-------------+-------------+------------+-------------+-------------+ | p | Integrity | IntAlgo | hmac\ | enumerated | | x_IMS_IPS | Algorithm | | _sha_1_96 | type; | | ecAlgorithm | | | | hma | | | | | | c_md5_96, | | | | | | hmac\ | | | | | | _sha_1_96 | +-------------+-------------+------------+-------------+-------------+ | px | Private | charstring | As defined | | | _IMS_Priv | User | | in TS | | | ate_UserId | Identity. | | 34.229-1 | | | | | | [5], | | | | Applicable | | Annex E | | | | when using | | | | | | an ISIM: | | | | | | same value | | | | | | as | | | | | | EF~IMPI~. | | | | | | | | | | | | (derived | | | | | | from the | | | | | | IMSI | | | | | | otherwise) | | | | | | | | | | | | FBBA: | | | | | | username as | | | | | | used for | | | | | | au | | | | | | thorization | | | | +-------------+-------------+------------+-------------+-------------+ | px_IM | Public User | Charstring | As defined | | | S_PublicUs | Identity. | | in TS | | | erIdentity1 | | | 34.229-1 | | | | It is set | | [5], | | | | to the same | | Annex E | | | | value as | | | | | | the first | | | | | | record in | | | | | | EF~IMPU~. | | | | | | | | | | | | FBBA: IMPU | | | | | | pr | | | | | | econfigured | | | | | | in the UE | | | | +-------------+-------------+------------+-------------+-------------+ | px_IM | It is set | Charstring | As defined | | | S_PublicUs | to the same | | in TS | | | erIdentity2 | value as | | 34.229-1 | | | | the second | | [5], | | | | record in | | Annex E | | | | EF~IMPU~. | | | | +-------------+-------------+------------+-------------+-------------+ | px_IM | It is set | Charstring | As defined | | | S_PublicUs | to the same | | in TS | | | erIdentity3 | value as | | 34.229-1 | | | | the third | | [5], | | | | record in | | Annex E | | | | EF~IMPU~. | | | | +-------------+-------------+------------+-------------+-------------+ | p | in | charstring | As defined | | | x_SMS_SMS | ternational | | in Annex | | | C_Internat | number of | | E.3.2.14 of | | | ionalNumber | the SMSC: | | TS 34.229-1 | | | | | | [5]: | | | | Dialled | | "11223 | | | | number | | 3445566778" | | | | string of | | according | | | | the | | to TS | | | | TS-Service | | 31.121 | | | | Centre | | [52]. | | | | Address | | | | | | according | | | | | | to clause | | | | | | 4.5.3.9 | | | | | | \"EFSMSP | | | | | | (Short | | | | | | message | | | | | | service | | | | | | pa | | | | | | rameters)\" | | | | | | in TS | | | | | | 31.121 | | | | | | [52] (TON | | | | | | is assumed | | | | | | to be | | | | | | \"In | | | | | | ternational | | | | | | Number\"). | | | | +-------------+-------------+------------+-------------+-------------+ | px\ | true: UE | boolean | true | | | _UEwithISIM | has ISIM | | | | | | | | | | | | false: UE | | | | | | has USIM | | | | | | only | | | | +-------------+-------------+------------+-------------+-------------+ | px\ | XCAP | charstring | \"XCAP | | | _DigestPass | password | | -Password\" | | | wordForXCAP | | | | | +-------------+-------------+------------+-------------+-------------+ | px_XC | XCAP Root | charstring | \"/XCAP | | | AP_RootUri | URI | | .3gpp.org\" | | | | according | | | | | | to section | | | | | | 6.1 of RFC | | | | | | 4825 [70] | | | | | | as | | | | | | configured | | | | | | at the UE | | | | +-------------+-------------+------------+-------------+-------------+ | px_XCAP | Target (SIP | charstring | \" | | | _TargetUri | or TEL URI) | | sip:user\@d | | | | where to | | omain.com\" | | | | forward to | | | | +-------------+-------------+------------+-------------+-------------+ | px_XCA | username to | charstring | | | | P_Username | be used for | | | | | | HTTP | | | | | | aut | | | | | | hentication | | | | | | in case of | | | | | | pc_XCA | | | | | | P_Username | | | | | | IsConfigure | | | | | | dInUE==true | | | | +-------------+-------------+------------+-------------+-------------+ | NOTE 1: | | | | | | px_IMS\ | | | | | | _CalleeUri, | | | | | | px_IMS_ | | | | | | CalleeUri2, | | | | | | px\ | | | | | | _IMS_Calle | | | | | | eContactUri | | | | | | and | | | | | | px_ | | | | | | IMS_Callee | | | | | | ContactUri2 | | | | | | values | | | | | | shall be | | | | | | all | | | | | | different | | | | | | from each | | | | | | other. | | | | | +-------------+-------------+------------+-------------+-------------+
# B.2 Void
###### ## Annex C: Void
###### ## Annex D: Void
###### ## Annex E (informative): TTCN-3 style guide for 3GPP IMS ATS
For IMS conformance tests, the style guide of 36.523-3[30], Annex B shall be
applied.
###### ## Annex F (informative): BNF Message Definitions
The BNF definitions required for the ATS are defined in the following RFCs:
3261, 3262, 3265, 3311, 3313, 3323, 3325, 3326, 3327, 3329, 3428, 3455, 3515,
3608, 3840, 3841, 3891, 3892, 3903, 3911, 4028.
###### ## Annex G (Normative): SIP Type Definitions and XSD References
# G.0 References of XSD and SIP Type Definitions
## G.0.1 XML Schema Definitions (XSD)
The XSD references listed in this Annex are imported in the Test Suite.
Table G.0.1-1: Common Definitions
* * *
XML Schema Source Name space Modifications
* * *
RFC3680_reginfo RFC 3680 [24] urn:ietf:params:xml:ns:reginfo
RFC4575_conference-info RFC 4575 [45] urn:ietf:params:xml:ns:conference-info
RFC5628_gruuinfo RFC 5628 [46] urn:ietf:params:xml:ns:gruuinfo
24229_AlternativeService TS 24.229 [11] Table 7.6.1 NoTargetNamespace
RFC3863_pdif RFC 3863 [47] urn:ietf:params:xml:ns:pidf definitions modified
according to errata id 1606
RFC4119_pdif_geopriv10 RFC 4119 [44] urn:ietf:params:xml:ns:pidf:geopriv10
NOTE: RFC\'s errata has no impact on definitions
RFC4119_pdif_geopriv10_basicPolicy RFC 4119 [44]
urn:ietf:params:xml:ns:pidf:geopriv10:basicPolicy NOTE: RFC\'s errata has no
impact on definitions
RFC4119_pdif_geopriv10_civicLoc RFC 4119 [44]
urn:ietf:params:xml:ns:pidf:geopriv10:civicLoc NOTE: RFC\'s errata has no
impact on definitions
RFC4479_pidf_data_model RFC 4479 [58] urn:ietf:params:xml:ns:pidf:data-model
RFC4479_common_schema RFC 4479 [58] none\  
(included by RFC4479_pidf_data_model only)
24237_SRVCC TS 24.237 [51] Annex D.2 NoTargetNamespace
Xml http://www.w3.org/2001/03/xml.xsd http://www.w3.org/XML/1998/namespace
RFC8147_next_generation_ecall RFC 8147 [59]
urn:ietf:params:xml:ns:EmergencyCallData:control
24390_ussd_data TS 24.390 [53] clause 5.1.3.4 NoTargetNamespace
* * *
Table G.0.1-2: XCAP specific definitions
XML Schema Source Name space
* * *
TS24604 TS 24.604 [40] http_uri_etsi_org_ngn_params_xml_simservs_xcap
TS24607-OIP-OIR TS 24.607 [41] http_uri_etsi_org_ngn_params_xml_simservs_xcap
TS24608-TIP-TIR R2 TS 24.608 [42]
http_uri_etsi_org_ngn_params_xml_simservs_xcap TS24611 TS 24.611 [43]
http_uri_etsi_org_ngn_params_xml_simservs_xcap XCAP TS 24.623 [36]
http_uri_etsi_org_ngn_params_xml_simservs_xcap xdm_commonPolicy-V1_0
https://www.openmobilealliance.org/tech/profiles/xdm_commonPolicy-v1_0.xsd
urn_oma_xml_xdm_common_policy RFC4745-common-policy RFC 4745 [48]
urn_ietf_params_xml_ns_common_policy
Table G.0.1-3: GBA specific definitions
XML Schema Source Name space
* * *
TS24109 TS 24.109 [33] uri_3gpp_gba
In order to avoid ambiguities and unexpected side effects due to tool specific
behaviour the schemaLocation in xs:import or xs:include statements of XSD
files are modified to use local references rather than references to internet
locations.
The schemaLocations are shown in table G.0.1-4 and table G.0.1-5.
Table G.0.1-4: schemaLocation of imported namespaces
XML Schema Imported name space Original schemaLocation Modified schemaLocation
* * *
RFC3680_reginfo http://www.w3.org/XML/1998/namespace
http://www.w3.org/2001/03/xml.xsd ../../Common/IMS_XSD/xml.xsd RFC3863_pdif
http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd
../../Common/IMS_XSD/xml.xsd RFC4119_pdif_geopriv10
http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd
../../Common/IMS_XSD/xml.xsd RFC4119_pdif_geopriv10_basicPolicy
http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd
../../Common/IMS_XSD/xml.xsd RFC4479_common_schema
http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/xml.xsd
../../Common/IMS_XSD/xml.xsd RFC4575_conference-info
http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/03/xml.xsd
../../Common/IMS_XSD/xml.xsd TS24604 urn:ietf:params:xml:ns:common-policy
common-policy.xsd ../../Common/IMS_XSD/RFC4745-common-policy.xsd TS24604
urn:oma:xml:xdm:common-policy xdm_commonPolicy-V1_0 (no change needed) TS24611
urn:ietf:params:xml:ns:common-policy common-policy.xsd
../../Common/IMS_XSD/RFC4745-common-policy.xsd TS24611 urn:oma:xml:xdm:common-
policy xdm_commonPolicy-V1_0 (no change needed)
**Table G.0.1-5: schemaLocation of included namespaces**
XML Schema Original schemaLocation Modified schemaLocation
* * *
RFC4479_pidf_data_model common-schema.xsd RFC4479_common_schema.xsd
## G.0.2 Common TTCN-3 Libraries
Additionally the Test Suite imports the following modules of ETSI's LibSip
(ETSI SIP Library, see ):
Module Revision
* * *
LibSip_Common LibSip v3.0.5 LibSip_SDPTypes LibSip v3.0.5
LibSip_SimpleMsgSummaryTypes LibSip v3.0.5 LibSip_SIPTypesAndValues LibSip
v3.0.5
The LibSip module LibSip_MessageBodyTypes (imported by
LibSip_SIPTypesAndValues) contains type definitions for the message body of
SIP messages which in general are project specific. For 3GPP conformance
testing LibSip_MessageBodyTypes is defined as shown below.
# G.1 LibSip_MessageBodyTypes
LibSip_MessageBodyTypes: Basic Type Definitions
* * *
**TTCN-3 Basic Types**  
**XmlBody** charstring  
**SdpBody** charstring
* * *
MIME_FieldName
* * *
**TTCN-3 Enumerated Type**  
**Name** **MIME_FieldName** **Comment**  
MIME_CONTENT_DISPOSITION_E  
MIME_CONTENT_TYPE_E  
MIME_CONTENT_ID_E
* * *
MessageBody
* * *
**TTCN-3 Union Type**  
**Name** **MessageBody**  
**Comment**  
sdpMessageBody SdpBody to be applied when contentType is \"application/sdp\"
xmlBody XmlBody to be applied when contentType indicates an XML body, e.g.
matches \"application/xml\", \"text/xml\", \"application/(.*)+xml\"
mimeMessageBody MIME_Message to be applied when contentType is
\"multipart/mixed\" simpleMsgSummary SimpleMsgSummary RFC 3842 (Message
Summary and Message Waiting Indication Event Package for the Session
Initiation Protocol); to be applied when contentType is \"application/simple-
message-summary\" smsMessage octetstring encoded SMS message 3GPP 23.040,
24.011; to be applied when contentType is \"application/vnd.3gpp.sms\"
commonText charstring to be applied when contentType indicates text based
content other than SDP, XML or simple message summary, e.g.
\"application/mikey\" (base64encoded), \"application/json\", \"text/html\",
\"application/x-www-form-urlencoded\" commonBinary octetstring to be applied
when contentType indicates binary data other than SMS, e.g.
\"application/EmergencyCallData.eCall.MSD\"
* * *
## G.1.1 MIMETypes
MIME_ContentDisposition
* * *
**TTCN-3 Record Type**  
[]{#MIME_ContentDisposition .anchor}**Name** **MIME_ContentDisposition**  
**Comment** RFC 2183  
fieldName MIME_FieldName (MIME_CONTENT_DISPOSITION_E)  
dispositionType charstring  
dispositionParams SemicolonParam_List opt
* * *
MIME_ContentType
* * *
**TTCN-3 Record Type**  
[]{#MIME_ContentType .anchor}**Name** **MIME_ContentType**  
**Comment** RFC 2045 clause 5  
fieldName MIME_FieldName (MIME_CONTENT_TYPE_E)  
typeAndSubtype charstring  
typeParams SemicolonParam_List opt
* * *
MIME_ContentId
* * *
**TTCN-3 Record Type**  
[]{#MIME_ContentId .anchor}**Name** **MIME_ContentId**  
**Comment** RFC 2045 clause 7  
fieldName MIME_FieldName (MIME_CONTENT_ID_E)  
msgId charstring
* * *
MIME_Part_Header
* * *
**TTCN-3 Set Type**  
[]{#MIME_Part_Header .anchor}**Name** **MIME_Part_Header**  
**Comment**  
contentType MIME_ContentType  
contentDisposition MIME_ContentDisposition opt  
contentId MIME_ContentId opt
* * *
MIME_Part_Body
* * *
**TTCN-3 Union Type**  
**Name** **MIME_Part_Body**  
**Comment**  
sdpMessageBody SdpBody to be applied when contentType is \"application/sdp\"
xmlBody XmlBody to be applied when contentType indicates an XML body, e.g.
matches \"application/xml\", \"text/xml\", \"application/(.*)+xml\" commonText
charstring to be applied when contentType indicates text based content other
than SDP or XML, e.g. \"application/mikey\" (base64encoded),
\"application/json\", \"text/html\", \"application/x-www-form-urlencoded\"
commonBinary octetstring to be applied when contentType indicates binary data,
e.g. \"application/EmergencyCallData.eCall.MSD\"
* * *
MIME_Part
* * *
**TTCN-3 Record Type**  
**Name** **MIME_Part**  
**Comment**  
header MIME_Part_Header  
body MIME_Part_Body
* * *
MIME_Message
* * *
**TTCN-3 Record Type**  
[]{#MIME_Message .anchor}**Name** **MIME_Message**  
**Comment**  
boundary charstring boundary according to RFC 2046 clause 5.1.1 mimePartList
MIME_Part_List
* * *
MIME_Part_List
* * *
**TTCN-3 Set of Type**  
**Name** **MIME_Part_List** **Comment**  
set of MIME_Part
* * *
# G.2 References to TTCN-3
* * *
**References to TTCN-3**  
**LibSip_MessageBodyTypes** IMS_LibSip/LibSip_MessageBodyTypes.ttcn Rev 28285
* * *
###### ## Annex H (informative): TTCN-3 Definitions of Common Interfaces
The multi-testers model according to clause 5 provides interfaces which can be
re-used by implementations of the IP-CAN test model according to TS 34.229-4
[50].
NOTE: Common type definitions are according to annex D of TS 36.523-3 [30].
# H.1 IMS_PTC_CoordMsg
IMS_TestProcedure_Type
+----------------------------------+----------------------------------+ | **TTCN-3 Enumerated Type** | | +----------------------------------+----------------------------------+ | []{#IMS_TestProcedure_Type | **IMS_TestProcedure_Type** | | .anchor}**Name** | | +----------------------------------+----------------------------------+ | **Comment** | | +----------------------------------+----------------------------------+ | IPCAN_InitialRegistration | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5.2.3 without RRC | | | Connection Release at the end of | | | the procedure | | | | | | NOTE: As working assumption the | | | UE does IMS REGISTRATION | | | automatically after RRC/NAS | | | registration | +----------------------------------+----------------------------------+ | IPC | EUTRA/EPS signalling acc. to | | AN_EmergencyCall_NormalService | 36.508 cl. 4.5A.4.3 | +----------------------------------+----------------------------------+ | IPCAN_E | EUTRA/EPS signalling acc. to | | mergencyCall_OptionalPDNRelease | 36.508 cl. 4.5A.4.3, but with | | | Call Release according to | | | 34.229-1 C.32a | +----------------------------------+----------------------------------+ | IPCA | EUTRA/EPS signalling acc. to | | N_EmergencyCall_LimitedService | 36.508 cl. 4.5A.5.3 | +----------------------------------+----------------------------------+ | IPCAN_MO_SpeechCall | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.6.3 | +----------------------------------+----------------------------------+ | IPCAN_MT_SpeechCall | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.7.3 | +----------------------------------+----------------------------------+ | IPCAN_MO_VideoCall | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.8.3 | +----------------------------------+----------------------------------+ | IPCAN_MT_VideoCall | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.9.3 | +----------------------------------+----------------------------------+ | IPCAN_MO_AddVideo | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.11.3 | +----------------------------------+----------------------------------+ | IPCAN_MT_AddVideo | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.12.3 | +----------------------------------+----------------------------------+ | IPCAN_ReleaseVideo | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.15.3 | +----------------------------------+----------------------------------+ | IPCAN_MO_IMS_Signalling | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5.3.3 with m = n = | | | 0; used e.g. for MT SMS test | | | case 18.2 | +----------------------------------+----------------------------------+ | IPCAN_MT_IMS_Signalling | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5.3.3 Steps 3 to 9 | | | with m = n = 0; used e.g. for MT | | | SMS test case 18.1 | +----------------------------------+----------------------------------+ | IPCAN_XCAP_Signalling | EUTRA/EPS signalling acc. to | | | 36.508 cl. 4.5A.14 | +----------------------------------+----------------------------------+ | IPCAN_MO_DataCall | for MCData test cases | +----------------------------------+----------------------------------+ | IPCAN_MT_DataCall | for MCData test cases | +----------------------------------+----------------------------------+ | IPCAN_AdditionalIPAddress | CR 213400 | +----------------------------------+----------------------------------+ | IPCAN_Deregistration | | +----------------------------------+----------------------------------+ | IPCAN_UseVPLMN | Change cell used from Cell 1 | | | (HPLMN) to Cell 12 (VPLMN) | +----------------------------------+----------------------------------+
IMS_TestConfiguration_Type
* * *
**TTCN-3 Enumerated Type**  
[]{#IMS_TestConfiguration_Type .anchor}**Name** **IMS_TestConfiguration_Type**
**Comment**  
IPCAN_SignallingOnly EUTRA: default DRB is used only IPCAN_SpeechCall EUTRA:
one dedicated UM bearer; for normal speech calls and emergency call for
limited services IPCAN_VideoCall EUTRA: two dedicated UM bearers
IPCAN_EmergencyCall EUTRA: second default bearer (AM) and one dedicated UM
bearer IPCAN_SpeechAndEmergencyCall EUTRA: default bearer + dedicated bearer
for normal speech call and another default bearer + dedicated bearer for
emergency call IPCAN_XCAP EUTRA: second default bearer (AM) for second PDN
used for XCAP signalling IPCAN_DataCall MCData: one dedicated UM bearer
* * *
IPCAN_INFO_Type
* * *
**TTCN-3 Record Type**  
[]{#IPCAN_INFO_Type .anchor}**Name** **IPCAN_INFO_Type**  
**Comment**  
RanType IPCAN_RAN_Type opt  
UE_Release integer opt  
AuthResLength integer opt  
NetworkSupportsVoiceOverIMS boolean
* * *
IMS_IPCAN_CommandName_Type
+----------------------------------+----------------------------------+ | **TTCN-3 Enumerated Type** | | +----------------------------------+----------------------------------+ | []{#IMS_IPCAN_CommandName_Type | * | | .anchor}**Name** | _IMS_IPCAN_CommandName_Type_ _| +----------------------------------+----------------------------------+ |__Comment_ * | | +----------------------------------+----------------------------------+ | IPCAN_INIT | trigger the IPCAN_PTC to create | | | a cell and do further | | | appropriate initialisation; | | | | | | which RAN technology to be use | | | is decided by the IPCAN_PTC | | | based on PIXITs; | | | | | | as test procedure shall be | | | specified which procedure is | | | used during the test body to | | | know which DRBs need to be | | | pre-configured; | | | | | | IPCAN returns response | | | indicating the RAN type | +----------------------------------+----------------------------------+ | IPCAN_STARTPROCEDURE | trigger the IPCAN to expect (MO) | | | or page (MT) the UE to establish | | | an RRC connection; | | | | | | depending on the connection type | | | triggers may need to be sent | | | from IPCAN to IMS or from IMS to | | | IPCAN to synchronise | | | establishment | | | | | | of dedicated DRBs (EUTRA) or | | | secondary PDP contexts (UTRAN) | +----------------------------------+----------------------------------+ | IPCAN_ENDPROCEDURE | trigger RRC connection release | | | by the IPCAN_PTC; | | | | | | as a SIP message may be sent out | | | just before end of the procedure | | | in general a delay of 2s shall | | | be added before sending | | | IPCAN_ENDPROCEDURE to IPCAN; | | | | | | for UTRAN it is up to IPCAN and | | | SS implementation to cope with | | | possible/necessary release of | | | (secondary) PDP context; | | | | | | a trigger shall be sent from | | | IPCAN to IMS to indicate when | | | RRC connection is released | +----------------------------------+----------------------------------+ | IPCAN_RELEASE | Detach UE and release cell | | | (postamble); | | | | | | a trigger is shall be sent from | | | IPCAN to IMS to indicate when | | | IPCAN is released | +----------------------------------+----------------------------------+ | IPCAN_QUERY | query information from the IPCAN | | | PTC | +----------------------------------+----------------------------------+ | I | trigger IPCAN to provide | | PCAN_PROVIDELOCATIONINFORMATION | UELocationInformation to the UE | | | acc. to 36.509 | +----------------------------------+----------------------------------+
IMS_IPCAN_Command_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_IPCAN_Command_Type .anchor}**Name** **IMS_IPCAN_Command_Type**  
**Comment** Messages IMS_PTC -> IPCAN  
Name IMS_IPCAN_CommandName_Type  
TestConfiguration IMS_TestConfiguration_Type opt  
TestProcedure IMS_TestProcedure_Type opt
* * *
IMS_IPCAN_ResponseName_Type
+----------------------------------+----------------------------------+ | **TTCN-3 Enumerated Type** | | +----------------------------------+----------------------------------+ | []{#IMS_IPCAN_ResponseName_Type | ** | | .anchor}**Name** | IMS_IPCAN_ResponseName_Type**| +----------------------------------+----------------------------------+ |** Comment** | | +----------------------------------+----------------------------------+ | IPCAN_INIT | response for INIT command: | | | carries the RAN type as used by | | | the IPCAN PTC; | | | | | | the RAN type depends on PIXIT | | | settings: | | | | | | part 4 model: px_RANTech | | | | | | part 3 model: EUTRA_FDD or | | | EUTRA_TDD depending on | | | px_ePrimaryFrequencyBand | | | (px_ePrimaryFrequencyBand \ FDD) | +----------------------------------+----------------------------------+ | IPCAN_QUERY | | +----------------------------------+----------------------------------+
IPCAN_IMS_Response_Type
* * *
**TTCN-3 Record Type**  
[]{#IPCAN_IMS_Response_Type .anchor}**Name** **IPCAN_IMS_Response_Type**  
**Comment**  
Name IMS_IPCAN_ResponseName_Type  
IpcanInfo IPCAN_INFO_Type opt
* * *
IPCAN_IMS_Reset_Type
* * *
**TTCN-3 Enumerated Type**  
[]{#IPCAN_IMS_Reset_Type .anchor}**Name** **IPCAN_IMS_Reset_Type** **Comment**  
WithCNF  
WithoutCNF
* * *
IPCAN_IMS_Control_Type
* * *
**TTCN-3 Union Type**  
[]{#IPCAN_IMS_Control_Type .anchor}**Name** **IPCAN_IMS_Control_Type**  
**Comment**  
Reset IPCAN_IMS_Reset_Type to reset IMS after UE has been switched off and
gets switched on again IpcanInd Null_Type to indicate to IMS which IPCAN is
active (at port IPCAN or at port OtherIPCAN) ReregistrationStart
IPCAN_RAN_Type to prepare IMS PTC for (optional) re-registration
ReregistrationStop Null_Type to indicate to IMS PTC that no re-registration
will happen anymore NoRegistration Null_Type no IMS registration shall happen
(e.g. due to test loop mode being activated)
* * *
IMS_IPCAN_Coordination_MSG
* * *
**TTCN-3 Union Type**  
[]{#IMS_IPCAN_Coordination_MSG .anchor}**Name** **IMS_IPCAN_Coordination_MSG**  
**Comment**  
TriggerEvent CoOrdination_Trigger_Type any trigger of confirmation AbortEvent
Null_Type sent instead of TriggerEvent if procedure shall be aborted
IPCAN_IMS_Control IPCAN_IMS_Control_Type IMS \ IPCAN:
command from the IPCAN to control IMS (mainly for IMS default behaviour)
IPCAN_IMS_Response IPCAN_IMS_Response_Type IMS \
IPCAN: PCOs to be used in NAS signalling IPCAN_IMS_Data charstring IMS \ it is not necessary | | | | anymore to return | | | | IM | | | | S_ProtectedPorts_Type, | | | | IMS_SPIs_Type to the | | | | IMS PTC | +--------------------------+--------------+--------------------------+
IMS_SecurityContextEnum_Type
* * *
**TTCN-3 Enumerated Type**  
[]{#IMS_SecurityContextEnum_Type .anchor}**Name**
**IMS_SecurityContextEnum_Type** **Comment**  
unprotected  
protectedContext1  
protectedContext2
* * *
IMS_RoutingInfo_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_RoutingInfo_Type .anchor}**Name** **IMS_RoutingInfo_Type**  
**Comment**  
Protocol InternetProtocol_Type UDP or TCP Security
IMS_SecurityContextEnum_Type opt protected or unprotected (in DL omit when IP
PTC shall decide what to do) UE_Address IP_AddrInfo_Type opt sent by the IP
PTC when there is an initial request on unprotected connection NW_Address
IP_AddrInfo_Type opt sent by the IP PTC when there is an initial request on
unprotected connection
* * *
IMS_DATA_REQ
* * *
**TTCN-3 Record Type**  
[]{#IMS_DATA_REQ .anchor}**Name** **IMS_DATA_REQ**  
**Comment**  
RoutingInfo IMS_RoutingInfo_Type  
Request IMS_Request_Type
* * *
IMS_DATA_RSP
* * *
**TTCN-3 Record Type**  
[]{#IMS_DATA_RSP .anchor}**Name** **IMS_DATA_RSP**  
**Comment**  
RoutingInfo IMS_RoutingInfo_Type  
Response IMS_Response_Type
* * *
IMS_ProtectedPorts_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_ProtectedPorts_Type .anchor}**Name** **IMS_ProtectedPorts_Type**  
**Comment**  
Port_us PortNumber_Type UE side: Server Port_uc PortNumber_Type UE side:
Client Port_ps PortNumber_Type network side: Server Port_pc PortNumber_Type
network side: Client
* * *
IMS_SPIs_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_SPIs_Type .anchor}**Name** **IMS_SPIs_Type**  
**Comment**  
SPI_us IPsec_SPI_Type SPI at UE side: assigned by the UE SPI_uc IPsec_SPI_Type
SPI at UE side: assigned by the UE SPI_ps IPsec_SPI_Type opt SPI at network
side: to be assigned by TTCN SPI_pc IPsec_SPI_Type opt SPI at network side: to
be assigned by TTCN
* * *
IMS_SecurityInfo_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_SecurityInfo_Type .anchor}**Name** **IMS_SecurityInfo_Type**  
**Comment**  
ProtectedPorts IMS_ProtectedPorts_Type  
SPIs IMS_SPIs_Type  
IntegrityAlgorithm IPsec_IntegrityAlgorithm_Type  
CipheringAlgorithm IPsec_CipheringAlgorithm_Type
* * *
IMS_RegistrationInfo_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_RegistrationInfo_Type .anchor}**Name** **IMS_RegistrationInfo_Type**  
**Comment**  
NW_Address IP_AddrInfo_Type network address of the chosen IMS server (e.g.
IPv4, IPv6) UE_Address IP_AddrInfo_Type UE address as used for security
protected connections SecurityInfo IMS_SecurityInfo_Type opt omit in case of
GIBA
* * *
IMS_PortsAndSecurityConfigReq_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_PortsAndSecurityConfigReq_Type .anchor}**Name**
**IMS_PortsAndSecurityConfigReq_Type**  
**Comment**  
UnprotectedPort_us PortNumber_Type opt 5060 per default RegistrationInfo
IMS_RegistrationInfo_Type opt
* * *
IMS_SecurityReleaseMode_Type
* * *
**TTCN-3 Enumerated Type**  
[]{#IMS_SecurityReleaseMode_Type .anchor}**Name**
**IMS_SecurityReleaseMode_Type** **Comment**  
full all protected and unprotected security contexts shall be released (e.g.
at de-registration) keepUnprotected all protected security contexts shall be
released but the unprotected security context shall be kept
oldestProtectedContextOnly only the oldest protected security context shall be
released
* * *
IMS_SecurityRelease_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_SecurityRelease_Type .anchor}**Name** **IMS_SecurityRelease_Type**  
**Comment**  
Mode IMS_SecurityReleaseMode_Type  
WaitForCNF boolean
* * *
IMS_RestartPCSCF_Type
* * *
**TTCN-3 Record Type**  
[]{#IMS_RestartPCSCF_Type .anchor}**Name** **IMS_RestartPCSCF_Type**  
**Comment**  
PdnIndex PDN_Index_Type  
IPAddressIPv4 charstring  
IPAddressIPv6 charstring
* * *
IMS_CONFIG_REQ
* * *
**TTCN-3 Union Type**  
[]{#IMS_CONFIG_REQ .anchor}**Name** **IMS_CONFIG_REQ**  
**Comment**  
InstallKey IPsec_SecurityKeys_Type  
PortsAndSecurityConfig IMS_PortsAndSecurityConfigReq_Type  
SecurityRelease IMS_SecurityRelease_Type  
CloseTCP Null_Type  
RestartPCSCF IMS_RestartPCSCF_Type
* * *
IMS_CONFIG_CNF
* * *
**TTCN-3 Union Type**  
[]{#IMS_CONFIG_CNF .anchor}**Name** **IMS_CONFIG_CNF**  
**Comment**  
InstallKey Null_Type  
PortsAndSecurityConfig IMS_PortsAndSecurityConfigCnf_Type  
SecurityRelease Null_Type  
CloseTCP Null_Type  
RestartPCSCF Null_Type
* * *
IMS_IP_CTRL_PORT
* * *
**TTCN-3 Port Type**  
**Name** **IMS_IP_CTRL_PORT**  
**Comment** Control port at the IMS PTC to configure IP for IMS  
out IMS_CONFIG_REQ  
in IMS_CONFIG_CNF
* * *
IMS_IP_CLIENT_PORT
* * *
**TTCN-3 Port Type**  
**Name** **IMS_IP_CLIENT_PORT**  
**Comment** IMS client: send requests, receive response  
out IMS_DATA_REQ  
in IMS_DATA_RSP
* * *
IMS_IP_SERVER_PORT
* * *
**TTCN-3 Port Type**  
**Name** **IMS_IP_SERVER_PORT**  
**Comment** IMS server: send response, receive requests  
out IMS_DATA_RSP  
in IMS_DATA_REQ
* * *
# H.3 HTTP_ASP_TypeDefs
## H.3.1 HTTP_ASP_Definitions
HttpServerInfo_Type
+-------------------+-------------------+-----+-------------------+ | **TTCN-3 Record | | | | | Type** | | | | +-------------------+-------------------+-----+-------------------+ | []{#Ht | **HttpS | | | | tpServerInfo_Type | erverInfo_Type** | | | | .anchor}**Name** | | | | +-------------------+-------------------+-----+-------------------+ | **Comment** | | | | +-------------------+-------------------+-----+-------------------+ | serverAddr | I | | IP address of | | | P_AddrInfo_Type | | simulated server | +-------------------+-------------------+-----+-------------------+ | serverPort | PortNumber_Type | | Port number of | | | | | simulated server | +-------------------+-------------------+-----+-------------------+ | drbInfo | IP_DrbInfo_Type | | DRB info as used | | | | | by the IP PTC | | | | | (LTE model, see | | | | | TS 36.523-3 | | | | | [30]) | +-------------------+-------------------+-----+-------------------+ | tlsConfig | TLSConfig_Type | opt | TLS parameters as | | | | | used by the IP | | | | | PTC (LTE model, | | | | | see TS 36.523-3 | | | | | [30]) | | | | | | | | | | (omit: no TLS) | +-------------------+-------------------+-----+-------------------+
HttpServerList_Type
* * *
**TTCN-3 Record of Type**  
[]{#HttpServerList_Type .anchor}**Name** **HttpServerList_Type** **Comment**  
record length (1 .. infinity) of HttpServerInfo_Type
* * *
HTTP_CTRL_REQ
+-------------------+-------------------+-----+-------------------+ | **TTCN-3 Record | | | | | Type** | | | | +-------------------+-------------------+-----+-------------------+ | []{#HTTP_CTRL_REQ | ** | | | | .anchor}**Name** | HTTP_CTRL_REQ**| | | +-------------------+-------------------+-----+-------------------+ |** Comment** | ASP type to | | | | | configure the | | | | | http layer; | | | | | | | | | | when any of the | | | | | optional fields | | | | | is omitted the | | | | | previous | | | | | configuration of | | | | | this field is | | | | | kept | | | +-------------------+-------------------+-----+-------------------+ | httpServerList | HttpServe | opt | IP address and | | | rList_Type | | HTTP servers | +-------------------+-------------------+-----+-------------------+
HTTP_CTRL_CNF
* * *
**TTCN-3 Record Type**  
[]{#HTTP_CTRL_CNF .anchor}**Name** **HTTP_CTRL_CNF**  
**Comment** ASP type to confirm HTTP_CTRL_REQ  
errorInfo charstring opt string indicating a system error
* * *
HTTP_DATA_IND
+--------------------+--------------------+---+--------------------+ | **TTCN-3 Record | | | | | Type** | | | | +--------------------+--------------------+---+--------------------+ | []{#HTTP_DATA_IND | * | | | | .anchor}**Name** | _HTTP_DATA_IND_ _| | | +--------------------+--------------------+---+--------------------+ |__Comment_ * | ASP type for | | | | | sending a message | | | | | from the http | | | | | layer to TTCN; | | | | | | | | | | it transports | | | | | relevant | | | | | information of a | | | | | http Request from | | | | | the UE to the | | | | | Tester | | | +--------------------+--------------------+---+--------------------+ | routingInfo | IP | | TCP connection | | | _Connection_Type | | from which the | | | | | request has been | | | | | received; | | | | | | | | | | => response shall | | | | | use the same | +--------------------+--------------------+---+--------------------+ | httpRequest | H | | | | | ttpRequest_Type | | | +--------------------+--------------------+---+--------------------+
HttpMessageBody
* * *
**TTCN-3 Union Type**  
[]{#HttpMessageBody .anchor}**Name** **HttpMessageBody**  
**Comment**  
text charstring  
binary octetstring  
mime MIME_Message
* * *
HttpRequest_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpRequest_Type .anchor}**Name** **HttpRequest_Type**  
**Comment**  
requestLine HttpRequestLine_Type RFC 2616 clause 5.1 userAgent UserAgent opt
User Agent according to RFC 2616 [27] clause 14.43 authorization Authorization
opt Authorization according to RFC 2616 [27] clause 14.8 (optional; NOTE: Same
type definition as for SIP type definitions) host Host opt host according to
RFC 2616 [27] clause 14.23 contentType ContentType opt Content-Type according
to RFC 2616 [27] clause 14.17 (optional, NOTE: Same type definition as for SIP
type definitions) cacheControl HttpCacheControl_Type opt RFC 2616 clause 14.9
x3GPPIntendedIdentity charstring opt 3GPP TS 24.109 [33] clause G.2
messageBody HttpMessageBody opt e.g. XCAP Message;
* * *
HttpResponse_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpResponse_Type .anchor}**Name** **HttpResponse_Type**  
**Comment**  
statusLine HttpStatusLine_Type Status-Line in RFC 2616 [27] clause 6.1 date
Date opt Date according to RFC 2616 [27] clause 14.18 eTag SIP_ETag opt ETag
according to RFC 2616 [27] clause 14.19 server Server opt Server according to
RFC 2616 [27] clause 14.38 wwwauthenticate WwwAuthenticate opt WWW-
Authenticate in RFC 2616 [27] clause 14.47 (NOTE: Same type definition as for
SIP type definitions) authenticationInfo AuthenticationInfo opt
Authentication-Info in RFC 2617 [37] clause 3.2.3 (NOTE: Same type definition
as for SIP type definitions) contentType ContentType opt Content-Type in RFC
2616 [27] clause 14.17 (NOTE: Same type definition as for SIP type
definitions) location HttpLocation_Type opt RFC 2616 clause 14.30
contentLength ContentLength opt Content-Length in RFC 2616 [27] clause 14.13
(NOTE: Same type definition as for SIP type definitions) expires Expires opt
Expires in RFC 2616 [27] clause 14.21 (NOTE: Same type definition as for SIP
type definitions) cacheControl HttpCacheControl_Type opt Cache-Control in RFC
2616 [27] clause 14.9 pragma HttpPragma_Type opt Pragma in RFC 2616 [27]
clause 14.32 messageBody HttpMessageBody opt e.g. XCAP Message;
* * *
HTTP_DATA_REQ
+--------------------+--------------------+---+--------------------+ | **TTCN-3 Record | | | | | Type** | | | | +--------------------+--------------------+---+--------------------+ | []{#HTTP_DATA_REQ | * | | | | .anchor}**Name** | _HTTP_DATA_REQ_ _| | | +--------------------+--------------------+---+--------------------+ |__Comment_ * | ASP type for | | | | | sending messages | | | | | from TTCN to the | | | | | http layer; | | | | | | | | | | it transports | | | | | information needed | | | | | by the http layer | | | | | to generate a http | | | | | Response to the UE | | | +--------------------+--------------------+---+--------------------+ | routingInfo | IP | | TCP connection to | | | _Connection_Type | | be used in DL: | | | | | shall be the same | | | | | as for | | | | | corresponding | | | | | request | +--------------------+--------------------+---+--------------------+ | httpResponse | Htt | | | | | pResponse_Type | | | +--------------------+--------------------+---+--------------------+
HttpRequestLine_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpRequestLine_Type .anchor}**Name** **HttpRequestLine_Type**  
**Comment** request line according to RFC 2616 [27] clause 5.1  
method charstring  
uri charstring XCAP: selection expression, RFC 4825 [26] version charstring
* * *
HttpStatusLine_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpStatusLine_Type .anchor}**Name** **HttpStatusLine_Type**  
**Comment** status line according to RFC 2616 [27] clause 5.1  
version charstring  
code integer  
reasonPhrase charstring
* * *
HttpCacheControl_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpCacheControl_Type .anchor}**Name** **HttpCacheControl_Type**  
**Comment** RFC 2616 clause 14.9  
cacheDirective charstring
* * *
HttpPragma_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpPragma_Type .anchor}**Name** **HttpPragma_Type**  
**Comment** RFC 2616 clause 14.32  
pragmaDirective charstring
* * *
HttpLocation_Type
* * *
**TTCN-3 Record Type**  
[]{#HttpLocation_Type .anchor}**Name** **HttpLocation_Type**  
**Comment** RFC 2616 clause 14.30, see also RFC 3986 section 4.3  
uri charstring
* * *
## H.3.2 HTTP_Port_Definitions
HTTP_CTRL_PORT
* * *
**TTCN-3 Port Type**  
**Name** **HTTP_CTRL_PORT**  
**Comment**  
out HTTP_CTRL_REQ  
in HTTP_CTRL_CNF
* * *
HTTP_DATA_PORT
* * *
**TTCN-3 Port Type**  
**Name** **HTTP_DATA_PORT**  
**Comment**  
in HTTP_DATA_IND  
out HTTP_DATA_REQ
* * *
# H.4 References to TTCN-3
* * *
**References to TTCN-3**  
**IMS_PTC_CoordMsg** IMS/IMS_PTC_CoordMsg.ttcn Rev 35214 **IMS_ASP_TypeDefs**
IMS/IMS_ASP_TypeDefs.ttcn Rev 35130 **HTTP_ASP_TypeDefs**
HTTP/HTTP_ASP_TypeDefs.ttcn Rev 33197
* * *
#