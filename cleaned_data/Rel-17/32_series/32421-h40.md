# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is part of a TS-family covering the 3rd Generation
Partnership Project; Technical Specification Group Services and System
Aspects; Telecommunication management, as identified below:
**TS 32.421: \"Subscriber and equipment trace: Trace concepts and
requirements\";**
TS 32.422: \"Subscriber and equipment trace: Trace control and configuration
management\";
TS 32.423: \"Subscriber and equipment trace: Trace data definition and
management\";
Subscriber and equipment trace provide very detailed information at call level
on one or more specific mobile(s).\ This data is an additional source of
information to Performance Measurements and allows going further in monitoring
and optimisation operations.
Contrary to Performance measurements, which are a permanent source of
information, trace is activated on user demand for a limited period of time
for specific analysis purposes.
Trace plays a major role in activities such as determination of the root cause
of a malfunctioning mobile, advanced troubleshooting, optimisation of resource
usage and quality, RF coverage control and capacity improvement, dropped call
analysis, Core Network and Access Network end-to-end procedure validation.
The capability to log data on any interface at call level for a specific user
(e.g. IMSI) or mobile type (e.g. IMEI or IMEISV), or service initiated by a
user allows getting information which cannot be deduced from Performance
measurements such as perception of end-user QoS during his call (e.g.
requested QoS vs. provided QoS), correlation between protocol messages and RF
measurements, or interoperability with specific mobile vendors.
Moreover, performance measurements provide values aggregated on an observation
period; Subscriber and UE Trace give instantaneous values for a specific event
(e.g. call, location update, etc.).
If performance measurements are mandatory for daily operations, future network
planning and primary trouble shooting; Subscriber and UE Trace is the easy way
to go deeper into investigation and network optimisation.
In order to produce this data, Subscriber and UE Trace are carried out in the
NEs, which comprise the network. The data can then be transferred to an
external system (e.g. an Operations System (OS) in TMN terminology, for
further evaluation).
# 1 Scope
The present document describes the requirements for the management of Trace
and the reporting of Trace data (including FDD mode and TDD mode) across UMTS,
EPS or 5G networks as it refers to subscriber tracing (tracing of IMSI or
Public User Identity) and equipment tracing (tracing of IMEI or IMEISV). Trace
also includes the ability to trace all active calls in a cell or multiple
cells (Cell Traffic Trace). The present document also includes the description
of Service Level Tracing (tracing of a specific service). It defines the
administration of Trace Session activation/deactivation by the management
system, the network or User Equipment (UE) itself via signalling, the
generation of Trace results in the Network Elements (NEs) and UE and the
transfer of these results to one or more Operations Systems.
GSM Trace is outside of the scope of this specification (see [7]).
The present document also describes the requirements for the management of
Minimization of Drive Tests (MDT) across UMTS networks, EPS networks or 5G
networks and Radio Link Failure (RLF) and RRC Connection Establishment Failure
(RCEF) reporting across EPS networks and 5G networks.
The present document is built upon the basic Subscriber and UE Trace concept
described in clause 4.\ The high-level requirements for Trace data, Trace
Session activation/deactivation and Trace reporting are defined in clause 5.
Clause 5 also contains an overview of use cases for Trace (the use cases are
described in Annex A). Clause 6 defines the requirements for managing MDT.
Clause 7 defines the requirements for managing RLF and RCEF reports.Trace
control and configuration management are described in 3GPP TS 32.422 [2], and
Trace data definition and management are described in 3GPP TS 32.423 [3].
The present document does not cover any Trace capability limitations within a
NE (e.g. maximum number of simultaneous traced mobiles for a given NE) or any
functionality related to these limitations (e.g. NE aborting a Trace Session
due to resource limitations).
The objectives of the Trace specifications are:
a) to provide the descriptions for a standard set of Trace and MDT data;
b) to produce a common description of the management technique for Trace, MDT,
RLF, and RCEF administration and result reporting;
c) to define a method for the reporting of Trace, MDT, RLF and RCEF results
across the management interfaces.
The following is beyond the scope of the present document, and therefore the
present document does not describe:
\- tracing non-Subscriber or non-UE related events within an NE;
\- tracing of all possible parties in a multi-party call (although multiple
calls related to the IMSI specified in the Trace control and configuration
parameters are traceable).
The definition of Trace and MDT data is intended to result in comparability of
Trace and MDT data produced in a multi-vendor wireless UMTS, EPS and/or 5G
network(s), for those Trace control and configuration parameters that can be
standardised across all vendors\' implementations.
Vendor specific extensions to the Trace control and configuration parameters
and Trace and MDT data are discussed in 3GPP TS 32.422 [2] and 3GPP TS 32.423
[3].
All functions (trace, MDT etc.) specified in this specification support
Network Sharing, with the following conditions:
\- It is accepted that the recorded information from the shared nodes is
available to the Primary Operator. Recorded information that is collected in a
non shared node or cell will only be available to the operator managing the
non shared node or cell.
\- It is accepted that the recorded information from the shared network shall
be delivered to the Participating Operator whose PLMN recording is requested,
taking user consent into account. Operators must also agree on sharing the
information, but how that agreement is done is outside the scope of this
specification. The mapping of TCE IP addresses and TCE addresses must be
coordinated among the operators that shares the network. How that coordination
is done is outside the scope of this specification.
\- It is accepted that the inter-PLMN recorded information for Logged MDT from
the non-shared nodes of Participating Operators may be available to the
Primary Operator.
\- For signalling based activation, the operators that share a network must
coordinate the TCE IP addresses and the TCE address mapping must be
coordinated. How that coordination´ is done is outside the scope of this
specification.
For UMTS and EPS the 3GPP Managment reference model, 3GPP TS 32.101 [1] is
followed.
For 5GS the 3GPP Services Based Management Architecture, 3GPP TS 28.533 [20]
is followed.
# 2 References
The following documents contain provisions, which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 32.101: \"Telecommunication management; Principles and high level
requirements\".
[2] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace: Trace control and configuration management\".
[3] 3GPP TS 32.423: \"Telecommunication management; Subscriber and equipment
trace: Trace data definition and management\".
[4] 3GPP TS 23.002: \"Network architecture\".
[6] Void
[7] 3GPP TS 52.008: \"Telecommunication management; GSM subscriber and
equipment trace\".
[8] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[9] OMA Service Provider Environment Requirements, OMA-RD-
OSPE-V1_0-20050614-C, The Open Mobile Alliance™
(URL:http://www.openmobilealliance.org/).
[10] 3GPP TS 33.401: \"System Architecture Evolution (SAE); Security
architecture\".
[11] 3GPP TS 37.320 : \"Universal Terrestrial Radio Access (UTRA) and Evolved
Universal Terrestrial Radio Access (E-UTRA); Radio measurement collection for
Minimization of Drive Tests (MDT); Overall description, Stage 2\".
[12] 3GPP TS 32.450: \"Key Performance Indicators (KPI) for Evolved Universal
Terrestrial Radio Access Network (E-UTRAN): Definitions\".
[13] 3GPP TS 32.130: \"Network sharing; Concepts and requirements\".
[14] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[15] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[16] 3GPP TS 38.300: \"NR and NG-RAN Overall Description; Stage 2\".
[17] 3GPP TS 38.401: \"NG-RAN; Architecture Description\".
[18] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
Radio Resource Control (RRC); Protocol Specification\".
[19] 3GPP TS 25.331: \"Radio Resource Control (RRC); protocol specification\".
[20] 3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\"
[21] 3GPP TS 38.423: \"NG-RAN; Xn Application Protocol (XnAP)\"
[22] 3GPP TS 28.533: \"Management and orchestration; Architecture framework\"
NOTE: Void.
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TS 21.905 [8], TS 32.130 [13], TS 23.501 [15], TS 38.300 [16] and the
following apply:
**Cell Traffic Trace: The ability to trace one or more** active calls in one
or more cells.
**Collection period: Period that i** ndicates the measurement results
collection interval.
NOTE: The measurement results can refer to the _MeasResults_ IE defined in
clause 6.3.5, 3GPP TS 36.331 [18] for LTE or _MeasuredResults_ IE defined in
clause 11.3, 3GPP TS 25.331[19] for UMTS.
**End user visible events:** Refer to OMA Service Provider Requirements [9].
**Immediate MDT:** See 3GPP TS 37.320 [11].
**Logged MDT:** See 3GPP TS 37.320 [11].
**Management based activation/deactivation:** Trace Session is
activated/deactivated in different NEs directly from the management system.
**MDT measurements** : See 3GPP TS 37.320 [11].
**MBSFN Area** : See 3GPP TS 36.300 [14].
**MBSFN Area Reserved Cell** : See 3GPP TS 36.300 [14].
**Signalling based activation/deactivation:** Trace Session is
activated/deactivated in different NEs using the signalling interfaces between
those elements so that the NEs may forward the activation/deactivation
originating from the management system.
**Measurement period:** Period that indicates the performance measurement
reporting interval.
**Trace:** general term used for Subscriber, Equipment and Service Trace.
**Trace record:** in the NE a Trace record is a set of Traceable data
collected as determined by the Trace control and configuration parameters.
**Trace Recording Session:** time interval within a Trace session while trace
records are generated for the subscriber, UE or service being traced. The
triggering events starting and stopping a Trace recording Session are defined
in 3GPP TS 32.422 [2] (see figure 1).
**Trace Recording Session Reference:** identifies a Trace Recording Session
within a Trace Session (see figure 1)
Figure 1: Trace Recording Session
Note that overlapping calls/sessions are possible for e.g. Cell Traffic Trace.
**Trace Reference:** identifies a Trace Session and is globally unique (see
figure 2)
**Trace Session:** time interval started with a Trace Session Activation and
lasts until the Deactivation of that specific Trace Session (see figure 2)
Figure 2: Trace Session
**Trace Parameter Configuration:** a technique whereby a request for tracing a
certain Subscriber, UE or Service is sent by the management system to the NE
for execution.
**Trace Parameter Propagation:** a technique by which the NE processes the
trace configuration (received from the management system or another NE) and
sends it to the relevant Network Element(s) via signalling interface(s).
**Service Level Tracing:** Refer to OMA Service Provider Requirements [9].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TS 21.905
[8], TS 32.101 [1] , TS 32.130 [13] , TS 23.501 [15], TS 38.300 [16] and the
following apply:
RCEF RRC Connection Establishment Failure
RLF Radio Link FailureTCE Trace Collection Entity
TCE Trace Collection Entity
SCGF Second Cell Group Failure
# 4 Trace concepts and high-level architecture
## 4.1 Trace concepts
The diversity of Trace requirements makes it difficult to identify and
anticipate all the operator\'s specific needs. Thus, the objective of this TS
is not to list an exhaustive set of information to meet all the requirements.
Rather, Trace data is defined without any limitation on the 2 following
dimensions:
\- Trace scope: NEs and signalling interfaces to Trace.
\- Trace depth: level of details of Trace data.
In order not to have any limitation of Trace data, there are six levels of
details defined: Maximum, Minimum, Medium,
MaximumWithoutVendorSpecificExtension, MinimumWithoutVendorSpecificExtension
and MediumWithoutVendorSpecificExtension. The first three levels allow for
vendor specific information to be traced and sent in the trace report file.
The Maximum (or MaximumWithoutVendorSpecificExtension) Levels allow all Trace
data to be recorded. The other Levels provide a decoded subset of the data in
the Maximum Level and allow an operator the flexibility in selecting the
appropriate Trace data to record.
The Trace Depth, specified at the Trace Session activation, is used to choose
the level of detail of information to be retrieved.
The Maximum (or MaximumWithoutVendorSpecificExtension) Levels of detail allow
for retrieval of signalling interface messages within the Trace Scope in
encoded format (see figure 4.1.1).
Figure 4.1.1: Maximum (or MaximumWithoutVendorSpecificExtension) Levels of
details of Trace
The Minimum (or MinimumWithoutVendorSpecificExtension) Levels of detail allow
for retrieval of a decoded subset of the IEs contained in the signalling
interface messages (see figure 4.1.2).
Figure 4.1.2: Minimum (or MinimumWithoutVendorSpecificExtension) Levels of
detail of Trace
The Medium (or MediumWithoutVendorSpecificExtension) Levels of detail allow
for retrieval of the decoded subset of the IEs contained in the signalling
interface messages in the Minimum Level plus a selected set of decoded radio
measurement IEs.
The Trace data recorded at each Level is defined in 3GPP TS 32.423 [3].
## 4.2 Trace high level Architecture
There are two types of activation, management based activation and signalling
based activation.
Figure 4.2.1 represents the high-level view of the architecture of Trace
Management Based Activation/Deactivation.\ Figure 4.2.1 is only showing the
interfaces in principle a high-level view. Details of Trace
activation/deactivation are defined in 3GPP TS 32.422 [2].
{width="3.34375in" height="2.2291666666666665in"}
Figure 4.2.1: Architecture for Management Based Activation/Deactivation
Figure 4.2.2 represents the high-level view of the architecture of Signalling
Based Activation/Deactivation (non‑shared scenario). Figure 4.2.2 is only
showing the interfaces in principle. Details of Trace activation/deactivation
are defined in 3GPP TS 32.422 [2].
{width="4.947916666666667in" height="3.1354166666666665in"}
Figure 4.2.2: Architecture for Signalling Based Activation/Deactivation
Figure 4.2.3 represents the high-level view of the architecture of Trace
Reporting (non‑shared scenario). Figure 4.2.3 is only showing the interfaces
in principle.
{width="5.302083333333333in" height="3.125in"}
Figure 4.2.3: Architecture for High-level view of Trace Reporting
NOTE: The placement of the Trace Collection Entity is a deployment matter for
the operator. If it is placed outside the operator\'s secure zone, it is up to
the operator to use secure connections to and from the Trace Collection
Entity.
Figure 4.2.4 represents the high-level view of the architecture of Trace
Reporting within the context of the Services Based Management Architecture
(see TS 28.533 [22]) illustrating the relationship between Network Element as
\"trace data reporting MnS\" producer, Management Function as both producer
and consumer of this MnS and data consumer (TCE) as consumer of this MnS.
{width="4.354166666666667in" height="2.21875in"}
Figure 4.2.4: Interactions between producers and consumers of \"trace data
reporting MnS\"
## 4.3 Service Level Tracing for IMS high level Architecture
There are two ways in which to activate service level trace for IMS:
a) Trace activation at the UE, and
b) Trace activation at an IMS NE.
Figure 4.3.1 represents the high-level view of the architecture of Signalling
Based Activation/Deactivation at the UE required to support Service Level
Tracing for IMS. Figure 4.3.1 is only showing the interfaces in principle.
Details of Service Level Trace Activation/Deactivation are defined in 3GPP TS
32.422 [2].
{width="5.5625in" height="4.916666666666667in"}
Figure 4.3.1: Architecture for Signalling Based Activation/Deactivation
required for Service Level Tracing for IMS at the UE
Figure 4.3.2 represents the high-level view of the architecture of Signalling
Based Activation/Deactivation at an IMS NE required to support Service Level
Tracing for IMS. Figure 4.3.2 is only showing the interfaces in principle.
Details of Service Level Trace Activation/Deactivation are defined in 3GPP TS
32.422 [2].
{width="4.145833333333333in" height="3.1354166666666665in"}
Figure 4.3.2 : Architecture for Signalling Based Activation/Deactivation
required for\ Service Level Tracing for IMS at the IMS NE
Figure 4.3.3 represents the high-level view of the architecture of Trace
Reporting .\ Figure 4.3.3 illustrates the reporting context for Service Level
Tracing for IMS from the UE and is only showing the interfaces in principle.
The reporting context for Service Level Tracing for IMS from the IMS NE is
illustrated in Figure 4.2.3: Architecture for High-level view of Trace
Reporting .
> {width="2.46875in" height="2.2291666666666665in"}
Figure 4.3.3: Architecture for Trace Reporting from UE to support Service
Level Tracing for IMS
# 5 Trace requirements
## 5.1 General trace requirements
The general high-level requirements for Trace, common to both Management
activation/deactivation and Signalling Based Activation/Deactivation, are as
follows:
\- for the Maximum Level: Trace data encompassing all signalling messages on
the different interfaces dedicated to the events of the traced subscriber or
UE with their entire content (all IEs) shall be retrieved. The operator can
then use an external system (e.g. an Operations System (OS) in TMN
terminology) and decode specific information in line with operator
requirements.
\- for the Minimum Level: a selected subset of IEs shall be retrieved from the
signalling interface messages. The Minimum Level provides support for the most
common use cases (described in annex A).
\- for the Medium Level: a selected Minimum Level subset of IEs from the
signalling interface messages and a selected set of radio measurement IEs
shall be retrieved.
\- for the MaximumWithoutVendorSpecificExtension Level: it is the same as for
Maximum level without vendor specific data.
\- for the MediumWithoutVendorSpecificExtension Level: it is the same as for
Medium level without vendor specific data.
\- for the MinimumWithoutVendorSpecificExtension Level: it is the same as for
Minimum level without vendor specific data.
The high-level requirements for Trace, specific for Service Level Tracing for
IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply. (refer
to OMA Service Provider Environment Requirements [9]).
NOTE: Each referenced OMA requirement utilizes its OMA unique identifier
within square brackets. Clarification provided to each requirement should be
considered applicable to other OMA requirements using the same concepts.
  * [SLT-HL-1] with the following clarification:
\- The OMA term _OMA Service Provider Environment (OSPE)_ shall be understood
as PLMN.
  * [SLT-HL-5] with the following clarification:
\- In the context of Service Level Tracing for IMS a Minimum and Maximum level
of detail of trace only applies. Trace data for Service Level Tracing at
Minimum and Maximum level of detail shall include information associated to
_end user visible events_
  * [SLT-HL-6] with the following clarification:
\- The OMA term _service chain_ shall be understood as the relationship
between appropriate IMS elements needed to support a service. The term
_service chain_ does not imply a strict sequence of events.
\- The source of the logged trace information (e.g. IMS element including
S-CSCF) shall be identifiable when the retrieved trace information is
analyzed.
  * [SLT-HL-10] with the following clarification:
\- IMS elements that do not support Service Level Tracing shall not prohibit
the propagation of the Trace Parameter Propagation.
  * [SLT-OSR-1
\- Multiple Service Level Trace instances shall be simultaneously supported by
the PLMN and the UE (e.g. several services initiated from the same UE may each
have a Trace Recording Session Reference)
## 5.2 Requirements for Trace data
The high level requirements for Trace data, common to both Management
activation/deactivation and Signalling Based Activation/Deactivation, are as
follows:
\- The Trace records have to contain Information Elements or signalling
messages from control signalling and/or the characteristics of the user data.
The following list contains the Network Elements and the Traceable interfaces
in the NEs where tracing is needed:
\- MSC Server: A, Iu-CS, Mc and MAP (G, B, E, F, D, C) interfaces; CAP
\- MGW: Mc, Nb-UP, Iu-UP
\- HSS: MAP (C, D, Gc, Gr) Cx, S6a, S6d, Sh, N70, N71 and NU1 interfaces and
location and subscription information
\- EIR: MAP(F), S13, S13', MAP (Gf)
\- SGSN: Gb, Iu-PS, Gn, MAP (Gr, Gd, Gf), CAP (Ge) Gs, S6d, S4, S3 and S13\'
interfaces
\- GGSN: Gn, Gi and Gmb interfaces
\- S-CSCF: Mw, Mg, Mr and Mi interfaces
\- P-CSCF: Gm and Go interfaces
\- RNC: Iu-CS, Iu-PS, Iur, Iub and Uu interfaces
\- BM-SC: Gmb interface
> \- eNB/en-gNB: S1-MME, X2, Uu, F1-C, E1
\- MME: S1-MME, S3, S6a, S10, S11, S13, N26
\- Serving Gateway: S4, S5, S8, S11
\- PDN Gateway: S2a, S2b, S2c, S5, S6b, Gx, S8, SGi
\- AUSF: N12, N13
\- AMF: N1, N2, N8, N11, N12, N14, N15, N20, N22, N26
\- NEF: N29, N30, N33
\- NRF: N27
\- NSSF: N22, N31
\- PCF: N5, N7, N15
\- SMF: N4, N7, N10, N11, S5-C
\- SMSF: N20, N21
\- UDM: N8, N10, N13, N21, NU1
\- UPF: N4
\- AF: N5, N33
ng-eNB: NG-C, Xn-C, Uu
> \- gNB-CU-CP: NG-C, Xn-C, Uu, F1-C, E1, X2-C
>
> \- gNB-CU-UP: E1
>
> \- gNB-DU: F1-C
\- A unique ID within a Trace Session shall be generated for each Trace
Recording Session. This is called the Trace Recording Session Reference.
The high level requirements for Trace data applicable for Signalling Based
Activation/Deactivation for Service Level Tracing for IMS, are as follows:
\- In the context of Service Level Tracing for IMS Trace records have to
contain Information Elements or signalling messages or end user visible event
from control signalling and/or the characteristics of the user data. The
following list contains the IMS NEs and the Traceable interfaces in the NEs
where tracing is needed:
\- HSS: Sh and Cx interfaces and location and subscription information;
\- S-CSCF: ISC, Mw, Mg, Mr and Mi interfaces;
\- P-CSCF: Gm and Go interfaces;
\- I-CSCF: Mw and Cx interfaces;
\- SIP AS: ISC interface;
\- MRF: Mr interfaces;
\- MGCF: Mg interfaces;
\- BGCF: Mi interfaces;
  * A unique ID within a Trace Session shall be generated for each Trace Recording Session. This is called the Trace Recording Session Reference. In the context of Service Level Tracing for IMS the Trace Recording Session shall be unique across all IMS NEs within a PLMN.
Changes to existing NEs and interfaces above may be required. These changes
would be dependent upon various 3GPP working groups and possibly other
non-3GPP industry groups for completion of Trace Session
Activation/Deactivation.
For a detailed description of NEs and interfaces above see 3GPP TS 23.002 [4].
## 5.3 Requirements for Trace activation
### 5.3.1 Requirements for Trace Session activation
The high level requirements for Trace Session activation, common to both
Management activation and Signalling based activation), are as follows:
\- In the case of a subscriber Trace, the Trace Session will be activated for
a certain subscriber whose identification (IMSI in UTRAN/CS/PS) shall be known
in the NEs where subscriber Trace is needed.\ In the case of E-UTRAN the IMSI
shall not be included in the Trace Parameter Propagation data to the e-NodeB.
In the case of NG-RAN the IMSI/SUPI shall not be included in the Trace
Parameter Propagation data to the NG-RAN node.
\- In the case of a UE Trace, the Trace Session will be activated for a
certain UE whose identification (IMEI or IMEISV) shall be known in the NEs
where UE Trace is needed. In the case of E-UTRAN, neither the IMEI nor IMEISV
shall be included in the Trace Parameter Propagation data to the e-NodeB -
Trace Session activation shall be possible for both home subscribers and
visiting subscribers. In the case of NG-RAN, neither the IMEI/SUPI nor IMEISV
shall be included in the Trace Parameter Propagation data to the NG-RAN node.
\- There are two methods for Trace Session activation: Management activation
and Signalling activation.
\- For an established call/session within a Network Element, it is optional
for the Network Element to start a Trace Recording Session for the associated
Subscriber or UE upon receipt of the Trace activation request from the
management system.
\- A globally unique ID shall be generated for each Trace Session to identify
the Trace Session.\ This is called the Trace Reference.\ The method for
achieving this is to divide the Trace reference into Country, Operator, and
trace Id.
\- Trace Session may be activated from the management system simultaneously to
multiple NEs with the same Trace Reference (i.e. same Trace Session).
\- The Trace Scope and Depth shall be specified within the control and
configuration parameters during Trace Session activation.
\- There can be cases in a NE when it receives multiple Trace Session
activations for the same connection (e.g. simultaneous CS/PS connections). In
these cases the starting time of the Trace Session Activation and the starting
time of the first Trace Recording Session is the same using signalling based
activation. For these cases there are two different cases for the Trace
Session activation in a Network Element when it receives another Trace Session
activation to the same subscriber or MS:
\- If the Trace Reference is equal to an existing one, a new Trace Session
shall not be started;
\- If the Trace Reference is not equal to an existing one, a new Trace Session
may be started.
\- The management system shall always provide the trace control and
configuration parameters to the appropriate NEs at the time of Trace Session
activation.
\- The Trace collection entity shall be notified, in case of theTrace Session
activation has failed, by the response message with the specific cause (e.g.
overload) from the NE on which the Trace Session activation failure happened.
\- It shall be possible to specify the trace reporting method (file-based vs.
streaming) during Trace Session Activation.
\- In case of streaming trace reporting method being selected, the data
producer shall establish the connection to the data consumer upon Trace
Session Activation and provide data consumer with information about Trace
Session.
The high-level requirements for Trace Session activation, specific to
Signalling Based activation, are as follows:
\- Signalling based activation shall be able to capture signalling messages as
early in a session as possible, e.g. by means of a piggybacked trace
invocation message in the case of a new connection or new bearer setup
For active users, it shall be possible to start trace recording when the trace
order is received, by means of a distinct trace invocation message.
The high-level requirements for Trace Session activation, specific to
Management activation, are as follows:
\- In the case of a subscriber Trace, the Trace Session will be activated for
a certain subscriber whose identification (IMSI in UTRAN/CS/PS or Public User
Identity in IMS) shall be known in the NEs where subscriber Trace is needed.
In the case of a Cell Traffic Trace, Trace Session activation should be
possible for all calls active in a cell or multiple cells without knowledge of
the UEs' identification (IMEI or IMEISV).
\- In the case of a Cell Traffic Trace, Trace Sessions should be activated for
all the NEs where Cell Traffic Trace is specified.
\- In the case of Cell Traffic Trace (in a shared network only), a Trace
Session shall be started for UEs which are served by the Participating
Operator that has made the request to the Primary Operator.
The high-level requirements for Trace Session activation specific for Service
Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9]:
  * [SLT-COM-2] with the following clarification:
\- The OMA term _component_ in the context of Service Level Tracing for IMS
shall be understood as IMS NE and UE.
  * [SLT-HL-2] with the following clarification:
\- The OMA terms _device_ and _component_ shall be understood as UE and IMS
NE, respectively;
\- The IMS NEs HSS, P/I/S-CSCF, AS and UE, apply only.
  * [SLT-AC-1] with the following clarification:
\- The OMA term _Authorised Actor_ shall be understood as NE, EM or NM;
\- The OMA term _trace indication_ shall be understood as Start Trigger Event.
  * [SLT-AC-2] with the following clarification:
\- The OMA term _Service Provider_ shall be understood as Service Provider;
\- The OMA term _marking request_ shall be understood as the ability to send
the Trace Parameter Configuration to either the UE or IMS NE.
  * [SLT-AC-6]
  * [SLT-AC-7] with the following clarification:
\- The OMA term _criteria_ shall be understood as Trace Configuration
Parameters.
### 5.3.2 Requirements for starting a Trace Recording Session
The high level requirements for starting a Trace Recording Session, common to
both Management activation and Signalling based activation), are as follows:
\- It is optional for the NE to start a Trace Recording Session if there are
insufficient resources available within the NE.
\- The Trace Recording Session Reference shall be unique within a Trace
Session.
\- The Trace Recording Session should be started after appropriate start
trigger events are detected.
The high level requirements for starting a Trace Recording Session, specific
to Management activation, are as follows:
\- Each NE shall generate its own Trace Recording Session Reference (i.e.,
independent Trace Recording Sessions).
\- Each NE shall start the Trace Recording Session based upon the Trace
control and configuration parameters received by the NE in the Trace Session
activation.
\- In the case of a trace other than Cell Traffic Trace, the correlation of
Trace data will be done with a Trace Reference and IMSI / IMEI / IMEISV /
Public User Identity.
\- The Trace Recording Session can start only when the IMSI (in the case of a
subscriber trace), the IMEI / IMEISV (in case of UE trace) or Public User
Identity (in the case of IMS) is made available in the NE. In order to trace
the early phases of the call the IMSI (in case of subscriber trace), the IMEI
/ IMEISV (in case of UE trace) or Public User Identity (in case of IMS) shall
be made available to the NE as soon as practically possible. E.g. the IMSI and
IMEI / IMEISV shall be made available to both Serving RNC and Drift RNC.
\- In the case of E-UTRAN the Core Network node that triggers a Trace
Recording Session to E-UTRAN shall either:
\- provide a trace log including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI or IMEI(SV) to the Trace
Collection Entity, or
\- provide a notification including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI or IMEI(SV)) to the Trace
Collection Entity.
\- In the case of NG-RAN the Core Network node that triggers a Trace Recording
Session to NG-RAN shall either:
\- provide a trace log including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI /SUPI or IMEI(SV) to the Trace
Collection Entity, or
\- provide a notification including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI /SUPI or IMEI(SV)) to the
Trace Collection Entity.
\- In the case of a Cell Traffic Trace, the Trace Recording Session should
start upon the Trace control and configuration parameters being received by
the NEs in the Trace Session activation and the presence of call activity.
Furthermore, the the Core Network node that handles the traced session should
be requested to:
\- provide a trace log including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI or IMEI(SV) to the Trace
Collection Entity, or
\- provide a notification including Trace Reference, Trace Recording Session
Reference and the identity of the UE (i.e. IMSI or IMEI(SV)) to the Trace
Collection Entity.
\- In the case of a Cell Traffic Trace (in a shared network only), the Trace
Recording Session shall only be started for UEs which are served by the
Participating Operator that has made the request to the Primary Operator.
The high-level requirements for starting a Trace Recording Session, specific
for Service Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9]:
[SLT-HL-3] with the following clarification:
\- The OMA term _marked_ shall be understood as UE or IMS NE that has
previously received Trace Parameter Configuration information.
\- The OMA term _marking_ shall be understood as Trace Parameter
Configuration.
[SLT-COM-3] with the following clarification:
\- The OMA term _indication for SLT_ shall be understood as Start Trigger
Event
\- The OMA terms _inbound_ and _outbound_ protocols shall be understood as,
for example, inbound SIP and outbound Diameter.
## 5.4 Requirements for Trace deactivation
### 5.4.1 Requirements for Trace Session deactivation
The high level requirements for Trace Session deactivation, common to both
Management deactivation and Signalling based deactivation, are as follows:
\- The Trace Session shall be deactivated using the Trace Reference specified
for the Trace Session activation.
\- The Trace Session shall be deactivated in all those NEs where it was
activated.
\- The deactivation of a Trace Session during a Trace Recording Session within
a NE may take place anytime after the NE receives the deactivation request
until the end of the current Trace Recording Session related to the traced
Subscriber or UE.
\- Trace Session deactivation in a NE could occur when two simultaneous
signalling connections for a subscriber or UE exist. E.g. figure 5.4.1 shows
NE 3 having two signalling connections (one of them or both of them are traced
with the same Trace Reference) and a Trace deactivation message is received.
The Trace Session shall be closed.
Figure 5.4.1: Trace Session closure
\- In case of streaming trace reporting, upon the Trace Session deactivation
and end of the currently open Trace Recording Sessions, the data producer
shall terminate connection to the data consumer.
The high-level requirements for Trace Session deactivation specific for
Service Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9].
[SLT-COM-2] with the following clarification:
[SLT-AC-1] with the following clarification:
\- Deactivation at an IMS NE forming part of an IMS _service chain_ shall not
prohibit the propagation of the Trace Parameter Propagation.
### 5.4.2 Requirements for stopping a Trace Recording Session
The high level requirements for stopping a Trace Recording Session, common to
both Management deactivation and Signalling based deactivation, are as
follows:
\- The Trace Recording Session should be stopped after appropriate stop
trigger events are detected.
\- Trace Session deactivation in a NE could occur when two simultaneous
signalling connections for a subscriber or UE exist. E.g. figure 5.4.2 shows
NE3 having two signalling connections, but only one connection is traced. If
the non-traced connection is released, the Trace Recording Session shall be
kept in NE3. If the traced connection is released the Trace Recording Session
shall be closed.
Figure 5.4.2: Trace Recording Session closure
The high level requirements for stopping a Trace Recording Session, specific
to Signalling based deactivation, are as follows:
The Trace Recording Session should be stopped after an NE receives the
appropriate signalling deactivation message.
The high-level requirements for stopping a Trace Recording Session, specific
for Service Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9].
[SLT-AC-3] with the following clarification:
\- The implication of un-marking a UE is threefold:
a) It prohibits the initiation of further trace recording sessions from that
UE or IMS NE (i.e. subsequent services shall not be traced);
b) It cancels outstanding Trace Parameter Configuration information on a UE or
IMS NE;
c) Existing trace recording sessions active in the PLMN may continue until an
appropriate Stop Event Trigger.
## 5.5 Requirements for Trace Data reporting
The high level requirements for Trace Data reporting, common to both
Management activation/deactivation and Signalling Based
Activation/Deactivation, are as follows (Trace record contents, file formats
and file transfer mechanisms are defined in 3GPP TS 32.423 [3]):
\- Trace records should be generated in each NE where a Trace Session has been
activated and a Trace Recording Session has been started.
\- Format of the Trace records shall be XML or GPB based on the Schema in TS
32.423 [3].
\- In UMTS or EPS trace, the trace records should be transferred on the Itf-N
to the Network Manager using one of two approaches: direct transfer from NE to
NM or transfer from NE to NM via EM.
\- Trace records may also be transferred to an external IP address (received
in Trace Control and Configuration Parameters) in 3 ways:
1) Direct transfer from NE to IP address
2) Transfer from NE to IP address via management system
3) Transfer from NE to management system. The management system notifies the
holder of the IP address that collects the files.
\- The Trace Records in a shared node for a Participating Operator's trace
request should be collected by the Primary Operator's NE and may be delivered
through the Primary Operator\'s management system. The Trace records shall be
made available to the Participating Operator's management system.
The high-level requirements for stopping a Trace Recording Session, specific
for Service Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9].
[SLT-HL-4] with the following clarification:
\- Encoded trace information shall be Standard File Format. Standard File
Format may not be applicable for encoded trace information at the UE.
[SLT-HL-7] with the following clarification:
\- An instance of a service level trace across a PLMN shall be uniquely
identifiable using the Trace Recording Session Reference.
[SLT-HL-8]
[SLT-COM-1] with the following clarification:
\- Time stamping alone to determine the sequence of IMS NEs performing trace
within the _service chain_ shall not be used;
\- Statistical information shall not be included as part of IMS NE
characteristics;
\- Service Level Tracing shall apply only to the IMS session layer and not the
underlying transport layers.
[SLT-COM-4] with the following clarification:
\- An IMS NE, in addition to providing trace information specific to a service
that it has traced, may also make available other information, for example,
timestamp and throughput information.
[SLT-NI-1] with the following clarification:
\- The UE shall expose a standardised interface for Trace Parameter
Configuration and the retrieval of trace information. This interface may not
be standardized by 3GPP.
[SLT-NI-2] with the following clarification:
\- An IMS NE shall transfer Trace records in Standard File Formats.
The high-level requirements for Trace Data reporting in case of file-based
trace reporting are as follows:
\- For transfer of Trace records FTP or secure FTP shall be used.
Editor\'s note: The transfer of Trace record from the UE is For Further Study.
The high-level requirements for Trace Data reporting in case of streaming
trace reporting are as follows:
\- The same connection between data producer and data consumer may be used for
the reporting of Trace data under all Trace Recording Sessions of the same
Trace Session reported by the same data producer.
\- A connection from the data producer to the consumer shall be established
and information about Trace Session shall be provided to the data consumer.
\- Binary encoding shall be used for the transfer of all Trace data from data
producer to the data consumer.
\- The periodicity and amount of data in each data burst from data producer to
data consumer shall maintain the data relevance while minimizing the amount of
transport overhead.
\- The data producer shall re-establish connection to the data consumer and
provide the information about Trace Session upon unexpected connection
termination (e.g. in cases such as re-start of data producer).
\- It shall be possible to specify format of trace records based on GPB Schema
in TS 32.423 [3].
## 5.6 Requirements for Privacy and Security
The high-level requirements for privacy and security, specific for Service
Level Tracing for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9].
[SLT-PRV-1] with the following clarification:
\- Privacy shall be applied across the appropriate Trace Itf-N.
[SLT-SEC-1]
[SLT-SEC-2]
[SLT-SEC-3] with the following clarification:
\- It may not be possible to retrieve Trace information from IMS NEs from
outside the PLMN where the IMS NEs reside.
[SLT-IOP-1] with the following clarification:
\- The propagation of the Trace Parameter Configuration and the Start Trigger
event shall be prohibited by the PLMN when e.g. the SIP AS is hosted outside a
PLMN.
As the radio access nodes in E-UTRAN are outside an operator's secure domain,
the following requirement applies for E-UTRAN as described in 3GPP TS 33.401
[10]:
[SET-SEC-1] Keys stored inside eNBs shall never leave a secure environment
within the eNB. When security key(s) transported on control signalling
messages are included in the trace file, the key value(s) shall be removed and
replaced with the value "Unavailable".
As the radio access nodes in NG-RAN are outside an operator's secure domain,
the following requirement applies for NG-RAN as described in 3GPP TS 38.401
[17]:
[SET-SEC-2] Keys stored inside NG-RAN node shall never leave a secure
environment within the NG-RAN node. When security key(s) transported on
control signalling messages are included in the trace file, the key value(s)
shall be removed and replaced with the value \"Unavailable\".
The high-level requirements for privacy and security in case of streaming
trace reporting are as follows:
\- The connection between data producer and data consumer shall provide the
data privacy.
\- The connection between data producer and data consumer shall provide the
data integrity.
## 5.7 Requirements for Charging
The high-level requirements for charging, specific for Service Level Tracing
for IMS are as follows:
The following high-level OMA Service Level Tracing requirements apply [9].
[SLT-CRG-1]
## 5.8 Use cases for Trace
The operator can use Subscriber and UE Trace for numerous purposes. However,
the use cases for Trace can be divided into two basic categories:
\- Troubleshooting use cases cover situations where the operator is solving an
existing problem in his network;
\- Validation testing use cases cover situations where the operator is not
solving a known problem but merely analysing, fine-tuning or optimising his
network.
A more detailed description for the following use cases for Subscriber and UE
Trace can be found in annex A:
\- Interoperability checking between UE from different vendors;
\- QoS profile checking for a subscriber after a subscriber complaint;
\- Malfunctioning UE;
\- Checking radio coverage in a certain area;
\- Testing new features;
\- Fine-tuning and optimisation of algorithms or procedures.
The operator can use Service Level Tracing for IMS for numerous purposes.
However, the use cases for Trace can be divided into two basic categories:
\- Troubleshooting use cases cover situations where the operator is solving
existing problems with services offered to their subscribers.
\- Validation testing use cases cover situations where the operator is not
solving a known problem but performing service regression and automated
service testing.
A more detailed description of the following use cases for Service Level
Tracing can be found in annex A:
Automated testing of service provider services;
Regression testing following a network fix;
Service fault localization within a Service Provider's network;
Service fault localization when a service is hosted by a third party Service
Provider.
## 5.9 Requirements for a throttled Trace Recording Session
The high-level requirements for throttled Trace Recording Session are as
following:
\- It shall be possible for the NE to start a throttled trace recording
session if there are insufficient resources available within the NE.
\- It shall be possible for the NE to indicate an ongoing trace recording
session that is throttled if there are insufficient resources available within
the NE.
The high-level requirements for clearing up a throttled Trace Recording
Session are as following:
\- It shall be possible for the NE to clear up a throttled trace recording
session if there are sufficient resources available within the NE.
# 6 Requirements for managing MDT
## 6.1 Business Level Requirements
REQ-MDT-CON-1 The Operator shall be able to collect measurements for Network
Performance Management purposes from UEs within their network.
REQ-MDT-CON-2 The collected measurements shall be made available in a
centralised entity.
REQ-MDT-CON-3 Operator shall be able to select specific set of subscribers for
the measurement collection based on IMSI.
REQ-MDT-CON-4 Operator shall be able to select specific set of devices for the
measurement collection based on IMEI(SV).
REQ-MDT-CON-5 Operator shall be able to select specific set of devices for the
measurement collection based on geographical area.
REQ-MDT-CON-6 Operator shall be able to select specific set of devices for the
measurement collection based on device capabilities.
REQ-MDT-CON-7 Operator shall be able to select specific set of subscribers
based on IMSI and a geographical area for the measurement collection.
REQ-MDT-CON-8 Operator shall be able to select specific set of devices based
on IMEI(SV) and a geographical area for the measurement collection.
REQ-MDT-CON-9 Operator shall be able to configure set of device capabilities
and a geographical area for the measurement collection.
REQ-MDT-CON-10 Operator shall be able to select specific set of subscribers
based on IMSI and a set of device capabilities and a geographical area for the
measurement collection.
REQ-MDT-CON-11 Operator shall be able to select specific set of devices
IMEI(SV) and capabilities and a geographical area for the measurement
collection.
REQ-MDT-CON-12 Operator shall be able to select set of subscribers based on
IMSI and a set of device capabilities for the measurement collection
REQ-MDT-CON-13 Operator shall be able to select specific set of devices
IMEI(SV) and capabilities for the measurement collection.
REQ-MDT-CON-14 The operator shall be able to configure the duration of the
measurement collection.
REQ-MDT-CON-15 The operator shall be able to configure the UE measurement
types and events for collection.
REQ-MDT-CON-16 The operator shall be able to configure the type of UE
measurement reporting and log formats i.e. raw measurement results or type of
measurement aggregation (e.g. statistical aggregation of raw measurement
results, sampling of raw measurement results, etc.)
REQ-MDT-CON-17 The management of MDT shall be independent from the management
of SON functionalities
REQ-MDT-CON-18 The management of UE based network performance measurements
shall allow the network operator to control whether or not it is possible to
link a measurement result and related information (e.g. location information)
to the user terminal type ID (i.e. IMEI-TAC).
REQ-MDT-CON-19 An operator that uses more than one PLMN shall be able to
**activate MDT in each of those PLMN and** continue MDT cross its own PLMN
IDs.
NOTE: MDT data can be collected by a network operator operating with a set of
PLMN_IDs in different countries, but under the same common user privacy
agreement in different countries in the same legal privacy protection domain.
REQ-MDT-CON-20 The operator shall be able to request collection of positioning
information related to UE measurements.
REQ-MDT-CON-21 Operator shall be able to correlate the location information
with the MDT UE measurements.
REQ-MDT-CON-22 MDT function shall support RAN sharing scenarios.
REQ-MDT-CON-23 The TCE used to collect MDT data shall be controlled by the
same operator, as the operator that the user has given his consent to.
REQ-MDT-CON-24 Operator shall be able to minimize the amount of redundant MDT
data.
REQ-MDT-CON-25 For management based MDT data collection, operator shall be
able to specify the desired amount of MDT data and the desired number of UEs
over period of time.
REQ-MDT-CON-26 The MOP shall be able to select UEs according to the POP
intention.
REQ-MDT-CON-27 The recorded Subscriber and Equipment Trace data related to a
particular POP shall be delivered to that POP but no other POP.
REQ-MDT-CON-28 The Operator shall be able to collect MBSFN UE measurements.
REQ-MDT-CON-29 The operator shall be able to request collection of sensor
information related to UE measurements.
REQ-MDT-CON-30 The operator shall be able to configure MDT for a UE in dual
connected mode both on primary and secondary node.
## 6.2 Specification level requirements
### 6.2.1 Logged MDT and Immediate MDT requirements
All requirements are valid for Logged MDT and Immediate MDT functionality if
not mentioned otherwise:
REQ-MDT-FUN-01 It shall be possible to collect UE measurements based on one or
more IMEI(SV) number.
REQ-MDT-FUN-02 It shall be possible to collect UE measurements based on one or
more IMSI number.
REQ-MDT-FUN-03 It shall be possible to collect UE measurement logs preceding
and following a particular event (e.g. radio link failure).
REQ-MDT-FUN-04 Each UE measurement result shall be linked to a time stamp.
Accuracy of time information including absolute time and relative time. The
absolute time can refer to the _absoluteTimeStamp_ IE defined in clause 6.2.2,
3GPP TS 36.331[18] for LTE or the _absoluteTimeInfo_ IE in clause 11.3, 3GPP
TS 25.331[19] for UMTS. The relative time can refer to the _relativeTimeStamp_
IE defined in clause 6.2.2, 3GPP TS 36.331[18] for LTE or the
_relativeTimeStamp_ IE in clause 11.3, 3GPP TS 25.331[19] for UMTS.
REQ-MDT-FUN-05 The solutions for collecting UE measurements for the purpose of
minimization of drive tests shall be able to work independently from SON
support in the network.
REQ-MDT-FUN-06 It shall be possible to collect UE measurements in one or more
cells or TA/RA/LA.
REQ-MDT-FUN-07 It shall be possible to collect UE measurements based on one or
more IMSI in one or more cells or TA/RA/LA.
REQ-MDT-FUN-08 It shall be possible to collect UE measurements based on one or
more IMEI(SV) in one or more cells or TA/RA/LA.
REQ-MDT-FUN-09 It shall be possible to configure UE measurement types and
triggering conditions under which UE measurements would be collected for MDT.
REQ-MDT-FUN-10 Void.
REQ-MDT-FUN-11 It shall be possible to configure the condition of MDT data
collection based on certain device capability information in one or more cells
or in TA/RA/LA.
REQ-MDT-FUN-12 It shall be possible to configure MDT data collection based on
one or more IMSI/SUPI in one or more cells or TA/RA/TA with a set of device
capability information.
REQ-MDT-FUN-13 It shall be possible to configure MDT data collection based on
one or more IMEI(SV) in one or more cells or TA/RA/TA with a set of device
capability information.
REQ-MDT-FUN-14 It shall be possible to configure MDT data collection based on
one or more IMEI(SV) with a set of device capability information.
REQ-MDT-FUN-15 It shall be possible to configure MDT data collection based on
one or more IMSI/SUPI with a set of device capability information.
REQ-MDT-FUN-16 It shall be possible to activate a Trace Session for MDT data
collection (or UE measurement collection for MDT purpose) independently from
other mobility related performance measurements and call trace collection.
REQ-MDT-FUN-17 It shall be possible to deactivate MDT data collection by using
Trace Reference.
REQ-MDT-FUN-18 It shall be possible to create a combine Trace Session for UE
measurement collection and for subscriber and equipment/cell trace.
REQ-MDT-FUN-19 Void.
REQ-MDT-FUN-20 MDT activation shall be supported for a UE belonging to any
PLMN within the same MDT PLMN list.
REQ-MDT-FUN-21 MDT data collection shall continue if a user is changing PLMN
and the target PLMN within the same MDT PLMN list.
_REQ-MDT-FUN-22 It shall be possible_ to collect positioning data related to
UE measurements, which can be either geographical coordinates or raw
positioning measurements sufficient to be input for a post processing
positioning algorithm.
REQ-MDT-CON-23 It shall be possible for management system to correlate MDT UE
measurements with location information.
NOTE: There may be regulatory obligation to delete MDT data after processing.
REQ-MDT-FUN-24 The PLMN where TCE collecting MDT data resides shall match the
RPLMN of the UE providing the MDT data.
REQ-MDT-FUN-25 In the case of Management based MDT the MOP shall be able to
select UEs according to the POP intention.
REQ-MDT-FUN-26 The recorded Subscriber and Equipment Trace data related to a
particular POP shall contain information so that if can be sent to that POP.
REQ-MDT-FUN-27 In case of non-file-based trace reporting, binary encoding
shall be used for the transfer of all MDT data from data producer to the data
consumer.
REQ-MDT-FUN-28 It shall be possible to configure MDT report type to be used
for logged MDT for NR.
REQ-MDT-FUN-29 Management based MDT configuration and signalling based MDT
configuration shall be able to coexist in parallel for NR.
REQ-MDT-FUN-30 In case of logged MDT, it shall be possible to collect specific
NR neighbour cell measurements on cell level.
REQ-MDT-FUN-31 It shall be possible to continue the actual ongoing process of
logging for the UE in RRC INACTIVE state when the logging process for the UE
starts in RRC IDLE state in NR.
REQ-MDT-FUN-32 In the case of immediate MDT, the measurement quantities shall
be able to handle cell level RSRP/RSRQ/SINR in LTE and NR and beam level
BRSRP/BRSRQ/BSINR in NR.
REQ-MDT-FUN-33 In the case of signalling based immediate MDT, configuration
shall be able to propagate across RATs for the case of Xn inter-RAT intra-
system handover to/from NR.
REQ-MDT-FUN-34 In the case of EN-DC scenario, for immediate MDT, configuration
shall be able to be provided for both primary node and secondary node
independently.
REQ-MDT-FUN-35 In the case of MR-DC, there is a split DRB in which data shall
be sent over both MN and SN. In such a case, the PDCP data volume shall
include the data sent over both MN and SN for that DRB.
REQ-MDT-FUN-36 In the case of immediate MDT, it shall be possible to collect
the measurement pollution indication so that TCE is able to correlate and
filter polluted measurements in NR.
REQ-MDT-FUN-37 In the case of immediate MDT, it shall be possible to configure
beam level BRSRP/BRSRQ/BSINR in NR.
### 6.2.2 Logged MBSFN MDT requirements
Requirements in clause 6.2.1 that apply to MBSFN MDT are as follows:
> REQ-MDT-FUN-01
>
> REQ-MDT-FUN-02
>
> REQ-MDT-FUN-03
>
> REQ-MDT-FUN-04
>
> REQ-MDT-FUN-05
>
> REQ-MDT-FUN-06
>
> REQ-MDT-FUN-07
>
> REQ-MDT-FUN-08
>
> REQ-MDT-FUN-09
>
> REQ-MDT-FUN-11
>
> REQ-MDT-FUN-12
>
> REQ-MDT-FUN-13
>
> REQ-MDT-FUN-14
>
> REQ-MDT-FUN-15
>
> REQ-MDT-FUN-20
>
> REQ-MDT-FUN-21
>
> REQ-MDT-FUN-24
>
> REQ-MDT-FUN-25
REQ-MDT-MBSFN-FUN-1 It shall be possible to activate a Session for Logged
MBSFN MDT data collection independently from other mobility related
performance measurements and call trace collection.
REQ-MDT-MBSFN-FUN-2 It shall be possible to configure MBSFN MDT data
collection based on certain device capability information in specific MBSFN
area(s).
REQ-MDT-MBSFN-FUN-3 It shall be possible to deactivate Logged MBSFN MDT data
collection by using Trace Reference.
REQ-MDT-MBSFN-FUN-4 It shall not be possible to combine Logged MBSFN MDT
session with any other trace sessions.
# 7 Requirements for managing RLF and RCEF reports
## 7.1 Business level requirements
REQ-RLF-CON-1 The Operator shall be able to collect RLF and RCEF reports from
eNBs within their network.
REQ-RLF-CON-2 The collected RLF and RCEF reports shall be made available in a
centralised entity.
REQ-RLF-CON-3 The Operator shall be able to select certain areas for
collecting RLF and RCEF reports.
REQ-RLF-CON-4 The Operator shall be able to collect RLF and RCEF reports from
NG-RAN nodes within their network.
## 7.2 Specification level requirements
REQ-RLF-FUN-01 It shall be possible to collect RLF and RCEF reports in one or
more eNodeBs.
REQ-RLF-FUN-02 It shall be possible to activate a Trace Session for RLF and
RCEF data collection independently from other Trace jobs.
REQ-RLF-FUN-03 It shall be possible to collect RLF and RCEF reports in one or
more NG-RAN nodes.
REQ-RLF-FUN-04 In case of non-file-based trace reporting, binary encoding
shall be used for the transfer of all RLF and RCEF reports data from data
producer to the data consumer.
REQ-RLF-FUN-05 It shall be possible to collect neighbour cell measurements for
RLF and RCEF reports in one or more eNodeBs and NG-RAN nodes.
REQ-RLF-FUN-06 It shall be possible to collect SCGF information for RLF
reports in one or more RAN nodes in the case of MR-DC scenario.
###### ## Annex A (informative): Trace use cases
# A.1 Use case #1: multi-vendor UE validation
## A.1.1 Description
The aim of this use case is to check how different vendor\'s UEs are working
(e.g. in field testing) in the mobile network or to get detailed information
on the UE.
The study can be started by an initiative from operator for verification of UE
from different vendors (e.g. testing how the UE fulfils the requirements set
by the standards).
The operator can perform the test using test UEs or tracing subscribers\'
mobiles.
## A.1.2 Example of required data for this use case
The Trace parameters required to cover use case #1 are listed below:
\- Tracing is needed in the Radio Network (RNC) or in the Core Network (MSS,
SGSN);
\- The identification of the Trace case shall be IMEI or IMEISV (and possibly
IMSI);
\- The level of details usually is to get the most important IEs from the
signalling messages (Medium Level) or all messages with their encoded IEs
(Maximum Level).
The traceable protocols are:
\- In RNC: RRC, NBAP, RNSAP, RANAP.
\- In MSS/SGSN: DTAP messages.
# A.2 Use case #2: subscriber complaint
## A.2.1 Description
The aim of this use case is to check how the complaining subscriber\'s
services are working, to get information on the services in order to find out
the reason for the complaint.
The study can be started after a subscriber is complaining at his/her home or
visited operator that some of the service to which he/she subscribed is not
working. E.g. the subscriber:
\- cannot make calls;
\- cannot use some supplementary service;
\- does not get the negotiated QoS level (e.g. Mobile subscriber activates
video-streaming application to watch the latest sport events and every time
the subscriber tries to connect to the service the system disconnects the
subscriber\'s UMTS bearer).
As the Trace is activated for a subscriber, the signalling based Trace Session
activation shall be used, as the location of the subscriber is not known.
## A.2.2 Example of required data for this use case
The Trace parameters required to cover the use case #2 are listed below:
\- The list of NEs where tracing may be needed depends on the service being
complained about by the subscriber. For this use case, tracing should be
possible in all network elements, such as: HSS, MSS, RNC, MGW, SGSN, GGSN.
\- The identification of the subscriber in a Trace is IMSI in UTRAN/CS/PS. The
identification of the UE in a Trace is IMEI or IMEISV.
\- The data includes those Information Elements from the signalling messages,
which are related to the service(s) being complained about by the subscriber
(Medium Level).
Example cases, which can be the basis for subscriber complaint:
1\. The subscriber\'s CS call is misrouted
This illustrates an instance where a subscriber complains that his calls are
being cross-connected (or misrouted). Such a complaint involves setting up a
Trace at all the 3GPP standardised interfaces being handled by the MSC.
However, the Trace functionality shall not cover MSC internal or vendor
proprietary interfaces. The Trace record shall need to have the dialled number
and connected number.
2\. The subscriber\'s call is dropped
Tracing data is required from the radio network (UTRAN) or from the core
network (MSS, SGSN, GGSN). In the radio network the radio coverage shall be
checked. See use case #4 (checking radio coverage). Beside the radio coverage,
other information can be useful as well, like RLC parameter, power information
(OLPC or RRC measurement report), error ratios (BLER / BER, SDU error ratio),
etc. Tracing in the core network is needed also, if the problem is not in the
radio network. E.g. in case of PS domain the call can be dropped by the
application due to the long delays or congestions in TCP layer or due to bad
QoS. Thus in SGSN the requested and negotiated QoS parameters should be
included in the Trace record.
3\. The received QoS level is less than the negotiated level.
To be able to solve the possible problem Tracing data is required from HSS,
SGSN, GGSN, and UTRAN. Furthermore in case of problem in CS calls tracing in
MGW shall be performed.
From HSS Trace data the operator can monitor whether the subscriber\'s
authentication to the network is successful, and what kind of QoS parameters
are allowed to the subscriber. From SGSN Trace data the operator can monitor
PDP context creation request from mobile. Request seems to contain legal QoS
profile (incl. Maximum bandwidth, guaranteed bandwidth etc) and the local
resources in SGSN are available to provide the service as requested by the
subscriber. From UTRAN Trace data the operator can monitor whether the maximum
bandwidth and guaranteed bandwidth, requested by SGSN, acceptable for UTRAN.
Thus to check whether UTRAN can provide and maintain the requested radio
access bearer services. From GGSN Trace data the operator can monitor PDP
context activation between SGSN and GGSN. If the problem is in the CS domain
the MGW Trace can provide the QoS data.
# A.3 Use case #3: malfunctioning UE
## A.3.1 Description
The aim of this use case is to check a UE, which is not working correctly.
The study can be initiated by the operator when he/she suspects that a UE not
working according to the specifications or he/she would like to get more
information on a specific UE, which is on the track or block EIR list.
## A.3.2 Example of required data for this use case
The Trace parameters required to cover the use case #3 are listed below:
\- UE Tracing may be needed in the Radio Network (UTRAN) or in the Core
Network (MSS, SGSN).
\- The identification of the subscriber in a Trace is IMSI. The identification
of the UE in a Trace is IMEI or IMEISV.
\- The level of details depends on the operator needs (either Minimum Level or
Medium Level).
The malfunction of UE in UTRAN can occur in different places. The problem can
be in basic RRC and RANAP signalling, Radio Bearer procedures, Handover
procedures, Power control etc.
Therefore, all RRC, RANAP, NBAP, RNSAP signalling procedures, transmission
powers, error ratios (BLER / BER, SDU error ratio) and retransmission can be
included in the Trace records.
# A.4 Use case #4: checking radio coverage
## A.4.1 Description
This use case aims at checking the radio coverage on a particular network
area.
This study can be started by an initiative from operator for testing radio
coverage on a particular geographical area following network extension for
instance (e.g. new site installation).
The operator can perform a drive test on the new site area, and check that
radio coverage is correct, or may collect Cell Traffic Trace data on all of
the cells active in the area of interest.
The other options for collecting information on radio coverage is to collect
RLF reports generated by the UE in an E-UTRAN network. .
## A.4.2 Example of required data to cover use case #4
The DL radio coverage can be checked using the values of CPICH Ec/No and RSCP
measured by the mobile on the cells in the active set and the monitored set.
These measurements are sent to the RNC trough the RRC message MEASUREMENT
REPORT.
For E-UTRAN the RLF reports contained in the UE Information Response message
provide the radio condition in terms of RSRP and RSRQ values when the Radio
Link failure happened together with a location information.
The UTRAN Trace record intra frequency measurement contains the required
information.
The UTRAN Trace record inter frequency, and inter RAT measurements can also be
used to check radio coverage with other frequencies or systems.
After a network extension, the operator can check that Ec/No and RSCP levels
on the new site area are the expected ones, and there is no coverage hole.
The following Trace parameters are required to cover use case #4:
\- The type of NE to Trace is RNC or eNB.
\- The identification of the subscriber in a Trace is IMSI. The identification
of the UE in a Trace is IMEI or IMEISV.
\- In the case of a Cell Traffic Trace, the identification of the cells where
Trace data is to be collected.
\- In case of RLF report collection the list of eNodeBs where the RLF reports
are collected.
\- The Trace data to retrieve shall contain the messages with all IEs that are
relevant for radio coverage.
# A.5 Use case #5: testing a new feature
## A.5.1 Description
This use case aims at testing the implementation of a new feature in the
network before its general deployment. The functionality can be either a
standard feature or a vendor/operator specific feature.
This study is started by an initiative from the operator.
The operator can perform a drive test on the area where the feature is
introduced, and check its good behaviour as well as its benefits, in term of
quality or capacity. He can also rely on subscribers\' Trace data when they
use the feature to be tested.
## A.5.2 Example of required data to cover use case #5
Depending on the feature, the list of NEs to Trace, as well as the level of
details can be different.
For a feature concerning Core and UTRAN networks, for instance hard handover,
SRNS relocation, or new UMTS bearer service, the operator needs to activate
Trace on several NEs.
Then, the operator can be interested in:
\- Only the protocol messages generated by the feature; or
\- The impact of the new feature introduction on the network, for instance,
the radio coverage, the capacity, the quality, or the behaviour of the
existing algorithms.
In this last case, the operator needs more detailed data, for instance
messages with all (Maximum Level) or part of the IEs (Minimum Level).
The following Trace parameters are required to cover use case #5:
\- The types of NEs to Trace are NEs that can be traced related to the
feature.
\- The identification of the subscriber in a Trace is IMSI. The identification
of the UE in a Trace is IMEI or IMEISV.
\- The Trace data to retrieve can be either only the protocol messages
(Maximum Level) or the messages with all or part of the IEs (Minimum Level).
# A.6 Use case #6: fine-tuning and optimisation of algorithms/procedures
## A.6.1 Description
Subscriber and UE Trace is part of the optimisation process. Trace data are
used to get feedback on the network quality and capacity after optimisation
operations like parameter fine-tuning, or new network design. Each
intervention to improve the network behaviour can be confirmed both by
measurement data and Trace data.
This study is started following an initiative from the operator.
The operator can perform a drive test on the area and/or activate a Cell
Traffic Trace where the optimisation has been performed, and check its good
behaviour as well as its impact on the network. He can also rely on
subscribers\' Trace data when they use the network to be optimised.
## A.6.2 Example of required data to cover use case #6
Depending on the optimisation operation, the list of NEs to Trace, as well as
the level of details can be different. But generally, fine-tuning activities
like scrambling code plan, handover and relocation algorithms, or call
admission algorithm optimisation concern a very specific part of the network.
To cover this use case, the operator is usually searching for the highest
level of details, on specific NEs.
The following Trace parameters are required to cover use case #6:
\- The types of NEs to Trace are any NE that can be traced related to the
network to be optimised.
\- The identification of the subscriber in a Trace is IMSI. The identification
of the UE in a Trace is IMEI or IMEISV.
\- In the case of a Cell Traffic Trace, the identification of the cells where
Trace data is to be collected.
\- The Trace data to retrieve are the messages in encoded format with all
(Maximum Level) or part of the IEs (Minimum Level).
# A.7 Use case #7: Automated testing of Service Provider services
## A.7.1 Description
For a detailed description of this use-case see OMA Service Provider
Environment Requirements [9].
# A.8 Use case #8: Regression testing following a network fix
## A.8.1 Description
For a detailed description of this use-case see OMA Service Provider
Environment Requirements [9].
# A.9 Use case #9: Service fault localization within a Service Provider
network
## A.9.1 Description
For a detailed description of this use-case see OMA Service Provider
Environment Requirements [9].
# A.10 Use case #10: Service fault localization when a service is hosted by a
third party Service Provider
## A.10.1 Description
For a detailed description of this use-case see OMA Service Provider
Environment Requirements [9].
# A.11 Use case #11 Analysing drop calls in E-UTRAN
## A.11.1 Description
One of the important KPIs in an operator's network is the call drop KPI. A
call drop KPI is defined also in 3GPP TS 32.450 [12]. The call drop KPI
indicates in percentage of how many successfully established calls have been
dropped. This is a crucial indicator about the quality of the network that has
clear effects to the user experience.
Therefore one of the most important targets for operator is to minimize the
value of the Call drop rate KPI. The root cause of a dropped call is typically
a radio link failure or a handover failure. Both of these failures currently
reported by the UE in the RLF reports, which additionally contain the radio
conditions at the time the failure happened. Therefore the RLF reports are
very important input for operators to determine the reasons for degradations
in Call Drop KPI. In addition the RLF reports combines the radio conditions
with location information, therefore it can serve as a valueable input for
analysis how to decrease the Call Drop KPI.
## A.11.2 Example of required data to cover use case #11
For further analysis of drop calls information is required about the radio
conditions of the radio network when the drop calls happens. In E-UTRAN the
ideal data can be collected by utilising the RLF reports defined in TS 37.320
[11]. RLF reports contain the RSRP and RSRQ values of the radio conditions at
the time when the Radio Link Failure happens that can lead in most of the
cases to a drop call. The RLF report contains also the time and location of
the RLF event.
# A.12 Use case #12 Periodical sampling of network performance
## A.12.1 Description
For management purpose, an operator need to measure statistical network
performance e.g. overall coverage status, overall voice call and data session
performance and so on. The data collected could include measurements, such as
Ec/No and RSCP for case of UMTS and RSRP and RSRQ for case of E-UTRAN, and
statistical business level KPIs such as sampled call drop rate and application
layer throughput. By periodically sampling these network performance data,
managers of the operator can monitor overall performance of the network and
compare performance differences between areas or periods. The statistical data
sampling can be performed periodically e.g. weekly or monthly. The drive test
fleet's scale makes the amount of data samples under operators control.
MDT can be used to replace or reduce drive test in this case. It is necessary
for the MDT task to collect measurements in a way similar as the drive test
do. To prevent unnecessary waste of network resources, operators need to
specify the desired maximum number and amount of data samples collected
through an MDT task. There is no need to notify the operator when the max
number or amount is reached because that will not trigger any action of the
operator. It is necessary for the operators to specify the desired minimum
number of UEs and amount of data samples collected in a MDT job so that the
data collected can meet the business and management requirements. If a MDT job
can not collect minimum amount of data in a given period of time, the operator
need to be notified quickly at the end of the time period given by the
operator so he can decide if he will need to send a drive test team in the
field to replace the MDT job.
## A.12.2 Example of required data to cover use case #12
Ideally, the data collected should include all measurements taking place in a
drive test, such as Ec/No and RSCP for UMTS and RSRP and RSRQ for E-UTRAN, and
statistical business level KPIs such as sampled call drop rate and application
layer throughput. It is not possible to ask a normal UE to perform similar
task. To make MDT a basic replacement for drive test, UE measurement such as
Ec/No and RSCP for UMTS and RSRP/RSRQ for E-UTRAN should be reported.
It shall also be possible for MDT to facilitate the introduction of future
technology to collect business level KPIs e.g. sampled call drop rate and
application layer throughput.
# A.13 Use case #13 Differentiation of management based MDT data by terminal
type
## A.13.1 Description
For analysis of management based MDT data, it's useful to differentiate the
MDT data which are collected from different terminal types. For example, it
allows operators to analyze whether the poor network performance is caused by
a specific terminal type.
For privacy consideration of MDT data, operator shall also be able to select
whether the MDT data should be reported with or without the user terminal type
information.
## A.13.2 Example of required data to cover use case #13
The IMEI-TAC could be used together with MDT data and operators could use the
information to analyze whether the poor network performance is caused by
network or specific terminal types.
# A.14 Use case #14 Subscriber complaint about MBMS service in the eUTRAN
network
## A.14.1 Description
When a subscriber complains about their MBMS service, signalling based MDT for
that particular user can be triggered to analyse and troubleshoot the issue.
Operator may also want to analyse the performance or issues in the network by
looking at per subscriber MBSFN measurements.
## A.14.2 Example of required data to cover use case #14
The MBSFN MDT measurements defined in TS 37.320 [11] are required for
analysing MBMS service quality in the indicated area and for trouble shooting
per user MBMS service. The measurement quantities for E-UTRA MBSFN measurement
logging are fixed and consist of MBSFN RSRP, MBSFN RSRQ, BLER for signalling
and BLER for data per MCH, in addition to the measurement quantities for
downlink pilot strength measurements.
The MBSFN measurement results consist of, per MBSFN area where MBMS service is
received:
\- MBSFN area identity.
\- Carrier frequency.
\- MBSFN RSRP.
\- MBSFN RSRQ.
\- MCH BLER for signalling.
\- MCH BLER for data, and related MCH index.
# A.15 Use case #15 Check MBMS service quality and performance of the eUTRAN
Network
## A.15.1 Description
The operator needs information for analysing signal strength, signal quality
and block error rates for MBMS reception and quality. Logged MBSFN MDT data is
needed to support network verification, re-planning of MBSFN areas, and
optimization of MBSFN operation parameters.
## A.15.2 Example of required data to cover use case #15
The MBSFN MDT measurements defined in TS 37.320 [11] are required for
analysing MBMS QoS in the indicated area and for trouble shooting per user
MBMS service. The measurement quantities for E-UTRA MBSFN measurement logging
are fixed and consist of MBSFN RSRP, MBSFN RSRQ, BLER for signalling and BLER
for data per MCH, in addition to the measurement quantities for downlink pilot
strength measurements.
The MBSFN measurement results consist of, per MBSFN area where MBMS service is
received:
\- MBSFN area identity.
\- Carrier frequency.
\- MBSFN RSRP.
\- MBSFN RSRQ.
\- MCH BLER for signalling.
\- MCH BLER for data, and related MCH index.
# A.16 Use case #16 Collecting Cell and UE data for analytics
## A.16.1 Goal
Being able to analyse and optimize the mobility management and traffic
handling behaviour for on-going sessions is important, as it offers an
opportunity to address potential problems before it\'s \"too late\" (while
something can be done to mitigate them or prevent the problem from happening).
Cell Traffic Trace, Immediate MDT, RLF reports and RCEF reports are the
examples of RAN data relevant to this goal.
## A.16.2 Pre-conditions
The consumers (e.g. specific instances of MDAS producers, NWDAF) and producers
(e.g. specific E-UTRAN or NG-RAN nodes) of data have been identified and are
operational.
The data to be collected (e.g. particular call processing events, relevant
interfaces, signalling messages and IEs, MDT measurements, UE location
information, failure reports) has been selected.
## A.16.3 Description/steps
1\. 3GPP Management System configures/activates the data producers with
appropriate Trace measurement control and configuration parameters.
NOTE 1: For the illustrative purposes of this use case, it is assumed that
Trace Job types \"Immediate MDT and Trace\", \"RLF reports only\" and \"RCEF
reports only\" have been selected (see clause 5.9a in TS 32.422 [2]) and the
information about data consumer (e.g. address, identity) has been provided.
2\. The data producer establishes connection to the data consumer and
exchanges the data collection session metadata (e.g. identity of the data
producer, nature of the data being collected, Trace Reference).
3\. While the Trace Session is active on the data producer, the data producer
performs UE selection (see clauses 4.1.1.6a and 4.1.1.9 in TS 32.422 [2]),
receives RLF and RCEF reports (see clauses 4.3 and 4.8 in TS 32.422 [2]),
starts trace recording sessions (see clauses 4.2.2.5 and 4.2.2.10 in TS 32.422
[2]), enables MDT measurements (see clause 4.2.2.7 in TS 32.422 [2]).
4\. Periodically, upon the data availability, the data producer sends the
collected data to the data consumer. The periodicity and the amount of data in
each burst sent from producer to consumer may be standardized, made
configurable or left implementation-specific. But the key point here is that
the data is being delivered to the consumer while it\'s still relevant to the
analytical task performed by the consumer.
NOTE 2: The actions described by steps 3 and 4 repeated until the Trace
Session is deactivated (e.g. via explicit configuration/deactivation by the
3GPP Management System or if Trace Session requirements such as amount of data
or duration have been satisfied).
5\. 3GPP Management System configures/deactivates the data producers.
6\. The data producer terminates the connection to the data consumer and
potentially informs it that the data collection task has been completed and no
further data is expected.
The use case ends upon successful termination of the data collection task.
## A.16.4 Post-conditions
The data consumer has the necessary data to perform the analytical tasks. The
data (reported per UE) may include, but is not limited to:
\- LTE MDT measurements (see TSs 37.320 [11] and 32.422 [2]) such as:
\- M1: RSRP and RSRQ measurement by UE with Periodic, event A2 as reporting
triggers;
\- M2: Power Headroom (PH) measurement by UE;
\- M3: Received Interference Power measurement by eNB;
\- M4: Data Volume measurement separately for DL and UL by eNB;
\- M5: Scheduled IP Throughput measurement separately for DL and UL by eNB.
Editor\'s note: 5G MDT measurements are FFS (pending on-going work in RAN WG).
\- Radio Link Failure reports;
\- RRC Connection Establishment Failure reports;
\- Raw signalling messages (see TS 32.423 [3] clauses 4.13 and 4.29 for
additional details);
\- UE location information (see TS 32.423 [3] clause 4.16.2 for additional
details).
The specific methods for analysing and/or correlating the captured data, as
well as any actions that may be triggered by such analysis are out of scope of
the present use case.
# A.17 Use case #17 Collecting subscriber and equipment trace data for near-
real-time diagnostics and troubleshooting
## A.17.1 Goal
Being able to diagnose and troubleshoot various problems reported by
subscribers (e.g. as described in clauses A.2 - A.14) for on-going sessions is
important, as it offers an opportunity to investigate and address potential
problems while they are happening, and to evaluate the corrective actions
(e.g. based on subscriber\'s feedback or automated algorithms).
Subscriber and equipment Trace with Signalling Based Activation performed on
RAN and Core NEs are the examples of trace data relevant to this goal.
## A.17.2 Pre-conditions
The consumers (e.g. management applications and/or functions) and producers
(e.g. specific NG-RAN and 5GC nodes) of data have been identified and are
operational.
The subscriber or equipment to be traced has been identified.
The data to be collected (e.g. triggering events, trace depth, relevant NE
types, relevant interfaces, signalling messages and IEs, MDT measurements, UE
location information, failure reports) has been selected.
## A.17.3 Description/steps
NOTE 1: For the illustrative purposes of this use case, the 5GC activation
mechanism with UE attached to 5GC via NG-RAN (as described in the clause
4.1.2.15.1 of TS 32.422 [2]) has been selected. Other activation mechanisms
involving E-UTRAN, NG-RAN, EPC and 5GC are possible, but are not conceptually
different from the perspective of this use case.
1\. Management system configures/activates the Trace Session to the UDM. UDM
stores the trace control and configuration parameters.
2\. As UE (to be traced) registers with the network, the AMF starts a new
Trace Session according to the configuration parameters received from UDM (see
steps 3-8 in clause 4.1.2.15.1 of TS 32.422 [2]).
3\. AMF establishes connection to the Trace data consumer and exchanges the
Trace data collection session metadata (e.g. identity of the AMF, nature of
the data being collected, Trace Session Reference).
4\. While the Trace Session is active on the AMF, AMF starts the Trace
Recording Sessions and collects the Trace data prescribed by Trace
configuration received from the UDM.
5\. Periodically, upon the Trace data availability, the AMF sends the
collected data to the data consumer. The periodicity and the amount of data in
each burst sent from AMF to data consumer may be standardized, made
configurable or left implementation-specific. But the key point here is that
the data is being delivered to the consumer while it\'s still relevant to the
diagnostic/troubleshooting task performed by the consumer.
6\. In parallel to the step 5, AMF sends the Trace Start message to the NG-RAN
node (see steps 9-11 in clause 4.1.2.15.1 of TS 32.422 [2] and additional
details in TS 38.413 [20]). NG-RAN node starts the Trace Session and
establishes connection to the Trace data consumer. NG-RAN node and Trace data
consumer exchange the Trace data collection session metadata (e.g. identity of
the NG-RAN node, nature of the data being collected, Trace Session Reference).
7\. While the Trace Session is active on the NG-RAN node, NG-RAN node collects
the Trace data prescribed by Trace configuration received from the AMF.
8\. Periodically, upon the Trace data availability, the NG-RAN node sends the
collected data to the data consumer. The periodicity and the amount of data in
each burst sent from NG-RAN node to data consumer may be standardized, made
configurable or left implementation-specific. But the key point here is that
the data is being delivered to the consumer while it\'s still relevant to the
diagnostic/troubleshooting task performed by the consumer.
9\. In parallel with steps 3-5, AMF activates the Trace sessions on PCF and
SMF (see steps 12-17 in clause 4.1.2.15.1 of TS 32.422 [2]). The PCF and SMF
start Trace sessions and establish connections to the Trace data consumer. PCF
and SMF exchange Trace data collection session metadata (e.g. identity of PCF
or SMF, nature of the data being collected, Trace Session Reference).
10\. Periodically, upon the Trace data availability, the PCF and SMF send the
collected data to the data consumer. The data is being delivered to the
consumer while it\'s still relevant to the diagnostic/troubleshooting task
performed by the consumer.
11\. When traced UE hands-over from one NG-RAN node to another (e.g. Xn
handover), the Trace configuration is propagated in the Trace activation IE of
the HANDOVER REQUEST message (see TS 38.423 [21]). The target NG-RAN node
starts the Trace Session and establishes connection to the Trace data
consumer. The target NG-RAN node and Trace data consumer exchange the Trace
data collection session metadata (e.g. identity of the NG-RAN node, nature of
the data being collected, Trace Session Reference).
12\. While the Trace Session is active on the target NG-RAN node, target NG-
RAN node collects the Trace data prescribed by Trace configuration received
from the source NG-RAN node.
13\. The target NG-RAN node reports the collected trace data to the data
consumer (performs the actions described in the step 8 above).
NOTE 2: The steps 6-8 and 11-13 are repeated while the Trace session is active
(Trace configuration is propagated to target NG-RAN nodes following the UE
handovers). Each NG-RAN node where the Trace is active has an active
connection to the Trace data consumer (establishes connection and exchanges
trace session metadata upon Trace session activation, and reports trace data
upon availability).
14\. 3GPP Management System configures/deactivates the Trace session at the
UDM. It triggers the Trace deactivation process on all NEs where the Trace
session was active (see clause 4.1.4.11 in TS 32.422 [2] for additional
details).
15\. Upon the Trace session deactivation, the NEs / Trace data producers
terminate the connection to the Trace data consumer and potentially inform it
that the data collection tasks have been completed and no further data is
expected.
The use case ends upon successful termination of the Trace session and of the
data collection tasks on all NEs.
## A.17.4 Post-conditions
The data consumer has the necessary data to perform the near-real-time
diagnostics and troubleshooting tasks.
The specific methods for analysing and/or correlating the captured data, as
well as any actions that may be triggered by such analysis are out of scope of
the present use case.
#