# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, certain modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
> The constructions \"shall\" and \"shall not\" are confined to the context of
> normative provisions, and do not appear in Technical Reports.
>
> The constructions \"must\" and \"must not\" are not used as substitutes for
> \"shall\" and \"shall not\". Their use is avoided insofar as possible, and
> they are not used in a normative context except in a direct citation from an
> external, referenced, non-3GPP document, or so as to maintain continuity of
> style when extending or modifying the provisions of such a referenced
> document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
> The construction \"may not\" is ambiguous and is not used in normative
> elements. The unambiguous constructions \"might not\" or \"shall not\" are
> used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" shall not to be used as substitutes
for \"may\" and \"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document continues the study on charging aspects of network
slicing covered by 3GPP TR 32.845 [2] but no longer limited to charging data
collection functionalities without quota management as specified for Network
Slice management charging in 3GPP TS 28.202 [3] and for Network slice
performance and analytics charging in 3GPP TS 28.201 [4].
The following is studied:
\- Network slice converged charging for Network Slices enabled over 3GPP 5GS;
\- Correlation aspects between Network Slice charging and the end user
charging accessing the Network Slice;
\- Inter-Provider (B2B) charging aspects by considering the different
Organizations (e.g. MNO, Verticals).
The Converged Charging service aspects associated to the 3GPP TR 23.700-40 [5]
conclusion on network slice information is also considered.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 32.845: \"Charging management; Study on charging aspects of
network slicing".
[3] 3GPP TS 28.202: \"Charging management; Network slice management charging
in the 5G System (5GS); Stage 2\".
[4] 3GPP TS 28.201: \"Charging management; Network slice performance and
analytics charging in the 5G System (5GS); Stage 2\".
[5] 3GPP TR 23.700-40: \"Study on enhancement of network slicing; Phase 2".
[6] GSMA 5GJA NG.116: \"Generic Network Slice Template\".
[7] 3GPP TS 23.501: \"System Architecture for the 5G System (5GS); Stage 2\".
[8] 3GPP TS 28.530: \"Management and orchestration; Concepts, use cases and
requirements\".
[9] 3GPP TS 32.255: \"Telecommunication management; Charging management; 5G
data connectivity domain charging; Stage 2\".
[10] 3GPP TS 32.256: \"Telecommunication management; Charging management; 5G
connection and mobility domain charging; stage 2\".
[11] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[12] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[13] 3GPP TS 28.532: \"Management and orchestration; Generic management
services\".
[14] 3GPP TS 28.554: \"Management and orchestration; 5G end to end Key
Performance Indicators (KPI) Generic management services\".
[15] 3GPP TS 28.552: \"Management and orchestration; 5G performance
measurements\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5GJA 5G Joint Activity (Initiative of NG)
CSC **Communication Service Customer**
CSP **Communication Service Provider**
EPS Evolved Packet System
GSM Global System for Mobile Communications
GSMA GSM Association
GST Generic Network Slice Template
NEST Network Slice Types
NG Networks Group (GSMA WG)
NOP **Network Operator**
NSC **Network Slice Customer**
NSI Network Slice Instance
NSP Network Slice Provider
NSSAA Network Slice-specific Authentication and Authorization
NSSAAF Network Slice-Specific Authentication and Authorization Function
# 4 General background
## 4.1 Background from GSMA
GSMA 5GJA has specified in NG.116 [6] the concept of Generic Network Slice
Template (GST) from which several Network Slice Types (NESTs) can be derived
by assigning values to applicable attributes defined in the GST.
As per 3GPP TS 23.501 [7] is the network slice a logical network that provides
specific network capabilities and network characteristics, and GSMA tailored
the network slice based on the specific requirements adhered to a Service
Level Agreement (SLA) agreed between Network Slice Customer (NSC) and Network
Slice Provider (NSP).
Multiple roles related to network slicing are defined by GSMA and displayed in
figure 4.1-1, based on some roles specified in 3GPP TS 28.530 [8] and
described in 3GPP TR 32.845 [2].
The Charging model will fullfill the following used roles:
**\- Communication Service Customer (CSC)** : Uses communication services,
e.g. end user, tenant, vertical.
**\- Communication Service Provider (CSP)** : Provides communication services.
Designs, builds and operates its communication services. The CSP provided
communication service can be built with or without network slice.
**\- Network Operator (NOP)** : Designs, builds and operates networks and
provides related services, including network services and network slices.
**\- Network Slice Customer (NSC):** The CSP or CSC who uses Network Slice as
a Service.
**\- Network Slice Provider (NSP):** The CSP or NOP who provides Network Slice
as a Service.
Depending on the scenarios an organisation can play one or several roles
simultaneously, and apply charging models based on corresponding business
relationship, e.g.:
**-** Charging models for CSP to charge CSC for using communication services
**-** Charging models for NOP to charge CSP for using their Networks and
related Network services
**-** Charging models for NOP playing NSP Role to charge CSP playing NSC Role
for using their Networks and related network slices
Figure 4.1-1: Model roles in network slicing
The GST is a set of generic attributes that can characterise a type of network
slice/service and is not tied to any specific network deployment.
The NEST is a GST filled with values. The attributes and their values are
assigned to fulfil a given set of requirements derived from a network slice
customer use case. The NEST is an input to the network slice preparation
performed by NSP. NEST-related attributes can be differentiated by a Service
Category. For instance, when an attribute of a NEST includes a Service
Category parameter and the UE subscription information includes a parameter
value associated with that Service Category, then the UE will be subject to
the differentiated service associated with the Service Category in the network
slice.
Figure 4.1-2 places the GST and NEST in the context of the network slice
lifecycle. As first step, the NSC provides the service requirements for the
use case that it would like to fulfil, to the NSP. The NSP maps the service
requirements into the attributes of the GST with the appropriate values
generating a NEST.
{width="6.269444444444445in" height="2.1041666666666665in"}
Figure 4.1-2: GST and NEST in context of the network slice lifecycle
In GSMA 5GJA NG.116 [6], there are two attributes the maximum number of UEs
and the maximum number of PDU sessions, which characterising the network slice
(one S-NSSAI) and defined as the maximum number of UEs and the maximum number
of PDU sessions that can use the network slice simultaneously.
Editor's Note: The addition of the concept of Network Slice Instance (NSI) is
ffs.
## 4.2 Background from 3GPP network architecture
The architectural requirements per 3GPP TR 23.700-40 [5] are copied below to
derive potential charging requirements:
**-** Solutions have to build on the 5G System architectural principles as in
3GPP TS 23.501 [7], including flexibility and modularity for newly introduced
functionalities.
**-** Subject to operator policy and national/regional regulations, solutions
have to be able to exempt Emergency services, Multimedia Priority Service, and
Mission Critical Service from count limits.
NOTE: Handling of UE/PDU Session count exemption and any pre-emption to other
non-mission critical services is expected to be controlled by operator policy.
\- While the support of network slicing applies only to 5GS, solutions
supports subscriptions that allows EPS/5GS interworking. Therefore EPS/5GS
interworking needs to be considered for the enforcement of counts for maximum
number of UEs per network slice and for maximum number of PDU Sessions per
network slice.\"
## 4.3 Network Slice Management Charging
Network Slice Management Charging specified by 3GPP _TS 28.202 [3], enables
the Converged Charging System (CCS) to capture for each Network Slice instance
per 3GPP TS 28.530 [8] definition, the supported list of service profiles_
representing the Service Level Specification (SLS) between Network Slice
Customer (NSC) and Network Slice Provider (NSP).
For each _S-NSSAI, associated attributes and their values_ representing the
Service Level Specification (SLS) are available to the _Converged Charging
system, vi_ a _service profiles captured with the NetworkSlice instance._
These information are captured in NSM charging CHF record generated by CHF
upon _NetworkSlice instance creation, modification and termination._
## 4.4 Network Slice Performance and Analytics Charging
Network Slice Performance and Analytics Charging specified by 3GPP _TS 28.201
[4], enables the Converged Charging System (CCS) via CEF (Charging Enablement
Function) to_ obtain _the performance and analytics information from MnS
procedure specified in 3GPP TS 28.532 [_ 13 _]_ and/or _NWDAF_ described in
3GPP TS 23.288 [12]_._
The charging information (e.g. Latency, Number of PDU sessions and Number of
registered Subscribers) is collected per Single Network Slice Selection
Assistance Information (S-NSSAI). NSPA charging CHF record generated by CHF
for each network slice (i.e. S-NSSAI)_._
_The definition of KPI measurement is present as the following:_
  * **The number of PDU sessions: PDUSesMaxNbr KPI describes the maximum number of PDU sessions that are successfully established in a network slice, as specified in 3GPP TS 28.554 [14] clause 6.4.5. The measurement of PDUSesMaxNbr is obtained by sampling at a pre-defined interval, the number of PDU sessions established by SMF (SM.SessionNbrMax.SNSSAI), and then selecting the maximum value, as specified in the 3GPP TS 28.552 [15] clause 5.3.1.2.**
  * **The number of registered Subscribers: AMFMaxRegNbr KPI describe the maximum number of subscribers that are registered to a network slice, as specified in 3GPP TS 28.554 [14] clause 6.2.6.The measurement of AMFMaxRegNbr is obtained by sampling at a pre-defined interval the number of registered subscribers in an AMF (RM.RegisteredSubNbrMax.SNSSAI) and then taking the maximum, as specified in the 3GPP TS 28.552 [15] clause 5.2.1.2.**
# 5 Potential charging requirements
**REQ-NSCH-01** The 5G charging framework should support converged charging
per S-NSSAI.
**REQ-NSCH-02** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of UEs\".
**REQ-NSCH-03** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of PDU sessions\".
**REQ-NSCH-04** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of UEs\", exempting Emergency Registered UEs
**REQ-NSCH-05** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of PDU sessions\", exempting Emergency
services, Multimedia Priority Service, and Mission Critical Service.
**REQ-NSCH-06** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of UEs\", including UEs connected in the EPS.
**REQ-NSCH-07** The 5G charging framework should support converged charging
per S-NSSAI, based on \"number of PDU sessions\", including PDN connections in
the EPS.
**REQ-NSCH-08** The 5G charging framework should support converged charging
per tenant based on assigned group of S-NSSAI(s).
**REQ-NSCH-09** The 5G charging framework should support converged charging
per S-NSSAI, based on \"aggregated PDU sessions volume\".
**REQ-NSCH-10** The 5G charging framework should support converged charging
per S-NSSAI, based on \"PDU session maximum duration\".
**REQ-NSCH-11** The 5G charging framework should support individual UE
converged charging based on Network Slice usage charging criteria.
**REQ-NSCH-12** The 5G charging framework should support converged charging
per S-NSSAI for the time an S-NSSAI is used.
**REQ-NSCH-13** The 5G charging framework should support converged charging
for UE Network Slice-specific Authentication and Authorization (NSSAA) network
slice access.
# 6 Key Issues
## 6.1 Key Issue #1: Converged Charging for simultaneous number of UEs/max.
number of UEs per network slice
### 6.1.0 General Description
This key issue is for investigating how to support network slice access based
converged charging service on simultaneous/max. number of UEs.
The maximum number of UEs is one of the attributes in the GST documented in
GSMA 5GJA NG.116 [6] characterising the network slice (one S-NSSAI) and
defined as the maximum number of UEs that can use the network slice
simultaneously. The max. number of UEs that can use the network slice
simultaneously is one criteria for usage control of network slice, it is
therefore an aspect to be considered for converged charging. Since the maximum
number of simultaneous UEs can part of the offering and in the extension part
of the price for the offering, then also the number of UEs that use the
network slice simultaneously can be a criterion for the charging (i.e. rate
and cost). For example, if during a period it never goes above a specific
number of simultaneous UEs one price and if it does go above another price.
This investigation covers the following:
\- determination of \"number of UEs\"/max. number of UEs per slice that can
use the network slice simultaneously to be used as a criteria for converged
charging service;
\- identification of the main charging information to be collected in addition
to \"number of UEs\"/max. number of UEs;
\- determination of the main interactions with the NF or service usage to
obtain the network slice authorization and usage based on \"number of
UEs\"/max. number of UEs;
\- determination of all needed charging information for online and offline
charging methods.
For the sake of simplification, \"number of UEs\" refers to \"number of UEs
that can use the network slice simultaneously\".
### 6.1.1 Solution#1.1 New NetworkSliceConvergedCharging service
#### 6.1.1.1 Procedure Description
This solution addresses the Key Issue #1 by considering the new 5GC NF which
has been defined as Network Slice Admission Control Function (NSACF). While
NSACF counts all UE registrations in S-NSSAI as received from the AMF(s), the
CHF/5G Converged Charging System functionalities provide the charging service
and quota management capabilities to this NSACF.
_During the network slice provisioning, the CHF, under the ConvergedCharging
service, receives and stores the_ \"max. Nb of Reg UEs\" which is considered
by CCS as initial value for the network slice quota (NS_quota). This NS_quota
is used by the CCS for the Network Slice quota management.
_A new N_ etworkSliceConvergedCharging service is introduced for _this_
Network Slice quota management between the CHF and the NSACF and its use is
described in following clause.
_During the UEs registration, the NSACF_ provides the network slice admission
control for all AMF(s) by counting the number of registered UEs against quota
granted by the CHF under NetworkSliceConvergedCharging service consumption by
the NSACF.
The following figure 6.1.1.1-1 represents the high-level entities involved in
the solution.
**Figure 6.1.1.1-1 High level functional solution overview**
Slice SLA are obtained by CHF at NSI creation via the 'service profile' as
specified in 3GPP TS 28.202 [3] (clause 5.1.3 \"Network Slice Management
charging information\"), which includes the max Nb of Reg UEs per S-NSSAI and
the CHF is setting the max Nb of Reg UEs as NS_quota.
> Editor's note: The Update of NS_quota once the count of Reg UEs is reached
> the max. Nb of Reg UEs at NSACF and possible NSI update is ffs.
#### 6.1.1.2 Flow description
The figure 6.1.1.2-1 describes the high-level charging procedure for Network
slice converged charging based on NS_quota with setting of initial value by
CHF which may provide to the NSACF during slice provisioning procedures.
**Figure 6.1.1.2-1: NetworkSlice quota management - registration**
The steps are with the following additions:
> 0ch. CHF gets per S-NSSAI the \"max Nb of Reg UEs\" obtained during NSI
> creation and sets the appropriate quota as initial value for NS_quota of Nb
> of Reg UEs.
>
> 0\. The NSACF counts the Nb of Reg UEs and check against the initial value
> for NS_quota (e.g. max Nb of Reg UEs).
>
> 1\. NS admission control for UEs registrations per 3GPP TS 23.502 [11].
>
> Xch-a: At least one S-NSSAI has reached the initial value for NS_quota of Nb
> of Reg UEs.
>
> Xch-b: the NSACF invokes the Nchf_NSConvergedCharging service for requesting
> more quota (i.e. NS_quota (max Nb of Reg UEs) of the exhausted S-NSSAI.
>
> xch-c. The S-NSSAI for which the initial NS_quota is reached will be either
> granted with more NS_quota or the request for more quota is indicated as
> rejected, based on CCS capabilities and CHF update per S-NSSAI the value for
> \"max Nb of Reg UEs\" obtained during NSI update.
>
> xch-d. CHF provides response to NSACF with appropriate setting of for
> S-NSSAI(s) based on the status of step xch-c.
>
> 2\. NS admission control for UEs registrations per 3GPP TS 23.502 [11].
###
### 6.1.2 Solution#1.2 NSACF (CTF) - Event based charging
#### 6.1.2.1 General
Event based charging where the thresholds values for simultaneous number of
UEs are set separately for going below (downwards) or above (upwards). This
means that when a UE is added to the network slice and it at that point passes
a upwards threshold it will trigger charging, and when a UE is removed from a
network slice and it at this point passes a downwards threshold it will
trigger charging. There may be several upwards triggers but only one
downwards.
#### 6.1.2.2 Charging information
The minimum information needed to be able to charge for the number of
simultaneous UE connected to a network slice can be found in table 6.1.2.2-1.
**Table 6.1.2.2-1: Minimum charging information of simultaneous number of
UEs**
* * *
**Information Element** **Description** Identifier of Network Slice This field
identifies Network Slice and can be the Network Slice Instance or the S-NSSAI.
Trigger This field identifies the passing of the threshold upwards or
downwards for simultaneous number of UEs Trigger Timestamp This field holds
the time when the threshold was passed Number of simultaneous UEs This field
holds the number of simulations UEs after the passing of the threshold
* * *
#### 6.1.2.3 Trigger mechanism
Thresholds may be set at provisioning of the network slice together with other
network slice profiled information and updated by configuration changes.
#### 6.1.2.4 Architecture description
**Figure 6.1.2.4-1: NSACF (CTF) converged charging architecture**
#### 6.1.2.5 Flow description
The figure 6.1.2.5-1 describes the high-level charging procedure for Network
slice converged charging based on NSACF (CTF) using Nchf_NSConvergedCharging
service.
**Figure 6.1.2.5-1: NSACF (CTF) and Nchf_NSConvergedCharging service event
based**
> 0ch. CHF obtains per S-NSSAI the \"max number of UEs\" during NSI creation,
> corresponding to maximum value of NS_quota for \"Number of UEs\" unit.
>
> 1\. The NSACF is configured per S-NSSAI, with \"max number of UEs\" and a
> set of \"Number of UEs\" intermediate thresholds (downwards and upwards
> triggers) under the \"max number of UEs\".
>
> 2\. NS admission control triggered from AMF per 3GPP TS 23.502 [11] clause
> 4.2.11 Number of UEs per network slice availability check and update
> procedure.
>
> 2ch-a: For a particular S-NSSAI one \"Number of UEs\" threshold is crossed
> or \"max number of UEs\" is reached.
>
> 2ch-b: The NSACF invokes the Nchf_NSConvergedCharging service for reporting
> used units \"Number of UEs\".
>
> 2ch-c. Account and rating control based on \"Number of UEs\" used units for
> the S-NSSAI.
>
> 2ch-d. CHF provides response to NSACF.
### 6.1.3 Solution#1.3 NSACF (CTF) - Session based charging
#### 6.1.3.1 General
Session based charging where the session is started and kept as long as the
simultaneous number of UEs is above a certain value. This means that when a UE
is added to the network slice and it at that point passes the threshold it
will initiate charging, and when a UE is removed from a network slice and it
at this point it again passes the threshold it will terminate charging. In
between these the CHF may set new triggers.
#### 6.1.3.2 Charging information
The minimum information needed to be able to charge for the number of
simultaneous UE connected to a network slice can be found in table 6.1.3.2-1.
**Table 6.1.3.2-1: Minimum charging information of simultaneous number of
UEs**
* * *
**Information Element** **Description** Identifier of Network Slice This field
identifies Network Slice and can be the Network Slice Instance or the S-NSSAI.
Trigger This field identifies the passing of the threshold for simultaneous
number of UEs Trigger Timestamp This field holds the time when the threshold
was passed Number of simultaneous UEs This field holds the number of
simulations UEs after the passing of the threshold
* * *
#### 6.1.3.3 Trigger mechanism
The threshold may be set at provisioning of the network slice together with
other network slice profiled information and updated by configuration changes.
The CHF may provide new triggers during the charging session.
#### 6.1.3.4 Architecture description
Same architecture as clause 6.1.2.4.
#### 6.1.3.5 Flow description
The figure 6.1.3.5-1 describes the high-level charging procedure for Network
slice converged charging based on NSACF (CTF) using Nchf_NSConvergedCharging
service.
**Figure 6.1.3.5-1: NSACF (CTF) and Nchf_NSConvergedCharging service session
based**
> Steps 0ch to 1: same as flow in clause 6.1.2.5
>
> 2\. NS admission control triggered from AMF per 3GPP TS 23.502 [11] per
> clause 4.2.11Number of UEs per network slice availability check and update
> procedure.
>
> 2ch-a: For a particular S-NSSAI one trigger occurs: one \"Number of UEs\"
> threshold is crossed for initial.
>
> 2ch-b: The NSACF invokes the Nchf_NSConvergedCharging service initial and
> reporting of used units \" Number of UEs\".
>
> 2ch-d. CHF provides response to NSACF, with possible new triggers.
>
> 3\. NS admission control triggered from AMF per 3GPP TS 23.502 [11] Number
> of UEs per network slice availability check and update procedure.
>
> 3ch-a: For a particular S-NSSAI one trigger occurs: one \" Number of UEs\"
> threshold is crossed for update or termination.
>
> 3ch-b: The NSACF invokes the Nchf_NSConvergedCharging service update or
> release and reporting of used units \" Number of UEs\".
>
> 3ch-c. Account and rating control.
>
> 3ch-d. CHF provides response to NSACF, with possible new triggers for the
> next step.
#### 6.1.3.6 Charging scenarios
Determination of passing a threshold for a network slice using Session based
charging (SCUR).
Editor's Note: The NF that will hold the CTF is FFS.
Figure 6.1.3.6-1: SCUR -- UE addition to network slice
**1) UE to be added:** A UE is to be added to the network slice.
**2) Trigger evaluated:** the NF (CTF) determines that the addition of the UE
would cause the threshold to be passed.
**3) Charging Data Request [Initial]:** the NF (CTF) starts the charging
session by sending a request to the CHF for the passing of the threshold.
**4) Account, Rating Control:** the CHF may use the information to rate and
make deductions from customer\'s account balance.
**5) Create CDR:** the CHF creates a CDR related to the service.
**6) Charging Data Response [Initial]:** the CHF informs the NF (CTF) on the
result of the request, the CHF may provide new thresholds.
**7) UE added:** The UE is added to the network slice.
**8) UE to be added or removed:** a UE is to be added to or removed from the
network slice.
**9) Trigger evaluated:** the NF (CTF) determines that the change in number of
UE would cause a CHF provided threshold to be passed.
**10) Charging Data Request [Update]:** the NF (CTF) updates the charging
session by sending a request to the CHF for the passing of the threshold.
**11) Account, Rating Control:** the CHF may use the information to rate and
make deductions from customer\'s account balance.
**12) Update CDR:** the CHF updates the CDR related to the service.
**13) Charging Data Response [Update]:** the CHF informs the NF (CTF) on the
result of the request.
**14) UE added:** if the trigger was addition of UE then the UE is added to
the network slice.
**15) UE removed:** a UE is to be removed from the network slice.
**16) Trigger evaluated:** the NF (CTF) determines that the removal of UE
would cause the termination trigger to be passed.
**17) Charging Data Request [Termination]:** the NF (CTF) terminates the
charging session by sending a request to the CHF for the passing of the
threshold.
**18) Account, Rating Control:** the CHF may use the information to rate and
make deductions from customer\'s account balance.
**19) Close CDR:** the CHF closes the CDR related to the service.
**20) Charging Data Response [Termination]:** the CHF informs the NF (CTF) on
the result of the request.
Editor's Note: How the thresholds and triggers are to be handled is FFS.
### 6.1.4 Solution#1.4 NSACF and CEF - Event based charging
#### 6.1.4.1 General
The general description, charging information and triggers for this solution
are the same as for solution#1.2. Use of Nchf_NSConvergedCharging service from
CEF.
#### 6.1.4.2 Architecture description
**Figure 6.1.4.2-1: NSACF converged charging architecture - CEF**
#### 6.1.4.3 Flow description
The figure 6.1.4.3-1 describes the high-level charging procedure for Network
slice converged charging based on CEF using Nchf_NSConvergedCharging service
and NSACF service.
**Figure 6.1.4.3-1: CEF and use of NSACF service**
0ch and 1: same as clause 6.1.2.5 (with CEF instead of NSACF)
2\. Use of Nnsacf_SliceEventExposure_Subscribe/Unsubscribe service exposed by
NSACF to subscribe to be notified on \" Number of UEs\" intermediate
thresholds or \"max number of UEs\" per 3GPP TS 23.502 [11] clause 4.15.3.2.10
flows and NSACF services.
3\. Use of Nnsacf_SliceEventExposure_Notify received by CEF based on
subscribed thresholds.
3ch-a to 3ch-d: same as steps 2ch-a to 2ch-d as clause 6.1.2.5 (with CEF
instead of NSACF).
### 6.1.5 Solution#1.5 NSACF and CEF - Session based charging
#### 6.1.5.1 General
The general description, charging information and triggers for this solution
are the same as for solution#1.3. Use of Nchf_NSConvergedCharging service from
CEF
#### 6.1.5.2 Architecture description
Same architecture as clause 6.1.4.2.
#### 6.1.5.3 Flow description
The figure 6.1.5.3-1 describes the high-level charging procedure for Network
slice converged charging based on CEF using Nchf_NSConvergedCharging service
and NSACF service.
**Figure 6.1.5.3-1: CEF and use of NSACF service -- session based**
0ch and 3: same as clause 6.1.4.3.
3ch-a to 3ch-d: same as 2ch-a to 2ch-d clause 6.1.3.5 with CEF instead of
NSACF.
4\. Nnsacf_SliceEventExposure_Notify received by CEF based on subscribed
thresholds.
4ch-a to 4ch-d: same as 3ch-a to 3ch-d clause 6.1.3.5 with CEF instead of
NSACF.
### 6.1.x Evaluation
## 6.2 Key Issue #2: Converged Charging for concurrent number of PDU
sessions/max. number of PDU sessions per network slice
### 6.2.0 General Description
This key issue is for investigating how to support network slice access based
converged charging service. on concurrent number of PDU sessions/max. number
of PDU sessions.
The maximum number of PDU sessions is one of the attributes in the GST
documented in GSMA 5GJA NG.116 [6] characterising the network slice (one
S-NSSAI) and defined as maximum number of concurrent PDU supported by the
network slice. The number of max. number of PDU sessions is one criteria for
usage control of network slice, it is therefore an aspect to be considered for
converged charging. Since the maximum number of concurrent PDU sessions can be
part of the offering and in the extension part of the price for the offering,
then also the number of PDU sessions that use the network slice concurrently
can be a criterion for the charging (i.e. rate and cost). For example, if
during a period it never goes above a specific number of concurrent PDU
sessions one price and if it does go above another price.
This investigation covers the following:
\- determination of number of concurrent PDU sessions/max. number of PDU
sessions per slice that can use the network slice simultaneously to be used as
a criteria for converged charging service;
\- identification of the main charging information to be collected in addition
to number of concurrent PDU sessions/max. number of PDU sessions;
\- determination of the main interactions with the NF or service usage to
obtain the network slice authorization and usage based on max number of PDU
sessions;
\- determination of all needed charging information for online and offline
charging methods.
### 6.2.1 Solution#2.1 NSACF (CTF) -- Event based charging
#### 6.2.1.1 General
This solution is the same as solution#1.2 with:
\- \"number of UEs\" replaced by \"number of the PDU Sessions\"
\- NS admission control triggered from SMF (instead of AMF) per 3GPP TS 23.502
[11] clause 4.2.11 Number of PDU sessions per network slice availability check
and update procedure.
### 6.2.2 Solution#2.2 NSACF (CTF) - Session based charging
#### 6.2.2.1 General
This solution is the same as solution#1.3 with:
\- \"number of UEs\" replaced by \"number of the PDU Sessions\"
\- NS admission control triggered from SMF (instead of AMF) per 3GPP TS 23.502
[11] clause 4.2.11 Number of PDU sessions per network slice availability check
and update procedure.
### 6.2.3 Solution#2.3 NSACF and CEF - Event based charging
#### 6.2.3.1 General
This solution is the same as solution#1.4 with:
\- \"number of UEs\" replaced by \"number of the PDU Sessions\"
\- Use of Nnsacf_SliceEventExposure_Subscribe/Unsubscribe service exposed by
NSACF to subscribe to be notified on \" Number of PDU sessions\" intermediate
thresholds or \"max number of PDU sessions\"
### 6.2.4 Solution#2.4 NSACF and CEF - Session based charging
This solution is the same as solution#1.5 with:
\- \"number of UEs\" replaced by \"number of the PDU Sessions\"
\- Use of Nnsacf_SliceEventExposure_Subscribe/Unsubscribe service exposed by
NSACF to subscribe to be notified on \" Number of PDU sessions\" intermediate
thresholds or \"max number of PDU sessions\".
## 6.3 Key Issue #3: Volume based Converged Charging per network slice
### 6.3.1 General Description
This key issue is for investigating how to support network slice usage
converged charging based on total PDU sessions volume per S-NSSAI.
The volume considered is the aggregated PDU sessions volume.
This investigation covers the following:
\- determination of which entity/entities in the 5G system is suitable to
provide the network slice usage information based on volume;
\- determination of the main interactions required to obtain network slice
usage information based on volume.
\- identification of the main charging information to be collected;
### 6.3.2 Solution#3.1 Volume aggregation by NS Tenant CCS
#### 6.3.2.1 General description
This solution addresses the Key Issue#3 for _REQ-NSCH-09 potential requirement
and is based on functional separation between NS Tenant Converged Charging
System (CCS) and UE CCS with exchanges between them_.
Two types of subscribers are considered in the context of Network Slice: the
Tenant the Network Slice is assigned to, which is referred to as \"NS-
Tenant\", and the individual end-user \"UE\" served under the Network Slice.
Each type of subscriber is handled under a dedicated Converged Charging System
(CCS): \"Tenant CCS\" and \"UE CCS\" respectively.
\"UE CCS\" performs charging functionalities for individual UEs, and includes
in particular:
\- CHF exposing Nchf services associated to individual UEs.
\- ABMF hosting individual UE account balance, provisioned with all necessary
information related to subscribed-to services the UE has paid for.
  * The subscription description includes in particular the subscribed NSSAI (set of S-NSSAI(s)).
\"Tenant CCS\" performs charging functionalities for NS-Tenant, and includes
in particular:
\- CHF exposing Charging service(s) associated to NS-Tenant.
\- ABMF hosting NS-Tenant account balance, provisioned with all necessary
information related to the Network Slice matching SLS requirements the NS-
Tenant has paid for,
\- The subscription description includes in particular the list of service
profiles subscribed-to by the NS-Tenant, each service profile with assigned
group of S-NSSAI(s).
How the account balance is provisioned with the subscriber\'s profile (for
both NS-tenant and individual UE) and various subscribed-to services is
unspecified and expected to be covered at BSS level.
The UE 5G data connectivity converged charging from SMF is specified in 3GPP
TS 32.255 [9] and uses Nchf_ConvergedCharging service exposed by UE CCS for
individual UE PDU session charging.
A new charging service exposed by the CHF (Tenant CCS) is defined for enabling
association between individual UE charging and NS tenant charging. This
association is achieved by UE CCS responsible for individual UE charging
consuming this new charging service exposed by the Tenant CCS.
In this solution, the volume is the charging information used for this
association: when individual UE PDU session volume charging starts, the \"UE
allowed volume\" as determined by UE-CCS is sent to the Tenant CCS, and the
Tenant CCS is then able to aggregate UEs PDU sessions volume per S-NSSAI per
Tenant. When the individual UE PDU session volume charging terminates, the
\"UE consumed volume\" is sent to the Tenant CCS which recalculates the
aggregation.
There is a possible option for intermediate reporting of \"UE allowed volume\"
and \"UE consumed volume\" to the Tenant CCS for a better volume control by
the Tenant CCS.
When Communication Service Provider (CSP) and Network Slice Provider (NSP) are
the same in the model roles of network slicing defined in clause 4.1,
deployments can choose to collocate Tenant CCS with UE CCS.
#### 6.3.2.2 Architecture description
Figure 6.3.2.2-1: Distributed charging architecture in reference point
representation.
ChX for interaction between CHF (UE CCS) and CHF (Tenant CCS)
Deployments can choose to collocate Tenant CCS with UE CCS.
#### 6.3.2.3 Flow description (Tenant specific S-NSSAI)
The figures below describe the high level charging procedure for Volume based
Network slice converged charging using the distributed architecture when the
S-NSSAI is exclusive by the tenant only.
Figure 6.3.2.3-1 describes the procedure when new UE PDU session starts:
Figure 6.3.2.3-1: Volume based Network slice converged charging -- UE PDU
session start
1\. NS tenant volume based charging per S-NSSAI covered by Tenant CCS
Steps according to 3GPP TS 32.255 [9] clause 5.2.2.2.2 for individual UE
charging covered by UE CCS.
9ch-b1. UE PDU session volume charging has a dependency with NS volume
charging for this S-NSSAI: determination to trigger ChX.
9ch-b2a. Charging service request to NS Tenant CCS with S-NSSAI, UE PDU
session charging information, Tenant ID (optional) and UE requested Network
Slice Charging information including the \"UE allowed volume\" which is
determined by UE-CCS.
9ch-b2b. Account, Rating and reservation control for the S-NSSAI based on new
S-NSSAI total volume (increased by \"UE allowed volume\" received in UE PDU
session charging information).
9ch-b2c. CHF (NS Tenant CCS) provides appropriate answer in Charging service
response.
9ch-b3. Account, Rating and reservation control for individual UE.
> 9ch-c. CHF (UE CCS) provides appropriate answer for the individual UE.
>
> Figure 6.3.2.3-2 describes the procedure when UE PDU session is released:
Figure 6.3.2.3-2: Volume based Network slice converged charging -- UE PDU
session release
Steps according to 3GPP TS 32.255 [9] clause 5.2.2.2.4 for individual UE
charging covered by NS UE CCS.
2ch-b1. UE PDU session volume charging has a dependency with NS volume
charging for this S-NSSAI
2ch-b2a. Charging service request to NS Tenant CCS with S-NSSAI, UE PDU
session charging information, and UE requested Network Slice Charging
information including the \" UE consumed volume.\"
2ch-b2b. Account, Rating and reservation control for the S-NSSAI based on new
S-NSSAI total volume recalculated from received UE consumed volume.
2ch-b2c. CHF (NS Tenant CCS) provides appropriate answer in Charging service
response.
#### 6.3.2.4 Flow description (Shared S-NSSAI)
The figures describes the high level charging procedure for Volume based
Network slice converged charging using the distributed architecture when the
tenants share the S-NSSAI is the same with the figure 6.3.2.3-1 and 6.3.2.3-2.
The procedure for new UE PDU session starts when the tenants share the S-NSSAI
is the same with the figure 6.3.2.3-1 with the difference is descried as the
following:
> 9ch-b1. UE PDU session volume charging has a dependency with NS volume
> charging: determination to trigger ChX.
>
> 9ch-b2a. Charging service request to Tenant CCS with S-NSSAI, Tenant ID, UE
> PDU session charging information, and UE requested Network Slice Charging
> information including the \"UE allowed volume\" which is determined by UE-
> CCS.
>
> 9ch-b2b. Account, Rating and reservation control for the Tenant ID of the
> S-NSSAI based on new S-NSSAI total volume (increased by \"UE allowed
> volume\" received in UE PDU session charging information).
The procedure for UE PDU session release when the tenants share the S-NSSAI is
the same with the figure 6.3.2.3-2 with the difference is descried as the
following:
> 2ch-b2a. Charging service request to NS Tenant CCS with S-NSSAI, Tenant ID
> (optional), UE PDU session charging information, and UE requested Network
> Slice Charging information including the \"UE consumed volume.\"
>
> 2ch-b2b. Account, Rating and reservation control for Tenant ID of the
> S-NSSAI based on new S-NSSAI total volume recalculated from received UE
> consumed volume.
>
> 2ch-b2c. CHF (NS Tenant CCS) provides appropriate answer in Charging service
> response.
### 6.3.3 Solution#3.2 Volume control by CCS based on performance collection
#### 6.3.3.1 General description
This solution addresses the Key Issue#3 for _REQ-NSCH-09 potential requirement
and is based on volume control by CCS based on performance collection for a
S-NSSAI via CEF._
The Tenant the Network Slice is assigned to, is referred to as \"NS-Tenant\"
and handled under a Converged Charging System (CCS) \"Tenant CCS\" hosting NS-
Tenant account balance.
This solution is based on 3GPP TS 28.201 [4] mechanisms, considering the total
volume of aggregated PDU sessions per S-NSSAI is part of the Network slice
performance and analytics (NSPA) charging information. The Mns Producer is
responsible to collect volume from UPFs, and to aggregate per S-NSSAI. and to
notify on volume thresholds triggers supplied by CCS.
This solution is based on successive volume blocks reservation by CCS which
are gradually debited based on volume collected under NSPA Charging.
During this mechanism, interaction with BSS takes place to either call for a
recharge, notify the cost for recorded extra-volume, or revoke the NS-Tenant
from using the S-NSSAI.
#### 6.3.3.2 Architecture description
The architecture for this solution is 3GPP TS 28.201 [4] Figure 4.2.2-1:
Network slice performance and analytics converged charging architecture.
#### 6.3.3.3 Flow description
The following figure 6.3.3.3-1 describes the high level charging procedure for
Volume control by CCS based on performance collection:
Figure 6.3.3.3-1: Volume control by CCS based on performance collection
1\. NS tenant volume based charging per S-NSSAI covered by Tenant CCS; account
with maximum volume allowed Vm. Account, rating and reservation control for
V1, V2, ... Vn (with V1+V2+..Vn \ Solutions #3.1 allows to support network slice usage converged charging
> based on total PDU sessions volume per S-NSSAI aggregation by NS Tenant CCS
> interacting UE CCS during with individual UE charging. Pros:
>
> \- Same NF source (i.e. SMF) used for volume usage collection by both
> individual UE and aggregation
>
> \- Good level of accuracy of NS volume usage
>
> \- No need for a new NF in the signalling path for PDU session handling
> since it relies on existing individual UE PDU session charging with UE CCS.
>
> \- When NS volume limit is reached, new PDU sessions can be rejected.
>
> \- Approaching NS volume limit can be anticipated.
>
> Cons:
>
> \- high level signalling between NS tenant CHFs interfacing many UE CHFs
> (based on each CCS can have multiple CHFs).
>
> \- NS tenant CCS has to maintain the actual NS total volume usage.
Solutions #3.2 allows to support network slice usage converged charging based
on _volume control by CCS based on performance collection for a S-NSSAI via
CEF_
> Pros:
>
> \- NS tenant CCS interfacing limited number of entities (aggregation handled
> by MnS producers)
>
> \- No need for NS tenant CCS to maintain the actual NS total volume usage
>
> Cons:
>
> \- Different sources used for volume usage collection (i.e. SMF for
> individual UE and UPFs for NS tenant) resulting in different nature of
> volume being counted.
>
> \- Risk of high mismatch between sum of individual UEs volume and NS total
> volume
>
> \- Risk of significant delay between when NS volume was actually consumed
> and when account and rating control is processed for this volume.
>
> \- No possibility for immediate stop by NS tenant CCS when NS volume crosses
> the limit.
The major drawback of the solution #3.2 is to be more in \"offline charging\"
fashion by the lack of \"online charging\" control capabilities on actual
usage which can be better achieved by solution #3.1.
Drawbacks of the solution #3.1 can be resolved under appropriate deployment
options. When Communication Service Provider (CSP) and Network Slice Provider
(NSP) are the same, deployments can choose to collocate Tenant CCS with UE CCS
to simplify implementation.
### 6.3.5 Conclusions
It is concluded for Key issue #3, to specify partial solution #3.1 in Rel-17
to cover the Combined UE CCS - Tenant CCS solution option for tenant specific
S-NSSAI and Shared S-NSSAI for when the Communication Service Provider (CSP)
and Network Slice Provider (NSP) are the same. The internal structure for this
combined CCS will not be detailed.
Editor's Note: The final conclusion on solution(s) for a later release is ffs.
## 6.4 Key Issue #4: Converged Charging for max duration per network slice
### 6.4.1 General Description
This key issue is for investigating how to support network slice usage
converged charging based on PDU sessions maximum duration per S-NSSAI.
This investigation covers the following:
\- determination of which entity/entities in the 5G system is suitable to
provide the network slice usage information based on PDU sessions duration;
\- determination of the main interactions required to obtain network slice
usage information based on PDU sessions duration.
\- identification of the main charging information to be collected;
## 6.5 Key Issue #5: Converged Charging for number of unique UEs per network
slice
### 6.5.1 General Description
This key issue is for investigating how to support network slice access based
converged charging service on number of UEs.
The number of Ues is one of the attributes in the GST documented in GSMA 5GJA
NG.116 [6] characterising the network slice (one S-NSSAI) and defined as the
maximum number of Ues that can use the network slice simultaneously. This
means that the maximum number of simultaneous Ues can part of the offering and
in the extension part of the price for the offering. Simultaneous Ues will
currently mean unique Ues (i.e. with a unique identifier) and at the same
time. This can be extended to also allow to charge based on the number of
unique Ues that connect to a network slice over a period of time. For example,
if during a period the number of unique Ues is below a specific value one
price and if it does go above another price for the network slice.
This investigation covers the following:
\- determination of number of unique Ues accessing the network slice passing a
threshold;
\- identification of the main charging information to be collected in addition
to number of Ues;
\- identification of the main interactions with the NFs to obtain the charging
information;
\- determination of need for online and offline charging methods.
Editor's Note: how to determine that a UE is unique is ffs.
### 6.5.2 Solution#1
### 6.5.3 Solution#2
### 6.5.x Evaluation
## 6.6 Key Issue #6: UE Converged Charging based on network slice charging
### 6.6.1 General Description
This key issue is for investigating how to support UE Converged Charging
influenced by network slice converged charging of the network slice serving
the UE.
UE Converged Charging is based on criteria related to the Network Slice
serving a UE. For example, the tenant has paid for a Network Slice allowing a
large number of UEs and when the load level of network slice is low, wants
some UE to be allowed with a lower tariff for using Network resources.
This investigation covers the following:
\- determination of which entity/entities is/are suitable to provide the
network slice level of charging information for UE Converged Charging.
\- determination of the main interactions for UE Converged Charging to be
influenced by network slice converged charging.
\- identification of the main charging information.
### 6.6.2 Solution#6.1 NS Tenant CCS separated from UE CCS
#### 6.6.2.1 General description
This solution addresses the Key Issue#6 for _REQ-NSCH-01, and REQ-NSCH-11
potential requirements and is based on_ distributed charging architecture
split between _NS Tenant Converged Charging System (CCS) and UE CCS and
exchanges between them_.
Two types of subscribers are considered in the context of Network Slice: the
Tenant the Network Slice is assigned to, which is referred to as \"NS-
Tenant\", and the individual end-user \"UE\" served under the Network Slice.
Each type of subscriber is handled under a dedicated Converged Charging System
(CCS): \"Tenant CCS\" and \"UE CCS\" respectively.
\"UE CCS\" performs charging functionalities for individual UEs, and includes
in particular:
\- CHF exposing Nchf services associated to individual UEs.
\- ABMF hosting individual UE account balance, provisioned with all necessary
information related to subscribed-to services the UE has paid for.
\- The subscription description includes in particular the subscribed NSSAI
(set of S-NSSAI(s)).
\"Tenant CCS\" performs charging functionalities for NS-Tenant, and includes
in particular:
\- CHF exposing Charging service(s) associated to NS-Tenant.
\- ABMF contains NS-Tenant account balance, provisioned with all necessary
information related to the Network Slice matching SLS requirements the NS-
Tenant has paid for,
\- The subscription description includes in particular. the list of service
profiles subscribed-to by the NS-Tenant, each service profile with assigned
group of S-NSSAI(s).
How the account balance is provisioned with the subscriber\'s profile (for
both NS-Tenant and individual UE) and various subscribed-to services is
unspecified and expected to be covered at BSS level.
The UE 5G data connectivity converged charging from SMF is specified in 3GPP
TS 32.255 [9] and uses Nchf_ConvergedCharging service exposed by UE CCS for
individual UE PDU session charging.
The Registration management converged charging from AMF is specified in 3GPP
TS 32.256 [10] and uses Nchf_ConvergedCharging service exposed by UE CCS for
individual UE registration.
A new charging service exposed by the CHF (Tenant CCS) is defined for enabling
association between individual UE charging and NS tenant charging. This
association is achieved by UE CCS responsible for individual UE charging
consuming this new charging service exposed by the Tenant CCS.
In this solution, the NS Tenant charging information used for individual UE
charging can include a various set of information such as \"Max nb of PDU
sessions\", \"Nb of PDU sessions\", \"load level\", \"Max nb of registered
UEs\", \"Nb of registered UEs\".
When Communication Service Provider (CSP) and Network Slice Provider (NSP) are
the same in the model roles of network slicing defined in clause 4.1,
deployments can choose to collocate Tenant CCS with UE CCS.
#### 6.6.2.2 Architecture description
**Figure 6.6.2.2-1: Distributed charging architecture in reference point
representation.**
ChX for interaction between CHF (UE CCS) and CHF (Tenant CCS)
Deployments can choose to collocate Tenant CCS with UE CCS.
#### 6.6.2.3 Flow description
The figure 6.6.2.3-1 describes the high level charging procedure for UE PDU
session converged Charging influenced by Network slice converged charging
using distributed charging architecture.
**Figure 6.6.2.3-1: UE PDU session converged Charging influenced by Network
slice converged charging**
> 1ch. NS Tenant NSM charging per S-NSSAI covered by Tenant CCS: obtained
> S-NSSAI in service profile: \"Max nb of PDU sessions\", \"Max nb of UEs\"...
>
> 2ch. NS Tenant NSPA based charging per S-NSSAI covered by Tenant CCS:
> obtained S-NSSAI KPIs.
>
> Steps according to 3GPP TS 32.255 [9] clause 5.2.2.2.2 for individual UE
> charging covered by UE CCS.
>
> 9ch-b1. UE PDU session charging needs input from NS charging for this
> S-NSSAI. Examples of requested input: \"Max nb of PDU sessions\", \"Nb of
> PDU sessions\", \"load level\"...
>
> 9ch-b2a. Charging service request to Tenant CCS (S-NSSAI, UE PDU session
> charging information, UE requested NS charging information).
>
> 9ch-b2b. Based on received \"UE requested NS charging information\", Tenant
> CCS correlates with existing NS charging information for the S-NSSAI: NSM
> charging information (\"Max nb of PDU sessions\"..), NSPA charging
> information (\"Nb of PDU sessions (increased by one for considering the new
> PDU session)\", \"load level\",..)...
>
> 9ch-b2c. CHF (Tenant CCS) provides \"UE supplied NS charging information\"
> in Charging service response.
>
> 9ch-b3. Account, Rating and reservation control for individual UE based on
> \"UE supplied NS charging information\".
>
> 9ch-c. CHF (UE CCS) provides appropriate answer for the individual UE.
The figure 6.6.2.3-2 describes the high level charging procedure for UE
registration converged Charging influenced by Network slice converged charging
using distributed charging architecture.
**Figure 6.6.2.3-2: UE Registration converged Charging influenced by Network
slice converged charging**
> 1ch. NS Tenant NSM charging per S-NSSAI covered by Tenant CCS: obtained
> S-NSSAI in service profile: \"Max nb of PDU sessions\", \"Max nb of UEs...\"
>
> 2ch. NS Tenant NSPA based charging per S-NSSAI covered by Tenant CCS:
> obtained S-NSSAI KPIs
>
> Steps according to 3GPP TS 32.256 [10] clause 5.2.2.2.4 for individual UE
> registration charging covered by UE CCS.
>
> 16ch-b1. Allowed S-NSSAI(s) in the Allowed NSSAI received for UE
> registration converged charging, needs input from NS charging. Examples for
> criteria: \"Max nb of registered UEs\", \"Nb of registered UEs\", \"load
> level\"...
>
> 16ch-b2. For each allowed S-NSSAI for which this association is needed:
>
> 16ch-b2a. Charging service request to Tenant CCS (S-NSSAI, UE registration
> charging information, UE requested NS charging information).
>
> 16ch-b2b. Based on received \"UE requested NS charging information\",
> correlates with existing NS charging information for the S-NSSAI: NSM
> charging information (\"Max nb of UEs\"..), NSPA charging information (\"Nb
> of registered UEs (increased by one for considering the new registration)\",
> \"load level\",..)...
>
> 16ch-b2c. CHF (Tenant CCS) provides \"UE supplied NS charging information\"
> in Charging service response.
>
> 16ch-b3. Account, Rating and reservation control for individual UE based on
> \"UE supplied NS charging information\".
>
> 16ch-c. CHF (UE CCS) provides appropriate answer for the individual UE.
## 6.7 Key Issue #7: Converged Charging for actual duration per network slice
### 6.7.0 General Description
This key issue is for investigating how to support network slice usage
converged charging based on actual duration per S-NSSAI.
The duration a network slice is in use can part of the offering and in the
extension part of the price for the offering. The duration a network slice is
in use is defined as the duration an S-NSSAI (used to identify the network
slice) have at least one active PDU session.
This investigation covers the following:
> \- determination of which entity/entities in the 5G system is suitable to
> provide the network slice usage information based on actual duration;
>
> \- determination of the main interactions required to obtain network slice
> usage information based on actual duration.
>
> \- identification of the main charging information to be collected;
### 6.7.1 Solution#7.1 Duration determination by NS Tenant CCS
#### 6.7.1.1 General description
This solution addresses the Key Issue#7 for _REQ-NSCH-12 potential requirement
and is based on functional separation between NS Tenant Converged Charging
System (CCS) and UE CCS as described for solution#3.1 and solution#6.1._
For a given S-NSSAI, _the_ Tenant CCS determines the start when receiving the
first request for a UE PDU session from a _UE CCS, and determines the end when
receiving_ the release of the last UE PDU session from a UE CCS.
When Communication Service Provider (CSP) and Network Slice Provider (NSP) are
the same in the model roles of network slicing defined in clause 4.1,
deployments can choose to collocate Tenant CCS with UE CCS.
#### 6.7.1.2 Architecture description
Same architecture as clause 6.3.2.2.
#### 6.7.1.3 Flow description
The figure 6.7.1.3-1 below describes the high level charging procedure for
Duration determination by NS Tenant CCS, in IEC scenario for the NS Tenant
CCS.
Figure 6.7.1.3-1: Duration determination by Tenant CCS
> 1-2. The first UE PDU session request initiates PDU session charging
>
> 3\. UE CCS sends a Charging service request [Event] to Tenant CCS with
> S-NSSAI, UE PDU session charging start.
4\. Tenant CCS receiving the first UE PDU session charging start, determines
the start time for this S-NSSAI.
5\. Tenant CCS provides appropriate answer in Charging service response.
6\. UE PDU session procedure continuation
> 7-9. A second UE PDU session request initiates UE PDU session charging to a
> UE CCS different from the first UE PDU session, which sends a Charging
> service request [Event] to Tenant CCS
10-11. Tenant CCS receiving the second UE PDU session charging start for this
S-NSSAI, increases the counter by one and provides appropriate answer in
Charging service response.
> 12\. The last UE PDU session release initiates PDU session charging release
13\. Tenant CCS receiving the last UE PDU session charging release, determines
the end time for this S-NSSAI.
### 6.7.2 Solution#7.2 Network slice actural duration charging from the SMF
#### 6.7.2.1 General description
This solution addresses the Key Issue#7 for _REQ-NSCH-12 potential requirement
and is NS actual duration measured by CHF based on the PDU session information
from the SMF_.
#### 6.7.2.2 Architecture description
The architecture for this solution is present as the following.
Figure 6.7.2.2-1: the NS actural duration from SMF Reporting
#### 6.7.2.3 Flow description
The following figure 6.7.2.3-1 describes the high level charging procedure for
_NS actual duration based on the PDU session establishment from the SMF_.
Figure 6.7.2.3-1: _NS actual duration based on the SMF reporting_
1\. NS actual duration charging per S-NSSAI covered by Tenant CCS. NS duration
charging is configurated in the UE CCS and Tenant CCS, including the
relationship between S-NSSAI/User ID and Tenant ID, etc.
2\. Steps according to 3GPP TS 32.255 [9] clause 5.2.2.2.2 for individual UE
charging covered by UE CCS, including the PDU session establishment and PDU
Session release.
2ch-a. SMF determinates to trigger charging service request to CHF (UE CCS)
because the UE PDU session establishment and UE PDU session release of the
S-NSSAI for the tenant.
2ch-b. CHF (UE CCS) generates the UE CDR.
2ch-c. CHF (UE CCS) provides appropriate charging data response.
3ch-a. CHF (UE CCS) reports the update of PDU sessions of the S-NSSAI for the
tenant: determination to trigger Charging service to CHF (Tenant CCS).
3ch-b. Charging service request to Tenant CCS with S-NSSAI, UE PDU session
charging information, and generate the CDRs. The billing domain can analysis
the charging information in the CDRs to get the NS actual duration.
3ch-c. CHF (Tenant CCS) provides appropriate charging data response.
Editor's note: the details of the interaction between UE CHF and Tenant CHF is
ffs.
### 6.7.3 Solution#7.3 Network slice actural duration charging from the NSACF
#### 6.7.3.1 General description
This solution addresses the Key Issue#7 for _REQ-NSCH-12 potential requirement
and is NS actual duration measured by CHF based on the concurrency number of
PDU sessions for an S-NSSAI._
#### 6.7.3.2 Architecture description
The architecture for this solution is present as the following figure
6.7.3.2-1.
Figure 6.7.3.2-1: the NS actural duration from NSACF Reporting
#### 6.7.3.3 Flow description
The following figure 6.7.3.3-1 describes the high level charging procedure for
_NS actual duration_ measured by Tenant CCS based on NSACF reporting.
Figure 6.7.3.3-1: _NS actual duration based on the NSACF reporting_
1\. NS actual duration charging per S-NSSAI covered by Tenant CCS. NS during
charging is configurated in the Tenant CCS, including the relationship between
S-NSSAI and Tenant ID, etc.
2\. Steps according to 3GPP TS 23.501 [11] for the network slice access
control, including the control and count the number of the PDU session.
3\. NSACF counts and aggregates the number of the PDU sessions, when NSACF
counts the number of PDU session from 0 to greater than 0, the trigger of
\"change of the number of the PDU session\" is armed.
3ch-a. NSACF determinates to trigger charging service request to CHF (Tenant
CCS) with the number of PDU sessions.
3ch-b. CHF (Tenant CCS) counts the duration of the network slice for tenant.
3ch-c. CHF (Tenant CCS) provides appropriate charging data response.
4\. NSACF counts and aggregates the number of the PDU session, when NSACF
counts the number of PDU session from greater than 0 to 0, the trigger of
\"change of the number of the PDU session\" is armed.
4ch-a. NSACF determinates to trigger charging service request to CHF (Tenant
CCS) with the number of PDU sessions and time stamp.
4ch-b. CHF (Tenant CCS) counts the duration of the network slice for tenant.
4ch-c. CHF (Tenant CCS) provides appropriate charging data response.
### 6.7.4 Solution#7.4 Network slice actural duration charging from the NWDAF
#### 6.7.4.1 General description
This solution addresses the Key Issue#7 for _REQ-NSCH-12 potential requirement
and is NS actual duration measured by Tenant CCS based on performance
collection for an S-NSSAI via NWDAF._
#### 6.7.4.2 Architecture description
The architecture for this solution is present as the following figure
6.9.4.2-1.
Figure 6.7.4.2-1: the NS actural duration from NWDAF
#### 6.7.4.3 Flow description
The following figure 6.7.4.3-1 describes the high level charging procedure for
_NS actual duration_ measured by CCS based on performance collection:
Figure 6.7.4.3-1: the NS actural duration from NWDAF
1\. NS actual duration charging per S-NSSAI covered by Tenant CCS. NS during
charging is configurated in the Tenant CCS, including the relationship between
S-NSSAI and Tenant ID, etc.
2\. CEF subscribes the change of the number of PDU session, when NWDAF
analyses the number of PDU session from 0 to greater than 0 and counts the
number of PDU session from greater than 0 to 0, NWDAF notifies the CEF with
the status of number of PDU session.
3\. CEF counts the duration of NS based on the status of the number of PDU
session.
3ch-a. CEF determinates to trigger charging service request to CHF (Tenant
CCS) with S-NSSAI, time stamp and the number of PDU sessions.
3ch-b. CHF (Tenant CCS) counts the duration of the network slice for tenant.
3ch-c. CHF (Tenant CCS) provides appropriate charging data response.
## 6.8 Key Issue #8: Converged Charging for NSSAA
### 6.8.1 General Description
This key issue is for investigating how to support UE Network Slice-specific
Authentication and Authorization (NSSAA) network slice access converged
charging.
NSSAA functionality specified in clause 5.15.10 3GPP TS 23.501 [7] is an
additional AAA-S EAP based authorization for UE to access a network slice,
after the primary authorization was granted by the PLMN under the list of
allowed S-NSSAI(s). This capability can be offered and monetized by Operators
(PLMN) to 3^rd^ party enterprises owning AAA-S.
This investigation covers the following:
> \- determination of which entity/entities in the 5G system is suitable to
> provide charging information for usage of NSSAA by UE;
>
> \- determination of the main interactions required to obtain charging
> information for usage of NSSAA.
>
> \- identification of the main charging information to be collected;
### 6.8.2 Solution#8.1 Converged Charging for NSSAA
#### 6.8.2.1 General description
This solution addresses the Key Issue#8 for _REQ-NSCH-13 and is based on use
of_ Nchf _converged charging service by 5GS Network Functions involved in UE
NSSAA procedures._
AMF interacts with CHF during NSSAA procedure with the _Network Slice-Specific
Authentication and Authorization Function (NSSAAF) for a given UE and S-NSSAI
for CHF to produce appropriate CDR._
NSSAAF interacts with CHF during NSSAA procedure _for a given UE and S-NSSAI
for CHF to produce appropriate CDR._
The solution applies for NSSAA, AAA Server triggered Network Slice-Specific
Re-authentication and Re-authorization procedure and AAA Server triggered
Slice-Specific Authorization Revocation.
The AMF Charging characteristics (Annex A of 3GPP TS 32.256[10]) is extended
to include NSSAA related configuration.
NSSAA Charging profile supplied by AAA-S overrides NSSAA Charging
characteristics pre-configured in NSSAAF and NSSAA related information in AMF
Charging characteristics.
#### 6.8.2.2 Architecture description
Figure 6.8.2.2-1: NSSAAF and AMF converged charging architecture
#### 6.8.2.3 Flow description
The figure 6.8.2.3-1 below describe the high level charging procedure for
Converged Charging for Network Slice-Specific Authentication and Authorization
(NSSAA) procedure based on figure 4.2.9.2-1 3GPP TS 23.502 [11]:
Figure 6.8.2.3-1: Converged Charging for NSSAA
> Steps are based on steps of figure 4.2.9.2-1 3GPP TS 23.502 [11], with the
> following additions: [ ]{.underline}
0ch. NSSAAF Charging characteristics is pre-configured in NSSAAF indicating:
Charging active (Yes/No) for NS authentication/auth, re-authentication/re-
auth, revocation per S-NSSAI.
1ch. AMF Charging characteristics (defined by Annex A of 3GPP TS 32.256 [10])
pre-configured in AMF indicating: Charging active (Yes/No) for NS
authentication/auth, re-authentication/re-auth, revocation per S-NSSAI.
7-8. Based its local policies, AAA-S decides a dedicated NSSAA Charging
profile for this GPSI and S-NSSAI should be enforced: indicating Charging
active (Yes) in AMF and NSSAAF for authentication/auth, re-authentication/re-
auth, revocation. This NSSAA Charging profile is sent to NSSAAF (via AAA-P if
any) with EAP UE identity, GPSI, S-NSSAI.
8ch. Received NSSAA Charging profile overrides behaviors pre-configured NSSAAF
Charging characteristics for this UE and S-NSSAI: Charging active in NSSAAF
for authentication/auth, re-authentication/re-auth, revocation.
9\. The NSSAA Charging profile is relayed to AMF with EAP UE identity, GPSI,
S-NSSAI.
9ch. Received NSSAA Charging profile overrides behaviors pre-configured in AMF
Charging characteristics for this UE and S-NSSAI: Charging active in AMF for
NSSAA for authentication/auth, re-authentication/re-auth, revocation for this
S-NSSAI
17ch-a to c: Charging active in NSSAAF: Charging Data Request [Event] is sent
to CHF with the result of NSSAA Authentication (EAP-Success/Failure, S-NSSAI,
GPSI) for CHF NSSAAF CDR generation
17ch-d to e: Charging active in AMF: Charging Data Request [Event] is sent to
CHF by AMF with the result of NSSAA Authentication (EAP-Success/Failure,
S-NSSAI, GPSI) for CHF AMF CDR generation
The solution for Converged Charging AAA Server triggered Network Slice-
Specific Re-authentication and Re-authorization procedure are based on figure
4.2.9.3-1 3GPP [TS 23.502 [11]]{.underline} with additional interactions with
CHF from NSSAAF and AMF on Nnssaaf_NSSAA_Re-AuthNotification.
The solution for Converged Charging AAA Server triggered Slice-Specific
Authorization Revocation procedure are based on figure 4.2.9.4-11 3GPP TS
23.502 [11] with additional interactions with CHF from NSSAAF and AMF on
Nnssaaf_NSSAA_RevocationNotification.
## 6.9 Key Issue #9: Different types of maximum
There are today three definitions of the maximum:
  * **In the GSMA GST, GSMA 5GJA NG.116 [6], it is possible to specify the maximum number UEs and PDU sessions allowed to of simultaneous use a network slice.**
  * **The NSACF, 3GPP TS 23.501 [7] clause 5.15.11, allows for monitoring and controlling the number of registered UEs per network slice and the number of PDU Sessions per network slice.**
  * **The OAM, 3GPP TS 28.554 [14] clauses 6.2.6 and 6.4.2, measures the number of UEs or PDU sessions on a network slice at specific interval and may give the maximum value of these.**
From this it can be noticed that the GSMA and NSACF are aligned in the
definition as it may control the maximum as well as monitoring it, the OAM is
more of a measurement where samples are taken at certain interval and after
that there may be a maximum or median value calculated for a period. This
means in the OAM case that the values may have been higher than the reported
one if the sample was taken before and after a peak.
In some cases, the OAM values might be preferred and others the NSACF values
might be better. This means that there is a need to be able to distinguish
between them.
#