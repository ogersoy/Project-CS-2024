# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document contains the findings of the Study on 5G NR UE full stack
testing of network slicing and the proposed test cases.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 38.323: \"NR; Packet Data Convergence Protocol (PDCP)
specification\".
[3] 3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol
specification\".
[4] 3GPP TS 38.322: \"NR; Radio Link Control (RLC) protocol specification\".
[5] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol
Specification\".
[6] 3GPP TS 38.508-1: \"5GS;User Equipment (UE) conformance specification;
Part 1: Common test environment\".
[7] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[8] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[9] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
stage 3\".
[10] 3GPP TS 24.526: \"UE policies for 5G System (5GS); Stage 3\".
[11] 3GPP TS 23.003: \"Numbering, addressing and identification\"
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Symbols
FFS
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 General
## 4.1 Background
5G Network Slicing is one of the most distinctive features provided by 5G NR
and is key to meet diversified services requirements in 5G era. With the
introduction of 5G network slicing technology, operators will be able to
provide network capabilities with different functional characteristics, which
will provide e.g. \"exclusive\" network for users with different KPI
requirements to ensure a high-quality of service and meet differentiated
scenario requirements. 5G network slicing can also help to achieve the goal of
improving the efficiency of network resource utilization, optimizing the
network construction investment of operators, and building a flexible and
agile 5G network.
The user experience resulting from the use of 5G network slicing is critical
for commercial success, and therefore testing the operation of 5G network
slicing is necessary to ensure consistent predictable behaviour. To enable
testing the 5G UEs supporting network slicing as they are used in the field
the application layer at the device side needs to be included in the testing,
as URSP based network slice selection and traffic routing procedures are based
on traffic descriptor components (see TS 24.526) passed on by the application
layer to the UE protocol stack. The traffic descriptor components that are
passed onto the UE protocol stack to be used as a base for the network slice
selection when a specific application requests a PDU session are configured
within the device. There is a strong industry demand to define the test
methods and test procedures that include the full related UE application layer
in the testing of the network slice selection functionality for 5G UE
supporting network slicing.
## 4.2 Study Item Objective
The technical objectives of this study item are:
\- To study how to define test procedures that will allow the full protocol
stack testing of a 5G NR UE supporting network slicing. The test procedures
for full protocol stack testing of the network slicing functionality, e.g. how
the UE uses configurations matching UE application to traffic descriptor
components to select S-NSSAI, will be provided.
\- To study how to define test procedures that will allow the service
performance testing of a 5G NR UE supporting network slicing. The test
procedures for performance testing of the network slicing service, e.g.
application layer throughput and latency, will be provided.
NOTE 1: The Study Item should take into account industry recommendation from
relevant organizations such as GSMA, NGMN and GTI pending on RAN5\'s decision
on a case by case basis.
NOTE 2: The Study Item should take into account the User Privacy and/or
implementation confidentiality.
NOTE 3: The Study Item will not define the specific traffic descriptor or
related mapping mechanism.
# 5 Study on 5G NR UE Full Stack Testing for Network Slicing
## 5.1 Definition of 5G NR UE Full Stack Testing for Network Slicing
### 5.1.1 Definition of Full Stack
The test procedures defined will allow the full stack testing of a 5G NR UE
supporting network slicing. The term \"full stack\" means multilayer combined
performance of the following layers:
1 UE\'s Radio link protocol data processing performance (PHY, MAC, RLC, PDCP)
2 UE\'s Radio link protocol signalling processing capability (RRC, NAS)
3 UE\'s TCP/IP processing performance
4 UE\'s Internet Application processing performance
## 5.2 Test Configurations
### 5.2.1 UE Full Stack Network Slicing Test Equipment
Editor\'s note: This sub-clause should define the architecture of the test
equipment utilized for 5G NR UE full stack testing of network slicing
The test equipment utilized for 5G NR UE Full Stack Testing for Network
Slicing should consist of the following items:
  * System Simulator(s) suitable for the 5G NR radio technology used for network slicing testing. System simulator(s) could receive network slice configuration scheme from main controller and send network slicing related configuration to UE via signalling. System simulator(s) could receive application data from UE and send application data to application server simulator(s).
  * Application Server Simulator(s) suitable for receiving application data from UE via system simulator(s) and handling the received application data. Application Server Simulator(s) could be either implemented in Main Controller or implemented as an independent unit.
  * Main Controller suitable for generating network slice configuration scheme and configuring the network slice configuration scheme to System Simulator(s).
  * Application Client Simulator(s) suitable for generating Traffic Descriptor of application(s) and corresponding application data on UE side.
### 5.2.2 UE Full Stack Network Slicing Test Equipment Connection Diagrams
Editor\'s note: This sub-clause should give the reference diagrams of the test
equipment defined in 5.2.1
The UE Full Stack Network Slicing Test Equipment connection diagram is shown
in Figure 5.2.2-1.
Figure 5.2.2-1: UE Full Stack Network Slicing Test Equipment Connection
Diagram
### 5.2.3 Network Slicing Configurations
Table 5.2.3-1: Network Slicing Configurations
* * *
Application OS App id DNN FQDN IP 3 Tuples S-NSSAI  
SST SD APP A pc_OS_App_ID pc_APN_ID_Specific pc_Des_FQDN pc_IP_Address,
pc_Protocol_ID, pc_Sinlge_Remote_Port '00000001\'B 0x000001 APP B FFS FFS FFS
FFS '00000001\'B 0x000002
* * *
### 5.2.4 Message and Information Elements Contents
The common message and information elements contents are defined in TS
38.508-1 [6] clause 4. In addition, the following message and information
elements contents apply:
_\-- MANAGE UE POLICY COMMAND_
Table 5.2.4-1: _MANAGE UE POLICY COMMAND_
* * *
Derivation Path: TS 24.501 Table D.5.1.1.1  
Information Element Value/remark Comment Condition PTI Any value from 1 to 254  
MANAGE UE POLICY COMMAND message identity '0000 0001'B  
UE policy section management list See Table 5.2.4-2
* * *
_\-- UE policy section management list_
Table 5.2.4-2: _UE policy section management list_
* * *
Derivation Path: TS 24.501 Figure D.6.2.1  
Information Element Value/remark Comment Condition UE policy section
management list IEI  
Length of UE policy section management list contents Set to the actual length
of \'UE policy section management list contents\' in bytes  
UE policy section management list contents  
UE policy section management sublist (PLMN-1)  
Length of UE policy section management sublist Set to the actual length of
\'UE policy section management sublist\' in bytes  
PLMN ID Set to the PLMN value used in the test case  
UE policy section management sublist contents  
Instruction contents length Set to the actual length of \'Instruction
contents\' in bytes  
UE policy section contents  
UE policy part See Table 5.2.4-3
* * *
_\-- UE policy part_
Table 5.2.4-3: _UE policy part_ _with UE policy part type = {URSP}_
* * *
Derivation Path: TS 24.501 Figure D.6.2.7  
Information Element Value/remark Comment Condition UE policy part contents
length Set to the actual length of \'UE policy part contents\' in bytes  
Spare '0000'B  
UE policy part type '0001'B URSP UE policy part contents  
URSP rule 1 See Table 4.8.5.2-1 in TS 38.508-1  
URSP rule 2 See Table 4.8.5.2-1 in TS 38.508-1
* * *
### 5.2.5 UE Specific Items
The following parameters are recommended to be provided by UE or application
supplier to indicate the information of application using network slicing
during test.
+-------------------------+----------------+-------------------------+ | Parameter Name | Parameter Type | Description | +-------------------------+----------------+-------------------------+ | pc_APN_ID_Specific | charstring | APN/DNN value of the | | | | simulation application | | | | client defined in | | | | clause 5.3.1 | | | | | | | | The APN/DNN Network | | | | Identifier portion of | | | | the Access Point / Data | | | | Network Name, as | | | | defined in TS 23.003 | | | | [11], subclause 9.1 | +-------------------------+----------------+-------------------------+ | pc_OS_App_ID | charstring | OS App Id value of the | | | | simulation application | | | | client defined in | | | | clause 5.3.1 | | | | | | | | The coding of OS App Id | | | | is up to UE | | | | implementation | +-------------------------+----------------+-------------------------+ | pc_Des_FQDN | charstring | The destination FQDN | | | | value of Application | | | | Server Simulator(s) | | | | defined in clause 5.2.1 | | | | | | | | The destination FQDN as | | | | defined in | | | | subclause 28.3.2.1 in | | | | 3GPP TS 23.003 [11] | +-------------------------+----------------+-------------------------+ | pc_Des_FQDN | charstring | The destination FQDN | | | | value of Application | | | | Server Simulator(s) | | | | defined in clause 5.2.1 | | | | | | | | The destination FQDN as | | | | defined in | | | | subclause 28.3.2.1 in | | | | 3GPP TS 23.003 [11] | +-------------------------+----------------+-------------------------+ | pc_IP_Address | charstring | The IP address of | | | | Application Server | | | | Simulator(s) defined in | | | | clause 5.2.1 | | | | | | | | The coding of IP | | | | address is four octet | | | | IPv4 address and 4 | | | | octet IPv4 address mask | | | | for IPv4 or sixteen | | | | octet IPv6 address and | | | | one octet prefix length | | | | for IPv6 | +-------------------------+----------------+-------------------------+ | pc_Protocol_ID | charstring | The IPv4 protocol | | | | identifier or IPv6 next | | | | header of Application | | | | Server Simulator(s) | | | | defined in clause 5.2.1 | +-------------------------+----------------+-------------------------+ | p | charstring | The port number of | | c_Sinlge_Remote_Port | | Application Server | | | | Simulator(s) defined in | | | | clause 5.2.1 | +-------------------------+----------------+-------------------------+
## 5.3 Application Simulation
### 5.3.1 Application Client Simulator
To enable testing an Application Client Simulator on device is used to
simulate the application which configured with network slicing. The following
functionality is recommended for the Application Client Simulator to support.
\- The Application Client Simulator is installed on device
\- The Application Client Simulator may start automatically on device power-up
or manually be started by the operator at the beginning of the test campaign.
\- The Application Client Simulator could receive the type of traffic
descriptor to be tested and generate the corresponding traffic descriptor
which conform to Network Slicing Configurations defined in clause 5.2.3
\- The Application Client Simulator could generate data packets matching the
traffic descriptor in Network Slicing Configurations and transfer data packets
to operating system and communication unit on device
\- The Application Client Simulator could directly send the generated data
packets to application server simulator via cable connection
### 5.3.2 Test Models
Editor\'s note: This sub-clause should define the test models including app
simulator and test equipment
## 5.4 Statistical Analysis
### 5.4.1 Overview of Mapping Application to Network Slicing
When the mapping of applications to network slicing is tested, the fundamental
goal is to verify the procedure of associating applications to PDU sessions
based on URSP rules. URSP rules contain Traffic Descriptors determining which
URSP rule is applicable for the specific application and a list of Route
Selection Descriptors determining the corresponding PDU session.
With this knowledge, the following aspects are recommended to be checked to
verify the procedure of mapping application to Network Slicing
  * The selection of applicable URSP rule according to the Traffic descriptors in UE Route Selection Policy Rule within URSP rules and information from the specific application
  * The selection of existing PDU session or establishment of new PDU session for specific application based on the selected Route Selection Descriptors within the applicable URSP rule.
The way to trigger URSP rule selection is UE implementation specific and
driven by application. To enable testing then the UE is recommended to be
equipped with the application simulation client defined in clause 5.3.1 to
trigger the required selection procedures
### 5.4.2 Overview of Application Layer Throughput With Network Slicing
Editor\'s note: This sub-clause should define the statistical analysis method
of application layer throughput with network slicing configured
In general, the application layer throughput is impacted by variations mainly
at the physical layer and MAC layer. Thus, a variety of test points should be
picked across different physical layer conditions (doppler, signal-to-noise
ratio, antenna configurations etc.).
There can be multiple usages of network slicing with different needs such as
mission critical ultra-reliable low latency slice, massive machine to machine
type communication slice, extreme high throughput mobile broadband slice.
Depending on the use case, channel requirements will be different and
accordingly the application layer performance will also be benchmarked.
During the application layer throughput measurement, we can also record ACK,
NACK and DTX in order to calculate the L1 payload bit throughput, although
this is not the main target of the test procedure. The measured throughput and
its comparison to an expected throughput value can be evaluated. However, the
parameters for this measurement are not as controlled as in the case of L1
throughput
For fixed reference channel testing, the UE is compared against a predefined
limit at the physical layer. Therefore, statistics can be derived to determine
the minimum number of samples for a given confidence level for the pass/fail
decision. While the application layer data throughput is of a statistical
nature, in case of fixed reference channel testing, it is possible to set a
lower bound for the achievable throughput by computing the overhead due to
upper layer payload headers.
### 5.4.3 Overview of Application Layer Latency With Network Slicing
Editor\'s note: This sub-clause should define the statistical analysis method
of application layer latency with network slicing configured
In order to measure the application layer latency for a Standardized Slice
Type (SST) or a non-standardized slice type, some important factors which
needs to be considered may involve network node delay in time, jitter
experienced based on channel bandwidth and network propagation conditions.
Each such conditions can be evaluated against the QoS requirements and delay
sensitivity of the data being transmitted. The end goal here is to optimize
the utilization of the allocation of network resources and the quality of
service metrics.
For fixed or variable reference channel and an SST, the UE latency for each
data traffic session per slice needs to be captured and evaluated against the
required maximum delay in reception of the desired data packet. Based on the
measured packet delay and jitter experienced e2e evaluation of the layer
latency can be derived and benchmarked. Important aspect here to consider
would be to adjust the tolerance +/- of the latency and jitter in percentage
terms to define a final evaluation criterion as per testing needs and network
traffic type usage.
## 5.5 Test System Uncertainty and Test Tolerance
### 5.5.1 Test System Uncertainty and Test Tolerance for FR1 testing
#### 5.5.1.1 Recommended Uncertainty of Test System
#### 5.5.1.2 Test Tolerances
#### 5.5.1.3 Impact of Test System Uncertainty on Test Results
# 6 Conclusions
The UE full stack testing for network slicing study item was initiated by RAN5
to include UE full stack network slicing capability. The following aspects
were included as part of the present document:
Definition of UE Full Stack Testing for Network Slicing
Test configurations
Application Simulation
Statistical analysis
Test uncertainty and test tolerance
The present document includes a set of recommended test procedures for UE
supporting network slicing that is in-line with the study item objectives
identified in clause 4.
The test procedures are contained in Annex A.
###### ### Annex A: Test Procedures
# A.1 Purpose of annex
This annex specifies the test cases for 5G NR UE Full Stack Testing for
Network Slicing. The test cases are the result of the study item and are the
recommended test cases to be used when evaluating UE capability of supporting
network slicing. The use of \"shall\" in the test cases listed herein is only
used to indicate that the test case purpose, procedure, and/or result may not
be as expected if the specified \"shall\" or \"must\" item is not used or
followed. As the Technical Report is informative in nature, the use of
\"shall\" or \"must\" in the test cases is not meant to imply a specific
requirement. Their use is meant to indicate instances where the test
objectives of the recommended test cases may not be achieved.
# A.2 5G NR /URSP Configuration and Application Mapping
## A.2.1 5G NR /URSP Configuration
### A.2.1.1 5G NR / URSP Configuration / Signalling
A.2.1.1.1 Definition
The provisioning of URSP rules from network to UE is one of the fundamental
functional requirements for network slicing.
A.2.1.1.2 Test Purpose
To verify that UE could support the provisioning of URSP rules from network to
UE over NAS messages
A.2.1.1.3 Test Parameters
Void
A.2.1.1.4 Test Description
A.2.1.1.4.1 Initial Conditions
##### System Simulator: {#system-simulator .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.2.1.1.4.2 Test Procedure
1\. UE is switched on.
2\. Steps 2 to 13 of the generic procedure for NR RRC_IDLE specified in TS
38.508-1 subclause 4.5.2 are performed.
3\. The SS transmits a REGISTRATION ACCEPT message including Allowed NSSAI and
Configured NSSAI.
4\. The UE transmits an ULInformationTransfer message and a REGISTRATION
COMPLETE message.
5\. The SS transmits a DL NAS TRANSPORT message including UE Policy Container
and MANAGE UE POLICY COMMAND message to configure URSP rules
6\. The UE transmits an UL NAS TRANSPORT message including UE Policy Container
and a MANAGE UE POLICY COMPLETE message is included
7\. The SS transmits an RRCRelease message
Table A.2.1.1.4.2-1: REGISTRATION ACCEPT (step 3)
* * *
Derivation path: TS 38.508-1 Table 4.7.1-7  
Information Element Value/remark Comment Condition 5GS registration result
value '001'B 3GPP access  
Allowed NSSAI  
S-NSSAI IEI S-NSSAI value 1  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B 1  
SD 0x000001  
Mapped configured SST Not Present  
Mapped configured SD Not Present  
S-NSSAI IEI S-NSSAI value 2  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B 1  
SD 0x000002  
Mapped configured SST Not Present  
Mapped configured SD Not Present  
Configured NSSAI  
S-NSSAI IEI S-NSSAI value 1  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001  
Mapped configured SST Not Present  
Mapped configured SD Not Present  
S-NSSAI IEI S-NSSAI value 2  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B 1  
SD 0x000002  
Mapped configured SST Not Present  
Mapped configured SD Not Present
* * *
Table A.2.1.1.4.2-2: DL NAS TRANSPORT (step 5)
* * *
Derivation path: TS 38.508-1 [4], Table 4.7.1-11  
Information Element Value/remark Comment Condition Payload container type
'0101'B UE policy container  
Payload container See Table A.2.1.1.4.2-3
* * *
Table A.2.1.1.4.2-3: _MANAGE UE POLICY COMMAND_ (step 5)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '10001000'B DNN Type Traffic
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
Route selection descriptor 2  
Precedence value of route selection descriptor 1  
Route selection descriptor contents  
Route selection descriptor component type '00000100'B DNN type Route selection
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific  
URSP rule 2  
Precedence value of URSP rule 1  
Traffic descriptor  
Traffic descriptor component type identifier '10100000'B OS App Id type
Traffic descriptor component  
OS App Id length Set to the actual length of \'OS App Id\' in bytes  
OS App Id pc_OS_App_ID  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000002  
Route selection descriptor 2  
Precedence value of route selection descriptor 1  
Route selection descriptor contents  
Route selection descriptor component type '00000100'B DNN type Route selection
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific
* * *
## A.2.2 5G NR / Mapping Application to Network Slicing
### A.2.2.1 5G NR / Mapping Application to Network Slicing / DNN
Editor's note:
> \- The test parameters is FFS.
A.2.2.1.1 Definition
The UE procedure for associating applications to PDU sessions based on URSP
rules is one of the fundamental functional requirements for network slicing.
A.2.2.1.2 Test Purpose
To verify that UE could support the mapping of applications to URSP rules and
the establishment of PDU sessions based on the Traffic Descriptor of DNN.
A.2.2.1.3 Test Parameters
FFS
A.2.2.1.4 Test Description
A.2.2.1.4.1 Initial Conditions
##### System Simulator: {#system-simulator-1 .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue-1 .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble-1 .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.2.2.1.4.2 Test Procedure
1\. Steps 1 to 6 of the test procedure specified in subclause A.2.1.1.4.2 are
performed, except the _MANAGE UE POLICY COMMAND message is defined in_ Table
A.2.2.1.4.2-1
2\. Using the Application Client Simulator, generate traffic matching DNN
value in Traffic descriptor in URSP rule provisioned to the UE in step 1
3\. The UE transmits an UL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
REQUEST message. Observe the right S-NSSAI and DNN value are selected.
4\. The SS transmits a DL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
ACCEPT message.
5\. Using the Application Client Simulator, begin uplink data transfer from UE
to the Application Server Simulator
6\. Observe that the data received in Application Server Simulator via PDU
session is consistent with the data generated by Application Client Simulator.
Table A.2.2.1.4.2-1: _MANAGE UE POLICY COMMAND_ (step 1)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '10001000'B DNN Type Traffic
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
Route selection descriptor 2  
Precedence value of route selection descriptor 1  
Route selection descriptor contents  
Route selection descriptor component type '00000100'B DNN type Route selection
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific  
URSP rule 2  
Precedence value of URSP rule 1  
Traffic descriptor  
Traffic descriptor component type identifier '00000001'B Match-all type Route
selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000002
* * *
Table A.2.2.1.4.2-2: UL NAS Transport (step 3)
* * *
Derivation path: TS 38.508-1 [4], Table 4.7.1-10  
Information Element Value/remark Comment Condition Payload container type
'0001'B N1 SM information  
PDU session ID PSI-1  
Request type '001'B Initial request  
S-NSSAI Not Present  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001  
DNN  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific
* * *
Table A.2.2.1.4.2-3: PDU SESSION ESTABLISHMENT ACCEPT (step 4)
* * *
Derivation path: TS 38.508-1 clause 4.7.2-2  
Information Element Value/remark Comment Condition S-NSSAI  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001  
DNN  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific
* * *
### A.2.2.2 5G NR / Mapping Application to Network Slicing / APP ID
Editor's note:
> \- The test parameters is FFS.
A.2.2.2.1 Definition
The UE procedure for associating applications to PDU sessions based on URSP
rules is one of the fundamental functional requirements for network slicing.
A.2.2.2.2 Test Purpose
To verify that UE could support the mapping of applications to URSP rules and
the establishment of PDU sessions based on the Traffic Descriptor of OS App
Id.
A.2.2.2.3 Test Parameters
FFS
A.2.2.2.4 Test Description
A.2.2.2.4.1 Initial Conditions
##### System Simulator: {#system-simulator-2 .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue-2 .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble-2 .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.2.2.2.4.2 Test Procedure
1\. Steps 1 to 6 of the test procedure specified in subclause A.2.1.1.4.2 are
performed, except the _MANAGE UE POLICY COMMAND message is defined in_ Table
A.2.2.2.4.2-1
2\. Using the Application Client Simulator, generate traffic matching OS App
Id value in Traffic descriptor in URSP rule provisioned to the UE in step 1
3\. The UE transmits an UL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
REQUEST message. Observe the right S-NSSAI is selected.
4\. The SS transmits a DL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
ACCEPT message.
5\. Using the Application Client Simulator, begin uplink data transfer from UE
to the Application Server Simulator
6\. Observe that the data received in Application Server Simulator via PDU
session is consistent with the data generated by Application Client Simulator.
Table A.2.2.2.4.2-1: _MANAGE UE POLICY COMMAND_ (step 1)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '10100000'B OS App Id type
Traffic descriptor component  
OS App Id length Set to the actual length of \' OS App Id value \' in bytes  
OS App Id value pc_OS_App_ID  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
URSP rule 2  
Precedence value of URSP rule 1  
Traffic descriptor  
Traffic descriptor component type identifier '00000001'B Match-all type Route
selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000002
* * *
Table A.2.2.2.4.2-2: UL NAS Transport (step 3)
* * *
Derivation path: TS 38.508-1 [4], Table 4.7.1-10  
Information Element Value/remark Comment Condition Payload container type
'0001'B N1 SM information  
PDU session ID PSI-1  
Request type '001'B Initial request  
S-NSSAI Not Present  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
Table A.2.2.2.4.2-3: PDU SESSION ESTABLISHMENT ACCEPT (step 4)
* * *
Derivation path: TS 38.508-1 clause 4.7.2-2  
Information Element Value/remark Comment Condition S-NSSAI  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
### A.2.2.3 5G NR / Mapping Application to Network Slicing / FQDN
Editor's note:
> \- The test parameters is FFS.
A.2.2.3.1 Definition
The UE procedure for associating applications to PDU sessions based on URSP
rules is one of the fundamental functional requirements for network slicing.
A.2.2.3.2 Test Purpose
To verify that UE could support the mapping of applications to URSP rules and
the establishment of PDU sessions based on the Traffic Descriptor of
destination FQDN.
A.2.2.3.3 Test Parameters
FFS
A.2.2.3.4 Test Description
A.2.2.3.4.1 Initial Conditions
##### System Simulator: {#system-simulator-3 .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue-3 .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble-3 .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.2.2.3.4.2 Test Procedure
1\. Steps 1 to 6 of the test procedure specified in subclause A.2.1.1.4.2 are
performed, except the _MANAGE UE POLICY COMMAND_ _message is defined in_ Table
A.2.2.3.4.2-1
2\. Using the Application Client Simulator, generate traffic matching
destination FQDN value in Traffic descriptor in URSP rule provisioned to the
UE in step 1
3\. The UE transmits an UL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
REQUEST message. Observe the right S-NSSAI is selected.
4\. The SS transmits a DL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
ACCEPT message.
5\. Using the Application Client Simulator, begin uplink data transfer from UE
to the Application Server Simulator
6\. Observe that the data received in Application Server Simulator via PDU
session is consistent with the data generated by Application Client Simulator.
Table A.2.2.3.4.2-1: _MANAGE UE POLICY COMMAND_ (step 1)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '10010001'B Destination FQDN
Traffic descriptor component  
destination FQDN length Set to the actual length of \' destination FQDN
value\' in bytes  
destination FQDN value pc_Des_FQDN  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
URSP rule 2  
Precedence value of URSP rule 1  
Traffic descriptor  
Traffic descriptor component type identifier '00000001'B Match-all type Route
selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000002
* * *
Table A.2.2.3.4.2-2: UL NAS Transport (step 3)
* * *
Derivation path: TS 38.508-1 [4], Table 4.7.1-10  
Information Element Value/remark Comment Condition Payload container type
'0001'B N1 SM information  
PDU session ID PSI-1  
Request type '001'B Initial request  
S-NSSAI Not Present  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
Table A.2.2.3.4.2-3: PDU SESSION ESTABLISHMENT ACCEPT (step 4)
* * *
Derivation path: TS 38.508-1 clause 4.7.2-2  
Information Element Value/remark Comment Condition S-NSSAI  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
### A.2.2.4 5G NR / Mapping Application to Network Slicing / IP 3 Tuples
Editor's note:
> \- The test parameters is FFS.
A.2.2.4.1 Definition
The UE procedure for associating applications to PDU sessions based on URSP
rules is one of the fundamental functional requirements for network slicing.
A.2.2.4.2 Test Purpose
To verify that UE could support the mapping of applications to URSP rules and
the establishment of PDU sessions based on the Traffic Descriptor of IP 3
Tuples.
A.2.2.4.3 Test Parameters
FFS
A.2.2.4.4 Test Description
A.2.2.4.4.1 Initial Conditions
##### System Simulator: {#system-simulator-4 .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue-4 .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble-4 .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.2.2.4.4.2 Test Procedure
1\. Steps 1 to 6 of the test procedure specified in subclause A.2.1.1.4.2 are
performed, except the _MANAGE UE POLICY COMMAND_ _message is defined in_ Table
A.2.2.4.4.2-1
2\. Using the Application Client Simulator, generate traffic matching IP 3
tuples value in Traffic descriptor in URSP rule provisioned to the UE in step
1
3\. The UE transmits an UL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
REQUEST message. Observe the right S-NSSAI is selected.
4\. The SS transmits a DL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
ACCEPT message.
5\. Using the Application Client Simulator, begin uplink data transfer from UE
to the Application Server Simulator
6\. Observe that the data received in Application Server Simulator via PDU
session is consistent with the data generated by Application Client Simulator.
Table A.2.2.4.4.2-1: _MANAGE UE POLICY COMMAND_ (step 1)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '01010010'B IP 3 tuple type
Traffic descriptor component  
Information Bitmap '00001101'B IPv4 '00001110'B IPv6 IP Address pc_IP_Address  
Protocol identifier/next header type pc_Protocol_ID  
Single remote port pc_Sinlge_Remote_Port  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
URSP rule 2  
Precedence value of URSP rule 1  
Traffic descriptor  
Traffic descriptor component type identifier '00000001'B Match-all type Route
selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000002
* * *
Table A.2.2.4.4.2-2: UL NAS Transport (step 3)
* * *
Derivation path: TS 38.508-1 [4], Table 4.7.1-10  
Information Element Value/remark Comment Condition Payload container type
'0001'B N1 SM information  
PDU session ID PSI-1  
Request type '001'B Initial request  
S-NSSAI Not Present  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
Table A.2.2.4.4.2-3: PDU SESSION ESTABLISHMENT ACCEPT (step 4)
* * *
Derivation path: TS 38.508-1 clause 4.7.2-2  
Information Element Value/remark Comment Condition S-NSSAI  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000001'B 1  
SD 0x000001
* * *
### A.2.2.5 5G NR / Mapping Application to Network Slicing / Connection
Capabilities
### A.2.2.6 5G NR / Mapping Application to Network Slicing / URSP Update
# A.3 5G NR / Service Performance Testing with Network Slicing
## A.3.1 5G NR / Service Performance / Single Network Slicing
### A.3.1.1 5G NR / Service Performance / Single Application with Single
Network Slicing
Editor's note:
> \- The test parameters is FFS.
A.3.1.1.1 Definition
The service performance of 5G NR UE with network slicing is determined by the
UE operating system and communication unit.
A.3.1.1.2 Test Purpose
To measure the performance of single service in application layer of the 5G NR
UE with single network slicing.
A.3.1.1.3 Test Parameters
FFS
A.3.1.1.4 Test Description
A.3.1.1.4.1 Initial Conditions
##### System Simulator: {#system-simulator-5 .H6}
\- NGC Cell A is configured according to Table 6.3.2.2-1 and Table 6.3.2.2-3
in 38.508-1 [6].
##### UE: {#ue-5 .H6}
\- Empty URSP Configuration
##### Preamble: {#preamble-5 .H6}
\- The UE is in state Switched OFF (state 0N-B) according to TS 38.508-1 [6].
A.3.1.1.4.2 Test Procedure
1\. UE is switched on.
2\. Steps 2 to 15 of the generic procedure for NR RRC_IDLE specified in TS
38.508-1 subclause 4.5.2 are performed.
3\. Using the Application Client Simulator, begin uplink data transfer. Wait
for 15 seconds and then start to measure the throughput result and latency in
[transport layer]. (This is iteration 1) Continue data transfer for 1 minutes.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer
5\. Calculate and record the average application layer data throughput and
latency across three iterations.
6\. Switch off procedure in RRC_IDLE specified in TS 38.508-1 subclause
4.9.6.1 is performed.
7\. UE is brought back to operation
8\. Steps 1 to 6 of the test procedure specified in subclause A.2.1.1.4.2 are
performed except the _MANAGE UE POLICY COMMAND message is defined in_ Table
A.3.1.1.4.2-1
9\. Using the Application Client Simulator, generate traffic matching DNN
value in Traffic descriptor in URSP rule provisioned to the UE in step 8
10\. The UE transmits an UL NAS TRANSPORT message and PDU SESSION
ESTABLISHMENT REQUEST message. Observe the right S-NSSAI and DNN value are
selected.
11\. The SS transmits a DL NAS TRANSPORT message and PDU SESSION ESTABLISHMENT
ACCEPT message.
12\. Using the Application Client Simulator, begin uplink data transfer from
UE to the Application Server Simulator
13\. Wait for 15 seconds and then start to measure the throughput result and
latency in [transport layer] in parallel (This is iteration 1). Continue data
transfer for 1 minute.
14\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer
15\. Calculate and record the average application layer data throughput and
latency across three iterations.
16\. Observe that the throughput in step 15 is not lower than the throughput
benchmark in step 5 and the latency in step 15 is not higher than the latency
benchmark in step 5
Table A.3.1.1.4.2-1: _MANAGE UE POLICY COMMAND_ (step 8)
* * *
Derivation Path: Table 5.2.4-1  
Information Element Value/remark Comment Condition UE policy part  
URSP rule 1  
Precedence value of URSP rule 0  
Traffic descriptor  
Traffic descriptor component type identifier '10001000'B DNN Type Traffic
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific  
Route selection descriptor list  
Route selection descriptor 1  
Precedence value of route selection descriptor 0  
Route selection descriptor contents  
Route selection descriptor component type '00000010'B S-NSSAI type Route
selection descriptor component  
Length of S-NSSAI contents '00000100'B SST and SD  
SST '00000010'B  
SD 0x000001  
Route selection descriptor 2  
Precedence value of route selection descriptor 1  
Route selection descriptor contents  
Route selection descriptor component type '00000100'B DNN type Route selection
descriptor component  
DNN length Set to the actual length of \'DNN value\' in bytes  
DNN value pc_APN_ID_Specific
* * *
### A.3.1.2 5G NR / Service Performance / Multiple Applications with Single
Network Slicing
## A.3.2 5G NR / Service Performance / Multiple Network Slicing
### A.3.2.1 5G NR / Service Performance / Multiple Applications with Multiple
Network Slicing
## A.3.3 5G NR / Service Performance / URSP Update
### A.3.3.1 5G NR / Service Performance / Single Network Slicing / URSP update
### A.3.3.2 5G NR / Service Performance / Multiple Network Slicing / URSP
update
###### ### Annex B: Applicability
FFS
#