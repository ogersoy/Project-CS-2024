# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 2 of the UE Positioning function of
E-UTRAN, which provides the mechanisms to support or assist the calculation of
the geographical position of a UE. UE position knowledge can be used, for
example, in support of Radio Resource Management functions, as well as
location-based services for operators, subscribers, and third-party service
providers. The purpose of this stage 2 specification is to define the E-UTRAN
UE Positioning architecture, functional entities and operations to support
positioning methods. This description is confined to the E-UTRAN Access
Stratum. It does not define or describe how the results of the UE position
calculation can be utilised in the Core Network (e.g., LCS) or in E-UTRAN
(e.g., RRM).
UE Positioning may be considered as a network-provided enabling technology
consisting of standardised service capabilities that enable the provision of
location applications. The application(s) may be service provider specific.
The description of the numerous and varied possible location applications
which are enabled by this technology is outside the scope of the present
document. However, clarifying examples of how the functionality being
described may be used to provide specific location services may be included.
This stage 2 specification covers the E-UTRAN positioning methods, state
descriptions, and message flows to support UE Positioning.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non-specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document._
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\"
[3] 3GPP TS 22.071: \"Location Services (LCS); Service description, Stage 1\".
[4] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[5] 3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"User Equipment (UE) radio access capabilities\".
[6] IS-GPS-200, Revision D, Navstar GPS Space Segment/Navigation User
Interfaces, March 7^th^, 2006.
[7] IS-GPS-705, Navstar GPS Space Segment/User Segment L5 Interfaces,
September 22, 2005.
[8] IS-GPS-800, Navstar GPS Space Segment/User Segment L1C Interfaces,
September 4, 2008.
[9] Galileo OS Signal in Space ICD (OS SIS ICD), Draft 0, Galileo Joint
Undertaking, May 23^rd^, 2006.
[10] Global Navigation Satellite System GLONASS Interface Control Document,
Version 5, 2002.
[11] IS-QZSS, Quasi Zenith Satellite System Navigation Service Interface
Specifications for QZSS, Ver.1.0, June 17, 2008.
[12] Specification for the Wide Area Augmentation System (WAAS), US Department
of Transportation, Federal Aviation Administration, DTFA01-96-C-00025, 2001.
[13] RTCM 10402.3, RTCM Recommended Standards for Differential GNSS Service
(v.2.3), August 20, 2001.
[14] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Radio Resource Control (RRC); Protocol specification\".
[15] 3GPP TS 25.331: \" Radio Resource Control (RRC); Protocol
Specification\".
[16] 3GPP TS 44.031: \"Location Services (LCS); Mobile Station (MS) - Serving
Mobile Location Centre (SMLC) Radio Resource LCS Protocol (RRLP)\".
[17] OMA-AD-SUPL-V2_0: \"Secure User Plane Location Architecture Approved
Version 2.0\".
[18] OMA-TS-ULP-V2_0_6: \"UserPlane Location Protocol Approved Version
2.0.6\".
[19] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[20] 3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Physical layer -- Measurements\".
[21] 3GPP TS 36.302: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Services provided by the physical layer \".
[22] 3GPP TS 25.305: \"Stage 2 functional specification of User Equipment (UE)
positioning in UTRAN\".
[23] 3GPP TS 43.059: \"Functional stage 2 description of Location Services in
GERAN\".
[24] 3GPP TR 23.891: \"Evaluation of LCS Control Plane Solutions for EPS\".
[25] 3GPP TS 36.355: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
LTE Positioning Protocol (LPP)\".
[26] 3GPP TS 24.171: \"Control Plane Location Services (LCS) procedures in the
Evolved Packet System (EPS)\".
[27] 3GPP TS 29.171: \"Location Services (LCS); LCS Application Protocol (LCS-
AP) between the Mobile Management Entity (MME) and Evolved Serving Mobile
Location Centre (E-SMLC); SLs interface\".
[28] BDS-SIS-ICD-B1I-3.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B1I (Version 3.0)\", February,
2019.
[29] IEEE 802.11: \"Wireless LAN Medium Access Control (MAC) and Physical
Layer (PHY) Specifications\".
[30] Bluetooth Special Interest Group: \"Bluetooth Core Specification v4.2\",
December 2014.
[31] ATIS-0500027: \"Recommendations for Establishing Wide Scale Indoor
Location Performance\", May 2015.
[32] 3GPP TS 36.211: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical channels and modulation\".
[33] RTCM 10403.3, RTCM Recommended Standards for Differential GNSS Services
(v.3.3), October 7, 2016.
[34] BDS-SIS-ICD-B1C-1.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B1C (Version 1.0)\", December,
2017.
[35] IRNSS Signal-In-Space (SPS) Interface Control Document (ICD) for standard
positioning service version 1.1, August 2017.
[36] IS-QZSS-L6-001, Quasi-Zenith Satellite System Interface Specification --
Centimetre Level Augmentation Service, Cabinet Office, November 5, 2018.
[37] BDS-SIS-ICD-B3I-1.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B3I (Version 1.0)\", February,
2018.
[38] BDS-SIS-ICD-B2a-1.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B2a (Version 1.0)\", December,
2017.
[39] 3GPP TS 37.355: \"Technical Specification Group Radio Access Network; LTE
Positioning Protocol (LPP)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
As used in this document, the suffixes \"-based\" and \"-assisted\" refer
respectively to the node that is responsible for making the positioning
calculation (and which may also provide measurements) and a node that provides
measurements (but which does not make the positioning calculation). Thus, an
operation in which measurements are provided by the UE to the E-SMLC to be
used in the computation of a position estimate is described as \"UE-assisted\"
(and could also be called \"E-SMLC-based\"), while one in which the UE
computes its own position is described as \"UE-based\".
Both standalone LMU and LMU integrated into an eNB are supported. As used in
this document, LMU refers to both cases of a standalone LMU and an LMU
integrated into an eNodeB unless explicitly mentioned otherwise.
**Positioning integrity: A measure of the trust in the accuracy of the
position-related data and the ability to provide associated alerts.**
**Protection Level (PL):** A statistical upper-bound of the Positioning Error
(PE) that ensures that, the probability per unit of time of the true error
being greater than the AL and the PL being less than or equal to the AL, for
longer than the TTA, is less than the required TIR, i.e., the PL satisfies the
following inequality:\ _Prob per unit of time_ [((_PE >AL_) & (_PL\  Bound for longer than TTA \| NOT DNU) \ for all the errors in Table 8.1.2.1b-1, which have corresponding integrity
> assistance data available and where the corresponding DNU flag(s) are set to
> false.
The integrity risk probability is decomposed into a constant Residual Risk
component provided in the assistance data as well as a variable IRallocation
component that corresponds to the contribution from the Bound according to the
Bound formula in Equation 8.1.1a-2. IRallocation may be chosen freely by the
client based on the desired Bound, therefore the network should ensure that
Equation 8.1.1a-1 holds for all possible choices of IRallocation. The Residual
Risk and IRallocation components may be mapped to fault and fault-free cases
respectively, but the implementation is free to choose any other decomposition
of the integrity risk probability into these two components.
The validity time of the integrity bounds is set as equal to twice the SSR
Update Interval for the given SSR Assistance Data message, i.e. the time
period between the SSR Epoch Time and the SSR Epoch Time plus twice the SSR
Update Interval in the GPS time scale.
Equation 8.1.1a-1 holds for all assistance data that has been issued that is
still within its validity period. If this condition cannot be met then the
corresponding DNU flag must be set.
Equation 8.1.1a-1 holds at any epochs for which Assistance Data is provided.
Providing Assistance Data without the Integrity Service Alert IE or Real Time
Integrity IEs is interpreted as a DNU=FALSE condition. For any bound that is
still valid (within its validity time), the network ensures that the Integrity
Service Alert and/or Real Time Integrity IEs are also included in the provided
Assistance Data if needed to satisfy the condition in Equation 8.1.1a-1. It is
up to the implementation how to handle epochs for which integrity results are
desired but there are no DNU flag(s) available, e.g. the Time To Alert (TTA)
may be set such that there is a \"grace period\" to receive the next set of
DNU flags.
_Only those satellites for which the GNSS integrity assistance data are
provided are monitored by the network and can be used for integrity related
applications._
Where:
> **Time-to-Alert (TTA): The maximum allowable elapsed time from when the
> Error exceeds the Bound until a DNU flag must be issued.**
>
> **Error:** Error is the difference between the true value of a GNSS
> parameter (e.g. ionosphere, troposphere etc.), and its value as estimated
> and provided in the corresponding assistance data as per Table 8.1.2.1b-1
>
> **Bound:** Integrity Bounds provide the statistical distribution of the
> residual errors associated with the GNSS positioning corrections (e.g. RTK,
> SSR etc). Integrity bounds are used to statistically bound the residual
> errors after the positioning corrections have been applied. The bound is
> computed according to the Bound formula defined in Equation 8.1.1a-2. The
> bound formula describes a bounding model including a mean and standard
> deviation (e.g. paired over-bounding Gaussian). The bound may be scaled by
> multiplying the standard deviation by a K factor corresponding to an
> IRallocation, for any desired IRallocation within the permitted range.
>
> Bound for a particular error is computed according to the following formula:
>
> _Bound = mean + K * stdDev_ (Equation 8.1.1a-2)
>
> _K = normInv(IR~allocation~ / 2)_
>
> _irMinimum \  **DNU:** The DNU flag(s) corresponding to a particular error as per Table
> 8.1.2.1b-1. Where multiple DNU flags are specified, the DNU condition in
> Equation 8.1.1a-1 is present when any of the flags are true (logical OR of
> the flags).
>
> **Residual Risk:** The residual risk is the component of the integrity risk
> provided in the assistance data as per Table 8.1.2.1b-1. This may correspond
> to the fault case risk but the implementation is permitted to allocate this
> component in any way that satisfies Equation 8.1.1a-1.
>
> The Residual Risk is the Probability of Onset which is defined per unit of
> time and represents the probability that the feared event begins. Each
> Residual Risk is accompanied by a Mean Duration which represents the
> expected mean duration of the corresponding feared event and is used to
> convert the Probability of Onset to a probability that the feared event is
> present at any given time, i.e.
>
> _P(Feared Event is Present) = Mean Duration * Probability of Onset of Feared
> Event_ **(Equation 8.1.1a-3)**
>
> **irMinimum, irMaximum:** Minimum and maximum allowable values of
> IRallocation that may be chosen by the client. Provided as service
> parameters from the Network according to Integrity Service Parameters.
>
> **Correlation Times:** The minimum time interval beyond which two sets of
> GNSS assistance data parameters for a given error can be considered to be
> independent from one another.
### 8.1.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, measurement data)
that may be transferred between E-UTRAN elements.
#### 8.1.2.1 Information that may be transferred from the E-SMLC to UE
Table 8.1.2.1-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.1.2.1-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Reference Time Reference Location Ionospheric Models Earth
Orientation Parameters GNSS-GNSS Time Offsets Differential GNSS Corrections
Ephemeris and Clock Models Real-Time Integrity Data Bit Assistance Acquisition
Assistance Almanac UTC Models RTK Reference Station Information RTK Auxiliary
Station Data RTK Observations RTK Common Observation Information GLONASS RTK
Bias Information RTK MAC Correction Differences RTK Residuals RTK FKP
Gradients SSR Orbit Corrections SSR Clock Corrections SSR Code Bias SSR Phase
Bias SSR STEC Corrections SSR Gridded Correction SSR URA SSR Correction Points
Integrity Service Parameters Integrity Alerts
* * *
##### 8.1.2.1.1 Reference Time
Reference Time assistance provides the GNSS receiver with coarse or fine GNSS
time information. The specific GNSS system times (e.g., GPS, Galileo, GLONASS,
BDS system time) shall be indicated with a GNSS ID.
In case of coarse time assistance only, the Reference Time provides an
estimate of the current GNSS system time (where the specific GNSS is indicated
by a GNSS ID). The E-SMLC should achieve an accuracy of +/- 3 seconds for this
time including allowing for the transmission delay between E-SMLC and UE.
In case of fine time assistance, the Reference Time provides the relation
between GNSS system time (where the specific GNSS is indicated by a GNSS ID)
and E-UTRAN air-interface timing.
##### 8.1.2.1.2 Reference Location
Reference Location assistance provides the GNSS receiver with an a priori
estimate of its location (e.g., obtained via Cell-ID, downlink positioning,
etc.) together with its uncertainty.
The geodetic reference frame shall be WGS-84, as specified in TS 23.032 [4].
##### 8.1.2.1.3 Ionospheric Models
Ionospheric Model assistance provides the GNSS receiver with parameters to
model the propagation delay of the GNSS signals through the ionosphere.
Ionospheric Model parameters as specified by GPS [6], Galileo [9], QZSS [11],
BDS [28], [34], [37], [38] and NavIC [35] may be provided.
##### 8.1.2.1.4 Earth Orientation Parameters
Earth Orientation Parameters (EOP) assistance provides the GNSS receiver with
parameters needed to construct the ECEF-to-ECI coordinate transformation as
specified by GPS [6].
##### 8.1.2.1.5 GNSS-GNSS Time Offsets
GNSS-GNSS Time Offsets assistance provides the GNSS receiver with parameters
to correlate GNSS time (where the specific GNSS is indicated by a GNSS-1 ID)
of one GNSS with other GNSS time (where the specific GNSS is indicated by a
GNSS-2 ID). GNSS-GNSS Time Offsets parameters as specified by GPS [6], Galileo
[9], GLONASS [10], QZSS [11], BDS [28], [34], [37], [38] and NavIC [35] may be
provided.
##### 8.1.2.1.6 Differential GNSS Corrections
Differential GNSS Corrections assistance provides the GNSS receiver with
pseudo-range and pseudo-range-rate corrections to reduce biases in GNSS
receiver measurements as specified in [13]. The specific GNSS for which the
corrections are valid is indicated by a GNSS-ID.
##### 8.1.2.1.7 Ephemeris and Clock Models
Ephemeris and Clock Models assistance provides the GNSS receiver with
parameters to calculate the GNSS satellite position and clock offsets. The
various GNSSs use different model parameters and formats, and all parameter
formats as defined by the individual GNSSs are supported by the signalling.
##### 8.1.2.1.8 Real-Time Integrity
Real-Time Integrity assistance provides the GNSS receiver with information
about the health status of a GNSS constellation (where the specific GNSS is
indicated by a GNSS ID).
For integrity purposes (as per Clause 8.1.1a), a GNSS satellite and signal
combination should be considered as being marked \"Do Not Use\" (DNU) if the
satellite ID and signal are present in the list of unhealthy (bad) signals.
NOTE: The absence of the Real Time Integrity assistance from any Provide
Assistance Data message is interpreted as DNU=FALSE for all satellites and
signals that are monitored for integrity.
##### 8.1.2.1.9 Data Bit Assistance
Data Bit Assistance provides the GNSS receiver with information about data
bits or symbols transmitted by a GNSS satellite at a certain time (where the
specific GNSS is indicated by a GNSS ID). This information may be used by the
UE for sensitivity assistance (data wipe-off) and time recovery.
##### 8.1.2.1.10 Acquisition Assistance
Acquisition Assistance provides the GNSS receiver with information about
visible satellites, reference time, expected code-phase, expected Doppler,
search windows (i.e., code and Doppler uncertainty) and other information of
the GNSS signals (where the specific GNSS is indicated by a GNSS ID) to enable
a fast acquisition of the GNSS signals.
##### 8.1.2.1.11 Almanac
Almanac assistance provides the GNSS receiver with parameters to calculate the
coarse (long-term) GNSS satellite position and clock offsets. The various
GNSSs use different model parameters and formats, and all parameter formats as
defined by the individual GNSSs are supported by the signalling.
##### 8.1.2.1.12 UTC Models
UTC Models assistance provides the GNSS receiver with parameters needed to
relate GNSS system time (where the specific GNSS is indicated by a GNSS ID) to
Universal Coordinated Time. The various GNSSs use different model parameters
and formats, and all parameter formats as defined by the individual GNSSs are
supported by the signalling.
##### 8.1.2.1.13 RTK Reference Station Information
RTK Reference Station Information provides the GNSS receiver with the Earth-
Centered, Earth-Fixed (ECEF) coordinates of the Reference Station´s installed
antenna´s ARP, and the height of the ARP above the survey monument.
Additionally, this assistance data provides information about the antenna type
installed at the reference site.
NOTE: With the MAC N-RTK technique this assistance data is used to provide
information regarding the Master Reference Station (see clause 8.1.2.1a).
##### 8.1.2.1.14 RTK Auxiliary Station Data
RTK Auxiliary Station Data provides the GNSS receiver with the location for
all Auxiliary Reference Stations (see clause 8.1.2.1a) within the assistance
data. These values are expressed as relative geodetic coordinates (latitude,
longitude, and height) with respect to a Master Reference Station (see
subcaluse 8.1.2.1a) and based on the GRS80 ellipsoid. This type of assistance
data is relevant only with the MAC N-RTK technique [33].
##### 8.1.2.1.15 RTK Observations
RTK Observations provides the GNSS receiver with all primary observables
(pseudo-range, phase-range, phase-range rate (Doppler), and carrier-to-noise
ratio) generated at the Reference Station for each GNSS signal. The signal
generation from the reference station is in compliance with [33]: as an
example, the phase measurements of different signals in the same band must be
phased aligned. More examples can be found in [33].
The pseudo-range is the distance between the satellite and GNSS receiver
antennas, expressed in metres, equivalent to the difference of the time of
reception (expressed in the time frame of the GNSS receiver) and the time of
transmission (expressed in the time frame of the satellite) of a distinct
satellite signal.
The phase-range measurement is a measurement of the range between a satellite
and receiver expressed in units of cycles of the carrier frequency. This
measurement is more precise than the pseudo-range (of the order of
millimetres), but it is ambiguous by an unknown integer number of wavelengths.
The phase-range rate is the rate at which the phase-range between a satellite
and a GNSS receiver changes over a particular period of time.
The carrier-to-noise ratio is the ratio of the received modulated carrier
signal power to the noise power after the GNSS receiver filters.
NOTE: With the MAC N-RTK technique this assistance data is used to provide raw
observables recorded at the Master Reference Station (see clause 8.1.2.1a).
##### 8.1.2.1.16 RTK Common Observation Information
RTK Common Observation Information provides the GNSS receiver with common
information applicable to any GNSS, e.g. clock steering indicator. This
assistance data is always used together GNSS RTK Observations (see clause
8.1.2.1.15).
##### 8.1.2.1.17 GLONASS RTK Bias Information
RTK Bias Information provides the GNSS receiver with information which is
intended to compensate for the first-order inter-frequency phase-range biases
introduced by the reference receiver code-phase biases. This information is
applicable only for GLONASS FDMA signals. In the case that the MAC Network RTK
method is used, GLONASS RTK Bias Information defines the code-phase biases
related to the Master Reference Station [33].
##### 8.1.2.1.18 RTK MAC Correction Differences
RTK MAC Correction Differences provides the GNSS receiver with information
about ionospheric (dispersive) and geometric (non-dispersive) corrections
generated between a Master Reference Station and its Auxiliary Reference
Stations [33].
##### 8.1.2.1.19 RTK Residuals
RTK Residuals provides the GNSS receiver with network error models generated
for the interpolated corrections disseminated in Network RTK techniques. With
sufficient redundancy in the RTK network, the location server process can
provide an estimate for residual interpolation errors. Such quality estimates
may be used by the target UE to optimize the performance of RTK solutions. The
values may be considered by the target UE as a priori estimates only, with
sufficient tracking data available the target UE might be able to judge
residual geometric and ionospheric errors itself. According to [33], RTK
Residual error information should be transmitted every 10-60 seconds.
##### 8.1.2.1.20 RTK FKP Gradients
RTK FKP Gradients provides the GNSS receiver with horizontal gradients for the
geometric (troposphere and satellite orbits) and ionospheric signal components
in the observation space. According to [33], RTK FKP gradient information
should be typically transmitted every 10-60 seconds.
##### 8.1.2.1.21 SSR Orbit Corrections
SSR Orbit Corrections provides the GNSS receiver with parameters for orbit
corrections in radial, along -- track and cross -- track components. These
orbit corrections are used to compute a satellite position correction, to be
combined with satellite position ^­^calculated from broadcast ephemeris (see
clause 8.1.2.1.7).
NOTE 1: The orbit corrections define an offset between the broadcast ephemeris
orbit and a satellite antenna reference point (ARP) to which the other
corrections refer. The exact definition of the reference point along the
satellite antenna is implementation-defined by the Network and use of all
corrections together shall yield a consistent solution.
NOTE 2: The UE should not apply any additional corrections for the Satellite
Antenna Phase Center (APC) such as Phase Center Offset (PCO) or Phase Center
Variation (PCV) corrections. The Network may form the SSR corrections to
minimise the impact of Satellite APC effects on the UE.
For integrity purposes, SSR Orbit Corrections also provides the correlation
time for orbit error and orbit error rate, and the mean and standard deviation
that bounds the residual Orbit Error and its associated error rate. The SSR
Orbit Corrections also includes the satellite and constellation residual
risks. These residual risks are the aggregate residual risk for the satellite
or constellation Signal in Space including Orbit, Clock, Bias and all other
satellite or constellation feared events, but excluding atmospheric effects.
When applying the integrity bounds as per 8.1.1a, the mean and stdDev must be
calculated by projecting the Orbit error mean and variance along the line-of-
sight vector between the satellite and the user, according to the following
formula:
> _stdDev~orbit~ =_ $\sqrt{R\ v \bullet I}$ (Equation 8.1.2.1.21-1)
>
> _mean~orbit~ =_ $\left| \left\lbrack R^{T}I \right\rbrack_{\text{AT}}
> \right|.\mu_{\text{AT}} + \ \left| \left\lbrack R^{T}I
> \right\rbrack_{\text{CT}} \right|.\mu_{\text{CT}} + \ \left| \left\lbrack
> R^{T}I \right\rbrack_{\text{RA}} \right|.\mu_{\text{RA}}$
where: _I_ : 3-D line of sight vector from the user to the satellite in the
WGS-84 ECEF coordinate frame.
> R: the rotation matrix from satellite along-track (AT), cross-track (CT) and
> radial (RA) coordinates into the WGS-84 ECEF coordinate frame. R^T^ denotes
> the transposed matrix.
>
> _v_ : the 3-D Orbit error variance vector expressed in satellite along-
> track, cross-track and radial coordinates.
>
> _μ_ : the Mean Orbit Error vector expressed in satellite along-track, cross-
> track and radial coordinates.
The vector v is expressed in the SSR Orbit Corrections as the three elements
in the Variance Orbit Residual Error Vector.
##### 8.1.2.1.22 SSR Clock Corrections
SSR Clock Corrections provides the GNSS receiver with parameters to compute
the GNSS satellite clock correction applied to the broadcast satellite clock
(see clause 8.1.2.1.7). A polynomial of order 2 describes the clock
differences for a certain time period: clock offset, drift, and drift rate.
For integrity purposes, SSR Clock Corrections also provides the correlation
time for clock error and clock error rate, and the mean and standard deviation
that bounds the residual Clock Error and its associated error rate.
##### 8.1.2.1.23 SSR Code Bias
SSR Code Bias provides the GNSS receiver with the Code Biases that must be
added to the pseudo range measurements of the corresponding code signal to get
corrected pseudo ranges. SSR Code Bias contains absolute values, but also
enables the alternative use of Differential Code Biases by setting one of the
biases to zero. A UE can consistently use signals for which a code bias is
transmitted. It is not reliable for a UE to use a signal without retrieving a
corresponding code bias from the assistance data message. For integrity
purposes, SSR Code Bias also provides the mean and standard deviation that
bounds the residual Code Bias Error and its associated error rate.
##### 8.1.2.1.24 SSR Phase Bias
SSR Phase Bias provides the GNSS receiver with the GNSS signal phase bias that
are added to the carrier phase measurements of the corresponding signal to get
corrected phase ranges. An indicator used to count events when phase bias is
discontinuous is provided. An optional indicator is also provided to indicate
whether fixed, widelane fixed or float PPP-RTK positioning modes are supported
on a per signal basis.
NOTE 1: On the UE side, phase bias corrections of appropriate type are needed
to restore the integer nature of the phase ambiguities in PPP-RTK. Their
absence will affect the quality of the positioning solution and prevent a fast
convergence time.
NOTE 2: PPP-RTK Fixed position mode corresponds to the UE fixing the carrier
phase ambiguity to an integer value. The PPP-RTK Widelane Fixed positioning
mode corresponds to forming the widelane combination of carrier phase
measurements and fixing the resulting ambiguity as an integer value. In PPP-
RTK Float positioning mode the carrier phase ambiguity is not treated as an
integer value.
NOTE 3: The SSR Phase Bias values must be consistent with a satellite yaw
angle of zero as per [36].
For integrity purposes, SSR Phase Bias also provides the mean and standard
deviation that bounds the residual Phase Bias Error and its associated error
rate.
##### 8.1.2.1.25 SSR STEC Corrections
SSR STEC Corrections provides the GNSS receiver with the parameters to compute
the ionosphere slant delay correction based on a variable order polynomial on
a per satellite basis and applied to the code and phase measurements.
For integrity purposes, SSR STEC Corrections also provides the ionosphere
residual risk parameters, correlation time for ionosphere range error and
range error rate, and the mean and standard deviation that bounds the residual
Ionospheric Error and its associated error rate.
##### 8.1.2.1.26 SSR Gridded Correction
SSR Gridded Corrections provides the GNSS receiver with STEC residuals and
Troposphere delays at a series of correction points and expressed as
hydrostatic and wet vertical delays.
NOTE: The final ionosphere slant delay (STEC) consists of the polynomial part
provided in SSR STEC Correction and the residual part provided in SSR Gridded
Corrections.
For integrity purposes, SSR Gridded Corrections also provides the troposphere
residual risk parameters, correlation time for troposphere range error and
range error rate, and the mean and standard deviation that bounds the residual
Tropospheric Error and associated its error rate in the Vertical Hydro Static
Delay and Vertical Wet Delay components.
##### 8.1.2.1.27 SSR URA
SSR URA provides the receiver with information about the estimated accuracy of
the corrections for each satellite.
##### 8.1.2.1.28 SSR Correction Points
The SSR Correction Points provides a list of correction point coordinates or
an array of correction points (\"grid\") for which the SSR Gridded Corrections
are valid.
##### 8.1.2.1.29 Integrity Service Parameters
Integrity Service Parameters provide the range of Integrity Risk (IR) for
which the associated GNSS integrity assistance data is considered to be valid.
##### 8.1.2.1.30 Integrity Alerts
Integrity Service Alerts provide information on whether the service can be
used for integrity. A Do Not Use (DNU) flag indicates that the corresponding
assistance data is not suitable for the purpose of computing integrity. If an
Integrity Service Alert is issued and the DNU flag is false, then the
corresponding assistance data may be used for the purpose of computing
integrity. The DNU flags are defined to be applicable to the specified epoch
time only.
#### 8.1.2.1a Recommendations for grouping of assistance data to support
different RTK service levels
This clause provides recommendations for the different high-accuracy GNSS
service levels: RTK, N-RTK, PPP and PPP-RTK.
The high-accuracy GNSS methods can be classified as:
_\- Single base RTK service:_ RTK is a technique that uses carrier-based
ranging measurements i.e., phase-range to improve the positioning accuracy in
a differential approach. The basic concept is to reduce and remove errors
common to a Reference Station, with known position, and UE pair. When only
pseudo ranges (code-based measurements) are used to compute the UE location,
this method is known as DGNSS (Differential GNSS).
Table 8.1.2.1a-1: Single base RTK service: Specific information that may be
transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) Ephemeris and Clock (if UE did not acquire the navigation
message)
* * *
_\- Non-Physical Reference Station Network RTK service_ : In this approach the
target UE receives synthetic observations from a fictitious Reference Station.
The Network RTK software at the location server is performing the error
estimation and creates a virtual Reference Station close to the initial
location of the target device (provided a priori to the location server). The
target UE interprets and uses the data just as if it had come from a single,
real Reference Station. Additionally, the target UE can also receive network
information such as RTK Network Residuals (see clause 8.1.2.1.19) or even FKP
gradients (see clause 8.1.2.1.20).
Table 8.1.2.1a-2: Non-Physical Reference Station Network RTK service: Specific
information that may be transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) RTK Residuals RTK FKP Gradients Ephemeris and Clock (if UE did
not acquire the navigation message)
* * *
_\- MAC Network RTK service:_ In MAC network RTK, a group of Reference
Stations are used and one of them is chosen as a Master station. The other
stations are then called Auxiliary stations. In this service, the location
server sends full raw observations and coordinate information for a single
Reference Station, the Master Station. For all Auxiliary stations in the
network (or a suitable subset of stations) the information is provided to the
UE in a highly compact form: their reduced ambiguity-levelled observations,
coordinate differences (to the Master Station observations and coordinates),
and network residuals. Two Reference Stations are said to be on a common
ambiguity level if the integer ambiguities for each phase range (satellite-
receiver pair) have been removed (or adjusted) so that the integer ambiguities
cancel when double-differences (involving two receivers and two satellites)
are formed during processing. The maintenance of a common ambiguity level at a
specific set of stations rather than across the whole GNSS network will lead
to a grouping in network clusters or subnetworks of all ambiguity-levelled
Reference Stations. If one network has only one subnetwork, this indicates
that an ambiguity level throughout the whole network is established. When
subnetworks are predefined, the assistance data can be broadcast to all UEs
located in the assigned sub-network. More details on the usage of subnetworks
can be found in [33].
Table 8.1.2.1a-3: MAC Network RTK service: Specific Information that may be
transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Auxiliary Station Data
RTK Observations RTK Common Observation Information GLONASS RTK Bias
Information (if GLONASS data is transmitted) RTK MAC Correction Differences
RTK Residuals Ephemeris and Clock (if UE did not acquire the navigation
message)
* * *
_\- FKP Network RTK service:_ With the concept of FKP, horizontal gradients of
distance-dependent errors like ionosphere, troposphere and orbits are derived
from a network of GNSS Reference Stations and transmitted to a target device
together with raw or correction data of a corresponding Reference Station
(physical or non-physical). The target UE may use the gradients to compute the
effect of the distance-dependent errors for its own position.
Table 8.1.2.1a-4: FKP Network RTK service: Information that may be transferred
from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) RTK Residuals RTK FKP Gradients Ephemeris and Clock (if UE did
not acquire the navigation message)
* * *
_\- PPP service_ : This concept uses precise satellite orbit and clock
parameters derived from global networks of Reference Stations as well as
atmospheric models to perform single station positioning [33]. Compared to RTK
and Network RTK, PPP is not a differential technique as there is no baseline
limitation. When the orbits and clocks assistance data elements are provided
in real-time, with no latency, the method is called Real-Time PPP.
Table 8.1.2.1a-5: SSR PPP service: Information that may be transferred from
the E-SMLC to the UE
* * *
Assistance Data SSR Orbit Corrections SSR Clock corrections SSR Code Bias
Ephemeris and Clock (if UE did not acquire the navigation message)
* * *
\- _PPP-RTK service_ : This concept uses precise satellite orbits and clock
parameters, the satellite signal biases derived from global networks of
Reference Stations as well as ionosphere and troposphere corrections to
perform single station positioning [36]. Therefore, PPP-RTK services
compensate the global and local corrections for a more accurate location
information. Compared to PPP, PPP-RTK requires the UE to be located within the
region covered by the ionosphere and troposphere corrections.
Table 8.1.2.1a-6: SSR PPP-RTK service: Information that may be transferred
from the E-SMLC to the UE
* * *
Assistance Data SSR Orbit Corrections SSR Clock corrections SSR Code Bias
Ephemeris and Clock (if UE did not acquire the navigation message) SSR Phase
Bias SSR STEC Corrections SSR Gridded Correction SSR URA SSR Correction Points
* * *
#### 8.1.2.1b Mapping of integrity parameters
Table 8.1.2.1b-1 shows the mapping between the integrity fields and the SSR
assistance data according to the Integrity Principle of Operation (Clause
8.1.1a). The corresponding field descriptions for each of the field names
listed in Table 8.1.2.1b-1 are specified under Clause 6.5.2.2 of TS 37.355
[39].
Table 8.1.2.1b-1: Mapping of Integrity Parameters
+---------+---------+---------+---------+---------+---------+---------+ | Error | GNSS | In | | | | | | | Ass | tegrity | | | | | | | istance | Fields | | | | | | | Data | | | | | | +=========+=========+=========+=========+=========+=========+=========+ | | | In | In | In | R | In | | | | tegrity | tegrity | tegrity | esidual | tegrity | | | | Alerts | Bounds | Bounds | Risks | Corr | | | | | (Mean) | ( | | elation | | | | | | StdDev) | | Times | +---------+---------+---------+---------+---------+---------+---------+ | Orbit | SSR | Re | Mean | V | Prob | Orbit | | | Orbit | al-Time | Orbit | ariance | ability | Range | | | Corr | In | Error | Orbit | of | Error | | | ections | tegrity | | Error | Onset | Corr | | | | | Mean | | of | elation | | | | (see | Orbit | V | Conste | Time | | | | Clause | Rate | ariance | llation | | | | | 8.1 | Error | Orbit | Fault | Orbit | | | | .2.1.8) | | Rate | | Range | | | | | (Cal | Error | Prob | Rate | | | | | culated | | ability | Error | | | | | ac | (Cal | of | Corr | | | | | cording | culated | Onset | elation | | | | | to | ac | of | Time | | | | | E | cording | Sa | | | | | | quation | to | tellite | | | | | | 8.1.2. | E | Fault | | | | | | 1.21-1) | quation | | | | | | | | 8.1.2. | Mean | | | | | | | 1.21-1) | Conste | | | | | | | | llation | | | | | | | | Fault | | | | | | | | D | | | | | | | | uration | | | | | | | | | | | | | | | | Mean | | | | | | | | Sa | | | | | | | | tellite | | | | | | | | Fault | | | | | | | | D | | | | | | | | uration | | +---------+---------+---------+---------+---------+---------+---------+ | Clock | SSR | | Mean | S | | Clock | | | Clock | | Clock | tandard | | Range | | | Corr | | Error | De | | Error | | | ections | | | viation | | Corr | | | | | | Clock | | elation | | | | | | Error | | Time | | | | | | | | | | | | | | S | | Clock | | | | | | tandard | | Range | | | | | | De | | Rate | | | | | | viation | | Error | | | | | | Clock | | Corr | | | | | | Rate | | elation | | | | | | Error | | Time | +---------+---------+---------+---------+---------+---------+---------+ | Code | SSR | | Mean | S | | | | Bias | Code | | Code | tandard | | | | | Bias | | Bias | De | | | | | | | Error | viation | | | | | | | | Code | | | | | | | Mean | Bias | | | | | | | Code | Error | | | | | | | Bias | | | | | | | | Rate | S | | | | | | | Error | tandard | | | | | | | | De | | | | | | | | viation | | | | | | | | Code | | | | | | | | Bias | | | | | | | | Rate | | | | | | | | Error | | | +---------+---------+---------+---------+---------+---------+---------+ | Phase | SSR | | Mean | S | | | | Bias | Phase | | Phase | tandard | | | | | Bias | | Bias | De | | | | | | | Error | viation | | | | | | | | Phase | | | | | | | Mean | Bias | | | | | | | Phase | Error | | | | | | | Bias | | | | | | | | Rate | S | | | | | | | Error | tandard | | | | | | | | De | | | | | | | | viation | | | | | | | | Phase | | | | | | | | Bias | | | | | | | | Rate | | | | | | | | Error | | | +---------+---------+---------+---------+---------+---------+---------+ | Ion | SSR | Ion | Mean | S | Prob | Ion | | osphere | STEC | osphere | Iono | tandard | ability | osphere | | | Cor | DNU | spherre | De | of | Range | | | rection | | Error | viation | Onset | Error | | | | | | Ion | of | Corr | | | | | Mean | osphere | Ion | elation | | | | | Iono | Error | osphere | Time | | | | | spherre | | Fault | | | | | | Rate | S | | Ion | | | | | Error | tandard | Mean | osphere | | | | | | De | Ion | Range | | | | | | viation | osphere | Rate | | | | | | Ion | Fault | Error | | | | | | osphere | D | Corr | | | | | | Rate | uration | elation | | | | | | Error | | Time | +---------+---------+---------+---------+---------+---------+---------+ | Trop | SSR | Trop | Mean | S | Prob | Trop | | osphere | Gridded | osphere | Trop | tandard | ability | osphere | | V | Corr | DNU | osphere | De | of | Range | | ertical | ections | | V | viation | Onset | Error | | Hydro | | | ertical | Trop | of | Corr | | Static | | | Hydro | osphere | Trop | elation | | Delay | | | Static | V | osphere | Time | | | | | Delay | ertical | Fault | | | | | | Error | Hydro | | Trop | | | | | | Static | Mean | osphere | | | | | Mean | Delay | Trop | Range | | | | | Trop | Error | osphere | Rate | | | | | osphere | | Fault | Error | | | | | V | S | D | Corr | | | | | ertical | tandard | uration | elation | | | | | Hydro | De | | Time | | | | | Static | viation | | | | | | | Delay | Trop | | | | | | | Rate | osphere | | | | | | | Error | V | | | | | | | | ertical | | | | | | | | Hydro | | | | | | | | Static | | | | | | | | Delay | | | | | | | | Rate | | | | | | | | Error | | | +---------+---------+---------+---------+---------+---------+---------+ | Tropo | | | Mean | S | | | | sphereV | | | Trop | tandard | | | | ertical | | | osphere | De | | | | W | | | V | viation | | | | etDelay | | | ertical | Trop | | | | | | | Wet | osphere | | | | | | | Delay | V | | | | | | | Error | ertical | | | | | | | | Wet | | | | | | | Mean | Delay | | | | | | | Trop | Error | | | | | | | osphere | | | | | | | | V | S | | | | | | | ertical | tandard | | | | | | | Wet | De | | | | | | | Delay | viation | | | | | | | Rate | Trop | | | | | | | Error | osphere | | | | | | | | V | | | | | | | | ertical | | | | | | | | Wet | | | | | | | | Delay | | | | | | | | Rate | | | | | | | | Error | | | +---------+---------+---------+---------+---------+---------+---------+
#### 8.1.2.2 Information that may be transferred from the UE to the E-SMLC
The information that may be signalled from the UE to the E-SMLC is listed in
table 8.1.2.2-1.
Table 8.1.2.2-1: Information that may be transferred from the UE to the E-SMLC
* * *
Information UE‑assisted UE‑based/standalone Latitude/Longitude/Altitude,
together with uncertainty shape No Yes Velocity, together with uncertainty
shape No Yes Reference Time, possibly together with GNSS-E-UTRAN time
association and uncertainty Yes Yes Indication of used positioning methods in
the fix No Yes Code phase measurements, also called pseudorange Yes No Doppler
measurements Yes No Carrier phase measurements, also called Accumulated Delta
Range (ADR) Yes No Carrier-to-noise ratio of the received signal Yes No
Measurement quality parameters for each measurement Yes No Additional, non-
GNSS related measurement information Yes No
* * *
##### 8.1.2.2.1 GNSS Measurement Information
The GNSS measurement information reported from the UE to the E-SMLC depends on
the GNSS mode (i.e., UE-based, autonomous (standalone), or UE-assisted).
###### 8.1.2.2.1.1 UE-based mode
In UE-based or standalone mode, the GNSS receiver reports the latitude,
longitude and possibly altitude, together with an estimate of the location
uncertainty, if available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report its velocity, possibly together with an estimate of the uncertainty, if
available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report the relation between GNSS system time (where the specific GNSS is
indicated by a GNSS ID; the specific GNSS system time may be selected by the
UE) and E-UTRAN air-interface timing. This information may be used by the
E-SMLC to assist other UEs in the network.
The UE should also report an indication of which GNSSs and possibly other
location methods have been used to calculate a fix.
###### 8.1.2.2.1.2 UE-assisted mode
In UE-assisted mode, the GNSS receiver reports the Code Phase and Doppler
measurements together with associated quality estimates. These measurements
enable the E-SMLC to calculate the location of the UE, possibly using other
measurements and data.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report Carrier Phase measurements (also called Accumulated Delta Range),
together with associated quality measurements, if available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report the relation between GNSS system time (where the specific GNSS is
indicated by a GNSS ID; the specific GNSS system time may be selected by the
UE) and E-UTRAN air-interface timing. This information may be used by the
E-SMLC to assist other UEs in the network.
##### 8.1.2.2.2 Additional Non-GNSS Related Information
Additional non-GNSS measurements performed by E‑UTRAN or UE may be used by the
E-SMLC or UE to calculate or verify a location estimate. This information may
include downlink positioning measurements, path loss and signal strength
related measurements, etc.
### 8.1.3 Assisted-GNSS Positioning Procedures
#### 8.1.3.1 Capability Transfer Procedure
The Capability Transfer procedure for Assisted-GNSS positioning is described
in clause 7.1.2.1.
##### 8.1.3.1.1 Void
#### 8.1.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)). In the case of high-accuracy GNSS positioning techniques (e.g.,
RTK), the E-SMLC can provide unsolicited periodic assistance data to the UE
and the UE can request periodic assistance data from the E-SMLC.
##### 8.1.3.2.1 E-SMLC initiated Assistance Data Delivery
Figure 8.1.3.2.1-1 shows the Assistance Data Delivery operations for the
network-assisted GNSS method when the procedure is initiated by the E-SMLC.
Figure 8.1.3.2.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the GNSS assistance
data defined in clause 8.1.2.1.
##### 8.1.3.2.1a E-SMLC initiated Periodic Assistance Data Delivery
The Periodic Assistance Data Delivery procedure allows the server to provide
unsolicited periodic assistance data to the target and is shown in Figure
8.1.3.2.1a-1.
NOTE: In this version of the specification, periodic assistance data delivery
is supported for HA GNSS (e.g., RTK) positioning only.
Figure 8.1.3.2.1a-1: LPP Periodic Assistance data delivery procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
and sends an LPP Provide Assistance Data message to the UE. This message
includes information to identify the type of periodic assistance data and a
duration for ending the assistance data delivery.
(2) When the first periodic message is available, the E-SMLC sends an
unsolicited LPP Provide Assistance Data message to the UE containing the
periodic assistance data announced in step (1).
(3) The server may continue to send further LPP Provide Assistance Data
messages to the target containing the periodic assistance data announced in
step (1) when each additional periodicity condition occurs. When the duration
for ending the periodic assistance data transfer occurs, the last LPP Provide
Assistance Data message transferred indicates the end of transaction.
Additionally, the session can be ended on request by the UE or by the E-SMLC
with the help of an Abort message.
##### 8.1.3.2.2 UE initiated Assistance Data Transfer
Figure 8.1.3.2.2-1 shows the Assistance Data Transfer operations for the
network-assisted GNSS method when the procedure is initiated by the UE.
Figure 8.1.3.2.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain A-GNSS assistance data are desired (e.g.,
in case the UE requires its own location with autonomous self location or as
part of a positioning procedure when the E-SMLC provided assistance data are
not sufficient for the UE to fulfill the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific A-GNSS assistance data are requested for each GNSS, possibly
together with additional information (e.g., for which GNSS signal types, or
satellites, or times the assistance is requested, etc.). Additional
information concerning the UE\'s approximate location and serving and
neighbour cells may also be provided in the Request Assistance Data message
and/or in an accompanying Provide Location Information message to help the
E-SMLC provide appropriate assistance data. This additional data may include
the UE\'s last known location if available, the cell IDs of the UE serving
eNodeB and possibly neighbour eNodeBs, as well as E-CID measurements.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages, e.g., one
message per GNSS. In this case, this step may be repeated by the E-SMLC
several times. If any of the UE requested assistance data in step (1) are not
provided in step 2, the UE shall assume that the requested assistance data are
not supported, or currently not available at the E-SMLC. If none of the UE
requested assistance data in step (1) can be provided by the E-SMLC, return
any information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.
##### 8.1.3.2.2a UE initiated Periodic Assistance Data Transfer
Figure 8.1.3.2.2a-1 shows the Periodic Assistance Data Transfer operations for
the high-accuracy GNSS methods (e.g., RTK) when the procedure is initiated by
the UE.
NOTE: In this version of the specification, periodic assistance data transfer
is supported for HA GNSS (e.g., RTK) positioning only.
Figure 8.1.3.2.2a-1: UE-initiated Periodic Assistance Data Transfer Procedure
(1) The UE determines that certain periodic A-GNSS assistance data, specific
to one or more RTK-service levels, are desired and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific A-GNSS assistance data are requested for each GNSS. Additional
information like desired periodicity for sending the assistance data and a
duration for ending the periodic session shall also be provided in the LPP
Request Assistance Data message.
(2) The E-SMLC responds with a LPP Provide Assistance Data message to the UE.
If the UE request can be supported, the message contains information which may
confirm or redefine the type of assistance data or periodicity parameters
requested at step (1). This response indicates the end of the control
transaction.
(3) When available, the E-SMLC provides unsolicited the requested assistance
data in a LPP Provide Assistance Data message to the UE. If any of the
requested assistance data in step (1) or redefined in step (2) are not
provided in step (3), the UE shall assume that the requested assistance data
are not supported, or currently not available at the E-SMLC.
(4) The E-SMLC may transmit one or more additional LPP Provide Assistance Data
messages to the UE containing further periodic assistance data confirmed or
redefined in step (2). When the duration for ending the periodic assistance
data transfer occur, the last LPP Provide Assistance Data message transferred
indicates the end of the transaction. Additionally, the session can be ended
on request by the UE or by the E-SMLC with the help of an Abort message.
#### 8.1.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self location where the UE requests its own location).
##### 8.1.3.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.1.3.3.1-1 shows the Location Information Transfer operations for the
network-assisted GNSS method when the procedure is initiated by the E-SMLC.
Figure 8.1.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1)The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of A-GNSS positioning. This request includes positioning
instructions such as the GNSS mode (UE-assisted, UE-based, UE-based preferred
but UE-assisted allowed, UE-assisted preferred, but UE-based allowed,
standalone), positioning methods (GPS, Galileo, GLONASS, BDS, NavIC, etc. and
possibly non-GNSS methods, such as downlink positioning or E-CID), specific UE
measurements requested if any, such as fine time assistance measurements,
velocity, carrier phase, multi-frequency measurements, and quality of service
parameters (accuracy, response time), and possibly integrity requirements.
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE may also determine the integrity results of the calculated
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.1.3.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.1.3.3.2-1 shows the Location Information delivery operations for the
UE-assisted GNSS method when the procedure is initiated by the UE.
Figure 8.1.3.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE measurements (GNSS
pseudo-ranges, carrier phase-ranges, and other measurements) already available
at the UE.
## 8.2 Downlink positioning method
### 8.2.1 General
In the downlink positioning method, the UE position is estimated based on
measurements taken at the UE of downlink radio signals from multiple TPs
(possibly including PRS-only TPs from a PRS-based TBS), along with knowledge
of the geographical coordinates of the measured TPs and their relative
downlink timing.
The specific positioning techniques used to estimate the UE\'s location from
this information are beyond the scope of this specification.
### 8.2.2 Transferred information
This clause defines the information that may be transferred between E-SMLC and
UE/eNodeB.
#### 8.2.2.1 Assistance Data that may be transferred from the E-SMLC to UE
The following assistance data may be transferred from the E-SMLC to the UE:
\- Physical cell IDs (PCIs), global cell IDs (GCIs),and TP IDs of candidate
TPs for measurement;
\- Timing relative to the serving (reference) TP of candidate TPs;
\- PRS configuration of candidate TPs.
#### 8.2.2.2 Assistance Data that may be transferred from the eNodeB to E-SMLC
The following assistance data may be transferred from the eNodeB to the
E-SMLC:
\- PCI, GCI, and TP IDs of the TPs served by the eNodeB;
\- Timing information of TPs served by the eNodeB;
\- PRS configuration of the TPs served by the eNodeB;
\- Geographical coordinates of the TPs served by the eNodeB.
An eNodeB may provide assistance data relating only to itself and served TPs
via LPPa signalling, although assistance data from several eNodeBs and served
TPs may be acquired through other mechanisms, see NOTE below.
NOTE: The assistance data described in this clause are not necessarily
transferred only from the eNodeB, and in some deployment options may not be
delivered from the eNodeB at all; they may also be delivered to the E-SMLC
through OA&M or other mechanisms external to the E-UTRAN. In addition, in
cases where assistance data are delivered from the eNodeB, how the eNodeB
acquires the data is outside the scope of this specification.
#### 8.2.2.3 Location Information that may be transferred from the UE to
E-SMLC
The information that may be signalled from UE to the E-SMLC is listed in Table
8.2.2.3-1. The individual UE measurements are defined in TS 36.214 [20].
Table 8.2.2.3-1: Information that may be transferred from UE to the E-SMLC
* * *
Information Measurements Downlink Measurement Results List for EUTRA Physical
cell IDs Global cell IDs TP IDs Downlink timing measurements Information used
to compute a reference time corresponding to the downlink timing measurements
to allow correlation of downlink timing measurements with motion information
independently obtained from motion sensors Delta SFN for each neighbour cell
* * *
### 8.2.3 Downlink Positioning Procedures
The procedures described in this clause support downlink positioning
measurements obtained by the UE and provided to the E-SMLC using LPP, or
obtained by the eNode B and provided to the E-SMLC using LPPa.
In this version of the specification only the UE-assisted downlink positioning
is supported.
#### 8.2.3.1 Capability Transfer Procedure
The Capability Transfer procedure for Downlink positioning is described in
clause 7.1.2.1.
##### 8.2.3.1.1 Void
#### 8.2.3.2 Assistance Data Transfer Procedure
##### 8.2.3.2.1 Assistance Data Transfer between E-SMLC and UE
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.2.3.2.1.1 E-SMLC-initiated assistance data delivery
Figure 8.2.3.2.1.1-1 shows the Assistance Data Delivery operations for the
downlink positioning method when the procedure is initiated by the E-SMLC.
Figure 8.2.3.2.1.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the downlink
positioning assistance data defined in clause 8.2.2.1.
##### 8.2.3.2.1.2 UE-initiated assistance data transfer
Figure 8.2.3.2.1.2-1 shows the Assistance Data Transfer operations for the
downlink positioning method when the procedure is initiated by the UE.
Figure 8.2.3.2.1.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain downlink positioning assistance data are
desired (e.g., in case the UE requires its own location with autonomous self
location, or as part of a positioning procedure when the E-SMLC-provided
assistance data are not sufficient for the UE to fulfill the request) and
sends an LPP Request Assistance Data message to the E-SMLC. This request
includes an indication of which specific downlink assistance data are
requested. Additional information concerning the UE\'s approximate location
and serving and neighbour cells may also be provided in the Request Assistance
Data message and/or in an accompanying Provide Location Information message to
help the E-SMLC provide appropriate assistance data. This additional data may
include the UE\'s last known location if available, the cell IDs of the UE
serving eNodeB and possibly neighbour eNodeBs, as well as E-CID measurements.
(2) The E-SMLC provides the requested assistance in an LPP Provide Assistance
Data message, if available at the E-SMLC. If any of the UE requested
assistance data in step (1) are not provided in step 2, the UE shall assume
that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
##### 8.2.3.2.2 Assistance Data Delivery between E-SMLC and eNodeB
The purpose of this procedure is to enable the eNodeB to provide assistance
data to the E-SMLC, for subsequent delivery to the UE using the procedures of
clause 8.2.3.2.1 or for use in the calculation of positioning estimates at the
E-SMLC.
##### 8.2.3.2.2.1 Void
##### 8.2.3.2.2.2 E-SMLC-initiated assistance data delivery to the E-SMLC
Figure 8.2.3.2.2.2-1 shows the Assistance Data Delivery operation from the
eNodeB to the E-SMLC for the downlink positioning method, in the case that the
procedure is initiated by the E-SMLC.
Figure 8.2.3.2.2.2-1: E-SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that certain downlink positioning assistance data
are desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an LPPa OTDOA INFORMATION REQUEST message to the eNode B. This request
includes an indication of which specific downlink assistance data are
requested.
(2) The eNode B provides the requested assistance in an LPPa OTDOA INFORMATION
RESPONSE message, if available at the eNode B. If the eNode B is not able to
provide any information, it returns an OTDOA INFORMATION FAILURE message
indicating the cause of the failure.
#### 8.2.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the UE, or to enable the UE to provide location measurements
to the E-SMLC for position calculation (e.g., in case of basic self location
where the UE requests its own location).
##### 8.2.3.3.1 E-SMLC-initiated Location Information Transfer
Figure 8.2.3.3.1-1 shows the Location Information Transfer operations for the
downlink positioning method when the procedure is initiated by the E-SMLC.
Figure 8.2.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends an LPP Request Location Information message to the UE.
This request includes indication of downlink measurements requested, including
any needed measurement configuration information, and required response time.
(2) The UE obtains downlink measurements as requested in step 1. The UE then
sends an LPP Provide Location Information message to the E-SMLC, before the
Response Time provided in step (1) elapsed, and includes the obtained downlink
measurements. If the UE is unable to perform the requested measurements, or
the Response Time elapsed before any of the requested measurements were
obtained, the UE returns any information that can be provided in an LPP
message of type Provide Location Information which includes a cause indication
for the not provided location information.
##### 8.2.3.3.2 UE-initiated Location Information Delivery procedure
Figure 8.2.3.3.2-1 shows the Location Information Delivery procedure
operations for the downlink positioning method when the procedure is initiated
by the UE.
Figure 8.2.3.3.2-1: UE-initiated Location Information Delivery Procedure.
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE downlink
measurements already available at the UE.
## 8.3 Enhanced cell ID positioning methods
### 8.3.1 General
In the Cell ID (CID)-based method, the UE position is estimated with the
knowledge of the geographical coordinates of its serving eNodeB. Enhanced Cell
ID (E-CID) positioning refers to techniques which use additional UE and/or
E‑UTRAN radio resource related measurements to improve the UE location
estimate. For E-UTRAN access, these measurements may include [20, 21]:
UE measurements (TS 36.214 [20], TS 36.302 [21]):
\- Reference signal received power (RSRP);
\- Reference Signal Received Quality (RSRQ);
\- UE Rx -- Tx time difference;
\- GERAN RSSI;
\- UTRAN CPICH RSCP;
\- UTRAN CPICH Ec/Io;
\- WLAN RSSI.
E-UTRAN measurements (TS 36.214 [20], TS 36.302 [21]):
\- eNB Rx -- Tx time difference
\- Timing Advance (T~ADV~):
\- Type1: T~ADV~ = (eNB Rx -- Tx time difference) + (UE Rx -- Tx time
difference)
\- Type2: T~ADV~ = eNB Rx -- Tx time difference;
\- Angle of Arrival (AoA).
Various techniques exist to use these measurements to estimate the location of
the UE. The specific techniques are beyond the scope of this specification.
### 8.3.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., measurement data) that may be
transferred between E-UTRAN elements.
#### 8.3.2.1 Information that may be transferred from the E-SMLC to UE
UE-assisted Enhanced Cell-ID location does not require any assistance data to
be transferred from the E-SMLC to the UE.
UE-Based Enhanced Cell-ID location is not supported in this version of the
specification.
#### 8.3.2.2 Information that may be transferred from the UE to E-SMLC
The information that may be signalled from UE to the E-SMLC is listed in table
8.3.2.2-1.
Table 8.3.2.2-1: Information that may be transferred from UE to the E-SMLC
* * *
Information UE‑assisted Evolved Cell Global Identifier (ECGI)/Physical Cell ID
Yes Reference signal received power (RSRP) Yes Reference Signal Received
Quality (RSRQ) Yes UE Rx -- Tx time difference Yes
* * *
#### 8.3.2.3 Information that may be transferred from the eNodeB to E-SMLC
The information that may be signalled from eNodeB to the E-SMLC is listed in
table 8.3.2.3-1.
Table 8.3.2.3-1: Information that may be transferred from eNB to the E-SMLC
* * *
Information  
Timing Advance (T~ADV~)  
Angle of Arrival (AoA)  
E-UTRA Measurement Results List:  
\- Evolved Cell Global Identifier (ECGI)/Physical Cell ID \- Reference signal
received power (RSRP) \- Reference Signal Received Quality (RSRQ) GERAN
Measurement Results List:  
\- Base Station Identity Code (BSIC) \- ARFCN of Base Station Control Channel
(BCCH) \- Received Signal Strength Indicator (RSSI) UTRA Measurement Results
List:  
\- UTRAN Physical ID \- Common Pilot Channel Received Signal Code Power (RSCP)
\- Common Pilot Channel Ec/Io WLAN Measurement Results List:  
\- WLAN Received Signal Strength Indicator (RSSI) \- SSID \- BSSID \- HESSID
\- Operating Class \- Country Code \- WLAN Channel(s) \- WLAN Band
* * *
### 8.3.3 Downlink E-CID Positioning Procedures
The procedures described in this clause support E-CID related measurements
obtained by the UE and provided to the E-SMLC using LPP. The term \"downlink\"
is intended to indicate that from the E-SMLC perspective the involved
measurements are provided by the UE; this set of procedures might also be
considered as \"UE-assisted, E-SMLC-based E-CID\".
#### 8.3.3.1 Capability Transfer Procedure
The Capability Transfer procedure for E-CID positioning is described in clause
7.1.2.1.
##### 8.3.3.1.1 Void
#### 8.3.3.2 Assistance Data Delivery Procedure
Assistance data delivery is not required for UE- or eNB-assisted forms of
E-CID positioning.
#### 8.3.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the UE, or to enable the UE to provide location measurements
to the E-SMLC for position calculation (e.g., in case of basic self location
where the UE requests its own location).
##### 8.3.3.3.1 E-SMLC-initiated Location Information Transfer
Figure 8.3.3.3.1-1 shows the Location Information Transfer operations for the
E-CID method when the procedure is initiated by the E-SMLC.
Figure 8.3.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure.
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of E-CID positioning. This request includes the E-CID measurements
requested by the E-SMLC and supported by the UE as listed in Table 8.3.2.2-1
together with a required response time.
(2) The UE sends an LPP Provide Location Information message to the E-SMLC and
reports the requested measurements that are available in the UE before the
Response Time provided in step (1) elapsed. If the requested measurements are
not available, or if the Response Time provided in step 1 elapsed before any
of the requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided location
information.
##### 8.3.3.3.2 UE-initiated Location Information Delivery procedure
Figure 8.3.3.3.2-1 shows the Location Information Delivery procedure
operations for the E-CID method when the procedure is initiated by the UE.
Figure 8.3.3.3.2-1: UE-initiated Location Information Delivery Procedure.
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE measurements
already available at the UE.
### 8.3.4 Uplink E-CID Positioning Procedures
The procedures described in this clause support E-CID related measurements
obtained by the eNodeB and provided to the E-SMLC using LPPa. The term
\"uplink\" is intended to indicate that from the E-SMLC point of view, the
involved measurements are provided by the eNodeB; this set of procedures might
also be considered as \"eNB-assisted E-CID\". An example of this uplink E-CID
positioning method is AoA+T~ADV~.
NOTE: Uplink E-CID positioning not using T~ADV~ type 1 does not require LCS
support in the UE and therefore, works also with legacy UEs (assuming that any
involved measurements delivered in RRC are supported by the legacy UEs).
#### 8.3.4.1 Position Capability Transfer Procedure
The position capability transfer procedure is not applicable to uplink E-CID
positioning not using T~ADV~ type 1. For uplink E-CID positioning using T~ADV~
type 1, the Capability Transfer procedure for E-CID positioning is described
in clause 7.1.2.1.
#### 8.3.4.2 Assistance Data Delivery Procedure
The assistance data delivery procedure is not applicable to uplink E-CID
positioning.
#### 8.3.4.3 Position Measurement Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the eNodeB.
##### 8.3.4.3.1 E-SMLC-initiated Position Measurement
Figure 8.3.4.3.1-1 shows the Position Measurement operations for the uplink
E-CID method when the procedure is initiated by the E-SMLC.
Figure 8.3.4.3.1-1: E-SMLC-initiated Position Measurement Procedure
(1) The E-SMLC sends an LPPa E-CID MEASUREMENT INITIATION REQUEST message to
the eNodeB. This request includes indication of E-CID measurements requested
and whether the result is expected only once or periodically.
(2) If the E-SMLC in step (1) requested UE measurements (i.e., RSRP, RSRQ
measurements), or if the eNodeB requires UE measurements associated with the
measurements requested by the E-SMLC (e.g., T~ADV~ type 1, which requires a UE
Tx-Rx time difference measurement to be delivered from the UE to the eNodeB),
the eNodeB may configure the UE to report the measurement information
requested as specified in TS 36.331 [14].
(3) If the result is expected only once and the eNodeB initiates at least one
of the E-CID measurements as requested, the eNodeB sends an LPPa E-CID
MEASUREMENT INITIATION RESPONSE to the E-SMLC, which includes the obtained
E-CID measurements. If the result is expected periodically and the eNodeB is
able to initiate at least one of the E-CID measurements as requested, the
eNodeB sends an LPPa E-CID MEASUREMENT INITIATION RESPONSE to the E-SMLC,
which does not include any result. The eNodeB reports then the obtained
measurements by initiating the E-CID Measurement Report procedure, with the
requested periodicity. If the eNodeB is unable to initiate any of the
requested measurements as requested from the E-SMLC, or is unable to instigate
any of the required RRC procedures to obtain the requested measurements from
the UE, the eNodeB sends an LPPa E-CID MEASUREMENT INITIATION FAILURE message
providing the error reason. If the failure occurs during a periodic reporting,
the eNodeB sends an LPPa E-CID MEASUREMENT FAILURE INDICATION message.
## 8.4 Downlink Supporting Procedures
### 8.4.1 General
An E-SMLC is enabled to request downlink location related information from the
E-UTRAN in order to support downlink positioning. LPPa is employed for this
between the E-SMLC and each eNodeB reachable from the E-SMLC via any of the
MMEs with signalling access to the E-SMLC.
### 8.4.2 Location Related Information
The information that may be transferred from an eNodeB to the E-SMLC to
support downlink positioning is listed in table 8.4.2-1.
Table 8.4.2-1: Information that may be transferred from an eNodeB to the
E-SMLC for the Downlink Position Method Support
* * *
Information UE‑assisted Global cell IDs (ECGIs) of eNodeB Yes Physical cell
IDs (PCIs) of eNodeB Yes TP IDs Yes PRS Scheduling Yes If synchronized: SFN
initialization time of TP relative to time reference Yes
* * *
### 8.4.3 Location Related Information Acquisition Procedure
The purpose of this procedure is to enable an E-SMLC to request downlink
location related information from an eNodeB.
##### 8.4.3.1 On Demand Procedure
Figure 8.4.3.1-1 shows the location information acquisition operation for the
downlink positioning method when information is needed on demand in real time.
Figure 8.4.3.1-1: E-SMLC-initiated On Demand Procedure for Location
Information Applicable to Downlink
(1) The E-SMLC sends an LPPa message of type Request Location Information to
the eNodeB. This request includes an indication of the downlink related
information requested.
(2) The eNodeB obtains the information requested in step 1 using previously
configured or stored information and/or real time measurements in the case of
a request for timing information where recent timing information is not
already available. The eNodeB then sends an LPPa message of type Provide
Location Information to the E-SMLC. If the eNodeB is unable to obtain any of
the requested information, the eNodeB sends an LPPa failure message, providing
the error reason.
##### 8.4.3.2 Triggered Procedure
Figure 8.4.3.2-1 shows the location information acquisition operation for the
downlink positioning method when information is needed on a triggered basis.
Figure 8.4.3.2-1: E-SMLC-initiated Triggered Procedure for Location
Information Applicable to Downlink
(1) The E-SMLC sends an LPPa message of type Request Location Information to
the eNodeB. This request includes an indication of the downlink related
information requested, triggering criteria for responses (e.g. periodic time
interval).
(2) In response to step 1, the eNodeB obtains the information requested using
already available information and/or real time measurements. The eNodeB then
sends an LPPa message of type Provide Location Information to the E-SMLC
carrying this information. If the eNodeB is unable to obtain the requested
information partly or completely, the eNodeB sends an LPPa failure message.
(3) When the trigger criteria provided in step 1 indicate the need for a new
report the eNodeB obtains the latest information. The eNodeB then sends a
further LPPa message of type Provide Location Information to the E-SMLC
containing this information If the eNodeB is unable to obtain the requested
information, partly or completely, the eNodeB sends an LPPa failure message.
## 8.5 Uplink positioning method
### 8.5.1 General
In the uplink positioning method, the UE position is estimated based on timing
measurements of uplink radio signals taken at different LMUs , along with
knowledge of the geographical coordinates of the LMUs. The time required for a
signal transmitted by a UE to reach a LMU is proportional to the length of the
transmission path between the UE and the LMU. A set of LMUs is tasked to
sample the UE signal at the same time.
The specific of any uplink positioning methods or techniques used to estimate
the UE\'s location from these measurements are beyond the scope of this
specification.
In order to obtain uplink measurements, the LMUs need to know the
characteristics of the SRS signal transmitted by the UE for the time period
required to calculate uplink measurement. These characteristics should be
static over the periodic transmission of SRS during the uplink measurements.
Hence, the E-SMLC will indicate to the serving eNodeB the need to direct the
UE to transmit SRS (see 5.2.2) signals for uplink positioning. It is up to the
eNodeB to make the final decision on resources to be assigned and to
communicate this configuration information back to the E-SMLC so that E-SMLC
can configure the LMUs. The eNB may decide (e.g., in case no resources are
available) to configure no resources for the UE and report the empty resource
configuration to the E-SMLC.
### 8.5.2 Transferred information
This clause defines the information that may be transferred between E-SMLC and
eNodeB/LMU.
UTDOA measurements are performed on Sounding Reference Signals (SRS),
configured as periodic SRS involving multiple SRS transmissions.
NOTE: The tables in clauses 8.5.2.1, 8.5.2.2, and 8.5.2.3 will be updated if
needed.
#### 8.5.2.1 Configuration Data that may be transferred from the eNodeB to the
E-SMLC
The following configuration data may be transferred from the eNodeB to the
E-SMLC:
+----------------------------------+----------------------------------+ | Parameter Category | Parameters | +==================================+==================================+ | General | PCI of PCell ^Note\ 1^ | | | | | | UL-EARFCN of PCell | | | | | | _Timing advance measurement for | | | the UE in PCell [36.214] | | | ^Note\ 3^_ | +----------------------------------+----------------------------------+ | SRS | For each serving cell in which | | | SRS is configured ^Note2^: | | | | | | - PCI | | | | | | - UL-EARFCN | | | | | | - UL cyclic prefix | | | | | | - UL system bandwidth of the | | | cell | | | | | | - Cell-specific SRS bandwidth | | | configuration | | | _srs-BandwidthConfig_ [36.211] | | | | | | - UE-specific SRS bandwidth | | | configuration _srs-Bandwidth_ | | | [36.211] | | | | | | - number of antenna ports for | | | SRS transmission | | | _srs-AntennaPort_ [36.211] | | | | | | - frequency domain position | | | [36.211] | | | | | | - SRS frequency hopping | | | bandwidth configuration | | | [36.211] | | | | | | - SRS-Cyclic shift [36.211] | | | | | | - Transmission comb [36.211] | | | | | | - SRS configuration index | | | [36.213] | | | | | | - _MaxUpPt_ , used for TDD only | | | [36.211] | | | | | | - _Group-hopping-enabled_ | | | [36.211] | | | | | | _\- | | | deltaSS_ , | | | parameter [36.211, 5.5.1.3], | | | included when SRS sequence | | | hopping is used [36.211, | | | 5.5.1.4] and not included | | | otherwise | +----------------------------------+----------------------------------+ | Note 1: Indicating PCell should | | | not imply configuring SRS on the | | | PCell | | | | | | Note 2: Multiple serving cells | | | are possible for a UE configured | | | with CA | | | | | | Note 3: Used for search window | | | calculation | | +----------------------------------+----------------------------------+
#### 8.5.2.2 Configuration Data that may be transferred from the E-SMLC to LMU
The following configuration data may be transferred from the E-SMLC to LMU:
+----------------------------------+----------------------------------+ | Parameter Category | Parameters | +==================================+==================================+ | General | Search window | | | parameters ^Note\ 2^: | | | | | | - expected propagation delay, | | | T, corresponding to distance | | | between LMU and PCell, | | | | | | - delay uncertainty ∆ | +----------------------------------+----------------------------------+ | SRS | For each serving cell in which | | | SRS is configured and to be | | | measured by LMU ^Note1^: | | | | | | - PCI | | | | | | - UL-EARFCN | | | | | | - UL cyclic prefix | | | | | | - UL system bandwidth of the | | | cell | | | | | | - Cell-specific SRS bandwidth | | | configuration | | | _srs-BandwidthConfig_ [36.211] | | | | | | - UE-specific SRS bandwidth | | | configuration _srs-Bandwidth_ | | | [36.211] | | | | | | - number of antenna ports for | | | SRS transmission | | | _srs-AntennaPort_ [36.211] | | | | | | - frequency domain position | | | [36.211] | | | | | | - SRS frequency hopping | | | bandwidth configuration | | | [36.211] | | | | | | - SRS-Cyclic shift [36.211] | | | | | | - Transmission comb [36.211] | | | | | | - SRS configuration index | | | [36.213] | | | | | | - _MaxUpPt_ , used for TDD only | | | [36.211] | | | | | | - _Group-hopping-enabled_ | | | [36.211] | | | | | | _\- | | | deltaSS_ , | | | parameter [36.211, 5.5.1.3], | | | included when SRS sequence | | | hopping is used [36.211, | | | 5.5.1.4] and not included | | | otherwise | +----------------------------------+----------------------------------+ | Note 1: Multiple serving cells | | | are possible for a UE configured | | | with CA; SRS may be transmitted | | | on the PCell and/or SCell(s). | | | | | | Note 2: Search window is | | | calculated by the LMU as | | | [T-∆,T+∆], where ∆ may be e.g. | | | the timing advance measurement | | | provided by eNodeB. | | +----------------------------------+----------------------------------+
#### 8.5.2.3 Location Information that may be transferred from the LMU to
E-SMLC
The information that may be transferred from LMU to the E-SMLC is listed in
Table 8.5.2.3-1. The individual measurements will be defined in TS 36.214
[20].
Table 8.5.2.3-1: Information that may be transferred from LMU to the E-SMLC
* * *
Information Measurements Uplink Measurement Results List for EUTRA UL Relative
Time of Arrival Physical cell IDs
* * *
### 8.5.3 Uplink Positioning Procedures
The procedures described in this clause support the uplink positioning method.
#### 8.5.3.1 Uplink Information Request and Delivery Procedure
The Information Request procedure for Uplink positioning is used by the E-SMLC
to obtain measurement results from the LMU which it uses to calculate a
position for the UE. To do this, it needs to first indicate to the serving eNB
the need to configure the UE to transmit SRS (see 5.2.2) signals and retrieve
target UE configuration data from the eNodeB.
Figure 8.5.3.1-1 shows the messaging between the E-SMLC, the LMU and the
serving eNodeB to perform this procedure.
Figure 8.5.3.1-1: Uplink information request procedure
1\. The E-SMLC sends an Information Request message indicating to the eNodeB
the need to invoke periodic SRS (see 5.2.2) for target UE. The E-SMLC may
provide the eNB with a number of SRS transmissions. The final decision of SRS
transmissions to be performed and whether to take into account this
information is entirely up to the eNB implementation.
2\. The eNodeB determines the resources to be allocated for the UE and sends
an Information Response to the E-SMLC that includes the allocated resources
and the associated parameters. The eNB may decide (e.g., in case no resources
are available) to configure no resources for the UE and report the empty
resource configuration to the E-SMLC.
3\. If in step 2 the eNodeB determines that resources will be allocated, the
eNodeB then allocates the resources to the target UE.
4\. The E-SMLC selects a set of LMUs to be used for the UTDOA positioning and
sends a measurement request with the SRS configuration to each one of them
(via SLm).
5\. LMUs report back to E-SMLC the uplink measurement reports.
#### 8.5.3.2 Uplink Positioning Information Update Procedure
This procedure is used to notify the E-SMLC of a change to the UE SRS
transmission configuration for one or more cells with respect to a previously
sent UTDOA INFORMATION RESPONSE message. If the configured SRS transmission
for the target UE has been modified, or if a handover of the target UE has
been triggered, the eNB uses the Uplink Positioning Information Update
procedure to inform the E-SMLC.
Figure 8.5.3.2-1: Uplink Positioning Information Update Procedure
1\. If the SRS configuration changes or if a handover of the target UE has
been triggered prior to the expected completion time of the previously
communicated SRS configuration, the eNB initiates the Uplink Positioning
Information Update Procedure. In the case of handover, the source eNB sends
the update message after deciding to perform handover execution for the UE.
2\. If the UE SRS transmission configuration has changed for one or more
cells, the eNB sends an Uplink Positioning Information Update message to the
E-SMLC carrying the UE SRS transmission configuration information for all
cells with SRS configured.
## 8.6 Barometric pressure sensor positioning methods
### 8.6.1 General
In the barometric pressure sensor positioning method, the UE vertical
component of the position is estimated by combining the measured atmospheric
pressure and a reference atmospheric pressure. This is accomplished through
barometric sensors measuring atmospheric pressure at the UE, and applying a
height determination algorithm using the reference atmospheric pressure.
Three positioning modes are supported:
\- _UE-Assisted_ : The UE performs barometric pressure sensor measurements
with or without assistance from the network and sends these measurements to
the E-SMLC where the vertical component of the position calculation may take
place, possibly using additional measurements from other sources;
\- _UE-Based_ : The UE performs barometric pressure sensor measurements and
calculates its own vertical component of the position, possibly using
additional measurements from other sources.
\- _Standalone_ : The UE performs barometric pressure sensor measurements and
calculates its own vertical component of the position, possibly using
additional measurements from other sources, without network assistance.
### 8.6.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, vertical position
and/or measurement data) that may be transferred between E-UTRAN elements.
#### 8.6.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.6.2.1-1.
Table 8.6.2.1-1: Information that may be transferred from UE to the E-SMLC
+---------------------------------------------------+-------------+------------+ | Information | UE‑assisted | UE-based/ | | | | | | | | Standalone | +---------------------------------------------------+-------------+------------+ | UE position estimate with uncertainty shape | No | Yes | +---------------------------------------------------+-------------+------------+ | Indication of used positioning methods in the fix | No | Yes | +---------------------------------------------------+-------------+------------+ | Timestamp | Yes | Yes | +---------------------------------------------------+-------------+------------+ | Barometric pressure sensor measurements | Yes | No | +---------------------------------------------------+-------------+------------+
##### 8.6.2.1.1 Standalone mode
In Standalone mode, the UE reports the vertical component of the position,
together with an estimate of the location uncertainty, if available.
The UE should also report an indication of which positioning method(s) have
been used to calculate a fix.
##### 8.6.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the barometric pressure sensor
measurements together with associated quality estimates. These measurements
enable the E-SMLC to calculate the vertical component of the location of the
UE, possibly using other measurements and data.
If requested by the E-SMLC and supported by the UE, the UE may report
barometric pressure sensor measurements together with associated quality
measurements, if available.
##### 8.6.2.1.3 UE-based mode
In UE-based mode, the UE reports the vertical component of the position,
together with an estimate of the location uncertainty, if available.
The UE should also report an indication of which positioning method(s) have
been used to calculate a fix.
#### 8.6.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.6.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.6.2.2-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Reference pressure Additional reference data
* * *
##### 8.6.2.2.1 Barometric pressure sensor assistance data
The barometric pressure sensor assistance data may include reference pressure,
along with other reference data, such as the reference point where the
reference barometric pressure is valid and reference temperature at the
reference point.
### 8.6.3 Barometric Pressure Sensor Location Information Transfer Procedures
The purpose of this procedure is to enable the E-SMLC to request barometric
pressure sensor measurements or position estimate from the UE, or to enable
the UE to provide barometric pressure sensor measurements to the E-SMLC for
position calculation (e.g., in case of basic self-location where the UE
requests its own location).
#### 8.6.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.6.3.1-1 shows the Location Information Transfer operations when the
procedure is initiated by the E-SMLC.
Figure 8.6.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of barometric pressure sensor positioning. This request includes
positioning instructions such as the positioning mode (UE-assisted, UE-based,
standalone), specific requested UE measurements if any, and quality of service
parameters (accuracy, response time).
(2) The UE performs the requested measurements and possibly calculates its own
position. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
#### 8.6.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.6.3.2-1 shows the Location Information delivery operations for the
barometric pressure sensor method when the procedure is initiated by the UE.
Figure 8.6.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE barometric pressure
sensor measurements or location estimate already available at the UE.
#### 8.6.3.3 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.6.3.3.1 E-SMLC initiated Assistance Data Delivery
Figure 8.6.3.3.1-1 shows the Assistance Data Delivery operations for the
network-assisted barometric pressure sensor method when the procedure is
initiated by the E-SMLC.
Figure 8.6.3.3.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the barometric
pressure sensor assistance data defined in clause 8.6.2.2.
##### 8.6.3.3.2 UE initiated Assistance Data Transfer
Figure 8.6.3.3.2-1 shows the Assistance Data Transfer operations for the
network-assisted Barometric pressure sensor method when the procedure is
initiated by the UE.
Figure 8.6.3.3.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain barometric pressure sensor assistance data
is desired (e.g., in case the UE requires its own location with autonomous
self location or as part of a positioning procedure when the E-SMLC provided
assistance data are not sufficient for the UE to fulfil the request) and sends
a LPP Request Assistance Data message to the E-SMLC. This request includes an
indication of which specific barometric pressure sensor assistance data is
requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.7 WLAN positioning methods
### 8.7.1 General
In the WLAN positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference WLAN access points. This is
accomplished by collecting a certain amount of measurements from UE\'s WLAN
receivers, and applying a location determination algorithm using databases of
the estimated position\'s references points.
The UE WLAN measurements may include:
\- WLAN Received Signal Strength (RSSI)
\- Round Trip Time (RTT) between WLAN Access Point and the UE
Three positioning modes are supported:
\- _Standalone_ :\ The UE performs WLAN position measurements and location
computation, without network assistance.
\- _UE-assisted_ :\ The UE provides WLAN position measurements with or without
assistance from the network to the E-SMLC for computation of a location
estimate by the network.
\- _UE-based_ :\ The UE performs WLAN position measurements and computation of
a location estimate with network assistance.
### 8.7.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position,
measurement data) that may be transferred between E-UTRAN elements.
#### 8.7.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.7.2.1-1.
Table 8.7.2.1-1: Information that may be transferred from the UE to the E-SMLC
+-----------------------------------------+-------------+------------+ | Information | UE‑Assisted | UE-based/ | | | | | | | | Standalone | +-----------------------------------------+-------------+------------+ | **WLAN Location Information** | | | +-----------------------------------------+-------------+------------+ | > BSSID | Yes | No | +-----------------------------------------+-------------+------------+ | > SSID | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Round Trip Time (RTT) | Yes | No | +-----------------------------------------+-------------+------------+ | > Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE position estimate with uncertainty | No | Yes | | > shape | | | +-----------------------------------------+-------------+------------+ | > Position Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
##### 8.7.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication of WLAN method and possibly other
positioning methods used to calculate a fix.
##### 8.7.2.1.2 UE-assisted mode
In UE-assisted mode, the UE should report:
\- The BSSID/SSID of the measured WLAN access points, and associated RSSI or
RTT.
##### 8.7.2.1.3 UE-based mode
In UE-based mode, the UE reports the latitude, longitude, and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication that WLAN method is used and possibly
other positioning methods used to calculate the fix.
#### 8.7.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.7.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.7.2.2-1: Information that may be transferred from the E-SMLC to UE
+----------------------------------------------------------------------+ | **Assistance Data** | +----------------------------------------------------------------------+ | WLAN AP List | +----------------------------------------------------------------------+ | > \- BSSID | +----------------------------------------------------------------------+ | > \- SSID | +----------------------------------------------------------------------+ | > \- AP Type Data^(1)^ | +----------------------------------------------------------------------+ | > \- AP Location | +----------------------------------------------------------------------+ | NOTE 1: WLAN AP Type Data may include WLAN Type (e.g., | | 802.11a/b/g/n/ac/ad, etc.), transmit power, antenna gain, coverage | | area, etc. | +----------------------------------------------------------------------+
##### 8.7.2.2.1 WLAN AP BSSID
This assistance data provides the BSSID of the WLAN access point [29].
##### 8.7.2.2.2 WLAN AP SSID
This assistance data provides the SSID of the WLAN access point [29].
##### 8.7.2.2.3 WLAN AP Type Data
This assistance data provides additional information about the access point
and may include WLAN Type (e.g., 802.11a/b/g/n/ac/ad, etc.), transmit power,
antenna gain, coverage area, etc. [29]
##### 8.7.2.2.4 WLAN AP Location
This assistance data provides the location (possibly including altitude
information) of the access point [29].
### 8.7.3 WLAN Positioning Procedures
#### 8.7.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.7.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.7.3.1.1-1 shows the Location Information Transfer operations for the
WLAN method when the procedure is initiated by the E-SMLC.
Figure 8.7.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of WLAN positioning. This request includes positioning instructions
such as the positioning mode (UE-assisted, UE-based, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.7.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.7.3.1.2-1 shows the Location Information delivery operations for the
WLAN method when the procedure is initiated by the UE.
Figure 8.7.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE WLAN information or
location estimate already available at the UE.
#### 8.7.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the UE to request assistance data
from the E-SMLC (e.g., as part of a positioning procedure or for autonomous
self location (i.e., UE determines its own location)) and the E-SMLC to
provide assistance data to the UE (e.g., as part of a positioning procedure).
##### 8.7.3.2.1 UE initiated Assistance Data Transfer
Figure 8.7.3.2.1-1 shows the Assistance Data Transfer operations for the
network-assisted WLAN method when the procedure is initiated by the UE.
Figure 8.7.3.2.1-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain WLAN assistance data is desired (e.g., in
case the UE requires its own location with autonomous self location or as part
of a positioning procedure when the E-SMLC provided assistance data are not
sufficient for the UE to fulfil the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific WLAN assistance data is requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.8 Bluetooth positioning methods
### 8.8.1 General
In the Bluetooth positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference Bluetooth beacons. This is
accomplished by collecting a certain amount of measurements from UE\'s
Bluetooth receiver, and applying a location determination algorithm using
databases of the estimated position\'s references points.
The UE Bluetooth measurements may include:
\- Bluetooth beacon\'s Received Signal Strength (RSSI)
Two positioning modes are supported:
\- _Standalone_ :\ The UE performs Bluetooth position measurements and
location computation.
\- _UE-assisted_ :\ The UE provides Bluetooth position measurements without
assistance from the network to the E-SMLC for computation of a location
estimate by the network.
### 8.8.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., position, measurement data) that
may be transferred between E-UTRAN elements.
#### 8.8.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the SMLC is summarized in Table 8.8.2.1-1.
Table 8.8.2.1-1: Information that may be transferred from the UE to the E-SMLC
+-----------------------------------------+-------------+------------+ | Information | UE‑Assisted | Standalone | +-----------------------------------------+-------------+------------+ | **Bluetooth Location Information** | | | +-----------------------------------------+-------------+------------+ | > MAC Address | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE position estimate with uncertainty | No | Yes | | > shape | | | +-----------------------------------------+-------------+------------+ | > Position Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
##### 8.8.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication of Bluetooth method and possibly other
location methods have been used to calculate a fix.
##### 8.8.2.1.2 UE-assisted mode
In UE-assisted mode, the UE should report:
\- The MAC addresses of the measured Bluetooth beacons and associated RSSI.
### 8.8.3 Bluetooth Positioning Procedures
#### 8.8.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.8.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.8.3.1.1-1 shows the Location Information Transfer operations for the
Bluetooth method when the procedure is initiated by the E-SMLC.
Figure 8.8.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of Bluetooth positioning. This request includes positioning
instructions such as the positioning mode (UE-assisted, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.8.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.8.3.1.2-1 shows the Location Information delivery operations for the
Bluetooth method when the procedure is initiated by the UE.
Figure 8.8.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE Bluetooth information
or location estimate already available at the UE.
## 8.9 TBS positioning methods
### 8.9.1 General
Terrestrial Beacon Systems (TBS) is the standard generic term for a network of
ground-based transmitters broadcasting signals for geo-spatial positioning
with wide-area or regional coverage. The following TBSs are supported in this
version of the specification:
\- Metropolitan Beacon Systems (MBS).
NOTE: PRS-based TBS is part of downlink (OTDOA) positioning and described in
clause 8.2.
Three positioning modes are supported:
\- _UE-Assisted_ : The UE performs TBS measurements with or without assistance
from the network, and sends these measurements to the E-SMLC where the
position calculation takes place, possibly using additional measurements from
other (non-TBS) sources;
\- _UE-Based_ : The UE performs TBS measurements and calculates its own
location, possibly using additional measurements from other (non-TBS) sources.
\- _Standalone_ : The UE performs TBS measurements and calculates its own
location, possibly using additional measurements from other (non-TBS) sources,
without network assistance.
### 8.9.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position,
measurement data) that may be transferred between E-UTRAN elements.
#### 8.9.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.9.2.1-1.
Table 8.9.2.1-1: Information that may be transferred from UE to the E-SMLC
+---------------------------------+-----------------+----------------+ | **Information** | **UE‑assisted** | **UE-based/** | | | | | | | | **Standalone** | +---------------------------------+-----------------+----------------+ | UE position estimate with | No | Yes | | uncertainty shape | | | +---------------------------------+-----------------+----------------+ | Timestamp | Yes | Yes | +---------------------------------+-----------------+----------------+ | Indication of used positioning | No | Yes | | methods in the fix | | | +---------------------------------+-----------------+----------------+ | TBS measurements (code phase | Yes | No | | (MBS)) | | | +---------------------------------+-----------------+----------------+ | Measurement quality parameters | Yes | No | | for each measurement | | | +---------------------------------+-----------------+----------------+
##### 8.9.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication that TBS method is used and possibly
other positioning methods used to calculate the fix.
##### 8.9.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the TBS associated measurements, together
with associated quality estimates. These measurements enable the E-SMLC to
calculate the location of the UE, possibly using other measurements and data.
##### 8.9.2.1.3 UE-based mode
In UE-based mode, the UE reports the latitude and longitude, together with an
estimate of the location uncertainty, if available.
The UE should also report an indication that TBS method is used and possibly
other positioning methods used to calculate the fix.
#### 8.9.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.9.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.9.2.2-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Acquisition assistance Almanac
* * *
##### 8.9.2.2.1 Acquisition Assistance
Acquisition assistance provides the MBS receiver with information about
visible beacons, PN Codes, and other information of the MBS signals to enable
a fast acquisition of the MBS signals.
##### 8.9.2.2.2 Almanac
Almanac assistance provides the MBS receiver with MBS beacon parameters that
can be used to determine the UE position.
### 8.9.3 TBS Positioning Procedures
#### 8.9.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.9.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.9.3.1.1-1 shows the Location Information Transfer operations for the
TBS method when the procedure is initiated by the E-SMLC.
Figure 8.9.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of TBS positioning. This request includes positioning instructions
such as the positioning mode (UE-assisted, UE-based, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.9.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.9.3.1.2-1 shows the Location Information delivery operations for the
TBS method when the procedure is initiated by the UE.
Figure 8.9.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE TBS measurements or
location estimate already available at the UE.
#### 8.9.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.9.3.2.1 E-SMLC initiated Assistance Data Delivery
Figure 8.9.3.2.1-1 shows the Assistance Data Delivery operations for the
network-assisted TBS method when the procedure is initiated by the E-SMLC.
Figure 8.9.3.2.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the TBS assistance
data defined in clause 8.9.2.2.
##### 8.9.3.2.2 UE initiated Assistance Data Transfer
Figure 8.9.3.2.2-1 shows the Assistance Data Transfer operations for the
network-assisted TBS method when the procedure is initiated by the UE.
Figure 8.9.3.2.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain TBS assistance data is desired (e.g., in
case the UE requires its own location with autonomous self location or as part
of a positioning procedure when the E-SMLC provided assistance data are not
sufficient for the UE to fulfil the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific TBS assistance data is requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.10 Motion sensor positioning method
### 8.10.1 General
Motion sensors can be used to estimate the location of the UE. With the
combination of other positioning methods (hybrid) a more accurate position of
the UE can be computed. UE using one or more motion sensors provides the
movement information. The movement information comprises displacement results
estimated at an ordered series of points.
The positioning modes supported are UE-Assisted, UE-Based, and Standalone _._
### 8.10.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position and/or
measurement data) that may be transferred between E-UTRAN elements.
#### 8.10.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The supported
information elements are given in Table 8.10.2.1-1.
Table 8.10.2.1-1: Sensor Measurement Information that may be transferred from
UE to the E-SMLC
+--------------------------+-------------+------------+ | Information | UE‑assisted | UE-based/ | | | | | | | | Standalone | +==========================+=============+============+ | Displacement Timestamp | Yes | Yes | +--------------------------+-------------+------------+ | Displacement Information | Yes | Yes | +--------------------------+-------------+------------+ | Reference Position | Yes | Yes | +--------------------------+-------------+------------+ | Reference Time | Yes | Yes | +--------------------------+-------------+------------+
##### 8.10.2.1.1 UE-assisted, UE-based, Standalone mode
In the _UE-assisted_ , UE-Based, and Standalone mode, the UE reports,
displacement information, displacement timestamp, reference position and
reference time stamp.
##### 8.10.2.1.2 UE Displacement and Movement Information
The UE may report movement and displacement information which comprises an
ordered series of direction and distance travelled by the target device and
the time intervals when these measurements are taken.
#### 8.10.2.2 Information that may be transferred from the E-SMLC to the UE
In this release, no information, e.g. assistance data is transferred to the
UE.
### 8.10.3 Motion Sensors Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request additional
sensor measurements or to enable the UE to provide sensor measurements to the
E-SMLC for position calculation.
#### 8.10.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.10.3.1-1 shows the Location Information Transfer operations when the
procedure is initiated by the E-SMLC.
Figure 8.10.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of motion sensor positioning. This request includes positioning
instructions such as the positioning mode, specific requested UE measurements
if any, and quality of service parameters (accuracy, response time).
(2) The UE performs the requested measurements. The UE sends an LPP Provide
Location Information message to the E-SMLC before the Response Time provided
in step (1) elapsed. If the UE is unable to perform the requested
measurements, or if the Response Time provided in step 1 elapsed before any of
the requested measurements have been obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location Information
which includes a cause indication for the not provided location information.
#### 8.10.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.10.3.2-1 shows the Location Information delivery operations for
motion sensor method when the procedure is initiated by the UE.
Figure 8.10.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE sensor measurements or
location estimate already available at the UE.
###### ## Annex A (informative): Definitions and Terms
No further definitions and terms are currently described beyond those defined
in clause 3.
###### ## Annex B (informative): Use of LPP with SUPL
The design goal of LPP is to enable it to be used in user plane location
solutions such as OMA SUPL ([17], [18]) and this informative annex shows how
LPP can be used in SUPL 2.0.
# B.1 SUPL 2.0 Positioning Methods and Positioning Protocols
The following table shows how the 3GPP positioning protocols are supported in
SUPL 2.0.
Table B.1-1: SUPL support of positioning methods
+-----------------------+-------------------+-----------+-------+ | Positioning Protocol: | RRLP | RRC | LPP | | | | | | | | (GSM/GPRS/WCDMA/\ | (WCDMA) | (LTE) | | | LTE/WLAN/WiMAX) | | | +=======================+===================+===========+=======+ | Positioning Method: | | | | +-----------------------+-------------------+-----------+-------+ | A-GPS (A-GANSS) SET | | | | | Assisted | | | | +-----------------------+-------------------+-----------+-------+ | A-GPS (A-GANSS) SET | | | | | Based | | | | +-----------------------+-------------------+-----------+-------+ | Autonomous GPS/GANSS | | | | +-----------------------+-------------------+-----------+-------+ | Enhanced Cell ID | | | | +-----------------------+-------------------+-----------+-------+ | Enhanced Observed | (GSM only) | NA | NA | | Time Difference | | | | | (E-OTD) | | | | +-----------------------+-------------------+-----------+-------+ | Observed Time | NA | | | | Difference of Arrival | | | | | (OTDOA) ^NOTE\ 1^ | | | | +-----------------------+-------------------+-----------+-------+ | Sensor | NA | ^NOTE\ 3^ | | +-----------------------+-------------------+-----------+-------+ | WLAN | NA | | | +-----------------------+-------------------+-----------+-------+ | Bluetooth | NA | | | +-----------------------+-------------------+-----------+-------+ | TBS ^NOTE\ 2^ | NA | | | +-----------------------+-------------------+-----------+-------+ | NOTE 1: This includes | | | | | TBS positioning based | | | | | on PRS signals, which | | | | | is only supported in | | | | | LPP (LTE). | | | | | | | | | | NOTE 2: TBS | | | | | positioning based on | | | | | MBS signals. | | | | | | | | | | NOTE 3: Only | | | | | barometric pressure | | | | | sensor is supported. | | | | +-----------------------+-------------------+-----------+-------+
NOTE: What is referred to in the SUPL specifications as \"Enhanced Cell ID is
a UE-Assisted positioning mode where the neighbouring cell measurements are
carried at the SUPL layer (in the SUPL_POS_INIT for example). For LTE, the
ASN.1 container for this mode is defined as follows:
LteCellInformation ::= SEQUENCE {
cellGlobalIdEUTRA CellGlobalIdEUTRA,
physCellId PhysCellId,
trackingAreaCode TrackingAreaCode,
rsrpResult RSRP-Range OPTIONAL,
rsrqResult RSRQ-Range OPTIONAL,
ta INTEGER(0..1282) OPTIONAL, -- Currently used Timing Advance value (N_TA/16
as per [3GPP 36.213])
measResultListEUTRA MeasResultListEUTRA OPTIONAL, --Neighbour measurements
...,
earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37
earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37
rsrpResult-ext RSRP-Range-Ext OPTIONAL,
rsrqResult-ext RSRQ-Range-Ext OPTIONAL,
rs-sinrResult RS-SINR-Range OPTIONAL,
servingInformation5G ServingInformation5G OPTIONAL
}
MeasResultListEUTRA ::= SEQUENCE (SIZE (1..maxCellReport)) OF MeasResultEUTRA
MeasResultEUTRA ::= SEQUENCE {
physCellId PhysCellId,
cgi-Info SEQUENCE {
cellGlobalId CellGlobalIdEUTRA,
trackingAreaCode TrackingAreaCode
} OPTIONAL,
measResult SEQUENCE {
rsrpResult RSRP-Range OPTIONAL, -- Mapping to measured values
rsrqResult RSRQ-Range OPTIONAL, -- in 3GPP TS 36.133
...,
earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37
earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37
rsrpResult-ext RSRP-Range-Ext OPTIONAL,
rsrqResult-ext RSRQ-Range-Ext OPTIONAL,
rs-sinrResult RS-SINR-Range OPTIONAL,
neighbourInformation5G NeighbourInformation5G OPTIONAL
}
}
It should be noted that in addition to the container provided by SUPL itself,
any E-CID positioning methods defined within LPP proper can be supported in
SUPL, via tunneling LPP as shown in this annex (in the same manner that A-GNSS
and OTDOA are supported).
# B.2 SUPL 2.0 and LTE Architecture
This clause describes interworking between the control-plane LCS architecture,
as defined in the main body of this specification, and SUPL 2.0. The E-SMLC
either includes or has an interface to an SPC function as defined in OMA SUPL
V2.0 ([17], [18]). It can thus provide a consistent set of positioning methods
for deployments utilizing both control-plane and user-plane.
The interworking does not enable use of user-plane signalling for part of a
control-plane positioning session. The user plane in the interworking here is
not intended as an alternative path for control-plane signalling that would be
needed between UE and eNodeB for mechanisms such as A-GPS in a standalone
C-plane solution.
This interworking does enable the SPC to retrieve measurements (e.g., GNSS-to-
RAN time relations) from eNodeB.
The underlying architecture is shown in Figure B.2-1. Note that, for
interworking between user-plane and control-plane positioning, no new
interfaces need to be defined as compared to those in the figure, assuming the
SPC is either integrated in the E-SMLC or attached to it with a proprietary
interface.
Figure B.2-1: System architecture underlying positioning
The Lup and Llp interfaces shown in this architecture are part of the user-
plane solution only and are not required for control-plane positioning. The
SLs interface is required for both control-plane and user-plane positioning,
and needs to be capable of querying eNode Bs for information not related to a
UE connection.
SUPL, including the use of LPP over SUPL, takes place as part of the general
user-plane protocol stack shown in Figure B.2-2. SUPL occupies the application
layer in the stack, with LPP (or another positioning protocol) transported as
another layer above SUPL.
Figure B.2-2: User-plane protocol stack
# B.3 LPP session procedures using SUPL
This clause indicates how an LPP session relates to the SUPL structure. Figure
B.3-1 shows how SUPL and LPP can be combined within a SUPL positioning
session. Step 4 here is repeated to exchange multiple LPP messages between the
SLP and SET.
Figure B.3-1: LPP session over SUPL
For positioning operations which take place entirely within an LPP session
(step 4 in Figure B.3-1), the flow of LPP messages can be the same as in the
control-plane version of LPP; the role of the (LPP) target is taken by the
target SET, and that of the (LPP) server by the SLP. An example LPP flow,
including exchange of capabilities, request and delivery of assistance data,
and request and delivery of positioning information, is shown in Figure B.3-2.
Figure B.3-2: LPP session over SUPL
# B.4 Procedures combining C-plane and U-plane operations
Since SUPL is by definition carried over the user plane, it is not really
applicable to operations terminating at the eNode B. Thus, in some cases where
information from the eNode B and UE needs to be merged for a positioning
operation, SUPL operations must take place in combination with control-plane
procedures over LPPa.
This situation could arise in the case of UE-assisted OTDOA, for example, in
which the SLP needs to provide the UE (in a SUPL session) with assistance data
supplied by various eNode Bs. This clause uses a UE-assisted OTDOA positioning
operation as a running example.
Although the positioning server in this operation is of course the SLP, the
existence of the Llp interface means that the SLP can communicate freely with
the E-SMLC via the SPC. In particular, this means that assistance data that
were delivered to the E-SMLC via LPPa can be transferred over to the SLP for
delivery to the UE via LPP over SUPL.
Several ways to realise this general behaviour are possible. In the simplest
case, the E-SMLC could be supplied with the necessary assistance data in
advance, so that they can be supplied to the SLP without any actual LPPa
procedures taking place in real time (and possibly even before the positioning
transaction begins).
Figure B.4-1: Transfer of OTDOA assistance data to UE via SUPL
In the event that the E-SMLC does not have the required assistance data
available, however, it would need to retrieve them from appropriate eNode Bs
once it was made aware that they were needed.
Figure B.4-2: Transfer to the UE via SUPL of OTDOA assistance data not already
available at the E-SMLC
In both cases, it should be noted that the retrieval of the assistance data is
transparent to the UE and to the actual SUPL session. This model is parallel
to the approach used with A-GNSS, in which assistance data such as satellite
ephemerides are retrieved from sources entirely external to the cellular
network. For purposes of LPP over SUPL, the delivery of assistance data _to
the SLP_ can be looked on as an independent external process.
The delivery of assistance data to the UE, however, takes place through the
same mechanisms as control-plane LPP, transported through SUPL.
#