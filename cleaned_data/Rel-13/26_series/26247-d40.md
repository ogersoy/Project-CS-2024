# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
The 3GPP transparent end-to-end packet-switched streaming service (PSS)
specification consists of seven 3GPP TSs: 3GPP TS 22.233 [1], 3GPP TS 26.233
[2], 3GPP TS 26.234 [3], 3GPP TS 26.244 [4], 3GPP TS 26.245 [5], 3GPP TS
26.246 [6], and the present document.
The TS 22.233 contains the service requirements for the PSS. The TS 26.233
provides an overview of the PSS. The TS 26.234 provides the details of the
protocols and codecs used by the PSS. The TS 26.244 defines the 3GPP file
format (3GP) used by the PSS and MMS services. The TS 26.245 defines the Timed
text format used by the PSS and MMS services. The TS 26.246 defines the 3GPP
SMIL language profile. The present document defines Progressive Download and
Dynamic Adaptive Streaming over HTTP.
The TS 26.244, TS 26.245 and TS 26.246 start with Release 6. Earlier releases
of the 3GPP file format, the Timed text format and the 3GPP SMIL language
profile can be found in TS 26.234.
The TS 26.247 starts with Release 10. Earlier releases of Progressive Download
and Dynamic Adaptive Streaming over HTTP can be found in TS 26.234.
# Introduction
Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)
collects a set of technologies how progressive download and adaptive streaming
of continuous media may be carried out exclusively over HTTP.
# 1 Scope
The present document specifies Progressive Download and Dynamic Adaptive
Streaming over HTTP (3GP-DASH). This specification is part of Packet-switched
Streaming Service (PSS). HTTP-based progressive download and dynamic adaptive
streaming are separated from TS 26.234 to differentiate from RTP-based
streaming that is maintained in TS 26.234. HTTP-based progressive download and
dynamic adaptive streaming may be deployed independently from RTP-based PSS,
for example by using standard HTTP/1.1 servers for hosting data formatted as
defined in the present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 22.233: \"Transparent End-to-End Packet-switched Streaming
Service; Stage 1\".
[2] 3GPP TS 26.233: \"Transparent end-to-end Packet-switched Streaming service
(PSS); General description\".
[3] 3GPP TS 26.234: \"Transparent end-to-end packet switched streaming service
(PSS); Protocols and codecs\".
[4] 3GPP TS 26.244: \"Transparent end-to-end packet switched streaming service
(PSS); 3GPP file format (3GP)\".
[5] 3GPP TS 26.245: \"Transparent end-to-end packet switched streaming service
(PSS); Timed text format\".
[6] 3GPP TS 26.246: \"Transparent end-to-end packet switched streaming service
(PSS); 3GPP SMIL Language Profile\".
[7] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[8] IETF STD 0007: \"Transmission Control Protocol\", Postel J., September
1981.
[9] IETF RFC 2616: \"Hypertext Transfer Protocol -- HTTP/1.1\", Fielding R. et
al., June 1999.
[10] Open Mobile Alliance, Service and Content Protection for Mobile Broadcast
Services, Approved Version 1.0, February 2009.
[11] ISO/IEC 14496-12:2012 \| 15444-12:2012 \"Information technology - Coding
of audio-visual objects - Part 12: ISO base media file format\" \|
\"Information technology - JPEG 2000 image coding system - Part 12: ISO base
media file format\".
[12] IETF RFC 2818: \"HTTP Over TLS\", E. Rescorla, May 2000.
[13] IETF RFC 5646: \"Tags for Identifying Languages\", A. Phillips, M. Davis,
September 2009.
[14] (void)
[15] Open Mobile Alliance: \"DRM Content Format V 2.0\".
[16] Open Mobile Alliance: \"DRM Content Format V 2.1\".
[17] IETF RFC 3986: \"Uniform Resource Identifiers (URI): Generic Syntax\",
Berners-Lee T., Fielding R. and Masinter L., January 2005.
[18] IETF RFC 1952: \"**GZIP file format specification\" version 4.3,** P.
Deutsch, May 1996.
[19] IETF RFC 1738: \"Uniform Resource Locators (URL)\", December 1994.
[20] (void)
[21] (void)
[22] OMA-ERELD-DM-V1_2-20070209-A: \"Enabler Release Definition for OMA
Device\ +Management, Approved Version 1.2\"
[23] 3GPP TS 33.310: \"Network Domain Security (NDS); Authentication Framework
(AF)\".
[24] IETF RFC 2045: \"Multipurpose Internet Mail Extensions (MIME) Part One:
Format of Internet Message Bodies\".
[25] IETF RFC 2231: \"MIME Parameter Value and Encoded Word Extensions:
Character Sets, Languages, and Continuations\".
[26] IETF RFC 6381: \"The \'Codecs\' and \'Profiles\' Parameters for
\"Bucket\" Media Types,\" August 2011.
[27] Void.
[28] IEEE 1003.1-2008, IEEE Standard for Information Technology - Portable
Operating System Interface (POSIX), Base Specifications, Issue 7
[29] IETF RFC 4337, \"MIME Type Registration for MPEG-4,\" March 2006
[30] IETF RFC 3023, \"XML Media Types,\" January 2001.
[31] 3GPP TS 23.203: \"Policy and charging control architecture\".
[32] 3GPP TS 29.213: \"Policy and Charging Control signalling flows and
Quality of Service (QoS) parameter mapping\".
[33] 3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".
[34] void
[35] ITU-T Recommendation H.264 (04/2013): \"Advanced video coding for generic
audiovisual services\".
[36] 3GPP TR 26.946: \"Multimedia Broadcast/Multicast Service (MBMS); User
service guidelines\".
[37] IETF RFC 3629: \"UTF-8, a transformation format of ISO 10646,\" November
2003.
[38] IETF RFC 4288: \"Media Type Specifications and Registration Procedures,\"
December 2005.
[39] IETF RFC 4648: \"The Base16, Base32, and Base64 Data Encodings,\" October
2006.
[40] IETF RFC 5234: \"Augmented BNF for Syntax Specifications: ABNF\", Crocker
D. and Overell P., January 2008.
[41] 3GPP TR 26.905: \"Mobile stereoscopic 3D video\".
[42] 3GPP TS 26.346: \" Multimedia Broadcast/Multicast Service
(MBMS);Protocols and codecs\"
[43] ISO/IEC 23009-1:2014/Amd. 1:2015/Cor.1:2015\" Information technology --
Dynamic adaptive streaming over HTTP (DASH) -- Part 1: Media presentation
description and segment formats\".
[44] ISO/IEC 23009-3 \"Information technology -- Dynamic adaptive streaming
over HTTP (DASH) -- Part 3: Implementation and Deployment Guidelines\".
[45] ISO/IEC 23009-2 \" Information technology -- Dynamic adaptive streaming
over HTTP (DASH) -- Part 2: Conformance and Reference Software\".
[46] 3GPP TR 26.938: \"Packet-switched Streaming Service (PSS); Improved
support for dynamic adaptive streaming over HTTP in 3GPP\".
[47] ISO/IEC 23001-7:2015: \"Information technology -- MPEG systems
technologies -- Part 7: Common encryption in ISO base media file format
files\".
> [48] IETF RFC 7164, \"RTP and Leap Seconds\", March 2014.
[49] 3GPP TS 26.116: \"Television (TV) over 3GPP services; Video profiles\".
# 3 Definitions, abbreviations and conventions
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [7], in ISO/IEC 23009-1 [43], section 3.1, and the following apply.
A term defined in the present document takes precedence over the definition of
the same term, if any, in TR 21.905 [7].
**frame-packed stereoscopic 3D video** : a video consisting of two views in
which both views were packed into a single stream before compression.
**multiview stereoscopic 3D video** : a video consisting of two views packed
into a single stream during compression.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[7] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [7].
3GP 3GPP file format
3GP-DASH 3GPP Dynamic Adaptive Streaming over HTTP
AHS Adaptive HTTP Streaming
AVC Advanced Video Coding
DM Device Management
DRM Digital Rights Management
HSD HTTP Streaming and Download
HTML Hypertext Markup Language
HTTP Hypertext Transfer Protocol
HTTPS Hypertext Transfer Protocol Secure
IDR Instantaneous Decoding Refresh
MPD Media Presentation Description
MPEG-2 TS Moving Picture Experts Group Transport Stream
MIME Multipurpose Internet Mail Extensions
OMA Open Mobile Alliance
PDCF Packetized DRM Content Format
PSS Packet-switched Streaming Service
QoE Quality-of-Experience
RFC Request For Comments
RTP Real-time Transport Protocol
SMIL Synchronised Multimedia Integration Language
TLS Transport Layer Security
URI Uniform Resource Identifier
URL Uniform Resource Locator
URN Uniform Resource Name
UTF-8 Unicode Transformation Format (the 8-bit form)
XML eXtensible Markup Language
## 3.3 Conventions
The naming conventions of ISO/IEC 23009-1 [43], clause 3.3 apply in this
specification.
# 4 Overview
The present document specifies Progressive Download and Dynamic Adaptive
Streaming over HTTP (3GP-DASH) for continuous media. The features are
separated from the umbrella specification TS 26.234 [3] to differentiate from
RTP-based streaming that is specified and maintained in TS 26.234. Services
relying exclusively on these features may be deployed independently from RTP-
based PSS servers, for example by using standard HTTP/1.1 servers for hosting
the services.
The specification covers the following aspects:
\- System Description: describes the relationship to the PSS architecture and
refines the architecture, interfaces and protocols that are defined in this
specification.
\- Progressive Download over HTTP.
\- 3GPP Dynamic Adaptive Streaming over HTTP (3GP-DASH) provides an overview
of the architecture, the\ formats and the models that build the basis for 3GP-
DASH. Also, 3GP-DASH Profiles provide identifiers and refers to a set of
specific restrictions in this or other specifications.
\- DASH - Media Presentation describes the data model of a Media Presentation.
It also provides an overview on elements and attributes that may be used to
describe components and properties of a media presentation in a\ Media
Presentation Description (MPD).
\- DASH - Usage of the 3GP file format defines how segments can be formed
based on the 3GP file format.
\- Quality-of-Experience for Progressive Download and 3GP-DASH.
\- Normative annexes for MPD schema (Annex B), Descriptor Scheme Definitions
(Annex C), OMA DM QoE Management Object (Annex F), File format extensions for
3GPP DASH support (Annex G) and MIME Type Registration for MPD (Annex H). -
Informative annexes for Client Behaviour (Annex A), MPD Examples (Annex D),
and Mapping MPD structure and semantics to SMIL (Annex E).
Note: Several of the Annexes refer partially or exclusively to ISO/IEC 23009-1
[43].
# 5 System Description
## 5.1 Overview
Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)
enables to provide services to deliver continuous media content over Hypertext
Transfer Protocol (HTTP) in a sense that all resources that compose the
service are accessible through HTTP-URLs and the HTTP/1.1 protocol as
specified in RFC 2616 [9] may be used to deliver the metadata and media data
composing the service. This enables that standard HTTP servers and standard
HTTP caches can be used for hosting and distributing continuous media content.
Figure 1 shows the architecture for services using progressive download and
Figure 2 shows the architecture for services using 3GP-DASH.
The present document deals with the specification of interfaces between the
Client and the Server. Specifically, it defines the formats that may be
delivered exclusively over the HTTP interface to enable progressive download
and streaming\ services.
{width="6.16875in" height="1.2875in"}
Figure 1: Architecture for Progressive Download over HTTP
Services using the features described in this specification may be deployed
within PSS as specified in TS 26.233 [2] and TS 26.234 [3]. In this case the
Progressive Download/3GP-DASH Server may be a sub-function of the PSS server
and the Progressive Download/3GP-DASH client may be a sub-function of the PSS
client.
{width="6.048611111111111in" height="1.261111111111111in"}
Figure 2: Architecture for 3GP-DASH
Services using the features defined in this specification may also be deployed
independent of the PSS servers and\ clients. In this case the Progressive
Download/3GP-DASH client shall support the formats and codecs according to
this specification.
Access to services based on the features defined in the present document is
introduced in clause 5.2.
The protocol support for services using the features defined in this
specification is provided in clause 5.3.
Clients supporting progressive download-based services shall support the
features and formats as specified in clause 6 of this specification.
Clients supporting 3GP-DASH shall support the features and formats as
specified in clause 7 of this specification.
Clients supporting QoE Metrics and Reporting shall support the features as
specified in clause 10 of this specification.
## 5.2 Service Access
Service access refers to the method by which a Client initially accesses the
service. Service access for services based in the specification can be
achieved e.g. by a Media Presentation Description or a URL to the media file.
The service access URL can be made available to a client in many different
ways. Clients supporting services based on the features in this specification
shall be able to access services that are provided through an HTTP-URL.
However, it is out of the scope of this specification to mandate any specific
mechanism. A preferred way may be to embed URLs for service establishment
within HTML pages.
## 5.3 Protocols
### 5.3.1 General
Progressive Download and 3GP-DASH clients shall comply with a _client_ as
specified in RFC 2616 [9]. The resource hosting the 3GP files and DASH
Segments shall comply with a _server_ as specified in RFC 2616 [9].
Progressive Download and 3GP-DASH clients should use the HTTP GET method or
the HTTP partial GET method, as specified in RFC 2616 [9], clause 9.3, to
access media offered at HTTP-URLs.
Figure 3 shows a protocol stack for services in the context of this
specification. 3GP Files in progressive download as well as Segments based on
the 3GPP File Format shall be accessible through HTTP.
{width="3.220833333333333in" height="2.3472222222222223in"}
Figure 3: Overview of the protocols stack
Transport security in Progressive Download and Dynamic Adaptive Streaming over
HTTP (3GP-DASH) is achieved using the HTTPS (Hypertext Transfer Protocol
Secure) specified in RFC 2818 [12] and TLS as specified in TLS profile of
Annex E in TS 33.310 [23]. In case secure delivery is desired, HTTPS should be
used to authenticate the server and to ensure secure transport of the content
from server to client.
NOTE 1: The use of HTTPS for delivering Media Segments may inhibit caching at
proxies and add overhead at the server and the client.
### 5.3.2 Partial File Handling
In certain cirumstances, for example in the case of MBMS download delivery of
3GP-DASH content, a file or segment may only be partially available on the
HTTP server.
If the application, i.e. the 3GP file format client or the 3GP-DASH client
supports the handling of partial files, it shall signal its capability using
the partial-file-accept request defined in TS26.346 [42], clause 7.9.2.1, i.e.
using the Accept header application/3gpp-partial in combination with e.g. an
HTTP GET request. If the application uses a partial-file-accept request, then
the application shall also be able to handle the request response as defined
in TS26.346 [42], clause 7.9.2.2.
# 6 Progressive Download over HTTP
## 6.1 General
As an alternative to conventional streaming, a client may download, typically
through HTTP, a media file that encapsulates continuous media and may play the
media from the local storage. A PSS client shall support progressive download
and playout of 3GP files [4] as specified in the remainder of this clause.
The media file encapsulating the continuous media is accessed directly by
issuing one or more HTTP GET or partial GET requests to the referenced media
file. An example of a valid URL is http://example.com/morning_news.3gp.
## 6.2 Progressive Download
Progressive download uses normal HTTP download using HTTP GET or partial GET
requests. The differences between regular download and Progressive Download
are that 1) the content may be authored as progressively downloadable, and 2)
the terminal recognises that the content is suitable for progressive download.
A client downloading continuous media may decide to start playout of the
encapsulated media data before the download of the media file is completed.
## 6.3 3GPP File Format Profiles
The following profiles of the 3GPP file format in TS 26.244 [4] shall be
supported by clients supporting Progressive Download over HTTP:
\- Basic profile, and
\- Progressive-download profile.
# 7 3GPP Dynamic Adaptive Streaming over HTTP
## 7.1 System Description
The 3GPP Dynamic Adaptive Streaming over HTTP (3GP-DASH) specified in this
specification provides streaming services over HTTP. 3GP-DASH is a set of
profiles of ISO/IEC 23009-1 [43], also known as MPEG-DASH, with some
extensions. For this it specifies XML and binary formats that enable
delivering content from standard HTTP servers to an HTTP-Streaming client and
enables caching content by standard HTTP caches.
The specification for 3GP-DASH primarily defines two formats:
1) The Media Presentation Description (MPD) describes a _Media Presentation_ ,
i.e. a bounded or unbounded presentation of media content. In particular, it
defines formats to announce resource identifiers for _Segments_ and to provide
the context for these identified resources within a Media Presentation. For
3GP-DASH, the resource identifiers are exclusively HTTP-URLs possibly combined
with a byte range.
2) The Segment formats specify the formats of the entity body of the HTTP
response to an HTTP GET request or an HTTP partial GET request with the
indicated byte range through HTTP/1.1 as defined in RFC 2616 [9] to a resource
identified in the MPD. Segments typically contain efficiently coded media data
and metadata according to or aligned with common media formats.
The MPD provides sufficient information for a client to provide a streaming
service to the user by accessing the Segments through the protocol specified
in the scheme of the defined resources, in the context of this specification
exclusively HTTP/1.1. Such a client is referred to as a 3GP-DASH client in the
remainder of the present document. However, this specification does not
provide a normative definition for such a client. An informative client model
to illustrate the formats defined in this specification is provided in section
7.2. An informative example client behaviour description is provided in Annex
A of ISO/IEC 23009-1 [43].
Figure 7-1 shows an architecture in which the formats defined in this
specification are typically used. Boxes with solid lines indicate devices that
are mentioned in this specification as they host or process the formats
defined in this specification whereas dashed boxes are conceptual or
transparent. This specification deals with the definition of formats that are
accessible on the interface to the 3GP-DASH client, indicated by the solid
lines. Any other formats or interfaces are not in scope of this specification.
In the considered deployment scenario, it is assumed that the 3GP-DASH client
has access to an MPD. The MPD provides sufficient information for the 3GP-DASH
client to provide a streaming service to the user by requesting Segments from
an HTTP server and demultiplexing, decoding and rendering the included media
streams.
{width="6.688888888888889in" height="2.9090277777777778in"}
Figure 7-1: System Architecture for 3GP-DASH
The normative aspects of 3GP-DASH formats are defined by
\- the profiles defined in clause 7.3.
\- the DASH Media Presentation as defined in clause 8.
\- the usage of the 3GPP file format for DASH as defined in clause 9.
The clauses mentioned above may refer to normative aspects in clause 10 on
Quality-of-Experience, normative Annexes B and H as well as ISO/IEC 23009-1
[43].
## 7.2 3GP-DASH Client Model
The design of the formats defined in this specification is based on the
informative client model as shown in Figure 7-2. The figure illustrates the
logical components of a conceptual 3GP-DASH client model. In this figure the
3GP-DASH Access Engine receives the Media Presentation Description (MPD),
constructs and issues requests and receives Segments or parts of Segments. In
the context of this standard, the output of the DASH Access Engine consists of
media in container formats according to the ISO/IEC 14496-12 ISO Base Media
File Format [11] and specifically the 3GP file format [4]. In addition, timing
information is provided that maps the internal timing of the media to the time
line of the Media Presentation.
{width="5.721527777777778in" height="1.7180555555555554in"}
Figure 7-2: 3GP-DASH client Model
## 7.3 3GP-DASH Profiles
### 7.3.1 General
Profiles of 3GP-DASH are defined so as to enable interoperability and the
signaling of the use of features etc. A profile refers to a set of specific
restrictions. Those restrictions might be on features of the MPD as defined in
clause 8 of this specification, Segment formats as for example defined in
clause 9 of this specification, usage of the network, codec(s) used, content
protection formats, or on quantitative measures such as bit-rates, segment
lengths, screen size, and so on. Profiles defined in this specification define
restrictions on features of this specification, but may additionally impose
restrictions on other aspects of media delivery.
NOTE A profile can also be understood as permission for 3GP-DASH clients that
only implement the features required by the profile to process the Media
Presentation. However, as 3GP-DASH client operation is not specified
normatively, it is also unspecified how a 3GP-DASH client conforms to a
particular profile. Hence, profiles merely specify restrictions on MPD and
Segments rather than DASH client behaviour.
For details on the use of profiles, refer to ISO/IEC 23009-1 [43], section
8.1.
### 7.3.2 3GPP Adaptive HTTP Streaming (Release-9 AHS)
Release-9 Adaptive HTTP Streaming as defined in TS 26.234 [3] Release-9,
clause 12 is not a profile of this specification. Rel-9 AHS uses a different
namespace \"urn:3GPP:ns:PSS:AdaptiveHTTPStreamingMPD:2009\" and a different
MIME type signalling \"application/3gpp-ahs+xml\" for the MPD. However, a
Media Presentation may be defined such that segments complying with the
segment formats in TS 26.234 [3] Release-9, clause 12, also comply with
segment formats for this specification.
### 7.3.3 3GP-DASH Release-10 Profile
#### 7.3.3.1 Introduction
The 3GP-DASH Release-10 profile is identified by the URN
"urn:3GPP:PSS:profile:DASH10".
This profile includes all features defined in the Release-10 version of this
specification in clauses 7.3.6 (media codecs), 7.3.7 (content protection), 8
(Media Presentation Description), 9 (File Format) and 10 (QoE).The \@mimeType
attribute of each Representation shall be provided according to RFC4337.
Additional parameters may be added according to RFC6381 [26].
### 7.3.4 3GP-DASH Release 11 multiview stereoscopic 3D video profile
The 3GP-DASH Release 11 multiview stereoscopic 3D video profile is identified
by the URN "urn:3GPP:PSS:profile:DASH11:MS3D".
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
This profile includes all features defined in clauses 7.3.7, 8, 9 and 10.
Clients that support 3GP-DASH Release 11 multiview stereoscopic 3D video
profile shall support multiview stereoscopic 3D video as specified in clause
7.4 of TS 26.234 [3]. For any other particular continuous media type, the
corresponding media decoders are specified in TS 26.234 [3], clause 7.2 for
speech, 7.3 for audio, 7.4 for video, 7.9 for timed text and 7.11 for timed
graphics. Additionally, the following contraints apply for multiview
stereoscopic 3D video bitstreams, if present in a media presentation:
The DASH multiple views scheme as defined in 5.8.5.6 of ISO/IEC 23009-1 [43]
shall be used in the MPD.
One of the following shall be true:
\- The base view of the stereoscopic multiview bitstream shall be a
complementary representation and the non-base view of the bitstream shall be a
dependent representation. The \@dependencyId attribute as specified in 5.3.5.2
of ISO/IEC 23009-1 [43] shall be used to indicate the complementary and
dependent representations.
\- The base view and the non-base view of the stereoscopic multiview bitstream
shall reside in the same representation. The SubRepresentation element shall
be used for the representation, and the base view and the non-base view shall
form separate sub-representations. The \@level and \@dependencyLevel
attributes within the SubRepresentation element shall be used. The Level
Assignment box shall be used. For each leaf segment index, that is, each
Segment Index box that indexes only subsegments but not other Segment index
boxes, there shall be exactly one Subsegment Index box.
### 7.3.5 3GP-DASH Release 11 frame-packed stereoscopic 3D video profile
The 3GP-DASH Release 11 frame-packed stereoscopic 3D video profile is
identified by the URN "urn:3GPP:PSS:profile:DASH11:FPS3D".
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
This profile includes all features defined in clauses 7.3.7, 8, 9 and 10.
Clients that support 3GP-DASH Release 11 frame-packed stereoscopic 3D video
profile shall support frame-packed stereoscopic 3D video as specified in
clause 7.4 of TS 26.234 [3]. For any other particular continuous media type,
the corresponding media decoders are specified in TS 26.234 [3], clause 7.2
for speech, 7.3 for audio, 7.4 for video, 7.9 for timed text and 7.11 for
timed graphics. Additionally, the following contraints apply for frame-packed
stereoscopic 3D video bitstreams, if present in a media presentation:
The FramePacking element as defined in clause 8.4.3.2 shall be used in the
MPD.
### 7.3.6 Media Codecs
For 3GP-DASH clients supporting a particular continuous media type, media
decoders are specified in TS 26.234 [3], clause 7.2 for speech, 7.3 for audio,
7.4 for video, 7.9 for timed text and 7.11 for timed graphics.
NOTE: If 3GP-DASH formatted content is delivered outside the scope of this
specification, additional constraints may apply on which media codecs can be
used. For example, TS26.346 [42] defines further restrictions when delivered
over MBMS.
### 7.3.7 Content Protection
3GP-DASH clients content protection may support OMA DRM 2.0 [15] or OMA DRM
2.1 [16]. Other content protection schemes may be supported. The
ContentProtection element in the MPD should be used to convey content
protection information.
When using OMA DRM V2.0 or OMA DRM V2.1 scheme for content protection, the
non-streamable Packetized DRM Content Format (PDCF) shall be used. An OMA-DRM
encrypted Representation shall include the brand "opf2". OMA-DRM [15] [16]
defines the procedures for acquiring the Rights Object from the Rights Issuer
to decrypt PDCF protected content. The scheme is identified by a
**ContentProtection** \@schemeIdUri set to \"urn:mpeg:dash:mp4protection\" and
the **ContentProtection** \@value shall include the version number; it starts
with \"odkm\", which is the scheme_type contained in the Scheme Type Box of
the PDCF file, followed by a \":\" and the scheme_version from the Scheme Type
Box of the PDCF file, encoded as up to 8 hexadecimal digits, where the leading
'0's may be omitted. For example, for OMA DRM2.0 the value could be
\"odkm:200\".
### 7.3.8 Partial File Handling
3GP-DASH clients should support partial-file-accept requests and partial file
responses as defined in clause 5.3.2. If 3GP-DASH clients support partial file
handling they shall use partial-file-accept requests as defined in TS26.346
[42], clause 7.9.2.1.
Without excluding other response options, as a response to a partial-file-
accept request using a regular HTTP GET request a 3GP-DASH client may
typically receive one of the following responses:
1) 200 OK with Content-Type set to the Media Type of the requested object
2) 200 OK with the Content-Type set to application/3gpp-partial and the
message format according to the definition in clause 7.9.2.2 of TS26.346 [42].
3) 416 Requested Range Not Satisfiable with the additional information
according to the definition in clause 7.9.2.2 of TS26.346 [42].
4) 404 Not Found
Case 1 is the regular response.
Guidelines for handling request responses according to case 4 from above are
provided in Annex A.7.
Guidelines for handling request responses 2 and 3 from above are provided in
Annex A.9.
### 7.3.9 3GP-DASH Enhanced Interoperability Point
The 3GP-DASH Enhanced interoperability point (IOP) is identified by the URN
"urn:3GPP:PSS:iop:DASH-enhanced".
This interoperability point includes all features defined in the Release-13
version of this specification in clauses 7.3.6 (media codecs), 7.3.7 (content
protection), 8 (Media Presentation Description), 9 (File Format), 10 (QoE), 11
(simple live) and 12 (ad insertion).
A DASH client conforms to the IOP by supporting at least the following
features:
\- All DASH-related features as defined in clause.8 of this document.
\- The file format related aspects defined in clause 9 of this document.
\- The QoE related aspects defined in clause 10 of this document.
\- The requirements and guidelines in clause 11 for simple live operation.
\- The requirements and guidelines in clause 12 for server-based ad insertion.
\- The following additional requirements:
\- Segment formats are based on ISO BMFF with fragmented movie files, i.e.
(Sub)Segments are encoded as movie fragments containing a track fragment as
defined in ISO/IEC 14496-12, plus the following constraints to make each movie
fragment independently decodable:
\- Default parameters and flags shall be stored in movie fragments ('tfhd' or
'trun' box) and not track headers ('trex' box)
\- The 'moof' boxes shall not use external data references, the flag 'default-
base-is-moof' shall also be set (aka movie-fragment relative addressing) and
data-offset shall be used, i.e. base-data-offset-present shall not be used
(follows ISO/IEC 23009-1).
\- Withing each Adaptation Set the following applies
\- Fragmented movie files are used for encapsulation of media data
\- (Sub)Segments are aligned to enable seamless switching
\- The following additional restrictions are applied.
\- IDR-like SAPs (i.e., SAPs type 2 or below) at the start of each
(Sub)Segment for simple switching.
\- Segments should have almost equal duration.
\- only non-multiplexed Representations should be used, i.e. each
Representation only contains a single media component.
\- Addressing schemes are restricted to
\- templates with number-based addressing
\- Subsegments with Segment Index. In this case either the \@indexRange
attribute shall be present or the **RepresentationIndex** element shall be
present. Only a single sidx box shall be present.
\- For DRM purposes, suitable DRM may be used together with common encryption
as defined in ISO/IEC 23001-7 [47]. If used, only the AES-128 CTR mode shall
be used. No specific requirements on a specific DRM system are added.
Content shall only be authored claiming conformance to this IOP if such a
client can properly play the content. In addition, the content shall follow
the mandatory aspects and should take into account the recommendations and
guidelines for content authoring documented in clauses 7.3.6 (media codecs),
7.3.7 (content protection), 8 (Media Presentation Description), 9 (File
Format), 10 (QoE), 11 (simple live) and 12 (ad insertion).
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
### 7.3.10 DASH in TeleVision (TV) over 3GPP Services
If used for TeleVision (TV) over 3GPP Services, 3GP-DASH clients shall support
the DASH features defined in clause 5 of TS 26.116 [49].
# 8 DASH - Media Presentation
## 8.1 Introduction
MPEG had initiated a standardization process to provide specifications to
enable scalable and flexible video distribution that addresses fixed and
mobile networks. The work had been in close coordination with a parallel
effort in 3GPP such that the two standards are aligned for broad industry
support across different access networks. 3GPP\'s Release-9 specification on
Adaptive HTTP Streaming (AHS) [3], section 12 completed in 2010 served as a
baseline for MPEG\'s DASH [43] (MPEG-DASH) as well as for 3GP DASH
specification in this document.
In addition to the format specification, MPEG provides additional supporting
material as part of MPEG-DASH, namely:
\- ISO/IEC 23009-2: Conformance and Reference software [44]
\- ISO/IEC 23009-3: Implementation and Deployment Guidelines [45]
Due to the close coordination in the development, 3GP-DASH can be viewed as a
set of profiles of MPEG-DASH, MPEG DASH for the segment format uses the ISO
base media file format [7]. In 3GPP, compatibility is achieved with the 3GP
file format [5].Dynamic Adaptive Streaming over HTTP (DASH) [43] specifies XML
and binary formats that enable delivery of media content from standard HTTP
servers to HTTP clients and enable caching of content by standard HTTP caches.
ISO/IEC 23009-1 [43] primarily defines two formats:
ï£§ The Media Presentation Description (MPD) describes a _Media Presentation_ ,
i.e. a bounded or unbounded presentation of media content. In particular, it
defines formats to announce resource identifiers for _Segments_ and to provide
the context for these identified resources within a Media Presentation. These
resource identifiers are HTTP-URLs possibly combined with a byte range.
ï£§ The Segment formats specify the formats of the entity body of the HTTP
response to an HTTP GET request or a partial HTTP GET with the indicated byte
range using HTTP/1.1 as defined in RFC 2616 to a resource identified in the
MPD. Segments typically contain efficiently coded media data and metadata
conforming to or at least closely aligned with common media formats.
For more details on DASH System description, please refer to ISO/IEC 23009-1
[43], clause 4.1.
For more details on DASH Client model, please refer to ISO/IEC 23009-1 [43],
clause 4.2.
For more details on DASH Data model overview, please refer to ISO/IEC 23009-1
[43], clause 4.3.
For more details on DASH Media Stream and Representation properties, please
refer to ISO/IEC 23009-1 [43], clause 4.5.
The format of the Media Presentation Description in 3GP-DASH is defined in
clause 8.2.
The format of the Segments in 3GP-DASH is defined in section 9.
Figure 8.1: Void
## 8.2 Media Presentation Description
### 8.2.1 General
The Media Presentation Description shall conform to a DASH Media Presentation
as defined in ISO/IEC 23009-1 [43], clause 5.2.Updates may also be done using
MPD delta files as defined in clause 8.5.2. The MIME type of an MPD delta file
is defined in Annex H.2.
### 8.2.2 Schema and 3GPP Extension
The overview of the XML schema of the MPD is provided in below. Specific
types, elements and attributes are introduced in the remainder of this clause.
The complete MPD schema is provided in Annex B of this specification. In case
of any inconsistencies the schema in Annex B takes precedence over the XML-
syntax snippets provided in this clause. For the normative schema refer to the
schema in Annex B.
The main schema is provided in Table 8-1 with the namespace
\"urn:mpeg:dash:schema:mpd:2011\". The 3GPP extension namespace is provided in
Table 8-2 with namespace \"urn:3GPP:ns:DASH:MPD-ext:2011\". An extension
schema for 3GPP in the context of the specification is referred to as
\"3gpp-2011.xsd\". Elements and attributes in the extension namespace are
preceded with \"x3gpp:\" throughout this document.
The MPD shall be authored such that, after unrecognized XML attributes or
elements are removed, the result is a valid XML document formatted according
to the XML schema provided in Annex B and that complies with this
specification. Namespaces may be used to extend functionalities. Therefore,
all extended elements and attributes added to a **Representation** in
particular shall be such that they can be safely ignored by 3GP-DASH clients.
NOTE 1: Based on this if DASH clients remove all XML attributes and elements
from the MPD in the DASH namespace (urn:mpeg:dash:schema:mpd:2011) and in
other namespaces that are not in the XML schema documented in Annex B, the MPD
results in a valid XML document which complies with this specification. The
DASH client can use such a resulting MPD for presentation of a conforming
Media Presentation.
Example for valid MPDs are provided in Annex D.
Table 8-1: Overview of XML schema of the MPD
+----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \Media Presentation Description\\ | | \\ | | \ | | \ | | | | \\ | | \ | | \\ | | \ | | | | ... | | | | \ | +----------------------------------------------------------------------+
Table 8-2: Overview of XML schema for 3GPP MPD extensions
+----------------------------------------------------------------------+ | \\ | | \ | | | | \\ | | \Extensions to Media Presentation Description for | | 3GPP\\ | | \ | | | | ... | | | | \ | +----------------------------------------------------------------------+
### 8.2.3 (void)
### 8.2.4 (void)
## 8.3 MPD Assembly
3GP-DASH inherits the ability from ISO/IEC 23009-1 [43] to enable to
distribute an MPD not as a fully contained document, but to assemble the
document by dereferencing certain links by using subset of W3C XLINK [20].
An MPD in 3GP DASH may reference a _remote element entities_ from within a
local MPD as defined in ISO/IEC 23009-1 [43], clause 5.5.
## 8.4 Hierarchical Data Model
### 8.4.1 General
A Media Presentation is described in the **MPD** element that is contained in
an MPD document formatted as defined in clause 8.2.
A Media Presentation consists of:
\- A sequence of one or more Periods described in 8.4.2.
\- Each Period contains one or more Adaptation Sets that itself contains one
or more Representations as described in clause 8.4.3. Clause 8.4.3 also
defines media content components and Sub-Representations.
\- Each Representation consists of one or more Segments. Segment Information
is introduced in clause 8.4.4. Segments contain media data and/or metadata to
access, decode and present the included media content.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**MPD** element used in 3GP-DASH may contain the following attributes and
elements:
\- **MPD** \@id
\- **MPD** \@type
\- **MPD** \@availabilityStartTime
**\- MPD** \@availabilityEndTime
**\- MPD** \@mediaPresentationDuration
**\- MPD** \@minimumUpdatePeriod
**\- MPD** \@timeShiftBufferDepth
**\- MPD** \@suggestedPresentationDelay
**\- MPD** \@maxSegmentDuration
**\- MPD** \@maxSubsegmentDuration
**\- MPD.ProgramInformation**
**\- MPD.UTCTiming**
**\- MPD.BaseURL**
**\- MPD.x3gpp:DeltaSupport**
**\- MPD.Location**
**\- MPD.Metrics**
Table 8-5: Void
Table 8-6: Void
### 8.4.2 Period
#### 8.4.2.1 General
A Media Presentation consists of one or more Periods as defined in ISO/IEC
23009-1 [43], clause 5.3.2. A Period is defined by **Period** element in the
**MPD** element.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**Period** element used in 3GP-DASH may contain the following attributes and
elements:
**\- Period** \@xlink:href
**\- Period** \@xlink:actuate
**\- Period** \@id
**\- Period** \@start
**\- Period** \@duration
**\- Period** \@bitstreamSwitching
**\- Period.BaseURL**
**\- Period.SegmentBase**
**\- Period.SegmentList**
**\- Period.SegmentTemplate**
**\- Period.AdaptationSet**
**\- Period.EventStream**
**\- Period.AssetIdentifier**
Table 8-7: Void
Table 8-8: Void
#### 8.4.2.2 Content Offering with Multiple Periods
Note: This text was adopted for Amd.3 of ISO/IEC 23009-1 [43], which is not
yet published. It is expected that the below text will be replaced with a
reference to ISO/IEC 23009-1 once Amd.3 is published.
Content with multiple Periods may be created for different reasons, for
example:
\- to enable splicing of content, for example for ad insertion,
\- to provide a synchronization point to avoid drift in segment numbering,
\- to remove or add certain Representations in an Adaptation Set,
\- to remove or add certain Adaptation Sets,
\- to add or remove content offering on certain CDNs,
\- to enable signalling of shorter segments, if produced by the encoder
Periods provide opportunities for resync, for ad insertion, for adding and
removing Representations, but if they are not used or only used for minor
changes, then continuous playout of the client is expected.
In certain circumstances the Media Presentation author offers content in the
next Period that is a continuation of the content in the previous Period,
possibly in the immediately following Period or in a later Period. The latter
case applies for example after an advertisement Period had been inserted. The
content provider may provide period-continuous Adaptation Sets as follows:
\- The Adaptation Set identifiers are the same across two Periods.
\- The sum of the value of the \@presentationTimeOffset and the presentation
duration of all Representations in one Adaptation Set are identical to the
value of the \@presentationTimeOffset of the associated Adaptation Set in the
next Period.
\- If Representations in both Adaptation Sets have the same value for \@id,
then they sshould have functionally equivalent Initialization Segments, i.e.
the Initialization Segment may be used to continue the play-out the
Representation.
From a client perspective, at Period boundary typically no continuity in terms
of content offering is ensured. The content may be offered with different
codecs, language attributes, different protection and so on. The client should
play the content continuously across Periods, but there may be implications in
terms of implementation to provide fully continuous and seamless playout. It
may be the case that at Period boundaries, the presentation engine needs to be
reinitialised, for example due to changes in formats, codecs or other
properties. This may result in a re-initialisation delay. Such a re-
initialisation delay should be minimized.
If the client presents media components of a certain Adaptation Set in one
Period, and if the following Period has an identical Adaptation Set
identifier, then the client is suggested to continue playing the content in
the associated Adaptation Set.
### 8.4.3 Adaptation Sets and Representations
#### 8.4.3.1 Overview
Periods are further subdivided as follows:
\- Each Period contains one or more groups. Groups consist of Adaptation Sets
as described in clause 8.4.3.3.
\- In case an Adaptation Set contains multiple media content components, then
each media content component is described individually as defined in clause
8.4.3.6.
\- Each Adaptation Set contains one or more Representations as described in
clause 8.4.3.4.
\- A Representation may contain one or more Sub-Representations as described
in clause 8.4.3.5.
\- Adaptation Sets, Representations and Sub-Representations share common
attributes and elements that are described in clause 8.4.3.2.
#### 8.4.3.2 Common Attributes and Elements
The elements **AdaptationSet, Representation** and **SubRepresentation** have
assigned common attributes and elements.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
following common attributes and elements may be used in 3GP-DASH:
\- \@profiles
\- \@width
\- \@height
\- \@frameRate
\- \@audioSamplingRate
\- \@mimeType
\- \@codecs
\- \@maximumSAPPeriod
\- \@startWithSAP
\- \@maxPlayoutRate
\- \@codingDependency
\- **FramePacking**
\- **AudioChannelConfiguration**
\- **ContentProtection**
\- **EssentialProperty**
\- **SupplementalProperty**
\- **InbandEventStream**
Table 8-9: Void
Table 8-10: Void
#### 8.4.3.3 Adaptation Set
An Adaptation Set is described by an **AdaptationSet** element.
**AdaptationSet** elements are contained in a **Period** element. An
Adaptation Set contains alternate Representations, i.e. only one
Representation within an Adaptation Set is expected to be presented at a time.
All Representations contained in one Adaptation Set represent the same media
content components and therefore contain media streams that are considered to
be perceptually equivalent.
The Adaptation Set shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.3.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**AdaptationSet** element used in 3GP-DASH may contain the following
attributes and elements:
\- \@xlink:href
\- \@xlink:actuate
\- \@id
\- \@group
**_\- CommonAttributesElements_**
\- \@lang
\- \@contentType
\- \@minBandwidth
\- \@maxBandwidth
\- \@minWidth
\- \@maxWidth
\- \@minHeight
\- \@maxHeight
\- \@minFrameRate
\- \@maxFrameRate
\- \@segmentAlignment
\- \@bitStreamSwitching
\- \@subsegmentAlignment
\- \@subsegmentStartsWithSAP
**\- Accessibility**
**\- Role**
**\- Rating**
**\- Viewpoint**
**\- ContentComponent**
**\- BaseURL**
**\- SegmentBase**
**\- SegmentList**
\- **SegmentTemplate**
\- **Representation**
Table 8-11: Void
Table 8-12: Void
#### 8.4.3.4 Representation
Representations are described by the **Representation** element.
**Representation** elements are contained in an **AdaptationSet** element.
A Representation is one of the alternative choices of the complete set or
subset of media content components comprising the media content during the
defined Period.
A Representation shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.4.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**Representation** element used in 3GP-DASH may contain the following
attributes and elements:
**\- Representation** \@qualityRanking
**\- Representation** \@mediaStreamStructureId
**\- Representation.CommonAttributesElements**
**\- Representation.BaseURL**
**Representation.SubRepresentation**
**\- Representation.SegmentBase**
**\- Representation.SegmentList**
**\- Representation.SegmentTemplate**
Table 8-13: Void
Table 8-14: Void
#### 8.4.3.5 Sub-Representation
Sub-Representations are embedded in regular Representations and are described
by the **SubRepresentation** element. **SubRepresentation** elements are
contained in a **Representation** element.
The **SubRepresentation** element describes properties of one or several media
content components that are embedded in the Representation. It may for example
describe the exact properties of an embedded audio component (language, codec,
etc.), an embedded sub-title (language) or it may describe some embedded lower
quality video layer (e.g. some lower frame rate, etc.).
A Sub-Representation shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.5.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**SubRepresentation** element used in 3GP-DASH may contain the following
attributes and elements:
**\- SubRepresentation** \@level
**\- SubRepresentation** \@dependencyLevel
**\- SubRepresentation** \@bandwidth
**\- SubRepresentation** \@contentComponent
**_\- CommonAttributesElements_**
Table 8-15: Void
Table 8-16: Void
#### 8.4.3.6 Content Component
Each Adaptation Set contains one or more media content components. The
properties of each media content component are described by a
**ContentComponent** element or may be described directly on the
**AdaptationSet** element if only one media content component is present in
the Adaptation Set. **ContentComponent** elements are contained in an
**AdaptationSet** element.
A Content Component shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.6.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**ContentComponent** element used in 3GP-DASH may contain the following
attributes and elements:
\- **ContentComponent** \@id
\- **ContentComponent** \@lang
\- **ContentComponent** \@contentType
\- **ContentComponent.Accessibility**
\- **ContentComponent.Role**
\- **ContentComponent.Rating**
\- **ContentComponent.Viewpoint**
Table 8-17: Void
Table 8-18: Void
### 8.4.4 Segments and Segment Information
A Segment is the smallest addressable unit described by an MPD and has a
defined format. Segment formats are defined in section 9. This clause defines
the MPD information for Segments.
Representations are assigned _Segment Information_ through the presence of the
elements **BaseURL** , **SegmentBase** , **SegmentTemplate** and/or
**SegmentList**. The _Segment Information_ provides information on the
location, availability and properties of all Segments contained in one
Representation. Specifically, information on the presence and location of
Initialization, Media, Index and Bitstream Switching Segments is provided.
Segment Information shall be provided as defined in ISO/IEC 23009-1 [43],
clause 5.3.9 using the elements **BaseURL** , **SegmentBase** ,
**SegmentTemplate** and/or **SegmentList.**
\- The duration of Segments shall be described by the \@duration attribute.
\- If the **SegmentTemplate** is used, then only the following identifiers as
defined in ISO/IEC 23009-1 [43], Table 16 may be used: _\$\$_ ,
_\$RepresentationID\$_ , _\$Number\$_ , and _\$Bandwidth\$_. The identifier
_\$Time\$_ shall not be used.
Table 8-19: Void
Table 8-20: Void
Table 8-21: Void
Table 8-22: Void
Table 8-23: Void
Table 8-24: Void
Table 8-25: Void
Table 8-26: Void
Table 8-27: Void
## 8.5 MPD Update
### 8.5.1 General
If the **MPD** \@type is set to \'dynamic\', the MPD may be updated during the
Media Presentation. Updates typically extend the accessible Segment list for
each Representation, introduce a new Period, update Segment locations or
terminate the Media Presentation.The MPD update functionality in 3GP-DASH
shall use the MPD update functionality in ISO/IEC 23009-1 [43], clause 5.4.
### 8.5.2 Media Presentation Description Delta
If the **x3gpp:DeltaSupport** element is present in the **MPD** element, the
content provider indicates that MPD delta files, as defined in this clause,
are supported on the server. The URI of the MPD delta is provided in
**x3gpp:DeltaSupport** \@sourceURL. The **x3gpp:DeltaSupport**
\@availabilityDuration element, if present, indicates that the MPD delta file
referenced by the URI is available for at least the value of the
\@availabilityDuration attribute (after this time, the server may redirect the
client to the full MPD). If **x3gpp:DeltaSupport** \@availabilityDuration is
not present, then no information is conveyed about the availability of the MPD
delta. If a client request for an MPD delta file results in an error, the
client should request a full MPD.
The semantics of the attributes within the **x3gpp:DeltaSupport** element are
provided in Table 8-28. The XML-syntax of **x3gpp:DeltaSupport** element is
provided in Table 8-29.
Table 8-28: Semantics of x3gpp:DeltaSupport element
+-------------+-------------+-------------+-------------+-------------+ | Element or | Use | Description | | | | Attribute | | | | | | Name | | | | | +-------------+-------------+-------------+-------------+-------------+ | | **x3gpp:Del | | If present, | | | | taSupport** | | this | | | | | | element | | | | | | indicates | | | | | | that MPD | | | | | | delta files | | | | | | are | | | | | | supported | | | | | | by the | | | | | | server. | | +-------------+-------------+-------------+-------------+-------------+ | | | \@sourceURL | M | The source | | | | | | string | | | | | | providing | | | | | | the URL of | | | | | | the MPD | | | | | | delta. The | | | | | | URL may be | | | | | | relative to | | | | | | any | | | | | | **BaseURL** | | | | | | on MPD | | | | | | level and | | | | | | reference | | | | | | resolution | | | | | | according | | | | | | to clause | | | | | | 8.2.3 shall | | | | | | be applied. | +-------------+-------------+-------------+-------------+-------------+ | | | \@availabil | O | When | | | | ityDuration | | provided, | | | | | | indicates | | | | | | the | | | | | | duration | | | | | | that the | | | | | | server | | | | | | guarantees | | | | | | the | | | | | | a | | | | | | vailability | | | | | | of the MPD | | | | | | delta file | | | | | | referenced | | | | | | in | | | | | | \@sourceURL | | | | | | after the | | | | | | MPD has | | | | | | been | | | | | | updated. | | | | | | After that | | | | | | the client | | | | | | may be | | | | | | redirected | | | | | | to the full | | | | | | MPD. | +-------------+-------------+-------------+-------------+-------------+ | Legend: | | | | | | | | | | | | > For | | | | | | > | | | | | | attributes: | | | | | | > M | | | | | | =Mandatory, | | | | | | > | | | | | | O=Optional, | | | | | | > | | | | | | OD=Optional | | | | | | > with | | | | | | > Default | | | | | | > Value, | | | | | | > CM=Co | | | | | | nditionally | | | | | | > | | | | | | Mandatory. | | | | | | > | | | | | | > For | | | | | | > elements: | | | | | | > \...\ | | | | | | > (N | | | | | | =unbounded) | | | | | | | | | | | | Elements | | | | | | are bold; | | | | | | attributes | | | | | | are | | | | | | non-bold | | | | | | and | | | | | | preceded | | | | | | with an @. | | | | | +-------------+-------------+-------------+-------------+-------------+
Table 8-29: XML-Syntax of x3gpp:DeltaSupport element
* * *
\\ \\ \\ \\
\\ \\ \\ \\ \
* * *
An MPD delta is a text file that shall include the delta between the MPD that
references it and the latest provided MPD. Note that the value of \@sourceURL
in successive MPDs is necessarily different because it is impossible for the
delta between two different MPDs and the most recent MPD to be the same.
The output format consists of one or more structures, each corresponding to a
change. The changes are in decreasing line number order. The structure format
looks like:
change-command\ to-file-line\ to-file-line...\ .
There are three types of change commands change-command. Each consists of a
line number or comma-separated range of lines in the first file and a single
character indicating the kind of change to make. All line numbers are the
original line numbers in the file. The types of change commands and the
instructions are provided in Table 8-30.
Table 8-30: Change commands and the instructions for delta MPD files
* * *
Change command Instruction Example _l_ a Add text from the second file after
line _l_ in the first file. '8a' means to add the following lines after line 8
of file 1 _r_ c Replace the lines in range _r_ in the first file with the
following lines. Like a combined add and delete, but more compact. '5,7c'
means change lines 5--7 of file 1 to read as the text file 2. _r_ d Delete the
lines in range _r_ from the first file. '5,7d' means delete lines 5--7 of file
1. NOTE: This is the format supported by the GNU diff utilities, see
http://www.gnu.org/software/diffutils/manual/#Detailed-ed
* * *
Regardless of the presence of a **x3gpp:DeltaSupport** element, the full MPD
shall always be available to clients for regular MPD updates as defined in
clause 8.5.1. MPD Delta related procedures are optional at the client.
## 8.6 Additional Media Presentation Information
### 8.6.1 Introduction
The MPD, Periods, Adaptation Sets, Representations and Sub-Representations may
have assigned descriptors for describing the content or other elements in the
MPD. This clause specifies this descriptive information.
### 8.6.2 Program Information
Descriptive information on the program may be provided for each period within
the **ProgramInformation** element.
Program Information shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.7.
Table 8-31: Void
Table 8-32: Void
### 8.6.3 Descriptors
The MPD may contain descriptors that are all in the same format as defined in
this clause. The elements of type DescriptorType provide a flexible mechanism
for DASH content authors to annotate and extend the **MPD** , **Period** ,
**AdaptationSet** and **Representation** elements.
Descriptors shall conform to the definition in ISO/IEC 23009-1 [43], clause
5.8.1.
The following descriptors may be used in 3GP-DASH:
\- Content Protection as defined in ISO/IEC 23009-1 [43], clause 5.8.4.1
\- Role as defined in ISO/IEC 23009-1 [43], clause 5.8.4.3. The DASH Role
scheme as defined in ISO/IEC 23009-1 [43], clause 5.8.5.4 may be used.
\- Rating as defined in ISO/IEC 23009-1 [43], clause 5.8.4.4
\- ViewPoint as defined in ISO/IEC 23009-1 [43], clause 5.8.4.5
\- Accessibility as defined in ISO/IEC 23009-1 [43], clause 5.8.4.2
\- Audio Channel Configuration as defined in ISO/IEC 23009-1 [43], clause
5.8.4.7
\- Frame Packing as defined in ISO/IEC 23009-1 [43], clause 5.8.4.6
\- Essential Property as defined in ISO/IEC 23009-1 [43], clause 5.8.4.8
\- Supplemental Property as defined in ISO/IEC 23009-1 [43], clause 5.8.4.9
\- UTC Timing Descriptor as defined in ISO/IEC 23009-1 [43], clause 5.8.4.10.
The DASH UTC Timing Schemes as defined in ISO/IEC 23009-1 [43], clause
5.8.5.10 may be used.
Table 8-33: Void
Table 8-34: Void
## 8.7 Base URL Processing
The **BaseURL** element may be used to specify one or more common locations
for Segments and other resources. Base URL Processing shall conform to ISO/IEC
23009-1 [43], clause 5.6.
Table 8-35: Void
Table 8-36: Void
## 8.8 Event Streams
Events may be signalled in the MPD or within a Representation in order to
signal aperiodic information to the DASH client or to an application. Events
are timed, i.e. each event starts at a specific media presentation time and
typically has a duration. Events may include DASH specific signalling or
application-specific events. In the latter case, a proper scheme identifier
identifies the application such that the DASH client can forward the event to
the proper application.
Events of the same type are clustered in Event Streams. This enables a DASH
client to subscribe to an Event Stream of interest and ignore Event Streams
that are of no relevance or interest.
Two ways of signalling events are provided, namely
\- events signalled in the MPD as defined in 5.10.2 of ISO/IEC 23009-1[34].
Event streams for MPD events are signaled by **Period.EventStream** element.
\- events signalled inband in the Representation as defined in 5.10.3 of
ISO/IEC 23009-1 [34]. Inband event streams are signaled by the element
**InbandEventStream** for a specific Representation or all Representatons in
an Adaptation Set.
This specification does not provide any specific information on how to use
Event Streams. It is up to the application that employs DASH formats to
instantiate the description elements with appropriate scheme information.
If the DASH client is interested in a specific event stream, it is expected to
properly extract each event from an event stream and pass it to the
application.
# 9 DASH - Usage of 3GPP File Format
## 9.1 Introduction
3GPP Dynamic Adaptive Streaming over HTTP uses many elements of fragmented 3GP
files to define the Segment formats. This provides Segments according to the
requirements defined in clause 8.4.4.1 and enables reuse of existing content,
easy encoding and recording, etc. This clause introduces how to use the 3GPP
file format as specified in\ TS 26.244 [4] for DASH Segment formats.
## 9.2 Segment Types and Formats
### 9.2.1 Introduction
3GP-DASH defines a Segment format that is used in the delivery of media data
over HTTP. A Segment shall contain one or more boxes in accordance with the
boxed structure of the ISO-base media file format [11].
For 3GP-DASH the following applies:
\- In all cases for which a Representation contains more than one Media
Segment, the following applies:
\- The Initialization Segment as defined in clause 9.2.2 shall be present. The
Initialization Segment shall be available for the 3GP-DASH client before any
Media Segment is processed within the Representation.
\- Media Segments shall not be self-initializing. The Media Segment format is
defined in clause 9.2.3.
\- In case a Representation contains only a single Media Segment, then either
one of the following two options is used:
1) An Initialization Segment as defined in clause 9.2.2 and one Media Segment
as defined in clause 9.2.3.
2) One Self-Initializing Media Segment as defined in clause 9.2.4.
### 9.2.2 Initialization Segment
The Initialization Segment is conformant with the 3GPP file format, adaptive
streaming profile and shall carry "3gh9" as compatibility brand.
The Initialization Segment shall conform to the Initialization Segment in
ISO/IEC 23009-1 [43], clause 6.3.3.
### 9.2.3 Media Segment
#### 9.2.3.1 General
A Media Segment contains and encapsulates media streams that are either
described within this Media Segment or described by the Initialization Segment
of this Representation or both.
In addition, a Media Segment shall conform to the general format type in
ISO/IEC 23009-1 [43], clause 6.2.3.1.
#### 9.2.3.2 Subsegments and Segment Index
Media Segments may contain multiple **Subsegments documented by the Segment
Index.**
**Subsegments and Segment Index shall follow the definition in** ISO/IEC
23009-1 [43], clause 6.2.3.2**.**
#### 9.2.3.3 Subsegment Index
Media Subsegments may be indexed further to enable accessing different levels
of Subsegments in a Media Subsegment. This Subsegment Index may also be
provided in separate Index Segments together with the Segment Index.
**Subsegment Index shall follow the definition in** ISO/IEC 23009-1 [43],
clause 6.2.3.3.
#### 9.2.3.4 3GP-DASH Media Segment Format
A Media Segment conforming to the Media Segment Format for 3GP DASH shall
carry '3gmA' as a compatible brand and shall conform to the General format
type **in** ISO/IEC 23009-1 [43], clause 6.3.4.2.
### 9.2.4 Self-Initializing Media Segment
A Self-Initializing Media Segment shall conform to the Self-Initializing Media
Segment **in** ISO/IEC 23009-1 [43], clause 6.3.5.1.
### 9.2.5 Media Stream and Segment Properties
#### 9.2.5.1 Media Stream Access Points
To be able to access a Representation, each of the media streams that are
contained in the Representation requires Media Stream Access Points (SAPs).
For the definition refer to ISO/IEC 23009-1 [43], clause 4.5.1.
#### 9.2.5.2 Non-overlapping Segments and Subsegments
The property of "non-overlapping" Segments (respectively Subsegments) is used
to define the terms Segment alignment and Subsegment alignment. The definition
is provided in ISO/IEC 23009-1 [43], section 4.5.1.
#### 9.2.5.3 Bitstream concatenation
The definition for bistream concatenation is provided in ISO/IEC 23009-1 [43],
section 4.5.2.
## 9.3 Usage on Server and Client
3GP-DASH uses 3GP files according to the 3GP Adaptive-Streaming profile as
specified in TS 26.244 [4]. Content may be prepared as 3GP files according to
the 3GP Adaptive-Streaming profile. Initialization Segments and Media Segments
may be generated by segmenting such 3GP files. Segment Index 'sidx' boxes may
be pre-contained in 3GP files or may be generated during the segmentation
process. Clients may store a concatenation of a received Initialization
Segment and a sequence of Media Segments from the same Representation to
create a compliant 3GP file according to the Adaptive Streaming profile
without accessing any media samples.
NOTE: As specified in TS 26.244, the MPD may be linked or embedded in the
'meta' box of the 'moov' box. This enables clients to access the MPD from a
3GP file that was made available from other means than 3GP-DASH (e.g.
progressive download).
## 9.4 Segment Properties with MPD constraints
### 9.4.1 General
#### 9.4.1.1 Introduction
The content, especially the Segments across Representations at the same media
time may have been prepared in a joint or at least coordinated manner. To
expose these properties to the client, certain flags in the MPD can be set to
true to indicate such coordinated content preparation. Clients consuming 3GP-
DASH formatted media presentations may benefit from properly authored content
when switching between or presenting Representations.
#### 9.4.1.2 Media Presentation Timeline
One of the key features in DASH is that encoded versions of different media
components share a common timeline. The presentation time of access unit
within the media content is mapped to the global common presentation timeline
for synchronization of different media components and to enable seamless
switching of different coded versions of the same media components.
The requirements and recommendations in ISO/IEC 23009-1 [43], clause 7.2.1 and
clause 7.3.2 shall apply for 3GP-DASH.
#### 9.4.1.3 Segment Index
If a Segment Index is present in a Media Segment of one Representation within
an Adaptation Set, then the constraints in ISO/IEC 23009-1 [43], clause 7.2.2
shall apply for 3GP-DASH.
### 9.4.2 Segment Alignment
No additional requirements beyond those stated in section 8.4.3.3 are defined.
### 9.4.3 Bitstream Switching
If the \@bitstreamSwitching is set to 'true' for a set of Representations
within an Adaptation Set, the conditions in ISO/IEC 23009-1 [43], clause
7.3.3.2 shally apply.
### 9.4.4 Sub-Representation
If a **SubRepresentation** element is present in a Representation in the MPD
and the **SubRepresentation** \@level is present, then the conditions in
ISO/IEC 23009-1 [43], clause 7.3.4 shally apply.
# 10 QoE for Progressive Download and DASH
## 10.1 General
A progressive download or 3GP-DASH client supporting Quality of Experience
(QoE) shall report QoE metrics according to the QoE configuration. QoE
reporting is optional, but if a 3GP-DASH client reports DASH metrics, it shall
report all requested metrics.
The quality metrics are defined in subclause 10.2.
The quality metrics applicable for progressive download are specified in
section 10.3. In this case the activation and configuration of QoE reporting
framework is achieved by a corresponding OMA DM QoE Management Object as
specified in Annex F.
The quality metrics for DASH are specified in section 10.4. In this case, QoE
reporting may be triggered using the MPD ( i.e. when the **Metrics** element
is present in the MPD) or using OMA DM QoE Management Object as specified in
Annex F. When QoE reporting is triggered via the MPD or OMA DM QoE Management
Object, the 3GP-DASH client is expected to collect quality metrics according
to the QoE configuration. When using the MPD, the Quality Reporting scheme as
defined in section 10.5 may be used.
The quality metric reporting protocol is defined in subclause 10.6. This
protocol shall be used when QoE reporting is triggered via the MPD or OMA DM
QoE Management Object.
## 10.2 QoE Metric Definitions
### 10.2.1 Introduction
This section provides the general QoE metric definitions and measurement
framework.
The semantics are defined using an abstract syntax. Section 10.6 provides a
mapping to an XML schema. Items in this abstract syntax have one of the
following primitive types (Integer, Real, Boolean, Enum, String) or one of the
following compound types:
\- Objects: an unordered sequence of (key, value) pairs, where the key always
has string type and is unique within the sequence.
\- List: a ordered list of items.
\- Set: an unordered set of items.
Additionally, there are two kinds of timestamp defined, i.e. _real time_
(wall-clock time) and _media time_.
### 10.2.2 HTTP Request/Response Transactions
Annex D.4.3 in ISO/IEC 23009-1 [43] defines the metrics for HTTP
Request/Response Transactions.
Table 25: Void
### 10.2.3 Representation Switch Events
Annex D.4.4 in ISO/IEC 23009-1 [43] defines the metrics for representation
switch events.
Table 26: Void
### 10.2.4 Average Throughput
This metric in Table 27 indicates the average throughput that is observed by
the client during the measurement interval.
Table 27: Average Throughput
+---------------+----------------+----------------+----------------+ | Key | Type | Description | | +---------------+----------------+----------------+----------------+ | AvgThroughput | Object | Average | | | | | throughput | | | | | that is | | | | | observed by | | | | | the client | | | | | during the | | | | | measurement | | | | | interval | | +---------------+----------------+----------------+----------------+ | | numbytes | Integer | The total | | | | | number of the | | | | | content bytes, | | | | | i.e. the total | | | | | number of | | | | | bytes in the | | | | | body of the | | | | | HTTP | | | | | responses, | | | | | received | | | | | during the | | | | | measurement | | | | | interval. | +---------------+----------------+----------------+----------------+ | | activitytime | Integer | The activity | | | | | time during | | | | | the | | | | | measurement | | | | | interval in | | | | | milliseconds. | | | | | The activity | | | | | time during | | | | | the | | | | | measurement | | | | | interval is | | | | | the time | | | | | during which | | | | | at least one | | | | | GET request is | | | | | still not | | | | | completed | | | | | (i.e. | | | | | excluding | | | | | inactivity | | | | | time during | | | | | the | | | | | measurement | | | | | interval). | +---------------+----------------+----------------+----------------+ | | t | Real Time | The real time | | | | | of the start | | | | | of the | | | | | measurement | | | | | interval | +---------------+----------------+----------------+----------------+ | | duration | Integer | The time in | | | | | milliseconds | | | | | of the | | | | | measurement | | | | | interval | +---------------+----------------+----------------+----------------+ | | accessbearer | String | Access bearer | | | | | for the TCP | | | | | connection for | | | | | which the | | | | | average | | | | | throughput is | | | | | reported | +---------------+----------------+----------------+----------------+ | | inactivitytype | Enum | Type of the | | | | | inactivity, if | | | | | known and | | | | | consistent | | | | | throughout the | | | | | reporting | | | | | period: | | | | | | | | | | User request | | | | | (e.g. pause) | | | | | | | | | | Client measure | | | | | to control the | | | | | buffer | | | | | | | | | | Error case | +---------------+----------------+----------------+----------------+
If the client requests the media Segments from the server separately over
multiple non-competing parallel TCP connections established over separate
access network bearers named as accessbearer, then the average throughput
values should be reported as a list of events with average throughput for each
access network and associated access network bearer information reported
separately, following the same guidelines as described above.
### 10.2.5 Initial Playout Delay
This metric in Table 28 signals the initial playout delay at the start of the
streaming of the presentation.
Table 28: Initial Playout Delay
* * *
Key Type Description InitialPlayoutDelay Integer The initial playout delay is
measured as the time in milliseconds from the fetch of the first media Segment
(or sub-segment) and the time at which media is retrieved from the client
buffer.
* * *
### 10.2.6 Buffer Level
Annex D.4.5 in ISO/IEC 23009-1 [43] defines the metrics for buffer level
status events.
Table 29: Void
### 10.2.7 Play List
Decoded samples are generally rendered in presentation time sequence, each at
or close to its specified presentation time. A compact representation of the
information flow can thus be constructed from a list of time periods during
which samples of a single representation were continuously rendered, such that
each was presented at its specified presentation time to some specific level
of accuracy (e.g. +/-10 ms).
Such a sequence of periods of continuous delivery is started by a user action
that requests playout to begin at a specified media time (this could be a
"play", "seek" or "resume" action) and continues until playout stops either
due to a user action, the end of the content, or a permanent failure.
Table 30 defines the play list event metric.
Table 30: Play List
+---------+---------+---------+---------+---------+---------+---------+ | Key | Type | Desc | | | | | | | | ription | | | | | +---------+---------+---------+---------+---------+---------+---------+ | P | List | A list | | | | | | layList | | of | | | | | | | | p | | | | | | | | layback | | | | | | | | p | | | | | | | | eriods. | | | | | | | | A | | | | | | | | p | | | | | | | | layback | | | | | | | | period | | | | | | | | is the | | | | | | | | time | | | | | | | | i | | | | | | | | nterval | | | | | | | | between | | | | | | | | a user | | | | | | | | action | | | | | | | | and | | | | | | | | wh | | | | | | | | ichever | | | | | | | | occurs | | | | | | | | soonest | | | | | | | | of the | | | | | | | | next | | | | | | | | user | | | | | | | | action, | | | | | | | | the end | | | | | | | | of | | | | | | | | p | | | | | | | | layback | | | | | | | | or a | | | | | | | | failure | | | | | | | | that | | | | | | | | stops | | | | | | | | pl | | | | | | | | ayback. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | _Entry_ | Object | A | | | | | | | | record | | | | | | | | of a | | | | | | | | single | | | | | | | | p | | | | | | | | layback | | | | | | | | period. | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | start | Real | Ti | | | | | | | Time | mestamp | | | | | | | | of the | | | | | | | | user | | | | | | | | action | | | | | | | | that | | | | | | | | starts | | | | | | | | the | | | | | | | | p | | | | | | | | layback | | | | | | | | period. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | mstart | Media | The | | | | | | | Time | prese | | | | | | | | ntation | | | | | | | | time at | | | | | | | | which | | | | | | | | playout | | | | | | | | was | | | | | | | | re | | | | | | | | quested | | | | | | | | by the | | | | | | | | user | | | | | | | | action. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | st | Enum | Type of | | | | | | arttype | | user | | | | | | | | action | | | | | | | | which | | | | | | | | tr | | | | | | | | iggered | | | | | | | | playout | | | | | | | | | | | | | | | | - New | | | | | | | | playout | | | | | | | | request | | | | | | | | (e.g. | | | | | | | | initial | | | | | | | | playout | | | | | | | | or | | | | | | | | s | | | | | | | | eeking) | | | | | | | | | | | | | | | | - | | | | | | | | Resume | | | | | | | | from | | | | | | | | pause | | | | | | | | | | | | | | | | - | | | | | | | | Other | | | | | | | | user | | | | | | | | request | | | | | | | | (e.g. | | | | | | | | user-re | | | | | | | | quested | | | | | | | | quality | | | | | | | | change) | | | | | | | | | | | | | | | | - | | | | | | | | Start | | | | | | | | of a | | | | | | | | metrics | | | | | | | | col | | | | | | | | lection | | | | | | | | period | | | | | | | | (hence | | | | | | | | earlier | | | | | | | | entries | | | | | | | | in the | | | | | | | | play | | | | | | | | list | | | | | | | | not | | | | | | | | col | | | | | | | | lected) | | | +---------+---------+---------+---------+---------+---------+---------+ | | | Trace | List | List of | | | | | | | | periods | | | | | | | | of | | | | | | | | con | | | | | | | | tinuous | | | | | | | | re | | | | | | | | ndering | | | | | | | | of | | | | | | | | decoded | | | | | | | | s | | | | | | | | amples. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | | _Trac | Objects | Single | | | | | | eentry_ | | entry | | | | | | | | in the | | | | | | | | list. | | +---------+---------+---------+---------+---------+---------+---------+ | | | | | re | String | The | | | | | | present | | value | | | | | | ationid | | of | | | | | | | | Repr | | | | | | | | esentat | | | | | | | | ion\@id | | | | | | | | from | | | | | | | | which | | | | | | | | the | | | | | | | | samples | | | | | | | | were | | | | | | | | taken. | | | | | | | | | | | | | | | | This is | | | | | | | | an | | | | | | | | o | | | | | | | | ptional | | | | | | | | pa | | | | | | | | rameter | | | | | | | | and | | | | | | | | should | | | | | | | | not be | | | | | | | | r | | | | | | | | eported | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | subr | Integer | If not | | | | | | eplevel | | p | | | | | | | | resent, | | | | | | | | this | | | | | | | | metric | | | | | | | | c | | | | | | | | oncerns | | | | | | | | the | | | | | | | | Represe | | | | | | | | ntation | | | | | | | | as a | | | | | | | | whole. | | | | | | | | If | | | | | | | | p | | | | | | | | resent, | | | | | | | | subr | | | | | | | | eplevel | | | | | | | | in | | | | | | | | dicates | | | | | | | | the | | | | | | | | g | | | | | | | | reatest | | | | | | | | value | | | | | | | | of any | | | | | | | | Sub | | | | | | | | Represe | | | | | | | | ntation | | | | | | | | \@level | | | | | | | | being | | | | | | | | re | | | | | | | | ndered. | | | | | | | | | | | | | | | | This is | | | | | | | | an | | | | | | | | o | | | | | | | | ptional | | | | | | | | pa | | | | | | | | rameter | | | | | | | | and | | | | | | | | should | | | | | | | | not be | | | | | | | | r | | | | | | | | eported | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | start | Real | The | | | | | | | Time | time at | | | | | | | | which | | | | | | | | the | | | | | | | | first | | | | | | | | sample | | | | | | | | was | | | | | | | | re | | | | | | | | ndered. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | sstart | Media | The | | | | | | | Time | prese | | | | | | | | ntation | | | | | | | | time of | | | | | | | | the | | | | | | | | first | | | | | | | | sample | | | | | | | | re | | | | | | | | ndered. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | d | Integer | The | | | | | | uration | | d | | | | | | | | uration | | | | | | | | of the | | | | | | | | conti | | | | | | | | nuously | | | | | | | | pr | | | | | | | | esented | | | | | | | | samples | | | | | | | | (which | | | | | | | | is the | | | | | | | | same in | | | | | | | | real | | | | | | | | time | | | | | | | | and | | | | | | | | media | | | | | | | | time). | | | | | | | | "Conti | | | | | | | | nuously | | | | | | | | pre | | | | | | | | sented" | | | | | | | | means | | | | | | | | that | | | | | | | | the | | | | | | | | media | | | | | | | | clock | | | | | | | | co | | | | | | | | ntinued | | | | | | | | to | | | | | | | | advance | | | | | | | | at the | | | | | | | | playout | | | | | | | | speed | | | | | | | | thr | | | | | | | | oughout | | | | | | | | the | | | | | | | | in | | | | | | | | terval. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | playba | Real | The | | | | | | ckspeed | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | r | | | | | | | | elative | | | | | | | | to | | | | | | | | normal | | | | | | | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | (i.e | | | | | | | | .normal | | | | | | | | forward | | | | | | | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | is | | | | | | | | 1.0). | +---------+---------+---------+---------+---------+---------+---------+ | | | | | sto | Enum | The | | | | | | preason | | reason | | | | | | | | why | | | | | | | | con | | | | | | | | tinuous | | | | | | | | prese | | | | | | | | ntation | | | | | | | | of this | | | | | | | | represe | | | | | | | | ntation | | | | | | | | was | | | | | | | | s | | | | | | | | topped. | | | | | | | | Either: | | | | | | | | | | | | | | | | - | | | | | | | | represe | | | | | | | | ntation | | | | | | | | switch | | | | | | | | (not | | | | | | | | r | | | | | | | | elevant | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload) | | | | | | | | | | | | | | | | - | | | | | | | | rebu | | | | | | | | ffering | | | | | | | | | | | | | | | | - user | | | | | | | | request | | | | | | | | | | | | | | | | - end | | | | | | | | of | | | | | | | | period | | | | | | | | | | | | | | | | - end | | | | | | | | of | | | | | | | | content | | | | | | | | | | | | | | | | - end | | | | | | | | of a | | | | | | | | metrics | | | | | | | | col | | | | | | | | lection | | | | | | | | period | | | | | | | | | | | | | | | | - | | | | | | | | failure | | | | | | | | | | | | | | | | - | | | | | | | | other | +---------+---------+---------+---------+---------+---------+---------+ | | | | | s | String | The | | | | | | topreas | | s | | | | | | onother | | topreas | | | | | | | | onother | | | | | | | | at | | | | | | | | tribute | | | | | | | | shall | | | | | | | | be | | | | | | | | i | | | | | | | | ncluded | | | | | | | | only if | | | | | | | | sto | | | | | | | | preason | | | | | | | | at | | | | | | | | tribute | | | | | | | | is | | | | | | | | i | | | | | | | | ncluded | | | | | | | | and has | | | | | | | | the | | | | | | | | enum | | | | | | | | value | | | | | | | | * | | | | | | | | other*. | | | | | | | | In this | | | | | | | | release | | | | | | | | of the | | | | | | | | specifi | | | | | | | | cation, | | | | | | | | the | | | | | | | | sender | | | | | | | | of this | | | | | | | | string | | | | | | | | shall | | | | | | | | set its | | | | | | | | value | | | | | | | | to one | | | | | | | | of the | | | | | | | | foll | | | | | | | | owing:: | | | | | | | | | | | | | | | | - | | | | | | | | switch | | | | | | | | from | | | | | | | | unicast | | | | | | | | to | | | | | | | | br | | | | | | | | oadcast | | | | | | | | | | | | | | | | - | | | | | | | | switch | | | | | | | | from | | | | | | | | br | | | | | | | | oadcast | | | | | | | | to | | | | | | | | unicast | | | | | | | | | | | | | | | | The | | | | | | | | r | | | | | | | | eceiver | | | | | | | | of this | | | | | | | | at | | | | | | | | tribute | | | | | | | | shall | | | | | | | | ignore | | | | | | | | this | | | | | | | | at | | | | | | | | tribute | | | | | | | | if its | | | | | | | | string | | | | | | | | is set | | | | | | | | to | | | | | | | | diff | | | | | | | | ererent | | | | | | | | value | | | | | | | | than | | | | | | | | the | | | | | | | | values | | | | | | | | listed | | | | | | | | above. | +---------+---------+---------+---------+---------+---------+---------+
NOTE: The trace may include entries for different representations that overlap
in time, because multiple representations are being rendered simultaneously,
for example one audio and one video representation.
### 10.2.8 MPD Information
This metric can be used to report Representation information from the MPD, so
that reporting servers without direct access to the MPD can understand the
used media characteristics.
The metric is reported whenever the client sends any other quality metrics
report containing references to a Representation which MPD information has
still not been reported.
Table 31 defines the MPD information for quality reporting.
Table 31: MPD Information for Quality Reporting
* * *
Key Type Description  
MPDInformation Object  
representationid String Value of **Representation** \@id for the
representation addressed by the QoE metrics report. subreplevel Integer If
present, value of SubRepresentation\@level for the subrepresentation addressed
by the QoE metrics report. If not present, the QoE metrics report concerns the
representation as a whole. Mpdinfo RepresentationType Provides the MPD
information for the representation or subrepresentation identified by
representationid and subreplevel, if present. The following attributes and
elements shall be present within mpdinfo if they are present for the
identified representation or subrepresentation and their values shall be
identical to those presented in the MPD: \@bandwidth, \@qualityRanking,
\@width, \@height, \@mimeType, and \@codecs.
* * *
### 10.2.9 Playout Delay for Media Start-up
This metric in Table 31a indicates the waiting time that the user experiences
for media start-up.
Table 31a: Playout Delay for Media Start-up
+----------------------------+---------+----------------------------+ | Key | Type | Description | +----------------------------+---------+----------------------------+ | P | Integer | The playout delay for | | layoutDelayforMediaStartup | | media start-up is measured | | | | as the time in | | | | milliseconds from the time | | | | instant of DASH player | | | | receives play-back-start | | | | trigger **to the instant | | | | of media playout.** | | | | | | | | - If the MPD has been | | | | delivered earlier before | | | | the user clicks, it may | | | | include the process time | | | | of MPD, the fetch time of | | | | some media segments which | | | | are required for media | | | | presentation, the process | | | | time of segments, and the | | | | time for media decode and | | | | render to the user. | | | | | | | | - If no MPD has been | | | | fetched earlier, it also | | | | needs to add the fetch | | | | time of MPD. | +----------------------------+---------+----------------------------+
## 10.3 Quality Metrics for Progressive Download
The following metrics shall be supported by progressive download clients
supporting the QoE reporting feature:
\- List of HTTP Request/Response Transactions (Section 10.2.2),
\- Average Throughput (Section 10.2.4),
\- Initial Playout Delay (Section 10.2.5),
\- Buffer Level (Section 10.2.6),
\- Play List (Section 10.2.7).
## 10.4 Quality Metrics for DASH
The following metrics shall be supported by 3GP-DASH clients supporting the
QoE reporting feature:
\- List of HTTP Request/Response Transactions (Section 10.2.2),
\- List of of Representation Switch Events (Section 10.2.3),
\- Average Throughput (Section 10.2.4),
\- Initial Playout Delay (Section 10.2.5),
\- Buffer Level (Section 10.2.6),
\- Play List (Section 10.2.7), and
\- MPD Information (Section 10.2.8).
The \@metrics attribute contains a list of quality metric keys listing all
metrics that the DASH shall collect and report.
The semantics of the attributes within the **Metrics** element are provided in
Table 32. The XML-syntax of a **Metrics** element is provided in Table 33.
Table 32: Semantics of Metrics element
+----------+----------+----------+----------+----------+----------+ | Element | Use | Des | | | | | or | | cription | | | | | A | | | | | | | ttribute | | | | | | | Name | | | | | | +----------+----------+----------+----------+----------+----------+ | | **M | | DASH | | | | | etrics** | | metric | | | | | | | element | | | +----------+----------+----------+----------+----------+----------+ | | | \ | M | This | | | | | @metrics | | a | | | | | | | ttribute | | | | | | | lists | | | | | | | all | | | | | | | quality | | | | | | | metrics | | | | | | | (as a | | | | | | | list of | | | | | | | quality | | | | | | | metric | | | | | | | keys as | | | | | | | defined | | | | | | | in | | | | | | | section | | | | | | | 10.2, | | | | | | | s | | | | | | | eparated | | | | | | | by a | | | | | | | whi | | | | | | | tespace) | | | | | | | that the | | | | | | | client | | | | | | | shall | | | | | | | report. | | | | | | | | | | | | | | Certain | | | | | | | keys | | | | | | | allow | | | | | | | sp | | | | | | | ecifying | | | | | | | a | | | | | | | mea | | | | | | | surement | | | | | | | interval | | | | | | | or | | | | | | | period | | | | | | | over | | | | | | | which a | | | | | | | single | | | | | | | value of | | | | | | | the | | | | | | | metric | | | | | | | is | | | | | | | derived | | | | | | | and | | | | | | | pot | | | | | | | entially | | | | | | | also | | | | | | | other | | | | | | | pa | | | | | | | rameters | | | | | | | con | | | | | | | trolling | | | | | | | the | | | | | | | co | | | | | | | llection | | | | | | | of the | | | | | | | metrics. | | | | | | | The | | | | | | | par | | | | | | | ameters, | | | | | | | if any, | | | | | | | are | | | | | | | included | | | | | | | in | | | | | | | par | | | | | | | enthesis | | | | | | | after | | | | | | | the key | | | | | | | and | | | | | | | their | | | | | | | s | | | | | | | emantics | | | | | | | are | | | | | | | s | | | | | | | pecified | | | | | | | in | | | | | | | clause | | | | | | | 10.2 | | | | | | | with the | | | | | | | metric | | | | | | | de | | | | | | | finition | | | | | | | itself. | | +----------+----------+----------+----------+----------+----------+ | | | * | 0..N | When | | | | | _Range_ _| | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the time | | | | | | | period | | | | | | | during | | | | | | | which | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | re | | | | | | | quested. | | | | | | | When not | | | | | | | present, | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | r | | | | | | | equested | | | | | | | for the | | | | | | | whole | | | | | | | duration | | | | | | | of the | | | | | | | content. | | +----------+----------+----------+----------+----------+----------+ | | | | \@s | O | When | | | | | tarttime | | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the | | | | | | | start | | | | | | | time of | | | | | | | the | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | op | | | | | | | eration. | | | | | | | When not | | | | | | | present, | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | r | | | | | | | equested | | | | | | | from the | | | | | | | b | | | | | | | eginning | | | | | | | of | | | | | | | content | | | | | | | cons | | | | | | | umption. | | | | | | | For | | | | | | | services | | | | | | | with | | | | | | |__MPD | | | | | | |__\@type | | | | | | | "Live", | | | | | | | the | | | | | | | start | | | | | | | time of | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | can be | | | | | | | obtained | | | | | | | in | | | | | | | w | | | | | | | allclock | | | | | | | time by | | | | | | | adding | | | | | | | the | | | | | | | value of | | | | | | | this | | | | | | | a | | | | | | | ttribute | | | | | | | i | | | | | | | ndicated | | | | | | | in media | | | | | | | time to | | | | | | | the | | | | | | | value of | | | | | | | the | | | | | | |__MPD_ | | | | | | | _\@avail | | | | | | | abilityS | | | | | | | tartTime | | | | | | | at | | | | | | | tribute. | | | | | | | For | | | | | | | services | | | | | | | with | | | | | | |__MPD | | | | | | |__\@type | | | | | | | "O | | | | | | | nDemand" | | | | | | | , the | | | | | | | start | | | | | | | time is | | | | | | | i | | | | | | | ndicated | | | | | | | in media | | | | | | | time and | | | | | | | is | | | | | | | relative | | | | | | | to the | | | | | | |_ Peri | | | | | | | odStart _| | | | | | | time of | | | | | | | the | | | | | | | first | | | | | | | period | | | | | | | in this | | | | | | | MPD. | +----------+----------+----------+----------+----------+----------+ | | | | \@ | O | When | | | | | duration | | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the | | | | | | | duration | | | | | | | of the | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | i | | | | | | | nterval. | | | | | | | The | | | | | | | value of | | | | | | | this | | | | | | | a | | | | | | | ttribute | | | | | | | is | | | | | | | e | | | | | | | xpressed | | | | | | | in media | | | | | | | time. | +----------+----------+----------+----------+----------+----------+ | | |__Rep | 1...N | De | | | | | orting_ * | | scriptor | | | | | | | that | | | | | | | provides | | | | | | | inf | | | | | | | ormation | | | | | | | about | | | | | | | the | | | | | | | r | | | | | | | equested | | | | | | | Quality | | | | | | | R | | | | | | | eporting | | | | | | | method | | | | | | | and | | | | | | | formats. | | | | | | | See | | | | | | | clause | | | | | | | 10.6 for | | | | | | | the | | | | | | | 3GP-DASH | | | | | | | quality | | | | | | | r | | | | | | | eporting | | | | | | | schemes. | | +----------+----------+----------+----------+----------+----------+ | Legend: | | | | | | | | | | | | | | > For | | | | | | | > att | | | | | | | ributes: | | | | | | | > M=Ma | | | | | | | ndatory, | | | | | | | > O=O | | | | | | | ptional, | | | | | | | > OD= | | | | | | | Optional | | | | | | | > with | | | | | | | > | | | | | | | Default | | | | | | | > Value, | | | | | | | > | | | | | | | CM=Condi | | | | | | | tionally | | | | | | | > Ma | | | | | | | ndatory. | | | | | | | > | | | | | | | > For | | | | | | | > e | | | | | | | lements: | | | | | | | > \\ | | | | | | | ...\ | | | | | | | > (N=un | | | | | | | bounded) | | | | | | | | | | | | | | Elements | | | | | | | are | | | | | | | bold; | | | | | | | at | | | | | | | tributes | | | | | | | are | | | | | | | non-bold | | | | | | | and | | | | | | | preceded | | | | | | | with an | | | | | | | @. | | | | | | +----------+----------+----------+----------+----------+----------+
Table 33: XML-Syntax of Metrics element
* * *
\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \ \\ \\ \\
\\ \\ \\ \\ \
* * *
## 10.5 Quality Reporting Scheme for DASH
This section specifies a 3GP-DASH quality reporting scheme.
The quality reporting scheme is signaled using in the **Reporting** element in
the **Metrics** element. The URN to be used for the **Reporting**
\@schemeIdUri shall be \"urn:3GPP:ns:PSS:DASH:QM10\".
The reporting scheme shall use the quality reporting protocol defined in
section 10.6.
The semantics and XML syntax of the scheme information for the 3GP-DASH
quality reporting scheme are specified in Table 34 and Table 35, respectively.
Table 34: Semantics of Quality Reporting Scheme Information
+-----------------+-----------------+-------------+-----------------+ | Element or | Use | Description | | | Attribute Name | | | | +-----------------+-----------------+-------------+-----------------+ | | \@apn | O | This attribute | | | | | gives the | | | | | access point | | | | | that should be | | | | | used for | | | | | sending the QoE | | | | | reports. | +-----------------+-----------------+-------------+-----------------+ | | \@format | O | This field | | | | | gives the | | | | | requested | | | | | format for the | | | | | reports. | | | | | Possible | | | | | formats are: | | | | | "uncompressed" | | | | | and "gzip". | +-----------------+-----------------+-------------+-----------------+ | | \@s | O | Percentage of | | | amplepercentage | | the clients | | | | | that should | | | | | report QoE. The | | | | | client uses a | | | | | random number | | | | | generator with | | | | | the given | | | | | percentage to | | | | | find out if the | | | | | client should | | | | | report or not. | +-----------------+-----------------+-------------+-----------------+ | | \@ | M | The reporting | | | reportingserver | | server URL to | | | | | which the | | | | | reports will be | | | | | sent. | +-----------------+-----------------+-------------+-----------------+ | | \@re | O | Indicates the | | | portinginterval | | time(s) reports | | | | | should be sent. | | | | | If not present, | | | | | then the client | | | | | should send a | | | | | report after | | | | | the streaming | | | | | session has | | | | | ended. If | | | | | present, | | | | | \@repo | | | | | rtingInterval=n | | | | | indicates that | | | | | the client | | | | | should send a | | | | | report every | | | | | n-th second | | | | | provided that | | | | | new metrics | | | | | information has | | | | | become | | | | | available since | | | | | the previous | | | | | report. | +-----------------+-----------------+-------------+-----------------+ | Legend: | | | | | | | | | | > For | | | | | > attributes: | | | | | > M=Mandatory, | | | | | > O=Optional, | | | | | > OD=Optional | | | | | > with Default | | | | | > Value, | | | | | > C | | | | | M=Conditionally | | | | | > Mandatory. | | | | | > | | | | | > For elements: | | | | | > | | | | | \. | | | | | ..\ | | | | | > (N=unbounded) | | | | | | | | | | Elements are | | | | | bold; | | | | | attributes are | | | | | non-bold and | | | | | preceded with | | | | | an @ | | | | +-----------------+-----------------+-------------+-----------------+
Table 35: Syntax of Quality Reporting Scheme Information
* * *
\\ \\ \ \\
\3GPP DASH Quality Reporting\\ \\ This Schema defines the quality reporting scheme information
for 3GPP DASH.\ \\ \\ \ \\ \
\\ \\ \\ \\
\\
\\ \\ \ \\ \\ \\ \\
\\ \\ \ \
* * *
## 10.6 Quality Reporting Protocol
### 10.6.1 General
The quality reporting protocol consists of:
\- The XML-based report format defined in section 10.6.2
\- The reporting protocol defined in section 10.6.3
The MIME type of an XML-formatted QoE report shall be "application/3gpdash-
qoe-report+xml" as defined in Annex J.
### 10.6.2 Report Format
The QoE report is formatted as an XML document that complies with the
following XML schema:
+----------------------------------------------------------------------+ | \\ | | \\ | | \ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \ | | | | \ | +----------------------------------------------------------------------+
### 10.6.3 Reporting Protocols
If a specific metrics server has been configured, the client shall send QoE
reports using the HTTP (RFC 2616) [9] POST request carrying XML formatted
metadata in its body.
An example QoE reporting based on HTTP POST request signalling is shown below:
+----------------------------------------------------------------------+ | **POST http://www.exampleserver.com HTTP/1.1** | | | | **Host: 192.68.1.1** | | | | **User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; | | Trident/4.0)** | | | | **Content-Type: text/xml; charset=utf-8** | | | | **Content-Length: 4408** | +----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \10000\\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+
# 11 Live Services
## 11.1 Overview Dynamic and Live Media Presentations {#overview-dynamic-and-
live-media-presentations .list-paragraph}
DASH Media Presentations with **MPD** \@type set to \"dynamic\" enable that
media is made available over time and its availability may also be removed
over time. This has two major effects, namely
1) The content creator can announce a DASH Media Presentation for which not
all content is yet available, but only gets available over time.
2) Clients are forced into a timed schedule for the playout, such that they
follow the schedule as desired by the content author.
Dynamic services may be used for different types of services:
**1) Dynamic Distribution of Available Content** : Services, for which content
is made available as dynamic content, but the content is entirely generated
prior to distribution. In this case the details of the Media Presentation,
especially the Segments (duration, URLs) are known and can be announced in a
single MPD without MPD updates.
**2) MPD-controlled Live Service** : Services for which the content is
typically generated on the fly, and the MPD needs to be updated occasionally
to reflect changes in the service offerings, e.g. announcing a new Period with
new media or providing the end of the Media Presentation. The DASH client
operates solely on information in the MPD.
Dynamic and Live services are typically controlled by different client
transactions and server-side signaling.
For initial access to the service and joining the service, an MPD is required.
MPDs may be accessed at join time or may have been provided earlier, for
example along with an Electronic Service Guide. The initial MPD or join MPD is
accessed and processed by the client and the client is synchronized with the
server can analyze the MPD and extract suitable information in order to
initiate the service. This includes, but is not limited to:
\- identifying the currently active Periods in the service and the Period that
expresses the live edge (for more details see below)
\- selecting the suitable media components by selecting one or multiple
Adaptation Sets. Within each Adaptation Set selecting an appropriate
Representation and identifying the live edge segment in each Representations.
The client then issues requests for the Segments.
The MPD may be updated on the server based on certain rules and clients
consuming the service are expected to update MPDs based on certain triggers.
This clause provides requirements and recommendations for different functions,
namely
\- for the dynamic segment download in clause 11.2.
\- for services with MPD updates in clause 11.3
\- for offering live generated services in on-demand mode in clause 11.4
\- for client-server timing synchronization in clause 11.5.
\- for robust service offerings and corresponding clients in clause 11.6.
## 11.2 Dynamic Segment Download
### 11.2.1 Background and Assumptions
The dynamic segment download function is a key component of live services, In
addition, the dynamic segment download function may also be used for
scheduling playout of on-demand content by the content author. In this
subsection, it is assumed that the client has access to a single instance of
an MPD and all information of the entire Media Presentation is contained in
the MPD.
The timing model of dynamic services, especially the generation of Segment
availabilities is a relevant component of a live services. This forms the
basis for live services and explains the key concepts and rules for Segment
availabilities.
### 11.2.2 MPD Information and Timing Model
#### 11.2.2.1 MPD Information
If the Media Presentation is of type dynamic, then Segments have different
Segment availability times, i.e. the earliest time for which the service
provider permits the DASH client to issue a request to the Segment and
guarantees, under regular operation modes, that the client gets a 200 OK
response for the Segment. The Segment availability times for each
Representation can be computed based on the information in an MPD.
For a dynamic service the MPD should at least contain information as available
in Table 11-1. Information included there may be used to compute a list of
announced Segments, Segment Availability Times and URLs.
Assume that an MPD is available to the DASH client at a specific wall-clock
time _NOW_. It is assumed that the client and the DASH server providing the
Segments are synchronized to wall-clock, either through external means or
through a specific client-server synchronization. Details on synchronization
are provided in clause 11.6.
Assuming synchronization, the information in the MPD can then be used by the
client at time _NOW_ to derive the availability (or non-availability) of
Segments on the server.
Table 11-1 -- Information related to Segment Information and Availability
Times for a dynamic service
+----------------------+----------------------+----------------------+ | **MPD Information** | **Status** | **Comment** | +----------------------+----------------------+----------------------+ | **MPD** \@type | mandatory, set to | the type of the | | | \"dynamic\" | Media Presentation | | | | is dynamic, i.e. | | | | Segments get | | | | available over time. | +----------------------+----------------------+----------------------+ | **MPD** \@a | mandatory | the start time is | | vailabilityStartTime | | the anchor for the | | | | MPD in wall-clock | | | | time. The value is | | | | denoted as _AST_ in | | | | the following. | +----------------------+----------------------+----------------------+ | **MPD** \@media | mandatory (for the | provides the | | PresentationDuration | considered use | duration of the | | | cases) | Media Presentation. | +----------------------+----------------------+----------------------+ | **MPD** \@sugges | optional, but | suggested | | tedPresentationDelay | recommended | presentation delay | | | | as delta to segment | | | | availability start | | | | time. The value is | | | | denoted as _SPD_. | | | | Details on the | | | | setting and usage of | | | | the parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | ** | mandatory | minimum buffer time, | | MPD**\@minBufferTime | | used in conjunction | | | | with the \@bandwidth | | | | attribute of each | | | | Representation. The | | | | value is denoted as | | | |_MBT_. Details on | | | | the setting and | | | | usage of the | | | | parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | **MPD**\@ | optional, but | time shift buffer | | timeShiftBufferDepth | recommended | depth of the media | | | | presentation. The | | | | value is denoted as | | | |_TSB_. Details on | | | | the setting and | | | | usage of the | | | | parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | **Period**\@start | Mandatory for the | the start time of | | | first Period in the | the Period relative | | | MPD | to the MPD | | | | availability start | | | | time. | +----------------------+----------------------+----------------------+ | ** | Optional default | The offset in | | Representation** \@av | | availability time | | ailabilityTimeOffset | | for this | | | | Representation. It | | | | may also be | | | | available on a Base | | | | URL or default | | | | | | | | NOTE: the value of | | | | \"INF\" implies | | | | availability of all | | | | segments starts at | | | | **MPD** \@a | | | | vailabilityStartTime | +----------------------+----------------------+----------------------+ | **Segm | mandatory | The template for the | | entTemplate** \@media | | Media Segment | | | | assigned to a | | | | Representation. | +----------------------+----------------------+----------------------+ | **SegmentTem | optional default | number of the first | | plate** \@startNumber | | segment in the | | | | Period assigned to a | | | | Representation | +----------------------+----------------------+----------------------+ | **SegmentT | optional default | timescale for this | | emplate** \@timescale | | Representation. | +----------------------+----------------------+----------------------+ | **Segment | mandatory | the duration of each | | Template** \@duration | | Segment in units of | | | | a time. | +----------------------+----------------------+----------------------+
#### 11.2.2.2 Segment Information Derivation
##### 11.2.2.2.1 Introduction
Based on an MPD including information as documented in Table 11-1 and
available at time _NOW_ on the server, a synchronized DASH client derives the
information of the list of Segments for each Representation in each Period.
This section only describes the information that is expressed by the values in
the MPD. The generation of the information on the server and the usage of the
information in the client is provided in clause 11.2.3 and 11.2.4
respectively.
##### 11.2.2.2.2 Definitions
The following definitions are relevant and aligned with ISO/IEC 23009-1:
Based on an MPD including information as documented in Table 11-1 and
available at time NOW on the server, a synchronized DASH client derives the
information of the list of Segments for each Representation in each Period.
This clause only describes the information that is expressed by the values in
the MPD. The generation of the information on the server and the usage of the
information in the client is provided in clause 11.2.3 and 11.2.4
respectively.
11.2.2.2.2 Definitions
The following definitions are relevant and aligned with ISO/IEC 23009-1:
\- available Segment is a Segment that is accessible at its assigned HTTP-URL.
This means that a request with an HTTP GET to the URL of the Segment results
in a reply of the Segment and 2xx status code.
\- valid Segment URL is an HTTP-URL that is promised to reference a Segment
during its Segment availability period.
\- NOW is a time that is expressing the time on the content server as wall-
clock time. All information in the MPD related to wall-clock is expressed as a
reference to the time NOW.
##### 11.2.2.2.3 MPD Information
For a dynamic service without MPD updates, the following information shall be
present and not present in the MPD (also please refer to Table 11-1):
\- The **MPD** \@type shall be set to \"dynamic\".
\- The **MPD** \@mediaPresentationDuration shall be present, or the **Period**
\@duration of the last Period shall be present.
\- The **MPD** \@minimumUpdatePeriod shall not be present.
Furthermore, it is recommended to provide values for **MPD**
\@timeShiftBufferDepth and **MPD** \@suggestedPresentationDelay.
##### 11.2.2.2.4 Period Information
Each Period is documented by a **Period** element in the MPD. An MPD may
contain one or more Periods. In order to document the use of multiple Periods,
the sequence of Period elements is expressed by an index _i_ with _i_
increasing by 1 for each new Period element.
\- Each regular Period _i_ in the MPD is assigned a
\- Period start time _PSwc_[_i_] in wall-clock time,
\- Period end time _PEwc_[_i_], in wall-clock time.
NOTE: An MPD update may extend the Period end time of the last regular Period.
For details refer to section 11.3.
The Period start time _PSwc_[_i_] for a regular Period _i_ is determined
according to section 5.3.2.1 of ISO/IEC 23009-1:
\- If the attribute \@start is present in the **Period** , then _PSwc_[_i_] is
the sum of _AST_ and the value of this attribute.
\- If the \@start attribute is absent, but the previous **Period** element
contains a \@duration attribute then the start time of the Period is the sum
of the start time of the previous Period _PSwc_[_i_] and the value of the
attribute \@duration of the previous Period. Note that if both are present,
then the \@start of the new Period takes precedence over the information
derived from the \@duration attribute.
The Period end time _PEwc_[_i_] for a regular Period _i_ is determined as
follows:
\- If the Period is the last one in the MPD, the time _PEwc_[_i_] is obtained
as
\- the sum of _AST_ and Media Presentation Duration _MPDur_ , with _MPDur_ the
value of **MPD** \@mediaPresentationDuration if present, or the sum of
_PSwc_[_i_] of the last Period and the value of **Period** \@duration of the
last Period.
\- Else
\- the time _PEwc_[_i_] is obtained as the Period start time of the next
Period, i.e. _PEwc_[_i_] = _PSwc_[_i_ +1].
##### 11.2.2.2.5 Representation Information
Based on such an MPD at a specific time _NOW_ , a list of Segments contained
in a Representation in a Period _i_ with Period start time _PSwc_[_i_] and
Period end time _PEwc_[_i_] can be computed.
Let
_\- N_**~S~** =1,
_\- ato_ is the value of the \@availabilityTimeOffset attribute, if present.
Otherwise it is zero.
_\- ts_ the value of the \@timescale attribute
_\- t_[_s_] is 0,
\- the _d_[_s_] is the value of \@duration attribute
_\- r_[_s_] is the ceil of (_PEwc_[_i_] - _PSwc_[_i_] - _t_[_s_]/_ts_)*_ts_
/_d_[_s_])
##### 11.2.2.2.6 Media Time Information of Segment
Each Media Segment at position _k=1,2, ..._ for each Representation has
assigned an earliest media presentation time _EPT_[_k,r,i_] and an accurate
segment duration _SDUR[k,r,j]_ , all measured in media presentation time.
The earliest presentation time may be estimated from the MPD using the segment
availability start time minus the segment duration announced in the MPD. The
earliest presentation time may be accurately determined from the Segment
itself.
##### 11.2.2.2.7 Segment List Parameters
For each Period _i_ with Period start time _PSwc_[_i_] and Period end time
_PEwc_[_i_] and each Representation _r_ in the Period the following
information can be computed:
\- the presentation time offset described in the MPD, o[_i,r_]
\- the availability time offset of this Representation, ato[_r_]
\- the number of the first segment described in the MPD, k1[_i_ ,_r_]
\- the number of the last segment described in the MPD, k2[_i_ ,_r_]
\- segment availability start time of the initialization segment SAST[_0,i_
,_r_]
\- segment availability end time of the initialization segment SAET[_0,i_
,_r_]
\- segment availability start time of each media segment SAST[_k,i_ ,_r_], _k_
=k1, ..., k2
\- segment availability end time of each media segment SAET[_k,i_ ,_r_], _k_
=k1, ..., k2
\- adjusted segment availability start time ASAST[_0,i_ ,_r_], _k_ =0, k1,
..., k2
\- segment duration of each media segment SD[_k,i_ ,_r_], k=k1, ..., k2
\- the URL of each of the segments, URL[_k,i_ ,_r_]
In addition,
\- the latest available Period _i_[_NOW_] and the latest segment available at
the server k[_NOW_] can be computed. This segment is also referred to as _live
edge segment_.
\- the earliest available Period _i*_[_NOW_] and the earliest segment
available at the server k*[_NOW_] can be computed.
Based on the above information, for each Representation _r_ in a Period _i_ ,
the segment availability start time _SAST_[_k,i_ ,_r_], the segment
availability end time of each segment _SAET_[_k,i_ ,_r_], the segment duration
of each segment _SD_[_k,i_ ,_r_], and the URL of each of the segments,
_URL_[_k,i_ ,_r_] within one Period _i_ be derived as follows using the URL
Template function URLTemplate(ReplacementString, Address):
\- k=0
\- SAST[0,i,r] = PSwc[i]
\- ASAST[0,i,r] = PSwc[i] - ato
\- for s=1, ... N**~S~** [i,r]
_\- k_ = _k_ \+ 1
_\- SAST_[_k,i_ ,_r_] = _PSwc_[_i_] + (_t_[_s,i,r_] + _d_[_s,i,r_] \-
o[_i,r_])/_ts_
_\- ASAST_[_k,i_ ,_r_] = _SAST_[_k,i_ ,_r_] -- _ato_
_\- SD_[_k,i_ ,_r_] = _d_[_s,i,r_]/_ts_
_\- SAET_[_k,i_ ,_r_] = SAST[_k,i_ ,_r_] + _TSB_ \+ _d_[_s,i,r_]/_ts_
\- if **SegmentTemplate** \@media contains \$Number\$
_\- Address_ =\@startNumber
_\- URL_[_k,i_ ,_r_] = URLTemplate (\$Number\$, _Address_)
\- for _j_ = 1, ..., _r_[_s,i,r_]
_\- k_ = _k_ \+ 1
_\- SAST_[_k,i_ ,_r_] = SAST[_k-1,i_ ,_r_] + _d_[_s,i,r_]/_ts_
_\- ASAST_[_k,i_ ,_r_] = _SAST_[_k,i_ ,_r_] -- _ato_
_\- SAET_[_k,i_ ,_r_] = SAST[_k,i_ ,_r_] + _TSB_ \+ _d_[_s,i,r_] /_ts_
_\- SD_[_k,i_ ,_r_] = _d_[_s,i,r_] /_ts_
\- if **SegmentTemplate** \@media contains \$Number\$
\- Address = Address + 1
\- URL[k,i,r] = URLTemplate (\$Number\$, Address)
\- k2[_i_ ,_r_] = _k_
_\- SAET_[_0,i_ ,_r_] = _SAET_[k2[_i_ ,_r_]_,i_ ,_r_]
Note that not all segments documented above may necessarily be accessible at
time _NOW_ , but only those that are within the segment availability time
window. Hence, the number of the first media segment described in the MPD for
this Period, k1[_i_ ,_r_], is the smallest _k_ =1, 2, ... for which
_SAST_[_k,i_ ,_r_] >= _NOW_.
The latest available Period _i_[_NOW_] is the Period _i_ with the largest
_PEwc_[_i_] and _PEwc_[_i_] is smaller than or equal to _NOW_.
The latest available segment _k_[_NOW_] available for a Representation of
Period _i_[_NOW_] (also the live edge segment) is the segment with the largest
_k=_ 0,1,2,... such that _SAST_[_k,i_ ,_r_] is smaller than or equal to _NOW_.
Note that this contains the Initialization Segment with _k_ =0 as not
necessarily any media segment may yet be available for Period _i_[_NOW_]. In
this case, last media segment k2[_i_[_NOW_]-1,_r_], i.e., the last media
segment of the previous Period is the latest accessible media Segment.
However, if the \@availabilityTimeOffset is present, then the segments for
this Representation are available earlier than the nominal segment
availability start time, namely at _ASAST_[_k,i_ ,_r_].
##### 11.2.2.2.8 URL Generation with Segment Template
The function URL Template function URLTemplate(ReplacementString, Address)
generates a URL. For details refer to ISO/IEC 23009-1, section 5.3.9.4. Once
the Segment is generated, processing of the Base URLs that apply on this
segment level is done as defined in ISO/IEC 23009-1, section 5.6.
### 11.2.3 Service Offering Requirements and Guidelines
#### 11.2.3.1 General Service Offering Requirements
For dynamic service offerings, the MPD shall conform to the MPD in clause 8
and shall at least contain the mandatory information as documented in Table
11-1.
If such an MPD is accessible at time _NOW_ at the location **MPD.Location** ,
then
\- all Segments for all Representations in all Periods as announced in an MPD
shall be available latest at the announced segment availability start time
_SAST_[_k,i_ ,_r_] at all _URL_[_k,i_ ,_r_] as derived in section 11.2.2.2;
\- all Segments for all Representations in all Periods as announced in an MPD
shall at least be available until the announced segment availability end time
_SAET_[_k,i_ ,_r_] at all _URL_[_k,i_ ,_r_] as derived in section 11.2.2.2;
\- for all Media Segments for all Representations in all Periods as announced
in an MPD the Segment in this Period is available prior to the sum of Period
start, earliest presentation time and segment duration, i.e. _SAST_[_k,i,r_]
\ \- the desired end-to-end latency
>
> \- the desired compression efficiency
>
> \- the start-up latency
>
> \- the desired switching granularity
>
> \- the desired amount of HTTP requests per second
>
> \- the variability of the expected network conditions
\- Reasonable values for segment durations are between 1 second and 10
seconds.
\- Minimum Buffer Time (MBT) and bandwidth (BW)
\- the value of the minimum buffer time **does not provide any instructions to
the client on how long to buffer the media**. The value describes how much
buffer a client should have under **_ideal_** network conditions. As such, MBT
is not describing the burstiness or jitter in the network, it is describing
the burstiness or jitter in the **content encoding**. Together with the BW
value, it is a property of the content. Using the \"leaky bucket\" model, it
is the size of the bucket that makes BW true, given the way the content is
encoded.
\- The minimum buffer time provides information that for each Stream Access
Point (and in the case of DASH-IF therefore each start of the Media Segment),
the property of the stream: If the Representation (starting at any segment) is
delivered over a constant bitrate channel with bitrate equal to value of the
BW attribute then each presentation time _PT_ is available at the client
latest at time with a delay of at most _PT_ \+ _MBT_.
\- In the absence of any other guidance, **the** MBT **should be set** to the
maximum GOP size (coded video sequence) of the content, which quite often is
identical **to the maximum segment duration**. The _MBT_ may be set to a
smaller value than maximum segment duration, but should not be set to a higher
value.
#### 11.2.3.3 Content Offering with Periods
##### 11.2.3.3.1 General
For content offered within a Period, and especially when offered in multiple
Periods, then the content provider should offer the content such that actual
media presentation time is as close as possible to the actual Period duration.
It is recommended that the Period duration is the maximum of the presentation
duration of all Representations contained in the Period.
A typical Multi-Period Offering is shown in Table 11-4. This may for example
represent a service offering where main content provided in Period 1 and
Period 3 are interrupted by an inserted Period 2.
Table 6 Multi-Period Service Offering
* * *
**MPD Information** **Value**  
**MPD** \@type dynamic  
**MPD** \@availabilityStartTime START  
**MPD** \@mediaPresentationDuration PDURATION  
**MPD** \@suggestedPresentationDelay SPD  
**MPD** \@minBufferTime MBT  
**MPD** \@timeShiftBufferDepth TSB  
**MPD.BaseURL** \"http://example.com/\"  
**Period** \@start PSTART  
**SegmentTemplate** \@media \"1/\$RepresentationID\$/\$Number\$\"
**SegmentTemplate** \@startNumber 1 **SegmentTemplate** \@duration SDURATION1
**Period** \@start PSTART2  
**Representation** \@availabilityTimeOffset ATO2 **SegmentTemplate** \@media
\"2/\$RepresentationID\$/\$Number\$\" **SegmentTemplate** \@startNumber 1
**SegmentTemplate** \@duration SDURATION2 **Period** \@start PSTART3  
**SegmentTemplate** \@media \"1/\$RepresentationID\$/\$Number\$\"
**SegmentTemplate** \@startNumber STARTNUMBER2 **SegmentTemplate** \@duration
SDURATION1 **SegmentTemplate** \@presentationTimeOffset PTO
* * *
Based on the details in section 11.2.2.2, the Segment Information is derived
as:
\- Period 1
\- PSwc[1] = START + PSTART
\- PEwc[1] = START + PSTART2
\- k1 = 1
\- k2 = ceil((PSTART2-PSTART1)/SDURATION)
\- for k = 1, ..., k2
\- SAST[_k_] = PSwc[1] + _k_ *SDURATION
\- SAET[_k_] = SAST[_k_] + TSB + SDURATION
\- SD[_k_] = SDURATION
\- URL[_k_] = http://example.com/1/$RepresentationID$/k
\- SAST[0] = PSwc[1]
\- SAET[0] = SAET[k2]
\- Period 2
\- PSwc[2] = START + PSTART2
\- PEwc[2] = START + PSTART3
\- k1 = 1
\- k2 = ceil((PSTART3-PSTART2)/SDURATION2)
\- for k = 1, ..., k2
\- SAST[_k_] = PSwc[2] + _k_ *SDURATION2
\- ASAST[_k_] = SAST[_k_] -- ATO2
\- SAET[_k_] = SAST[_k_] + TSB + SDURATION2
\- SD[_k_] = SDURATION2
\- URL[_k_] = http://example.com/2/$RepresentationID$/k
\- SAST[0] = PSwc[2]
\- SAET[0] = SAET[k2]
\- Period 3
\- PSwc[3] = START + PSTART3
\- PEwc[3] = START + PDURATION
\- k1 = 1
\- k2 = ceil((PSTART3-PDURATION)/SDURATION1)
\- for k = 1, ..., k2
\- SAST[_k_] = PSwc[3] + _k_ *SDURATION1
\- SAET[_k_] = SAST[_k_] + TSB + SDURATION1
\- SD[_k_] = SDURATION1
\- URL[_k_] = \" http://example.com/1/$RepresentationID$/(k+STARTNUMBER2-1)\"
\- SAST[0] = PSwc[3]
\- SAET[0] = SAET[k2]
Note that the number _k_ describes position in the Period. The actual number
used in the segment template increased by the one less than the actual start
number.
#### 11.2.3.4 Joining Recommendation
By default, an MPD with **MPD** \@type=\"dynamic\" suggests that the client
would want to join the stream at the live edge, therefore to download the
latest available segment (or close to, depending on the buffering model), and
then start playing from that segment onwards.
However there are circumstances where a dynamic MPD might be used with content
intended for playback from the start, or from another position. For example,
when a content provider offers 'start again' functionality for a live program,
the intention is to make the content available as an on-demand program, but
not all the segments will be available immediately.
This may be signalled to the DASH client by including an MPD Anchor, with
either
\- the t parameter, or
\- both the period and t parameter, in the MPD URL provided to the DASH
client, or
The format and behaviour of MPD Anchors is defined in section C.4 of ISO/IEC
23009-1.
For example to start from the beginning of the MPD the following would be
added to the end of the MPD URL provided to the DASH client:
\- #t=0
Or to start from somewhere other than the start, in this case 50 minutes from
the beginning of the period with Period ID "program_part_2":
\- #period=program_part_2&t=50:00
Where an MPD Anchor is used it should refer to a time for which segments are
currently available in the MPD.
### 11.2.4 Client Operation, Recommendations and Guidelines (informative)
#### 11.2.4.1 Basic Operation
A DASH client is guided by the information provided in the MPD. A simple
client model is shown in Figure 11-1.
{width="4.9875in" height="0.9326388888888889in"}
Figure 11-1 Simple Client Model
Assume that the client has access to an MPD and the MPD contains the
parameters in Table 11-1 and Table 11-3, i.e. it consumes a dynamic service
with fixed media presentation duration, but possibly multiple Periods
The following example client behaviour may provide a continuous streaming
experience to the user:
1) The client parses the MPD, selects a collection of Adaptation Sets suitable
for its environment based on information provided in each of the
**AdaptationSet** elements.
2) Within each Adaptation Set it selects one Representation, typically based
on the value of the \@bandwidth attribute, but also taking into account client
decoding and rendering capabilities.
The client creates a list of accessible Segments at least for each selected
Representation taking into account the information in the MPD as documented in
Table 11-1 and Table 11-3 and the current time _JOIN_ in the client and in
particular the segment closest to the live edge referred to the _live edge
segment_. For details refer to section 11.2.4.2.\ For this it needs to take
into account the latest Period _i_[_NOW_]. The latest Period and the latest
segment are obtained as follows with i* the index of the last Period:
\- if _NOW_ \ PSwc[i*]
\- the last one and the latest segment is available is k2[i*]
\- else if _NOW_ > PSwc[i*] + TSB
\- no segment is available any more
\- else if PSwc[1] \ Note again that if k[_NOW_] is _0_ , then only the Initialization Segment is
> available. If the Period is not the first one, then the last available Media
> Segment is the last Media Segment of the previous Period.
>
> 3) The client downloads the initialization segment of the selected
> Representations and then accesses the content by requesting entire Segments
> or byte ranges of Segments. Typically at any time the client downloads the
> next segment at the larger of the two: (i) completion of download of current
> segment or (ii) the Segment Availability Start Time of the next segment.
> Note that if the \@availabilityTimeOffset is present, then the segments may
> be downloaded earlier, namely at the adjusted segment availability start
> time. Based on the buffer fullness and other criteria, rate adaptation is
> considered. Typically the first media segment that is downloaded is the
> _live edge segment_ , but other decisions may be taken in order to minimize
> start-up latency. For details on initial buffering, refer to section
> 11.2.4.4.
>
> 4) According to Figure 11-1 media is fed into buffer and at some point in
> time, the decoding and rendering of the media is kicked off. The downloading
> and presentation is done for the selected Representation of each selected
> Adaptation. The synchronization is done using the presentation time in the
> Period. For synchronized playout, the exact presentation times in the media
> is expected to be used.
>
> 5) Once presentation has started, the playout process is continuous. The
> playout process expects media to be present in the buffer continuously. If
> the **MPD** \@suggestedPresentationDelay is present, then this value may be
> used as the presentation delay _PD_. If the **MPD**
> \@suggestedPresentationDelay is not present, but the client is expected to
> consume the service at the live edge, then a suitable presentation delay
> should be selected, typically between the value of \@minBufferTime and the
> value of \@timeShiftBufferDepth. It is recommended that the client starts
> rendering the first sample of the downloaded media segment _k_ with earliest
> presentation time EPT(_k_) at _PSwc_[_i_] + (EPT(_k_) - _o_[_r,i_]) + _PD_.
> For details on selecting and minimizing end-to-end latency as well as the
> start-up latency, see section 11.2.4.4.
>
> 6) The client may request Media Segments of the selected Representations by
> using the generated Segment list during the availability time window.
>
> 7) Once the presentation has started, the client continues consuming the
> media content by continuously requesting Media Segments or parts of Media
> Segments and playing content that according to the media presentation
> timeline. The client may switch Representations taking into updated
> information from its environment, e.g. change of observed throughput. In a
> straight-forward implementation, with any request for a Media Segment
> starting with a stream access point, the client may switch to a different
> Representation. If switching at a stream access point, the client is
> expected to switch seamlessly at such a stream access point.
>
> 8) With the wall-clock time _NOW_ advancing, the client consumes the
> available Segments. As _NOW_ advances the client possibly expands the list
> of _available_ Segments for each Representation in the Period according to
> the procedures specified in 11.2.4.2.
>
> 9) Once the client is consuming media contained in the Segments towards the
> end of the announced media in the Representation, then either the Media
> Presentation is terminated, a new Period is started (see subsection or the
> MPD needs to be refetched. Once the client is consuming media contained in
> the Segments towards the end of the announced media in the Representation,
> and the Representation is contained not in the last Period, then the DASH
> clients generally needs to reselect the Adaptation Sets and a Representation
> in same manner as described in bullet 1) and 2). Also steps 3), 4), 5) and
> 6) need to be carried out at the transition of a Period. Generally,
> audio/video switching across period boundaries may not be seamless.
> According to ISO/IEC 23009-1, section 7.2.1, at the start of a new Period,
> the playout procedure of the media content components may need to be
> adjusted at the end of the preceding Period to match the _PeriodStart_ time
> of the new Period as there may be small overlaps or gaps with the
> Representation at the end of the preceding Period. Overlaps (respectively
> gaps) may result from Media Segments with actual presentation duration of
> the media stream longer (respectively shorter) than indicated by the Period
> duration. Also in the beginning of a Period, if the earliest presentation
> time of any access unit of a Representation is not equal to the presentation
> time offset signalled in the \@presentationTimeOffset, then the playout
> procedures need to be adjusted accordingly.
>
> The client should play the content continuously across Periods, but there
> may be implications in terms of implementation to provide fully continuous
> and seamless playout. It may be the case that at Period boundaries, the
> presentation engine needs to be reinitialized, for example due to changes in
> formats, codecs or other properties. This may result in a re-initialization
> delay. Such a re-initialization delay should be minimized. If the Media
> Presentation is of type dynamic, the addition of the re-initialisation delay
> to the playout may result in drift between the encoder and the presentation
> engine. Therefore, the playout should be adjusted at the end of each Period
> to provide a continuous presentation without adding drift between the time
> documented in the MPD and the actual playout, i.e. the difference between
> the actual playout time and the Period start time should remain constant.
>
> If the client presents media components of a certain Adaptation Set in one
> Period, and if the following Period has assigned an identical Asset
> Identifier, then the client should identify an associated Period and, in the
> absence of other information, continue playing the content in the associated
> Adaptation Set.
>
> If furthermore the Adaptation Sets are period-continuous, i.e. the
> presentation times are continuous and this is signalled in the MPD, then the
> client is expected to seamlessly play the content across the Period
> boundary. Most suitably the client may continue playing the Representation
> in the Adaptation Set with the same \@id, but there is no guarantee that
> this Representation is available. In this case the client is expected to
> seamlessly switch to any other Representation in the Adaptation Set.
>
> For details on MPD updates and refetching, please refer to section 11.3.
#### 11.2.4.2 Joining, Initial Buffering and Playout Recommendations
##### 11.2.4.2.1 General
A DASH client is expected to start playout from:
\- The time indicated by the MPD Anchor, if one is present
\- The live edge, if there is no MPD Anchor and **MPD** \@type=\"dynamic\".
##### 11.2.4.2.2 Joining at the live edge
For joining at the live edge there are basically two high-level strategies:
\- Every client participating in the service commits to the same presentation
delay (PD) relative to the announced segment availability start time at start-
up and in continuous presentation, possible using one suggested by the Content
Provider and then attempts to minimise start-up latency and maintain the
buffer. The content provider may have provided the **MPD**
\@suggestedPresentationDelay (SPD) or may have provided this value by other
means outside the DASH formats. The content author should be aware that the
client may ignore the presence of **MPD** \@suggestedPresentationDelay and may
choose its own suitable playout scheduling.
\- The client individually picks the presentation delay (PD) in order to
maximize stable quality and does this dependent on its access, user
preferences and other considerations.
In both cases the client needs to decide, which segment to download first and
when to schedule the playout of the segment based on the committed PD.
A DASH client would download an available segment and typically render the
earliest presentation time EPT(_k_) of the segment at _PSwc_[_i_] \+ (EPT(_k_)
- _o_[_r,i_]) + _PD_. As PD may be quite large, for example in order to
provision for downloading in varying bitrate conditions, and if a segment is
downloaded that was just made available it may result in larger start up
delay.
Therefore, a couple of strategies may be considered as a tradeoff of for
start-up delay, presentation delay and sufficient buffer at the beginning of
the service, when joining at the live edge:
1) The client downloads the next available segment and schedules playout with
delay PD. This maximizes the initial buffer prior to playout, but typically
results in undesired long start-up delay.
2) The client downloads the latest available segment and schedules playout
with delay PD. This provides large initial buffer prior to playout, but
typically results in undesired long start-up delay.
3) The client downloads the earliest available segment that can be downloaded
to schedules playout with delay PD. This provides a smaller initial prior to
playout, but results in reasonable start-up delay. The buffer may be filled
gradually by downloading later segments faster than their media playout rate,
i.e. by initially choosing Representations that have lower bitrate than the
access bandwidth.
### 11.2.5 Considerations on live edge)
A DASH client should avoid being too aggressive in requesting segments exactly
at the computed segment availability start time, especially if it is uncertain
to be fully synchronized with the server. If the DASH client observes issues,
such as 404 responses, it should back up slightly in the requests.
In addition, for a content authoring to avoid too aggressive requests and
possible 404 responses, the content author may schedule the segment
availability start time in the MPD with a small safety delay compared to the
actual publish time. This also provides the content author a certain amount of
flexibility in the publishing of Segments. However, note that such safety
margins may lead to slightly increased end-to-end latencies, so it is a
balance to be taken into account.
## 11.3 Live Services with MPD Updates
### 11.3.1 Background and Assumptions
If many cases, the service provider cannot predict that an MPD that is once
offered, may be used for the entire Media Presentations. Examples for such MPD
changes are:-The duration of the Media Presentation is unknown
\- The Media Presentation may be interrupted for advertisements which requires
proper splicing of data, for example by adding a Period
\- Operational issues require changes, for example the addition of removal of
Representations or Adaptation Sets.
\- Operational problems in the backend.
\- Changes of segment durations, etc.
In this case the MPD typically only can describe a limited time into the
future. Once the MPD expires, the service provider expects the client to
recheck and get an updated MPD in order to continue the Media Presentation.
The main tool in MPEG-DASH is Media Presentation Description update feature as
described in section 5.4 of ISO/IEC 23009-1. The MPD is updated at the server
and the client is expected to obtain the new MPD information once the
determined Segment List gets to an end.
If the MPD contains the attribute **MPD** \@minimumUpdatePeriod, then the MPD
in hand will be updated. The DASH client typically frequently polls the MPD
update server whether an MPD update is available or the existing MPD can still
be used. The update frequency is controlled by MPD based on the attribute
**MPD** \@minimumUpdatePeriod.
### 11.3.2 Preliminaries
#### 11.3.2.1 MPD Information
As the MPD is typically updated over time on the server, the MPD that is
accessed when joining the service as well as the changes of the MPD are
referred to as MPD instances in the following. This expresses that for the
same service, different MPDs exist depending on the time when the service is
consumed.
Assume that an MPD instance is present on the DASH server at a specific wall-
clock time _NOW_. For an MPD-based Live Service Offering, the MPD instance may
among others contain information as available in Table 11-5. Information
included there may be used to compute a list of announced Segments, Segment
Availability Times and URLs.
Table 11-5 -- Information related to Live Service Offering with MPD-controlled
MPD Updates
* * *
**MPD Information** **Status** **Comment** **MPD** \@type mandatory, set to
\"dynamic\" the type of the Media Presentation is dynamic, i.e. Segments get
available over time. **MPD** \@availabilityStartTime mandatory the start time
is the anchor for the MPD in wall-clock time. The value is denoted as _AST_.
**MPD** \@minimumUpdatePeriod mandatory this field is mandatory except for the
case where the **MPD** \@mediaPresentationDuration is present. However, such
an MPD falls then in an instance as documented in section 11.2. **Period**
\@start mandatory the start time of the Period relative to the MPD
availability start time. The value is denoted as _PS_. **SegmentTemplate**
\@media mandatory the template for the Media Segment **SegmentTemplate**
\@startNumber optional default the number of the first segment in the Period.
The value is denoted as _SSN_. **SegmentTemplate** \@duration mandatory the
duration of each Segment in units of a time. The value divided by the value of
\@timescale is denoted as _MD_[_k_] with k=1, 2, ... The segment timeline may
contain some gaps.
* * *
#### 11.3.2.2 Segment Information Derivation
Based on an MPD instance including information as documented in Table 11-5 and
available at time _NOW_ on the server, a DASH client may derive the
information of the list of Segments for each Representation in each Period.
If the Period is the last one in the MPD and the **MPD** \@minimumUpdatePeriod
is present, then the time _PEwc_[_i_] is obtained as the sum of _NOW_ and the
value of **MPD** \@minimumUpdatePeriod. Note that with the MPD present on the
server and _NOW_ progressing, the Period end time is extended. This issue is
the only change compared to the segment information generation in section
11.2.2.2.
If the **MPD** \@minimumUpdatePeriod is set to 0, then the MPD documents all
available segments on the server.
### 11.3.3 Service Offering Requirements and Guidelines
#### 11.3.3.1 General
The same service requirements as in section 11.2.2.1 hold for any time _NOW_
the MPD is present on the server with the interpretation that the Period end
time _PEwc_[_i_] of the last Period is obtained as the sum of _NOW_ and the
value of **MPD** \@minimumUpdatePeriod.
In order to offer a simple live service with unknown presentation end time,
but only a single Period and the following details are known in advance,
\- start at wall-clock time START,
\- location of the segments for each Representation at \"
http://example.com/\$RepresentationID\$/\$Number\$\",
a service provider may offer an MPD with values according to Table 11-6.
Table 11-6 -- Basic Service Offering with MPD Updates
* * *
**MPD Information** **Value** **MPD** \@type dynamic **MPD**
\@availabilityStartTime START **MPD** \@publishTime PUBTIME1 **MPD**
\@minimumUpdatePeriod MUP **MPD.BaseURL** \"http://example.com/\" **Period**
\@start PSTART **SegmentTemplate** \@media \"\$RepresentationID\$/\$Number\$\"
**SegmentTemplate** \@startNumber 1 **SegmentTemplate** \@duration SDURATION
* * *
Based on the details in section 11.2.2.2 and 11.4.2.2, the Segment Information
can be derived at each time _NOW_ by determining the end time of the Period
_PEwc_[1] = _NOW_ \+ MUP.
The service provider may leave the MPD unchanged on the server. If this is the
case the Media Presentation may be terminated with an updated MPD that
\- adds the attribute **MPD** \@mediaPresentationDuration with value PDURATION
\- removes the attribute **MPD** \@minimumUpdatePeriod
\- changes the **MPD** \@publishTime attribute to PUBTIME2
The MPD must be published latest at the end of the Media Presentation minus
the value of MUP, i.e. PUBTIME2 \\ \\ \\
\\ \
\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \
\\
\\
\
# B.3 3GPP Extension Schema
Table B-2: XML schema of the 3GPP Extensions for MPD
* * *
\\ \\ \\ \Extensions to Media Presentation
Description for 3GPP\\ \\ \ \\ \ \\ \\ \\ \\ \\ \\ \\ \\ \\ \ \
\
* * *
###### ## Annex C (normative): Descriptor Scheme Definitions
# C.1 Introduction
This annex defines descriptors that are defined in this specification. In
particular the following descriptors are defined
\- 3D Video disparity range descriptor scheme in clause C.4.
\- 3D Video display information descriptor scheme in clause C.5.
Note: Other descriptors are defined in ISO/IEC 23009-1 [43], section 5.9.
# C.2 Void
Table C.1: Void
# C.3 Void
# C.4 3D Video Disparity Range Descriptor Scheme
The 3D Video Disparity Range description scheme may only be signalled in
**SupplementalProperty** element with SupplementalProperty\@schemeIdUri set to
urn:3GPP:dash:3dVideoDisparityRange:2013. When present the 3D Video Disparity
Range description scheme shall be on the Adaptation Set level. The
SupplementalProperty\@value of 3D Video Disparity Range description scheme
shall be present and is defined below using ABNF [40]:
\@value=\"disparityRange\"
disparityRange = disparityMinValue disparityMaxValue
disparityMinValue = [%x2D]1*3DIGIT
disparityMaxValue = [%x2D]1*3DIGIT
disparityMinValue and disparityMaxValue are expressed as the minimum and the
maximum disparity, in units of pixels, divided by the width of the 3D video
content, in units of pixels, multiplied by one hundred. disparityMinValue and
disparityMaxValue shall be the same for all Representations included in an
Adaptation Set containing this descriptor scheme.
NOTE 1: The disparity is the difference between the horizontal positions of a
pixel representing the same point in space in the right and left views of a
stereoscopic 3D video frame. Positive disparity values move the object away
from the viewer whilst negative values move it towards the viewer. A value of
zero places the object in the plane of the display screen.
NOTE 2: The DASH client can calculate the perceived depth of the stereoscopic
3D content based on the provided disparity range and the prevailing contextual
information, such as a screen size used to display the content, and the
calculated or predefined distance of a viewer from the display. Based on the
calculated depth range perceived by a user, the DASH client can determine
applicability of the stereoscopic 3D video content provided for a given
Adaptation Set. [41]
# C.5 3D Video Display Information Scheme
The 3D Video Display Information description scheme may only be signalled in
**SupplementalProperty** element with SupplementalProperty\@schemeIdUri
urn:3GPP:dash:3dVideoDisplayInformation:2013. When present the 3D Video
Display Information description scheme shall be present on the Adaptation Set
level. The SupplementalProperty\@value of 3D Video Display Information
description scheme shall be present and is defined below using ABNF [40]:
\@value=\"displayInformation\"
displayInformation = displayWidth [viewingDistance]
displayWidth = 1*5DIGIT
viewingDistance = 1*5DIGIT
displayWidth and viewingDistance provide actual values for which the
stereoscopic 3D video content is optimized and are expressed in millimeters.
The displayWidth defines the width of the part of the screen actually used for
displaying the 3D video content.
NOTE: The DASH client can choose the Adaptation Set which contains the 3D
Video Display Information Scheme with displayWidth closest to the actual
display size used by the DASH client to display the content.
###### ## Annex D (informative): MPD Examples
# D.1 On-Demand Service
Table D.1 provides an example MPD for an On-Demand service.
Table D.1: Example MPD for an On-Demand Service
* * *
\\ \\ \\ \Example\\
\\ \http://www.example.com\\ \\ \\ \\ \\ \\ \\"rep1\"\\ \\ \\
\\ \\
\\ \\ \\
\\ \\"rep2\"\\ \\
\\ \\ \\ \\ \\ \\ \\
\\ \\ \\
\\
\\ \\ \\ \\
\\ \\ \
* * *
# D.2 Live Service
Table D.2 provides an example MPD for a live service.
Table D.2: Example MPD for a Live Service
+----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \Example 3: 3GPP SA4 Meeting in Vancouver as Live | | Broadcast\\ | | \3GPP\\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | +----------------------------------------------------------------------+
# D.3 MPD Assembly
Table D.3 provides an example MPD with reference to external Period element as
provided in Table D.4. An equivalent MPD to the one in Table D.3 after
dereferencing with the **Period** element in Table D.4 is shown in Table D.2.
Table D.3: Example MPD with reference to external Period element
* * *
\\ \\ \\ \Example 3: 3GPP SA4
Meeting in Vancouver as Live Broadcast\\ \3GPP\\
\\ \\ \\ \\
\\ \\
\\ \\ \\ \\ \\
\\ \\ \\ \\
\ \\ \\ \\ \\ \\ \\ \\ \\
\\ \\
\\ \\
\\ \\ \\ \\ \\ \\
\
* * *
Table D.4: External Period
* * *
\\ \\ \\ \\ \\
\\ \\ \\ \\ \
* * *
# D.4 MPD Deltas
In the following MPD example, the content is 30 minutes in duration. There are
3 Periods, each of 10 minutes duration. Each Period has 3 Representations and
each Representation is contained within one 3gp file. Each Representation has
audio encoded with Low Complexity-AAC. One Representation of each Period
(p1rep1.3gp, p2rep1.3gp, and p3rep1.3gp) has video resolution 320x240 encoded
with H.264 baseline profile level 1.1. Another Representation of each Period
(p1rep2.3gp, p2rep2.3gp, and p3rep2.3gp) has resolution 320x240 encoded with
H.264 baseline profile level 1.3. Finally, a third representation in each
period (p1rep3.3gp, p2rep3.3gp, and p3rep3.3gp) has resolution 480x240 encoded
with H.264 baseline profile level 2.1. One Representation of each Period has
bandwidth of 239 kbps, a second representation has bandwidth of 478 kbps, and
a third representation has bandwidth of 892 kbps.
Since each represention is contained in one file, the Initialization Segments
and the Media Segments for a representation are accessed with byte ranges.
Each **SegmentURL** element in the MPD contains a **mediaRange** attribute and
the corresponding byte range for the Initialization Segment or Media Segment.
For the example each Segment of all representations is 10 seconds in duration.
Line numbers of the MPD in the example are shown for clarity, although these
would not be present in the MPD.
EXAMPLE 1 (add)
The change of adding the SegmentURL element for the next Segment to the
Representation of the third Period of the MPD in the example with 239K
bandwidth can be described as follows.
492a
\
.
The SegmentURL element is added on a new line after line number 492.
EXAMPLE 2 (replace)
Replacing the line containing the **DeltaSupport** element to correspond to
the MPD after the next update can be described as follows.
625c
\
.
EXAMPLE 3(delete)
If lines 8 through 10 of the original MPD are deleted and not present in the
updated MPD, the delta to express this is:
8,10d
.
Below is what the MPD looks like after approximately 29 minutes and 40
seconds. In this case, the MPD is updated approximately every 10 seconds.
+----------------------------------------------------------------------+ | 1\ | | | | 2\ | | | | 14 | | | | 15 \ | | | | 16 \Example\ | | | | 17 \Example\ | | | | 18 \Example\ | | | | 19 \ | | | | 20 \http://www.example.com\ | | | | 21 \ | | | | 22 \ | | | | 23 \\ | | 24 \ | | | | 25 \ | | | | 26 \\"p1rep1.3gp\"\ | | | | 27 \ | | | | 28 \ | | | | 29 \ | | | | 30 \ | | | | . | | | | . | | | | . | | | | 88 \ | | | | 89 \ | | | | 90 \ | | | | 91 \ | | | | 92 \\"p1rep2.3gp\"\ | | | | 93 \ | | | | 94 \ | | | | 95 \ | | | | 96 \ | | | | . | | | | . | | | | . | | | | 154 \ | | | | 155 \ | | | | 156 \ | | | | 157 \ | | | | 158 \\"p1rep3.3gp\"\ | | | | 159 \ | | | | 160 \ | | | | 161 \ | | | | 162 \ | | | | . | | | | . | | | | . | | | | 220 \ | | | | 221 \ | | | | 222 \ | | | | 223 \ | | | | 224\ | | | | 225\ | | | | 226 \ | | | | 227 \\ | | 228 \ | | | | 229 \ | | | | 230 \\"p2rep0.3gp\"\ | | | | 231 \ | | | | 232 \ | | | | 233 \ | | | | 234 \ | | | | . | | | | . | | | | . | | | | 292 \ | | | | 293 \ | | | | 294 \ | | | | 295 \ | | | | 296 \\"p2rep1.3gp\"\ | | | | 297 \ | | | | 298 \ | | | | 299 \ | | | | 300 \ | | | | . | | | | . | | | | . | | | | 358 \ | | | | 359 \ | | | | 360 \ | | | | 361 \ | | | | 362 \\"p2rep2.3gp\"\ | | | | 363 \ | | | | 364 \ | | | | 365 \ | | | | 366 \ | | | | . | | | | . | | | | . | | | | 424 \ | | | | 425 \ | | | | 426 \ | | | | 427 \ | | | | 428\ | | | | 429\ | | | | 430 \ | | | | 431 \\ | | 432 \ | | | | 433 \ | | | | 432 \\"p3rep0.3gp\"\ | | | | 433 \ | | | | 434 \ | | | | 435 \ | | | | 436 \ | | | | . | | | | . | | | | . | | | | 492 \ | | | | 493 \ | | | | 494 \ | | | | 495 \ | | | | 496 \\"p3rep1.3gp\"\ | | | | 497 \ | | | | 498 \ | | | | 499 \ | | | | 500 \ | | | | . | | | | . | | | | . | | | | 556 \ | | | | 557 \ | | | | 558 \ | | | | 559 \ | | | | 560 \\"p3rep2.3gp\"\ | | | | 561 \ | | | | 562 \ | | | | 563 \ | | | | 564 \ | | | | . | | | | . | | | | . | | | | 620 \ | | | | 621 \ | | | | 622 \ | | | | 623 \ | | | | 624 \ | | | | 625 \ | | | | 626\ | +----------------------------------------------------------------------+
Since the value of \@sourceURL in the above MPD is "delta1.mpdd", delta1.mpdd
is an empty file at the time of publication of the above MPD.
The following file is delta1.mpdd after the next MPD update. Notice that
clients have access to the new value of \@sourceURL referenced by the latest
MPD via the delta.
+----------------------------------------------------------------------+ | 625c | | | | \ | | | | . | | | | 620a | | | | \ | | | | . | | | | 556a | | | | \ | | | | . | | | | 492a | | | | \ | | | | . | +----------------------------------------------------------------------+
At the next MPD update, "delta1.mpdd" would contain the cumulative update for
2 MPD updates.
+----------------------------------------------------------------------+ | 625c | | | | \ | | | | . | | | | 620a | | | | \ | | | | \ | | | | . | | | | 556a | | | | \ | | | | \ | | | | . | | | | 492a | | | | \ | | | | \ | | | | . | +----------------------------------------------------------------------+
###### ## Annex E (normative): Void
###### ## Annex F (normative): OMA DM QoE Management Object
As an alternative to configuring the QoE reporting for each session via MPD,
OMA-DM can be used to specify the QoE configuration. If such an OMA-DM QoE
configuration has been specified, it shall be evaluated by the client for all
subsequent sessions.
For the OMA-DM QoE configuration the parameters are specified according to the
following Managed Object (MO), and represents the same information as
specified in section 10.4 and 10.5. Version numbering is included for possible
extension of the MO.
The Management Object Identifier shall be: urn:oma:mo:ext-3gpp-pss-dash-
qoe:1.0.
Protocol compatibility: The MO is compatible with OMA Device Management
protocol specifications, version 1.2 and upwards, and is defined using the OMA
DM Device Description Framework as described in the Enabler Release Definition
OMA-ERELD _DM-V1_2 [22].
The nodes and leaf objects as provided in Figure F.1 shall be contained under
the 3GPP_PSS_DASH_QOE node if a client supports the feature described in this
clause.
{width="2.9159722222222224in" height="5.757638888888889in"}
Figure F.1: Nodes and leaf objects
**Node: /\ **
This interior node specifies the unique object id of a QoE metrics management
object. The purpose of this interior node is to group together the parameters
of a single object.
\- Occurrence: ZeroOrOne
\- Format: node
\- Minimum Access Types: Get
The following interior nodes shall be contained if the client supports the QoE
Management Object.
**/\ /Enabled**
This leaf indicates if QoE reporting is requested by the provider.
\- Occurrence: One
\- Format: bool
\- Minimum Access Types: Get
**/\ /Servers**
This leaf contains a space-separated list of servers to which the QoE reports
are transmitted. It is URI addresses, e.g. http://qoeserver.operator.com. In
case of multiple servers, the client randomly selects one of the servers from
the list, with uniform distribution.
\- Occurrence: One
\- Format: chr
\- Minimum Access Types: Get
\- Values: URI of the servers to receive the QoE report.
**/\ /APN**
This leaf contains the Access Point Name that should be used for establishing
the PDP context on which the QoE metric reports will be transmitted. This may
be used to ensure that no costs are charged for QoE metrics reporting. If this
leaf is not defined then any QoE reporting is done over the default access
point.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: The Access Point Name
**/\ /Format**
This leaf specifies the format of the report.If this leaf is not defined the
QoE reports shall be sent uncompressed.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: "uncompressed", "gzip"
**/\ /Interval**
This leaf specifies how often QoE reports shall be sent. If this leaf is not
defined only one QoE report shall be sent after the complete session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds
**/\ /SamplePercentage**
This leaf specifies the percentage of sessions for which QoE metrics shall be
reported. The client evaluates a random number at start of each session to
determine if reporting shall be done for the specific session. If this leaf is
not defined QoE reports are sent for every session.
\- Occurrence: ZeroOrOne
\- Format: float
\- Minimum Access Types: Get
\- Values: 0.0-100.0.
**/\ /StartTime**
This leaf specifies when collection of QoE metrics shall start. It is
specified in seconds and is relative to the start of the session. If this leaf
is not defined, the QoE collection shall be done from the start of the
session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds
**/\ /Duration**
This leaf specifies for how long QoE collection shall be done. It is specified
in seconds and is relative to the start time of QoE collection. If this leaf
is not defined QoE collection shall be done until the end of the session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds.
**/\ /Metrics**
This leaf specifies a list of white-space separated metrics which shall be
reported, and follows the same syntax as specified for the \"\@metrics\"
attribute in Table 32. If this leaf is not defined no QoE reporting shall be
done.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: Metrics as specified in section 10.4.
**/\ /Ext**
The Ext node is an interior node where the vendor specific information can be
placed (vendor includes application vendor, device vendor etc.). Usually the
vendor extension is identified by vendor specific name under the ext node. The
tree structure under the vendor identified is not defined and can therefore
include one or more un-standardized sub-trees.
\- Occurrence: ZeroOrOne
\- Format: node
\- Minimum Access Types: Get
###### ## Annex G (normative): File format extensions for 3GP DASH support
# G.1 Introduction
This clause documents extensions to the ISO base media file format [11] for
the support of 3GPP DASH.
All extensions are documented in ISO base media file format [11].
# G.2 Void
# G.3 Void
# G.4 Void
# G.5 Void
# G.6 Void
###### ## Annex H (normative): MIME Type Registration for MPD
# H.1 MPD MIME Type
## H.1.1 Introduction
The MIME type of the MPD is registered and available at the registry at
http://www.iana.org/assignments/media-types/application. For formal
registration, refer to ISO/IEC 23009-1 [43], Annex C.
## H.1.2 Void
## H.1.3 Void
# H.2 MPD Delta MIME Type
## H.2.1 Introduction
This Annex provides the formal MIME type registration for the MPD Delta. The
MIME type is registered with IANA and available at
http://www.iana.org/assignments/media-types/application/dashdelta.
## H.2.2 MIME Type and Subtype
The MIME Type and Subtype are defined as follows:
Media Type Name: application
Subtype name: Standards Tree - dashdelta
Required parameters: none
Optional parameters: none
Encoding considerations: 8-bit text
Security considerations:
> A Media Presentation Description (MPD) Delta contains text changes to an
> MPD. An MPD Delta is used together with a first MPD to construct a second
> MPD. As such, any security considerations for an MPD (media type
> application/dash+xml) may also be applicable to an MPD Delta. A MIME type
> handler would not launch a service with only an MPD Delta.
>
> Further to this, as an MPD Delta performs editing operations on an MPD there
> are risks that deliberately malformed editing operations could cause
> security issues.
Interoperability considerations:
Published specification: 3GPP TS 26.247
Applications which use this media type:
> various including but not limited to On-Demand Streaming over the Internet,
> Live Streaming over the Internet, Internet Video, Internet Radio
Additional information:
> 1\. Magic number(s) : none
>
> 2\. File extension(s) : mpdd
>
> 3\. Macintosh file type code : none
>
> 4\. Object Identifiers: none
Person to contact for further information:
> 1\. Name : David Furbeck
>
> 2\. Email : dfurbeck\@blackberry.com
Intended usage : Common
Author/Change controller : 3GPP TSG SA WG4
###### ## Annex I (informative): Signalling of DASH AVP values for QoS
handling in the PCC
The PCC architecture is defined in TS 23.203 [31] and provides the Rx
reference point, which enables the application layer to authorize a specific
usage. In this architecture the DASH HTTP streaming server or any other
function in the HTTP streaming path (e.g. an HTTP proxy) can act as
Application Function and interact with the PCRF via the Rx reference point for
QoS control. It is assumed here that the AF has knowledge of the application
type and of the MPD.
The relevant AVPs are the ones enabling the PCRF to establish bearers with
correct characteristics for DASH users. The AVPs are defined in TS 29.214
[33]. The further PCRF mapping from AVP to IP QoS parameter mapping is defined
in TS 29.213 [32]
Table I.1: Example mapping of MPD parameters to Rx AVPs for 3GP-DASH (PSS)
+----------------------+----------------------+----------------------+ | AVP | Value | Comment | +----------------------+----------------------+----------------------+ | AF-Ap | "DASH" | Allows to signal the | | plication-Identifier | | DASH based | | | | application hence | | | | giving the | | | | opportunity to | | | | enforce application | | | | specific policies | +----------------------+----------------------+----------------------+ | Max-Re | B1 | B1 = sum of all | | quested-Bandwidth-DL | | * | | | | _MPD_ _\@maxBandwidth | | (NOTE 1) | | (see clause 8.4.3.3) | | | | of all media | | | | components | | | | [simultaneously (not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | If this attribute is | | | | not present then | | | | | | | | B1 = sum of | | | |__MPD_ _\@bandwidth | | | | attributes of all | | | | media components of | | | | the available media | | | | presentation | | | | corresponding to | | | | representations or | | | | subrepresentations | | | | with highest | | | | bandwidth | | | | [simulta | | | | neously]{.underline} | | | | selectable [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | by the DASH client | | | | plus HTTP/TCP/IP | | | | overhead and TCP | | | | messages for flow | | | | control. | | | | | | | | Note: the mapping | | | | rules to derive the | | | | TCP message flow | | | | control bandwidth | | | | are FFS. | +----------------------+----------------------+----------------------+ | Max-Re | FFS | For Further Study. | | quested-Bandwidth-UL | | If included, should | | | | be greater than or | | (NOTE 1) | | equal to | | | | Min-Re | | | | quested-Bandwidth-UL | +----------------------+----------------------+----------------------+ | Min-Re | B2 | B2 = sum of all | | quested-Bandwidth-DL | | * | | | |_ MPD**\@minBandwidth | | (NOTE 1) | | (see clause 8.4.3.3) | | | | of all media | | | | components | | | | simultaneously [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | If this attribute is | | | | not present then | | | | | | | | B2 = sum of | | | |** MPD**\@bandwidth | | | | attributes of all | | | | media components of | | | | the available media | | | | presentation | | | | corresponding to | | | | representations or | | | | subrepresentations | | | | with lowest | | | | bandwidth | | | | simultaneously [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | Note: the mapping | | | | rules to derive the | | | | TCP message flow | | | | control bandwidth | | | | are FFS. | +----------------------+----------------------+----------------------+ | Min-Re | FFS | For Further Study. | | quested-Bandwidth-UL | | Enough bitrate to | | | | cover TCP and HTTP | | (NOTE 1) | | GET requests. | +----------------------+----------------------+----------------------+ | Flow-Description AVP | IP addresses and | | | | ports | | | (NOTE 1) | | | +----------------------+----------------------+----------------------+
NOTE 1: AVPs provided within the Media-Component-Description AVP, except Flow-
Description AVP that is included within the Media-Sub-Component AVP. Omitted
AVPs are not relevant for this functionality.
###### ## Annex J (normative): MIME Type Registration for QoE Reports
# J.1 Introduction
This Annex provides the formal MIME-type registration for
\"application/3gpdash-qoe-report+xml\" that identifies XML documents following
the schema \"urn:3gpp:metadata:2011:HSD:receptionreport\" defined in clause
10.6.2. It is referenced from the registry at http://www.iana.org/.
## J.2 MIME Type and Subtype
The MIME Type and Subtype are defined as follows:
Media Type name: application
Subtype name: Standards Tree - 3gpdash-qoe-report+xml
Required parameters:
None
Optional parameters:
charset: If a charset parameter is provided its value must be
\"utf-8\".Encoding considerations: 8bit
The utf-8 charset is always used for this type.
Security considerations:
The general XML security issues are addressed in clause 10 of RFC 3023 [83].
> The QoE report XML document instances contain information about what
> content, services and files a particular UE has received. The information
> also has privacy relevance as it reveals what a specific receiver, which
> usually can be connected to a specific user, has received.
This media type only contains quality of experience data; there is no defined
executable content.
XML from other vocabularies is allowed in this media type. Such material will
have its own security considerations.
> If operating in an insecure environment and required by the content/service
> provider, elements and attributes of the report may be encrypted to protect
> their confidentiality.
>
> If operating in an insecure environment and required by the content/service
> provider, digital signing and verification procedures may be used to protect
> data origin authenticity and integrity of the report.
>
> Thus to prevent manipulation of that information it would need to be
> integrity protected.
Interoperability considerations:
None
Published specification:
3GPP TS 26.247
Applications which use this media type:
3GPP DASH based applications
3GPP progressive download applications
Additional information:
None
Person & email address to contact for further information:
Ozgur Oyman (ozgur.oyman\@intel.com)\ 3GPP TSG SA WG4
Intended usage: COMMON
Restrictions on usage:
None
Author:
3GPP TSG SA WG4
Change controller:
3GPP TSG SA WG4
#