# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
Single Radio -- Voice Call Continuity (SRVCC) is an existing standard ([3],
[4]), specifying the handover of a Voice or Video call from LTE access to CS
radio access, either to GERAN (2G) or to UTRAN (3G) or other CS networks. The
present document considers only SRVCC for voice calls between 3GPP accesses.
In the IMS Core Network, the voice call is typically anchored in the ATCF/ATGW
(Access Transfer Control Function / Access Transfer Gate Way). The SRVCC
procedure, as specified, may cause additional transcoding between the target
radio leg and the ATGW, even though in theory it would be possible to avoid
it. As a result, the SRVCC procedures may add one or more unnecessary
transcoding point(s) for the call and thereby degrade the quality of the
ongoing call unnecessarily.
Transcoder free Operation (TrFO) is always desirable to achieve good voice
quality. Furthermore TrFO preserves network resources, i.e. by avoiding
transcoding. TrFO is especially important for HD Voice.
The Mobility Management Entity (MME) of the LTE-RAN, which sends the PS-to-CS
Handover Request to the Target Network, does not know the **IMS Selected
Codec** , which is in use before the SRVCC in the ongoing call towards the
remote end. Thus the MME cannot support the Target Network for selecting the
optimal **Target RAN Codec**. The Target Network thus selects this Target RAN
Codec on own criteria; often the Target RAN Codec is then not compatible to
the IMS Selected Codec. Transcoding is then the immediate reaction.
While it is possible for the ATCF, based on the current procedure, to
renegotiate the IMS Selected Codec with the remote end to fit any selected
Target RAN Codec at call transfer, this may extend the perceived time it will
take to conclude the call transfer and this might extend the speech
interruption time that might result due to the time the additional negotiation
with the remote end will take. The ATCF was introduced for exactly that
reason: avoid renegotiation with the remote end -- accelerate SRVCC.
But even worse: in a substantial number of call scenarios the remote end may
not be able to support the arbitrarily chosen Target RAN Codec and the
transcoding cannot even be avoided by that renegotiation.
The first attempt will optimize the Target RAN Codec to fit the IMS Selected
Codec. If that is impossible or not optimal, then the renegotiation with the
remote end might be attempted. The last resort has to be transcoding;
sometimes it is unavoidable.
# 1 Scope
Single Radio -- Voice Call Continuity (SRVCC) is an existing standard ([3],
[4]) specifying the handover of a Voice or Video call from LTE access to CS-
radio access, either to GERAN (2G) or to UTRAN (3G) or other CS networks. The
present document considers only SRVCC for voice calls between 3GPP accesses.
This study assumes that the Codecs defined in TS 26.114 are used on the LTE
access and the Codecs defined in TS 26.103 on the CS accesses.
In the IMS Core Network, the voice call is typically anchored in the ATCF/ATGW
(Access Transfer Control Function / Access Transfer Gate Way).
The SRVCC procedure, as specified, may cause additional transcoding between
the target radio leg and the ATGW, even though in theory it would be possible
to avoid it. As a result, the SRVCC procedures may add one or more unnecessary
transcoding point(s) for the call and thereby degrade the quality of the
ongoing call unnecessarily.
The main objectives of this study are to analyse example call scenarios and
find potential solutions to minimize the number of transcoding cases. Another
objective is to optimize the interworking and the transition between EVS and
AMR-WB during SRVCC. The study should also show the reasons and potential
solutions for too long speech path interruptions during SRVCC.
The present Technical Report has the following detailed objectives:
\- Identify relevant SRVCC scenarios, especially with Codec Mode Control\ from
AMR-WB and/or EVS in VoLTE to AMR-WB and/or EVS in CS;\ but include also other
important Codecs, such as AMR and G.722.
\- Analyse Speech Quality Aspects and Media Handling Aspects, based on these
scenarios.
\- Analyse Codec Mode Control before, during and after SRVCC;\ recently SA4
has clarified some essential details on Rate Control for AMR and AMR-WB;\ Rate
Control and Audio Bandwidth Control for EVS are still under discussion to some
extent.
\- Analyse the existing SDP Offer -- Answer protocol between Target MSC and
Anchor-ATCF during SRVCC,\ as specified in TS 23.216 Stage 2;\ This analysis
will include the whole SRVCC procedure for at least one essential scenario\
(e.g. SRVCC to GERAN) and will identify the potential reasons for transcoding
and too long speech path interruptions.
\- Clarify the existing Codec Compatibility aspects for SRVCC;\ especially the
interworking between CS and IMS for AMR, AMR-WB and EVS needs to be
documented.
\- Propose enhancements for media and quality aspects of SRVCC with the aims:\
a) to avoid transcoding cases as much as possible;\ b) to minimize the speech
path interruption time during SRVCC;
\- Support the SA2 SETA work by SA4 expertise in speech quality and media
handling.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 41.001: \"GSM Release specifications\".
[3] 3GPP TS 23.216 (V.12.1.0): \"Single Radio Voice Call Continuity (SRVCC);
Stage 2\".
[4] 3GPP TS 24.237 (V.13.0.0): \"IP Multimedia Subsystem (IMS) Service
Continuity; Stage 3\".
[5] 3GPP TS 26.114 (V.12.10.0): \"Multimedia Telephony; Media handling and
interaction; Stage 3\".
[6] 3GPP TR 23.717 (V.1.0.0): \"Study on SRVCC enhancements for Transcoding
Avoidance\".
[7] 3GPP TS 26.103 (V.12.0.0): \"Speech codec list for GSM and UMTS\".
[8] 3GPP TS 26.445: \"Codec for Enhanced Voice Services (EVS); Detailed
algorithmic description\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Codec Type:** defines a specific type of a speech coding algorithm, applied
on a specific radio or other transport technology, e.g. GSM FR, FR_AMR, AMR,
AMR-WB, EVS, G.722, G.711, see also TS 26.103.
**Codec Mode:** defines a specific mode of a Codec Type, e.g. the 12,2 kbps
mode of the AMR.
**Codec Configuration:** defines the full set of attributes to a certain Codec
Type, e.g. the set of Codec Modes.
**Codec:** The term \"Codec\" is used for the combination of Codec Type plus
Codec Configuration, as used in Codec Negotiation, like in the SIP/SDP Offer -
Answer procedure or in BICC IAM - APM signalling.
**Target RAN Codec:** The Codec chosen by the Target Network for the Target
RAN leg after SRVCC;\ example: FR_AMR(0,2,4,7), HR_AMR(0,2,4),
UMTS_AMR2(0,2,4,7).
**IMS Selected Codec:** The Codec selected for the call before SRVCC from the
ATGW towards the remote end; example: AMR(0,2,4,7), AMR-WB(), EVS(), G.722,
G.711.
**CS PS Codec:** The Codec for the Interface between CS- and IMS-network.
Example: G.711, AMR(0,2,4,7), AMR-WB(0,1,2), EVSoCS(...).
**LTE Used Codec:** The Codec used on the LTE RAN leg before SRVCC between
local UE and ATGW. Example: AMR(0,2,4,7), AMR-WB(), EVS().
**Local EVS Configuration:** is sent to the EVS client by SIP/SDP or CS
Signalling after Codec (re-) Negotiation, or to a MGW within the path. There
might be different local EVS Configurations along the speech path for
different sub-links.
**EVS Framework Configuration** : is selected by the Offer-Answer Codec
Negotiation at call setup or in mid-call modifications. It is the intersection
of all Local EVS Configurations along the speech path. It is not explicitly
known to every node in the path.
**Active EVS Configuration:** is always as big as or smaller than the EVS
Framework Configuration, never bigger. It may be modified by CMR and \- maybe
- other influences, like RNC Max-Rate-Control. A voice call has two Active EVS
Configurations, one in each direction.
**Assumption:** A client hosting the EVS Encoder/Decoder may send CMR anytime
to influence the media-stream it receives. The sent CMR value is always within
the limits of the local EVS Configuration; it may be outside the perceived
Active EVS Configuration in receiving direction. It may happen that a node
(e.g. MGW) receives CMR-values outside the local EVS Configuration of next
following link. The node then limits the received CMR values to the next local
EVS Configuration. This guarantees that the CMR-receiving media-sender gets in
error free cases only CMR values within its own local EVS Configuration.
**Naming convention:** An EVS Codec is named by its main SDP parameters in the
SDP Answer, put in brackets ().\ Example: \"**EVS (br=5.9-128; bw=nb-fb)** \".
This example means: The EVS primary mode of operation is selected with all
audio bandwidths allowed. The \"mode-set\" parameter for EVS-IO need not
(always) to be present (Open Offer, Open Answer).
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
**()** without a mode-set, e.g. in the Open Offer
**(0,2,4,7)** with mode-set=0,2,4,7.
**(...)** with or without a mode-set.
**AMR()** AMR Codec without a mode-set
**AMR (0,2,4,7)** AMR Codec with mode-set=0,2,4,7
**FR_AMR(...)** AMR Codec on the Full Rate GERAN traffic channel
**HR_AMR(...)** AMR Codec on the Half Rate GERAN traffic channel
**UMTS_AMR2(...)** AMR Codec on the UTRAN traffic channel
**AMR-WB()** AMR-WB Codec without a mode-set
**AMR-WB (0,1,2)** AMR-WB Codec with mode-set=0,1,2
**FR_AMR-WB(...)** AMR-WB Codec on the Full Rate GERAN traffic channel
**UMTS_AMR-WB(...)** AMR-WB Codec on the UTRAN traffic channel
**EVS()** EVS Codec with all its operational modes, i.e. in the Open Offer
**EVS (br=5.9-128; bw=nb-fb)** EVS Codec with all its operational modes, i.e.
in the Open Offer
**EVS-NB (...)** EVS Codec in Narrow-Band operation
**EVS-WB (...)** EVS Codec in Wide-Band operation
**EVS-SWB(...)** EVS Codec in Super-Wide-Band operation
**EVS-FB(...)** EVS Codec in Full-Band operation
**EVS-IO (...)** EVS in AMR-WB Inter-Operable operation
> **\ ** is used when two Codecs are TrFO-compatible, i.e. no transcoding
> is required;\ example: AMR(0,2,4,7) \ HR_AMR(0,2,4);\ example: EVS-
> IO(0,1,2) \ AMR-WB(0,1,2).
>
> **\ ** is used when transcoding is required;\ example: AMR(0,2,4,7)
> \ UMTS_AMR2(0,2,5,7);\ example: EVS-NB() \ FR_AMR(0,2,4,7).
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply.\ An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
**ATCF** Access Transfer Control Function (on Control Plane)
**ATGW** Access Transfer Gate Way (on User Plane)
**BICC** Bearer Independent Call Control
**IAM** Initial Application Message (functionality-wise like SIP Invite)
**APM** Application Transport Mechanism (functionality-wise like SIP Response)
**AMR** Adaptive Multi-Rate (Codec)
**AMR-WB** Adaptive Multi-Rate WideBand (Codec)
**EVS** Enhanced Voice Services (Codec)
**MSC** Mobile Switching Center
**sMSC** SRVCC MSC
**tMGW** Target Media GateWay
**tRAN** Target RAN
**RAN** Radio Access Network
**SID-Con** SID-Conversion between EFR-SID and AMR-SID
**SID** Silence Descriptor
**eNB e** volved **N** ode **B** ase-station
# 4 SRVCC Reference Architecture
Figure 4-1 shows the Reference Architecture for SRVCC, as used in the present
document. In this Reference Architecture the \"SRVCC MSC\" (sMSC) has direct
control over the \"Target RAN\" (tRAN).
Note**:** In many life networks there is, however, another \"Target MSC\"
inserted between the SRVCC MSC and the Target RAN. This has the advantage that
only the SRVCC MSC has to be updated for the communication with MME and ATCF,
while the Target MSC can be left SRVCC-agnostic. The interface between SRVCC
MSC and Target MSC is as for any legacy Inter-MSC handover. It can be regarded
in the context of the present document as a \"solved problem\" and so it is
sufficient to concentrate on the shown Reference Architecture.
{width="6.530555555555556in" height="4.204861111111111in"}
Figure 4-1: Reference Architecture for SRVCC
Figure 4-1 introduces also terms to be used within the present document.
It is assumed that there is a VoLTE call already set up and ongoing between
the UE at the \"left side\" of the ATGW and a partner at the remote end. The
ATCF/ATGW are inserted in the call as Anchor, if SRVCC is supported by all
necessary nodes, especially the UE.
Note that two \"Handover Switching Points\" exist, as in every handover.
> \- One is the \"Handover on Air\": The local UE disconnects from the LTE RAN
> and reconnects to the Target RAN (here GERAN or UTRAN).
>
> \- The other is the \"Handover in the ATGW\". It is theoretically and
> practically impossible (!) to synchronize both Handover Switching Points in
> time exactly.
Please note that the local UE is not connected to both radio accesses
simultaneously, as the figure seems to suggest. \"Single Radio\" connectivity
is the basis for SRVCC.
# 5 SRVCC Reference Procedure
## 5.1 General
**Figure 5.1-1** is a direct reprint of 3GPP TS 23.216 Figure 6.2.2.1-1,
showing the essential SRVCC for the simplest case of an active voice call,
without a parallel data session, from LTE to GERAN.
{width="6.590972222222222in" height="6.397916666666666in"}
Figure 5.1-1 (3GPP TS 23.216 Figure 6.2.2.1-1): SRVCC from E-UTRAN to GERAN
without DTM support
Figure 5.1-2 is a substantially simplified version of 3GPP TS 23.216 Figure
6.2.2.1-1, focusing on the purpose of the present document, referring to the
simplified Reference Architecture and the introduced terms.
{width="6.535416666666666in" height="4.6402777777777775in"}
Figure 5.1-2: Reference Procedure of SRVCC from LTE to GERAN
In this simplified version message 13 \"PS to CS Response\" is sent by the
Target MSC **before** it got confirmation from the ATCF by message 11b \"SIP
Response\". This is Stage 2 behaviour. The idea behind this timing sequence is
to synchronize the handover in the ATGW as close as possible with the handover
on air.
This Reference Procedure, shown in Figure 5.1-2, will be used as basis in the
present document.
## 5.2 Codec Selection during SRVCC
The local UE is moving through the radio networks and is continuously
observing and measuring its radio environment. It is reporting these
measurements to the LTE base station (eNB). Some when the eNB may decide that
a GERAN (or UTRAN) radio cell is better suited for the voice call and may send
a Handover Required message to the MME, including the wanted Target Radio. The
MME sends this information to the relevant SRVCC MSC as PS-to-CS Handover
Request message.
This **PS-to-CS Handover Request** message contains also the \"**UE Supported
Codec List** \" (UE-SCL), as supported by the Local UE for the Target Radio
Network(s), i.e. for GERAN and/or UTRAN.
The UE-SCL may contain all specified GERAN Codecs:\ FR_AMR-WB, FR_AMR, HR_AMR,
EFR, HR, FR.
The UE-SCL may contain all specified UTRAN Codecs:\ UMTS_AMR-WB, UMTS_AMR2,
UMTS_AMR and (in future) EVSoCS.
**This PS-to-CS Handover Request message does not include the IMS Selected
Codec** and not the LTE Used Codec, because the MME has no knowledge about the
Application Layer.
The Target MSC decides, based on the received UE-SCL and the known Target RAN
Capabilities, which Codec is the **locally optimal** Codec for the Target RAN.
This Target RAN Codec is based on local Target RAN criteria, without
sufficient knowledge about the ongoing call.
The MSC takes the best possible Codec Type and Configuration, as locally
preferred (set by the operator) for the Target RAN, given the received UE-SCL.
Assignment Request is sent to GERAN (or RAB Assignment to UTRAN) and the voice
path between Target RAN and Target MGW is setup, including all necessary
details on Target MGW Context, MGW Termination properties, IP addresses1, UDP
Ports1 and whatever is required.
Then, when all these preparations are done, the MSC sends a **SIP Invite**
message to the ATCF to initiate the session transfer. This SIP Invite contains
the so called \"**MSC Preferred Codec List2** \" (MSC-PCL2), with the Target
RAN Codec on first place (i.e. most preferred). It also contains the
connectivity data of the Target MGW (IP Address2 and UDP Ports2, etc.).
This MSC-PCL may contain at least the Target RAN Codec (or the SIP
representative of it). Typically it contains many more Codecs, like AMR-
WB(0,1,2), G.711, G.722, maybe more, depending on the Target MGW and its
Transcoding capabilities. In some implementations even different
Configurations of the AMR are included, like AMR(0,2,4,7), AMR(0,2,4),
AMR(0,2), AMR(7), AMR(), even AMR(0,1,2,3,4,5,6,7) has been observed; similar
for AMR-WB and (in future) EVSoCS. Many open options make life harder.
The ATCF/ATGW-pair takes the MSC-PCL2 and decides on own capabilities (ATGW
Supported Codecs, ATGW Supported Transcodings, whatever), considering the IMS
Selected Codec, which Codec to use as CS PS Codec.
Then the ATCF sends the SIP Response back to the SRVCC MSC, including the CS
PS Codec, including the connectivity data of the ATGW (IP Address3 and UDP
Ports3, etc.).
In the ideal case IMS Selected Codec, CS PS Codec and Target RAN Codec are
TrFO-compatible and the call continues after SRVCC without Transcoding (at
least at this end of the call).
## 5.3 Voice Path Switching during SRVCC
As long as the SRVCC MSC prepares the Target RAN leg and the voice path
between Target RAN and Target MGW, the call continues on the LTE access leg
without disturbance by these SRVCC preparation procedures. If these procedures
take some longer time, e.g. due to network load, then the voice path switching
is shifted in time, but this has no influence on the voice path interruption.
This phase of SRVCC preparation is rather uncritical. Of course: waiting too
long might result in a lost LTE connection, before the new connection is up;
in that case the call is lost.
Then at time \"T~0~\" the MSC sends the **SIP Invite to the ATGW** and the
**PS-to-CS Handover Response to the MME**. According to Stage 2 description
both messages are sent more or less at the same time.
The PS-to-CS Handover Response forwards the necessary parameters, like Target
Cell and Target RAN Codec to the UE in the **Handover Command**. The ATGW
switches the call leg from the LTE access towards the Target MGW, when the
ATCF sends the **SIP Response** back to the MSC.
The Handover Command, after travelling through the LTE access, triggers the UE
to change to the prepared Target RAN channel. How fast the UE changes, is
implementation dependent.
Shortly after T~0~ the voice path downlink to the LTE access is interrupted by
the ATGW. The LTE \"pipe\", notably the sender buffers in ATGW and eNB may
have still some few speech packets stored to be sent. So the speech path
interruption will be observed some time later at the radio input of the UE and
some processing time later at the loudspeaker output of the UE, here at
\"T~1~\". A substantial part of the processing time might be hidden inside the
Adaptive Jitter Buffer (AJB) within the UE. The time difference between
\"T~0~\" and \"T~1~\" varies, depending on LTE parameter setting, the cell
load and actual LTE radio performance, between about 40 ms and (much) more
than 100 ms.
Shortly after \"T~0~\" also the voice path uplink to the remote end is
interrupted in the ATGW. There could be still some speech packets in the pipe
from the UE to the ATGW, notably inside the UE, but these are ignored by the
ATGW.
The pipe from ATGW to the remote end might have a long delay, depending on the
voice path and the remote access technology. At time \"T~2~\" the Decoder at
the remote end runs empty and the voice output gets muted. The delay between
ATGW and remote end has no influence on the **duration** of the interruption
at the remote end.
Shortly after \"T~0~\" also the voice path pipe downlink to the Target MGW is
filled with speech packets, coming from the remote end. So the downlink pipe
of the Target Radio leg is started to be filled. It takes in the order of
100ms, until the first speech frame can be sent onto air.
Like the speech packets travelling with finite speed through the LTE RAN, also
the Handover Command takes a while across the LTE radio access, depending on
load and radio conditions. There is a \"racing problem\" between Control Plane
and User Plane. In fact the race starts, when the SRVCC MSC sends the SIP
Invite and PS-to-CS Handover Response. Ideally the UE would get the Handover
Command at the same time as the last speech frame from the ATGW and would
switch immediately after that to the new Target RAN leg. In real life networks
that cannot be guaranteed.
As soon as the UE accesses the Target RAN the radio connection is established
and downlink speech packets may arrive at the UE -- depending how fast the
downlink pipe is filled. Also in uplink the UE starts to send speech packets
and fill the uplink pipe.
According to the SRVCC standard, however, the uplink path in the Target MGW is
blocked, until the MSC has received a \"Handover Complete\" message from the
UE. Then speech packets are through-connected. They arrive at the ATGW and are
forwarded to the remote end. When they finally arrive at the remote end the
uplink speech break ends.
# 6 Selected example scenarios for SRVCC
## 6.1 General
In the following clauses a series of example scenarios is presented. The
clause headlines have the following convention:
> **6.x SRVCC \  to \**
Example: 6.2 SRVCC AMR(...) to FR_AMR(...)
In many cases it is immediately obvious that transcoding is required after
SRVCC, in some cases transcoding depends on the Codec Configurations, like
AMR(0,2,4,7) to UMTS_AMR2(0,2,5,7), which requires transcoding, although the
Codec Types are identical or at least from the same Codec Family.
> **Editor's note:** the first scenarios are de facto the prototypes for all
> the others. These will be discussed more intensively; the others follow then
> the same principles, with differences.
In all scenarios a voice call is setup and in operation, with an LTE RAN on
the local side, as shown in Figure 4-1. Local side means: the side, where the
SRVCC is executed. For simplicity of the discussion it is assumed than no
other session to this local UE is setup. The local UE indicated support for
SRVCC and the IMS Core has inserted an ATCF/ATGW pair as local Anchor of the
call. The call setup negotiation ended in the IMS Selected Codec as assumed in
each scenario. The local UE is assumed to support all currently standardized
3GPP Codecs in 2G and 3G and 4G.
## 6.2 SRVCC AMR(...) to AMR(...)
The **IMS Selected Codec** is in this example **AMR(...)** , with different
possible mode-sets. There are more than 50 AMR Configurations thinkable, only
few of them have real life relevance and only one of these is recommended for
all 3GPP networks: mode-set=0,2,4,7. Operators have the choice to influence
the AMR Configuration in the IMS Core. Inter-Operator calls should be
considered in this choice, as well as subsequent SRVCC to CS networks and sub-
subsequent Intra-CS Handovers.
The **LTE Used Codec** is here also **AMR(...)** , typically with the same
Configuration as for the IMS Selected Codec. In fact there is no obvious
reason, why the configurations should be different; in principle it is
possible. The LTE Used Codec will discontinue existing due to SRVCC; remaining
is the IMS Selected Codec. If there would be a difference between LTE Used
Codec and IMS Selected Codec and transcoding would exist in the ATGW, then
this would be irrelevant after SRVCC. It is assumed here that the LTE Used
Codec and the IMS Selected Codec use the same AMR Configuration.
The remote end determines to a large extent the IMS Selected Codec, assuming
that the local UE and the IMS network are capable of all mandated and
recommended 3GPP Codecs: AMR(...), AMR-WB(...) and EVS(...) including EVS-
IO(...).
Also the voice path between the shown IMS Core and the remote end has
substantial influence, especially, if the call crosses network boundaries.
These questions are, however, not discussed in the present document.
**Important in this scenario for SRVCC is that the IMS Selected Codec is fixed
to AMR(...) in the ATGW**.
**In the ideal case** IMS Selected Codec, CS PS Codec and Target RAN Codec are
TrFO-compatible and the call continues after SRVCC without Transcoding;
recommended: AMR(0,2,4,7), or subsets, everywhere, see table 6.2-1
Table 6.2-1: SRVCC result for the recommended AMR(0,2,4,7) to AMR(0,2,4,7) or
a sub-set
* * *
Target RAN Codec TrFO ? CS PS Codec TrFO? IMS Selected Codec UMTS_AMR2
(0,2,4,7) **yes** AMR (0,2,4,7) **yes** AMR (0,2,4,7) FR_AMR (0,2,4,7) **yes**
AMR (0,2,4,7) **yes** AMR (0,2,4,7) HR_AMR (0,2,4) **yes** AMR (0,2,4,7)
**yes** AMR (0,2,4,7) UMTS_AMR2 (0,2) **yes** AMR (0,2,4,7) **yes** AMR
(0,2,4,7)
* * *
Although the call continues in all these cases without Transcoding, the
maximum bit rate may be very different, depending on the load situation in the
Target RAN. The effects of these differences are discussed in \.
In any case it would be a bad choice to use AMR() or AMR(0,1,2,3,4,5,6,7) as
IMS Selected Codec, as these would not be TrFO-compatible to any CS network.
## 6.3 SRVCC AMR(...) to AMR-WB(...)
As in scenario 6.2 the **IMS Selected Codec** is **AMR(...)** , let's assume
it is AMR(0,2,4,7), the recommended Codec.
As described in clause 5.2 the SRVCC MSC determines the Target RAN Codec based
on the received UE-SCL and the known Target RAN Capabilities without knowledge
about the IMS Selected Codec. The MSC takes the best possible Codec and
Configuration, as locally preferred (set by the operator) for the Target RAN,
given the received UE-SCL.
If the Target RAN is updated to FR_AMR-WB(0,1,2) and/or UMTS_AMR-WB(0,1,2),
but not to even better Codecs, then one of these will be selected by the SRVCC
MSC as Target RAN Codec and the Target RAN leg will be prepared. In SIP Invite
towards the ATCF this Codec will be listed as AMR-WB(0,1,2).
The SRVCC MSC will send the SIP Invite to the ATCF, with the MSC-PCL
containing the AMR-WB(0,1,2) on first place, followed by other Codecs, see
clause 5.2.
**The ATCF has no other possibility than to insert Transcoding** between
Target RAN Codec and IMS Selected Codec; the only freedom left is where to
place the transcoding. From call setup it is obvious that the remote end does
not support a WB Codec, because otherwise AMR-WB would have been the IMS
Selected Codec. **Therefore it is not reasonable trying to re-negotiate the
IMS Selected Codec with the remote end.**
The ATCF could select the AMR-WB(0,1,2) as CS PS Codec, taking the burden of
Transcoding fully into the ATGW.\ The ATCF could select the AMR(0,2,4,7) as CS
PS Codec, shifting the burden of Transcoding fully into the Target MGW.
The third choice, for completeness, if offered by the MSC, would be to select
an \"intermediate\" Codec as CS PS Codec, such as G.711 or G.722 or
\"lin.PCM128\", with 8 kHz sampling and 16 bit \"linear\" resolution == 128
kbps.
Table 6.3-1: SRVCC result for the recommended AMR(0,2,4,7) to AMR-WB(0,1,2)
* * *
Target RAN Codec TrFO ? CS PS Codec TrFO? IMS Selected Codec AMR-WB (0,1,2)
yes AMR-WB (0,1,2) no AMR (0,2,4,7) **AMR-WB (0,1,2)** **no** **AMR
(0,2,4,7)** **yes** **AMR (0,2,4,7)** AMR-WB (0,1,2) no lin.PCM128 no AMR
(0,2,4,7)
* * *
The choice is implementation dependent. Often the ATCF selects the IMS
Selected Codec also as CS PS Codec. This is \"egoistic\", as the burden is
shifted to the Target MGW. But it has a substantial advantage: it indicates to
the SRVCC MSC that the choice of the Target RAN Codec was not optimal. The
SRVC MSC has then the opportunity to execute a Mid-Call Modification of the
Target RAN Codec to reach TrFO again, after SRVCC is successfully executed.
So in this scenario SRVCC is executed and transcoding resources are added,
typically in the Target MGW. Then, after a short while, Mid-Call Modification
of the Target RAN leg may remove the inserted Transcoder again. This
additional Mid-Call Modification is implementation specific.
## 6.4 SRVCC AMR(...) to EVSoCS(...)
As in scenario 6.1 and 6.2 the **IMS Selected Codec** is **AMR(...)** , e.g.
AMR(0,2,4,7), the recommended Codec. The SRVCC MSC determines the Target RAN
Codec based on the received UE-SCL and the known Target RAN Capabilities
without knowledge about the IMS Selected Codec.
If the Target RAN is updated to EVSoCS, then it may be selected as Target RAN
Codec. But which of the Configurations (still under discussion) would the
SRVCC MSC select?
**Configuration 0** : with Spreading Factor SF=256, needs least radio
capacity, provides lowest voice quality\ of all listed Configurations: The
Codec is EVS (br=5.9-8; bw=nb-wb).\ Narrowband and Wideband voice quality is
provided up to 8 kbps, including EVS-IO (0),\ as well a Variable Bit Rate
coding at an average rate of 5.9 kbps.
**Configuration 1:** with Spreading Factor SF=128, needs more radio capacity
and is a decent compromise.\ The Codec is EVS (br=5.9-13.2; bw=nb-swb).
Narrowband, Wideband and Super-Wideband\ voice quality is provided up to 13.2
kbps. EVS Variable Bit Rate, EVS Channel-Aware\ Mode of operation and EVS-IO
up to 12.65 are supported.
**Configuration 2:** with Spreading Factor SF=64 provides the best possible
quality and is optimal, if the Codec is EVS (br=5.9-24.4; bw=nb-fb). This is
the most costly alternative for the\ Target RAN, including all the features of
Configuration 1 on a higher quality level.
**Configuration 3** : with Spreading Factor SF=128, tailor-made to guarantee
Super-Wideband quality. The Codec is EVS (br=9.6-13.2; bw=swb). It has radio
capacity demands comparable\ to or slightly higher than Configuration 1;
neither EVS Variable Bit Rate\ nor EVS Channel Aware Modes of operation are
allowed to ensure SWB quality.\ For interworking with legacy networks, EVS-IO
up to 12.65 is supported.
The decision could and will be based on the load in the Target RAN. Sometimes
there is no other choice than Configuration 0, except the operator prefers
Configuration 3 and provides always sufficient radio capacity.
The problems and solutions are similar, a bit more negative, compared to the
scenario 6.3. The temporarily inserted Transcoder (EVS \ AMR) is even
more complex and resource hungry. The temporary radio load is potentially high
without gain.
An optional Mid-Call Modification of the wrongly selected Target RAN Codec is
the only escape, after such an SRVCC as specified currently.
## 6.5 SRVCC AMR-WB(...) to AMR(...)
In this scenario the call setup resulted in the IMS Selected Codec being AMR-
WB(...). Maybe even AMR-WB() is selected, with all 9 modes allowed. This is an
important scenario today in VoLTE\VoLTE calls. But also AMR-WB(0,1,2)
provides impressive HD Voice quality.
Unfortunately, in this scenario, the Target RAN is not updated and does not
support AMR-WB yet. The SRVCC MSC selects AMR(0,2,4,7) instead. Transcoding is
required between Target RAN Codec and IMS Selected Codec.
Other than in the scenarios before (6.2 -- 6.4) there is a chance to
renegotiate the IMS Selected Codec with the remote end and achieve end-to-end
TrFO again, although in AMR(0,2,4,7) quality.
This Codec Renegotiation is optional. In any case it should be performed after
SRVCC is successfully finished.
## 6.6 SRVCC EVS (br=5.9-128; bw=nb-fb) to EVS (br=5.9-13.2; bw=nb-swb)
In this example scenario the call setup resulted in the **IMS Selected Codec**
being EVS (br=5.9-128; bw=nb-fb), the biggest EVS Configuration with all four
audio bandwidths included and all the bit rates, ranging from the lowest rate,
5.9 kbps (average), up to the highest, 128 kbps. In addition, the EVS-VBR and
the EVS-CA modes are included, as well as the EVS-IO with all modes.
The call is ongoing with this biggest possible **EVS Framework
Configuration**. Mode Control may be ongoing and the EVS modes in both
directions may be different and lower than maximally possible, depending on
external factors, such as audio-I/O capabilities and network load situations.
The **active EVS Configurations** may be temporarily smaller and different in
both directions, but transcoding is in no case required.
Now SRVCC is requested. The Target RAN supports EVSoCS.
**Case 1:** The Target RAN is not loaded. Therefore the Target MSC determines
EVS (br=5.9-24.4; bw=nb-fb; mode-set=0,1,2) as **Target RAN Codec** , based on
local RAN Capabilities and the UE Supported Codec List, but without any
knowledge about the IMS Selected Codec or the LTE Used Codec. It is mainly by
coincidence that the Target RAN Codec fits so well in this example. It can be
easily shown, that all EVS Configuration, which include all modes and rates
below an upper corner, are all TrFO-compatible to each other. Therefore the
call continues after SRVCC without transcoding, although the EVS Framework
Configuration shrinks to EVS (br=5.9-24.4; bw=nb-fb; mode-set=0,1,2), still
providing FB quality.
**Case 2** : The load in the Target RAN is higher. The MSC selects EVS
(br=5.9-13.2; bw=nb-swb) as Target RAN Codec. The call continues without
transcoding in the best possible SWB quality under these conditions.
**Case 3** : The load in the Target RAN is much higher. The MSC selects EVS
(br=5.9-8; bw=nb-wb) as Target RAN Codec. The call continues without
transcoding in the best possible WB quality, the best possible under these
harsh load conditions.
**Case 4:** Although the MSC selects EVS (br=5.9-24.4; bw=nb-fb; mode-
set=0,1,2) as Target RAN Codec, the RNC has the freedom (according to the
currently implemented strategy in life networks) to allow only a sub-set of
the required rates. This may end in the de facto Configuration of EVS
(br=5.9-13.2; bw=nb-SWB) and the call would still continue in TrFO. The RNC
would send Mode Control commands to keep the Codec Modes within these limits.
If only EVS Bottom up Configurations are used, in IMS and CS, which include
all modes and rates below their individual upper corner of Rate and Bandwidth,
then TrFO is always guaranteed before and after handover.
**Important is** that the MSC selects EVS only as Target RAN Codec, if the IMS
Selected Codec is compatible. In order to do that the MSC must know the IMS
Selected Codec.
Mode Control keeps the active EVS Configurations within this new EVS Framework
Configuration, although the IMS Selected Codec is still EVS (br=5.9-128;
bw=nb-fb). There is no need to modify that from a speech quality point of
view. Of course, it may happen during the call that the RNC must restrict the
upper bit rate temporarily due to varying cell load conditions, or the UE must
go down in rate due to TX power problems. In these cases, the speech quality
goes down or up as necessary. This is not different to the situation in a pure
VoLTE call. In all cases the speech quality remains as high as possible.
**Important is** that the remote UE receives the necessary CMR, requesting the
maximum bit rate and maximum bandwidth, as soon as possible and follows this
CMR as soon as possible. If done well, it is possible to command the remote
EVS client to use EVS modes within the range of the Target RAN Codec long
enough **before** the local UE performs the SRVCC handover on air.
This so-called \"Pre-SRVCC Mode Control\" could be triggered by the ATGW, if
the ATGW gets early information about the Target RAN Codec. It may also be
triggered by the Target MGW, after the ATGW has switched the radio legs.
## 6.7 SRVCC EVS (br=16.4-128; bw=fb) to EVS (br=5.9-13.2; bw=nb-swb)
In this example scenario, the call setup by SIP/SDP negotiation resulted in
the IMS Selected Codec being the biggest EVS FB-only Configuration, EVS
(br=16.4-128; bw=fb). SDP excluded all bandwidths below FB and all bit rates
below 16.4 kbps. It is generally not allowed that CMR could change this FB-
only Configuration during the call.
The call quality may reach the same quality as in the EVS (br=5.9-128; bw=nb-
fb) Configuration scenario in clause 6.6, using the highest EVS mode with 128
kbps and full band audio, but not higher. Transcoding is not required. Mode
Control may be ongoing, but the rate cannot be set lower than 16.4 kbps and
the audio bandwidth is fixed to Fullband. High quality seems to be guaranteed.
This is fact not the full truth. The following paragraph discusses this.
Due to the EVS algorithm design the EVS Encoder classifies the input audio
signal and decides frame by frame, which audio bandwidth is actually given and
where to put the \"coding bit resources\". It may well use a NB Codec mode and
achieve optimal quality for a NB input signal. The adaptation follows the
audio-input quite well - also for non-Full-band signals. The EVS FB-only
Configuration does not prevent the media-sender using lower bandwidth modes.
The Transport Plane (here RTP) and the MGWs in the path will support this. The
quality is optimal, if the media-receiver has FB audio output capabilities.
The inband CMR cannot change the bandwidth, even if the audio output on the
remote side would require it, e.g. because the remote user connects a legacy
handsfree kit with lower bandwidth. Because coding bit resources are wasted by
the local media-sender in audio signal regions, which the remote media-
receiver cannot play back, the voice quality may not be optimal, but lower
than in the scenario with EVS (br=5.9-128; bw=nb-fb).
If there would be a capacity problem along the speech path, rates below 16.4
are not available, also the EVS -CA mode is forbidden. The voice quality may
well fall below the quality of the other Configuration due to a higher
residual frame loss rate.
The high quality expectation is already without SRVCC not always fulfilled by
this (and other) punctured EVS Configuration EVS (br=16.4-128; bw=fb).
Now the network has to execute SRVCC with this EVS (br=16.4-128; bw=fb) as IMS
Selected Codec.
Remember: the Target MSC does not know the IMS Selected Codec.
The Target RAN supports EVSoCS and the load on the Target RAN is not too high,
so for example the Configuration EVS (br=5.9-13.2; bw=nb-swb; mode-set=0,1,2)
is determined as Target RAN Codec, same as in clause 6.6.
The IMS Selected Codec is not TrFO-compatible to this Target RAN Codec,
because there is no common audio band and the lower bit rates are not common.
The ATGW (or Target MGW) will insert Transcoding! Transcoding resources are
quite expensive for EVS, involving two EVS Decoders and two EVS Encoders in
the ATGW or Target MGW.\ The SWB quality after SRVCC is degraded below the
maximum quality of the Target RAN Codec, it is lower than in the scenario with
the Bottom up Configuration EVS (br=5.9-128; bw=nb-fb) as IMS Selected Codec.
**Discussion of potential alternatives to avoid transcoding:**
In this scenario the knowledge about the IMS Selected Codec would not help
much, if the Target RAN had no other choice than SF=128, as there is no TrFO-
compatible Codec available in the Target RAN for this EVS FB-only
Configuration of the IMS Selected Codec. However, if the MSC would get
knowledge about alternatives to the IMS Selected Codec, then an overall
optimization could be considered by selecting first an optimal Target RAN
Codec, followed then after SRVCC by a renegotiation of the IMS Selected Codec.
**The effort would be rather high, the resulting quality no better than with
the Bottom up Configuration already at call setup**.
If the Target RAN would support SF=64, then the MSC could try deploying this,
without knowing the IMS Selected Codec. Allocating this double radio capacity
\"blindly\" is maybe not commercially reasonable, if the IMS Selected Codec
would be EVS (br=5.9-128; bw=nb-fb) and SWB Quality would be a good enough
compromise for 3G under the given load conditions.
In one alternative approach, the MSC could be tempted to select EVS
(br=5.9-24.4; bw=nb-fb) as Target RAN Codec.\ The ATGW (or Target MGW) could
send Pre-SRVCC Mode Control to steer the remote UE into EVS (br=16.4-24.4;
bw=fb). The MSC could send EVS (br=24.4; bw=fb) as Initial Codec Mode to the
local UE. The call **could** continue seamless in FB quality! However, as soon
as the Target RAN would need to restrict the bit rate in downlink below 16.4
kbps **the call would break** , respectively end in one way muting. In order
to avoid that, the MSC would have to set the **Guaranteed Bit Rate** in the
Target RAN to 16.4 kbps. The UE, however, could be tempted to improve uplink
radio quality in case of TX power limitations. Without a clear rule, the UE
could use lower rate and lower audio bandwidth in uplink. The network and
remote media-receiver would maybe not accept this, because this is outside the
remote Configuration. **This alternative is not satisfying** and not according
to the EVS compatibility rules.
This Target RAN Codec would also be sub-optimal for an IMS Selected Codec EVS
(br=5.9-128; bw=nb-fb).
In another alternative approach, the MSC could try to select EVS
(br=16.4-24.4; bw=fb), i.e. a FB-Only Configuration as Target RAN Codec. This
has the same effect as setting the **Guaranteed Bit Rate** in the Target RAN
to 16.4 kbps. Neither RNC nor UE could trigger the media-sender to use a lower
bit rate in uplink if higher error robustness is needed. **Also this
alternative is not satisfying.** This Target RAN Codec, too, would be sub-
optimal for an IMS Selected Codec EVS (br=5.9-128; bw=nb-fb).
In a third alternative the ATGW (or other MGW in the path) could send CMR
commands to bring both ends into the **EVS-IO mode of operation**. This would
bring the call into TrFO as well, with AMR-WB quality. It depends on the EVS
Configurations, if the resulting WB quality is preferred. **In this example
IMS Selected Codec, it would not be better**.
In this scenario, it would be clearly better to use an EVS Bottom up
Configuration for the IMS Selected Codec.\ All discussed alternatives are
worse.
**Without knowledge about the IMS Selected Codec, the Target network cannot
decide, which Target RAN Configuration for EVS is optimal. Without knowledge
about the Target RAN Capabilities, the ATCF/ATGW cannot decide on Pre-SRVCC
Mode Control either.**
## 6.8 SRVCC EVS (br=9.6-24.4; bw=swb) to EVS (br=9.6-13.2; bw=swb)
Here the **IMS Selected Codec** has the punctured Configuration **EVS
(br=9.6-24.4; bw=swb)** , based on operator policy**.** Assumedly, the
operator sets the parameters in all his network parts consistently, in IMS and
in CS. Interworking with other operators should be taken into account.
The network has to execute SRVCC.
**Case 1:** The Target RAN supports EVSoCS and the load on the Target RAN is
not too high. Based on operator policy the MSC prefers EVS (br=9.6-13.2;
bw=swb) as Target RAN Codec. This fits perfectly to the IMS Selected Codec, by
some coincidence, as the IMS Selected Codec was unknown. It could have been
AMR or AMR-WB or other, then this Target RAN Codec would be not that good.
Pre-SRVCC Mode Control is necessary to bring the remote end into the Target
Codec bit rate range before the handover is performed.
**Case 2:** If the Target RAN is highly loaded and another EVS Configuration
will be chosen, like EVS (br=5.9-8, bw=nb-wb), then transcoding is required.
The quality ends up below the quality of the Target RAN Codec.
Note: Since the operator has, based on his policy, provided sufficient
capacity in Target RAN, case 2 will not occur often or not at all in this
network. Nevertheless: Under such good radio conditions, which avoid case 2,
also the Bottom up Configurations EVS (br=5.9-24.4; bw=nb-swb) as IMS Selected
Codec and EVS (br=5.9-13.2; bw=nb-swb) as Target RAN Codec would not use bit
rates and bandwidth worse than SWB. If radio conditions would be worse and
even bad, as in the unlikely case 2, then the Mode Control would automatically
use a smaller Button up Configuration, like EVS (br=5.9-8, bw=nb-wb) without
transcoding, providing best possible quality in this bad conditions.
In all conditions, the resulting quality with the Bottom up Configurations up
to SWB would be as good as or better than with the punctured SWB-only
Configurations.
## 6.9 SRVCC and subsequent Handover
In this example scenario, the **IMS Selected Codec** is EVS (br=5.9-128;
bw=nb-fb), the biggest EVS Configuration with all four audio bandwidths
included and the bit rate ranging from the lowest rate, 5.6 kbps, up to the
highest, 128 kbps. The call is ongoing with FB quality.
The local mobile is moving and leaving LTE coverage. The network performs
SRVCC as in Clause 6.6 to the EVS (br=5.9-13.2; bw=nb-swb) as **Target RAN
Codec** and the call continues after SRVCC without transcoding in SWB quality.
CMR controls the now reduced Framework Configuration.
However, the mobile is moving on and is even leaving 3G-coverage into
2G-coverage. Another handover follows, this time a CS-internal Inter-RAT
handover, to a Target RAN2, with AMR-WB(0,1,2) as Target RAN2 Codec. Without
going into details here, the call may continue in HD Voice quality (WB
quality), without transcoding, with the EVS Configuration in the IMS Selected
Codec replaced seamlessly by the EVS AMR-WB IO (0,1,2) Configuration. The
Target RAN sends AMR-WB-CMR=2 (or smaller) towards the remote end, together
with AMW-WB-coded speech in RTP packets according to RFC 4867. A MGW in the
path (e.g. the Target MGW of the preceding SRVCC) repacks these AMR-WB-RTP
packets into EVS-RTP packets according to TS 26.445 and translates the AMR-WB-
CMRâ‰¤2 into the EVS-CMR for the EVS AMR-WB IO mode with maximum bit rate 2 (or
smaller).
These two handovers reduced the voice quality from FB to SWB and finally to
WB. In all these scenarios, the quality was and is as good as possible under
the given circumstances, always transcoding free. The SRVCC used by
coincidence a TrFO-compatible Target RAN Codec, while the Inter-RAT handover
from UTRAN to GERAN has exact knowledge about the Selected Codec and selects
the Target RAN2 Codec precisely.
Although the remote LTE UE may have still excellent radio link quality,
allowing EVS (br=5.9-128; bw=nb-fb) still, the remote UE will obey the
received EVS AMR-WB IO as soon as possible and strictly. Only then, the SRVCC
and subsequent CS-internal handover are executable with minimal speech break
time and without Transcoding. If the remote LTE UE would not follow the CMR
strictly, then the call would go muting on the side, where the handover
reduced the EVS Configuration in size. It is inacceptable that the remote UE
would change from the EVS AMR-WB IO mode to an EVS primary mode without
explicit command by CMR or a SIP renegotiation.
After a while, the UE moves back into 3G coverage. The CS-network performs
another Inter-RAT handover, selecting the EVS (br=5.9-13.2; bw=nb-swb) as
**Target RAN3 Codec.** Mode Control takes care that the remote end remains in
the EVS AMR-WB IO mode, until the UE safely landed in the 3G network. Then the
3G UE sends CMR to the remote end to switch to EVS (br=5.9-13.2; bw=nb-swb)
and the call continues in both directions in SWB quality.
**It should be noted that in an \"upgrading\" handover, the Mode Control
follows (ideally) the handover and in a \"downgrading\" handover the Mode
Control precedes (ideally) the handover**.
## 6.10 SRVCC and Handover in speech pauses
With quite some likelihood, these local handover may occur in phases, where
the local UE detected a speech pause and does not send anything in uplink,
except a SID frame every now and then.
In such a case, the handover-handling MGW should send CMRâ‰¤x towards the remote
end in several CMR-Only frames and SID frames to accelerate the fall-back to
lower modes as much as possible. Without these inserted CMR-Only frames (CMR-
Only are No_Data frames including only the CMR), the handover-handling MGW
would have to wait for the next SID frame and that might take quite a while.
This would increase the speech break time in the local downlink direction. A
lost SID or a lost CMR-Only frame would also mean the CMR is lost, which would
cause a delay of the adaptation and therefore a longer speech break. Therefore
this CMR is repeated several times (forward error correction by repetition) in
several CMR-Only and/or SID frames. The repetition could be continued, until
the remote end reacted accordingly. It is important that these CMR-Only frames
are carried in the RTP packets all the way to the remote LTE UE.
The EVS standards allow extracting the CMR from the received RTP packets and
sending CMR in EVS RTCP-APP, if AVPF is allowed. This requires more effort,
more transport bandwidth and takes in general a noticeable longer time to
reach the remote UE. **CMR within RTP is substantially faster, more error
robust and simpler to handle**.
**Important to note:** the current text in TS 26.445, A.2.2.1.2 ToC byte,
states,\ Begin of cite (important part in bold):
_\"__Packets containing only NO_DATA frames should not be transmitted in any
payload format configuration_ _. Frame-blocks containing only NO_DATA frames
at the end of the packet should not be transmitted in any payload format
configuration. In addition, frame blocks containing only NO_DATA frames in the
beginning of the packet should not be included in the payload.\"_
End of cite.
This paragraph could potentially be misunderstood in a way that RTP packets
including only the CMR byte should not be transmitted. In order to avoid
misunderstanding, it should be added:
**_\"Packets without speech data, containing only the CMR byte, are to be
transmitted.\"_**
The details, when and how often CMR-only packets are to be sent, are for
further study, see discussion above.
# 7 Identified Problems with current SRVCC
Editor's note:
Clause 12 is refers to this clause 7, which has been drafted, but is not yet
included in this version of the present document.
# 8 Speech Quality and Media Handling Aspects
Editor's note:
This clause 8 is still not ready. Intention is to analyse the speech data flow
in uplink and downlink during SRVCC and the reasons for the speech path
interruptions and their durations.
# 9 Codec Mode Control before, during and after SRVCC
## 9.1 General
The AMR Mode Control procedure was originally designed for Mobile\PSTN
calls and extended later to cover also Mobile\Mobile calls in Transcoding
Free Operation (TFO or TrFO).
In the first case, Mobile\PSTN, there is typically only one major
bottleneck in the voice path: the radio interface, which varies over time and
location and requires adaptation of the media (net) bit rate to the channel
conditions. These channel conditions may be temporary, as the radio signal
strength or the radio interference fluctuates. These channel conditions may
also be permanent or semi-permanent, e.g. if GERAN needs handover to a half-
rate traffic channel to gain call capacity, or if UTRAN needs handover to a
spreading factor SF=256 for the same reason.
In the second case, Mobile\Mobile, there are more bottlenecks in the voice
path: both radio interfaces may vary over time and location temporarily or
semi-permanently. In general there could be even more bottlenecks in the voice
path end-to-end, like an overloaded Abis-interface in GERAN, or a satellite
link or microwave-links somewhere.
**The AMR Mode Control signalling and procedure was designed to cope with
multiple bottlenecks in the voice path**.
Figure 9.1-1 shows one example of a Mobile\Mobile call with an assumed
bottleneck in the Core Network (on NboIP).
{width="6.649305555555555in" height="1.95in"}
Figure 9.1-1: Mobile\Mobile call with two radio interfaces and an assumed
bottleneck in the Core Network
The voice media traffic flow is bi-directional, represented in **blue coloured
think lines** for the direction \"left to right\" (i.e. MS1 => MS2) and in
**violet coloured think lines** for the direction \"right to left\" (i.e. MS1
\Mobile call with two radio
interfaces ...
BTS1 may modify this CMR1.1, e.g. based on load on the incoming AoIP
interface, and then send CMR1.2 forward towards the Core Network, i.e. MGW1.
CMR1.2 = MIN ( CMR1.1, \ ) is the
corresponding formula.
In the example here CMR1.2 == CMR1.1 = 7: there is no bottleneck on AoIP1 in
downlink.
MGW1 observes the incoming NboIP-link and detects a restriction to rate 7.40,
i.e. mode=4. So MGW1 sets\ CMR1.3 = MIN (CMR1.2, 4) = 4 and forwards
(backwards relative to the media-stream) CMR1.3 to MGW2.
The smallest bottleneck in this media flow is in this example in the uplink of
radio 2. BTS2 observes this radio link 2 and estimated the maximum mode to 2,
i.e. rate 5.90 kbps.\ Therefore, finally CMC1.5 = MIN(CMR1.4, 2) = 2 is sent
downlink to MS2.
It is mandatory for MS2 to obey this \"**C** odec **M** ode **C** ommand\" as
maximum allowed mode in uplink as soon as possible. CMC1.5 is the minimum of
all estimated maximum modes of all bottlenecks, calculated in a distributed
manner.
**Regardless, where the smallest bottleneck will be: the Distributed Rate
Decision always finds it!**
Exactly the same procedure, with typically different result, is executed for
the opposite media-direction. The Mode Control loop delay is dependent on the
position of the bottleneck in the speech path. This control loop delay is
always as small as it can be.
## 9.2 Mode Control commands in the User Plane
The speech path delay is an important factor for a good communication quality
for humans. The smaller the speech path delay, the more natural the
communication; a long delay causes irritations to the participants. The speech
path is optimized. It does not follow the same route as the control signalling
and does not pass the same nodes. Therefore, the speech path (User Plane) has
typically a (much) lower transport delay than the Control Plane. This is one
important reason, why the Mode Control Commands (CMR) are transported in the
User Plane.
Another aspect is the tight synchronization between media payload and Codec
Mode Request. This allows a fast and timely response in case some bottleneck
changes and needs a fast adaptation. The Control Plane could not support this
fast reaction.
In GERAN, every SID frame and every second Speech frame (every 40ms)
transports the active CMR, endlessly repeated, even if it does not change.
**This endless repetition has to be seen as extreme robust forward error
correction code** and allows a fast error recovery. A single lost or disturbed
CMR values is quickly healed by the next one. There is no need for an
acknowledgement for CMR. CMR is slim signalling.
On AoIP, NboIP and in IMS the AMR and AMR-WB payload is transported in RTP
packets, each containing a field for CMR. This CMR field is always present.
**TS 26.114 REL-12 clarifies that the active CMR are to be sent in every RTP
packet for AMR and AMR-WB.**
## 9.3 Mode Control Rules for AMR and AMR-WB
Any implementation of AMR or AMR-WB in an MTSI Client has to obey these Mode
Control Rules, otherwise end-to-end TrFO is impossible. IP end-points, maybe
not following TS 26.114 in all points, will follow the AMR Mode Control Rules,
if they offer AMR or AMR-WB in SIP/SDP.
Especially important is that **every media-sender will obey the received CMR
as the maximum mode** it is allowed to use for media-encoding. This is true,
even if the media-sender itself does not see any restriction in its local
access side. None of the involved clients or servers overlooks the total media
path. Only the Mode Control feedback provides the overview, how big the
smallest bottleneck is.
In a general voice session, it is typically unknown to one end what the other
end's access is and it is any time possible that the conditions on one or the
other end change. **It is therefore important that every media-sender follows
the received CMR as fast as possible, e.g. within about 40ms.**
An important example is an handover on the far end, e.g. a GERAN-internal
handover from the full-rate channel, AMR (0,2,4,7) to the half-rate channel,
AMR (0,2,4). Immediately after the handover (in some implementations already
some time BEFORE the handover) the CS network sends CMR=4 and below. If a
VoLTE client on the remote end would not obey these CMR-values and continue
with mode 7, because it does not see any problem on its local LTE access, then
the output on the GERAN terminal will go to muting: mode 7 cannot be
transported downlink on a GERAN half-rate channel.
Another important example is the SRVCC from a VoLTE\VoLTE call with AMR-WB
() to UTRAN or GERAN. The maximum mode for AMR-WB in UTRAN or GERAN is AMR-WB
(2). The Target RAN sends Mode Control Commands through the CS-Core -- during
SRVCC or after SRVCC is finished - and they will be received in the ATGW
within the RTP packets as CMR=2 (or lower) and then forwarded to the remote
VoLTE UE. Again, **the remote VoLTE UE will obey these CMR-values as maximum
mode for media-encoding; otherwise, the UE on UTRAN or GERAN side goes to
muting**.
## 9.4 Mode Control Rules for EVS
EVS is a new 3GPP Codec with substantially enlarged adaptation capabilities.
The principle of \"Codec Mode Control\" remains the same. The smallest
bottleneck in the total voice path end-to-end determines the maximum mode that
can be used without transcoding. **Transcoding always brings lower quality.**
The EVS Codec Mode Request (EVS-CMR) comprises not only commands to restrict
the maximum rate, but also for maximum audio bandwidth. In addition, EVS-CMR
is used to control the \"Variable Bit Rate\" mode of EVS (on/off, nb, wb) and
the \"Channel Aware\" mode of EVS (on/off, wb, swb, various options). CMR
controls also the EVS-IO mode of operation and the transitions between the EVS
modes of operation.
The RTP payload format for EVS is specified in TS 26.445 with several options
for EVS-CMR transport. It is allowed to omit the EVS-CMR in RTP. It is allowed
to send the EVS-CMR on demand, i.e. only when found necessary. It is allowed
to send EVS-CMR in RTCP-APP. It is allowed to send EVS-CMR in every RTP
packet: this is the safest option.
For many good reasons it is recommendable to send the active EVS-CMR in every
RTP packet, in Speech, SID and CMR-Only packets. Only this permanent
repetition allows the fastest possible adaptation, with high error robustness.
The Distributed Mode Decision is simplest, if every RTP packet for EVS
includes the active EVS-CMR. These considerations are the same as for AMR and
AMR-WB.
One important aspect is the TrFO-compatibility between EVS and AMR-WB. EVS
includes the EVS AMR-WB IO mode of operation, in short EVS-IO. The EVS-CMR
controls also the transition between EVS Primary modes and the EVS-IO modes,
together with the maximum bit rate in EVS-IO. Because AMR-WB mandates an
active CMR in every RTP Packet, this requirement is passed to the EVS-IO as
well.
Same as for AMR, the simplest approach would be starting the EVS-CMR feedback
signalling by the media-receiving EVS-client (decoder) and send this EVS-CMR,
potentially filtered by the network(s) and potentially modified to a lower
maximum rate and/or bandwidth, all the way back to the media-sending EVS-
client. Nodes in the path can realize the Distributed Rate Decision fastest
and easiest. The network can react to sudden disturbances in the media path,
like SRVCC or handover, in the fastest possible way. Lost or disturbed CMR
Commands are corrected with the next received RTP packet.
All other options, a) to c) in the list below, for EVS-CMR transport have
disadvantages:
a) It is allowed to omit the EVS-CMR in RTP.\ Then either a single-rate /
single mode Configuration will be used, or CMR will be sent via RTCP-APP.\ In
principle, SIP/SDP could be envisaged to change the Codec Mode. This is,
however, expensive and too slow.
b) It is allowed to send the EVS-CMR on demand, i.e. only when found
necessary.\ Lost frames mean a lost CMR. It is often not trivial to detect
such a case.\ This is already discussed in length for the AMR Rate Control.
c) It is allowed to send EVS-CMR in RTCP-APP.\ RTCP-App brings irregular
overhead and may interfere on the transport plane with the speech data stream.
d) It is allowed, even mandated in this option, to send EVS-CMR in every RTP
packet, in speech pauses even in some extra added CMR-only packets, if an
urgent CMR has to be sent.\ **This is the safest option** , as discussed for
AMR and EVS above. It is, however, only effective, when in each RTP packet the
active CMR is sent, \"endless\" repeated.
## 9.5 Call Setup and Initial Codec Mode
Mode Control before, during and after SRVCC is discussed in the following in
examples. The principles hold for all Codecs and call scenarios in modified
form. Figure 9.5.1 shows one of many call scenarios, where Mode Control is
important.
{width="6.529166666666667in" height="1.8381944444444445in"}
Figure 9.5-1: Mobile\Mobile call between 4G and 3G accesses with EVS.
This example uses EVS Bottom up Configurations transcoding free all the way
between the LTE-UE A and 3G-UE B.
The **LTE Used Codec** (UE A \ ATGW A) is EVS (br=5.9-24.4; bw=nb-fb), all
modes of EVS-IO() included.\ The **IMS Selected Codec** (ATGW A \ MGW B) is
EVS (br=5.9-24.4; bw=nb-fb), i.e. the same.\ The **UTRAN-Used-Codec (MGW B \
 UE B)** is EVS (br=5.9-24.4; bw=nb-fb; mode-set=0,1,2).
The **EVS Initial Codec Mode** (EVS-ICM) could be negotiated and set to EVS
(br=24.4; bw=swb) in both directions.
However, this EVS-ICM is not negotiated, but set by implicit rules. One
important input parameter will be the smallest EVS Configuration in the path.
This, however, is not always known by the endpoints. Other parameters should
be the supported audio IO bandwidths in both UEs. The network operator(s)
should have influence on the EVS-ICM.
TS 26.114 defines some implicit rules for the EVS-ICM, these may need review,
because they seem to cover not all call scenarios, especially not for the
EVSoCS, which is still under study (status October 2015).
In this example scenario in figure 9.5.1, RNC B may restrict at call setup the
maximum rates in both directions to 13.2 kbps, i.e. the active EVS
Configuration would be EVS (br=5.9-13.2; bw=nb-swb; mode-set=0,1,2). This
restriction by the RNC would follow the current practise for AMR. The EVS-ICM
within UE A should in that case not be higher than EVS (br=13.2; bw=swb),
otherwise UE B would perceive muting, until the EVS-CMR signalling after
through-connect has corrected the wrong ICM. The rules in **TS 26.114 do not
cover this case, as EVSoCS is still under discussion**.
In another call scenario, in figure 9.5.2, terminating side B could be a GERAN
access with support for AMR-WB(0,1,2).
{width="6.528472222222222in" height="1.8743055555555554in"}
Figure 9.5-2: Mobile\Mobile call between 4G and 2G accesses.
The **LTE Used Codec** (UE A \ ATGW A) is EVS (br=5.9-24.4; bw=nb-fb), all
modes of EVS-IO() included.\ The **IMS Selected Codec** (ATGW A \ MGW B) is
EVS (br=5.9-24.4; bw=nb-fb), i.e. the same.\ The **GERAN-Used-Codec (MGW B \
 MS B)** is AMR-WB (0,1,2).
MGW B translates between EVS-packing and AMR-WB packing and between EVS-CMR
and AMR-WB-CMR.
**The EVS-ICM for UE A in that case will be equal or lower than AMR-WB(2)! EVS
primary modes are not allowed. The rules in TS 26.114 do not cover this
case.**
## 9.6 Mode Control before SRVCC
When the call is ongoing, i.e. is in State \"Connected\", CMR is permanently
(preferred) or on demand (not recommended) exchanged in both directions, to
control the optimal Codec Modes and EVS modes of operation in both end-points
(both media-senders).
**At any time during the call some transport conditions may change, causing a
node in the path to change the CMRs.**
\- RNC B could lower or raise the RNC-Max-Rates in one or both directions due
to UTRAN load changes. RNC B would command UE B by an RRC-command and MGW B by
a PDU Type 14 Rate Control command. MGW B would send modified CMR towards UE A
to reflect that change.
\- ATGW A could detect a high uplink frame loss rate and high RTP jitter
coming from UE A and may command by CMR a lower Codec Rate in uplink for UE A.
\- To combat the high frame loss rate ATGW A could also command UE A to go
into the EVS Channel Aware mode, by sending an EVS-CA-CMR command down to UE
A. UE B would have to handle this EVS CA mode for decoding. EVS-CA mode of
operation is not allowed, if the remote end is using AMR-WB, unless
transcoding is inserted in MGW B.
\- UE A could detect a high frame loss rate in downlink and send CMR uplink,
requesting the EVS CA mode in downlink. ATGW A would have to allow this EVS-
CA-CMR to pass through to UE B (or block it), UE B would have to send in EVS
Channel Aware mode. MS B, using AMR-WB, would not understand this. Many more
examples can be found.
In general, the call may be in any EVS mode of operation, when an SRVCC is
triggered.
Indeed SRVCC is only one additional reason to trigger Codec Mode Control.
## 9.7 Mode Control during SRVCC
Assume the call is ongoing as in figure 9.5.1, with EVS end-to-end and a 3G
access at the remote end. The EVS CA mode of operation may be used in both
directions.
UE A is roaming and observing its radio environment. It detects that the LTE
radio leg is degrading, while a **2G radio** **leg** is strong, 3G is not
detected. UE A sends measurement reports to eNB A and this triggers the SRVCC
to 2G.
{width="6.536111111111111in" height="3.20625in"}
Figure 9.7-1: Call Scenario during SRVCC to GERAN
The SRVCC MSC selects AMR-WB (0,1,2) as Target RAN Codec and prepares the
Target Radio leg and the Target MGW. Then the SRVCC MSC sends message 10a, SIP
Invite (MSC Preferred Codec List 2), to ATCF A. This ATCF selects AMR-WB
(0,1,2) as CS-PS-Codec and informs the ATGW. While ATGW A prepares the
resources for the access transfer, it may already send CMR towards the remote
3G UE B to switch from EVS CA mode to EVS-IO mode of operation.\ This Pre-
SRVCC Mode Control by the ATGW is not standard agreement and would be
implementation dependent.
Then ATGW A returns the connectivity parameters to the ATCF and further to the
SRVCC MSC. The Target access leg is prepared. The ATGW switches the User plane
sharply from the LTE access to the Target access.
The ATGW A may start sending for a while RTP packets with EVS-CA mode towards
the new Target MGW. These packets from the remote UE B are not understood and
discarded by the Target MGW. Alternatively, the ATGW may send nothing to the
Target MGW, until it receives EVS-IO frames from UE B and repacks them into
AMR-WB format.
The Target BTS does still not receive uplink frames and sends nothing in
uplink. The Target MGW may start sending CMR-Only RTP packets in AMR-WB
payload format with AMR-WB-CMR=0 towards ATGW A to support Pre-SRVCC Mode
Control. This Pre-SRVCC Mode Control by the Target MGW is not standard
agreement and would be implementation dependent.
The earlier EVS-CMR-IO is sent towards the remote UE B, the better. If it is
sent only after the Target BTS received the first speech frames on the new
radio leg and these reach the ATGW, then the speech interruption in downlink
is extremely long.
The SRVCC MSC sends message 13, PS to CS Response (Target RAN Codec), to the
MME, triggering the Handover Command. While the Handover Command is on its way
to UE A, Pre-SRVCC CMR-IO could reach UE B and UE B could start sending in
EVS-IO mode already before the handover on air happens.
As soon as ATGW A gets these EVS-IO frames from UE B in RTP payload format for
EVS, ATGW A repacks them into RTP payload format for AMR-WB and now the Target
MGW can understand and forward them to the 2G radio leg. Depending on the
remote 3G leg radio conditions, UE B sends CMR between EVS-CMR (br=24.4;
bw=fb) and EVS-CMR (br=5.9; bw=wb). After receiving EVS-CMR-IO (br=6.6; bw=wb)
from ATGW A, UE B may also start sending between EVS-CMR-IO (br=6.6; bw=wb),
reflecting that it is now operating in the EVS-IO mode. The ATGW in the
pathwill filter and translate the EVS-CMR coming from UE B into AMR-WB-CMR
going to UE A.
**Mode Control for the media stream downlink towards the Target RAN is in this
scenario most critical.\** The earlier this is triggered the better. It is
important that EVS-CMR-IO (br=6.6; bw=wb) is fast and reliable received,
understood and obeyed by UE B. This is important for a short speech break in
local downlink.
Mode Control for the media stream **uplink** from the Target RAN is trivial in
this scenario. The UE A starts in any case with the Initial Codec Mode of the
Target RAN Codec, here with AMR-WB (0), if the standard is followed. This is
always understood by the ATGW A. As soon as ATGW A receives RTP packets in
payload format for AMR-WB from the Target MGW, ATGW A repacks them into RTP
payload format for EVS and sends them towards UE B. This repacking includes
the translation of the CMR commands.
The Target BTS and especially the Target MGW send immediately after SRVCC AMR-
WB-CMR=0 in all RTP packets towards ATGW A. AMR-WB-CMR=0 is translated by ATGW
A into EVS-CMR-IO and it would be best to send CMR-EVS-IO in **all** RTP
packets towards UE B. In case of a speech pause, CMR-only packets should be
sent for a while repeatedly.
The Target BTS sends AMR-WB-CMR=0 downlink on the new radio channel to keep UE
A in the Initial Codec Mode for a while. This is done, until the new radio
channel is observed and measured long enough to decide the optimal mode.
**It is in general much better to use error free frames in a low mode, than to
risk lost frames in a high mode.**
## 9.8 Mode Control after SRVCC
UE A receives the Handover Command via the LTE leg and starts as soon as
possible switching to the Target Radio leg. This Handover on air takes a while
and is dependent on the radio leg standard and on implementation skills in the
UE. Let\'s say the UE \"disappears\" from LTE and \"appears\" on 3G about
[100ms] later, to take this just as a \"house number\".
Because UE A used EVS before SRVCC, it may use the EVS Codec algorithm also
after SRVCC for encoding and decoding in the EVS-IO mode of operation. In case
of SRVCC from EVS to AMR-WB, there is no need to restart the Codec algorithm.
All State-Variables of the Codec algorithm can be used as they are and this
helps to combat the speech path interruption.
In any case, UE A will start/continue after SRVCC with EVS-IO, sending these
EVS-IO coded speech frames in uplink in the format of AMR-WB. This Initial
Codec Mode will be kept, until the Target BTS sends AMR-WB-CMR with other,
higher values, indicating that the uplink radio leg is good enough. Typically,
it takes about [500 ms], until UE A and Target BTS have observed the new radio
leg and determined the best codec mode in downlink and uplink. Then the Target
BTS will allow CMR up to CMR=2 in downlink and UE A will send CMR up to CMR=2
in uplink and after one more round trip time the call is in the best possible
Codec Modes after SRVCC.
# 10 SDP Offer--Answer between MSC and ATCF
## 10.1 General
Clause 5 describes the basic SRVCC procedure in principle; this clause
discusses the communication between SRVCC MSC and ATCF in more detail,
considering the current SRVCC standard.
Figure 5.1-2 shows the simplified message flow for SRVCC according to Stage 2.
## 10.2 Message and Information from MSC to ATCF
Message 10a, SIP Invite (MSC Preferred Codec List 2), is the first message
from MSC to ATCF in the ongoing SRVCC procedure. At that point, the Target RAN
leg is more or less completely setup and all necessary resources are
allocated. Only the link between Target MGW and ATGW is missing. The Target
RAN Codec has been selected, \"guessed\", based on local criteria only. The IP
Address and UPD Port (connectivity data) of the Target MGW are allocated. The
SRVCC MSC assembled its \"MSC Preferred Codec List 2\", with the Target RAN
Codec at the first place in this ordered list.
Message 10a contains mainly this MSC Preferred Codec List 2 and the
connectivity data of the Target MGW, besides the necessary call identifier,
allowing the ATCF to find the concerned ongoing call.
## 10.3 Information in ATCF and ATGW and actions
The ATCF knows the IMS Selected Codec of the ongoing call and all alternative
Codecs, which are supported by the ATGW. In principle, the ATCF may also know
the \"remote Supported Codec List\", i.e. the list of all Codec candidates for
TrFO between the ATGW and the remote end. The IMS Selected Codec is one Codec
of that list.
The ATCF does not know the capabilities of the Target RAN, until Message 10a
arrives. This is also the point, when the ATCF gets knowledge that SRVCC is
necessary. Before, no preparation was possible.
The ATCF takes the MSC Preferred Codec List and selects the CS-PS Codec for
the link between ATGW and Target MGW. It is not specified, how the ATCF
derives this selection.
The selection seems obvious, if IMS Selected Codec and Target RAN Codec are
identical or at least TrFO-compatible.\ If these Codecs do not match, then
transcoding will be inserted and the choice for the CS-PS Codec is less
obvious. With the selection of the CS-PS Codec the ATCF has the power to
decide, where transcoding has to be inserted, if needed.
Then ATCF sends Message 10b, Session Transfer (CS-PS Codec), to the ATGW.
Message 10b contains also the connectivity data of the Target MGW. The ATGW
allocates the necessary resources, determines the IP address and UPD Port in
the ATGW (connectivity data), and returns these to the ATCF. In that moment,
the ATGW switched the User Plane from the old LTE leg to the new Target RAN
leg sharply.
Message 10b is the first point, when the ATGW gets informed about SRVCC. The
ATGW decides, whether transcoding between the IMS Selected Codec and the CS-
PS-Codec is necessary.
The ATGW may also detect and decide, if Mode Control commands will be sent to
the remote end, in order to bring the Remote Used Codec into the mode of
operation and rate- and bandwidth-range, necessary to match the CS-PS Codec.
That is not standardized and left for implementation. In the simplest case,
the ATGW just allocates the resources and switches the User Plane from the old
LTE leg to the new Target leg. If the Remote Used Codec is TrFO-compatible to
the CS-PS-Codec, but currently operating in a non-compatible mode, then speech
data from the remote end cannot be understood in the Target RAN. This causes a
muting period in the local downlink, until the Remote Codec is in the right
mode of operation.
## 10.4 Message from ATCF to MSC, MGW actions
Message 11b, SIP Response (CS-PS Codec), contains the CS-PS Codec for the link
between ATGW and Target MGW and the connectivity data of the ATGW. When the
ATCF sends Message 11b to the SRVCC MSC, then the IP link between ATGW and
Target MGW can be closed. Now data may already flow between these MGWs.
In principle, the Target MGW can now send Mode Control commands (CMR) towards
the ATGW, hoping the ATGW would send them further towards the remote end. This
is not standardized, too. If successful, it shortens at least the time until
the remote end is in the right mode, although these Mode Control commands are
already rather late.
Since the local UE has so far most likely not landed on the new radio leg,
there are no Speech or SID frames arriving in the Target MGW in uplink. The
Target MGW may, however, send CMR-Only packets towards the ATGW to initiate
this Mode Control. The 3GPP standards for AMR and AMR-WB and the RTP payload
format for these allow and recommend these CMR-Only packets (often called
\"No_Data\" packets). In order to combat packet loss these CMR-Only packets
should be repeated.
## 10.5 Message from MSC to MME and LTE UE
Figure 5.1-2 shows that the SRVCC MSC may send message 13, PS to CS Handover
Response (Target RAN Codec), immediately after the Target RAN Codec is
selected, even before the ATCF is involved by Message 10b.
Message 13 triggers the Handover Command towards the LTE UE. Sending Message
13 early accelerates the Handover on air, but it bears the risk that the
resources in the ATGW are not ready, when the UE accesses the new radio leg.
Sending Message 13 later, e.g. after Message 11b has been received from the
ATCF, bears the risk that the handover on air is too long after the ATGW has
switched the User Plane sharply. Whatever the MSC does, it seems insufficient
for an optimal SRVCC handover switching in real life networks with load and
radio errors.
# 11 Codec Compatibility
## 11.1 Digital Mobile Communication
In all digital communication system the analogue voice signal (**Mic** rophone
signal) is in one of the very first processing steps **A/D** -converted into a
digital signal representation. The used sampling frequency (sf) has to be at
least twice as high as the highest frequency of the voice band that is to be
transmitted. The resolution of the signal amplitude has to be sufficiently
high in order to not loose quality in this first step. Typically 12, better 16
bit resolution is today regarded as sufficient for real time communication. In
most practical implementations today this A/D-conversion (and the
D/A-conversion at the end) can be regarded as de facto loss-less, negligible.
Not negligible is the limitation in the voice bandwidth: **N** arrow-**B** and
(300-3.400 Hz), **W** ide-**B** and (100-7.000 Hz), **S** uper-**W** ide-**B**
and (50-16.000 Hz) or even **F** ull-**B** and (20-20.000 Hz).
Some further (optional) steps in digital voice processing are then Acoustic
Echo Cancellation (**AEC**), Automatic Gain Control (**AGC**), Noise Reduction
(**NR**) and maybe more, just to mention some of these, often proprietary
algorithms. The resulting digital signal is still in \"linear presentation\"
and has still a very high bit rate: too high for a commercially viable
transmission in most wireless systems.
Therefore a very important step for interworking follows: the reduction of the
bit rate with as little as achievable loss in signal quality. This step -- in
fact a series of quite complex mathematical algorithms - is called
\"Encoding\" (**ENC**) and results in a substantially reduced bit rate. This
is now much better suited for transmission over long distances and especially
over wireless connections.
At the receiving side the counterpart, the \"Decoding\" (**DEC**) has to take
place, typically followed by Gain Control (**GC**) - and more - and finally
the **D/A** -conversion back into an analogue signal, which feeds the
loudspeaker (**Lsp**).
Figure 11.1-1 shows the principle of this typical voice processing within two
terminals A and B.
{width="6.451388888888889in" height="1.4958333333333333in"}
Figure 11.1-1: Principle of voice processing within two terminals A and B.
In the present document a specific transmission link is named with the used
**Codec** for that link. It is obvious that En**co** der and **Dec** oder on
both ends of the **coDec** -link will fit together, will \"talk the same
language\".
\"As little as achievable loss\" means that in most commercial systems there
is a small loss in voice quality within the Encoding process. Over time the
Encoding algorithms have improved and this loss could be reduced, but it is
still not negligible. In this report the Decoding is regarded as loss-less,
all loss of a Codec is (per definition) counted in the Encoding. Further
losses in voice quality occur in the microphone, in these proprietary pre- and
post-processing steps and -- notably -- in the loudspeaker. In fact the main
bottlenecks for voice quality are nowadays not in the Codec, but in the audio
input/output of the terminals.
## 11.2 Transcoding
Figure 11-1 simplifies the connection between the terminals dramatically. In
reality this connection is quite complex and often both terminals do not
support the same Codec, therefore \"Trans-Coding\" has to take place.
Transcoding is the \"translation\" from one Codec-language into another Codec-
language. This Transcoding is performed within \"Media GateWays\" (MGW), see
Figure 11.2-1.
{width="5.050694444444445in" height="1.4958333333333333in"}
Figure 11.2-1: Principle of Transcoding.
The typical Transcoding is a cascade of the Decoding of the signal on the
incoming link back into the linear presentation and then the Encoding for the
outgoing link. This second Encoding step causes another voice quality
degradation. These two Codecs, Codec 1 and Codec 2, are called here to be \"in
tandem\". Tandem Free Operation (TFO) was the first attempt to avoid this
quality loss for the call cases, where both Codecs, \"right\" and \"left\" of
the MGW, or right and left of a PCM-coded link, were TFO-compatible.
## 11.3 Transcoding Free Operation
Nowadays Transcoding Free Operation (TrFO) is of key importance to many voice
service aspects. High Definition Voice services (HD Voice) is an important
example (although -- strictly speaking -- transcoding occurs also in some HD
Voice calls, see below). The Codecs used at both ends of the communication
will be TrFO-compatible (TFO-compatible) to achieve best possible quality, as
transcoding always degrades quality.
In its simplest form Codec 1, left of the MGW and Codec 2, right of the MGW,
are identical. The MGW detects this and \"shortcuts\" both links. It is,
however, not strictly required that both Codecs are identical to avoid
Transcoding. It is sufficient that both Codecs are TrFO-compatible. Table
11.3-1 list the most important TrFO-compatible 3GPP Codecs.
Table 11.3-1: Important TrFO-compatible 3GPP Codecs (selection)
* * *
Codec 2\ GSM_EFR AMR\ AMR\ AMR-WB\ AMR-WB\ EVS-IO\ EVS\ Codec 1 (7) (0,2,4,7)
(0,1,2) () () ()
GSM_EFR TrFO SID-Con
AMR(7) SID-Con TrFO
AMR(0,2,4,7) TrFO
AMR-WB(0,1,2) TrFO Rate-ctrl Rate-ctrl Mode-ctrl
AMR-WB() Rate-ctrl TrFO TrFO
EVS-IO() Rate-ctrl TrFO TrFO
EVS() Mode-ctrl TrFO
* * *
The diagonal \"upper-left to lower-right\" of Table 11-1 shows \"**TrFO** \"
in all squares: of course, because Codec 1 and Codec 2 are identical. Empty
squares indicate: transcoding is required.
Interesting is that also GSM_EFR and AMR (mode-set=7) are \"nearly\" TrFO-
compatible: the Speech frames are compatible, i.e. a GSM_EFR encoded frame can
be decoded by AMR and an AMR (7) encoded frame can be decoded by GSM_EFR. The
SID frames of both are, however, different and a \"SID Conversion\" (SID-Con)
is needed. The term \"SID Transcoding\" is not used here, as the conversion is
done without full decoding/encoding. SID frames describe the background noise
in speech pauses and a small deviation in background noise is typically not
perceivable by end-users, so GSM_EFR and AMR(7) are called TrFO-compatible.
GSM_EFR and AMR(7) play still an important, although decreasing role in many
GERAN and UTRAN networks.
Far more important are AMR(0,2,4,7), AMR(0,2,4) and AMR(0,2). Not all of these
are listed in the table to keep the table readable. Please note that these
three should be kept formally as three different Codecs: same Codec Type, but
different Codec Configurations. They are TrFO-compatible under the important
assumption that the Rate Control rules are strictly followed by all terminals
and all nodes in the voice path! For details see clause 9.
Example**:** Codec 1 == HR_AMR(0,2,4) ----- Codec 2 == AMR(0,2,4,7) \-----
Codec 3 == UMTS_AMR2(0,2)/SF=256.
This cascade of a GERAN----Core----UTRAN call is transcoding free for the two
AMR-modes 0 (4.75) and 2 (5.90). Rate Control end-to-end ensures that the
maximum Rate is 5.90, i.e. mode=2. If one of the partners would not comply to
AMR Rate Control rules, then transcoding would have to be included with lower
voice quality than AMR(5.90) end-to-end. Otherwise one side of the call could
end in \"silence\", e.g. if the GERAN side sends with AMR(4) the UTRAN side
could not receive this and would go muting. Even worse: the AMR-SID frames,
sent in speech pauses, would be able to pass and be decoded: the UTRAN side
would not be totally silent, but background noise and some speech clips could
be heard.
The term \"SF=256\" denotes here the WCDMA Spreading Factor 256 and SF=128 the
WCDMA Spreading Factor 128.
A lot of market dynamic is nowadays in deploying AMR-WB as \"HD Voice\"
service. AMR-WB(0,1,2) is deployed world-wide in UTRAN as UMTS_AMR-
WB(0,1,2)/SF=128 and in GERAN as FR_AMR-WB(0,1,2). In VoLTE the higher modes
of AMR-WB are deployed, too, notably the highest mode 8 (23.85). In order to
allow TrFO-Interworking between GERAN, UTRAN and VoLTE the mode-set=0,1,2 will
be included in all Codecs in the path. It is recommended to deploy AMR-WB(),
i.e. the AMR-WB with all 9 modes in VoLTE.
A VoLTE\VoLTE call may use all 9 modes AMR-WB(0,1,2,3,4,5,6,7,8).
A VoLTE\CS call may use the three lower modes AMR-
WB(0,1,2~~,3,4,5,6,7,8~~), \"striking out\" the higher modes by Maximum Rate
Control: end-to-end Rate Control takes care that no mode higher than 2 is
allowed. Essential is that the VoLTE-UE (any MTSI-client) follows the Rate
Control commands strictly and as fast as possible.
It is stressed again that AMR-WB(0,1,2) in end-to-end TrFO is BETTER than AMR-
WB(0,1,2) plus transcoding to AMR-WB(8), although it looks at the first
glance: AMR-WB(8) will be better on the VoLTE side, it is not.
The most recent 3GPP Codec is the Codec for Enhanced Voice Services (EVS). EVS
supports four different audio bandwidths (NB, WB, SWB and FB) and a wider
range of bit rates (7.2 up to 128 kbps). The AMR-WB is included within the EVS
as \"EVS AMR-WB IO\", in short EVS-IO in this paper. Seamless transitions
between all audio bandwidths as well as between EVS Primary and EVS-IO are
supported during the call by \"Rate and Mode Control\". Again, as for AMR and
AMR-WB, all Codecs in the speech path will follow the EVS Rate and Mode
Control rules strictly.
## 11.4 Transcoding Free Operation at call setup
Codec Negotiation at call setup tries to ensure that all nodes in the path,
including the end terminals, agree on the optimal combination along the voice
path, ideally a TrFO-compatible combination of Codecs. As said: these Codecs
need not be identical, but they will be TrFO-compatible. This task is no
trivial, especially when the call is setup between different networks and
these operators follow different strategies or have different historical
background and/or different access technologies.
Some overview and discussion is provided in 3GPP S4-150326 \"Discussion Paper
on Offer-Answer for AMR and AMR-WB\". The considerations hold as well for EVS,
see also S4-150858 \"On Interworking Guidelines for EVS\".
## 11.5 Transcoding Free Operation after Handover
As important as call setup (maybe more) is to consider subsequent handover
cases!
Many calls undergo handover in frequencies like one handover in 10 seconds.
Often the handovers change also the radio access technology, GERAN\UTRAN,
LTE\WiFi, LTE\UTRAN and so on. Especially during network-migration
phases it might happen that a new Codec is inserted into the ongoing voice
path and this Codec is sometimes not TrFO-compatible to another Codec already
in use.
Very often these handover aspects are ignored or forgotten during network
design. The current SRVCC procedure is such an example. Important is also to
consider that e.g. after a SRVCC from LTE to UTRAN a subsequent handover may
follow from UTRAN to GERAN or any other combination or sequence. To guarantee
end-to-end TrFO in all these (practically infinite) call scenarios requires
strict rules for network design and inter-operator and inter-vendor
agreements.
# 12 Enhancements for media and quality aspects
Editor's note:
This clause intends to cover the following bullet point in the SA4 WID:
\- Propose enhancements for media and quality aspects of SRVCC with the aims:\
a) to avoid transcoding cases as much as possible;\ b) to minimize the speech
path interruption time during SRVCC;
Inputs are invited to review this Clause.
## 12.1 General
Editor's note:
Clause 12 is refers to clause 7, which has been drafted, but is not yet
included in this version of the TR.
The identified problems in clause 7 and the discussion in the other clauses
lead to the following proposals to achieve significant enhancements for media
transport, voice, and communication quality.
## 12.2 Early Information exchange between MSC and ATCF
Clause 7.2 states: \"_**Without knowledge about the IMS Selected Codec, the
Target RAN Codec cannot be selected optimally** \"._
Non optimal Target RAN Codec often means transcoding, with noticeable quality
loss for the whole duration of the call after SRVCC. Alternatively, it
requires a mid-call modification of the just selected Target RAN Codec
immediately after the SRVCC handover. This would bear the risk of a handover
failure and it would interrupt the voice path a second time, immediately after
SRVCC, unnecessarily.
This leads to the conclusion that the MSCwill retrieve somehow the necessary
information from the ATCF, before the Target RAN Codec is selected. Here
\"solution 1\" from TR 23.717 is reported in a shortened and modified form:
\- Proposal 1:
> \"Immediately after it received Message 5, PS to CS Handover Request, the
> updated SRVCC MSC should send a new message, called \"**PS to CS Handover
> Preparation Request** \" to the ATCF. This new message should contain the
> necessary call identifier, allowing the ATCF finding the concerned call and
> the wanted call-specific IMS Selected Codec.
>
> The updated ATCF should send a new message, called \"**PS to CS Handover
> Preparation Response** \" back to the SRVCC MSC, containing the wanted **IMS
> Selected Codec**. Now the updated MSC could select the Target RAN Codec in
> an optimal way and could then continue in the SRVCC procedure as
> standardized.\"
Figure 12.2-1 shows the essential message flow, where the two new Handover
Preparation Messages 5a and 5b are just inserted between Message 5 and Message
7a.
{width="6.525in" height="2.861111111111111in"}
Figure 12.2-1: Two Handover Preparation messages inserted
These two additional messages between MSC and ATCF would delay the SRVCC
procedure by a minimal, insignificant time span, which would not have any
negative influence on the speech path interruption time and no significant
effect on the handover success rate.
The message type for this information exchange may be discussed (Stage 2 and
Stage 3 work). One simple solution could be to use a tailor made SIP MESSAGE
in both directions. The coding of the IMS Selected Codec could follow the SDP
description as used in SIP INVITE.
## 12.2.1 Information in Handover Preparation Response
Clause 7.2.2 states _\"__If the IMS Selected Codec is better than the Target
RAN capabilities, then the SRVCC MSC will be informed about the full IMS
Preferred Codec List.\"_ **
This leads to a small extension of the **PS to CS Handover Preparation
Response**.
\- Proposal 2:
> \"The ATCF should include the IMS Selected Codec and **alternative Codec
> candidates** in the so called \"**IMS Preferred Codec List** \". The usual
> SDP description as for SIP INVITE could be used. The additional
> implementation effort would be minimal. The IMS Selected Codec should be on
> first place in this IMS Preferred Codec List.\"
If the MSC finds a Target RAN Codec, which is TrFO-compatible to the IMS
Selected Codec, then the SRVCC is optimally prepared and can be completed
fast.
Example 1:\ IMS Selected Codec = EVS (br=5.9-24.4; bw=nb-fb)\ IMS Preferred
Codec List = {EVS (br=5.9-24.4; bw=nb-fb); AMR-WB(), G.722, AMR(0,2,4,7),
G.711}.\ MSC Supported Codec List = {AMR-WB(0,1,2), AMR(0,2,4,7), G.711, EFR}\
==> Target RAN Codec = AMR-WB(0,1,2)\ IMS Selected Codec after CMR = EVS-
IO(0,1,2), which is TrFO-compatible to AMR-WB-2.
If the MSC does not find a Target RAN Codec, which is TrFO-compatible to the
IMS Selected Codec, then transcoding will select the best possible Target RAN
Codec that has a TrFO-compatible counterpart in this IMS Preferred Codec List.
Example 2:\ IMS Selected Codec = EVS (br=5.9-24.4; bw=nb-fb)\ IMS Preferred
Codec List = { EVS (br=5.9-24.4; bw=nb-fb); AMR-WB(), G.722, AMR(0,2,4,7),
G.711}.\ MSC Supported Codec List = {AMR(7), AMR(0,2,5,7), AMR(0,2,4,7),
G.711, EFR}\ ==> Target RAN Codec = AMR(0,2,4,7).
In example 2, SRVCC is also completed fast, but leads to Transcoding within
the ATGW, with CS-PS Codec = AMR(0,2,4,7). After the call is safely landed in
the Target RAN, the ATCF may start a SIP Re-Invite to change IMS Selected
Codec and Remote Used Codec to AMR(0,2,4,7). By this SIP Re-Invite TrFO is
regained for the rest of the call. This SIP Re-Invite to modify the IMS
Selected Codec, better to say: the subsequent modification of the User Plane,
may interrupt the voice path as any other handover. This interruption is
implementation dependent and it depends on the remote access. Without this
small interruption, the call would have to stay in transcoding.
Note that the MSC in example 2 does not know the EVS Codec at all. Sending the
IMS Selected Codec alone would not help. The MSC would prefer AMR(7), where no
TrFO-compatible counterpart exists on the IMS side.
## 12.2.2 Information in Handover Preparation Request
Clause 7.3 states _\"__Pre-SRVCC Mode Control is necessary for the optimal
SRVCC.\"_ **
Now, with the new \"**PS to CS Handover Preparation Request** \" message the
ATCF gets early information that SRVCC is coming. If this new message would
include information about the candidates for the Target RAN Codec, then the
ATCF could decide, if TrFO would be possible, with which Codec and whether or
not Pre-SRVCC Mode Control is required. Therefore
\- Proposal 3:
> \"The \"**PS to CS Handover Preparation Request** \" should contain the full
> \"**MSC Supported Codec List** \", meaning the list, from which the Target
> RAN Codec will be selected. The usual SDP description as for SIP INVITE
> could be used.\"
When the ATCF gets this MSC Supported Codec List and compares it with its own
IMS Preferred Codec List, then the ATCF could anticipate the Target RAN Codec,
before it is selected and allocated by the MSC.
This early knowledge about the Target RAN Codec would allow the ATCF to
decide, whether Pre-SRVCC Mode Control should be initiated and which CMR
command should be sent to the remote end. The ATCF would then have to inform
the ATGW, too. This would not be a command to transfer the access, but just to
modify the CMR flow coming from the local LTE UE towards the remote end,
preparing the Remote Used Codec for the coming SRVCC.
In example 1 of the previous clause 12.2.1, this CMR command would have to be
CMR-IO-0 to switch the EVS Codec from the EVS Primary mode into the EVS-IO
mode of operation, with the default Initial Codec Mode of AMR-WB-2.
**Summary so far:**
By simply introducing two new optional messages into the standardized SRVCC
message flow, the selection of the Target RAN Codec could be optimized for all
call scenarios. In addition, the ATCF could prepare the Pre-SRVCC Mode Control
Command and could trigger the ATGW to send it within the CMR stream towards
the remote end. These two new messages between MSC and ATCF would not trigger
any resource allocation and not the access transfer.
## 12.3 Access Transfer and Handover Command
Clause 7.4 states: **_\"Prerequisite for minimal speech path interruption
during SRVCC is a successful bi-casting in downlink and intelligent combining
in uplink.\"_**
The ATGW may insert the bi-casting in downlink and intelligent combining in
uplink immediately, when triggered by Message 10b, Session Transfer (CS-PS
Codec).
This could be implemented already today without mandating it in the SRVCC
standard. On the other hand, it would not have its full effect, if the MSC
would send Message 13, PS to CS handover Response, too early.
Therefore the following
\- Proposal 4:
> \"The updated ATGW inserts the bi-casting in downlink and intelligent
> combining in uplink immediately, when triggered by Message 10b, Session
> Transfer (CS-PS Codec).\ Due to backward compatibility, it is not required
> that all ATGWs do this.
>
> The ATCF indicates this updated ATGW-capability already in the **PS to CS
> Handover Preparation Response** to the MSC.
>
> If the MSC is informed about this updated ATGW-capability, then the MSC
> sends Message 13, PS to CS handover Response, after the ATCF has send
> Message 11b, SIP Response (CS-PS Codec), back to the MSC.\"
In this way, the MSC could rely on this ATGW-capability and the timing of the
Handover Command is no longer critical. A small shift in time would just delay
the handover on air, but would not have any effect on the speech path
interruption time. As long as this shift in time is not too extensive, the
handover success rate would not be degraded.
The timing of the handover on air and the handover in the ATGW would be
decoupled. **The speech path interruption times, both in uplink and in
downlink, would be always minimal** due to the improved ATGW handover
handling. Load on network links or in network nodes, as well as radio
transmission errors, could still delay the execution of certain actions, but
this would not have any influence on the speech break.
**Note:** sending message 13 later without the proposed updated ATGW handling
has not the full effect.
## 12.4 Unblock the Target MGW in Uplink
Clause 7.5 states that **_\"The uplink path in the Target MGW is blocked (is
set to one-way downlink-only), until the MSC has received a \"Handover
Complete\" message from the UE.\"_**
This control of the Target MGW is unusual and not necessary. It blocks the
uplink speech path in the Target RAN too long and causes an unnecessary uplink
interruption. The target base stations have strong error detection mechanisms,
allowing differentiating good speech frames in uplink from garbage quite well.
These base stations send only valid speech frames uplink and the Target MGW
should let them pass immediately. The \"Handover Complete\" message from the
UE is just the confirmation that the handover was successful. After that, the
old radio leg can be shut down.
\- Proposal 5:
> \"Unblock the Target MGW immediately at resource allocation\".
## 12.5 Clarify that CMR commands will be followed
Clause 7.6 reports that some UEs are observed not following CMR commands at
all or only delayed. This CMR problem is not only an SRVCC problem; it is a
serious misbehaviour in many situations.
\- Proposal 6:
> \"Clarify in TS 26.114 and in IR 92 (and where else it seems appropriate,
> e.g. in terminal specifications) that every received CMR will be followed as
> soon as possible, for AMR, AMR-WB and EVS.\"
**Note:** This is meanwhile clarified in TS 26.114 for AMR and AMR-WB.
## 12.6 Updated Message flow
Figure 12.6-1 shows the essential parts of the updated message flow for SRVCC
(Stage 2 level) with the new actions in ATCF and ATGW.
{width="6.5375in" height="4.545138888888889in"}
Figure 12.6-1: Essential parts of the updated message flow and new actions in
ATCF and ATGW
The essential flow with these new elements is (summary):
  1. The MSC informs with Message 5a the ATCF/ATGW at the earliest possible stage about the coming SRVCC and the candidates for the Target RAN Codec;
  2. The ATCF decides, whether Pre-SRVCC Mode Control is requested and triggers the ATGW to send the necessary CMR Command towards the remote end;
  3. The ATGW sends these CMR Commands at the earliest possible stage to the remote end to get speech encoded with the new Codec Mode as soon as possible from the remote end; it does not matter, when this new Codec Mode is received at the ATGW and local LTE UE before the handover on air happened;
  4. The ATCF sends the complete, call-specific IMS Preferred Codec List to the MSC, indicating, whether the ATGW supports bi-casting;
  5. The MSC selects the optimal Target RAN Codec, based on the IMS Preferred Codec List and allocates the Target RAN Resources as usual;
  6. Then the MSC sends the SIP INVITE with an updated MSC Preferred Codec List, with the Target RAN Codec on first place, to trigger the access transfer in ATCF and ATGW;
  7. The ATCF selects the optimal CS-PS Codec (typically identical or TrFO-compatible to the Target RAN Codec) and allocates the necessary resources in the ATGW;
  8. The ATGW starts bi-casting the speech data, coming from the remote end, downlink to the old and new radio access legs and starts intelligent combining of speech data, coming from the old or the new radio access leg in uplink, to forward the result towards the remote end; if necessary transcoding is inserted towards the new radio leg;
  9. The ATCF returns the CS-PS Codec to the MSC together with the connectivity data of the ATGW;
  10. The MSC closes the link between Target MGW and ATGW;
  11. The MSC sends latest now the PS to CS Handover Response to the MME, including the Target RAN Codec, triggering the handover on air;
  12. The Target RAN is prepared and the Target MGW sends speech downlink and uplink as available without any blocking;
  13. The UE performs the handover on air, while the ATGW is sending and receiving from both radio legs.\ No speech frame can be lost, except due to the handover-inherent interruption and the potentially different speech path delays before and after SRVCC
  14. After the UE has safely landed in the Target RAN, it sends \"Handover Complete\" to the MSC;
  15. The MSC informs the ATCF about the SRVCC completion;
  16. The ATCF shuts down the old radio leg;
  17. The ATGW detects autonomously that no more speech is coming in uplink from the old radio leg and speech is only received on the new radio leg and after a certain time out, the ATGW stops bi-casting and combining; alternatively, the ATCF could inform the ATGW.
  18. If found appropriate the ATCF may start a SIP Re-Invite towards the remote end to modify the IMS Selected Codec and the Remote Used Codec.
# 13 Proposals for Stage 2 and Stage 3
Editor\'s Note: The WID on Media and Quality Aspects of SRVCC Enhancements
(FS_SETA_S4) in SGS#68(15)0361 states as one objective
\- Support SA2 SETA work by SA4 expertise in speech quality and media
handling;
Clause 12 lists a (draft) series of enhancement proposals on high level.
Comments and additional proposals are invited. SA4 welcomes a close
cooperation with SA2 and CT groups to progress this work specifying the
details for Stage 2 and Stage 3 specifications.
#