# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document contains the definition of the LTE Positioning Protocol
(LPP).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
```{=html}
``` \- For a non-specific reference, the latest version applies. In the > case
of a reference to a 3GPP document (including a GSM document), > a non-specific
reference implicitly refers to the latest version > of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.305: \"Stage 2 functional specification of User Equipment (UE)
positioning in E-UTRAN\".
[3] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\".
[4] IS-GPS-200, Revision D, Navstar GPS Space Segment/Navigation User
Interfaces, March 7^th^, 2006.
[5] IS-GPS-705, Navstar GPS Space Segment/User Segment L5 Interfaces,
September 22, 2005.
[6] IS-GPS-800, Navstar GPS Space Segment/User Segment L1C Interfaces,
September 4, 2008.
[7] IS-QZSS, Quasi Zenith Satellite System Navigation Service Interface
Specifications for QZSS, Ver.1.1, July 31, 2009.
[8] Galileo OS Signal in Space ICD (OS SIS ICD), Issue 1.2, February 2014,
European Union.
[9] Global Navigation Satellite System GLONASS Interface Control Document,
Version 5.1, 2008.
[10] Specification for the Wide Area Augmentation System (WAAS), US Department
of Transportation, Federal Aviation Administration, DTFA01-96-C-00025, 2001.
[11] RTCM-SC104, RTCM Recommended Standards for Differential GNSS Service
(v.2.3), August 20, 2001.
[12] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Radio Resource Control (RRC); Protocol specification\".
[13] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol Specification\".
[14] 3GPP TS 44.031: \"Location Services (LCS); Mobile Station (MS) - Serving
Mobile Location Centre (SMLC) Radio Resource LCS Protocol (RRLP)\".
[15] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[16] 3GPP TS 36.211: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical Channels and Modulation\".
[17] 3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer -- Measurements\".
[18] 3GPP TS 36.133: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Requirements for support of radio resource management\".
[19] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[20] OMA-TS-LPPe-V1_0, LPP Extensions Specification, Open Mobile Alliance.
[21] 3GPP TS 36.101: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio transmission and reception\".
[22] ITU-T Recommendation X.691 (07/2002) \"Information technology - ASN.1
encoding rules: Specification of Packed Encoding Rules (PER)\" (Same as the
ISO/IEC International Standard 8825-2).
[23] BDS-SIS-ICD-2.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal (Version 2.0)\", December 2013.
[24] ATIS-0500027: \"Recommendations for Establishing Wide Scale Indoor
Location Performance\", May 2015.
[25] Bluetooth Special Interest Group: \"Bluetooth Core Specification v4.2\",
December 2014.
[26] IEEE 802.11, Part 11: \"Wireless LAN Medium Access Control (MAC) and
Physical Layer (PHY) Specifications\".
# 3 Definitions and Abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
[1], [2] and [3] apply. Other definitions are provided below.
**Location Server:** a physical or logical entity (e.g., E-SMLC or SUPL SLP)
that manages positioning for a target device by obtaining measurements and
other location information from one or more positioning units and providing
assistance data to positioning units to help determine this. A Location Server
may also compute or verify the final location estimate.
**Reference Source:** a physical entity or part of a physical entity that
provides signals (e.g., RF, acoustic, infra-red) that can be measured (e.g.,
by a Target Device) in order to obtain the location of a Target Device.
**Target Device:** the device that is being positioned (e.g., UE or SUPL SET).
**Observed Time Difference Of Arrival (OTDOA):** The time interval that is
observed by a target device between the reception of downlink signals from two
different cells. If a signal from cell 1 is received at the moment _t~1~_ ,
and a signal from cell 2 is received at the moment _t~2~_ , the OTDOA is
_t~2~_ \-- _t~1~_.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply.
ADR Accumulated Delta-Range
A‑GNSS Assisted‑GNSS
AP Access Point
ARFCN Absolute Radio Frequency Channel Number
BDS BeiDou Navigation Satellite System
BTS Base Transceiver Station (GERAN)
CID Cell-ID (positioning method)
CNAV Civil Navigation
CRS Cell-specific Reference Signals
ECEF Earth-Centered, Earth-Fixed
ECGI Evolved Cell Global Identifier
ECI Earth-Centered-Inertial
E‑CID Enhanced Cell-ID (positioning method)
EGNOS European Geostationary Navigation Overlay Service
E-SMLC Enhanced Serving Mobile Location Centre
E-UTRAN Evolved Universal Terrestrial Radio Access Network
EOP Earth Orientation Parameters
EPDU External Protocol Data Unit
FDMA Frequency Division Multiple Access
FEC Forward Error Correction
FTA Fine Time Assistance
GAGAN GPS Aided Geo Augmented Navigation
GLONASS GLObal\'naya NAvigatsionnaya Sputnikovaya Sistema (Engl.: Global
Navigation Satellite System)
GNSS Global Navigation Satellite System
GPS Global Positioning System
ICD Interface Control Document
IOD Issue of Data
IS Interface Specification
LPP LTE Positioning Protocol
LPPa LTE Positioning Protocol Annex
LSB Least Significant Bit
MBS Metropolitan Beacon System
MO-LR Mobile Originated Location Request
MSAS Multi-functional Satellite Augmentation System
MSB Most Significant Bit
msd mean solar day
MT-LR Mobile Terminated Location Request
NAV Navigation
NICT National Institute of Information and Communications Technology
NI-LR Network Induced Location Request
NTSC National Time Service Center of Chinese Academy of Sciences
OTDOA Observed Time Difference Of Arrival
PDU Protocol Data Unit
PRC Pseudo‑Range Correction
PRS Positioning Reference Signals
PZ-90 Parametry Zemli 1990 Goda -- Parameters of the Earth Year 1990
QZS Quasi Zenith Satellite
QZSS Quasi-Zenith Satellite System
QZST Quasi-Zenith System Time
RF Radio Frequency
RRC Range‑Rate Correction
> Radio Resource Control
RSRP Reference Signal Received Power
RSRQ Reference Signal Received Quality
RSTD Reference Signal Time Difference
RU Russia
SBAS Space Based Augmentation System
SET SUPL Enabled Terminal
SFN System Frame Number
SLP SUPL Location Platform
SUPL Secure User Plane Location
SV Space Vehicle
TBS Terrestrial Beacon System
TLM Telemetry
TOD Time Of Day
TOW Time Of Week
UDRE User Differential Range Error
ULP User Plane Location Protocol
USNO US Naval Observatory
UT1 Universal Time No.1
UTC Coordinated Universal Time
WAAS Wide Area Augmentation System
WGS‑84 World Geodetic System 1984
WLAN Wireless Local Area Network
# 4 Functionality of Protocol
## 4.1 General
### 4.1.1 LPP Configuration
LPP is used point-to-point between a location server (E-SMLC or SLP) and a
target device (UE or SET) in order to position the target device using
position-related measurements obtained by one or more reference sources.
Figure 4.1.1-1 shows the configuration as applied to the control- and user-
plane location solutions for E-UTRAN (as defined in [2] and [3]).
Figure 4.1.1-1: LPP Configuration for Control- and User-Plane Positioning in
E-UTRAN
### 4.1.2 LPP Sessions and Transactions
An LPP session is used between a Location Server and the target device in
order to obtain location related measurements or a location estimate or to
transfer assistance data. A single LPP session is used to support a single
location request (e.g., for a single MT-LR, MO-LR or NI-LR). Multiple LPP
sessions can be used between the same endpoints to support multiple different
location requests (as required by [3]). Each LPP session comprises one or more
LPP transactions, with each LPP transaction performing a single operation
(capability exchange, assistance data transfer, or location information
transfer). In E-UTRAN the LPP transactions are realized as LPP procedures. The
instigator of an LPP session will always instigate the first LPP transaction,
but subsequent transactions may be instigated by either end. LPP transactions
within a session may occur serially or in parallel. LPP transactions are
indicated at the LPP protocol level with a transaction ID in order to
associate messages with one another (e.g., request and response).
Messages within a transaction are linked by a common transaction identifier.
### 4.1.3 LPP Position Methods
Internal LPP positioning methods and associated signalling content are defined
in this specification.
This version of the specification defines OTDOA, A-GNSS, E-CID, Barometric
Sensor, TBS, WLAN, and Bluetooth positioning methods.
Editor's Note: Value ranges may need confirmation with RAN4.
### 4.1.4 LPP Messages
Each LPP transaction involves the exchange of one or more LPP messages between
the location server and the target device. The general format of an LPP
message consists of a set of common fields followed by a body. The body (which
may be empty) contains information specific to a particular message type. Each
message type contains information specific to one or more positioning methods
and/or information common to all positioning methods.
The common fields are as follows:
* * *
Field **Role** Transaction ID Identify messages belonging to the same
transaction Transaction End Flag Indicate when a transaction (e.g. one with
periodic responses) has ended **Sequence Number** **Enable detection of a
duplicate LPP message at a receiver** Acknowledgement Enable an
acknowledgement to be requested and/or returned for any LPP message
* * *
NOTE: Use of the Transaction ID and Transaction End fields conform to the
procedures in clause 5 and are independent of the means used to transport LPP
messages (e.g., whether using a NAS MO-LR Request, NAS Generic Transport or
user-plane solution).
The following message types are defined:
\- Request Capabilities;
\- Provide Capabilities;
\- Request Assistance Data;
\- Provide Assistance Data;
\- Request Location Information;
\- Provide Location Information;
\- Abort;
\- Error.
## 4.2 Common LPP Session Procedure
The purpose of this procedure is to support an LPP session comprising a
sequence of LPP transactions. The procedure is described in Figure 4.2-1.
Figure 4.2-1 LPP Session Procedure
1\. Endpoint A, which may be either the target or the server, initiates an LPP
session by sending an LPP message for an initial LPP transaction _j_ to the
other endpoint B (which has an opposite role to A).
2\. Endpoints A and B may exchange further messages to continue the
transaction started in step 1.
3\. Either endpoint may instigate further transactions by sending additional
LPP messages.
4\. A session is terminated by a final transaction _N_ in which LPP messages
will be exchanged between the two endpoints.
Within each transaction, all constituent messages shall contain the same
transaction identifier. The last message sent in each transaction shall have
the IE _endTransaction_ set to TRUE. Transactions that occur in parallel shall
use different transaction IDs; transaction IDs for completed transactions may
be reused at any time after the final message of the previous transaction with
the same ID is known to have been received.
## 4.3 LPP Transport
### 4.3.1 Transport Layer Requirements
LPP requires reliable, in-sequence delivery of LPP messages from the
underlying transport layers. This section describes the transport capabilities
that are available within LPP. A UE implementing LPP for the control-plane
solution shall support LPP reliable transport (including all three of
duplicate detection, acknowledgement, and retransmission).
LPP reliable transport functionality is not used in the user-plane solution.
The following requirements in subclauses 4.3.2, 4.3.3, and 4.3.4 for LPP
reliable transport apply only when the capability is supported.
### 4.3.2 LPP Duplicate Detection
A sender shall include a sequence number in all LPP messages sent for a
particular location session. The sequence number shall be distinct for
different LPP messages sent in the same direction in the same location session
(e.g., may start at zero in the first LPP message and increase monotonically
in each succeeding LPP message). Sequence numbers used in the uplink and
downlink are independent (e.g., can be the same).
A receiver shall record the most recent received sequence number for each
location session. If a message is received carrying the same sequence number
as that last received for the associated location session, it shall be
discarded. Otherwise (i.e., if the sequence number is different or if no
sequence number was previously received or if no sequence number is included),
the message shall be processed.
Sending and receiving sequence numbers shall be deleted in a server when the
associated location session is terminated and shall be deleted in a target
device when there has been no activity for a particular location session for
10 minutes.
NOTE: For LPP control-plane use, a target device can be aware of a location
session from information provided at the NAS level for downlink transport of
an LPP message.
### 4.3.3 LPP Acknowledgement
#### 4.3.3.1 General
Each LPP message may carry an acknowledgement request and/or an
acknowledgement indicator. A LPP message including an acknowledgement request
(i.e., that include the IE _ackRequested_ set to TRUE) shall also include a
sequence number. Upon reception of an LPP message which includes the IE
_ackRequested_ set to TRUE, a receiver returns an LPP message with an
acknowledgement response (i.e., that includes the _ackIndicator_ IE set to the
same sequence number of the message being acknowledged). An acknowledgement
response may contain no LPP message body (in which case only the sequence
number being acknowledged is significant); alternatively, the acknowledgement
may be sent in an LPP message along with an LPP message body. An
acknowledgement is returned for each received LPP message that requested an
acknowledgement including any duplicate(s). Once a sender receives an
acknowledgement for an LPP message, and provided any included sequence number
is matching, it is permitted to send the next LPP message. No message
reordering is needed at the receiver since this stop-and-wait method of
sending ensures that messages normally arrive in the correct order.
When an LPP message is transported via a NAS MO-LR request, the message does
not request an acknowledgement.
#### 4.3.3.2 Procedure related to Acknowledgement
Figure 4.3.3.2-1 shows the procedure related to acknowledgement.
Figure 4.3.3.2-1: LPP Acknowledgement procedure
1\. Endpoint A sends an LPP message _N_ to Endpoint B which includes the IE
_ackRequested_ set to TRUE and a sequence number.
2\. If LPP message _N_ is received and Endpoint B is able to decode the
_ackRequested_ value and sequence number, Endpoint B shall return an
acknowledgement for message _N_. The acknowledgement shall contain the IE
_ackIndicator_ set to the same sequence number as that in message _N_.
3\. When the acknowledgement for LPP message _N_ is received and provided the
included _ackIndicator_ IE matches the sequence number sent in message _N_ ,
Endpoint A sends the next LPP message _N+1_ to Endpoint B when this message is
available.
### 4.3.4 LPP Retransmission
#### 4.3.4.1 General
This capability builds on the acknowledgement and duplicate detection
capabilities. When an LPP message which requires acknowledgement is sent and
not acknowledged, it is resent by the sender following a timeout period up to
three times. If still unacknowledged after that, the sender aborts all LPP
activity for the associated session. The timeout period is determined by the
sender implementation but shall not be less than a minimum value of 250ms.
#### 4.3.4.2 Procedure related to Retransmission
Figure 4.3.4.2-1 shows the procedure related to retransmission when combined
with acknowledgement and duplicate detection.
Figure 4.3.4.2-1: LPP Retransmission procedure
1\. Endpoint A sends an LPP message _N_ to Endpoint B for a particular
location session and includes a request for acknowledgement along with a
sequence number.
2\. If LPP message _N_ is received and Endpoint B is able to decode the
_ackRequested_ value and sequence number (regardless of whether the message
body can be correctly decoded), Endpoint B shall return an acknowledgement for
message _N_. If the acknowledgement is received by Endpoint A (such that the
acknowledged message can be identified and sequence numbers are matching),
Endpoint A skips steps 3 and 4.
3\. If the acknowledgement in step 2 is not received after a timeout period,
Endpoint A shall retransmit LPP message _N_ and shall include the same
sequence number as in step 1.
4\. If LPP message _N_ in step 3 is received and Endpoint B is able to decode
the _ackRequested_ value and sequence number (regardless of whether the
message body can be correctly decoded and whether or not the message is
considered a duplicate), Endpoint B shall return an acknowledgement. Steps 3
may be repeated one or more times if the acknowledgement in step 4 is not
received after a timeout period by Endpoint A. If the acknowledgement in step
4 is still not received after sending three retransmissions, Endpoint A shall
abort all procedures and activity associated with LPP support for the
particular location session.
5\. Once an acknowledgement in step 2 or step 4 is received, Endpoint A sends
the next LPP message _N+1_ for the location session to Endpoint B when this
message is available.
# 5 LPP Procedures
## 5.1 Procedures related to capability transfer
The purpose of the procedures that are grouped together in this section is to
enable the transfer of capabilities from the target device to the server.
Capabilities in this context refer to positioning and protocol capabilities
related to LPP and the positioning methods supported by LPP.
These procedures instantiate the Capability Transfer transaction from 3GPP TS
36.305 [2].
### 5.1.1 Capability Transfer procedure
The Capability Transfer procedure is shown in Figure 5.1.1-1.
Figure 5.1.1-1: LPP Capability Transfer procedure
1\. The server sends a _RequestCapabilities_ message to the target. The server
may indicate the types of capability needed.
2\. The target responds with a _ProvideCapabilities_ message to the server.
The capabilities shall correspond to any capability types specified in step 1.
This message shall include the _endTransaction_ IE set to TRUE.
#### 5.1.2 Capability Indication procedure
The Capability Indication procedure allows the target to provide unsolicited
capabilities to the server and is shown in Figure 5.1.2-1.
Figure 5.1.2-1: LPP Capability Indication procedure
1\. The target sends a _ProvideCapabilities_ message to the server. This
message shall include the _endTransaction_ IE set to TRUE.
#### 5.1.3 Reception of LPP Request Capabilities
Upon receiving a _RequestCapabilities_ message, the target device shall
generate a _ProvideCapabilities_ message as a response.
The target device shall:
1> for each positioning method for which a request for capabilities is
included in the message:
2> if the target device supports this positioning method:
3> include the capabilities of the device for that supported positioning
method in the response message;
1> set the IE _LPP-TransactionID_ in the response message to the same value as
the IE _LPP-TransactionID_ in the received message;
1> deliver the response message to lower layers for transmission.
#### 5.1.4 Transmission of LPP Provide Capabilities
When triggered to transmit a _ProvideCapabilities_ message, the target device
shall:
1> for each positioning method whose capabilities are to be indicated:
2> set the corresponding IE to include the device's capabilities;
2> if OTDOA capabilities are to be indicated:
3> include the IE _supportedBandListEUTRA_ ;
1> deliver the response to lower layers for transmission.
## 5.2 Procedures related to Assistance Data Transfer
The purpose of the procedures in this section is to enable the target to
request assistance data from the server to assist in positioning, and to
enable the server to transfer assistance data to the target in the absence of
a request.
These procedures instantiate the Assistance Data Transfer transaction from
3GPP TS 36.305 [2].
#### 5.2.1 Assistance Data Transfer procedure
The Assistance Data Transfer procedure is shown in Figure 5.2.1-1.
Figure 5.2.1-1: LPP Assistance data transfer procedure
1\. The target sends a _RequestAssistanceData_ message to the server.
2\. The server responds with a _ProvideAssistanceData_ message to the target
containing assistance data. The transferred assistance data should match or be
a subset of the assistance data requested in step 1. The server may also
provide any not requested information that it considers useful to the target .
If step 3 does not occur, this message shall set the _endTransaction_ IE to
TRUE.
3\. The server may transmit one or more additional _ProvideAssistanceData_
messages to the target containing further assistance data. The transferred
assistance data should match or be a subset of the assistance data requested
in step 1. The server may also provide any not requested information that it
considers useful to the target. The last message shall include the
_endTransaction_ IE set to TRUE.
#### 5.2.2 Assistance Data Delivery procedure
The Assistance Data Delivery procedure allows the server to provide
unsolicited assistance data to the target and is shown in Figure 5.2.2-1.
Figure 5.2.2-1: LPP Assistance data transfer procedure
1\. The server sends a _ProvideAssistanceData_ message to the target
containing assistance data. If step 2 does not occur, this message shall set
the _endTransaction_ IE to TRUE.
2\. The server may transmit one or more additional _ProvideAssistanceData_
messages to the target containing additional assistance data. The last message
shall include the _endTransaction_ IE set to TRUE.
#### 5.2.3 Transmission of LPP Request Assistance Data
When triggered to transmit a _RequestAssistanceData_ message, the target
device shall:
1> set the IEs for the positioning-method-specific request for assistance data
to request the data indicated by upper layers.
#### 5.2.4 Reception of LPP Provide Assistance Data
Upon receiving a _ProvideAssistanceData_ message, the target device shall:
1> for each positioning method contained in the message:
2> deliver the related assistance data to upper layers.
## 5.3 Procedures related to Location Information Transfer
The purpose of the procedures in this section is to enable the server to
request location measurement data and/or a location estimate from the target,
and to enable the target to transfer location measurement data and/or a
location estimate to a server in the absence of a request.
These procedures instantiate the Location Information Transfer transaction in
3GPP TS 36.305 [2].
NOTE: The service layer (e.g. NAS or OMA SUPL ULP) would be used to transfer
information associated with a location request from a target to a server (MO-
LR).
#### 5.3.1 Location Information Transfer procedure
The Location Information Transfer procedure is shown in Figure 5.3.1-1.
Figure 5.3.1-1: LPP Location Information transfer procedure
1\. The server sends a _RequestLocationInformation_ message to the target to
request location information, indicating the type of location information
needed and potentially the associated QoS.
2\. The target sends a _ProvideLocationInformation_ message to the server to
transfer location information. The location information transferred should
match or be a subset of the location information requested in step 1 unless
the server explicitly allows additional location information. If step 3 does
not occur, this message shall set the _endTransaction_ IE to TRUE.
3\. If requested in step 1, the target sends additional
_ProvideLocationInformation_ messages to the server to transfer location
information. The location information transferred should match or be a subset
of the location information requested in step 1 unless the server explicitly
allows additional location information. The last message shall include the
_endTransaction_ IE set to TRUE.
#### 5.3.2 Location Information Delivery procedure
The Location Information Delivery allows the target to provide unsolicited
location information to the server. The procedure is shown in Figure 5.3.2-1.
Figure 5.3.2-1: LPP Location Information Delivery procedure
1\. The target sends a _ProvideLocationInformation_ message to the server to
transfer location information. If step 2 does not occur, this message shall
set the _endTransaction_ IE to TRUE.
2\. The target may send one or more additional _ProvideLocationInformation_
messages to the server containing additional location information data. The
last message shall include the _endTransaction_ IE set to TRUE.
### 5.3.3 Reception of Request Location Information
Upon receiving a _RequestLocationInformation_ message, the target device
shall:
1> if the requested information is compatible with the target device
capabilities and configuration:
2> include the requested information in a _ProvideLocationInformation_
message;
2> set the IE _LPP-TransactionID_ in the response to the same value as the IE
_LPP-TransactionID_ in the received message;
2> deliver the _ProvideLocationInformation_ message to lower layers for
transmission.
1> otherwise:
2> if one or more positioning methods are included that the target device does
not support:
3> continue to process the message as if it contained only information for the
supported positioning methods;
3> handle the signaling content of the unsupported positioning methods by LPP
error detection as in 5.4.3.
### 5.3.4 Transmission of Provide Location Information
When triggered to transmit _ProvideLocationInformation_ message, the target
device shall:
1> for each positioning method contained in the message:
2> set the corresponding IE to include the available location information;
1> deliver the response to lower layers for transmission.
## 5.4 Error Handling Procedures
### 5.4.1 General
This sub-clause describes how a receiving entity (target device or location
server) behaves in cases when it receives erroneous or unexpected data or
detects that certain data are missing.
### 5.4.2 Procedures related to Error Indication
Figure 5.4.2-1 shows the Error indication procedure.
Figure 5.4.2-1: LPP Error Indication procedure
1\. Endpoint A sends an LPP message to Endpoint B.
2\. Endpoint B determines that the LPP message in step 1 contains an error.
Endpoint B returns an _Error_ message to Endpoint A indicating the error or
errors and discards the message in step 1. If Endpoint B is able to determine
that the erroneous LPP message in step 1 is an LPP Error or Abort Message,
Endpoint B discards the message in step 1 without returning an _Error_ message
to Endpoint A.
### 5.4.3 LPP Error Detection
Upon receiving any LPP message, the receiving entity shall attempt to decode
the message and verify the presence of any errors and:
1> if decoding errors are encountered:
2> if the receiver can not determine that the received message is an LPP
_Error_ or _Abort_ message:
3> return an LPP _Error_ message to the sender and include the received _LPP-
TransactionID_ , if this was decoded, and type of error;
3> discard the received message and stop the error detection procedure;
1> if the message is a duplicate of a previously received message:
2> discard the message and stop the error detection procedure;
1> if the _LPP-TransactionID_ matches the _LPP-TransactionID_ for a procedure
that is still ongoing for the same session and the message type is invalid for
the current state of the procedure:
2> abort the ongoing procedure;
2> return an LPP _Error_ message to the sender and include the received
transaction ID and type of error;
2> discard the message and stop the error detection procedure;
1> if the message type is an LPP _RequestCapabilities_ and some of the
requested information is not supported:
2> return any information that can be provided in a normal response.
1> if the message type is an LPP _RequestAssistanceData_ or
_RequestLocationInformation_ and some or all of the requested information is
not supported:
2> return any information that can be provided in a normal response, which
includes indications on other information that is not supported.
### 5.4.4 Reception of an LPP Error Message
Upon receiving an _Error_ message, a device shall:
1> abort any ongoing procedure associated with the _LPP-TransactionID_ if
included in the received message.
The device may:
1> restart the aborted procedure taking into consideration the returned error
information.
## 5.5 Abort Procedure
### 5.5.1 General
The purpose of the abort procedure is to allow the target device or location
server to abort an ongoing procedure due to some unexpected event (e.g.,
cancellation of a location request by an LCS client). It can also be used to
stop an ongoing procedure (e.g., periodic location reporting from the target
device).
### 5.5.2 Procedures related to Abort
Figure 5.5.2-1 shows the Abort procedure.
Figure 5.5.2-1: LPP Abort procedure
1\. A procedure P is ongoing between endpoints A and B.
2\. Endpoint A determines that the procedure must be aborted and sends an
_Abort_ message to Endpoint B carrying the transaction ID for procedure P.
Endpoint B aborts procedure P.
### 5.5.3 Reception of an LPP Abort Message
Upon receiving an _Abort_ message, a device shall:
1> abort any ongoing procedure associated with the transaction ID indicated in
the message.
# 6 Information Element Abstract Syntax Definition
## 6.1 General
The contents of each LPP message is specified in sub-clause 6.2 using ASN.1 to
specify the message syntax and using tables when needed to provide further
detailed information about the fields specified in the message syntax.
The ASN.1 in this section uses the same format and coding conventions as
described in Annex A of [12].
Transfer syntax for LPP messages is derived from their ASN.1 definitions by
use of Basic Packed Encoding Rules (BASIC-PER), Unaligned Variant, as
specified in ITU-T Rec. X.691 [22]. The encoded LPP message always contains a
multiple of 8 bits.
Transfer syntax for LPP IEs is derived from their ASN.1 definitions by use of
Basic Packed Encoding Rules (BASIC-PER), Unaligned Variant, as specified in
ITU-T Rec. X.691 [22]. The encoded LPP IE always contains a multiple of 8
bits. This applies when a single LPP IE is encoded as the basic production,
i.e. for other purposes than encoding the LPP IE within an LPP message.
The need for fields to be present in a message or an abstract type, i.e., the
ASN.1 fields that are specified as OPTIONAL in the abstract notation (ASN.1),
is specified by means of comment text tags attached to the OPTIONAL statement
in the abstract syntax. The meaning of each tag is specified in table 6.1-1.
These tags are used in the downlink (server to target) direction only.
Table 6.1-1: Meaning of abbreviations used to specify the need for fields to
be present
+---------------------+-----------------------------------------------+ | Abbreviation | Meaning | +---------------------+-----------------------------------------------+ | Cond _conditionTag_ | _Conditionally present_ | | | | | | A field for which the need is specified by | | | means of conditions. For each _conditionTag_ , | | | the need is specified in a tabular form | | | following the ASN.1 segment. In case, | | | according to the conditions, a field is not | | | present, the target takes no action and where | | | applicable shall continue to use the existing | | | value (and/or the associated functionality) | | | unless explicitly stated otherwise in the | | | description of the field itself. | +---------------------+-----------------------------------------------+ | Need OP | _Optionally present_ | | | | | | A field that is optional to signal. For | | | downlink messages, the target is not required | | | to take any special action on absence of the | | | field beyond what is specified in the | | | procedural text or the field description | | | table following the ASN.1 segment. The target | | | behaviour on absence should be captured | | | either in the procedural text or in the field | | | description. | +---------------------+-----------------------------------------------+ | Need ON | _Optionally present, No action_ | | | | | | A field that is optional to signal. _If the | | | message is received by the_ target _, and_ in | | | case the field is absent, the target takes no | | | action and where applicable shall continue to | | | use the existing value (and/or the associated | | | functionality). | +---------------------+-----------------------------------------------+ | Need OR | _Optionally present, Release_ | | | | | | A field that is optional to signal. _If the | | | message is received by the_ target _, and_ in | | | case the field is absent, the target shall | | | discontinue/ stop using/ delete any existing | | | value (and/ or the associated functionality). | +---------------------+-----------------------------------------------+
When specifying information elements which are to be represented by BIT
STRINGs, if not otherwise specifically stated in the field description of the
concerned IE or elsewhere, the following principle applies with regards to the
ordering of bits:
\- The first bit (leftmost bit) contains the most significant bit (MSB);
\- the last bit (rightmost bit) contains the least significant bit (LSB).
## 6.2 LPP PDU Structure
#### _\-- LPP-PDU-Definitions_
This ASN.1 segment is the start of the LPP PDU definitions.
\-- ASN1START
LPP-PDU-Definitions {
itu-t (0) identified-organization (4) etsi (0) mobileDomain (0)
eps-Access (21) modules (3) lpp (7) version1 (1) lpp-PDU-Definitions (1) }
DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
\-- ASN1STOP
#### _\-- LPP-Message_
The _LPP-Message_ provides the complete set of information for an invocation
or response pertaining to an LPP transaction.
\-- ASN1START
LPP-Message ::= SEQUENCE {
transactionID LPP-TransactionID OPTIONAL, -- Need ON
endTransaction BOOLEAN,
sequenceNumber SequenceNumber OPTIONAL, -- Need ON
acknowledgement Acknowledgement OPTIONAL, -- Need ON
lpp-MessageBody LPP-MessageBody OPTIONAL -- Need ON
}
SequenceNumber ::= INTEGER (0..255)
Acknowledgement ::= SEQUENCE {
ackRequested BOOLEAN,
ackIndicator SequenceNumber OPTIONAL
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_LPP-Message_ field descriptions** | +----------------------------------------------------------------------+ | **_transactionID_** | | | | This field is omitted if an _lpp-MessageBody_ is not present (i.e. | | in an LPP message sent only to acknowledge a previously received | | message) or if it is not available to the transmitting entity (e.g., | | in an _LPP-Error_ message triggered by a message that could not be | | parsed). If present, this field shall be ignored at a receiver in an | | LPP message for which the _lpp-MessageBody_ is not present. | +----------------------------------------------------------------------+ | **_endTransaction_** | | | | This field indicates whether an LPP message is the last message | | carrying an _lpp-MessageBody_ in a transaction (TRUE) or not last | | (FALSE). | +----------------------------------------------------------------------+ | **_sequenceNumber_** | | | | This field may be included when LPP operates over the control plane | | and an _lpp-MessageBody_ is included but shall be omitted otherwise. | +----------------------------------------------------------------------+ | **_acknowledgement_** | | | | This field is included in an LPP acknowledgement and in any LPP | | message requesting an acknowledgement when LPP operates over the | | control plane and is omitted otherwise | +----------------------------------------------------------------------+ | **_ackRequested_** | | | | This field indicates whether an LPP acknowledgement is requested | | (TRUE) or not (FALSE). A value of TRUE may only be included when an | | _lpp-MessageBody_ is included. | +----------------------------------------------------------------------+ | **_ackIndicator_** | | | | This field indicates the sequence number of the message being | | acknowledged. | +----------------------------------------------------------------------+ | **_lpp-MessageBody_** | | | | This field may be omitted in case the message is sent only to | | acknowledge a previously received message. | +----------------------------------------------------------------------+
#### _\-- LPP-MessageBody_
The _LPP-MessageBody_ identifies the type of an LPP message and contains all
LPP information specifically associated with that type.
\-- ASN1START
LPP-MessageBody ::= CHOICE {
c1 CHOICE {
requestCapabilities RequestCapabilities,
provideCapabilities ProvideCapabilities,
requestAssistanceData RequestAssistanceData,
provideAssistanceData ProvideAssistanceData,
requestLocationInformation RequestLocationInformation,
provideLocationInformation ProvideLocationInformation,
abort Abort,
error Error,
spare7 NULL, spare6 NULL, spare5 NULL, spare4 NULL,
spare3 NULL, spare2 NULL, spare1 NULL, spare0 NULL
},
messageClassExtension SEQUENCE {}
}
\-- ASN1STOP
#### _\-- LPP-TransactionID_
The _LPP-TransactionID_ identifies a particular LPP transaction and the
initiator of the transaction.
\-- ASN1START
LPP-TransactionID ::= SEQUENCE {
initiator Initiator,
transactionNumber TransactionNumber,
...
}
Initiator ::= ENUMERATED {
locationServer,
targetDevice,
...
}
TransactionNumber ::= INTEGER (0..255)
\-- ASN1STOP
## 6.3 Message Body IEs
#### \-- _RequestCapabilities_
The _RequestCapabilities_ message body in a LPP message is used by the
location server to request the target device capability information for LPP
and the supported individual positioning methods.
\-- ASN1START
RequestCapabilities ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
requestCapabilities-r9 RequestCapabilities-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
RequestCapabilities-r9-IEs ::= SEQUENCE {
commonIEsRequestCapabilities CommonIEsRequestCapabilities OPTIONAL, -- Need ON
a-gnss-RequestCapabilities A-GNSS-RequestCapabilities OPTIONAL, -- Need ON
otdoa-RequestCapabilities OTDOA-RequestCapabilities OPTIONAL, -- Need ON
ecid-RequestCapabilities ECID-RequestCapabilities OPTIONAL, -- Need ON
epdu-RequestCapabilities EPDU-Sequence OPTIONAL, -- Need ON
...,
[[ sensor-RequestCapabilities-r13 Sensor-RequestCapabilities-r13 OPTIONAL, --
Need ON
tbs-RequestCapabilities-r13 TBS-RequestCapabilities-r13 OPTIONAL, -- Need ON
wlan-RequestCapabilities-r13 WLAN-RequestCapabilities-r13 OPTIONAL, -- Need ON
bt-RequestCapabilities-r13 BT-RequestCapabilities-r13 OPTIONAL -- Need ON
]]
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_RequestCapabilities field descriptions_** | +----------------------------------------------------------------------+ | **_commonIEsRequestCapabilities_** | | | | This IE is provided for future extensibility and should not be | | included in this version of the protocol. | +----------------------------------------------------------------------+
#### \-- _ProvideCapabilities_
The _ProvideCapabilities_ message body in a LPP message indicates the LPP
capabilities of the target device to the location server.
\-- ASN1START
ProvideCapabilities ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
provideCapabilities-r9 ProvideCapabilities-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
ProvideCapabilities-r9-IEs ::= SEQUENCE {
commonIEsProvideCapabilities CommonIEsProvideCapabilities OPTIONAL,
a-gnss-ProvideCapabilities A-GNSS-ProvideCapabilities OPTIONAL,
otdoa-ProvideCapabilities OTDOA-ProvideCapabilities OPTIONAL,
ecid-ProvideCapabilities ECID-ProvideCapabilities OPTIONAL,
epdu-ProvideCapabilities EPDU-Sequence OPTIONAL,
...,
[[ sensor-ProvideCapabilities-r13 Sensor-ProvideCapabilities-r13 OPTIONAL,
tbs-ProvideCapabilities-r13 TBS-ProvideCapabilities-r13 OPTIONAL,
wlan-ProvideCapabilities-r13 WLAN-ProvideCapabilities-r13 OPTIONAL,
bt-ProvideCapabilities-r13 BT-ProvideCapabilities-r13 OPTIONAL
]]
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_ProvideCapabilities field descriptions_** | +----------------------------------------------------------------------+ | **_commonIEsProvideCapabilities_** | | | | This IE is provided for future extensibility and should not be | | included in this version of the protocol. | +----------------------------------------------------------------------+
#### \-- _RequestAssistanceData_
The _RequestAssistanceData_ message body in a LPP message is used by the
target device to request assistance data from the location server.
\-- ASN1START
RequestAssistanceData ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
requestAssistanceData-r9 RequestAssistanceData-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
RequestAssistanceData-r9-IEs ::= SEQUENCE {
commonIEsRequestAssistanceData CommonIEsRequestAssistanceData OPTIONAL,
a-gnss-RequestAssistanceData A-GNSS-RequestAssistanceData OPTIONAL,
otdoa-RequestAssistanceData OTDOA-RequestAssistanceData OPTIONAL,
epdu-RequestAssistanceData EPDU-Sequence OPTIONAL,
...
}
\-- ASN1STOP
#### \-- _ProvideAssistanceData_
The _ProvideAssistanceData_ message body in a LPP message is used by the
location server to provide assistance data to the target device either in
response to a request from the target device or in an unsolicited manner.
\-- ASN1START
ProvideAssistanceData ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
provideAssistanceData-r9 ProvideAssistanceData-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
ProvideAssistanceData-r9-IEs ::= SEQUENCE {
commonIEsProvideAssistanceData CommonIEsProvideAssistanceData OPTIONAL, \--
Need ON
a-gnss-ProvideAssistanceData A-GNSS-ProvideAssistanceData OPTIONAL, -- Need ON
otdoa-ProvideAssistanceData OTDOA-ProvideAssistanceData OPTIONAL, -- Need ON
epdu-Provide-Assistance-Data EPDU-Sequence OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_ProvideAssistanceData field descriptions_** | +----------------------------------------------------------------------+ | **_commonIEsProvideAssistanceData_** | | | | This IE is provided for future extensibility and should not be | | included in this version of the protocol. | +----------------------------------------------------------------------+
#### \-- _RequestLocationInformation_
The _RequestLocationInformation_ message body in a LPP message is used by the
location server to request positioning measurements or a position estimate
from the target device.
\-- ASN1START
RequestLocationInformation ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
requestLocationInformation-r9 RequestLocationInformation-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
RequestLocationInformation-r9-IEs ::= SEQUENCE {
commonIEsRequestLocationInformation
CommonIEsRequestLocationInformation OPTIONAL, -- Need ON
a-gnss-RequestLocationInformation A-GNSS-RequestLocationInformation OPTIONAL,
-- Need ON
otdoa-RequestLocationInformation OTDOA-RequestLocationInformation OPTIONAL, --
Need ON
ecid-RequestLocationInformation ECID-RequestLocationInformation OPTIONAL, --
Need ON
epdu-RequestLocationInformation EPDU-Sequence OPTIONAL, -- Need ON
...,
[[
sensor-RequestLocationInformation-r13
Sensor-RequestLocationInformation-r13
OPTIONAL, -- Need ON
tbs-RequestLocationInformation-r13 TBS-RequestLocationInformation-r13
OPTIONAL, -- Need ON
wlan-RequestLocationInformation-r13 WLAN-RequestLocationInformation-r13
OPTIONAL, -- Need ON
bt-RequestLocationInformation-r13 BT-RequestLocationInformation-r13 OPTIONAL
-- Need ON
]]
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _RequestLocationInformation field descriptions_ | +----------------------------------------------------------------------+ | **_commonIEsRequestLocationInformation_** | | | | This field specifies the location information type requested by the | | location server and optionally other configuration information | | associated with the requested location information. This field | | should always be included in this version of the protocol. | +----------------------------------------------------------------------+
#### \-- _ProvideLocationInformation_
The _ProvideLocationInformation_ message body in a LPP message is used by the
target device to provide positioning measurements or position estimates to the
location server.
\-- ASN1START
ProvideLocationInformation ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
provideLocationInformation-r9 ProvideLocationInformation-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
ProvideLocationInformation-r9-IEs ::= SEQUENCE {
commonIEsProvideLocationInformation
CommonIEsProvideLocationInformation OPTIONAL,
a-gnss-ProvideLocationInformation A-GNSS-ProvideLocationInformation OPTIONAL,
otdoa-ProvideLocationInformation OTDOA-ProvideLocationInformation OPTIONAL,
ecid-ProvideLocationInformation ECID-ProvideLocationInformation OPTIONAL,
epdu-ProvideLocationInformation EPDU-Sequence OPTIONAL,
...,
[[
sensor-ProvideLocationInformation-r13
Sensor-ProvideLocationInformation-r13
OPTIONAL,
tbs-ProvideLocationInformation-r13 TBS-ProvideLocationInformation-r13
OPTIONAL,
wlan-ProvideLocationInformation-r13 WLAN-ProvideLocationInformation-r13
OPTIONAL,
bt-ProvideLocationInformation-r13 BT-ProvideLocationInformation-r13 OPTIONAL
]]
}
\-- ASN1STOP
#### _\-- Abort_
The _Abort_ message body in a LPP message carries a request to abort an
ongoing LPP procedure.
\-- ASN1START
Abort ::= SEQUENCE {
criticalExtensions CHOICE {
c1 CHOICE {
abort-r9 Abort-r9-IEs,
spare3 NULL, spare2 NULL, spare1 NULL
},
criticalExtensionsFuture SEQUENCE {}
}
}
Abort-r9-IEs ::= SEQUENCE {
commonIEsAbort CommonIEsAbort OPTIONAL, -- Need ON
...,
epdu-Abort EPDU-Sequence OPTIONAL -- Need ON
}
\-- ASN1STOP
#### _\-- Error_
The _Error_ message body in a LPP message carries information concerning a LPP
message that was received with errors.
\-- ASN1START
Error ::= CHOICE {
error-r9 Error-r9-IEs,
criticalExtensionsFuture SEQUENCE {}
}
Error-r9-IEs ::= SEQUENCE {
commonIEsError CommonIEsError OPTIONAL, -- Need ON
...,
epdu-Error EPDU-Sequence OPTIONAL -- Need ON
}
\-- ASN1STOP
## 6.4 Common IEs
Common IEs comprise IEs that are applicable to more than one LPP positioning
method.
### 6.4.1 Common Lower-Level IEs
#### \-- _AccessTypes_
The IE _AccessTypes_ is used to indicate several cellular access types using a
bit map.
\-- ASN1START
AccessTypes ::= SEQUENCE {
accessTypes BIT STRING { eutra (0),
utra (1),
gsm (2) } (SIZE (1..8)),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _AccessTypes field descriptions_ | +----------------------------------------------------------------------+ | **_accessTypes_** | | | | This field specifies the cellular access type(s). This is | | represented by a bit string, with a one‑value at the bit position | | means the particular access type is addressed; a zero‑value means | | not addressed. | +----------------------------------------------------------------------+
####
#### _\--_ _ARFCN-ValueEUTRA_
The IEs _ARFCN-ValueEUTRA and ARFCN-ValueEUTRA-v9a0_ are _used to indicate the
ARFCN of the E-UTRA carrier frequency, as defined in [12]._
\-- ASN1START
ARFCN-ValueEUTRA ::= INTEGER (0..maxEARFCN)
ARFCN-ValueEUTRA-v9a0 ::= INTEGER (maxEARFCN-Plus1..maxEARFCN2)
maxEARFCN INTEGER ::= 65535 -- Maximum value of EUTRA carrier frequency
maxEARFCN-Plus1 INTEGER ::= 65536 -- Lowest value extended EARFCN range
maxEARFCN2 INTEGER ::= 262143 -- Highest value extended EARFCN range
\-- ASN1STOP
NOTE: For fields using the original value range, as defined by IE _ARFCN-
ValueEUTRA_ i.e. without suffix, value _maxEARFCN_ indicates that the E-UTRA
carrier frequency is indicated by means of an extension.
#### _\-- ARFCN-ValueUTRA_
The IE _ARFCN-ValueUTRA is used to indicate the ARFCN of the UTRA carrier
frequency, as defined in [13]._
\-- ASN1START
ARFCN-ValueUTRA ::= INTEGER (0..16383)
\-- ASN1STOP
#### _\-- CellGlobalIdEUTRA-AndUTRA_
The IE _CellGlobalIdEUTRA-AndUTRA_ specifies the global Cell Identifier for
E‑UTRA or UTRA, the globally unique identity of a cell in E‑UTRA or UTRA.
\-- ASN1START
CellGlobalIdEUTRA-AndUTRA ::= SEQUENCE {
plmn-Identity SEQUENCE {
mcc SEQUENCE (SIZE (3)) OF INTEGER (0..9),
mnc SEQUENCE (SIZE (2..3)) OF INTEGER (0..9)
},
cellIdentity CHOICE {
eutra BIT STRING (SIZE (28)),
utra BIT STRING (SIZE (32))
},
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_CellGlobalIdEUTRA-AndUTRA field descriptions_** | +----------------------------------------------------------------------+ | **_plmn-Identity_** | | | | This field identifies the PLMN of the cell as defined in [12]. | +----------------------------------------------------------------------+ | **_cellIdentity_** | | | | This field defines the identity of the cell within the context of | | the PLMN as defined in [12] and [13]. The size of the bit string | | allows for the 32-bit extended UTRAN cell ID; in case the cell ID is | | shorter, the first bits of the string are set to 0. | +----------------------------------------------------------------------+
#### _\-- CellGlobalIdGERAN_
The IE _CellGlobalIdGERAN_ specifies the global Cell Identifier for GERAN, the
globally unique identity of a cell in GERAN.
\-- ASN1START
CellGlobalIdGERAN ::= SEQUENCE {
plmn-Identity SEQUENCE {
mcc SEQUENCE (SIZE (3)) OF INTEGER (0..9),
mnc SEQUENCE (SIZE (2..3)) OF INTEGER (0..9)
},
locationAreaCode BIT STRING (SIZE (16)),
cellIdentity BIT STRING (SIZE (16)),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_CellGlobalIdGERAN field descriptions_** | +----------------------------------------------------------------------+ | **_plmn-Identity_** | | | | This field identifies the PLMN of the cell. | +----------------------------------------------------------------------+ | **_locationAreaCode_** | | | | This field is a fixed length code identifying the location area | | within a PLMN. | +----------------------------------------------------------------------+ | **_cellIdentity_** | | | | This field specifies the cell Identifier which is unique within the | | context of the GERAN location area. | +----------------------------------------------------------------------+
#### _\-- ECGI_
The IE _ECGI_ specifies the Evolved Cell Global Identifier (ECGI), the
globally unique identity of a cell in E-UTRA [12].
\-- ASN1START
ECGI ::= SEQUENCE {
mcc SEQUENCE (SIZE (3)) OF INTEGER (0..9),
mnc SEQUENCE (SIZE (2..3)) OF INTEGER (0..9),
cellidentity BIT STRING (SIZE (28))
}
\-- ASN1STOP
#### _\-- Ellipsoid-Point_
The IE _Ellipsoid-Point_ is used to describe a geographic shape as defined in
3GPP TS 23.032 [15].
\-- ASN1START
Ellipsoid-Point ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607) -- 24 bit field
}
\-- ASN1STOP
#### _\-- Ellipsoid-PointWithUncertaintyCircle_
The IE _Ellipsoid-PointWithUncertaintyCircle_ is used to describe a geographic
shape as defined in 3GPP TS 23.032 [15].
\-- ASN1START
Ellipsoid-PointWithUncertaintyCircle ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607), -- 24 bit field
uncertainty INTEGER (0..127)
}
\-- ASN1STOP
#### _\-- EllipsoidPointWithUncertaintyEllipse_
The IE _EllipsoidPointWithUncertaintyEllipse_ is used to describe a geographic
shape as defined in 3GPP TS 23.032 [15].
\-- ASN1START
EllipsoidPointWithUncertaintyEllipse ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607), -- 24 bit field
uncertaintySemiMajor INTEGER (0..127),
uncertaintySemiMinor INTEGER (0..127),
orientationMajorAxis INTEGER (0..179),
confidence INTEGER (0..100)
}
\-- ASN1STOP
#### _\-- EllipsoidPointWithAltitude_
The IE _EllipsoidPointWithAltitude_ is used to describe a geographic shape as
defined in 3GPP TS 23.032 [15].
\-- ASN1START
EllipsoidPointWithAltitude ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607), -- 24 bit field
altitudeDirection ENUMERATED {height, depth},
altitude INTEGER (0..32767) -- 15 bit field
}
\-- ASN1STOP
#### _\-- EllipsoidPointWithAltitudeAndUncertaintyEllipsoid_
The IE _EllipsoidPointWithAltitudeAndUncertaintyEllipsoid_ is used to describe
a geographic shape as defined in 3GPP TS 23.032 [15].
\-- ASN1START
EllipsoidPointWithAltitudeAndUncertaintyEllipsoid ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607), -- 24 bit field
altitudeDirection ENUMERATED {height, depth},
altitude INTEGER (0..32767), -- 15 bit field
uncertaintySemiMajor INTEGER (0..127),
uncertaintySemiMinor INTEGER (0..127),
orientationMajorAxis INTEGER (0..179),
uncertaintyAltitude INTEGER (0..127),
confidence INTEGER (0..100)
}
\-- ASN1STOP
#### _\-- EllipsoidArc_
The IE _EllipsoidArc_ is used to describe a geographic shape as defined in
3GPP TS 23.032 [15].
\-- ASN1START
EllipsoidArc ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607), -- 24 bit field
innerRadius INTEGER (0..65535), -- 16 bit field,
uncertaintyRadius INTEGER (0..127),
offsetAngle INTEGER (0..179),
includedAngle INTEGER (0..179),
confidence INTEGER (0..100)
}
\-- ASN1STOP
#### _\-- EPDU-Sequence_
The _EPDU-Sequence_ contains IEs that are defined externally to LPP by other
organizations.
\-- ASN1START
EPDU-Sequence ::= SEQUENCE (SIZE (1..maxEPDU)) OF EPDU
maxEPDU INTEGER ::= 16
EPDU ::= SEQUENCE {
ePDU-Identifier EPDU-Identifier,
ePDU-Body EPDU-Body
}
EPDU-Identifier ::= SEQUENCE {
ePDU-ID EPDU-ID,
ePDU-Name EPDU-Name OPTIONAL,
...
}
EPDU-ID ::= INTEGER (1..256)
EPDU-Name ::= VisibleString (SIZE (1..32))
EPDU-Body ::= OCTET STRING
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_EPDU-Sequence field descriptions_** | +----------------------------------------------------------------------+ | **_EPDU-ID_** | | | | This field provides a unique integer ID for the externally defined | | positioning method. Its value is assigned to the external entity | | that defines the EPDU. See table External PDU Identifier Definition | | for a list of external PDU identifiers defined in this version of | | the specification. | +----------------------------------------------------------------------+ | **_EPDU-Name_** | | | | **This field provides an optional character encoding which can be | | used to provide a quasi-unique name for an external PDU -- e.g., by | | containing the name of the defining organization and/or the name of | | the associated public or proprietary standard for the EPDU.** | +----------------------------------------------------------------------+ | **_EPDU-Body_** | | | | **The content and encoding of this field are defined externally to | | LPP.** | +----------------------------------------------------------------------+
External PDU Identifier Definition
* * *
EPDU-ID EPDU Defining entity Method name Reference 1 OMA LOC OMA LPP
extensions (LPPe) OMA-TS-LPPe-V1_0 [20]
* * *
#### _\-- HorizontalVelocity_
The IE _HorizontalVelocity_ is used to describe a velocity shape as defined in
3GPP TS 23.032 [15].
\-- ASN1START
HorizontalVelocity ::= SEQUENCE {
bearing INTEGER(0..359),
horizontalSpeed INTEGER(0..2047)
}
\-- ASN1STOP
#### _\-- HorizontalWithVerticalVelocity_
The IE _HorizontalWithVerticalVelocity_ is used to describe a velocity shape
as defined in 3GPP TS 23.032 [15].
\-- ASN1START
HorizontalWithVerticalVelocity ::= SEQUENCE {
bearing INTEGER(0..359),
horizontalSpeed INTEGER(0..2047),
verticalDirection ENUMERATED{upward, downward},
verticalSpeed INTEGER(0..255)
}
\-- ASN1STOP
#### _\-- HorizontalVelocityWithUncertainty_
The IE _HorizontalVelocityWithUncertainty_ is used to describe a velocity
shape as defined in 3GPP TS 23.032 [15].
\-- ASN1START
HorizontalVelocityWithUncertainty ::= SEQUENCE {
bearing INTEGER(0..359),
horizontalSpeed INTEGER(0..2047),
uncertaintySpeed INTEGER(0..255)
}
\-- ASN1STOP
#### _\-- HorizontalWithVerticalVelocityAndUncertainty_
The IE _HorizontalWithVerticalVelocityAndUncertainty_ is used to describe a
velocity shape as defined in 3GPP TS 23.032 [15].
\-- ASN1START
HorizontalWithVerticalVelocityAndUncertainty ::= SEQUENCE {
bearing INTEGER(0..359),
horizontalSpeed INTEGER(0..2047),
verticalDirection ENUMERATED{upward, downward},
verticalSpeed INTEGER(0..255),
horizontalUncertaintySpeed INTEGER(0..255),
verticalUncertaintySpeed INTEGER(0..255)
}
\-- ASN1STOP
#### _\-- LocationCoordinateTypes_
The IE _LocationCoordinateTypes_ defines a list of possible geographic shapes
as defined in 3GPP TS 23.032 [15].
\-- ASN1START
LocationCoordinateTypes ::= SEQUENCE {
ellipsoidPoint BOOLEAN,
ellipsoidPointWithUncertaintyCircle BOOLEAN,
ellipsoidPointWithUncertaintyEllipse BOOLEAN,
polygon BOOLEAN,
ellipsoidPointWithAltitude BOOLEAN,
ellipsoidPointWithAltitudeAndUncertaintyEllipsoid BOOLEAN,
ellipsoidArc BOOLEAN,
...
}
\-- ASN1STOP
#### _\-- Polygon_
The IE _Polygon_ is used to describe a geographic shape as defined in 3GPP TS
23.032 [15].
\-- ASN1START
Polygon ::= SEQUENCE (SIZE (3..15)) OF PolygonPoints
PolygonPoints ::= SEQUENCE {
latitudeSign ENUMERATED {north, south},
degreesLatitude INTEGER (0..8388607), -- 23 bit field
degreesLongitude INTEGER (-8388608..8388607) -- 24 bit field
}
\-- ASN1STOP
#### _\-- PositioningModes_
The IE _PositioningModes_ is used to indicate several positioning modes using
a bit map.
\-- ASN1START
PositioningModes ::= SEQUENCE {
posModes BIT STRING { standalone (0),
ue-based (1),
ue-assisted (2) } (SIZE (1..8)),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _PositioningModes field descriptions_ | +----------------------------------------------------------------------+ | **_posModes_** | | | | This field specifies the positioning mode(s). This is represented by | | a bit string, with a one‑value at the bit position means the | | particular positioning mode is addressed; a zero‑value means not | | addressed. | +----------------------------------------------------------------------+
#### _\-- VelocityTypes_
The IE _VelocityTypes_ defines a list of possible velocity shapes as defined
in 3GPP TS 23.032 [15].
\-- ASN1START
VelocityTypes ::= SEQUENCE {
horizontalVelocity BOOLEAN,
horizontalWithVerticalVelocity BOOLEAN,
horizontalVelocityWithUncertainty BOOLEAN,
horizontalWithVerticalVelocityAndUncertainty BOOLEAN,
...
}
\-- ASN1STOP
### 6.4.2 Common Positioning
#### \-- _CommonIEsRequestCapabilities_
The _CommonIEsRequestCapabilities_ carries common IEs for a Request
Capabilities LPP message Type.
\-- ASN1START
CommonIEsRequestCapabilities ::= SEQUENCE {
...
}
\-- ASN1STOP
#### \-- _CommonIEsProvideCapabilities_
The _CommonIEsProvideCapabilities_ carries common IEs for a Provide
Capabilities LPP message Type.
\-- ASN1START
CommonIEsProvideCapabilities ::= SEQUENCE {
...
}
\-- ASN1STOP
#### \-- _CommonIEsRequestAssistanceData_
The _CommonIEsRequestAssistanceData_ carries common IEs for a Request
Assistance Data LPP message Type.
\-- ASN1START
CommonIEsRequestAssistanceData ::= SEQUENCE {
primaryCellID ECGI OPTIONAL, -- Cond EUTRA
...
}
\-- ASN1STOP
* * *
Conditional presence Explanation _EUTRA_ The field is mandatory present for
E-UTRA access. The field shall be omitted for non-EUTRA user plane support.
* * *
+----------------------------------------------------------------------+ | _CommonIEsRequestAssistanceData field descriptions_ | +----------------------------------------------------------------------+ | **_primaryCellID_** | | | | This parameter identifies the current primary cell for the target | | device. | +----------------------------------------------------------------------+
#### \-- _CommonIEsProvideAssistanceData_
The _CommonIEsProvideAssistanceData_ carries common IEs for a Provide
Assistance Data LPP message Type.
\-- ASN1START
CommonIEsProvideAssistanceData ::= SEQUENCE {
...
}
\-- ASN1STOP
#### \-- _CommonIEsRequestLocationInformation_
The _CommonIEsRequestLocationInformation_ carries common IEs for a Request
Location Information LPP message Type.
\-- ASN1START
CommonIEsRequestLocationInformation ::= SEQUENCE {
locationInformationType LocationInformationType,
triggeredReporting TriggeredReportingCriteria OPTIONAL, -- Cond ECID
periodicalReporting PeriodicalReportingCriteria OPTIONAL, -- Need ON
additionalInformation AdditionalInformation OPTIONAL, -- Need ON
qos QoS OPTIONAL, -- Need ON
environment Environment OPTIONAL, -- Need ON
locationCoordinateTypes LocationCoordinateTypes OPTIONAL, -- Need ON
velocityTypes VelocityTypes OPTIONAL, -- Need ON
...
}
LocationInformationType ::= ENUMERATED {
locationEstimateRequired,
locationMeasurementsRequired,
locationEstimatePreferred,
locationMeasurementsPreferred,
...
}
PeriodicalReportingCriteria ::= SEQUENCE {
reportingAmount ENUMERATED {
ra1, ra2, ra4, ra8, ra16, ra32,
ra64, ra-Infinity
} DEFAULT ra-Infinity,
reportingInterval ENUMERATED {
noPeriodicalReporting, ri0-25,
ri0-5, ri1, ri2, ri4, ri8, ri16, ri32, ri64
}
}
TriggeredReportingCriteria ::= SEQUENCE {
cellChange BOOLEAN,
reportingDuration ReportingDuration,
...
}
ReportingDuration ::= INTEGER (0..255)
AdditionalInformation ::= ENUMERATED {
onlyReturnInformationRequested,
mayReturnAditionalInformation,
...
}
QoS ::= SEQUENCE {
horizontalAccuracy HorizontalAccuracy OPTIONAL, -- Need ON
verticalCoordinateRequest BOOLEAN,
verticalAccuracy VerticalAccuracy OPTIONAL, -- Need ON
responseTime ResponseTime OPTIONAL, -- Need ON
velocityRequest BOOLEAN,
...
}
HorizontalAccuracy ::= SEQUENCE {
accuracy INTEGER(0..127),
confidence INTEGER(0..100),
...
}
VerticalAccuracy ::= SEQUENCE {
accuracy INTEGER(0..127),
confidence INTEGER(0..100),
...
}
ResponseTime ::= SEQUENCE {
time INTEGER (1..128),
...,
[[ responseTimeEarlyFix-r12 INTEGER (1..128) OPTIONAL -- Need ON
]]
}
Environment ::= ENUMERATED {
badArea,
notBadArea,
mixedArea,
...
}
\-- ASN1STOP
* * *
Conditional presence Explanation _ECID_ The field is optionally present, need
ON, if ECID is requested. Otherwise it is not present.
* * *
+----------------------------------------------------------------------+ | _CommonIEsRequestLocationInformation field descriptions_ | +----------------------------------------------------------------------+ | **_locationInformationType_** | | | | This IE indicates whether the server requires a location estimate or | | measurements. For '_locationEstimateRequired_ ', the target device | | shall return a location estimate if possible, or indicate a location | | error if not possible. For '_locationMeasurementsRequired_ ', the | | target device shall return measurements if possible, or indicate a | | location error if not possible. For '_locationEstimatePreferred_ ', | | the target device shall return a location estimate if possible, but | | may also or instead return measurements for any requested position | | methods for which a location estimate is not possible. For | | '_locationMeasurementsPreferred_ ', the target device shall return | | location measurements if possible, but may also or instead return a | | location estimate for any requested position methods for which | | return of location measurements is not possible. | +----------------------------------------------------------------------+ | **_triggeredReporting_** | | | | **This IE indicates that triggered reporting is requested and | | comprises the following subfields:** | | | | - **_cellChange_ : If this field is set to TRUE, the target device | | provides requested location information each time the primary | | cell has changed.** | | | | - **_reportingDuration_** : **Maximum duration of triggered | | reporting in seconds. A value of zero is interpreted to mean an | | unlimited (i.e. \"infinite\") duration. The target device should | | continue triggered reporting for the _reportingDuration _or | | until an LPP_ Abort _or_ LPP Error _message is received._ * | | | | The _**triggeredReporting** _field should not be included by the | | location server and shall be ignored by the target device if the | |_ periodicalReporting _IE or_ responseTime _IE is included in | |_ CommonIEsRequestLocationInformation.* | +----------------------------------------------------------------------+ | **_periodicalReporting_**| | | |** This IE indicates that periodic reporting is requested and | | comprises the following subfields:**| | | | -**_reportingAmount_ indicates the number of periodic location | | information reports requested. Enumerated values correspond to | | 1, 2, 4, 8, 16, 32, 64, or infinite/indefinite number of | | reports. If the _reportingAmount_ is '_infinite/indefinite'_ , | | the target device should continue periodic reporting until an | | LPP _Abort_ message is received. The value '_ra1_ ' shall not be | | used by a sender.**| | | | -**_reportingInterval_ indicates the interval between location | | information reports and the response time requirement for the | | first location information report.**Enumerated values ri0-25, | | ri0-5, ri1, ri2, ri4, ri8, ri16, ri32, ri64 correspond to | | reporting intervals of 1, 2, 4, 8, 10, 16, 20, 32, and 64 | | seconds, respectively. Measurement reports containing no | | measurements or no location estimate are required when a | |_reportingInterval _expires before a target device is able to | | obtain new measurements or obtain a new location estimate.__The | | value_ _'_ noPeriodicalReporting _'__shall not be used by a | | sender._ * | +----------------------------------------------------------------------+ | _**additionalInformation** _| | | |__This IE indicates whether a target device is allowed to return | | additional information to that requested. If this IE indicates | | '_ onlyReturnInformationRequested'_then the target device shall not | | return any additional information to that requested by the server. | | If this IE indicates '_ mayReturnAdditionalInformation'* then the | | target device may return additional information to that requested by | | the server. If a location estimate is returned, any additional | | information is restricted to that associated with a location | | estimate (e.g. might include velocity if velocity was not requested | | but cannot include measurements). If measurements are returned, any | | additional information is restricted to additional measurements | | (e.g. might include E-CID measurements if A-GNSS measurements were | | requested but not E-CID measurements).** | +----------------------------------------------------------------------+ | **_qos_** | | | | **This IE indicates the quality of service and comprises a number of | | sub-fields. In the case of measurements, some of the sub-fields | | apply to the location estimate that could be obtained by the server | | from the measurements provided by the target device assuming that | | the measurements are the only sources of error. Fields are as | | follows:** | | | | - **_horizontalAccuracy_ indicates the maximum horizontal error in | | the location estimate at an indicated confidence level. The | | '_accuracy_ ' corresponds to the encoded uncertainty as defined | | in 3GPP TS 23.032 [15] and '_confidence_ ' corresponds to | | confidence as defined in 3GPP TS 23.032 [15].** | | | | - **_verticalCoordinateRequest_** indicates whether a vertical | | coordinate is required (TRUE) or not (FALSE) | | | | - **_verticalAccuracy_ indicates the maximum vertical error in the | | location estimate at an indicated confidence level and is only | | applicable when a vertical coordinate is requested. The | | '_accuracy_ ' corresponds to the encoded uncertainty altitude as | | defined in 3GPP TS 23.032 [15] and '_confidence_ ' corresponds | | to confidence as defined in 3GPP TS 23.032 [15].** | | | | `{=html} | |  | |` | | - **_responseTime_** | | | | - **_time_** indicates the maximum response time as measured | | > between receipt of the _RequestLocationInformation_ and | | > transmission of a _ProvideLocationInformation_. This is | | > given as an integer number of seconds between 1 and 128. | | > If the _periodicalReporting_ IE is included in | | > _CommonIEsRequestLocationInformation_ , this field should | | > not be included by the location server and shall be | | > ignored by the target device (if included). | | | | - **_responseTimeEarlyFix_ indicates the maximum response | | > time** as measured between receipt of the | | > _RequestLocationInformation_ and transmission of a | | > _ProvideLocationInformation_ containing early location | | > measurements or an early location estimate. This is given | | > as an integer number of seconds between 1 and 128. When | | > this IE is included, a target should send a | | > _ProvideLocationInformation_ (or more than one | | > _ProvideLocationInformation_ if location information will | | > not fit into a single message) containing early location | | > information according to the **_responseTimeEarlyFix_ IE | | > and a subsequent** _ProvideLocationInformation_ (or more | | > than one _ProvideLocationInformation_ if location | | > information will not fit into a single message) | | > **containing final location information according to the | | > _time _IE. A target shall omit sending a | | > _ProvideLocationInformation _if the early location | | > information is not available at the expiration of the time | | > value in the _responseTimeEarlyFix _IE. A server should | | > set the _responseTimeEarlyFix _IE to a value less than | | > that for the _time _IE. A target shall ignore the | | > _responseTimeEarlyFix _IE if its value is not less than | | > that for the _time _IE._ * | | | | `{=html} | |  | |` | | - _**velocityRequest** _indicates whether velocity (or | | measurements related to velocity) is requested (TRUE) or not | | (FALSE). | | | |__All QoS requirements shall be obtained by the target device to the | | degree possible but it is permitted to return a response that does | | not fulfill all QoS requirements if some were not attainable. The | | single exception is_ time* which shall always be fulfilled -- even | | if that means not fulfilling other QoS requirements.** | +----------------------------------------------------------------------+ | **_environment_** | | | | **This field provides the target device with information about | | expected multipath and non line of sight (NLOS) in the current area. | | The following values are defined:** | | | | - **badArea:** **possibly heavy multipath and NLOS conditions | | (e.g. bad urban or urban).** | | | | - **notBadArea:** **no or light multipath and usually LOS | | conditions (e.g. suburban or rural).** | | | | - **mixedArea:** **environment that is mixed or not defined.** | | | | **If this field is absent, a default value of 'mixedArea' applies.** | +----------------------------------------------------------------------+ | **_locationCoordinateTypes_** | | | | **This field provides a list of the types of location estimate that | | the target device may return when a location estimate is obtained by | | the target.** | +----------------------------------------------------------------------+ | **_velocityTypes_** | | | | **This fields provides a list of the types of velocity estimate that | | the target device may return when a velocity estimate is obtained by | | the target.** | +----------------------------------------------------------------------+
#### \-- _CommonIEsProvideLocationInformation_
The _CommonIEsProvideLocationInformation_ carries common IEs for a Provide
Location Information LPP message Type.
\-- ASN1START
CommonIEsProvideLocationInformation ::= SEQUENCE {
locationEstimate LocationCoordinates OPTIONAL,
velocityEstimate Velocity OPTIONAL,
locationError LocationError OPTIONAL,
...,
[[ earlyFixReport-r12 EarlyFixReport-r12 OPTIONAL
]],
[[ locationSource-r13 LocationSource-r13 OPTIONAL,
locationTimestamp-r13 UTCTime OPTIONAL
]]
}
LocationCoordinates ::= CHOICE {
ellipsoidPoint Ellipsoid-Point,
ellipsoidPointWithUncertaintyCircle Ellipsoid-PointWithUncertaintyCircle,
ellipsoidPointWithUncertaintyEllipse EllipsoidPointWithUncertaintyEllipse,
polygon Polygon,
ellipsoidPointWithAltitude EllipsoidPointWithAltitude,
ellipsoidPointWithAltitudeAndUncertaintyEllipsoid
EllipsoidPointWithAltitudeAndUncertaintyEllipsoid,
ellipsoidArc EllipsoidArc,
...
}
Velocity ::= CHOICE {
horizontalVelocity HorizontalVelocity,
horizontalWithVerticalVelocity HorizontalWithVerticalVelocity,
horizontalVelocityWithUncertainty HorizontalVelocityWithUncertainty,
horizontalWithVerticalVelocityAndUncertainty
HorizontalWithVerticalVelocityAndUncertainty,
...
}
LocationError ::= SEQUENCE {
locationfailurecause LocationFailureCause,
...
}
LocationFailureCause ::= ENUMERATED {
undefined,
requestedMethodNotSupported,
positionMethodFailure,
periodicLocationMeasurementsNotAvailable,
...
}
EarlyFixReport-r12 ::= ENUMERATED {
noMoreMessages,
moreMessagesOnTheWay
}
LocationSource-r13 ::= BIT STRING { a-gnss (0),
wlan (1),
bt (2),
tbs (3),
sensor (4) } (SIZE(1..16))
\-- ASN1STOP
+----------------------------------------------------------------------+ | _CommonIEsProvideLocationInformation field descriptions_ | +----------------------------------------------------------------------+ | **_locationEstimate_** | | | | This field provides a location estimate using one of the geographic | | shapes defined in 3GPP TS 23.032 [15]. Coding of the values of the | | various fields internal to each geographic shape follow the rules in | | [15]. The conditions for including this field are defined for the | | _locationInformationType_ field in a Request Location Information | | message. | +----------------------------------------------------------------------+ | **_velocityEstimate_** | | | | This field provides a velocity estimate using one of the velocity | | shapes defined in 3GPP TS 23.032 [15]. Coding of the values of the | | various fields internal to each velocity shape follow the rules in | | [15]. | +----------------------------------------------------------------------+ | **_locationError_** | | | | **This field shall be included if and only if a location estimate | | and measurements are not included in the LPP PDU. The field includes | | information concerning the reason for the lack of location | | information. The** _LocationFailureCause_ | | '_periodicLocationMeasurementsNotAvailable_ ' shall be used by the | | target device if periodic location reporting was requested, but no | | measurements or location estimate are available when _the | | reportingInterval_ expired. | +----------------------------------------------------------------------+ | **_earlyFixReport_** | | | | This field shall be included if and only if the | | _ProvideLocationInformation_ message contains early location | | measurements or an early location estimate. The target device shall | | set the values of this field as follows: | | | | - noMoreMessages: This is the only or last | | _ProvideLocationInformation_ message used to deliver the entire | | set of early location information. | | | | - moreMessagesOnTheWay: This is one of multiple | | _ProvideLocationInformation_ messages used to deliver the entire | | set of early location information (if early location information | | will not fit into a single message). | +----------------------------------------------------------------------+ | **_locationSource_** | | | | This field provides the source positioning technology for the | | location estimate. | +----------------------------------------------------------------------+ | **_locationTimestamp_** | | | | This field provides the UTC time when the location estimate is valid | | and should take the form of _YYMMDDhhmmssZ_. | +----------------------------------------------------------------------+
#### _\-- CommonIEsAbort_
The _CommonIEsAbort_ carries common IEs for an Abort LPP message Type.
\-- ASN1START
CommonIEsAbort ::= SEQUENCE {
abortCause ENUMERATED {
undefined,
stopPeriodicReporting,
targetDeviceAbort,
networkAbort,
...
}
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _CommonIEsAbort field descriptions_ | +----------------------------------------------------------------------+ | _abortCause_ | | | | This IE defines the request to abort an ongoing procedure. The abort | | cause '_stopPeriodicReporting_ ' should be used by the location | | server to stop any ongoing location reporting configured as | | _periodicalReporting_ or _triggeredReporting_ in the | | _CommonIEsRequestLocationInformation_. | +----------------------------------------------------------------------+
#### \-- _CommonIEsError_
The _CommonIEsError_ carries common IEs for an Error LPP message Type.
\-- ASN1START
CommonIEsError ::= SEQUENCE {
errorCause ENUMERATED {
undefined,
lppMessageHeaderError,
lppMessageBodyError,
epduError,
incorrectDataValue,
...
}
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _CommonIEsError field descriptions_ | +----------------------------------------------------------------------+ | _errorCause_ | | | | This IE defines the cause for an error. '_lppMessageHeaderError_ ', | | '_lppMessageBodyError_ ' and '_epduError_ ' is used if a receiver is | | able to detect a coding error in the LPP header (i.e., in the common | | fields), LPP message body or in an EPDU, respectively. | +----------------------------------------------------------------------+
## 6.5 Positioning Method IEs
### 6.5.1 OTDOA Positioning
#### 6.5.1.1 OTDOA Assistance Data
#### \-- _OTDOA-ProvideAssistanceData_
The IE _OTDOA-ProvideAssistanceData_ is used by the location server to provide
assistance data to enable UE‑assisted downlink OTDOA. It may also be used to
provide OTDOA positioning specific error reason.
Throughout Section 6.5.1, \"assistance data reference cell\" refers to the
cell defined by the IE _OTDOA-ReferenceCellInfo_ (see section 6.5.1.2). \"RSTD
reference cell\" applies only in Section 6.5.1.5.
NOTE: The location server should include at least one cell for which the SFN
can be obtained by the target device, e.g. the serving cell, in the assistance
data, either as the assistance data reference cell or in the neighbour cell
list. Otherwise the target device will be unable to perform the OTDOA
measurement and the positioning operation will fail.
\-- ASN1START
OTDOA-ProvideAssistanceData ::= SEQUENCE {
otdoa-ReferenceCellInfo OTDOA-ReferenceCellInfo OPTIONAL, -- Need ON
otdoa-NeighbourCellInfo OTDOA-NeighbourCellInfoList OPTIONAL, -- Need ON
otdoa-Error OTDOA-Error OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
#### 6.5.1.2 OTDOA Assistance Data Elements
#### \-- _OTDOA-ReferenceCellInfo_
The IE _OTDOA-ReferenceCellInfo_ is used by the location server to provide
assistance data reference cell information for OTDOA assistance data. The slot
number offsets and expected RSTDs in _OTDOA-NeighbourCellInfoList_ are
provided relative to the cell defined by this IE. If _earfcnRef_ of this
assistance data reference cell is different from that of the serving cell, the
LPP layer shall inform lower layers to start performing inter-frequency RSTD
measurements with this cell and provide to lower layers the information about
this assistance data reference cell, e.g. EARFCN and PRS positioning occasion
information.
NOTE: The location server should always include the PRS configuration of the
assistance data reference and neighbour cells. Otherwise the UE may not meet
the accuracy requirements as defined in [18].
\-- ASN1START
OTDOA-ReferenceCellInfo ::= SEQUENCE {
physCellId INTEGER (0..503),
cellGlobalId ECGI OPTIONAL, -- Need ON
earfcnRef ARFCN-ValueEUTRA OPTIONAL, -- Cond NotSameAsServ0
antennaPortConfig ENUMERATED {ports1-or-2, ports4, ... }
OPTIONAL, -- Cond NotSameAsServ1
cpLength ENUMERATED { normal, extended, ... },
prsInfo PRS-Info OPTIONAL, -- Cond PRS
...,
[[ earfcnRef-v9a0 ARFCN-ValueEUTRA-v9a0 OPTIONAL -- Cond NotSameAsServ2
]]
}
\-- ASN1STOP
* * *
Conditional presence Explanation _NotSameAsServ0_ This field is absent if
_earfcnRef-v9a0_ is present. Otherwise, the field is mandatory present if the
EARFCN of the OTDOA assistance data reference cell is not the same as the
EARFCN of the target devices's current primary cell. _NotSameAsServ1_ The
field is mandatory present if the **_antenna port configuration_** of the
OTDOA assistance data reference cell is not the same as the **_antenna port
configuration_** of the target devices's current primary cell.
_NotSameAsServ2_ The field is absent if _earfcnRef_ is present. Otherwise, the
field is mandatory present if the EARFCN of the OTDOA assistance data
reference cell is not the same as the EARFCN of the target devices's current
primary cell. _PRS_ The field is mandatory present if positioning reference
signals are available in the assistance data reference cell [16]; otherwise it
is not present.
* * *
+----------------------------------------------------------------------+ | _OTDOA-ReferenceCellInfo field descriptions_ | +----------------------------------------------------------------------+ | **_physCellId_** | | | | This field specifies the physical cell identity of the assistance | | data reference cell, as defined in [12]. | +----------------------------------------------------------------------+ | **_cellGlobalId_** | | | | This field specifies the ECGI, the globally unique identity of a | | cell in E-UTRA, of the assistance data reference cell, as defined in | | [12]. The server should include this field if it considers that it | | is needed to resolve ambiguity in the cell indicated by | | _physCellId_. | +----------------------------------------------------------------------+ | **_earfcnRef_** | | | | This field specifies the EARFCN of the assistance data reference | | cell. | +----------------------------------------------------------------------+ | **_antennaPortConfig_** | | | | This field specifies whether 1 (or 2) antenna port(s) or 4 antenna | | ports for cell specific reference signals (CRS) are used in the | | assistance data reference cell. | +----------------------------------------------------------------------+ | **_cpLength_** | | | | **_This field specifies the cyclic prefix length of the assistance | | data reference cell PRS if the prsInfo field is present, otherwise | | this field specifies the cyclic prefix length of the assistance data | | reference cell CRS._** | +----------------------------------------------------------------------+ | **_prsInfo_** | | | | **_This field specifies the PRS configuration of the assistance data | | reference cell._** | +----------------------------------------------------------------------+
#### \-- _PRS-Info_
The IE _PRS-Info_ provides the information related to the configuration of PRS
in a cell.
\-- ASN1START
PRS-Info ::= SEQUENCE {
prs-Bandwidth ENUMERATED { n6, n15, n25, n50, n75, n100, ... },
prs-ConfigurationIndex INTEGER (0..4095),
numDL-Frames ENUMERATED {sf-1, sf-2, sf-4, sf-6, ...},
...,
prs-MutingInfo-r9 CHOICE {
po2-r9 BIT STRING (SIZE(2)),
po4-r9 BIT STRING (SIZE(4)),
po8-r9 BIT STRING (SIZE(8)),
po16-r9 BIT STRING (SIZE(16)),
...
} OPTIONAL -- Need OP
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _PRS-Info field descriptions_ | +----------------------------------------------------------------------+ | **_prs-Bandwidth_** | | | | This field specifies the bandwidth that is used to configure the | | positioning reference signals on. Enumerated values are specified in | | number of resource blocks (n6 corresponds to 6 resource blocks, n15 | | to 15 resource blocks and so on) and define 1.4, 3, 5, 10, 15 and 20 | | MHz bandwidth. | +----------------------------------------------------------------------+ | **_prs-ConfigurationIndex_** | | | | **_This field specfies the positioning reference signals | | configuration index I~PRS~ as defined in [16]._** | +----------------------------------------------------------------------+ | **_numDL-Frames_** | | | | **_This field specifies the number of consecutive downlink subframes | | N~PRS~ with positioning reference signals, as defined in [16]. | | Enumerated values define 1, 2, 4, or 6 consecutive subframes._** | +----------------------------------------------------------------------+ | **_prs-MutingInfo_** | | | | This field specifies the PRS muting configuration of the cell. The | | PRS muting configuration is defined by a periodic PRS muting | | sequence with periodicity T** _~REP~_** where T** _~REP~_** , counted | | in the number of PRS positioning occasions [18], can be 2, 4, 8, | | or 16 which is also the length of the selected bit string that | | represents this PRS muting sequence. If a bit in the PRS muting | | sequence is set to \"0\", then the PRS is muted in the corresponding | | PRS positioning occasion. A PRS positioning occasion comprises of | | **_N~PRS\ ~_** downlink positioning subframes as defined in [16]. | | The first bit of the PRS muting sequence corresponds to the first | | PRS positioning occasion that starts after the beginning of the | | assistance data reference cell SFN=0. The sequence is valid for all | | subframes after the target device has received the _prs-MutingInfo_. | | If this field is not present the target device may assume that the | | PRS muting is not in use for the cell. | | | | When the SFN of the assistance data reference cell is not known to | | the UE and _prs-MutingInfo_ is provided for a cell in the | | _OTDOA-NeighbourCellInfoList_ IE, the UE may assume no PRS is | | transmitted by that cell. | | | | When the UE receives a 16-bit muting pattern (po16-r9) and PRS | | periodicity T_PRS of 1280 subframes for the same cell, the UE shall | | assume an 8-bit muting pattern (po8-r9) based on the first half of | | the 16-bit muting pattern. | +----------------------------------------------------------------------+
#### \-- _OTDOA-NeighbourCellInfoList_
The IE _OTDOA-NeighbourCellInfoList_ is used by the location server to provide
neighbour cell information for OTDOA assistance data. If the target device is
not capable of supporting additional neighbour cells (as indicated by the
absence of the IE _additionalNeighbourCellInfoList_ in _OTDOA-
ProvideCapabilities_), the set of cells in the _OTDOA-NeighbourCellInfoList_
is grouped per frequency layer and in the decreasing order of priority for
measurement to be performed by the target device, with the first cell in the
list being the highest priority for measurement and with the same _earfcn_ not
appearing in more than one instance of _OTDOA‑NeighbourFreqInfo_.
If the target device is capable of supporting additional neighbour cells (as
indicated by the presence of the IE _additionalNeighbourCellInfoList_ in
_OTDOA-ProvideCapabilities_)_,_ the list may contain all cells (up to 3x24
cells) belonging to the same frequency layer or cells from different frequency
layers with the first cell in the list still being the highest priority for
measurement.
The prioritization of the cells in the list is left to server implementation.
The target device should provide the available measurements in the same order
as provided by the server.
If inter-frequency neighbour cells are included in _OTDOA-
NeighbourCellInfoList_ , where an inter-frequency is a E-UTRA frequency which
is different from the E-UTRA serving cell frequency, the LPP layer shall
inform lower layers to start performing inter-frequency RSTD measurements for
these neighbour cells and also provide to lower layers the information about
these neighbour cells, e.g. EARFCN and PRS positioning occasion information.
\-- ASN1START
OTDOA-NeighbourCellInfoList ::= SEQUENCE (SIZE (1..maxFreqLayers)) OF OTDOA-
NeighbourFreqInfo
OTDOA-NeighbourFreqInfo ::= SEQUENCE (SIZE (1..24)) OF OTDOA-
NeighbourCellInfoElement
OTDOA-NeighbourCellInfoElement ::= SEQUENCE {
physCellId INTEGER (0..503),
cellGlobalId ECGI OPTIONAL, -- Need ON
earfcn ARFCN-ValueEUTRA OPTIONAL, -- Cond NotSameAsRef0
cpLength ENUMERATED {normal, extended, ...}
OPTIONAL, -- Cond NotSameAsRef1
prsInfo PRS-Info OPTIONAL, -- Cond NotSameAsRef2
antennaPortConfig ENUMERATED {ports-1-or-2, ports-4, ...}
OPTIONAL, -- Cond NotsameAsRef3
slotNumberOffset INTEGER (0..19) OPTIONAL, -- Cond NotSameAsRef4
prs-SubframeOffset INTEGER (0..1279) OPTIONAL, -- Cond InterFreq
expectedRSTD INTEGER (0..16383),
expectedRSTD-Uncertainty INTEGER (0..1023),
...,
[[ earfcn-v9a0 ARFCN-ValueEUTRA-v9a0 OPTIONAL -- Cond NotSameAsRef5
]]
}
maxFreqLayers INTEGER ::= 3
\-- ASN1STOP
* * *
Conditional presence Explanation _NotsameAsRef0_ The field is absent if
_earfcn-v9a0_ is present. If earfcn-v9a0 is not present, the field is
mandatory present **if the EARFCN is not the same as for the assistance data
reference cell** ; otherwise it is not present. _NotsameAsRef1_ The field is
mandatory present **if the cyclic prefix length is not the same as for the
assistance data reference cell** ; otherwise it is not present.
_NotsameAsRef2_ The field is mandatory present **if the PRS configuration is
not the same as for the assistance data reference cell** ; otherwise it is not
present. _NotsameAsRef3_ The field is mandatory present **if the antenna port
configuration is not the same as for the assistance data reference cell** ;
otherwise it is not present. _NotsameAsRef4_ The field is mandatory present
**if the slot timing is not the same as for the assistance data reference
cell** ; otherwise it is not present. _NotSameAsRef5_ The field is absent if
_earfcn_ is present. If _earfcn_ is not present, the field is mandatory
present **if the EARFCN is not the same as for the assistance data reference
cell** ; otherwise it is not present. _InterFreq_ The field is optionally
present, need OP, if the EARFCN is not the same as for the assistance data
reference cell; otherwise it is not present.
* * *
+----------------------------------------------------------------------+ | _OTDOA-NeighbourCellInfoList field descriptions_ | +----------------------------------------------------------------------+ | **_physCellId_** | | | | This field specifies the physical cell identity of the neighbour | | cell, as defined in [12]. | +----------------------------------------------------------------------+ | **_cellGlobalId_** | | | | This field specifies the ECGI, the globally unique identity of a | | cell in E-UTRA, of the neighbour cell, as defined in [12]. The | | server should provide this field if it considers that it is needed | | to resolve any ambiguity in the cell identified by _physCellId_. | +----------------------------------------------------------------------+ | **_earfcn_** | | | | This field specifies the EARFCN of the neighbour cell. | +----------------------------------------------------------------------+ | **_cpLength_** | | | | **_This field specifies the cyclic prefix length of the neigbour | | cell PRS if PRS are present in this neighbour cell, otherwise this | | field specifies the cyclic prefix length of CRS in this neighbour | | cell._** | +----------------------------------------------------------------------+ | **_prsInfo_** | | | | **_This field specifies the PRS configuration of the neighbour | | cell._** | | | | **_When_** the EARFCN of the neighbour cell is the same as for the | | assistance data reference cell, **_t_** he target device may assume | | that each PRS positioning occasion in the neighbour cell at least | | partially overlaps with a PRS positioning occasion in the assistance | | data reference cell where the maximum offset between the transmitted | | PRS positioning occasions may be assumed to not exceed half a | | subframe. | | | | When the EARFCN of the neighbour cell is the same as for the | | assistance data reference cell, the target may assume that this cell | | has the same PRS periodicity (Tprs) as the assistance data reference | | cell. | +----------------------------------------------------------------------+ | **_antennaPortConfig_** | | | | This field specifies whether 1 (or 2) antenna port(s) or 4 antenna | | ports for cell specific reference signals are used. | +----------------------------------------------------------------------+ | **_slotNumberOffset_** | | | | This field specifies the slot number offset at the transmitter | | between this cell and the assistance data reference cell. | | | | The _slotNumberOffset_ together with the current slot number of the | | assistance data reference cell may be used to calculate the current | | slot number of this cell which may further be used to generate the | | CRS sequence by the target device. The offset corresponds to the | | number of full slots counted from the beginning of a radio frame of | | the assistance data reference cell to the beginning of the closest | | subsequent radio frame of this cell. If this field is absent, the | | slot timing is the same as for the assistance data reference cell. | +----------------------------------------------------------------------+ | **_prs-SubframeOffset_** | | | | This field specifies the offset between the first PRS subframe in | | the assistance data reference cell on the reference carrier | | frequency layer and the first PRS subframe in the closest subsequent | | PRS positioning occasion of this cell on the other carrier frequency | | layer. The value is given in number of full sub-frames. If the | | EARFCN is not the same as for the assistance data reference cell and | | the field is not present but PRS are available on this cell, the | | receiver shall consider the PRS subframe offset for this cell to be | | 0. | +----------------------------------------------------------------------+ | **_expectedRSTD_** | | | | If PRS is transmitted: | | | | This field indicates the RSTD value that the target device is | | expected to measure between this cell and the assistance data | | reference cell. The _expectedRSTD_ field takes into account the | | expected propagation time difference as well as transmit time | | difference of PRS positioning occasions between the two cells. The | | RSTD value can be negative and is calculated as | | (_expectedRSTD_ -8192). The resolution is 3×T~s~, with | | T~s~=1/(15000*2048) seconds. | | | | If PRS is not transmitted: | | | | This field indicates the RSTD value that the target device is | | expected to measure between this cell and the assistance data | | reference cell. The expectedRSTD field takes into account the | | expected propagation time difference as well as transmit time | | difference between the two cells. The RSTD value can be negative and | | is calculated as (expectedRSTD-8192). The resolution is 3´T~s~, with | | T~s~=1/(15000*2048) seconds. | +----------------------------------------------------------------------+ | **_expectedRSTD-Uncertainty_** | | | | If PRS is transmitted: | | | | This field indicates the uncertainty in _expectedRSTD_ value** _._** | | The uncertainty is related to the location server's a‑priori | | estimation of the target device location. The _expectedRSTD_ and | | _expectedRSTD-Uncertainty_ together define the search window for the | | target device. | | | | The scale factor of the _expectedRSTD-Uncertainty_ field is 3×T~s~, | | with T~s~=1/(15000*2048) seconds. | | | | The target device may assume that the beginning of the PRS | | positioning occasion of the neighbour cell is received within the | | search window of size [_− expectedRSTD-Uncertainty_ ×3×T~s~_, | | expectedRSTD-Uncertainty_ ×3×T~s~] centered at | | | | T~REF~ _+_ 1 millisecond×N + _(expectedRSTD−_ 8192) ×3×T~s~, where | | T~REF~ is the reception time of the beginning of the PRS positioning | | occasion of the assistance data reference cell at the target device | | antenna connector, N = 0 when the EARFCN of the neighbour cell is | | equal to that of the assistance data reference cell, and N = | | _prs-SubframeOffset_ otherwise. | | | | If PRS is not transmitted: | | | | This field indicates the uncertainty in _expectedRSTD_ value** _._** | | The uncertainty is related to the location server's a‑priori | | estimation of the target device location. The _expectedRSTD_ and | | _expectedRSTD-Uncertainty_ together define the search window for the | | target device. The scale factor of the _expectedRSTD-Uncertainty_ | | field is 3×T~s~, with T~s~=1/(15000*2048) seconds. | | | | If T~x~ is the reception time of the beginning of the subframe X of | | the assistance data reference cell at the target device antenna | | connector, the target device may assume that the beginning of the | | closest subframe of this neighbour cell to subframe X is received | | within the search window of size [_− | | expectedRSTD-Uncertainty_ ×3×T~s~_, | | expectedRSTD-Uncertainty_ ×3×T~s~] centered at T~x~ + | | _(expectedRSTD−_ 8192) ×3×T~s~, | +----------------------------------------------------------------------+
#### 6.5.1.3 OTDOA Assistance Data Request
#### \-- _OTDOA-RequestAssistanceData_
The IE _OTDOA-RequestAssistanceData_ is used by the target device to request
assistance data from a location server.
\-- ASN1START
OTDOA-RequestAssistanceData ::= SEQUENCE {
physCellId INTEGER (0..503),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _OTDOA-RequestAssistanceData field descriptions_ | +----------------------------------------------------------------------+ | **_physCellId_** | | | | This field specifies the physical cell identity of the current | | primary cell of the target device. | +----------------------------------------------------------------------+
#### 6.5.1.4 OTDOA Location Information
#### \-- _OTDOA-ProvideLocationInformation_
The IE _OTDOA-ProvideLocationInformation_ is used by the target device to
provide OTDOA location measurements to the location server. It may also be
used to provide OTDOA positioning specific error reason.
\-- ASN1START
OTDOA-ProvideLocationInformation ::= SEQUENCE {
otdoaSignalMeasurementInformation OTDOA-SignalMeasurementInformation OPTIONAL,
otdoa-Error OTDOA-Error OPTIONAL,
...
}
\-- ASN1STOP
#### 6.5.1.5 OTDOA Location Information Elements
#### \-- _OTDOA-SignalMeasurementInformation_
The IE _OTDOA-SignalMeasurementInformation_ is used by the target device to
provide RSTD measurements to the location server. The RSTD measurements are
provided for a neighbour cell and the RSTD reference cell, both of which are
provided in the IE _OTDOA-ProvideAssistanceData._ The RSTD reference cell may
or may not be the same as the assistance data reference cell provided in
_OTDOA-ReferenceCellInfo_. If the target device stops reporting inter-
frequency RSTD measurements, where the inter-frequency RSTD measurement is an
OTDOA RSTD measurement with at least one cell on a frequency different from
the serving cell frequency, the LPP layer shall inform lower layers that
inter-frequency RSTD measurements are stopped.
NOTE: If there are more than 24 _NeighbourMeasurementElement_ to be sent, the
target device may send them in multiple _ProvideLocationInformation_ messages,
as described under sub-clause 5.3.
\-- ASN1START
OTDOA-SignalMeasurementInformation ::= SEQUENCE {
systemFrameNumber BIT STRING (SIZE (10)),
physCellIdRef INTEGER (0..503),
cellGlobalIdRef ECGI OPTIONAL,
earfcnRef ARFCN-ValueEUTRA OPTIONAL, -- Cond NotSameAsRef0
referenceQuality OTDOA-MeasQuality OPTIONAL,
neighbourMeasurementList NeighbourMeasurementList,
...,
[[ earfcnRef-v9a0 ARFCN-ValueEUTRA-v9a0 OPTIONAL -- Cond NotSameAsRef1
]]
}
NeighbourMeasurementList ::= SEQUENCE (SIZE(1..24)) OF
NeighbourMeasurementElement
NeighbourMeasurementElement ::= SEQUENCE {
physCellIdNeighbour INTEGER (0..503),
cellGlobalIdNeighbour ECGI OPTIONAL,
earfcnNeighbour ARFCN-ValueEUTRA OPTIONAL, -- Cond NotSameAsRef2
rstd INTEGER (0..12711),
rstd-Quality OTDOA-MeasQuality,
...,
[[ earfcnNeighbour-v9a0 ARFCN-ValueEUTRA-v9a0 OPTIONAL -- Cond NotSameAsRef3
]]
}
\-- ASN1STOP
* * *
Conditional presence Explanation _NotSameAsRef0_ The field is absent if the
corresponding _earfcnRef-v9a0_ is present. Otherwise, the target device shall
include this field if the EARFCN of the RSTD reference cell is not the same as
the EARFCN of the assistance data reference cell provided in the OTDOA
assistance data. _NotSameAsRef1_ The field is absent if the corresponding
_earfcnRef_ is present. Otherwise, the target device shall include this field
if the EARFCN of the RSTD reference cell is not the same as the EARFCN of the
assistance data reference cell provided in the OTDOA assistance data.
_NotSameAsRef2_ The field is absent if the corresponding
_earfcnNeighbour-v9a0_ is present. Otherwise, the target device shall include
this field if the EARFCN of this neighbour cell is not the same as the
_earfcnRef_ for the RSTD reference cell. _NotSameAsRef3_ The field is absent
if the corresponding _earfcnNeighbour_ is present. Otherwise, the target
device shall include this field if the EARFCN of this neighbour cell is not
the same as the _earfcnRef_ for the RSTD reference cell.
* * *
+----------------------------------------------------------------------+ | _OTDOA-SignalMeasurementInformation field descriptions_ | +----------------------------------------------------------------------+ | **_systemFrameNumber_** | | | | This field specifies the SFN of the RSTD reference cell containing | | the starting subframe of the PRS positioning occasion if PRS are | | available on the RSTD reference cell, or subframe of the CRS for | | RSTD measurements if PRS are not available on the RSTD reference | | cell during which the most recent neighbour cell RSTD measurement | | was performed. | +----------------------------------------------------------------------+ | **_physCellIdRef_** | | | | This field specifies the physical cell identity of the RSTD | | reference cell. | +----------------------------------------------------------------------+ | **_cellGlobalIdRef_** | | | | This field specifies the ECGI, the globally unique identity of a | | cell in E-UTRA, of the RSTD reference cell. The target shall provide | | this IE if it knows the ECGI of the RSTD reference cell. | +----------------------------------------------------------------------+ | **_earfcnRef_** | | | | This field specifies the EARFCN of the RSTD reference cell. | +----------------------------------------------------------------------+ | **_referenceQuality_** | | | | This field specifies the target device's best estimate of the | | quality of the TOA measurement from the RSTD reference cell, | | T~SubframeRxRef~ , where T~SubframeRxRef~ is the time of arrival of | | the signal from the RSTD reference cell. | +----------------------------------------------------------------------+ | **_neighbourMeasurementList_** | | | | **_This list contains the measured RSTD values for neighbour cells | | together with the RSTD reference cell, along with quality for each | | measurement._** | +----------------------------------------------------------------------+ | **_physCellIdNeighbour_** | | | | This field specifies the physical cell identity of the neighbour | | cell for which the RSTDs are provided. | +----------------------------------------------------------------------+ | **_cellGlobalIdNeighbour_** | | | | This field specifies the ECGI, the globally unique identity of a | | cell in E-UTRA, of the neighbour cell for which the RSTDs are | | provided. The target device shall provide this IE if it was able to | | determine the ECGI of the neighbour cell at the time of measurement. | +----------------------------------------------------------------------+ | **_earfcnNeighbour_** | | | | This field specifies the EARFCN of the neighbour cell used for the | | RSTD measurements. | +----------------------------------------------------------------------+ | **_rstd_** | | | | This field specifies the relative timing difference between this | | neighbour cell and the RSTD reference cell, as defined in [17]. | | Mapping of the measured quantity is defined as in [18] subclause | | 9.1.10.3. | +----------------------------------------------------------------------+ | **_rstd-Quality_** | | | | This field specifies the target device's best estimate of the | | quality of the measured _rstd_. | +----------------------------------------------------------------------+
#### \-- _OTDOA-MeasQuality_
\-- ASN1START
OTDOA-MeasQuality ::= SEQUENCE {
error-Resolution BIT STRING (SIZE (2)),
error-Value BIT STRING (SIZE (5)),
error-NumSamples BIT STRING (SIZE (3)) OPTIONAL,
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _OTDOA-MeasQuality field descriptions_ | +----------------------------------------------------------------------+ | **_error-Resolution_** | | | | This field specifies the resolution R used in _error-Value_ field. | | The encoding on two bits is as follows: | | | | \'00\' 5 meters | | | | \'01\' 10 meters | | | | \'10\' 20 meters | | | | \'11\' 30 meters. | +----------------------------------------------------------------------+ | **_error-Value_** | | | | This field specifies the target device's best estimate of the | | uncertainty of the OTDOA (or TOA) measurement. | | | | The encoding on five bits is as follows: | | | | \'00000\' 0 to (R*1-1) meters | | | | \'00001\' R*1 to (R*2-1) meters | | | | \'00010\' R*2 to (R*3-1) meters | | | | ... | | | | \'11111\' R*31 meters or more; | | | | where R is the resolution defined by _error-Resolution_ field. | | | | E.g. , R=20 m corresponds to 0-19 m, 20-39 m,...,620+ m. | +----------------------------------------------------------------------+ | **_error-NumSamples_** | | | | If the _error-Value_ field provides the sample uncertainty of the | | OTDOA (or TOA) measurement, this field specifies how many | | measurements have been used by the target device to determine this | | (i.e., sample size). Following 3 bit encoding is used: | | | | '000' Not the baseline metric | | | | \'001\' 5-9 | | | | \'010\' 10-14 | | | | \'011\' 15-24 | | | | \'100\' 25-34 | | | | \'101\' 35-44 | | | | \'110\' 45-54 | | | | \'111\' 55 or more. | | | | In case of the value '000', the _error-Value_ field contains the | | target device's best estimate of the uncertainty of the OTDOA (or | | TOA) measurement not based on the baseline metric. E.g., other | | measurements such as signal-to-noise-ratio or signal strength can be | | utilized to estimate the _error-Value._ | | | | If this field is absent, the value of this field is '000'. | +----------------------------------------------------------------------+
#### 6.5.1.6 OTDOA Location Information Request
#### \-- _OTDOA-RequestLocationInformation_
The IE _OTDOA-RequestLocationInformation_ is used by the location server to
request OTDOA location measurements from a target device. Details of the
required measurements (e.g. details of assistance data reference cell and
neighbour cells) are conveyed in the _OTDOA-ProvideAssistanceData_ IE in a
separate Provide Assistance Data message.
\-- ASN1START
OTDOA-RequestLocationInformation ::= SEQUENCE {
assistanceAvailability BOOLEAN,
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _OTDOA-RequestLocationInformation field descriptions_ | +----------------------------------------------------------------------+ | **_assistanceAvailability_** | | | | This field indicates whether the target device may request | | additional OTDOA assistance data from the server. TRUE means allowed | | and FALSE means not allowed. | +----------------------------------------------------------------------+
#### 6.5.1.7 OTDOA Capability Information
#### \-- _OTDOA-ProvideCapabilities_
The IE _OTDOA-ProvideCapabilities_ is used by the target device to indicate
its capability to support OTDOA and to provide its OTDOA positioning
capabilities to the location server.
\-- ASN1START
OTDOA-ProvideCapabilities ::= SEQUENCE {
otdoa-Mode BIT STRING { ue-assisted (0) } (SIZE (1..8)),
...,
supportedBandListEUTRA SEQUENCE (SIZE (1..maxBands)) OF SupportedBandEUTRA
OPTIONAL,
supportedBandListEUTRA-v9a0 SEQUENCE (SIZE (1..maxBands)) OF
SupportedBandEUTRA-v9a0
OPTIONAL,
interFreqRSTDmeasurement-r10 ENUMERATED { supported } OPTIONAL,
additionalNeighbourCellInfoList-r10 ENUMERATED { supported } OPTIONAL
}
maxBands INTEGER ::= 64
SupportedBandEUTRA ::= SEQUENCE {
bandEUTRA INTEGER (1..maxFBI)
}
SupportedBandEUTRA-v9a0 ::= SEQUENCE {
bandEUTRA-v9a0 INTEGER (maxFBI-Plus1..maxFBI2) OPTIONAL
}
maxFBI INTEGER ::= 64 -- Maximum value of frequency band indicator
maxFBI-Plus1 INTEGER ::= 65 -- lowest value extended FBI range
maxFBI2 INTEGER ::= 256 -- highest value extended FBI range
\-- ASN1STOP
+----------------------------------------------------------------------+ | _OTDOA-ProvideCapabilities_ _field descriptions_ | +----------------------------------------------------------------------+ | **_otdoa-Mode_** | | | | This field specifies the OTDOA mode(s) supported by the target | | device. This is represented by a bit string, with a one‑value at the | | bit position means the particular OTDOA mode is supported; a | | zero‑value means not supported. A zero-value in all bit positions in | | the bit string means OTDOA positioning method is not supported by | | the target device. | +----------------------------------------------------------------------+ | **_SupportedBandEUTRA_** | | | | This field specifies the frequency bands for which the target device | | supports RSTD measurements. One entry corresponding to each | | supported E‑UTRA band **_as defined in TS 36.101 [21]. In case the | | target device includes bandEUTRA-v9a0, the target device shall set | | the corresponding entry of bandEUTRA (i.e. without suffix) to | | maxFBI._** | +----------------------------------------------------------------------+ | **_interFreqRSTDmeasurement_** | | | | **This field, if present, indicates that the target device supports | | inter-frequency RSTD measurements within and between the frequency | | bands indicated in _SupportedBandEUTRA _._ * | +----------------------------------------------------------------------+ | _**additionalNeighbourCellInfoList ___| | | | This field, if present, indicates that the target device supports up | | to 3×24_ OTDOA-NeighbourCellInfoElement_ in | | _OTDOA‑NeighbourCellInfoList _in_ OTDOA-ProvideAssistanceData _| | without any restriction for the_ earfcn _in each | |_ OTDOA-NeighbourCellInfoElement* as specified in subclause 6.5.1.2. | +----------------------------------------------------------------------+
#### 6.5.1.8 OTDOA Capability Information Request
#### \-- _OTDOA-RequestCapabilities_
The IE _OTDOA-RequestCapabilities_ is used by the location server to request
the capability of the target device to support OTDOA and to request OTDOA
positioning capabilities from a target device.
\-- ASN1START
OTDOA-RequestCapabilities ::= SEQUENCE {
...
}
\-- ASN1STOP
#### 6.5.1.9 OTDOA Error Elements
#### \-- _OTDOA-Error_
The IE _OTDOA-Error_ is used by the location server or target device to
provide OTDOA error reasons to the target device or location server,
respectively.
\-- ASN1START
OTDOA-Error ::= CHOICE {
locationServerErrorCauses OTDOA-LocationServerErrorCauses,
targetDeviceErrorCauses OTDOA-TargetDeviceErrorCauses,
...
}
\-- ASN1STOP
#### \-- _OTDOA-LocationServerErrorCauses_
The IE _OTDOA-LocationServerErrorCauses_ is used by the location server to
provide OTDOA error reasons to the target device.
\-- ASN1START
OTDOA-LocationServerErrorCauses ::= SEQUENCE {
cause ENUMERATED { undefined,
assistanceDataNotSupportedByServer,
assistanceDataSupportedButCurrentlyNotAvailableByServer,
...
},
...
}
\-- ASN1STOP
#### \-- _OTDOA-TargetDeviceErrorCauses_
The IE _OTDOA-TargetDeviceErrorCauses_ is used by the target device to provide
OTDOA error reasons to the location server.
\-- ASN1START
OTDOA-TargetDeviceErrorCauses ::= SEQUENCE {
cause ENUMERATED { undefined,
assistance-data-missing,
unableToMeasureReferenceCell,
unableToMeasureAnyNeighbourCell,
attemptedButUnableToMeasureSomeNeighbourCells,
...
},
...
}
\-- ASN1STOP
### 6.5.2 A-GNSS Positioning
#### 6.5.2.1 GNSS Assistance Data
#### \-- _A-GNSS-ProvideAssistanceData_
The IE _A-GNSS-ProvideAssistanceData_ is used by the location server to
provide assistance data to enable UE‑based and UE‑assisted A‑GNSS. It may also
be used to provide GNSS positioning specific error reasons.
\-- ASN1START
A-GNSS-ProvideAssistanceData ::= SEQUENCE {
gnss-CommonAssistData GNSS-CommonAssistData OPTIONAL, -- Need ON
gnss-GenericAssistData GNSS-GenericAssistData OPTIONAL, -- Need ON
gnss-Error A-GNSS-Error OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
#### \-- _GNSS-CommonAssistData_
The IE _GNSS-CommonAssistData_ is used by the location server to provide
assistance data which can be used for any GNSS (e.g., GPS, Galileo, GLONASS,
BDS, etc.).
\-- ASN1START
GNSS-CommonAssistData ::= SEQUENCE {
gnss-ReferenceTime GNSS-ReferenceTime OPTIONAL, -- Need ON
gnss-ReferenceLocation GNSS-ReferenceLocation OPTIONAL, -- Need ON
gnss-IonosphericModel GNSS-IonosphericModel OPTIONAL, -- Need ON
gnss-EarthOrientationParameters GNSS-EarthOrientationParameters OPTIONAL, --
Need ON
...
}
\-- ASN1STOP
#### \-- _GNSS-GenericAssistData_
The IE _GNSS-GenericAssistData_ is used by the location server to provide
assistance data for a specific GNSS (e.g., GPS, Galileo, GLONASS, BDS, etc.).
The specific GNSS for which the provided assistance data are applicable is
indicated by the IE _GNSS‑ID_ and (if applicable) by the IE _SBAS‑ID_.
Assistance for up to 16 GNSSs can be provided.
\-- ASN1START
GNSS-GenericAssistData ::= SEQUENCE (SIZE (1..16)) OF GNSS-
GenericAssistDataElement
GNSS-GenericAssistDataElement ::= SEQUENCE {
gnss-ID GNSS-ID,
sbas-ID SBAS-ID OPTIONAL, -- Cond GNSS-ID-SBAS
gnss-TimeModels GNSS-TimeModelList OPTIONAL, -- Need ON
gnss-DifferentialCorrections GNSS-DifferentialCorrections OPTIONAL, -- Need ON
gnss-NavigationModel GNSS-NavigationModel OPTIONAL, -- Need ON
gnss-RealTimeIntegrity GNSS-RealTimeIntegrity OPTIONAL, -- Need ON
gnss-DataBitAssistance GNSS-DataBitAssistance OPTIONAL, -- Need ON
gnss-AcquisitionAssistance GNSS-AcquisitionAssistance OPTIONAL, -- Need ON
gnss-Almanac GNSS-Almanac OPTIONAL, -- Need ON
gnss-UTC-Model GNSS-UTC-Model OPTIONAL, -- Need ON
gnss-AuxiliaryInformation GNSS-AuxiliaryInformation OPTIONAL, -- Need ON
...,
[[
bds-DifferentialCorrections-r12
BDS-DifferentialCorrections-r12 OPTIONAL, -- Cond GNSS-ID-BDS
bds-GridModel-r12 BDS-GridModelParameter-r12 OPTIONAL -- Cond GNSS-ID-BDS
]]
}
\-- ASN1STOP
* * *
Conditional presence Explanation _GNSS‑ID‑SBAS_ The field is mandatory present
**if the _GNSS‑ID _=_ sbas_**; otherwise it is not present. _GNSS‑ID‑BDS_ The
field may be present if the _GNSS‑ID_ = _bds_ ; otherwise it is not present.
* * *
#### 6.5.2.2 GNSS Assistance Data Elements
#### \-- _GNSS-ReferenceTime_
The IE _GNSS-ReferenceTime_ is used by the location server to provide the GNSS
specific system time with uncertainty and the relationship between GNSS system
time and network air-interface timing of the eNodeB/NodeB/BTS transmission in
the reference cell.
If the IE _networkTime_ is present, the IEs _gnss-SystemTime_ and
_networkTime_ provide a valid relationship between GNSS system time and air-
interface network time, as seen at the approximate location of the target
device, i.e. the propagation delay from the the eNodeB/NodeB/BTS to the target
device shall be compensated for by the location server. Depending on
implementation, the relation between GNSS system time and air-interface
network time may have varying accuracy. The uncertainty of this timing
relation is provided in the IE _referenceTimeUnc_. If the propagation delay
from the eNodeB/NodeB/BTS to the target device is not accurately known, the
location server shall use the best available approximation of the propagation
delay and take the corresponding delay uncertainty into account in the
calculation of the IE _referenceTimeUnc_.
If the IE _networkTime_ is not present, the IE _gnssSystemTime_ is an estimate
of current GNSS system time at time of reception of the IE _GNSS-
ReferenceTime_ by the target device. The location server should achieve an
accuracy of +/- 3 seconds for this estimate including allowing for the
transmission delay between the location server and the target device. Note
that the target device should further compensate _gnss-SystemTime_ for the
time between the reception of _GNSS-ReferenceTime_ and the time when the
_gnss-SystemTime_ is used.
The location server shall provide a value for the _gnss-TimeID_ only for GNSSs
supported by the target device.
The IE _GNSS-ReferenceTimeForOneCell_ can be provided multiple times (up to
16) to provide fine time assistance for several (neighbour) cells.
\-- ASN1START
GNSS-ReferenceTime ::= SEQUENCE {
gnss-SystemTime GNSS-SystemTime,
referenceTimeUnc INTEGER (0..127) OPTIONAL, -- Cond noFTA
gnss-ReferenceTimeForCells SEQUENCE (SIZE (1..16)) OF
GNSS-ReferenceTimeForOneCell OPTIONAL, -- Need ON
...
}
GNSS-ReferenceTimeForOneCell ::= SEQUENCE {
networkTime NetworkTime,
referenceTimeUnc INTEGER (0..127),
bsAlign ENUMERATED {true} OPTIONAL,
...
}
\-- ASN1STOP
* * *
Conditional presence Explanation _noFTA_ The field may be present if _gnss-
ReferenceTimeForCells_ is absent; otherwise it is not present.
* * *
+----------------------------------------------------------------------+ | _GNSS-ReferenceTime field descriptions_ | +----------------------------------------------------------------------+ | **_gnss-SystemTime_** | | | | This field provides the specific GNSS system time. | +----------------------------------------------------------------------+ | **_networkTime_** | | | | This field specifies the cellular network time at the epoch | | corresponding to _gnss-SystemTime._ | +----------------------------------------------------------------------+ | **_referenceTimeUnc_** | | | | This field provides the accuracy of the relation between | | _gnssSystemTime_ and _networkTime_ time if IE _networkTime_ is | | provided. When IE _networkTime_ is not provided, this field can be | | included to provide the accuracy of the provided _gnssSystemTime_. | | | | If GNSS TOD is the given GNSS time, then the true GNSS time, | | corresponding to the provided network time as observed at the target | | device location, lies in the interval [GNSS TOD - | | _referenceTimeUnc_ , GNSS TOD + _referenceTimeUnc_]. | | | | The uncertainty _r_ , expressed in microseconds, is mapped to a | | number _K_ , with the following formula: | | | | _r_ = C*(((1+x)^K^)-1) | | | | with C = 0.5 and x = 0.14. To encode any higher value of uncertainty | | than that corresponding in the above formula to K=127, the same | | value, K=127, shall also be used. The uncertainty is then coded on 7 | | bits, as the binary encoding of K. Example values for the | | _referenceTimeUnc_ Format: see table K to uncertainty relation | | below. | +----------------------------------------------------------------------+ | **_bsAlign_** | | | | This flag, if present, indicates that the transmission timings of | | all cells sharing, depending on the RAT, the same carrier frequency | | and Tracking Area/Location Area/Routing Area as the cell indicated, | | are frame aligned. This information allows the target device to | | derive the GNSS - cellular time relation for any of these cells | | based on the timing relation information provided in | | GNSS-ReferenceTime. The flag should be set consistently in all these | | cells. This flag does not guarantee SFN alignment. | +----------------------------------------------------------------------+
K to uncertainty relation
* * *
Value of K Value of uncertainty 0 0 nanoseconds 1 70 nanoseconds 2 149.8
nanoseconds \- - 50 349.62 microseconds \- - 127 ≥ 8.43 seconds
* * *
#### \-- _GNSS-SystemTime_
\-- ASN1START
GNSS-SystemTime ::= SEQUENCE {
gnss-TimeID GNSS-ID,
gnss-DayNumber INTEGER (0..32767),
gnss-TimeOfDay INTEGER (0..86399),
gnss-TimeOfDayFrac-msec INTEGER (0..999) OPTIONAL, -- Need ON
notificationOfLeapSecond BIT STRING (SIZE(2)) OPTIONAL, -- Cond gnss-TimeID-
glonass
gps-TOW-Assist GPS-TOW-Assist OPTIONAL, -- Cond gnss-TimeID-gps
...
}
\-- ASN1STOP
* * *
Conditional presence Explanation _gnss-TimeID-glonass_ The field may be
present if _gnss-TimeID_ =`glonass'; otherwise it is not present. _gnss-
TimeID-gps_ The field may be present if _gnss-TimeID_ =`gps'; otherwise it is
not present.
* * *
+----------------------------------------------------------------------+ | _GNSS-SystemTime field descriptions_ | +----------------------------------------------------------------------+ | **_gnss-TimeID_** | | | | This field specifies the GNSS for which the _GNSS-SystemTime_ is | | provided. | +----------------------------------------------------------------------+ | **_gnss-DayNumber_** | | | | This field specifies the sequential number of days (with day count | | starting at 0) from the origin of the GNSS System Time as follows: | | | | GPS, QZSS, SBAS -- Days from January 6^th^ 1980 00:00:00 UTC (USNO); | | | | Galileo -- Days from Galileo System Time (GST) start epoch, defined | | as 13 seconds before midnight between 21^st^ August and 22^nd^ | | August 1999; i.e., GST was equal to 13 seconds at August 22^nd^ 1999 | | 00:00:00 UTC; | | | | GLONASS -- Days from December 31^st^ 1995 21:00:00 UTC (SU), which | | is local UTC Moscow | | | | January 1^st^ 1996 00:00:00, defined as UTC(SU) + 3 hours in [9]; | | | | BDS -- Days from January 1^st^ 2006 00:00:00 UTC (NTSC). | +----------------------------------------------------------------------+ | **_gnss-TimeOfDay_** | | | | This field specifies the integer number of seconds from the GNSS day | | change. | +----------------------------------------------------------------------+ | **_gnss-TimeOfDayFrac-msec_** | | | | This field specifies the fractional part of the _gnssTimeOfDay_ | | field in 1‑milli‑seconds resolution. The total GNSS TOD is | | _gnss-TimeOfDay + gnssTimeOfDayFrac-msec._ | +----------------------------------------------------------------------+ | **_notificationOfLeapSecond_** | | | | This field specifies the notification of forthcoming leap second | | correction, as defined by parameter KP in [9, Table 4.7]. | +----------------------------------------------------------------------+ | **_gps-TOW-Assist_** | | | | This field contains several fields in the Telemetry (TLM) Word and | | Handover Word (HOW) that are currently being broadcast by the | | respective GPS satellites. Combining this information with GPS TOW | | enables the target device to know the entire 1.2-second (60-bit) | | pattern of TLM and HOW that is transmitted at the start of each | | six-second NAV subframe by the particular GPS satellite. | +----------------------------------------------------------------------+
#### \-- _GPS-TOW-Assist_
\-- ASN1START
GPS-TOW-Assist ::= SEQUENCE (SIZE(1..64)) OF GPS-TOW-AssistElement
GPS-TOW-AssistElement ::= SEQUENCE {
satelliteID INTEGER (1..64),
tlmWord INTEGER (0..16383),
antiSpoof INTEGER (0..1),
alert INTEGER (0..1),
tlmRsvdBits INTEGER (0..3),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _GPS-TOW-Assist field descriptions_ | +----------------------------------------------------------------------+ | **_satelliteID_** | | | | This field identifies the satellite for which the _GPS-TOW-Assist_ | | is applicable. This field is identical to the GPS PRN Signal No. | | defined in [4]. | +----------------------------------------------------------------------+ | **_tlmWord_** | | | | This field contains a 14-bit value representing the Telemetry | | Message (TLM) being broadcast by the GPS satellite identified by the | | particular _satelliteID_ , with the MSB occurring first in the | | satellite transmission, as defined in [4]. | +----------------------------------------------------------------------+ | **_antiSpoof_** | | | | This field contains the Anti-Spoof flag that is being broadcast by | | the GPS satellite identified by _satelliteID_ , as defined in [4]. | +----------------------------------------------------------------------+ | **_alert_** | | | | This field contains the Alert flag that is being broadcast by the | | GPS satellite identified by _satelliteID_ , as defined in [4]. | +----------------------------------------------------------------------+ | **_tlmRsvdBits_** | | | | This field contains the two reserved bits in the TLM Word being | | broadcast by the GPS satellite identified by _satelliteID_ , with the | | MSB occurring first in the satellite transmission, as defined in | | [4]. | +----------------------------------------------------------------------+
#### \-- _NetworkTime_
\-- ASN1START
NetworkTime ::= SEQUENCE {
secondsFromFrameStructureStart INTEGER(0..12533),
fractionalSecondsFromFrameStructureStart INTEGER(0..3999999),
frameDrift INTEGER (-64..63) OPTIONAL, -- Cond GNSSsynch
cellID CHOICE {
eUTRA SEQUENCE {
physCellId INTEGER (0..503),
cellGlobalIdEUTRA CellGlobalIdEUTRA-AndUTRA OPTIONAL, -- Need ON
earfcn ARFCN-ValueEUTRA,
...,
[[ earfcn-v9a0 ARFCN-ValueEUTRA-v9a0 OPTIONAL -- Cond EARFCN-max
]]
},
uTRA SEQUENCE {
mode CHOICE {
fdd SEQUENCE {
primary-CPICH-Info INTEGER (0..511),
...
},
tdd SEQUENCE {
cellParameters INTEGER (0..127),
...
}
},
cellGlobalIdUTRA CellGlobalIdEUTRA-AndUTRA OPTIONAL, -- Need ON
uarfcn ARFCN-ValueUTRA,
...
},
gSM SEQUENCE {
bcchCarrier INTEGER (0..1023),
bsic INTEGER (0..63),
cellGlobalIdGERAN CellGlobalIdGERAN OPTIONAL, -- Need ON
...
},
...
},
...
}
\-- ASN1STOP
* * *
Conditional presence Explanation _EARFCN-max_ The field is mandatory present
if the corresponding _earfcn_ (i.e. without suffix) is set to _maxEARFCN_.
Otherwise the field is not present. _GNSSsynch_ The field is present and set
to 0 if _NetworkTime_ is synchronized to _gnss-SystemTime_ ; otherwise the
field is optionally present, need OR.
* * *
+----------------------------------------------------------------------+ | _NetworkTime field descriptions_ | +----------------------------------------------------------------------+ | **_secondsFromFrameStructureStart_** | | | | This field specifies the number of seconds from the beginning of the | | longest frame structure in the corresponding air interface. | | | | In case of E-UTRA, the SFN cycle length is 10.24 seconds. | | | | In case of UTRA, the SFN cycle length is 40.96 seconds. | | | | In case of GSM, the hyperfame length is 12533.76 seconds. | +----------------------------------------------------------------------+ | **_fractionalSecondsFromFrameStructureStart_** | | | | This field specifies the fractional part of the | | _secondsFromFrameStructureStart_ in 250 ns resolution. | | | | The total time since the particular frame structure start is | | _secondsFromFrameStructureStart + | | fractionalSecondsFromFrameStructureStart_ | +----------------------------------------------------------------------+ | **_frameDrift_** | | | | _This field specifies the drift rate of the GNSS‑network time | | relation with scale factor 2^-30^ seconds/second, in the range from | | ‑5.9605e-8 to +5.8673e-8 sec/sec._ | +----------------------------------------------------------------------+ | **_cellID_** | | | | This field specifies the cell for which the GNSS--network time | | relation is provided. | +----------------------------------------------------------------------+ | **_physCellId_** | | | | This field specifies the physical cell identity of the reference | | cell (E-UTRA), as defined in [12], for which the GNSS network time | | relation is provided. | +----------------------------------------------------------------------+ | **_cellGlobalIdEUTRA_** | | | | This field specifies the Evolved Cell Global Identifier (ECGI), the | | globally unique identity of a cell in E-UTRA, of the reference cell | | for the GNSS‑network time relation, as defined in [12]. | +----------------------------------------------------------------------+ | **_earfcn_** | | | | **This field specifies E-ARFCN of the reference cell for the | | GNSS‑network time relation (E-UTRA). In case the server includes | |_earfcn-v9a0 _, the server shall set the corresponding_ earfcn _(i.e. | | without suffix) to_ maxEARFCN _._ * | +----------------------------------------------------------------------+ | _**primary-CPICH-Info** _| | | | This field specifies the physical cell identity of the reference | | cell (UTRA) for the GNSS‑network time relation, as defined in | | [13]. | +----------------------------------------------------------------------+ |_** cellParameters** _| | | | This field specifies the physical cell identity of the reference | | cell (UTRA) for the GNSS‑network time relation, as defined in | | [13]. | +----------------------------------------------------------------------+ |_** cellGlobalIdUTRA** _| | | | The filed specifies the global UTRAN Cell Identifier, the globally | | unique identity of a cell in UTRA, of the reference cell for the | | GNSS‑network time relation, as defined in [13]. | +----------------------------------------------------------------------+ |_** uarfcn** _| | | | This field specifies ARFCN of the reference cell for the | | GNSS‑network time relation (UTRA). | +----------------------------------------------------------------------+ |_** bcchCarrier** _| | | | This field specifies the absolute GSM RF channel number of the BCCH | | of the reference base station (GERAN) for the GNSS‑network time | | relation, as defined in [14]. | +----------------------------------------------------------------------+ |_** bsic** _| | | | This field specifies the Base Station Identity Code of the reference | | base station (GERAN) for the GNSS‑network time relation, as defined | | in [14]. | +----------------------------------------------------------------------+ |_** cellGlobalIdGERAN*** | | | | This field specifies the Cell Global Identification (CGI), the | | globally unique identity of a cell in GERAN, of the reference base | | station for the GNSS‑network time relation. | +----------------------------------------------------------------------+
#### \-- _GNSS-ReferenceLocation_
The IE _GNSS-ReferenceLocation_ is used by the location server to provide the
target device with a‑priori knowledge of its location in order to improve GNSS
receiver performance. The IE _GNSS-ReferenceLocation_ is provided in WGS‑84
reference system.
\-- ASN1START
GNSS-ReferenceLocation ::= SEQUENCE {
threeDlocation EllipsoidPointWithAltitudeAndUncertaintyEllipsoid,
...
}
\-- ASN1STOP
#### \-- _GNSS-IonosphericModel_
The IE _GNSS-IonosphericModel_ is used by the location server to provide
parameters to model the propagation delay of the GNSS signals through the
ionosphere. Proper use of these fields allows a single‑frequency GNSS receiver
to remove parts of the ionospheric delay from the pseudorange measurements.
Two Ionospheric Models are supported: The Klobuchar model as defined in [4],
and the NeQuick model as defined in [8].
\-- ASN1START
GNSS-IonosphericModel ::= SEQUENCE {
klobucharModel KlobucharModelParameter OPTIONAL, -- Need ON
neQuickModel NeQuickModelParameter OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
#### \-- _KlobucharModelParameter_
\-- ASN1START
KlobucharModelParameter ::= SEQUENCE {
dataID BIT STRING (SIZE (2)),
alfa0 INTEGER (-128..127),
alfa1 INTEGER (-128..127),
alfa2 INTEGER (-128..127),
alfa3 INTEGER (-128..127),
beta0 INTEGER (-128..127),
beta1 INTEGER (-128..127),
beta2 INTEGER (-128..127),
beta3 INTEGER (-128..127),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _KlobucharModelParamater field descriptions_ | +----------------------------------------------------------------------+ | **_dataID_** | | | | **When _dataID _has the value '11' it indicates that the parameters | | have been generated by QZSS, and the parameters have been | | specialized and are applicable within the area defined in [7]. | | When_ dataID _has the value '01' it indicates that the parameters | | have been generated by BDS, and UE shall use these parameters | | according to the description given in 5.2.4.7 in [23]. When | |_ dataID _has the value '00' it indicates the parameters are | | applicable worldwide [4,7]. All other values for_ dataID _are | | reserved._ * | +----------------------------------------------------------------------+ | _**alpha0** _| | | | This field specifies the α~0~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^-30^ seconds. | +----------------------------------------------------------------------+ |_** alpha1** _| | | | This field specifies the α~1~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^-27^ seconds/semi-circle. | +----------------------------------------------------------------------+ |_** alpha2** _| | | | This field specifies the α~2~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^-24^ seconds/semi-circle^2^. | +----------------------------------------------------------------------+ |_** alpha3** _| | | | This field specifies the α~3~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^-24^ seconds/semi-circle^3^. | +----------------------------------------------------------------------+ |_** beta0** _| | | | This field specifies the β~0~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^11^ seconds. | +----------------------------------------------------------------------+ |_** beta1** _| | | | This field specifies the β~1~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^14^ seconds/semi-circle. | +----------------------------------------------------------------------+ |_** beta2** _| | | | This field specifies the β~2~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^16^ seconds/semi-circle^2^. | +----------------------------------------------------------------------+ |_** beta3*** | | | | This field specifies the β~3~ parameter of the Klobuchar model, as | | specified in [4], [23]. | | | | Scale factor 2^16^ seconds/semi-circle^3^. | +----------------------------------------------------------------------+
#### \-- _NeQuickModelParameter_
\-- ASN1START
NeQuickModelParameter ::= SEQUENCE {
ai0 INTEGER (0..2047),
ai1 INTEGER (-1024..1023),
ai2 INTEGER (-8192..8191),
ionoStormFlag1 INTEGER (0..1) OPTIONAL, -- Need OP
ionoStormFlag2 INTEGER (0..1) OPTIONAL, -- Need OP
ionoStormFlag3 INTEGER (0..1) OPTIONAL, -- Need OP
ionoStormFlag4 INTEGER (0..1) OPTIONAL, -- Need OP
ionoStormFlag5 INTEGER (0..1) OPTIONAL, -- Need OP
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _NeQuickModelParameter field descriptions_ | +----------------------------------------------------------------------+ | **_ai0_** | | | | Effective Ionisation Level 1^st^ order parameter. | | | | Scale factor 2^-2^ Solar Flux Units (SFUs), [8] section 5.1.6. | +----------------------------------------------------------------------+ | **_ai1_** | | | | Effective Ionisation Level 2^nd^ order parameter. | | | | Scale factor 2^-8^ Solar Flux Units/degree, [8] section 5.1.6. | +----------------------------------------------------------------------+ | **_ai2_** | | | | Effective Ionisation Level 3^rd^ order parameter. | | | | Scale factor 2^-15^ Solar Flux Units/degree^2^, [8] section 5.1.6. | +----------------------------------------------------------------------+ | **_ionoStormFlag1, ionoStormFlag2, ionoStormFlag3, ionoStormFlag4, | | ionoStormFlag5_** | | | | These fields specify the ionosphere disturbance flags (1,...,5) for | | five different regions as described in [8], section 5.1.6. If the | | ionosphere disturbance flag for a region is not present the target | | device shall treat the ionosphere disturbance condition as unknown. | +----------------------------------------------------------------------+
#### \-- _GNSS-EarthOrientationParameters_
The IE _GNSS-EarthOrientationParameters_ is used by the location server to
provide parameters to construct the ECEF and ECI coordinate transformation as
defined in [4]. The IE _GNSS-EarthOrientationParameters_ indicates the
relationship between the Earth's rotational axis and WGS-84 reference system.
\-- ASN1START
GNSS-EarthOrientationParameters ::= SEQUENCE {
teop INTEGER (0..65535),
pmX INTEGER (-1048576..1048575),
pmXdot INTEGER (-16384..16383),
pmY INTEGER (-1048576..1048575),
pmYdot INTEGER (-16384..16383),
deltaUT1 INTEGER (-1073741824..1073741823),
deltaUT1dot INTEGER (-262144..262143),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _GNSS-EarthOrientationParameters field descriptions_ | +----------------------------------------------------------------------+ | **_teop_** | | | | This field specifies the EOP data reference time in seconds, as | | specified in [4]. | | | | Scale factor 2^4^ seconds. | +----------------------------------------------------------------------+ | **_pmX_** | | | | **_This field specifies the_** X-axis polar motion value at | | reference time in arc-seconds, as specified in [4]. | | | | Scale factor 2^-20^ arc-seconds. | +----------------------------------------------------------------------+ | **_pmXdot_** | | | | This field specifies the X-axis polar motion drift at reference time | | in arc-seconds/day, as specified in [4]. | | | | Scale factor 2^-21^ arc-seconds/day. | +----------------------------------------------------------------------+ | **_pmY_** | | | | This field specifies the Y-axis polar motion value at reference time | | in arc-seconds, as specified in [4]. | | | | Scale factor 2^-20^ arc-seconds. | +----------------------------------------------------------------------+ | **_pmYdot_** | | | | This field specifies the Y-axis polar motion drift at reference time | | in arc-seconds/day, as specified in [4]. | | | | Scale factor 2^-21^ arc-seconds/day. | +----------------------------------------------------------------------+ | **_deltaUT1_** | | | | This field specifies the UT1-UTC difference at reference time in | | seconds, as specified in [4]. | | | | Scale factor 2^-24^ seconds. | +----------------------------------------------------------------------+ | **_deltaUT1dot_** | | | | This field specifies the Rate of UT1-UTC difference at reference | | time in seconds/day, as specified in [4]. | | | | Scale factor 2^-25^ seconds/day. | +----------------------------------------------------------------------+
#### \-- _GNSS-TimeModelList_
The IE _GNSS-TimeModelList_ is used by the location server to provide the
GNSS‑GNSS system time offset between the GNSS system time indicated by IE
_GNSS‑ID_ in IE _GNSS-GenericAssistDataElement_ to the GNSS system time
indicated by IE _gnss-TO-ID_. Several _GNSS-TimeModelElement_ IEs can be
included with different _gnss-TO-ID_ fields.
\-- ASN1START
GNSS-TimeModelList ::= SEQUENCE (SIZE (1..15)) OF GNSS-TimeModelElement
GNSS-TimeModelElement ::= SEQUENCE {
gnss-TimeModelRefTime INTEGER (0..65535),
tA0 INTEGER (-67108864..67108863),
tA1 INTEGER (-4096..4095) OPTIONAL, -- Need ON
tA2 INTEGER (-64..63) OPTIONAL, -- Need ON
gnss-TO-ID INTEGER (1..15),
weekNumber INTEGER (0..8191) OPTIONAL, -- Need ON
deltaT INTEGER (-128..127) OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _GNSS-TimeModelElement field descriptions_ | +----------------------------------------------------------------------+ | **_gnss-TimeModelRefTime_** | | | | This field specifies the reference time of week for | | _GNSS-TimeModelElement_ and it is given in GNSS specific system | | time. | | | | Scale factor 2^4^ seconds. | +----------------------------------------------------------------------+ | **_tA0_** | | | | **_This field specifies the bias coefficient of the_ _| | GNSS-TimeModelElement_. | | | | Scale factor 2^-35^ seconds. | +----------------------------------------------------------------------+ | **_tA1_**| | | | This field specifies the drift coefficient of the | |_GNSS-TimeModelElement.* | | | | Scale factor of 2^-51^ seconds/second. | +----------------------------------------------------------------------+ |_** tA2** _| | | | This field specifies the drift rate correction coefficient of the | |_ GNSS-TimeModelElement.* | | | | Scale factor of 2^-68^ seconds/second^2^. | +----------------------------------------------------------------------+ | **_gnss-TO-ID_**| | | | This field specifies the GNSS system time of the GNSS for which the | |_GNSS-TimeModelElement _is applicable._ GNSS-TimeModelElement _| | contains parameters to convert GNSS system time from the system | | indicated by_ GNSS‑ID _to GNSS system time indicated by | |_ gnss-TO-ID*. The conversion is defined in [4,5,6]. See table of | | gnss-TO-ID to Indication relation below. | +----------------------------------------------------------------------+ | _**weekNumber** _| | | | This field specifies the reference week of the | |_ GNSS-TimeModelElement* given in GNSS specific system time. | | | | Scale factor 1 week. | +----------------------------------------------------------------------+ | **_deltaT_ __| | | | This field specifies the integer number of seconds of the GNSS-GNSS | | time offset provided in the_ GNSS-TimeModelElement._ | | | | Scale factor 1 second. | +----------------------------------------------------------------------+
gnss-TO-ID to Indication relation
* * *
Value of _gnss-TO-ID_ Indication 1 GPS 2 Galileo 3 QZSS 4 GLONASS 5 BDS 6-15
reserved
* * *
#### \-- _GNSS-DifferentialCorrections_
The IE _GNSS-DifferentialCorrections_ is used by the location server to
provide differential GNSS corrections to the target device for a specific
GNSS. Differential corrections can be provided for up to 3 signals per GNSS.
\-- ASN1START
GNSS-DifferentialCorrections ::= SEQUENCE {
dgnss-RefTime INTEGER (0..3599),
dgnss-SgnTypeList DGNSS-SgnTypeList,
...
}
DGNSS-SgnTypeList ::= SEQUENCE (SIZE (1..3)) OF DGNSS-SgnTypeElement
DGNSS-SgnTypeElement ::= SEQUENCE {
gnss-SignalID GNSS-SignalID,
gnss-StatusHealth INTEGER (0..7),
dgnss-SatList DGNSS-SatList,
...
}
DGNSS-SatList ::= SEQUENCE (SIZE (1..64)) OF DGNSS-CorrectionsElement
DGNSS-CorrectionsElement ::= SEQUENCE {
svID SV-ID,
iod BIT STRING (SIZE(11)),
udre INTEGER (0..3),
pseudoRangeCor INTEGER (-2047..2047),
rangeRateCor INTEGER (-127..127),
udreGrowthRate INTEGER (0..7) OPTIONAL, -- Need ON
udreValidityTime INTEGER (0..7) OPTIONAL, -- Need ON
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | _GNSS-DifferentialCorrections field descriptions_ | +----------------------------------------------------------------------+ | **_dgnss-RefTime_** | | | | This field specifies the time for which the DGNSS corrections are | | valid, modulo 1 hour. _dgnss-RefTime_ is given in GNSS specific | | system time. | | | | Scale factor 1‑second. | +----------------------------------------------------------------------+ | **_dgnss-SgnTypeList_** | | | | **_This list includes differential correction data for different | | GNSS signal types, identified by_ * GNSS-SignalID**.**_| +----------------------------------------------------------------------+ |_** gnss-StatusHealth** _| | | |_** This field specifies** _the status of the differential | | corrections. The values of this field and their respective meanings | | are defined as in table_** gnss-StatusHealth Value to Indication | | relation below.**_| | | | The first six values in this field indicate valid differential | | corrections. When using the values described below, the \"UDRE Scale | | Factor\" value is applied to the UDRE values contained in the | | element. The purpose is to indicate an estimate in the amount of | | error in the corrections. | | | | The value \"110\" indicates that the source of the differential | | corrections (e.g., reference station or external DGNSS network) is | | currently not being monitored. The value \"111\" indicates that the | | corrections provided by the source are invalid, as judged by the | | source. | +----------------------------------------------------------------------+ |_** dgnss-SatList** _| | | |_** This list includes differential correction data for different | | GNSS satellites, identified by**SV-ID**.**_| +----------------------------------------------------------------------+ |_** iod** _| | | | This field specifies the Issue of Data field which contains the | | identity for the_ GNSS-NavigationModel.* | +----------------------------------------------------------------------+ | **_udre_**| | | | This field provides an estimate of the uncertainty (1-σ) in the | | corrections for the particular satellite. The value in this field | | shall be multiplied by the UDRE Scale Factor in the | |_gnss-StatusHealth _field to determine the final UDRE estimate for | | the particular satellite. The meanings of the values for this field | | are shown in the table_ udre Value* to Indication relation below. | +----------------------------------------------------------------------+ | _**pseudoRangeCor** _| | | | This field specifies the correction to the pseudorange for the | | particular satellite at_ dgnss-RefTime _, t~0~. The value of this | | field is given in meters and the scale factor is 0.32 meters in the | | range of ±655.04 meters. The method of calculating this field is | | described in [11]. | | | | If the location server has received a request for GNSS assistance | | data from a target device which included a request for the GNSS | | Navigation Model and DGNSS, the location server shall determine, for | | each satellite, if the navigation model stored by the target device | | is still suitable for use with DGNSS corrections and if so and if | | DGNSS corrections are supported the location server should send | | DGNSS corrections without including the GNSS Navigation Model. | | | | The_ iod _value sent for a satellite shall always be the IOD value | | that corresponds to the navigation model for which the pseudo-range | | corrections are applicable. | | | | The target device shall only use the_ pseudoRangeCor _value when the | | IOD value received matches its available navigation model. | | | | Pseudo-range corrections are provided with respect to GNSS specific | | geodetic datum (e.g., PZ-90.02 if_ GNSS‑ID* indicates GLONASS). | | | | Scale factor 0.32 meters. | +----------------------------------------------------------------------+ | **_rangeRateCor_**| | | | This field specifies the rate-of-change of the pseudorange | | correction for the particular satellite, using the satellite | | ephemeris and clock corrections identified by the _iod _field. The | | value of this field is given in meters per second and the resolution | | is 0.032 meters/sec in the range of ±4.064 meters/sec. For some time | | t~1~ > t~0~, the corrections for _iod _are estimated by | | | | PRC(t~1~, IOD) = PRC(t~0~, IOD) + RRC(t~0~,IOD)⋅(t~1~ - t~0~) , | | | | and the target device uses this to correct the pseudorange it | | measures at t~1~, PR~m~(t~1~,IOD), by | | | | PR(t~1~, IOD) = PR~m~(t~1~, IOD) + PRC(t~1~, IOD) . | | | | The location server shall always send the RRC value that corresponds | | to the PRC value that it sends. The target device shall only use the | | RRC value when the_ iod* value received matches its available | | navigation model. | | | | Scale factor 0.032 meters/second. | +----------------------------------------------------------------------+ | _**udreGrowthRate** _| | | | This field provides an estimate of the growth rate of uncertainty | | (1-σ) in the corrections for the particular satellite identified by | |_ SV-ID _. The estimated UDRE at time value specified in the | |_ udreValidityTime t~1~_is calculated as follows: | | | | UDRE(_ t~0~_+_ t~1~_) = UDRE(_ t~0~_) ×_ udreGrowthRate ,_| | | | where_ t~0~_is the DGNSS Reference Time_ dgnss-RefTime _for which | | the corrections are valid,_ t~1~_is the_ udreValidityTime _| | | | field, UDRE(_ t~0~_) is the value of the_ udre _field, and | |_ udreGrowthRate _field is the factor as shown in the table Value of | |_ udreGrowthRate* to Indication relation below. | +----------------------------------------------------------------------+ | **_udreValidityTime_ __| | | | This field specifies the time when the_ udreGrowthRate_ field | | applies and is included if _udreGrowthRate_ is included. The meaning | | of the values for this field is as shown in the table Value of | | _udreValidityTime_ to Indication relation below. | +----------------------------------------------------------------------+
_gnss-StatusHealth_ Value to Indication relation
* * *
**_gnss-StatusHealth Value_** Indication 000 UDRE Scale Factor = 1.0 001 UDRE
Scale Factor = 0.75 010 UDRE Scale Factor = 0.5 011 UDRE Scale Factor = 0.3
100 UDRE Scale Factor = 0.2 101 UDRE Scale Factor = 0.1 110 Reference Station
Transmission Not Monitored 111 Data is invalid - disregard
* * *
_udre Value_ to Indication relation
* * *
_udre_ Value Indication 00 UDRE ≤ 1.0 m 01 1.0 m \ 43m
* * *
Bit toPolarity Indication relation
* * *
Value Polarity Indication 0 Data Direct, carrier phase not continuous 1 Data
Inverted, carrier phase not continuous 2 Data Direct, carrier phase continuous
3 Data Inverted, carrier phase continuous
* * *
floating-point representation
* * *
Index Mantissa Exponent Floating-Point value, x~i~ Pseudorange value, P 0 000
000 0.5 P \ rssi: AP signal strength at the target | | > | | > rtt: Round Trip Time between target and AP | +----------------------------------------------------------------------+
#### 6.5.6.5 WLAN Capability Information Request
#### _\--_ _WLAN-RequestCapabilities_
The IE _WLAN-RequestCapabilities_ is used by the location server to request
WLAN positioning capabilities information from a target device.
\-- ASN1START
WLAN-RequestCapabilities-r13 ::= SEQUENCE {
...
}
\-- ASN1STOP
#### 6.5.6.6 WLAN Error Elements
#### _\--_ _WLAN-Error_
The IE _WLAN-Error_ is used by the location server or target device to provide
error reasons for WLAN positioning to the target device or location server,
respectively.
\-- ASN1START
WLAN-Error-r13 ::= CHOICE {
locationServerErrorCauses-r13 WLAN-LocationServerErrorCauses-r13,
targetDeviceErrorCauses-r13 WLAN-TargetDeviceErrorCauses-r13,
...
}
\-- ASN1STOP
#### _\--_ _WLAN-LocationServerErrorCauses_
The IE _WLAN-LocationServerErrorCauses_ is used by the location server to
provide error reasons for WLAN positioning to the target device.
\-- ASN1START
WLAN-LocationServerErrorCauses-r13 ::= SEQUENCE {
cause-r13 ENUMERATED {undefined, ...},
...
}
\-- ASN1STOP
#### _\--_ _WLAN-TargetDeviceErrorCauses_
The IE _WLAN-TargetDeviceErrorCauses_ is used by the target device to provide
error reasons for WLAN positioning to the location server.
\-- ASN1START
WLAN-TargetDeviceErrorCauses-r13 ::= SEQUENCE {
cause-r13 ENUMERATED {undefined,
requestedMeasurementsNotAvailable,
notAllrequestedMeasurementsPossible,
...
},
wlan-AP-RSSI-MeasurementNotPossible-r13 NULL OPTIONAL,
wlan-AP-RTT-MeasurementNotPossible-r13 NULL OPTIONAL,
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_WLAN-TargetDeviceErrorCauses_** field descriptions | +----------------------------------------------------------------------+ | **_cause_** | | | | This field provides a WLAN specific error cause. If the cause value | | is '_notAllRequestedMeasurementsPossible_ ', the target device was | | not able to provide all requested WLAN measurements (but may be able | | to provide some measurements). In this case, the target device | | should include any of the '_wlan‑AP‑RSSI‑MeasurementNotPossible_ ', | | '_wlan‑AP‑RTT‑MeasurementNotPossible_ ' fields, as applicable. | +----------------------------------------------------------------------+
### 6.5.7 Bluetooth-based Positioning
#### 6.5.7.1 Bluetooth Location Information
#### _\--_ _BT-ProvideLocationInformation_
The IE _BT-ProvideLocationInformation_ is used by the target device to provide
measurements for one or more Bluetooth beacons to the location server. It may
also be used to provide Bluetooth positioning specific error reason.
\-- ASN1START
BT-ProvideLocationInformation-r13 ::= SEQUENCE {
bt-MeasurementInformation-r13 BT-MeasurementInformation-r13 OPTIONAL,
bt-Error-r13 BT-Error-r13 OPTIONAL,
...
}
\-- ASN1STOP
#### 6.5.7.2 BT Location Information Elements
#### _\--_ _BT-MeasurementInformation_
\-- ASN1START
BT-MeasurementInformation-r13 ::= SEQUENCE {
measurementReferenceTime-r13 UTCTime OPTIONAL,
bt-MeasurementList-r13 BT-MeasurementList-r13 OPTIONAL,
...
}
BT-MeasurementList-r13 ::= SEQUENCE (SIZE(1..maxBT-Beacon-r13)) OF BT-
MeasurementElement-r13
BT-MeasurementElement-r13 ::= SEQUENCE {
btAddr-r13 BIT STRING (SIZE (48)),
rssi-r13 INTEGER (-128..127) OPTIONAL,
...
}
maxBT-Beacon-r13 INTEGER ::= 32
\-- ASN1STOP
+----------------------------------------------------------------------+ | _BT-MeasurementInformation field descriptions_ | +----------------------------------------------------------------------+ | **_measurementReferenceTime_** | | | | This field provides the UTC time when the BT measurements are | | performed and should take the form of _YYMMDDhhmmssZ_. | +----------------------------------------------------------------------+ | **_bt-MeasurementList_** | | | | **_This field provides the BT measurements for up to 32 BT | | beacons._** | +----------------------------------------------------------------------+ | **_btAddr_** | | | | This field specifies the Bluetooth public address of the BT beacon | | [25]. | +----------------------------------------------------------------------+ | **_rssi_** | | | | This field provides the beacon received signal strength indicator | | (RSSI) in dBm. | +----------------------------------------------------------------------+
#### 6.5.7.3 Bluetooth Location Information Request
#### _\--_ _BT-RequestLocationInformation_
The IE _BT-RequestLocationInformation_ is used by the location server to
request Bluetooth measurements from a target device.
\-- ASN1START
BT-RequestLocationInformation-r13 ::= SEQUENCE {
requestedMeasurements-r13 BIT STRING {
rssi (0)} (SIZE(1..8)),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_BT-RequestLocationInformation_** field descriptions | +----------------------------------------------------------------------+ | **_requestedMeasurements_** | | | | This field specifies the BT measurements requested. This is | | represented by a bit string, with a one‑value at the bit position | | means the particular measurement is requested; a zero‑value means | | not requested. The following measurement requests can be included. | | | | rssi: BT beacon signal strength at the target | +----------------------------------------------------------------------+
#### 6.5.7.4 Bluetooth Capability Information
#### _\--_ _BT-ProvideCapabilities_
The IE _BT-ProvideCapabilites_ is used by the target device to provide its
capabilities for Bluetooth positioning to the location server.
\-- ASN1START
BT-ProvideCapabilities-r13 ::= SEQUENCE {
bt-Modes-r13 BIT STRING { standalone (0),
ue-assisted (1)} (SIZE (1..8)),
bt-MeasSupported-r13 BIT STRING { rssi-r13 (0)} (SIZE (1..8)),
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_BT-ProvideCapabilities_** field descriptions | +----------------------------------------------------------------------+ | **_bt-Modes_** | | | | This field specifies the Bluetooth mode(s) supported by the target | | device. This is represented by a bit string, with a one value at the | | bit position means the Bluetooth mode is supported; a zero value | | means not supported. | +----------------------------------------------------------------------+ | **_bt-MeasSupported_** | | | | This field specifies the BT measurements supported by the target | | device. This is represented by a bit string, with a one‑value at the | | bit position means the particular measurement is supported; a | | zero‑value means not supported. A zero-value in all bit positions in | | the bit string means only the basic BT positioning method is | | supported by the target device which is reporting of the BT beacon | | identity. The following bits are assigned for the indicated | | measurements. | | | | > rssi: BT beacon signal strength at the target device | +----------------------------------------------------------------------+
#### 6.5.7.5 Bluetooth Capability Information Request
#### _\--_ _BT-RequestCapabilities_
The IE _BT-RequestCapabilities_ is used by the location server to request
Bluetooth positioning capabilities from a target device.
\-- ASN1START
BT-RequestCapabilities-r13 ::= SEQUENCE {
...
}
\-- ASN1STOP
#### 6.5.7.6 BT Error Elements
#### _\--_ _BT-Error_
The IE _BT-Error_ is used by the location server or target device to provide
error reasons for Bluetooth positioning to the target device or location
server, respectively.
\-- ASN1START
BT-Error-r13 ::= CHOICE {
locationServerErrorCauses-r13 BT-LocationServerErrorCauses-r13,
targetDeviceErrorCauses-r13 BT-TargetDeviceErrorCauses-r13,
...
}
\-- ASN1STOP
#### _\--_ _BT-LocationServerErrorCauses_
The IE _BT-LocationServerErrorCauses_ is used by the location server to
provide error reasons for Bluetooth positioning to the target device.
\-- ASN1START
BT-LocationServerErrorCauses-r13 ::= SEQUENCE {
cause-r13 ENUMERATED {undefined, ...},
...
}
\-- ASN1STOP
#### \-- _BT-TargetDeviceErrorCauses_
The IE _BT-TargetDeviceErrorCauses_ is used by the target device to provide
error reasons for Bluetooth positioning to the location server.
\-- ASN1START
BT-TargetDeviceErrorCauses-r13 ::= SEQUENCE {
cause-r13 ENUMERATED {undefined,
requestedMeasurementsNotAvailable,
notAllrequestedMeasurementsPossible,
...
},
bt-Beacon-rssiMeasurementNotPossible-r13 NULL OPTIONAL,
...
}
\-- ASN1STOP
+----------------------------------------------------------------------+ | **_BT-TargetDeviceErrorCauses_** field descriptions | +----------------------------------------------------------------------+ | **_cause_** | | | | This field provides a Bluetooth specific error cause. If the cause | | value is '_notAllRequestedMeasurementsPossible_ ', the target device | | was not able to provide all requested Bluetooth measurements (but | | may be able to provide some measurements). In this case, the target | | device should include '_bt-Beacon-rssiMeasurementNotPossible_ ' | | field. | +----------------------------------------------------------------------+
#### _\-- End of LPP-PDU-Definitions_
\-- ASN1START
END
\-- ASN1STOP
#