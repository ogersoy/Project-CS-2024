# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the X2 user plane protocol being used over the
X2 interface.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[3] 3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling Protocol
User Plane (GTPv1-U)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Master eNB:** as defined in TS 36.300 [2].
**Secondary eNB:** as defined in TS 36.300 [2].
**Split bearer** : as defined in TS 36.300 [2].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
DC Dual Connectivity
DL Downlink
E-RAB E-UTRAN Radio Access Bearer
MeNB Master eNB
SeNB Secondary eNB
UL Uplink
UP User Plane
X2 UP X2 User Plane
# 4 General
## 4.1 General aspects
The X2 user plane (X2 UP) protocol is located in the User Plane of the Radio
Network layer over the X2 interface.
The X2 UP protocol is used to convey control information related to the user
data flow management of E-RABs.
Each X2 UP protocol instance is associated to one E-RAB only.
This version of the present document defines the X2 UP protocol in the context
of dual connectivity only, more specifically, only for X2 user data bearers
setup for E-RABs configured with the split bearer option.
If configured, X2 UP protocol instances exist at the eNBs between which the X2
user data bearers are setup, specifically for dual connectivity between the
MeNB and the SeNB.
NOTE: X2 user data bearers may be setup for data forwarding purposes during X2
HO or during DC related mobility, however, these X2 user data bearers do not
require the execution of any additional E-RAB related UP protocol functions
related to an X2 UP protocol instance.
In this version of the present document, X2 UP protocol data is conveyed by
GTP-U protocol means, more specifically, by means of the \"RAN Container\"
GTP-U extension header as defined in TS 29.281 [3].
# 5 X2 user plane protocol
## 5.1 General
The X2 UP protocol layer is using services of the transport network layer in
order to allow flow control of user data packets transferred over the X2
interface.
## 5.2 X2 user plane protocol layer services
The following functions are provided by the X2 UP protocol:
\- Provision of X2 UP specific sequence number information for user data
transferred from the MeNB to the SeNB for a specific E-RAB configured with the
split bearer option;
\- Information of successful in sequence delivery of PDCP PDUs to the UE from
SeNB for user data associated with a specific E-RAB configured with the split
bearer option;
\- Information of PDCP PDUs that were not delivered to the UE;
\- Information of the currently desired buffer size at the SeNB for
transmitting to the UE user data associated with a specific E-RAB configured
with the split bearer option;
\- Information of the currently minimum desired buffer size at the SeNB for
transmitting to the UE user data associated with all E-RABs configured with
the split bearer option.
## 5.3 Services expected from the X2 Transport Network Layer
The X2 user plane protocol layer expects the following services from the
Transport Network Layer:
\- Transfer of user data.
## 5.4 Elementary procedures
### 5.4.1 Transfer of Downlink User Data
#### 5.4.1.1 Successful operation
The purpose of the Transfer of Downlink User Data procedure is to provide X2-U
specific sequence number information at the transfer of user data carrying a
DL PDCP PDU from the MeNB to the SeNB via the X2-U interface.
An X2 user plane instance making use of the Transfer of Downlink User Data
procedure is associated to a single E-RAB only. The Transfer of Downlink User
Data procedure is invoked whenever user data for that particular E-RAB needs
to be sent across the X2-U interface.
The MeNB shall assign consecutive X2-U sequence numbers to each transferred
X2-U packet.
The SeNB shall detect whether an X2-U packet was lost and memorise the
respective sequence number after it has declared the respective X2-U packet as
being \"lost\".
The SeNB shall transfer the remaining PDCP PDUs towards the UE and memorise
the highest PDCP PDU sequence number of the PDCP PDU that was successfully
delivered in sequence towards the UE.
NOTE: The Transfer of Downlink User Data procedure and the associated feedback
of lost X2-U packets assist the MeNB in avoiding PDCP HFN de-synchronisation.
If an E-UTRAN deployment decides to not use the Transfer of Downlink User Data
procedure, PDCP HFN synchronization should be ensured by other means.
Figure 5.4.1.1-1: Successful Transfer of Downlink User Data
#### 5.4.1.2 Unsuccessful operation
Void.
### 5.4.2 Downlink Data Delivery Status
#### 5.4.2.1 Successful operation
The purpose of the Downlink Data Delivery Status procedure is to provide
feedback from the SeNB to the MeNB to allow the MeNB to control the downlink
user data flow via the SeNB for the respective E-RAB. The SeNB may also
transfer uplink user data for the concerned E-RAB to the MeNB together with a
DL DATA DELIVERY STATUS frame within the same GTP-U PDU.
When the SeNB decides to trigger the Feedback for Downlink Data Delivery
procedure it shall report:
a) the highest PDCP PDU sequence number successfully delivered in sequence to
the UE among those PDCP PDUs received from the MeNB;
b) the desired buffer size in bytes for the concerned E-RAB;
c) the minimum desired buffer size in bytes for the UE;
d) the X2-U packets that were declared as being \"lost\" by the SeNB and have
not yet been reported to the MeNB within the DL DATA DELIVERY STATUS frame.
NOTE: If an E-UTRAN deployment has decided not to use the Transfer of Downlink
User Data procedure, d) above is not applicable.
The DL DATA DELIVERY STATUS frame shall also include an indication whether the
frame is the last DL status report received in the course of releasing a
bearer from the SeNB. When receiving such indication, if applicable, the MeNB
considers that no more UL data is to be expected from the SeNB.
The MeNB, when receiving the DL DATA DELIVERY STATUS frame:
\- regards the desired buffer size under b) and c) above as the amount of data
desired from the SeNB being declared
\- from the PDCP sequence number reported under a) above within the same
frame, as well as from the most recently reported PDCP sequence number(s) of
all other E-RABs established for the UE;
\- as the momentary desired buffer sizes, independent of buffer sizes
indicated in the past.
\- is allowed to remove the buffered PDCP PDUs according to the feedback of
successfully delivered PDCP PDUs;
\- decides upon the actions necessary to take for PDCP PDUs reported other
than successfully delivered.
After being reported to the MeNB, the SeNB removes the respective PDCP
sequence numbers.
Figure 5.4.2.1-1: Successful Downlink Data Delivery Status
#### 5.4.2.2 Unsuccessful operation
Void.
## 5.5 Elements for the X2 user plane protocol
### 5.5.1 General
In the present document the structure of frames are specified by using figures
similar to figure 5.5.1-1.
Bits | 
> Number of Octets
|  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
Field 1 | Field 2 | 1 | Octet 1 |  |  |  |  |  |   
Field 3 | Field 4 | 2 | Octet 2 |  |  |  |  |  |   
Field 4 continue | Spare |  | Octet 3 |  |  |  |  |  |   
Field 6 | 2 | Octet 4 Octet 5 |  |  |  |  |  |  |   
Field 6 continue | Padding |  |  |  |  |  |  |  |   
Spare extension | 0-m |  |  |  |  |  |  |  |   
Figure 5.5.1-1: Example frame format
Unless otherwise indicated, fields which consist of multiple bits within an
octet have the most significant bit located at the higher bit position
(indicated above frame in figure 5.5.1-1). In addition, if a field spans
several octets, most significant bits are located in lower numbered octets
(right of frame in figure 5.5.1-1).
On the X2 interface, the frame is transmitted starting from the lowest
numbered octet. Within each octet, the bits are sent according decreasing bit
position (bit position 7 first).
Spare bits should be set to \"0\" by the sender and should not be checked by
the receiver.
The header part of the frame is always an integer number of octets. The
payload part is octet aligned (by adding \'Padding\' when needed).
The receiver should be able to remove an additional spare extension field that
may be present at the end of a frame.\ See description of Spare extension
field.
### 5.5.2 Frame format for the X2 user plane protocol
#### 5.5.2.1 DL USER DATA (PDU Type 0)
This frame format is defined to allow the SeNB to detect lost X2-U packets and
is associated with the transfer of a Downlink PDCP PDU over the X2-U interface
when the length of the PDCP SN is less than 16 bits.
The following shows the respective DL USER DATA frame.
+----------------------+--------------------+---+---+---+---+---+---+---+ | Bits | > Number of Octets | | | | | | | | +----------------------+--------------------+---+---+---+---+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +----------------------+--------------------+---+---+---+---+---+---+---+ | PDU Type (=0) | spare | 1 | | | | | | | +----------------------+--------------------+---+---+---+---+---+---+---+ | X2-U Sequence Number | 2 | | | | | | | | +----------------------+--------------------+---+---+---+---+---+---+---+ | | | | | | | | | | +----------------------+--------------------+---+---+---+---+---+---+---+ | Spare extension | 0-4 | | | | | | | | +----------------------+--------------------+---+---+---+---+---+---+---+
Figure 5.5.2.1-1: DL USER DATA (PDU Type 0) Format
#### 5.5.2.2 DL DATA DELIVERY STATUS (PDU Type 1)
This frame format is defined to transfer feedback to allow the receiving MeNB
to control the downlink user data flow via the SeNB when the length of the
PDCP SN is less than 16 bits.
+------------+------------+------------+------------+---+---+---+---+---+ | Bits | > Number | | | | | | | | | | > of | | | | | | | | | | > Octets | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +------------+------------+------------+------------+---+---+---+---+---+ | PDU Type | Spare | Final | Lost | 1 | | | | | | (=1) | | Frame Ind. | Packet | | | | | | | | | | Report | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Highest | 2 | | | | | | | | | su | | | | | | | | | | ccessfully | | | | | | | | | | delivered | | | | | | | | | | PDCP | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Desired | 4 | | | | | | | | | buffer | | | | | | | | | | size for | | | | | | | | | | the E-RAB | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Minimum | 4 | | | | | | | | | desired | | | | | | | | | | buffer | | | | | | | | | | size for | | | | | | | | | | the UE | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Number of | 1 | | | | | | | | | lost X2-U | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | | ranges | | | | | | | | | | reported | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Start of | 4* | | | | | | | | | lost X2-U | (Number of | | | | | | | | | Sequence | reported | | | | | | | | | Number | lost X2-u | | | | | | | | | range | SN ranges) | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | End of | | | | | | | | | | lost X2-U | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | | range | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Spare | 0-4 | | | | | | | | | extension | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+
Figure 5.5.2.2-1: DL DATA DELIVERY STATUS (PDU Type 1) Format
#### 5.5.2.3 DL DATA DELIVERY STATUS EXTENDED (PDU Type 2)
This frame format is defined to transfer feedback to allow the receiving MeNB
to control the downlink user data flow via the SeNB when the length of the
PDCP SN is 18 bits.
+------------+------------+------------+------------+---+---+---+---+---+ | Bits | > Number | | | | | | | | | | > of | | | | | | | | | | > Octets | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +------------+------------+------------+------------+---+---+---+---+---+ | PDU Type | Spare | Final | Lost | 1 | | | | | | (=2) | | Frame Ind. | Packet | | | | | | | | | | Report | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Highest | 3 | | | | | | | | | su | | | | | | | | | | ccessfully | | | | | | | | | | delivered | | | | | | | | | | PDCP | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | | Extended | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Desired | 4 | | | | | | | | | buffer | | | | | | | | | | size for | | | | | | | | | | the E-RAB | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Minimum | 4 | | | | | | | | | desired | | | | | | | | | | buffer | | | | | | | | | | size for | | | | | | | | | | the UE | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Number of | 1 | | | | | | | | | lost X2-U | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | | ranges | | | | | | | | | | reported | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Start of | 6* | | | | | | | | | lost X2-U | (Number of | | | | | | | | | Sequence | reported | | | | | | | | | Number | lost X2-U | | | | | | | | | range | SN ranges) | | | | | | | | | Extended | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | End of | | | | | | | | | | lost X2-U | | | | | | | | | | Sequence | | | | | | | | | | Number | | | | | | | | | | range | | | | | | | | | | Extended | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+ | Spare | 1-7 | | | | | | | | | extension | | | | | | | | | +------------+------------+------------+------------+---+---+---+---+---+
Figure 5.5.2.3-1: DL DATA DELIVERY STATUS EXTENDED (PDU Type 2) Format
#### 5.5.2.4 DL USER DATA EXTENDED (PDU Type 3)
This frame format is defined to allow the SeNB to detect lost X2-U packets and
is associated with the transfer of a Downlink PDCP PDU over the X2-U interface
when the length of PDCP SN is 18 bits.
The following shows the respective DL USER DATA EXTENDED frame.
* * *
Bits Number of Octets  
7 6 5 4 3 2 1 0  
PDU Type (=3) spare 1  
X2-U Sequence Number Extended 3  
Spare extension 0-4
* * *
Figure 5.5.2.4-1: DL USER DATA (PDU Type 3) Format
### 5.5.3 Coding of information elements in frames
#### 5.5.3.1 PDU Type
**Description:** The PDU Type indicates the structure of the X2 UP frame. The
field takes the value of the PDU Type it identifies; i.e. \"0\" for PDU Type
0. The PDU type is in bit 4 to bit 7 in the first octet of the frame.
**Value range:** {0=DL USER DATA, 1=DL DATA DELIVERY STATUS, 2=DL DATA
DELIVERY STATUS EXTENDED, 3=DL USER DATA EXTENDED, 4-15=reserved for future
PDU type extensions}
**Field length:** 4 bits
#### 5.5.3.2 Spare
**Description:** The spare field is set to \"0\" by the sender and should not
be interpreted by the receiver. This field is reserved for later versions.
**Value range:** (0--2^n^-1).
**Field Length:** n bits.
#### 5.5.3.3 X2-U Sequence Number
**Description:** This parameter indicates the X2-U sequence number as assigned
by the respective eNB when the length of PDCP SN is less than 16 bits.
**Value range:** {0..2^16^-1}.
**Field length:** 2 octets.
#### 5.5.3.4 Lost Packet Report
**Description:** This parameter indicates the presence of a list of lost X2-U
packets in the respective X2 UP frame.
**Value range:** {0=Lost Frame List not present, 1=Lost Frame List present}.
**Field length:** 1 bit.
#### 5.5.3.5 Final Frame Indication
**Description:** This parameter indicates whether the frame is the last DL
status report as described in clause 5.4.2.1.
**Value range:** {0=Frame is not final, 1= Frame is final}.
**Field length:** 1 bit.
#### 5.5.3.6 Highest successfully delivered PDCP Sequence Number
**Description:** This parameter indicates feedback about the in-sequence
delivery status of PDCP PDUs at the SeNB towards the UE when the length of the
PDCP SN is less than 16 bits.
**Value range:** {0..2^15^-1}.
**Field length:** 2 octets.
#### 5.5.3.7 Desired buffer size for the E-RAB
**Description:** This parameter indicates the desired buffer size for the
concerned E-RAB as specified in clause 5.4.2.1.
**Value range:** {0..2^32^-1}.
**Field length:** 4 octets.
#### 5.5.3.8 Minimum desired buffer size for the UE
**Description:** This parameter indicates the minimum desired buffer size for
all E-RABs established for the UE as specified in clause 5.4.2.1.
**Value range:** {0..2^32^-1}.
**Field length:** 4 octets.
#### 5.5.3.9 Number of lost X2-U Sequence Number ranges reported
**Description:** This parameter indicates the number of X2-U Sequence Number
ranges reported to be lost.
**Value range:** {1..256}.
**Field length:** 1 octet.
#### 5.5.3.10 Start of lost X2-U Sequence Number range
**Description:** This parameter indicates the start of an X2-U sequence number
range.
**Value range:** {0..2^16^-1}.
**Field length:** 2 octets.
#### 5.5.3.11 End of lost X2-U Sequence Number range
**Description:** This parameter indicates the end of an X2-U sequence number
range.
**Value range:** {0..2^16^-1}.
**Field length:** 2 octets.
#### 5.5.3.12 Spare extension
**Description:** The spare extension field shall not be sent. The receiver
should be capable of receiving a spare extension. The spare extension should
not be interpreted by the receiver, since in later versions of the present
document additional new fields might be added in place of the spare extension.
The spare extension can be an integer number of octets carrying new fields or
additional information; the maximum length of the spare extension field (m)
depends on the PDU type.
**Value range:** 0--2^m*8^-1.
**Field Length:** 0--m octets. For the PDU Types defined in the present
document m=4.
#### 5.5.3.13 Highest successfully delivered PDCP Sequence Number Extended
**Description:** This parameter indicates feedback about the in-sequence
delivery status of PDCP PDUs at the SeNB towards the UE when the length of the
PDCP SN is 18 bits.
**Value range:** {0..2^18^-1}.
**Field length:** 3 octets.
#### 5.5.3.14 Start of lost X2-U Sequence Number range Extended
**Description:** This parameter indicates the start of an X2-U sequence number
range when the length of the PDCP SN is 18 bits.
**Value range:** {0..2^24^-1}.
**Field length:** 3 octets.
#### 5.5.3.15 End of lost X2-U Sequence Number range Extended
**Description:** This parameter indicates the end of an X2-U sequence number
range when the length of the PDCP SN is 18 bits.
**Value range:** {0..2^24^-1}.
**Field length:** 3 octets.
#### 5.5.3.16 X2-U Sequence Number Extended
**Description:** This parameter indicates the X2-U sequence number as assigned
by the respective eNB when the length of PDCP SN is 18 bits.
**Value range:** {0..2^24^-1}.
**Field length:** 3 octets.
### 5.5.4 Timers
Not applicable.
## 5.6 Handling of unknown, unforeseen and erroneous protocol data
Void.
#