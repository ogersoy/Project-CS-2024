# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
This specification describes the functional requirements and information flows
that generate procedures between the Multimedia Resource Function Controller
(MRFC) and the Multimedia Resource Function Processor (MRFP), the Mp
Interface.
This specification is limited to information flows relevant to the Mp
Interface; in order to define these procedures and make the functional
requirements clear some triggers from an external interface may be described;
these may be specified within the Mr interface for example or within an AS in
which the MRFC function resides. However for the overall stage 2 procedures of
IMS see 3GPP TS 23.228 [1].
The protocol on the Mp interface is defined to comply with ITU-T H.248.1
Gateway Control Protocol; see [3].The goal of this specification is to provide
the input to defining a formal Profile within the H.248 protocol toolbox
specifically for the Mp application.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[2] 3GPP TS 23.002: \"Network architecture\".
[3] ITU-T Recommendation H.248.1 (05/2002), Gateway control protocol: Version
2 + Corrigendum 1 (03/2004) and ITU-T Recommendation H.248.1 (09/2005),
Gateway control protocol: Version 3 for Floor Control requirements.
[4] 3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network
(CN) subsystem; Stage 3\".
[5] 3GPP TS 26.244: \"Transparent end-to-end packet switched streaming service
(PSS); 3GPP file format (3GP)\".
[6] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[7] 3GPP TS 23.205: \"Bearer independent circuit-switched core network; Stage
2\".
[8] Void.
[9] 3GPP TS 29.163: \"Interworking between the IP Multimedia (IM) Core Network
(CN) subsystem and Circuit Switched (CS) networks\".
[10] IETF RFC 2833: \"RTP Payload for DTMF Digits, Telephony Tones and
Telephony Signals\".
[11] W3C Recommendation (September 2004): \"Speech Synthesis Markup Language
(SSML) Version 1.0\".
[12] W3C Recommendation (September 2004): \"Speech Recognition Grammar
Specification (SRGS) Version 1.0\".
[13] W3C Recommendation (September 2005): \"Extensible MultiModal Annotation
markup language (EMMA) (draft work in progress)\".
[14] 3GPP TS 32.260: \"Telecommunication management; Charging management; IP
Multimedia Subsystem (IMS) charging\".
[15] W3C Recommendation (November 2000): \"Natural Language Semantics Markup
Language (NLSML) for the Speech Interface Framework\".
[16] 3GPP TS 29.333: \"Multimedia Resource Function Controller (MRFC) \--
Multimedia Resource Function Processor (MRFP) Mp Interface - Stage 3\".
[17] 3GPP TS 24.247: \"Messaging service using the IP Multimedia (IM) Core
Network (CN) subsystem - Stage 3\".
[18] IETF RFC 4975: \"The Message Session Relay Protocol (MSRP)\".
[19] IETF RFC 4376: \"Requirements for Floor Control Protocols\".
[20] IETF RFC 4582: \"The Binary Floor Control Protocol (BFCP)\".
[21] IETF RFC 4583: \"Session Description Protocol (SDP) Format for Binary
Floor Control Protocol (BFCP) Streams\".
[22] 3GPP TS 26.140: \"Multimedia Messaging Service; Media formats and
codecs\".
[23] 3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia Telephony;
Media handling and interaction\".
[24] IETF RFC 3168: \"The Addition of Explicit Congestion Notification (ECN)
to IP\".
[25] IETF RFC 6679: \"Explicit Congestion Notification (ECN) for RTP over
UDP\".
[26] 3GPP TS 22.153: \"Multimedia Priority Service\".
[27] IETF RFC 5285: \"A General Mechanism for RTP Header Extensions\".
> [28] IETF RFC 6236: \"Negotiation of Generic Image Attributes in the Session
> Description Protocol (SDP)\".
[29] IETF RFC 5245: \"Interactive Connectivity Establishment (ICE): A Protocol
for Network Address Translator (NAT) Traversal for Offer/Answer Protocols\".
[30] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and
SDP\".
[31] 3GPP TS 33.328: \"IMS Media Plane Security\".
[32] IETF RFC 5246: \"The Transport Layer Security (TLS) Protocol Version
1.2\".
[33] IETF RFC 6043: \"MIKEY-TICKET: Ticket-Based Modes of Key Distribution in
Multimedia Internet KEYing (MIKEY)\".
[34] IETF RFC 4279: \"Pre-Shared Key Ciphersuites for Transport Layer Security
(TLS)\".
[35] IETF RFC 4567: \"Key Management Extensions for Session Description
Protocol (SDP) and Real Time Streaming Protocol (RTSP)\".
[36] IETF RFC 4145: \"TCP-Based Media Transport in the Session Description
Protocol (SDP)\".
[37] IETF RFC 3830: \"MIKEY: Multimedia Internet KEYing\".
[38] IETF RFC 793: \"Transmission Control Protocol -- DARPA Internet Program
-- Protocol Specification\".
[39] IETF RFC 8122: \"Connection-Oriented Media Transport over the Transport
Layer Security (TLS) Protocol in the Session Description Protocol (SDP)\".
[40] IETF RFC 6714: \"Connection Establishment for Media Anchoring (CEMA) for
the Message Session Relay Protocol (MSRP)\".
[41] 3GPP TS 23.334: \"IMS Application Level Gateway (IMS-ALG) -- IMS Access
Gateway (IMS-AGW) interface: Procedures Descriptions\".
[42] 3GPP TS 26.441: \"Codec for Enhanced Voice Services (EVS); General
Overview\".
[43] 3GPP TS 26.445: \"Codec for Enhanced Voice Services (EVS); Detailed
Algorithmic Description\".
[44] IETF RFC 4566: \"SDP: Session Description Protocol\".
[45] IETF RFC 4867: \"RTP Payload Format and File Storage Format for the
Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio
Codecs\".
[46] IETF RFC 5746: \"Transport Layer Security (TLS) Renegotiation Indication
Extension\".
[47] 3GPP TS 33.310: \"Network Domain Security (NDS); Authentication Framework
(AF)\".
[48] IETF RFC 8841: \"Session Description Protocol (SDP) Offer/Answer
Procedures for Stream Control Transmission Protocol (SCTP) over Datagram
Transport Layer Security (DTLS) Transport\".
[49] IETF RFC 8850: \"Controlling Multiple Streams for Telepresence (CLUE)
Protocol Data Channel\".
[50] IETF RFC 8864: \"Negotiation Data Channels Using the Session Description
Protocol (SDP)\".
> [51] IETF RFC 6525: \"Stream Control Transmission Protocol (SCTP) Stream
> Reconfiguration\".
[52] 3GPP TS 24.103: \"Telepresence using the IP Multimedia (IM) Core Network
(CN) Subsystem (IMS); Stage 3\".
[53] IETF RFC 5939: \"Session Description Protocol (SDP) Capability
Negotiation\".
[54] IETF RFC 4573: \"MIME Type Registration for RTP Payload Format for
H.224\".
[55] ITU-T Recommendation H.224 (01/2005): \"A real time control protocol for
simplex applications using the H.221 LSD/HSD/MLP channels\".
[56] ITU-T Recommendation H.281 (11/1994): \"A far end camera control protocol
for videoconferences using H.224\".
[57] Void.
[58] Void.
[59] Void.
[60] Void.
[61] Void.
[62] Void.
[63] Void.
[64] Void.
[65] IETF RFC 8842: \"Session Description Protocol (SDP) Offer/Answer
Considerations for Datagram Transport Layer Security (DTLS) and Transport
Layer Security (TLS)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [6] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [6].
> **CLUE:** The acronym for \"ControLling mUltiple streams for tElepresence\",
> which is the name of the IETF working group in which the requirements and
> protocol for telepresence are developed. CLUE-something refers to something
> that has been designed by the IETF CLUE working group, e.g, CLUE protocol
> and CLUE data channel.
>
> **End-to-end security:** media protection between the IMS UE and the MRFP
> without being terminated by any intermediary node.
**Full ICE:** The full implementation of the Interactive Connectivity
Establishment (ICE) specified in IETF RFC 5245 [29].
**ICE lite:** The lite implementation of the Interactive Connectivity
Establishment (ICE) specified in IETF RFC 5245 [29].
**Media Gateway:** See Recommendation H.248.1 [3].
**Media Gateway Controller:** See Recommendation H.248.1 [3].
**Multimedia Resource Function Controller:** See 3GPP TS 23.228 [1].
**Multimedia Resource Function Processor:** See 3GPP TS 23.228 [1].
For the purposes of the present document, the following terms and definitions
given in IETF RFC 3830 [37] apply:
**Crypto Session (CS)**
**Initiator**
**Responder**
For the purposes of the present document, the following terms and definitions
given in IETF RFC 6043 [33] apply:
**Traffic-Encrypting Key (TEK)**
**TEK Generation Key (TGK)**
**Ticket**
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Mr Interface between the MRFC and S-CSCF
Mp Interface between the MRFC and MRFP
Mb Interface between MRFP and the other bearer entity
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [6] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [6].
AMR Adaptive Multi-Rate
AMR-WB Adaptive Multi-Rate - WideBand
> AMR-WB IO Adaptive Multi-Rate - WideBand Inter-operable Mode, included in
> the EVS codec
APP APPlication-defined RTCP packet
ASR Automatic Speech Recognition
BFCP Binary Floor Control Protocol
CS Crypto Session
CVO Coordination of Video Orientation
DTMF Dual Tone Multi Frequency
DTLS Datagram Transport Layer Security
DTX Discontinuous Transmission
e2e End-to-end
ECN Explicit Congestion Notification
ECN-CE ECN Congestion Experienced
> EVS Enhanced Voice Services
EMMA Extensible MultiModal Annotation markup language
FECC Far End Camera Control
> ICE Interactive Connectivity Establishment
IP Internet Protocol
KMS Key Management Service
MGC Media Gateway Controller
MGW Media Gateway
MIKEY Multimedia Internet KEYing
MPS Multimedia Priority Service
MRFC Multimedia Resource Function Controller
MRFP Multimedia Resource Function Processor
MSRP Message Session Relay Protocol
NLSML Natural Language Semantics Markup Language
PSK Pre-Shared Key
ROI Region of Interest
RTCP RTP Control Protocol
RTP Real-time Transport Protocol
SCTP Stream Control Transmission Protocol
SDP Session Description Protocol
SDPCapNeg SDP Capability Negotiation
SIP Session Initiation Protocol
SRGS Speech Recognition Grammar Specification
SSML Speech Synthesis Markup Language
STUN Session Traversal Utilities for NAT
TCP Transmission Control Protocol
TEK Traffic Encryption Key
TGK TEK Generation Key
TLS Transport Layer Security
TP TelePresence
TTS Text to Speech
UDP User Datagram Protocol
URN Uniform Resource Name
VXML Voice Extensible Markup Language
# 4 Architecture
The architecture concerning the Multimedia Resource Function is presented in
Figure 4.1 below.
Figure 4.1: Architecture of MRF
The scope of this specification is limited to the area shown within the green
shading.
The MRF is split into Multimedia Resource Function Controller (MRFC) and
Multimedia Resource Function Processor (MRFP).
Tasks of the MRFC may consist of the following:
\- Control the media stream resources in the MRFP.
\- Interpret information coming from an AS and Sâ€‘CSCF (e.g. session
identifier) and control MRFP accordingly.
\- Generation of CDRs.
\- Advanced control of conferences (e.g. floor control)
Tasks of the MRFP may consist of the following:
\- Control of the bearer on the Mb reference point.
\- Provide resources to be controlled by the MRFC.
\- Mixing of incoming media streams (e.g. for multiple parties).
\- Media stream source (e.g. for multimedia announcements).
\- Media stream processing (e.g. audio transcoding, media analysis).
\- Manage access rights to shared resources in a conferencing environment
(e.g. floor control).
The Mp reference point allows an MRFC to control media stream resources
provided by an MRFP.
# 5 Functional Requirements
## 5.1 General
All functions are optional. Within a given function some components and
procedures might be optional to still support the function but some will be
required. Normative text in the following clauses thus describes requirements
for support within an optional feature where it is desired to differentiate
between optional and mandatory parts of the feature.
## 5.2 Play Tone
The MRFC shall request the MRFP to send tones to one, one of several, multiple
or all parties connected in a call/session with a given tone identifier for
each specific tone.
The MRFC may request the tone to be played continuously until requested to be
stopped.
The MRFC may include in the request the length of time that the tone shall be
played; the duration may be provisioned.
The MRFC may then request a notification from the MRFP when the tone is
completed.
The MRFC may request DTMF detection while playing a tone.
The MRFC may request that upon DTMF detection the MRFP stops playing a tone.
## 5.3 Play Announcement
The function of playing announcement is to play audio media streams to the
subscriber. The function can be used in services such as audio announcements,
mail box services, play back recorded audio etc.
The MRFC shall request the MRFP to play announcements to one, one of several,
multiple or all parties connected in a call/session.
The announcement may be referenced by identifiers that may be pre-configured,
or dynamically obtained from the same MRFP for example due to Audio Record.
The MRFC shall request sequences of predefined fixed announcements within one
request to the MRFP.
The MRFC may request announcements to be played in a loop until it commands
the MRFP to stop.
The MRFC may request the MRFP to play an announcement for a fixed number of
times.
The MRFC may request DTMF detection while playing an announcement.
The MRFC may request the MRFP to stop playing an announcement when a DTMF
digit is detected.
The MRFC may request the MRFP to add the following variants to the
announcements:
\- Date/Day/Month
\- Time
\- Digits (the announcement may contain a number of digits to be controlled by
the MRFC for example a telephone number)
\- Money (currency)
\- Integer (a value within the announcement that is controlled by the MRFC,
e.g. \"you are caller number 3 in the queue\")
\- Variants may have predefined default values for a given network.
The MRFC may request the MRFP to indicate when a specific announcement
previously requested has been played successfully.
The MRFP shall indicate error cases such as announcement not played
successfully.
## 5.4 Text to Speech
TTS (Text To Speech) is the process of automatic generation of speech output
from text or annotated text input.
The MRFC shall request the MRFP to play the text to one, one of several,
multiple or all parties connected in a call/session.
The text format shall comply with the SSML format as specified in [11].
The MRFC shall extract the SSML script from the VXML or other format XML
script if received
If the received text is another format than SSML, the MRFC shall generate a
SSML script that may include the basic SSML text and the language type.
The MRFC shall indicate to the MRFP the text-to-speech, by sending the SSML
script or sending an URI reference to this SSML script.
If the MRFC indicates the SSML script to the MRFP, the SSML text is sent
inline in a H.248 command of Mp; the size shall be limited to avoid the
segmentation in the Mp interface. The MRFC may remove unnecessary elements,
such as the comments element, from the SSML document, providing that the
result is a Conforming Speech Synthesis Markup Language Fragment as described
in clause 2.2.1 of SSML ref [11]. This is however outside the scope of the
current Mp specification work. If the SSML script size pre-processed results
in segmentation in the Mp interface, the URI reference should be used.
When the MRFC indicates the SSML script using an URI reference to the MRFP,
two options can exist:
\- the file (referenced by the URI) is located in the MRFP and it is a SSML
text, hence the MRFP should play the text;
\- the file (referenced by the URI) is located outside the MRFP; the MRFP may
fetch the text and play it to the user otherwise the MRFP indicates an error.
The MRFP shall execute the basic SSML elements and may ignore the SSML
elements not supported. The basic SSML elements include the root element
\"speak\", language type and spoken text.
The MRFC may request the MRFP to play a text in a loop until it commands the
MRFP to stop.
The MRFC may request the MRFP to play a text for a fixed number of times.
The MRFC may request DTMF detection while playing a text.
The MRFC may request the MRFP to stop playing a text when a DTMF digit is
detected.
The MRFC may request the MRFP to indicate when a text has been played
successfully.
The MRFP shall indicate error cases such as text not played successfully.
Ignoring a non-supported SSML element shall not result in an error.
## 5.5 Audio Record
The function requirement of audio record is to record the audio media
stream(s) and store it into a file. The function can be used in some services,
such as the voice mail box service, conference service, etc.
The MRFC shall request the MRFP to start the audio record from one or all
parties connected in a call/session. If it is to record one party in a
call/session, only the input stream of the party is recorded. If it is to
record all parties in a call/session, the mixed stream of all parties is
recorded.
The MRFP file format shall comply with the 3GPP multimedia file formats as
specified in the 3GPP TS 26.244[5].
The MRFC may request the MRFP to detect the DTMF digit while recording an
audio.
The MRFC may request the MRFP to stop recording and still retain the recording
file.
The MRFC may indicate to the MRFP the file format and the URI to store the
recorded file or request the MRFP to return the record file URI.
The MRFC may indicate to the MRFP the maximum record time.
The MRFC shall request the MRFP to indicate the result and the cause of record
completion when an audio has been recorded successfully.
The MRFP shall indicate error cases such as audio not recorded successfully.
The MRFC may indicate the MRFP to execute other functions, such as playing an
announcement, when the MRFP is recording audio.
## 5.6 DTMF Collection
The MRFC shall request the MRFP to detect and report the DTMF digits.
The MRFP shall report DTMF Digits detected as RTP Telephony Events (see IETF
RFC 2833 [10]) if the Telephony Event for DTMF Payload Type has been assigned
to that interface. The MRFP shall report only single DTMF Digits.
## 5.7 Automatic Speech Recognition
ASR (Automatic Speech Recognition) function is that the recognizer processes
the user input voice and may match that input against a target data to produce
a recognition result that represents the detected input. In the IMS, the MRFP
acts as the recognizer that is under control of the MRFC and finish the
function of recognition.
The MRFC shall request the MRFP to start the automatic speech recognition.
The MRFC shall extract the SRGS recognition grammar script or URI from the
VXML script if received or other format XML script if received.
The grammar format shall comply with the SRGS format as specified in W3C
Recommendation [12].
The MRFC shall indicate the SRGS script or the SRGS URI to the MRFP using
H.248 packages. If the SRGS script is sent inline,. the size of the SRGS
script shall be limited to avoid segmentation in the Mp interface.
The MRFC may indicate to the MRFP the recognition mode: Normal Recognition
Mode or Hotword Recognition Mode.
\- If the MRFC indicates the Normal Recognition Mode to the MRFP, the MRFP
shall attempt to match all of the speech against a recognition grammar and
returns a no-match status if the input fails to match or the method times out.
\- If the MRFC indicates the Hot-word Recognition Mode to the MRFP, the MRFP
shall look for a match against specific speech grammar and ignores speech that
does not match. The recognition completes only for a successful match of the
recognition grammar or if the subscriber cancels the request or if the
recognition time elapses.
The MRFP shall execute the recognition against the SRGS grammar and may ignore
SRGS elements which are not supported.
The MRFC may request DTMF detection while executing ASR.
The MRFC may request the MRFP to stop ASR when a DTMF digit is detected.
The MRFC may request the MRFP to indicate when a specific ASR has been
completed successfully.
When ASR is completed successfully, the MRFP may notify the MRFC the
recognition result.
The recognition result shall comply with a single recognition format (e.g. the
EMMA format as specified in W3C Recommendation [13] or the NLSML format as
specified in W3C Recommendation [15]).
NOTE: The mandatory recognition result format may be defined in Stage 3
specification 3GPP TS 29.333 [16].The MRFP may notify the MRFC multiple
recognition results that are mutually exclusive. Each result may be structured
by multiple parts in time sequence with the input time, may include the text
token that the value will correspond to tokens as defined by the SRGS grammar,
may include the interpretation of application specific markup, may include the
confidence score that represents the recognition quality.
The MRFP shall indicate error cases such as ASR not executed successfully.
## 5.8 Play Multimedia
### 5.8.1 General Play Multimedia
The function of playing multimedia is to play any combination of audio, video
and messaging media streams (except for audio only play which is specified
according to clause 5.2 or clause 5.3 ) to the subscriber. When playing
combination of audio and video media stream(s), the media stream(s) shall be
synchronized. The function can be used in the services, such as multimedia
announcement, multimedia mail box service, etc.
The MRFC shall request MRFP to play multimedia to one, one of several,
multiple or all parties connected in a call/session.
The multimedia to be played may be referenced by pre-configured identifiers or
by reference to a file (location).
The MRFC shall request sequences of predefined fixed multimedia announcements
within one request to the MRFP.
The MRFP multimedia of synchronized audio and video file format shall comply
with the 3GPP multimedia file formats as specified in the 3GPP TS 26.244[5].
The MRFP may transcode the input codec into the session codec, if the
multimedia file provides a different audio or video codec with the session
codec.
The MRFC may request MRFP to play multimedia of synchronized audio and video
in a loop until it commands the MRFP to stop.
The MRFC may request the MRFP to play multimedia of synchronized audio and
video for a fixed number of times.
The MRFC may request DTMF detection while playing multimedia of synchronized
audio and video.
The MRFC may request the MRFP to stop playing multimedia when a DTMF digit is
detected.
The MRFC may indicate to the MRFP the multimedia file identifier and file
format.
The MRFC may request the MRFP to indicate when a specific multimedia
previously requested has been played successfully.
The MRFC may be able to decouple the play audio and play video request to the
MRFP via separate sources for each media.
The MRFP shall indicate error cases such as multimedia not played
successfully.
### 5.8.2 Play Message
The function specified in clause 5.8.1 for \"General Play Multimedia\" shall
be followed. This clause describes the additional requirements to play the
messaging media stream.
To detect DTMF digits is not required for message media stream.
To play message in a loop or in a loop with a fixed number of times is not
required.
The MRFP message file formats shall comply with the file formats used inside
MMS (Multimedia Messaging Service) as specified in the 3GPP TS 26.140 [22] in
the current version.
## 5.9 Multimedia Record
### 5.9.1 General Multimedia Record
The function of the multimedia record is to record the any combination of
audio, video and messaging media stream(s) (except for audio only record which
are specified according to clause 5.5). When recording combination of audio
and video media stream(s), the media stream(s) shall be synchronized and be
stored into a multimedia file. The multimedia record function can be used in
the services, such as multimedia mail box service, multimedia conference, etc.
The MRFC shall request the MRFP to start the multimedia record to one or all
parties connected in a call/session. If it is to record one party in a
call/session, only the input stream of the party shall be recorded.
If it is to record all parties in a call/session, the mixed stream of all
parties shall be recorded. The MRFC may request the MRFP to detect the digit
while recording a multimedia of synchronized audio and video.
The MRFP multimedia of synchronized audio and video file format shall comply
with the 3GPP multimedia file formats as specified in the 3GPP TS 26.244[5].
The MRFC may request the MRFP to detect DTMF digits while recording multimedia
of synchronized audio and video.
The MRFC may request the MRFP to stop recording and still retain the recording
file.
The MRFC may indicate to the MRFP the file format and URI to store the
recorded file or request the MRFP to return the URI.
The MRFC may indicate to the MRFP the maximum record time.
The MRFC may request the MRFP to indicate the result and the cause of record
completion when a multimedia has been recorded successfully.
The MRFP shall indicate error cases such as multimedia not recorded
successfully.
The MRFC may indicate the MRFP to execute other functions, such as playing an
announcement, when the MRFP is recording multimedia.
### 5.9.2 Message Record
The function specified in clause 5.9.1 for \"General Multimedia Record\" shall
be followed. This clause describes the additional requirements to record the
messaging media stream.
The function of the message record is to record the messaging media stream(s)
and store into a message file. The message record function can be used in the
services, message conference, etc.
To detect DTMF digits is not required for message media stream.
The message file formats shall comply with the file formats used inside MMS
(Multimedia Messaging Service) as specified in the 3GPP TS 26.140[22] in
current version.
## 5.10 Audio Conference
Audio conferences allow users participating in the conference to communicate
with all other participants simultaneously.
The details for conferencing within the IP Multimedia Core Network subsystem
(IMS) are specified in 3GPP TS 24.147 [4].
The conference mixer is located in the MRFP.
The MRFC shall request the MRFP to create resources for an audio conference.
The MRFC shall create resources for users to join an existing conference, and
to release resources for users to leave an existing conference.
The MRFC may request the MRFP to collect DTMF (according to clause5.5), play
tones (according to clause 5.1) or announcements (according to clause 5.2), or
record the audio during the conference (according to 5.4).
The MRFP may support transcoding between different users.
## 5.11 Multimedia Conference
### 5.11.1 General Multimedia Conferencing
Multimedia conferences allow users participating in the conference to
communicate with all other participants simultaneously using any combination
of voice, video and messaging (except for audio only conferences which are
specified according to clause 5.10).
The details for conferencing within the IP Multimedia Core Network subsystem
(IMS) are specified in 3GPP TS 24.147 [4].
The conference mixer is located in the MRFP.
The MRFC shall request the MRFP to create resources for a multimedia
conference.
The MRFC shall create resources for users to join an existing conference, and
to release resources for users to leave an existing conference.
The MRFC may indicate to the MRFP to collect the DTMF (according to clause
5.6), play multimedia (according to clause 5.8), or record the multimedia
(according to clause 5.9) during the conference. It is not required to collect
DTMF when creating messaging conference separately.
The MRFP may support audio transcoding between different users.
The MRFP may support video transcoding between different users.
The MRFC may indicate to the MRFP to modify the media attribute, including:
\- To create a video stream or close a video stream.
\- To create an audio stream or close an audio stream.
\- To create a messaging stream or close a messaging stream.
\- To modify the codec of audio or video.
### 5.11.2 Message Conferencing
Messaging conferences allow users participating in the conference to
communicate with all other participants simultaneously using session based
message. Message content shall be possible to carry different media including
text, image, video and audio.
The details for messaging conference within the IP Multimedia Core Network
subsystem (IMS) are specified in 3GPP TS 24.247 [17].
The MRFC shall request the MRFP to create resources for a messaging
conference.
The MRFC shall request the MRFP to create resources for users to join an
existing conference, and to release resources for users to leave an existing
conference.
The MRFC may indicate the granted quotas and valid time to the MRFP. The
granted quotas indicate the units specifying the number of messages or volume
(size) of messages allowed to be received or sent by users. The valid time
indicates the validity time of the granted service units.
The MRFP may report statistics information of messages according to the
indication by the MRFC when the granted quota is reached or the valid time
elapses even if the granted service units have not been consumed within the
validity time. The statistics information of messages may include any of the
following received or sent by users in the conference:
\- number of messages sent
\- number of messages received
\- volume (size) of messages sent
\- volume (size) of messages received.
The MRFC may request the MRFP to report the statistics information of messages
sent and/or received at the end of the session or during the session.
The MRFP may report the statistics information at the end of the session or
during the session as requested by the MRFC. The statistics information of
messages may includeany of the following received or sent by users in the
conference:
\- number of messages sent
\- number of messages received
\- volume (size) of messages sent
\- volume (size) of messages received
The MRFP shall utilize the Message Session Relay Protocol (MSRP) (see IETF RFC
4975 [18]) to transport messages carrying different media including text,
images, video and audio. The Media types shall be MIME encoded.
The MRFC may request the MRFP to play messaging (according to clause 5.8)
during the conference.
The MRFC may request the MRFP to support the message record (according to
clause 5.9), including global storage of sessions and personal storage during
the conference.
The MRFC may request the MRFP to filter the message of the recipient. If the
filtering capabilities are supported:
\- The MRFC shall request the MRFP to start/stop message filtering.
\- The MRFC shall indicate the filtering criteria to the MRFP. The filtering
criteria may include sender address, message size, message content type (e.g.
video, audio), message content format (e.g. mpeg, jpeg) and message subject.
\- The MRFC shall indicate the message treatments to the MRFP. The message
treatments include block the delivery of the message content, store the
message content and redirect the message to another address.
\- The MRFP shall execute the message treatment when the criteria is reached.
## 5.12 Audio Transcoding
### 5.12.1 General
The MRFP shall support audio transcoding between streams of two Terminations
within the same context where the streams are encoded differently, in
accordance with standard H.248.1 principles, see ITU-T H.248.1 [3]. As minimum
requirement the MRFP shall support the default 3GPP audio codec AMR
(narrowband), and optionally any other audio codecs as specified in 3GPP TS
26.114 [23].
### 5.12.2 Handling of common codec parameters
Table 5.12.2.1 describes the MRFC handling of codec related parameters
applicable to multiple codecs when the MRFC sends an SDP offer.
Table 5.12.2.1: MRFC handling of common codec parameters when the MRFC acts as
offerer.
* * *
Parameter Handling of common codec parameter in sent SDP offer Handling of
common codec parameter in received SDP answer ptime (NOTE) The MRFC may add
the parameter with a value according to configured preferences to the SDP
offer. If the ptime parameter is included in the received SDP answer, the MRFC
shall supply the parameter to the MRFP for the termination towards the
answerer in the remote descriptor. maxptime (NOTE) The MRFC may add the
parameter with a value according to the MRFP capabilities to the SDP offer. If
the maxptime parameter is included in the received SDP answer, the MRFC shall
supply the parameter to the MRFP for the termination towards the answerer in
the remote descriptor. NOTE: This SDP attribute is defined in IETF RFC 4566
[44]. It applies to all codecs offered in an SDP media line.
* * *
Table 5.12.2.2 describes the MRFC handling of codec related parameters
applicable to multiple codecs when the MRFC receives an SDP offer.
Table 5.12.2.2: MRFC handling of common codec parameters when the MRFC acts as
answerer.
* * *
Parameter Handling of common codec parameter in received SDP offer Handling of
common codec parameter in sent SDP answer ptime (NOTE) If the ptime parameter
is included in the received SDP offer, the MRFC shall supply the parameter to
the MRFP for the termination towards the offerer in the remote descriptor. The
MRFC may add the ptime parameter with a value according to configured
preferences to the SDP answer. maxptime (NOTE) If the maxptime parameter is
included in the received SDP offer, the MRFC shall supply the parameter to the
MRFP for the termination towards the offerer in the remote descriptor. The
MRFC may add the maxptime parameter with a value according to the MRFP
capabilities to the SDP answer. NOTE: This SDP attribute is defined in IETF
RFC 4566 [44]. It applies to all codecs offered in an SDP media line.
* * *
The MRFP handling of codec related parameters applicable to multiple codecs
shall follow table 5.13.2.2 in 3GPP TS 23.334 [41].
### 5.12.3 Handling of the EVS speech codec
The Enhanced Voice Services (EVS) speech codec is defined in 3GPP TS 26.441
[42]. Its RTP payload type is defined in 3GPP TS 26.445 [43], and procedures
for its usage as IMS Multimedia Telephony speech codec are defined in 3GPP TS
26.114 [23].
The MRFC and the MRFP may support transcoding to and from the EVS speech
codec. If they do so, the procedures in the present clause apply.
Table 5.12.3.1 describes the MRFC handling of EVS codec parameters when the
MRFC sends an SDP offer for an EVS payload type, and that EVS payload type is
selected in the SDP answer. In addition, rules for the parameter handling in
3GPP TS 26.445 [43] shall apply.
Table 5.12.3.1: MRFC handling of EVS related SDP parameters when the MRFC adds
the EVS payload type to the SDP offer it sends out.
+----------------------+----------------------+----------------------+ | Parameter | Handling for EVS | Handling if offered | | | payload type added | EVS payload type is | | | to an SDP offer | accepted in the SDP | | | | answer | +----------------------+----------------------+----------------------+ | evs-mode-switch | If the MRFC expects | If the | | (NOTE 1) | that interworking | evs-mode-switch | | | between AMR-WB and | parameter is | | | EVS is required, it | contained in the SDP | | | shall include the | answer, the MRFC | | | evs-mode-switch with | shall forward this | | | value 1. Otherwise | parameter to the | | | the MRFC shall not | MRFP for the | | | include the | termination towards | | | evs-mode-switch. | the answerer in the | | | | remote descriptor. | +----------------------+----------------------+----------------------+ | hf-only (NOTE 1) | If the MRFC is | If the hf-only | | | configured to | parameter is | | | negotiate using only | contained in the SDP | | | the header-full EVS | answer, the MRFC | | | RTP payload format, | shall forward this | | | the MRFC shall | parameter to the | | | include the hf-only | MRFP in the remote | | | parameter with a | descriptor. | | | value 1. | | +----------------------+----------------------+----------------------+ | dtx (NOTE 1) | If the usage of DTX | If the dtx parameter | | | is not desired in | is contained in the | | | the sending and | SDP answer, the MRFC | | | receiving direction | shall forward this | | | (e.g. due to DTX | parameter to the | | | capabilities of | MRFP in the remote | | | expected codecs to | descriptor. | | | transcode with), the | | | | MRFC shall include | | | | the dtx parameter | | | | with a value 0. | | +----------------------+----------------------+----------------------+ | dtx-recv (NOTE 1) | If receiving DTX is | If the dtx-recv | | | not desired and the | parameter is | | | dtx parameter is not | contained in the SDP | | | included, the MRFC | answer, the MRFC | | | shall include the | shall forward this | | | dtx-recv parameter | parameter to the | | | with a value 0. | MRFP in the remote | | | | descriptor. | | | If both the dtx and | | | | dtx-recv parameters | | | | are included, those | | | | parameters shall | | | | have the same value; | | | | however, inclusion | | | | of the dtx-recv | | | | parameter is not | | | | required if the dtx | | | | parameter is | | | | included. | | +----------------------+----------------------+----------------------+ | **br** (NOTE 1) | If the MRFC desires | If the br parameter | | | the same bit rate | is contained in the | | | range for the send | SDP answer, the MRFC | | | and receive | shall forward this | | | direction in EVS | parameter to the | | | primary mode, and | MRFP in the remote | | | wants to restrict | descriptor. | | | the bit rate range | | | | to match MRFP | | | | capabilities and | | | | possible configured | | | | policies, it shall | | | | supply the br | | | | parameter in the SDP | | | | offer it sends. | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the SDP offer. | | | | | | | | If the MRFC also | | | | supplies the bw, | | | | bw-send or bw-recv | | | | parameter, the value | | | | of the br parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | +----------------------+----------------------+----------------------+ | br-send (NOTE 1) | If the MRFC desires | If the br-send | | | a different bit rate | parameter is | | | (range) for the send | contained in the SDP | | | and receive | answer, the MRFC | | | direction in EVS | shall forward this | | | primary mode, and | parameter to the | | | wants to restrict | MRFP in the remote | | | the bit rate range | descriptor. | | | for the send | | | | direction to match | | | | MRFP capabilities | | | | and possible | | | | configured policies, | | | | it shall supply the | | | | br-send parameter in | | | | the SDP offer it | | | | sends. Otherwise the | | | | MRFC shall not | | | | include this | | | | parameter in the SDP | | | | offer. | | | | | | | | If the MRFC also | | | | supplies the bw or | | | | bw-send parameter, | | | | the value of the | | | | br-send parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | +----------------------+----------------------+----------------------+ | br-recv (NOTE 1) | If the MRFC desires | If the br-recv | | | a different bit rate | parameter is | | | (range) for the send | contained in the SDP | | | and receive | answer, the MRFC | | | direction in EVS | shall forward this | | | primary mode, and | parameter to the | | | wants to restrict | MRFP in the remote | | | the bit rate range | descriptor. | | | for the receive | | | | direction to match | | | | MRFP capabilities | | | | and possible | | | | configured policies, | | | | it shall supply the | | | | br-recv parameter in | | | | the SDP offer it | | | | sends. Otherwise the | | | | MRFC shall not | | | | include this | | | | parameter in the SDP | | | | offer. | | | | | | | | If the MRFC also | | | | supplies the bw or | | | | bw-recv parameter, | | | | the value of the | | | | br-recv parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | +----------------------+----------------------+----------------------+ | bw (NOTE 1) | If the MRFC desires | If the bw parameter | | | the same sampling | is contained in the | | | bandwidth(s) for the | SDP answer, the MRFC | | | send and receive | shall forward this | | | direction in EVS | parameter to the | | | primary mode, and | MRFP in the remote | | | wants to restrict | descriptor. | | | the sampling | | | | bandwidths to match | | | | MRFP capabilities, | | | | sampling bandwidths | | | | of expected codecs | | | | EVS will be | | | | transcoded to, and | | | | possible configured | | | | policies, it shall | | | | supply the bw | | | | parameter in the SDP | | | | offer it sends. | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the SDP offer. | | +----------------------+----------------------+----------------------+ | bw-send (NOTE 1) | If the MRFC desires | If the bw-send | | | different sampling | parameter is | | | bandwidths for the | contained in the SDP | | | send and receive | answer, the MRFC | | | direction in EVS | shall forward this | | | primary mode, and | parameter to the | | | wants to restrict | MRFP in the remote | | | the sampling | descriptor. | | | bandwidths in the | | | | send direction to | | | | match MRFP | | | | capabilities, | | | | sampling bandwidths | | | | of expected codecs | | | | EVS will be | | | | transcoded to and | | | | possible configured | | | | policies, it shall | | | | supply the bw-send | | | | parameter in the SDP | | | | offer it sends. | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the SDP offer. | | +----------------------+----------------------+----------------------+ | bw-recv (NOTE 1) | If the MRFC desires | If the bw-recv | | | different sampling | parameter is | | | bandwidths for the | contained in the SDP | | | send and receive | answer, the MRFC | | | direction in EVS | shall forward this | | | primary mode, and | parameter to the | | | wants to restrict | MRFP in the remote | | | the sampling | descriptor. | | | bandwidths in the | | | | receive direction to | | | | match MRFP | | | | capabilities, | | | | sampling bandwidths | | | | of expected codecs | | | | EVS will be | | | | transcoded to, and | | | | possible configured | | | | policies, it shall | | | | supply the bw-recv | | | | parameter in the SDP | | | | offer it sends. | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the SDP offer. | | +----------------------+----------------------+----------------------+ | cmr (NOTE 1) | If the MRFC desires | If the cmr parameter | | | to disable codec | is contained in the | | | mode requests within | SDP answer, the MRFC | | | the RTP payload of | shall forward this | | | the EVS primary mode | parameter to the | | | (due to the MRFP | MRFP in the remote | | | capabilities or | descriptor. | | | policies), it shall | | | | include the cmr | | | | parameter with value | | | | -1 in the SDP offer | | | | it sends. | | +----------------------+----------------------+----------------------+ | ch-aw-recv (NOTE 1) | The MRFC shall | If the ch-aw-recv | | | include the | parameter is | | | ch-aw-recv parameter | contained in the SDP | | | in the SDP offer if | answer, the MRFC | | | it desires to | shall forward this | | | control the | parameter to the | | | channel-aware mode | MRFP in the remote | | | of EVS in the | descriptor. | | | receive direction, | | | | e.g. to disable it | | | | with value -1. The | | | | MRFC shall consider | | | | the capabilities of | | | | the MRFP when it | | | | chooses an | | | | appropriate value. | | +----------------------+----------------------+----------------------+ | number of channels | The MRFC shall only | If the \"number of | | (NOTE 2) | include the \"number | channels\" parameter | | | of channels\" | is contained in the | | | parameter in the SDP | SDP answer, the MRFC | | | offer if it desires | shall forward this | | | to send or receive | parameter to the | | | multiple channels. | MRFP in the remote | | | If the desired | descriptor. | | | number of channels | | | | in the send and | | | | receive direction | | | | differs, the MRFC | | | | shall include the | | | | higher value. The | | | | MRFC should consider | | | | the number of | | | | channels of expected | | | | codecs EVS will be | | | | transcoded to. | | +----------------------+----------------------+----------------------+ | ch-send (NOTE 1) | The MRFC shall only | If the ch-send | | | include the ch-send | parameter is | | | parameter in the SDP | contained in the SDP | | | offer if it desires | answer, the MRFC | | | to send multiple | shall forward this | | | channels, with | parameter to the | | | different numbers of | MRFP in the remote | | | channels in the send | descriptor. | | | and receive | | | | direction. The MRFC | | | | should consider the | | | | number of channels | | | | of expected codecs | | | | EVS will be | | | | transcoded to. | | +----------------------+----------------------+----------------------+ | ch-recv (NOTE 1) | The MRFC shall only | If the ch-recv | | | include the ch-recv | parameter is | | | parameter in the SDP | contained in the SDP | | | offer if it desires | answer, the MRFC | | | to receive multiple | shall forward this | | | channels, with | parameter to the | | | different numbers of | MRFP in the remote | | | channels in the send | descriptor. | | | and receive | | | | direction. The MRFC | | | | should consider the | | | | number of channels | | | | of expected codecs | | | | EVS will be | | | | transcoded to. | | +----------------------+----------------------+----------------------+ | mode-set (NOTE 3) | The MRFC shall only | If the mode-set | | | include the mode-set | parameter is | | | parameter in the SDP | contained in the SDP | | | offer if it desires | answer, the MRFC | | | to restrict the | shall forward this | | | mode-set of AMR-WB | parameter to the | | | IO mode. The MRFC | MRFP in the remote | | | should only restrict | descriptor. | | | the mode-set if the | | | | expected codecs EVS | | | | will be interworked | | | | with is AMR-WB and | | | | has a restricted | | | | mode-set. | | +----------------------+----------------------+----------------------+ | mode-change-period | The MRFC shall only | If the | | (NOTE 3) | include the | mode-change-period | | | mode-change-period | parameter is | | | parameter with value | contained in the SDP | | | 2 in the SDP offer | answer, the MRFC | | | if it desires to | shall forward this | | | restrict the | parameter to the | | | mode-change-period | MRFP in the remote | | | of received packets | descriptor. | | | in AMR-WB IO mode. | | | | The MRFC should only | | | | restrict the | | | | mode-change-period | | | | if the expected | | | | codec EVS will be | | | | interworked with is | | | | AMR-WB and has such | | | | a restriction. | | +----------------------+----------------------+----------------------+ | mo | The MRFC shall | If the | | de-change-capability | either include the | mo | | (NOTE 3) | mo | de-change-capability | | | de-change-capability | parameter is | | | parameter with value | contained in the SDP | | | 2 or omit the | answer, the MRFC may | | | parameter in the SDP | forward this | | | offer. | parameter to the | | | | MRFP in the remote | | | | descriptor. | +----------------------+----------------------+----------------------+ | mode-change-neighbor | The MRFC shall only | If the | | (NOTE 3) | include the | mode-change-neighbor | | | mode-change-neighbor | parameter is | | | parameter in the SDP | contained in the SDP | | | offer if it desires | answer, the MRFC | | | to restrict the | shall forward this | | | mode-change within | parameter to the | | | received packets of | MRFP in the remote | | | AMR-WB IO mode to | descriptor. | | | neighboring modes. | | | | The MRFC should | | | | consider the | | | | mode-change-neighbor | | | | parameter of the | | | | expected codec EVS | | | | will be interworked | | | | with if this is | | | | AMR-WB. | | +----------------------+----------------------+----------------------+ | max-red (NOTE 5) | The MRFC shall only | If the max-red | | | include the max-red | parameter is | | | parameter in the SDP | contained in the SDP | | | offer if it desires | answer, the MRFC | | | to restrict the | shall forward this | | | maximum redundancy | parameter to the | | | of received packets. | MRFP in the remote | | | MRFC shall consider | descriptor. | | | the capabilities of | | | | the MRFP, and should | | | | consider a max-red | | | | parameter of the | | | | expected codec EVS | | | | will be interworked | | | | with if this is | | | | AMR-WB. | | +----------------------+----------------------+----------------------+ | 3g | If the MRFP supports | If the | | pp_mtsi_app_adapt | RTCP APP based | 3g | | (NOTE 4) | adaptation messages | pp_mtsi_app_adapt | | | defined in | attribute is | | | 3G | contained in the SDP | | | PP TS 26.114 [23], | answer, the MRFC | | | and the MRFC has a | shall forward this | | | policy to negotiate | parameter to the | | | the usage of those | MRFP in the remote | | | messages, the MRFC | descriptor. | | | shall include the | | | | 3g | | | | pp_mtsi_app_adapt | | | | SDP attribute | | | | indicating the | | | | supported APP | | | | messages in the SDP | | | | offer. | | +----------------------+----------------------+----------------------+ | NOTE 1: This MIME | | | | parameter of the EVS | | | | RTP payload type is | | | | defined in | | | | 3G | | | | PP TS 26.445 [43]. | | | | It is encapsulated | | | | within the SDP | | | | \"a=fmtp\" attribute | | | | defined | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 2: This number | | | | of channels are | | | | encoded as | | | | \"encoding | | | | parameters\" of the | | | | SDP \"a=rtpmap\" | | | | attribute defined in | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 3: This MIME | | | | parameter of the EVS | | | | RTP payload type | | | | relates to AMR-WB IO | | | | mode and is defined | | | | in | | | | I | | | | ETF RFC 4867 [45]. | | | | It is encapsulated | | | | within the SDP | | | | \"a=fmtp\" attribute | | | | defined | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 4: This SDP | | | | attribute is defined | | | | in | | | | 3G | | | | PP TS 26.114 [23]. | | | | It applies to all | | | | codecs offered in an | | | | SDP media line. | | | | However, some values | | | | are specific to EVS. | | | | | | | | NOTE 5: This MIME | | | | parameter of the EVS | | | | RTP payload type is | | | | defined in IETF RFC | | | | 4867 [45]. It is | | | | encapsulated within | | | | the SDP \"a=fmtp\" | | | | attribute defined | | | | IETF RFC | | | | 4566 [44]. | | | +----------------------+----------------------+----------------------+
When receiving an SDP offer that contains an EVS codec payload type, the MRFC
shall handle the EVS codec parameters as described in table 5.12.3.2. In
addition, rules for the parameter handling in 3GPP TS 26.445 [43] shall apply.
Table 5.12.3.2: MRFC handling of EVS related SDP parameters when the MRFC
receives the EVS payload type in an SDP offer.
+----------------------+----------------------+----------------------+ | Parameter | Handling of EVS | EVS payload type | | | payload type | supplied in the SDP | | | parameter received | answer | | | in the SDP offer | | +----------------------+----------------------+----------------------+ | evs-mode-switch | If the | If the | | (NOTE 1) | evs-mode-switch | evs-mode-switch | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer and the MRFC | offer, the MRFC | | | select the EVS | shall include the | | | payload type, the | evs-mode-switch | | | MRFC shall forward | parameter with | | | this parameter to | unmodified value in | | | the MRFP for the | the SDP answer. | | | termination towards | | | | the offerer in the | Otherwise, if the | | | remote descriptor. | MRFC decides to | | | | interwork between | | | | AMR-WB and EVS, it | | | | shall include the | | | | evs-mode-switch with | | | | value 1. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | the evs-mode-switch. | | | | | | | | If the MRFC supplies | | | | the evs-mode-switch | | | | in the SDP answer, | | | | it shall also supply | | | | it to the MRFP in | | | | the local descriptor | | | | for the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | hf-only (NOTE 1) | If the hf-only | If the hf-only | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer and the MRFC | offer, the MRFC | | | select the EVS | shall include the | | | payload type, the | hf-only parameter | | | MRFC shall forward | with unmodified | | | this parameter to | value in the SDP | | | the MRFP for the | answer. | | | termination towards | | | | the offerer in the | Otherwise, the MRFC | | | remote descriptor. | may include the | | | | hf-only parameter | | | | with a value | | | | matching negotiated | | | | values of possible | | | | other EVS call legs | | | | in the conference. | | | | | | | | If the MRFC supplies | | | | the hf-only | | | | parameter in the SDP | | | | answer, it shall | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | dtx (NOTE 1) | If the dtx parameter | If the dtx parameter | | | is contained in the | is contained in the | | | SDP offer and the | SDP offer, the MRFC | | | MRFC select the EVS | shall include the | | | payload type, the | dtx parameter with | | | MRFC shall forward | unmodified value in | | | this parameter to | the SDP answer. | | | the MRFP for the | | | | termination towards | If the dtx parameter | | | the offerer in the | is not contained in | | | remote descriptor. | the SDP offer and if | | | | a dtx-recv parameter | | | | is contained in the | | | | SDP offer, the MRFC | | | | may include the dtx | | | | parameter in the SDP | | | | answer, and the | | | | value of the dtx | | | | parameter shall then | | | | be identical to that | | | | of the dtx-recv | | | | parameter in the SDP | | | | offer (e.g, if that | | | | value matches | | | | negotiated values of | | | | possible other EVS | | | | call legs in the | | | | conference). | | | | | | | | If the dtx parameter | | | | is not contained in | | | | the SDP offer and if | | | | the dtx-recv | | | | parameter is not | | | | contained in the SDP | | | | offer the MRFC may | | | | include in the SDP | | | | answer the dtx | | | | parameter with a | | | | value matching | | | | negotiated values of | | | | possible other EVS | | | | call legs in the | | | | conference. | | | | | | | | If the MRFC supplies | | | | the dtx parameter in | | | | the SDP answer, it | | | | shall also supply it | | | | to the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | dtx-recv (NOTE 1) | If the dtx-recv | If no dtx parameter | | | parameter is | is included in the | | | contained in the SDP | SDP answer and if | | | offer and the MRFC | the reception of DTX | | | select the EVS | is not desired, the | | | payload type, the | MRFC shall include | | | MRFC shall forward | in the SDP answer | | | this parameter to | the dtx-recv | | | the MRFP for the | parameter with a | | | termination towards | value 0. | | | the offerer in the | | | | remote descriptor. | If both the dtx and | | | | dtx-recv parameters | | | | are included, those | | | | parameters shall | | | | have the same value; | | | | however, inclusion | | | | of the dtx-recv | | | | parameter is not | | | | required if the dtx | | | | parameter is | | | | included. | | | | | | | | If the MRFC supplies | | | | the dtx-recv | | | | parameter in the SDP | | | | answer, it should | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | **br** (NOTE 1) | If the br parameter | If the br parameter | | | is contained in the | is contained in the | | | SDP offer, the MRFC | SDP offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | bitrate value, which | | | indicated bitrates, | is either the | | | or a subset of them, | received br value or | | | in EVS primary mode | a subset of it, | | | in the send and | based on MRFP | | | receive direction. | capabilities, | | | If the indicated | possible configured | | | bitrates, and even | policies, and the | | | each subset of them, | negotiated br range | | | are not supported, | of possible other | | | the MRFC shall not | EVS call legs in the | | | select the EVS | conference, and | | | payload type. If the | shall include the br | | | MRFC selects the EVS | parameter with the | | | payload type, it | selected value that | | | shall forward this | is also supplied | | | parameter to the | towards the MRFP in | | | MRFP for the | the SDP answer. | | | termination towards | | | | the offerer in the | Otherwise, if the | | | remote descriptor. | MRFC desires the | | | | same bit rate range | | | | for the send and | | | | receive direction in | | | | EVS primary mode, | | | | and wants to | | | | restrict the bit | | | | rate range to match | | | | MRFP capabilities, | | | | possible configured | | | | policies, and the | | | | negotiated br range | | | | of possible other | | | | EVS call legs in the | | | | conference, the MRFC | | | | shall supply the br | | | | parameter in the SDP | | | | answer it sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the answer. | | | | | | | | If the MRFC also | | | | supplies the bw, | | | | bw-send or bw-recv | | | | parameter, the value | | | | of the br parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the br parameter in | | | | the SDP answer, it | | | | shall also supply to | | | | the MRFP the br | | | | parameter in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | br-send (NOTE 1) | If the br-send | If the br-recv | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer, the MRFC | offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | bitrate value, which | | | indicated bitrates, | is either the | | | or a subset of them, | received br-recv | | | in EVS primary mode | value or a subset of | | | in the receive | it, based on MRFP | | | direction. If the | capabilities | | | indicated bitrates, | possible configured | | | and even each subset | policies, and the | | | of them, are not | negotiated br range | | | supported, the MRFC | of possible other | | | shall not select the | EVS call legs in the | | | EVS payload type. If | conference, and the | | | the MRFC selects the | MRFC shall include | | | EVS payload type, it | the br-send | | | shall forward this | parameter with the | | | parameter to the | selected value that | | | MRFP for the | is also supplied | | | termination towards | towards the MRFP in | | | the offerer in the | the SDP answer. | | | remote descriptor. | | | | | Otherwise, if the | | | | MRFC desires a | | | | different bit rate | | | | (range) for the send | | | | and receive | | | | direction in EVS | | | | primary mode, and | | | | wants to restrict | | | | the bit rate range | | | | for the send | | | | direction to match | | | | MRFP capabilities | | | | and possible | | | | configured policies, | | | | it shall supply the | | | | br-send parameter in | | | | the SDP answer it | | | | sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | the br-send | | | | parameter in the SDP | | | | answer. | | | | | | | | If the MRFC also | | | | supplies the bw or | | | | bw-send parameter, | | | | the value of the | | | | br-send parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the br-send | | | | parameter in the SDP | | | | answer, it shall | | | | also supply to the | | | | MRFP the br-send | | | | parameter in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | br-recv (NOTE 1) | If the br-recv | If the br-send | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer, the MRFC | offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | bitrate value, which | | | indicated bitrates, | is either the | | | or a subset of them, | received br-send | | | in EVS primary mode | value or a subset of | | | in the send | it, based on MRFP | | | direction. If the | capabilities, | | | indicated bitrates, | possible configured | | | and even each subset | policies, and the | | | of them, are not | negotiated br range | | | supported, the MRFC | of possible other | | | shall not select the | EVS call legs in the | | | EVS payload type. If | conference, and the | | | the MRFC selects the | MRFC shall include | | | EVS payload type, it | the br-recv | | | shall forward this | parameter with the | | | parameter to the | selected value that | | | MRFP for the | is also supplied | | | termination towards | towards the MRFP in | | | the offerer in the | the SDP answer. | | | remote descriptor. | | | | | Otherwise, if the | | | | MRFC desires a | | | | different bit rate | | | | (range) for the send | | | | and receive | | | | direction in EVS | | | | primary mode, and | | | | wants to restrict | | | | the bit rate range | | | | for the receive | | | | direction to match | | | | MRFP capabilities | | | | and possible | | | | configured policies, | | | | it shall supply the | | | | br-recv parameter in | | | | the SDP answer it | | | | sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | the br-recv | | | | parameter in the SDP | | | | answer. | | | | | | | | If the MRFC also | | | | supplies the bw or | | | | bw-recv parameter, | | | | the value of the | | | | br-recv parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the br-recv | | | | parameter in the SDP | | | | answer, it shall | | | | also supply to the | | | | MRFP the br-recv | | | | parameter in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | bw (NOTE 1) | If the bw parameter | If the bw parameter | | | is contained in the | is contained in the | | | SDP offer, the MRFC | SDP offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | sampling bandwidth | | | indicated sampling | value, which is | | | bandwidth(s), or a | either the received | | | subset of them, in | bw value or a subset | | | EVS primary mode in | of it, based on MRFP | | | the send and receive | capabilities, | | | direction. If the | possible configured | | | indicated sampling | policies, and the | | | bandwidth(s), and | negotiated bw range | | | even each subset of | of possible other | | | them, are not | EVS call legs in the | | | supported, the MRFC | conference, and the | | | shall not select the | MRFC shall include | | | EVS payload type. If | the bw parameter | | | the MRFC selects the | with the selected | | | EVS payload type, it | value that is also | | | shall forward this | supplied towards the | | | parameter to the | MRFP in the SDP | | | MRFP for the | answer. | | | termination towards | | | | the offerer in the | Otherwise, if the | | | remote descriptor. | MRFC desires the | | | | same sampling | | | | bandwidth(s) for the | | | | send and receive | | | | direction in EVS | | | | primary mode, and | | | | wants to restrict | | | | the sampling | | | | bandwidth(s) to | | | | match MRFP | | | | capabilities, | | | | possible configured | | | | policies, and the | | | | negotiated bw range | | | | of possible other | | | | EVS call legs in the | | | | conference, the MRFC | | | | shall supply the bw | | | | parameter in the SDP | | | | answer it sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | this parameter in | | | | the SDP answer. | | | | | | | | If the MRFC also | | | | supplies the br, | | | | br-send or br-recv | | | | parameter, the value | | | | of the bw parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the bw parameter in | | | | the SDP answer, it | | | | shall also supply to | | | | the MRFP the bw | | | | parameter in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | bw-send (NOTE 1) | If the bw-send | If the bw-recv | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer, the MRFC | offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | sampling bandwidths | | | indicated sampling | value, which is | | | bandwidths, or a | either the received | | | subset of them, in | bw-recv value or a | | | EVS primary mode in | subset of it, based | | | the receive | on MRFP | | | direction. If the | capabilities, | | | indicated sampling | possible configured | | | bandwidths, and even | policies, and the | | | each subset of them, | negotiated bw range | | | are not supported, | of possible other | | | the MRFC shall not | EVS call legs in the | | | select the EVS | conference, and the | | | payload type. If the | MRFC shall include | | | MRFC selects the EVS | the bw-send | | | payload type, it | parameter with the | | | shall forward this | selected value in | | | parameter to the | the SDP answer. | | | MRFP for the | | | | termination towards | Otherwise, if the | | | the offerer in the | MRFC desires a | | | remote descriptor. | different sampling | | | | bandwidths for the | | | | send and receive | | | | direction in EVS | | | | primary mode, and | | | | wants to restrict | | | | the sampling | | | | bandwidths for the | | | | send direction to | | | | match MRFP | | | | capabilities, | | | | possible configured | | | | policies, and the | | | | negotiated bw range | | | | of possible other | | | | EVS call legs in the | | | | conference, the MRFC | | | | shall supply the | | | | bw-send parameter in | | | | the SDP answer it | | | | sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | the br-send | | | | parameter in the SDP | | | | answer. | | | | | | | | If the MRFC also | | | | supplies the bw or | | | | bw-send parameter, | | | | the value of the | | | | br-send parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the bw-send | | | | parameter in the SDP | | | | answer, it shall | | | | also supply to the | | | | MRFP the bw-send | | | | parameter in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | bw-recv (NOTE 1) | If the br-recv | If the bw-send | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer, the MRFC | offer, the MRFC | | | shall check if the | shall select a | | | MRFP supports the | sampling bandwidths | | | indicated sampling | value, which is | | | bandwidths, or a | either the received | | | subset of them, in | bw-send value or a | | | EVS primary mode in | subset of it, based | | | the send direction. | on MRFP | | | If the indicated | capabilities, | | | sampling bandwidths, | possible configured | | | and even each subset | policies, and the | | | of them, are not | negotiated bw range | | | supported, the MRFC | of possible other | | | shall not select the | EVS call legs in the | | | EVS payload type. If | conference, and the | | | the MRFC selects the | MRFC shall include | | | EVS payload type, it | the bw-recv | | | shall forward the | parameter with the | | | bw-recv parameter to | selected value in | | | the MRFP for the | the SDP answer. | | | termination towards | | | | the offerer in the | Otherwise, if the | | | remote descriptor. | MRFC desires a | | | | different sampling | | | | bandwidths for the | | | | send and receive | | | | direction in EVS | | | | primary mode, and | | | | wants to restrict | | | | the sampling | | | | bandwidths for the | | | | receive direction to | | | | match MRFP | | | | capabilities, | | | | possible configured | | | | policies, and the | | | | negotiated bw range | | | | of possible other | | | | EVS call legs in the | | | | conference, the MRFC | | | | shall supply the | | | | bw-recv parameter in | | | | the SDP answer it | | | | sends. | | | | | | | | Otherwise the MRFC | | | | shall not include | | | | the bw-recv | | | | parameter in the SDP | | | | answer. | | | | | | | | If the MRFC also | | | | supplies the br or | | | | br-recv parameter, | | | | the value of the | | | | bw-recv parameter | | | | shall be compatible | | | | with the values of | | | | those parameters. | | | | | | | | If the MRFC supplies | | | | the bw-send | | | | parameter in the SDP | | | | answer, it shall | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | cmr (NOTE 1) | If the cmr parameter | If the cmr parameter | | | is contained in the | is contained in the | | | SDP offer and the | SDP offer, the MRFC | | | MRFC select the EVS | shall include the | | | payload type, the | cmr parameter with | | | MRFC shall forward | unmodified value in | | | this parameter to | the SDP answer. | | | the MRFP for the | | | | termination towards | Otherwise, if the | | | the offerer in the | MRFP desires to | | | remote descriptor. | disable codec mode | | | | requests within the | | | | RTP payload of the | | | | EVS primary mode | | | | (due to the MRFP | | | | capabilities, | | | | possible configured | | | | policies, and the | | | | negotiated CMR mode | | | | of possible other | | | | EVS call legs in the | | | | conference, it shall | | | | include the cmr | | | | parameter with value | | | | -1 in the SDP answer | | | | it sends. | | | | | | | | If the MRFC supplies | | | | the cmr parameter in | | | | the SDP answer, it | | | | shall also supply it | | | | to the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | ch-aw-recv (NOTE 1) | If the ch-aw-recv | If the MRFC it | | | parameter is | desires to control | | | contained in the SDP | the channel-aware | | | offer the MRFC shall | mode of EVS in the | | | check if the MRFP | receive direction, | | | supports the | e.g. to disable it | | | indicated mode in | with value -1, it | | | the send direction. | shall include the | | | If the indicated | ch-aw-recv parameter | | | mode is not | in the SDP offer and | | | supported, the MRFC | shall also supply | | | shall not select the | the ch-aw-recv | | | EVS payload type. If | parameter to the | | | the MRFC selects the | MRFP in the local | | | EVS payload type, | descriptor for the | | | the MRFC shall | termination towards | | | forward this | the offerer with the | | | parameter to the | same value. The MRFC | | | MRFP for the | shall consider the | | | termination towards | capabilities of the | | | the offerer in the | MRFP and the | | | remote descriptor. | negotiated | | | | ch-aw-recv mode of | | | | possible other EVS | | | | call legs in the | | | | conference when it | | | | chooses an | | | | appropriate value. | +----------------------+----------------------+----------------------+ | number of channels | If the \"number of | If the \"number of | | (NOTE 2) | channels\" parameter | channels\" parameter | | | is contained in the | is contained in the | | | SDP offer the MRFC | SDP offer, the MRFC | | | shall check if the | shall include the | | | MRFP supports the | \"number of | | | indicated number of | channels\" parameter | | | channels. If the | with unmodified | | | indicated number of | value in the SDP | | | channels is not | answer and shall | | | supported, the MRFC | also supply it to | | | shall not select the | the MRFP in the | | | EVS payload type. If | local descriptor for | | | the MRFC selects the | the termination | | | EVS payload type, | towards the offerer | | | the MRFC shall | with the same value. | | | forward this | | | | parameter to the | | | | MRFP for the | | | | termination towards | | | | the offerer in the | | | | remote descriptor. | | +----------------------+----------------------+----------------------+ | ch-send (NOTE 1) | If the ch-send | If the ch-recv | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer the MRFC shall | offer, the MRFC | | | check if the MRFP | shall include the | | | supports the | ch-send parameter | | | indicated number of | with unmodified | | | channels in the | value in the SDP | | | receive direction. | answer and shall | | | If the indicated | also supply the | | | number of channels | ch-send parameter to | | | is not supported, | the MRFP in the | | | the MRFC shall not | local descriptor for | | | select the EVS | the termination | | | payload type. If the | towards the offerer | | | MRFC selects the EVS | with the same value. | | | payload type, the | | | | MRFC shall forward | | | | the ch-send | | | | parameter to the | | | | MRFP for the | | | | termination towards | | | | the offerer in the | | | | remote descriptor. | | +----------------------+----------------------+----------------------+ | ch-recv (NOTE 1) | If the ch-recv | If the ch-send | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer the MRFC shall | offer, the MRFC | | | check if the MRFP | shall include the | | | supports the | ch-recv parameter | | | indicated number of | with unmodified | | | channels in the send | value in the SDP | | | direction. If the | answer and shall | | | indicated number of | also supply the | | | channels is not | ch-recv parameter to | | | supported, the MRFC | the MRFP in the | | | shall not select the | local descriptor for | | | EVS payload type. If | the termination | | | the MRFC selects the | towards the offerer | | | EVS payload type for | with the same value. | | | transcoding, the | | | | MRFC shall forward | | | | the ch-recv | | | | parameter to the | | | | MRFP for the | | | | termination towards | | | | the offerer in the | | | | remote descriptor. | | +----------------------+----------------------+----------------------+ | mode-set (NOTE 3) | If the mode-set | If the mode-set | | | parameter is | parameter is | | | contained in the SDP | contained in the SDP | | | offer and the MRFC | offer, the MRFC | | | select the EVS | shall include the | | | payload type, the | mode-set parameter | | | MRFC shall forward | with unmodified | | | this parameter to | value in the SDP | | | the MRFP for the | answer. | | | termination towards | | | | the offerer in the | Otherwise, if EVS or | | | remote descriptor. | AMR-WB is used on | | | | possible other call | | | | legs in the | | | | conference, the MRFC | | | | should include the | | | | mode-set parameter | | | | with a value | | | | indicating the mode | | | | that was negotiated | | | | on those other call | | | | legs (or omit it if | | | | no restrictions | | | | applied before). | | | | | | | | If the MRFC supplies | | | | the mode-set | | | | parameter in the SDP | | | | answer, it shall | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | mode-change-period | If the | If the MRFC select | | (NOTE 3) | mode-change-period | the EVS payload | | | parameter is | type, the MRFC shall | | | contained in the SDP | either include the | | | offer and the MRFC | mo | | | select the EVS | de-change-capability | | | payload type, the | parameter with value | | | MRFC shall forward | 2 or omit it. | | | this parameter to | | | | the MRFP for the | If the MRFC supplies | | | termination towards | the | | | the offerer in the | mo | | | remote descriptor. | de-change-capability | | | | parameter in the SDP | | | | answer, it may also | | | | supply it to the | | | | MRFP in the local | | | | descriptor for the | | | | termination towards | | | | the offerer with the | | | | same value. | +----------------------+----------------------+----------------------+ | mo | If the | If EVS or AMR-WB is | | de-change-capability | mo | used on possible | | (NOTE 3) | de-change-capability | other EVS call legs | | | parameter is | in the conference, | | | contained in the SDP | the MRFC should | | | offer and the MRFC | include the | | | select the EVS | mo | | | payload type, the | de-change-capability | | | MRFC may forward | parameter with a | | | this parameter to | value indicating the | | | the MRFP for the | mode that was | | | termination towards | negotiated on those | | | the offerer in the | other call legs (or | | | remote descriptor. | omit it if no | | | | restrictions applied | | | | before). | | | | | | | | If the MRFC supplies | | | | the | | | | mo | | | | de-change-capability | | | | parameter in the SDP | | | | answer, it may also | | | | supply it to the | | | | MRFP in the local | | | | descriptor for the | | | | termination towards | | | | the offerer with the | | | | same value. | +----------------------+----------------------+----------------------+ | mode-change-neighbor | If the | If EVS or AMR-WB was | | (NOTE 3) | mode-change-neighbor | used on possible | | | parameter is | other EVS call legs | | | contained in the SDP | in the conference, | | | offer and the MRFC | the MRFC should | | | select the EVS | include the | | | payload type, the | mode-change-neighbor | | | MRFC shall forward | parameter with a | | | this parameter to | value indicating the | | | the MRFP for the | mode that was | | | termination towards | negotiated on those | | | the offerer in the | other call legs (or | | | remote descriptor. | omit it if no | | | | restrictions applied | | | | before). | | | | | | | | If the MRFC supplies | | | | the | | | | mode-change-neighbor | | | | parameter in the SDP | | | | answer, it shall | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | max-red (NOTE 5) | If the max-red | The MRFC shall only | | | parameter is | include the max-red | | | contained in the SDP | parameter in the SDP | | | offer and the MRFC | answer if it desires | | | select the EVS | to restrict the | | | payload type, the | maximum redundancy | | | MRFC shall forward | of received packets. | | | this parameter to | When selecting the | | | the MRFP for the | value of the max-red | | | termination towards | parameter, the MRFC | | | the offerer in the | shall consider the | | | remote descriptor. | capabilities of the | | | | MRFP and, if EVS or | | | | AMR-WB is used on | | | | possible other EVS | | | | call legs in the | | | | conference, the | | | | redundancy that was | | | | negotiated on those | | | | call legs. | | | | | | | | If the MRFC supplies | | | | the max-red | | | | parameter in the SDP | | | | answer, it shall | | | | also supply it to | | | | the MRFP in the | | | | local descriptor for | | | | the termination | | | | towards the offerer | | | | with the same value. | +----------------------+----------------------+----------------------+ | 3g | If the | If the MRFP supports | | pp_mtsi_app_adapt | 3g | RTCP APP based | | (NOTE 4) | pp_mtsi_app_adapt | adaptation messages | | | parameter is | defined in | | | contained in the SDP | 3G | | | answer, and the MRFC | PP TS 26.114 [23], | | | select the EVS | and the MRFC has a | | | payload type, the | policy to negotiate | | | MRFC shall forward | the usage of those | | | this parameter to | messages, the MRFC | | | the MRFP the MRFC | shall include the | | | shall forward this | 3g | | | parameter to the | pp_mtsi_app_adapt | | | MRFP in the remote | SDP attribute | | | descriptor. | indicating the | | | | allowed APP messages | | | | in the SDP answer. | | | | If EVS is used | | | | possible other EVS | | | | call legs in the | | | | conference, the MRFC | | | | should consider the | | | | negotiated RTCP APP | | | | packet types on | | | | those call legs in | | | | addition to the MRFP | | | | capabilities when | | | | selecting the | | | | allowed RTCP APP | | | | messages. | +----------------------+----------------------+----------------------+ | NOTE 1: This MIME | | | | parameter of the EVS | | | | RTP payload type is | | | | defined in | | | | 3G | | | | PP TS 26.445 [43]. | | | | It is encapsulated | | | | within the SDP | | | | \"a=fmtp\" attribute | | | | defined | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 2: This number | | | | of channels are | | | | encoded as | | | | \"encoding | | | | parameters\" of the | | | | SDP \"a=rtpmap\" | | | | attribute defined in | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 3: This MIME | | | | parameter of the EVS | | | | RTP payload type | | | | relates to AMR-WB IO | | | | mode and is defined | | | | in | | | | I | | | | ETF RFC 4867 [45]. | | | | It is encapsulated | | | | within the SDP | | | | \"a=fmtp\" attribute | | | | defined | | | | I | | | | ETF RFC 4566 [44]. | | | | | | | | NOTE 4: This SDP | | | | attribute is defined | | | | in | | | | 3G | | | | PP TS 26.114 [23]. | | | | It applies to all | | | | codecs offered in an | | | | SDP media line. | | | | However, some values | | | | are specific to EVS. | | | | | | | | NOTE 5: This MIME | | | | parameter of the EVS | | | | RTP payload type is | | | | defined in | | | | I | | | | ETF RFC 4867 [45]. | | | | It is encapsulated | | | | within the SDP | | | | \"a=fmtp\" attribute | | | | defined | | | | I | | | | ETF RFC 4566 [44]. | | | +----------------------+----------------------+----------------------+
The MRFP handling of EVS codec parameters shall follow table 5.13.3.3 in 3GPP
TS 23.334 [41]. The MRFP should support transcoding of EVS with bandwidths
(sampling rates) which are supported by codec the MRFP is capable to transcode
EVS to/from (e.g. NB for AMR, and WB for AMR-WB).
## 5.13 Video Transcoding
The MRFP shall support video transcoding between streams of two Terminations
within the same context where the streams are encoded differently, in
accordance with standard H.248 principles, see ITU-T H.248.1 [3].
NOTE: 3GPP video codecs are specified in 3GPP TS 26.114 [23].
## 5.14 Floor Control Service Requirement
### 5.14.1 General
Floor control is a means to manage joint or exclusive access to shared
resources in a (multiparty) conferencing environment. It enables applications
or users to gain safe and mutually exclusive or non-exclusive input access to
the shared object or resource. The \"Floor\" is an individual temporary access
or manipulation permission for a specific shared resource (or group of
resources) IETF RFC 4376 [19]. Floor control is an optional procedure; where
\"shall\" is used it is meant that this is basic required functionality within
the feature.
### 5.14.2 Architecture
The functional architecture concerning Floor control is presented in Figure
5.14.2.1 below.
Figure 5.14.2.1: Functionality Architecture of Floor Control
The functional entities are described by solid line, and the roles are
described by broken line.
The functional entities consist of the following:
\- User Equipment (UE), a UE shall support the \"Client\" role of BFCP as
specified by IETF RFC 4582 [20]. the Client may be a \"Floor Participant\" or
\"Floor Chair\" .
\- Media Resource Function (MRF), an MRF shall support the \"Floor Control
Server\" role.
The roles consist of the following:
\- Floor Participant, the Floor Participant shall support general Client
operations and Floor Participant operations as described in IETF RFC 4582
[20].
\- Floor Chair, the Floor Chair shall support Client operations and Floor
Chair operations as described in IETF RFC 4582 [20].
\- Floor Control Server, the Floor Control Server (FCS) shall support Floor
Control Server operations as described in IETF RFC 4582 [20].
### 5.14.3 Services Requirements
The MRF shall support the Floor Control function, including: the \"conference
policy\" related to Floor control and the communication between the Floor
control functional entities (the Floor Participant, the Floor Chair and the
Floor Control Server).
1\. The MRF shall support the following Floor control policy related to Floor
control:
\- Whether the Floor control is in use or not.
\- The algorithm to be used in granting the Floor.
The following algorithms shall be supported:
\- FCFS (First Come First Served)
The following algorithms may be supported:
\- Chair-Controlled
\- The maximum number of users who can hold the Floor at the same time.
\- To assign and modify the Floor Chair, if the Floor is Chair-controlled.
The MRF may support the following:
\- Announcements/tones from network for indicating when a user gets and looses
the hold of the Floor (note: announcement may also be text or indication in
video)
2\. The MRF, acting as FCS, shall support the communication with the Floor
Participants and the Floor Chairs according to the BFCP protocol as described
in IETF RFC 4582 [20] , providing:
\- Communication between Floor Participant and FCS such that the participant
shall be able to request/ modify /release a Floor for the Floor Participant
himself or a third-party Floor Participant;
\- Communication between Floor Chair and FCS such that the Chair shall be able
to receive Floor requests and to grant/ reject/ revoke the Floor requests.
### 5.14.4 Information Flows
This clause covers the information flows between the UE and MRF.
#### 5.14.4.1 User requesting the Floor during a conference
Figure 5.14.4.1.1 shows a Floor Participant requesting the Floor to obtain the
right to talk during a conference. The UE#1 is a Floor Participant, the Floor
of the \"right to talk\" is Chair-controlled and the UE#2 is the Floor Chair
of the conference.
Figure 5.14.4.1.1: User requesting the Floor to obtain the right to talk
during a conference
The details of the flows are as follows:
1\. Conference session with UE#1 & UE#2 established
The UE#1 and UE#2 are participants of an existing conference. The BFCP
connections between the participant and the MRF need to be established before
the BFCP communication.
2\. FloorRequest
The UE#1 requests the MRF for the Floor of the \"right to talk\". The message
format is described in IETF RFC 4582 [20].
3\. FloorStatus
The MRF notifies the UE#2 the Floor request from UE#1. The message format is
described in IETF RFC 4582[20].
4\. ChairAction
The UE#2 grants the Floor request and sends instruction to the MRF to action.
The message format is described in IETF RFC 4582[20].
5\. ChairActionAck
The MRF acknowledges the ChairAction message. The message format is described
in IETF RFC 4582[20].
6\. Floor RequestStatus
The MRF informs UE#1 about the status of their Floor requests. The message
format is described in IETF RFC 4582[20].
7\. UE#1 send and receive media (or audio) from/to the conference
Now the UE#1 has been granted the Floor of the \"right to talk\", it may send
and receive the audio stream to the MRF.
#### 5.14.4.2 User releasing the Floor during a conference
Figure 5.14.4.2.1 shows a Floor Participant requesting to release the Floor to
give up the right to talk during a conference. The UE#1 is a Floor Participant
and owns the Floor of the \"right to talk\", the Floor is Chair-controlled and
the UE#2 is the Floor Chair of the conference.
Figure 5.14.4.2.1: User releasing the Floor to give up the right to talk
during a conference
The details of the flows are as follows:
1\. Conference session with UE#1 & UE#2 established
The UE#1 and UE#2 are participants of an existing conference. The BFCP
connections between the participant and the MRF need to be established before
the BFCP communication.
2\. FloorRelease
The UE#1 requests to release the MRF for the Floor of the \"right to talk\".
The message format is described in IETF RFC 4582 [20].
3\. FloorStatus
The MRF notifies the UE#2 the Floor release request from UE#1. The message
format is described in IETF RFC 4582[20].
4\. Floor RequestStatus
The MRF informs UE#1 about the status of the Floor release request. The
message format is described in IETF RFC 4582[20].
5\. UE#1 receive stream from the conference
Now the UE#1 has been revoked the right to talk, he may receive the audio
stream from the MRF only.
### 5.14.5 Requirements on Mp interface
### 5.14.5.1 Requirements for MRFP based FCS
The MRFC shall indicate to the MRFP the Floor Control Policy:
\- The algorithm to be used in granting the Floor.
\- The FCFS algorithm shall be supported.
\- The Chair-controlled algorithm may be supported.
\- The maximum number of users who can hold the same Floor at the same time.
\- To assign and modify the Floor Chair, if the Floor is Chair-controlled.
\- The Floor media type shall be audio, video or a combination of one or more
media type.
\- The association between Floors and resources.
The MRFP shall maintain the state of the Floor(s), including which Floors
exists, which terminations hold which Floors, and which termination is the
Floor Chair, if the floor is Chair-controlled.
The MRFC may request the MRFP to establish a BFCP connection between the MRFP
(FCS) and the Client (via Floor control Client Termination).
The MRFP shall support the communication with a Floor Participant such that
the participant may request/ modify /release a Floor for the Floor Participant
himself or a third-party Floor Participant according to the BFCP protocol
[20].
The MRFP may support the communication with Floor Chair such that the Chair
shall be able to receive Floor requests and to grant/ reject/ revoke the Floor
according to the BFCP protocol [20].
The MRFP shall (if requested by the MRFC) report to the MRFC any requests to
change the Floor holding status. The MRFC shall indicate to the MRFP to modify
the Client\'s access right to the media according to the changes in Floor
status.
The MRFC may request the MRFP to play tones (according to clause 5.1) or
announcements (according to clause 5.2) for indicating when a Client gains or
loses a Floor.
## 5.15 Explicit Congestion Notification Service Requirement
### 5.15.1 General
A MRFC/MRFP may support Multimedia Telephony using Explicit Congestion
Notification see IETF RFC 3168 [24], and may act as an ECN endpoint to enable
ECN with a local ECN-capable terminal within a local network that properly
handles ECN-marked packets.
This requires that the MRFC performs the following:
\- support SDP ability to negotiate ECN as described in 3GPP TS 26.114 [23].
This requires the MRFP to be capable of enabling end-to-end rate adaptation
due to congestion between the local Multimedia Telephony terminal and the MRFP
by performing the following towards the local Multimedia Telephony terminal:
\- trigger rate adaptation request towards the Multimedia Telephony terminal
when receiving incoming IMS media flow IP packets marked with ECN-CE;
\- perform media adaptation (e.g. reduce media bit-rate) towards the
Multimedia Telephony terminal when receiving from the latter an adaptation
request;
\- if requested by the MRFC, provide notification and an ECN failure event if
ECN errors or packet losses occur.
## 5.16 Multimedia Priority Service (MPS) Support
The Multimedia Priority Service (MPS) is specified in 3GPP TS 22.153 [26]. The
MRFC and MRFP may support the priority treatment of a call/session identified
as an MPS call/session. If MPS is supported then upon receipt of the MPS
priority information in the call control signalling:
\- The MRFC shall recognise the call/session as having priority.
\- The MRFC shall send the Priority information for a context to the MRFP to
enable the priority treatment described below related to the MRFP.
\- The MRFC shall apply priority handling to H.248 transactions related to
priority calls/sessions when network resources are congested, e.g.,
preferential treatment in any queues or buffers.
\- If the H.248 control association utilises a transport with the possibility
for prioritisation, the MRFC may apply priority using the appropriate
prioritisation procedures.
\- If the MPS Priority service requires a specific MPS DSCP setting, the MRFC
shall configure the MRFP to apply a specific MPS DSCP marking to the user data
transport packets to indicate that the packets are of a higher priority than
those for normal calls.
\- If the MRFP receives an indication to apply a specific MPS DSCP marking to
the user data transport packets, it shall apply this DSCP marking to the IP
headers.
NOTE 1: Support of Diffserv procedures by the MRFP assumes an operator uses
Diffserv for prioritising user plane traffic related to an MPS call/session.
\- When the MRFC marks a Context with Priority information, the MRFP may use
the Priority information for selecting resources for the media and signaling
transport with priority. The following actions may be taken by the MRFP if it
has reached a congested state:
i) seize priority reserved resources; or
ii) if resources are completely congested, indicate that in a Command Response
error code.
NOTE 2: The Priority information can be used to derive Layer 2 QoS marking and
trigger priority identification and priority treatment for other QoS
technologies than Diffserv.
## 5.17 Coordination of Video Orientation
The MRFC and the MRFP may support the Coordination of Video Orientation (CVO)
as defined in 3GPP TS 26.114 [23].
Upon receipt of an SDP offer containing the RTP header extension attribute(s)
\"a=extmap\" as defined in IETF RFC 5285 [27] and if the \"a=extmap\"
attribute indicates the CVO URN(s) (i.e. the CVO URN for a 2 bit granularity
of rotation and/or the CVO URN for a higher granularity of rotation) as
defined in 3GPP TS 26.114 [23], then:
a) if the MRFC and the MRFP support the CVO feature, the MRFC shall:
\- include an \"extended RTP header for CVO\" information element when seizing
resources in the MRFP to indicate the MRFP that it shall allow the RTP header
extension for CVO to pass; and
\- select exactly one of the CVO related \"a=extmap\" attribute from the SDP
offer and include the \"a=extmap\" attribute indicating selected CVO URN in
the SDP answer that will be sent within the SIP signalling; or
b) if the MRFP does not support the CVO feature the MRFC shall send the SDP
answer without any CVO related \"a=extmap\" attribute within the SIP
signalling.
NOTE 1: The UE supporting the CVO feature will not send the extended RTP
headers for CVO if the UE did not receive any SDP answer with the CVO related
\"a=extmap\" attribute.
When the MRFC selects one of the CVO related \"a=extmap\" attribute(s) from
the SDP offer the MRFC shall take into consideration which CVO variant it has
negotiated for CVO for other call leg(s) in the session.
If the MRFC and MRFP support the CVO feature then before sending an SDP offer,
the MRFC shall:
a) determine based on the local policy and the CVO negotiation results on
other call legs if, and with which granularity to offer CVO; and
b) if the MRFC determines to offer CVO:
\- the MRFC shall include the \"extended RTP header for CVO\" information
element when seizing resources in the MRFP to indicate the MRFP that it shall
allow the RTP header extension for CVO to pass; and
\- the MRFC shall include the CVO related \"a=extmap\" attribute in the SDP
offer it sends within the SIP signalling.
If the MRFP does not support the CVO feature, the MRFC shall send the SDP
offer without any CVO related \"a=extmap\" attribute within the SIP
signalling.
NOTE 2: The UE supporting the CVO feature will not send the extended RTP
headers for CVO if the UE did not receive any SDP offer with the CVO related
\"a=extmap\" attribute.
If the MRFP supports the CVO feature and has been instructed to pass on the
extended RTP header for CVO as described above then:
\- if the MRFP does not apply video transcoding, it shall pass any received
RTP CVO header extension to succeeding RTP streams; or
\- if the MRFP applies video transcoding, it shall keep the video orientation
unchanged during the transcoding and copy the received RTP CVO header
extension into the succeeding RTP streams after transcoding the associated
group of packets.
NOTE 3: IETF RFC 5285 [27] provides a framework for header extensions and can
also be used for non-CVO related purposes. It is an implementation decision of
the MRFP if it only passes CVO related RTP header extensions, or if it passes
any RTP header extension when being instructed with the \"extended RTP header
for CVO\" information element.
NOTE 4: The behaviour of the MRFP when being instructed with \"an extended RTP
header for CVO\" information element may be variable due to the settings on
the incoming and outgoing directions as listed in the table 5.17.1 and left
further for implementation decision.
NOTE 5: Unknown IETF RFC 5285 [27] RTP header extensions are ignored by the
destination RTP end system.
NOTE 6: In the conference scenarios when the picture mixing is needed, the
MRFP can perform the video rotation of picture elements according to the
received RTP CVO header extension for the associated pictures to achieve a
consistent orientation for all of the components in the mixture collage.
Table 5.17.1: MRFP behaviour with different settings of \"extended RTP header
for CVO\" information element in a particular direction
Connection Point A in incoming direction Connection Point B in outgoing
direction MRFP behaviour on CVO processing
* * *
With CVO With CVO Received RTP CVO header extension is forwarded to the
outgoing direction. With CVO No CVO Received RTP CVO header extension is
forwarded to the outgoing direction. No CVO With CVO No RTP CVO header
extension is forwarded since the source video does not contain any CVO
information.
## 5.18 Generic image attributes
The MRFC and the MRFP may support the generic image attributes to negotiate
the image size for sending and receiving video as required by 3GPP TS 26.114
[23].
If the MRFP and the MRFC support the negotiation of the image size and the
MRFC receives an SDP offer with the media-level SDP image attribute(s)
\"a=imageattr\", as defined in IETF RFC 6236 [28], and if the received image
sizes are supported by the MRFP then the MRFC shall:
\- include the generic image attribute parameters for the send and receive
directions when seizing or modifying resources in the MRFP; and
\- include the SDP image attribute \"a=imageattr\" indicating the supported
image sizes in the SDP answer on the Mr interface.
NOTE 1: The image attribute may be used within the SDP capability negotiation
framework and its use is then specified using the \"a=acap\" parameter.
NOTE 2: The MRFC not supporting the negotiation of the image size will ignore
received generic image attributes and will return the SDP answer without any
associated generic image attribute.
When sending the SDP body with image attribute(s) on the Mr interface the MRFC
shall include in the \"a=imageattr\":
\- \"recv\" keyword and corresponding image sizes which the MRFP supports in
the receiving direction; and
\- \"send\" keyword and corresponding image sizes which the MRFP supports in
the sending direction.
If the MRFP and the MRFC support the negotiation of the image size and the
MRFC sends an SDP offer for subsequent call leg in a conference, the MRFC
should include the SDP image attribute(s) \"a=imageattr\", with image sizes as
supported by the MRFP and negotiated at other call legs in the session.
If the MRFC receives an SDP answer containing the SDP image attribute
\"a=imageattr\", it shall modify resources in the MRFP if needed by indicating
the supported image sizes within the generic image attribute parameter.
If the MRFC supports the negotiation of the image size and if the MRFC sends
on the Mr interface the SDP body (offer or answer) it shall adjust the image
sizes to be the same for the call legs in the session.
If the MRFP does not support the negotiation of the image size the MRFC shall
send on the Mr interface the SDP body (offer or answer) without any image
attribute \"a=imageattr\".
If the MRFP is configured with different image sizes on the receive direction
of one termination and the send direction of another interconnected
termination, then it shall adjust the frame sizes accordingly when forwarding
video media streams and use the image size as described in 3GPP TS 26.114 [23]
when sending media.
NOTE 3: The relation between the negotiated image sizes and CVO are specified
in 3GPP TS 26.114 [23].
NOTE 4: The generic image attribute includes information related to the send
and receive capabilities of a single termination, and the adjustment of image
sizes is typically based on the setting of two connected terminations in a
single context.
## 5.19 Interactive Connectivity Establishment support
### 5.19.1 General
The MRFC and the MRFP may support Interactive Connectivity Establishment
defined in IETF RFC 5245 [29] and 3GPP TS 24.229 [30] for NAT traversal as
required by 3GPP TS 23.228 [1]. The present clause describes the requirements
for MRFC and MRFP when the ICE procedures are supported.
Support of full ICE functionality is optional, but if ICE is supported, the
MRFC and MRFP shall at least support ICE lite as specified in IETF RFC 5245
[29]_._
The MRFC and MRFP shall only use host candidates as local ICE candidates.
NOTE: MRFC and MRFP are not located behind a NAT from perspective of the ICE
deployment model according to Figure 1 in IETF RFC 5245 [29].
If ICE is supported, the MRFC shall perform separate ICE negotiation and
procedures independentantly on each call leg (e.g. with each conference
participant). Furthermore, the MRFC may be configured to apply ICE procedures
only towards the access network side.
When the MRFC detects no ICE parameters in the received SDP, it shall not
configure the MRFP to apply any ICE and STUN related procedures toward the
call leg from where the SDP has been received.
Any MRFC supporting ICE shall advertise its support of incoming STUN
continuity check procedures. An MRFC supporting full ICE procedures shall in
addition advertise its support for originating STUN connectivity check
procedures.
If the MRFP does not indicate the support of STUN procedures, or if the MRFC
is configured not to apply ICE toward a call leg, the MRFC shall not configure
the MRFP to apply STUN procedures.
### 5.19.2 ICE lite
If the MRFC is configured to use ICE lite, or supports only ICE lite, or
controls an MRFP that only support ICE lite, the procedures in the present
clause apply.
If the MRFC receives an initial SDP offer with ICE candidate information but
no \"a=ice-lite\" attribute, the MRFC:
\- shall request the MRFP for each media line where it decides to use ICE to
reserve an ICE host candidate and provide its address information and a
related ICE user name fragment and password;
NOTE 1: Requesting only one host candidate per m-line prevents that the MRFC
will receive \"a=remote-candidates\" SDP attributes in a subsequent SDP.
Requesting separate ufrag and password for each media line simplifies H.248
encoding.
\- shall configure the MRFP to act as STUN server at the host candidate
address, i.e. to answer STUN connectivity checks;
\- may provide received remote ICE candidates and the received related ICE
user name fragment and password to the MRFP;
\- shall include the host candidate and related ICE user name fragment and
password received from the MRFP in the SDP answer and;
\- shall include the \"a=ice-lite\" attribute in the SDP answer.
If the MRFC receives SDP offer with ICE candidate information and an \"a=ice-
lite\" attribute, the MRFC shall not apply ICE towards that call leg and not
include any ICE related SDP attributes in the SDP answer.
NOTE 2: This avoids that the ICE lite peer needs to send extra SDP offers to
complete ICE procedures.
If the MRFC sends an SDP offer towards a call leg where ICE is to be applied,
the MRFC:
\- shall request the MRFP to reserve a host candidate for each media line
where it decides to use ICE and provide its address information, user name
fragment and password;
\- shall configure the MRFP to act as STUN server at the host candidate
address, i.e. to answer STUN connectivity checks;
\- shall include the host candidate provided by the MRFP and related ICE user
name fragment and password in the SDP offer; and
\- shall include the \"a=ice-lite\" attribute in the SDP offer.
If the MRFC then receives an SDP answer with candidate information from the
call leg where ICE is to be applied, the MRFC may provide received remote ICE
candidates and the received related ICE user name fragment and password to the
MRFP.
After the initial SDP offer-answer exchange, the MRFC can receive a new offer
from the peer that includes updated address and port information in the SDP
\"c=\" line, \"m=\" line, or \"a=rtcp\" line SDP attributes. If the ICE user
name fragment and password in the SDP offer differ from the ones received in
the previous SDP (i.e. the peer restarts ICE), the MRFC shall apply the same
procedures as for the initial SDP offer.
When receiving a request for a host candidate for a media line, the MRFP shall
allocate one host candidate for that media line and send it to the MRFC within
the reply. The IP address and port shall be the same as indicated separately
as Local IP Resources. The MRFP shall also indicate that it supports ICE lite
in the reply.
When receiving a request for an ICE user name fragment and password, the MRFP
shall generate an ICE user name fragment and password and send it to the MRFC
within the reply. The MRFP shall store the password and user name fragment to
be able to authenticate incoming STUN binding request according to clause 7.2
of IETF RFC 5245 [29].
When receiving a request to act as STUN server, the MRFP shall be prepared to
answer STUN binding request according to clause 7.2 of IETF RFC 5245 [29].
Once a STUN binding request with the \"USE-CANDIDATE\" flag has been received,
the MRFP may send media towards the source of the binding request.
### 5.19.3 Full ICE
If the MRFC supports and is configured to use full ICE, and controls an MRFP
that supports full ICE, the procedures in the present clause apply.
If the MRFC receives an initial SDP offer with ICE candidate information, the
MRFC:
\- shall request the MRFP for each media line where it decides to use ICE to
reserve an ICE host candidate and provide its address information and a
related ICE user name fragment and password;
NOTE: Requesting only one host candidate per m-line prevents that the MRFC
will receive \"a=remote-candidates\" SDP attributes in a subsequent SDP.
Requesting separate ufrag and password for each media line simplifies H.248
encoding.
\- shall configure the MRFP to act as STUN server at the host candidate
address, i.e. to answer STUN connectivity checks;
\- shall provide received remote ICE candidates and the received related ICE
user name fragment and password to the MRFP;
\- shall include the host candidate and related ICE user name fragment and
password received from the MRFP in the SDP answer;
\- shall determine the role of the MRFC in ICE (controlling or controlled)
according to clause 5.2 of IETF RFC 5245 [29];
\- shall configure the MRFP to perform connectivity checks in accordance with
the determined ICE role;
\- shall configure the MRFP to report connectivity check results; and
\- shall configure the MRFP to report a new peer reflexive candidate if
discovered during the connectivity check.
If the MRFC sends an SDP offer towards a call leg where ICE is to be applied,
the MRFC:
\- shall request the MRFP to reserve a host candidate for each media line were
it decides to use ICE and provide its address information, ICE user name
fragment and password;
\- shall configure the MRFP to act as STUN server at the host candidate
address, i.e. to answer STUN connectivity checks; and
\- shall include the host candidate provided by the MRFP and related ICE user
name fragment and password in the SDP offer.
If the MRFC then receives an SDP answer with candidate information from the
call leg where ICE is to be applied, the MRFC:
\- shall provide received remote ICE candidates and the received related ICE
user name fragment and password to the MRFP;
\- shall determine the role of the MRFC in ICE (controlling or controlled)
according to clause 5.2 of RFC 5245 [29];
\- shall configure the MRFP to perform connectivity checks in accordance with
the determined ICE role;
\- shall configure the MRFP to report connectivity check results; and
\- shall configure the MRFP to report a new peer reflexive candidate if
discovered during the connectivity check.
When the MRFC is informed by the MRFP about new peer reflexive candidate(s)
discovered by the connectivity checks, it shall configure the MRFP to perform
additional connectivity checks for those candidates,
When the MRFC is informed by the MRFP about successful candidate pairs
determined by the connectivity checks, the MRFC shall send a new SDP offer to
its peer with contents according to clause 9.2.2.2 of IETF RFC 5245 [29] if it
has the controlling role and the highest-priority candidate pair differs from
the default candidates in previous SDP.
After the initial SDP offer-answer exchange, the MRFC can receive a new offer
from the peer that includes updated address and port information in the SDP
\"c=\" line, \"m=\" line, or \"a=rtcp\" line SDP attributes. If the ICE user
name fragment and password in the SDP offer differ from the ones received in
the previous SDP (i.e. the peer restarts ICE), the MRFC shall apply the same
procedures as for the initial SDP offer.
When receiving a request for a host candidate for a media line, the MRFP shall
allocate one host candidate for that media line and send it to the MRFC within
the reply. The IP address and port shall be the same as indicated separately
as Local IP Resources.
When receiving a request for an ICE user name fragment and password, the MRFP
shall generate an ICE user name fragment and password and send it to the MRFC
within the reply. The MRFP shall store the password and user name fragment to
be able to authenticate incoming STUN binding request according to clause 7.2
of IETF RFC 5245 [29].
When receiving a request to act as STUN server, the MRFP shall be prepared to
answer STUN binding request according to clause 7.2 of IETF RFC 5245 [29].
Once a STUN binding request with the \"USE-CANDIDATE\" flag has been received,
the MRFP may send media towards the source of the binding request.
When receiving a request to perform connectivity checks and to report
connectivity check results, the IMS AGW:
\- shall compute ICE candidate pairs according to clause 5.7 of IETF RFC 5245
[29];
\- shall schedule checks for the ICE candidate pairs according to clause 5.8
of IETF RFC 5245 [29];
\- shall send STUN connectivity checks for the scheduled checks according to
clause 7.1 of IETF RFC 5245 [29];
\- shall inform the MRFC about successful candidate pairs determined by the
connectivity checks;
\- shall inform the MRFC about new peer reflexive candidate(s) discovered by
the connectivity checks; and
\- should send media using the highest priority candidate pair for which
connectivity checks have been completed.
The MRFC and the MRFP shall check the conformance of the selected candidate
pair with the media address information in SDP.
## 5.20 IMS Media Plane Security
### 5.20.1 General
The MRFC and the MRFP may support IMS media plane security as specified in
3GPP TS 33.328 [31]. They may support end-to-end security (e2e) for a TCP (see
IETF RFC 793 [38]) based media using TLS and the Key Management Service (KMS).
The e2e media security of TCP is based on the session keys negotiated via the
TLS handshake protocol between the served UE and the MRFP as specified in 3GPP
TS 33.328 [31].
E2e security for TCP based media using TLS and KMS is applicable for MSRP (see
IETF RFC 4975 [18]; used in IMS session-based messaging conference) and BFCP
(see IETF RFC 4582 [20]; used in IMS conferencing). The MRFC and the MRFP may
support e2e security for MSRP, BFCP, or both protocols.
E2e protection of the MSRP and BFCP sessions is achieved through the KMS and a
\"ticket\" concept:
\- The session initiator requests keys and a ticket from the KMS. The ticket
contains the keys in a protected format. The initiator then sends the ticket
to the recipient.
\- The recipient presents the ticket to the KMS and the KMS returns the keys
on which the media security shall be based.
### 5.20.2 End-to-end security for TCP-based media using TLS
The e2e protection of the TCP based media relies on the usage of TLS (see IETF
RFC 5246 [32]), according to the TLS profile specified in Annex E of 3GPP TS
33.310 [47] and Annex M of 3GPP TS 33.328 [31].
The end-to-end security protection of session based messaging (MSRP) and
conferencing (BFCP) is based on the pre-shared key ciphersuites for TLS
(specified in IETF RFC 4279 [34] and with the profile defined in Annex H of
3GPP TS 33.328 [31]) and the MIKEY-TICKET mechanism (specified in IETF RFC
6043 [33] with the profiling of the tickets and procedures given in 3GPP TS
33.328 [31].
The Pre-Shared Key (PSK) is the Traffic-Encrypting Key (TEK) associated with
the Crypto Session (CS) that shall be used in the TLS handshake.
NOTE 1: The Security Parameters Index (SPI) in the CS points to a TEK
Generation Key (TGK) that is used to derive the TEK for the crypto session
using the CS ID (and some other parameters). The SPI could also point to a TEK
directly.
If the MRFC and the MRFP support and are configured to use the e2e protection
of the TCP based media using the pre-shared key ciphersuites for TLS and the
MIKEY-TICKET mechanism, the following functional requirements apply.
The list of pre-shared key ciphersuites for TLS supported by the MRFP shall be
preconfigured in the MRFC.
According to the TLS profile specified in Annex E of 3GPP TS 33.310 [47], the
MRFP shall accept TLS renegotiation only if it is secured according to IETF
RFC 5746 [46].
NOTE 2: IETF RFC 5746 [46] defines a \"TLS secure renegotiation\" procedure,
which leaves the definition of a basic TLS renegotiation still open. H.248
based support to enable the MRFC to allow or not allow the MRFP to perform
client initiated or server initiated TLS renegotiation is not addressed in the
present release. The behaviour of the MRFP for \"TLS session renegotiation\"
procedure is hence not further defined in the present release.
The MRFC acting as the session initiator shall:
\- prepare the media security offer in the SDP body of the SIP INVITE request;
\- include a single crypto session of type TLS in the TRANSFER_INIT message
according to procedures specified in 3GPP TS 33.328 [31]; and
NOTE 3: Depending on the KMS and a local policy, the MRFC will either interact
with the KMS to obtain keys and the MIKEY-TICKET ticket usable for the served
UE or will create the ticket by itself. In the latter case, MIKEY-TICKET mode
3 as specified in IETF RFC 6043 [33] is used, and the MRFC will then perform
all key and ticket generation functions otherwise performed by the KMS.
\- insert in the SDP offer the SDP key management protocol attribute \"a=key-
mgmt\" specified in IETF RFC 4567 [35] which indicates use of the MIKEY-TICKET
ticket and contains the TRANSFER_INIT message.
Upon receipt of the SIP response with the SDP answer the MRFC shall check that
the responder is authorized before completing the media security setup. If the
MRFC notices that the other endpoint is not as expected, the MRFC shall abort
the session setup. Otherwise the MRFC shall derive the PSK and shall send it
to the MRFP.
Upon receipt of the SIP INVITE request with the SDP offer containing the media
security offer and the SDP key management protocol attribute \"a=key-mgmt\"
specified in IETF RFC 4567 [35] which indicates use of the MIKEY-TICKET ticket
and contains the TRANSFER_INIT message the MRFC shall:
\- check if it is authorized to resolve the ticket and if that is the case the
MRFC interacts with the KMS to resolve the ticket and receive keys;
\- include the MIKEY-TICKET response in the generated TRANSFER_RESP message;
\- insert in the SDP answer the SDP key management protocol attribute \"a=key-
mgmt\" specified in IETF RFC 4567 [35] which indicates use of the MIKEY-TICKET
ticket and contains the TRANSFER_RESP message; and
\- shall derive the PSK and shall send it to the MRFP.
The MRFC acting as the session initiator or the session responder shall:
\- determine via SDP negotiation as specified in IETF RFC 4145 [36] if the
MRFP needs to act as TCP client or server;
\- request the MRFP to start the TCP connection establishment if the MRFP
needs to act as TCP client;
\- determine via SDP negotiation if the MRFP needs to act as TLS client or
server as specified in the clauses below;
NOTE 4: The determination of the TLS client/server role relies on different
rules for MSRP and BFCP.
\- if the MRFP needs to act as TLS client, request the MRFP to start the TLS
session setup once the TCP connection is established towards the served UE;
and
\- apply additional specific procedures specified for the MSRP in clause
5.20.3 or for the BFCP in clause 5.20.4.
The MRFP shall:
\- upon request from the MRFC, start a TCP connection establishment by sending
a TCP SYN;
\- release the underlying TCP bearer connection as soon as the TLS session is
released;
\- be capable to support both the TLS server and TLS client roles;
\- when being instructed to start the TLS session setup, act as a TLS client
and establish the TLS session as soon as the underlying TCP bearer connection
is established;
\- uniquely associate the PSK received from the MRFC with the corresponding
TCP based media stream;
\- use the received PSK in the TLS handshake; and
\- apply additional specific procedures specified for the MSRP in clause
5.20.3 or for the BFCP in clause 5.20.4.
### 5.20.3 Specific requirements for session based messaging (MSRP)
For the each MSRP media stream requiring e2e security, the MRFC shall:
a) indicate \"TCP/TLS/MSRP\" as transport protocol when requesting resources
from the MRFP; and
b) determine via SDP negotiation if the MRFP needs to act as TLS client or TLS
server as specified in IETF RFC 8122 [39] using the IETF RFC 4145 [36]
\"a=setup\" SDP attribute as follows:
\- if the MRFC sends the \"a=setup:active\" SDP attribute in the SDP answer
towards the UE, the MRFP shall act as TLS client;
\- if the MRFC sends the \"a=setup:passive\" SDP attribute in the SDP answer
towards the UE, the MRFP shall act as TLS server;
\- if the MRFC receives the \"a=setup:active\" SDP attribute in the SDP answer
from the UE, the MRFP shall act as TLS server; and
\- if the MRFC receives the \"a=setup:passive\" SDP attribute in the SDP
answer from the UE, the MRFP shall act as TLS client.
NOTE: Since the \"a=setup:\" SDP attribute is used for the negotiation of the
client/server roles for both protocols, TCP and TLS, then the assignment of a
particular endpoint role (client or server) also applies for both protocols
(e.g. the TLS server role assignment means also the TCP server role
assignment).
The MRFP shall send the TLS protected MSRP packets to the served UE and shall
accept the TLS protected MSRP packets from the served UE as requested by the
MRFC.
### 5.20.4 Specific requirements for conferencing (BFCP)
For the each BFCP media stream requiring e2e security, the MRFC shall:
a) indicate \"TCP/TLS/BFCP\" as transport protocol when requesting resources
from the MRFP; and
b) determine via SDP negotiation (see IETF RFC 4583 [21]) if the MRFP needs to
act as TLS client or TLS server as follows:
\- if the MRFC receives an initial SDP offer from the served UE, the MRFP
shall act as TLS server; or
\- if the MRFC sends an initial SDP offer towards the served UE, the MRFP
shall act as TLS client.
The MRFP shall send the TLS protected BFCP packets to the served UE and shall
accept the TLS protected BFCP packets from the served UE as requested by the
MRFC.
## 5.21 TCP bearer connection control
If an MRFC and an MRFP support TCP as transport protocol (see IETF RFC 793
[38] and IETF RFC 4145 [36]), the following functional requirements apply.
NOTE 1: Support of TCP is required if the MRFC and the MRFP support the
session based messaging (MSRP), (see IETF RFC 4975 [18]), and the conferencing
using the floor control service (BFCP), (see IETF RFC 4582 [20]).
NOTE 2: It is assumed that these requirements also apply to pre-Release 12
MRFCs and MRFPs.
Upon reception of an SDP offer or an SDP answer containing a media line for a
new TCP based media stream, the MRFC shall for that TCP based media stream:
\- determine via SDP negotiation if the MRFP needs to act as TCP client or TCP
server using the IETF RFC 4145 [36] \"a=setup\" SDP attribute as follows:
a) if the MRFC sends the \"a=setup:active\" SDP attribute in the SDP answer
towards the conference participant, the MRFP shall act as TCP client;
b) if the MRFC sends the \"a=setup:passive\" SDP attribute in the SDP answer
towards the conference participant, the MRFP shall act as TCP server;
c) if the MRFC receives the \"a=setup:active\" SDP attribute in the SDP answer
from the conference participant, the MRFP shall act as TCP server; and
d) if the MRFC receives the \"a=setup:passive\" SDP attribute in the SDP
answer from the conference participant, the MRFP shall act as TCP client;
\- if no media security is applied, indicate \"TCP/MSRP\" (for session based
messaging) or \"TCP/BFCP\" (for conferencing) as transport protocol to the
MRFP;
\- if media security is applied, indicate the transport protocol according to
clause 5.20 to the MRFP;
\- request the MRFP to allocate a TCP port at the termination towards the SDP
offerer/answerer;
\- indicate TCP port number from the received SDP offer/answer in the remote
descriptor at the termination towards the SDP offerer/answerer;
\- request the MRFP to start a TCP connection establishment if the MRFP needs
to act as TCP client; and
\- request the MRFP to report TCP connection establishment related failures.
Upon request from the MRFC to reserve and/or configure resources for TCP based
media the MRFP shall:
\- if being instructed to start TCP connection establishment at a given
termination, start TCP connection establishment at that TCP termination by
sending a TCP SYN message;
\- if not being instructed to start TCP connection establishment at a given
termination, answer any received TCP SYN message at a given termination with
appropriate messages according to TCP procedures; and
NOTE 3: The MRFP will use the source IP address and TCP port of the received
TCP SYN message as a destination address for the TCP SYN ACK message.
\- report TCP connection establishment related failures to the MRFC.
## 5.22 Support of Telepresence
### 5.22.1 General
If the MRFC and the MRFP support telepresence, as specified in 3GPP TS 24.103
[52] and if the CLUE data channel used for telepresence is terminated in the
MRFP, the following requirements and procedure apply.
### 5.22.2 Characteristics of the Telepresence support
The characteristics of the telepresence support by the MRFC and the MRFP are
the following:
1) Regarding usage of CLUE data channel with respect to H.248
context/termination/stream model:
a) there is only one single H.248 termination for the telepresence bearer
traffic of a single conference participant, which covers all telepresence
media traffic flows and CLUE for control purposes;
b) there is only one CLUE data channel per conference participant (i.e., per
H.248 termination);
c) the CLUE protocol including the underlying transport of a CLUE data
channel, SCTP association, DTLS and lower layer protocols are modelled by a
single H.248 stream; and
d) there is only one single CLUE data channel per SCTP association, hence a
single SCTP stream only;
2) Regarding the transport protocol stack:
a) the L4 protocol is always \"UDP\";
NOTE 1: Any switchover to or alternative usage of \"TCP\" (due to possible NAT
traversal issues) is out of scope. The option of DTLS-over-TCP is not
supported (despite the fact that the CLUE data channel is based on the
framework of WebRTC data channels).
3) For the protocol termination of SCTP in the MRFP:
a) the protocol parameter configuration for the SCTP is done via configuration
management or default value settings, apart from the information elements
(specified in clause 5.22.3) which are signalled between the MRFC and the MRFP
using the SDP for SCTP;
4) Regarding the establishment procedures for DTLS and SCTP:
a) the establishment of a SCTP association is tightly coupled to the
successful establishment of the underlying DTLS session/connection;
b) only an _immediate_ SCTP establishment is supported;
NOTE 2: Hence, an _explicit information_ element for triggering the sending of
an outgoing SCTP establishment request is not required.
c) the MRFP will immediately send an outgoing SCTP establishment request (SCTP
INIT) when DTLS layer connectivity is available, if the MRFP did not already
receive an incoming SCTP establishment request;
5) Regarding the procedure for closing the CLUE data channel:
NOTE 3: The closure procedure according to clause 3.2.7 of IETF RFC 8850 [49]
is not supported (because the correspondent \"SCTP reset message\" cannot be
explicitly triggered by the MRFC.
a) the MRFP will deny during the SCTP association establishment phase the
negotiation of SCTP extensions (such as the SCTP stream reset capability) in
order to prevent their later usage for a closure procedure; and
b) a CLUE data channel is released by a removal of the H.248 stream endpoint
or the subtraction of the H.248 termination, or a release procedure of the
DTLS bearer session. All these triggers lead firstly to a SCTP shutdown
procedure and then a subsequent DTLS bearer session release procedure;
6) security aspects:
a) incoming DTLS session/connection establishment request is not blocked; and
b) incoming SCTP association establishment request is not blocked.
### 5.22.3 CLUE data channel establishment
For establishing a CLUE data channel an SDP-based \"SCTP over DTLS\" data
channel negotiation mechanism is used. SDP offer/answer transactions between
the MRFC and the served TP UE are based on the SDP offer/answer procedure
specified in IETF RFC 8841 [48] and IETF RFC 8842 [65]. The SDP describing an
SCTP association over DTLS/UDP to be used to realize a CLUE data channel
contains:
\- \"m=\" line with \"UDP/DTLS/SCTP\" as transport protocol and UDP port;
\- associated pair of \"tls-id\" SDP attribute values (the attribute values of
the TP UE and the MRFC, see IETF RFC 8842 [65]);
\- associated \"sctp-port\" and optional \"max-message-size\" attributes (see
IETF RFC 8841 [48]); and
\- associated \"dcmap\" attribute (specified in IETF RFC 8864 [50]) with a
\"stream-id\" parameter set to a value of the used SCTP stream and a
subprotocol parameter set to \"CLUE\" as specified in IETF RFC 8850 [49].
For the media line with \"UDP/DTLS/SCTP\" as transport protocol to be set up
for a CLUE data channel, the MRFC:
\- shall send the remote UDP port and SCTP port to the MRFP;
\- shall request the local UDP port and SCTP port from the MRFP;
\- shall indicate the MRFP to start a DTLS bearer session establishment at the
termination towards the SDP offerer, if the received SDP offerer contains an
\"a=setup:passive\" SDP attribute;
\- shall send the dcmap-stream-id parameter that is contained in the received
SDP offer, indicating the actual SCTP stream identifier with the SCTP
association (over DTLS/UDP) used to realize the CLUE data channel;
\- shall send the subprotocol value of \"CLUE\", indicating the protocol to be
exchanged via the data channel;
\- if the max-message-size parameter is contained in the received SDP offer,
may forward the received max-message-size parameter, indicating to the MRFP
the maximum message size the served TP UE is willing to accept;
\- may request the maximum message size the MRFP is willing to accept;
\- shall send the received TP UE certificate fingerprint to the MRFP that is
then able to correlate the fingerprint within the CLUE data channel uniquely;
and
\- shall request the certificate fingerprint from the MRFP, for the \"m=\"
line to be transported between the served TP UE and the MRFP using CLUE data
channel.
For the media line with \"UDP/DTLS/SCTP\" as transport protocol to be set up
for a CLUE data channel, the MRFP shall:
\- allocate the local UDP port and SCTP port, and send them to the MRFC;
\- when being instructed to start the DTLS bearer session setup, act as a DTLS
client and establish the DTLS bearer session;
\- if it is requested from the MRFC, set the maximum message size that is
acceptable for the CLUE data channel and send it to the MRFC;
\- upon request from the MRFC, select an own certificate for the CLUE data
channel, and send the fingerprint of the own certificate to the MRFC;
\- uniquely associate the certificate fingerprint received from the MRFC with
the corresponding CLUE data channel, and subsequently use the certificate
fingerprint to verify the establishment of the DTLS bearer session;
\- if the verification of the remote certificate fingerprint during the DTLS
bearer session establishment fails, regard the remote DTLS endpoint as not
authenticated, terminate the DTLS bearer session and report the unsuccessful
DTLS bearer session setup to the MRFC; and
\- indicate the support of the required SCTP extensions (i.e. RE-CONFIG) and
other SCTP considerations as defined in clause 3.2 of IETF RFC 8850 [49] at
the start of the SCTP association.
### 5.22.4 Release of CLUE data channel
To close the CLUE data channel, the MRFC may instruct the MRFP to release the
underlying communication (i.e., protocol stack UDP/DTLS/SCTP) for the CLUE
data channel, which may result in triggering the release of the DTLS bearer
session (which then will implicitly lead to a SCTP association shutdown
procedure).
Regarding the SCTP reset, the MRFP shall provide a pre-configured (i.e.,
autonomous) behaviour by preventing \"SCTP Stream Reconfiguration\" procedures
as specified in IETF RFC 6525[51], which results in:
1) for an outgoing direction: the MRFP shall not initiate any \"Sender-Side
Procedures for the RE-CONFIG Chunk\", as specified in IETF RFC 6525[51]; and
2) for an incoming direction: the MRFP shall deny any SCTP re-configuration
request (as part of \"Receiver-Side Procedures for the RE-CONFIG Chunk\", as
specified in IETF RFC 6525[51]) in order to prevent possible later usage of
SCTP stream reset requests.
### 5.22.5 CLUE transport between MRFC and MRFP
When the data channel is terminated in the MRFP for telepresence, CLUE
messages (e.g. OPTIONS, ADVERTISEMENT, CONFIGURE etc.) are sent from the MRFC
to the MRFP to be exchanged via the CLUE data channel between the MRFP and the
TP UE.
When the MRFC requests the MRFP to establish a CLUE data channel the MRFC
shall include a Notify CLUE Message Received Event information element to
request the MRFP a reporting of the received CLUE message.
When a CLUE message needs to be sent to the TP UE the MRFC shall request the
MRFP to send the CLUE message.
Upon reception of the request to send CLUE message from the MRFC containing
the CLUE message content the MRFP shall send the CLUE message to the TP UE.
When a CLUE message is received from the TP UE, the MRFP shall send the
content of the received CLUE message to the MRFC.
5.23 SDP Capability Negotiation (SDPCapNeg)
The SDP Capability Negotiation (SDPCapNeg) as specified in IETF RFC 5939 [53]
is adopted as an optional functionality to negotiate capabilities and their
associated configurations according to 3GPP TS 24.229 [30].
Upon receipt of an incoming SDP offer containing the attributes of SDP
capability negotiation, e.g. offer AVPF and AVP together for the RTP profile
negotiation using \"a=tcap\", \"a=pcfg\" and \"a=acfg\" attributes, the MRFC
acting as the session responder shall make the decision on support of the
alternative configurations based on the MRFC/MRFP capability as provision, and
request the MRFP to reserve resources only for the configuration as selected.
The MRFC then send the SDP answer indicating the selected configuration in the
\"a=acfg\" attribute for actual configurations.
The MRFC acting as the session initiator may signal SDPCapNeg to the MRFP,
e.g. the MRFC wildcards the supporting configurations from the MRFP in order
to construct an SDP offer with the alternative configurations via SDPCapNeg
attributes.
> NOTE: The additional benefit of signalling SDPCapNeg between the MRFC and
> the MRFP is to check the resource availability for the corresponding
> configurations and to avoid the further session failure in case of
> inadequate resources for the configuration changes in the final
> confirmation. However, due to the extra resources reserved only during the
> call establishment phase, there is increased risk of call establishment
> failure.
In case the MRFC decides to request the MRFP to reserve resources for all of
those configurations, the MRFC shall:
> \- use legacy SDP attributes as specified in IETF RFC 4566 [53] to do the
> mapping of actual and potential configurations with the H.248 ReserveGroup
> concept; or
>
> \- use SDP extensions for SDP capability negotiation as specified in IETF
> RFC 5939 [53], if supported by the MRFP.
Before using SDP extensions for SDP capability negotiation as specified in
IETF RFC 5939 [53] towards the MRFP, the MRFC shall perform the necessary
checks (i.e. through auditing or via prior provisioning) to ensure that the
MRFP supports the syntax and capabilities requested. For an auditing the
procedure in clause 6.1.8.1 is used with the \"SDPCapNeg Supported
Capabilities\" as the object.
When receiving a request from the MRFC with information element \"SDPCapNeg
configuration\" indicating the potential use of multiple configurations, the
MRFP shall reserve resources for all of those configurations that it supports
and shall send indicate the configurations for which it reserved resources in
an \"SDPCapNeg configuration\" information element in the response. The MRFC
shall update the SDP offer with SDPCapNeg configurations in the response from
the MRFP and shall forward the SDP offer to the next hop.
On receipt of an SDP answer with SDPCapNeg, the MRFC shall request the MRFP to
configure the resources for the selected configuration. If the MRFP previously
reserved any temporary resources for configurations that were not selected,
the MRFC shall also request the MRFP to release those resources.
## 5.24 Video Region-of-Interest (ROI)
### 5.24.1 General
The MRFC and the MRFP may support the video Region-of-Interest (ROI) as
defined in 3GPP TS 26.114 [23]. Three modes are specified for supporting ROI,
including \"Far End Camera Control (FECC)\", \"Arbitrary ROI\" and
\"Predefined ROI\". The MRFC and the MRFP may independently support any of
these modes.
For the forthcoming clauses on \"Far End Camera Control (FECC)\", \"Arbitrary
ROI\" and \"Predefined ROI\", the MRF procedures allow for only a single ROI-
sending client in a given conference to receive and act on ROI requests for a
given ROI mode, but they allow for multiple ROI-receiving clients to issue and
send ROI requests. Once the MRFC successfully completes the ROI capability
negotiation with the ROI-sending client, it offers the corresponding ROI
capabilities to other ROI-receiving clients in the conference and instructs
the MRFP to signal ROI request(s) to the ROI-sending client based on the ROI
requests it receives from the ROI-receiving clients.
### 5.24.2 \"Far End Camera Control\" mode
The MRFC and MRFP may support the \"Far End Camera Control\" mode as specified
in 3GPP TS 26.114 [23]. If the MRFC and MRFP support the \"Far End Camera
Control\" mode, the MRFC and MRFP shall apply the procedures in the present
clause.
Upon receipt of an SDP offer containing an \"m=\" line with a media type
\"application/h224\", as defined by IETF RFC 4573 [54] which indicates support
for FECC (ITU-T Recommendation H.281 [56]) using ITU-T Recommendation H.224
[55], the MRFC shall determine based on the local policy and the ROI
negotiation results on other call legs whether to accept this \"FECC\" offer.
If the \"FECC\" offer is accepted, the MRFC shall:
\- include the \"m=\" and \"a=\" lines related to the \"application/h224\"
media types (see the related SDP examples in annex A.4.2e of 3GPP TS 26.114
[23]) in the SDP answer that will be sent within the SIP signalling;
\- request the MRFP to provide a separate IP/UDP/RTP transport for the
\"application/h224\" media stream by setting the \"m=\" line media type to
\"application\" and \"RTP/AVP\" or \"RTP/AVPF\" over UDP as transport protocol
when reserving the transport resources, and forward transparently RTP/UDP
packets (with the transparent (H.224)-PDU); and
\- only one of the SDP offers containing \"a=sendrecv\" or \"a=recvonly\"
capabilities shall be responded by the MRFC with an SDP answer with an
indication of \"a=sendonly\" and other such SDP offers, if accepted, shall be
responded by the MRFC with an SDP answer with an indication of \"a=recvonly\".
\- request the MRFP to pass RTP flows from the terminations where the MRFC
replied with \"a=recvonly\" in the SDP answer to the termination where the
MRFC replied with \"a=sendonly\" in the SDP answer.
NOTE 1: There may be one media type \"application/h224\" \"m=\" line for each
video \"m=\" line.
NOTE 2: The use of FECC itself is internal to the H.224 frame and is
identified by the client ID field of the H.224 packet. The MRFC only indicates
the use of IP/UDP/RTP. The use of FECC is signalled via H.224 by a MTSI
client.
If the MRFP does not support the FECC feature or the MRFC determines that the
\"FECC\" offer should not be accepted based on the local policy and the ROI
negotiation results on other call legs, the MRFC shall send the SDP answer
without any \"m=\" and \"a=\" lines related to the \"application/h224\" media
types within the SIP signalling.
If the MRFC and MRFP support the FECC feature then before sending an SDP
offer, the MRFC shall:
a) determine based on the local policy and the FECC negotiation results on
other call legs to offer FECC; and
b) if the MRFC determines to offer FECC:
\- the MRFC shall include the \"m=\" and \"a=\" lines related to the
\"application/h224\" media types in the SDP offer it sends within the SIP
signalling; and
\- request the MRFP to provide a separate IP/UDP/RTP transport for the
\"application/h224\" media stream by setting the \"m=\" line media type to
\"application\" and \"RTP/AVP\" or \"RTP/AVPF\" over UDP as transport protocol
when reserving the transport resources, and forward transparently RTP/UDP
packets (with the transparent (H.224)-PDU)
> \- only one of the SDP offers from the MRFC shall contain \"a=sendonly\" and
> remaining SDP offers from the MRFC shall contain \"a=recvonly\".
>
> \- request the MRFP to pass RTP flows from the terminations where the MRFC
> indicated with \"a=recvonly\" in the SDP offer to the termination where the
> MRFC indicated with \"a=sendonly\" in the SDP offer.
If the MRFP does not support the FECC feature, the MRFC shall send the SDP
offer without any FECC related SDP attributes within the SIP signalling.
### 5.24.3 \"Predefined ROI\" mode
The MRFC and MRFP may support the \"Predefined ROI\" mode as specified in 3GPP
TS 26.114 [23]. If the MRFC and MRFP support the \"Predefined ROI\", the MRFC
and MRFP shall apply the procedures in the present clause.
Upon receipt of an SDP offer containing the predefined ROI attribute(s)
\"a=predefined_ROI\" defined in 3GPP TS 26.114 [23], the MRFC shall determine
based on the local policy and the ROI negotiation results on other call legs
whether to accept this \"Predefined ROI\" offer. If the \"Predefined ROI\"
offer is accepted, the MRFC shall include the accepted set of predefined ROIs
in the SDP answer by indicating them using the \"a=predefined_ROI\" attributes
that will be sent within the SIP signalling (see the related SDP examples in
annex A.4.2e of 3GPP TS 26.114 [23]). The accepted set of predefined ROIs
shall be based on the predefined ROIs offered by the client designated by the
MRFC as the ROI-sending client. For the response to the ROI-sending client,
the SDP answer from the MRFC shall not contain \"a=predefined_ROI\"
attributes. If the MRFP does not support the Predefined ROI feature or the
MRFC determines that the \"Predefined ROI\" offer should not be accepted based
on the local policy and the ROI negotiation results on other call legs, the
MRFC shall send the SDP answer without any \"a=predefined_ROI\" attributes
within the SIP signalling.
Upon receipt of an SDP offer containing an \"a=rtcp-fb\" line with the
\"Predefined ROI\" type expressed by the parameter \"3gpp-roi-predefined\", as
described in 3GPP TS 26.114 [23], the MRFC shall determine based on the local
policy and the ROI negotiation results on other call legs whether to accept
this \"Predefined ROI\" offer. If the \"Predefined ROI\" offer is accepted,
the MRFC shall:
\- at the termination towards the ROI-sending client, include the \"Predefined
ROI Sent\" information element when seizing resources in the MRFP to indicate
to the MRFP that it shall signal RTCP \"FB ROI\" feedback message(s) related
to predefined ROI on that termination and request the MRFP to assign the
related resources for the corresponding RTCP control flow to convey pre-
defined ROI information;
\- at a termination towards an ROI-receiving client, include the \"Predefined
ROI Received\" information element when seizing resources in the MRFP to
indicate to the MRFP that it shall accept RTCP \"FB ROI\" feedback message(s)
related to predefined ROI on that termination and request the MRFP to assign
the related resources for the corresponding RTCP control flow to convey pre-
defined ROI information; and
\- include \"a=rtcp-fb\" lines related to the \"3gpp-roi-predefined\"
parameter in the SDP answer that will be sent within the SIP signalling (see
the related SDP examples in annex A.4.2e of 3GPP TS 26.114 [23]); and
NOTE: The RTCP control flow contains multiple RTCP packet types.
If the MRFP does not support the Predefined ROI feature or the MRFC determines
that the \"Predefined ROI\" offer should not be accepted based on the local
policy and the ROI negotiation results on other call legs, the MRFC shall send
the SDP answer without any \"a=rtcp-fb\" lines related to the \"3gpp-roi-
predefined\" parameter within the SIP signalling.
Upon receipt of an SDP offer containing \"a=extmap\" attribute(s), as defined
in IETF RFC 5285 [27], and the \"a=extmap\" attribute(s) contain the pre-
defined ROI URN(s) (i.e. the ROI URN for carriage of pre-defined region of
interest information in the sent video stream is given by
\"urn:3gpp:predefined-roi-sent\") as defined in 3GPP TS 26.114 [23], then the
MRFC shall determine based on the local policy and the ROI negotiation results
on other call legs whether to accept this \"Predefined ROI\" offer. If the
\"Predefined ROI\" offer is accepted, the MRFC shall:
\- include the \"Extended RTP header for Sent ROI\" information element when
seizing resources in the MRFP to indicate to the MRFP that it shall allow the
RTP header extension for predefined ROI to pass; and
\- include \"a=extmap\" attributes containing the pre-defined ROI URN in the
SDP answer that will be sent within the SIP signalling (see the related SDP
examples in annex A.4.2e of 3GPP TS 26.114 [23]).
If the MRFP does not support the Predefined ROI feature or the MRFC determines
that the \"Predefined ROI\" offer should not be accepted based on the local
policy and the ROI negotiation results on other call legs, the MRFC shall send
the SDP answer without any Predefined ROI related \"a=extmap\" attribute
within the SIP signalling.
If the MRFC and MRFP support the Predefined ROI feature then before sending an
SDP offer, the MRFC shall:
a) determine based on the local policy and the Predefined ROI negotiation
results on other call legs if, and with what configurations to offer
Predefined ROI; and
b) if the MRFC determines to offer Predefined ROI:
> \- at the termination towards the ROI sending client, the MRFC shall include
> the \"Predefined ROI Sent\" information element when seizing resources in
> the MRFP to indicate to the MRFP that it shall signal RTCP \"FB ROI\"
> feedback message(s) related to predefined ROI on that termination and
> request the MRFP to assign the related resources for the corresponding RTCP
> control flow to convey pre-defined ROI information;
>
> \- at a termination towards an ROI receiving client, the MRFC shall include
> the \"Predefined ROI Received\" information element when seizing resources
> in the MRFP to indicate to the MRFP that it shall accept RTCP \"FB ROI\"
> feedback message(s) related to predefined ROI on that termination and
> request the MRFP to assign the related resources for the corresponding RTCP
> control flow to convey pre-defined ROI information;
\- the MRFC shall include \"a=rtcp-fb\" lines related to the \"3gpp-roi-
predefined\" parameter along with the associated \"a=predefined_ROI\"
attributes in the SDP offer it sends within the SIP signalling;
\- the MRFC shall include the offered set of predefined ROIs by indicating
them using the \"a=predefined_ROI\" attributes in the SDP offer it sends
within the SIP signalling, where the offered set of predefined ROIs shall be
based on the predefined ROIs offered by the client designated by the MRFC as
the ROI-sending client.;
\- the MRFC shall include the \"extended RTP header for Sent ROI\" information
element for Predefined ROI when seizing resources in the MRFP to indicate the
MRFP that it shall allow the RTP header extension for predefined ROI to pass;
and
\- the MRFC shall include the Predefined ROI related \"a=extmap\" attribute in
the SDP offer it sends within the SIP signalling.
If the MRFP does not support the Predefined ROI feature, the MRFC shall send
the SDP offer without any Predefined ROI related SDP attributes within the SIP
signalling.
If the MRFP has been instructed to pass on the extended RTP header for
predefined ROI as described above then:
\- if the MRFP does not apply video transcoding, it shall pass any received
RTP header extension for Predefined ROI to succeeding RTP streams; or
\- if the MRFP applies video transcoding, it shall keep the predefined ROI
information unchanged during the transcoding and copy the received RTP header
extension for Predefined ROI to the succeeding outgoing RTP stream(s) after
transcoding the associated group of packets.
### 5.24.4 \"Arbitrary ROI\" mode
The MRFC and MRFP may support the \"Arbitrary ROI\" mode as specified in 3GPP
TS 26.114 [23]. If the MRFC and MRFP support the \"Arbitrary ROI\", the MRFC
and MRFP shall apply the procedures in the present clause.
Upon receipt of an SDP offer containing an \"a=rtcp-fb\" line with the \"
Arbitrary ROI\" type expressed by the parameter \"3gpp-roi-arbitrary\", as
described in 3GPP TS 26.114 [23], the MRFC shall determine based on the local
policy and the ROI negotiation results on other call legs whether to accept
this \"Arbitrary ROI\" offer. If the \"Arbitrary ROI\" offer is accepted, the
MRFC shall:
\- at the termination towards the ROI-sending client, include the \"Arbitrary
ROI Sent\" information element when seizing resources in the MRFP to indicate
to the MRFP that it shall signal RTCP \"FB ROI\" feedback message(s) related
to arbitrary ROI on that termination and request the MRFP to assign the
related resources for the corresponding RTCP control flow to convey arbitrary
ROI information;
\- at a termination towards an ROI-receiving client, include the \"Arbitrary
ROI Received\" information element when seizing resources in the MRFP to
indicate to the MRFP that it shall accept RTCP \"FB ROI\" feedback message(s)
related to arbitrary ROI on that termination and request the MRFP to assign
the related resources for the corresponding RTCP control flow to convey
arbitrary ROI information; and
\- include \"a=rtcp-fb\" lines related to the \"3gpp-roi-arbitrary\" parameter
in the SDP answer that will be sent within the SIP signalling (see the related
SDP examples in annex A.4.2e of 3GPP TS 26.114 [23]).
NOTE: The RTCP control flow contains multiple RTCP packet types.
If the MRFP does not support the Arbitrary ROI feature or the MRFC determines
that the \"Arbitrary ROI\" offer should not be accepted based on the local
policy and the ROI negotiation results on other call legs, the MRFC shall send
the SDP answer without any \"a=rtcp-fb\" lines related to the \"3gpp-roi-
arbitrary\" parameter within the SIP signalling.
Upon receipt of an SDP offer containing \"a=extmap\" attribute(s), as defined
in IETF RFC 5285 [27], and the \"a=extmap\" attribute(s) contain the arbitrary
ROI URN(s) (i.e. the ROI URN for carriage of arbitrary region of interest
information in the sent video stream is given by \"urn:3gpp:roi-sent\") as
defined in 3GPP TS 26.114 [23], then the MRFC shall determine based on the
local policy and the ROI negotiation results on other call legs whether to
accept this \"Arbitrary ROI\" offer. If the \"Arbitrary ROI\" offer is
accepted, the MRFC shall:
\- include the \"Extended RTP header for Sent ROI\" information element when
seizing resources in the MRFP to indicate to the MRFP that it shall allow the
RTP header extension for arbitrary ROI to pass; and
\- include \"a=extmap\" attributes containing the arbitrary ROI URN in the SDP
answer that will be sent within the SIP signalling (see the related SDP
examples in annex A.4.2e of 3GPP TS 26.114 [23]).
If the MRFP does not support the Arbitrary ROI feature or the MRFC determines
that the \"Arbitrary ROI\" offer should not be accepted based on the local
policy and the ROI negotiation results on other call legs, the MRFC shall send
the SDP answer without any Arbitrary ROI related \"a=extmap\" attribute within
the SIP signalling.
If the MRFC and MRFP support the Arbitrary ROI feature then before sending an
SDP offer, the MRFC shall:
a) determine based on the local policy and the Arbitrary ROI negotiation
results on other call legs if, and with what configurations to offer Arbitrary
ROI; and
b) if the MRFC determines to offer Arbitrary ROI:
> \- at the termination towards the ROI-sending client, the MRFC shall include
> the \"Arbitrary ROI Sent\" information element when seizing resources in the
> MRFP to indicate to the MRFP that it shall signal RTCP \"FB ROI\" feedback
> message(s) related to arbitrary ROI on that termination and request the MRFP
> to assign the related resources for the corresponding RTCP control flow to
> convey arbitrary ROI information;
>
> \- at a termination towards an ROI-receiving client, the MRFC shall include
> the \"Arbitrary ROI Received\" information element when seizing resources in
> the MRFP to indicate to the MRFP that it shall accept RTCP \"FB ROI\"
> feedback message(s) related to arbitrary ROI on that termination and request
> the MRFP to assign the related resources for the corresponding RTCP control
> flow to convey arbitrary ROI information;
\- the MRFC shall include \"a=rtcp-fb\" lines related to the \"3gpp-roi-
arbitrary\" parameter in the SDP offer it sends within the SIP signalling;
\- the MRFC shall include the \"extended RTP header for Sent ROI\" information
element for Arbitrary ROI when seizing resources in the MRFP to indicate the
MRFP that it shall allow the RTP header extension for arbitrary ROI to pass;
and
\- the MRFC shall include the Arbitrary ROI related \"a=extmap\" attribute in
the SDP offer it sends within the SIP signalling.
If the MRFP does not support the Arbitrary ROI feature, the MRFC shall send
the SDP offer without any Arbitrary ROI related SDP attributes within the SIP
signalling.
If the MRFP has been instructed to pass on the extended RTP header for
arbitrary ROI as described above then:
\- if the MRFP does not apply video transcoding, it shall pass any received
RTP header extension for Arbitrary ROI to succeeding RTP streams; or
\- if the MRFP applies video transcoding, it shall keep the arbitrary ROI
information unchanged during the transcoding and copy the received RTP header
extension for Arbitrary ROI to the succeeding outgoing RTP stream(s) after
transcoding the associated group of packets.
## 5.25 Rate adaptation for media endpoints
If the MRFC and the MRFP support rate adaptation for media endpoints using the
enhanced bandwidth negotiation mechanism defined in 3GPP TS 26.114 [23] the
requirements and procedures in the present clause apply.
If the MRFC receives an SDP offer containing the SDP \"a=bw-info\"
attribute(s), defined in clause 19 of 3GPP TS 26.114 [23] the MRFC shall:
\- select the payload types (codecs and codec configurations) from the
received SDP offer;
\- if the received SDP offer contained the SDP \"a=bw-info\" attribute(s) for
the selected codec:
a) construct appropriate SDP \"a=bw-info\" attribute(s) for the selected codec
according to the rules in 3GPP TS 26.114 [23]; and
NOTE 1: The MRFP can modify the related SDP \"a=bw-info\" attribute(s)
according to operator policies as specified in 3GPP TS 26.114 [23].
NOTE 2: The offer/answer negotiation is performed for each \"a=bw-info\" SDP
attribute line, payload type, direction and bandwidth property individually.
b) include the \"Additional Bandwidth Properties\" information element
containing \"a=bw-info\" SDP attribute(s) in the remote descriptor describing
bandwidths that will be used for the selected codec in the sending direction
towards the preceding node when requesting the MRFP to reserve resources; and
NOTE 3: The included information corresponds to \"a=bw-info\" SDP attribute(s)
in the sent SDP answer for the \"send\" or \"sendrecv\" direction.
\- include the selected codec with the corresponding SDP \"a=bw-info\"
attribute(s) in the SDP answer.
If the MRFC sends the SDP offer the MRFC shall include, in accordance with
local configuration, for the each offered payload type appropriate bandwidth
information in \"a=bw-info\" SDP attribute lines(s).
If the MRFC then receives the SDP answer with the SDP \"a=bw-info\"
attribute(s) the MRFC shall, when requesting the MRFP to configure resources,
include for the selected payload type the \"Additional Bandwidth Properties\"
information element containing the \"a=bw-info\" SDP attribute(s) providing
information for the selected codec in the remote descriptor about bandwidths
that will be used for the selected codec in the sending direction towards the
succeeding node.
NOTE 4: The included information corresponds to \"a=bw-info\" SDP attribute(s)
in the received SDP answer for the \"recv\" or \"sendrecv\" direction.
The MRFP may use the \"Additional Bandwidth Properties\" information element
indicating media bandwidth range for rate adaptation (i.e. to select an
appropriate encoding and redundancy) when transcoding media streams.
# 6 MRFC-MRFP Procedures
## 6.1 Non-Call Related Procedures
### 6.1.1 General
The non-call related procedures are based on corresponding procedures of 3GPP
TS 23.205[7] when the MRFC takes the place of the MSC server and the MRFP
takes the place of the MGW.
### 6.1.2 MRFP Unavailable
The MRFC recognises that the MRFP is unavailable in the following 4 cases:
1\. The signalling connection is unavailable
Figure 6.1.2.1: Signalling connection failure
2\. The MRFP indicates the failure condition to all connected MRFCs
Figure 6.1.2.2: MRFP indicates the Failure/Maintenance locking
The failure indication indicates that the MRFP will soon go out of service and
that no new connections should be established using this MRFP. The MRFP can
choose between the \"graceful\" and the \"forced\" method. In the graceful
method the connections are cleared when the corresponding calls are
disconnected. In the forced method all connection are cleared immediately.
3\. The MRFC recognises that the MRFP is not functioning correctly, e.g.
because there is no reply on periodic sending of Audits. The periodic sending
of Audits by MRFC should persist.
4\. The MRFP indicates the maintenance locking condition to all concerned
MRFCs.
The maintenance locking indication indicates that the MRFP is locked for new
calls and that no new connections shall be established using this MRFP. The
MRFP can choose between the \"graceful\" and the \"forced\" method. In the
graceful method the connections are cleared when the corresponding calls are
disconnected. In the forced method all connection are cleared immediately
In all of the above cases the MRFC shall prevent the usage of the MRFP until
the MRFP has recovered or the communication with the MRFP is restored.
### 6.1.3 MRFP Available
The MRFC discovers that the MRFP is available when it receives an MRFP
Communication Up message or an MRFP Restoration message. When the MRFC
discovers that the MRFP is available the following shall occur:
1\. Signalling recovery
The MRFP indicates to all connected MRFCs that the signalling connection is
restored.
Figure 6.1.3.1: Communication goes up
2\. MRFP restoration/maintenance unlocking indication.
> The MRFP indicates to all connected MRFCs that normal operation has resumed.
Figure 6.1.3.2: MRFP indicates recovery from a failure/or maintenance
unlocking
NOTE: This procedure may be used after recovery from a signalling failure.
3\. The MRFC recognises that the MRFP is now functioning correctly, e.g.
because there is a reply on periodic sending of Audits.
After this the MRFC can use the MRFP. If none of 1,2, or 3 happens the MRFC
can initiate the MRFC Ordered Re-register procedure**.**
### 6.1.4 MRFP Recovery
If the MRFP recovers from a failure, is maintenance unlocked, or it has been
restarted, it registers to its known MRFCs using the MRFP Restoration
procedure or the MRFP Registration procedure. The MRFP can indicate whether
the Service has been restored or whether it has restarted with a cold or warm
boot. The response sent to the MRFP indicates a signalling address to be used
by the MRFP.
Figure 6.1.4.1: MRFP Restoration
Figure 6.1.4.2 MRFP Registration
After the recovery the MRFC can use the MRFP.
### 6.1.5 MRFC Recovery
#### 6.1.5.1 General
If an MRFP-unavailable condition is provoked by a failure/recovery action, the
MRFC recovery sequence will, from an information flow point of view, look like
MRFP unavailable and then MRFP available. If an MRFP-unavailable condition is
not provoked, the MRFC recovery sequence will look like MRFP available.
After the information flow, the terminations affected by the recovery action
are released.
#### 6.1.5.2 MRFC Restoration
Figure 6.1.5.2.1: MRFC Restoration
NOTE: Normal release procedure may also be initiated.
After the recovery action is complete and it is possible to signal to the MRFP
the MRFC starts a timer Tw. If recovery indications are not received (MRFP
Communication Up or MRFP Restoration) from the MRFP during Tw an Audit is
sent. If the MRFC receives a recovery indication or MRFP communication up
indication, it shall acknowledge the indication before the MRFC Restoration
may be sent or the release procedure is initiated.
### 6.1.6 MRFP Re-register
When the MRFC requests an MRFP to perform a registration (see clause 6.1.7),
the MRFP performs a re-registration to the MRFC which is defined in the MRFC
address.
Figure 6.1.6.1: Re-registration of an MRFP
### 6.1.7 MRFP Re-registration Ordered by MRFC
If the MRFC knows that communication is possible, but the MRFP has not
registered, the MRFC can order re-registration of the MRFP.
Figure 6.1.7.1: Re-registration ordered by the MRFC
If the re-registration request is accepted the MRFP uses the MRFP Re-register
procedure to register with the MRFC.
### 6.1.8 Audit of MRFP
#### 6.1.8.1 Audit of Value
The MRFC may request the MRFP to report the current values assigned to
distinct objects in the MRFP.
Figure 6.1.8.1.1: Audit Value
### 6.1.8.2 Audit of Capability
The MRFC may request the MRFP to report the capabilities of distinct objects
in the MRFP.
Figure 6.1.8.2.1: Audit Capability
### 6.1.9 MRFP Capability Change
The MRFP reports a change of capability of distinct objects in the MRFP.
Figure 6.1.9.1: Capability Update
The MRFC can use the Audit Value and/or Audit Capability procedures to obtain
further information, about the objects whose capabilities have changed.
### 6.1.10 MRFC Out of service
Figure 6.1.10.1: MRFC Out of Service
If an MRFC discovers that it wants to go out of service it starts an MRFC Out
of Service procedure. The MRFC can indicate whether it requires the context to
be cleared immediately (forced) or cleared when all terminations are
released.(Graceful)
### 6.1.11 MRFP Resource Congestion Handling -- Activate
When the MRFC requires that an MRFP congestion notification mechanism be
applied in the MRFP, the MRFC shall use the MRFP Resource Congestion Handling
- Activate procedure towards the MRFP.
Figure 6.1.11.1: MRFP Resource Congestion Handling - Activate
### 6.1.12 MRFP Resource Congestion Handling -Indication
When the MRFC receives a load reduction notification from the MRFP via the
MRFP Resource Congestion Handling - Indication procedure, the MRFC tries to
reduce the processing load that the MRFC creates on the MRFP. The MRFP shall
decide the actual level of traffic reduction.
Figure 6.1.12.1: MRFP Resource Congestion Handling-Indication
## 6.1.13 Hanging termination detection
Whenever requesting new IP bearer terminations, the MRFC shall request the
MRFP to periodically report termination heartbeat indications to detect
hanging context and termination in the MRFP that may result e.g. from a loss
of communication between the MRFC and the MRFP.
When the MRFC receives a termination heartbeat notification from the MRFP via
the Termination heartbeat - Indication procedure, the MRFC shall return a
Termination heartbeat --Indication Ack (without an error) if the context id /
termination identity combination exists in the MRFC. If it does not exist, the
MRFC shall return an error and shall correct the mismatch, e.g. by requesting
the MRFP to subtract the indicated termination and to clear any associated
context.
Figure 6.1.13.1: Termination heartbeat -- Indication
## 6.2 Call Related Procedures
### 6.2.1 Play Tone Procedure
#### 6.2.1.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected and the MRFC has received a trigger to play a tone
and the MRFP selected for the call has the capabilities to provide tones.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.1.2 Send tone
After reception of a trigger to play a tone, the MRFC shall initiate the Send
tone procedure. The MRFC may request the MRFP to send tone to one, multiple or
all terminations in a context simultaneously with the tone identifier. The
tone identifier may be a pre-configured identifier.
The MRFC may request the MRFP to send tone continuously until requested to be
stopped. Alternatively, duration may be indicated or provisioned in the MRFP.
When the duration elapses, the tone shall be stopped.
The MRFC may request the MRFP to detect DTMF digits, and may request the MRFP
to stop sending tone when a DTMF digit is detected. For the second case, only
the tone completion event is notified.
The MRFC may request the MRFP to detect the tone completion, and notify the
completion event and cause to the MRFC. The tone is completed when either of
the following has occurred;
\- the duration has elapsed or:
\- a DTMF digit is detected by the MRFP or:
\- the sending tone is not successful.
#### 6.2.1.3 Stop tone
On receipt of a trigger to stop a tone, the MRFC shall request the MRFP to
stop the tone.
#### 6.2.1.4 Tone completed
When a tone is completed, if the MRFC has requested the MRFP to notify the
tone completion, the MRFP shall notify the tone completion event and the cause
to the MRFC. The cause that the tone is completed may be that the duration has
elapsed, a DTMF digit is detected by the MRFP, or that the tone is not
successful. Then the MRFC may indicate to the AS that the tone has been
stopped.
#### 6.2.1.5 Message sequence chart
Figure 6.2.1.1 shows the message sequence chart example for sending tone.
Figure 6.2.1.1 Sending tone (message sequence chart)
### 6.2.2 Play Announcement Procedure
#### 6.2.2.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected, and the MRFC has received a trigger to play
announcement, and the MRFP selected for the call has the capabilities to
provide announcement.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.2.2 Start announcement
After reception of a trigger to play the announcement, the MRFC should
initiate the Start announcement procedure. The MRFC shall request the MRFP to
play announcement to one, multiple or all terminations in a context with the
announcement identifier. The announcement identifier may be a pre-configured
identifier (such as a number).
If it is a sequence of announcements, the MRFC shall request the MRFP to play
all the announcements with one request. The MRFC may request the MRFP to play
the announcement in a loop continuously until requested to be stopped or in a
loop with a fixed number of times. For the second case, if the fixed number of
times is exhausted, the announcement is completed successfully.
If it is a variable announcement, the MRFC may indicate to the MRFP the
following variants to the announcements:
\- Date: A date variant is made up of three components: day, month and year.
The MRFC shall indicate the date value and the date format to the MRFP, such
as \" day-month-year\" or \"year-month-day\".
\- Time: A time variant is made up of two components: hour and minute, The
MRFC shall indicate the time value and the time format to the MRFP, such as
\"12-hours format\" or \"24-hours format\".
\- Digits (the announcement may contain a number of digits to be controlled by
the MRFC for example a telephone number): a digits variant is made up of a
sequence digit.
\- Money (currency).
\- Integer (a value within the announcement that is controlled by the MRFC,
e.g. \"you are caller number 3 in the queue\"): an integer variant may be
spoken as a cardinal or ordinal value. The MRFC shall indicate to the MRFP the
value and type to be spoken.
The MRFC may request the MRFP to detect DTMF digit while playing an
announcement, and may request the MRFP to stop playing an announcement when a
DTMF digit is detected. For the latter case, only the announcement completion
event is notified.
The MRFC may request the MRFP to detect the announcement completion, and
notify the completion event and cause to the MRFC. The announcement is
completed when either of the following has occurred;
\- the announcement has been completed successfully or:
\- a DTMF digit is detected by the MRFP or:
\- the playing announcement is not successful.
#### 6.2.2.3 Stop announcement
On receipt of a trigger to stop the announcement, the MRFC shall request the
MRFP to stop the announcement.
#### 6.2.2.4 Announcement completed
When an announcement is completed, if the MRFC has requested the MRFP to
notify the announcement completion, the MRFP shall notify the announcement
completion event and the cause to the MRFC. The cause that the announcement is
completed may be the announcement has been completed successfully, or a DTMF
digit is detected by the MRFP, or the playing announcement is not successful.
Then the MRFC may indicate to the AS that the announcement has been stopped.
#### 6.2.2.5 Message sequence chart
Figure 6.2.2.1 shows the message sequence chart example for playing
announcement.
Figure 6.2.2.1 Playing announcement (message sequence chart)
### 6.2.3 Text to Speech Procedure
#### 6.2.3.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected, and the MRFC has received a trigger to play TTS,
and the MRFP selected for the call has the capabilities to provide TTS.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.3.2 Start TTS
After reception of a trigger to play TTS, the MRFC should initiate the Start
TTS procedure.
If the MRFC receives a VXML script, the MRFC shall extract the SSML script or
the SSML file identifier from the VXML script. If the MRFC receives plain
text, the MRFC shall generate a SSML script that includes this plain text
(\) and the language type (xml:lang) used the basic SSML format. If the
size of the SSML script is larger than the transport capability of the Mp
interface, the MRFC shall stop the Start TTS procedure and return error.
Then the MRFC shall indicate to the MRFP the SSML script or the SSML file
identifier to play the SSML text to one, one of many, multiple or all
terminations in a context. If the MRFP does not support an element of the
SSML, the MRFP may ignore the element.
The MRFC may request the MRFP to play the TTS in a loop continuously until
requested to be stopped or in a loop with a fixed number of times. For the
second case, if the fixed number of times is exhausted, the TTS is completed
successfully.
The MRFC may request the MRFP to detect DTMF digit while playing a TTS, and
may request the MRFP to stop TTS when a DTMF digit is detected. For the second
case, only the TTS completion event is notified.
The MRFC may request the MRFP to detect the TTS completion and notify the
completion event and cause to the MRFC. The TTS is completed when either of
the following has occurred;
\- the TTS has been completed successfully or:
\- a DTMF digit is detected by the MRFP or:
\- the playing TTS is not successful.
#### 6.2.3.3 Stop TTS
On receipt of a trigger to stop TTS, the MRFC shall request the MRFP to stop
the TTS.
#### 6.2.3.4 TTS Completed
When a TTS is completed, if the MRFC has requested the MRFP to notify the TTS
completion, the MRFP shall notify the TTS completion event and the cause to
the MRFC. The cause that the TTS is completed may be the TTS has been
completed successfully, or a DTMF digit is detected by the MRFP, or the
playing TTS is not successful. Then the MRFC may indicate to the AS that the
TTS has been stopped.
#### 6.2.3.5 Message sequence chart
Figure 6.2.3.5.1 shows the message sequence chart example for playing TTS.
Figure 6.2.3.5.1 Playing TTS (message sequence chart)
### 6.2.4 Audio Record Procedure
#### 6.2.4.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected, and the MRFC has received a trigger to record
audio, and the MRFP selected for the call has the capabilities to provide
audio record.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.4.2 Start audio record
After reception of a trigger to record audio, the MRFC should initiate the
Start audio record procedure. The MRFC shall request the MRFP to record audio
from one or all terminations in a context with the record file URI and record
file format. If it is to record one party, only the input stream of the party
is recorded. If it is to record all parties, the mixed stream of all parties
is recorded.
When recording audio from all terminations in a context (for two-party
sessions or a conference) the MRFC may request the MRFP to assign a new
termination to record the audio in the context.
If other signals such as playing announcement are requested to be executed on
the same termination as the termination to perform the recording the signals
shall not override each other, e.g. the recording shall not be interrupted.
The record file URI can be generated by the AS/MRFC or by the MRFP. For the
second case, the MRFC shall indicate the MRFP to generate the URI and return
the generated URI to the MRFC. The record file format is the 3GPP multimedia
file format, defined in the 3GPP TS 26.244[5], and only the audio track is
used for the audio recording. The MRFC may indicate the maximum record time to
the MRFP. When the maximum record time has elapsed, the MRFP shall stop the
audio recording.
The MRFC may request the MRFP to detect the audio recording completion, and
notify the completion event and cause to the MRFC. The audio recording is
completed when either of the following has occurred;
\- the maximum time period of audio recording has elapsed,
\- no input is detected,
> \- DTMF digits are detected by the MRFP where the DTMF key sequence shall
> stop or cancel the audio recording ,
\- the MRFC requests the MRFP to stop the audio recording, or:
\- the audio recording is not successful.
#### 6.2.4.3 Stop audio record
After reception of a trigger to stop audio record, the MRFC shall request the
MRFP to stop the audio recording. If the audio recording termination is added,
the MRFC shall request the MRFP to subtract it.
#### 6.2.4.4 Audio record completed
When an audio recording is completed, if the audio recording is successful,
the MRFP shall save the record file to the specified URI. If the audio
recording is not successful, the MRFP shall delete the record file. If the
MRFC has requested the MRFP to notify the audio recording completion, the MRFP
shall notify the audio recording completion event and the cause to the MRFC.
The cause of the audio recording completed may be no voice has been input
during a specific period, the maximum record time has elapsed, a DTMF digit
that represents to finish or cancel the audio recording is detected by the
MRFP, or the audio recording is not successful. Then the MRFC may indicate to
the AS that the audio record has been stopped.
#### 6.2.4.5 Message sequence chart
Figure 6.2.4.1 shows the message sequence chart example for audio recording.
Figure 6.2.4.1 Audio record (message sequence chart)
### 6.2.5 DTMF Collection Procedure
On receipt of a request to detect DTMF Digits, the MRFC may command the MRFP
to report DTMF Digits as defined in the Detect DTMF Procedure.
MRFC shall assign the RTP Payload Type for DTMF Telephony Events. When a DTMF
Digit has been detected by the MRFP it shall report it to the MRFC.
When requested to detect DTMF the MRFP shall not forward the reported digit
toward another connection.
An example sequence is shown in Figure 6.2.5.1.
Figure 6.2.5.1 DTMF Telephony Event Detection
DTMF digit detection may be stopped by the MRFC sending the procedure Stop
DTMF Detection. The MFRP, once it has acknowledged this request will no longer
check for DTMF digits or report them to the MRFC.
### 6.2.6 Automatic Speech Recognition Procedure
#### 6.2.6.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected, and the MRFC has received a trigger to play ASR,
and the MRFP selected for the call has the capabilities to provide Automatic
Speech Recognition.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.6.2 Start ASR
If the MRFC receives a request to initiate ASR, the MRFC shall extract the
SRGS script or the SRGS URI from the received script.
If the size of the SRGS script is larger than the transport capability of the
Mp interface, the MRFC shall terminate ASR procedure and return error.
Otherwise the MRFC initiates the Start ASR procedure; the MRFC shall indicate
to the MRFP the SRGS script or the SRGS URI to play ASR to one termination in
a context.
The MRFC may indicate to the MRFP the recognition mode: Normal Recognition
Mode, Hotword Recognition Mode. If the MRFC indicate the Normal Recognition
Mode to the MRFP, the MRFP shall match all of the speech against a recognition
grammar and returns a no-match status if the input fails to match or the
method times out. If the MRFC indicates the Hot-word Recognition Mode to the
MRFP, the MRFP shall look for a match against specific speech grammar and
ignores speech that does not match.
The MRFP shall recognize the subscriber\'s input speech stream according to
the SRGS grammar, and output the result as the EMMA format.
If the MRFP does not support an element of the SRGS, the MRFP may ignore the
element.
The MRFC may request the MRFP to detect DTMF digit while executing ASR, and
may request the MRFP to stop ASR when a DTMF digits is detected. For the
latter case, only the ASR result is notified.
The MRFC may request the MRFP to detect the ASR completion and notify the
completion event and cause to the MRFC. The ASR is completed when either of
the following has occurred;
\- the ASR has been completed successfully,
\- a DTMF digit is detected by the MRFP,
\- the executing of ASR is not successful or
\- the recognition time elapses.
#### 6.2.6.3 Stop ASR
On receipt of a trigger to stop ASR, the MRFC shall request the MRFP to stop
the ASR.
6.2.6.4 ASR Completed
When an ASR is completed, if the MRFC has requested the MRFP to notify the ASR
completion, the MRFP shall notify the ASR result and the cause to the MRFC.
The cause of the ASR completed may be that the ASR has been completed
successfully, a DTMF digit is detected by the MRFP, or the executing ASR is
not successful.
The MRFP shall generate the ASR result as the EMMA format. The EMMA result may
include multiple recognition results that are mutually exclusive. Each result
may be structured by multiple parts in time sequence with the input time. Each
result may include the text token that the value will correspond to tokens as
defined by the SRGS grammar. Each result may include the interpretation of
application specific markup. Each result may include the confidence score that
represents the recognition quality.
If the size of the EMMA script is larger than the transport capability of the
Mp interface, the MRFP shall return the MRFC the ASR is not successful.
Then the MRFC may indicate to the AS that the ASR has been stopped and the ASR
result.
#### 6.2.6.5 Message sequence chart
Figure 6.2.6.5.1 shows the message sequence chart example for executing ASR.
Figure 6.2.6.5.1 ASR (message sequence chart)
### 6.2.7 Play Multimedia Procedure
#### 6.2.7.1 General
The following procedure assumes the IMS session has been established and the
bearer is through-connected, and the MRFC has received a trigger to play
multimedia, and the MRFP selected for the call has the capabilities to provide
playing multimedia. The clauses 6.2.7.3- 6.2.7.6 specify the procedures to
play the synchronized audio and video media stream(s). The clauses 6.2.7.aa-
6.2.7.dd describe the procedures for playing message.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.7.2 H.248 context model
The figure 6.2.7.1 shows the H.248 context model for playing multimedia. There
may be up to three streams in the termination that is used for playing
multimedia, which are any combination of audio, video and messaging media
stream(s). The H.248 command can be processed in the termination to play
multimedia and detect the playing multimedia completed event.
Figure 6.2.7.1: Playing Multimedia H.248 context model
#### 6.2.7.3 Start playing multimedia
After reception of a trigger to play multimedia, the MRFC shall initiate the
Start playing multimedia procedure.
If it is to play multimedia to one party, the multimedia shall be played in
the external direction of the existing termination.
The MRFC shall indicate to the MRFP the multimedia identifier which may be a
single identifier or list of identifiers. The MRFC may use a single identifier
or separate identifiers per stream. If it is multiple identifiers, the MRFC
shall request the MRFP to play all media in one request. If the identifier
references a file, the file format shall be indicated. The multimedia file
format is the 3GPP multimedia file format in current version. If the
multimedia file provides different audio or video codec than the session
codec, the MRFP shall transcode the input codec into the session codec.
The MRFC may request the MRFP to play the multimedia in a loop continuously
until requested to be stopped or in a loop with a fixed number of times. For
the latter case, if the fixed number of times is exhausted, the playing
multimedia is completed successfully.
The MRFC may request the MRFP to detect DTMF digit while playing multimedia,
and may request the MRFP to stop playing multimedia when DTMF digits is
detected. For the latter case, only the multimedia completion is notified.
The MRFC may request the MRFP to detect the multimedia completion, and notify
the completion event and cause to the MRFC. The play multimedia is completed
when either of the following has occurred;
\- the multimedia has been completed successfully,
\- a DTMF digit is detected by the MRFP or:
\- the playing multimedia is not successful.
#### 6.2.7.4 Stop playing multimedia
After reception of a trigger to stop playing multimedia, the MRFC shall
request the MRFP to stop playing multimedia.
#### 6.2.7.5 Playing multimedia completed
When a playing multimedia is completed, if the MRFC has requested the MRFP to
notify the playing multimedia completion, the MRFP shall notify the multimedia
completion event and the cause to the MRFC. The cause of the playing
multimedia completion may be the playing multimedia has been completed
successfully, or a DTMF digit is detected by the MRFP, or the playing
multimedia is not successful. Then the MRFC may indicate to the AS that the
playing multimedia has been stopped.
#### 6.2.7.6 Message sequence chart
Figure 6.2.7.2 shows the message sequence chart example for playing
multimedia.
Figure 6.2.7.2 Play multimedia (message sequence chart)
#### 6.2.7.7 Start playing message
After reception of a trigger to play message, the MRFC shall initiate the
Start playing message procedure.
If it is to play message to one party, the message shall be played in the
external direction of the existing termination.
The MRFC shall indicate to the MRFP the message identifier which may be a
single identifier or list of identifiers. The MRFC may use a single identifier
or separate identifiers per stream. If it is message identifiers, the MRFC
shall request the MRFP to play all media in one request. If the message
references a file, the file message file formats shall comply with the file
formats used inside MMS(Multimedia Messaging Service) as specified in the 3GPP
TS 26.140 [22] in current version.
The MRFC may request the MRFP to notify the completion event and cause to the
MRFC. The play message is completed when either of the following has occurred;
\- the message has been completed successfully, or:
\- the playing message is not successful.
#### 6.2.7.8 Stop playing message
After reception of a trigger to stop playing message, the MRFC shall request
the MRFP to stop playing message.
#### 6.2.7.9 Playing message completed
When a playing message is completed, if the MRFC has requested the MRFP to
notify the playing message completion, the MRFP shall notify the message
completion event and the cause to the MRFC. The cause of the playing message
completion may be the playing message has been completed successfully, or the
playing message is not successful. Then the MRFC may indicate to the AS that
the playing message has been stopped.
#### 6.2.7.10 Message sequence chart
Figure 6.2.7.3 shows the message sequence chart example for playing message.
Figure 6.2.7.3 Play message (message sequence chart)
### 6.2.8 Multimedia Record Procedure
#### 6.2.8.1 General
The following procedure assumes the IMS session has already been established
and the bearer is through-connected, and the MRFC has received a trigger to
record multimedia, and the MRFP selected for the call has the capabilities to
provide multimedia record. The clauses 6.2.8.3- 6.2.8.6 specify the procedures
to record the synchronized audio and video media stream(s). The clauses
6.2.8.aa- 6.2.8.dd describe the procedures for message record.
NOTE: This procedure may also be ordered in combination with the session
establishment procedure.
#### 6.2.8.2 H.248 context model
The figure 6.2.8.1 shows the H.248 context model for the multimedia record.
The termination used for recording may have up to three streams, which are any
combination of audio, video and messaging media stream(s). The H.248 command
can be processed in the termination to record multimedia and detect the record
multimedia completed event.
Figure 6.2.8.1: Multimedia Record Context Model
#### 6.2.8.3 Start multimedia Record
After reception of a trigger to record multimedia, the MRFC shall initiate the
Start multimedia record procedure.
If it is to record one party, only the input stream of the party is recorded.
If it is to record all parties, the mixed stream of all parties is recorded.
When recording multimedia from all terminations in a context (for two-party
sessions or a conference) the MRFC may request the MRFP to assign a new
termination to record the multimedia in the context.
If other signals such as playing announcement are requested to be executed on
the same termination as the termination to perform the recording the signals
shall not override each other, e.g. the recording shall not be interrupted.
The MRFC shall indicate the record file URI and the record file format to the
MRFP. The record file URI can be generated by the AS/MRFC or by the MRFP. For
the second case, the MRFC shall indicate the MRFP to generate the URI and
return the generated URI to the MRFC. The record file format is the 3GPP
multimedia file format, defined in the 3GPP TS 26.244[5]. The MRFC may
indicate the maximum record time to the MRFP, when this time has elapsed, the
MRFP shall stop the multimedia recording.
The MRFC may request the MRFP to detect the multimedia recording completion,
and notify the completion event and cause to the MRFC. The multimedia
recording is completed when either of the following occurs;
\- the maximum time period of multimedia recording has elapsed,
> \- a DTMF digit is detected by the MRFP where the DTMF key sequence shall
> stop or cancel the multimedia recording,
>
> \- DTMF digits are detected by the MRFP where the DTMF key sequence shall
> stop or cancel the audio recording,
\- the MRFC requests the MRFP to stop the audio recording, or
\- the media recording is not successful.
#### 6.2.8.4 Stop multimedia record
After reception of a trigger to stop multimedia record, the MRFC shall request
the MRFP to stop the multimedia recording. If the multimedia recording
termination is added, the MRFC shall request the MRFP to subtract it.
#### 6.2.8.5 Multimedia record Completed
When a multimedia recording is completed, if the multimedia recording is
successful, the MRFP shall save the recorded content to the specified URI. If
the multimedia recording is not successful, the MRFP shall discard the
recorded content. If the MRFC has requested the MRFP to notify the multimedia
recording completion, the MRFP shall notify the multimedia recording
completion event to the MRFC. The cause of the multimedia recording completion
may be that the maximum record time has elapsed, a DTMF digit that represents
to finish or cancel the multimedia recording is detected by the MRFP, or the
multimedia recording is not successful. Then the MRFC may indicate to the AS
that the multimedia record has been stopped.
#### 6.2.8.6 Message sequence chart
Figure 6.2.8.2 shows the message sequence chart example for multimedia record.
Figure 6.2.8.2 Multimedia record (message sequence chart)
#### 6.2.8.7 Start Message Record
After reception of a trigger to record message, the MRFC shall initiate the
Start message record procedure.
If it is to record one party, only the input stream of the party is recorded.
If it is to record all parties, the message streams of all parties are
recorded.
When recording message from all terminations in a context (for two-party
sessions or a conference) the MRFC may request the MRFP to assign a new
termination to record the message in the context.
If other signals such as playing announcement are requested to be executed on
the same termination as the termination to perform the recording the signals
shall not override each other, e.g. the recording shall not be interrupted.
The MRFC may indicate the record file URI and the record file format to the
MRFP. The record file URI can be generated by the AS/MRFC or by the MRFP. For
the second case, the MRFC shall indicate the MRFP to generate the URI and
return the generated URI to the MRFC. The record file formats shall comply
with the file formats used inside MMS(Multimedia Messaging Service) as
specified in the 3GPP TS 26.140 [22] in the current version. The MRFC may
indicate the maximum record time to the MRFP, when this time has elapsed, the
MRFP shall stop the message recording.
The MRFC may request the MRFP to detect the message recording completion, and
notify the completion event and cause to the MRFC. The message recording is
completed when either of the following occurs;
\- the maximum time period of message recording has elapsed,
\- the MRFC requests the MRFP to stop the recording, or
\- the media recording is not successful.
#### 6.2.8.8 Stop Message record
After reception of a trigger to stop message record, the MRFC shall request
the MRFP to stop the message recording. If the message recording termination
is added, the MRFC shall request the MRFP to subtract it.
#### 6.2.8.9 Message record Completed
When a message recording is completed, if the message recording is successful,
the MRFP shall save the recorded content to the specified URI. If the message
recording is not successful, the MRFP shall discard the recorded content. If
the MRFC has requested the MRFP to notify the message recording completion,
the MRFP shall notify the message recording completion event to the MRFC. The
cause of the message recording completion may be that the maximum record time
has elapsed, or the message recording is not successful. Then the MRFC may
indicate to the AS that the message record has been stopped.
#### 6.2.8.10 Message sequence chart
Figure 6.2.8.10.1 shows the message sequence chart example for message record.
Figure 6.2.8.10.1 Message record (message sequence chart)
### 6.2.9 Audio Conference Procedure
#### 6.2.9.1 Context Model
A conference consists of one context with terminations representing each user.
The MRFP shall consider the context to represent an ad-hoc conference when
three or more terminations have been through-connected.
#### 6.2.9.2 Ad-hoc Conferences
##### 6.2.9.2.1 General
An ad-hoc conference starts without any prior booking or reservation when a
user initiates the conference, for further definition of ad-hoc conference,
see 3GPP TS 24.147 [4]. Further participants can then be added to the
conference without any prior reservation of resources, through either a method
of \"dial-out\" where the conference calls the participant, or by a \"dial-
in\" scenario where the end user calls the conference.
##### 6.2.9.2.2 Create Ad-hoc Audio Conference Procedure
The MRFC receives a trigger to create an ad-hoc conference. The MRFC then
initiates the \"Reserve and Configure IMS Resources\" procedure as specified
in clause 8.20.
The MRFC:
Requests a new context and a new bearer termination including the Remote
Connection Address.
The MRFP:
Creates a new context
Adds a new termination to the context and returns the Local Connection
Address.
The MRFC:
Notifies the new user about the Local Connection Address.
Figure 6.2.9.1 shows the message sequence chart example for creating
conference procedure.
Figure 6.2.9.1 Create Ad-hoc conference
##### 6.2.9.2.3 Closure of Audio Conference Procedure
The MRFP will in accordance with the general rules of H.248.1 delete the
context when the last termination has been subtracted from the context.
##### 6.2.9.2.4 Add Subsequent User to Conference; Dial-out
The MRFC receives a trigger to add a new bearer termination. The trigger does
not contain connection address nor resources that the new participant can use.
The MRFC adds a new bearer termination by initiating the \"Reserve IMS
Resources\" procedure as specified in clause 8.21.
The MRFC:
Requests a bearer termination to be added to the existing context.
The MRFP:
Adds a bearer termination to the existing context and notifies the MRFC about
its reserved resources and connection address.
The MRFC:
Sends a notification to the new user about the MRFP\'s resources and
connection address.
The MRFC will then receive a trigger containing the new user\'s address and
resources. The MRFC initiates the \"Configure IMS resources\" procedure as
specified in clause 8.22.
The MRFC:
Requests that remote address and resources be configured to the termination
The MRFP:
Modifies the termination using the received data and confirms the action
The MRFC:
Notifies the new participant about the result
Figure 6.2.9.2 shows the message sequence chart example for dial-out
procedure.
Figure 6.2.9.2 Procedure to add user in Dial-out scenario
##### 6.2.9.2.5 Add subsequent user to conference; Dial-in
Precondition is that a conference exists. The MRFC receives a trigger to add a
new user including Remote Connection Address. The MRFC then initiates the
\"Reserve and Configure IMS Resources\" procedure as specified in clause 8.20.
The MRFC:
Requests a new bearer termination, including the Remote Connection Address, to
be added to the existing context.
The MRFP:
Adds a new termination to the existing context and returns the Local
Connection Address.
The MRFC notifies the new user about the Local Connection Address.
Figure 6.2.9.3 shows the message sequence chart example for dial-in procedure.
Figure 6.2.9.3 Procedure to add user in Dial-in scenario
##### 6.2.9.2.6 Remove Conference Participant Procedure
When the MRFC receives a trigger that a user has left the conference, it
initiates the \"Release IMS termination\" procedure as specified in clause
8.23.
The MRFC:
Requests that the termination is released.
The MRFP:
Releases the termination and informs the MRFC about the result.
Figure 6.2.9.4 shows the message sequence chart example for removing
conference participant procedure.
Figure 6.2.9.4 Procedure to remove conference participant
### 6.2.10 Multimedia Conference Procedures
#### 6.2.10.1 Context Model
A conference consists of one context with terminations representing
connections to the participants. Each termination shall support up to three
streams, one for audio, one for messaging and one for video. The MRFP shall
consider the context to represent an ad-hoc conference when three or more
terminations have been through-connected.
It is possible for a user supporting only one media, represented by one
stream, to join a conference. The user will then only participate in the part
of the conference that is using the supported stream.
#### 6.2.10.2 Ad-hoc Conferences
##### 6.2.10.2.1 General
An ad-hoc conference starts without any prior booking or reservation when a
user initiates the conference, for further definition of ad-hoc conference,
see 3GPP TS 24.147 [4]. Further participants can then be added to the
conference without any prior reservation of resources, through either a method
of \"dial-out\" where the conference calls the participant, or by a \"dial-
in\" scenario where the end user calls the conference.
##### 6.2.10.2.2 Create Ad-hoc Multimedia Conference Procedure
The MRFC receives a trigger to create an ad-hoc conference. The MRFC then
initiates the \"Reserve and Configure IMS Resources\" procedure as specified
in clause 8.20, where the connection address and resources shall have multiple
values for speech, messaging and video.
The MRFC:
Requests a new context and a new bearer termination including the Remote
Connection Addresses.
The MRFP:
Creates a new context
Adds a new termination to the context and returns the Local Connection
Address.
The MRFC:
Notifies the new user about the Local Connection Address.
Figure 6.2.10.1 shows the message sequence chart example for creating
multimedia conference procedure.
Figure 6.2.10.1 Create Ad-hoc conference
##### 6.2.10.2.3 Closure of Multimedia Conference Procedure
The MRFP will in accordance with the general rules of H.248.1 delete the
context when the last termination has been subtracted from the context..
##### 6.2.10.2.4 Add Subsequent User to Conference; Dial-out
Precondition for this procedure is that a conference exists. The MRFC receives
a trigger to add a new bearer termination. The trigger does not contain
connection address nor resources that the new participant can use. The MRFC
adds a new bearer termination by initiating the \"Reserve IMS Resources\"
procedure as specified in clause 8.21 where the connection address and
resources may have multiple values for speech, messaging and video.
The MRFC:
Requests a bearer termination to be added to the existing context.
The MRFP:
Adds a bearer termination to the existing context and notifies the MRFC about
its reserved resources and connection address.
The MRFC:
Sends a notification to the new user about the MRFP\'s resources and
connection address.
The MRFC will then receive a trigger containing the new user\'s address and
resources. The MRFC initiates the \"Configure IMS resources\" procedure as
specified in clause 8.22 where the connection address and resources may have
multiple values for speech, messaging and video.
The MRFC:
Requests that remote address and resources be configured to the termination
The MRFP:
Modifies the termination using the received data and confirms the action
The MRFC:
Notifies the new participant about the result
Figure 6.2.10.2 shows the message sequence chart example for dial-out
procedure of multimedia conference.
Figure 6.2.10.2 Procedure to add user in Dial-out scenario
##### 6.2.10.2.5 Add subsequent user to conference; Dial-in
Precondition is that a conference exists. The MRFC receives a trigger to add a
new user including Remote Connection Address. The MRFC then initiates the
\"Reserve and Configure IMS Resources\" procedure as specified in clause 8.20
where the connection address and resources may have multiple values for
speech, messaging and video.
The MRFC:
Requests a new bearer termination, including the Remote Connection Address, to
be added to the existing context.
The MRFP:
Adds a new termination to the existing context and returns the Local
Connection Address.
The MRFC notifies the new user about the Local Connection Address.
Figure 6.2.10.3 shows the message sequence chart example for dial-in procedure
of multimedia conference.
Figure 6.2.10.3 Procedure to add user in Dial-in scenario
##### 6.2.10.2.6 Remove Conference Participant Procedure
When the MRFC receives a trigger that a user has left the conference, it
initiates the \"Release IMS termination\" procedure as specified in clause
8.23.
The MRFC:
Requests that the termination is released.
The MRFP:
Releases the termination and informs the MRFC about the result.
Figure 6.2.10.4 shows the message sequence chart example for removing
multimedia conference participant procedure.
Figure 6.2.10.4 Procedure to remove conference participant
#### 6.2.10.3 Message Conferencing
The procedures specified in clauses 6.2.10.1- 6.2.10.6 for \"General
Multimedia Conferencing\" shall be followed. The following clauses describe
the additional requirements for the message conferencing.
##### 6.2.10.3.1 General
For message conferencing, the Message Session Relay Protocol (MSRP) (see IETF
RFC 4975 [18]) shall be used to transport messages. The message content may
carry different media including text, image, video and audio. The Media types
shall be MIME encoded. The TCP connection that the MSRP runs over shall be
established when adding a new participant into the conference according to
clause 6.2.20.
In order to manage the message conferencing, the following features may be
supported:
\- Message statistics.
\- Message filtering.
An MRFC and an MRFP that support a session based messaging, as defined in IETF
RFC 4975 [18], shall support the following procedures.
When receiving an SDP offer for a MSRP media, the MRFC:
\- shall provide the value of the received \"a=path\" SDP attribute (defined
in IETF RFC 4975 [18]) to the MRFP in the \"MSRP URI Path\" information
element, as part of a remote descriptor;
\- shall indicate \"TCP/MSRP\" or \"TCP/TLS/MSRP\" (if e2e media security is
applied) as transport protocol to the MRFP;
\- if the \"a=msrp-cema\" SDP attribute, as defined in IETF RFC 6714 40, is
not contained in the SDP offer, should use the IP address and port within the
first entry of the \"a=path\" SDP attribute from the received SDP offer to
configure the remote IP address and port at the MRFP;
NOTE 1: It is a normal MRFC procedure to configure the received SDP \"c=\"
line and \"m=\" line IP address and TCP port information as the remote address
and port at the MRFP. The SDP \"c=\" line and \"m=\" line address and port
information will match the \"a=path\" address information unless there is an
MSRP relay in the path.
\- shall request the MRFP to allocate the IP address, TCP port and MSRP
session-id and provide this information in the \"MSRP URI Path\" information
element;
\- shall include the \"a=path\" SDP attribute received from the MRFP in an SDP
answer it sends; and
\- if the SDP offer included the \"a=msrp-cema\" SDP attribute, shall include
the \"a=msrp-cema\" SDP attribute in the SDP answer.
When sending an SDP offer for MSRP media, the MRFC:
\- shall request the MRFP to allocate an IP address, TCP port and MSRP
session-id and provide this information in the \"MSRP URI Path\" information
element;
\- shall indicate \"TCP/MSRP\" or \"TCP/TLS/MSRP\" (if e2e media security is
applied) as transport protocol to the MRFP;
\- shall include the value of the \"MSRP URI Path\" information element
received from the MRFP in the \"a=path\" SDP attribute of the SDP offer it
sends; and
\- should include the \"a=msrp-cema\" SDP attribute in the SDP offer.
When receiving a corresponding SDP answer for MSRP media, the MRFC:
\- shall provide the value of the received \"a=path\" SDP attribute to the
MRFP in the \"MSRP URI Path\" information element; and
\- if the \"a=msrp-cema\" SDP attribute is not contained in the SDP answer,
should use the IP address and TCP port within the first entry of the
\"a=path\" SDP attribute from the received SDP answer to configure the remote
IP address and port at the MRFP.
When the MRFP is configured to handle MSRP media and is requested to allocate
an IP address, TCP port and MSRP session-id, it shall provide this information
in the \"a=path\" SDP attribute and shall store this information. When the
MRFP then receives MSRP packets, it shall compare the session-id part of the
received MSRP packets with the stored session-id.
NOTE 2: Comparing only the session-id, but not the address information, is in
accordance with IETF draft-ietf-simple-msrp-sessmatch-10, but also compatible
with peers using IETF RFC 4975 [18] without extensions or in combination with
IETF RFC 6714 40. No procedures to indicate the method of session matching
(according to IETF RFC 4975 [18] or IETF draft-ietf-simple-msrp-sessmatch-10)
to the MRFP are defined.
The MRFP shall include MSRP URI(s) received in the \"MSRP URI Path\"
information element from the MRFC in the \"To-Path\" header field of MSRP
packets it sends.
##### 6.2.10.3.2 Messages Statistics
The MRFP may report the statistics for the number of messages sent and/or
received in two ways described as following.
1\. The MRFC indicates quotas granted to the MRFP. The granted quotas indicate
the units specifying the number of messages or volume of messages allowed to
be received or sent by users. The MRFC may also indicate to the MRFP a valid
time together with the granted quotas. The valid time indicates the time until
the specific unit may be measured, after which the quota shall be reported,
whether or not it has reached its granted quota. The MRFC initiates this via
the \"Configure Granted Quota\" procedure as specified in clause 8.50. The
quotas granted by MRFC may include any of the following:
\- Quota for number of messages sent
\- Quota for number of messages received
\- Quota for volume (size) of messages sent
\- Quota for volume (size) of messages received
When the quota granted is reached or the valid time elapses the MRFP shall
report statistics information of messages according to the indication by the
MRFC. The MRFP uses the \"Report Message Statistics\" procedure as specified
in clause 8.51 to report the statistics of messages. The statstistics of
messages sent and/or received may include any of the following:
\- number of messages sent
\- number of messages received
\- volume (size) of messages sent
\- volume (size) of messages received
\- reason for report i.e. quota reached or granted time elapsed
2\. The MRFC requests the MRFP to report the statistics information of
messages sent and/or received at the end of the session or during the session.
In this case, the quotas or the valid time is not required, and the MRFP
should report the statistics of message as requested by the MRFC. The
statstistics of messages are the same as described above.
Figure 6.2.10.3.2.1 shows the message sequence chart example for reporting
message statistics.
Figure 6.2.10.3.2.1 Message statistics according to the granted quota
###### 6.2.10.3.3 Message Filtering
When the MRFC receives the trigger to config the filtering rules, the MRFC may
initiate the \"Configure Filtering Rules\" procedure as specified in clause
8.52 to set filtering rules in the MRFP. The filtering rule is composed of two
parts: the criteria and the treatment of the filtered message. The MRFP should
handle messages according to the filtering rules.
The MRFC may indicate to the MRFP the following criterias:
\- Sender address
\- Message size
\- Message content type (e.g. video, audio)
\- Message content format(e.g. mpeg, jpeg)
\- Message subject
The MRFC may indicate to the MRFP the following message treatments:
\- Block the delivery of the message content
\- Store the message content
\- Redirect the message to another address
The MRFC may indicate to the MRFP the \"store url\" when messages storage is
needed, or the MRFC may indicate the MRFP to allocate the \"store url\" and
return the generated \"store url\" to the MRFC.
The MRFC may indicate to the MRFP the \"redirect url\" when messages
redirection is needed.
Figure 6.2.10.3.3.1 shows the message sequence chart example to config the
filtering rules.
Figure 6.2.10.3.3.1 Configure the filtering rules
### 6.2.11 Audio Transcoding Procedure
As transcoding is considered a basic feature of a MRFP, the MRFC does not
explicitly request transcoding. It is expected that the MRFP determines when
transcoding is applied, for example, when the MRFC specifies the audio codec
to be applied for a given stream in a context, if there are any other audio
terminations in the context and the stream modes permit data flow between
these terminations and where the source encodings are not compatible then the
MRFP transcodes the stream between these terminations.
### 6.2.12 Video Transcoding Procedure
As transcoding is considered a basic feature of an MRFP the MRFC does not
explicitly request transcoding. It is expected that the MRFP determines when
transcoding is applied, for example, when the MRFC specifies the video codec
to be applied for a given stream in a context, if there are any other
terminations supporting video in the context and the stream modes permit data
flow between these terminations and where the source encodings are not
compatible then the MRFP transcodes the stream between these terminations.
### 6.2.13 Floor Control
#### 6.2.13.1 General
Floor control offers control of shared conference resources at the MRFP(s).
Floor control protocol (BFCP) is used to convey the Floor control messages
between the Floor Chair of the conference, the Floor Control Server, and the
Floor Participants of the conference. All Floor control messages go via the
Floor Control Server. Processing (granting or rejecting) Floor control
requests is done by the one or more Floor chairs or by the FCS itself,
depending on the Floor Control Policy.
The location of the Floor Control Server may be in either the MRFC or the MRFP
depending on the complexity/distribution of the conference. However when
located in the MRFP, the MRFP shall forward the Floor request decision to the
MRFC in order to execute the changes to the Floor Participant\'s granted
permissions.
#### 6.2.13.2 Floor Control within the MRFP
##### 6.2.13.2.1 Floor Control Connection Establishment
The set of data to establish a BFCP connection shall be exchanged in
accordance with IETF RFC 4583 [21]. A Floor control connection, which requires
a BFCP/TCP protocol termination property, shall be established between the UE
and the Floor Control Server, located in the MRFP. The MRFC shall initiate the
\"Configure BFCP Termination\" procedure as specified in clause 8.44 to
indicate to the MRFP the remote Floor control Client connection address and
request the local Floor control Client connection address. The MRFP shall
return the local Floor control Client connection address to the MRFC. The
Floor control connection may be initiated by the UE or the MRFP (FCS).
\- It is a prerequisite that the conference is configured using \"Configure
Conference for Floor Control\" procedure as described in clause 6.2.13.2.2,
which is used to set the common data of the conference for Floor control.
The combined sequence is shown in Figure 6.2.13.2.1.1
Figure 6.2.13.2.1.1: Combined procedures to Configure Conference and add a
Floor Control Termination
##### 6.2.13.2.2 Configure Conference and Floor Control Policy Indication
The \"Configure Conference For Floor Control\" procedure, specified in Clause
8.45 shall be used to set up a conference and to modify FCS properties such as
the Floor Control Policy. The procedure defines common data for all BFCP
users, these properties are defined on Context level.
The common data include:
\- Floor-Resource Associations, which indicates the correlation between Floor
ID and media properties for the MRFP to identify the Floor(s) when receiving
BFCP requests and notifying the MRFC of decisions to change the floor
permissions for a given user (termination).
\- Conference Identifier, which indicates the Conference Identifier for the
BFCP client to identify the conference when sending BFCP requests.
Floor Control Policy. This consists of:
\- The Floor control algorithm to be used in granting the Floor, either:
\- The FCFS algorithm or
\- The chair-controlled algorithm.
\- The maximum number of users who can hold the Floor at the same time.
Figure 6.2.13.2.2.1 shows the message sequence chart example for configuring a
conference for Floor control.
Figure 6.2.13.2.2.1 Procedure to Configure Conference for Floor Control
##### 6.2.13.2.3 Floor Chair Designation
If the Floor Control Policy indicates that the conference is Chair-controlled,
the MRFC shall indicate to the MRFP which termination represents the Floor
Chair and which Floor(s) the Floor Chair controls using the \"Designate Floor
Chair\" procedure as specified in clause 8.46.
The MRFC may also change the Floor Chair as needed using the \"Designate Floor
Chair\" procedure as specified in clause 8.46.
NOTE: There may be one or more Floor Chairs in a conference. But one media
stream can be controlled by only one chair.
It is a prerequisite that the conference is configured and the termination
configured for BFCP using \"Configure Conference for Floor Control\" and
\"Configure BFCP Termination\" procedures respectively.
NOTE: These procedures may be requested at same time.
Figure 6.2.13.2.3.1 shows the message sequence chart example for designating
Floor Chair.
Figure 6.2.13.2.3.1 Procedure to designate Floor Chair
##### 6.2.13.2.4 Floor Request Decision
The MRFC shall request the MRFP to notify the decision of Floor request using
the \"Floor Decision Request\" procedure as specified in clause 8.47. The MRFP
shall then notify the MRFC the outcome of the Floor Request, when the FCS has
made the decision to change the status to \"Granted\", \" Released \" or \"
Revoked \" ( The status is defined as REQUEST-STATUS in IETF RFC 4582[20]),
using the \"Report Floor Status Decision\" procedure as specified in clause
8.48.
The Floor Request Decision information is used by the MRFC to decide how to
set the media properties of the associated Termination/Stream on the MRFP.
The MRFP shall indicate the Floor Identity or Identities to which the Floor
decision is associated. The MRFP sends one notification per Floor decision for
a given termination and only one notification per termination shall be
outstanding at any time.
Figure 6.2.13.2.4.1 shows the message sequence chart example for requesting
and reporting Floor Request decisions.
Figure 6.2.13.2.4.1 Procedure to request and report Floor Request decisions
##### 6.2.13.2.5 Media Update and Confirmation
The MRFC modifies media properties associated with the Floor Request Decision
received from the MRFP using the \"Modify Media\" procedure defined in Clause
8.59; this will be either adding permissions if the \"status\" was granted or
removing the permissions if the \"status\" was revoked or released. The MRFC
shall indicate to the MRFP when it has successfully modified the media
properties based on the provided Floor Request Decisions notification using
the \"Confirm Media Update \" procedure as specified in clause 8.49. The MRFP
shall then modify the Floor status of the associated Client.
Figure 6.2.13.2.5.1 shows the message sequence chart example for modifying the
media and confirming media update based on Floor Request status.
Figure 6.2.13.2.5.1 Procedures to modify the media and confirm media update
##### 6.2.13.2.6 Floor Control Procedure
A Floor Participant may request one or more Floors by sending a BFCP request
message to the MRFP (FCS).
The MRFP (FCS) informs the Floor Chair, if present, about a Floor
Participant\'s Floor request via BFCP.
The Floor Chair sends to the MRFP (FCS) the decision to the Floor
Participant\'s Floor requests. If the Floor is not Chair-controlled, the FCS
located in the MRFP shall make the decision itself according to the Floor
Control Algorithm.
The MRFP shall notify the MRFC the Floor change request decision via the
\"Report Floor Request Decision\" procedure described in Clause 6.2.13.2.4.
The MRFC requests the MRFP to modify the media properties associated with the
Floor Request decision as described in Clause 6.2.13.2.5.
The MRFC informs the MRFP that the requested media changes to satisfy the new
Floor permissions have been completed using the \"Confirm Media Update\"
procedure, see Clause 8.49.
The MRFC may request the MRFP to play tones or announcements for indicating
when a user gains or loses Floor permissions.
##### 6.2.13.2.7 Floor Control Connection Release
When the MRFC receives an indication that the Floor control connection is to
be closed, the MRFC shall command the MRFP to release the Floor control
connections.
The Floor control connection shall also be released by the MRFP when the
termination for that connection is removed.
The Floor related BFCP signalling resources are released by the MRFP when the
Floor control connection is released.
If a Floor Participant owns a Floor when releasing the Floor control
connection, the MRFP(FCS) shall revoke the Floor permission.
##### 6.2.13.2.8 Example Message sequence chart
Figure 6.2.13.1 shows the message sequence chart example for Floor control on
a termination which is not the Floor Chair.
Figure 6.2.13.1 Floor control (message sequence chart)
### 6.2.14 Explicit Congestion Notification Support
#### 6.2.14.1 General
If the MRFC receives a SDP Offer containing ECN negotiation, see IETF RFC 6679
[25], and the MRFC and MRFP support ECN and at least some of the
initialisation methods offered within the \"a=ecn-capable-rtp\" attribute,
NOTE: Only the \"leap\" initialisation method is supported over the Mp
interface in this release.
the MRFC shall:
\- act as an end point for ECN;
\- return a SDP Answer according to 3GPP TS 26.114 [23] and the capabilities
of the MRFP, containing the \"a=ecn-capable-rtp\" attribute; and
\- indicate to the MRFP that it shall apply the ECN procedures (according to
3GPP TS 26.114 [23]) and act as an ECT endpoint.
NOTE: ECN XR summary reports and RTCP AVPF ECN feedback message are not
supported in this release.
When creating the SDP Offer the MRFC may initiate ECN negotiation (in
accordance with 3GPP TS 26.114 [23]), indicating the capabilities of the MRFP.
If the MRFC receives the SDP Answer also containing ECN attributes (indicating
successful ECN negotiation) then it shall indicate to the MRFP that it shall
apply the ECN procedures (according to 3GPP TS 26.114 [23]) and act as an ECT
endpoint.
The following ECN parameters are preconfigured in the MRFP:
\- Initialisation = \"leap\";
\- Mode = \"setread\";
\- ECT Marking = ECT-0;
\- Feedback is via Application Specific Adaptation Requests (i.e. Receiver
Driven Congestion Control).
The MRFP should not send RTCP XR ECN summary reports.
The procedure to configure the MRFP for ECN may be combined with any other
procedure requesting media resource from the MRFP.
#### 6.2.14.2 Message sequence chart, Request ECN
Figure 6.2.14.2.1 shows the message sequence chart example for requesting
Explicit Congestion Notification.
Figure 6.2.14.2.1: Procedure to Request ECN
Upon receipt of a request to apply Explicit Congestion Notification the MRFP
shall set the ECN field of the IP header in accordance with 3GPP TS 26.114
[23] when sending any data packets.
Upon receipt of any IP headers indicating Congestion Experienced (ECN-CE) the
MRFP shall trigger rate adaptation in accordance with 3GPP TS 26.114 [23].
#### 6.2.14.3 Message sequence chart, Report ECN Failure Event
Figure 6.2.14.3.1 shows the message sequence chart example for ECN Failure
Event.
Figure 6.2.14.3.1: Procedure to Report ECN Failure
When the MRFC receives a Notification indicating that an error has occurred it
may trigger a new SDP offer to remove ECN.
### 6.2.15 Multimedia Priority Service Congestion Control Procedures
#### 6.2.15.1 General
The MRFC and MRFP may support the priority treatment of a call/session
identified as an MPS call/session. This clause describes the Mp signalling
procedures and their interactions with SIP signalling in the control plane and
with user plane procedures to support the requirements for MPS. These Mp
signalling procedures may or may not apply depending on the network
configuration (e.g. whether the MRFP is shared by multiple MRFCs or whether
the MRFC controls multiple MRFPs for a given route -- Media Gateway Group).
The MRFC can receive a SIP INVITE with MPS priority information (see 3GPP TS
23.228 [1], clause 5.21).
#### 6.2.15.2 MRFP Resource Congestion in ADD response, request is queued
If the MRFC requests a resource via the Reserve and Configure IMS Resources
procedure or Reserve IMS Resources procedure and receives an error indicating
that the requested resource could not be seized (e.g. H.248 error code #510
\"insufficient resources\") and the MRFC does not have an alternative MRFP
through which it can route the call/session, the MRFC queues the priority
call/session and gives it priority over any further Reserve and Configure IMS
Resources or Reserve IMS Resources procedures for lower priority
calls/sessions towards this MRFP until the requested resource for this queued
call/session is successfully seized. The example sequence is shown in Figure
6.2.15.2.1.
Figure 6.2.15.2.1: Request to Reserve MPS priority call resources when MRFP is
congested
#### 6.2.15.3 MRFP Resource Congestion in ADD response, MRFC seizes new MRFP
If the MRFC requests a resource via the Reserve and Configure IMS Resources
procedure or Reserve IMS Resources procedure and receives an error indicating
that the requested resources could not be seized due to congestion (e.g. H.248
error code #510 \"insufficient resources\") and Media Gateway Groups are
implemented the MRFC seizes a new MRFP from the same Media Gateway Group
before resorting to any queuing of the priority call/session (as described in
6.2.15.2) to enable the MPS call/session to proceed as early as possible.
#### 6.2.15.4 MRFP Priority Resource Allocation
If the MRFP supports the Priority information (determined through provisioning
or package profile), the MRFC requests a resource via the Reserve and
Configure IMS Resources procedure or Reserve IMS Resources procedure and
includes the Priority information. The MRFP may then provide priority
allocation of resources once a congestion threshold is reached. The example
sequence is shown in Figure 6.2.15.4.1. If the MRFP is completely congested it
shall indicate this to the MRFC as described in 6.2.15.2.
Figure 6.2.15.4.1: Request to reserve MPS priority call resources when MRFP is
congested, priority resources are allocated
#### 6.2.15.5 MRFP Priority User Data marking
The MRFC may request the streams associated to an MPS call/session to be
marked with certain priority code point. The MRFP shall then mark each IP
packet header accordingly. The example sequence is shown in Figure 6.2.15.5.1.
Figure 6.2.15.5.1: Request to reserve IMS resources and apply DSCP marking for
MPS
The MRFP may also provide priority allocation for resources requested via a
subsequent Configure IMS Resources procedure not including Priority
information if the related context has been marked with priority information
during the Reserve IMS Resources procedure or Reserve and Configure IMS
Resources procedure.
### 6.2.16 Coordination of Video Orientation
Figure 6.2.16.1 shows the message sequence chart example for indicating
extended RTP header for the Coordination of Video Orientation (CVO).
Figure 6.2.16.1: Procedure to indicate RTP extension header for CVO
When the MRFC requests the IMS resources from the MRFP, the MRFC may
optionally request the MRFP to support the RTP header extension capability as
defined in IETF RFC 5285 [27].
### 6.2.17 Support of generic image attributes
#### 6.2.17.1 General
The MRFC and the MRFP may support the media-level SDP image attribute defined
in IETF RFC 6236 [28] as required by 3GPP TS 26.114 [23].
If the MRFP and the MRFC support the negotiation of the image size and if the
MRFC receives the SDP image attribute(s) \"a=imageattr\" then the MRFC may
send the generic image attribute parameter to the MRFP when seizing or
modifying a termination.
The list of image sizes per payload type supported by the MRFP shall be
preconfigured in the MRFC. If the image sizes received within an SDP body on
the Mr interface are not all supported by the MRFP then the MRFC shall only
send the list of corresponding MRFP supported image sizes to the MRFP. If no
image size is supported by the MRFP, the MRFC shall not send the generic image
attribute parameter to the MRFP.
#### 6.2.17.2 Indication of generic image attributes
The MRFC may include the generic image attributes to the MRFP. The example
sequence is shown in figure 6.2.17.2.1.
Figure 6.2.17.2.1: Request to reserve IMS resources with generic image
attribute
### 6.2.18 Interactive Connectivity Establishment Support
#### 6.2.18.1 ICE lite
Figure 6.2.18.1.1 shows a message sequence chart example for performing the
ICE lite procedure towards the offerer.
Figure 6.2.18.1: Procedure for interactive connectivity establishment using
ICE lite towards the offerer
#### 6.2.18.2 Full ICE
Figure 6.2.18.2.1 shows a message sequence chart example for performing the
full ICE procedure towards the offerer.
Figure 6.2.18.2.1: Procedure for interactive connectivity establishment using
full ICE towards the offerer
#### 6.2.18.3 Connectivity check result notification (full ICE)
Figure 6.2.18.3.1 shows the message sequence chart example for an ICE
connectivity check result Event.
Figure 6.2.18.3.1: Procedure to report ICE connectivity check result
#### 6.2.18.4 New peer reflexive candidate notification (full ICE)
Figure 6.2.18.4.1 shows the message sequence chart example for additional
connectivity check when new peer reflexive candidate is discovered in full
ICE.
Figure 6.2.18.4.1: Procedure to perform additional connectivity check upon the
report of new peer reflexive candidate
### 6.2.19 End-to-end security for TCP based media using TLS
#### 6.2.19.1 General
The MRFC and the MFRP may support e2e protection of TCP based media using the
pre-shared key ciphersuites for TLS (specified in IETF RFC 4279 [34]) and the
MIKEY-TICKET mechanism (specified in IETF RFC 6043 [33] with the profiling of
tickets and procedures given in 3GPP TS 33.328 [31]).
The following clauses describe extensions to the Mp signalling procedures and
their interactions with SIP signalling in control plane and with user plane
procedures if the e2e security for TCP based media using TLS and KMS is
supported by the MRFC and the MFRP.
#### 6.2.19.2 Specific procedures for session based messaging (MSRP)
##### 6.2.19.2.1 IMS UE originating procedures (\"dial-in\" scenario) for e2e
Figure 6.2.19.2.1.1 shows a \"dial-in\" conference procedure for one MSRP
session using TLS and KMS based security.
NOTE: In the shown example it is assumed that the UE-A and the MRFC/MRFP
support IETF RFC 6714 [n1].
Figure 6.2.19.2.1.1: UE connecting into a messaging conference - example call
flow for e2e case
The IMS UE-A and the MRFC perform an IMS conference session set-up according
to 3GPP TS 23.228 [1], 3GPP TS 24.247 [17] and with modifications described in
3GPP TS 33.328 [31]. The procedure in the figure 6.2.19.2.1.1 for requesting
e2e security for a media stream is described step-by-step with an emphasis on
the additional aspects for the MRFC and the MRFP of the e2e media protection
using TLS and KMS.
1\. Depending on the KMS and a local policy, the IMS UE-A will either interact
with the KMS to obtain keys and a MIKEY-TICKET ticket usable for the MRFC, or
it will create the ticket by itself.
The IMS UE-A generates the TRANSFER_INIT message according to IETF RFC 6043
[33] containing the ticket associated with the MRFC. A single Crypto Session
is included in the TRANSFER_INIT message as described in Annex H.3 of 3GPP TS
33.328 [31]. The protocol type in the Crypto Session is set to TLS.
The IMS UE-A creates an SDP offer with an MSRP based media over TLS transport
protocol and inserts \"a=setup:actpass\" SDP attribute specified in IETF RFC
4145 [36] and key management protocol \"a=key-mgmt\" SDP attribute specified
in IETF RFC 4567 [35] which indicates use of the MIKEY-TICKET ticket and
contains the TRANSFER_INIT message encapsulated in a keymgmt-data field.
2\. The IMS UE-A sends the SIP INVITE request with the SDP offer.
3\. Upon reception of the SIP INVITE request with the SDP offer containing a
media stream that uses \"TCP/TLS/MSRP\" transport protocol, the MRFC checks
for the presence of the key management protocol \"a=key-mgmt\" SDP attribute.
If it indicates the usage of the MIKEY the MRFC extracts a key management data
from a keymgmt-data field and \"base64\" decodes them to reconstruct the
original TRANSFER_INIT message. The MRFC checks if it is authorized to resolve
the ticket and if that is the case the MRFC interacts with the KMS to resolve
the ticket and receive keys.
4\. - 6. The MRFC uses the \"Reserve And Configure IMS resources\" procedure
to request a termination for \"TCP/TLS/MSRP\" media. The MRFC provides an IP
address and port received from the IMS UE-A and includes a Pre-Shared Key
information element containing the derived PSK i.e. the Traffic-Encrypting Key
associated with the Crypto Session that will be used by the MRFP in TLS
handshake. The MRFC includes a Notify TCP connection establishment Failure
Event information element to request the MRFP to report an unsuccessful TCP
connection set-up and a Notify TLS session establishment Failure Event
information element to request the MRFP to report an unsuccessful TLS session
set-up. In accordance to the information in the \"a=setup\" SDP attribute that
will be sent in an SDP answer the MFRC requests the MRFP to start a TCP
connection establishment and to start a TLS session once the TCP connection is
established.
7\. The MRFP sends a TCP SYN message towards the IMS UE-A to establish a TCP
connection. The IMS UE-A answers with a TCP SYN ACK message and the MRFP
replies with a TCP ACK message, completing the TCP connection establishment.
8\. Upon completion of the TCP connection establishment, the MRFP starts a TLS
session establishment using the received Pre-Shared Key information element to
set-up a TLS-PSK tunnel to protect MSRP messages.
9\. The MRFC includes the MIKEY-TICKET response in the TRANSFER_RESP message
created according to IETF RFC 6043 [33]. The MRFC inserts the key management
protocol \"a=key-mgmt\" SDP attribute which indicates use of the MIKEY-TICKET
ticket and contains the \"base64\" encoded TRANSFER_RESP message. The
TRANSFER_RESP message includes the information required for the generation of
keys.
10\. The MRFC sends the SIP 200 (OK) final response (or 18x provisional
response) to the SIP INVITE request with the SDP answer to the IMS UE-A.
After receiving the SIP 200 (OK) final response (or 18x provisional response)
to the SIP INVITE request with the SDP answer the IMS UE-A extracts a key
management data from the keymgmt-data field and \"base64\" decodes them to
reconstruct the original TRANSFER-RESP message. The IMS UE-A verifies the
TRANSFER-RESP message according to IETF RFC 6043 [33] and then verifies that
the authenticated identity of the recipient corresponds to the policy for the
MSRP session before completing the media security set-up.
##### 6.2.19.2.2 IMS UE terminating procedures (\"dial-out\" scenario) for e2e
Figure 6.2.19.2.2.1 shows a \"dial-out\" conference procedure for one MSRP
session using TLS and KMS based security.
NOTE: In the shown example it is assumed that the UE-B and the MRFC/MRFP
support IETF RFC 6714 [n1].
Figure 6.2.19.2.2.1: Terminating (\"dial-out\") example call flow for e2e case
The MRFC and the IMS UE-B performs an IMS \"dial-out\" conference session set-
up according to 3GPP TS 23.228 [1], 3GPP TS 24.147 [4] and with modifications
described in 3GPP TS 33.328 [31].
The procedure in the figure 6.2.19.2.2.1 for requesting e2e security for a
media stream is described step-by-step with an emphasis on the additional
aspects for the MRFC and the MRFP of the e2e media protection using TLS and
KMS.
1\. The MRFC receives a trigger to create an ad-hoc conference. Depending on
the KMS and a local policy, the MRFC will either interact with the KMS to
obtain keys and a MIKEY-TICKET ticket usable for the IMS UE-B, or it will
create the ticket by itself. In the latter case, MIKEY-TICKET mode 3 as
specified in IETF RFC 6043 [33] is used, and the MRFC will then perform all
key and ticket generation functions otherwise performed by the KMS.
The MRFC generates the TRANSFER_INIT message according to IETF RFC 6043 [33].
The identities of the initiator and the responder in the message are the KMS
user identities derived from the URI\'s in the To and From header fields in
the SIP INVITE request.
A single Crypto Session is included in the TRANSFER_INIT message as described
in Annex H.3 of 3GPP TS 33.328 [31]. The protocol type in the Crypto Session
is set to TLS.
2\. - 4. The MRFC uses the \"Reserve IMS resources\" procedure to request a
termination for \"TCP/TLS/MSRP\" media towards the IMS UE-B.
5\. The MRFC creates an SDP offer with an MSRP based media over TLS transport
protocol and inserts the \"a=setup:actpass\" SDP attribute specified in IETF
RFC 4145 [36] and the key management protocol \"a=key-mgmt\" SDP attribute
specified in IETF RFC 4567 [35] which indicates the use of the MIKEY-TICKET
ticket and contains the TRANSFER_INIT message encapsulated in a keymgmt-data
field.
6\. The MRFC sends the SIP INVITE request with the SDP offer to the IMS UE-B.
7\. Upon reception of the SIP INVITE request with the SDP offer containing a
media stream that uses transport \"TCP/TLS/MSRP\", the IMS UE-B checks if it
is authorized to resolve a ticket and if that is the case the IMS UE-B
interacts with the KMS to resolve the ticket and receive keys.
8\. The IMS UE-B includes the MIKEY-TICKET response in the TRANSFER_RESP
message created according to IETF RFC 6043 [33]. The IMS UE-B inserts the key
management protocol \"a=key-mgmt\" SDP attribute specified in IETF RFC 4567
[35].
The IMS UE-B sends the SIP 200 (OK) final response (or 18x provisional
response) to the SIP INVITE request with an SDP answer.
9\. - 11. After receiving the SIP 200 (OK) final response (or 18x provisional
response) to the SIP INVITE request with the SDP answer the MRFC extracts a
key management data from the keymgmt-data field and \"base64\" decodes them to
reconstruct the original TRANSFER-RESP message. The MRFC verifies the
TRANSFER-RESP message according to IETF RFC 6043 [33] and then verifies that
the authenticated identity of the recipient corresponds to the policy for the
MSRP session before completing the media security set-up.
The MRFC uses the \"Configure IMS resources\" procedure to configure a
termination towards the IMS UE-B with an IP address and port received from the
IMS UE-B and includes a Pre-Shared Key information element containing the
derived PSK i.e. the Traffic-Encrypting Key associated with the Crypto Session
that will be used by the MRFP in TLS handshake. The MRFC includes a Notify TCP
connection establishment Failure Event information element to request
reporting of an unsuccessful TCP connection set-up and a Notify TLS session
establishment Failure Event information element to request reporting of un
unsuccessful TLS session set-up.
12\. The IMS UE-B sends a TCP SYN message towards the MRFP to establish a TCP
connection. The MRFP answers with a TCP SYN ACK message and the IMS UE-B
replies with a TCP ACK message, completing the TCP connection establishment.
13\. Upon completion of the TCP connection establishment, the IMS UE-B starts
a TLS session establishment using the received Pre-Shared Key information
element to set-up a TLS-PSK tunnel to protect MSRP messages.
#### 6.2.19.3 Specific procedures for Floor Control Service (BFCP)
##### 6.2.19.3.1 IMS UE requesting e2e protected Floor control connection
Figure 6.2.19.3.1.1 shows a \"dial-in\" conference procedure for one BFCP
session with an e2e media protection using TLS and KMS based security.
Figure 6.2.19.3.1.1: UE requesting Floor control connection with FCS/MRFP -
example call flow for e2e case
The IMS UE-A wants to establish a Floor control connection with a Floor
Control Server (FCS), located in the MRFP. The IMS UE-A and the MRFC perform a
Floor control connection set-up according to 3GPP TS 23.228 [3], 3GPP TS
24.147 [21] and with modifications described in 3GPP TS 33.328 [2].
The procedure in the figure 6.2.19.3.1.1 for requesting e2e security of the
Floor control connection is described step-by-step with an emphasis on the
additional aspects for the MRFC and the MRFP of the e2e media protection using
TLS and KMS.
1\. As step 1 in clause 6.2.19.2.1.
2\. As step 2 in clause 6.2.19.2.1 with the exception that SDP offer indicates
\"TCP/TLS/BFCP\" as transport protocol.
3\. As step 3 in clause 6.2.19.2.1.
4\. - 6. The MRFC uses the \"Configure BFCP Termination\" procedure to request
a termination for \"TCP/TLS/BFCP\" media. The MRFC provides an IP address and
port received from the IMS UE-A and includes a Pre-Shared Key information
element containing the derived PSK i.e. the Traffic-Encrypting Key associated
with the Crypto Session that will be used by the MRFP in TLS handshake. The
MRFC includes a Notify TCP connection establishment Failure Event information
element to request the MRFP to report an unsuccessful TCP connection set-up
and a Notify TLS session establishment Failure Event information element to
request the MRFP to report an unsuccessful TLS session set-up. In accordance
to the information in the \"a=setup\" SDP attribute that will be sent in an
SDP answer the MFRC requests the MRFP to start a TCP connection establishment.
7\. As step 7 in clause 6.2.19.2.1.
8\. As step 9 in clause 6.2.19.2.1.
9\. As step 10 in clause 6.2.19.2.1 with the exception that the SDP answer
indicates \"TCP/TLS/BFCP\" as transport protocol.
10\. Upon completion of the TCP connection establishment and the reception of
the SDP answer with a key management data, the IMS UE-A starts a TLS session
establishment, in accordance to IETF RFC 4583 [21], using the received PSK to
set-up a TLS-PSK tunnel to protect MSRP messages.
#### 6.2.19.4 TLS session establishment Failure Indication
The MRFP shall use a Notify TLS session establishment Failure Indication
procedure to report TLS session establishment related failures.
The figure 6.2.19.4.1 shows the message sequence chart example when the MRFP
reports an unsuccessful TLS session set-up to the MRFC.
Figure 6.2.19.4.1: TLS session establishment Failure Indication
### 6.2.20 TCP bearer connection control
#### 6.2.20.1 TCP connection establishment
Figure 6.2.20.1.1 shows an example call flow for a MSRP session set-up
procedure, where the UE wants to join a messaging conference.
NOTE: In the shown example it is assumed that the UE-A and the MRFC/MRFP
support IETF RFC 6714 40.
Figure 6.2.20.1.1: UE connecting into a messaging conference
The IMS UE-A and the MRFC perform an IMS conference session set-up according
to 3GPP TS 23.228 [1], 3GPP TS 24.247 [17] and 3GPP TS 24.147 [4]. The
procedure in the figure 6.2.20.1.1 is described step-by-step with an emphasis
on the additional aspects for the MRFC and the MRFP of the TCP connection
establishment.
1\. The IMS UE-A wants to join a messaging conference. For this purpose the
IMS UE-A assigns a local TCP port number for the MSRP communication and builds
an SDP offer containing the \"a=setup:actpass\" SDP attribute specified in
IETF RFC 4145 [36].
The IMS UE-A sends the SIP INVITE request with the SDP offer.
2\. - 4. Upon reception of the SIP INVITE request with the SDP offer
containing a media stream that uses \"TCP/MSRP\" transport protocol, the MRFC
uses the \"Reserve And Configure IMS resources\" procedure to request a
termination for \"TCP/MSRP\" media. The MRFC provides an IP address and TCP
port received from the IMS UE-A as part of a remote descriptor, requests the
MRFP to allocate a local IP address and TCP port and includes a Notify TCP
connection establishment Failure Event information element to request the MRFP
to report an unsuccessful TCP connection set-up. In accordance to the
information in the \"a=setup\" SDP attribute that will be sent in an SDP
answer the MFRC requests the MRFP to start a TCP connection establishment.
5\. The MRFP sends a TCP SYN message towards the IMS UE-A to establish a TCP
connection. The IMS UE-A answers with a TCP SYN ACK message and the MRFP
replies with a TCP ACK message, completing the TCP connection establishment.
6\. The MRFC builds the SDP answer containing the \"a=setup:active\" SDP
attribute and inserts the IP address and TCP port received from the MRFP.
7\. The MRFC sends the 200 (OK) final response (or 18x provisional response)
to the SIP INVITE request with the SDP answer for the MSRP session towards the
IMS UE-A.
#### 6.2.20.2 TCP connection establishment Failure Indication
The MRFP shall use a Notify TCP connection establishment Failure Indication
procedure to report TCP connection establishment related failures.
The figure 6.2.20.2.1 shows the message sequence chart example when the MRFP
reports an unsuccessful TCP connection set-up to the MRFC.
Figure 6.2.20.2.1: TCP connection establishment Failure Indication
### 6.2.21 Telepresence Procedures
6.2.21.1 CLUE data channel establishment
Figure 6.2.21.1.1 shows a message sequence chart example for CLUE data channel
establishment procedure towards the SDP offerer (e.g. TP UE).
Figure 6.2.21.1.1: Procedure for CLUE data channel establishment towards the
offerer
6.2.21.2 CLUE transport between MRFC and MRFP
Figure 6.2.21.2.1 shows a message sequence chart example for the initiation of
CLUE message exchange procedure over Mp interface with the detection and
notification of CLUE message received from the TP UE.
NOTE: Other IEs for Telepresence are shown in CLUE data channel establishment
procedure.
Figure 6.2.21.2.1: Procedure for detection and notification of CLUE message
received
Figure 6.2.21.2.2 shows a message sequence chart example for CLUE message
carriage procedure towards the TP UE.
Figure 6.2.21.2.2: Procedure for sending CLUE message
### 6.2.22 Video Region-of-Interest (ROI)
#### 6.2.22.1 Video Region-of-Interest (ROI) using FECC
Figure 6.2.22.1.1 shows the message sequence chart example for indicating
Video Region-of-Interest (ROI) using FECC.
Figure 6.2.2.1.1: Procedure to indicate Video ROI using FECC
#### 6.2.22.2 \"Predefined ROI\" mode
Figure 6.2.2.2.1 shows the message sequence chart example for indicating
Predefined ROI mode.
Figure 6.2.22.2.1: Procedure to indicate Predefined ROI mode
When the MRFC requests the IMS resources from the MRFP, the MRFC may
optionally request the MRFP to support the RTCP feedback message capability
for \"Predefined ROI\" type expressed by the parameter \"3gpp-roi-
predefined\", as described in 3GPP TS 26.114 [23], media-level SDP predefined
ROI attribute \"a=predefined_ROI\" defined in TS 26.114 [23] to negotiate the
predefined ROI for sending and receiving video, and the RTP header extension
capability for carriage of predefined ROI information as defined in IETF RFC
5285 [27] and 3GPP TS 26.114 [23].
#### 6.2.22.3 \"Arbitrary ROI\" mode
Figure 6.2.22.3.1 shows the message sequence chart example for indicating
Arbitrary ROI mode.
Figure 6.2.22.3.1: Procedure to indicate Arbitrary ROI mode
When the MRFC requests the IMS resources from the MRFP, the MRFC may
optionally request the MRFP to support the RTCP feedback message capability
for \"Arbitrary ROI\" type expressed by the parameter \"3gpp-roi-arbitrary\",
as described in 3GPP TS 26.114 [23], and the RTP header extension capability
for carriage of arbitrary ROI information as defined in IETF RFC 5285 [27] and
3GPP TS 26.114 [23].
### 6.2.23 Rate adaptation for media endpoints
The signalling flow shown in figure 6.2.23.1 gives an example for a multimedia
conference establishment (\"dial-in\" conference procedure) when rate
adaptation for media endpoints using the \"a=bw-info\" SDP attribute (defined
in clause 19 of 3GPP TS 26.114 [23] to negotiate the additional bandwidth
properties) is supported by the MRFC and the MRFP.
Figure 6.2.23.1: Multimedia conference establishment (\"dial-in\" procedure)
with support of the enhanced bandwidth negotiation mechanism
The procedure in the figure 6.2.23.1 is described step-by-step with an
emphasis on the additional aspects for the MRFC and the MRFP of the rate
adaptation for media endpoints using the enhanced bandwidth negotiation
mechanism.
1\. The MRFC receives the SIP INVITE request with the SDP offer containing for
the offered payload types \"a=bw-info\" SDP attribute lines.
2\. The MRFC selects the payload type from the received SDP offer. The
received SDP offer contained \"a=bw-info\" attribute(s) lines for the selected
payload type.
3\. -- 5. The MRFC uses the \"Reserve and Configure IMS resources\" procedure
to request media resources and for the selected payload type (codec and codec
configurations) the MRFC provides to the MRFP the \"Additional Bandwidth
Properties\" information element containing in the remote descriptor \"a=bw-
info\" SDP attribute lines describing the bandwidth range which the MRFP will
use in the sending direction towards the conference participant and which
correspond to \"a=bw-info\" SDP attribute lines indicating receiving direction
in the received SDP offer in step 1.
The encoder in the MRFP will use media bandwidth range for rate adaptation
(i.e. to select an appropriate encoding and redundancy) when transcoding media
streams.
6\. The MRFC inserts in the SDP answer the IP address and RTP port received
from the MRFP and for the selected payload type the \"a=bw-info\" SDP
attribute lines.
7\. The MRFC sends towards the conference participant the 200 (OK) final
response (or 18x provisional response) to the SIP INVITE request with the SDP
answer containing for the selected payload type \"a=bw-info\" SDP attribute
lines.
The signalling flow shown in figure 6.2.23.2 gives an example for a multimedia
conference establishment (\"dial-out \" conference procedure) when the rate
adaptation for media endpoints using the enhanced bandwidth negotiation
mechanism is supported by the MRFC and the MRFP.
Figure 6.2.23.2: Multimedia conference establishment (\"dial-out\" procedure)
with support of the enhanced bandwidth negotiation mechanism
The procedure in the figure 6.2.23.2 is described step-by-step with an
emphasis on the additional aspects for the MRFC and the MRFP of the rate
adaptation for media endpoints using the enhanced bandwidth negotiation
mechanism.
1\. The MRFC receives a trigger to create an ad-hoc conference.
2\. Based on the local configuration the MRFC creates \"a=bw-info\" SDP
attribute(s) for the offered payload types.
3\. -- 5. The MRFC uses the \"Reserve IMS resources\" procedure to request
resources from the MRFP.
6\. The MRFC inserts in the SDP offer the IP address and RTP port received
from the MRFP and for the offered payload types the \"a=bw-info\" SDP
attribute lines created in step 2.
7\. The MRFC sends the SIP INVITE request with the SDP offer containing for
the offered payload types \"a=bw-info\" SDP attribute lines towards the
conference participant.
8\. The MRFC receives the 200 (OK) final response (or 18x provisional
response) to the SIP INVITE request with the SDP answer containing for the
selected payload type \"a=bw-info\" SDP attribute lines.
9\. -- 11. The MRFC uses the \"Configure IMS resources\" procedure to
configure media resources and for the selected payload type the MRFC provides
to the MRFP the \"Additional Bandwidth Properties\" information element
containing in the remote descriptor \"a=bw-info\" SDP attribute lines with the
values received in step 8 describing the bandwidth range which the MRFP will
use in the sending direction towards the conference participant and which
correspond to \"a=bw-info\" SDP attribute lines indicating receiving direction
in the received SDP answer in step 8.
The encoder in the MRFP will use media bandwidth range for rate adaptation
(i.e. to select an appropriate encoding and redundancy) when transcoding media
streams.
# 7 Charging
The charging is specified in 3GPP TS 32.260[14]; no requirements are
identified for the Mp interface.
# 8 Messages/Procedures and contents
## 8.1 General
This clause describes logical signalling procedures between the MRFC and MRFP.
The procedures within this clause are intended to be implemented using the
standard H.248 procedure as defined in ITU recommendation H.248.1 [3] with
appropriate parameter combinations.
## 8.2 Send tone
This procedure is used to send a tone.
Table 8.2.1: Procedures between MRFC and MRFP: Send Tone
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Send Tone | Context | M | This | | | | | | information | | | MRFC | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | tone is | | | | | | sent. | | +-------------+-------------+-------------+-------------+-------------+ | | Tone | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the tone to | | | | | | be | | | | | | generated. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify Tone | O | This | | | | Completion | | information | | | | | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | completed | | | | | | tone. | | +-------------+-------------+-------------+-------------+-------------+ | | Tone | O | This | | | | Direction | | information | | | | | | element | | | | | | indicates | | | | | | the tone | | | | | | direction | | | | | | in the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Tone Timing | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the time | | | | | | for the | | | | | | tone. | | +-------------+-------------+-------------+-------------+-------------+ | | DTMF | O | This | | | | trigger | | information | | | | | | element | | | | | | indicates | | | | | | the MRFP to | | | | | | detect the | | | | | | DTMF and | | | | | | the MRFP | | | | | | should stop | | | | | | the tone | | | | | | when a DTMF | | | | | | digit is | | | | | | detected. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | Send Tone | MRFP | Context | M | This | | Ack | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.3 Stop tone
This procedure is used to stop the tone.
Table 8.3.1: Procedures between MRFC and MRFP: Stop Tone
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Stop Tone MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination where
the tone is stopped. Stop Tone M This information element requests that tone
generation is stopped. Stop Tone Ack MRFP Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the bearer termination where the command
was executed.
* * *
## 8.4 Tone completed
This procedure is used to notify the completed tone.
Table 8.4.1: Procedures between MRFC and MRFP: Tone Completed
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Tone Completed MRFP Context M
This information element indicates the context for the bearer termination.
Bearer Termination M This information element indicates the bearer termination
where the tone was completed. Tone Completed M This information element
indicates completion of the tone. Cause M This information element indicates
the cause of tone completion. Tone Completed Ack MRFC Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the Bearer Termination
where the command was executed.
* * *
## 8.5 Start announcement
This procedure is used to request to start announcement.
Table 8.5.1: Procedures between MRFC and MRFP: Start announcement
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Start | Context | M | This | | | a | | | information | | | nnouncement | | | element | | | | | | indicates | | | MRFC | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | a | | | | | | nnouncement | | | | | | is sent. | | +-------------+-------------+-------------+-------------+-------------+ | | A | M | This | | | | nnouncement | | information | | | | identifier | | element | | | | | | indicates | | | | | | the | | | | | | a | | | | | | nnouncement | | | | | | or | | | | | | a | | | | | | nnouncement | | | | | | list to be | | | | | | played. | | +-------------+-------------+-------------+-------------+-------------+ | | Audio file | O | This | | | | format | | information | | | | | | element | | | | | | indicates | | | | | | the audio | | | | | | file type, | | | | | | such as the | | | | | | 3GPP file | | | | | | type. | | +-------------+-------------+-------------+-------------+-------------+ | | Direction | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | a | | | | | | nnouncement | | | | | | direction | | | | | | in the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Iterations | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the number | | | | | | of times | | | | | | the | | | | | | a | | | | | | nnouncement | | | | | | shall be | | | | | | played | | +-------------+-------------+-------------+-------------+-------------+ | | Variable | O | This | | | | List | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | variable or | | | | | | variable | | | | | | list to be | | | | | | played. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | O | This | | | | A | | information | | | | nnouncement | | element | | | | Completed | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | completed | | | | | | an | | | | | | nouncement. | | +-------------+-------------+-------------+-------------+-------------+ | | DTMF stop | O | This | | | | a | | information | | | | nnouncement | | element | | | | | | indicates | | | | | | whether the | | | | | | MRFP should | | | | | | stop the | | | | | | a | | | | | | nnouncement | | | | | | when a DTMF | | | | | | digit is | | | | | | detected. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | Start | MRFP | Context | M | This | | a | | | | information | | nnouncement | | | | element | | Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.6 Stop Announcement
This procedure is used to stop the announcement.
Table 8.6.1: Procedures between MRFC and MRFP: Stop Announcement
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFC | Context | M | This | | A | | | | information | | nnouncement | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | a | | | | | | nnouncement | | | | | | is stopped. | +-------------+-------------+-------------+-------------+-------------+ | | | Stop | M | This | | | | A | | information | | | | nnouncement | | element | | | | | | requests | | | | | | that | | | | | | a | | | | | | nnouncement | | | | | | playing is | | | | | | stopped. | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFP | Context | M | This | | A | | | | information | | nnouncement | | | | element | | | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.7 Announcement Completed
This procedure is used to notify the completed announcement.
Table 8.7.1: Procedures between MRFC and MRFP Announcement Completed
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Announcement Completed MRFP
Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination where the announcement was completed. Announcement
Completed M This information element indicates completion of the announcement.
Cause M This information element indicates the cause of announcement
completion. Announcement Completed Ack MRFC Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the Bearer Termination where the command
was executed.
* * *
## 8.8 Start audio record
This procedure is used to start the audio record.
Table 8.8.1: Procedures between MRFC and MRFP: Start audio record
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Start audio | Context | M | This | | | record | | | information | | | | | | element | | | MRFC | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | audio is | | | | | | recorded. | | +-------------+-------------+-------------+-------------+-------------+ | | Record file | M | This | | | | Identifier | | information | | | | | | element | | | | | | indicates | | | | | | the record | | | | | | file | | | | | | Identifier | | | | | | or a | | | | | | request to | | | | | | the MRFP to | | | | | | create the | | | | | | record file | | | | | | Identifier. | | +-------------+-------------+-------------+-------------+-------------+ | | Record file | O | This | | | | Format | | information | | | | | | element | | | | | | indicates | | | | | | the audio | | | | | | record file | | | | | | format. | | +-------------+-------------+-------------+-------------+-------------+ | | Maximum | O | This | | | | Record | | information | | | | Timer | | element | | | | | | indicates | | | | | | the maximum | | | | | | allowable | | | | | | length of | | | | | | the | | | | | | recording | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | O | This | | | | audio | | information | | | | record | | element | | | | Completed | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | completed | | | | | | audio | | | | | | record. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | Start audio | MRFP | Context | M | This | | record Ack | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Record File | O | This | | | | identifier | | information | | | | | | element | | | | | | indicates | | | | | | the file | | | | | | identifier | | | | | | created by | | | | | | the MRFP if | | | | | | the MRFC | | | | | | request to | | | | | | create a | | | | | | file URI. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.9 Stop audio record
This procedure is used to stop the audio record.
Table 8.9.1: Procedures between MRFC and MRFP: Stop audio record
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Stop audio record MRFC Context
M This information element indicates the context for the bearer termination.
Bearer Termination M This information element indicates the bearer termination
where the audio record is stopped. Stop audio record M This information
element requests that audio record is stopped. Stop audio record Ack MRFP
Context M This information element indicates the context where the command was
executed. Bearer Termination M This information element indicates the bearer
termination where the command was executed.
* * *
## 8.10 Audio record completed
This procedure is used to report the audio record completed.
Table 8.10.1: Procedures between MRFC and MRFP: Report audio record completed
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Audio Record Completed MRFP
Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination where the audio record was completed. audio record
Completed M This information element indicates the audio record completed.
Cause M This information element indicates the return code of audio record.
Audio record Completed Ack MRFC Context M This information element indicates
the context where the command was executed. Bearer Termination M This
information element indicates the Bearer Termination where the command was
executed.
* * *
## 8.11 Detect DTMF
This procedure is used to request detection of a DTMF digit.
Table 8.11.1: Procedures between MRFC and MRFP: Detect DTMF
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Detect DTMF MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination/Bearer Termination Request M This information element indicates
the existing bearer termination or requests a new bearer termination where the
DTMF digit detection is requested. Start_DTMF_Detection M This information
element requests MRFP to detect a DTMF digit. Detect DTMF Ack MRFP Context M
This information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed.
* * *
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.12 Stop DTMF Detection
This procedure is used to stop detection of the DTMF digit.
Table 8.12.1: Procedures between MRFC and MRFP: Stop DTMF Detection
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Stop DTMF Detection MRFC
Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination where the DTMF digit detection is stopped. Stop DTMF
Detection M This information element requests that DTMF digit detection is
stopped. Stop DTMF Detection Ack MRFP Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the bearer termination where the command
was executed.
* * *
## 8.13 Report DTMF
This procedure is used to report a detected DTMF digit.
Table 8.13.1: Procedures between MRFP and MRFC: Report DTMF
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Report DTMF MRFP Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination where
the DTMF digit was detected. Digit M This information element reports the
detected DTMF digit. Report DTMF Ack MRFC Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the Bearer Termination where the command
was executed.
* * *
## 8.14 Start playing multimedia
This procedure is used to start playing multimedia.
Table 8.14.1: Procedures between MRFC and MRFP: start playing multimedia
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Start | Context | M | This | | | playing | | | information | | | multimedia | | | element | | | | | | indicates | | | > MRFC | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | multimedia | | | | | | is sent. | | +-------------+-------------+-------------+-------------+-------------+ | | Multimedia | M | This | | | | identifier | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | multimedia | | | | | | or list of | | | | | | multimedia | | | | | | to be | | | | | | played. | | | | | | This may be | | | | | | a single | | | | | | identifier | | | | | | or one | | | | | | identifier | | | | | | per media | | | | | | type. | | +-------------+-------------+-------------+-------------+-------------+ | | Multimedia | O | This | | | | file format | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | multimedia | | | | | | file type, | | | | | | such as the | | | | | | 3GP file | | | | | | type. | | +-------------+-------------+-------------+-------------+-------------+ | | Iterations | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the number | | | | | | of times | | | | | | the | | | | | | multimedia | | | | | | shall be | | | | | | played | | +-------------+-------------+-------------+-------------+-------------+ | | Direction | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | direction | | | | | | of the | | | | | | multimedia | | | | | | to be sent. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | O | This | | | | multimedia | | information | | | | completed | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | when the | | | | | | playing | | | | | | multimedia | | | | | | is | | | | | | completed. | | +-------------+-------------+-------------+-------------+-------------+ | | DTMF stop | O | This | | | | multimedia | | information | | | | | | element | | | | | | indicates | | | | | | the MRFP to | | | | | | detect the | | | | | | DTMF digits | | | | | | and stop | | | | | | the playing | | | | | | multimedia | | | | | | when a | | | | | | pre-defined | | | | | | DTMF digit | | | | | | is | | | | | | detected. | | +-------------+-------------+-------------+-------------+-------------+ | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | +-------------+-------------+-------------+-------------+-------------+ | Start | MRFP | Context | M | This | | playing | | | | information | | multimedia | | | | element | | Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.15 Stop playing multimedia
This procedure is used to stop playing multimedia.
Table 8.15.1: Procedures between MRFC and MRFP: Stop playing multimedia
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Stop | > MRFC | Context | M | This | | playing | | | | information | | multimedia | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Stop | M | This | | | | playing | | information | | | | multimedia | | element | | | | | | requests | | | | | | that | | | | | | multimedia | | | | | | playing is | | | | | | stopped. | +-------------+-------------+-------------+-------------+-------------+ | stop | > MRFP | Context | M | This | | playing | | | | information | | multimedia | | | | element | | | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.16 Playing multimedia completed
This procedure is used to report the playing multimedia completed.
Table 8.16.1: Procedures between MRFC and MRFP: Report playing multimedia
completed
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Report | > MRFP | Context | M | This | | playing | | | | information | | multimedia | | | | element | | completed | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Playing | M | This | | | | Completed | | information | | | | | | element | | | | | | indicates | | | | | | completed | | | | | | of the | | | | | | multimedia | | | | | | play. | +-------------+-------------+-------------+-------------+-------------+ | | | Cause | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the return | | | | | | code of | | | | | | playing | | | | | | multimedia. | +-------------+-------------+-------------+-------------+-------------+ | Report | > MRFC | Context | M | This | | playing | | | | information | | multimedia | | | | element | | completed | | | | indicates | | | | | | the context | | ACK | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.17 Start multimedia record
This procedure is used to start the multimedia record.
Table 8.17.1: Procedures between MRFC and MRFP: Start multimedia record
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Start | Record | Context | M | This | | | | | | information | | multimedia | MRFC | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | multimedia | | | | | | is | | | | | | recorded. | +-------------+-------------+-------------+-------------+-------------+ | | | Multimedia | M | This | | | | file | | information | | | | identifier | | element | | | | | | indicates | | | | | | the | | | | | | multimedia | | | | | | record file | | | | | | ide | | | | | | ntification | | | | | | or a | | | | | | request to | | | | | | the MRFP to | | | | | | create a | | | | | | file | | | | | | identifier. | +-------------+-------------+-------------+-------------+-------------+ | | | Multimedia | O | This | | | | file Format | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | multimedia | | | | | | record file | | | | | | format. | +-------------+-------------+-------------+-------------+-------------+ | | | Maximum | O | This | | | | Record | | information | | | | Timer | | element | | | | | | indicates | | | | | | the maximum | | | | | | allowable | | | | | | length of | | | | | | the | | | | | | recording | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | multimedia | | information | | | | record | | element | | | | Completed | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | completed | | | | | | multimedia | | | | | | record. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | Start | MRFP | Context | M | This | | | | | | information | | multimedia | | | | element | | | | | | indicates | | record Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | | | information | | | | Termination | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | File | O | This | | | | identifier | | information | | | | | | element | | | | | | indicates | | | | | | the file | | | | | | ide | | | | | | ntification | | | | | | created by | | | | | | the MRFP if | | | | | | the MRFC | | | | | | request to | | | | | | create a | | | | | | file | | | | | | identifier. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.18 Stop multimedia record
This procedure is used to stop the multimedia record.
Table 8.18.1: Procedures between MRFC and MRFP: Stop multimedia record
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFC | Context | M | This | | | | | | information | | Multimedia | | | | element | | | | | | indicates | | Record | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Stop | M | This | | | | multimedia | | information | | | | record | | element | | | | | | requests | | | | | | that | | | | | | multimedia | | | | | | record is | | | | | | stopped. | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFP | Context | M | This | | | | | | information | | Multimedia | | | | element | | | | | | indicates | | record Ack | | | | the context | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.19 Multimedia record completed
This procedure is used to report the multimedia record completed.
Table 8.19.1: Procedures between MRFC and MRFP: Report multimedia record
completed
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Report | > MRFP | Context | M | This | | multimedia | | | | information | | record | | | | element | | completed | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Multimedia | M | This | | | | record | | information | | | | Completed | | element | | | | | | indicates | | | | | | the | | | | | | multimedia | | | | | | record | | | | | | completed. | +-------------+-------------+-------------+-------------+-------------+ | | | Cause | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the return | | | | | | code of | | | | | | multimedia | | | | | | record. | +-------------+-------------+-------------+-------------+-------------+ | Report | > MRFC | Context | M | This | | multimedia | | | | information | | record | | | | element | | completed | | | | indicates | | ACK | | | | the context | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.20 Reserve and Configure IMS Resources
This procedure is used to reserve multimedia-processing resources for an Mp
interface connection; it is based on the procedure of the same name defined in
3GPP TS 29.163 [9].
Table 8.20.1: Procedures between MRFC and MRFP: Reserve and Configure IMS
Resources
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Reserve and | MRFC | Cont | M | This | | Configure | | ext/Context | | information | | IMS | | Request | | element | | Resources | | | | indicates | | | | | | the | | | | | | existing | | | | | | context or | | | | | | requests a | | | | | | new context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Priority | O | This | | | | information | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply | | | | | | priority | | | | | | treatment | | | | | | for the | | | | | | t | | | | | | erminations | | | | | | and bearer | | | | | | connections | | | | | | in the | | | | | | specified | | | | | | context. | +-------------+-------------+-------------+-------------+-------------+ | | | IMS | M | This | | | | Termination | | information | | | | Request | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new IMS | | | | | | termination | | | | | | for the | | | | | | bearer to | | | | | | be | | | | | | e | | | | | | stablished. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | R | O | This | | | | eserveValue | | information | | | | | | element | | | | | | indicates | | | | | | if multiple | | | | | | local IMS | | | | | | resources | | | | | | are to be | | | | | | reserved | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | send data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | Request | | requests an | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | on the MRFP | | | | | | that the | | | | | | remote end | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | MRFP can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | Released | | information | | | | Bearer | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | released | | | | | | bearer. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | C | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | | | | | Otherwise | | | | | | the | | | | | | information | | | | | | element is | | | | | | optional. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply ECN. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the MRFP to | | | | | | perform IP | | | | | | header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint. | | | | | | It may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if an ECN | | | | | | related | | | | | | error | | | | | | occurs It | | | | | | may be | | | | | | included | | | | | | only if ECN | | | | | | is | | | | | | enabled.. | +-------------+-------------+-------------+-------------+-------------+ | | | Diffserv | O | This | | | | Code Point | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply a | | | | | | specific | | | | | | Diffserv | | | | | | Code Point | | | | | | to the IP | | | | | | headers. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for CVO | | element | | | | | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | CVO | | | | | | extended | | | | | | RTP header | | | | | | as defined | | | | | | by | | | | | | IETF RFC 5 | | | | | | 285 [27]. | +-------------+-------------+-------------+-------------+-------------+ | | | Generic | O | This | | | | Image | | information | | | | Attributes | | element | | | | | | indicates | | | | | | image | | | | | | attributes | | | | | | (e.g. image | | | | | | size) as | | | | | | defined by | | | | | | IETF RFC 6 | | | | | | 236 [28]. | +-------------+-------------+-------------+-------------+-------------+ | | | STUN server | O | This | | | | request | | information | | | | | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | answer STUN | | | | | | c | | | | | | onnectivity | | | | | | checks for | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | C | This | | | | C | | information | | | | onnectivity | | element | | | | Check | | requests | | | | | | the MRFP to | | | | | | perform ICE | | | | | | c | | | | | | onnectivity | | | | | | check as | | | | | | defined by | | | | | | IETF RFC 5 | | | | | | 245 [29]. | | | | | | It is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ICE | C | This | | | | C | | information | | | | onnectivity | | element | | | | Check | | requests a | | | | Result | | n | | | | | | otification | | | | | | of ICE | | | | | | c | | | | | | onnectivity | | | | | | check | | | | | | result. It | | | | | | is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | password | | information | | | | request | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE | | | | | | password. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE Ufrag | O | This | | | | request | | information | | | | | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE ufrag. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE host | O | This | | | | candidate | | information | | | | request | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE host | | | | | | candidate. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | candidate | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | candidate | | | | | | for ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | password | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | password | | | | | | for ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | Ufrag | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | Ufrag for | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | O | This | | | | Path | | information | | | | request | | element | | | | | | requests | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \" | | | | | | Fromâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | O | This | | | | Path | | information | | | | | | element | | | | | | provides | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \"Toâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | Establish | O | This | | | | TCP | | information | | | | connection | | element | | | | | | requests | | | | | | the MRFP to | | | | | | take a TCP | | | | | | client role | | | | | | and to | | | | | | initiate a | | | | | | TCP | | | | | | connection | | | | | | est | | | | | | ablishment. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify TCP | O | This | | | | connection | | information | | | | es | | element | | | | tablishment | | requests a | | | | Failure | | n | | | | Event | | otification | | | | | | if a TCP | | | | | | connection | | | | | | es | | | | | | tablishment | | | | | | failure | | | | | | occurs. | +-------------+-------------+-------------+-------------+-------------+ | | | Establish | O | This | | | | (D)TLS | | information | | | | session | | element | | | | | | requests | | | | | | the MRFP to | | | | | | take a | | | | | | (D)TLS | | | | | | client role | | | | | | and to | | | | | | initiate a | | | | | | (D)TLS | | | | | | session | | | | | | est | | | | | | ablishment. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | (D)TLS | | information | | | | session | | element | | | | es | | requests a | | | | tablishment | | n | | | | Failure | | otification | | | | Event | | if a (D)TLS | | | | | | session | | | | | | es | | | | | | tablishment | | | | | | failure | | | | | | occurs. | +-------------+-------------+-------------+-------------+-------------+ | | | Pre-Shared | O | This | | | | Key | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | protected | | | | | | using TLS | | | | | | tunnel | | | | | | established | | | | | | with | | | | | | M | | | | | | IKEY-TICKET | | | | | | procedures. | | | | | | It | | | | | | indicates | | | | | | the | | | | | | Traffic | | | | | | -Encrypting | | | | | | key | | | | | | associated | | | | | | with the | | | | | | Crypto | | | | | | Session | | | | | | that shall | | | | | | be used in | | | | | | TLS | | | | | | handshake. | +-------------+-------------+-------------+-------------+-------------+ | | | Allowed | O | This | | | | RTCP APP | | information | | | | message | | element is | | | | types | | present if | | | | | | the MRFC | | | | | | allows the | | | | | | MRFP to | | | | | | send RTCP | | | | | | APP packets | | | | | | of the | | | | | | indicated | | | | | | types. The | | | | | | MRFP shall | | | | | | not send | | | | | | other RTCP | | | | | | APP | | | | | | packets. If | | | | | | the | | | | | | parameter | | | | | | is not | | | | | | supplied, | | | | | | the MRFP | | | | | | shall not | | | | | | send any | | | | | | RTCP APP | | | | | | packets. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | certificate | | information | | | | fingerprint | | element is | | | | Request | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | certificate | | information | | | | fingerprint | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Local SCTP | O | This | | | | Port | | information | | | | Request | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local SCTP | | | | | | Port. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote SCTP | O | This | | | | Port | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | SCTP port. | +-------------+-------------+-------------+-------------+-------------+ | | | SCTP Stream | O | This | | | | ID | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the the | | | | | | actual SCTP | | | | | | stream | | | | | | identifier | | | | | | to realize | | | | | | the CLUE | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Subprotocol | O | This | | | | ID | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the | | | | | | protocol | | | | | | \"CLUE\" to | | | | | | exchange | | | | | | via the | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Local max | O | This | | | | message | | information | | | | size | | element is | | | | Request | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local max | | | | | | message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote max | O | This | | | | message | | information | | | | size | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | max message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for Sent | | element | | | | ROI | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | ROI | | | | | | extended | | | | | | RTP header | | | | | | for | | | | | | carriage of | | | | | | predefined | | | | | | and/or | | | | | | arbitrary | | | | | | ROI | | | | | | information | | | | | | as defined | | | | | | by | | | | | | IETF RFC | | | | | | 5285 [27] | | | | | | and | | | | | | 3GPP TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify CLUE | O | This | | | | Message | | information | | | | Received | | element | | | | Event | | requests a | | | | | | reporting | | | | | | of the | | | | | | received | | | | | | CLUE | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | | | SDPCapNeg | O | This | | | | co | | information | | | | nfiguration | | element | | | | | | provides | | | | | | SDPCapNeg | | | | | | confi | | | | | | guration(s) | | | | | | using as | | | | | | \"a=acap\", | | | | | | \"a=tcap\", | | | | | | \"a=pcfg\" | | | | | | and | | | | | | \"a=acfg\" | | | | | | SDP | | | | | | attributes. | +-------------+-------------+-------------+-------------+-------------+ | | | Additional | O | This | | | | Bandwidth | | information | | | | Properties | | element | | | | | | indicates | | | | | | additional | | | | | | bandwidth | | | | | | properties | | | | | | using | | | | | | \" | | | | | | a=bw-info\" | | | | | | SDP | | | | | | a | | | | | | ttribute(s) | | | | | | as defined | | | | | | by | | | | | | 3GPP TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | Reserve and | MRFP | Context | M | This | | Configure | | | | information | | IMS | | | | element | | Resources | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | IMS | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the Bearer | | | | | | Termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | send data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | the MRFP | | | | | | shall | | | | | | receive | | | | | | user plane | | | | | | data from | | | | | | IMS. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | MRFP can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | C | This | | | | password | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | password | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE Ufrag | C | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | Ufrag | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE host | C | This | | | | candidate | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | host | | | | | | candidate | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE lite | C | This | | | | indication | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if an | | | | | | ICE host | | | | | | candidate | | | | | | request was | | | | | | contained | | | | | | in the | | | | | | request, | | | | | | and the | | | | | | MRFP | | | | | | supports | | | | | | ICE lite, | | | | | | but not | | | | | | full ICE. | | | | | | It | | | | | | indicates | | | | | | that the | | | | | | MRFP only | | | | | | supports | | | | | | ICE lite. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | C | This | | | | Path | | information | | | | | | element may | | | | | | be present | | | | | | only if the | | | | | | MSRP URI | | | | | | Path | | | | | | request was | | | | | | contained | | | | | | in the | | | | | | request. | | | | | | This | | | | | | information | | | | | | element | | | | | | provides | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \" | | | | | | Fromâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | certificate | | information | | | | fingerprint | | element may | | | | | | be present | | | | | | only if the | | | | | | Local | | | | | | certificate | | | | | | fingerprint | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Local SCTP | C | This | | | | Port | | information | | | | | | element may | | | | | | be present | | | | | | only if the | | | | | | Local SCTP | | | | | | Port | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | SCTP Port. | +-------------+-------------+-------------+-------------+-------------+ | | | SCTP Stream | C | This | | | | ID | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SCTP | | | | | | stream | | | | | | identifier | | | | | | that the | | | | | | MRFP used | | | | | | to realize | | | | | | the CLUE | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Subprotocol | C | This | | | | ID | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the the | | | | | | protocol | | | | | | \"CLUE\" to | | | | | | exchange | | | | | | via the | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Local max | C | This | | | | message | | information | | | | size | | element may | | | | | | be present | | | | | | only if the | | | | | | Local max | | | | | | message | | | | | | size | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | max message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | SDPCapNeg | C | This | | | | co | | information | | | | nfiguration | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | provides | | | | | | SDPCapNeg | | | | | | confi | | | | | | guration(s) | | | | | | using as | | | | | | \"a=acap\", | | | | | | \"a=tcap\", | | | | | | \"a=pcfg\" | | | | | | and | | | | | | \"a=acfg\" | | | | | | SDP | | | | | | attributes. | +-------------+-------------+-------------+-------------+-------------+
## 8.21 Reserve IMS Resources Procedure
This procedure is used to reserve local connection addresses and local
resources in MRFP; it is based on the procedure of the same name defined in
3GPP TS 29.163 [9].
Table 8.21.1: Procedures between MRFC and MRFP: Reserve IMS Resources
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Reserve IMS | MRFC | Context | M | This | | Resources | | /Context | | information | | | | Request | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | context or | | | | | | requests a | | | | | | new context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Priority | O | This | | | | information | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply | | | | | | priority | | | | | | treatment | | | | | | for the | | | | | | t | | | | | | erminations | | | | | | and bearer | | | | | | connections | | | | | | in the | | | | | | specified | | | | | | context. | +-------------+-------------+-------------+-------------+-------------+ | | | IMS | M | This | | | | Termination | | information | | | | Request | | element | | | | | | requests a | | | | | | new bearer | | | | | | termination | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | R | O | This | | | | eserveValue | | information | | | | | | element | | | | | | indicates | | | | | | if multiple | | | | | | local IMS | | | | | | resources | | | | | | are to be | | | | | | reserved. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | Request | | requests an | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | on the MRFP | | | | | | that the | | | | | | remote end | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | Released | | information | | | | Bearer | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | released | | | | | | bearer. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | M | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply ECN. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the MRFP to | | | | | | perform IP | | | | | | header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint. | | | | | | It may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if an ECN | | | | | | related | | | | | | error | | | | | | occurs. It | | | | | | may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Diffserv | O | This | | | | Code Point | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply a | | | | | | specific | | | | | | Diffserv | | | | | | Code Point | | | | | | to the IP | | | | | | headers. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for CVO | | element | | | | | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | CVO | | | | | | extended | | | | | | RTP header | | | | | | as defined | | | | | | by | | | | | | IETF RFC 5 | | | | | | 285 [27]. | +-------------+-------------+-------------+-------------+-------------+ | | | Generic | O | This | | | | Image | | information | | | | Attributes | | element | | | | | | indicates | | | | | | image | | | | | | attributes | | | | | | (e.g. image | | | | | | size) as | | | | | | defined by | | | | | | IETF RFC 6 | | | | | | 236 [28]. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | password | | information | | | | request | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE | | | | | | password. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE Ufrag | O | This | | | | request | | information | | | | | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE ufrag. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE host | O | This | | | | candidate | | information | | | | request | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests an | | | | | | ICE host | | | | | | candidate. | +-------------+-------------+-------------+-------------+-------------+ | | | STUN server | O | This | | | | request | | information | | | | | | element is | | | | | | present if | | | | | | MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | answer STUN | | | | | | c | | | | | | onnectivity | | | | | | checks for | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | O | This | | | | Path | | information | | | | request | | element | | | | | | requests | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \" | | | | | | Fromâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify TCP | O | This | | | | connection | | information | | | | es | | element | | | | tablishment | | requests a | | | | Failure | | n | | | | Event | | otification | | | | | | if a TCP | | | | | | connection | | | | | | es | | | | | | tablishment | | | | | | failure | | | | | | occurs. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | certificate | | information | | | | fingerprint | | element is | | | | Request | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Local SCTP | O | This | | | | Port | | information | | | | Request | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local SCTP | | | | | | Port. | +-------------+-------------+-------------+-------------+-------------+ | | | SCTP Stream | O | This | | | | ID | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the the | | | | | | actual SCTP | | | | | | stream | | | | | | identifier | | | | | | to realize | | | | | | the CLUE | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Subprotocol | O | This | | | | ID | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the the | | | | | | protocol | | | | | | \"CLUE\" to | | | | | | exchange | | | | | | via the | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Local max | O | This | | | | message | | information | | | | size | | element is | | | | Request | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | requests | | | | | | the MRFP to | | | | | | provide a | | | | | | local max | | | | | | message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for Sent | | element | | | | ROI | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | ROI | | | | | | extended | | | | | | RTP header | | | | | | for | | | | | | carriage of | | | | | | predefined | | | | | | and/or | | | | | | arbitrary | | | | | | ROI | | | | | | information | | | | | | as defined | | | | | | by | | | | | | IETF RFC | | | | | | 5285 [27] | | | | | | and | | | | | | 3GPP TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | O | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | O | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify CLUE | O | This | | | | Message | | information | | | | Received | | element | | | | Event | | requests a | | | | | | reporting | | | | | | of the | | | | | | received | | | | | | CLUE | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | | | SDPCapNeg | O | This | | | | co | | information | | | | nfiguration | | element | | | | | | provides | | | | | | SDPCapNeg | | | | | | confi | | | | | | guration(s) | | | | | | using as | | | | | | \"a=acap\", | | | | | | \"a=tcap\", | | | | | | \"a=pcfg\" | | | | | | and | | | | | | \"a=acfg\" | | | | | | SDP | | | | | | attributes. | +-------------+-------------+-------------+-------------+-------------+ | Reserve IMS | MRFP | Context | M | This | | Resources | | | | information | | Ack | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the Bearer | | | | | | Termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | the MRFP | | | | | | shall | | | | | | receive | | | | | | user plane | | | | | | data from | | | | | | IMS. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | C | This | | | | password | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | password | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE Ufrag | C | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | Ufrag | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE host | C | This | | | | candidate | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the ICE | | | | | | host | | | | | | candidate | | | | | | assigned by | | | | | | the MRFP. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE lite | C | This | | | | indication | | information | | | | | | element | | | | | | shall be | | | | | | present | | | | | | only if an | | | | | | ICE host | | | | | | candidate | | | | | | request was | | | | | | contained | | | | | | in the | | | | | | request, | | | | | | and the | | | | | | MRFP | | | | | | supports | | | | | | ICE lite, | | | | | | but not | | | | | | full ICE. | | | | | | It | | | | | | indicates | | | | | | that the | | | | | | MRFP only | | | | | | supports | | | | | | ICE lite. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | C | This | | | | Path | | information | | | | | | element may | | | | | | be present | | | | | | only if the | | | | | | MSRP URI | | | | | | Path | | | | | | request was | | | | | | contained | | | | | | in the | | | | | | request. | | | | | | This | | | | | | information | | | | | | element | | | | | | provides | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \" | | | | | | Fromâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | certificate | | information | | | | fingerprint | | element may | | | | | | be present | | | | | | only if the | | | | | | Local | | | | | | certificate | | | | | | fingerprint | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Local SCTP | C | This | | | | Port | | information | | | | | | element may | | | | | | be present | | | | | | only if the | | | | | | Local SCTP | | | | | | Port | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | SCTP Port. | +-------------+-------------+-------------+-------------+-------------+ | | | SCTP Stream | C | This | | | | ID | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SCTP | | | | | | stream | | | | | | identifier | | | | | | that the | | | | | | MRFP used | | | | | | to realize | | | | | | the CLUE | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Subprotocol | C | This | | | | ID | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the the | | | | | | protocol | | | | | | \"CLUE\" to | | | | | | exchange | | | | | | via the | | | | | | data | | | | | | channel. | +-------------+-------------+-------------+-------------+-------------+ | | | Local max | C | This | | | | message | | information | | | | size | | element may | | | | | | be present | | | | | | only if the | | | | | | Local max | | | | | | message | | | | | | size | | | | | | Request was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the local | | | | | | max message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | SDPCapNeg | C | This | | | | co | | information | | | | nfiguration | | element | | | | | | shall be | | | | | | present | | | | | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | provides | | | | | | SDPCapNeg | | | | | | confi | | | | | | guration(s) | | | | | | using as | | | | | | \"a=acap\", | | | | | | \"a=tcap\", | | | | | | \"a=pcfg\" | | | | | | and | | | | | | \"a=acfg\" | | | | | | SDP | | | | | | attributes. | +-------------+-------------+-------------+-------------+-------------+
## 8.22 Configure IMS Resources Procedure
This procedure is used to select multimedia-processing resources for an Mp
interface connection; it is based on the procedure of the same name defined in
3GPP TS 29.163 [9].
Table 8.22.1: Procedures between MRFC and MRFP: Configure IMS Resources
Procedure
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Configure | MRFC | Context | M | This | | IMS | | | | information | | Resources | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | IMS | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | send data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | on the MRFP | | | | | | that the | | | | | | IMS user | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | video any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | may contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | MRFP can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | apply ECN | | | | | | procedures. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the MRFP to | | | | | | perform IP | | | | | | header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint. | | | | | | It may be | | | | | | included if | | | | | | ECN is | | | | | | enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if an ECN | | | | | | related | | | | | | error | | | | | | occurs. It | | | | | | may be | | | | | | included if | | | | | | ECN is | | | | | | enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for CVO | | element | | | | | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | CVO | | | | | | extended | | | | | | RTP header | | | | | | as defined | | | | | | by | | | | | | IETF RFC 52 | | | | | | 85 [27].. | +-------------+-------------+-------------+-------------+-------------+ | | | Generic | O | This | | | | Image | | information | | | | Attributes | | element | | | | | | indicates | | | | | | image | | | | | | attributes | | | | | | (e.g. image | | | | | | size) as | | | | | | defined by | | | | | | IETF RFC 6 | | | | | | 236 [28]. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | C | This | | | | C | | information | | | | onnectivity | | element | | | | Check | | requests | | | | | | the MRFP to | | | | | | perform ICE | | | | | | c | | | | | | onnectivity | | | | | | check as | | | | | | defined by | | | | | | IETF RFC 5 | | | | | | 245 [29]. | | | | | | It is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ICE | C | This | | | | C | | information | | | | onnectivity | | element | | | | Check | | requests a | | | | Result | | n | | | | | | otification | | | | | | of ICE | | | | | | c | | | | | | onnectivity | | | | | | check | | | | | | result. It | | | | | | is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify New | C | This | | | | Peer | | information | | | | Reflexive | | element | | | | Candidate | | requests a | | | | | | n | | | | | | otification | | | | | | of new peer | | | | | | reflexive | | | | | | candidate | | | | | | was | | | | | | discovered | | | | | | during a | | | | | | c | | | | | | onnectivity | | | | | | check. It | | | | | | is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | Additional | C | This | | | | ICE | | information | | | | C | | element | | | | onnectivity | | requests | | | | Check | | the MRFP to | | | | | | perform | | | | | | additional | | | | | | ICE | | | | | | c | | | | | | onnectivity | | | | | | check as | | | | | | defined by | | | | | | IETF RFC 5 | | | | | | 245 [29]. | | | | | | It is only | | | | | | applicable | | | | | | for full | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | candidate | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | candidate | | | | | | for ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | password | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | password | | | | | | for ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | ICE | O | This | | | | received | | information | | | | Ufrag | | element is | | | | | | present if | | | | | | MRFC | | | | | | indicates a | | | | | | received | | | | | | Ufrag for | | | | | | ICE. | +-------------+-------------+-------------+-------------+-------------+ | | | MSRP URI | O | This | | | | Path | | information | | | | | | element | | | | | | provides | | | | | | the MSRP | | | | | | URI path | | | | | | information | | | | | | that the | | | | | | MRFP will | | | | | | insert in | | | | | | the MSRP | | | | | | message | | | | | | \"Toâ€‘Path\" | | | | | | header | | | | | | field. | +-------------+-------------+-------------+-------------+-------------+ | | | Establish | O | This | | | | TCP | | information | | | | connection | | element | | | | | | requests | | | | | | the MRFP to | | | | | | take a TCP | | | | | | client role | | | | | | and to | | | | | | initiate a | | | | | | TCP | | | | | | connection | | | | | | est | | | | | | ablishment. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify TCP | O | This | | | | connection | | information | | | | es | | element | | | | tablishment | | requests a | | | | Failure | | n | | | | Event | | otification | | | | | | if a TCP | | | | | | connection | | | | | | es | | | | | | tablishment | | | | | | failure | | | | | | occurs. | +-------------+-------------+-------------+-------------+-------------+ | | | Establish | O | This | | | | (D)TLS | | information | | | | session | | element | | | | | | requests | | | | | | the MRFP to | | | | | | take a | | | | | | (D)TLS | | | | | | client role | | | | | | and to | | | | | | initiate a | | | | | | (D)TLS | | | | | | session | | | | | | est | | | | | | ablishment. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | (D)TLS | | information | | | | session | | element | | | | es | | requests a | | | | tablishment | | n | | | | Failure | | otification | | | | Event | | if a (D)TLS | | | | | | session | | | | | | es | | | | | | tablishment | | | | | | failure | | | | | | occurs. | +-------------+-------------+-------------+-------------+-------------+ | | | Pre-Shared | O | This | | | | Key | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | protected | | | | | | using TLS | | | | | | tunnel | | | | | | established | | | | | | with | | | | | | M | | | | | | IKEY-TICKET | | | | | | procedures. | | | | | | It | | | | | | indicates | | | | | | the | | | | | | Traffic | | | | | | -Encrypting | | | | | | key | | | | | | associated | | | | | | with the | | | | | | Crypto | | | | | | Session | | | | | | that shall | | | | | | be used in | | | | | | TLS | | | | | | handshake. | +-------------+-------------+-------------+-------------+-------------+ | | | Allowed | O | This | | | | RTCP APP | | information | | | | message | | element is | | | | types | | present if | | | | | | the MRFC | | | | | | allows the | | | | | | MRFP to | | | | | | send RTCP | | | | | | APP packets | | | | | | of the | | | | | | indicated | | | | | | types. The | | | | | | MRFP shall | | | | | | not send | | | | | | other RTCP | | | | | | APP | | | | | | packets. If | | | | | | the | | | | | | parameter | | | | | | is not | | | | | | supplied, | | | | | | the MRFP | | | | | | shall not | | | | | | send any | | | | | | RTCP APP | | | | | | packets. | +-------------+-------------+-------------+-------------+-------------+ | | | Extended | O | This | | | | RTP Header | | information | | | | for Sent | | element | | | | ROI | | requests | | | | | | the MRFP to | | | | | | pass on the | | | | | | ROI | | | | | | extended | | | | | | RTP header | | | | | | for | | | | | | carriage of | | | | | | predefined | | | | | | and/or | | | | | | arbitrary | | | | | | ROI | | | | | | information | | | | | | as defined | | | | | | by | | | | | | IETF RFC | | | | | | 5285 [27] | | | | | | and | | | | | | 3GPP TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Predefined | O | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \ | | | | | | "Predefined | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \" | | | | | | 3gpp-roi-pr | | | | | | edefined\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | O | This | | | | ROI Sent | | information | | | | | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | ROI-sending | | | | | | client, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Arbitrary | O | This | | | | ROI | | information | | | | Received | | element | | | | | | requests | | | | | | the MRFP to | | | | | | support the | | | | | | RTCP | | | | | | feedback | | | | | | message | | | | | | capability | | | | | | for | | | | | | \"Arbitrary | | | | | | ROI\" type | | | | | | toward the | | | | | | RO | | | | | | I-receiving | | | | | | clients, | | | | | | expressed | | | | | | by the | | | | | | parameter | | | | | | \ | | | | | | "3gpp-roi-a | | | | | | rbitrary\", | | | | | | as | | | | | | described | | | | | | in 3GPP | | | | | | TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | certificate | | information | | | | fingerprint | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | certificate | | | | | | f | | | | | | ingerprint. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote sctp | O | This | | | | port | | information | | | | | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | SCTP port. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote max | O | This | | | | message | | information | | | | size | | element is | | | | | | present if | | | | | | the MRFC | | | | | | requests | | | | | | the MRFP to | | | | | | establish | | | | | | the CLUE | | | | | | data | | | | | | channel. It | | | | | | indicates | | | | | | the remote | | | | | | max message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | SDPCapNeg | O | This | | | | co | | information | | | | nfiguration | | element | | | | | | provides | | | | | | SDPCapNeg | | | | | | confi | | | | | | guration(s) | | | | | | using as | | | | | | \"a=acap\", | | | | | | \"a=tcap\", | | | | | | \"a=pcfg\" | | | | | | and | | | | | | \"a=acfg\" | | | | | | SDP | | | | | | attributes. | +-------------+-------------+-------------+-------------+-------------+ | | | Additional | O | This | | | | Bandwidth | | information | | | | Properties | | element | | | | | | indicates | | | | | | additional | | | | | | bandwidth | | | | | | properties | | | | | | using | | | | | | \" | | | | | | a=bw-info\" | | | | | | SDP | | | | | | a | | | | | | ttribute(s) | | | | | | as defined | | | | | | by | | | | | | 3GPP TS 26. | | | | | | 114 [23]. | +-------------+-------------+-------------+-------------+-------------+ | Configure | MRFP | Context | M | This | | IMS | | | | information | | Resources | | | | element | | Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | IMS | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the Bearer | | | | | | Termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IMS | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | be prepared | | | | | | to receive | | | | | | user data | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IMS | M | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | (i.e. | | | | | | codecs) for | | | | | | which the | | | | | | MRFP shall | | | | | | send data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | on the MRFP | | | | | | that the | | | | | | IMS user | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | MRFP can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+
## 8.23 Release IMS Termination
This procedure is used to release a termination towards the IMS and free all
related resources; it is based on the procedure of the same name defined in
3GPP TS 29.163 [9].
Table 8.23.1: Procedures between MRFC and MRFP: Release IMS Termination
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** **Release IMS Termination**
MRFC Context M This information element indicates the existing context for the
bearer termination. Bearer Termination M This information element indicates
the bearer termination to be released. **Release IMS Termination** Ack MRFP
Context M This information element indicates the context where the command was
executed. Bearer Termination M This information element indicates the Bearer
Termination where the command was executed.
* * *
## 8.24 Start TTS
This procedure is used to request to start TTS.
Table 8.24.1: Procedures between MRFC and MRFP: Start TTS
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Start TTS MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination/Bearer Termination Request M This information element indicates
the existing bearer termination or requests a new bearer termination where the
TTS is sent. Direction O This information element indicates the direction of
the TTS to be sent. Notify TTS Completed O This information element requests a
notification of a completed TTS. DTMF stop TTS O This information element
indicates the MRFP to detect the DTMF digits and stop the TTS when a pre-
defined DTMF digit is detected. SSML M This information element indicates the
text to be spoken as SSML script. Iterations O This information element
indicates the number of times the TTS shall be played. Notify termination
heartbeat C This information element requests termination heartbeat
indications. This information element shall be included when requesting a new
bearer termination. Start TTS Ack MRFP Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the bearer termination where the command
was executed.
* * *
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.25 Stop TTS
This procedure is used to stop TTS.
Table 8.25.1: Procedures between MRFC and MRFP: Stop TTS
* * *
**Procedure** Initiated **Information element name** **Information element
required** **Information element description** Stop TTS MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination where
the TTS is stopped. Stop TTS M This information element requests that TTS is
stopped. Stop TTS Ack MRFP Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the bearer termination where the command was executed.
* * *
## 8.26 TTS Completed
This procedure is used to report the TTS result.
Table 8.26.1: Procedures between MRFC and MRFP: TTS Completed
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** TTS Completed MRFP Context M
This information element indicates the context for the bearer termination.
Bearer Termination M This information element indicates the bearer termination
where the TTS is requested. TTS Completed M This information element indicates
completed of the TTS. Cause M This information element indicates the return
code of TTS. TTS Completed Ack MRFC Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the Bearer Termination where the command
was executed.
* * *
## 8.27 Start ASR
This procedure is used to request to start ASR.
Table 8.27.1: Procedures between MRFC and MRFP: Start ASR
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Start ASR MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination/Bearer Termination Request M This information element indicates
the existing bearer termination or requests a new bearer termination where the
ASR is requested. Recognition Mode O This information element indicates the
recognition mode: Normal Recognition Mode, Hotword Recognition Mode. Notify
ASR completion O This information element requests a notification of a
completed ASR. DTMF stop ASR O This information element indicates the MRFP to
detect the DTMF digits and stop the ASR when a pre-defined DTMF digit is
detected. SRGS Grammar M This information element indicates the SRGS format
grammar as script or URI. Notify termination heartbeat C This information
element requests termination heartbeat indications. This information element
shall be included when requesting a new bearer termination. Start ASR Ack MRFP
Context M This information element indicates the context where the command was
executed. Bearer Termination M This information element indicates the bearer
termination where the command was executed.
* * *
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.28 Stop ASR
This procedure is used to stop ASR.
Table 8.28.1: Procedures between MRFC and MRFP: Stop ASR
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Stop ASR MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination where
the ASR is stopped. Stop ASR M This information element requests that ASR is
stopped. Stop ASR Ack MRFP Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the bearer termination where the command was executed.
* * *
## 8.29 ASR completed
This procedure is used to report the ASR result.
Table 8.29.1: Procedures between MRFC and MRFP: ASR completed
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription**| +-------------+-------------+-------------+-------------+-------------+ | ASR | MRFP | Context | M | This | | completed | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | ASR is | | | | | | requested. | +-------------+-------------+-------------+-------------+-------------+ | | | ASR | M | This | | | | Completed | | information | | | | | | element | | | | | | indicates | | | | | | completed | | | | | | of the ASR. | +-------------+-------------+-------------+-------------+-------------+ | | | Cause | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the return | | | | | | code of | | | | | | ASR. | +-------------+-------------+-------------+-------------+-------------+ | | | Recognition | O | This | | | | | | information | | | | Result | | element | | | | | | reports the | | | | | | ASR result. | +-------------+-------------+-------------+-------------+-------------+ | | | Text Token | O | This | | | | | | information | | | | | | element | | | | | | indicates a | | | | | | text token | | | | | | * | | | | | | *correspond | | | | | | to tokens | | | | | | as defined | | | | | | by the SRGS | | | | | | grammar. | | | | | | The ASR may | | | | | | return | | | | | | multiple | | | | | | results.** | +-------------+-------------+-------------+-------------+-------------+ | | | **Result | O | This | | | | Inter | | information | | | | pretation** | | element | | | | | | indicates | | | | | | **int | | | | | | erpretation | | | | | | of | | | | | | application | | | | | | specific** | | | | | | for each | | | | | | result. | +-------------+-------------+-------------+-------------+-------------+ | | | * | O | This | | | | _Confidence | | information | | | | Score_ * | | indicates | | | | | | the quality | | | | | | of the | | | | | | input for | | | | | | each | | | | | | result. The | | | | | | confidence | | | | | | score is a | | | | | | number in | | | | | | the range | | | | | | from 0.0 to | | | | | | 1.0 | | | | | | inclusive. | +-------------+-------------+-------------+-------------+-------------+ | | | Input Time | O | This | | | | | | information | | | | | | indicates | | | | | | the time of | | | | | | the speech | | | | | | input for | | | | | | each | | | | | | result. | +-------------+-------------+-------------+-------------+-------------+ | ASR | MRFC | Context | M | This | | completed | | | | information | | Ack | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the Bearer | | | | | | Termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.30 MRFP Out-of-Service or Maintenance Locked
This procedure is used to indicate that the MRFP will go out of service or is
maintenance locked.
Table 8.30.1: Procedures between MRFC and MRFP: MRFP Out-of-Service
* * *
Procedure Initiated Information element name Information element required
Information element description MRFP Out-of-Service MRFP Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for service change.
Method M This information element indicates the method for service change.
MRFP Out-of-Service Ack MRFC Context M This information element indicates the
context where the command was executed. Root Termination M This information
element indicates the root termination where the command was executed.
* * *
## 8.31 MRFP Communication Up
This procedure is used to indicate that the MRFP is back in service.
Table 8.31.1: Procedures between MRFC and MRFP: MRFP Communication Up
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | MRFP | MRFP | Context | M | This | | Co | | | | information | | mmunication | | | | element | | | | | | indicates | | Up | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | Method | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the method | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | MRFP | MRFC | Context | M | This | | Co | | | | information | | mmunication | | | | element | | | | | | indicates | | Up Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.32 MRFP Restoration
This procedure is used to indicate the MRFP failure or recovery.
Table 8.32.1: Procedures between MRFC and MRFP: MRFP Restoration
* * *
Procedure Initiated Information element name Information element required
Information element description MRFP Restoration MRFP Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
MRFP Restoration Ack MRFC Context M This information element indicates the
context where the command was executed. Root Termination M This information
element indicates the root termination where the command was executed.
* * *
## 8.33 MRFC Restoration
This procedure is used to indicate the MRFC failure or recovery.
Table 8.33.1: Procedures between MRFC and MRFP: MRFC Restoration
* * *
Procedure Initiated Information element name Information element required
Information element description MRFC Restoration MRFC Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
MRFC Restoration Ack MRFP Context M This information element indicates the
context where the command was executed. Root Termination M This information
element indicates the root termination where the command was executed.
* * *
## 8.34 MRFP Re-register
This procedure is used to re-register the MRFP.
Table 8.34.1: Procedures between MRFC and MRFP: MRFP Re-register
* * *
Procedure Initiated Information element name Information element required
Information element description MRFP Re-register MRFP Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
Protocol Version M This information element indicates the protocol version for
Mp interface requested by the MRFP. Service Change Profile M This information
element indicates the profile for the Mp interface requested by the MRFP. MRFP
Re-register Ack MRFC Context M This information element indicates the context
where the command was executed. Root Termination M This information element
indicates the root termination where the command was executed. Protocol
Version O This information element indicates the protocol version for Mp
interface supported by the MRFC. Service Change Profile O This information
element indicates the profile for the Mp interface supported by the MRFC.
* * *
## 8.35 MRFC Re-registration Ordered by MRFC
This procedure is used by the MRFC to request the MRFP to register itself.
Table 8.35.1: Procedures between MRFC and MRFP: MRFC Ordered Re-register
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | MRFC | MRFC | Context | M | This | | Ordered Re- | | | | information | | | | | | element | | register | | | | indicates | | | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for the | | | | | | service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | MRFC | O | This | | | | Address | | information | | | | | | element | | | | | | indicates | | | | | | the MRFC | | | | | | signalling | | | | | | address. | +-------------+-----------+-------------+-------------+-------------+ | MRFC | MRFP | Context | M | This | | Ordered Re- | | | | information | | | | | | element | | register | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.36 Audit Value
This procedure is used to audit values of different object(s).
Table 8.36.1: Procedures between MRFC and MRFP: Audit Value
* * *
Procedure Initiated Information element name Information element required
Information element description Audit Value MRFC Context M This information
element indicates the context for the command. Bearer Termination M This
information element indicates the bearer termination(s) for the command.
Object(s) M This information element indicates the object(s) to be audited.
Audit Value Ack MRFP Context M This information element indicates the context
where the command was executed. Bearer Termination M This information element
indicates the bearer termination where the command was executed. Value(s) M
This information element indicates the value(s) of the object(s).
* * *
## 8.37 Audit Capability
This procedure is used to audit capabilities of different object(s).
Table 8.37.1: Procedures between MRFC and MRFP: Audit Capability
* * *
Procedure Initiated Information element name Information element required
Information element description Audit Capability MRFC Context M This
information element indicates the context for the command. Bearer Termination
M This information element indicates the bearer termination(s) for the
command. Object(s) M This information element indicates the object(s) which
capability is requested. Audit Capability Ack MRFP Context M This information
element indicates the context where the command was executed. Bearer
Termination M This information element indicates the bearer termination where
the command was executed. Capabilities(s) M This information element indicates
the capabilities of the object(s).
* * *
## 8.38 Capability Update
This procedure is used to indicate update of an object capability.
Table 8.38.1: Procedures between MRFC and MRFP: Capability Update
* * *
Procedure Initiated Information element name Information element required
Information element description Capability Update MRFP Context M This
information element indicates the context for the command. Bearer Termination
M This information element indicates the bearer termination(s) for the
command. Reason M This information element indicates the reason for service
change. Method M This information element indicates the method for service
change. Capability Update Ack MRFC Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the bearer termination where the command
was executed.
* * *
## 8.39 MRFC Out of Service
This procedure is used to indicate that MRFC has gone out of service.
Table 8.39.1: Procedures between MRFC and MRFP: MRFC Out of Service
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | MRFC Out of | MRFC | Context | M | This | | Service | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for the | | | | | | service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | Method | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the method | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | MRFC Out of | MRFP | Context | M | This | | Service | | | | information | | | | | | element | | Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.40 MRFP Resource Congestion Handling - Activate
This procedure is used to activate the congestion handling mechanism.
Table 8.40.1: Procedures between MRFC and MRFP: MRFP Resource Congestion
Handling - Activate
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | MRFP | MRFC | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling -- | | | | indicates | | | | | | that all | | Activate | | | | context are | | | | | | applicable | | | | | | for the | | | | | | root | | | | | | t | | | | | | ermination. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the | | | | | | congestion | | | | | | mechanism | | | | | | is | | | | | | activated. | +-------------+-----------+-------------+-------------+-------------+ | | | Congestion | M | This | | | | Activate | | information | | | | | | element | | | | | | requests to | | | | | | activate | | | | | | the | | | | | | congestion | | | | | | mechanism. | +-------------+-----------+-------------+-------------+-------------+ | MRFP | MRFP | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | that all | | Activate | | | | context are | | Ack | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the command | | | | | | was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.41 MRFP Resource Congestion Handling - Indication
This procedure is used to inform the MRFC that traffic restriction is advised.
Table 8.41.1: Procedures between MRFC and MRFP: MRFP Resource Congestion
Handling - Indication
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | Information | ** | ** | | Procedure**| Initiated** | element | Information | Information | | | | name | element | element | | | | | required**| de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | MRFP | MRFP | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | all context | | Indication | | | | are | | | | | | applicable | | | | | | for the | | | | | | root | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the | | | | | | congestion | | | | | | mechanism | | | | | | was | | | | | | activated. | +-------------+-------------+-------------+-------------+-------------+ | | | Reduction | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the load | | | | | | percentage | | | | | | to be | | | | | | reduced. | +-------------+-------------+-------------+-------------+-------------+ | MRFP | MRFC | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | all context | | Indication | | | | are where | | Ack | | | | the command | | | | | | was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the command | | | | | | was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.42 Command Reject
This command is used to reject the received command request. It may be used as
response to any of the procedures.
Table 8.42.1: Procedures between (G)MSC server and MGW: Command Reject
* * *
Procedure Initiated Information element name Information element required
Information element description Command Reject Both Context M This information
element indicates the context where the command was rejected. Bearer
Termination M This information element indicates the bearer termination where
the command was rejected. Error M This information element indicates the error
that caused command rejection.
* * *
### 8.43 Termination heartbeat indication
This procedure is used to report indication of hanging termination.
Table 8.43.1: Procedures between MRFC and MRFP: Hanging termination indication
* * *
Procedure Initiated Information element name Information element required
Information element description Termination heartbeat indication MRFP Context
M This information element indicates the context for the bearer termination.
Bearer Termination M This information element indicates the bearer termination
for which the termination heartbeat is reported. Termination heartbeat M
Hanging Termination event, as defined in 3GPP TS 29.333 [16]. Termination
heartbeat indication Ack MRFC Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the Bearer Termination where the command was executed.
* * *
## 8.44 Configure BFCP Termination
This procedure is used to configure a termination to support BFCP protocol
Table 8.44.1: Procedures between MRFC and MRFP: Configure BFCP Termination
* * *
Procedure Initiated Information element name Information element required
Information element description Configure BFCP Termination MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the existing bearer
termination or requests a new bearer termination. Local BFCP Connection
Address Request M This information element requests an IP address and port
number(s) on the MRFP to serve BFCP/TCP protocol Remote BFCP Connection
Address M This information element indicates the remote IP address and port
number(s) that the MRFP can send BFCP/TCP to. User Identifier M This
information element indicates the user Identifier to identify the BFCP client
when receiving BFCP requests. Available Floors M This information Element
defines the list of Floor Ids that may be requested (via BFCP) to be used by
the client represented by this termination. Establish TCP connection O This
information element requests the MRFP to take a TCP client role and to
initiate a TCP connection establishment. Notify TCP connection establishment
Failure Event O This information element requests a notification if a TCP
connection establishment failure occurs. Notify TLS session establishment
Failure Event O This information element requests a notification if a TLS
session establishment failure occurs. Pre-Shared Key This information element
is present if the MRFC wants that the media is protected using TLS tunnel
established with MIKEY-TICKET procedures. It indicates the Traffic-Encrypting
key associated with the Crypto Session that shall be used in TLS handshake.
Configure BFCP Termination Ack MRFP Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the Bearer Termination where the command
was executed. NOTE: The above procedure may be combined with other procedures
in ADD or MOD commands.
* * *
## 8.45 Configure Conference For Floor Control
This procedure is used to configure or modify a conference for floor control
and indicate the Floor policy for a conference.
Table 8.45.1: Procedures between MRFC and MRFP: Configure Conference For Floor
Control
* * *
Procedure Initiated Information element name Information element required
Information element description Indicate Floor Policy MRFC Context M This
information element indicates the context for the bearer termination.
Conference Identifier M This information element indicates the Identifier for
the conference for BFCP purposes. Floor-Resource Associations M This
information element indicates the resource associated with specific Floor Ids
for the MRFP to identify the Floor(s) when receiving BFCP requests. Floor
Control Algorithm M This information element indicates for a specific floor,
the algorithm to be used in granting the Floor. Maximum Floor Holder Number M
This information element indicates for a specific floor, the maximum number of
users who can hold the same Floor at the same time. Indicate Floor Policy Ack
MRFP Context M This information element indicates the context where the
command was executed. NOTE: The above procedure applies to a context instead
of a termination. The H.248v3 shall be supported. The procedure may be
combined with other procedures in ADD or MOD commands.
* * *
## 8.46 Designate Floor Chair
This procedure is used to designate a Floor Chair to a conference.
Table 8.46.1: Procedures between MRFC and MRFP: Designate Floor Chair
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Designate Floor Chair MRFC
Context M This information element indicates the context for the bearer
termination. Bearer Termination/Bearer Termination Request M This information
element indicates the existing bearer termination. Floor Chair M This
information element indicates that the termination represents a Floor Chair in
accordance with BFCP [20]. Floor Controlled By Chair O This information
element indicates the Floor(s) the Floor Chair controls. Designate Floor Chair
Ack MRFP Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the bearer termination where the command was executed.
* * *
## 8.47 Floor Request Decision
This procedure is used to request the MRFP to report the Floor request
decision.
Table 8.47.1: Procedures between MRFC and MRFP: Floor Request Decision
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Floor Request Decision MRFC
Context M This information element indicates the context for the bearer
termination. Bearer Termination/Bearer Termination Request M This information
element indicates the existing bearer termination. Notify Floor Request
Decision M This information element requests MRFP to notify the decision of
the FCS to Floor requests. Floor Request Decision Ack MRFP Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed.
* * *
## 8.48 Report Floor Request Decision
This procedure is used to report the Floor request status .
Table 8.48.1: Procedures between MRFP and MRFC: Report Floor Request Decision
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Report Floor Request Decision
MRFP Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination to which the Floor request is associated. Floor Request
Status M This information element reports the Floor Id or Floor Ids to which
the Floor Request is associated and the Floor request status of specific Floor
or Floors.. Report Floor Request Decision Ack MRFC Context M This information
element indicates the context where the command was executed. Bearer
Termination M This information element indicates the Bearer Termination where
the command was executed.
* * *
## 8.49 Confirm Media Update
This procedure is used to indicate whether the media properties associated
with a Floor Request have been modified successfully or not..
Table 8.49.1: Procedures between MRFC and MRFP: Confirm Media Update
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Confirm Media Update MRFC
Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
existing bearer termination to which the floor request is associated. Floor
Request Status M This information element indicates the Floor Id or Ids and
requested status to which the Confirm Media Result applies.. Result M This
information element indicates whether the media properties associated with a
Floor Request have been modified successfully or not. Confirm Media Update Ack
MRFP Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the bearer termination where the command was executed.
* * *
## 8.50 Configure Granted Quota
This procedure is used to configure the granted quota.
Table 8.50.1: Procedures between MRFC and MRFP: Configure Granted Quota
* * *
Procedure Initiated Information element name Information element required
Information element description Configure Granted Quota MRFC Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination to
configure the granted quotas. Quota for number of messages sent O This
information element indicates the quota for the number of messages sent. Quota
for number of messages received O This information element indicates the quota
for the number of messages received. Quota for volume of messages sent O This
information element indicates the quota for the volume of messages sent. Quota
for volume of messages received O This information element indicates the quota
for the volume of messages received. Valid Time O This information element
indicates the valid time for collecting message statistics, upon expiry the
MRFP shall report the current message statistics. Configure Granted Quota Ack
MRFP Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the Bearer Termination where the command was executed.
* * *
## 8.51 Report Message Statistics
This procedure is used to report statistics for the sent and received
messages.
Table 8.51.1: Procedures between MRFP and MRFC: Report Message Statistics
* * *
Procedure Initiated Information element name Information element required
Information element description Report Message Statistics MRFP Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination to
report statistics. Number of messages sent O This information element
indicates the number of messages sent. Number of messages received O This
information element indicates the number of messages received. Volume of
messages sent O This information element indicates the volume of messages
sent. Volume of messages received O This information element indicates the
volume of messages received. Reason For Report M Indicates reason for the
report (e.g. expiry of time, granted quotas reached) Report Message Statistics
Ack MRFC Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the Bearer Termination where the command was executed.
* * *
## 8.52 Configure Filtering Rules
This procedure is used to configure the filtering rules.
Table 8.52.1: Procedures between MRFC and MRFP: Configure Filtering Rules
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Configure | MRFC | Context | M | This | | Filtering | | | | information | | Rules | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | to config | | | | | | the | | | | | | filtering | | | | | | rules. | +-------------+-------------+-------------+-------------+-------------+ | | | Sender | O | This | | | | address | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | filtering | | | | | | criteria of | | | | | | sender | | | | | | address. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | O | This | | | | size | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | filtering | | | | | | criteria of | | | | | | message | | | | | | size. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | O | This | | | | content | | information | | | | type | | element | | | | | | indicates | | | | | | the | | | | | | filtering | | | | | | criteria of | | | | | | message | | | | | | content | | | | | | type. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | O | This | | | | content | | information | | | | format | | element | | | | | | indicates | | | | | | the | | | | | | filtering | | | | | | criteria of | | | | | | message | | | | | | content | | | | | | format. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | O | This | | | | subject | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | filtering | | | | | | criteria of | | | | | | message | | | | | | subject. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | O | This | | | | treatment | | information | | | | | | element | | | | | | indicates | | | | | | to the MRFP | | | | | | the message | | | | | | treatment | | | | | | when the | | | | | | filtering | | | | | | criteria is | | | | | | reached. | | | | | | The message | | | | | | treatment | | | | | | can be: | | | | | | | | | | | | Block the | | | | | | delivery of | | | | | | the message | | | | | | content. | | | | | | | | | | | | Store the | | | | | | message | | | | | | content | | | | | | | | | | | | Redirect | | | | | | the message | | | | | | to another | | | | | | address. | +-------------+-------------+-------------+-------------+-------------+ | | | Store URL | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the store | | | | | | URL. | +-------------+-------------+-------------+-------------+-------------+ | | | Redirect | O | This | | | | URL | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | redirect | | | | | | URL. | +-------------+-------------+-------------+-------------+-------------+ | Configure | MRFP | Context | M | This | | Filtering | | | | information | | Rules Ack | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the Bearer | | | | | | Termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Store URL | O | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the store | | | | | | URL. | +-------------+-------------+-------------+-------------+-------------+
## 8.53 Start message record
This procedure is used to start the message record.
Table 8.53.1: Procedures between MRFC and MRFP: Start message record
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Start | MRFC | Context | M | This | | | | | | information | | message | | | | element | | | | | | indicates | | Record | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termina | | information | | | | tion/Bearer | | element | | | | Termination | | indicates | | | | Request | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | where the | | | | | | message is | | | | | | recorded. | +-------------+-------------+-------------+-------------+-------------+ | | | Message | M | This | | | | file | | information | | | | identifier | | element | | | | | | indicates | | | | | | the message | | | | | | record file | | | | | | iden | | | | | | tification. | | | | | | The MRFC | | | | | | may also | | | | | | request the | | | | | | MRFP to | | | | | | create file | | | | | | identifier. | +-------------+-------------+-------------+-------------+-------------+ | | | Maximum | O | This | | | | Record | | information | | | | Timer | | element | | | | | | indicates | | | | | | the maximum | | | | | | allowable | | | | | | length of | | | | | | time of the | | | | | | recording | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | message | | information | | | | record | | element | | | | Completed | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | completed | | | | | | message | | | | | | record. | +-------------+-------------+-------------+-------------+-------------+ | Start | MRFP | Context | M | This | | | | | | information | | message | | | | element | | | | | | indicates | | record Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | | | information | | | | Termination | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | File | O | This | | | | identifier | | information | | | | | | element | | | | | | indicates | | | | | | the file | | | | | | ide | | | | | | ntification | | | | | | created by | | | | | | the MRFP if | | | | | | the MRFC | | | | | | request to | | | | | | create a | | | | | | file | | | | | | identifier. | +-------------+-------------+-------------+-------------+-------------+
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.54 Stop message record
This procedure is used to stop the message record.
Table 8.54.1: Procedures between MRFC and MRFP: Stop message record
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFC | Context | M | This | | | | | | information | | Message | | | | element | | | | | | indicates | | Record | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Stop | M | This | | | | message | | information | | | | record | | element | | | | | | requests | | | | | | that | | | | | | message | | | | | | record is | | | | | | stopped. | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFP | Context | M | This | | | | | | information | | Message | | | | element | | | | | | indicates | | record Ack | | | | the context | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.55 Message record completed
This procedure is used to report the message record completed.
Table 8.55.1: Procedures between MRFC and MRFP: Report message record
completed
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Report message record completed
MRFP Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
existing bearer termination. Message record Completed M This information
element indicates the message record completed. Cause M This information
element indicates the return code of message record. Report message record
completed ACK MRFC Context M This information element indicates the context
where the command is executed. Bearer Termination M This information element
indicates the bearer termination where the command is executed.
* * *
## 8.56 Start playing message
This procedure is used to start playing message.
Table 8.56.1: Procedures between MRFC and MRFP: start playing message
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** Start playing message MRFC
Context M This information element indicates the context for the bearer
termination. Bearer Termination/Bearer Termination Request M This information
element indicates the existing bearer termination or requests a new bearer
termination where the message is sent. Message identifier M This information
element indicates the message or list of message to be played. This may be a
single identifier or one identifier per media type. Direction O This
information element indicates the direction of the message to be sent. Notify
message completed O This information element requests a notification when the
playing message is completed. Notify termination heartbeat C This information
element requests termination heartbeat indications. This information element
shall be included when requesting a new bearer termination. Start playing
message Ack MRFP Context M This information element indicates the context
where the command was executed. Bearer Termination M This information element
indicates the bearer termination where the command was executed.
* * *
NOTE This procedure may be combined with other procedures such as to ADD
bearer connections.
## 8.57 Stop playing message
This procedure is used to stop playing message.
Table 8.57.1: Procedures between MRFC and MRFP: Stop playing message
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFC | Context | M | This | | playing | | | | information | | message | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Stop | M | This | | | | playing | | information | | | | message | | element | | | | | | requests | | | | | | that | | | | | | message | | | | | | playing is | | | | | | stopped. | +-------------+-------------+-------------+-------------+-------------+ | Stop | MRFP | Context | M | This | | playing | | | | information | | message | | | | element | | | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.58 Playing message completed
This procedure is used to report the playing message completed.
Table 8.58.1: Procedures between MRFC and MRFP: Report playing message
completed
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Report | MRFP | Context | M | This | | playing | | | | information | | message | | | | element | | completed | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Playing | M | This | | | | Completed | | information | | | | | | element | | | | | | indicates | | | | | | completed | | | | | | of the | | | | | | message | | | | | | play. | +-------------+-------------+-------------+-------------+-------------+ | | | Cause | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the return | | | | | | code of | | | | | | playing | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | Report | MRFC | Context | M | This | | playing | | | | information | | message | | | | element | | completed | | | | indicates | | | | | | the context | | ACK | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.59 Modify Media
This procedure is used to modify the media and stream properties for a given
Floor Request (as indicated by the Report Floor Request Decision, Clause
8.48).
Table 8.59.1: Procedures between MRFC and MRFP: Modify Media
* * *
Procedure Initiated Information element name Information element required
Information element description Modify Media MRFC Context M This information
element indicates the existing context for the bearer termination or requests
a new context for the bearer termination. Bearer Termination M This
information element indicates the existing bearer termination to which the
floor request is associated. Stream M This information element indicates the
existing stream to which the floor request is associated Stream Mode M Stream
mode properties associated to the floor request. Media Properties M Media
properties associated to the floor request Modify Media Ack MRFP Context M
This information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed.
* * *
## 8.60 ECN Failure Indication
This procedure is used to indicate an ECN related Error.
Table 8.60.1: Procedures between MRFC and MRFP: ECN Failure indication
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | ECN Failure | > MRFP | Context | M | This | | Indication | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Failure | M | This | | | | Indication | | information | | | | | | element | | | | | | indicates | | | | | | an ECN | | | | | | failure | | | | | | event. | +-------------+-------------+-------------+-------------+-------------+ | ECN Failure | > MRFC | Context | M | This | | Indication | | | | information | | ACK | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command is | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.61 ICE Connectivity Check Result Notification
This procedure is used to report ICE connectivity check result for Full ICE
(see clause 6.2.18.3).
Table 8.61.1: Procedures between MRFC and MRFP: ICE Connectivity Check Result
Notification
* * *
Procedure Initiated Information element name Information element required
Information element description ICE Connectivity Check Result Notification
MRFP Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination for which the ICE Connectivity Check Result is reported.
ICE Connectivity Check Result M This information element indicates an ICE
Connectivity Check Result event. ICE Connectivity Check Result Notification
Ack MRFC Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the bearer termination where the command was executed.
* * *
## 8.62 ICE New Peer Reflexive Candidate Notification
This procedure is used to report ICE new peer reflexive candidate for Full ICE
(see clause 6.2.18.4).
Table 8.62.1: Procedures between MRFC and MRFP: ICE New Peer Reflexive
Candidate Notification
* * *
Procedure Initiated Information element name Information element required
Information element description ICE New Peer Reflexive Candidate Notification
MRFP Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination for which the ICE New Peer Reflexive Candidate is reported.
ICE New Peer Reflexive Candidate M This information element indicates an ICE
New Peer Reflexive Candidate event. ICE New Peer Reflexive Candidate
Notification Ack MRFC Context M This information element indicates the context
where the command was executed. Bearer Termination M This information element
indicates the bearer termination where the command was executed.
* * *
## 8.63 Notify TCP connection establishment Failure Indication
This procedure is used to report TCP connection establishment failures.
Table 8.63.1: Procedures between MRFC and MRFP: TCP connection establishment
Failure Indication
* * *
Procedure Initiated Information element name Information element required
Information element description TCP connection establishment Failure
Indication MRFP Context M This information element indicates the context for
the bearer termination. Bearer Termination M This information element
indicates the bearer termination for which a TCP connection establishment
failure is reported. TCP connection establishment Error Indication M This
information element indicates a TCP connection establishment failure event.
TCP connection establishment Failure Indication Ack MRFC Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed.
* * *
## 8.64 Notify TLS session establishment Failure Indication
This procedure is used to report TLS session establishment failures.
Table 8.64.1: Procedures between MRFC and MRFP: TLS session establishment
Failure Indication
* * *
Procedure Initiated Information element name Information element required
Information element description TLS session establishment Failure Indication
MRFP Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination for which a TLS session establishment failure is reported.
TLS session establishment Error Indication M This information element
indicates a TLS session establishment failure event. TLS session establishment
Failure Indication Ack MRFC Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the bearer termination where the command was executed.
* * *
## 8.65 CLUE Message Send
This procedure is used in a telepresence session by the MRFC to request the
MRFP to send a CLUE message (see clause 6.2.21.2).
Table 8.65.1: Procedures between MRFC and MRFP: CLUE Message Send
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** CLUE Message Send MRFC Context
M This information element indicates the context for the bearer termination.
Bearer Termination M This information element indicates the bearer termination
for which the CLUE information is reported. CLUE Message Content M This
information element indicates the CLUE message content to send. CLUE Message
Send Ack MRFP Context M This information element indicates the context where
the command was executed. Bearer Termination M This information element
indicates the bearer termination where the command is executed.
* * *
## 8.66 CLUE Message Received Notification
This procedure is used in a telepresence session by the MRFP to report the
received CLUE message to the MRFC (see clause 6.2.21.2).
Table 8.66.1: Procedures between MRFC and MRFP: CLUE Message Received
Notification
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** CLUE Message Received
Notification MRFP Context M This information element indicates the context for
the bearer termination. Bearer Termination M This information element
indicates the bearer termination for which the CLUE information is reported.
CLUE Message Content M This information element indicates a content of the
received CLUE message. CLUE Message Received Notification Ack MRFC Context M
This information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command is executed.
* * *
#