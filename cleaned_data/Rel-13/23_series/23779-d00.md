# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This Technical Report contains the results of the Stage 2 study and evaluation
of possible 3GPP technical system solutions for the Mission Critical Push To
Talk over LTE (MCPTT) application. This TR will identify the architecture
needed to support MCPTT services based on the Stage 1 requirements, including
TS 22.179 [2]. This Technical Report depends on functionality specified in
3GPP specifications.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.179: \"Mission Critical Push to Talk MCPTT\".
[3] 3GPP TS 23.468: \"Group Communication System Enablers for LTE
(GCSE_LTE)\".
[4] 3GPP TS 23.303: \"Proximity-based Services (ProSe)\".
[5] 3GPP TS 23.218: \"Internet Multimedia (IM) Session Handling; IM Call
Model\".
[6] 3GPP TR 23.713: \"Study on Extended Architecture Support for Proximity-
based Services\".
[7] 3GPP TS 33.203: \"Access Security for IP-based Services\".
[8] IETF RFC 3261: \"SIP: Session Initiation Protocol\".
[9] IETF RFC 4582: \"The Binary Floor Control Protocol (BFCP)\".
[10] 3GPP TS 24.525: \"Business trunking; Architecture and functional
description\".
[11] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[12] 3GPP TS 23.002: \"Network Architecture\".
[13] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS)\".
[14] Open Mobile Alliance, OMA-AD-PCPS-V1_0: \"Push to Communicate for Public
Safety Architecture\".
Editor\'s note: Use of text from OMA PCPS is subject to execution of OMA-3GPP
copyright agreement.
[15] 3GPP TS 24.173: \"IMS Multimedia telephony communication service and
supplementary services; Stage 3\".
[16] 3GPP TS 22.278: \"Service requirements for the Evolved Packet System
(EPS)\".
[17] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage
2\".
[18] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[19] 3GPP TS 23.008: \"Organization of subscriber data\".
[20] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[21] IETF RFC 5245: \"Interactive Connectivity Establishment (ICE): A Protocol
for Network Address Translator (NAT) Traversal for Offer/Answer Protocols\".
[22] 3GPP TR 23.797: \"Study on architecture enhancements to support Isolated
E-UTRAN Operation for Public Safety\".
[23] 3GPP TS 24.371: \"Web Real-Time Communications (WebRTC) access to the IP
Multimedia (IM) Core Network (CN) subsystem (IMS); Stage 3; Protocol
specification\".
[24] 3GPP TR 33.871: \"Study on security for Web Real Time Communications
(WebRTC) IP Multimedia Subsystem (IMS) client access to IMS\".
[25] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP)\".
[26] 3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);
Architecture and functional description\".
[27] IETF RFC 5850: \"A Call Control and Multi-Party Usage Framework for the
Session Initiation Protocol (SIP)\".
[28] 3GPP TS 23.179: \"Functional architecture and information flows to
support mission critical communication services\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Floor control** : An arbitration system in an MCPTT Service that determines
who has the authority to transmit (talk) at a point in time during an MCPTT
call.
**Group Affiliation:** A mechanism by which an MCPTT user's interest in one or
many MCPTT groups is determined. The affiliation procedure is performed by the
MCPTT user (explicitly), MCPTT UE (implicitly) or MCPTT service (implicitly.
e.g. emergency, re-grouping, etc.).
**Group Call:** A mechanism by which an MCPTT user can make a one-to-many
MCPTT transmission to other users that are members of MCPTT Group(s).
**MCPTT Service** : A Push To Talk communication service supporting
applications for Mission Critical Organizations and mission critical
applications for other businesses and organizations (e.g., utilities,
railways) with fast setup times, high availability, reliability and priority
handling.
**MCPTT system** : The collection of applications, services, and enabling
capabilities required to provide Mission Critical Push To Talk for a Mission
Critical Organization.
**Migration:** Obtaining service from an MCPTT system where no MCPTT user
profile exists for that MCPTT user.
**Mission Critical Push To Talk** : A group communication service with fast
setup times, ability to handle large groups, strong security and priority
handling.
**Off-Network MCPTT Service** : The collection of functions and capabilities
required to provide MCPTT using ProSe Discovery and the ProSe Communication
path for MCPTT Users using Public Safety ProSe-enabled UEs as a direct
communication between UEs using E-UTRA or possibly via a ProSe UE-to-UE Relay.
**On-Network MCPTT Service** : The collection of functions and capabilities
required to provide MCPTT via EPS bearers using E-UTRAN to provide the last
hop radio bearers.
**Partner MCPTT system** : Allied MCPTT system that provides MCPTT services to
an MCPTT user based on the MCPTT user profile that is defined in the primary
MCPTT system of that MCPTT user.
**Primary MCPTT system** : MCPTT system where the MCPTT user profile of an
MCPTT user is defined.
**Private Call** : A call between a pair of MCPTT Users using the MCPTT
Service with or without MCPTT Floor control.
**UE-to-Network Relay MCPTT Service** : The collection of functions and
capabilities required to provide MCPTT via a ProSe UE-to-Network Relay using
ProSe direct communication paths to provide the last hop radio bearer(s).
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
> GMF Group Management Function
>
> IOPS Isolated E-UTRAN Operation for Public Safety
>
> MCPTT Mission Critical Push To Talk over LTE
>
> MCPTT AS MCPTT Application Server
>
> NGCN Next Generation Corporate Network
>
> OMA Open Mobile Alliance
>
> P25 Project 25
>
> PCPS Push to Communicate for Public Safety
POC Push To Talk Over Cellular
PS-UDF Public Safety User Data Function
PTT Push To Talk
TCCE TETRA and Critical Communications Evolution
TETRA Terrestrial Trunked RAdio
XDMS XML Documentation Management Server
# 4 Assumptions and architectural requirements
## 4.1 Assumptions
Editor's note: This clause will define the underlying assumptions of the work.
### 4.1.1 Service continuity
For group calls, service continuity feature shall only be supported between
MCPTT on-network service and MCPTT UE-to-network relay service.
For private calls, service continuity feature shall only be supported:
\- between MCPTT on-network service and MCPTT UE-to-network relay service;
\- between MCPTT on-network service and MCPTT off-network service; and
\- between MCPTT on-network service and MCPTT off-network with UE-to-UE relay
service.
Editor's note: whether application layer mechanisms are required for service
continuity needs to be assessed based on SA2 progress on service continuity at
ProSe layer, for Rel-13.
The MCPTT UE, prior to going out of E-UTRAN coverage, should attempt to make
use of a ProSe UE-to-Network Relay in order to support the service continuity.
## 4.2 Architectural requirements
Editor's note: This clause will define the architectural requirements based on
the normative Stage 1 requirements defined in 3GPP TS 22.179 [2].
### 4.2.1 General architectural requirements
General MCPTT architectural requirements include:
a) To develop economies of scale, it will be useful if network operators can
reuse the MCPTT architecture for non-public safety customers that require
similar functionality. These operators may want to integrate many components
of the MCPTT solution with their existing network architecture.
Hence a functional decomposition of MCPTT into a small number of distinct
logical functions is required.
b) The architecture should enable an Application Signalling and Media Plane
split for the provision of the MCPTT service.
c) To enable parts of the MCPTT solution to be reused for other applications,
the architecture should enable the Group Management functions (e.g. admission
control; linking of groups; etc) to be implemented on a separate node from the
main PTT functions (e.g. 'call' setup/termination; allocation of TMGI to UE;
floor control; etc).
d) There is a need to promptly form (and release) groups of users that span
multiple Public Safety Network Administrations. To enable this, the
architecture should provide the relevant Public Safety Network -- Public
Safety Network interfaces.
### 4.2.2 Roaming requirements
The MCPTT application can provide PTT service to users in various PLMNs.
When a UE (being a MCPTT application subscriber in one PLMN) moves to a region
served by a PLMN associated to the jurisdiction of another organisation
offering MCPTT service in this PLMN and which has operational agreement with
the MCPTT AS operator in the home network, this UE can get MCPTT service from
this (local PLMN) MCPTT application server. The UE is provided access to group
communication resources under the control of both MCPTT applications.
Priorities are managed according to the policy of the local public safety
authority.
Editor's note: The above sentence should be moved to a new clause dealing with
priorities.
### 4.2.3 Involved business relationships
Based on the information in subclause 4.2.1 and subclause 4.2.2, figure
4.2.3-1 shows the business relationships that exist and that are needed to
support a single MCPTT user.
Figure 4.2.3-1: Business relationships for MCPTT
Editor\'s note: There is a need to describe whether multiple MCPTT users all
within the same group are constrained to use the same Home PLMN.
The MCPTT service provider and the home network operator could be part of the
same organisation, in which case the business relationship between the two is
internal to a single organisation.
Where mutual aid operates between between MCPTT service providers, figure
4.2.3-2 shows the required additional relationship. An MCPTT user can only
affiliate to groups of the partner MCPTT service provider:
\- if such a service provider agreement exists; or
\- subject to authorisation for a specific group membership from the partner
MCPTT service provider.
Figure 4.2.3-2: Additional business relationships for mutual aid
An example of the usage of these business relationships is elaborated for two
users, one resident on its home MCPTT service provider and one providing
mutual aid within the same group.
User A is a user on MCPTT X in group M. The relationships are as follows:
a) user A has user configuration established with MCPTT X and forms part of
group M;
b) user A has a subscription arrangement with network operator R; and
c) MCPTT X has a service arrangement with network operator R.
User B is a user on MCPTT Y and joins group M as part of a mutual aid:
a) user B has user configuration established with MCPTT Y and forms part of of
its own set of groups relating to MCPTT Y;
b) user B has a subscription arrangement with network operator S;
c) MCPTT Y has a service arrangement with network operator S;
d) MCPTT Y has a service provider agreement with MCPTT X that allows user B to
participate within group M; and
e) network operator S has a roaming agreement with network operator R allowing
user B to roam to network operator R.
NOTE: There is no requirement that the network operator that user B roams to
is the same network operator that MCPTT X has a service arrangement with. It
does however need to support MCPTT capabilities, and provide service in the
same geographic area as used by MCPTT X.
### 4.2.4 Media routing requirements
The voice media flow for an individual call shall be routed according to one
of the following two options:
Option 1.
Through the Home MCPTT application, i.e. the MCPTT application controlled by
the Home organisation if both parties in the call belong to the same
organisation.
Through the both Home MCPTT application of each party, if the parties in the
call do not belong to the same organisation.
Option 2.
The voice media flow may be routed locally, under the control of the Home
MCPTT applications, through an entity allowing the duplication of the media
flow to the Home MCPTT application(s).
The voice media flow for a group call shall be routed to the Group Home MCPTT
application, i.e. the application controlled by the organisation controlling
the corresponding group.
The routing of media flow shall be end-to-end from transmitter to receiver(s),
except for the PTT control function.
Editor's note: It is FFS (SA4) which information used for QoS management.
### 4.2.5 Requirements for user identity management
To allow for confidentiality of user identities in various cases of business
relationship as defined in subclause 4.2.3, the MCPTT application may provide
public user identities to the MCPTT UE, to be used by MCPTT UE for MCPTT
services.
The MCPTT application providing the identities may be the primary MCPTT
application or a (visited) partner MCPTT application under control of the
primary MCPTT application.
This provision is subject to preliminary authentication of the MCPTT user.
### 4.2.6 Group affiliation
Group affiliation can be achieved through the following procedures:
a. Explicit Affiliation: An MCPTT user provides interest in one or many MCPTT
groups using the MCPTT UE. An MCPTT authorized user may remotely modify
another MCPTT user's affiliation to a MCPTT group.
b. Implicit Affiliation: MCPTT user's affiliations to MCPTT groups are
determined through configurations and policies at the MCPTT UE or MCPTT
service and performed implicitly by the associated MCPTT UE or MCPTT service.
The following procedures shall be enabled by the MCPTT service for the MCPTT
users affiliated to the MCPTT groups.
\- MCPTT users receive notifications for group call setup and invitation for
their affiliated group.
\- MCPTT users can select amongst their affiliated group a Selected MCPTT
group for media transmission. Thus, allowing the MCPTT user to initiate a new
group call.
\- MCPTT users receive media and events from their affiliated group.
Editor's note: There may be more affiliation requirements for different types
of group calls, this aspect is FFS.
Editor's note: The definitions for group call setup and invitation are FFS.
### 4.2.7 Group call requirements
The MCPTT service shall support the chat group (restricted) call model for
MCPTT group call.
The MCPTT service shall support the pre-arranged group call model for MCPTT
group call.
Editor's note: Additional text with a description of these group call models
will be added to this section in a future contribution. As a reference to
these two group call models please see OMA PCPS specification [OMA-PCPS-TS-
System-Description_V1.0].
Editor's note: It is FFS whether enhancements to these group call models may
be necessary for MCPTT group call.
Editor's note: Consideration of additional group call models for MCPTT service
is FFS.
# 5 Candidate solutions
Editor's note: This clause is intended to document architecture solutions to
meet the Stage 1 requirements as well as the Architecture Requirements in
clause 4.2.
## 5.1 Off-network operations
### 5.1.1 Solution 1-1: Distributed mesh support for MCPTT off-network MCPTT
group calls
#### 5.1.1.1 Functional description
The solution described in this clause is illustrated in figure 5.1.1.1-1.
Figure 5.1.1.1-1: High-level architecture view for off-network MCPTT Group
Calls
GC-off-network is the inter-UE application level interface connecting the
MCPTT clients for off-network operation (MCPTT off-network clients).
Editor's note: It is FFS how to represent and support non-fully connected mesh
networks.
A MCPTT off-network client when supporting MCPTT Group Calls has the following
characteristics:
\- It runs on top of the ProSe One-to-Many communication service defined for
PC5 in Rel-12.
\- It has functionality for fully decentralised floor control.
**-** It may support functionality for location, presence, group management,
and status reporting, as identified in the Stage 1 requirements.
#### 5.1.1.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
#### 5.1.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.1.1.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
### 5.1.2 Solution 1-2: Off-network MCPTT service using ProSe UE-to-UE relay
#### 5.1.2.1 Functional description
The solution described in this clause assumes that off-network MCPTT Service
using ProSe UE-to-UE Relay is supported with a centralised MCPTT server
residing in the ProSe UE-to-UE Relay, as illustrated in figure 5.1.2.1-1.
Figure 5.1.2.1-1: High-level architecture view for off-network MCPTT with
ProSe UE-to-UE relay
In reference to figure 5.1.2.1-1, the Remote UEs (UE-1 and UE-2) are out of
each other's transmission range, but are both within the transmission range of
the Prose UE-to-UE Relay (UE-R). UE-1 and UE-2 are able to communicate with
each other using the communication service provided by the UE-to-UE Relay.
The solution for off-network MCPTT with ProSe UE-to-UE relay described in this
clause has the following salient features:
\- Off-network MCPTT with ProSe UE-to-UE relay (similar to on-network MCPTT
and UE-to-network relay MCPTT) relies on a centralised architecture where the
MCPTT service is provided to the MCPTT client via the MCPTT server residing in
the Remote UE and Prose UE-to-UE relay, respectively.
\- The MCPTT server residing in the ProSe UE-to-UE relay includes the
following functionality:
\- SIP Registrar as defined in IETF RFC 3261 [8].
\- SIP session control for the registered users.
\- Optional SIP Proxy and SIP B2BUA functionality.
\- Support for a SIP-based interface (GC1-off-network) towards the Remote UE.
\- Support for centralised floor control (e.g. with the Binary Floor Control
Protocol (BFCP) defined in IETF RFC 4582 [9]).
\- The ProSe UE-to-UE relay (including the MCPTT server) may be perceived as a
Layer-7 relay.
NOTE 1: The MCPTT server function may reside in a Remote UE, noting that this
would lead to a suboptimal usage because every GC1-off-network hop would
involve two PC5 hops. Another reason for collocating the MCPTT server function
with the Layer-3 Relay (UE-R) is to allow UE-R to advertise the collocated
MCPTT server capability.
NOTE 2: The solution is intended for scenarios where there is a suitable
candidate that can serve as Prose UE-to-UE relay (e.g. high-power vehicle-
mounted UE).
NOTE 3: The PC5 aspects (e.g. relay discovery, PC5-layer authentication and
point-to-point link establishment, IP address/prefix assignment) of the Relay
are described in 3GPP TR 23.713 [6]. The present document focuses primarily on
GC1-off-network aspects.
NOTE 4: The ProSe UE-to-UE relay (in absence of the MCPTT server) is a layer-3
relay (i.e. an IP router). It provides basic IP connectivity to the Remote UEs
(UE-1 and UE-2).
#### 5.1.2.2 Procedures
##### 5.1.2.2.1 General
The following procedures are described with call flows:
\- Registration for MCPTT service and establishment of MCPTT communication
session: describes how the MCPTT client residing in the Remote UE registers
for MCPTT service with the MCPTT server residing in the Relay. The procedure
also describes how a Remote UE (UE-1) establishes an MCPTT group session with
another Remote UE (UE-2) or joins an established MCPTT Group session.
\- Floor control: describes how floor control is arbitrated by a centralised
floor controller residing in the MCPTT server.
##### 5.1.2.2.2 Registration for MCPTT service and MCPTT group communication
setup
Outlined in figure 5.1.2.2.2-1 are the control plane procedures for MCPTT
client registration and MCPTT Group communication establishment in the
presence of a Prose UE-to-UE Relay.
Figure 5.1.2.2.2-1: Registration for MCPTT service and MCPTT group
communication setup
1\. The Remote UE (UE-1) performs ProSe UE-to-UE relay discovery over PC5 and
establishes a secure point-to-point link with the Relay (UE-R) over PC5. As
part of this process the Remote UE is mutually authenticated at PC5 layer with
the Relay. In the process UE-1 is also assigned an IP address/prefix by the
Relay. After completion of this procedure there is basic IP connectivity
between UE-1 and UE-R.
NOTE 1: Step 1 will be entirely described in 3GPP TR 23.713 [6].
2\. The MCPTT client in UE-1 registers with the MCPTT server residing in UE-R
by sending a SIP REGISTER message. The message also carries the personal
application-layer identifier of the requesting user (e.g.
john.doe\@firstresponder.com).
3\. The SIP registrar functionality in the MCPTT server records the request by
associating the IP address of UE-1 with the personal SIP URI of the
registering user and sends an acknowledgement.
4\. UE-1 indicates its affiliation with MCPTT groups with which it wishes to
engage in MCPTT group communication. The MCPTT group is identified via a Group
ID i.e. an MCPTT group specific URI (e.g.
[fire.brigade75\@firstresponder.com]{.underline}).
NOTE 2: The user of UE-R may or may not be a member of the requested MCPTT
Group. It is up to the user of UE-R to decide whether a non-member UE-R shall
be authorised to act as Prose UE-to-UE relay.
5-8. The corresponding steps for UE-2 are performed.
9\. The MCPTT server in UE-R may now start sending SIP INVITE (MCPTT Group Y)
messages to the registered MCPTT clients.
NOTE 3: If the user of UE-R takes part in the MCPTT group communication as an
MCPTT Group member, UE-R may send the SIP INVITE message to the MCPTT clients
as soon as they register (e.g. step 9b could be performed right after step 4).
NOTE 4: In case UE-1 and UE-2 wish to engage in MCPTT private (one-to-one)
call, the SIP INVITE message in step 9 is sent by either UE-1 or UE-2 and
contains the personal SIP URI of the called user (instead of an MCPTT Group
ID).
10\. OK messages.
11\. At this point UE-1 and UE-2 may engage in an MCPTT communication session.
NOTE 5: In case of MCPTT group communication the MCPTT server receives content
from one UE and distributes it to the group. In case of an MCPTT private call
the relay operation can be equivalent to IP routing.
##### 5.1.2.2.3 Floor control procedure
Outlined in figure 5.1.2.2.3-1 is the floor control procedure (only for
applications that need it).
Figure 5.1.2.2.3-1: Floor control procedure
The call flow is largely self-explanatory and needs no step-by-step
description. The following assumptions apply:
\- Floor control messages (Floor Request and Floor Grant in figure
5.1.2.2.3-1) may be based on the Binary Floor Control Protocol (BFCP) defined
in IETF RFC 4582 [9].
\- Floor control requests are arbitrated by a centralised floor control server
collocated with the MCPTT server.
#### 5.1.2.3 Impact on existing entities and interfaces
System-level considerations:
\- PC5 needs to be enhanced as part of Rel-13 work item eProSe-Ext to support
the following (also refer to step 1 and step 5 in figure 5.1.2.2.2-1):
\- Relay discovery
\- one-to-one communication (including PC5-level mutual authentication between
the Remote UE and the Relay UE, as well as IP address assignment).
\- One-to-many communication over PC5 defined in Rel-12 is needed only if
multicast delivery is required over PC5.
\- The Relay UE needs to support IP router functionality.
Application-level considerations:
\- MCPTT server residing in the Layer-3 UE-to-UE relay includes the following
functionality:
\- SIP Registrar as defined in IETF RFC 3261 [8].
\- SIP session control for the registered users.
\- Optional SIP Proxy and SIP B2BUA functionality.
\- Support for a SIP-based interface (GC1-off-network) towards the Remote UE.
\- Support for centralised floor control (e.g. with the Binary Floor Control
Protocol (BFCP) defined in IETF RFC 4582 [9]), the Relay serving as the floor
arbitrator.
Editor\'s note: The security aspects at GC1-off-network level in this
architecture are FFS. This includes end-to-end authentication between UE-1 and
UE-2 (if needed), mechanism allowing a UE to assert its affiliation with a
specific MCPTT Group and mechanism for end-to-end security (UE-1 to UE-2) that
would prevent a non-member Relay to eavesdrop on the MCPTT Group communication
(if needed). Note that both UE-1 and UE-2 have already been individually
authenticated by the ProSe UE-to-UE Relay at PC5 layer upon establishing the
secure point-to-point link with the Relay, as described in 3GPP TR 23.713 [6].
#### 5.1.2.4 Solution evaluation
SA2 has decided not to specify solution for ProSe UE-to-UE relay in Rel-13,
and RAN did not consider UE-to-UE relay in the scope of their work in Rel-13.
This solution will not be pursued further for Rel-13.
### 5.1.3 Solution 1-3: Application level device to device relay operation for
off-network MCPTT
#### 5.1.3.1 Functional description
An MCPTT UE will be receiving the communications relevant to its group. That
means the information will be passing into the Application Level of the
device. Relaying the information received will therefore not impose any
unwanted receive burden on the relaying UE. The implications for the transmit
side need to be considered.
Relay transmissions for an MCPTT UE are useful if:
\- The relaying device can receive the intended communication stream; and
\- There is a device in reception range of the relaying device which cannot
directly receive the intended communication stream; and
\- There is no better device able to relay the communication.
This clause describes how application level relay can be used in the UE to
help communicate with devices that would otherwise be out of range.
##### 5.1.3.1.1 Detecting the relay opportunity
To ensure communication is only relayed when needed, there has to be an
approach to discovering the need for relaying. This is best done by the device
needing relay support detecting an ongoing communication (e.g. by receiving
response messages but not the content messages) and requesting support from
(one of) the device(s) it can receive.
It is assumed that the presence of a ProSe relay would provide onward delivery
of any content messages before the response message is received and acted upon
by the device requiring relay support. Therefore ProSe relay would take
precedence and application level relay would not get invoked as there would be
no detected need.
##### 5.1.3.1.2 Selecting the best of multiple relay choices
There are at least two means for the device requiring relay support to
identify which is the best device to seek relay support from. It is
recommended to support both options by using the preferred approach as a
default and the alternative approach as an option.
Preferred approach:
All relevant messages that are sent include some key parameters that allow the
receiving device to detect which device to select for relay. \"Relevant
messages\" includes content messages, both broadcast and point to point and
response messages but does not include messages of local relevance only such
as relay activation messages.
Key parameters to include in relevant messages:
\- Number of hops: A value indicating the number of relay hops already used
when transmitting this message. The point is to allow a device requiring relay
support to choose the lowest number of hops among adequate relay choices to
provide the required service.
\- Relay quantity: A value which indicates how many devices are receiving this
transmission. The number is derived from the history of relay activations
using this device for this sort of relay transmission. The objective is to
allow devices requesting relay support to make maximum use of a single relay
transmission rather than bring up new relay devices or instances which may not
be required.
\- Relay value: A value indicating a relative signal measure of goodness. The
intention for this parameter is to indicate the relay route which providing
independent links which are least likely to drop. This parameter equates to
the worst link in the path. Each device acting as a relay compares the value
received for this parameter with the value it calculates from its receiver for
the last link. It then uses the lower of the two values for the relay
transmission.
The reasons for preferring this approach are:
\- The parameters are always kept as fresh as possible to permit the best
relay decisions and updates.
\- The device requesting relay has all of the parameters available to choose
the support it requires. This saves message dialogues to exchange the
information ahead of making the choice.
Alternative approach:
As an alternative to including the relay parameters in all relevant messages
it is possible as an option to exclude the parameters from normal messages but
for each device to store the relevant values for the route from each source
device as the relay structure gets built up. Then when a device detects that
it requires relay support it starts a relay dialogue to gather the parameters
from the available optional relaying devices. It then adapts the relay value
as described above and makes a choice of device to relay. The message
accepting relay is then sent as before.
##### 5.1.3.1.3 Relay routes
There may be alternative algorithms for managing relay routes. The approach
provided here is offered as a simple solution to ensure relay is available at
application level.
Routing is managed as a single hop system and can optionally be limited to a
single hop. Each device acting as a relay builds up its own table of single
hop routing connections. The table is built and maintained when it receives
requests to act as relay. It enters a two way routing for the device
requesting relay support and the next hop device in range which provides the
continuation of the route to/from the source being requested.
There is a mapping table used to extend the single hop solution to provide
multihop. The mapping table is used to indicate the next hop to use from the
single hop table. The mapping table is built up when sending
The solution can be limited to the required number of hops such that devices
cannot select a relay which is already at the limit number of hops. If there
is no relay choice available with fewer hops than the maximum, the device has
to remain out of coverage for the communication it is seeking to receive.
##### 5.1.3.1.4 Message structure to support relay
For the relay devices to build their relay tables and choose to route
appropriately and for good order, each message includes three identity
parameters:
\- OwnID: Always the ID of the device transmitting the message. When the
message is relayed, the OwnID is the ID of the relay device.
\- OriginatorID: The ID of the source device for the message being sent. When
a message is relayed, the OriginatorID is not changed from that received
before relaying.
\- DestinationID: The ID of the device to which the message is directed. In
the case of broadcast messages, this field is populated with the OriginatorID.
That is; when the OriginatorID is the same as the DestinationID the message is
a broadcast message for sending to all members of the group. When a message is
relayed, the DestinationID is not changed from that received before relaying.
##### 5.1.3.1.5 Message flows for relay
In the preferred approach for selecting the best of multiple relay choices
there is only one message required to establish or renew a relay link. The
alternative approach requires a dialogue. Both solutions use the same
deactivation approach.
###### 5.1.3.1.5.1 Message flows for preferred approach for relay setup
Figure 5.1.3.1.5.1-1: Message flow for preferred relay accept
Figure 5.1.3.1.5.1-1 shows the message flows for the preferred relay accept
approach:
1\. A normal message is sent from the originator and received by multiple UE
some of which could be candidate relay devices.
2\. Response messages are returned from the candidate UE devices. The prime
use of these messages is to confirm participation in the normal message flow
but they are also received by the device requiring relay.
The device requiring relay receives response messages but not the original
message so compares the three relay parameter values to select the best
candidate for relay purposes.
3\. The device requiring relay sends a relay accept message. This message
includes the device OwnID, the OriginatorID of the main communication flow in
1, and 2. and the ID of the chosen candidate to relay. The candidateID is
required because the message is broadcast and several devices may receive the
message.
The message flow indicated does not include an acknowledgement of the relay
accept. It is assumed that normal message flow being relayed would serve as a
confirmation. However an acknowledgement message could be used.
###### 5.1.3.1.5.2 Message flows for relay deactivation
Figure 5.1.3.1.5.2-1: Message flow for relay deactivation
Figure 5.1.3.1.5.2-1 shows the message flows for relay deactivation
> By receiving normal message content and response messages, the relayed to
> device detects a better relay option than the one currently serving it.
1\. The relayed to device sends a relay accept to the new best relay choice to
enable relay via that device.
2\. The relayed to device sends relay deactivate to the previous relay choice
to deactivate relay from that device.
NOTE: Although the relay is deactivated it may be that it still needs to relay
for another device. The device changing its selection could check the
parameters being sent from the old relay to see if there is a change in the
relay quantity but this would not be guaranteed.
The message flow indicated does not include acknowledgements of the relay
accept or deactivate. It is assumed that normal message flow and parameters
being relayed would serve as a confirmation. However an acknowledgement
message could be used.
###### 5.1.3.1.5.3 Message flows for alternative approach for relay setup
Figure 5.1.3.1.5.3-1: Message flow for alternative setup approach
Figure 5.1.3.1.5.3-1 shows the message flows for the alternative relay accept
approach:
1\. A normal message is sent from the originator and received by multiple UE
some of which could be candidate relay devices. The difference from subclause
5.1.3.1.5.1 is that the relay parameters are not included in the messages but
stored in the devices for directly received messages and built up from relay
dialogue for relayed messages.
2\. Response messages are returned from the candidate UE devices. The prime
use of these messages is to confirm participation in the normal message flow
but they are also received by the device requiring relay.
> The device requiring relay receives response messages but not the original
> message so can detect that it would benefit from relay.
3\. The device requiring relay sends a relay request message. This message
includes the device OwnID, the OriginatorID of the main communication flow in
1, and 2. and the list of IDs for the candidates chosen to compare.
4\. The requested candidates reply and include their parameter values for
messages received from the OriginatorID being requested.
> The device requesting relay selects the best candidate.
5\. The device requesting relay sends a relay accept indicting the candidate
chosen to act as relay.
The message flow indicated does not include an acknowledgement of the relay
accept. It is assumed that normal message flow being relayed would serve as a
confirmation. However an acknowledgement message could be used.
##### 5.1.3.1.6 Operation for devices in direct communication
It is useful for devices to keep a list table of devices with which it is in
direct communication. This can be detected as the OwnID of any message
received. It is clearly not necessary to check the table for every message
received and is left to implementation to identify an effective minimum of
situations and occasions to check this table.
For simplicity it is assumed the neighbour table will be part of the mapping
table described in subclause 5.1.3.1.7. In the case of immediate neighbours
the OriginatorID in this table and the NextHopID will be the same.
##### 5.1.3.1.7 Operation for devices sending relay accept messages
When a device sends the relay accept message either i) if the OriginatorID is
not already in the mapping table table 5.1.3.1.7-1) it includes the
OriginatorID in the table and the selected relay ID as the NexthopID otherwise
ii) it finds the existing entry for the OriginatorID in the table and updates
the NestHopID to the ID of the selected relay.
Table: 5.1.3.1.7-1 Mapping table of next hop IDs to be used to communicate
with other devices in the group
* * *
OriginatorID A B C D NextHopID W X Y Z
* * *
##### 5.1.3.1.8 Operation for devices receiving relay accept messages
The Relay UE keeps a record of the bridges it holds as in table 5.1.3.1.8-1,
that is both sides, the source and destination and vice versa. When a device
receives a relay accept it builds a relay bridging table by adding or updating
a column for the NextHopID (from the mapping table) associated with the
OriginatorID received in the relay accept message to include a row for the
OwnID of the device requesting relay (OwnID in the relay accept message) and
vice versa
This operation builds up the single hop relay bridging table for the device in
question. If the operation is limited to single hop then the mapping table is
not required and so mapping table lookup is not required either.
Table 5.1.3.1.8-1: Relay Bridge List
* * *
**NextHopID (Originator)** **A** **B** ... List of relays (OwnID) B A ... ...
...  
... ...
* * *
##### 5.1.3.1.9 Operation for devices sending relay deactivate messages
When the device sending relay deactivate has immediately previously sent relay
accept for the new relay then there is no action required because the mapping
table has already been updated. If relay deactivate is sent without previously
selecting a new link then the device should check the mapping table to see the
NextHopID for the OriginatorID being deactivated. If there is a match the
column should be removed.
##### 5.1.3.1.10 Operation for devices receiving relay deactivate messages
When a relay link is being deactivated the relay device must delete the link
from its bridging table. Deactivations, like activations, in the bridging
table apply to a linkage between neighbour devices so only the relevant
linkage is being deactivated. The relay device receiving the relay deactivate
looks up the NextHopID from the mapping table using the OriginatorID it then
deletes the OwnID from the received relay deactivate message from the column
in the table. If the column become empty (except for the header row) then the
entire column is removed and the device will cease to relay messages from that
neighbour. As the bridging table is a two way entry, the device also looks for
the column related to the received OwnID and removes the entry for the
NextHopID and, if appropriate, the column.
NOTE: It is possible that the column will be deleted for one of the neighbours
but not for the other.
##### 5.1.3.1.11 Relaying messages
When a device receives a message it checks to see if it should also re-
transmit (relay) the message.
If the message is a local relevance message it is not relayed. Such messages
include all relay operation messages (relay accept, relay deactivate...).
If the message is a broadcast message (the OriginatorID is the same as the
DestinationID) then the relay device looks up the NextHopID from the mapping
table associated with the OriginatorID in the received message. It then checks
for a column in the bridging table corresponding to the NextHopID. If the
column exists then the message is relayed with the updated parameters for
OwnID and number of hops, relay quantity and relay value.
If the message is not a broadcast message then the relay device looks up the
NextHopID from the mapping table associated with the OriginatorID in the
received message. It then checks for a column in the bridging table
corresponding to the NextHopID. If the column exists then the relay device
looks in the mapping table for a NextHopID associated with the DestinationID
from the received message and if there is an entry for that route the message
is relayed with the updated parameters for OwnID and number of hops, relay
quantity and relay value.
#### 5.1.3.2 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.1.3.3 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
### 5.1.4 Solution 1-4: Group priority solution for off-network communication
when UE in coverage of PLMN network
#### 5.1.4.1 Procedures
The following flow are for the case that when off-network group communication
happened within the coverage of PLMN network.
For MCPTT Service, the Group Priority shall be updated dynamically. MCPTT
Server is the best place to determine the Group Priority which needs to be
passed to the EPC transport layer for resource scheduling. To determine the
Group Priority, the Group Dynamic Attributes needs to be considered.
**Figure 5.1.4.1-1: Group Priority Update Procedure**
1\. If the UE is authorized to perform group communication and is triggered to
update group priority, it shall establish a secure connection with the ProSe
Function and it shall send a Group Communication Priority Request (UE
Identity, L2 Group ID, App Layer UE ID, App Layer Group ID, communication
command, Application ID, Group Dynamic Attributes) message for group
communication. The UE Identity is set to e.g. IMSI. The Group ID indicates the
group the UE participates in. The Application ID is used to identify the PS
App Server. The Group Dynamic Attributes are the attributes (e.g. Imminent
Peril) that may impact the group priority and details are defined in SA6.
2\. The ProSe Function sends a Group Priority Request (App Layer UE ID, App
Layer Group ID, Group Dynamic Attributes) to the App Server. The ProSe
Function locates the App Server based on the Application ID.
3\. The App Server update the Application layer group priority based on the
Group Dynamic Attributes. The details of this step are defined in SA6.
4\. The App Server returns a Group Priority Response (App layer UE ID, App
layer Group ID, Group Priority) message. The Group Priority indicates the
application layer group priority.
5\. The ProSe Function updates the transport layer group priority based on the
Group Priority received in step 4.
6\. The ProSe Function responds to UE with a Group Communication Priority
Response (L2 Group ID, Group Prio). UE can then select resource pool based on
the Group Prio in mode 2.
Steps 7-9 are to indicate the updated Group Prio to eNB.
7\. The ProSe Function sends a Group Priority Notification (IMSI, L2 Group ID,
Group Prio) to the HSS.
8\. The HSS sends an Insert Subscription Data (L2 Group ID, Group Prio) to the
MME.
9\. The MME sends a UE Context Modification (L2 Group ID, Group Prio) to the
eNB. The eNB can then schedule the radio resources based on the Group Prio in
mode 1.
#### 5.1.4.2 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.1.4.3 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
### 5.1.5 Solution 1-5: MCPTT off-network
#### 5.1.5.1 Functional description
In order to provide the MCPTT off-network service, following functions should
be considered.
\- FA (Floor Arbitrator) selection: It is a process to select the Floor
Arbitrator for the floor control. It is evident that off-network MCPTT service
cannot utilize the MCPTT server. Hence, one of UEs should be acting as the
MCPTT server at important times to manage floor congestion among participants,
whether the period of the role is short or long. For the FA selection, each UE
shall be FA while speaking and is selected by first device seeking to take the
floor after a period of silence or after call setup.
> Floor Arbitrator role may be set to follow an automated transfer to the next
> Floor Controller so that each operation always applies to the same set of
> recipients. The explicit FA delegation transfer is necessary in case the
> user requests or an automated transfer to the next Floor Controller.
\- Call Setup: It is a process to invite group members and negotiate media
types, codecs, and port number for the delivery of media.
\- Floor Control: It is a function to control the floor of users. The basic
assumption of floor control is, if the UE is not granted to speak or send
media, then the UE cannot transmit the voice or other media at all to avoid
congestion. One more thing we need to consider is FA authority transfer in
case that the UE acting as FA is out of radio scope or when the battery of the
UE acting as FA is out.
#### 5.1.5.2 Procedures
##### 5.1.5.2.1 Call Setup
A session can be established independently of discovery mechanism for end-to-
end media security key distribution and/or media negotiation. Outlined in
figure 5.1.5.2.1-1 is the control plane procedures for MCPTT group
communication establishment for off-network. The procedure describes how a
remote UE (UE1) initiated an MCPTT group session with other remote UEs (UE2
and UE) within one MCPTT group, and how the MCPTT group session is
established. It is assumed that a group multicast IP address and a receiving
signalling port are pre-configured for the session setup.
NOTE 1: This flow shows the procedures in the application layer.
Figure 5.1.5.2.1-1: Off-network group call establishment
1\. The UE1 initiates a group call.
2\. The UE1 broadcasts the Group Call Setup message to the group. This message
contains the following parameters:
\- The type of media which is currently voice;
\- The media codec and perhaps bandwidth;
\- Multicast port number for media;
\- Floor control related information such as port number; and
\- Any encryption key for the media encryption if needed.
3\. UE2 and UE3 need to be configured for media delivery by making use of the
received parameters when receiving the Group Call setup message. Due to out of
coverage, UE4 is not able to directly hear the Group Call Setup message sent
by UE1.
4\. UE2 and UE3 broadcast response messages including their own ID to the
group.
NOTE 2: The UE does not need to response to the periodic broadcast
5\. Upon receiving the response messages from UE2 and UE3, UE1 recognizes that
UE2 and UE3 participate in the Group Call.
NOTE 3: Due to the movement of the members (in and out of the radio coverage)
during the off-network group call session, the Group Call setup message
including parameters for the media delivery is periodically broadcasted by
UE1.
##### 5.1.5.2.2 Floor Control
###### 5.1.5.2.2.1 Floor Control Protocol
The model for off-network floor control has two elements:
\- combined Floor Chair and Floor Control Server as the Floor Arbitrator, and
\- Floor Participants.
This floor control mechanism is based on sending UDP/IP packets to a certain
port number. Thus, this communication is not a one-to-one communication and
can be monitored by all the members within the MCPTT group.
Editor's note: It is FFS whether the port for this communication is
preconfigured or need to be negotiated at the time of e.g. session set up.
The Floor Arbitrator and MCPTT group members shall keep track of a list of the
requests and responses for the floor control. The Floor Arbitrator keeps track
of this list to handle the floor control with respect to members' position in
the queue, hierarchies, etc. The other group members keep track of this list
to have a copy of this information in case the Floor Arbitrator loses coverage
or drops off, and there is a need for a replacement.
Figure 5.1.5.2.2.1-1 shows the format of a potential signalling packet for the
off-network floor control.
Figure 5.1.5.2.2.1-1: Format of the signalling packet for off-network floor
control
Figure 5.1.5.2.2.1-1 shows that 8 bits of the data is called primitive which
can be assigned values similar to the primitives in IETF RFC 4582 [9] for
BFCP, as described in table 5.1.5.2.2.1-1.
Table 5.1.5.2.2.1-1: Mapping of primitives
* * *
Value Primitive Direction 1 FloorRequest P -> S 2 FloorRelease P -> S 3
FloorRequestQuery P -> S ; Ch -> S 4 FloorRequestStatus P \ S ; Ch -> S 6 UserStatus P \
S ; Ch -> S 8 FloorStatus P \ S 10
ChairActionAck Ch \ S ; Ch -> S 12 HelloAck P \ \- Solution 1: Call setup based among UEs
>
> \- Solution 2: Call setup based on MCPTT Server over UE to UE Relay
>
> \- Solution 3: Direct Media Delivery with Highest Ranked FA
>
> \- Solution 4: Direct Media Delivery with Queue list delivery
These 4 solutions are analysed in the perspective of the fundamental
functions. The solutions are expected to be revealed the pros and cons and the
required functions per solution to provide the minimum Off-Network MCPTT
service.
As the remaining time slots in Rel-13 are severely limited, only the
fundamental functions for minimum set of providing off-network MCPTT service
are considered.
Analysis of the solutions is provided in table 5.1.5.4.1-1.
Table 5.1.5.4.1-1: Analysis of solutions
+----------+----------+----------+----------+----------+----------+ | Fun | Solution | Solution | Solution | Solution | | | damental | 1 | 2 | 3 | 4 | | +----------+----------+----------+----------+----------+----------+ | F | Call | Direct | | | | | unctions | Setup | Media | | | | | | Based | Delivery | | | | | | | Based | | | | +----------+----------+----------+----------+----------+----------+ | | Role | Call | *MCPTT | \ | Current | | | | I | server | _Highest | Speaker | | | | nitiator | residing | ranked | | | | | | in the | UE with | | | | | | ProSe UE | H | | | | | | --to -- | ierarchy | | | | | | UE Relay | s | | | | | | | tructure | | +----------+----------+----------+----------+----------+----------+ | FA | S | Call | MCPTT | \ | The | | | election | I | Server |_ Through | Current | | | M | nitiator | operates | ProSe | Speaker | | | echanism | becomes | FA like | D | operates | | | | FA. | On | iscovery | FA | | | | | -Network | message, | during | | | | Call | MCPTT. | H | speaking | | | | I | | ierarchy | and | | | | nitiator | | Ranking | manages | | | | sends | | is | Queue | | | | Group | | a | list. | | | | call | | nnounced | | | | | messages | | and the | | | | | to Group | | h | | | | | members. | | ierarchy | | | | | | | table is | | | | | | | managed | | | | | | | by High | | | | | | | Ranking | | | | | | | UEs. | | +----------+----------+----------+----------+----------+----------+ | | FA Role | Not | Not | *Timer | Next | | | Transfer | s | s | based | Speaker | | | | upported | upported | | | | | | | | | When | | | | | | | speaking | | | | | | | f | | | | | | | inishes, | | | | | | | the | | | | | | | Queue | | | | | | | list is | | | | | | | d | | | | | | | elivered | | | | | | | to the | | | | | | | next | | | | | | | speaker. | +----------+----------+----------+----------+----------+----------+ | Call | * | *Invite | FFS | No | | | Setup | Invite & | & | | mention | | | | Neg | Neg | (Media | | | | | otiation | otiation | types, | (Media | | | | | | codecs | types, | | | | | (Only in | and port | codecs | | | | | case of | number | and port | | | | | UE to UE | should | number | | | | | Relay | be | should | | | | | case) | pre-co | be | | | | | | nfigured | pre-co | | | | | | or | nfigured | | | | | | nego | or | | | | | | tiated.) | nego | | | | | | | tiated.) | | +----------+----------+----------+----------+----------+----------+ | Floor | Reque | Reque | * | Queue | | | control | st/Grant | st/Grant | Similar | List | | | | | | BFCP | Ma | | | | | | | nagement | | | | | | 13 | & | | | | | | messages | Delivery | | | | | | defined | | | | | | | | * If | | | | | | | first | | | | | | | media | | | | | | | delivery | | | | | | | occurs | | | | | | | co | | | | | | | llision, | | | | | | | this | | | | | | | solution | | | | | | | provides | | | | | | | c | | | | | | | ollision | | | | | | | avoid | | | | | | | m | | | | | | | echanism | | | | | | | with | | | | | | | u | | | | | | | tilizing | | | | | | | the | | | | | | | Backoff | | | | | | | window. | | +----------+----------+----------+----------+----------+----------+
##### 5.1.5.4.2 Summary
The above table shows that each solution has its own strength. That is,
Solution 1 provides the Call Setup process for the invitation and negotiation
of parameters such as Media types, codecs and port number. Solution 2 shows,
if the UE-to-UE Relay is provided, then the MCPTT Server is applicable.
Solution 3 has strength on FA Role transfer. Lastly, Solution 4 has good point
on avoiding collision over media delivery. If FA is provided, the collision
avoidance mechanism is not needed. However, the mechanism can be applied for
the Call setup process. Solution 4 also guarantees that the role of Floor
Arbitrator moves with the Floor Controller and so avoids problems associated
with different groups of receiving participants between FA and FC. Such a
problem would not exist if relay is deployed and working perfectly.
Consequently, the harmonized solution can be made up from 4 solutions with 3
fundamental functions.
\- FA (Floor Arbitrator) selection: It is a process to select the Floor
Arbitrator for the floor control. It is evident that Off-Network MCPTT service
cannot utilize the MCPTT Server. Hence, one of UEs should be acting as the
MCPTT server at important times to manage floor congestion among participants,
whether the period of the role is short or long. For the FA selection, each UE
shall be FA while speaking and is selected by first device seeking to take the
floor after a period of silence or after call setup.
> Floor Arbitrator role may be set to follow an automated transfer to the next
> Floor Controller so that each operation always applies to the same set of
> recipients. The explicit FA delegation transfer is necessary in case the
> user requests or an automated transfer to the next Floor Controller.
\- Call Setup follows the way of group call setup via announcing the
parameters for the media delivery from solution 1 as the above described
subclause 5.1.5.2.1.
\- Floor control may apply the mechanism of solution 3 with various floor
control messages. However, the floor control messages should be explained and
described in detail.
## 5.2 On-network operations
### 5.2.1 Solution 2-1: IMS based architecture for MCPTT applications
#### 5.2.1.1 Functional description
##### 5.2.1.1.1 Overall architecture
This solution focuses on the situation where the UE is in contact with the
network. It is intended to be complementary to ProSe solutions that describe
the out of coverage cases, and, the UE-to-network-relay cases.
Based on the architectural requirements in clause 4.2 and the existing 3GPP
roaming architecture an IMS based architecture is shown in figure 5.2.1.1.1-1,
below. While figure 5.2.1.1.1-1 only shows a MCPTT AS, it can be imagined that
other application servers also utilise the services of the Group Management
Function; the Media Resource Function; the IMS core; and the SGi connection to
the UE.
Figure 5.2.1.1.1-1: Harmonized Architecture for MCPTT
**KEY**
BLACK: 3GPP SA2 Solution 2-1 Terminology
RED OMA ETSI TCCE WorkshopTerminology
BLUE OMA PCPS Terminology
RM = Resource Management
RM* = Resource Management for Multicast
YELLOW shaded entities are ones already defined in 3GPP
The above architecture is provided as an example architecture and many
variants of it can also exist, for example:
\- The IMS may be operated by the Public Safety Administration in order to
ensure that security related information is retained within their (secure)
environment. Within such an IMS, the P-CSCF and S-CSCF might be implemented in
a single entity.
\- The PDN GW might be in the Home Network, or, a \"local breakout\" PDN GW
could be used in the VPLMN. Different mechanisms for discovering the address
of the P-CSCF exist and hence when using a \"local breakout\" PDN GW, the
P-CSCF could still be located back in a Public Safety Administration's secure
environment. However, the P-CSCF provides an Rx interface to the PCRF; the
PCRF uses the Gx interface to request Dedicated Bearer resources from the PDN
GW; and currently inter-operator S9 interfaces are not widely deployed.
\- The HSS might be in a \"traditional HPLMN\" that also provides a Radio
Access Network, or, the HSS could be replaced by the Public Safety \-- User
Data Function (PS-UDF) operated by the Public Safety Administration which
functions as a type of \"Mobile Virtual Network Operator\" and provides the
functions of the HSS required by the IMS and the Public Safety Application. In
the latter case, new roaming agreements with \"traditional VPLMNs\" could be
required.
NOTE: Figure 5.2.1.1.1-1 depicts an alternative scenario where EPC level
security uses the \"traditional HSS\" and the Public Safety Administration
uses a PS-UDF.
\- Both the MCPTT Application Server and Group Management Function are
anticipated to have interfaces (with Sh type capabilities) to databases.
\- In addition to running its own applications, the \"Public Safety
Administration\" may own/operate the IMS and/or the \"HPLMN EPC\" and/or the
VPLMN/Radio Access Network.
\- (Amongst many other scenarios) the UE could be using a VPLMN in the
geographic region of \"Public Safety B\"; or, the UE could be using an
arbitrary IP-CAN and be located anywhere in the world with a need to
communicate with a user associated with \"Public Safety B\".
\- In some implementations, the Media Resource Function could be further
subdivided into \"MRFP\" and \"MRFC\". The Media Resource Function and MCPTT
Application Server might be implemented in a single entity.
\- ISC interfaces from the S-CSCF may run to any application server, e.g. to
the Group Management Function.
> \- The S-CSCF is shown straddling the IMS Core and the Public Safety
> Application. This is because using the PS-UDF the S-CSCF can either be
> assigned in the IMS Core or in the Public Safety Application.
Editor's note: If the allocated S-CSCF is within the Public Safety Application
then security between the different domains will need to be considered e.g.
IBCFs will need to be inserted between the I-CSCF and the S-CSCF.
Editor's note: The location of Resource Management and Rx is for further
study. It is currently shown as part of the P-CSCF where it is currently in
the IMS Architecture. It is FFS whether it is possible to support Resource
Management and Rx at the Public Safety Application. This would need discussion
with PCC experts in 3GPP SA2. RM* is also shown which is used for multicast
resource reservation.
##### 5.2.1.1.2 Functionalities and capabilities already provided by existing
technologies
###### 5.2.1.1.2.1 Functionalities and capabilities already provided by IMS
The following functionalities and capabilities are expected to be needed for
MCPTT and are already provided by IMS:
\- Registration of the MCPTT UE in the IMS;
\- Authentication of the MCPTT user in the IMS;
\- Identity assertion and securing of trust domains;
\- SIP session control;
\- QoS support using the PCC framework;
\- Priority Services (for prioritisation of Public Safety signalling);
\- Overload Control;
\- Restoration of IMS core network nodes;
\- Access to data stored in the Public Safety User Data Function (PS-UDF).
\- Support for multimedia telephony basic communication and supplementary
services as specified by 3GPP TS 24.173 [15] for the RTP-based transfer of
voice media.
###### 5.2.1.1.2.2 Functionalities and capabilities already provided by OMA
PCPS
###### # 5.2.1.1.2.2.1 MCPTT Client
This clause can be based upon clause 6.1.1 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.2 Group Management Client
The Group Management Client is a specific application of the XML Document
Client [14]
This clause can be based upon clause 6.1.2 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.3 MCPTT Server
This clause can be based upon clause 6.1.3 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.3.1 Controlling Function
This clause can be based upon clause 6.1.3.1 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.3.2 Participating Function
This clause can be based upon clause 6.1.3.2 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.3.3 Presence Functionality
This clause can be based upon clause 6.1.3.3 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.2.3.4 Group Management Functionality
The Group Management Functionality is a specific application of the XML
Document Management Functionality.
This clause can be based upon clause 6.1.3.4 of the OMA PCPS Architecture
Document [14].
#####
###### 5.2.1.1.2.3 Functionalities and capabilities already provided by other
entities
###### # 5.2.1.1.2.3.1 XML Document Management Servers (XDMSs)
These are other XDMSs that do not provide Group Management.
This clause can be based upon clause 6.2.2 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.2 XDM Aggregation proxy
This clause can be based upon clause 6.2.3 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.3 Presence Server
This clause can be based upon clause 6.2.4 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.4 Watcher
This clause can be based upon clause 6.2.6 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.5 MCPTT Interworking Function
This clause can be based upon clause 6.2.10 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.6 MCPTT Interworking Agent
This clause can be based upon clause 6.2.11 of the OMA PCPS Architecture
Document [14].
###### # 5.2.1.1.2.3.7 Access network
This clause can be based upon clause 6.2.12 of the OMA PCPS Architecture
Document [14].
##### 5.2.1.1.3 Overview of reference points
Key principles for use of IMS are:
a) the reference point between the MCPTT UE and the network for establishing
MCPTT group and private calls conforms to the protocol on the 3GPP Gm
reference point (with necessary enhancements to support MCPTT requirements);
and
b) that any other reference point that is exposed for MCPTT interoperability
with other IMS core networks or other IMS entities in other systems supports
the protocols defined for that reference point in the 3GPP architecture.
Editor\'s note: The protocol for the reference point between the MCPTT UE and
the network for configuration of Groups and User provided configuration is
FFS.
Further details for the reference points shown in figure 5.2.1.1.1-1 are as
follows:
GC1: Is the GC1 reference point that is identified in 3GPP TS 23.468 [3],
which is formed by the combination of GC1-U, GMF-1, MCP-1, MCP-2 and MCP-4.
GMF-1: Is the reference point between UE and Group Management Function. It
handles the UE's requests to join and leave groups
GMF-2: Is a reference point that allows an arbitrary application server to
communicate with the Group Management Function, e.g. to check the group
related permissions of a single UE.
GMF-3: Is the reference point between two Group Management Functions that e.g.
are in different administrations. It can be used when a user-group involves
users from multiple administrations.
GMF-4: Is the reference point between the Group Management Function and the
IMS. Notifications of changes to Group Management data are provided using this
reference point. This is an ISC reference point as defined in 3GPP TS 23.218
[5]. The ISC reference point uses SIP.
GMF-5: Is the reference point between the Group Management Function and the
PS-UDF. It can be used to deliver keys and user profile data to the Group
Management Function.
Editor's note: It is FFS whether this reference point will be needed.
GC1-U: Is the reference point for the media plane (e.g. encrypted speech
packets) between the UE and the Media Resource Function.
MCP-1: Is a reference point between UE and Mission Critical Push To Talk
Server. It is used for SIP based signalling that establishes and releases
group calls, distributes TMGIs, and negotiates codecs. This is an ISC
reference point as defined in 3GPP TS 23.218 [5]. The ISC reference point uses
SIP.
MCP-2: Is a control plane reference point between UE and Media Resource
Function: it is used e.g. for floor control requests/grants/refusals.
Editor's note: The details of the interactions of MCP-2 with Cr/Mr' are FFS.
MCP-3: Is the reference point between two Mission Critical Push To Talk
Servers that e.g. are in different administration domains. It can be used when
an MCPTT session involves users from multiple administration domains. MCP-3
uses IMS for routeing of SIP messages.
MCP-4: Is another reference point between UE and Mission Critical Push To Talk
Server: it is used e.g. for reporting the cell ID when the UE moves into a new
cell; requests to switch between unicast and eMBMS reception, etc.
Editor's note: It is FFS whether this reference point is needed, or, this
information can be provided by other means, e.g. via MCP-1 or MCP-2.
MCP-5: Is another reference point between Mission Critical Push To Talk Server
and the PS-UDF: it is used for providing user identity information, and for
supporting end to end media encryption.
Editor's note: It is FFS whether this reference point will be needed.
Cr/Mr': These reference points are between MCPTT Application Server and MRFC
as defined in 3GPP TS 23.218 [5]. The Cr reference point allows interaction
between an Application Server and an MRFC. Mr\' interface allows an
Application Server and an MRFC to exchange session control messages without
passing through an S-CSCF. As an overview, they are used to configure the
bridge/conference; allocate transcoders (if any); and e.g. provide policies
for floor control.
##### 5.2.1.1.4 Reference Points Mapping
The following table maps the reference points as used above with the reference
points used in the OMA ETSI TCCE workshop output Functional Architectural, the
OMA PCPS 1.0 Functional Architecture and the ETSI TCCE Architecture.
Table 5.2.1.1.4-1: Reference Points Mappings
+----------+----------+----------+----------+----------+----------+ | 3GPP | Workshop | OMA PCPS | ETSI | 3GPP/P | P | | R | arch | | TCCE | CPS/TCCE | rotocol/ | | eference | itecture | R | I | | Comments | | Point | | eference | nterface | Usage | | | | i | | | | | | | nterface | Point | | | | +----------+----------+----------+----------+----------+----------+ | **MC |** AS2**| * | A1 | PoC | SIP | | P-1/Gm** | | _POC-1_ _| | Client | | | | | | | to | | | | | | | SIP/IP | | | | | | | Core | | | | | | | Session | | | | | | | si | | | | | | | gnalling | | +----------+----------+----------+----------+----------+----------+ | MCP-1 |__A | * | No | SIP/IP | SIP | | /__ISC_ _| P2/AS8_ _|_ POC-2**| mapping | Core to | | | | | | | PoC | | | | | | | Server | | | | | | | Session | | | | | | | si | | | | | | | gnalling | | +----------+----------+----------+----------+----------+----------+ | MCP-2 |** AS3-1, | * | A2 | Media, | RTP | | | AS4-1**| *POC-3** | | Talk | | | | | | | Burst | RTCP | | | | | | Control | | | | | | | and | MSRP | | | | | | Media | | | | | | | Burst | RTSP | | | | | | Control | | | | | | | between | FLUTE | | | | | | PoC | | | | | | | Server | The | | | | | | and PoC | Co | | | | | | Client | ntinuous | | | | | | using a | Media | | | | | | unicast | t | | | | | | bearer. | ransport | | | | | | | utilizes | | | | | | | RTP | | | | | | | p | | | | | | | rotocol. | | | | | | | Talk | | | | | | | Burst | | | | | | | Control | | | | | | | Protocol | | | | | | | and | | | | | | | Media | | | | | | | Burst | | | | | | | Control | | | | | | | Protocol | | | | | | | utilize | | | | | | | RTCP APP | | | | | | | message | | | | | | | p | | | | | | | rotocol. | | | | | | | The | | | | | | | Discrete | | | | | | | Media | | | | | | | t | | | | | | | ransport | | | | | | | utilizes | | | | | | | the MSRP | | | | | | | protocol | | | | | | | for | | | | | | | delivery | | | | | | | over a | | | | | | | unicast | | | | | | | bearer | | | | | | | or the | | | | | | | FLUTE | | | | | | | protocol | | | | | | | for | | | | | | | delivery | | | | | | | over a | | | | | | | m | | | | | | | ulticast | | | | | | | bearer. | | | | | | | The | | | | | | | Media | | | | | | | S | | | | | | | treaming | | | | | | | Control | | | | | | | utilizes | | | | | | | RTSP | | | | | | | p | | | | | | | rotocol. | | | | | | | HTTP is | | | | | | | used for | | | | | | | file | | | | | | | repair | | | | | | | of | | | | | | | Discrete | | | | | | | Media | | | | | | | de | | | | | | | liverred | | | | | | | over the | | | | | | | m | | | | | | | ulticast | | | | | | | bearer. | +----------+----------+----------+----------+----------+----------+ | MCP-3/Mw | **No |** IP-1**| 8/8b | Is the | | | | M | | | r | | | | apping** | | | eference | | | | | | | point | | | | | | | between | | | | | | | two | | | | | | | Mission | | | | | | | Critical | | | | | | | Push To | | | | | | | Talk | | | | | | | Servers | | | | | | | that | | | | | | | e.g. are | | | | | | | in | | | | | | | d | | | | | | | ifferent | | | | | | | admini | | | | | | | strative | | | | | | | domains. | | | | | | | It can | | | | | | | be used | | | | | | | when an | | | | | | | MCPTT | | | | | | | session | | | | | | | involves | | | | | | | users | | | | | | | from | | | | | | | multiple | | | | | | | administ | | | | | | | rations. | | | | | | | MCP-3 | | | | | | | uses the | | | | | | | IMS/SIP | | | | | | | core for | | | | | | | message | | | | | | | routeing | | +----------+----------+----------+----------+----------+----------+ | MCP-4 | **No |** n/a**| n/a | Is | | | | M | | | another | | | | apping** | | | r | | | | | | | eference | | | | | | | point | | | | | | | between | | | | | | | UE and | | | | | | | Mission | | | | | | | Critical | | | | | | | Push To | | | | | | | Talk | | | | | | | Server: | | | | | | | it is | | | | | | | used | | | | | | | e.g. for | | | | | | | r | | | | | | | eporting | | | | | | | the new | | | | | | | cell ID; | | | | | | | requests | | | | | | | to | | | | | | | switch | | | | | | | between | | | | | | | unicast | | | | | | | and | | | | | | | eMBMS | | | | | | | re | | | | | | | ception, | | | | | | | etc. It | | | | | | | is FFS | | | | | | | whether | | | | | | | this | | | | | | | r | | | | | | | eference | | | | | | | point | | | | | | | will be | | | | | | | needed, | | | | | | | or, this | | | | | | | inf | | | | | | | ormation | | | | | | | can be | | | | | | | carried | | | | | | | by MCP-1 | | | | | | | or | | | | | | | MCP-2. | | +----------+----------+----------+----------+----------+----------+ | MCP-5/Sh | **A |** n/a**| n/a | Is | DIAMETER | | | P1/AP9** | | | another | based | | | | | | r | | | | | | | eference | | | | | | | point | | | | | | | between | | | | | | | Mission | | | | | | | Critical | | | | | | | Push To | | | | | | | Talk | | | | | | | Server | | | | | | | and the | | | | | | | PS-UDF: | | | | | | | It is | | | | | | | used for | | | | | | | p | | | | | | | roviding | | | | | | | user | | | | | | | identity | | | | | | | info | | | | | | | rmation, | | | | | | | and for | | | | | | | su | | | | | | | pporting | | | | | | | end to | | | | | | | end | | | | | | | media | | | | | | | enc | | | | | | | ryption. | | | | | | | It is | | | | | | | FFS | | | | | | | whether | | | | | | | this | | | | | | | r | | | | | | | eference | | | | | | | point | | | | | | | will be | | | | | | | needed | | +----------+----------+----------+----------+----------+----------+ | un | **No | * | 8/8b | Media, | RTP | | labelled | m | *POC-4** | | Talk | | | | apping**| | | Burst | RTCP | | | | | | Control | | | | | | | and | MSRP | | | | | | Media | | | | | | | Burst | RTSP | | | | | | Control | | | | | | | between | The | | | | | | networks | Co | | | | | | | ntinuous | | | | | | | Media | | | | | | | t | | | | | | | ransport | | | | | | | utilizes | | | | | | | RTP | | | | | | | p | | | | | | | rotocol. | | | | | | | Talk | | | | | | | Burst | | | | | | | Control | | | | | | | Protocol | | | | | | | and | | | | | | | Media | | | | | | | Burst | | | | | | | Control | | | | | | | Protocol | | | | | | | utilize | | | | | | | RTCP APP | | | | | | | message | | | | | | | p | | | | | | | rotocol. | | | | | | | The | | | | | | | Discrete | | | | | | | Media | | | | | | | t | | | | | | | ransport | | | | | | | utilizes | | | | | | | the MSRP | | | | | | | protocol | | | | | | | The | | | | | | | Media | | | | | | | S | | | | | | | treaming | | | | | | | Control | | | | | | | utilizes | | | | | | | RTSP | | | | | | | p | | | | | | | rotocol. | +----------+----------+----------+----------+----------+----------+ | un |** n/a**| ** | A5 | Si | This is | | labelled | | POC-16** | | gnalling | between | | | | | | to start | the | | | | | | the | BM-SC | | | | | | mul | and the | | | | | | ticast/b | EPC | | | | | | roadcast | (MBMS | | | | | | service | GW). The | | | | | | in the | BM-SC is | | | | | | access | now | | | | | | network | broken | | | | | | | out from | | | | | | | the PoC | | | | | | | Server. | +----------+----------+----------+----------+----------+----------+ | Not | **n/a** | ** | n/a | Si | | | shown | | POC-17**| | gnalling | | | | | | | to | | | | | | | connect | | | | | | | to the | | | | | | | mul | | | | | | | ticast/b | | | | | | | roadcast | | | | | | | service | | | | | | | in the | | | | | | | access | | | | | | | network | | +----------+----------+----------+----------+----------+----------+ |** Gm**|** No | * | n/a | XDMC to | | | | m | _XDM-1_ _| | SIP/IP | | | | apping_ _| | | Core | | +----------+----------+----------+----------+----------+----------+ |__ISC_ _|__No | * | n/a | Group | | | | m |_ XDM-2**| | XDMS to | | | | apping** | | | SIP/IP | | | | | | | Core, | | | | | | | List | | | | | | | XDMS to | | | | | | | SIP/IP | | | | | | | Core and | | | | | | | Policy | | | | | | | XDMS to | | | | | | | SIP/IP | | | | | | | Core | | +----------+----------+----------+----------+----------+----------+ | **GM |** AS5**| * | n/a | XDMC to | | | F-1/Ut** | | _XDM-3_ _| | Agg | | | | | | | regation | | | | | | | Proxy/ | | | | | | | XDMS | | +----------+----------+----------+----------+----------+----------+ | * |__AP6_ _| ** | n/a | PoC | XCAP | |_ GMF-2**| | XDM-14** | | Server | | | | | | | to XDMSs | | | | | | | (i.e., | | | | | | | List | | | | | | | XDMS, | | | | | | | Group | | | | | | | XDMS and | | | | | | | Policy | | | | | | | XDMS) | | +----------+----------+----------+----------+----------+----------+ | * | **No |** N/A**| 8/8b | Is the | | | *GMF-3** | m | | | r | | | | apping**| | | eference | | | | | | | point | | | | | | | between | | | | | | | two | | | | | | | Group | | | | | | | Ma | | | | | | | nagement | | | | | | | F | | | | | | | unctions | | | | | | | that | | | | | | | e.g. are | | | | | | | in | | | | | | | d | | | | | | | ifferent | | | | | | | admini | | | | | | | strative | | | | | | | domains. | | | | | | | It can | | | | | | | be used | | | | | | | when a | | | | | | | us | | | | | | | er-group | | | | | | | involves | | | | | | | users | | | | | | | from | | | | | | | multiple | | | | | | | administ | | | | | | | rations. | | +----------+----------+----------+----------+----------+----------+ | * |** No | * | n/a | The | | | _GMF-4_ _| m |_ XDM-2**| | r | | | | apping** | | | eference | | | | | | | point | | | | | | | between | | | | | | | the | | | | | | | Group | | | | | | | Ma | | | | | | | nagement | | | | | | | Function | | | | | | | and the | | | | | | | IMS Core | | +----------+----------+----------+----------+----------+----------+ | * | **No | n/a | n/a | The | OMA PCPS | | *GMF-5** | m | | | r | does not | | | apping**| | | eference | utilize | | | | | | point | the HSS | | | | | | between | or | | | | | | the | PS-UDF. | | | | | | MCPTT | The XDMS | | | | | | Group | has the | | | | | | Ma | su | | | | | | nagement | bscriber | | | | | | Server | based | | | | | | and the | data for | | | | | | PS-UDF. | PCPS. It | | | | | | The | is FFS | | | | | | GMF-5 | whether | | | | | | r | this | | | | | | eference | r | | | | | | point | eference | | | | | | provides | point | | | | | | the | will be | | | | | | MCPTT | needed | | | | | | Group | | | | | | | Ma | | | | | | | nagement | | | | | | | server | | | | | | | with the | | | | | | | ca | | | | | | | pability | | | | | | | to | | | | | | | retrieve | | | | | | | keys and | | | | | | | user | | | | | | | specific | | | | | | | data. | | +----------+----------+----------+----------+----------+----------+ |** Mw**|** No | **IP-1** | IP-1 | Session | SIP | | (not | m | | goes | si | | | l | apping**| | over 9 | gnalling | | | abelled) | | | | between | | | | | | | networks | | +----------+----------+----------+----------+----------+----------+ | * | AS-6 | n/a | A3 | The | PCPS | | *MB2-C** | | | r | Si | arch | | | | | eference | gnalling | itecture | | | | | point | r | assumes | | | | | | eference | that the | | | | | | point | BM-SC is | | | | | | between | in | | | | | | the | tegrated | | | | | | MCPTT | with the | | | | | | App | PoC | | | | | | lication | Server | | | | | | Server | | | | | | | and the | | | | | | | BM-SC. | | +----------+----------+----------+----------+----------+----------+ | * | AS3-2, | n/a | n/a | The | PCPS | | _MB2-U_ _| AS4-2 | | | media | arch | | | | | | r | itecture | | | | | | eference | assumes | | | | | | point | that the | | | | | | between | BM-SC is | | | | | | the | in | | | | | | MCPTT | tegrated | | | | | | App | with the | | | | | | lication | PoC | | | | | | Server | Server | | | | | | and the | | | | | | | BM-SC. | | +----------+----------+----------+----------+----------+----------+ |__Cr_ _| AP3/AP4 | n/a | n/a | The | PCPS | | | | | | r | arch | | | | | | eference | itecture | | | | | | point | assumes | | | | | | between | that the | | | | | | MCPTT | MRF is | | | | | | App | in | | | | | | lication | tegrated | | | | | | Server | with the | | | | | | and MRF. | PoC | | | | | | The Cr | Server | | | | | | r | | | | | | | eference | | | | | | | point | | | | | | | allows | | | | | | | int | | | | | | | eraction | | | | | | | between | | | | | | | an | | | | | | | App | | | | | | | lication | | | | | | | Server | | | | | | | and an | | | | | | | MRF. | | +----------+----------+----------+----------+----------+----------+ |__Mr'__| No | n/a | n/a | The | PCPS | | | mapping | | | r | arch | | | | | | eference | itecture | | | | | | point | assumes | | | | | | between | that the | | | | | | MCPTT | MRF is | | | | | | App | in | | | | | | lication | tegrated | | | | | | Server | with the | | | | | | and MRF. | PoC | | | | | | Mr\' | Server | | | | | | i | | | | | | | nterface | | | | | | | allows | | | | | | | an | | | | | | | App | | | | | | | lication | | | | | | | Server | | | | | | | and an | | | | | | | MRF to | | | | | | | exchange | | | | | | | session | | | | | | | control | | | | | | | messages | | | | | | | without | | | | | | | passing | | | | | | | through | | | | | | | an | | | | | | | S-CSCF. | | +----------+----------+----------+----------+----------+----------+ |__Rx_ _| AS7 | n/a | A4 | The | PCPS | | | | | r | r | arch | | | | | eference | eference | itecture | | | | | point | point | doesn't | | | | | | between | cover | | | | | | the | in | | | | | | P-CSCF | terfaces | | | | | | and the | between | | | | | | PCRF. | the | | | | | | The Rx | SIP/IP | | | | | | r | core and | | | | | | eference | the | | | | | | point | access | | | | | | enables | network. | | | | | | t | | | | | | | ransport | Consi | | | | | | of | deration | | | | | | app | of an | | | | | | lication | ad | | | | | | level | ditional | | | | | | session | direct | | | | | | inf | Rx | | | | | | ormation | i | | | | | | from the | nterface | | | | | | P-CSCF | between | | | | | | to the | the PCRF | | | | | | PCRF. | and the | | | | | | | PTT | | | | | | | App | | | | | | | lication | | | | | | | would | | | | | | | need to | | | | | | | be | | | | | | | studied. | +----------+----------+----------+----------+----------+----------+ |__Cx_ _| AP7 | n/a | n/a | The | DIAMETER | | | | | | r | based | | | | | | eference | | | | | | | point | | | | | | | between | | | | | | | the | | | | | | | PS | | | | | | | -UDF/HSS | | | | | | | and the | | | | | | | S-CSCF | | | | | | | which is | | | | | | | used for | | | | | | | s | | | | | | | upplying | | | | | | | the | | | | | | | service | | | | | | | profile | | | | | | | inf | | | | | | | ormation | | | | | | | (i | | | | | | | ncluding | | | | | | | user | | | | | | | idn | | | | | | | etities) | | +----------+----------+----------+----------+----------+----------+ |__Not | AP5 | n/a | n/a | Supports | PCPS | | Shown_ _| | | | control | arch | | | | | | for | itecture | | | | | | resource | uses IMS | | | | | | ma | me | | | | | | nagement | chanisms | | | | | | for PTT | for | | | | | | services | resource | | | | | | | ma | | | | | | | nagement | | | | | | | for SIP | | | | | | | ne | | | | | | | gotiated | | | | | | | bearers | +----------+----------+----------+----------+----------+----------+ |__n/a_ _| AP8 | n/a | n/a | I | In 3GPP | | | | | | nterface | the | | | | | | for SIP | S-CSCF | | | | | | regi | contains | | | | | | stration | both the | | | | | | function | r | | | | | | to the | egistrar | | | | | | SIP | and the | | | | | | Routing | routing | | | | | | Function | function | +----------+----------+----------+----------+----------+----------+ |__Not | AS1 | n/a | n/a | Support | SA3 | | Shown_ _| | | | user | should | | | | | | Identity | look at | | | | | | function | this. | | | | | | i | | | | | | | nterface | | | | | | | to the | | | | | | | client | | | | | | | for log | | | | | | | on | | | | | | | purposes | | | | | | | (e.g. | | | | | | | for | | | | | | | single | | | | | | | sign on) | | +----------+----------+----------+----------+----------+----------+ |__Not | AS9 | n/a | n/a | Supports | SA3 | | Shown_ * | | | | Key | should | | | | | | Dist | look at | | | | | | ribution | this. | | | | | | to | AS9 may | | | | | | Client | not be | | | | | | for end | required | | | | | | to end | if SIP | | | | | | en | or | | | | | | cryption | another | | | | | | | t | | | | | | | ransport | | | | | | | i | | | | | | | nterface | | | | | | | can be | | | | | | | used | +----------+----------+----------+----------+----------+----------+
##### 5.2.1.1.5 New Functional Entities
###### 5.2.1.1.5.1 The Public Safety User Data Function (PS-UDF)
###### # 5.2.1.1.5.1.1 General
The PS-UDF is the master database for a Public Safety user. It is the entity
containing the Public Safety user information to support the network entities
actually handling MCPTT calls.
The IMS may access the PS-UDF within a Public Safety network instead of a HSS
in the Home network: as an example, the PS-UDF provides support to the call
control servers in order to complete the routing/roaming procedures by solving
authentication, authorisation, naming/addressing resolution, location
dependencies, etc.
The PS-UDF is responsible for holding the following user related information:
\- User Identification, Numbering and addressing information;
\- User Security information: Network access control information for
authentication and authorization;
\- User Location information at inter-system level: the PS-UDF supports the
user registration, and stores inter-system location information, etc.;
\- User profile information.
The PS-UDF also generates User Security information for mutual authentication,
communication integrity check and ciphering.
Based on this information, the PS-UDF also is responsible to support the call
control and session management entities of the IMS.
{width="4.010416666666667in" height="2.0416666666666665in"}
Figure 5.2.1.1.5.1.1-1: Example of a PS-UDF structure and basic interfaces
The PS-UDF consists of the following functionalities:
\- IP multimedia functionality to provide support to control functions of the
IMS such as the CSCF. It is needed to enable subscriber usage of the IMS
services. This IP multimedia functionality is independent of the access
network used to access the IMS.
\- The AuC functionality required by the IMS to authenticate the MCPTT UE and
generate keys for checking the integrity of the communication between the
MCPTT UE and the MCPTT AS and to cipher communication between the MCPTT UE and
the MRF.
The organisation of the subscriber data is outlined in 3GPP TS 23.008 [19]. It
also indicates which numbers, addresses and identifiers specified in 3GPP TS
23.003 [18] are stored in PS-UDF.
###### # 5.2.1.1.5.1.2 PS-UDF logical functions
The following is a list of high level PS-UDF logical functions.
{width="6.3125in" height="5.041666666666667in"}
Figure 5.2.1.1.5.1.2-1: PS-UDF logical functions
\- Mobility Management
This function supports the user mobility through the IMS.
\- S-CSCF assignment support
The PS-UDF provides to the I-CSCF the required capabilities for Public Safety
Services based on Public Safety Agency requirements on a per-user basis, (e.g.
whether a particular S-CSCF within the operator's network (e.g. a S-CSCF
reserved for Public Safety use or a S-CSCF in a secure location) or a S-CSCF
within the Public Safety Agency network is assigned.
\- Call and/or session establishment support
The PS-UDF supports the call and/or session establishment procedures in the
IMS. For terminating traffic, it provides information on which S-CSCF
currently hosts the user.
\- User security information generation
The PS-UDF generates user authentication, integrity and ciphering data for the
IMS.
\- User security support
The PS-UDF supports the authentication procedures to access IMS services by
storing the generated data for authentication, integrity and ciphering and by
providing these data to the appropriate S-CSCF.
\- User identification handling
The PS-UDF provides the appropriate relations among all the identifiers
uniquely determining the user in the IMS (e.g. public identities for IMS).
\- Access authorisation
The PS-UDF authorises the user for mobile access when requested by the CSCF,
e.g. by checking that the user is allowed to roam to that visited network.
\- Service authorisation support
The PS-UDF provides basic authorisation for MT call/session establishment and
service invocation. The PS-UDF updates the S-CSCF with filter criteria to
trigger the services to be provided to the user by Public Safety Application
Servers (e.g. MCPTT Server).
\- Service Provisioning Support
The PS-UDF provides access to the service profile data for use within the IMS
Application Services (e.g. MCPTT Server and Group Management Function).
The PS-UDF communicates with the MCPTT Server and Group Management Function to
support MCPTT Services in the IMS.
###### 5.2.1.1.5.2 The MCPTT Application Server (MCPTT AS)
The MCPTT AS contains the master logic responsible for MCPTT call control and
management and the destination for SIP routing related to MCPTT calls. The
MCPTT AS is a SIP Application Server in the IMS architecture, which can be
further de-composed into Group Host Function and Home Serving Function, to
support MCPTT users belonging in multiple network.
\- Group Host Function -- the function within the MCPTT AS, responsible for
hosting the MCPTT Group call. This is equivalent to Controlling Function (CF)
in OMA PCPS Architecture Document [14].
\- Home Serving Function - the function within the MCPTT AS of the MCPTT user
to whom the MCPTT service is being served. This is equivalent to Participating
Function (PF) in OMA PCPS Architecture Document [14].
Depending on the deployment models, the MCPTT AS may perform the role of Group
Host Function or Home Serving Function or both. Figure 5.2.1.1.5.2-1
illustrates a scenario where a MCPTT Group is hosted in Network-3, and
contains users belonging to Network-1 and Network-2.
Figure 5.2.1.1.5.2-1: MCPTT AS -- Group Host Function and Home Serving
Function
\- Home Serving Function implemented in a MCPTT AS, provides MCPTT call
handling, including relaying Media and Floor Control messages between the
MCPTT UE and the MCPTT AS performing the Group Host Function.
\- Group Host Function implemented in a MCPTT AS, acts as a B2BUA, provides
centralized group call handling, which includes Media distribution, Floor
Control, policy enforcement for users participating in the MCPTT Group call,
and sharing of Talker identification information to the MCPTT Group call
participants.
###### 5.2.1.1.5.3 The MCPTT Server
The MCPTT Server is a superset of the MCPTT AS and the MRF. The MCPTT Server
is equivalent to the PoC Server in the OMA PCPS Architecture.
###### 5.2.1.1.5.4 Group Management Function (GMF)
The GMF contains provisioning information related to groups and mapping of
users to groups. The GMF is responsible for distribution of group information
to clients, and group-membership information for MCPTT services. The GMF is
based upon the Group XDMS.
Editor's note: Whether the GMF contains more functionality than just the Group
XDMS is FFS.
###### 5.2.1.1.5.5 XML Document Server (XDMS)
The MCPTT Service stores, modifies, and retrieves XML documents via the XDMS.
There are three applications for MCPTT within the XDMS:
  * List XDMS,
  * Policy XDMS; and
  * Group XDMS.
###### 5.2.1.1.5.6 MCPTT Interworking Function (MCPTT IWF)
The MCPTT IWF provides interworking with legacy networks and legacy devices
(e.g. P25, TETRA, TETRAPOL etc). When the interworking is with a legacy
network the MCPTT IWF behaves like a MCPTT AS/Group Management Function and
MRF from the perspective of the MCPTT network while behaving like legacy
network entities from the perspective of the legacy network. When the
interworking is with a legacy device the MCPTT IWF behaves like a MCPTT UE
from the perspective of the MCPTT network while behaving like legacy network
entities from the perspective of the legacy device.
#### 5.2.1.2 Procedures
##### 5.2.1.2.1 Registration information flow -- MCPTT UE not registered
The following flow shows the case where the MCPTT UE is not registered and is
roaming in a PLMN other than the PLMN that the MCPTT service provider has a
business relationship with and MCPTT roaming is achieved at the IMS layer. The
P-CSCF is in the visited PLMN and the I-CSCSF is in the HPLMN. The PS-UDF,
S-CSCF and MCPTT AS are in the Public Safety domain.
This flow is based upon the IMS registration flows in 3GPP TS 23.228 [13]
however the steps 3,4,5,6, 7, 10 and 11 differ since the I-CSCF interfaces to
the PS-UDF instead of the HSS. The PS-UDF resides in a different domain to the
I-CSCF whereas the HSS and the I-CSCF are always located in the same domain.
The S-CSCF in this scenario is located in the same domain as the PS-UDF. This
implies additional trust and security requirements on the Cx and Mw reference
points.
Figure 5.2.1.2.1-1: Registration -- MCPTT UE not registered
1\. After the MCPTT UE has obtained IP connectivity, it can perform the IM
registration. To do so, the MCPTT UE sends the Register information flow to
the P-CSCF (Public User Identity, Private User Identity, home network domain
name, UE IP address, Instance Identifier, GRUU Support Indication).
2\. Upon receipt of the register information flow, the P‑CSCF shall examine
the \"home domain name\" to discover the entry point to the home network (i.e.
the I‑CSCF). The P-CSCSF sends the Register information flow to the I‑CSCF
(P‑CSCF address/name, Public User Identity, Private User Identity, P‑CSCF
network identifier, UE IP address). A name-address resolution mechanism is
utilised in order to determine the address of the home network from the home
domain name. The P‑CSCF network identifier is a string that identifies at the
home network, the network where the P‑CSCF is located (e.g. the P‑CSCF network
identifier may be the domain name of the P‑CSCF network).
3\. The I‑CSCF needs to query the SLF to resolve the HSS. Since the private
user identity identifies a Public Safety MCPTT user subscription that has its
own PS-UDF instead of an HSS, the I-CSCF sends the Cx-Query/Cx-Select-Pull
information flow to the PS-UDF in the Public Safety domain (Public User
Identity, Private User Identity, P‑CSCF network identifier).
> The PS-UDF checks whether the user is registered already. The PS_UDF
> determines whether the user is allowed to register in that P‑CSCF network
> (identified by the P‑CSCF network identifier) according to the User
> subscription and operator limitations/restrictions if any.
4\. Cx-Query Resp/Cx-Select-Pull Resp is sent by the PS-UDF to the I‑CSCF. It
contains the S‑CSCF name (which is an S-CSCF located in the Public Safety
domain),
5\. The I‑CSCF, using the name of the S‑CSCF, determines the address to reach
the S‑CSCF through the name‑address resolution mechanism.
NOTE: The name-address resolution mechanism will likely resolve to an address
of an entity that is the entry point to the Public Safety domain (e.g. a
session border controller, IBCF) that interfaces to the S-CSCF, rather than an
actual S-CSCF.
The I‑CSCF then sends the register information flow (P‑CSCF address/name,
Public User Identity, Private User Identity, P‑CSCF network identifier, UE IP
address) towards the S‑CSCF. The I‑CSCF includes itself or another H-PLMN
entity on the Path in the register information.
The S‑CSCF stores the P‑CSCF address/name, as supplied by the visited network.
This represents the address/name that the home network forwards the subsequent
terminating session signalling to the UE. The S‑CSCF stores the P‑CSCF Network
ID information and the Path.
6\. The S‑CSCF sends Cx-Put/Cx-Pull (Public User Identity, Private User
Identity, S‑CSCF name) to the PS_UDF.
7\. The PS-UDF stores the S‑CSCF name for that user and returns the
information flow Cx-Put Resp/Cx-Pull Resp (user information) to the S‑CSCF
including the keys for authentication.
8\. The S-CSCF authenticates the MCPTT UE by sending an authentication
challenge to the MCPTT UE (\"401 Unauthorized\").
9\. The MCPTT UE sends a Register information flow containing the response to
the challenge, which follows the same path as the initial register to reach
the S-CSCF.
10\. The S-CSCF authenticates that the MCPTT UE returned the correct response
to the authentication challenge and sends Cx-Put/Cx-Pull (Public User
Identity, Private User Identity, S‑CSCF name) to the PS_UDF to indicate that
the MCPTT user is authenticated and registered.
11\. The PS-UDF stores the S‑CSCF address that the MCPTT user is registered.
12\. The S‑CSCF determines the Service Route based on the Path information and
returns the 200 OK information flow (home network contact information, a GRUU
set, Path and Service Route) to the MCPTT UE.
13\. The S‑CSCF sends register information to the MCPTT AS using the 3rd party
registration procedure.
14\. The MCPTT AS responds with a 200 OK and subscribes to the registration
event package using the Subscribe/Notify information flow.
15\. The MCPTT UE subscribes to the registration event package using the
Subscribe/Notify information flow.
16\. The S-CSCF responds to the subscriptions to the registration event
package with a 200 OK and notifications of the registration information.
##### 5.2.1.2.2 MCPTT interaction with telephony service
###### 5.2.1.2.2.1 Overview
The MCPTT AS performs policy check, based on MCPTT operator policy, to
determine if the session is allowed to continue toward the called party. The
MCPTT AS is inserted in the session path using originating and terminating
iFCs; it is configured as the first AS in the originating iFC and as the last
AS in the terminating iFC chain. For IMS telephony session, IMPU is used for
calling or called identity.
Editor's note: When the MCPTT operator and home network providers are not in
the same organization, it is FFS how telephony service can be realized with
IMPU.
###### 5.2.1.2.2.2 MO interaction
Figure 5.2.1.2.2.2-1 shows the session originating case where the MCPTT AS
checks the session INVITE from the MCPTT UE against the internal policy before
allowing the INVITE to continue. If policy does not allow call to be
continued, MCPTT AS returns an appropriate failure response to UE (e.g, 4xx).
Figure 5.2.1.2.2.2-1. MO policy check by MCPTT AS
1\. MCPTT UE is sending an INVITE to party B. The INVITE is sent to the
S-CSCF. Note: P-CSCF is not shown in the figure.
2; The S CSCF performs standard service control execution procedures. Filter
criteria direct the S CSCF to send the INVITE to the MCPTT AS.
3\. MCPTT AS checks its internal policy to determine is this session is
allowed to continue. If not, MCPTT AS rejects this INVITE with an appropriate
response code (4xx).
4-8 MCPTT AS allows the session to continue and route the INVITE back to
S-CSCF and continue normal IMS call flow based on current standard procedure
is 3GPP TS 23.228 [13] (e.g., route to next AS like TAS).
###### 5.2.1.2.2.3 MT Interaction
Figure 5.2.1.2.2.3-1 shows the session terminating case where the MCPTT AS
checks the session INVITE toward the MCPTT UE against the internal policy
before allowing the INVIT E to continue. If policy does not allow call to be
continued, MCPTT AS returns an appropriate failure response to the sender
(e.g, 4xx).
Figure 5.2.1.2.2.3-1: MT policy check by MCPTT AS
1\. An terminating INVITE toward UE is received by S-CSCF. Note: I-CSCF is not
shown in the figure.
2-3 The S CSCF performs standard service control execution procedures. Filter
criteria direct the S CSCF to send the INVITE to the TAS (Telephony
Application Server) to perform any terminating service handling if any.
4\. TAS continues the session by routing the INVITE to S-CSCF.
5\. Filter criteria direct the S CSCF to send the INVITE to the MCPTT AS.
6\. MCPTT AS checks its internal policy to determine is this session is
allowed to continue. If not, MCPTT AS rejects this INVITE with an appropriate
response code (4xx).
7-8 MCPTT AS allows the session to continue and route the INVITE back to
S-CSCF and continue normal IMS terminating call flow based on current standard
procedure is 3GPP TS 23.228 [13] (e.g., route the INVITE to UE via P-CSCF).
#### 5.2.1.3 Impact on existing entities and interfaces
OMA PCPS functions will need to be enhanced to meet the additional
requirements of 3GPP TS 22.179 [2].
3GPP TS 23.002 [12] will need to be enhanced to define the PS-UDF, MCPTT
server and other MCPTT application entities.
3GPP TS 23.228 [13] will need to be enhanced:
\- to indicate the possibility for an IBCF to be between the I-CSF and the
S-CSCF; and
\- for the use of the PS-UDF and Cx inter-domain.
#### 5.2.1.4 Solution evaluation
This solution meets all the requirements of subclause 4.2.1, subclause 4.2.2,
subclause 4.2.3 and subclause 4.2,4.
Application plane requirements for user identity management, group affiliation
and group call can be supported.
This solution supports all of the deployment scenarios in annex B.
The reuse of IMS, as proposed in this solution, already provides for the
functionalities and capabilities listed in subclause 5.2.1.1.2.1 of the
present document.
Entities and interfaces described within this solution should be considered to
be brought forward into the normative clauses of 3GPP TS 23.179 [28].
### 5.2.2 Solution 2-2: NGCN-based architecture
#### 5.2.2.1 Functional Description
This solution focuses on the situation where the UE is in contact with the
network. It is intended to be complementary to ProSe solutions that describe
the out of coverage cases, and, the UE-to-network relay cases.
Based on the architectural requirements in subclause 4.2 and the existing 3GPP
architecture for the support of Next Generation Corporate Networks (NGCN), a
generic high-level architecture is shown in figure 5.2.2.1-1, below. Only the
signalling plane has been represented for simplicity. Media is following a
similar path.
Figure 5.2.2.1-1: Example of NGCN-based architecture for MCPTT applications
Editor's note: Details of southbound interface are FFS.
Figure 5.2.2.1-1 represents two MCPTT applications connected to two IMS for
PLMN 1 and 2 using the peering mode Application 1 is also directly connected
to PLMN 1' (without intermediate IMS) while application 2 is connected to a
corporate Wi-Fi network.
Figure 5.2.2.1-2 below illustrates the internal architecture of the MCPTT
application.
Figure 5.2.2.1-2: Internal architecture of MCPTT application
NOTE: The versions of Ici, Izi and Gm in the above figure are assumed to
include all the enhancements required for the proper support of MCPTT features
The CN gateway contains a SIP routing function, an HTTP proxy function and a
Media gateway. The SIP proxy function allows the routing of SIP signalling
from/to the MCPTT client in the UE to/from the SIP based functional entities
in the MCPTT application. The SIP routing function is complemented by an HTTP
proxy function in order to proxy some non-SIP based signalling, for example
XML document management through HTTP/xcap.
The media gateway functionality is provided via media (PTT) control and a
media distribution function transporting media and associated control from/to
the MCPTT client over unicast and broadcast bearers. The media gateway
functionality also includes a resource management function interfaced with the
PCRF and BM-SC (Rx and MC2-C interfaces) for setup, release and QoS control of
the media unicast and broadcast bearers.
The SIP Registrar maintains the SIP registrations of the MCPTT clients. It
interacts with the User identity function in charge of the management of the
appropriate credentials.
The Group Management function contains provisioning information related to the
groups and the mapping of the users to groups. It is in charge of the
distribution of group related information to the MCPTT clients and of group
membership to the PTT Services function.
The Security management function is in charge of policy and key management for
media, whether individual or group related. It is for example in charge of key
distribution.
The PTT Services function contains the main logic for the MCPTT function and
interacts with the other functional entities and the MCPTT client (through the
proxy and gateway functions) for the provision of the MCPTT services. It is
responsible for call control, routing, timer management, resource control,
including priority management, queuing and pre-emption, configuration and
settings management, floor arbitration logic, etc.
Northbound and East bound CN GWs have a similar architecture as southbound CN
GW towards another MCPTT application or an IMS core, respectively.
Editor's note: Actual routing of media through an IMS core towards a MCPTT
client is FFS.
#### 5.2.2.2 Procedures
Several procedures are presented below, illustrating the behaviour of the
proposed solution.
Figure 5.2.2.2-1: Registration procedure
It is to be noted that the registration request is directed to a home domain
name, which is administered by NGCN and is not in the IMS operator domain. See
3GPP TS 24.525 [10] Annex A. The subscription represented in the figure above
relates to the \"reg\" event package to allow the MCPTT UE to be notified in
case of network initiated de-registration.
It is also to be noted that the security algorithms are those supported by
P-CSCF even if the exchange of credentials is end to end between the MCPTT UE
and the MCPTT application.
The only difference between the procedure for PLMN1 (with IMS) and PLMN1'
(without PLMN) is that the address of P-CSCF will provided as part of the PDN
attachment data, while the address of the corresponding CNGW shall be
discovered by DNS search after the PDN attachment.
Due to the transparent SIP routing performed by the IMS in the NGCN peering
mode, the same procedure applies for a very large number of routing cases,
subject to proper DNS programming of the various intermediate networks. For
example:
\- UE->P-CSCF (IMS1)->ICBF (IMS1)->CNGW (App1)
\- UE->CNGW (App1)
\- UE->P-CSCF (IMS2)->ICBF (IMS2)->ICBF (IMS1)->ICBF (IMS1)->CNGW (App1)
\- UE->CNGW (App2)->CNGW (App2)->CNGW (App1)
\- ...
Other INVITEs, SUBSCRIBEs, PUBLISHs are routed similarly. In particular,
INVITE to addresses outside the administrative domain of the NGCN and having a
Route header will be routed to the NGCN, which will then route them to the
final destination by forwarding them back to the IMS domain. This applies for
VoLTE call for example.
Editor's note: Management of potential NAT traversals is FFS.
Service continuity in case of change of access network with allocation of a
new IP address relies on SIP session restoration (re-INVITE with updated SDP)
after re-registration as required.
#### 5.2.2.3 Impact on existing entities and interfaces
Some minor enhancements of Gm (Gm*) and consequently of P-CSCF may be
required, for example:
\- Additional transports
\- Additional authentication and encryption algorithms
\- Management of specific URNs for routing of emergency calls
\- Support of end-to-end encrypted media in SDP bodies
#### 5.2.2.4 Solution evaluation
This solution shares significant commonalities with solution 2-4 but does not
present a confidentiality solution for untrusted underlying SIP core. Solution
2-2 is thus superseded by solution 2-4.
### 5.2.3 Solution 2-3: Generic high level architecture for MCPTT within a
public safety ecosystem with user-based services application sublayer
#### 5.2.3.1 Functional description
This solution presents the MCPTT application within the broader context of a
Public Safety Ecosystem that includes other applications of interest for
Public Safety, e.g. Video, Computer Aided Dispatch. Those applications are
supported by a User-base Services sublayer within the Application Layer
providing support for common functionalities, e.g. identity management, group
management.
The \"off-network\" cases (e.g. ProSe and relays) for MCPTT are not
illustrated here. Nor are details for applications other than MCPTT (e.g.
Video) presented, beyond the generic architectural view. However, support for
these aspects can be added onto this layered structure.
Some salient features of this solution are:
1) Full compatibility with 3GPP standard architecture for network and
transport layers, according to 3GPP TS 23.401 [11].
2) Clear separation of the network and transport layer from the application
and services layers
3) The Application space is divided into two sublayers. The upper sublayer
provides the end user applications, with MCPTT being only one example. The
lower sublayer offers user-based enabler services that are designed to provide
secure interoperability and mission-critical behaviour to applications.
4) Web Services and other APIs access to User-based Services sublayer
5) Presentation within the UE of the corresponding structure, partitions and
modules available in the infrastructure
6) Detailing interfaces conceptually separated to indicate signalling (e.g.
call setup/tear down), floor control (e.g. floor grant/revoke) and user
traffic (e.g. voice packets).
7) Full presentation of the point-to-multipoint (MBMS) path between the
infrastructure and the UEs.
8) Application Layer NNI for communications between separate Public Safety
domains
Note also that this solution, although focused on mission critical
applications for Public Safety, is generic enough not to preclude other
applications.
This approach is illustrated in figure 5.2.3.1-1 below.
Figure 5.2.3.1-1: High Level Architecture for Mission-Critical Applications
(e.g. MCPTT) within a PS Ecosystem
Although the focus of the current work item is for the **MCPTT application** ,
a general architecture solution needs to support other applications that have
different characteristics from an MCPTT application. Two examples shown in
figure 5.2.3.1-1 are **CAD** (Computer Aided Dispatch) messaging and **Video
streaming**. The Private Telephony and Video Application functions are
alternatives to similar functions that may reside in the Network, but may
choose to be provided by the PS Operator because of policy. A variety of other
applications are required to support public safety operations, e.g. location
mapping, license plate recognition, and body sensors. Unlike MCPTT, these
applications might not be SIP-based but still need to rely on common services
described below.
In addition, it is also important to recognize the other function that the
MCPTT application server interacts with. Those include clients on the UE,
other MCPTT application servers and other entities, two of which are shown in
figure 5.2.3.1-1: **Dispatch Console** and **legacy LMR** systems (e.g. P25
and TETRA).
Here is a brief exemplary description of the functionality provided by
entities within the User-based enabler services:
**User Priority and QoS** handles application-level priority, pre-emption and
QoS needs, based on various static and dynamic factors and requesting the
appropriate parameters when establishing service data flows necessary for a
specific application.
**Group Management** tracks the users and devices that are associated with
specific groups and allow this information to be shared among various
applications.
**Identity Management** provides services related to user authentication
(including users with multiple personalities and devices and users supported
by a common device) and identity attributes.
**User Registration and Routing** is responsible for providing general
registration services and facilitating the necessary routing of messages from
UEs to application servers and between application servers. Many mission
critical applications and services will not be SIP based. In order to provide
efficient scalability for mission critical service, media plane is separated
from the control plane.
For simplicity of figure 5.2.3.1-1, only interfaces directly relevant to
supporting the MCPTT application are identified, including both the well-known
interface between various 3GPP components, as well as proposed application-
level interfaces. The following provides an overview of the application-level
interfaces.
The reference points PTT1/PTT1c, PTT2/PTT2c, and PTT3/PTT3c collectively
represent the signalling and user traffic between the MCPTT application server
and the corresponding client, whether located within a UE or other end-user
device, such as a Dispatch Console. Data exchanges with the Dispatch Console
may be seen as a superset of the data exchanged with UEs.
PTT1/PTT1c: Reference point PTT1 represents the control plane signalling
needed for establishing MCPTT sessions, supporting service registration, and
similar control-related functionality.
PTT2/PTT2c: Reference point PTT2 represents the floor control signalling
needed to arbitrate floor ownership within an MCPTT call.
PTT3/PTT3c: Reference point PTT3 specifically represents the media plane
traffic for conveying voice during an MCPTT call. It is envisioned this
reference point will need to support multiple codecs, including codecs
supported by legacy LMR systems.
The reference points PTT4 and UBS collectively represent the signalling
between separate Public Safety domains.
PTT4: Reference point PTT4 supports the signalling between separate MCPTT
applications. .
UBS: The UBS reference point supports the signalling between separate User-
based services.
The reference points LMR1 and LMR2 collectively represent the signalling and
user traffic between the MCPTT application server and legacy LMR systems.
Multiple versions of these reference points may be necessary to support
different types of LMR systems including both P25 and TETRA.
Editor's note: It is FFS whether a gateway should sit between the LMR system
and the MCPPT application server allowing common reference points to the MCPPT
application server for all LMR system, possibly leveraging reuse of reference
point PTT4.
LMR1: The LMR1 reference point consists of the control plane signalling need
to support registrations, group affiliation, PTT calls, and similar
functionality.
LMR2: The LMR2 reference point consists of the media distributed for a PTT
call as well as embedded signalling for floor arbitration and related
information typical with legacy LMR systems.
Editor's note: It if FFS whether the floor arbitration and related control
information can be separated from the media as separate reference points.
The reference points Qu-AF, GM, IM and URR represent at least some of the APIs
and signalling to the user-based services necessary to support applications
(including MCPTT) and facilitate some interworking necessary among different
applications. Analogous reference points, e.g. Qu-UE, IM-UE, etc. between the
user services client in the UE and the User-based Services in the
infrastructure may exist, but they are not shown here, to keep figure
5.2.3.1-1 simpler.
Qu-AF: The Qu-AF reference point is used for both application-level influence
on the priority, pre-emption and QoS variables for users and groups of users
when requesting and/or changing both unicast and broadcast service data flows.
GM: The GM reference point identifies the API related to Group Management
signalling needed by the application server. As an example, this interface
will be used to allow the MCPTT application to indicate group affiliations,
which take place in order to allow other applications to learn of the users
associated with a particular group.
IM: The IM reference point identifies the API related to Identify Management
signalling.
URR: The URR reference point supports the signalling between the User
Registration and Routing service and applications, including the MCPTT
Application.
The User Registration and Routing entity works closely with the Identity
Manager to provide authentication and security services for the user. Once a
security association is established, the URR can discover the target user via
client registration. Upon a device getting authenticated and obtaining
authorized access to the network operator's EPS, the Identity Manager can be
accessed. Load balancing may involve well known techniques that could be
applied: a list of potential destinations can be pre-loaded and chosen pseudo-
randomly, overloaded servers can redirect traffic to underloaded ones, etc.
The need for standard load balancing solutions may arise from multivendor,
mixed public safety and commercial network operator deployment scenarios.
Traffic routing is done through the operators' networks taking in account
security and QoS aspects. In the case of interconnectivity with similar
services the UBS and PTT4 interfaces can be used, while LMR1 and LMR2 are the
generic interfaces (out of scope here) to legacy systems like P25 and TETRA.
Media Management is a user plane function handling the duplication and
distribution of voice packets, and, potentially decryption, transcoding and
re-encryption. Floor control functionality can also be placed there. In figure
5.2.3.1-1, the entity is shown within the bounds of the MCPTT Application
Server, but this is simply a representational choice as the functionality can
be moved outside, can be split between control and execution modules or can be
combined with Media Management entities involved in other services.
The User Priority and QoS (P&QoS) entity within the User-Based Services
sublayer arbitrates among various requests for service from several user
applications and translates them into coherent and coordinated requests for
resources made to the PCRF and the BMSC. Each P&QoS entity is primarily
responsible for handling resources requests from the local applications, but
can also be connected via a sub-interface of the UBS interface with peer P&QoS
entities and thus, indirectly capable of handling remote requests. The Rx
interface (and the PCRF / PCEF) may be enhanced to allow them to handle in an
atomic manner group requests for a large number of resources, in order to
allow, rapid and consistent dispatching for MCPTT groups with very numerous
users.
Common daily Public Safety communications may not involve roaming, as they
usually occur within local jurisdictions. As part of 'mutual aid' scenarios,
communications may occur in neighboring jurisdictions, which many still be
served by the same network operator. For the cases when roaming occurs,
services can be provided from the home system, or from the visited system
(e.g. local break-out). Roaming agreements at the IP layer between network
operators will be required for global roaming cases in order to receive
appropriate Public Safety QoS. Communications over the PTT4 interface are also
available for application level inter-network connectivity.
This solution prescribes dual and independent authentication of the devices
and of the users. Devices are MCPTT UEs which contain UICC and have
corresponding subscriptions stored in the HSS within the network operator's
domain. Once the UE is authenticated and access is gained to the network, the
MCPTT client on the UE contacts an Identity Manager which uses credentials
provided by the user to perform user authentication, e.g. by using Oauth and
TLS tunnels. The authentication token will be stored in the UE and forwarded
to the URR where the association between the user and the UE are maintained.
After user authentication, session keys can be generated and used. In general
there may be separate trust domains: between the UE and the Identity Manager,
between the UE, the URR and the application servers, and the trust domain
offered by the EPS network operator. In practice, implementations may be
simpler, with several entities playing multiple roles that allow the combining
of the trust domains and allows sharing of confidential information between
them as well as using and processing of this information according to
established policies.
Neither VoLTE nor PSTN are part of MCPTT, but it is reasonable for users to
expect to be able to make / receive telephony calls from the same devices that
are used for MCPTT service. As shown in figure 5.2.3.1-1, the architecture is
flexible and allows the system to take advantage of the services provided by
the EPS network operator. In addition, Private Telephony functionality may be
offered via an application entity which may support direct connection to the
EPS network operator's infrastructure (e.g. IMS) used to provide the service.
The same principle applies to other non mission critical services, whether
IMS-based or not.
#### 5.2.3.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
For the follow procedures the functional entities of the functional model from
subclause 5.2.3.1 are better described here.
**User Services Core (USC) Identity Management Function** is the function in
the USC that is responsible for authentication of the MCPTT User. It contains
the knowledge and means to do authentication by verifying the primary
credentials supplied by the user.
**User Services Client** is the client in the MCPTT UE that interacts with the
User Services Core in the public safety application domain. It is a common
client on the MCPTT UE for services from the USC such as Identity Management.
NOTE: Flow 5.2.3.2.1 is an example flow only. SA3 is responsible for defining
the specific security and authentication mechanisms required by the MCPTT
service in order to realize the MCPTT user authentication requirements as
defined in 3GPP TS 22.179 [2].
NOTE: Flow 5.2.3.2.3 is an example flow only. SA3 is responsible for defining
the specific security and authentication mechanisms required by the MCPTT
service in order to realize the MCPTT user authentication requirements as
defined in 3GPP TS 22.179 [2].
##### 5.2.3.2.1 Detailed user authentication procedure information flow
Figure 5.2.3.2.1-1: Detailed User Authentication, single domain
1\. The MCPTT UE MCPTT Client begins the user authorization procedure.
2\. The MCPTT UE MCPTT Client sends an Access Token Request scoped to the
MCPTT service to the MCPTT UE User Services Client.
3\. The MCPTT UE User Services Client begins its authorization procedure,
establishing a TLS session and connection with USC Identity Management. Server
certificates are used to authenticate the server to the client. All subsequent
HTTP messages in this flow use this TLS tunnel (i.e., https).
4\. The User Services Client sends an HTTP GET message including parameters
response_type=token, client_id=xyz, scope=mcptt_service and a redirect URI as
per IETF RFC 6749 [20] \"The Oauth 2.0 Authorization Framework\".
5a. USC Identity Management initiates the user authentication procedure.
5b. Identity Management sends a HTTP 200 OK message, providing form data for
obtaining the user's authentication credentials.
5c. The user provides his/her authentication credentials to the MCPTT UE User
Services Client.
5d. The MCPTT User Services Client sends a HTTP POST message, containing the
user's input, including the user's authentication credentials, to the form
provided in step (5c).
6\. USC Identity Management sends a HTTP 302 FOUND Access Token Response (see
IETF RFC 6749 [20]) which includes the Access Token, redirect URI and
parameters scope=mcptt_service and expires_in=3600.
7\. The User Services Client sends an Access Token Indication to the MCPTT
Client containing the Access Token.
##### 5.2.3.2.2 Registration and user authentication information flow for a
single domain
The following flow is intended to describe how the user authentication that
was detailed in subclause 5.2.3.2.1 can be used in conjunction with a SIP
registration to complete the MCPTT user's registration with the MCPTT service.
This flow shows the MCPTT UE registering with the SIP core using mutual
certificate based authentication to establish a TLS session. This method is an
example only. If the SIP core was IMS, the MCPTT UE could use one of the IMS
defined authentication methods during the registration.
The MCPTT Service State is used to define whether the MCPTT user (which is
registering for the service) has successfully gained full access to the
service. Simply registering with the SIP core may not be sufficient to gain
full access to the MCPTT service. In the flow of 5.2.3.2.2, the combination of
the MCPTT user authentication (which is validated and accepted by the MCPTT
Server) and the successful SIP registration of this user through the MCPTT UE
are needed to gain full access to the MCPTT service.
The third party registration (shown) between the MCPTT Server and the SIP core
is used to convey the initial SIP core registration. The MCPTT server would be
informed of changes in SIP core registration by subscribing to the
registration events (not shown in the flow).
Figure 5.2.3.2.2-1: Registration and User Authentication information flow
(single domain)
1\. The MCPTT User authenticates with USC Identity management and acquires an
Access Token scoped specifically to the MCPTT service from USC Identity
Management as described in subclause 5.2.3.2.1.
2\. The MCPTT UE establishes a TLS session with the SIP Core (e.g., using both
client and server certificates), authenticating both the USC SIP Core to the
device and the device to the USC SIP Core.
3\. The MCPTT sends the SIP REGISTER message to the USC SIP Core, containing
Public User Identity and MCPTT UE Contact address.
4\. The USC SIP Core sends a SIP 200 OK indicating successful registration and
authentication.
5\. Based on its configuration data (e.g., MCPTT-specific feature tags), the
SIP Core performs third-party registration with the MCPTT server in order to
convey the SIP core registration state, by sending a SIP REGISTER message to
the MCPTT server.
6\. The MCPTT server responds with a SIP 200 OK.
7\. The MCPTT UE sends a SIP PUBLISH towards the MCPTT Server via the USC SIP
Core, providing its MCPTT authorization state. This message contains the
Access Token scoped specifically to the MCPTT service acquired in step 1.
8\. The USC SIP Core forwards the SIP PUBLISH to the MCPTT Server.
9\. The MCPTT Server sends a SIP 200 OK towards the UE via the USC SIP Core,
indicating successful reception of the SIP PUBLISH.
10\. The USC SIP Core forwards the SIP 200 OK to the MCPTT UE.
11\. The MCPTT UE sends a SIP SUBSCRIBE towards the MCPTT Server via the USC
SIP Core to subscribe to its own MCPTT Service State.
12\. The USC SIP Core forwards the SIP SUBSCRIBE to the MCPTT Server.
13\. The MCPTT Server sends a SIP 200 OK towards the MCPTT UE via the USC SIP
Core, indicating its acceptance of the SIP SUBSCRIBE.
14\. The USC SIP Core forwards the SIP 200 OK to the MCPTT UE.
15\. The MCPTT Server sends a SIP NOTIFY containing the MCPTT Service State
towards the MCPTT UE via the CSC SIP Core which indicates that the MCPTT UE
and user is successfully registered and authorized to use the MCPTT service.
16\. The CSC SIP Core forwards the SIP NOTIFY containing the MCPTT Service
State to the MCPTT UE.
17\. The MCPTT UE sends a SIP 200 OK towards the MCPTT Server via the USC SIP
Core.
18\. The USC SIP Core forwards the SIP 200 OK to the MCPTT Server.
##### 5.2.3.2.3 Detailed user authentication Information Flow (two domains)
The information flow below, leveraging both the SAML and Oauth protocols,
utilizes the mechanism of federation to enable a user to leverage his/her
security credentials as provided by their home security domain to prove their
identity to a service provider in a foreign security domains. This is
accomplished without exposing the user's home security credentials to the
foreign security domain.
**Figure 5.2.3.2.3-1: Detailed User Authentication, two domains**
1\. The MCPTT UE MCPTT Client (Domain 1) begins the user authorization
procedure to gain access to a MCPTT service in a separate security domain than
that of its home MCPTT service.
2\. The MCPTT UE MCPTT Client sends an Access Token Request scoped to the
MCPTT service to the MCPTT UE User Services Client.
3\. The MCPTT UE User Services Client begins its authorization procedure,
establishing a TLS session and connection with USC Identity Management (Domain
2). Server certificates are used to authenticate the server to the client. All
subsequent HTTP messages in this flow from the client to the USC Identity
Management (Domain 2) use this TLS tunnel (i.e., https).
4\. The MCPTT User Services Client sends an HTTP GET message to USC Identity
Management (Domain 2) including parameters response_type=token, client_id=xyz,
scope=mcptt_service and a redirect URI as per IETF RFC 6749 [20].
5a. USC Identity Management (Domain 2) sends a HTTP 302 FOUND containing a
SAML request redirecting the User Services Client to its home USC Identity
Management (Domain 1) for user authentication.
5b. MCPTT User Services Client sends an HTTP GET containing the SAML request
message to USC Identity Management (Domain 1)
5c. USC Identity Management (Domain 1) sends a HTTP 200 OK message, providing
form data for obtaining the user's authentication credentials.
5d. The user provides his/her authentication credentials to the MCPTT UE User
Services Client.
5e. The MCPTT User Services Client sends a HTTP POST message, containing the
user's input, including the user's authentication credentials, to the form
provided in step (5c).
5f. USC Identity Management (Domain 1) sends a HTTP 302 FOUND containing a
SAML response redirecting the User Services Client to USC Identity Management
(Domain 2).
5g. MCPTT User Services Client sends an HTTP GET containing the SAML response
message to USC Identity Management (Domain 2)
6\. USC Identity Management (Domain 2) sends a HTTP 302 FOUND Access Token
Response (IETF RFC 6749 [20]) which includes the Access Token for the Domain 2
MCPTT service, redirect URI and parameters scope=mcptt_service and
expires_in=3600.
7\. The User Services Client sends an Access Token Indication to the MCPTT
Client.
#### 5.2.3.3 Impact on existing entities and interfaces
Impact on existing entities within the EPS are FFS.
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.2.3.4 Solution evaluation
The architecture of this solution meets the requirements for MCPTT in 3GPP TS
22.179 [2] and also provides a foundation of user based services which will
permit further mission critical applications to be built on this foundation in
future releases.
Entities and interfaces described within this solution should be considered to
be brought forward into the normative clauses of 3GPP TS 23.179 [28].
### 5.2.4 Solution 2-4: Application domain routing over non-trusted SIP core
#### 5.2.4.1 Functional description
##### 5.2.4.1.1 Principles
The architecture is based on the use of SIP routing/processing with anonymised
identities in a SIP core of an untrusted domain and complementary
routing/processing after un-hiding of the identities in the (trusted)
application domain.
The internal structure of the SIP core is not detailed, but may be considered
identical to an IMS compliant to relevant 3GPP specifications with the
enhancements required for the support of MCPTT features, both for functional
and performance aspects.
##### 5.2.4.1.2 Management of identities
To support both the management of user using shareable UEs (the UE and the
corresponding subscription being decoupled from the user) and the protection
of application-level user identities, the solution reuse the principles for
authentication and identity management at SIP-core level specified in 3GPP TS
24.371 [23], subclause 6.2.3, the MCPTT client being considered as a WIC
(WebRTC IMS Client) for this purpose and the MCPTT application being
considered as a WWSF for this purpose.
The MCPTT application connected to a IMS/SIP core is provided with a pool of
IMS identities or IMPI/IMPUs authorised by the operator of the IMS/SIP core
and will temporarily assign such identities to the UE/User requesting MCPTT
service at the time of preliminary authentication, in order to provide
authorised IMS identities which will be used later for IMS registration and
authentication.
The corresponding security considerations have been studied in 3GPP TR 33.871
[24].
NOTE: As an IMS allows registering with multiple identities, nothing is
precluding the UE to register with an IMS identity from the MCPTT pool to
benefit and to simultaneously have a registration with USIM-based identities
to benefit from other MNO-provided services where identity confidentiality is
not required.
##### 5.2.4.1.3 SIP routing principles
For the technical realisation of MCPTT features, it is required for some
messages to be routed through the application server managing a given user.
For example, private call setup shall support the establishment of call
recordeing as appropriate, the decision of recording and the location of
required recorder being decided for the calling party by the application
server managing the corresponding user. Thus, the signalling for private call
establishment shall be routed through the MCPTT application server managing
the calling party user.
The same consideration applies for example for the management of user profile
(asynchronous notifications in case of operational profile modifications) or
supplementary services implementation.
This type of routing cannot be managed by the usual application selection
function of the SIP core (S-CSCF over ISC interface) as the selection criteria
is the application-level user identity which is hidden to the SIP-core in
general and to this specific functional entity (S-CSCF) in particular.
It is therefore necessary to split the AS as seen by the IMS/SIP core into a
first level proxy which will be in charge of hiding/un-hiding identities and
subsequent routing of the SIP messages from/to the application domain. This
proxy will be subsequently called \"Application Edge Proxy\" (AEP). An example
of routing of a private call INVITE where user U1 from primary domain D1
visiting partner application domain D3 calls user U2 from primary domain D2
visiting partner application domain D4 is given in figure 5.2.4.1.2-2, with
the following assumptions:
\- User U1 has been given a temporary identity IM3-1 by the MCPTT application
in domain D3, this identity being accepted by the IMS/SIP core (in domain DA3)
providing access to domain D3
\- User U2 has been given a temporary identity IM4-2 by the MCPTT application
in domain D4, this identity being accepted by the IMS/SIP core (in domain DA4)
providing access to domain D4
The structure of the domains is pictorially represented in figure 5.2.4.1.2-1.
Application domain D3 and operator domain DA3 are separated by a trust
boundary and the same applies for D4 and DA4.
NOTE: it is assumed that D3 and DA3 have separate addressing domain and are
separated by a (restrictive) NAT and the same applies for D4 and DA4.
Figure 5.2.4.1.2-1: Structure of domains
Figure 5.2.41.2-2: Routing of individual call with hiding of identities
1\. U1 sends an INVITE for initiating a private call to U2. From URI is
obscured by the use of the IMS (DA3) identifiers as previously distributed by
the MCPTT AS in domain D3, while [U2] is the application level public identity
of the called party, obscured by header level encryption. P-Preferred-Service
header contains the ICSI for the MCPTT AS allowing for proper routing of the
request to the MCPTT AS in domain D3.
2\. S-CSCF3 in DA3 does not modify the request as it neither have the mapping
of IM3-1 identity to the application level public identity, nor the key to
decrypt the obscured To header. The message is routed according to the ICSI
service routing rules to the corresponding MCPTT AS, i.e. AEP3.
3\. The Application Edge Proxy in domain D3 (AEP3) having the required
information replaces the From header by the actual application level public
address of the calling party (except if anonymity is required) and decrypts
the To header URI. Based on this information, it is able to determine that the
INVITE shall be first routed to the application server managing the calling
party for implementation of any supplementary service required and
implementation of recording according to its policy.
4\. The application server managing the calling party (AS1) implements its
policies and further routes the INVITE message to the application server
managing the called party (AS2).
5\. The application server managing the called party (AS2) implements its
policies. To be able to further route the INVITE message to the called MCPTT
UE, its location shall be known. The application server (AS2) thus uses its
location function (based on prior registration) to determine that the SIP
messages to U2 have to be routed to the AEP of domain D4 (AEP4).
6\. To forward the INVITE message to the called MCPTT UE, the AEP (AEP4) first
obscures the identities by replacing the called party URI by the IMS identity
(IM4-2) and encrypting the From header, and then uses its location function
(based on prior registration) to determine that the SIP messages to U2 have to
be routed to the appropriate S-CSCF (S-CSCF4).
7\. S-CSCF4 uses its location function to determine the final location of U2
and routes accordingly the INVITE message.
NOTE: The above process relies for proper routing on cascading of registration
(3^rd^ party registration) from S-CSCF to AEP and from AEP to the AS managing
the corresponding MCPTT UE.
##### 5.2.4.1.4 Architecture
###### 5.2.4.1.4.1 Overall architecture
The figure 5.2.4.1.4.1-1 presents a high level view of the proposed
architecture.
Figure 5.2.4.1.4.1-1: High level architecture
###### 5.2.4.1.4.2 Functionalities provided by the IMS/SIP core
As specified by the relevant specifications 3GPP TS 23.228 [13], 3GPP TS 23.
218 [5], 3GPP TS 24.229 [25]) with the following clarifications:
\- Registration is based on a temporary identity and corresponding credentials
managed as a pool by the MCPTT application (cf WebRTC over IMS).
\- Authentication is performed by the P-CSCF for the temporary identity and
the corresponding credential. The actual user authentication has been
performed in advance by out-of-band interaction with the serving common
services and the primary identity function.
\- QoS support, i.e. interaction with PCC may be managed at the application
level instead of the IMS level.
\- HSS data is corresponding to the identities in the pool of IMPU/IMPIs
delegated to the MCPTT application and should be considered as wild-carded
###### 5.2.4.1.4.3 Functionalities provided by serving MCPTT application
##### 5.2.4.1.4.3.1 Serving MCPTT application architecture {#serving-mcptt-
application-architecture .H6}
The serving part of MCPTT application server includes the application edge
proxy and serving media gateway which can further be decomposed as suggested
in figure 5.2.4.1.4.3.1-1:
Figure 5.2.4.1.4.3.1-1: Decomposition of AEP and serving media gateway over
IMS/SIP core
The border function in the AEP is hiding and un-hiding the identities carried
by the SIP signalling from and to the underlying IMS/SIP core. The serving
MCPTT application is the serving part of the MCPTT application. It controls
the routing of the media gateway, performs decision on downlink signalling and
media (multi-unicast versus broadcast). It may also perform some additional
routing of the application messages.
Alternatively, the S-CSCF may be located in the MCPTT application domain. This
case is presented in figure 5.2.4.1.4.3.1-2.
Figure 5.2.4.1.4.3.1-2: Decomposition of AEP and serving media gateway over
IMS/SIP core with S-CSCF in application domain
In this deployment option, the S-CSCF is located in the MCPTT application
domain and performs its registrar and service selection function based on the
un-hidden identities and using MCPTT user database information.
NOTE: In this deployment option, the Cx interface between the S-CSCF in the
MCPTT service provider domain and the HSS in the operator\'s domain needs to
be an inter-domain interface; currently in IMS the Cx interface resides within
the operator\'s domain.
##### 5.2.4.1.4.3.2 Application edge proxy {#application-edge-proxy .H6}
The application edge proxy (AEP) provides the following functions:
\- It performs the hiding and un-hiding function of application level
identities from an un-trusted signalling plane.
\- It performs additional application service selection using the unhidden
identities, if necessary.
\- It performs message replication to the appropriate list of MCPTT clients
for group related messaging over unicast.
\- It acts as a terminating UA for the management of permanent sessions
(permanent 5-tuple for unicast media IP connectivity).
The serving application supports broadcast QoS management (through MB2-C) and
may optionally support unicast QoS management (through Rx interface). It
performs the switching decisions between unicast and broadcast transport.
NOTE 1: This functional entity is located in the equipment of the primary
MCPTT operator, except in the mutual aid case where it is located in the
equipment of the partner MCPTT operator. It is co-located with the serving
media gateway.
NOTE 2: In some deployment scenarios, the S-CSCF may be in the serving MCPTT
application domain and in this case, the functionalities of border function,
S-CSCF and AEP are merged. As the S-CSCF is not performing the authentication
in this scenario, it simply means that the AEP is connected directly over the
I-CSCF.
##### 5.2.4.1.4.3.3 Serving media gateway {#serving-media-gateway .H6}
This functional entity provides media distribution function and support for
permanent session management at the media level. It acts as media level
companion of the AEP.
Serving media gateway provides the following functions:
\- It performs RTP middle box functions, including replication of incoming
media packets to multiple recipients
\- It acts as an endpoint for ICE based NAT traversal.
\- It performs NAT maintenance for the media flows.
\- It acts as the media plane companion of the AEP.
\- It routes the media to MB2-U for broadcast under the control of AEP.
NOTE: This functional entity is collocated with the AEP.
###### 5.2.4.1.4.4 Functionalities provided by primary MCPTT application
The following functionalities are provided by the primary MCPTT application:
\- Management of application level registration and corresponding location
function.
\- Management of MCPTT call control.
\- Management of group related procedures for MCPTT client, MCPTT authorised
user clients (dispatchers) and administrators Support of corresponding
database operations.
\- Management of primary MCPTT application service database.
\- Identity management.
\- Media distribution to/from the serving media gateway
\- Centralised floor control.
#### 5.2.4.2 Procedures
##### 5.2.4.2.1 Authentication and discovery of IMS identities and parameters
Authentication of a MCPTT user is additionally used to provide the MCPTT
client with IMS identities required for authorised use of the IMS/SIP-core in
the appropriate domain and all relevant access parameters. The procedure is
detailed in figure 5.2.4.2.1-1.
Figure 5.2.4.2.1-1: Authentication and access information discovery
NOTE: Procedure is to be studied from the security point of view by SA3 and
from the identifier and access info point of view by SA6.
0\. MCPTT UE requests authentication from the primary identity function.
Authentication and authorisation are performed between the MCPTT UE and the
primary identity management function. After authentication, the MCPTT UE gets
an access token to request information from the serving access point.
1\. MCPTT UE requests information from the chosen serving common services
using https protocol and a well-known URI.
2\. The common service entity perfoms policy check.
3\. The serving access point provides to the requesting MCPTT UE IMS
identities, access information and corresponding credentials, based on a pool
of identities managed by the application.
##### 5.2.4.2.2 Registration
The registration procedure enables both the registration of the MCPTT UE with
its IMS identities in the IMS/SIP core domain and the further registration of
the same MCPTT UE in the application domain for application level routing
using the application level identities.
The procedure is described in figure 5.2.4.2.2-1.
Figure 5.2.4.2.2-1: IMS/SIP core and application level registration
0\. The MCPTT UE has previously got IMS identities and credentials using the
authentication procedure.
1\. The MCPTT UE initiates registration to the SIP core by sending to the I/O
proxy (P-CSCF) a registration request with the IMS identities and credentials
got in a previous step.
2\. The I/O proxy (P-CSCF) validates the identities and credentials (method to
be defined by SA3).
3\. The registration request is forwarded to the SIP core registrar function
(S-CSCF), I/O proxy (P-CSCF) acting as a Trusted Node.
4\. Registration is accepted.
5\. Registration response is forwarded to the MCPTT UE.
6\. Further to the registration of the UE, registrar function (S-CSCF)
performs a third party registration over the ISC interface to the serving AEP.
The identities used for this registration are the same as the ones used in
previous steps (1, 3) and the contact point is the registrar (S-CSCF). Based
on these identities (previously provided by the serving access point also part
of the common services of the serving MCPTT application), the AEP is able to
recover the application level identity of the MCPTT UE, to put in its location
database the binding corresponding to IMS and application-level identities and
to validate the corresponding credentials.
7\. If the AEP validation is successful, a success response is sent to the
registrar (S-CSCF).
8\. A third party registration of the application level identity is initiated
by the serving AEP and sent to the primary application server managing the
MCPTT user. The registered identity is the application level identity and the
contact is the serving AEP.
9\. Registration is acknowledged.
This process populates location database in the IMS/SIP core registrar
(S-CSCF), in the AEP and primary application server for the proper routing of
terminating transactions.
##### 5.2.4.2.3 Permanent NAT traversal
Permanent session for NAT traversal is described in subclause 5.7.2 (Solution
7-2) where the signalling entry point for application server (C-plane AS) is
the serving AEP and the media entry point for application server (U-plane AS)
is the media gateway.
##### 5.2.4.2.4 Originating procedure
This clause presents a session originating procedure for an MCPTT UE. It
complies with clause 6.4.1 of 3GPP TS 23.218 [5]. It assumes the use of ICSI
for forced routing of the request to the right AS entry point, i.e. the
serving AEP. The procedural flow is detailed in figure 5.2.4.2.4-1.
Figure 5.2.4.2.4-1: Originating procedure
1\. The request is sent by the MCPTT UE to the I/O SIP core proxy (P-CSCF). In
order to mask critical fields for their routing through an potentially
untrusted SIP core, the request line only request routing to the serving AEP,
the From field contains the temporary IMS id of the MCPTT UE and the To field
is obscured. ICSI is indicated in a P-Preferred-Service header in order to
recommend the route at the output of the service selection step (S-CSCF).
2\. Message is routed by the SIP core I/O proxy (P-CSCF) to the serving SIP
core registrar/service selection function (S-CSCF).
3\. SIP core registrar/service selection function (S-CSCF perform service
verification. As the temporary IMS identity has been provided from a pool of
SIP core authorised identities, verification result should always be positive.
4\. Based on P-Preferred-Service header ICSI urn parameter, request shall be
routed to the designated AS from the S-CSCF point of view, which is the
serving AEP. No translation or un-hiding is performed at this step as the
required information therefore are unknown in the SIP core.
5\. Based on identity mapping collected during the authentication procedure,
the serving AEP which is part of the MCPTT common services is able to
translate the headers which were anonymised. The From header URI can be
replaced by the actual application-level URI, the To header can be decrypted.
Based on this information the AEP performs actual service level control.
6\. Based on un-hidden information, the serving AEP is able to perform service
selection based on the method (for example INVITE or SUBSCRIBE, the To header
(group or individual URI) and the From header (to route though primary
application of the calling party for recording or supplementary service
management)). The request is then sent to the appropriate application server.
7\. Further routing is based on internal application logic.
8\. Normal SIP routing of the response.
##### 5.2.4.2.5 Terminating procedure
This clause presents a session terminating procedure for an MCPTT UE.
Procedure is shown in figure 5.2.4.2.5-1.
Figure 5.2.4.2.5-1: Terminating procedure
0\. The routing logic at the application level has forwarded the request to
the designated call server and the call server is able to determine from a
"location function" a routable identity of the target MCPTT UE.
NOTE: If the request is a terminating session initiation procedure for a
private call, the application server managing the target MCPTT UE is able to
determine the proper AEP from the registration procedure. If the request is a
notification, the corresponding application server is able to determine the
proper AEP through the subscription initiation and refreshment process.
Otherwise, group affiliation logic shall provide the proper routing
information.
1\. Based on "location" information, MCPTT server determines the AEP under
which the target MCPTT UE is located and forwards the request to the
corresponding AEP. Application-level identities are used in the request
headers.
2\. Serving AEP performs service control checks before further processing and
routing.
3\. Serving AEP replaces application level identity by the IMS identity
obtained during the authentication procedure and hides other headers s
required. The next step of routing is determined by the location query of the
contact binding provided by the cascade registration procedure. Thus, the
request is forwarded to the registrar/service selection function of the
IMS/SIP core and the ICSI is added for proper routing management.
4\. Service control is performed at SIP core level.
5\. Based on request message content, the selection function does not route
back the request to any application server and uses its location function to
locate the target and route the request to it. The location function
integrated in the registrar allows recovering the corresponding binding.
6\. Request is finally routed to the target MCPTT UE.
7\. Normal SIP routing of the response
#### 5.2.4.3 Impact on existing entities and interfaces
Proposed solution uses IMS/SIP core as defined by 3GPP TS 23.228 [13] with the
enhancements required for the support of WEBRTC over IMS, i.e. the management
of IMS identities by a third party as a pool with web-based authentication.
#### 5.2.4.4 Solution evaluation
Solution 2-4 fulfils the confidentiality requirements when the underlying
IMS/SIP core is an untrusted entity in the public operator domain. It may be
implemented either over the ISC interface, or over the Mm interface. The
solution 2-4 usefully complements solution 2-1 in clarifying the position(s)
of the registrar function, the role of border functions and the split between
the serving and controlling MCPTT server entities.
Entities and interfaces described within this solution should be considered to
be brought forward into the normative clauses of 3GPP TS 23.179 [28].
## 5.3 UE-to-network relay
### 5.3.1 Solution 3-1: ALG relay for MCPTT UE-to-network relay
#### 5.3.1.1 Functional description
The solution described in this clause assumes that basic on-network operation
is supported with a centralised MCPTT server, as illustrated in figure
5.3.1.1-1 (the nodes that are not expected to be impacted by MCPTT are hidden
under a yellowish rectangle).
Figure 5.3.1.1-1: High level architecture view for MCPTT on-network and MCPTT
UE-to-network relay
The following assumptions apply for UEs that are directly connected to the
network (e.g. UE-2 in figure 5.3.1.1-1):
\- UEs are provided access to the MCPTT service by communicating with the
MCPTT server via GC1. This operation is referred to as on-network MCPTT
operation.
\- The MCPTT server is a specific instantiation of the generic GCSE
application server described in 3GPP TS 23.468 [3].
\- GC1 is based on the SIP protocol for session control. Additional protocols
may be used for centralised floor control or for UE configuration.
\- The MCPTT service may be provided as IMS service or non-IMS (but SIP-based)
service.
\- When provided via the IMS, the MCPTT server is an IMS Application Server
(AS).
\- The MCPTT server performs control of SIP sessions (establishment, release,
etc.) as well as centralised floor control for MCPTT.
In reference to figure 5.3.1.1-1, UE-1 is out of network coverage, but within
the transmission range of a ProSe UE-to-network relay (UE-R). UE-1 obtains
MCPTT service via the relay (UE-R). This operation is referred to as UE-to-
network relay MCPTT.
The solution for UE-to-network relay MCPTT described in this clause has the
following salient features:
\- UE-to-network relay MCPTT, similar to on-network MCPTT, relies on a
centralised architecture where the MCPTT service is provided via the MCPTT
server residing in the network.
\- The ProSe UE-to-network relay (in absence of the MCPTT proxy) is a layer-3
relay (i.e. an IP router). It provides basic IP connectivity to the Remote UE
(UE-1).
\- The ProSe UE-to-network relay further includes an MCPTT-specific
Application Level Gateway (ALG) function referred to as MCPTT proxy including
the following functionality:
\- SIP Back-to-Back User Agent (B2BUA) in the signalling path.
\- Network Address Translator (NAT) and/or RTP/RTCP convertor in the user
plane.
\- Support for a SIP-based interface GC1-bis towards the Remote UE (UE-1).
\- Capability to provide access to Remote UEs to the IMS/SIP network based on
successful access level authentication, i.e. by acting as a trusted node
towards the IMS/SIP, similar to the operation of Trusted Node Authentication
(TNA; see 3GPP TS 33.203 [7]). This includes the capability to multiplex SIP
signalling messages stemming from multiple Remote UEs on the same Gm
transport.
\- The ProSe UE-Network Relay (including the MCPTT proxy) is an ALG relay (or
\"layer-7 relay\"). The MCPTT proxy being on the SIP signalling path between
the Remote UE and the MCPTT server, the MCPTT proxy is able to monitor and/or
modify the SIP signalling messages, as well as perform authorisation on a per
MCPTT group or per user basis. In the user plane the MCPTT proxy is able to
decouple the data delivery formats used on Uu and on PC5.
NOTE 1: The PC5 aspects (e.g. relay discovery, PC5-layer authentication,
layer-2 link establishment over PC5, IP address/prefix assignment) of the
Relay are described in 3GPP TR 23.713 [6]. The present document focuses
primarily on GC1 and GC1-bis aspects.
NOTE 2: The MCPTT proxy function in the Relay is able to read and modify SIP
signalling messages of unaffiliated MCPTT users (although unable to read user
plane data) which allows the Relay to perform functions such as switching from
unicast Uu to multicast PC5 or vice versa, or authorising Remote UE requests
on per MCPTT group or per user basis. In scenarios where the ability of MCPTT
to read SIP signalling of unaffiliated users may pose security threats the
MCPTT proxy functionality is not used i.e. a Layer-3 relay is used instead.
Editor's note: It is FFS how the Relay determines whether to act as Layer-3 or
ALG relay.
Editor's note: It is FFS whether there is a Stage 1 requirement for the Relay
to be able to perform authorisation on per MCPTT group or per user basis.
Editor's note: It is FFS whether the Relay needs to support ALG functions for
other protocols (e.g. HTTP proxy).
#### 5.3.1.2 Procedures
##### 5.3.1.2.1 General
The following procedures are described with call flows:
\- Registration for MCPTT service: describes how a Remote UE registers for
MCPTT service with the MCPTT server. In the process the Remote UE mutually
authenticates with the network and agrees common key material.
\- Establishment of MCPTT session: describes how a Remote UE establishes an
MCPTT session, how MCPTT server may switch between unicast and multicast
delivery over Uu and how Relay UE may switch between unicast and multicast
delivery over PC5. Despite being on the SIP signalling path, the Relay UE is
not able to eavesdrop on user data for MCPTT groups that it is not affiliated
with.
##### 5.3.1.2.2 Registration for MCPTT service
Depicted in figure 5.3.1.2.2-1 is the call flow where Remote UE registers for
MCPTT service via an MCPTT proxy. When the MCPTT service is provided via the
IMS, figure 5.3.1.2.2-1 also includes a P-CSCF (not shown for simplicity).
Figure 5.3.1.2.2-1: Registration for MCPTT service via MCPTT proxy
1\. The Relay UE (UE-R) registers with the MCPTT server using existing IMS or
non-IMS SIP procedures. The Relay's user (UE-R's user) and the network
mutually authenticate and agree common key material. At this point there is a
secure association (SA-R) established between the Relay UE and the network.
2\. The Remote UE (UE-1) performs ProSe UE-to-network relay discovery over PC5
and establishes a secure layer-2 link with the Relay (UE-R) over PC5. As part
of this process the Remote UE is mutually authenticated at PC5 layer with
either the Relay or with the network (depending on the SA3 decision for
security). In the process UE-1 is also assigned an IP address/prefix by the
Relay.
NOTE 1: Step 2 is described in 3GPP TR 23.713 [6].
3: From this point on the relay inserts an MCPTT proxy function and starts
acting as Trusted Node Authentication (TNA) node as described in 3GPP TS
33.203 [7] Annex U. UE-R initially blocks all traffic other than SIP
signalling stemming from UE-1.
4\. UE-1 initiates registration for MCPTT service via the MCPTT proxy residing
in UE-R by sending a SIP REGISTER message over GC1-bis.
5\. The MCPTT proxy forwards the SIP REGISTER message over GC1 using the
Relay's secure association (SA-R). Before forwarding, the MCPTT proxy may
inspect the message (e.g. to perform authorisation based on user's identity in
the SIP REGISTER message). The SIP REGISTER message contains information
informing the MCPTT server that it can act as a relay for UE-1 and includes
the relevant SIP address of its Back-To-Back User Agent (B2BUA) that will be
used as SIP signalling relay, as well as its RTP translator address that will
be used as a user plane (RTP/RTCP) relay.
NOTE 2: All SIP signalling messages flowing from/to UE-1 over GC1-bis are
transported over GC1 using the Relay's secure association (SA-R).
6\. The Remote UE's user (UE-1's user) and the network mutually authenticate
and agree common key material. Note that the HSS may or may not be involved in
this step, depending on the ownership of the application-level profile of the
Remote UE's user.
7-8. The SIP 200 OK message completes the UE-1 registration for MCPTT service.
9\. At this point the authentication of the Remote UE's user with the network
is complete and a secure association (SA-1) is established between UE-1 and
the P-CSCF (or the MCPTT server). Even though MCPTT proxy is able to look
inside the SIP message content, sensitive information (e.g. master session key
for multicast content) can still be delivered securely from the MCPTT server
to the Remote UE. This is important for cases where the Relay does not belong
to the MCPTT group for which it is acting as a relay.
##### 5.3.1.2.3 Establishment of MCPTT session
Depicted in figure 5.3.1.2.3-1 is the call flow where Remote UE requests
establishment of MCPTT session (e.g. joining an MCPTT group). When the MCPTT
service is provided via the IMS, figure 5.3.1.2.3-1 also includes a P-CSCF
(not shown for simplicity).
Figure 5.3.1.2.3-1: Establishment of MCPTT session
0\. At the beginning of this call flow UE-1 has an established secure
association with the network as described in subclause 5.3.1.2.2.
1\. In order to join an MCPTT group, UE-1 sends a SIP INVITE (MCPTT Group ID)
message. MCPTT Group ID is a SIP URI that uniquely identifies a group of MCPTT
users (e.g. [fire.brigade75\@firstresponder.com]{.underline}).
2\. MCPTT proxy optionally initiates a security procedure to protect GC1-bis
signalling.
NOTE: Prior to step 2 the Remote UE has security association with the Relay at
PC5 layer, but not at SIP layer. SA3 is to decide whether there is a need to
establish a SIP-layer security association between UE-1 and UE-R, or whether
the PC5 layer security is sufficient.
3\. The MCPTT proxy may inspect the SIP INVITE message (e.g. to check whether
it is authorised for acting as a relay for the requested MCPTT group ID) and
may also modify the message (e.g. by adding the E-UTRAN Cell ID or other
information) before forwarding it towards the MCPTT server.
4\. The MCPTT server accepts the request by sending a SIP 200 OK message
towards UE-1.
At this point there is unicast delivery on both Uu and PC5. From this point on
there are two cases to consider, depending whether unicast or multicast
delivery is used on Uu.
5\. While unicast delivery is used on Uu the MCPTT proxy function in the Relay
UE still has the choice of using unicast or multicast on PC5.
5a. Based on the number of remote UEs on the PC5 interface, the MCPTT proxy
function in the Relay UE decides to switch to multicast delivery over PC5. The
Relay UE dynamically assigns a Layer-2 identifier to be used for multicast
delivery over PC5 (this is the ProSe Layer-2 Group ID parameter in 3GPP TS
23.303 [4]) and sends it to concerned Remote UEs in a SIP INFO message. All
Remote UEs associated with the same Relay and listening to the same MCPTT
group (identified with Group ID at MCPTT application layer) are associated
with the same ProSe Layer-2 Group ID.
5b. The Remote UE responds with a SIP 200 OK message. Remote UEs that do not
respond with SIP 200 OK will keep receiving content in unicast mode.
6a. Based on the number of UEs (not remote UEs) in the cell, the MCPTT server
requests establishment of an eMBMS bearer in the cell.
6b-6c: The MCPTT server informs the Relay of the TMGI of the associated eMBMS
bearer by sending a SIP INFO message. This step is performed regardless
whether the UE-R user is affiliated with the MCPTT group or not, provided that
there are Remote UEs handled by this Relay that are affiliated with the MCPTT
group.
6d. The MCPTT server also sends a SIP INFO message to every Remote UE that has
established a session for the requested MCPTT group ID. The SIP INFO message
sent to the Remote UEs may contain the associated eMBMS master session key
used for encryption of data payload sent over the eMBMS bearer. The master
session key is conveyed to the Remote UE encrypted, so that the Relay UE is
unable to utilise it.
6e. The SIP INFO message is forwarded to the Remote UE. If the Relay UE
decides to use multicast delivery over PC5, it may dynamically assign a
Layer-2 identifier to be used for multicast delivery over PC5 (this is the
ProSe Layer-2 Group ID parameter in 3GPP TS 23.303 [4]). All Remote UEs
associated with the same Relay and listening to the same MCPTT group
(identified with Group ID at MCPTT application layer) are associated with the
same ProSe Layer-2 Group ID.
6h. At this point the Relay UE may tune to the eMBMS bearer, but it will not
be able to decrypt the user data sent on the eMBMS bearer if it is not part of
the MCPTT group.
6i. The Remote UE is prepared to receive data associated with the MCPTT group
identified by Group ID which may be delivered over PC5 in either unicast mode
or in multicast mode using the ProSe Layer-2 Group ID signalled in step 6e.
#### 5.3.1.3 Impact on existing entities and interfaces
System-level considerations:
\- PC5 needs to be enhanced as part of Rel-13 work item eProSe-Ext to support
the following (also refer to step 2 in figure 5.3.1.2.2-1):
\- Relay discovery
\- One-to-one communication (including PC5-level mutual authentication between
the Remote UE and the Relay UE, as well as IP address assignment).
\- One-to-many communication over PC5 defined in Rel-12 is needed to support
multicast delivery over PC5.
Application-level considerations:
\- MCPTT proxy (i.e. the MCPTT-specific ALG function residing in the Layer-3
relay) includes the following functionality:
\- SIP Back-to-Back User Agent (B2BUA) in the signalling path.
\- Network Address Translator (NAT) and/or RTP/RTCP convertor in the user
plane.
\- Despite being on the SIP signalling path, it should be possible to prevent
the MCPTT proxy from eavesdropping on user plane content when it is relaying
traffic for an MCPTT group of which it is not a member.
NOTE: The mechanisms for securing the communication between Remote UE and
MCPTT server for all combinations of unicast and multicast delivery over Uu
and PC5 to be defined by SA WG3.
IMS-level considerations:
\- Gm needs to be enhanced to support multiplexing of SIP signalling messages
stemming from multiple Remote UEs on the same Gm transport.
\- The procedure for mutual authentication between Remote UE and MCPTT server
(or P-CSCF) (refer to step 6 in figure 5.3.1.2.2-1) needs to be defined by
SA3.
#### 5.3.1.4 Solution evaluation
The additional functionalities than purely layer 3 is not necessary for
supporting UE-to-network relay service. So the solution 3-1 will not be
pursued in Rel-13.
### 5.3.2 Solution 3-2: Relay for UE-to-network relay MCPTT
#### 5.3.2.1 Functional description
The solution described in this clause assumes that basic on-network MCPTT
service is supported with a centralised MCPTT server, as illustrated in figure
5.3.2.1-1 (the nodes that are not expected to be impacted by MCPTT are hidden
under a yellowish rectangle).
Figure 5.3.2.1-1: High level architecture view for on-network MCPTT and UE-to-
network relay MCPTT
The following assumptions apply for UEs that are directly connected to the
network (e.g. UE-2 in figure 5.3.2.1-1):
\- UEs are provided access to the MCPTT service by communicating with the
MCPTT server via GC1. This operation is referred to as on-network MCPTT
service.
\- The MCPTT server is a specific instantiation of the generic GCSE
application server described in 3GPP TS 23.468 [3].
\- GC1 is based on the SIP protocol for session control. Additional protocols
may be used for centralised floor control or for UE configuration.
\- The MCPTT service may be provided as IMS service or non-IMS (but SIP-based)
service.
\- When provided via the IMS, the MCPTT server is an IMS Application Server
(AS).
\- The MCPTT server performs control of SIP sessions (establishment, release,
etc.) as well as centralised floor control for MCPTT.
In reference to figure 5.3.2.1-1, UE-1 is out of network coverage, but within
the transmission range of a ProSe UE-Network Relay (UE-R). UE-1 obtains MCPTT
service via the relay (UE-R). This operation is referred to as UE-to-network
relay MCPTT.
The solution for UE-to-network relay MCPTT described in this clause has the
following salient features:
\- UE-to-network relay MCPTT, similar to on-network MCPTT, relies on a
centralised architecture where the MCPTT service is provided via the MCPTT
server residing in the network.
\- The ProSe UE-to-network relay (in absence of the MCPTT proxy) is a layer-3
relay (i.e. an IP router). It provides basic IP connectivity to the Remote UE
(UE-1).
NOTE: The PC5 aspects (e.g. relay discovery, PC5-layer authentication, layer-2
link establishment over PC5, IP address/prefix assignment) of the Relay are
described in 3GPP TR 23.713 [6]. The present document focuses primarily on GC1
aspects.
Editor's note: It is FFS if there is necessary requirement to implement more
function than a layer 3 relay, e.g. MCPTT proxy to be able to monitor and read
SIP signalling message..
Editor's note: Relay discovery among a group member only mechanism to perform
authorization on per group or per user basis is defined in SA2.
#### 5.3.2.2 Procedures
##### 5.3.2.2.1 General
The following procedures are described with call flows:
\- Registration for MCPTT service: describes how a Remote UE registers for
MCPTT service with the MCPTT server. In the process the Remote UE mutually
authenticates with the network and agrees common key material.
\- Establishment of MCPTT session: describes how a Remote UE establishes an
MCPTT session, how MCPTT server may switch between unicast and multicast
delivery over Uu and how Relay UE may switch between unicast and multicast
delivery over PC5. Despite being on the SIP signalling path, the Relay UE is
not able to eavesdrop on user data for MCPTT groups that it is not affiliated
with.
##### 5.3.2.2.2 Registration for MCPTT service
Depicted in figure 5.3.2.2.2-1 is the call flow where Remote UE registers for
MCPTT service via an MCPTT proxy. When the MCPTT service is provided via the
IMS, figure 5.3.2.2.2-1 also includes a P-CSCF (not shown for simplicity).
Figure 5.3.2.2.2-1: Registration for MCPTT service via lay3 relay
1\. The ProSe UE-Network Relay performs initial E-UTRAN Attach (if not already
attached) and/or establishes a PDN connection for relaying (if no appropriate
PDN connection for this relaying exists). In case of IPv6, the ProSe UE-
Network Relay obtains an IPv6 prefix via prefix delegation function from the
network as defined in 3GPP TS 23.401 [11]
2\. The Remote UE (UE-1) performs ProSe UE-Network Relay discovery over PC5
and establishes a secure layer-2 link with the Relay (UE-R) over PC5. As part
of this process, the Remote UE is mutually authenticated at PC5 layer with
either the Relay or with the network (depending on the SA3 decision for
security). In the process UE-1 is also assigned an IP address/prefix by the
Relay.
NOTE 1: Step 2 is described in 3GPP TR 23.713 [6].
NOTE 2: Relay discovery among a group member only mechanism to perform
authorization on per group or per user basis is defined in SA2.
3\. From this point on the relay inserts an NAT (IP router) function.UE-R
transparently forwards all the signalling and data above the IP layer.
4.0 UE-1 may need to get the IP address of the P-SCSF from UE-R over PC5 in
case of IMS.
Editor's note: It is FFS how UE-1 can get the address of MCPTT AS, if non-IMS
is support.
4.1 UE-1 initiates registration for MCPTT service by sending a SIP REGISTER
message over PC5.
The relay transparently forwards the SIP REGISTER message over the PDN
connection for relaying.
4.2 The Remote UE's user (UE-1's user) and the network mutually authenticate
and agree common key material. Note that the HSS may or may not be involved in
this step, depending on the ownership of the application-level profile of the
Remote UE's user.
4.3 The SIP 200 OK message completes the UE-1 registration for MCPTT service.
5\. At this point the authentication of the Remote UE's user with the network
is complete and a secure association (SA-1) is established between UE-1 and
the P-CSCF (or the MCPTT server).
##### 5.3.2.2.3 Establishment of MCPTT session
Depicted in figure 5.3.2.2.3-1 is the call flow where Remote UE requests
establishment of MCPTT session (e.g. joining an MCPTT group). When the MCPTT
service is provided via the IMS, figure 5.3.2.2.3-1 also includes a P-CSCF
(not shown for simplicity).
Figure 5.3.2.2.3-1: Establishment of MCPTT session
0\. At the beginning of this call flow UE-1 has an established secure
association with the network as described in subclause 5.3.2.2.2.
1\. In order to join an MCPTT group, UE-1 sends a SIP INVITE (MCPTT Group ID)
message. MCPTT Group ID is a SIP URI that uniquely identifies a group of MCPTT
users (e.g. [fire.brigade75\@firstresponder.com]{.underline}).
NOTE: SIP invite message may contain an E-UTRAN Cell ID, which is retrieved
from the relay UE according to the mechanism defined in subclause 7.2.2.3 of
3GPP TR 23.713 [6].
2\. The UE-R is not able to inspect the SIP INVITE message and just
transparently forwards it towards the MCPTT server.
3\. The MCPTT server accepts the request by sending a SIP 200 OK message
towards UE-1.
3a. Based on the number of UEs in the cell, the MCPTT server requests
establishment of an eMBMS bearer in the cell.
3b. The MCPTT server sends a SIP INFO message to every Remote UE or in
coverage UE that has established a session for the requested MCPTT group ID.
The SIP INFO message sent to the Remote UEs may contain the associated eMBMS
master session key used for encryption of data payload sent over the eMBMS
bearer. The master session key is conveyed to the Remote UE encrypted, so that
the Relay UE is unable to utilise it.. The SIP INFO message is transparently
forwarded by relay UE to the Remote UE.
5d \~5e. Remote UE sends the 200 OK message, which is forwarded by the relay
UE to the MCPTT server.
6a. The remote UE sends to the relay UE-R a TMGI Monitoring Request (TMGI)
where TMGI is the value obtained at step 5.
6b. At this point, UE-R has the choice of using unicast or multicast on PC5.
And it will send the PC5 bear info (Prose layer- 2 group ID for multicast or
unicast) in the Monitoring Response message.
7\. At this point the Relay UE may tune to the eMBMS bearer, but it will not
be able to decrypt the user data sent on the eMBMS bearer if it is not part of
the MCPTT group.
8\. The Remote UE is prepared to receive data associated with the MCPTT group
identified by a Group ID which may be delivered over PC5 in either unicast
mode or in multicast mode using the ProSe Layer-2 Group ID signalled in step
6e.
#### 5.3.2.3 Impact on existing entities and interfaces
System-level considerations:
\- PC5 needs to be enhanced as part of Rel-13 work item eProSe-Ext to support
the following (also refer to step 2 in figure 5.3.2.2.2-1):
\- Relay discovery mechanism.
\- One-to-one communication (including PC5-level mutual authentication between
the Remote UE and the Relay UE, as well as IP address assignment).
\- One-to-many communication over PC5 defined in Rel-12 is needed to support
multicast delivery over PC5.
IMS-level considerations:
None.
#### 5.3.2.4 Solution evaluation
The solution 3-2 can well meet the requirement of UE-to-network service with
least impacts to the existed standard. This solution will be pursued in
Rel-13.
## 5.4 Group management
### 5.4.1 Off-network
#### 5.4.1.1 Solution 4-1-1: Group call participants discovery by off-network
and off-network with ProSe UE-to-UE relay group call setup
##### 5.4.1.1.1 Functional Description
Group Call Participants Discovery may be needed to let each group call
participant know which group member will participate in a group call. The
solution described in the clause is to use group call setup to implement the
above requirement.
The solution described in this clause assumes that the group call originating
User (caller User) works as a group call controller.
This solution can cover all off-network and off-network with ProSe UE-to-UE
relay scenarios as the following figure 5.4.1.1.1-1 illustrates:
Figure 5.4.1.1.1-1: Off-network scenarios
The solution for MCPTT DMO-R/DMO described in this clause has the following
salient features:
i) The caller user originating a group call is called an MCPTT group call
controller
ii) The caller user broadcasts the Group call setup request message to the
group in a similar way to the 1:m prose communication defined in rel12.
i) The callee user who is able to see the call originator (caller user) can
work as a layer 3 UE-to-UE relay for the callee user who is not able to see
the call originator (caller user).
ii) Routing the signalling and data for the group call to/from the callee user
who is not able to see the call originator.
ii) The callee user who is able to see the call originator broadcasts the Call
accept Feedback message to the group.
ii) The callee user who is not able to see the call originator will choose the
relay according to the Call Accept Feedback message.
##### 5.4.1.1.2 Procedures
Outlined in figure 5.4.1.1.2-1 are the control plane procedures for MCPTT
Group communication establishment for both off-network and off-network with
ProSe UE-to-UE relay. The procedure describes how a remote UE (UE1) initiated
an MCPTT group session with other remote UEs (UE2, UE3, and UE4) within one
MCPTT group, and how the MCPTT group session is established.
Figure 5.4.1.1.2-1: Off-network group call establishment
1\. The UE1 originating a group call serves as the MCPTT group call
controller.
2\. The UE1 will broadcast the Group Call Request message to the group. This
message can be sent in a way similar to the 1:m prose communication defined in
rel12. This message contains the following information: application layer
MCPTT group ID, ID/name of the caller User.
3\. UE2 and UE3 are UEs who can directly receive the message from call
originator UE1. They know the group call is originated by UE1 after reading
the Group Call Request message. Then they can decide to join.
4\. UE2 and UE3 broadcast Group Call Accept message to the group. The Group
Call Accept message is also sent in a way similar to the 1:m prose
communication defined in Rel12.
5\. UE4 is one of the UEs who are not able to directly hear call originator
UE1. Assuming it can receive the Group Call Accept Feedback from one or other
UEs like UE2 and UE3, it then knows that someone has initiated a group call
from the Group Call Accept.
6-7. UE4 will select one UE (UE2 or UE3) as a UE-to-UE Relay. The Relay
(assuming UE3) can forward the Group Call Request message to UE4 after the
relay connection is setup.
8\. UE4 will send Group Call Accept Message through UE-to-UE Relay (assuming
UE3).
The UE3 works as an IP router and transparently forward the Group Call Accept
to UE1.
9-13. UE1 sends the ACK message to all feedback users directly or through a
relay.
14-16. As the controlling server, the call originator UE1 performs floor
control function.
17-18. The UE1 receives all the data from speakers and forwards that to the
other UEs.
##### 5.4.1.1.3 Impact on existing entities and interfaces
System-level considerations:
\- PC5 needs to be enhanced as part of Rel-13 work item eProSe-Ext to support
the following (also refer to step 1 and step 5 in figure 5.4.1.1.2-1):
\- Relay discovery
\- one-to-one communication (including PC5-level mutual authentication between
the Remote UE and the Relay UE, as well as IP address assignment).
\- One-to-many communication over PC5 defined in Rel-12 is needed only if
multicast delivery is required over PC5.
\- The Relay UE needs to support IP router functionality.
Application-level considerations:
\- Support broadcasting group call setup message by 1:m communication
mechanism over PC5.
##### 5.4.1.1.4 Solution evaluation
This solution can work as the solution for both Off-Network and Off-Network
with ProSe UE-to-UE Relay MCPTT group call establishment.
### 5.4.2 On-network
#### 5.4.2.1 Solution 4-2-1: Group management - search
##### 5.4.2.1.1 Functional description
If an MCPTT user wants to determine the currently defined MCPTT groups for
which the user is authorized to, the solution for meeting this requirement is
described in this clause where the MCPTT user initiates a search request.
Upon receiving the request from an MCPTT user to search the authorized groups,
as per the solution described in this clause, the group management server
validates and authorizes the search request, executes the search request and
refines the result set, generates response and conveys the result to the MCPTT
user requested search.
##### 5.4.2.1.2 Procedures
Figure 5.4.2.1.2-1: Group Management - Search
Parameters used in search request and response:
\- target -- instructs where to search i.e., location of stored data on which
the search operation has to be performed e.g., group documents stored on group
management server. The target may include target from remote domain as well
e.g., in cases when the search target is beyond the \"home\" domain of the
querying MCPTT user.
\- input -- instructs what to search i.e., data that needs to be searched for,
within the specified \"target\" e.g., search MCPTT user ID in the Group
Documents stored on group management server.
\- result -- is the result set returned for the search request i.e., data that
is the result of \"input\" searched in the \"target\" e.g., list of MCPTT
Groups where the MCPTT ID is found within the group documents stored on group
management server.
1-2. Upon receiving the request from an MCPTT user to determine the currently
defined MCPTT groups for which the user is authorized to, the MCPTT UE1 group
management client generates a HTTP Query request including the \"input\" e.g.,
MCPTT user ID, \"target\" to search and send it towards the HTTP Proxy.
3\. HTTP Proxy relays the request towards the target specified in the search
request i.e., the group management server where the Group Documents are
stored.
4\. Group management sever validates the HTTP Query request format and
authorizes.
5\. Group management server executes the HTTP Query i.e., search operation is
performed to identify the MCPTT user ID within the stored MCPTT group
documents. If the MCPTT user ID is found in one or more MCPTT groups, the
group management server accrues and refines the result set.
6-7. Group management server generates the response including the \"result\"
set i.e., list of MCPTT groups that the user is authorized to. The response is
then sent to group management client on MCPTT UE-1 via the HTTP Proxy.
NOTE1: To distinguish each search request a unique id shall be used which is
also used to correlate the search request with the corresponding response.
##### 5.4.2.1.3 Impact on existing entities and interfaces
None.
##### 5.4.2.1.4 Solution evaluation
It is proposed to not consider MCPTT user/UE initiated search mechanism for
determining in which of the MCPTT groups for which MCPTT user/UE is authorized
there is an ongoing MCPTT group call but use other mechanism like server
initiated notifications.
#### 5.4.2.2 Dynamic group management
Group Regroup is a dynamic group management mechanism which enables
dispatchers or any authorized user to temporarily combine the MCPTT Groups
into a temporary group.
Editor's note: The term Dynamic Group Management requires further
consideration.
##### 5.4.2.2.1 Solution 4-2-2-1: Group regroup for groups within the same
MCPTT system
###### 5.4.2.2.1.1 Functional description
The groups being combined are within the same MCPTT system.
Figure 5.4.2.2.1.1-1: Group Regroup within a MCPTT system
The temporary group thus formed consists of the MCPTT Group members of the
constituent MCPTT groups.
The temporary group shall be created by the MCPTT service to which the
Authorized MCPTT user or Dispatcher belongs to. (i.e., the group information
management belongs to the MCPTT service to which the temporary group creator
belongs to)
The temporary group shall persist until torn down by an authorized MCPTT User.
###### 5.4.2.2.1.2 Procedures
An example procedure of the Group Regroup operation is illustrated below:
Figure 5.4.2.2.1.2-1: Group Regroup for the groups within the same MCPTT
system
1\. The GMF Client of the Dispatcher/Authorized MCPTT User/UE requests Group
Regroup operation to the GMF, where the groups being combined are within the
same MCPTT system. The identities of the groups being combined should be
included in this message.
2\. Optionally, the GMF may request permission from the owner or administer or
group members of the constituent MCPTT groups.
3\. During the Temporary Group creation, the GMF creates and stores the
information of the temporary group, including the temporary group identity,
off-network information, and the identities of the groups being combined,
priority of the temporary group, security level of the temporary group and so
on.
4\. The GMF notifies the MCPTT AS regarding the Temporary Group creation with
the information of the constituent groups.
5\. The affiliated MCPTT Group members of the constituent MCPTT groups are
notified.
6\. The GMF provides an ACK response to the GMF Client of the
Dispatcher/Authorized MCPTT User/UE, indicating the Group Regroup operation
completion.
NOTE: Step 2 may be performed before the Group Regroup Operations according to
the operator's policy.
Editor's note: Further solutions for achieving the Group Regroup within the
same MCPTT system are FFS.
###### 5.4.2.2.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
###### 5.4.2.2.1.4 Solution evaluation
This solution is similar to solution 4-2-2-2 except that solution 4-2-2-1 is
for one single MCPTT system. Since solution 4-2-2-2 was accepted for normative
phase with approval of information in subclause 7.4.1, solution 4-2-2-1 should
also be adopted for normative phase to allow same mechanism for group regroup
independently whether groups belong to the same MCPTT system or to different
MCPTT systems.
##### 5.4.2.2.2 Solution 4-2-2-2: Group regroup for groups from the different
MCPTT systems
###### 5.4.2.2.2.1 Functional description
The groups being combined are from the different MCPTT systems, i.e. Primary
MCPTT system and Partner MCPTT systems.
Figure 5.4.2.2.2.1-1: MCPTT Groups from the different MCPTT systems
The MCPTT groups belonging to different MCPTT systems can be dynamically
regrouped only if there exists a service provider agreement between them. i.e.
Primary MCPTT system and Partner MCPTT system.
If the MCPTT groups being dynamically regrouped belong to different MCPTT
systems, the security aspects of sharing the user information shall be
governed as per the service provider agreement between the Primary MCPTT
system and the Partner MCPTT system.
The temporary group shall be created by the MCPTT service to which the
Authorized MCPTT user or Dispatcher belongs to. (i.e., the group information
management belongs to the MCPTT service to which the temporary group creator
belongs to)
The temporary group shall persist until torn down by an authorized MCPTT User.
###### 5.4.2.2.2.2 Procedures
The procedure below presents an example of procedure for the Group Regroup
operations to create a newly temp group.
**Figure 5.4.2.2.2.2-1: Group Regroup for the groups from the different MCPTT
systems**
1\. The GMF Client of the Dispatcher/Authorized MCPTT User/UE requests Group
Regroup operation to the GMF1 (which is the GMF from the Dispatcher/Authorized
MCPTT User/UE home network). The identities of the groups being combined
should be included in this message.
2\. Optionally, the GMF1 may request permission from the owner or administer
or group members of its constituent MCPTT groups.
3\. GMF1 forwards the Group Regroup request to the target GMF2 with the
information of GMF2 MCPTT groups.
4\. Optionally, the GMF2 may request permission from the owner or administer
or group members of its constituent MCPTT groups.
5\. GMF2 provides a Group Regroup Response. Due to security aspects concerning
sharing information among different MCPTT systems, GMF2 does not share the
users' information of the groups under its management to GMF1.
6\. During the Temporary Group creation, the GMF1 creates and stores the
information of the temporary group, including the temporary group identity,
off-network information, and the identities of the groups being combined,
priority of the temporary group, security level of the temporary group and so
on.
7\. The GMF1 notifies the MCPTT AS1 regarding the Temporary Group creation
with the information of the constituent groups.
8\. The affiliated MCPTT Group members of the constituent MCPTT groups of GMF1
are notified.
9\. GMF1 notifies GMF2 about its Group regroup operation.
10\. The GMF2 notifies the MCPTT AS2 regarding the Temporary Group creation
with the information of the constituent groups.
11\. The affiliated MCPTT Group members of the constituent MCPTT groups of
GMF2 are notified.
12\. The GMF1 provides an ACK response to the GMF Client of the
Dispatcher/Authorized MCPTT User/UE, indicating the Group Regroup operation
completion.
NOTE 1: The GMF services may not communicate directly, and may route through
some other network entities such as interworking gateways or SIP Cores, which
have not been specified for clarity.
NOTE 2: Step 2 and Step 4 may be performed before the Group Regroup Operations
according to the operator's policy.
Editor's note: Further solutions for achieving the Group Regroup across
Primary and Partner MCPTT systems are FFS.
###### 5.4.2.2.2.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
###### 5.4.2.2.2.4 Solution evaluation
This solution was accepted for normative phase with approval of information
flows in subclause 7.4.1.
## 5.5 Call control/Signalling
### 5.5.1 Off-network
### 5.5.2 On-network
#### 5.5.2.1 Solution 5-2-1: MCPTT group call resources allocation
(alternative #1)
##### 5.5.2.1.1 Functional description
In the MCPTT Group Call setup procedure needed resources shall be allocated.
It is the MCPTT AS responsibility to allocate these resources. The MCPTT AS
may request resources from network layer, and the network layer has the
possibility to accept or reject these requests. It is assumed that a bearer
for signalling is already established.
In the figure below a solution for resource allocation of unicast bearer is
described.
{width="7.063194444444444in" height="2.8381944444444445in"}
Figure 5.5.2.1.1-1: EPS bearer allocation in a MCPTT Group Call setup
Editor's note: It is FFS how multiple MCPTT group affiliations and MCPTT Calls
will share EPS bearers and how these EPS bearers may be modified when resource
requirements are changed.
##### 5.5.2.1.2 Procedures
The following call flow illustrates EPS bearer allocation during MCPTT Group
Call setup. For simplicity the SIP core is not illustrated in the call flow.
{width="4.917361111111111in" height="4.629861111111111in"}
Figure 5.5.2.1.2-1: EPS bearer allocation in a MCPTT Group Call setup
1\. MCPTT Group Affiliation User A, no resource allocation is done at this
step.
2\. MCPTT Group Affiliation for other users, no resource allocation is done at
this step.
3\. MCPTT Group Call Setup, initiated by SIP INVITE message sent from the UE
to the MCPTT AS. The SIP INVITE also triggers a request of resource from AF to
PCRF over the Rx reference point, and an EPS bearer is established suitable
for RTP and RTCP traffic.
4\. MCPTT Group Call Setup sent to other users with a SIP INVITE. This also
triggers a request of resources on from AF to PCRF over the Rx reference point
and an EPS bearer is established to all users affiliated to the MCPTT Group.
5\. User A sends a Floor request message to the MCPTT AS.
6\. MCPTT AS send a Floor taken message to all MCPTT users that are affiliated
to this group.
7\. The receiving UE may send a floor taken acknowledge message if requested
by the MCPTT server. A MCPTT Group Call setup procedure may requests that all
receiving users shall send this or that some of the users should send this
acknowledge message.
8\. In case that the MCPTT Group Call commencement conditions are fulfilled a
Floor request granted message is sent back to the transmitting users,
indicating that the MCPTT Group Call has been successfully been setup
NOTE: EPS bearers are established to carry RTP/UDP media from User A to all
receiving users.
9\. The transmitting user sends a Floor release message to MCPTT AS
10\. The Floor released message is sent to all receiving users.
11\. MCPTT Group Call termination. After a period of inactivity SIP BYE is
sent from MCPTT AS to all users. All EPS bearers for RTP media are released.
12\. The MCPTT user de-affiliates from the MCPTT Group
##### 5.5.2.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.1.4 Solution evaluation
Editor's note: The fulfilment of requirements will be evaluated.
#### 5.5.2.2 Solution 5-2-2: MCPTT group call resources allocation
(alternative #2)
##### 5.5.2.2.1 Functional description
In the MCPTT Group Call setup procedure needed resources shall be allocated.
It is the MCPTT AS responsibility to allocate these resources. The MCPTT AS
may request resources from network layer, and the network layer has the
possibility to accept or reject these requests. It is assumed that a bearer
for signalling is already established,
In the figure below a solution for resource allocation of unicast bearer is
described.
{width="7.059027777777778in" height="2.873611111111111in"}
Figure 5.5.2.2.1-1: EPS bearer allocation in a MCPTT Group Call setup
Editor's note: It is FFS how multiple MCPTT group affiliations and MCPTT Calls
will share EPS bearers and how these EPS bearers may be modified when resource
requirements are changed.
Editor's note: It is FFS if resource allocation is needed even before MCPTT
Group affiliation.
##### 5.5.2.2.2 Procedures
The following call flow illustrates EPS bearer allocation at MCPTT Group
Affiliation and E-RAB activation including paging during MCPTT Group Call
setup. For simplicity the SIP core is not illustrated in the call flow.
{width="4.929166666666666in" height="4.636111111111111in"}
Figure 5.5.2.2.2-1: EPS bearer allocation at MCPTT Group Affiliation
1\. MCPTT Group Affiliation User A includes a SIP INVITE. The SIP INVITE also
triggers a request of resource from AF to PCRF over the Rx reference point,
and an EPS bearer is established suitable for RTP and RTCP traffic.
2\. MCPTT Group affiliation for other users that also are interesting to
receive the MCPTT group media in this group. This also include EPS bearer
establishment.
3\. MCPTT Group Call Setup, normally triggered by a Floor request message sent
from the UE to the MCPTT AS. The eNB will send a service request to MME, which
will trigger setup of the E-RAB between the UE and S-GW. This setup allocates
the needed network resources for the transmitting user.
4\. Floor Taken message is sent from MCPTT AS to all users affiliated to the
group. This message trigger in the case it is needed paging to receiving users
that are not in connected mode and E-RAB will be established. This message
allocates the needed network resources for the receiving users.
5\. The receiving UE may send a floor taken acknowledge message if requested
by the MCPTT server. A MCPTT Group Call setup procedure may requests that all
receiving users shall send this or that some of the users should send this
acknowledge message.
6\. In case that the MCPTT Group Call commencement conditions are fulfilled a
Floor request granted message is sent back to the transmitting users,
indicating that the MCPTT Group Call has been successfully been setup.
NOTE: EPS bearers are established to carry RTP/UDP media from User A to all
receiving users.
7\. The transmitting user sends a Floor release message to MCPTT AS
8\. The Floor released message is sent to all receiving users.
NOTE: After a period of inactivity the radio bearer and E-RAB are released.
9\. The MCPTT user de-affiliates from the MCPTT Group, SIP BYE is sent from
User A and the EPS bearer used for RTP media is terminated.
##### 5.5.2.2.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.2.4 Solution evaluation
Editor's note: The fulfilment of requirements will be evaluated.
#### 5.5.2.3 Solution 5-2-3: Solution for on-network pre-arranged group call
set up
##### 5.5.2.3.1 Functional description
The solution focuses on the case where an authorized MCPTT user is initiating
an MCPTT group call for communicating with the affiliated MCPTT members of
that group.
Assumptions:
1\. MCPTT group is previously defined on the Group management server with
MCPTT users affiliated to that group.
2\. MCPTT group members are to be notified about the group call setup.
3\. MCPTT members joining the group call in response to receiving the request
to join i.e., no late entry.
##### 5.5.2.3.2 Procedures
Figure 5.5.2.3.2-1: Pre-arranged Group call Set up
Procedures in figure 5.5.2.3.2-1 are the basic signalling/control plane
procedures for the MCPTT UE initiating establishment of MCPTT group
communication with a pre-arranged group i.e., MCPTT UE-1, UE-2 and UE-3 belong
to the same group which is defined on MCPTT Server (Group Host).
1\. It is assumed that MCPTT users on MCPTT UE1, UE2 and UE3 are already
registered for receiving MCPTT service and affiliated.
2\. User at MCPTT UE1 would like to initiate an MCPTT group call with a
selected group (identified by Group ID).
NOTE 1: MCPTT UE1 may not be aware of affiliation status of other MCPTT UEs to
the group while initiating the group call.
3\. MCPTT UE1 sends an INVITE message towards the MCPTT Server, which hosts
the group selected by the user and identified by Group ID.
NOTE 2: There could be intermediate entities that the INVITE message may go
through before reaching the MCPTT Server (Group Host), and are intentionally
omitted for simplicity.
4\. MCPTT Server checks whether user of MCPTT UE1 is authorized for initiation
of group call for the selected group, and if authorized, it resolves the Group
ID to determine the members of that group, based on the information from Group
Management Server.
5\. MCPTT Server sends the corresponding INVITE message towards the MCPTT UE's
of each of those affiliated group members. MCPTT users are notified about the
incoming group call.
6\. The receiving MCPTT UEs accept the group call INVITE message(s), and an
acknowledgement is sent to the hosting MCPTT Server (Group Host).
NOTE 3: Depending on the group call commencement mode, the INVITE message is
either automatically accepted by the receiving UEs or manually through user
consent.
7\. Upon receiving the first MCPTT UE accepting the group call INVITE message,
MCPTT UE1 is informed about successful call establishment.
8\. MCPTT UE1, UE2 and UE3 have successfully established media plane for
communication.
9\. MCPTT UE1, UE-2 and UE-3 exchange Floor Control messages e.g., MCPTT UE-1
receives the Floor Granted message over the established media plane, while the
other MCPTT UE's receive Floor Taken message. MCPTT UE1 indicates to the MCPTT
user that the floor is available to send media, while the other MCPTT UEs in
the group call will be receiving that media.
##### 5.5.2.3.3 Impact on existing entities and interfaces
None.
##### 5.5.2.3.4 Solution evaluation
The solution for group call is already captured in subclause 7.5.1 and
subclause 7.5.2 (further transferred to 3GPP TS 23.179 [28]).
#### 5.5.2.4 Solution 5-2-4: Solution for on-network late call entry
##### 5.5.2.4.1 Functional description
The solution focuses on the case where an affiliated MCPTT Group Member joins
an in-progress MCPTT Group Call. More particularly the proposed solution
considers MCPTT UE initiating a late call entry whereas there could be other
solutions for server initiated late call entry.
Assumptions:
1\. MCPTT Group Member is aware of the Group ID and that there is an in-
progress MCPTT Group Call for that Group ID.
##### 5.5.2.4.2 Procedures
Figure 5.5.2.4.2-1: Late Call Entry
Procedures in figure 5.5.2.4. 2-1 are the basic signalling/control plane
procedures for the MCPTT UE initiating request to join an in-progress MCPTT
Group Call, hosted by a MCPTT Server.
1\. 1. It is assumed that MCPTT UE1, UE2 and UE3 are already registered for
receiving MCPTT service.
2\. MCPTT UE-2 to UE-n are in a MCPTT Group Call (identified by Group ID) with
media plane established for communication.
3\. MCPTT Group Member is aware of the Group ID where an MCPTT Group Call is
ongoing e.g., by searching active groups where user is affiliated to, prior
notification received from the MCPTT Server.
4\. User at MCPTT UE1 would like to join a selected MCPTT group call
(identified by Group ID).
5\. MCPTT UE1 sends an INVITE message towards the MCPTT Server, which hosts
the group selected by the user and identified by Group ID.
NOTE 1: There could be intermediate entities that the INVITE message may go
through before reaching the MCPTT Server (Group Host), and are intentionally
omitted for simplicity.
6\. MCPTT Server checks whether user of MCPTT UE1 is authorized for joining
the group call identified by Group ID is in-progress.
7\. Upon successful authorization, an acknowledgement is sent by the hosting
MCPTT Server (Group Host) towards MCPTT UE-1.
8\. MCPTT UE1 establishes the media plane for communication with UE-2 to UE-n.
NOTE 2: MCPTT users already in the MCPTT Group Call may be notified about the
new user joining in.
##### 5.5.2.4.3 Impact on existing entities and interfaces
None.
##### 5.5.2.4.4 Solution evaluation
It is proposed to not consider MCPTT client initiated procedure for late call
entry but use other mechanism like server initiated procedures.
#### 5.5.2.5 Solution 5-2-5: Chat group call with implicit affiliation
##### 5.5.2.5.1 Description
The information flow in figure 5.5.2.5.2-1 is the basic flow for the MCPTT
client initiating an MCPTT group call which uses the chat group call model.
The chat group call model allows for optimizations in control plane signaling.
This procedure illustrates these optimizations as well as what it means to
join and participate in a group call using the chat model.
Chat group join mechanism:
\- Instead of the MCPTT server sending an MCPTT group call request to each
MCPTT client that is affiliated with the MCPTT group at the start of a call
(when the group is using the chat model), each MCPTT client send an _MCPTT
group join request_ when the MCPTT user wants to affiliate to the group.
\- The MCPTT group join request is not a request to transmit. It does not use
the media plane. It is assumed that the MCPTT group join request will be
delivered from MCPTT client to MCPTT server using SIP.
\- The MCPTT group join request is used to indicate to the MCPTT server that
the MCPTT user associated with the given MCPTT client wishes to participate
(begin to receive media) from the group.
\- The MCPTT group join request can be used to generate an implicit
affiliation for the MCPTT user to the group.
\- The MCPTT group join request normally contains the information needed to
negotiate media parameters between MCPTT server and MCPTT client for the group
call. The group join request can take the form of a SIP invite.
Subsequent participation in a group call when the group is using the chat
model:
\- Once an MCPTT client successfully joins a group call which is using the
chat model, the MCPTT client connects to the media plane for the call if the
call is currently ongoing.
\- If the MCPTT group call is not currently ongoing (i.e.: no MCPTT clients on
the group call are not sending or receiving media, and the time out between
floor control exchanges has expired) then the newly joined MCPTT client will
only have pre-established its media parameters for the call.
\- If the newly joined MCPTT user wishes to transmit media (start or re-start
the call) to the affiliated users of the group using the chat model, then the
MCPTT client using its associated floor control participant would follow a
normal floor control procedure for requesting the floor.
\- Since group call start and stop are handled using floor control signaling,
SIP signaling messages are not required for subsequent call stop and start.
\- Each request to transmit from and MCPTT user could be viewed as a new
instance of a group call for the given group when the floor idle timer expires
and no media is present for an extended time.
\- The MCPTT server may tear down the media plane between successive group
calls using the chat model, or the MCPTT server may allow the media plane to
remain up between successive group calls using the chat model depending on
resources.
##### 5.5.2.5.2 Procedure
MCPTT client 1, client 2, and client 3 are served by the home MCPTT service
provider in figure 5.5.2.5.2-1.
Assumptions:
\- the MCPTT server will use the MCPTT group join request to generate an
implicit affiliation (using the affiliation procedure) on behalf of the client
that sends this message.
Figure 5.5.2.5.2-1: MCPTT chat group call with implicit affiliation
1\. Initial condition: MCPTT user 2 and MCPTT user 3 have previously joined
(affiliated) to the group. MCPTT client 1, client 2, and client 3 are
registered and all users (MCPTT user 1, user 2, and user 3) have been
authenticated and authorized to use the MCPTT service. No call is currently in
progress for the group.
2\. MCPTT user 1 indicates to join (affiliate) to the group. This is not a
request to transmit. MCPTT user 1 performs an action to cause an affiliation
for the group that is using the chat model.
2a. MCPTT client 1 sends an MCPTT group join request with the group identity
of the desired group. It contains the MCPTT user MCPTT ID and the MCPTT client
media parameters.
2b. The MCPTT server receives the group join request. MCPTT server generates
an implicit affiliation and verifies that MCPTT user 1 is authorized to
affiliate to the group by following the affiliation procedure.
2c. The MCPTT server replies with an OK indicating the acceptance of the MCPTT
join (an affiliation confirmation success) and also returns the MCPTT server
selected media parameters for the group call in the OK.
3\. MCPTT user 1 requests to transmit. As a result, the MCPTT server
establishes the media plane (if not already established) for the call. The
associated floor participant for MCPTT client 1 uses the floor control
procedure to initiate the call. The floor participant for MCPTT client 1
receives the MCPTT floor grant. The corresponding floor participants for MCPTT
client 2 and MCPTT client 3 receive the MCPTT floor taken.
4\. Floor control will continue to be used by the floor participants
associated with MCPTT client 1, MCPTT client 2 and MCPTT client 3 for the
duration of the call. Media plane signaling using floor control will be used
for subsequent calls for the group as long as one or more users are
affiliated.
##### 5.5.2.5.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.5.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
#### 5.5.2.6 Solution 5-2-6: MCPTT group call MBMS resources allocation
##### 5.5.2.6.1 Functional Description
In the MCPTT group call setup procedure needed resources shall be allocated.
It is the MCPTT AS responsibility to allocate these resources. MBMS bearers
shall be activated before the MCPTT group call setup. It is assumed that a
bearer for signalling is already established as well as the media bearer used
by the user that request floor and send media.
In figure 5.5.2.6.1-1 a solution for resource allocation of MBMS bearer is
described.
Figure 5.5.2.6.1-1: MBMS bearer allocation before a MCPTT group call setup
##### 5.5.2.6.2 Procedures
The following call flow in figure 5.5.2.6.2-1 illustrates MBMS bearer
allocation before the MCPTT group call setup. For simplicity the IMS/SIP core
is not illustrated in the call flow.
Figure 5.5.2.6.2-1: MBMS bearer allocation before MCPTT group call setup
Editor\'s note: The server in the call flow comprise of several of the MCPTT
functional entities e.g. floor request server, GCS AS. This server needs to be
broken down to relevant functional entities before it can be used in
specification material.
1\. The server activates the MBMS bearer, when the server decides that it is
needed. This is done according to the procedures defined in 3GPP TS 23.468
[3], and this result in that an MBSFN is activated in the radio network. The
important input to the activation is SAI, TMGI, GBR and the time when it shall
be active.
2a. MCPTT group affiliation user A. In this step the user A informs the server
that is interested in receiving and transmitting calls for the MCPTT group
that the user affiliates to.
3a. As a result of the MCPTT group affiliation process the server informs the
MCPTT user of the existing MBMS bearer and how to receive the MCPTT group call
media over this bearer.
Editor\'s note: It is FFS whether MBMS, unicast will be used for service
announcement.
2b. Similar as 2a but for other users.
3b. Similar as 3a but for other users.
4\. MCPTT Group call setup including the floor request message. It is assumed
that the IMS/SIP session is already established. This message is sent over a
unicast bearer or other access. The establishment of the GBR bearer for the
uplink is not covered in this call flow.
When the server processes this request, it will reserve capacity for the MCPTT
Group call in the previously activated MBMS bearer.
Editor\'s note! Additional signalling in this step is FFS.
5\. Floor taken message is sent to all receiving users (e.g. via RTCP
messages). This message is sent on the MBMS bearer. The receiving users may
stay in RRC_IDLE mode.
6\. In case that the MCPTT group call commencement conditions are fulfilled a
floor request granted message is sent back to the transmitting users,
indicating that the MCPTT group call has been successfully setup.
RTP media is sent from user A to server over a unicast bearer. The MCPTT AS
sends the media to the receiving users over MBMS bearer via BMSC.
7\. The transmitting user sends a floor release message to MCPTT AS
8\. The floor released message is sent to all receiving users over the MBMS
bearer
After an idle period the call is released. The server reserved capacity in the
MBMS bearer is release so other MCPTT group call can use this capacity.
Editor\'s note: It is FFS if the use of MBMS bearer for a MCPTT call should be
re-evaluated during the call. This could be justified if the MBMS capacity is
fully used and other group call starts that have more users in the broadcast
area than the ongoing call.
NOTE: The MBMS bearer is kept active until the server decides to deactivate
it.
##### 5.5.2.6.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.6.4 Solution evaluation
Editor's note: The fulfilment of requirements will be evaluated.
#### 5.5.2.7 Solution 5-2-7: Associating an MCPTT group call with a multicast
bearer
##### 5.5.2.7.1 Description
The information flow in figure 5.5.2.7.2-1 describes how the MCPTT server can
associate an existing multicast bearer with an MCPTT group call for a given
MCPTT user. Once the association is conveyed to the given MCPTT client, the
media resource function associated with MCPTT client connects to the multicast
bearer based on this association.
Prior to this flow it is assumed:
1\. An MBMS bearer is established and active well in advance of the MCPTT
group call.
2\. The MCPTT server is acting as a GCSE AS.
3\. The MCPTT server uses the MB2 reference point according to 3GPP TS 23.468
[3]. The procedures of the MB2 interface allow the MCPTT server to establish
the mapping of SAI to TMGI and GBR for the purposes of assigning subsequent
group call media within the given MBSFNs.
4\. The MCPTT server is able to track individual MCPTT users via the GC1
reference point in order to know to which SAI (and corresponding MBFSN) a
particular MCPTT user is connected for the purposes of efficient assignment
and utilization of multicast bearers within a multicast service area. The
MCPTT server will track the available/assigned capacity for multicast bearers
it has activated.
5\. An MCPTT UE can connect to the MBMS bearer for a given group call based on
an SDP. The SDP relates the TMGI and other pertinent information necessary to
receive media on the MBMS bearer.
##### 5.5.2.7.2 Procedure
**Figure 5.5.2.7.2-1: Associating an MCPTT group call with a multicast
bearer**
1\. Initial Conditions: MCPTT user 2 through _n_ have previously affiliated
(joined) the chat group. MCPTT client 2 through client _n_ have been
authenticated by the SIP core and all users in the flow have been
authenticated and authorized to use the MCPTT Service, and are authorized to
participate in the given MCPTT group call. A call is currently in progress for
this group when MCPTT User 1 decides to affiliate to this group. Downlink
media is already being sent to those MCPTT UEs 2 through _n_ on existing
multicast bearer(s) that are within the given MBFSN for the respective MCPTT
UEs.
2\. MCPTT client 1 indicates to join (affiliate) to the group.
2a. MCPTT client 1 sends an MCPTT group join request to the MCPTT server with
the group identity of the desired group, the MCPTT user MCPTT ID, and the
MCPTT client media parameters.
2b. The MCPTT server generates an implicit affiliation and verifies that MCPTT
user 1 is authorized to affiliate to the group by following the affiliation
procedure.
2c. The MCPTT Server replies with an OK indicating the acceptance of the MCPTT
group join request, and conveying associated multicast media bearer parameters
(this includes the TMGI which will be used by the given MCPTT UE for this
group call).
Editor\'s note: It is FFS whether MBMS will be used for the MBMS Service
Announcement procedure which is described in 3GPP TS 23.246 [26].
3\. The media resource function associated with MCPTT client connects to the
multicast bearer for this group call based on the SDP received from the MCPTT
server in 2c.
3a. The Radio access/core network sends a [RRC] MBSFN area configuration
message over the MCCH logical channel which is received by MCPTT media
resource function associated with MCPTT client 1. This message is present on
the MCCH independent of the exchange in this flow that occurs via the GC1
reference point between the MCPTT server and MCPTT client for this group call.
3b. MCPTT client 1 may sends a MCPTT media parameter update to let the MCPTT
server know that MCPTT client has connected to the multicast bearer for this
MCPTT group call.
3c. The MCPTT server replies with an OK to confirm the connection based on the
GC1 application layer current SDP media parameters necessary to successfully
receive the media on the multicast bearer for this group.
##### 5.5.2.7.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.7.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
#### 5.5.2.8 Solution 5-2-8: group call procedures based on solution 2-4
##### 5.5.2.8.1 Call session setup procedure (originating)
This procedure, as described in figure 5.5.2.8.1-1, is used to setup a call
when no session exists for the corresponding media or when acknowledgement is
required from at least some of the call recipients.
NOTE: Does not apply to permanently established calls.
Figure 5.5.2.8.1-1: Unicast call session setup procedure (originating)
1\. The initiation of a new group call is initiated by the user application
with a setup request.
2\. The MCPTT client sends an MCPTT call setup request message to the MCPTT
server managing the corresponding group through the serving AEP. The request
is addressed to the group URI. The AEP un-hides the identities in the MCPTT
call setup message.
3\. The MCPTT call setup request message is routed to the appropriate MCPTT
server by the serving AEP. An identifier for the call session is allocated by
the MCPTT server.
4\. The reception of the request by the MCPTT server triggers the transmission
of setup request messages to the called parties, using either the procedure in
subclause 5.5.2.8.2 or the procedure in subclause 5.5.2.8.6, depending on the
availability of a broadcast channel and/or the need for an explicit
acknowledgement. Message contains the identifier for the call session. The
called parties are the MCPTT clients in the appropriate geographic area which
have affiliated to the corresponding group.
5\. If acknowledgements have been required, current progress of the setup may
be sent to the calling MCPTT client by the MCPTT server using a Session
progress responses containing the progress information.
In steps 6-7, the progress information is routed to the MCPTT client and
reported to the user application.
8\. The OK response is generated by the MCPTT server and sent back to the
calling MCPTT client. The message contains the identifier of the call session.
In steps 9-10, the OK message is routed to the MCPTT client, user application
is notified of the successful setup.
11\. Calling MCPTT client starts transmitting the media flow.
12\. Media flow is relayed to the other MCPTT clients in the call using either
unicast or broadcast bearer.
##### 5.5.2.8.2 Unicast call session setup procedure (terminating)
This procedure, as described in figure 5.5.2.8.2-1, is used for setup when the
call is not pre-established and when either an explicit acknowledgement is
required or when no broadcast bearer is available for a broadcast setup as per
subclause 5.5.2.8.6.
Figure 5.5.2.8.2-1: Unicast call session setup procedure (terminating)
1\. MCPTT server managing the group generates a MCPTT call setup request
message for at least for every MCPTT client for which an explicit
acknowledgement is required and for serving EAP which are serving affiliated
members of the group. The message contains the identifier of the called group,
an identifier of the calling party, if not hidden and the identifier of the
target MCPTT client for those UEs where an explicit acknowledgement is
required. The message also contains the identifier of the call session to
allow for later re-join.
2\. MCPTT call setup request message targeting an MCPTT client requiring
acknowledgement are routed to the corresponding UE by the serving AEP.
Otherwise, the MCPTT call setup request messages are generated for each
corresponding MCPTT clients by the serving AEP. Serving AEP hides the
application level identities and routes the messages to the UEs through the
SIP core
3\. At reception of the MCPTT setup request message, user application is
informed of the setup of the call, including the calling party identity if
available. Acknowledgement may be automatic or manual and various indications
may be used.
4\. Acknowledgement to complete the call setup may be manual or automatic.
Steps 5-6 correspond to a normal call setup completion.
7\. User application receives the indication of session setup completion.
##### 5.5.2.8.3 Unicast call session leave procedure
When a MCPTT client having an established unicast session is willing to leave
a group call, it shall release the corresponding media session, as described
in figure 5.5.2.8.3-1.
NOTE: Leaving the call does not release the call, i.e. trigger release for the
other participating parties.
Figure 5.5.2.8.3-1: Unicast call session leave procedure
1\. For leaving a call, the user application (requested by the user) sends a
leave request to the MCPTT client client to request the release of the call
session for a given group call (defined unambiguously by the group and the
identifier of the group). The request shall indicate that the call is not to
be released.
2\. The MCPTT client determines the corresponding MCPTT call session and sends
an MCPTT leave request message to request the release of the session.
3\. If the corresponding setup message has been generated by the EAP, go to
step 5. Otherwise, the MCPTT leave request message is routed to the
corresponding MCPTT server.
4\. The leave message is acknowledged by the MCPTT server.
5\. Acknowledgement is routed to the MCPTT client.
6\. The success of the leave procedure is confirmed to the user application.
Note: Steps 3 and 4 allows the MCPTT server to keep track of the leaving
users, for those whose acknowledgement has been initially required.
##### 5.5.2.8.4 Call release procedure (originating)
This procedure applies for a call which has been setup using the procedure of
subclause 5.5.2.8.1. The release may be performed by an authorised MCPTT
client and this MCPTT client shall have an established unicast session to
release the corresponding call. The release of the call performs the release
of the corresponding call session for the originator and triggers the release
of the call for the other parties.
The procedure for the release is described in figure 5.5.2.8.4-1.
Figure 5.5.2.8.4-1: group call release (originating)
1\. The user application (requested by the user) sends a release request to
the MCPTT client client to request the release of a given group call (defined
unambiguously by the group and the identifier of the group). The request shall
indicate that the call is to be released.
2\. The MCPTT client determines the corresponding call session and sends a
MCPTT release request message to request the release of the call.
3\. The MCPTT release request message is routed by the serving AEP to the
corresponding MCPTT server. AEP un-hides identities.
4\. The MCPTT server triggers the release for all other parties of the call,
using either the procedure of subclause 5.5.2.8.7 or procedure of subclause
5.5.2.8.5.
Steps 5-6 correspond to normal completion of the corresponding transaction.
7\. The acceptance of the release procedure is confirmed to the user
application.
##### 5.5.2.8.5 Unicast call release procedure (terminating)
The unicast call release is performed for the called parties connected in
unicast when the release has been requested by an authorised party as provided
in subclause 5.5.2.8.4 or when some conditions under the control of the MCPTT
server are met, for example call duration or available coverage or number of
participants.
The procedure is presented in figure 5.5.2.8.5-1.
Figure 5.5.2.8.5-1: unicast group call release (terminating)
0\. The conditions for release are met as determined by the MCPTT server. The
condition may be the MCPTT release request by an authorised MCPTT client or
some conditions determined by the MCPTT server.
1\. The MCPTT server sends an MCPTT release request message to each of the
MCPTT clients for which an individually addressed MCPTT call setup request
message has been sent in step 1 of subclause 5.5.2.8.2. The MCPTT server also
sends an MCPTT release request message to every AEP to which a MCPTT call
setup request message has been sent in step 1 of subclause 5.5.2.8.2. The
MCPTT release request message shall unambiguously reference the session
corresponding to this call.
2\. If the MCPTT release request message is corresponding to an individually
addressed MCPTT call setup request received in step 2 of subclause 5.5.2.8.2,
it is routed to the UE by the serving AEP through the SIP core. Otherwise, for
each MCPTT client for which a MCPTT call setup request message has been
generated by the serving AEP per step 2 of subclause 5.5.2.8.2, a
corresponding MCPTT release request message is generated and is routed through
the SIP core to the corresponding MCPTT client. AEP hides the identities
before routing the messages.
3\. User application is notified of the release of the call.
Steps 4-5 correspond to normal completion of the release.
##### 5.5.2.8.6 Broadcast call setup procedure (terminating)
This procedure, as described in figure 5.5.2.8.6-1, is used for the setup of a
call session which is not pre-established when a broadcast bearer is available
and when explicit acknowledgement from the called party is not required.
Figure 5.5.2.8.6-1: Broadcast call setup procedure (terminating)
0\. Prior to setup, the MCPTT UE application has determined a broadcast bearer
on which reception of signalling may occur and is monitoring the corresponding
broadcast bearer.
1\. When the group call is setup, the application server managing the group
may elect to send setup signalling using broadcast bearer through MB2-U
reference point. It can be done at any time later to support late entry
feature.
1a. Setup message is repeated by the application server to allow for lost
messages and late entry.
2\. Setup indication is provided to MCPTT UE user application for acceptance
or refusal of the call (for example, based on call priority or client
configuration)
3\. Setup response indicates acceptance or refusal and configures reception
accordingly.
4\. Media flow is sent from application server to MB2-U reference point for
broadcast.
##### 5.5.2.8.7 Broadcast call release procedure (terminating)
This procedure, as described in figure 5.5.2.8.7-1, is used to release a call
for MCPTT UEs which are receiving the call session using a broadcast bearer.
Figure 5.5.2.8.7-1: Broadcast call release procedure
0\. Media flow continues to be sent from the application server managing the
group to the MCPTT UE(s) through the EPS using a broadcast bearer.
1\. A release message is sent by the application server as a broadcast
signalling message over a broadcast bearer through MB2-U reference point.
1.a Release message is repeated to allow for message loss.
3\. At reception of the Release message, a Release indication is provided to
MCPTT UE user application. MCPTT UE client is reconfigured to stop further
reception on media packets corresponding to the terminated call.
Release message shall contain information allowing to unambiguously
identifying the call which is terminated.
Editor's note: Whether the actual MCPTT application server is the MCPTT server
or the serving AEP is FFS. Whether the media controller is a centralised media
distribution function or the serving media gateway is FFS.
NOTE: SETUP and RELEASE messages are defined in subclause 5.7.1.
##### 5.5.2.8.8 Call session join procedure
The call session join procedure, as described in figure 5.5.2.8.8-1, is used
to join an established call session. It may be a permanently established
session or a session which has been established using the broadcast setup
procedure according to subclause 5.5.2.8.6.
Figure 5.5.2.8.8-1: Call session join procedure
0\. The MCPTT client determines that the broadcast bearer has been lost, for
example by lack of reception of media frames for some duration or transport
layer failure indication. The joining may be triggered by the user application
if a group to which the MCPTT client is affiliating has a permanently
established session. It may also be triggered if the user application of the
MCPTT client is willing to request the floor but no unicast session has been
setup prior to the request.
1\. MCPTT client initiates a call join or re-join by sending an MCPTT
(re)-join request message with a URI indicating the group. This message is
routed through the EPS and SIP core to the serving AEP.
2\. The serving AEP un-hides the identities in the (re)-join request message
and routes it to the MCPTT server managing the group.
Session establishment or re-establishment is performed as usual in steps 3 to
6, with the setup of the unicast media session.
##### 5.5.2.8.9 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.5.2.8.10 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
#### 5.5.2.9 Solution 5-2-9: pre-established session
##### 5.5.2.9.1 Functional description
The MCPTT UE establishes one or more pre-established sessions to an MCPTT
server after SIP registration prior to initiating MCPTT calls to other MCPTT
users. When establishing a pre-established session, the MCPTT UE negotiates
the media parameters, which later can be used in MCPTT calls. This avoids the
need to negotiate media parameters (including evaluating ICE candidates) and
reserving bearer resources during the MCPTT call establishment which results
in delayed MCPTT call establishment.
Parts of this proposal assume there are two MCPTT servers. Where two MCPTT
servers are involved in an MCPTT call (e.g. the mutual aid case), one MCPTT
server performs an MCPTT controlling function and the rest of the MCPTT
servers perform an MCPTT participating function. An MCPTT controlling function
provides a conference focus type functionality, which includes some policy
enforcement for participation in the MCPTT calls. An MCPTT participating
function provides MCPTT call handling for connected MCPTT UEs, which includes
some policy enforcement for incoming MCPTT calls and relays control messages
between the MCPTT client and the MCPTT server performing the MCPTT controlling
function.
MCPTT servers to which the MCPTT UEs participating in MCPTT calls are
connected to perform the MCPTT controlling function for those MCPTT UEs,
whereas any one MCPTT server involved in the MCPTT call may perform the MCPTT
controlling function. An MCPTT server performing the MCPTT controlling
function need not have any MCPTT UEs connected to it that are involved in the
MCPTT call that it is performing the MCPTT controlling function.
During the MCPTT call setup over a pre-established session, an MCPTT UE is
notified of the start of an incoming MCPTT call using the CONNECT message,
which is sent over the same bearer as floor control messages.
The MCPTT UE uses a SIP REFER request to trigger the MCPTT server performing
the participating MCPTT function to send a SIP INVITE request towards the
called party(s) using the media parameters from the SIP INVITE request
received from the MCPTT UE when the pre-established session was established
when making an outgoing MCPTT call.
Alternatively another mechanism called fast MCPTT call establishment can be
used for outgoing MCPTT calls. When fast MCPTT call establishment is used the
MCPTT UE sends a SETUP indication to the MCPTT server performing the
participating MCPTT function using the same bearer as floor control messages.
When the MCPTT server performing the participating MCPTT function receives the
SETUP indication from the MCPTT UE the MCPTT server establishes a MCPTT call
towards the called party(s) using the addresses received in the SETUP
indication and the media parameters from the SIP INVITE request received from
the MCPTT UE when the pre-established session was established.
The use of pre-established session on the origination side is completely
compatible with the use of on demand session on the termination side. The use
of pre-established session on the termination side is completely compatible
with the use of on demand session on the origination side.
##### 5.5.2.9.2 Procedures
###### 5.5.2.9.2.1 Pre-established session establishment
##### 5.5.2.9.2.1.1 General {#general-4 .H6}
The MCPTT UE may establish one or more pre-established sessions with the MCPTT
server prior to initiating MCPTT calls to other MCPTT users. When establishing
a pre-established session, the MCPTT client shall negotiate the media types
and media parameters, which later can be used in MCPTT sessions. The MCPTT
client may modify the existing pre-established session.
The MCPTT server may support one or more pre-established sessions. The MCPTT
server shall reject the initiation of the pre-established session, if the pre-
established session is not supported by the MCPTT server.
The pre-established session can be established after the initial SIP
registration and MCPTT service logon. Figure 5.5.2.9.2.1.1-1 presents the high
level description of the pre-established session procedure.
Figure 5.5.2.9.2.1.1-1: Pre-established session
1\. The MCPTT UE registers to the SIP core.
2\. The MCPTT UE logs on for the MCPTT service.
3\. The pre-established session is a session establishment procedure between
the MCPTT UE and the MCPTT server to exchange necessary media parameters
needed for setting up the media bearer. After the pre-established session is
established, the MCPTT UE is able to the activate media bearer whenever
needed:
\- immediately after the pre-established session procedure; or
\- when the actual SIP signalling for the MCPTT call is initiated.
##### 5.5.2.9.2.1.2 Session flow {#session-flow .H6}
The pre-established session is a session between the MCPTT UE and the MCPTT
server in the home MCPTT network, and which may utilise other functional
entities (e.g. a media resource function gateway, as defined in subclause
6.5.4.4, for means of obtaining media parameters and gathering ICE
candidates). Figure 5.5.2.9.2.1.2-1 represents the pre-established session
establishment flow.
Figure 5.5.2.9.2.1.2-1: Pre-established session establishment
1\. The MCPTT UE gathers ICE candidates.
2\. The MCPTT UE sends an INVITE request to the MCPTT server: Information
elements contained in the INVITE request:
a) The URI of the home MCPTT server;
b) Media parameters of MCPTT UE1 for inactive media stream(s);
c) ICE candidate list;
d) The MCPTT service identifier;
e) Address of the MCPTT user at MCPTT UE1;
f) Supported floor control protocol(s); and
g) Desired QoE profile.
3\. MCPTT server performs necessary service control, obtains media parameters
(e.g. by means of interacting with a media resource function gateway) and
gathers ICE candidates.
4\. MCPTT server sends an OK response to MCPTT UE. Information elements
contained in the OK response:
a) Media parameters of MCPTT UE1 for inactive media stream(s);
b) A conference URI that identifies the pre-established session;
c) ICE candidate list;
d) Selected floor control protocol; and
e) QoE profile for the pre-established session.
5\. ICE candidate checks take place between MCPTT UE and the media resource
function gateway
6\. If necessary MCPTT UE sends another INVITE request to the MCPTT server to
update the ICE candidate pair.
7\. The MCPTT server sends an OK response accepting the ICE candidate pair
update.
###### 5.5.2.9.2.2 Call establishment using pre-established session
##### 5.5.2.9.2.2.1 Call origination {#call-origination .H6}
##### 5.5.2.9.2.2.1.1 General {#general-5 .H6}
The MCPTT UE and MCPTT server that support pre-established sessions shall
support the use of the SIP REFER request to originate MCPTT calls.
When using SIP REFER request to originate MCPTT calls, the MCPTT UE shall send
a SIP REFER request to the MCPTT server performing the participating MCPTT
function containing the identity of the MCPTT user or MCPTT group to be
invited along with a reference to the pre-established session to be used for
the MCPTT call.
When the MCPTT server that supports pre-established sessions receives a SIP
REFER request related to the pre-established session the MCPTT server shall
send a SIP INVITE request towards the identified MCPTT user or MCPTT group,
using the media parameters from the SIP INVITE request received from the MCPTT
UE when the pre-established session was established. The MCPTT UE may use the
NOTIFY for the REFER event to determine the MCPTT call has started.
An MCPTT server and an MCPTT UE supporting pre-established sessions may
support fast MCPTT call establishment.
If fast MCPTT call establishment is supported by the MCPTT UE and the MCPTT
server the MCPTT UE may send a SETUP message to the MCPTT server performing
the participating MCPTT function using the bearer established by the pre-
established session.
When the MCPTT server that supports pre-established sessions and fast MCPTT
call establishment, receives a SETUP message over the bearer established by
the pre-established session the MCPTT server shall send a SETUP ACK message
over the bearer established by the pre-established session and shall send a
SIP INVITE request towards the identified MCPTT user or MCPTT group, using the
media parameters from the SIP INVITE request received from the MCPTT UE when
the pre-established session was established.
The MCPTT server performing the participating MCPTT function sends a CONNECT
message using the bearer established by the pre-established session when the
call starts. The MCPTT UE may use the CONNECT message to determine that the
MCPTT call has started.
##### 5.5.2.9.2.2.1.2 Private call establishment using pre-established session
{#private-call-establishment-using-pre-established-session .H6}
##### 5.5.2.9.2.2.1.2.1 Confirmed indication using REFER with pre-established
session {#confirmed-indication-using-refer-with-pre-established-session .H6}
Figure 5.5.2.9.2.2.1.2.1-1: Using REFER with pre-established session
Assumptions:
\- Pre-established session exists between MCPTT UE-A and MCPTT server A.
The steps of the flows are as follows:
1\. MCPTT UE-A initiates a private call by sending a REFER request to MCPTT
server A. Information elements contained in REFER request:
a. Address of the MCPTT user to be invited;
b. MCPTT service identifier;
c. Address of the MCPTT user at the MCPTT UE-A;
d. Manual answer override request;
e. An identifier of the pre-established session to which the REFER applies;
and
f. Notification request.
2\. Since this is a private MCPTT call setup, MCPTT server A performs both the
controlling MCPTT function and participating MCPTT function. MCPTT server A
sends an OK (Accepted) response towards the MCPTT UE-A.
3\. MCPTT server A invites the invited MCPTT users to the private call.
4\. MCPTT server A determines that the commencement mode conditions are met.
5\. Once the commencement mode conditions are met, MCPTT server A sends the
CONNECT message(s) to the MCPTT UE-A.
6\. The MCPTT UE-A acknowledges the CONNECT message(s).
7\. MCPTT UE-A sends and receives floor control signalling and media.
The following optional signalling can take place according to the request of
the MCPTT UE-A:
8\. When a final response is received from an invited MCPTT user, the MCPTT
server A sends a NOTIFY request to MCPTT UE-A with information about the final
result. A final result can be:
a. The invited MCPTT user accepted the invitation;
b. The invited MCPTT user rejected the invitation;
c. The invited MCPTT user is not reachable;
d. The invited MCPTT user is busy; or
e. The invited MCPTT user did not answer.
9\. When the MCPTT user A accepts the notification, the MCPTT UE-A sends an OK
response for the NOTIFY request to the MCPTT server A.
##### 5.5.2.9.2.2.1.2.2 Confirmed indication using fast MCPTT call
establishment {#confirmed-indication-using-fast-mcptt-call-establishment .H6}
This subclause describes the pre-established session scenario where the
invited MCPTT user answers automatically.
This scenario is valid in the following cases:
\- Invited MCPTT user has defined that the MCPTT session request from the
inviting MCPTT user is accepted automatically; or
\- Inviting MCPTT user or MCPTT server has requested to override the manual
answer setting.
NOTE: If inviting MCPTT UE or MCPTT server performing the participating MCPTT
function is not able to use an existing pre-established session, then it can
either use the on-demand session or make session modification for the pre-
established session to get media types and media parameters to match between
the invitation request and the existing pre-established session.
Figure 5.5.2.9.2.2.1.2.2-1 shows the signalling flow for this scenario.
Figure 5.5.2.9.2.2.1.2.2-1: Fast MCPTT call establishment
Assumptions:
\- Pre-established session between MCPTT UE-A and MCPTT server A;
The steps of the flows are as follows:
1\. MCPTT UE-A sends a SETUP message to the MCPTT server A. Information
elements contained in the SETUP message:
a) Address of the MCPTT user to be invited
b) Address of the MCPTT user at the MCPTT UE-A; and
c) Desired QoE profile.
2\. When MCPTT server A receives the SETUP message MCPTT server A sends a
SETUP ACK message to MCPTT UE-A over the pre-established bearer to confirm
reception of the SETUP message.
3\. Since this is a private MCPTT call setup, the MCPTT server A performs both
the controlling MCPTT function and participating MCPTT function. The MCPTT
server A sends an INVITE request to the MCPTT UE of the invited MCPTT user.
Information elements contained in the INVITE request:
a) Address of the MCPTT user to be invited;
b) Address of the MCPTT user at the MCPTT UE-A;
c) MCPTT service identifier;
d) Media parameters of the MCPTT server A;
e) Supported floor control protocol(s); and
f) Desired QoE profile.
4\. MCPTT server A determines that the commencement mode conditions are met.
5\. When MCPTT server A determines that the commencement mode conditions are
met, the MCPTT server A sends a CONNECT message to the MCPTT UE-A.
Informational elements contained in the CONNECT message:
a) MCPTT group call identity of the prearranged MCPTT group call;
b) Confirmed OK response received indication; and
c) QoE profile for the MCPTT group call.
6\. MCPTT UE-A sends a CONNECT ACK message to the MCPTT server A over the pre-
established bearer to acknowledge reception of the CONNECT message.
7\. MCPTT UE-A sends and receives floor control signalling and media.
##### 5.5.2.9.2.2.1.2 Prearranged group call using pre-established session
{#prearranged-group-call-using-pre-established-session .H6}
##### 5.5.2.9.2.2.1.2.1 Confirmed indication using pre-established session
{#confirmed-indication-using-pre-established-session .H6}
This subclause describes a scenario of when the inviting MCPTT UE-A receives
the right-to-speak indication in a floor control message from the MCPTT server
performing the MCPTT controlling function (denoted as MCPTT server X) when the
number of invited MCPTT users that accept the invitation meets the
commencement mode conditions. Figure 5.5.2.9.2.2.1.2.1-1 shows the message
flow for this scenario.
Figure 5.5.2.9.2.2.1.2.1-1: Confirmed Indication using pre-established session
Assumptions:
\- Pre-established session between MCPTT UE-A and MCPTT server A;
\- Affiliation of prearranged group members interested in being involved in
the prearranged group call.
The steps of the flows are as follows:
1\. MCPTT UE-A sends a REFER request to the MCPTT server A. Information
elements contained in the REFER request:
a) An identifier of the pre-established session to which the REFER applies;
b) Prearranged MCPTT group call identity with an indication that it is a
prearranged MCPTT group;
c) Address of the MCPTT user at the MCPTT UE-A; and
d) MCPTT service identifier.
2\. MCPTT server A sends an OK response to MCPTT UE-A.
3\. When the MCPTT server A receives a REFER request containing a URI with an
indication that the URI is a prearranged MCPTT group not controlled by this
MCPTT server, the MCPTT server A sends an INVITE request towards the MCPTT
server performing the MCPTT controlling function. In this scenario, MCPTT
server X owns the prearranged MCPTT group call identity. Information elements
contained in the INVITE request:
a) Prearranged MCPTT group call Identity;
b) Address of the MCPTT user at the MCPTT UE-A;
c) MCPTT service identifier;
d) Media parameters of the MCPTT server X;
e) Supported floor control protocol(s); and
f) Desired QoE profile.
4\. MCPTT server X invites the other affiliated prearranged group members to
the prearranged MCPTT group call.
5\. MCPTT server X determines that the commencement mode conditions are met.
6\. When MCPTT server X determines that the commencement mode conditions are
met, the MCPTT server X sends an OK (confirmed) to the MCPTT server A.
Information elements contained in the OK (confirmed):
a) MCPTT group call identity of the prearranged MCPTT group call;
b) MCPTT server X selected media parameters;
c) Selected floor control protocol(s); and
d) QoE profile for the MCPTT group call.
7\. The MCPTT server A sends a NOTIFY request to the MCPTT UE-A if the MCPTT
UE-A requested in step 1 to be notified. The MCPTT UE-A is now able to start
sending media. Informational elements contained in the NOTIFY request:
a) MCPTT group call Identity of the prearranged MCPTT group call;
b) Confirmed OK response received indication; and
c) QoE profile for the MCPTT group call.
If the MCPTT UE-A did not request a NOTIFY in step 1 then the MCPTT UE-A uses
a floor control granted indication from MCPTT server X to determine that the
prearranged MCPTT group call is established and step 8 is not performed.
8\. MCPTT UE-A sends an OK response to the MCPTT server A.
9\. MCPTT UE-A sends and receives floor control signalling and media.
##### 5.5.2.9.2.2.1.2.2 Confirmed indication using fast MCPTT call
establishment {#confirmed-indication-using-fast-mcptt-call-establishment-1
.H6}
This subclause describes the originating procedures when fast MCPTT call
establishment is used. The inviting MCPTT UE-A receives the right-to-speak
indication in a floor control message from the MCPTT server performing the
MCPTT controlling function (denoted as MCPTT server X) when the number of
invited MCPTT users that accept the invitation meets the commencement mode
conditions. The fast MCPTT call establishment is only applicable over a pre-
established session. Figure 5.5.2.9.2.2.1.2.2-1 shows the signalling flow for
this scenario.
Figure 5.5.2.9.2.2.1.2.2-1: Fast MCPTT call establishment
Assumptions:
\- Pre-established session between MCPTT UE-A and MCPTT server A; and
\- Affiliation of prearranged Group Members interested in being involved in
the prearranged group call.
The steps of the flows are as follows:
1\. MCPTT UE-A sends a SETUP Message to MCPTT server A. Information elements
contained in the SETUP message:
a) Prearranged MCPTT group identity with an indication that it is a
prearranged MCPTT group;
b) Address of the MCPTT user at the MCPTT UE-A; and
c) Desired QoE profile.
2\. When MCPTT server A receives the SETUP message, MCPTT server A sends a
SETUP ACK message to MCPTT UE-A to confirm reception of the SETUP message.
3\. MCPTT server A receives a SETUP message containing a URI with an
indication that the URI is a prearranged MCPTT group not hosted by this MCPTT
server, the MCPTT server A sends an INVITE request towards the MCPTT server X.
In this scenario, MCPTT server X owns the prearranged MCPTT group call
identity. Information elements contained in the INVITE request:
a) Prearranged MCPTT group identity;
b) Address of the MCPTT user at the MCPTT UE-A;
c) MCPTT service identifier;
d) Media parameters of the MCPTT server X;
e) Supported floor control protocol(s); and
f) Desired QoE profile.
4\. MCPTT server X invites the other affiliated prearranged group members to
the prearranged MCPTT group call.
5\. MCPTT server X determines that the commencement mode conditions are met.
6\. When MCPTT server X determines that the commencement mode conditions are
met, the MCPTT server X sends an OK (confirmed) to the MCPTT server A through
the signalling path. Information elements contained in the OK (confirmed):
a) MCPTT group call Identity of the prearranged MCPTT group call;
b) MCPTT server X selected media parameters;
c) Selected floor control protocol(s); and
d) QoE profile for the MCPTT group call.
7\. The MCPTT server A sends a CONNECT message to the MCPTT UE-A over the pre-
established bearer. Informational elements contained in the CONNECT message:
a) MCPTT group call identity of the prearranged MCPTT group call;
b) Confirmed OK response received indication; and
c) QoE profile for the MCPTT group call.
8\. MCPTT UE-A sends a CONNECT ACK message to the MCPTT server A over the pre-
established bearer to acknowledge reception of the CONNECT message.
9\. MCPTT UE-A sends and receives floor control signalling and media.
##### 5.5.2.9.2.2.2 Call Termination {#call-termination .H6}
Upon receiving an INVITE request from the MCPTT server performing controlling
MCPTT function, the MCPTT server performing the participating MCPTT function
may use the existing pre-established session, if
\- the offered media streams are same or subset of those in the existing pre-
established session; and
\- the media parameters of each offered media stream are compliant with the
media parameters of the media stream of the same media type in the existing
pre-established session.
NOTE: If inviting MCPTT UE or MCPTT server performing participating MCPTT
function is not able to use an existing pre-established session, then it can
either use the on-demand session or make session modification for the existing
pre-established session to align the media parameters of the INVITE request
with the existing pre-established session.
When using the existing pre-established session and the INVITE request is
required to be answered manually by the MCPTT UE, the MCPTT server performing
participating MCPTT function shall send the INVITE request over the same
dialogue as that used to establish the pre-established session. When the MCPTT
UE accepts the call, the MCPTT server performing participating MCPTT function
shall send a CONNECT message over the bearer established by the pre-
established session.
When using the existing pre-established session and the INVITE request is
required to be answered automatically by the MCPTT UE, the MCPTT server
performing participating MCPTT function shall send a CONNECT message over the
bearer established by the pre-established session.
Upon receiving a CONNECT message over the bearer established by the pre-
established session the MCPTT UE shall respond with a CONNECT ACK message over
the bearer established by the pre-established session to acknowledge the
reception of the CONNECT message.
The floor control signalling and media can then be started.
##### 5.5.2.9.2.2.2.1 Private call using pre-established session {#private-
call-using-pre-established-session .H6}
##### 5.5.2.9.2.2.2.1.1 Automatic answer using pre-established session
{#automatic-answer-using-pre-established-session .H6}
This subclause describes the pre-established session scenario where the
invited MCPTT user answers automatically.
This scenario is valid in the following cases:
\- Invited MCPTT user has defined that the MCPTT session request from the
inviting MCPTT user is accepted automatically; or
\- Inviting MCPTT user or MCPTT server has requested to override the manual
answer setting.
NOTE: If inviting MCPTT UE or MCPTT server performing participating MCPTT
function is not able to use an existing pre-established session, then it can
either use the on-demand session or make session modification for the pre-
established session to get media types and media parameters to match between
the invitation request and the existing pre-established session
Figure 5.5.2.9.2.2.2.1.1-1 shows the signalling flow for this scenario.
Figure 5.5.2.9.2.2.2.1.1-1: Automatic answer using pre-established session
Assumptions:
\- Pre-established session between MCPTT UE-B and MCPTT server B.
1\. MCPTT server A sends INVITE request to MCPTT server B. Information
elements contained in INVITE request:
a) Address of the MCPTT user at the MCPTT UE-B;
b) Media parameters of MCPTT server A;
c) MCPTT service identifier;
d) Address of the MCPTT user at the MCPTT UE-A;
e) Controlling MCPTT function assigned indication;
f) Manual answer override request, if included by MCPTT UE-A or by policy at
the MCPTT server A;
g) Supported floor control protocol(s); and
h) QoE profile for the MCPTT private call.
2\. If the MCPTT UE-B is accepting the MCPTT private call automatically, or if
the INVITE request contains a manual answer override request, or MCPTT server
B has policy to override manual answer then the MCPTT server B sends the
CONNECT message to the MCPTT UE-B. Information elements contained in the
CONNECT message:
a) MCPTT address of the participant at MCPTT UE-A;
b) Nickname of the participant at MCPTT UE-A; and
c) MCPTT call identity
3\. The MCPTT UE-B acknowledges the CONNECT message with a CONNECT ACK message
to acknowledge delivery of the CONNECT message.
4\. The MCPTT server B sends an OK response back to MCPTT server A.
Information elements contained in OK response:
a) Media parameters of MCPTT server B;
b) Selected floor control protocol; and
c) Local QoE profile for the MCPTT UE-B.
5\. Upon receiving the OK response, the MCPTT server A commences floor control
signalling and sending of media.
##### 5.5.2.9.2.2.2.1.2 Manual answer using pre-established session {#manual-
answer-using-pre-established-session .H6}
This subclause describes a scenario where the invited MCPTT user has selected
the manual answer mode and this is not overridden by the request of the
calling MCPTT user or by an MCPTT server. Figure 5.5.2.9.2.2.2.1.2-1 shows the
signalling flow for this scenario.
Figure 5.5.2.9.2.2.2.1.2-1: Manual answer with pre-established session
1\. MCPTT server A sends an INVITE request to MCPTT server B. Information
elements contained in INVITE request:
a) MCPTT address of the MCPTT user at the MCPTT UE-B;
b) Media parameters of MCPTT server A (participating & controlling);
c) MCPTT service identifier;
d) Address of the MCPTT user at the MCPTT UE-A;
e) Controlling MCPTT function assigned indication;
f) Supported floor control protocol(s); and
g) QoE profile for the MCPTT private call.
2\. The MCPTT server B sends an INVITE request to the MCPTT UE-B. If pre-
established session is used, the MCPTT server B sends a re-INVITE request
within an existing pre-established session to the MCPTT UE-B, if supported by
the MCPTT server B and the MCPTT UE-B. Information elements contained in
INVITE/re-INVITE request:
a) Address of the MCPTT user at the MCPTT UE-B;
b) Media parameters of MCPTT server B;
c) Manual answer request indication;
d) MCPTT service identifier;
e) Address of the MCPTT user at the MCPTT UE-A;
f) Controlling MCPTT function assigned indication;
g) Supported floor control protocol(s); and
h) QoE profile for the MCPTT private call.
3\. When the MCPTT UE-B receives the INVITE request MCPTT UE-B prompts MCPTT
user B about the MCPTT private call invitation and sends an ALERTING response.
4\. MCPTT server B forwards ALERTING response to the MCPTT server A.
5\. When the MCPTT UE-B accepts the invitation, the MCPTT UE-B sends an OK
response for the INVITE request. Information elements contained in OK
response:
a) Media parameters of the MCPTT UE-B;
b) Selected floor control protocol; and
c) Local QoE profile for the MCPTT UE-B.
6\. When MCPTT server B receives OK response it will forward it to the MCPTT
server A. Information elements contained in OK response:
a) Media parameters of MCPTT server B if MCPTT server B stays on the media and
talk burst control and/or media burst control path, otherwise media parameters
received from the MCPTT UE-B are included.
b) Selected floor control protocol; and
c) Local QoE profile for the MCPTT UE-B.
7\. The MCPTT server B sends the CONNECT message to MCPTT UE-B. Information
elements contained in the connect message:
a) Address of the participant at the MCPTT UE initiating the invitation;
b) Nickname of the participant at the MCPTT UE initiating the invitation; and
c) MCPTT call identity
8\. The MCPTT UE-B acknowledges the CONNECT message with a CONNECT ACK message
to acknowledge delivery of the CONNECT message.
9\. Upon receiving the OK response, the MCPTT server A commences floor control
Signalling and sending of media.
##### 5.5.2.9.2.2.2.2 Prearranged group call using pre-established session
{#prearranged-group-call-using-pre-established-session-1 .H6}
##### 5.5.2.9.2.2.2.2.1 Automatic answer using pre-established session
{#automatic-answer-using-pre-established-session-1 .H6}
This subclause describes the pre-established session scenario where the
invited MCPTT user(s) answers automatically.
NOTE: If inviting MCPTT UE or MCPTT server performing a participating MCPTT
function is not able to use an existing pre-established session, then it can
either use the on-demand session or make session modification for the pre-
established session to get media types and media parameters to match between
the invitation request and the existing pre-established session.
Figure 5.5.2.9.2.2.2.2.1-1 shows the message flow for this scenario.
Figure 5.5.2.9.2.2.2.2.1-1: Automatic Answer using pre-established session
Assumptions:
\- Pre-established session between MCPTT UE-A and MCPTT server B;
\- Affiliation of a prearranged group members interested in being involved in
the prearranged group call; and
\- MCPTT server B requires an acknowledgement from MCPTT UE-B.
1\. MCPTT server A sends an INVITE request to MCPTT server B. Information
elements contained in INVITE request:
a) Address of the MCPTT user at the MCPTT UE-B;
b) Media parameters of MCPTT server A;
c) MCPTT service identifier;
d) Address of the MCPTT user at the MCPTT UE-A;
e) Controlling MCPTT function assigned indication;
f) MCPTT call identity for the prearranged MCPTT group call;
g) Manual answer override request, if included by MCPTT UE-A or by policy at
the MCPTT server A;
h) Supported floor control protocol(s); and
i) QoE profile for the MCPTT private call.
2\. If the MCPTT UE-B is accepting the MCPTT group call automatically, or if
the INVITE request contains a manual answer override request, or MCPTT server
B has policy to override manual answer, then the MCPTT server B sends the
CONNECT message to the MCPTT UE-B. Information elements contained in the
CONNECT message:
a) MCPTT address of the participant at MCPTT UE-A;
b) Nickname of the participant at MCPTT UE-A; and
c) MCPTT call identity.
3\. The MCPTT UE-B sends a CONNECT ACK message to acknowledge delivery of the
CONNECT message.
4\. Since the MCPTT server B requires an acknowledgment from the MCPTT UE-B,
MCPTT server B sends an OK response back towards the controlling network after
receiving the CONNECT ACK message. Information elements contained in OK
response:
a) Media parameters of MCPTT server B;
b) Selected floor control protocol; and
c) Local QoE profile for the MCPTT UE-B.
NOTE: If the MCPTT server B did not require an acknowledgement, it could send
the OK response in parallel with the CONNECT message (this is known as an
\"unconfirmed indication\").
5\. Upon receiving the OK response, the MCPTT server A sends and receives
floor control signalling and media.
###### 5.5.2.9.2.3 Leaving an MCPTT call
##### 5.5.2.9.2.3.1 General {#general-6 .H6}
The MCPTT UE using a pre-established session may leave the MCPTT call by
sending a SIP REFER (BYE) containing the identity of the pre-established
session to which the REFER applies and the MCPTT call identity of MCPTT call
to leave.
When the MCPTT server A that supports pre-established session receives a SIP
REFER request related to the pre-established session indicating a BYE to be
sent, the MCPTT server shall send a SIP BYE request towards the MCPTT user or
MCPTT group.
When the MCPTT server A using the existing pre-established session receives a
BYE request for a MCPTT call from the remote the MCPTT server X shall send a
DISCONNECT message over the pre-established session.
Upon receiving a DISCONNECT message over the pre-established session, the
MCPTT UE-A shall respond with a DISCONNECT ACK message over the pre-
established session to acknowledge the reception of the DISCONNECT message.
##### 5.5.2.9.2.3.2 MCPTT UE **Leaving an MCPTT call when** using pre-
established session. {#mcptt-ue-leaving-an-mcptt-call-when-using-pre-
established-session. .H6}
This subclause is for when an MCPTT UE using the pre-established session for a
MCPTT call leaves the MCPTT call. Other members of the MCPTT call either
remain in the MCPTT call or they are released from the MCPTT call depending on
the call scenario and the release policy. The MCPTT UE is released from the
MCPTT call, but the pre-established session is maintained between the MCPTT UE
and the MCPTT server. Figure 5.5.2.9.2.3.2-1 shows the signalling flow for
this scenario.
Figure 5.5.2.9.2.3.2-1: MCPTT UE leaves the MCPTT call when using pre-
established session
Assumptions:
\- Pre-established session between MCPTT UE-A and MCPTT server A;
\- MCPTT UE-A is participating in an MCPTT call using the pre-established
session.
The steps of the flows are as follows:
1\. MCPTT UE-A sends a REFER (BYE) request to the MCPTT server A. Information
elements contained in REFER BYE message:
a) A conference URI that identifies the pre-established session to which the
REFER applies; and
b) Identity of MCPTT call to leave.
2\. When MCPTT server A receives the REFER (BYE) request it acknowledges the
request by sending OK response to the MCPTT UE-A;
3\. The MCPTT server A sends a BYE request to the MCPTT server X;
4\. The MCPTT server X sends an OK response to the MCPTT server A;
5\. After receiving the OK response MCPTT server A sends a NOTIFY request to
MCPTT UE-A;
6\. The MCPTT UE-A sends an OK response to MCPTT server A.
The pre-established session between MCPTT UE-A and the MCPTT server A is
maintained.
##### 5.5.2.9.2.3.3 MCPTT server releases the MCPTT UE using a pre-established
session from the MCPTT call {#mcptt-server-releases-the-mcptt-ue-using-a-pre-
established-session-from-the-mcptt-call .H6}
This subclause describes the MCPTT server releasing the MCPTT UE using a pre-
established session from the MCPTT call. Figure 5.5.2.9.2.3.3-1 shows the
signalling flow for this scenario.
Figure 5.5.2.9.2.3.3-1: MCPTT server releases MCPTT UE while maintaining the
pre-established session
Assumptions:
\- Pre-established session between MCPTT UE-B and MCPTT server B; and
\- MCPTT UE-B is participating in an MCPTT call using the pre-established
session.
The steps of the flows are as follows:
\- Pre-established session between MCPTT UE-B and MCPTT server B;
1\. MCPTT server A sends BYE request to MCPTT server B. Information elements
contained in BYE request:
a) Address of the MCPTT user at the MCPTT UE-B;
2\. Upon receiving the BYE request, the MCPTT server B sends an OK response to
the MCPTT server X;
3\. MCPTT server B sends the DISCONNECT message to MCPTT UE-B over the pre-
established bearer;
4\. The MCPTT UE-B acknowledges the DISCONNECT message by sending a DISCONNECT
ACK message over the pre-established bearer to acknowledge delivery of the
DISCONNECT message.
The pre-established session between MCPTT UE-B and the MCPTT server B is
maintained.
###### 5.5.2.9.2.4 Pre-established session Modification
The pre-established session may be modified by the MCPTT UE and the MCPTT
server using the SIP procedures for session modification.
###### 5.5.2.9.2.5 Removing the pre-established session
The pre-established session may be removed by the MCPTT UE and the MCPTT
server using the SIP procedures for terminating a SIP session.
##### 5.5.2.9.3 Impact on existing entities and interfaces
None identified.
##### 5.5.2.9.4 Solution evaluation
This solution provides a solution for NAT traversal, meeting the timing
requirements of 3GPP TS 22.179 [2], using pre-established sessions. Along with
the simultaneous calls procedure it is able to support multiple simultaneous
calls without requiring additional call duration dialogs.
## 5.6 Floor control
### 5.6.1 Off-network
#### 5.6.1.1 Solution 6-1-1: Limited precedence based; Off-network floor
control
##### 5.6.1.1.1 Dynamic nature of communication off-network
For groups of users communicating with one another using MCPTT over a direct
device to device communication path such as ProSe D2D all connections will be
dominated by the dynamic nature of the communication links in terms of:
\- losing packets
\- losing communication
\- changing connection relationships between individual UEs constituting the
group.
{width="3.9506944444444443in" height="3.3979166666666667in"}
Figure 5.6.1.1.1-1: Example group of devices including effective communication
range
Figure 5.6.1.1.1-1 shows a group of users who may require to be engaged in a
single Direct Device to Device MCPTT group where each member talks to and
hears each other member. In this case there is one user (in red) who can see
all other users but that must not be assumed. Generally some users can see
several others but not the whole community. These users will move and so the
exact communication links are likely to come and go in a dynamic manner.
Furthermore individuals and separate groups could move into overlapping
coverage and wish to join the main group.
Due to the dynamic nature of the links it would be better to avoid an off-
network floor control approach that relies on state and signalling messages to
establish changes of state. For example, when first requesting the floor (with
no ongoing talker) if it is essential for the floor control message to be
received by other participating users then whatever steps are taken to protect
and repeat this message there is always a situation where a new user comes
into coverage just after the last repeat of the message has been sent. A
robust protocol must adapt to this connection dynamic. Furthermore, when a
communication stops, there should be a minimum delay before a new user can
take the floor. An orderly release should be done if at all possible but in
cases where this fails the protocol must be robust enough to start a new
communication quickly and effectively. All of this suggests that, although a
layered architecture will be needed for some aspects, the application layer
will need to be rather simple and take actions according to possible scenarios
experienced at the physical layer.
##### 5.6.1.1.2 Philosophy
\- Utilise the inherent one to many nature of Rel 12 ProSe Direct Comms where
possible.
\- Take account of scenarios presented by the dynamic nature of the
communication paths and the chance of missed packets
\- Off-network floor control should include limited precedence based control.
That is, except for floor release, the UE that transmitted last time has the
authority to transmit this time.
\- Floor control override is a priority facility to cause a transmitting UE to
defer to a higher priority and release.
\- Reciprocity of communication is normal but not assumed. For example if UE A
can receive UE B, then UE B can receive UE A, UE C transmission is only likely
to interfere with reception at UE D if UE C can receive transmissions from UE
D ...
##### 5.6.1.1.3 Assumptions
It is assumed that lower layers provide packet delivery where;
\- Communications for different MCPTT groups are not received at this
application layer or are at least clearly distinguished by group;
\- Interfering communications for different MCPTT groups do not result in
misinterpretable messages at this application layer;
\- All devices within this MCPTT group have a means to synchronise with and
receive communications for this group (subject to range).
\- In order to facilitate MCPTT communications between a set of UEs, these UEs
will have been configured to use a common set of shared physical resources.
The transmissions by the current talker will have a periodicity and the number
of resource opportunities used depends on the quantity of speech to be sent in
the relevant period.
\- The ProSe One-to-many communications service provides a packet transport
service for both traffic data and control signalling. The control component
includes information for communication such as L1 ID, MCS and resources used
for following data. It is expected that floor control related signalling will
be included as part of the traffic data content however it may be useful to
provide some relevant control data in the control frames such as message count
as an indication of continuance of communication. If this is not possible,
these aspects will have to be managed at the application level in the content
part of the communication;
\- All user communication is considered group based, preconfigured and
encrypted to be decoded only by members of that group. Devices could be
members of more than one group, in which case they could listen in to more
than one group communication. There could also be a specific \"all listen\"
group.
\- It may also be worth providing a/some additional \"all listen\" group(s)
for control messages and/or content containing application layer control
messages. This could then be optionally used at transmission to allow other
devices to optionally receive the control information to assist in better
decision making for which resources to use, the ongoing nature of a talk
spurt, etc. and possibly allow for pre-emption;
\- Communications may not be received so this should not result in
catastrophic failure. If the communication was not important (e.g. some
RECEIVING messages) then no action is taken. If more important communication
does not get acted upon (e.g. CAPTURE REQUEST from a higher priority user,
RELAY REQUEST...) then the message is resent.
Packet scheduling, collision avoidance etc. are not specifically the subject
of this proposal. There may be multiple communications for different groups
taking place simultaneously on shared or different resources. This proposal
assumes each group independently manages their own MCPTT group communications.
Some measure of intergroup coordination may be beneficial, in synergy with the
ProSe aspects of direct communication (synchronisation, resource
reservation/allocation/adoption etc.).
In the case of relay activity, the relaying UE will receive on one set of
resources and relay transmit on another set of resources at the same time
periodicity so design of the resource allocation will have to consider relay,
quantity, type and activity. It would be ideal if knowledge of one set of
resources also identified the other sets of resources to be used, for example
in a time division fashion.
Editor\'s note: The specifics of relay activity are FFS.
##### 5.6.1.1.4 Functional description
In off-network mode connections will be dynamic and not all UE will be able to
see all other UE. Table 5.6.1.1.4-1 shows which UEs can communicate with which
other UEs for the purpose of the examples in this clause.
Table 5.6.1.1.4-1: Mapping example for which UEs can communicate with which
other UEs
* * *
           Yes   Yes   Yes   Yes               
     Yes         Yes   Yes   Yes               
     Yes   Yes         Yes   Yes   Yes         
     Yes   Yes   Yes         Yes   Yes   Yes   
     Yes   Yes   Yes   Yes         Yes   Yes   Yes
                 Yes   Yes   Yes         Yes   Yes
                       Yes   Yes   Yes         Yes
                             Yes   Yes   Yes
* * *
###### 5.6.1.1.4.1 Initial communication
The purpose of this clause is to explore some of the opportunities and
constraints for setting up of communication for the first time.
{width="6.571527777777778in" height="2.9590277777777776in"}
Figure 5.6.1.1.4.1-1: Initial Communication
**Start of communication:** May be on request to speak but could be any other
type of message supported (e.g. keep alive).
**Message: ORIGINATE**
UE D listens for floor control and other messages related to Group ID # to
ensure that no other user in range is asserting that it holds that floor. This
is normal operation as the device will be seeking communications for its
group.
UE D sends initial request (ORIGINATE) -- UE A-G receive this directly but UE
H does not.
The ORIGINATE message indication or Start indication could be a count value 0
to identify the start of a new communication. Count may be required to better
support ongoing communications.
The ORIGINATE message includes an identity for the sending device (OwnID).
The ORIGINATE message includes the priority of the talking user (Priority).
The ORIGINATE message could contain the first speech to be sent or it could be
a periodic set of user information such as location, security/encryption sync
etc.
If there is already a communication occurring for the relevant group, the UE
can send a CAPTURE REQUEST as described in 5.6.1.1.4.5. If there are no
resources available in the relevant resource allocation applicable to the
group intended due to use by other groups, the UE either waits for an
opportunity or if pre-emption is supported it could attempt to pre-empt an
existing communication.
All content messages are coded with the group ID so that only group members
receive the communications intended for the group. Control messages are
optionally encoded with the group ID or an all-listen ID depending upon
configuration to either protect all communication or to allow control
information to be shared to facilitate coexistence in shared resources and
potentially support pre-emption. If an all-listen ID is used for coding group
messages then an additional Group ID information element will be needed to
identify the intended recipient group.
**Message: RECEIVING**
Editor's note: Message names, and especially RECEIVING are simply indicative
names and are not intended to convey any purpose or function beyond what is
described in this proposal.
UE A-G send RECEIVING. UEs can only decode message content intended for their
own group and so only UE of the intended recipient group send RECEIVINGs to
communications from their own group.
Originating UE can be configured to only continue if there are some or some
specific UE that send RECEIVING.
RECEIVINGs are sent in the pre-configured resource opportunities at a random
delay relative to the received communication to minimise collisions. Some
collisions should be assumed and catered for.
The RECEIVING message includes an identity for the sending device (OwnID).
The RECEIVING message includes the identity of the device sending the original
message being RECEIVINGed (OrigID).
Some UE will receive RECEIVING from some but not all other UE -- Each UE could
record who they can see for relay routing purposes. Received RECEIVING table
entries could be erased over time and/or over a number of RECEIVING
opportunities where no RECEIVING is received for the specific UE. This would
have to take account of RECEIVINGs not being persistently sent.
Transmissions that have occurred but were not received are lost (there is no
re-transmission, other than pre-decided relay transmission) so \"floor
control\" state cannot rely on receipt of the first transmission (ORIGINATE).
It is appropriate to scan for received transmissions (traffic or RECEIVINGs)
before a UE makes its own transmission therefore any transmission sent is
considered by other devices as a floor seize for the continuing transmission
unless that transmission was a specific release.
It is possible that two UE could attempt a first communication at the same
opportunity and their transmissions will collide. In this case it is most
likely that some UE will receive one transmission, some will receive another
and some may be unable to read either message. In this case, the time spread
RECEIVING messages will help identify the situation because some UE will see
RECEIVING messages for two different OrigIDs. This can be used to help recover
from the problem as described in subclause 5.6.1.1.4.6 Contention Resolution.
This action results in a COLLIDE message being sent.
For the originating UE (D in this example), if at least one RECEIVING is
received and no COLLIDE indications are received UE D assumes control of the
floor and continues sending packets as required. Optionally the system could
be configured for the UE to continue sending packets even if no RECEIVING
messages are received.
Editor's note: The use of RECEIVING messages could be optional for the purpose
of floor control. Absence of RECEIVING messages could have a consequence for
Application Level Relay but in that case a different message could be sent (in
place of RECEIVING) but with the express purpose to indicate that a
communication is happening and the UE is prepared to relay if required.
Editor's note: It may be that lower layers provide feedback indication for
messages being received in which case RECEIVING is not required except as
mentioned above for the support of relay.
In this example, UE H sees RECEIVINGs from several UE but not the origination.
This could be used for UE H to investigate a relay opportunity.
###### 5.6.1.1.4.2 Ongoing communication
Once a user has successfully started a communication, subsequent packets are
sent with an incrementing count value.
When there is no speech content but the user continues to hold the button
(word gaps etc.) a silence descriptor may be sent instead of speech. After the
first silence descriptor has been sent, the gap between packets could be
extended to a time Ts before a new silence descriptor must be sent. This is
used for other devices to confirm that they can continue to receive
communication.
Some way to limit RECEIVING for a busy channel may be useful, perhaps if there
is plenty of signal strength and seeing multiple other RECEIVING messages then
UEs selectively decline to send RECEIVING. A time limit to not send RECEIVING
would be required, also some measure of busyness. i.e. only decline to send
RECEIVING if less than time T between successive group transmissions because
there should be no opportunity for the active UE to refuse communication
because there are no receiving users.
Priority marks the continuing communication. UE with higher Priority (perhaps
emergency, supervisor...) can interrupt although the action for all other UEs
requesting the floor is through essentially the same Action in support of
Seconds mechanism in subclause 5.6.1.1.4.5.
It would be possible to impose a limited time period for holding on to the
floor. This time could also be reduced if more CAPTURE REQUESTs (see later
paragraph) are received because it is an indication that other users have
something to say. The remaining time counter could be sent by the sending UE
so that other devices can know how close the floor control is to expiry.
If a UE receives a packet out of order (basically it has missed a packet) it
may send RECEIVING but no action is taken to recover the lost packet. This
could however be taken as a reason to investigate a relay opportunity.
If a UE stops receiving packets of a communication, does not receive a RELEASE
but does receive RECEIVINGs it may investigate a relay opportunity.
Orderly release is assumed by the Originator sending a RELEASE message, either
as a result of higher priority interruption or time out of floor timer or user
releases floor (by releasing button). Release is the subject of subclause
5.6.1.1.4.4.
If a UE stops receiving packets of a communication and does not receive a
RELEASE nor any continuing RECEIVING it may assume floor release for any group
or sub-group within range.
###### 5.6.1.1.4.3 Late joining
A late joining UE will receive ongoing communication packets (or it may just
see RECEIVING).
The late joining UE only needs to commence sending RECEIVING as for other UE
so that it effectively joins the communication.
If the late joining UE only receives RECEIVING and not the original stream (or
it receives already relayed) communication, it may investigate a relay
opportunity. To support joining an already relayed communication a new UE
should announce itself to the relay.
###### 5.6.1.1.4.4 Ending a communication
When a UE decides to stop sending a communication it sends a RELEASE with its
Orig ID. If the UE has a list of \"second\" users it sends the ordered list.
Up to [three] IDs can be in the list.
If a UE currently sending a communication receives a CAPTURE REQUEST (see
subclause 5.6.1.1.4.5) from a higher priority user it immediately adds that
user to its \"second\" list, forms the RELEASE message and sends RELEASE with
the seconds list attached.
UEs that receive no active communication, no RECEIVING and no successful relay
for Ts assume release with no list of seconds.
###### 5.6.1.1.4.5 Action in support of seconds
Receiving users pressing [and holding] the request button whilst a
communication is ongoing will cause the UE to send a CAPTURE REQUEST with
their ID. CAPTURE REQUESTs (as for any other messages) are relayed by UEs that
consider themselves relaying for the UE sending CAPTURE REQUEST.
A CAPTURE REQUEST can be cancelled by a subsequent cancel operation.
A CAPTURE REQUEST can be repeated after elapsed time T~CR~ if the speaker has
not released the floor.
The UE engaged in active communication that receives a CAPTURE REQUESTfrom a
same or lower priority user adds the ID of this user to a \"List of Seconds\",
ordered first by priority and second by time of first arrival. When the active
UE releases, the RELEASE message can indicate the list of seconds i.e. the
nominated second, third...
If the UE receives a CAPTURE REQUEST from a higher priority user then it adds
the user to the list as before (this user will be top) and immediately
compiles the RELEASE message and sends it (in the next opportunity).
Editors note: The priority aspect of the CAPTURE REQUEST could include
inherent priority, Emergency and Imminent Peril.
After sending a RELEASE message the UE ceases to control the floor.
{width="5.264583333333333in" height="3.7555555555555555in"}
**Figure 5.6.1.1.4.5-1: Action on receipt of CAPTURE REQUEST**
When the UE sending its communication ends and sends a RELEASE, any UE that
has an active CAPTURE REQUEST outstanding (or any that has not sent a CAPTURE
REQUEST but does now want the floor) will read the list of seconds:
\- If its ID is first in the list it will confirm to the user and take the
floor, establishing a new communication.
\- If its ID is in the list but not first it will wait time D for each ID in
the list above its own ID to see if a higher priority UE takes the floor. If
the xD time expires the UE sends its ORIGINATE and begins its communication.
\- If a new communication starts for the group, all outstanding CAPTURE
REQUESTs are considered terminated but any UE that did send a CAPTURE REQUEST
may send another CAPTURE REQUEST at expiry of its xD time.
\- If its ID is not in the list the UE considers its CAPTURE REQUEST closed.
It waits D x the number of IDs in the list plus a random delay before making
any ORIGINATE or CAPTURE REQUEST as does any other UE that has not previously
attempted to gain the floor.
{width="5.735416666666667in" height="3.895138888888889in"}
Figure 5.6.1.1.4.5-2: Action after RELEASE with a second list
(overriding/overridden talker)
If a higher priority user has sent a CAPTURE REQUEST and the transmitting UE
has not released it re-sends the CAPTURE REQUEST.
###### 5.6.1.1.4.6 Contention resolution
{width="6.540277777777778in" height="3.0229166666666667in"}
Figure 5.6.1.1.4.6-1: Dealing with an origination race condition
A race condition/collision may occur when two users press to transmit at the
same time. Some UEs will see one transmission, some will see the other. When
those UE send RECEIVING at distributed time intervals it is most likely that
some UE will see RECEIVING for two different Orig ID and so can detect a
collision has occurred.
A COLLIDE message could be sent when one device sees RECEIVING for more than
one user in the group (RECEIVING containing different Orig IDs).
COLLIDE, when received by the originating devices, causes both setups to fail
-- wait a random time x priority level (assuming lower priority value means
higher priority) and try again. Any other device seeing a COLLIDE message
cannot start a new communication for Random Time Max. An alternative may be
for the UE detecting the collision to arbitrate when one sending UE has higher
priority than the other.
###### 5.6.1.1.4.7 Contending for resource
The basic premise of this floor control mechanism is that continuation of
communication holds the floor but does not hold the complete set of resources
allocated. Therefore return signalling for the group can be provided in time
interleave with the transmitted speech. In fact several different groups can
be transmitting with their own respective floor controls and return signalling
in the same shared set of resources. When there is no speaker in a group then
there will be no held floor and no resources will be occupied for that group
so the resources are shared in a trunking fashion with multiple groups. There
may, of course, be some background keep alive signalling among the group.
It is probable that no resource contention or reservation will be required
unless the occupancy of the shared resource become quite significant. If this
does present a problem, it may be useful to devise a means for holding on to
some amount of transmission resource.
###### # 5.6.1.1.4.7.1 Pseudo random code contention for floor control
In a shared resource MCPTT environment, there are no reserved physical
resources that a group's members can contend for when requesting the floor. As
such, something else will have to be provided, for which the group members can
contend and own when granted the floor. A possible solution to this could be
the use of a pseudo-random number token ID which is generated when the first
ORIGINATE message of a subset is sent.
In the event that two subsets of a group are simultaneously participating in a
session and a member of the group comes in range of both subsets, under some
circumstances (e.g. if the same UE started the communication in one subset
session then through mobility moved out of range and started a second subset
session) there would be no way to differentiate between the two ongoing
communications, according to the description above. Therefore, if both groups
have an active talker, the incoming streams could potentially be interleaved
at the receiver. Some way of differentiating between these subsets may be
needed. Again, the use of a pseudo-random number ID as a resource owned by the
floor holder could solve this issue. As both floor holders will own a
different token, differentiation between the talk streams becomes possible.
###### 5.6.1.1.4.8 For further study
Editor's note: Joining two subsets of a group. Initial thoughts are that if at
least one group is passive the normal procedures described above will work to
join the two groups together. If both groups are active then the COLLIDE
approach may be sufficient to recover the two groups into one.
Editor's note: Further consideration for COLLIDE to investigate possible
failure modes.
Editor's note: Action for a high priority UE when the user presses send at the
same moment a RELEASE with Seconds has been sent.
##### 5.6.1.1.5 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.6.1.1.6 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
#### 5.6.1.2 Solution 6-1-2: Options for off-network floor control
##### 5.6.1.2.1 Functional description
The following steps are needed in order to enable off-network MCPTT over PC5
interface which is defined in Proximity-based services (ProSe), see 3GPP TS
23.303 [4].
Figure 5.6.1.2.1-1: Pre-requisites for enabling MCPTT over PC5
[]{.underline}
1) ProSe Direct Discovery
ProSe Direct Discovery is proposed to be used for the procedure for Group
Formation. The Group Formation allows up-to-date information on the
(transmitting) UE to perform Floor Arbitrator (FA) selection either before the
call is established or during the call. In order for the group members to
determine the FA, they must have access to the member's hierarchies at an
early stage of Group Formation i.e. the time of discovery. 3GPP TS 22.179 [2]
also states that the off-network MCPTT service shall provide a means by which
a UE can reach another UE which is directly unreachable, by using a UE-to-UE
relay. Therefore, the exchanged information at the time of discovery shall
provide a list of UEs with their hierarchies to which a UE can connect either
directly or by using a UE-to-UE relay.
Procedures for ProSe Direct Discovery are defined as part of ProSe, see 3GPP
TS 23.303 [4] and will be expanded by new cases such as Restricted Direct
Discovery as part of eProSe-Ext WIDs.
2) Group Formation
This step is required in order to appropriately manage the floor arbitration
for MCPTT communication. The Floor Arbitrator (FA) needs to be selected before
the call starts, but also during the call in case the FA is unreachable and a
new FA needs to be selected. The initial election of FA shall be based on
information at the time of discovery and shall be updated when new discovery
occurs.
Editor's note: It is FFS as to when new discovery occurs while group
communication is already in process.
Procedures for Group Formation are in scope of MCPTT WID.
3) Information Delivery
This step determines whether the transmitting UE would select to send data or
signalling using one-to-one ProSe Direct Communication or one-to-many ProSe
Direct Communication. Whether to use a \"full mesh\" of one-to-one or one-to-
many ProSe Direct Communication can also depend on the size of the group and
as such it can be decided in a case by case basis. The following procedures
for Group Formation describe signalling at the application layer and as such
are unrelated to whether one-to-one ProSe Direct Communication is established
or one-to-many ProSe Direct Communication.
Procedures for using one-to-many ProSe Direct Communication are defined in
3GPP TS 23.303 [4] and for one-to-one ProSe Direct Communication will be
further defined in rel.13 as part of eProSe-EXT WID.
##### 5.6.1.2.2 Discovery scenarios and message formats
###### 5.6.1.2.2.1 Full member visibility
The scenario in figure 5.6.1.2.2.1-1 when all group members are visible to
each other.
Figure 5.6.1.2.2.1-1: Full member visibility
A UE in this group, for instance UE-A, can receive messages from all other
UEs, i.e. UE-B, UE-C, UE-D, UE-E, UE-F, and UE-G to build the visibility list.
If UE-A has access to the neighbor's IDs and hierarchies, the visibility list
is then according to the following table:
Table 5.6.1.2.2.1-1: Full member visibility
Where \"Hop-1\" lists immediate neighbors and \"Hop-2\" lists the neighbor's
neighbors, to which UE-A can connect by using UE-UE relays.
###### 5.6.1.2.2.2 Partial member visibility
This is the scenario when the visibility of all the group members is dependent
on UE-UE relays as in figure 5.6.1.2.2.2-1.
Figure 5.6.1.2.2.2-1: Partial member visibility
For instance UE-A in this scenario has direct visibility for UE-B, UE-C, UE-F,
and UE-G, however, it relies on UE-UE relays to gain visibility for UE-D and
UE-E. UE-D is visible by having either UE-B, UE-C, or UE-F as UE-UE relay,
while UE-E is visible by having either UE-C, UE-F, or UE-G as UE-UE relay. The
visibility list for e.g. UE-A is then according to the following table:
Table 5.6.1.2.2.2-1: Partial member visibility
Where Hop-1 lists the neighbors and their hierarchies while Hop-2 lists the
neighbors' neighbors (through UE-UE relays).
###### 5.6.1.2.2.3 Limited member visibility
This scenario is when the full visibility of all the group members is still
not possible even when using UE-UE relays as in figure 5.6.1.2.2.3-1.
The design constraint is that at most two hops are used as this is a ProSe
process (see 3GPP TS 22.278 [16]).
Figure 5.6.1.2.2.3-1: Limited member visibility
For instance UE-A in this scenario has direct visibility for UE-B and UE-G,
however, it relies on UE-UE relays to have visibility for UE-C and UE-F. UE-C
is visible by having UE-B as UE-UE relay, while UE-F is visible by having UE-G
as UE-UE relay. The visibility list for e.g. UE-A is then:
Table 5.6.1.2.2.3-1: Limited member visibility
Where Hop-1 lists the neighbors and their hierarchies while Hop-2 lists the
neighbors' neighbors (via UE-UE relays).
###### 5.6.1.2.2.4 Discovery message format
In order to support the above use cases, the format of the MCPTT discovery
message is proposed to be the following, making use of the ProSe discovery
message in 3GPP TS 23.303[4] as in figure 5.6.1.2.2.4-1.
Figure 5.6.1.2.2.4-1: Announced Temp ID in the MCPTT Discovery Message
Type header of the ProSe discovery message (not shown above) contains 2 bits
for discovery model (A or B). The announced Temp ID within the ProSe App Code
contains:
1) Layer2 Group ID together with pre-provisioned ProSe Group Key (PGK) ID.
These parameters are used by any monitoring group member to retrieve the
information in the rest of the announced Temp ID.
2) User's Layer2 ID 1.
3) User's Hierarchy within the group,
\- User's hierarchy is used for the floor arbitration,
\- Within a group call, the users shall keep track of some (or all) users'
hierarchies in case the arbitrator leaves/drops the call and a new arbitrator
(next in the hierarchy list) needs to be selected,
\- Due to changes in user profile, the hierarchy may be updated by
administrators, and the network is expected to inform all group members about
the new hierarchy when the users are on-network.
4) Neighbor Layer2 ID (one or more)
\- Layer2 IDs of the hop-1 members whose discovery messages have been
received.
5) Neighboring Hierarchy (one or more)
\- Hierarchies of the hop-1 members whose discovery messages have been
received.
NOTE 1: The values of Neighbor Layer 2 ID and Neighboring Hierarchy are set to
zeros if no neighbour has yet been identified.
NOTE 2: The announcing UE may not be able to announce all its hop-1 neighbors
and their hierarchies due to the size limitation of Temp ID. There are
different options to handle this limitation: The announcing UE selects a
certain number of hop-1 neighbors and their hierarchies. This selection is out
of the scope of 3GPP; or the announcing UE sends different discovery messages
containing different neighbor lists so it can announce all its neighboring UEs
and their hierarchy; or the announcing UE sends a group communication message
containing the neighbour list based on information indicated in the discovery
message, such that the monitor UE knows where/when to receive it.
##### 5.6.1.2.3 Floor control
###### 5.6.1.2.3.1 Floor control protocol
The model for off-network floor control has two elements:
\- combined Floor Chair and Floor Control Server as the Floor Arbitrator, and
\- Floor Participants.
where the Floor Arbitrator has the highest hierarchy in the MCPTT group. This
floor control mechanism is based on sending UDP/IP packets to a certain port
number. Thus, this communication is not a one-to-one communication and can be
monitored by all the members within the MCPTT group.
NOTE 1: This proposal selects the UE with the highest priority as the initial
Floor Arbitrator. Different algorithms can be used to determine the Floor
Arbitrator and the below mechanism for managing the Floor Control will still
apply.
Editor's note: It is FFS whether the port for this communication is
preconfigured or need to be negotiated at the time of e.g. session set up.
The Floor Arbitrator and MCPTT group members shall keep track of a list of the
requests and responses for the floor control. The Floor Arbitrator keeps track
of this list to handle the floor control with respect to members' position in
the queue, hierarchies, etc. The other group members keep track of this list
to have a copy of this information in case the Floor Arbitrator loses coverage
or drops off, and there is a need for a replacement.
Figure 5.6.1.2.3.1-1 shows the format of a potential signalling packet for the
off-network floor control.
Figure 5.6.1.2.3.1-1: Format of the signalling packet for off-network floor
control
Figure 5.6.1.2.3.1-1 shows that 8 bits of the data is called primitive which
can be assigned values similar to the primitives in IETF RFC 4582 [9] for
BFCP, as described in table 5.6.1.2.3.1-1.
Table 5.6.1.2.3.1-1: Mapping of primitives
* * *
Value Primitive Direction 1 FloorRequest P -> S 2 FloorRelease P -> S 3
FloorRequestQuery P -> S ; Ch -> S 4 FloorRequestStatus P \ S ; Ch -> S 6 UserStatus P \
S ; Ch -> S 8 FloorStatus P \ S 10
ChairActionAck Ch \ S ; Ch -> S 12 HelloAck P \A, media packets have IP\@A2 and IP\@B1 as Destination and
Source addresses; this means they originate on the interface facing the EPC
path, while destined for an IP address on the ProSe Communication path (i.e. a
completely disjoint IP network), which is therefore unreachable;
\- In direction A=>B, media packets have IP\@B1 and IP\@A2 as Destination and
Source addresses; this means they originate on the interface facing the ProSe
Communication path; given that the ProSe Communication path is a point-to-
point link, the media packets will eventually be delivered to UE B, only to be
discarded there, because the SIP/IMS client in UE B is not expecting any
packets arriving on IP\@B1;
2\. Upon being informed of the IP address change of UE A, UE B will not
necessarily attempt to switch its own IP address for reception, because today
these two operations are completely dissociated from one another.
##### 5.8.2.1.4 Proposed solution
The IMS Service Continuity procedure is enhanced as follows:
\- New or modified Message 1 method allowing UEs to inform each other about
the availability of a ProSe Communication path;
\- New or modified Message 2 method is used to trigger switching of media
packets between the EPC path and the ProSe Communication path, the media
description being updated for both endpoints simultaneously.
Editor's note: It is up to Stage 3 to decide which SIP methods can be used as
Message 1 and Message 2 methods.
#### 5.8.2.2 Procedures
##### 5.8.2.2.1 General
The following procedures are described with call flows:
\- MCPTT service continuity from EPC path to ProSe Communication path.
The procedure for service continuity in the opposite direction is identical
and is not shown.
##### 5.8.2.2.2 MCPTT service continuity from EPC path to ProSe Communication
path
The overall call flow for MCPTT service continuity from EPC path to ProSe
Communication path is illustrated in figure 5.8.2.2.2-1.
Figure 5.8.2.2.2-1: Overall call flow for SIP-based service continuity from
EPC path to ProSe Communication path
1\. Terminal UE A and UE B are engaged in IMS communication on the EPC path
using addresses IP\@A1 and IP\@B1 for all media packets.
2\. UE A and UE B discover that they are in proximity and establish a 1:1
ProSe Communication path. In the process they are assigned a new pair of IP
addresses for the ProSe Communication path: IP\@A2 and IP\@B2, respectively;
3-6.The SIP/IMS clients inform each other of the availability of a ProSe
Communication path using the Message 1 method. Note that these messages are
only informational: the effective path switch is triggered later in the call
flow. The SIP/IMS clients need to check that the addresses IP\@A2 and IP\@B2
belong to the same ProSe Communication Path. The SIP/IMS clients also
understand that the IP subnet on the ProSe Communication path is completely
disjoint from the IP network(s) traversed on the EPC path, which means that
any subsequent request for path switch initiated by either party makes sense
only if it is executed simultaneously on both sides;
7-9.After the information for availability of the ProSe Communication path has
been successfully exchanged between the two parties as described previously,
at any time either party can trigger the path switch. Message 2 method is used
for this purpose as follows:
\- Message 2 in step 7 carries a new media description for a subset of IP
flows using IP\@A2. Upon reception of the Message 2 the SIP/IMS client in UE B
knows that IP\@A2 belongs to a disjoint IP network. Therefore, in step 8 UE B
sends a Message 2 OK carrying a media description for the same subset of IP
flows using IP\@B2. UE A can start sending media packets on the ProSe
Communication path upon reception of the Message 2 OK in step 8. UE B can
start sending media packets on the ProSe Communication path upon reception of
the Message 2 ACK in step 9.
> 10.UE A and UE B are engaged in SIP/IMS communication with a subset of IP
> flows transferred on the ProSe Communication path.
>
> When the ProSe Communication path becomes unavailable, the two UEs can
> perform path switch in the opposite direction using the Message 2 method, as
> described in steps 7-9.
#### 5.8.2.3 Impact on existing entities and interfaces
System-level considerations:
\- The solution has no specification impact on existing RAN entities.
\- The solution has no specification impact on existing EPC entities.
SIP/IMS-level considerations:
\- The solution requires enhancements to IMS Service Continuity (e.g.
identifying and modifying existing SIP methods to be used as Message 1 method
and Message 2 method as described in subclause 5.8.2.2).
#### 5.8.2.4 Solution evaluation
Considering the schedule for Rel-13, and also the fact that service continuity
between EPC path and ProSe communication path for MCPTT private calls is of
lower priority compared to service continuity between on-network and UE-to-
network relay, solution 8-2 will not be pursued further for Rel-13.
## 5.9 Private calls
### 5.9.1 Off-network
#### 5.9.1.1 Solution 9-1-1: Support for MCPTT off-network private calls
##### 5.9.1.1.1 Functional description
Solution 9-1-1 is a One-to-One variant of the One-to-Many MCPTT off-network
solution described in subclause 5.1.1 (Solution 1-1).
The solution described in this clause is illustrated in figure 5.9.1.1.1-1.
Figure 5.9.1.1.1-1: High-level architecture view for MCPTT off-network Private
Calls
MCPTT off-network is the inter-UE application level interface connecting MCPTT
clients for One-to-One Off Network communication.
An MCPTT off-network client when supporting Private Calls has the following
characteristics:
\- It runs on top of the ProSe One-to-One communication service defined for
PC5 in Rel-13.
\- It has functionality for cooperative floor control, which may or may not be
selected by the MCPTT User.
**-** It may support functionality for location, presence and status
reporting, as identified in the Stage 1 requirements.
##### 5.9.1.1.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
##### 5.9.1.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
##### 5.9.1.1.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
### 5.9.2 On-network
#### 5.9.2.1 Solution 9-2-1: Support for MCPTT on-network private calls (with
floor control)
##### 5.9.2.1.1 Functional description
The solution focuses on the case where an MCPTT user is initiating an MCPTT
private call for communicating with another MCPTT user with floor control
enabled. The calling MCPTT user includes only one MCPTT user identity in the
call initiation message (e.g., SIP INVITE), to establish private call session
between two MCPTT users.
Naturally, this solution can provide following capabilities assuming that they
are essential for the MCPTT private call services:
\- MCPTT user identity
\- Floor control (i.e., half duplex calls)
\- Location information
\- Privacy
\- Encryption
**-** Commencement modes
Editor's note: Capabilities can be added/updated according to the MCPTT
private call solution.
##### 5.9.2.1.2 Procedures
The procedure for this solution proposes to include MCPTT user identity in the
call initiation message (e.g., SIP INVITE) sent from UE to the MCPTT network
(e.g., P-CSCF in case of IMS core).
Procedures in figure 5.9.2.1.2-1 are the basic signalling/control plane
procedures for the MCPTT UE initiating establishment of MCPTT private call
with the selected MCPTT user.
Figure 5.9.2.1.2-1: Private call (with Floor Control) Set up
1\. It is assumed that MCPTT users on MCPTT UE1 and UE2 are already registered
for receiving MCPTT service.
2\. User at MCPTT UE1 would like to initiate a MCPTT private call with floor
control for the selected MCPTT user (identified by MCPTT ID).
3\. MCPTT UE1 sends an INVITE message towards the MCPTT Server, for
establishing private call with the user.
NOTE 1: There could be intermediate entities that the INVITE message may go
through before reaching the MCPTT Server, and are intentionally omitted for
simplicity.
4\. MCPTT Server checks whether user of MCPTT UE1 is authorized.
5\. If authorized, MCPTT Server sends the corresponding INVITE message towards
the MCPTT UE of the user specified in the original INVITE request. MCPTT user
is notified about the incoming private call.
6\. The receiving MCPTT UE accepts the private call INVITE message, and an
acknowledgement is sent to the MCPTT Server.
NOTE 2: Depending on the call commencement mode, the INVITE message is either
automatically accepted by the receiving UEs or manually through user consent.
7\. Upon receiving the MCPTT UE2 accepting the private call INVITE message,
MCPTT UE1 is informed about successful call establishment.
8\. MCPTT UE1 and UE2 have successfully established media plane for
communication.
9\. MCPTT UE1 and UE2 exchange Floor Control messages e.g., MCPTT UE1 receives
the Floor Granted message over the established media plane, while the other
MCPTT UE receives the Floor Taken message. The MCPTT UE1 indicates to the
MCPTT user that the floor is available to send media, while the other MCPTT UE
in the private call will be receiving that media.
##### 5.9.2.1.3 Impact on existing entities and interfaces
None.
##### 5.9.2.1.4 Solution evaluation
The solution for private call is already captured in subclause 7.7 (further
transferred to 3GPP TS 23.179 [28]).
#### 5.9.2.2 Solution 9-2-2: Support for private calls without floor control
##### 5.9.2.2.1 Functional description
Conceptually, this solution is based on essential functionalities required for
providing IMS voice over PS calls (see 3GPP TS 23.401 [11] and 3GPP TS 23.228
[13]). That is because private call only with voice media can be viewed as a
kind of telephony services, especially in case without floor control. This
solution assumes that MCPTT system can support the interaction with IMS system
providing telephony service. More specifically, if the MCPTT system adopts IMS
as a baseline architecture (i.e., solution 2-1), to support MCPTT private
calls using the IMS voice over PS, minimum subset of TAS (Telephony
Application Server) functionalities is expected to be collocated with the
MCPTT system.
Naturally, this solution can provide following capabilities assuming that they
are essential for the underlying IMS service:
\- Full duplex private calls (i.e., call without floor control)
\- Location information
\- Privacy & Encryption
\- QoS support
\- And so on.
Editor\'s note: How to support automatic commencement mode and emergency
private call is FFS.
Editor\'s note: How to consider the case where MCPTT user ID is different from
IMS ID is FFS.
##### 5.9.2.2.2 Procedures
The procedures are similar to those for supporting MCPTT interaction with
telephony services. That is, the information flows in subclauses 5.2.1.2.2.2
and 5.2.1.2.2.3 are applied for out-going and in-coming private calls,
respectively.
##### 5.9.2.2.3 Impact on existing entities and interfaces
None.
##### 5.9.2.2.4 Solution evaluation
The solution for private call is already captured in subclause 7.7 (further
transferred to 3GPP TS 23.179 [28]).
## 5.10 Log on/Authentication
### 5.10.1 Solution 10-1: MCPTT UE and MCPTT user single log on
To support the scenario where the device level access permission/restriction
(e.g. white/black list policy) is required, the MCPTT service should be able
to identify and authenticate the device identity that is relevant to the ME
domain of the MCPTT UE.
It is recommended the MCPTT service provide a single log on solution for MCPTT
user and MCPTT UE that can support PTT and other mission critical
applications.
#### 5.10.1.1 Functional description
Editor's note: General description, assumptions, and principles of the
solution.
#### 5.10.1.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
The example procedure for MCPTT UE and user single log on followed by a call
session in single domain is shown below.
Figure 5.10.1.2-1: Example of MCPTT UE/User log on and authentication
procedure (single domain)
Editor's note: it's FFS whether the MCPTT client include or separate from the
authentication logic function.
1) The MCPTT UE log on to MCPTT system using the device identity and signature
or other credentials. The log on interaction is performed via an application
path (e.g. HTTPS) from MCPTT client to Identity Management. The device
identity associate the physical device itself; it may be (or derived from)
IMEI or other type of unique identities within MCPTT network. After
authenticate the MCPTT UE, the Identity Management assign a temporary MCPTT
user identity for this MCPTT UE. The association information kept in Identity
Management may be used for operation on this UE in emergency services.
Editor's note: the MCPTT UE assigned with a temporary MCPTT user identity is
assumed to have limited permissions to access the MCPTT service. It's FFS what
service required by MCPTT emergency scenarios can be accessed by the MCPTT UE
with a temporary MCPTT user identity.
2) The user log on to MCPTT service using the username and password. Other
credential such as biometric information may be used in user log on purpose.
The device identity may be used in user log on purpose in scenarios where the
device level access permission is required. The log on interaction is
performed via an application path (e.g. HTTPS) from MCPTT client to Identity
Management. The user get a public user identity and a security token that can
be used for various applications. The public user identity may be the form of
IMPU. The Identity Management update the association of the UE to the public
user identity. The association information may be used to deliver the service
to a specific device when the user uses multiple devices in parallel.
3) The MCPTT user get the user profile on the associated UE from Group
Management and/or MCPTT user database by using the public user identity. The
user profile may contain the user relevant attributes such as priority and
group list. XDMS may be used for acquiring the user profiles.
Editor's note: it's FFS whether the single user profile and the group-related
user profile are collocated.
4) MCPTT client perform standard SIP registration to the SIP core, carrying
the public user identity and the security token.
5) The SIP core carrying the security token interact with Identity Management
to check the validity of the token.
6) The SIP core perform registration with the MCPTT server using the public
user identity and the security token.
7) The MCPTT client set up call session with the MCPTT server by using the
registration information achieved in step 4, 5, and 6.
8) MCPTT user log off from the MCPTT service by using the public user
identity. The Identity Management dissociate the MCPTT UE with the public user
identity; and assign a temporary user identity to the UE.
#### 5.10.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.10.1.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
## 5.11 Group affiliation
### 5.11.1 Solution 11-1: Group affiliation based on OMA XDM
#### 5.11.1.1 Functional description
Group affiliation provides the means to:
\- Affiliate MCPTT users with MCPTT groups; and,
\- Distribute group membership and affiliation information to the MCPTT UE.
Group affiliation utilizes the MCPTT AS, MCPTT UE, and XDMS, as follows:
MCPTT UE:
\- Writes a List XDMS for which it wants to affiliate and/or to track member
affiliation status.
\- Reads and tracks an MCPTT XDMS created by the MCPTT AS containing the group
members and affiliation status of the requested groups.
MCPTT AS:
\- Reads and tracks a List XDMS to which the MCPTT user seeks to be
affiliated.
\- Affiliates to those groups by adding the user's identity to the condition
part of the affiliation rule of the group documents.
\- Reads and tracks members and affiliation status of the groups to which the
user seeks to track.
\- Writes and maintains a network-based list containing the members and
affiliation status of the groups to which the user seeks to track.
In the foregoing, an authorized MCPTT user is able to read and track another
MCPTT user's MCPTT XDMS, as requested by that other MCPTT user.
Group XDMS:
The Group XDMS contains affiliation authorization policies to which the MCPTT
AS refers to make decisions regarding whether to conference a given user to an
MCPTT call; one example of an authorization policy framework is IETF Common
Policy. Such a framework defines a rule as a condition and an action. For
purposes of \"group affiliation\" in MCPTT, the condition part of the rule
contains the identities of MCPTT group members that have authorized their
affiliation with the MCPTT group. The action part of the rule in this case
expresses the user's interest in the group, for example, \"is-affiliated\".
The \"affiliation authorization\" rule (policy) is kept in a set with other
rules of group document.
List XDMS:
\- Contains the list of groups to which the MCPTT user is to be affiliated
MCPTT XDMS:
\- Contains the group membership and affiliation status of the MCPTT groups
contained in the List XDMS
Operationally:
\- In order to be affiliated to a group, the identity of the MCPTT user is
added into the condition element of the rule.
\- In order to become nonaffiliated, the identity of the MCPTT user is deleted
from the condition element.
\- The MCPTT AS checks the group affiliation rule to determine whether to
conference an MCPTT user to a group call. If the user is not contained in the
condition part of the rule, then the MCPTT AS does not conference the MCPTT
user to group calls.
The following diagram illustrates the inter communication of the MCPTT AS,
MCPTT UE, and XDMS; however, the group XDMS is not shown in the figure below.
Figure 5.11.1-1: Inter communication of the MCPTT AS, MCPTT UE, and XDMS
#### 5.11.1.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
#### 5.11.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.11.1.4 Solution evaluation
This solution is to be considered for inclusion in 3GPP TS 23.179 [28], in
combination with the solution in subclause 5.11.2.
### 5.11.2 Solution 11-2: Group affiliation based on presence and XDM
#### 5.11.2.1 Functional description
Group affiliation provides the means to:
\- Affiliate MCPTT users with MCPTT groups; and,
\- Distribute group membership and affiliation information to MCPTT server and
MCPTT UEs.
Group affiliation utilises the MCPTT UE, MCPTT server, resource list server
(RLS), presence server and XDMS, as follows:
MCPTT UE:
\- Publishes the list of MCPTT group URIs that the MCPTT user wishes to
affiliate with, using either direct presence service publication or included
in the MCPTT service settings sent to the MCPTT server.
\- Subscribes to presence information:
a) own presence status for updates to own affiliations;
b) other MCPTT user's presence status to obtain the affiliations of other
MCPTT users; and
c) using the group member list from the list XDMS as a resource list to obtain
who is affiliated to a particular MCPTT group.
MCPTT server:
\- Publishes to the presence server the list of MCPTT group URIs that the
MCPTT user wishes to affiliate with along with the other MCPTT service
settings; and
\- Uses the condition rule of the group documents to determine that the
members of the MCPTT group need to affiliate to be invited and then subscribes
to the group member list resource list to obtain who is affiliated to a
particular MCPTT group in order to determine who to invite. A filter is used
in the subscription so that only changes to the affiliation information
triggers notifications.
Group XDMS:
\- The MCPTT group document contains authorisation policies to which the MCPTT
server refers to make decisions regarding whether to conference a given user
to an MCPTT group call. The authorization policy framework is based on IETF
common policy that defines a rule as a condition and an action. For purposes
of "group affiliation" in MCPTT, the condition part of the rule contains an
indication that "affiliation is required" to be invited action; and
\- The MCPTT group document also uses the list XDMS for the group member list.
List XDMS:
\- Contains the list of group members for each MCPTT group.
Resource list XDMS:
\- Uses the list of group members of each MCPTT group from the list XDMS
Presence server:
\- Composes the presence document for each MCPTT user based on the published
presence information including the lists of MCPTT group URIs the MCPTT user
wishes to affiliate with; and
\- Based on the presence watcher authorisation policies provides presence
information to those subscribing for it including the lists of MCPTT groups
the MCPTT user wishes to affiliate with
The following diagram illustrates the inter communication of the MCPTT UE,
MCPTT server, resource list server, presence erver and XDMS.
NOTE: The dotted lines show functional entities that can be collocated when
the MCPTT users, the MCPTT server that hosts the MCPTT group, and all the
group members are in the same network.
{width="6.0159722222222225in" height="2.642361111111111in"}
Figure 5.11.2.1-1: Architecture
#### 5.11.2.2 Procedures
##### 5.11.2.2.1 Explicit case
Assumptions:
\- The MCPTT group document provisioned in the group XDMS contains
authorisation policies to which the MCPTT server refers to make decisions
regarding whether to conference a given user to an MCPTT group call
\- The MCPTT group document provisioned in the group XDMS uses a member list
provisioned in the list XDMS;
\- The resource list XDMS has been provisioned with a resource list that uses
the same member list as the group document and is provisioned in the list
XDMS; and
\- The group MCPPT server has downloaded the group documents from the group
XDMS.
Editor's Note: The terminology for the home MCPTT server and the group MCPTT
server is FFS.
{width="6.501388888888889in" height="7.723611111111111in"}
Figure 5.11.2.2.1-1: MCPTT server obtains affiliation lists - explicit case
1\. The MCPTT UE publishes the MCPTT service settings including the list of
MCPTT group URIs the MCPTT user wishes to affiliate with to the home MCPTT
server
2 The MCPTT server sends an OK response to the MCPTT UE.
3\. The MCPTT server publishes the MCPTT service settings including the list
of MCPTT group URIs the MCPTT user wishes to affiliate with to the presence
server.
4\. The presence server sends an OK response.
5\. The group MCPTT server subscribes to the resource list server for MCPTT
group members.
NOTE 1: It is an implementation option as to when the group MCPTT server
subscribes to the resource list of group members e.g. the group MCPTT server
could subscribe before the MCPTT UE publishes the MCPTT service settings.
6\. The resource list server sends an OK response to the group MCPTT server.
7\. The resource list server sends a GET to obtain the resource list from the
resource list XDMS.
8\. The resource list XDMS sends a GET to obtain the group member list from
the list XDMS.
9\. The list XDMS returns the group member list in the OK response.
10\. The resource list XDMS returns the resource list for the group in the OK
response.
11\. The resource list server subscribes with the presence server for each
group member.
12\. The presence server sends an OK response
13\. The presence server sends notifications for each group member containing
the list of MCPTT group URIs that the MCPTT user wishes to affiliate with to
the resource list server.
14\. The resource list server sends an OK response.
15\. The resource list server aggregates the notifications and sends a
notification to the group MCPTT server including the affiliation status of all
the group members.
16\. The group MCPTT server sends an OK response.
17\. The group MCPTT server sends a request to the group XDMS to write the new
affiliation status of the MCPTT user to the group XML document.
18\. The group XDMS writes the requested affiliation status of the MCPTT user
to the group XML document and responds with an OK response to the group MCPTT
server.
19\. The MCPTT UE sends an INVITE for a group call to the home MCPTT server.
20\. The home MCPTT server forwards the INVITE for a group call to the group
MCPTT server.
21\. The group MCPTT server sends a request to the group XDMS to obtain the
group XML document including the affiliated member list.
22 The group XDMS returns the group XML document including the affiliated
member list in the OK response
NOTE 2: It is an implementation option whether the group MCPTT server fetches
the group XML document at call setup or whether it caches the group
information and affiliation status from earlier steps. If the information is
cached steps 21-22 will not be needed.
23\. The group MCPTT server invites the affiliated group members based on the
affiliation status of the group members.
##### 5.11.2.2.2 Implicit case
The implicit case is the same as the explicit case except that:
\- the affiliation status is based on the online availability (presence
status) of the user and not the presence of the group in the affiliation list
in the case that the implicit affiliation is a policy of the group network;
and
\- the presence server composition policy is to compose a presence document
always containing the implicitly affiliated groups whenever the MCPTT user is
online if implicit affiliation is the policy of the home network.
#### 5.11.2.3 Impact on existing entities and interfaces
The MCPTT service settings is enhanced to include the list of MCPTT group URIs
the user wishes to affiliate with.
#### 5.11.2.4 Solution evaluation
This solution is to be considered for inclusion in 3GPP TS 23.179 [28], in
combination with the solution in subclause 5.11.1.
## 5.12 MCPTT for Isolated E-UTRAN Operation for Public Safety (IOPS)
### 5.12.1 Solution 12-1: Local SIP core and local MCPTT server
#### 5.12.1.1 Functional description
The solution for MCPTT for IOPS described in this clause is straightforward.
Figure 5.12.1.1-1: MCPTT for IOPS with local SIP core and local MCPTT server
As illustrated in figure 5.12.1.1-1 it is assumed that:
\- In the event of total loss of backhaul connection to the Macro Evolved
Packet Core (Macro EPC), the E-UTRAN transitions to IOPS mode by activating a
local EPC (refer to 3GPP TR 23.797 [22]) and establishing the S1 link to the
local EPC; and
\- The local EPC function provides access to a local SIP core and a local
MCPTT server; and
\- The same architecture also applies to a nomadic EPS (also described in 3GPP
TR 23.797 [22]).
Editor's note: The method by which the local MCPTT server and SIP core are
configured for IOPS mode MCPTT service, and the information required to allow
for the continuation of service in IOPS mode is a subject FFS.
#### 5.12.1.2 Procedures
##### 5.12.1.2.1 General
It is expected that the procedures for MCPTT for IOPS will largely follow the
procedures for on-network operation. The main impact is expected on security
due to the total absence of backhaul connection towards any centralised
repository of security credentials.
Editor\'s note: The security aspects of MCPTT for IOPS are FFS and need to be
defined in SA3.
##### 5.12.1.2.2 High-level call flow for MCPTT for IOPS
Depicted in figure 5.12.1.2.2-1 is a high-level call flow describing how an
IOPS-enabled UE switches from normal mode MCPTT to IOPS mode MCPTT and vice
versa, following the underlying EPS transitions between normal and IOPS mode.
Figure 5.12.1.2.2-1: Operation of MCPTT for IOPS
The call flow is based on the call flow in 3GPP TR 23.797 [22] figure
6.1.2.1-1.
The only new steps are steps 6, 7 and 11.
Editor's note: The exact information transmitted between the Local SIP core
and the Local MCPTT server within the third party registration in step 7 to
allow for IOPS mode MCPTT service is a subject FFS.
#### 5.12.1.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
#### 5.12.1.4 Solution evaluation
Editor's note: The fulfilment of requirements will be evaluated.
## 5.X Solution X: \
### 5.X.1 Functional description
Editor's note: General description, assumptions, and principles of the
solution.
### 5.X.2 Procedures
Editor's note: Describes the high-level operation, procedures and information
flows for the solution.
### 5.X.3 Impact on existing entities and interfaces
Editor\'s note: Impacts on existing nodes or functionality will be added.
### 5.X.4 Solution evaluation
Editor's note: The fulfilment of requirements in clause 4.2 will be evaluated.
# 6 Functional diagram
Editor's note: This clause is intended to consist of the overall functional
model diagram, a description of each of the functional entities, and a
description of the functional entity relationships.
Editor's note: This clause and subsequent clauses are intended to be a working
area for text that will be included in the MCPTT TS'(s). The structure of this
and subsequent clauses may not be replicated in the MCPTT TS'(s).
NOTE: Terminology such as client and server are not meant to imply specific
physical implementation of a functional entity.
## 6.1 Functional model
The functional model for the support of MCPTT is defined as a series of planes
to allow for the breakdown of the architectural description.
Editor\'s note: Terminology for \"plane\" needs to be further discussed.
\"High level functions\" has also been proposed.
Further, each plane is expected to operate in an independent manner, providing
services to the connected planes as and when requested by the connected plane,
and requesting services from other planes as required.
As a consequence of this each plane should manage on its own behalf:
a) use of identities. Each plane is therefore responsible for the privacy of
that plane\'s own identities; and
b) security for that plane. This does not preclude a plane requesting security
services from another plane, but that is a decision made within the plane, as
to whether to use offered security services or mechanisms within the plane
itself.
Editor\'s note: Whether this applies to every plane needs to be evaluated and
described later.
Editor\'s note: A figure showing a complete functional model is given here.
## 6.2 Description of the planes
The following planes are identified:
Editor\'s note: The list below is to be aligned with the detailed description
in subclause 6.4. Not necessarily complete at the moment and planes might be
combined.
a) application plane. The application plane provides all the services required
by the user. It uses the services of the signalling control plane and the
media plane to support those requirements;
Editor\'s note: It is for further study whether resource control via Rx is
possible / needed from the application plane.
b) signalling control plane. The signalling control plane provides the
necessary signalling support to establish the association of users involved in
a MCPTT call or other type of call and other services. The signalling control
plane also offers access to and control of services applicable to calls. The
signalling control plane uses the services of the bearer plane;
c) media plane. The media plane provides for the conferencing of media, floor
control of media, transcoding of media, and provision of tones and
announcements. It provides services to both the application plane directly,
and to the signalling control plane. The media plane also consists of the
media gateways needed to support the media. It uses the services of the bearer
plane. The media plane is established by the signalling control plane; and
Editor\'s note: The presence of floor control in this plane, or in another
plane, is for further discussion.
d) bearer plane. This plane provides the bearers, via resource control as
defined within 3GPP TS 23.203 [4], needed to support the media plane, and the
signalling control plane. The bearer plane is defined for LTE within 3GPP TS
23.401 [11].
Editor\'s note: Whether bearer resource control and bearers should be
separated is for further study.
Editor\'s note: Additional words may be needed to cover multicast bearers.
## 6.3 Functional diagram
### 6.3.1 On-network architecture model
#### 6.3.1.1 On-network architectural model diagram
Figure 6.3.1.1-1 below is the on-network architectural model for the MCPTT
system solution, where the MCPTT system provides MCPTT service via a single
PLMN.
{width="4.004166666666666in" height="3.8444444444444446in"}
Figure 6.3.1.1-1: On-network architectural model
Editor's note: The model makes no assumptions about business relationships
between MCPTT application operator and EPS operator
The entities within the model are described in the following clauses and a
full functional model is given in subclause 6.3.1.7.
#### 6.3.1.2 Application services layer
The application services layer includes MCPTT application and any required
supporting functions grouped into common services function.
##### 6.3.1.2.1 Common services core
Common services core is composed of the following functional entities:
\- for common services, a configuration management server as described in
subclause 6.5.2.1.2 and a group management server as described in subclause
6.5.2.1.4; and
\- for signalling control, a hypertext proxy as described in subclause 6.5.3.6
and a hypertext server as described in subclause 6.5.3.7.
##### 6.3.1.2.2 MCPTT application service
MCPTT application service is composed of the following functional entities:
\- an MCPTT server as described in subclause 6.5.2.2.2; and
\- for media, a floor control server as described in subclause 6.5.4.2, a
media resource function controller as described in subclause 6.5.4.3 and a
media resource function gateway as described in subclause 6.5.4.4.
Editor's note: structuring of floor control server is FFS.
#### 6.3.1.3 SIP core
The SIP core provides rendezvous (contact address binding and URI resolution)
and service control (application service selection) functions. It is composed
of the following functional entities:
\- for signalling control, a local inbound / outbound proxy as described in
subclause 6.5.3.2, a registrar finder as described in subclause 6.5.3.3, a
registrar / application service selection entity as described in subclause
6.5.3.4.
#### 6.3.1.4 EPS
The EPS provides point-to-point and point-to-multipoint bearer services with
QoS.
#### 6.3.1.5 UE 1
UE 1 is:
\- a device supporting bearer services and application(s) related to MCPTT, OR
\- a device that acts as ProSe UE-to-Network Relay, OR
Editor's note: MCPTT functionality in relay is FFS - see R-6-19-002
\- both of the above
When acting as a device supporting bearer services and application(s) related
to MCPTT, UE1 is composed of the same functional entities as for UE2, as
described in subclause 6.3.1.6.
#### 6.3.1.6 UE 2
UE 2 is a device using ProSe UE-to-network relay, and supporting
application(s) related to MCPTT. It is composed of the following functional
entities:
\- for common services, a group management client as described in subclause
6.5.2.1.3 and a configuration management client as described in subclause
6.5.2.1.1;
\- for MCPTT application services, an MCPTT client as described in subclause
6.5.2.2.1;
\- for signalling control, a signalling user agent as described in subclause
6.5.3.1 and an HTTP client as described in subclause 6.5.3.5; and
\- for media, a floor participant as described in subclause 6.5.4.1.
#### 6.3.1.7 On-network functional model
Editor's note: This subclause is a placeholder for the full functional model
for on-network, both with and without UE-to-network relay.
### 6.3.2 Off-network architecture model
#### 6.3.2.1 Off-network architectural model diagram
Figure 6.3.2.1-1 below is the off-network architectural model for the MCPTT
system solution, where no relay function is used.
{width="6.695138888888889in" height="0.7791666666666667in"}
Figure 6.3.2.1-1: Off-network architectural model where no relay function is
used
Figure 6.3.2.1-2 below is the off-network architectural model for the MCPTT
system solution, where a ProSe UE-to-UE relay function is used.
{width="6.695138888888889in" height="0.7791666666666667in"}
Figure 6.3.2.1-2: Off-network architectural model where ProSe UE-to-UE relay
function is used
The entities within this model are described in the following clauses and a
full functional model is given in subclause 6.3.2.7.
#### 6.3.2.2 UE 3
UE3 is a device using ProSe and supporting application(s) related to Off-
Network MCPTT service. It is composed of the following functional entities):
\- for MCPTT application services, an MCPTT client as described in subclause
6.5.2.2.1;
\- for signalling control, a signalling user agent as described in subclause
6.5.3.1; and
\- for media, a floor participant as described in subclause 6.5.4.1 and, for
centralised floor control, a floor control server as described in subclause
6.5.4.2.
#### 6.3.2.3 UE 4
UE4 represents one or more devices with the same functionality as UE3.
#### 6.3.2.4 UE 5
UE 5 is a device using ProSe UE-to-UE relay and supporting application(s)
related to Off-Network MCPTT service. It is composed of the same functional
entities as for UE3, as described in subclause 6.3.2.2.
#### 6.3.2.5 UE 6
UE 6 represents a device acting as a ProSe UE-to-UE relay between UE 5 and UE
7.
UE 6 may support application(s) related to off-network MCPTT service.
When acting as a device supporting application(s) related to MCPTT, UE1 is
composed of the same functional entities as for UE3, as described in subclause
6.3.2.2.
Editor's note: It is for future study whether the ProSe relay provides any
service specific restrictions.
#### 6.3.2.6 UE 7
UE 7 represents one or more devices with the same functionality as UE 5.
#### 6.3.2.7 Off-network functional model
The off-network functional model for the MCPTT system solution, where no relay
function is used, is illustrated in figure 6.3.2.7-1.
Figure 6.3.2.7-1: Off-network functional model where no relay function is used
Editor's note: The existence of multiple floor control servers is FFS.
The off-network functional model for the MCPTT system solution, where a ProSe
UE-to-UE relay function is used, is illustrated in figure 6.3.2.7-2.
Figure 6.3.2.7-2: Off-network functional model where ProSe UE-to-UE relay
function is used
Editor's note: The existence of multiple floor control servers is FFS.
### 6.3.3 Architectural model for roaming scenarios
Editor's note: Diagrams showing interfaces and relationships for roaming
scenarios, and any relevant entity function, are for further study.
## 6.4 Identities
Editor\'s note: This subclause contains a brief description of any identities
used within the functional model.
### 6.4.1 Application plane
MCPTT User Identity: It uniquely identifies a MCPTT client and related user
profile at MCPTT AS layer. The MCPTT Application, resident on the MCPTT
client, establishing a connection, will employ application layer security in
its connection to the MCPTT service.
### 6.4.2 Signalling control plane
Private User Identity: It uniquely identifies a signalling user agent and
related profile at signalling control plane layer. When the signalling user
agent sends registration requests to the registrar / application service
selection, this identity is used to find corresponding credentials for
authentication of the signalling user agent by the registrar / application
service selection. This identity full fills the same functions as the private
user identity, defined in 3GPP TS 23.228 [13]
Editor's note: Definitions of public user identity and GRUU or equivalent will
be required to be defined.
### 6.4.3 Relationship between identities in different planes
Many MCPTT User Identities can map to a single Private User Identity. Where
the precise mapping is not known, a default MCPTT user identity is defined to
meet some specific MCPTT service requirement.
Many Private User Identities can map to a single MCPTT User Identity. A UE can
be shared between multiple users by assigning a unique MCPTT user identity to
the MCPTT client associated to each user, but the UE uses the same private
user identity.
### 6.4.4 MCPTT group identity
MCPTT group identity: Uniquely identifies an MCPTT group in an MCPTT system.
It is used by the MCPTT client to identify the MCPTT group within the MCPTT
system.
The MCPTT group identity is used as follows:
a) For identifying a set of identities of its group members; and
b) By the MCPTT client to address the MCPTT group The MCPTT group identity
indicates the MCPTT system where the MCPTT group is defined. The MCPTT group
identity indicates the MCPTT server within the MCPTT system where the group is
defined.
The MCPTT group identity shall be a URI. When used within SIP it can be a SIP
URI.
## 6.5 List of functional entities
Editor\'s note: In subclause 5.3.1, a relay functional entity of some form is
required. At which plane in the description below is it provided? It would
appear to be at the bearer plane, in which case no functionality in the MCPTT
functional model is required, merely a description of its use.
Editor's note: A functional entity representing a specific instantiation of
the GCS AS described in 3GPP TS 23.468 [3] to control multicast and unicast
operations for group communications needs to be defined. The plane where that
functional entity resides is FFS.
### 6.5.1 Introduction
Each subclause is a description of a functional entity and does not imply a
physical entity.
### 6.5.2 Application plane
#### 6.5.2.1 Common services core
##### 6.5.2.1.1 Configuration management client
Editor\'s note: FFS.
##### 6.5.2.1.2 Configuration management server
Editor\'s note: FFS.
##### 6.5.2.1.3 Group management client
##### 6.5.2.1.4 Group management server
The group management server functional entity provides for management of
groups supported within the MCPTT service provider.
All the group management clients supporting users belonging to a single group
are required to use the same group management server for that group. A group
management client supporting a user involved in multiple groups can have
relationships with multiple group management servers.
##### 6.5.2.1.5 Identity management server
The identity management server is a functional entity that is capable of
authenticating the MCPTT user.
The identity management server functional entity may reside in the same domain
as the user's MCPTT server.
##### 6.5.2.1.6 Identity management client
This functional entity acts as the application user agent for MCPTT user
identity transactions.
Editor\'s note: It is FFS whether this functional entity may be combined with
some other user agents such as group management client and configuration
management client.
#### 6.5.2.2 MCPTT application service
##### 6.5.2.2.1 MCPTT client
This functional entity acts as the user agent for all MCPTT application
transactions. It also supports location reporting, presence, and status
reporting.
Editor\'s note: In the allocation of functional entities, this functional
entity is allocated to the user\'s device. The Signalling user agent
functional entity and floor participant functional entity are collocated with
this functional entity, which is for further study.
##### 6.5.2.2.2 MCPTT server
The MCPTT server functional entity provides centralised support for MCPTT
services.
All the MCPTT clients supporting users belonging to a single group are
required to use the same MCPTT server for that group. An MCPTT client
supporting a user involved in multiple groups can have relationships with
multiple MCPTT servers.
NOTE: Possible requirements for handling multiple distinct media on different
MCPTT servers is not covered in this version of the document.
### 6.5.3 Signalling control plane
Editor\'s note: It is for further study whether we need functionality
equivalent to the IM CN subsystem MGCF in order to provide interworking with
non-LTE PTT systems.
Editor\'s note: It is for further study whether we need functionality
equivalent to the IM CN subsystem MRB in order to provide support for
allocation of MRF resources within or between MCPTT systems.
Editor\'s note: It is for further study whether we need functionality
equivalent to the IM CN subsystem SLF in order to provide support for
allocation of database resources within networks.
Editor\'s note: It is for further study whether we need functionality
equivalent to the IM CN subsystem IBCF (session border controllers) or other
routers at the signalling control level.
Editor\'s note: Functional entities for a potential multicast signalling
protocol are for further study.
#### 6.5.3.1 Signalling user agent
This functional entity acts as the SIP user agent (both client and server) for
all SIP transactions.
Editor\'s note: In the allocation of functional entities, this functional
entity is allocated to the user\'s device.
Editor\'s note: In the IM CN subsystem, this is equivalent to the UE at the Gm
reference point.
#### 6.5.3.2 Local inbound / outbound proxy
The local inbound / outbound proxy functional entity acts as both an inbound
proxy and an outbound proxy for all SIP transactions. This functional entity
can provide the following functions:
\- NAT traversal
\- Resource control
\- Route/Forward requests and responses to the user agents
\- SIP signalling security
\- Depending on the operator policy, it provides discovery and address
resolution, including E.164 numbers.
Editor\'s note: Mechanisms for resource control in MCPTT systems require
further study.
Editor\'s note: In the IM CN subsystem, this is equivalent to the P-CSCF.
#### 6.5.3.3 Registrar finder
The registrar finder functional entity is responsible for:
\- Identifying the serving registrar / application service selection
functional entity. The serving registrar / application service selection
functional entity is identified using information provided either by the
public network\'s own subscriber database or the MCPTT service provider\'s
MCPTT user database and potentially using operator internal information, like
network topology or Registrar availability.
\- Registrar Finder only in public network operator domain and SIP Core in
MCPTT service provider domain: Registrar Finder uses information from public
network operator subscriber database to route to the SIP core in MCPTT service
provider domain. Further the Registrar Finder in the MCPTT service provider
domain uses the information from the MCPTT user database to identify the
serving Registrar in MCPTT service provider domain.
\- Registrar Finder and Registrar in public network operator domain: Registrar
Finder uses information from public network operator subscriber database to
identify the serving Registrar in public network operator domain.
\- Registrar Finder in public network operator domain and Registrar in MCPTT
service provider domain: Registrar Finder uses information from public network
operator subscriber database to identify the serving Registrar in the MCPTT
service provider domain.
NOTE: The need for the Registrar Finder is deployment specific. E.g. a
deployment that has only one Registrar doesn't need the Registrar Finder and
the related SIP Core database information.
Editor's note: The deployment models need further consideration.
\- It provides discovery and address resolution, including E.164 numbers.
Editor\'s note: Depending on deployment model, this functional entity is
allocated either to the home public network or to the home MCPTT network.
Editor\'s note: In the IM CN subsystem, this is equivalent to the I-CSCF.
Editor\'s note: For interoperability the reference point between the registrar
finder functional entity and the registrar / application service selection
functional entity will have conform to the requirements of the Mw reference
point.
#### 6.5.3.4 Registrar / application service selection
The registrar / application service selection functional entity provides the
following functions:
\- Registrar function (with integral provision of a location server) and also
acts as an inbound proxy (with access to the integral location server), and
outbound proxy for all SIP transactions where application service selection is
required.It registers the user and maintains the association of the location
and identity of the user in a location service. It provides notifications of
the registration states.
\- It supports authentication for identities provided within SIP signalling.
Both the registrar (with integral location server) and authentication
functions are supported by access either to the public network\'s own
subscriber database or the MCPTT service provider\'s MCPTT user database.
\- It can provide the application service selection for all SIP transactions,
possibly based on application service selection information stored by either
the public network\'s own subscriber database or the MCPTT service provider\'s
MCPTT user database.
\- It performs SIP signalling security.
Editor\'s note: Depending on the deployment model, this functional entity is
allocated to the home public network or to the home MCPTT network.
Editor\'s note: In the IM CN subsystem, this is equivalent to the S-CSCF.
Editor\'s note: For interoperability the reference point between the registrar
/ application service selection functional entity and the application
functional entity will have conform to the requirements of the ISC reference
point.
Editor's note: The interworking functions with other systems like PSTN, etc
are FFS.
#### 6.5.3.5 Hypertext client
This functional entity acts as the HTTP client for all hypertext transactions.
Editor\'s note: In the allocation of functional entities, this functional
entity is allocated to the user\'s device.
Editor\'s note: In the IM CN subsystem, this is equivalent to the UE at the Ut
reference point.
#### 6.5.3.6 Hypertext proxy
This functional entity acts as the HTTP proxy for all hypertext transactions.
Editor\'s note: In the IM CN subsystem, there is no equivalent functional
entity.
#### 6.5.3.7 Hypertext server
This functional entity acts as the HTTP server for all hypertext transactions.
Editor\'s note: In the IM CN subsystem, this is equivalent to the AS at the Ut
reference point.
Editor\'s note: In the allocation of functional entities, this functional
entity is allocated to the MCPTT service provider.
### 6.5.4 Media plane
#### 6.5.4.1 Floor participant
The floor participant functional entity is responsible for floor requests,
and, in off-network operation, for the full functionality of decentralised
floor control.
Editor\'s note: In the allocation of functional entities, this functional
entity is allocated to the user\'s device.
#### 6.5.4.2 Floor control server
This functional entity provides support for centralised floor control, for
both on-network and off-network operation.
Editor\'s note: In the allocation of functional entities, this functional
entity is collocated with the MCPTT application in on-network operation and is
allocated to the user's device in off-network operation.
#### 6.5.4.3 Media resource function controller
#### 6.5.4.4 Media resource function gateway
### 6.5.5 Bearer plane
### 6.5.6 Non-plane specific entities
#### 6.5.6.1 Public network operator subscriber database
The subscriber database functional entity acts as the repository for certain
subscriber data. For each plane, following data requirements are identified:
\- Signalling Plane: If the public network operator provides the Registrar
functions of the SIP Core, it provides the repository for the data related to
the functions of the SIP Core, e.g. for data for application service
selection, the identity of the serving Registrar or authentication related
information. The access to the data is restricted to the SIP Core entities
that are specifically serving the subscriber/user whose data are stored. i.e.
Registrars and Registrar Finders can access only SIP Core databases when they
belong to the same public network operator.
Editor\'s note: In the IM CN subsystem, this is equivalent to a subset of the
HSS functionality.
#### 6.5.6.2 MCPTT user database
This functional entity provides a database containing details of all user
configuration information with the MCPTT service provider. User configuration
information is determined by the MCPTT service provider. For each plane,
following data requirements are identified:
\- Application Plane:
\- Signalling Plane: If the public network operator provides the Registrar
functions of the SIP Core, it provides the repository for the data related to
the functions of the SIP Core, e.g. for data for application service
selection, the identity of the serving Registrar or authentication related
information. The access to the data is restricted to the SIP Core entities
that are specifically serving the subscriber/user whose data are stored. i.e.
Registrars and Registrar Finders can access only SIP Core databases when they
belong to the same public network operator.
Editor\'s note: When provided by the MCPTT service provider, it is for further
study whether this may be independent from the functional entity containing
details of the MCPTT user database within the MCPTT service provider.
Editor\'s note: In the IM CN subsystem, this is equivalent to a subset of the
HSS functionality.
Editor\'s note: Suitable material for this subclause may be in subclause
5.2.1.1.5.1 and within subclause 5.2.3.1.
Editor\'s note: This functional entity may be split after further study.
## 6.6 Reference points
Editor\'s note: This subclause contains a list of the reference points,
indicating the functional entities that the reference point supports
communication between, and a brief description of the purpose of the reference
point. As well as appearing in the functional specification, this subclause
will also form input to the relevant subclause in 3GPP TS 23.002 [12].
### 6.6.1 General reference point principle
Any reference point that is exposed for MCPTT interoperability with other IMS
core networks or other IMS entities in other systems is compatible with the
protocols defined for that reference point in the 3GPP architecture.
### 6.6.2 Application plane
#### 6.6.2.1 Reference point MCPTT-1 (between the MCPTT client and the MCPTT
server)
The MCPTT-1 reference point between the MCPTT client and the MCPTT server for
MCPTT application signalling for establishing a session in support of MCPTT
shall use the SIP-1 and SIP-2 reference points for transport and routing of
signalling.
#### 6.6.2.2 Reference point MCPTT-2 (between MCPTT server and MCPTT user
database)
Provides for the MCPTT server to obtain information about a specific user.
#### 6.6.2.3 Reference point CSC-1 (between identity management client and
identity management server)
Provides for the mutual authentication between the user equipment and the
common servers plane on behalf of applications within the application plane.
#### 6.6.2.4 Reference point CSC-2 (between the group management client and
the group management server)
The CSC-2 reference point between the group management client and the group
management server for MCPTT application signalling for MCPTT data management
of the MCPTT service shall use the HTTP-1 reference point for transport and
routing of signalling.
#### 6.6.2.5 Reference point CSC-3 (between MCPTT server and group management
server)
Provides for the MCPTT server to obtain information about groups.
### 6.6.3 Signalling control plane
#### 6.6.3.1 General
The reference points for the SIP signalling are shown in figure 6.6.3.1-1:
Figure 6.6.3.1-1: Reference points for the signalling plane between MCPTT
client and MCPTT server
#### 6.6.3.2 Reference point SIP-1(between MCPTT UE SIP User Agent Client and
the SIP core)
The SIP-1 reference point between the MCPTT UE SIP User Agent Client and the
SIP core for establishing a session in support of MCPTT shall use the 3GPP Gm
reference point (with necessary enhancements to support MCPTT requirements and
profiled to meet the minimum requirements for support of MCPTT). The SIP-1
reference point is used for:
\- SIP registration;
\- authentication and security to the service layer;
\- event subscription and notification;
\- overload control; and
\- session management and media negotiation.
Editor's note: Whether session management and media negotiation is defined as
part of SIP-1 and/or MCPTT-1 is FFS.
#### 6.6.3.3 Reference point SIP-2 (between the SIP core and the MCPTT server)
The SIP-2 reference point between the SIP core and the MCPTT server for
establishing a session in support of MCPTT shall use the 3GPP ISC interface.
The SIP-2 reference point is used for:
\- notification to the MCPTT server of SIP registration by the MCPTT UE;
\- authentication and security to the service layer;
\- event subscription and notification; and
\- session management and media negotiation.
#### 6.6.3.4 Reference point SIP-3 (between the SIP core and SIP core)
The SIP-3 reference point between the SIP core and the SIP core for
establishing a session in support of MCPTT shall use the 3GPP Mw and ICi
reference points. The SIP-3 reference point is used for:
\- event subscription and notification; and
\- session management and media negotiation.
#### 6.6.3.5 Reference point HTTP-1 (between the MCPTT UE HTTP client and the
MCPTT server)
The HTTP-1 reference point between the MCPTT UE HTTP client and the MCPTT
server for MCPTT data management of the MCPTT service shall use the 3GPP Ut
reference point (with necessary enhancements to support MCPTT requirements).
The HTTP-1 reference point is:
\- based on HTTP/HTTPS; and
\- provides group management functionality i.e. supports the transport of user
profile/configuration information between UE and network.
### 6.6.4 Media plane
Editor\'s Note: The contents of this section are FFS.
### 6.6.5 Bearer plane
Editor\'s Note: The contents of this section are FFS.
# 7 Information Flow Diagrams
Editor's note: This clause is intended to consist of information flow diagrams
and descriptions of the individual information flows.
Editor's note: This clause and subsequent clauses are intended to be a working
area for text that will be included in the MCPTT TS'(s). The structure of this
and subsequent clauses may not be replicated in the MCPTT TS'(s).
## 7.1 Registration and user authentication for MCPTT service
**Identity Management Server** is the function in the common services core
that is responsible for authentication of the MCPTT User. It contains the
knowledge and means to do authentication by verifying the primary credentials
supplied by the user.
**Identity Management Client** is the client in the MCPTT UE that interacts
with the Identity Management function.
NOTE: Flow 7.1-1 is a high level user authentication flow. SA3 is responsible
for defining the specific security and authentication mechanisms required by
the MCPTT service in order to realize the MCPTT user authentication
requirements as defined in 3GPP TS 22.179 [2].
The user authentication process shown in flow 7.1-1 may take place in some
scenarios as a separate step independently from a SIP registration phase, for
example if the SIP server is outside the domain of the MCPTT AS.
A possible flow for this is illustrated in figure 7.1-1 below. Other
alternatives are possible, such as authenticating the user within the SIP
registration phase.
Figure 7.1-1: MCPTT user authentication and registration, single domain
1\. In this optional step the MCPTT client begins the user authorization
procedure. The MCPTT user supplies the user credentials (eg. Biometrics,
secureID, username/password, etc.) for verification with the Identity
Management function.
2\. The MCPTT UE establishes a Secure connection to the SIP core for the
purpose of SIP level authentication and registration.
3\. The MCPTT UE and MCPTT client complete the SIP level registration with the
SIP core (and optionally with the MCPTT Server) to complete the MCPTT service
registration. Step 3 may utilize the results of step one depending on the
authentication mechanism for the MCPTT User.
## 7.2 Affiliation to an MCPTT group
### 7.2.1 Functional description
When an MCPTT client wants to affiliate to an MCPTT group, it shall be subject
to authorization.
### 7.2.2 Procedure
Procedure for affiliation to MCPTT group is described in figure 7.2.2-1.
Pre-conditions:
\- MCPTT client has already been provisioned (statically or dynamically) with
the group information, or a pointer to the group information, that the MCPTT
client is allowed to be affiliated;
\- MCPTT server may have retrieved the user/group policy e.g. which user(s)
are authorized to affiliate to what group(s), priority, and other meta-data;
\- MCPTT client may have indicated to the group management server that it
wishes to receive updates of group metadata for groups for which it is
authorized (as described in subclause 7.3 Subscription to group metadata); and
\- The MCPTT user triggers the affiliation procedure. This is an explicit
affiliation caused by the MCPTT user.
Figure 7.2.2-1: MCPTT group affiliation procedure
1\. MCPTT client requests the MCPTT server to affiliate to a group or set of
groups.
2a. MCPTT server checks if the group policy is locally cached. If the group
policy is not locally cached on the MCPTT server then MCPTT server requests
the group policy from the group management server.
2b. MCPTT server receives the group policy from the group management server.
3\. Based on the group policy, the MCPTT server checks if the MCPTT client is
authorised to affiliate to the requested group(s).
4\. If the user of the MCPTT client is authorised to affiliate to the
requested group(s) then the MCPTT server stores the affiliation status of the
user for the requested group(s).
5\. MCPTT server confirms to the MCPTT client the affiliation (5a) and updates
the group management server with the affiliation status of the user for the
requested group(s) (5b).
NOTE: Steps 5a and 5b can occur in any order or in parallel.
## 7.3 Subscription to MCPTT group metadata
### 7.3.1 Functional description
The subscription to group metadata procedure is used by the MCPTT UE (i.e.
Group management client) to indicate to the Group Management Server that it
wishes to receive updates of group metadata for groups for which it is
authorized.
### 7.3.2 Procedure
Procedure for subscription to MCPTT group metadata is described in figure
7.3.2-1.
Figure 7.3.2-1: Subscription to MCPTT group metadata procedure
1\. MCPTT UE (i.e. group management client) subscribes to the change of group
metadata it has been provisioned and for which it is authorized.
2\. Group management server acknowledges the subscription.
3\. Initial content (or subsequent updates) of group metadata is notified to
the MCPTT UE.
4\. Notification is acknowledged.
## 7.4 Group management
### 7.4.1 Temporary group formation - group regrouping involving multiple
MCPTT systems
The information flow in figure 7.4.1-1 below illustrates the group regroup
operations to create a temporary group.
Pre-conditions:
1\. The security aspects of sharing the user information between primary and
partner MCPTT systems shall be governed as per the service provider agreement
between them. In this case, we consider the partner MCPTT system does not
share their users' information to the primary MCPTT system.
2\. The primary MCPTT system consists of the group management server -- GMS1
and MCPTT server (primary). The partner MCPTT system consists of the group
management server -- GMS2 and MCPTT server (partner).
3\. The group management client of the dispatcher/authorized user/UE belongs
to the primary MCPTT system.
Figure 7.4.1-1: Temporary group formation - group regrouping involving
multiple MCPTT systems
1\. The group management client of the dispatcher/authorized MCPTT user/UE
requests group regroup operation to the group management server \- GMS 1
(which is the group management server of the dispatcher/authorized MCPTT
user/UE). The identities of the groups being combined should be included in
this message.
2\. Optionally, the GMS1 may request permission from the owner or
administrator or group members of its constituent MCPTT groups.
3\. GMS1 forwards the group regroup request to the target GMS2 with the
information of GMS2 MCPTT groups.
4\. Optionally, the GMS2 may request permission from the owner or
administrator or group members of its constituent MCPTT groups.
5\. GMS2 provides a group regroup response. Due to security aspects concerning
sharing information among different MCPTT systems, GMS2 does not share the
users' information of the groups under its management to GMS1.
6\. The GMS1 creates and stores the information of the temporary group,
including the temporary group identity, off-network information, and the
identities of the groups being combined, priority of the temporary group,
security level of the temporary group and so on.
7\. The GMS1 notifies the primary MCPTT application server regarding the
temporary group creation with the information of the constituent groups.
8\. The affiliated MCPTT group members of the constituent MCPTT groups of GMS1
are notified.
9\. GMS1 notifies GMS2 about its group regroup operation. GMS2 also stores the
information about the Temporary group including the temporary group identity,
off-network information, and the identities of the groups being combined,
priority of the temporary group, security level of the temporary group and so
on.
10\. The GMS2 notifies the partner MCPTT server regarding the temporary group
creation with the information of the constituent groups.
11\. The affiliated MCPTT group members of the constituent MCPTT groups of
GMS2 are notified.
12\. The GMS1 provides an ACK response to the group management client of the
dispatcher/authorized MCPTT user/UE, indicating the group regroup operation
has completed.
NOTE 1: The group management server does not communicate directly, and can
route through some other network entities such as interworking gateways or SIP
cores, which have not been specified for clarity.
NOTE 2: Step 2 and Step 4 can be performed before the group regroup operations
according to the operator's policy.
### 7.4.2 Temporary group -- broadcast group call
Figure 7.4.2-1 illustrates the information flow for temporary group-broadcast
group call procedure. The protocol used may be SIP.
Pre-conditions:
1\. The security aspects of sharing the user information between primary and
partner MCPTT systems shall be governed as per the service provider agreement
between them. In this case, we consider the partner MCPTT system does not
share their users' information to the primary MCPTT system.
2\. The authorized MCPTT user/dispatcher belongs to the primary MCPTT server.
3\. The primary MCPTT server is the main/master group call controller for the
temporary group -- broadcast group call.
4\. The multiple groups for the temporary group -- broadcast group may belong
to Partner MCPTT servers.
Figure 7.4.2-1: Temporary group -- broadcast group call
1\. The dispatcher/authorized MCPTT user/client initiates a group call with
multiple groups from primary and partner MCPTT servers. A call setup message
with the identities of the groups (group id1\|\|group id2) is routed to the
primary MCPTT server, which is the main/master controller for the group call.
2\. The primary MCPTT server forms the temporary group with the groups'
information received. It resolves the group ids and identifies the appropriate
MCPTT server responsible for the groups. It further triggers a temporary group
-- broadcast group call via a call invite message to the affiliated group
members of group id1 of the primary MCPTT server.
NOTE 1: The temporary group information is not notified to the group members
of the constituent groups.
3\. A call setup message is further initiated with the partner MCPTT server
for group id2.
4\. Upon receiving the call setup message from the primary MCPTT server, the
partner MCPTT server initiates a call invitation to their affiliated group
members. The group members upon receipt of the invitation may accept or reject
the call. Alternatively, the partner MCPTT server notifies the group members
via a notification message containing the group call session identity
information. Upon receipt of the notification message, the group members may
perform a late call entry.
5\. The partner MCPTT server provides a call setup response to the primary
MCPTT server with success or failure result and/or detailed reason information
in case of failure.
6\. The primary MCPTT server provides a call setup complete response via a
call setup complete message to the MCPTT client of authorized MCPTT
user/dispatcher upon receiving response to the corresponding call setup with
the partner MCPTT server. The call setup complete response will consist of the
success or failure result and/or detailed reason information in case of
failure.
NOTE 2: The call setup complete message is triggered depending on the
conditions to proceed with the call.
7\. Upon successful call setup completion, a group call is established amongst
the multiple group members from primary and partner MCPTT servers.
8\. At the completion of the call, the temporary group -- broadcast group
terminates.
Editor's note: The feature interaction for the group call with another active
group call is FFS.
## 7.5 Group call
### 7.5.1 Pre-arranged group call
#### 7.5.1.1 Group call setup -- automatic commencement mode
The procedure focuses on the case where an authorized MCPTT user is initiating
an MCPTT group call with unicast signalling for communicating with the
affiliated MCPTT members of that group.
Procedures in figure 7.5.1.1-1 are the signalling control plane procedures for
the MCPTT client initiating establishment of MCPTT group call with a pre-
arranged group i.e., MCPTT users on client 1, client 2 and client 3 belong to
the same group which is defined on MCPTT group management server.
Pre-conditions:
1\. MCPTT group is previously defined on the group management server with
MCPTT users affiliated to that group. All members of the group belong to the
same MCPTT system.
2\. MCPTT group members are to be notified about the group call setup.
Figure 7.5.1.1-1: Pre-arranged group call setup
1\. It is assumed that MCPTT users on MCPTT client 1, client 2 and client 3
are already registered for receiving MCPTT service and affiliated.
2\. User at MCPTT client 1 would like to initiate an MCPTT group call with a
selected group (identified by group id).
NOTE 1: MCPTT client 1 may not be aware of the affiliation status of other
MCPTT clients to the group while initiating the group call.
3\. MCPTT client 1 sends an group_call_request towards the MCPTT server via
SIP core, which hosts the group selected by the user and identified by group
id.
4\. MCPTT server checks whether the user of MCPTT client 1 is authorized for
initiation of group call for the selected group, and if authorized, it
resolves the group id to determine the members of that group and their
affiliation status, based on the information from group management server.
5\. MCPTT server sends the corresponding group_call_request via SIP core
towards the MCPTT clients of each of those affiliated group members. MCPTT
users are notified about the incoming group call.
6\. The receiving MCPTT clients accept the group call group_call_request, and
an acknowledgement is sent to the group hosting MCPTT server.
7\. MCPTT client 1 is informed about successful call establishment.
NOTE 2: Step 7 may occur at any time following step 5b, and prior to step 8
depending on the conditions to proceed with the call.
8\. MCPTT client 1, client 2 and client 3 have successfully established media
plane for communication. MCPTT floor participant 1, floor participant 2 and
floor participant 3 exchange floor control information e.g., MCPTT client 1
receives the floor granted information over the established media plane, while
the other MCPTT client's receive floor taken information. MCPTT client 1
indicates to the MCPTT user that the floor is available to send media, while
the other MCPTT clients in the group call will be receiving that media.
#### 7.5.1.2 End group call
The procedures focuses on the case where an MCPTT server is initiates to the
termination of an ongoing MCPTT group call for all the participants of that
group call, since at least one of the termination conditions are met e.g., due
to hang time expiry, last participant leaving, second last participant
leaving, initiator leaving, minimum number of affiliated MCPTT group members
are not present.
NOTE: The procedure for MCPTT user leaving the group call is a different
scenario and not considered in this solution.
Procedures in figure 7.5.1.2-1 are the signalling control plane procedures for
the MCPTT server initiating termination of an ongoing MCPTT group call.
Figure 7.5.1.2-1: End group call
1\. It is assumed that MCPTT users on MCPTT client 1, client 2 and client 3
are already part of the ongoing group call (e.g., as a result of pre-arranged
group call setup).
2\. MCPTT server would like to terminate the MCPTT group call which is ongoing
e.g., due to hang time expiry, due to hang time expiry, last participant
leaving, second last participant leaving, initiator leaving, minimum number of
affiliated MCPTT group members are not present.
3\. MCPTT server identifies the participants of the ongoing group call and
generates group_call_end to terminate ongoing session.
4\. MCPTT server sends a group_call_end via SIP core towards each participant
of the ongoing group call.
5\. MCPTT users are notified about the termination of the group call.
6\. MCPTT client(s) receiving group_call_end, acknowledge towards MCPTT
server.
7\. MCPTT client 1, client 2 and client 3 have successfully released the floor
control and media plane resources associated with the group call that is
terminated.
### 7.5.2 Group call involving groups from multiple MCPTT systems
The information flow in figure 7.5.2-1 illustrates the group call involving
groups from multiple MCPTT systems. It considers the scenario for group
hierarchies and temporary groups formed by group regroup. The protocol
followed may be SIP.
> Pre-conditions:
1\. The security aspects of sharing the user information between primary and
partner MCPTT systems shall be governed as per the service provider agreement
between them. In this case, we consider the partner MCPTT system does not
share their users' information to the primary MCPTT system.
2\. The MCPTT user belongs to a MCPTT group hosted by the primary MCPTT
server.
3\. A temporary group is formed by authorized MCPTT user/dispatcher by the
group regroup procedure (subclause 7.4.1) and identified via a temporary group
ID (TGI).
4\. The MCPTT group members of the constituent MCPTT groups belonging to the
temporary group are affiliated to participate in a group call for the
temporary group.
5\. The primary MCPTT server is the main/master group call controller for the
group call for the temporary group.
6\. The constituent groups of the temporary group may belong to partner MCPTT
servers.
Figure 7.5.2-1: Group call involving groups from multiple MCPTT systems
1\. The affiliated MCPTT user via MCPTT client initiates a group call with a
group id. A call setup message with the group id is routed to the Primary
MCPTT server, which owns the group and is the main/master controller for the
group call. If the group call is for a temporary group formed by the group
regroup procedure, the group id will be a temporary group identity (TGI).
2\. The primary MCPTT server gets the group information (either from group
management server or itself) including the constituent MCPTT groups'
identities, accessible group members list of the constituent groups, and other
related data.
3\. The primary MCPTT server initiates directly a call invitation to the
accessible group members using the detailed user information and/or location
information. The group members upon receipt of the invitation may accept or
reject the call. Alternatively, the primary MCPTT server notifies the group
members via a notification message containing the group id and/or the group
call session identity information. Upon receipt of the notification message,
the group members may perform a late call entry.
4\. The primary MCPTT server may not have access to group members' information
of the constituent group belonging to the partner MCPTT system. For such group
members, the primary MCPTT server initiates a group call invitation via a call
setup message to the partner MCPTT server with the target group's group id
information.
5\. The partner MCPTT server further initiates a call invitation or call
notification to the constituent group's members as described in step 3.
6\. The partner MCPTT server provides a call setup response to the primary
MCPTT server with success or failure result and/or detailed reason information
in case of failure.
7\. The primary MCPTT server provides a call setup complete response via a
call setup complete message to the MCPTT UE of authorized MCPTT
user/dispatcher upon receiving responses to the call invitations sent to
members of primary and partner MCPTT servers. The call setup complete response
will consist of the success or failure result and/or detailed reason
information in case of failure.
NOTE: The call setup complete message is triggered depending on the conditions
to proceed with the call.
8\. Upon successful call setup completion a group call is established for the
group members from constituent groups of multiple MCPTT servers.
Editor's note: The feature interaction for the group call with another active
group call is FFS.
## 7.6 Floor control for on-network MCPTT service
### 7.6.1 Introduction
The solution is for providing a floor control to MCPTT UE in an on-network
case. Floor control is performed by using floor control messages between the
MCPTT floor participant and the MCPTT floor control server. The following
information flows shall be supported between the MCPTT floor control server
and the MCPTT floor participant:
\- Floor request (from UE to server): used to request a floor for media
transfer.
\- Floor granted (from server to UE): used to indicate that a request for
floor is granted and media transfer is possible.
\- Floor rejected (from server to UE): used to indicate that a request for the
floor is rejected.
\- Floor idle (from server to UE): used to indicate that a session is in idle
status.
\- Floor release (from UE to server): used to indicate the media transfer is
completed and floor is released.
\- Floor taken (from server to UE): used to indicate the floor is given to
another MCPTT user.
\- Floor revoke (from server to UE): used to indicate the floor granted to
MCPTT floor participant is not available anymore.
\- Queue position (from server to UE): used to indicate the floor request is
queued and the queue position to the floor requesting UE.
When the MCPTT floor control server receives a floor request from the MCPTT
floor participant, it decides whether to give a grant or not based on the
session status (i.e., whether the grant is given to another user or not), user
profile, priority, and so on. The result is informed to the requesting MCPTT
floor participant. When the MCPTT floor participant receives a floor granted
message, it can send voice media over the uplink bearer established
beforehand. The floor revoke message can be used to implement an override of
grant among multiple floor requests according to the priority. The floor queue
status request can be used to know current position in the queue for floor.
### 7.6.2 Floor request, floor grant and floor taken during an MCPTT session
Figure 7.6.2-1 shows the high level procedure that the floor control is
conducted for the MCPTT session already established between MCPTT floor
participant and floor control server. Only two UEs involved in the session are
shown for the simplicity.
Figure 7.6.2-1: Floor request, floor grant, floor taken during an MCPTT
session
1\. MCPTT session is established between MCPTT clients (client A and client B)
and MCPTT server. And floor control is established between MCPTT floor
participants and floor control server It is assumed that the floor is now in
idle status.
2\. Floor participant A wants to send voice media over the session.
3\. Floor participant A sends a floor request message to floor control server.
4\. Floor control server determines to accept the floor request from floor
participant A. It responds with a floor grant message to floor participant A
while sending a floor taken message to the other floor participant (floor
participant B).
5\. The floor granted may be notified to the user of UE A. Similarly, the
floor taken may be informed to the user of UE B.
6\. Floor participant A starts sending voice media over the session
established beforehand.
7\. Suppose there are one or more users requesting to talk at this time, the
floor request(s) are queued as decided by floor control server e.g., based on
priority. In this flow, floor participant B sends a floor request message.
8\. Floor control server queues the request of floor participant B
9\. Floor control server sends queue position info to floor participant B.
### 7.6.3 Floor revoke, floor rejected during an MCPTT session
Figure 7.6.3-1 shows the high level procedure that the floor control is
conducted for the MCPTT session already established between MCPTT floor
participant (with floor granted to floor participant B) and floor control
server (with an override based on priority). Only two UEs involved in the
session are shown for the simplicity.
Figure 7.6.3-1: Floor revoke, floor rejected during an MCPTT session
1\. It is assumed that floor participant B has been given floor and is
transmitting voice media.
2\. Floor participant A having a priority which is relatively higher than that
of floor participant B wants to send voice media over the session.
3\. Floor participant A sends a floor request message to MCPTT floor control
server.
4\. MCPTT floor control server determines to accept the floor request from
floor participant A according to the priority. It responds with a floor grant
message to floor participant A while sending a floor revoke message to the
other floor participant (floor participant B) stopping the voice media
transmission from floor participant B.
5\. The floor granted may be notified to the user of client A. Similarly, the
status that the floor is taken by client A due to the priority may be informed
to the user of client B.
6\. Floor participant A starts to sending voice media over the session
established beforehand.
7\. Now floor participant B may want the floor to start sending voice media.
8\. Floor participant B sends a floor request message to floor control server.
9\. Floor control server determines whether to accept the floor request from
floor participant B according to the priority. It responds with a floor
rejected message to floor participant B, if floor participant B does not have
priority over floor participant A.
10\. The floor rejected may be notified to the user of floor participant B.
### 7.6.4 Queue position during an MCPTT session
Figure 7.6.4-1 shows the high level procedure that the floor control is
conducted for the MCPTT session already established between MCPTT client (with
Floor granted to floor participant B) and server (with a override based on
priority at floor control server). Only two UEs involved in the session are
shown for the simplicity.
Figure 7.6.4-1: Queue status during an MCPTT session
1\. It is assumed that floor participant B has been given a floor grant and is
transmitting voice media. There are several other floor participants
(including floor participating A) requesting floor which get queued at the
floor control server.
2\. Floor participant A would like to know its current position in the floor
request queue.
3\. Floor participant A sends a queue position request message to the floor
control server.
4\. Floor control server determines the current queue position of floor
participant A from the floor request queue.
5\. Floor control server responds with the current position in queue position
info message.
6\. User at floor participant A is notified the current queue position.
Editor\'s note: It is FFS to add information flows for other scenarios e.g.,
floor idle, disconnect, connect, cancel queue.
## 7.7 Private call
### 7.7.1 Call setup -- automatic commencement mode
The procedure focuses on the case where an MCPTT user is initiating an MCPTT
private call for communicating with another MCPTT user with or without floor
control enabled in an automatic commencement mode.
Procedures in figure 7.7.1-1 are the basic signalling control plane procedures
for the MCPTT client initiating establishment of MCPTT private call with the
selected MCPTT user.
{width="5.519444444444445in" height="4.402083333333334in"}
Figure 7.7.1-1: Private call setup -- automatic commencement mode
1\. It is assumed that MCPTT users on MCPTT client 1 and client 2 are already
registered for receiving MCPTT service.
2\. User at MCPTT client 1 would like to initiate a MCPTT private call for the
selected MCPTT user. In case of private call with floor control, floor control
is to be established.
3\. MCPTT client 1 sends an private_call_request towards the MCPTT Server (via
SIP core), for establishing private call with the client 2. In case of private
call with the implicit floor control, the private_call_request contains an
element that indicates that MCPTT client 1 is requesting the floor.
4\. MCPTT server checks whether the user at MCPTT client 1 is authorized to
initiate the private call to client-2, and that client-2 is authorized to
receive the private call from client-1.
5\. MCPTT server may provide a progress indication to client-1 to indicate
progress in the call setup process.
NOTE: Step 5 may occur at any time following step 4, and prior to step 9.
6\. If authorized, MCPTT server sends the corresponding private_call_request
towards the MCPTT client specified in the original private_call_request
(client 2).
7\. The receiving MCPTT client 2 notifies the user about the incoming private
call.
8\. The receiving MCPTT client 2 accepts the private call automatically, and
an acknowledgement is sent to the MCPTT server (via SIP core).
9\. Upon receiving the MCPTT client 2 accepting the private call request,
MCPTT client 1 is informed about successful call establishment.
10\. MCPTT client 1 and client 2 have successfully established media plane for
communication and either user can transmit media. In case of successful call
establishment for private call with implicit floor control request from MCPTT
client 1, floor participant at MCPTT client 1 is granted floor by the floor
control server, giving it permission to transmit. At the same time floor
participant at MCPTT client 2 is informed by the floor control server that
floor is taken.
### 7.7.2 Private call using manual commencement mode
#### 7.7.2.1 Description
The information flow in figure 7.7.2.2-1 is the basic flow for the MCPTT
client initiating an MCPTT private call that uses manual commencement mode.
This solution includes a configuration parameter of the MCPTT service to give
the originator the floor, when floor control is used. The flow uses an
implicit floor request in the MCPTT private call request indicating that the
originator will be given the floor when the call starts and eliminates the
need for a separate initial floor request message during media plane
establishment.
#### 7.7.2.2 Procedure
Both clients are served by the home MCPTT service provider in figure
7.7.2.2-1.
Figure 7.7.2.2-1: MCPTT private call using manual commencement mode
1\. MCPTT client 1 and MCPTT client 2 are both registered and their respective
users, MCPTT user 1 and MCPTT user 2, are authenticated and authorized to use
the MCPTT Service.
2\. User at MCPTT client 1 would like to initiate a MCPTT private call for the
selected MCPTT user. In case of private call with floor control, floor control
is to be established. In the case of private call without floor control, both
users will have the ability to transmit without floor arbitration.
3\. MCPTT client 1 sends an MCPTT private call request addressed to the MCPTT
ID of MCPTT user 2. The MCPTT private call request contains a data element
that indicates that MCPTT user 1 is requesting the floor, in the case of
private call with implicit floor control.
4\. The MCPTT server confirms that both MCPTT users are authorized for the
private call.
5\. The MCPTT server sends an MCPTT private call request for the call to MCPTT
client 2, including the MCPTT ID of the calling MCPTT user 1.
6a. The MCPTT user is alerted. MCPTT client 2 sends an MCPTT ringing to the
MCPTT server.
6b. The MCPTT server sends an MCPTT ringing to MCPTT client 1, indicating that
MCPTT client 2 is being alerted.
7\. MCPTT user 2 has accepted the call using manual commencement mode (i.e.,
has taken some action to accept via the user interface) which causes MCPTT
client 2 to send an OK to the MCPTT Server.
8\. The MCPTT server sends an OK to MCPTT client 1 indicating that MCPTT user
2 has accepted the call, including the accepted media parameters.
9\. The media plane for communication is established. Either user can transmit
media individually when using floor control. In the case of successful call
establishment for private call with implicit floor request from MCPTT client
1, the floor participant associated with MCPTT client 1 is granted the floor
initially. At the same time the floor participant associated with MCPTT client
2 is informed that the floor is taken. The meaning of the implicit floor
request (give floor initially to originator [client 1], or give floor
initially to target [client 2]) may be configurable. In the case of private
call without floor control both users are allowed to transmit simultaneously.
### 7.7.3 End private call
The procedure focuses on the case where an MCPTT client is requesting to
terminate an ongoing MCPTT private call (with or without floor control) and
the call established in either of the two commencement modes (manual or
automatic).
Procedures in figure 7.7.3-1 are the basic signalling control plane procedures
for the MCPTT client initiating termination of an ongoing MCPTT private call.
Figure 7.7.3-1: End private call
1\. It is assumed that MCPTT users on MCPTT client 1 and client 2 are already
registered for receiving MCPTT service and are involved in private call with
or without floor control established either in manual or automatic
commencement mode.
2\. User at MCPTT client 1 would like to terminate an ongoing MCPTT private
call with client 2.
3\. MCPTT client 1 sends a call_end request towards the MCPTT server (via SIP
core), for tearing down the private call with the other client.
4\. MCPTT server sends the corresponding call_end request towards the MCPTT
client specified in the original call_end request.
5\. MCPTT user is notified about the termination of the private call.
6\. The receiving MCPTT client 2 acknowledges the call_end request.
7\. MCPTT clients release all the media plane resources used for the private
call. Further, if the private call was established with floor control, floor
control resources are released and MCPTT clients cannot make further requests
for floor control or send media.
### 7.7.4 Call Setup -- automatic commencement mode -- users in multiple MCPTT
system
The procedure focuses on the case where an MCPTT user is initiating an MCPTT
private call (automatic commencement mode) for communicating with MCPTT user
in another MCPTT system with or without floor control enabled.
Editor\'s note: How two MCPTT servers interact with each other, with regards
to which takes on a controlling function is FFS.
Procedures in figure 7.7.4-1 are the procedures for the MCPTT client
initiating establishment of MCPTT private call with the selected MCPTT user.
Figure 7.7.4-1: Private call setup -- automatic commencement mode -- users in
multiple MCPTT system
1\. It is assumed that MCPTT users on MCPTT client 1 and client 2 are already
registered for receiving MCPTT service to their respective MCPTT service
provider.2. User at MCPTT client 1 would like to initiate a MCPTT private call
for the selected MCPTT user. In case of private call with floor control, floor
control is to be established.
3\. MCPTT client 1 sends an private_call_request towards the home MCPTT server
1 (via SIP core), for establishing private call with the MCPTT client 2
registered at MCPTT service provider 2. In case of private call with the
implicit floor control, the private_call_request contains an element that
indicates that MCPTT client 1 is requesting the floor.
4\. MCPTT server 1 checks whether the user at MCPTT client 1 is authorized to
initiate the private call to MCPTT client-2.
5\. MCPTT server 1 may provide a progress indication to MCPTT client-1 to
indicate progress in the call setup process.
NOTE: Step 5 may occur at any time following step 4, and prior to step 11.
6\. If authorized, MCPTT server 1 sends the corresponding private_call_request
towards the MCPTT system (via SIP core) of the MCPTT client specified in the
original private_call_request (MCPTT client 2) i.e., MCPTT server 2.
7\. MCPTT server 2 checks whether the MCPTT client 2 is authorized to receive
the private call from MCPTT client 1.
8\. MCPTT server 2 sends the received private_call_request towards the MCPTT
client specified in the received private_call_request (i.e., MCPTT client 2)
9\. The receiving MCPTT client 2 notifies the user about the incoming private
call.
10\. The receiving MCPTT client 2 accepts the private call automatically, and
an acknowledgement is sent to the MCPTT server 1 (via SIP core and MCPTT
server 2).
11\. Upon receiving the MCPTT client 2 accepting the private call request,
MCPTT client 1 is informed about successful call establishment.
12\. MCPTT client 1 and client 2 have successfully established media plane for
communication and either user can transmit media. In case of successful call
establishment for private call with implicit floor control request from MCPTT
client 1, floor participant at MCPTT client 1 is granted floor by the floor
control server at MCPTT service provider 1, giving it permission to transmit.
At the same time floor participant at MCPTT client 2 is informed by the floor
control server at MCPTT service provider 1 that the floor is taken.
### 7.7.5 Private call set up in off-network mode with solicited discovery
When an MCPTT user using ProSe-enabled UE wants to communicate with a specific
MCPTT user using ProSe-enabled UE by ProSe, the MCPTT user shall first know
the MCPTT UE IP address of the target MCPTT user. Then the MCPTT user can
initiate the private call set up procedure.
The information flow as illustrated in figure 7.7.5-1 is used to setup a
private call between two MCPTT users for in off-network mode with solicited
discovery.
Pre-conditions:
1\. MCPTT user profile used for off-network operation mode is pre-provisioned
to MCPTT UE.
2\. MCPTT user profile used for off-network operation mode includes the IP
address of the MCPTT user who logins on from the MCPTT UE.
Figure 7.7.5-1: Private call set up with information acquisition using
solicited discovery
1\. The discovery request contains the following information: MCPTT user
identity of target MCPTT users or MCPTT group ID of target groups if it wants
to find all membership of that MCPTT group. MCPTT client requires low layer to
send discovery request message.
2\. ProSe discovery procedure will be used to help to find correct target
user. It will provide the UE layer-2 ID, IP address related to target MCPTT
UE/user. If MCPTT group ID is included in application discovery request, it
will provide the UE layer-2 ID, IP address related to multiple target MCPTT
UE/users contained within MCPTT group.
NOTE: If SIP protocol is used for call setup, the SIP location server is
located on each MCPTT UE.
3\. Lower layer will respond to MCPTT client the discovery result about if the
target user is reachable or not.
4\. When MCPTT user 1 wants to setup private call, MCPTT UE1 sends a call
setup request message towards to the target MCPTT user using the information
got during discovery phase.
5\. The MCPTT UE2 accepts the private call and sends accept message.
6\. MCPTT UE1 and UE2 successfully establish the media plane (steps 6a & 6b)
for communication.
### 7.7.6 Private call set up in off-network mode with unsolicited discovery
When an MCPTT user using ProSe-enabled UE wants to communicate with a specific
MCPTT user using ProSe-enabled UE by ProSe, the MCPTT user shall first know
the MCPTT UE IP address of the target MCPTT user. Then the MCPTT user can
initiate the private call set up procedure.
The information flow as illustrated in figure 7.7.6-1 is used to setup a
private call between two MCPTT users for in off-network mode with unsolicited
discovery.
Pre-conditions:
1\. MCPTT user profile used for off-network operation mode is pre-provisioned
to MCPTT UE.
2\. MCPTT user profile used for off-network operation mode includes the IP
address of the MCPTT user who logins on from the MCPTT UE.
Figure 7.7.6-1: Private call set up with information acquisition using
unsolicited discovery
1\. The discovery message includes MCPTT user identity of MCPTT user1. MCPTT
client requires low layer to send discovery request message by unsolicited
way.
2\. ProSe discovery procedure will provide the information of MCPTT user1 to
all other MCPTT users (step 2a). The other MCPTT users (belonging to the same
group) may store the received application layer identifies and layer-2 ID, IP
address binding of MCPTT UE1/User1 locally (step 2b).
NOTE: If SIP protocol is used for call setup, then the SIP location server is
located on MCPTT UE 1.
3\. MCPTT UE2 sends a call setup request message towards to the MCPTT UE1
according to the stored information which it received from the information
acquisition phase.
4\. The MCPTT UE1 accepts the private call request message, and an
acknowledgement is sent to the MCPTT UE2.
5\. MCPTT UE1 and UE2 successfully establish the media plane (steps 5a & 5b)
for communication.
## 7.8 MCPTT media plane transmissions with partner MCPTT systems
The MCPTT user is able to receive MCPTT media services (group communication,
private calls, etc) from partner MCPTT systems in normal and roaming
conditions. In this service delivery model, the media plane transmissions
between the MCPTT UE of the user and the partner MCPTT system can be achieved
directly or via the primary MCPTT system, selected by the operator's policy.
The protocol used for media plane signalling is non-SIP like RTCP.
The information flows as illustrated in figure 7.8-1 and figure 7.8-2 provide
the procedures for media related signalling and the media transmission between
MCPTT UE of the user and the partner MCPTT system.
Pre-conditions:
1\. The MCPTT group is defined in the partner MCPTT system, where the MCPTT
client of user receives the MCPTT service.
2\. A MCPTT group call is setup and active.
3\. The partner MCPTT system is the group host server that is hosting the
MCPTT group. The corresponding floor control server manages the media
corresponding to the group call.
4\. Protocol used for signalling of media plane is non-SIP, it can be protocol
like RTCP.
Figure 7.8-1: Media related signalling communication
Figure 7.8-2: Media communication
0\. Path (direct or via primary MCPTT system) for media related signalling and
media between MCPTT UE and partner MCPTT system is selected based on
operator's policy.
For media related signalling communication:
1\. A MCPTT user wants to talk.
2\. The floor participant corresponding to the MCPTT user sends a floor
request message to floor control server (partner MCPTT system) to get the
authorization and/or permission to talk.
3\. The floor control server (partner MCPTT system) performs the authorization
and arbitrates between requests that are in contention (i.e., floor control).
4\. If the floor control server (partner MCPTT system) allows the floor
participant to talk, a floor grant is provided with permission granted to
talk.
For media communication:
5\. The MCPTT client can now send uplink media data to the media resource
function gateway (partner MCPTT system).
6\. The media resource function gateway (partner MCPTT system) has downlink
media data to transfer.
7\. The media resource function gateway (partner MCPTT system) transfers the
downlink media to the MCPTT client of the MCPTT user.
# 8 Allocation of functional entities
Editor's note: This clause is intended to contain descriptions of the
assignment of the business entities based on business relationships in all of
their relevant combinations.
Editor's note: This clause and subsequent clauses are intended to be a working
area for text that will be included in the MCPTT TS'(s). The structure of this
and subsequent clauses may not be replicated in the MCPTT TS'(s).
# 9 Evaluation
Editor\'s note: This clause contains the overall evaluation of various
solutions.
# 10 Conclusions
## 10.1 Overall architecture for on-network operations
For Release 13 the MCPTT application solution developed by SA6 shall use a SIP
core that is based on the 3GPP IMS reference points defined in 3GPP TS 23.228
[13] (see subclause 6.6 of this document).
This means that the SIP core is:
1\. a 3GPP IM CN subsystem; or
2\. a SIP core which internally need not comply with the architecture of 3GPP
TS 23.228 [13] but where the exposed reference points, between functional
entities on different equipment, are compliant to 3GPP IMS (i.e. the SIP core
supports the mandatory procedures required by MCPTT and any additional options
required by MCPTT).
In either case enhancements will be considered for the IM CN subsystem and IMS
reference points to provide the necessary SIP core support for the MCPTT
application (including considering making existing IMS mandatory procedures
optional for MCPTT).
Any extensions or modifications to IMS shall be compatible with the existing
Release 13 IMS.
A single set of information flows will be developed for the Release 13 MCPTT
solution.
NOTE: The Release 13 schedule may limit the set of 3GPP TS 22.179 [2] MCPTT
requirements and deployment scenarios that can be met.
## 10.2 Conclusions for the functional architecture
Conclusions are captured in the evaluation section for the solutions. For
functionalities for which no clear conclusion could be derived, the following
applies:
1\. For on-network MCPTT operation:
\- The general architecture should be a combination of solution 2-1, solution
2-3 and 2-4 and will be developed directly in normative specification 3GPP TS
23.179 [28]; and
\- Additional group call procedures will be developed directly in normative
specification 3GPP TS 23.179 [28].
2\. For off-network MCPTT operation:
\- The general operations will be based on solution 1-5; and
\- Procedures for call control and floor control will be developed directly in
normative specification 3GPP TS 23.179 [28].
3\. No work will be progressed in Rel-13 for MCPTT for Isolated E-UTRAN
Operation for Public Safety (IOPS).
4\. No work will be progressed in Rel-13 for interworking with non-LTE PTT
systems.
###### ## Annex A (informative): MCPTT architectural scope
MCPTT currently only has a scope that includes MCPTT and associated Group
Management functions.
Figure A.1-1 below (which is based on the ETSI TCCE Reference Model and
Solution 2-1) indicates what is in and out of scope for 3GPP MCPTT work item
and which aspects of the system are already covered by existing 3GPP enablers
and which are new for MCPTT (and Group Management) Application Architectural
functions.
NOTE 1 this figure breaks out the SIP protocol layer (IMS Core) from the
application layer in the ETSI TCCE Reference Model and includes an MCPTT IWF
for interworking with Legacy Public Safety infrastructure (TETRA, P25 etc).
NOTE 2 The console is not shown in this figure. It is assumed that the console
is a special type of privileged MCPTT UE potentially communicating using IP
via a non-3GPP access (e.g. Ethernet).
**KEY**
RED shows what is out of scope for 3GPP MCPTT
YELLOW shows what is already covered by the 3GPP architecture
GREEN is the new Application Architecture functions for MCPTT
**Figure A.1-1: 3GPP MCPTT reference model (what is in and out of scope for
MCPTT)**
###### ## Annex B (informative): MCPTT deployment options
The following deployment options for MCPTT can be realised.
**KEY**
RED shows what is administered by the Public Safety Agency
BLUE shows what is adminsitered by the Telecomunications Carrier
## B.1 Public safety administration of the full MCPTT system
Figure B.1-1 shows the scenario where Public Safety Agency A administers their
entire MCPTT system including the LTE Radio Access Network. In this example
the UE (Terminal) is also shown as being potentially a dedicated device for
MCPTT.
Figure B.1-1: Public Safety Administration of the Full MCPTT System
## B.2 Public safety administration of the MCPTT application
Figure B.2-1 shows the scenario where Public Safety Agency A only administers
the MCPTT application. The rest of the system including the IMS Core Network
is administered by the Carrier. In this example the UE (Terminal) is shown as
being potentially a Carrier provided device with just MCPTT and Group
Management clients installed for MCPTT. Such a scenario may suit small Public
Safety Agencies without the resources to build out and operate their own full
network and also for utilities and some enterprises.
Figure B.2-1: Public Safety Administration of the MCPTT Application
## B.3 Public safety administration of MCPTT application and full SIP core
Figure B.3-1 shows the scenario where Public Safety Agency administers not
only the MCPTT application but also the SIP Core (IMS). Figure B.3-1 shows
Public Safety Agency A administering the SIP Core as identified in solution
2-2 (the NGCN scenario) of this document. Such scenario may be cost effective
for those Public Safety Agencies that have a high level of security
requirements and do not trust the Telecommunications Carriers with their Keys
and Identities and when deployed with carriers that will allow the Public
Safety Agency direct access to EPC without interfacing via a Carrier IMS core
network.
Figure B.3-1: Public Safety Administration of the MCPTT Application and SIP
Core
## B.4 Public safety administration of MCPTT application and partial SIP core
Figure B.4-1 shows the scenario where Public Safety Agency administers not
only the MCPTT application but also part of the SIP Core (IMS). Figure B.4-1
shows Public Safety Agency A Administering part of the SIP Core (just the
S-CSCF as identified in solution 2-1 of this document), with the rest of the
Carrier IMS Core Network being used to interface to EPC. Such scenarios may be
cost effective for those Public Safety Agencies that have a high level of
security requirements and do not trust the Telecommunications Carriers with
their Keys and Identities but the carrier requires that the Public Safety
Agency access to EPC via a Carrier IMS core network.
Figure B.4-1: Public Safety Administration of the MCPTT Application and SIP
Core
## B.5 Public safety administration of the MCPTT system plus carrier RANs
Figure B.5-1 shows the scenario where Public Safety Agency A administers full
MCPTT System except that some additional coverage is provided through use of
the Telecommunications carriers LTE Radio Access Network (RAN), with the
Public Safety EPC being used to interface to the Carriers RAN. Such a scenario
may suit large Public Safety Agencies which have plenty of resources to
provide a full network but need to add some additional coverage (e.g. for
rural areas).
Figure B.5-1: Public Safety Administration of the MCPTT System plus Carrier
RANs
## B.6 Public safety administration of MCPTT application plus public safety
RANs
Figure B.6-1 shows the scenario where Public Safety Agency A administers the
MCPTT Application and the Telecommunications Carrier administers most of the
rest of the system except that some additional coverage is provided through
use of the Public Safety administered LTE Radio Access Network (RAN), with the
Telecommunications Carrier EPC being used to interface to the Public Safety
RAN. Such a scenario may suit Public Safety Agencies which have built out
additional radio coverage (possibly in areas not served by the
Telecommunication carriers or in congested areas in order to ensure that there
is sufficient radio capacity for Public Safety) but do not have the resources
to provide a full network.
**Figure B.6-1: Public Safety Administration of MCPTT Application plus Public
Safety RANs**
## B.7 Carrier administration of the full system
Figure B.7-1 shows the scenario where Public Safety Agency A contracts with
the Carrier for the administration of the entire MCPTT system. In this example
the UE (Terminal) is shown as being potentially a Carrier provided device with
carrier installed MCPTT and Group Management clients for MCPTT. Such a
scenario may suit small Public Safety Agencies without the resources to own
and maintain a full network and also for utilities and some enterprises and
also Carrier provided PTT for consumers.
Figure B.7-1: Carrier Administration of the Full System
## B.8 Interoperability between different deployments
Figure B.8-1 shows inter working between different Public Safety Agencies.
Public Safety Agency A which contracts with the Carrier for the administration
of the entire MCPTT system is shown interconnected with Public Safety Agency B
which administers their entire MCPTT system including the LTE Radio Access
Network though the Carrier IMS Core Network System. Public Safety Agency B can
also enhance their coverage through utilisation of the Carrier IMS, EPC and
LTE access. Inter working with Legacy is via an Interworking function. It
should be noted that interworking with Legacy is the responsibility of the
legacy system. Thus regardless of which deployment scenarios are used
interoperability between all scenarios and legacy networks is possible though
the Carrier IMS Core Network System.
Figure B.8-1: Interoperability between different deployments
###### ## Annex C (informative): MCPTT roaming scenarios
## C.1 Overview
This Annex contains a set of roaming and migration scenarios foreseen for an
MCPTT UE. They include situations where the UE makes use of a visited network
in a roamed situation, and application level migration scenarios where the UE
becomes registered to a partner MCPTT system in order to provide mutual aid.
An example of a roamed scenario is where an MCPTT user makes use of another
network to provide a communication path back to his primary MCPTT system, for
example for MCPTT communications with users operating at home whilst this user
is operating in a different country.
An example of a mutual aid scenario requiring migration is an incident which
occurs on or near the borders of neighbouring countries. In this case user
organisations may have agreements for mutual assistance, whereby resources
from one country are dispatched across the border to assist the resources of
another country. In some communication scenarios, these visiting resources are
expected to fall under the control of a dispatcher within the visited country,
and have their communications controlled by this dispatcher. In this example,
it is expected that the migrated MCPTT UE will also have roamed to a visited
network. However other examples could also be foreseen where network roaming
does not occur, for example where one agency gives aid to another within the
same country.
## C.2 Scenario list
The scenarios foreseen for MCPTT are listed below. Each in turn is described
in more detail in the following subclauses. In analysis of these scenarios,
scenarios 1, 2 and 3 are considered to be the primary scenarios. Other
scenarios can be derived from these, individually or in combination with each
other, and therefore do not add further requirements for development of
technical solutions. The relationship between these others and scenarios 1, 2
and 3 is discussed in the following subclauses.
The three primary scenarios are the following.
1) Scenario 1: UE in visited network using primary MCPTT system.
2) Scenario 2: UE in visited network using partner MCPTT system with
connection to primary MCPTT system
3) Scenario 3: Communicating between UEs in different home networks using
different primary MCPTT systems (interconnect)
The remaining scenarios, which do not cause further technical solutions to be
required, are the following.
4) Scenario 4: UEs in home networks using primary MCPTT systems
5) Scenario 5: UE in visited network using partner MCPTT system without making
use of real time connection to primary MCPTT system.
6) Scenario 6: UE in visited network not using any MCPTT system.
7) Scenario 7: UE in visited network using partner MCPTT system, communicating
with both members of home and partner MCPTT system.
8) Scenario 8: UE in same home network using partner MCPTT system with
connection to primary MCPTT system.
9) Scenario 9: Communicating between UEs on the same home network using
different primary MCPTT systems.
10) Scenario 10: UE in home network using a primary MCPTT system not in UE4's
home network.
11) Scenario 11: UE in home network using a partner MCPTT system not in UE4's
home network.
Each of the scenarios is illustrated with a figure, and accompanying
explanatory text. Each scenario is taken from the perspective of UE4 in these
diagrams, who roams and/or migrates according to the scenario. Each figure in
the following subclauses uses the following key:
{width="3.915277777777778in" height="2.0in"}
## C.3 Scenario 1: UE in visited network using primary MCPTT system
Figure C.3-1 below illustrates this scenario.
{width="4.476388888888889in" height="2.716666666666667in"}
Figure C.3-1: UE in visited network using primary MCPTT system
In Scenario 1, UE4 has roamed to a visited network. Whilst in the visited
network, UE4 obtains service from its primary MCPTT system. As service is
obtained from the primary MCPTT system, communication is possible using MCPTT
services with other UEs, illustrated as UEs 1-3, for individual and group
calls, and other available services.
There is no migration to a partner MCPTT system in this scenario.
## C.4 Scenario 2: UE in visited network using partner MCPTT system with
connection to primary MCPTT system
Figure C.4-1 below illustrates this scenario.
{width="264.6763888888889in" height="2.3854166666666665in"}
Figure C.4-1: UE in visited network using partner MCPTT system with connection
to primary MCPTT system
In Scenario 2, UE has migrated to obtain service from MCPTT system B. It also
has roamed to a visited network, which is the network to which MCPTT system B
is connected. Whilst served by MCPTT system B, UE4 can take part in MCPTT
communications with UEs W, X, Y and Z, for whom MCPTT system B is the primary
MCPTT system. The partner MCPTT system B has a connection to the primary MCPTT
system A of UE 4, and may be used to provide services such as logging of UE
4's MCPTT communications.
This scenario does not require UE4 to take part in any communications with
other UEs who are obtaining service from primary MCPTT system A of UE4.
## C.5 Scenario 3: Communicating between UEs in different home networks using
different primary MCPTT systems (interconnect)
Figure C.5-1 below illustrates this scenario.
{width="139.22222222222223in" height="2.0722222222222224in"}
Figure C.5-1: Communicating between UEs in different home networks using
different primary MCPTT systems (interconnect)
In Scenario 3, no UE has migrated to seek service from a partner MCPTT system,
and all UEs are obtaining service via their respective home networks. However,
communication is provided between the two primary MCPTT systems, such that UEs
can communicate together across the different MCPTT systems. Individual calls,
group calls and other MCPTT communications can include UEs from either or both
MCPTT systems.
## C.6 Scenario 4: UEs in home networks using primary MCPTT systems
Figure C.6-1 below illustrates this scenario.
{width="2.8555555555555556in" height="2.363888888888889in"}
Figure C.6-1: UEs in home networks using primary MCPTT systems
Scenario 4 does not illustrate roaming or migration. UEs 1-4 are receiving
service from their primary MCPTT system, and are obtaining this via their home
network. This scenario is the static reference against which other scenarios
can be compared.
## C.7 Scenario 5: UE in visited network using partner MCPTT system without
making use of real time connection to primary MCPTT system
Figure C.7-1 below illustrates this scenario.
{width="6.688888888888889in" height="2.4791666666666665in"}
Figure C.7-1: UE in visited network using partner MCPTT system without making
use of real time connection to primary MCPTT system
In scenario 5, UE 4 has migrated to obtain service from MCPTT system B, which
is a partner system of its primary MCPTT system (system A). It has also roamed
to the visited network in order to connect to MCPTT system B. Whilst receiving
service from MCPTT system B it can take part in MCPTT communications with
other UEs for whom MCPTT system B is the primary MCPTT system, UEs W, X, Y and
Z. This scenario is similar to Scenario 2, except that in this scenario, there
is no connection from partner MCPTT system B back to primary MCPTT system A of
UE 4. Thus there is some form of off-line or fallback means of authorising UE
4 to obtain service from MCPTT system B.
## C.8 Scenario 6: UE in visited network not using any MCPTT system
Figure C.8-1 below illustrates this scenario.
{width="265.86041666666665in" height="2.4472222222222224in"}
Figure C.8-1: UE in visited network not using any MCPTT system
Scenario 6 is another reference scenario. The MCPTT capable UE 4 has roamed to
a visited network where that visited network happens to also have a connected
MCPTT system, but UE 4 does not seek MCPTT service from this partner MCPTT
system. UE 4 can take part in normal 3GPP communications (telephone calls, SMS
etc) with UEs who also have MCPTT system by means of their local MCPTT system.
However UE4 does not have MCPTT communications with those UEs.
The scenario illustrates that MCPTT service does not affect normal roaming
capabilities when the MCPTT services belonging to a partner system is not
used.
## C.9 Scenario 7: UE in visited network using partner MCPTT system,
communicating with both members of home and partner MCPTT system
Figure C.9-1 below illustrates this scenario.
{width="4.595833333333333in" height="2.301388888888889in"}
Figure C.9-1: UE in visited network using partner MCPTT system, communicating
with both members of home and partner MCPTT system
In scenario 7, UE 4 has roamed to a visited network and has also migrated to a
partner MCPTT system. UE 4 is in MCPTT communication with other users of the
partner MCPTT system (system B), and is also in MCPTT communication with
members of its primary MCPTT system (system A).
This scenario can be considered a combination of scenario 2 (migrating to a
partner system) and scenario 3 (interconnection between systems).
## C.10 Scenario 8: UE in same home network using partner MCPTT system with
connection to primary MCPTT system
Figure C.10-1 below illustrates this scenario.
{width="4.654166666666667in" height="2.1972222222222224in"}
Figure C.10-1: UE in same home network using partner MCPTT system with
connection to primary MCPTT system
Scenario 8 can be considered to be a subset of scenario 2, where UE 4 is
obtaining service from a partner MCPTT system. In this scenario, both MCPTT
systems are connected via the same home network for all UEs. A connection
exists between the MCPTT systems which may provide systems such as logging the
MCPTT communications of UE 4.
## C.11 Scenario 9: Communicating between UEs on the same home network using
different primary MCPTT systems
Figure C.11-1 below illustrates this scenario.
{width="4.561111111111111in" height="2.1881944444444446in"}
Figure C.11-1: Communicating between UEs on the same home network using
different primary MCPTT systems
Scenario 9 can be considered to be a subset of scenario 3, where UEs who are
obtaining service from their own primary MCPTT systems can communicate between
those MCPTT systems. In this scenario, both MCPTT systems are connected to the
same home network, so there is no inter-network communications required.
## C.12 Scenario 10: UE in home network using a primary MCPTT system not in
that UE's home network
Figure C.12-1 below illustrates this scenario.
{width="4.385416666666667in" height="2.3229166666666665in"}
Figure C.12-1: UE in home network using a primary MCPTT system not in that
UE's home network
In scenario 10, UE 4 is operating within its home network, and communications
are patched by some means such that UE 4 can take part in MCPTT communications
with UEs W, X, Y and Z who are all receiving service from MCPTT system B,
which is their primary system. However UE 4 is not directly receiving service
from MCPTT system B. UE4 may or may not be receiving service from its primary
MCPTT system, system A.
A possible use case for this is where a user from one service or organisation
helps with expert knowledge in an incident which is managed by another service
or organisation.
This means for this patching has not been fully explored, as scenario 3,
interconnection between primary MCPTT systems, is considered to be a more
effective scenario, and which also allows UE4 to remain in communication with
other users receiving service from its primary MCPTT system.
## C.13 Scenario 11: UE in home network using a partner MCPTT system not in
UE4's home network
Figure C.13-1 below illustrates this scenario.
{width="4.781944444444444in" height="2.3208333333333333in"}
Figure C 13-1: UE in home network using a partner MCPTT system not in UE4's
home network
In scenario 11, UE 4 is operating within its home network, but has migrated to
and is receiving service from partner MCPTT system B, where partner MCPTT
system B is connected to a different network to that of UE 4\. UE 4 can take
part in MCPTT communications with UEs W, X, Y and Z who are all receiving
service from MCPTT system B, which is their primary system. It does not have
MCPTT communications with other members of its own primary MCPTT system in
this scenario.
A possible use case for this is where a user from one service or organisation
helps with expert knowledge in an incident which is managed by another service
or organisation.
This scenario can be considered to be a subset of scenario 2. It is possible
that there is also a link between MCPTT systems A and B as described in
scenario 2, or no such link as described in scenario 5. It provides an
alternative realisation to scenario 10, in which migration did not take place,
for this use case.
###### ## Annex D (informative): Solution evaluation criteria
## D.1 Overview
This annex provides a set of criteria against which solutions in clause 5 of
the present document can be evaluated. There are both non technical and
technical criteria, and separate sets of technical criteria are provided for
both on-network and off-network solutions.
## D.2 Evaluation criteria
### D.2.1 Non technical criteria
Table D.2.1-1 contains non technical evaluation criteria for solution
evaluation.
Table D.2.1-1 Non-technical evaluation criteria
* * *
**Selection area** **Selection criterion** Mission Critical applications
Solution is application layer standards focusing on Mission Critical
capabilities required for Public Safety solutions Reuse from existing
standards Solution can take content from or be based on existing standards,
both within 3GPP and outside 3GPP; can identify level of reuse (e.g. stage 1,
stage 2, stage 3). Scope and timeliness Likely proportion of requirements in
3GPP TS 22.179 [2] that can be met by resources available within Release 13
timescales Ability to produce an extensible standard Ability to provide a
solution in Release 13 which is capable of backward and forward compatible
extension to fulfil further 3GPP TS 22.179 [2] and/or other requirements in
subsequent 3GPP Releases. Scalability Solution will not limit scalability of
systems, from small systems to nationwide systems Impact on EPS standards
Degree of extension or modification required for existing suite of 3GPP
standards should be minimized Load on groups external to SA6 Amount of work
required by other groups, both inside and outside 3GPP, and considered in
conjunction with those groups' workload Possibility of interoperability
Solution may provide the foundation for interoperability with existing
technologies (P25, TETRA etc)
* * *
### D.2.2 Technical evaluation criteria for on-network solutions
Table D.2.2-1 contains technical evaluation criteria for on-network solution
evaluation.
Table D.2.2-1 Technical evaluation criteria for on-network solutions
+----------------------+----------------------+----------------------+ | **User requirements |** Relevant | **Selection | | subject area** | 3GPP TS 22.179 [2] | criterion**| | | clauses** | | +----------------------+----------------------+----------------------+ | User identity and | 5.1 General group | Solution provides a | | logon independent of | call requirements | user identity used | | UE device | | for logon and | | | 5.8 User ID | calling functions | | | | that is independent | | | 5.11 Support for | from those used by | | | multiple devices | the LTE network. | | | | | | | 5.13 Security | | | | | | | | 6.4.3 Identification | | | | | | | | 6.11 Support for | | | | multiple devices | | +----------------------+----------------------+----------------------+ | Group call | 5.1.5 Membership and | Solution requires | | authorisation and | affiliation | authorised users to | | affiliation | | affiliate to obtain | | | 6.2.1 Commencement | group | | | modes for MCPTT | communications, and | | | group calls | allows group status | | | | information to be | | | 6.4.2. Group status | retrieved. | | | information | | | | | | | | 6.4.5 | | | | Me | | | | mbership/affiliation | | | | list | | +----------------------+----------------------+----------------------+ | Group call, | 5.1 General group | Solution provides | | including broadcast | call requirements | group calls | | call | | including broadcast | | | 5.2 Broadcast call | calls. | | | | | | | 6.2 MCPTT calls | | | | | | | | 6.4 General group | | | | call | | | | | | | | 6.5 Broadcast group | | +----------------------+----------------------+----------------------+ | Late call entry | 5.3 Late call entry | Solution includes | | | | late entry to | | | | ongoing group calls. | +----------------------+----------------------+----------------------+ | Floor control | 6.2.3 Floor control | Solution provides a | | including override | | floor control | | | 6.2.3.3 Override | solution which | | | | includes user | | | | priority and | | | | override facilities. | +----------------------+----------------------+----------------------+ | Call queuing | 6.2.2 Queuing | Solution provides | | | | ability to queue | | | 6.8.1 Queuing by | calls by order of | | | priority | request and by | | | | priority order. | +----------------------+----------------------+----------------------+ | Prioritisation, | 5.1.7 Prioritisation | Solution provides | | imminent peril and | | prioritisation of | | emergency call | 5.7 MCPTT priority | users and call | | | requirements | types, including | | | | specific call types | | | 6.4.7 Prioritisation | for immediate peril | | | (on network group | and emergency. | | | call) | Solution permits | | | | pre-emption of lower | | | 6.7.3 Prioritisation | priority calls. | | | (on network | | | | individual call) | | | | | | | | 6.8 MCPTT priority | | | | requirements | | +----------------------+----------------------+----------------------+ | Group management and | 5.4 Dynamic group | Solution allows | | regrouping | management | groups to be | | | | dynamically formed. | | | 6.6 Dynamic group | | | | management | | +----------------------+----------------------+----------------------+ | Private call | 5.6 Private call | Solution permits | | | | private calls | | | 5.7.2.3 Emergency | between users, | | | private call | including emergency | | | | private calls. | | | 6.7 Private call (on | | | | network) | | +----------------------+----------------------+----------------------+ | Security | 5.13 Security | Solution enables | | | | authenticity check | | | 6.13 Security | and authorisation | | | | based on user | | | | identity, and | | | | enables encryption | | | | of services at the | | | | application level. | +----------------------+----------------------+----------------------+ | Performance | 6.15.3 MCPTT access | Solution enables | | | time and mouth to | latency | | | ear latency | requirements, | | | | including 300msec | | | 6.15.4 Late entry | access time and | | | performance | 300msec mouth to ear | | | | latency. | | | 6.15.6 Radio | | | | resource efficiency | | | | performance | | +----------------------+----------------------+----------------------+ | Alignment with | - | Alignment with | | current | | architectural | | architectural | | assumptions in | | assumptions | | clause 4 of the | | | | present document | +----------------------+----------------------+----------------------+
### D.2.3 Technical evaluation criteria for off-network solutions
Table D.2.3-1 contains technical evaluation criteria for off-network solution
evaluation.
Table D.2.3-1 Technical evaluation criteria for off-network solutions
+----------------------+----------------------+----------------------+ | **User requirements |** Relevant | **Selection | | subject area** | 3GPP TS 22.179 [2] | criterion**| | | clauses** | | +----------------------+----------------------+----------------------+ | User identity and | 5.1 General group | Solution provides a | | logon independent of | call requirements | user identity | | UE device | | function | | | 5.8 User ID | | | | | | | | 5.11 Support for | | | | multiple devices | | | | | | | | 5.13 Security | | | | | | | | 7.2 General | | | | off-network MCPTT | | | | requirements | | +----------------------+----------------------+----------------------+ | Group call, | 5.1 General group | Solution provides | | including broadcast | call requirements | group calls | | call | | including broadcast | | | 5.2 Broadcast call | calls. | | | | | | | 7.5 Broadcast group | | +----------------------+----------------------+----------------------+ | Late call entry | 5.3 Late call entry | Solution includes | | | | late entry to | | | | ongoing group calls. | +----------------------+----------------------+----------------------+ | Floor control | 6.2.3 Floor control | Solution provides a | | including override | | floor control | | | 6.2.3.3 Override | solution which | | | | includes user | | | 7.3.1 General | priority and | | | aspects | override facilities. | | | | | | | 7.3.2 Requesting | | | | permission to | | | | transmit | | | | | | | | 7.3.3 Override | | +----------------------+----------------------+----------------------+ | Prioritisation, | 5.1.7 Prioritisation | Solution provides | | imminent peril and | | prioritisation of | | emergency call | 5.7 MCPTT priority | users, and emergency | | | requirements | calls | | | | | | | 7.7 MCPTT priority | | | | requirements | | | | | | | | 7.8 Call types based | | | | on priorities | | +----------------------+----------------------+----------------------+ | Private call | 5.6 Private call | Solution permits | | | | private calls | | | 5.7.2.3 Emergency | between users, | | | private call | including emergency | | | | private calls. | +----------------------+----------------------+----------------------+ | Security | 5.13 Security | Solution enables | | | | authenticity check | | | 7.10 Security | of user and | | | | confidentiality of | | | | services | +----------------------+----------------------+----------------------+ | Relay | 7.16.1 Private calls | Solution permits | | | | private calls and | | | 7.16.2 Group calls | group calls to be | | | | made using a relay | +----------------------+----------------------+----------------------+ | Alignment with | - | Alignment with | | current | | architectural | | architectural | | assumptions in | | assumptions | | clause 4 of the | | | | present document | +----------------------+----------------------+----------------------+
# Annex E: Change History
+-------+-------+-------+-------+-------+-------+-------+-------+ | **C | | | | | | | | | hange | | | | | | | | | hist | | | | | | | | | ory** | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | **D |** TSG | **TSG | * | ** |** Su | ** | ** | | ate**| #** | D | _CR_ _| Rev_ _| bject | Old_ _| New_ _| | | | oc.__| | | /Comm | | | | | | | | | ent_ * | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | TR | - | 0.0.0 | | 14-04 | | | | | ou | | | | | | | | | tline | | | | | | | | | subm | | | | | | | | | itted | | | | | | | | | to | | | | | | | | | SA2\ | | | | | | | | | #103: | | | | | | | | | S2-14 | | | | | | | | | 1589. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | TR | 0.0.0 | 0.0.1 | | 14-05 | | | | | ou | | | | | | | | | tline | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA2\ | | | | | | | | | #103: | | | | | | | | | S2-14 | | | | | | | | | 2102. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.0.1 | 0.1.0 | | 14-05 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA2\ | | | | | | | | | #103: | | | | | | | | | S2-14 | | | | | | | | | 2103. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.1.0 | 0.2.0 | | 14-07 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA2\ | | | | | | | | | #104: | | | | | | | | | S2-14 | | | | | | | | | 2776; | | | | | | | | | S2-14 | | | | | | | | | 2931. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.2.0 | 0.3.0 | | 14-10 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA2\ | | | | | | | | | #105: | | | | | | | | | S2-14 | | | | | | | | | 3714; | | | | | | | | | S2-14 | | | | | | | | | 3806; | | | | | | | | | S | | | | | | | | | 2-143 | | | | | | | | | 807.\ | | | | | | | | | ( | | | | | | | | | Minor | | | | | | | | | forma | | | | | | | | | tting | | | | | | | | | ch | | | | | | | | | anges | | | | | | | | | made | | | | | | | | | by | | | | | | | | | MCC) | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.3.0 | 0.4.0 | | 14-11 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA2\ | | | | | | | | | #106: | | | | | | | | | S2-14 | | | | | | | | | 4515; | | | | | | | | | S2-14 | | | | | | | | | 4516; | | | | | | | | | S2-14 | | | | | | | | | 4119; | | | | | | | | | S2-14 | | | | | | | | | 4498; | | | | | | | | | S2-14 | | | | | | | | | 4693; | | | | | | | | | S2-14 | | | | | | | | | 4355. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.4.0 | 0.5.0 | | 15-01 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA | | | | | | | | | 6#1: | | | | | | | | | S6-15 | | | | | | | | | 0066; | | | | | | | | | S6-15 | | | | | | | | | 0067; | | | | | | | | | S6-15 | | | | | | | | | 0069; | | | | | | | | | S6-15 | | | | | | | | | 0072; | | | | | | | | | S6-15 | | | | | | | | | 0074; | | | | | | | | | S6-15 | | | | | | | | | 0077; | | | | | | | | | S6-15 | | | | | | | | | 0078; | | | | | | | | | S6-15 | | | | | | | | | 0079; | | | | | | | | | S6-15 | | | | | | | | | 0080; | | | | | | | | | S6-15 | | | | | | | | | 0081; | | | | | | | | | S6-15 | | | | | | | | | 0085; | | | | | | | | | S6-15 | | | | | | | | | 0086; | | | | | | | | | S6-15 | | | | | | | | | 0087; | | | | | | | | | S6-15 | | | | | | | | | 0088; | | | | | | | | | S6-15 | | | | | | | | | 0089; | | | | | | | | | S6-15 | | | | | | | | | 0093; | | | | | | | | | S6-15 | | | | | | | | | 0095; | | | | | | | | | S6-15 | | | | | | | | | 0096; | | | | | | | | | S6-15 | | | | | | | | | 0097. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | Up | 0.5.0 | 0.5.1 | | 15-02 | | | | | dated | | | | | | | | | sol | | | | | | | | | ution | | | | | | | | | num | | | | | | | | | bers, | | | | | | | | | fixed | | | | | | | | | h | | | | | | | | | eader | | | | | | | | | style | | | | | | | | | is | | | | | | | | | sues, | | | | | | | | | table | | | | | | | | | of | | | | | | | | | cont | | | | | | | | | ents, | | | | | | | | | and | | | | | | | | | add | | | | | | | | | ed/de | | | | | | | | | leted | | | | | | | | | refer | | | | | | | | | ences | | | | | | | | | where | | | | | | | | | a | | | | | | | | | pprop | | | | | | | | | riate | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | | | | | I | 0.5.1 | 0.6.0 | | 15-03 | | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA | | | | | | | | | 6#2: | | | | | | | | | S6-15 | | | | | | | | | 0172; | | | | | | | | | S6-15 | | | | | | | | | 0154; | | | | | | | | | S6-15 | | | | | | | | | 0155; | | | | | | | | | S6-15 | | | | | | | | | 0157; | | | | | | | | | S6-15 | | | | | | | | | 0139; | | | | | | | | | S6-15 | | | | | | | | | 0168; | | | | | | | | | S6-15 | | | | | | | | | 0158; | | | | | | | | | S6-15 | | | | | | | | | 0174; | | | | | | | | | S6-15 | | | | | | | | | 0161; | | | | | | | | | S6-15 | | | | | | | | | 0162; | | | | | | | | | S6-15 | | | | | | | | | 0165; | | | | | | | | | S6-15 | | | | | | | | | 0129; | | | | | | | | | S6-15 | | | | | | | | | 0171; | | | | | | | | | S6-15 | | | | | | | | | 0132. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | | | | I | 0.6.0 | 0.7.0 | | 15-04 | A6#3 | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA | | | | | | | | | 6#3: | | | | | | | | | S6-15 | | | | | | | | | 0199; | | | | | | | | | S6-15 | | | | | | | | | 0200; | | | | | | | | | S6-15 | | | | | | | | | 0219; | | | | | | | | | S6-15 | | | | | | | | | 0228; | | | | | | | | | S6-15 | | | | | | | | | 0242; | | | | | | | | | S6-15 | | | | | | | | | 0244; | | | | | | | | | S6-15 | | | | | | | | | 0248; | | | | | | | | | S6-15 | | | | | | | | | 0250; | | | | | | | | | S6-15 | | | | | | | | | 0252; | | | | | | | | | S6-15 | | | | | | | | | 0253; | | | | | | | | | S6-15 | | | | | | | | | 0254; | | | | | | | | | S6-15 | | | | | | | | | 0256; | | | | | | | | | S6-15 | | | | | | | | | 0257; | | | | | | | | | S6-15 | | | | | | | | | 0259; | | | | | | | | | S6-15 | | | | | | | | | 0260; | | | | | | | | | S6-15 | | | | | | | | | 0262; | | | | | | | | | S6-15 | | | | | | | | | 0263; | | | | | | | | | S6-15 | | | | | | | | | 0267; | | | | | | | | | S6-15 | | | | | | | | | 0277; | | | | | | | | | S6-15 | | | | | | | | | 0278; | | | | | | | | | S6-15 | | | | | | | | | 0279; | | | | | | | | | S6-15 | | | | | | | | | 0280; | | | | | | | | | S6-15 | | | | | | | | | 0281; | | | | | | | | | S6-15 | | | | | | | | | 0282; | | | | | | | | | S6-15 | | | | | | | | | 0286; | | | | | | | | | S6-15 | | | | | | | | | 0288; | | | | | | | | | S6-15 | | | | | | | | | 0289; | | | | | | | | | S6-15 | | | | | | | | | 0293; | | | | | | | | | S6-15 | | | | | | | | | 0294; | | | | | | | | | S6-15 | | | | | | | | | 0295; | | | | | | | | | S6-15 | | | | | | | | | 0296. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | e | | | | Corre | 0.7.0 | 0.7.1 | | 15-05 | -mail | | | | ction | | | | | r | | | | of | | | | | eview | | | | impl | | | | | | | | | ement | | | | | | | | | ation | | | | | | | | | for | | | | | | | | | S6-15 | | | | | | | | | 0254, | | | | | | | | | ren | | | | | | | | | aming | | | | | | | | | of | | | | | | | | | solu | | | | | | | | | tions | | | | | | | | | intro | | | | | | | | | duced | | | | | | | | | by | | | | | | | | | S6-1 | | | | | | | | | 50252 | | | | | | | | | and | | | | | | | | | corre | | | | | | | | | ction | | | | | | | | | of | | | | | | | | | table | | | | | | | | | of | | | | | | | | | con | | | | | | | | | tents | | | | | | | | | for | | | | | | | | | ann | | | | | | | | | exes. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | | | | I | 0.7.1 | 0.8.0 | | 15-06 | A6#4 | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA | | | | | | | | | 6#4: | | | | | | | | | S6-15 | | | | | | | | | 0300; | | | | | | | | | S6-15 | | | | | | | | | 0402; | | | | | | | | | S6-15 | | | | | | | | | 0404; | | | | | | | | | S6-15 | | | | | | | | | 0425; | | | | | | | | | S6-15 | | | | | | | | | 0428; | | | | | | | | | S6-15 | | | | | | | | | 0430; | | | | | | | | | S6-15 | | | | | | | | | 0441; | | | | | | | | | S6-15 | | | | | | | | | 0443; | | | | | | | | | S6-15 | | | | | | | | | 0446; | | | | | | | | | S6-16 | | | | | | | | | 0453; | | | | | | | | | S6-15 | | | | | | | | | 0454; | | | | | | | | | S6-15 | | | | | | | | | 0455; | | | | | | | | | S6-15 | | | | | | | | | 0456; | | | | | | | | | S6-15 | | | | | | | | | 0457; | | | | | | | | | S6-15 | | | | | | | | | 0461; | | | | | | | | | S6-15 | | | | | | | | | 0463; | | | | | | | | | S6-15 | | | | | | | | | 0464; | | | | | | | | | S6-15 | | | | | | | | | 0465; | | | | | | | | | S6-15 | | | | | | | | | 0466; | | | | | | | | | S6-15 | | | | | | | | | 0467; | | | | | | | | | S6-15 | | | | | | | | | 0469; | | | | | | | | | S6-15 | | | | | | | | | 0470; | | | | | | | | | S6-15 | | | | | | | | | 0471; | | | | | | | | | S6-15 | | | | | | | | | 0472; | | | | | | | | | S6-15 | | | | | | | | | 0474; | | | | | | | | | S6-15 | | | | | | | | | 0475; | | | | | | | | | S6-15 | | | | | | | | | 0476; | | | | | | | | | S6-15 | | | | | | | | | 0477; | | | | | | | | | S6-15 | | | | | | | | | 0478; | | | | | | | | | S6-15 | | | | | | | | | 0482; | | | | | | | | | S6-15 | | | | | | | | | 0483; | | | | | | | | | S6-15 | | | | | | | | | 0484; | | | | | | | | | S6-15 | | | | | | | | | 0485; | | | | | | | | | S6-15 | | | | | | | | | 0486. | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | SP-1 | | | Subm | 0.8.0 | 1.0.0 | | 15-06 | A#68 | 50218 | | | itted | | | | | | | | | for | | | | | | | | | TSG | | | | | | | | | SA | | | | | | | | | for | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | | | | | | | | | | (Edit | | | | | | | | | orial | | | | | | | | | ch | | | | | | | | | anges | | | | | | | | | like | | | | | | | | | hard | | | | | | | | | s | | | | | | | | | paces | | | | | | | | | add | | | | | | | | | ition | | | | | | | | | of | | | | | | | | | table | | | | | | | | | he | | | | | | | | | ading | | | | | | | | | to | | | | | | | | | tabl | | | | | | | | | e 5.6 | | | | | | | | | .1.2. | | | | | | | | | 3.1-1 | | | | | | | | | and | | | | | | | | | cor | | | | | | | | | respo | | | | | | | | | nding | | | | | | | | | ref | | | | | | | | | in | | | | | | | | | the | | | | | | | | | text | | | | | | | | | block | | | | | | | | | ab | | | | | | | | | ove.) | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | | | | I | 1.0.0 | 1.1.0 | | 15-08 | A6#5 | | | | mplem | | | | | | | | | ented | | | | | | | | | P-CRs | | | | | | | | | a | | | | | | | | | greed | | | | | | | | | at | | | | | | | | | SA | | | | | | | | | 6#5: | | | | | | | | | S6-15 | | | | | | | | | 0493; | | | | | | | | | S6-15 | | | | | | | | | 0498; | | | | | | | | | S6-15 | | | | | | | | | 0503; | | | | | | | | | S6-15 | | | | | | | | | 0528; | | | | | | | | | S6-15 | | | | | | | | | 0548; | | | | | | | | | S6-15 | | | | | | | | | 0586; | | | | | | | | | S6-15 | | | | | | | | | 0632; | | | | | | | | | S6-15 | | | | | | | | | 0634; | | | | | | | | | S6-15 | | | | | | | | | 0636; | | | | | | | | | S6-15 | | | | | | | | | 0637; | | | | | | | | | S6-15 | | | | | | | | | 0638; | | | | | | | | | S6-15 | | | | | | | | | 0639; | | | | | | | | | S6-15 | | | | | | | | | 0640; | | | | | | | | | S6-15 | | | | | | | | | 0708; | | | | | | | | | S6-15 | | | | | | | | | 0709; | | | | | | | | | S6-15 | | | | | | | | | 0710; | | | | | | | | | S6-1 | | | | | | | | | 50746 | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | SP-1 | | | Cre | 1.1.0 | 2.0.0 | | 15-09 | A#69 | 50483 | | | ation | | | | | | | | | of | | | | | | | | | ve | | | | | | | | | rsion | | | | | | | | | 2.0.0 | | | | | | | | | for | | | | | | | | | SA | | | | | | | | | app | | | | | | | | | roval | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | S | | | | Appr | 2.0.0 | 1 | | 15-09 | A#69 | | | | oved. | | 3.0.0 | | | | | | | Inc | | | | | | | | | ludes | | | | | | | | | some | | | | | | | | | edit | | | | | | | | | orial | | | | | | | | | c | | | | | | | | | orrec | | |