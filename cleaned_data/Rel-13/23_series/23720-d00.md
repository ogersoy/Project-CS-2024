# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document studies and evaluates the architecture enhancement to
support ultra-low complexity, power constrained, and low data-rate \'Internet
of Things\' devices.
The study will consider architecture enhancements/simplifications in the
following areas:
\- Support of highly efficient handling of frequent and infrequent small data
transmissions (e.g. based on the traffic model in TR 45.820 [4]) with
minimised overhead for system signalling without compromising e.g. security.
\- Support of power consumption optimisations and/or using existing ones that
have been developed for EPS or GPRS.
\- Assessing simplification of Mobility Management and Session Management
procedures.
\- Support of paging optimisations for UEs requiring coverage enhancements.
The present document will also consider system architecture alternatives to
address the points above.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.368: \"Service Requirements for Machine-Type Communications\".
[3] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[4] 3GPP TR 45.820: \"Cellular System Support for Ultra Low Complexity and Low
Throughput Internet of Things\".
[5] 3GPP TR 36.888: \"Study on provision of low-cost Machine-Type
Communications (MTC) User Equipments (UEs) based on LTE\".
[6] 3GPP TR 23.887: \"Study on Machine-Type Communications (MTC) and other
mobile data applications communications enhancements\".
[7] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
[8] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[9] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[10] IETF RFC 4944: \"Transmission of IPv6 Packets over IEEE 802.15.4
Networks\".
[11] ETF RFC 6282: \"Compression Format for IPv6 Datagrams over IEEE
802.15.4-Based Networks\".
[12] ETF RFC 6775: \"Neighbor Discovery Optimization for IPv6 over Low-Power
Wireless Personal Area Networks (6LoWPANs)\".
[13] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[14] 3GPP TS 24.011: \"Point-to-Point (PP) Short Message Service (SMS) support
on mobile radio interface\".
[15] 3GPP TS 33.401: \"3GPP System Architecture Evolution (SAE); Security
architecture\".
[16] 3GPP TS 36.323: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Packet Data Convergence Protocol (PDCP) specification\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], TS 22.368 [2], and the following apply. A term defined in the
present document takes precedence over the definition of the same term, if
any, in TR 21.905 [1].
**Cellular IoT (CIoT):** Internet of Things using 3GPP technology.
Editor\'s note: The final definition will be coordinated with TSG RAN.
**CIoT RAT:** a 3GPP Radio Access Technology for Cellular IoT supporting the
traffic models defined in clause 4.3 and ultra-low complexity, power
constrained, and low data-rate \'Internet of Things\' devices.
Editor\'s note: The final definition will be coordinated with TSG RAN.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
CIoT Cellular IoT
C-SGN CIoT Serving Gateway Node
DRX Discontinuous Reception
IoT Internet of Things
MTC Machine Type Communications
M2M Machine-to-Machine
# 4 Architectural Considerations and Assumptions
## 4.1 Architectural Reference Model for Cellular IoT
NOTE: S1* indicates modification needed to S1 interface to support Cellular
IoT.
Figure 4.1-1: Architectural reference model
## 4.2 Architectural assumptions for Cellular IoT system
Following assumptions as listed in TR 45.820 [4] apply:
\- The user plane data rate requirements of CIoT on the core network are very
low compared to that of an LTE Core Network. Please see clause 4.3 for Traffic
Models for CIoT.
\- Control plane efficiency is important for the CIoT system. Even with low
data rate due to large number of devices will result in high number of
establishing and releasing an RRC connection.
\- Applications expected to be supported on CIoT are generally expected to be
delay tolerant. For certain application requiring strict delay profile, max
delay of 10 sec is considered.
\- Support for Inter-RAT mobility and Intra-RAT network controlled handover
are not required.
\- Support for CS services is not required.
## 4.3 Traffic Models for Cellular IoT
Traffic model for Cellular IoT is defined in Annex E of TR 45.820 [4] and
compiled in the table below for quick reference.
Table 4.3-1: Traffic Models for Cellular IoT
+-------------+-------------+-------------+-------------+-------------+ | Category | Application | UL Data | DL Data | Frequency | | | example | Size | Size | | +-------------+-------------+-------------+-------------+-------------+ | Mobile | smoke alarm | 20 bytes | 0 | Every few | | Autonomous | detectors, | | | months; | | Reporting | power | | ACK payload | | | (MAR) | failure | | size is | Every year | | exception | no | | assumed to | | | reports | tifications | | be 0 bytes | | | | from smart | | | | | | meters, | | | | | | tamper | | | | | | no | | | | | | tifications | | | | | | etc. | | | | +-------------+-------------+-------------+-------------+-------------+ | Mobile | smart | 20 bytes | 50% of UL | 1 day | | Autonomous | utility | with a cut | data size | (40%), 2 | | Reporting | (gas/wate | off of 200 | | hours | | (MAR) | r/electric) | bytes i.e. | ACK payload | (40%), 1 | | periodic | metering | payloads | size is | hour (15%), | | reports | reports, | higher than | assumed to | and 30 | | | smart | 200 bytes | be 0 bytes | minutes | | | a | are assumed | | (5%) | | | griculture, | to be 200 | | | | | smart | bytes. | | | | | environment | | | | | | etc. | | | | +-------------+-------------+-------------+-------------+-------------+ | Network | Switch | 0 - 20 | 20 bytes | 1 day | | Command | on/off, | bytes | | (40%), 2 | | | device | | | hours | | | trigger to | 50% of | | (40%), 1 | | | send uplink | cases | | hour (15%), | | | report, | require UL | | and 30 | | | request for | response. | | minutes | | | meter | | | (5%) | | | reading | | | | +-------------+-------------+-------------+-------------+-------------+ | Software | Software | 200 bytes | 200 bytes | 180 days | | update/reco | patc | with a cut | with a cut | | | nfiguration | hes/updates | off of 2000 | off of 2000 | | | model | | bytes i.e. | bytes i.e. | | | | | payload | payload | | | | | higher than | higher than | | | | | 2000 bytes | 2000 bytes | | | | | are assumed | are assumed | | | | | to be 2000 | to be 2000 | | | | | bytes. | bytes. | | +-------------+-------------+-------------+-------------+-------------+
# 5 Key Issues
## 5.1 Key Issue 1 - Architecture Reference Model for Cellular IoT
### 5.1.1 Description
This key issue aims to describe a architecture reference model that is
appropriate to fulfil the requirements of Cellular IoT (CIoT) for ultra-low
complexity and low throughput \"Internet of Things\" devices that may also be
constrained e.g. with regard to processing power, memory, battery capacity,
etc.
This will address high level Architecture Reference Model, network elements
and reference point for CIoT.
Editor\'s note: Architecture reference model may be referenced by solution to
other key issue.
Editor\'s note: Once common Architecture Reference Model for CIoT is agreed it
can be moved under clause 4.
### 5.1.2 Architectural Requirements
Editor\'s note: Capture agreements on architectural requirements for solving
the key issue. This clause may be omitted if deemed unnecessary.
## 5.2 Key Issue 2 - Efficient support of infrequent small data transmission
for Cellular IoT
### 5.2.1 Description
This key issue aims to provide solution to support highly efficient handling
of infrequent small data transmissions for ultra-low complexity, power
constrained, and low data-rate \'Internet of Things\' devices, called CIoT
devices. It is expected that the number of such devices will increase
exponentially but the data size per device will remain small. Infrequent small
data traffic characteristics for MTC applications (as described in Annex E of
TR 45.820 [4]) may lead to inefficient use of resources in the 3GPP system. It
is to be noted that the existing E-UTRAN/EPC (i.e. S1-based) architecture
might not be best optimized for infrequent small data transfer and therefore,
would require optimizations to support data handling for CIoT devices.
### 5.2.2 Architectural Requirements
Following architecture requirements shall be supported:
\- minimize system signalling load especially over Radio interface;
\- appropriate security to EPS system;
NOTE: Security needs to be investigated by SA WG3;
\- improve battery life;
\- support delivery of IP data;
\- support delivery of non-IP data; and
\- support of SMS (as a deployment option).
## 5.3 Key Issue 3 - Efficient support of tracking devices using small data
transmission for Cellular IoT
### 5.3.1 Description
This key issue aims to provide solution to support highly efficient handling
of tracking devices using small data transmissions for ultra-low complexity,
power constrained, and low data-rate \'Internet of Things\' devices, called
CIoT devices. It is expected that the number of such devices will increase
exponentially but the data size per device will remain small. Small data
traffic characteristics for tracking MTC applications may lead to inefficient
use of resources in the 3GPP system. It is to be noted that the existing
E-UTRAN/EPC (i.e. S1-based) architecture might not be best optimized for
tracking devices using small data transfer and therefore, would require
optimizations to support data handling for CIoT devices. Support of tracking
devices is not expected to fit within the TR 45.820 [4] traffic models for the
inter-arrival time periodicity.
### 5.3.2 Architectural Requirements
For architecture requirements, see clause 5.2.2 for \'Efficient support of
infrequent small data transmission for Cellular IoT\'.
Editor\'s note: It is FFS if there are additional architecture requirements
for frequent small data transmissions.
### 5.3.3 Traffic model for efficient support of tracking devices using small
data transmission for Cellular IoT
#### 5.3.3.1 Mobile Autonomous Reporting (MAR) periodic tracking reports
Periodic uplink reporting is expected to be common for tracking cellular IoT
applications in different sectors, e.g. transportation (automotive industry,
fleet management, railroad), health and medical (patient monitoring, sports),
asset management (tracking/location management).
This is a relevant use case for CIoT. It is not expected to fit within the TR
45.820 [4] Traffic model.
The traffic models are for further study. Input from RAN is expected.
## 5.4 Key Issue 4 - Support of efficient Paging area management for Cellular
IoT
### 5.4.1 Description
SA2 has been discussing paging optimization issue due to the scarce of radio
interface resources and core network interface resources in regard to no/low
mobility devices. Accordingly, it has been discussed the availability of
paging only to last used eNB/cell rather than whole cells in Tracking Areas of
the UE in order to save paging resources both for radio interface and core
network interface.
The issue \"Scarcity of paging resource\" is more serious for Cellular IoT due
to following several reasons.
\- the number of CIoT devices much higher than legacy cellular devices in a
given area;
\- CIoT RAT operating in narrowband spectrum may not supply enough paging
resources and the number of UE Identities (S-TMSI, IMSI) which is included in
a single paging message would be very limited due to small message size
compared to legacy access system (e.g. E-UTRAN);
\- the coverage enhancement is mandatory requirement so each paging message
may occupy long period of time (e.g. repetition of same paging message).
The majority of Cellular IoT devices would have no/low mobility
characteristic. Therefore limiting the paging area to cell(s) rather than
paging to whole eNB(s)/cell(s) in Tracking Area(s) is more appropriate and
beneficial in terms of save of paging resources.
However the last known cell info which is informed to MME when the UE is
entering idle mode may not be accurate even for the stationary CIoT device.
The serving cell can be changed while the UE does not move due to various
reasons such as radio load condition change and neighbouring condition changes
(i.e. blocked by new building). Also not only the no mobility UEs but also the
low mobility UEs, limiting those paging areas is beneficial and necessary
since the low mobility UE will not move wide range of area in a given time.
Therefore paging area management in order to limit smaller paging area is
required for paging optimisation for Cellular IoT devices.
### 5.4.2 Architectural Requirements
The following paging area management requirements need to be met:
\- The system need to support efficient paging area management procedure for
no/low mobility UE;
\- The system need to consider dynamic environment radio condition change even
for the no mobility UE;
\- The system should consider the CIoT UE does not perform measurement report
to CIoT RAT; and
\- The system should consider avoiding frequent signalling exchange.
## 5.5 Key Issue 5: Selection of CIoT-EPC Dedicated Core Network
### 5.5.1 Description
There may be one or more EPC dedicated core networks supporting CIoT (CIoT-
EPC). Depending on RAN work, a CIoT-EPC DCN may be connected to both the
E-UTRAN and CIoT RAN. This key issue is to determine how to select a CIoT-EPC
DCN for IoT devices. Redirection of CIoT devices is assumed to use existing
DECOR functionality.
### 5.5.2 Architectural Requirements
Following architecture requirements shall be supported:
\- Redirection of CIoT devices between DCNs should be reduced.
## 5.6 Key Issue 6 - Support of Non IP data
### 5.6.1 Description
It is not uncommon to find applications in the machine-to-machine world which
utilize Non-IP data e.g. 6LowPAN, MQTT-SN etc. When such applications are
deployed in the mobile domain (over CIoT) then such Non-IP data needs to be
transferred between Application/Service Capability servers and CIoT devices.
Therefore, how to facilitate the transfer of such non-IP data needs to be
investigated.
## 5.7 Key Issue 7 - Support of SMS
### 5.7.1 Description
In the scope of this key issue we need to identify how to efficiently support
SMS and at least address these topics:
1\. Whether the combined attach is used to obtain SMS transfer service or just
a PS attach.
2\. Whether CIoT devices will exist which do not need any PDN connection and
just operate using SMS-based data transfer and identify related solutions.
## 5.8 Key Issue 8 - Control of small data misuse
### 5.8.1 Description
This key issue aims to provide solution to control small data misuse.
For CIoT in the scope of this key issue we need to identify how to control
misuse of small data due to at least the following aspect:
\- misuse in relation to service level agreement.
## 5.9 Key Issue 9 - Optimised Support of SMS transmission
### 5.9.1 Description
The current Short Message Service standard as defined in TS 23.060 [13] uses
protocols that are quite \"talkative\" over the radio (e.g. the RP/CP
protocols as defined in TS 24.011 [14]) and with quite excessive number of
layers in the protocol stack. In CIoT there is an opportunity to optimise the
way SMS is sent, in the scope of this key issue we need to identify how to
optimise support SMS and at least address these topics:
1\. Reduce the \"talkative\" over the radio.
2\. Optimisations needed for devices that mainly originate Short Message\'s
only so that the network does not attempt to deliver pending short messages.
## 5.10 Key Issue 10 - Authorization of use of Coverage Enhancement
### 5.10.1 Description
The usage of Coverage Enhancements may require extensive resources from the
network i.e. it should be possible to authorize usage of the Coverage
Enhancements functionality to ensure that only specific subscribers are able
to benefit from the feature.
### 5.10.2 Architectural Requirements
Following architecture requirement shall be supported:
\- The system should support procedures to authorize the use of Coverage
Enhancements.
## 5.11 Key Issue 11 - Header compression enhancements for CIOT
### 5.11.1 Description
This key issue aims to provide an efficient header compression scheme to
support the CIOT traffic models.
Based on the traffic model documented in clause 4.3, most of the categories
make use of small data size and send data infrequently. For example, periodic
MAR and Network Command are using the data size of 20-200 Byte every 30 min or
longer. Considering the IP and transport layer headers, e.g. 20B for IPv4 and
40B for IPv6, 8B for UDP, 20B for TCP, and 12B for RTP, the overhead is
significant. Therefore, header compressing is necessary for the efficient
support of large number of devices for the NB-IoT.
NOTE: For instance the traffic/user data for the NB-IoT typically includes
(though not inclusively) status information, measurement data, and alarming
data from M2M applications.
Due to the infrequent data sending and mobility, the header compression
context kept in the eNB and UE may be reset as a result of UE enters IDLE mode
or changes eNB. This leads to packets with full size headers, or even with
additional overhead, sent with frequently.
In addition, there could be also non-IP traffic for CIOT use. In this case,
the header compression scheme must be able to turn the scheme off when non-IP
traffic is used.
It is therefore desirable to develop a header compression mechanism to support
the efficient transport of CIOT traffic.
### 5.11.2 Architectural Requirements
For data delivery over control plane, the header compression function for CIOT
traffic needs to be supported to allow CONNECTED-IDLE mode transition and
mobility.
The header compression function for CIOT needs to be able to handle the non-IP
traffic when the UE requested non-IP support.
# 6 Solutions
## 6.1 Solution 1: Lightweight CN architecture for CIoT
### 6.1.1 Description
Editor\'s note: Describe the solutions. The first Sentence should list
solution corresponds to which key issue #. Clause(s) may be added to capture
details, procedural flow, etc.
#### 6.1.1.1 Introduction
NB CIoT RAT (see TR 45.820 [4]) and LTE eMTC (see TR 36.888 [5]) include the
following properties:
\- Ultra low UE power consumption;
\- Large number of devices per cell;
\- Applied in narrowband spectrum;
\- Increased coverage.
Considering the typical use cases for CIoT devices, the CIoT system only
supports reduced and necessary functionalities compared with the existing MME,
SGW and PGW:
1\. Support for efficient small data procedures;
2\. Simplified NAS signalling;
3\. USIM based security;
4\. Authentication and Authorization;
5\. NAS signalling security;
6\. Simplified mobility management;
7\. Attach, TAU, Detach;
8\. Tracking Area list management;
9\. UE Reachability in IDLE state (including paging);
10\. Simplified Session Management;
a. Only one PDN connection and one bearer for IP (or non-IP) data (no need for
DRB establishment).
11\. Lawful Interception;
12\. Paging for coverage enhancements;
13\. Charging and accounting.
#### 6.1.1.2 Architecture basic principles
Figure: 6.1.1.2-1: CIOT architecture (non-roaming)
NOTE 1: The PGW functions can be separated from the C-SGN as an implementation
option. In this case, S5 interface is used between C-SGN and PGW.
Figure: 6.1.1.2-2: CIoT architecture (roaming)
As mentioned in clause 6.1.1.1 CIoT traffic patterns and UE properties have
different characteristics than \"normal\" UEs. From CN perspective it is
expected that they differ with other \"normal\" UEs in the following areas:
\- For session management only the procedures required for infrequent small
data procedures will be supported
\- From mobility management perspective it is expected that a large number of
devices will not be ECM-CONNECTED state and less MM signalling will be
performed due to low mobility/extended pTAU timer
Efficient small data procedures have been studied in rel.12 (see WID
MTCe_SDDTE and TR 23.887 [6]) and as part of the study phase it was identified
that a combined CP+UP CN node provides better performance due to the ability
to re-use the security association that exists for NAS in CN and therefore not
require S1 and OTA transactions every time a transmission has to be performed.
The dynamic PCC is not needed for clean slate RAT and the PCC rules applied to
the default EPS bearer can be predefined in the PDN GW. Static PCC rules can
be configured in C-SGN for non-roaming case.
C-SGN given it is largely based on S1 with optimisations, can be the CN node
of use for UEs supporting the CIoT RAT or LTE eMTC. RAN (eNB or CIoT BS)
allocates all CIoT UEs to dedicated CN when the UE indicates that only IP (or
non IP) infrequent small data transmission is required to be supported. No
dedicated bearers with different QoS, no connected mode mobility, and no CS
procedures are supported by dedicated CN.
NOTE 2: RAN WGs will decide if LTE eMTC RAN can connect to common CIoT CN with
S1-Lite in this release.
#### 6.1.1.3 Functional Description of new entities
##### 6.1.1.3.1 C-SGN
C-SGN is a new logical entity and can be implemented to support only the
necessary functionality required for CIoT use cases.
Namely support for:
\- the necessary only part of MM procedures;
\- efficient small data procedures;
\- security procedures required only for efficient small data;
\- if SMS support is needed, SMS on the PS domain using non-combined GPRS
Attach procedure;
\- paging optimisations for coverage enhancements;
\- termination of SGi interface for the non-roaming case;
\- support for S8 interface for the roaming case;
\- support attach procedures for \"SMS only\" i.e. attach only for sending and
receiving SMS, without any PDN connection for IP (or non IP) data;
\- support tunnelling on SGi for non IP data.
Editor\'s note: It is FFS whether GTP-U tunnel will be needed in case of S5/S8
or GTP-C only can be used to send the small data packets to PGW.
##### 6.1.1.3.2 S1-lite
Figure 6.1.1.3.2-1: S1-lite protocol stack
S1-lite is an optimized version of S1-C. The protocol stack based on S1-C with
only necessary components for support of efficient small data. From S1-C only
the necessary S1-AP messages and IEs are supported for the related CIoT
procedures and only the optimised security procedures are supported. The user
plane data is carried in S1-AP in order to support efficient small data
handing.
S1-U in the form defined in TS 23.401 [8] is not needed.
#### 6.1.1.4 Protocol stack
The CIoT-RAN supports selecting C-SGN for CIoT UE. Both the CIoT-RAN and C-SGN
support S1-lite interface to efficiently transmit the small data.
Figure 6.1.1.4-1: Protocol stack for CIoT small data transmission (non-
roaming)
NOTE 1: As an implementation option, a PGW may terminate the SGi. In this
case, S5 interface is used between C-SGN and PGW.
Figure 6.1.1.4-2: Protocol stack for CIoT small data transmission (roaming)
NOTE 2: L1 and protocols indicated as \"RAN\" are in scope of TSG RAN.
### 6.1.2 Impacts on existing nodes and functionality
New UE procedures.
No impacts are foreseen in other existing functional entities: SGW, HSS, PGW,
SMS infrastructure.
### 6.1.3 Solution Evaluation
This solution simplifies the existing EPC architecture in order to address the
key issues identified in clause 5. It bases small data transmission on a
simplified architecture that is oriented at transporting small data over NAS
signalling messages. A dedicated core network node for CIoT profile provides
combined C-plane and U-plane functions, e.g. aggregating some of the functions
traditionally reside in MME and SGW (and in some instance PGW).
The solution supports certain modifications (e.g. native support of SMS in PS
domain, attach without PDN connection, simplified NAS etc.) to be applicable
only to CIoT UEs without requiring procedures to maintain backwards
compatibility with other UEs. These solutions may be applicable also to other
architecture not assuming necessarily the C-SGN functional grouping. Specific
solutions based on the architecture are detailed on other clauses of this TR.
The reduced number of messages over the radio interface can potentially allow
for lower power consumption profile.
## 6.2 Solution 2: Infrequent small data transmission using pre-established
NAS security
### 6.2.1 Description
#### 6.2.1.1 General
This solution corresponds to the Key issue 2 - \"Efficient support of
infrequent small data transmission for Cellular IoT\" and Key Issue 6 -
\"Support for non-IP data\".
The solution is based on the Lightweight CN architecture for CIoT as described
in clause 6.1.
NOTE: P-GW is only used to support roaming case. For non-roaming case, SGi
interface terminates on C-SGN and C-SGN can send/receive data on SGi directly.
Figure 6.2.1.1-1: E2E small data flow
#### 6.2.1.2 CIoT Attach Procedure
Figure 6.2.1.2-1: CIoT Attach Procedure
0\. RRC connection establishment procedure.
NOTE: RAN may decide to optimize RRC connection establishment procedure to
minimize signalling for CIoT devices.
1\. The UE performs Attach Procedure. During Attach procedure, CIoT UE
indicates that this attach is for CIoT. CIoT BS selects C-SGN optimized for
CIoT based on UE indication or based on pre-configuration. CIoT UE also
indicate specific Data Type (e.g. IP and/or non-IP and/or SMS). An APN may be
indicated.
2\. C-SGN performs any necessary security procedures.
3\. Location update and retrieval of subscription information.
4\. C-SGN processes the Attach Request message and based on parameters
provided decide the need for establishing IP Bearer Service.
For Data Type = IP, PDN type indicates type of IP address (i.e. IPv4, IPv6) to
be allocated. C-SGN allocates an IP address based on the PDN type in Attach
Request. No NAS Session Management signalling is needed. In the roaming case,
C-SGN sends a Create Session Request (or new control message) to the P-GW
indicating this is CIoT attach and Data Type. P-GW allocates an IP address
based on the PDN type in Attach Request.
For Data Type = non-IP, C-SGN does not run any IP related operation e.g. IP
address allocation. Based on the configuration C-SGN, may establish a direct
forwarding path, e.g. point to point tunnel on per UE per PDN basis, towards
AS. Alternatively based on configuration and if SCEF is deployed, C-SGN may
decide to route small data via SCEF.
NOTE: The configuration can be done based criterion such as SLA between
operator and 3^rd^ party application service provider, etc.
For Data Type = SMS, no IP address needs to be allocated and no Create Session
Request is sent to the PGW.
5\. In roaming case only, depending on Data Type, P-GW sends Create Session
response (or new control message) to the C-SGN. For IP data case, it contains
allocated IP address.
6\. C-SGN responds by sending an Attach Accept message to the UE without any
session management message. For Data Type= IP, allocated IP address is sent to
the UE.
7\. The UE responds with an Attach Complete message.
8\. The RRC connection is released.
#### 6.2.1.3 Procedure for MO Small Data Transfer (and response)
Figure 6.2.1.3-1: CIoT Mobile originated (MO) Small data transmission
0\. The UE performs Attach Procedure as shown in clause 6.2.1.2.
1\. The UE requests the UE\'s AS to establish an RRC connection. A new NAS
message format is used to carry the small data packet (i.e. IP, non-IP, SMS)
in an encrypted IE. The UE can also indicate whether acknowledgment/response
to the IP packet is expected or not. There is no need to set up DRB and AS
security.
> NOTE 1: It is RAN decision how to transfer the small data NAS PDU over the
> radio interface for CIoT RAT.
>
> NOTE 2: For congestion control, the establishment of a NAS signalling
> connection for small data transmission needs to be differentiated from NAS
> signalling connection for control signalling. The differentiation can be
> applied between the UE and CIoT RAN, and between CIoT RAN and C-SGN.
The unencrypted part of this new NAS PDU carries the \"eKSI and Sequence
Number\" IEs as usual for encrypted NAS messages. The C-SGN uses this, and the
S-TMSI, to identify the security context to decrypt the small data packet.
2\. The CIoT RAN forwards NAS PDU and the indication on whether ack/response
is expected to the C-SGN in the initial UE message.
> NOTE 3: In case of multiple small data packet transmission, subsequent small
> data packets are contained in UL NAS transport without requiring
> establishment of RRC connection.
3\. The C-SGN decrypts the NAS message, obtaining the small data packet. C-SGN
forwards the small data using appropriate mechanism depending on Data Type.
For IP small data C-SGN sends it over SGi. For SMS C-SGN sent it to SMS-SC.
For non-IP small data C-SGN, based on configuration, sends it to SCEF (as
defined in solution 4a) or to AS using point-to-point IP forwarding tunnel (as
defined in solution 10). In roaming case the data traverse through P-GW.
4\. If no acknowledgment/response to the small data packet is expected (based
on the subscriber information and the Ack/Rsp indication from the UE), the
C-SGN immediately releases the connection. Otherwise, when a (response) small
data packet arrives in the P-GW, sends it to the C-SGN.
5\. The C-SGN encrypts the NAS message with the downlink small data packet and
sends the downlink NAS transport message to the CIoT-RAN. C-SGN releases the
signalling connection after the timer monitoring the connection expires.
6\. CIoT-BS sends the Downlink Information Transfer including the NAS message
to UE and also releases the RRC connection after the timer monitoring the
connection expires.
#### 6.2.1.4 Procedure for MT Small Data Transfer
This uses similar concepts to the MO case described above.
Figure 6.2.1.4-1: CIoT Mobile terminated Small data transmission
0\. The UE performs Attach Procedure as shown in clause 6.2.1.2.
1\. C-SGN receives small data packet (IP, non-IP, SMS).
2\. If there is no signalling connection with the UE, the C-SGN buffers the
received small data packet, and pages UE. The UE sends the Service Request
message to C-SGN.
3\. The C-SGN then sends the small data packet in an encrypted IE in a NAS PDU
in a Downlink NAS message and the CIoT-BS sends the NAS PDU onto the UE. There
is no need to set up DRB and AS security.
4\. The UE might send a packet as an acknowledgement that is sent in an
encrypted IE in a NAS PDU in an UL RRC message. The CIoT-BS forwards the NAS
PDU to the C-SGN. After the timer monitoring the connection expires, the
C-SGN, UE and CIoT-BS release the connection locally.
5\. The C-SGN decrypts the NAS-PDU and forward to appropriate node depending
on Data Type.
### 6.2.2 Impacts on existing nodes and functionality
Impacts on UE:
\- Handle \"small data\" transaction (including transfer the encrypted uplink
packet to C-SGN in the first NAS message).
Impacts on RAN:
\- Handle \"NAS small data\" session.
\- C-SGN selection for CIoT UE.
Impacts on C-SGN comparing with MME:
\- Receive the uplink small data packet from UE by NAS.
\- Receive and encrypt the downlink small data packet and transfer to UE by
NAS.
\- Attach without activating bearer service.
### 6.2.3 Solution Evaluation
Benefits:
\- No establishment of DRBs and S1-U bearers.
\- Reduced signalling procedures in the core network and radio interface.
\- The solution provides the same efficiency to both stationary and mobile
devices.
\- The same transport mechanism can cover a wide range of applications
sending/receiving infrequent small data (e.g. IP, non-IP and SMS).
This solution piggybacks uplink small data onto the initial NAS uplink message
that is extended and it uses an additional NAS message for carrying downlink
response small data. The efforts for setting up the user plane, i.e. related
RRC messages and AS security setup, can be avoided. This solution does not
preclude delivery of very infrequent large data (e.g. software update/software
patches). C-SGN capacity needs to be suitable for this traffic;
The data transfer on the radio interface depends on the CIoT RAN design.
## 6.3 Solution 3: Connectionless small data transmission with immediate
return to idle
### 6.3.1 Description
#### 6.3.1.1 General
This solution corresponds to the Key Issue 2 - Efficient support of infrequent
small data transmission for clean-slate narrowband Cellular IoT.
#### 6.3.1.2 MO small data
The following figures show the call flow for mobile originated small data
transmission for connectionless small data transmission with immediate return
to idle.
Figure 6.3.1.2-1: MO small data procedure for non-roaming scenario
Figure 6.3.1.2-2: MO small data procedure for roaming scenario
0\. During registration or registration update (attach/TAU) the UE and C-SGN
establish the security context for transmission of MO/MT connectionless small
data
1-3: When the UE is in idle mode and has a small data packet to transmit, the
UE creates a message with a security header, and the encrypted small data
packet. Then it initiates an enhanced RACH procedure, to receive a grant for
uplink transmission and transmit the message with the encrypted small data
packet to the RAN node. The UE also provides an UE ID (e.g. GUTI) that
identifies the C-SGN.
Although the details of the message exchange need to be studied and confirm by
RAN WGs, one possibility is to have a 3 message handshake for uplink small
data transmission as follows:
1\. The UE sends an enhanced RACH message with the UE ID (GUTI) and an
indication of connectionless mode
2\. The eNB replies with an RA response and contention resolution which
includes the UE ID for contention resolution, a time advance, and an UL grant.
3\. The UE sends an enhanced message with the encrypted data message
NOTE 1: Delivery of message 3 from the UE is acknowledged by the RAN at MAC
layer.
NOTE 2: This solution shown in step 1-3 assumes that CIoT RAN can support the
enhanced RACH procedure in 3-message handshake. If the CIoT RAN does not
support the enhanced RACH procedure, then RA and RAR will be needed and the
final solution will consist of a 5-message handshake.
4\. The RAN node identifies the target C-SGN from the UE ID and forwards the
message with the encrypted data and the UE ID in an Initial UE message.
5\. The C-SGN checks the message (e.g. performs integrity check), decrypts the
message and forwards the small data packet to the P-GW. The C-SGN may also
store the last eNB from which the UE sent a small data packet and the time it
was sent (or starts a timer for which the last RAN node information is still
considered valid). This information is used to send to the UE any MT small
data packet.
6\. If there is a reply small data packet, and the C-SGN receives and MT data
packet for the UE, the C-SGN performs connectionless MT small data packet
delivery trying first to deliver the packet though the last used RAN node.
#### 6.3.1.3 MT small data
For purely connectionless small data, the UE is always in idle mode. Therefore
when an MT small data is received at the C-SGN, the C-SGN needs to:
1\. Page the device (currently done by MME for S1-based architecture).
2\. Deliver the MT data (currently done by S-GW).
Since the proposed architecture combines both control plane (MME) and user
plane (S-GW) functionality, our proposal is to have a combined paging/data
delivery procedure. This avoids the need to first page the device, then
confirm with the CN, and then wait for the CN to provide for delivery, which
adds a little of S1 signalling, but perhaps more importantly it reduces delay
and power consumption.
The following figure shows the call flow:
Figure 6.3.1.3-1: MT small data procedure
1\. When the C-SGN receives a small data packet to a device which is in idle
mode (and connectionless transmission is enabled) the MME initiates a paging
procedure with the following steps
2\. The C-SGN encrypts the small data packet and adds a security header. It
may also perform integrity protection of the message.
3\. The C-SGN selects the RAN node(s) in which to page the device. If the UE
has recently sent an MO small data packet from a RAN node, the C-SGN may first
try to page in that RAN node. Then the C-SGN sends a paging request to all
selected RAN nodes with the following:
\- Regular paging request content (UE identity, paging info, etc).
\- Encoded message with encrypted small data packet.
4\. The RAN node first performs paging, and if the UE initiates a RACH
procedure it sends the MT small data packet to the UE. The details of the over
the air procedures are to be studied by RAN WGs. The RAN node should keep a
context of the device temporarily for the UE to be able to send a short MAC as
confirmation of receipt that will be used for authentication in the C-SGN.
5\. Once the MT data is delivered by the RAN node, the RAN node sends an S1
message with confirmation of delivery, and including the short MAC from the
UE. The short MAC is used by the C-SGN to confirm the MT small data was
delivered to the right UE. The UE, after decrypting the small data packet, it
delivers the packet to upper layers.
The C-SGN performs paging retransmission strategy as usual, i.e., if no
confirmation is received from a RAN node, the C-SGN retries paging/data
delivery.
### 6.3.2 Impacts on existing nodes and functionality
UE:
\- New UE procedures.
RAN
\- New procedure in RAN node for connectionless transmission.
Core Network
\- Small data encryption/decryption and transport over control plane.
### 6.3.3 Solution Evaluation
This solution has got the following advantages:
  1. Highly optimized solution for the traffic model defined in TR 45.820 [4].
  2. Highly optimized for physical layer solution NB-CIoT proposed in TR 45.820 [4], clause 7.3
Related to the relationship of this solution and the physical layer solution
NB-CIoT proposed in TR 45.820 [4], clause 7.3 the following observation is
made. This solution shown in clause 6.3.1.2 assumes that CIoT RAN can support
the enhanced RACH procedure in 3-message handshake. If the CIoT RAN does not
support this 3-message handshake, then RA and RAR will be needed and the final
solution will consist of a 5-message handshake.
## 6.4 Solution 4: Non-IP small data transmission via MTC-IWF
### 6.4.1 Description
#### 6.4.1.1 General
This solution corresponds to key issue 6 -- Support for non-IP data.
This solution is based on a lightweight CN architecture for CIoT as defined in
clause 6.1.
The figure 6.4.1.1-1 shows the Cellular IoT network architecture proposed for
efficient non-IP small data transmission based on the T5* interface. The MTC-
IWF protocol entity may be a standalone entity, or may be combined with the
MME in the non-roaming cases.
A pre-requisite for small data transfer is that the UE is attached to the
network, and the capabilities for small data service have been exchanged
between the UE and the C-SGN during EPS Attach or TAU.
Figure 6.4.1.1-1: CIoT Architecture for non-IP small data transmission via
MTC-IWF
The MTC-IWF has similar functions as defined in Rel-12 for T4 small data
transmission.
This solution also works for the existing EPC architecture, in which case the
T5* reference point will terminate in the MME.
#### 6.4.1.2 Procedure
##### 6.4.1.2.1 MO small data transmission
Figure 6.4.1.2.1-1: MO non IP based small data transmission
NOTE 1: The choice of NAS PDU to carry the small data PDU is left for stage 3.
1\. Based on the request of transferring an SDT-PDU from an application, idle
mode CIoT UE initiates a RRC Connection Request for sending a small data
packet.
2\. The CIoT RAN responds by sending RRC Connection Setup message.
The CIoT RAN and C-SGN can only establish signalling connection towards the
UE.
NOTE 2: If new RRC establishment cause is added for small data, then UE
indicates it in its RRC Connection Request.
3\. The UE encapsulates the SDT-PTU into a Uplink Generic NAS Transport
message with Protocol type set to \"SDT\", and sends it as NAS PDU in RRC
Connection Setup Complete.
The SDT-PDU includes header and payload data. Within the header, if not
already done by the application, the UE fills the \"SENDER\" field with its
MSISDN (if known) or External ID (if known) and places SCS/AS ID in the
\"RECEIVER\" field. The sub address field may include the identity of the
application. The UE performs any wanted security functions, i.e. integrity
protection and/or encryption, if not already done by the application. The UE
also includes in the message an indication on whether acknowledgement is
required or not.
Editor\'s note: The exact format of RECEIVER ID is FFS.
4\. The CIoT RAN forwards the NAS PDU to the C-SGN in the S1AP Initial UE
message.
5\. The C-SGN decrypts the NAS message if necessary, obtains the SDT-PDU, and
sends it over T5 interface using T5-AP protocol. If the SDT-PDU contains no
sender ID, The C-SGN adds a sender ID. If the subscription doesn\'t require
home-routing, the C-SGN determines the destination for the SDT-PDU by
interrogating the HSS for the SDT Receiver ID and finds thereby the
appropriate MTC-IWF. If the subscription requires home-routing, the C-SGN
determines the appropriate MTC-IWF from the UE\'s IMSI or sender ID. If C-SGN
determines from the Initial NAS message that the signalling connection is for
small data, then C-SGN does not send any UE context to eNB.
NOTE 3: This avoids eNB performing RRC signalling to configure the UE for
measurement reporting.
6\. When the MTC-IWF receives the SDT-PDU the on T5* interface, it determines
the SCS/AS using the \'RECEIVER ID\' field in the SDT-PDU header, and replaces
IMSI (if indicated as sender ID) with MSISDN or External ID as \'SENDER ID\'.
7\. The MTC-IWF forwards the SDT-PDU or SDU to the SCS/AS.
8\. The SCS/AS returns an appropriate response, i.e. a Tsp-AP-PDU-Ack to
confirm the Tsp transfer of the SDT-PDU or the SDU, if an acknowledgment is
requested.
9\. If an acknowledgement is requested, the MTC-IWF sends a T5*-PDU-Ack to the
C-SGN
10\. The C-SGN sends an NAS-PDU-Ack to the UE in NAS message.
##### 6.4.1.2.2 MT small data transmission
Figure 6.4.1.2.2-1: MT non-IP based small data transmission
> NOTE 1: The choice of NAS PDU to carry the small data PDU is left for stage
> 3.
1\. The SCS/AS sends a downlink small data SDT-PDU including the receiver UE
ID and possibly a receiver sub-address to the MTC-IWF. The SCS/AS identifies
the UE by its External Identifier. The SCS/AS indicates whether a delivery
confirmation is required and possibly the message lifetime.
2\. On receiving a downlink small data SDT-PDU from the SCS/AS, the MTC-IWF
first interrogates the HSS for routing information (i.e. serving C-SGN
address), if a T5* association is not already established. Such associations
may also last longer and might be used for all UEs that share the same C-SGN
and MTC-IWF pair. In this case the MTC-IWF may store the serving node address
instead of a T5 association per UE. The IMSI of the UE is also retrieved to
enable the C-SGN to determine the UE.
The MTC-IWF also verifies with the help of the HSS whether the originator of
the SDT-PDU is allowed to send small data to the UE.
3\. The MTC-IWF sends the SDT-PDU together with an indication whether a
delivery confirmation is needed and possibly a lifetime of the message to the
serving node over the T5* interface using T5*-AP protocol. The IMSI of the UE
is also included in the T5*-AP message.
4\. If the CIoT UE is in idle mode, the C-SGN needs to buffer the received
non-IP packet, and pages the UE.
The CIoT UE send a initial NAS message (e.g. Service Request or TAU Request
without the active flag) as the paging response carrying the \"KSI and
sequence number\" IE. The C-SGN uses this to verify the message.
Only the signalling connection is established for the CIoT UE.
5\. Upon receiving the Initial NAS message, the C-SGN sends the SDT-PDU
encapsulated in a NAS-PDU to the UE.
6\. The CIoT RAN forwards the NAS-PDU in a Downlink Information Transfer
message to the UE
7\. When the CIoT UE receives the SDT-PDU, it will deliver the SDT-PDU or the
payload of SDT-PDU to the application, e.g. using receiver sub-address. If
delivery confirmation is required, the application layer in the UE will ask
the UE to send a NAS-PDU-ACK carrying confirmation in an Uplink Information
Transfer message towards the C-SGN.
8\. The CIoT RAN forwards the NAS-PDU-ACK in to the C-SGN.
9\. The C-SGN confirms the transfer towards MTC-IWF
10\. The MTC-IWF confirms the transfer towards SCS/AS.
If the C-SGN cannot deliver the PDU, e.g. because the UE is not reachable, it
indicates this to the MTC-IWF. If the MTC-IWF stores the PDU as permitted by
the message lifetime, the MTC-IWF registers for being informed when the UE
becomes active. The MTC-IWF indicates to the SCS/AS that the PDU is not
delivered but stored and allocates a reference number and indicates it also to
the SCS/AS.
### 6.4.2 Impacts on existing nodes and functionality
#### 6.4.2.1 CIoT UE
The UE already supports the necessary procedures, but the binding of the
existing encapsulation mechanisms to small data needs to be considered.
If the CIoT traffic needs to be prioritized at RRC connection setup, then a
new establishment cause can be added. This new CIoT establishment cause may be
indicated by the CIoT RAN in paging and the CIoT UE will respond with the
corresponding establishment cause when requesting for RRC connection
establishment.
The CIoT UE extracts the small data payload from Downlink Generic NAS
Transport message and forwards it to the application. If small data
acknowledgment is required, the CIoT UE encapsulates it in the Uplink Generic
NAS Transport message.
#### 6.4.2.2 CIoT RAN
If the CIoT traffic needs to be prioritized at RRC connection setup, then a
new establishment cause can be added. This new CIoT establishment cause may be
indicated by the CIoT RAN in paging and the CIoT UE will respond with the
corresponding establishment cause when requesting for RRC connection
establishment.
#### 6.4.2.3 C-SGN
In this solution, it is assumed that the C-SGN functionality differs from MME
functionality in the following ways.
The C-SGN shall extract the small data payload from the T5*-AP-PDU, and buffer
it for the duration of the paging and RRC connection establishment. Upon
receiving the initial NAS message, the C-SGN shall send the small data payload
to the UE encapsulated in a NAS-PDU.
There is no need to set up the user plane and AS security for small data
transport.
The C-SGN shall initiate the UE context release, when the SDT-PDU-ACK
corresponding to the NAS-PDU message containing the small data payload is
received.
### 6.4.3 Solution Evaluation
This solution has got the following advantages:
1\. Re-use of existing data flows and messages to encapsulate small data
payload
2\. Re-use of existing security procedures with no changes.
3\. Signalling-only small data transfer requires neither user plane resources
nor combined attach
4\. Flexible SD message payload size is constrained only by RAN design
5\. Session-less one-shot messages are efficient way to provide small data
transport.
6\. Existing always-on paradigm is not affected, as this small data solution
works with or without always-on.
This solution has got the following disadvantages:
1\. Complete re-use of existing implementations is not possible, but the
implementation of the affected nodes needs to change for CIoT.
## 6.4a Solution 4a: non-IP small data transmission via SCEF
### 6.4a.1 Description
#### 6.4a.1.1 General
This solution corresponds to the Key Issue 6 - Support for non-IP data.
This solution is based on lightweight CN architecture optimised for CIoT as
defined in clause 6.1. The figure 6.4a.1.1-1 shows the cellular IoT network
architecture proposed for efficient non-IP small data transmission via SCEF.
Figure 6.4a.1.1-1: CIoT Architecture for non-IP small data transmission via
SCEF
NOTE 1: Protocol over T6a* is recommended to be RESTful HTTP. Exact protocol
selection is stage-3 issue and needs to be evaluated by CT WG4.
This solution also works for existing EPC architecture in which case T6a*
reference point will terminate at MME.
#### 6.4a.1.2 Procedures
##### 6.4a.1.2.1 MO small data transmission
MO non-IP small data transmission procedure is similar to the one described in
clause 6.4.1.2.1 by replacing MTC-IWF with SCEF.
SDT protocol as shown is not necessary. For MO, Application payload may be
contained in other protocol (e.g. MQTT-SN).
##### 6.4a.1.2.2 MT small data transmission
MT non-IP small data transmission procedure is similar to the one described in
clause 6.4.1.2.2 by replacing MTC-IWF with SCEF.
SDT protocol as shown is not necessary. For MT, Application payload may be
contained in other protocol (e.g. MQTT-SN).
### 6.4a.2 Impacts on existing nodes and functionality
Impacts to UE, CIoT-RAN and C-SGN are same as described in clause 6.4.2.
MME/SCEF to support T6a* reference point.
### 6.4a.3 Solution Evaluation
Benefits of the solution are as described in clause 6.4.2 and additional
benefits are described in clause 5.1.1.3.3.3.1 of TR 23.887 [6]. Drawback as
listed in 5.1.1.3.3.3.1 of TR 23.887 [6], especially on impacts on nodes, are
mitigated considering clean slate design for CIoT UE, CIoT RAN and C-SGN.
Drawback related to queuing of DL packet is also mitigated using optimizations
for High latency communications as described in TS 23.682 [3].
This solution allows small data transport service as a capability exposure to
3^rd^ party Application Servers via SCEF. This also enables authorization of
small data delivery by specific AS and prevent unauthorized delivery of MT
small data. It also enables congestion control for MT small data.
## 6.4b Solution 4b: Non-IP small data transmission via SCEF with minimized
load to HSS
### 6.4b.1 Description
#### 6.4b.1.1 General
This solution corresponds to the Key Issue 6 - Support for non-IP data.
This solution is based on lightweight CN architecture optimised for CIoT as
defined in clause 6.1. The figure 6.4b.1.1-1 shows the cellular IoT network
architecture proposed for efficient non-IP small data transmission via SCEF.
Figure 6.4b.1.1-1: CIoT Architecture for non-IP small data transmission via
SCEF with minimized load to HSS
NOTE 1: Protocol over T6a* is recommended to be RESTful HTTP. Exact protocol
selection is stage-3 issue and needs to be evaluated by CT WG4.
This solution also works for existing EPC architecture in which case T6a
reference point terminates between the MME and the SCEF.
#### 6.4b.1.2 Procedures
##### 6.4b.1.2.1 Configuration of monitoring event: SDT
In prior to the MO and MT small data transmission, the MME/C-SGN and the SCEF
obtain necessary information (SCEF ID and MME/C-SGN routing information) for
MO and MT small data transmission, respectively, through the Monitoring Event
Configuration procedure,. Only impacted steps of the Monitoring Event
Configuration procedure (described in clause 5.6.1.1 of TS 23.682 [3]) are
specified below.
Editor\'s Note: How the solution deals with change of MME/C-SGN is FFS.
Figure 6.4b.1.2.1-1: Monitoring event configuration and deletion via HSS
1\. The SCS/AS sets Monitoring Type to \"SDT.\"
8\. If the Monitoring Type received in Step 3 is set to \"SDT,\" the HSS
includes the routing information of the MME/C-SGN in the Monitoring Response
message.
##### 6.4b.1.2.2 MO small data transmission
Only impacted steps of the Monitoring Event Reporting procedure (described in
clause 5.6.3.1 of TS 23.682 [3]) are specified below.
Figure 6.4b.1.2.2-1: Monitoring event reporting procedure with minimized load
to HSS
1a. A monitoring event is detected by the MME/C-SGN, i.e. the MME/C-SGN
receives MO small data. The MME/C-SGN may receive the MO small data e.g. via
Steps 1 and 2 of Figure 6.2.1.3-1.
2a. Monitoring Event Report includes the MO small data. The SCEF answers to
the MME/C-SGN with an acknowledgement message.
6.4b.1.2.3 MT small data transmission
Figure 6.4b.1.2.3-1: MT small data transmission via the SCEF with minimized
load to HSS
1\. The SCS/AS sends a SDT Request (SCS/AS Reference ID for SDT, MT Small
Data) message to the SCEF.
2\. If the SCEF does not have valid routing information for the MME/C-SGN
corresponding to the SCS/AS Reference ID for SDT, the SCEF queries to the HSS.
3\. The SCEF sends a SDT Request (SCEF Reference ID for SDT, MT Small Data)
message to the MME/C-SGN. The MME/C-SGN may send the MT small data e.g. via
Steps 1 and 2 of Figure 6.2.1.4-1.
4\. The MME/C-SGN responds with a SDT Response (SCEF Reference ID for SDT,
Cause) message to the SCEF.
If there is no valid context related to SCEF Reference ID for SDT in the
MME/C-SGN, the MME/C-SGN informs to the SCEF of the MT small data transmission
failure by setting Cause to a proper value. The SCEF may execute Step 2 and
onwards.
5\. The MME/C-SGN responds with a SDT Response (SCS/AS Reference ID for SDT,
Cause) message to the SCS/AS.
### 6.4b.2 Impacts on existing nodes and functionality
Impacts to UE, CIoT-RAN and MME/C-SGN depend on the mechanism used for the
data delivery between the UE and the MME/C-SGN, which is not in the scope of
the solution.
The C-SGN/SCEF needs to support T6a* reference point if the C-SGN is deployed.
New Monitoring Event: SDT must be introduced and the monitoring event report
shall contain MO small data.
The HSS must include the routing information of the MME/C-SGN if Monitoring
Event is set to SDT for MT small data delivery.
The MME/C-SGN/SCEF needs to support SDT Request/Response messages for MT small
data delivery.
### 6.4b.3 Solution Evaluation
Benefits of the solution are as described in clause 6.4.3 and additional
benefits are described in clause 5.1.1.3.3.3.1 of TR 23.887 [6]. Drawback as
listed in 5.1.1.3.3.3.1 of TR 23.887 [6], especially on impacts on nodes, are
mitigated considering clean slate design for CIoT UE, CIoT RAN and C-SGN.
Drawback related to queuing of DL packet is also mitigated using optimizations
for High latency communications as described in TS 23.682 [3].
This solution allows small data transport service as a capability exposure to
3^rd^ party Application Servers via SCEF. This also enables authorization of
small data delivery by a specific AS and prevents unauthorized delivery of MT
small data. It also enables congestion control for MT small data.
Editor\'s note: It is FFS whether and how to support the UE involved to
multiple SCS/ASs.
## 6.5 Solution 5: UE state transition signalling reduction
### 6.5.1 Description
#### 6.5.1.1 General
The main contributors to the signalling overhead are procedures used in
current S1-based EPS architecture required for UE state transition, i.e. at
transition between the Idle and the Connected state.
Figure 6.5.1.1-1: Legacy connection setup
Figure 6.5.1.1-1 illustrates current S1/EPS architecture based procedures
required to establish and tear down a connection in order for the UE to be
able to transfer/receive user plane, i.e. procedures applicable at UE
Idle/Connected state transition. As can be seen there is a significant
signalling overhead on the radio/Uu, S1AP interface. In order to reduce the
signalling overhead and the associated processing load in the network required
by the procedures illustrated above a solution is proposed that is based on
the re-use of information from the previous RRC connection for the subsequent
RRC connection setup.
It is proposed that this functionality is supported on a eNB basis, i.e. the
resumption of the previously suspended connection is limited to the cells
configured on the eNB where that connection was previously suspended. However,
this solution can also be introduced and supported for UEs having transactions
over multiple eNBs by introducing it over a cluster of eNBs that support UE
Context transfer between the eNBs via the X2 interface, see TS 36.300 using
handover preparation procedure see clause 20.2.2.1.
The signalling overhead reduction is realized by introducing two new
procedures \'RRC Suspend\' and \'RRC Resume\' that are described in clauses
6.5.1.2 and 6.5.1.3 and the introduction of a new ECM and RRC state in the UE
and in the MME.
#### 6.5.1.2 RRC Suspend
The RRC Suspend procedure is used at transition from RRC-Connected to a new
RRC state RRC-SUSPENDED:
\- the eNodeB and the UE store previous RRC connection related information,
e.g. Access Stratum Security Context, bearer related information (incl. RoHC
state information) and L2/1 parameters when applicable. The eNB provides the
UE with an identifier, referred as \'Resume ID\' e.g. based on the eNB ID,
used to address the relevant information stored in the eNB.
NOTE: The design of the \'Resume ID\' will be decided by TSG RAN.
\- Relevant network nodes store S1-MME UE association and S1-U bearer context
related information. This basically means that the S1AP UE Contexts are stored
and kept in the eNB and the MME. Additionally, the eNB stores and keeps the
S1-U tunnel addresses. The latter reduces the processing load on the eNB
required for establishment of S1-U bearers.
\- While in RRC-SUSPENDED state the UE\'s mobility behaviour is the same as in
RRC-Idle state, e.g. the UE applies normal or extended Idle mode DRX
parameters, performs cell re-selection etc.
\- At transition to RRC-SUSPENDED, the EMM layer enters ECM-SUSPENDED state.
Figure 6.5.1.2-1: Suspension of a RRC Connection
1\. Network decides to suspend the RRC Connection.
2\. eNB indicates to MME with a new S1AP message that the UE\'s RRC connection
is suspended. MME and eNB store the S1AP association and the related UE
Contexts. MME enters ECM state ECM- SUSPENDED. MME stores the DL TEIDs
associated with the UE and eNodeB.
3\. The MME sends a Release Access Bearers Request (Abnormal Release of Radio
Link Indication) message to the Sâ€‘GW that requests the release of all S1-U
bearers for the UE. SGW considers UE being in Idle state.
4\. SGW provides a response to the step 3.
5\. MME Acks step 2.
6\. MME enters \'ECM-SUSPENDED\' state.
7\. eNB suspends the RRC Connection towards the UE. An identifier that is used
at subsequent resumption of that suspended RRC Connection can be provided. The
UE and the eNB store the related Context information, i.e. RRC configuration,
bearer configuration (including RoHC state information), Access Stratum
Security Context and L2/1 parameters when applicable. This message also
contains the security algorithm configuration and the Next Hop Chaining
Counter (NCC) associated with the K_eNB that is to be used at subsequent
resumption.
8\. UE RRC layer enters new RRC-SUSPENDED state and the UE EMM layer enters
new ECM-SUSPENDED state.
#### 6.5.1.3 RRC Resume
At the transition from RRC- SUSPENDED to RRC-CONNECTED, previously stored
information in the UE as well as in the eNodeB is utilized to resume the RRC
connection.
UE provides the previously received \'Resume ID\' to be used by the eNB to
access the stored information required to resume the RRC Connection.
Furthermore it provides an Authentication Token used to securely identify the
UE.
Relevant network nodes re-store/re-use S1-MME UE S1AP association and S1-U
bearer context related information.
NOTE: Whether new messages and a new procedure are needed to conduct the
resumption of previously suspended RRC Connection will be investigated and
decided by RAN WG2.
Given that the UE is in ECM-SUSPENDED state no NAS Service Request will be
issued and thus there is no need for RRC Connection Setup Complete message
that is used to carry that message, see clause 6.5.1.4.
The reduction of signalling overhead is from 9 messages on the radio interface
for legacy connection setup as shown in figure 6.5.1.1-1 down to 4 messages
when using RRC Resume procedure as shown in the figure 6.5.1.3-1 below. The
removed messages are:
\- RRC Connection Setup Complete.
\- RRC Security Mode Command.
\- RRC Security Mode Complete.
\- RRC Connection Reconfiguration.
\- RRC Connection Reconfiguration Complete.
The procedure is illustrated in figure 6.5.1.3-1 below.
Figure 6.5.1.3-1: Resumption of a previously suspended RRC connection
> Steps 1 and 2 are following the legacy procedure when UE accesses the
> network from RRC Idle state.
4\. In msg3, a new RRC Connection Resume Request message, the UE includes its
Resume Id, Authentication Token, Bearer Ind, Establishment Cause) is included.
eNB uses Resume Id to associate the UE with the previously stored UE Context.
Additionally, msg3 can also contain User Plane multiplexed by MAC as per
existing specifications where resumed stored security context is used to
encrypt the User Plane.
Editor\'s note: The Authentication Token can be based on the existing means to
authenticate a UE at RRC re-establishment as specified in TS 36.331. It is
assumed that the final means for UE authentication at RRC Resume will be
decided by RAN WG2 with assistance of SA WG3 if needed.
5\. In message 4, designated here as RRC Connection Resume Complete the
network indicates which DRBs are resumed, furthermore it includes the Resume
Id and if applicable updated L2/1 parameters.
6\. UE and eNB resume the stored security context.
7\. eNB notifies the MME about UE state change in a new S1AP message
designated here as S1-AP UE Context Active. ECM in the MME enters the ECM-
CONNECTED state. MME identifies that the UE returns at the eNodeB for which
MME has stored information about allocated DL TEIDs for the UE.
8\. The MME sends a Modify Bearer Request message (eNodeB address, S1 TEID(s)
(DL) for the accepted EPS bearers, Delay Downlink Packet Notification Request,
RAT Type) per PDN connection to the Serving GW. If the Serving GW supports
Modify Access Bearers Request procedure and if there is no need for the
Serving GW to send the signalling to the PGW, the MME may send Modify Access
Bearers Request (eNodeB address(es) and TEIDs for downlink user plane for the
accepted EPS bearers, Delay Downlink Packet Notification Request) per UE to
the Serving GW to optimize the signalling. The Serving GW is now able to
transmit downlink data towards the UE.SGW considers UE being in Connected
state.
9\. SGW provides as response to step 8.
10\. MME acks step 7. After this step User Plane can be sent towards the SGW.
11\. Alternatively to transmission of message 4, if message 3 included User
Plane and indication that all User Plane is transmitted, the eNB can suspend
the RRC connection and implicitly indicate that the User Plane was
successfully received.
Figure 6.5.1.3-2 shows a MT connection when the RRC connection was previously
suspended, i.e. UE is in RRC-SUSPENDED as described in clause 6.5.1.2 making
subsequently use of the RRC Resume procedure.
Figure 6.5.1.3-2: Resumption of a previously suspended RRC connection for the
MT case
1\. UE is in \'RRC-SUSPENDED\' and \'ECM-SUSPENDED\'.
2\. SGW receives Data for a UE in Idle.
3\. SGW sends Downlink Data Notification to the MME.
4\. MME sends S1Paging message to the eNB(s). Note: MME may at first attempt
page the UE using the existing S1AP association, i.e. S1AP association that
was suspended as described in clause 6.1.1.2.
5\. eNB pages the UE over the radio interface.
6\. A UE RRC layer forwards the relevant information to the EMM layer. EMM
layer triggers the RRC layer to attempt the RRC Resume procedure as described
in clause 6.5.1.3.
7\. UE sends Random Access (legacy).
8\. eNB replies to RA (legacy).
9\. In msg3, designated here as RRC Connection Resume Request, the UE includes
its Resume Id, Authentication Token, Bearer Ind, Establishment Cause). eNB
uses Resume Id to associate the UE with the previously stored UE Context.
10\. In msg 4, designated here as RRC Connection Resume Complete the network
indicates which DRBs are resumed, furthermore it includes the Resume Id and if
applicable updated L2/1 parameters.
11\. UE and eNB resume the stored security context.
12\. eNB notifies the MME about UE state change in a new S1AP message
designated here as S1-AP UE Context Active indicating \'page response\'. ECM
in the MME enters the ECM-CONNECTED state. MME identifies that the UE returns
at the eNodeB for which MME has stored information about allocated DL TEIDs
for the UE.
13\. The MME sends a Modify Bearer Request message (eNodeB address, S1 TEID(s)
(DL) for the accepted EPS bearers, Delay Downlink Packet Notification Request,
RAT Type) per PDN connection to the Serving GW. If the Serving GW supports
Modify Access Bearers Request procedure and if there is no need for the
Serving GW to send the signalling to the PGW, the MME may send Modify Access
Bearers Request (eNodeB address(es) and TEIDs for downlink user plane for the
accepted EPS bearers, Delay Downlink Packet Notification Request) per UE to
the Serving GW to optimize the signalling. The Serving GW is now able to
transmit downlink data towards the UE.SGW considers UE being in Connected
state.
14\. SGW provides as response to step 12.
15\. MME acks step 11.
#### 6.5.1.4 States description and transitions handling
**The relevant state transitions are depicted in the figures 6.5.1.4-1 and
6.5.1.4-2 below.**
Figure 6.5.1.4-1: ECM and RRC state model in the UE
In the UE at suspension of the RRC connection the RRC layer enters RRC-
SUSPENDED state and the EMM layer enters ECM-SUSPENDED.
UE behaviour with regards to mobility while in RRC-SUSPENDED state is the same
as in RRC-IDLE state.
Editor\'s note: The details of the UE behaviour while in RRC-SUSPENDED state
will be determined and defined by RAN WG2.
The EMM layer while in ECM-SUSPENDED state supports the same set of procedures
that are supported in ECM-CONNECTED. At transition from ECM-SUSPENDED to ECM-
CONNECTED state the NAS layer provides the RRC layer with the relevant
information, e.g. enabling RRC layer to evaluate ACB, EAB as well as to
indicate the valid Establishment Cause. However, at that transition the EMM
layer does not send the NAS Service Request message.
In the UE, at paging the RRC layer provides the relevant information to the
NAS layer. When providing the relevant information to RRC to trigger RRC
Resume procedure as a result of paging, the NAS layer transits from ECM-
SUSPENDED to ECM-CONNECTED state.
For the network side, at suspension of the RRC connection the eNB notifies the
MME on the relevant S1AP association (see clause 6.5.1.2) which triggers in
the MME the transition of ECM state from ECM-CONNECTED to ECM-SUSPENDED. In
the ECM-SUSPENDED state the MME keeps the S1-AP UE Context as in the ECM-
CONNECTED state. Reception of DDN or data on other interfaces, e.g. SGs will
trigger a paging procedure as in legacy ECM-IDLE state. In ECM-SUSPENDED state
the MME supports the same procedures as in ECM-CONNECTED state.
While in ECM-SUSPENDED the UE performs periodic TAU and the MME applies Detach
timer.
If the MME rejects the resumption of the S1AP (the resumption of the S1AP is
shown in clause 6.5.1.3) it can provide a back-off time to the eNB. Upon the
rejection of the S1AP resumption the eNB releases the RRC connection providing
the back-off time to the UE. Subsequently UE can attempt to access the network
using legacy connection setup procedure taking the back-off time into
consideration.
Figure 6.5.1.4-2: ECM state model in the MME
In figure 6.5.1.4-2 at transition in the MME from ECM-CONNECTED to ECM-
SUSPENDED, the SGW is notified over S11 interface that the UE is now in Idle.
Hence Data arriving at the SGW will trigger a Downlink Data Notification being
sent to the MME and consequently the MME will page the UE.
#### 6.5.1.5 Further aspects
If the UE performs inter-MME or inter-RAT Idle mode mobility the new MME/SGSN
will perform context request from the old MME in which case the old MME
cancels the UE Context in the old eNB using the information stored in the S1AP
association. A SGW restart is assumed to be handled in a legacy way and a MME
that is notified that a node failure occurred will cancel the UE Context in
the eNB.
In case where the S1AP association is kept over a longer time period, the MME
can use UE Context Modification procedure to refresh the radio interface
ciphering keys as specified in TS 23.401 [8] clause 5.3.10.4.1 where the
details are captured in TS 33.401 [15], see clause 7.2.9.
The proposed procedures are independent of the S-TMSI handling.
### 6.5.2 Impacts on existing nodes and functionality
\- MME: support for new ECM state \'ECM-SUSPENDED\' state, i.e. EMM layer
coordination when the new procedures on S1AP are used, i.e. the relevant S1AP
procedures triggered by the \'RRC Suspend\' and \'RRC Resume\' procedures on
the radio interface. Support for storing of the UE Context information when
the RRC connection is suspended and the S1AP association is kept.
\- eNB: support for storing of UE Context with relevant radio interface
parameters as well as S1AP association related parameters when UE has moved
into RRC-Idle state by means of new \'RRC Suspend\' procedure. Support for new
procedures to suspend/resume the connection with the UE between the eNB and
the UE as well as between the eNB and the MME.
\- UE: support new RRC state \'RRC-SUSPENDED\' i.e. support for storing of
relevant radio interface when UE has entered into new RRC- SUSPENDED state by
means of new \'RRC Suspend\' procedure. Support for AS layer coordination when
the RRC Suspend and RRC Resume procedure is used. EMM layer support for new
state \'ECM-SUSPENDED\'.
### 6.5.3 Solution Evaluation
This solution reduces the signalling overhead required for UE state transition
from Idle to Connected in order to have a user plane transaction with the
network and back to Idle state on the radio interface from 10 down to 5
messages and on the S1AP from 6 down to 4 messages.
The solution impacts the AS and the NAS layer.
If the User Plane fits into message 3 then the reduction is from 10 down to 4
messages including the acknowledgement of the User Plane reception.
The solution maintains the existing EPS/S1 architecture and user plane
transfer principles and thus can be used for any RAT that uses S1 or a
variance of S1.
Finally it reduces the signalling overhead and thus also improves UE battery
lifetime for all use cases, i.e. for MTC/CIoT as well as for the smart phones
with mobility pattern typically limited to cells configured by a eNB as well
as when UEs are served by cells configured on multiple eNBs when support for
UE Context transfer between eNBs (see TS 36.300) is used.
## 6.6 Solution 6: User plane based solution with enhanced ECM-CONNECTED state
### 6.6.1 Description
#### 6.6.1.1 Underlying assessment
In order to assess the type of enhancement we need to analyse the expected
needs: to this effect let us consider the traffic models used by GERAN for
CIoT evaluation in TR 45.820 [4] and also reported in Table 4.3-1.
The main evaluation scenarios to be considered are related to static or quasi
static devices, which, also due to the expected LPWA typical cell radius,
imply a quite unlikely change of cell during the transmission of data or
subsequent transmission of data.
**Observation 1: The evaluation of the system level solutions and the Radio
for Cellular IoT assumes the UE is Static or quasi static, based on the GERAN
traffic models.**
**Observation 2: A UE will not change cell frequently within expected time
windows when the rare MTC data transfer transactions occur.**
Therefore, it is possible and efficient to have a solution where the UE is
supporting mobility based on RRC connection re-establishment/autonomous cell
reselection while the UE is in an \"enhanced ECM-CONNECTED\" state at NAS
layer, (which corresponds to an enhanced RRC-Connected state in the access
stratum), i.e. a state where the UE location is known on a cell basis in the
eNB and on a eNB basis in the SGW and MME, while the user plane functions
retain user plane transport primary role. This is because the RRC
reconnections subsequent to cell change (and even more so the eNB changes)
should be relatively infrequent and the additional data plane set up overhead
is compensated by subsequent UL and DL data transfer efficiency, and also by
the broader applicability to other use cases than the lowest end MTC
applications. As part of this state, the eNB-m serving a UE in enhanced RRC
connected state preserves the UE context when it transitions to RRC-IDLE
state, so that when the UE transitions from RRC-IDLE to \"enhanced RRC-
CONNECTED\" under the last used eNB, it can reuse the context immediately
without involving the core network for context retrieval via a full service
request at NAS Layer and avoid RRC security mode command.
While the UE is in enhanced ECM -CONNECTED state, it follows the same DRX
handling as a UE in regular RRC-CONNECTED state and the power consumption
resulting from this will be roughly the same (if we exclude the elimination of
measurements reporting that are not required in the enhanced RRC-CONNECTED
state). For UEs using this solution for infrequent small data transmission, it
is expected the eNB-m should make sure the UE remains connected for a short
time.
A UE that has entered ECM-IDLE mode coming from an enhanced ECM-CONNECTED mode
retains the context it used with the last cell and attempts to use the next
time it attempts to enter enhanced ECM-CONNECTED.
#### 6.6.1.2 Proposed architecture
Figure 6.6.1.2-1: Proposed architecture
The architecture in figure 6.6.1.2-1 is pretty much the same as we have
identified for the EPS. The notable changes or aspects are related to:
1\. A suffix \"-m\" is added to remark that changes or profiling are foreseen
for the related nodes/interfaces, but this does not preclude a single
implementation from supporting both the normal and \"m\" profile.
2\. No PCC as there is no dedicated bearers support.
3\. No S-10 as MME-m relocation is not necessary because most of the devices
are expected to be static and the core network will most likely be based on a
virtualized implementation not requiring relocations of MME.
4\. The selection of the MME-m versus an MME is based on explicit UE
indication in the RRC layer (there is no need of backward compatibility to
legacy UEs) when a UE is capable to use the regular EPS using its radio access
capabilities. A UE capable to use EPS-m mode indicates also explicitly it
shall use an EPS-m profile in network control plane interactions. How explicit
indication happens is a stage 3 issue.
5\. The RAN can be an EUTRAN specialized for MTC handling or a CIoT RAN.
#### 6.6.1.3 Proposed High level Solution attributes
1\. An enhanced ECM-CONNECTED state is defined where the UE always keeps the
context of the connection used in the last used cell and also would retain it
after the UE moves to ECM-IDLE.
2\. While in enhanced ECM-CONNECTED state there are no handovers and the UE
re-establishes RRC connection after Radio link failure/ autonomous cell
reselection. No connected mode network controlled handovers are supported. If
the new cell belongs to an eNB-m with no valid context for the UE, S1
interaction is needed to install a UE context in the new eNB-m. The context in
the Old eNB-m is removed.
2a. In the event the Context was kept in the eNB-m after Idle Mode transition,
the eNB-m explicitly indicates retention to the MME. The MME retains this
information for later use if the UE transitions to enhanced ECM-CONNECTED in
another eNB-m, so that it can delete the context and resume the S1. The
context retention decision may be based on explicit indication of Expected UE
behaviour using CN assistance of eNB parameters settings. (e.g.. highly mobile
expected behaviour leads to no context retention, static behaviour to context
retention).
Editor\'s note: It is in principle possible also to benefit from context
transfer from previous eNB so additional NAS-level transactions may be
avoided. This is FFS in RAN WGs if we proceed to normative phase with this
option.
3\. The UE and eNB-m run an enhanced RRC-CONNECTED timer that is reset at
every successful data transfer over the radio, and determines the transition
to RRC-IDLE. When the enhanced RRC-CONNECTED timer elapses the UE enters idle
mode, the e-NB-m passes to the MME the last known cell(s) where the UE was and
other Coverage enhancement information and the MME triggers the SGW to exit
enhanced ECM-CONNECTED state for DL data over S11interface. While in enhanced
ECM-CONNECTED state the UE may use a DRX period \ 0\. The UE is in ECM-IDLE mode and context is not available in the eNB of
> the cell the UE has selected.
>
> 1\. The UE executes a RRC-m connection request, indicating the UEID, the
> indication of EPS-m mode, DRB is required and any buffer status if there is
> pending data. The UE ID is a S-TMSI signed with the security association of
> the last used cell.
>
> 2\. The eNB-m grants only SRB transmissions as data cannot be sent for lack
> of a valid context
>
> 3\. The UE send a NAS Context Request to the MME-m in a RRC Context Setup
> Complete message
>
> 4-6. The UE context is populated in the eNB. In step 4 the MME-m may provide
> CN assistance so that the enhanced RRC-CONNECTED timer selection and context
> retention decisions can be assisted.
>
> 7\. DRB is confirmed
>
> 8\. The MME-m establishes S1 towards the eNB and , if the eNB-m had
> communicated retention of context at transition to idle from associated
> state, the MME-m releases the context stored in then the old eNB-m as per
> information stored in MME-m.
>
> 9\. The enhanced RRC-CONNECTED timer is running in the UE and eNB
>
> 10\. The S1 is established in the SGW.
>
> 11\. Data transfer may occur both UL and DL.
12\. Enhanced RRC-CONNECTED timer elapses.
> 13\. When the UE exits enhanced RRC-CONNECTED state the eNB-m informs the
> MME-m. If the context is retained the eNB-m informs the MME-m and the MME-m
> retains the S1-AP address of the eNB.14) The MME-m causes the SGW to release
> S1
##### 6.6.1.5.4 ECM-IDLE to enhanced ECM-CONNECTED TRANSITION (eNB-m with
retained context)
This procedure shown in Figure 6.6.1.5.4-1 causes a UE in ECM idle UE to enter
enhanced ECM-CONNECTED state in a eNB-m with valid UE context.
Figure 6.6.1.5.4-1: Entering enhanced ECM-CONNECTED state in a cell with
retained valid context
> 0\. UE is ECM-IDLE mode and context was retained in the eNB of the cell the
> UE has selected.
>
> 1\. The UE executes a RRC-m connection request, indicating the UEID, the
> indication of EPS-m mode, DRB is required and any buffer status if there is
> pending data. The UEID is a S-TMSI signed with the security association of
> the last used cell.
>
> 2\. The eNB-m locates the retained context for the UE and grants DRB
> transmissions as data can be sent.
>
> 3-5. The eNB-m resumes the S1 connection that was put on hold in the MME-m
> at transition to idle when it was indicated the context was retained. The
> enhanced RRC-Connected timer is running in the UE and eNB.
>
> 6\. Data transfer may occur both UL and DL.
7\. Enhanced RRC-CONNECTED timer elapses.
> 8\. When the UE exits enhanced RRC-CONNECTED state the eNB-m informs the
> MME-m. If the context is retained the eNB-m informs the MME-m and the MME-m
> retains the S1-AP address of the eNB.
>
> 9\. The MME-m causes the SGW to release S1.
##### 6.6.1.5.5 RRC connection re-establishment in enhanced ECM-CONNECTED
state in an eNB-m without valid UE context
In the procedure shown in Figure 6.6.1.5.5-1 a UE in enhanced ECM-CONNECTED
re-establishes RRC connection as soon as it selects a new cell after Radio
Link Failure or autonomously reselects the new cell. This new cell is homed to
an eNB-m with no valid context for the UE. Upon establishing state in the new
eNB-m, the context is removed in the old one.
Figure 6.6.1.5.5-1: RRC connection re-establishment in EMM- Associated state
in a cell of eNB-m without valid UE context
0\. The UE is in enhanced ECM-CONNECTED mode and the S1 is up.
1\. The UE executes a RRC-m connection request, including the UEID, the
indication of EPS-m mode, DRB is required and any buffer status if there is
pending data. The UEID is a S-TMSI signed with the security association of the
last used cell. The UE includes the current value of the enhanced RRC-
Connected timer.
2\. The eNB grants only SRB transmissions as data cannot be sent for lack of a
valid context
3\. The UE send a NAS context request to the MME in a RRC Context Setup
Complete message
4-6. The UE context is populated in the eNB-m. In step 4 the MME-m may provide
CN assistance so that the enhanced RRC-CONNECTED timer selection and context
retention decisions can be assisted.
7\. DRB is confirmed.
8\. The MME-m establishes S1 towards the eNB-m and releases the S1 in the old
eNB-m.
9\. Data transfer may occur both UL and DL.
10\. Enhanced RRC-CONNECTED timer elapses.
11\. When the UE exits enhanced RRC-CONNECTED state the eNB-m informs the
MME-m. If the context is retained the eNB-m informs the MME-m and the MME-m
retains the S1-AP address of the eNB.
12) The MME-m causes the SGW to release S1.
##### 6.6.1.5.6 RRC connection re-establishment in enhanced ECM-CONNECTED
state in an eNB-m with valid UE context
In the procedure shown in Figure 6.6.1.5.6-1 a UE in enhanced ECM-CONNECTED
re-establishes RRC connection as soon as it detects a new cell after Radio
Link Failure. This new cell is homed to an eNB-m with valid context for the
UE.
Figure 6.6.1.5.6-1: Entering enhanced ECM-CONNECTED state in a cell with eNB-m
with valid UE context
> 0\. UE is enhanced ECM-CONNECTED mode and the S1 is up.
>
> 1\. The UE executes a RRC-m connection request, indicating the UEID, the
> indication of EPS-m mode, DRB is required and any buffer status if there is
> pending data. The UEID is a S-TMSI signed with the security association of
> the last used cell. The UE includes the current value of the enhanced RRC-
> Connected timer.
>
> 2\. The eNB-m grants DRB transmissions as data can be sent.
>
> 3\. Data transfer may occur both UL and DL.
4\. Enhanced RRC-CONNECTED timer elapses.
> 5\. When the UE exits enhanced ECM-CONNECTED state the eNB-m informs the
> MME-m. If the context is retained the eNB-m informs the MME-m and the MME-m
> retains the S1-AP address of the eNB.
>
> 6\. The MME-m causes the SGW to release S1.
##### 6.6.1.5.7 Network initiated Temporary UE ID reallocation and Key refresh
In the event that the network initiates a GUTI reallocation or a NAS security
mode command:
\- If temporary GUTI is reallocated, then:
\- If this occurs in a different eNB-m from the last used eNB-m, the MME-m
shall delete the context in the last used eNB-m (this happens any time the UE
contacts the MME-m from a new eNB-m than the one stored in the MME-m as the
last used eNB-m)
\- If this occurs in the same eNB-m as the last used eNB-m, then the S1-AP
message carrying the NAS message with the new GUTI for the reallocation can
carry also the new temporary UE ID for the eNB-m to store in replacement of
the old one.
\- If the security keys are refreshed due to a network initiated NAS security
mode command, then the MME-m deletes the AS context for the UE in the last
used eNB-m if it is different from the eNB-m where the NAS security mode
command is executed (this happens any time the UE contacts the MME-m from a
new eNB-m than the one stored in the MME-m as the last used eNB-m). The AS
context security parameters for the current eNB-m is handled according to the
normal procedure.
### 6.6.2 Impacts on existing nodes and functionality
**eNB-m:** support enhanced ECM-CONNECTED state operation as per the above and
optimized RRC connection management.
**MME-m:** support of the EPS-m profile mode and of the context retention in
eNB.
**UE:** support enhanced ECM-CONNECTED state.
### 6.6.3 Solution Evaluation
This solution relies on development of an optimized RRC-m and a enhanced ECM-
CONNECTED mode of operation in the RAN and UE. If this is supported then it is
not clear, under the assumption the UE is static, a control plane solution
which is only suitable for infrequent and very short data transfers is needed
as the delta in messages over the air is minimal for single data transaction
but is superior for data sessions beyond just one UL and one DL packet and it
is more flexible to address more use cases, For slow moving UEs a context
transfer between eNBs, if supported by RAN, may also reduce the need of any
NAS-level interactions and improve the overall efficiency in infrequent small
data handling.
From a security standpoint it is as secure as the current 3GPP EPS system and
it does not use NAS keys for data transfers. However the lifetime of the user
plane keying material is expected to be longer also because the smaller
transfer of data makes a more need of refresh less clear.
The enhanced ECM-CONNECTED state is different from connected mode in many
aspects and in general it avoids the need to do measurement reporting assumed
by connected mode and simplifies mobility management.
By using context retention in the eNB-m, the feature also allows for efficient
transitions from ECM-IDLE (i.e. transitions without NAS procedures) so
practically for UEs that do not chance eNB between data sessions, or the eNB
context is retrievable in the new eNB from old eNB, the solution does not
require NAS level interactions to operate and it is more efficient than
C-Plane approaches especially for larger data transfers. For stationary
devices this means data transmission becomes efficient also for very small
data spaced by any amount of time and the difference in RADIO efficiency will
be only determined by RRC level message count (as estimated by RAN WGs when
the EEC for the CIoT work is complete) compensated by potentially lower
overheads on data transmission on DRBs compared to SRBs+NAS encapsulation.
In the face of high mobility or regular change of eNB during idle mode a
solution based on centralized security context like the control plane data
transfer procedure may be advantageous.
It is expected that UEs sending infrequent data remain in enhanced ECM-
Connected state for a short time to minimize power consumption.
## 6.7 Solution 7: Paging for static and dynamic coverage enhancement (CE)
level
### 6.7.1 Description
#### 6.7.1.1 General
Editor\'s note: Describe the solutions. First Sentence should list solution
corresponds to which key issue #. Sub-clause(s) may be added to capture
details, procedural flow etc.
This solution is based on the following principles:
Principle 1: Paging CE level is decided by RAN node when the UE is connected
and provided to the UE.
Principle 2: When RRC connection is released, the RAN node needs to store in
the Core network the type of device (low cost) and last negotiated CE level
while UE was in connected mode.
Principle 3: The Core Network needs to provide the CE level and UE support to
any RAN node where the paging request is sent when the UE is in idle.
Principle 4: For UEs that can potentially change paging CE level while in
idle, the RAN must adjust the paging CE level until finding the UE.
Given Principle 4, an efficient design is needed where the NW should normally
page at the right CE level, or find the right CE level efficiently. The
following two scenarios need to be considered:
**Scenario 1: Mobile devices.**
One example is wearables. For this Mobile scenario, the optimal CE level is
changing potentially quite frequently. Also, given the mobility it is to be
assumed that these devices are normally not in basements and in the
street/malls/houses/etc. so these devices would not need extreme coverage
enhancement as the basement scenario RAN1 is considering, so probably the CE
level would normally range between 0-5dB, probably due to the low cost nature.
The preference is that instead of trying to target a varying coverage which
can change too frequently, and could cause the NW to have to adjust its CE
level (and in the process perform paging in the wrong CE levels) we assume the
worst case (e.g. 5dB), and not use dynamic CE level selection.
**Scenario 2: Quasi Stationary devices**
This scenario is for devices that are most of the time stationary, and
potentially in situations requiring extreme coverage enhancement e.g. 10 dB
for one device and 15 dB for another device. In this case, the required CE is
assumed to not change frequently, although it may change from time to time. In
this case, dynamic CE level is optimal.
The RAN node should not only decide on a paging CE level, but whether paging
CE level is dynamic (UE can change paging CE level while in idle) or static
(UE cannot change paging CE level while in idle). For static paging CE level.
This information is stored in the core network.
#### 6.7.1.2 Design for Static Paging CE level (for scenario 1)
When a UE and eNB/C-BS negotiate static paging CE level when the UE is in RRC
connected, the behaviour is as follows.
**In the UE, in idle mode:**
\- When the UE is in idle mode, the UE reads the paging message at the
resources for the negotiated paging CE level, even when moving to a different
cell.
**In the last connected eNB/C-BS:**
\- The eNB/C-BS/C-BS provides to the MME/C-SGN information on device type
(e.g. low cost), the paging CE level and an indication that the paging CE
level is static. This information can be provided in the S1 UE context release
complete message.
\- The information of device type and paging CE level is transparent to
MME/C-SGN.
**In the MME/C-SGN:**
\- The MME/C-SGN stores the paging information received by the eNB/C-BS.
\- When paging, the MME/C-SGN includes the paging information in all paging
request messages, regardless of whether the receiving eNB/C-BS is the last
eNB/C-BS the UE was connected to.
**In the eNB/C-BS receiving the paging request message with paging
information:**
\- The eNB/C-BS pages the UE using the paging CE level provided in the paging
information.
#### 6.7.1.3 Design for Dynamic CE level (for scenario 2)
If dynamic paging CE level selection is enabled in the UE, then the NW needs
to perform \"blind\" adjustment of paging CE level.
To help with NW blind adjustment, the following behaviour is proposed.
**In the UE, in idle mode:**
\- The UE is allowed to change paging CE levels.
**In the eNB/C-BS the UE was last connected:**
\- The eNB/C-BS provides to the MME/C-SGN information on device type (e.g. low
cost), the paging CE level and an indication that the paging CE level is
dynamic. This information can be provided in the S1 UE context release
complete message.
\- The information of device type and paging CE level is transparent to
MME/C-SGN. However, the MME/C-SGN must know that paging CE level is dynamic,
this is not transparent to MME/C-SGN, since the MME/C-SGN must be aware that
it is possible that more paging retransmission may be required to find the UE
at the right paging CE level
**In the MME/C-SGN** :
\- The MME/C-SGN stores the paging information received by the eNB/C-BS.
\- When paging, the MME/C-SGN includes the paging information in all paging
request messages, regardless of whether the receiving eNB/C-BS is the last
eNB/C-BS the UE was connected to. This is due to the fact, that the
information about the last paging CE level used by a UE is useful to narrow
down the search for the paging CE level that will reach the device. For
example, if the UE was using a paging CE level of 15dB, it is likely that the
UE will need at least 10dB, it is highly unlikely that the UE will not need
any coverage enhancement.
\- In case paging retransmissions are needed, MME/C-SGN also includes paging
retransmission information including how many paging retransmissions have been
sent.
\- The MME/C-SGN should be aware that more paging retransmissions than usual
might be needed if dynamic paging CE level is used and adjust accordingly.
**In the eNB/C-BS receiving paging request message with paging information:**
\- If first paging request, the eNB/C-BS sends paging message at the paging CE
level provided in the paging information.
\- If the paging request is a paging retransmission, the eNB/C-BS adjusts the
paging CE level. (Examples of how the adjustment can be done provided later in
this document)
An example call flow is shown in Figure 6.7.1.3-1. In this example, there are
4 possible paging CE levels (5dB, CE2=10dB, CE3=15dB, 20dB).
Figure 6.7.1.3-1: Example call flow for dynamic paging CE level
### 6.7.2 Impacts on existing nodes and functionality
UE:
\- Support of paging with coverage enhancement, static and/or dynamic.
RAN:
\- Decision on paging coverage enhancement level and paging coverage
enhancement adjustment in case of dynamic CE level.
Core Network:
\- Storage and forward of CE level information.
### 6.7.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.8 Solution 8: Cell based paging area update for efficient paging area
management
### 6.8.1 Description
The main idea of this solution is to provide accurate cell info (e.g. change
of serving cell when the UE is in idle mode) to allow the Core Network to
limit the paging area to only cell(s) that the UE exists actually. The
proposed \"Cell based area update\" procedure is applicable to no/low mobility
UEs based on negotiation between UE and Core Network (e.g. MME). The UE
applying \'Cell based area update\' should report the change of serving cell
to Core Network while UE is in idle mode. In order to reduce the frequent
report of cell change, the UE can report additional cell list depends on
network configuration.
Figure 6.8.1-1: Procedure of Cell based area update determination
1\. An UE indicates \'cell based area update\' capability to MME during the
Attach/TAU procedure.
2\. Then MME can determine the applicability of \'cell based area update
procedure\' based on the subscription info (e.g. stationary).
3\. When the MME accept the \'cell based area update\' procedure of the UE,
the MME can provide optional parameter Max_Cell_N value. The UE is allowed to
report multiple cells \'Paging area\' within the range, to avoid frequent cell
change report.
4\. UE performs cell based area update procedure if the service cell is
changed. When the UE receives \'Max_Cell_N\', UE may derive \'Paging area\'
and the Paging area is comprised of neighbouring cells excluding serving cell.
UE reports this Paging area along with serving cell during cell based area
update procedure. The number of cells for the Paging area should not exceed
\'Max_Cell_N\'. The \'Paging area\' can be overlapped cell(s). The UE is not
required to perform cell based area update procedure if the UE moves within
the previously reported \"Paging area\" and serving cell info.
Then the MME maintains the paging area which is comprised of reported serving
cell and Paging area previously reported by the UE. The MME limits paging to
the paging area for the UE.
Editor\'s note: How to support the cell based area update procedure for low
mobility UE is FFS.
Editor\'s note: The interaction between the cell based area update procedure
and the Tracking Area Update procedure is FFS.
### 6.8.2 Impacts on existing nodes and functionality
Impacts on UE:
> \- Support cell based area update procedure, indicating the capability
> during Attach/TAU
Impacts on CIoT RAN:
> \- No impacts for this issue.
Impacts on MME:
> \- Support cell based area update procedure. Maintaining the paging cell
> list which is provided by the UE and limiting the paging to the cells for
> the UE.
### 6.8.3 Solution Evaluation
> Editor\'s note: Use this clause for evaluation at solution level. Evaluation
> at key issue level is done in a separate clause.
## 6.9 Solution 9: UE provided indication for selection of CIoT-EPC DCN or EPC
DCN
### 6.9.1 Description
The high-level principle of the solution for selection of a CIoT-EPC DCN or
other EPC DCN is shown in the figure below.
Figure 6.9.1-1: Solution for Core network selection based on indication from
UE
The high level principles are as follows:
\- Each device has a Default UE Usage type parameter programmed or configured
into the device.
\- Each device may store a DCN selection assistance parameter (per PLMN) in
the device.
Editor\'s note: It is FFS if the UE Usage type parameter and the DCN selection
assistance parameter is in the USIM or in the device.
\- The subscription of the UE in the HSS contains a \"UE Usage Type\"
parameter (this is the \"UE Usage Type\" parameter for Rel-13 Decor feature).
\- When the UE has not previously attached to the network, it provides the
default UE Usage Type parameter to the network. The network selects the
appropriate dedicated core network (e.g. CIoT-EPC DCN or other EPC DCN) based
on this parameter plus other parameters according to existing DÃ‰COR
specification. A serving control node (e.g. MME) obtains the subscribed UE
Usage Type parameter from the HSS. If the subscribed UE Usage Type is
different from the UE provided UE Usage Type, the MME configuration and
operator policies decides which parameter takes precedence. If the dedicated
CN needs to be changed, the control node initiates a redirection procedure to
the appropriate DCN.
Editor\'s note: It is FFS how the UE Usage type parameter is sent to the
network.
Editor\'s note: It is FFS what information is sent to the network by the UE
for the initial DCN selection, both the information sent in RRC/Radio layer
protocol and the information sent in NAS.
\- The control node in the new DCN serves the UE and provides the UE with the
DCN selection assistance parameter. The UE provides its stored DCN selection
assistance parameter in RAN messaging to the RAN node any time the UE change
to a tracking area outside the TAI list which may potentially result in a
changed serving control node. The next time the UE attaches to the same
network (i.e. same PLMN) it provides this network provided DCN selection
assistance parameter to the network. When UE changes PLMN, it may provide both
the Default UE Usage type (as NAS parameter) and the network provided DCN
selection assistance parameter for that PLMN (as RRC parameter) to the
network.
Editor\'s note: The details and the format of the DCN selection assistance
parameter is FFS.
## 6.10 Solution 10: Support for \"non IP\" PDN types
### 6.10.1 Description
#### 6.10.1.1 General
Some of the CIoT devices may not use normal IP services. For example, there
are already specific protocol optimization for the low power networking
defined, e.g. 6Lo WPAN RFC 4944 [10] RFC 6282 [11] RFC 6775 [12].These
protocol adaptations provided the efficient ways of header compression and
operation optimization to allow efficient transmission of data with small
frame size. Therefore, current header compression mechanism for E-UTRAN is no
longer necessary.
It would be therefore useful to support setting up a non-IP PDN connection/PDP
context to allow such protocol to be used by the CIoT UE towards the non-IP
protocols\' destination node, e.g. the application server(s) or a non-IP
gateway (N-gateway). The C-SGN/P-GW in this case can act as a transparent pass
through, via a direct forwarding interface between itself and the application
server or N-gateway and the CIoT UE can talk to the specific non-IP
destination node directly using appropriate protocols. No IP specific
procedure is required on C-SGN/P-GW.
This solution also works for the existing EPC architecture (e.g. as shown in
clause 6.5 and 6.6) in which case C-SGN is to be replaced by MME, and SGW in
the figures and steps below (not shown for brevity). In contrast to clause
6.1, which assumes data traversal over the air (between UE and CIoT RAT) using
SRB, clauses 6.5 and 6.6 assumes it occurs using DRB.
#### 6.10.1.2 Non IP PDN connection/PDP Context setup
Figure 6.10.1.2-1: Non-IP PDN/PDP Context support
When the UE does not need IP services, it would make use of this procedure to
setup a non-IP PDN connection to send and receive data. When such PDN type is
requested, the P-GW does not carry out IP related operation, e.g. allocating
IP addresses, performing routing for the traffic, etc.
1\. UE sends initial attach with the PDN Type set to \"Non-IP\". The message
format is as defined in TS 24.301 [7].
2\. C-SGN authenticates the UE following normal procedures if necessary. The
C-SGN processes the initial attach and identifies that the UE does not need IP
services. No IP address allocation will be carried out. Instead, the C-SGN
selects a proper destination for the UE, e.g. an application server or a non-
IP gateway (N-gateway), according to the APN and the PDN Type and carries out
the tunnel setup towards the application server or N-gateway for the UE, same
as step 4.
NOTE 1: The application server and N-gateway are out of scope of 3GPP.
> The steps 3 to 5 are executed only when UE is roaming. Else, the PGW
> function(s) denoted by the steps below are assumed to be carried out by
> C-SGN.
3\. The C-SGN processes the initial attach and identifies that the UE does not
need IP services. Therefore, it selects a proper P-GW according to the APN and
the PDN Type. The C-SGN sends the Create Session Request to the P-GW,
indicating that \"Non-IP\" PDN Type is requested.
4\. The P-GW does not run any IP related operation, e.g. IP address
allocation, since the PDN Type indicates \"Non-IP\". Instead, the P-GW
establishes a direct forwarding path, e.g. a point-to-point tunnel, towards
the application server or N-gateway associated with the APN. The direct
forwarding path between C-SGN (non-roaming case) / PGW (roaming case) is on a
per UE per PDN basis.
NOTE 2: The selection of the type of per UE per PDN direct forwarding path
between C-SGN/PGW and N-gateway is C-SGN/PGW configuration based.
NOTE 3: The mechanism used for establishing per UE per PDN direct forwarding
path between C-SGN/PGW and N-gateway is outside of the scope of 3GPP
specifications. Example mechanisms to use can be GRE/PMIPv6, L2TP, GTP, IPv6
etc. Whether to document a specific mechanism(s) can be decided during the
normative specification phase.
NOTE 4: The per UE per PDN tunnel facilitates C-SGN/PGW to remain agnostic of
non-IP destination addressing target (corresponding to a 3GPP UE) format and
addressing scheme.
5 The P-GW responds with a Create Session Response, indicating that the \"Non-
IP\" PDN connection has been setup.
6\. C-SGN uses the normal S1 message to establish the corresponding UE context
on the C-BS/eNB. It also includes the Attach Accept message at NAS layer.
7-8. RRC message to setup the corresponding radio bearers, including the DRB
for the \"Non-IP\" PDN Connection.
> Editor\'s note: If small data delivery mechanism defined in other clauses is
> used, e.g. Data over NAS solution as in clause 6.2, the DRB establishment is
> not necessary. It is FFS how the solutions are combined.
>
> Editor\'s note: When DRB needs to be established, it is FFS whether PDCP is
> not affected since the header compression is not required.
9\. Normal S1 message is used to inform C-SGN of the successful setup of the
radio bearers.
10\. UE sends an Attach Complete to the C-SGN to indicate the successful setup
of the \"Non-IP\" PDN connection.
For uplink non-IP traffic, the UE sends the data to C-SGN over the non-IP PDN
connection, which in turn forwards the data to the application server or
N-gateway over the tunnel established in step 2. In case the UE is roaming,
the C-SGN forwards the non-IP data to P-GW and the P-GW forwards that to the
application server or N-gateway.
For downlink non-IP traffic, the application server or N-gateway locates the
tunnel for the UE and forwards the data to the P-GW or C-SGN over the tunnel.
The P-GW and C-SGN forwards the downlink non-IP traffic to the UE using the
bearer for the non-IP PDN connection.
> NOTE 5: It is possible to use other small data delivery mechanism to deliver
> non-IP traffic between UE and C-SGN, e.g. Data over NAS as specified in
> clause 6.2.
### 6.10.2 Impacts on existing nodes and functionality
Associated procedures for a new PDN type of \"non-IP\" need to be supported by
UE, C-SGN, and PGW (roaming cases only).
The P-GW does not need to perform IP management procedures for the UE on
U-plane, e.g. IP address allocation, routing of the traffic for UE, etc.
### 6.10.3 Solution Evaluation
This solution requires support of new NAS mechanisms to allow set of a new PDN
type of \"non-IP\". However, it gives the 3GPP system the flexibility to
support communicating with multiple kinds of non-IP protocols via different
kinds of point-to-point tunnels (possibly for different UEs as well eg GRE
encapsulation for one UE can be supported along with IPv6 encapsulation for
another UE from the same C-SGN/PGW) depending on the level of tunnelling
protocol support offered by C-SGN/PGW and its peer nodes (AS/N-Gateway). This
solution has no impacts to the behaviour of PDN handling for presently
supported PDN types (IPv4, IPv4, or IPv4IPv6).
## 6.11 Solution 11: SMS over PS without combined attach and default PDN
connection
### 6.11.1 Description
#### 6.11.1.1 General
NOTE: This solution is using terms described in architecture solution
described in clause 6.1.
In terms of SMS support, UE and C-SGN shall support SMS procedures as defined
in TS 23.060 [13] clauses 16.1, 8.1.4 and 12.3. Therefore the UE does not need
to perform combined attach.
#### 6.11.1.2 Attach with EMM context only
Figure 6.11.1.2-1: Attach with EMM context only
In certain scenarios it is desirable that the UEs attach without performing a
bearer setup. For example scenarios with only purpose to send/receive SMS and
therefore no IP address is needed to be allocated. In this case the following
procedure can be followed:
1\. UE sends initial attach with \"No PDN connections required\" in order to
signify that it wants to register without creating a PDN connection. This
follows the TS 23.401 [8] attach procedure with an indicator to indicate UE
wants to attach without immediately establishing a PDN connection. The UE may
initiate a PDN connection set up at a later stage if needed.
2\. The C-SGN processes the initial attach and identifies that the UE does not
want to establish a PDN connection, therefore it does not further follow the
initial attach procedures towards the PGW as defined in TS 23.401 [8].
3\. C-SGN authenticates the UE following normal procedures.
4\. C-SGN establishes UE context indicating to RAN node that only SRB is
needed and without requesting DRBs to be established.
5-6. RRC message establishes only SRB.
7\. S1 message is acknowledged.
8\. C-SGN sends Attach Accept with an indicator to indicate attach without PDN
connection establishment is accepted to UE.
9\. MO and MT SMS procedures following the procedures defined in TS 23.060
[13] are performed while utilising the small data transfer described other
clauses.
### 6.11.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW etc.).
### 6.11.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.12 Solution 12: Solution on simplification of MM and SM procedures
### 6.12.1 Description
#### 6.12.1.1 Simplification of MM and SM messages
To support efficient handling of infrequent small data transmissions for CIoT
devices, the Mobility Management and Session Management messages shall be
simplified (including S1 and Gb case) as follows.
NOTE 1: The simplification of MM and SM messages in this solution aims to
provide some guidance for the further work in CT1.
Table 6.12.1.1-1: Simplification of MM and SM messages (S1)
+----------------+----------------+---------------+----------------+ | Procedures | Messages | Needed or Not | Consideration | +----------------+----------------+---------------+----------------+ | EMM common | | | | | procedures | | | | +----------------+----------------+---------------+----------------+ | GUTI | GUTI | Needed | Essential for | | reallocation | reallocation | | DÃ‰COR HSS | | | command | | initiated | | | | | Dedicated Core | | | | | Network | | | | | Reselection. | +----------------+----------------+---------------+----------------+ | | GUTI | Needed | | | | reallocation | | | | | complete | | | +----------------+----------------+---------------+----------------+ | Authentication | Authentication | Needed | To be further | | | request | | studied by | | | | | SA3. | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | response | | | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | reject | | | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | failure | | | +----------------+----------------+---------------+----------------+ | Security mode | Security mode | Needed | | | control | command | | | +----------------+----------------+---------------+----------------+ | | Security mode | Needed | | | | complete | | | +----------------+----------------+---------------+----------------+ | | Security mode | Needed | | | | reject | | | +----------------+----------------+---------------+----------------+ | | Security | Needed | | | | protected NAS | | | | | message | | | +----------------+----------------+---------------+----------------+ | Identification | Identity | Needed | The NW may | | | request | | request UE to | | | | | provide IMSI | | | | | or IMEI. | +----------------+----------------+---------------+----------------+ | | Identity | Needed | | | | response | | | +----------------+----------------+---------------+----------------+ | EMM | EMM | Needed | The NW may | | information | information | | provide UTC + | | | | | time zone to | | | | | UE. | | | | | | | | | | Time handling | | | | | can be handled | | | | | on application | | | | | level, leaving | | | | | this as not | | | | | needed. | +----------------+----------------+---------------+----------------+ | | EMM status | Needed | UE may report | | | | | error | | | | | conditions. | +----------------+----------------+---------------+----------------+ | EMM specific | | | | | procedures | | | | +----------------+----------------+---------------+----------------+ | Attach | Attach request | Needed | UE attaches to | | | | | NW. | +----------------+----------------+---------------+----------------+ | | Attach accept | Needed | | +----------------+----------------+---------------+----------------+ | | Attach | Needed | | | | complete | | | +----------------+----------------+---------------+----------------+ | | Attach reject | Needed | | +----------------+----------------+---------------+----------------+ | Detach | Detach request | Needed | UE detaches | | | (UE initiated) | | from NW. | +----------------+----------------+---------------+----------------+ | | Detach request | Needed | | | | (NW initiated) | | | +----------------+----------------+---------------+----------------+ | | Detach accept | Needed | | | | (UE initiated) | | | +----------------+----------------+---------------+----------------+ | | Detach accept | Needed | | | | (NW initiated) | | | +----------------+----------------+---------------+----------------+ | Tracking Area | TAU request | Needed | UE updates the | | Update | | | TA. | +----------------+----------------+---------------+----------------+ | | TAU accept | Needed | | +----------------+----------------+---------------+----------------+ | | TAU reject | Needed | | +----------------+----------------+---------------+----------------+ | | TAU complete | Needed | | +----------------+----------------+---------------+----------------+ | EMM connection | | | | | management | | | | | procedures | | | | +----------------+----------------+---------------+----------------+ | Service | Service | Needed | UE triggers SR | | Request | request | | or responds to | | | | | paging. | +----------------+----------------+---------------+----------------+ | | Service reject | Needed | | +----------------+----------------+---------------+----------------+ | | Extended | Not | CSFB is not | | | service | | used. | | | request | | | +----------------+----------------+---------------+----------------+ | Transport of | DL NAS | Needed | To transport | | NAS message | transport | | SMS. | +----------------+----------------+---------------+----------------+ | | UL NAS | Needed | | | | transport | | | +----------------+----------------+---------------+----------------+ | Generic | DL generic NAS | Needed | To carry some | | transport of | transport | | application | | NAS message | | | protocol | | | | | message. | +----------------+----------------+---------------+----------------+ | | UL generic NAS | Needed | | | | transport | | | +----------------+----------------+---------------+----------------+
+------------------+------------------+--------+------------------+ | ESM procedures | | | | +------------------+------------------+--------+------------------+ | Network | Activate default | Needed | To activate the | | initiated ESM | EPS bearer | | default bearer. | | procedures | context request | | | +------------------+------------------+--------+------------------+ | | Activate default | Needed | | | | EPS bearer | | | | | context accept | | | +------------------+------------------+--------+------------------+ | | Activate default | Needed | | | | EPS bearer | | | | | context reject | | | +------------------+------------------+--------+------------------+ | | Activate | Not | Dedicated bearer | | | dedicated EPS | | is not needed. | | | bearer context | | | | | request | | | +------------------+------------------+--------+------------------+ | | Activate | Not | | | | dedicated EPS | | | | | bearer context | | | | | accept | | | +------------------+------------------+--------+------------------+ | | Activate | Not | | | | dedicated EPS | | | | | bearer context | | | | | reject | | | +------------------+------------------+--------+------------------+ | | Modify EPS | Needed | To transport | | | Bearer context | | PCO. Need | | | request | | further | | | | | consideration if | | | | | CIoT can live | | | | | without the info | | | | | transported as | | | | | PCO. | +------------------+------------------+--------+------------------+ | | Modify EPS | Needed | | | | Bearer context | | | | | accept | | | +------------------+------------------+--------+------------------+ | | Modify EPS | Needed | | | | Bearer context | | | | | reject | | | +------------------+------------------+--------+------------------+ | | Deactivate EPS | Not | Only one bearer | | | bearer context | | used so UE will | | | request | | be detached once | | | | | the bearer is | | | | | deactivated. | +------------------+------------------+--------+------------------+ | | Deactivate EPS | Not | | | | bearer context | | | | | accept | | | +------------------+------------------+--------+------------------+ | UE requested ESM | PDN connectivity | Needed | To establish the | | procedures | request | | PDN connection. | +------------------+------------------+--------+------------------+ | | PDN connectivity | Needed | | | | reject | | | +------------------+------------------+--------+------------------+ | | PDN disconnect | Not | Only one PDN | | | request | | connection used | | | | | so UE will be | | | | | detached once | | | | | the PDN | | | | | connection is | | | | | disconnected. | +------------------+------------------+--------+------------------+ | | PDN disconnect | Not | | | | reject | | | +------------------+------------------+--------+------------------+ | | Bearer resource | Not | Dedicated bearer | | | allocation | | not supported. | | | request | | | +------------------+------------------+--------+------------------+ | | Bearer resource | Not | | | | allocation | | | | | reject | | | +------------------+------------------+--------+------------------+ | | Bearer resource | Not | | | | modification | | | | | request | | | +------------------+------------------+--------+------------------+ | | Bearer resource | Not | | | | modification | | | | | reject | | | +------------------+------------------+--------+------------------+ | Miscellaneous | ESM information | Needed | NW may request | | procedures | request | | UE to provide | | | | | APN or PCO. | | | | | | | | | | Need further | | | | | consideration if | | | | | CIoT can live | | | | | without the APN | | | | | and the info | | | | | transported as | | | | | PCO | +------------------+------------------+--------+------------------+ | | ESM information | Needed | | | | response | | | +------------------+------------------+--------+------------------+ | | Notification | Not | SRVCC or IMS not | | | | | supported. | +------------------+------------------+--------+------------------+ | | ESM status | Needed | The error | | | | | conditions | | | | | report. | +------------------+------------------+--------+------------------+
Table 6.12.1.1-2: Simplification of GMM and SM messages (Gb)
+----------------+----------------+---------------+----------------+ | Procedures | Messages | Needed or Not | Consideration | +----------------+----------------+---------------+----------------+ | Attach | Attach request | Needed | UE attaches to | | | | | NW. | +----------------+----------------+---------------+----------------+ | | Attach accept | Needed | | +----------------+----------------+---------------+----------------+ | | Attach | Needed | | | | complete | | | +----------------+----------------+---------------+----------------+ | | Attach reject | Needed | | +----------------+----------------+---------------+----------------+ | Detach | Detach request | Needed | UE detaches | | | (UE initiated) | | from NW. | +----------------+----------------+---------------+----------------+ | | Detach request | Needed | | | | (NW initiated) | | | +----------------+----------------+---------------+----------------+ | | Detach accept | Needed | | | | (UE initiated) | | | +----------------+----------------+---------------+----------------+ | | Detach accept | Needed | | | | (NW initiated) | | | +----------------+----------------+---------------+----------------+ | P-TMSI | P-TMSI | Needed | Essential for | | reallocation | reallocation | | DÃ‰COR HSS | | | command | | initiated | | | | | Dedicated Core | | | | | Network | | | | | Reselection. | +----------------+----------------+---------------+----------------+ | Authentication | Authentication | Needed | To be further | | and ciphering | and ciphering | | studied by | | | request | | SA3. | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | and ciphering | | | | | response | | | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | and Ciphering | | | | | Failure | | | +----------------+----------------+---------------+----------------+ | | Authentication | Needed | | | | and ciphering | | | | | reject | | | +----------------+----------------+---------------+----------------+ | Identity | Identity | Needed | The NW may | | | request | | request UE to | | | | | provide IMSI | | | | | or IMEI. | +----------------+----------------+---------------+----------------+ | | Identity | Needed | | | | response | | | +----------------+----------------+---------------+----------------+ | RAU | Routing area | Needed | UE updates the | | | update request | | RA. | +----------------+----------------+---------------+----------------+ | | Routing area | Needed | | | | update accept | | | +----------------+----------------+---------------+----------------+ | | Routing area | Needed | | | | update | | | | | complete | | | +----------------+----------------+---------------+----------------+ | | Routing area | Needed | | | | update reject | | | +----------------+----------------+---------------+----------------+ | GMM Status | GMM Status | Needed | UE may report | | | | | error | | | | | conditions. | +----------------+----------------+---------------+----------------+ | | GMM | Needed | The NW may | | | information | | provide UTC + | | | | | time zone to | | | | | UE. | | | | | | | | | | Time handling | | | | | can be handled | | | | | on application | | | | | level, leaving | | | | | this as not | | | | | needed. | +----------------+----------------+---------------+----------------+ | Activate PDP | Activate PDP | Needed | To activate | | context | context | | the PDP | | | request | | context. | +----------------+----------------+---------------+----------------+ | | Activate PDP | Needed | | | | context accept | | | +----------------+----------------+---------------+----------------+ | | Activate PDP | Needed | | | | context reject | | | +----------------+----------------+---------------+----------------+ | | Activate | Not | Secondary PDP | | | Secondary PDP | | context is not | | | Context | | needed. | | | Request | | | +----------------+----------------+---------------+----------------+ | | Activate | Not | | | | Secondary PDP | | | | | Context Accept | | | +----------------+----------------+---------------+----------------+ | | Activate | Not | | | | Secondary PDP | | | | | Context Reject | | | +----------------+----------------+---------------+----------------+ | | Request | Not | | | | Secondary PDP | | | | | Context | | | | | Activation | | | +----------------+----------------+---------------+----------------+ | | Request | Not | | | | Secondary PDP | | | | | Context Reject | | | +----------------+----------------+---------------+----------------+ | | Request PDP | Not | No need for NW | | | Context | | to initiate | | | activation | | the PDP | | | | | context | | | | | activation. | +----------------+----------------+---------------+----------------+ | | Request PDP | Not | | | | Context | | | | | activation | | | | | reject | | | +----------------+----------------+---------------+----------------+ | Modify PDP | Modify PDP | Needed | To transport | | context | context | | the PCO. Need | | | request | | further | | | | | consideration | | | | | if CIoT can | | | | | live without | | | | | the info | | | | | transported as | | | | | PCO. | +----------------+----------------+---------------+----------------+ | | Modify PDP | Needed | | | | context accept | | | +----------------+----------------+---------------+----------------+ | | Modify PDP | Needed | | | | context reject | | | +----------------+----------------+---------------+----------------+ | Deactivate PDP | Deactivate PDP | Not | Only one PDP | | context | context | | context used | | | request | | so UE will be | | | | | detached once | | | | | the PDP | | | | | context is | | | | | deactivated. | +----------------+----------------+---------------+----------------+ | | Deactivate PDP | Not | | | | context accept | | | +----------------+----------------+---------------+----------------+ | Notification | Notification | Not | SRVCC or IMS | | | | | not supported. | +----------------+----------------+---------------+----------------+ | SM status | SM status | Needed | The error | | | | | conditions | | | | | report. | +----------------+----------------+---------------+----------------+ | Activate MBMS | Activate MBMS | Not | MBMS not | | | Context | | supported. | | | Request | | | +----------------+----------------+---------------+----------------+ | | Activate MBMS | Not | | | | Context Accept | | | +----------------+----------------+---------------+----------------+ | | Activate MBMS | Not | | | | Context Reject | | | +----------------+----------------+---------------+----------------+ | | Request MBMS | Not | | | | Context | | | | | Activation | | | +----------------+----------------+---------------+----------------+ | | Request MBMS | Not | | | | Context | | | | | Activation | | | | | Reject | | | +----------------+----------------+---------------+----------------+
NOTE 2: The simplification of MM and SM messages may depend on the specific
solution.
NOTE 3: The simplification of security related messages depends on SA WG3
study.
#### 6.12.1.2 Simplification of IEs in MM and SM messages
At least the following operations for MM and SM messages are not needed:
\- Inter-system operation;
\- CS fallback/SRVCC;
\- IMS;
\- Emergency services;
\- ISR;
\- CSG;
\- Location services;
\- ProSe.
NOTE: The exact IEs and exact messages not needed related to these operations
should be determined by CT WG1.
### 6.12.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW etc.).
### 6.12.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.13 Solution 13: RRC FastConnect for Service Request
### 6.13.1 Description
This is a solution to Key issue #2: Efficient support of infrequent small data
transmission for narrowband Cellular IoT.
This solution optimizes the service request procedure by storing the UE\'s AS
context in the MME and in the UE during idle-mode. The AS security context is
re-used when the UE performs service request.
### 6.13.1 Procedures
#### 6.13.1.1 Storing UE\'s AS Context in MME when UE goes idle
Figure 6.13.1.1-1: S1 Release Procedure
0\. UE is in connected mode.
1\. The eNB decides to transition the UE to idle state.
2\. - 3. The eNB sends UE Context Release Request and the MME responds with UE
Context Release Command as specified in TS 23.401 [8] clause 5.3.5.
4\. The eNB sends UE Context Release Complete as specified in TS 23.401 [8],
clause 5.3.5.
5\. RRC Connection Release procedure occurs as specified in current
specifications. However, the UE and the MME stores the NH/NCC related security
context also after going idle.
6\. - 7. As specified in TS 23.401 [8].
#### 6.13.1.2 Service Request Procedure
This procedure is an optimized procedure for setup of DRBs when UE transitions
from idle state to connected state which results in fewer RRC messages than
specified in TS 23.401 [8].
{width="6.024305555555555in" height="4.489583333333333in"}
Figure 6.13.1.2-1: Service Request Procedure
1\. The UE determines that it has small data to send or responds to network
initiated page message. The UE\'s NAS layer requests the AS layer to setup AS
connection and transmit a message. An explicit NAS service request message may
not be provided to the AS layer.
2\. and 3. Random access procedure as in the current specifications.
4\. The UE provide the NAS Service request message as today and in addition
the NCC value.
> The NAS message is as the Service Request message today, i.e. including
> minimal information required by the MME to verify the UE, which is eKSI and
> NAS-MAC and for the fast setup the NCC.
5\. Based on the S-TMSI provided by the UE, the eNB selects MME (based on the
MMEC field of the S-TMSI) and sends Request S1 Context message (S-TMSI) to the
MME. The NAS message is included.
6\. The MME verifies the NAS message by checking the NAS-MAC (no change from
existing procedure). The MME verifies also whether the NCC value is as
expected.
The MME provides the UE context to the eNB including the UE\'s updated AS
security context including the new NH and NCC, any UE capabilities including
the UE security capabilities.
7\. The eNB selects the security algorithm and performs RRC connection setup
which sets up the SRBs, DRBs and the AS security context. This message and
subsequent messages are sent using AS security context.
If the NAS-MAC the verification fails, the MME initiates the authentication
procedure. If the NCC is not as expected the AS security context is generated
as with a normal Service Request and the eNB first performs AS security mode
command before setting up the RRC connection (as specified in TS 23.401 [8])
8\. The UE responds with RRC Connection setup complete. The UE\'s NAS layer
also transitions the UE to EMM-CONNECTED state.
9\. - 12. As specified in TS 23.401 [8] clause 5.3.4.1.
### 6.13.2 Impacts on existing nodes and functionality
**eNB:** Support new optimized Service Request procedure.
**MME:** Storing UE\'s NH/NCC related context during idle mode.
**UE:** Storing NH/NCC related parameters also during idle mode and
updating/re-using it for AS security for next service request.
## 6.14 Solution 14: Setup of CIoT PDN connection with minimum NAS
### 6.14.1 Description
#### 6.14.1.1 General
Many CIoT devices are expected to be ultra-low cost, low complexity and low
bitrate devices. For such devices it is essential that the NAS \"footprint\"
i.e. NAS stack in the device can be kept as small possible in terms of memory
size and with as low complexity as possible. It is also important that
registration/deregistration to the network and establishment/removal of the
PDN connection can be done with a minimum of signalling. Less radio resources
of the low bitrate radio (e.g. Narrow Band radio) and less power is consumed
in the device if the signalling and total transferred number of bits are kept
to a minimum.
The simplification in this proposal is based on the architecture assumption
that it is sufficient with a single PDN connection for a CIoT device. The
proposal is to skip the existing session management signalling from the device
and instead let the serving node in the network establish a PDN connection
(i.e. a \"default PDN Connection\") or PDP context based on default values,
subscription information and other information available in the serving node
when the device attaches to the network. The figure below shows the approach.
#### 6.14.1.2 CIoT PDN connection/PDP Context setup
Figure 6.14.1.2-1: CIoT PDN Connection setup, non-roaming case
Figure 6.14.1.2-2: CIoT PDN Connection setup, roaming case
The CIoT UE with minimum NAS only sends Attach to the network. The UE does not
need to do any session management signalling. The UE uses default session
management parameters e.g. fixed standardized values for the single PDN
connection it will have. The attach procedure progresses in the network as
specified in TS 23.401 [8].
1\. UE sends an initial attach with EPS attach type set to \"CIoT-attach\".
NOTE: Typically a CIoT UE is directed to a CIoT CN which supports the \"min
NAS\" in this solution. If the CN does not support \"min NAS\" (should be an
error case), the Initial Attach will be rejected e.g. based on that mandatory
IEs may be missing. The CIoT UE may then retry using a normal attach if it
supports it.
2\. MME/C-SGN may authenticate the UE using normal procedures if necessary.
3\. Location update and retrieval of subscription information.
4\. The MME/C-SGN processes the initial attach and identifies that a default
PDN connection for CIoT use shall be established. The default PDN connection
is created according to default parameters available in the MME/C-SGN for the
UE. Specific parameter(s) may optionally be indicated in the initial attach
message.
In the roaming case, the MME/C-SGN sends a Create Session Request to the P-GW.
A new \"CIoT-PDN\" indication may be included if the P-GW need to be aware of
that the session creation is generated in the MME/C-SGN and not the UE, and
that the UE uses a single PDN connection only. P-GW shall not create any
dedicated bearers or try to update the \"CIoT-PDN\" marked PDN connection.
5\. In the non-roaming case, the P-GW responds with a Create Session Response.
The P-GW may include a \"CIoT-PDN\" to indicate its support for this
alternative procedure with single PDN connection (e.g. no dedicated bearers
should be initiated).
6\. The MME/C-SGN responds by sending an Attach Accept message to the UE
without any session management message but including a \"CIoT-attach\"
indication to confirm that a PDN connection was created. The UE establishes
the context information for the default PDN connection including initializing
the IP stack using default session management parameters e.g. configured
values or fixed standardized values for the single PDN connection.
7\. The UE responds with an Attach Complete message.
8\. The S1 and the RRC connections are released.
#### 6.14.1.3 CIoT PDN connection/PDP Context setup for \"EMM context only
case\"
Figure 6.14.1.3-1: CIoT PDN Connection setup, non-roaming case
The CIoT UE with minimum NAS stack that has earlier attached to the network
without any default PDN connection (EMM context only) and that now wants to
send data, sends a small NAS message (e.g. a PDN connectivity request) to the
network indicating that the default PDN connection shall be established. The
NAS message contains a minimum set of parameter potentially none, and the
MME/C-SGN establishes a PDN connection with default parameters and other
information available in the network in the same way as if the PDN connection
had been established at Initial Attach. At the response (e.g. PDN connectivity
response) the UE establishes the context information for the default PDN
connection including initializing the IP stack using default session
management parameters e.g. configured values or fixed standardized values for
the single PDN connection.
#### 6.14.1.4 Affected ESM & GSM messages
This solution may potentially eliminate the need for the messages below in the
CIoT device and over the radio. The table in clause 6.12 may be updated at a
conclusion.
\- ESM messages:
\- Activate default EPS bearer context request
\- Activate default EPS bearer context accept
\- Activate default EPS bearer context reject
\- Modify EPS Bearer context request
\- Modify EPS Bearer context accept
\- Modify EPS Bearer context reject
\- ESM information request
\- ESM information response
\- GSM messages:
\- Activate PDP context request
\- Activate PDP context accept
\- Activate PDP context reject
\- Modify PDP context request
\- Modify PDP context accept
\- Modify PDP context reject
For CIoT most ESM and GSM can be handled by the serving node (MME/SGSN/C-SGN)
on behalf of the UE/CIoT device (since CIoT devices only use one PDN
connection/PDP context). Hence the procedures may exist in the network, but
would not be needed as NAS messages and communicated over the radio interface.
For example the modify procedures from PGW to SGW/MME may still be needed
potentially for updating QoS characteristics, MBR, SLA, and APN changes.
### 6.14.2 Impacts on existing nodes
**UE:** The UE uses a reduced NAS without any session management messages.
Default session management parameters are used for the single PDN connection.
**MME/C-SGN:** The MME/C-SGN generates a default PDN connection for the CIoT
device including sending session management messages to the PGW (if needed).
May need to handle or generate PCO parameters.
**PGW:** Should refrain from sending any network initiated bearer related
messages for a PDN connection that is marked as \"CIoT-PDN\".
### 6.14.3 Solution Evaluation
The total numbers of bits communicated over radio by a CIoT device at attach
and for maintaining the default PDN connection is reduced. The power
consumption and complexity of the NAS stack of the CIoT device can be reduced.
The used radio resources are reduced.
## 6.15 Solution 15: Support for \"non IP\" small data by UDP/IP encapsulation
over SGi
### 6.15.1 Description
#### 6.15.1.1 General
This solution addresses key issue #6.
Some of the CIoT devices may not use normal IP services. For example, there
are already specific protocol optimization for the low power networking
defined, e.g. 6LoWPAN RFC 4944 [10] RFC 6282 [11] RFC 6775 [12]. These
protocol adaptations provided the efficient ways of header compression and
operation optimization to allow efficient transmission of data with small
frame size. Therefore, current header compression mechanism for E-UTRAN is no
longer necessary.
The solution describes an efficient way to pass non-IP data over RAN and CN to
a PDN i.e. between a CIoT device and an AS. When there is no requirement to
use an IP stack in the CIoT device, the IP headers can be completely removed
over the radio. Between the PGW and the Application Server the transmission of
data uses a point-to-point UDP/IP tunnel similar to the standardized SGi
interface. This ensures an efficient transmission of large volumes of IoT data
for storage in the AS (IoT cloud). For operators using gateway or proxy on SGi
for the CIoT data, it is also a standardized way of communicating with such
gateways and proxies.
The solution does not use an IP stack in the UE.
#### 6.15.1.2 Non IP PDN connection setup
Figure 6.15.1.2-1: Non-IP small data UDP/IP encapsulation over SGi
When the UE does not need IP services, it would make use of this procedure to
setup a PDN connection to send and receive non-IP data. When Non-IP is
requested, the P-GW or corresponding function in a C-SGN/MME allocates an IP
address for the UE. The IP address is used to identify the UE in the UDP/IP
encapsulation over the SGi interface. The PGW or corresponding function in a
C-SGN/MME does not convey the IP address to the UE, i.e. it omits the
stateless address autoconfiguration.
1\. UE sends initial attach with an indication set to \"Non-IP\". The
indication may be a specific attach type, a PDN Type for \"Non-IP\" data, or
it may be some other parameter in the attach message e.g. a new IE.
2\. C-SGN/MME authenticates the UE following normal procedures if necessary.
The C-SGN/MME processes the initial attach and identifies that the UE uses
non-IP data. IP address allocation will be carried out, for use in the UDP/IP
encapsulation on the SGI interface. Since a UE using a non-IP data has no
means to address different Application Servers, the C-SGN/MME selects a proper
destination for the UE, e.g. the Application Server, according to the APN and
will forward any data from UE to that specific Application Server. The non-IP
data sent between the UE and the Application Server is encapsulated in UDP/IP
packets. The IP address allocated for the UE and the IP address of the AS
configured in the non-IP APN will be used for setting the addresses in the
UDP/IP header. Other IP related operation same as step 4.
> The steps 3 to 5 are executed within a single combined node when separate
> P-GW is not used.
3\. The C-SGN/MME processes the initial attach and identifies that the UE uses
non-IP data. Therefore, it selects a proper P-GW according to the APN. The
C-SGN/MME/SGW sends the Create Session Request to the P-GW, indicating that
\"Non-IP\" is requested.
4\. The P-GW runs the IP related operation for \"non-IP\", e.g. IP address
allocation, but no SLAAC (e.g. no Router Advertisements sent to the UE),
establishes a PDN context for modified switching where UDP/IP encapsulation
are used over the SGi interface and non-IP data are used over the S5/S8. In
addition, any existing or future non-standardized tunnelling may be used by
the P-GW on top of the UDP/IP encapsulated data on the SGi interface e.g. VPN
secure tunnelling.
The \"non-IP\" service provided by the 3GPP network for CIoT reduces the
overhead passed over the low bitrate radio interface. The interface towards
the Application Service is still a \"normal\" IP interface to enable the use
of all mainstream IP technology at the Application Server side and to minimize
the impact on the 3GPP system. Since a CIoT UE using \"non-IP\" has no means
to address different Application Servers, it will be a point-to-point tunnel
between the UE and the Application Server. The destination IP address of the
Application Server is defined in the APN.
5 The P-GW responds with a Create Session Response, indicating that the \"Non-
IP\" PDN connection has been setup. The IP address or IPv6 Prefix does not
need to be included in the Create Session Response message.
> NOTE 1: Inclusion of the assigned IPv4 address and/or assigned IPv6 prefix
> in Create Session Response is mandatory per present specifications. However,
> it may be a stage 3 decision whether the IP address/Prefix should still be
> passed back to the C-SGN/MME and ignored in the receiving node just to avoid
> protocol impacts.
6\. C-SGN/MME sends the Attach Accept to the UE.
7\. UE sends an Attach Complete to the C-SGN/MME to indicate the successful
attach including setup of a PDN connection for non-IP Small Data.
For uplink non-IP traffic, the UE sends the non-IP data to C-SGN/MME/SGW over
the bearer, which in turn forwards the data to the Application Server
encapsulated in UDP/IP. In case the UE is roaming or a separate P-GW is used,
the C-SGN/MME/SGW forwards the non-IP data to P-GW and the P-GW forwards that
to the Application Server encapsulated in UDP/IP.
For downlink non-IP traffic, the Application Server sends non-IP data for the
UE encapsulated in UDP/IP to the P-GW or C-SGN. The P-GW or C-SGN removes the
UDP/IP header and forwards the downlink non-IP traffic to the UE using the
UE\'s non-IP bearer. The P-GW/C-GSN triggers the IP header removal based on
context information for the PDN connection.
> For the P-GW/C-SGN side a 3GPP known UDP port may be used for the non-IP
> data. For the Application Server side the IP address and UDP port of the
> Application Server is configured per APN. UDP port(s) to route the packet to
> appropriate application server(s) is pre-configured at P-GW/C-SGN (e.g.
> based on business agreement between operator and application server
> provider).
>
> NOTE 2: It is possible to use other small data delivery mechanism to deliver
> non-IP traffic between UE and C-SGN/MME/SGW, e.g. Data over NAS as specified
> in clause 6.2.
### 6.15.2 Impacts on existing nodes
**P-GW:** For PDN connection marked as \"Non-IP\", the PGW does not use the
stateless address autoconfiguration or DHCP and UDP/IP headers are
removed/added before forwarding to/from the UE. IP address and UDP Port for
the application server is stored per APN.
**C-SGN/MME/eNB:** Indicate not to use header compression for the UE (if DRBs
are used).
**UE:** Sends a \"Non-IP\" indication when the UE wants to use a PDN
connection for \"non-IP\" small data.
### 6.15.3 Solution Evaluation
The solution passes non-IP data efficiently between a CIoT device and the AS
applying UDP/IP encapsulation on the SGI interface. The solution can be
applied for CIoT devices that communicate with a single AS, for example when
the IoT data is always pushed to an IoT Cloud or a specific Gateway or Proxy.
The solution proposes a standardized way for sending non-IP data over the SGi
interface. Each device has an IP address allocated, hence differentiation and
identification of devices in the AS can be done using mainstream IP
technology. Since IPv4 has been deprecated by 3GPP for MTC, it is assumed that
IPv6 is used for CIoT hence no problem with IP address depletion related to
the solution. If IPv4 still would be required, other solutions with
conservative IPv4 address usage can be considered.
## 6.16 Solution 16: Optimised SMS over PS without combined attach and default
PDN connection
### 6.16.1 Description
#### 6.16.1.1 General
This solution address\'s Key Issue 9 as described in clause 5.9.
NOTE: This solution is using terms described in architecture solution
described in clause 6.1.
#### 6.16.1.2 Attach with MO SMS PDU
Figure 6.16.1.2-1: Attach with MO SMS PDU
In certain scenarios it is desirable that the UEs attach without performing a
bearer setup and include the SMS PDU. In this case the following procedure can
be followed:
1\. UE sends initial attach with \"MO SMS only\" in order to signify that it
wants to register without creating a PDN connection and includes a Mobile
originated SMS PDU as specified in TS 23.040 [9]. This follows the TS 23.401
[8] attach procedure with an extra indicator \"MO SMS only\" in order to
indicate that the UE wants to attach without immediately establishing a PDN
connection and includes an SMS PDU.
2\. The C-SGN processes the initial attach and identifies that the UE does not
want to establish a PDN connection and wants to send a MO SMS, therefore it
does not further follow the initial attach procedures towards the PGW as
defined in TS 23.401 [8].
3\. C-SGN authenticates the UE following normal procedures.
4\. The C-CSGN performs a Location Update to the HSS including the reason for
Location Update e.g. MO SMS only. If the UE is authorised to perform MO-SMS
then the HSS will either send the subscription information to the C-SGSN or
send back a Location Update acknowledgement with an indication that UE is
authorised for MO SMS. The HSS also includes the SMS-C address.
5 C-SGN establishes UE context indicating to RAN node that only SRB is needed
and without requesting DRBs to be established.
6-7 RRC message establishes only SRB.
8 S1 message is acknowledged.
9 C-SGN sends Attach Reject with \"indication indicating SMS PDU was received
and accept\" to UE.
10 .The C-SGN sends the SMS PDU using existing procedures to the SMS-C as
defined in TS 23.060 [13] with the following modification:
i) the SMS-C address that was provided in step 4 is used in the Forward Short
Message.
#### 6.16.1.3 Attach with MT SMS PDU
Figure 6.161.3-1: Attach for MT SMS single message to deliver
In certain scenarios it is desirable that the UEs attach without performing a
bearer setup to determine if there are any MT SM to be delivered. In this case
the following procedure can be followed:
1\. UE sends initial attach with \"MT SMS only\" in order to signify that it
wants to register without creating a PDN connection. This follows the TS
23.401 [8] attach procedure with an extra indicator \"MT SMS only\" in order
to indicate that the UE wants to attach without immediately establishing a PDN
connection and wants any pending SM to be delivered.
2\. The C-SGN processes the initial attach and identifies that the UE does not
want to establish a PDN connection and wants to receive MT SMS, therefore it
does not further follow the initial attach procedures towards the PGW as
defined in TS 23.401 [8].
3\. C-SGN authenticates the UE following normal procedures
4\. The C-CSGN performs a Location Update to the HSS including the reason for
Location Update e.g. MT SMS only. If the UE is authorised to perform M-SMS
then the HSS will inform the C-SGNs if there are or no pending messages to be
delivered. If there are no messages then step 12 will be performed.
5\. C-SGN establishes UE context indicating to RAN node that only SRB is
needed and without requesting DRBs to be established
6-7 RRC message establishes only SRB
8\. S1 message is acknowledged
9\. The HSS alerts the Short Message Centre that the UE is available per
procedures defined in 3GPP TS 23.060 [13].
10 .The SMS-C sends the SMS PDU in a Forward Short Message as defined in TS
23.060 [13] to the C-SGN.
11 When the C-CSGN receives the SMS PDU from the SMS-C, the C-SGN sends Attach
Reject including the SMS PDU as defined in TS 23.040 [9] to UE.
No pending messages
12 The C-SGN sends an Attach Reject including an indication that there are no
messages to send.
#### 6.16.1.4 Attach with MT SMS PDU -- more messages to send
Figure 6.16.1.4-1: Attach for MT SMS multiple message to deliver
In certain scenarios it is desirable that the UEs attach without performing a
bearer setup to determine if there are any MT SM to be delivered. In this case
the following procedure can be followed:
1\. UE sends initial attach with \"MT SMS only\" in order to signify that it
wants to register without creating a PDN connection. This follows the TS
23.401 [8] attach procedure with an extra indicator \"MT SMS only\" in order
to indicate that the UE wants to attach without immediately establishing a PDN
connection and wants an pending SM to be delivered. The UE may initiate a PDN
connection set up at a later stage if needed.
2\. The C-SGN processes the initial attach and identifies that the UE does not
want to establish a PDN connection and wants to receive MT SMS, therefore it
does not further follow the initial attach procedures towards the PGW as
defined in TS 23.401 [8].
3\. C-SGN authenticates the UE following normal procedures.
4\. The C-CSGN performs a Location Update to the HSS including the reason for
Location Update e.g. MT SMS only. The HSS will inform the C-SGNs that there
are N messages to be sent to the UE.
5\. C-SGN establishes UE context indicating to RAN node that only SRB is
needed and without requesting DRBs to be established.
6-7. RRC message establishes only SRB.
8\. S1 message is acknowledged.
9\. The HSS alerts the Short Message Centre that the UE is available per
procedures defined in 3GPP 29.002 [x].
10a. The SMS-C sends the 1^st^ SMS PDU to the C-SGN.
10b. The SMS-C sends the 2^nd^ SMS PDU to the C-SGN.
10n. The SMS-C sends the n^th^ SMS PDU to the C-SGN.
NOTE: The SM could come from numerous different SMS-C\'s.
11 When the C-CSGN receives the 1^st^ SMS PDU from the SMS-C, the C-SGN sends
Attach Accept including the SMS PDU as defined in 3GPP TS 23.040 [9] to UE and
an indication of the number of outstanding SM to be sent to the UE, if
available.
12 MO and MT SMS procedures following the procedures defined in TS 23.060 [13]
are performed while utilising the small data transfer described other clauses.
13 When the UE has received the number of outstanding SM as identified in step
11 from the C-SGSN, the UE shall send a Detach to the C-SGSN.
#### 6.16.1.5 Attach with MO/MT SMS PDU
The procedures in clauses 6.x.1.2 - 6.x.1.4 can be combined. With a combined
procedures the UE will signal to the network in the Attach that UE wants MO/MT
SMS.
### 6.16.2 Impacts on existing nodes and functionality
Impacts on UE:
\- SMS PDU\'s as defined in 3GPP TS 23.040 [9] are sent and received in NAS
Attach procedure messages.
\- SMS-C address is not sent to the C-SGN in RP-Data layer (RP & CP Layers are
removed).
Impacts on C-SGN comparing with MME:
\- SMS PDU\'s as defined in 3GPP TS 23.040 [9] are sent and received in NAS
Attach procedure messages.
\- SMS-C address needs to be taken from subscriber profile and inserted into
outgoing Forward_Short_message as defined in 3GPP TS 23.060 [13].
\- Notifications if SMS PUDs have been successfully received by the C-SGN and
if there are pending messages waiting.
Impacts on HSS:
\- Requires the HSS to store on a per subscriber profile and send to C-SGN:
a) SMS-C address; and
b) Number of pending messages waiting.
### 6.16.3 Solution Evaluation
Benefits:
\- No establishment of DRBs and no resource reservation over the radio
interface;
\- Reduced signalling procedures on the radio interface.
Drawbacks:
-
This solution piggybacks SMS PDU as defined in TS 23.040 [9] onto the initial
NAS uplink message that is extended and it uses downlink NAS message for
carrying downlink SMS PDU as defined in TS 23.040 [9]. The efforts for setting
up the user plane, i.e. related RRC messages and AS security setup, can be
avoided. Battery life of the UE is significantly increased.
## 6.17 Solution 17: Optimized SMS relay for CIoT
### 6.17.1 Description
#### 6.17.1.1 Background
The solution relates to key issue 9 for \"Support of Optimised SMS\".
Many CIoT devices are expected to be ultra-low cost, low complexity and low
bitrate devices. For such devices it is essential that the software
\"footprint\", e.g. protocol stacks in the device, can be kept as small
possible in terms of memory size and with as low complexity as possible to
reduce cost and processing requirements. It is also essential that information
communicated has a minimized overhead, since every bit sent over the radio
interface is costly in terms of power for the device and in terms of radio
resources for the network operator.
The current SMS standard uses protocols that are quite \"talkative\" over the
radio (e.g. the RP/CP protocols) and with quite excessive number of layers in
the protocol stack. The two figures below are extracted from the TS 24.011
[14] which specifies the SMS radio protocols. In the second figure below it is
shown that four messages over the radio between the EMM entity in the MME and
the EMM entity in the UE are required to convey one MT SMS.
* * *
                          MME                                           MS
SMâ€‘AL  
SMâ€‘TL  
SMâ€‘RL SMR \ SMR  
CMâ€‘sublayer SMC \ SMC  
EMMâ€‘sublayer
* * *
Figure 6.17.1.1-1: TS 24.011 [14] Figure 2.1e, Protocol hierarchy for packet-
switched service in S1 mode
The CMâ€‘sublayer, in terms of the Short Message Service Support, provides
services to the Short Message Relay Layer.
On the MSâ€‘side the Short Message Relay Layer provides services to the Short
Message Transfer Layer. The Short Message Relay Layer is the upper layer on
the network side (MSC or SGSN or MME), and the SMâ€‘user information elements
are mapped to TCAP/MAP.
The peer protocol between two SMC entities is denoted SMâ€‘CP, and between two
SMR entities, SMâ€‘RP.
LTE Mobile Terminated Messaging on CM-sublayer in S1 mode if packet-switched
service is used.
Figure 6.17.1.1-2: TS 24.011, Figure, Annex A: Arrow diagram A10
#### 6.17.1.2 Optimized SMS relay
##### 6.17.1.2.1 Optimized protocol stack
The optimized SMS relay replaces two of the layers (the SM-RL and the CM-
sublayer) with one layer Short Message Internet-of-Things Relay Layer (SM-IRL)
that uses a new small data delivery (\"SmallData-sublayer\" or \"SD-
sublayer\") that may be specified as part of this study. This would both
minimize the signalling over the radio and reduce the complexity and footprint
in the CIoT device.
The SM-IRL layer implements the service primitives needed by the SM transfer
later (SM-TL) in the UE/CIoT device and in the MME/C-SGN. Any service
primitives not relevant for CIoT devices compared to legacy SMS may be
omitted.
Editor\'s note: Appropriate naming of the new layer and the new protocol is
left for stage 3 to decide.
|  |  |  | MME or C-SGN |  |  |  | UE or CIoT device |   
---|---|---|---|---|---|---|---|---|---  
|  |  |  |  |  |  |  |  |   
SMâ€‘AL |  |  |  |  |  |  |  |  |   
SMâ€‘TL |  |  |  |  |  |  |  |  |   
SMâ€‘IRL |  |  |  | SMR |  |  |  | SMR |   
SmallDataâ€‘sublayer |  |  |  |  |  |  |  |  |   
Figure 6.17.1.2.1-1: Protocol hierarchy for optimized SMS relay for CIoT
SM-IRL = Short Message Internet-of-Things Relay Layer.
Editor\'s note: The details of the new SM-IRL layer, the SM-IRP protocol and
mapping to the underlying sublayer is stage 3 work. What sublayer may be used
(e.g. what SD-sublayer and/or EMM-sublayer) is dependent on SA WG2 decisions.
##### 6.17.1.2.2 Optimized MT SMS
In the two figures below only two SD-DATA messages are used between the SD-
sublayer in the MME/C-SGN and the SD-sublayer in the UE/CIoT Device to convey
one MT SMS. Optionally is only one SD-DATA message used if it is considered
sufficient that the lower layers used by the SD-sublayer (e.g. S1AP+RRC) can
acknowledge a successful data transfer to the UE.
Figure 6.17.1.2.2-1: CIoT MT SMS on the SD-sublayer
SD = Small Data
IRP = Internet-of-Things Relay Protocol
The Small Data sublayer (SD-sublayer) is aimed to use a small data transfer
based on proposed new solutions for small data delivery described in this
study TR 23.720 that might eventually be specified.
Editor\'s note: If MSISDN-less MT SMS is needed, what was done for Device
Triggering can be used.
##### 6.17.1.2.3 Optimized MO SMS
Figure 6.17.1.2.3-1: CIoT MO SMS on the SD-sublayer
NOTE: If a Service Request Procedure is required for MO SMS depends on the
small data sublayer. Also it may not be needed if a RRC connection already
exists.
### 6.17.2 Impacts on existing nodes
**UE:** The UE/CIoT device uses a simplified short message relay layer and
relay protocol for CIoT. The Small Data Sublayer implements service primitives
for relaying SMSes. The application in the UE/CIoT device, the SM application
layer (SM-AL) and SM transfer layer (SM-TL) in the UE uses the new SM-IRL
relay layer to relay SMSes to/from the network.
**MME/C-SGN:** The MME/C-SGN uses a simplified short message relay layer and
relay protocol for CIoT. The Small Data Sublayer implements service primitives
for relaying SMSes. SMSes conveyed by the MME/C-SGN, e.g. using the SGd and
SGs interfaces, uses the new SM-IRL relay layer to relay SMSes to/from UE/CIoT
devices.
### 6.17.3 Solution Evaluation
The solution provides legacy SMS services to constrained CIoT devices, taking
advantage of new small data delivery specified for CIoT, therefore enabling
implementation with a minimum signalling (e.g. combining the legacy RP and CP
layers) over the radio and a smaller footprint for the protocol stack on the
device.
## 6.18 Solution 18: User plane based solution with AS information stored in
RAN
### 6.18.1 Description
#### 6.18.1.1 General
The main contributors to the signalling overhead are procedures used in
current S1-based EPS architecture required for UE state transition, i.e. at
transition between the Idle and the Connected state. This solution is a merge
of solutions 6.5 and 6.6.
{width="6.528472222222222in" height="4.565277777777778in"}
Figure 6.18.1.1-1: Legacy connection setup
Figure 6.18.1.1-1 illustrates current S1/EPS architecture based procedures
required to establish and tear down a connection in order for the UE to be
able to transfer/receive user plane, i.e. procedures applicable at UE
Idle/Connected state transition. As can be seen there is a significant
signalling overhead on the radio/Uu, S1AP interface. In order to reduce the
signalling overhead and the associated processing load in the network required
by the procedures illustrated above a solution is proposed that is based on
the re-use of information from the previous RRC connection for the subsequent
RRC connection setup.
It is proposed that this functionality is supported on an eNB basis, i.e. the
resumption of the previously suspended connection is limited to the cells
configured on the eNB where that connection was previously suspended. However,
this solution can also be introduced and supported for UEs having transactions
over multiple eNBs by introducing it over a cluster of eNBs that support UE
Context transfer between the eNBs via the X2 interface, see TS 36.300 using
handover preparation procedure see clause 20.2.2.1.
The signalling overhead reduction is realized by introducing two new
procedures \'RRC Suspend\' and \'RRC Resume\' that are described in clauses
6.18.1.3 and 6.18.1.4 and the introduction of a modified UE behaviour in new
CIoT Idle state where relevant AS information is always stored at transition
to Idle, triggered by a RRC Suspend procedure, and re-used for a subsequent
connection setup by a new type of UE.
In the context of this solution, the UE stores the relevant AS information at
transition into ECM-Idle triggered by a RRC Suspend procedure.
NOTE: This solution is based on the assumption that in the new CIoT Idle state
the UE retains the AS context from the previous connection.
Throughout this solution the RRC-Idle state refers to the new CIoT RRC-Idle
state.
#### 6.18.1.2 Initial connection and AS context setup
UE needs to perform an initial connection setup to establish the NAS
signalling connection and provide the UE and network with an initial AS
context, as shown in figure 6.18.1.1-1. NAS layer is aware that subsequently
no Service Requests are required as long as a valid AS context in the network
is found by the AS layer. If for any reason the AS layer context is missing in
the network while the UE attempts a resume procedure, the resume procedure
fails and the AS layer triggers a NAS Layer service request to establish a new
initial AS layer context.
#### 6.18.1.3 RRC Suspend procedure
The RRC Suspend procedure is used at transition from RRC-Connected to RRC--
IDLE state and causes the UE to retain the Context in RRC-IDLE mode:
\- the eNodeB and the UE store RRC connection related information, e.g. Access
Stratum Security Context, bearer related information (incl. RoHC state
information) and L2/1 parameters when applicable. The eNB provides the UE with
an identifier, referred as \'Resume ID\' e.g. based on the eNB ID, used to
address the relevant information stored in the eNB.
NOTE: The design of the \'Resume ID\' will be decided by TSG RAN.
\- Relevant network nodes store S1-MME UE association and S1-U bearer context
related information. This basically means that the S1AP UE Contexts are stored
and kept in the eNB and the MME. Additionally, the eNB stores and keeps the
S1-U tunnel addresses. The latter reduces the processing load on the eNB
required for establishment of S1-U bearers.
\- UE\'s mobility behaviour is the same as in LTE RRC-Idle state, e.g. the UE
applies normal or extended Idle mode DRX parameters, performs cell re-
selection etc.
\- At transition to RRC-IDLE, the EMM layer enters ECM-IDLE state.
NOTE: Whether new messages and a new procedure is needed to suspend a RRC
Connection will be investigated and decided by RAN WG2.
Figure 6.18.1.3-1: Suspension of a RRC Connection
1\. Network decides to suspend the RRC Connection.
2\. eNB indicates to MME with a new S1AP message that the UE\'s RRC connection
is suspended. MME and eNB store the S1AP association and the related UE
Contexts. MME enters ECM state ECM- IDLE. MME stores the DL TEIDs associated
with the UE and eNodeB.
3\. The MME sends a Release Access Bearers Request (Abnormal Release of Radio
Link Indication or \'new cause\') message to the S-GW that requests the
release of all S1-U bearers for the UE. SGW considers UE being in Idle state.
> NOTE: Whether Release Access Bearers Request message contains existing cause
> value or a new cause value will be decided by CT4.
4\. SGW provides a response to the step 3.
5\. MME Acks step 2.
6\. MME enters \'ECM-IDLE\' state.
7\. eNB suspends the RRC Connection towards the UE. An identifier that is used
at subsequent resumption of that suspended RRC Connection can be provided. The
UE and the eNB store the related Context information, i.e. RRC configuration,
bearer configuration (including RoHC state information), Access Stratum
Security Context and L2/1 parameters when applicable. This message also
contains the security algorithm configuration and the Next Hop Chaining
Counter (NCC) associated with the K_eNB that is to be used at subsequent
resumption.
8\. UE RRC layer enters RRC-IDLE state where it store the relevant AS
information (see step 7) and the UE NAS layer enters ECM-IDLE state where it
is aware that a NAS signalling connection is available.
#### 6.18.1.4 RRC Resume procedure
At the transition from RRC- IDLE to RRC-CONNECTED, previously stored
information in the UE as well as in the eNodeB is utilized to resume the RRC
connection.
UE provides the previously received \'Resume ID\' to be used by the eNB to
access the stored information required to resume the RRC Connection.
Furthermore it provides an Authentication Token used to securely identify the
UE.
Relevant network nodes re-store/re-use S1-MME UE S1AP association and S1-U
bearer context related information.
NOTE: Whether new messages and a new procedure are needed to conduct the
resumption of previously suspended RRC Connection will be investigated and
decided by RAN WG2.
Given that NAS layer is aware that initial connection was setup, see sub-
clause 6.18.1.2 no NAS Service Request will be issued and thus there is no
need for RRC Connection Setup Complete message that is used to carry that
message, see clause 6.5.1.4.
The reduction of signalling overhead is from 9 messages on the radio interface
for legacy connection setup as shown in figure 6.18.1.1-1 down to 4 messages
when using RRC Resume procedure as shown in the figure 6.18.1.4-1 below. The
removed messages are:
\- RRC Connection Setup Complete.
\- RRC Security Mode Command.
\- RRC Security Mode Complete.
\- RRC Connection Reconfiguration.
\- RRC Connection Reconfiguration Complete.
The procedure is illustrated in figure 6.18.1.4-1 below.
Figure 6.18.1.4-1: Resumption of a previously suspended RRC connection
> Steps 1 and 2 are following the legacy procedure when UE accesses the
> network from RRC Idle state.
4\. In msg3, a new RRC Connection Resume Request message, the UE includes its
Resume Id, Authentication Token, Bearer Ind, Establishment Cause) is included.
eNB uses Resume Id to associate the UE with the previously stored UE Context.
Additionally, msg3 can also contain User Plane multiplexed by MAC as per
existing specifications where resumed stored security context is used to
encrypt the User Plane.
> NOTE: The Authentication Token can be based on the existing means to
> authenticate a UE at RRC re-establishment as specified in 3GPP TS 36.331. It
> is assumed that the final means for UE authentication at RRC Resume will be
> decided by RAN WG2 with assistance of SA3 if needed.
5\. In message 4, designated here as RRC Connection Resume Complete the
network indicates which DRBs are resumed, furthermore it includes the Resume
Id and if applicable updated L2/1 parameters.
6\. UE and eNB resume the stored security context.
7\. eNB notifies the MME about UE state change in a new S1AP message
designated here as S1-AP UE Context Active. ECM in the MME enters the ECM-
CONNECTED state. MME identifies that the UE returns at the eNodeB for which
MME has stored information about allocated DL TEIDs for the UE.
8\. The MME sends a Modify Bearer Request message (eNodeB address, S1 TEID(s)
(DL) for the accepted EPS bearers, Delay Downlink Packet Notification Request,
RAT Type) per PDN connection to the Serving GW. If the Serving GW supports
Modify Access Bearers Request procedure and if there is no need for the
Serving GW to send the signalling to the PGW, the MME may send Modify Access
Bearers Request (eNodeB address(es) and TEIDs for downlink user plane for the
accepted EPS bearers, Delay Downlink Packet Notification Request) per UE to
the Serving GW to optimize the signalling. The Serving GW is now able to
transmit downlink data towards the UE.SGW considers UE being in Connected
state.
9\. SGW provides as response to step 7.
10\. MME acks step 7.
11\. Alternatively to transmission of message 4, if message 3 included User
Plane and indication that all User Plane is transmitted, the eNB can suspend
the RRC connection and implicitly indicate that the User Plane was
successfully received.
Figure 6.18.1.4-2 shows a MT connection when the RRC connection was previously
suspended, i.e. UE is in RRC-IDLE as described in clause 6.18.1.3 making
subsequently use of the RRC Resume procedure.
Figure 6.18.1.4-2: Resumption of a previously suspended RRC connection for the
MT case
1\. UE is in \'RRC-IDLE\' and \'ECM-IDLE\'.
2\. SGW receives Data for a UE in Idle.
3\. SGW sends Downlink Data Notification to the MME.
4\. MME sends S1Paging message to the eNB(s). Note: MME may at first attempt
page the UE using the existing S1AP association, i.e. S1AP association that
was suspended as described in clause 6.x.1.3.
5\. eNB pages the UE over the radio interface.
6\. A UE RRC layer forwards the relevant information to the EMM layer. EMM
layer triggers the RRC layer to attempt the RRC Resume procedure as described
in clause 6.x.1.4.
7\. UE sends Random Access (legacy).
8\. eNB replies to RA (legacy).
9\. In msg3, designated here as RRC Connection Resume Request, the UE includes
its Resume Id, Authentication Token, Bearer Ind, Establishment Cause). eNB
uses Resume Id to associate the UE with the previously stored UE Context.
10\. In msg 4, designated here as RRC Connection Resume Complete the network
indicates which DRBs are resumed, furthermore it includes the Resume Id and if
applicable updated L2/1 parameters.
11\. UE and eNB resume the stored security context.
12\. eNB notifies the MME about UE state change in a new S1AP message
designated here as S1-AP UE Context Active indicating \'page response\'. ECM
in the MME enters the ECM-CONNECTED state. MME identifies that the UE returns
at the eNodeB for which MME has stored information about allocated DL TEIDs
for the UE.
13\. The MME sends a Modify Bearer Request message (eNodeB address, S1 TEID(s)
(DL) for the accepted EPS bearers, Delay Downlink Packet Notification Request,
RAT Type) per PDN connection to the Serving GW. If the Serving GW supports
Modify Access Bearers Request procedure and if there is no need for the
Serving GW to send the signalling to the PGW, the MME may send Modify Access
Bearers Request (eNodeB address(es) and TEIDs for downlink user plane for the
accepted EPS bearers, Delay Downlink Packet Notification Request) per UE to
the Serving GW to optimize the signalling. The Serving GW is now able to
transmit downlink data towards the UE.SGW considers UE being in Connected
state.
14\. SGW provides as response to step 12.
15\. MME acks step 11.
#### 6.18.1.5 Resumption when AS information is not available in the eNB
If a UE attempts to resume the RRC connection and the AS information is not
available in the eNB, the UE shall fall back to Connection setup procedure and
send a NAS Service Request message. In this sub-clause it is assumed that the
AS information is located in eNB_OLD.
Figure 6.18.1.5-1: Resumption attempt with no AS info available in the eNB
> 4\. In case that the AS info needed to resume the connection is not
> available to the eNB_New, the eNB_New includes the SRB indication in msg4.
>
> 5 UE interprets the SRB indication as a request to send NAS Service Request.
> UE sends RRC Connection Setup Complete including the NAS Services Request.
>
> 6\. NAS Services Request is forwarded from eNB_NEW to the MME (see figure
> 6.18.1.1-1).
>
> 7\. MME sends Initial Context Setup Request to eNB_NEW (see figure
> 6.18.1.1-1).
>
> 8\. eNB begins the procedure to configure the radio interface. Only the
> initial message is shown, the complete sequence is shown in see figure
> 6.18.1.1-1.
>
> 9\. MME cancels the context stored in the eNB_OLD.
>
> 10\. eNB_OLD deletes the AS info and acks step 10.
>
> The remaining steps are the same as shown in see figure 6.18.1.1-1.
#### 6.18.1.6 MM procedure using user plane based solution
In this clause it is shown how the user plane based solution is applied for
Tracking Area Update.
Figure 6.18.1.6-1
4\. In msg3, a new RRC Connection Resume Request message, the UE includes its
Resume Id, Authentication Token, Establishment Cause, NAS PDU) is included.
eNB uses Resume Id to associate the UE with the previously stored UE Context.
Additionally, msg3 can also contain NAS PDU that contains TAU REQUEST
multiplexed by MAC as per existing specifications where resumed stored
security context is used to encrypt the User Plane. The lack of the \'Bearer
Ind\' indicates to the eNB that only SRB is needed. In case there is not
sufficient space to include TAU REQUEST, a flag indicates a subsequent message
that contains TAU REQUEST in step 5.
5\. In message 4, designated here as RRC Connection Resume Complete the
network completes the contention resolution.
6\. Step 5 performed if TAU REQUEST does not fit into message 3.
7\. eNB forwards TAU REQUEST in S1AP Initial UE Message to the MME.
8\. MME sends TAU ACCEPT in S1AP Downlink NAS Transport message.
9\. eNB sends TAU ACCEPT in DL Information Transfer to the UE.
10\. eNB suspends the RRC connection.
NOTE: The Above procedure assumes the eNB has a valid context for the UE. If
the UE has no valid context similar concepts as for the case of data transfer
related procedure apply (i.e. the eNB triggers a normal TAU and the MME
cancels the context in the Old eNB)
#### 6.18.1.7 Further aspects
If the UE performs inter-MME or inter-RAT Idle mode mobility the new MME/SGSN
will perform context request from the old MME in which case the old MME
cancels the UE Context in the old eNB using the information stored in the S1AP
association. A SGW restart is assumed to be handled in a legacy way and a MME
that is notified that a node failure occurred will cancel the UE Context in
the eNB.
In case where the S1AP association is kept over a longer time period, the MME
can use UE Context Modification procedure to refresh the radio interface
ciphering keys as specified in TS 23.401 [8] clause 5.3.10.4.1 where the
details are captured in TS 33.401 [15], see clause 7.2.9.
The proposed procedures are independent of the S-TMSI handling.
### 6.18.2 Impacts on existing nodes and functionality
\- MME: support for the new procedures on S1AP, i.e. the relevant S1AP
procedures triggered by the \'RRC Suspend\' and \'RRC Resume\' procedures on
the radio interface. Support for storing of the UE Context information when
the RRC connection is suspended and the S1AP association is kept.
\- eNB: support for storing of UE Context with relevant radio interface
parameters as well as S1AP association related parameters when UE has moved
into the new CIoT RRC-Idle state by means of new \'RRC Suspend\' procedure.
Support for new procedures to suspend/resume the connection with the UE
between the eNB and the UE as well as between the eNB and the MME.
\- UE: support for storing of relevant AS information when UE has entered into
the new CIoT RRC- IDLE state by means of new \'RRC Suspend\' procedure.
Support for procedures needed to suspend and resume the RRC connection.
### 6.18.3 Solution Evaluation
This solution reduces the signalling overhead required for UE state transition
from the new CIoT Idle to Connected in order to have a user plane transaction
with the network and back to Idle state on the radio interface from 10 down to
5 messages and on the S1AP from 6 down to 4 messages.
The solution impacts the AS and the NAS layer.
If the User Plane fits into message 3 then the reduction is from 10 down to 4
messages including the acknowledgement of the User Plane reception.
Finally it reduces the signalling overhead and thus also improves UE battery
lifetime for UEs with mobility pattern typically limited to cells configured
by an eNB as well as when UEs are served by cells configured on multiple eNBs
where support for UE Context transfer (including ROHC context) between eNBs
(see TS 36.300) is possible.
## 6.19 Solution 19: Header compression at C-SGN
### 6.19.1 Description
#### 6.19.1.1 General
In this option, the ROHC framework defined in RFC 4995 is realized in the
\"Data over NAS Convergence Protocol\" in C-SGN as shown in figure 6.19.1.1-1.
This solution is applicable to the solution 2 as defined in clause 6.2.
Figure 6.19.1.1-1. Protocol stack for header compression in C-SGN
Since the ROHC channels are unidirectional, there will be a separate channel
for uplink, and another for downlink. In the operation, these two channels
will be bound by UE and C-SGN to support the feedback.
For uplink data, the \"Data over NAS Convergence Protocol\" at UE will
implement the ROHC compressor state machine, and the \"Data over NAS
Convergence Protocol\" at C-SGN will implement the ROHC decompressor state
machine. In the reverse direction, for downlink data, C-SGN has the compressor
and UE has the decompressor.
The \"Data over NAS Convergence Protocol\" needs to support at least the
following ROHC packet types defined in the RFC 4995:
\- Initialization and Refresh (IR) packet type;
\- IR dynamic part (IR-DYN) packet type;
\- Feedback (ACK, NACK, STATIC-NACK) packet type;
\- Compressed (CO) packet type.
Depending on the profiles supported, there may be more packet types to be
implemented, e.g. IR-CR defined in RFC4996 for replicating contexts.
In addition, the \"Data over NAS Convergence Protocol\" needs to support at
least the ROHC profiles as defined in TS 36.323 [16].
#### 6.19.1.2 Procedures
##### 6.19.1.2.1 Procedure for initial context setup
Figure 6.19.1.2.1-1. Initializing the header compression channels in C-SGN
0\. RRC connection establishment procedure.
1\. The UE performs Attach Procedure. When the Data Type indicates IP, the UE
shall include the Header Compression Configuration to initialize the uplink
ROHC channel. The Header Compression Configuration includes the information as
listed in section 6.x.3 that is necessary for the ROHC channel setup.
Optionally, the Header Compression Configuration may also include ROHC context
setup parameters, if the UE already has the application traffic information,
e.g. the target server IP address.
When the Data Type indicates non-IP or SMS, the UE shall not include the
Header Compression Configuration.
NOTE: The definition of the Header Compression Configuration is to be defined
in stage 3. When ROHC context setup parameters are included when the UE
supports the optimization feature. If the C-SGN acknowledges it in step 6, UE
can send compressed data directly. Otherwise, UE will fall back to normal ROHC
procedure and use the IR packets to setup the ROHC context before sending
compressed packets. Since the UE does not have IP address allocated at this
time, the ROHC context parameter does not include the source address and the
C-SGN needs to fill it in after step 4.
2\. C-SGN performs any necessary security procedures.
3 Location update and retrieval of subscription information.
C-SGN processes the Attach Request message and based on parameters provided
decide the need for establishing IP Bearer Service.
4\. When Data Type = IP, PDN type indicates type of IP address (i.e. IPv4,
IPv6) to be allocated. C-SGN allocates an IP address based on the PDN type in
Attach Request. If the optional ROHC context setup parameters are included,
C-SGN applies the IP address to the uplink ROHC context.
5\. In roaming case only, depending on Data Type, P-GW sends Create Session
response (or new control message) to the C-SGN. For IP data case, it contains
allocated IP address.
6\. C-SGN responds by sending an Attach Accept message to the UE. For Data
Type= IP, allocated IP address is sent to the UE.
When the Data Type indicated IP, C-SGN shall respond with the corresponding
Header Compression Configuration to set up the downlink ROHC channel. C-SGN
may bind the uplink channel and the downlink channel for the UE to support
feedback.
If the UE has included ROHC context setup parameters in Header Compression
Configuration in step 1, the C-SGN may also include the corresponding downlink
ROHC context setup parameters if it knows the traffic, e.g. source IP address
of the downlink traffic.
7\. The UE responds with an Attach Complete message.
8 The RRC connection is released.
If the ROHC context is not setup during the Attach procedure, the UE and the
network need to setup the ROHC context with ROHC IR packet.
After the ROHC channel initialization and context setup, the header
compression is ready to use.
##### 6.19.1.2.2 Procedure for packet delivery with header compression
If the context has already been setup for the uplink channel and downlink
channel in step 1 and 6 of the Attach procedure in figure 6.19.1.2.1-1, the UE
and C-SGN can start to use those for delivering the data. The context will
reside in the UE and C-SGN and will not be removed even when UE goes to IDLE
mode.
If the context is not yet setup, the UE will start with the ROHC IR packet to
establish the context before using the compressed format for sending the data.
Figure 6.19.1.2.2-1. Context setup and data delivery with header compression
for MO data
0\. The UE performs Attach Procedure as shown in figure 6.19.1.2.1-1.
1\. If the UE has already setup the ROHC context, it would make use of that to
perform the IP header compression of the data to send. If not, the UE will
make use of the ROHC IR packet with the data embedded to setup the ROHC with
C-SGN for uplink.
The ROHC frame is carried in the NAS PDU sent to the CIoT-BS. The UE can also
indicate whether acknowledgment/response to the Uplink data is expected or
not.
2\. The CIoT RAN forwards NAS PDU and the indication on whether ack/response
is expected to the C-SGN in the initial UE message.
3\. If ROHC IR packet is received, the C-SGN setup the uplink ROHC context for
the UE accordingly. If the ROHC CO packet is received, C-SGN reconstruct the
IP headers according to the stored ROHC context.
4\. If no acknowledgment/response to the Uplink data is expected (based on the
subscriber information and the Ack/Rsp indication from the UE), the C-SGN
immediately releases the connection. Otherwise, when a (response) small data
packet arrives in the P-GW, sends it to the C-SGN.
5\. If the C-SGN has already set up corresponding ROHC context for the
downlink channel, it would compress the packet accordingly. If no context is
setup for the downlink, the C-SGN uses the ROHC IR packet to deliver the data
and set up the ROHC context with the UE.
The C-SGN encrypts the NAS message with the downlink small data packet and
sends the downlink NAS transport message to the CIoT-RAN.
6\. CIoT-BS sends the Downlink Information Transfer including the NAS message
to UE and also releases the RRC connection after the timer monitoring the
connection expires.
If ROHC IR packet is received, the UE setup the downlink ROHC context
accordingly. If the ROHC CO packet is received, the UE reconstruct the IP
headers according to the stored ROHC context.
NOTE: The UE or C-SGN may switch back to IR packet format when it needs to
update the context.
When there is no feedback sent to the UE, it is expected that the
implementation may use the IR packet format for several packets before switch
to CO format. Comparing to the CO format, the overhead of IR format is a few
octets of the CID, Type, Profile, and CRC fields.
The MT data delivery would be similar to the above. For the downlink data
packet (MT small data), the C-SGN will similarly send the first packet using
the IR format, indicating the context ID and profile, if the context is not
set up during the attach procedure.
### 6.19.3 Impacts on existing nodes
According to RFC 4995, the following parameters must be negotiated and
configured when the ROHC channel is setup:
\- LARGE_CIDS: (Boolean) to indicate if small CID (0-1 octets) or large CID
(1-2 octets) should be used to indicate the context. This value is not
configured by upper layers, but rather it is inferred from the configured
value of MAX_CID according to the following rule:
If MAX_CID > 15 then LARGE_CIDS = TRUE else LARGE_CIDS = FALSE.
\- MAX_CID: (Integer) to indicate the highest CID number to be used by
compressor;
\- PROFILES: (Set of integers) to indicate the supported profile;
\- FEEDBACK_FOR: reference to a ROHC channel for feedback support in reverse
direction;
\- MRRU: (Integer) to indicate the maximum reconstructed reception unit in
octets that the decompressor is expected to reassemble from segments.
Therefore, these parameters needs to be passed within the S-NAS signalling
when the UE attaches to the C-SGN, i.e. when the S-NAS signalling connection
is established.
In addition, to have effective compression, the S-NAS layer need to provide
certain additional information to the \"Data over NAS Convergence Protocol\",
e.g. the packet length.
When the UE supports the optimized header compression setup, it may also
include additional ROHC context setup parameters in the Header Compression
Configuration in the Attach Request message. If C-SGN supports such
optimization, it shall respond with an acknowledgement, and the corresponding
downlink context setup parameters in the response.
### 6.19.4 Solution Evaluation
Editor\'s Note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
# 7 Overall Evaluation
Editor\'s note: This clause will be further updated to provide evaluation of
different solutions for each key issue.
For key issue 2 \"Efficient support of infrequent small data transmission for
narrowband Cellular IoT\" the solutions can be grouped as follows:
Group 1: Solutions with no data radio bearer/S1-U establishment (small data
over control plane):
\- Solution 2: Infrequent small data transmission using pre-established NAS
security
\- Solution 3: Connectionless small data transmission with immediate return to
idle
\- Solution 4/4A: Non-IP small data transmission via MTC-IWF
Group 2: Solutions with data radio bearer/S1-U establishment:
\- Solution 5: UE state transition signalling reduction
\- Solution 6: User plane based solution with enhanced ECM-CONNECTED state
\- Solution 13: RRC Fast Connect for Service Request
There are other solutions, e.g. solution 10, complementing these solutions,
but may be used with either group.
# 8 Conclusions
For NB-IOT following conclusions apply:
\- Solution 2 in clause 6.2 is considered as the basis for the normative work
for support of infrequent small data transmission (for IP data, non-IP data
and SMS). Support of solution 2 is mandatory for both the UE and the network.
\- Solution 18 in clause 6.18 is considered as the basis for the normative
work for support of infrequent small data transmission (for IP data and SMS).
Support of solution 18 is optional for both the UE and the network. Solution
18 can adopt other solutions (e.g. solution 10, solution 15) to provide
support for non-IP data.
\- Key Issue#3 (Efficient support of tracking devices using small data
transmission for Cellular IoT) is deferred to Rel-14.
\- Key Issue #4 (Support of efficient Paging area management for Cellular IoT)
is deferred to Rel-14. Solution to paging coverage enhancements defined
outside of this study may partially address the key issue for CE UEs.
Assumption is that the TA code for NB-IoT cell will be different to the TA
code of the other cells in the eNB.
\- Key Issue #5 (Selection of CIoT-EPC Dedicated Core Network) will be
addressed during the normative work. This does not preclude that study results
from the eDECOR study may be used.
\- Key Issue #6 (Support for non-IP Data) is applicable to both Solution 2 and
Solution 18, and will be addressed during the normative work.
\- Key Issue #7 (Support for SMS), specifically support for Attach without PDN
connectivity will be addressed during the normative work. Support for SMS
transfer without combined attach will also be addressed during the normative
work but for Rel-13 this feature will be available to the UEs that only
supports NB-IoT.
\- Key issue #8 (Control of small data misuse) will be addressed during the
normative work.
\- For Key issue #9 (Optimized Support of SMS transmission) it is recommended
to have CT WG1 take lead on it and provide this functionality in Rel-13.
\- Key issue #10 (Authorization of use of Coverage Enhancement) is deferred to
Rel-14.
\- For Key issue #11 (Header compression enhancements for CIOT) solution in
clause 6.19 is recommended to be used as a basis for the normative work for
solution 2.
Above CIoT optimizations, except for support for SMS transfer without combined
attach, can also apply to E-UTRAN devices (e.g. eMTC UEs).
#