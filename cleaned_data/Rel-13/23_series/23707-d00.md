# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
An operator may choose to deploy one (or more) dedicated core networks within
a PLMN with each core network dedicated for specific type(s) of subscriber.
The present document studies and evaluates architectural enhancements required
to support dedicated core networks. The specific dedicated core network that
serves a UE is selected based on subscription information and operator
configuration, without requiring the UEs to be modified.
The technical report covers both assignment of dedicated core network nodes
and maintaining the association during mobility. Roaming and network sharing
aspects of dedicated core network, and impacts on procedures such as CSFB,
SRVCC and rSRVCC will be studied.
Dedicated core networks may be in the PS domain or CS domain or both.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] Void.
[3] 3GPP TR 21 912 (V3.1.0): \"Example 2, using fixed text\".
[4] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[5] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[6] 3GPP TS 23.272: \"Circuit Switched (CS) fallback in Evolved Packet System
(EPS); Stage 2\".
[7] 3GPP TS 23.236: \"Intra-domain connection of Radio Access Network (RAN)
nodes to multiple Core Network (CN) nodes\".
[8] 3GPP TS 23.251: \"Network Sharing; Architecture and functional
description\".
[9] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Assumptions and Architecture Requirements
## 4.1 General
Editor\'s note: This clause contains general definition if needed.
## 4.2 Assumptions
**\- A dedicated core network** is assumed to serve only specific
subscriber(s). A dedicated core network comprises one or more MME/SGSN and it
may comprise one or more SGW/PGW. When the PGW is part of a dedicated core
network, the PCRF may be shared or specific for the dedicated core network.
\- If the network deploys dedicated core network selection based on both LAPI
indication and subscription information (i.e. DECOR feature), then dedicated
core network selection based on subscription information by MME/SGSN overrides
selection based the LAPI-indication by RAN.
\- Different dedicated core networks may provide different characteristics and
functions.
## 4.3 Architecture Requirements
The purpose with a dedicated core network may be to provide specific
characteristics and/or functions or isolate specific UEs or subscribers, e.g.
M2M subscribers, subscribers belonging to a specific enterprise or separate
administrative domain, etc. The main architecture enhancements are to route
and maintain UEs in their respective dedicated core network (for UEs with
assigned DCN).
The following architecture requirements shall be met by all proposed
solutions:
\- There shall be no impacts to UE.
\- Support of dedicated core networks shall not require the use of additional
PLMN-IDs, e.g. to separate different dedicated core networks.
\- It shall be possible to deploy multiple dedicated core-networks sharing the
same RAN.
\- The architecture should support dedicated core networks for specific UEs or
subscribers.
\- Networks deploying dedicated core networks may have a common core network
(CCN), which may be assigned to UEs when a dedicated core network (DCN) is not
available. A common core network might have limitations in terms of
characteristics and functionality.
\- A UE connected to a DCN is supported within that specific DCN and the CCN
when needed.
\- The architecture should support scenarios where the dedicated core-network
is only deployed in a part of the PLMN e.g. only one RAT or in a part of the
PLMN area. Each dedicated MME/SGSN supports the DECOR related functionality
over its entire service area. Heterogeneous (partial) support of a dedicated
core network may, depending on operator deployment and configuration, result
in service with different characteristics or functionality when the UE is
camping outside service area or RAT of the dedicated core network.
\- Mechanisms shall be supported to enable the redirection of affected
attaching/attached UEs to appropriate dedicated core network, e.g. when a
dedicated core network is commissioned in a PLMN.
\- If the dedicated core network is not deployed to serve a particular RAT or
service area of PLMN, the UE in that RAT or service area may be served by
MME/SGSN from a common core network and may continue to be served by a PGW
from the dedicated core network.
# 5 Elementary Functions
Editor\'s note: This clause contains the detail of each solution alternative.
## 5.1 Functions Common to both PS and CS Domain
Editor\'s note: This clause contains the common functions between PS and CS
domains.
### 5.1.1 Identification of association with dedicated CN nodes
#### 5.1.1.0 Description
Some identification is needed, which enables the serving network to determine
which of its CNs shall serve the UE. It is assumed that the identification is
a parameter of the subscriber data.
#### 5.1.1.1 Solutions
##### 5.1.1.1.1 New Subscription Information
A new optional subscription information parameter (\"UE Usage Type\") stored
in the HSS is used by the serving network to select which of its CNs shall
serve the UE. The operator configures which of his CNs serves which UE Usage
Type(s). Multiple UE Usage Types can be served by the same CN. The HSS
provides the \"UE Usage Type\" value in the subscription information of the UE
to the MME/SGSN/MSC. The serving network chooses the dedicated CN based on the
operator configured (UE Usage Type to CN) mapping, other locally configured
operator\'s policies and the UE related context information available at the
serving network, e.g. the information about roaming.
\"UE Usage Type\" values are standardised, e.g. for \"general MTC\" or \"delay
tolerant MTC\", or are operator specific.
The \"UE Usage Type\" is associated with the UE (describing its usage
characteristic), i.e. there is only one UE Usage Type\" per UE subscription.
#### 5.1.1.2 Evaluations and Conclusions
### 5.1.2 Considerations for Roaming
In case of roaming, if the VPLMN does not support dedicated core networks or
its configuration shows no CN for the specific \"UE Usage Type\" value in the
subscription information, then the serving MME/SGSN/MSC in the VPLMN ignores
the \"UE Usage Type\" value in the subscription information and serves the UE
by the default CN. To a VPLMN the HSS provides only standardized UE Usage
Types.
In case of roaming, if the HPLMN of the visiting UE does not support dedicated
core networks, i.e. doesn\'t provide the UE Usage Type, the serving
MME/SGSN/MSC may select the CN that serves the UE using operator specific
policies based on other subscription or UE provided information, i.e. Low
Access Priority Indication.
### 5.1.3 Considerations for Network Sharing
Shared networks can deploy already multiple CNs, one per sharing operator. For
DECOR each sharing operator configures which of his CNs serves which UE
type(s). Any functions for redirecting or maintaining UEs in specific CNs are
configured to work within the CNs of the same operator. There is no specific
DECOR functionality needed to support dedicated CNs also in network sharing
scenarios.
## 5.2 PS Domain Specific Functions
Editor\'s note: This clause contains the specific function of PS domain.
### 5.2.1 Assignment of dedicated MME/SGSN
#### 5.2.1.1 Assignment during Attach and TAU/RAU
##### 5.2.1.1.1 E-UTRAN Attach and TAU
##### 5.2.1.1.1.1 Scenario Description {#scenario-description .H6}
For initial MME/SGSN assignment during Attach the following scenarios are
covered:
\- Attach with IMSI.
\- Attach and TAU with GUTI from old MME/SGSN supporting DECOR.
\- Attach and TAU with GUTI from old MME/SGSN not supporting or deploying
DECOR (e.g. an inter PLMN change with GUTI).
##### 5.2.1.1.1.2 Solutions {#solutions-1 .H6}
##### 5.2.1.1.1.2.1 Solution 1: Redirection after Update Location Procedure
{#solution-1-redirection-after-update-location-procedure .H6}
MMEs that belong to different dedicated core networks have different group
identities (MMEGIs). Each MME has configuration about the association of MMEGI
to dedicated core network. Similarly for SGSNs, Null-NRIs (see TS 23.236 [7])
are used for the identification of SGSN pools that are associated with
different dedicated core networks. DNS can be used to get the MMEGI of
dedicated core network\'s MME pool instead of this configuration.
The attach and TAU/RAU procedure is modified as follows to ensure that the UE
is served by the appropriate core network:
\- If the eNodeB/RNC directs the initial NAS message an MME/SGSN which is not
dedicated to serve the subscriber type of the UE, the MME/SGSN after
determining the dedicated network for the UE, forwards the initial NAS message
of the UE along with the MMEGI/Null-NRI corresponding to core network to the
RAN to re-route the NAS message to the MME/SGSN pool dedicated to serve the
particular subscriber type of the UE. RAN then reroutes the UE\'s NAS Message
to an MME/SGSN dedicated to serve the subscriber type of the UE.
This procedure is shown below and is used by both the Attach and TAU/RAU
procedures.
Figure 5.2.1.1.1.2.1-1: Reroute NAS Message Procedure
1\. When the old MME/SGSN decides to reroute the NAS message to another
dedicated core network, the old MME/SGSN sends a Reroute NAS Message Request
(NAS Msg, MMEGI/Null-NRI, GUTI, GUMMEI) to the eNodeB/RNC which had forwarded
the NAS message. The MMEGI (for E-UTRAN) or Null-NRI (for GPRS) corresponds to
the MME/SGSNs that belong to the selected dedicated core network. The MME/SGSN
is configured with a mapping of MMEGI/Null-NRI to dedicated core network type
for the TAI of the UE. DNS can be used to get the MMEGI of dedicated core
network\'s MME pool instead of this configuration. In case of E-UTRAN, the MME
may also decide to include GUTI, which is used by the new MME to request
context information from the old MME. The MME may provide GUMMEI taken from
the previously received additional GUTI, if the MMEGI of the target core
network matches the MMEGI part of the additional GUTI in attach message.
2\. The eNodeB/RNC based on the MMEGI/Null-NRI and/or GUMMEI included in the
Reroute NAS message request selects a new MME/SGSN corresponding to the
MMEGI/Null-NRI and/or GUMMEI using existing NNSF functionality. The eNodeB/RNC
sends the Initial UE message to the selected MME/SGSN. The initial UE message
includes the NAS message and also optionally GUTI, if GUTI was provided in the
previous message.
NOTE: The above procedure is used by both this solution and \"Re-routing
before NAS security setup\" solution. In the latter solution, GUTI parameter
is not included in steps 1 and 2.
The following describes the E-UTRAN attach and TAU procedure for this
alternative. Only differences from the procedure in TS 23.401 [4] are
highlighted below.
Figure 5.2.1.1.1.2.1-2: E-UTRAN Attach and TAU procedure with Reroute after
Update Location procedure
1-2: E-UTRAN Attach or TAU procedure is performed as specified in TS 23.401
[4].
3\. If the UE identifies itself with GUTI and the MME has changed, the
identity response message (for Attach) or Context Response (for TAU) contains
the UE Usage Type information, if available.
If dedicated core networks are supported and the new MME supports UEs of the
UE Usage Type value contained in the Identification Response/Context Response
message, the new MME sends a Reroute Command to the eNodeB described in step
4a, and continues the E-UTRAN Attach or TAU procedure from step 4b to 4c as
specified in TS 23.401 [4].
If dedicated core networks are supported and no UE Usage Type value contained
in the Identification Response/Context Response message, the new MME continues
the E-UTRAN Attach or TAU procedure from Step 5 in this figure.
4a-c. If dedicated core networks are supported and the new MME does not serve
UEs of the UE Usage Type value contained in the Identification/Context
Response message, the new MME sends a Reroute Command (Attach/TAU Request
message, MMEGI, GUMMEI) to the eNodeB. If the MMEGI received from the MME and
the MMEGI in the received GUMMEI matches, the GUMMEI is additionally taken
into account for the MME reselection. The eNodeB shall reselect an MME of the
indicated type as specified in figure 5.2.1.1.1.2.1-1 and forward the
Attach/TAU Request Message to the selected MME. The selected MME performs the
Attach/TAU procedure starting from step 2. The additional GUTI in the
Attach/TAU Request message allows the dedicated MME to find any already
existing UE context stored in the dedicated MME if included and to skip the
unnecessary interaction with the HSS.
NOTE: The additional GUTI in the Attach/TAU request message can be used when
the UE which had been registered in an MME performed RA update in the
GERAN/UTRAN area, and then it performs Attach/TAU procedure in the area served
by the same MME, with an assumption that this MME has not yet released the
GUTI for the UE.
If dedicated core networks are supported but the old MME does not provide the
UE Usage Type value with the new MME by the Identification/Context Response
message, these steps are skipped.
5-8. Steps as specified in TS 23.401 [4].
9\. The HSS acknowledges the Update Location message by sending an Update
Location Ack (IMSI, Subscription data, UE Usage Type) message to the new MME.
If this is a TAU procedure and if the P-GW needs to be changed, the new MME
rejects TAU Request with cause code \"Implicit Detach\". The UE performs re-
attach and gets redirected to the dedicated MME which selects a dedicated
P-GW.
10\. If dedicated core networks are supported and the new MME does not serve
UEs of the UE Usage Type value contained in the subscription information, the
MME assigns a new GUTI to the UE. The MME determines the MMEGI corresponding
to the dedicated core network of the UE and sends a Reroute Command
(Attach/TAU Request message, MMEGI, GUTI, GUMMEI) to the eNodeB. This step
only occurs in Attach or TAU procedure without P-GW change.
11\. The eNodeB shall reselect an MME as specified in figure 5.2.1.1.1.2.1-1
and forward the Attach/TAU Request Message to the selected MME.
12.The MME uses the GUTI received along with the Attach/TAU Request message to
request context from previous MME using the Identity/Context Request message.
The Identity request message also includes GUTI.
13\. The MME uses the GUTI provided in the Identity/Context Request message to
locate the context of the UE. The MME does not verify the integrity of the
Attach/TAU Request message. The previous MME provides context information in
the Identity response message, as specified in TS 23.401 [4] which contains
security information to enable the MME of the dedicated core network
communicate using the existing NAS encryption and integrity protection.
14\. E-UTRAN Attach/TAU procedure proceeds from Step 4 onwards as specified in
TS 23.401 [4].
##### 5.2.1.1.1.2.2 Solution 2: Re-routing before NAS security setup
{#solution-2-re-routing-before-nas-security-setup .H6}
By extending the initial authentication signaling between the MME and the HSS,
the impacts to the attach procedure and the total system could be kept
limited. The Authentication Information Request/Answer messages would be
amended with one new parameter, \"UE Usage Type\".
Figure 5.2.1.1.1.2.2-1: Re-routing before NAS security setup
Figure 5.2.1.1.1.2.2-2: Initial assignment of DECOR at E-UTRAN Attach/TAU
4\. If the UE identifies itself with GUTI and the MME has changed, the
Identification Response message (for Attach) or Context Response (for TAU)
contains the UE Usage Type information, if available.
If dedicated core networks are supported and the new MME supports UEs of the
UE Usage Type value contained in the Identification Response/Context Response
message, the new MME continues the E-UTRAN Attach or TAU procedure as
specified in TS 23.401 [4].
If dedicated core networks are supported and no UE Usage Type value contained
in the Identification Response/Context Response message, the new MME continues
the E-UTRAN Attach or TAU procedure from Step 7 in this figure. Steps 5 and 6
apply for attach flow only, as specified in TS 23.401 [4].
7\. If dedicated core networks are supported by MME and the new MME does not
support UEs of the UE Usage Type value contained in the Identification
Response/Context Response message or no UE Usage Type was included in the
Identification/Context Response message, the MME shall retrieve a UE Usage
Type from HSS. The MME uses the AIR/AIA messages for the retrieval if also
authentication information is needed, or other new messages (UE Usage Type
Request, UE Usage Type Answer) if no authentication is information is required
(e.g. already received by the MME in the Context Response). The corresponding
MME UE Usage Type(s) are included if the AIR message is used, except for
roaming UEs, where the MME applies specific handling.
8\. The HSS first retrieves the subscribed UE Usage type for the UE to be
authenticated. HSS compares the CN subscribed UE Usage Type with the UE Usage
Type provided in step 7. If they differ, the AIR procedure in the HSS is
stopped and the AIA message is returned to the MME together with the
subscribed UE Usage type, but without any security vectors. If they are the
same or no UE Usage Type was provided by the MME, the AIR procedure in the HSS
executes as normal. The subscribed UE Usage type is returned to the MME in the
AIA message.
9\. The MME evaluates the response from the HSS and initiates a re-routing if
the UE Usage Type of the UE is not supported by the MME. The re-routing
parameters to the eNodeB are assembled by MME, e.g. using the UE Usage Type
provided by the HSS.
10\. Re-route of the NAS Request is sent by the MME to the eNodeB with re-
route parameters included. The MMEGI is used by the eNodeB to select an MME in
the Dedicated CN.
Editor\'s note: Details are for further study. The NAS re-route procedure
specified for solution \"Redirection after update location procedure\" may
apply (the redirection without GUTI case).
Depending on operator policies, a decision to re-route or not to re-route may
also be taken based on available information after step 2, 4 or 6.
At inter-PLMN context transfer specific handling applies, which may involve
selection of UE Usage Type based on the visited network policy, roaming
agreements and based on different subscription parameters including the HPLMN
UE Usage Type.
##### 5.2.1.1.1.2.3 Solution 3: \"null-NRI\"/\"null-MMEGI\" based redirection
during Attach and TAU {#solution-3-null-nrinull-mmegi-based-redirection-
during-attach-and-tau .H6}
The overall signalling flow of attach or TAU for \"null-MMEGI\" based
redirection is illustrated in Figure 5.2.1.1.1.2.3-1. Only the steps that are
needed to explain the specifics of the overall approach are shown.
When multiple dedicated CNs are deployed, the initial allocation of a UE by
the eNodeB when coming into an area that supports DECOR may be to an
arbitrary/random or a default MME. That MME determines that a specific UE
should be served by another dedicated CN, e.g. during attach by a UE that was
never allocated to one of the dedicated CNs or due to change of conditions
that determine the association with a specific dedicated CN, like changed
subscription information. The MME determines the dedicated CN based on what
gets concluded for that functionality.
When the MME receives the Attach or TAU request, it performs the common
procedures and allocates a GUTI that includes a null-MMEGI, which points to
the determined dedicated CN, to the UE. When multiple dedicated CNs are
deployed, there is a specific null-MMEGI for each dedicated CN configured in
the MME. The MME Code indicated together with the null-MMEGI in the GUTI is
the same as that of the MME\'s \"normal\" GUMMEI to ensure that a potential
subsequent Service Request gets routed to the MME holding the UE contexts.
After that procedure the UE will receive normal service from the MME. At the
next TAU the MME selection function of the eNodeB selects a new MME belonging
to the CN identified by the null-MMEGI. The new MME performs common inter MME
TAU procedure and allocates a GUTI from its normal MMEGI code space. From that
point in time the UE is served by the wanted dedicated CN and remains in that
CN as long as coordinated temporary IDs are allocated to the UE and used by
the UE. The time until the TAU procedure for re-distribution may be reduced by
allocating a non-broadcast TA.
It is assumed that the first MME may allocate during Attach at least a P-GW
from the wanted dedicated CN as it supports DECOR functionality. In case the
MME cannot allocate a P-GW from the dedicated CN, the first MME initiates the
detach procedure with \"re-attach required\" immediately after Attach, which
releases the NAS connection and the UE initiates Attach, which is routed to a
second MME, which is from the dedicated CN due to the assigned null-MMEGI.
Figure 5.2.1.1.1.2.3-1: Overall signalling flow of attach/TAU for \"null-
MMEGI\" based redirection
1\. The UE initiates the normal E-UTRAN initial Attach or TAU procedure.
2\. If the eNodeB has no route info for the UE provided GUMMEI, the initial
Attach Request message is routed to a randomly selected or a default first
MME.
3\. The first MME tries to get the UE\'s context from old MME/SGSN. If the
procedure started with a TAU Request the first MME determines from the UE
context whether the established PDN connection(s) may be maintained. If not,
the MME will during later steps detach the UE and therefore the MME doesn\'t
send any Context Acknowledge message to the old MME/SGSN. The first MME
determines whether PDN connection(s) may be maintained by verifying whether
the P-GW node name in the UE context contains the UE Usage Type.
4\. If the UE provided GUTI cannot be resolved via old CN node, the MME
requests the IMSI from the UE.
5\. If the old CN node does not confirm the integrity of the Attach Request
the MME performs Authentication procedure, including obtaining security
vectors from HSS if none are provided by old CN node.
6, The MME sends Update Location Request. The HSS interaction may be omitted
when the MME receives all required information from old MME/SGSN and concludes
that a re-attach is required. In this case there is no need to register the
MME as serving node in HSS.
NOTE: The flow shows the sequence for Attach. For TAU the HSS interaction
takes place after S11 procedure.
7\. HSS cancels the old CN node.
8\. The HSS acknowledges the Update Location message by sending an Update
Location Ack (IMSI, Subscription data) message to the serving MME.
9\. If the procedure started with Attach Request, the first MME needs to
establish new PDN connection(s). The first MME selects the P-GW and also the
S-GW, preferably according to the required dedicated CN so that there is no
P-GW change needed when in later steps transferring that UE to an MME of the
appropriate dedicated CN. The first MME establishes the PDN connection(s). If
the procedure started with TAU Request, the first MME updates the PDN
connection(s), if those can be maintained.
10\. If the first MME needs to redirect the UE, the first MME allocates a new
GUTI including a null-MMEGI indicating the target dedicated CN and its own MME
Code and includes that GUTI in the Attach/TAU Accept message sent to the UE.
Furthermore, a non-broadcast TAI is also included in the Attach/TAU Accept
message to trigger the UE initiating a TAU procedure after completing the
current Attach procedure, where the UE indicates a GUMMEI to the eNodeB.
11\. The UE confirms the new GUTI.
12\. When the UE needs to be redirected and the required PDN connection for
the dedicated CN cannot be established by the first MME (Attach case) or any
of the existing PDN connection(s) are not suitable and need to be re-
established (TAU case), the MME initiates Detach with \"re-attach required\"
after the Attach/TAU procedure is finalised.
13\. The MME releases the S1/RRC connection.
14\. The UE initiates an Attach or a TAU procedure by sending, to the eNodeB a
Request message together with RRC parameters indicating the old GUMMEI. The
old GUMMEI includes a null-MMEGI indicating the target dedicated CN.
15\. The eNodeB selects a second MME from the target CN based on the null-
MMEGI, which is part of the old GUMMEI that the UE provides to the eNodeB. The
eNodeB is configured with all the MMEs that serve the specific target
dedicated CN identified by the Null-MMEGI and the eNodeB selects an MME from
those MMEs.
The eNodeB forwards the Attach/TAU Request message to the selected dedicated
second MME.
16\. The second MME from dedicated CN uses the GUTI received from the UE to
derive the old serving MME address for retrieving the UE context.
The second MME completes the Attach/TAU procedure by taking over the PDN
connection(s) from old MME or establishing new one(s) with a P-GW from the
dedicated CN, respectively.
**[Principles for allocating Null-MMEGIs:]{.underline}**
The following figure shows it for complex deployment scenarios with arbitrary
overlap of pools from different CNs. Each pool gets one Null-MMEGI configured
per possible target CN for redirecting UEs. The MME allocates a GUTI to the UE
according to the determined target CN. The GUTI contains the Null-MMEGI and
the MME\'s MMEC. The Null-MMEGI is used by the eNodeB to select an MME from
the target pool+CN. And the target MME derives the address of the source MME
from the GUMMEI contained in the GUTI s for deriving UE context from old MME.
For the simpler scenario (not shown in a figure) where all pools/CNs cover the
same area it is sufficient to allocate one Null-MMEGI per target CN as the
MMECs are unique in that area according to current standard so that all such
formed GUMMEIs are also unique and allow for resolution by DNS.
Figure 5.2.1.1.1.2.3-2: Allocation of Null_MMEGIs for transferring UEs to
another CN
**[Network Node Selection Function (NNSF) in eNodeB:]{.underline}**
Any UE that is updated in the TA indicates the S-TMSI at RRC level connection
setup. Therefore, any Service Request is routed according to the MMEC and
there is no change to NNSF for this. This is existing functionality and
configuration, independent from DECOR.
When the UE does a TAU from a TA where it is not registered, e.g. due to the
non-broadcast TAI that the UE receives together with the GUTI during redirect,
the UE indicates the GUMMEI at RRC connection setup. This is existing
functionality that the NNSF is configured with the GUMMEIs of its connected
MMEs. Hence, in case of an intra-MME TAU the request is routed to the same MME
that already serves the UE. For redirecting UEs, the NNSF of the eNodeB is
configured in addition with the MME addresses of the MMEs that serve the
dedicated CN, which is identified by the Null-MMEGI. The configuration may
occur via S1 setup procedure. When the eNodeB receives a GUMMEI for which it
has no connected MME configured the eNodeB checks whether the GUMMEI includes
a Null-MMEGI, which causes the NNSF to select an MME from the MME pool that is
configured for that Null-MMEGI, applying load balancing between those MMEs. To
avoid redirecting UEs that move between MME pools, MMEC coordination may be
configured. This functionality is defined for network sharing. The NNSF is
configured with the ranges of MMECs that are reserved per dedicated CN. If an
eNodeB receives a GUMMEI that has no route configured and that also contains
no Null-MMEGI the NNSF verifies whether the MMEC belongs to a reserved range
from one of the dedicated CNs and selects an MME from that CN.
Instead of applying MMEC coordination, the NNSF may be configured with the
MMEGIs of the neighbour pools, which the NNSF handles like Null-MMEGI. Thereby
the NNSF selects an MME from the same dedicated CN when UEs move between
neighbouring pools. This avoids any need for redirection for those UEs.
###### # 5.2.1.1.1.2.4 Solution 4a: MME triggered S1 handover after Attach or
TAU
A new message to the S1-MME interface is introduced that allows the MME to
trigger a S1 based handover for a UE without changing the serving cell. MME
initiates S1 handover after Attach (or TAU) is completed and when subscription
information indicates that a dedicated core network has to be used for this
UE.
When eNodeB receives a HANDOVER TRIGGER message from MME, eNodeB triggers S1
handover to itself into the current cell. The eNodeB sends then Handover
Required message to the same MME. For the handover cause a new value, e.g.
\"handover triggered by core network\", is used.
After MME receives HANDOVER REQUIRED, it selects a proper new dedicated MME.
The handover can then continue normally, old MME selects a new MME for the UE
but the UE stays in the current cell and is served by the same eNodeB as
before. Figure 5.2.1.1.1.2.4 -1 shows the signalling procedure.
In order to minimise the number of procedures rejected by the eNodeB, the MME
shall pause non-handover related S1-interface procedures while a handover to
dedicated MME is ongoing (in this case, collision of functionality between MME
and the SGW is the same as for regular S1 handover today).
During the handover, serving (old) MME sends a Forward Relocation Request to
the dedicated (new) MME and this includes the UE MM Context. The MME UE
Context includes IMSI, ME Identity, UE Security Context, UE Network
Capability, AMBR, Selected CN operator ID, APN Restriction, Serving GW address
and TEID for control signalling, and EPS Bearer Context(s). UE Security
Context includes the EPS security context which contains the used NAS
ciphering keys. So, the new MME can use this information to perform GUTI
Reallocation Command with ciphering towards the UE.
While the MME triggered handover to dedicated MME is ongoing, NAS messages
from UE are not handled. Serving (old) MME ignores all UE NAS messages after
handover is triggered and dedicated (new) MME start handle UE NAS messages
after GUTI reallocation is complete.
If the first MME cannot allocate a PGW from the dedicated CN, the dedicated
MME initiates deactivation of corresponding PDN connection with \"reactivation
requested\" or Detach with \"re-attach required\" after the handover procedure
is complete.
Figure 5.2.1.1.1.2.4-1: MME triggered S1 handover after successful Attach or
TAU completion
1a. UE performs normal Attach or TAU procedure. Default PDN connection is
established.
Based on subscription information received from HSS the serving MME determines
that a dedicated (new) MME need be selected.
NOTE 1: This functionality is common to all solutions and needs be concluded
separately.
1b. When UE is moved to a dedicated MME, the serving MME does not release S1
connection after Attach complete or TAU Complete is received from UE. After
the TAU Request is received, the MME re-establishes radio and S1 bearers for
all active EPS bearer contexts.
2\. The serving MME sends Handover Trigger to the eNodeB.
NOTE 2: This is a new S1 procedure.
3\. The eNodeB initiates a handover to itself into the current serving cell
and sends Handover Required (with a new cause value = HO triggered by CN).
MME triggered handover preparation and execution is done without UE
involvement, UE stays in the current cell and is served by the same eNodeB
acting towards EPC as both target and source.
Throughout the procedure user plane is not impacted and stays active, the
E-RABs are not modified and the address(es) of user plane tunnel(s) between
eNodeB and S-GW don\'t change.
4\. The serving MME selects a dedicated MME and sends a Forward Relocation
Request (with a new cause value = HO triggered by CN and \"eNodeB UE S1AP
ID\") to the dedicated MME.
The dedicated MME verifies whether the Serving GW can continue to serve the
UE. If not, it selects a new Serving GW. For simplicity the session creation
towards a new Serving GW is not shown in this figure and the rest of procedure
show the case when Serving GW does not change.
5\. The dedicated MME sends Handover Request to the eNodeB (with a new cause
value = HO triggered by CN and \"eNodeB UE S1AP ID\"). The eNodeB UE S1 AP ID
is the one used on S1 interface between eNodeB and Serving MME; eNodeB uses
this ID to identify the existing UE context. No signalling towards UE follows
as the UE is served by the same eNodeB as before.
From this step onwards eNodeB maintains two MME S1AP ID(s) for the same eNodeB
S1 AP ID, one for the serving (old) MME and one for the dedicated (new) MME
assigned for the UE. The eNodeB maintains two MME S1 AP ID(s) until serving
(old) MME releases the S1 connection at step 13. With the existing handover
procedures, eNodeB needs to maintain only one MME S1 AP ID during this time.
From this step onwards the eNodeB sends NAS messages coming from the UE to the
dedicated MME via the newly established S1 connection.
In order to minimise the number of procedures rejected by the eNodeB, the old
MME shall pause non-handover related S1-interface procedures while a handover
to the dedicated MME is ongoing.
6\. The eNodeB sends Handover Acknowledge to dedicated MME.
7\. The dedicated MME performs GUTI re-allocation, after this point NAS
messages from UE are handled by dedicated MME.
8\. The dedicated MME sends Forward Relocation Response to the serving (old)
MME and continues with step 10.
9\. The serving (old) MME sends Handover command to the eNodeB. No signalling
towards UE follows as the UE is served by the same eNodeB as before.
9x. These procedures that are part of a normal handover are not performed.
Since there is no change of eNodeB, existing RRC connection and AS security
context will be re-used, thus no signalling towards the UE is needed to re-
establish RRC connection.
10\. The dedicated MME updates location to HSS.
11\. The HSS sends Cancel Location to the serving (old) MME.
12\. The dedicated MME adopts the bearer contexts received from the serving
(old) MME and sends Modify Bearer Request to Serving GW for each PDN
connection to update new MME address and TEID for control plane signalling.
13\. The serving (old) MME releases old S1 connection.
14\. If the first MME cannot allocate the required PDN connection for the
dedicated CN (Attach case) or the existing PDN connection(s) cannot be
maintained (TAU case), the dedicated MME initiates either the re-establishment
of the particular PDN connection with \"reactivation requested\" (in case not
all PDNs need to be re-established) or Detach with \"re-attach required\" (in
case all PDNs need to be re-established) after the handover procedure
completes.
##### 5.2.1.1.1.2.5 Solution 4b: MME triggered re-direction to dedicated MME
after Attach {#solution-4b-mme-triggered-re-direction-to-dedicated-mme-after-
attach .H6}
This procedure is shown below.
Figure 5.2.1.1.1.2.5-1: MME triggered re-direction to dedicated MME after
Attach
0\. This step shows completion of attach procedure as per TS 23.401 [4],
clause 5.3.2.1. MME re-direction may immediately follow the Attach procedure
or may happen at later period after attach. The re-direction decision may be
taken during the Attach procedure by serving MME based on \"UE Usage Type\"
received from HSS and the subsequent steps are executed after the completion
of the Attach procedure. In some cases re-direction may be taken after attach
for example O&M triggers serving MME to off-loading the UE in connected mode
towards a dedicated Core Network (i.e. a dedicated MME that is more
appropriate for the UE type).
1\. Source MME (S-MME) sends a Forward Relocation Request message to target
MME (T-MME) over the S10 interface. The message indicates the reason of re-
direction e.g. using new Indication Flags inside forward relocation message or
by other means. UE\'s context stored in S-MME (including security keys) is
transferred to T-MME with this message. S-MME also sends Global eNodeB ID and
eNodeB S1AP ID to identify UE context in the eNodeB to T-MME.
2\. T-MME decides to accept the request and assigns a GUTI that will be used
by UE after completion of the procedure. T-MME initiates the sending of NAS
message towards the UE using a new [S1-AP] MME RELOCATION REQUEST message.
T-MME also generate [NAS] GUTI REALLOCATION REQUEST message which is included
in [S1-AP] MME RELOCATION REQUEST. T-MME ignores the transparent container
sent by S-MME.
3\. Upon reception of the [S1-AP] MME RELOCATION REQUEST message the eNodeB
retrieves the UE context and forwards the NAS message to UE.
4\. UE takes note of the newly assigned GUTI and responds with [NAS] GUTI
REALLOCATION COMPLETE message.
5\. eNodeB receives the uplink NAS message and forwards it to T-MME using a
new [S1-AP] MME RELOCATION RESPONSE message.
From this step onwards the eNodeB sends NAS messages coming from the UE to the
dedicated MME via the newly established S1 connection.
In order to minimise the number of procedures rejected by the eNodeB, the
S-MME pauses non-handover related S1-interface procedures while a handover to
the dedicated MME is ongoing.
6\. Upon reception of the [NAS] GUTI REALLOCATION COMPLETE message the T-MME
sends Forward Relocation Response to S-MME indicating that UE context has been
successfully transferred to T-MME.
7\. S-MME sends Forwards Relocation Complete Ack to T-MME.
8\. S-MME initiates UE context release procedure towards e-NB. Note that steps
8a-8b for UE Context release may not be needed if it can be assumed that step
5 (MME Relocation Notify) effectively cancels the S1-MME association with the
S-MME.
9-10. T-MME creates association with the S-GW for this UE.
11-14. T-MME informs the HSS that it will serve as the new contact point for
this UE. S-MME may delete the UE context at this point.
##### 5.2.1.1.2 UTRAN GPRS Attach and RAU
##### 5.2.1.1.2.1 Scenario Description {#scenario-description-1 .H6}
For initial SGSN assignment during GPRS Attach the following scenarios are
covered:
\- Iu GPRS Attach with IMSI.
\- Iu GPRS Attach and RAU with P-TMSI from old MME/SGSN supporting DECOR.
\- Iu GPRS Attach and RAU with P-TSMSI from old MME/SGSN not supporting or
deploying DECOR (e.g. an inter PLMN change with GUTI).
##### 5.2.1.1.2.2 Solutions {#solutions-2 .H6}
##### 5.2.1.1.2.2.1 Solution 1: Redirection after Update Location Procedure
{#solution-1-redirection-after-update-location-procedure-1 .H6}
Impacts to this procedure are similar to the ones in the clause 5.2.1.1.1.2.1
and are not shown here. Here are some of the key differences from the E-UTRAN
attach procedure:
\- Null-NRI instead of MMEGI is used.
\- GUTI is not provided by the SGSN to the RNC.
##### 5.2.1.1.2.2.2 Solution 2: Re-routing before NAS security setup
{#solution-2-re-routing-before-nas-security-setup-1 .H6}
Impacts to this procedure are similar to the ones in the clause 5.2.1.1.1.2.2.
The existing UTRAN Reroute Command used for non-supporting UEs in a MOCN
configuration can be reused and extended with a \"null-NRI\" parameter
pointing to a dedicated CN for performing DECOR re-routing at UTRAN GPRS
Attach.
Editor\'s note: Detailed differences from the E-UTRAN attach procedure are for
further study.
##### 5.2.1.1.2.2.3 Solution 3: \"null-NRI\"/\"null-MMEGI\"based redirection
during Attach {#solution-3-null-nrinull-mmegibased-redirection-during-attach
.H6}
The approach is comparable on a high level to that described under
5.2.1.1.1.2.3 \"Solution 3: \"null-NRI\"/\"null-MMEGI\" based redirection
during Attach\". More specifically, it is following the null-NRI mechanism as
described in TS 23.236 [7] for UTRAN access.
Redirection during Attach works as following. When the SGSN receives the
Attach Request it determines the CN that shall serve the UE from subscription
or other information, e.g. from the NRI of the old P-TMSI indicated in Attach
Request or from UE context received from old CN node, if available. For each
dedicated CN to which the SGSN shall be able to redirect there is one null-NRI
configured in the SGSN. The SGSN returns to the UE a new P-TMSI with the null-
NRI of the determined dedicated CN and a non-broadcast RAI in the accept
message.
The subsequent Routing Area Update is triggered by setting the periodic
routing area update timer to a low value in the Attach Accept message. The UE
will shortly after send a Routing Area Update Request that the RAN node then
routes to an SGSN from the determined dedicated CN due to the presence of the
specific null-NRI. The new SGSN from the determined CN accepts the UE and
services it. Each SGSN is configured with a unique non-broadcast RAI so that
the new SGSN can resolve the old SGSN based on it.
If the SGSN handling the Attach receives subsequently a request to activate a
PDN connection and this SGSN cannot activate a PDN connection from the
determined dedicated CN the SGSN initiates Detach with \"reattach requested\",
which causes another Attach Request that the RNC routes directly to the
determined dedicated CN based on the Null-NRI.
Redirection during RAU works as redirect during Attach with following
differences. After accepting the RAU Request with parameters as described
above for the Attach the SGSN verifies whether the UE\'s PDN connections can
be maintained. If not, the SGSN initiates Detach with \"reattach requested\",
which causes another Attach Request that the RNC routes directly to the
determined dedicated CN based on the Null-NRI.
If the PDN connection can be maintained, the RNC routes the UE\'s next RAU
Request to an SGSN from the determined dedicated CN based on the Null-NRI. The
new SGSN from the determined CN accepts the UE and services it.
##### 5.2.1.1.3 GERAN GPRS Attach and RAU
##### 5.2.1.1.3.1 Scenario Description {#scenario-description-2 .H6}
For initial SGSN assignment during GPRS Attach the following scenarios are
covered:
\- Gb GPRS Attach with IMSI.
\- Gb GPRS Attach and RAU with P-TMSI from old MME/SGSN supporting DECOR.
\- Gb GPRS Attach and RAU with P-TSMITMSI from old MME/SGSN not supporting or
deploying DECOR.
##### 5.2.1.1.3.2 Solutions {#solutions-3 .H6}
##### 5.2.1.1.3.2.1 Solution 1: Redirection after Update Location Procedure
{#solution-1-redirection-after-update-location-procedure-2 .H6}
Impacts to this procedure are similar to the ones in the clause 5.2.1.1.1.2.1.
##### 5.2.1.1.3.2.2 Solution 2: Re-routing before NAS security setup
{#solution-2-re-routing-before-nas-security-setup-2 .H6}
Impacts to this procedure are similar to the ones in the clause 5.2.1.1.1.2.2.
The existing UTRAN Reroute Command used for non-supporting UEs in a MOCN
configuration can be reused and extended with a \"null-NRI\" parameter
pointing to a dedicated CN for performing DECOR re-routing at UTRAN GPRS
Attach.
Editor\'s note: Detailed differences from the E-UTRAN attach procedure are for
further study.
##### 5.2.1.1.3.2.3 Solution 3: \"null-NRI\"/\"null-MMEGI\" based redirection
during Attach {#solution-3-null-nrinull-mmegi-based-redirection-during-attach
.H6}
The solution is the same as under 5.2.1.1.2.2.3 Solution 3: \"null-
NRI\"/\"null-MMEGI\" based redirection during Attach.
#### 5.2.1.2 Assignment during Handover
##### 5.2.1.2.1 Scenarios
The following scenarios should be supported:
\- Inter MME/SGSN handover where the source MME/SGSN does not support the
DECOR feature and dedicated core networks is supported in the target TAI/RAI
##### 5.2.1.2.2 Solutions
##### 5.2.1.2.2.1 Solution 1 and Solution 2: Redirection after Update Location
Procedure and Re-routing before NAS security setup {#solution-1-and-
solution-2-redirection-after-update-location-procedure-and-re-routing-before-
nas-security-setup .H6}
During handover, if the source MME/SGSN does not support the DECOR feature and
hence does support selection of target MME/SGSN from the UE Usage type of the
UE, the target MME/SGSN will obtain the subscription information of the UE
during the location update procedure with the HSS. It is important for the
handover to be successful and hence the target MME/SGSN should not reject the
relocation request. The MME/SGSN then follows the procedure specified in
clause 5.2.4.2.1, with the specific case that the UE is in ECM-CONNECTED
state, i.e. steps 3 and 4.
##### 5.2.1.2.2.2 Solution 3: \"null-NRI\"/\"null-MMEGI\" based redirection
after handover {#solution-3-null-nrinull-mmegi-based-redirection-after-
handover .H6}
This procedure is for the case of a handover from a non-DECOR area of the
network to the DECOR area. Such handovers use the default CN as the handover
target.
The node from the default CN performs a complete unmodified handover until the
TAU/RAU. The TAU/RAU that happens at the end of the handover is performed as
described under \"5.2.1.1.1.2.3 Solution 3: \"null-NRI\"/\"null-MMEGI\" based
redirection during Attach and TAU\". Within that procedure, if the PGW can be
maintained, this causes the UE at the next idle period when it detects that it
is not updated for the (non-broadcast) RA/TA to perform RAU/TAU with a node
from the dedicated CN. If the PGW cannot be maintained, at the next RAU/TAU
the UE is rejected with \"re-attach required\", which causes a reattach with
the node from the dedicated CN.
#### 5.2.1.3 Evaluation and Conclusion
##### 5.2.1.3.1 Evaluation
Comparison of the solutions is given below. This clause also contains
performance evaluation of the solution for HSS Initiated Dedicated CN Node
Selection (clause 5.2.4).
**[Key Scenarios to compare performance of solutions:]{.underline}**
The following two scenarios the main scenarios for which optimized signalling
procedure for DECOR are needed:
S1. Maintaining dedicated MME/SGSN allocation during idle-mode TAU/RAU when
RAN NNSF cannot direct the TAU/RAU to dedicated CN Node: While it is strongly
recommended for an operator deploying DECOR to update their NNSF procedure to
enable idle-mode TAU/RAU to be directed to dedicated CN nodes, this may not
always be possible due to operational limitations (e.g. different parts of
network operated by independent organizations, pre-allocated MMEGI/NRIs).
Hence, the TAU/RAU request may be send to default CN and re-routing needs to
occur to the dedicated CN node.
S2. HSS initiated dedicated CN node reselection with PGW change: This is the
scenario where the operator \"turn-on\" the dedicated CN, adds a new CN, or
\"turns-off\" a dedicated CN. While this is something that an operator does
not perform very regularly, it is important that when an operator does enable
this configuration, we do not have a signalling storm in the network.
In addition, the following scenario should also be considered but is not as
frequent/important as the above two scenarios:
S3. Initial MME/SGSN allocation during TAU/RAU where old node does not support
DECOR: This is the case where DECOR is only deployed in part of the network
and not the overall network and dedicated UEs moves between these two parts of
the network.
S4. Intra-Decor load (re-)balancing: This case happens when load
(re-)balancing is needed among the MMEs/SGSNs within a pool of the dedicated
core network.
Table 5.2.1.3.1-1: Comparison of Solutions
+-------------+-------------+-------------+-------------+-------------+ | Evaluation | Solution1: | Solution 2 | Solution 3: | Solution.4: | | criteria | Redirection | : | \"nul | MME | | | after | Re-routing | l-NRI\"/\"n | Triggered | | | Update | before NAS | ull-MMEGI\" | Handover | | | Location | security | based | | | | Procedure | setup | redirection | | +-------------+-------------+-------------+-------------+-------------+ | 1. Nodes | eNodeB/RNC, | eNodeB/RNC, | eNodeB/RNC, | eNodeB/RNC, | | Impacted | SGSN/MME | SGSN/MME, | SGSN/MME | SGSN/MME | | | | HSS | | | +-------------+-------------+-------------+-------------+-------------+ | 2. Impacts | Adds a new | Adds a new | NNSF | Adds a new | | to RAN | reroute | reroute | procedure | CN | | | procedure | procedure | needs to be | triggered | | | to eNodeB | to eNodeB | modified to | HO | | | to reroute | to reroute | handle | procedure | | | message to | message to | null-MME | to | | | new CN | new CN | GI/null-NRI | eNodeB/RNC. | | | node. | node. | (one for | | | | | | each pair | Also impact | | | RNC reroute | RNC reroute | of source | Gb | | | procedure | procedure | and target | procedure. | | | modified | modified | CN pools). | | | | from | from | | | | | TS 2 | TS 2 | | | | | 3.251 [8] | 3.251 [8] | | | | | cla | cla | | | | | use 7.1.4.1 | use 7.1.4.1 | | | | | to include | to include | | | | | MMEGI/NRI | MMEGI/NRI | | | | | and reroute | and reroute | | | | | to specific | to specific | | | | | MME/SGSN | MME/SGSN | | | | | pool | pool | | | | | | | | | | | Also impact | Also impact | | | | | Gb | Gb | | | | | procedure. | procedure. | | | +-------------+-------------+-------------+-------------+-------------+ | 3. Impacts | Attach and | Attach and | Attach and | CN | | to CN | TAU/RAU and | TAU/RAU are | TAU are | triggered | | Procedures | handover | impacted by | modified | HO | | | procedures | providing | with the | procedure. | | | are | additional | mechanism | | | | extended to | redirect | that result | It cannot | | | include | handling. | in an | work for | | | redirect | | additional | the | | | handling. | Aut | TAU. | combined | | | | hentication | | attached | | | Rerouting | Reque | The 2G and | UEs as | | | procedure | st/Response | 3G | dedicated | | | includes | procedure | procedures | MME will | | | handling of | modified to | are already | not update | | | GUTI by | process UE | specified | to MSC. | | | target CN | Usage Type. | for intra | | | | node. | | pool load | The | | | | Context | balancing. | dedicated | | | Context | R | | MME does | | | R | esponse/Ide | | not know | | | esponse/Ide | ntification | | the NAS | | | ntification | response to | | timer | | | response to | include UE | | values | | | include UE | Usage Type. | | (e.g. PTAU | | | Usage Type. | | | timer, PSM | | | | | | timer) | | | | | | allocated | | | | | | by the | | | | | | serving | | | | | | MME. | +-------------+-------------+-------------+-------------+-------------+ | 4. | (No | (No | Co | (No | | Co | Impacts) | Impacts) | nfiguration | Impacts) | | nfiguration | DNS used | DNS used | of | DNS used | | R | for | for | null-MME | for | | equirements | resolution | resolution | GI/null-NRI | selecting | | for core | of MMEGI | of MMEGI | (one for | target | | network | for a given | for a given | each pair | dedicated | | | TAI and UE | TAI and UE | of source | CN node. | | | Usage type | Usage type | and target | | | | | | CN pools) | | | | DNS to be | DNS to be | in MME. | | | | configured | configured | | | | | with every | with every | Every | | | | TAI+UE | TAI+UE | source pool | | | | Usage type | Usage type | to be | | | | c | c | configured | | | | ombination. | ombination. | with a | | | | | | null-MME | | | | | | GI/null-NRI | | | | | | per target | | | | | | DECOR. | | +-------------+-------------+-------------+-------------+-------------+ | 5. | V | The replay | (No | The key | | Security | erification | protection | impacts) | derivation | | impacts | of NAS | should be | | procedures | | | message | enhanced as | | of the | | | context/ide | to the same | | eNodeB that | | | ntification | Attach/TAU | | work during | | | request by | Request | | HO are not | | | old | message | | performed | | | MME/SGSN | needs to be | | | | | skipped for | integrity | | | | | case of | checked | | | | | reroute | twice at | | | | | -with-GUTI. | the old | | | | | | MME. | | | | | The replay | | | | | | protection | | | | | | should be | | | | | | enhanced as | | | | | | to the same | | | | | | TAU Request | | | | | | message | | | | | | needs to be | | | | | | integrity | | | | | | checked | | | | | | twice at | | | | | | the old MME | | | | | | for change | | | | | | non-DECOR | | | | | | to DECOR. | | | | +-------------+-------------+-------------+-------------+-------------+ | Performance | | | | | | Comparisons | | | | | | for Key | | | | | | Scenarios | | | | | +-------------+-------------+-------------+-------------+-------------+ | S1. | Context | Context | Full TAU | Full | | Idle-mode | transfer | transfer | procedure | TAU/RAU | | TAU/RAU | followed by | followed by | completion, | procedure. | | when RAN | redirect to | redirect to | followed by | Setting up | | NNSF cannot | dedicated | dedicated | an | data radio | | direct the | CN node. | CN node. | additional | bearers, | | TAU/RAU to | | | TAU with | then MME | | dedicated | First new | **Less | dedicated | initiated | | CN Node and | node | resource | CN. | handover to | | old CN | creates MM | allocation | | dedicated | | supports | context for | in first | First new | MME. | | Decor | UE. | new node | node | | | | | than other | creates | First new | | |** Less | s | MM+SM | node | | | signalling | olutions.**| context for | creates | | | than | | UE. | MM+SM | | | Solution 3 |** Less | | context for | | | or 4.**| signalling |** Twice the | UE. | | | | than | signalling | | | | | Solution 3 | (including | **Requires | | | | or 4.** | radio) as | additional | | | | | compared to | radio | | | | | Solution 1 | signalling | | | | | and 2, | to setup | | | | | unless the | DRBs. More | | | | | UE is kept | signalling | | | | | in default | compared to | | | | | CN until | Solution 1 | | | | | next | and 2.**| | | | | regular | | | | | | TAU. In | | | | | | that case | | | | | | the default | | | | | | CN needs to | | | | | | deploy the | | | | | | capacity | | | | | | for the | | | | | | dedicated | | | | | | CN UEs in | | | | | | the border | | | | | | TA/RA.** | | +-------------+-------------+-------------+-------------+-------------+ | S2. HSS | For | Cancel | For | For | | Initiated | idle-mode, | location | idle-mode, | idle-mode, | | Dedicated | Service | with | SR+Null_ | SR followed | | CN Node | Reject or | explicit | MMEGI_GUTI | by HO to | | Reselection | TAU/RAU | detach with | re | dedicated | | with PGW | reject w | reattach | allocation, | CN node. Or | | Change | \"implicit | used. | or full | TAU/RAU | | | detach\". | Reattach | TAU/RAU. | with | | | Reattach | then | Followed by | setting up | | | then | redirected | detach with | data radio | | | redirected | by old CN | reattach. | bearers and | | | by old CN | st | Reattach | MME | | | st | raight-away | routed to | triggered | | | raight-away | to | dedicated | HO to | | | to | dedicated | CN node by | dedicated | | | dedicated | CN Node. | RAN. | CN node. | | | CN Node. | | | GUTI | | | | **Ap | For | re | | | For | proximately | conn | allocation. | | | conn | same | ected-mode, | Explicit | | | ected-mode, | signalling | GUTI | detach with | | | explicit | as other | r | reattach. | | | detach with | s | eallocation | Reattach | | | reattach. | olutions.** | with | routed to | | | Reattach | | explicit | dedicated | | | then | **Two | detach with | CN node by | | | redirected | separate MM | reattach. | RAN. | | | by old CN | signalling | Reattach | | | | st | procedures | routed to | For | | | raight-away | occur with | dedicated | conn | | | to | the old | CN node by | ected-mode, | | | dedicated | node.** | RAN. | MME init HO | | | CN Node | | | to | | | | **Potential |** Ap | dedicated | | | **Ap | impacts to | proximately | CN node. | | | proximately | the HSS to | same | GUTI | | | same | rate | signalling | re | | | signalling | control | as other | allocation. | | | as other | cancel | s | Followed by | | | s | location | olutions.** | detach with | | | olutions.**| messages.** | | reattach. | | | | | | | | | **Two | | |** Ap | | | separate MM | | | proximately | | | signalling | | | same | | | procedures | | | signalling | | | occur with | | | as other | | | the old | | | s | | | node.**| | | olutions.** | | | | | | | | | | | | **Two | | | | | | i | | | | | | nteractions | | | | | | occur with | | | | | | the old | | | | | | node.** | +-------------+-------------+-------------+-------------+-------------+ | S3. Initial | Time of | Time of | Needs | Needs | | assignment | Att | Attach/TAU | additional | additional | | of MME/SGSN | ach/TAU/RAU | /RAU will | TAU with | HO after | | during | will be | be higher | dedicated | initial | | TAU/RAU | higher | (requires | core after | Att | | when old CN | (almost | getting UE | initial | ach/TAU/RAU | | does not | double of | Usage Type | TAU/RAU | with | | support | normal | from HSS or | with | default | | DECOR | Attac | auth | default | core is | | | h/TAU/RAU). | entication) | core is | completed. | | (attach | | | completed. | Followed by | | from | First new | **Ap | Unless the | GUTI | | non-DECOR | node | proximately | next | r | | CN or IMSI | creates MM | same | regular TAU | eallocation | | is same, | context for | signalling | is used to | in target | | except for | UE. | as Solution | transfer | CN node. | | Solution 4 | | 3.** | the UE. In | | | where DRBs | **Ap | | that case | Needs to | | are setup | proximately | | the default | implement | | and no | same | | core needs | eNodeB\'s | | radio | signalling | | to serve | MME | | signalling | as Solution | | the | loa | | needs to | 3.** | | dedicated | d-balancing | | occur) | | | core UEs in | fu | | | | | the border | nctionality | | | | | RA/TA. | to MME. | | | | | | | | | | | First new | If | | | | | node | idle-mode | | | | | creates | TAU/RAU, | | | | | MM+SM | will need | | | | | context for | to setup | | | | | UE. | DRBs. | | | | | | | | | | | **Ap | First new | | | | | proximately | node | | | | | same | creates | | | | | signalling | MM+SM | | | | | as Solution | context for | | | | | 1 and 2.** | UE. | | | | | | | | | | | | **Requires | | | | | | additional | | | | | | radio | | | | | | signalling | | | | | | to setup | | | | | | DRBs for | | | | | | idle-mode | | | | | | TAU/RAU. | | | | | | More | | | | | | signalling | | | | | | compared to | | | | | | Solution 1 | | | | | | and 2.** | +-------------+-------------+-------------+-------------+-------------+ | S4. | When UE | When UE | For 2G/3G | Full | | Intra-Decor | performs | performs | already | TAU/RAU | | load | load | load | specified | procedure. | | (re | balancing | balancing | intra-pool | Setting up | | -)balancing | TAU, the | TAU, the | load | data radio | | | TAU is sent | TAU is sent | balancing | bearers, | | | to default | to default | is used. | then MME | | | CN node and | CN node and | | initiated | | | after the | after the | For 4G the | handover to | | | s | s | UE is | dedicated | | | ubscription | ubscription | provided | MME. | | | information | information | with a GUTI | | | | is provided | is provided | that | First new | | | by HSS, | by HSS, | includes | node | | | re-directed | re-directed | the | creates | | | to | to | Null-MMEGI | MM+SM | | | dedicated | dedicated | from the | context for | | | CN Node. | CN Node. | current | UE. | | | | | pool and a | | | | First new | * | no | **Requires | | | node | *Additional | n-broadcast | additional | | | creates MM | TAU needed | TAI. At | radio | | | context for | as compared | next TAU | signalling | | | UE. | to Solution | the | to setup | | | | 3.** | eNodeB\'s | DRBs. More | | | * | | NNSF routes | signalling | | | _Additional |__Two | the UE to | compared to | | | TAU needed | separate MM | another MME | Solution 1 | | | as compared | signalling | from the | and 2.__| | | to Solution | procedures | same pool. | | | | 3.__| occur with | | | | | | the old |__Less | | | |__Two | node.__| signalling | | | | separate MM | | than | | | | signalling | | Solution 1 | | | | procedures | | or 2 and | | | | occur with | | doesn\'t | | | | the old | | involve | | | | node.__| | default | | | | | | CN.__| | | | | | | | | | | |__New load | | | | | | (re | | | | | | -)balancing | | | | | | procedure | | | | | | needed for | | | | | | 4G._ * | | +-------------+-------------+-------------+-------------+-------------+
NOTE: The above table does not capture NNSF configuration supported in RAN to
maintain UE in dedicated CN network. This configuration is common to all
solutions.
Based on the above table, Solution-1 is selected since it provides efficient
procedure to redirect a UE to dedicated network.
#### 5.2.1.3.2 Conclusion
\"Solution 1: Redirection after Update Location Procedure\" is selected for
Assignment of dedicated MME/SGSN procedures and for HSS Initiated dedicated CN
node reselection.
For intra-DECOR MME load re-balancing functionality that permits UEs that are
registered on an MME within an MME dedicated pool to be moved to another MME
within the same MME pool, enhancements may be provided during the normative
stage, e.g. to avoid having the UE being redirected via the default core.
### 5.2.2 Maintaining Dedicated CN Nodes
#### 5.2.2.1 CN node change by TAU/RAU
##### 5.2.2.1.1 Scenario Description
The following scenarios are covered:
\- TAU/RAU with GUTI/P-TMSI from old MME/SGSN supporting DECOR.
##### 5.2.2.1.2 Solutions
##### 5.2.2.1.2.1 Solution 1 and 2: UE Usage Type provided in Context Transfer
{#solution-1-and-2-ue-usage-type-provided-in-context-transfer .H6}
The TAU/RAU procedures are modified as follows to ensure that the UE is served
by the appropriate core network:
\- During the context transfer phase of the TAU/RAU with MME/SGSN change
procedure, the old MME/SGSN provides the UE Usage Type information to the new
MME in the context response message. If the new MME/SGSN determines that it
does not serve the subscriber type of the UE, it re-directs or re-routes the
UE to the target CN node type by reusing the appropriate steps in the
procedures described in the E-UTRAN attach clause.
At inter-PLMN context transfer specific handling applies, which may involve
selection of dedicated core network based on the visited network policy,
roaming agreements and based on different subscription parameters including
the HPLMN UE Usage Type.
The procedure of how the TAU/RAU procedure support maintaining dedicated CN
nodes at TAU/RAU for Solution 1 and 2 are captured in clauses 5.2.1.1.1.2.1
and 5.2.1.1.1.2.2 respectively.
##### 5.2.2.1.2.3 Solution 3: NRI and MMEC coordination {#solution-3-nri-and-
mmec-coordination .H6}
The solution assumes that NRIs (of 2G/3G) and MMECs (of 4G) are coordinated as
introduced for network sharing in TS 23.251 [8]. Further is there some
coordination described in TS 23.401 [4] for combined MME/SGSN or for avoiding
frequent node changes when MME and SGSN are not combined. NRI/MMEC
coordination achieves that UEs remain in the same dedicated CN during inter
node and inter RAT mobility. It is accomplished by dividing NRI/MMEC code
space into separate ranges per dedicated CN.
A high level flow showing CN node selection based on NRI/MMEC coordination is
shown in the flow below.
Figure 5.2.2.1.2.3-1: CN node selection during TAU/RAU
1\. The MS sends a RAU or TAU Request to the RAN. In addition it indicates the
NRI (2G/3G) or GUMMEI (4G) to the RAN. The NAS Node Selection Function (NNSF)
of the RAN is configured to route the RAU/TAU Request according to the
NRI/GUMMEI to the corresponding CN node.
The UE is kept in the same dedicated CN by having a separate NRI space per
dedicated CN. So that even if the NRI presented by the UE is not configured
specifically for a CN node in the NNSF of the RAN, the NNSF knows to what
dedicated CN the NRI belongs and the NNSF selects a CN node from the same
dedicated CN.
The same applies to GUMMEIs. The MMEC code space is split into ranges per
dedicated CN. If the NNSF is not configured with a CN node for the presented
GUMMEI it selects a CN node from the same dedicated CN according to the MMEC
that is part of the GUMMEI.
2\. The RAN forwards the RAU/TAU Request to the CN node selected by the NNSF.
3\. The CN node accept the RAU/TAU Request and allocates MM parameters to the
UE that uniquely identify the selected CN node during any subsequent access
request.
##### 5.2.2.1.2.4 Solution 4a: IDLE mode mobility with MME triggered S1
handover {#solution-4a-idle-mode-mobility-with-mme-triggered-s1-handover .H6}
After initial assignment of dedicated MME during Attach and TAU, it is assumed
same MME is kept as long it serves the UE location. If UE leaves the service
area of the MME or moves to/from 2G/3G , solutions such as NRI/MMEC
coordination (see clause 5.2.2.1.2.3) can be used to achieve UEs remain served
by same type of dedicated CN of different MME pool.
Editor\'s Note: Detailed description of possible solutions needs to be added
in the future.
##### 5.2.2.1.2.5 Solution 5: MMEGI and NRI coordination for CN Node change
{#solution-5-mmegi-and-nri-coordination-for-cn-node-change .H6}
During the initial E-UTRAN Attach procedure to a dedicated core network the UE
is allocated a GUTI in the Attach Accept message where the MMEGI is associated
with the dedicated core network.
Similarly, in GERAN/UTRAN, the UE is allocated a P-TMSI in the Attach Accept
message where the NRI is associated with the dedicated core network.
This allows for the eNodeB in LTE and RNC in UTRAN to use these MMEGI and NRI
values for keeping the UE on the same dedicated network, if available. The
granularity of the configuration coordination can vary from between neighbour
pools to the entire PLMN.
If the UE is routed to a MME/SGSN not belonging to the dedicated core network
(e.g. due to lack of MMEGI or NRI coordination), re-routing/re-direction to a
dedicated MME/SGSN is needed during the TAU/RAU procedure.
This solution for keeping the UEs on the selected dedicated network is
applicable to all solutions for dedicated network selection in the Attach
clause of this TR.
It does not consider coordination between MMEGI and NRI for TAU/RAU in
intersystem change as TAU/RAU in intersystem change is a corner case where the
benefits may not pay for the configuration efforts.
The figure bellow demonstrates the MMEGI/NRI coordination during TAU/RAU with
MME change.
Figure 5.2.2.1.2.5-1: TAU/RAU procedure with UE Usage Type associated with
MMEGI/NRI values
1-2. TAU/RAU procedure is performed as specified in TS 23.401 [4] and TS
23.060 [5].
3a. Alt. A: If dedicated core networks are supported and if the MMEGI (for
E-UTRAN) or the NRI (for GERAN/UTRAN) from the UE is associated with an
available dedicated Core Network, the eNodeB/RNC selects a dedicated MME/SGSN
of that same Core Network and forwards the TAU/RAU Request message to it. The
dedicated MME selection by eNodeB is based on a configuration coordination
between the MMEGIs associated with that dedicated network and similarly the
dedicated SGSN selection by RNC is based on a configuration coordination
between the NRIs associated with that dedicated network. The granularity of
the configuration coordination can vary from between neighbour pools to the
entire PLMN.
3b. Alt. B: Otherwise, the eNodeB/RNC selects an MME/SGSN as described in TS
23.401 [4] and TS 23.060 [5].
4b. Alt. B: If dedicated core networks are supported and the new MME/SGSN does
not serve UE Usage Type (e.g. intersystem change), the TAU/RAU is re-routed to
a dedicated MME/SGSN of UE Usage Type, if available.
5\. The selected MME continues the TAU/RAU procedure as specified in TS 23.401
[4] and TS 23.060 [5].
##### 5.2.2.1.3 Evaluations and Conclusions
In order to reduce signalling for redirecting UEs to dedicated CN nodes during
idle-mode TAU/RAU, the RAN should support NNSF related configuration such that
idle-mode TAU/RAU requests are routed to CN nodes of the network type to which
the UE is already registered in.
Idle mode mobility is intra-pool or inter-pool. Inter-pool idle mode mobility
is less frequent.
**[Intra-pool mobility:]{.underline}**
Intra-pool idle mode mobility within the same RAT is not affected by DECOR and
the UE is always routed to the same serving SGSN/MME. However during IRAT
intra-pool idle mode mobility there is always the change between a serving MME
and a serving SGSN. The only mechanism that can avoid that a redirect
procedure may be needed during IRAT intra-pool idle mode mobility is described
in TS 23.401 [4] as a configuration for combined SGSN/MME where it is not
wanted that IRAT changes change the serving combined node:
\"_The RRC parameter \"old GUMMEI\" takes its value from the identifier that
is signalled as the old GUTI according to the rules above. For a combined
MME/SGSN the eNodeB is configured to route the MMEâ€‘code(s) of this combined
node to the same combined node. This eNodeB is also configured to route
MMEâ€‘code(s) of GUTIs that are generated by the UE\'s mapping of the Pâ€‘TMSIs
allocated by the combined node. Such an eNodeB configuration may also be used
for separate nodes to avoid changing nodes in the pool caused by inter RAT
mobility._ \"
A DECOR with combined SGSN/MME needs to deploy exactly the same mechanism to
avoid changing the serving combined node within the pool with IRAT idle mode
mobility event. The same approach is available for separate MME and SGSN.
Based on the above it is strongly recommended to coordinate MMECs and NRIs
within each individual MME/SGSN pool area. This coordination means that a
specific dedicated core uses the same value (range) of NRI and MMEC within
each individual pool area.
**[Inter-pool mobility:]{.underline}**
Inter-pool mobility may be intra-RAT or inter-RAT. For inter-RAT mobility to
keep UE in dedicated network, eNodeB may have configuration organizing NRIs of
neighbouring SGSN and the local MMEGIs into sets. Each set contains NRIs and
MMEGIs that belong to the same core network. RNC similarly has configuration
organizing MMECs/MMEGI of the neighbouring MME pool and the local NRIs into
sets.
However, due to already existing allocation schemes of NRIs and MMECs to CN
nodes in deployed networks, the operator may not be willing to re-organize the
allocation to support the above configuration. If networks decide to not
support this configuration, idle-mode IRAT mobility between pools may result
UE\'s TAU/RAU being first send to wrong dedicated core network.
For intra-LTE inter-pool mobility to keep UE in dedicated network, eNodeBs may
have configuration organizing MMEGIs of neighbouring and local MME pool into
sets. Each set contains MMEGIs that belong to the same core network. For
intra-2G/3G, RNC may have configuration organizing MMECs of neighbouring and
local SGSNs into sets. Each set contains MMECs that belong to the same
dedicated core network.
For PLMN wide inter-pool intra-RAT mobility the operator may divide up the
entire MMEGI and NRI value space into different sets with each set
corresponding to particular core network as specified in clause 5.2.2.1.2.5.
All RAN nodes are configured with the same NNSF configuration. This requires
coordination of MMEGI and NRI values over the entire PLMN.
**[Protocol Specific Conclusion:]{.underline}**
In addition, solution in clause 5.2.2.1.2.1 is used for redirection when
during idle-mode mobility, TAU/RAU is forwarded to CN node that does not serve
the \"UE Usage type\" of the UE.
#### 5.2.2.2 CN node change by handover
##### 5.2.2.2.1 Scenario Description
The following scenario is covered:
\- Handover with from an old MME/SGSN supporting DECOR to a new MME/SGSN
supporting DECOR.
##### 5.2.2.2.2 Solutions
##### 5.2.2.2.2.1 Target CN node Selection based on Configuration in source CN
node {#target-cn-node-selection-based-on-configuration-in-source-cn-node .H6}
The handover procedure when source MME/SGSN is provided the target TAI/RAI for
the UE and the TAI/RAI is not served by the source MME/SGSN, the source
MME/SGSN selects target MME/SGSN from the same dedicated core network based on
configuration in the MME/SGSN.
##### 5.2.2.2.2.2 Target CN node Selection based on DNS Lookup {#target-cn-
node-selection-based-on-dns-lookup .H6}
The handover procedure when source MME/SGSN is provided the target TAI/RAI for
the UE and the TAI/RAI is not served by the source MME/SGSN, the source
MME/SGSN selects target MME/SGSN based on DNS lookup that includes UE Usage
Type value and the target TAI/RAI value.
Following functionalities are required to be supported:
\- The DNS should be configured to handle queries from non-DECOR supporting
MME/SGSN, i.e. the non-DECOR DNS configuration should be continued to be
supported.
\- The DECOR-supporting MME/SGSN should fallback to using the non-DECOR DNS
queries in case it receives NULL response from the DNS when using DECOR
specific DNS queries.
##### 5.2.2.2.2.3 Solution 3: configuration based handover to same dedicated
CN {#solution-3-configuration-based-handover-to-same-dedicated-cn .H6}
During handover the dedicated CN is maintained by applying what TS 23.401 [4]
described already under \"SGSN selection function\":
\"When a MME/SGSN selects a target SGSN, the selection function performs a
simple load balancing between the possible target SGSNs. In networks that
deploy dedicated MMEs/SGSNs, e.g. for UEs configured for low access priority,
the possible target SGSN selected by source MME/SGSN is typically restricted
to SGSNs with the same dedication.\"
##### 5.2.2.2.3 Evaluations and Conclusions
##### 5.2.2.2.3.1 Evaluation {#evaluation-1 .H6}
The DNS based solution is scalable whereas the configuration based solution is
not.
The DNS based solution is also used for target CN node selection in non-DECOR
networks.
##### 5.2.2.2.3.2 Conclusion {#conclusion-1 .H6}
Enhancements to the DNS procedure as proposed in the DNS based solution as
specified in clause 5.2.2.2.2.2 is recommended.
### 5.2.3 Selection Function of dedicated SGW and PGW
#### 5.2.3.1 Dedicated SGW Selection
##### 5.2.3.1.1 Scenarios
In all solutions, the SGW may be reselected by the MME/SGSN of the selected
dedicated network.
##### 5.2.3.1.2 Solutions
The selection of the SGW by the dedicated MME/SGSN may be based on either:
\- configuration in the dedicated MME/SGSN or via
\- DNS
##### 5.2.3.1.3 Evaluations and Conclusions
The evaluation and conclusions from the Dedicated PGW Selection clause also
apply here.
#### 5.2.3.2 Dedicated PGW Selection
##### 5.2.3.2.1 Scenarios
A dedicated PGW shall be selected by a dedicated MME/SGSN. A common/default
MME/SGSN may also need to select a PGW from a dedicated core-network or
determine if the existing PGW is also able to serve a particular dedicated
core-network.
##### 5.2.3.2.2 Solutions
##### 5.2.3.2.2.1 DNS Based PGW Selection {#dns-based-pgw-selection .H6}
The DNS based solution should meet the following requirements:
\- Enable the MME/SGSN to DNS query for PGWs that serve a particular UE Usage
Type and receive back the set of PGWs that serve this UE Usage Type.
\- Enable the MME/SGSN to determine from DNS the UE Usage Type a particular
PGW is able to serve.
\- Some of the values of UE Usage type will be standardized, for example,
\"general MTC\", \"delay tolerant MTC\", etc.
NOTE: The details of the DNS based solution will be developed by Stage-3 CT
WG4 group.
##### 5.2.3.2.2.2 Configuration Based PGW Selection {#configuration-based-pgw-
selection .H6}
In this solution both the dedicated and non-dedicated MME/SGSNs have
configuration of mapping between dedicated PGWs and their corresponding UE
Usage Types.
##### 5.2.3.2.3 Evaluations and Conclusions
##### 5.2.3.2.3.1 Evaluation {#evaluation-2 .H6}
The DNS based solution is scalable whereas the configuration based solution is
not.
##### 5.2.3.2.3.2 Conclusion {#conclusion-2 .H6}
Enhancements to the DNS procedure as proposed in the DNS based solution as
specified in clause 5.2.3.2.1.1 is recommended.
If the operator\'s network is simple, e.g. only one dedicated core-network
with very few dedicated PGWs, the operator may deploy a configuration based
solution as specified in 5.2.3.2.1.2. However, this solution is not scalable
and changes in IP addressing of PGWs will need to be reflected in
configuration changes.
### 5.2.4 HSS-initiated Dedicated CN Node Reselection
#### 5.2.4.1 Scenario Description
In this case, based on subscription parameter changes in the HSS, the CN nodes
for the UE need to be changed.
The subscription changes may be applied to a large number of devices and the
same considerations as in the case of MME rebalancing as in TS 23.401 [4]
clause 4.3.7.3 should be considered. Gradual rather than sudden redirection of
the UEs should be performed as a sudden redirection of large number of
subscribers could overload the core network nodes (and possibly the RAN if
paging is needed) in the redirected core-network pool. With minimal impact on
network and the user\'s experience, the subscribers should be off-loaded
within a reasonable amount of time.
The approach shall also enable transfer of large groups of subscribers to
another CN when the operator of the serving network changes the configuration,
which determines which dedicated CN serves which UE Usage Types.
#### 5.2.4.2 Solutions
##### 5.2.4.2.1 Solution 1: Combination of S1/Iu Release with Load balancing
TAU/RAU and Detach with Reattach Required
The overall procedure is shown in the figure below.
Figure 5.2.4.2.1-1: HSS Initiated CN Node Change
1\. The HSS sends an Insert Subscriber Data Request (IMSI, Subscription Data)
message to the MME. The Subscription Data includes UE Usage Type information.
2\. The MME updates the stored Subscription Data and acknowledges the Insert
Subscriber Data Request message by returning an Insert Subscriber Data Answer
(IMSI) message to the HSS.
3\. The MME determines that UE Usage Type has changed for the UE. The MME
determines if PGW needs to change.
Steps 4a or 4b are executed if the UE is in ECM-CONNECTED mode.
4a. If the PGW needs to be relocated, the MME performs detach with re-attach
required for the UE. When the UE performs re-attach the procedure for
Soluiton1 in assignment of MME/SGSN during Attach is performed.
4b. If the PGW does not need to be relocated, the MME performs the S1 Release
with Load balancing TAU required procedure. To redirect ECM-CONNECTED mode
UEs, the MME initiates the S1 Release procedure with release cause \"load
balancing TAU required\" (TS 23.401 [4] clause 5.3.5). The S1 and RRC
connections are released and the UE initiates a TAU but provides neither the
S-TMSI nor the GUMMEI to eNodeB in the RRC establishment. When the UE performs
TAU, the procedure for Solution1 in assignment of MME/SGSN during TAU/RAU is
performed.
NOTE: The MME should not release all S1 connections which are selected to be
released immediately when redirection is initiated. The MME may wait until the
S1 Release is performed due to inactivity. When all the UEs are to be
redirected completely the MME can enforce an S1 Release for all remaining UEs
that were not offloaded by normal TAU procedures or by S1 releases caused by
inactivity.
Steps 4c or 4c are executed if the UE is in ECM-IDLE mode.
4c. If the PGW needs to be changed, either (i) the MME will page the UE and
when the UE performs a Service Request procedure, the MME sends a Service
Reject with EMM cause \"Implicitly Detached\" as specified in TS 24.301 [9],
or (ii) the UE performs TAU and the MME will reject TAU with EMM Cause
\"Implicitly Detached\". In both cases, when the UE reattaches, the UE gets
redirected to the appropriate core network.
4d. If the PGW does not need to be changed, the MME waits for the UE to
perform (i) Service Request procedure. At the end of the procedure the MME
initiates the S1 Release procedure with release cause \"load balancing TAU
required\" as in Step 4b or (ii) normal or periodic TAU/RAU the procedure for
Solution 1 in assignment of MME/SGSN in TAU/RAU is used to redirect the UE to
the appropriate CN node. For Solution 1, in case of the periodic TAU, the
MME/SGSN performs a RAN-reroute of the TAU/RAU request message right after the
TAU Request message arrives at the MME. For Solution 1, in case of normal TAU
to new MME/SGSN, the RAN-reroute occurs after the subscription is obtained
from the HSS.
To redirect UEs in ECM-IDLE state without waiting for the UE to perform a TAU
or send a Service Request and become ECMâ€‘CONNECTED, the MME first pages the UE
to bring it to ECM-CONNECTED state. Then follow the solutions provided for the
connected mode.
Similar procedures apply for the case of UTRAN and GERAN.
##### 5.2.4.2.2 Solution 2: Using Cancel Location with Reattach for HSS-
initiated Dedicated CN Node Reselection
Given that changing the UE Usage Type in the HSS subscription information
should be a rare event, it is considered acceptable to do a reattach in such
rare occasions. This allows existing procedures to be used. There are no
impacts on any interfaces.
Figure 5.2.4.2.2-1: HSS Initiated CN Node Change based on CLR/CLA
1\. When a UE Usage Type parameter in a HSS record is changed the HSS sends a
Cancel Location Request (Cancellation Type = Subscription Withdrawal, CLR-flag
= Reattach-Required) message to the MME/SGSN. The HSS applies a logic using
local or external configuration to verify if the changed UE Usage Type would
trigger a change of dedicated core network in the MME/SGSN or not. If not, the
HSS omits sending the Cancel Location Request above. The HSS may apply an
upper limit for the frequency of the number of sent Cancel Location Request
messages due to UE Usage Type changes in the HSS, to avoid overload of the
network.
2\. The dedicated MME/SGSN acknowledges the CLR by sending a Cancel Location
Answer message to the HSS.
3\. When the UE is in ECM-IDLE mode and unreachable e.g. due to PSM, etc, the
MME/SGSN makes a network initiated Detach of the UE triggered by the DCN
reattach pending flag (which is also cleared in the MM Context). The re-attach
required flag in the Detach message is set, to trigger the UE to re-attach to
the network. The MME/SGSN may apply an upper limit for the frequency of the
number of sent Detach messages triggered by DCN reattach pending flags, to
avoid overload of the network.
4\. The UE makes a new attach to the network according to the procedure
described in clause 5.2.1.1.1.2.2 \"Re-routing before NAS security\" or in
clause 5.2.1.1.1.2.1 \"Redirection after Update Location Procedure\" and gets
steered to the correct Dedicated CN based on the updated UE Usage Type in the
HSS subscription information.
##### 5.2.4.2.3 Solution 3: GUTI reallocation before TAU or Re-Attach
The overall approach transfers UEs from one CN to another, when needed due to
a change of the subscription parameter that determines the association with a
specific CN or by changing the configuration of the serving network on which
specific CN serves certain UE Usage Types. The approach provides different
options for transferring UEs of different NAS connection states. Especially
when larger groups of UEs need to change the CN, it may be preferable to wait
for the UEs to become active before executing the transfer of the UEs to
another CN. In such cases the MME may wait for a Service Request or a TAU
Request from the UE whose CN should be changed. For the UEs that become seldom
active, the MME may use paging to bring them to connected state. The approach
with all its options is described in the figure below.
Figure 5.2.4.2.3-1: HSS Initiated CN Node Change
1\. In case the procedure is used to transfer the UE to another dedicated CN
due change of subscriber data, the HSS sends an Insert Subscriber Data Request
(IMSI, Subscription Data) message to the MME. The Subscriber Data indicate a
need for changing the CN.
2\. The MME updates its stored Subscriber Data and acknowledges the Insert
Subscriber Data Request message by returning an Insert Subscriber Data Ack
message.
3\. If the MME decides to transfer the UE immediately to another CN, the MME
pages the UE if it is in idle mode. Alternatively the MME waits until the UE
becomes active.
4\. Either triggered by the paging or by uplink data the UE initiates NAS
connection establishment by sending a Service Request. Alternatively the UE
initiates connection establishment by sending a TAU Request.
5a. This step applies when a NAS connection already exists at the point in
time when the MME receives new Subscription Data for the UE or when a NAS
connection is established with the Service Request procedure. The MME
determines the new CN and reallocates the GUTI with a new GUTI that contains
the null-MMEGI of the new CN and its own MMEC. The MME also allocates a non-
broadcast TAI to the UE.
5b. This step applies when the NAS connection is established with a TAU
Request. The MME determines the new CN and returns a TAU Accept with a new
GUTI containing the null-MMEGI of the new CN and its own MMEC and a non-
broadcast TAI.
6\. If the PGW needs to be changed, i.e. when the PDN connection cannot be
maintained under the new dedicated CN, the MME performs network initiated
detach procedure with \"re-attach required\".
7\. The MME requests release of the S1/RRC connection.
8\. The next Attach Request (happens after UE got detached) or next TAU
Request (all other cases as above) the eNodeB routes the request to an MME of
the new CN due to the null-MMEGI. The new MME performs Attach/TAU procedure
without any redirection needs.
##### 5.2.4.2.4 Solution 4: MME triggered S1 handover
1\. The HSS sends an Insert Subscriber Data Request (IMSI, Subscription Data)
message to the MME. The Subscription Data includes UE Usage Type information.
2\. The MME updates the stored Subscription Data and acknowledges the Insert
Subscriber Data Request message by returning an Insert Subscriber Data Answer
(IMSI) message to the HSS.
3\. The MME determines that UE Usage Type has changed for the UE.
4a. If the UE is in ECM-CONNECTED mode the MME triggers handover that is
performed as described in figure 5.2.1.1.1.2.4-1. If the PGW needs to be
changed the new dedicated MME initiates Detach with \"re-attach requested\"
after the handover procedure completes.
4b. If the UE is in ECM-IDLE, the MME can either (i) first page the UE to
bring it to ECM-CONNECTED state or (ii) wait for the UE to perform
periodic/normal TAU/ Service Request procedure and then trigger handover as in
4a.
#### 5.2.4.3 Evaluations and Conclusions
Please refer to clause 5.2.1.3.
## 5.3 CS Domain Specific Functions
Editor\'s note: This clause contains the specific function of CS domain.
### 5.3.1 Assignment of dedicated MSC
#### 5.3.1.1 Assignment during Attach
##### 5.3.1.1.1 E-UTRAN Attach
##### 5.3.1.1.1.1 Scenario Description {#scenario-description-6 .H6}
Editor\'s note: Should cover the following scenarios: (i) Attach with
IMSI/GUTI.
##### 5.3.1.1.1.2 Solutions {#solutions-10 .H6}
##### 5.3.1.1.1.3 Evaluations and Conclusions {#evaluations-and-conclusions-6
.H6}
##### 5.3.1.1.2 UTRAN Attach
##### 5.3.1.1.2.1 Scenario Description {#scenario-description-7 .H6}
Editor\'s note: Should cover the following scenarios: (i) Iu GPRS/IMSI Attach
(NMO-I), (ii) Iu IMSI Attach (NMO-II).
##### 5.3.1.1.2.2 Solutions {#solutions-11 .H6}
##### 5.3.1.1.2.3 Evaluations and Conclusions {#evaluations-and-conclusions-7
.H6}
##### 5.3.1.1.3 GERAN Attach
##### 5.3.1.1.3.1 Scenario Description {#scenario-description-8 .H6}
Editor\'s note: Should cover the following scenarios: (i) Gb GPRS/IMSI Attach
(NMO-I), (ii) Gb IMSI Attach (NMO-II).
##### 5.3.1.1.3.2 Solutions {#solutions-12 .H6}
##### 5.3.1.1.3.3 Evaluations and Conclusions {#evaluations-and-conclusions-8
.H6}
### 5.3.2 Maintaining Dedicated CN Nodes
#### 5.3.2.1 CN node change by Combined TAU/LAU/Combined RAU/LAU/LAU only
##### 5.3.2.1.1 Scenario Description
Editor\'s note: Should cover the following scenarios: (i) Combined TAU/LAU,
(ii) Combined RAU/LAU (NMO-I), (iii) LAU only (NMO-II).
##### 5.3.2.1.2 Solutions
##### 5.3.2.1.3 Evaluations and Conclusions
#### 5.3.2.2 CN node change by handover
##### 5.3.2.2.1 Scenario Description
Editor\'s note: Should cover the following scenarios: handover with from an
old MSC supporting DECOR to a new MSC supporting DECOR.
##### 5.3.2.2.2 Solutions
##### 5.3.2.2.3 Evaluations and Conclusions
### 5.3.3 HSS-initiated Dedicated CN Node Reselection
#### 5.3.3.1 Scenario Description
In this case, based on subscription parameter changes in the HSS, the MSC for
the UE needs to be changed.
#### 5.3.3.2 Solutions
#### 5.3.3.3 Evaluations and Conclusions
## 5.4 Other procedures
Editor\'s note: Should consider additional scenarios if generated during the
study.
# 6 Conclusions
The selected solution for supporting dedicated core networks feature is the
following:
\- For initial assignment of dedicated MME/SGSN nodes, Solution-1 of clauses
5.2.1.1.1.2.1 and 5.2.1.1.2.2.1 as captured in the conclusion clause 5.2.1.3.1
\- For maintaining UEs in dedicated core networks for idle-mode TAU/RAU,
solution as specified in clause 5.2.2.1.3.
\- For maintaining UEs in dedicated core networks during handover, DNS based
solution as specified in clause 5.2.2.2.2.2.
\- For selection of SGW and PGW, DNS based solution as specified in clause
5.2.3.2.2.1.
NOTE: The details of the DNS based solution will be developed by Stage-3 CT W4
group.
For the CS domain, the solution similar to the selected solution for PS domain
will be captured directly in normative specifications.
Overview of the feature for supporting dedicated core-networks will be
captured in TS 23.401 [4] for E-UTRAN and TS 23.060 [5] for UTRAN with the
details captured in TS 23.236 [7].
#