# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document studies and evaluates architecture enhancements for a
service capability exposure framework wherein 3GPP system provided service
capabilities are exposed via one or more standardized APIs, e.g. the OMA-
API(s). As part of this work it will be identified how the APIs and the 3GPP
system functionality act together to expose 3GPP service capabilities. The
definition of APIs is out of scope of this work item.
The present document will also define the architectural enhancements for new
service capabilities and services (based on the Stage 1 normative
requirements) that are exposed via the service capability exposure framework.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.368: \"Service Requirements for Machine-Type Communications\".
[3] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[4] OMA API Inventory:
\"http://technical.openmobilealliance.org/API/APIsInventory.aspx\".
[5] 3GPP TS 22.101: \"Service Aspects; Service Principles\".
[6] 3GPP TS 22.115: \"Service aspects; Charging and billing\".
[7] 3GPP TS 23.203: \"Policy and charging control architecture\".
[8] 3GPP TR 23.789: \"Monitoring Enhancements\".
[9] 3GPP TR 23.769: \"Group based Enhancements\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], TS 22.368 [2] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
MTC Machine Type Communications
M2M Machine-to-Machine
# 4 Architectural Considerations
The current 3GPP system allows for exposure of some of the 3GPP service
capabilities to external 3rd party Application providers via the OSA framework
as defined in 23.198. There is a need to further enhance the 3GPP network
architecture to allow operators to interact with 3rd party service providers
in exposing a greater set of 3GPP service capabilities as requested by 3rd
parties using a standardized service capability exposure framework. The
following is a list of architectural considerations for the provision of such
a service capability exposure framework (SCEF) within the 3GPP system:
\- SCEF shall be within an operator\'s trust domain;
\- SCEF shall have the flexibility to allow operators to expose selected 3GPP
service capabilities to 3rd party application providers, via standardized APIs
defined by OMA, GSMA, other SDOs, or operator proprietary APIs;
\- Impacts to existing 3GPP interfaces and entities shall be minimized.
# 5 Key Issues
## 5.1 Key Issue 1 - Service Capability Exposure Framework
### 5.1.1 Description
The 3GPP system has unique core assets, denoted as 3GPP service capabilities,
such as Communications, Context, Subscription and Control that may be valuable
to application providers. Communications refers to functions like voice
calling, SMS, MMS. Subscription includes Subscription identity, feature sets
and preference. Context covers real-time user information such as location,
presence, profile, device capabilities and data connection type. Control
addresses functions like Quality of Service, policy and security.
3GPP Mobile Network Operators (MNO) can offer value added services by exposing
these 3GPP service capabilities to external application providers, businesses
and partners using web based API. In addition, 3GPP mobile network operators
can combine other internal or external services with their network
capabilities to provide richer, composite API services to their partners. This
brings mobile network intelligence to applications, allowing new, profitable
business relationships to be created between MNOs and a wide range of external
providers of enterprise/business solutions and web-based services or content.
Such 3GPP services capabilities are already offered today to some extent to
external application provider e.g. via OMA API(s). This key issue aims to
specify how 3GPP service capabilities can be exposed to external entities
through a service capability exposure framework, which includes the
identification and definition of the service capabilities on the one hand and
the exposure and discovery of the exposed capabilities on the other hand. This
will also identify how the API(s) and the 3GPP system functionality act
together to expose 3GPP service capabilities.
### 5.1.2 Required Functionality
\- Service capability exposure framework should provide the capability for the
external entities to discover the exposed services.
\- Service capability exposure framework should provide authorised and secure
access to 3GPP system service capabilities and execution of the exposed
services under operator control.
\- Service capability exposure framework should be extensible for exposing new
services.
## 5.2 Key Issue 2 - Setting up an AS session with required QoS
### 5.2.1 Description
TS 22.101 [5] specifies the requirement of setting up data sessions with
specified QoS and priority:
_\"The 3GPP Core Network shall enable a 3rd party service provider to request
setting up data sessions with specified QoS (e.g. low latency or jitter) and
priority handling to a UE that is served by the 3rd party service provider.\"_
The issue is to specify how to set up the AS session with the required QoS and
priority handling.
### 5.2.2 Required functionality
\- Service capability exposure framework should allow the 3rd party service
provider to request setting up an AS session with adequate QoS and priority
handling required for the service provided by the 3rd party.
\- Service capability exposure framework shall be able to determine whether
the request from the 3rd party is allowed.
\- Service capability exposure framework shall be able to charge the UE
session based on the provided QoS and priority handling.
## 5.3 Key Issue 3 - Change the chargeable party at the session set-up or
during the session
### 5.3.1 Description
The requirement in TS 22.115 [6] Clause 5.1.3 \"Charged Party\" specifies the
requirement to support changing the chargeable party:
_\"It shall be possible to change the chargeable party at the session set-up
or during the session._
_The 3GPP Core network shall allow the 3rd party service provider to request
which of the UE subscriber or the 3rd party service provider has to be charged
for an ongoing communication in order to allow:_
_\- The UE subscriber to be charged for the traffic flow._
_\- The 3rd party service provider to be charged for the traffic flow.\"_
The issue is to specify how to set the chargeable party at the session set-up
or during the session.
### 5.3.2 Required functionality
\- Service capability exposure framework should allow the 3rd party service
provider to request changing the chargeable party at the session set-up or
during the session.
\- The 3GPP network should be able to change the chargeable party between the
UE subscriber and the 3rd party for the traffic flow.
## 5.4 Key Issue 4 - Support of 3rd party interaction on information for
predictable communication patterns
### 5.4.1 Description
TS 22.101 [5] specifies the requirement of supporting 3rd party interaction on
information for predictable communication patterns of a UE:
_\"The 3GPP Core Network shall enable a 3rd party service provider to provide
information about predictable communication patterns of individual UEs or
groups of UEs that are served by this 3rd party service provider. Such
communication patterns may include:_
_\- Time and traffic volume related patterns (e.g. repeating communication
initiation intervals, desired \'keep alive\' time of data sessions,
average/maximum volume per data transmission, etc.)._
_\- Location and Mobility related patterns (e.g. indication of stationary UEs,
predictable trajectories of UEs, etc.)._
_This information may be used by the 3GPP system to optimize resource
usage.\"_
The issues for implementing such requirement are:
\- How the 3GPP network requests 3rd party service provider to provide the
information for communication pattern of a UE;
\- How 3GPP network elements receive the information provided by the 3rd party
service provider.
As the SCEF is already defined to abstract the services from the underlying
3GPP network interfaces, it is assumed that the SCEF is used to interact with
the 3rd party service provider for predictable communication patterns. Thus,
the SCEF shall be able to enable a 3rd party service provider to provide
information about predictable communication patterns of individual UEs or
groups of UEs, based on requests from network elements or configuration.
The type of communication patterns may include time, location and mobility,
etc. Such different communication patterns may be used by different network
elements. Hence the SCEF needs be able to distribute the received information
for communication patterns to different network elements.
Based on the above analysis, the key issue that needs to be addressed by
solutions is what kinds of functionalities need to be supported in the SCEF
for interacting with the 3rd party service provider.
### 5.4.2 Required Functionality
\- SCEF shall be able to receive communication patterns of individual UEs or
groups of UEs from authorized 3rd party service providers in a secure manner,
and if applicable, send the relevant information derived from the
communication patterns to the appropriate network elements.
## 5.5 Key Issue 5 - Informing the 3rd party about a UE\'s connection
properties
### 5.5.1 Description
The requirement in TS 22.101 [5] Clause 29.2 \"Exposed Services and
capabilities\" specifies the requirement to inform the 3rd party about a UE\'s
connection properties:
_\"The 3GPP Core Network shall be able to inform a 3rd party about a UE\'s
connection properties._
_NOTE: Connection properties of a UE describe the average data rate range or
non-absolute value (e.g. high, medium or low) that the UE is likely to be able
to obtain at the current location. The connection properties can, for example,
be generated from the UE\'s RAT type the UE is currently attached to, the load
conditions at its current location and/or other parameters.\"_
The issue is to specify how to inform the 3rd party about a UE\'s connection
properties (e.g. high, medium or low data rate). The connection properties
should be derived from the RAT type the UE is currently connected with, the
load conditions at its current location, operator policies that are active for
the whole UE traffic or the AS service traffic and/or other parameters.
NOTE: The details of the UE connection properties information are left for
stage 3.
### 5.5.2 Requirement functionality
\- Service capability exposure framework should allow the 3rd party service
provider to request the connection properties of a specific UE,
\- The 3GPP network should be able to inform the 3rd party about the
connection properties of a specific UE.
## 5.6 Key Issue 6 - Informing the 3rd party about potential network issues
### 5.6.1 Description
The requirement in TS 22.101 [5] clause 29.2 \"Exposed Services and
capabilities\" specifies the requirement to inform the 3rd party about
potential network issues:
_\"The 3GPP Core Network shall be able to indicate to a 3rd party service
provider when data transmissions have a risk of incapability to provide
expected throughput and/or QoS in a specific area (e.g. due to forecasted high
traffic load in that area). Additionally, an estimate may be given when the
high traffic load is expected to be mitigated.\"_
The issue is to specify how to inform the 3rd party about potential network
issues. The network status information provided to the 3rd party contains,
depending on operator configuration (governed by SLAs, network topology, usage
etc.), either:
  * The current congestion status in the specified area (the 3rd party is interested in); or
  * Generalized parameters describing the network status (e.g. load level (high, medium or low), mean load level etc.) that are derived from the congestion status.
  * Optionally, a time interval to inform the 3rd party when re-checking for network status is possible.
NOTE 1: The details of the network status information provided to the 3rd
party are left for stage 3.
NOTE 2: Providing information about the potential impact of the network status
on the expected throughput and/or QoS and the expected time of the impact is
not possible due to the lack of accurate information about the situation at
the involved RAN nodes and due to the spatial aggregation.
### 5.6.2 Requirement functionality
Service capability exposure framework should allow the 3rd party service
provider to be informed about potential network issues in a specific area via:
\- Request from the 3rd party service provider to be continuously informed
about network status changes within a geographic area. Continuous reporting
may be requested with additional criteria such as maximum number of reports,
reporting interval, report until a certain threshold is reached etc.
\- An explicit request from the 3rd party service provider to be informed one-
time about network status for an individual subscriber or a group of
subscribers in a geographic area.
\- Request from 3rd party service provider to be informed one-time about
network status in a geographic area.
NOTE: Geographic area specified by 3rd party service provider could be at cell
level (CGI/ECGI), LA/TA/RA level or other formats e.g. shapes (e.g. polygons,
circles etc.) or civic addresses (e.g. streets, districts etc.) as referenced
by OMA Presence API [4].
## 5.7 Key Issue 7 - 3GPP resource management for background data transfer
### 5.7.1 Description
TS 22.101 [5] specifies the requirement of 3rd party interaction for 3GPP
resource management for background data transfer, as follows:
_\"The 3GPP Core Network shall support a 3rd party service provider request
for background data transfer to UEs that are served by the 3rd party service
provider, indicating:_
_\- the desired time window for the data transfer,_
_\- the volume of the data expected to be transferred in a geographic area TS
23.032 [56]._
_The 3GPP Core Network shall be able to inform the 3rd party service provider
about:_
_\- one or more recommended time windows for the data transfer and_
_\- for each time window the maximum aggregated bitrate for the set of UEs in
the geographical area indicated by the 3rd party service provider._
_Additionally, the 3GPP Core Network shall be able to inform the 3rd party
service provider about the charging policy that will be applied to the 3rd
party service provider if the data are transferred within the recommended time
window and if transmission rates stay below the limits of the respective
maximum aggregated bitrate.\"_
The reason for the above requirement is to inform the 3rd party Service
Provider (SP) on the different recommended time windows for data transfer to
specific UEs in a geographical area, maximum bitrate that can be handled
during these different time windows, and the applicable charging rates. This
information is useful for the 3rd party SP to keep their costs lower by
favouring time windows for data transfer during non-busy hours that are less
costly and also able to handle larger bitrates. And only use the more costly
time windows when absolutely essential.
### 5.7.2 Required functionality
In response to a request from the 3rd party service provider that includes the
target geographic area, the target group for transmission, the content
characteristics (e.g., size), and target transmission start time(s):
\- The service capability exposure framework should inform the 3rd party with
acceptance/rejection of the requested time window, or different recommended
time windows for data transfer to the target group in the specified geographic
area, and the expected start and completion times.
\- It should also be possible for the service capability exposure framework to
inform the 3rd party service provider on the charging policy for the different
recommended time windows for data transfer.
NOTE: The expected start and completion times for the recommended time windows
are based on historical or projected data and as such cannot be guaranteed.
The actual network load conditions at the time of data transfer will dictate
the final outcome.
# 6 Solutions
## 6.1 Solution 1: AESE Architecture
### 6.1.1 Description
This solution addresses the Key issue 1 - \"Service Capability Exposure
Framework\".
#### 6.1.1.1 General
The exposure of services by the network creates a \"toolbox\" of capabilities
that, with proper authorisation, can be used, for example, to retrieve
information, to request specific services, to receive notifications, to
request the setting of specific parameters, etc.
#### 6.1.1.2 Architectural Diagram
Figure 6.1.1.2-1 provides the architecture for service capability exposure.
Figure 6.1.1.2-1: Service Capability Exposure Architecture
The trust domain (see figure 6.1.1.2-1) cover entities that are protected by
adequate network domain security. The entities and interfaces within the trust
domain may all be within one operator\'s control, or some may be controlled by
a trusted business partner which has a trust relationship with the operator
e.g. another operator or a 3rd party. The security requirements for the trust
domain are out of scope of this document and are assumed to be within SA WG3
scope.
#### 6.1.1.3 Service Capability Exposure Function
The Service Capability Exposure Function (SCEF) provides a means to securely
expose the services and capabilities provided by 3GPP network interfaces. The
SCEF provides a means for the discovery of the exposed service capabilities.
The SCEF provides access to network capabilities through homogenous network
application programming interfaces (e.g. Network API) defined by OMA, GSMA,
and possibly other standardisation bodies. The SCEF abstracts the services
from the underlying 3GPP network interfaces and protocols.
NOTE 1: Defining interfaces that permit the SCEF to access services or
capabilities at either a new or an existing 3GPP Network Element lies within
3GPP scope. The choice of which protocols to specify for such new 3GPP
interfaces (e.g. DIAMETER, RESTful APIs, XML over HTTP, etc.) will depend on
multiple factors including but not limited to the needs of that specific
interface, ease of exposure of requested information, etc.
Individual instances of SCEF may vary depending on what service capabilities
are exposed and what API features are supported.
The SCEF is always within the trust domain. An application can belong to the
trust domain or may lie outside the trust domain
The functionality of the SCEF may include the following:
\- Authentication and Authorization:
\- Identification of the API consumer,
\- Profile management,
\- ACL (access control list) management.
\- Ability for the external entities to discover the exposed service
capabilities
\- Policy enforcement:
\- Infrastructural Policy: policies to protect platforms and network. An
example of which maybe ensuring that a service node such as SMS-SC is not
overloaded.
\- Business Policy: policies related to the specific functionalities exposed.
An example may be number portability, service routing, subscriber consent etc.
\- Application Layer Policy: policies that are primarily focused on message
payload or throughput provided by an application. An example may be
throttling.
\- Assurance:
\- Integration with O&M systems,
\- Assurance process related to usage of APIs.
\- Accounting: traffic documentation
\- Access: issues related to external interconnection and point of contact
\- Abstraction: hides the underlying 3GPP network interfaces and protocols to
allow full network integration. The following functions are among those that
may be supported:
\- Underlying protocol connectivity, routing and traffic control,
\- Mapping specific APIs onto appropriate network interfaces,
\- Protocol translation.
NOTE 1: Abstraction is not a mandatory SCEF functionality and is applied only
in cases where required functionality is not natively provided by 3GPP
network.
NOTE 2: The Service Capability Exposure Function includes Network APIs which
are defined by OMA/GSMA for various services such as SMS, MMS, Location,
Payment, Third Party Call, Multimedia Conference Call and other IMS based
services, etc. A list of OMA Network API is available at \'OMA API Inventory\'
[4]. For any new service capability exposure, the work split between 3GPP and
OMA/GSMA/other standards body for defining new Network APIs and related
exposure functionalities is FFS.
Applications operating in the trust domain may utilize only a subset of
functionalities (e.g. authentication, authorization, etc.) provided by the
SCEF.
Applications operating in the trust domain can also access network entities
(e.g. PCRF), wherever the required 3GPP interface(s) are made available,
directly without the need to go through the SCEF.
#### 6.1.1.4 Example: SMS Service Capability Exposure
Figure 6.1.1.4-1: SMS Service Capability Exposure
Figure 6.1.1.4-1 provides an example of SMS Service capability exposure. A 3rd
party application uses the SMS oneAPI for sending and receiving SMS messages.
The SMS capability Exposure provides a homogeneous interface to all
applications. The SMS abstraction supports different SMS messaging transport
protocols such as SMPP, UCP, etc. The SMS Abstraction will manage and control
all network sessions, including load control and message windowing, to each
SMSC it connects to. It maps the specific API to the T4 and Tsms interfaces
towards the SMS-SC/GMSC/IWMSC.
### 6.1.2 Impacts on existing nodes and functionality
The solution provides a generic architecture model for service capability
exposure and does not introduce any changes or enhancements for existing nodes
and functionality. Impacts may come from exposing specific capabilities and
services, which is not considered under this generic architecture model.
### 6.1.3 Solution Evaluation
The Service Capability Exposure Architecture described by this solution can
address everything what is described under Key issue \"Service Capability
Exposure Framework\".
The Service Capability Exposure Architecture of this solution should be
adopted as basis for any work on exposing capabilities and services.
## 6.2 Solution 2: Rel-12 MTC architecture with API-GWF
### 6.2.1 Description
This solution addresses the Key issue 1 - \"Service Capability Exposure
Framework\".
This solution proposal modifies the Relâ€‘12 MTC architecture for device
triggering by introducing an API GateWay Function (API-GWF), which provides
the horizontal functions of a standardised Service Capability Exposure
Framework.
Figure 6.2.1-1: Architecture for device triggering applying an API-GWF
The API-GWF hosts all the Service Capability Exposure Framework functions,
like providing the API(s) with secured, authenticated and authorised access to
capabilities offered by the 3GPP system. And it provides charging for the API
usage.
For the shown MTC-IWF it means: there is no need for performing charging or to
verify, which SCS is permitted to trigger a device as that horizontal API
framework functions are provided by the API-GWF. The Relâ€‘12 MTC-IWF is thereby
decomposed into specific device triggering capability functionality (provided
by that MTC-IWF) and general Service Capability Exposure Framework
functionality (provided by the API-GWF).
### 6.2.2 Impacts on existing nodes and functionality
The functionality of the Relâ€‘12 MTC-IWF is reduced. Charging and access
control functions are provided by the API-GWF.
### 6.2.3 Solution Evaluation
Editor\'s note: Use this section for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.3 Solution 3: Setting up an AS session with required QoS
### 6.3.1 Description
This solution addresses the Key issue 2 - \"Setting up an AS session with
required QoS\".
The main idea of the solution is: SCEF receives the API request from the 3rd
party AS to provide QoS for an AS session, SCEF transfers the request to
provide QoS for an AS session to PCRF via Rx interface.
Figure 6.3.1-1: Setting up an AS session with required QoS
1\. When setting up the connection between AS (Application Server) and the UE
with required QoS for the service, the AS sends an on-demand QoS request
(application information, reference to a pre-defined QoS) to the SCEF.
Optionally, a period of time or a traffic volume for the requested QoS can be
included in the AS request.
2\. The SCEF authorizes the AS request and may apply policies to control the
overall amount of pre-defined QoS authorized for the AS service provider (as
defined for the Service Capability Exposure Framework in section 6.1).
NOTE 1: The SCEF notifies the AS at this point if the authorization fails.
3\. SCEF sends the request to the PCRF via Rx interface. The message includes
the following information:
\- Application information:
\- IP filter information to identify the service data flow for policy control,
\- AF application identifier.
> \- A reference to a pre-defined QoS for that AS.
\- Optionally, the media/application bandwidth, media type, priority
information.
\- Optionally, a period of time or traffic volume for the requested QoS
feature.
NOTE 2: The concept of requesting a pre-defined QoS is specified by OMA in the
RESTful Network API for Quality of Service [4]. The pre-defined QoS is part of
the SLA between the operator and the 3rd party AS.
NOTE 3: It is assumed that the reference to pre-defined QoS information can be
transferred by existing Rx parameters. Before the reference to pre-defined QoS
information is forwarded, the SCEF can perform a mapping from the name space
of the 3rd party AS to the name space of the operator.
4\. The PCRF derives the required QoS based on the information provided by the
AS and determines whether this QoS is allowed based on e.g. network policy and
the current network load status, and notifies the result to SCEF.
> NOTE 4: The SCEF notifies the AS at this point if the QoS request is not
> accepted.
5\. As specified in TS 23.203 [7], PCRF generates the PCC rules for the
service based on the requested QoS and provides these PCC rule(s) to the PCEF.
NOTE 5: The applicable charging rate for the requested QoS is part of the SLA
between the operator and the 3rd party AS. The PCRF can therefore apply an
appropriate charging key whenever the requested QoS is authorized for the
service.
6\. The PCRF notifies the SCEF whether the resources corresponding to the QoS
request are established or not.
> 7\. The SCEF acknowledges the notification from the PCRF.
8\. The SCEF notifies the AS whether the QoS request is granted or not.
### 6.3.2 Impacts on existing nodes and functionality
The existing QoS negotiation mechanism via Rx reference point is reused, and
the SCEF acts as AF.
The Rx reference point does not need to be enhanced to support the transfer of
a pre-defined QoS parameter.
NOTE: It is assumed that the reference to pre-defined QoS information can be
transferred by existing Rx parameters. Before the reference to pre-defined QoS
information is forwarded, the SCEF can perform a mapping from the name space
of the 3rd party AS to the name space of the operator.
### 6.3.3 Solution Evaluation
The solution addresses the Key issue \"Setting up a UE session with required
QoS\". The 3rd party AS can request the network to provide QoS for the service
based on the application and service requirements with the help of a reference
to pre-defined QoS information. An SLA has to be in place defining the
possible QoS levels and their charging rates. For each of the possible pre-
defined QoS information sets, the PCRF needs to be configured with the
corresponding QoS parameters and their values as well as the appropriate
charging key (or receive this information from the SPR).
From SA WG2 point of view there is no impact on Rx interface.
## 6.4 Solution 4: Change the chargeable party at the session set-up or during
the session
### 6.4.1 Description
This solution addresses the Key issue 3 - \"Change the chargeable party at the
session set-up or during the session\".
The solution addresses key issue \"Change the chargeable party at the session
set-up or during the session\". The main idea is that the 3rd party indicates
the expected chargeable party to the SCEF, and then SCEF transfers the request
of changing the chargeable party to PCRF via Rx interface.
NOTE 1: This solution is only applicable for sessions with a terminating AS.
NOTE 2: The authorization of the AS can be based on existing functionality in
the PCRF (as described in TS 23.203 [7], clause 6.2.1.0).
#### 6.4.1.1 Set the chargeable party at the session set-up
When setting up the connection between the AS and UE, the AS may request to
become the chargeable party for the session to be set up according to the
procedure in clause 6.4.1.1. This is all existing functionality defined in TS
23.203 [7] for sponsor connectivity besides exposing it via SCEF. The AS may
also request to keep the session traffic subject to UE charging with the
option to become the chargeable party at a later point in time. This is new
functionality as it is not possible to prepare the system for sponsoring
application traffic at session setup without starting to sponsor the traffic.
Figure 6.4.1.1-1: Set the chargeable party at the session set-up
1\. When setting up the connection between the AS and UE, the AS may request
to become the chargeable party for the session to be set up by sending a
request on setting chargeable party (application information, sponsor
information) to the SCEF, including optionally a usage threshold or an
indication to not activate sponsoring.
NOTE 1: The absence of the indication to not activate sponsoring means that
the 3rd party service provider is the chargeable party. The presence of the
indication to not activate sponsoring means that the 3rd party service
provider is not the chargeable party.
2\. The SCEF authorizes the AS request to sponsor the application traffic.
NOTE 2: The SCEF notifies the AS at this point if the authorization fails.
NOTE 3: Based on operator configuration, the SCEF may skip this step. In this
case the authorization is performed by the PCRF in Step 4.
3\. The SCEF determines the PCRF, e.g. based on the UE\'s IP address, and
sends the message to sponsor the application traffic to the PCRF via Rx
interface. The message includes the following parameters:
\- IP filter information to identify the service data flow for policy control,
and
\- The sponsored data connectivity information defined in TS 23.203 [7], and
\- The indication to not activate sponsoring, if received from the AS.
4\. The PCRF determines whether the request is allowed and notifies the result
to SCEF.
NOTE 4: The SCEF notifies the AS at this point if the QoS request is not
accepted.
NOTE 5: The sponsor remains authorized until the Rx session terminates.
5\. As specified in TS 23.203 [7], PCRF determines the PCC rule(s) for the
specified session containing charging control information indicating that the
3rd party service provider is charged for the traffic. If the PCRF receives
the indication to not activate sponsoring, the traffic remains subject to UE
charging and charging control information shall be set accordingly. The PCC
rule(s) for the specified session shall then be provided to the PCEF. In case
of online charging and depending on operator configuration, the PCEF may
request credit when the first packet corresponding to the service is detected
or at the time the PCC Rule was activated.
6\. The PCRF notifies the SCEF whether the request is accepted or not.
> 7\. The SCEF acknowledges the notification from the PCRF.
8\. The SCEF notifies the AS whether the request is granted or not.
#### 6.4.1.2 Change the chargeable party during the session
This flow is new as so far it is not possible to change the chargeable party,
i.e. the AS starting or stopping to sponsor the application traffic, after
session setup.
Figure 6.4.1.2-1: Change chargeable party during the session
1\. For the ongoing session, the AS sends a request on changing chargeable
party (application information, sponsor information) to the SCEF, including
optionally a usage threshold or an indication to not activate sponsoring.
NOTE 1: The absence of the indication to not activate sponsoring means that
the 3rd party service provider is the chargeable party. The presence of the
indication to not activate sponsoring means that the 3rd party service
provider is not the chargeable party any longer.
2\. The SCEF authorizes the AS request of changing the chargeable party.
NOTE 2: The SCEF notifies the AS at this point if the authorization fails.
NOTE 3: Based on operator configuration, the SCEF may skip this step. In this
case the authorization is performed by the PCRF in Step 4.
3\. The SCEF determines the relevant Rx session with the PCRF based on the IP
filter information received from the AS, and sends the message on setting
chargeable party (sponsor information, IP filter information) to the PCRF via
Rx interface including the usage threshold or the indication to not activate
sponsoring, if received from the AS.
4\. The PCRF determines whether the request is allowed and notifies the result
to SCEF.
NOTE 4: The SCEF notifies the AS at this point if the QoS request is not
accepted.
NOTE 5: The sponsor remains authorized until the Rx session terminates.
5\. The PCRF identifies the affected PCC rule(s) and reacts based on their
current status. If the traffic is subject to UE charging in the PCEF and the
PCRF receives a request without an indication to not activate sponsoring, the
PCC rule(s) for the specified session shall be modified so that the charging
control information indicates that the 3rd party service provider is charged
for the traffic. If the traffic is subject to 3rd party charging in the PCEF
and the PCRF receives a request with an indication to not activate sponsoring,
the PCC rule(s) for the specified session shall be modified so that the
charging control information indicates that the UE is charged for the traffic.
As specified in TS 23.203 [7], PCRF modifies the PCC rule(s) of the service
data flow accordingly and provides them to the PCEF. In case of online
charging and depending on operator configuration, the PCEF may request credit
when the first packet corresponding to the service is detected or at the time
the PCC Rule was activated.
6\. The PCRF notifies the SCEF whether the request is accepted or not.
7\. The SCEF acknowledges the notification from the PCRF.
8\. The SCEF notifies the AS whether the request is granted or not.
### 6.4.2 Impacts on existing nodes and functionality
The existing sponsored data connectivity mechanism via Rx reference point is
reused, and the SCEF acts as AF.
The Rx interface needs to be enhanced to support the transfer of an indication
to not activate sponsoring.
NOTE: There are no impacts on the Gx interface.
The PCRF needs to be enhanced to react upon receiving an indication to not
activate sponsoring by modifying the PCC rule(s) for the specified session so
that the 3rd party service provider is not charged for the traffic.
### 6.4.3 Solution Evaluation
The solution addresses the key issue \"Change the chargeable party at the
session set-up or during the session\". The solution enables a 3rd party
service provider to be set as the chargeable party when setting up the session
or during the session.
## 6.5 Solution 5: 3GPP resource optimizations based on providing predictable
communication patterns of a UE or a group of UEs to the MME
### 6.5.1 Description
This solution addresses the Key issue 4 - \"Support of 3rd party interaction
on information for predictable communication patterns\".
The solution described here defines a mechanism to provide relevant
information of a communication pattern of a UE or a group of UE to the
corresponding core network node in order to enable network resource
optimizations for such UE(s).
#### 6.5.1.1 Communication pattern examples
The SCEF may receive communication patterns for the data traffic and/or the
mobility pattern. Examples what kind of parameters may be contained in these
communication patterns are shown in the tables below. The SCEF shall be able
to select CP parameters for the core network nodes from those communication
patterns.
A set of CP parameters is proposed to be standardized, but all CP parameters
are optional.
Table 6.5.1.1-1: Data traffic communication pattern parameter examples
+----------------------------------+----------------------------------+ | Communication pattern parameter | Description | +----------------------------------+----------------------------------+ | 1) Periodic communication | TRUE: The UE communicates | | indicator | periodically / False: No | | | periodic communication, only on | | | demand. | +----------------------------------+----------------------------------+ | 2) Communication duration timer | Duration interval time of | | | periodic communication | | | [optional, may be used together | | | with 1)] | | | | | | Example: every 5 minutes | +----------------------------------+----------------------------------+ | 3) Periodic time | Interval Time of periodic | | | communication [optional, may be | | | used together with 1)] | | | | | | Example: every hour | +----------------------------------+----------------------------------+ | 4) Scheduled communication time | Time zone and Day of the week | | | when the UE is available for | | | communication [optional] | | | | | | Example: Time: 13:00-20:00, Day: | | | Monday | +----------------------------------+----------------------------------+
Table 6.5.1.1-2: Mobility communication pattern parameter examples
* * *
Communication pattern parameter Description 1 ) Stationary indication TRUE:
The UE is stationary / False: The UE is mobility [optional]
* * *
#### 6.5.1.2 Architectural assumptions
The following assumptions are made for this solution:
\- SCEF filters and forwards CP parameters based on the received communication
pattern from the 3rd party service provider.
\- SCEF provides the CP parameters to HSS which provides them to the selected
appropriate functional entities (e.g. MME).
\- Only one set of CP parameters are valid at a time, i.e. if the same SCS/AS
or a separate SCS/AS provides new CP parameters, then those override any CP
parameters previously provided.
#### 6.5.1.3 Provisioning of CP parameters
SCEF shall be able to provide the CP parameters to the HSS for distribution to
the MME based on the communication patterns of individual UEs or groups of UEs
received from the 3rd party service provider. The signalling including CP
parameters from SCEF and HSS is per subscriber level (as also HSS to MME).
The figure 6.5.1.3-1 shows the signalling sequence for provisioning of CP
parameters.
Figure 6.5.1.3-1: Signalling sequence for provisioning of CP Parameters
The 3rd party service provider notifies the SCEF about the communication
pattern for the UE or group of UEs. The SCEF may query the HSS for additional
information, authenticates & authorizes the request and then selects the CP
parameters based on operator policy or configuration. The SCEF provides the CP
parameters to the relevant node (e.g. MME via HSS) that initiates the network
resource optimization.
NOTE: The interface between SCEF and AS/SCS is outside the scope of 3GPP and
the messages in the Figure 6.5.1.3-1 are exemplary.
#### 6.5.1.4 Provisioning of CP parameters for enable Core Network assisted
eNodeB parameters impact
TS 23.401 specifies the following:
_\"Core Network Assistance information may be derived by the MME per UE in the
MME based on collection of UE behaviour statistics or other available
information about the expected UE behaviour (such as subscribed APN, IMSI
ranges or other subscription information). For the case of statistics-based
Core Network Assistance information collection, this may be enabled based on
local configuration (e.g. subscribed APN, IMSI ranges or other subscription
information).\"_
The CN assisted parameters provide the eNB with a way to interpret the UE
behaviour like expected \"UE activity behaviour\" and/or \"expected HO
interval\".
The MME provides CN assistance information to the eNodeB if available, during
the setup of the S1 signalling connection (e.g., Attach, Service Request).
In this solution, the Application Server (AS) is aware of the change of the
communication parameters of the UEs. For example, the AS can be aware whether
the UE started or stopped moving for longer time period, especially if the AS
is instructing the UE to do so. The AS provides the corresponding
communication pattern to the SCEF as shown in Figure 6.5.1.3-1, which then
authenticates & authorizes the request and selects appropriate CP parameters
based on operator policy and provides them to the corresponding MME(s) via
HSS. The MME may use the CP parameters for selecting the CN assisted eNB
parameters. The CN assisted eNB parameters are not one-to-one mapped from the
CP parameters received from HSS.
How MME utilize the CP parameters and selects CN assisted data is not
specified and is implementation specific.
In order to support serving node changes due to the mobility of the UE, it is
proposed to store the CP in the HSS, i.e. the SCEF forwards the CP to HSS and
the CP is then downloaded to the MME with the subscriber data.
The following figure is a high level description of the transfer of
information from an MME to eNodeB during a service request procedure, pre-
provisioned by the AS/SCS in step 6 of Figure 6.5.1.3-1.
Figure 6.5.1.4-1: Core Network assisted eNodeB parameters tuning with
Provisioning of CP parameters
### 6.5.2 Impacts on existing nodes and functionality
To enable CN assisted eNB Parameters tuning support the SCEF needs to select
the relevant parameters from the communication patterns for data traffic and
mobility. Further the SCEF provides the CP parameters to the HSS which
forwards the CP parameters to the MME where the MME selects the CN assistance
data.
### 6.5.3 Solution Evaluation
The solution enables an additional way for impacting the selection of CN
assisted eNB parameters in MME.
Depending on the frequency of sending the CP parameters, there may be an
increased signalling to the HSS.
This solution is only applicable for EPC accessed via E-UTRAN.
## 6.6 Solution 6: Inform the 3rd party about a UE\'s connection properties
### 6.6.1 Description
This solution addresses the Key issue 5 - \"Informing the 3rd party about a
UE\'s connection properties\".
The main idea is that the 3rd party AS requests information about the
connection properties of a specific UE from the SCEF. The SCEF either checks
whether it has received an indication about a corresponding PDN connection for
this UE from any PGW and if so, requests connection properties from that PGW
as described in clause 6.6.1.2 or detects that no PCRF is responsible for this
PDN connection and identifies and interacts with the relevant PGW as described
in clause 6.6.1.3. Otherwise a PCRF is available and the SCEF can forward the
request to the PCRF responsible for the UE and the service as described in
clause 6.6.1.1. The PCRF derives the connection properties for the service of
the UE based on the available information (e.g. IP-CAN type, RAT type,
authorized QCI, gate status, policing bit rate (if applicable), congestion
level) and replies to the SCEF with information about the UE connection
properties. The SCEF forwards this information to the 3rd party AS.
NOTE 1: While deriving connection properties solely from RAT type is difficult
(due to the wide range of available data rates), information about the
currently active bit rate policing (e.g. due to APN-AMBR or congestion related
policies) can be always used as input.
With the new reference point between SCEF and PGW described in clause 6.6.1.2
or 6.6.1.3, the SCEF is able to handle 3rd party AS requests which provide
only an IP address as UE identity information when PCRF is absent.
Furthermore, the SCEF can retrieve the current PDN connection information IP-
CAN type, RAT type and APN-AMBR whenever required and derive UE connection
properties information out of it.
NOTE 2: The solution works for UEs having a public IP address.
#### 6.6.1.1 Inform the 3rd party about a UE\'s connection properties when
PCRF is available
Figure 6.6.1.1-1: Inform the 3rd party about a UE\'s connection properties
when PCRF is available
1\. The AS sends a request for UE connection properties information to the
SCEF including the UE identity and the IP filter information related to a
specific service.
2\. The SCEF authorizes the AS request for UE connection properties
information.
3\. The SCEF sends a UE connection properties request to the related PCRF
including the UE identity and the IP filter information.
4\. PCRF may map UE identity to subscriber identity known by the IP-CAN. The
PCRF derives the UE connection properties information for this service of the
UE (e.g. high, medium or low data rate) from its available internal
information (e.g. IP-CAN type, RAT type, APN-AMBR, authorized QCI, gate
status, policing bit rate (if applicable), congestion level (if available))
and sends it to the SCEF.
5\. The SCEF forwards the UE connection properties information to the 3rd
party AS.
#### 6.6.1.2 Inform the 3rd party about a UE\'s connection properties when
PCRF is absent (variant A)
Figure 6.6.1.2-1: Inform the 3rd party about a UE\'s connection properties
when PCRF is absent (variant A)
1\. The PGW detects the establishment of a new PDN connection. Unless the PGW
is configured to interact with the PCRF, the PGW shall inform the SCEF about
the new PDN connection for the UE after the assignment of the UE IP address is
completed.
NOTE 1: It is assumed that there is only a single SCEF per operator. If there
is more than one, the PGW would need to inform all SCEFs.
2\. The PGW sends a Report PDN connection establishment message to the SCEF,
containing the UE identity, the APN and the assigned UE IP address.
NOTE 2: The message can also be used if an additional IP address is assigned
to the PDN connection or an IP address gets removed from a PDN connection.
3\. The SCEF stores the received information and sends a confirmation message
back to the PGW.
4\. The AS sends a request for UE connection properties information to the
SCEF including the UE identity and the IP filter information related to a
specific service.
5\. The SCEF authorizes the AS request for UE connection properties
information.
6\. The SCEF checks whether it has received for this UE an indication from a
PGW about a PDN connection establishment with an IP address that is matching
to the IP filter information received from the AS. If so, the SCEF interacts
with this PGW and the message flow continues.
7\. The SCEF sends a UE connection properties request to the PGW including the
UE identity and the UE IP address information.
8\. The PGW replies with the available internal information for the PDN
connection identified by the UE IP address information (e.g. IP-CAN type, RAT
type, APN-AMBR). The SCEF derives the UE connection properties information out
of the PDN connection information received from the PGW.
9\. The SCEF forwards the UE connection properties information to the 3rd
party AS.
#### 6.6.1.3 Inform the 3rd party about a UE\'s connection properties when
PCRF is absent (variant B)
Figure 6.6.1.3-1: Inform the 3rd party about a UE\'s connection properties
when PCRF is absent (variant B)
1\. The AS sends a request for UE connection properties information to the
SCEF including the UE identity and the IP filter information related to a
specific service.
2\. The SCEF authorizes the AS request for UE connection properties
information.
3\. The SCEF detects that there is no PCRF responsible for the IP address of
this UE.
NOTE 1: This can be e.g. based on receiving an error cause from the DRA
infrastructure as described by stage 3.
4a. If the AS provided the UE IP address as UE identity information, the SCEF
derives the PGW identity from configured information about the PGWs available
in the network and their IP address range responsibilities.
4b. Otherwise, the SCEF provides the UE identity to the HSS and retrieves the
PGW identity stored by the HSS for this UE.
NOTE 2: For those UEs the capability to store the PDN GW identity in the HSS
during the Attach procedure needs to be activated.
5\. The SCEF interacts with the PGW the UE is connected to and sends a UE
connection properties request including the UE IP address (4a) or UE identity
information and the IP filter information received from the AS (4b).
6\. The PGW identifies the PDN connection of interest based on the UE IP
address (4a) or UE identity (4b) information received from the SCEF. If the
SCEF request included UE identity information and there is more than one PDN
connection available for this UE identity, the PGW may need to compare the IP
filter information with available packet filter information of the different
PDN connections to identify the relevant one.
The PGW replies with the available internal information for the PDN connection
(e.g. IP-CAN type, RAT type, APN-AMBR). If the SCEF request included UE IP
address information, the PGW shall also provide the UE identity in the
response.
The SCEF derives the UE connection properties information out of the PDN
connection information received from the PGW.
7\. The SCEF forwards the UE connection properties information to the 3rd
party AS.
### 6.6.2 Impacts on existing nodes and functionality
The PCRF needs to estimate the UE connection properties for the service based
on available internal information (e.g. IP-CAN type, RAT type, APN-AMBR,
authorized QCI, gate status, policing bit rate (if applicable), congestion
level (if available)). Modifications to the Rx interface are required.
A new reference points between SCEF and PGW needs to be added. In variant A
(6.6.1.2), the PGW needs to interact with the SCEF at establishment of a new
PDN connection unless the PGW is configured to interact with the PCRF. The PGW
needs to inform the SCEF about the assignment/removal of an IP address to/from
a PDN connection. If requested by SCEF, the PGW needs to report the current
IP-CAN type, RAT-type and APN-AMBR for a PDN connection.
NOTE: For every PDN connection, the PGW is either interacting with the PCRF or
the SCEF. If there is no interest to support any of the AESE use cases for a
subscriber\'s PDN connection, the PGW interaction with SCEF can be disabled on
a per APN or subscriber basis (with the help of the charging characteristics).
In variant B (clause 6.6.1.3), the PGW needs to be enhanced to accept SCEF
requests for UE connection property information. Based on the UE IP address or
UE identity information provided by the SCEF, the PGW needs to identify the
relevant PDN connection and report the current IP-CAN type, RAT-type and APN-
AMBR for this PDN connection.
The SCEF needs to decide whether to interact with the PGW or the PCRF for
retrieving connection properties information.
If the SCEF interacts with the PGW, the SCEF needs to estimate the UE
connection properties for the service based on available information (e.g. IP-
CAN type, RAT type, APN-AMBR).
### 6.6.3 Solution Evaluation
The solution is to address key issue \"informing the 3rd party about a UE\'s
connection properties\". The 3rd party can get the connection properties of a
UE at its current location.
The connection properties of the UE will be, as noted in clause 6.6.2 above,
based on available internal information (e.g. IP-CAN type, RAT type, APN-AMBR,
authorized QCI, gate status, congestion level (if available)). As such the
quantification of the connection properties will be in the style of a \"high\"
/ \"medium\" / \"low\" bit rate classification.
**Concerns with the proposed solution mechanism:**
The fact that the PGW (in variant A) would need to send information to all
SCEFs in a network is a serious issue (see Note 2 in clause 6.6.1.2). There
may be multiple SCEFs providing multiple sets of capabilities in a network.
Step 1 of clause 6.6.1 would have the PGW in the network sending a message to
every SCEF each time a UE opens/modifies a PDN connection. This is noted in
clause 6.6.2, \"The PGW needs to interact with the SCEF at establishment of a
new PDN connection\".
**Concerns with the value of the data to be provided:**
It is proposed in the solution that UE Connection properties derivation in
PGW/PCRF occurs based on parameters IP-CAN type, RAT-type, and APN-AMBR.
**Why is RAT-type / IP-CAN type insufficient?**
For even a single-application UE, the connection property may vary greatly
based on a multitude of factors including RRM policies of the scheduler in the
RAN, UE capabilities, radio conditions, load status on eNB(s), mobility
between elements of the same RAT, etc. Such information is not visible outside
the RAN. Hence, neither the PCRF nor the PGW can, with sufficient accuracy and
certainty, derive the required information.
NOTE 1: When considering EUTRAN, information about whether UE is presently
camped on an EUTRA cell with 2x2 MIMO, 10+10MHz or 4x4 MIMO, 20+20MHz, or 8x8
MIMO 20+20MHz is not visible to the Core Network. The resulting difference in
max channel rate from 70Mbps DL / 35 Mbps UL to 1.6Gbps DL / 568Mbps. Such a
variance is too large to derive meaningful information at the PGW/PCRF. On top
of this, the max channel rate must be multiplied by the factor x, 0 \ NOTE: Geographic area specified by 3rd party service provider could be at
> cell level (CGI/ECGI), LA/TA/RA level or other formats e.g. shapes (e.g.
> polygons, circles etc.) or civic addresses (e.g. streets, districts etc.) as
> referenced by OMA Presence API [4].
2\. The SCEF authorizes the AS request for notifications about potential
network issues.
3\. The SCEF derives, if required, the 3GPP location area (e.g. list of
TA/RAs, list of cell(s), list of eNBs, etc.) from the provided geographical
area by 3rd party and assigns a network area id. Then the SCEF identifies the
RCAF(s) responsible for the requested location area based on local
configuration. The SCEF subscribes/unsubscribes to their congestion reporting
by sending a request for RAN congestion reports to the identified RCAF(s)
including the derived network area information, a network area id, an
indication for subscribing/unsubscribing along with additional criteria for
continuous reporting (e.g. threshold etc.).
4\. If the SCEF subscribes to congestion reporting, the RCAF stores the SCEF
instructions and aggregates the congestion information according to the
network area information received from the SCEF. Afterwards, a response is
sent to the SCEF including the network area id and the current congestion
status. Depending on the operator configuration, congestion status is reported
on either per cell or per node id basis granularity.
If the SCEF unsubscribes to congestion reporting, the RCAF removes the SCEF
instructions and sends an acknowledgement as response.
5\. Depending on operator configuration (governed by SLAs, network topology,
usage etc.), the SCEF derives the congestion status for the requested
geographical area by combining reports with the same network area identifier
and may map the congestion status to generalized parameters (e.g. load level
(high, medium or low), mean load etc.).
The SCEF sends an API response to the AS including NSI. If the AS had
requested to unsubscribe from continuous reporting, then SCEF conditionally
includes an indication for termination of continuous reporting to the AS in
the response.
#### 6.7.1.2 Report procedure for continuous reporting on network status
changes
Figure 6.7.1.2-1: **Report procedure for continuous reporting of network
status change**
1\. The RCAF detects a change in the aggregated congestion information of a
network area for which a SCEF subscribed to congestion reporting. A report on
the network status is sent to this SCEF including the network area id and the
current congestion status.
2\. The SCEF acknowledges the report to the RCAF.
3\. Triggered by a report from an RCAF or after the requested reporting
interval has passed by, the SCEF decides to generate a new network status
report.
4\. Depending on operator configuration (governed by SLAs, network topology,
usage etc.), the SCEF derives the congestion status for the requested
geographical area by combining reports with the same network area identifier
and may map the congestion status to generalized parameters (e.g. load level
(high, medium or low), mean load etc.). The SCEF reports the current network
status to the AS.
If the criteria for continuous reporting were fulfilled (e.g. maximum number
of reports), then SCEF conditionally includes an indication for termination of
continuous reporting to the AS in the response.
5\. The AS acknowledges the report to the SCEF.
#### 6.7.1.3 Procedure for one-time reporting of network status
Figure 6.7.1.3-1: **Procedure for one-time reporting of network status**
1\. The AS may send a request on network status in an area to the SCEF
including information about the geographic area. Optionally, a list of UE
identities can be provided.
NOTE 1: Geographic area specified by 3rd party service provider could be at
cell level (CGI/ECGI), LA/TA/RA level, Presence Area reporting level, or other
formats e.g. shapes (e.g. polygons, circles etc.) or civic addresses (e.g.
streets, districts etc.) as referenced by OMA Presence API [4].
2\. The SCEF authorizes the AS request.
3\. The SCEF transfers the geographic area to a corresponding network area
(e.g. a list of cells and/or TAs/RAs). Then the SCEF identifies the RCAF(s)
responsible for this network area based on local configuration. The SCEF sends
a request for RAN congestion report to them including the part of the derived
network area information the respective RCAF is responsible for and the list
of UE identities, if available.
4\. The RCAF aggregates the congestion information according to the network
area information received from the SCEF. If the SCEF provided also a list of
UE identities, the RCAF shall only aggregate the congestion information of
those cells to which one or more of the indicated UEs are connected.
Afterwards, a response is sent to the SCEF including the current congestion
status.
NOTE 2: The congestion and UE information available to the RCAF is only
representing UEs that are in connected mode.
5\. Depending on operator configuration (governed by SLAs, network topology,
usage etc.), the SCEF derives the congestion status for the requested
geographic area by combining reports with the same network area identifier and
may map the congestion status to generalized parameters (e.g. load level
(high, medium or low), mean load etc.). The SCEF sends an API response to the
AS including information about the current network status.
If the SCEF determines that the requested geographical area is experiencing
congestion, then it can optionally provide a time interval to inform the AS
when re-checking for network status is possible.
NOTE 3: The time interval provided by SCEF can be ignored by the AS if the
subsequent request on network status in an area is considerably different wrt.
the geographic area or the optional list of UE identities.
### 6.7.2 Impacts on existing nodes and functionality
#### 6.7.2.1 Continuous reporting on network status changes
The RCAF needs to be enhanced to support subscription to reporting of
congestion status changes as well as a one-time reporting of congestion status
for a network area under its control. The RCAF needs to be able to aggregate
congestion information for a network area under its control.
### 6.7.3 Solution Evaluation
The solution is to address key issue \"informing the 3rd party about potential
network issues\".
## 6.8 Solution 8: 3GPP resource management for background data transfer
### 6.8.1 Description
This solution addresses the Key issue 7 - \"3GPP resource management for
background data transfer \".
The main idea of the solution is: SCEF receives the API request from the 3rd
party a desired time window(s) for background data transfer to a set of UEs,
including the volume of data expected to be transferred, and passes this
information to a PCRF. The PCRF determines a transfer policy offer including
one or more recommended time windows for the AS data transfer together with a
maximum aggregated bitrate for the set of UEs and a charging rate. The SCEF
forwards the transfer policy offer to the 3rd AS. If the transfer policy offer
contains more than one time window, the 3rd party AS shall select one of the
time windows and inform the SCEF about it (which forwards this to the
PCRF).When the selected time window starts, the PCRF triggers PCC procedures
according to TS 23.203 [7] to provide the respective policing and charging
information to the PCEF.
There are two approaches for selecting the PCRF that determines the transfer
policy offer: a policy group based approach described in clause 6.8.1.1 and a
general approach described in clause 6.8.1.2.
#### 6.8.1.1 Policy group based approach
In this approach all UEs of the set in the AS request belong to the same
policy group (see TR 23.769 [9], clause 5.3). The SCEF identifies the
corresponding policy group as well as the PCRF responsible for it and sends
the request to the PCRF.
Editor\'s note: In this approach it is assumed that a single PCRF is
responsible for AS background data transfer to all UEs in the group and has
the capability for setting group policies. As the solution relies on the
solution for group policing (see TR 23.769 [9], clause 5.3), the solution can
only be completed and evaluated after the study for group policing is
completed.
Figure 6.8.1.1-1: Policy group based approach for resource management for
background data transfer
1\. A 3rd party AS may send a request to the SCEF asking for desired time
window(s) possible for background data transfer to a group of UEs. The
background data transfer request message contains application information,
traffic information (e.g. the volume of the data to be transferred per UE and
the expected amount of UEs), the desired time window and optionally,
geographic area information.
2\. The SCEF authorizes the AS request and identifies the corresponding policy
group (see TR 23.769 [9], clause 5.3).
NOTE 1: The SCEF notifies the AS at this point if the authorization fails.
3\. The SCEF identifies the PCRF responsible for this policy group and sends
the background data transfer request to the PCRF including the parameters
provided by the AS and the policy group. If the AS provided geographic area
information, the SCEF transfers the geographic area to a corresponding network
area (e.g. list of cell ids, TAs/RAs).
4\. The PCRF determines, based on information provided by the AS and other
information (e.g. network policy, congestion level (if available), load status
estimation of the required time window and network area) one or more
recommended time windows for the AS data transfer. For each time window, the
PCRF needs to assign a maximum aggregated bitrate for the set of UEs and a
charging rate that will be applicable in the respective time window for the
traffic that stays below the maximum aggregated bitrate.
NOTE 2: The PCRF can have information about traffic statistics locally
configured or retrieve them dynamically, e.g. from the OAM system. The AS
provided information about the volume of data to be transferred for the group
of UEs and the expected amount of UEs allows the PCRF to estimate the overall
amount of traffic that might be generated by the group. Based on this, the
PCRF can derive time windows that are appropriate for handling this traffic.
5\. The PCRF responds to the SCEF with a transfer policy offer including one
or more recommended time windows for the data transfer and for each time
window the maximum aggregated bitrate for the set of UEs and a charging rate.
6\. The SCEF forwards the transfer policy offer to the 3rd party AS.
7.-10. If the transfer policy offer contains more than one time window, the
3rd party AS shall select one of the time windows and send another request for
background data transfer message to inform the SCEF and PCRF about it.
NOTE 3: If there is only one time window in the transfer policy offer, the AS
is not required to confirm.
11\. When the selected time window starts, the PCRF triggers PCC procedures
according to TS 23.203 [7] to provide the respective group policing and
charging information to the PCEF.
#### 6.8.1.2 General approach
In this approach, any of the available PCRF in the network serving this
geographic area can make the decision about a transfer policy for background
data transfer for non-roaming UEs.
NOTE 1: In this approach the UEs targeted for background data transfer could
be served by a single PCRF or could be spread across multiple PCRFs in the
operatorÂ´s network.
The transfer policy is finally stored in the SPR together with a transaction
reference granting approval of the request. This ensures that the transfer
policy is available to every PCRF responsible for a UE which is subject to
this background data transfer in the future. In addition, other (or the same)
PCRF can take this transfer policy into account during subsequent decisions
about transfer policies for background data related to other AS.
When the AS contacts the PCRF for an individual UE (via the existing Rx
interface) at a later point in time the AS needs to also provide the
reference. The reference enables the PCRF to correlate the AS request (that is
related to the UE) with the transfer policy retrieved from the SPR (that is
related to the AS). The PCRF finally triggers PCC procedures according to 3GPP
TS 23.203 [7] to provide the respective policing and charging information to
the PCEF.
NOTE 2: The AS will typically contact the PCRF for the individual UEs to
request sponsored connectivity for the background data transfer.
Figure 6.8.1.2-1: General approach for resource management for background data
transfer
1\. A 3rd party AS may send a request for background data transfer for a set
of UEs to the SCEF. The background data transfer request message contains
application information, including the identification of the application
service provider, traffic information (e.g. the volume of data to be
transferred per UE and the expected amount of UEs), the desired time window
and optionally, geographic area information.
NOTE 3: The AS does not provide any information about the identity of the UEs.
2\. The SCEF authorizes the AS request.
NOTE 4: The SCEF notifies the AS at this point if the authorization fails.
3\. The SCEF selects any of the available PCRFs and sends the background data
transfer request to the PCRF including the parameters provided by the AS. If
the AS provided geographic area information, the SCEF transfers the geographic
area to a corresponding network area (e.g. list of cell ids, TAs/RAs).
NOTE 5: A new procedure in Rx interface needs to be introduced for the
interaction between SCEF and PCRF for the information exchange between AS and
PCRF as this request is not specific to a given UE\'s IP-CAN session.
4\. The PCRF queries the SPR for all existing transfer policies (which may be
equivalent to the request in step 3).
5\. The PCRF determines, based on information provided by the AS and other
information (e.g. network policy, congestion level (if available), load status
estimation of the required time window and network area, existing transfer
policies) one or more recommended time windows for the AS data transfer. For
each time window, the PCRF optionally assigns a maximum aggregated bitrate for
the set of UEs and a charging rate that will be applicable in the respective
time window for the traffic that stays below the maximum aggregated bitrate.
NOTE 6: The maximum aggregated bitrate provided from PCRF to SCEF/AS is not
enforced in the network. The operator may apply offline CDRs processing to
determine whether the aggregated bitrate for the set of UEs was exceeded by
the application service provider at a particular time and how the traffic
should be charged.
6\. The PCRF responds to the SCEF with a reference ID identifying the approved
grant and a transfer policy offer including one or more recommended time
windows for the data transfer and optionally for each time window the maximum
aggregated bitrate for the set of UEs and a charging rate.
7\. The SCEF forwards the reference ID and the transfer policy offer to the
3rd party AS. The AS stores the reference ID for the future interaction with
the PCRF.
8.-11. If the transfer policy offer contains more than one time window, the
3rd party AS shall select one of the time windows and send another request for
background data transfer message to inform the SCEF and PCRF about it.
NOTE 7: If there is only one time window in the transfer policy offer, the AS
is not required to confirm.
12\. The PCRF stores the reference ID, the expected number of UEs and the new
transfer policy for this application server in the SPR.
13\. When the AS contacts the PCRF at a later point in time for an individual
UE (via the existing Rx interface), the AS shall provide the reference ID and
the application server identifier. The PCRF correlates the AS request with the
transfer policy retrieved from the SPR via the reference ID. The PCRF finally
triggers PCC procedures according to 3GPP TS 23.203 [7] to provide the
respective policing and charging information to the PCEF for the background
data transfer of this UE.
NOTE 8: The AS will typically contact the PCRF for the individual UEs to
request sponsored connectivity for the background data transfer.
### 6.8.2 Impacts on existing nodes and functionality
A new interface needs to be introduced for the interaction between SCEF and
PCRF for the information exchange between AS and PCRF.
The PCRF needs to support resource management decisions for background data
transfer. The PCRF needs to be able to determine one or more recommended time
windows for the AS data transfer together with a maximum aggregated bitrate
for the set of UEs and a charging rate that will be applicable in the
respective time window for the traffic that stays below the maximum aggregated
bitrate. Furthermore, the PCRF needs to associate the selected time window and
the corresponding charging rate with the state information of all UEs targeted
for background data transfer.
The Rx interface needs to be enhanced to support the transfer of the reference
ID.
NOTE: The general approach described in clause 6.8.1.2. has no impacts on the
Gx interface, on the OCS and on the OFCS.
### 6.8.3 Solution Evaluation
The general approach described in clause 6.8.1.2addresses the Key issue \"3GPP
resource management for background data transfer \".
This general approach does not allow for a combined bitrate policing for the
whole set of involved UEs (as it would be possible via the group APN-AMBR in
the policy group based approach). The operator can still apply bitrate
policing for the background data transfer on a per UE basis as per existing
Rel-12 standard.
NOTE: The policy group based approach described in clause 6.8.1.1 solution
relies on the solution for group policing (see TR 23.769 [9], clause 5.3). It
can only be completed and evaluated after the study for group policing is
completed.
# 7 Overall Evaluation
See the Evaluation clauses of clause 6.
# 8 Conclusions
This clause lists conclusions that have been agreed during the course of the
work item activities.
## 8.1 Final Conclusions
\- For key issue 1 - Service Capability Exposure Framework, it is recommended
that the solution in clause 6.1 is adopted as the basis for any normative work
on exposing 3GPP service capabilities.
\- For key issue 2 - Setting up an AS session with required QoS, it is
recommended that the solution in clause 6.3 is adopted as the basis for any
normative work.
\- For key issue 3 - Change the chargeable party at the session set-up or
during the session, it is recommended that the solution in clause 6.4 is
adopted as the basis for any normative work.
\- For key issue 4 - Support of 3rd party interaction on information for
predictable communication patterns, it is recommended that the solution in
clause 6.5 is adopted as the basis for any normative work.
\- For key issue 5 - Informing the 3rd party about a UE\'s connection
properties, no conclusion is reached for this release.
\- For key issue 6 - Informing the 3rd party about potential network issues,
it is recommended that the solution in clause 6.7 is adopted as the basis for
any normative work.
\- For key issue 7 - 3GPP resource management for background data transfer, it
is recommended that the solution in clause 6.8 \"General Approach\" is adopted
as the basis for any normative work.
#