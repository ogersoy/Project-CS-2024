# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document studies and evaluates architectural enhancements required
for Group based features which include the following aspects:
\- Fulfil the general group based requirements (TS 22.368 [2] clause 7.2.14.1)
\- Fulfil the group based policing requirements (TS 22.368 [2] clause
7.2.14.2)
\- Fulfil the group based addressing requirements (TS 22.368 [2] clause
7.2.14.3)
The end-to-end application layer aspects between UEs and Application servers
including SCS (which can be located outside or inside the network operator\'s
domain) are out of the scope of this study.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.368: \"Service Requirements for Machine-Type Communications\".
[3] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[4] 3GPP TS 23.041: \"Technical realization of Cell Broadcast Service (CBS)\".
[5] 3GPP TR 23.708: \"Architecture Enhancements for Service Exposure\".
[6] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[7] 3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);
Architecture and functional description\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
## 3.23 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Architectural Assumptions
Editor\'s note: This clause will describe any architectural assumptions for
group based enhancements.
# 5 Key Issues and Solutions
## 5.1 Message delivery to a group of devices
### 5.1.1 Description
MTC applications generally involve a group of devices. Typically applications
today involve more than 1000 subscriptions for a single customer. From both
customer and operator points of view, there is benefit in optimized handling
of groups of MTC devices.
Group based messaging can be used to efficiently distribute the same message
(e.g. a trigger request) to those members of an MTC group that are located in
a particular geographical area on request of the SCS.
### 5.1.2 Architectural Requirements
The following related requirements need to be met:
\- The network needs to provide a mechanism to distribute a group message from
an SCS to those members of an MTC group located in a particular geographic
area.
NOTE 1: The geographic area for the distribution may be a cell sector, a cell,
a group of cells, or PLMN. Any members of the group who are outside the
geographic area won\'t receive the message (e.g. the device is roaming on a
different network or just in a different cell in the same network). This does
not affect how those inside the designated geographic area respond to the
message, nor is there an expectation that the 3GPP network do anything to try
to send the message to those members of the MTC group who happen to be outside
the designated geographic area.
\- The group based messaging feature does not require additional new
functionality for UEs that do not use this feature.
\- The system needs to support a mechanism where a UE that uses the group
based messaging feature can efficiently recognize distributed group messages
addressed to the UE.
NOTE 2: The 3GPP system does not need to provide an acknowledgment of receipt
of the group message by an MTC device.
\- The system needs to be able to determine if a SCS is authorized for sending
a group message.
\- The system needs to be protected against overload resulting from devices
responding to the distributed group message.
\- Group based messaging needs to be supported in GERAN, UTRAN, and E-UTRAN
access.
Editor\'s note: Support for non 3GPP access such as Wi-Fi is FFS
Editor\'s note: Charging requirements for the group message feature are FFS.
Editor\'s note: Whether 3GPP system support is needed for security or whether
an application layer security solution suffices with group based messaging is
FFS.
Editor\'s note: The maximum size of the message sent to a group of device is
FFS.
### 5.1.3 Solutions
#### 5.1.3.1 Solution: Group based messaging using cell broadcast
##### 5.1.3.1.1 General
Cell broadcast can be used as a solution to trigger or send a message to a
group of MTC devices when the geographic area in which the devices are located
is known, and/or for use cases where only the subset of devices of an MTC
group have to be triggered that are located in a particular geographic area.
With this solution group messages may be broadcast based on a Cell Broadcast
Service (CBS) / Public Warning System (PWS) type solution as specified in TS
23.041 [4].
**[Architecture]{.underline}**
Based on the architecture of the AESE TR 23.708 [5] the MTC-IWF and the SCEF
(Service Capability Exposure Function) are combined as shown in the following
figure.
Figure 5.1.3.1.1-1: CBS/PWS based group messaging AESE based architecture
Application server can provide the content to be broadcasted and additional
information to SCEF. The SCEF is responsible for the selection of the delivery
mode based on business agreements. The architecture in Figure 5.1.3.1.1-1 does
not preclude the use of the MB2 interface or the SGi interface by the SCEF to
support multiple delivery modes to members of a group that may have different
capabilities.
NOTE 1: The figure also shows that the SCEF is backward compatible for trigger
delivery using T4 interface via MTC-IWF.
NOTE 2: If the existing OMA APIs is not supported for required features, new
APIs are needed.
An alternative implementation option may be to combine the CBC and MTC-IWF.
**Sending a group message over the Tsp reference point**
With this solution a group message is received by the MTC-IWF over the Tsp
interface containing group identification, geographic information and group
message information, optionally the applicable RATs, optionally the number of
times and frequency/rate to broadcast the trigger/message.
Indiscriminate use of cell broadcast for group messaging could potentially
cause a flood of signalling when high amounts of devices respond to the cell
broadcast group message at (almost) the same time, which could cause problems
for both the mobile network operator and the MTC application owner. To spread
the responses of the triggered devices in time, a time window over which the
responses should be randomized may be included in the group message.
**Group message handling in the MTC-IWF.**
If the geographic area in which the devices of the group are located is known
in the IWF and if the broadcast message has to be broadcasted in this whole
geographic area, the geographic area information does not have to be sent over
Tsp. The MTC-IWF queries the HLR/HSS to map the external group identification
received over the Tsp interface into an internal cell broadcast group
identity. The MTC-IWF may also interrogate appropriate HLR/HSS to select
proper CBC node to transmit the group message. CBC can also be configured in
the MTC-IWF.
The MTC-IWF adds an indicator of group messaging service in the group message
or uses a new message type, e.g. \"trigger\", that is for the forwarding
nodes, e.g. CBC, MME/BSC/RNC, or eNodeB, to differentiate the group message
from other warning messages.
The MTC-IWF optionally adds a time window for randomization in the cell
broadcast message body. Here, it is assumed that the MTC-IWF can override the
time window for randomization of the responses that it received over the Tsp
interface if deemed necessary for network protection.
The MTC-IWF sends the group message to selected CBC.
**SCEF needs to support the group messaging functionality:**
When the AESE-based architecture is used, the application logic for group
message handling is contained in the SCEF with the following functions:
\- selection of message delivery method (CBC or other delivery mechanism(s));
\- protocol translation and forwarding towards the HSS, CBC, and SMSC;
\- generation of specific CDRs accordingly to the Charging features provided
by the AESE framework.
**Internal cell broadcast group identity.**
To address a particular MTC group the following approaches can be used for
identification of an MTC group in the 3GPP operator domain:
\- The cell broadcast message ID IE; and
\- Optionally, group identification information in the cell broadcast message
body.
When a dedicated message ID IE is used for group messaging, a mapping from
group ID to message ID IE suffices. When multiple groups share a message ID,
additional group identification information will have to be added in the
message body. It is assumed that both approaches can coexist in an operator
deployment. The cell broadcast architecture already contains functionality
that allows UEs configured to listen/ not listen to a particular cell
broadcast channel and/or cell broadcast messages with a particular message ID
to ignore a message.
When an indicator of group messaging service or a new message type is added in
the group message, the forwarding nodes in 3GPP operator domain can enforce
policies, e.g. load control, on the group messages which is different from
warning messages that are used for PWS.
**Group message handling in the CBC**
The target location/area is used by the CBC to determine the Cell Broadcast
Area for the CBS/PWS type trigger broadcast. The application layer content of
the group message is conveyed to the CBS/PWS infrastructure with indication of
trigger application, geographic area and optionally radio access nodes, and
the number of times and frequency/rate to broadcast.
**Group message handling in the MTC device**
With this solution, an MTC device that needs to be triggered by a group
trigger shall be configured to listen to the correct cell broadcast channel
and with the Message ID IEs, that will be used to trigger the group to which
it belongs. It is assumed that for group triggering Message IDs are used that
are not used with other services, to avoid impact on UEs that do not need to
be triggered by a group trigger. Processing of the message body of the cell
broadcast trigger takes place to process additional group information when
multiple groups share a message ID IE.
Based on the received application PDU the UE performs specific actions, e.g.
generate application data or establish a connection to the SCS/AS if needed.
Normal procedures for UEs to receive cell broadcast messages in the various UE
modes (idle/active, CS/PS) apply to the use of cell broadcast for group
messages.
In EPS, an MTC device needs to recognize a paging message for group messaging
in terms of a new group indicator IE or UE identity IE. In latter case, the
MTC device can be configured with one or more static group IDs for supported
group messaging services or it can obtain group IDs from the network based on
group ID allocation/reallocation mechanism.
It is not necessary to verify whether or not a group member receives a cell
broadcast group message successfully and to distinguish the causes of the
failure reception of the group messages, e.g. if the UE is in limited state,
is in power saving mode, has weak channel conditions, etc. Therefore it
depends on network policies for scheduling the retransmission of the group
messages for UEs which are group members within a particular geographic area.
The UE in power saving mode would not be able to receive the group messages
even within retransmission cycles.
**Scalability**
Indiscriminate use of cell broadcast for group messaging could potentially
cause a flood of signalling when high amounts of devices respond to the cell
broadcast message at (almost) the same time, which could cause problems for
both the mobile network operator and the MTC application owner. This should be
manageable by limiting the size of the groups or the geographic area in which
the broadcast message is sent. Additionally, randomization of the responses
can be deployed as described above.
There is a limitation to the capacity of cell broadcast channels. Frequent
usage of cell broadcast triggering for many relatively small groups in a large
geographical area may overload the cell broadcast capacity. However, an
operator can easily create a pricing strategy - based on the size of the
geographic area - that will give an incentive to the application owner to
limit the geographic area in which the broadcast message is sent. If most
broadcast messages are sent in a relatively small geographic area the capacity
impact is reduced. In case multiple group messages have to be sent in a
particular geographic area than the available capacity can handle, the cell
broadcast system can schedule these messages at a later time (i.e. messages
can be queued). Possibly a priority indication can be assigned to high
priority messages to affect the scheduling.
**Scalability in a Multi-Operator Sharing Scenario**
There may be one shared radio access network and CBC in a multi-operator
scenario. For emergency broadcast services, this situation is fine due to the
low frequency and limited size of broadcast messages. In commercial services,
sharing a CBC brings in the potential for competitive issues related to
capacity, fair share of costs, and similar issues.
These concerns can be addressed by recognizing the commercial factors in
various ways. One approach is to use the number of instances of sending a
broadcast trigger and the area in which they are sent as a basis for sharing
costs among the operators sharing the resource. Considering issue 2, with
multiple operators using this capability, the likelihood increases that
capacity limits might be reached. This can be addressed through providing
larger capacity CBCs. It is assumed when multiple operators share a CBC, that
inter-operator charging is done based on messages send by the customers of an
operator similar to the charging of customers of the cell broadcast services
by an operator.
There is no support of the shared network case in Rel-13. The enhancement to
support group based messaging via cell broadcasting in a shared network may be
required in a future release, including study of whether the message ID space
that can be used for group messaging based on cell broadcast can be divided
between the network-sharing partners without restricting the usability of the
approach in shared networks.
**Triggering individual MTC devices**
This solution targets at triggering groups of MTC devices. Given above
described charging strategy, it is assumed that triggering of individual
devices using cell broadcast will not be advantageous in the majority of use
cases. It is assumed that other functionality in the operator network is used
to trigger individual devices and that this functionality may coexist with
cell broadcast triggering of group in network deployments.
**Roaming support**
The rules for roaming UEs that receive cell broadcast apply to a roaming UE
that receives a cell broadcast for a group. If the UE is configured to receive
cell broadcasts while roaming, and to receive cell broadcast with the
identifier(s) used for group message cell broadcast, then the UE will receive
those messages.
**Charging implications**
It is assumed that charging of group based messaging with this solution is
based on charging of group message over the Tsp interface taking into account
the message size and the geographic area in which the group message has to be
distributed, and optionally the number of times a message needs to be
broadcast. If additional interfaces are supported on the AESE-based
architecture, the charging may be done on the basis of number of messages over
each of the Sh, Tcb, and possibly the MB2 interfaces.
NOTE: Charging is not based on the size of the group. It is based on the
number of requests over exposed network interfaces, the size of the area of
cell broadcast, and the size of the message transmitted to the UEs.
**Security implications**
It is assumed that security e.g. to ensure that a group message came from the
real SCS is left up to the application layer.
Editor\'s note: Whether this is acceptable is FFS. This will need to be
checked with SA WG3.
Editor\'s note: How to control that only UEs belonging to a certain group read
respective group messages is FFS in SA WG3.
##### 5.1.3.1.2 Impacts on existing nodes and functionality
The CBC must be modified to:
\- recognise group trigger/message requests and assign the message ID IE to
the value(s) allocated for MTC Device triggering (group triggers/messages are
differentiated from PWS warning messages by an indicator of group messaging
service or a new message type for \"trigger\");
\- allow the partners of a shared network (GERAN, UTRAN, E-UTRAN) to share a
CBC and allow inter-operator charging similar to the charging of customers of
the cell broadcast services by an operator.
\- If RAT(s) is provided, forward broadcast message to CN nodes associated
with requested RAT(s) in the cell broadcast area.
\- The SBc interface may need to be enhanced to support group messaging.
MTC-IWF
\- set the message ID IE to the value(s) allocated for MTC Device triggering;
\- add an indicator of group messaging service or indicate message type as
\"trigger\" in the group message;
\- optionally, provide additional group identification information in the cell
broadcast message body;
\- optionally, add randomization window to the cell broadcast message body;
\- Interface with CBC;
\- Interrogate appropriate HLR/HSS to map external group identifier to
internal group identifier;
\- Interrogate appropriate HLR/HSS to select proper CBC to transmit the group-
based messages, when needed;
\- Enhanced charging to support group trigger/messaging;
\- Include SCEF to interwork with Application Servers for supporting AESE
framework.
MTC devices that are configured to receive broadcast messages will need to:
\- listen on the appropriate broadcast channel(s) for triggering messages;
\- understand the message ID(s) that are to be used by the application;
\- optionally, understand the group identification information in the cell
broadcast message body;
\- perform the appropriate action after being triggered;
\- MTC Devices need to have controlled access to avoid network overload;
\- spread out responses over time possibly according to a default value or
information received in the message. For example, a time window of perhaps 30
minutes is provided in the cell broadcast message body. The UE would generate
a value that is randomized over the 30 minutes period, e.g. using its IMEI as
input, and use that value to determine when to send its response.
Impact to MME:
\- Receive and process PWS type trigger request and forward to target eNBs;
\- The SBc interface may need to be enhanced to support group messaging;
\- If adding a new group indicator IE in the paging message is used to avoid
the power consumption issue on legacy UEs, this would require further study in
the RAN2 WG for evaluating possible impacts of the solution.
Impacts to RAN:
\- PWS was developed for ETWS/CMAS and did not consider commercial services.
The current solution needs to be evolved and enhanced for UTRAN/EUTRAN to
support commercial group based services;
\- If the group message is received from the CBC or MME and recognized as
group message by the indicator of group messaging service or the message type
of \"trigger\", the RAN broadcasts group message in the radio access network;
\- If reusing PWS mechanism in EPS for group messaging, the paging message may
need to add a new indicator IE of group messaging or use UE identity for group
paging, which is to let the MTC device to identify the paging message for
group messaging.
Editor\'s note: The optimization of paging mechanism requires further study
and evaluation in RAN.
##### 5.1.3.1.3 Solution evaluation
Benefits
\- Solution based on existing CBS/PWS broadcast architecture to trigger groups
of MTC devices when the geographic area in which the devices are located is
known, and/or for use cases where only the subset of devices of an MTC group
have to be triggered that are located in a particular geographic area need to
be triggered.
Cons:
\- Application needs to ensure that the UEs that need to receive the trigger
have received the trigger. If some in the group did not receive the trigger,
the SCS/AS/MTC Server may have to individually trigger them.
\- The Group trigger/message may have to be broadcast multiple times to aid in
UEs within the group to receive the trigger.
\- Applicability of CBS/PWS is limited to the servicing PLMN.
\- Applying PWS, i.e. ETWS/CMAS, in EPS for delivering group message may cause
more power consumption on legacy UEs supporting PWS if using ETWS/CMAS
indicator to recognize a paging message for group messaging by the MTC
devices.
\- The CBC/MME/eNodeB need to be configured with all Message IDs of supported
group messaging services so as to differentiate the warning message from group
messages if using Message ID as an indication of a group messaging indicator.
\- There is no support of the shared network.
\- All group message solutions need to take the following into account:
\- Many devices where this would seem applicable (e.g., utilities/meters) will
be aggregated behind gateways so only the gateway needs to be triggered.
> \- Routine events should be scheduled and not triggered. Emergency or non-
> routine events are more suitable for triggering if UEs are monitoring for
> broadcasts. The UE in power saving mode would not be able to receive the
> group messages even within retransmission cycles.
NOTE 1: CT WG1 is responsible for CBS/PWS Stage 2 in TS 23.041 [4]. SA WG2
will study the feasibility of a broadcast solution for group
triggering/messaging and CT W1 will be responsible for Stage 2 normative
specifications.
NOTE 2: RAN WG2 is responsible for evaluating the related functionalities in
RAN WG2 domain to reuse PWS for applying group based messaging in EPS.
#### 5.1.3.2 Solution: Group message delivery using MBMS
##### 5.1.3.2.1 General
This solution proposes how to use MBMS for group message delivery. This
architecture can be re-used for general group message delivery purposes (not
limited to MTC devices). The BM-SC (Broadcast Multicast Service Centre)
allocates a TMGI (Temporary Mobile Group Identity) for a specific MBMS user
service.
NOTE 1: eMBMS supports only broadcast mode.
NOTE 2: eMBMS for EPS only supports E-UTRAN and UTRAN.
##### 5.1.3.2.1.1 SCEF connected to BM-SC {#scef-connected-to-bm-sc .H6}
In this solution, the SCEF is connected to the BM-SC. SCS/AS provides the
content to be broadcasted and additional information to SCEF. In case SCEF and
BM-SC are not co-located, MB2 interface between them is required. Figure
5.1.3.2.1.1-1 shows the group message delivery architecture.
Figure 5.1.3.2.1.1-1: MBMS based group messaging architecture
SCEF needs to support the group messaging functionality including the
following:
\- reception of a group message delivery request from SCS/AS, optionally
including one or more of the following: TMGI, radio frequency, geographic area
of delivery, delivery schedule, group message content;
\- ability to authorize control plane requests from an SCS/AS;
\- interrogation of the appropriate HSS, to:
\- determine if a SCS/AS is allowed to send a group messaging request to a
particular group, and to ask for a TMGI allocation;
\- report to the SCS/AS the acceptance or non-acceptance of the group message
delivery request;
\- protocol translation, and forwarding towards the BM-SC of the Activate MBMS
Bearer Request request;
\- if the TMGI and frequency are not provided by the SCS/AS, obtain the TMGI
and frequency of the MBMS bearer from the BM-SC; otherwise, use the TMGI that
was provided by the SCS/AS in the group message delivery request;
\- generation of group messaging specific CDRs including group External
Identifier and SCS Identifier and forwarding to CDF/CGF over instance of
Rf/Ga;
\- trigger the session start procedure based on the service areas and the
RAT(s);
\- if the SCS/AS provided the group message content in the group message
delivery request, send the content to the BM-SC on the MB2-U interface at the
scheduled time;
\- if requested by the SCS/AS in the group message delivery request, handle
requests from UEs for the TMGI, radio frequency, content description, and
transmission schedule;
NOTE 1: Having the SCEF handle requests from the UEs for the TMGI, radio
frequency, content description, and transmission schedule provides a means to
insulate the SCS/AS from the details of delivery of content via MBMS. This
would require that the SCEF have an identity (e.g. FQDN) known to the UEs. It
would also be most useful for delivery of large contents to devices that are
not power-constrained.
NOTE 2: It is expected that power-constrained devices can be pre-configured
with the TMGI, frequency, content description, transmission schedule, and any
decryption keys needed to receive and understand the group message content.
> \- reception of the TMGI allocation request from the SCS/AS and forwarding
> the request to the BM-SC;
>
> \- reception of the TMGI from the BM-SC and forwarding the TMGI to the
> SCS/AS.
##### **5.1.3.2.1.2 Use of MBMS for Group Message Delivery** {#use-of-mbms-
for-group-message-delivery .H6}
The following figure describes the optional allocation of a TMGI by the SCS/AS
and the use of MBMS to then deliver a message to a group of UEs.
Figure 5.1.3.2.1.2-1: Procedure flows MBMS based group messaging
Operator could treat the trigger/messaging as a normal MBMS user service and
use the \"service announcement\" (SMS, WAP, HTTP) as defined in TS 23.246 [7]
to distribute the related service information to the devices of specific group
before the message delivery. This optional pre-configuration based approach
(shown in steps 1-7 of Figure 5.1.3.2.1.2-1) may also be applied for the
devices of specific group to provide them with the related MBMS service
information.
The solution also supports delivering a large amount of data.
It must be recognized that steps 1-7 below are optional and may depend upon
previous agreements between the PLMN operator and the SCS/AS operator.
1\. If there is no assigned TMGI for an External Group Id, the SCS/AS sends
the Allocate TMGI Request (External Group Id, SCS Id) message to the SCEF. The
SCEF checks that the SCS/AS is authorized to request TMGI allocation.
2\. The SCEF determines if the SCS/AS is authorized to request TMGI allocation
for the group and acquires the \"Routing information\" including the identity
of the BM-SC.
NOTE 1: Authorization of TMGI allocation for the group and acquisition of the
BM-SC routing information are to be resolved during the normative phase.
3\. The SCEF sends the Allocate TMGI Request (External Group Id) to the BM-SC.
The BM-SC allocates a TMGI and determines an expiration time for the TMGI.
4\. The BM-SC sends the Allocate TMGI Response (TMGI, TMGI expiration,
frequency, etc.) message to the SCEF.
5\. The SCEF forwards the received TMGI, TMGI expiration, frequency, etc. to
the SCS/AS.
6\. The SCS/AS signals the TMGI, frequency, schedule, etc. to all UEs
belonging to the group.
7\. The SCS/AS send the group messaging request (External Group Identifier,
SCS Identifier, application layer content of the group message, location/area
information, RAT(s) information, TMGI) message to the SCEF. The SCS/AS may
determine the IP address(es)/port(s) of the SCEF by performing a DNS query
using the External Group Identifier or using a locally configured SCEF
identifier/address. The location/area information indicated by the SCS/AS may
be the geographic area information.
8\. The SCEF checks that the SCS/AS is authorised to send a group messaging
request.
NOTE 2: Authorization of Group Message delivery using MBMS towards a specific
group is to be resolved during the normative phase.
9\. The SCEF sends an Activate MBMS Bearer Request (MBMS service Area, TMGI)
message to the BM-SC/MBMS-GW. MBMS-GW performs the session start procedure
with MME/SGSN.
10\. The BM-SC sends an Activate MBMS Bearer Response to the SCEF.
NOTE 3: The SCEF maps between location/area information provided by the SCS/AS
and the MBMS service area for the distribution of the group message based on
configuration in the operator domain. The SCEF needs to be aware that the
selected MBMS service area(s) may result in broadcast of the message over an
area larger than the area that may be indicated by SCS/AS, since MBMS
broadcast at the cell granularity level is not supported.
11\. The SCEF sends a Group Messaging Confirm message to the SCS/AS to confirm
that the Request has been accepted for delivery to the UE.
12\. MBMS-GW performs the session start procedure with MME/SGSN.
13\. If the SCS/AS did not provide the SCEF with the application layer content
of the group message in Step 8, the SCS/AS transfers the group message content
to the SCEF in this step. The SCEF transfers the group message content to the
BM-SC/MBMS-GW. The group message content is delivered to the UE.
NOTE 4: UEs in PSM will not receive content sent via MBMS.
14\. In response to the received message, the UE takes specific actions that
take into consideration the content of the payload. This response typically
involves initiation of immediate or later communication with the SCS/AS.
##### 5.1.3.2.2 Impacts on existing nodes and functionality
SCEF needs to support the group messaging functionality including the
following:
\- reception of a group messaging request from SCS/AS;
\- ability to authorize control plane requests from an SCS/AS;
\- report to the SCS/AS the acceptance or non-acceptance of the group
messaging request;
\- optionally, provide the TMGI and radio frequency to the SCS/AS if requested
to do so;
\- interrogation of the appropriate HSS, to:
\- determine if a SCS/AS is allowed to send a group messaging request to a
particular group, and to ask for a TMGI allocation;
\- optionally, provide the TMGI, radio frequency, content description, and
transmission schedule to UEs;
\- protocol translation, and forwarding towards the BM-SC/MBMS-GW of a group
messaging request;
\- generation of group specific messaging CDRs including group External
Identifier and SCS Identifier and forwarding to CDF/CGF over instance of
Rf/Ga;
\- trigger the session start procedure based on the service areas and the
RAT(s);
\- reception of the TMGI allocation request from the SCS/AS and forwarding the
request to the BM-SC;
\- reception of the TMGI from the BM-SC and forwarding the TMGI to the SCS/AS.
##### 5.1.3.2.3 Solution evaluation
See clause 5.1.4.
#### 5.1.3.3 Solution: Delivery of messaging to a group using PDN
connection(s)
##### 5.1.3.3.1 General
This solution proposes to deliver messages to a group by using UE\'s (which
are part of the target group) existing PDN connection.
Although the detailed solution is outlined for an E-UTRAN network, the
concepts equally apply to GERAN and UTRAN networks as well when GERAN/UTRAN
networks are accessed via an S4-SGSN.
##### 5.1.3.3.1.1 High-Level Architecture for E-UTRAN {#high-level-
architecture-for-e-utran .H6}
The high-level architecture of this solution is as shown below:
Figure 5.1.3.3.1.1-1:
NOTE 1: \"*\" in figure above indicates enhancements to existing interfaces.
NOTE 2: \"+\" in figure above indicates optional enhancements, without the
employment of which, the solution still works.
The solution introduces a new interface \"Tg\" between the MTC-IWF and the
PGW.
NOTE 3: Use of existing protocols such as DIAMETER is seen feasible, or other
light-weight protocols such as XMPP, SOAP, XML over HTTP. RESTful APIs is also
possible. Details such as the exact message names used, protocol of choice etc
for Tg interface is left up to Stage 3.
At the high-level the following is sequence of events involved in delivery of
message to a group:
1\. SCS/AS/SCEF sends the message destined for a group to the MTC-IWF using
Tsp. The target group is identified via \"external\" group id. Other necessary
parameters such as geo/RAT restriction, message expiration timer, source IP
address of the sender of the message etc. are also sent.
NOTE 4: API(s) interface here implies usage of API(s) to send the message
intended for a group of users. When used, it means the \"Exposure layer\"
(SCEF) will be at the receiving end of the API call. The nature of
enhancements for MTC-IWF isn\'t altered by the introduction of SCEF here
because in such cases, \"delivery of messages destined to a group of users\"
becomes a \"3GPP capability\" to be exposed via SCEF. In such cases, the API
interface, is expected to be outside of 3GPP domain (As part of AESE/SEES
work, this could e.g. be in the OMA domain). SCEF will behave as SCS/AS in
such cases.
2\. MTC-IWF performs similar checks as described in TS 23.682 [3] for SCS/AS
validation etc. In addition, it requests translation of \"external\" group id
(received in step 1) to \"internal\" group id (used only by 3GPP system).
NOTE 5: \"internal\" group id is referred henceforth as 3gpp-group-id.
3\. After verification, MTC-IWF using \"Tg\" interface sends the message to
PGW.
4\. PGW uses a new group GTP user-plane tunnel to deliver the message to SGW
via DOWNLINK DATA.
5\. SGW upon receiving this message from PGW acts as follows:
a. For ECM_CONNECTED users where SGW has existing S1-U tunnel(s), it sends the
message using the S1-U tunnel corresponding to the PDN connection used for the
group APN. Additional procedures are performed (as outlined in detailed
solution below) for implementing geo-restrictions if received.
b. Delivery of message to ECM_IDLE UE(s) in a group is an operator
configuration. If configured, then SGW page UEs (via MME) to request switching
to ECM_CONNECTED before delivering the message per /5.a/ above. Additional
procedures are performed (as outlined in detailed solution below) for
implementing geo-restrictions if received.
##### 5.1.3.3.1.2 Group- Id awareness within 3GPP network {#group--id-
awareness-within-3gpp-network .H6}
At a high-level, the following nodes are expected to be aware of group-ids to
be used for messages destined to a group of users: HSS, MTC-IWF, MME, SGW,
PGW, and UE.
HSS subscription is updated with 3gpp-group-id on a per user per APN basis
(e.g. {user=\"IMSI1\", APN=\"internet\", \"3gpp-group-id=A\"}, user=\"IMSI2\",
APN=\"internet\", \"3gpp-group-id=A, C, E\"). Each 3gpp-group-id will also be
associated with an external group identifier to be used for group messaging.
Sample group-id enhancements are depicted below for illustrative purposes:
\- user=\"IMSI1\"
\- APN=\"internet\", \"3gpp-group-id=A\", external-messaging-group-
id=abc\@abc.com\"
\- user=\"IMSI2\",
\- APN=\"internet\", \"3gpp-group-id=C\" , external-messaging-group-
id=def\@def.com\"
\- user=\"IMSI3,
\- APN=\"m2m\", \"3gpp-group-id=B\" , external-messaging-group-
id=ghi\@ghi.com\"
\- APN=\"internet\", \"3gpp-group-id=Z\" , external-messaging-group-
id=upgrade_firmware\@georgiapower.com\"
3gpp-group-id is sent by HSS to the MME (as part of normal EPS signalling), to
MTC-IWF (when requested over S6m).
When received, MME stores 3gpp-group-id(s) information in the UE MM context.
Therefore, at the time of user\'s attachment to the network the MME is
informed of the association of APN to 3gpp-group-id(s). At the time of PDN
connection(s) for each UE, the 3gpp-group-id(s) are communicated by the MME to
SGW and PGW. Both SGW and PGW store 3gpp-group-id(s) in the EPS bearer context
for the UEs. In addition, the 3gpp-group-id(s) are sent to the UE as part of
EMM/ESM signalling.
##### 5.1.3.3.1.3 Node Selection {#node-selection .H6}
**SCS/AS selecting MTC-IWF**
SCS/AS selection of the MTC-IWF follows mechanisms specified in TS 23.682 [3].
**MTC-IWF selecting PGW**
HSS is aware of the PGW to which a UE\'s PDN connection to a particular APN is
established. HSS maintains for each 3gpp-group-id(s) the list of PGW selected
across all the UEs of the group. Along with 3gpp-group-id(s), the HSS sends
PGW address to the MTC-IWF. MTC-IWF sends the message to each PGW as indicated
from the HSS.
> NOTE: If the group identifier used for addressing/messaging are the same as
> the one used for group policing, then it means only a single PGW will exist
> for all the addressed users.
##### 5.1.3.3.1.4 S5/S8 Group tunnel establishment {#s5s8-group-tunnel-
establishment .H6}
Today, GTP \"session\" is a per UE per PDN connection level granularity. The
solution extends this concept on S5/S8 and proposes to have new Group-specific
TEIDs for control (C-) plane, and user (U-) plane.
Only one Group C- plane and U- plane tunnel is established between a given SGW
and PGW. The tunnel ID (TEID) to be used is configured on both SGW and PGW. It
is established when the first user belonging to a group connects to the PDN
via that SGW. In roaming scenarios where S8 is employed, establishment of
group tunnel is based on operator configuration.
NOTE 1: The exact format of pre-configured tunnel ID to be used for this
feature is left up to Stage 3.
Group C- plane and U-plane tunnel is only employed for delivery of messages to
a group of users.
NOTE 2: If additional use-case(s) are identified, then the use of group tunnel
can be expanded.
The figure below shows how group tunnel concept fits into existing PDN
connection model.
Figure 5.1.3.3.1.4-1:
##### 5.1.3.3.1.5 Detailed Solution {#detailed-solution .H6}
The following figure describes how the 3GPP system delivers a message intended
to be sent to users in a group.
Figure 5.1.3.3.1.5-1:
1\. SCS/AS/SCEF sends the message destined for a group to the MTC-IWF using
Tsp. The target group is identified via \"external\" group id. Per existing
Tsp specs, SCS identifier is included. Optionally other information such as
source IP address of the originator of the message payload, location/area
restriction information, RAT(s) restriction information, message
expiration/validity timer are also sent.
NOTE 0: The source IP address of the origination of the message payload is
optionally sent to allow proper population of source IP address for the GTP-u
packet by SGW.
NOTE 1: location/area restriction can be in geo-coordinates, civic address or
TAI/ECGI granularity. If received in geo-coordinates or civic address format,
MTC-IWF converts it to TAI/ECGI level granularity. If SCEF is used then such
conversion can be done in SCEF instead. The details of such conversion are
outside the scope of specifications.
2\. MTC-IWF performs similar checks as described in TS 23.682 [3], clause
5.2.1 for SCS/AS identification validation, quota or rate violation etc with
the HSS.
NOTE 2: The format of internal group id (3gpp-group-id) can be decided during
normative specification. It is expected to uniquely identify an
addressing/messaging group within a PLMN.
NOTE 3: MTC-IWF may optionally perform message payload size validation. If the
payload exceeds either the SLA agreement or a maximum configured size, then
MTC-IWF may reject the message delivery request from the SCS.
3\. HSS translates \"external\" group id to \"internal\" group id (3gpp-group-
id). HSS may be configured with message delivery RAT restriction as well. In
such cases, information sent by the HSS to the MTC-IWF overrides information
received over Tsp or API interface. HSS also sends the PGW identities selected
for handling users belong to the group identified by 3gpp-group-id.
4\. After verification, MTC-IWF uses \"Tg\" interface to send the message to
all PGW identities received from the HSS. If location/area restrictions exist,
then after conversion to TAI/ECGI, this information is also sent to the PGW.
If the location / area restriction is needed at a cell level (ECGI level),
then the ECGI list can be sent as \ tuple. Sending the
ECGI list as \ tuple helps the MME in determining which
HeNBGW to page in case the ECGI represents a HeNB behind a HeNBGW. Step 9
below explains this procedure. If RAT restrictions exist, then after
appropriate validation this information is also sent to the PGW. Any
information received over Tsp (as mentioned above) such as source IP address
of the originator of the message payload, message expiration/validity timer
are also sent. MTC-IWF also sends 3gpp-group-id to the PGW. In addition, a
message-id to identify the message transmission on Tg is included.
5\. Using 3gpp-group-id, PGW retrieves EPS bearer context of all associated
UEs (identified via IMSIs) to which the delivery of the group message is
intended for. PGW sends DOWNLINK DATA via Group U-plane tunnel to each SGW
anchoring the UEs in the group. 3gpp-group-id is included in the message
towards SGW.
NOTE 4: If a given 3gpp-group-id involves users spanning multiple PGWs, then
each PGW sends DOWNLINK DATA message to each SGW peer identified via EPS
bearer context.
NOTE 5: location/area restriction, RAT(s) restrictions, message
expiration/validity timer, message-id etc are proposed to be sent in DOWNLINK
DATA as GTP-U headers as well.
NOTE 6: Message-id is used by the SGW to avoid re-transmissions of the same
group message when received from multiple PGWs.
6\. For ECM_CONNECTED users where SGW has existing S1-U tunnel(s), it sends
the message, keeping the provided RAT and TAI/ECGI restriction in mind, using
the S1-U tunnel corresponding to the PDN connection used for the group APN.
For message delivery request with geo-restrictions, for ECM_CONNECTED users,
SGW follows the \"Group message delivery for ECM-CONNECTED UEs with TAI/ECGI
level geo restriction\" procedure described in 5.3.1.X.6 to find out the right
set of candidate UEs. After completion of the procedure, SGW follows steps
mentioned below.
For message delivery request without geo-restrictions, for ECM_CONNECTED
users, SGW simply delivers the message.
For those UEs who have been allocated an IPv4 address for the PDN connection
SGW creates GTP-U packet by framing the IP packet with source address as
either the user payload\'s source address received via Tsp â€‘> T5 â€‘> S5/S8
route or SGW\'s own IP address. The destination address is the UE\'s IPv4
address. This framed IP packet is tunnelled over the GTP-U towards eNB. If the
IPv4 address for UE is allocated through DHCPv4 as specified in clause
5.3.1.2.4 of TS 23.401 [6] (deferred IPv4 allocation) then the PGW shall
inform the SGW through an Update Bearer Request message of the allocated IPv4
address for the UE.
For those UEs who have been allocated an IPv6 address for the PDN connection
SGW creates GTP-U packet by framing the IP packet with source IP address as
either the user payload\'s source address received via Tsp â€‘> T5 â€‘> S5/S8
route or SGW\'s own IP address. The destination IP address is the link-local
address of the UE.
NOTE 7: link-local address for UE is constructed as FE80 + Interface
Identifier which is received from PGW in PAA IE in Create Session Response at
the time of PDN creation (per existing specs).
Until the message expiration/validity timer (received via Tspïƒ T5ïƒ S5/S8 route)
expires, SGW buffers the message for delivery for idle mode UEs converting to
connected mode. After its expiration, SGW discards the message. If SGW
receives \"largest active time remaining\" value, and if configured to
accommodate message delivery for PSM devices, then SGW replaces the message
expiration/validity timer with this value. This allows SGW to buffer the
message until the last PSM-activate UE connects to the network, thereby
ensuring message delivery to such device.
7\. eNB sends the downlink data via S1-tunnel to the UEs.
Delivery of message to ECM_IDLE UE(s) in a group is an operator configuration.
If configured, then two alternatives are proposed here.
**Alternative 1:**
8\. SGW uses TEID of any one of the user belonging to 3gpp-group-id to send a
single Downlink Data Notification with (3gpp-group-id, EBI, ARP, ECGI/TAI
restriction).
NOTE 8: EBI and ARP are existing parameters. Shown here for brevity.
8a. If MME has activated PSM for any of the UE(s) being addressed by 3gpp-
group-id, and if configured to accommodate message delivery for PSM devices,
then it sends in Downlink Data Notification Acknowledgement to the SGW, the
largest of Active Time remaining. If SGW receives different values from each
MME, then it picks the largest of the received value (termed \"largest active
time remaining\").
NOTE 9: For each PSM-activated UE, MME keeps track of expiration of Active
Time per existing Relâ€‘12 specs today.
9\. MME uses the presence of 3gpp-group-id to decide whether to page the group
identified by 3gpp-group-id or just the UE whose MM context is represented by
the S11 TEID this message is received on. If former, then MME sends PAGING
message, to only those eNBs matching TAI/ECGI restriction criteria, with the
paging identity set to 3gpp-group-id. If the paging has to be restricted at an
ECGI level, the MME determines the eNB to be paged based on the MSB 20 bits of
ECGI. But if the ECGI represents the cell ID of a HeNB behind a HeNBGW, then
the MSB 20 bits will not match any of the eNB ID connected to MME. If the MME
cant determine which eNB ID it has to send the paging to, it will use the TAI
to which this ECGI is part of to identify the HeNBGW. Each HeNBGW serves a
distinct set of TAIs. This is where sending ECGI as \ tuple as
mentioned in step 4 helps.
10\. eNB sends the group page. If ECGI is included, then the group page is
restricted to ECGIs identified by the MME. UE(s) belonging to the group
respond by using TS 23.401 [6] 5.3.4.3 step 5 \"Service Request procedure\" to
convert from ECM_IDLE to ECM_CONNECTED.
NOTE 10: The proposal for paging enhancements includes sending of ECGI in the
PAGING message, along with sending of 3gpp-group-id. Correspondingly, the
Paging Occasion formula (TS 36.304) which takes into account UE\'s identity
(IMSI mod 1024) may need modification to factor in 3gpp-group-id as well. But,
the details are best discussed under the remit of RAN WGs.
NOTE 11: ECGI is only sent from MME to eNB. It isn\'t proposed to be sent from
eNB to UE in the PAGING message.
Editor\'s note: The details of the paging mechanism are for RAN WG2 to work
out.
11\. After UEs transition to ECM_CONNECTED mode, SGW delivers the message to
the UE via S1-U tunnel per steps 6-7 above.
**_Alternative 2 (Not shown, and not recommended):_**
_If this alternative is used, then SGW could either initiate DDN for each UE
belonging the group. MME then uses existing paging mechanisms to page each UE
in the group individually. This approach ensures no impact to S1-AP, and Uu
interface procedures due to paging procedures._
##### 5.1.3.3.1.6 Group Message Delivery for ECM-CONNECTED UEs with TAI or
ECGI level Geo Restriction {#group-message-delivery-for-ecm-connected-ues-
with-tai-or-ecgi-level-geo-restriction .H6}
This procedure is applicable only when the group message needs to be delivered
with geo-restriction applicable at either TAI or ECGI level. This procedure is
not applicable when geo-restriction is needed at eNB Id level.
NOTE: The reason to treat TAI geo-restriction the same as ECGI geo-restriction
is for the case where an eNB supports multiple TAIs (as indicated to MME
during S1 SETUP). An intra-eNB inter-TAI mobility for the case where both TAIs
are part of UE\'s TAI list (sent by MME during ATTACH/TAU) doesn\'t generate
any S1 signalling in that case.
In case the geo-restriction is at the ECGI level, the list of associated TAIs
to those ECGI is provided. This is done to account for the case of HeNB-GW
present on S1-AP (as explained in step 4 of 5.3.1.x.5).
If the SGW receives a group specific downlink data with either TAI or ECGI
level geo restriction, then it cant immediately forward the data to the ECM-
CONNECTED UEs of the group since it cannot accurately know the latest TAI or
ECGI where the UE is in. For this case, the SGW employs the following
procedure shown in figure below
Figure 5.1.3.3.1.6-1:
1\. SGW sends a new group specific S11 message (Request-UEs-In-TAI-ECGI-Report
message) to MME requesting the MME to report all the UEs in the given TAI or
ECGI. If the SGW is sending Downlink Data Notification message to the MME for
ECM-IDLE UEs as per Alternative 1 described above, then this request to report
UEs in a TAI or ECGI can be carried as an indication in the DDN message itself
instead of sending a separate message.
2\. MME activates one time Location Reporting procedure (i.e. Location
Reporting Control with Request Type set as Direct reporting) for all the UEs
belonging to the group only towards the eNB that owns the TAI or ECGI (MSB 20
bits of ECGI is the eNB ID).
If the MSB 20 bits of the ECGI does not map to any eNB that the MME is
connected, then this could mean that this is the ECGI of a HeNB behind a
HeNBGW. For such cases, MME can immediately look up all the UEs that are in
this ECGI and need not activate any location reporting for such UEs.
3\. The eNB sends the Location Report for each UE.
4\. Once the E-UTRAN returns the Location Report for all the UEs, the MME can
send a single S11 message for the group with the S11 SGW TEIDs of all the UEs
in the requested TAI or ECGI.
5\. SGW will then start forwarding the downlink data over S1-U only for these
reported UEs.
##### 5.1.3.3.1.7 High-level architecture for GERAN/UTRAN {#high-level-
architecture-for-geranutran .H6}
The high-level architecture and principles for E-UTRAN apply equally for
GERAN/UTRAN when accessed via S4-SGSN. Direct Tunnel support for affected
users will be disabled when employing this feature.
NOTE: When S4-SGSN downloads subscription data for a given user, and the
subscription data indicates 3gpp-group-id for one or more APNs, then S4-SGSN
will not activate Direct Tunnel for UEs part of the group.
Editor\'s note: The details of the paging mechanism for GERAN and UTRAN
support are for RAN WG2 and GERAN WGs to work out.
The UTRAN equivalent of geo-restriction will be RAI, SAI, and RNC-Id.
The GERAN equivalent of geo-restriction will be CGI.
If geo-restriction in the form of LAI is sent by SCS/AS, then it will be
mapped to appropriate TAI, RAI, SAI, eNode-Id, RNC-Id or CGI by MTC-IWF.
This solution does not support sending message(s) addressed to a group of
users for when GERAN/UIRAN is accessed via Gn-SGSN.
##### 5.1.3.3.2 Impacts on existing nodes and functionality
> Editor\'s note: Capture impacts on existing 3GPP nodes and Functional
> elements (e.g. UE, MME, eNB, S-GW, P-GW etc.).
SCS:
\- New procedure to allow sending of message(s) destined for a group
MTC-IWF:
\- New procedure on Tsp to allow sending of message(s) destined for a group
\- Updated S6m to support group identifications
\- Mapping of geo-restriction to 3GPP consumable formats
\- New \"Tg\" interface to allow sending of message(s) destined for a group
HSS
\- Mapping of \"external\" to \"internal\" group identifier for
addressing/messaging
\- Updated signalling towards MME/SGSN to support group identifications
PGW:
\- New \"Tg\" interface to allow sending of message(s) destined for a group
\- Support of Group control and user plane tunnel to SGW to enable sending of
message(s) destined for a group
SGW:
\- Support of Group control and user plane tunnel to PGW
\- Implement mechanism for enabling delivery of message(s) destined for a
group of users to be restricted per certain geo- criteria
MME:
\- Updated S6a to support group identifications
\- Updated EMM/ESM signalling to support group identifications
\- Implement mechanism for enabling delivery of message(s) destined for a
group of users to be restricted per certain geo- criteria
\- Support delivery of message(s) destined for a group where user(s) of group
have PSM active
(S4)SGSN:
\- Updated S6d to support group identifications
\- Updated GMM signalling to support group identifications
\- Implement mechanism for enabling delivery of message(s) destined for a
group of users to be restricted per certain geo- criteria
\- Support delivery of message(s) destined for a group where user(s) of group
have PSM active
UE:
\- Updated EMM/ESM signalling to support group identifications
If Alternative 1 for group paging optimization for EUTRAN is supported then,
additional impacts:
MME:
\- Support Downlink Data Notification for the group
\- Support optional group paging
eNB:
\- Support optional group paging mechanism
UE:
\- Respond to optional group paging
##### 5.1.3.3.3 Solution evaluation
See clause 5.1.4.
#### 5.1.3.4 Solution: T4 message delivery to a group of devices
##### 5.1.3.4.1 General
The T4 message delivery to a group of devices is based on the T4 device
trigger procedure and extended with message delivery to and resolution of
individual group members. The MTC-IWF then sends individual messages to the
UEs of the same MTC group. The SMS message is a trigger message and has, in
addition to the application port ID, trigger payload and Trigger Indication,
an external group ID for addressing the group from the 3^rd^ party service
provider. The trigger payload contains the group message.
This has the advantage that the UE does not need to be changed and it also
does not need to know to which MTC group it belongs to. Also the delivery
status of the message for individual UEs is visible.
The following assumptions are made:
\- Tsp and T4 are used for message delivery.
\- MTC-IWF is able to translate a group message to individual messages to the
group members.
\- The membership to a group is configured in form of an external group ID in
the subscriber profile in the HSS and is known to the MTC application. The HSS
is able to resolve the external group ID to the IMSIs of the individual group
members.
The group message delivery procedure is shown in the following figure:
Figure 5.1.3.x.1-1: T4 message delivery to a group of devices
1\. The SCS needs to send a message to a group of UEs. If the SCS has no
contact details for an MTC-IWF, it may determine the IP address(es)/port(s) of
the MTC-IWF by performing a DNS query using the External Group Identifier or
using a locally configured MTC-IWF identifier.
2\. The SCS sends the Group Message (External Group Identifier, SCS
Identifier, message reference number, validity period, priority, Application
Port ID, location/area information) to the MTC-IWF. The SCS includes a message
payload that contains the information destined for the MTC application, along
with the information to route it to the MTC application. The Application Port
ID is set to address a function within the UE. The location/area information
is to allow for location selective message delivery, i.e. towards the group
members in a specific location only.
3\. The MTC-IWF checks that the SCS is authorised to send group messages and
that the SCS has not exceeded its quota or rate of messages over Tsp. If this
check fails the MTC-IWF sends a Group Message Confirm message with a cause
value indicating the reason for the failure condition and the flow stops at
this step. Otherwise, the flow continues with step 4. The MTC-IWF resolves the
area/location information to a 3GPP format for further comparison with the
location information of the group members received in step 8.
4\. The MTC-IWF sends a Group Information Request (External Group Identifier
and SCS Identifier) message to the HSS/HLR to determine if SCS is authorized
to send a group message and retrieve the related HSS stored \"Routing
information\" including the identity of the serving CN node.
5\. The HSS/HLR resolves the External Group Identifier and determines the
IMSIs of the individual group members.
6\. The HSS requests from the serving node the current location information
for each group member. The serving node may page the UE in order to retrieve
accurate information.
7\. The HSS/HLR sends the Group Information Response (list of IMSIs with
serving node identity and location information) message.
8\. The MTC-IWF maps the Group Message into individual messages to those group
members of the list received from the HSS/HLR which are residing in the
requested location/area and sends them via T4 to the SMS-SC and further to the
UEs as described in TS 23.682, Figure 5.2.2-1: T4 Trigger Delivery Flow.
##### 5.1.3.4.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW etc.).
**HSS:** The HSS needs to resolve the External Group Identifier and to
determine the IMSIs of the individual group members. Furthermore similar to
the conclusion for the location of the UEs in MONTE, the HSS needs to request
location information of the group members and sends it to the MTC-IWF.
**MTC-IWF:** The MTC-IWF needs to map the requested location into a 3GPP
format and needs to compare this location information with the individual
group members' location received from the HSS. The MTC-IWF duplicates the
message request and sends it only to those group members residing in the
requested location/area.
##### 5.1.3.4.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
**Benefits:**
\- Low complexity and based on existing functionalities for SMS delivery and
UE location retrieval by serving node.
\- UE does not need to know its group membership.
\- Location selective message delivery to group member in a specific location
only.
\- Beneficial if the UE needs to be triggered anyway and also when the group
members are distributed in a relatively huge area.
**Drawbacks**
\- For big groups, the signalling between HSS and serving nodes is increased
and also paging per UE in IDLE mode is needed.
\- excessive signalling when many UEs are to be sent the same message.
\- The solution changes the principle of the HSS - because the HSS now handles
group procedures which extend beyond subscriber management.
### 5.1.4 Overall evaluation
Editor\'s note: Use this clause for evaluation of key issues.
Comparison of the solutions is given below.
Table 5.1.4-1: Comparison of Solutions
+-------------+-------------+-------------+-------------+-------------+ | Solution | Solution 1 | Solution 2 | Solution 3 | Solution 4 | | | CBS | MBMS | PDN | T4 | | Criteria | | | Connection | | +-------------+-------------+-------------+-------------+-------------+ | RAN impact | Applying | None | Optional | None | | | PWS, i.e. | | group | | | | ETWS/CMAS, | | paging | | | | the paging | | mechanism | | | | message may | | | | | | need to add | | | | | | a new | | | | | | indicator | | | | | | IE of group | | | | | | messaging | | | | | | or use UE | | | | | | identity | | | | | | for group | | | | | | paging | | | | +-------------+-------------+-------------+-------------+-------------+ | Main | For E-UTRAN | The system | large | The | | Drawback | access, | needs to be | impact on | signalling | | | only PWS is | aware that | the | between HSS | | | supported. | selected | existing | and serving | | | PWS was | MBMS | system | nodes is | | | developed | service | | increased | | | for | area(s) may | | and also | | | ETWS/CMAS | result in | | paging per | | | and did not | broadcast | | UE in IDLE | | | consider | of the | | mode is | | | commercial | message | | needed. | | | services. | over an | | | | | The | area larger | | | | | CMAS/ETWS | than the | | | | | capable UEs | area that | | | | | all read | may be | | | | | SIB to | indicated | | | | | acquire | by SCS/AS. | | | | | co | | | | | | rresponding | | | | | | cell | | | | | | broadcast | | | | | | messages | | | | | | even this | | | | | | messages is | | | | | | not for | | | | | | PWS. | | | | | | | | | | | | No support | | | | | | of the | | | | | | shared | | | | | | network | | | | +-------------+-------------+-------------+-------------+-------------+ | Radio | Broadcast | Broadcast | Unicast in | Unicast in | | resource | in the air | in the air | the air | the air | | save | | | | | +-------------+-------------+-------------+-------------+-------------+ | PSM support | The UE in | It is | SGW buffers | SMS | | | power | expected | the data | ret | | | saving mode | that | until the | ransmission | | | would not | power- | last | after UE | | | be able to | constrained | P | wakes up | | | receive the | devices can | SM-activate | | | | group | be | UE connects | | | | messages. | pre | to the | | | | | -configured | network. | | | | | with the | | | | | | TMGI, | | | | | | frequency, | | | | | | content | | | | | | d | | | | | | escription, | | | | | | t | | | | | | ransmission | | | | | | schedule. | | | | | | But if in | | | | | | power | | | | | | saving | | | | | | mode, UE | | | | | | would not | | | | | | able to | | | | | | receive the | | | | | | group | | | | | | messages. | | | +-------------+-------------+-------------+-------------+-------------+ | Group ID | External | External | External | External | | and mapping | group ID, | Group ID, | Group ID, | Group ID, | | | message ID | TMGI | Internal | | | | | | Group ID | | +-------------+-------------+-------------+-------------+-------------+ | Effort for | Moderate, | low, | High, new | Low, | | providing | standardize | largely | functions | largely | | it from CN | the | using | and | using | | perspective | interface | existing | interaction | existing | | | to CBC | fu | with | fu | | | | nctionality | existing | nctionality | | | | | ones | | +-------------+-------------+-------------+-------------+-------------+ | RAT Support | GERAN, | MBMS with | GERAN, | GERAN, | | | UTRAN | GPRS | UTRAN, | UTRAN, | | | | supports | E-UTRAN | E-UTRAN | | | NOTE: For | GERAN and | | | | | E-UTRAN, | UTRAN; | | | | | only PWS is | | | | | | supported | MBMS with | | | | | | EPS | | | | | | supports | | | | | | UTRAN and | | | | | | E-UTRAN | | | +-------------+-------------+-------------+-------------+-------------+ | Size of | Small size | Better | Better | Small size | | message | of data | support | support | of data as | | | | delivering | delivering | SMS | | | | a large | a large | | | | | amount of | amount of | | | | | data. But | data. But | | | | | can also | can also | | | | | support | support | | | | | small size | small size | | | | | message | message | | | | | delivery. | delivery. | | +-------------+-------------+-------------+-------------+-------------+ | UE | CBS | MBMS | No extra | No extra | | Capability | capability | capability | terminal | terminal | | Requirement | needed | needed. | capability | capability | | | | | needed | needed | | | | Note: it is | | | | | | still FFS | | | | | | whether the | | | | | | MBMS | | | | | | solution | | | | | | for message | | | | | | delivery to | | | | | | a group of | | | | | | UEs works | | | | | | for low | | | | | | complexity | | | | | | UEs. | | | +-------------+-------------+-------------+-------------+-------------+ | Appropriate | Delivery to | Delivery to | | Small group | | Usage | a group | a group | | members are | | Scenario | with large | with large | | distributed | | | members in | members in | | in a | | | a | a | | relatively | | | particular | particular | | huge area. | | | g | g | | | | | eographical | eographical | | | | | area. | area. | | | +-------------+-------------+-------------+-------------+-------------+
The motivation for this key issue is to efficiently distribute the same
message (e.g. a trigger request) to those members of an MTC group that are
located in a particular geographical area.
Solution 1 and solution 2 provide broadcast based approach in the air to
distribute the message. For CBS solution, PWS was developed for ETWS/CMAS and
did not consider commercial services. Extra efforts and enhancement are needed
for UTRAN/E-UTRAN to support commercial group based services with CBS.
Solution 3 reuses existing PDN connection concept to distribute the group
message. On the CN path part the message delivery to SGW is per group while on
the air interface the message delivery is still individual. The system impact
is relatively high comparing with the other solutions.
Solution 4 reuses existing T4 message delivery to distribute the group
message. On the delivery path from IWF/SCEF to UE, it is still individual.
Based on the above comparison, Solution-2 is selected since it provides
efficient group message delivery with low system impact. Group message
delivery using MBMS is more suitable to deliver group message to large group
members in a particular geographical area. This solution has limited
applicability and does not support all the scenarios, e.g. UEs not supporting
MBMS, UEs sitting in areas where MBMS is not deployed. A further delivery
mechanism shall be studied for the scenarios where MBMS cannot be used, and a
delivery method selection is needed on the SCEF or SCS/AS but the selection
logic in the SCEF or SCS/AS is out of the scope of 3GPP and will not be
further detailed.
## 5.2 Selection of delivery mechanisms for messaging to a group
### 5.2.1 Description
This key issue is dependent on the key issue \"Message delivery to a group of
devices\".
When delivering the same message to a group of devices, it is possible that
different UEs that are members to the same group may have different
capabilities. Moreover, message may need to be delivered across different
areas of same PLMN with different capabilities, different radio access
technologies or even spread across different PLMNs.
Therefore, the following may need to be taken into account when delivering a
message to a group:
\- Serving PLMN and UE capability.
\- Availability of message delivery mechanism(s) and radio access technology
within the geographic area where the message needs to be delivered.
As an example, if CBS or MBMS based messaging were to be introduced, the same
message to a group may need to be delivered using different delivery
mechanisms e.g. for some devices using CBS, for some using MBMS, for some
using unicast SMS e.g. via T4.
NOTE 1: The actual possible delivery mechanisms for messaging to a group are
dependent on the conclusions for key issue \"Group based Messaging\".
There are two possible main approaches that can be taken into consideration,
depending on how the service is exposed (e.g. via API):
\- Approach 1: The service exposed to the application server is such that the
actual delivery mechanism to the devices within a group is transparent to the
application server. In that case, the selection of the delivery mechanism
needs to be performed within the 3GPP system.
\- Approach 2: The service exposed is such that it is up to the application
server to decide how to reach devices within a group, e.g., which messaging
service to use. In this case the 3GPP system may need to make available to the
application service which delivery mechanism(s) are available to each device
within a group.
NOTE 2: It is to be studied which approach, or combination of approaches, is
appropriate for adoption.
### 5.2.2 Architectural Requirements
The following requirements, related to deciding how to deliver a message to a
group, when more than one delivery mechanism is supported by the system, need
to be met:
For Approach 1: Delivery selection performed within 3GPP system:
\- The system shall be able to select how to deliver a message to a group
among different group members, based on:
\- The UE capabilities.
\- The location of the UE, and the capabilities of the serving PLMN(s) in that
location.
\- The geographic area in which the message needs to be delivered.
\- The system may also consider:
\- The message size.
\- Operator\'s policy or SLA agreement with application provider.
\- The system may take into consideration the amount of group members within a
certain location when deciding the message delivery mechanism(s).
Editor\'s note: The parameters based on which the system selects the method
for delivery of a message to a group are FFS.
For Approach 2: Available delivery mechanism(s) exposed by 3GPP system,
delivery selection performed in application server:
\- The system shall be able to expose all necessary information to application
server regarding available delivery mechanism(s) based on:
\- The different possible message delivery mechanisms supported by the system.
\- The UE capabilities.
\- The location of the UE, and the capabilities of the serving PLMN(s) in that
location.
NOTE: Use cases are foreseen where the application server decides the delivery
mechanism(s) completely or partially based on information already available in
the application server such as the UE capabilities, the location of the UEs,
the geographic area in which the message has to be delivered and the possible
message delivery mechanisms supported within the geographic area.
Editor\'s note: The information that has to be exposed by the system to the
application server for delivery of a message to a group is FFS.
For both approaches the following considerations apply:
\- Each device should receive the message via only one delivery mechanism.
### 5.2.3 Solutions
#### 5.2.3.1 Solution: \
##### 5.2.3.1.1 General
Editor\'s note: Describe the solutions. Sub-clause(s) may be added to capture
details, procedural flow etc.
##### 5.2.3.1.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW etc.).
##### 5.2.3.1.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 5.2.4 Overall evaluation
Editor\'s note: Use this clause for evaluation of key issues.
## 5.3 Key issue - Group based Policy Control
### 5.3.1 Description
MTC applications generally involve a group of devices. Typically applications
today involve more than 1000 subscriptions for a single customer. From both
customer and operator points of view, there is benefit in optimized handling
of groups of MTC devices.
Group based policing can be used to enforce a policy for a group of MTC
devices. This allows greater flexibility to the MTC application or MTC
application owner compared to individual policies for each of the devices,
while at the same time ensuring the operator that the particular group of MTC
devices does not unduly load the network.
### 5.3.2 Architectural Requirements
Editor\'s note: The requirements for group based policing are FFS.
#### 5.3.2.1 Architectural assumptions and limitations
The following are the agreed architectural assumptions for defining overall
architectural requirements:
\- Policy group members are subscribed to same HPLMN
\- Policy group members are associated to the same APN. If the UE belongs to
more than one policy group, then each policy group should be associated with a
different APN.
NOTE 1: The \"Policy group members\" refers to the enforcement of policy on a
group of devices.
\- Roaming needs to be supported for members of a policy group.
\- Bit rate measurement and enforcement for a policy group is within a common
PCEF; the same PCEF and PCRF need to be selected for all members in the group.
\- Policy group members are connected to the same P-GW/GGSN. P-GW/GGSN
selection will always select the gateway in the HPLMN. Group policing function
is only supported in the HPLMN.
\- Policy controls for individual policy group members should co-exist with
the introduction of the new group level maximum aggregate bit rate control.
\- Solutions for group based policing should at least cater for groups of in
the order of 1000 group members.
NOTE 2: The minimum and maximum number of policy group members, which takes
into account relevant core network capacity, is defined by operator.
NOTE 3: The number of policy group members will be limited by the number of
UEs that can be served by the same PCEF.
\- Group association can be with more than one policy group.
Editor\'s note: Whether multiple group policies cause conflicts, what to do
about such conflicts and whether resolving them through administrative means
will help is FFS.
\- Support of dynamic policy control over the Rx interface is not required
with group based policy control.
Editor\'s note: The means by which a UE is associated to a policy group is
FFS.
#### 5.3.2.2 Overall architectural requirements
The following are the agreed overall architectural requirements based on the
architectural assumptions listed in clause 5.3.2.1:
\- A per policy group DL APN AMBR needs to be supported with group based
policy control.
\- Group APN-AMBR enforcement applies only at the PCEF.
\- A per device DL APN AMBR may be supported in conjunction with group based
policy control.
\- A per device UL APN AMBR may be supported in conjunction with group based
policy control.
\- The system shall support to take policy actions when the per group DL APN
AMBR is reached.
\- The system shall support to take policy actions when the per group UL APN
AMBR is reached.
Editor\'s note: How this works in relation to transport layer protocols such
as TCP is FFS.
NOTE: Signalling overload as a result of this functionality shall be avoided.
Editor\'s note: How to do policing in the uplink is FFS. Possible solutions
include: per policy group UL APN AMBR, Event reporting when exceeding
threshold, policing number of connections/bearers.
Editor\'s note: UEs within the group may be spread out across different eNBs,
in which case enforcement of a Group APN-AMBR in the UL is only possible at
the PCEF, which does not help to save radio or backhaul resources.
### 5.3.3 Solutions
### 5.3.4 Overall evaluation
Editor\'s note: Use this clause for evaluation of key issues.
## 5.4 Key issue - \"Group-specific NAS Level Congestion Control\"
### 5.4.1 Description
Devices that belong to a predefined group may overload the MME by generating a
large amount of NAS signalling. For example, a particular group of devices may
continuously try to connect to a non-responding server and does so by
repeatedly (and successfully) re-attaching to the network during the recovery
phase of this particular server. This causes a significant amount of
unnecessary attach procedures and depending on the number of affected devices
this may disturb or even hinder the attach procedures of \"other\" UEs that do
not relate to the failure of the MTC server. In such a scenario, the MME shall
be able to distinguish attach requests originating from this group of devices
which is to be identified by the proposed group identifier and to apply
existing NAS level mobility management congestion control schemes, as defined
in TS 23.401 [6], to the identified UEs.
The key issue is about how the network determines that UEs belonging to a
specific group are causing NAS signalling overload/congestion and not about
creating new NAS congestion mitigation schemes.
NOTE: How to identify groups of devices is defined in Key issue 5.5 - Group
based addressing and identifiers.
### 5.4.2 Architectural Requirements
The following requirements need to be met:
\- The network shall be able to determine if NAS signalling
overload/congestion is caused by UEs that belong to a pre-defined group and
apply the existing NAS level congestion control schemes, defined in TS 23.401
[6] to UEs that belong to this group.
### 5.4.3 Solutions
#### 5.4.3.1 NAS Level Congestion Control based on APN and group identifier
##### 5.4.3.1.1 General
How the MME/SGSN determines that UEs are causing NAS signalling
overload/congestion is left as implementation dependent. Possible solutions
that fall into this space include the following: (i) MME/SGSN can track NAS
signalling per group and determine that members of a particular group are
causing too much NAS signalling. Temporary NAS signalling peaks may be detect
by a time window and may not trigger APN-and-Group based congestion control.
(ii) the OAM system informs the MME/SGSN. The OAM system may learn about this
e.g. by knowing that the server that serves a particular group of UEs has gone
down.
In this solution, a 3gpp internal group identifier internal-group-id is used.
It is part of the subscriber data in the HSS and is sent by the HSS to the
MME/SGSN as part of normal EPS signalling. The UE is not aware of the Group
identifier such that no modifications on the UE are required.
##### 5.4.3.1.1.1 Detection of overload/congestion {#detection-of-
overloadcongestion .H6}
The determination of NAS signalling overload/congestion is at an individual
MME/SGSN granularity and does not require joint detection across multiple
MMEs/SGSNs. An MME/SGSN may detect the NAS signalling congestion in a similar
way as described in TS 23.401 [6] clause 4.3.7.4.2.1:
The MME/SGSN may detect the NAS signalling congestion associated with the
Group and start and stop performing the Group based congestion control based
on criteria such as:
\- Maximum rate of EPS Bearer activations per Group;
\- Maximum rate of MM signalling requests associated with the devices of a
particular Group based on per Group thresholds; and/or
\- Setting in network management.
The MME/SGSN may detect the NAS signalling congestion associated with the
Group and APN and start and stop performing the Group based congestion control
based on criteria such as:
\- Maximum rate of EPS Bearer activations per Group and APN;
\- Maximum rate of SM signalling requests associated with the devices of a
particular Group and a particular subscribed APN based on Group and APN
thresholds; and/or
\- Setting in network management.
##### 5.4.3.1.1.2 Group-specific Congestion Control {#group-specific-
congestion-control .H6}
This solution addresses group-specific congestion control both for Mobility
Management and Session Management signalling. Therefore, a new clause is added
in TS 23.401 [6] with title \"group specific congestion control\". Text in
this clause is copied from clause 4.3.7.4.2.3 specifying \"APN based Mobility
Management congestion control\", where the term **APN** is replaced by
**Group** , in order to address congestion control for Mobility Management
signalling.
Moreover, text from clause 4.3.7.4.2.2 specifying \"APN based Session
Management congestion control\" is copied and extended by **Group based**
congestion control, in order to address congestion control for Session
Management signalling.
##### 5.4.3.1.1.3 Group identifier for NAS Level Congestion Control {#group-
identifier-for-nas-level-congestion-control .H6}
Internal-group-ids shall be unique within a PLMN and are always interpreted in
the context of a PLMN. The internal-group-id shall be stored per UE in the
HLR/HSS. A UE belongs to a Group, if the corresponding Group Identifier is
stored in the UE\'s subscription data in the HLR/HSS.
An internal-group-id is sent by the HSS to the MME/SGSN as part of normal EPS
signalling. After receiving the internal-group-id, the MME/SGSN stores the
group identifier information in the UE MM context. Therefore, at the time of a
user\'s attach or service request to the network, the MME already knows about
the groups the users belongs to. Thereby, in case one of the internal-group-
ids associated with the user is under congestion control, the MME can
immediately reject the user\'s attach or service request with a back-off timer
and may immediately reject any subsequent requests from this UE. The UE is not
aware of the group(s) it is assigned to and the related internal-group-ids.
##### 5.4.3.1.2 Impacts on existing nodes and functionality
MME/SGSN is enhanced to determine that NAS signalling overload/congestion is
being caused by UEs that belong to a specific group and apply the existing NAS
mobility management congestion scheme to this group of UEs. This is an
internal MME/SGSN functionality and does not impact any interfaces. In
particular, it also does not require any changes in the UE, as the UE is not
aware of the Group identifier. The Group identifier is added to the
subscription data and is only known to the MME/SGSN and the HLR/HSS.
##### 5.4.3.1.3 Solution Evaluation
The solution only requires small changes in the MME/SGSN and the HSS. The
internal-group-id is stored in the HSS and sent by the HSS to the MME/SGSN as
part of normal EPS signalling. The UE is not aware of the internal-group-id.
The solution does not require any changes in the UE. Re-using existing text
from TS 23.401 [6] clause 4.3.7.4.2, only minimal changes to existing
normative text are required. The solution offers the possibility to block
either mobility management or session management signalling depending on how
to best address the current congestion situation with minimal impact on other
UEs and services.
### 5.4.4 Overall evaluation
For the Key Issue - \"Group-specific NAS Level Congestion Control\", it is
recommended that solution in clause 5.4.3.1 is adopted as basis for normative
work. The solution only requires small changes in the MME/SGSN and the HSS.
The UE is not aware of the internal group identifier, thus the solution does
not require any changes in the UE. Re-using existing text from TS 23.401 [6]
clause 4.3.7.4.2, only minimal changes to existing normative text are
required. The solution offers the possibility to block either mobility
management or session management signalling depending on how to best address
the current congestion situation with minimal impact on other UEs and
services.
## 5.5 Key issue - Group based addressing and identifiers
### 5.5.1 Description
Applications generally involve a group of devices. Typically applications
today involve more than 1000 subscriptions for a single customer. From both
customer and operator points of view, there is benefit in optimized handling
of groups of devices.
Group based addressing and identifiers are essential to support group based
features such as delivery of group messaging and group policing.
### 5.5.2 Architectural Requirements
The following group addressing and identifiers related requirements need to be
met:
\- The network needs to support the ability to group subscriptions together.
\- It needs to be possible for the network to determine whether a subscription
is a member of a specific group or not (e.g. using the respective group
identifier).
\- It needs to be possible for the network to address the individual devices
within a group.
NOTE: A device can belong to more than one group.
\- It needs to be possible for Group Identifiers to be unique within a PLMN.
\- It needs to be possible for Group Identifiers to be independent of specific
set of group features. As an example group identifiers used for identifying
users belonging to a group for delivery of message(s) to the group can be
different from group identifiers used for policing and can be different to
group identifiers for NAS level congestion control.
Editor\'s note: It is FFS how to optimize the usage of 3GPP internal group
identifiers such that using a different group identifier for each individual
group feature can be avoided.
### 5.5.3 Solutions
#### 5.5.3.1 Solution 1: Group based addressing by SCS/AS and identifying
group members within a PLMN
##### 5.5.3.1.1 General
Applications generally involve group of devices, with each group involving
100s or 1000s of devices. MTC devices can host multiple applications with each
application involving different group of devices. The devices that belong to a
group are referred to as \'group members\'. Thus, a group can involve 100s or
1000s of group members. Group membership can be static or can evolve
dynamically, with group members being added and/or removed during the lifetime
of a group. The Service Capability Server (SCS) / Application Server (AS) can
create new groups with associated group members, and can remove existing
groups.
Different types of groups exist, including those that have a relatively static
membership and those that have more dynamic memberships. Some group operations
require that core network nodes, e.g. the HSS or MME, be aware of the
membership of UEs in the group, for example, group-based APN congestion,
roaming status of all members of a group, and counting of devices belonging to
a group in a given area. This solution uses maintenance of the group
membership at the HSS, and so will be more applicable to groups that have a
relatively static membership (to avoid heavy impact on the HSS) and require
that the HSS and other core network nodes be aware of the group membership.
SCS/AS specific groups are identified by External-Group-IDs. The External-IDs
of the 3GPP devices that are members of a group are bound to the group\'s
External-Group-ID. Both, static and dynamic binding of group members to
External-Group-ID can be supported. A 3GPP device can host multiple
applications, and the identity of a 3GPP device can be bound to more than one
External-Group-ID.
This solution provides two building blocks that other SCEF services can use:
\- the ability to determine the Internal-Group-ID and the Internal-IDs of
group members based on an External-Group-ID and optional External-IDs provided
by the SCS/AS, and
\- the ability to request that the HSS add or remove an Internal-ID from a
group that the HSS maintains.
Figure 5.5.3.1.1-1: Architecture for Group Based Addressing by SCS/AS and
Identification of Group Members
Figure 5.5.3.1.1-1 shows the high level architecture, wherein an SCEF may
contain internal functionality related to a group of users, e.g., a Group
Management Function (GMF). Through this internal function, the SCEF can
maintain a local copy of the binding of the Internal-IDs (e.g. IMSI) and
External-IDs (e.g..MSISDN) of group members with the group\'s Internal-Group-
ID and External-Group-ID and other information needed for the delivery of
group services. For example, for a PLMN that supports MBMS, the SCEF\'s
internal GMF can maintain the TMGIs allocated to the groups. Mapping of
External-Group-IDs to Internal-Group-IDs, and location information of the
group members can also be maintained at the GMF, if needed.
##### 5.5.3.1.2 Procedure flows
Figure 5.5.3.1.2-1 illustrates the procedure flow for group based addressing
and identification of group members. In this illustration, the SCEF includes
an internal GMF.
Figure 5.5.3.1.2-1: Procedure Flow for Group Based Addressing and
Identification of Group Members
1\. SCS/AS requests the SCEF support for an application specific group by
sending a Group Addressing Request message. The message includes the External-
Group-ID and may include the External-IDs of the devices (UEs) that are
members of the external group.
NOTE 1: How an application specific group identity (External-Group-ID) is made
unique is external to the 3GPP network.
2\. The SCEF exchanges Group Information Request/Response messages with the
HSS to determine if the SCS/AS is authorized to send a Group Information
Request for the External-Group-ID. The HSS maps any received group member
External-IDs to Internal-IDs. The External-Group-ID is mapped to Internal-
Group-ID. The HSS returns the Internal-Group-ID and the Internal-IDs to the
SCEF, including the mapping of External-IDs to Internal-IDs, if External-IDs
were submitted in the Group Information Request.
NOTE 2: This solution supports a 1-to-1 mapping between External-Group-ID and
Internal-Group-ID, and between External-ID and Internal-ID. 1-to-n mappings of
these identities is not supported.
3\. The SCEF, using its internal GMF, can maintain a local copy of the mapping
of External-Group-ID with information such as group member Internal-IDs, and
Internal-Group-ID associated with the group members.
NOTE 3: The local copy of the information may be kept, for example, to reduce
the impact on core network nodes from frequent queries that are likely to
return the same information as that already known to the SCEF.
Editor\'s Note: The use of a Local Copy at the SCEF needs to be further
discussed.
4\. The SCEF confirms to the SCS/AS with a Group Addressing Response message.
Steps 5-8 constitute the building block providing the ability for the SCS/AS
to request that a group member be added or deleted from an internal group
maintained by the HSS.
5\. The SCS/AS sends a Group Member Addition/Deletion Request to the SCEF to
have an additional External-ID added to an External-Group-ID.
6\. The SCEF exchanges Group Update Request/Response messages with the HSS to
determine if the SCS/AS is authorized to send a group membership request. The
HSS maps the External-Group-ID to the Internal-Group-ID and maps the External-
ID to the Internal-ID. The HSS updates the subscription record for the device,
adding it to the identified internal group.
7\. The local copy of the Group membership information at the SCEF can be
updated.
8\. The SCEF confirms the group addition to the SCS/AS with a Group Member
Addition/Deletion Response message.
##### 5.5.3.1.3 Impacts on existing nodes and functionality
SCEF:
\- Support messages from the SCS/AS as identified in the procedure flows;
\- Interact with the HSS for managing Group membership and Group Member status
information;
\- Maintain mapping between the group identifier and device group membership.
HSS:
\- Support interactions with the SCEF for providing information such as
mapping of External-IDs to Internal-IDs, mapping External-Group-IDs to
Internal-Group-IDs, and modifying internal group membership.
UE
\- No impacts other than the Application Layer specific functionality.
##### 5.5.3.1.4 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 5.5.4 Overall evaluation
# 6 Conclusions
Editor\'s note: This clause is intended to list conclusions that have been
agreed during the course of the work item activities. This should also capture
the guiding principles and documentation approach for creating CRs to
normative specifications within the responsibility of SA WG2.
## 6.1 Conclusions
\- For the Key Issue - \"Group-specific NAS Level Congestion Control\", it is
recommended that the solution in clause 5.4.3.1 is adopted as the basis for
normative work. It is lightweight, but still offers flexibility to block
either mobility management or session management signalling depending on how
to best address the current congestion situation with minimal impact on other
UEs and services.
\- For the Key Issue -\"Message delivery to a group of devices\", solution in
clause 5.1.3.2 is adopted as the basis for the normative work. Group message
delivery using MBMS is more suitable to deliver group messages to large
numbers of group members in a particular geographical area. This solution has
limited applicability and does not support all the scenarios, e.g. UEs not
supporting MBMS, UEs located on areas where MBMS is not deployed. For such
scenarios where the UE cannot receive messages via MBMS, message delivery may
occur via unicast communication, e.g. via user plane or via the methods using
SMS as described in TS 23.682 [3].
\- For the Key issue - \"Group based addressing and identifiers\", mapping
between external group ID and internal group ID is needed. In this release the
entity responsible for the mapping is not specified.
\- For the Key issue - \"Group based Policy Control\", no conclusions are
reached for this release.
\- For the Key issue - \"Selection of delivery mechanisms for messaging to a
group\", it has been decided that the SCS/AS is responsible for making
selection decisions. The application logic component of the SCS/AS is out of
scope of 3GPP.
#