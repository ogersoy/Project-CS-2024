# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document analyses the scenarios where permanent subscription data
that are shared by multiple subscribers (e.g. MTC UEs) are modified by
administration means in the HSS. Existing mechanisms in 3GPP networks to
convey the change of subscription data to relevant MMEs/SGSNs and their
drawbacks are outlined and possible solutions avoiding such drawbacks are
discussed.
The recommendation of the document is used to decide whether it is required to
standardize any solution, and which is the final preferred solution if further
standardization is needed.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 29.272: \"Evolved Packet System (EPS); Mobility Management Entity
(MME) and Service GPRS Support Node (SGSN) related interfaces based on
Diameter protocol\".
[3] 3GPP TS 23.008: \"Organisation of subscriber data\".
[4] 3GPP TS 23.003: \"Numbering, addressing and identification\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**backward index** : A method to store against a shared data value the list of
identities (e.g. IMSIs) that share the shared data value.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] apply.
# 4 Scenarios and Existing Mechanisms
## 4.1 Introduction
The S6a/S6d interfaces are used to download a subscriber\'s subscription data
from HSS to MME/SGSN so that the MME/SGSN can provide service to the
subscriber based on the downloaded subscription data (see 3GPP TS 29.272 [2]).
Once downloaded from HSS to MME/SGSN, data must be kept in sync, e.g. any
modification by means of administration in the HSS needs to be conveyed to the
MME/SGSN. Existing mechanisms for data synchronization (e.g. Insert/Delete
Subscriber Data operations) so far are based on the principle that a single
modification in the HSS impacts a single subscriber and thus results in a
single Insert/Delete operation on S6a/S6d. However, with the deployment of
large numbers of Machine Type UEs this principle may be questionable as it is
expected that a large set of UEs share some subscription data (i.e. having
intentionally the same values for e.g. access restriction, charging
characteristics, barrings, ...) and a single modification of shared
subscription data values in the HSS impacts a large set of subscribers and
thus results in an undesired flood of e.g. Insert/Delete operations on
S6a/S6d.
## 4.2 Shareable S6a/S6d Data
### 4.2.1 Introduction
For a given subscriber (identified by an IMSI), S6a/S6d data that are subject
to synchronization between HSS and MME/SGSN are either permanent or temporary
data. According to 3GPP TS 23.008 [3], permanent data can only be changed by
administration means (in the HSS) while temporary data may change as a result
of normal operation of the system. Consequently, only permanent data are
shareable while temporary data for a subscriber always have individual values.
### 4.2.2 Identification of Shareable Data
Whether a given piece of permanent data for a given subscriber is actually
shared (i.e. has intentionally a value that cannot differ from that for a
given non empty set of other subscribers) or not (i.e. has an individual
value) is internal to the HSS and is not visible by the MME/SGSN. This
includes the case in which no value has been allocated for optional permanent
data.
## 4.3 Update of Shared S6a/S6d Data
### 4.3.1 Introduction
### 4.3.2 Existing Mechanisms
#### 4.3.2.1 Method 1: Bunch of Individual Updates
When a piece of permanent subscription data that is shared by a (large) number
of subscribers is modified in the HSS, the HSS immediately sends to the
corresponding serving nodes (MME/SGSN) a (large) number of IDR messages.
Effectively the HSS emulates behaviour on S6a/S6d as if a large number of
concurrent individual data modifications rather than a single shared data
modification had been triggered.
#### 4.3.2.2 Method 2: Individual Updates spread over time
Instead of immediately sending large numbers of IDR messages (see method 1,
subclause 4.3.2.1), the HSS may delay sending of the next IDR by means of an
internal schedule, and so spread the generated signalling load over time.
#### 4.3.2.3 Method 3: Reset with Reset-ID
In the HSS, the shared data may be tagged with a Reset-ID value that is sent
to the serving nodes during individual location updates. When shared data is
modified, the HSS sends a Reset message with the corresponding Reset-ID to the
serving nodes. As a consequence, MME/SGSN will mark impacted subscriber
records as \"not confirmed\" resulting in data synchronization using ULR
messages at the next radio contact.
### 4.3.3 Drawbacks
#### 4.3.3.1 Method 1
A large number of IDR messages are generated by the HSS within a short period
of time.
This method requires internally in the HSS a backward index from shared data
to the set of sharing subscribers.
#### 4.3.3.2 Method 2
Compared to method 1, a large number of IDR messages are still generated by
the HSS. However, they are spread over time.
This method requires internally in the HSS a backward index from shared data
to the set of sharing subscribers.
Changes to the user profile are not applied immediately. Depending on the type
of data, this may have undesirable consequences.
#### 4.3.3.3 Method 3
A large number of messages (ULR) triggered by a single Reset message are still
needed. They are, however, spread over time.
Changes to the user profile are not applied immediately. Depending on the type
of data, this may have undesirable consequences.
# 5 Alternative Solutions
## 5.1 Introduction
As the main identified drawback of existing mechanisms (see subclause 4.3.2)
is the large number of S6a/S6d messages resulting from administrative
modifications of a shared permanent data value in the HSS, any alternative
solution is expected to limit the number of S6a/S6d messages needed for data
synchronization. Furthermore, a fallback solution towards one of the existing
mechanisms is required for cases where MMEs or SGSNs do not support the
alternative solution.
## 5.2 Sol-A: IDR/DSR Extension
### 5.2.1 Overview
This solution makes use of a new feature flag by which the MME/SGSN indicates
to the HSS during Update Location whether Sol-A is supported. If not supported
by the serving node, the HSS continues making use of any of the existing
mechanisms (see subclause 4.3.2); however, if supported, the HSS sends a
single, extended IDR or DSR message to indicate the change of a shared data
value. The extension must provide a means to identify the impacted subscribers
(IMSIs). An IMSI-Group Identifier as introduced in 3GPP TS 23.003 [4] in
Release 13 (CR 0418r3) with a new Group Service Identifier of \"shared data\"
is used instead of a single IMSI to identify the impacted subscribers.
### 5.2.2 Description
When a shared data value is changed, the HSS sends a single, extended IDR/DSR
message to MMEs/SGSNs that support Sol-A (as learned from ULR), and makes use
of one of the existing mechanisms (see clause 4.3.2) towards those MMEs/SGSNs
that do not support Sol-A.
It is the responsibility of the HSS to make sure that:
\- all subscribers that share a given piece of subscription data belong to the
same shared-data IMSI-Group. A given subscriber may belong to more than one
shared-data IMSI-Group. It is up to the HSS operator to assign shared-data
IMSI-Group values to a given piece of subscription data that is shared;
\- when shared data is updated, all relevant serving nodes that support Sol-A
are informed by an extended IDR/DSR message;
\- all impacted subscribers registered at a non-supporting serving node are
synchronized by one of the existing mechanisms.
It is the responsibility of the MME/SGSN that supports Sol-A to:
\- indicate support of Sol-A within ULR;
\- update the subscription data of all subscribers belonging to the identified
\"shared-data\" IMSI-Group when receiving an extended IDR/DSR;
\- mark the subscriber as \"not confirmed\" when a subscriber\'s subscription
data update fails for any reason, to ensure that partial success cases are
correctly covered.
### 5.2.3 Impacts on S6a/S6d Interfaces
The following impacts are identified:
\- definition of a new feature flag \"shared data update\" for ULR, IDR, DSR;
\- definition of a new Group-Service-Id code point \"shared data\" for IMSI-
Group-Id;
\- addition of IMSI-Group-Id to IDR and DSR;
\- definition of a dummy IMSI value for IDR/DSR to be used when IDR/DSR
contains a shared-data IMSI-Group-Id.
## 5.3 Sol-B: RSR Extension
### 5.3.1 Overview
This solution assumes that the existing method 3 (see subclause 4.3.2.3) is
used as fallback when the MME/SGSN does not support this solution but does
support the Reset-IDs feature. When a shared data value is changed, the HSS
sends an extended RSR message to the relevant serving nodes. The extension
indicates that not a marking but a data update is requested for the
subscribers identified by the Reset-ID. The definition of a new supported
feature is not required by Sol-B.
When the Reset-IDs feature is not supported by the serving node, use of RSR
may result in much more than needed subscribers being marked as \"not
confirmed\", resulting in increased ULR traffic. For these cases, method 1 or
2 should be considered as an appropriate fallback mechanism, but even method 3
may still be applicable.
### 5.3.2 Description
When a shared data value is changed, the HSS sends a single, extended RSR
message to relevant MMEs/SGSNs that support the Reset-IDs feature no matter
whether or not the MME/SGSN supports Sol-B. Non-supporting serving nodes will
ignore the extension and will mark all subscribers identified by the Reset-ID
as \"not confirmed\", resulting in a fallback to existing method 3 (see
subclause 4.3.2.3). It is up to HSS implementation to fallback to method 1, 2,
or 3 when the MME/SGSN does not support the Reset-IDs feature.
It is the responsibility of the HSS to make sure that:
\- all subscribers that share a given piece of subscription data subscribe to
the same Reset-ID;
\- when shared data is updated, all relevant serving nodes that support the
Reset-IDs feature are informed by an extended RSR message; towards other
relevant serving nodes one of the existing methods 1, 2, or 3 is used.
It is the responsibility of the MME/SGSN that supports Sol-B to:
\- update the subscription data of all subscribers subscribing to the reported
Reset-ID when receiving an extended RSR (instead of marking them \"not
confirmed\").
\- mark the subscriber as \"not confirmed\" when a subscriber\'s subscription
data update fails for any reason, to ensure that partial success cases are
correctly covered.
### 5.3.3 Impacts on S6a/S6d Interfaces
The following impacts are identified:
\- addition of a suitable extension to RSR that indicates which data are
updated.
# 6 Recommendation and Conclusion
## 6.1 Introduction
The following subclauses contain a comparison analysis and the final
conclusion.
## 6.2 Comparison Analysis
### 6.2.1 Comparison Criteria
Comparison of the different alternative solutions should be based on the
following criteria:
a) Objective compliance
Points of consideration:
\- Achievable traffic reduction
\- Available fallback mechanisms
b) Complexity
Complexity should be considered from different points of views:
\- Impacts to Serving Nodes
\- Impacts to the HSS
\- Impacts to the protocol
### 6.2.2 Comparison
Both alternative solutions Sol-A and Sol-B achieve a substantial traffic
reduction: if e.g. 10,000 UEs are impacted by the shared data update and these
UEs are registered at e.g. 50 serving nodes, only 50 messages instead of
10,000 messages need to be sent. An exception to this is when the update of
the shared data consists of a combination of inserting some and deleting other
data. For this exception, Sol-A requires sending of 50 extended IDRs and 50
extended DSRs while Sol-B requires sending of 50 extended RSRs.
For both alternative solutions, fall back mechanisms to an existing method
(method 1, method 2 or method 3) are available. It is up to HSS
implementations to select the appropriate method.
With regard to complexity in MME/SGSN and HSS, Sol-B is believed to be much
simpler than Sol-A as Sol-B does not require:
\- the definition of a new feature
\- the definition of a dummy IMSI
\- the definition of a shared data IMSI-Group
With regard to protocol impacts, Sol-B requires extensions only to RSR
(indication which data are modified) while Sol-A requires extensions to ULR
(new supported feature), ULA (new IMSI-Group code point), IDR (dummy IMSI &
IMSI-Group), and DSR (dummy IMSI & IMSI-Group)
The following table provides a comparison overview.
Table 6.2.2-1: A comparison overview
+----------+----------+----------+----------+----------+----------+ | Criteria | Traffic | A | Co | Co | Co | | | r | vailable | mplexity | mplexity | mplexity | | Solution | eduction | fallback | for HSS | for | for | | | | me | | MME/SGSN | protocol | | | | chanisms | | | | +----------+----------+----------+----------+----------+----------+ | Sol-A | good | Method 1 | high | high | high | | | | or 2 | | | | | | Note 1 | | | | | | | | Method 3 | | | | +----------+----------+----------+----------+----------+----------+ | Sol-B | very | Method 1 | low | low | low | | | good | or 2 | | | | | | | (only if | | | | | | Note 2 | R | | | | | | | eset-IDs | | | | | | | feature | | | | | | | not | | | | | | | su | | | | | | | pported) | | | | | | | | | | | | | | Method 3 | | | | +----------+----------+----------+----------+----------+----------+ | NOTE 1: | | | | | | | One or | | | | | | | two | | | | | | | messages | | | | | | | per | | | | | | | su | | | | | | | pporting | | | | | | | serving | | | | | | | node. | | | | | | | | | | | | | | NOTE 2: | | | | | | | One | | | | | | | message | | | | | | | per | | | | | | | su | | | | | | | pporting | | | | | | | serving | | | | | | | node. | | | | | | +----------+----------+----------+----------+----------+----------+
## 6.3 Recommendation and Conclusion
It is recommended to start normative work to specify Sol-B as an optional
mechanism in relevant 3GPP technical specifications.
#