# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes the Diameter-based PC4a interface between the
Proximity-based Services (ProSe) Function and the Home Subscriber Server (HSS)
defined for ProSe.
This specification defines the Diameter application for PC4a reference point
between the ProSe Function and the HSS.The interactions between the ProSe
Function and the HSS are specified.
The stage 2 description for Proximity-based Services (ProSe) features in EPS
is specified in 3GPP TS 23.303 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.303: \"Proximity based services; Stage 2\".
[3] IETF RFC 3588: \"Diameter Base Protocol\".
[4] 3GPP TS 33.210: \"3G Security; Network Domain Security; IP Network Layer
Security\".
[5] IETF RFC 4960: \"Stream Control Transmission Protocol\".
[6] 3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol\".
[7] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[8] IETF RFC 5234: \"Augmented BNF for Syntax Specifications: ABNF\".
[9] 3GPP TS 29.228: \"IP multimedia (IM) Subsystem Cx and Dx Interfaces;
Signalling flows and Message Elements\".
[10] 3GPP TS 29.272: \"Evolved Packet System; MME and SGSN Related Interfaces
Based on Diameter Protocol\".
[11] 3GPP TS 23.007: \"Restoration procedures\".
[12] 3GPP TS 29.329: \"Sh Interface based on the Diameter protocol\".
[13] void
[14] 3GPP TS 29.173: \"Location Services (LCS); Diameter-based SLh interface
for Control Plane LCS\".
[15] IETF RFC 7683: \"Diameter Overload Indication Conveyance\".
[16] 3GPP TS 24.334: \"Proximity-services (ProSe) User Equipment (UE) to ProSe
function protocol aspects; Stage 3\".
[17] 3GPP TS 24.333: \"Proximity-services (ProSe) Management Objects (MO);
Stage 3\".
[18] 3GPP TS 29.061: \"Interworking between the Public Land Mobile Network
(PLMN) supporting packet based services and Packet Data Networks (PDN)\".
[19] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[20] 3GPP TS 32.298: \"Charging Management; CDR parameter description\".
[21] IETF RFC 7944: \"Diameter Routing Message Priority\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
DRMP Diameter Routing Message Priority
ProSe Proximity-based Services
# 4 General Description
## 4.1 Introduction
The PC4a reference point between the ProSe Function and the HSS is defined in
the 3GPP TS 23.303 [2].
This document describes the PC4a interface related procedures, message
parameters and protocol specifications.
The PC4a interface allows the ProSe Function to retrieve ProSe related
subscription data in order to authorise access from the UE for ProSe.
# 5 Procedure Descriptions
## 5.1 Introduction
This section describes the Diameter-based PC4a interface related procedures
and information elements exchanged between the ProSe Function and the HSS.
In the tables that describe the Information Elements transported by each
Diameter command, each Information Element is marked as (M) Mandatory, (C)
Conditional or (O) Optional in the \"Cat.\" column. For the correct handling
of the Information Element according to the category type, see the description
detailed in section 6 of the 3GPP TS 29.228 [9].
## 5.2 ProSe Subscriber Information Retrieval
### 5.2.1 General
This procedure shall be used between the ProSe Function and the HSS for
authorization of the UE for ProSe. The procedure shall be invoked by the ProSe
Function and is used:
\- to request ProSe related subscription data.
This procedure is mapped to the commands ProSe-Subscriber-Information-
Request/Answer (PIR/PIA) in the Diameter application specified in clause 6.
Tables 5.2.1-1 and 5.2.1-2 detail the involved information elements.
Table 5.2.1-1: ProSe Subscriber Information Retrieval Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [3]) | | contain the user | | | | | IMSI, formatted | | | | | according to | | | | | 3GPP | | | | | TS 23.003 [7], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+
Table 5.2.1-2: ProSe Subscriber Information Retrieval Answer
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | Result\ | Result-Code / | **M** | This IE shall | | (See 6) | Ex | | contain the | | | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for PC4a errors. | | | | | This is a grouped | | | | | AVP which shall | | | | | contain the 3GPP | | | | | Vendor ID in the | | | | | Vendor-Id AVP, | | | | | and the error | | | | | code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | > \- User Unknown | | | | | > | | | | | > \- Unknown | | | | | > ProSe | | | | | > Subscription | | | | | > | | | | | > \- ProSe Not | | | | | > Allowed | +-------------------+-------------------+-------+-------------------+ | ProSe | ProSe- | C | This information | | Subscription Data | Subscription-Data | | element shall | | | | | contain the ProSe | | (See 6.3.2) | | | Subscription Data | | | | | that gives the | | | | | user permission | | | | | to use ProSe. | +-------------------+-------------------+-------+-------------------+ | MSISDN | MSISDN | C | This information | | | | | element shall | | (See 3GPP TS | | | contain the user | | 29.329 [12]) | | | MSISDN, formatted | | | | | according to 3GPP | | | | | TS 29.329 [12]. | | | | | It shall be | | | | | present if | | | | | available. | +-------------------+-------------------+-------+-------------------+ | Visited PLMN Id | Visited-PLMN-Id | **C** | This IE shall | | | | | contain the MCC | | (See | | | and the MNC of | | 3GPP | | | the PLMN where | | TS 29.272 [10]) | | | the UE is | | | | | registered, see | | | | | 3GPP | | | | | TS 23.003 [7]. | | | | | | | | | | It shall be | | | | | present if the UE | | | | | is roaming in a | | | | | PLMN different | | | | | from the Home | | | | | PLMN. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+ | Reset-IDs | Reset-ID | O | The Reset-ID | | | | | uniquely | | (See | | | identifies a | | 3GPP | | | fallible resource | | TS 29.272 [10]) | | | in the HSS\'s | | | | | realm on which | | | | | the user (IMSI) | | | | | depends. In the | | | | | event of a | | | | | restart of the | | | | | fallible resource | | | | | a Reset message | | | | | containing the | | | | | Reset-ID will | | | | | exactly identify | | | | | the impacted | | | | | subscribers. | +-------------------+-------------------+-------+-------------------+
### 5.2.2 Detailed Behaviour of the ProSe Function
The ProSe Function shall make use of this procedure to request ProSe related
subscription data.
If the ProSe Function retrieved the ProSe related subscription data, the ProSe
Function shall perform the authorisation for ProSe as described in the 3GPP TS
23.303 [2].
### 5.2.3 Detailed Behaviour of the HSS
When receiving a ProSe Subscriber Information Retrieval Request the HSS shall
check if the IMSI for whom data is requested exists in the HSS. If not, an
Experimental-Result of DIAMETER_ERROR_USER_UNKNOWN shall be returned.
If the IMSI exists but there is not any ProSe subscription data for the IMSI,
the HSS shall return an Experimental-Result of
DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION.
If the UE is not allowed to use ProSe in the visited PLMN, the HSS shall
return an Experimental-Result of DIAMETER_ERROR_PROSE_NOT_ALLOWED. Otherwise,
the HSS shall return a Result-Code of DIAMETER_SUCCESS and shall store ProSe
Function identity (the ProSe Function identity is received within the Origin-
Host AVP) and download the ProSe subscription data to the ProSe Function. The
HSS shall provide the Visited PLMN ID of where the UE is registered if the UE
is roaming in a PLMN different from the Home PLMN.
## 5.3 Update ProSe Subscriber Data
### 5.3.1 General
The Update ProSe Subscriber Data procedure shall be used between the ProSe
Function and the HSS to update the subscriber related data downloaded by means
of the ProSe Subscriber Information Retrieval operation (see clause 5.2) and
stored in the ProSe Function.
It shall be used to update subscriber related data in the ProSe Function due
to administrative changes of the user data in the HSS, i.e. if the user was
given a subscription and the subscription has changed. It shall be used at
least to perform the following:
\- update of all of ProSe subscription data of the subscriber,
\- update of a subset of the ProSe subscription data of the subscriber,
\- deletion of the ProSe subscription data of the subscriber.
The procedure will also be triggered when the VPLMN has changed.
This procedure is mapped to the commands Update-ProSe-Subscriber-Data-
Request/Answer (UPR/UPA) in the Diameter application specified in clause 6.
Table 5.3.1-1 specifies the involved information elements for the request.
Table 5.3.1-2 specifies the involved information elements for the answer.
Table 5.3.1-1: Update ProSe Subscriber Data Request
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [3]) | | contain the user | | | | | IMSI, formatted | | | | | according to | | | | | 3GPP | | | | | TS 23.003 [7], | | | | | clause 2.2. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+ | ProSe | ProSe- | C | This information | | Subscription Data | Subscription-Data | | element shall | | | | | contain the ProSe | | (See 6.3.2) | | | Subscription Data | | | | | that gives the | | | | | user permission | | | | | to use ProSe. | +-------------------+-------------------+-------+-------------------+ | Visited PLMN Id | Visited-PLMN-Id | **C** | This IE shall | | | | | contain the MCC | | (See | | | and the MNC of | | 3GPP | | | the PLMN where | | TS 29.272 [10]) | | | the UE is | | | | | registered, see | | | | | 3GPP | | | | | TS 23.003 [7]. | | | | | | | | | | It shall be | | | | | present if the UE | | | | | is roaming in a | | | | | PLMN different | | | | | from the Home | | | | | PLMN. | +-------------------+-------------------+-------+-------------------+ | UPR Flags | UPR-Flags | M | This Information | | | | | Element shall | | | | | contain a bit | | | | | mask. See clause | | | | | 6.3.6 for the | | | | | meaning of the | | | | | bits. | +-------------------+-------------------+-------+-------------------+ | Reset-IDs | Reset-ID | O | The Reset-ID | | | | | uniquely | | (See | | | identifies a | | 3GPP | | | fallible resource | | TS 29.272 [10]) | | | in the HSS\'s | | | | | realm on which | | | | | the user (IMSI) | | | | | depends. In the | | | | | event of a | | | | | restart of the | | | | | fallible resource | | | | | a Reset message | | | | | containing the | | | | | Reset-ID will | | | | | exactly identify | | | | | the impacted | | | | | subscribers. | +-------------------+-------------------+-------+-------------------+
Table 5.3.1-2: Update ProSe Subscriber Data Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 6.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for PC4a errors. | | | | | This is a grouped | | | | | AVP which shall | | | | | contain the 3GPP | | | | | Vendor ID in the | | | | | Vendor-Id AVP, | | | | | and the error | | | | | code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | > \- User Unknown | | | | | > | | | | | > \- Unknown | | | | | > ProSe | | | | | > Subscription | +-------------------+-------------------+------+-------------------+
### 5.3.2 Detailed behaviour of the ProSe Function
When receiving a Update ProSe Subscriber Data request, the ProSe Function
shall check whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known, the ProSe Function shall update the corresponding data
according to the indication as sent in the request, and acknowledge the Update
ProSe Subscriber Data message by returning an Update ProSe Subscriber Data
Answer. If the UPR-Flags indicates that the ProSe subscription data is to be
deleted, the ProSe Function shall delete the associated ProSe UE context if it
has been stored before.
If the update of the subscription data succeeds in the ProSe Function, the
Result-Code shall be set to DIAMETER_SUCCESS.
If the ProSe Function cannot fulfil the received request for other reasons,
e.g. due to a database error, it shall set the Result-Code to
DIAMETER_UNABLE_TO_COMPLY. In this case, the ProSe Function shall mark the
subscription record \"Subscriber data to be restored in the HSS\".
### 5.3.3 Detailed behaviour of the HSS
The HSS shall make use of this procedure to update the relevant subscriber
related data in the the ProSe Function to replace a specific part of the user
data stored in the ProSe Function with the data sent.
If the ProSe related subscription data is updated or revoked, the HSS sends
the updated ProSe subscription data to the ProSe Function. The HSS shall
include the UPR-Flags to indicate which part of the data is updated. If all of
the ProSe subscription data is to be removed, the HSS shall set the \"Removal
of all ProSe Subscription Data\" bit of the UPR-Flags, and the HSS shall
delete the ProSe Function Identity if it is stored for this subscriber.
## 5.4 Notification Procedure
### 5.4.1 General
This procedure shall be used between the ProSe Function and the HSS when the
HSS needs to be notified about:
\- revocation of authorization for ProSe direct service on one PLMN.
\- removal of the subscription data from the ProSe Function either by an MMI
interaction or automatically.
This procedure is mapped to the commands ProSe-Notify-Request/Answer (PNR/PNA)
in the Diameter application specified in clause 6. Tables 5.4.1-1 and 5.4.1-2
detail the involved information elements.
Table 5.4.1-1: ProSe Notify Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | C | This information | | | IET | | element shall | | | F RFC 3588 [3]) | | contain the user | | | | | IMSI, formatted | | | | | according to | | | | | 3GPP | | | | | TS 23.003 [7], | | | | | clause 2.2. | | | | | | | | | | It shall be | | | | | present if the | | | | | revocation is for | | | | | a specific UE. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | PLMN ID (see | Visited-PLMN-Id | C | This information | | 3GPP | | | element shall | | TS 29.272 [10]) | | | contain the MCC | | | | | and the MNC of | | | | | the PLMN where | | | | | the UE's | | | | | authorization for | | | | | ProSe direct | | | | | service is | | | | | revoked, see | | | | | 3GPP | | | | | TS 23.003 [7]. | | | | | | | | | | It shall be | | | | | present if the | | | | | ProSe Function | | | | | revokes the | | | | | authorization for | | | | | ProSe direct | | | | | service in a | | | | | specific PLMN. | +-------------------+-------------------+------+-------------------+ | PNR Flags (see | PNR-Flags | C | This Information | | 6.3.7) | | | Element shall | | | | | contain a bit | | | | | mask. See 6.3.7 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+
Table 5.4.1-2: ProSe Notify Answer
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | Result\ | Result-Code / | **M** | This IE shall | | (See 6) | Ex | | contain the | | | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for PC4a errors. | | | | | This is a grouped | | | | | AVP which shall | | | | | contain the 3GPP | | | | | Vendor ID in the | | | | | Vendor-Id AVP, | | | | | and the error | | | | | code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | > \- User Unknown | | | | | > | | | | | > \- Unknown | | | | | > ProSe | | | | | > Subscription | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+
### 5.4.2 Detailed Behaviour of the ProSe Function
The ProSe Function shall make use of this procedure to revoke authorization
for ProSe direct service.
The ProSe Function shall make use of this procedure to inform the HSS when the
subscription data is deleted from the ProSe Function database due to MMI
interaction or automatically.
The ProSe Function shall send the updated ProSe Permission and the PLMN ID for
which the ProSe Permission is to be updated. If the revocation is for a single
UE in the indicated PLMN, the ProSe Function shall include IMSI in the
request.
### 5.4.3 Detailed Behaviour of the HSS
When receiving a ProSe Notify Request the HSS shall check if the IMSI, if
present in the message, exists in the HSS. If not, an Experimental-Result of
DIAMETER_ERROR_USER_UNKNOWN shall be returned.
If the IMSI exists but there is not any ProSe subscription data for the IMSI
and the PLMN ID as indicated by the Visited-PLMN-Id AVP in the request, the
HSS shall return an Experimental-Result of
DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION.
If the PNR-Flags indicates revocation of authorization for ProSe direct
service, and
\- if the IMSI exists and there is ProSe subscription data for the IMSI and
the PLMN ID as indicated by the Visited-PLMN-Id AVP in the request, the HSS
shall revoke ProSe direct service as indicated by the PNR Flags received in
the request on that PLMN for the user and update the ProSe Subscription data
accordingly. The HSS shall set the result code to DIAMETER_SUCCESS.
\- if IMSI is not present in the message, the HSS shall check if there are any
users subscribed to ProSe subscription for the PLMN as indicated by the
Visited-PLMN-Id AVP in the request, and if yes, revoke ProSe direct service as
indicated by the PNR Flags received in the request on that PLMN for all the
impacted users and update their ProSe Subscription data accordingly. The HSS
shall set the result code to DIAMETER_SUCCESS.
If the PNR Flags indicates the subscription data is deleted from the ProSe
Function, the HSS shall remove the ProSe Function Identity for the subscriber
and set the result code to DIAMETER_SUCCESS.
For any other reasons if the HSS cannot fulfil the received request, e.g. due
to a database error, it shall set the result code to
DIAMETER_UNABLE_TO_COMPLY.
## 5.5 Reset
### 5.5.1 General
The Reset Procedure shall be used by the HSS, after a restart, to indicate to
the ProSe Function that a failure has occurred.
The Reset Procedure may also be used by the HSS as part of operation and
maintenance actions e.g. to allow planned HSS outage without service
interruption.
This procedure is mapped to the commands Reset-Request/Answer (RSR/RSA) in the
Diameter application specified in clause 6.
Table 5.5.1-1 specifies the involved information elements for the request.
Table 5.5.1-2 specifies the involved information elements for the answer.
Table 5.5.1-1: Reset Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | User Id List | User-Id | O | This IE shall | | | | | contain a list of | | (See | | | ProSe User-Ids | | 3GPP | | | where a ProSe | | TS 29.272 [10]) | | | User-Id comprises | | | | | the leading | | | | | digits of an IMSI | | | | | (i.e. MCC, MNC, | | | | | leading digits of | | | | | MSIN) and it | | | | | shall identify | | | | | the set of | | | | | subscribers whose | | | | | IMSIs begin with | | | | | the User-Id. The | | | | | HSS may include | | | | | this information | | | | | element if the | | | | | occurred failure | | | | | is limited to | | | | | subscribers | | | | | identified by one | | | | | or more User-Ids. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Reset-IDs | Reset-ID | O | If present, this | | | | | information | | (See | | | element | | 3GPP | | | identifies | | TS 29.272 [10]) | | | together with the | | | | | HSS\'s realm the | | | | | set of impacted | | | | | subscribers. | +-------------------+-------------------+------+-------------------+
Table 5.5.1-2: Reset Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 6.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for PC4a errors. | | | | | This is a grouped | | | | | AVP which shall | | | | | contain the 3GPP | | | | | Vendor ID in the | | | | | Vendor-Id AVP, | | | | | and the error | | | | | code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | There are no | | | | | Ex | | | | | perimental-Result | | | | | codes applicable | | | | | for this command. | +-------------------+-------------------+------+-------------------+
### 5.5.2 Detailed behaviour of the ProSe Function
When receiving a Reset message the ProSe Function shall mark all impacted
subscriber records \"Subscriber DataConfirmed in HSS\" as \"Not Confirmed\",
as defined in 3GPP TS 23.007 [11]. If the Reset-IDs IE is supported and
received, the ProSe Function shall make use of the Reset-IDs (together with
the HSS\'s realm) in order to determine which subscriber records are impacted
(i.e. check whether at least one received Reset-ID is associated with the
subscriber, and the HSS\'s realm identity received in the Origin-Realm AVP
matches the value stored after successful ProSe-Subscriber-Information
retrieval); otherwise the ProSe Function shall make use of the HSS Identity
received in the Origin-Host AVP (by comparing it with the value stored after
successful ProSe-Subscriber-Information retrieval) and may make use of the
received User-Id-List (if any) in order to determine which subscriber records
are impacted.
### 5.5.3 Detailed behaviour of the HSS
The HSS shall make use of this procedure in order to indicate to all relevant
ProSe Functions that the HSS has restarted and may have lost the current ProSe
Function Identity of some of its subscribers who may be currently roaming in
the ProSe Function Area and that the HSS, therefore, cannot send an Update
ProSe Subscriber Data messages when needed.
If the Reset-ID feature is not supported by the ProSe Function and the HSS,
the HSS may include a list of User Ids identifying a subset of subscribers
served by the HSS, if the occurred failure is limited to those subscribers.
If the Reset-ID feature is supported by the ProSe Function, the HSS optionally
may include one (or several) Reset-ID AVPs identifying e.g. failed hardware
components if the occured failure is limited to those subscribers associated
with e.g. the identified failed hardware components.
## 5.6 Initial Location Information Retrieval
### 5.6.1 General
This procedure shall be used between the ProSe Function and the HSS for
retrieving the initial location information of the UE for EPC-levelProSe
discovery. The procedure shall be invoked by the ProSe Function and is used:
\- to request the initial location information of the UE.
This procedure is mapped to the commands ProSe-Initial-Location-Information-
Request/Answer (PLR/PLA) in the Diameter application specified in clause 6.
Table 5.4.1/1 specifies the involved information elements for the request.
Table 5.4.1/2 specifies the involved information elements for the answer.
Table 5.6.1/1: ProSe Initial Location Information Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IET | | element shall | | | F RFC 3588 [3]) | | contain the user | | | | | IMSI, formatted | | | | | according to | | | | | 3GPP | | | | | TS 23.003 [7], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+
Table 5.6.1/2: ProSe Initial Location Information Answer
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | Element Name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | Result\ | Result-Code / | **M** | This IE shall | | (See 6) | Ex | | contain the | | | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for PC4a errors. | | | | | This is a grouped | | | | | AVP which shall | | | | | contain the 3GPP | | | | | Vendor ID in the | | | | | Vendor-Id AVP, | | | | | and the error | | | | | code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | > \- User Unknown | | | | | > | | | | | > \- UE Location | | | | | > Unknown | +-------------------+-------------------+-------+-------------------+ | ProSe Initial | ProSe-Initial-Loc | C | This information | | Location | ation-Information | | element shall | | Information | | | contain the | | | | | location | | (See 6.3.9) | | | information of | | | | | the UE. | +-------------------+-------------------+-------+-------------------+ | Visited PLMN Id | Visited-PLMN-Id | C | This IE shall | | | | | contain the MCC | | (See | | | and the MNC of | | 3GPP | | | the PLMN where | | TS 29.272 [10]) | | | the UE is | | | | | registered, see | | | | | 3GPP | | | | | TS 23.003 [7]. | | | | | | | | | | It shall be | | | | | present if the UE | | | | | is roaming in a | | | | | PLMN different | | | | | from the Home | | | | | PLMN. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See | | | contain the list | | 3GPP | | | of features | | TS 29.229 [6]) | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+
### 5.6.2 Detailed Behaviour of the ProSe Function
To request the initial location information of the targeted UE, the ProSe
Function shall include the corresponding IMSI in the user profile of the
targeted user in ProSe Initial Location Information Request.
NOTE: The user profile for the targeted user is stored in the ProSe Function
according to clause 7.2.2.3 of 3GPP TS 24.334 [16].
### 5.6.3 Detailed Behaviour of the HSS
When receiving a ProSe Initial Location Information Request the HSS shall
check whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known and the MME is not the serving node currently registered in HSS
for the UE, the HSS shall return an Experimental-Result of
DIAMETER_ERROR_UE_LOCATION_UNKNOWN. If it is known and the MME is the serving
node currently registered in HSS for the UE, the HSS shall return a Result-
Code of DIAMETER_SUCCESS and provide the location information of the UE to the
ProSe Function. The HSS shall provide the Visited PLMN ID of where the UE is
registered if the UE is roaming in a PLMN different from the Home PLMN.
NOTE: When requesting the UE location via S6a, the HSS does not set the
\"Current Location Request\" bit in the IDR-Flags in the Insert Subscriber
Data Request message.
# 6 Protocol Specification and Implementations
## 6.1 Introduction
### 6.1.1 Use of Diameter Base Protocol
The Diameter Base Protocol as specified in IETF RFC 3588 [3] shall apply
except as modified by the defined support of the methods and the defined
support of the commands and AVPs, result and error codes as specified in this
specification. Unless otherwise specified, the procedures (including error
handling and unrecognised information handling) shall be used unmodified.
### 6.1.2 Securing Diameter Messages
For secure transport of Diameter messages, see 3GPP TS 33.210 [4]
### 6.1.3 Accounting Functionality
Accounting functionality (Accounting Session State Machine, related command
codes and AVPs) shall not be used on the PC4a interface.
### 6.1.4 Use of Sessions
Between the ProSe Function and the HSS, Diameter sessions shall be implicitly
terminated. An implicitly terminated session is one for which the server does
not maintain state information. The client shall not send any re-authorization
or session termination requests to the server.
The Diameter base protocol includes the Auth-Session-State AVP as the
mechanism for the implementation of implicitly terminated sessions.
The client (server) shall include in its requests (responses) the Auth-
Session-State AVP set to the value NO_STATE_MAINTAINED (1), as described in
IETF RFC 3588 [3]. As a consequence, the server shall not maintain any state
information about this session and the client shall not send any session
termination request. Neither the Authorization-Lifetime AVP nor the Session-
Timeout AVP shall be present in requests or responses.
### 6.1.5 Transport Protocol
Diameter messages over the PC4a interface shall make use of SCTP, see IETF RFC
4960 [5].
### 6.1.6 Routing Considerations
This clause specifies the use of the Diameter routing AVPs Destination-Realm
and Destination-Host.
The PC4a reference point is defined as an intra-operator interface, and both
the ProSe Function and the HSS are located in the home PLMN of the UE that
requests ProSe. If the ProSe Function knows the address/name of the HSS for a
certain user, both the Destination-Realm and Destination-Host AVPs shall be
present in the request. Otherwise, the Destination-Realm AVP shall be present
and the command shall be routed to the next Diameter node. Consequently, the
Destination-Host AVP is declared as optional in the ABNF for all requests
initiated by the ProSe Function.
The HSS obtains the Destination-Host AVP to use in requests towards the ProSe
Function, from the Origin-Host AVP received in previous requests from the
ProSe Function. Consequently, the Destination-Host AVP is declared as
mandatory in the ABNF for all requests initiated by the HSS.
If the Vendor-Specific-Application-ID AVP is received in any of the commands,
it may be ignored by the receiving node, and it shall not be used for routing
purposes.
NOTE: The Vendor-Specific-Application-ID can be included as an optional AVP in
all commands in order to ensure interoperability with diameter agents
following a strict implementation of IETF RFC 3588 [3], by which messages not
including this AVP will be rejected. IETF RFC 3588 [3] indicates that the AVP
shall be present in all proxiable commands, such as those defined in this
specification, despite the fact that the contents of this AVP are redundant
since the Application ID is already present in the command header. This AVP
may be removed in subsequent revisions of this specification, once the
diameter base protocol is updated accordingly.
### 6.1.7 Advertising Application Support
The ProSe Function and the HSS shall advertise support of the Diameter PC4a
Application by including the value of the application identifier in the Auth-
Application-Id AVP within the Vendor-Specific-Application-Id grouped AVP of
the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands.
The vendor identifier value of 3GPP (10415) shall be included in the
Supported-Vendor-Id AVP of the Capabilities-Exchange-Request and Capabilities-
Exchange-Answer commands, and in the Vendor-Id AVP within the Vendor-Specific-
Application-Id grouped AVP of the Capabilities-Exchange-Request and
Capabilities-Exchange-Answer commands.
The Vendor-Id AVP included in Capabilities-Exchange-Request and Capabilities-
Exchange-Answer commands that is not included in the Vendor-Specific-
Application-Id AVPs as described above shall indicate the manufacturer of the
Diameter node as per IETF RFC 3588 [3].
### 6.1.8 Diameter Application Identifier
The PC4a interface protocol shall be defined as an IETF vendor specific
Diameter application, where the vendor is 3GPP. The vendor identifier assigned
by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.
The Diameter application identifier assigned to the PC4a interface application
is 16777336 (allocated by IANA).
### 6.1.9 Use of the Supported-Features AVP
When new functionality is introduced on the PC4a interface, it should be
defined as optional. If backwards incompatible changes cannot be avoided, the
new functionality shall be introduced as a new feature and support advertised
with the Supported-Features AVP. The usage of the Supported-Features AVP on
the PC4a interface is consistent with the procedures for the dynamic discovery
of supported features as defined in clause 7.2 of 3GPP TS 29.229 [6].
When extending the application by adding new AVPs for a feature, the new AVPs
shall have the M bit cleared and the AVP shall not be defined mandatory in the
command ABNF.
As defined in 3GPP TS 29.229 [6], the Supported-Features AVP is of type
grouped and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On
the all reference points as specified in this specification, the Supported-
Features AVP is used to identify features that have been defined by 3GPP and
hence, for features defined in this document, the Vendor-Id AVP shall contain
the vendor ID of 3GPP (10415). If there are multiple feature lists defined for
the reference point, the Feature-List-ID AVP shall differentiate those lists
from one another.
## 6.2 Commands
### 6.2.1 Introduction
This section defines the Command code values and related ABNF for each command
described in this specification.
### 6.2.2 Command-Code Values
This section defines Command-Code values for the PC4a interface application as
allocated by IANA.
Every command is defined by means of the ABNF syntax IETF RFC 5234 [8],
according to the rules in IETF RFC 3588 [3]. In the case, the definition and
use of an AVP is not specified in this document, the guidelines in IETF RFC
3588 [3] shall apply.
The following Command Codes are defined in this specification:
Table 6.2.2-1: Command-Code values for PC4a
* * *
Command-Name Abbreviation Code Section ProSe-Subscriber-Information-Request
PIR 8388664 6.2.3 ProSe-Subscriber-Information-Answer PIA 8388664 6.2.4
Update-ProSe-Subscriber-Data-Request UPR 8388665 6.2.5 Update-ProSe-
Subscriber-Data-Answer UPA 8388665 6.2.6 ProSe-Notify-Request PNR 8388666
6.2.7 ProSe-Notify-Answer PNA 8388666 6.2.8 Reset-Request RSR 322 6.2.9 Reset-
Answer RSA 322 6.2.10 ProSe-Initial-Location-Information-Request PSR 8388713
6.2.11 ProSe-Initial-Location-Information-Answer PSA 8388713 6.2.12
* * *
For these commands, the Application-ID field shall be set to 16777336
(application identifier of the PC4a interface application, allocated by IANA).
### 6.2.3 ProSe-Subscriber-Information-Request (PIR) Command
The ProSe-Subscriber-Information-Request (PIR) command, indicated by the
Command-Code field set to 8388664 and the \"R\" bit set in the Command Flags
field, is sent from the ProSe Function to the HSS.
Message Format
> \ ::= \ REQ, PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { **User-Name** }
>
> ***[ Supported-Features ]**
>
> [ OC-Supported-Features ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.4 ProSe-Subscriber-Information-Answer (PIA) Command
The ProSe-Subscriber-Information-Answer (PIA) command, indicated by the
Command-Code field set to 8388664 and the \"R\" bit cleared in the Command
Flags field, is sent from the HSS to the ProSe Function.
Message Format
> \ ::= \ PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ ProSe-Subscription-Data ]
>
> [ MSISDN ]
>
> [ Visited-PLMN-Id ]
>
> ***[ Supported-Features ]**
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> *[ AVP ]
>
> ***[ Reset-ID ]**
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.5 Update-ProSe-Subscriber-Data-Request (UPR) Command
The Update-ProSe Subscriber Data-Request (UPR) command, indicated by the
Command-Code field set to 8388665 and the \'R\' bit set in the Command Flags
field, is sent from the HSS to the ProSe Function.
Message Format when used over the PC4a application:
> \ ::= \ REQ, PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[ Supported-Features ]
>
> [ ProSe Subscription-Data ]
>
> [ Visited-PLMN-Id ]
>
> { UPR-Flags }
>
> ***[ Reset-ID ]**
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.6 Update-ProSe-Subscriber-Data-Answer (UPA) Command
The Update-ProSe Subscriber Data-Answer (UPA) command, indicated by the
Command-Code field set to 8388665 and the \'R\' bit cleared in the Command
Flags field, is sent from the ProSe Function to the HSS.
Message Format when used over the PC4a application:
> \ ::= \ PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.7 ProSe-Notify-Request (PNR) Command
The ProSe-Notify-Request (PNR) command, indicated by the Command-Code field
set to 8388666 and the \"R\" bit set in the Command Flags field, is sent from
the ProSe Function to the HSS.
Message Format
> \ ::= \ 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> [ **User-Name** ]
>
> [ ProSe-Permission ]
>
> [ Visited-PLMN-Id ]
>
> [ PNR-Flags ]
>
> ***[ Supported-Features ]**
>
> [ OC-Supported-Features ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.8 ProSe-Notify-Answer (PNA) Command
The ProSe-Notify-Answer (PNA) command, indicated by the Command-Code field set
to 8388666 and the \"R\" bit cleared in the Command Flags field, is sent from
the HSS to the ProSe Function.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> ***[ Supported-Features ]**
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.9 Reset-Request (RSR) Command
The Reset-Request (RSR) command, indicated by the Command-Code field set to
322 and the \'R\' bit set in the Command Flags field, is sent from HSS to the
ProSe Function.
Message Format when used over the PC4a application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> *[ Supported-Features ]
>
> *[ User-Id ]
>
> ***[ Reset-ID ]**
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.10 Reset-Answer (RSA) Command
The Reset-Answer (RSA) command, indicated by the Command-Code field set to 322
and the \'R\' bit cleared in the Command Flags field, is sent from ProSe
Function to HSS.
Message Format when used over the PC4a application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.11 ProSe-Initial-Location-Information-Request (PSR) Command
The ProSe-Initial-Location-Information-Request (PSR) command, indicated by the
Command-Code field set to 8388713 and the \"R\" bit set in the Command Flags
field, is sent from the ProSe Function to the HSS.
Message Format
> \ ::= \ REQ, PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { **User-Name** }
>
> ***[ Supported-Features ]**
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 6.2.12 ProSe-Initial-Location-Information-Answer (PSA) Command
The ProSe-Initial-Location-Information-Answer (PSA) command, indicated by the
Command-Code field set to 8388713 and the \"R\" bit cleared in the Command
Flags field, is sent from the HSS to the ProSe Function.
Message Format
> \ ::= \ PXY, 16777336 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ ProSe-Initial-Location-Information ]
>
> [ Visited-PLMN-Id ]
>
> ***[ Supported-Features ]**
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
## 6.3 AVPs
### 6.3.1 General
The following table specifies the Diameter AVPs defined for the PC4a interface
protocol, their AVP Code values, types, possible flag values and whether or
not the AVP may be encrypted. The Vendor-ID header of all AVPs defined in this
specification shall be set to 3GPP (10415).
Table 6.3.1-1: PC4a specific Diameter AVPs
+-------+-------+-------+-------+------+-----+-------+-------+-------+ | | AVP | | | | | | | | | | Flag | | | | | | | | | | rules | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Attr | AVP | Se | Value | Must | May | S | Must | May | | ibute | Code | ction | Type | | | hould | not | Encr. | | Name | | de | | | | not | | | | | | fined | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Pro | 3701 | 6.3.2 | Gr | M,V | | | | No | | Se-Su | | | ouped | | | | | | | bscri | | | | | | | | | | ption | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | P | 3702 | 6.3.3 | Unsig | M,V | | | | No | | roSe- | | | ned32 | | | | | | | Permi | | | | | | | | | | ssion | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Pro | 3703 | 6.3.4 | Gr | M,V | | | | No | | Se-Al | | | ouped | | | | | | | lowed | | | | | | | | | | -PLMN | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | ProSe | 3704 | 6.3.5 | Unsig | M,V | | | | No | | -Dire | | | ned32 | | | | | | | ct-Al | | | | | | | | | | lowed | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UPR- | 3705 | 6.3.6 | Unsig | M,V | | | | No | | Flags | | | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PNR- | 3706 | 6.3.7 | Unsig | M,V | | | | No | | Flags | | | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | ProS | 3707 | 6.3.9 | Gr | M,V | | | | No | | e-Ini | | | ouped | | | | | | | tial- | | | | | | | | | | Locat | | | | | | | | | | ion-I | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | NOTE | | | | | | | | | | 1: | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | "M\", | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | su | | | | | | | | | | pport | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | is | | | | | | | | | | requ | | | | | | | | | | ired. | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | "V\", | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | the | | | | | | | | | | opt | | | | | | | | | | ional | | | | | | | | | | Vend | | | | | | | | | | or-ID | | | | | | | | | | field | | | | | | | | | | is | | | | | | | | | | pr | | | | | | | | | | esent | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | he | | | | | | | | | | ader. | | | | | | | | | | For | | | | | | | | | | fu | | | | | | | | | | rther | | | | | | | | | | det | | | | | | | | | | ails, | | | | | | | | | | see | | | | | | | | | | IETF | | | | | | | | | | RFC | | | | | | | | | | 3588 | | | | | | | | | | \ | | | | | | | | | | [3]. | | | | | | | | | | | | | | | | | | | | NOTE | | | | | | | | | | 2: If | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | is | | | | | | | | | | set | | | | | | | | | | for | | | | | | | | | | an | | | | | | | | | | AVP | | | | | | | | | | and | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | under | | | | | | | | | | stand | | | | | | | | | | the | | | | | | | | | | AVP, | | | | | | | | | | it | | | | | | | | | | shall | | | | | | | | | | r | | | | | | | | | | eturn | | | | | | | | | | a | | | | | | | | | | rejec | | | | | | | | | | tion. | | | | | | | | | | If | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | is | | | | | | | | | | not | | | | | | | | | | set | | | | | | | | | | for | | | | | | | | | | an | | | | | | | | | | AVP, | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | shall | | | | | | | | | | not | | | | | | | | | | r | | | | | | | | | | eturn | | | | | | | | | | a | | | | | | | | | | rejec | | | | | | | | | | tion, | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | or | | | | | | | | | | not | | | | | | | | | | it | | | | | | | | | | u | | | | | | | | | | nders | | | | | | | | | | tands | | | | | | | | | | the | | | | | | | | | | AVP. | | | | | | | | | | If | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | u | | | | | | | | | | nders | | | | | | | | | | tands | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | but | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | value | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | match | | | | | | | | | | with | | | | | | | | | | the | | | | | | | | | | defin | | | | | | | | | | ition | | | | | | | | | | in | | | | | | | | | | this | | | | | | | | | | t | | | | | | | | | | able, | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | shall | | | | | | | | | | i | | | | | | | | | | gnore | | | | | | | | | | the | | | | | | | | | | M | | | | | | | | | | -bit. | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+
The following table specifies the Diameter AVPs re-used by the PC4a interface
protocol from existing Diameter Applications, including a reference to their
respective specifications and when needed, a short description of their use
within PC4a.
Any other AVPs from existing Diameter Applications, except for the AVPs from
Diameter Base Protocol, do not need to be supported. The AVPs from Diameter
Base Protocol are not included in table 6.3.1-2, but they may be re-used for
the PC4a protocol.
Table 6.3.1-2: PC4a re-used Diameter AVPs
+----------------+----------------+----------------+--------------+ | Attribute Name | Reference | Comments | M-bit | +----------------+----------------+----------------+--------------+ | V | 3GPP TS | | | | isited-PLMN-Id | 29.272 [10] | | | +----------------+----------------+----------------+--------------+ | Supp | 3GPP T | | | | orted-Features | S 29.229 [6] | | | +----------------+----------------+----------------+--------------+ | F | 3GPP T | | | | eature-List-ID | S 29.229 [6] | | | +----------------+----------------+----------------+--------------+ | Feature-List | 3GPP T | | | | | S 29.229 [6] | | | +----------------+----------------+----------------+--------------+ | User-Id | 3GPP TS | See clause | | | | 29.272 [10] | 6.3.8 | | +----------------+----------------+----------------+--------------+ | Reset-ID | 3GPP TS | | | | | 29.272 [10] | | | +----------------+----------------+----------------+--------------+ | MSISDN | 3GPP TS | | | | | 29.329 [12] | | | +----------------+----------------+----------------+--------------+ | MME-Name | 3GPP TS | See clause | | | | 29.173 [14] | 6.3.10 | | +----------------+----------------+----------------+--------------+ | E-UTRAN-Cell-G | 3GPP TS | | | | lobal-Identity | 29.272 [10] | | | +----------------+----------------+----------------+--------------+ | Tracking | 3GPP TS | | | | -Area-Identity | 29.272 [10] | | | +----------------+----------------+----------------+--------------+ | Age-Of-Locati | 3GPP TS | | | | on-Information | 29.272 [10] | | | +----------------+----------------+----------------+--------------+ | 3 | 3GPP TS | See | Must set | | GPP-Charging-C | 29.061 [18] | 3GPP TS | | | haracteristics | | 32.251 [19] | | | | | Annex A and | | | | | 3GPP TS 32.298 | | | | | [20] clause | | | | | 5.1.2.2.7. | | | | | This attribute | | | | | holds the | | | | | ProSe-related | | | | | Charging | | | | | C | | | | | haracteristics | | | | | for a ProSe | | | | | subscriber. | | +----------------+----------------+----------------+--------------+ | OC-Supp | IETF RFC 7683 | See section | Must set | | orted-Features | [15] | 6.3.11 | | +----------------+----------------+----------------+--------------+ | OC-OLR | IETF RFC 7683 | See section | Must set | | | [15] | 6.3.12 | | +----------------+----------------+----------------+--------------+ | DRMP | IETF RFC 7944 | see section | Must not set | | | [21] | 6.3.14 | | +----------------+----------------+----------------+--------------+ | NOTE 1: The | | | | | M-bit settings | | | | | for re-used | | | | | AVPs override | | | | | those of the | | | | | defining | | | | | specifications | | | | | that are | | | | | referenced. | | | | | Values | | | | | include: | | | | | \"Must set\", | | | | | \"Must not | | | | | set\". If the | | | | | M-bit setting | | | | | is blank, then | | | | | the defining | | | | | specification | | | | | applies. | | | | | | | | | | NOTE 2: If the | | | | | M-bit is set | | | | | for an AVP and | | | | | the receiver | | | | | does not | | | | | understand the | | | | | AVP, it shall | | | | | return a | | | | | rejection. If | | | | | the M-bit is | | | | | not set for an | | | | | AVP, the | | | | | receiver shall | | | | | not return a | | | | | rejection, | | | | | whether or not | | | | | it understands | | | | | the AVP. If | | | | | the receiver | | | | | understands | | | | | the AVP but | | | | | the M-bit | | | | | value does not | | | | | match with the | | | | | definition in | | | | | this table, | | | | | the receiver | | | | | shall ignore | | | | | the M-bit. | | | | +----------------+----------------+----------------+--------------+
### 6.3.2 ProSe-Subscription-Data
The ProSe-Subscription-Data AVP is of type Group. It shall contain the ProSe
related subscription data.
AVP format
> ProSe-Subscription-Data ::= \
>
> { ProSe-Permission }
>
> *[ ProSe-Allowed-PLMN ]
>
> [ 3GPP-Charging-Characteristics ]
>
> *[AVP]
### 6.3.3 ProSe-Permission
The ProSe-Permission AVP is of type Unsigned32 and it shall contain a bit mask
that indicates the permissions for ProSe subscribed by the user. The meaning
of the bits shall be as defined in table 6.3.3/1:
Table 6.3.3-1: ProSe-Permission
* * *
Bit Name Description 0 ProSe Direct Discovery This bit, when set, indicates
that the user is allowed to use ProSe Direct Discovery. 1 EPC-level ProSe
Discovery This bit, when set, indicates that the user is allowed to use EPC-
level ProSe Discovery. 2 EPC support WLAN Direct Discovery and Communication
This bit, when set, indicates that the user is allowed to use EPC support WLAN
Direct Discovery and Communication. 3 one-to-many ProSe Direct Communication
This bit, when set, indicates that the user is allowed to use one-to-many
ProSe Direct Communication. 4 one-to-one ProSe Direct Communication This bit,
when set, indicates that the user is allowed to use one-to-one ProSe Direct
Communication. 5 UE-to-Network Relay This bit, when set, indicates that the
user is allowed to act as a UE-to-Network relay. 6 Remote-UE-access This bit,
when set, indicates that the user is allowed to act as a Remote-UE. 7
Restricted ProSe Direct Discovery This bit, when set, indicates that the user
is allowed to use restricted ProSe Direct Discovery. NOTE: Bits not defined in
this table shall be cleared by the HSS and discarded by the receiving ProSe
Function.
* * *
### 6.3.4 ProSe-Allowed-PLMN
The ProSe-Allowed-PLMN AVP is of type Group. It shall contain the PLMN where
the UE is authorised to announce or monitor or both for ProSe Discovery or to
use ProSe direct communication.
AVP format
> ProSe-Allowed-PLMN ::= \
>
> [ Visited-PLMN-Id ]
>
> [ Authorized-Discovery-Range ]
>
> [ ProSe-Direct-Allowed ]
>
> *[AVP]
The Authorized-Discovery-Range Information Element should only be present if
the Visited-PLMN-Id is the PLMN-Id of the HPLMN; otherwise it should be
absent.
### 6.3.5 ProSe-Direct-Allowed
The ProSe-Direct-Allowed AVP is of type Unsigned32 and it shall contain a bit
mask that indicates the services the UE is authorised to use for ProSe Direct
functionalities in a specific PLMN. The meaning of the bits shall be as
defined in table 6.3.5-1:
Table 6.3.5-1: ProSe-Direct-Allowed
* * *
Bit Name Description 0 Announce This bit, when set, indicates that the user is
allowed to announce in the corresponding PLMN for open ProSe Discovery. 1
Monitor This bit, when set, indicates that the user is allowed to monitor in
the corresponding PLMN for open ProSe Discovery. 2 Communication This bit,
when set, indicates that the user is allowed for ProSe direct one to many
communication in the corresponding PLMN. 3 One-to-one Communication This bit,
when set, indicates that the user is allowed to perform one-to-one ProSe
Direct Communication. 4 Discoverer This bit, when set, indicates that the user
is allowed to perform discoverer operation in the corresponding PLMN for ProSe
Discovery Model B. 5 Discoveree This bit, when set, indicates that the user is
allowed to perform discoveree operation in the corresponding PLMN for ProSe
Discovery Model B. 6 Restricted-announce This bit, when set, indicates that
the user is allowed to announce in the corresponding PLMN for restricted ProSe
Discovery. 7 Restricted-monitoring This bit, when set, indicates that the user
is allowed to monitor in the corresponding PLMN for restricted ProSe
Discovery. 8 Application-controlled extension This bit, when set, indicates
that the user is allowed to announce or monitor with application-controlled
extension in the corresponding PLMN for restricted ProSe Discovery 9 On-demand
announcing This bit, when set, indicates that the user is allowed to perform
on-demand announcing in the corresponding PLMN for restricted ProSe Discovery
NOTE: Bits not defined in this table shall be cleared by the HSS and discarded
by the receiving ProSe Function.
* * *
### 6.3.6 UPR-Flags
The UPR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits is defined in table 6.3.6-1:
Table 6.3.6-1: UPR-Flags
* * *
Bit Name Description 0 Update This bit, when set, indicates that the ProSe
subscriber related data are updated. 1 Removal This bit, when set, indicates
that all of the ProSe subscriber related data are removed. 2 Reset-ID Update
This bit, when set, indicates that the complete list on Reset-IDs is updated.
3 Reset-ID Removal This bit, when set, indicates that the complete list on
Reset-IDs is removed. NOTE: Bits not defined in this table shall be cleared by
the sending HSS and discarded by the receiving ProSe Function.
* * *
### 6.3.7 PNR-Flags
The PNR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 6.3.7-1:
Table 6.3.7-1: PNR-Flags
+----------------------+----------------------+----------------------+ | bit | name | Description | +----------------------+----------------------+----------------------+ | 0 | Direct Discovery | This bit, when set, | | | Revoked | shall indicate to | | | | the HSS that the | | | | authorization for | | | | ProSe direct | | | | discovery is to be | | | | revoked on the | | | | indicated PLMN. | +----------------------+----------------------+----------------------+ | 1 | Direct Communication | This bit, when set, | | | Revoked | shall indicate to | | | | the HSS that the | | | | authorization for | | | | ProSe direct | | | | communication is to | | | | be revoked on the | | | | indicated PLMN. | +----------------------+----------------------+----------------------+ | 2 | Purged UE | This bit, when set, | | | | shall indicate to | | | | the HSS that the | | | | subscriber's data | | | | has been deleted | | | | from the ProSe | | | | Function. | +----------------------+----------------------+----------------------+ | NOTE 1: Bits not | | | | defined in this | | | | table shall be | | | | cleared by the | | | | sending ProSe | | | | Function and | | | | discarded by the | | | | receiving HSS. | | | | | | | | NOTE 2: If Purged UE | | | | bit is set, all | | | | other bits in this | | | | table shall be | | | | cleared by the | | | | sending ProSe | | | | Function and | | | | discarded by the | | | | receiving HSS. | | | +----------------------+----------------------+----------------------+
### 6.3.8 Feature-List AVP for the PC4a application
The syntax of this AVP is defined in 3GPP TS 29.229 [6].
For the PC4a application, the meaning of the bits shall be as defined in table
6.3.8/1 for the Feature-List-ID 1.
Table 6.3.8/1: Features of Feature-List-ID 1 used in PC4a
+------------------------+-----------+-----+------------------------+ | Feature bit | Feature | M/O | Description | +------------------------+-----------+-----+------------------------+ | 0 | Reset-IDs | O | Support of Reset-IDs | | | | | | | | | | This feature is | | | | | applicable to the | | | | | PIR/PIA and UPR/UPA | | | | | and RSR/RSA command | | | | | pairs over the PC4a | | | | | interface. | | | | | | | | | | If the ProSe Function | | | | | indicates in the PIR | | | | | command that it does | | | | | not support Reset-IDs, | | | | | the HSS shall not | | | | | include Reset-ID AVPs | | | | | in RSR commands sent | | | | | to that Prose | | | | | Function. | +------------------------+-----------+-----+------------------------+ | Feature bit: The order | | | | | number of the bit | | | | | within the | | | | | **Supported-Features | | | | | AVP, e.g.** | | | | | \"**1** \"**.** | | | | | | | | | | **Feature: A short | | | | | name that can be used | | | | | to refer to the bit | | | | | and to the feature, | | | | | e.g.** | | | | | \"**| | | | | ODB-HPLMN-APN** \"**.** | | | | | | | | | | **M/O: Defines if the | | | | | implementation of the | | | | | feature is mandatory | | | | | (** \"**M** \"**) or | | | | | optional | | | | | (** \"**O** \"**).** | | | | | | | | | | Description: A clear | | | | | textual description of | | | | | the feature. | | | | +------------------------+-----------+-----+------------------------+
Features that are not indicated in the Supported-Features AVPs within a given
application message shall not be used to construct that message.
### 6.3.9 ProSe-Initial-Location-Information
The ProSe-Initial-Location-Information AVP is of type Grouped. This AVP shall
contain the location information of the UE.
AVP format
> ProSe-Initial-Location-Information ::= \
>
> [MME-Name]
>
> [E-UTRAN-Cell-Global-Identity]
>
> [Tracking-Area-Identity]
>
> [Age-Of-Location-Information]
>
> *[AVP]
### 6.3.10 MME-Name
The MME-Name AVP is of type DiameterIdentity. This AVP shall contain the
Diameter identity of the serving MME and is specified in 3GPP TS 29.173 [14]
clause 6.4.4.
### 6.3.11 OC-Supported-Features
The OC-Supported-Features AVP is of type Grouped and it is defined in IETF RFC
7683 [15]. This AVP is used to support Diameter overload control mechanism,
see Annex A for more information.
### 6.3.12 OC-OLR
The OC-OLR AVP is of type Grouped and it is defined in IETF RFC 7683 [15].
This AVP is used to support Diameter overload control mechanism, see Annex A
for more information.
### 6.3.13 Authorized-Discovery-Range
The Authorized-Discovery-Range AVP is of type Unsigned32 and it shall contain
a value that indicates the authorised announcing range (short/medium/long) at
which the UE is allowed to announce in the given PLMN according to the defined
announcing authorisation policy for this UE. Refer to 3GPP TS 24.334 [16] for
the policy handling and to 3GPP TS 24.333 [17] for the possible values of the
range.
### 6.3.14 DRMP
The DRMP AVP is of type Enumerated and it is defined in IETF RFC 7944 [21].
This AVP allows the HSS and the ProSe Function to indicate the relative
priority of Diameter messages over the PC4a interface.
## 6.4 Result-Code AVP and Experimental-Result AVP Values
### 6.4.1 General
This section defines result code values that shall be supported by all
Diameter implementations that conform to this specification.
### 6.4.2 Success
Result codes that fall within the Success category shall be used to inform a
peer that a request has been successfully completed. The Result-Code AVP
values defined in Diameter Base Protocol IETF RFC 3588 [3] shall be applied.
### 6.4.3 Permanent Failures
#### 6.4.3.1 General
Errors that fall within the Permanent Failures category shall be used to
inform the peer that the request has failed, and should not be attempted
again. The Result-Code AVP values defined in Diameter Base Protocol IETF RFC
3588 [3] shall be applied. When one of the result codes defined here is
included in a response, it shall be inside an Experimental-Result AVP and the
Result-Code AVP shall be absent.
#### 6.4.3.2 DIAMETER_ERROR_USER_UNKNOWN (5001)
This result code shall be sent by the HSS to indicate that the user identified
by the IMSI is unknown. This error code is defined in 3GPP TS 29.229 [6].
#### 6.4.3.3 DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION (5610)
This result code shall be sent by the HSS to indicate that no ProSe
subscription is associated with the IMSI.
#### 6.4.3.4 DIAMETER_ERROR_ PROSE_NOT_ALLOWED (5611)
This result code shall be sent by the HSS to indicate that ProSe is not
allowed to be used in the specific PLMN where the UE is registered.
#### 6.4.3.5 DIAMETER_ERROR_ UE_LOCATION_UNKNOWN (5612)
This result code shall be sent by the HSS to indicate that the initial
location of the UE is unknown.
###### ## Annex A (normative): Diameter overload control mechanism
## A.1 General
Diameter overload control mechanism is an optional feature.
IETF RFC 7683 [15] specifies a Diameter overload control mechanism which
includes the definition and the transfer of related AVPs between Diameter
nodes.
It is recommended to make use of IETF RFC 7683 [15] on the PC4a interface
where, when applied, the ProSe Function shall behave as reacting nodes and the
HSS as a reporting node.
## A.2 HSS behaviour
The HSS requests traffic reduction from the ProSe Function when it is in an
overload situation, including OC-OLR AVP in answer commands as described in
IETF RFC 7683 [15].
The HSS identifies that it is in an overload situation by implementation
specific means. For example, the HSS may take into account the traffic over
the PC4a interface or other interfaces, the level of usage of internal
resources (CPU, memory), the access to external resources, etc.
The HSS determines the specific contents of OC-OLR AVP in overload reports and
the HSS decides when to send OC-OLR AVPs by implementation specific means.
## A.3 ProSe Function behaviour
The ProSe Function applies required traffic reduction received in answer
commands to subsequent applicable requests, as per IETF RFC 7683 [15].
The ProSe Function achieves requested traffic reduction by implementation
specific means. For example, the ProSe Funtion may implement message
throttling with prioritization or a message retaining mechanism for operations
that can be postponed.As a result of the need to throttle traffic, the ProSe
Function may reject Registration Request, Discovery Request, Proximity
Requests initiated by UEs. The possible related error messages used over PC3
are described in the 3GPP TS 24.334 [16].
###### ## Annex B (Informative): Diameter overload node behaviour
## B.1 Message prioritization
This clause describes possible behaviours of the ProSe Function regarding
message prioritisation in an informative purpose.
The ProSe Function may take the following into account when making throttling
decisions:
\- Identification of the procedures that can be deferred (e.g. Proximity
Requests), so to avoid to drop non deferrable procedures;
\- Prioritisation of certain types of request (e.g. between ProSe-Subscriber-
Information-Request (PIR) and ProSe-Notify-Request (PNR)) according to the
context of their use, in particular:
\- Higher prioritisation for commands that are related to a registered user
for a service, so to avoid the interruption of the registered service for the
user.
###### ## Annex C (normative):**** Diameter message priority mechanism
## C.1 General
IETF RFC 7944 [21] specifies a Diameter routing message priority mechanism
that allows Diameter nodes to indicate the relative priority of Diameter
messages. With this information, other Diameter nodes may leverage the
relative priority of Diameter messages into routing, resource allocation and
also abatement decisions when overload control is applied.
## C.2 PC4a interface
### C.2.1 General
The Diameter message priority mechanism is an optional feature.
It is recommended to make use of IETF RFC 7944 [21] over the PC4a interface of
an operator network when the overload control defined in Annex A is applied on
this PC4a interface.
### C.2.2 HSS and ProSe Function behaviour
When the HSS or the ProSe Function support the Diameter message priority
mechanism over the PC4a interface, the HSS or the ProSe Function shall comply
with IETF RFC 7944 [21].
The HSS or the ProSe Function sending a request shall determine the required
priority according to its policies. When priority is required, the HSS or the
ProSe Function shall include the DRMP AVP indicating the required priority
level in the request it sends, and shall prioritise the request according to
the required priority level.
When the HSS or the ProSe Function receive the corresponding response, it
shall prioritise the received response according to the priority level
received within the DRMP AVP if present in the response, otherwise according
to the priority level of the corresponding request.
When the HSS or the ProSe Function receives a request, it shall handle the
request according to the received DRMP AVP priority level. For the response,
the HSS or the ProSe Function may modify the priority level received in the
DRMP AVP according to its policies and shall handle the response according to
the required priority level. If the required priority level is different from
the priority level received in the request, the HSS or the ProSe Function
shall include the DRMP AVP in the response.
The HSS and the ProSe Function decisions for a required priority and for the
priority level value are implementation specific.
Diameter requests related to high priority traffic shall contain a DRMP AVP
with a high priority of which the level value is operator dependent.
#