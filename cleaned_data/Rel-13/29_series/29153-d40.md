# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This document defines the protocol for Ns reference point between the Service
Capability Exposure Function (SCEF) and RAN Congestion Awareness Function
(RCAF).
The Ns reference point and related stage 2 procedures are defined in 3GPP TS
23.682 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications \".
[3] IETF RFC 3588: \"Diameter Base Protocol\".
[4] 3GPP TS 29.217: \"**Congestion reporting over Np reference point** \".
[5] IETF RFC 7683: \"Diameter Overload Indication Conveyance\".
[6] 3GPP TS 29.229: \"Cx and Dx interfaces based on Diameter protocol;
Protocol details\".
[7] 3GPP TS 29.336: \"Home Subscriber Server (HSS) diameter interfaces for
interworking with packet data networks and applications Diameter Base
Protocol\".
[8] 3GPP TS 29.154: \"Service Capability Exposure Functionality over Nt
reference point\".
[9] 3GPP TS 29.274: \"3GPP Evolved Packet System. Evolved GPRS Tunnelling
Protocol for EPS (GTPv2)\".
[10] IETF RFC 5719: \"Updated IANA Considerations for Diameter Command Code
Allocations\".
[11] IETF RFC 2234: \"Augmented BNF for syntax specifications\".
[12] 3GPP TS 29.213: \"Policy and charging control signalling flows and
Quality of Service (QoS) parameter mapping\".
[13] IETF RFC 7944: \"Diameter Routing Message Priority\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AS Application Server
DRMP Diameter Routing Message Priority
NCA Network Status Continuous Report Answer
NCR Network Status Continuous Report Request
NSA Network Status Answer
NSR Network Status Request
RCAF RAN Congestion Awareness Function
SCEF Service Capability Exposure Function
SCS Service Capability Server
# 4 Architectural Overview
## 4.0 Overview
The Ns reference point is located between the RCAF and SCEF. The Ns reference
point is used for network status reporting.
The stage 2 level requirements for the Ns reference point are defined in 3GPP
TS 23.682 [2].
Refer to Annex G of 3GPP TS 29.213 [12] for Diameter overload control
procedures over the Ns reference point.
Refer to Annex J of 3GPP TS 29.213 [12] for Diameter message priority
mechanism procedures over the Ns interface.
## 4.1 Reference Model
The Ns reference point is defined between the RCAF and the SCEF to transfer
the network status. The relationship between the two functional entities is
depicted in figure 4.1.1. The complete 3GPP architecture for service
capability exposure is defined in 3GPP TS 23.682 [2].
Figure 4.1.1: Ns reference model
## 4.2 Functional elements
### 4.2.1 RCAF
The RCAF is a functional element which reports network status to the SCEF to
enable the SCEF to take the RAN user plane congestion status into account. The
network status includes the following information;
\- Congestion level or an indication of the \"no congestion\" state;
\- ECGI, or eNB-ID, or SAI for which the congestion level is being provided.
### 4.2.2 SCEF
The SCEF is a functional element which provides a means to securely expose the
services and capabilities provided by 3GPP network interfaces.
Based on the geographical area provided by the SCS/AS and the configuration
data, the SCEF determines from which RCAF(s) to request congestion reporting.
NOTE: The procedures in 3GPP TS 23.682 [2], subclause 5.8, describe the
interaction between the SCEF and SCS/AS and the information elements exchanged
in the relevant steps of each procedure. When the SCEF receives the network
status information from one or more RCAF(s) in both the one-time or continuous
reporting cases, it determines the Network Status Indication (NSI) of the
geographical area based on the Congestion--Level-Value AVP in the Network-
Congestion-Area-Report AVP it receives from the RCAF(s). The NSI value (e.g.
High, Medium, Low, No-Congestion) is determined per Service Provider policies.
## 4.3 Procedures over the Ns reference point
### 4.3.1 Network status reporting procedures
#### 4.3.1.1 General
This clause contains the detailed procedures for:
  * Requesting one-time or continuous network status report ;
  * Continuous reporting of network status;
  * Cancellation of continuous reporting of network status.
#### 4.3.1.2 Request of one-time or continuous reporting of network status
This procedure shall be used by the SCEF to request one-time or continuous
network status report.
This procedure is mapped to Network-Status-Request /Answer commands specified
in subclause 5.6.
After the SCEF authorized a SCS/AS request for notification about the network
status, the SCEF shall assign an SCEF Reference ID and identify the RCAF(s)
responsible for requesting of the network status report. The identity of the
RCAF is found by the SCEF based on the RCAF selection procedure defined in
subclause 4.3.2. If multiple RCAFs have been found, the procedure shall be
invoked multiple times, for each RCAF responsible for the network status
report.
The SCEF shall send a Network-Status-Request (NSR) command to the targeted
RCAF. The NSR shall include the Ns-Request-Type AVP with the value 0 (initial
request), the SCEF reference ID within SCEF-Reference-ID AVP and the location
area in the Network-Area-Info-List AVP, the location area is either a 3GPP
location area (e.g. list of TA/RAs, list of cell(s), list of eNBs etc)
according to operator configuration or a 3GPP location area (e.g. list of
TA/RAs, list of cell(s), list of eNBs etc) as provided by the SCS/AS.\ The
SCEF may also include duration in the Monitoring-Duration AVP and the
threshold value(s) in Congestion-Level-Range AVP if the SCS/AS requested
reporting for specific threshold(s). The duration indicates the time for which
a continuous reporting is requested.\ The SCEF, based on operator policies,
may choose a different threshold value than the one received from the SCS/AS.
The SCEF shall not include the Congestion-Level-Range AVP in the request to
the RCAF if no threshold was requested by the SCS/AS.
NOTE: The SCS/AS can be notified when the SCEF changes the threshold provided
by the SCS/AS.
If the continuous reporting is requested, the SCEF shall include the SCEF Id
in the SCEF-ID AVP in the NSR command.
Upon reception of a Network-Status-Request (NSR) command including the Ns-
Request-Type AVP with the value 0 (initial request), the RCAF shall send the
Network-Status-Answer (NSA) command to the SCEF including the SCEF-Reference-
ID AVP and one or more congestion status(es) within Network-Congestion-Area-
Report AVP(s). If the Monitoring-Duration AVP is present in the NSR, the RCAF
shall store the SCEF Id and the SCEF instruction, and then start to monitor
the location area for a change in the congestion status.
When receiving NSA from the RCAF, the SCEF shall store the report if the
SCS/AS request identified via the SCEF reference ID is valid and active.
#### 4.3.1.3 Continuous reporting of network status
This procedure shall be used by the RCAF to continuously notify the SCEF of
the congestion status list for the location area requested by the SCEF when at
least one of the following conditions applies:
\- a threshold is not provided by the SCEF and the congestion level(s) is
changed;
\- one or more thresholds are provided by the SCEF and the congestion level(s)
is changed which corresponds to the threshold(s) provided.
This procedure is mapped to Network-Status-Continuous-Report-Request/Answer
commands specified in subclause 5.6.
If one or more thresholds was provided to the RCAF by the SCEF, and when the
RCAF detects a change in the congestion level(s) and this congestion level(s)
corresponds to congestion threshold(s) for the location area (e.g. set of
cells or eNodeBs) requested by the SCEF, the RCAF shall send Network-Status-
Continuous-Report-Request (NCR) command to report this to the SCEF.\ The NCR
command shall include SCEF reference ID within the SCEF-Reference-ID AVP and
congestion status within one or more Network-Congestion-Area-Report AVP(s).
If no threshold was provided to the RCAF by the SCEF, see subclause 4.3.1.2,
and when the RCAF detects a change in the congestion level(s) for the location
area (e.g. set of cells or eNodeBs) requested by the SCEF, the RCAF shall
report the change of congestion level value(s) to the SCEF by sending a NCR
command including SCEF reference ID within SCEF-Reference-ID AVP and one or
more congestion level value(s) within Network-Congestion-Area-Report AVP(s).
The RCAF shall include one Network-Congestion-Area-Report AVP per congestion
level value reported.\ Within the Network-Congestion-Area-Report AVP the
congestion level value shall be included in the Congestion-Level-Value AVP and
the affected location area in the Network-Area-Info-List AVP.
The RCAF shall send an NCR command to the destination SCEF by including the
SCEF id within the Destination-Host AVP.
The SCEF shall acknowledge the NCR command by sending Network-Status-
Continuous-Report-Answer (NCA) command.
#### 4.3.1.4 Cancellation of continuous reporting of network status
This procedure shall be used by the SCEF to request the cancellation of the
continuous network status report.
This procedure is mapped to Network-Status-Request (NSR)/Network-Status-Answer
(NSA) commands specified in subclause 5.6.
When the SCEF detects that the duration for ongoing continuous reporting of
network status is over or is requested to terminate ongoing continuous
reporting of network status by the SCS/AS, the SCEF shall identify the RCAF(s)
involved in the continuous reporting represented by the SCEF reference ID and
send a Network-Status-Request (NSR) command to the identified RCAF(s)
including the SCEF reference ID in SCEF-Reference-ID AVP and the Ns-Request-
Type AVP with the value 1 (cancellation request).
Upon reception of a NSR command including the Ns-Request-Type AVP with the
value 1 (cancellation request), the RCAF shall remove the related SCEF
instructions associated with the SCEF reference ID such that the RCAF will no
longer notify the SCEF of the change of the network status and send a Network-
Status-Answer (NSA) command including the corresponding SCEF reference ID in
the SCEF-Reference-ID AVP to acknowledge the cancellation.
### 4.3.2 RCAF selection
To discover the RCAF(s) responsible for reporting of network status, the SCEF
may use the following information:
\- Geographical area provided by SCS/AS;
\- Pre-configured RCAF address for the geographical area the RCAF is
responsible for;
# 5 Ns protocol
## 5.1 Protocol support
The Ns application is defined as a vendor specific Diameter application, where
the vendor is 3GPP and the Application-ID for the Ns Application in the
present release is 16777347. The vendor identifier assigned by IANA to 3GPP
(http://www.iana.org/assignments/enterprise-numbers) is 10415.
NOTE: A route entry can have a different destination based on the application
identification AVP of the message. Therefore, Diameter agents (relay, proxy,
redirection, translation agents) must be configured appropriately to identify
the 3GPP Ns application within the Auth-Application-Id AVP in order to create
suitable routing tables.
With regard to the Diameter protocol defined over the Ns interface, the RCAF
acts as a Diameter server, in the sense that it is the network element that
handles network status reporting requests for a particular location. The SCEF
acts as the Diameter client, in the sense that is the network element
requesting reporting of network status.
## 5.2 Initialization, maintenance and termination of connection and session
The initialization and maintenance of the connection between each SCEF and
RCAF pair is defined by the underlying protocol. Establishment and maintenance
of connections between Diameter nodes is described in IETF RFC 3588 [3].
After establishing the transport connection, the SCEF and the RCAF shall
advertise the support of the Ns specific Application by including the value of
the application identifier in the Auth-Application-Id AVP and the value of the
3GPP (10415) in the Vendor-Id AVP of the Vendor-Specific-Application-Id AVP
contained in the Capabilitiesâ€‘Exchange-Request and Capabilities-Exchange-
Answer commands. The Capabilities-Exchange-Request and Capabilities-Exchange-
Answer commands are specified in the Diameter Base Protocol (IETF RFC 3588
[3]).
The Ns Diameter session shall consist of a single request and answer pair. The
Ns Diameter session is terminated after each request and answer pair
interaction. In order to indicate that the session state is not to be
maintained, the Diameter client and server shall include the Auth-Session-
State AVP with the value set to NO_STATE_MAINTAINED (1), in the request and in
the answer messages (see IETF RFC 3588 [3]).
## 5.3 Ns specific AVPs
### 5.3.1 General
Table 5.3.1.1 describes the Diameter AVPs defined for the Ns reference point,
their AVP Code values, types, possible flag values, whether or not the AVP may
be encrypted and which supported features the AVP is applicable to. The
Vendor-Id header of all AVPs defined in the present document shall be set to
3GPP (10415).
Table 5.3.1.1: Ns specific Diameter AVPs
|  |  |  | **AVP Flag rules (NOTE 1)** |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
**Attribute Name** | **AVP Code** | **Clause defined** | **Value Type (NOTE 2)** | **Must** | **May** | **Should not** | **Must not** | **May Encr.** | **Applicability** **(NOTE 3)**  
Network-Congestion-Area-Report | 4101 | 5.3.2 | Grouped | M,V | P |  |  | Y |   
Ns-Request-Type | 4102 | 5.3.3 | Unsigned32 | M,V | P |  |  | Y |   
NOTE 1: The AVP header bit denoted as 'M', indicates whether support of the AVP is required. The AVP header bit denoted as 'V', indicates whether the optional Vendor-ID field is present in the AVP header. For further details, see IETF RFC 3588 [3]. NOTE 2: The value types are defined in IETF RFC 3588 [3]. NOTE 3: AVPs marked with a supported feature are applicable as described in subclause 5.4.1. |  |  |  |  |  |  |  |  |   
### 5.3.2 Network-Congestion-Area-Report AVP
The Network-Congestion-Area-Report AVP (AVP code 4101) is of type Grouped, and
includes the Network-Area-Info-List AVP and the Congestion-Level-Value-AVP.
AVP Format:
Network-Congestion-Area-Report ::= \
{ Network-Area-Info-List }
[ Congestion-Level-Value ]
*[ AVP ]
### 5.3.3 Ns-Request-Type AVP
The Ns-Request-Type AVP (AVP code 4102) is of type Unsigned32, and contains
the reason for sending a request message.
The following values are defined:
0 (initial request)
An initial request is used to initiate a one time or continuous reporting and
contains information that is relevant to initiation.
1 (cancellation request)
A cancellation request is used to cancel an ongoing continuous reporting.
## 5.4 Ns re-used AVPs
### 5.4.1 General
Table 5.4.1.1 lists the Diameter AVPs re-used by the Ns reference point from
other existing Diameter Applications, reference to their respective
specifications, short description of their usage within the Ns reference point
and which supported features the AVP is applicable to. AVPs from existing
Diameter Applications, except for the AVPs from Diameter base protocol, do not
need to be supported. Unless otherwise stated, re-used AVPs shall maintain
their \'M\', \'P\' and \'V\' flag settings.
Table 5.4.1.1: Ns re-used Diameter AVPs
+----------------+----------------+----------------+--------------+ | Attribute Name | Reference | Description | Applicablity | | | | | | | | | | (NOTE ) | +----------------+----------------+----------------+--------------+ | Congesti | 3GPP T | It indicates | | | on-Level-Range | S 29.217 [4] | the list of | | | | | congestion | | | | | level(s). | | +----------------+----------------+----------------+--------------+ | Congesti | 3GPP T | Indicates the | | | on-Level-Value | S 29.217 [4] | congestion | | | | | level of a | | | | | location. | | +----------------+----------------+----------------+--------------+ | DRMP | IETF R | Allows | | | | FC 7944 [13] | Diameter | | | | | endpoints to | | | | | indicate the | | | | | relative | | | | | priority of | | | | | Diameter | | | | | transactions. | | +----------------+----------------+----------------+--------------+ | Monit | 3GPP T | It shall | | | oring-Duration | S 29.336 [7] | contain the | | | | | number of | | | | | seconds for | | | | | which network | | | | | status | | | | | reporting | | | | | shall be | | | | | performed. | | +----------------+----------------+----------------+--------------+ | Network- | 3GPP T | It contains | | | Area-Info-List | S 29.154 [8] | the network | | | | | area | | | | | information | | | | | which is coded | | | | | as specified | | | | | in | | | | | 3GPP T | | | | | S 29.274 [9] | | | | | in Presence | | | | | Reporting Area | | | | | Action IE, | | | | | starting from | | | | | octet 9. | | +----------------+----------------+----------------+--------------+ | OC-OLR | IETF | Contains the | | | | RFC 7683 [5] | necessary | | | | | information to | | | | | convey an | | | | | overload | | | | | report. | | +----------------+----------------+----------------+--------------+ | OC-Supp | IETF | Defines the | | | orted-Features | RFC 7683 [5] | support for | | | | | the Diameter | | | | | overload | | | | | indication | | | | | conveyence by | | | | | the sending | | | | | node. | | +----------------+----------------+----------------+--------------+ | SCEF-ID | 3GPP T | It shall | | | | S 29.336 [7] | contain the | | | | | identity of | | | | | the SCEF which | | | | | has requested | | | | | the network | | | | | status | | | | | reporting. | | +----------------+----------------+----------------+--------------+ | SCE | 3GPP T | It contains | | | F-Reference-ID | S 29.336 [7] | the identifier | | | | | provided by | | | | | the SCEF. | | +----------------+----------------+----------------+--------------+ | Supp | 3GPP T | If present, | | | orted-Features | S 29.229 [6] | this AVP | | | | | informs the | | | | | destination | | | | | host about the | | | | | features that | | | | | the origin | | | | | host requires | | | | | to | | | | | successfully | | | | | complete this | | | | | command | | | | | exchange. | | +----------------+----------------+----------------+--------------+ | > NOTE: AVPs | | | | | > marked with | | | | | > a supported | | | | | > feature are | | | | | > applicable | | | | | > as described | | | | | > in | | | | | > su | | | | | bclause 5.4.2. | | | | +----------------+----------------+----------------+--------------+
### 5.4.2 Use of the Supported-Features AVP on the Ns reference point
When new functionality is introduced on the Ns reference point, it should be
defined as optional. If backwards incompatible changes cannot be avoided, the
new functionality shall be introduced as a new feature and support advertised
with the Supported-Features AVP. Unless otherwise stated, the use of the
Supported-Features AVP on the Ns reference point shall be compliant to the
usage of the Supported-Features AVP on the Cx reference point and consistent
with the procedures for the dynamic discovery of supported features as defined
in subclause 7.2 of 3GPP TS 29.229 [6].
When extending the application by adding new AVPs for a feature, the new AVPs
shall have the M bit cleared and the AVP shall not be defined mandatory in the
command ABNF.
As defined in 3GPP TS 29.229 [6], the Supported-Features AVP is of type
grouped and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On
the all reference points as specified in this specification, the Supported-
Features AVP is used to identify features that have been defined by 3GPP and
hence, for features defined in this document, the Vendor-Id AVP shall contain
the vendor ID of 3GPP (10415). If there are multiple feature lists defined for
the reference point, the Feature-List-ID AVP shall differentiate those lists
from one another.
The Supported-Features AVP shall be included in every NSR and NSA command if
supported by the RCAF and SCEF respectively.
The Table 5.4.2.1 defines the features applicable to the Ns reference point
for the feature list with a Feature-List-ID of 1.
Table 5.4.2.1: Features of Feature-List-ID 1 used in Ns
+-------------------------------------+---------+-----+-------------+ | Feature bit | Feature | M/O | Description | +-------------------------------------+---------+-----+-------------+ | | | | | +-------------------------------------+---------+-----+-------------+ | **Feature bit:** The order number | | | | | of the bit within the Feature-List | | | | | AVP where the least significant bit | | | | | is assigned number \"0\". | | | | | | | | | | **Feature:** A short name that can | | | | | be used to refer to the bit and to | | | | | the feature, e.g. \"EPS\". | | | | | | | | | | **M/O:** Defines if the | | | | | implementation of the feature is | | | | | mandatory (\"M\") or optional | | | | | (\"O\") in this 3GPP Release. | | | | | | | | | | **Description:** A clear textual | | | | | description of the feature. | | | | +-------------------------------------+---------+-----+-------------+
NOTE: This table is a placeholder for when any supported features are added to
Ns. There are no supported features in this release.
## 5.5 Ns specific Experimental-Result-Code AVP values
### 5.5.1 General
This clause defines result code values that shall be supported by Diameter
implementations that conform to this specification.
### 5.5.2 Success
Result Codes that fall into the Success category are used to inform a peer
that a request has been successfully completed. The Result-Code AVP values
defined in Diameter BASE Protocol IETF RFC 3588 [3] are applied.
### 5.5.3 Permanent Failures
Errors that fall into the Permanent Failures category shall be used to inform
the peer that the request has failed. The Result-Code AVP values defined in
Diameter Base Protocol IETF RFC 3588 [3] are applied.
### 5.5.4 Transient Failures
Errors that fall within the Transient failures category are used to inform a
peer that the request could not be satisfied at the time it was received, but
may be able to satisfy the request in the future.
The Result-Code AVP values defined in Diameter Base Protocol IETF RFC 3588 [3]
are applicable.
## 5.6 Ns messages
### 5.6.1 Command-Code Values
This clause defines the Command-Code values for the Ns interface application
as allocated by IANA from the vendor-specific namespace defined in IETF RFC
5719 [10]. Every command is defined by means of the ABNF syntax in IETF RFC
2234 [11], and according to the rules in IETF RFC 3588 [3].
The following Command Codes are defined in this specification:
Table 5.6.1: Command-Code values for Ns
* * *
Command-Name Abbreviation Code Section Network-Status-Request NSR 8388724
5.6.2 Network-Status-Answer NSA 8388724 5.6.3 Network-Status-Continuous-
Report-Request NCR 8388725 5.6.4 Network- Status-Continuous-Report-Answer NCA
8388725 5.6.5
* * *
### 5.6.2 Network-Status-Request (NSR) command
The NSR command, indicated by the Command-Code field set to 8388724 and the
\'R\' bit set in the Command Flags field, is sent by the SCEF to the RCAF as
part of the one time or continuous network status reporting procedure and as
part of the cancellation of continuous reporting of network status procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Vendor-Specific-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
{ Destination-Realm }
[ Destination-Host ]
[ Origin-State-Id ]
**[ OC-Supported-Features ]**
{ Ns-Request-Type }
[ SCEF-ID ]
[ SCEF-Reference-ID ]
[ Network-Area-Info-List ]
[ Congestion-Level-Range ]
[ Monitoring-Duration ]
*[ Proxy-Info ]
*[ Route-Record ]
*[ Supported-Features ]
*[ AVP ]
### 5.6.3 Network-Status-Answer (NSA) command
The NSA command, indicated by the Command-Code field set to 8388724 and the
\'R\' bit cleared in the Command Flags field, is sent by the RCAF to the SCEF
as part of the one time or continuous network status reporting request
procedure and as part of the cancellation of continuous reporting of network
status procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Vendor-Specific-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
[ Result-Code ]
[ Experimental-Result ]
[ Error-Message ]
[ Error-Reporting-Host ]
*[ Failed-AVP ]
**[ OC-Supported-Features ]**
**[ OC-OLR ]**
[ SCEF-Reference-ID]
[ Origin-State-Id ]
*[ Network-Congestion-Area-Report ]
*[ Redirect-Host ]
[ Redirect-Host-Usage ]
[ Redirect-Max-Cache-Time ]
*[ Proxy-Info ]
*[ Supported-Features ]
*[ AVP ]
### 5.6.4 Network-Status-Continuous-Report-Request (NCR) command
The NCR command, indicated by the Command-Code field set to 8388725 and the
\'R\' bit set in the Command Flags field, is sent by the RCAF to the SCEF as
part of the continuous network status reporting procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Vendor-Specific-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
{ Destination-Realm }
[ Destination-Host ]
[ Origin-State-Id ]
**[ OC-Supported-Features ]**
[ SCEF-Reference-ID]
*[ Network-Congestion-Area-Report]
*[ Proxy-Info ]
*[ Route-Record ]
*[ Supported-Features ]
*[ AVP ]
### 5.6.5 Network-Status-Continuous-Report-Answer (NCA) command
The NCA command, indicated by the Command-Code field set to 8388725 and the
\'R\' bit cleared in the Command Flags field, is sent by the SCEF to the RCAF
as part of the continuous network status reporting procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Vendor-Specific-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
[ Result-Code ]
[ Experimental-Result ]
[ Error-Message ]
[ Error-Reporting-Host ]
*[ Failed-AVP ]
**[ OC-Supported-Features ]**
**[ OC-OLR ]**
*[ Redirect-Host ]
[ Redirect-Host-Usage ]
[ Redirect-Max-Cache-Time ]
*[ Proxy-Info ]
*[ Supported-Features ]
*[ AVP ]
###### ## Annex A (informative): Call Flows over Ns
# A.1 Request of one time or continuous reporting of network status
This signalling flow is used by SCEF to request one time or continuous
reporting of network status.
Figure A.1.1: Request of one time or continuous reporting of network status
1\. After the SCEF authorized a SCS/AS request for notification about the
network status, the SCEF sends a Diameter NSR command to the selected RCAF(s)
including the parameters as defined in subclause 4.3.1.2.
2\. The RCAF sends a NSA command to the SCEF including the parameters as
defined in subclause 4.3.1.2.
# A.2 Continuous reporting of network status
This signalling flow is used by RCAF to continuously notify the SCEF of the
network status.
Figure X.2.1: Continuous reporting of network status
1\. When the congestion level(s) is changed or the congestion level(s) is
changed which corresponds to a threshold(s) provided, the RCAF sends a
Diameter NCR command including the parameters as defined in subclause 4.3.1.3.
2\. The SCEF acknowledges the NCR command by sending a NCA command to the
RCAF.
# A.3 Cancellation of continuous reporting of network status
This signalling flow is used by SCEF to request the cancellation of continuous
reporting of network status.
Figure A.3.1: Cancellation of continuous reporting of network status
1\. When the SCEF detects that the duration for ongoing continuous reporting
of network status is over or is requested to terminate ongoing continuous
reporting of network status by the SCS/AS, the SCEF sends a Diameter NSR
command to the identified RCAF(s) including the parameters as defined in
subclause 4.3.1.4.
2\. The RCAF removes the continuous reporting of network status related
instructions meaning that the RCAF will no longer notify the SCEF of the
change of the network status, and sends a NSA command to the SCEF.
#