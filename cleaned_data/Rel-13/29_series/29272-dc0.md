# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes the Mobility Management Entity (MME) and
Serving GPRS Support Node (SGSN) related diameter-based interfaces towards the
Home Subscriber Server (HSS) or the CSG Subscriber Server (CSS), and the MME
and the SGSN related diameter-based interface towards the Equipment Identity
Register (EIR).
This specification defines the Diameter application for the MME-HSS, S6a
reference point, for the MME-CSS, S7a reference point, for the SGSN-HSS, S6d
reference point, and for the SGSN-CSS, S7d reference point. The interactions
between the HSS/CSS and the MME/SGSN are specified, including the signalling
flows.
This specification defines the Diameter application for the MME-EIR, S13
reference point, and for the SGSN-EIR, S13\' reference point. The interactions
between the MME/SGSN and the EIR are specified, including the signalling
flows.
In this specification, if there is no specific indication, the following
principles apply:
\- \"SGSN\" refers to an SGSN which at least supports the S4 interface and may
support Gn and Gp interfaces.
\- \"S4-SGSN\" refers to an SGSN which supports the S4 interface and does not
support Gn and Gp interfaces.
\- Gn/Gp-SGSN refers to an SGSN which supports the Gn and Gp interfaces and
does not support S4 interface.
\- \"GPRS subscription data\" refers to the parameters in the HLR column in
Table 5.2. in 3GPP TS 23.008 [30].
\- \"EPS subscription data\" refers to the parameters in the HSS column in
Table 5.2A-1 in 3GPP TS 23.008 [30].
The Evolved Packet System stage 2 description (architecture and functional
solutions) is specified in 3GPP TS 23.401 [2] and in 3GPP TS 23.060 [12].
SGSN CAMEL Subscription Data are not supported over S6d interface.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access \".
[3] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[4] IETF RFC 3588: \"Diameter Base Protocol\".
[5] 3GPP TS 33.401: \"3GPP System Architecture Evolution: Security
Architecture\".
[6] IETF RFC 4005: \"Diameter Network Access Server Application\".
[7] IETF RFC 2234: \"Augmented BNF for syntax specifications\".
[8] 3GPP TS 32.299: \"Charging management; Diameter charging applications\".
[9] 3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol\".
[10] 3GPP TS 29.212: \"**Policy and Charging Control (PCC); Reference points**
\".
[11] 3GPP TS 29.214: \"**Policy and Charging Control over Rx reference point**
\".
[12] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[13] 3GPP TS 22.016: \"International Mobile station Equipment Identities
(IMEI)\".
[14] IETF RFC 4960: \"Stream Control Transmission Protocol\".
[15] Void
[16] 3GPP TS 33.210: \"3G Security; Network Domain Security; IP Network Layer
Security\"..
[17] 3GPP TS 29.228: \"IP multimedia (IM) Subsystem Cx and Dx Interfaces;
Signalling flows and Message Elements\".
[18] 3GPP TS 33.102: \"3G Security; Security Architecture\".
[19] 3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); S1 Application Protocol (S1AP)\".
[20] IETF RFC 5778: \"Diameter Mobile IPv6: Support for Home Agent to Diameter
Server Interaction\".
[21] 3GPP TS 29.061: \"Interworking between the Public Land Mobile Network
(PLMN) supporting packet based services and Packet Data Networks (PDN)\".
[22] 3GPP TS 32.298: \"Charging Management; CDR parameter description\".
[23] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace; Trace control and configuration management\".
[24] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[25] 3GPP TS 29.329: \"Sh Interface based on the Diameter protocol\".
[26] IETF RFC 5447: \"Diameter Mobile IPv6: Support for Network Access Server
to Diameter Server Interaction\".
[27] IETF RFC 4004: \"Diameter Mobile IPv4 Application\".
[28] 3GPP2 A.S0022: \"Interoperability Specification (IOS) for Evolved High
Rate Packet Data (eHRPD) Radio Access Network Interfaces and Interworking with
Enhanced Universal Terrestrial Radio Access Network (E-UTRAN)\".
[29] 3GPP TS 23.011: \"Technical realization of Supplementary Services \-
General Aspects\".
[30] 3GPP TS 23.008: \"Organization of subscriber data\".
[31] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[32] IETF RFC 5516: \"Diameter Command Code Registration for Third Generation
Partnership Project (3GPP) Evolved Packet System (EPS)\".
[33] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[34] 3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) centralized services \".
[35] 3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC)\".
[36] 3GPP TS 23.015:\"Technical realization of Operator Determined Barring
(ODB)\".
[37] 3GPP TS 29.173: \"Diameter-based SLh interface for Control Plane LCS\".
[38] 3GPP TS 29.303: \"Domain Name System Procedures; Stage 3\".
[39] 3GPP TS 29.060: \"General Packet Radio Service (GPRS); GPRS Tunnelling
Protocol (GTP) across the Gn and Gp Interface\".
[40] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[41] ITU-T Recommendation E.164: \"The international public telecommunication
numbering plan\".
[42] 3GPP TS 22.042: \"Network Identity and TimeZone (NITZ); Service
description; Stage 1\".
[43] 3GPP TS 23.007: \"Restoration procedures\".
[44] 3GPP TS 23.272: \"Circuit Switched (CS) fallback in Evolved Packet System
(EPS); Stage 2\".
[45] 3GPP TS 29.010: \"Information element mapping between Mobile Station -
Base Station System (MS - BSS) and Base Station System - Mobile-services
Switching Centre (BSS - MSC)\".
> [46] 3GPP TS 29.118: \"Mobility Management Entity (MME) --Visitor Location
> Register (VLR)SGs interface specification \".
[47] 3GPP TS 29.172: \"Evolved Packet Core (EPC) LCS Protocol (ELP) between
the Gateway Mobile Location Centre (GMLC) and the Mobile Management Entity
(MME)\".
> [48] 3GPP TS 29.338: \"Diameter based protocols to support Short Message
> Service (SMS) capable Mobile Management Entities (MMEs)\".
[49] 3GPP TS 29.344: \"Proximity-services (ProSe) Function to Home Subscriber
Server (HSS) aspects; Stage 3\".
[50] IETF RFC 7683: \"Diameter Overload Indication Conveyance\".
[51] 3GPP TS 23.380: \"IMS Restoration Procedures\".
[52] 3GPP TS 22.153: \"Multimedia Priority Service\".
[53] 3GPP TS 23.221: \"Architectural requirements\".
[54] 3GPP TS 29.336: \"Home Subscriber Server (HSS) diameter interfaces for
interworking with packet data networks and applications\".
[55] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications\
with packet data networks and applications \".
[56] 3GPP TS 29.217: \"**Congestion reporting over Np reference point** \".
[57] IETF RFC 7944: \"Diameter Routing Message Priority\".
[58] 3GPP TS 43.020: \"Security related network functions\".
[59] Void
[60] Void
[61] Void
[62] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[63] Void
[64] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\"
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**CSG subscription data from CSS:** It identifies the CSG subscription data
that a MME or a SGSN has received from a CSS for a subscriber identified by
its IMSI.
**CSG subscription data from HSS:** It identifies the CSG subscription data
that a MME or a SGSN has received from a HSS for a subscriber identified by
its IMSI.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AVP Attribute Value Pair
C Conditional
CSS CSG Subscriber Server
DCN Dedicated Core Network
DRMP Diameter Routing Message Priority
EIR Equipment Identity Register
ESM EPS Session Management
HSS Home Subscriber Server
IE Information Element
M Mandatory
MME Mobility Management Entity
> O Optional
ODB Operator Determined Barring
SCEF Service Capability Exposure Function
URRP-MME User Reachability Request Parameter for MME
URPP-SGSN User Reachability Request Parameter for SGSN
# 4 General Description
This document describes the S6a/S6d and S13/S13\' interfaces related
procedures, message parameters and protocol specifications.
The procedures, message parameters and protocol are similar between S6a and
S6d. S6a is used for location changes of the MME, while S6d is for location
changes of the SGSN. Refer to section 5 for the differences, especially
section 5.2.1.
The procedures, message parameters and protocol are identical as for the S13
and S13\'. See section 6 for details.
In the tables that describe the Information Elements transported by each
Diameter command, each Information Element is marked as (M) Mandatory, (C)
Conditional or (O) Optional in the \"Cat.\" column. For the correct handling
of the Information Element according to the category type, see the description
detailed in section 6 of the 3GPP TS 29.228 [17].
# 5 MME -- HSS (S6a) and SGSN -- HSS (S6d)
## 5.1 Introduction
The S6a interface enables the transfer of subscriber related data between the
MME and the HSS as described in the 3GPP TS 23.401 [2].
The S6d interface enables the transfer of subscriber related data between the
SGSN and the HSS as described in 3GPP TS 23.060 [12].
## 5.2 Mobility Services
### 5.2.1 Location Management Procedures
#### 5.2.1.1 Update Location
##### 5.2.1.1.1 General
The Update Location Procedure shall be used between the MME and the HSS and
between the SGSN and the HSS to update location information in the HSS. The
procedure shall be invoked by the MME or SGSN and is used:
\- to inform the HSS about the identity of the MME or SGSN currently serving
the user, and optionally in addition;
\- to update MME or SGSN with user subscription data; subscription data that
are applicable to MMEs but not to SGSNs should not be sent to the SGSN unless
the SGSN is known to be a combined MME/SGSN; similarly subscription data that
are applicable to SGSNs but not to MMEs should not be sent to the MME unless
the MME is known to be a combined MME/SGSN.
\- to provide the HSS with other user data, such as Terminal Information or UE
SRVCC Capability.
This procedure is mapped to the commands Update-Location-Request/Answer
(ULR/ULA) in the Diameter application specified in chapter 7.
Table 5.2.1.1.1/1 specifies the involved information elements for the request.
Table 5.2.1.1.1/2 specifies the involved information elements for the answer.
Table 5.2.1.1.1/1: Update Location Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Terminal | Ter | O | This information | | Information | minal-Information | | element shall | | | | | contain | | (See 7.3.3) | | | information about | | | | | the user's mobile | | | | | equipment. Within | | | | | this Information | | | | | Element, only the | | | | | IMEI and the | | | | | Software-Version | | | | | AVPs shall be | | | | | used on the | | | | | S6a/S6d | | | | | interface. | +-------------------+-------------------+------+-------------------+ | ULR Flags | ULR-Flags | M | This Information | | | | | Element contains | | (See 7.3.7) | | | a bit mask. See | | | | | 7.3.7 for the | | | | | meaning of the | | | | | bits. | +-------------------+-------------------+------+-------------------+ | Visited PLMN Id | Visited-PLMN-Id | M | This IE shall | | | | | contain the MCC | | (See 7.3.9) | | | and the MNC, see | | | | | 3GPP TS | | | | | 23.003[3]. It | | | | | may be used to | | | | | apply roaming | | | | | based features. | +-------------------+-------------------+------+-------------------+ | Equivalent PLMN | Equ | O | This Information | | List | ivalent-PLMN-List | | Element shall | | | | | contain the | | (See 7.3.151) | | | equivalent PLMN | | | | | list of which the | | | | | MME/SGSN requests | | | | | the corresponding | | | | | CSG Subscription | | | | | data. | +-------------------+-------------------+------+-------------------+ | RAT Type | RAT-Type | M | This Information | | | | | Element contains | | (See 7.3.13) | | | the radio access | | | | | type the UE is | | | | | using. See | | | | | section 7.3.13 | | | | | for details. | +-------------------+-------------------+------+-------------------+ | SGSN number | SGSN-Number | C | This Information | | | | | Element contains | | (See 7.3.102) | | | the ISDN number | | | | | of the SGSN, see | | | | | 3GPP TS 23.003 | | | | | [3]. It shall | | | | | be present when | | | | | the message is | | | | | sent on the S6d | | | | | interface and the | | | | | SGSN supports LCS | | | | | (using MAP based | | | | | Lg interface) or | | | | | SMS | | | | | functionalities | | | | | or the Gs | | | | | interface. | | | | | | | | | | It may be present | | | | | when the message | | | | | is sent on the | | | | | S6a interface and | | | | | the requesting | | | | | node is a | | | | | combined | | | | | MME/SGSN. | +-------------------+-------------------+------+-------------------+ | Homogeneous | Homogeneous-Sup | O | This Information | | Support of IMS | port-of-IMS-Voice | | Element, if | | Voice Over PS | -Over-PS-Sessions | | present, | | Sessions | | | indicates whether | | | | | or not \"IMS | | | | | Voice over PS | | | | | Sessions\" is | | | | | supported | | | | | homogeneously in | | | | | all TAs or RAs in | | | | | the serving node | | | | | (MME or SGSN or | | | | | combined | | | | | MME/SGSN). | | | | | | | | | | The value | | | | | \"SUPPORTED\" | | | | | indicates that | | | | | there is support | | | | | for \"IMS Voice | | | | | over PS | | | | | Sessions\" in all | | | | | TAs or RAs. | | | | | | | | | | The value | | | | | \ | | | | | "NOT_SUPPORTED\" | | | | | indicates that | | | | | theres is not | | | | | support for \"IMS | | | | | Voice over PS | | | | | Sessions\" in any | | | | | of the TAs or | | | | | RAs. | +-------------------+-------------------+------+-------------------+ | V-GMLC address | GMLC-Address | C | This Information | | | | | Element shall | | | | | contain, if | | | | | available, the | | | | | IPv4 or IPv6 | | | | | address of the | | | | | V-GMLC associated | | | | | with the serving | | | | | node. | +-------------------+-------------------+------+-------------------+ | Active APN | Active-APN | O | This Information | | | | | Element, if | | | | | present, contains | | | | | the list of | | | | | active APNs | | | | | stored by the MME | | | | | or SGSN, | | | | | including the | | | | | identity of the | | | | | PDN GW assigned | | | | | to each APN. For | | | | | the case of | | | | | explicitly | | | | | subscribed APNs, | | | | | the following | | | | | information shall | | | | | be present: | | | | | | | | | | - | | | | | Co | | | | | ntext-Identifier: | | | | | context id of | | | | | subscribed APN in | | | | | use | | | | | | | | | | - | | | | | S | | | | | ervice-Selection: | | | | | name of | | | | | subscribed APN in | | | | | use | | | | | | | | | | - | | | | | MIP6-Agent-Info: | | | | | including PDN GW | | | | | identity in use | | | | | for subscribed | | | | | APN | | | | | | | | | | - | | | | | Visited-Ne | | | | | twork-Identifier: | | | | | identifies the | | | | | PLMN where the | | | | | PDN GW was | | | | | allocated | | | | | | | | | | For the case of | | | | | the Wildcard APN, | | | | | the following | | | | | information shall | | | | | be present: | | | | | | | | | | - | | | | | Co | | | | | ntext-Identifier: | | | | | context id of the | | | | | Wildcard APN | | | | | | | | | | - | | | | | S | | | | | pecific-APN-Info: | | | | | list of APN-in | | | | | use and related | | | | | PDN GW identity | | | | | when the | | | | | subscribed APN is | | | | | the wildcard APN | | | | | | | | | | It may be present | | | | | when MME or SGSN | | | | | needs to restore | | | | | PDN GW data in | | | | | HSS due to a | | | | | Reset procedure. | +-------------------+-------------------+------+-------------------+ | UE SRVCC | UE | C | This information | | Capability | -SRVCC-Capability | | element shall | | | | | indicate if the | | | | | UE supports or | | | | | does not support | | | | | the SRVCC | | | | | capability and | | | | | shall be present | | | | | if the MME or the | | | | | SGSN supports | | | | | SRVCC and this | | | | | information is | | | | | available to the | | | | | MME or the SGSN. | +-------------------+-------------------+------+-------------------+ | MME Number for MT | MME- | C | This Information | | SMS | Number-for-MT-SMS | | Element contains | | | | | the ISDN number | | | | | of the MME to | | | | | route SMS to the | | | | | UE through the | | | | | MME, see 3GPP TS | | | | | 23.003 [3]. | | | | | | | | | | It shall be | | | | | present when the | | | | | MME supports SMS | | | | | in MME and wishes | | | | | to provide SMS in | | | | | MME. | +-------------------+-------------------+------+-------------------+ | SMS Register | SMS | C | This information | | Request | -Register-Request | | element is used | | | | | to inform the HSS | | | | | if the MME or the | | | | | SGSN needs to be | | | | | registered for | | | | | SMS, prefers not | | | | | to be registered | | | | | for SMS or has no | | | | | preference. It | | | | | shall be present | | | | | when the MME | | | | | supports SMS in | | | | | MME and requests | | | | | to be registered | | | | | for SMS. It shall | | | | | be present when | | | | | the SGSN supports | | | | | \"SMS in SGSN\" | | | | | as defined in | | | | | subclause 5.3.18 | | | | | in 23.060 [12], | | | | | and requests to | | | | | be registered for | | | | | SMS. | +-------------------+-------------------+------+-------------------+ | SGs MME identity | SGs-MME-Identity | O | This information | | | | | element is used | | | | | to inform the HSS | | | | | of the MME | | | | | identity that the | | | | | MME will use over | | | | | the SGs | | | | | interface. This | | | | | information | | | | | element shall be | | | | | present, if the | | | | | MME supports this | | | | | information | | | | | element and if | | | | | the MME identity | | | | | used over SGs is | | | | | different from | | | | | the MME Diameter | | | | | identity used | | | | | over S6a. | +-------------------+-------------------+------+-------------------+ | Coupled node\'s | Coupled | O | This information | | Diameter identity | -Node-Diameter-ID | | element contains | | | | | the Diameter | | | | | identity of the | | | | | coupled node | | | | | (i.e. MME\'s | | | | | Diameter identity | | | | | for the SGSN and | | | | | SGSN\'s Diameter | | | | | identity for the | | | | | MME) when the | | | | | message is sent | | | | | by the combined | | | | | MME/SGSN. | | | | | | | | | | This information | | | | | element may be | | | | | present when the | | | | | message is sent | | | | | on the S6a/S6d | | | | | interface and the | | | | | requesting node | | | | | is a combined | | | | | MME/SGSN. | +-------------------+-------------------+------+-------------------+ | Adjacent PLMNs | Adjacent-PLMNs | O | This information | | | | | element, if | | | | | present, shall | | | | | contain the list | | | | | of PLMNs where an | | | | | UE served by the | | | | | MME/SGSN is | | | | | likely to make a | | | | | handover from the | | | | | PLMN where the | | | | | MME/SGSN is | | | | | located. This | | | | | list is | | | | | statically | | | | | configured by the | | | | | operator in the | | | | | MME/SGSN, | | | | | according to the | | | | | geographical | | | | | disposition of | | | | | the different | | | | | PLMNs in that | | | | | area, the roaming | | | | | agreements, | | | | | etc... | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Services | upported-Services | | Information | | | | | Element shall | | (3GPP TS 29.336 | | | contain AVPs | | [54]) | | | indicating | | | | | details of the | | | | | services | | | | | supported by the | | | | | MME/SGSN. | +-------------------+-------------------+------+-------------------+
Table 5.2.1.1.1/2: Update Location Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | - User Unknown | | | | | | | | | | - Unknown EPS | | | | | Subscription | | | | | | | | | | - RAT Not | | | | | Allowed | | | | | | | | | | - Roaming Not | | | | | Allowed | +-------------------+-------------------+------+-------------------+ | Error-Diagnostic | Error-Diagnostic | O | If the | | | | | Experimental | | | | | Result indicates | | | | | \"Unknown EPS | | | | | Subscription\", | | | | | Error Diagnostic | | | | | may be present to | | | | | indicate whether | | | | | or not GPRS | | | | | subscription data | | | | | are subscribed | | | | | (i.e. whether or | | | | | not Network | | | | | Access Mode | | | | | stored in the HSS | | | | | indicates that | | | | | only circuit | | | | | service is | | | | | allowed). | | | | | | | | | | If the | | | | | Experimental | | | | | Result indicates | | | | | \"Roaming Not | | | | | Allowed\", and | | | | | the Update | | | | | Location is | | | | | rejected due to | | | | | ODB, Error | | | | | Diagnostic may be | | | | | present to | | | | | indicate the | | | | | specific type of | | | | | ODB. | +-------------------+-------------------+------+-------------------+ | ULA-Flags | ULA-Flags | C | This Information | | | | | Element contains | | (See 7.3.8) | | | a bit mask. See | | | | | 7.3.8 for the | | | | | meaning of the | | | | | bits. It shall be | | | | | present only when | | | | | the Result-Code | | | | | AVP is | | | | | D | | | | | IAMETER_SUCCESS. | +-------------------+-------------------+------+-------------------+ | Subscription Data | Subscription-Data | C | This Information | | | | | Element shall | | (See 7.3.2) | | | contain the | | | | | complete | | | | | subscription | | | | | profile of the | | | | | user. It shall be | | | | | present if | | | | | success is | | | | | reported, unless | | | | | an explicit | | | | | \"skip subscriber | | | | | data\" indication | | | | | was present in | | | | | the request. | +-------------------+-------------------+------+-------------------+ | Reset-IDs | Reset-ID | O | The Reset-ID | | | | | uniquely | | (See 7.3.184) | | | identifies a | | | | | fallible resource | | | | | in the HSS on | | | | | which the user | | | | | (IMSI) depends. | | | | | In the event of a | | | | | restart of the | | | | | fallible resource | | | | | a Reset message | | | | | containing the | | | | | Reset-ID will | | | | | exactly identify | | | | | the impacted | | | | | subscribers. | +-------------------+-------------------+------+-------------------+
##### 5.2.1.1.2 Detailed behaviour of the MME and the SGSN
The MME shall make use of this procedure to update the MME identity stored in
the HSS (e.g. at initial attach, inter MME tracking area update or radio
contact after HSS reset).
The SGSN shall make use of this procedure to update the SGSN identity stored
in the HSS (e.g. at initial attach, inter SGSN routing area update or radio
contact after HSS reset).
The MME shall make use of this procedure to request SMS data and to become
registered for SMS.
The SGSN shall make use of this procedure to request to become registered for
SMS.
A combined MME/SGSN which uses different Diameter Identities for the MME and
SGSN parts shall not send a second ULR when in a first ULA the ULA-Flag
\"Separation Indication\" was not set.
For UEs receiving emergency services, in which the UE was not successfully
authenticated, the MME or SGSN shall not make use of the Update Location
procedure.
If the Update Location request is to be sent due to an inter node (SGSN to
MME) update and the previous SGSN is a Gn/Gp SGSN, the MME shall set the
\"Single-Registration-Indication\" flag in the ULR-Flags information element
in the request.
If the Update Location request is to be sent due to an initial attach, the MME
or SGSN shall set the \"Initial-Attach-Indicator\" flag in the ULR-Flags
information element in the request.
When receiving and supporting Reset-ID AVPs in the response, the MME or SGSN
shall delete all the stored Reset-IDs, if there are any, and then store all
the received Reset-IDs.
A combined MME/SGSN shall set the \"Skip Subscriber Data\" flag in the ULR-
Flags if subscriber data are already available due to a previous location
update.
A combined MME/SGSN that has advertised its support for the combined MME/SGSN
capability, by either including the SGSN Number within ULR sent over S6a or
including the Coupled-Node-Diameter-ID within ULR sent over S6a/S6d or by
using same Diameter identity over S6a and S6d interfaces, shall be prepared to
receive a single subscription data update message (IDR or DSR) from the HSS
when the subscription data is modified.
If the MME or SGSN knows about the homogeneity of the support of IMS Voice
over PS Sessions in all TAs or RAs associated to that serving node (i.e., it
is supported in all the TA/RAs or it is not supported in any of the TA/RAs)
and for the served subscriber taking into account roaming relationship for IMS
Voice over PS Sessions, it shall include this indication to the HSS in the
\"Homogeneous Support of IMS Voice over PS Sessions\" IE.
The MME or SGSN may include dynamic APN and PGW ID data in the list of Active-
APN AVPs, in order to restore this information in the HSS after a Reset
procedure.
The MME/SGSN may include an equivalent PLMN list to request the CSG
Subscription data of the equivalent PLMNs.
A standalone MME shall not indicate its support for any SGSN specific
features, and it shall not request explicitly the download of GPRS data (via
the GPRS-Subscription-Data-Indicator flag; see clause 7.3.7). A standalone MME
that does not support the \"SMS in MME\" feature shall not provide its MME
Number for MT SMS, \"SMS only\" indication or SMS Registration Request and
therefore not indicate its support for any SMS related features (such as ODB
or barring services).
For an SGSN, if a DIAMETER_ERROR_CAMEL_SUBSCRIPTION_PRESENT is received, the
SGSN shall initiate the update location procedure with MAP over Gr interface
and use Gr for the subsequent mobility procedures.
For a standalone MME or SGSN, if EPS or GPRS subscription data is received,
the standalone MME or SGSN shall replace all of the EPS or GPRS subscription
data of the user in the MME or SGSN. Any optional EPS or GPRS data not
received, but stored in the standalone MME or SGSN, shall be deleted.
For a combined MME/SGSN, if EPS subscription data of the user is received, it
shall replace all of the EPS subscription data of the user. Any optional EPS
data not received by the combined MME/SGSN, but stored in the MME/SGSN, shall
be deleted.
For a combined MME/SGSN, if GPRS subscription data of the user is received, it
shall replace all of the GPRS subscription data of the user. Any optional GPRS
data not received by the combined MME/ SGSN, but stored in the MME/SGSN, shall
be deleted.
When receiving an Update Location response from the HSS, the MME or SGSN shall
check the result code. If it indicates success the MME or SGSN shall store the
received subscription profile (if any), and it shall store the HSS identity as
received in the Origin-Host AVP.
If an Additional MSISDN (A-MSISDN) is available in the subscription data and
downloaded in the A-MSISDN AVP to the MME/SGSN in an Update Location and if
the MME or SGSN supports the additional MSISDN feature, the MME or SGSN shall
use the Additional MSISDN as C-MSISDN.
For UEs receiving emergency services (i.e. emergency attached UEs or normal
attached UEs with a UE Requested PDN Connection for emergency services), and
if the MME or SGSN supports emergency services for users in limited service
state, the MME or SGSN shall proceed even if the Update Location procedure
fails (e.g. authenticated users with roaming restrictions or RAT-Type
restrictions in HSS).
When receiving GPRS-Subscription-Data AVP in the response, the SGSN or
combined MME/SGSN shall delete all the stored PDP-Contexts, if there are any,
and then store all the received PDP-Contexts.
When receiving the APN-Configuration-Profile AVP in a ULA, the MME or SGSN
shall delete all the stored APN-Configurations, if there are any, and then
store all the received APN-Configurations.
For each of the received APN-Configurations in the APN-Configuration-Profile,
if both the MIP6-Agent-Info and the PDN-GW-Allocation-Type AVPs are absent in
the APN-Configuration AVP and the MME or SGSN does not have any associated PGW
information, the MME or SGSN shall perform the PGW selection (static or
dynamic) according to the local configuration. If MIP6-Agent-Info is present,
and PDN-GW-Allocation-Type is not present, this means that the PDN GW address
included in MIP6-Agent-Info has been statically allocated. If the MIP6-Agent-
Info contains an FQDN of the PDN GW, the MME shall retrieve the PGW PLMN ID
from the MIP-Home-Agent-Host AVP within the MIP6-Agent-Info AVP.
When receiving an Update Location response from the HSS in the TAU or RAU
procedure, for each of the received APN-Configurations in the APN-
Configuration-Profile, if both the MIP6-Agent-Info and the PDN-GW-Allocation-
Type AVPs are absent in the APN-Configuration AVP and the MME or SGSN has
associated PGW information and the UE-level access restriction \"HO-To-
Non-3GPP-Access Not Allowed\" is not set, the MME or SGSN should send a Notify
Request if HO to the WLAN is supported in the network, including the APN and
PDN GW identity to the HSS in order to restore this information in the HSS
e.g. after a Reset procedure.
If the MME/SGSN supports interworking with Gn/Gp-SGSNs, it shall ensure that
the Context -Identifier sent over GTPv1 for each of the received APN-
Configurations is within the range of 1 and 255.
NOTE 1: If the MME/SGSN receives from HSS a Context-Identifier value higher
than 255, how this value is mapped to a value between 1 and 255 is
implementation specific.
If the subscriber is not roaming and the SIPTO-Permission information for an
APN is present, the MME or SGSN shall allow SIPTO above RAN for that APN only
if the SIPTO-Permission information indicates so.
If the subscriber is not roaming and the SIPTO-Permission information for an
APN is not present, the MME or SGSN may allow SIPTO above RAN for that APN.
If the subscriber is roaming and the SIPTO-Permission information for an APN
is present, the MME or SGSN shall allow SIPTO above RAN for that APN only if
the SIPTO-Permission information indicates so and the VPLMN Dynamic Address is
allowed and the MME or SGSN selects a PDN GW in the VPLMN.
If the subscriber is roaming and the SIPTO-Permission information for an APN
is not present, the MME or SGSN shall not allow SIPTO above RAN for that APN.
NOTE 2: Based on local configuration, the MME or SGSN can determine not to
allow SIPTO above RAN for an APN, regardless if the SIPTO-Permission
information is present.
If the subscriber is not roaming and the SIPTO-Local-Network-Permission
information for an APN is present, the MME or SGSN shall allow SIPTO at the
local network for that APN only if the SIPTO-Local-Network-Permission
information indicates so.
If the subscriber is not roaming and the SIPTO-Local-Network-Permission
information for an APN is not present, the MME or SGSN may allow SIPTO at the
local network for that APN.
If the subscriber is roaming and the SIPTO-Local-Network-Permission
information for an APN is present, the MME or SGSN shall allow SIPTO at the
local network for that APN only if the SIPTO-Local-Network-Permission
information indicates so and the VPLMN Dynamic Address is allowed and the MME
or SGSN selects a L-GW in the VPLMN.
If the subscriber is roaming and the SIPTO-Local-Network-Permission
information for an APN is not present, the MME or SGSN shall not allow SIPTO
at the local network for that APN.
NOTE 3: Based on local configuration, the MME or SGSN can determine not to
allow SIPTO at the local network for an APN, regardless if the SIPTO-Local-
Network-Permission information is present.
If MPS-Priority AVP is present and the UE is subscribed to the eMLPP or 1x RTT
priority service in the CS domain as indicated by the MPS-CS-Priority bit of
the AVP, the MME shall allow the UE to initiate the RRC connection with higher
priority than other normal UEs during CS Fallback procedure. If the MPS-
Priority AVP is present and the UE is subscribed to MPS in the EPS domain as
indicated by the MPS-EPS-Priority bit of the AVP, the MME shall allow the UE
to initiate the RRC connection with higher priority than other normal UEs.
If the subscriber is not roaming, the MME or SGSN may allow or prohibit the UE
to use LIPA as indicated by LIPA-Permission for a specific APN.
If the subscriber is roaming and the VPLMN-LIPA-Allowed AVP indicates that the
UE is not allowed to use LIPA in the VPLMN where the UE is attached, the MME
or SGSN shall not provide LIPA for the UE and shall not consider the LIPA-
Permission AVP. If the VPLMN-LIPA-Allowed AVP indicates that the UE is allowed
to use LIPA in the VPLMN, the MME or SGSN may allow or prohibit the UE to use
LIPA as indicated by LIPA-Permission for a specific APN. The VPLMN-Dynamic-
Address-Allowed AVP shall not be considered if it is received when the MME or
SGSN establishes a PDN connection with LIPA.
If the LIPA-Permission information for an APN indicates LIPA only, the MME or
SGSN shall only allow LIPA for that APN via the authorized CSGs according to
the CSG Subscription Data. If the LIPA-Permission information for an APN
indicates LIPA prohibited, the MME or SGSN shall not allow LIPA for that APN.
If the LIPA-Permission information for an APN indicates LIPA conditional, the
MME or SGSN shall allow non LIPA, and LIPA for that APN via the authorized
CSGs according to the CSG Subscription Data. If the LIPA-Permission AVP is not
present for a specific APN, the APN shall not be allowed to use LIPA.
The LIPA-Permission information for the Wildcard APN shall apply to any APN
that is not explicitly present in the subscription data.
The SIPTO-Permission information for the Wildcard APN shall apply to any APN
that is not explicitly present in the subscription data.
The SIPTO-Local-Network-Permission information for the Wildcard APN shall
apply to any APN that is not explicitly present in the subscription data.
If the subscription data received for a certain APN indicates that the APN was
authorized as a consequence of having the Wildcard APN in the user
subscription in HSS, then the MME shall not store this APN data beyond the
lifetime of the UE session and the MME shall delete them upon disconnection of
the UE.
If the MME supports the Relay Node functionality (see 3GPP TS 36.300 [40]) and
the subscription data indicates that the subscriber is not a relay, the MME
shall reject the attach request from a device attempting to attach to EPS as a
Relay Node. If a device requests to be attached to EPS as an UE, the MME shall
proceed with the attach procedure regardless of the content of the Relay Node
Indicator.
If trace data are received in the subscriber data, the MME or SGSN shall start
a Trace Session. For details, see 3GPP TS 32.422 [23].
If the Ext-PDP-Type AVP is present in the PDP-Context AVP, the SGSN or
combined MME/SGSN shall ignore the value of the PDP-Type AVP.
If the subscriber is not roaming and the Subscribed-Periodic-RAU-TAU-Timer
information is present, the MME or SGSN shall allocate the subscribed value to
the UE as periodic RAU or TAU timer. If the subscriber is roaming and the
Subscribed-Periodic-RAU-TAU-Timer information is present, the MME or SGSN may
use the subscribed periodic RAU/TAU timer value as an indication to decide for
allocating a locally configured periodic RAU/TAU timer value to the UE.
For a combined MME/SGSN, the node may include the Coupled-Node-Diameter-ID AVP
to allow the HSS to determine if the UE is served by the MME and SGSN parts of
the same combined MME/SGSN. When the message is sent over S6a interface and if
this AVP is included, the MME shall include the Diameter identity of the
coupled SGSN which is used by the SGSN over S6d interface. When the message is
sent over S6d interface and if this AVP is included, the SGSN shall include
the Diameter identity of the coupled MME which is used by the MME over S6a
interface.
NOTE 4: The Coupled-Node-Diameter-ID AVP allows the HSS to determine if the UE
is served by the MME and SGSN parts of the same combined MME/SGSN, when the
SGSN number is not available and when Diameter identity of S6a and S6d
interfaces of the combined MME/SGSN are not the same.
I If the MME supports the \"SMS in MME\" feature and the UE has requested a
combined EPS/IMSI attach or Combined TA/LA Update (see 3GPP TS 23.272 [44])
and the MME is not currently registered for SMS, the MME requests to be
registered for SMS by indicating its MME Number for MT SMS in the request,
including the SMS-Register-Request AVP and the SMS-Only-Indication flag set in
the ULR-Flags AVP if UE indicates \"SMS only\".
If the MME supports the \"SMS in MME\" feature, when receving an EPS attach or
a TAU from a UE accessing NB-IoT which requests SMS by indicating \"SMS
transfer without Combined Attach\" (see 3GPP TS 23.401 [2]), and if the MME is
not currently registered for SMS, the MME requests to be registered for SMS by
indicating its MME Number for MT SMS in the request, including the SMS-
Register-Request AVP.
If the HSS provides the MME with SMS data in the ULA and the ULA-Flags is
received with \"MME Registered for SMS\" flag set, the MME shall store this
data for providing SMS in MME service and consider itself registered for SMS.
If the SGSN supports the \"SMS in SGSN\" feature as specified in 3GPP TS
23.060 [12], clause 5.3.18, and wishes to provide SMS via SGSN it shall set
the \"SMS in SGSN\" flag in the Feature-List AVP, and include SMS-Register-
Request AVP. If the SGSN supports the Diameter based Gdd interface for SMS in
SGSN, it shall set the \"Gdd-in-SGSN\" flag in the Feature-List AVP. If the UE
has indicated \"SMS-Only\" this shall be indicated to the HSS setting the SMS-
Only--Indication flag in the ULR-Flags AVP.
NOTE 5: the setting of the \"SMS in SGSN\" feature bit reflects the \"SMS in
SGSN Offered\" as described in stage 2 above.
If the SMS-In-SGSN-Allowed-Indication flag is set in the received
Subscription-Data-Flags AVP, the SGSN shall store the subscription data for
providing SMS in SGSN service.
If the subscriber is not roaming and the Restoration-Priority information for
a certain APN is present, the MME or SGSN shall consider the subscribed value
as the relative priority of the user\'s PDN connection among PDN connections
to the same APN when restoring PDN connections affected by an SGW or PGW
failure/restart (see 3GPP TS 23.007 [43]). If the subscriber is roaming and
the Restoration-Priority information for a certain APN is present, the MME or
SGSN may use the subscribed value as an indication of the relative priority of
the user\'s PDN connection among PDN connections to the same APN based on
service level agreements. The MME/SGSN may use a locally configured value as
default restoration priority if the Restoration-Priority AVP for a certain APN
is not present, or if it is not permitted by service level agreements for an
in-bound roamer.
If the subscription data received for a certain APN includes WLAN-
offloadability AVP, then the MME or SGSN shall determine the offloadability of
the UE's PDN Connection(s) to that APN based on subscription data and locally
configured policy (e.g. for roaming users or when the subscription data does
not include any offloadability indication).
NOTE 6: As indicated in section 7.3.31, if the UE-level access restriction
\"HO-To-Non-3GPP-Access Not Allowed\" is set, the offload of PDN Connections
to WLAN is not allowed for any APN.
If the subscription data received for the user includes the DL-Buffering-
Suggested-Packet-Count AVP, then the MME or SGSN should take into account the
subscription data, in addition to local policies, to determine whether to
invoke extended buffering of downlink packets at the SGW for High Latency
Communication. Otherwise, the MME or SGSN shall make this determination based
on local policies only.
When receiving IMSI-Group-Id AVP(s) within the Subscription-Data AVP, the MME
or SGSN shall replace stored IMSI-Group Ids (if any) with the received
information rather than add the received information to the stored
information.
When receiving a Monitoring-Event-Configuration in the ULA, the MME or SGSN
shall start the detection of the Monitoring events indicated in that AVP.
If the MME/SGSN supports Monitoring, the MME/SGSN shall include the Supported-
Services AVP with Supported-Monitoring-Events included in the ULR command. .
If the MME and the UE support Attach without PDN connection (i.e. EMM-
REGISTERED without PDN connection) and the PDN-Connection-Restricted flag is
set in the received Subscription-Data-Flags AVP, the MME shall not establish
any non-emergency PDN connectionand shall tear down any existing non-emergency
PDN connection for this user.
If the subscription data received for the user includes the Preferred-Data-
Mode AVP, for an IP APN configuration or for a non-IP APN configuration with
SGi based delivery, then the MME should (if the subscriber is not roaming) or
may (if the subscriber is roaming) take into account the subscription data, in
addition to local policies and the UE\'s Preferred Network Behaviour, to
determine whether to transmit the traffic associated with this APN over the
User Plane and/or over the Control Plane. Otherwise, the MME shall make this
determination based on local policies and the UE\'s Preferred Network
Behaviour only.
##### 5.2.1.1.3 Detailed behaviour of the HSS
When receiving an Update Location request the HSS shall check whether
subscription data exists for the IMSI.
If the HSS determines that there is not any type of subscription for the IMSI
(including EPS, GPRS and CS subscription data), a Result Code of
DIAMETER_ERROR_USER_UNKNOWN shall be returned.
If the Update Location Request is received over the S6a interface, and the
subscriber has not any APN configuration, the HSS shall return a Result Code
of DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
If the Update Location Request is received over S6a, from an MME that does not
support the \"Non-IP PDN Type APNs\" feature, and the user's subscripton
profile contains only APN configurations of type \"Non-IP\", the HSS shall
return a Result Code of DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
If the Update Location Request is received over the S6d interface, and the
subscriber has neither an APN configuration profile nor GPRS subscription
data, the HSS shall return a Result Code of
DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
When sending DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION, an Error Diagnostic
information may be added to indicate whether or not GPRS subscription data are
subscribed (i.e. whether or not Network Access Mode stored in the HSS
indicates that only CS service is allowed).
The HSS shall check whether the RAT type the UE is using is allowed for the
subscriber in the serving PLMN. If it is not, a Result Code of
DIAMETER_ERROR_RAT_NOT_ALLOWED shall be returned.
The HSS shall check whether roaming is not allowed in the VPLMN due to ODB. If
so a Result Code of DIAMETER_ERROR_ROAMING_NOT_ALLOWED shall be returned. When
this error is sent due to the MME or SGSN not supporting a certain ODB
category, an Error Diagnostic information element may be added to indicate the
type of ODB; if this error is sent due to the ODB indicating \"Barring of
Roaming\", Error Diagnostic shall not be included.
If the Update Location Request is received over the S6d interface and the HSS
supports the \"SGSN CAMEL Capability\" feature, and the SGSN indicates support
of SGSN CAMEL capability, the HSS shall check if the subscriber has SGSN CAMEL
Subscription data. If the subscriber has SGSN CAMEL Subscription data, the HSS
shall return a Result Code of DIAMETER_ERROR_CAMEL_SUBSCRIPTION_PRESENT.
If the Update Location Request is received over the S6a interface, the HSS
shall send a Cancel Location Request with a Cancellation-Type of
MME_UPDATE_PROCEDURE (CLR; see chapter 7.2.7) to the previous MME (if any) and
replace the stored MME-Identity with the received value (the MME-Identity is
received within the Origin-Host AVP). The HSS shall reset the \"UE purged in
MME\" flag and delete any stored last known MME location information of the
(no longer) purged UE. If the \"Single-Registration-Indication\" flag was set
in the received request, the HSS shall send a Cancel Location Request with a
Cancellation-Type of SGSN_UPDATE_PROCEDURE to the SGSN (MAP Cancel Location),
and delete the stored SGSN address and SGSN number. If the \"Initial-Attach-
Indicator\" flag was set in the received request, and the \"Single-
Registration-Indication\" flag was not set, the HSS shall send a Cancel
Location Request with a Cancellation-Type of INITIAL_ATTACH_PROCEDURE (CLR;
see chapter 7.2.7, or MAP Cancel Location) to the SGSN if there is an SGSN
registration.
If the Update Location Request is received over the S6d interface, the HSS
shall send a Cancel Location Request with a Cancellation-Type of
SGSN_UPDATE_PROCEDURE (CLR; see chapter 7.2.7, or MAP Cancel Location) to the
previous SGSN (if any) and replace the stored SGSN-Identity with the received
value (the SGSN-Identity is received within the Origin-Host AVP). The HSS
shall reset the \"UE purged in SGSN\" flag and delete any stored last known
SGSN location information of the (no longer) purged UE. If the \"Initial-
Attach-Indicator\" flag was set in the received request, the HSS shall send a
Cancel Location Request with a Cancellation-Type of INITIAL_ATTACH_PROCEDURE
(CLR; see chapter 7.2.7) to the MME if there is an MME registration.
When the HSS receives the Update Location Request, if a 15^th^ digit of the
IMEI AVP is received, the HSS may discard the digit.
If the Update Location Request includes the list of active APNs, the HSS shall
delete all the stored dynamic PDN GW information, if there are any, and then
replace them by the PDN GW information received in the list of Active-APN
AVPs.
If the Update Location Request includes an equivalent PLMN list, the HSS shall
return the CSG list (if any) for each equivalent PLMN to the MME with the
subscription data, and Visited-PLMN-Id AVP shall be present in the CSG-
Subscription-Data AVP to indicate the corresponding PLMN. If there is no
equivalent PLMN list received, the HSS may not include Visited-PLMN-Id AVP in
the CSG-Subscription-Data AVP, and the CSG-Subscription-Data AVP shall contain
the CSG subscription data of the registered PLMN of the MME or the SGSN.
If the Update Location Request is received over the S6a interface for a user
for which the URRP-MME parameter is set in the HSS, the HSS shall clear the
URRP-MME parameter and send an indication to the corresponding Service Related
Entities.
If the Update Location Request is received over the S6d interface for a user
for which the URRP-SGSN parameter is set in the HSS, the HSS shall clear the
URRP-SGSN parameter and send an indication to the corresponding Service
Related Entities.
If no result code has been sent to the MME or SGSN so far, the HSS shall
include the subscription data in the ULA command according to the ULR-Flags
and the supported/unsupported features of the MME or SGSN, unless an explicit
\"skip subscriber data\" indication has been received in the request, and
shall return a Result Code of DIAMETER_SUCCESS.
When the APN-Configuration-Profile AVP is present in the Subscription-Data AVP
sent within a ULA, the AVP shall contain at least the default APN
Configuration and a Context-Identifier AVP that identifies the per
subscriber's default APN configuration. The default APN Configuration shall
not contain the Wildcard APN (see 3GPP TS 23.003 [3], clause 9.2); the default
APN shall always contain an explicit APN.
The GPRS Subscription data (if available in the HSS) shall only be present in
the ULA command if it was indicated by the serving node in the ULR-Flags AVP
(see clause 7.3.7), or when the subscription data is returned by a Pre-Rel-8
HSS (via an IWF) or when the Update Location Request is received over the S6d
interface and there is no APN configuration profile stored for the subscriber.
The HSS shall use the indication received in the GPRS-Subscription-Data-
Indicator for future use in the subscriber data update procedures.
The HSS shall store the new terminal information and/or the new UE SRVCC
capability, if they are present in the request. If the UE SRVCC capability is
not present, the HSS shall store that it has no knowledge of the UE SRVCC
capability.
If the MME/SGSN indicates support of the Additional-MSISDN feature and an
additional MSISDN (A-MSISDN) is available in the subscription data, the HSS
shall send the provisioned additional MSISDN together with the MSISDN.
If the MME/SGSN does not support the Additional-MSISDN feature, the HSS shall
populate the MSISDN AVP either with the subscribed MSISDN or the subscribed
additional MSISDN based on operator policy and availability.
NOTE: When the MME/SGSN does not support the Additional-MSISDN feature, the
MME/SGSN will use the MSISDN from the MSISDN AVP as C-MSISDN.
LCS-Info, Teleservice-List and Call-Barring-Info data shall be included
according to the list of supported features indicated by the serving node (see
clause 7.3.10).
If the HSS supports the \"SMS in MME\" feature and receives the indication
that the MME supports the \"SMS in MME\" feature and requests to be registered
for SMS by including the MME Number for MT SMS, SMS-Register-Request AVP
and/or setting the SMS-Only-Indication flag in the ULR-Flags AVP if indicated
from the UE, the HSS shall determine if SMS can be provided via the MME as
described in 3GPP TS 23.272 [44]. If SMS in MME is accepted the HSS shall
register the MME for SMS, store the \"MME number for MT SMS\" as the
corresponding MSC number to be used for MT SMS and return an indication of MME
registered for SMS in ULA-Flags AVP.
If the MME is successfully registered for SMS the HSS shall download the
available SMS related subscription data that may comprise SMS teleservice,
MSISDN, ODB and barring services for SMS according to supported features.
Also, if the user is considered as not reachable (i.e., MNRF flag is set in
HSS for that user), and the UE is considered to have free available memory
(i.e., MCEF flag is not set in HSS for that user), the HSS shall send a MAP-
Alert-Service-Centre message or S6c-Alert-Service-Centre-Request to the SMS-
IWMSC (see 3GPP TS 29.338 [48]).
If the HSS supports the \"SMS in SGSN\" feature as described in 3GPP TS 23.060
[12], clause 5.3.18 and receives the indication from the SGSN that it supports
\"SMS in SGSN\" feature, and SMS-Register-Request AVP and/or the SMS-Only-
Indication flag in the ULR-Flags AVP if indicated from the UE, and the PS
subscriber data allow for SMS services (e.g. the subscription information
indicates \"PS and SMS-Only\"), the HSS shall determine if SMS can be provided
via the SGSN as described in 3GPP TS 23.060 [12]. If \"SMS in SGSN\" is
accepted the HSS shall indicate in the ULA that \"SMS in SGSN\" is allowed to
the SGSN and shall handle MT SMS as described in 3GPP TS 23.060 [12], clause
5.3.18. If the HSS supports the \"Gdd-in-SGSN\" feature and receives the
indication from the SGSN that it supports the \"Gdd-in-SGSN\" feature, the HSS
shall store the information that the SGSN supports the Gdd interface. Also, if
the user is considered as not reachable (i.e., MNRG flag is set in HSS for
that user), and the UE is considered to have free available memory (i.e., MCEF
flag is not set in HSS for that user), the HSS shall send a MAP-Alert-Service-
Centre message or S6c-Alert-Service-Centre-Request to the SMS-IWMSC (see 3GPP
TS 29.338 [48]).
The HSS may use the indication received in the Node-Type-Indicator for future
use in the subscriber data update procedures.
Subscriber-Status AVP shall be present in the Subscription-Data AVP when sent
within a ULA. If the value \"OPERATOR_DETERMINED_BARRING\" is sent, the
Operator-Determined-Barring AVP or HPLMN-ODB AVP shall also be present in the
Subscription-Data AVP, or vice versa.
Access-Restriction-Data AVP shall be present within the Subscription-Data AVP
sent within a ULA if at least one of the defined restrictions applies.
The AMBR AVP shall be present in the Subscription-Data AVP when the APN-
Configuration-Profile AVP is sent within a ULA (as part of the Subscription-
Data AVP) and may be present in the Subscription-Data AVP when the GPRS-
Subscription-Data AVP is present.
The EPS-Subscribed-QoS-Profile AVP and the AMBR AVP shall be present in the
APN-Configuration AVP when the APN-Configuration AVP is sent in the APN-
Configuration-Profile AVP and when the APN-Configuration-Profile AVP is sent
within a ULA (as part of the Subscription-Data AVP).
For those APNs that have been authorized as a consequence of having the
Wildcard APN in the user subscription, the HSS shall include the specific APN
name and associated PDN-GW identity inside the APN context of the Wildcard
APN. This indicates to the MME that the particular APN shall not be cached in
the MME and it shall be deleted when the UE session is terminated.
If a Result Code of DIAMETER_SUCCESS is returned, the HSS shall set the
Separation Indication in the response.
If the HSS receives an indication in the ULR command about the homogeneous
support of IMS Voice over PS Sessions in all TA/RAs associated to a serving
node, it may use this information in the future in order to skip the T-ADS
data retrieval, as described in clause 5.2.2.1 (IDR/IDA commands).
Subscribed-VSRVCC AVP shall be present within the Subscription-Data AVP sent
within a ULA only if the user is subscribed to the SRVCC and vSRVCC.
If the UE is allowed to use Proximity-based Services in the visited PLMN, the
HSS shall include ProSe-Subscription-Data AVP within the Subscription-Data AVP
sent within a ULA.
If the HSS receives the SGs MME identity and if the HSS supports this
information element, the HSS shall store it for use with VLR restoration.
If the HSS receives Update Location Request over both the S6a and S6d
interfaces then based on the following conditions the HSS concludes if the UE
is served by the MME and SGSN parts of the same combined MME/SGSN:
\- if both the messages contain the same SGSN number; or
\- if the Diameter identity received over S6a matches with the Diameter
identity received over S6d; or
\- if the Coupled-Node-Diameter-ID AVP received over S6a interface matches
with the Diameter identity received within Origin-Host AVP over S6d interface
OR if the Coupled-Node-Diameter-ID AVP received over S6d interface matches
with the Diameter identity received within Origin-Host AVP over S6a interface.
If the HSS supports the handling of access restrictions for adjacent PLMNs,
and it receives a list of adjacent PLMNs from the MME/SGSN, the HSS may send
the associated Access Restriction Data, according to local operator policies,
in the Adjacent-Access-Restriction-Data AVP, so the MME/SGSN can use this
information to allow, or prevent, inter-RAT inter-PLMN handovers towards any
of the PLMNs indicated by the HSS. The HSS shall not include in the list of
Adjacent-Access-Restriction-Data the PLMN-ID, and its access restrictions, of
the current PLMN where the MME/SGSN is located, since this information is
already conveyed in the Access-Restriction-Data AVP inside the Subscription-
Data AVP.
If the HSS supports Monitoring events and receives a Supported-Services AVP it
shall only trigger those services which are supported by the MME/SGSN.
#### 5.2.1.2 Cancel Location
##### 5.2.1.2.1 General
The Cancel Location Procedure shall be used between the HSS and the MME and
between the HSS and the SGSN to delete a subscriber record from the MME or
SGSN. The procedure shall be invoked by the HSS and is used:
\- to inform the MME or SGSN about the subscriber's subscription withdrawal or
\- to inform the MME or SGSN about an ongoing update procedure i.e. MME or
SGSN change or
\- to inform the MME or SGSN about an initial attach procedure.
This procedure is mapped to the commands Cancel-Location-Request/Answer
(CLR/CLA) in the Diameter application specified in chapter 7.
Table 5.2.1.2.1/1 specifies the involved information elements for the request.
Table 5.2.1.2.1/2 specifies the involved information elements for the answer.
Table 5.2.1.2.1/1: Cancel Location Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Cancellation Type | Cancellation-Type | M | Defined values | | | | | that can be used | | (See 7.3.24) | | | are: | | | | | | | | | | - MME-Update | | | | | Procedure, | | | | | | | | | | - SGSN-Update | | | | | Procedure, | | | | | | | | | | - Subscription | | | | | Withdrawal, | | | | | | | | | | - Update | | | | | Procedure_IWF, | | | | | | | | | | - Initial Attach | | | | | Procedure. | +-------------------+-------------------+------+-------------------+ | CLR Flags | CLR-Flags | O | This Information | | | | | Element contains | | (See 7.3.152) | | | a bit mask. See | | | | | 7.3.152 for the | | | | | meaning of the | | | | | bits and the | | | | | condition for | | | | | each bit to be | | | | | set or not. | +-------------------+-------------------+------+-------------------+
Table 5.2.1.2.1/2: Cancel Location Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | The result of the | | | Ex | | operation. | | (See 7.4) | perimental-Result | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | +-------------------+-------------------+------+-------------------+
##### 5.2.1.2.2 Detailed behaviour of the MME and the SGSN
When receiving a Cancel Location request the MME or SGSN shall check whether
the IMSI is known.
If it is not known, a result code of DIAMETER_SUCCESS is returned.
If it is known, the MME or SGSN shall check the Cancellation Type and act
accordingly.
If the Cancellation Type is \"Subscription Withdrawal\", the MME or SGSN shall
delete the subscription data and detach the UE; in addition, if the Reattach-
Required flag is set, the MME or SGSN shall indicate to the UE to initiate an
immediate re-attach procedure, as described in 3GPP TS 23.401 [2] and 3GPP TS
23.060 [12]. A result code of DIAMETER_SUCCESS shall be returned.
If a cancellation type of \"Initial Attach Procedure\" is received, the MME or
SGSN shall not delete the subscription data. For details see 3GPP TS 23.401[2]
and 3GPP TS 23.060[12]. If the MME receives this cancelation type, and it is
registered for SMS, it shall consider itself as unregistered for SMS. Also in
this case a result code of DIAMETER_SUCCESS shall be returned.
When a UE is served by a single combined MME/SGSN for both E-UTRAN and non-E-
UTRAN access, the combined MME/SGSN shall check the Cancellation-Type. If it
indicates Subscription Withdrawal or Update Procedure_IWF, the CLR is
processed both in the MME part and in the SGSN part of the combined node. If
it indicates Initial Attach Procedure, and if the CLR-Flags AVP is received
and supported by the combined MME/SGSN, the CLR is processed only in the
affected part of the combined node as indicated by the \"S6a/S6d-Indicator\"
flag in the CLR-Flags AVP. Otherwise, the CLR is processed only in the
affected part of the combined node and subscription data are kept for the not
affected part.
##### 5.2.1.2.3 Detailed behaviour of the HSS
The HSS shall make use of this procedure when the subscriber's subscription is
withdrawn by the HSS operator and when the HSS detects that the UE has moved
to a new MME or SGSN area.
The HSS shall include a cancellation type of \"Subscription Withdrawal\" if
the subscriber's subscription is withdrawn by the operator; the HSS may set
the Reattach-Required flag in order to request the MME or the SGSN to trigger
an immediate reattachment of the UE.
The HSS shall include a cancellation type of \"MME Update Procedure\" if the
UE moved to a new MME area.
The HSS shall include a cancellation type of \"SGSN Update Procedure\" if the
UE moved to a new SGSN area.
The HSS shall include a cancellation type of \"Initial Attach Procedure\" if
the cancel location is initiated due to an Initial Attach from the UE.
The HSS shall include the CLR-Flags with the \"S6a/S6d-Indicator\" flag
indicating the affected part of the combined node if the cancel location is to
be sent to a combined MME/SGSN during initial attach procedure.
#### 5.2.1.3 Purge UE
##### 5.2.1.3.1 General
The Purge UE Procedure shall be used between the MME and the HSS and between
the SGSN and the HSS to indicate that the subscriber's profile has been
deleted from the MME or SGSN either by an MMI interaction or automatically,
e.g. because the UE has been inactive for several days.
This procedure is mapped to the commands Purge-UE-Request/Answer (PUR/PUA) in
the Diameter application specified in chapter 7.
Table 5.2.1.3.1/1 specifies the involved information elements for the request.
Table 5.2.1.3.1/2 specifies the involved information elements for the answer.
Table 5.2.1.3.1/1: Purge UE Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | PUR-Flags | PUR-Flags | O | If present, this | | | | | Information | | (See 7.3.149) | | | Element shall | | | | | contain a | | | | | bitmask. See | | | | | section 7.3.149 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+ | EPS-Loc | EPS-Loc | C | This Information | | ation-Information | ation-Information | | Element shall | | | | | contain the last | | (See 7.3.111) | | | known | | | | | EPS-Location | | | | | Information of | | | | | the purged UE. | | | | | Shall be present | | | | | if available. | +-------------------+-------------------+------+-------------------+
Table 5.2.1.3.1/2: Purge UE Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indication | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+ | PUA-Flags | PUA-Flags | C | This Information | | | | | Element shall | | (See 7.3.48) | | | contain a bit | | | | | mask. See section | | | | | 7.3.48 for the | | | | | meaning of the | | | | | bits. It shall be | | | | | present only when | | | | | the Result-Code | | | | | AVP is | | | | | D | | | | | IAMETER_SUCCESS. | +-------------------+-------------------+------+-------------------+
##### 5.2.1.3.2 Detailed behaviour of the MME and the SGSN
The MME shall make use of this procedure to set the \"UE Purged in the MME\"
flag in the HSS when the subscription profile is deleted from the MME database
due to MMI interaction or after long UE inactivity.
The SGSN shall make use of this procedure to set the \"UE Purged in SGSN\"
flag in the HSS when the subscription profile is deleted from the SGSN
database due to MMI interaction or after long UE inactivity.
The combined MME/SGSN when using a single Origin-Host identity shall make use
of this procedure to set the \"UE Purged in MME\" and \"UE Purged in SGSN\"
flags in the HSS when the subscription profile is deleted from the common
MME/SGSN database due to MMI interaction or after long UE inactivity on all
registered accesses. If the HSS has indicated support for the Partial Purge
feature (see clause 7.3.10), the combined MME/SGSN may also indicate to the
HSS a Purge of the UE in only one of the serving nodes in the combined node
(either in the MME or in the SGSN).
The combined MME/SGSN when using different Origin-Host identities for MME and
SGSN shall send two Purge UE Requests as if it was not combined.
When receiving a Purge UE response from the HSS the MME shall check the Result
Code. If it indicates success, the MME shall check the PUA flag \"freeze
M-TMSI\", and if set freeze the M-TMSI i.e. block it for immediate re-use.
When receiving a Purge UE response from the HSS the SGSN shall check the
Result Code. If it indicates success, the SGSN shall check the PUA flag
\"freeze P-TMSI\", and if set freeze the P-TMSI i.e. block it for immediate
re-use.
When receiving a Purge UE response from the HSS the combined MME/SGSN shall
check the Result Code. If it indicates success, the combined MME/SGSN shall
check the PUA flag \"freeze M-TMSI\" and \"freeze P-TMSI\", and if set freeze
the M-TMSI and/or the P-TMSI i.e. block it for immediate re-use.
##### 5.2.1.3.3 Detailed behaviour of HSS
When receiving a Purge UE request the HSS shall check whether the IMSI is
known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known, the HSS shall set the result code to DIAMETER_SUCCESS and
compare the received identity in the Origin-Host with the stored MME-Identity
and with the stored SGSN-Identity.
If the received identity matches the stored MME-identity and the stored SGSN-
Identity (no matter whether the node type indicator bit in ULR-Flags was set
or clear), then:
\- if the HSS supports the Partial Purge feature (see clause 7.3.10), and the
combined MME/SGSN indicated that the UE was purged in only one of the serving
nodes, the HSS shall set the PUA flags according to the serving node where the
purge was done (i.e., either \"freeze M-TMSI\" if the purge was done in the
MME, or \"freeze P-TMSI\" if the purge was done in the SGSN); similarly, the
HSS shall either set the \"UE purged in MME\" flag and store the received last
known MME Location information of the purged UE, or set the \"UE purged in
SGSN\" flag and store the received last known SGSN-Location Information of the
purged UE, accordingly;
\- if the HSS does not support the Partial Purge feature, or the combined
MME/SGSN did not indicate that the UE was purged in only one of the serving
nodes, the HSS shall set the PUA flags \"freeze M-TMSI\" and \"freeze P-TMSI\"
in the answer message and set the flag \"UE purged in MME\" and \"UE purged in
SGSN\" and store the received last known EPS Location Information of the
purged UE;
If the received identity matches the stored MME-identity but not the stored
SGSN-identity, the HSS shall set the PUA flag \"freeze M-TMSI\" and clear the
PUA flag \"freeze P-TMSI\" in the answer message, set the flag \"UE purged in
MME\" and store the received last known MME location information of the purged
UE;
If the received identity matches the stored SGSN-identity but not the stored
MME-identity, the HSS shall set the PUA flag \"freeze P-TMSI\" and clear the
PUA flag \"freeze M-TMSI\" in the answer message and set the flag \"UE purged
in SGSN\" and store the received last known SGSN location information of the
purged UE;
If the received identity does not match the stored MME-identity and does not
match the stored SGSN-identity, the HSS shall clear the PUA flags \"freeze
M-TMSI\" and \"freeze P-TMSI in the answer message.
### 5.2.2 Subscriber Data Handling Procedures
#### 5.2.2.1 Insert Subscriber Data
##### 5.2.2.1.1 General
The Insert Subscriber Data Procedure shall be used between the HSS and the MME
and between the HSS and the SGSN for updating and/or requesting certain user
data in the MME or SGSN in the following situations:
\- due to administrative changes of the user data in the HSS and the user is
now located in an MME or SGSN, i.e. if the user was given a subscription and
the subscription has changed; subscription data that are applicable to MMEs
but not to SGSNs should not be sent to the SGSN unless the SGSN is known to be
a combined MME/SGSN; similarly subscription data that are applicable to SGSNs
but not to MMEs should not be sent to the MME unless the MME is known to be a
combined MME/SGSN.
\- the operator has applied, changed or removed Operator Determined Barring
for this user;
\- activate subscriber tracing in the MME or the SGSN;
\- to indicate to the MME or SGSN that the HSS has requested to be notified
when the UE has become reachable;
\- to request from the MME or SGSN the necessary data to support the T-ADS
functionality;
\- to retrieve location information and/or state information from the MME or
the SGSN;
\- to retrieve from the MME or the SGSN the Local Time Zone of the location in
the visited network where the UE is attached;
\- to update the STN-SR (e.g., as a result of an Sh interaction with an SCC-
AS).
\- to update the MME/SGSN with the identity of a dynamically allocated PDN GW
as a result of the first PDN connection establishment associated with an APN
over non 3GPP access.
\- to indicate to the MME that the HSS has deregistered the MME for SMS.
\- to indicate to the MME/SGSN that the HSS-based P-CSCF restoration
procedure, as described in 3GPP TS 23.380 [51] subclause 5.4, shall be
executed.
\- to request the MME or the SGSN to configure and report the detection of
Monitoring events, or delete stored Monitoring events configuration.
If the HSS knows that the UE has attached to the MME and SGSN parts of the
same combined MME/SGSN via both the E-UTRAN and UTRAN/GERAN(refer to clause
5.2.1.1.2, 5.2.1.1.3 for further details), the HSS should invoke this
procedure for a single time to update and/or request certain user data in the
combined MME/SGSN, i.e. the HSS should not invoke this procedure for each of
the MME and the SGSN registered respectively.
If the Node-Type-Indicator information has been previously received as cleared
in the ULR-Flags and if the MME has not been registered for SMS during update
location procedure for the MME, the HSS may skip any change of the SMS related
subscription data and consequently does not have to make use of the Insert
Subscriber Data procedure to update the SMS subscription data in the MME.
This procedure is mapped to the commands Insert Subscriber Data-Request/Answer
(IDR/IDA) in the Diameter application specified in clause 7.
Table 5.2.2.1.1/1 specifies the involved information elements for the request.
Table 5.2.2.1.1/2 specifies the involved information elements for the answer.
Table 5.2.2.1.1/1: Insert Subscriber Data Request
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+ | Subscription Data | Subscription-Data | **M** | This Information | | | | | Element shall | | (See 7.3.2) | | | contain the part | | | | | of the | | | | | subscription | | | | | profile that | | | | | either is to be | | | | | added to the | | | | | subscription | | | | | profile stored in | | | | | the MME or SGSN | | | | | or is replacing a | | | | | part of the | | | | | subscription | | | | | profile stored in | | | | | the MME or SGSN. | +-------------------+-------------------+-------+-------------------+ | IDR Flags | IDR-Flags | **C** | This Information | | | | | Element shall | | (See 7.3.103) | | | contain a bit | | | | | mask. See 7.3.103 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+-------+-------------------+ | Reset-IDs | Reset-ID | **O** | The Reset-ID | | | | | uniquely | | (See 7.3.184) | | | identifies a | | | | | fallible resource | | | | | in the HSS on | | | | | which the user | | | | | (IMSI) depends. | | | | | In the event of a | | | | | restart of the | | | | | fallible resource | | | | | a Reset message | | | | | containing the | | | | | Reset-ID will | | | | | exactly identify | | | | | the impacted | | | | | subscribers. | +-------------------+-------------------+-------+-------------------+
Table 5.2.2.1.1/2: Insert Subscriber Data Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | Result-Code AVP | | | | | shall be used to | | | | | indicate success | | | | | / errors defined | | | | | in the Diameter | | | | | Base Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+ | IMS Voice over PS | IM | C | If available to | | Sessions | S-Voice-Over-PS-S | | the serving node, | | | essions-Supported | | this information | | Supported | | | element shall | | | | | indicate whether | | (See 7.3.106) | | | or not \"IMS | | | | | Voice over PS | | | | | Sessions\" is | | | | | supported by the | | | | | UE\'s most | | | | | recently used TA | | | | | or RA in the | | | | | serving node (MME | | | | | or SGSN or | | | | | combined | | | | | MME/SGSN). If the | | | | | UE is in detached | | | | | state, this | | | | | information | | | | | element shall not | | | | | be included in | | | | | the response. | +-------------------+-------------------+------+-------------------+ | Last UE Activity | Last | C | If available to | | Time | -UE-Activity-Time | | the serving node, | | | | | this information | | (See 7.3.108) | | | element shall | | | | | contain the time | | | | | of the last radio | | | | | contact with the | | | | | UE. If the UE is | | | | | in detached | | | | | state, this | | | | | information | | | | | element shall not | | | | | be included in | | | | | the response. | +-------------------+-------------------+------+-------------------+ | RAT Type | RAT-Type | C | If available to | | | | | the serving node, | | (See 7.3.13) | | | this information | | | | | element shall | | | | | indicate the RAT | | | | | Type of the | | | | | access where the | | | | | UE was present at | | | | | the time of the | | | | | last radio | | | | | contact. If the | | | | | UE is in detached | | | | | state, this | | | | | information | | | | | element shall not | | | | | be included in | | | | | the response. | +-------------------+-------------------+------+-------------------+ | IDA-Flags | IDA-Flags | C | This Information | | | | | Element shall | | (See 7.3.47) | | | contain a bit | | | | | mask. See 7.3.47 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+ | EPS-User-State | EPS-User-State | C | This Information | | | | | Element shall | | (See 7.3.110) | | | contain the | | | | | EPS-User State. | | | | | It shall be | | | | | present if EPS | | | | | user state was | | | | | requested within | | | | | IDR. | +-------------------+-------------------+------+-------------------+ | EPS-Loc | EPS-Loc | C | This Information | | ation-Information | ation-Information | | Element shall | | | | | contain the | | (See 7.3.111) | | | EPS-Location | | | | | Information. It | | | | | shall be present | | | | | if EPS location | | | | | information was | | | | | requested within | | | | | IDR. | +-------------------+-------------------+------+-------------------+ | Local Time Zone | Local-Time-Zone | C | This Information | | | | | Element shall | | (See 7.3.156) | | | contain | | | | | information on | | | | | the Local Time | | | | | Zone of the | | | | | location in the | | | | | visited network | | | | | where the UE is | | | | | attached. It | | | | | shall be present | | | | | if the Local Time | | | | | Zone was | | | | | requested within | | | | | IDR. | +-------------------+-------------------+------+-------------------+ | Monitoring Event | Monito | C | This Information | | Report | ring-Event-Report | | Element shall | | | | | contain the | | | | | report of | | | | | Monitoring event. | | | | | It shall be | | | | | present if | | | | | Monitoring event | | | | | configuration is | | | | | included within | | | | | IDR and any of | | | | | the requested | | | | | Monitoring events | | | | | are available to | | | | | be reported. | +-------------------+-------------------+------+-------------------+ | Monitoring Event | Monitoring-Ev | C | This Information | | Config Status | ent-Config-Status | | Element shall be | | | | | present if | | | | | Monitoring event | | | | | configuration is | | | | | included in IDR. | | | | | It shall contain | | | | | all the | | | | | configuration | | | | | status for each | | | | | Monitoring event | | | | | that was | | | | | requested. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Services | upported-Services | | Information | | | | | Element shall | | (3GPP TS 29.336 | | | contain AVPs | | [54]) | | | indicating | | | | | details of the | | | | | services | | | | | supported by the | | | | | MME/SGSN. | +-------------------+-------------------+------+-------------------+
##### 5.2.2.1.2 Detailed behaviour of the MME and the SGSN
When receiving an Insert Subscriber Data request the MME or SGSN shall check
whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known, the MME or SGSN shall replace the specific part of the stored
subscription data with the received data, or shall add the received data to
the stored data.
When receiving the APN-Configuration-Profile AVP within the Subscription-Data
AVP, the MME or SGSN shall check the All-APN-Configurations-Included-Indicator
value. If it indicates \"All_APN_CONFIGURATIONS_INCLUDED\", the MME or SGSN
shall delete all stored APN-Configurations and then store all received APN-
Configurations. Otherwise, the MME or SGSN shall check the Context-Identifier
value of each received APN-Configuration. If the Context-Identifier of a
received APN-Configuration matches a Context-Identifier of a stored APN-
Configuration, the MME or SGSN shall replace the stored APN-Configuration with
the received APN-Configuration. If the Context-Identifier of a received APN-
Configuration does not match a Context-Identifier of a stored APN-
Configuration, the MME or SGSN shall add the received APN-Configuration to the
stored APN-Configurations. If the addition or update of the subscription data
succeeds in the MME or SGSN, the Result-Code shall be set to DIAMETER_SUCCESS.
The MME or SGSN shall then acknowledge the Insert Subscriber Data message by
returning an Insert Subscriber Data Answer.
For each of the received APN-Configurations in the APN-Configuration-Profile,
if both the MIP6-Agent-Info and the PDN-GW-Allocation-Type AVPs are absent in
the APN-Configuration AVP, the MME or SGSN shall perform the PGW selection
(static or dynamic) according to the local configuration. If MIP6-Agent-Info
is present, and PDN-GW-Allocation-Type is not present, this means that the PDN
GW address included in MIP6-Agent-Info has been statically allocated.
If the MME/SGSN supports interworking with Gn/Gp-SGSNs, it shall ensure that
the context identifier sent over GTPv1 for each of the received APN-
Configurations is within the range of 1 and 255.
NOTE 1: If the MME/SGSN receives from HSS a Contex-Identifier value higher
than 255, how this value is mapped to a value between 1 and 255 is
implementation specific.
If the MME is requested to notify the HSS when the UE becomes reachable, the
MME shall set the URRP-MME parameter to indicate the need to inform the HSS
about UE reachability, e.g. when the next NAS activity from the UE is
detected. If the SGSN is requested to notify the HSS when the UE becomes
reachable, the SGSN shall set the URRP-SGSN parameter to indicate the need to
inform the HSS about UE reachability, e.g. when the next NAS activity from the
UE is detected.
When receiving GPRS-Subscription-Data AVP within the Subscription-Data AVP,
the SGSN or combined MME/SGSN shall check the Complete-Data-List-Included-
Indicator value. If it indicates \"All_PDP_CONTEXTS_INCLUDED\", the SGSN or
combined MME/SGSN shall delete all stored PDP-Contexts and then store all
received PDP-Contexts. Otherwise, the SGSN or combined MME/SGSN shall check
the Context-Identifier value of each received PDP-Context. If the Context-
Identifier of a received PDP-Context matches a Context-Identifier of a stored
PDP-Context, the SGSN or combined MME/SGSN shall replace the stored PDP-
Context with the received PDP-Context. If the Context-Identifier of a received
PDP-Context does not match a Context-Identifier of a stored PDP-Context, the
SGSN or combined MME/SGSN shall add the received PDP-Context to the stored
PDP-Contexts.
If the MME or SGSN receives an empty Subscription-Data AVP, it shall take no
action with regard to the stored subscription data.
When receiving HPLMN-ODB AVP within the Subscription-Data AVP, the MME or SGSN
shall replace stored HPLMN-ODB data (if any) with the received information
rather than add the received information to the stored information.
Unsupported Barring categories need not be stored.
When receiving Operator-Determined-Barring AVP within the Subscription-Data
AVP, the MME or SGSN shall replace stored ODB subscription information (if
any) with the received information rather than add the received information to
the stored information. Unsupported Barring categories need not be stored.
When receiving Access-Restriction-Data or Adjacent-Access-Restriction-Data
AVPs within the Subscription-Data AVP, the MME or SGSN shall replace the
corresponding stored information (if any) with the new received information,
rather than adding received information to stored information. The handling of
access restrictions per-PLMN is defined in 3GPP TS 23.221 [53], clause 6.3.5a.
When receiving APN-OI-Replacement AVP within the Subscription-Data AVP, the
MME or SGSN shall replace the stored information (if any) with the received
information.
When receiving Regional-Subscription-Zone-Code AVP within the Subscription-
Data AVP, the MME or SGSN shall replace stored Zone Codes (if any) with the
received information rather than add the received information to the stored
information. MMEs and SGSNs that do not support regional subscription need not
store zone codes. If due to regional subscription restrictions or access
restrictions the entire SGSN area is restricted, SGSN shall report it to the
HSS by returning the \"SGSN Area Restricted\" indication within the IDA flags.
When receiving CSG-Subscription-Data AVPs within the Subscription-Data AVP the
MME or SGSN shall replace all stored information from previously received CSG-
Subscription-Data AVPs (if any) with the received information rather than add
the received information to the stored information.
When receiving Teleservice-List AVP, Call-Barring-Info, or LCS-Info AVP, the
MME or SGSN shall replace stored information (if any) with the received
information rather than add the received information to the stored
information.
When receiving ProSe-Subscription-Data AVP, the MME or combined MME/SGSN shall
replace stored information (if any) with the received information rather than
add the received information to the stored information.
When receiving and supporting Reset-ID AVPs within the request, the MME or
SGSN shall replace stored information (if any) with received information
rather than add received information to stored information.
When receiving the IDR-Flags with the \"T-ADS Data Request\" bit set, and the
UE is in attached state, the MME or SGSN or combined MME/SGSN shall return in
the IDA message the time stamp of the UE\'s most recent radio contact and the
associated RAT Type, and an indication of whether or not IMS Voice over PS is
supported in the current (and most recently used) TA or RA. If the UE is in
detached state, the MME or SGSN or combined MME/SGSN shall answer successfully
to the T-ADS request from HSS, but it shall not include any of the T-ADS IEs
in the response (IMS Voice over PS Sessions Supported, RAT Type and Last UE
Activity Time).
When receiving the IDR-Flags with the \"EPS User State Request\" bit and/or
\"EPS Location Information Request\" bits set the MME or SGSN shall return the
corresponding user information to the HSS. If the serving node is a combined
MME/SGSN, and the UE is attached via both E-UTRAN and UTRAN/GERAN on the same
node, the combined MME/SGSN shall provide the corresponding user information
relevant for both MME and SGSN. If the Current Location Request bit was also
set and the UE is in idle mode and is expected to be reachable even when it
uses a power saving feature (e.g. extended idle mode DRX or PSM as defined in
3GPP TS 23.685 [55]), then the MME or SGSN or combined MME/SGSN shall page the
UE in order to return the most up-to-date corresponding user information. If
the Current Location Request bit was also set and either paging is
unsuccessful or the UE is not expected to be reachable, then the last known
location of the UE shall be returned to the HSS. If the Current Location
Request bit was also set and the UE (attached via E-UTRAN) is in connected
mode, then the MME or combined MME/SGSN shall use S1AP Location Reporting
Control procedure towards the eNB prior to reporting the E-UTRAN Cell Global
Identification in order to return the UE\'s most up-to-date cell information.
When the location is returned to the HSS, the MME or the combined MME/SGSN
shall provide the age of location information if stored in the MME or the
combined MME/SGSN or received from eNB.
When receiving the IDR-Flags with only the \"Current Location Request\" bit
set (i.e. the \"EPS Location Information Request\" bit is not set), the MME or
SGSN or combined MME/SGSN shall set the Result-Code to
DIAMETER_UNABLE_TO_COMPLY.
If the \"Local Time Zone Request\" bit was set the MME or SGSN if supported
shall provide the Local Time Zone corresponding to the location (e.g. TAI or
RAI) of the UE to the HSS.
If the MME or SGSN cannot fulfil the received request, e.g. due to a database
error or any of the required actions cannot be performed, it shall set the
Result-Code to DIAMETER_UNABLE_TO_COMPLY. If subscription data are received,
the MME or SGSN shall mark the subscription record \"Subscriber to be restored
in HSS\".
If trace data are received in the subscriber data, the MME or SGSN shall start
a Trace Session. For details, see 3GPP TS 32.422 [23].
If the Ext-PDP-Type AVP is present in the PDP-Context AVP, the SGSN or
combined MME/SGSN shall ignore the value of the PDP-Type AVP.
When receiving the IDR-Flags with the bit \"Remove SMS Registration\" set, the
MME shall consider itself unregistered for SMS.
If the subscription data received for a certain APN includes WLAN-
offloadability AVP, then the MME or SGSN shall determine the offloadability of
the UE's PDN Connection(s) to that APN based on subscription data and locally
configured policy (e.g. for roaming users or when the subscription data does
not include any offloadability indication).
NOTE 2: As indicated in section 7.3.31, if the UE-level access restriction
\"HO-To-Non-3GPP-Access Not Allowed\" is set, the offload of PDN Connections
to WLAN is not allowed for any APN.
When receiving the IDR-Flags with the \"P-CSCF Restoration Request\" bit set,
the MME or SGSN or combined MME/SGSN shall execute the procedures for HSS-
based P-CSCF Restoration, as described in 3GPP TS 23.380 [51] subclause 5.4.
If the subscription data received for the user includes the DL-Buffering-
Suggested-Packet-Count AVP, then the MME or SGSN should take into account the
subscription data, in addition to local policies, to determine whether to
invoke extended buffering of downlink packets at the SGW for High Latency
Communication. Otherwise, the MME or SGSN shall make this determination based
on local policies only.
When receiving IMSI-Group-Id AVP(s) within the Subscription-Data AVP, the MME
or SGSN shall replace stored IMSI-Group Ids (if any) with the received
information rather than add the received information to the stored
information.
When receiving a Monitoring-Event-Configuration in the IDR:
\- if the SCEF-Reference-ID-for-Deletion is present in the IDR, the MME or
SGSN shall stop the detection of the Monitoring event related to the SCEF-
Reference-ID-for-Deletion and SCEF-ID pair, and shall delete the corresponding
Monitoring event configuration data;
\- if the SCEF-Reference-ID is present in the IDR but not stored in the MME or
SGSN, the MME or SGSN shall store the received Monitoring event configuration
data related to the SCEF-Reference-ID and SCEF-ID pair, and shall start the
detection for the specified Monitoring event(s).
\- if the SCEF-Reference-ID is present in the IDR and stored in the MME or
SGSN, the MME or SGSN shall replace the stored Monitoring event configuration
data related to the SCEF-Reference-ID and SCEF-ID pair with the received
information.
NOTE 3: In roaming scenarios the MME/SGSN can reply immediately to the HSS
without waiting for the outcome of the interaction with the IWK-SCEF.
For the monitoring event configurations for which the configuration status
have changed since the last status informed to the HSS, the MME/SGSN shall
notify the HSS about the outcome of the interaction with the IWK-SCEF as
specified in sub-clause 5.2.5.1.2.
If the HSS indicates the support of Monitoring event feature to the MME/SGSN
and the MME/SGSN supports Monitoring, the MME/SGSN shall include the
Supported-Services AVP with Supported-Monitoring-Event included in the IDA
command.
When receiving AESE-Communication-Pattern AVP(s) within the Subscription-Data
AVP with an SCEF-Reference ID for which the MME has already stored data, it
shall delete the stored data (CP set(s)) and store the received ones.
When receiving AESE-Communication-Pattern AVP(s) within the Subscription-Data
AVP with one or more SCEF-Reference ID for deletion the MME shall delete the
data related to the indicated SCEF-Reference ID.
If the MME and the UE support an Attach without PDN connection (i.e. EMM-
REGISTERED without PDN connection) and the PDN-Connection-Restricted flag is
set in the received Subscription-Data-Flags AVP, the MME shall not establish
any non-emergency PDN connection and shall tear down any existing non-
emergency PDN connection for this user.
If the subscription data received for the user includes the Preferred-Data-
Mode AVP, for an IP APN configuration or for a non-IP APN configuration with
SGi based delivery, then the MME should (if the subscriber is not roaming) or
may (if the subscriber is roaming) take into account the subscription data, in
addition to local policies and the UE\'s Preferred Network Behaviour, to
determine whether to transmit the traffic associated with this APN over the
User Plane and/or over the Control Plane.Otherwise, the MME shall make this
determination based on local policies and the UE\'s Preferred Network
Behaviour only.
##### 5.2.2.1.3 Detailed behaviour of HSS
The HSS shall make use of this procedure to replace a specific part of the
user data stored in the MME or SGSN with the data sent, or to add a specific
part of user data to the data stored in the MME or SGSN. The HSS shall also
make use of this procedure to indicate to the MME that it is no longer
registered for SMS.
NOTE: When a Cancel Location message is required for other reasons, the use of
IDR to indicate that the MME is no longer registered for SMS is not needed
(see clause 5.2.1.2).
Subscriber-Status AVP shall be present in the Subscription-Data AVP, sent
within IDR, if the current value in the MME or SGSN needs to be changed. To
remove all Operator Determined Barring Categories the Subscriber-Status shall
be set to \"SERVICE_GRANTED\". If Subscriber-Status AVP is present and set to
OPERATOR_DETERMINED_BARRING, the Operator-Determined-Barring AVP or HPLMN-ODB
AVP shall also be present in the Subscription-Data AVP.
Access-Restriction-Data AVP shall be present within the Subscription-Data AVP
send within an IDR if the information stored in the MME or SGSN needs to be
modified.
APN-OI-Replacement AVP shall be present in the Subscription-Data AVP sent
within an IDR, if the UE level APN-OI-Replacement has been added or modified
in the HSS.
The APN-Configuration-Profile AVP shall be present in the Subscription-Data
AVP sent within an IDR if the Context-Identifier associated with the default
APN configuration is changed or at least one APN-Configuration is added or
modified by the HSS. If the default APN is changed in the HSS, the APN-
Configuration-Profile AVP shall contain the Context-Identifier associated with
the default APN and the APN-Configuration AVP for the default APN. The default
APN Configuration shall not contain the Wildcard APN (see 3GPP TS 23.003 [3],
clause 9.2); the default APN shall always contain an explicit APN.
The EPS-Subscribed-QoS-Profile AVP and the AMBR AVP shall be present in the
APN-Configuration AVP when the APN-Configuration AVP is sent in the APN-
Configuration-Profile AVP and when the APN-Configuration-Profile AVP is sent
within a IDR (as part of the Subscription-Data AVP).
If the GPRS-Subscription-Data-Indicator information has been previously
received as set in the ULR-Flags during update location procedure for the SGSN
or combined MME/SGSN, the HSS shall make use of this procedure to replace the
GPRS Subscription Data stored in the SGSN or combined MME/SGSN with the data
sent or to add a PDP-Context to the data stored in the SGSN or combined
MME/SGSN.
ProSe-Subscription-Data AVP shall be present in the Subscription-Data AVP sent
within an IDR, if the ProSe Subscription data has been added or modified in
the HSS.
If the HSS receives a message (e.g. via MAP ATM or Sh Sh-Subs-Notif) from a
Service Related Entity (e.g. IP-SM-GW) indicating that the UE is unreachable,
\- the HSS shall associate the subscription to UE reachability of the service-
related entity to the URRP-MME and the URRP-SGSN parameters (if not already
done)
\- and if the URRP-MME and/or the URRP-SGSN parameters were not already set
(i.e. at least one service-related entity already listed as subscribed), the
HSS shall
\- set the URRP-MME and/or URRP-SGSN parameters and
\- send an IDR command to the registered MME and/or to the registered SGSN
including the \"UE Reachability Request flag\" in the IDR Request Flags in
order to request the MME and/or SGSN to notify the HSS when the UE becomes
reachable again, unless the HSS knows from the previous ULR command that the
registered MME and/or the registerd SGSN do not support UE reachability
notifications.
If the IDR is sent for the only purpose to request the MME and/or SGSN about
the UE reachability status notification, the Subscription-Data AVP shall be
included empty.
If the HSS has received a message from a service related entity requesting EPS
User State and/or EPS Location Information without the Serving Node Indication
IE, the HSS shall set the \"EPS User State Request\" bit and/or \"EPS Location
Information Request\" bit respectively in the IDR-Flags. The HSS may
optionally also set the \"Current Location Request\" bit along with the \"EPS
Location Information Request\" bit in the IDR-Flags, if the most up-to-date
set of information is needed, unless the HSS knows from the previous ULR
command that the registered MME and/or the registered SGSN do not support
State/Location Information retrieval. If the IDR is sent only for the purpose
of requesting the MME or the SGSN User State or Location Information, the
Subscription-Data AVP included shall be empty.
If the HSS cannot request EPS Location Information from the MME/SGSN e.g.
because the UE is purged from the MME/SGSN, the HSS may make use of stored EPS
Location information received in a previous IDA or PUR message.
If the HSS has received a message from an AS requesting the current access
network\'s support status of \"IMS Voice over PS Sessions\", and there is no
indication about homogeneous support of IMS Voice over PS Sessions in all the
serving nodes currently registered in HSS for the UE, the HSS shall set the
\"T-ADS Data Request flag\" in the IDR Request Flags, unless the HSS knows
from the previous ULR command that the registered MME and/or the registered
SGSN do not support T-ADS data retrieval. If the IDR is sent for the only
purpose to retrieve the \"IMS Voice over PS Sessions Supported\" indication
from the MME or SGSN, the Subscription-Data AVP included shall be empty.
If the HSS has received a message from an AS requesting the Local Time Zone,
the HSS shall set the \" Local Time Zone Request\" bit in the IDR-Flags,
unless the HSS knows from the previous ULR command that the registered MME
and/or the registered SGSN do not support Local Time Zone retrieval. If the
IDR is sent only for the purpose of requesting the Local Time Zone, the
Subscription-Data AVP included shall be empty.
If the HSS received an indication in a former ULR command from the MME or SGSN
about homogeneous support of IMS Voice over PS Sessions in all TA/RAs
associated to that serving node, it may use this information to skip the
retrieval of T-ADS data. This can only be done if all the registered serving
nodes in HSS for the UE indicated in ULR the same type of homogeneous support
(i.e. both serving nodes indicated \"SUPPORTED\", or both serving nodes
indicated \"NOT_SUPPORTED\"); otherwise, the retrieval of T-ADS data shall be
done, to receive the time of the last radio contact with the UE.
All APN and PGW-ID pairs stored in the HSS not associated with an explicit APN
subscription, (i.e. the access to that APN has been authorized as a
consequence of having the Wildcard APN in the user subscription), shall be
included by the HSS inside the APN context of the Wildcard APN, as multiple
instances of the Specific-APN-Info AVP.
When receiving an Insert Subscriber Data answer with \"SGSN Area Restricted\"
the HSS shall set the SGSN area restricted flag as \"SGSN area restricted\".
Subscribed-VSRVCC AVP may be present within the Subscription-Data AVP sent
within an ISR only if the user is subscribed to the SRVCC and vSRVCC.
If the HSS determines that the MME shall be unregistered for SMS it shall set
the \"Remove SMS Registration\" bit in the IDR-Flags. If the IDR is sent for
the only purpose to indicate that the MME is no longer registered for SMS, the
Subscription-Data AVP shall be included empty.
If the HSS needs to request to the MME/SGSN the execution of the HSS-based
P-CSCF restoration procedure, as described in 3GPP TS 23.380 [51] subclause
5.4, the HSS shall set the \"P-CSCF Restoration Request\" bit in the IDR-
Flags, if supported by the MME/SGSN. If the IDR is sent only for the purpose
of requesting the execution of the HSS-based P-CSCF restoration procedures,
the Subscription-Data AVP included shall be empty.
If the HSS receives a SCEF request to configure Monitoring events for the UE
to be handled by the MME/SGSN or receives a SCEF request for deleting
Monitoring events for the UE in the MME/SGSN, the HSS shall include
Monitoring-Event-Configuration AVP(s) in the Subscription-Data AVP sent within
the IDR. If the HSS has registered both an MME and an SGSN as serving nodes
for a given user, and both nodes are not part of a same combined MME/SGSN
node, the HSS shall send the Monitoring-Event-Configuration AVP(s) to each one
of the serving nodes that supports the Monitoring event service. If the HSS
receives the IDA with Monitoring-Event-Report AVP(s), the HSS shall forward
the Monitoring-Event-Report AVP(s) to the SCEF associated to those Monitoring
events.
If the HSS receives a Supported-Services AVP it shall only trigger those
services which are supported by the MME/SGSN.
#### 5.2.2.2 Delete Subscriber Data
##### 5.2.2.2.1 General
This procedure shall be used between the MME and the HSS and between the SGSN
and the HSS, to remove some data of the HSS user profile stored in the MME or
SGSN. The procedure shall be invoked by the HSS and it corresponds to the
functional level operation Delete Subscriber Data (see 3GPP TS 23.401[2]).
It shall be used to remove:
\- all or a subset of the EPS subscription data (APN Configuration Profile)
for the subscriber from the MME or SGSN;
\- the regional subscription;
\- the subscribed charging characteristics;
\- Session Transfer Number for SRVCC;
\- trace data;
\- ProSe subscription data;
\- Reset-IDs. ;
\- UE Usage Type.
If the HSS knows that the UE has attached to the MME and SGSN parts of the
same combined MME/SGSN via both E-UTRAN and UTRAN/GERAN(refer to clause
5.2.1.1.2, 5.2.1.1.3 for further details), the HSS should invoke this
procedure for a single time to remove some or all data of the HSS user profile
stored in the combined MME/SGSN, i.e. not invoke this procedure for each of
the MME and the SGSN registered respectively.
If the Node-Type-Indicator information has been previously received as cleared
in the ULR-Flags and if the MME has not been registered for SMS during update
location procedure for the MME, the HSS may skip any removal of the SMS
related subscription data and consequently does not have to make use of the
Delete Subscriber Data procedure to update the SMS subscription data in the
MME.
This procedure is mapped to the commands Delete-Subscriber-Data-Request/Answer
(DSR/DSA) in the Diameter application specified in chapter 7.
Table 5.2.2.2.1/1 specifies the involved information elements for the request.
Table 5.2.2.2.1/2 specifies the involved information elements for the answer.
Table 5.2.2.2.1/1: Delete Subscriber Data Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | DSR Flags | DSR-Flags | M | This Information | | | | | Element shall | | (See 7.3.25) | | | contain a bit | | | | | mask. See 7.3.25 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+ | Trace Reference | Trace- Reference | C | This parameter | | | | | shall contain the | | (See 7.3.64) | | | same value as | | | | | used for the | | | | | activation of the | | | | | Trace Session. | | | | | | | | | | This element | | | | | shall be present | | | | | only if the | | | | | \"Trace Data | | | | | Withdrawal\" bit | | | | | is set in the | | | | | DSR-Flags. | +-------------------+-------------------+------+-------------------+ | Context | C | C | This parameter | | Identifier | ontext-Identifier | | shall identify | | | | | the PDN | | (See 7.3.27) | | | subscription | | | | | context or | | | | | GPRS-PDP context | | | | | that shall be | | | | | deleted. | | | | | | | | | | This element | | | | | shall be present | | | | | only if the \"PDN | | | | | subscription | | | | | contexts | | | | | Withdrawal\" bit | | | | | or the \"PDP | | | | | context | | | | | withdrawal\" bit | | | | | is set in the | | | | | DSR-Flags. In the | | | | | \"PDN | | | | | subscription | | | | | contexts | | | | | Withdrawal\" | | | | | case, the | | | | | C | | | | | ontext-Identifier | | | | | shall not be | | | | | associated with | | | | | the default APN | | | | | configuration. | | | | | | | | | | For the | | | | | compatibility | | | | | with the MAP | | | | | protocol as | | | | | defined in the | | | | | 3GPP TS 29.002 | | | | | [24], this | | | | | parameter shall | | | | | not have a value | | | | | of zero. | +-------------------+-------------------+------+-------------------+ | TS Code List | TS-Code | C | This parameter | | | | | shall contain the | | (See 7.3.100) | | | teleservice codes | | | | | that are to be | | | | | deleted from the | | | | | subscription. | | | | | | | | | | This element | | | | | shall be present | | | | | only if the \"SMS | | | | | Withdrawal\" bit | | | | | is set in the | | | | | DSR-Flags and the | | | | | SMS related | | | | | teleservice codes | | | | | are to be | | | | | deleted. | +-------------------+-------------------+------+-------------------+ | SS Code List | SS-Code | C | This parameter | | | | | shall contain the | | (See 7.3.87) | | | supplementary | | | | | service codes | | | | | that are to be | | | | | deleted from the | | | | | subscription. | | | | | | | | | | This element | | | | | shall be present | | | | | only if the \"SMS | | | | | Withdrawal\" bit | | | | | is set or the | | | | | \"LCS | | | | | Withdrawal\" bit | | | | | is set in the | | | | | DSR-Flags. | +-------------------+-------------------+------+-------------------+ | SCEF-Id | SCEF-ID | C | This parameter | | | | | shall contain the | | (See 3GPP TS | | | identity of the | | 29.336 [54]) | | | SCEF to which | | | | | monitoring events | | | | | that are to be | | | | | deleted are | | | | | associated. | | | | | | | | | | This element | | | | | shall be present | | | | | if the \"Delete | | | | | monitoring | | | | | events\" bit is | | | | | set in the | | | | | DSR-Flags. | +-------------------+-------------------+------+-------------------+
Table 5.2.2.2.1/2: Delete Subscriber Data Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+ | DSA Flags | DSA-Flags | C | This Information | | | | | Element shall | | (See 7.3.26) | | | contain a bit | | | | | mask. See 7.3.26 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+
##### 5.2.2.2.2 Detailed behaviour of the MME and the SGSN
When receiving a Delete Subscriber Data request, the MME or SGSN shall check
whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known, but the Context-Identifier is associated with the default APN
configuration, the MME shall not delete the PDN subscription context, and
return an error with a Result-Code set to DIAMETER_UNABLE_TO_COMPLY.
Otherwise, the MME or SGSN shall delete the corresponding data according to
the indication as sent in the request, and acknowledge the Delete Subscriber
Data message by returning a Delete Subscriber Data Answer.
If an MME receives a Delete Subscriber Data Request with the \"Complete APN
Configuration Profile Withdrawal\" bit set in the DSR-Flags AVP, it shall
return an error with a Result-Code set to DIAMETER_UNABLE_TO_COMPLY.
If the deletion of the subscription data succeeds in the MME or SGSN, the
Result-Code shall be set to DIAMETER_SUCCESS.
If the Regional Subscription is deleted from the subscription data, the SGSN
shall check for its routing areas whether they are allowed or not. If the
entire SGSN area is restricted, SGSN shall report it to the HSS by returning
the \"SGSN Area Restricted\" indication within the DSA flags.
If the EPS Subscription Data is deleted from the subscription data, the MME or
SGSN shall check whether all EPS Subscription Data for the subscriber is
deleted or if only a subset of the stored EPS Subscription Data for the
subscriber is deleted, the MME or SGSN may then deactivate the associated
affected active EPS bearers.
If the Subscribed Charging Characteristics are deleted from the subscription
data, the Gn/Gp-SGSN shall maintain the existing Subscribed Charging
Characteristics throughout the lifetime of the existing MM and PDP contexts,
see 3GPP TS 32.251 [33].
If the Subscribed Charging Characteristics are deleted from the subscription
data, the MME or S4-SGSN shall maintain the existing Subscribed Charging
Characteristics throughout the lifetime of the existing IP CAN bearer, see
3GPP TS 32.251 [33].
If the MME or SGSN cannot fulfil the received request for other reasons, e.g.
due to a database error, it shall set the Result-Code to
DIAMETER_UNABLE_TO_COMPLY. In this case, the MME or SGSN shall mark the
subscription record \"Subscriber to be restored in HSS\".
If trace data are deleted from the subscription data, the MME or SGSN shall
deactivate the Trace Session identified by the trace reference. For details,
see 3GPP TS 32.422 [23].
##### 5.2.2.2.3 Detailed behaviour of the HSS
The HSS shall make use of this procedure to remove deleted subscription data
from the MME or SGSN.
The HSS shall make use of this procedure to remove deleted GPRS Subscription
Data from the SGSN or combined MME/SGSN if the GPRS-Subscription-Data-
Indicator information has been previously received as set in the ULR-Flags
during update location procedure for the MME.
The HSS shall not set the \"Complete APN Configuration Profile Withdrawal\"
bit in the DSR-Flags AVP when sending a Delete Subscriber Data Request to an
MME, since the default APN shall always be present in an MME.
When receiving a Delete Subscriber Data Answer with \"SGSN Area Restricted\"
the HSS shall set the SGSN area restricted flag as \"SGSN area restricted\".
### 5.2.3 Authentication Procedures
#### 5.2.3.1 Authentication Information Retrieval
##### 5.2.3.1.1 General
The Authentication Information Retrieval Procedure shall be used by the MME
and by the SGSN to request Authentication Information from the HSS.
This procedure is mapped to the commands Authentication-Information-
Request/Answer (AIR/AIA) in the Diameter application specified in chapter 7.
Table 5.2.3.1.1/1 specifies the involved information elements for the request.
Table 5.2.3.1.1/2 specifies the involved information elements for the answer.
Table 5.2.3.1.1/1: Authentication Information Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Requested E-UTRAN | Re | C | This information | | Authentication | quested-EUTRAN-Au | | element shall | | Info | thentication-Info | | contain the | | | | | information | | (See 7.3.11) | | | related to | | | | | authentication | | | | | requests for | | | | | E-UTRAN. | +-------------------+-------------------+------+-------------------+ | Requested | Requ | C | This information | | UTRAN/GERAN | ested-UTRAN-GERAN | | element shall | | Authentication | Au | | contain the | | Info | thentication-Info | | information | | | | | related to | | (See 7.3.12) | | | authentication | | | | | requests for | | | | | UTRAN or GERAN. | +-------------------+-------------------+------+-------------------+ | Visited PLMN ID | Visited-PLMN-ID | M | This IE shall | | | | | contain the MCC | | (See 7.3.9) | | | and the MNC of | | | | | the visited PLMN, | | | | | see 3GPP TS | | | | | 23.003 [3]. | +-------------------+-------------------+------+-------------------+ | AIR Flags | AIR-Flags | O | This IE, if | | | | | present, contains | | (See 7.3.201) | | | a bit mask. See | | | | | subclause 7.3.201 | | | | | for the meaning | | | | | of the different | | | | | bits. | +-------------------+-------------------+------+-------------------+
Table 5.2.3.1.1/2: Authentication Information Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | This IE shall | | | | | contain the | | | | | Result-Code AVP | | | | | shall be used to | | | | | indicate success | | | | | / errors as | | | | | defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown | | | | | | | | | | - Unknown EPS | | | | | Subscription | | | | | | | | | | - Authentication | | | | | Data Unavailable | +-------------------+-------------------+------+-------------------+ | Error-Diagnostic | Error-Diagnostic | O | If the | | | | | Experimental | | | | | Result indicated | | | | | \"Unknown EPS | | | | | Subscription\", | | | | | Error Diagnostic | | | | | may be present to | | | | | indicate whether | | | | | or not GPRS | | | | | subscription data | | | | | are subscribed | | | | | (i.e. whether or | | | | | not Network | | | | | Access Mode | | | | | stored in the HSS | | | | | indicates that | | | | | only CS service | | | | | is allowed). | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Authentication | Au | C | This IE shall | | Info | thentication-Info | | contain the | | | | | Authentication | | (See 7.3.17) | | | Vectors. | +-------------------+-------------------+------+-------------------+ | UE Usage Type | UE-Usage-Type | C | This IE shall be | | | | | present if the | | (See 7.3.202) | | | HSS supports the | | | | | Dedicated Core | | | | | Networks feature, | | | | | and the \"Send UE | | | | | Usage Type\" flag | | | | | was set in the | | | | | AIR-Flags AVP in | | | | | the AIR command, | | | | | and this | | | | | information is | | | | | available in the | | | | | user | | | | | subscription. | | | | | | | | | | If present, this | | | | | IE shall contain | | | | | the UE Usage Type | | | | | of the subscriber | | | | | (see subclause | | | | | 7.3.202). | +-------------------+-------------------+------+-------------------+
##### 5.2.3.1.2 Detailed behaviour of the MME and the SGSN
The MME or SGSN shall make use of this procedure in order to retrieve the
Authentication Vectors from the HSS.
If the MME or SGSN supports Emergency services for users in limited service
state, and the user\'s IMSI is not available from the UE, or the user\'s IMSI
is marked as unauthenticated, the MME or SGSN shall not make use of the
Authentication Information Retrieval procedure.
If the request is triggered by a synchronization failure during E-UTRAN
authentication, the MME or combined MME/SGSN shall include the Re-
Synchronization Information in the Requested-EUTRAN-Authentication-Info AVP in
the request.
If the request is triggered by a synchronization failure during UTRAN or GERAN
authentication, the SGSN or combined MME/SGSN shall include the Re-
Synchronization Information in the Requested-UTRAN-GERAN-Authentication-Info
AVP in the request.
Re-Synchronization Information shall not be present in both the Requested-
EUTRAN-Authentication-Info AVP and the Requested-UTRAN-GERAN-Authentication-
Info AVP.
A stand alone MME shall include the Requested-EUTRAN-Authentication-Info AVP
and shall not include the Requested-UTRAN-GERAN-Authentication-Info AVP in the
request. The Immediate-Response-Preferred AVP should be present if a EUTRAN-
Vector is needed for immediate use.
A stand alone SGSN shall not include the Requested-EUTRAN-Authentication-Info
AVP and shall include the Requested-UTRAN-GERAN-Authentication-Info AVP in the
request. The Immediate-Response-Preferred AVP should be present if a
UTRAN/GERAN-Vector is needed for immediate use.
A combined MME/SGSN may include both the Requested-EUTRAN-Authentication-Info
AVP and the Requested-UTRAN-GERAN-Authentication-Info AVP in the request. If
both the Requested-EUTRAN-Authentication-Info AVP and the Requested-UTRAN-
GERAN-Authentication-Info AVP are present in the request, the Immediate-
Response-Preferred AVP shall be present if the requested authentication
vectors are needed for immediate use. The content of the Immediate-Response-
Preferred AVP shall correspond to the access type which the UE is currently to
be authenticated. The Immediate-Response-Preferred AVP shall not be present in
both the Requested-EUTRAN-Authentication-Info AVP and the Requested-UTRAN-
GERAN-Authentication-Info AVP. The presence of an Immediate-Response-Preferred
AVP shall indicate that a vector is needed for immediate use.
When EUTRAN-AVs and UTRAN-AVs or GERAN-AVs are requested, presence of
Immediate-Response-Preferred AVP within the Requested-EUTRAN-Authentication-
Info AVP shall indicate that EUTRAN-AVs are requested for immediate use in the
MME/SGSN; presence of Immediate-Response-Preferred AVP within the Requested-
UTRAN-GERAN-Authentication-Info AVP shall indicate that UTRAN-AVs or GERAN-AVs
are requested for immediate use in the MME/SGSN. It may be used by the HSS to
determine the number of vectors to be obtained from the AuC and the number of
vectors downloaded to the MME or SGSN.
If the MME or SGSN supports the Dedicated Core Networks functionality, and the
MME or SGSN needs to retrieve the UE Usage Type from the HSS, it shall set the
\"Send UE Usage Type\" flag in the AIR-Flags AVP in the AIR command.
When receiving an Authentication Information response from the HSS, the MME or
SGSN shall check the Result Code. If it indicates success and Authentication
Information is present in the result, the MME or SGSN shall use the received
vectors. For details see 3GPP TS 33.401 [5].
If the MME or SGSN supports Emergency services for users in limited service
state, the MME or SGSN shall proceed even if the Authentication Information
Retrieval procedure has failed. In this case, the MME or SGSN shall mark the
user\'s IMSI as unauthenticated.
Vectors with lower Item Number should be used before Vectors with higher Item
Number are used in the MME or SGSN. For Vectors received within different
requests those received by the earlier request should be used before those
received by the later request.
##### 5.2.3.1.3 Detailed behaviour of the HSS
When receiving an Authentication Information request the HSS shall check
whether subscription data exists for the IMSI.
If the HSS determines that there is not any type of subscription for the IMSI
(including EPS, GPRS and CS subscription data), a result code of
DIAMETER_ERROR_USER_UNKNOWN shall be returned.
If the Authentication Information Request contains a Requested-EUTRAN-
Authentication-Info AVP but no Requested-UTRAN-GERAN-Authentication-Info AVP,
and the subscriber has not any APN configuration, the HSS shall return a
Result Code of DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
If the Authentication Information Request contains a Requested-UTRAN-GERAN-
Authentication-Info AVP but no Requested-EUTRAN-Authentication-Info AVP, and
the subscriber has neither an APN configuration profile nor GPRS subscription
data, the HSS shall return a Result Code of
DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
If the Authentication Information Request contains both Requested-EUTRAN-
Authentication-Info AVP and Requested-UTRAN-GERAN-Authentication-Info AVP, and
the Requested-EUTRAN-Authentication-Info AVP does not contain an Immediate-
Response-Preferred AVP, and the subscriber has not any APN configuration, the
HSS shall not return E-UTRAN vectors.
If the Authentication Information Request contains both Requested-EUTRAN-
Authentication-Info AVP and Requested-UTRAN-GERAN-Authentication-Info AVP, and
the Requested-EUTRAN-Authentication-Info AVP contains an Immediate-Response-
Preferred AVP, and the subscriber does not have any APN configuration, the HSS
shall return a Result Code of DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION.
When sending DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION, an Error Diagnostic
information may be added to indicate whether or not GPRS subscription data are
subscribed (i.e. whether or not Network Access Mode stored in the HSS
indicates that only circuit service is allowed).
If EUTRAN-Authentication-Info is requested, the HSS shall check if serving
nodes within the realm identified by the received Origin-Realm AVP are allowed
to request authentication information for use in the serving network
identified by the received Visited-PLMN-Id AVP.
The HSS shall then request the AuC to generate the corresponding requested
Authentication Vectors (AVs). Subject to load considerations and/or other
implementation specific considerations which may be based on the presence of
an Immediate-Response-Preferred AVP, less AVs than the requested number of AVs
may be generated.
If EUTRAN-Authentication-Info is requested, when receiving AVs from the AuC,
the HSS shall generate the KASME before sending the response to the MME or
combined MME-SGSN.
If the AuC is unable to calculate any corresponding AVs due to unallowed
attachment for the UE, e.g. the UE is attaching via E-UTRAN with a SIM card
equipped, the HSS shall return an error DIAMETER_AUTHORIZATION_REJECTED, the
HSS shall not return any AV to the requesting node in the response. Otherwise,
if no corresponding pre-computed AV is available, and the AuC is unable to
calculate any corresponding AVs due to unknown failures, such as the internal
database error, the result code shall be set to
DIAMETER_AUTHENTICATION_DATA_UNAVAILABLE. The MME or the SGSN may request
authentication vectors again.
For details see 3GPP TS 33.401 [5]. KASME generation is not performed before
sending the response to the SGSN.
If the Requested-EUTRAN-Authentication-Info AVP is present in the request, the
HSS shall download E-UTRAN authentication vectors to the MME. If the
Requested-UTRAN-GERAN-Authentication-Info AVP is present in the request, the
HSS shall download UTRAN or GERAN authentication vectors to the SGSN.
If the Immediate Response Preferred parameter has been received, the HSS may
use it together with the number of requested vectors and the number of vectors
stored in the HSS that are pre-computed to determine the number of vectors to
be obtained from the AuC. The HSS may return less number of vectors than
requested to the MME or SGSN. If both the Requested-EUTRAN-Authentication-Info
AVP and the Requested-UTRAN-GERAN-Authentication-Info AVP are in the request,
and one of them includes the Immediate Response Preferred parameter, the HSS
may omit the vectors request that are not for immediate use. If both the
Requested-EUTRAN-Authentication-Info AVP and the Requested-UTRAN-GERAN-
Authentication-Info AVP are in the request, and both of them includes the
Immediate Response Preferred parameter, the HSS may return E-UTRAN
authentication vectors and UTRAN or GERAN authentication vectors. KASME is
always computed for each E-UTRAN vector due to the PLMN-binding before sending
the response to the MME independent of the presence of the Immediate Response
Preferred parameter.
If the Re-Synchronization-Info AVP has been received, the HSS shall check the
AUTS parameter before sending new authentication vectors to the MME or the
SGSN. For details see 3GPP TS 33.102 [18]. If both the Requested-EUTRAN-
Authentication-Info AVP and the Requested-UTRAN-GERAN-Authentication-Info AVP
are in the request, and both of them include the Re-Synchronization-Info AVP,
the HSS shall not check the AUTS parameter and return the result code of
DIAMETER_UNABLE_TO_COMPLY. Any authentication vectors shall not be sent by the
HSS to the requesting node in the response.
If more than one EPS or UTRAN or GERAN Vector is to be included within one
Authentication-Info AVP, the Item-Number AVP shall be present within each
Vector.
If the HSS supports the Dedicated Core Networks functionality, and the MME or
SGSN has set the \"Send UE Usage Type\" flag in the AIR-Flags AVP in the AIR
command:
\- if the UE Usage Type value is available in the subscription data of the
user:
\- if the Immediate Response Preferred parameter is not present in the
Requested-EUTRAN-Authentication-Info nor in the Requested-UTRAN-GERAN-
Authentication-Info, the HSS may return no authentication vectors in the
response; the HSS shall then return the result code DIAMETER_SUCCESS and may
return the generated AVs (if any) to the MME or SGSN;
\- the HSS shall include the UE-Usage-Type AVP in the AIA response command if
the result code is DIAMETER_SUCCESS or
DIAMETER_AUTHENTICATION_DATA_UNAVAILABLE.
\- if the UE Usage Type value is not available in the subscription data of the
user, the HSS shall answer as if the MME/SGSN had not requested the UE Usage
Type parameter.
### 5.2.4 Fault Recovery Procedures
#### 5.2.4.1 Reset
##### 5.2.4.1.1 General
The Reset Procedure shall be used by the HSS, after a restart, to indicate to
the MME and to the SGSN that a failure has occurred.
The Reset Procedure may also be used by the HSS as part of operation and
maintenance actions e.g. to allow planned HSS outage without service
interruption.
This procedure is mapped to the commands Reset-Request/Answer (RSR/RSA) in the
Diameter application specified in chapter 7.
Table 5.2.4.1.1/1 specifies the involved information elements for the request.
Table 5.2.4.1.1/2 specifies the involved information elements for the answer.
Table 5.2.4.1.1/1: Reset Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | User Id List | User-Id | O | This IE shall | | | | | contain a list of | | (See 7.3.50) | | | User-Ids where a | | | | | User-Id comprises | | | | | the leading | | | | | digits of an IMSI | | | | | (i.e. MCC, MNC, | | | | | leading digits of | | | | | MSIN) and it | | | | | shall identify | | | | | the set of | | | | | subscribers whose | | | | | IMSIs begin with | | | | | the User-Id. The | | | | | HSS may include | | | | | this information | | | | | element if the | | | | | occurred failure | | | | | is limited to | | | | | subscribers | | | | | identified by one | | | | | or more User-Ids. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Reset-IDs | Reset-ID | O | If present, this | | | | | information | | (See 7.3.184) | | | element | | | | | identifies the | | | | | set of impacted | | | | | subscribers. | +-------------------+-------------------+------+-------------------+
Table 5.2.4.1.1/2: Reset Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | There are no | | | | | Ex | | | | | perimental-Result | | | | | codes applicable | | | | | for this command. | +-------------------+-------------------+------+-------------------+
##### 5.2.4.1.2 Detailed behaviour of the MME and the SGSN
When receiving a Reset message the MME or SGSN or combined MME/SGSN shall mark
all impacted subscriber records \" Location Information Confirmed in HSS \" as
\"Not Confirmed\". If the Reset-IDs IE is supported and received, the MME or
SGSN or combined MME/SGSN shall make use of the Reset-IDs (together with the
HSS\'s realm) in order to determine which subscriber records are impacted
(i.e. check whether at least one received Reset-ID is associated with the
subscriber); otherwise the MME or SGSN or combined MME/SGSN shall make use of
the HSS Identity received in the Origin-Host AVP (by comparing it with the
value stored after successful ULA) and may make use of the received User-Id-
List (if any) in order to determine which subscriber records are impacted.
At the next authenticated radio contact with the UE concerned, if the
subscriber record \"Location Information Confirmed in HSS\" is marked as \"Not
Confirmed\", the restoration procedure shall be triggered.
See also 3GPP TS 29.118 [46] clause 5.9.2.
##### 5.2.4.1.3 Detailed behaviour of the HSS
The HSS shall make use of this procedure in order to indicate to all relevant
MMEs, SGSN, and combined MME/SGSNs that the HSS has restarted and may have
lost the current MME-Identity and SGSN-Identity of some of its subscribers who
may be currently roaming in the MME area and/or SGSN area, and that the HSS,
therefore, cannot send a Cancel Location messages or Insert Subscriber Data
messages when needed.
If the Reset-ID feature is not supported by the MME/SGSN and HSS, the HSS
optionally may include a list of Ids identifying a subset of subscribers
served by the HSS, if the occurred failure is limited to those subscribers.
If the Reset-ID feature is supported by the MME or SGSN, the HSS optionally
may include one (or several) Reset-ID AVPs identifying e.g. failed hardware
components if the occured failure is limited to those subscribers associated
with e.g. the identified failed hardware components.
The HSS should invoke this procedure towards a combined MME/SGSN only for a
single time even if some of the impacted subscribers are attached to the
combined MME/SGSN via UTRAN/GERAN and some of the impacted subscribers are
attached to the combined MME/SGSN via E-UTRAN.
### 5.2.5 Notification Procedures
#### 5.2.5.1 Notification
##### 5.2.5.1.1 General
The Notification Procedure shall be used between the MME and the HSS and
between the SGSN and the HSS when an inter MME or SGSN location update does
not occur but the HSS needs to be notified about
\- an update of terminal information;
\- an update of the UE SRVCC capability (only if the MME/SGSN supports SRVCC).
The Notification Procedure shall also be used between the MME and the HSS and
between the SGSN and the HSS if the HSS needs to be notified about:
\- an assignment/change of a dynamically allocated PDN GW for an APN, if such
a notification is needed taking into account the access restrictions;
\- the status of the monitoring event configuration at the IWK-SCEF.
The Notification Procedure shall be used between the MME and the HSS when an
inter MME location update does not occur but the HSS needs to be notified
about
\- the need to send a Cancel Location to the current SGSN.
The Notification Procedure shall be used between the MME and the HSS when the
\"SMS in MME\" feature is applied and between the SGSN and the HSS when an
earlier short message delivery failed and the HSS needs to be notified about:
\- the UE is reachable or the UE has memory capacity available to receive one
or more short messages.
The Notification Procedure shall be used between the MME and the HSS and
between the SGSN and the HSS when the HSS has requested to be notified about:
\- the UE is reachable.
The Notification Procedure shall be used between the MME and the HSS and
between the SGSN and the HSS to notify the HSS about:
\- an update of the Homogeneous Support of IMS Voice Over PS Sessions.
The Notification Procedure shall be used between the MME and the HSS to notify
the HSS about:
\- removal of MME registration for SMS.
This procedure is mapped to the commands Notify-Request/Answer (NOR/NOA) in
the Diameter application specified in chapter 7.
Table 5.2.5.1.1/1 specifies the involved information elements for the request.
Table 5.2.5.1.1/2 specifies the involved information elements for the answer.
Table 5.2.5.1.1/1: Notify Request
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+ | Terminal | Ter | C | This information | | Information | minal-Information | | element shall | | | | | contain | | (See 7.3.3) | | | information about | | | | | the user's mobile | | | | | equipment. | | | | | | | | | | When notifying | | | | | the HSS about any | | | | | change of | | | | | Terminal | | | | | Information, the | | | | | MME or SGSN shall | | | | | include the new | | | | | Terminal | | | | | Information in | | | | | the request. | | | | | | | | | | Within this | | | | | Information | | | | | Element, only the | | | | | IMEI and the | | | | | Software-Version | | | | | AVPs shall be | | | | | used on the | | | | | S6a/S6d | | | | | interface. | +-------------------+-------------------+-------+-------------------+ | PDN GW Identity | MIP6-Agent-Info | C | This IE shall | | | | | contain the | | (See 7.3.45) | | | identity of the | | | | | selected and | | | | | dynamically | | | | | allocated PDN GW | | | | | for an APN. It | | | | | shall be present | | | | | if a new PDN-GW | | | | | has been selected | | | | | and the | | | | | subscriber is | | | | | allowed handover | | | | | to non 3GPP | | | | | access. | | | | | | | | | | When notifying | | | | | the HSS about a | | | | | newly selected | | | | | PDN GW, the MME | | | | | or SGSN shall | | | | | include the | | | | | PDN-GW-Identity | | | | | in the request. | +-------------------+-------------------+-------+-------------------+ | PGW PLMN ID | Visited-N | C | This IE | | | etwork-Identifier | | identifies the | | | | | PLMN in which the | | | | | PDN GW is | | | | | located. It shall | | | | | be present when | | | | | the PDN GW | | | | | Identity is | | | | | present and does | | | | | not contain an | | | | | FQDN. | +-------------------+-------------------+-------+-------------------+ | Context | C | O | This parameter | | Identifier | ontext-Identifier | | shall identify | | | | | the APN | | (See 7.3.27) | | | Configuration | | | | | with which the | | | | | selected PDN GW | | | | | shall be | | | | | correlated. | | | | | | | | | | It may be present | | | | | if it is | | | | | available and the | | | | | PDN-GW is present | | | | | and is particular | | | | | for one specific | | | | | APN and not | | | | | common to all the | | | | | APNs. | | | | | | | | | | For the | | | | | compatibility | | | | | with the MAP | | | | | protocol as | | | | | defined in the | | | | | 3GPP TS 29.002 | | | | | [24], this | | | | | parameter shall | | | | | not have a value | | | | | of zero. | +-------------------+-------------------+-------+-------------------+ | APN | S | C | This IE shall | | | ervice-Selection\ | | contain the APN | | (See TS 23.008 | (See IETF RFC | | for the selected | | [30]) | 5778 [20]) | | and dynamically | | | | | allocated PDN GW. | | | | | It shall be | | | | | present if the | | | | | selected PDN-GW | | | | | is present and is | | | | | particular for | | | | | one specific APN | | | | | and not common to | | | | | all the APNs. | +-------------------+-------------------+-------+-------------------+ | Alert Reason | Alert-Reason | C | This parameter | | | | | shall indicate if | | (See 7.3.83) | | | the mobile | | | | | subscriber is | | | | | present or the MS | | | | | has memory | | | | | available. | | | | | | | | | | It shall be | | | | | present when | | | | | notifying the HSS | | | | | about the | | | | | presence of the | | | | | UE or the UE has | | | | | memory capacity | | | | | available to | | | | | receive one or | | | | | more short | | | | | messages. | +-------------------+-------------------+-------+-------------------+ | UE SRVCC | UE | C | This information | | Capability | -SRVCC-Capability | | element shall | | | | | indicate if the | | | | | UE supports or | | | | | does not support | | | | | the SRVCC | | | | | capability. | | | | | | | | | | If the MME/SGSN | | | | | supports SRVCC | | | | | and the UE SRVCC | | | | | Capability has | | | | | changed, the MME | | | | | or SGSN shall | | | | | include the new | | | | | UE SRVCC | | | | | Capability in the | | | | | request. | +-------------------+-------------------+-------+-------------------+ | NOR Flags | NOR-Flags | C | This Information | | | | | Element shall | | (See 7.3.49) | | | contain a bit | | | | | mask. See 7.3.49 | | | | | for the meaning | | | | | of the bits. | | | | | Absence of this | | | | | information | | | | | element shall be | | | | | interpreted as | | | | | all bits set to | | | | | 0. | | | | | | | | | | When notifying | | | | | the HSS about the | | | | | need to send | | | | | cancel location | | | | | to the current | | | | | SGSN, the MME | | | | | shall set the | | | | | \"Single-Registra | | | | | tion-Indication\" | | | | | flag in the | | | | | NOR-Flags. | | | | | | | | | | When notifying | | | | | the HSS about the | | | | | \"restricted\" | | | | | status of the | | | | | current SGSN | | | | | area, the SGSN | | | | | shall set the | | | | | \"SGSN area | | | | | restricted\" flag | | | | | in the NOR-Flags. | | | | | When notifying | | | | | the HSS about the | | | | | reachability of | | | | | the UE or the UE | | | | | has memory | | | | | capacity | | | | | available to | | | | | receive one or | | | | | more short | | | | | messages, the | | | | | MME, if the \"SMS | | | | | in MME\" feature | | | | | is applied, or | | | | | SGSN shall set | | | | | the \"Ready for | | | | | SM\" flag | | | | | correspondingly | | | | | in the NOR-Flags. | | | | | | | | | | When notifying | | | | | the HSS that the | | | | | UE is reachable, | | | | | the MME or SGSN | | | | | shall set the | | | | | \"UE Reachable\" | | | | | flag | | | | | correspondingly | | | | | in the NOR-Flags. | | | | | | | | | | When notifying | | | | | the HSS about | | | | | update of the | | | | | Homogeneous | | | | | Support of IMS | | | | | Voice Over PS | | | | | Sessions, the MME | | | | | or the SGSN shall | | | | | set the | | | | | \"Homogeneous | | | | | Support of IMS | | | | | Voice Over PS | | | | | Sessions\" flag | | | | | and | | | | | S6a/S6d-Indicator | | | | | flag for a | | | | | combined MME/SGSN | | | | | correspondingly | | | | | in the NOR-Flags. | | | | | | | | | | When notifying | | | | | the HSS about | | | | | removal of MME | | | | | registration for | | | | | SMS, the MME | | | | | shall set the | | | | | \"Removal of MME | | | | | Registration for | | | | | SMS\" flag | | | | | correspondingly | | | | | in the NOR-Flags. | +-------------------+-------------------+-------+-------------------+ | Homogeneous | Homogeneous-Sup | C | This Information | | Support of IMS | port-of-IMS-Voice | | Element shall be | | Voice Over PS | -Over-PS-Sessions | | present if | | Sessions\ | | | Homogeneous | | (See 7.3.107) | | | Support of IMS | | | | | Voice Over PS | | | | | Sessions is | | | | | modified to one | | | | | of the values | | | | | \"SUPPORTED\" or | | | | | \" | | | | | NOT_SUPPORTED\". | | | | | | | | | | The value | | | | | \"SUPPORTED\" | | | | | indicates that | | | | | there is support | | | | | for \"IMS Voice | | | | | over PS | | | | | Sessions\" in all | | | | | TAs or RAs. | | | | | | | | | | The value | | | | | \ | | | | | "NOT_SUPPORTED\" | | | | | indicates that | | | | | there is not | | | | | support for \"IMS | | | | | Voice over PS | | | | | Sessions\" in any | | | | | of the TAs or | | | | | RAs. | +-------------------+-------------------+-------+-------------------+ | Maximum UE | Maximum-UE- | **O** | This information | | Availability Time | Availability-Time | | element may be | | | | | included when | | | | | notifying the HSS | | | | | that the UE is | | | | | reachable. When | | | | | present, it shall | | | | | indicate the | | | | | timestamp (in | | | | | UTC) until which | | | | | a UE using a | | | | | power saving | | | | | mechanism (such | | | | | as extended idle | | | | | mode DRX) is | | | | | expected to be | | | | | reachable for SM | | | | | Delivery. | | | | | | | | | | This information | | | | | may be used by | | | | | the SMS Center to | | | | | prioritize the | | | | | retransmission of | | | | | Short Message to | | | | | UEs using a power | | | | | saving mechanism. | +-------------------+-------------------+-------+-------------------+ | Monitoring Event | Monitoring-Ev | **C** | This information | | Config Status | ent-Config-Status | | element shall be | | | | | present if the | | | | | MME/SGSN sends | | | | | the Notify | | | | | Request after | | | | | receiving the | | | | | Configuration-I | | | | | nformation-Answer | | | | | from the | | | | | IWK-SCEF. This | | | | | information | | | | | element shall | | | | | only contain the | | | | | monitoring event | | | | | configuration | | | | | status of those | | | | | events whose | | | | | configuration | | | | | status has | | | | | changed since the | | | | | last status | | | | | informed to the | | | | | HSS. | +-------------------+-------------------+-------+-------------------+
Table 5.2.5.1.1/2: Notify Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S6a/S6d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+
##### 5.2.5.1.2 Detailed behaviour of the MME and the SGSN
If the MME or SGSN supports Emergency services, the MME or SGSN shall not make
use of the Notification procedure for emergency attached UEs.
The MME or SGSN shall include conditional AVPs in NOR according to the
description given in table 5.2.5.1.1/1.
If the MME sends a Notify Request to inform the HSS that the UE has become
reachable again, the MME shall clear the corresponding URRP-MME for the UE.
If the SGSN sends a Notify Request to inform the HSS that the UE has become
reachable again, the SGSN shall clear the corresponding URRP-SGSN for the UE.
If the MME sends a Notify Request to inform the HSS about the presence of the
UE to receive one or more short messages, the MME shall clear the
corresponding MNRF for the UE.
If the SGSN sends a Notify Request to inform the HSS about the presence of the
UE to receive one or more short messages, the SGSN shall clear the
corresponding MNRG for the UE.
If the MME or the SGSN determines that it needs to update the Homogeneous
Support of IMS Voice Over PS Sessions in the HSS, the MME or the SGSN shall
send a Notify Request with the updated Homogeneous Support of IMS Voice Over
PS Sessions to the HSS. MME or SGSN shall ensure the status of Homogeneous
Support of IMS Voice Sessions in HSS does not contradict with the value of
\"IMS voice over PS session indicator\" provided to UE over NAS as specified
in 3GPP TS 24.008 [31] and 3GPP TS 24.301 [64];\ if \"IMS voice over PS
session indicator\" sent to UE has changed from \"not supported\" to
\"supported\" when status Homogenous Support of IMS Voice in HSS is \"not
supported\", MME or SGSN shall immediately send Notify Request indicating as
either homogenous support or not homogeneous;\ if \"IMS voice over PS session
indicator\" sent to UE has changed from \"supported\" to \"not supported\"
when status Homogenous Support of IMS Voice in HSS is \"supported\", MME or
SGSN shall immediately send Notify Request indicating as either homogenous
non-support or not homogeneous.
If the MME needs to indicate to the HSS that it is no longer registered for
SMS in the HSS, the MME shall send a Notify Request with \"Removal of MME
Registration for SMS\" flag set in the NOR-Flags AVP.
When receiving a Notify response from the HSS, if the result code indicates
DIAMETER_ERROR_UNKNOWN_SERVING_NODE, the MME or SGSN shall consider the
Notification procedure as failed, and it shall mark the subscriber record as
\"Subscriber to be restored in HSS\".
When receiving a Notify response from the HSS, if the result code indicates
DIAMETER_ERROR_USER_UNKNOWN, the MME or SGSN shall detach the subscriber and
remove the subscriber from its database.
When the MME/SGSN has received the Configuration-Information-Answer from the
IWK-SCEF during the monitoring event configuration procedure, the MME/SGSN
shall send the Notify Request command with the Monitoring-Event-Config-Status
AVP as received from the IWK-SCEF in the Configuration-Information-Answer, for
the monitoring event configurations whose status have changed since last
informed to the HSS.
NOTE 1: If the Monitoring-Event-Configuration was received at the MME/SGSN in
the ULA command, then the HSS is not yet informed of any status of the
monitoring event configuration. In this case, the entire Monitoring-Event-
Config-Status as received from IWK-SCEF has to be transferred to the HSS
through a Notify Request Command.
##### 5.2.5.1.3 Detailed behaviour of the HSS
When receiving a Notify request the HSS shall check whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If the IMSI is known, and the source MME or SGSN originating the Notify
message is not currently registered in HSS for that UE, a result code of
DIAMETER_ ERROR_ UNKNOWN_SERVING_NODE shall be returned.
If the IMSI is known, and the source MME or SGSN is currently registered in
HSS, the HSS shall set the result code to DIAMETER_SUCCESS, unless otherwise
stated, and
\- store the new terminal information if present in the request;
\- store the new UE SRVCC capability if present in the request;
\- store the new PDN GW and PLMN ID for an APN if present in the request and
the APN is present in the subscription and if PDN GW is dynamically allocated;
otherwise the HSS shall not store the new PDN GW data and shall set the result
code to DIAMETER_ERROR_UNABLE_TO_COMPLY;
\- store the new PDN GW and PLMN ID, and the APN itself, if both are present
in the request, and the APN is not present in the subscription but a wild card
APN is present in the subscription;
\- mark the location area as \"restricted\" if so indicated in the request;
\- send Cancel Location to the current SGSN if so indicated in the request;
\- if the UE has become reachable again, and NOR is received on S6a from an
MME or on S6d from an SGSN, the HSS shall respectively clear the URRP-MME or
the URPP-SGSN parameter for the UE and send an indication t of UE reachability
from MME or SGSN o the Service Related Entities if there is any;
\- when NOR is received on S6d from an SGSN (with the Alert Reason present),
the HSS shall reset the MNRG flag and send a MAP-Alert-Service-Centre message
or S6c-Alert-Service-Centre-Request (see 3GPP TS 29.338 [48], i.e. the
behaviour in the HSS should be the same as when a MAP-Ready for SM is received
from an SGSN;
\- when NOR is received on S6a from an MME (with the Alert Reason present),
the HSS shall reset the MNRF flag and send a MAP-Alert-Service-Centre message
or S6c-Alert-Service-Centre-Request (see 3GPP TS 29.338 [48], i.e. the
behaviour in the HSS should be the same as when a MAP-Ready for SM is received
from a VLR/MSC;
\- when NOR is received on S6a from an MME or on S6d from an SGSN to update
the Homogeneous Support of IMS Voice Over PS Sessions, the HSS shall store the
updated Homogeneous Support of IMS Voice Over PS Sessions and may use this
information in the future in order to skip the T-ADS data retrieval, as
described in clause 5.2.2.1 (IDR/IDA commands). If the \"Homogeneous Support
of IMS Voice Over PS Sessions\" bit is set in the NOR-Flags AVP received but
without Homogeneous-Support-of-IMS-Voice-Over-PS-Sessions AVP present in the
NOR message, the HSS shall take the Homogeneous Support of IMS Voice Over PS
Sessions as unknown to the serving node. ;
\- when NOR is received on S6a from an MME for removal of MME registration for
SMS, the HSS shall remove the MME registration for SMS and the \"MME number
for SMS\" as the corresponding MSC number to be used for MT SMS.
\- when NOR is received on S6a from an MME or on S6d from an SGSN with the
Monitoring-Event-Config-Status AVP, the HSS shall trigger a Monitoring event
cancelation procedure for the monitoring events that were not successfully
configured at the MME/SGSN and the IWK-SCEF, as specified in sub-clause
7.2.2.2 of 3GPP TS 29.336 [54].
and then send the response to the MME or SGSN.
# 5A MME -- CSS (S7a) and SGSN -- CSS (S7d)
## 5A.1 Introduction
The S7a interface enables the transfer of subscriber related CSG data in the
VPLMN between the MME and the CSS as described in 3GPP TS 23.401 [2].
The S7d interface enables the transfer of subscriber related CSG data in the
VPLMN between the SGSN and the CSS as described in 3GPP TS 23.060 [12].
## 5A.2 Mobility Services
### 5A.2.1 Location Management Procedures
#### 5A.2.1.1 Update VCSG Location
##### 5A.2.1.1.1 General
The Update VCSG Location Procedure shall be used between the MME and the CSS
or between the SGSN and the CSS to update location information in the CSS or
retrieve the CSG subscription data of the UE from the CSS. The procedure
allows:
\- to inform the CSS about the identity of the MME or SGSN currently serving
the user,
\- to update MME or SGSN with user CSG subscription data received from the
CSS.
This procedure is mapped to the commands Update-VCSG-Location-Request/Answer
(UVR/UVA) in the Diameter application specified in chapter 7.
Table 5A.2.1.1.1/1 specifies the involved information elements for the
request.
Table 5A.2.1.1.1/2 specifies the involved information elements for the answer.
Table 5A.2.1.1.1/1: Update VCSG Location Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | MSISDN | MSISDN | C | This information | | | | | element shall | | | | | contain the user | | | | | MSISDN, formatted | | | | | according to 3GPP | | | | | TS 29.329 [25]. | | | | | It shall be | | | | | present if | | | | | available. | +-------------------+-------------------+------+-------------------+ | UVR Flags | UVR-Flags | M | This Information | | | | | Element contains | | (See 7.3.153) | | | a bit mask. See | | | | | 7.3.153 for the | | | | | meaning of the | | | | | bits. | +-------------------+-------------------+------+-------------------+ | SGSN number | SGSN-Number | C | This Information | | | | | Element contains | | (See 7.3.102) | | | the ISDN number | | | | | of the SGSN, see | | | | | 3GPP TS 23.003 | | | | | [3]. | | | | | | | | | | It shall be | | | | | present when the | | | | | message is sent | | | | | on the S7d | | | | | interface. | | | | | | | | | | It may be present | | | | | when the message | | | | | on the S7a | | | | | interface and the | | | | | requesting node | | | | | is a combined | | | | | MME/SGSN. | +-------------------+-------------------+------+-------------------+
Table 5A.2.1.1.1/2: Update VCSG Location Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S7a/S7d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+ | VPLMN CSG | VPLMN-CSG- | C | This Information | | Subscription Data | Subscription-Data | | Element shall | | | | | contain the list | | (See 7.3.155) | | | of CSG Ids and | | | | | the associated | | | | | expiry dates | | | | | stored in the | | | | | CSS. It shall be | | | | | present if | | | | | success is | | | | | reported, unless | | | | | an explicit | | | | | \"skip subscriber | | | | | data\" indication | | | | | was present in | | | | | the request or | | | | | the Temporary | | | | | Empty VPLMN CSG | | | | | Subscription Data | | | | | flag is set. | +-------------------+-------------------+------+-------------------+ | UVA Flags | UVA-Flags | C | This Information | | | | | Element contains | | (See 7.3.154) | | | a bit mask. See | | | | | 7.3.154 for the | | | | | meaning of the | | | | | bits. | +-------------------+-------------------+------+-------------------+
##### 5A.2.1.1.2 Detailed behaviour of the MME and the SGSN
The MME or SGSN shall make use of this procedure to register the UE in the CSS
and to retrieve the \"CSG subscription data from CSS\" when:
\- the VPLMN supports Autonomous CSG Roaming
\- and the HPLMN has enabled Autonomous CSG Roaming in the VPLMN
\- and the UE has requested an initial attach or a tracking area procedure or
a routing area procedure to a CSG cell
\- and the MME or SGSN have not yet registered the UE in the CSS.
If the Autonomous CSG Roaming in the VPLMN is not supported or is not allowed
by the HPLMN of the subscriber, the MME or SGSN shall not make use of the
Update CSG Location procedure.
For UEs receiving emergency services, in which the UE was not successfully
authenticated, the MME or SGSN shall not make use of the Update VCSG Location
procedure.
A combined MME/SGSN shall set the \"Skip Subscriber Data\" flag in the UVR-
Flags if the \"CSG subscription data from CSS\" are already available due to a
previously VCSG Location updating.
A combined MME/SGSN that has chosen the option to include the SGSN Number
within an Update VCSG Request sent over S7a shall be prepared to receive a
single CSG subscription data update message from the CSS when the CSG
subscription data is modified in the CSS.
When receiving an Update VCSG Location Answer from the CSS, the MME or SGSN
shall check the result code. If it indicates success the MME or SGSN shall
delete all the stored \"CSG subscription data from CSS\" (if any) and then
store the received \"CSG subscription data from the CSS\" (if any), and it
shall store the CSS identity as received in the Origin-Host AVP.
If the same CSG Id exists in both \"CSG subscription data from CSS\" and \"CSG
subscription data from HSS\", the \"CSG subscription data from HSS\" shall
take precedence over the \"CSG subscription data from CSS\" in further use.
If an error response is received from the CSS, the MME or SGSN shall not
reject the UE and shall end the procedure when the UE is attaching to a normal
cell. If the UE is attaching to a CSG cell, in this case the MME or SGSN shall
check if there is such CSG Id from the HSS. If there is no such CSG Id, the
MME or SGSN shall reject the UE.
##### 5A.2.1.1.3 Detailed behaviour of the CSS
When receiving an Update VCSG Location request the CSS shall check whether the
user is known.
If the user is not known, and if the Update VCSG Location Request is received
over the S7a/S7d interface, the CSS may:
\- store the MME or SGSN identity received within the Origin-Host AVP, and
include the UVA-Flags AVP with \"Temporary Empty VPLMN CSG Subscription Data\"
flag set, and return a Result Code of DIAMETER_ SUCCESS, or
\- return a Result Code of DIAMETER_ERROR_USER_UNKNOWN.
NOTE: A mechanism is needed in the CSS to associate the CSG subscription data
of the user with the received IMSI.
If the Update VCSG Location Request is received over the S7a/S7d interface,
the CSS shall replace the stored MME or SGSN identity with the received value
(the identity is received within the Origin-Host AVP).
If no result code indicating an error is sent to the MME or SGSN, the CSS
shall include the VPLMN CSG subscription data in the Update VCSG Location
Answer unless an explicit \"skip subscriber data\" indication has been
received in the request, and shall return a Result Code of DIAMETER_SUCCESS.
#### 5A.2.1.2 Cancel VCSG Location
##### 5A.2.1.2.1 General
The Cancel VCSG Location Procedure shall be used between the CSS and the MME
and between the CSS and the SGSN. The procedure shall be invoked by the CSS
and is used:
\- to inform the MME or SGSN about the subscriber's VCSG subscription
withdrawal by the CSS operator and the removal of their registration in the
CSS.
This procedure is mapped to the commands Cancel-VCSG-Location-Request/Answer
(CVR/CVA) in the Diameter application specified in chapter 7.
Table 5A.2.1.2.1/1 specifies the involved information elements for the
request.
Table 5A.2.1.2.1/2 specifies the involved information elements for the answer.
Table 5A.2.1.2.1/1: Cancel VCSG Location Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Cancellation Type | Cancellation-Type | M | Defined values | | | | | that can be used | | (See 7.3.24) | | | are: | | | | | | | | | | - Subscription | | | | | Withdrawal, | | | | | applied to the | | | | | VPLMN CSG | | | | | subscription. | +-------------------+-------------------+------+-------------------+
Table 5A.2.1.2.1/2: Cancel VCSG Location Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | The result of the | | | Ex | | operation. | | (See 7.4) | perimental-Result | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | +-------------------+-------------------+------+-------------------+
##### 5A.2.1.2.2 Detailed behaviour of the MME and the SGSN
When receiving a Cancel VCSG Location request the MME or SGSN shall check
whether the IMSI is known.
If it is not known, a result code of DIAMETER_SUCCESS is returned.
If it is known, the MME or SGSN shall check if the Cancellation Type is
Subscription Withdrawal. In this case, the MME or SGSN shall remove the
information of their registration in the CSS and the stored VPLMN CSG
subscription if any. Also in this case a result code of DIAMETER_SUCCESS is
returned.
When a UE is served by a single combined MME/SGSN for both E-UTRAN and non-E-
UTRAN access, the combined MME/SGSN shall check if the Cancellation Type is
Subscription Withdrawal. In this case, the Cancel VCSG Location request is
processed both in the MME part and in the SGSN part of the combined node.
##### 5A.2.1.2.3 Detailed behaviour of the CSS
The CSS shall make use of this procedure when the user's VPLMN CSG
subscription is withdrawn by the CSS operator and shall include a cancellation
type of \"Subscription Withdrawal.
### 5A.2.2 Subscriber Data Handling Procedures
#### 5A.2.2.1 Insert VCSG Subscriber Data
##### 5A.2.2.1.1 General
The Insert VCSG Subscriber Data Procedure shall be used between the CSS and
the MME and between the CSS and the SGSN for updating CSG subscription data in
the MME or SGSN in the following situations:
\- due to administrative changes of the user data in the CSS and the user is
now located in an MME or SGSN, i.e. if the user was given a CSG subscription
and the CSG subscription has changed;
If the CSS knows that the UE has attached to the same combined MME/SGSN via
both the E-UTRAN and UTRAN/GERAN, i.e. the CSS has received the Update VCSG
Location Request over both the S7a interface and S7d interface respectively
with the same SGSN number, the CSS should invoke this procedure for a single
time to update CSG subscription data in the combined MME/SGSN, i.e. the CSS
should not invoke this procedure for each of the MME and the SGSN registered
respectively.
This procedure is mapped to the commands Insert-Subscriber Data-Request/Answer
(IDR/IDA) in the Diameter application specified in clause 7.
Table 5A.2.2.1.1/1 specifies the involved information elements for the
request.
Table 5A.2.2.1.1/2 specifies the involved information elements for the answer.
Table 5A.2.2.1.1/1: Insert VCSG Subscriber Data Request
+-------------------+-------------------+-------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+-------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+-------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+-------+-------------------+ | VPLMN CSG | VPLMN-CSG- | **M** | This Information | | Subscription Data | Subscription-Data | | Element shall | | | | | contain the list | | (See 7.3.2) | | | of CSG Ids and | | | | | the associated | | | | | expiry dates | | | | | stored in the | | | | | VPLMN CSS. | +-------------------+-------------------+-------+-------------------+
Table 5A.2.2.1.1/2: Insert VCSG Subscriber Data Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | Result-Code AVP | | | | | shall be used to | | | | | indicate success | | | | | / errors defined | | | | | in the Diameter | | | | | Base Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S7a/S7d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor Id in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown. | +-------------------+-------------------+------+-------------------+
##### 5A.2.2.1.2 Detailed behaviour of the MME and the SGSN
When receiving an Insert VCSG Subscriber Data request, the MME or SGSN shall
check whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If the request does not contain any CSG-Subscription-Data AVP, Experimental-
Result shall be set to DIAMETER_ERROR_SUBS_DATA_ABSENT.
If the request contains at least one CSG-Subscription-Data AVPs, the MME or
SGSN shall delete all the stored \"CSG subscription data from CSS\" (if any),
and then store the received \"CSG subscription data from CSS\".
If the MME or SGSN cannot fulfil the received request, e.g. due to a database
error, it shall set the Result-Code to DIAMETER_UNABLE_TO_COMPLY.
If the same CSG Id exists in both \"CSG subscription data from CSS\" and \"CSG
subscription data from HSS\", the \"CSG subscription data from HSS\" shall
take precedence over the \"CSG subscription data from CSS\" in further use.
##### 5A.2.2.1.3 Detailed behaviour of CSS
The CSS shall make use of this procedure to delete the \"CSG subscription data
from CSS\" stored in the MME or SGSN and replace them with the CSG
subscription data sent.
If the CSS receives a Insert VCSG Subscriber Data answer with the Result Code
DIAMETER_ERROR_USER_UNKNOWN, the CSS shall clear the stored MME or SGSN
identity.
#### 5A.2.2.2 Delete VCSG Subscriber Data
##### 5A.2.2.2.1 General
This procedure shall be used between the CSS and the MME or between the CSS
and the SGSN, to remove all the \"CSG subscription data from CSS\" stored in
the MME or SGSN. The procedure shall be invoked by the CSS.
If the CSS knows that the UE has attached to the same combined MME/SGSN via
both E-UTRAN and UTRAN/GERAN, i.e. the CSS has received the Update VCSG
Location Request over both the S7a interface and S7d interface respectively
with the same SGSN number, the CSS should invoke this procedure for a single
time to remove all the \"CSG subscription data from CSS\" stored in the
combined MME/SGSN, i.e. not invoke this procedure for each of the MME and the
SGSN registered respectively.
This procedure is mapped to the commands Delete-Subscriber-Data-Request/Answer
(DSR/DSA) in the S7a/S7d Diameter application specified in clause 7.
Table 5A.2.2.2.1/1 specifies the involved information elements for the
request.
Table 5A.2.2.2.1/2 specifies the involved information elements for the answer.
Table 5A.2.2.2.1/1: Delete VCSG Subscriber Data Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | M | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | DSR Flags | DSR-Flags | M | This Information | | | | | Element shall | | (See 7.3.25) | | | contain a bit | | | | | mask. See 7.3.25 | | | | | for the meaning | | | | | of the bits. | +-------------------+-------------------+------+-------------------+
Table 5A.2.2.2.1/2: Delete VCSG Subscriber Data Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S7a/S7d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - User Unknown | +-------------------+-------------------+------+-------------------+
##### 5A.2.2.2.2 Detailed behaviour of the MME and the SGSN
When receiving a Delete VCSG Subscriber Data request, the MME or SGSN shall
check whether the IMSI is known.
If it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be
returned.
If it is known, the MME or SGSN shall delete all the stored \"CSG subscription
data from CSS\".
If the deletion of the subscription data succeeds in the MME or SGSN, the
Result-Code shall be set to DIAMETER_SUCCESS.
If the MME or SGSN cannot fulfil the received request for other reasons, e.g.
due to a database error, it shall set the Result-Code to
DIAMETER_UNABLE_TO_COMPLY.
##### 5A.2.2.2.3 Detailed behaviour of the CSS
The CSS shall make use of this procedure to remove all the CSG subscription
data associated to CSS from the MME or SGSN.
NOTE: When a Delete VCSG Subscriber Data procedure occurs, the MME or SGSN
remains registered in the CSS
If the CSS receives a Delete VCSG Subscriber Data answer with the Result Code
DIAMETER_ERROR_USER_UNKNOWN from the MME or SGSN, the CSS shall clear the
stored MME or SGSN identity.
### 5A.2.3 Fault Recovery Procedures
#### 5A.2.3.1 VCSG Reset
##### 5A.2.3.1.1 General
The VCSG Reset Procedure shall be used by the CSS, after a restart, to
indicate to the MME and to the SGSN that a failure has occurred.
This procedure is mapped to the commands Reset-Request/Answer (RSR/RSA) in the
S7a/S7d Diameter application specified in chapter 7.
Table 5A.2.3.1.1/1 specifies the involved information elements for the
request.
Table 5A.2.3.1.1/2 specifies the involved information elements for the answer.
Table 5A.2.3.1.1/1: VCSG Reset Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+
Table 5A.2.3.1.1/2: VCSG Reset Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S7a/S7d | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | There are no | | | | | Ex | | | | | perimental-Result | | | | | codes applicable | | | | | for this command. | +-------------------+-------------------+------+-------------------+ | Supported | S | O | If present, this | | Features | upported-Features | | information | | | | | element shall | | (See 3GPP TS | | | contain the list | | 29.229 [9]) | | | of features | | | | | supported by the | | | | | origin host. | +-------------------+-------------------+------+-------------------+
##### 5A.2.3.1.2 Detailed behaviour of the MME and the SGSN
When receiving a VCSG Reset message, the MME or SGSN or combined MME/SGSN, for
all roaming users for which they have a registration in CSS, shall mark
\"Location Information Confirmed in CSS\" record as \"Not Confirmed\". The MME
or SGSN or combined MME/SGSN shall make use of the CSS Identity received in
the Origin-Host AVP (by comparing it with the value stored after successful
ULA) in order to determine which user records are impacted.
When, as described in 3GPP TS 23.007 [43], an event requiring the MME or SGSN
to check the \"CSG subscription data from CSS\" occurs, and if the user record
\"Location Information Confirmed in CSS\" is marked as \"Not Confirmed\", the
restoration procedure shall be triggered.
##### 5A.2.3.1.3 Detailed behaviour of the CSS
The CSS shall make use of this procedure in order to indicate to all relevant
MMEs, SGSNs, and combined MME/SGSNs that the CSS has restarted and may have
lost the current MME-Identity and SGSN-Identity of some of its users who may
be currently roaming in the MME area and/or SGSN area, and to which the CSS,
therefore, cannot send e.g. Insert VCSG Subscriber Data messages when needed.
The CSS should invoke this procedure towards a combined MME/SGSN only for a
single time even if some of the impacted subscribers are attached to the
combined MME/SGSN via UTRAN/GERAN and some of the impacted subscribers are
attached to the combined MME/SGSN via E-UTRAN.
# 6 MME -- EIR (S13) and SGSN -- EIR (S13\')
## 6.1 Introduction
The S13 interface shall enable the ME Identity check procedure between the MME
and the EIR as described in the 3GPP TS 23.401 [2].
The S13\' interface shall enable the ME Identity check procedure between the
SGSN and the EIR as described in the 3GPP TS 23.060 [12].
## 6.2 ME Identity Check Procedures
### 6.2.1 ME Identity Check
#### 6.2.1.1 General
This Mobile Equipment Identity Check Procedure shall be used between the MME
and the EIR and between the SGSN and the EIR to check the Mobile Equipment\'s
identity status (e.g. to check that it has not been stolen, or, to verify that
it does not have faults).
This procedure is mapped to the commands ME-Identity-Check-Request/Answer
(ECR/ECA) in the Diameter application specified in chapter 6.
Table 6.2.1.1/1 specifies the involved information elements for the request.
Table 6.2.1.1/2 specifies the involved information elements for the answer.
Table 6.2.1.1/1: ME Identity Check Request
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Terminal | Ter | M | This information | | Information | minal-Information | | element shall | | | | | contain the | | (See 7.3.3) | | | information about | | | | | the used mobile | | | | | equipment i.e. | | | | | the IMEI. Within | | | | | this Information | | | | | Element, only the | | | | | IMEI and the | | | | | Software-Version | | | | | AVPs shall be | | | | | used on the | | | | | S13/S13\' | | | | | interface. | +-------------------+-------------------+------+-------------------+ | IMSI | User-Name (See | O | This information | | | IETF RFC 3588 | | element shall | | | [4]) | | contain the user | | | | | IMSI, formatted | | | | | according to 3GPP | | | | | TS 23.003 [3], | | | | | clause 2.2. | +-------------------+-------------------+------+-------------------+
Table 6.2.1.1/2: ME Identity Check Answer
+-------------------+-------------------+------+-------------------+ | Information | Mapping to | Cat. | Description | | element name | Diameter AVP | | | +-------------------+-------------------+------+-------------------+ | Result | Result-Code / | M | This IE shall | | | Ex | | contain the | | (See 7.4) | perimental-Result | | result of the | | | | | operation. | | | | | | | | | | The Result-Code | | | | | AVP shall be used | | | | | to indicate | | | | | success / errors | | | | | as defined in the | | | | | Diameter Base | | | | | Protocol. | | | | | | | | | | The | | | | | Ex | | | | | perimental-Result | | | | | AVP shall be used | | | | | for S13/S13\' | | | | | errors. This is a | | | | | grouped AVP which | | | | | shall contain the | | | | | 3GPP Vendor ID in | | | | | the Vendor-Id | | | | | AVP, and the | | | | | error code in the | | | | | Experim | | | | | ental-Result-Code | | | | | AVP. | | | | | | | | | | The following | | | | | errors are | | | | | applicable in | | | | | this case: | | | | | | | | | | - Unknown | | | | | equipment | +-------------------+-------------------+------+-------------------+ | Equipment Status | Equipment-Status | C | This information | | | | | element shall | | (See 7.3.51) | | | contain the | | | | | status of the | | | | | requested mobile | | | | | equipment as | | | | | defined in 3GPP | | | | | TS 22.016 [13]. | | | | | | | | | | It shall be | | | | | present if the | | | | | result of the ME | | | | | Identity Check is | | | | | D | | | | | IAMETER_SUCCESS. | +-------------------+-------------------+------+-------------------+
#### 6.2.1.2 Detailed behaviour of the MME and the SGSN
The MME or the SGSN shall make use of this procedure to check the ME identity,
if the MME or the SGSN is configured to check the IMEI with the EIR.
Terminal-Information, when sent by the MME/SGSN to the EIR, shall contain the
IMEI AVP, and it may contain also the Software-Version AVP.
IMSI may be sent together with Terminal Information to the EIR for operator-
determined purposes.
When receiving the ME Identity Check answer from the EIR, the MME or the SGSN
shall check the result code and the equipment status. Dependent upon the
result, the MME or the SGSN will decide its subsequent actions (e.g. sending
an Attach Reject if the EIR indicates that the Mobile Equipment is unknown or
blacklisted).
#### 6.2.1.3 Detailed behaviour of the EIR
When receiving an ME Identity Check request, the EIR shall check whether the
mobile equipment is known.
The EIR shall identify the mobile equipment based on the first 14 digits of
the IMEI AVP; if a 15^th^ digit is received in the IMEI AVP, this digit shall
be ignored by the EIR.
Based on operator policies, the EIR may also use the Software-Version AVP, in
addition to the first 14 digits of the IMEI AVP, to check the equipment
identity against Black and Grey lists (see 3GPP TS 22.016 [13]).
If the mobile equipment identity is not known, a result code of
DIAMETER_ERROR_ EQUIPMENT_UNKNOWN is returned.
If it is known, the EIR shall return DIAMETER_SUCCESS with the equipment
status.
# 7 Protocol Specification and Implementation
## 7.1 Introduction
[]{#__RefHeading___Toc509919670 .anchor}7.1.1 Use of Diameter base protocol
The Diameter Base Protocol as specified in IETF RFC 3588 [4] shall apply
except as modified by the defined support of the methods and the defined
support of the commands and AVPs, result and error codes as specified in this
specification. Unless otherwise specified, the procedures (including error
handling and unrecognised information handling) shall be used unmodified.
[]{#__RefHeading___Toc509919671 .anchor}7.1.2 Securing Diameter Messages
For secure transport of Diameter messages, see 3GPP TS 33.210 [16].
If there are no intermediate Diameter Agent networks located between the
visited PLMN and the home PLMN, the HSS or the first Diameter Agent located in
the home PLMN which has direct connection with the serving network is required
to check that the realm contained in the Origin-Realm AVP in the request from
the serving network corresponds to the right serving network.
If there are intermediate Diameter Agent networks located between the visited
PLMN and home PLMN, the first Diameter Agent which has direct connection with
the serving network is required to check that the realm contained in the
Origin-Realm AVP in the request from the serving network corresponds to the
right serving network.
NOTE 1: How to do the above check is implementation specific, e.g. it may be
done by checking if the IP addresses of the serving network nodes match with
the realm received in the Origin-Realm AVP in the request.
NOTE 2: Network configurations where a (potential) visited PLMN acts as
intermediate Diameter Agent network are not allowed.
NOTE 3: In the case there are intermediate Diameter Agent networks, the home
network has to trust these intermediate Diameter agent networks to do the
check and other hop by hop security check. This trust is usually substantiated
by contracts since there are no remote technical means to verify if the checks
were actually performed.
[]{#__RefHeading___Toc509919672 .anchor}7.1.3 Accounting functionality
Accounting functionality (Accounting Session State Machine, related command
codes and AVPs) shall not be used on the S6a, S6d, S13 and S13\' interfaces.
[]{#__RefHeading___Toc509919673 .anchor}7.1.4 Use of sessions
Between the MME and the HSS and between the SGSN and the HSS and between the
MME and the EIR, Diameter sessions shall be implicitly terminated. An
implicitly terminated session is one for which the server does not maintain
state information. The client shall not send any re-authorization or session
termination requests to the server.
The Diameter base protocol includes the Auth-Session-State AVP as the
mechanism for the implementation of implicitly terminated sessions.
The client (server) shall include in its requests (responses) the Auth-
Session-State AVP set to the value NO_STATE_MAINTAINED (1), as described in
IETF RFC 3588 [4]. As a consequence, the server shall not maintain any state
information about this session and the client shall not send any session
termination request. Neither the Authorization-Lifetime AVP nor the Session-
Timeout AVP shall be present in requests or responses.
[]{#__RefHeading___Toc509919674 .anchor}7.1.5 Transport protocol
Diameter messages over the S6a, S6d, S13, S13\', S7a and S7d interfaces shall
make use of SCTP IETF RFC 4960 [14].
[]{#__RefHeading___Toc509919675 .anchor}7.1.6 Routing considerations
This clause specifies the use of the Diameter routing AVPs Destination-Realm
and Destination-Host.
If an MME or SGSN knows the address/name of the HSS for a certain user, and
the associated home network domain name, both the Destination-Realm and
Destination-Host AVPs shall be present in the request.
> NOTE: When sending a ULR command for a certain user due to HSS restoration
> procedure (i.e, after the MME/SGSN have received a Reset command from the
> HSS), the MME or the SGSN might consider the stored address/name of the HSS
> for the user to be invalid and hence not known.
If an MME or SGSN knows only the home network domain name for a certain user,
the Destination-Realm AVP shall be present and the command shall be routed to
the next Diameter node.
If an MME or SGSN knows only the identity of the user, the home network domain
name shall be derived from the user\'s IMSI (MNC and MCC values) to construct
the EPC Home Network Realm/Domain, as indicated in 3GPP TS 23.003 [3], clause
19.2, and use it as Destination-Realm.
Consequently, the Destination-Host AVP is declared as optional in the ABNF for
all requests initiated by an MME or SGSN.
The address/name of the EIR shall be locally configured in the MME.
Requests initiated by the HSS towards an MME or SGSN shall include both
Destination-Host and Destination-Realm AVPs.
The HSS obtains the Destination-Host AVP to use in requests towards an MME or
SGSN, from the Origin-Host AVP received in previous requests from the MME or
SGSN. Consequently, the Destination-Host AVP is declared as mandatory in the
ABNF for all requests initiated by the HSS. The Origin-Host AVP received in
requests from the MME may contain a Diameter identity of the MME encoded as
specified in subclause 19.4.2.4 of 3GPP TS 23.003 [3]. The Origin-Host AVP
received in requests from the SGSN may contain a Diameter identity of the SGSN
encoded as specified in subclause 19.4.2.6 of 3GPP TS 23.003 [3].
The HSS obtains the Destination-Realm AVP to use in requests towards an MME or
SGSN, from the Origin-Realm AVP received in previous requests from the MME or
SGSN. The Origin-Realm AVP in the requests received by the HSS in roaming
cases, should contain the domain name of the network to which the MME or the
SGSN belongs, encoded as specified in subclause 19.2 of 3GPP TS 23.003 [3].
The Destination-Realm AVP is declared as mandatory in the ABNF for all
requests.
If the Vendor-Specific-Application-ID AVP is received in any of the commands,
it may be ignored by the receiving node, and it shall not be used for routing
purposes.
[]{#__RefHeading___Toc509919676 .anchor}7.1.7 Advertising Application Support
The HSS, MME, SGSN and EIR shall advertise support of the Diameter S6a/S6d
and/or S13/S13\' Application by including the value of the application
identifier in the Auth-Application-Id AVP within the Vendor-Specific-
Application-Id grouped AVP of the Capabilities-Exchange-Request and
Capabilities-Exchange-Answer commands.
The vendor identifier value of 3GPP (10415) shall be included in the
Supported-Vendor-Id AVP of the Capabilities-Exchange-Request and Capabilities-
Exchange-Answer commands, and in the Vendor-Id AVP within the Vendor-Specific-
Application-Id grouped AVP of the Capabilities-Exchange-Request and
Capabilities-Exchange-Answer commands.
The Vendor-Id AVP included in Capabilities-Exchange-Request and Capabilities-
Exchange-Answer commands that is not included in the Vendor-Specific-
Application-Id AVPs as described above shall indicate the manufacturer of the
Diameter node as per RFC 3588 [4].
[]{#__RefHeading___Toc509919677 .anchor}7.1.8 Diameter Application Identifier
This clause specifies three Diameter applications: The S6a/S6d interface
application, the S13/S13\' interface application, and the S7a/S7d interface
application.
The S6a/S6d interface application allows a Diameter server and a Diameter
client:
\- to exchange location information;
\- to authorize a user to access the EPS;
\- to exchange authentication information;
\- to download and handle changes in the subscriber data stored in the server.
The S6a/S6d interface protocol shall be defined as an IETF vendor specific
Diameter application, where the vendor is 3GPP. The vendor identifier assigned
by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.
The Diameter application identifier assigned to the S6a/S6d interface
application is 16777251 (allocated by IANA).
The S13/S13\' interface application allows a Diameter server and a Diameter
client:
\- to check the validity of the ME Identity.
The S13/S13\' interface protocol shall be defined as an IETF vendor specific
Diameter application, where the vendor is 3GPP. The vendor identifier assigned
by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.
The Diameter application identifier assigned to the S13/S13\' interface
application is 16777252 (allocated by IANA).
The S7a/S7d interface application allows a Diameter server and a Diameter
client:
\- to authorize a user to access CSGs identified in the CSS while roaming;
\- to download and handle changes in CSG subscriber data stored in the CSS.
The S7a/S7d interface protocol shall be defined as an IETF vendor specific
Diameter application, where the vendor is 3GPP. The vendor identifier assigned
by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.
The Diameter application identifier assigned to the S7a/S7d interface
application is 16777308 (allocated by IANA).
### 7.1.9 Use of the Supported-Features AVP
When new functionality is introduced on the S6a/S6d interfaces, it should be
defined as optional. If backwards incompatible changes can not be avoided, the
new functionality shall be introduced as a new feature and support advertised
with the Supported-Features AVP. The usage of the Supported-Features AVP on
the S6a/S6d interfaces is consistent with the procedures for the dynamic
discovery of supported features as defined in clause 7.2 of 3GPP TS 29.229
[9].
When extending the application by adding new AVPs for a feature, the new AVPs
shall have the M bit cleared and the AVP shall not be defined mandatory in the
command ABNF.
As defined in 3GPP TS 29.229 [9], the Supported-Features AVP is of type
grouped and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On
the all reference points as specified in this specificaion, the Supported-
Features AVP is used to identify features that have been defined by 3GPP and
hence, for features defined in this document, the Vendor-Id AVP shall contain
the vendor ID of 3GPP (10415). If there are multiple feature lists defined for
the reference point, the Feature-List-ID AVP shall differentiate those lists
from one another.
The Table 7.3.10/1 defines the features applicable to the S6a/S6d interfaces
for the feature list with a Feature-List-ID of 1. The Table 7.3.10/2 defines
the features applicable to the S6a/S6d interfaces for the feature list with a
Feature-List-ID of 2.
NOTE 1: If the support of a feature by the receiver is required in order for
the receiver to be able to correctly process the request command, then the
feature is included in the Supported-Features AVP and the M-bit of the
Supported-Features AVP has to be set in the request command, according to 3GPP
TS 29.229 [9] subclause 7.2.1.
NOTE 2: Currently none of the features that can be included in the Supported-
Features AVP of the ULR command requires that the HSS supports them to
successfully process the ULR command. For this reason the MME or SGSN does not
need to set the M-bit of the Supported-Features AVP in the ULR command. This
corresponds to the exception to the general rule requiring the setting of the
M-bit of the Supported-Features AVP in a request described in 3GPP TS 29.229
[9] subclause 7.2.1. Setting the M-bit of the Supported-Features AVP in the
ULR command will mean that, if any of the features is not supported, the HSS
will reject the ULR command as according to 3GPP TS 29.229 [9] subclause
7.2.1.
## 7.2 Commands
### 7.2.1 Introduction
This section defines the Command code values and related ABNF for each command
described in this specification.
### 7.2.2 Command-Code values
This section defines Command-Code values for the S6a/S6d interface application
and S13/S13\' interface application as allocated by IANA in the IETF RFC 5516
[32].
Every command is defined by means of the ABNF syntax IETF RFC 2234 [7],
according to the rules in IETF RFC 3588 [4]. In the case, the definition and
use of an AVP is not specified in this document, the guidelines in IETF RFC
3588 [4] shall apply.
NOTE: For this release, the Vendor-Specific-Application-ID is included as an
optional AVP in all commands in order to ensure interoperability with diameter
agents following a strict implementation of IETF RFC 3588 [4], by which
messages not including this AVP will be rejected. IETF RFC 3588 [4] indicates
that the AVP shall be present in all proxiable commands, such as those
specified here, despite that the contents of this AVP are redundant since the
Application ID is already present in the command header. This AVP may be
removed in subsequent revisions of this specification, once the diameter base
protocol is updated accordingly.
The following Command Codes are defined in this specification:
Table 7.2.2/1: Command-Code values for S6a/S6d
* * *
Command-Name Abbreviation Code Section Update-Location-Request ULR 316 7.2.3
Update-Location-Answer ULA 316 7.2.4 Cancel-Location-Request CLR 317 7.2.7
Cancel-Location-Answer CLA 317 7.2.8 Authentication-Information-Request AIR
318 7.2.5 Authentication-Information-Answer AIA 318 7.2.6 Insert-Subscriber-
Data-Request IDR 319 7.2.9 Insert-Subscriber-Data-Answer IDA 319 7.2.10
Delete-Subscriber-Data-Request DSR 320 7.2.11 Delete-Subscriber-Data-Answer
DSA 320 7.2.12 Purge-UE-Request PUR 321 7.2.13 Purge-UE-Answer PUA 321 7.2.14
Reset-Request RSR 322 7.2.15 Reset-Answer RSA 322 7.2.16 Notify-Request NOR
323 7.2.17 Notify-Answer NOA 323 7.2.18
* * *
For these commands, the Application-ID field shall be set to 16777251
(application identifier of the S6a/S6d interface application, allocated by
IANA).
Table 7.2.2/2: Command-Code values for S13/S13\'
* * *
Command-Name Abbreviation Code Section ME-Identity-Check-Request ECR 324
7.2.19 ME-Identity-Check-Answer ECA 324 7.2.20
* * *
For these commands, the Application-ID field shall be set to 16777252
(application identifier of the S13/S13\' interface application, allocated by
IANA).
Table 7.2.2/3: Command-Code values for S7a/S7d
* * *
Command-Name Abbreviation Code Section Update-VCSG-Location-Request UVR
8388638 7.2.21 Update-VCSG-Location-Answer UVA 8388638 7.2.22 Insert-
Subscription-Data-Request IDR 319 7.2.9 Insert-Subscription-Data-Answer IDA
319 7.2.10 Delete-Subscriber-Data-Request DSR 320 7.2.11 Delete-Subscriber-
Data-Answer DSA 320 7.2.12 Reset-Request RSR 322 7.2.15 Reset-Answer RSA 322
7.2.16 Cancel-VCSG-Location-Request CVR 8388642 7.2.23 Cancel-VCSG-Location-
Answer CVA 8388642 7.2.24
* * *
For these commands, the Application-ID field shall be set to 16777308
(application identifier of the S7a/S7d interface application, allocated by
IANA).
### 7.2.3 Update-Location-Request (ULR) Command
The Update-Location-Request (ULR) command, indicated by the Command-Code field
set to 316 and the \"R\" bit set in the Command Flags field, is sent from MME
or SGSN to HSS.
Message Format
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { User-Name }
>
> [ OC-Supported-Features ]
>
> ***[ Supported-Features ]**
>
> [ Terminal-Information ]
>
> { RAT-Type }
>
> { ULR-Flags }
>
> [UE-SRVCC-Capability ]
>
> { Visited-PLMN-Id }
>
> [ SGSN-Number ]
>
> [ Homogeneous-Support-of-IMS-Voice-Over-PS-Sessions ]
>
> [ GMLC-Address ]
>
> *[ Active-APN ]
>
> [ Equivalent-PLMN-List ]
>
> [ MME-Number-for-MT-SMS ]
>
> [ SMS-Register-Request ]
>
> [ SGs-MME-Identity ]
>
> [ Coupled-Node-Diameter-ID ]
>
> [ Adjacent-PLMNs ]
>
> [ Supported-Services ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.4 Update-Location-Answer (ULA) Command
The Update-Location-Answer (ULA) command, indicated by the Command-Code field
set to 316 and the \'R\' bit cleared in the Command Flags field, is sent from
HSS to MME or SGSN.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> [ Error-Diagnostic ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> ***[ Supported-Features ]**
>
> [ ULA-Flags ]
>
> [ Subscription-Data ]
>
> *[ Reset-ID ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.5 Authentication-Information-Request (AIR) Command
The Authentication-Information-Request (AIR) command, indicated by the
Command-Code field set to 318 and the \'R\' bit set in the Command Flags
field, is sent from MME or SGSN to HSS.
Message Format
> \ ::= \ PXY, 16777251 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { User-Name }
>
> [ OC-Supported-Features ]
>
> *[Supported-Features]
>
> [ Requested-EUTRAN-Authentication-Info ]
>
> [ Requested-UTRAN-GERAN-Authentication-Info ]
>
> { Visited-PLMN-Id }
>
> [ AIR-Flags ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.6 Authentication-Information-Answer (AIA) Command
The Authentication-Information-Answer (AIA) command, indicated by the Command-
Code field set to318 and the \'R\' bit cleared in the Command Flags field, is
sent from HSS to MME or SGSN.
Message Format
> \ ::= \ 16777251 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> [ Error-Diagnostic ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> * [Supported-Features]
>
> [ Authentication-Info ]
>
> [ UE-Usage-Type ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.7 Cancel-Location-Request (CLR) Command
The Cancel-Location-Request (CLR) command, indicated by the Command-Code field
set to 317 and the \'R\' bit set in the Command Flags field, is sent from HSS
to MME or SGSN.
Message Format
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[Supported-Features ]
>
> { Cancellation-Type }
>
> [ CLR-Flags ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.8 Cancel-Location-Answer (CLA) Command
The Cancel-Location-Answer (CLA) command, indicated by the Command-Code field
set to 317 and the \'R\' bit cleared in the Command Flags field, is sent from
MME or SGSN to HSS.
Message Format
> \ ::= \
\
[ DRMP ]
[ Vendor-Specific-Application-Id ]
*[ Supported-Features ]
[ Result-Code ]
[ Experimental-Result ]
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
*[ AVP ]
*[ Failed-AVP ]
*[ Proxy-Info ]
*[ Route-Record ]
### 7.2.9 Insert-Subscriber-Data-Request (IDR) Command
The Insert-Subscriber-Data-Request (IDR) command, indicated by the Command-
Code field set to 319 and the \'R\' bit set in the Command Flags field, is
sent from HSS or CSS to MME or SGSN.
Message Format when used over the S6a or S6d application:
> \ ::= \ 16777251 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[ Supported-Features]
>
> { Subscription-Data}
>
> [ IDR- Flags ]
>
> *[ Reset-ID ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
Message Format when used over the S7a or S7d application:
> \ ::= \ 16777308 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[ Supported-Features ]
>
> *{ VPLMN-CSG-Subscription-Data }
>
> *[ Reset-ID ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.10 Insert-Subscriber-Data-Answer (IDA) Command
The Insert-Subscriber-Data-Answer (IDA) command, indicated by the Command-Code
field set to 319 and the \'R\' bit cleared in the Command Flags field, is sent
from MME or SGSN to HSS or CSS.
Message Format when used over the S6a or S6d application:
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ IMS-Voice-Over-PS-Sessions-Supported ]
>
> [ Last-UE-Activity-Time ]
>
> [ RAT-Type ]
>
> [ IDA-Flags ]
>
> [ EPS-User-State ]
>
> [ EPS-Location-Information ]
>
> [Local-Time-Zone ]
>
> [ Supported-Services ]
>
> *[ Monitoring-Event-Report ]
>
> *[ Monitoring-Event-Config-Status ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
Message Format when used over the S7a or S7d application:
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.11 Delete-Subscriber-Data-Request (DSR) Command
The Delete-Subscriber Data-Request (DSR) command, indicated by the Command-
Code field set to 320 and the \'R\' bit set in the Command Flags field, is
sent from HSS or CSS to MME or SGSN.
Message Format when used over the S6a/S6d application:
> \ ::= \ 16777251 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[ Supported-Features ]
>
> { DSR-Flags }
>
> [ SCEF-ID ]
>
> *[ Context-Identifier ]
>
> [ Trace-Reference ]
>
> *[ TS-Code ]
>
> *[ SS-Code ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
The SCEF-ID shall be present when the flag \"Delete monitoring events\" in
DSR-Flags AVP is set.
Message Format when used over the S7a/S7d application:
> \ ::= \ 16777308 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[ Supported-Features ]
>
> { DSR-Flags }
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.12 Delete-Subscriber-Data-Answer (DSA) Command
The Delete-Subscriber Data-Answer (DSA) command, indicated by the Command-Code
field set to 320 and the \'R\' bit cleared in the Command Flags field, is sent
from MME or SGSN to HSS or CSS.
Message Format when used over the S6a/S6d application:
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ DSA-Flags ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
Message Format when used over the S7a /S7d application:
> \ ::= \ 16777308>
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.13 Purge-UE-Request (PUR) Command
The Purge-UE-Request (PUR) command, indicated by the Command-Code field set to
321 and the \'R\' bit set in the Command Flags field, is sent from MME or SGSN
to HSS.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { User-Name }
>
> [ OC-Supported-Features ]
>
> [ PUR-Flags ]
>
> *[ Supported-Features ]
>
> [ EPS-Location-Information ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.14 Purge-UE-Answer (PUA) Command
The Purge-UE-Answer (PUA) command, indicated by the Command-Code field set to
321 and the \'R\' bit cleared in the Command Flags field, is sent from HSS to
MME or SGSN.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> [ PUA-Flags ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.15 Reset-Request (RSR) Command
The Reset-Request (RSR) command, indicated by the Command-Code field set to
322 and the \'R\' bit set in the Command Flags field, is sent from HSS or CSS
to MME or SGSN.
Message Format when used over the S6a/S6d application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> *[ Supported-Features ]
>
> *[ User-Id ]
>
> *[ Reset-ID ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
Message Format when used over the S7a /S7d application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> *[ Supported-Features ]
>
> *[ Reset-ID ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.16 Reset-Answer (RSA) Command
The Reset-Answer (RSA) command, indicated by the Command-Code field set to 322
and the \'R\' bit cleared in the Command Flags field, is sent from MME or SGSN
to HSS or CSS.
Message Format when used over the S6a/S6d application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
Message Format when used over the S7a /S7d application:
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> *[ Supported-Features ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.17 Notify-Request (NOR) Command
The Notify-Request (NOR) command, indicated by the Command-Code field set to
323 and the \'R\' bit set in the Command Flags field, is sent from MME or SGSN
to HSS.
Message Format
> \ ::= \
>
> \
>
> [ Vendor-Specific-Application-Id ]
>
> [ DRMP ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { User-Name }
>
> [ OC-Supported-Features ]
>
> * [ Supported-Features ]
>
> [ Terminal-Information ]
>
> **[ MIP6-Agent-Info ]**
>
> **[ Visited-Network-Identifier ]**
>
> [ Context-Identifier ]
>
> **[Service-Selection]**
>
> [ Alert-Reason ]
>
> [ UE-SRVCC-Capability ]
>
> [ NOR-Flags ]
>
> [ Homogeneous-Support-of-IMS-Voice-Over-PS-Sessions ]
>
> [ Maximum-UE-Availability-Time ]
>
> *[ Monitoring-Event-Config-Status ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.18 Notify-Answer (NOA) Command
The Notify-Answer (NOA) command, indicated by the Command-Code field set to
323 and the \'R\' bit cleared in the Command Flags field, is sent from HSS to
MME or SGSN.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ OC-Supported-Features ]
>
> [ OC-OLR ]
>
> *[ Supported-Features ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.19 ME-Identity-Check-Request (ECR) Command
The ME-Identity-Check-Request (ECR) command, indicated by the Command-Code
field set to 324 and the \'R\' bit set in the Command Flags field, is sent
from MME or SGSN to EIR.
Message Format
> \ ::= \ 16777252 >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { Terminal-Information }
>
> [ User-Name ]
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.20 ME-Identity-Check-Answer (ECA) Command
The ME-Identity-Check-Answer (ECA) command, indicated by the Command-Code
field set to 324 and the \'R\' bit cleared in the Command Flags field, is sent
from EIR to MME or SGSN.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Equipment-Status ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.21 Update-VCSG-Location-Request (UVR) Command
The Update-VCSG-Location-Request (UVR) command, indicated by the Command-Code
field set to 8388638 and the \"R\" bit set in the Command Flags field, is sent
from MME or SGSN to CSS.
Message Format
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> [ Destination-Host ]
>
> { Destination-Realm }
>
> { User-Name }
>
> [ MSISDN ]
>
> [ SGSN-Number ]
>
> ***[ Supported-Features ]**
>
> { UVR-Flags }
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.22 Update-VCSG-Location-Answer (UVA) Command
The Update-VCSG-Location-Answer (UVA) command, indicated by the Command-Code
field set to 8388638 and the \'R\' bit cleared in the Command Flags field, is
sent from CSS to MME or SGSN.
Message Format
> \ ::= \
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> [ Result-Code ]
>
> [ Experimental-Result ]
>
> [ Error-Diagnostic ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> ***[ Supported-Features ]**
>
> *[ VPLMN-CSG-Subscription-Data ]
>
> [ UVA-Flags ]
>
> *[ AVP ]
>
> *[ Failed-AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.23 Cancel-VCSG-Location-Request (CVR) Command
The Cancel-VCSG-Location-Request (CVR) command, indicated by the Command-Code
field set to 8388642 and the \'R\' bit set in the Command Flags field, is sent
from CSS to MME or SGSN.
Message Format
> \ ::= \ >
>
> \
>
> [ DRMP ]
>
> [ Vendor-Specific-Application-Id ]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> { User-Name }
>
> *[Supported-Features ]
>
> { Cancellation-Type }
>
> *[ AVP ]
>
> *[ Proxy-Info ]
>
> *[ Route-Record ]
### 7.2.24 Cancel-VCSG-Location-Answer (CVA) Command
The Cancel-VCSG-Location-Answer (CVA) command, indicated by the Command-Code
field set to 8388642 and the \'R\' bit cleared in the Command Flags field, is
sent from MME or SGSN to CSS.
Message Format
> \ ::= \
\
[ DRMP ]
[ Vendor-Specific-Application-Id ]
*[ Supported-Features ]
[ Result-Code ]
[ Experimental-Result ]
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
*[ AVP ]
*[ Failed-AVP ]
*[ Proxy-Info ]
*[ Route-Record ]
## 7.3 Information Elements
### 7.3.1 General
The following table specifies the Diameter AVPs defined for the S6a/S6d
interface protocol, the S7a/S7d interface protocol and the S13/S13\' interface
protocol, their AVP Code values, types, possible flag values and whether or
not the AVP may be encrypted. The Vendor-ID header of all AVPs defined in this
specification shall be set to 3GPP (10415).
For all AVPs which contain bit masks and are of the type Unsigned32, e.g.,
ULR-Flags, DSR-Flags, PUA-Flags, etc., bit 0 shall be the least significant
bit. For example, to get the value of bit 0, a bit mask of 0x0001 should be
used.
Table 7.3.1/1: S6a/S6d, S7a/S7d and S13/S13\' specific DiameterAVPs
+-------+-------+-------+-------+------+-----+-------+-------+-------+ | | AVP | | | | | | | | | | Flag | | | | | | | | | | rules | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Attr | AVP | Se | Value | Must | May | S | Must | May | | ibute | Code | ction | Type | | | hould | not | Encr. | | Name | | de | | | | not | | | | | | fined | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Su | 1400 | 7.3.2 | Gr | M, V | | | | No | | bscri | | | ouped | | | | | | | ption | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Termi | 1401 | 7.3.3 | Gr | M, V | | | | No | | nal-I | | | ouped | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | IMEI | 1402 | 7.3.4 | UTF8S | M, V | | | | No | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1403 | 7.3.5 | UTF8S | M, V | | | | No | | oftwa | | | tring | | | | | | | re-Ve | | | | | | | | | | rsion | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | QoS- | 1404 | 7 | O | M, V | | | | No | | Subsc | | .3.77 | ctetS | | | | | | | ribed | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | ULR- | 1405 | 7.3.7 | Unsig | M, V | | | | No | | Flags | | | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | ULA- | 1406 | 7.3.8 | Unsig | M, V | | | | No | | Flags | | | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Visit | 1407 | 7.3.9 | O | M, V | | | | No | | ed-PL | | | ctetS | | | | | | | MN-Id | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | R | 1408 | 7 | Gr | M, V | | | | No | | eques | | .3.11 | ouped | | | | | | | ted-E | | | | | | | | | | UTRAN | | | | | | | | | | -Auth | | | | | | | | | | entic | | | | | | | | | | ation | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | R | 1409 | 7 | Gr | M, V | | | | No | | eques | | .3.12 | ouped | | | | | | | ted-U | | | | | | | | | | TRAN- | | | | | | | | | | GERAN | | | | | | | | | | -Auth | | | | | | | | | | entic | | | | | | | | | | ation | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Nu | 1410 | 7 | Unsig | M, V | | | | No | | mber- | | .3.14 | ned32 | | | | | | | Of-Re | | | | | | | | | | quest | | | | | | | | | | ed-Ve | | | | | | | | | | ctors | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Re- | 1411 | 7 | O | M, V | | | | No | | Synch | | .3.15 | ctetS | | | | | | | roniz | | | tring | | | | | | | ation | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Imm | 1412 | 7 | Unsig | M, V | | | | No | | ediat | | .3.16 | ned32 | | | | | | | e-Res | | | | | | | | | | ponse | | | | | | | | | | -Pref | | | | | | | | | | erred | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Auth | 1413 | 7 | Gr | M, V | | | | No | | entic | | .3.17 | ouped | | | | | | | ation | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | E-UT | 1414 | 7 | Gr | M, V | | | | No | | RAN-V | | .3.18 | ouped | | | | | | | ector | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UT | 1415 | 7 | Gr | M, V | | | | No | | RAN-V | | .3.19 | ouped | | | | | | | ector | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | GE | 1416 | 7 | Gr | M, V | | | | No | | RAN-V | | .3.20 | ouped | | | | | | | ector | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Netw | 1417 | 7 | Enume | M, V | | | | No | | ork-A | | .3.21 | rated | | | | | | | ccess | | | | | | | | | | -Mode | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | HPLM | 1418 | 7 | Unsig | M, V | | | | No | | N-ODB | | .3.22 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | I | 1419 | 7 | Unsig | M, V | | | | No | | tem-N | | .3.23 | ned32 | | | | | | | umber | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ca | 1420 | 7 | Enume | M, V | | | | No | | ncell | | .3.24 | rated | | | | | | | ation | | | | | | | | | | -Type | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | DSR- | 1421 | 7 | Unsig | M, V | | | | No | | Flags | | .3.25 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | DSA- | 1422 | 7 | Unsig | M, V | | | | No | | Flags | | .3.26 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Con | 1423 | 7 | Unsig | M, V | | | | No | | text- | | .3.27 | ned32 | | | | | | | Ident | | | | | | | | | | ifier | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Su | 1424 | 7 | Enume | M, V | | | | No | | bscri | | .3.29 | rated | | | | | | | ber-S | | | | | | | | | | tatus | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Op | 1425 | 7 | Unsig | M, V | | | | No | | erato | | .3.30 | ned32 | | | | | | | r-Det | | | | | | | | | | ermin | | | | | | | | | | ed-Ba | | | | | | | | | | rring | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Acc | 1426 | 7 | Unsig | M, V | | | | No | | ess-R | | .3.31 | ned32 | | | | | | | estri | | | | | | | | | | ction | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | APN | 1427 | 7 | UTF8S | M, V | | | | No | | -OI-R | | .3.32 | tring | | | | | | | eplac | | | | | | | | | | ement | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | A | 1428 | 7 | Enume | M, V | | | | No | | ll-AP | | .3.33 | rated | | | | | | | N-Con | | | | | | | | | | figur | | | | | | | | | | ation | | | | | | | | | | s-Inc | | | | | | | | | | luded | | | | | | | | | | -Indi | | | | | | | | | | cator | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | APN-C | 1429 | 7 | Gr | M, V | | | | No | | onfig | | .3.34 | ouped | | | | | | | urati | | | | | | | | | | on-Pr | | | | | | | | | | ofile | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | AP | 1430 | 7 | Gr | M, V | | | | No | | N-Con | | .3.35 | ouped | | | | | | | figur | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | E | 1431 | 7 | Gr | M, V | | | | No | | PS-Su | | .3.37 | ouped | | | | | | | bscri | | | | | | | | | | bed-Q | | | | | | | | | | oS-Pr | | | | | | | | | | ofile | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | VPLM | 1432 | 7 | Enume | M, V | | | | No | | N-Dyn | | .3.38 | rated | | | | | | | amic- | | | | | | | | | | Addre | | | | | | | | | | ss-Al | | | | | | | | | | lowed | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1433 | 7 | O | M, V | | | | No | | TN-SR | | .3.39 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Al | 1434 | 7 | Enum | M, V | | | | No | | ert-R | | .3.83 | erate | | | | | | | eason | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | AMBR | 1435 | 7 | Gr | M, V | | | | No | | | | .3.41 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | C | 1436 | 7 | Gr | M. V | | | | No | | SG-Su | | .3.78 | ouped | | | | | | | bscri | | | | | | | | | | ption | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | C | 1437 | 7 | Unsig | M, V | | | | No | | SG-Id | | .3.79 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PD | 1438 | 7 | Enume | M, V | | | | No | | N-GW- | | .3.44 | rated | | | | | | | Alloc | | | | | | | | | | ation | | | | | | | | | | -Type | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Expir | 1439 | 7 | Time | M, V | | | | No | | ation | | .3.80 | | | | | | | | -Date | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | RAT-F | 1440 | 7 | Unsig | M, V | | | | No | | reque | | .3.46 | ned32 | | | | | | | ncy-S | | | | | | | | | | elect | | | | | | | | | | ion-P | | | | | | | | | | riori | | | | | | | | | | ty-ID | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | IDA- | 1441 | 7 | Unsig | M, V | | | | No | | Flags | | .3.47 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PUA- | 1442 | 7 | Unsig | M, V | | | | No | | Flags | | .3.48 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | NOR- | 1443 | 7 | Unsig | M, V | | | | No | | Flags | | .3.49 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Us | 1444 | 7 | UTF8S | V | | | M | No | | er-Id | | .3.50 | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | E | 1445 | 7 | Enume | M, V | | | | No | | quipm | | .3.51 | rated | | | | | | | ent-S | | | | | | | | | | tatus | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | R | 1446 | 7 | O | M, V | | | | No | | egion | | .3.52 | ctetS | | | | | | | al-Su | | | tring | | | | | | | bscri | | | | | | | | | | ption | | | | | | | | | | -Zone | | | | | | | | | | -Code | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | RAND | 1447 | 7 | O | M, V | | | | No | | | | .3.53 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | XRES | 1448 | 7 | O | M, V | | | | No | | | | .3.54 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | AUTN | 1449 | 7 | O | M, V | | | | No | | | | .3.55 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | KASME | 1450 | 7 | O | M, V | | | | No | | | | .3.56 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Tra | 1452 | 7 | Ad | M, V | | | | No | | ce-Co | | .3.98 | dress | | | | | | | llect | | | | | | | | | | ion-E | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Kc | 1453 | 7 | O | M, V | | | | No | | | | .3.59 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SRES | 1454 | 7 | O | M, V | | | | No | | | | .3.60 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PDN | 1456 | 7 | Enume | M, V | | | | No | | -Type | | .3.62 | rated | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Roami | 1457 | 7 | Enume | M, V | | | | No | | ng-Re | | .3.81 | rated | | | | | | | stric | | | | | | | | | | ted-D | | | | | | | | | | ue-To | | | | | | | | | | -Unsu | | | | | | | | | | pport | | | | | | | | | | ed-Fe | | | | | | | | | | ature | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Trace | 1458 | 7 | Gr | M, V | | | | No | | -Data | | .3.63 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Trace | 1459 | 7 | O | M, V | | | | No | | -Refe | | .3.64 | ctetS | | | | | | | rence | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | T | 1462 | 7 | Enume | M, V | | | | No | | race- | | .3.67 | rated | | | | | | | Depth | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Tra | 1463 | 7 | O | M, V | | | | No | | ce-NE | | .3.68 | ctetS | | | | | | | -Type | | | tring | | | | | | | -List | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Trace | 1464 | 7 | O | M, V | | | | No | | -Inte | | .3.69 | ctetS | | | | | | | rface | | | tring | | | | | | | -List | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | T | 1465 | 7 | O | M, V | | | | No | | race- | | .3.70 | ctetS | | | | | | | Event | | | tring | | | | | | | -List | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | O | 1466 | 7 | O | M, V | | | | No | | MC-Id | | .3.71 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | GP | 1467 | 7 | Gr | M, V | | | | No | | RS-Su | | .3.72 | ouped | | | | | | | bscri | | | | | | | | | | ption | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Co | 1468 | 7 | Enume | M, V | | | | No | | mplet | | .3.73 | rated | | | | | | | e-Dat | | | | | | | | | | a-Lis | | | | | | | | | | t-Inc | | | | | | | | | | luded | | | | | | | | | | -Indi | | | | | | | | | | cator | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | P | 1469 | 7 | Gr | M, V | | | | No | | DP-Co | | .3.74 | ouped | | | | | | | ntext | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PDP | 1470 | 7 | O | M, V | | | | No | | -Type | | .3.75 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | 3GPP2 | 1471 | 7.3.6 | O | M, V | | | | No | | -MEID | | | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Sp | 1472 | 7 | Gr | M, V | | | | No | | ecifi | | .3.82 | ouped | | | | | | | c-APN | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | LCS | 1473 | 7 | Gr | M, V | | | | No | | -Info | | .3.84 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | G | 1474 | 7 | O | M, V | | | | No | | MLC-N | | .3.85 | ctetS | | | | | | | umber | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | LCS-P | 1475 | 7 | Gr | M, V | | | | No | | rivac | | .3.86 | ouped | | | | | | | yExce | | | | | | | | | | ption | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SS | 1476 | 7 | O | M, V | | | | No | | -Code | | .3.87 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SS-S | 1477 | 7 | O | M, V | | | | No | | tatus | | .3.88 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Not | 1478 | 7 | Enume | M, V | | | | No | | ifica | | .3.89 | rated | | | | | | | tion- | | | | | | | | | | To-UE | | | | | | | | | | -User | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Exter | 1479 | 7 | Gr | M, V | | | | No | | nal-C | | .3.90 | ouped | | | | | | | lient | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Clien | 1480 | 7 | O | M, V | | | | No | | t-Ide | | .3.91 | ctetS | | | | | | | ntity | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | G | 1481 | 7 | Enume | M, V | | | | No | | MLC-R | | .3.92 | rated | | | | | | | estri | | | | | | | | | | ction | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | P | 1482 | 7 | Enume | M, V | | | | No | | LMN-C | | .3.93 | rated | | | | | | | lient | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Se | 1483 | 7 | Gr | M, V | | | | No | | rvice | | .3.94 | ouped | | | | | | | -Type | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Serv | 1484 | 7 | Unsig | M, V | | | | No | | iceTy | | .3.95 | ned32 | | | | | | | peIde | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MO-LR | 1485 | 7 | Gr | M, V | | | | No | | | | .3.96 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | T | 1486 | 7 | Gr | M, V | | | | No | | elese | | .3.99 | ouped | | | | | | | rvice | | | | | | | | | | -List | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | TS | 1487 | 7. | O | M, V | | | | No | | -Code | | 3.100 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ca | 1488 | 7. | Gr | M, V | | | | No | | ll-Ba | | 3.101 | ouped | | | | | | | rring | | | | | | | | | | -Info | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1489 | 7. | O | M, V | | | | No | | GSN-N | | 3.102 | ctetS | | | | | | | umber | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | IDR- | 1490 | 7. | Unsig | M, V | | | | No | | Flags | | 3.103 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | ICS | 1491 | 7. | Enume | V | | | M | No | | -Indi | | 3.104 | rated | | | | | | | cator | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | I | 1492 | 7. | Enume | V | | | M | No | | MS-Vo | | 3.106 | rated | | | | | | | ice-O | | | | | | | | | | ver-P | | | | | | | | | | S-Ses | | | | | | | | | | sions | | | | | | | | | | -Supp | | | | | | | | | | orted | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Homo | 1493 | 7. | Enume | V | | | M | No | | geneo | | 3.107 | rated | | | | | | | us-Su | | | | | | | | | | pport | | | | | | | | | | -of-I | | | | | | | | | | MS-Vo | | | | | | | | | | ice-O | | | | | | | | | | ver-P | | | | | | | | | | S-Ses | | | | | | | | | | sions | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | L | 1494 | 7. | Time | V | | | M | No | | ast-U | | 3.108 | | | | | | | | E-Act | | | | | | | | | | ivity | | | | | | | | | | -Time | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | EPS- | 1495 | 7. | Gr | V | | | M | No | | User- | | 3.110 | ouped | | | | | | | State | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | EPS- | 1496 | 7. | Gr | V | | | M | No | | Locat | | 3.111 | ouped | | | | | | | ion-I | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MME- | 1497 | 7. | Gr | V | | | M | No | | User- | | 3.112 | ouped | | | | | | | State | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SGSN- | 1498 | 7. | Gr | V | | | M | No | | User- | | 3.113 | ouped | | | | | | | State | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | User- | 1499 | 7. | Enume | V | | | M | No | | State | | 3.114 | rated | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MM | 1600 | 7. | Gr | V | | | M | No | | E-Loc | | 3.115 | ouped | | | | | | | ation | | | | | | | | | | I | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SGSN- | 1601 | 7. | Gr | V | | | M | No | | Locat | | 3.116 | ouped | | | | | | | ion-I | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | E-U | 1602 | 7. | O | V | | | M | No | | TRAN- | | 3.117 | ctetS | | | | | | | Cell- | | | tring | | | | | | | Globa | | | | | | | | | | l-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Tr | 1603 | 7. | O | V | | | M | No | | ackin | | 3.118 | ctetS | | | | | | | g-Are | | | tring | | | | | | | a-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Cell- | 1604 | 7. | O | V | | | M | No | | Globa | | 3.119 | ctetS | | | | | | | l-Ide | | | tring | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | R | 1605 | 7. | O | V | | | M | No | | outin | | 3.120 | ctetS | | | | | | | g-Are | | | tring | | | | | | | a-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Lo | 1606 | 7. | O | V | | | M | No | | catio | | 3.121 | ctetS | | | | | | | n-Are | | | tring | | | | | | | a-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1607 | 7. | O | V | | | M | No | | ervic | | 3.122 | ctetS | | | | | | | e-Are | | | tring | | | | | | | a-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Geog | 1608 | 7. | O | V | | | M | No | | raphi | | 3.123 | ctetS | | | | | | | cal-I | | | tring | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Geode | 1609 | 7. | O | V | | | M | No | | tic-I | | 3.124 | ctetS | | | | | | | nform | | | tring | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | C | 1610 | 7. | Enume | V | | | M | No | | urren | | 3.125 | rated | | | | | | | t-Loc | | | | | | | | | | ation | | | | | | | | | | -Retr | | | | | | | | | | ieved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ag | 1611 | 7. | Unsig | V | | | M | No | | e-Of- | | 3.126 | ned32 | | | | | | | Locat | | | | | | | | | | ion-I | | | | | | | | | | nform | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Activ | 1612 | 7. | Gr | V | | | M | No | | e-APN | | 3.127 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | E | 1614 | 7. | Enume | V | | | M | No | | rror- | | 3.128 | rated | | | | | | | Diagn | | | | | | | | | | ostic | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ext-P | 1621 | 7. | Ad | V | | | M | No | | DP-Ad | | 3.129 | dress | | | | | | | dress | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UE-S | 1615 | 7. | Enume | V | | | M | No | | RVCC- | | 3.130 | rated | | | | | | | Capab | | | | | | | | | | ility | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MP | 1616 | 7. | Unsig | V | | | M | No | | S-Pri | | 3.131 | ned32 | | | | | | | ority | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | VPL | 1617 | 7. | Enume | V | | | M | No | | MN-LI | | 3.132 | rated | | | | | | | PA-Al | | | | | | | | | | lowed | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | LIPA- | 1618 | 7. | Enume | V | | | M | No | | Permi | | 3.133 | rated | | | | | | | ssion | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Sub | 1619 | 7. | Unsig | V | | | M | No | | scrib | | 3.134 | ned32 | | | | | | | ed-Pe | | | | | | | | | | riodi | | | | | | | | | | c-RAU | | | | | | | | | | -TAU- | | | | | | | | | | Timer | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ex | 1620 | 7. | O | V | | | M | No | | t-PDP | | 3.75A | ctetS | | | | | | | -Type | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1613 | 7. | Enume | V | | | M | No | | IPTO- | | 3.135 | rated | | | | | | | Permi | | | | | | | | | | ssion | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MD | 1622 | 7. | Gr | V | | | M | No | | T-Con | | 3.136 | ouped | | | | | | | figur | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Job | 1623 | 7. | Enume | V | | | M | No | | -Type | | 3.137 | rated | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Area- | 1624 | 7. | Gr | V | | | M | No | | Scope | | 3.138 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | List- | 1625 | 7. | Unsig | V | | | M | No | | Of-Me | | 3.139 | ned32 | | | | | | | asure | | | | | | | | | | ments | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Re | 1626 | 7. | Unsig | V | | | M | No | | porti | | 3.140 | ned32 | | | | | | | ng-Tr | | | | | | | | | | igger | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Repor | 1627 | 7. | Enume | V | | | M | No | | t-Int | | 3.141 | rated | | | | | | | erval | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Rep | 1628 | 7. | Enume | V | | | M | No | | ort-A | | 3.142 | rated | | | | | | | mount | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Event | 1629 | 7. | Unsig | V | | | M | No | | -Thre | | 3.143 | ned32 | | | | | | | shold | | | | | | | | | | -RSRP | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Event | 1630 | 7. | Unsig | v | | | M | No | | -Thre | | 3.144 | ned32 | | | | | | | shold | | | | | | | | | | -RSRQ | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | L | 1631 | 7. | Enume | V | | | M | No | | oggin | | 3.145 | rated | | | | | | | g-Int | | | | | | | | | | erval | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | L | 1632 | 7. | Enume | V | | | M | No | | oggin | | 3.146 | rated | | | | | | | g-Dur | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Relay | 1633 | 7. | Enume | V | | | M | No | | -Node | | 3.147 | rated | | | | | | | -Indi | | | | | | | | | | cator | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | M | 1634 | 7. | Enume | V | | | M | No | | DT-Us | | 3.148 | rated | | | | | | | er-Co | | | | | | | | | | nsent | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | PUR- | 1635 | 7. | Unsig | V | | | M | No | | Flags | | 3.149 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Su | 1636 | 7. | Enume | V | | | M | No | | bscri | | 3.150 | rated | | | | | | | bed-V | | | | | | | | | | SRVCC | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Equiv | 1637 | 7. | Gr | V | | | M | No | | alent | | 3.151 | ouped | | | | | | | -PLMN | | | | | | | | | | -List | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | CLR- | 1638 | 7. | Unsig | V | | | M | No | | Flags | | 3.152 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UVR- | 1639 | 7. | Unsig | M, V | | | | No | | Flags | | 3.153 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UVA- | 1640 | 7. | Unsig | M, V | | | | No | | Flags | | 3.154 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | VP | 1641 | 7. | Gr | M, V | | | | No | | LMN-C | | 3.155 | ouped | | | | | | | SG-Su | | | | | | | | | | bscri | | | | | | | | | | ption | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Time | 1642 | 7. | UTF8S | V | | | M | No | | -Zone | | 3.163 | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | A-M | 1643 | 7. | O | V | | | M | No | | SISDN | | 3.157 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | M | 1645 | 7. | O | V | | | M | No | | ME-Nu | | 3.159 | ctetS | | | | | | | mber- | | | tring | | | | | | | for-M | | | | | | | | | | T-SMS | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SMS-R | 1648 | 7. | Enume | V | | | M | No | | egist | | 3.162 | rated | | | | | | | er-Re | | | | | | | | | | quest | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Local | 1649 | 7. | Gr | V | | | M | No | | -Time | | 3.156 | ouped | | | | | | | -Zone | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Dayli | 1650 | 7. | Enume | V | | | M | No | | ght-S | | 3.164 | rated | | | | | | | aving | | | | | | | | | | -Time | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Sub | 1654 | 7. | Unsig | V | | | M | No | | scrip | | 3.165 | ned32 | | | | | | | tion- | | | | | | | | | | Data- | | | | | | | | | | Flags | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Me | 1655 | 7. | Enume | V | | | M | No | | asure | | 3.166 | rated | | | | | | | ment- | | | | | | | | | | Perio | | | | | | | | | | d-LTE | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Mea | 1656 | 7. | Enume | V | | | M | No | | surem | | 3.167 | rated | | | | | | | ent-P | | | | | | | | | | eriod | | | | | | | | | | -UMTS | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Colle | 1657 | 7. | Enume | V | | | M | No | | ction | | 3.168 | rated | | | | | | | -Peri | | | | | | | | | | od-RR | | | | | | | | | | M-LTE | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | C | 1658 | 7. | Enume | V | | | M | No | | ollec | | 3.169 | rated | | | | | | | tion- | | | | | | | | | | Perio | | | | | | | | | | d-RRM | | | | | | | | | | -UMTS | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Pos | 1659 | 7. | O | V | | | M | No | | ition | | 3.170 | ctetS | | | | | | | ing-M | | | tring | | | | | | | ethod | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Measu | 1660 | 7. | O | V | | | M | No | | remen | | 3.171 | ctetS | | | | | | | t-Qua | | | tring | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Even | 1661 | 7. | Inte | V | | | M | No | | t-Thr | | 3.172 | ger32 | | | | | | | eshol | | | | | | | | | | d-Eve | | | | | | | | | | nt-1F | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Even | 1662 | 7. | Inte | V | | | M | No | | t-Thr | | 3.173 | ger32 | | | | | | | eshol | | | | | | | | | | d-Eve | | | | | | | | | | nt-1I | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Resto | 1663 | 7. | Unsig | V | | | M | No | | ratio | | 3.174 | ned32 | | | | | | | n-Pri | | | | | | | | | | ority | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | S | 1664 | 7. | UTF8S | V | | | M | No | | Gs-MM | | 3.175 | tring | | | | | | | E-Ide | | | | | | | | | | ntity | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SIPTO | 1665 | 7. | Unsig | V | | | M | No | | -Loca | | 3.176 | ned32 | | | | | | | l-Net | | | | | | | | | | work- | | | | | | | | | | Permi | | | | | | | | | | ssion | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Coup | 1666 | 7. | D | V | | | M | No | | led-N | | 3.177 | iamet | | | | | | | ode-D | | | erIde | | | | | | | iamet | | | ntity | | | | | | | er-ID | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | WLAN | 1667 | 7. | Gr | V | | | M | No | | -offl | | 3.181 | ouped | | | | | | | oadab | | | | | | | | | | ility | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | W | 1668 | 7. | Unsig | V | | | M | No | | LAN-o | | 3.182 | ned32 | | | | | | | ffloa | | | | | | | | | | dabil | | | | | | | | | | ity-E | | | | | | | | | | UTRAN | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | WLAN- | 1669 | 7. | Unsig | V | | | M | No | | offlo | | 3.183 | ned32 | | | | | | | adabi | | | | | | | | | | lity- | | | | | | | | | | UTRAN | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1670 | 7. | O | V | | | M | No | | et-ID | | 3.184 | ctetS | | | | | | | | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MDT- | 1671 | 7. | O | V | | | M | No | | Allow | | 3.185 | ctetS | | | | | | | ed-PL | | | tring | | | | | | | MN-Id | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Adja | 1672 | 7. | Gr | V | | | M | No | | cent- | | 3.186 | ouped | | | | | | | PLMNs | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ad | 1673 | 7. | Gr | V | | | M | No | | jacen | | 3.187 | ouped | | | | | | | t-Acc | | | | | | | | | | ess-R | | | | | | | | | | estri | | | | | | | | | | ction | | | | | | | | | | -Data | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | DL-Bu | 1674 | 7. | Inte | V | | | M | No | | fferi | | 3.188 | ger32 | | | | | | | ng-Su | | | | | | | | | | ggest | | | | | | | | | | ed-Pa | | | | | | | | | | cket- | | | | | | | | | | Count | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | IMS | 1675 | 7. | Gr | V | | | M | No | | I-Gro | | 3.189 | ouped | | | | | | | up-Id | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | G | 1676 | 7. | Unsig | V | | | M | No | | roup- | | 3.190 | ned32 | | | | | | | Servi | | | | | | | | | | ce-Id | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Gro | 1677 | 7. | O | V | | | M | No | | up-PL | | 3.191 | ctetS | | | | | | | MN-Id | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Loca | 1678 | 7. | O | V | | | M | No | | l-Gro | | 3.192 | ctetS | | | | | | | up-Id | | | tring | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | AIR- | 1679 | 7. | Unsig | V | | | M | No | | Flags | | 3.201 | ned32 | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | UE- | 1680 | 7. | Unsig | V | | | M | No | | Usage | | 3.202 | ned32 | | | | | | | -Type | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Non-I | 1681 | 7. | Enume | V | | | M | No | | P-PDN | | 3.204 | rated | | | | | | | -Type | | | | | | | | | | -Indi | | | | | | | | | | cator | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Non-I | 1682 | 7. | Unsig | V | | | M | No | | P-Dat | | 3.205 | ned32 | | | | | | | a-Del | | | | | | | | | | ivery | | | | | | | | | | -Mech | | | | | | | | | | anism | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | A | 1683 | 7. | Unsig | V | | | M | No | | dditi | | 3.206 | ned32 | | | | | | | onal- | | | | | | | | | | Conte | | | | | | | | | | xt-ID | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | SCEF- | 1684 | 7. | D | V | | | M | No | | Realm | | 3.207 | iamet | | | | | | | | | | erIde | | | | | | | | | | ntity | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Pref | 1686 | 7. | Unsig | V | | | M | No | | erred | | 3.209 | ned32 | | | | | | | -Data | | | | | | | | | | -Mode | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1687 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1688 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1689 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1690 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1691 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1692 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Res | 1693 | | | | | | | | | erved | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MBSFN | 1694 | 7. | Gr | V | | | M | No | | -Area | | 3.219 | ouped | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | MBS | 1695 | 7. | Unsig | V | | | M | No | | FN-Ar | | 3.220 | ned32 | | | | | | | ea-ID | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | Ca | 1696 | 7. | Unsig | V | | | M | No | | rrier | | 3.221 | ned32 | | | | | | | -Freq | | | | | | | | | | uency | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+ | NOTE | | | | | | | | | | 1: | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | "M\", | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | su | | | | | | | | | | pport | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | is | | | | | | | | | | requ | | | | | | | | | | ired. | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | "V\", | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | the | | | | | | | | | | opt | | | | | | | | | | ional | | | | | | | | | | Vend | | | | | | | | | | or-ID | | | | | | | | | | field | | | | | | | | | | is | | | | | | | | | | pr | | | | | | | | | | esent | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | he | | | | | | | | | | ader. | | | | | | | | | | For | | | | | | | | | | fu | | | | | | | | | | rther | | | | | | | | | | det | | | | | | | | | | ails, | | | | | | | | | | see | | | | | | | | | | IETF | | | | | | | | | | RFC | | | | | | | | | | 3588 | | | | | | | | | | \ | | | | | | | | | | [4]. | | | | | | | | | | | | | | | | | | | | NOTE | | | | | | | | | | 2: If | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | is | | | | | | | | | | set | | | | | | | | | | for | | | | | | | | | | an | | | | | | | | | | AVP | | | | | | | | | | and | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | under | | | | | | | | | | stand | | | | | | | | | | the | | | | | | | | | | AVP, | | | | | | | | | | it | | | | | | | | | | shall | | | | | | | | | | r | | | | | | | | | | eturn | | | | | | | | | | a | | | | | | | | | | rejec | | | | | | | | | | tion. | | | | | | | | | | If | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | is | | | | | | | | | | not | | | | | | | | | | set | | | | | | | | | | for | | | | | | | | | | an | | | | | | | | | | AVP, | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | shall | | | | | | | | | | not | | | | | | | | | | r | | | | | | | | | | eturn | | | | | | | | | | a | | | | | | | | | | rejec | | | | | | | | | | tion, | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | or | | | | | | | | | | not | | | | | | | | | | it | | | | | | | | | | u | | | | | | | | | | nders | | | | | | | | | | tands | | | | | | | | | | the | | | | | | | | | | AVP. | | | | | | | | | | If | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | u | | | | | | | | | | nders | | | | | | | | | | tands | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | but | | | | | | | | | | the | | | | | | | | | | M-bit | | | | | | | | | | value | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | match | | | | | | | | | | with | | | | | | | | | | the | | | | | | | | | | defin | | | | | | | | | | ition | | | | | | | | | | in | | | | | | | | | | this | | | | | | | | | | t | | | | | | | | | | able, | | | | | | | | | | the | | | | | | | | | | rec | | | | | | | | | | eiver | | | | | | | | | | shall | | | | | | | | | | i | | | | | | | | | | gnore | | | | | | | | | | the | | | | | | | | | | M | | | | | | | | | | -bit. | | | | | | | | | +-------+-------+-------+-------+------+-----+-------+-------+-------+
The following table specifies the Diameter AVPs re-used by the S6a/S6d
interface protocol from existing Diameter Applications, including a reference
to their respective specifications and when needed, a short description of
their use within S6a and S6d.
Any other AVPs from existing Diameter Applications, except for the AVPs from
Diameter Base Protocol, do not need to be supported. The AVPs from Diameter
Base Protocol are not included in table 7.3.1/2, but they may be re-used for
the S6a/S6d protocol, the S7a/S7protocol and the S13/S13\' protocol.
Table 7.3.1/2: S6a/S6d, S7a/S7d and S13/S13\' re-used Diameter AVPs
+----------------+----------------+----------------+--------------+ | Attribute Name | Reference | Comments | M-bit | +----------------+----------------+----------------+--------------+ | Ser | IETF RFC 5778 | See section | | | vice-Selection | [20] | 7.3.36 | | +----------------+----------------+----------------+--------------+ | 3 | 3GPP TS 29.061 | See 3GPP TS | | | GPP-Charging-C | [21] | 32.251 [33] | | | haracteristics | | Annex A and | | | | | 3GPP TS 32.298 | | | | | [22] section | | | | | 5.1.2.2.7 | | | | | | | | | | This attribute | | | | | holds the EPS | | | | | PDN Connection | | | | | Charging | | | | | C | | | | | haracteristics | | | | | data for an | | | | | EPS APN | | | | | Configuration, | | | | | or the PDP | | | | | context | | | | | Charging | | | | | C | | | | | haracteristics | | | | | for GPRS PDP | | | | | context, or | | | | | the Subscribed | | | | | Charging | | | | | C | | | | | haracteristics | | | | | data for the | | | | | subscriber | | | | | level 3GPP | | | | | Charging | | | | | Ch | | | | | aracteristics; | | | | | refer to 3GPP | | | | | TS 23.008 | | | | | [30]. | | +----------------+----------------+----------------+--------------+ | Supp | 3GPP TS 29.229 | | | | orted-Features | [9] | | | +----------------+----------------+----------------+--------------+ | F | 3GPP TS 29.229 | | | | eature-List-ID | [9] | | | +----------------+----------------+----------------+--------------+ | Feature-List | 3GPP TS 29.229 | See section | | | | [9] | 7.3.10 | | +----------------+----------------+----------------+--------------+ | Served-Pa | 3GPP TS 32.299 | holds the PDN | | | rty-IP-Address | [8] | IP Address of | | | | | the user | | +----------------+----------------+----------------+--------------+ | QoS-Cl | 3GPP TS 29.212 | | | | ass-Identifier | [10] | | | +----------------+----------------+----------------+--------------+ | A | 3GPP TS 29.212 | See section | | | llocation-Rete | [10] | 7.3.40 | | | ntion-Priority | | | | +----------------+----------------+----------------+--------------+ | Priority-Level | 3GPP TS 29.212 | | | | | [10] | | | +----------------+----------------+----------------+--------------+ | Pre-empt | 3GPP TS 29.212 | | | | ion-Capability | [10] | | | +----------------+----------------+----------------+--------------+ | Pre-emption | 3GPP TS 29.212 | | | | -Vulnerability | [10] | | | +----------------+----------------+----------------+--------------+ | Max-Requeste | 3GPP TS 29.214 | | | | d-Bandwidth-DL | [11] | | | +----------------+----------------+----------------+--------------+ | Max-Requeste | 3GPP TS 29.214 | | | | d-Bandwidth-UL | [11] | | | +----------------+----------------+----------------+--------------+ | RAT-Type | 3GPP TS 29.212 | See section | Must set | | | [10] | 7.3.13 | | +----------------+----------------+----------------+--------------+ | MSISDN | 3GPP TS 29.329 | | | | | [25] | | | +----------------+----------------+----------------+--------------+ | M | IETF RFC 5447 | | | | IP6-Agent-Info | [26] | | | +----------------+----------------+----------------+--------------+ | MIP-Home | IETF RFC 4004 | | | | -Agent-Address | [27] | | | +----------------+----------------+----------------+--------------+ | MIP-H | IETF RFC 4004 | | | | ome-Agent-Host | [27] | | | +----------------+----------------+----------------+--------------+ | PDP-Address | 3GPP TS 32.299 | | | | | [8] | | | +----------------+----------------+----------------+--------------+ | Confi | 3GPP TS 29.229 | See section | | | dentiality-Key | [9] | 7.3.57 | | +----------------+----------------+----------------+--------------+ | Integrity-Key | 3GPP TS 29.229 | See section | | | | [9] | 7.3.58 | | +----------------+----------------+----------------+--------------+ | Visited-Netw | 3GPP TS 29.229 | See section | Must not set | | ork-Identifier | [9] | 7.3.105 | | +----------------+----------------+----------------+--------------+ | GMLC-Address | 3GPP TS 29.173 | See section | Must not set | | | [37] | 7.3.109 | | +----------------+----------------+----------------+--------------+ | User-C | 3GPP TS 32.299 | | Must not set | | SG-Information | [8] | | | +----------------+----------------+----------------+--------------+ | ProSe-Sub | 3GPP TS 29.344 | See section | Must not set | | scription-Data | [49] | 7.3.180 | | +----------------+----------------+----------------+--------------+ | OC-Supp | IETF RFC 7683 | See section | Must not set | | orted-Features | [50] | 7.3.178 | | +----------------+----------------+----------------+--------------+ | OC-OLR | IETF RFC 7683 | See section | Must not set | | | [50] | 7.3.179 | | +----------------+----------------+----------------+--------------+ | SCE | 3GPP TS 29.336 | | Must not set | | F-Reference-ID | [54] | | | +----------------+----------------+----------------+--------------+ | SCEF-ID | 3GPP TS 29.336 | | Must not set | | | [54] | | | +----------------+----------------+----------------+--------------+ | AESE-Communi | 3GPP TS 29.336 | see section | Must not set | | cation-Pattern | [54] | 7.3.193 | | +----------------+----------------+----------------+--------------+ | Communicati | 3GPP TS 29.336 | see section | Must not set | | on-Pattern-set | [54] | 7.3.194 | | +----------------+----------------+----------------+--------------+ | Mo | 3GPP TS 29.336 | See section | Must not set | | nitoring-Event | [54] | 7.3.195 | | | -Configuration | | | | +----------------+----------------+----------------+--------------+ | Monitorin | 3GPP TS 29.336 | See section | Must not set | | g-Event-Report | [54] | 7.3.196 | | +----------------+----------------+----------------+--------------+ | U | 3GPP TS 29.336 | See section | Must not set | | E-Reachability | [54] | 7.3.197 | | | -Configuration | | | | +----------------+----------------+----------------+--------------+ | eNodeB-ID | 3GPP TS 29.217 | See section | Must not set | | | [56] | 7.3.198 | | +----------------+----------------+----------------+--------------+ | SC | 3GPP TS 29.336 | | Must not set | | EF-Reference-I | [54] | | | | D-for-Deletion | | | | +----------------+----------------+----------------+--------------+ | M | 3GPP TS 29.336 | | Must not set | | onitoring-Type | [54] | | | +----------------+----------------+----------------+--------------+ | Maximum-Num | 3GPP TS 29.336 | | Must not set | | ber-of-Reports | [54] | | | +----------------+----------------+----------------+--------------+ | Monit | 3GPP TS 29.336 | | Must not set | | oring-Duration | [54] | | | +----------------+----------------+----------------+--------------+ | Charged-Party | 3GPP TS 29.336 | | Must not set | | | [54] | | | +----------------+----------------+----------------+--------------+ | U | 3GPP TS 29.336 | | Must not set | | E-Reachability | [54] | | | | -Configuration | | | | +----------------+----------------+----------------+--------------+ | Locati | 3GPP TS 29.336 | | Must not set | | on-Information | [54] | | | | -Configuration | | | | +----------------+----------------+----------------+--------------+ | Rea | 3GPP TS 29.336 | | Must not set | | chability-Type | [54] | | | +----------------+----------------+----------------+--------------+ | Maximum | 3GPP TS 29.336 | | Must not set | | -Response-Time | [54] | | | +----------------+----------------+----------------+--------------+ | Reachabili | 3GPP TS 29.336 | | Must not set | | ty-Information | [54] | | | +----------------+----------------+----------------+--------------+ | Mo | 3GPP TS 29.336 | | Must not set | | nitoring-Event | [54] | | | | -Config-Status | | | | +----------------+----------------+----------------+--------------+ | Supp | 3GPP TS 29.336 | see section | Must not set | | orted-Services | [54] | 7.3.199 | | +----------------+----------------+----------------+--------------+ | Supported-Mon | 3GPP TS 29.336 | see section | Must not set | | itoring-Events | [54] | 7.3.200 | | +----------------+----------------+----------------+--------------+ | DRMP | IETF RFC 7944 | see section | Must not set | | | [57] | 7.3.203 | | +----------------+----------------+----------------+--------------+ | Reference-ID | 3GPP TS 29.336 | | Must not set | | -Validity-Time | [54] | | | +----------------+----------------+----------------+--------------+ | Maximum-UE-Ava | 3GPP TS 29.338 | see section | Must not set | | ilability-Time | [48] | 5.3.3.22 | | +----------------+----------------+----------------+--------------+ | NOTE 1: The | | | | | M-bit settings | | | | | for re-used | | | | | AVPs override | | | | | those of the | | | | | defining | | | | | specifications | | | | | that are | | | | | referenced. | | | | | Values | | | | | include: | | | | | \"Must set\", | | | | | \"Must not | | | | | set\". If the | | | | | M-bit setting | | | | | is blank, then | | | | | the defining | | | | | specification | | | | | applies. | | | | | | | | | | NOTE 2: If the | | | | | M-bit is set | | | | | for an AVP and | | | | | the receiver | | | | | does not | | | | | understand the | | | | | AVP, it shall | | | | | return a | | | | | rejection. If | | | | | the M-bit is | | | | | not set for an | | | | | AVP, the | | | | | receiver shall | | | | | not return a | | | | | rejection, | | | | | whether or not | | | | | it understands | | | | | the AVP. If | | | | | the receiver | | | | | understands | | | | | the AVP but | | | | | the M-bit | | | | | value does not | | | | | match with the | | | | | definition in | | | | | this table, | | | | | the receiver | | | | | shall ignore | | | | | the M-bit. | | | | +----------------+----------------+----------------+--------------+
### 7.3.2 Subscription-Data
The Subscription-Data AVP is of type Grouped. It shall contain the information
related to the user profile relevant for EPS and GERAN/UTRAN.
AVP format:
> Subscription-Data ::= \
>
> [ Subscriber-Status ]
>
> [ MSISDN ]
>
> [ A-MSISDN ]
>
> [ STN-SR ]
>
> [ ICS-Indicator ]
>
> [ Network-Access-Mode ]
>
> [ Operator-Determined-Barring ]
>
> [ HPLMN-ODB ]
>
> *10[ Regional-Subscription-Zone-Code ]
>
> [ Access-Restriction-Data ]
>
> [ APN-OI-Replacement ]
>
> [ LCS-Info ]
>
> [ Teleservice-List ]
>
> *[ Call-Barring-Info ]
>
> [ 3GPP-Charging-Characteristics ]
>
> [ AMBR ]
>
> [ APN-Configuration-Profile ]
>
> [ RAT-Frequency-Selection-Priority-ID ]
>
> [ Trace-Data]
>
> [ GPRS-Subscription-Data ]
>
> *[ CSG-Subscription-Data ]
>
> [ Roaming-Restricted-Due-To-Unsupported-Feature ]
>
> [ Subscribed-Periodic-RAU-TAU-Timer ]
>
> [ MPS-Priority ]
>
> [ VPLMN-LIPA-Allowed ]
>
> [ Relay-Node-Indicator ]
>
> [ MDT-User-Consent ]
>
> [ Subscribed-VSRVCC ]
>
> [ ProSe-Subscription-Data ]
>
> [ Subscription-Data-Flags ]
>
> *[ Adjacent-Access-Restriction-Data ]
>
> [ DL-Buffering-Suggested-Packet-Count ]
>
> *[ IMSI-Group-Id ]
>
> [ UE-Usage-Type ]
>
> *[ AESE-Communication-Pattern ]
>
> *[ Monitoring-Event-Configuration ]
>
> *[ AVP ]
The AMBR included in this grouped AVP shall include the AMBR associated to the
user's subscription (UE-AMBR); Max-Requested-Bandwidth-UL and Max-Requested-
Bandwidth-DL within this AVP shall not both be set to \"0\".
The APN-OI-Replacement included in this grouped AVP shall include the UE level
APN-OI-Replacement associated to the user's subscription.
### 7.3.3 Terminal-Information
The Terminal-Information AVP is of type Grouped. This AVP shall contain the
information about the user's terminal.
AVP format
> Terminal-Information ::= \
>
> [ IMEI ]
>
> [ 3GPP2-MEID ]
>
> [ Software-Version ]
>
> *[ AVP ]
### 7.3.4 IMEI
The IMEI AVP is of type UTF8String. This AVP shall contain the International
Mobile Equipment Identity, as specified in 3GPP TS 23.003 [3]. It should
consist of 14 digits, including the 8-digit Type Allocation Code (TAC) and the
6-digit Serial Number (SNR). It may also include a 15^th^ digit.
### 7.3.5 Software-Version
The Software-Version AVP is of type UTF8String. This AVP shall contain the
2-digit Software Version Number (SVN) of the International Mobile Equipment
Identity, as specified in 3GPP TS 23.003 [3].
### 7.3.6 3GPP2-MEID
This AVP is of type OctetString. This AVP contains the Mobile Equipment
Identifier of the user\'s terminal. For further details on the encoding of the
AVP data, refer to the encoding of the Mobile Identity (MEID) octets 3 to 10
in 3GPP2 A.S0022 [28] Annex A.
### 7.3.7 ULR-Flags
The ULR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.7/1:
Table 7.3.7/1: ULR-Flags
+----------------------+----------------------+----------------------+ | Bit | Name | Description | +----------------------+----------------------+----------------------+ | 0 | Single-Reg | This bit, when set, | | | istration-Indication | indicates that the | | | | HSS shall send | | | | Cancel Location to | | | | the SGSN. An SGSN | | | | shall not set this | | | | bit when sending | | | | ULR. | +----------------------+----------------------+----------------------+ | 1 | S6a/S6d-Indicator | This bit, when set, | | | | indicates that the | | | | ULR message is sent | | | | on the S6a | | | | interface, i.e. the | | | | source node is an | | | | MME (or a combined | | | | MME/SGSN to which | | | | the UE is attached | | | | via E-UTRAN). | | | | | | | | This bit, when | | | | cleared, indicates | | | | that the ULR message | | | | is sent on the S6d | | | | interface, i.e. the | | | | source node is an | | | | SGSN (or a combined | | | | MME/SGSN to which | | | | the UE is attached | | | | via UTRAN or GERAN). | +----------------------+----------------------+----------------------+ | 2 | Skip Subscriber Data | This bit, when set, | | | | indicates that the | | | | HSS may skip | | | | subscription data in | | | | ULA. If the | | | | subscription data | | | | has changed in the | | | | HSS after the last | | | | successful update of | | | | the MME/SGSN, the | | | | HSS shall ignore | | | | this bit and send | | | | the updated | | | | subscription data. | | | | If the HSS | | | | effectively skips | | | | the sending of | | | | subscription data, | | | | the | | | | GPRS-Subscri | | | | ption-Data-Indicator | | | | flag can be ignored. | +----------------------+----------------------+----------------------+ | 3 | GPRS-Subscri | This bit, when set, | | | ption-Data-Indicator | indicates that the | | | | HSS shall include in | | | | the ULA command the | | | | GPRS subscription | | | | data, if available | | | | in the HSS; it shall | | | | be included in the | | | | GP | | | | RS-Subscription-Data | | | | AVP inside the | | | | Subscription-Data | | | | AVP (see 7.3.2). | | | | | | | | Otherwise, the HSS | | | | shall not include | | | | the | | | | GP | | | | RS-Subscription-Data | | | | AVP in the response, | | | | unless the Update | | | | Location Request is | | | | received over the | | | | S6d interface and | | | | there is no APN | | | | configuration | | | | profile stored for | | | | the subscriber, or | | | | when the | | | | subscription data is | | | | returned by a | | | | Pre-Rel-8 HSS (via | | | | an IWF). | | | | | | | | A standalone MME | | | | shall not set this | | | | bit when sending a | | | | ULR. | +----------------------+----------------------+----------------------+ | 4 | Node-Type-Indicator | This bit, when set, | | | | indicates that the | | | | requesting node is a | | | | combined MME/SGSN. | | | | | | | | This bit, when | | | | cleared, indicates | | | | that the requesting | | | | node is a single MME | | | | or SGSN; in this | | | | case, if the | | | | S6a/S6d-Indicator is | | | | set, the HSS may | | | | skip the check of | | | | those supported | | | | features only | | | | applicable to the | | | | SGSN, and if, in | | | | addition the MME | | | | does not request to | | | | be registered for | | | | SMS, the HSS may | | | | consequently skip | | | | the download of the | | | | SMS related | | | | subscription data to | | | | a standalone MME. | | | | NOTE2 | +----------------------+----------------------+----------------------+ | 5 | Init | This bit, when set, | | | ial-Attach-Indicator | indicates that the | | | | HSS shall send | | | | Cancel Location to | | | | the MME or SGSN if | | | | there is the MME or | | | | SGSN registration. | +----------------------+----------------------+----------------------+ | 6 | PS-LCS | This bit, when set, | | | -Not-Supported-By-UE | indicates to the HSS | | | | that the UE does not | | | | support neither UE | | | | Based nor UE | | | | Assisted positioning | | | | methods for Packet | | | | Switched Location | | | | Services. The MME | | | | shall set this bit | | | | on the basis of the | | | | UE capability | | | | information. The | | | | SGSN shall set this | | | | bit on the basis of | | | | the UE capability | | | | information and the | | | | access technology | | | | supported by the | | | | SGSN. | +----------------------+----------------------+----------------------+ | 7 | SMS-Only-Indication | This bit, when set, | | | | indicates that the | | | | UE indicated \"SMS | | | | only\" when | | | | requesting a | | | | combined IMSI attach | | | | or combined RA/LU. | +----------------------+----------------------+----------------------+ | NOTE1: Bits not | | | | defined in this | | | | table shall be | | | | cleared by the | | | | sending MME or SGSN | | | | and discarded by the | | | | receiving HSS. | | | | | | | | NOTE2: If the MME is | | | | registered for SMS | | | | then the HSS will | | | | download the SMS | | | | related data also | | | | for the standalone | | | | MME. | | | +----------------------+----------------------+----------------------+
### 7.3.8 ULA-Flags
The ULA-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.8/1:
Table 7.3.8/1: ULA-Flags
* * *
Bit Name Description 0 Separation Indication This bit, when set, indicates
that the HSS stores SGSN number and MME number in separate memory. A Rel-8 HSS
shall set the bit. An IWF interworking with a pre Rel-8 HSS/HLR shall clear
the bit. 1 MME Registered for SMS This bit, when set, indicates that the HSS
has registered the MME for SMS. NOTE: Bits not defined in this table shall be
cleared by the sending HSS and discarded by the receiving MME or SGSN.
* * *
### 7.3.9 Visited-PLMN-Id
The Visited-PLMN-Id AVP is of type OctetString. This AVP shall contain the
concatenation of MCC and MNC. See 3GPP TS 23.003 [3]. The content of this AVP
shall be encoded as an octet string according to table 7.3.9-1.
See 3GPP TS 24.008 [31], clause 10.5.1.13, PLMN list, for the coding of MCC
and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 2 are coded as
\"1111\".
**Table 7.3.9/1: Encoding format for Visited-PLMN-Id AVP**
* * *
8 7 6 5 4 3 2 1  
MCC digit 2 MCC digit 1 octet 1  
MNC digit 3 MCC digit 3 octet 2  
MNC digit 2 MNC digit 1 octet 3
* * *
### 7.3.10 Feature-List AVP
#### 7.3.10.1 Feature-List AVP for the S6a/S6d application
The syntax of this AVP is defined in 3GPP TS 29.229 [9].
For the S6a/S6d application, the meaning of the bits shall be as defined in
table 7.3.10/1 for the Feature-List-ID 1 and in table 7.3.10/2 for the
Feature-List-ID 2.
Table 7.3.10/1: Features of Feature-List-ID 1 used in S6a/S6d
+-------------------+-------------------+-----+-------------------+ | Feature bit | Feature | M/O | Description | +-------------------+-------------------+-----+-------------------+ | 0 | ODB-all-APN | O | Operator | | | | | Determined | | | | | Barring of all | | | | | Packet Oriented | | | | | Services | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update | | | | | by sending | | | | | DIAM | | | | | ETER_ERROR_ROAM | | | | | ING_NOT_ALLOWED | | | | | and, optionally, | | | | | including the | | | | | type of ODB in | | | | | the | | | | | Error-Diagnostic | | | | | AVP. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 1 | ODB-HPLMN-APN | O | Operator | | | | | Determined | | | | | Barring of Packet | | | | | Oriented Services | | | | | from access | | | | | points that are | | | | | within the HPLMN | | | | | whilst the | | | | | subscriber is | | | | | roaming in a | | | | | VPLMN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update | | | | | by sending | | | | | DIAM | | | | | ETER_ERROR_ROAM | | | | | ING_NOT_ALLOWED | | | | | and, optionally, | | | | | including the | | | | | type of ODB in | | | | | the | | | | | Error-Diagnostic | | | | | AVP. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 2 | ODB-VPLMN-APN | O | Operator | | | | | Determined | | | | | Barring of Packet | | | | | Oriented Services | | | | | from access | | | | | points that are | | | | | within the roamed | | | | | to VPLMN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update | | | | | by sending | | | | | DIAM | | | | | ETER_ERROR_ROAM | | | | | ING_NOT_ALLOWED | | | | | and, optionally, | | | | | including the | | | | | type of ODB in | | | | | the | | | | | Error-Diagnostic | | | | | AVP. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 3 | ODB-all-OG | | Operator | | | | | Determined | | | | | Barring of all | | | | | outgoing calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 4 | ODB-all- | O | Operator | | | InternationalOG | | Determined | | | | | Barring of all | | | | | outgoing | | | | | international | | | | | calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs.If the MME | | | | | or SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 5 | ODB-all | O | Operator | | | -InternationalOGN | | Determined | | | otToHPLMN-Country | | Barring of all | | | | | outgoing | | | | | international | | | | | calls except | | | | | those directed to | | | | | the home PLMN | | | | | country | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 6 | ODB | O | Operator | | | -all-InterzonalOG | | Determined | | | | | Barring of all | | | | | outgoing | | | | | inter-zonal calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 7 | ODB- | O | Operator | | | all-InterzonalOGN | | Determined | | | otToHPLMN-Country | | Barring of all | | | | | outgoing | | | | | inter-zonal calls | | | | | except those | | | | | directed to the | | | | | home PLMN country | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 8 | ODB-a | O | Operator | | | ll-InterzonalOGAn | | Determined | | | dInternationalOGN | | Barring of all | | | otToHPLMN-Country | | outgoing | | | | | international | | | | | calls except | | | | | those directed to | | | | | the home PLMN | | | | | country and | | | | | Barring of all | | | | | outgoing | | | | | inter-zonal calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | this ODB barring | | | | | category to the | | | | | MME or SGSN | | | | | within ULA. | | | | | Instead the HSS | | | | | may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent this | | | | | ODB category | | | | | within IDR, the | | | | | HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 9 | RegSub | O | Regional | | | | | Subscription | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA, | | | | | IDR/IDA and | | | | | DSR/DSA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | Regional | | | | | Subscription Zone | | | | | Codes to the MME | | | | | or SGSN within | | | | | ULA. Instead the | | | | | HSS may reject | | | | | location update. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA and the | | | | | HSS has sent | | | | | Regional | | | | | Subscription Zone | | | | | Codes within IDR, | | | | | the HSS may apply | | | | | barring of | | | | | roaming and send | | | | | CLR. | +-------------------+-------------------+-----+-------------------+ | 10 | Trace | O | Trace Function | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA, | | | | | IDR/IDA and | | | | | DSR/DSA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in ULR, the HSS | | | | | shall not send | | | | | Trace Data to the | | | | | MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent | | | | | Trace Data | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further Trace | | | | | Data to that MME | | | | | or SGSN. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in DSA, and the | | | | | HSS has sent | | | | | Trace Data | | | | | within DSR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further Trace | | | | | Data to that MME | | | | | or SGSN | +-------------------+-------------------+-----+-------------------+ | 11 | LCS-all-PrivExcep | O | All LCS Privacy | | | | | Exception Classes | | | (NOTE 1) | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 12 | LCS-Universal | O | _Allow location | | | | | by any LCS | | | (NOTE 1) | | client_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 13 | LCS-C | O | _Allow location | | | allSessionRelated | | by any value | | | | | added LCS client | | | (NOTE 1) | | to which a | | | | | call/session is | | | | | established from | | | | | the target UE_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 14 | LCS-Cal | O | _Allow location | | | lSessionUnrelated | | by designated | | | | | external value | | | (NOTE 1) | | added LCS | | | | | clients_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 15 | LCS-PLMNOperator | O | _Allow location | | | | | by designated | | | (NOTE 1) | | PLMN operator LCS | | | | | clients_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 16 | LCS-ServiceType | O | _Allow location | | | | | by LCS clients of | | | (NOTE 1) | | a designated LCS | | | | | service type_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports MAP | | | | | based Lg | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 17 | LCS-all-MOLR-SS | O | _All Mobile | | | | | Originating | | | (NOTE 1) | | Location Request | | | | | Classes_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | Over S6d | | | | | interface, this | | | | | feature is | | | | | applicable when | | | | | the SGSN supports | | | | | MAP based Lg | | | | | interface. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related LCS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 18 | LCS- | O | _Allow an MS to | | | BasicSelfLocation | | request its own | | | | | location_ | | | (NOTE 1) | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | Over S6d | | | | | interface, this | | | | | feature is | | | | | applicable when | | | | | the SGSN supports | | | | | MAP based Lg | | | | | interface. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related LCS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 19 | LCS- | O | _Allow an MS to | | | Auton | | perform self | | | omousSelfLocation | | location without | | | | | interaction with | | | (NOTE 1) | | the PLMN_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | Over S6d | | | | | interface, this | | | | | feature is | | | | | applicable when | | | | | the SGSN supports | | | | | MAP based Lg | | | | | interface. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related LCS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 20 | LCS- | O | _Allow an MS to | | | Tra | | request transfer | | | nsferToThirdParty | | of its location | | | | | to another LCS | | | | | client_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | Over S6d | | | | | interface, this | | | | | feature is | | | | | applicable when | | | | | the SGSN supports | | | | | MAP based Lg | | | | | interface. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related LCS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 21 | SM-MO-PP | O | Short Message | | | | | MO-PP | | | (NOTE 1) | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related SMS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 22 | Barr | O | Barring of | | | ing-OutgoingCalls | | Outgoing Calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related SMS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 23 | BAOC | O | Barring of all | | | | | outgoing calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related SMS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 24 | BOIC | O | Barring of | | | | | outgoing | | | | | international | | | | | calls | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related SMS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 25 | BOICExHC | O | Barring of | | | | | outgoing | | | | | international | | | | | calls except | | | | | those directed to | | | | | the home PLMN | | | | | Country | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME or SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in IDA, and the | | | | | HSS has sent the | | | | | related SMS | | | | | information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 26 | UE-Reachabi | O | UE Reachability | | | lity-Notification | | Notifcation | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support the | | | | | UE-Reachabili | | | | | ty-Notifications, | | | | | the HSS shall not | | | | | set the | | | | | \"UE-Reach | | | | | ability-Request\" | | | | | bit in IDR-Flags | | | | | in subsequent IDR | | | | | commands towards | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 27 | T-ADS Data | O | Terminating | | | Retrieval | | Access Domain | | | | | Selection Data | | | | | Retrieval | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support the | | | | | retrieval of | | | | | T-ADS data via | | | | | IDR/IDA commands, | | | | | the HSS shall not | | | | | set the \"T-ADS | | | | | Data Request\" | | | | | bit in IDR-Flags | | | | | in subsequent IDR | | | | | commands towards | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 28 | St | O | State/Location | | | ate/Location-Info | | Information | | | rmation-Retrieval | | Retrieval | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support | | | | | State/Location | | | | | Information | | | | | Retrieval, the | | | | | HSS shall not set | | | | | the \"EPS User | | | | | State Request\", | | | | | \"EPS Location | | | | | Information | | | | | Request\" or | | | | | \"Current | | | | | Location | | | | | Request\" bits in | | | | | IDR-Flags in | | | | | subsequent IDR | | | | | commands towards | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 29 | Partial Purge | O | Partial Purge | | | | | from a Combined | | | | | MME/SGSN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | PUR/PUA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the HSS | | | | | indicates in the | | | | | ULA command that | | | | | it does not | | | | | support Partial | | | | | Purge, the | | | | | combined MME/SGSN | | | | | shall not include | | | | | in the PUR | | | | | command the | | | | | indication of the | | | | | specific serving | | | | | node where the | | | | | Purge has been | | | | | done. | +-------------------+-------------------+-----+-------------------+ | 30 | Local Time Zone | O | UE Time Zone | | | Retrieval | | Retrieval | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support the | | | | | retrieval of | | | | | Local Time Zone | | | | | via IDR/IDA | | | | | commands, the HSS | | | | | shall not set the | | | | | \"Local Time Zone | | | | | Request\" bit in | | | | | IDR-Flags in | | | | | subsequent IDR | | | | | commands towards | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 31 | Additional MSISDN | O | Additional MSISDN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA, | | | | | IDR/IDA and | | | | | DSR/DSA command | | | | | pairs, over S6a | | | | | and S6d. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support A-MSISDN, | | | | | the HSS shall | | | | | populate the | | | | | MSISDN AVP either | | | | | with the | | | | | subscribed MSISDN | | | | | or the subscribed | | | | | additional MSISDN | | | | | based on operator | | | | | policy and | | | | | availability and | | | | | the HSS shall not | | | | | send IDR with the | | | | | A-MSISDN AVP or | | | | | DSR with the | | | | | \"A-MSISDN | | | | | Withdrawal\" bit | | | | | to the serving | | | | | nodes when the | | | | | subscription data | | | | | is changed. | +-------------------+-------------------+-----+-------------------+ | Feature bit: The | | | | | order number of | | | | | the bit within | | | | | the | | | | | **S | | | | | upported-Features | | | | | AVP, e.g.** | | | | | \"**1** \"**.** | | | | | | | | | | **Feature: A | | | | | short name that | | | | | can be used to | | | | | refer to the bit | | | | | and to the | | | | | feature, e.g.** | | | | | \"**ODB-H | | | | | PLMN-APN** \"**.** | | | | | | | | | | **M/O: Defines if | | | | | the | | | | | implementation of | | | | | the feature is | | | | | mandatory | | | | | (** \"**M** \"**) | | | | | or optional | | | | | ( | | | | |** \"**O** \"**).** | | | | | | | | | | Description: A | | | | | clear textual | | | | | description of | | | | | the feature. | | | | | | | | | | NOTE 1: If both | | | | | bits, | | | | | corresponding to | | | | | the feature | | | | | defined for Lg | | | | | interface and Lgd | | | | | interface | | | | | respectively, are | | | | | not set, and the | | | | | HSS supports the | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA and IDR. | | | | +-------------------+-------------------+-----+-------------------+
Table 7.3.10/2: Features of Feature-List-ID 2 used in S6a/S6d
+-------------------+-------------------+-----+-------------------+ | Feature bit | Feature | M/O | Description | +-------------------+-------------------+-----+-------------------+ | 0 | SMS in MME | O | SMS in MME | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA, | | | | | IDR/IDA, DSR/DSA, | | | | | NOR/NOA command | | | | | pairs, over S6a. | | | | | | | | | | It is used by the | | | | | MME to notify the | | | | | HSS it is capable | | | | | of SMS transfer | | | | | without the need | | | | | of establishing | | | | | an SGs | | | | | association with | | | | | an MSC. | | | | | | | | | | If the MME does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related SMS | | | | | information to | | | | | the MME within | | | | | ULA. | | | | | | | | | | If the MME does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | SMS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further SMS | | | | | information to | | | | | that MME. | | | | | | | | | | If the HSS does | | | | | not support this | | | | | feature, the HSS | | | | | shall ignore any | | | | | request for a | | | | | registration for | | | | | SMS; the MME may | | | | | store this | | | | | feature | | | | | indication, and | | | | | not send any | | | | | further request | | | | | for a | | | | | registration for | | | | | SMS to the HSS. | +-------------------+-------------------+-----+-------------------+ | 1 | SMS in SGSN | O | SMS in SGSN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA | | | | | command pair, | | | | | over S6d. | | | | | | | | | | If the SGSN | | | | | indicates in the | | | | | ULR command that | | | | | it does not | | | | | support this | | | | | feature, the HSS | | | | | shall not | | | | | indicate \"SMS in | | | | | SGSN Allowed\" to | | | | | the SGSN. | +-------------------+-------------------+-----+-------------------+ | 2 | Dia- | O | All LCS Privacy | | | LCS-all-PrivExcep | | Exception Classes | | | | | | | | (NOTE 1) | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 3 | Dia-LCS-Universal | O | _Allow location | | | | | by any LCS | | | (NOTE 1) | | client_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 4 | Dia-LCS-C | O | _Allow location | | | allSessionRelated | | by any value | | | | | added LCS client | | | (NOTE 1) | | to which a | | | | | call/session is | | | | | established from | | | | | the target UE_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 5 | Dia-LCS-Cal | O | _Allow location | | | lSessionUnrelated | | by designated | | | | | external value | | | (NOTE 1) | | added LCS | | | | | clients_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 6 | Dia | O | _Allow location | | | -LCS-PLMNOperator | | by designated | | | | | PLMN operator LCS | | | (NOTE 1) | | clients_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 7 | Di | O | _Allow location | | | a-LCS-ServiceType | | by LCS clients of | | | | | a designated LCS | | | (NOTE 1) | | service type_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 8 | Di | O | _All Mobile | | | a-LCS-all-MOLR-SS | | Originating | | | | | Location Request | | | (NOTE 1) | | Classes_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 9 | Dia-LCS- | O | _Allow an MS to | | | BasicSelfLocation | | request its own | | | | | location_ | | | (NOTE 1) | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 10 | Dia-LCS- | O | _Allow an MS to | | | Auton | | perform self | | | omousSelfLocation | | location without | | | | | interaction with | | | (NOTE 1) | | the PLMN_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 11 | Dia-LCS- | O | _Allow an MS to | | | Tra | | request transfer | | | nsferToThirdParty | | of its location | | | | | to another LCS | | | (NOTE 1) | | client_ | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6d interface, | | | | | when the SGSN | | | | | supports Diameter | | | | | based Lgd | | | | | interface. | | | | | | | | | | If the SGSN does | | | | | not support this | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA. | | | | | | | | | | If the SGSN does | | | | | not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | LCS information | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further LCS | | | | | information to | | | | | that SGSN. | +-------------------+-------------------+-----+-------------------+ | 12 | Gdd-in-SGSN | O | Support of | | | | | Diameter based | | | | | Gdd interface for | | | | | SMS in SGSN | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA | | | | | command pair over | | | | | S6d, when the | | | | | SGSN supports the | | | | | Diameter based | | | | | Gdd interface for | | | | | SMS in SGSN. | +-------------------+-------------------+-----+-------------------+ | 13 | Optimized | O | Support for the | | | -LCS-Proc-Support | | optimized LCS | | | | | procedure | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA | | | | | command pair over | | | | | S6a/S6d, when the | | | | | network supports | | | | | ISR and when the | | | | | node is combined | | | | | MME/SGSN and | | | | | supports | | | | | optimized LCS | | | | | procedure as | | | | | described in 3GPP | | | | | TS 29.172 [47] | | | | | subclause 6.2.2. | +-------------------+-------------------+-----+-------------------+ | 14 | SGSN CAMEL | O | Support of SGSN | | | Capability | | CAMEL Capability | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA | | | | | command pair over | | | | | S6d, when the | | | | | SGSN supports the | | | | | CAMEL capability. | +-------------------+-------------------+-----+-------------------+ | 15 | ProSe Capability | O | Support of ProSe | | | | | Capability | | | | | | | | | | This feature is | | | | | applicable for | | | | | the ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over S6a | | | | | (and S6d), when | | | | | the MME (or | | | | | combined | | | | | MME/SGSN) | | | | | supports the | | | | | ProSe capability. | | | | | | | | | | If the MME or | | | | | combined MME/SGSN | | | | | does not support | | | | | this feature, the | | | | | HSS shall not | | | | | send the related | | | | | ProSe | | | | | subscription data | | | | | to the MME or | | | | | combined MME/SGSN | | | | | within ULA. | | | | | | | | | | If the MME or | | | | | combined MME/SGSN | | | | | does not indicate | | | | | support of this | | | | | feature in IDA, | | | | | and the HSS has | | | | | sent the related | | | | | ProSe | | | | | subscription data | | | | | within IDR, the | | | | | HSS may store | | | | | this indication, | | | | | and not send any | | | | | further ProSe | | | | | subscription data | | | | | to that MME. | +-------------------+-------------------+-----+-------------------+ | 16 | P-CSCF | O | Support of P-CSCF | | | Restoration | | Restoration | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6a or S6d | | | | | interfaces, when | | | | | the MME or SGSN | | | | | supports the | | | | | execution of the | | | | | P-CSCF | | | | | restoration | | | | | procedures. | | | | | | | | | | If the MME or the | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in ULR, the HSS | | | | | shall not send | | | | | subsequent IDR | | | | | commands | | | | | requesting the | | | | | execution of | | | | | HSS-based P-CSCF | | | | | restoration | | | | | procedures, as | | | | | described in 3GPP | | | | | TS 23.380 [51] | | | | | subclause 5.4. | +-------------------+-------------------+-----+-------------------+ | 17 | Reset-IDs | O | Support of | | | | | Reset-IDs | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA and | | | | | DSR/DSA and | | | | | RSR/RSA command | | | | | pairs over the | | | | | S6a and S6d | | | | | interfaces. | | | | | | | | | | If the MME or | | | | | SGSN indicates in | | | | | the ULR command | | | | | that it does not | | | | | support | | | | | Reset-IDs, the | | | | | HSS shall not | | | | | include Reset-ID | | | | | AVPs in RSR | | | | | commands sent to | | | | | that MME or SGSN. | +-------------------+-------------------+-----+-------------------+ | 18 | Comm | O | Support of AESE | | | unication-Pattern | | communication | | | | | patterns | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over S6a | | | | | (and S6d), when | | | | | the MME (or | | | | | combined | | | | | MME/SGSN) | | | | | supports the AESE | | | | | communication | | | | | patterns. | | | | | | | | | | If the MME or | | | | | combined MME/SGSN | | | | | does not indicate | | | | | the support for | | | | | this feature, the | | | | | HSS shall not | | | | | send CP parameter | | | | | sets to the MME | | | | | or combined | | | | | MME/SGSN within | | | | | IDR/ULA command. | +-------------------+-------------------+-----+-------------------+ | 19 | Monitoring-Event | O | Support of | | | | | Monitoring Event | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6a or S6d | | | | | interfaces, when | | | | | the MME or SGSN | | | | | supports the | | | | | Monitoring event | | | | | feature. | | | | | | | | | | If the MME or | | | | | SGSN does not | | | | | indicate support | | | | | of this feature | | | | | in ULR, the HSS | | | | | shall not send | | | | | Monitoring event | | | | | configuration | | | | | data to the MME | | | | | or SGSN within | | | | | ULA and shall not | | | | | send subsequent | | | | | IDR commands | | | | | requesting the | | | | | configuration of | | | | | Monitoring events | | | | | in the MME or | | | | | SGSN. | +-------------------+-------------------+-----+-------------------+ | 20 | Dedicated Core | O | Support of | | | Networks | | Dedicated Core | | | | | Networks | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6a and S6d | | | | | interfaces. | | | | | | | | | | If the MME/SGSN | | | | | does not indicate | | | | | support of this | | | | | feature in the | | | | | ULR command, the | | | | | HSS shall not | | | | | send DCN-related | | | | | subscription data | | | | | (e.g., UE Usage | | | | | Type) in ULA, and | | | | | shall not send | | | | | subsequent IDR | | | | | commands when | | | | | such subscription | | | | | data are updated. | +-------------------+-------------------+-----+-------------------+ | 21 | Non-IP PDN Type | | Support of Non-IP | | | APNs | | PDN Type APNs | | | | | | | | | | This feature is | | | | | applicable to the | | | | | ULR/ULA and | | | | | IDR/IDA command | | | | | pairs over the | | | | | S6a interface. | | | | | | | | | | If the MME does | | | | | not indicate | | | | | support of this | | | | | feature in the | | | | | ULR command, the | | | | | HSS shall not | | | | | send APN | | | | | configurations | | | | | with a Non-IP PDN | | | | | type in the | | | | | subscription data | | | | | sent in ULA or in | | | | | IDR, and shall | | | | | not send IDR | | | | | commands with the | | | | | only purpose to | | | | | update such | | | | | subscription | | | | | data. | +-------------------+-------------------+-----+-------------------+ | Feature bit: The | | | | | order number of | | | | | the bit within | | | | | the | | | | | **S | | | | | upported-Features | | | | | AVP, e.g.** | | | | | \"**1** \"**.** | | | | | | | | | | Feature: A short | | | | | name that can be | | | | | used to refer to | | | | | the bit and to | | | | | the feature, e.g. | | | | | \"SMS in MME\". | | | | | | | | | | **M/O: Defines if | | | | | the | | | | | implementation of | | | | | the feature is | | | | | mandatory | | | | | (** \"**M** \"**) | | | | | or optional | | | | | ( | | | | |** \"**O** \"**).** | | | | | | | | | | Description: A | | | | | clear textual | | | | | description of | | | | | the feature. | | | | | | | | | | NOTE 1: If both | | | | | bits, | | | | | corresponding to | | | | | the same feature | | | | | defined for Lg | | | | | interface and Lgd | | | | | interface, are | | | | | not set, and the | | | | | HSS supports the | | | | | feature, the HSS | | | | | shall not send | | | | | the related LCS | | | | | information to | | | | | the SGSN within | | | | | ULA and IDR. | | | | +-------------------+-------------------+-----+-------------------+
Features that are not indicated in the Supported-Features AVPs within a given
application message shall not be used to construct that message.
#### 7.3.10.2 Feature-List AVP for the S7a/S7d application
For the S7a/S7d application, the feature list does not contain any feature in
this release.
### 7.3.11 Requested-EUTRAN-Authentication-Info
The Requested-EUTRAN-Authentication-Info is of type Grouped. It shall contain
the information related to the authentication requests for E-UTRAN.
AVP format
> Requested-EUTRAN-Authentication-Info ::= \
>
> [ Number-Of-Requested-Vectors ]
>
> [ Immediate-Response-Preferred ]
>
> [ Re-synchronization-Info ]
>
> *[AVP]
### 7.3.12 Requested-UTRAN- GERAN-Authentication-Info
The Requested-UTRAN-GERAN-Authentication-Info is of type Grouped. It shall
contain the information related to the to authentication requests for UTRAN or
GERAN.
AVP format
> Requested-UTRAN-GERAN-Authentication-Info ::= \
>
> [ Number-Of-Requested-Vectors]
>
> [ Immediate-Response-Preferred ]
>
> [ Re-synchronization-Info ]
>
> *[AVP]
### 7.3.13 RAT-Type
The RAT-Type AVP is of type Enumerated and is used to identify the radio
access technology that is serving the UE. See 3GPP TS 29.212 [10] for the
defined values.
### 7.3.14 Number-Of-Requested-Vectors
The Number-Of-Requested-Vectors AVP is of type Unsigned32. This AVP shall
contain the number of AVs the MME or SGSN is prepared to receive.
### 7.3.15 Re-Synchronization-Info
The Re-Synchronization-Info AVP is of type OctetString. It shall contain the
concatenation of RAND and AUTS.
### 7.3.16 Immediate-Response-Preferred
The Immediate-Response-Preferred AVP is of type Unsigned32. This optional AVP
indicates by its presence that immediate response is preferred, and by its
absence that immediate response is not preferred. If present, the value of
this AVP is not significant.
When EUTRAN-AVs and UTRAN-AVs or GERAN-AVs are requested, presence of this AVP
within the Requested-EUTRAN-Authentication-Info AVP shall indicate that
EUTRAN-AVs are requested for immediate use in the MME/SGSN; presence of this
AVP within the Requested-UTRAN-GERAN-Authentication-Info AVP shall indicate
that UTRAN-AVs or GERAN-AVs are requested for immediate use in the MME/SGSN.
It may be used by the HSS to determine the number of vectors to be obtained
from the AuC and the number of vectors downloaded to the MME or SGSN.
### 7.3.17 Authentication-Info
The Authentication-Info AVP is of type Grouped. This AVP contains
Authentication Vectors.
AVP format:
> Authentication-Info ::= \
>
> *[ E-UTRAN-Vector ]
>
> *[UTRAN-Vector]
>
> *[GERAN-Vector]
>
> *[AVP]
### 7.3.18 E-UTRAN-Vector
The E-UTRAN-Vector AVP is of type Grouped. This AVP shall contain an E-UTRAN
Vector.
AVP format:
> E-UTRAN-Vector ::= \
>
> [ Item-Number ]
>
> { RAND }
>
> { XRES }
>
> { AUTN }
>
> { KASME }
>
> *[AVP]
### 7.3.19 UTRAN-Vector
The UTRAN-Vector AVP is of type Grouped. This AVP shall contain an UTRAN
Vector.
AVP format:
> UTRAN-Vector ::= \
>
> [ Item-Number ]
>
> { RAND }
>
> { XRES }
>
> { AUTN }
>
> { Confidentiality-Key }
>
> { Integrity-Key }
>
> *[AVP]
### 7.3.20 GERAN-Vector
The GERAN-Vector AVP is of type Grouped. This AVP shall contain a GERAN
Vector.
AVP format:
> GERAN-Vector ::= \
>
> [ Item-Number ]
>
> { RAND }
>
> { SRES }
>
> { Kc }
>
> *[AVP]
### 7.3.21 Network-Access-Mode
The Network-Access-Mode AVP is of type Enumerated. The following values are
defined:
PACKET_AND_CIRCUIT (0)
Reserved (1)
ONLY_PACKET (2)
### 7.3.22 HPLMN-ODB
The HPLMN-ODB AVP is of type Unsigned32 and it shall contain a bit mask
indicating the HPLMN specific services of a subscriber that are barred by the
operator. The meaning of the bits is HPLMN specific:
Table 7.3.22/1: HPLMN-ODB
* * *
Bit Description 0 HPLMN specific barring type 1 1 HPLMN specific barring type
2 2 HPLMN specific barring type 3 3 HPLMN specific barring type 4
* * *
HPLMN-ODB may apply to mobile originated short messages; See 3GPP TS 23.015
[36].
### 7.3.23 Item-Number
The Item-Number AVP is of type Unsigned32. The Item Number is used to order
Vectors received within one request.
### 7.3.24 Cancellation-Type
The Cancellation-Type AVP is of type Enumerated and indicates the type of
cancellation. The following values are defined:
MME_UPDATE_PROCEDURE (0)
This value is used when the Cancel Location is sent to the previous MME due to
a received Update Location message from a new MME.
> SGSN_UPDATE_PROCEDURE (1)
This value is used when the Cancel Location is sent to the previous SGSN due
to a received Update Location message from a new SGSN.
SUBSCRIPTION_WITHDRAWAL (2)
This value is used:
\- when the Cancel Location is sent by the HSS to the current MME or SGSN due
to withdrawal of the user's subscription by the HSS operator;
\- when the Cancel VCSG Location is sent by the CSS to the current MME or SGSN
due to withdrawal of the user's VPLMN CSG subscription by the CSS operator.
UPDATE_PROCEDURE_IWF (3)
This value is used by an IWF when interworking with a pre-Rel-8 HSS.
> INITIAL_ATTACH_PROCEDURE (4)
This value is used when the Cancel Location is sent to the MME or SGSN due to
a received Update Location message during initial attach procedure from an
SGSN or MME respectively.
### 7.3.25 DSR-Flags
The DSR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits is defined in table 7.3.25/1:
Table 7.3.25/1: DSR-Flags
+----------------------+----------------------+----------------------+ | Bit | Name | Description | +----------------------+----------------------+----------------------+ | 0 | Regional | This bit, when set, | | | Subscription | indicates that | | | Withdrawal | Regional | | | | Subscription shall | | | | be deleted from the | | | | subscriber data. | +----------------------+----------------------+----------------------+ | 1 | Complete APN | This bit, when set, | | | Configuration | indicates that all | | | Profile Withdrawal | EPS APN | | | | configuration data | | | | for the subscriber | | | | shall be deleted | | | | from the subscriber | | | | data. This flag only | | | | applies to the S6d | | | | interface. | +----------------------+----------------------+----------------------+ | 2 | Subscribed Charging | This bit, when set, | | | Characteristics | indicates that the | | | Withdrawal | Subscribed Charging | | | | Characteristics have | | | | been deleted from | | | | the subscription | | | | data. | +----------------------+----------------------+----------------------+ | 3 | PDN subscription | This bit, when set, | | | contexts Withdrawal | indicates that the | | | | PDN subscription | | | | contexts whose | | | | identifier is | | | | included in the | | | | Context-Identifier | | | | AVP shall be | | | | deleted. | | | | | | | | (Note 1) | +----------------------+----------------------+----------------------+ | 4 | STN-SR | This bit, when set, | | | | indicates that the | | | | Session Transfer | | | | Number for SRVCC | | | | shall be deleted | | | | from the subscriber | | | | data. | +----------------------+----------------------+----------------------+ | 5 | Complete PDP context | This bit, when set, | | | list Withdrawal | indicates that all | | | | PDP contexts for the | | | | subscriber shall be | | | | deleted from the | | | | subscriber data. | +----------------------+----------------------+----------------------+ | 6 | PDP contexts | This bit, when set, | | | Withdrawal | indicates that the | | | | PDP contexts whose | | | | identifier is | | | | included in the | | | | Context-Identifier | | | | AVP shall be | | | | deleted. | | | | | | | | (Note 2) | +----------------------+----------------------+----------------------+ | 7 | Roaming Restricted | This bit, when set, | | | due to unsupported | indicates that the | | | feature | roaming restriction | | | | shall be deleted | | | | from the subscriber | | | | data in the MME or | | | | SGSN. | +----------------------+----------------------+----------------------+ | 8 | Trace Data | This bit, when set, | | | Withdrawal | indicates that the | | | | Trace Data shall be | | | | deleted from the | | | | subscriber data. | +----------------------+----------------------+----------------------+ | 9 | CSG Deleted | This bit, when set, | | | | indicates that | | | | | | | | - the | | | | "C | | | | SG-Subscription-Data | | | | from HSS" shall be | | | | deleted in the MME | | | | or SGSN when | | | | received over the | | | | S6a or S6d interface | | | | | | | | - the | | | | "C | | | | SG-Subscription-Data | | | | from CSS" shall be | | | | deleted in the MME | | | | or SGSN when | | | | received over the | | | | S7a or S7d | | | | interface. | +----------------------+----------------------+----------------------+ | 10 | APN-OI-Replacement | This bit, when set, | | | | indicates that the | | | | UE level | | | | APN-OI-Replacement | | | | shall be deleted | | | | from the subscriber | | | | data. | +----------------------+----------------------+----------------------+ | 11 | GMLC List Withdrawal | This bit, when set, | | | | indicates that the | | | | subscriber\'s LCS | | | | GMLC List shall be | | | | deleted from the MME | | | | or SGSN. | +----------------------+----------------------+----------------------+ | 12 | LCS Withdrawal | This bit, when set, | | | | indicates that the | | | | LCS service whose | | | | code is included in | | | | the SS-Code AVP | | | | shall be deleted | | | | from the MME or | | | | SGSN. | +----------------------+----------------------+----------------------+ | 13 | SMS Withdrawal | This bit, when set, | | | | indicates that the | | | | SMS service whose | | | | code is included in | | | | the SS-Code AVP or | | | | TS-Code AVP shall be | | | | deleted from the MME | | | | or SGSN. | +----------------------+----------------------+----------------------+ | 14 | Subscribed periodic | This bit, when set, | | | RAU-TAU Timer | indicates that the | | | Withdrawal | subscribed periodic | | | | RAU TAU Timer value | | | | shall be deleted | | | | from the subscriber | | | | data. | +----------------------+----------------------+----------------------+ | 15 | Subscribed VSRVCC | This bit, when set, | | | Withdrawal | indicates that the | | | | Subscribed VSRVCC | | | | shall be deleted | | | | from the subscriber | | | | data. | +----------------------+----------------------+----------------------+ | 16 | A-MSISDN | This bit, when set, | | | | indicates that the | | | Withdrawal | additional MSISDN, | | | | if present, shall be | | | | deleted from the | | | | subscriber data. | +----------------------+----------------------+----------------------+ | 17 | ProSe | This bit, when set, | | | | indicates that the | | | Withdrawal | ProSe subscription | | | | data shall be | | | | deleted from the MME | | | | or combined | | | | MME/SGSN. | +----------------------+----------------------+----------------------+ | 18 | Reset-IDs | This bit, when set, | | | | indicates that the | | | | set of Reset-IDs | | | | shall be deleted | | | | from the MME or | | | | SGSN. | +----------------------+----------------------+----------------------+ | 19 | DL-Buffering-Su | This bit, when set, | | | ggested-Packet-Count | indicates that the | | | Withdrawal | DL-Buffering-Su | | | | ggested-Packet-Count | | | | shall be deleted in | | | | the MME or SGSN. | +----------------------+----------------------+----------------------+ | 20 | Subscribed | This bit, when set, | | | IMSI-Group-Id | indicates that all | | | | subscribed | | | Withdrawal | IMSI-Group-Id(s) | | | | shall be deleted in | | | | the MME or SGSN. | +----------------------+----------------------+----------------------+ | 21 | Delete monitoring | This bit when set | | | events | indicates to the MME | | | | or SGSN to delete | | | | all the Monitoring | | | | events for the | | | | subscriber which are | | | | associated with the | | | | provided SCEF-ID. | +----------------------+----------------------+----------------------+ | 22 | User Plane Integrity | This bit, when set, | | | Protection | indicates to the | | | Withdrawal | SGSN that User Plane | | | | Integrity Protection | | | | may no longer be | | | | required when GERAN | | | | is used. The MME | | | | shall ignore it. | +----------------------+----------------------+----------------------+ | 23 | Reserved | This bit shall not | | | | be used in this | | | | version of the | | | | specification. | +----------------------+----------------------+----------------------+ | 24 | UE Usage Type | This bit, when set, | | | Withdrawal | indicates to the MME | | | | or SGSN that the UE | | | | Usage Type shall be | | | | deleted from the | | | | subscription data. | +----------------------+----------------------+----------------------+ | Note 1: If the | | | | Complete APN | | | | Configuration | | | | Profile Withdrawal | | | | bit is set, this bit | | | | should not be set. | | | | | | | | Note 2: If the | | | | Complete PDP context | | | | list Withdrawal bit | | | | is set, this bit | | | | should not be set. | | | | | | | | Note 3: Bits not | | | | defined in this | | | | table shall be | | | | cleared by the | | | | sending HSS and | | | | discarded by the | | | | receiving MME or | | | | SGSN. | | | | | | | | Note 4: Bits 3 and 6 | | | | are excluding | | | | alternatives and | | | | shall not both be | | | | set. | | | | | | | | Note 5: When this | | | | AVP is transferred | | | | over the S7a/S7d | | | | interface, only the | | | | bit 9 (CSG Deleted) | | | | is meaningful, other | | | | bits shall be | | | | cleared. | | | +----------------------+----------------------+----------------------+
### 7.3.26 DSA-Flags
The DSA-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits is defined in table 7.3.26/1:
Table 7.3.26/1: DSA-Flags
* * *
Bit Name Description 0 Network Node area restricted This bit, when set, shall
indicate that the complete Network Node area (SGSN area) is restricted due to
regional subscription. Note: Bits not defined in this table shall be cleared
by the sending SGSN and discarded by the receiving HSS.
* * *
### 7.3.27 Context-Identifier
The Context-Identifier AVP is of type Unsigned32.
### 7.3.28 Void
### 7.3.29 Subscriber-Status
The 3GPP Subscriber Status AVP is of type Enumerated. It shall indicate if the
service is barred or granted. The following values are defined:
SERVICE_GRANTED (0)
OPERATOR_DETERMINED_BARRING (1)
### 7.3.30 Operator-Determined-Barring
The Operator-Determined-Barring AVP is of type Unsigned32 and it shall contain
a bit mask indicating the services of a subscriber that are barred by the
operator. The meaning of the bits is the following:
Table 7.3.30/1: Operator-Determined-Barring
* * *
Bit Description 0 All Packet Oriented Services Barred 1 Roamer Access HPLMN-AP
Barred 2 Roamer Access to VPLMN-AP Barred 3 Barring of all outgoing calls 4
Barring of all outgoing international calls 5 Barring of all outgoing
international calls except those directed to the home PLMN country 6 Barring
of all outgoing inter-zonal calls 7 Barring of all outgoing inter-zonal calls
except those directed to the home PLMN country 8 Barring of all outgoing
international calls except those directed to the home PLMN country and Barring
of all outgoing inter-zonal calls
* * *
### 7.3.31 Access-Restriction-Data
The Access-Restriction-Data AVP is of type Unsigned32 and it shall contain a
bit mask where each bit when set to 1 indicates a restriction. The meaning of
the bits is the following:
Table 7.3.31/1: Access-Restriction-Data
* * *
Bit Description 0 UTRAN Not Allowed 1 GERAN Not Allowed 2 GAN Not Allowed 3
I-HSPA-Evolution Not Allowed 4 WB-E-UTRAN Not Allowed 5 HO-To-Non-3GPP-Access
Not Allowed 6 NB-IoT Not Allowed NOTE: Bits not defined in this table shall be
cleared by the HSS and discarded by the receiving MME/SGSN.
* * *
The restriction \"HO-To-Non-3GPP-Access Not Allowed\" shall take a higher
precedence than the APN-level parameter \"WLAN-Offloadability\" (see section
7.3.181).
### 7.3.32 APN-OI-Replacement
The APN-OI-Replacement AVP is of type UTF8String. This AVP shall indicate the
domain name to replace the APN OI for the non-roaming case and the home routed
roaming case when constructing the APN, and the APN-FQDN upon which to perform
a DNS resolution. See 3GPP TS 23.003 [3] and 3GPP TS 29.303 [38].
The contents of the APN-OI-Replacement AVP shall be formatted as a character
string composed of one or more labels separated by dots (\".\").
### 7.3.33 All-APN-Configurations-Included-Indicator
The All-APN-Configurations-Included-Indicator AVP is of type Enumerated. The
following values are defined:
All_APN_CONFIGURATIONS_INCLUDED (0)
MODIFIED_ADDED_APN_CONFIGURATIONS_INCLUDED (1)
### 7.3.34 APN-Configuration-Profile
The APN-Configuration-Profile AVP is of type Grouped. It shall contain the
information related to the user\'s subscribed APN configurations for EPS.
The AVP format shall conform to:
APN-Configuration-Profile ::= \
> { Context-Identifier }
>
> [ Additional-Context-Identifier ]
>
> { All-APN-Configurations-Included-Indicator }
>
> 1*{APN-Configuration}
>
> *[AVP]
The Subscription-Data AVP associated with an IMSI contains one APN-
Configuration-Profile AVP.
Each APN-Configuration-Profile AVP contains one or more APN-Configuration
AVPs.
Each APN-Configuration AVP describes the configuration for a single APN.
Therefore, the cardinality of the relationship between IMSI and APN is one-to-
many.
The Context-Identifier AVP shall identify the per subscriber's default APN
configuration.
If present, the Additional-Context-Identifier AVP shall identify another
default APN configuration, only for those subscriptions containing both, APNs
with an IP-based PDN type and APNs with a Non-IP PDN type; in this case, each
of those two default APN configurations shall have a different PDN type
category (i.e. one default APN with an IP-based PDN type, and another default
APN with a Non-IP PDN type).
### 7.3.35 APN-Configuration
The APN-Configuration AVP is of type Grouped. It shall contain the information
related to the user's subscribed APN configurations. The Context-Identifier in
the APN-Configuration AVP shall identify that APN configuration, and it shall
not have a value of zero. Furthermore, the Context-Identifier in the APN-
Configuration AVP shall uniquely identify the EPS APN configuration per
subscription. For a particular EPS user having multiple APN configurations,
the Service-Selection AVP values shall be unique across APN-Configuration
AVPs.
The AVP format shall conform to:
APN-Configuration ::= \
> { Context-Identifier }
>
> * 2 [ Served-Party-IP-Address ]
>
> { PDN-Type }
>
> { Service-Selection}
>
> [ EPS-Subscribed-QoS-Profile ]
>
> [ VPLMN-Dynamic-Address-Allowed ]
>
> [MIP6-Agent-Info ]
>
> [ Visited-Network-Identifier ]
>
> [ PDN-GW-Allocation-Type ]
>
> [ 3GPP-Charging-Characteristics ]
>
> [ AMBR ]
>
> *[ Specific-APN-Info ]
>
> [ APN-OI-Replacement ]
>
> [ SIPTO-Permission ]
>
> [ LIPA-Permission ]
>
> [ Restoration-Priority ]
>
> [ SIPTO-Local-Network-Permission ]
>
> [ WLAN-offloadability ]
>
> [ Non-IP-PDN-Type-Indicator ]
>
> [ Non-IP-Data-Delivery-Mechanism ]
>
> [ SCEF-ID ]
>
> [ SCEF-Realm ]
>
> [ Preferred-Data-Mode ]
>
> *[ AVP ]
The AMBR included in this grouped AVP shall include the AMBR associated to
this specific APN configuration (APN-AMBR).
The Served-Party-IP-Address AVP may be present 0, 1 or 2 times. These AVPs
shall be present if static IP address allocation is used for the UE, and they
shall contain either of:
\- an IPv4 address, or
\- an IPv6 address/prefix, or
\- both, an IPv4 address and an IPv6 address/prefix.
For the IPv6 prefix, the lower 64 bits of the address shall be set to zero.
The PDN-GW-Allocation-Type AVP applies to the MIP6-Agent-Info AVP. Therefore,
it shall not be present if MIP6-Agent-Info is not present.
The APN-OI-Replacement included in this grouped AVP shall include the APN-OI-
Replacement associated with this APN configuration. This APN-OI-Replacement
has higher priority than UE level APN-OI-Replacement.
The Visited-Network-Identifier AVP indicates the PLMN where the PGW was
allocated, in case of dynamic PGW assignment.
NOTE: If interworking with MAP is needed, the Context-Identifier will be in
the range of 1 and 50.
The Non-IP-Data-Delivery-Mechanism shall only be present when Non-IP-PDN-Type-
Indicator is set to TRUE (1).
The SCEF-ID AVP and the SCEF-Realm AVP shall only be present when Non-IP-PDN-
Type-Indicator is set to TRUE, and Non-IP-Data-Delivery-Mechanism is set to
SCEF-BASED-DATA-DELIVERY (1).
### 7.3.36 Service-Selection
The Service-Selection AVP is of type of UTF8String. This AVP shall contain
either the APN Network Identifier (i.e. an APN without the Operator
Identifier) per 3GPP TS 23.003 [3], clauses 9.1 & 9.1.1, or this AVP shall
contain the wild card value per 3GPP TS 23.003 [3], clause 9.2.1, and 3GPP TS
23.008 [30], clause 2.13.6).
The contents of the Service-Selection AVP shall be formatted as a character
string composed of one or more labels separated by dots (\".\"), or as the
wild card APN, i.e., consisting of only one ASCII label, \"*\".
This AVP is defined in IETF RFC 5778[20].
### 7.3.37 EPS-Subscribed-QoS-Profile
The EPS-Subscribed-QoS-Profile AVP is of type Grouped. It shall contain the
bearer-level QoS parameters (QoS Class Identifier and Allocation Retention
Priority) associated to the default bearer for an APN (see 3GPP TS 23.401 [2],
clause 4.7.3).
AVP format
> EPS-Subscribed-QoS-Profile ::= \
>
> { QoS-Class-Identifier }
>
> { Allocation-Retention-Priority }
>
> *[AVP]
NOTE: QoS-Class-Identifier is defined in 3GPP TS 29.212 [10] as an Enumerated
AVP. The values allowed for this AVP over the S6a/S6d interface are only those
associated to non-GBR bearers, as indicated in 3GPP TS 23.008 [30]; e.g.,
values QCI_1, QCI_2, QCI_3 and QCI_4, which are associated to GBR bearers,
cannot be sent over S6a/S6d.
### 7.3.38 VPLMN-Dynamic-Address-Allowed
The VPLMN-Dynamic-Address-Allowed AVP is of type Enumerated. It shall indicate
whether for this APN, the UE is allowed to use the PDN GW in the domain of the
HPLMN only, or additionally, the PDN GW in the domain of the VPLMN.. If this
AVP is not present, this means that the UE is not allowed to use PDN GWs in
the domain of the VPLMN. The following values are defined:
NOTALLOWED (0)
ALLOWED (1)
### 7.3.39 STN-SR
The STN-SR AVP is of type OctetString and shall contain the Session Transfer
Number for SRVCC. See 3GPP TS 23.003 [3] for the definition of STN-SR. This
AVP contains an STN-SR, in international number format as described in ITU-T
Rec E.164 [41], encoded as a TBCD-string. See 3GPP TS 29.002 [24] for encoding
of TBCD-strings. This AVP shall not include leading indicators for the nature
of address and the numbering plan; it shall contain only the TBCD-encoded
digits of the address.
### 7.3.40 Allocation-Retention-Priority
The Allocation-Retention-Priorit AVP is of typeGrouped and is defined in 3GPP
TS 29.212 [10]. It shall indicate the Priority of Allocation and Retention for
the corresponding APN configuration.
AVP format
> Allocation-Retention-Priority ::= \
>
> { Priority-Level }
>
> [ Pre-emption-Capability ]
>
> [ Pre-emption-Vulnerability ]
If the Pre-emption-Capability AVP is not present in the Allocation-Retention-
Priority AVP, the default value shall be PRE-EMPTION_CAPABILITY_DISABLED (1).
If the Pre-emption-Vulnerability AVP is not present in the Allocation-
Retention-Priority AVP, the default value shall be PRE-
EMPTION_VULNERABILITY_ENABLED (0).
### 7.3.41 AMBR
The AMBR AVP is of type Grouped.
AVP format
> AMBR ::= \
>
> { Max-Requested-Bandwidth-UL }
>
> { Max-Requested-Bandwidth-DL }
>
> *[AVP]
### 7.3.42 MIP-Home-Agent-Address
The MIP-Home-Agent-Address AVP is of type Address and is defined in IETF RFC
4004 [27]. This AVP shall contain either IPv4 or IPv6 address of the PDN-GW
and this IP address shall be used as the PDN-GW IP address.
### 7.3.43 MIP-Home-Agent-Host
The MIP-Home-Agent-Host is of type Grouped and is defined in IETF RFC 4004
[27]. This AVP shall contain a FQDN of the PDN-GW which shall be used to
resolve the PDN-GW IP address using the Domain Name Service function.
MIP-Home-Agent-Host grouped AVP is composed by Destination-Host and
Destination-Realm AVPs.
Destination-Host shall contain the hostname of the PDN-GW, formatted as
described in 3GPP TS 29.303 [38], clause 4.3.2.
Destination-Realm shall be formatted as:
epc.mnc\.mcc\.3gppnetwork.org
where MNC and MCC values indicate the PLMN where the PDN-GW is located.
### 7.3.44 PDN-GW-Allocation-Type
The PDN-GW-Allocation-Type AVP is of type Enumerated. It shall indicate
whether the PDN GW address included in MIP6-Agent-Info has been statically
allocated (i.e. provisioned in the HSS by the operator), or dynamically
selected by other nodes. The following values are defined:
STATIC (0)
DYNAMIC (1)
### 7.3.45 MIP6-Agent-Info
The MIP6-Agent-InfoAVP is of type Grouped and is defined in IETF RFC 5447
[26]. This AVP shall contain the identity of the PDN-GW. This AVP is used to
convey the identity of the PDN-GW between the MME/SGSN and the HSS regardless
of the specific mobility protocol used (GTP or PMIPv6). The identity of PDN-GW
is either an IP address transported in MIP-Home-Agent-Address or an FQDN
transported in MIP-Home-Agent-Host. FQDN shall be used if known to the
MME/SGSN/HSS.
AVP format
> MIP6-Agent-Info ::= \
>
> *2[ MIP-Home-Agent-Address ]
>
> [ MIP-Home-Agent-Host ]
>
> [ MIP6-Home-Link-Prefix ]
>
> *[ AVP ]
Within the MIP6-Agent-Info AVP, if static address allocation is used, there
may be either:
\- an IPv4 address or an IPv6 address of the PGW contained in one MIP-Home-
Agent-Address AVP;
\- both IPv4 address and IPv6 address of the PGW contained in two MIP-Home-
Agent-Address AVPs.
The AVP MIP6-Home-Link-Prefix is not used in S6a/S6d, but it is included here
to reflect the complete IETF definition of the grouped AVP.
### 7.3.46 RAT-Frequency-Selection-Priority-ID
The RAT-Frequency-Selection-Priority-ID AVP is of type Unsigned32 and shall
contain the subscribed value of Subscriber Profile ID for RAT/Frequency
Priority. For details, see 3GPP TS 23.401 [2] and 3GPP TS 23.060 [12] . The
coding is defined in 3GPP TS 36.413 [19]. Values shall be in the range of 1 to
256.
### 7.3.47 IDA-Flags
The IDA-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meanings of the bits are defined in table 7.3.47/1:
Table 7.3.47/1: IDA-Flags
* * *
Bit Name Description 0 Network Node area restricted This bit, when set, shall
indicate that the complete Network Node area (SGSN area) is restricted due to
regional subscription. Note: Bits not defined in this table shall be cleared
by the sending SGSN and discarded by the receiving HSS.
* * *
### 7.3.48 PUA-Flags
The PUA-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meanings of the bits are defined in table 7.3.48/1:
Table 7.3.48/1: PUA-Flags
* * *
bit name Description 0 Freeze M-TMSI This bit, when set, shall indicate to the
MME that the M-TMSI needs to be frozen, i.e. shall not be immediately re-used.
1 Freeze P-TMSI This bit, when set, shall indicate to the SGSN that the P-TMSI
needs to be frozen, i.e. shall not be immediately re-used. Note: Bits not
defined in this table shall be cleared by the sending HSS and discarded by the
receiving MME or SGSN.
* * *
### 7.3.49 NOR-Flags
The NOR-Flags AVP is of type Unsigned32 and it contains a bit mask. The
meaning of the bits is defined in table 7.3.49/1:
Table 7.3.49/1: NOR-Flags
+----------------------+----------------------+----------------------+ | bit | name | Description | +----------------------+----------------------+----------------------+ | 0 | Single-Reg | This bit, when set, | | | istration-Indication | indicates that the | | | | HSS shall send | | | | Cancel Location to | | | | the SGSN. An SGSN | | | | shall not set this | | | | bit when sending | | | | NOR. | +----------------------+----------------------+----------------------+ | 1 | SGSN area restricted | This bit, when set, | | | | shall indicate that | | | | the complete SGSN | | | | area is restricted | | | | due to regional | | | | subscription. | +----------------------+----------------------+----------------------+ | 2 | Ready for SM from | This bit, when set, | | | SGSN | shall indicate that | | | | the UE is present or | | | | the UE has memory | | | | capacity available | | | | to receive one or | | | | more short messages | | | | via SGSN. | +----------------------+----------------------+----------------------+ | 3 | UE Reachable from | This bit, when set, | | | MME | shall indicate that | | | | the UE has become | | | | reachable again from | | | | MME. | +----------------------+----------------------+----------------------+ | 4 | Reserved | The use of this bit | | | | is deprecated. This | | | | bit shall be | | | | discarded by the | | | | receiving HSS. | +----------------------+----------------------+----------------------+ | 5 | UE Reachable from | This bit, when set, | | | SGSN | shall indicate that | | | | the UE has become | | | | reachable again from | | | | SGSN. | +----------------------+----------------------+----------------------+ | 6 | Ready for SM from | This bit, when set, | | | MME | shall indicate that | | | | the UE is present or | | | | the UE has memory | | | | capacity available | | | | to receive one or | | | | more short messages | | | | via MME. | +----------------------+----------------------+----------------------+ | 7 | Homogeneous Support | This bit, when set, | | | of IMS Voice Over PS | shall indicate that | | | Sessions | the Homogeneous | | | | Support of IMS Voice | | | | Over PS Sessions is | | | | updated. | +----------------------+----------------------+----------------------+ | 8 | S6a/S6d-Indicator | This bit, when set, | | | | shall indicate that | | | | the NOR message is | | | | sent on the S6a | | | | interface, i.e. the | | | | message is from the | | | | MME or the MME part | | | | on the combined | | | | MME/SGSN. | | | | | | | | This bit, when | | | | cleared, indicates | | | | that the NOR message | | | | is sent on the S6d | | | | interface, i.e. the | | | | message is from the | | | | SGSN or the SGSN | | | | part on the combined | | | | MME/SGSN. | +----------------------+----------------------+----------------------+ | 9 | Removal of MME | This bit, when set, | | | Registration for SMS | shall indicate that | | | | the MME requests to | | | | remove its | | | | registration for | | | | SMS. | +----------------------+----------------------+----------------------+ | +----------------+ | | | | | NOTE 1: The | | | | | | S6a | | | | | | /S6d-Indicator | | | | | | flag shall be | | | | | | used together | | | | | | with | | | | | | Homogeneous | | | | | | Support of IMS | | | | | | Voice Over PS | | | | | | Sessions flag, | | | | | | i.e. if the | | | | | | Homogeneous | | | | | | Support of IMS | | | | | | Voice Over PS | | | | | | Sessions bit | | | | | | is set, the | | | | | | S6a | | | | | | /S6d-Indicator | | | | | | bit shall be | | | | | | set if the | | | | | | message is | | | | | | sent from the | | | | | | MME or the MME | | | | | | part on the | | | | | | combined | | | | | | MME/SGSN, and | | | | | | shall be | | | | | | cleared if the | | | | | | message is | | | | | | sent from the | | | | | | SGSN or the | | | | | | SGSN part on | | | | | | the combined | | | | | | MME/SGSN. This | | | | | | S6a | | | | | | /S6d-Indicator | | | | | | bit shall be | | | | | | discarded by | | | | | | the receiving | | | | | | HSS if the | | | | | | Homogeneous | | | | | | Support of IMS | | | | | | Voice Over PS | | | | | | Sessions bit | | | | | | is not set. | | | | | | | | | | | | NOTE 2: Bits | | | | | | not defined in | | | | | | this table | | | | | | shall be | | | | | | cleared by the | | | | | | sending MME or | | | | | | SGSN and | | | | | | discarded by | | | | | | the receiving | | | | | | HSS. | | | | | +----------------+ | | | +----------------------+----------------------+----------------------+
### 7.3.50 User-Id
The User-Id AVP shall be of type UTF8String. It shall contain the leading
digits of an IMSI (i.e. MCC, MNC, leading digits of MSIN, see 3GPP TS 23.003
[3], clause 2.2) formatted as a character string. Within a HSS, a User-Id
identifies a set of subscribers, each with identical leading IMSI digits.
### 7.3.51 Equipment-Status
The Equipment-Status AVP is of type Enumerated, and shall contain the status
of the mobile equipment. The following values are defined:
WHITELISTED (0)
BLACKLISTED (1)
GREYLISTED (2)
### 7.3.52 Regional-Subscription-Zone-Code
The Regional-Subscription-Zone-Code AVP is of type OctetString. It shall
contain a Zone Code (ZC) as defined in 3GPP TS 23.003 [3], clause 4.4. Up to
10 Zone Codes per VPLMN can be defined as part of the users\'s subscription
data.
NOTE 1: Each zone code represents a collection of tracking area or routing
areas (defined by the operator of the VPLMN) where the user is allowed, or
disallowed, to roam. The determination of which areas are actually allowed,
and which ones are not allowed, is done by the serving node (MME/SGSN) in an
implementation-dependent manner.
NOTE 2: The description of RSZI in 3GPP TS 23.003 [3] is applicable, in the
context of this specification, not only to location areas, but also to routing
and tracking areas.
### 7.3.53 RAND
The RAND AVP is of type OctetString. This AVP shall contain the RAND. See 3GPP
TS 33.401 [5].
### 7.3.54 XRES
The XRES AVP is of type OctetString. This AVP shall contain the XRES. See 3GPP
TS 33.401 [5].
### 7.3.55 AUTN
The AUTN AVP is of type OctetString. This AVP shall contain the AUTN. See 3GPP
TS 33.401 [5].
### 7.3.56 KASME
The KASME AVP is of type OctetString. This AVP shall contain the K_ASME. See
3GPP TS 33.401 [5].
### 7.3.57 Confidentiality-Key AVP
The Confidentiality-Key is of type OctetString, and shall contain the
Confidentiality Key (CK).
### 7.3.58 Integrity-Key AVP
The Integrity-Key is of type OctetString, and shall contain the Integrity Key
(IK).
### 7.3.59 Kc AVP
The Kc AVP is of type OctetString, and shall contain the Ciphering Key (Kc).
### 7.3.60 SRES
The SRES AVP is of type OctetString. This AVP shall contain the SRES. See 3GPP
TS 33.102 [18].
### 7.3.61 Void
### 7.3.62 PDN-Type
The PDN-Type AVP is of type Enumerated and indicates the address type of the
PDN, when it is IP-based.
NOTE: There are certain PDNs that can be accessed in Non-IP mode, and those
are identified by a specific PDN type indicator in their APN configuration
settings (see clause 7.3.204).
The following values are defined:The following values are defined:
IPv4 (0)
This value shall be used to indicate that the PDN can be accessed only in IPv4
mode.
IPv6 (1)
This value shall be used to indicate that the PDN can be accessed only in IPv6
mode.
IPv4v6 (2)
This value shall be used to indicate that the PDN can be accessed both in IPv4
mode, in IPv6 mode, and also from UEs supporting dualstack IPv4v6.
IPv4_OR_IPv6 (3)
This value shall be used to indicate that the PDN can be accessed either in
IPv4 mode, or in IPv6 mode, but not from UEs supporting dualstack IPv4v6. It
should be noted that this value will never be used as a requested PDN Type
from the UE, since UEs will only use one of their supported PDN Types, i.e.,
IPv4 only, IPv6 only or IPv4v6 (dualstack). This value is only used as part of
the APN subscription context, as an authorization mechanism between HSS and
MME.
### 7.3.63 Trace-Data AVP
The Trace-Data AVP is of type Grouped. This AVP shall contain the information
related to trace function.
AVP format
> Trace-Data ::= \
>
> {Trace-Reference}
>
> {Trace-Depth}
>
> {Trace-NE-Type-List}
>
> [Trace-Interface-List]
>
> {Trace-Event-List}
>
> [OMC-Id]
>
> {Trace-Collection-Entity}
>
> [MDT-Configuration]
>
> *[AVP]
### 7.3.64 Trace-Reference AVP
The Trace-Reference AVP is of type OctetString. This AVP shall contain the
concatenation of MCC, MNC and Trace ID, where the Trace ID is a 3 byte Octet
String. See 3GPP TS 32.422 [23].
The content of this AVP shall be encoded as octet strings according to table
7.3.64/1.
See 3GPP TS 24.008 [31], clause 10.5.1.13, PLMN list, for the coding of MCC
and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 2 are coded as
\"1111\".
**Table 7.3.64/1: Encoding format for Trace-Reference AVP**
* * *
8 7 6 5 4 3 2 1  
MCC digit 2 MCC digit 1 octet 1  
MNC digit 3 MCC digit 3 octet 2  
MNC digit 2 MNC digit 1 octet 3  
Trace ID octet 4  
octet 5  
octet 6
* * *
### 7.3.65 Void
### 7.3.66 Void
### 7.3.67 Trace-Depth AVP
The Trace-Depth AVP is of type Enumerated. The possible values are those
defined in 3GPP TS 32.422 [23] for Trace Depth.
### 7.3.68 Trace-NE-Type-List AVP
The Trace-NE-Type-List AVP is of type OctetString. Octets are coded according
to 3GPP TS 32.422 [23].
### 7.3.69 Trace-Interface-List AVP
The Trace-Interface-List AVP is of type OctetString. Octets are coded
according to 3GPP TS 32.422 [23].
### 7.3.70 Trace-Event-List AVP
The Trace-Event-List AVP is of type OctetString. Octets are coded according to
3GPP TS 32.422 [23].
### 7.3.71 OMC-Id AVP
The OMC-Id AVP is of type OctetString. Octets are coded according to 3GPP TS
29.002 [24].
### 7.3.72 GPRS-Subscription-Data
The GPRS-Subscription-Data AVP is of type Grouped. It shall contain the
information related to the user profile relevant for GPRS.
AVP format:
> GPRS-Subscription-Data ::= \
>
> { Complete-Data-List-Included-Indicator }
>
> 1*50{PDP-Context}
>
> *[AVP]
NOTE: The max number of PDP-Context AVP aligns with the value of maxNumOfPDP-
Contexts as defined in 3GPP TS 29.002[24].
### 7.3.73 Complete-Data-List-Included-Indicator
The Complete-Data-List-Included-Indicator AVP is of type Enumerated. The
following values are defined:
All_PDP_CONTEXTS_INCLUDED (0)
MODIFIED_ADDED_PDP CONTEXTS_INCLUDED (1)
### 7.3.74 PDP-Context
The PDP-Context AVP is of type Grouped. For a particular GPRS user having
multiple PDP Context configurations, the Service-Selection AVP values may be
the same for different PDP-Context AVPs.
AVP format
PDP-Context ::= \
> { Context-Identifier }
>
> { PDP-Type }
>
> [ PDP-Address ]
>
> { QoS-Subscribed }
>
> [ VPLMN-Dynamic-Address-Allowed ]
>
> { Service-Selection }
>
> [3GPP-Charging-Characteristics]
>
> [ Ext-PDP-Type ]
>
> [ Ext-PDP-Address ]
>
> [ AMBR ]
>
> [ APN-OI-Replacement ]
>
> [ SIPTO-Permission ]
>
> [ LIPA-Permission ]
>
> [ Restoration-Priority ]
>
> [ SIPTO-Local-Network-Permission ]
>
> *[AVP]
The Ext-PDP-Address AVP may be present only if the PDP-Address AVP is present.
If the Ext-PDP-Address AVP is present, then it shall not contain the same
address type (IPv4 or IPv6) as the PDP-Address AVP.
The AMBR included in this grouped AVP shall include the AMBR associated to the
APN included in the PDP-Context AVP (APN-AMBR).
The APN-OI-Replacement included in this grouped AVP shall include the APN-OI-
Replacement associated to the APN included in the PDP-Context. This APN-OI-
Replacement has higher priority than UE level APN-OI-Replacement.
### 7.3.75 PDP-Type
The PDP-Type AVP is of type OctetString. Octets are coded according to 3GPP TS
29.002 [24].
### 7.3.75A Ext-PDP-Type
The Ext-PDP-Type AVP is of type OctetString. Octets are coded according to
3GPP TS 29.002 [24] and 3GPP TS 29.060 [39] and shall contain the value of
IPv4v6.
### 7.3.76 Void
### 7.3.77 QoS-Subscribed
The QoS-Subscribed AVP is of type OctetString. Octets are coded according to
3GPP TS 29.002 [24] (octets of QoS-Subscribed, Ext-QoS-Subscribed, Ext2-QoS-
Subscribed, Ext3-QoS-Subscribed and Ext4-QoS-Subscribed values are
concatenated).
### 7.3.78 CSG-Subscription-Data
The CSG-Subscription-Data AVP is of type Grouped. This AVP shall contain the
CSG-Id, and may contain the associated Visited-PLMN-Id, an associated
expiration date and the APNs which are allowed to be accessed via Local IP
Access from the CSG.
If the Visited-PLMN-Id is not present, the CSG-Subscription-Data corresponds
to the registered PLMN (i.e. the visited PLMN) of the MME or the SGSN.
AVP format
> CSG-Subscription-Data ::= \
>
> { CSG-Id }
>
> [ Expiration-Date ]
>
> *[ Service-Selection ]
>
> [ Visited-PLMN-Id ]
>
> *[AVP]
### 7.3.79 CSG-Id
The CSG-Id AVP is of type Unsigned32. Values are coded according to 3GPP TS
23.003 [3]. Unused bits (least significant) shall be padded with zeros.
### 7.3.80 Expiration-Date
The Expiration-Date AVP is of type Time (see IETF RFC 3588 [4]) and contains
the point in time when subscription to the CSG-Id expires.
### 7.3.81 Roaming-Restricted-Due-To-Unsupported-Feature
The Roaming-Restricted-Due-To-Unsupported-Feature AVP is of type Enumerated
and indicates that roaming is restricted due to unsupported feature. The
following value is defined:
Roaming-Restricted-Due-To-Unsupported-Feature (0)
### 7.3.82 Specific-APN-Info AVP
The Specific-APN-Info AVP is of type Grouped. It shall only be present in the
APN configuration when the APN is a wild card APN. It shall contain the APN
which is not present in the subscription context but the UE is authorized to
connect to and the identity of the registered PDN-GW.
The AVP format shall conform to:
Specific-APN-Info ::= \
> { Service-Selection }
>
> { MIP6-Agent-Info }
>
> [ Visited-Network-Identifier ]
>
> *[ AVP ]
### 7.3.83 Alert-Reason AVP
The Alert-Reason AVP is of type Enumerated. The following values are defined:
UE_PRESENT (0)
UE_MEMORY_AVAILABLE (1)
### 7.3.84 LCS-Info
The LCS-Info AVP is of type Grouped. This AVP shall contain the following LCS
related information for a subscriber:
\- list of GMLCs in the HPLMN that are permitted to issue a call/session
unrelated or call/session related MT-LR location request for this UE;
\- privacy exception list that is applicable only over the S6d interface;
\- MO-LR list.
AVP format
> LCS-Info ::= \
>
> *[ GMLC-Number]
>
> *[ LCS-PrivacyException ]
>
> *[ MO-LR ]
>
> *[AVP]
### 7.3.85 GMLC-Number
The GMLC-Number AVP is of type OctetString. This AVP shall contain the ISDN
number of the GMLC in international number format as described in ITU-T Rec
E.164 [41] and shall be encoded as a TBCD-string. See 3GPP TS 29.002 [24] for
encoding of TBCD-strings. This AVP shall not include leading indicators for
the nature of address and the numbering plan; it shall contain only the TBCD-
encoded digits of the address.
### 7.3.86 LCS-PrivacyException
The LCS-PrivacyException AVP is of type Grouped. This AVP shall contain the
classes of LCS Client that are allowed to locate any target UE.
AVP format
> LCS-PrivacyException ::= \
>
> { SS-Code }
>
> { SS-Status }
>
> [ Notification-To-UE-User ]
>
> *[ External-Client ]
>
> *[ PLMN-Client ]
>
> *[ Service-Type ]
>
> *[AVP]
### 7.3.87 SS-Code
The SS-Code AVP is of type OctetString. Octets are coded according to 3GPP TS
29.002 [24].
### 7.3.88 SS-Status
The SS-Status AVP is of type OctetString. Octets are coded according to 3GPP
TS 29.002 [24]. For details, see 3GPP TS 23.011 [29].
### 7.3.89 Notification-To-UE-User
The Notification- To-UE-User AVP is of type Enumerated. The following values
are defined:
NOTIFY_LOCATION_ALLOWED (0)
NOTIFYANDVERIFY_LOCATION_ALLOWED_IF_NO_RESPONSE (1)
NOTIFYANDVERIFY_LOCATION_NOT_ALLOWED_IF_NO_RESPONSE (2)
LOCATION_NOT_ALLOWED (3)
### 7.3.90 External-Client
The External-Client AVP is of type Grouped. This AVP shall contain the
identities of the external clients that are allowed to locate a target UE for
a MT-LR.
AVP format
> External-Client ::= \
>
> { Client-Identity }
>
> [ GMLC-Restriction ]
>
> [ Notification-To-UE-User ]
>
> *[AVP]
### 7.3.91 Client-Identity
The Client-Identity AVP is of type OctetString and it shall contain the ISDN
number of the external client in international number format as described in
ITU-T Rec E.164 [41] and shall be encoded as a TBCD-string. See 3GPP TS 29.002
[24] for encoding of TBCD-strings. This AVP shall not include leading
indicators for the nature of address and the numbering plan; it shall contain
only the TBCD-encoded digits of the address.
### 7.3.92 GMLC-Restriction
The GMLC-Restriction AVP is of type Enumerated. The following values are
defined:
GMLC_LIST (0)
HOME_COUNTRY (1)
### 7.3.93 PLMN-Client
The PLMN-Client AVP is of type Enumerated. The following values are defined:
BROADCAST_SERVICE (0)
O_AND_M_HPLMN (1)
O_AND_M_VPLMN (2)
ANONYMOUS_LOCATION (3)
TARGET_UE_SUBSCRIBED_SERVICE (4)
### 7.3.94 Service-Type
The Service-Type AVP is of type Grouped. This AVP shall contain the identities
of the service type of the clients that are allowed to locate a target UE for
an MT-LR.
AVP format
> Service-Type ::= \
>
> { ServiceTypeIdentity }
>
> [ GMLC-Restriction ]
>
> [ Notification-To-UE-User ]
>
> *[AVP]
### 7.3.95 ServiceTypeIdentity
The ServiceTypeIdentity AVP is of type Unsigned32. For details on the values
of this AVP, see 3GPP TS 29.002 [24].
### 7.3.96 MO-LR
The MO-LR AVP is of type Grouped. This AVP shall contain the classes of MO-LR
for which a subscription exists for a particular UE.
AVP format
> MO-LR ::= \
>
> { SS-Code }
>
> { SS-Status }
>
> *[AVP]
### 7.3.97 Void
### 7.3.98 Trace-Collection-Entity AVP
The Trace-Collection-Entity AVP is of type Address and contains the IPv4 or
IPv6 address of the Trace Collection Entity, as defined in 3GPP TS 32.422
[23], clause 5.9.
### 7.3.99 Teleservice-List
The Teleservice-List AVP is of type Grouped. This AVP shall contain the
service codes for the short message related teleservice for a subscriber:
AVP format
> Teleservice-List ::= \
>
> 1 * { TS-Code }* [ AVP ]
### 7.3.100 TS-Code
The TS-Code AVP is of type OctetString. Octets are coded according to 3GPP TS
29.002 [24].
### 7.3.101 Call-Barring-Info
The Call-Barring-Info AVP is of type Grouped. This AVP shall contain the
service codes for the short message related call barring services for a
subscriber:
AVP format
> Call-Barring-Info ::= \
>
> { SS-Code }
>
> { SS-Status }
>
> * [ AVP ]
### 7.3.102 SGSN-Number
The SGSN-Number AVP is of type OctetString and it shall contain the ISDN
number of the SGSN. For further details on the definition of this AVP, see
3GPP TS 23.003[3]. This AVP contains an SGSN-Number in international number
format as described in ITU-T Rec E.164 [41] and shall be encoded as a TBCD-
string. See 3GPP TS 29.002 [24] for encoding of TBCD-strings. This AVP shall
not include leading indicators for the nature of address and the numbering
plan; it shall contain only the TBCD-encoded digits of the address.
### 7.3.103 IDR-Flags
The IDR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.103/1:
Table 7.3.103/1: IDR-Flags
* * *
bit name Description 0 UE Reachability Request This bit when set shall
indicate to the MME or the SGSN that the HSS is awaiting a Notification of UE
Reachability. 1 T-ADS Data Request This bit, when set, shall indicate to the
MME or SGSN that the HSS requests the support status of \"IMS Voice over PS
Sessions\", and the RAT Type and timestamp of the last radio contact with the
UE. 2 EPS User State Request This bit, when set, shall indicate to the MME or
the SGSN that the HSS requests the MME or the SGSN for the current user state.
3 EPS Location Information Request This bit, when set, shall indicate to the
MME or the SGSN that the HSS requests the MME or SGSN for location information
4 Current Location Request This bit when set shall indicate to the MME or the
SGSN that the HSS requests the MME or SGSN to provide the most current
location information by paging the UE if the UE is in idle mode. This bit is
used only in combination with the\"EPS Location Information Request\" bit. 5
Local Time Zone Request This bit when set shall indicate to the MME or the
SGSN that the HSS requests the MME or SGSN to provide information on the time
zone of the location in the visited network where the UE is attached. 6 Remove
SMS Registration This bit when set shall indicate to the MME that it shall
consider itself unregistered for SMS. 7 RAT-Type Requested This bit when set
shall indicate to the MME or the SGSN that the HSS requests the MME or SGSN to
provide the RAT Type that corresponds to the requested EPS Location
Information. This bit is used only in combination with the\"EPS Location
Information Request\" bit. 8 P-CSCF Restoration Request This bit, when set,
shall indicate to the MME or SGSN that the HSS requests the execution of the
HSS-based P-CSCF restoration procedures, as described in 3GPP TS 23.380 [51]
subclause 5.4. NOTE: Bits not defined in this table shall be cleared by the
sending HSS and discarded by the receiving MME or SGSN.
* * *
### 7.3.104 ICS-Indicator
The ICS-Indicator AVP is of type Enumerated. The meaning of the values is
defined in 3GPP TS 23.292 [34] and 3GPP TS 23.216 [35]. The following values
are defined:
FALSE (0)
TRUE (1)
### 7.3.105 Visited-Network-Identifier
The Visited-Network-Identifier AVP contains the identity of the network where
the PDN-GW was allocated, in the case of dynamic PDN-GW assignment.
The AVP shall be encoded as:
mnc\.mcc\.3gppnetwork.org
7.3.106 IMS-Voice-Over-PS-Sessions-Supported
The IMS-Voice-Over-PS-Sessions-Supported AVP is of type Enumerated. The
following values are defined:
NOT_SUPPORTED (0)
> This value indicates that \"IMS Voice over PS Sessions\" is not supported by
> the UE\'s most recently used TA or RA in the serving node.
SUPPORTED (1)
> This value indicates that \"IMS Voice over PS Sessions\" is supported by the
> UE\'s most recently used TA or RA in the serving node.
### 7.3.107 Homogeneous-Support-of-IMS-Voice-Over-PS-Sessions
The Homogeneous-Support-of-IMS-Voice-Over-PS-Sessions AVP is of type
Enumerated. The following values are defined:
NOT_SUPPORTED (0)
> This value indicates that \"IMS Voice over PS Sessions\" is not supported,
> homogeneously, in any of the TAs or RAs associated to the serving node for
> the served subscribers including consideration on roaming relationship for
> IMS Voice over PS.
SUPPORTED (1)
> This value indicates that \"IMS Voice over PS Sessions\" is supported,
> homogeneously, in all of the TAs or RAs associated to the serving node for
> the served subscriber including consideration on roaming relationship for
> IMS Voice over PS.
If this AVP is not present in the command, it indicates that there is no
homogeneous support of IMS Voice Over PS Sessions on all the TA/RAs of the
serving node, or that the homogeneity of this support is unknown to the
serving node.
NOTE: In order to ensure the T-ADS by HPLMN, MME or SGSN is expected to either
set \"Homogenous Support of IMS Voice over PS Sessions\" AVP to
\"NOT_SUPPORTED (0)\", or not to set this AVP for inbound roaming subscribers
if there is no IMS Voice over PS roaming relationship with the HPLMN.
### 7.3.108 Last-UE-Activity-Time
The Last-UE-Activity-Time AVP is of type Time (see IETF RFC 3588 [4]), and
contains the point of time of the last radio contact of the serving node (MME
or SGSN) with the UE.
### 7.3.109 GMLC-Address
The GMLC-Address AVP is of type Address and shall contain the IPv4 or IPv6
address of the V-GMLC associated with the serving node.
### 7.3.110 EPS-User-State
The EPS-User-State AVP is of type Grouped. It shall contain the information
related to the user state in the MME and/or the SGSN.
AVP format
> EPS-User-State ::= \
>
> [MME-User-State]
>
> [SGSN-User-State]
>
> *[AVP]
### 7.3.111 EPS-Location-Information
The EPS-Location Information AVP is of type Grouped. It shall contain the
information related to the user location relevant for EPS.
AVP format
> EPS-Location-Information ::= \
>
> [MME-Location-Information]
>
> [SGSN-Location-Information]
>
> *[AVP]
### 7.3.112 MME-User-State
The MME-User-State AVP is of type Grouped. It shall contain the information
related to the user state in the MME.
AVP format
> MME-User-State ::= \
>
> [User-State]
>
> *[AVP]
### 7.3.113 SGSN-User-State
The SGSN-User-State AVP is of type Grouped. It shall contain the information
related to the user state in the SGSN.
AVP format
> SGSN-User-State ::= \
>
> [User-State]
>
> *[AVP]
### 7.3.114 User-State
The User-State AVP is of type Enumerated and indicates the user state in EPS.
The following values are defined:
DETACHED (0)
> The UE is in EMM_DEREGISTERED state.
ATTACHED_NOT_REACHABLE_FOR_PAGING (1)
> The SGSN has determined from its internal data that the UE is attached to
> the network, but there is no EPS bearer active, and the UE is not reachable
> for paging. This value is only applicable to S4-SGSN.
ATTACHED_REACHABLE_FOR_PAGING (2)
> The SGSN has determined from its internal data that the UE is attached to
> the network, but there is no EPS bearer active; the SGSN has not determined
> from its internal data that the UE is not reachable for paging. This value
> is only applicable to S4-SGSN.
CONNECTED_NOT_REACHABLE_FOR_PAGING (3)
> The SGSN or MME has determined from its internal data that the UE is
> attached to the network, there is at least one EPS bearer active, and the UE
> is not reachable for paging.
CONNECTED_REACHABLE_FOR_PAGING (4)
> The SGSN or MME has determined from its internal data that the UE is
> attached to the network, there is at least one EPS bearer active, and the
> SGSN or MME has not determined from its internal data that the UE is not
> reachable for paging.
RESERVED (5)
> This value should not be used by MME or SGSN over S6a/S6d. If this value is
> received by the HSS from pre-rel-12 MME/SGSNs, the HSS shall consider that
> the UE is not reachable and use the \"Network determined not reachable\"
> state when reporting the User State to other network entities, e.g. over Sh.
NOTE: The state associated to a \"Network determined not reachable\" condition
should also be used by HSS when reporting to the requesting entity, e.g. over
Sh, that the user was found to be not reachable (for instance, if the HSS
receives no answer from the MME/SGSN to the user state query).
### 7.3.115 MME-Location-Information
The MME-Location-Information AVP is of type Grouped. It shall contain the
information related to the user location relevant for the MME.
AVP format
> MME-Location-Information ::= \
>
> [E-UTRAN-Cell-Global-Identity]
>
> [Tracking-Area-Identity]
>
> [Geographical-Information]
>
> [Geodetic-Information]
>
> [Current-Location-Retrieved]
>
> [Age-Of-Location-Information]
>
> [User-CSG-Information]
>
> [ eNodeB-ID ]
>
> *[AVP]
An eNodeB-ID AVP may be present for Monitoring event reporting.
### 7.3.116 SGSN-Location-Information
The SGSN-Location-Information AVP is of type Grouped. It shall contain the
information related to the user location relevant for the SGSN.
AVP format
> SGSN-Location-Information ::= \
>
> [Cell-Global-Identity]
>
> [Location-Area-Identity]
>
> [Service-Area-Identity]
>
> [Routing-Area-Identity]
>
> [Geographical-Information]
>
> [Geodetic-Information]
>
> [Current-Location-Retrieved]
>
> [Age-Of-Location-Information]
>
> [ User-CSG-Information]
>
> *[AVP]
### 7.3.117 E-UTRAN-Cell-Global-Identity
The E-UTRAN-Cell-Global-Identity AVP is of type OctetString and shall contain
the E-UTRAN Cell Global Identification of the user which identifies the cell
the user equipment is registered, as specified in 3GPP TS 23.003 [3]. Octets
are coded as described in 3GPP TS 29.002 [24].
### 7.3.118 Tracking-Area-Identity
The Tracking-Area-Identity AVP is of type OctetString and shall contain the
Tracking Area Identity of the user which identifies the tracking area where
the user is located, as specified in 3GPP TS 23.003 [3]. Octets are coded as
described in 3GPP TS 29.002 [24].
### 7.3.119 Cell-Global-Identity
The Cell-Global-Identity AVP is of type OctetString and shall contain the Cell
Global Identification of the user which identifies the cell the user equipment
is registered, as specified in 3GPP TS 23.003 [3]. Octets are coded as
described in 3GPP TS 29.002 [24].
### 7.3.120 Routing-Area-Identity
The Routing-Area-Identity AVP is of type OctetString and shall contain the
Routing Area Identity of the user which identifies the routing area where the
user is located, as specified in 3GPP TS 23.003 [3]. Octets are coded as
described in 3GPP TS 29.002 [24].
### 7.3.121 Location-Area-Identity
The Location-Area-Identity AVP is of type OctetString and shall contain the
Location Area Identification of the user which identifies the Location area
where the user is located, as specified in 3GPP TS 23.003 [3]. Octets are
coded as described in 3GPP TS 29.002 [24].
### 7.3.122 Service-Area-Identity
The Service-Area-Identity AVP is of type OctetString and shall contain the
Service Area Identifier of the user where the user is located, as specified in
3GPP TS 23.003 [3]. Octets are coded as described in 3GPP TS 29.002 [24].
### 7.3.123 Geographical-Information
The Geographical-Information AVP is of type OctetString and shall contain the
geographical Information of the user. For details and octet encoding, see 3GPP
TS 29.002 [24].
### 7.3.124 Geodetic-Information
The Geodetic-Information AVP is of type OctetString and shall contain the
Geodetic Location of the user. For details and octet encoding, see 3GPP TS
29.002 [24].
### 7.3.125 Current-Location-Retrieved
The Current-Location-Retrieved AVP is of type Enumerated. The following values
are defined:
ACTIVE-LOCATION-RETRIEVAL (0)
This value is used when location information was obtained after a successful
paging procedure for Active Location Retrieval when the UE is in idle mode or
after retrieving the most up-to-date location information from the eNB when
the UE is in connected mode.
### 7.3.126 Age-Of-Location-Information
The Age-Of-Location-Information AVP is of type Unsigned32 and shall contain
the the elapsed time in minutes since the last network contact of the user
equipment. For details, see 3GPP TS 29.002 [24].
### 7.3.127 Active-APN
The Active-APNs AVP is of type Grouped. It shall contain information about a
dynamically established APN on a serving node, so the HSS can restore it, if
it is eventually lost after a node restart.
The AVP format shall conform to:
Active-APN ::= \
> { Context-Identifier }
>
> [ Service-Selection ]
>
> [ MIP6-Agent-Info ]
>
> [ Visited-Network-Identifier ]
>
> *[ Specific-APN-Info ]
>
> *[ AVP ]
### 7.3.128 Error-Diagnostic
The Error-Diagnostic AVP is of type Enumerated. The following values are
defined:
\- GPRS_DATA_SUBSCRIBED (0)
> This value shall be used when Experimental-Error is
> DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION and there is GPRS Subscription Data
> for the user.
>
> \- NO_GPRS_DATA_SUBSCRIBED (1)
>
> This value shall be used when Experimental-Error is
> DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION and there is not GPRS Subscription
> Data for the user.
\- ODB_ALL_APN (2)
> This value shall be used when Experimental-Error is
> DIAMETER_ERROR_ROAMING_NOT_ALLOWED and the Operator Determined Barring
> indicates \"All Packet Oriented Services Barred\" (see clause 7.3.30).
\- ODB_HPLMN_APN (3)
> This value shall be used when Experimental-Error is
> DIAMETER_ERROR_ROAMING_NOT_ALLOWED and the Operator Determined Barring
> indicates \"Roamer Access HPLMN-AP Barred\" (see clause 7.3.30).
\- ODB_VPLMN_APN (4)
> This value shall be used when Experimental-Error is
> DIAMETER_ERROR_ROAMING_NOT_ALLOWED and the Operator Determined Barring
> indicates \"Roamer Access to VPLMN-AP Barred\" (see clause 7.3.30).
### 7.3.129 Ext-PDP-Address AVP
The Ext-_PDP-Address_ AVP is of type Address and indicates an additional
address of the data protocol, and it may be included when the PDP supports
dual-stack (IPv4v6).
### 7.3.130 UE-SRVCC-Capability
The UE-SRVCC-Capability AVP is of type Enumerated. It shall indicate if the UE
supports or does not support the SRVCC capability. The following values are
defined:
UE-SRVCC-NOT-SUPPORTED (0)
UE-SRVCC-SUPPORTED (1)
### 7.3.131 MPS-Priority
The MPS-Priority AVP is of type Unsigned32 and it shall contain a bit mask.
The meaning of the bits shall be as defined in table 7.3.131/1:
Table 7.3.131/1: MPS-Priority
* * *
Bit Name Description 0 MPS-CS-Priority This bit, when set, indicates that the
UE is subscribed to the eMLPP or 1x RTT priority service in the CS domain. 1
MPS-EPS-Priority This bit, when set, indicates that the UE is subscribed to
the MPS in the EPS domain. Note: Bits not defined in this table shall be
cleared by the sending HSS and discarded by the receiving MME or SGSN.
* * *
NOTE: The HSS derives the information for MPS-CS-Priority from the eMLPP
Subscription Data as defined in the 3GPP TS 29.002 [24] or 1x RTT priority
service which is out of the scope of 3GPP.
### 7.3.132 VPLMN-LIPA-Allowed
The VPLMN-LIPA-Allowed AVP is of type Enumerated. It shall indicate whether
the UE is allowed to use LIPA in the VPLMN where the UE is roaming. The
following values are defined:
LIPA_NOTALLOWED (0)
> This value indicates that the UE is not allowed to use LIPA in the VPLMN
> where the UE is roaming.
LIPA_ALLOWED (1)
> This value indicates that the UE is allowed to use LIPA in the VPLMN where
> the UE is roaming.
### 7.3.133 LIPA-Permission
The LIPA-Permission AVP is of type Enumerated. It shall indicate whether the
APN can be accessed via Local IP Access. The following values are defined:
LIPA_PROHIBITED (0)
> This value indicates that this APN is prohibited to be accessed via LIPA.
LIPA_ONLY (1)
> This value indicates that this APN can be accessed only via LIPA.
LIPA_CONDITIONAL (2)
> This value indicates that this APN can be accessed via both non LIPA and
> LIPA.
### 7.3.134 Subscribed-Periodic-RAU-TAU-Timer
The Subscribed-Periodic-RAU-TAU-Timer AVP is of type Unsigned32 and it shall
contain the subscribed periodic RAU/TAU timer value in seconds as specified in
3GPP TS 24.008 [31].
### 7.3.135 SIPTO-Permission
The SIPTO-Permission AVP is of type Enumerated. It shall indicate whether the
traffic associated with this particular APN is allowed or not for SIPTO above
RAN.
The following values are defined:
SIPTO_above_RAN _ALLOWED (0)
SIPTO_above_RAN _NOTALLOWED (1)
### 7.3.136 MDT-Configuration
The MDT-Configuration AVP is of type Grouped. It shall contain MDT related
information as specified in 3GPP TS 32.422 [23].
The AVP format shall conform to:
MDT-Configuration ::= \
> { Job-Type }
>
> [ Area-Scope ]
>
> [ List-Of-Measurements ]
>
> [ Reporting-Trigger ]
>
> [ Report-Interval ]
>
> [ Report-Amount ]
>
> [ Event-Threshold-RSRP ]
>
> [ Event-Threshold-RSRQ ]
>
> [ Logging-Interval ]
>
> [ Logging-Duration ]
>
> [ Measurement-Period-LTE ]
>
> [ Measurement-Period-UMTS ]
>
> [ Collection-Period-RMM-LTE ]
>
> [ Collection-Period-RRM-UMTS ]
>
> [ Positioning-Method ]
>
> [ Measurement-Quantity]
>
> [ Event-Threshold-Event-1F ]
>
> [ Event-Threshold-Event-1I ]
>
> *[ MDT-Allowed-PLMN-Id ]
>
> *[ MBSFN-Area ]
>
> *[ AVP ]
### 7.3.137 Job-Type
The Job-Type AVP is of type Enumerated. The possible values are those defined
in 3GPP TS 32.422 [23] for Job-Type.
### 7.3.138 Area-Scope
The Area-Scope AVP is of type Grouped. See 3GPP TS 32.422 [23].
The AVP format shall conform to:
Area-Scope ::= \
> *[ Cell-Global-Identity ]
>
> *[ E-UTRAN-Cell-Global-Identity ]
>
> *[ Routing-Area-Identity ]
>
> *[ Location-Area-Identity ]
>
> *[ Tracking-Area-Identity ]
>
> *[ AVP ]
### 7.3.139 List-Of-Measurements
The List-Of-Measurements AVP is of type Unsigned32 and it shall contain a bit
mask. The meaning of the bits is defined in 3GPP TS 32.422 [23]. The most
significant bit is bit 8 of the first octet.
### 7.3.140 Reporting-Trigger
The Reporting-Trigger AVP is of type Unsigned32 and it shall contain a bit
mask. The meaning of the bits is defined in 3GPP TS 32.422 [23]. The most
significant bit is bit 8 of the first octet.
### 7.3.141 Report-Interval
The Report-Interval AVP is of type Enumerated. The possible values are those
defined in 3GPP TS 32.422 [23] for Report Interval
### 7.3.142 Report-Amount
The Report-Amount AVP is of type Enumerated. The possible values are those
defined in 3GPP TS 32.422 [23] for Report Amount.
### 7.3.143 Event-Threshold-RSRP
The Event-Threshold-RSRP AVP is of type Unsigned32. See 3GPP TS 32.422 for
allowed values
### 7.3.144 Event-Threshold-RSRQ
The Event-Threshold-RSRQ AVP is of type Unsigned32. See 3GPP TS 32.422 for
allowed values
### 7.3.145 Logging-Interval
The Logging-Interval AVP is of type Enumerated. The possible values are those
defined in 3GPP TS 32.422 [23] for Logging Interval
### 7.3.146 Logging-Duration
The Logging-Duration AVP is of type Enumerated. The possible values are those
defined in 3GPP TS 32.422 [23] for Logging Duration
### 7.3.147 Relay-Node-Indicator
The Relay-Node-Indicator AVP is of type Enumerated. It shall indicate whether
the subscription data belongs to a Relay Node or not (see 3GPP TS 36.300
[40]). The following values are defined:
NOT_RELAY_NODE (0)
> This value indicates that the subscription data does not belong to a Relay
> Node.
RELAY_NODE (1)
> This value indicates that the subscription data belongs to a Relay Node.
The default value when this AVP is not present is NOT_RELAY_NODE (0).
### 7.3.148 MDT-User-Consent
The MDT-User-Consent AVP is of type Enumerated. It shall indicate whether the
user has given his consent for MDT activation or not (see 3GPP TS 32.422
[23]). The following values are defined:
CONSENT_NOT_GIVEN (0)
CONSENT_GIVEN (1)
The default value when this AVP is not present in ULA is CONSENT_NOT_GIVEN
(0). Absence of this AVP in IDR shall be interpreted as the MDT-User-Consent
has not been modified.
### 7.3.149 PUR-Flags
The PUR-Flags AVP is of type Unsigned32 and it shall contain a bitmask. The
meaning of the bits is defined in table 7.3.149/1:
Table 7.3.149/1: PUR-Flags
* * *
bit name Description 0 UE Purged in MME This bit, when set, indicates that the
combined MME/SGSN has purged the UE in the MME part of the node. This bit
shall not be set by a standalone SGSN. 1 UE Purged in SGSN This bit, when set,
shall indicate that the combined MME/SGSN has purged the UE in the SGSN part
of the node. This bit shall not be set by a standalone MME. NOTE: Bits not
defined in this table shall be cleared by the sending MME or SGSN and
discarded by the receiving HSS.
* * *
### 7.3.150 Subscribed-VSRVCC
The Subscribed-VSRVCC AVP is of type Enumerated. It shall indicate that the
user is subscribed to the vSRVCC. The following value is defined:
VSRVCC_SUBSCRIBED (0)
Absence of this AVP in IDR shall be interpreted as the Subscribed-VSRVCC has
not been modified.
Absence of this AVP in ULA shall be interpreted as the user is not subscribed
to the vSRVCC.
### 7.3.151 Equivalent-PLMN-List
The Equivalent-PLMN-List AVP is of type Grouped. This AVP shall contain the
equivalent PLMN IDs of the registered PLMN (i.e. the visited PLMN) of the MME
or the SGSN.
AVP format
> Equivalent-PLMN-List ::= \
>
> 1*{ Visited-PLMN-Id }
>
> *[AVP]
### 7.3.152 CLR-Flags
The CLR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.152/1:
Table 7.3.152/1: CLR-Flags
+----------------------+----------------------+----------------------+ | Bit | Name | Description | +----------------------+----------------------+----------------------+ | 0 | S6a/S6d-Indicator | This bit, when set, | | | (Note 1) | indicates that the | | | | CLR message is sent | | | | on the S6a | | | | interface, i.e. the | | | | message is to the | | | | MME or the MME part | | | | on the combined | | | | MME/SGSN. | | | | | | | | This bit, when | | | | cleared, indicates | | | | that the CLR message | | | | is sent on the S6d | | | | interface, i.e. the | | | | message is to the | | | | SGSN or the SGSN | | | | part on the combined | | | | MME/SGSN. | +----------------------+----------------------+----------------------+ | 1 | Reattach-Required | This bit, when set, | | | | indicates that the | | | | MME or SGSN shall | | | | request the UE to | | | | initiate an | | | | immediate re-attach | | | | procedure as | | | | described in 3GPP TS | | | | 23.401 [2] and in | | | | 3GPP TS 23.060 | | | | [12]. | +----------------------+----------------------+----------------------+ | NOTE 1: The | | | | S6a/S6d-Indicator | | | | flag shall be used | | | | during initial | | | | attach procedure for | | | | a combined MME/SGSN. | | | | The | | | | S6a/S6d-Indicator | | | | flag may also be | | | | sent to a standalone | | | | node. | | | | | | | | NOTE 2: Bits not | | | | defined in this | | | | table shall be | | | | cleared by the | | | | sending HSS and | | | | discarded by the | | | | receiving MME or | | | | SGSN. | | | +----------------------+----------------------+----------------------+
### 7.3.153 UVR-Flags
The UVR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.154/1:
Table 7.3.154/1: UVR-Flags
* * *
Bit Name Description 0 Skip Subscriber Data This bit, when set, indicates that
the CSS may skip subscription data in UVA. If the CSG subscription data has
changed in the CSS after the last successful update of the MME/SGSN, the CSS
shall ignore this bit and send the updated CSG subscription data. Bits not
defined in this table shall be cleared by the sending MME or SGSN and
discarded by the receiving CSS.
* * *
### 7.3.154 UVA-Flags
The UVA-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The
meaning of the bits shall be as defined in table 7.3.156/1:
Table 7.3.156/1: UVA-Flags
* * *
Bit Name Description 0 Temporary Empty VPLMN CSG Subscription Data This bit,
when set, indicates that the CSS has currently no VPLMN CSG subscription data
for this user but has registered the MME or SGSN, so to inform them if later
changes in VPLMN CSG subscription data occur. Bits not defined in this table
shall be cleared by the sending MME or SGSN and discarded by the receiving
CSS.
* * *
### 7.3.155 VPLMN-CSG-Subscription-Data
The VPLMN-CSG-Subscription-Data AVP is of type Grouped. This AVP shall contain
the CSG-Id, and optionally an associated expiration date.
AVP format
> VPLMN-CSG-Subscription-Data ::= \
>
> { CSG-Id }
>
> [ Expiration-Date ]
>
> *[AVP]
### 7.3.156 Local-Time-Zone
The Local-Time-Zone AVP is of type Grouped and shall contain the Time Zone and
the Daylight Saving Time (DST) adjustment of the location in the visited
network where the UE is attached.
The AVP format shall conform to:
Local-Time-Zone ::= \
> { Time-Zone }
>
> { Daylight-Saving-Time }
>
> * [ AVP ]
### 7.3.157 A-MSISDN
The A-MSISDN AVP is of type OctetString. See 3GPP TS 23.003 [3] for the
definition of the Additional MSISDN. This AVP contains an A-MSISDN, in
international number format as described in ITU-T Rec E.164 [41], encoded as a
TBCD-string. See 3GPP TS 29.002 [24] for encoding of TBCD-strings. This AVP
shall not include leading indicators for the nature of address and the
numbering plan; it shall contain only the TBCD-encoded digits of the address.
This AVP may be present in the Subscription-Data AVP when sent within ULA.
It may also be present in the Subscription-Data AVP, sent within an IDR, if
the current value in the MME or SGSN needs to be changed.
### 7.3.158 Void
### 7.3.159 MME-Number-for-MT-SMS
The MME-Number-for-MT-SMS AVP is of type OctetString and it shall contain the
ISDN number corresponding to the MME for MT SMS. For further details on the
definition of this AVP, see 3GPP TS 23.003[3]. This AVP contains an
international number with the format as described in ITU-T Rec E.164 [41] and
shall be encoded as a TBCD-string. See 3GPP TS 29.002 [24] for encoding of
TBCD-strings. This AVP shall not include leading indicators for the nature of
address and the numbering plan; it shall contain only the TBCD-encoded digits
of the address.
### 7.3.160 Void
### 7.3.161 Void
### 7.3.162 SMS-Register-Request
The SMS-Register-Request AVP is of type Enumerated and it shall indicate
whether the MME or the SGSN requires to be registered for SMS (e.g. SGs
interface not supported) or if the MME or the SGSN prefers not to be
registered for SMS or if the MME or the SGSN has no preference.
The following values are defined:
SMS_REGISTRATION_REQUIRED (0)
SMS_REGISTRATION_NOT_PREFERRED (1)
NO_PREFERENCE (2)
The criteria for setting these values are defined in 3GPP TS 23.272 [44] and
3GPP TS 23.060 [12].
### 7.3.163 Time-Zone
The Time-Zone AVP is of type UTF8String and shall contain the time zone of the
location in the visited network where the UE is attached.
It contains the offset from UTC (Coordinated Universal Time) in units of 15
minutes, as defined in 3GPP TS 22.042 [42]. It shall be expressed as positive
(i.e. with the leading plus sign [+]) if the local time is ahead of or equal
to UTC of day and as negative (i.e. with the leading minus sign [-]) if it is
behind UTC of day.
The value contained in the Time-Zone AVP shall take into account daylight
saving time, such that when the sending entity changes from regular (winter)
time to daylight saving (summer) time, there is a change to the value in the
Time-Zone AVP.
The contents of the Time-Zone AVP shall be formatted as a character string
with the following format:
Basic format: Â±n, with \"n\" being the number of units of 15 minutes from UTC.
For example, if the offset is +2h=+8x15mn, the value of the Time-Zone AVP will
be: \"+8\".
### 7.3.164 Daylight-Saving-Time
The Daylight-Saving-Time AVP is of type Enumerated and shall contain the
Daylight Saving Time (in steps of 1 hour) used to adjust for summertime the
time zone of the location where the UE is attached in the visited network.
The following values are defined:
NO_ADJUSTMENT (0)
PLUS_ONE_HOUR_ADJUSTMENT (1)
PLUS_TWO_HOURS_ADJUSTMENT (2)
### 7.3.165 Subscription-Data-Flags
The Subscription-Data-Flags is of type Unsigned32 and it shall contain a bit
mask. The meaning of the bits shall be as defined in table 7.3.165/1:
Table 7.3.165/1: Subscription-Data-Flags
* * *
Bit Name Description 0 PS-And-SMS-Only-Service-Provision-Indication This bit,
when set, indicates that the subscription is for PS Only and permits CS
service access only for SMS. 1 SMS-In-SGSN-Allowed-Indication This bit, when
set, indicates that SMS in SGSN for the user is allowed. 2 User Plane
Integrity Protection This bit, when set, indicates that the SGSN may decide to
activate integrity protection of the user plane when GERAN is used (see 3GPP
TS 43.020 [58]). The MME shall ignore it. 3 PDN-Connection-Restricted This
bit, when set, indicates to the MME that it shall not establish any non-
emergency PDN connection for this user if the MME and the UE supports Attach
without PDN connection. The SGSN shall ignore it. NOTE: Bits not defined in
this table shall be cleared by the sender and discarded by the receiver of the
command.
* * *
### 7.3.166 Measurement-Period-LTE
The Measurement-Period-LTE AVP is of type Enumerated. The possible values are
those defined in 3GPP TS 32.422 [23] for Measurement period LTE.
### 7.3.167 Measurement-Period-UMTS
The Measurement-Period-UMTS AVP is of type Enumerated. The possible values are
those defined in 3GPP TS 32.422 [23] for Measurement period UMTS.
### 7.3.168 Collection-Period-RRM-LTE
The Collection-Period-RRM-LTE AVP is of type Enumerated. The possible values
are those defined in 3GPP TS 32.422 [23] for Collection period for RRM
measurements LTE.
### 7.3.169 Collection-Period-RRM-UMTS
The Collection-Period-RRM-UMTS AVP is of type Enumerated. The possible values
are those defined in 3GPP TS 32.422 [23] for Collection period for RRM
measurements UMTS.
### 7.3.170 Positioning-Method
The Positioning-Method AVP is of type OctetString. It contains one octet
carrying a bit map of 8 bits. The possible values are those defined in 3GPP TS
32.422 [23] for Positioning Method.
### 7.3.171 Measurement-Quantity
The Measurement-Quantity AVP is of type OctetString. It contains one octet
carrying a bit map of 8 bits. The possible values are those defined in 3GPP TS
32.422 [23] for Measurement quantity.
### 7.3.172 Event-Threshold-Event-1F
The Event-Threshold-Event-1F AVP is of type Integer32. See 3GPP TS 32.422 [23]
for allowed values.
### 7.3.173 Event-Threshold-Event-1I
The Event-Threshold-Event-1I AVP is of type Integer32. See 3GPP TS 32.422 [23]
for allowed values
### 7.3.174 Restoration-Priority
The Restoration-Priority AVP is of type Unsigned32. It shall indicate the
relative priority of a user\'s PDN connection among PDN connections to the
same APN when restoring PDN connections affected by an SGW or PGW
failure/restart (see 3GPP TS 23.007 [43]).
Values 1 to 16 are defined, with value 1 as the highest level of priority.
### 7.3.175 SGs-MME-Identity
The SGs-MME-Identity AVP is of type UTF8String. This AVP shall contain the MME
identity used over the SGs interface and specified in 3GPP TS 23.003 [3]
subclause 19.4.2.4.
### 7.3.176 SIPTO-Local-Network-Permission
The SIPTO-Local-Network-Permission AVP is of type Unsigned32. It shall
indicate whether the traffic associated with this particular APN is allowed or
not for SIPTO at the local network.
The following values are defined:
\"SIPTO at Local Network ALLOWED\" 0
\"SIPTO at Local Network NOTALLOWED\" 1
### 7.3.177 Coupled-Node-Diameter-ID
The Coupled-Node-Diameter-ID AVP is of type DiameterIdentity. This AVP shall
contain the S6a or S6d Diameter identity of the coupled node as specified in
3GPP TS 23.003 [3] subclause 19.4.2.4 and subclause 19.4.2.6.
### 7.3.178 OC-Supported-Features
The OC-Supported-Features AVP is of type Grouped and it is defined in IETF RFC
7683 [50]. This AVP is used to support Diameter overload control mechanism,
see Annex C for more information.
### 7.3.179 OC-OLR
The OC-OLR AVP is of type Grouped and it is defined in IETF RFC 7683 [50].
This AVP is used to support Diameter overload control mechanism, see Annex C
for more information.
### 7.3.180 ProSe-Subscription-Data
The ProSe-Subscription-Data AVP is of type Grouped. It shall contain the ProSe
related subscription data. It was originally defined in 3GPP TS 29.344 [49].
AVP format
> ProSe-Subscription-Data ::= \
>
> { ProSe-Permission }
>
> *[AVP]
### 7.3.181 WLAN-offloadability
The WLAN-offloadability AVP is of type Grouped. This AVP contains WLAN
offloadability for E-UTRAN or UTRAN.
AVP format:
> WLAN-offloadability ::= \
>
> [ WLAN-offloadability-EUTRAN ]
>
> [ WLAN-offloadability-UTRAN ]
>
> *[ AVP ]
### 7.3.182 WLAN-offloadability-EUTRAN
The WLAN-offloadability-EUTRAN AVP is of type Unsigned32 and it shall contain
a bitmask. The meaning of the bits is defined in table 7.3.182/1:
Table 7.3.182/1: WLAN-offloadability-EUTRAN
* * *
bit name Description 0 WLAN offloadability for E-UTRAN This bit, when set,
shall indicate that the traffic associated with the APN is allowed to be
offloaded to WLAN from E-UTRAN using the WLAN/3GPP Radio Interworking feature.
If not set, it means the traffic associated with the APN is not allowed to be
offloaded to WLAN from E-UTRAN. NOTE: Bits not defined in this table shall be
cleared by the sending HSS and discarded by the receiving MME or SGSN.
* * *
### 7.3.183 WLAN-offloadability-UTRAN
The WLAN-offloadability-UTRAN AVP is of type Unsigned32 and it shall contain a
bitmask. The meaning of the bits is defined in table 7.3.183/1:
Table 7.3.183/1: WLAN-offloadability-UTRAN
* * *
bit name Description 0 WLAN offloadability for UTRAN This bit, when set, shall
indicate that the traffic associated with the APN is allowed to be offloaded
to WLAN from UTRAN using the WLAN/3GPP Radio Interworking feature. If not set,
it means the traffic associated with the APN is not allowed to be offloaded to
WLAN from UTRAN. NOTE: Bits not defined in this table shall be cleared by the
sending HSS and discarded by the receiving MME or SGSN..
* * *
### 7.3.184 Reset-ID
The Reset-ID is of type OctetString. The value shall uniquely (within the
HSS\'s realm) identify a resource in the HSS that may fail or has restarted.
### 7.3.185 MDT-Allowed-PLMN-Id
The MDT-Allowed-PLMN-Id AVP is of type OctetString. This AVP shall contain the
concatenation of MCC and MNC. See 3GPP TS 23.003 [3]. The content of this AVP
shall be encoded as an octet string according to table 7.3.185/1.
This AVP identifies the PLMN in which the MDT data collection shall take
place.
See 3GPP TS 24.008 [31], clause 10.5.1.13, PLMN list, for the coding of MCC
and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 2 are coded as
\"1111\".
**Table 7.3.185/1: Encoding format for MDT-Allowed-PLMN-Id AVP**
* * *
8 7 6 5 4 3 2 1  
MCC digit 2 MCC digit 1 octet 1  
MNC digit 3 MCC digit 3 octet 2  
MNC digit 2 MNC digit 1 octet 3
* * *
### 7.3.186 Adjacent-PLMNs
The Adjacent-PLMNs AVP is of type Grouped. This AVP shall contain a list of
PLMN IDs where an UE served by the MME/SGSN is likely to make a handover from
the PLMN where the MME/SGSN is located.
AVP format:
> Adjacent-PLMNs ::= \
>
> 1*{ Visited-PLMN-Id }
>
> *[AVP]
### 7.3.187 Adjacent-Access-Restriction-Data
The Adjacent-Access-Restriction-Data AVP is of type Grouped. This AVP shall
contain a pair of PLMN ID and the associated Access Restriction Data for that
PLMN.
AVP format:
> Adjacent-Access-Restriction-Data ::= \
>
> { Visited-PLMN-Id }
>
> { Access-Restriction-Data }
>
> *[AVP]
### 7.3.188 DL-Buffering-Suggested-Packet-Count
The DL-Buffering-Suggested-Packet-Count AVP is of type Integer32. It shall
indicate whether extended buffering of downlink packets at the SGW, for High
Latency Communication, is requested or not. When requested, it may also
suggest the number of downlink packets to buffer at the SGW for this user.
The following values are defined:
\"Extended DL Data Buffering NOT REQUESTED\" 0
\"Extended DL Data Buffering REQUESTED, without a suggested number of
packets\" -1
\"Extended DL Data Buffering REQUESTED, with a suggested number of packets\" >
0
\"Extended DL Data Buffering REQUESTED\", with or without a suggested number
of packets to be buffered for this user, indicates that extended buffering of
downlink packets at the SGW is applicable to this user.
\"Extended DL Data Buffering NOT REQUESTED\" indicates that extended buffering
of downlink packets at the SGW is not applicable to this user.
### 7.3.189 IMSI-Group-Id
The IMSI-Group-Id AVP shall be of type Grouped. This AVP shall contain the
information about the IMSI-Group-Id.
AVP format
> IMSI-Group-Id ::= \
>
> { Group-Service-Id }
>
> { Group-PLMN-Id }
>
> { Local-Group-Id }
>
> *[AVP]
For details see 3GPP TS 23.003 [3], subclause 19.9).
### 7.3.190 Group-Service-Id
The Group-Service-Id AVP is of type Unsigned32 and it shall identify the
specific service for which the IMSI-Group-Id is used. The following values are
defined:
Table 7.3.190-1: Group-Service-Id
* * *
Value Description 1 **Group specific NAS level congestion control**
* * *
Values greater than 1000 are reserved for home operator specific use. IMSI-
Group-IDs with a Group-Service-Id in this range shall not be sent outside the
HPLMN unless roaming agreements allow so.
### 7.3.191 Group-PLMN-Id
The Group-PLMN-Id AVP is of type OctetString. This AVP shall contain the
concatenation of MCC and MNC. See 3GPP TS 23.003 [3]. The content of this AVP
shall be encoded as an octet string according to table 7.3.191-1.
See 3GPP TS 24.008 [31], clause 10.5.1.13, PLMN list, for the coding of MCC
and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 2 are coded as
\"1111\".
**Table 7.3.191-1: Encoding format for Group-PLMN-Id AVP**
* * *
8 7 6 5 4 3 2 1  
MCC digit 2 MCC digit 1 octet 1  
MNC digit 3 MCC digit 3 octet 2  
MNC digit 2 MNC digit 1 octet 3
* * *
### 7.3.192 Local-Group-Id
The Local-Group-Id AVP is of type OctetString. It shall contain an operator
defined value, representing a group.
### 7.3.193 AESE-Communication-Pattern
AESE-Communication-Pattern AVP is of type Grouped and is defined in 3GPP TS
29.336 [54].
AVP format
> AESE-Communication-Pattern ::= \
>
> [ SCEF-Reference-ID ]
>
> { SCEF-ID }
>
> *[ SCEF-Reference-ID-for-Deletion ]
>
> *[ Communication-Pattern-Set ]
>
> *[AVP]
At least one SCEF-Reference-ID or SCEF-Reference-ID-for-Deletion shall be
present.
### 7.3.194 Communication-Pattern-Set
Communication-Pattern-Set AVP is of type Grouped and is defined in 3GPP TS
29.336 [54].
AVP format
> Communication-Pattern-Set ::= \
>
> [ Periodic-Communication-Indicator ]
>
> [ Communication-Duration-Time ]
>
> [ Periodic-Time ]
>
> *[ Scheduled-Communication-Time ]
>
> [ Stationary-Indication ]
>
> [ Reference-ID-Validity-Time ]
>
> *[AVP]
If the Reference-ID-Validity-Time AVP is absent, it indicates that there is no
expiration time defined for the Communication-Pattern-Set.
### 7.3.195 Monitoring-Event-Configuration
The Monitoring-Event-Configuration AVP is of type Grouped. It shall contain
the Monitoring event configuration related subscription data. It is originally
defined in 3GPP TS 29.336 [54].
For S6a/S6d interface, the Monitoring-Event-Configuration AVP format is
specified as following:
AVP format:
> Monitoring-Event-Configuration ::= \
>
> [ SCEF-Reference-ID ]
>
> { SCEF-ID }
>
> { Monitoring-Type }
>
> *[ SCEF-Reference-ID-for-Deletion ]
>
> [ Maximum-Number-of-Reports ]
>
> [ Monitoring-Duration ]
>
> [ Charged-Party ]
>
> [ UE-Reachability-Configuration ]
>
> [ Location-Information-Configuration ]
>
> [ SCEF-Realm ]
>
> *[ AVP ]
When the Monitoring-Event-Configuration AVP is used over the S6a/S6d
interfaces, the SCEF-Realm AVP shall be present and its value shall be
obtained by the HSS from the Origin-Realm AVP of the Configuration-
Information-Request command conveying the corresponding monitoring event
configuration over the S6t interface from the SCEF to the HSS.
### 7.3.196 Monitoring-Event-Report
The Monitoring-Event-Report AVP is of type Grouped. It shall contain the
Monitoring event report data. It is originally defined in 3GPP TS 29.336 [54].
For S6a/S6d interface, the Monitoring-Event-Report AVP format is specified as
following:
AVP format:
> Monitoring Event Report::= \
>
> { SCEF-Reference-ID }
>
> [ SCEF-ID ]
>
> [ Reachability-Information ]
>
> [ EPS-Location-Information ]
>
> [ Monitoring-Type ]
>
> *[ AVP ]
The UE-Reachability-Configuration AVP is of type Grouped, and it shall contain
the details for configuration for UE reachability. It is originally defined in
3GPP TS 29.336 [54].
For S6a/S6d interface, the UE-Reachability-Configuration AVP format is
specified as following:
AVP format:
> UE-Reachability-Configuration::= \
>
> [ Reachability-Type ]
>
> [ Maximum-Response-Time ]
>
> *[ AVP ]
NOTE: When a Maximum-Response-Time value is not received from the SCEF, the
HSS can send an O&M configured desired active time value within the Maximum-
Response-Time AVP.
### 7.3.198 eNodeB-ID
The eNodeB-ID AVP is of type OctetString, and indicates the eNodeB in which
the UE is currently located. It is originally defined in 3GPP TS 29.217 [56].
### 7.3.199 Supported-Services
The Supported-Services AVP is of type Grouped and it shall contain the
different bit masks representing the services supported by the MME/SGSN:
AVP format
> Supported-Services::= \
>
> [ Supported-Monitoring-Events ]
>
> *[AVP]
### 7.3.200 Supported-Monitoring-Events
The Supported-Monitoring-Events AVP is of type Unsigned64 and it shall contain
a bit mask. The meaning of the bits shall be as defined in table 7.3.200-1:
Table 7.3.200 -1: Supported-Monitoring-Events
* * *
Bit Name Description 0 UE and UICC and/or new IMSI-IMEI-SV association only
used on S6t interface 1 UE-reachability This bit shall be set if UE
reachability Monitoring event is supported in the MME/SGSN 2 Location-of-the-
UE This bit shall be set if Location of the UE and change in location of the
UE Monitoring event is supported in the MME/SGSN 3 Loss-of-connectivity This
bit shall be set if Loss of connectivity Monitoring event is supported in the
MME/SGSN 4 Communication-failure This bit shall be set if Communication
failure Monitoring event is supported in the MME/SGSN 5 Roaming-status only
used on S6t interface 6 Availability after DDN failure This bit shall be set
if Availability after DDN failure Monitoring event is supported in the
MME/SGSN NOTE: Bits not defined in this table shall be cleared by the sender
and discarded by the receiver of the command.
* * *
### 7.3.201 AIR-Flags
The AIR-Flags AVP is of type Unsigned32 and it shall contain a bitmask. The
meaning of the bits is defined in table 7.3.201/1:
Table 7.3.201/1: AIR-Flags
* * *
bit name Description 0 Send UE Usage Type This bit, when set, indicates that
the MME or SGSN requests the HSS to send the subscription parameter \"UE Usage
Type\". NOTE: Bits not defined in this table shall be cleared by the sending
MME or SGSN and discarded by the receiving HSS.
* * *
### 7.3.202 UE-Usage-Type
The UE-Usage-Type AVP is of type Unsigned32. This value shall indicate the
usage characteristics of the UE that enables the selection of a specific
Dedicated Core Network (DCN). See subclause 4.3.25 of 3GPP TS 23.401 [2].
The allowed values of UE-Usage-Type shall be in the range of 0 to 255.
Values in the range of 0 to 127 are standardized and defined as follows:
0: Spare, for future use
...
127: Spare, for future use
Values in the range of 128 to 255 are operator-specific.
### 7.3.203 DRMP
The DRMP AVP is of type Enumerated and it is defined in IETF RFC 7944 [57].
This AVP allows the HSS, the CSS, the EIR and the MME/SGSN to indicate the
relative priority of Diameter messages.
### 7.3.204 Non-IP-PDN-Type-Indicator
The Non-IP-PDN-Type-Indicator AVP is of type Enumerated and indicates whether
the APN has a Non-IP PDN type.
The following values are defined:
FALSE (0)
This value indicates that the APN does not have a Non-IP PDN type and, in this
case, the actual PDN type of the APN is indicated by the PDN-Type AVP inside
APN-Configuration AVP.
TRUE (1)
This value indicates that the APN has a Non-IP PDN type and, in this case, the
value indicated by the PDN-Type AVP inside APN-Configuration AVP shall be
ignored.
The default value when this AVP is not present is FALSE (0).
### 7.3.205 Non-IP-Data-Delivery-Mechanism
The Non-IP-Data-Delivery-Mechanism AVP is of type Unsigned32 and indicates the
mechanism to be used for Non-IP data delivery for a given APN. The following
values are defined:
SGi-BASED-DATA-DELIVERY (0)
This value indicates that the Non-IP data is delivered via Point-To-Point
tunnelling over the SGi interface.
SCEF-BASED-DATA-DELIVERY (1)
This value indicates that the Non-IP data is delivered via the SCEF.
The default value when this AVP is not present is SGi-BASED-DATA-DELIVERY (0).
### 7.3.206 Additional-Context-Identifier
The Additional-Context-Identifier AVP is of type Unsigned32 and indicates the
identity of another default APN to be used when the subscription profile of
the user contains APNs with both IP-based and non-IP PDN types.
### 7.3.207 SCEF-Realm
The SCEF-Realm AVP is of type DiameterIdentity and it shall contain the
Diameter realm of the SCEF. For further details on the encoding of this AVP,
see IETF RFC 3588 [3].
### 7.3.208 Void
### 7.3.209 Preferred-Data-Mode
The Preferred-Data-Mode AVP is of type Unsigned32 and it shall contain a
bitmask. The meaning of the bits is defined in table 7.3.208/1:
Table 7.3.208/1: Preferred-Data-Mode
+----------------------+----------------------+----------------------+ | bit | name | Description | +----------------------+----------------------+----------------------+ | 0 | Data over User Plane | This bit, when set, | | | Preferred | shall indicate that | | | | the User Plane is | | | | preferred for | | | | transmitting the | | | | traffic associated | | | | with the APN. If not | | | | set, it means that | | | | the User Plane is | | | | not preferred for | | | | transmitting the | | | | traffic associated | | | | with the APN. | +----------------------+----------------------+----------------------+ | 1 | Data over Control | This bit, when set, | | | Plane Preferred | shall indicate that | | | | the Control Plane is | | | | preferred for | | | | transmitting the | | | | traffic associated | | | | with the APN. If not | | | | set, it means that | | | | the Control Plane is | | | | not preferred for | | | | transmitting the | | | | traffic associated | | | | with the APN. | +----------------------+----------------------+----------------------+ | NOTE 1: Bits not | | | | defined in this | | | | table shall be | | | | cleared by the | | | | sending HSS and | | | | discarded by the | | | | receiving MME. | | | | | | | | NOTE 2: At least one | | | | of the bits 0 and 1 | | | | shall be set to 1. | | | | Both bits 0 and 1 | | | | may be set to 1 to | | | | indicate that both | | | | User Plane and | | | | Control Plane are | | | | preferred for | | | | transmitting the | | | | traffic associated | | | | with the APN. | | | | | | | | NOTE 3: This | | | | parameter only | | | | applies to E-UTRAN | | | | and SGi PDN | | | | connections. Data | | | | over User Plane | | | | refers to PDN data | | | | transported over | | | | S1-U and Data Radio | | | | Bearer. Data over | | | | Control Plane refers | | | | to PDN data | | | | transported over NAS | | | | and Signalling Radio | | | | Bearer. | | | +----------------------+----------------------+----------------------+
### 7.3.210 Void
### 7.3.211 Void
### 7.3.212 Void
### 7.3.213 Void
### 7.3.214 Void
### 7.3.215 Void
### 7.3.216 Void
### 7.3.217 Void
### 7.3.218 Void
### 7.3.219 MBSFN-Area
The MBSFN-Area AVP is of type Grouped. It contains a MBSFN Area ID and a
Carrier Frequency (see 3GPP TS 32.422 [23]).
The AVP format shall conform to:
MBSFN-Area ::= \
> [ MBSFN-Area-ID ]
>
> [ Carrier-Frequency ]
>
> *[ AVP ]
If both MBSFN-Area-ID and Carrier-Frequency values are present, a specific
MBSFN area is indicated. If Carrier-Frequency value is present, but MBSFN-
Area-ID is absent, all MBSFN areas on that carrier frequency are indicated. If
both MBSFN-Area-ID and Carrier-Frequency are absent, any MBSFN area is
indicated.
### 7.3.220 MBSFN-Area-ID
The MBSFN-Area-ID AVP is of type Unsigned32 and it shall contain the MBSFN
Area ID value, in the range of 0..255 (see 3GPP TS 36.331 [62]).
### 7.3.221 Carrier-Frequency
The Carrier-Frequency AVP is of type Unsigned32 and it shall contain the
Carrier Frequency value, in the range of 0..262143 (see 3GPP TS 36.331 [62]).
## 7.4 Result-Code and Experimental-Result Values
### 7.4.1 General
This section defines result code values that shall be supported by all
Diameter implementations that conform to this specification.
### 7.4.2 Success
Result codes that fall within the Success category shall be used to inform a
peer that a request has been successfully completed. The Result-Code AVP
values defined in Diameter Base Protocol RFC 3588 [4] shall be applied.
### 7.4.3 Permanent Failures
Errors that fall within the Permanent Failures category shall be used to
inform the peer that the request has failed, and should not be attempted
again. The Result-Code AVP values defined in Diameter Base Protocol RFC 3588
[4] shall be applied. When one of the result codes defined here is included in
a response, it shall be inside an Experimental-Result AVP and the Result-Code
AVP shall be absent.
#### 7.4.3.1 DIAMETER_ERROR_USER_UNKNOWN (5001)
This result code shall be sent by the HSS to indicate that the user identified
by the IMSI is unknown
#### 7.4.3.2 DIAMETER_ERROR_UNKNOWN_EPS_SUBSCRIPTION (5420)
This result code shall be sent by the HSS to indicate that no EPS subscription
is associated with the IMSI.
#### 7.4.3.3 DIAMETER_ERROR_RAT_NOT_ALLOWED (5421)
This result code shall be sent by the HSS to indicate the RAT type the UE is
using is not allowed for the IMSI.
#### 7.4.3.4 DIAMETER_ERROR_ROAMING_NOT_ALLOWED (5004)
This result code shall be sent by the HSS to indicate that the subscriber is
not allowed to roam within the MME or SGSN area.
#### 7.4.3.5 DIAMETER_ERROR_EQUIPMENT_UNKNOWN (5422)
This result code shall be sent by the EIR to indicate that the mobile
equipment is not known in the EIR.
#### 7.4.3.6 DIAMETER_ERROR_UNKOWN_SERVING_NODE (5423)
This result code shall be sent by the HSS to indicate that a Notify command
has been received from a serving node which is not registered in HSS as the
node currently serving the user.
### 7.4.4 Transient Failures
Result codes that fall within the transient failures category shall be used to
inform a peer that the request could not be satisfied at the time it was
received, but may be able to satisfy the request in the future. The Result-
Code AVP values defined in Diameter Base Protocol RFC 3588 [4] shall be
applied. When one of the result codes defined here is included in a response,
it shall be inside an Experimental-Result AVP and the Result-Code AVP shall be
absent.
#### 7.4.4.1 DIAMETER_AUTHENTICATION_DATA_UNAVAILABLE (4181)
This result code shall be sent by the HSS to indicate that an unexpectedly
transient failure occurs. The requesting node can try the request again in the
future.
#### 7.4.4.2 DIAMETER_ERROR_CAMEL_SUBSCRIPTION_PRESENT (4182)
This result code shall be sent by the HSS to indicate that the subscriber to
be registered has SGSN CAMEL Subscription data.
## 8 User identity to HSS resolution
The User identity to HSS resolution mechanism enables the MME, SGSN (for non-
roaming case) or Diameter Relay/proxy agents in the home network (for roaming
case) to find the identity of the HSS that holds the subscriber data for a
given user identity when multiple and separately addressable HSSs have been
deployed in the home network. The resolution mechanism is not required in
networks that utilise a single HSS.
This User identity to HSS resolution mechanism may rely on routing
capabilitites provided by Diameter and be implemented in the home operator
network within dedicated Diameter Agents (Redirect Agents or Proxy Agents)
responsible for determining the HSS identity based on the provided user
identity. If this Diameter based implementation is selected by the Home
network operator, the principles described below shall apply.
In non-roaming case, in networks where more than one independently addressable
HSS are deployed in the home network, each MME and SGSN shall be configured
with the address/identity of a Diameter Agent (Redirect Agent or Proxy Agent)
implementing this resolution mechanism.
For support of roaming case, Diameter Relay agents and/or Diameter Proxy
agents in the home network receiving the Diameter signalling from visited
networks shall be configured with the address/identity of a Diameter Agent
(Redirect Agent or Proxy Agent) implementing this resolution mechanism.
To get the HSS identity that holds the subscriber data for a given user
identity in the home network, the Diameter request normally destined to the
HSS shall be sent to a pre-configured address/identity of a Diameter agent
supporting the User identity to HSS resolution mechanism.
\- If this Diameter request is received by a Diameter Redirect Agent, the
Diameter Redirect Agent shall determine the HSS identity based on the provided
user identity and shall return a notification of redirection towards the HSS
identity, in response to the Diameter request. Multiple HSS identities may be
included in the response, as specified in IETF RFC 3588 [4]. In such a case,
the requesting Diameter entity shall send the Diameter request to the first
HSS identity in the ordered list received in the Diameter response from the
Diameter Redirect Agent. If no successful response to the Diameter request is
received, the requesting Diameter entity shall send a Diameter request to the
next HSS identity in the ordered list. This procedure shall be repeated until
a successful response from an HSS is received. After the user identity to HSS
resolution, the MME or the SGSN shall store the determined HSS
identity/name/Realm and shall use it in further Diameter requests to the same
user identity.
\- If this Diameter request is received by a Diameter Proxy Agent, the
Diameter Proxy Agent shall determine the HSS identity based on the provided
user identity and shall forward the Diameter request directly to the HSS. In
this case, the user identity to HSS resolution decision is communicated to the
MME/SGSN in the Origin-Host/Origin-Realm AVPs of the response. The MME or the
SGSN may store the determined HSS identity/name/Realm and may use it in
further Diameter requests to the same user identity.
In roaming case, whereas a Diameter Relay Agent is stateless, a stateful
Diameter Proxy Agent in the home network may store the determined HSS
identity/name/Realm and use it in further Diameter requests associated to the
same user identity.
NOTE: Alternatives to the user identity to HSS resolution Diameter based
implementation are outside the scope of this specification.
###### ## Annex A (normative): MME mapping table for S6a and NAS Cause Code
values
When the UE initiates Attach, Tracking Area Update or Service Request, there
may be the need for the MME to communicate with the HSS via S6a to retrieve
authentication data and/or subscription data. If this retrieval is rejected by
the HSS, the received Diameter-Result-Code values or Experimental-Result
values need to be mapped to appropriate cause codes over NAS to the UE.
This mapping shall be as shown in Table A.1.
If the retrieval is successful, not needed (e.g. because data are already
available) or not possible (e.g. because HSS is unavailable or overloaded),
detected error conditions need to be mapped to appropriate cause codes over
NAS to the UE.
This mapping shall be as shown in Table A.2.
Table A.1: Mapping from S6a error code to NAS Cause Code values
+----------------------------------+----------------------------------+ | Reject indication received at | NAS Cause Code sent to UE | | MME over S6a | | +----------------------------------+----------------------------------+ | DIAMETER_ERROR_USER_UNKNOWN | #8 \"EPS services and non-EPS | | (5001) | services not allowed\" | +----------------------------------+----------------------------------+ | DIAMETER_E | #15 \"No suitable cells in | | RROR_UNKNOWN_EPS_SUBSCRIPTION | tracking area\" | | (5420) without Error Diagnostic, | | | or with Error Diagnostic of | | | GPRS_DATA_SUBSCRIBED | | +----------------------------------+----------------------------------+ | DIAMETER_E | #7 \"EPS services not allowed\" | | RROR_UNKNOWN_EPS_SUBSCRIPTION | | | (5420) with Error Diagnostic of | | | NO_GPRS_DATA_SUBSCRIBED | | +----------------------------------+----------------------------------+ | DI | #15 \"No suitable cells in | | AMETER_ERROR_RAT_NOT_ALLOWED | tracking area\", or | | (5421) | | | | #13 \"Roaming not allowed in | | | this tracking area\", or | | | | | | #12 \"Tracking area not | | | allowed\" | | | | | | (NOTE 1) | +----------------------------------+----------------------------------+ | DIAMET | #11 \"PLMN not allowed\" | | ER_ERROR_ROAMING_NOT_ALLOWED | | | (5004) , without Error | | | Diagnostic | | +----------------------------------+----------------------------------+ | DIAMET | #14 \"EPS services not allowed | | ER_ERROR_ROAMING_NOT_ALLOWED | in this PLMN\" | | (5004), with Error Diagnostic of | | | ODB_HPLMN_APN or | | | ODB_VPLMN_APN | | +----------------------------------+----------------------------------+ | DIAMET | #15 \"No suitable cells in | | ER_ERROR_ROAMING_NOT_ALLOWED | tracking area\" | | (5004), with Error Diagnostic of | | | ODB_ALL_APN | | +----------------------------------+----------------------------------+ | D | #15 \"No suitable cells in | | IAMETER_AUTHORIZATION_REJECTED | tracking area\", or | | (5003) | | | DIAMETER_UNABLE_TO_DELIVER | #17 \"Network failure\", or | | (3002) | | | | #42 \"Severe network failure\" | | DIAMETER_REALM_NOT_SERVED | | | (3003) | (NOTE 1) | +----------------------------------+----------------------------------+ | DIAMETER_UNABLE_TO_COMPLY | #17 \"Network failure\" or #42 | | (5012), | \"Severe network failure\" | | | | | DIAMETER_INVALID_AVP_VALUE | (NOTE 1) | | (5004) | | | | | | DIAMETER_AVP_UNSUPPORTED | | | (5001) | | | | | | DIAMETER_MISSING_AVP (5005) | | | | | | DIAMETER_RESOURCES_EXCEEDED | | | (5006) | | | | | | DIAMETE | | | R_AVP_OCCURS_TOO_MANY_TIMES | | | (5009) | | | | | | DIAMETER_A | | | UTHENTICATION_DATA_UNAVAILABLE | | | (4181) | | | | | | (NOTE 2) | | +----------------------------------+----------------------------------+ | NOTE 1: Any of those NAS Cause | | | Code values may be sent to the | | | UE, depending on operator\'s | | | choice. | | | | | | NOTE 2: Any other permanent | | | errors from the diameter base | | | protocol, not listed here, | | | should be mapped to NAS Cause | | | Code #17 \"Network failure\". | | +----------------------------------+----------------------------------+
Table A.2: Mapping from detected error condition to NAS Cause Code values
+----------------------------------+----------------------------------+ | Condition | NAS cause code sent to UE | +----------------------------------+----------------------------------+ | The MME receives a | #2 \"IMSI Unknown in HSS\" | | SGsAP-LOCATION-UPDATE-REJECT | | | message from the VLR indicating | | | in the reject cause \"IMSI | | | unknown in HLR\" or if the UE | | | has packet only subscription. | | | Only used in the Combined | | | Tracking and Location Area | | | Update procedure. | | +----------------------------------+----------------------------------+ | The MME receives in | #14 \"EPS services not allowed | | Update-Location-Answer message | in this PLMN\" | | an indication of Roaming | | | restricted in MME due to | | | unsupported feature | | +----------------------------------+----------------------------------+ | The MME cannot service an UE | #18 \"CS domain not available\" | | generated request because CS | | | domain is not available and SMS | | | in MME is not supported. | | +----------------------------------+----------------------------------+ | The value | #15 \"No suitable cells in | | OPERATOR_DETERMINED_BARRING is | tracking area\" | | received in the | | | Subscriber-Status AVP | | +----------------------------------+----------------------------------+ | The HSS indicates that due to | #12 \"Tracking area not | | subscription to a \"regionally | allowed\" | | restricted service\" the UE is | | | not allowed to operate in the | | | tracking area. | | +----------------------------------+----------------------------------+ | > The CSG ID of the cell from | #25 \"Not authorized for this | | > where the UE has sent the | CSG\" | | > TRACKING AREA UPDATE REQUEST | | | > message is not contained in | | | > the Allowed CSG list. | | +----------------------------------+----------------------------------+ | The MME detects that it cannot | #15 \"No suitable cells in | | communicate with the HSS in the | tracking area\" | | HPLMN of the subscriber. How the | | | MME detect this is | #14 \"EPS services not allowed | | implementation specific. | in this PLMN\" | | | | | | NOTE: Any of those NAS Cause | | | Code values may be sent to the | | | UE, depending on operator\'s | | | choice / configuration, e.g. NAS | | | Cause Code #14 is to be sent to | | | the UE if the network is an LTE | | | only network. | +----------------------------------+----------------------------------+ | The MME detects by internal | #11 \"PLMN not allowed\" | | configuration that roaming is | | | not allowed. | | +----------------------------------+----------------------------------+ | The MME detects that it cannot | #22 \"Congestion\" | | send a request to the HSS due to | | | HSS overload (see Annex C). | #42 \"Severe network failure\" | | | | | | NOTE 1: Cause #22 should be | | | used. In addition, the MME may | | | ask the UE not to retry before a | | | backoff timer expires, based on | | | an operator policy. The eventual | | | timer value may take into | | | account the value received in | | | the corresponding active | | | overload report and operator | | | policy. | | | | | | NOTE 2: Cause #42 may be used, | | | for attach requests, in case of | | | severe overload, according to | | | operator policy. | +----------------------------------+----------------------------------+
###### ## Annex B(normative): SGSN mapping table for S6d and NAS Cause Code
values
When the UE initiates Attach, Routing Area Update or Service Request, there
may be the need for the SGSN to communicate with the HSS via S6d to retrieve
authentication data and/or subscription data. If this retrieval is rejected by
the HSS, the received Diameter-Result-Code values or Experimental-Result
valuesneed to be mapped to appropriate cause codes over NAS to the UE.
NOTE: Mapping from MAP Gr error codes to NAS Cause Code values is described in
the 3GPP TS 29.010 [45].
This mapping shall be as shown in Table B.1.
If the retrieval is successful, not needed (e.g. because data are already
available) or not possible (e.g. because HSS is unavailable or overloaded),
detected error conditions need to be mapped to appropriate cause codes over
NAS to the UE.
This mapping shall be as shown in Table and B.2.
Table B.1: Mapping from S6d error code to NAS Cause Code values
+----------------------------------+----------------------------------+ | Reject indication received at | NAS Cause Code sent to UE | | SGSN over S6d | | +----------------------------------+----------------------------------+ | DIAMETER_ERROR_USER_UNKNOWN | #8 \"GPRS services and non-GPRS | | (5001) | services not allowed\" | +----------------------------------+----------------------------------+ | DIAMETER_E | #7 \"GPRS services not | | RROR_UNKNOWN_EPS_SUBSCRIPTION | allowed\" | | (5420) | | +----------------------------------+----------------------------------+ | DI | #15 \"No suitable cells in | | AMETER_ERROR_RAT_NOT_ALLOWED | location area\", or | | (5421) | | | | #13 \"Roaming not allowed in | | | this location area\", or | | | | | | #12 \"Location area not | | | allowed\" | | | | | | (NOTE 1) | +----------------------------------+----------------------------------+ | DIAMET | #11 \"PLMN not allowed\" | | ER_ERROR_ROAMING_NOT_ALLOWED | | | (5004) , without Error | | | Diagnostic | | +----------------------------------+----------------------------------+ | DIAMET | #14 \"GPRS services not allowed | | ER_ERROR_ROAMING_NOT_ALLOWED | in this PLMN\" | | (5004), with Error Diagnostic of | | | ODB_HPLMN_APN or | | | ODB_VPLMN_APN | | +----------------------------------+----------------------------------+ | DIAMET | #15 \"No suitable cells in | | ER_ERROR_ROAMING_NOT_ALLOWED | location area\" | | (5004), with Error Diagnostic of | | | ODB_ALL_APN | | +----------------------------------+----------------------------------+ | D | #15 \"No suitable cells in | | IAMETER_AUTHORIZATION_REJECTED | location area\" | | (5003) | | | | | | DIAMETER_UNABLE_TO_DELIVER | | | (3002) | | +----------------------------------+----------------------------------+ | DIAMETER_UNABLE_TO_COMPLY | #17 \"Network failure\" | | (5012), | | | | | | DIAMETER_INVALID_AVP_VALUE | | | (5004) | | | | | | DIAMETER_A | | | UTHENTICATION_DATA_UNAVAILABLE | | | (4181) and no retry takes place | | | | | | (NOTE 2) | | +----------------------------------+----------------------------------+ | NOTE 1: Any of those NAS Cause | | | Code values may be sent to the | | | UE, depending on operator\'s | | | choice. | | | | | | NOTE 2: Any other permanent | | | errors from the diameter base | | | protocol, not listed here, | | | should be also mapped to NAS | | | Cause Code #17 \"Network | | | failure\". | | +----------------------------------+----------------------------------+
Table B.2: Mapping from detected error condition to NAS Cause Code values
+----------------------------------+----------------------------------+ | Condition | NAS cause code to UE | +----------------------------------+----------------------------------+ | The SGSN receives a | #2 \"IMSI Unknown in HLR\" | | BSSAP+-LOCATION-UPDATE-REJECT | | | message from the VLR indicating | | | in the reject cause \"IMSI | | | unknown in HLR\" or if the UE | | | has packet only subscription. | | | Only used in the Combined | | | Routing and Location Area Update | | | procedure. | | +----------------------------------+----------------------------------+ | The SGSN receives in | #14 \"GPRS services not allowed | | Update-Location-Answer message | in this PLMN\" | | an indication of Roaming | | | restricted in SGSN due to | | | unsupported feature | | +----------------------------------+----------------------------------+ | The value | #15 \"No suitable cells in | | OPERATOR_DETERMINED_BARRING is | routing area\" | | received in the | | | Subscriber-Status AVP | | +----------------------------------+----------------------------------+ | The HLR indicates that due to | #12 \"Location area not | | subscription to a \"regionally | allowed\" | | restricted service\" the MS is | | | not allowed to operate in the | | | location area. | | +----------------------------------+----------------------------------+ | > The CSG ID of the cell from | #25 \"Not authorized for this | | > where the UE has sent the | CSG\" | | > ROUTING AREA UPDATE REQUEST | | | > message is not contained in | | | > the Allowed CSG list. | | +----------------------------------+----------------------------------+ | The SGSN indicates that the MS | #28 \"SMS provided via GPRS in | | has requested \"SMS-only | this routing area\" | | services\" and the SMS services | | | are provided by the SGSN in the | | | PS domain. | | +----------------------------------+----------------------------------+ | The SGSN detects that it cannot | #15 \"No suitable cells in | | communicate with the HLR in the | routing area\" | | HPLMN of the subscriber. How the | | | SGSN detect this is | #14 \"GPRS services not allowed | | implementation specific. | in this PLMN\" | | | | | | NOTE: Any of those NAS Cause | | | Code values may be sent to the | | | UE, depending on operator\'s | | | choice / configuration, e.g. NAS | | | Cause Code #14 is to be sent to | | | the UE if the network is an LTE | | | only network. | +----------------------------------+----------------------------------+ | The SGSN detects by internal | #11 \"PLMN not allowed\" | | configuration that roaming is | | | not allowed. | | +----------------------------------+----------------------------------+ | The SGSN detects that it cannot | #22 \"Congestion\". | | send a request to the HSS due to | | | HSS overload (see Annex C). | In addition, the MME may ask the | | | UE not to retry before a backoff | | | timer expires, based on an | | | operator policy. The eventual | | | timer value may take into | | | account the value received in | | | the corresponding active | | | overload report and operator | | | policy. | +----------------------------------+----------------------------------+
###### ## Annex C (normative): Diameter overload control mechanism
## C.1 General
IETF RFC 7683 [50] specifies a Diameter overload control mechanism which
includes the definition and the transfer of related AVPs between Diameter
nodes.
Depending on regional/national requirements and network operator policy,
priority traffic (e.g. MPS as described in 3GPP TS 22.153 [52]) shall be
exempted from throttling due to Diameter overload control up to the point
where requested traffic reduction cannot be achieved without throttling the
priority traffic.
## C.2 S6a/S6d interfaces
### C.2.1 General
Diameter overload control mechanism is an optional feature.
It is recommended to make use of IETF RFC 7683 [50] on the S6a/S6d interfaces
where, when applied, the MME or the SGSN shall behave as reacting nodes and
the HSS as a reporting node.
### C.2.2 HSS behaviour
The HSS requests traffic reduction from its clients when the HSS is in an
overload situation, including OC-OLR AVP in answer commands as described in
IETF RFC 7683 [50].
The HSS identifies that it is in an overload situation by implementation
specific means. For example, the HSS may take into account the traffic over
the S6a/d interfaces or other interfaces, the level of usage of internal
resources (CPU, memory), the access to external resources, etc.
The HSS determines the specific contents of OC-OLR AVP in overload reports and
the HSS decides when to send OC-OLR AVPs by implementation specific means.
### C.2.3 MME/SGSN behaviour
The MME/SGSN applies required traffic reduction received in answer commands to
subsequent applicable requests, as per RFC 7683 [50].
Requested traffic reduction is achieved by the MME/SGSN by implementation
specific means. For example, it may implement message throttling with
prioritization or a message retaining mechanism for operations that can be
postponed.
Diameter requests related to priority traffic (e.g. MPS as identified by the
MME/SGSN through access procedures) and emergency have the highest priority.
Depending on regional/national regulatory and operator policies, these
Diameter requests shall be the last to be throttled, when the MME/SGSN has to
apply traffic reduction. Relative priority amongst various priority traffic
(e.g. MPS) and emergency traffic is subject to regional/national regulatory
and operator policies.
As a result of the need to throttle traffic, the MME or SGSN may reject
Attach, Tracking Area Update or Service Requests initiated by UEs. The
possible NAS causes are described in the Annex A and B.
###### ## Annex D (Informative): Diameter overload control node behaviour
## D.1 Message prioritisation over S6a/d
This clause describes possible behaviours of the MME/SGSN regarding message
prioritisation as guidance and for an informative purpose when Diameter
overload control is applied over S6a/d.
When the HSS is overloaded, the MME/SGSN will receive overload reports from
the HSS requesting a reduction of the requests sent by the MME/SGSN. The
following and not exhaustive considerations may be taken into account for the
MME/SGSN throttling decisions:
\- Prioritisation of requests related to priority traffic (e.g. MPS as
identified by the MME/SGSN through access procedures, emergency)
\- Identification of the procedures that can be deferred (e.g. UE reachable
notification, purge after a long inactivity time), so to avoid to drop non
deferrable procedures;
\- Prioritisation of certain types of requests (i.e. between AIR, ULR, PUR,
NOR) according to the context of their use, in particular:
\- Higher prioritisation of ULR commands when used in relation with mobility
management (e.g. handover) for an attached user, so to avoid the interruption
of the service for the user;
\- Lower prioritisation of AIR and ULR commands when related to an initial
attach, so to avoid the attachment of new users;
\- Skipping of optional authentication (e.g. in TAU procedures).
###### ## **Annex E (normative):** Diameter message priority mechanism
## E.1 General
IETF RFC 7944 [57] specifies a Diameter routing message priority mechanism
that allows Diameter nodes to indicate the relative priority of Diameter
messages. With this information, other Diameter nodes may leverage the
relative priority of Diameter messages into routing, resource allocation and
also abatement decisions when overload control is applied.
## E.2 S6a/S6d interfaces
### E.2.1 General
The Diameter message priority mechanism is an optional feature.
It is recommended to make use of IETF RFC 7944 [57] over the S6a/S6d
interfaces of an operator network when the overload control defined in Annex C
is applied on these S6a/d interfaces.
### E.2.2 HSS, CSS, EIR behaviour
When the HSS, the CSS or the EIR supports the Diameter message priority
mechanism, the HSS, the CSS, or the EIR shall comply with IETF RFC 7944 [57].
The HSS or the CSS sending a request shall determine the required priority
according to its policies. When priority is required, the HSS or the CSS shall
include the DRMP AVP indicating the required priority level in the request it
sends, and shall prioritise the request according to the required priority
level.
When the HSS or the CSS receives the corresponding response, the HSS or the
CSS shall prioritise the received response according to the priority level
received within the DRMP AVP if present in the response, otherwise according
to the priority level of the corresponding request.
When the HSS, the CSS, or the EIR receives a request, it shall handle the
request according to the received DRMP AVP priority level. For the response,
the HSS, the CSS, or the EIR may modify the priority level received in the
DRMP AVP according to its policies and shall handle the response according to
the required priority level. If the required priority level is different from
the priority level received in the request, the HSS, the CSS, or the EIR shall
include the DRMP AVP in the response.
When not-explicitly requested, the inclusion and priority value of the DRMP
AVP in Diameter messages are implementation specific.
### E.2.3 MME/SGSN behaviour
When the MME/SGSN supports the Diameter message priority mechanism, the
MME/SGSN shall comply with IETF RFC 7944 [57].
The MME/SGSN sending a request shall determine the required priority according
to its policies. When priority is required, the MME/SGSN shall include the
DRMP AVP indicating the required priority level in the request it sends, and
shall prioritise the requests according to the required priority level.
When the MME/SGSN receives the corresponding response, it shall prioritise the
received response according to the priority level received within the DRMP AVP
if present in the response, otherwise according to the priority level of the
corresponding request.
When the MME/SGSN receives a request, it shall handle the request according to
the received DRMP AVP priority level. For the response, it may modify the
priority level received in the DRMP AVP according to its policies and shall
handle the response according to the required priority level. If the required
priority level is different from the priority level received in the request,
it shall include the DRMP AVP in the response.
Diameter requests related to high priority traffic (e.g. MPS as identified by
the MME/SGSN via the RRC Establishment Cause IE set to the highPriorityAccess
value as per 3GPP TS 36.413 [19] or through subscription information in the
MPS-Priority AVP, emergency) shall contain a DRMP AVP with a high priority of
which the level value is operator dependent.
When not-explicitly requested, the inclusion and priority value of the DRMP
AVP in Diameter messages are implementation specific.
#