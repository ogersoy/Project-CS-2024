# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is part of a series of documents that specify charging
functionality and charging management in GSM/UMTS/LTE networks. The
GSM/UMTS/LTE core network charging architecture and principles are specified
in TS 32.240 [1], which provides an umbrella for other charging management TSs
that specify:
\- the content of the CDRs per domain / subsystem / service (offline
charging);
\- the content of real-time charging messages per domain / subsystem / service
(online charging);
\- the functionality of online and offline charging for those domains /
subsystems / services;
\- the interfaces that are used in the charging framework to transfer the
charging information (i.e. CDRs or charging events).
The complete document structure for these TSs is defined in TS 32.240 [1].
The present document specifies the Offline Charging description for Monitoring
Events, based on the functional stage 2 description in TS 23.682 [243]. This
charging description includes the offline charging architecture and scenarios
specific to Monitoring Events, as well as the mapping of the common 3GPP
charging architecture specified in TS 32.240 [1] onto the 3GPP Architecture
for Service Capability Exposure. It further specifies the structure and
content of the CDRs for offline charging. The present document is related to
other 3GPP charging TSs as follows:
\- The common 3GPP charging architecture is specified in TS 32.240 [1].
\- The parameters, abstract syntax and encoding rules for the CDRs are
specified in TS 32.298 [51].
\- A transaction based mechanism for the transfer of CDRs within the network
is specified in TS 32.295 [54].
\- The file based mechanism used to transfer the CDRs from the network to the
operator\'s billing domain (e.g. the billing system or a mediation device) is
specified in TS 32.297 [52].
\- The 3GPP Diameter application that is used for Monitoring Event offline
charging is specified in TS 32.299 [50].
The online charging functionality for Monitoring Events is outside the scope
of 3GPP standardisation.
All references, abbreviations, definitions, descriptions, principles and
requirements, used in the present document, that are common across 3GPP TSs,
are defined in the 3GPP Vocabulary, TR 21.905 [100]. Those that are common
across charging management in GSM/UMTS/LTE domains, services or subsystems are
provided in the umbrella document TS 32.240 [1] and are copied into clause 3
of the present document for ease of reading. Finally, those items that are
specific to the present document are defined exclusively in the present
document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 32.240: \"Telecommunication management; Charging management;
Charging architecture and principles\".
[2] - [9] Void.
[10] 3GPP TS 32.250: \"Telecommunication management; Charging management;
Circuit Switched (CS) domain charging\".
[11] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[12] - [19] Void.
[20] 3GPP TS 32.260: \"Telecommunication management; Charging management; IP
Multimedia Subsystem (IMS) charging\".
[21] - [29] Void.
[30] 3GPP TS 32.270: \"Telecommunication management; Charging management;
Multimedia Messaging Service (MMS) charging\".
[31] 3GPP TS 32.271: \"Telecommunication management; Charging management;
Location Services (LCS) charging\".
[32] 3GPP TS 32.272: \"Telecommunication management; Charging management;
Push-to-Talk over Cellular (PoC) charging\".
[33] 3GPP TS 32.273: \"Telecommunication management; Charging management;
Multimedia Broadcast/Multicast Service (MBMS) charging\".
[34] 3GPP TS 32.274: \"Telecommunication management; Charging management;
Short Message Service (SMS) charging\".
[35] 3GPP TS 32.275: \"Telecommunication management; Charging management;
MultiMedia Telephony (MMTel) charging\".
[36] 3GPP TS 32.276: \"Telecommunication management; Charging management;
Voice Call Service (VCS) charging\".
[37] 3GPP TS 32.277: \"Telecommunication management; Charging management;
Proximity-based Services (ProSe) charging\".
[38] - [49] Void.
[50] 3GPP TS 32.299: \"Telecommunication management; Charging management;
Diameter charging application\".
[51] 3GPP TS 32.298: \"Telecommunication management; Charging management;
Charging Data Record (CDR) parameter description\".
[52] 3GPP TS 32.297: \"Telecommunication management; Charging management;
Charging Data Record (CDR) file format and transfer\".
[53] 3GPP TS 32.296: \"Telecommunication management; Charging management;
Online Charging System (OCS) applications and interfaces\".
[54] 3GPP TS 32.295: \"Telecommunication management; Charging management;
Charging Data Record (CDR) transfer\".
[55] Void.
[56] 3GPP TS 32.293: \"Telecommunication management; Charging management;
Proxy Function\".
[57] - [99] Void.
[100] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[101] 3GPP TS 22.101: \"Service aspects; Service Principles\".
[102] 3GPP TS 22.115: \"Service aspects; Charging and billing\".
[103] 3GPP TS 23.002: \"Network Architecture\".
[104] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[105] 3GPP TS 27.001: \"General on Terminal Adaptation Functions (TAF) for
Mobile Stations (MS)\".
[106] - [199] Void.
[200] -- [212] void
[213] 3GPP TS 24.002: \"GSM - UMTS Public Land Mobile Network (PLMN) access
reference configuration\".
[214] - [242] Void.
[243] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[244] - [299] Void.
[300] Recommendation ITU-T D.93: \"Charging and accounting in the
international land mobile telephone service (provided via cellular radio
systems)\".
[301] - [309] Void.
[310] Recommendation ITU-T E.164: \"The international public telecommunication
numbering plan\".
[311] - [329] Void.
[330] Recommendation ITU-T Q.767: \"Application of the ISDN user part of CCITT
signalling System No.7 for international ISDN interconnections\".
[331] - [349] Void.
[350] Recommendation ITU-T X.25: \"Interface between Data Terminal Equipment
(DTE) and Data Circuit-terminating Equipment (DCE) for terminals operating in
the packet mode and connected to public data networks by dedicated circuit\".
[351] Recommendation ITU-T X.121: \"International numbering plan for public
data networks\".
[352] - [399] Void.
[400] IETF RFC 959 (1985): \"File Transfer Protocol\".
[401] IETF RFC 3588 (2003): \"Diameter Base Protocol\".
[402] IETF RFC 4006 (2005): \"Diameter Credit-Control Application\".
[403] - [499] Void.
[500] - [599] Void.
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [100] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in TR
21.905 [100].
**2G‑ / 3G‑:** prefixes 2G‑ and 3G‑ refer to functionality that supports only
GSM or UMTS, respectively, e.g. 2G‑SGSN refers only to the GSM functionality
of an SGSN.
NOTE 1: When the term/prefix is omitted, reference is made independently from
the GSM or UMTS functionality.
**accounting:** process of apportioning charges between the Home Environment,
Serving Network and Subscriber.
**application data:** information / data specific to an application other than
the MMS User Agent / VASP which is intended to be transported without
alteration by using MMS.
NOTE 2: Application Data may be of any content type and format.
**billing:** function whereby CDRs generated by the charging function(s) are
transformed into bills requiring payment.
**Billing Domain:** part of the operator network, which is outside the
telecommunication network, that receives and processes CDR files from the core
network charging functions.
NOTE 3: It includes functions that can provide billing mediation and billing
or other (e.g. statistical) end applications. It is only applicable to offline
charging (see \"Online Charging System\" for equivalent functionality in
online charging).
**CDR field categories:** the CDR fields are defined in the present document.
CDR fields may be operator provisionable and are divided into the following
categories:
**\- Mandatory (M):** field that shall always be present in the CDR.
**\- Conditional (C):** field that shall be present in a CDR if certain
conditions are met.
**\- Operator Provisionable: Mandatory (O~M~):** field that, if provisioned by
the operator, shall always be present in the CDR.
**\- Operator Provisionable: Conditional (O~C~):** field that, if provisioned
by the operator, shall be present in a CDR if certain conditions are met.
**chargeable event:** activity utilizing telecommunication network resources
and related services for:
\- user to user communication (e.g. a single call, a data communication
session or a short message); or
\- user to network communication (e.g. service profile administration); or
\- inter-network communication (e.g. transferring calls, signalling, or short
messages); or
\- mobility (e.g. roaming or inter-system handover); and
\- that the network operator may want to charge for.
NOTE 4: As a minimum, a chargeable event characterises the resource / service
usage and indicates the identity of the involved end user(s).
**charged party:** user involved in a chargeable event who has to pay parts or
the whole charges of the chargeable event, or a third party paying the charges
caused by one or all users involved in the chargeable event, or a network
operator.
**charging:** function within the telecommunications network and the
associated OCS/BD components whereby information related to a chargeable event
is collected, formatted, transferred and evaluated in order to make it
possible to determine usage for which the charged party may be billed (offline
charging) or the subscriber\'s account balance may be debited (online
charging).
**Charging Data Record (CDR):** formatted collection of information about one
or more chargeable event(s) (e.g. time of call set-up, duration of the call,
amount of data transferred, etc) for use in billing and accounting.
NOTE 5: For each party to be charged for parts of or all charges of the
chargeable event(s) a separate CDR shall be generated, i.e. more than one CDR
may be generated for a single chargeable event, e.g. because of its long
duration, or because more than one charged party is to be charged.
**charging event:** set of charging information forwarded by the CTF towards
the CDF (offline charging) or towards the OCS (online charging).
NOTE 6: Each charging event matches exactly one chargeable event.
**charging function:** entity inside the core network domain, subsystem or
service that is involved in charging for that domain, subsystem or service.
**delivery report:** feedback information provided to an originator MMS User
Agent by an MMS Relay/Server about the status of the delivery of an MM.
**domain:** part of a communication network that provides network resources
using a certain bearer technology.
**GSM only:** qualifier indicating that this clause or paragraph applies only
to a GSM system.
NOTE 7: For multi-system cases this is determined by the current serving radio
access network.
**in GSM,...:** qualifier indicating that this paragraph applies only to GSM
System.
**in UMTS,...:** qualifier indicating that this paragraph applies only to UMTS
System.
**inter-system change:** change of radio access between different radio access
technologies such as GSM, UMTS and LTE.
**\"middle tier\" (charging) TS:** term used for the 3GPP charging TSs that
specify the domain / subsystem / service specific, online and offline,
charging functionality.
NOTE 8: These are all the TSs in the numbering range from TS 32.250 to TS
32.279, e.g. TS 32.250 [10] for the CS domain, TS 32.260 [20] for the IMS or
TS 32.270 [30] for the MMS service. Currently, there is only one \"tier 1\" TS
in 3GPP, which is TS 32.240 [1] that specifies the charging architecture and
principles. Finally, there are a number of top tier TSs in the 32.29x
numbering range ([50] ff) that specify common charging aspects such as
parameter definitions, encoding rules, the common billing domain interface or
common charging applications.
**offline charging:** charging mechanism where charging information **does
not** affect, in real-time, the service rendered.
**online charging:** charging mechanism where charging information **can**
affect, in real-time, the service rendered and therefore a direct interaction
of the charging mechanism with bearer/session/service control is required.
**online charging system:** the entity that performs real-time credit control.
Its functionality includes transaction handling, rating, online correlation
and management of subscriber account balances.
**packet switched domain:** domain within GSM/UMTS/LTE in which data is
transferred in packet switched mode. Corresponds to the term \"GPRS\".
**partial CDR:** CDR that provides charging information on part of a
subscriber session. A long session may be covered by several partial CDRs.
NOTE 9: Two formats are considered for Partial CDRs. One that contains all of
the provisioned fields (FQPC); the second has a reduced format (RPC).
**settlement:** payment of amounts resulting from the accounting process.
**subscriber:** entity (associated with one or more users) that is engaged in
a subscription with a service provider.
NOTE 10: The subscriber is allowed to subscribe and unsubscribe services, to
register a user or a list of users authorised to enjoy these services, and
also to set the limits relative to the use that associated users make of these
services.
**successful call:** connection that reaches the communication or data
transfer phase e.g. the \"answered\" state for speech connections.
NOTE 11: All other connection attempts are regarded as unsuccessful.
**target UE:** UE being positioned.
**tariff period:** part of one (calendar) day during which a particular tariff
is applied. Defined by the time at which the period commences (the switch-over
time) and the tariff to be applied after switch-over.
**tariff:** set of parameters defining the network utilisation charges for the
use of a particular bearer / session / service.
**UMTS only:** qualifier indicating that this clause or paragraph applies only
to a UMTS system.
NOTE 12: For multi-system cases this is determined by the current serving
radio access network.
**user:** entity, not part of the 3GPP System, that uses network resources by
means of a subscription.
NOTE 13: The user may or may not be identical to the subscriber holding that
subscription.
**User Equipment (UE):** device allowing a user access to network services.
NOTE 14: For the purpose of 3GPP specifications the interface between the UE
and the network is the radio interface. A User Equipment can be subdivided
into a number of domains, the domains being separated by reference points.
Currently defined domains are the USIM and ME Domains. The ME Domain can
further be subdivided into several components showing the connectivity between
multiple functional groups. These groups can be implemented in one or more
hardware devices. An example of such a connectivity is the TE -- MT interface.
Further, an occurrence of a User Equipment is an MS for GSM as defined in TS
24.002 [213].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Bmn Reference point for the CDR file transfer from the Monitoring Event CGF to
the BD.
Ga Reference point for CDR transfer between a CDF and the CGF.
Ns Reference point between the SCEF and the RCAF.
Rf Offline charging reference point between a MME/SGSN/IWK-SCEF and the CDF.
S6t Reference point between the SCEF and the HSS.
T6a Reference point between the SCEF and the s erving MME.
T6ai Reference point between the IWK-SCEF and the serving MME.
T6b Reference point between the SCEF and the serving SGSN.
T6bi Reference point between the IWK-SCEF and the serving SGSN.
T7 Reference point between the IWK-SCEF and the serving SCEF.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[100] and the following apply.\ An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in TR 21.905 [100].
3G 3rd Generation
3GPP 3^rd^ Generation Partnership Project
ACA Accounting Answer
ACR Accounting Request
AMF Account Balance Management Function
APN Access Point Name
AVP Attribute Value Pair
BD Billing Domain
BS Billing System
CCF Charging Collection Function
CDF Charging Data Function
CDR Charging Data Record
CG Charging Gateway
CGF Charging Gateway Function
CRF Charging Rules Function
CTF Charging Trigger Function
DCCA Diameter Credit Control Application
EBCF Event Based Charging Function
ECUR Event Charging with Unit Reservation
FCI Furnish Charging Information
FQPC Fully Qualified Partial CDR
FTAM File Transfer, Access and Management
G-CDR GGSN (PDP context) generated - CDR
GGSN Gateway GPRS Support Node
GPRS General Packet Radio Service
GSM Global System for Mobile communication
HLR Home Location Register
HPLMN Home PLMN
HSS Home Subscriber Server
IEC Immediate Event Charging
IETF Internet Engineering Task Force
IMEI International Mobile Equipment Identity
IMSI International Mobile Subscriber Identity
IP Internet Protocol
IPv4 Internet Protocol version 4
IPv6 Internet Protocol version 6
ISDN Integrated Services Digital Network
IWK-SCEF Interworking SCEF
M-CDR Mobility management generated - Charging Data Record
MECN Monitoring Event Charging Node (MME, SGSN, IWK-SCEF)
MNC Mobile Network Code (part of IMSI)
MSISDN Mobile Station ISDN number
NE Network Element
NI Network Identifier (part of the APN)
OCF Online Charging Function
OCS Online Charging System
OMA Open Mobile Alliance
PLMN Public Land Mobile Network
PMD Pseudonym Mediation Device functionality
PS Packet-Switched
PSPDN Packet-Switched Public Data Network
PSTN Public Switched Telephony Network
QoS Quality of Service
RAB Radio Access Bearer
RAN Radio Access Network
RF Rating Function
SBCF Session Based Charging Function
SCCP Signalling Connection Control Part
S-CDR SGSN (PDP context) generated -- CDR
SCEF Service Capability Exposure Function
SCUR Session Charging with Unit Reservation
SGSN Serving GPRS Support Node
TAP Transferred Account Procedure
TDP Trigger Detection Point
TPF Traffic Plane Function
TR Technical Report
TS Technical Specification
TV Type, Value
UA User Agent
UE User Equipment
UMTS Universal Mobile Telecommunications System
UTRAN Universal Terrestrial Radio Access Network
VLR Visitor Location Register
VPLMN Visited PLMN
# 4 Architecture considerations
## 4.1 High level monitoring event architecture
Figure 4.1.1 shows the overall architecture for Service Capability Exposure
which enables the 3GPP network to securely expose its services and
capabilities provided by 3GPP network interfaces to external 3rd party service
provider applications, which includes Monitoring Event functionality, as
described in TS 23.682 [243].
Figure 4.1.1: 3GPP Architecture for Service Capability Exposure
For roaming case, the Interworking SCEF (IWK-SCEF) is optionally deployed and
located in the VPLMN, as described in figure 4.1.2.
Figure 4.1.2: 3GPP roaming Architecture for Service Capability Exposure
## 4.2 Monitoring Event offline charging architecture
_As described in TS 32.240 [1], the CTF (an integrated component in each
charging relevant NE) generates charging events and forwards them to the CDF.
The CDF, in turn, generates CDRs which are then transferred to the CGF.\
Finally, the CGF creates CDR files and forwards them to the BD._
For offline charging the following Monitoring Event Charging Nodes (MECN),
functioning as the CTF, may generate accounting metrics sets for Monitoring
Event CDRs:
\- the MME, to record Monitoring Events;
\- the SGSN, to record Monitoring Events;
\- the IWK-SCEF, to record Monitoring Events.
If the MECN generating the charging information has an integrated CDF, then
the MECN can produce CDRs. The CGF may also be integrated in the MECN, or it
may exist as a physically separate entity.\ If the CGF is external to the
MECN/CDF, then the MECN/CDF forwards the CDRs to the CGF across the Ga
interface. In this case, the relationship between MECN/CDF and CGF is m:1.\ If
the CGF is integrated in the MECN/CDF, then there is only an internal
interface between the CDF and the CGF. In this case, the relationship between
MECN/CDF and CGF is 1:1. An integrated CGF may support the Ga interface from
other MECN/CDFs.
If the CDF is external to the MECN, the charging events are transferred from
the MECN to the CDF via the Rf interface specified in TS 32.299 [50]. In this
case, the relationship between MECN and CDF is m:1.
When an external CGF is used, this CGF may also be used by other, i.e. non-
Monitoring Event, network elements, according to network design and operator
decision. It should be noted that the CGF may also be an integrated component
of the BD -- in this case, the Bmn interface does not exist and is replaced by
a proprietary solution internal to the BD.
Figure 4.2.1 depicts the architectural options described above.
Figure 4.2.1: Monitoring Event offline charging architecture
It is mandatory to support at least one of the Rf, Ga or Bmn interfaces from
the MECN as described in the present document.
NOTE: Support of Monitoring Event charging is optional for MECN.
## 4.3 Monitoring Event online charging architecture
Not specified in the present document.
# 5 Monitoring event charging principles and scenarios
## 5.1 Monitoring event charging principles
Two types of activities associated with Monitoring Events as specified in TS
23.682 [243] are:
\- Monitoring Event configuration request
\- Monitoring Event report
The following are high level charging requirements for Monitoring Events,
derived from requirements in TS 23.682 [243]:
\- MECN shall be able, based on operator configuration, to collect charging
information for Monitoring Event configuration requests from HSS or SCEF in
the same PLMN using offline charging.
\- MECN shall be able, based on operator configuration, to collect charging
information for Monitoring Event configuration requests from HSS or SCEF in a
different PLMN using offline charging.
\- MECN shall be able, based on operator configuration, to collect charging
information for Monitoring Event reports toward SCEF in the same PLMN using
offline charging.
\- MECN shall be able, based on operator configuration, to collect charging
information for Monitoring Event reports towards SCEF in a different PLMN
using offline charging.
For Monitoring Event configuration requests, the MECN shall collect the
following information:
\- time configuration request received;
\- configuration activity: create, transfer, update, delete;
\- identity of the SCEF originating request and the reference identifier used
by the SCEF for the request;
\- type of event to be monitored;
\- maximum number of reports to be generated for the event type;
\- time at which the request is considered to expire;
\- identity of the chargeable party for the request, when provided to the
MECN.
For Monitoring Event configuration requests, the MECN shall collect the
following information, if applicable for the type of event:
\- identity of the monitored user;
\- maximum period of time without any communication with the UE;
\- reachability type, e.g. SMS or data;
\- maximum delay acceptable for downlink data transfers;
\- time for which the UE stays reachable to allow the SCS/AS to reliable
deliver the required downlink data;
\- number of packets that the Serving Gateway shall buffer in case the UE is
not reachable;
\- whether the request is for current location or last known location;
\- desired level of accuracy of the requested location information;
\- list of cells, eNodeB\'s and/or RAI(s)/TAI(s) for determination of the
number of UEs in the area;
\- whether the request was successful or not.
For Monitoring Event reports, the MECN shall collect the following
information:
\- identity of the SCEF originating request and the reference identifier used
by the SCEF for the request;
\- type of event reported;
\- number of the event report for the specific configured request in the MECN;
\- identity of the chargeable party for the request, when provided to the
MECN.
For Monitoring Event reports, the MECN shall collect the following
information, if applicable for the type of event:
\- identity of the monitored user;
\- reachability status of the user;
\- reported location of the user;
\- RAN or NAS cause code for communication failure with the UE;
\- an indication whether an error occurred in the report.
## 5.2 Monitoring event offline charging scenarios
### 5.2.1 Basic principles
If charging is supported by an SGSN, MME, or IWK-SCEF, known as a MECN, it
shall be able to report charging events for CDRs generated by the CDF.
The following chargeable events are defined for Monitoring Event configuration
requests:
\- Monitoring Event configuration request received from HSS or SCEF.
\- Monitoring Event configuration request transferred from another MECN.
\- Monitoring Event configuration request update received from HSS or SCEF.
\- Monitoring Event configuration request deletion received from HSS or SCEF.
The following chargeable events are defined for Monitoring Event reports:
\- Monitoring Event report sent, including standalone report request or
immediate reporting in the configuration answer messages.
### 5.2.2 Rf message flows
When a charging event is reported to the CDF, it includes details about the
configured Monitoring Event including the identity of the SCEF originating the
request and the reference identifier used by the SCEF for the request; type of
Monitoring Event; and identity of the chargeable party, if available.
Additional information is included based on whether the charging event is for
a configuration request or a report and on the specific type of Monitoring
Event.
The trigger conditions described in Table 5.2.2.1 are applicable for charging
information collection for Monitoring Event charging. Charging Data
Request[Event] is sent upon occurrence of the specified event.
In order to save MECN processing effort, a burst of Monitoring Event reports
in a short time interval may be treated as a single charging event for
reporting to the CDF. The determination of whether to send Charging Data
Request[Event] for a single Monitoring Event report sent or for a burst of
Monitoring Event reports sent is implementation-specific.
Table 5.2.2.1: Charging Data Request messages triggered for Monitoring Event
charging
+--------------------------------+------------------------------------+ | message | Triggering conditions | +--------------------------------+------------------------------------+ | Charging Data Request[Event] | Receipt of Monitoring Event | | | configuration request (new | | | request, update, delete). | | | | | | Transfer of Monitoring Event | | | configuration request. | | | | | | Single Monitoring Event report | | | sent. | | | | | | Burst of Monitoring Event reports | | | sent. | +--------------------------------+------------------------------------+
### 5.2.3 CDR generation
A Monitoring Event Configuration Request CDR (ME-CO-CDR) is meant to collect
charging information related to an individual Monitoring Event configuration
request in the MECN. A single CDR is generated for each event.
A Monitoring Event Report CDR (ME-RE-CDR) is meant to collect charging
information related to a single Monitoring Event report or a burst of
Monitoring Event reports in a short time interval. The CDF, may, based on
operator implementation, generate a single ME-RE-CDR when a burst of
Monitoring Event reports is reported by the CTF or may generate an individual
ME-RE-CDR for each Monitoring Event report when a burst is reported by the
CTF.
### 5.2.4 Ga record transfer flows
Details of the Ga protocol application are specified in TS 32.295 [54].
### 5.2.5 Bmn CDR file transfer
Details of the Bx protocol application are specified in TS 32.297 [52].
## 5.3 Monitoring event online charging scenarios
### 5.3.1 Basic principles
Not specified in the present document.
### 5.3.2 Ro message flows
Not specified in the present document.
# 6 Definition of charging information
## 6.1 Data description for monitoring event offline charging
### 6.1.1 Rf message contents
#### 6.1.1.1 General
The Monitoring Event Offline Charging uses the Charging Data Transfer messages
Charging Data Request and Charging Data Response defined in TS 32.299 [50].
The Charging Data Request can be of type event and includes all charging
information. The Charging Data Response is an acknowledgement of the Charging
Data Request.
Table 6.1.1.1.1 describes the use of these messages for offline charging.
Table 6.1.1.1.1: Offline charging messages reference table
* * *
Message Source Destination Charging Data Request MECN CDF Charging Data
Response CDF MECN
* * *
This clause describes the different fields used in the Charging Data messages
and the category in the tables is used according to the charging data
configuration defined in clause 5.4 of TS 32.240 [1].
#### 6.1.1.2 Charging data request message
Table 6.1.1.2.1 illustrates the basic structure of a Charging Data Request
message from the MECN as used for Monitoring Event offline charging.
Table 6.1.1.2.1: Charging Data Request message contents
* * *
Information Element Category Description Session Identifier M Described in TS
32.299 [50] Originator Host M Described in TS 32.299 [50] Originator Domain M
Described in TS 32.299 [50] Destination Domain M Described in TS 32.299 [50]
Operation Type M Described in TS 32.299 [50] Operation Number M Described in
TS 32.299 [50] Operation Identifier O~C~ Described in TS 32.299 [50] User Name
O~C~ Described in TS 32.299 [50] Destination Host O~C~ Described in TS 32.299
[50] Operation Interval O~C~ Described in TS 32.299 [50] Origination State
O~C~ Described in TS 32.299 [50] Origination Timestamp O~C~ Described in TS
32.299 [50] Proxy Information O~C~ Described in TS 32.299 [50] Route
Information O~C~ Described in TS 32.299 [50] Operation Token O~M~ This field
identifies the Monitoring Event Services. Service Information O~M~ This field
holds the Monitoring Event specific information described in clause 6.3.
* * *
NOTE: Detailed descriptions of the information elements are provided in TS
32.299 [50].
#### 6.1.1.3 Charging data response message
Table 6.1.1.3.1 illustrates the basic structure of a Charging Data Response
message as used for the MECN.
Table 6.1.1.3.1: Charging Data Response message contents
* * *
Information Element Category Description Session Identifier M Described in TS
32.299 [50] Operation Result M Described in TS 32.299 [50] Originator Host M
Described in TS 32.299 [50] Originator Domain M Described in TS 32.299 [50]
Operation Type M Described in TS 32.299 [50] Operation Number O~C~ Described
in TS 32.299 [50] Operation Identifier O~C~ Described in TS 32.299 [50]
Operation Interval O~C~ Described in TS 32.299 [50] Error Reporting Host O~C~
Described in TS 32.299 [50] Origination State O~C~ Described in TS 32.299 [50]
Origination Timestamp O~C~ Described in TS 32.299 [50] Proxy Information O~C~
Described in TS 32.299 [50]
* * *
NOTE: Detailed descriptions of the information elements are provided in TS
32.299 [50].
### 6.1.2 Ga message contents
Refer to clause 5.2.4 for further information.
### 6.1.3 CDR description on the B~mn~ interface
#### 6.1.3.1 General
The following standard CDR content and formats are considered:
\- ME-CO-CDR generated for a single Monitoring Event configuration request.
\- ME-RE-CDR generated for a set of Monitoring Event reports.
For each of the CDR types, a parameter table, which gives a short description
of the parameters, is provided. The category in the tables are used according
to the charging data configuration defined in clause 5.4 of TS 32.240 [1].
#### 6.1.3.2 Monitoring Event Configuration Request charging data (ME-CO-CDR)
If enabled, a Monitoring Event Configuration Request record shall be produced
for each monitoring configuration request received. Renewal requests are
captured in a separate record from the original request. The fields in the
record are specified in table 6.1.3.2.1.
Table 6.1.3.2.1: Monitoring Event Configuration Request charging data (ME-CO-
CDR)
* * *
Field Category Description Record Type M Monitoring Event Configuration
Request Retransmission Oc This parameter, when present, indicates that
information from retransmitted Accounting Requests has been used in this CDR.
Record Opening Time O~C~ A time stamp reflecting the time the CDF opened this
record. Local Record Sequence Number OM Consecutive record number created by
this node. The number is allocated sequentially including all CDR types
Service Context Id OM This parameter indicates the CDR is applicable to
Monitoring Event service. Node Id OM Name of the recording entity. Local
Record Sequence Number OM Consecutive record number created by this node. The
number is allocated sequentially including all CDR types. Record Time Stamp OM
This parameter indicates the date and time when the CDR was produced. Event
Timestamp OM This parameter contains the timestamp of the event that triggered
the generation of charging information for the Monitoring Event configuration
request. Monitoring Event Configuration Activity M This parameter indicates
the configuration action requested: create, transfer, update, and delete. SCEF
Reference ID M This parameter, created by the SCEF, to identify a Monitoring
Request. When combined with the SCEF Id, serves a globally unique identifier
for the Monitoring Request. SCEF Id M This parameter indicates the SCEF to
which the Monitoring Indication message has to be sent. Monitoring Type M This
parameter identifies the specific Monitoring Event being requested. Maximum
Number of Reports Oc This parameter, when present, indicates the maximum
number of event reports to be generated until the associated Monitoring Event
is considered to expire. A value of one implies a single event report is to be
generated which makes it equivalent to a One-time Monitoring Request. This
parameter is not applicable to the \"Availability after DDN Failure\"
Monitoring Event type. Monitoring Duration Oc This parameter, when present,
indicates the absolute time at which the related Monitoring Event request is
considered to expire. Chargeable Party Identifier Oc This parameter, when
present, identifies the entity towards which accounting/charging functionality
is performed by the involved 3GPP network elements. Monitored User Oc This
parameter identifies the user that is monitored and is applicable to the
\"Loss of connectivity\", \"UE reachability\", \"Location Reporting\",
\"Communication Failure\" and \"Availability after DDN Failure\" Monitoring
Event types. Maximum Detection Time Oc This parameter, when present, indicates
the maximum period of time without any communication with the UE after which
the SCEF is to be informed that the UE is considered to be unreachable and is
applicable to the \"Loss of connectivity\" Monitoring Event type. The value is
on the order of 1 minute to multiple hours. Reachability Configuration Oc This
parameter contains the details for configuration for UE reachability and is
applicable to the \"UE reachability\" Monitoring Event type, which includes
\"Reachability Type\", \"Maximum Latency\" and \"Maximum Response Time\".
Location Type Oc This parameter indicates whether the request is for Current
Location or Last Known Location and is applicable to the \"Location
Reporting\" and \"Number of UEs present in a geographic area\" Monitoring
Event type. Accuracy Oc This parameter indicates desired level of accuracy of
the requested location information and is applicable to the \"Location
Reporting\" Monitoring Event type. Accuracy could be at cell level (CGI/ECGI),
eNB, TA/RA level. List of Locations Oc This parameter identifies the list of
cells, eNBs and/or RAI(s)/TAI(s) for determination of the number of UEs in the
area and is applicable to the \"Number of UEs present in a geographic area\"
Monitoring Event type. Monitoring Event Config Status M This parameter
identifies whether the request was successful or not. Record Extensions OC A
set of network operator/manufacturer specific extensions to the record.
Conditioned upon the existence of an extension.
* * *
#### 6.1.3.3 Monitoring Event Report charging data (ME-RE-CDR)
If enabled, a Monitoring Event Report record shall be produced for a set of
Monitoring Event reports sent. In the normal case, only one Monitoring Event
report will be included in the CDR. During times when a burst of Monitoring
Event reports are sent, multiple event reports can be captured in the CDR. The
fields in the record are specified in table 6.1.3.3.1.
Table 6.1.3.3.1: Monitoring Event Report charging data (ME-RE-CDR)
* * *
Field Category Description Record Type M Monitoring Event Report
Retransmission Oc This parameter, when present, indicates that information
from retransmitted Accounting Requests has been used in this CDR. Record
Opening Time O~C~ A time stamp reflecting the time the CDF opened this record.
Local Record Sequence Number OM Consecutive record number created by this
node. The number is allocated sequentially including all CDR types Service
Context Id OM This parameter indicates the CDR is applicable to Monitoring
Event service. Node Id OM Name of the recording entity. Local Record Sequence
Number OM Consecutive record number created by this node. The number is
allocated sequentially including all CDR types. Record Time Stamp OM This
parameter indicates the date and time when the CDR was produced. List of
Monitoring Event Report Data OM This parameter contains the charging
information associated with a set of Monitoring Event reports. The fields for
each report are specified in table 6.1.3.3.2. Record Extensions OC A set of
network operator/manufacturer specific extensions to the record. Conditioned
upon the existence of an extension.
* * *
Table 6.1.3.3.2: Individual Monitoring Event Report charging data within List
of Monitoring Event Report Data
* * *
Field Category Description Event Timestamp OM This parameter contains the
timestamp of the event that triggered the generation of charging information
for the Monitoring Event report. SCEF Reference ID M This parameter, created
by the SCEF, to identify a Monitoring Request. When combined with the SCEF Id,
serves a globally unique identifier for the Monitoring Request. SCEF Id M This
parameter indicates the SCEF to which the Monitoring Indication message has to
be sent. Monitoring Event Report Number M This parameter indicates the number
of the report being sent for the specific request from this MECN. The number
is monotonically increasing for each report starting at 1 for each unique
request. Chargeable Party Identifier Oc This parameter, when present,
identifies the entity towards which accounting/charging functionality is
performed by the involved 3GPP network elements. Monitored User Oc This
parameter identifies the user that is monitored and is applicable to the
\"Loss of connectivity\", \"UE reachability\", \"Location Reporting\",
\"Communication Failure\" and \"Availability after DDN Failure\" monitoring
event types. Monitoring Type Oc This parameter identifies the specific
Monitoring Event being reporting. Reachability Information Oc This parameter
identifies the reachability status of the UE and is applicable to the \"UE
reachability\" Monitoring Event type. Reported Location Oc This parameter
indicates the reported 3GPP system specific location information and is
applicable to the \"Location Reporting\" Monitoring Event type. Communication
Failure Information Oc This parameter indicates the reported the reason for
communication failure and is applicable to the \"Communication Failure\"
Monitoring Event type. List of Number Of UEs Per Location Reports Oc This
parameter contains a list of the location information along with the number of
UEs found at each location by the MME/SGSN. It's applicable to the \"the
number of UEs at a given geographic location\" Monitoring Event type.
* * *
## 6.2 Data description for monitoring event online charging
### 6.2.1 Ro message contents
Not specified in this document.
### 6.2.2 Monitoring event specific application information
Not specified in this document.
## 6.3 Monitoring event charging specific parameters
### 6.3.1 Definition of monitoring event charging information
#### 6.3.1.1 Monitoring event charging information assignment for service
information
The components in the Service Information that are used for Monitoring Event
charging can be found in table 6.3.1.1.1.
Table 6.3.1.1.1: Service Information used for monitoring event charging
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | Service Information | O~M~ | This is a structured field | | | | and holds the 3GPP | | | | specific parameter as | | | | defined in TS 32.299 | | | | [50]. | +----------------------------+----------+----------------------------+ | Subscriber Identifier | O~C~ | This field contains the | | | | identification of the | | | | monitored user (e.g. IMSI) | | | | if offline charging | | | | applies. It is not | | | | applicable for the | | | | \"Number of UEs present in | | | | a geographic area\" event. | +----------------------------+----------+----------------------------+ | > PS Information | Oc | This is a structured IE | | | | and hold PS specification | | | | parameters.\ | | | | The complete structure is | | | | defined in TS | | | | 32.251 [11]. | +----------------------------+----------+----------------------------+ | > Node Id | Oc | This IE holds the name of | | | | the Node. | +----------------------------+----------+----------------------------+ | > Monitoring Event | O~M~ | This is a structured field | | > Information | | and holds the Monitoring | | | | Event specific | | | | parameters.\ | | | | The details are defined in | | | | clause 6.3.1.2. | +----------------------------+----------+----------------------------+
#### 6.3.1.2 Definition of the monitoring event information
Monitoring Event specific charging information is provided within the
Monitoring Event Information. The fields of the Monitoring Event Information
are indicated with the node (MME, SGSN, IWK-SCEF) from which the information
is sent.
The detailed structure of the Monitoring Event Information can be found in
table 6.3.1.2.1.
Table 6.3.1.2.1: Structure of the monitoring event information
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | Monitoring Event | M | This IE holds the | | functionality | | Monitoring Event | | | | functionality is used, | | | | i.e. monitoring event | | | | configuration, monitoring | | | | event reporting. | +----------------------------+----------+----------------------------+ | Event Timestamp | Oc | This parameter contains | | | | the timestamp of the event | | | | that triggered the | | | | generation of charging | | | | information. | +----------------------------+----------+----------------------------+ | Monitoring Event | Oc | This parameter indicates | | Configuration Activity | | the configuration action | | | | requested: create, | | | | transfer, update, and | | | | delete. | +----------------------------+----------+----------------------------+ | SCEF Reference ID | Oc | This parameter, created by | | | | the SCEF, to identify a | | | | Monitoring Request. When | | | | combined with the SCEF Id, | | | | serves a globally unique | | | | identifier for the | | | | Monitoring Request. | +----------------------------+----------+----------------------------+ | SCEF Id | Oc | This parameter indicates | | | | the SCEF to which the | | | | Monitoring Indication | | | | message has to be sent. | +----------------------------+----------+----------------------------+ | Monitoring Type | Oc | This parameter identifies | | | | the specific Monitoring | | | | Event being requested. | +----------------------------+----------+----------------------------+ | Maximum Number of Reports | Oc | This parameter, when | | | | present, indicates the | | | | maximum number of event | | | | reports to be generated | | | | until the associated | | | | Monitoring Event is | | | | considered to expire. A | | | | value of one implies a | | | | single event report is to | | | | be generated which makes | | | | it equivalent to a | | | | One-time Monitoring | | | | Request. This parameter is | | | | not applicable to the | | | | \"Availability after DDN | | | | Failure\" Monitoring Event | | | | type. | +----------------------------+----------+----------------------------+ | Monitoring Duration | Oc | This parameter, when | | | | present, indicates the | | | | absolute time at which the | | | | related Monitoring Event | | | | request is considered to | | | | expire. | +----------------------------+----------+----------------------------+ | Chargeable Party | Oc | This parameter, when | | Identifier | | present, identifies the | | | | entity towards which | | | | accounting/charging | | | | functionality is performed | | | | by the involved 3GPP | | | | network elements. | +----------------------------+----------+----------------------------+ | Maximum Detection Time | Oc | This parameter, when | | | | present, indicates the | | | | maximum period of time | | | | without any communication | | | | with the UE after which | | | | the SCEF is to be informed | | | | that the UE is considered | | | | to be unreachable and is | | | | applicable to the \"Loss | | | | of connectivity\" | | | | Monitoring Event type. The | | | | value is on the order of 1 | | | | minute to multiple hours. | +----------------------------+----------+----------------------------+ | Reachability Configuration | Oc | This parameter contains | | | | the details for | | | | configuration for UE | | | | reachability and and is | | | | applicable to the \"UE | | | | reachability\" Monitoring | | | | Event type, which includes | | | | \"Reachability Type\", | | | | \"Maximum Latency\" and | | | | \"Maximum Response | | | | Time\".. | +----------------------------+----------+----------------------------+ | Location Type | Oc | This parameter indicates | | | | whether the request is for | | | | Current Location or Last | | | | Known Location and is | | | | applicable to the | | | | \"Location Reporting\" and | | | | \"Number of UEs present in | | | | a geographic area\" | | | | Monitoring Event type. | +----------------------------+----------+----------------------------+ | Accuracy | Oc | This parameter indicates | | | | desired level of accuracy | | | | of the requested location | | | | information and is | | | | applicable to the | | | | \"Location Reporting\" | | | | Monitoring Event type. | | | | Accuracy could be at cell | | | | level (CGI/ECGI), eNB, | | | | TA/RA level. | +----------------------------+----------+----------------------------+ | Location information | Oc | This parameter | | | | identifiesan individual | | | | location, e.g. cells, eNBs | | | | and/or RAI(s)/TAI(s) for | | | | determination of the | | | | number of UEs in the area | | | | and is applicable to the | | | | \"Number of UEs present in | | | | a geographic area\" | | | | Monitoring Event type. It | | | | will be repeated for each | | | | location for which the | | | | number of UEs is | | | | requested. | +----------------------------+----------+----------------------------+ | Monitoring Event Config | Oc | This parameter identifies | | Status | | whether the request was | | | | successful or not. When | | | | the request is not | | | | success, a specific value | | | | is chosen to indicate the | | | | error occurred during | | | | handling of the Requested | | | | action for the Monitoring | | | | event. | +----------------------------+----------+----------------------------+ | Monitoring Event Report | Oc | This parameter contains | | Data | | the charging information | | | | associated with a | | | | Monitoring Event report. | | | | It shall be repeated for | | | | each report to be captured | | | | in the CDR. | +----------------------------+----------+----------------------------+ | > Event Timestamp | OM | This parameter contains | | | | the timestamp of the event | | | | that triggered the | | | | generation of charging | | | | information for the | | | | Monitoring Event report. | +----------------------------+----------+----------------------------+ | > SCEF Reference ID | M | This parameter, created by | | | | the SCEF, to identify a | | | | Monitoring Request. When | | | | combined with the SCEF Id, | | | | serves a globally unique | | | | identifier for the | | | | Monitoring Request. | +----------------------------+----------+----------------------------+ | > SCEF Id | M | This parameter indicates | | | | the SCEF to which the | | | | Monitoring Indication | | | | message has to be sent. | +----------------------------+----------+----------------------------+ | > Monitoring Event Report | M | This parameter indicates | | > Number | | the number of the report | | | | being sent for the | | | | specific request from this | | | | MECN. The number is | | | | monotonically increasing | | | | for each report starting | | | | at 1 for each unique | | | | request. | +----------------------------+----------+----------------------------+ | > Chargeable Party | Oc | This parameter, when | | > Identifier | | present, identifies the | | | | entity towards which | | | | accounting/charging | | | | functionality is performed | | | | by the involved 3GPP | | | | network elements. | +----------------------------+----------+----------------------------+ | > Monitored User | Oc | This parameter identifies | | | | the user that is monitored | | | | and is applicable to the | | | | \"Loss of connectivity\", | | | | \"UE reachability\", | | | | \"Location Reporting\", | | | | \"Communication Failure\" | | | | and \"Availability after | | | | DDN Failure\" monitoring | | | | event types. | +----------------------------+----------+----------------------------+ | > Monitoring Type | Oc | This parameter identifies | | | | the specific Monitoring | | | | Event being reporting. | +----------------------------+----------+----------------------------+ | > Reachability Information | Oc | This parameter identifies | | | | the reachability status of | | | | the UE and is applicable | | | | to the \"UE reachability\" | | | | Monitoring Event type. | +----------------------------+----------+----------------------------+ | > Reported Location | Oc | This parameter indicates | | | | the reported 3GPP system | | | | specific location | | | | information and is | | | | applicable to the | | | | \"Location Reporting\" | | | | Monitoring Event type. | +----------------------------+----------+----------------------------+ | > Communication Failure | Oc | This parameter indicates | | > Information | | the reported the reason | | | | for communication failure | | | | and is applicable to the | | | | \"Communication Failure\" | | | | Monitoring Event type. | +----------------------------+----------+----------------------------+ | > Number Of UEs Per | Oc | This parameter contains | | > Location Report | | the location information | | | | along with the number of | | | | UEs found at that location | | | | by the MME/SGSN. It's | | | | applicable to the \"the | | | | number of UEs at a given | | | | geographic location\" | | | | Monitoring Event type. It | | | | shall be repeated for each | | | | location for which the | | | | number of UEs is reported. | +----------------------------+----------+----------------------------+
### 6.3.2 Formal monitoring event charging parameter description
#### 6.3.2.1 Monitoring event CDR parameters
The detailed definitions, abstract syntax and encoding of the Monitoring Event
CDR parameters are specified in TS 32.298 [51].
#### 6.3.2.2 Monitoring event AVPs
The detailed definitions of Monitoring Event AVPs are specified in TS 32.299
[50].
### 6.3.3 Detailed message format for offline charging
The following clause specifies per Operation Type the charging data that are
sent by MECN for different functionality, i.e. Monitoring Event configuration
and Monitoring Event reporting.
The Operation Types are listed in the following order: S (Start)/I (Interim)/S
(Stop)/E (Event). Therefore, when all Operation Types are possible it is
marked as SISE. If only some Operation Types are allowed for a node, only the
appropriate letters are used (i.e. SIS or E) as indicated in the table
heading. The omission of an Operation Type for a particular field is marked
with \"-\" (i.e. SI-E). Also, when an entire field is not allowed in a node
the entire cell is marked as \"-\".
Table 6.3.3.1 illustrates the basic structure of the supported fields in the
_Charging Data_ Request message for Monitoring Event offline charging.
Table 6.3.3.1: Supported fields in _Charging Data Request message_
+----------------+----------------+----------------+----------------+ | Information | Service Type | Monitoring | Monitoring | | Element | | Event | Event | | | | | | | | | Configuration | Reporting | +----------------+----------------+----------------+----------------+ | | Supported | S/I/S/E | S/I/S/E | | | Operation | | | | | Types | | | +----------------+----------------+----------------+----------------+ | Session | ---E | ---E | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | Originator | ---E | ---E | | | Host | | | | +----------------+----------------+----------------+----------------+ | Originator | ---E | ---E | | | Domain | | | | +----------------+----------------+----------------+----------------+ | Destination | ---E | ---E | | | Domain | | | | +----------------+----------------+----------------+----------------+ | Operation Type | ---E | ---E | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Number | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | User Name | ---E | ---E | | +----------------+----------------+----------------+----------------+ | Destination | ---E | ---E | | | Host | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Interval | | | | +----------------+----------------+----------------+----------------+ | Origination | ---E | ---E | | | State | | | | +----------------+----------------+----------------+----------------+ | Origination | ---E | ---E | | | Timestamp | | | | +----------------+----------------+----------------+----------------+ | Proxy | ---E | ---E | | | Information | | | | +----------------+----------------+----------------+----------------+ | Route | ---E | ---E | | | Information | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Token | | | | +----------------+----------------+----------------+----------------+ | Subscriber | ---E | ---E | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | Node Id | ---E | ---E | | +----------------+----------------+----------------+----------------+ | Monitoring | ---E | ---E | | | Event | | | | | Functionality | | | | +----------------+----------------+----------------+----------------+ | Event | ---E | ---E | | | Timestamp | | | | +----------------+----------------+----------------+----------------+ | Monitoring | ---E | | | | Event | | | | | Configuration | | | | | Activity | | | | +----------------+----------------+----------------+----------------+ | SCEF Reference | ---E | ---E | | | ID | | | | +----------------+----------------+----------------+----------------+ | SCEF Id | ---E | ---E | | +----------------+----------------+----------------+----------------+ | Monitoring | ---E | ---E | | | Type | | | | +----------------+----------------+----------------+----------------+ | Maximum Number | ---E | - | | | of Reports | | | | +----------------+----------------+----------------+----------------+ | Monitoring | ---E | - | | | Duration | | | | +----------------+----------------+----------------+----------------+ | Chargeable | ---E | - | | | Party | | | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | Maximum | ---E | - | | | Detection Time | | | | +----------------+----------------+----------------+----------------+ | Reachability | ---E | - | | | Configuration | | | | +----------------+----------------+----------------+----------------+ | Location Type | ---E | - | | +----------------+----------------+----------------+----------------+ | Accuracy | ---E | - | | +----------------+----------------+----------------+----------------+ | Location | ---E | - | | | information | | | | +----------------+----------------+----------------+----------------+ | Monitoring | ---E | - | | | Event Config | | | | | Status | | | | +----------------+----------------+----------------+----------------+ | Monitoring | - | ---E | | | Event Report | | | | | Data | | | | +----------------+----------------+----------------+----------------+ | Monitoring | - | ---E | | | Event Report | | | | | Number | | | | +----------------+----------------+----------------+----------------+ | Monitored User | - | ---E | | +----------------+----------------+----------------+----------------+ | Reachability | - | ---E | | | Information | | | | +----------------+----------------+----------------+----------------+ | Reported | - | ---E | | | Location | | | | +----------------+----------------+----------------+----------------+ | Communication | - | ---E | | | Failure | | | | | Information | | | | +----------------+----------------+----------------+----------------+ | Number Of UEs | - | ---E | | | Per Location | | | | | Report | | | | +----------------+----------------+----------------+----------------+
Table 6.3.3.2 illustrates the basic structure of the supported fields in the
_Charging Data_ Responsemessage for Monitoring Event offline charging.
Table 6.3.3.2: Supported fields in _Charging Data_ Response message
+----------------+----------------+----------------+----------------+ | Information | **Service | Monitoring | Monitoring | | Element | Type** | Event | Event | | | | | | | | | Configuration | Reporting | +----------------+----------------+----------------+----------------+ | | Supported | S/I/S/E | S/I/S/E | | | Operation | | | | | Types | | | +----------------+----------------+----------------+----------------+ | Session | ---E | ---E | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Result | | | | +----------------+----------------+----------------+----------------+ | Originator | ---E | ---E | | | Host | | | | +----------------+----------------+----------------+----------------+ | Originator | ---E | ---E | | | Domain | | | | +----------------+----------------+----------------+----------------+ | Operation Type | ---E | ---E | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Number | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Identifier | | | | +----------------+----------------+----------------+----------------+ | Operation | ---E | ---E | | | Interval | | | | +----------------+----------------+----------------+----------------+ | Error | ---E | ---E | | | Reporting Host | | | | +----------------+----------------+----------------+----------------+ | Origination | ---E | ---E | | | State | | | | +----------------+----------------+----------------+----------------+ | Origination | ---E | ---E | | | Timestamp | | | | +----------------+----------------+----------------+----------------+ | Proxy | ---E | ---E | | | Information | | | | +----------------+----------------+----------------+----------------+ | Route | ---E | ---E | | | Information | | | | +----------------+----------------+----------------+----------------+
### 6.3.4 Detailed message format for online charging
Not specified in this document.
## 6.4 Bindings for monitoring event offline charging
This clause aims to describe the mapping between the Diameter Accounting AVPs,
IEs and CDR parameters for Monitoring Event offline charging.
Table 6.4.1 describes the mapping of the Diameter Accounting AVPs, IEs, and
CDR parameters of ME-CO-CDR and ME-RE-CDR in Monitoring Event offline
charging.
Table 6.4.1: Bindings of CDR Parameters, Information Elements and AVPs
+----------------------+----------------------+----------------------+ | CDR Parameter | Information Element | AVP | +----------------------+----------------------+----------------------+ | Record Opening Time | **-** | **-** | +----------------------+----------------------+----------------------+ | Local Record | **-** | **-** | | Sequence Number | | | +----------------------+----------------------+----------------------+ | Service Context Id | Service Context Id | Service-Context-Id | +----------------------+----------------------+----------------------+ | | **Service |** S | | | Information**| ervice-Information** | +----------------------+----------------------+----------------------+ | Monitored User | Subscriber | Subscription-Id | | | Identifier | | +----------------------+----------------------+----------------------+ | | **Monitoring Event |** Monitoring | | | Information**| -Event-Information** | +----------------------+----------------------+----------------------+ | Record Type | Monitoring Event | Monitoring | | | Functionality | -Event-Functionality | +----------------------+----------------------+----------------------+ | Event Timestamp | Event Timestamp | Event-Timestamp | +----------------------+----------------------+----------------------+ | Monitoring Event | Monitoring Event | Monitoring- | | Configuration | Configuration | Event-Configuration- | | Activity | Activity | Activity | +----------------------+----------------------+----------------------+ | SCEF Reference ID | SCEF Reference ID | SCEF-Reference-ID | +----------------------+----------------------+----------------------+ | SCEF Id | SCEF Id | SCEF-ID | +----------------------+----------------------+----------------------+ | Monitoring Type | Monitoring Type | Monitoring-Type | +----------------------+----------------------+----------------------+ | Maximum Number of | Maximum Number of | Maxim | | Reports | Reports | um-Number-of-Reports | +----------------------+----------------------+----------------------+ | Monitoring Duration | Monitoring Duration | Monitoring-Duration | +----------------------+----------------------+----------------------+ | Chargeable Party | Chargeable Party | Charged-Party | | Identifier | Identifier | | +----------------------+----------------------+----------------------+ | Maximum Detection | Maximum Detection | Ma | | Time | Time | ximum-Detection-Time | +----------------------+----------------------+----------------------+ | Reachability | Reachability | UE-Reacha | | Configuration | Configuration | bility-Configuration | +----------------------+----------------------+----------------------+ | Location Type | Location Type | MONTE-Location-Type | +----------------------+----------------------+----------------------+ | Accuracy | Accuracy | Accuracy | +----------------------+----------------------+----------------------+ | List of Locations | Location information | Number-Of-UE-Per-Lo | | | | cation-Configuration | +----------------------+----------------------+----------------------+ | Monitoring Event | Monitoring Event | Monitoring | | Config Status | Config Status | -Event-Config-Status | +----------------------+----------------------+----------------------+ | List of Monitoring | Monitoring Event | Monitori | | Event Report Data | Report Data | ng-Event-Report-Data | +----------------------+----------------------+----------------------+ | > Event Timestamp | > Event Timestamp | > Event-Timestamp | +----------------------+----------------------+----------------------+ | > SCEF Reference ID | > SCEF Reference ID | > SCEF-Reference-ID | +----------------------+----------------------+----------------------+ | > SCEF Id | > SCEF Id | > SCEF-ID | +----------------------+----------------------+----------------------+ | > Monitoring Event | > Monitoring Event | > Monitoring | | > Report Number | > Report Number | -Event-Report-Number | +----------------------+----------------------+----------------------+ | > Chargeable Party | > Chargeable Party | > Charged-Party | | > Identifier | > Identifier | | +----------------------+----------------------+----------------------+ | > Monitored User | > Monitored User | > Subscription-Id | +----------------------+----------------------+----------------------+ | > Monitoring Type | > Monitoring Type | > Monitoring-Type | +----------------------+----------------------+----------------------+ | > Reachability | > Reachability | > Reac | | > Information | > Information | hability-Information | +----------------------+----------------------+----------------------+ | > Reported Location | > Reported Location | > EPS- | | | | Location-information | +----------------------+----------------------+----------------------+ | > Communication | > Communication | > Communication | | > Failure | > Failure | -Failure-Information | | > Information | > Information | | +----------------------+----------------------+----------------------+ | > List of Number Of | > Number Of UEs Per | > Number-Of-UE | | > UEs Per Location | > Location Report | -Per-Location-Report | | > Report | | | +----------------------+----------------------+----------------------+ | | **PS Information** | **PS-Information** | +----------------------+----------------------+----------------------+ | Node Id | Node Id | Node-ID | +----------------------+----------------------+----------------------+
#