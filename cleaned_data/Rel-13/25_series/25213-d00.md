# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes spreading and modulation for UTRA Physical
Layer FDD mode.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TS 25.201: \"Physical layer - general description\".
[2] 3GPP TS 25.211: \"Physical channels and mapping of transport channels onto
physical channels (FDD).\"
[3] 3GPP TS 25.101: \"UE Radio transmission and Reception (FDD)\".
[4] 3GPP TS 25.104: \"UTRA (BS) FDD; Radio transmission and Reception\".
[5] 3GPP TS 25.308: \"UTRA High Speed Downlink Packet Access (HSDPA); Overall
description\".
[6] 3GPP TS 25.214: \"Physical layer procedures (FDD)\".
[7] 3GPP TS 25.212: \"Multiplexing and channel coding (FDD)\".
# 3 Symbols, abbreviations and definitions
## 3.1 Symbols
For the purposes of the present document, the following symbols apply:
C~ch,SF,n~: n:th channelisation code with spreading factor SF
C~pre,n,s~: PRACH preamble code for _n_ :th preamble scrambling code and
signature _s_
C~sig,s~: PRACH signature code for signature _s_
S~dpch,n~: _n_ :th DPCCH/DPDCH uplink scrambling code
S~r-pre,n~: _n_ :th PRACH preamble scrambling code
S~r-msg,n~: _n_ :th PRACH message scrambling code
S~dl,n~: DL scrambling code
C~psc~: PSC code
C~ssc,n~: n:th SSC code
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
16QAM 16 Quadrature Amplitude Modulation
4PAM 4 Pulse Amplitude Modulation
64QAM 64 Quadrature Amplitude Modulation
8PAM 8 Pulse Amplitude Modulation
AICH Acquisition Indicator Channel
BCH Broadcast Channel
CCPCH Common Control Physical Channel
CLTD Closed Loop Transmit Diversity
CPICH Common Pilot Channel
DCH Dedicated Channel
DPCH Dedicated Physical Channel
DPCCH Dedicated Physical Control Channel
DPCCH2 Dedicated Physical Control Channel 2
DPDCH Dedicated Physical Data Channel
E-AGCH E-DCH Absolute Grant Channel
E-DPCCH E-DCH Dedicated Physical Control Channel
E-DPDCH E-DCH Dedicated Physical Data Channel
E-HICH E-DCH Hybrid ARQ Indicator Channel
E-RGCH E-DCH Relative Grant Channel
E-ROCH E-DCH Rank and Offset Channel
FDD Frequency Division Duplex
F-DPCH Fractional Dedicated Physical Channel
F-TPICH Fractional Transmitted Precoding Indicator Channel
HS-DPCCH Dedicated Physical Control Channel (uplink) for HS-DSCH
HS-DPCCH~2~ Secondary Dedicated Physical Control Channel (uplink) for HS-DSCH,
when Secondary_Cell_Enabled is greater than 3
HS-DSCH High Speed Downlink Shared Channel
HS-PDSCH High Speed Physical Downlink Shared Channel
HS-SCCH Shared Control Physical Channel for HS-DSCH
MBSFN MBMS over a Single Frequency Network
Mcps Mega Chip Per Second
MICH MBMS Indication Channel
OVSF Orthogonal Variable Spreading Factor (codes)
TPI Transmitted Precoding Indicator
PICH Page Indication Channel
PRACH Physical Random Access Channel
PSC Primary Synchronisation Code
RACH Random Access Channel
SCH Synchronisation Channel
S-DPCCH Secondary Dedicated Physical Control Channel
S-E-DPCCH Secondary Dedicated Physical Control Channel for E-DCH
S-E-DPDCH Secondary Dedicated Physical Data Channel for E-DCH
SSC Secondary Synchronisation Code
SF Spreading Factor
UE User Equipment
## 3.3 Definitions
**Activated uplink frequency:** For a specific UE, an uplink frequency is said
to be activated if the UE is allowed to transmit on that frequency. The
primary uplink frequency is always activated when configured while a secondary
uplink frequency has to be activated by means of an HS-SCCH order in order to
become activated. Similarly, for a specific UE, an uplink frequency is said to
be deactivated if it is configured but disallowed by the NodeB to transmit on
that frequency.
**Configured uplink frequency** : For a specific UE, an uplink frequency is
said to be configured if the UE has received all relevant information from
higher layers in order to perform transmission on that frequency.
**Primary uplink frequency:** If a single uplink frequency is configured for
the UE, then it is the _primary uplink frequency_. In case more than one
uplink frequency is configured for the UE, then the primary uplink frequency
is the frequency on which the E-DCH corresponding to the serving E-DCH cell
associated with the serving HS-DSCH cell is transmitted. The association
between a pair of uplink and downlink frequencies is indicated by higher
layers.
**Secondary uplink frequency:** A _secondary uplink frequency_ is a frequency
on which an E-DCH corresponding to a serving E-DCH cell associated with a
secondary serving HS-DSCH cell is transmitted. The association between a pair
of uplink and downlink frequencies is indicated by higher layers.
# 4 Uplink spreading and modulation
## 4.1 Overview
Spreading is applied to the physical channels. It consists of two operations.
The first is the channelisation operation, which transforms every data symbol
into a number of chips, thus increasing the bandwidth of the signal. The
number of chips per data symbol is called the Spreading Factor (SF). The
second operation is the scrambling operation, where a scrambling code is
applied to the spread signal.
With the channelisation, data symbols on so-called I- and Q-branches are
independently multiplied with an OVSF code. With the scrambling operation, the
resultant signals on the I- and Q-branches are further multiplied by complex-
valued scrambling code, where I and Q denote real and imaginary parts,
respectively.
## 4.2 Spreading
### 4.2.1 Dedicated physical channels
The possible combinations of the maximum number of respective dedicated
physical channels which may be configured simultaneously for a UE in addition
to the DPCCH are specified in table 0. The actual UE capability may be lower
than the values specified in table 0; the actual dedicated physical channel
configuration is indicated by higher layer signalling. The actual number of
configured DPDCHs, denoted N~max‑dpdch~, is equal to the largest number of
DPDCHs from all the TFCs in the TFCS. N~max‑dpdch~ is not changed by frame-by-
frame TFCI change or temporary TFC restrictions.
Table 0: Maximum number of simultaneously-configured uplink dedicated channels
* * *
           **DPDCH**                           **HS-DPCCH**                                                             **E-DPDCH**                                                              **E-DPCCH**              **S-E-DPDCH**   **S-E-DPCCH**
Case 1 6 1 - - - - Case 2 1 1 2 1 - - Case 3 - 1 on the primary uplink
frequency, 0 on any secondary uplink frequency 4 per uplink frequency 1 per
uplink frequency - - Case 4 1 2 2 1 - - Case 5 - 2 on the primary uplink
frequency, 0 on any secondary uplink frequency 4 per uplink frequency 1 per
uplink frequency - - Case 6 - 2 4 1 4 1 Case X 1 on the primary uplink
frequency 2 on the primary uplink frequency, 0 on any secondary uplink
frequency 2 on the primary uplink frequency, 4 on the secondary uplink
frequency 1 per uplink frequency - -
* * *
Figure 1 illustrates the principle of the spreading of uplink dedicated
physical channels (DPCCH, DPDCHs, HS-DPCCH, DPCCH2, E-DPCCH, E-DPDCHs, S-E-
DPCCH). Figure 1.1 illustrates the principle of the spreading of uplink
S-DPCCH and S-E-DPDCHs.
In case of BPSK modulation , the binary input sequences of all physical
channels are converted to real valued sequences, i.e. the binary value \"0\"
is mapped to the real value +1, the binary value \"1\" is mapped to the real
value --1, and the value \"DTX\" (HS-DPCCH only) is mapped to the real value
0.
In case of 4PAM modulation, the binary input sequences of all E-DPDCH and S-E-
DPDCH physical channels are converted to real valued sequences, i.e. a set of
two consecutive binary symbols _n~k~_ , _n~k+1~_ (with _k_ mod 2 = 0) in each
binary sequence is converted to a real valued sequence following the mapping
described in Table 0A.
In case of 8PAM modulation, the binary input sequences of all E-DPDCH and S-E-
DPDCH physical channels are converted to real valued sequences, i.e. a set of
three consecutive binary symbols _n~k~_ , _n~k+1~_ , _n~k+2~_ (with _k_ mod 3
= 0) in each binary sequence is converted to a real valued sequence following
the mapping described in Table 0B.
Table 0A: Mapping of E-DPDCH and S-E-DPDCH\ with 4PAM modulation
* * *
**_n~k~_ , *n~k+1~**___Mapped real value_ * 00 0.4472 01 1.3416 10 -0.4472 11
-1.3416
* * *
Table 0B: Mapping of E-DPDCH and S-E-DPDCH\ with 8PAM modulation
* * *
**_n~k~_ , _n~k+1~_ , *n~k+2~**___Mapped real value_ * 000 0.6547 001 0.2182
010 1.0911 011 1.5275 100 -0.6547 101 -0.2182 110 -1.0911 111 -1.5275
* * *
Figure 1: Spreading for uplink dedicated channels
Figure 1.1: Spreading for uplink S-DPCCH and S-E-DPDCHs
The spreading operation is specified in subclauses 4.2.1.1 to 4.2.1.4 for each
of the dedicated physical channels; it includes a spreading stage, a weighting
stage, and an IQ mapping stage. In the process, the streams of real-valued
chips on the I and Q branches are summed; this results in a complex-valued
stream of chips for each set of channels.
As described in figure 1, the resulting complex-valued streams S~dpch~,
S~dpcch2~, S~hs-dpcch~, S~e-dpch~ and S~s-e-dpcch~ are summed into a single
complex-valued stream which is then scrambled by the complex-valued scrambling
code S~dpch,n~ resulting in the complex-valued signal S. As described in
Figure 1.1, the resulting complex-valued streams S~s-dpcch~ and S~s-e-dpdch~
are summed into a single complex-valued stream which is scrambled by the same
complex-valued scrambling code S~dpch,n~ resulting in the complex-valued
signal S'. The scrambling code shall be applied aligned with the radio frames,
i.e. the first scrambling chip corresponds to the beginning of a radio frame.
NOTE: Although subclause 4.2.1 has been reorganized in this release, the
spreading operation for the DPCCH, DPDCH remains unchanged as compared to the
previous release.
#### 4.2.1.1 DPCCH/DPDCH
Figure 1a illustrates the spreading operation for the uplink DPCCH and DPDCHs.
Figure 1A: Spreading for uplink DPCCH/DPDCHs
The DPCCH is spread to the chip rate by the channelisation code c~c~. The _n_
:th DPDCH called DPDCH~n~ is spread to the chip rate by the channelisation
code c~d,n~.
After channelisation, the real-valued spread signals are weighted by gain
factors, β~c~ for DPCCH, β~d~ for all DPDCHs.
The β~c~ and β~d~ values are signalled by higher layers or derived as
described in [6] 5.1.2.5 and 5.1.2.5C. At every instant in time, at least one
of the values β~c~ and β~d~ has the amplitude 1.0. The β~c~ and β~d~ values
are quantized into 4 bit words. The quantization steps are given in table 1.
Table 1: The quantization of the gain parameters
+----------------------+----------------------------+ | Signalled values for | Quantized amplitude ratios | | | | | β~c~ and β~d~ | β~c~ and β~d~ | +----------------------+----------------------------+ | 15 | 1.0 | +----------------------+----------------------------+ | 14 | 14/15 | +----------------------+----------------------------+ | 13 | 13/15 | +----------------------+----------------------------+ | 12 | 12/15 | +----------------------+----------------------------+ | 11 | 11/15 | +----------------------+----------------------------+ | 10 | 10/15 | +----------------------+----------------------------+ | 9 | 9/15 | +----------------------+----------------------------+ | 8 | 8/15 | +----------------------+----------------------------+ | 7 | 7/15 | +----------------------+----------------------------+ | 6 | 6/15 | +----------------------+----------------------------+ | 5 | 5/15 | +----------------------+----------------------------+ | 4 | 4/15 | +----------------------+----------------------------+ | 3 | 3/15 | +----------------------+----------------------------+ | 2 | 2/15 | +----------------------+----------------------------+ | 1 | 1/15 | +----------------------+----------------------------+ | 0 | Switch off | +----------------------+----------------------------+
#### 4.2.1.2 HS-DPCCH
Figure 1B illustrates the spreading operation for the HS-DPCCH when
Secondary_Cell_Enabled is less than 4 in case the UE is not configured in MIMO
mode with four transmit antennas in any cell, or less than 2 in case the UE is
configured in MIMO mode with four transmit antennas in at least one cell.
Figure 1B.1 illustrates the spreading operation for the HS-DPCCHs when
Secondary_Cell_Enabled is greater than 3 in case the UE is not configured in
MIMO mode with four transmit antennas in any cell, or greater than 1 in case
the UE is configured in MIMO mode with four transmit antennas in at least one
cell..
Figure 1B: Spreading for uplink HS-DPCCH when Secondary_Cell_Enabled is less
than 4 in case the UE is not configured in MIMO mode with four transmit
antennas in any cell, or less than 2 in case the UE is configured in MIMO mode
with four transmit antennas in at least one cell
Figure 1B.1: Spreading for uplink HS-DPCCHs when Secondary_Cell_Enabled is
greater than 3 in case the UE is not configured in MIMO mode with four
transmit antennas in any cell, or greater than 1 in case the UE is configured
in MIMO mode with four transmit antennas in at least one cell
Each HS-DPCCH shall be spread to the chip rate by the channelisation code
c~hs~.
After channelisation, the real-valued spread signals are weighted by gain
factor β~hs~
The β~hs~ values are derived from the quantized amplitude ratios A~hs~ which
are translated from ∆~ACK~ , ∆~ΝACK~ and ∆~CQI~ signalled by higher layers as
described in [6] 5.1.2.5A.
The translation of ∆ ~ACK~, ∆~ΝACK~ and ∆~CQI~ into quantized amplitude ratios
A~hs~ = β~hs~/β~c~ in the case that DPCCH2 is not configured, and A~hs~ =
β~hs~/β~c2~ in the case that DPCCH2 is configured is shown in Table 1A.
Table 1A: The quantization of the power offset
+----------------------------------+----------------------------------+ | Signalled values for ∆ ~ACK~, | Quantized amplitude ratios | | ∆~ΝACK~ and ∆~CQI~ | | | | A~hs~ = β~hs~/β~c~ or | | | β~hs~/β~c2~ | +----------------------------------+----------------------------------+ | 12 | 76/15 | +----------------------------------+----------------------------------+ | 11 | 60/15 | +----------------------------------+----------------------------------+ | 10 | 48/15 | +----------------------------------+----------------------------------+ | 9 | 38/15 | +----------------------------------+----------------------------------+ | 8 | 30/15 | +----------------------------------+----------------------------------+ | 7 | 24/15 | +----------------------------------+----------------------------------+ | 6 | 19/15 | +----------------------------------+----------------------------------+ | 5 | 15/15 | +----------------------------------+----------------------------------+ | 4 | 12/15 | +----------------------------------+----------------------------------+ | 3 | 9/15 | +----------------------------------+----------------------------------+ | 2 | 8/15 | +----------------------------------+----------------------------------+ | 1 | 6/15 | +----------------------------------+----------------------------------+ | 0 | 5/15 | +----------------------------------+----------------------------------+
If Secondary_Cell_Enabled is less than 4 in case the UE is not configured in
MIMO mode with four transmit antennas in any cell, or less than 2 in case the
UE is configured in MIMO mode with four transmit antennas in at least one
cell, HS-DPCCH shall be mapped to the I branch in case N~max-dpdch~ is 2, 4 or
6, and to the Q branch otherwise (N~max-dpdch~ = 0, 1, 3 or 5). If
Secondary_Cell_Enabled is greater than 3 in case the UE is not configured in
MIMO mode with four transmit antennas in any cell, or greater than 1 in case
the UE is configured in MIMO mode with four transmit antennas in at least one
cell, HS-DPCCH shall be mapped to the Q branch and HS-DPCCH~2~ shall be mapped
to the I branch.
#### 4.2.1.3 E-DPDCH/E-DPCCH
Figure 1C illustrates the spreading operation for the E-DPDCHs and the
E-DPCCH.
Figure 1C: Spreading for E-DPDCH/E-DPCCH
The E-DPCCH shall be spread to the chip rate by the channelisation code c~ec~.
The _k_ :th E-DPDCH, denominated E‑DPDCH~k~, shall be spread to the chip rate
using channelisation code c~ed,k~.
After channelisation, the real-valued spread E-DPCCH and E-DPDCH~k~ signals
shall respectively be weighted by gain factor β~ec~ and β~ed,k~.
_E-TFCI~ec,boost\ ~_ may be signalled by higher layers. If _E-TFCI~ec,boost\
~_ is not signalled by higher layers a default value 127 shall be used. When
UL_MIMO_Enabled is TRUE the UE shall assume _E-TFCI~ec,boost~_ = -1 for rank-2
transmissions.
When E-TFCI ≤ _E-TFCI~ec,boost~_ the value of β~ec~ shall be derived as
specified in [6] based on the quantized amplitude ratio A~ec~ which is
translated from ∆~E-DPCCH~ signalled by higher layers. The translation of
∆~E-DPCCH~ into quantized amplitude ratios A~ec~ = β~ec~/β~c~ is specified in
Table 1B.
Table 1B: Quantization for ∆~E-DPCCH~ for E-TFCI ≤ _E-TFCI~ec,boost~_
+----------------------+----------------------------+ | Signalled values for | Quantized amplitude ratios | | | | | ∆ ~E-DPCCH~ | A~ec~ = β~ec~/β~c~ | +----------------------+----------------------------+ | 15 | 151/15 | +----------------------+----------------------------+ | 14 | 120/15 | +----------------------+----------------------------+ | 13 | 95/15 | +----------------------+----------------------------+ | 12 | 76/15 | +----------------------+----------------------------+ | 11 | 60/15 | +----------------------+----------------------------+ | 10 | 48/15 | +----------------------+----------------------------+ | 9 | 38/15 | +----------------------+----------------------------+ | 8 | 30/15 | +----------------------+----------------------------+ | 7 | 24/15 | +----------------------+----------------------------+ | 6 | 19/15 | +----------------------+----------------------------+ | 5 | 15/15 | +----------------------+----------------------------+ | 4 | 12/15 | +----------------------+----------------------------+ | 3 | 9/15 | +----------------------+----------------------------+ | 2 | 8/15 | +----------------------+----------------------------+ | 1 | 6/15 | +----------------------+----------------------------+ | 0 | 5/15 | +----------------------+----------------------------+
When E-TFCI > _E-TFCI~ec,boost~_ , in order to provide an enhanced phase
reference, the value of β~ec~ shall be derived as specified in [6] based on a
traffic to total pilot power offset ∆~T2TP~, configured by higher layers as
specified in Table 1B.0 and the quantization of the ratio β~ec~/β~c~ as
specified in Table 1B.0A.
Table 1B.0: ∆~T2TP~
* * *
Signalled values for\ Power offset values\ ∆ ~T2TP~ ∆ ~T2TP~ [dB]
6 16
5 15
4 14
3 13
2 12
1 11
0 10
* * *
Table 1B.0A: Quantization for _β~ec~_ /_β~c\ ~_ for E-TFCI > _E-
TFCI~ec,boost~_
+----------------------------+----------------------------------------+ | Quantized amplitude ratios | E-DPDCH modulation schemes which may | | | be used in the same subframe | | _β~ec~_ /_β~c~_ | | +----------------------------+----------------------------------------+ | 239/15 | 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 190/15 | 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 151/15 | 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 120/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 95/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 76/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 60/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 48/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 38/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 30/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 24/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 19/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 15/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 12/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 9/15 | BPSK | +----------------------------+----------------------------------------+ | 8/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 6/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 5/15 | BPSK | +----------------------------+----------------------------------------+
The value of β~ed,k~ shall be computed as specified in [6] subclause
5.1.2.5B.2, based on the reference gain factors, the spreading factor for
E-DPDCH~k~, the HARQ offsets, and the quantization of the ratio β~ed,k~/β~c~
into amplitude ratios specified in Table 1B.2 for the case when E-TFCI ≤ _E-
TFCI~ec,boost~_ and Table 1.B.2B, for the case when E-TFCI > _E-
TFCI~ec,boost~_.
The reference gain factors are derived from the quantised amplitude ratios
A~ed~ which is translated from ∆~E-DPDCH~ signalled by higher layers. The
translation of ∆~E-DPDCH~ into quantized amplitude ratios A~ed~ = β~ed~/β~c~
is specified in Table 1B.1 for the case when E-TFCI ≤ _E-TFCI~ec,boost~_ and
Table 1.B.2A for the case when E-TFCI > _E-TFCI~ec,boost~._
When the UE is configured in MIMO mode and transmitting two transport blocks,
one with a set of E-DPDCHs and another with a set of S-E-DPDCHs, the amplitude
ratios A~ed~ for the primary stream are modified to take the inter-stream
interference into account. Note that the amplitude ratios for the secondary
stream are not modified. The amplitude ratios A~ed~ for the primary stream are
then given by
A~ed~ = A~ed,\ ISI­~ x A~ISI~
A~ed,ISI,~ is translated from ∆~E-DPDCH~ signalled by higher layers. The
translation of ∆~E-DPDCH~ into quantized amplitude ratios A~ed,ISI~ is
specified in Table 1B.2A. A~ISI~ is an inter-stream interference compensation
factor that is translated from ∆~ISI~ signalled by higher layers according to
Table 1B.0B. Note that this procedure does not affect the power used for the
transmission of the primary stream E-TFC, but rather lowers the size of the
primary stream transport block in order to compensate for the inter-stream
interference.
Table 1B.0B: Quantization of Δ~ISI~
+--------------------------+--------------------------------+ | **Signalled values for** | **Quantized amplitude ratios** | | | | | **∆~ISI~ ** |** Α~ISI~** | +--------------------------+--------------------------------+ | 15 | 30/15 | +--------------------------+--------------------------------+ | 14 | 29/15 | +--------------------------+--------------------------------+ | 13 | 28/15 | +--------------------------+--------------------------------+ | 12 | 27/15 | +--------------------------+--------------------------------+ | 11 | 26/15 | +--------------------------+--------------------------------+ | 10 | 25/15 | +--------------------------+--------------------------------+ | 9 | 24/15 | +--------------------------+--------------------------------+ | 8 | 23/15 | +--------------------------+--------------------------------+ | 7 | 22/15 | +--------------------------+--------------------------------+ | 6 | 21/15 | +--------------------------+--------------------------------+ | 5 | 20/15 | +--------------------------+--------------------------------+ | 4 | 19/15 | +--------------------------+--------------------------------+ | 3 | 18/15 | +--------------------------+--------------------------------+ | 2 | 17/15 | +--------------------------+--------------------------------+ | 1 | 16/15 | +--------------------------+--------------------------------+ | 0 | 15/15 | +--------------------------+--------------------------------+
Table 1B.1: Quantization for ∆~E-DPDCH~ for E-TFCI ≤ _E-TFCI~ec,boost~_
+----------------------+----------------------+----------------------+ | Signalled values for | Quantized amplitude | E-DPDCH modulation | | ∆ ~E-DPDCH~ | ratios | schemes which may be | | | | used in the same | | | A~ed~ = β~ed~/β~c~ | subframe | +----------------------+----------------------+----------------------+ | 29 | 168/15 | BPSK | +----------------------+----------------------+----------------------+ | 28 | 150/15 | BPSK | +----------------------+----------------------+----------------------+ | 27 | 134/15 | BPSK | +----------------------+----------------------+----------------------+ | 26 | 119/15 | BPSK | +----------------------+----------------------+----------------------+ | 25 | 106/15 | BPSK | +----------------------+----------------------+----------------------+ | 24 | 95/15 | BPSK | +----------------------+----------------------+----------------------+ | 23 | 84/15 | BPSK | +----------------------+----------------------+----------------------+ | 22 | 75/15 | BPSK | +----------------------+----------------------+----------------------+ | 21 | 67/15 | BPSK | +----------------------+----------------------+----------------------+ | 20 | 60/15 | BPSK | +----------------------+----------------------+----------------------+ | 19 | 53/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 18 | 47/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 17 | 42/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 16 | 38/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 15 | 34/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 14 | 30/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 13 | 27/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 12 | 24/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 11 | 21/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 10 | 19/15 | BPSK, 4PAM | +----------------------+----------------------+----------------------+ | 9 | 17/15 | BPSK | +----------------------+----------------------+----------------------+ | 8 | 15/15 | BPSK | +----------------------+----------------------+----------------------+ | 7 | 13/15 | BPSK | +----------------------+----------------------+----------------------+ | 6 | 12/15 | BPSK | +----------------------+----------------------+----------------------+ | 5 | 11/15 | BPSK | +----------------------+----------------------+----------------------+ | 4 | 9/15 | BPSK | +----------------------+----------------------+----------------------+ | 3 | 8/15 | BPSK | +----------------------+----------------------+----------------------+ | 2 | 7/15 | BPSK | +----------------------+----------------------+----------------------+ | 1 | 6/15 | BPSK | +----------------------+----------------------+----------------------+ | 0 | 5/15 | BPSK | +----------------------+----------------------+----------------------+
Table 1B.2: Quantization for _β~ed,k~_ /_β~c~ for_ E-TFCI ≤ _E-TFCI~ec,boost~_
+----------------------------+----------------------------------------+ | Quantized amplitude ratios | E-DPDCH modulation schemes which may | | | be used in the same subframe | | _β~ed,k~_ /_β~c~_ | | +----------------------------+----------------------------------------+ | 168/15 | BPSK | +----------------------------+----------------------------------------+ | 150/15 | BPSK | +----------------------------+----------------------------------------+ | 134/15 | BPSK | +----------------------------+----------------------------------------+ | 119/15 | BPSK | +----------------------------+----------------------------------------+ | 106/15 | BPSK | +----------------------------+----------------------------------------+ | 95/15 | BPSK | +----------------------------+----------------------------------------+ | 84/15 | BPSK | +----------------------------+----------------------------------------+ | 75/15 | BPSK | +----------------------------+----------------------------------------+ | 67/15 | BPSK | +----------------------------+----------------------------------------+ | 60/15 | BPSK | +----------------------------+----------------------------------------+ | 53/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 47/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 42/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 38/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 34/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 30/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 27/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 24/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 21/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 19/15 | BPSK, 4PAM | +----------------------------+----------------------------------------+ | 17/15 | BPSK | +----------------------------+----------------------------------------+ | 15/15 | BPSK | +----------------------------+----------------------------------------+ | 13/15 | BPSK | +----------------------------+----------------------------------------+ | 12/15 | BPSK | +----------------------------+----------------------------------------+ | 11/15 | BPSK | +----------------------------+----------------------------------------+ | 9/15 | BPSK | +----------------------------+----------------------------------------+ | 8/15 | BPSK | +----------------------------+----------------------------------------+ | 7/15 | BPSK | +----------------------------+----------------------------------------+ | 6/15 | BPSK | +----------------------------+----------------------------------------+ | 5/15 | BPSK | +----------------------------+----------------------------------------+
Table 1B.2A: Quantization for ∆~E-DPDCH~ for E-TFCI > _E-TFCI~ec,boost~_
+----------------------+----------------------+----------------------+ | Signalled values for | Quantized amplitude | E-DPDCH modulation | | ∆ ~E-DPDCH~ | ratios | schemes which may be | | | | used in the same | | | A~ed~ = β~ed~/β~c~ | subframe | +----------------------+----------------------+----------------------+ | 31 | 377/15 | 4PAM, 8PAM | | | | (applicable only for | | | | SF2 code in a | | | | 2xSF2+2xSF4 | | | | configuration) | +----------------------+----------------------+----------------------+ | 30 | 336/15 | 4PAM, 8PAM | | | | (applicable only for | | | | SF2 code in a | | | | 2xSF2+2xSF4 | | | | configuration) | +----------------------+----------------------+----------------------+ | 29 | 299/15 | 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 28 | 267/15 | BPSK (applicable | | | | only for SF2 code in | | | | a 2xSF2+2xSF4 | | | | configuration), | | | | 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 27 | 237/15 | BPSK (applicable | | | | only for SF2 code in | | | | a 2xSF2+2xSF4 | | | | configuration), | | | | 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 26 | 212/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 25 | 189/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 24 | 168/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 23 | 150/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 22 | 134/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 21 | 119/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 20 | 106/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 19 | 95/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 18 | 84/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 17 | 75/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 16 | 67/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 15 | 60/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 14 | 53/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 13 | 47/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 12 | 42/15 | BPSK, 4PAM, 8PAM | +----------------------+----------------------+----------------------+ | 11 | 38/15 | BPSK | +----------------------+----------------------+----------------------+ | 10 | 34/15 | BPSK | +----------------------+----------------------+----------------------+ | 9 | 30/15 | BPSK | +----------------------+----------------------+----------------------+ | 8 | 27/15 | BPSK | +----------------------+----------------------+----------------------+ | 7 | 24/15 | BPSK | +----------------------+----------------------+----------------------+ | 6 | 21/15 | BPSK | +----------------------+----------------------+----------------------+ | 5 | 19/15 | BPSK | +----------------------+----------------------+----------------------+ | 4 | 17/15 | BPSK | +----------------------+----------------------+----------------------+ | 3 | 15/15 | BPSK | +----------------------+----------------------+----------------------+ | 2 | 13/15 | BPSK | +----------------------+----------------------+----------------------+ | 1 | 11/15 | BPSK | +----------------------+----------------------+----------------------+ | 0 | 8/15 | BPSK | +----------------------+----------------------+----------------------+
Table 1B.2B: Quantization for _β~ed,k~_ /_β~c~_ for E-TFCI > _E-
TFCI~ec,boost~_
+----------------------------+----------------------------------------+ | Quantized amplitude ratios | E-DPDCH modulation schemes which may | | | be used in the same subframe | | _β~ed,k~_ /_β~c~_ | | +----------------------------+----------------------------------------+ | 377/15 | 4PAM, 8PAM (applicable only for SF2 | | | code in a 2xSF2+2xSF4 configuration) | +----------------------------+----------------------------------------+ | 336/15 | 4PAM, 8PAM (applicable only for SF2 | | | code in a 2xSF2+2xSF4 configuration) | +----------------------------+----------------------------------------+ | 299/15 | 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 267/15 | BPSK (applicable only for SF2 code in | | | a 2xSF2+2xSF4 configuration), 4PAM, | | | 8PAM | +----------------------------+----------------------------------------+ | 237/15 | BPSK (applicable only for SF2 code in | | | a 2xSF2+2xSF4 configuration), 4PAM, | | | 8PAM | +----------------------------+----------------------------------------+ | 212/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 189/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 168/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 150/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 134/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 119/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 106/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 95/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 84/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 75/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 67/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 60/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 53/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 47/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 42/15 | BPSK, 4PAM, 8PAM | +----------------------------+----------------------------------------+ | 38/15 | BPSK | +----------------------------+----------------------------------------+ | 34/15 | BPSK | +----------------------------+----------------------------------------+ | 30/15 | BPSK | +----------------------------+----------------------------------------+ | 27/15 | BPSK | +----------------------------+----------------------------------------+ | 24/15 | BPSK | +----------------------------+----------------------------------------+ | 21/15 | BPSK | +----------------------------+----------------------------------------+ | 19/15 | BPSK | +----------------------------+----------------------------------------+ | 17/15 | BPSK | +----------------------------+----------------------------------------+ | 15/15 | BPSK | +----------------------------+----------------------------------------+ | 13/15 | BPSK | +----------------------------+----------------------------------------+ | 11/15 | BPSK | +----------------------------+----------------------------------------+ | 8/15 | BPSK | +----------------------------+----------------------------------------+
The HARQ offsets ∆~harq~ to be used for support of different HARQ profile are
configured by higher layers as specified in Table 1B.3.
~Table\ 1B.3:\ HARQ\ offset\ ∆~harq
* * *
Signalled values for ∆~harq~ Power offset values ∆~harq~ [dB] 6 6 5 5 4 4 3 3
2 2 1 1 0 0
* * *
After weighting, the real-valued spread signals shall be mapped to the I
branch or the Q branch according to the iq~ec~ value for the E-DPCCH and to
iq~ed,k~ for E-DPDCH~k~ and summed together.
The E-DPCCH shall always be mapped to the I branch, i.e. iq~ec~ = 1.
The IQ branch mapping for the E-DPDCHs depends on N~max-dpdch~ and on whether
an HS-DSCH is configured for the UE; the IQ branch mapping shall be as
specified in table 1C.
Table 1C: IQ branch mapping for E-DPDCH
* * *
N~max-dpdch~ **HS-DSCH configured** **E-DPDCH~k~** **iq~ed~,~k~** 0 No/Yes
E-DPDCH~1~ 1 E-DPDCH~2~ j E-DPDCH~3~ 1 E-DPDCH~4~ j 1 No E-DPDCH~1~ j
E-DPDCH~2~ 1 1 Yes E-DPDCH~1~ 1 E-DPDCH~2~ j
* * *
NOTE: In case the UE transmits more than 2 E-DPDCHs, the UE then always
transmits E‑DPDCH~3~ and E‑DPDCH~4~ simultaneously.
#### 4.2.1.4 S-DPCCH
Figure 1D illustrates the spreading operation for the uplink S-DPCCH.
Figure 1D: Spreading for uplink S-DPCCH
The S-DPCCH is spread to the chip rate by the channelisation code c~sc~.
After channelisation, the real-valued spread signal is weighted by the gain
factor β~sc~ for S-DPCCH.
##### 4.2.1.4.1 S-DPCCH gain factor setting while not transmitting rank-2
When no transmission on E-DCH is taking place, or when E-DCH transmission is
taking place and E-TFCI ≤ _E-TFCI~ec,boost~_ the β~sc~ shall be derived based
on the quantized amplitude ratios A~sc~ which is translated from ∆~S-DPCCH~
signalled by higher layers as described in [6] subclause 5.1.2.5D. The
translation of ∆~S-DPCCH~ into quantized amplitude ratios A~sc~ = β~sc~/β~c~
is specified in Table 1C.1.
Table 1C.1: The quantization for ∆~S-DPCCH~ when no transmission on E-DCH is
taking place, and when E-DCH transmission is taking place and E-TFCI ≤ _E-
TFCI~ec,boost~_
+----------------------+----------------------------+ | Signalled values for | Quantized amplitude ratios | | | | | ∆~S-DPCCH~ | Α~sc~ | +----------------------+----------------------------+ | 6 | 1.0 | +----------------------+----------------------------+ | 5 | 12/15 | +----------------------+----------------------------+ | 4 | 11/15 | +----------------------+----------------------------+ | 3 | 10/15 | +----------------------+----------------------------+ | 2 | 9/15 | +----------------------+----------------------------+ | 1 | 8/15 | +----------------------+----------------------------+ | 0 | Switch off | +----------------------+----------------------------+
When E-TFCI > _E-TFCI~ec,boost~_ , in order to provide an enhanced phase
reference, the value of β~sc~ shall be derived as specified in [6] based on
the traffic to secondary pilot power offset ∆~T2SP~, configured by higher
layers, and following the definition of ∆~T2TP~ as specified in Table 1B.0 and
the quantization of the ratio β~sc~/β~c~ following the quantization of
β~ec~/β~c~ as specified in Table 1B.0A.
##### 4.2.1.4.2 S-DPCCH gain factor setting while transmitting rank-2
When a set of S-E-DPDCHs are present in a TTI, the S-DPCCH gain factor _β~sc~_
is set equal to _β~ec~_ for that TTI as defined in sub-clause 4.2.1.3.
#### 4.2.1.5 S-E-DPCCH
Figure 1E illustrates the spreading operation for the S-E-DPCCH.
Figure 1E: Spreading for S-E-DPCCH
The S-E-DPCCH shall be spread to the chip rate by the channelisation code
c~sec~.
After channelisation, the real-valued spread S-E-DPCCH shall be weighted by
gain factor _β~sec~_.
The ∆~S-E-DPCCH~ value is signalled by higher layers and the gain factor
_β~sec~_ shall be derived based on the quantized amplitude ratios. The
translation of ∆~S-E-DPCCH~ into quantized amplitude ratios _β~sec~_ /_β~c~_
is specified in Table 1C.2.
The S-E-DPCCH shall always be mapped to the Q branch.
Table 1C.2: Quantization gain factors for S-E-DPCCH
* * *
Signaled values for ∆~S-E-DPCCH~ Quantized amplitude ratios _β~sec~_ /_β~c~_
17 239/15 16 190/15 15 151/15 14 120/15 13 95/15 12 76/15 11 60/15 10 48/15 9
38/15 8 30/15 7 24/15 6 19/15 5 15/15 4 12/15 3 9/15 2 8/15 1 6/15 0 5/15
* * *
#### 4.2.1.6 S-E-DPDCH
Figure 1F illustrates the spreading operation for the S-E-DPDCHs.
Figure 1F: Spreading for S-E-DPDCH
The _k_ :th S-E-DPDCH, denominated S-E‑DPDCH~k~, shall be spread to the chip
rate using channelisation code c~sed,k~.
After channelisation, the real-valued spread S-E-DPDCH~k~ signals shall
respectively be weighted by gain factor _β~sed,k~_. The value of _β~sed,k~_
for S-E-DPDCH~k~ shall follow that of the corresponding _β~ed,k~_ for
E-DPDCH~k~ transmitted in the same TTI as defined in table 1C.3.
Table 1C.3: Gain factor setting for S-E-DPDCHs
+------------------+--------------------------------------+ | **S-E-DPDCH~k~** | Quantized amplitude ratios | | | | | | _β~sed,k~_ /_β~c~_ | +------------------+--------------------------------------+ | S-E-DPDCH~1~ | _β~sed,1~_ /_β~c~_ = _β~ed,1~_ /_β~c~_ | +------------------+--------------------------------------+ | S-E-DPDCH~2~ | _β~sed,2~_ /_β~c~_ = _β~ed,2~_ /_β~c~_ | +------------------+--------------------------------------+ | S-E-DPDCH~3~ | _β~sed,3~_ /_β~c~_ = _β~ed,3~_ /_β~c~_ | +------------------+--------------------------------------+ | S-E-DPDCH~4~ | _β~sed,4~_ /_β~c~_ = _β~ed,4~_ /_β~c~_ | +------------------+--------------------------------------+
NOTE: Either no S-E-DPDCHs are transmitted, or all four S-E-DPDCHs are
transmitted together and simultaneously with four E-DPDCHs.
After weighting, the real-valued spread signals shall be mapped to the I
branch or the Q branch according to the iq~sed,k~ for S-E-DPDCH~k~ and summed
together. The IQ branch mapping for the S-E-DPDCHs shall be as specified in
table 1C.4.
Table 1C.4: IQ branch mapping for S-E-DPDCHs
* * *
**S-E-DPDCH~k~** **iq~sed~,~k~** S-E-DPDCH~1~ 1 S-E-DPDCH~2~ j S-E-DPDCH~3~ 1
S-E-DPDCH~4~ j
* * *
#### 4.2.1.7 DPCCH2
Figure 1G illustrates the spreading operation for the uplink DPCCH2.
Figure 1G: Spreading for uplink DPCCH2
The DPCCH2 is spread to the chip rate by the channelisation code c~c2~.
After channelisation, the real-valued spread signal is weighted by the gain
factor β~c2~ for DPCCH2.
At every instant in time, the value of β~c2~ is set to 1.0.
### 4.2.2 PRACH
#### 4.2.2.1 PRACH preamble part
The PRACH preamble part consists of a complex-valued code, described in
subclause 4.3.3.
#### 4.2.2.2 PRACH message part
Figure 2 illustrates the principle of the spreading and scrambling of the
PRACH message part, consisting of data and control parts. The binary control
and data parts to be spread are represented by real-valued sequences, i.e. the
binary value \"0\" is mapped to the real value +1, while the binary value
\"1\" is mapped to the real value --1. The control part is spread to the chip
rate by the channelisation code c~c~, while the data part is spread to the
chip rate by the channelisation code c~d~.
Figure 2: Spreading of PRACH message part
After channelisation, the real-valued spread signals are weighted by gain
factors, β~c~ for the control part and β~d~ for the data part. At every
instant in time, at least one of the values β~c~ and β~d~ has the amplitude
1.0. The β-values are quantized into 4 bit words. The quantization steps are
given in subclause 4.2.1.
After the weighting, the stream of real-valued chips on the I- and Q-branches
are treated as a complex-valued stream of chips. This complex-valued signal is
then scrambled by the complex-valued scrambling code S~r-msg,n~. The 10 ms
scrambling code is applied aligned with the 10 ms message part radio frames,
i.e. the first scrambling chip corresponds to the beginning of a message part
radio frame.
### 4.2.3 Void
### 4.2.4 Channel combining for UL CLTD and UL MIMO
Figure 3, 3A, and 3B illustrate how different uplink channels are combined if
UL_CLTD_Enabled is TRUE.
\- For the case that UL_CLTD_Active is 1,
> \- Each complex-valued spread channel, corresponding to point S in Figure 1,
> and point S' in Figure 1.1 , shall be separately pre-coded by a precoding
> vector {w~1~,w~2~} and {w~3~,w~4~} as described in [6]. After precoding, the
> complex-valued signals T and T' are obtained; see Figure 3.
\- For the case that UL_CLTD_Active is 2,
> \- Complex-valued spread channel, corresponding to point S in Figure 1,
> shall be mapped to T, as shown in Figure 3A.
\- For the case that UL_CLTD_Active is 3,
> \- Complex-valued spread channel, corresponding to point S in Figure 1,
> shall be mapped to T', as shown in Figure 3B.
Figure 3: Combining of uplink physical channels when UL_CLTD_Enabled is TRUE
and UL_CLTD_Active is 1
Figure 3A: Combining of uplink physical channels when UL_CLTD_Enabled is TRUE
and UL_CLTD_Active is 2
Figure 3B: Combining of uplink physical channels when UL_CLTD_Enabled is TRUE
and UL_CLTD_Active is 3
## 4.3 Code generation and allocation
### 4.3.1 Channelisation codes
#### 4.3.1.1 Code definition
The channelisation codes of figure 1 are Orthogonal Variable Spreading Factor
(OVSF) codes that preserve the orthogonality between a user's different
physical channels. The OVSF codes can be defined using the code tree of figure
4.
Figure 4: Code-tree for generation of Orthogonal Variable Spreading Factor
(OVSF) codes
In figure 4, the channelisation codes are uniquely described as C~ch,SF,k~,
where SF is the spreading factor of the code and _k_ is the code number, 0 ≤
_k_ ≤ SF-1.
Each level in the code tree defines channelisation codes of length SF,
corresponding to a spreading factor of SF in figure 4.
The generation method for the channelisation code is defined as:
$C_{\text{ch,1,0}} = 1$,
$\begin{matrix} \left\lbrack C_{\text{ch},2,0} \middle| \right\rbrack \ \
\end{matrix}$
$\begin{bmatrix} C_{{}^{\left( n + 1 \right)_{,0}}} \ C_{{}^{\left( n + 1
\right)_{,1}}} \ C_{{}^{\left( n + 1 \right)_{,2}}} \ C_{{}^{\left( n + 1
\right)_{,3}}} \ : \ C_{{}^{\left( n + 1 \right)\left( n + 1 \right)_{- 2}}} \
C_{{}^{\left( n + 1 \right)\left( n + 1 \right)_{- 1}}} \ \end{bmatrix} =
\begin{bmatrix} C_{{}^{\text{ch},2^{n},0}} & C_{{}^{\text{ch},2^{n},0}} \
C_{{}^{\text{ch},2^{n},0}} & \- C_{{}^{\text{ch},2^{n},0}} \
C_{{}^{\text{ch},2^{n},1}} & C_{{}^{\text{ch},2^{n},1}} \
C_{{}^{\text{ch},2^{n},1}} & \- C_{{}^{\text{ch},2^{n},1}} \ : & : \
C_{{}^{\text{ch},2^{n},2^{n} - 1}} & C_{{}^{\text{ch},2^{n},2^{n} - 1}} \
C_{{}^{\text{ch},2^{n},2^{n} - 1}} & \- C_{{}^{\text{ch},2^{n},2^{n} - 1}} \
\end{bmatrix}$
The leftmost value in each channelisation code word corresponds to the chip
transmitted first in time.
#### 4.3.1.2 Code allocation for dedicated physical channels
NOTE: Although subclause 4.3.1.2 has been reorganized in this release, the
spreading operation for DPCCH and DPDCH remains unchanged as compared to the
previous release.
##### 4.3.1.2.1 Code allocation for DPCCH/ S-DPCCH/DPDCH/DPCCH2
For the DPCCH, S-DPCCH and DPDCHs the following applies:
\- The DPCCH shall always be spread by code c~c~ = C~ch,256,0.~
\- The S-DPCCH shall always be spread by code c~sc~ = C~ch,256,31.~
~-~ The DPCCH2 shall be spread with code c~c2~ as specified in table 1C.5.
\- When only one DPDCH is to be transmitted, DPDCH~1~ shall be spread by code
c~d,1~ = C~ch,SF,k~ where SF is the spreading factor of DPDCH~1~ and k= SF /
4.
\- When more than one DPDCH is to be transmitted, all DPDCHs have spreading
factors equal to 4. DPDCH~n~ shall be spread by the the code c~d,n~ =
C~ch,4,k~ , where _k_ = 1 if _n_ ∈ {1, 2}, _k_ = 3 if _n_ ∈ {3, 4}, and _k_ =
2 if _n_ ∈ {5, 6}.
Table 1C.5: Channelisation code of DPCCH2
+---------------------------------+-------------------------------+ | Nmax-dpdch | **Channelisation code c~c2~** | | | | | (as defined in subclause 4.2.1) | | +---------------------------------+-------------------------------+ | 0 | C~ch,256,34~ | +---------------------------------+-------------------------------+ | ≥1 | C~ch,256,3~ | +---------------------------------+-------------------------------+
If a power control preamble is used to initialise a DCH, the channelisation
code for the DPCCH during the power control preamble shall be the same as that
to be used afterwards.
##### 4.3.1.2.2 Code allocation for HS-DPCCH when the UE is not configured in
MIMO mode with four transmit antennas in any cell
The HS-DPCCH shall be spread with code c~hs~ as specified in table 1D. If
Secondary_Cell_Enabled is greater than 3 HS-DPCCH~2~ shall be spread with code
c~hs~ as specified in table 1D.1.
If Secondary_Cell_Enabled as defined in [6] is 0 or 1 or if
Secondary_Cell_Enabled is 2 and MIMO is not configured in any cell, HS-DPCCH
slot format #0 as defined in [2] is used.
If Secondary_Cell_Enabled is 2 and MIMO is configured in at least one cell or
if Secondary_Cell_Enabled is 3, HS-DPCCH slot format #1 as defined in [2] is
used.
If Secondary_Cell_Enabled is greater than 3, HS-DPCCH slot format #1 as
defined in [2] is used.
Table 1D: channelisation code of HS-DPCCH
+----------------+----------------+----------------+----------------+ | N~max-dpdch~ | Channelisation | | | | | code c~hs~ | | | | (as defined in | | | | | subclause | | | | | 4.2.1) | | | | +----------------+----------------+----------------+----------------+ | | Secondary\ | Secondary\ | | | | _Cell_Enabled | _Cell_Enabled | | | | is 0, 1, 2 or | is greater | | | | 3 | than 3 | | +----------------+----------------+----------------+----------------+ | | HS-DPCCH slot | HS-DPCCH slot | HS-DPCCH slot | | | format #0 | format #1 | format #1 | | | [2] | [2] | [2] | +----------------+----------------+----------------+----------------+ | 0 | C ~ch,256,33~ | C ~ch,128,16~ | C ~ch,128,16~ | +----------------+----------------+----------------+----------------+ | 1 | C~ch,256,64~ | C ~ch,128,32~ | C ~ch,128,16~ | +----------------+----------------+----------------+----------------+ | 2,4,6 | C~ch,256,1~ | N/A | N/A | +----------------+----------------+----------------+----------------+ | 3,5 | C~ch,256,32~ | N/A | N/A | +----------------+----------------+----------------+----------------+
Table 1D.1: channelisation code of HS-DPCCH~2~ if Secondary_Cell_Enabled is
greater than 3.
+---------------------------------+-----------------------------------+ | N~max-dpdch~ | Channelisation code c~hs~ | | | | | (as defined in subclause 4.2.1) | | +---------------------------------+-----------------------------------+ | | Secondary_Cell_Enabled is | | | greater than 3 | +---------------------------------+-----------------------------------+ | | HS-DPCCH slot format #1 [2] | +---------------------------------+-----------------------------------+ | 0 | C ~ch,128,16~ | +---------------------------------+-----------------------------------+ | 1 | C ~ch,128,16~ | +---------------------------------+-----------------------------------+
##### 4.3.1.2.2A Code allocation for HS-DPCCH when the UE is configured in
MIMO mode with four transmit antennas in at least one cell
If Secondary_Cell_Enabled as defined in [6] is 0 or 1, HS-DPCCH slot format #1
as defined in [2] is used. HS-DPCCH shall be spread with code c~hs~ as
specified in table 1D.2.
If Secondary_Cell_Enabled is 2:
> \- If the UE is configured in MIMO mode with four transmit antennas in all
> cells, HS-DPCCH slot format #1 as defined in [2] is used for both HS-DPCCH
> and HS-DPCCH~2~. HS-DPCCH shall be spread with code c~hs~ as specified in
> table 1D.2 and HS-DPCCH~2~ spread with code c~hs~ as specified in table
> 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with four
> transmit antennas either in the primary or in the 1^st^ secondary serving
> cell or both, then HS-DPCCH slot format #1 as defined in [2] is used for HS-
> DPCCH. HS-DPCCH shall be spread with code c~hs~ as specified in table 1D.2.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode with
> four transmit antennas in the primary and the 1^st^ secondary serving cell
> then HS-DPCCH slot format #0 as defined in [2] is used for HS-DPCCH. HS-
> DPCCH shall be spread with code c~hs~ as specified in table 1D.4.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with four
> transmit antennas in the 2^nd^ secondary serving cell then HS-DPCCH slot
> format #1 as defined in [2] is used for HS-DPCCH~2~. HS-DPCCH~2~ spread with
> code c~hs~ as specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode with
> four transmit antennas in the 2^nd^ secondary serving cell then HS-DPCCH
> slot format #0 as defined in [2] is used for HS-DPCCH~2~. HS-DPCCH~2~ spread
> with code c~hs~ as specified in table 1D.5.
If Secondary_Cell_Enabled is 3:
> \- If the UE is configured in MIMO mode with four transmit antennas in more
> than 2 cells HS-DPCCH slot format #1 as defined in [2] is used for both HS-
> DPCCH and HS-DPCCH~2~. HS-DPCCH shall be spread with code c~hs~ as specified
> in table 1D.2 and HS-DPCCH~2~ spread with code c~hs~ as specified in table
> 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with four
> transmit antennas either in the primary or in the 1^st^ secondary serving
> cell or both, then HS-DPCCH slot format #1 as defined in [2] is used for HS-
> DPCCH. HS-DPCCH shall be spread with code c~hs~ as specified in table 1D.2.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode with
> four transmit antennas in the primary and the 1^st^ secondary serving cell
> then HS-DPCCH slot format #0 as defined in [2] is used for HS-DPCCH. HS-
> DPCCH shall be spread with code c~hs~ as specified in table 1D.4.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with four
> transmit antennas in the 2^nd^ serving or in the 3^rd^ serving secondary
> cell or both then HS-DPCCH slot format #1 as defined in [2] is used for HS-
> DPCCH~2~. HS-DPCCH~2~ spread with code c~hs~ as specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode with
> four transmit antennas in the 2^nd^ and the 3^rd^ secondary serving cell
> then HS-DPCCH slot format #0 as defined in [2] is used for HS-DPCCH~2~. HS-
> DPCCH~2~ spread with code c~hs~ as specified in table 1D.5.
Table 1D.2: channelisation code of HS-DPCCH if Secondary_Cell_Enabled is 0 or
1 or 2 or 3 and the UE is configured in MIMO mode with four transmit antennas
in any cell
+----------------------+----------------------+----------------------+ | N~max-dpdch~ | Channelisation code | Channelisation code | | | c~hs~, | c~hs~, | | (as defined in | Seco | Seco | | subclause 4.2.1) | ndary_Cell_Enabled | ndary_Cell_Enabled | | | is 0, 1 | is 2, 3 | +----------------------+----------------------+----------------------+ | | HS-DPCCH slot format | HS-DPCCH slot format | | | #1 [2] | #1 [2] | +----------------------+----------------------+----------------------+ | 0 | C~ch,128,16~ | C~ch,128,16~ | +----------------------+----------------------+----------------------+ | 1 | C~ch,128,32~ | C~ch,128,16~ | +----------------------+----------------------+----------------------+
Table 1D.3: channelisation code of HS-DPCCH~2~ if Secondary_Cell_Enabled is 2
or 3 and the UE is configured in MIMO mode with four transmit antennas in any
cell
+----------------------+----------------------+----------------------+ | N~max-dpdch~ | Channelisation code | Channelisation code | | | c~hs~ | c~hs~ | | (as defined in | | | | subclause 4.2.1) | | | +----------------------+----------------------+----------------------+ | | HS-DPCCH slot format | HS-DPCCH slot format | | | #0 [2] | #1 [2] | +----------------------+----------------------+----------------------+ | 0 | C~ch,256,32~ | C~ch,128,16~ | +----------------------+----------------------+----------------------+ | 1 | C~ch,256,32~ | C~ch,128,16~ | +----------------------+----------------------+----------------------+
Table 1D.4: channelisation code of HS-DPCCH if Secondary_Cell_Enabled is
greater than 1 and the UE is not configured in MIMO mode with four transmit
antennas in the primary and the 1^st^ secondary serving cell.
+---------------------------------+-----------------------------------+ | N~max-dpdch~ | Channelisation code c~hs~ | | | | | (as defined in subclause 4.2.1) | | +---------------------------------+-----------------------------------+ | | Secondary_Cell_Enabled is | | | greater than 1 | +---------------------------------+-----------------------------------+ | | HS-DPCCH slot format #0 [2] | +---------------------------------+-----------------------------------+ | 0 | C ~ch,256,33~ | +---------------------------------+-----------------------------------+ | 1 | C ~ch,256,64~ | +---------------------------------+-----------------------------------+
Table 1D.5: channelisation code of HS-DPCCH~2~ if Secondary_Cell_Enabled is
equal to 3 and the UE is not configured in MIMO mode with four transmit
antennas in the 2^nd^ and the 3^rd^ secondary serving cell or if
Secondary_Cell_Enabled is equal to 2 and the UE is not configured in MIMO mode
with four transmit antennas in the 2^nd^ secondary serving cell.
+---------------------------------+-----------------------------------+ | N~max-dpdch~ | Channelisation code c~hs~ | | | | | (as defined in subclause 4.2.1) | | +---------------------------------+-----------------------------------+ | | Secondary_Cell_Enabled is | | | greater than 1 | +---------------------------------+-----------------------------------+ | | HS-DPCCH slot format #0 [2] | +---------------------------------+-----------------------------------+ | 0 | C ~ch,256,33~ | +---------------------------------+-----------------------------------+ | 1 | C ~ch,256,64~ | +---------------------------------+-----------------------------------+
##### 4.3.1.2.3 Code allocation for E-DPCCH/E-DPDCH
The E-DPCCH shall be spread with channelisation code c~ec~ = C~ch,256,1~.
E-DPDCH~k~ shall be spread with channelisation code c~ed,k~. The sequence
c~ed,k~ depends on N~max-dpdch~ and the spreading factor selected for the
corresponding frame or sub-frame as specified in [7]; it shall be selected
according to table 1E.
Table 1E: Channelisation code for E-DPDCH
+--------------+----------------+-----------------------------+ | N~max-dpdch~ | **E-DPDCH~k~** | Channelisation code C~ed,k~ | +--------------+----------------+-----------------------------+ | 0 | E-DPDCH~1~ | C~ch,SF,SF/4~ if SF ≥ 4 | | | | | | | | C~ch,2,1~ if SF = 2 | +--------------+----------------+-----------------------------+ | | E-DPDCH~2~ | C~ch,4,1~ if SF = 4 | | | | | | | | C~ch,2,1~ if SF = 2 | +--------------+----------------+-----------------------------+ | | E-DPDCH~3~ | C~ch,4,1~ | | | | | | | E-DPDCH~4~ | | +--------------+----------------+-----------------------------+ | 1 | E-DPDCH~1~ | C~ch,SF,SF/2~ | +--------------+----------------+-----------------------------+ | | E-DPDCH~2~ | C~ch,4,2~ if SF = 4 | | | | | | | | C~ch,2,1~ if SF = 2 | +--------------+----------------+-----------------------------+
NOTE: When more than one E-DPDCH is transmitted, the respective channelisation
codes used for E-DPDCH~1~ and E-DPDCH~2~ are always the same.
##### 4.3.1.2.4 Code allocation for S-E-DPCCH/S-E-DPDCH
The S-E-DPCCH shall be spread with channelisation code c~sec~ = C~ch,256,1~.
S-E-DPDCH~k~ shall be spread with channelisation code c~sed,k~. The sequence
c~sed,k~ shall be selected according to table 1F.
Table 1F: Channelisation code for S-E-DPDCH
+--------------+------------------+------------------------------+ | N~max-dpdch~ | **S-E-DPDCH~k~** | Channelisation code C~sed,k~ | +--------------+------------------+------------------------------+ | 0 | S-E-DPDCH~1~ | C~ch,2,1~ | | | | | | | S-E-DPDCH~2~ | | +--------------+------------------+------------------------------+ | | S-E-DPDCH~3~ | C~ch,4,1~ | | | | | | | S-E-DPDCH~4~ | | +--------------+------------------+------------------------------+
NOTE: Either none or all four S-E-DPDCHs are transmitted.
#### 4.3.1.3 Code allocation for PRACH message part
The preamble signature _s_ , 0 ≤ _s_ ≤ 15, points to one of the 16 nodes in
the code-tree that corresponds to channelisation codes of length 16. The sub-
tree below the specified node is used for spreading of the message part. The
control part is spread with the channelisation code c~c~ (as shown in
subclause 4.2.2.2) of spreading factor 256 in the lowest branch of the sub-
tree, i.e. c~c~ = C~ch,256,m~ where m = 16×s + 15\. The data part uses any of
the channelisation codes from spreading factor 32 to 256 in the upper-most
branch of the sub-tree. To be exact, the data part is spread by channelisation
code c~d~ = C~ch,SF,m~ and SF is the spreading factor used for the data part
and m = SF×s/16.
#### 4.3.1.4 Void
#### 4.3.1.5 Void
### 4.3.2 Scrambling codes
#### 4.3.2.1 General
All uplink physical channels on an activated uplink frequency shall be
scrambled with a complex-valued scrambling code. The dedicated physical
channels may be scrambled by either a long or a short scrambling code, defined
in subclause 4.3.2.4. The PRACH message part shall be scrambled with a long
scrambling code, defined in subclause 4.3.2.5. There are 2^24^ long and 2^24^
short uplink scrambling codes. Uplink scrambling codes are assigned by higher
layers.
The long scrambling code is built from constituent long sequences defined in
subclause 4.3.2.2, while the constituent short sequences used to build the
short scrambling code are defined in subclause 4.3.2.3.
#### 4.3.2.2 Long scrambling sequence
The long scrambling sequences c~long,1,n~ and c~long,2,n~ are constructed from
position wise modulo 2 sum of 38400 chip segments of two binary _m_ -sequences
generated by means of two generator polynomials of degree 25. Let _x_ , and
_y_ be the two _m_ -sequences respectively. The _x_ sequence is constructed
using the primitive (over GF(2)) polynomial _X^25^+X^3^+1._ The _y_ sequence
is constructed using the polynomial _X^25^+X^3^+X^2^+X+1._ The resulting
sequences thus constitute segments of a set of Gold sequences.
The sequence c~long,2,n~ is a 16777232 chip shifted version of the sequence
c~long,1,n~.
Let _n~23~ ... n~0\ ~_ be the 24 bit binary representation of the scrambling
sequence number _n_ with _n~0\ ~_ being the least significant bit. The _x_
sequence depends on the chosen scrambling sequence number _n_ and is denoted
_x~n~_ , in the sequel. Furthermore, let _x~n~(i)_ and _y(i)_ denote the _i:_
th symbol of the sequence _x~n~_ and _y,_ respectively.
The _m_ -sequences _x~n~_ and _y_ are constructed as:
Initial conditions:
\- x~n~(0)=n~0~ , x~n~(1)= n~1~ , ... =x~n~(22)= n~22~ ,x~n~(23)= n~23~,
x~n~(24)=1.
\- y(0)=y(1)= ... =y(23)= y(24)=1.
Recursive definition of subsequent symbols:
\- x~n~(i+25) =x~n~(i+3) + x~n~(i) modulo 2, i=0,..., 2^25^-27.
\- y(i+25) = y(i+3)+y(i+2) +y(i+1) +y(i) modulo 2, i=0,..., 2^25^-27.
Define the binary Gold sequence _z~n~_ by:
_\- z~n~_(_i_) _= x~n~_(_i_) _\+ y_(_i_) modulo 2 _, i_ = 0, 1, 2, ...,
2^25^-2.
The real valued Gold sequence _Z~n~_ is defined by:
$Z_{n}(i) = \left{ \begin{matrix} \+ 1 & \text{if}\ z_{n}(i) = 0 \ \- 1 &
\text{if}\ z_{n}(i) = 1 \ \end{matrix} \right.\ \ \text{for}\ i =
0,1,\ldots,2^{\text{25}} - 2\text{.}$
Now, the real-valued long scrambling sequences c~long,1,n~ and c~long,2,n~ are
defined as follows:
c~long,1,n~(_i_) _= Z~n~_(_i_), _i =_ 0, 1, 2, ..., 2^25^ -- 2 and
c~long,2,n~(_i_) _= Z~n~_((_i +_ 16777232) modulo (2^25^ -- 1)), _i =_ 0, 1,
2, ..., 2^25^ -- 2.
Finally, the complex-valued long scrambling sequence C~long,\ n~, is defined
as:
$C_{\text{long},n}(i) = c_{\text{long},1,n}(i)\left( 1 + j\left( - 1
\right)^{i}c_{\text{long},2,n}\left( 2\left\lfloor \frac{i}{2} \right\rfloor
\right) \right)$
where _i_ = 0, 1, ..., 2^25^ -- 2 and  denotes rounding to nearest lower
integer.
Figure 5: Configuration of uplink scrambling sequence generator
#### 4.3.2.3 Short scrambling sequence
The short scrambling sequences _c_ ~short,1,_n_ ~(_i_) and _c_ ~short,2,_n_
~(_i_) are defined from a sequence from the family of periodically extended
S(2) codes.
Let _n_ ~23~_n_ ~22~..._n_ ~0~ be the 24 bit binary representation of the code
number _n_.
The _n_ :th quaternary S(2) sequence _z~n~_(_i_), 0 ≤ _n_ ≤ 16777215, is
obtained by modulo 4 addition of three sequences, a quaternary sequence
_a_(_i_) and two binary sequences _b_(_i_) and _d_(_i_), where the initial
loading of the three sequences is determined from the code number _n_. The
sequence _z~n~_(_i_) of length 255 is generated according to the following
relation:
_\- z~n~_(_i_) = _a_(_i_) + 2 _b_(_i_) + 2 _d_(_i_) modulo 4, _i_ = 0, 1, ...,
254;
where the quaternary sequence _a_(_i_) is generated recursively by the
polynomial _g_ ~0~(_x_)= _x^8^+3x^5^+x^3^+3x^2^+2x+3_ as:
_\- a_(_0_) = 2 _n~0~_ \+ 1 modulo 4;
_\- a_(_i_) = 2 _n~i~_ modulo 4, _i_ = 1, 2, ..., 7;
_\- a_(_i)_ = 3 _a_(_i_ -3) + _a_(_i_ -5) + 3 _a_(_i_ -6) + 2 _a_(_i_ -7) + 3
_a_(_i_ -8) modulo 4, _i_ = 8, 9, ..., 254;
and the binary sequence _b_(_i_) is generated recursively by the polynomial
_g_ ~1~(_x_)= _x^8^+x^7^+x^5^+x+1_ as
_b_(_i_) = _n_ ~8+_i_ ~ modulo 2, _i_ = 0, 1, ..., 7,
_b_(_i_) = _b_(_i-1_) _\+ b_(_i-3_) + _b_(_i-7_) + _b_(_i-8_) modulo 2, _i_ =
8, 9, ..., 254,
and the binary sequence _d_(_i_) is generated recursively by the polynomial
_g_ ~2~(_x_)= _x^8^+x^7^+x^5^+x^4^+1_ as:
_d_(_i_) = _n_ ~16+_i_ ~ modulo 2, _i_ = 0, 1, ..., 7;
_d_(_i_) = _d_(_i-1_) + _d_(_i-3_) + _d_(_i-4_) + _d_(_i-8_) modulo 2, _i_ =
8, 9, ..., 254.
The sequence _z~n~_(_i_) is extended to length 256 chips by setting
_z~n~_(255) = _z~n~_(0).
The mapping from _z~n~_(_i_) to the real-valued binary sequences _c_
~short,1,_n_ ~(_i_) and _c_ ~short,2,_n_ ~(_i_), , _i_ = 0, 1, ..., 255 is
defined in Table 2.
Table 2: Mapping from _z~n~_(_i_) to _c~short,1,n~_(_i_) and
_c~short,2,n~_(_i_), _i_ = 0, 1, ..., 255
* * *
_z~n~_(_i_) _c~short,1,n~_(_i_) _c~short,2,n~_(_i_) 0 +1 +1 1 -1 +1 2 -1 -1 3
+1 -1
* * *
Finally, the complex-valued short scrambling sequence C~short,\ n~, is defined
as:
$C_{\text{short},n}(i) = c_{\text{short},1,n}(i\text{mod}\text{256})\left( 1 +
j\left( - 1 \right)^{i}c_{\text{short},2,n}\left( 2\left\lfloor \frac{\left(
i\text{mod}\text{256} \right)}{2} \right\rfloor \right) \right)$
where _i_ = 0, 1, 2, ... and  denotes rounding to nearest lower integer.
An implementation of the short scrambling sequence generator for the 255 chip
sequence to be extended by one chip is shown in Figure 6.
Figure 6: Uplink short scrambling sequence generator for 255 chip sequence
#### 4.3.2.4 Dedicated physical channels scrambling code
The code used for scrambling of the uplink dedicated physical channels may be
of either long or short type. The _n_ :th uplink scrambling code, denoted
S~dpch,\ n~, is defined as:
S~dpch,n~(_i_) = C~long,n~(_i_), _i_ = 0, 1, ..., 38399, when using long
scrambling codes;
where the lowest index corresponds to the chip transmitted first in time and
C~long,n~ is defined in subclause 4.3.2.2.
The _n_ :th uplink scrambling code, denoted S~dpch,\ n~, is defined as:
S~dpch,n~(_i_) = C~short,n~(_i_), _i_ = 0, 1, ..., 38399, when using short
scrambling codes;
where the lowest index corresponds to the chip transmitted first in time and
C~short,n~ is defined in subclause 4.3.2.3.
#### 4.3.2.5 PRACH message part scrambling code
The scrambling code used for the PRACH message part is 10 ms long, and there
are 8192 different PRACH scrambling codes defined.
The _n_ :th PRACH message part scrambling code, denoted S~r-msg,n~, where _n
=_ 0, 1, ..., 8191, is based on the long scrambling sequence and is defined
as:
S~r-msg,n~(_i_) = C~long,n~(_i_ \+ 4096), _i_ = 0, 1, ..., 38399
where the lowest index corresponds to the chip transmitted first in time and
C~long,n~ is defined in subclause 4.3.2.2.
The message part scrambling code has a one-to-one correspondence to the
scrambling code used for the preamble part. For one PRACH, the same code
number is used for both scrambling codes, i.e. if the PRACH preamble
scrambling code used is S~r-pre,m~ then the PRACH message part scrambling code
is S~r-msg,m~, where the number _m_ is the same for both codes.
#### 4.3.2.6 Void
#### 4.3.2.7 Void
### 4.3.3 PRACH preamble codes
#### 4.3.3.1 Preamble code construction
The random access preamble code C~pre,n,~ is a complex valued sequence. It is
built from a preamble scrambling code S~r‑pre,n~ and a preamble signature
C~sig,s~ as follows:
\- C~pre,n,s~(k) = S~r-pre,n~(k) × C~sig,s~(k) × $e^{j\ (\frac{\pi}{4}\ + \
\frac{\pi}{2}\ k)}$, k = 0, 1, 2, 3, ..., 4095;
where k=0 corresponds to the chip transmitted first in time and S~r-pre,n~ and
C~sig,s~ are defined in 4.3.3.2 and 4.3.3.3 below respectively.
#### 4.3.3.2 Preamble scrambling code
The scrambling code for the PRACH preamble part is constructed from the long
scrambling sequences. There are 8192 PRACH preamble scrambling codes in total.
The _n_ :th preamble scrambling code, _n =_ 0, 1, ..., 8191 _,_ is defined as:
S~r-pre,n~(_i_) = c~long,1,n~(_i_), _i_ = 0, 1, ..., 4095;
where the sequence c~long,1,n~ is defined in subclause 4.3.2.2.
The 8192 PRACH preamble scrambling codes are divided into 512 groups with 16
codes in each group. There is a one-to-one correspondence between the group of
PRACH preamble scrambling codes in a cell and the primary scrambling code used
in the downlink of the cell. The _k_ :th PRACH preamble scrambling code within
the cell with downlink primary scrambling code _m_ , _k_ = 0, 1, 2, ..., 15
and _m_ = 0, 1, 2, ..., 511, is S~r-pre,n~(_i_) as defined above with _n_ =
16× _m_ \+ _k_.
#### 4.3.3.3 Preamble signature
The preamble signature corresponding to a signature s consists of 256
repetitions of a length 16 signature P~s~(n), n=0...15. This is defined as
follows:
\- C~sig,_s_ ~(_i_) = _P~s~(i_ modulo 16 _), i_ = 0, 1, ..., 4095.
The signature P~s~(n) is from the set of 16 Hadamard codes of length 16. These
are listed in table 3.
Table 3: Preamble signatures
* * *
Preamble\ Value of _n_  
signature
              0              1    2    3    4    5    6    7    8    9    10   11   12   13   14   15
P~0~(n) 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
P~1~(n) 1 -1 1 -1 1 -1 1 -1 1 -1 1 -1 1 -1 1 -1
P~2~(n) 1 1 -1 -1 1 1 -1 -1 1 1 -1 -1 1 1 -1 -1
P~3~(n) 1 -1 -1 1 1 -1 -1 1 1 -1 -1 1 1 -1 -1 1
P~4~(n) 1 1 1 1 -1 -1 -1 -1 1 1 1 1 -1 -1 -1 -1
P~5~(n) 1 -1 1 -1 -1 1 -1 1 1 -1 1 -1 -1 1 -1 1
P~6~(n) 1 1 -1 -1 -1 -1 1 1 1 1 -1 -1 -1 -1 1 1
P~7~(n) 1 -1 -1 1 -1 1 1 -1 1 -1 -1 1 -1 1 1 -1
P~8~(n) 1 1 1 1 1 1 1 1 -1 -1 -1 -1 -1 -1 -1 -1
P~9~(n) 1 -1 1 -1 1 -1 1 -1 -1 1 -1 1 -1 1 -1 1
P~10~(n) 1 1 -1 -1 1 1 -1 -1 -1 -1 1 1 -1 -1 1 1
P~11~(n) 1 -1 -1 1 1 -1 -1 1 -1 1 1 -1 -1 1 1 -1
P~12~(n) 1 1 1 1 -1 -1 -1 -1 -1 -1 -1 -1 1 1 1 1
P~13~(n) 1 -1 1 -1 -1 1 -1 1 -1 1 -1 1 1 -1 1 -1
P~14~(n) 1 1 -1 -1 -1 -1 1 1 -1 -1 1 1 1 1 -1 -1
P~15~(n) 1 -1 -1 1 -1 1 1 -1 -1 1 1 -1 1 -1 -1 1
* * *
### 4.3.4 Void
## 4.4 Modulation
### 4.4.1 Modulating chip rate
The modulating chip rate is 3.84 Mcps.
### 4.4.2 Modulation
Modulation of the complex-valued chip sequence generated by the spreading
process is shown below in Figure 7 for a UE with a single configured uplink
frequency when UL_CLTD_Enabled is FALSE:
Figure 7: Uplink modulation when a single uplink frequency is configured and
UL_CLTD_Enabled is FALSE
An example of uplink modulation for a UE with adjacent primary and secondary
uplink frequencies is given in Annex B. An example of uplink modulation for a
UE with primary and secondary uplink frequencies in two different bands is
given in Annex B2. The pulse-shaping characteristics are described in [3].
An example of uplink modulation for a UE when a single uplink frequency is
configured and UL_CLTD_Enabled is TRUE is given in Annex B1. The pulse-shaping
characteristics are described in [3].
# 5 Downlink spreading and modulation
## 5.1 Spreading
Figure 8 illustrates the spreading operation for all physical channel except
SCH. The spreading operation includes a modulation mapper stage successively
followed by a channelisation stage, an IQ combining stage and a scrambling
stage. All the downlink physical channels are then combined as specified in
sub subclause 5.1.5.
The non-spread downlink physical channels, except SCH, AICH, E-HICH and E-RGCH
consist of a sequence of 3-valued digits taking the values 0, 1 and \"DTX\".
Note that \"DTX\" is only applicable to those downlink physical channels that
support DTX transmission.
Figure 8: Spreading for all downlink physical channels except SCH
NOTE: Although subclause 5.1 has been reorganized in this release, the
spreading operation as specified for the DL channels in the previous release
remains unchanged.
### 5.1.1 Modulation mapper
Table 3A defines which of the IQ mapping specified in subclauses 5.1.1.1 and
5.1.1.2 may be used for the physical channel being processed.
Table 3A: IQ mapping
+------------------------+----------------------+ | Physical channel | IQ mapping | +------------------------+----------------------+ | HS-PDSCH | QPSK, 16QAM or 64QAM | +------------------------+----------------------+ | S-CCPCH used for MBSFN | QPSK or 16QAM | +------------------------+----------------------+ | All other channels | QPSK | | | | | (except the SCH) | | +------------------------+----------------------+
#### 5.1.1.1 QPSK
For all channels, except AICH, E-HICH and E‑RGCH, the input digits shall be
mapped to real-valued symbols as follows: the binary value \"0\" is mapped to
the real value +1, the binary value \"1\" is mapped to the real value --1 and
\"DTX\" is mapped to the real value 0.
For the indicator channels using signatures (AICH), the real-valued input
symbols depend on the exact combination of the indicators to be transmitted as
specified in [2] subclauses 5.3.3.7, 5.3.3.8 and 5.3.3.9.For the E-HICH and
the E‑RGCH the input is a real valued symbol sequence as specified in [2]
Each pair of two consecutive real-valued symbols is first converted from
serial to parallel and mapped to an I and Q branch. The definition of the
modulation mapper is such that even and odd numbered symbols are mapped to the
I and Q branch respectively. For all QPSK channels except the indicator
channels using signatures, symbol number zero is defined as the first symbol
in each frame or sub-frame. For the indicator channels using signatures,
symbol number zero is defined as the first symbol in each access slot.
#### 5.1.1.2 16QAM
In case of 16QAM, a set of four consecutive binary symbols _n~k~_ , _n~k+1~_ ,
_n~k+2~_ , _n~k+3~_ (with _k_ mod 4 = 0) is serial-to-parallel converted to
two consecutive binary symbols (_i~1~_ = _n~k~_ , _i~2~_ = _n~k+2~_) on the I
branch and two consecutive binary symbols (_q~1~_ = _n~k+1~_ , _q~2~_ =
_n~k+3~_) on the Q branch and then mapped to 16QAM by the modulation mapper as
defined in table 3B.
The I and Q branches are then both spread to the chip rate by the same real-
valued channelisation code C~ch,16,m~. The channelisation code sequence shall
be aligned in time with the symbol boundary. The sequences of real-valued
chips on the I and Q branch are then treated as a single complex-valued
sequence of chips. This sequence of chips from all multi-codes is summed and
then scrambled (complex chip-wise multiplication) by a complex-valued
scrambling code S~dl,n~. The scrambling code is applied aligned with the
scrambling code applied to the P-CCPCH.
Table 3B: 16QAM modulation mapping
* * *
**i~1~q~1~i~2~q~2~** **I branch** **Q branch** 0000 0.4472 0.4472 0001 0.4472
1.3416 0010 1.3416 0.4472 0011 1.3416 1.3416 0100 0.4472 -0.4472 0101 0.4472
-1.3416 0110 1.3416 -0.4472 0111 1.3416 -1.3416 1000 -0.4472 0.4472 1001
-0.4472 1.3416 1010 -1.3416 0.4472 1011 -1.3416 1.3416 1100 -0.4472 -0.4472
1101 -0.4472 -1.3416 1110 -1.3416 -0.4472 1111 -1.3416 -1.3416
* * *
In the case of 16-QAM on S-CCPCH, a sequence of four consecutive symbols
_n~k~_ , _n~k+1~_ , _n~k+2~_ , _n~k+3~_ (with _k_ mod 4 = 0) at the input to
the modulation mapper may contain values from the set 0, 1, and "DTX". In the
event that all 4 bits of the quadruple are DTX bits, the output from the
modulation mapping on both the I and Q branches is equal to the real value 0.
For all other cases, all DTX bits in the quadruple are replaced with other
non-DTX bits from the quadruple according to the following:
The quadruple consists of two bit pairs, {n~k~,n~k+2~} on the I branch, and
{n~k+1~,n~k+3~} on the Q branch. For any bit pair, if a non-DTX bit is
available in the same pair, the DTX bit shall be replaced with the non-DTX bit
value. If a non-DTX bit is not available in the same pair, the two DTX bits in
that pair shall be replaced by the non-DTX bits in the other pair (using the
same bit ordering when the other pair contains two non-DTX bits).
The bit positions and values of non-DTX bits in the quadruple are not
affected.
#### 5.1.1.3 64QAM
In case of 64QAM, a set of six consecutive binary symbols _n~k~_ , _n~k+1~_ ,
_n~k+2~_ , _n~k+3~_ , _n~k+4~_ , _n~k+5~_ (with _k_ mod 6 = 0) is serial-to-
parallel converted to three consecutive binary symbols (_i~1~_ = _n~k~_ ,
_i~2~_ = _n~k+2~_ , _i~3~_ = _n~k+4~_) on the I branch and three consecutive
binary symbols (_q~1~_ = _n~k+1~_ , _q~2~_ = _n~k+3~_ , _q~3~_ = _n~k+5~_) on
the Q branch and then mapped to 64QAM by the modulation mapper as defined in
table 3C.
The I and Q branches are then both spread to the chip rate by the same real-
valued channelisation code C~ch,16,m~. The channelisation code sequence shall
be aligned in time with the symbol boundary. The sequences of real-valued
chips on the I and Q branch are then treated as a single complex-valued
sequence of chips. This sequence of chips from all multi-codes is summed and
then scrambled (complex chip-wise multiplication) by a complex-valued
scrambling code S~dl,n~. The scrambling code is applied aligned with the
scrambling code applied to the P-CCPCH.
Table 3C: 64QAM modulation mapping
* * *
**i~1~q~1~i~2~q~2~ i~3~q~3~** **I branch** **Q branch** **i~1~q~1~i~2~q~2~
i~3~q~3~** **I branch** **Q branch** 000000 0.6547 0.6547 100000 -0.6547
0.6547 000001 0.6547 0.2182 100001 -0.6547 0.2182 000010 0.2182 0.6547 100010
-0.2182 0.6547 000011 0.2182 0.2182 100011 -0.2182 0.2182 000100 0.6547 1.0911
100100 -0.6547 1.0911 000101 0.6547 1.5275 100101 -0.6547 1.5275 000110 0.2182
1.0911 100110 -0.2182 1.0911 000111 0.2182 1.5275 100111 -0.2182 1.5275 001000
1.0911 0.6547 101000 -1.0911 0.6547 001001 1.0911 0.2182 101001 -1.0911 0.2182
001010 1.5275 0.6547 101010 -1.5275 0.6547 001011 1.5275 0.2182 101011 -1.5275
0.2182 001100 1.0911 1.0911 101100 -1.0911 1.0911 001101 1.0911 1.5275 101101
-1.0911 1.5275 001110 1.5275 1.0911 101110 -1.5275 1.0911 001111 1.5275 1.5275
101111 -1.5275 1.5275 010000 0.6547 -0.6547 110000 -0.6547 -0.6547 010001
0.6547 -0.2182 110001 -0.6547 -0.2182 010010 0.2182 -0.6547 110010 -0.2182
-0.6547 010011 0.2182 -0.2182 110011 -0.2182 -0.2182 010100 0.6547 -1.0911
110100 -0.6547 -1.0911 010101 0.6547 -1.5275 110101 -0.6547 -1.5275 010110
0.2182 -1.0911 110110 -0.2182 -1.0911 010111 0.2182 -1.5275 110111 -0.2182
-1.5275 011000 1.0911 -0.6547 111000 -1.0911 -0.6547 011001 1.0911 -0.2182
111001 -1.0911 -0.2182 011010 1.5275 -0.6547 111010 -1.5275 -0.6547 011011
1.5275 -0.2182 111011 -1.5275 -0.2182 011100 1.0911 -1.0911 111100 -1.0911
-1.0911 011101 1.0911 -1.5275 111101 -1.0911 -1.5275 011110 1.5275 -1.0911
111110 -1.5275 -1.0911 011111 1.5275 -1.5275 111111 -1.5275 -1.5275
* * *
### 5.1.2 Channelisation
For all physical channels (except SCH) the I and Q branches shall be spread to
the chip rate by the same real-valued channelisation code C~ch,SF,m~, i.e. the
output for each input symbol on the I and the Q branches shall be a sequence
of SF chips corresponding to the channelisation code chip sequence multiplied
by the real-valued symbol. The channelisation code sequence shall be aligned
in time with the symbol boundary.
### 5.1.3 IQ combining
The real valued chip sequence on the Q branch shall be complex multiplied with
j and summed with the corresponding real valued chip sequence on the I branch,
thus resulting in a single complex valued chip sequence.
### 5.1.4 Scrambling
The sequence of complex valued chips shall be scrambled (complex chip-wise
multiplication) by a complex-valued scrambling code S~dl,n~. In case of
P-CCPCH, the scrambling code shall be applied aligned with the P-CCPCH frame
boundary, i.e. the first complex chip of the spread P-CCPCH frame is
multiplied with chip number zero of the scrambling code. In case of other
downlink channels, the scrambling code shall be applied aligned with the
scrambling code applied to the P‑CCPCH. In this case, the scrambling code is
thus not necessarily applied aligned with the frame boundary of the physical
channel to be scrambled.
### 5.1.5 Channel combining
Figure 9 illustrates how different downlink channels are combined. Each
complex-valued spread channel, corresponding to point S in Figure 8, may be
separately weighted by a weight factor G~i~. The complex-valued P-SCH and
S-SCH, as described in [2], subclause 5.3.3.5, may be separately weighted by
weight factors G~p~ and G~s~. All downlink physical channels shall then be
combined using complex addition.
Figure 9: Combining of downlink physical channels
## 5.2 Code generation and allocation
### 5.2.1 Channelisation codes
The channelisation codes of figure 8 are the same codes as used in the uplink,
namely Orthogonal Variable Spreading Factor (OVSF) codes that preserve the
orthogonality between downlink channels of different rates and spreading
factors. The OVSF codes are defined in figure 4 in subclause 4.3.1.
The channelisation code for the Primary CPICH is fixed to C~ch,256,0~ and the
channelisation code for the Primary CCPCH is fixed to C~ch,256,1~.The
channelisation codes for all other physical channels are assigned by UTRAN.
With the spreading factor 512 a specific restriction is applied. When the code
word C~ch,512,n~, with n=0,2,4....510, is used in soft handover, then the code
word C~ch,512,n+1~ is not allocated in the cells where timing adjustment is to
be used. Respectively if C~ch,512,n~, with n=1,3,5....511 is used, then the
code word C~ch,512,n-1~ is not allocated in the cells where timing adjustment
is to be used. This restriction shall not apply in cases where timing
adjustments in soft handover are not used with spreading factor 512.
When compressed mode is implemented by reducing the spreading factor by 2, the
OVSF code used for compressed frames is:
\- C~ch,SF/2,n/2~ if ordinary scrambling code is used.
\- C~ch,SF/2,n\ mod\ SF/2~ if alternative scrambling code is used (see
subclause 5.2.2);
where C~ch,SF,n~ is the channelisation code used for non-compressed frames.
For F-DPCH, the spreading factor is always 256.
For HS-PDSCH, the spreading factor is always 16.
For HS-SCCH, the spreading factor is always 128.
Channelisation-code-set information over HS-SCCH is mapped in following
manner: the OVSF codes shall be allocated in such a way that they are
positioned in sequence in the code tree. That is, for P multicodes at offset O
the following codes are allocated:
C~ch,16,O~ ... C~ch,16,\ O+P-1~
The number of multicodes and the corresponding offset for HS-PDSCHs mapped
from a given HS-DSCH is signalled by HS-SCCH.
For E-HICH and for E-RGCH, the spreading factor shall always be 128. In each
cell, the E‑RGCH and E-HICH assigned to a UE shall be configured with the same
channelisation code.
For E-AGCH, the spreading factor shall always be 256.
For F-TPICH, the spreading factor shall always be 256.
For E-ROCH, the spreading factor shall always be 256.
### 5.2.2 Scrambling code
A total of 2^18^-1 = 262,143 scrambling codes, numbered 0...262,142 can be
generated. However not all the scrambling codes are used. The scrambling codes
are divided into 512 sets each of a primary scrambling code and 15 secondary
scrambling codes.
The primary scrambling codes consist of scrambling codes n=16*i where
i=0...511. The i:th set of secondary scrambling codes consists of scrambling
codes 16*i+k, where k=1...15.
There is a one-to-one mapping between each primary scrambling code and 15
secondary scrambling codes in a set such that i:th primary scrambling code
corresponds to i:th set of secondary scrambling codes.
Hence, according to the above, scrambling codes k = 0, 1, ..., 8191 are used.
Each of these codes are associated with a left alternative scrambling code and
a right alternative scrambling code, that may be used for compressed frames.
The left alternative scrambling code corresponding to scrambling code k is
scrambling code number k + 8192, while the right alternative scrambling code
corresponding to scrambling code k is scrambling code number k + 16384. The
alternative scrambling codes can be used for compressed frames. In this case,
the left alternative scrambling code is used if n\ = \
The PSC is generated by repeating the sequence _a_ modulated by a Golay
complementary sequence, and creating a complex-valued sequence with identical
real and imaginary components. The PSC C~psc~ is defined as:
\- C~psc~ = (1 + j) × \;
where the leftmost chip in the sequence corresponds to the chip transmitted
first in time.
The 16 secondary synchronization codes (SSCs), {C~ssc,1~,...,C ~ssc,16~}, are
complex-valued with identical real and imaginary components, and are
constructed from position wise multiplicationof a Hadamard sequence and a
sequence _z_ , defined as:
\- z = \, where
_\- b_ = \ and _x_ ~1,~ _x_ ~2~ , ..., _x_ ~15,~ _x_ ~16,~ are same as
in the definition of the sequence _a_ above.
The Hadamard sequences are obtained as the rows in a matrix _H_ ~8~
constructed recursively by:
$\begin{matrix} H_{0} = (1) \ H_{k} = \begin{pmatrix} H_{k - 1} & H_{k - 1} \
H_{k - 1} & \- H_{k - 1} \ \end{pmatrix},\ k \geq 1 \ \end{matrix}$
The rows are numbered from the top starting with row _0_ (the all ones
sequence).
Denote the _n_ :th Hadamard sequence as a row of _H~8~_ numbered from the top,
n = 0, 1, 2, ..., 255, in the sequel.
Furthermore, let _h~n~(i)_ and _z(i)_ denote the _i:_ th symbol of the
sequence _h~n~_ and _z,_ respectively where _i_ = 0, 1, 2, ..., 255 and _i_ =
0 corresponds to the leftmost symbol.
The _k_ :th SSC, C~ssc,k~, _k_ = 1, 2, 3, ..., 16 is then defined as:
\- C~ssc,k~ = (1 + _j_) × \;
where _m_ = 16×(_k_ \-- 1) and the leftmost chip in the sequence corresponds
to the chip transmitted first in time.
#### 5.2.3.2 Code allocation of SSC
The 64 secondary SCH sequences are constructed such that their cyclic-shifts
are unique, i.e., a non-zero cyclic shift less than 15 of any of the 64
sequences is not equivalent to some cyclic shift of any other of the 64
sequences. Also, a non-zero cyclic shift less than 15 of any of the sequences
is not equivalent to itself with any other cyclic shift less than 15. Table 4
describes the sequences of SSCs used to encode the 64 different scrambling
code groups. The entries in table 4 denote what SSC to use in the different
slots for the different scrambling code groups, e.g. the entry \"7\" means
that SSC C~ssc,7~ shall be used for the corresponding scrambling code group
and slot.
Table 4: Allocation of SSCs for secondary SCH
Scrambling Code Group | slot number |  |  |  |  |  |  |  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---  
| #0 | #1 | #2 | #3 | #4 | #5 | #6 | #7 | #8 | #9 | #10 | #11 | #12 | #13 | #14  
Group 0 | 1 | 1 | 2 | 8 | 9 | 10 | 15 | 8 | 10 | 16 | 2 | 7 | 15 | 7 | 16  
Group 1 | 1 | 1 | 5 | 16 | 7 | 3 | 14 | 16 | 3 | 10 | 5 | 12 | 14 | 12 | 10  
Group 2 | 1 | 2 | 1 | 15 | 5 | 5 | 12 | 16 | 6 | 11 | 2 | 16 | 11 | 15 | 12  
Group 3 | 1 | 2 | 3 | 1 | 8 | 6 | 5 | 2 | 5 | 8 | 4 | 4 | 6 | 3 | 7  
Group 4 | 1 | 2 | 16 | 6 | 6 | 11 | 15 | 5 | 12 | 1 | 15 | 12 | 16 | 11 | 2  
Group 5 | 1 | 3 | 4 | 7 | 4 | 1 | 5 | 5 | 3 | 6 | 2 | 8 | 7 | 6 | 8  
Group 6 | 1 | 4 | 11 | 3 | 4 | 10 | 9 | 2 | 11 | 2 | 10 | 12 | 12 | 9 | 3  
Group 7 | 1 | 5 | 6 | 6 | 14 | 9 | 10 | 2 | 13 | 9 | 2 | 5 | 14 | 1 | 13  
Group 8 | 1 | 6 | 10 | 10 | 4 | 11 | 7 | 13 | 16 | 11 | 13 | 6 | 4 | 1 | 16  
Group 9 | 1 | 6 | 13 | 2 | 14 | 2 | 6 | 5 | 5 | 13 | 10 | 9 | 1 | 14 | 10  
Group 10 | 1 | 7 | 8 | 5 | 7 | 2 | 4 | 3 | 8 | 3 | 2 | 6 | 6 | 4 | 5  
Group 11 | 1 | 7 | 10 | 9 | 16 | 7 | 9 | 15 | 1 | 8 | 16 | 8 | 15 | 2 | 2  
Group 12 | 1 | 8 | 12 | 9 | 9 | 4 | 13 | 16 | 5 | 1 | 13 | 5 | 12 | 4 | 8  
Group 13 | 1 | 8 | 14 | 10 | 14 | 1 | 15 | 15 | 8 | 5 | 11 | 4 | 10 | 5 | 4  
Group 14 | 1 | 9 | 2 | 15 | 15 | 16 | 10 | 7 | 8 | 1 | 10 | 8 | 2 | 16 | 9  
Group 15 | 1 | 9 | 15 | 6 | 16 | 2 | 13 | 14 | 10 | 11 | 7 | 4 | 5 | 12 | 3  
Group 16 | 1 | 10 | 9 | 11 | 15 | 7 | 6 | 4 | 16 | 5 | 2 | 12 | 13 | 3 | 14  
Group 17 | 1 | 11 | 14 | 4 | 13 | 2 | 9 | 10 | 12 | 16 | 8 | 5 | 3 | 15 | 6  
Group 18 | 1 | 12 | 12 | 13 | 14 | 7 | 2 | 8 | 14 | 2 | 1 | 13 | 11 | 8 | 11  
Group 19 | 1 | 12 | 15 | 5 | 4 | 14 | 3 | 16 | 7 | 8 | 6 | 2 | 10 | 11 | 13  
Group 20 | 1 | 15 | 4 | 3 | 7 | 6 | 10 | 13 | 12 | 5 | 14 | 16 | 8 | 2 | 11  
Group 21 | 1 | 16 | 3 | 12 | 11 | 9 | 13 | 5 | 8 | 2 | 14 | 7 | 4 | 10 | 15  
Group 22 | 2 | 2 | 5 | 10 | 16 | 11 | 3 | 10 | 11 | 8 | 5 | 13 | 3 | 13 | 8  
Group 23 | 2 | 2 | 12 | 3 | 15 | 5 | 8 | 3 | 5 | 14 | 12 | 9 | 8 | 9 | 14  
Group 24 | 2 | 3 | 6 | 16 | 12 | 16 | 3 | 13 | 13 | 6 | 7 | 9 | 2 | 12 | 7  
Group 25 | 2 | 3 | 8 | 2 | 9 | 15 | 14 | 3 | 14 | 9 | 5 | 5 | 15 | 8 | 12  
Group 26 | 2 | 4 | 7 | 9 | 5 | 4 | 9 | 11 | 2 | 14 | 5 | 14 | 11 | 16 | 16  
Group 27 | 2 | 4 | 13 | 12 | 12 | 7 | 15 | 10 | 5 | 2 | 15 | 5 | 13 | 7 | 4  
Group 28 | 2 | 5 | 9 | 9 | 3 | 12 | 8 | 14 | 15 | 12 | 14 | 5 | 3 | 2 | 15  
Group 29 | 2 | 5 | 11 | 7 | 2 | 11 | 9 | 4 | 16 | 7 | 16 | 9 | 14 | 14 | 4  
Group 30 | 2 | 6 | 2 | 13 | 3 | 3 | 12 | 9 | 7 | 16 | 6 | 9 | 16 | 13 | 12  
Group 31 | 2 | 6 | 9 | 7 | 7 | 16 | 13 | 3 | 12 | 2 | 13 | 12 | 9 | 16 | 6  
Group 32 | 2 | 7 | 12 | 15 | 2 | 12 | 4 | 10 | 13 | 15 | 13 | 4 | 5 | 5 | 10  
Group 33 | 2 | 7 | 14 | 16 | 5 | 9 | 2 | 9 | 16 | 11 | 11 | 5 | 7 | 4 | 14  
Group 34 | 2 | 8 | 5 | 12 | 5 | 2 | 14 | 14 | 8 | 15 | 3 | 9 | 12 | 15 | 9  
Group 35 | 2 | 9 | 13 | 4 | 2 | 13 | 8 | 11 | 6 | 4 | 6 | 8 | 15 | 15 | 11  
Group 36 | 2 | 10 | 3 | 2 | 13 | 16 | 8 | 10 | 8 | 13 | 11 | 11 | 16 | 3 | 5  
Group 37 | 2 | 11 | 15 | 3 | 11 | 6 | 14 | 10 | 15 | 10 | 6 | 7 | 7 | 14 | 3  
Group 38 | 2 | 16 | 4 | 5 | 16 | 14 | 7 | 11 | 4 | 11 | 14 | 9 | 9 | 7 | 5  
Group 39 | 3 | 3 | 4 | 6 | 11 | 12 | 13 | 6 | 12 | 14 | 4 | 5 | 13 | 5 | 14  
Group 40 | 3 | 3 | 6 | 5 | 16 | 9 | 15 | 5 | 9 | 10 | 6 | 4 | 15 | 4 | 10  
Group 41 | 3 | 4 | 5 | 14 | 4 | 6 | 12 | 13 | 5 | 13 | 6 | 11 | 11 | 12 | 14  
Group 42 | 3 | 4 | 9 | 16 | 10 | 4 | 16 | 15 | 3 | 5 | 10 | 5 | 15 | 6 | 6  
Group 43 | 3 | 4 | 16 | 10 | 5 | 10 | 4 | 9 | 9 | 16 | 15 | 6 | 3 | 5 | 15  
Group 44 | 3 | 5 | 12 | 11 | 14 | 5 | 11 | 13 | 3 | 6 | 14 | 6 | 13 | 4 | 4  
Group 45 | 3 | 6 | 4 | 10 | 6 | 5 | 9 | 15 | 4 | 15 | 5 | 16 | 16 | 9 | 10  
Group 46 | 3 | 7 | 8 | 8 | 16 | 11 | 12 | 4 | 15 | 11 | 4 | 7 | 16 | 3 | 15  
Group 47 | 3 | 7 | 16 | 11 | 4 | 15 | 3 | 15 | 11 | 12 | 12 | 4 | 7 | 8 | 16  
Group 48 | 3 | 8 | 7 | 15 | 4 | 8 | 15 | 12 | 3 | 16 | 4 | 16 | 12 | 11 | 11  
Group 49 | 3 | 8 | 15 | 4 | 16 | 4 | 8 | 7 | 7 | 15 | 12 | 11 | 3 | 16 | 12  
Group 50 | 3 | 10 | 10 | 15 | 16 | 5 | 4 | 6 | 16 | 4 | 3 | 15 | 9 | 6 | 9  
Group 51 | 3 | 13 | 11 | 5 | 4 | 12 | 4 | 11 | 6 | 6 | 5 | 3 | 14 | 13 | 12  
Group 52 | 3 | 14 | 7 | 9 | 14 | 10 | 13 | 8 | 7 | 8 | 10 | 4 | 4 | 13 | 9  
Group 53 | 5 | 5 | 8 | 14 | 16 | 13 | 6 | 14 | 13 | 7 | 8 | 15 | 6 | 15 | 7  
Group 54 | 5 | 6 | 11 | 7 | 10 | 8 | 5 | 8 | 7 | 12 | 12 | 10 | 6 | 9 | 11  
Group 55 | 5 | 6 | 13 | 8 | 13 | 5 | 7 | 7 | 6 | 16 | 14 | 15 | 8 | 16 | 15  
Group 56 | 5 | 7 | 9 | 10 | 7 | 11 | 6 | 12 | 9 | 12 | 11 | 8 | 8 | 6 | 10  
Group 57 | 5 | 9 | 6 | 8 | 10 | 9 | 8 | 12 | 5 | 11 | 10 | 11 | 12 | 7 | 7  
Group 58 | 5 | 10 | 10 | 12 | 8 | 11 | 9 | 7 | 8 | 9 | 5 | 12 | 6 | 7 | 6  
Group 59 | 5 | 10 | 12 | 6 | 5 | 12 | 8 | 9 | 7 | 6 | 7 | 8 | 11 | 11 | 9  
Group 60 | 5 | 13 | 15 | 15 | 14 | 8 | 6 | 7 | 16 | 8 | 7 | 13 | 14 | 5 | 16  
Group 61 | 9 | 10 | 13 | 10 | 11 | 15 | 15 | 9 | 16 | 12 | 14 | 13 | 16 | 14 | 11  
Group 62 | 9 | 11 | 12 | 15 | 12 | 9 | 13 | 13 | 11 | 14 | 10 | 16 | 15 | 14 | 16  
Group 63 | 9 | 12 | 10 | 15 | 13 | 14 | 9 | 14 | 15 | 11 | 11 | 13 | 12 | 16 | 10  
## 5.3 Modulation
### 5.3.1 Modulating chip rate
The modulating chip rate is 3.84 Mcps.
### 5.3.2 Modulation
Modulation of the complex-valued chip sequence generated by the spreading
process is shown in Figure 11 below.
Figure 11: Downlink modulation
The pulse-shaping characteristics are described in [4].
###### ## Annex A (informative): Generalised Hierarchical Golay Sequences
# A.1 Alternative generation
The generalised hierarchical Golay sequences for the PSC described in 5.2.3.1
may be also viewed as generated (in real valued representation) by the
following methods:
[Method 1.]{.underline}
The sequence y is constructed from two constituent sequences _x~1~_ and _x~2~_
of length _n~1~_ and _n~2~_ respectively using the following formula:
\- y(i) = x~2~(i mod n~2~) * x~1~(i div n~2~), i = 0 ... (n~1~* n~2~) \- 1.
The constituent sequences _x~1~_ and _x~2\ ~_ are chosen to be the following
length 16 (i.e. _n~1~_ = _n~2~_ =16) sequences:
\- x~1~ is defined to be the length 16 (N^(1)^=4) Golay complementary sequence
obtained by the delay matrix D^(1)^ = [8, 4, 1,2] and weight matrix W^(1)^ =
[1, -1, 1,1].
\- x~2~ is a generalised hierarchical sequence using the following formula,
selecting s=2 and using the two Golay complementary sequences x~3~ and x~4~ as
constituent sequences. The length of the sequence x~3~ and x~4~ is called n~3~
respectively n~4~.
_\- x~2~(i) = x~4~(i_ mod _s + s*(i_ div _sn~3~)) * x~3~((i_ div _s)_ mod
_n~3~),_ _i_ = 0 ... (_n~3~* n~4~_) - 1.
\- x~3~ and x~4~ are defined to be identical and the length 4 (N^(3)^=
N^(4)^=2) Golay complementary sequence obtained by the delay matrix D^(3)^ =
D^(4)^ = [1, 2] and weight matrix W^(3)^ = W^(4)^ = [1, 1].
The Golay complementary sequences x~1~,x~3~ and x~4~ are defined using the
following recursive relation:
_a_ ~0~(_k_) = δ(_k_) and _b_ ~0~(_k_) = δ(_k_);
_a~n~_(_k_) = _a~n~_ ~-1~(_k_) + _W^(j)^~n~_ · _b~n~_ ~-1~(_k_ -_D^(j)^~n~_);
_b~n~_(_k_) = _a~n~_ ~-1~(_k_) - _W^(j)^~n~_ · _b~n~_ ~-1~(_k_ -_D^(j)^~n~_);
_k_ = 0, 1, 2, ..., 2**N^(j)^ -1;
_n_ = 1, 2, ..., N _^(j)^_.
The wanted Golay complementary sequence x~j~ is defined by a~n~ assuming
n=N^(j)^. The Kronecker delta function is described by δ, k,j and n are
integers.
[Method 2]{.underline}
The sequence y can be viewed as a pruned Golay complementary sequence and
generated using the following parameters which apply to the generator
equations for a and b above:
(a) Let j = 0, N^(0)^ = 8.
(b) [D~1~^0^,D~2~^0^,D~3~^0^,D~4~^0^,D~5~^0^,D~6~^0^,D~7~^0^,D~8~^0^] = [128,
64, 16, 32, 8, 1, 4, 2].
(c) [W~1~^0^,W~2~^0^,W~3~^0^,W~4~^0^,W~5~^0^,W~6~^0^,W~7~^0^,W~8~^0^] = [1,
-1, 1, 1, 1, 1, 1, 1].
(d) For n = 4, 6, set b~4~(k) = a~4~(k), b~6~(k) = a~6~(k).
###### ## Annex B (informative): Uplink modulation for operation on adjacent
frequencies
An example of modulation of the complex-valued chip sequence generated by the
spreading process is shown below in Figure B-1. In Figure B-1, ω~L~ and ω~H~
are the lower and higher assigned channel frequencies.
{width="6.69375in" height="2.7069444444444444in"}
Figure B-1: Uplink modulation for a UE with adjacent primary and secondary
uplink frequencies
###### ## Annex B1 (informative): Uplink modulation for UL CLTD
In the case that UL_CLTD_Enabled is TRUE, modulation of the complex-valued
chip sequence T and T', obtained from channel combining operation for UL CLTD
in section 4.2.4, is shown in Figure B1-1.
Figure B1-1: Uplink modulation when UL_CLTD_Enabled is TRUE
###### ## Annex B2 (informative): Uplink modulation for operation on dual band
frequencies
An example of modulation of the complex-valued chip sequence generated by the
spreading process is shown below in Figure B2-1 for two uplink frequencies in
two distinct bands. In Figure B2-1, ω~B1~ and ω~B2~ are the assigned primary
and secondary uplink channel frequencies in two distinct bands.
Figure B2-1: Uplink modulation for a UE with primary and secondary uplink
frequencies on two different bands
#