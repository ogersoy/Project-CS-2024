# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
SR-VCC has been standardized in Release 8 TS 23.216 [3] to provide seamless
continuity when UE handovers from E-UTRAN to UTRAN/GERAN.
This document contains the results of feasibility study of the requirements
and the alternative solutions to improve the handover performance of SRVCC.
The objective of this study is as follows:
\- Evaluating the performance of current Rel‑8 SRVCC solution;
\- Enhancing the performance of the SR-VCC Flow Break with regard to the
roaming and non-roaming case;
\- Enhancing SR-VCC handover performance while minimizing the impacts on the
network architecture for the directions
\- from EUTRAN to UTRAN/GERAN; and
\- from UTRAN to UTRAN/GERAN.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 22.278: \"Service requirements for the Evolved Packet System
(EPS)\".
[3] 3GPP TS 23.216: \" Single Radio Voice Call Continuity (SRVCC); Stage 2\".
[4] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage
2\".
[5] 3GPP TS 36.133: \"Requirements for support of radio resource management.
[6] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[7] 3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) centralized services\".
[8] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[9] 3GPP TS 36.413: \" Evolved Universal Terrestrial Radio Access (E-UTRA) ;
S1 Application Protocol (S1AP)\".
[10] 3GPP TS 23.272: \"Circuit Switched Fallback in Evolved Packet System;
Stage 2\".
[11] IETF RFC 3264: \"An Offer/Answer Model with the Session Description
Protocol (SDP)\".
[12] 3GPP TS 23.203: \"Policy and charging control architecture\".
[13] 3GPP TS 23.334: \"IP Multimedia Subsystem (IMS) Application Level Gateway
(IMS-ALG) - IMS Access Gateway (IMS-AGW) interface: Procedures descriptions\".
[14] 3GPP TS 23.206: \"Voice Call Continuity (VCC) between Circuit Switched
(CS) and IP Multimedia Subsystem (IMS); Stage 2\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Requirements
## 4.1 General
\- The impact to the existing SRVCC architecture should be minimized.
\- NO impact on UE.
\- The impact to the EPS should be minimized.
\- The impact to the existing SRVCC procedure should be minimized.
## 4.2 Architectural Requirements
Editor\'s Note: This clause will contain the requirements for the enhanced
SRVCC architecture.
\- The solution shall keep backward compatibility to the UE of previous
releases.
\- The solution shall support Local Breakout scenarios according to TS 23.228
[8], with the possibility of having the P-CSCF either in the visited network
or in the home network.
\- The SRVCC enhancement solution shall not negatively affect the SRVCC
emergency call procedures.
## 4.3 SRVCC Performance Requirements
Editor\'s Note: This clause will contain the requirements for the enhanced
SRVCC handover performance.
\- The interruption time of SRVCC is not higher than 300ms as required in TS
22.278 [2], from EUTRAN to UTRAN.
# 5 Performance Analysis of Rel‑8 SRVCC solution
## 5.1 Analysis of SRVCC handover performance from EUTRAN to UTRAN/GERAN
In TS 22.278 [2], the requirement for voice interruption time of a RAT change
is defined, which should also apply to SRVCC:
**\- The RAT change procedure executed to enable service continuity for an
established voice call shall target an interruption time not higher than 300
ms.**
According to TS 23.216 [3], the IMS Session Transfer procedure is executed in
parallel with the Handover from E-UTRAN to UTRAN/GERAN. Such as in clause
6.2.2.1, it is described as:
NOTE 3: Steps 11 (Session Transfer and Update remote end procedure) and 12
(Source IMS access leg release) are independent of step 13(Handover from
E-UTRAN to GERAN procedure).
The procedure after Relocation Preparation procedure is shown in Figure 5.1.1.
To make the analysis simpler and clearer, it is assumed that step a1 is
preformed by MSC enhanced for SRVCC at the same time with step b1, or within a
negligible short period.
Another assumption is that the transmission time for IMS bearers is short
enough to be neglected in this analysis.
Figure 5.1.1: SRVCC Rel-8 from UTRAN (HSPA) to UTRAN/GERAN
The voice downlink media flow is interrupted after step a2 or step b2, and
restored after both step a4 and step b3 are finished. So the interruption time
of the downlink flow is:
  * Td = MAX(Ta1+Ta2+Ta3+Ta4-Tb1-Tb2, Tb3)
The voice uplink media flow is interrupted after step b2, and restored after
both step a4 and step b3 are finished. So the interruption time of the uplink
flow is:
  * Tu = MAX(Ta1+Ta2+Ta3+Ta4-Tb1-Tb2, Tb3)
Step Tb1 and Tb2 happen in the network that the UE currently attaches, with
few signalling nodes and faster signalling processes. It is reasonable to
assume that duration of (Tb1+Tb2) is much shorter than the total duration of
(Ta1+Ta2+Ta3+Ta4) in roaming case (either the UE or the remote is roaming or
both) or the case of the UE and remote are not in the same PLMN.
Then Td and Tu can be simplified as following:
  * Td = MAX(Ta1+Ta2+Ta3+Ta4, Tb3)
  * Tu = MAX(Ta1+Ta2+Ta3+Ta4, Tb3)
So the interruption time is mainly determined by the maximum between the
duration of the IMS SC procedure (Ta1+\~+Ta4) and the duration of the UE
handover procedure (Tb3).
NOTE: For the other cases not mentioned above (e.g. the UE and the remote and
the network entities are in the same PLMN), the duration of (Tb1+Tb2) may not
be much shorter than duration of (Ta1+Ta2+Ta3+Ta4). In this case, the voice
interruption caused by the SRVCC procedures is not so long as that in the
roaming case (Session Transfer part).
Tb3 is specified less than 300 ms according to TS 36.133 [5], and normally is
about 100 ms.
Ta1+Ta2+Ta3+Ta4 represents the transmitting and processing time delay of the
messages for remote update procedure as defined in TS 23.237 [4]. It is not
only dependent on the serving IMS network of the SRVCC UE, but also dependent
on the home IMS network of the SRVCC UE, and the remote network of the remote
end.
If the scenarios below are taken into account, the IMS SC procedure may be
comparatively a long time journey, which means the requirement of 300ms
interruption time can not be fulfilled in a high probability:
  * The call is inter-operator, with more entities involved;
  * The remote users is roaming;
  * The poor performances in any of the networks involved, causing additional delay;
  * The poor performance of the remote end, causing additional delay;
  * The access bandwidth is limited.
The analysis above demonstrates that the performance of SRVCC handover is
mainly dependant on the delay brought by the remote update procedure. In many
scenarios, the requirement for SRVCC handover can not be fulfilled by Rel-8
SRVCC solution.
To provide a comparative handover performance to UTRAN/GERAN network, SR-VCC
handover interruption time should be optimized with all the scenarios listed
above considered.
## 5.2 Analysis of SRVCC handover performance from HSPA to UTRAN/GERAN
Editor\'s Note: This subclause will contain the performance analysis of Rel-8
SRVCC in the scenario that the UE handovers from HSPA to UTRAN/GERAN.
## 5.3 Analysis of call drop probability in SRVCC
According to TS 23.216 [3], the MSC Server sends the SRVCC PS to CS Response
independently from the execution of the Session Transfer procedure and the
source access leg release performed by the SCC AS. This ensure that the
handover command is send to the UE and the UE tunes to the target access
without waiting for the IMS procedures to complete. Hence the time is
minimized between decision for handover in the eNB / NB and the actual sending
of the handover command (during this time span also resources in the target
access are requested). This follows the principle in both CS and PS handover
operations to avoid delaying the handover command to minimize the risk of call
drop due to loss of coverage.
NOTE: The risk of call drop depends on the velocity of the UE but also on
other factors influencing the radio coverage.
# 6 Alternatives
## 6.1 Alternative 1 - enhancement using delay prediction
### 6.1.1 Sub-alternative #1 -- prediction in MSC server
#### 6.1.1.1 Architecture Reference Model
Editor\'s Note: This clause will contain the architecture reference model for
the enhanced SRVCC.
This alternative will not change the reference architecture of original SRVCC,
i.e. the architecture reference model is the same as TS 23.216 [3].
#### 6.1.1.2 Functional Entities
Editor\'s Note: This clause will define the functionalities of functional
entities for the enhanced SRVCC.
##### 6.1.1.2.1 MSC Server
MSC Server should be enhanced with the following capabilities besides the
functions defined in TS 23.216 [3]:
1\. When sending Session Transfer Initiation message (e.g. INVITE message),
MSC Server shall not include the SDP information of MGW. MSC Server shall
include it in the latter ACK message;
2\. MSC Server shall be predefined with the average time span for itself to
send the message related to CS handover to the local UE.
3\. MSC Server shall initiate and manage a timer, which is used to synchronize
the session transfer procedure and the CS handover procedure to cause the flow
breaks caused by them to overlap, and so minimize the voice break.
Editor\'s Note 1: It is FFS whether the scenario that MSC Server does not
support SIP interface to ICS/SCC AS should be considered. It should be further
checked if SIP interface is mandatory for MSC Server enhanced for SRVCC in TS
23.216 [3].
Editor\'s Note 2: Whether the offerless INVITE request could be used in IMS is
FFS (should be checked).The impact of offerless INVITE request on UE and PCC
is TBD.
Editor\'s Note 3: It is FFS whether a round trip estimate based on one sample
will be adequate for the algorithm. Since the main part of the round trip time
is contributed by the SIP node that processing SIP messages and the estimate
does not need to be very perfect, it shoud be further checked if one round
trip is enough for this alternative.
Editor\'s Note 4: The delay in sending the handover command may cause failure
of the handover under high (speed) mobility conditions. How to shorten the
delay is FFS. Alternative 3, in clause 6.3, has been proposed as a way to
address this for new devices. Whether additional failures are likely to occur
is for further study.
#### 6.1.1.3 Message Flows
Editor\'s Note: This clause will contain the message flows for the enhanced
SRVCC.
Figure 6.1.3.1: SRVCC enhancement alternative using synchronization from
E-UTRAN to GERAN without DTM/PSHO support
The SRVCC enhancement alternative using synchronization has a similar message
flow as the original SRVCC except for some steps.
The message flow is described as follows:
**Step 1 to step 9:** These steps are the same as step 1 to step 9 in figure
6.2.2.1-1 of TS 23.216 [3].
**Step 10:** MSC Server sends INVITE message with the STN-SR towards IMS/SCC
AS without the SDP information of MGW. In addition, MSC Server stores the time
(marked as T4) when it sends the INVITE request.
**Step 10a:** SCC AS forwards a re-INVITE request without SDP information to
remote UE based on the INVITE request at step 10. The remote UE responds a 200
OK message with SDP information of the remote UE to SCC AS after processing
the re-INVITE request.
**Step 11:** After communicating with the remote UE, the SCC AS responds MSC
Server by 200 OK message with SDP information of the remote UE. The MSC Server
stores the time (marked as T5) when it receives the 200 OK message. At this
point the media flow of the ongoing session is still connected.
**Step 12 and step 13:** When MSC Server receives the 200 OK message, it will
calculate the duration (marked as P1) that it has taken to send SIP message
from MSC Server to the remote UE based on T4 and T5. For example P1 could be
half of (T5-T4). On the other hand, it is assumed that the operator has
predefined the average time span (marked as P2) for MSC Server to send message
(related to CS handover) to the local UE.
If P1 is larger than P2, MSC Server set up a Timer whose value is P1-P2. MSC
Server will execute step 12 (send ACK message with SDP information of MGW to
SCC AS) and step 13 (start the Timer) simultaneously. Only after the Timer
expires, MSC Server will execute step 14 (send PS to CS Response message to
MME to start CS handover).
If P2 is larger than P1, the value of the Timer will be P2-P1. MSC Server will
send PS to CS Response message to MME to start CS handover and start the Timer
simultaneously. Only after the Timer expires, MSC Server will send ACK message
with SDP information of MGW to SCC AS. In other words, if P2 is larger than
P1, step 14 will be executed after step 11, the Timer will be started after
step 14, and after the Timer expires, step 12 will be executed.
If P1 is equal to P2, MSC Server will not set up the Timer and perform step 12
and step 14 simultaneously.
**Step 14 to 16:** These steps are the same as step 13 to step 15 in 6.2.2.1-1
of TS 23.216 [3].
**Step 17 to 18:** These steps are the similar to step 11 to step 12 in
6.2.2.1-1 of TS 23.216 [3]. It should be noticed that only after SCC AS
receives ACK message, step 17 will be executed. At Step 17, SCC AS should
forward ACK message to the remote UE based on the ACK message at step 12.
**Step 19 to 26:** These steps are the same as step 16 to step 23 in 6.2.2.1-1
of TS 23.216 [3].
#### 6.1.1.4 A way using Pre-handover optimization to reduce the call drop
probability
Pre-handover optimization in Annex A could be used to reduce the call drop
probability. The timer in the UE may not apply here for alternative 1.
### 6.1.2 Sub-alternative #2 - prediction in SCC AS
#### 6.1.2.1 Architecture Reference Model
Editor\'s Note: This clause will contain the architecture reference model for
the enhanced SRVCC.
The key difference in this sub-alternative compared to the previous sub-
alternative is that this alternative predicts the signalling delay for the
remote leg update in two hops; the hop from SCC AS to the far end is measured
in SCC AS and the hop from MSC Server to SCC AS is measured in MSC Server.
This means this there is no need for the use of offerless INVITE with this
sub-alternative. The SCC AS indicates the estimated delay to the MSC Server.
The timer usage in MSC Server is similar to sub-Alternative 1, that is the MSC
Server starts a timer correspondent to the estimated delays to synchronize the
transfer procedures.
This sub-alternative will not change the reference architecture of original
SRVCC, i.e. the architecture reference model is the same as TS 23.216 [3].
This sub-alternative requires I2 interface in the MSC Server.
This sub-alternative avoids the issues related to the offerless INVITE, i.e.
the delay in overall SRVCC procedure due to three-way negotiation with the
remote leg,, and possible impact to the remote UE. For the same reason, there
is no need to use Alternative 3 (pre-handover optimization) with this sub-
alternative, which would have an impact to the local UE. This means this sub-
alternative can improve performance also with R8 SRVCC UE.
#### 6.1.2.2 Functional Entities
Editor\'s Note: This clause will define the functionalities of functional
entities for the enhanced SRVCC.
##### 6.1.2.2.1 SCC AS
SCC AS should be enhanced with the following capabilities besides the
functions defined in TS 23.216 [3] and TS 23.237 [4]:
1\. SCC AS measures the delays in the SIP signalling in the session
establishment phase. The measurement is done for each originating and
terminating session which may be a subject for SRVCC. The measurement can be
based on the delay between the SIP request and response in the session setup,
such as UPDATE and 200 OK for UPDATE, or the 200 OK for INVITE and ACK for 200
OK. This is the estimated delay for the SIP signalling for the remote leg
update, and SCC AS stores the value for each anchored session. The initial
INVITE is not used for delay measurement, because the delay is significantly
higher than for re-INVITE, due to paging, HSS query, etc.
Editor\'s Note: It is FFS whether a round trip estimate based on one sample
will be adequate for the algorithm. Since the main part of the round trip time
is contributed by the SIP node that processing SIP messages and the estimate
does not need to be very perfect, it shoud be further checked if one round
trip is enough for this alternative.
2\. SCC AS returns the estimated delay to the MSC Server at the domain
transfer procedure.
##### 6.1.2.2.2 MSC Server
MSC Server should be enhanced with the following capabilities besides the
functions defined in TS 23.216 [3]:
1\. MSC Server shall be predefined with the average time span for itself to
send the message related to CS handover to the local UE.
2\. MSC Server shall be able to measure the delay from MSC Server to SCC AS in
domain transfer.
3\. MSC Server shall be able to receive the estimated delay from SCC AS in the
domain transfer procedure, and initiate and manage a timer, which is used to
synchronize the session transfer procedure and the CS handover procedure to
cause the flow breaks caused by them to overlap, and so minimize the voice
break.
#### 6.1.2.3 Message Flows
Editor\'s Note: This clause will contain the message flows for the enhanced
SRVCC.
Figure 6.1.2.3.1: SRVCC enhancement alternative using synchronization from
E-UTRAN to GERAN without DTM/PSHO support
The SRVCC enhancement alternative using synchronization has a similar message
flow as the original SRVCC except for some steps.
The message flow is described as follows:
Prior to Step 1, the SCC AS has measured the delay in SIP signalling in the
remote leg.
**Step 1 to step 9:** These steps are the same as step 1 to step 9 in figure
6.2.2.1-1 of TS 23.216 [3].
**Step 10:** MSC Server sends INVITE message with the STN-SR towards IMS/SCC
AS. In addition, MSC Server stores the time (marked as T4) when it sends the
INVITE request.
**Step 10a:** SCC AS returns the estimated delay for the remote leg update to
the MSC Server.
Editor\'s Note: It is FFS how to ensure the message 10a is routed to the same
MSC server.
**Step 11:** SCC AS updates the remote leg as with the current procedures in
TS 23.237 [4].
**Step 12:** When MSC Server receives the estimated delay, it will calculate
the duration that it has taken to send a SIP message from MSC Server to the
SCC AS to the reception of the response which carries the estimated delay.
Half of this is the signalling delay from MSC Server to SCC AS (P1). SCS AS
has returned the delay from SCC AS to the remote UE (P2). On the other hand,
it is assumed that the operator has predefined the average time span for MSC
Server to send message (related to CS handover) to the local UE (P3). As
described in clause 5 in this document, it is assumed P2+P3 is significantly
longer than P1. It is further assumed here that the P2 is greater than P3+P1.
The MSC starts a timer for the duration of P2-P3-P1. That is, the remote leg
update (as measured by SCC AS), decreased by the predefined delay for local
end transfer, decreased by the signalling delay from MSC Server to SCC AS
(half of the measured round trip time). After the Timer expires, MSC Server
will execute step 13 (send PS to CS Response message to MME to start CS
handover). If P2 is not greater than P3+P1, the MSC Server does not start a
timer but executes the Step 13 immediately.
**Step 13 to 15:** These steps are the same as in TS 23.216 [3].
**Step 16:** The remote UE receives the remote leg update and responds a 200
OK message to SCC AS after processing the re-INVITE request.
**Step 17:** After communicating with the remote UE, the SCC AS responds MSC
Server by 200 OK message.
**Step 18:** The SCC AS releases the source access leg as described in TS
23.237 [4].
**Step 19 to 26:** These steps are the same as step 16 to step 23 in 6.2.2.1-1
of TS 23.216 [3].
As a result of the procedure, the Steps 16 and 19 should occur very close to
each other.
## 6.2 Alternative 2 - Serial Handover
### 6.2.1 Architecture Reference Model
The architecture model of Rel-8 SRVCC is not affected by this alternative.
### 6.2.2 Functional Entities
The remote end and MSC server of Rel-8 SRVCC are affected by this alternative.
### 6.2.3 Message Flows
Editor\'s Note: This clause will contain the message flows for the enhanced
SRVCC.
Serial Handover means the RAT handover is performed after the IMS Service
Continuity procedure completed. The only difference from Rel-8 SRVCC is that
the MSC Server enhanced for SRVCC sends Handover response with CS resource to
MME when the IMS Service Continuity Procedure is completed.
Figure 6.2.3.1: SRVCC using Serial Handover from UTRAN (HSPA) to UTRAN/GERAN
Figure 6.2.3.2 shows the main steps for serial handover. In this figure, step
b1 follows step a4.
Figure 6.2.3.2: Analysis of SRVCC using Serial Handover
Upon receiving an offer with MGW SDP in step a2, the remote end switches the
downlink voice media stream towards the MGW (as specified in IETF RFC 3264
clause 8.3.1), and then the downlink media stream is interrupted until step b3
is done. So the interruption time of the downlink media stream is:
\- Td = Ta3+Ta4+Tb1+Tb2+Tb3
The remote end will not stop receiving the uplink stream from the original IMS
Bearer until it receives the media data from the new uplink media stream
arrives (as specified in IETF RFC 3264 clause 8.3.1).
Editor\'s Note: It is FFS whether a typical terminal implementation on the
remote end would keep listening on the old address of the offerer once it has
received a new offer.
NOTE 1: The remote end may not support the capability. In that case, for the
interruption time, there\'s no difference between the uplink media stream and
the downlink media stream.And after step b2, the uplink media steam is
interrupted until step b3 is done. So the interruption time of the uplink
media stream is:
\- Tu = Tb3
NOTE 2: The assumption here is that the in-flight uplink media stream packets
transmitted from the old source (i.e. on the UE\'s IMS access leg) are not
blocked by the PCEF of the remote party, once the PCEF of the remote party has
authorised the new SDP offer. If this assumption is not valid, for the
interruption time, there\'s no difference between the uplink media stream and
the downlink media stream.
Given that Tb1 and Tb2 are much shorter than Ta3 and Ta4, especially in the
roaming case (either the UE or the remote or both) or in the case that the UE
and the remote end belong to different operators, the Td is simplified as
following:
\- Td = Ta3+Ta4+ Tb3
\- Tu =Tb3
Comparing to the analysis in clause 5.1, the downlink interruption time is
very close to that of Rel-8 SRVCC. The uplink interruption time depends on the
interruption time of RAT handover, and is much shorter than Rel-8 SRVCC under
the remote end assumption and the PCEF assumption described previously (see
NOTE 1 and NOTE 2 above).
## 6.3 Void
## 6.4 Alternative 4 - Media anchor in the serving network
### 6.4.1 Architecture Reference Model
No change to the current architecture is proposed.
### 6.4.2 Functional Entities
No additional functional entities are proposed.
However, a new functionality is proposed to be defined, i.e., Visited Access
Transfer Functionality (VATF), that could be handled by the MSC Server or
alternatively by the P-CSCF (co-located with IMS ALG). In the following, the
example usage is mainly when the VATF is handled by the MSC Server. The VATF
stays in the session path for the duration of the call and it supports the MSC
Server assisted mid-call feature as specified in TS 23.237 [4] for additional
held sessions and conference calls with the difference that no additional
information needs to be exchanged between SCC AS and MSC Server / VATF during
the transfer as the session anchor is in the VATF.
### 6.4.3 Message Flows
#### 6.4.3.1a Originating sessions in PS
The VATF is included from the P-CSCF in the visited network. This scenario
requires that the P-CSCF is in the visited network.
Figure 6.4.3.1a-1: Originating session that uses only PS media
1\. UE-1 initiates an IMS multimedia session to UE-2 and uses only PS media
flow(s). The request is forwarded to S-CSCF following normal IMS session set
up procedures.
2\~4. The P-CSCF detects the IMS multimedia session and based on the local
policy it anchors the session in the VATF prior forwarding the INVITE to the
S-CSCF. The P-CSCF finds the correct VATF to route to as specified in clause
6.4.5. If the VATF is included in the P-CSCF, steps 2 and 4 are not needed.
NOTE 1: The anchoring means that the access leg is between the UE-1 and the
VATF, while the remote leg is between the VATF and the remote UE (UE-2). This
also implies that when an access leg update is done, this needs to be sent to
the VATF. A remote leg update is always initiated by the VATF. The SCC AS will
not use the access transfer procedures and hence is only used for terminating
domain selection.
A MGW is also allocated for the session by the MSC/VATF. The MGW will not
insert codecs.
5-6. The P-CSCF routes the INVITE to the S-CSCF and further to the SCC AS. The
SCC AS includes the C-MSISDN for the UE-1 into the response, to allow the VATF
to have a correct correlation identifier.
7\. The SCC AS completes the session setup to UE-2 and sends a response to
UE-1. The procedure here is the same as depicted in TS 23.237 [4].
The selected VATF/MSC will act as anchor MSC for the remainder of the call.
#### 6.4.3.1b Termination sessions in PS
The VATF is included from the P-CSCF in the visited network. This scenario
requires that the P-CSCF is in the visited network.
> Figure 6.4.3.1b-1: Terminating session that uses only PS media
1\. UE-2 initiates an IMS multimedia session to UE-1 and uses only PS media
flow(s). The request is forwarded to S-CSCF following normal IMS session set
up procedures.
2-4. The S-CSCF routes the INVITE to the SCC AS. The SCC AS performs T-ADS and
then session setup continues towards P-CSCF.
5\~7. The P-CSCF detects the IMS multimedia session and based on the local
policy it anchors the session in the VATF. The P-CSCF finds the correct VATF
to route to as specified in clause 6.4.5. If the VATF is included in the
P-CSCF, steps 5 and 7 are not needed.
NOTE 1: The anchoring means that the access leg is between the UE-1 and the
VATF, while the remote leg is between the VATF and the remote UE (UE-2). This
also implies that when an access leg update is done, this needs to be sent to
the VATF. A remote leg update is always initiated by the VATF. The SCC AS will
not use the access transfer procedures and hence is only used for terminating
domain selection.
A MGW is also allocated for the session by the MSC/VATF. The MGW will not
insert codecs.
8\. The P-CSCF routes the INVITE to UE-1 which accepts the INVITE **for the
bidirectional speech media**.
NOTE 2: In case the UE-1 returns a response to IMS that bi-directional speech
is rejected as specified in TS 23.237 in clause 6.2.2.4, the VATF will release
the allocated MGW. The VATF may remove itself from the session path.
The selected VATF/MSC will act as anchor MSC for the remainder of the call.
#### 6.4.3.2 PS -- CS Access Transfer
This clause describes the main differences with existing SRVCC procedures.
Some of the procedures that are not impacted have been left out for clarity of
the flow. The procedure requires that the MME will select the VATF/MSC
included during session establishment when establishing Sv.
Figure 6.4.3.2-1: PS to CS access transfer
1\. Procedures specified in TS 23.216 [3], clause 6.2.2.1 result in that the
MME will establish Sv towards an MSC Server enhanced for SRVCC. The MME
selects the same MSC Server for Sv as for SGs, which is the VATF/MSC included
during session establishment. The MSC Server correlates the incoming PS to CS
Handover request with the anchored session using the C-MSISDN obtained when
anchoring the session. The MSC Server updates the media anchoring to forward
the media towards the CS access. At this point, no extra signalling is needed
within the IMS network**. The MGW may insert codec towards the target access
leg if needed. In case the target cell is served by a different MSC Server,
then the VATF/MSC will act as an anchor MSC during SRVCC as specified in TS
23.216 [3].**
NOTE: The MGW can for a certain period of time send media both on the source
access leg and the new target access leg to minimize the interruption delay
further.
2\. The VATF informs the SCC AS that the transfer has taken place. If the Gm
reference point is not retained upon PS handover procedure, the Source Access
Leg is released.
### 6.4.4 Deployment Alternatives
Different deployment alternatives for the VATF are possible, each of which
requiring different type of support in the node(s) and different type of
functionality:
A) VATF included in MSC Server enhanced for SRVCC (as described in clause
6.4.3):
\- The same MSC Server / VATF has to be selected during session setup and by
the MME / SGSN for Sv.
B) VATF included in MSC Server and co-located with / included in P-CSCF
\- The MSC Server / VATF is automatically included into the originating and
terminating session path;
\- MME / SGSN needs to select the same VATF for Sv;
\- VATF / MSC Server needs likely to play the role of an anchor MSC (target
cell served by target MSC different to VATF).
C) VATF included in P-CSCF (no MSC Server included)
\- Requires media anchoring functionality (control of MGW) in the P-CSCF, e.g.
by co-locating with IMS ALG;
\- VATF automatically included into the session path;
\- Session transfer request from MSC Server enhanced for SRVCC needs to be
routed to VATF / P-CSCF.
Some of these deployment alternatives can also be combined with each other:
\- A + B: VATF in MSC Server and in P-CSCF (with MSC Server).
\- A + C: VATF in MSC Server and in P-CSCF (without MSC Server.
In these cases the MSC Server enhanced for SRVCC needs to determine whether it
is having the VATF role for this session (A) and if not the session transfer
requests needs to be send to the VATF (B or C).
### 6.4.5 Selection of VATF
Selection of VATF for originated and terminated sessions
  * For deployment alternatives A & B:
\- Both P-CSCF and serving node (MME / SGSN) use the same (standardized)
selection algorithm to find the MSC Server / VATF in the VPLMN. MME / SGSN may
include selected MSC Server for Sv into the context exchange with other MME /
SGSN.
  * For deployment alternative C: included in P-CSCF
Selection of VATF during SRVCC:
  * For deployment alternative A & B, the MME selects the MSC Server / VATF for SRVCC.
\- In case of optimized call setup, both P-CSCF and serving node (MME / SGSN)
use the same (standardized) selection algorithm to select the VATF in the
VPLMN.
  * For deployment alternative C, the MSC Server routes the session transfer request to the VATF. This can be ensured by one of the following methods:
\- The MSC Server receives from the MME a visited STN-SR (vSTN-SR) that is
suitable to route to the VATF. This can be achieved by one of the following
methods:
\- See e.g. clause 6.11 for a method to allocate the vSTN-SR during session
setup, if needed, and to push the vSTN-SR from the VATF to the HSS and from
there to the MME/SGSN.
\- The VATF allocates the vSTN-SR when the user registers in the IMS. The
vSTN-SR is provided to the IMS and via 3^rd^ party registration to the SCC AS.
The SCC AS provides the vSTN-SR to the HSS, which in turn updates the MME /
SGSN.
\- The MSC Server / VATF can receive the address of the P-CSCF/VATF from the
IMS (e.g. during IMS registration or using an event package). This requires
that the same MSC Server is selected for SGs and for Sv and that the MSC
Server is enhanced for ICS.
### 6.4.6 Maintaining IMS registration
As a prerequisite for SRVCC, the UE is IMS registered over PS. To avoid that
the IMS registration expires during an ongoing voice call over GERAN / UTRAN
after SRVCC, the MSC Server / VATF instructs the P-CSCF as follows:
\- While the voice call is ongoing on the CS access leg (to/from the VATF),
the P-CSCF shall update the local registration timer of the PS access leg such
that it does not expire during the ongoing call.
\- If needed, the P-CSCF will also further instruct the S-CSCF to update its
registration timer for the PS access leg such that it does not expire during
the ongoing call.
After releasing the voice call(s), and if needed, the UE itself updates the
IMS registration, i.e., in case the original IMS registration timer on the UE
has already expired, the UE will immediately perform re-registration.
NOTE: If the UE\'s IMS registration timer expires locally during the ongoing
call, the UE ignores this until the call is completed and is able to perform a
re-registration.
## 6.5 Alternative 5 - Remote update optimization
### 6.5.1 Architecture Reference Model
The architecture model of Rel-8 SRVCC is not affected by this alternative.
### 6.5.2 Functional Entities
Editor\'s Note: This clause will define the functionalities of functional
entities for the enhanced SRVCC.
### 6.5.3 Message Flows
Based on Serial Handover in Alternative 2, an optimization to Remote Update
procedure is shown in Figure 6.5.3-1.
Figure 6.5.3-1: Remote update optimization to SRVCC using Serial Handover
a1. MSC sends session transfer request INVITE to SCC AS with MGW SDP in SDP
offer after CS handover preparation.
a2. SCC AS stores the SDP information of MGW and sends media update request
Re-INVITE to remote end without SDP.
a3. Remote end responds 200 OK to SCC AS with remote end SDP in SDP offer,
which carries the using SDP and all media formats supported by the remote end.
Editor\'s note: It is FFS how SCC AS can avoid allocating MRF to successfully
complete the SDP offer/answer transactions from step a1 to a5.
Upon receiving remote end SDP, SCC AS shall:
\- match the m lines between MGW SDP and remote end SDP by media type, and
find the m line of the voice media stream;
\- select the common supported voice media formats from MGW SDP and remote end
SDP;
\- select the most preferred format among the common supported voice media
formats;
\- generate remote end SDP in step a4 and MGW SDP a5 using the selected media
formats and the most preferred format.
a4. SCC AS responds 200 OK to MSC with remote end SDP in SDP answer.
a5. SCC AS sends ACK request to remote end with MGW SDP in SDP answer.
b1. After Session Transfer to IMS is completed, MSC sends PS to CS Handover
response to EPS.
b2. EPS sends Handover Command to UE.
b3. UE tunes to the target CS access.
The voice downlink media stream is interrupted once the remote end receives
SDP answer in step a5, or the SRVCC UE performs step b3. It is restored until
both step a5 and step b3 are completed. So the interruption time of the
downlink media stream is:
\- Td= Ta5-(Ta4+Tb1+Tb2）when step b3 is completed before remote media
switching is done in step a5, i.e. Ta5>Ta4+Tb1+Tb2+Tb3; or
\- Td=(Ta4+Tb1+Tb2+Tb3)-Ta5 when step b3 is done after remote media switching
is done in step a5, i.e. Ta4+Tb1+Tb2>Ta5; or
\- Td=Tb3 when step 3 is done in parallel with remote media switching in step
a5.
So the interruption time of the downlink media stream is equal to Tb3 at the
best case, and shorter than those in Rel-8 SRVCC and Alternative Serial
Handover.
During remote media switching, the remote end will prepare to receive media
with old format for a brief time upon receiving the SDP answer in step a5 (as
specified in IETF RFC 3264 clause 8.3.2). The voice uplink media stream is
interrupted after step b2, and restored after step both b3 and step a5 are
done. So the interruption time of the uplink media stream is:
\- Tu = Tb3
NOTE 1: The remote end may not support the capability. In that case, for the
interruption time, there\'s no difference between the uplink media stream and
the downlink media stream.
NOTE 2: The assumption here is that the in-flight uplink media stream packets
transmitted from the old source (i.e. on the UE\'s IMS access leg) are not
blocked by the PCEF of the remote party, once the PCEF of the remote party has
authorised the new SDP offer. If this assumption is not valid, for the
interruption time, there\'s no difference between the uplink media stream and
the downlink media stream.
Comparing to Alternative Serial Handover, the interruption time is further
optimized.
## 6.6 Void
## 6.7 Void
## 6.8 Alternative 8 -- SR-VCC Enhancement using anchoring in the home network
### 6.8.1 Sub-alternative #1: MRF selective media anchoring controlled
directly by the SCC AS
In this alternative, when a multimedia session is established, the SCC AS
requests resources from an MRF for the voice media flow. An MRFP is then
introduced in the media path between the local party and the remote one. It
will act as the anchor point for the voice media flow, and the remote end will
never see that change throughout the call.
When the SRVCC procedure starts, the SCC AS first instructs the MRFC to start
bi-casting to the source destination point (UE-1 under LTE coverage) and to
the target destination point (as described by the MGW SDP). At the time the UE
has tuned to the target access, the SCC AS instructs the MRFP to stop sending
media to the source access (i.e. LTE).
It should be noted that the mechanism which allows the SCC AS to anchor some
or all of the media in an MRFP to hide changes to the remote end and to allow
for bi-casting could be useful, not only in the case of SRVCC but more
generally in all session continuity and Inter-UE session cases.
NOTE: This solution has the limitation that it does not allow OMR from the
visited network.
#### 6.8.1.1 Architecture Reference Model
Editor\'s Note: This clause will contain the architecture reference model for
the enhanced SRVCC.
Figure 6.8.1-1: Overview of updated architecture
#### 6.8.1.2 Functional Entities
Editor\'s Note This clause will define the functionalities of functional
entities for the enhanced SRVCC.
No additional functional entities are introduced in addition to those already
defined in TS 23.292 [7] and TS 23.228 [8]
#### 6.8.1.3 Message flows
Editor\'s Note: This clause will contain the message flows for the enhanced
SRVCC
The following call flows show how this can be implemented.
##### 6.8.1.3.1 Call origination
Figure 6.8.1.3.1-1: Call origination
1\. UE-1 initiates a multimedia session to UE-2 over PS. The request is
forwarded to the S-CSCF of UE-1 following normal IMS session set up
procedures.
2\~3. The service logic with iFC causes the request to be forwarded to the SCC
AS for anchoring the sessions to enable Session Transfer.
4\. The SCC AS anchors the session and determines that part of the media needs
to be anchored in an MRFP (the voice component). It therefore interacts with
the MRFC/MRFP to do so.
5\. The SCC AS sends an INVITE towards the remote party through the S-CSCF.
The SDP in that message may reuse part of the SDP received from UE-1: in the
example of this sequence, only the voice component is anchored in the MRFP,
while for the remaining media components, the SDP information provided by UE-1
is used.
6\. The S-CSCF then forwards the INVITE towards the remote party.
7\. The session setup is completed, as per TS 23.228 [8].
##### 6.8.1.3.2 Call termination
Figure 6.8.1.3.2-1: Call termination
1\. UE-2 initiates a voice IMS session to UE-1 over PS. The request is
forwarded to the S-CSCF of UE-1 following normal IMS session set up
procedures.
2\~3. The service logic with iFC causes the request to be forwarded to the SCC
AS for anchoring the sessions to enable Session Transfer.
4\. The SCC AS anchors the session and determines that part of the media needs
to be anchored in an MRFP (the voice component). It therefore interacts with
the MRFC/MRFP to do so.
5\. The SCC AS sends an INVITE towards UE-1 through the S-CSCF. The SDP in
that message may reuse parts of the SDP received from the remote party: in the
example of this sequence, only the voice component is anchored in the MRFP,
while for the remaining media components, the SDP information provided by the
remote party is used.
6\. The S-CSCF then forwards the INVITE towards UE-1.
7\. The session setup is completed, as per TS 23.228 [8],.
##### 6.8.1.3.3 SRVCC procedure
This clause describes the enhanced PS to CS access transfer procedure.
**NOTE: To minimize the voice break in the best way, this procedure should
take place before the radio handover itself, i.e. the MSC should delay the
sending of the PS to CS response to the MME or the SGSN until after the IMS
part of the procedure (described in this section, up to step 5 in the figure
below) has been performed. This is however not mandatory for this solution to
improve the performance compared to release 8 SRVCC.**
Figure 6.8.1.3.3-1: Enhanced SRVCC procedure
1 Procedures specified in TS 23.216, clause 6.2.2.1 result in an INVITE to be
sent with an STN-SR indicating use of SRVCC procedures for Access Transfer to
CS access. The MSC Server enhanced for SRVCC includes the C‑MSISDN as calling
party number.
2 Standard procedures are used at S-CSCF for routing of the INVITE to the SCC
AS.
3 The SCC AS uses the STN-SR to determine that Access Transfer using SRVCC is
requested. The SCC AS may retrieve the C‑MSISDN from the HSS. The SCC AS is
able to identify the correct anchored session.
4 The SCC AS interacts with the MRF for the media anchored in the MRF to be
sent to the MGW from now on, sends then an INVITE to the MRFC, including the
call-reference-URI, as well as the SDP of the MGW. The SCC AS could either
instruct the MRF to send the media to the MGW only, or to bi-cast to both the
MGW and the source connection point (the IP address and port of the UE on the
source access). In case it decides that bi-casting is to be performed, the SCC
AS starts a supervision timer for the bi-casting.
5a If the Gm reference point is retained upon PS handover procedure then:
5a-1 The UE sends a Re-INVITE via the PS access to update the remaining non-
voice media flow(s) associated with the recently added active session. If the
UE is using ICS capabilities, this Re-INVITE also adds Gm service control to
the active session and the UE subsequently sends Re-INVITEs for any remaining
inactive bi-directional speech sessions that are to be transferred.
5a-2 Standard procedures are used at S-CSCF for routing of the Re-INVITE(s) to
the SCC AS.
5a-3 In case the MRF was instructed to bi-cast in step 4, t he SCC AS detects
that the Re-INVITE is an update of the session for whose speech is currently
being bi-cast. It uses this as a signal to stop bi-casting, if the supervision
timer for bi-casting has not yet expired. The SCC AS interacts with the MRF to
have it stop bi-casting.
5a-4 The SCC AS updates the Remote Leg if needed.
5b If the Gm reference point is not retained upon PS handover procedure, or if
there was no other non-voice media flow(s) in the IMS session than the voice
which was transferred to the target access, then:
5b-1 The Source Access Leg is released as specified in TS 23.237 [3], clause
6.3.1.6.
5b-2 In case the MRF was instructed to bi-cast in step 4, when the supervision
timer for bi-casting expires, the SCC AS interacts with the MRF to have it
stop bi-casting.
### 6.8.2 Sub-alternative #2: Selective media anchoring controlled by a node
other than the SCC AS
This sub-alternative leverages the fact that for MMTel calls, the involvement
of an MRF and/or a TrGW in the home network could be required due to the fact
that transcoding is required or due to operator policies because the called
party does not belong to the same operator as the calling party.
At call set up, based on operator policies and on information in the received
INVITE message (for instance permitting to the AS to know whether the called
user has the same home operator as the calling user), that TAS decides whether
an MRFC/MRFP needs to be involved in the call for the purpose of anchoring it.
It is assumed that in the cases where the TAS does not involve an MRF, an IBCF
will be involved.When the SRVCC procedure starts and the SCC AS initiates the
remote leg update, it may indicate in the message sent towards the remote end
that bi-casting is desirable for some time.
When the TAS receives that message, if it has involved an MRFC/MRFP at call
setup, it will either ask it to start bi-casting in case a \"bi-casting
desirable\" indication was included in the message, or simply update the MRF
to have it send media to the MGW from now on..
Otherwise, it will process the message and send an INVITE (including the \"bi-
casting desirable\" indication if received) towards the remote end. The IBCF
down the path will then receive the message, and it will either configure the
TrGW to start bi-casting in case a \"bi-casting desirable\" indication was
included in the message, or simply update the TrGW to have it send media to
the MGW from now on.
NOTE: This solution has the limitation that it does not allow OMR from the
visited network.
#### 6.8.2.1 Architecture Reference Model
Editor\'s Note: This clause will contain the architecture reference model for
the enhanced SRVCC.
Figure 6.8.2.1-1: Overview of updated architecture
#### 6.8.2.2 Functional Entities
Editor\'s Note: This clause will define the functionalities of functional
entities for the enhanced SRVCC.
No additional functional entities are introduced in addition to those already
defined in TS 23.292 [7] and TS 23.228 [8].
#### 6.8.2.3 Message flows
Editor\'s Note: This clause will contain the message flows for the enhanced
SRVCC.
The following call flows show how this could be implemented.
##### 6.8.2.3.1 Call origination
Figure 6.8.2.3.1-1: Call origination
1 UE-1 initiates a multimedia session to UE-2 over PS. The request is
forwarded to the S-CSCF of UE-1 following normal IMS session set up
procedures.
2\~3 The service logic with iFC causes the request to be forwarded to the SCC
AS for anchoring the sessions to enable Session Transfer.
4 The SCC AS anchors the session
5 The SCC AS issues an INVITE through the S-CSCF towards the remote end.
6\~7 The service logic with iFC causes the request to be forwarded to the
AS/MRFC.
**Alternative #1:**
8a The TAS decides (based on e.g. operator policies, content of the Request-
URI...) that it needs to anchor the session and the media using an MRFC/MRFP.
It then parses the SDP UE-1 and determines that MRFP anchoring is required for
the voice component of the multimedia session.
8b Session and media anchoring is performed by the TAS in the MRF.
8c\~8d The TAS sends an INVITE, of which the SDP is built on the SDP received
from UE-1 in step 7, and on information received from the MRF in step 8b. That
INVITE message is forwarded to the remote party through the S-CSCF.
8e The session setup is completed, as per 23.228, including updating the MRF
with the voice component connection information and ports for the remote
party.
**Alternative #2:**
9a The TAS decides (based on e.g. operator policies, content of the Request-
URI ...) NOT to anchor the session and the media using an MRFC/MRFP. In the
example of this sequence, the basis of that decision is that the call is
destined to a UE belonging to another operator, and that the signalling (resp
the media) will therefore go through an IBCF (resp. a TrGW) which will be
possible to use as an anchor in case of SRVCC handover.
9b\~9c The TAS sends an INVITE, of which the SDP is built on the SDP received
from UE-1 in step 7. That INVITE message is routed to IBCF by the S-CSCF.
9d The IBCF anchors the session and involves a TrGW for anchoring the media.
9e The IBCF sends an INVITE towards the remote party. The SDP included in that
INVITE contains the information related to the TrGW as configured in step 9d.
9f The session setup is completed, as per 23.228.
##### 6.8.2.3.2 Call termination
Figure 6.8.2.3.2-1: Call termination
1 UE-2 initiates a voice IMS session to UE-1 over PS. The request is forwarded
to the S-CSCF of UE-1 following normal IMS session set up procedures.
2\~3 The service logic with iFC causes the request to be forwarded to the TAS
for providing call terminating services.
**Alternative #1:**
4a The TAS decides (based on e.g. operator policies, Via-header indicating
that the INVITE has not traversed any node in UE-1\'s home network before
reaching the TAS...) that it needs to anchor the session and the media using
an MRFC/MRFP. It then parses the SDP2 and determines that MRFP anchoring is
required for the voice component of the multimedia session.
4b Session and media anchoring is performed by the TAS in the MRF.
4c The TAS sends an INVITE, of which the SDP is built on the SDP2 received in
the INVITE of step 3, and on information received from the MRF in step 4b.
That INVITE message is forwarded to the remote party through the S-CSCF.
**Alternative #2:**
5a The TAS decides (based on e.g. operator policies, Via-header indicating
that the INVITE has traversed any node in UE-1\'s home network before reaching
the TAS ...) NOT to anchor the session and the media using an MRFC/MRFP. In
the example of this sequence, the basis of that decision is that the INVITE
has traversed an IBCF before reaching the TAS.
5b The TAS sends an INVITE, of which the SDP is built on SDP2 received in the
INVITE of step 3.
6\~7 The service logic with iFC causes the request to be forwarded to the SCC
AS for anchoring the sessions to enable Session Transfer.
8 The SCC AS anchors the session and decides not to involve an MRFC for
anchoring the media and the session. That decision could be based on e.g.
operator policies...
10\~11 The INVITE is routed to UE-1 through the S-CSCF.
12 The session setup is completed, as per TS 23.228.
##### 6.8.2.3.3 SRVCC procedure
Figure 6.8.2.3.3-1: Enhanced SRVCC procedure
1\. The MME sends a SRVCC PS to CS Request message to the MSC Server for
performing a SRVCC for UE-1
2\. This causes the MSC to send an INVITE with an STN-SR indicating use of
SRVCC procedures for Access Transfer to CS access. The MSC Server enhanced for
SRVCC includes the C‑MSISDN as calling party number.
3\. Standard procedures are used at S-CSCF for routing of the INVITE to the
SCC AS.
4\. The SCC AS uses the STN-SR to determine that Access Transfer using SRVCC
is requested. The SCC AS may retrieve the C‑MSISDN from the HSS. The SCC AS is
able to identify the correct anchored session.
5\. The SCC AS sends then a re-INVITE or UPDATE for updating the remote leg,
which includes the SDP of the MGW. The SCC AS may include an indication that
bi-casting would be desirable for a certain period of time for that update.
6\. The message from the SCC AS is routed to the TAS by the S-CSCF based on
standard IMS routing procedures.
**Alternative #1: call previously anchored in an MRFC/MRFP by the TAS**
7a. The TAS detects that the call has previously been anchored in an MRF.
7b If the \"bi-casting desirable\" indication has been received from the SCC
AS, the TAS configures the bi-casting in the MRF , and starts a supervision
timer for the bi-casting. If the \"bi-casting desirable\" indication is not
included in the INVITE message received from the SCC AS, the TAS only updates
the MRF to have it sent the anchored media to the MGW from this point on.
**Alternative #2: call previously anchored in an IBCF/TrGW**
8a \~ 8c. The TAS detects that it has not anchored the call in an MRF. It
therefore processes the message, and sends an re-INVITE/UPDATE message to the
S-CSCF towards the remote end. If it was received from the SCC AS, it forwards
the \"bi-casting desirable indication\" in that message. It is routed to the
IBCF as per standard IMS routing procedures.
8d. If the \"bi-casting desirable\" indication is included in the message
received by the IBCF , the IBCF configures the bi-casting in the TrGW, and
starts a supervision timer for the bi-casting. If the \"bi-casting desirable\"
indication is not included in the message received by the IBCF, the IBCF only
updates the TrGW to have it sent the anchored media to the MGW from this point
on.
**Alternative #A:**
This scenario occurs in the case the Gm reference point is retained upon PS
handover procedure. Then:
9a. The UE sends a Re-INVITE via the PS access to update the remaining non-
voice media flow(s) associated with the recently added active session. If the
UE is using ICS capabilities, this Re-INVITE also adds Gm service control to
the active session and the UE subsequently sends Re-INVITEs for any remaining
inactive bi-directional speech sessions that are to be transferred.
9b\~9d. The Re-INVITE is routed to the TAS via the S-CSCF and the SCC AS.
9e. If the TAS has anchored the session in an MRF, and if it has configured
bi-casting for that session due to the reception of a \"bi-casting required\"
indication from the SCC AS, the TAS detects that the Re-INVITE is an update of
the session for whose speech is currently being bi-cast. It uses this as a
signal to stop bi-casting, if the supervision timer for bi-casting has not yet
expired. It therefore interacts with the MRF to stop bi-casting.
9f \~9g. The TAS processes the re-INVITE and forwards it towards the remote
party. That message is then routed by the S-CSCF to the IBCF.
9h. If the IBCF has configured bi-casting for that session due to the
reception of a \"bi-casting required\" indication from the SCC AS, the IBCF
detects that the Re-INVITE is an update of the session for whose speech is
currently being bi-cast. It uses this as a signal to stop bi-casting, if the
supervision timer for bi-casting has not yet expired. It therefore interacts
with the TrGW to stop bi-casting.
9i. The IBCF processes the re-INVITE and forwards it towards the remote party.
**Alternative #B:**
This scenario occurs in the case the Gm reference point is not retained upon
PS handover procedure. Then:
10a. The Source Access Leg is released as specified in TS 23.237 [3], clause
6.3.1.6.
10b. If the TAS has anchored the session in an MRF, and if it has configured
bi-casting for that session due to the reception of a \"bi-casting required\"
indication from the SCC AS, it stops bi-casting at the expiry of the
supervision timer.
10c. If the IBCF has configured bi-casting for that session due to the
reception of a \"bi-casting required\" indication from the SCC AS, it stops
bi-casting at the expiry of the supervision timer.
## 6.9 Alternative 9 -- SR-VCC Enhancement using media detection
### 6.9.1 Introduction
This alternative proposes a modification of the MGW and MSC Server to support
detection of the arrival of the first CS downlink media from UE-B, and
triggering the UE-A to handover based on that event. In the flows included
below the slope of the flows indicates the transit time of the signalling and
media. The duration of the voice breaks experienced by UE-A and UE-B are shown
separately as the downlink voice break and the uplink voice break.
A UE following RFC 3264 [11] will listen to the old source until media from
the new source is available. However, depending on UE implementation and the
usage of gating functions in the network (PCC, TrGWs etc), the switch between
PS UL/DL and CS UL/DL may start at the return of the 200 OK. Such
implementations in the UE and network gating functions should be avoided, and
changes as necessary should be made to the existing specifications to clarify
the expected behaviour.
There has been some concern that allowing the reception of media before the
200OK could be at the risk of exposing entities to the reception of stray
packets, or even use of the IP address/port information by a fraudulent node.
However, we note that completely closing such vulnerability isn\'t in line
with RFC 3264 and in fact would have an impact on all features (such as Inter-
UE Transfer) where updates occur.
UE-A is triggered to begin to handover by detection (by the network) of the
arrival of the first downlink CS media packets. The downlink packets are
detected by the MGW and an indication sent to the MSC Server to trigger the HO
CMD.
The call flow with the new media detect functionality is shown in figure
6.9-1.
Figure 6.9-1: Non-roaming scenario with new media detect functionality
If no media is detected by the MGW before the arrival of the 200OK then the
network should initiate the handover when the 200OK arrives.
In this new procedure, it is the downlink break that is determined by the time
it takes for UE-A to re-tune. However, because this re-tune time is typically
shorter than the transit time of the 200OK, it will be the arrival of the
200OK that determines when the first CS uplink data can be sent towards UE-B.
In the example above, and typically, this means the uplink break is longer
than in the baseline case. Approximately, it is the transit time of the 200OK,
minus the media transit time, and so will certainly be at least 100ms shorter
than the downlink voice break in the default procedures (since that is the
200OK transit time PLUS the re-tune time.
It is expected that the performance target of 300ms is only exceeded for the
roaming scenarios when the network is experiencing peak load, and even then
the break will not exceed 400ms. (See below for the possible use of a fixed
delay to reduce the break further.) Compared with the baseline procedure, the
interval between the Measurement Report and handover command will in general
be increased by a time equal to the transit time of the INVITE plus the
transit time for the first CS downlink media. In cases where there is no
downlink media before the 200OK arrives, the interval will be increased by the
transit time of the INVITE plus the transit time of the 200OK.
Such additional delays to the handover would certainly be an issue for LTE ->
LTE scenarios, but in SRVCC we are discussing inter-RAT handover (different
bands). The additional delays do not seem to be out of keeping with the delays
typically experienced in inter-RAT (UMTS -> GSM) handovers. The main scenario
we see as raising potential issues is in large cities, with deep fading, but
in this case such areas can be expected to have a full LTE roll-out. It is
also possible to engineer the handover parameters/thresholds to cause an
earlier handover, so that additional delays in handover as a result of this
alternative are cancelled out. It is also possible, if seen as beneficial, for
Release 10 UE\'s to be updated to support pre-handover signalling, as
described in Annex A.
In fact, the duration of the break experienced by UE-B can be further reduced
by adding a delay between the detection of CS media by the MGW and the MSC
Server sending the handover command. This has the effect of increasing the
voice break at UE-A, but by selecting an appropriate delay value an
appropriate balance between the two voice breaks can be achieved.
An example of this is shown in figure 6.9-2.
Figure 6.9-2: Media detect function with delay before sending HO CMD
The additional delay extends the downlink break, but shortens the uplink
break. By selecting an appropriate delay duration, a balance between uplink
and downlink breaks can be chosen. It is expected that it is possible to bring
the worst-case scenario voice break in under the target of 300 ms.
### 6.9.2 Call flows
Below is an example call flow for this solution, based on the call flow for
SRVCC from E-UTRAN to GERAN without DTM support, as described in TS 23.216
[3], clause 6.2.2.1. The only modification to the baseline SRVCC procedures is
to add an event signalled from the MGW to the MSC Server when the first
downlink CS media arrives at the MGW.
Figure 6.9.2-1: SRVCC from E-UTRAN to GERAN without DTM support, using media
detect
Steps 1 -- 10 are as described in TS 23.216 [3], clause 6.2.2.1.
10a. Arrival of the first downlink CS media from the remote end causes an
event to be sent from the MGW to the MSC Server. This event triggers Step 13,
as described in TS 23.216 [3].
Steps 11 -- 24 are as described in TS 23.216 [3], clause 6.2.2.1.
## 6.10 Alternatives 10 - eSRVCC with PDN bi-casting
### 6.10.1 Architecture Reference Model
This alternative does not change the reference architecture of original SRVCC,
i.e. the architecture reference model is the same as TS 23.216 [3].
### 6.10.2 Functional Requirements
1\. IMS voice codec info is retrieved via PCC:
Selected codec could be delivered to MME from AF on the path of Policy Control
procedures. That is, AF shall send the selected codec to PCRF and PCRF sends
not only Policy and Charging control information over Gx/Gxx but delivers the
selected codec as well. PDN-GW and S-GW sends the SDP info (e.g., selected
codec together with source IP address/port# and destination IP address/port#,
session state) information transparently to MME, and MME stores that to the
given subscriber\'s session/bearer. If SDP info is updated during the session,
this updated SDP is also delivered to MME for updating purpose. If UE has
multiple sessions ongoing, each of this session\'s SDP is stored separately in
the MME for that UE.
To minimize the changes due to roaming, this alternative assumes that the
P-CSCF is allocated at the serving network (i.e. when roaming, P-CSCF is
located at the serving network) via on local configuration and roaming
agreement.
2.. SRVCC MSC allocates the MGW to interwork between 2G CS with (CS speech)
and IMS with (RTP speech)
3.. MME instructs the PDN-GW to bi-cast the RTP streams to the designated MGW
via SGi interface.
4.. After Session Continuity procedure is performed, MGW and PDN GW is
returned to normal state.
### 6.10.2a IMS voice codec retrieval from PCC flow
The following figure illustrates how IMS voice codec in used is relayed to MME
from P-CSCF (AF).
Figure 6.10.2a-1: IMS voice codec retrieval from PCC Procedure
1-2. During IMS session setup or codec changes during the active session,
P-CSCF which is acting as AF in PCC architecture updates the selected codec to
PCRF via Rx interface.
3\. P-CSCF indicates the IMS codec in used to PCEF via Gx interface.
4\. Based on the procedure in TS 23.401, PDN-GW uses either Create Bearer
Request if the IMS voice bearer has not yet be done, or Update Bearer Request
if the voice bearer is already setup. The IMS codec info is sent via these
messages transparently.
5\. MME stores or replaces the existing IMS voice codec with the one received
from step 4 for this UE. MME does not read/interpret this information.
6\. Existing procedure in TS 23.401 for bearer handling if needed
7\. MME acknowledges step 4 with a Response.
8\. PDN-GW acknowledges step 3 with a Response.
Editor\'s note: The similar flow will be used for updating MME for SDP re-
negotiation. How the SDP info is to be formatted (i.e., which entity does the
formatting) for sending to MME is TBD.
### 6.10.3 Media plane handling
In order to allow seamless voice handling for SRVCC, the local end prepares a
bridging mechanism such that the switching of the RTP voice in LTE to CS voice
over 2/3G is not noticeable at the remote end. The following figure shows how
this is done from the media perspective:
Figure 6.10-1: PDN-GW Bi-Casting Media Plane handling
Editor\'s note: How UL RTP traffic from MGW is handled (e.g., so the remote
end is unaware) in step 3 is FFS.
Editor\'s note: If UE has multiple IMS voice sessions, it is FFS how to handle
it.
Step 1: This is prior to SRVCC where an IMS voice call over LTE is established
with the remote end. The RTP stream is going between UE-PDN-GW and remote end.
Step -2: E-UTRAN triggers an SRVCC operation by requesting the MME to perform
an SRVCC to 2/3G access. MME then invokes the SRVCC MSC. During this MME-SRVCC
MSC interaction, the PDN GW is instructed to replicate UL and DL RTP packet to
a designated MGW address/port#s. This DL RTP packet in the MGW is converted to
CS voice in step 3 for connection to the 2/3G access. The idea is that when UE
switched over the access to 2/3G then it can receive CS voice immediately on
the downlink direction. The DL RTP stream from the remote end is continuously
sent to the PDN GW; hence, no change on the remote end. The MGW also requires
some conference bridge function as first leg is connected to 2/3G access, 2nd
leg is from the PDN GW, 3rd leg is toward the IMS for session continuity. The
MGW also requires using the IP address of the SC UE towards the remote end and
not the IP address of the MGW.
Step 3: UE receives the HO command and connected to 2/3G using CS voice. The
DL CS voice is already connected at this point due to step 2. The UE starts
sending UL CS voice traffic to MGW. MGW then transcodes this to an RTP stream
and forwards it to remote end. The MGW aware of the RTP stream codec being
used based on the IMS codec information received from MME. The UL sequence
number and timestamp of the UL RTP stream is maintained toward the remote end
by the MGW. As the result of SRVCC, the PDN-GW receives request from MME (that
was trigger by the target SGSN) to deactivate GBR bearer related to voice. PDN
GW responses to MME/SGSN as defined in Rel 9 TS 23.216 [3]. However, PDN GW
starts a timer and continues to transmit the DL RTP streams toward the MGW
until this timer expires, then complete the GBR bearer deactivation.
Step . Session continuity procedure is successfully executed in the remote
end. The remote end is sending CS voice directly to the MGW. The CS to RTP
stream transcoding resource and the PDN GW resources are released.
### 6.10.4 Signalling Message Flows
The following figure shows the signalling aspect:
Figure 6.10-2: PDN-GW Bi-Casting Signalling Plane Handling
Step 2 consists of procedure to:
\- MME indicates to the SRVCC MSC that EPC supports eSRVCC procedure, and the
IMS codec information as well as source IP address/port# and destination IP
address/port#.
\- MSC allocates designated MGW resource to receive UL/DL RTP streams from PDN
GW
\- MSC indicates to MME the MGW address to which those UL/DL RTP streams to be
sent
\- MME to instruct PDN GW to replicate UL/DL RTP to MGW
\- MSC to instruct MGW to transcode DL RTP stream to CS voice toward the 2/3G
access
Step 3 consists of procedure to connect UL CS traffic to RTP media stream. DL
RTP stream to CS traffic can be thru connected at step 2. This allows the UE
to receive DL CS traffic immediate after switch over to 2/3G access. The UL CS
traffic to RTP stream cut over is done when HO complete indication is received
from 2/3G BSS/RNC.
Step 4 consists of procedure to release the RTP to CS transcoding resource and
conferencing resources in MGW. This step is triggered when 200 OK is received
by the SRVCC MSC.
## 6.11 Alternative 11 - Media anchoring in the IMS-ALG
### 6.11.0 General
The operator shall deploy IMS-ALG(s) that can act as shown in the clause
6.11.3 for communications of roaming users, and the operator shall deploy IMS-
ALG(s)/MRF for inter-operator communications of home users. The IMS-ALG shall
allocate TrGW(s) for the communications.
NOTE: It is normal case that operator anchors the media in the visited network
for the communication of roaming users and inter-operator communication of
home users, e.g. using SBC or IBCF/TrGW.
### 6.11.1 Architecture Reference Model
No change to the current architecture is proposed.
### 6.11.2 Functional Entities
No additional functional entities are proposed.
### 6.11.3 Message Flows
#### 6.11.3.1 IMS Registration
Existing IMS Registration procedures described in TS 23.228 [8] are used to
register the user in IMS.
Figure 6.11.3.1-1: IMS Registration
1\. Roaming user UE-1 sends a SIP (re)Registration request to home network via
P-CSCF.
2\. The IMS-ALG in the P-CSCF allocates a PSI-DN for eSRVCC for the UE-1, and
includes the PSI-DN in the request forwarded to the S-CSCF.
NOTE 1: The IMS-ALG can allocate the same PSI-DN for eSRVCC for all UEs.
3\. The S-CSCF sends the SIP (re-)Registration request to the SCC AS according
to the three-party registration procedure.
On reception of the PSI-DN for eSRVCC, if the SCC AS has already received one
before, it shall check whether it is the same as the previous received one,
otherwise, the SCC AS shall check whether it is the same as the STN-SR in the
HSS. If the check fails, the SCC AS shall modify the STN-SR in the HSS using
the PSI-DN for eSRVCC.
If the SCC AS receives an SIP (re-)Registration request without PSI-DN for
eSRVCC and the SCC AS has modified the STN-SR in the HSS using a PSI-DN for
eSRVCC, the SCC AS shall restore the STN-SR in the HSS.
NOTE 2: The visited network can change the serving IMS-ALG for an UE during
IMS re-Registration procedure.
#### 6.11.3.2 Originating sessions in PS
Existing Mobile Origination procedures described in TS 23.228 [8] are used to
establish a session.
Figure 6.11.3.2-1: Originating session that uses only PS media
1\~5. Roaming user UE-1 initiates an IMS multimedia session to UE-2 and uses
only PS media flow(s). The initial SIP INVITE request goes through the IMS-
ALG, which is collocated within P-CSCF,. The IMS-ALG allocates a TrGW for the
user plan of the communication.
NOTE 1: For roaming case, if the UE-1 is assigned with a private IP address,
the visited network always allocates TrGW(s) for user plan of all the
communications of the UE-1.
6-7. The UE-2 sends response to the initial SIP INVITE request.
8\~10. The SCC AS determines that the UE-1 is in a visited network supporting
eSRVCC according to the registration phase, and forwards the response to the
UE-1 with a dynamic/static STI for eSRVCC and the C-MSISDN. The IMS-ALG shall
store the STI for eSRVCC and the C-MSISDN.
NOTE 2: SCC AS using dynamic STI to correlate the transferring session is
easier than static STI.
#### 6.11.3.3 Terminating sessions in PS
Existing Mobile Termination procedures described in TS 23.228 [8] are used to
establish a session.
Figure 6.11.3.3-1: Terminating session that uses only PS media
1\~2. UE-2 initiates an IMS multimedia session to UE-1 and uses only PS media
flow(s). The initial SIP INVITE request is forwarded to SCC AS based on the
service logic with iFC.
3\~4. SCC AS determines that the UE-1 is in a visited network supporting
eSRVCC according to the registration phase, and forwards the initial SIP
INVITE request to the UE-1 with a dynamic/static STI for eSRVCC and the
C-MSISDN. The IMS-ALG shall store the STI for eSRVCC and the C-MSISDN.
NOTE: SCC AS using dynamic STI to correlate the transferring session is easier
than static STI.
5\. The initial SIP INVITE request is forwarded to the IMS-ALG selected during
the registration phase, which can be collocated within P-CSCF. the IMS-ALG
allocates a TrGW for the user plan of the communication and forwards the
initial SIP INVITE request to the UE-1 without the STI for eSRVCC and the
C-MSISDN.
6\~10. UE-1 sends a response to the initial SIP INVITE request.
#### 6.11.3.4 PS -- CS Access Transfer
This clause describes the main differences with existing SRVCC procedures.
Some of the procedures that are not impacted have been left out for clarity of
the flow.
Figure 6.11.3.4-1: PS to CS access transfer for roaming user
1\. Procedures specified in TS 23.216 [3], the MSC Server initiatesSession
transfer message, e.g. by sending an initial SIP INVITE request to IMS-ALG
according to the PSI-DN for eSRVCC received from the source MME**. The MSC
Server shall provide all the supported codecs for voice in the Session
transfer message. The session transfer request is transferred via NNI
interface between MSC Server and the P-CSCF**
2\. The IMS-ALG receives the Session transfer message and updates the access
leg media segment of the session, which is correlated with the C-MSISDN.
3 The IMS-ALG sends response to the MSC Server.
NOTE: In rare case that the MSC Server does not support the codec used for the
original communication, the IMS-ALG must provide transcoder for the new access
leg.
4\. After receiving the Session transfer message, the IMS-ALG forwards the
Session transfer message, e.g. by sending an initial SIP INVITE request, to
the SCC AS using the stored STI for eSRVCC.
5\. The SCC AS correlates the new access signalling segment created by the
Session Transfer message with the remote leg of the transferring session, and
sends SIP 200 OK message to the IMS-ALG without update remote end.
## 6.12 Alternative 12 - HO enhancement by local anchoring with Indirect
Forwarding (Merged alternative of alternatives 6 and 7)
### 6.12.1 Architecture Reference Model
The Figure 6.12.1-1 shows the architecture reference model of this
alternative.
Figure 6.12.1-1: SRVCC enhancement alternative using local anchoring
In this alternative, the following features are introduced in addition to the
original SRVCC as specified in TS 23.216 [3]
\-- The S-GW provides the anchoring function and switches the bearer path for
media data forwarding, from the E-UTRAN to the MGW. The path between the S-GW
and MGW is the packet bearer as specified in TS 23.401 [6].
\- For PS bearers other than ones for VoIP media, S-GW performs normal PS
handover procedure with SGSN. MME distinguishes bearers for VoIP media, for
which the S-GW establishes the PS bearers with MGW, based on QCI information,
i.e. a bearer with QCI=1 is switched to MGW. MME commands the S-GW to which
entity. i.e. SGSN or MGW, it shall switch the bearers.
\- MSC Server/MGW obtains the UE1\'s IP address from the S-GW in the procedure
to establish PS bearer between S-GW and MSC Server/MGW. The UE1\'s IP address
was allocated before the handover to receive/send the media packets with the
UE2. The UE1 IP address is used by the MGW for the media.
> \- MME stores the media information via PCC that will be signalled to MSC
> Server/MGW enhanced for E-UTRAN/UTRAN (HSPA) i.e. from P-CSCF to MSC
> Server/MGW via P-GW (in case of GTP based S5/S8), S-GW and MME.
### 6.12.2 Functional Entities
Editor\'s Note: SGSN will be added in this section.
#### 6.12.2.1 MSC Server/MGW enhanced for E-UTRAN/UTRAN (HSPA) and 3GPP
UTRAN/GERAN SRVCC
In addition to the standard MSC Server/MGW enhanced for SRVCC defined in TS
23.216 [3], an MSC Server/MGW which has been enhanced to optimize SRVCC
handover by local anchoring provides the following functions:
\- In order to hand over the VoIP media to MGW, the MGW assigns
\- IP address and TEID for packet bearers to transport VoIP media packets
between MGW and S-GW and this information is transferred to the MME.
NOTE: In this alternative, MSC Server/MGW enhanced for E-UTRAN/UTRAN (HSPA)
supports GTP-U protocol in addition to the support of GTP-C as specified in
current SRVCC.
#### 6.12.2.2 PCC
SDP related information such as IMS voice codec info is retrieved via PCC,
which means the SDP related information is delivered to MME from AF via Policy
Control procedures. That is, AF shall send SDP related information to PCRF and
PCRF sends not only Policy and Charging control information over Gx/Gxx but
delivers SDP related information as well. PDN-GW and S-GW sends the
information transparently to MME, and MME stores that to the given
subscriber\'s session/bearer.
#### 6.12.2.3 MME
In addition to the standard MME behaviour defined in TS 23.401 [6], an MME
which has been enhanced to optimize SR VCC handover by local anchoring
provides the following functions:
  * Providing the EPC bearer control function that enables to establish the EPC bearer between SGW and MGW together with other normal EPC bearers.
NOTE: This can be realized by the existing Rel8/9 GTP capability without any
impact. Stage3 work will investigate the protocol impact.
  * Storing the SDP related information to the given subscriber\'s session/bearer, and that will be signalled to MSC Server/MGW enhanced for E-UTRAN/UTRAN (HSPA) in case of SRVCC occurrence.
#### 6.12.2.4 S-GW
In addition to the standard S-GW behaviour defined in TS 23.401 [6], an S-GW
which has been enhanced to optimize SR VCC handover by local anchoring
provides the following functions:
  * Providing the EPC bearer control function that enables to establish the EPC bearer between SGW and MGW together with other normal EPC bearers. Note: This can be realized by the existing Rel8/9 GTP capability without any impact. Stage3 work will investigate the protocol impact.
NOTE: This can be realized by the existing Rel8/9 GTP capability without any
impact. Stage3 work will investigate the protocol impact.
### 6.12.3 Message Flows
#### 6.12.3.1 SRVCC Handover with PS HO support
The difference from the release 8 SRVCC is denoted with the RED font in figure
6.12.3.2-1. This procedure can be applied for the SGSN relocation procedure
that might happen after UE handed over to the 3G. In this case, Source E-TRUAN
and Source MME in the figure 6.12.3.2-1 can be replaced with the Source RNS
and Source SGSN respectively.
Figure 6.12.3.1-1: call flow with PS HO Support
Editor\'s Note: The figure will be update to clarify routing will be UE-
MGW-S/P-GW after step18g if step15 is performed.
Editor\'s Note: The line of Indirect Data Forwarding will be clarified in this
figure.
Additional flow and modified nodal behaviour are explained below;
5a - 5d. When MSC Server/MGW receives the PS to CS request message from MME
with the stored media information for the ongoing IMS voice session, MSC
Server/MGW assigns the IP address and TEID for VoIP media and assigns the TEID
for downlink indirect data forwarding from S-GW. This information is
immediately returns to the MME by sending 5d message. Since the downlink
indirect data forwarding function is an optional feature, MSC Server/MGW may
not assign the TEID for indirect forwarding. In this case step 6f and 6g are
skipped.
6a. MME sets the MGW IP address, TEID and TEID for downlink indirect data
forwarding together with the bearer information for EPC bearers in the forward
relocation request message.
6b, 6c. If S-GW relocation needs to be executed, target SGSN sends Create
session request to the target SGW with the SGSN IP address and TEID for
control plane as specified in TS 23.401.
6f, 6g. Target SGSN sends Create Indirect Data Forwarding Tunnel Request for
downlink data to the target SGW with the MGW IP address and TEID for downlink
indirect data forwarding together with the EPC bearer information of the other
PS services. The TEID for downlink indirect data forwarding is used for data
forwarding from S-GW to MGW when inter RAT HO is initiated in step14 and
eNodeB starts indirect data forwarding.
7a. MME sends the PS to CS Acknowledge message to MSC Server/MGW with the
Target SGW IP address and TEID.
14\. The source eNodeB initiates downlink data forwarding for bearers
including VoIP media. From now, VoIP media is forwarded to the MGW via S-GW.
18 If MGW supports the previously used codec of the UE, the MSC-Server does
not send session transfer message to the SCC AS, i.e. no remote end update
procedure occurs. Otherwise, the MSC-Server initiates the remote end update
procedure indicating all codec available in the MGW.
19c, 19d. When target SGSN receives the relocation complete message from
target RNS/BSS, target SGSN sends the modify bearer request message to the
target S-GW with the MGW IP address and TEID together with the EPC bearer
information of the other PS services. The target S-GW communicates with the
MSC server/MGW only for the VoIP media traffic.
After step 19c, VoIP media is conveyed between UE and peer end via the MGW.
Based on operator configuration e.g. operator policy, Session Transfer to the
SCC AS can be initiated by the MSC Server/MGW at any time after step18d. In
this case followings are applied:
Regarding the bearer in S-GW side, upon the completion of the session transfer
procedure, VoIP bearer release procedure is to be triggered by IMS via PCC
i.e. PGW/SGW/the target SGSN is to release the bearer at this point in time.
Regarding the bearer in MSC side, upon acknowledging the completion of the
session transfer procedure (e.g. receiving 200 OK from SCC AS), the MSC server
is to release the bearer towards SGW.
NOTE: Based on implementation, MGW should be able to decode the AMR without
any re-synchronization with peer end after HO by receiving a few AMR frames.
Editor\'s note: If UE has multiple IMS voice sessions, it is FFS how to handle
it.
#### 6.12.3.2 SRVCC Handover without PS HO support
The difference from the release 8 SRVCC is denoted with the RED font in figure
6.12.3. 3-1. In this solution, the MSC Server/MGW behaves as the SGSN for EPC
nodes in order to reduce HO disruption by adapting indirect data forwarding
technique.
Figure 6.12.3.2-1: call flow without PS HO Support
Editor\'s Note: The figure will be update to clarify routing will be UE-
MGW-S/P-GW after step15c.
Editor\'s Note: The line of Indirect Data Forwarding will be clarified in this
figure.
Additional flow and modified nodal behaviour are explained below:
5a When MSC Server/MGW receives the PS to CS request/ Forward relocation
request message from MME with the stored media information for the ongoing IMS
voice session, MSC Server/MGW assigns the IP address and TEID for VoIP media
and assigns the TEID for indirect forwarding from S-GW. This information is
immediately returns to the MME by sending 5d message.
6f, 6g MSC Server/MGW sends Create Indirect Data Forwarding Tunnel Request to
the SGW with the MGW IP address and TEID for indirect data forwarding. The
TEID for indirect data forwarding is used for data forwarding from S-GW to MGW
when inter RAT HO is initiated in step14.
9 MGW set up the codec based on the SDP information previously fetched via
PCC.
After step 11. The source eNodeB initiates Data forwarding for bearers
including VoIP media. After this point, VoIP media is forwarded to the MGW via
S-GW.
After step 13, the suspending related procedure is omitted in the flow since
there is no change from the Rel-8 SRVCC.
14\. Upon receiving step14d, MME will not trigger the release of voice bearer.
The voice bearer will be deleted by IMS session transfer triggered in step15a.
15a-15c. If MGW supports the previously used codec of the UE, the MSC-Server
does not send session transfer message to the SCC AS, i.e. no remote end
update procedure occurs. Otherwise, the MSC-Server initiates the remote end
update procedure indicating all codec available in the MGW. The MSC server/MGW
initiates the Session Transfer to the SCC AS. Upon the completion of the
domain transfer procedure, the VoIP media is conveyed between UE and peer end
via the Target MSC directly.
18a-18b. When MSC server/MGW receives the PS to CS Complete Ack./ Forward
relocation Ack message from the MME, MSC server/MGW sends the modify bearer
request message to the S-GW with the MGW IP address and TEID. The S-GW
communicates with the MSC server/MGW for the VoIP media traffic.
After step 18a, VoIP media is conveyed between UE and peer end via the MGW.
Regarding the bearer in S-GW side, upon the completion of the session transfer
procedure, VOIP bearer release procedure is to be triggered by IMS via PCC
i.e. PGW/SGW/the source MME is to release the bearer at this point in time.
Regarding the bearer in MSC side, upon acknowledging the completion of the
session transfer procedure (e.g. receiving 200 OK from SCC AS), the MSC server
is to release the bearer towards SGW.
NOTE: Based on implementation, MGW should be able to decode the AMR without
any re-synchronization with peer end after HO by receiving a few AMR frames.
Editor\'s note: If UE has multiple IMS voice sessions, it is FFS how to handle
it.
#### 6.12.3.3 SRNS Relocation
When UE moves to different RNC area and SGSN relocation happens, following
procedure is triggered. With this procedure, MSC Server/MGW always maintains
the up-to-date information about the SGSN and S-GW. This procedure is only
applied if SRVCC Handover with PS HO support is performed but remote leg
update in step18e of Figure 6.12.3.2-1 is not performed.
Figure 6.12.3.3: SRNS Relocation
1-9. SRNS relocation procedure is initiated as specified in TS23.060 clause
6.9.2.2.1. No Change is made for these steps except that the target SGSN does
not establish the RAB for voice bearer marked with PS-to-CS indicator toward
target RNC.
NOTE: If S-GW relocation occurs, the new SGSN receives target SGW IP
address/TEID for VoIP bearer in step A.
9a. If S-GW change occurs, the new SGSN notifies the MSC Server/MGW with the
target S-GW information by sending PS to US Update message. PS to US Update
message carries the target SGW IP address/TEID for VoIP bearer. MSC Server/MGW
replies by sending PS to US Update Ack message.
10-15. Continuous SRNS relocation procedure is preformed as specified in. No
Change is made for these steps.
#### 6.12.3.4 SDP related information pre-fetching
When Voice media communication starts using IMS, the P-CSCF informs SDP
related information of the voice media, e.g. used codec, to the MME using the
PCC architecture as specified in TS 23.206 [14]. The received information is
maintained in MME even inter MME HO happens.
Figure 6.12.3.4-1: SDP related information pre-fetching
0\. UE or peer end initiate a voice media communication by sending SIP INVITE
message. This message contains the media information in its SDP.
1\. Triggered by P-CSCF, IMS sends the service information to PCRF according
to the PCC architecture as specified in the TS 23.203 [12]. This message
contains SDP related information, e.g. codec.
2\. PCRF sends ack message to IMS.
3\. Policy and Charging Rules Provision is sent to PGW as policy and charging
provisioning. This message also contains SDP related information.
4\. PGW sends the Create Bearer Request message to MME via SGW in order to
establish a dedicated bearer for voice media. This message also contains SDP
related information. When MME receives this message, MME stores the voice
media related information.
5\. Radio bearer and Radio access bearer resources are prepared in this
process.
6\. MME sends the Create Bearer Response message to PGW via SGW.
7\. PGW sends Ack message to PCEF.
8\. Once dedicated bearer for voice communication has been established, IMS
level call process continues.
#### 6.12.3.5 SDP related information update
SDP related information such as codec information can be changed during the
communication in the IMS level. Typical example is the Explicit Congestion
Notification mechanism as specified in the TS 23.401 [6]. The P-CSCF informs
updated SDP related information, i.e. codec related information, etc, to the
MME using the PCC architecture as specified in TS 23.206 [14]. The received
information is maintained in MME even inter MME HO happens.
Figure 6.12.3.5-1: SDP related information update
0\. UE or peer end initiate a SDP update procedure any time during the voice
media communication by sending SIP UPDATE message. This message contains the
media information in its SDP, such as codec.
1\. Triggered by P-CSCF, IMS sends the service information to PCRF according
to the PCC architecture as specified in the TS 23.203 [12]. This message
contains SDP related information.
2\. PCRF sends Ack message to IMS.
3\. Policy and Charging Rules Provision is sent to PGW as policy and charging
provisioning. This message also contains SDP related information.
4\. PGW sends the Modify Bearer Request message to MME via SGW in order to
update SDP related information. When MME receives this message, MME updates
SDP related information. Since the Modify bearer request is sent in order to
update SDP related information in MME, there is no Radio bearer and Radio
access bearer related procedure takes place.
5\. MME sends the Modify Bearer Response message to PGW via SGW.
6\. PGW sends Ack message to PCEF.
7\. SDP related information update procedure is completed.
Editor\'s Note: The race condition where the SRVCC is triggered during SDP
related information update procedure is on-going.
## 6.13 Consolidated Alternative -- SIP based solution for eSRVCC
### 6.13.1 Architecture Reference Model
Figure 6.13.1-1 provides the reference architecture for SRVCC using the ATCF
enhancements (non-emergency session). The figure only depicts the specific
reference points for the ATCF. For other reference points of the general
architecture, **refer to the reference architecture in TS 23.292 [5], clause
5.2.**
Figure 6.13.1-1: IMS Service Centralization and Continuity Reference
Architecture when using ATCF enhancements.
NOTE 1: If neither the MSC Server assisted mid-call feature nor MSC Server
enhanced for ICS is supported, the interface between MSC Server and ATCF is
Mw.
NOTE 2: If the MSC Server is enhanced for ICS or supports MSC Server assisted
mid-call feature, the interface between MSC Server and ATCF is I2.
The following figures show the architecture view of control plane and user
plane before and after transfer. It is assumed that PGW and P-CSCF are in the
serving network (supporting IMS Voice roaming if not home). The ATCF is
functionality resident in the serving network (home if not roaming), and the
ATGW is depicted as a separate functionality. The Access Leg as defined in TS
23.237 [4] is subdivided by the ATCF into a Serving Leg and a Home Leg.
Figure 6.13.1-2: Architecture View of Control Plane
NOTE 3: Other IMS nodes in the serving network are not depicted in the
architecture view of control plane.
The reference point between MSC Server and ATCF is a network-internal
reference point that is not exposed on the UNI. SIP protocol is used for the
reference point. Similar to Mw, the I2 reference point is only exposed to the
operator\'s internal network. The same procedures for protection of the
interface are expected to be in place for I2 as for Mw.
As specified in TS 23.237 [4], and in case the MSC Server is also enhanced for
ICS, then the MSC Server may register the user in the IMS after the transfer.
The registration from the MSC Server may not be routed via the ATCF.
Figure 6.13.1-3: Architecture View of User Plane (ATGW controlled by ATCF)
### 6.13.2 Functional Entities
#### 6.13.2.1 ATCF
##### 6.13.2.1.1 General
A new functionality for control plane in the serving network (home if not
roaming) is proposed to be defined, i.e., Access Transfer Control
Functionality (ATCF). The ATCF is included in the session control plane for
the duration of the call before and after Access Transfer, based on the local
policy of the serving network (if the serving network wishes to provide SRVCC
enhancement for this subscriber).
NOTE 1: It is recommended that the ATCF be co-located with one of the existing
functional entities within the serving network (e.g., P-CSCF, IBCF, or MSC
Server).
The ATCF shall:
\- Based on operator policy, decide to
\- allocate a STN-SR;
\- include itself for the SIP sessions; and
\- instruct the ATGW to anchor the media path for originating and terminating
sessions;
\- keep track of sessions (either in alerting state, active or held) to be
able to perform Access Transfer of the selected session;
\- Perform the Access Transfer and update the ATGW with the new media path for
the (CS) access leg, without requiring updating the remote leg;
\- After Access Transfer, update the SCC AS that the Access Transfer has taken
place to ensure that T-ADS has the update information on the currently used
access.
\- Handle failure cases during the Access Transfer.
After Access Transfer, and based on local policy, the ATCF may remove the ATGW
from the media path. This step requires remote end update.
The ATCF shall not modify the dynamic STI that is exchanged between the UE and
SCC AS.
There are two options for providing MSC Server assisted mid-call feature:
\- ATCF handles mid-call support for the Access Transfer using MSC Server
assisted mid-call feature; or
NOTE 2: If the ATCF supports MSC assisted mid-call feature, then the ATCF
needs to keep track of sessions in alerting, active and held state to be able
to support transferring one session only (either in alerting state or active,
held, and / or conference call), a second already established session (which
can be held and / or conference call) and / or a call in alerting state.
Support of MSC Server assisted mid-call feature in the ATCF ensures that
alerting state, held state, , and / or conference state can be transferred to
the MSC Server without delay caused by interacting with SCC AS especially in
roaming cases.
\- SCC AS and ATCF handle mid-call support for the Access Transfer using MSC
Server assisted mid-call feature.
NOTE 3: If the ATCF does not support the MSC assisted mid-call feature, then
the ATCF needs to keep track of sessions in alerting, active and held state to
be able to support transferring the first session (either in alerting state,
active or held). Note that originating and terminating sessions are anchored
in the ATCF/ATGW already during session setup. The SCC AS provides then
session state information on alerting, held and/or conference state of the
first transferred session and on second established session.
##### 6.13.2.1.2 ATCF anchoring
The following implementation methods could be used to determine if the ATCF
should be including itself at all during registration:
\- If UE is roaming, based on the roaming agreement (e.g., home operator also
support SRVCC enhanced with ATCF in SCC AS and HSS).
\- Based on local configuration (e.g., if operator always deploys IBCF, MGCF
etc. with media anchor for inter-operator calls).
\- Based on registered communication service and media capabilities of the UE.
\- Based on the access type over which the registration request is sent.
NOTE 1: If the ATCF decides not to include itself during registration, it will
not be possible to use the ATCF enhancements during and after the registration
period. The SCC AS will fall back to the Rel-9 SRVCC procedures.
The following implementation methods could be used to determine if the ATCF
should anchor the media in the ATGW for an originating or terminating call:
\- Based on whether the UE is roaming or not.
\- Based on local configuration (e.g., if operator always deploys IBCF, MGCF
etc. with media anchor for inter-operator calls).
\- Based on the communication service and media capabilities used for the
session.
\- Based on knowledge of which network the remote party is in.
\- Based on the access type over which the request or response is sent.
\- Based on the SRVCC capability of the UE.
The decision to anchor media at the ATGW, during the session origination or
termination, can occur either at receipt of SDP offer or after a round trip of
SIP signalling with the remote party depending on the method(s) used for
determining whether to anchor media or not.
#### 6.13.2.2 ATGW
A functionality for user plane is proposed to be defined, i.e., Access
Transfer Gateway (ATGW). The ATGW is controlled by the ATCF and stays in the
session media path for the duration of the call and after Access Transfer,
based on the local policy of the serving network. The ATGW is depicted as
standalone functionality in the description, but an existing gateway can be
used, i.e., only existing gateway functionality is required.
NOTE: Depending on placement of the ATCF, different physical nodes can be
considered for the ATGW, e.g., IMS-AGW, TrGW, P-GW or CS-MGW. In all of these
cases, the existing interfaces already support the possibility to anchor the
media, and no additional extensions of protocol and interface would be needed.
#### 6.13.2.3 SCC AS
The SCC AS shall be based on the functionality specified in TS 23.237 [4],
with the following enhancements:
\- Correlate the dialog created by Access Transfer Update message with the
remote dialog;
\- Clear any existing STN-SR that has been set and provide to the HSS a
\- home-network configured STN-SR if a third-party register without a STN-SR
is received; or
\- STN-SR received in a third-party register
\- Provide the C-MSISDN and a routable Access Transfer Update - Session
Transfer Identifier (ATU-STI) to the ATCF during session establishment.
\- Decide whether to perform enhanced SRVCC procedure based on SRVCC
capability of the UE and SRVCC subscription information that are retrieved
during third party registration procedure.
\- Inform the ATCF if SCC AS whether or not to anchor the media.
#### 6.13.2.4 HSS
The HSS shall allow the SCC AS to update the user profile with a new STN-SR.
In the case the ATCF is involved, the STN-SR will address the ATCF, otherwise,
it will address the SCC AS.
NOTE: It is an implementation option that the HSS may store the SRVCC
capability of the UE.
### 6.13.3 Message Flows
#### 6.13.3.1 Selection of the ATCF
To ensure that the MSC Server selects the correct ATCF during SRVCC procedure,
a routable STN-SR pointing to the ATCF shall be provided to the MME before
SRVCC procedure is triggered.
The ATCF shall allocate the STN-SR when the user performs initial registration
in the IMS. The STN-SR shall be provided through IMS and via third-party
registration to the SCC AS. The SCC AS shall further provide the STN-SR to the
HSS, which in turn shall update the MME / SGSN. The MME / SGSN will use the
STN-SR in the same way as the Rel-8/9.
NOTE 1: If the SCC AS receives a third-party register without a STN-SR
pointing to the ATCF, it will clear any existing STN-SR that has been set and
provide a home network configured STN-SR. The SCC AS will need to ensure that
the home network configured STN-SR can be restored in case of SCC AS failure
(e.g., by storing it separately in the HSS as transparent data).
The following figure shows an example of IMS registration flow where the ATCF
provides the STN-SR to the home network. Existing IMS Registration procedures
described in TS 23.228 [8] are used to register the user in IMS.
Figure 6.13.3.1-1: IMS Registration
1\. UE-1 sends an initial SIP REGISTER request to home network via ATCF
(P-CSCF not shown in flow).
2\. ATCF decides, based on operator policy and if the home network supports
eSRVCC, to allocate a STN-SR. The ATCF include itself in the signaling path
for subsequent messages during the registration period.
3\. If allocated, the STN-SR is included in the request forwarded to the
I/S-CSCF.
NOTE 2: Service level agreements are used to understand whether the home
network supports eSRVCC. In addition, as fall back, the ATCF will as well
understand whether eSRVCC is activated in the SCC AS by the reception of
C-MSISDN/ATU-STI during session setup.
4\. The S-CSCF sends the SIP REGISTER request to the SCC AS according to the
third-party registration procedure.
NOTE 3: In case of multiple registrations from the UE from multiple accesses,
the SCC AS will only receive and use one STN-SR from an ATCF in the mobile
network.
5\. SCC AS provides the received STN-SR into the HSS to replace the STN-SR
pointing to the SCC AS or the previously stored STN-SR pointing to other ATCF.
If required it may also request to retrieve the SRVCC capability of the UE.
NOTE 4: If an ATCF does not exist or the ATCF decided not to be included in
step 2, the SCC AS will allocate a STN-SR that can be used to route to this
SCC AS and provide it into the HSS, thereby replacing any previously stored
STN-SR. SCC AS will then fall back to basic (Rel-9) SRVCC functionality for
the registered user. If the subscriber is not SRVCC subscriber, no STN-SR will
be set or provided to the MME.
NOTE 5: SCC AS will only need to update the STN-SR in the HSS at initial
registration. If the STN-SR has not changed since previous initial
registration, there will be no update towards MME done.
6\. HSS provides the STN-SR to the MME/SGSN because of the change of the
subscription data. If required the HSS may also request to receive the SRVCC
capability of the UE from the MME/SGSN in which case it will provide it to SCC
AS. the SCC AS may inform the ATCF about the SRVCC capability of the UE.
Editor\'s note: Other mechanisms for the SCC AS to provide the STN-SR to the
MME/SGSN are for further discussion.
If the UE moves in idle mode to a new MME/SGSN and receives a new IP address,
it will re-register in the IMS and a new ATCF may be selected. If the UE does
not receive a new IP address, it will still be re-registered on the old P-CSCF
and using the old ATCF.
NOTE 6: If the UE switches off its SRVCC capability during the lifetime of IMS
registration the SCC AS may not have the updated value of SRVCC capability.
#### 6.13.3.2 Originating sessions in PS
Figure 6.13.3.2-1 shows an originating session when the ATCF has previously
been included in the signalling path (see clause 6.13.3.1). If the ATCF was
not included in the signalling path then existing Mobile Origination
procedures described in TS 23.228 [8] are used.
Figure 6.13.3.2-1: Originating session that uses only PS media (ATCF in
signalling path)
1\. UE-1 initiates an IMS multimedia session to UE-2 and uses only PS media
flow(s). The initial SIP INVITE request goes through the ATCF in the serving
network. The ATCF may decide whether to anchor the session and allocate if
needed ATGW resources to it according to the procedure specified in sub-clause
6.2.1 of TS 23.334 [13]. See also clause 6.13.2.1.2 for criteria used to
decided when to anchor.
2\~5. ATCF forwards the initial SIP INVITE request, which is routed towards
the UE-2.
6\. Completion of originating session setup. As part of this step, the
following is done:
\- if the SCC AS knows the ATCF is in the message path, the SCC AS sends
Access Transfer Info to the ATCF with a dynamic/static ATU-STI and the
C-MSISDN.
\- The ATCF shall store the ATU-STI and the C-MSISDN. The ATCF removes the
Access Transfer Info prior forwarding any responses to the UE.
\- If not already done, the ATCF may decide, based on information not
available earlier in the procedure, to anchor the session and allocate ATGW
resources for voice media and anchor the voice media in the ATGW. The ATCF
will in such case update the far end with the media information of the ATGW in
another offer/answer exchange (this may be done as part of other required
session update).
NOTE 1: The ATU-STI is a routable address pointing to the SCC AS. It could
either be dynamically allocated (for each session) or statically allocated
(for the SCC AS).
NOTE 2: The ATCF is not modifying the dynamic STI that is exchanged between
the UE and SCC AS.
NOTE 3: The Access Leg for the control has now been established between the UE
and the SCC AS, see also Clause 6.13.1.1.
#### 6.13.3.3 Terminating sessions in PS
Figure 6.13.3.3-1 shows a terminating session when the ATCF has previously
been included in the signalling path (see clause 6.13.3.1). If the ATCF was
not included in the signalling path then existing Mobile Termination
procedures described in TS 23.228 [8] are used.
Figure 6.13.3.2-1: Terminating session that uses only PS media (ATCF in
signalling path)
1-2. A Terminating session is sent towards the roaming user UE-1 from UE-2.
The initial SIP INVITE request is routed via the I/S-CSCF to the SCC AS.
3\. The SCC AS performs necessary T-ADS procedures according to TS 23.237 [4],
and routes the request towards the UE-1. If the SCC AS knows that the ATCF
will be in the message path, the SCC AS sends Access Transfer Info to the ATCF
with a dynamic/static ATU-STI and the C-MSISDN.
NOTE 1: The Access Transfer Info can be sent as part of the existing INVITE.
4\. The INVITE is routed towards the ATCF. When receiving the INVITE, the ATCF
may decide whether to anchor the media for the session and allocate ATGW
resources for it if needed according to the procedure specified in sub-clause
6.2.1 of TS 23.334 [13]. See also clause 6.13.2.1.2 for criteria used to
decided when to anchor. The ATCF shall store the ATU-STI and the C-MSISDN. The
ATCF removes the ATU-STI and C-MSISDN from the INVITE.
5\. The SIP INVITE is forwarded to UE-1 (P-CSCF not shown in flow).
NOTE 2: In case the UE-1 returns a response to IMS that bi-directional speech
is rejected as specified in TS 23.237 [4] in clause 6.2.2.4, the ATCF will
release the ATGW resources allocated if any. The ATCF may remove itself from
the session path.
6\. Session setup is completed. As part of this step, if not already done, the
ATCF may decide, based on information not available earlier in the procedure,
to anchor the session and allocate ATGW resources for voice media and anchor
the voice media in the ATGW. The ATCF will in such case update the remote end
with the media information of the ATGW in another offer/answer exchange (this
may be done as part of other required session update).
NOTE 3: The ATCF is not modifying the dynamic STI that is exchanged between
the UE and SCC AS.
NOTE 4: The Access Leg for the control has now been established between the UE
and the SCC AS, see also Clause 6.13.1-1.
#### 6.13.3.4 PS-CS Access Transfer
##### 6.13.3.4.1 PS-CS Access Transfer -- ATGW anchored during session setup
and supporting MSC Server assisted mid-call feature
This clause describes the main differences with existing SRVCC procedures for
the case when the media is anchored in the ATGW and the ATCF enhancements are
used. Some of the procedures that are not impacted have been left out for
clarity of the flow.
Figure 6.13.3.4.1-1: PS to CS access transfer for roaming user
1\. Interaction between UE, RAN, MME/SGSN and MSC Server as specified in TS
23.216 [3]. The following step is triggered after the MSC Server has received
the PS to CS request from the MME / SGSN and has allocated resources in the
RAN.
NOTE 1: In case of PS HO taking place in parallel, and according to TS 23.216
[3] clause 6.2.2.2 and clause 6.3.2.2, both the MSC Server and the target SGSN
send independently the Reloc / HO Req to the target RAN. The target RAN
synchronizes the PS and CS resource allocation based on information (received
in transparent containers provided by the source RAN) before responding to
both MSC Server and SGSN, which in turn respond to the source MME/SGSN. The
source MME/SGSN will instruct the UE to move to the target RAN when having
received responses from both SGSN and MSC Server.
2\. The MSC Server initiates Access Transfer message according to current
procedures specified in TS 23.237 [4]. Hence, and i**f supported, t** he MSC
Server indicates its capability to support MSC Server assisted mid-call
feature. **The MSC Server provides all the supported codecs for voice in the
Access Transfer message.**
NOTE 2: It is expected that the CS MGW will support the codecs used for the
LTE voice call, and thereby the likelihood is minimized that ATCF has to
instruct the ATGW to insert codecs.
3\. The ATCF receives the Access Transfer message and correlates the
transferred session using the C-MSISDN. The ATCF identifies the correct
anchored session and proceeds with the Access Transfer of the recently added
active session. The ATCF updates the ATGW by replacing the existing PS access
leg media path information with the new CS access leg media path information,
by sending a Configure ATGW message to ATGW.
If the MSC Server assisted mid-call feature is used, and if there are more
than two sessions with speech media (at least one active), the ATCF performs
the following:
\- if there are two or more active sessions, selects the second-most recently
active speech session, puts it on hold and releases all remaining active
sessions; and
\- selects the held session that has been most recently made inactive. Any
other in-active sessions are released; and
\- the active session together with the selected in-active session is sent in
Session State Information to the MSC Server.
If the MSC Server assisted mid-call feature is used and if there are only
inactive sessions (and no active session), the ATCF performs the following:
\- selects the inactive session which was active most recently and releases
all remaining inactive sessions; and
\- includes the information that the session is inactive in the response sent
to the MSC Server.
NOTE 3: The ATCF can instruct the ATGW to keep using the local port of the PS
access leg media path for the new CS access leg media path.
4\. The ATGW sends Configure ATGW Acknowledgment message back to ATCF.
5\. The ATCF sends an Access Transfer response to the MSC Server, and in the
case MSC Server assisted mid-call feature is supported and used, the ATCF
provides Session State Information (SSI) in accordance to existing SRVCC
procedures of TS 23.237 [4] clause 6.3.2.1.4a. The media path is switched to
CS when receiving SDP information.
NOTE 4: If the ATCF instructs the ATGW to use the local port of the PS access
leg media path for the new CS access leg media path, the Access Transfer
response can be sent right after step 3.
NOTE 5: Since step 2 to 5 are in parallel to step 1, the voice break
interruption starts when either the media is switched to the CS MGW controlled
by the MSC Server enhanced for SRVCC or when the UE starts to relocate to the
target (whatever comes first). The voice break interruption ends when the UE
has tuned to the target and media has switched to CS MGW (whatever comes
last). It is assumed that the media is switched to CS MGW during the time the
UE tunes to target.
6\. After receiving the Access Transfer message, the ATCF re-establishes the
communication with the SCC AS and updates the SCC AS that the transfer has
taken place by sending an Access Transfer Update message to the SCC AS using
the stored ATU-STI. The Access Transfer Update creates a new dialogue between
the ATCF and SCC AS. The SCC AS correlates the new dialog with the remote
dialog. As there is no update in the session description, no remote end update
will be sent by the SCC AS.
NOTE 6: The new dialog between ATCF and SCC AS is needed to replace the old
dialog that has been setup over the PS access leg (and registration) and to
complete the access transfer in the SCC AS. This is to ensure that if the PS
registration for the user expires, the new home leg will not be released /
affected.
7\. The SCC AS sends confirmation response to the ATCF.
8\. If the MSC Server receives the Session State Information of more than one
active or inactive speech sessions, it initiates Access Transfer towards ATCF
then to SCC AS for the additional session. The transfer procedure is similar
as the transfer of the first session.
NOTE 7: Step 8 is performed independently of step 6 and 7.
NOTE 8: The Access Leg for the control has moved over to the CS access.
9\. Procedures as defined in TS 23.237 [4] are used to handle the cases that
the Gm reference point is retained upon PS handover procedure, not retained
upon PS handover or if there was no other voice-media flow(s) in the IMS
session.
##### 6.13.3.4.2 PS-CS Access Transfer -- ATGW anchored during session setup
and MSC Server assisted mid-call feature supported by SCC AS
This clause describes the main differences with existing SRVCC procedures for
the case when the media is anchored in the ATGW and the ATCF enhancements are
used. Some of the procedures that are not impacted have been left out for
clarity of the flow.
Figure 6.13.3.4.2-1: PS to CS access transfer for roaming user
1\. Interaction between UE, RAN, MME/SGSN and MSC Server as specified in TS
23.216 [3]. The following step is triggered after the MSC Server has received
the PS to CS request from the MME / SGSN and has allocated resources in the
RAN.
NOTE 1: In case of PS HO taking place in parallel, and according to TS 23.216
[3] clause 6.2.2.2 and clause 6.3.2.2, both the MSC Server and the target SGSN
send independently the Reloc / HO Req to the target RAN. The target RAN
synchronizes the PS and CS resource allocation based on information (received
in transparent containers provided by the source RAN) before responding to
both MSC Server and SGSN, which in turn respond to the source MME/SGSN. The
source MME/SGSN will instruct the UE to move to the target RAN when having
received responses from both SGSN and MSC Server.
2\. The MSC Server initiates Access Transfer message according to current
procedures specified in TS 23.237 [4]. Hence, and i**f supported, t** he MSC
Server indicates its capability to support MSC Server assisted mid-call
feature. **The MSC Server provides all the supported codecs for voice in the
Access Transfer message.**
NOTE 2: It is expected that the CS MGW will support the codecs used for the
LTE voice call, and thereby the likelihood is minimized that ATCF has to
instruct the ATGW to insert codecs.
3\. The ATCF receives the Access Transfer message and correlates the
transferred session using the C-MSISDN. The ATCF identifies the correct
anchored session and proceeds with the Access Transfer of the most recently
active session. The ATCF updates the ATGW by replacing the existing PS access
leg media path information with the new CS access leg media path information,
by sending a Configure ATGW message to ATGW.
NOTE 3: The ATCF may instruct the ATGW to keep using the local port of the PS
access leg media path for the new CS access leg media path.
4\. The ATGW sends Configure ATGW Acknowledgment message back to ATCF.
5\. The ATCF sends an Access Transfer response to the MSC Server. The media
path is switched to CS when receiving SDP information.
NOTE 4: If the ATCF instructs the ATGW to use the local port of the PS access
leg media path for the new CS access leg media path, the Access Transfer
response can be sent right after step 3.
NOTE 5: Since step 2 to 5 are in parallel to step 1, the voice break
interruption starts when either the media is switched to the CS MGW controlled
by the MSC Server enhanced for SRVCC or when the UE starts to relocate to the
target (whatever comes first). The voice break interruption ends when the UE
has tuned to the target and media has switched to CS MGW (whatever comes
last). It is assumed that the media is switched to CS MGW during the time the
UE tunes to target.
6\. After receiving the Access Transfer message, the ATCF re-establish the
communication with the SCC AS and updates the SCC AS that the transfer has
taken place by sending an Access Transfer Update message to the SCC AS using
the stored ATU-STI. If the MSC server indicated it supported mid-call feature,
it also indicates this in the message to the SCC AS. The Access Transfer
Update creates a new dialogue between the ATCF and SCC AS. The SCC AS
correlates the new dialog with the remote dialog (e.g., using the C-MSISDN).
As there is no update in the session description, no remote end update will be
sent.
NOTE 6: The new dialog between ATCF and SCC AS is needed to replace the old
dialog that has been setup over the PS access leg (and registration). This is
to ensure that if the PS registration for the user expires, the new home leg
will not be released / affected.
7\. The SCC AS sends confirmation response to the ATCF. If the SCC AS and MSC
supports mid call feature, the SCC AS provides the SSI according to TS 23.237
[4] clause 6.3.2.1.4a.
NOTE 7: The SSI information is in stage 3 provided by a REFER message that is
separate from the 200 OK sent as confirmation response to the Invite, i.e.,
step 7 will in practice be two messages. One 200 OK and one REFER.
8\. The ATCF forwards the SSI to the MSC server.
9\. If the MSC Server receives the Session State Information of more than one
active or inactive speech sessions, it initiates Access Transfer towards SCC
AS for the additional session.
NOTE 8: The Access Leg for the control has moved over to the CS access.
10\. Procedures as defined in TS 23.237 [4] are used to handle the cases that
the Gm reference point is retained upon PS handover procedure, not retained
upon PS handover or if there was no other voice-media flow(s) in the IMS
session.
##### 6.13.3.4.3 PS-CS Access Transfer -- ATCF not included during
registration
If the decision by the ATCF during registration was not to be included at all,
the SRVCC procedures will fall back to Rel-9 procedures according to TS 23.237
[4] clauses 6.3.2.1.4 and 6.3.2.1.4a.
##### 6.13.3.4.4 PS-CS Access Transfer -- ATGW not anchored during session
setup
This clause describes the main differences with existing SRVCC procedures for
the case when the ATCF is included in the session path, but media has not been
anchored in ATGW. Some of the procedures that are not impacted have been left
out for clarity of the flow.
Figure 6.13.3.4.4-1: PS to CS access transfer for roaming user
1\. Interaction between UE, RAN, MME/SGSN and MSC Server as specified in TS
23.216 [3]. The following step is triggered after the MSC Server has received
the PS to CS request from the MME / SGSN and has allocated resources in the
RAN.
NOTE 1: In case of PS HO taking place in parallel, and according to TS 23.216
[3] clause 6.2.2.2 and clause 6.3.2.2, both the MSC Server and the target SGSN
send independently the Reloc / HO Req to the target RAN. The target RAN
synchronizes the PS and CS resource allocation based on information (received
in transparent containers provided by the source RAN) before responding to
both MSC Server and SGSN, which in turn respond to the source MME/SGSN. The
source MME/SGSN will instruct the UE to move to the target RAN when having
received responses from both SGSN and MSC Server.
2\. The MSC Server initiates Access Transfer message according to current
procedures specified in TS 23.237 [4]. Hence, and i**f supported, t** he MSC
Server indicates its capability to support MSC Server assisted mid-call
feature. The MSC Server provides all the supported codecs for voice in the
Access Transfer message.
3\. The ATCF receives the Access Transfer message and correlates the
transferred session using the C-MSISDN. As the media session has not been
anchored in the ATGW, the ATCF forwards the Access Transfer message to the SCC
AS using the stored ATU-STI. If the MSC server indicated it supported mid-call
feature, it also indicates this in the message to the SCC AS.
4\. The SCC AS correlates the incoming Access Transfer message. As the Session
Description has changed, a remote end update is initiated according to
existing procedures.
5\. The SCC AS sends an Access Transfer response to the MSC Server, and in the
case MSC Server assisted mid-call feature is supported and used, the SCC AS
provides Session State Information (SSI) in accordance to existing SRVCC
procedures of TS 23.237 [4] clause 6.3.2.1.4a.
6\. The ATCF forwards the response to the MSC server.
7\. If the MSC Server receives the Session State Information of more than one
active or inactive speech sessions, it initiates Access Transfer towards SCC
AS for the additional session according to TS 23.237 [4] clause 6.3.2.1.4a.
8\. Procedures as defined in TS 23.237 [4] are used to handle the cases that
the Gm reference point is retained upon PS handover procedure, not retained
upon PS handover or if there was no other voice-media flow(s) in the IMS
session.
#### 6.13.3.5 Failure to complete PS-CS Access Transfer
In case of failure before MSC Server initiates Session Transfer, there is no
difference to TS 23.216 [3], clause 8.1.
In case of failure after UE receives HO command, the UE attempts to return to
E-UTRAN/UTRAN and initiates signalling to transfer the session back to
E-UTRAN/UTRAN using procedures described in TS 23.216 [3], clause 8.1, with
the difference that the session transfer back to E-UTRAN is handled by ATCF if
the ATCF identifies this to be a session transfer.
In case of handover cancellation, and when receiving the handover cancellation
message, UE starts the re-establishment procedure, as though it required a
transfer of the session to E-UTRAN/UTRAN, according to the procedures
described in TS 23.216 [3], clause 8.1, with the difference that the session
transfer back to E-UTRAN is handled by ATCF if the ATCF identifies this to be
a session transfer.
# 7 Assessment
Editor\'s Note: This clause will contain the assessment to the alternative
solutions.
## 7.1 Assessment Criteria
The criteria include:
\- Performance enhancement close to optimal Tu=Td=Tb3, and not exceeding
300ms, in roaming and non-roaming scenarios:
NOTE: This criterion (has highest importance for selecting an alternative.);
\- Support of bearer local breakout ;
\- Impacts on network architecture;
\- Additional network resource consumption in EPS/HSPA compared to Rel9 SRVCC;
\- Additional network resource consumption in CS related entities compared to
Rel9 SRVCC;
\- Call set up delay due to SRVCC enhancement;
\- Support of full Rel‑9 SRVCC functionalities as specified in TS 23.237 [4].
\- Looping/tromboning of user plane in the home routed scenario (i.e. P-GW and
P-CSCF in hPLMN);
NOTE: The importance of this specific criterion depends on whether mobile
operator industry adopts visited network P-CSCF roaming by the same time as
deploying eSRVCC.
Editor\'s Note: Remaining alternatives will be evaluated based on above
Criteria.
## 7.2 Assessment of alternatives
The following table provides an assessment of the alternatives documented in
clause 6, describing the type of enhancement, UE and system impact and whether
the alternatives can achieve a performance enhancement close to the optimal
Tu=Td=Tb3 in both roaming and non-roaming scenarios (see also clause 5.1). The
table is limited to the alternatives that are still considered (see also
clause 8).
+-------+-------+-------+-------+-------+-------+-------+-------+ | | Alt | Alt | Alt | Alt | Alt | Alt | Alt | | | 1.2\ | 4\ | 8\ | 9\ | 10\ | 11\ | 12\ | | | delay | Media | media | media | e | Media | local | | | predi | a | anch | dete | SRVCC | a | anch | | | ction | nchor | oring | ction | with | nchor | oring | | | in | in | in | | PDN | in | with | | | MSC | the | the | | bi-ca | the | Ind | | | S | se | home | | sting | IMS | irect | | | erver | rving | ne | | | ALG | Forwa | | | | ne | twork | | | in | rding | | | | twork | | | | VPLM | (was | | | | | | | | | 6&7) | +-------+-------+-------+-------+-------+-------+-------+-------+ | Type | Timer | Mob | Media | Early | Media | Mob | Media | | of | based | ility | a | media | a | ility | a | | e | on | a | nchor | dete | nchor | a | nchor | | nhanc | delay | nchor | in | ction | in | nchor | in | | ement | pred | in | MRFP | + | PGW | ( | SWG; | | | icted | MSC | in | Timer | | VSTF) | GTP | | | be | /VATF | HPLMN | based | | in | t | | | tween | | | | | vi | unnel | | | MSC | | | | | sited | to | | | and | | | | | | MS | | | SCC | | | | | | C/MGW | | | AS | | | | | | + | | | | | | | | | SGSN | +-------+-------+-------+-------+-------+-------+-------+-------+ | SRVCC | No | No | No | No | No | No | No | | UE | | | | | | | | | i | | | | | | | | | mpact | | | | | | | | | (R10 | | | | | | | | | UE | | | | | | | | | requ | | | | | | | | | ired) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Node | MSC | MSC, | MSC, | MSC, | MSC, | /IMS | MSC, | | / | (SIP | SCC | SCC | MGW, | MGW, | ALG, | MGW, | | r | i/f), | AS, | AS | PCC | MME, | SCC | MME, | | emote | SCC | opt. | (s | /RACS | PGW, | AS, | S-GW, | | end | AS | P | ubalt | im | PCC | P | SGSN, | | i | | -CSCF | #1) | pacts | | -CSCF | SCC | | mpact | | | / | on | | | AS, | | | | | TAS | r | | | PCC | | | | | &IBCF | emote | | | | | | | | (s | end | | | | | | | | ubalt | | | | | | | | | \ | | | | | | | | | #2),\ | | | | | | | | | MRFP | | | | | | | | | n | | | | | | | | | eeded | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Ar | Yes | Yes | Yes | Yes | Yes | Yes | Yes | | chite | | | | | | | | | cture | | | | | | | | | i | | | | | | | | | mpact | | | | | | | | | (new | | | | | | | | | n | | | | | | | | | odes, | | | | | | | | | new | | | | | | | | | i | | | | | | | | | nterf | | | | | | | | | aces, | | | | | | | | | new | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | ality | | | | | | | | | on | | | | | | | | | exi | | | | | | | | | sting | | | | | | | | | n | | | | | | | | | odes) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Han | No | Yes | No | No, | Yes | Yes | Yes | | dover | | | | | | | | | p | D | Td=T | Td= | Only | Td=Tu | Td= | Td= | | erfor | epend | u=Tb3 | Tu=ma | if | =Tb3; | Tu = | Tu=Tb | | mance | on | if | x(Ta1 | there | | Max | | | e | the | VATF | +Ta4, | is DL | | (T | | | nhanc | delay | in | Tb3)\ | media | | a1*, | | | ement | s | MSC | \ | | | Tb3 | | | close | pread | S | Only | | | )=Tb3 | | | to | in | erver | in | | | | | | op | the | sel | n | | | Ta1* | | | timal | ne | ected | on-ro | | | is | | | Td=T | twork | by | aming | | | the | | | u=Tb3 | and | MME; | scena | | | dur | | | in | co | If | rios. | | | ation | | | ro | rrect | VATF | | | | of | | | aming | delay | in | | | | I | | | and | estim | P | | | | NVITE | | | n | ation | -CSCF | | | | be | | | on-ro | by | / | | | | tween | | | aming | the | IMS | | | | MSC | | | scen | SCC | -ALG, | | | | and | | | arios | AS | same | | | | IM | | | | and | as | | | | S-ALG | | | | the | Alt | | | | in | | | | MSC | 11. | | | | the | | | | S | | | | | same | | | | erver | | | | | ne | | | | | | | | | twork | | | | | | | | | ( | | | | | | | | | Ta1* | | | | | | | | | \<\< | | | | | | | | | Ta1). | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Req | Yes | Yes | No | Yes | Yes | Yes | Yes | | uires | | | | | | | | | su | | | | | | | | | pport | | | | | | | | | in | | | | | | | | | vi | | | | | | | | | sited | | | | | | | | | ne | | | | | | | | | twork | | | | | | | | | (home | | | | | | | | | if | | | | | | | | | not | | | | | | | | | roa | | | | | | | | | ming) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Su | Yes | Yes | No | Yes | Yes | Yes | Yes | | pport | | | | | | | | | of | | | | | | | | | local | | | | | | | | | bre | | | | | | | | | akout | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Effi | FFS | FFS | FFS | FFS | FFS | FFS | FFS | | cient | | | | | | | | | usage | | | | | | | | | of | | | | | | | | | ne | | | | | | | | | twork | | | | | | | | | reso | | | | | | | | | urces | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Other | - | - If | - | -D | - | - | - | | cons | D | VATF | Does | elays | MME | U | MME/ | | idera | elays | is | not | exec | needs | pdate | S-GW | | tions | exec | not | work | ution | to | of | need | | | ution | co-lo | in | of | know | PS-DN | to | | | of | cated | ro | han | IMS | via | h | | | han | with | aming | dover | c | HSS | andle | | | dover | P- | cases | co | odecs | to | t | | | co | CSCF, | when | mmand | (new | se | ransp | | | mmand | addit | local | (by | conc | rving | arent | | | (by | ional | bre | Ta | ept); | node | i | | | Ta1 | call | akout | 1+Ta2 | pos | ( | nform | | | +Ta4) | setup | in | +Ta3 | sible | addit | ation | | | send | delay | vi | +Ta4) | race | ional | for | | | to UE | | sited | send | cond | ISD | SDP | | | and | - | ne | to UE | ition | or | (new | | | may | the | twork | and | if | new | conc | | | cause | same | is | may | SDP | proce | ept); | | | call | VATF | requ | cause | u | dure) | Pos | | | drop | has | ired. | call | pdate | and | sible | | | in | to be | | drop | is at | pos | race | | | hig | sel | | in | the | sible | cond | | | h-mob | ected | | hig | same | race | ition | | | ility | both | | h-mob | time | cond | in | | | situa | for | | ility | as | ition | case | | | tions | call | | situa | SRVCC | (if | u | | | | setup | | tions | | u | pdate | | | | and | | | - | pdate | of | | | | for | | - | does | at | SDP | | | | SRVCC | | Im | not | the | is at | | | | | | pacts | su | same | the | | | | | | H.248 | pport | time | same | | | | | | be | mu | as | time | | | | | | tween | ltipl | S | as | | | | | | MSC | exing | RVCC) | SRVCC | | | | | | and | voice | | | | | | | | MGW | st | | - | | | | | | | reams | | does | | | | | | | on | | not | | | | | | | one | | su | | | | | | | b | | pport | | | | | | | earer | | m | | | | | | | | | ultip | | | | | | | - | | lexed | | | | | | | Im | | voice | | | | | | | pacts | | st | | | | | | | H.248 | | reams | | | | | | | be | | on | | | | | | | tween | | one | | | | | | | MSC | | b | | | | | | | and | | earer | | | | | | | MGW | | | | | | | | | | | | | | | | | | - | | | | | | | | | Im | | | | | | | | | pacts | | | | | | | | | the | | | | | | | | | IP | | | | | | | | | ne | | | | | | | | | twork | | | | | | | | | deplo | | | | | | | | | yment | | | +-------+-------+-------+-------+-------+-------+-------+-------+
The performance enhancement (best close to the optimum (Tu=Td=Tb3) but in any
case not higher than 300ms) has highest importance for selecting an
alternative.
It is preferred that the architectural impact is only in the HPLMN. If
performance enhancement or other criteria can be met, architectural impact in
the VPLMN may be acceptable.
Assessment on criteria (see also clause 7.1):
\- The following alternatives provide performance enhancement close to the
optimum in roaming and non-roaming cases: #4, 10, 11, 12.
\- Alt 8, performance enhancement depends on the target access leg update.
Optimal performance requires bi-casting and an impact on MSC Server
\- The alternatives #1.2, and 9 delay execution of handover command send to UE
and may cause call drop in high-mobility situations.
\- The following alternatives support local breakout: #1.2, 4, 9, 10, 11, 12
\- The following alternatives impact the UE: none
\- The following alternatives minimize the impact on the network architecture:
TBD
\- The following alternatives provide efficient usage of network resources:
TBD
Only Alternatives #4, 10, 11 and 12 support both performance enhancement close
to the optimum in roaming and non-roaming cases and local breakout. The merge
of Alternatives #4 and 11 is called SIP-based alternative and the merge of
Alternatives #10 and #12 is called GW-based alternative in the following
table.
+----------------------+----------------------+----------------------+ | | SIP-based | GW-based alternative | | | alternative | | +----------------------+----------------------+----------------------+ | Type of enhancement | Signalling anchor in | Media | | | ATCF controlling | \"anchor/relay\" in | | | media anchor in ATGW | PGW before and | | | | during transfer | | | | controlled by MME, | | | | PCC, SCC AS | +----------------------+----------------------+----------------------+ | SRVCC UE impact (R10 | No | No | | UE required) | | | +----------------------+----------------------+----------------------+ | Node / remote end | SCC AS, HSS, | MSC Server, PCC, | | impact | P-CSCF/IBCF that is | P-CSCF, | | | hosting ATCF, ATGW | MME/SGSN(HSPA), PGW. | | | (new logical | | | | functionality) | | +----------------------+----------------------+----------------------+ | Architecture impact | Yes | Yes | | (new nodes, new | | | | interfaces, new | | | | functionality on | | | | existing nodes) | | | +----------------------+----------------------+----------------------+ | Handover performance | Yes (*Note 1) | During transfer: | | enhancement close to | | | | optimal Td=Tu=Tb3 in | Td= Tu = Max | Td=Tu=Max (Tb3, | | roaming and | (Tm1*+Tb3, Tb3) | Tm1+Tb3); | | non-roaming | | | | scenarios | Tm1* is the time | Tm1 is the time | | | between when the | between when the PGW | | | ATGW switches the | switches the media | | | media and before the | and before the UE | | | UE moves to the | moves to target | | | target access | access (0\<=Tm1). | | | duration of INVITE | | | | between MSC and ATCF | Additional voice | | | in the same network | break (longer than | | | (0 \<= Tm1* \<\< | 300 ms in roaming | | | Ta4). | cases) may be added | | | | due to session | | | Note1: Dependency on | transfer procedure | | | PS HO procedure | when gating/policing | | | (FFS) | of media is deployed | | | | at remote side (such | | | Note 2:Dependency on | as PCC, RACS, IMS | | | ATCF switching | ALG/IMS AGW, | | | procedure | IBCF/TrGW etc). | | | | | | | | Txtra = Ta3 + Ta4. | | | | | | | | I.e., the time it | | | | takes to send back | | | | the SDP answer from | | | | the remote side to | | | | the MSC Server. | +----------------------+----------------------+----------------------+ | Requires support in | Yes | Yes | | visited network | | | | (home if not | In roaming case, | In roaming case, no | | roaming) | hPLMN has to support | impact on hPLMN. | | | the eSRVCC | | | | capability. | | +----------------------+----------------------+----------------------+ | Efficient usage of | ATGW for all voice | Continuous use of | | network resources | session required. | P-GW until IMS | | | | session transfer | | | Additional | completes. | | | interaction between | | | | HSS and serving node | | | | (SGSN/MME) when the | | | | STN-SR is provided | | | | during initial | | | | registration, . | | +----------------------+----------------------+----------------------+ | Other considerations | - In order to | - MME/SGSN(HSPA) | | | anchor the ATCF | needs to know IP | | | roaming agreement | address / port for | | | required among | each user used by | | | operators. | PGW (new concept) | | | | (FFS) | | | - Conditional media | | | | anchor is FFS | - does not support | | | | multiple active or | | | | multiple held calls | | | | (no performance | | | | required, anyhow) -- | | | | fallback to SRVCC R9 | | | | | | | | - Additional voice | | | | break(s) when | | | | performing access | | | | transfer towards SCC | | | | AS with remote end | | | | update | +----------------------+----------------------+----------------------+
# 8 Conclusion
The conclusion has been drawn to select the \"Consolidated Alternative \-- SIP
based solution for eSRVCC\" for normative specification.
###### ### Annex A: Reducing the call drop probability
This annex defines a method of reducing the call drop probability during the
SRVCC procedure.
# A.1 Pre-handover optimization
## A.1.1 Architecture Reference Model
The architecture model of Rel-8 SRVCC is not affected.
## A.1.2 Functional Entities
Editor\'s Note: This subclause will define the functionalities of functional
entities for the enhanced SRVCC.
### A.1.2.1 MSC Server
Besides the functions defined in TS 23.216 [3], an MSC Server provides the
following functions:
\- Sending back a pre-Handover Notification to MME after CS handover
preparation procedure.
\- Invoking an IMS Service Continuity procedure specified in TS 23.216 [3] or
enhanced to optimize SRVCC handover in this study report;
\- Sending back PS to CS handover response to the source MME as specified in
TS 23.216 [3] when the IMS Service Continuity procedure succeeds.
### A.1.2.2 MME
Besides the functions defined in TS 23.216 [3], an MME shall handle the pre-
Handover Notification from MSC Server.
### A.1.2.3 E-UTRAN
Besides the functions defined in TS 36.413 [9], the source eNB provides the
following functions:
\- Handling the pre-Handover Command from MME.
\- Restarting the timer for the Handover Preparation procedure to wait for the
final Handover Command from MME.
### A.1.2.4 UE
Besides the functions defined in TS 23.216 [3], the UE provides the following
functions:
\- Handling the pre-Handover Command from E-UTRAN.
\- Performing handover procedures without the final Handover Command in some
conditions.
## A.1.3 Message Flows
The Pre-handover optimization is shown in the following figure.
Figure A.1.3-1: Pre-handover optimization to SRVCC using Serial Handover
While succeeding in CS handover preparation, the MSC Server enhanced for SRVCC
sends pre-Handover Notification to MME, which includes the necessary CS HO
command information for the UE access to the UTRAN/GERAN. The information
carried in PS to CS pre-Handover Notification is the same with that in PS-CS
handover response. At the same time, the MSC Server enhanced for SRVCC
establishes the circuit connection with the target MSC and performs the
session transfer procedure.
The MME synchronizes the PS handover response and the CS pre-Handover
Notification, and then sends a pre-Handover Command to the source E-UTRAN. The
information carried in pre-Handover Command is the same with that in Handover
Command.
When receiving the pre-Handover Command message, the source eNB shall send a
pre-Handover Command to UE, and then restart the timer for the Handover
Preparation procedure (TS1~RELOCprep)~ to continue waiting for the final
Handover Command.
Upon receiving the pre-Handover Command, the UE does not tune to the target
GERAN/UTRAN immediately, and starts a pre-Handover timer to delay a period to
wait the final Handover Command.
After establishing the circuit connection with the target MSC and performing
the session transfer procedure, the MSC Server enhanced for SRVCC sends back
PS to CS handover response to the source MME as specified in TS 23.216 [3].
The MME coordinates the two relocations, and sends the final Handover Command
to UE. When the UE receives the Handover Command, the UE executes the
handover.
In the following conditions, the UE will execute the handover before receiving
the final Handover Command:
\- The UE finds that it is out of EPS coverage during the period; or
\- The wireless condition is too bad to communicate during the period;
If the UE does not receive the final Handover Command before the pre-Handover
timer expires, the UE will cancel pre-Handover procedure and continue staying
in the E-UTRAN.
The pre-Handover Command from E-UTRAN to UE over Uu interface can be defined
by:
\- Inserting a pre-Handover indication in the current Handover Command; or
\- Defining a new pre-Handover Command message.
NOTE 1: If the pre-Handover Command is defined using a pre-Handover indication
in Handover Command, the pre-Rel-10 SRVCC UE will ignore the indication and
execute the handover procedure immediately as specified in TS 23.216 [3]. The
MSC or the MME may not send the final Handover Command to the E-UTRAN if the
MSC or the MME finds that the handover completes. So the backward
compatibility to the UE of previous releases is provided. This alternative
does not improve the performance of pre-Rel-10 SRVCC UE.
NOTE 2: If the pre-Handover Command is defined using a new message, the pre-
Rel-10 SRVCC UE will discard the message. When the final Handover Command
arrives, the UE executes the handover. So the backward compatibility to the UE
of previous releases is also provided. This alternative can improve the
interrupt time performance, but has no contribution to the high mobility.
The approaches defining pre-Hanover Command over Uu interface can be also
applied to the definitions of the pre-Handover Notification from MSC to MME
over Sv interface and the pre-Handover Command from MME to E-UTRAN over S1
interface.
###### ### Annex B: Impacts on nodes of eSRVCC alternatives
Table B.1: Evaluation of alternatives
+-------+-------+-------+-------+-------+-------+-------+-------+ | | Alt | Alt | Alt | Alt | Alt | Alt | Alt | | | 1.2\ | 4\ | 8\ | 9\ | 10\ | 11\ | 12\ | | | delay | Media | media | media | e | Media | local | | | predi | a | anch | dete | SRVCC | a | anch | | | ction | nchor | oring | ction | with | nchor | oring | | | in | in | in | | PDN | in | with | | | MSC | the | the | | bi-ca | the | Ind | | | S | se | home | | sting | IMS | irect | | | erver | rving | ne | | | ALG | Forwa | | | | ne | twork | | | in | rding | | | | twork | | | | VPLMN | (was | | | | | | | | | 6&7) | +-------+-------+-------+-------+-------+-------+-------+-------+ | UE | | | | **UE | | | | | | | | | needs | | | | | | | | | to be | | | | | | | | | RFC | | | | | | | | | 3264 | | | | | | | | | comp | | | | | | | | | liant | | | | | | | | | in | | | | | | | | | order | | | | | | | | | to | | | | | | | | | l | | | | | | | | | isten | | | | | | | | | to | | | | | | | | | the | | | | | | | | | old | | | | | | | | | s | | | | | | | | | ource | | | | | | | | | until | | | | | | | | | the | | | | | | | | | new | | | | | | | | | s | | | | | | | | | ource | | | | | | | | | is | | | | | | | | | av | | | | | | | | | ailab | | | | | | | | | le.** | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | MSC | **MSC |** MSC | | **MGW |** MSC | **MSC |**.**| | s | s | s | | de | all | s | | | erver | erver | erver | | tects | ocate | erver |** MGW | | and | req | has | | the | a | uses | needs | | MGW | uires | VATF | | dow | pprop | the | to | | | I2 | fun | | nlink | riate | P | mai | | | in | ction | | media | MGW | SI-DN | ntain | | | terfa | ality | | p | to | to | GTP-U | | | ce.**| only | | acket | re | find | to | | | | for | | from | ceive | a | wards | | |** MSC | the | | r | downl | pprop | the | | | s | voice | | emote | ink/u | riate | SGW**| | | erver | call | | UE | plink | IM | | | | needs | sessi | | and | pa | S-ALG |** In | | | to be | ons**| | pro | ckets | and | order | | | pre | | | vides | from | pro | to | | | confi |** If | | an | the | vides | hand | | | gured | the | | indic | PGW**| all | over | | | with | UE | | ation | | the | the | | | a | init | | to |** MSC | c | VoIP | | | av | iates | | the | s | odecs | media | | | erage | the | | MSC | erver | supp | to | | | time | media | | ser | in | orted | MGW, | | | span | u | | ver**| forms | in | the | | | for | pdate | | | the | the | MGW | | | CS | for | |** MSC | MME | se | as | | | HO**| non- | | s | of | ssion | signs | | | | voice | | erver | the | tra | IP | | |** MSC | PS | | needs | GW | nsfer | ad | | | s | be | | to | ad | reque | dress | | | erver | arers | | inte | dress | st.**| and | | | esti | MSC | | rpret | on | | TEID | | | mates | s | | the | which | | for | | | the | erver | | \'new | bi-ca | | p | | | delay | tri | | mess | sting | | acket | | | from | ggers | | age\' | is to | | be | | | MSC | r | | and | be | | arers | | | s | emote | | send | p | | to | | | erver | leg | | the | erfor | | tran | | | to | u | | PS- | med** | | sport | | | the | pdate | | to-CS | | | VoIP | | | SCC | in | | r | **MSC | | media | | | AS** | stead | | espon | inst | | pa | | | | of | | se.**| ructs | | ckets | | |** MSC | the | | | the | | be | | | s | SCC | | | MGW | | tween | | | erver | AS.**| | | to | | MGW | | | runs | | | | tran | | and | | | a | | | | scode | | S-GW | | | timer | | | | DL | | and | | | cor | | | | RTP | | this | | | respo | | | | to | | i | | | nding | | | | the | | nform | | | to | | | | CS | | ation | | | esti | | | | stre | | is | | | mated | | | | am.** | | t | | | d | | | | | | ransf | | | elays | | | | **MGW | | erred | | | to | | | | to | | to | | | s | | | | inte | | the | | | ynchr | | | | rwork | | MME | | | onize | | | | be | | in | | | the | | | | tween | | PS- | | | tra | | | | the | | to-CS | | | nsfer | | | | CS | | respo | | | pr | | | | tr | | nse** | | | ocedu | | | | affic | | | | | res**| | | | and | | | | | | | | | RTP | | | | | | | | | st | | | | | | | | | ream, | | | | | | | | | it | | | | | | | | | s | | | | | | | | | hould | | | | | | | | | have | | | | | | | | | confe | | | | | | | | | rence | | | | | | | | | b | | | | | | | | | ridge | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | ality | | | | | | | | | (2/3G | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | leg, | | | | | | | | | leg | | | | | | | | | to | | | | | | | | | wards | | | | | | | | | PGW, | | | | | | | | | leg | | | | | | | | | to | | | | | | | | | wards | | | | | | | | | IMS | | | | | | | | | for | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | con | | | | | | | | | tinui | | | | | | | | | ty)** | | | | | | | | | | | | | | | | | | **MGW | | | | | | | | | needs | | | | | | | | | to | | | | | | | | | spoof | | | | | | | | | the | | | | | | | | | IP | | | | | | | | | ad | | | | | | | | | dress | | | | | | | | | of | | | | | | | | | the | | | | | | | | | UE** | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | MME | | **MME | | |** MME | | **MME | | | | needs | | | dow | | p | | | | to | | | nload | | asses | | | | ide | | | the | | on | | | | ntify | | | RTP | | the | | | | the | | | s | | MGW | | | | same | | | tream | | IP | | | | MSC | | | codec | | ad | | | | s | | | from | | dress | | | | erver | | | PCC | | and | | | | that | | | and | | TEIDs | | | | is | | | i | | to | | | | ass | | | nform | | wards | | | | igned | | | to | | t | | | | in | | | the | | arget | | | | the | | | MGW | | S | | | | IMS | | | d | | GSN** | | | | call | | | uring | | | | | | se | | | SR | | ** | | | | tup**| | | VCC** | | Sends | | | | | | | | | co | | | | | | | **Tr | | mmand | | | | | | | igger | | to | | | | | | | PGW | | the | | | | | | | to | | SGW | | | | | | | pe | | to | | | | | | | rform | | i | | | | | | | bi-ca | | nform | | | | | | | sting | | to | | | | | | | and | | which | | | | | | | pr | | e | | | | | | | ovide | | ntity | | | | | | | the | | the | | | | | | | MGW | | media | | | | | | | re | | flow | | | | | | | lated | | s | | | | | | | i | | hould | | | | | | | nform | | be | | | | | | | ation | | s | | | | | | | when | | witch | | | | | | | the | | ed.** | | | | | | | SRVCC | | | | | | | | | oper | | **Re | | | | | | | ation | | ceive | | | | | | | is | | the | | | | | | | tr | | SDP | | | | | | | igger | | i | | | | | | | ed.** | | nform | | | | | | | | | ation | | | | | | | **It | | about | | | | | | | also | | the | | | | | | | needs | | voice | | | | | | | to | | se | | | | | | | i | | ssion | | | | | | | nform | | from | | | | | | | the | | the | | | | | | | PGW | | SGW | | | | | | | when | | and | | | | | | | to | | pass | | | | | | | stop | | it on | | | | | | | bi | | to | | | | | | | -cast | | the | | | | | | | ing** | | MSC | | | | | | | | | s | | | | | | | **I | | erver | | | | | | | nform | | d | | | | | | | the | | uring | | | | | | | MSC | | SRV | | | | | | | s | | CC.** | | | | | | | erver | | | | | | | | | that | | **The | | | | | | | e | | MME | | | | | | | SRVCC | | also | | | | | | | oper | | p | | | | | | | ation | | asses | | | | | | | is | | this | | | | | | | s | | i | | | | | | | uppor | | nform | | | | | | | ted** | | ation | | | | | | | | | d | | | | | | | | | uring | | | | | | | | | mob | | | | | | | | | ility | | | | | | | | | manag | | | | | | | | | ement | | | | | | | | | pro | | | | | | | | | cedur | | | | | | | | | es.**| | | | | | | | | | | | | | | | | | * | | | | | | | | | *Dete | | | | | | | | | rmine | | | | | | | | | wh | | | | | | | | | ether | | | | | | | | | to | | | | | | | | | tr | | | | | | | | | igger | | | | | | | | | SRVCC | | | | | | | | | in | | | | | | | | | VPLMN | | | | | | | | | based | | | | | | | | | on | | | | | | | | | wh | | | | | | | | | ether | | | | | | | | | the | | | | | | | | | SDP | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | has | | | | | | | | | been | | | | | | | | | rec | | | | | | | | | eived | | | | | | | | | from | | | | | | | | | HP | | | | | | | | | LMN** | +-------+-------+-------+-------+-------+-------+-------+-------+ | SGW | | | | | * | | * | | | | | | | _Pass | |_ S-GW | | | | | | | on | | per | | | | | | | the | | forms | | | | | | | codec | | media | | | | | | | i | | anch | | | | | | | nform | | oring | | | | | | | ation | | and | | | | | | | from | | swi | | | | | | | PCRF | | tches | | | | | | | to | | the | | | | | | | wards | | b | | | | | | | MME**| | earer | | | | | | | | | path | | | | | | | | | for | | | | | | | | | media | | | | | | | | | data | | | | | | | | | forwa | | | | | | | | | rding | | | | | | | | | from | | | | | | | | | E- | | | | | | | | | UTRAN | | | | | | | | | to | | | | | | | | | the | | | | | | | | | MGW** | | | | | | | | | | | | | | | | | | **It | | | | | | | | | per | | | | | | | | | forms | | | | | | | | | PS HO | | | | | | | | | with | | | | | | | | | SGSN | | | | | | | | | for | | | | | | | | | non- | | | | | | | | | voice | | | | | | | | | be | | | | | | | | | arers | | | | | | | | | (need | | | | | | | | | to | | | | | | | | | d | | | | | | | | | istin | | | | | | | | | guish | | | | | | | | | the | | | | | | | | | voice | | | | | | | | | b | | | | | | | | | earer | | | | | | | | | from | | | | | | | | | non- | | | | | | | | | voice | | | | | | | | | bear | | | | | | | | | er)** | | | | | | | | | | | | | | | | | | **Re | | | | | | | | | ceive | | | | | | | | | SDP | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | from | | | | | | | | | the | | | | | | | | | PGW | | | | | | | | | and | | | | | | | | | pr | | | | | | | | | ovide | | | | | | | | | to | | | | | | | | | the | | | | | | | | | M | | | | | | | | | ME.** | +-------+-------+-------+-------+-------+-------+-------+-------+ | PGW | | | | | * | | **Re | | | | | | | *Pass | | ceive | | | | | | | on | | SDP | | | | | | | the | | i | | | | | | | codec | | nform | | | | | | | i | | ation | | | | | | | nform | | from | | | | | | | ation | | the | | | | | | | from | | PCRF | | | | | | | PCRF | | and | | | | | | | to | | pr | | | | | | | wards | | ovide | | | | | | | MME** | | to | | | | | | | | | the | | | | | | | **PGW | | MME | | | | | | | for | | via | | | | | | | bi | | S | | | | | | | casti | | GW.** | | | | | | | ng,**| | | +-------+-------+-------+-------+-------+-------+-------+-------+ | SGSN | | | | | | |** Re | | | | | | | | | ceive | | | | | | | | | the | | | | | | | | | SDP | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | of | | | | | | | | | the | | | | | | | | | voice | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | from | | | | | | | | | the | | | | | | | | | AF | | | | | | | | | and | | | | | | | | | S | | | | | | | | | -GW**| +-------+-------+-------+-------+-------+-------+-------+-------+ | PCC | | | |** PCC | **pro | |** O | | | | | | /RACS | vides | | btain | | | | | | im | the | | the | | | | | | pacts | codec | | SDP | | | | | | on | i | | i | | | | | | r | nform | | nform | | | | | | emote | ation | | ation | | | | | | end | to | | of | | | | | | (?)**| the | | the | | | | | | | PG | | voice | | | | | | | W/SGW | | se | | | | | | | rec | | ssion | | | | | | | eived | | from | | | | | | | from | | the | | | | | | | the | | AF | | | | | | | AF** | | and | | | | | | | | | pr | | | | | | | | | ovide | | | | | | | | | to | | | | | | | | | the | | | | | | | | | MME | | | | | | | | | via | | | | | | | | | PGW/ | | | | | | | | | SGW**| +-------+-------+-------+-------+-------+-------+-------+-------+ | SCC |** Pe | **For |** For | | | **SCC | | | AS | rform | un | #1** | | | AS | | | | signa | opti | | | | main | | | | lling | mized | **red | | | tains | | | | delay | call | irect | | | the | | | | estim | set | for | | | P | | | | ation | up:** | anch | | | SI-DN | | | | from | | oring | | | in | | | | SCC | * | voice | | | the | | | | AS to | _anch | compo | | | HSS_ _| | | | the | oring | nents | | | | | | | r | the | in | | | * | | | | emote | call | MRFP | | |_ Allo | | | | end | at | d | | | cates | | | | for | MSC | uring | | | a | | | | ses | s | se | | | dy | | | | sions | erver | ssion | | | namic | | | | su | /VATF | estab | | | STI | | | | bject | of | lishm | | | for | | | | to | the | ent**| | | UE-1 | | | | SR | voice | | | | and | | | | VCC** | call | **Co | | | pro | | | | | ses | mbine | | | vides | | | |** Pr | sions | the | | | to | | | | ovide | which | SDPs | | | the | | | | the | may | rec | | | IMS- | | | | same | be | eived | | | ALG**| | | | to | su | from | | | | | | | the | bject | the | | | | | | | MSC | to | MRCP | | | | | | | s | SR | and | | | | | | | erver | VCC** | the | | | | | | | in a | | ca | | | | | | | new | **Exe | lling | | | | | | | me | cutes | UE in | | | | | | | ssage | the | the | | | | | | | e.g | algo | SIP | | | | | | | d | rithm | I | | | | | | | uring | to | NVITE | | | | | | | se | find | to | | | | | | | ssion | the | wards | | | | | | | est | co | the | | | | | | | ablis | rrect | r | | | | | | | hment | MSC | emote | | | | | | | pr | serv | end** | | | | | | | ocedu | er(VA | | | | | | | | res**| TF)** | ** | | | | | | | | | Store | | | | | | | | | the | | | | | | | | | \ | | | | | | | | | 'call | | | | | | | | | refe | | | | | | | | | rence | | | | | | | | | URI\' | | | | | | | | | rec | | | | | | | | | eived | | | | | | | | | from | | | | | | | | | the | | | | | | | | | MRFC | | | | | | | | | for | | | | | | | | | c | | | | | | | | | orrel | | | | | | | | | ating | | | | | | | | | the | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | d | | | | | | | | | uring | | | | | | | | | the | | | | | | | | | SR | | | | | | | | | VCC**| | | | | | | | | | | | | | | | | |** If | | | | | | | | | bi-ca | | | | | | | | | sting | | | | | | | | | is | | | | | | | | | su | | | | | | | | | pport | | | | | | | | | ed:**| | | | | | | | | | | | | | | | | |** Run | | | | | | | | | s | | | | | | | | | uperv | | | | | | | | | ision | | | | | | | | | timer | | | | | | | | | for | | | | | | | | | bi | | | | | | | | | -cast | | | | | | | | | ing**| | | | | | | | | | | | | | | | | |** Tr | | | | | | | | | igger | | | | | | | | | MRFP | | | | | | | | | to | | | | | | | | | start | | | | | | | | | /stop | | | | | | | | | bi | | | | | | | | | -cast | | | | | | | | | ing**| | | | | | | | | | | | | | | | | |** # | | | | | | | | | for | | | | | | | | | 2**| | | | | | | | | | | | | | | | | |** SCC | | | | | | | | | AS | | | | | | | | | intro | | | | | | | | | duces | | | | | | | | | TAS | | | | | | | | | in | | | | | | | | | the | | | | | | | | | signa | | | | | | | | | lling | | | | | | | | | to | | | | | | | | | wards | | | | | | | | | r | | | | | | | | | emote | | | | | | | | | end**| | | | | | | | | | | | | | | | | |** Pro | | | | | | | | | vides | | | | | | | | | the | | | | | | | | | \' | | | | | | | | | bi-ca | | | | | | | | | sting | | | | | | | | | desi | | | | | | | | | rable | | | | | | | | | in | | | | | | | | | dicat | | | | | | | | | ion\' | | | | | | | | | to | | | | | | | | | the | | | | | | | | | T | | | | | | | | | AS(if | | | | | | | | | bi-ca | | | | | | | | | sting | | | | | | | | | is | | | | | | | | | sup | | | | | | | | | porte | | | | | | | | | d).**| | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | P-C | |** For | | | | | | | SCF/S | | opti | | | | | | | -CSCF | | mized | | | | | | | | | call | | | | | | | | | set | | | | | | | | | up:**| | | | | | | | | | | | | | | | | |** A | | | | | | | | | nchor | | | | | | | | | the | | | | | | | | | call | | | | | | | | | in | | | | | | | | | the | | | | | | | | | VATF | | | | | | | | | if | | | | | | | | | P | | | | | | | | | -CSCF | | | | | | | | | is | | | | | | | | | lo | | | | | | | | | cated | | | | | | | | | in | | | | | | | | | VP | | | | | | | | | LMN**| | | | | | | | | | | | | | | | | |** Exe | | | | | | | | | cutes | | | | | | | | | the | | | | | | | | | algo | | | | | | | | | rithm | | | | | | | | | to | | | | | | | | | find | | | | | | | | | the | | | | | | | | | co | | | | | | | | | rrect | | | | | | | | | MSC | | | | | | | | | s | | | | | | | | | erver | | | | | | | | | (VA | | | | | | | | | TF)**| | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | HSS | | | | | | |** Pro | | | | | | | | | vides | | | | | | | | | e | | | | | | | | | SRVCC | | | | | | | | | su | | | | | | | | | pport | | | | | | | | | flag | | | | | | | | | to | | | | | | | | | the | | | | | | | | | MME | | | | | | | | | in | | | | | | | | | VP | | | | | | | | | LMN**| +-------+-------+-------+-------+-------+-------+-------+-------+ | New |** \ | | **For | | |** IMS | | | nodes | ** | | alt | | | --A | | | inv | | | \ | | | LG:**| | | olved | | | #1:** | | | | | | in | | | | | | * | | | the | | | ** | | | _Allo | | | SRVCC | | | MRFC: | | | cates | | | han | | | A | | | a | | | dover | | | nchor | | | P | | | proc | | | voice | | | SI-DN | | | edure | | | compo | | | for | | | | | | nents | | | e | | | | | | , | | | SRVCC | | | | | | All | | | and | | | | | | ocate | | | pro | | | | | | a | | | vides | | | | | | call | | | it to | | | | | | refe | | | the | | | | | | rence | | | S | | | | | | URI | | | -CSCF | | | | | | and | | | in | | | | | | pass | | | the | | | | | | to | | | home | | | | | | the | | | netw | | | | | | SCC | | | ork_ _| | | | | | AS_ _| | | | | | | | | | | |__Pe | | | | | | ** | | | rform | | | | | | Start | | | local | | | | | | bi-ca | | | a | | | | | | sting | | | ccess | | | | | | to | | | leg | | | | | | wards | | | u | | | | | | the | | | pdate | | | | | | UE | | | on | | | | | | and | | | rece | | | | | | the | | | iving | | | | | | MSC | | | the | | | | | | s | | | se | | | | | | erver | | | ssion | | | | | | on | | | tra | | | | | | rece | | | nsfer | | | | | | iving | | | requ | | | | | | SIP | | | est_ _| | | | | | I | | | | | | | | | NVITE | | |__For | | | | | | from | | | wards | | | | | | the | | | the | | | | | | SCC | | | se | | | | | | AS | | | ssion | | | | | | d | | | tra | | | | | | uring | | | nsfer | | | | | | SRV | | | re | | | | | | CC(if | | | quest | | | | | | bi-ca | | | to | | | | | | sting | | | the | | | | | | is | | | SCC | | | | | | sup | | | AS | | | | | | porte | | | using | | | | | | d).__| | | the | | | | | | | | | s | | | | | |__For | | | tored | | | | | | Alt\ | | | STI_ _| | | | | | #2:__| | | | | | | | | | | | | | | | | |__TAS | | | | | | | | | de | | | | | | | | | cides | | | | | | | | | about | | | | | | | | | the | | | | | | | | | anch | | | | | | | | | oring | | | | | | | | | of | | | | | | | | | the | | | | | | | | | media | | | | | | | | | in | | | | | | | | | MRFP | | | | | | | | | based | | | | | | | | | on | | | | | | | | | local | | | | | | | | | pol | | | | | | | | | icies | | | | | | | | | and | | | | | | | | | an | | | | | | | | | chors | | | | | | | | | e | | | | | | | | | ither | | | | | | | | | in | | | | | | | | | the | | | | | | | | | MRFC | | | | | | | | | or | | | | | | | | | the | | | | | | | | | IB | | | | | | | | | CF.__| | | | | | | | | | | | | | | | | | ** | | | | | | | | | Start | | | | | | | | | /stop | | | | | | | | | bi- | | | | | | | | | casti | | | | | | | | | ng(if | | | | | | | | | bi-ca | | | | | | | | | sting | | | | | | | | | is | | | | | | | | | su | | | | | | | | | pport | | | | | | | | | ed)_ * | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
###### ### Annex C: Examples of ATCF/ATGW collocation -- SIP based solution
for eSRVCC
# C.1 General
This Annex illustrates a number of collocation options of the ATCF/ATGW and
the implications it will have. In particular, this is intended to be used as a
guidance of what existing protocols that can be used to control the media
anchoring, and to show how these can be reused without further extensions.
These are only examples, and should not be viewed as an exhaustive list.
# C.2 IMS ALG/IMS AGW
The following alternative shows the collocation of the ATCF with the IMS ALG
of the P-CSCF, and the ATGW with the IMS AGW.
Figure C.2-1: Collocation with IMS ALG/IMS AGW
In this alternative, the interface between P-CSCF and IMS AGW will be the Iq
reference point. The Iq reference point already supports the necessary
procedures of anchoring a session (see TS 23.334 [13]). In this alternative,
the ATCF is included in signalling path during registration when the UE sends
the Register to the P-CSCF. It is considered to be internal logic in the
P-CSCF that includes the ATCF.
A variant of the above collocation would be to also have the media anchoring
part in the PGW. Also in this case, the existing standard interface Iq can be
used as is without any extensions.
Figure C.2-2: Collocation with IMS ALG/PGW(IMS AGW)
# C.3 IBCF/TrGW
The following alternative shows the collocation of the ATCF with the IBCF, and
the ATGW with the TrGW.
Figure C.3-1: Collocation with IBCF/TrGW.
If above collocation is done, the interface between IBCF and TrGW will be the
Ix reference point. The Ix reference point already supports the necessary
procedures of anchoring a session. Hence, no extensions would be needed. In
this alternative, the ATCF is included in signalling path during registration
as a result of that the P-CSCF uses the IBCF as next hop. The ATCF logic in
the IBCF will include itself in the route to ensure it stays in the path for
the coming sessions.
Editor\'s Note: Additional scenario of MSC Server collocation could also be
done reusing existing interfaces. This scenario is TBD for completeness.
A variant of the above collocation would be to also have the media anchoring
part in the PGW. Also in this case, the existing standard interface Ix can be
used as is without any extensions.
Figure C. 3-2: Collocation with TrGW(ATGW)/PGW
#