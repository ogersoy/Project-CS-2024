# Foreword
This Technical Specification has been produced by the 3GPP.
This specification gives the stage 2 description of the Completion of Calls to
Busy Subscriber (CCBS) supplementary service within the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of this TS, it will be re-released by the TSG with an identifying
change of release date and an increase in version number as follows:
Version 3.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 Indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the specification;
# 1 Scope
This Technical Specification gives the stage 2 description of the Completion
of Calls to Busy Subscriber (CCBS) supplementary service.
# 2 Normative references
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"3G Vocabulary\".
[2] 3GPP TS 22.030: \"Man Machine Interface (MMI) of the Mobile Station
(MS)\".
[3] 3GPP TS 22.093: \"Completion of calls to busy subscriber (CCBS)
supplementary services - Stage 1\".
[4] 3GPP TS 23.011: \"Technical realization of supplementary services \-
General Aspects\".
[5] 3GPP TS 23.018: \"Basic Call Handling - Technical Realization\".
[6] 3GPP TS 23.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL) - Stage 2\".
[7] 3GPP TS 23.079: \"Support for Optimal Routeing (SOR) - Technical
Realization\".
[8] 3GPP TS 24.008: \"Mobile radio interface layer 3 specification; Core
Network Protocols Stage3\".
[9] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[10] ETSI ETS 300 358: \"ISDN Completion of Calls to Busy Subscriber (CCBS)
supplementary service; Functional capabilities and information flows\".
# 3 Definitions and abbreviations
## 3.1 Definitions
**Destination B:** The entity addressed in the original call set up, which is
busy when first called by subscriber A. Similarly, MSC B, VLR B and HLR B are
the network elements pertaining to Destination B when Destination B is a GSM
mobile.
**Originating queue:** The queue that manages CCBS requests for a subscriber,
when that subscriber is the originator of those CCBS Requests.
**SSAP** : Supplementary Service Application Part. SSAP is the protocol used
for CCBS procedures on the interface between the originating and destination
network. Communication across this interface is performed using SCCP
Connectionless Signalling (Refer to ETS 300 358).
**Subscriber A:** The user of MS A, requesting CCBS. Similarly, MSC A, VLR A
and HLR A are the network elements pertaining to Subscriber A.
**Subscriber B:** The user of destination B, who may not necessarily subscribe
to CCBS.
**Subscriber C:** The user of MS C, who is the forwarded-to-party when call
forwarding applies. Similarly, MSC C, VLR C and HLR C are the network elements
pertaining to Subscriber C.
**Target queue:** The queue that manages CCBS requests for a subscriber, when
that subscriber is the target of CCBS Requests.
**Timers:** For each of the service timers, the location, start and stop
conditions and action on expiry are given - Refer to subclause 5.1.
## 3.2 Abbreviations
Abbreviations used in this specification are listed in 3GPP TR 21.905.
# 4 General
## 4.1 Overview
The CCBS service allows a calling subscriber A, encountering a NDUB
destination B, to be notified when destination B becomes idle and to have the
network automatically generate a CCBS call to destination B, if subscriber A
desires. Subscriber A may make distinct CCBS requests for calls to the same
destination B for different basic services.
## 4.2 Architecture
Figure 4.2.1 is an architectural overview of the CCBS service when
interworking between the originating and the destination networks involved.
The originating network may be a mobile network or a fixed network and the
destination network may also be a mobile network or a fixed network.
The call related signalling for CCBS is performed on ISUP links on the
following interfaces:
VMSC A - GMSC B;
VMSC A - DLE;
OLE - GMSC B;
whereas the specific CCBS procedures are performed via the SSAP protocol,
which is signalled on the following interfaces:
HLR A - HLR B;
HLR A - DLE;
OLE - HLR B.
{width="6.35in" height="4.139583333333333in"}
Figure 4.2.1: Architectural overview showing common point of interworking
### 4.2.1 Architectural overview during roaming
Either the originating subscriber A or the destination subscriber B or both
may be located outside of their HPLMNs during the CCBS service. When all the
involved networks support CCBS service the normal handling described in this
specification applies. When some network entities do not support CCBS service
refer to clause 10 where the exceptions are described in more detail.
The signalling between different networks described in the subclause 4.2
applies also during roaming. HLR A and HLR B belongs always to the HPLMN of
the subscriber whereas VLR A and MSC A and GMSC, VLR B and MSC B respectively
may belong to a HPLMN or VPLMN. Refer to TS 23.018 where call handling in the
mobile network is described in more detail.
# 5 Handling of completion of calls to busy subscriber
Registration and erasure of CCBS are not applicable. Activation and Invocation
of CCBS are intrinsic parts of the operation of the service, and are described
in this section.
## 5.1 CCBS Timers
The timers used to control the operation of CCBS can be considered to consist
of two groups i.e. the timers which operate on a per subscriber basis (see
table 1) and the service duration timers (T3 and T7) which operate on a per
CCBS Request basis (see table 2).
Table 1: CCBS Service Timers
* * *
**Timer** **Name** **Value** **Run At** **Started** **Stopped** **Expiry** T1
Retention >15s MSC A Busy (CCBS Possible) sent to MS A CCBS Request received
from MS A Discard retained information T4 Recall 20-30s MSC A CCBS Recall sent
to MS A and MS A is idle Subscriber A initiates CCBS setup or rejects CCBS
Recall Cancel request T8 Destination idle guard 0-15s HLR B Event Report
received from VLR B indicating destination B is idle Event Report received
from VLR B indicating destination B is no longer idle Inform originating
network that Destination B is free T9 Recall B 40-55s HLR B Remote User Free
sent to the A-side Request cancelled, completed or suspended Cancel request
T10 CCBS notification 20-30s MSC A CCBS Recall sent to MS A and MS A is not
idle Subscriber A initiates CCBS setup, rejects CCBS Recall or requests
suspension Suspend request T11 CCBS resume 20-25s HLR A HLR A receives a
resume request and there are more than one suspended request in subscriber A's
queue Remote User Free received from destination network Resume next suspended
request in queue T12 CCBS Call Guard 20-30s HLRA HLRA receives a CCBS RUF Ack
and starts to wait CCBS Call Report CCBS Call Report received Cancel request
* * *
Table 2: Service Duration Timers
* * *
**Timer** **Name** **Value** **Run At** **Started** **Stopped** **Expiry** T3
Originating service duration 15-45m HLR A Acknowledgement to CCBS Request
received from destination network Request cancelled or completed Cancel
request T7 Terminating service duration >45m HLR B HLR B acknowledges
successful activation of a CCBS Request Request cancelled or completed Cancel
request
* * *
## 5.2 Information flows
Figures 5.2.1 and 5.2.2 show the flow of information between network elements
for a mobile to mobile call for the following:
Figure 5.2.1: Successful CCBS request, destination B busy when request made,
subscriber A free when destination B becomes free.
Figure 5.2.2: Subscriber A is not idle when destination B becomes free.
Figures 5.2.3 and 5.2.4 show the flow of information between network elements
for a mobile to fixed call for the same situations described in figures 5.2.1
and 5.2.2 respectively.
Each information flow diagram has been divided where appropriate into four
distinct phases of operation. These are as follows:
(1) Pre-conditions (Initial Call encountering NDUB and CCBS possible in the
destination network). The detailed description of the basic call handling can
be found in TS 23.018;
(2) Activation;
(3) Invocation;
(4) Operation (CCBS Call Set-up).
{width="6.489583333333333in" height="9.219444444444445in"}
Figure 5.2.1: Successful CCBS request. Destination B busy when request
activated, subscriber A free when destination B becomes free (mobile-to-
mobile)
{width="6.622916666666667in" height="8.739583333333334in"}
Figure 5.2.2: Subscriber A not idle when destination B becomes free (mobile-
to-mobile);\ Processing of a single request
{width="6.489583333333333in" height="7.833333333333333in"}
Figure 5.2.3: Successful CCBS request. Destination B busy when request
activated, subscriber A free when destination B becomes free (mobile-to-fixed)
{width="6.479861111111111in" height="7.865277777777778in"}
Figure 5.2.4: Subscriber A not idle when destination B becomes free (mobile-
to-fixed)
## 5.3 Activation
Activation of a CCBS Request is carried out by subscriber A. VLR A is
considered to be transparent during the activation operation.
The information flows shown in figures 5.2.1 to 5.2.4 inclusive show the
information flow for the activation process.
## 5.4 Deactivation
Subscriber A may deactivate CCBS in any of the following ways:
\- Deactivate all outstanding CCBS requests; or
\- Deactivate a specific CCBS Request.
The different deactivation operations are identified by different MMI commands
as specified in TS 22.030.
Deactivation of CCBS requests by subscriber A shall be performed at HLR A.
To deactivate all outstanding CCBS requests, the Deactivate CCBS operation
request shall contain the SS-Code only.
To deactivate a specific CCBS request, the Deactivate CCBS operation request
shall contain the following parameters:
\- SS-Code;
\- CCBS Index.
On receipt of the deactivation request, HLR A shall cancel the CCBS request,
i.e. remove all record of a CCBS request from the subscriber A's originating
CCBS queue and instruct the destination B network to cancel the corresponding
CCBS request in the destination CCBS queue of subscriber B. HLR A shall return
a result indicating whether the deactivation attempt was successful or not.
+------+-------+-------+-------+-------+-------+-------+-------+-------+ | MS A | | MSC A | | VLR A | | HLR A | | D | | | | | | | | | | estin | | | | | | | | | | ation | | | | | | | | | | B | | | | | | | | | | Ne | | | | | | | | | | twork | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | | | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | Deact | | | | | | | | | | ivate | | | | | | | | | | CCBS | | | | | | | | | | | | | | | | | | | | -- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --> | | | | | | | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | Deact | | | | | | | | | | ivate | | | | | | | | | | CCBS | | | | | | | | | | | | | | | | | | | | -\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --> | | | | | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | Deact | | | | | | | | | | ivate | | | | | | | | | | CCBS | | | | | | | | | | | | | | | | | | | | -- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --> | | | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | | CCBS | | | | | | | | | | C | | | | | | | | | | ancel | | | | | | | | | | | | | | | | | | | | -- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --\ | | | | | | | | | | --- | | | | | | | | | | --> | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | | ( | | | | | | | | | | note) | | +------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | A | | | | | | | | | | cknow | | | | | | | | | | ledge | | | | | | | | | | | | | | | | | | | | \ | | | | | | +------+------------+-------+------------+-------+------------+-------+ | | | | I | | | | | | | | nterrogate | | | | | | | | CCBS | | | | | | | | | | | | | | | | ----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----> | | | | +------+------------+-------+------------+-------+------------+-------+ | | | | | | I | | | | | | | | nterrogate | | | | | | | | CCBS | | | | | | | | | | | | | | | | -\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----\ | | | | | | | | -----> | | +------+------------+-------+------------+-------+------------+-------+ | | | | | | | | +------+------------+-------+------------+-------+------------+-------+ | | | | | | A | | | | | | | | cknowledge | | | | | | | | | | | | | | | | \ New Version Subject/Comment Apr 1999 GSM
03.93 6.2.0 Transferred to 3GPP CN1 CN#03 23.093 3.0.0 Approved at CN#03 CN#06
23.093 3.0.0 001r3 R99 3.1.0 Approved at CN#06 CN#06 23.093 3.0.0 002r3 R99
3.1.0 Approved at CN#06 CN#09 23.093 3.1.0 003r1 R99 3.2.0 Handling of the
Call Completion Treatment Indicator CN#09 23.093 3.1.0 004 R99 3.2.0 Handling
of the Call Diversion Treatment Indicator CN#11 23.093 3.2.0 Rel-4 4.0.0
Release 4 after CN#11 CN#16 23.093 4.0.0 Rel-5 5.0.0 Release 5 after CN#16
CN#26 23.093 5.0.0 Rel-6 6.0.0 Release 6 after CN#26 CT#36 23.093 6.0.0 Rel-7
7.0.0 Upgraded unchanged from Rel-6 CT#37 23.093 7.0.0 0005 Rel-7 7.1.0 HLR
procedure on Location Update from the current VLR CT#37 23.093 7.0.0 0006
Rel-7 7.1.0 Incompatible terminal handling in VLR CT#38 23.093 7.1.0 0007
Rel-7 7.2.0 Call forwarding on busy handling in HLR CT#40 23.093 7.2.0 0008r1
Rel-7 7.3.0 Missing signal in process VLR_CCBS_Recall_Manager CT#42 23.093
7.3.0 Rel-8 8.0.0 Upgraded unchanged from Rel-7