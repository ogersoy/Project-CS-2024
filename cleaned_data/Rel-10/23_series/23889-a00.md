# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The transmission of a Cellular Radio Access network is an important component
for mobile communication networks. In some parts of the world especially in
wide rural areas or in far away remote areas, operators face the difficulties
to develop services and/or deploy networks due to the lack of or cost of fast
and reliable backhaul transport resources. However, according to statistical
data, many calls in a mobile communication network, especially in the above-
mentioned areas, are local calls. That is, these calls are generated and
terminated by users served by the same BTS or the same BTS cluster or the same
BSC. For local calls, if local switch (voice data in user plane is looped in a
BTS or a BSC) is performed, then transmission resource of the Abis and/or A
interface could be saved.
To avoid impacts to the support of various kinds of supplementary services
(e.g., Multiparty Call, Explicit Call Transfer, etc.), and the support of
Lawful Interception procedures, not only the BSS, but also the MSC-S needs to
be involved in the establishment/release of the local switch. Furthermore, in
order to perform local switching, the BSS needs to correlate the two legs of
the call, i.e. it needs to know who is talking to whom. This information needs
to be provided by the MSC-S.
A solution for Local Call Local Switching may have major impacts on the core
network regarding allocation of resources on the MGW, potential procedures for
MGW removal/insertion, binding into supplementary service control within the
core network (e.g. MPTY), Lawful Intercept procedures within the Core Network,
Handover procedures, interaction with MSC-S pooling, etc. It is thus necessary
to perform an analysis of different solutions in order to determine the core
network impacts.
# 1 Scope
The present document provides a study into the Core Network impacts for
providing a solution for Local Call Local Switching. The document analyses and
evaluates different solutions to determine the benefits provided compared to
the identified impacts.
Specific considerations are given to the following areas:-
\- Sending of correlation information between the two legs of the call to the
BSS
\- Triggering to enable/release Local Call Local Switch (e.g. based on
activation of Supplementary Services, etc.)
\- Support of existing Supplementary Services
\- Support of existing Lawful Intercept functionality
\- Impacts to the user plane handling on the A-interface
\- Impacts to the MSC-S -- MGW Interface (Mc Interface)
\- Impacts to the MSC-S -- MSC-S Interface (Nc Interface)
The solution(s) considered for local call local switch should keep the core
network impacts to a minimum, e.g. the impacts on the nodal functions,
existing call flows, call establishment and call release.
The contents of this report when stable shall determine the modifications to
existing core network specifications.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 33.106: \"3G security; Lawful Interception requirements\".
[3] 3GPP TS 23.108: \"Mobile radio interface layer 3 specification, core
network protocols; Stage 2\".
[4] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[5] 3GPP TS 33.107: \"3G security; Lawful Interception architecture and
functions\".
[6] 3GPP TS 33.210: \"3G Security; Network Domain Security; IP network layer
security\".
[7] ITU-T Recommendation G.108:\"Application of the E-model: A planning
guide\"
[8] 3GPP TS 23.205: \"Bearer-independent circuit-switched core network; Stage
2\".
[9] 3GPP TS 23.009: \"Handover procedures\".
[10] 3GPP TS 23.083: \"Call Waiting (CW) and Call Hold (HOLD) Supplementary
Services; Stage 2\".
[11] ITU-T Recommendation Q.1902.3: \"Bearer independent call control
(Capability set 2) and Signalling System No.7 ISDN User part: Formats and
Codes\".
[12] 3GPP TS 23.231: \"SIP-I based circuit-switched core network; Stage 2\".
[13] 3GPP TS 48.006: \"Signalling transport mechanism specification for the
Base Station System - Mobile-services Switching Centre (BSS - MSC) interface.
[14] ITU-T Recommendation Q.713: \"Signalling connection control part formats
and codes\".
[15] 3GPP TS 29.205: \"Application of Q.1900 series to bearer-independent
Circuit Switched (CS) core network architecture; Stage 3\".
[16] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[17] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[18] 3GPP TS 29.232: \"Media Gateway Controller (MGC) - Media Gateway (MGW)
interface; Stage 3\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**BSS ID:** A globally unique identifier of a Base Station Subsystem (BSS).
**Call-ID** : The (globally unique) identifier (within the Core Network) of
the call (which typically consists of two Call-legs).
**Call-leg** : The access link between the mobile station and the Core
Network. A mobile to mobile call consists of two call legs and the link
through the Core Network.
**Call-leg correlation** : The process within the BSS to search for the other
call-leg(s) of a (potential) Intra-BSS call by appropriate means, either by
using the Call-leg-IDs or the Call-ID. The BSS determines, whether the found
Call-legs can be locally switched from BSS point of view.
**Call-leg-ID** : The identifier of a call leg, typically the Circuit Identity
Code (CIC) in case of AoTDM or the AoIP-Call-Identifier in case of AoIP. Up to
Rel-9 the Call-leg-IDs are MSC-wide.
**intra-BSS call** : A mobile to mobile voice call involving two mobile
stations connected to the same BSS.
**intra-BSS call detection** : Determination that both call legs are within
the same BSS.
**local call** : An Intra-BSS call that can be locally switched by the BSS.
NOTE: this definition is specific to this LCLS-TR.
**locally switched call** : A local call with a direct local path between the
Call-legs, switched by the BSS.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
A Interface between the BSC and the MSC-S
Abis Interface between the BSC and the BTS
Ater Interface between the BSC and the TRAU
i intermediate node prefix.
Mc Interface between the (G)MSC-S and the MGW.
Nc The NNI call control interface between (G)MSC servers
o originating side prefix, e.g. oMS, oRAN, oMSC, oMGW for nodes and e.g. oA-
interface, oAssignment Request etc for interfaces, messages etc.
t terminating side prefix , e.g. tMS, tRAN, tMSC, tMGW and e.g. tA-interface,
tAssignment Request etc for interfaces, messages etc.
NNI Network Node Interface
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AoIP A interface over IP
AoTDM A interface over TDM
BTS Base Station
GCR Global Call Reference
LCLS Local Call Local Switch
LEMF Law Enforcement Monitoring Facility
LI Lawful Interception
LS Local Switching
MOCN Multi Operator Core Network
RanC Radio Access Network Codec
SC Selected Codec (for the Nb-Interface)
# 4 Requirements and Architecture
## 4.1 Reference Architecture
Figure 4.1.1 shows a Reference Architecture with the only purpose to guide the
discussion in this Technical Report. It highlights only the main nodes and
interfaces and differentiates between \"originating\" nodes and interfaces
(oMS, oBTS, oMSC, oAbis, oA) and \"terminating\" nodes and interfaces (tMSC,
tBTS, tMS, tAbis, tA). It also includes an Intermediate MSC and MGW (iMSC,
iMGW), which may be a (G)MSC or other intermediate CN control node and its
MGW.
Figure 4.1.1: Reference Architecture
The \"active\" User Plane path is shown with a thick, solid blue line for the
case that Local Switching is provided between two BTS\'s (the TR does not
detail the technical implementation within the BSS), while the \"inactive\"
User Plane path, i.e. the two Abis-links, the two A-links and the links within
the Core Network are not carrying traffic and are therefore marked with thin,
dotted blue lines.
The Control Plane paths are shown in solid red lines.
Based on this Reference Architecture various call scenarios may be discussed,
e.g. with the simplest scenario including just one BTS and one MSC, or a
complex scenario including two different BTS\'s and more than two MSC\'s.
The architecture supports both TDM based A-interface and IP based A-interface
(AoIP).
## 4.2 Functional Requirements
The following requirements shall apply for local call local switch:
\- The local call local switch shall be transparent to the end user;
\- The local call local switch shall be only considered for CS voice call;
\- The local call local switch shall not hinder any supplementary services;
\- Lawful Interception shall be supported;
\- The MSC in Pool shall be supported.
\- Inbound Roamers shall be supported
The Technical Report shall investigate solutions to fulfil the above
requirements and determine if they are all feasible and conclude on the best
solutions.
# 5 Working Assumptions
## 5.1 GERAN Assumptions
The following assumptions are provided by GERAN:
> 1\. Local Switching reuses existing (Rel-8) Procedures, Messages and
> Information Elements on the A-Interface as far as possible to keep the
> impacts to a minimum.
>
> 2\. Local Switching reuses the existing (Rel-8) Architecture Split between
> BSS and CN as far as possible.
>
> 3\. One common Local Switching solution supports AoTDM, AoIP and all
> combinations of them.
>
> 4\. Local Switching is applicable within a single BTS, but possibly also
> between BTS\'s. The standard supports on the A-Interface all kinds of Local
> Switching within a BSS. However the MSC-S can not know beforehand, without
> BSS signalling, whether or not Local Switching is possible. Therefore the
> final decision whether to establish Local Switching or not is performed by
> the BSS.
>
> NOTE: How this is realized inside a BSS is not subject to standardisation.
>
> 5\. The question whether procedures and messages on the A-interface for
> Local Switching will be performed independently on the two legs of the call
> is investigated in clause 12, where several solutions are described and
> compared.
>
> 6\. The Local Switching is established by the BSS by internal means, but
> only if it has received permission from the MSC-S(s) to do so. If the BSS
> receives signalling that for one radio leg Local Switching is not or no
> longer possible, then the BSS does not establish Local Switching or breaks
> an established Local Switch.
>
> 7\. The MSC-S(s) is responsible for binding the two radio legs together by
> appropriate means and finally submitting this to the BSS to allow potential
> correlation.
>
> 8\. Local Switching does not involve (has no need for) transcoding between
> the radio legs, i.e. there is no need for Transcoders in BSS.
>
> 9\. Transmission of in-band user plane information (ring-back tone at call
> setup and mid-call in-band announcements) from the Core Network is
> supported.
>
> 10\. Local Switching is sometimes not possible, or needs to be released,
> e.g. if a Supplementary Service (Multi Party Conference, Announcement, etc)
> is necessary. The MSC-S controls this. If certain supplementary services for
> an ongoing call are necessary, implying that the User Plane through the Core
> Network needs to be (re)established, the Local Switching may be broken by
> the MSC-S(s) after negotiation with the BSS.
>
> 11\. Inter-BSS Handover is possible, leading to a break or an establishment
> of Local Switching.
>
> 12\. Inter-MSC Handover is possible, leading to a break or an establishment
> of Local Switching.
>
> 13\. Inter-System Handover (e.g. 2G \ 3G) is possible, leading to a break
> or an establishment of Local Switching.
>
> 14\. If AoTDM is used, it is one question whether the TDM circuit of the
> A-Interface may be released while the Local Switching is established in the
> BSS (and after the BSS has informed the MSC-S). The possible solutions
> related to this topic are described and compared in clause 10.
>
> 15\. If AoIP is used, it is also a question whether the IP link on the
> A-Interface may be released while the Local Switching is established in the
> BSS (and after the BSS has informed the MSC-S). In any case, user plane
> transmission on the A-interface can be suspended while the Local Switching
> is established (even if the IP endpoint on the BSS and MGW sides are not
> released), making bandwidth saving on the AoIP interface possible. The
> possible solutions related to this topic are described and compared in
> clause 10.
>
> 16\. Both sides, BSS and/or MSC-S(s), are allowed to break the Local Switch
> any time, if needed.
>
> 17\. If the Local Switch has to be broken, this needs to be negotiated
> between BSS and MSC-S(s).
>
> 18\. The Codec Type and/or Codec Configuration may be changed by the BSS
> autonomously after the Local Switch is established, provided that same or
> compatible Codec Type and/or Codec Configuration are used on the two legs of
> the call. However, the MSC-S(s) is informed after the change. One possible
> exception is when using AoIP with the Transcoder in MGW option: one question
> is whether this should trigger the BSS-internal HO procedure and whether
> this would release the Local Switching. The handover solutions related to
> this question are described and compared in clause 7.
>
> NOTE1: Only Codec Types and Codec Configurations provided by the MSC-S(s) to
> both radio legs may be used.
>
> NOTE2: If two incompatible Codec Type and/or Codec Configuration are to be
> used on the two legs of the call, the Local Switching is released
> beforehand, i.e. this kind of handover is not allowed while local Switching
> is established.
>
> 19\. Intra-BSS handovers may be performed by the BSS autonomously after the
> Local Switch is established. The MSC-S(s) is informed after the Handover
> about all modified parameters (Cell ID, Codec Type, etc.).
>
> 20\. Transmission of DTMF tones is supported.
>
> 21\. Charging aspects arising from Local Switching, if any, are considered
> in the standard.
## 5.2 Core Network Assumptions
The following assumptions are provided by CT4:
> 1\. Any number of MSC-S\'s may be in the path and therefore impacts to the
> Nc interface must be considered.
>
> 2\. Core networks (MSC-Servers and MGW\'s) owned by different operators can
> be involved in a call that supports LCLS.
>
> 3\. Upgraded (LCLS compliant) and legacy (non LCLS compliant) MSCS\'s may
> exist in the path
>
> 4\. All MSC-S\'s (nodes in the path) must permit LCLS.
>
> 5\. If one node denies LCLS (legacy MSC-S or intentionally), then all other
> MSC-S\'s must be informed, at call setup and during the call and LCLS must
> be stopped.
>
> 6\. The MSC-S(s) is in full control, when to through-connect and when to
> break the through-connection to avoid fraud. All solutions described in
> clause 11 and all signaling solutions described in clause 12 are based on
> the assumption that the BSS shall not establish local call local switching
> through-connection until explicitly permitted by the MSC-S\'(s).
>
> 7\. Principles for establishing LCLS:\ The pre-requisite for establishing
> LCLS is that the call is served by the same BSS. This, in principle, could
> be determined by the MSC-S or the BSC.\ The MSC-S is in charge of call
> control, supplementary services, lawful interception and gives permission
> (or denies) as to whether Local switching may be applied. When the MSC-S has
> granted the permission to apply LCLS, the BSC makes the final operation
> decision whether to establish LCLS (dependent on alignment of codecs, BTS\'s
> supporting local switching, resource available, status of its BTS\'s, the
> state of its radio legs).
>
> 8\. Principles for releasing LCLS:\ If the MSC-S finds that any
> preconditions about LCLS cannot be satisfied anymore, the MSC-S orders the
> BSC to release LCLS. And the BSC shall release LCLS immediately and reports
> the status to the MSC. The BSC may also release the LCLS for BSS related
> reasons and reports the status to the MSC.
>
> 9\. Call establishment and call clearing of LCLS related calls:\ LCLS as
> such shall not hinder call establishment and call clearing even though LCLS
> related information may be exchanged in these procedures.
>
> 10\. LCLS impacts on MGWs:\ The MGWs shall be informed when LCLS is
> established in order to prepare for valid user plane data, e.g. mid-call
> announcements and tones and for lawful interception of LCLS related calls,
> see subclauses 10.5.2 and 11.3 respectively.
>
> 11\. User plane connections in the core network:\ When LCLS is established
> for a call it could be possible either to keep the user plane connected in
> the core network or to release the user plane connections in the core
> network. This issue is analyzed and documented in Clause 12.
# 6\. Call Setup and Call Clearing Scenarios
## 6.1 Local Mobile-to-Mobile call within same PLMN; one MSC-Server
3GPP describes everything in half-call models. So the Originating procedures
are described and then the Terminating procedures are described separately as
separate logical entities. If the same MSC Server is serving the terminating
subscriber as for the originating subscriber, then for example a single MGW
might be seized. In this scenario the oMSC, GMSC and tMSC are located in the
same physical node and no inter core network signalling is needed. Otherwise
there is no difference between this scenario and the multi MSC scenarios
described below.
## 6.2 Local Mobile-to-Mobile call within same PLMN; two MSC-Servers
### 6.2.1 Legacy Setup of a Mobile-to-Mobile call with two MSC-S\'s
Figure 6.2.1.1 shows the network architecture for this basic call scenario.
Only the most important signalling links are shown with dashed lines, the User
Plane is shown in solid lines. The scenario may be considered for physically
collocated oMSC Server and tMSC Server (treated as separate logically) exactly
the same as for MSC-Server nodes which may be physically separated due to MSC
in Pool concept, for example
The call scenario here assumes that the \"Early Assignment\" option is used on
both radio interfaces to achieve best possible user perception at call setup.
\"Late Assignment\" is discussed in chapter 6.4.
Figure 6.2.1.1: Network Architecture for MS-to-MS call with two MSC-S\'s.
When the originating User (oUser) triggers the call setup, the oMSC
interrogates the HLR and finds tUser registered in tMSC. The routing continues
to and in tMSC; tMS is paged.
Once tMS has responded, the speech path is setup by oMSC sending oAssignment-
Request and tMSC sending tAssignment-Request and both MSCs allocating all
necessary resources in oMGW, tMGW and between the nodes. The setup of these
radio resources takes a considerable time and that\'s one reason for \"Early
Assignment\".
Finally, when the User Plane is setup and ready for traffic, tMS triggers the
\"Ringing tone\" to alert the tUser and informs the CN with an \"Alerting\"
message.
At that time tMGW starts to generate on command of tMSC the \"Ring-back
tone\", which is sent backwards through the User Plane down to oMS. Now tUser
hears the Ringing tone and oUser hears the Ring-back tone, until tUser accepts
the call or oUser terminates the call attempt or another event happens.
Figure 6.2.1.2 shows the active User Plane and - most important - where it is
still disconnected during the Ringing phase.
Figure 6.2.1.2: Active User Plane and its connectivity during the Ringing
phase
Without the interruptions in the speech path - within oMGW and within tMGW -
the Network could not prevent that modified mobile terminals could setup a
one-way or even two-way communication between the Users without accepting the
call, i.e. without paying for the communication. Fraud would be possible.
Figure 6.2.1.3 shows the typical Call Flow for this MS-to-MS call with two
MSC\'s with exemplary timings, without LCLS. The OoBTC negotiation in this
example here is based on BICC; SIP-I would be another valid alternative.
Figure 6.2.1.3: Reference Call Flow for MS-to-MS call with two MSC-S\'s
Typically tUser accepts after he hears the Ringing, found his mobile and
decided to find the call interesting enough. This may take a considerable
time; a considerable amount of calls are never answered. The User Plane is
already setup and especially the Abis-Interfaces are carrying active traffic,
because \"Early Assignment\" is assumed. So oAbis- and tAbis-Resources are
already in use, although User to User communication is still not possible.
When tUser has accepted the call:
\- tMS informs first of all tMSC by the \"Connect\" message.
\- tMS stops the Ringing , informs tUser with a display message \"Connected\".
\- tMSC informs tMGW; tMGW stops the Ring-back tone and through-connects the
User plane bothways.
\- tMSC forwards the \"Connect\" message (Answer) to oMSC.
\- oMSC informs oMGW; oMGW through-connects the User plane bothways.
\- oMSC forwards the \"Connect\" message to oMS; oMS informs oUser with a
display message \"Connected\".
\- Call is set up, Users can communicate in both directions.
These \"Connect\" signalling messages backward from tMS to oMS and vertically
to the MGW\'s are in a \"race condition\" with the User Plane signal from tMS
to oMS.
If the Control Plane signalling is a bit slow, then the first utterances of
tUser are still blocked by tMGW and are lost, not heard by oUser. Typically
the signalling within the Core Network part of the Control Plane and within
the non-radio part of the BSS is fast and \"fortunately\" the tMGW is reached
quite quickly. The User Plane across the radio legs is already setup and is
working (\"Early Assignment\"). There is no further bottleneck in the User
Plane and through-connection is quick and comfortable for the Users.
All in all: The experience from current network implementations and
deployments is quite positive.
### 6.2.2 Local Switching in Mobile-to-Mobile call with two MSC-S\'s
In this chapter a typical scenario is introduced that highlights specific
issues that need to be addressed by this technical report.
Existing Architecture and Signalling: Rel-8 is assumed here, i.e. AoIP-support
on the A-Interface Control Plane and OoBTC/BICC or OoBTC/SIP-I on the Nc
Interface and the corresponding MGW-Control Signalling on Mc in addition to
TDM based A interface and ISUP based CN.
Additionally if any changes to the routing of the user plane traffic through
involved nodes, in this case the CN MGW\'s then signalling is required to
ensure any MGW functions are not disturbed. This may or may not have impacts
to the MGW or could be handled using existing H.248 procedures.. The following
issues therefore need to be resolved for the case with two MSC-Servers:
\- Both involved MSC-S nodes need to be upgraded to support LCLS feature.
> If one node is not LCLS-upgraded, then LCLS is generally not allowed,
> because this legacy node may need to access the User Plane during the call,
> e.g. with read-access for LI, but is not aware of LCLS.
\- Each MSC needs to be able to indicate to the other MSC in the call that it
supports LCLS (or that it does not support LCLS) in this specific call.\ A new
IE seems necessary to negotiate these MSC-requirements and MSC-Capabilities
regarding LCLS.\ \ The reason behind this call-by-call negotiation is that the
LCLS-Requirements within a specific MSC-S in the path are not static, but
depend on the specific call situation such that LCLS may be supported in some
cases but only in one direction. There can still be value in transmission
savings in the BSS. One example is that an MSC-S needs read-access to the User
Plane for LI.
For possible solutions see sub-clause 11.2.
\- The oMSC needs to identify the (single) call to the tMSC (assuming two
MSC\' Server's in Pool supporting the same BSS/serving area). A kind of
\"unique Call Identifier\" seems necessary.
\- The MSC-Servers need to signal the result of the LCLS Negotiation to the
BSSs in a new IE.\ The MSC does not \"command\" the BSS to use Local
Switching, but indicates the conditions under which LCLS is potentially
allowed. For possible solutions see sub-clause 12.3.
\- The BSSs needs to signal back to the MSC-Servers whether or not LCLS was
established or broken.\ For possible solutions see sub-clause 12.5.
\- Indication by the MSC to the BSS, when the BSS may perform through
connection of the UP in the BSS is required to avoid fraud\ A new Message
seems necessary for that, because there is no existing message between MSC-S
and BSS at that point in time. For possible solutions see sub-clause 12.6.
\- A notification that LCLS is established/broken may have to be sent to the
MGWs if an option is supported to allow possible resource optimisations in the
MGWs, while CN user plane is not used during LCLS and also to prepare the MGWs
for LCLS break interactions e.g. due to mid-call announcements and lawful
interception.
## 6.3 Local Switching in Mobile-to-Mobile call with more than two MSC-
Server\'s
Figure 6.3.1 shows the network architecture for one example call scenario with
three MSC\' Servers in the path. Only the most important signalling links are
shown with dashed lines, the User Plane is shown in solid lines.
Figure 6.3.1: Network Architecture for MS-to-MS call with more than two MSC-
Server\'s.
A number of call scenarios can lead to multiple MSC Server\'s in the call
chain at call setup, such as (not exhaustive list):
\- the call is routed to a subscriber who has user determined supplementary
services active, such as \"call forward on user determined busy\", \"call
forward on no reply\" etc.
\- the call is routed to a subscriber of another operator, who has roamed into
the caller\'s PLMN and BSS Serving Area
In the following example the call to iMS is assumed to be forwarded from iMS
to a third mobile (tMS).
When oUser triggers the call setup towards iMS, oMSC-Server interrogates the
HLR and finds iMS registered in iMSC-Server The routing continues to iMSC-
Server, the call is paged and \"BUSY\" indication is returned. In this example
iMSC detects that the call is forwarded to another mobile number, tMS, which
is registered in tMSC-Server The routing continues to tMSC-Server and now tMS
is paged.
Once tMS has responded, the speech path is setup by oMSC-Server sending
oAssignment-Request and tMSC-Server sending tAssignment-Request and both outer
MSC-Server\'s allocating all necessary resources in oMGW, tMGW and between the
nodes.
iMSC-Server is involved with iMGW. Important is that iMSC-Server and iMGW have
no direct communication with the RAN\'s and influence on LCLS must happen
through the outer MSC-Server\'s. This fact requires the \"LCLS-Negotiation\"
through the Core Network as already discussed in the previous call scenario
with two MSC-Server\'s. Only if the iMSC-Server understands and agrees to
LCLS, the LCLS can be offered to the RAN\'s. It could be that iMSC-Server
needs to access the user plane during the call, for example if it provides
user plane control for announcements, Again the setup of the radio resources
takes a considerable time.
In addition to the issues listed in the previous chapter 6.2.2 the following
issues therefore need to be resolved:
\- It is necessary to identify all not-LCLS-upgraded nodes in the path,
although they do not understand the new LCLS-related signalling. If one of
these legacy nodes is in the path, then LCLS is generally not allowed, because
it could require User Plane access during the call.
\- All MSC-Servers and other nodes in the call chain, also the ones in the
middle, need to signal support and willingness and their requirements to allow
LCLS to be activated for that call. This needs to be signalled across the NNI
protocol interfaces, which may include international signalling legs and
inter-PLMN signalling.
\- The oMSC-Server needs to identify the (single) call to the tMSC-Server.
This \"unique Call Identifier\" needs to be signalled across the NNI protocol
interfaces, which may include international signalling legs and inter-PLMN
signalling.
## 6.4 Late Assignment in Mobile-to-Mobile Call Setup with two MSC-S\'s
### 6.4.1 Technical Description of Late Assignment
The signalling for call setup with Late Assignment is at the beginning
identical to the signalling with Early Assignment - up to the point when the
tMS is found and has responded, the Selected Codec (SC) and the Preferred
terminating RAN Codec (tRanC) are determined and the SC reported to oMSC.
For Late Assignment no resources are allocated in the BSS\'s prior to ringing
phase; the Ringing is triggered in tMS and the local Ring-back tone in oMS. No
User Plane traffic is seen, until tUser accepts the call. Figure 6.4.1
indicates this with grey-shaded arrows on radio-, Abis- and A-links. The Nb-
links through the CN are allocated, but in fact no traffic is flowing and in
case of a packet-switched CN no load is generated.
Figure 6.4.1: Active User Plane and Tones in Late Assignment during the
Ringing phase
Typically tUser accepts after he hears the Ringing, found his mobile and
decided to find the call interesting enough. This may take a considerable
time; a considerable amount of calls are never answered.
No Radio Network User Plane costs are generated so far:
\- Now, tUser has accepted the call !!!
\- tMS informs first of all tMSC by the \"Connect\" message.
\- tMS stops the Ringing Tone, informs tUser with a display message
\"Connected\".
\- tMSC sends Assignment-Request to tBSS; the tRadio-leg is set up in the
background, then tMSC informs tMGW;
\- tMSC sends the \"Connect\" message backwards to oMSC.
\- oMSC sends Assignment-Request to oBSS; the oRadio-leg is set up in the
background, then oMSC informs oMGW;
\- oMSC forwards the \"Connect\" message to oMS; oMS informs oUser with a
display message \"Connected\".
\- Call is set up, Users can communicate in both directions.
These \"Connect\" signalling messages backward from tMS to oMS and vertical
signalling to the MGWs are again (as in Early Assignment) in a \"race
condition\" with the User Plane signal from tMS to oMS. But this time tUser
starts talking typically much earlier than the User Plane is setup and a
substantial part of his first utterances is lost. In a non-negligible portion
of calls the User Plane can not be established and the call attempt ends with
failure.
All in all: The User experience from real networks is quite negative. The
operator has a substantial cost advantage, but the User dissatisfaction is too
strong to leverage on that in a big scale.
### 6.4.2 Pros and Cons of Late Assignment
The pro of Late Assignment is a substantial resource-saving during the
alerting phase. That seems important and therefore some of the ideas are
proposed to be taken into consideration for LCLS.
The first con of Late Assignment is that sometimes the call setup fails due to
missing resources, although the tMS was ringing and the tUser accepted the
call (ghost ringing). The second con is that the through-connection through
the Core Network is far too slow, when the tUser accepts the call. The first
word(s) of the tUser are not heard. However if the through connection after
answer only needs to be within the local BSS then this could be much faster,
but still has the risk that BSS resources could not be available at answer. It
should be noted that in other Mid Call procedures is the option to allow the
release of core network resources needs further study, see sub-clause 10.3.
It is therefore not recommended to use Late Assignment in combination with the
proposed LCLS negotiations to determine user plane requirements from the Core
Network but instead to use Early Assignment with possible LCLS-extensions, in
particular the BSS optimisations as discussed in sub-clause 10.3.
## 6.5 Call Clearing scenarios
### 6.5.1 General
Calls which do not have LCLS established in the BSS are cleared as specified
in 3GPP TS 23.205 [8].
When LCLS is established for a call the call shall be cleared as specified in
3GPP TS 23.205 [8] in the core network and LCLS shall be released and call
cleared in the BSS for both call legs.
### 6.5.2 LCLS-Signalling for clearing of LCLS related calls
Figure 6.4.2.1 shows an example of the general network configuration when 2
MSC Servers are involved in a LCLS related calls, which is to be cleared.
Figure 6.4.2.1: LCLS-Signalling for call clearing on the A-Interfaces and on
Nc
Call clearing of LCLS related calls is similar to other call clearing.
The example call clearing procedure described here assumes that:
\- the MSC-S\'s have exchanged LCLS related information during call set-up for
the correlation of the call legs within the Core Network and have determined
that LCLS was feasible;
\- the BSS has established LCLS for the call and LCLS is still established
when the call is to be cleared.
\- the MSC-S\'s inform the MGW\'s that the call is to be released and this
message implies that LCLS no longer is valid for the call to be cleared.
No new **Information Elements** nor **new Messages** are necessary for call
clearing on A-Interface, Nc-Interface and the Mc-Interface. Therefore no new
LCLS related information is exchanged in the example Call Flow in Figure
6.4.2.2 for clearing a LCLS MS-to-MS call with two MSC-S\'s.
Figure 6.4.2.2: User Initiated Call Clearing (message sequence chart)
There is no need for oBSC or tBSC to include any LCLS Status information in
the Clear Complete message, because LCLS shall certainly be released for a
call that is cleared in the BSS.
# 7\. General Handover Principles
NOTE: The principles specified in this clause also apply for AoTDM, however
the specific details for AoTDM are not included in the following text.
## 7.0 General
This Clause describes how to handle handovers of LCLS related calls that cause
changes in transcoder configuration. Handling of LCLS during and after Inter-
BSS handovers, covering both Intra-MSC and Inter-MSC handovers are described
in general to establish basic principles and working assumptions. For specific
sequences particular to individual solutions for different call leg
correlation methods see Clause 13.
## 7.1 Local Handover with Compatible Codec
Here it is assumed that the call was established with local switching. That
means the Codec Types and Codec Configurations on both radio legs are either
identical or compatible.\ Examples are: oEFR\tEFR or
oFR_AMR(Set1)\tHR_AMR(Set1).
The handover is performed by the BSS autonomously without a change on the
A-Interface, as described in TS 48.008 for AoIP, but also for legacy AoTDM
cases.
Figure 7.1.1 shows a schematic for this handover case. It is arbitrarily shown
that the oMS performs a local handover, while the tMS is not involved in the
handover - but of course in the Local Switching. oBSC and tBSC are the same
physical node (marked in red colour), i.e. we have a local call before and
after the handover.
Figure 7.1.1: Local Handover to a compatible Codec
Since the target Codec Type/Configuration on the new radio leg (oRanCnew) is
compatible to the Codec Type/Configuration of the old radio leg(oRanCold)
there is no change necessary on the corresponding A-Interface or tMS codec and
the BSS can perform the internal handover autonomously. Consequently the oMSC
Server is just informed after the handover was successfully executed. If the
call was locally switched before the handover, then the local switch is
maintained during and after the handover. iMSC Server and tMSC Server are not
notified.
How the BSS implements this local handover and local switching together is not
standardized. But it can be assumed that implementations are feasible, that
fork the downlink data to oMS before and during the handover to both BTSes
(Bold and Bnew) in a way that only a minimal interruption occurs in downlink.
For the uplink handling the BSS may combine the streams coming from both BTSes
in a suitable way so that also the interruption in uplink is minimized.
## 7.2 Local Handover to Incompatible Codec
### 7.2.1 Local Handover to Incompatible Codec: General Considerations
Here it is assumed that the call was established with local switching. That
means the Codec Types and Codec Configurations on both radio legs are either
identical or compatible.\ Examples are: oEFR\tEFR or
oFR_AMR(Set1)\tHR_AMR(Set1).
Now - for whatever reasons - one radio leg (again the originating one is used
as example here) would need to perform a handover to an oBTS that does not
support a compatible Codec Type / Configuration.\ Example: oEFR\tEFR is the
initial case and then one side is to be handed over to oHR creating a mismatch
between oHR \tEFR which needs to be resolved.
Figure 7.2.1.1: Local Handover to an incompatible Codec: How?
This kind of handover is allowed in legacy AoTDM architectures without LCLS.
The MSC Server is then not informed beforehand. The MSC Server is just
informed after the handover was executed. But in these cases the BSS uses
anyway two Transcoders, i.e. the detailed Codec constellation is
oEFR\PCM\tEFR before the handover and oHR\PCM\tEFR after the
handover. That is OK, but has the drawback of transcoding costs and quality
loss.
This kind of handover is not allowed in AoIP, if \"Full IP\" is applied on the
A-Interface, because the Codec Type / Configuration within the oMGW must be
modified accordingly.
This kind of handover is - in principle - also not allowed, if Local Switching
was applied, regardless what was used on the A-Interface (AoIP or AoTDM),
because transcoding is necessary between both radio legs and we assume that
the Transcoders are not located at the BTS side, but - maybe - at the BSC side
or within the MGWs.
### 7.2.2 Local Handover to Incompatible Codec with LCLS interrupted
#### 7.2.2.1 Technical Description of Local Handover Solution with LCLS
interrupted
The descriptions below are based on AoIP, but the functionalities are similar
for AoTDM. The first solution here is that oBSS first breaks LCLS (details are
not discussed here), then sends an Internal Handover Required to the oMSC
Server and the Internal Handover Execution is performed as described in TS
48.008 for AoIP. Of course that requires the Abis and A-Interfaces on both
sides of the call (oAbis and tAbis, oA and tA): a substantially higher load
for the potential satellite links and a substantially higher speech path
delay. oMGW has to insert a pair of Transcoders (HR\PCM\EFR) and the
speech quality drops accordingly. Figure 7.2.2.1.1 shows this scenario.
Figure 7.2.2.1.1: Local Handover to an incompatible Codec: break LCLS
#### 7.2.2.2 Pros and Cons of Local Handover Solution with LCLS interrupted
This solution is a natural outcome of the provided tools \"LCLS break\" and
\"Internal Handover with MSC support\". It does not need any additional
support and is included in a potential LCLS solution.
### 7.2.3 Local Handover to Incompatible Codec with Transcoding in BSS
#### 7.2.3.1 Technical Description of Local Handover with Transcoding in BSS
Another alternative could be that oBSS inserts a pair of transcoders and
virtually - for the Core Network - the Local switch is maintained. This is
shown in figure 7.2.3.1.1.
Figure 7.2.3.1.1: Local Handover to an incompatible Codec: Transcoding in BSS
#### 7.2.3.2 Pros and Cons of Local Handover Solution with transcoding in BSS
It is obvious that this is not reasonable, because it misses all goals of the
original idea: there are transcoders involved in the BSS, there are two Abis-
links involved, the voice quality is low, the delay is high.\ So we can just
note: this is not reasonable and is not followed further.
### 7.2.4 Local Handover to Incompatible Codec by asynchronous Double Handover
#### 7.2.4.1 Technical Description of Local Handover Solution by asynchronous
double handover
Still the question is: Can we improve this? Can we maintain or re-establish
LCLS also for such cases where the Codec changes? Note: if AMR would be used,
then at least all handovers between FR_AMR and HR_AMR would work well, see
chapter 7.1.
Obviously LCLS without transcoding is only possible, if the other radio leg
would also perform a handover to the same or a compatible new Codec
Type/Configuration. In our example the original EFR\EFR must be double-
handed-over to HR\HR and - that is very important - the Core Network needs
to be involved as well to prepare the path through the Core Network for the
potential LCLS break.
**Requirement:** for AoIP it is not allowed to use a certain Radio Codec in
LCLS that is not also supported by the Core Network Access MGW.\ **Reason:**
Otherwise a break of LCLS is not guaranteed and the call might fail later.
The simplest, well known and safe solution is to perform this double-handover
in several steps:\ first perform a break of LCLS, then an Internal Handover
Execution for the one MS, then an Internal Handover Execution for the second
MS, then the re-establishment of the Local Switch. The common BSS could
initiate and trigger all these actions, it seems not necessary to involve new
Inter-MSC Server signalling.
#### 7.2.4.2 Pros and Cons of Local Handover Solution by asynchronous double
handover
What are the drawbacks here:\ The break of LCLS is assumed to cause an sharp
increase in round trip delay of about 600ms: that is clearly audible. It
further causes a sudden load increase on any satellite links and through the
Core Network. The first and second Internal Handover Executions cause load for
both MSC Servers and MGWs. Two pairs of Transcoders are necessary, one pair in
each MGW. Because the BSS-MSC Servers need to execute the Control Plane
signalling through the Satellite link these handover signalling takes quite a
while, which in some sense degrades the radio performance. The Core Network
was typically at call setup prepared for the common Codec (in our example the
EFR) and it is currently common practise to keep this Codec constant within
the internal Core Network links during the call. The Codec Constellation after
the second handover is therefore (most likely): HR\PCM\EFR\PCM\HR
and this does not provide the best quality we can think of (the eModel, see
ITU-T Recommendation G.108 [7], estimates this to about MOS=2.2, excluding
radio errors). Finally, after the re-establishment of the LCLS in HR the round
trip delay sharply decreases again and the speech quality improves
substantially (eModel: MOS=3.6, see ITU-T Recommendation G.108 [7], excluding
radio errors), while the original quality was EFR\EFR (eModel: MOS=4.3, see
ITU-T Recommendation G.108 [7], excluding radio errors).
### 7.2.5 Local Handover to Incompatible Codec by synchronous Double Handover
#### 7.2.5.1 Technical Description of Local Handover Solution by synchronous
double handover
Another alternative: [synchronized double-handover of both
terminals]{.underline}, with prior or parallel or later negotiation with the
Core Network for the target Codec Type/Configuration.
Assuming the MSC Server has indicated support for the new, target Codec
Type/Configuration within the most recent Assignment Requests or Handover
Requests and the necessary resources are still granted within the MGWs. Then
the BSS can start immediately to execute the double handovers. When these are
both successfully performed, then the MSC Server is informed by \"Handover
Complete\" and the MSC Server prepares the MGW accordingly for the potential
LCLS break. It is not required (but possible) that the MSC Server invokes a
\"Mid-call Codec Renegotiation\" to align the path through the Core Network
with the same Codec Type for a potential later LCLS break. This would remove
the transcoder-pairs and optimize the voice quality for a potential LCLS
break.
It is left for BSS-implementer skills how a double, synchronized handover may
be implemented. But whenever the two radio-leg-pairs execute their handovers
within less than 600ms time difference, then the resulting speech path
interruption is already better than in the procedure described above in
chapter 7.2.4.
#### 7.2.5.2 Pros and Cons of Local Handover Solution by synchronous double
handover
The load on the Abis and A-Interface would not occur; the double delay jumps
would not occur; the handover signalling on A-Interfaces and transcoding
effort would not occur; all in all a quite substantial improvement. This is in
many respects the best of all discussed alternatives. It fulfils GERAN-
Assumption #18 (see chapter 5.1).
But there are several weak points that need further studies:
1\. The MSC Servers could reject (in parallel or later) the new target Codec
for whatever (unlikely) reasons on one or both A-Interfaces, then an LCLS
break would not be possible;
2\. One of the synchronized Handovers could fail: then the call is
interrupted; either the failed handover is retried and successfully executed
(long speech interruption) or the other handover is taken back \- but is that
possible? Wasn\'t there an urgent need for this troublesome handover?
What happens if the Handovers coincide with supplementary services?
### 7.2.6 Conclusion regarding handover to incompatible codecs
The solution to stop or not allow LCLS after handover to an incompatible codec
should be standardized. Some technical aspects of the synchronous handover
solution require further evaluation, and it is FFS if the asynchronous or
synchronous handover solutions are standardized.
## 7.3 General descriptions of Inter-BSS Handovers with LCLS
### 7.3.1 Inter-BSS Handovers and LCLS that terminates Local Call
Here it is assumed that LCLS is established and ongoing within one BSS and
then one of the call parties (oMS or tMS) moves out of the common BSS serving
area and therefore the Local Switch between oBSS and tBSS can no longer be
maintained. The following issues need to be considered:
  * BSS needs to determine that one MS associated to an LCLS connection is leaving the BSS serving area and signals to MSC Server that LCLS has to be broken.
  * This could be signalled implicitly by the Handover Required message (the MSC Server can determine that easily by the target cell ID), or explicitly in the Handover Required message or explicitly via the LCLS Status message. What is important however, is that the Local Switch is not interrupted, until the Handover is executed (to avoid breaking LCLS in the event that the handover does not occur).
  * The voice service quality of LCLS related calls shall be ensured during Inter-BSS (and Inter-MSC) handovers. It would therefore be beneficial that the serving BSS copies both the User Plane Data streams immediately in uplink direction (without breaking LCLS!) for the transmission through the Core Network to have them available for the target BSS already before the handover is executed.
  * The MSC Server needs to handle the Inter-BSS handover as usual, but shall also inform the rest of the CN nodes that LCLS will have to be dropped (some nodes may permit LCLS but will need to know when the user data is running back through the CN. It is important for an optimal handover that the User Plane through the Core Network is established before the handover is executed.
The handling of the user plane when LCLS is established and released and for
Inter-BSS handovers is described in Clause 12.
Subclause 13.3.1.1 describes the basic general call flow for an Inter-BSS
Handover that terminates LCLS.
### 7.3.2 Inter-BSS Handover that establishes Local Call
Here it is assumed that the call is ongoing between two BSSs as usual, i.e.
with the voice path through the Core Network; Local Switch is not established.
But we assume that both BSSs received the LCLS-Configuration, GCR and LCLS-
Correlation request for this call.
Subclause 13.3.1.2 describes the basic general call flow for an Inter-BSS
Handover that allows LCLS to be established.
One subscriber moves into a cell area supported by the same BSS as the other
party with whom they are connected. The following issues need to be
considered:
\- The old, still serving BSS, which is about to be left behind by the moving
MS, sends a legacy Handover Required message to the serving MSC Server; the
call is ongoing.
\- The MSC Server sends the Handover Request message to the target BSS with
all the usual AoIP-related parameters, especially the Codec List (MSC
Preferred) and with the Global Call Reference (GCR) for the ongoing call,
together with the LCLS-Configuration, LCLS-Correlation request and LCLS-
Connection-Status-Control, in this example: LCLS is allowed, meaning for
example that no network nodes require access to the user plane. LCLS-
Connection-Status-Control is used to indicate whether the call may be locally
connected or not, in this example LCLS can be established.
> Editor\'s Note: In the above text this is only applicable to AoIP. AoTDM
> should be described or the text made more general.
\- The target BSS receives the LCLS-Correlation request and correlates this
GCR to all ongoing calls in the target BSS to determine whether it has already
received another assignment with the same GCR, which would be a candidate for
a Local Switch. In the example here that is the case and LCLS is potentially
feasible. Important to note is: the other call is already ongoing and that is
a fundamental difference to the call setup case;
\- The target BSS selects the best fitting, LCLS-compatible Codec out of the
Codec List (MSC Preferred) and hopefully this is successful for LCLS;
otherwise LCLS is not (directly) possible;
\- The target BSS prepares the new radio leg and reports the parameters back
in the usual Handover Request Acknowledgment message, together with the LCLS-
BSS-Status: LCLS is feasible, but not established though CN gave permission to
establish LCLS connection.
\- The serving MSC Server prepares the serving MGW for the handover and the
speech data in DL are forked to the old and new BSS, the old connection is
still intact, the call is not interrupted. The old BTS and the new BTS send
the speech data in DL onto the air interface.
\- The old serving BSS sends the Handover Command to the MS and the handover
is executed.
\- As soon as the target BSS detects that the mobile has arrived at the target
BSS, it may establish the Local Switch; the speech path delay gets shorter and
the speech quality remains or improves.
\- Now the serving MSC Server is informed, both that the Handover was
completed and that the Local Switch was established. The MSC Server informs
all other Nodes (including the far end MSC) within the call path (MSC Servers
and MGWs) that Local Switch is established, this is described in subclause
8.2.
\- The BSS shall update the serving MSC\'s (local and remote) with the LCLS-
Status.
\- Old access termination BSS and the MGW resources are released for this
call.
### 7.3.3 Inter-BSS Handover that leaves Local Switching unchanged
In this scenario it is assumed that LCLS was not established before the Inter-
BSS handover. When one call leg is handed over to another BSS, the call may
still remain not local and LCLS can not be established for the call. The LCLS
status of the call is not changed in this case.
## 7.4 Inter-MSC Handover Scenarios
### 7.4.1 General Considerations
The differences for LCLS when considering Inter-MSC handovers compared to
Inter-BSS handover within the same MSC is that the GCR and LCLS-Negotiation
negotiated from the other party known by the Anchor MSC needs to be passed to
the Target MSC. Additionally when LCLS is established or stopped the LCLS
status signalling needs to be passed through the Anchor MSC; this signalling
occurs after the handover to the new BSS occurs, the Anchor MSC shall then
determine whether the LCLS status has changed and therefore whether this
status needs to be propagated through the CN.
### 7.4.2 Inter-MSC Handover that leaves a not Locally Switched Call unchanged
In this scenario it is assumed that LCLS was not established before the Inter-
MSC handover. When one call leg is handed over to another MSC, the call may
still remain not local and LCLS can not be established for the call. The LCLS
status of the call is not changed in this case.
## 7.5 LCLS handling when a handover failed
### 7.5.1 General
LCLS may become possible after an Inter-BSS handover if both call legs are
within the same BSS after the handover was successfully completed. If such a
handover fails the MS should continue the call in the source BSS if possible
and LCLS is not established.
LCLS becomes impossible after a handover makes the LCLS call not local. If
such a handover fails the MS should continue the call in the source BSS if
possible and if LCLS was established before the handover attempt, the source
BSS should keep LCLS established if possible.
NOTE: According to 3GPP TS 23.009 [9], in all handover failure cases the
existing connection to the oMS shall not be cleared except in the case of
expiry of the timer for HO Complete and the call may therefore continue in the
source BSS, if possible, after a failed handover.
# 8\. Solutions for CN signalling and LCLS support
## 8.1 General
The purpose of this section is to identify the protocol signalling information
that needs to be exchanged between nodes within CN and between CN and BSS,
from CT4\'s perspective. Different options may be presented provided they are
deemed feasible.
## 8.2 Local Switching Negotiation within the CN
### 8.2.1 General Considerations
There are situations, where one MSC-S is upgraded to LCLS and the other MSC-S
is still not upgraded.\ That means: it is necessary to take the \"**LCLS-
Capability** \" of each MSC-S node into account.\ \ There are situations,
where the User Plane is needed within the CN, i.e. where LCLS is not allowed,
but only one of the MSC-Servers knows about that. That means: it is necessary
to take the \"**LCLS-Requirements** \" of each node into account.
Another aspects is that all nodes in the call routing path must be identified
that are not-LCLS-upgraded, that means they do not even understand the LCLS-
Negotiation. If one of such legacy nodes is in the path, then LCLS is not
allowed.
How does oMSC-Server and tMSC-Server (and all nodes in between) negotiate
LCLS-Capability and LCLS-Requirements?
### 8.2.2 LCLS Negotiation within CN: Solution without CN signalling
#### 8.2.2.1 Technical Description for LCLS without CN signalling
In this solution both oMSC-Server and tMSC-Server tell the BSS about their
individual LCLS capability and their individual LCLS requirements in the
Assignment Request message. There would not be any additional signalling
between the MSC-Servers regarding LCLS negotiation. The combining of all
necessary information is only performed within the BSS, which controls both
call legs.
Figure 8.2.2.1.1: Solution without CN signalling; only on the A-Interfaces,
not on Nc
#### 8.2.2.2 Pros and Cons for LCLS Negotiation without CN signalling
Pros:
\- The advantage of this option is the simplicity on the Nc-Interface.
Cons:
\- Neither oMSC-Server nor tMSC-Server has a complete overview concerning LCLS
capabilities and status in the core network. They do not know in the first
phase that the identical BSS is used on both call legs. They are sometimes
informed later by the BSS that LCLS is feasible and/or established. Especially
when the case with more than two MSC-Server\'s in the call path is considered,
it becomes obvious that this solution is not feasible.
Therefore this CN-solution is not followed up further.
### 8.2.3 LCLS Negotiation CN Solution Signalling between oMSC-Server and
tMSC-Server
#### 8.2.3.1 Technical Description for LCLS-Signalling between MSC-Servers
This CN signalling Solution is that oMSC-Server tells tMSC-Server about:-
\- its own oMSC-LCLS-Capabilities +
\- its own oMSC-LCLS-Requirements.
Figure 8.2.3.1.1: Solution for LCLS-Signalling; on the A-Interfaces and on Nc
A new IE \"**LCLS-Negotiation** \" would be necessary between oMSC-Server and
tMSC-Server in forward direction on the Nc-Interface to signal the \"LCLS-
Capability and LCLS-Requirements\".
It is FFS if the same IE will be needed in backward direction. It could then
in backwards direction also include the actual \"LCLS-Status\".
Editor\'s Note: The reason for this needs to be expanded, e.g. scenarios when
these may occur.
If BICC or ISUP is used on Nc, then the LCLS-Negotiation IE is sent within the
IAM Message in forward direction and within the Mobile APM Message in backward
direction.
IF SIP-I is used on Nc, then it is FFS, whether the LCLS-Negotiation IE is
sent in a separate SIP header field or within the encapsulated IAM in the SIP-
I-Invite in forward direction and in separate SIP header field or the
encapsulated ISUP Mobile APM in SIP-I-Response in backward direction.
It is FFS whether the LCLS-Negotiation IE is needed in other messages during
the call.
It is FFS, how to ensure, that no legacy nodes are in the path that don\'t
know the LCLS-Negotiation IE, but let it pass unmodified, although they do not
understand and do not allow LCLS.
The example call setup described here assumes that:
\- the MSC-S\'s exchange information for the correlation of the call legs
within the Core Network to identify the call in all nodes;
\- the MSC-S\'s exchange a LCLS-Negotiation within the Core Network to check,
if LCLS is feasible;
\- the MSC-S\'s send LCLS-Correlation requests and the resulting LCLS-
Configuration to the BSS\'s in Assignment-Request;
\- the BSS\'s correlate the call legs and reports LCLS-BSS-Status in
Assignment-Acknowledge to the MSC-S\'s;
\- the BSS\'s shall send a new Message LCLS-Notification to the MSC-S\'s, if
LCLS-BSS-Status changes;
\- the MSC-S\'s inform the BSS\'s with a new Message LCLS-CONNECT_CONTROL
containing LCLS-Connection-Status-Control IE indicating when to through-
connect the User Plane in LCLS;
\- the MSC-S\'s inform the MGW\'s that no User Plane traffic is to be expected
(\"standby\"). Signalling between the MSC-S and the MGW is defined within
section 8.3.
Some **new Information Elements** are necessary on the A-Interface, the Nc-
Interface and the Mc-Interface. Some **new Messages** are necessary on the
A-Interface. All these new elements are marked in **red colour** in the
example Call Flow in Figure 8.2.3.1.2 for this MS-to-MS call with two MSC-S\'s
with one potential LCLS solution for the case that LCLS is feasible. The OoBTC
negotiation in this example here is again based on BICC.
Figure 8.2.3.1.2: Example LCLS Call Flow for MS-to-MS call with two MSC-Ss
NOTE: the above figure shows BICC NNI protocol messages although the
principles apply to SIP-I signalling also.
> Editor\'s Note: it is assumed that the LCLS_CONNECT_CONTROL_ACK indicates
> the LCLS-BSS-Status when the user plane is through-connected. This means
> that the tBSS would return LCLS_CONNECT_CONTROL_ACK with LCLS-BSS-Status
> \"call is not yet locally switched\" and the oBSS would return
> LCLS_CONNECT_CONTROL_ACK with LCLS-BSS-Status = \"call is locally
> switched\". It is then assumed that a subsequent LCLS_NOTIFICATION would be
> sent by tBSS to indicate to tMSC that the call is locally switched.
#### 8.2.3.2 Pros and Cons LCLS Negotiation within CN Solution
Pros:
\- The advantage of this CN-Solution is that tMSC-S knows in a very early
phase that LCLS is a candidate or not. A further advantage is that any time
during the call this new IE could be used to signal changes in LCLS-
Capability, LCLS-Requirements and LCLS-Status.
\- The most important advantage is seen in call scenarios with more than two
MSC-Ss in the routing path.\ This option is therefore followed further on.
Cons:
\- The disadvantage of this CN-Solution is signalling effort on Nc.
### 8.2.4 LCLS Signalling within CN Solution with only LCLS allowed signalling
between oMSC-S and tMSC-S
#### 8.2.4.1 Technical Description
This option is that the oMSC-S tells the tMSC-S the GCR of the call and
whether LCLS is allowed or not when the oMSC-S supports LCLS. The tMSC-S tells
the oMSC-S whether LCLS is allowed by the tMSC. One characteristic of this
solution is that the oMSC and tMSC Servers and any interim nodes are not able
to indicate their LCLS preference/capability to other CN nodes.
#### 8.2.4.2 Pros and Cons LCLS Negotiation within CN Solution with only LCLS
allowed indications
Pros:
\- Less detailed signalling data across Nc.
Cons:
\- Signalling impact to Nc interface.
\- No information can be exchanged within the CN regarding LCLS
preferences/capabilities.
\- The MSC Servers can only indicate if LCLS is allowed or not in one
direction.
The Cons of this solution are significant and therefore this CN-solution is
not developed nor followed up any further.
### 8.2.5 Comparison of Solution for Local Switching Negotiation within CN
> Editor\'s Note: Solution needs to be finally consolidated after agreement of
> major principles.
Editor\'s Note: this should be a comparison of the LCLS negotiation solutions
independent from the call leg correlation solutions.
## 8.3 LCLS-Notification to MGW\'s
### 8.3.1 General Considerations
During call setup it is not known whether or not LCLS is feasible or will be
established at \"Connect\", so the MGW\'s are allocated and prepared as for
other calls. A notification may have to be sent to the MGWs when LCLS is
established and when LCLS is released.
### 8.3.2 MGW Notification Solution where MSC-S sends LCLS-Notification to MGW
#### 8.3.2.1 Technical Description
The MGW may need to be informed that LCLS is established or released for a
call in order to prepare for the special handling of Inter-BSS handover, mid-
call announcements or tones and lawful interception when LCLS is established.
MSC-Servers involved in a LCLS call shall inform their respective MGWs when
LCLS is established or released. Also if no CN user plane data is exchanged
during LCLS, the MGW\'s could free up any pooled resources (e.g. echo
cancellers, Transcoders etc) that are normally reserved for the call.
#### 8.3.2.2 Pros and Cons for MGW Solution with MSC signalled LCLS
Notification
Pros:
\- MGWs are aware of the LCLS status of a call.
Cons:
\- H.248 signalling enhancement is required.
### 8.3.3 Comparison of Solution for LCLS-Notification to MGW
One solution has been described how the MSCs send LCLS notifications to the
MGWs involved in a LCLS call, when LCLS is established or released. The LCLS
Notification to MGW would be sent via the H.248 interface. The alternative is
that the MGWs are not specifically informed whether LCLS is established or
not.
The selection of LCLS notification solution to MGW is FFS and is related to
mid-call announcements and tones because some mid-call announcement solutions
would require new MGW functionality, while an other solution does not impact
on the MGW.
# 9\. Call Leg Correlation Methods
## 9.1 General Considerations
Typically oMSC Server does not know anything about tBSS; tMSC Server does not
know anything about oBSS, i.e. the MSC Server\'s don\'t care whether the
identical BSS is used on both call legs. But the MSC Server\'s know the call
identity.\ \ On the other hand the BSS does typically not care, which call
legs belong to one call. The problem to be solved is simply to identify if two
call legs belonging to the same call are within the same BSS and can then be
switched locally (i.e. are within the same LCLS BTS or BTS switching area).
## 9.2 Correlation ID Solution where MSC-Servers inform RAN with Unique Call
Identifier (GCR)
### 9.2.1 Technical Description
In this option the MSC-Servers define and negotiate a unique Call Identifier
for the call, which is then known to all nodes in the routing path. In complex
call scenarios it seems necessary that this Call Identifier is globally (i.e.
world wide) unique. Then the MSC-Servers inform the RAN(s) about the **Global
Call Identifier** on each call-leg:\ if the Call Identifiers at both, oMS and
tMS, call-legs are identical, then the RAN knows that the call originates and
terminates at the same BSS and therefore LCLS is a candidate.
This option requires the definition and exchange of a Globally Unique Call
Identifier, which means new CN and new A-Interface signalling.
Such a Unique Call Identifier is specified in ITU-T Q.1902 series, called
\"Global Call Reference\" (GCR). The GCR is worldwide unique, also across
network boundaries.
The Global Call Reference is a combination of a Network ID field, a Node ID
field and a Call Reference ID field. Since the maximum length of GCR parameter
is not specified by ITU-T Recommendation Q.1902.3 [11] the complete parameter
layout is shown in Figure 9.2.1.1.\ The maximum length of this IE, including
the length indicators, is 13 octets.
* * *
8 7 6 5 4 3 2 1 octet Network ID length indicator 1  
**Network ID** 2  
(variable length: 3 .. 5) 3  
4 + m (m = 0, 1, 2)  
Node ID length indicator 5 + m  
**Node ID** 6 + m  
(fixed length: 2) 7 + m  
Call Reference length indicator 8 + m  
**Call Reference ID** 9 + m  
(fixed length: 3) 10 + m  
11 + m
* * *
Figure 9.2.1.1: Parameter layout of the ITU-T-specified Global Call Reference
In general all call legs, which belong to one call, use the same Global Call
Reference. This includes, but is not limited to Call Forwarding, Roaming,
Rerouting or Reselection. The GCR of the call will also be sent by the Anchor
MSC-Server in the IAM (ISUP/BICC) on the handover / relocation call leg
towards the Non-anchor MSC-Server. The nodes in the call path to the new
location of the MS will then receive and be able to use this GCR.
The already specified Global Call Reference is used for LCLS, both, within the
CN and between CN and RAN.
The oMSC-Server is responsible to generate the Global Call Reference, when it
receives the Service Request from the oMS. This GCR is then sent along the
routing path, through all iMSC-Servers, finally arriving at tMSC-Server. All
nodes within the path have the opportunity to note this GCR. This GCR is kept,
until the call is terminated. This is existing ITU-T standard.
[New for LCLS:]{.underline}\ oMSC-Server sends this GCR within the
oAssignment-Request to the oBSS for the oCall-leg; it is stored there;\
typically oBSS gets this GCR earlier than tBSS (see message flow diagrams in
clause 8);\ tMSC-Server sends this GCR within the tAssignment-Request to the
tBSS for the tCall-leg; it is stored there, too.
Then both BSSes perform the correlation of the received GCR for the Call-leg
with all stored GCRs and tBSS finds the corresponding oCall-leg for LCLS, if
oBSS and tBSS are identical. If successful, then tBSS marks both call legs as
\"LCLS-identified\". tBSS reports the result of the correlation to tMSC-Server
in tAssignment-Response. At the same time oBSS (which is identical to tBSS)
sends a LCLS-NOTIFICATION message including the new LCLS-BSS-Status to oMSC-
Server.
### 9.2.2 Possible options to reduce BSS processing for call leg correlations
The following approaches may be considered to minimize the BSC processing
requirements with a GCR approach:
**[1/ Reduce the number of bytes to be checked by the BSC for call legs
correlation]{.underline}**
Compared to ITU-T Recommendation Q.1902.3 [11], the TR proposes a fixed length
for the Node ID and Call Reference ID:
\- The Node ID is encoded on 2 bytes, allowing identification of up to 65536
MSC\'s in the network.
\- The Call Reference ID is encoded on 3 bytes, allowing identification of up
to more than 16 Million calls (per MSC).
The lengths proposed for the Node ID and Call Reference ID are appropriate
(sufficient, future-proof, can not be shortened).
A call originated in another network than the network to which the tMSC
pertains (i.e. different Network IDs) will in most cases never be local. The
call may become local only upon a subsequent Inter-Network Inter-MSC handovers
(i.e. likely very rarely). As a result, the following implementation/operator
options may be supported:
> 1a) The BSS may be configured with the Network ID to which it pertains and
> may ignore any GCR it receives with an unknown Network ID. Besides, it may
> disregard the Network ID part of GCRs received with a matching Network ID,
> and thus performs call legs correlations only using the Node ID and Call
> Reference ID.
>
> 1b) The tMSC may not send to the tBSS any GCR when oMSC and tMSC pertain to
> different Network IDs. In addition, oMSC and tMSC may send on the A
> interface a GCR format w/o the Network ID (when the GCR Network ID matches
> their own Network ID).
**[2/ Avoid unnecessary correlation attempts in the BSS]{.underline}**
In some circumstances, it is unnecessary for the BSS to attempt correlation
checks, while it may still be required that the MSC sends the GCR to the BSS
to store it for future correlation. A new flag could be defined in the
Assignment Request / Handover Request message to signal to the BSS not to
attempt call legs correlation upon receipt of this message (the BSS will still
attempt to correlate call legs upon receipt of a subsequent Assignment Request
or Handover Request message without the flag set).
As an implementation option, an MSC may set this flag in the following
circumstances:
> 2a) During call establishment when performing the radio assignment for the
> first leg of the call.
i) in the oAssignment, for example when Early Assignment is used (see 3GPP TS
23.108 [3]) at oMSC, or before sending an outgoing IAM/INVITE message to the
terminating MSC. It should be noted that LCLS negotiation should be performed
through the core network before oAssignment request (see subclause 8.2) in
order to ensure codec negotiation end to end and also to ensure that LCLS-
Negotiation is returned to the oMSC so that oMSC can include the corresponding
LCLS-Configuration and LCLS-Correlation request in the oAssignment then
sending of IAM/INVITE after oAssignment request to oBSS is not recommended.
ii) in the oAssignment if the IAM indicated that the Continuity message will
follow, oMSC could therefore signal within the Assignment Request message sent
to the oBSS that no correlation check is required at that stage of the call
setup. It should be noted that the signalling of Continuity in the IAM (or
preconditions in INVITE) will tell the tMSC not to perform alerting yet and
therefore no tAssignment request will be sent to tBSS until COT (or UPDATE
with preconditions met indication) is received. Therefore when continuity (or
preconditions) is applied, tMSC will not include in the tAssignment request
the flag indicating that no correlation check required.
iii) in the tAssignment when oMSC has not indicated Continuity in the IAM (or
preconditions in INVITE. The tMSC performs tAssignment \"Early\" (upon
receiving Call Confirmed).
iv) in the tAssignment when the tMSC performs a Late Assignment but before the
oMSC assignment. Late Assignment in tMSC is after alerting or after Connect
message is received (answer). In order for tMSC to use this flag it must know
if oMSC will perform the oAssignment before or after alerting/answer.
It should be noted that the most frequent case is when tMSC performs Early
Assignment, late assignment is not widely deployed), the oCallLeg is always
set up before the tCallLeg to ensure that the bearer is established end-to-end
before the called UE starts alerting (see 3GPP TS 23.205 [8] & TS 23.231
[12]).
Although it is preferred to always establish the oAssignment before the
tAssignment but not until codec negotiation and LCLS-Negotiation has occurred
(and thus requiring Continuity in BICC or preconditions in SIP-I) if this is
not employed then additional signalling is required to ensure the oMSC and
tMSC know which side is performing the first Assignment and which is
performing the second.
In order to enable the tMSC server to use this flag in the Assignment request,
the oMSC server should indicate to the tMSC server within LCLS-Negotiation IE
if oMSC applies early or late Assignment.
In order to enable oMSC to use this flag in the Assignment request the tMSC
should indicate to oMSC within LCLS-Negotiation IE if tMSC applies early or
late Assignment (and therefore requires oMSC to apply ringing tone to oMS).
> 2b) tMSC may determine that the call is not local at the call setup time:
\- when detecting that oMSC and tMSC pertain to different Network IDs; or
\- when detecting that oMSC and tMSC pertain to different MSC pools; or
\- when detecting that oMSC and tMSC are different and MSC pooling is not
supported or not in use.
\- For Intra-MSC MS to MS calls with different oBSC and tBSC.
**[3/ Transfer of Originating BSS Node ID within the Call Reference
ID]{.underline}**
During call establishment, the GCR is always sent to the BSS in order to
attempt correlation and to be stored for potential future usage. However, if
the call legs are not local to the same BSS it is not required to perform the
call correlation. In order to determine whether the call is an intra-BSS call,
the oMSC shall include the oBSS Node ID within the Call Reference ID of the
GCR, see Figure 9.2.2.1.
* * *
8 7 6 5 4 3 2 1 octet Unique Call ID (fixed length 3 octet 1) 1  
Unique Call ID (fixed length 3 octet 2) 2  
Unique Call ID (fixed length 3 octet 3) 3  
oBSS Node ID (fixed length 2 octet 1) 4  
oBSS Node ID (fixed length 2 octet 2) 5
* * *
Figure 9.2.2.1: Parameter layout of the Call Reference ID within the GCR
In order to avoid complex solutions to issues related to the BSS Node ID
changing during handover, see clause 13, this solution is based only on using
the initial oBSS Node ID during call establishment. Therefore the oBSS Node ID
within the Call Reference ID shall not be modified during handover.
In this alternative the definition and coding of the oBSS Node ID is an
integer that uniquely identifies the BSS Node within an operator\'s network.
The impacts to the proposed layout of the ITU-T specified Global Call
Reference, as shown in Figure 9.1.1.1, are an increase in the fixed length of
the Call Reference ID, and therefore compatibility with ITU-T Q1902.3 remains.
The impacts to the Global Call Reference ID are highlighted in Figure 9.2.2.2.
* * *
8 7 6 5 4 3 2 1 octet Network ID length indicator 1  
**Network ID** 2  
(variable length: 3 .. 5) 3  
4 + m (m = 0, 1, 2)  
Node ID length indicator 5 + m  
**Node ID** 6 + m  
(fixed length: 2) 7 + m  
Call Reference length indicator 8 + m  
**Call Reference ID** 9 + m  
(fixed length: 5) 10 + m  
11 + m  
12 + m  
13 + m
* * *
Figure 9.2.2.2: Parameter layout of the ITU-T-specified Global Call Reference
[Optional Intra-Network Call Detection by tMSC or tBSS:]{.underline}
As an option, the tMSC or tBSS may utilize the Network ID within the Global
Call Reference in order to determine whether the call is an intra- network
call (e.g. compare the Network ID within the GCR with the Network ID of the
tMSC).
\- When the option is supported in the tMSC, if the call is not an intra-
network call, then the tMSC indicates to the tBSS that call correlation is not
required. If the call is an intra-network call, then the tMSC shall request
that the tBSS correlates the call.
\- When the option is supported in the tBSS, if the call is not an intra-
network call, the tBSS does not perform call leg correlation. If the call is
an intra-network call, and the tMSC has indicated that call leg correlation
shall take place, then the tBSS shall perform call leg correlation.
[Optional Intra-BSS Call Detection by tMSC or tBSS:]{.underline}
As an option, the tMSC or tBSS may utilize the oBSS Node ID within the Call
Reference ID of the GCR, in order to determine whether the call is an intra-
BSS call (e.g. compare the oBSS Node ID with the tBSS Node ID).
\- When the option is supported in the tMSC, if the call is not an intra-BSS
call, then the tMSC indicates to the tBSS that call correlation is not
required. If the call is an intra-BSS call then the tMSC shall request that
the tBSS correlates the call.
\- When the option is supported in the tBSS, if the call is not an intra-BSS
call, then the tBSS does not perform call leg correlation. If the call is an
intra-BSS call, and the tMSC has indicated that call leg correlation shall
take place, then the tBSS shall perform call leg correlation.
The two options (Optional Intra-Network Call Detection by tMSC or tBSS,
Optional Intra-BSS Call Detection by tMSC or tBSS[)]{.underline} may be
implemented separately or combined, in any order, to allow the tMSC or tBSS to
decide whether call leg correlation should be requested. For example, first
compare the Network ID\'s and if this check passes then perform the check on
the BSS Node ID\'s, or vice versa.
**[4/ Transfer of SCCP Address in Global Call Reference ID]{.underline}**
In order to reduce the processing time for the BSS to correlate the
originating and terminating call legs, along with the oMSC generated Unique
Call ID, which is globally unique, the oMSC shall include the SCCP Source
Local Reference of the SCCP connection section of the originating call leg of
the oBSS, provided by the BSS when it initiates a SCCP Connection Request to
the MSC (see 3GPP TS 48.006 [13] clause 9.1) within the Call Reference ID of
the GCR (see octets 2 to 4 of Figure 9.2.2.3). The SCCP Source Local Reference
is described in ITU-T Recommendation Q.713 [14]. This reference connection
identity is already available at the oMSC and is randomly chosen and is unique
per call leg per BSS. However, the SCCP SLR is typically different, but could
be the same, for the same BSS for different MSC-Servers in a pool.
To maintain the same degree of \"uniqueness\" with the Call Reference ID
portion of the GCR defined based on the SCCP Source Local Reference of the
originating call leg of the oBSS it is necessary to also include the oBSS Node
ID within the Call Reference ID of the GCR (see octets 6 to 7 of Figure
9.2.2.3).
In this alternative the definition and coding of the oBSS Node ID is an
integer that uniquely identifies the BSS Node within an operator\'s network.
As an implementation option, the tMSC or tBSS may utilize the oBSS Node ID
within the Call Reference ID of the GCR, in order to determine whether the
call is an intra-BSS call. If the call is not an intra-BSS call, then call
correlation is not required.
As an implementation option, the tBSS may utilize the SCCP Source Local
Reference within the GCR in order to determine if the call is an intra-BSS
call. If the call is not an intra-BSS call, then further call correlation is
not useful unless required by the CN.
An example of how Call Leg Correlation may take place with this Solution using
pre-checks in the tBSS detailed below. Note that other solutions, such as
initially using the full GCR (Unique Call ID, Network ID, Node ID) to
correlate are also valid.
1) The tBSS performs a pre-check to compare the oBSS Node ID within the Call
Reference ID of the GCR, with it\'s own BSS Node ID. If the comparison fails,
then BSS could assume that the call leg correlation has failed and LCLS shall
not be performed. If the comparison passes, then proceed to Step 2.
2) The tBSS may perform a pre-check to compare the SCCP Source Local Reference
within the Call Reference ID of the GCR, with a list of SCCP Source Local
References that it has stored for call legs. If a match is not found, then the
BSS could assume that the call leg correlation has failed and LCLS shall not
be performed. If a match is found, then proceed to Step 3.
3) The tBSS performs a comparison of the rest of the GCR fields (i.e. Network
ID, Node ID). If this comparison fails, then call leg correlation has failed
and LCLS shall not be performed. If the comparison passes, then LCLS can be
performed.
* * *
8 7 6 5 4 3 2 1 octet Unique Call ID (fixed length 3 octet 1) 1  
Unique Call ID (fixed length 3 octet 2) 2  
Unique Call ID (fixed length 3 octet 3) 3  
oBSS Node ID (fixed length 2 octet 1) 4  
oBSS Node ID (fixed length 2 octet 2) 5  
oBSS SCCP Source Local Reference (fixed length 3 octet 1) 6  
oBSS SCCP Source Local Reference (fixed length 3 octet 2) 7  
oBSS SCCP Source Local Reference (fixed length 3 octet 3) 8
* * *
Figure 9.2.2.1: Parameter layout of the Call Reference ID within the GCR
The impacts to the proposed layout of the ITU-T specified Global Call
Reference, as shown in Figure 9.1.1.1, are an increase in the fixed length of
the Call Reference ID, and therefore compatibility with ITU-T Q1902.3 remains.
The impacts to the Global Call Reference ID are highlighted in Figure 9.2.2.4.
* * *
8 7 6 5 4 3 2 1 octet Network ID length indicator 1  
**Network ID** 2  
(variable length: 3 .. 5) 3  
4 + m (m = 0, 1, 2)  
Node ID length indicator 5 + m  
**Node ID** 6 + m  
(fixed length: 2) 7 + m  
Call Reference length indicator 8 + m  
**Call Reference ID** 9 + m  
(fixed length: 8) 10 + m  
11 + m  
12 + m  
13 + m  
14 + m  
15 + m  
16 + m
* * *
Figure 9.2.2.4: Parameter layout of the ITU-T-specified Global Call Reference
### 9.2.3 Pros and Cons of Correlation ID Solution using GCR
Pros:
\- No load on the MSC-Server to correlate the two call legs.
\- The call identifier is globally unique and already defined by ITU-T.
\- The call identifier does not change due to handover.
Cons:
\- A bit more impacts on the BSS to correlate the call legs.
\- GCR is signalled on A interface even when calls may not be in the same BSS.
## 9.3 Correlation ID Solution where MSC-Ss exchange unique BSS ID and Call-
Leg
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
## 9.4 Correlation ID Solution where MSC-Ss exchange unique RAN-Identifiers
and oCall-leg information
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
## 9.5 Correlation ID Solution using Call ID/CIC & \"MSC ID\"
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
## 9.6 Correlation Solution using GCR + Mandatory BSS ID Support
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
## 9.7 Correlation Solution using GCR + Optional BSS ID Support
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
## 9.8 Conclusion of Solution for Correlation of Call Legs
It is concluded that the GCR solution defined within section 9.2 shall be the
option selected for call leg correlation.
In addition, the Call Reference ID constructed by the oMSC shall contain the
originating BSS Node ID and therefore the overall length of the Call Reference
ID is as defined within section 9.2.2 Solution 3.
It is an option for the tMSC/tBSS to utilise the parameters defined within the
GCR to determine if call leg correlation may not be required during call
establishment as defined within section 9.2.2 Solution 3.
If the tMSC indicates that call leg correlation is not needed it is still
possible that the BSS performs a call correlation, see Table 15.2.1.
# 10 Impacts to Supplementary Services and Existing Features
## 10.1 Tandem free operation, TFO
LCLS can be activated for calls that use tandem free operation but TFO
operation is interrupted for the time LCLS is active. If LCLS is stopped in
the middle of a call, the TFO operation will resume, if still applicable.
## 10.2 CS data call
It is proposed to exclude CS data calls from LCLS due to the low traffic
volume these calls present and due to the complex interworking function that
is currently located within the Core Network and which would otherwise be
required within the BSS. CS data calls shall be handled as today, i.e. through
the Core Network.
## 10.3 Alternate Speech/Fax
It is proposed to exclude Alternate Speech/Fax calls from LCLS for the same
reasons as those given for CS data calls in subclause 8.4. Alternate
Speech/Fax calls shall be handled as today, i.e. through the Core Network.
## 10.4 GSM Fax
It is proposed to exclude GSM Fax calls from LCLS due to the low traffic
volume these calls present and due to the complex interworking function that
is currently located within the Core Network and which would otherwise be
required within the BSS. GSM fax calls shall be handled as today, i.e. through
the Core Network.
## 10.5 Announcements and Tones
### 10.5.1 Announcements and Tones during Call Setup
#### 10.5.1.1 General
The local call local switch shall be transparent to the user, which means any
potential network announcement or ring-back tone or Customised Alerting Tone
during call setup shall be sent to the originating user, even if the calls is
maybe locally switched at a later phase.
In some cases there is no need for a ring-back tone or an announcement from
the network and the oMS generates the ring-back tone locally. In these cases
there is no need for a User Plane in backward direction during the alerting
phase.
Further: there is no ringing tone or announcement to the terminating user
during call setup defined so far. Consequently, there is (so far) no need for
a User Plane in the forward direction during the alerting phase.
To determine whether or not a User Plane is necessary in the backward
direction needs to be negotiated on the Control Plane between the MSC Servers,
if advantage shall be taken.
#### 10.5.1.2 Announcements and Tones Solution using Early Provisioning of the
User Plane
##### 10.5.1.2.1 Technical Description of AT-Solution using Early Provisioning
In AT-Solution using Early provisioning the User Plane in backward direction
shall be established as without LCLS, i.e. already during the ringing /
alerting phase.
NOTE: As discussed in another chapter the BSS shall never establish a local
switch before receiving the indication from the MSC that the call is finally
answered. This is necessary to avoid fraud.
##### 10.5.1.2.2 Pros and Cons for Announcements and Tones Solution using
Early Provisioning
This approach, AT-Solution using Early provisioning, is the normal (fallback)
handling therefore needs no new additional signalling on the A-Interface and
the Nc-Interface. It maintains the same end user experience of announcements
and ring-back tones provided by the network, regardless of whether the call is
later on locally switched or not.
The disadvantage of this AT-Solution is that it does not allow any saving of
resources during the alerting phase. Since the alerting phase may be quite
long (motivation for CAT service) and after local switching is established the
CN resources may not be required at all. In summary:
Pros:
\- Procedure is simple
\- Same procedures for announcement/tone provided by network whether the call
is locally switched or not.
Cons:
\- it does not allow to save resources during the alerting phase.
#### 10.5.1.3 Announcements and Tones Solution using LCLS Negotiation to
determine whether User Plane is required
##### 10.5.1.3.1 Technical Description of AT-Solution using LCLS Negotiation
Since the early days of GSM the \"Late Assignment\" and the \"MS-generated
Ring-back tones\" are valid options. If Late Assignment is applied then, since
no User Plane exists during the Ringing phase, the originating MS must
generate the Ring-back tone locally. The Core Network informs the MS
accordingly by the \"Progress Indicator\" IE within the \"ALERTING\" message
(for details see 3GPP TS 23.108 [3] and 3GPP TS 24.008 [4]).
Late Assignment has several drawbacks and is not widely deployed. Instead
Early Assignment is used and then - when the User Plane is anyway already
established - the generation of the Ring-back tone occurs at the terminating
network side. The User Plane through the Core Network and through the
originating BSS is used to transport the Ring-Back tone to the originating MS.
The terminating MGW may generate quite different ring-back tones (for example
to identify the network/country, etc), also user-specific ones (the
\"Customized Alerting Tone\" feature requires this) and that makes this option
attractive.
This, however, means that the originating Radio-, Abis, A- and Nb-interface
User Plane is required and no saving can be achieved during the
Ringing/Alerting phase. In the context of LCLS this means: even if LCLS is
possible later, after the ringing phase, the Abis resources are required for a
considerable amount of time and the cost saving efficiency of LCLS is quite
reduced.
One of the traditional reasons for signalling the ring back tone from the
terminating network was to give accuracy to the end to end connectivity.
However if a call is determined to be connected within the same BSS through
the LCLS capability then the requirement for ring back tone to be passed
through the core network is diminished, especially if the core network leg is
convoluted due to international roaming or call forwarding.
It is therefore proposed for LCLS to consider using Early Assignment (to
provide fast through connection) with oMS-generated Ring-back tones and
additional new signalling to save all User Plane resources, especially the
Abis-Interface and the network based ring back tone generators.
Figure 10.5.1.3.1.1 shows the User Plane during the Ringing phase, where Early
Assignment is used to establish the Radio interfaces. In this example the
Abis-, A- and Nb-interfaces are marked in grey colour, because they are not
needed in this stage.
Figure 10.5.1.3.1.1: Active User Plane in Early Assignment with the MS-
generated Ring-back Tone
From this the following issues arise:
\- The decision to apply oMS based ring back tone can be made independently
from the terminating end\'s decision to apply a (customised) ring back tone
however this should not normally be applied if a CN based ring back tone is
applied, especially CAT service.
> To solve this problem the LCLS negotiation between the MSC Servers could
> indicate whether Ring-back tones (normal or customised) are applied or
> whether oMS-based Ring-back tones should be applied.
\- If any node inside the routing path needs to play an **Announcement**
during the ringing / alerting phase, then the User Plane is also required, at
least in backward direction between this node and the oMS.\ To solve these
problems the LCLS negotiation between the MSC Servers could indicate whether
any node needs to apply announcements, or - more general - whether or not the
User Plane is required in backward direction.\ It seems feasible to combine
all these LCLS-related requirements arising from these features within one or
more MSC Servers in the routing path into one \"LCLS-Negotiation\" IE on the
Nc-Interface (in ISUP or BICC or SIP-I).
\- To take full advantage of the result of the LCLS-Negotiation between the
MSC Servers, also the BSS must be informed to what extent the User Plane is
required and the following cases should be differentiated:\ \- User Plane in
backward direction necessary / not necessary\ \- User Plane in forward
direction necessary / not necessary.
In order to achieve this functionality it is deemed that several new IE\'s
have to be introduced on the A-Interface, see Clause 14 and subclause 15.2.
##### 10.5.1.3.2 Pros and Cons for Announcements and Tones Solution using LCLS
Negotiation
This explicit LCLS-Negotiation between the MSC Servers to determine the User
Plane connectivity during alerting requirement and therefore whether or not
the oMS-based Ring-back tone shall be applied has the potential to save Abis-
and other BSS and CN User Plane resources to a large extent during the ringing
phase. It seems likely that in many call cases (long alerting phase, short
call phase) these savings are dominant and possibly higher than the savings
during the established Local Switch. In summary:
Pros:
\- Resources could be saved in A-bis and other BSS and CN during the alerting
phase
\- The support for the indication in the BSS that UP inband signalling is not
used during alerting would be optional -- thus BSS may optimise the resources
or may apply normal handling.
Cons:
\- Possible different user experience if oMS based ring back tone is
negotiated and it differs to normal CN based ring back tone.
NOTE: this can occur today as oMS based ring back tone can be applied already.
\- Additional signalling/negotiation between MSC Servers and across
A-interface however the necessary new signaling can be limited to a new IE in
forward and backward direction on the Nc-Interface and a new IE on the
A-Interface. No new messages and no new procedures are necessary.
#### 10.5.1.4 Comparison of Solutions for Announcements and Tones during Call
Setup
The obvious benefit of AT-Solution using Early provisioning is that there are
no impacts to network signalling; it provides the normal, default behaviour
and therefore this must always be supported.
If AT-Solution using LCLS negotiation was supported as an option but does not
result in agreement to select MS based ring back tone then fallback to AT-
Solution using Early provisioning shall occur.
AT-Solution using LCLS negotiation is slightly more complex by adding new
IE\'s to existing messages, but offers substantial cost saving during the
alerting phase. It should be noted that if CAT service is prevalent in a given
network then in most calls the normal (AT-Solution using Early provisioning)
behaviour would result. The implementation of the BSS resource savings could
be considered during Rel-9 although final solution for this may need further
explanation. Support for CN based resource saving is FFS.
NOTE: The AT-Solution using LCLS negotiation is an optimisation that permits
the negotiation of whether the user plane is required during alerting phase.
It is reminded that Local Switching is not permitted during the alerting phase
but there is potential to save resources during the alerting phase. The
support of this AT-Solution is independent from such resource saving in the
BSS as described for the LCLS Configuration however the negotiation for the
support of such resource savings indication to the BSS would be dependent on
decisions based on the required ring back tone handling.
### 10.5.2 Mid-Call Announcements/Tones
#### 10.5.2.1 General
While a call is established the core network might send announcements or tones
on the user plane to the UE, see 3GPP TS 23.205 [8]. One example of mid-call
announcements is the warning message about a Prepaid account running dry. Such
mid-call announcements and tones need to be delivered also to locally switched
calls, either to one of the call legs or both.
NOTE: One aspect of the anticipated LCLS solution is that BSS may send silence
codewords on the AoTDM/G.711(AoIP) user plane interface and periodic SID
frames on AoIP interface (where compressed codec is used) respectively, which
MGW returns back downlink to the BSS. In case of announcements the MGW should
send the announcement downlink instead of the silence codewords or SID frames.
The mid-call announcements and tones are currently generated by the core
network and need to be delivered to the user via the BSS also for locally
switched calls. Five alternative solutions have been identified how to ensure
the delivery:
1\. Signalling to indicate start and stop of mid-call announcement/tone
(described in subclause 10.5.2.2, 10.5.2.6 and 10.5.2.8).
2\. Mid-call Announcement and tone detection in the BSS (described in
subclause 10.5.2.3).
3\. LCLS is not allowed for roaming subscriber or for subscribers in MSC-in-
pool if the subscriber subscribes to services that might cause mid-call
announcements or tones (described in subclause 10.5.2.4).
4\. Enhancement to solution 2 for multi-MGW scenarios: Inband tones indicating
the start and stop of mid-call announcement to be detected by MGWs in a chain.
Mid-call tones are differentiated from the \"special inband control tones\"
and are thus detected as mid-call tones (described in subclause 10.5.2.4).
5\. Break of LCLS before start of mid-call announcement or tone and re-
establishment of LCLS after completion (described in subclause 10.5.2.7).
These solutions are described more in detail below with corresponding benefits
and drawbacks.
#### 10.5.2.2 Mid-call announcement solution using Signalling to indicate
start of announcement
According to this solution the MSC-S informs the BSS that there will be an
announcement/tone arriving and therefore the BSS should block the call leg
speech data coming from the local link and let the announcement/tone go
through on the specified call leg, but the speech path can be kept locally
connected and audible on the unrelated call leg. The MSC Server controlling
the MGW shall inform BSS (possibly through some other MSS) that the
announcement/tone is over and that the BSS shall resume dropping user plane
data coming from the A interface.
This solution is straightforward for non-roaming subscribers, or more
generally in the cases where only one MSS/MGW exist in speech path, but it is
more problematic, e.g. for roaming subscribers, if the subscriber is using a
service that might cause mid-call announcement/tone to be generated in the
GMSC Server, for example CAMEL based services. In order to deliver
announcement/tone also to locally switched calls, LCLS out-of-band signalling
would be needed to enable GMSC Server to inform the originating or terminating
MSC Server in control of the locally switched call about the announcement or
tone. This part of solution would require extensions to the LCLS-Status-Update
request messages to be specified (sent within ISUP/BICC/SIP-I).
One alternative is that only the non-roaming part of this solution is
developed, i.e. to only define the new MSC Server message to inform BSS about
the announcement or tone, see also the solution described in subclause
10.5.2.4 not to allow LCLS during announcements/tones.
It is assumed that the BSS detects the tone/announcement coming from the CN
after it has been told to detect DL data and at that instant sends that data
and mutes the local user data. Immediately that DL data stops it shall resume
sending local user data. This should be the same behaviour in the BSS as for a
MGW applying tones or announcements.
> Editor\'s Note: it is FFS whether any special handling requirements exist
> for the BSS for any particular tones, if for example the user plane shall be
> muted within a series of tones related to pre-paid.
If this solution is selected, it would be preferable to define specific
signalling to inform the BSC about the announcement/tone instead of using the
basic LCLS control messages to allow or not allow LCLS, because LCLS as such
shall not be broken due to the announcement, LCLS is only temporarily
interrupted for the target call leg while the announcement /tone is played. It
would also be preferable to define specific LCLS Status request type to be
included in the LCLS-Status-Update message for this purpose between the MSC-
Servers.
All mid-call announcement solutions have to be able to handle mid-call
announcements/tones when lawful interception is activated for either call leg
and when there are more than one MGW in the connection (see subclause 10.5.2.3
for a detailed description of the issues). The detailed signalling solution
for this purpose is FFS.
The Pros of this solution are:
One benefit of this solution is that there is no need to develop advanced
announcement and tone detection in the BSS as described for solution using
announcement detection in BSS.
LCLS is kept active in the BSS and only the side where the announcement is
played is momentarily broken and user speech muted while the announcement is
played.
The Cons of this solution are:
Due to the inherent independence of out-of-band control signalling and inband
data, the exact time when it is allowed to pass through downlink user plane
data (announcement /tone) and when to resume dropping downlink user plane data
coming from the A interface is not exactly aligned with the inband data
generated by the MGW. The timing of messages to control the handling of mid-
call announcements and tones in the BSS according to this solution is
therefore demanding.
Further analysis and more detailed description of the signaling solution would
be needed to verify if these possible problems can be avoided or not.
This signalling solution causes delays in delivering the mid-call
announcements and tones, because the MSC-Server has to ensure that the MGW is
able to deliver the data exactly during the period when BSS, and possible
other MGWs in the connection, are prepared to handle mid-call announcements
and tones. The extent to which this delay is really measurable against
existing tone delivery given the varying delays due to network load and the
associated signalling queuing is debateable and depends on the signalling
solution details.
> Editor's Note: More detailed analysis and optimization of the signaling flow
> solutions e.g. in subclause 10.5.2.6 would be needed to demonstrate whether
> the timing problems described above can be avoided or if the resulting
> disturbances are likely to be significant.
Other drawback is that a new LCLS-Status request type needs to be defined to
be sent in the LCLS-Status-Update message and a new LCLS-ConnectionControl
flag defined for the A-interface LCLS-CONNECTION-CONTROL message but this is
quite a minor drawback, since these new messages shall be supported for LCLS
anyhow.
#### 10.5.2.3 Mid-call announcement solution using Announcement and tone
detection in the BSS
According to this solution there is no activation message from the MSC-S to
the BSS before announcements/tones, instead the BSS uses voice detection to
distinguish announcements and tones on the downlink. The BSC shall stop
through-connecting the downlink user plane data to the user and resume LCLS
user plane data after it detected that the announcement/tone was finished.
One anticipated LCLS aspect is that the BSC may transmit e.g. silence
codewords or SID frames in the uplink of Call leg A, which the MGW should
through connect on the other call leg downlink to the BSC (and in the other
direction Call leg B uplink - MGW - Call leg A downlink). The BSC must stop
this MGW connected user data from being forwarded to the users in an LCLS
call. In this mid-call solution, the BSC needs to distinguish and detect
announcements and tones from the MGW through connected silence codewords or
SID-frames.
If LI solution using bicasting is activated for a LCLS call, the user data
will be bi-cast e.g. for Call leg A and MGW will through connect the (bi-cast)
A user plane data downlink to Call leg B. Therefore there is an interaction
problem between this mid-call announcements and tones solution and Lawful
Interception solution using bicasting.
It is assumed that the BSS detects the tone/announcement coming from the CN
and at that instant sends that data and mutes the local user data. Immediately
that DL data stops it shall resume sending local user data. This should be the
same behaviour in the BSS as for a MGW applying tones or announcements.
> Editor\'s Note: it is FFS whether any special handling requirements exist
> for the BSS for any particular tones, if for example the user plane shall be
> muted within a series of tones related to pre-paid.
The Pros of this solution are:
\- One benefit of this solution is that there is no dedicated signalling from
the MSC-S to inform the BSS about the announcement.
  * The BSS can easily distinguish speech, e.g. announcements and tones, from SID frames /silence codewords.
The Cons of this solution are:
One drawback with this solution is that announcement detection would require
new voice detection functionality in the BSS. Another drawback is that Lawful
Interception solution using bicasting cannot work as anticipated together with
this mid-call announcements and tones solution, because the through connected
bicast speech would disturb BSC\'s voice detection of mid-call announcements.
It would be impossible for BSS to distinguish voice announcements from
downlink speech, but the BSS can easily distinguish speech, e.g. announcements
and tones, from SID frames /silence codewords.
The interaction problem with LI solution using bicasting could be resolved eg
by changing the MGW functionality in such a way that MGW should not return
LCLS bicast user plane back to the BSS. This, however, would change the
functionality of the MGW and LI solution using bicasting, which might make it
more vulnerable for detection. An additional difficulty is that if there are
several MGW\'s in a chain only the last MGW shall block the user plane
transmission, see Figure 10.5.2.3.1.
Figure 10.5.2.3.1 User plane connections in LCLS, when bi-casting is activated
for LI purposes
In Figure 10.5.2.3.1 the A and B subscribers are under different MGW\'s/MSS\'s
(e.g. because of multipoint configuration). LI is activated for the
A-subscriber in MGW1 (normally also B-subscriber shall be monitored in that
case). A mid-call tone or announcement needs to be played to the A-subscriber
from MGW2. The enhanced solution described in 10.5.2.5 overcomes this problem.
#### 10.5.2.4 Mid-call announcement solution where LCLS is not allowed if the
subscribed service might cause mid-call announcements
Mid-call announcements and tones for roaming CAMEL subscribers are done in
GMSC Server. According to this solution, no new LCLS related signalling to
originating or terminating MSC is performed to generate announcements or tones
to roaming subscribers and therefore this solution does not require
significant specification work. The consequence of such solution would be that
LCLS is recommended not to be used at all for roaming CAMEL subscribers, or
for such roaming subscribers that use some service, which might cause mid-call
announcements or tones in the GMSC Server when roaming.
With this solution the MSC Server in control of LCLS shall check if the
subscriber in question is roaming and subscribed to such a service that might
cause mid-call announcements or tones in the GMSC Server and shall not
initiate any LCLS for such subscribers. This solution could also apply for
MSC-in-pool subscribers that possibly need to receive mid-call announcements
or tones.
This solution can be combined with a partial signalling based mid-call
solution, where only the new MSC Server message to inform BSS about the
announcement is developed.
The Pro of this solution is:
The benefit of this solution is that it does not require significant
specification work to support announcements to locally switched roaming
subscribers and that there is only small impact on implementations.
The Con of this solution is:
The big drawback of this solution is that LCLS would not be activated for
roaming subscribers or for MSC-in-pool subscribers that might receive mid-call
announcements or tones.
#### 10.5.2.5 Mid-call announcement solution: Inband tone between MGWs to
indicate the start and stop of announcements/tones
This solution is an enhancement to the BSS announcement/ tone detection
solution described in subclause 10.5.2.3 to overcome the interaction problem
when user plane data is bicast to the core network for lawful interception
purposes or when bicasting is used to prepare for Inter-BSS handovers.
It should be noted that the announcement management tones are only needed when
there is more than one MGW in the user plane. When there is only one MGW in
the user plane, that MGW simply replaces silence or the SID frames /silence
codewords with the announcement or tone (depending on which CN user plane
solution is used). The receiving BSS can therefore easily detect valid user
plane data to be forwarded to the user. However since the LCLS solution shall
support MSC-in-Pool, the solution also needs to support multiple MGWs.\ \
According to this solution the MGW in a chain plays an inband \"valid user
plane data start\" tone before the actual announcement to indicate the exact
time when another MGW having connection to BSS shall let the downlink user
plane data (announcement) go through. Immediately after the announcement came
to an end, the \"valid user plane data ended\" tone is played from MGW to
indicate that the announcement is over and that the last MGW in the chain that
have connection to BSS shall, according to this solution discard any
subsequent incoming user plane data. Optionally it may resume forwarding SID
frames / G.711 silence codeword in downlink direction if this user plane
\"heartbeat\" proposal is adopted. The mid-call announcement management tones
shall be removed by the last MGW in the chain and are never sent to the BSS.
The last MGW in the chain shall not forward any other user plane data to the
BSS than SID frames /silence codewords or possible mid-call announcements or
mid-call tones.
If the Access MGW connected to the BSS in the DL path starts receiving real
user plane data from its preceding MGW (or directly uplink from the other call
leg), without any preceeding LCLS management inband tone, this Access MGW
shall not forward any such user plane data towards the BSS. Therefore eg bi-
casted user plane data due to LI or Inter-BSS handovers of one call leg is
blocked in the last MGW in the DL path and not forwarded to the other call
leg. It should be clear that this changes the MGW through-connectivity; in
effect the (last) MGW should continually poll for announcement management
tones on the legs of a LCLS call. But for inter-BSS handover it is still
desired that DL data is sent to the target BSS if the procedure conforms to
current standard 23.205 behaviour. This solution causes quite a number of
issues for the MGW and the definition of these properties depending on the
topology in the MGW, i.e. the package property needs to be defined for the
topology and not just per stream mode descriptor or context.
> Editor\'s Note: details signalling flows and connection models are needed to
> describe the inter-BSS handover for this MGW configuration option because
> the behaviour of all MGWs should e.g. be "taken back to normal" when
> executing the inter-BSS handover.
With this solution, the BSS should never receive any real user data other than
mid-call tones and announcements and shall distinguish this from SID frames /
G.711 silence codeword (if this option is employed) and let the real user data
go through to the MS as described in subclause 10.5.2.3. Immediately when the
announcement came to an end, the BSS can detect this because it again starts
receiving SID frames / G.711 silence codeword, which must not be forwarded to
the user.
Established LCLS and LCLS release shall be indicated to the MGWs via H.248 as
described in subclause 8.3. The MSC Server knows that LCLS is activated for
the call and when an announcement needs to be played it shall request the MGW,
which is part of a MGW-chain, via H.248 to generate the \"valid user plane
data start\" tone before the actual announcement is requested to be played
(announcement must be played immediately after the tone). When the
announcement is finished, the MSS shall request via H.248 the MGW to generate
the \"valid user plane data ended\" tone.
It is recognized that a user might generate a tone which could be identified
as a \"valid user plane data start\" or \"valid user plane data ended\" tone,
which are bicast to the core network when Lawful interception is active. The
first MGW receiving the uplink user plane data from A interface shall block
such tones originating from the UE. (The UE/user possibly generated mid-call
announcement management tones are anyhow sent to the other call leg via the
established LCLS link.) The MGW shall block and start replacing (overwriting)
long-lasting user generated LCLS management tones with SID frames over AoIP
and G.711 silence codewords on AoTDM (or when G.711 codec is used over AoIP).
It is noted that with this solution only the Access MGW receiving UL user
plane data can deliver the possible user generated LCLS management tones as
such to lawful interception, if lawful interception is active in that MGW.
Therefore, if lawful interception is activated for a LCLS call that involves
several MGWs it is necessary to activate lawful interception for Access MGWs
to ensure that possible user generated tones are delivered to lawful
interception.
This solution is applicable for the network scenario shown in Figure
10.5.2.3.1. For example, if MGW2 plays the announcement /tone towards the
A-subscriber, MGW2 shall generate the mid-call announcement management tones
with the announcement and the MGW1 shall manage the mid-call announcement
/tone as explained above.
The inband LCLS management tones would need to be defined or some existing
tones could be re-used. The selection or specification of the mid-call
announcement management tones is limited and demanding, since the tones must
be unique for LCLS only. One option would be to re-use the Special Information
Tone defined by ITU-T. The tone selection or definition is to be concluded in
the specification phase if this solution is selected.
The Pros of this solution are the following:
\- The pros of this solution from BSS point of view are the same ones as
described in subclause 10.5.2.3.
\- There is no need to break LCLS due to the announcement or tone; LCLS is
only temporary interrupted while the announcement or tone is played.
\- There is no need for dedicated signalling from the MSC-S to inform the BSS
about the announcement or tone, because BSS normally receives no user plane
data at all or only SID frames /silence codewords while LCLS is established.
BSS can trust that any received real user plane data from the core network is
either mid-call announcement or mid-call tone. In addition, no new LCLS
related signalling is needed between the originating and terminating MSC
servers (e.g when announcement or tone. is generated to roaming subscriber),
i.e. no new ISUP, BICC and SIP-I messages are needed.
\- The \"timing problem\" described for solution 1 is not applicable, because
the MGWs in a chain are informed by the announcement management tones just
before start of announcement and immediately after the announcement was
completed. There is no timing problem in BSS, because the BSS simply receives
the mid-call announcement/tone instead of SID frames /silence codewords.
However other timing problems arise because the A-bis interface will be
inactive when the BSS detects real DL data, i.e. announcement data. It must
then queue the announcement until A-bis is active, this could take some time
over satellite links.
\- There are no interaction problems with LI in the BSS because possibly bi-
casted user plane data from one call leg is always blocked in the DL direction
by the Access MGW and never delivered to the BSS.
\- There is no need to develop advanced announcement detection in the BSS as
described for solution 2.
The Cons of this solution are the following:
\- The MGW shall be informed by MSS via the H.248 interface that LCLS is
established, this is anyhow necessary but this solution requires additional
explicit indication to discard user plane data DL at the Access MGWs
\- This solution requires additional explicit indication for the Announcement
handling for the MGW to insert the start and stop stones.
\- This solution requires explicit indication to detect the special tone for
announcements/tones and thus allow this to pass through where other user plane
data shall be blocked.
\- The inband tone detection in the MGW is demanding and new functionality is
required in the MGW to handle tone generation and detection and interactions
with sending or forwarding SID frames if that option is also supported.
Currently the MGWs anyhow need to be able to detect e.g. DTMF tones, but the
LCLS management tone handling is specific tone discrimination and not just
detecting a tone e.g. from the currently specified DTMF tones. It is thus more
complex than DTMF detection and can result in erroneous behaviour if the tone
is not detected.
\- Another drawback is that the selection or specification of the mid-call
announcement management tones is limited and demanding, since the tones must
be unique for LCLS only.
\- This solution impacts existing MGW implementation for DSP handling. All
tone sending implementations need to be modified for LCLS to insert the
management tones before and after generating the requested announcement/tone.
\- All MGWs must be sniffing for these management tones in the UL from the BSS
in the event that LI is active to delete such tones from the payload. This
does not appear to be trivial and is a violation of the LI principles since it
will not pass the exact user data to the interception agency unless this is
active in the MGW that strips off the tone.
\- During inter-BSS handover these settings may need to be modified in order
to minimise the break in user plane data -- this can add additional signalling
steps.
\- MGWs in the path need to be permanently sniffing for the management tones
if the userplane is bicast even when no tone or announcement handling is
requested from that MGW. This is an ongoing load/overhead.
\- Generally the use of inband tones for control signalling should be avoided
as it is dependent on the encoding/DSP support and also has implications on
other In Path Equipment, e.g. modems etc.
\- BSS must activate the A-bis interface immediately it detects the
announcement/tone from the access MGW and then buffer the announcement/tone
until the A-bis is active.
This solution requires some quite complex MGW behaviour and interactions
depending on what new package properties have been set and whether LI is
currently activated for the call. Further detailed user plane connection
models and signalling sequences are needed before this solution can be seen to
work efficiently.
#### 10.5.2.6 Mid-call announcement solution when the user plane is de-
activated in the core network during LCLS
According to this solution the MSC server first must inform all MSC servers in
the path towards the UE that should receive the announcement/tone that the
user plane needs to be activated. Every MSC server will then requests the
corresponding MGW(s) to activate the user plane.
The last MSC server in the chain i.e. oMSC or tMSC needs to inform the BSS
that announcement/tone will be played from the CN. Since the user plane was
previously inactive the BSS should easily detect the mid-call
announcement/tone to be forwarded to the corresponding UE and block the speech
data coming from the local link from the unaffected UE (towards which
announcement/tone will not be played). Immediately when the announcement is
completed the BSS can detect this and unblock the speech data coming from the
local link from the unaffected UE. When the MSC server receives the response
that the user plane is activated it provides the MGW with the
announcement/tone identification and requests the MGW to notify the
announcement/tone completion using the Play Announcement or Send Tone
procedure. At reception of notification of the announcement/tone completion
the MSC server request the MGW to de-activate the user plane and will also
request that all MSC servers in the chain do the same to secure de-activation
of the user plane after the announcement/tone completion. The last MSC server
in the chain i.e. oMSC or tMSC will inform the BSS that the announcement/tone
is over and that the BSS shall resume dropping the user plane data coming from
the CN.
Figure 10.5.2.6.1 shows the network model where the iMSC server requests the
iMGW to play the announcement/tone directly on the desired bearer termination
Ta from which the signal shall be sent towards the oUE. The bearer termination
Tb is used for the bearer towards the succeeding tMGW (i.e. towards the tUE).
Figure 10.5.2.6.1: Connection Model, Mid-Call Announcement when User Plane was
previously inactive
Figure 10.5.2.6.2 shows the message sequence example for providing the oUE
with an announcement/tone. In the example the iMSC server requests the iMGW to
play an announcement/tone and to notify the announcement/tone completion.
Figure 10.5.2.6.2: Mid-Call Announcement Flow when User Plane was previously
inactive
  1. iMSC identifies that mid-call announcement/tone needs to be played towards oUE.
  2. Since the user plane is an inactive due to the LCLS the iMSC requests the activation of the user plane towards the oUE by sending a LCLS status update message BICC APM (or INFO request in case of SIP-I) and also indicates that oBSS needs to be informed that announcement/tone will be played from the CN.
  3. oMSC reconfigures its MGW connections to be active (backward through-connected).
  4. oMSC informs oBSS with a new message LCLS_UP_DATA that the user plane data needs to be (temporarily) provided to oUE from the CN.
  5. oBSS confirms the user plane data can be send from the CN with a new LCLS_UP_DATA_ACK message.
  6. oMSC confirms the activation of the user plane and oBSS is prepared for the reception of announcement/tone.
  7. At reception of LCLS status update response message iMSC provides the iMGW with the announcement/tone identification and requests the iMGW to notify the announcement/tone completion using the Play Announcement or Send Tone procedure.
  8. iMGW notifies the iMSC when the announcement/tone is completed using the Announcement Completed or Tone Completed procedure.
  9. With the LCLS status update message iMSC requests the de-activation of the user plane towards the oUE and also indicates that oBSS needs to be informed that no user plane data should be expected from the CN.
  10. oMSC reconfigures its MGW connections to be inactive.
  11. oMSC notifies oBSS with a new message LCLS_UP_DATA that should not expect user plane data from the CN anymore.
  12. oBSS replies with a LCLS_UP_DATA_ACK message.
  13. oMSC confirms the user plane is inactive with the LCLS status update response message.
[The Pros of this solution are:]{.underline}
\- No change to the Mc interface handling for tones/announcements
\- No change to the MGW implementation for generating tones/announcements.
\- BSS is aware that it will receive UP data specifically, it does not require
it to detect the announcement/tone or any inband indication that an
announcement/tone is about to be sent all the time.
\- The BSS implementation can minimise the gap between transmitting user data
between parties and the tone/announcement.
[The Cons of this solution are:]{.underline}
\- Additional signalling is required to through the core-network and on the
A-interface.
#### 10.5.2.7 Mid-call announcement solution: Break of LCLS before start of
announcement/tone
According to this solution the MSC-S informs the BSS that the LCLS shall be
released. After BSS has informed the MSC-S that the LCLS has been released,
the announcement or tone can be connected. After the playing of the
announcement or tone is finished, MSC-S may inform the BSS that LCLS is
possible again. This solution in practise seems quite similar to the
signalling solution described in 10.5.2.2, but both call legs are affected in
the solution described here.
It is significant for this solution that the BSS shall always block any DL
user plane data coming from the core network whenever the call is locally
switched.
The following figure shows the case of a mid-call announcement/tone connection
where the announcement / tone is connected in tMSC to the oUE.
Figure 10.5.2.7.1 Mid-call announcement /tone connection in tMSC to oUE
1\. tMSC receives the information that a mid-call announcement or tone shall
be played (see TS 23.205 subclause 14.1.1).
2\. tMSC informs tMGW that core network user plane needs to be reconnected,
see NOTE3.
3\. tMSC informs the oMSC that the LCLS shall be released. Note that this is
the same LCLS-Status request for any type of CN triggered LCLS release, as
should be differentiated from one that results from the BSS notifying an LCLS
release. It is assumed that this does not request a response from the far end.
4\. oMSC informs oMGW that core network user plane needs to be reconnected, if
the user plane was deactivated in the core network when the call was locally
switched in the BSS, see NOTE3.
5\. oMSC requests oBSS to disable LCLS, see NOTE1.
NOTE1: The BSS stops possible bi-casting and stops sending user plane data to
the local link, but anyhow sends user plane data uplink when LCLS is disabled.
Possible lawful interception of the call therefore can continue in the same
way as for any non-LCLS call, and without any additional LCSL-lawful
interception related signalling with the MGWs, during the time when LCLS is
disabled for the announcement/tone.
6\. oBSS informs oMSC and tBSS informs tMSC that LCLS has been released.
7\. oMSC informs tMSC about the LCLS status (local switch disconnected).
8\. tMSC requests tMGW to connect the announcement (see TS 23.205 subclause
14.6)
The following figure shows the case of a LCLS re-establishment after a mid-
call announcement/tone connection in tMSC to the oUE ends.
Figure 10.5.2.7.2 LCLS re-establishment after mid-call announcement in tMSC to
oUE ends
1\. The mid-call announcement or tone in tMGW ends.
2\. tMSC informs the oMSC that the LCLS will be re-connected.
3\. oMSC requests oBSS to establish LCLS and bi-cast user plane data, if
applicable, see NOTE2.
NOTE2: There is no request to re-connect LCLS at the tBSS because there was no
request to disable LCLS at tBSS. It is assumed that after answer the default
behaviour is to reconnect LCLS except if a specific leg has been requested to
disconnect LCLS. Once oBSS is requested to re-connect LCLS then the BSS should
establish local switching, and bi-casting if applicable.
4\. oBSS informs oMSC and tBSS informs tMSC that LCLS has been established.
5\. oMSC informs oMGW that the core network user plane resources can be de-
activated, see NOTE3.
6\. oMSC informs tMSC about the LCLS status (locally switched).
7\. tMSC informs tMGW that the core network user plane resources can be
deactivated, see NOTE3.
NOTE3: There is no LCLS impact on the MGWs if the user plane is kept
established in the core network when the call is locally switched in the BSS,
therefore signalling steps 2 and 4 in Figure 10.5.2.7.1 and signalling steps 5
and 7 in Figure 10.5.2.7.2 could be optional.
The Pros of this solution are the following:
\- There is no dedicated signalling from the MSC-S to inform the BSS about the
announcement or tone and this solution also does not impact otherwise on the
BSS. In addition, no new LCLS related signalling is needed between the
originating and terminating MSC servers (i.e. no new ISUP, BICC and SIP-I
messages needed) - This solution therefore does not require significant
specification work.
\- From BSS point of view this case looks like any other case where core
network initiates the release of LCLS.
\- There is no need to develop advanced announcement or tone detection in the
BSS.
\- No change to the MGW implementation for generating tones/announcements.
\- No new signalling is required on the MSC-Server -- MGW interface -- normal
CN initiated LCLS Break signalling.
\- With this solution there is no need for inter-MSC signalling to stop and
restart bi-casting before and after announcements and tones, which would
reveal lawful interception.
\- Possible lawful interception of the call can continue in the same way as
for any non-LCLS call during the time when LCLS is disabled for the
announcement/tone.
\- Mid-call announcements and tones are handled in the MGWs only and do not
involve the BSS, therefore they sound similar as for non-LCLS calls. For
example call waiting tones are intermixed with speech from the other call leg
and the MGW can mute user speech data between tones, if applicable.
The Cons of this solution are the following:
\- Each announcement/tone breaks the LCLS - this could cause a noticeable
click or interruption to the end-users -- the real impacts on the BSS to re-
establish the A-bis connections need to be known.
\- LCLS needs to be re-established again after the announcement/tone has
finished -- again this could cause a noticeable click or interruption to the
end users.
\- Delay of the announcement/tone connection until BSS has confirmed that the
LCLS has been released.
\- Bigger amount of signalling on the A-interface compared to the tone
detection solution.
#### 10.5.2.8 Mid-call announcement solution using Out of Band control
signalling for the intercepted LCLS calls
##### 10.5.2.8.1 General Information
If the LCLS call is also an intercepted call the BSS is bi-casting user plane
data Uplink. The BSS discards the user plane data coming from the CN via the
A-interface in downlink while for the mid-call announcement/tone the BSS must
forward it to the corresponding UE. Furthermore in case of mid-call
announcement/tone the BSS must block the speech data coming from the local
link from the unaffected UE (i.e. towards which announcement/tone will not be
played). Due to that the MSC server first must inform the BSS (through all MSC
servers in the path towards the UE that should receive the announcement/tone)
that announcement/tone will be played from the CN as the BSS is not able to
distinguish between the announcement/tone and Downlink speech. When the BSS
receives the information that mid-call announcement/tone is going to be played
the BSS stops bi-casting the user plane data in the Uplink. Since the bi-
casting of the user plane data will be temporarily disabled the BSS should
easily detect later on the mid-call announcement/tone that should be forwarded
to the corresponding UE and block the speech data coming from the local link
from the unaffected UE. Immediately the announcement is completed the BSS can
detect this and unblock the speech data coming from the local link from the
unaffected UE. When the MSC server receives the response that the BSS has
temporarily ceased the bi-casting of the user plane data it provides the MGW
with the announcement/tone identification and requests the MGW to notify the
announcement/tone completion using the Play Announcement or Send Tone
procedure. At reception of notification of the announcement/tone completion
the MSC server will inform the BSS that the announcement/tone is over and that
the BSS shall resume bi-casting of the user plane data.
##### 10.5.2.8.2 Mid-Call Announcement for intercepted LCLS call, when BSS
ceased bi-casting
Figure 10.5.2.8.2.1 shows the network model where the iMSC server requests the
iMGW to play the announcement/tone on another termination in the context
connected via topology information to the desired termination.
Figure 10.5.2.8.2.1: Connection Model, Mid-Call Announcement for intercepted
LCLS call
Figure 10.5.2.8.2.2 shows the message sequence example for providing the oUE
with an announcement/tone. In the example the iMSC server requests the iMGW to
play an announcement/tone by seizing a new ephemeral announcement/tone
termination Toat with the indication that a tone or announcement shall be
forwarded internally to the bearer termination Ta towards which the topology
association is \"oneway\" and requests the iMGW to notify the
announcement/tone completion.
Figure 10.5.2.8.2.2: Mid-Call Announcement Flow for intercepted LCLS call,
when BSS ceased bi-casting
> 1\. iMSC identifies that mid-call announcement/tone needs to be played
> towards oUE.
>
> 2\. Since the BSS is bi-casting the user plane data uplink the iMSC
> indicates in the LCLS status update message BICC APM (or INFO request in
> case of SIP-I) MSC to request tBSS to (temporarily) stop bi-casting user
> plane data in the Uplink.
NOTE: oBSS is not able to distinguish between the announcement/tone and
Downlink speech and due to that tBSS must stop bi-casting user plane data in
the Uplink to enable oBSS later on to easily detect the mid-call
announcement/tone.
> Editor's Note: The names of the CN messages and the corresponding IEs
> introduced for bi-casting are just working names used to explain the
> solution but the exact names can be assigned only after consultation with
> SA3-LI.
>
> Editor's Note: The new LCLS IEs introduced on the Radio Access Interface
> seem related to the LCLS configuration and should be aligned with the
> definition of the LCLS configuration IE, see sub-clause 15.2.
>
> 3\. tMSC requests tBSS with a new message LCLS_UP_DATA to (temporarily) stop
> bi-casting user plane data in the Uplink.
>
> 3.a tBSS acknowledges the bi-casting is stopped with the new
> LCLS_UP_DATA_ACK message.
>
> 4\. tMSC confirms tBSS temporarily ceased bi-casting.
>
> 5\. iMSC asks oMSC to request oBSS to (temporarily) stop bi-casting and also
> to inform it that announcement/tone will be played from the CN.
>
> 6\. oMSC sends to oBSS the new message LCLS_UP_DATA to (temporarily) cease
> bi-casting and that the user plane data needs to be (temporarily) provided
> to oUE from the CN.
>
> 7\. oBSS confirms the user plane data can be send from the CN with a new
> LCLS_UP_DATA_ACK message.
>
> 8\. oMSC confirms the oBSS is prepared for the reception of
> announcement/tone.
>
> 9\. iMSC server requests the iMGW to play an announcement/tone by seizing a
> new ephemeral announcement/tone termination (Toat) with the indication that
> a tone or announcement shall be forwarded internally to the bearer
> termination Ta towards which the topology association is \'oneway\' and also
> requests the iMGW to notify the announcement/tone completion.
>
> 10\. iMGW notifies the iMSC when the announcement/tone is completed using
> the Announcement Completed or Tone Completed procedure.
>
> 11\. iMSC server requests the iMGW to release announcement/tone termination
> (Toat)
>
> 12\. iMSC indicates in the LCLS status update message to tMSC to inform tBSS
> to resume bi-casting user plane data.
>
> 13\. tMSC informs tBSS to resume bi-casting user plane data in the Uplink.
>
> 13a. tBSS confirms the bi-casting is resumed.
>
> 14\. tMSC confirms the bi-casting is resumed.
>
> 15\. iMSC indicates in the LCLS status update message to oMSC to inform oBSS
> to resume bi-casting user plane data.
>
> 16\. oMSC informs oBSS to resume bi-casting user plane data in the Uplink.
>
> 17\. oBSS confirms the bi-casting is resumed.
>
> 18\. oMSC confirms the bi-casting is resumed.
[The Pros of this solution are:]{.underline}
\- No change to the Mc interface handling for tones/announcements
\- No change to the MGW implementation for generating tones/announcements.
\- BSS is aware that it will receive UP data specifically, it does not require
it to detect the announcement/tone or any inband indication that an
announcement/tone is about to be sent all the time.
\- The BSS implementation can minimise the gap between transmitting user data
between parties and the tone/announcement.
[The Cons of this solution are:]{.underline}
  * Additional signalling is required to through the core-network and on the A-interface.
  * A small period of time LI does not receive the needed data.
##### 10.5.2.8.3 Mid-Call Announcement for intercepted LCLS call, when CN User
plane is de-activated
Figure 10.5.2.8.3.1: Mid-Call Announcement Flow for intercepted LCLS call,
when CN User plane is de-activated
As the signalling on the A-interface to control BSS bi-cast is an indirect
indication that LI might be activated the possible option is that the MSC
which activated LI secures inactive user plane (by sending to the
corresponding MGW request to configure its termination to inactive).
The following steps are different compared to the basic call sequence
presented in the figure 10.5.2.8.2.2:
> 2\. Since the BSS is bi-casting the user plane data uplink the iMSC
> indicates in the LCLS status update message BICC APM (or INFO request in
> case of SIP-I) that announcement is going to be played towards the other
> side UE. MSC that activated LI is the only node that has to react at the
> reception of this information to secure inactive user plane (by sending to
> the corresponding MGW request to configure its termination to inactive).
>
> 3\. tMSC server requests the tMGW to change the through-connection of the
> bearer to inactive.
>
> 4\. tMSC confirms User plane is temporarily inactive.
>
> 5\. -- 11. as for the sequence in figure 10.5.8.2.2
>
> 12\. iMSC indicates in the LCLS status update message to tMSC to de-activate
> user plane.
>
> 13\. tMSC server requests the tMGW to change the through-connection of the
> bearer to bothway.
>
> 14\. tMSC confirms activation of the user plane.
>
> 15\. -- 18. as for the sequence in figure 10.5.8.2.
#### 10.5.2.9 Conclusion on Mid-call announcements and tones
It is proposed to use in 3GPP release 10 the \"Break of LCLS before start of
mid-call announcement or tone and re-establishment of LCLS after completion\"
solution described in subclause 10.5.2.7. This solution requires the lowest
amount of additional standardisation.
All other in the previous subclauses described solutions have several
drawbacks and require significant amount of additional specification. They
also require interaction with other standardisation groups because of lawful
interception impacts and BSS impacts. It is proposed to analyze these
solutions in more detail in some later 3GPP release.
## 10.6 DTMF in from MS to Network in an MS-to-MS call
DTMF can be sent to the core network also when LCLS is being used, because
DTMF is then forwarded in signalling on the control plane.
## 10.7 Enhanced Multi-Level Precedence and Pre-emption service (eMLPP)
eMLPP is always done during call set-up and handled by the MSC-S and therefore
such calls can be locally switched, no impact of eMLPP is foreseen on LCLS.
## 10.8 Call Deflection Service
The call deflection service is signalling based and therefore there is no
impact on LCLS.
## 10.9 Calling Line Identification Presentation (CLIP) Calling Line
Identification Restriction (CLIR) Connected Line Identification Presentation
(COLP) Connected Line Identification Restriction (COLR)
The calling line identification related services are signalling based and
therefore there is no impact on LCLS.
## 10.10 Call Forwarding Services Call Forwarding Unconditional (CFU) Call
Forwarding on mobile subscriber Busy (CFB) Call Forwarding on No Reply (CFNRy)
Call Forwarding on mobile subscriber Not Reachable (CFNRc), Call forwarding
after user determined user busy (UDUB)
There may be interaction between LCLS and the call forwarding services both
when the B subscriber call leg is a LCLS candidate and when the forwarded-to C
subscriber call leg is a LCLS candidate. Unconditional CFU and CFB are
performed in the core before the call is connected and therefore there is no
interaction for these services between the B subscriber call leg and LCLS.
LCLS may be activated if the forwarded-to C subscriber call leg is local
together with the A subscriber call-leg.\ \ On CF on no reply (CFNRy), CF on
mobile not reachable (CFNRc) and CF on mobile subscriber busy (CFB) the call
is forwarded before connect and therefore there is a possible interaction
between the original LCLS negotiation, which indicated LCLS feasible during
the set-up phase and subsequent LCLS negotiation for the forwarded-to call
leg, which may result in LCLS not being feasible or vice versa.\ \ Handling of
LCLS together with call forwarding services therefore may require e.g. that
the initial LCLS signalling with the B subscriber call leg needs to be
cancelled and new LCLS signalling may need to be initiated with the C
subscriber call leg.
The CFU, CFB, CFNRy, CFNRc, UDUB services are signalling based and therefore
there is no impact on LCLS.
## 10.11 Call Waiting (CW)
### 10.11.1 General
In order to identify the interactions between Call Waiting supplementary
service (CW) and LCLS the following is assumed:
\- subscriber A is to be the served subscriber with the call waiting
supplementary service,
\- subscriber B is to be the one who is engaged in a call with user A,
\- subscriber C is to be the one who has originated a call to subscriber A
which causes the call waiting supplementary service to be invoked.
If the served mobile subscriber A has activated the CW service and has an
active call towards user B, then when an incoming call from user C arrives the
CW service shall be invoked and the call shall be offered to subscriber A with
an appropriate indication. The mobile subscriber A has then the choice of
accepting, rejecting or ignoring the incoming call.
\- Subscriber A is served by aMSC and aBSS; subscriber B is served by bMSC and
bBSS; subscriber C is served by cMSC and cBSS.
\- LCLS is supported by all nodes.
\- Subscribers C, A and B are served by the same BSS (cBSS, aBSS and bBSS are
the same BSS). Furthermore if BSS ID is used for \"intra-BSS call\" detection
by cMSC and aMSC: cBSS ID is equal to aBSS ID.
\- Active call between subscribers A and B is an \"intra-BSS call\" with
global call reference GCR-ab.
### 10.11.2 Call confirmation of the waiting call
As already stated LCLS is supported and the active call between users A and B
is an \"intra-BSS call\". When user C triggers call setup the cMSC will create
GCR-c. The procedure from the subclause 13.2.1 will be applied for the for the
basic call establishment from the user C to A.
Figure 10.11.2.1 shows the sequence for the actions necessary within the core
network during call confirmation and the acceptance of a waiting call.
Figure 10.11.2.1 Call Waiting when LCLS is supported
The following steps are different compared to the basic call sequence when GCR
+ BSS ID are used for call leg correlation method:
> 1 -- 4. as for general basic call sequence.
>
> 5\. The aMSC will not perform the paging since the aMSC will first check if
> the called user A is busy and then if he activated CW service.
>
> 6\. The aMSC sends SETUP message with new transaction id (trans-id-ac).
NOTE 1: The aMSC and the a-MS may negotiate the bearer capability to be used
for the call by the exchange of information in the SETUP and CALL CONFIRMED
messages.
> 7\. CALL CONFIRMED message indicates \"busy\".
>
> 8 -- 14. as for general basic call sequence.
>
> 15\. aUE reports alerting.
>
> 16a. When the aMSC server receives the Alerting indication from the called
> user A it returns ACM with a Generic Notification Indicator parameter
> indicating \"Call is a Waiting call\".
>
> 16b. as step 18b for general basic call sequence.
>
> 17\. Calling user C is informed that his call is a waiting call.
The LCLS status of the active call between A and B will not be changed if the
mobile subscriber A decides to reject or to ignore the waiting call.
If the mobile subscriber A decides to accept the waiting call it can either
put the existing call on hold or the call is released (according to 3GPP TS
23.083 [10]).
> 18\. Called user A put the active call A-B on hold. HOLD request with
> transaction id that corresponds to call A-B is sent to aMSC server.
NOTE 2: If the existing call is put on hold the procedure for Call Hold from
subclause 10.12 will be followed for the active call A-B. The possible
announcements due to Call Hold should be described within solution for mid-
call announcements and tones (see subclause 10.12).
> 19\. When the aMSC server receives the HOLD request from the called user A
> it sends CPG with a Generic Notification Indicator parameter indicating
> \"Remote Hold\" towards bMSC server.
>
> 20\. aMSC server confirms acceptance of the HOLD request.
>
> 21\. as step 20 for general basic call sequence.
>
> 22\. When the aMSC server receives CONNECT request for the waiting call C-A
> it needs to send modify Assignment request to aBSS containing GCRc, LCLS-
> Configuration, LCLS-Correlation request and LCLS_Connection-Status-Control
> set to \"connect\".
>
> 23a. aBSS returns the ASSIGNMENT COMPLETE message with LCLS-BSS-Status
> indicating \"call can be locally switched but not yet locally switched\".
>
> 23b. cBSS signals LCLS_NOTIFICATION with LCLS-BSS-Status set to \"call not
> yet locally switched\".
>
> 24\. as step 22 for general basic call sequence.
>
> 25\. aMSC confirms the CONNECT request.
>
> 26\. aMSC returns ANM with LCLS-Status indicating \"LCLS feasible\".
>
> 27 -- 28. as steps 24 -- 28 for general basic call sequence.
## 10.12 Call Hold (CH)
The Call Hold service is signalling based and therefore there is no impact on
LCLS. Possible announcements due to Call Hold should be covered by the
solution to support mid-call announcements and tones, see subclause 10.5.2.
## 10.13 Multiparty (MPTY)
The analysis and conclusion for the impact of LCLS to Multiparty is not
complete. Therefore it is recommended that the Local Call Local Switch
functionality is broken during the call and the user plane routed back to the
core network when utilizing this Supplementary Service/Feature. After MPTY is
ended LCLS can be re-established if still applicable.
## 10.14 Closed User Group (CUG)
No impact.
## 10.15 Advice of Charge (AoC)
No impact.
## 10.16 User-to-User Signalling (UUS)
No impact.
## 10.17 Call Barring Services
No impact.
## 10.18 Explicit Call Transfer (ECT)
The analysis and conclusion for the impact of LCLS to Explicit Call Transfer
is not complete. Therefore it is recommended that the Local Call Local Switch
functionality is broken during the call and the user plane routed back to the
core network when utilizing Explicit Call Transfer.
## 10.19 Completion of Calls to Busy Subscriber (CCBS)
The Completion of Calls to Busy Subscriber service is signalling based and
therefore there is no impact on LCLS.
## 10.20 Multicall
LCLS is not allowed for Multicall.
## 10.21 Calling Name Presentation (CNAP)
No impact.
## 10.22 Voice group call service (VGCS), Voice broadcast service (VBS)
LCLS is not allowed for VGCS and VBS because the dispatchers are a multiparty
call and for talkers and listeners the distribution point of voice is in the
MSC.
## 10.23 Emergency Calls
Emergency calls are anticipated to terminate in the fixed network and
therefore emergency calls are not eligible for LCLS.
## 10.24 RTP Multiplexing
No impact.
## 10.25 Customised Alerting Tone (CAT)
There is no interaction between LCLS and multimedia CAT; LCLS is not supported
for multimedia calls. Audio CAT should be played before the call is connected
and therefore there is no interaction with LCLS. The audio CAT in the mid-call
phase is for further study, see subclause 8.5.2.
## 10.26 CAMEL
The analysis and conclusion for the impact of LCLS to this Supplementary
Service/Feature is not complete. Therefore it is recommended that the Local
Call Local Switch functionality is dependent on the specific CAMEL Service.
For some CAMEL services LCLS should be broken during the call and the user
plane routed back to the core network when utilizing this Supplementary
Service/Feature.
## 10.27 IMS Centralized Services (ICS)
No impact.
# 11\. Lawful Interception Requirements and Solutions
## 11.1 General
The general requirements on Lawful Interception are specified in 3GPP TS
33.106 [2].
It is generally understood that the applicability of LI is known at call setup
and does not change during the call. There is no requirement in 3GPP TS 33.106
[2] to start interception in the middle of a circuit switched voice call.
Lawful Interception shall be possible also when the Local Call Local Switch
feature is activated, and the main functionality shall remain in the Core
Network.
In order to allow support for the Lawful Interception feature in the Core
Network, user plane data for CS voice calls to be intercepted needs to be
conveyed to the Core Network, even if the calls are locally switched.
Two solutions are possible, and both of them could be specified.
## 11.2 LI-Solution by Restriction of LCLS by LI
### 11.2.1 Technical Description
This LI-solution is that whenever the MSC-Servers are aware that a local call
needs to be intercepted then they shall not allow the BSS to establish local
switching in the BSS. There shall not be any specific or implicit indication
in the signalling that local switching was stopped or not allowed for lawful
interception reasons. There may be more than one MSC Servers in the call path
and it could be that only one of them has the LI requirement set. In this
solution the MSC Server with LI activated shall block LCLS from being
established. For this LI solution there should be no need for the MSC Server
to communicate the LI requirement as such to other MSC Servers involved in the
call. This is part of LCLS negotiation within the CN and will result in LCLS
not permitted when LI is activated in any MSC-Server.
### 11.2.2 Pros and Cons for LI-solution by restricting LCLS
The problem of this LI-solution is that it might not be possible to maintain
the same end user perception in all cases, e.g. in terms of end-to-end speech
path delay. The delay might in fact vary between \"not locally switched,
intercepted local calls\" and \"locally switched, non-intercepted local
calls\". This could happen for instance in some scenarios where the Local Call
Local Switch feature would be typically deployed, i.e. when a satellite
backhaul is used to connect a group of BTS\'s to the BSC/MSC-S. In this case
the round-trip delay of a locally switched call will be \~600ms shorter than
for a normal call, unless an artificial delay is added for all the locally
switched calls (which is of course not desirable), and this difference would
be easily noticeable by the end users.
The benefit of this LI-solution is that it keeps the LI functionality in the
MSC-Server/MGW and does not require any dedicated support for LI functionality
in BSS or across the A-Interface. It requires, however, new signalling between
the MSC Servers. This may be combined with other new signalling, e.g. as
identified for Tones/Announcements during call setup and mid-call and in this
way LI-related signalling would be hidden.
The following list identifies the pros of this LI-solution:
\- It is not necessary to use any new security related functionality for the A
interface.
\- This LI solution has no impact on the BSS.
\- There is no indication exchanged within the core network and between PLMNs,
which would be related only to lawful interception. LCLS e.g. for roaming
subscribers can anyhow be blocked for many and various reasons, which are not
LI related, e.g. if there is a non-supporting MSC-Server in the connection
path. Therefore it is not obvious that LI is activated for a call when LCLS is
not allowed for a call to a roaming subscriber.
The following list identifies the cons of this solution:
\- This LI solution impacts on the MSC-Servers but new LCLS related signalling
anyhow has to be developed for the CN as shown in Clause 6.
\- Possibly substantially different user experience for non-intercepted LCLS
call and intercepted local call
\- LCLS shall be disabled for a certain call due to LI.
## 11.3 LI-Solution to bi-cast user plane data for LCLS calls
### 11.3.1 Technical Description
This LI-solution enables local switching also for intercepted calls, while
maintaining the same end user perception in terms of end-to-end speech delay.
This can be achieved if the user plane data is both locally switched and in
addition copied and forwarded to the Core Network (\"bi-casting\"). Bi-casted
user plane data coming from the BSS to the Core Network via the A-interface
when LCLS is established shall be blocked by the MGW or BSS (depending on
which mid-call announcement solution is adopted). In order to support this new
bicasting functionality in the BSS, a conditional \"Bi-casting required to the
core network\" Information Element is introduced in the new and modified
BSSMAP messages used by the MSC-S to allow the BSS to establish Local
Switching and to copy the User Plane data in uplink during an established
Local Switching.
If LI would be the only service that requires bi-casting functionality, this
LI-solution could imply that some direct or indirect indication that a call is
intercepted is conveyed to the BSS via some signalling message (while
currently there is no LI related signalling on the A-interface). In addition
proprietary test and measurements routines are foreseen that require sending
the User Plane data in uplink during LCLS. In this way LI is not the only
service using bi-casting and it therefore is unlikely that LI by this
signalling would be detected.
If the MSC-Server and BSS are located in different security domains, the
security procedures specified in 3GPP TS 33.210 [6] apply.
This LI-solution does not hinder LCLS in the BSS for any call where LCLS is
otherwise feasible. Any MSC-Server could activate LI for a LCLS call and would
need to request the oMSC-Server or tMSC-Server controlling the BSS to provide
user plane bicasting to the core network while LCLS is established for the
call. Such an Inter-MSC bi-casting request, however, could be seen as an
indication of LI activation, depending on what the actual signalling looks
like. It shall be possible to activate bi-casting on a per call basis when
interception was requested for a specific locally switched call. One possible
way would be to include this information in the LCLS-Configuration IE and
LCLS-Connection-Status-Control IE.
According to SA3-LI, the security issues with A-interface signalling have to
be carefully addressed to enable this LI-solution, e.g.: it should be ensured
that the indication sent towards BSS to trigger user plane bicasting cannot be
accessed by any unauthorized person.
Figure 11.3.1.1 shows the network configuration for communication content
delivery to LEMF when LCLS is in use for a circuit switched call. This figure
is based on Figure 12 \"Delivery configuration to the LEMF for the
interception of a circuit switched call\" in 3GPP TS 33.107 [5].
{width="4.8381944444444445in" height="3.8534722222222224in"}
Figure 11.3.1.1: Network configuration for user plane delivery to LEMF for
interception of a call when LCLS is used (based on figure 12 from 3GPP TS
33.107 [5])
The LCLS enhancement in BSS shown in Figure 11.3.1.1 enables LI also for the
subscribers that are locally switched in the BSS. In order to support
interception of the communication content the BSS has to provide user plane
bi-casting towards the MGW when LCLS is in use for a specific subscriber and
call.
The dashed lines indicate that downlink traffic received from MGW has been
suppressed by the BSS. Lawful interception configuration in the MGW for calls
that are locally switched in the BSS remains exactly the same as the MGW
configuration for the interception of calls that are not locally switched in
the BSS.
A specific problem arises, when, during the call announcements or tones have
to be played to one or both users while the BSS is suppressing the User Plane
data in downlink. It is FFS how to solve this.
### 11.3.2 Pros and Cons for LI-solution using bi-casting
Advantage of LI-solution using bicasting is that LCLS is possible also in
cases where the User Plane data are necessary within the core network. This
LI-solution maintains the same end user perception in terms of end-to-end
speech delay compared to local calls where the User Plane data are not sent in
uplink.
The following list identifies the pros of this LI-solution:
\- There is no difference on user experience; LCLS can be used independently
of interception or other needs for uplink data
\- There is no need to stop or prevent LCLS in the BSS due to LI
\- Bi-casting is necessary for measurements and testing and maybe other
services (see handover section) and not only for LI
NOTE: The term bi-casting only refers to the sending of uplink user data on
one call leg from BSS to the CN. The corresponding downlink user plane for the
same call leg should be blocked in the BSS while LCLS is established.
Therefore bi-casting is different from e.g. \"pre-establishment\" of user
planes via the core network in inter-BSS handover cases, which anyhow is for
FFS. Bi-casting in relation to other services is FFS.
The disadvantage of this LI-solution is that it is a bit more complicated
especially on the BSS side because of the required bi-casting capability and
the additional A-interface signalling that needs to be protected from
unauthorized disclosure of LI related signalling.
The following list identifies the cons of this LI-solution:
\- The BSS is required to support user plane bicasting for LI purposes
\- The BSS is required to maintain the A-Interface connection (i.e.
optimizations to release the A-interface are not possible) so that User Plane
data can be passed in downlink on the A-Interface.
\- The signalling on the A-interface to control BSS bicasting is an indirect
indication that LI might be activated on the BSS. This security threat may
have to be countered by encrypting all LCLS related signalling on the
A-interface, which could cause some (possibly substantial) overhead.
\- When an intermediate MSC-Server activates LI with this solution it should
be able to request either the oMSC or tMSC controlling the BSS to activate
bicasting. Such signalling could be visible to an intruder on the CN
interfaces, depending on network scenario and what the actual CN signalling to
activate bicasting would look like, however it is FFS whether this is a
critical issue for LI integrity.
## 11.4 Comparison of Solutions for LCLS considering LI
Two solutions to support lawful interception of calls that are candidates to
be considered for locally switched calls in the BSS are described above. Based
on feedback from SA3-LI it seems possible to use both solutions, but the LI-
solution using bicasting is more demanding from security point of view. The
obvious benefit of the LI-solution which stops LCLS when LI is required is
that there is no need for specifically LI related signalling on the
A-interface. There is need for LI related signalling between the MSC Servers
for both solutions but this could be part of normal LCLS negotiation. The
signalling LI-solution which stops LCLS can be used in scenarios where there
is no user noticeable difference in call quality when the call is being
intercepted. If there is user noticeable difference of call quality, i.e.
increased speech path delay, when the call is being intercepted, then it is
not possible, or not advisable, to use the LI-solution to inhibit LCLS. In
such scenarios only the LI-solution using bicasting should be used.
One conclusion is hence that both LI solutions should be standardised for
lawful interception of locally switched calls.
# 12\. Solutions for User Plane handling
## 12.1 General
The intended benefits of Local Call Local Switch feature are mainly to save
transmission bandwidth on BSS internal interfaces, Abis and Ater. Establishing
local switching means that either the call is switched in the BSC or a direct
communication is created between the involved BTS\'s. In any case the effect
is that some resources on the BSS internal interfaces (Abis and Ater) can be
saved. The specific solution will be based on BSS network topology and shall
remain implementation specific. The only user plane aspects that need to be
standardized are the ones affecting the A interface.
In order for the BSS to establish a Local Switch several prerequisites are
necessary that are related to the User Plane handling on the A-Interface
(other control protocol pre-requisites are described in clauses 11 and 12):
\- the Core Network must indicate, when the through-connection is allowed
(LCLS-CONNECT containing LCLS-Connection-Status-Control IE)
\- the Core Network must indicate to what extend User Plane access is
necessary (LCLS-Configuration and LCLS-Connection-Status-Control)
## 12.2 A-interface and CN UP Handling Solution by not releasing A-interface
and core network resources during LCLS
### 12.2.1 Technical Description for not releasing CN-resources by providing
SID frames
When the user plane connections and CN resources are not released for a LCLS
call, the MGW\'s may have some kind of supervision of the User Plane
functionality.(It is FFS whether supervision of the User Plane functionality
is currently a required/defined in 3GPP)
If such supervision of the User Plane functionality is required, the BSS needs
to generate and send to the core network SID frames over AoIP and G.711
silence codewords over AoTDM, or when G.711 codec is used over AoIP, on both
call legs when LCLS is established for a local call. The MGWs forward received
SID frames /G.711 silence codewords when LCLS is established for a call and
the BSS shall always block user plane data received from the core network;
this is the assumed normal BSS LCLS behaviour, except for some mid-call
announcements and tones solutions described in subclause 10.5.2.
> Editor Note: that G.711 silence codewords over AoTDM is supported by the
> 3GPP or not needs to be further checked.
The BSS shall send the actual user speech data to the core network if lawful
interception is activated for the local call according to the solution
described in subclause 11.3, and in that case will not send SID frames.
To minimize changes to existing AoTDM deployments and to ongoing AoIP
implementations, the impact on the A interface user plane handling should be
kept as low as possible:
\- For AoTDM, no changes to the A interface user plane handling should be
defined. Even if a call is locally switched, the two corresponding A-Interface
circuits shall always remain allocated, meaning that bandwidth savings on the
AoTDM interface for locally switched calls are not possible, but bandwidth
savings can be realized on the Abis/Ater interfaces, of course. While a call
is locally switched, the TRAU will send \"silence codeword\" on the A
interface (G.711 silence codewords shall be sent on A interface every 480ms)
to allow the supervision of the circuits.
\- For AoIP, no changes to the A interface user plane handling should be
defined. Even if a call is locally switched, the two corresponding A-Interface
IP connections shall always remain allocated and the BSS shall send some SID
frames on the A interface to allow the supervision of the IP-links. If AMR-NB
or AMR-WB is being used for the local call, a SID First frame shall be sent
every 160 ms. If G.711 codec is used in the A-interface, G.711 silence
codeword shall be sent every 480ms. In case of other codecs, a SID frame shall
be sent every 480 ms.
\- For the mixed AoTDM-AoIP case (one leg of the call using AoTDM, the other
using AoIP) the proposal is again to keep the circuit and the IP connection
allocated throughout the call. For the leg of the call using AoTDM, when the
call is locally switched, the TRAU should send some \"silence codeword\" on
the A interface to allow the supervision of the circuits. For the leg of the
call using AoIP, if G.711 codec is used over AoIP, the TRAU should send some
\"silence codeword\" on the A interface to allow the supervision of the
circuits, else the BSS should send e.g. some SID frames on the AoIP-Interface
to allow the supervision of the IP-links.
Figure 12.2.1.1 shows an example on where the SID frames are generated and
discarded and that they are generated separately from the locally switched
user plane.
Figure 12.2.1.1 not releasing CN-resources by providing SID frames during LCLS
### 12.2.2 Technical Description for not releasing A-interface and CN-
resources with no data on user plane
#### 12.2.2.1 Technical Description on not releasing A-interface and CN
resources and user plane is kept active and through connected.
In this solution, the MGW performs the same resource reservation and
termination activation as in 12.2.1. Terminations are active in MGW when the
local switching has been established. The only difference with the solution
described in section 12.2.1 is that BSS sends nothing on A interface. But if
there is ongoing mid call announcement/tones or LI is activated, it is
possible to transmit user plane data via user plane links without any
additional signalling between MSC-S and MGW as the terminations are already
active, i.e. from a core network perspective this is the same as 12.2.1.
#### 12.2.2.2 Technical Description on not releasing A-interface and CN
resources but user plane connectivity is not though-connected.
In this solution, the MGW performs the resource reservation and termination
seizure in MGW, but the stream mode is set to inactive. So if the LCLS status
is changed, there is additional signalling step between MSC-S and MGW to
change stream mode to active/de-active and allow/disallow user plane data to
be through-connected.
When local switching has been established, the IP connections or Circuit
stillalways remain allocated in this proposal, i.e. the corresponding IP
endpoints shall not be released. It shall be possible for MGWs to suspend user
plane transmission, and hence save bandwidth, while the call is locally
switched. Therefore, while a call is locally switched, the MGWs in the chain
shall not expect to receive through-connected data. It should be noted that
this solution results in additional signalling on the H.248 interface: the
MSC-S shall inform the MGW about established and released Local Switching so
that the MGW can start and stop suspending the user plane transmission. It
should be noted that for some mid-call announcements and tones solutions
described in subclause 10.5.2 there is an additional requirement for H.248
signalling.
## 12.3 Solution by releasing A-Interface and CN resources during LCLS
### 12.3.1 General for releasing A-interface and CN-resources
It has been stated in example call scenarios that the BSS resources (Abis,
Ater, TRAU, A-Interface, etc) are often not necessary during the alerting
phase: only the downlink on the originating side is sometimes necessary - if
at all - to transport the announcements or the ring-back tone to the
originating user. Considering that in some countries and cultures the alerting
phase is constituting a substantial part of the whole call handling time, that
it is indeed often the only phase of the call handling time, it seems very
necessary to invest into signalling solutions to save the unnecessary
resources at call setup.
During an ongoing LCLS call the likelihood seems rather small, that
announcements or tones or other (new) User Plane interactions are necessary.
It can be expected that most of the time most calls will just remain LCLS
voice calls without any additional service involvement. Also these reasons
seem to justify a closer look into signalling solutions that save the unused
resources.
LCLS requires most likely changes to all interfaces, although many changes are
limited to adding a new IE.
It is noted that this goes beyond the original scope and intentions of the
feasibility study and therefore further analysis of this should not take
preference in Rel-9.
### 12.3.2 Technical Description for releasing A-interface and CN-resources
During the call setup phase, the MSC-Servers may exchange an additional
\"LCLS-Neg\" IE in forward and later in backward direction in existing
messages, to identify, whether User Plane access is necessary by at least one
node in the path, see chapter 11. The User Plane access can be to the
\"forward User Plane\" or the \"backward User Plane\", it can be as \"write
access\" or as \"read access\". It seems that four binary flags (Yes/No) would
be sufficient to code all these options: Read-Forward; Read-Backward; Write-
Forward; Write-Backward.
For example the application of \"Customised Ring Back tones\" (but nothing
else) requires write access to the User Plane in backward direction: Read-
Forward=No; Read-Backward=No; Write-Forward=No; Write-Backward=Yes.
Another example could be LI (and nothing else), which requires read access to
the User Plane in forward direction and backward direction: Read-Forward=Yes;
Read-Backward=Yes; Write-Forward=No; Write-Backward=No.
The combination of LI and an announcement in forward direction would require a
combination of these flags:\ Read-Forward=Yes; Read-Backward=Yes; Write-
Forward=Yes; Write-Backward=No.
The result of the LCLS-Negotiation between all nodes in the Core Network would
then be communicated to the BSS by the corresponding \"LCLS-Configuration\"
and \"LCLS-Correlation request\", e.g. within the Assignment Request message
or during a later message, e.g. the Handover Request message.
The BSS could then exactly allocate these resources that are actually needed.
Regarding the A-Interface the approach as described above could be used, maybe
a bit simplified:\ AoTDM could keep the allocated Circuit-Identity-Codes
(CIC\'s) and TDM-links with a certain silence code word, or could release the
CIC\'s. The re-allocated of the CIC\'s by the MSC-Servers is possible on short
notice, except when there is overload and the CIC\'s are \"overbooked\". It is
up to the skills and strategies of the operator to which extent he wants to
apply this overbooking. The re-allocation and release of CIC\'s require also
signalling between the MSC-Ss and the MGW\'s and this is may be the real
\"cost factor\" that needs to be weighted against the benefit.
AoIP could also keep the allocated IP-endpoints (here we have \"infinitely
many\"). But without informing the MGW\'s when (and when not) User Plane
traffic is necessary the resource saving effect can not be harvested. At the
end also an IP link can be \"overbooked\" in terms of link load and the
problem is very similar to the one in the AoTDM case.
When the LCLS must be switched back to be routed through the CN the LCLS-BSS-
Status IE must be sent from the BSS and LCLS-Status between MSC Servers
through the CN to return the A-interface and CN resources. The details of this
procedure are FFS.
## 12.4 User plane handling in Inter-BSS and Inter-MSC handovers of LCLS
related calls
In order to ensure good voice service quality, it seems safest to first re-
establish the normal voice path via the core network without breaking LCLS and
then execute the Inter-BSS handover as usual. The old BSS should keep only the
unaffected leg of the call and terminate LCLS, taking the user plane data from
the CN in DL. The old BSS shall send user plane data copies in uplink, i.e.
bicast, so that the Target BSS will get speech data in DL via CN.
Editor's Note: the above description is not yet complete.
NOTE: In some scenarios this means that the speech path delay will jump up
(300ms one way) and this causes an unavoidable gap in the speech communication
in one direction. In the other direction the user will hear a short part of
the voice signal a second time (300ms).
## 12.5 Comparison of Solutions for A-interface and CN User Plane handling
There are four possible solutions for A-interface and CN user plane handling.
In this section, the differences among those solutions are compared.
Following table shows the differences between those possible solutions:
Table 12.5.1: Comparison of Solutions for User Plane handling
* * *
                                                 Not releasing A-interface and CN-resources                                     Releasing A-interface and CN-resources                                                                                                               
                                                 Provide SID frames                                                             User plane is kept active and through connected   User plane connectivity is inactive, and not through-connected
Impact to the MGW No Impact No Impact The MGW needs to change status when LCLS
status is changed The MGW resources will be released when LCLS is established
MGW resources must be seized when LCLS is released Impact to the Signalling
between MSC and MGW No Impact No Impact The MSC needs to inform the MGW LCLS
status Additional signalling is required between the MSC and the MGW when the
MGW resources need to be seized after LCLS is released (e.g. new local IP
Address, port, circuit, etc.) Impact to the Signalling between MSC and MSC No
Impact No Impact A new message is needed to indicate the far end MSC to
release/allocate the user plane resources Additional signalling is required
between the MSC\'s when the MGW resources need to be seized after LCLS is
released (e.g. new local IP Address, port, circuit, etc.) Impact to the BSS
The BSS needs to generate SID frames when the call has been locally switched
No Impact No Impact No Impact Impact to the handover procedure No Impact No
Impact The user plane needs to be re-activated before perform handover
procedure The user plane needs to be re-established and resources seized
before performing the handover procedure
* * *
According to the above table, it is clear to see that the solutions for \"not
releasing A-interface and CN-resources by providing SID frames\" and \"not
releasing A-interface and CN resources and user plane is kept active and
through connected\" are more simple than the other two solutions, e.g. there
is no impact to the MGW, CN signalling and handover procedures.
## 12.6 Conclusion of Solutions for A-interface and CN User Plane handling
The A-interface and CN User plane should not be released, and the MGW should
not be impacted by LCLS functionality.
In addition, the MGW will behave the same regardless whether SID frames are
sent from the BSS to the CN or not.
The BSS is not mandated to but may send SID frames/silence codewords to the
Core Network while LCLS is established.
Editor's Note: GERAN2 is requested to confirm the above requirement regarding
the sending of SID frames by the BSS
# 13 Call Establishment and Handover Scenarios for selected Call Leg
Correlation Method
## 13.1 General
The following sections describe basic scenarios for call establishment and
handover based on the selected method for call leg correlation where the
originating BSS ID is encapsulated within GCR, also called \"the GCR with
encapsulated oBSS ID\".Each sequence however is based on the basic principles
described in the other sections for Call Establishment (Clause 6), Handover
principles (Clause 7), LCLS-negotiation (Clause 8) and using the assumed new
A-interface procedures described in clause 14. Any specific A interface
messages or IEs particular to a given correlation method not defined in the
basic sequences are identified.
The fact that GCR+BSS ID is agreed to be used in the example basic sequences
is not any agreement at this stage to adopt this as the final solution.
## 13.2 Call Establishment and LCLS negotiation solutions
### 13.2.1 Basic call establishment and LCLS negotiation solutions
Figure 13.2.1.1 shows the network model for the basic call establishment for
\"intra-BSS\" call. The oMSC server seizes one context with two bearer
terminations in the oMGW. The bearer termination T1 is used for the bearer
towards the oBSS and the bearer termination T2 is used for the bearer towards
the tMSC selected tMGW. The tMSC server seizes one context with two bearer
terminations in the tMGW. The bearer termination T3 is used for the bearer
towards the oMSC selected oMGW and bearer termination T4 is used for the
bearer towards the tBSS.
Figure 13.2.1.1: Basic Call Establishment Connection Model for \"intra-BSS\"
Call
Figures 13.2.1.2 and 13.2.1.3 show the message sequence example for the basic
call establishment for GCR with encapsulated oBSS ID. In the example the oUE
and the tUE belong to the same BSS (marked as oBSS and tBSS) and the CN
permits LCLS.
Figure 13.2.1.2: Basic Call Establishment Flow when call is locally switched
1\. Service Request handling
2\. Originating Call SETUP
> 3\. If oMSC supports LCLS it retrieves oBSS ID and generates a Global Call
> Reference for the call.
>
> 4\. oMSC sends a BICC IAM (or SIP-I INVITE with encapsulated IAM) including
> supported codecs list, GCR with encapsulated oBSS ID, and configures the
> LCLS-Negotiation IE (depending on specific solution as described in clause
> 8) based on possible supplementary services or Lawful Interception (e.g. may
> indicate both-way LCLS connection or both-way LCLS connection plus bicasting
> is required or or LCLS not allowed).
>
> 5\. tMSC receives IAM containing LCLS-Negotiation and GCR with encapsulated
> oBSS ID.
NOTE: LCLS-Negotiation may involve several MSC-Servers and either the LCLS IEs
are discarded or LCLS-Negotiation IE changed in any MSC-Server due to
supplementary service requirements, Lawful Interception, CAMEL etc.
6\. tMSC performs call Setup.
7\. tUE responds.
> 8a. tMSC selects codec and if LCLS is supported and LCLS-Negotiation results
> in LCLS being permitted.
8b. tMSC requests the tMGW to prepare for the network side bearer
establishment.
> 9\. After tMGW has replied with the bearer address and the binding reference
> tMSC returns APM with selected codec plus LCLS-Negotiation IE.
10a. When bearer information is received the oMSC requests the seizure of the
network side bearer termination.
> 10b. After the network side bearer information is seized the oMSC requests
> the seizure of the access side bearer\ termination.\ During the seizure of
> the network side or the access side bearer termination the oMSC will also
> request the oMGW to through-connect the bearer terminations so that the
> bearer will be backward through-connected.
>
> 11\. oMSC determines whether LCLS is allowed in the core networkbased on
> returned LCLS-Negotiation IE (see clause 8) and if so includes LCLS-
> Configuration in ASSIGNMENT REQUEST message along with GCR and LCLS-
> Correlation-request indicating \"Correlate GCR\". The LCLS-Connection-
> Status-Control should not be included in the Assignment, but if present it
> should be set to the value \"do not connect\".
NOTE: In case of late access bearer assignment when MSC server request access
bearer assignment after answer indication or in case of Call Waiting
supplementary service the ASSIGNMENT REQUEST message is sent after Connect
message. For these cases the MSC server needs to indicate in the ASSIGNMENT
REQUEST message GCR, LCLS-Correlation-request and LCLS-Configuration IE\'s but
also that call can be locally switched i.e. LCLS-Connection-Status-Control.
When the ASSIGNMENT REQUEST message is sent before answer the LCLS-Connection-
Status-Control IE is not needed as the oMSC and tMSC still need to send
LCLS_CONNECT_CONTROL message to both, tBSS and oBSS, respectively to request
local switching of the call.
> 12\. oBSS returns the ASSIGNMENT COMPLETE message with LCLS-BSS-Status
> indicating \"call not possible to be locally switched\" and the LCLS-
> Correlation-result indicating \"LCLS Correlation not established\". In case
> oBSS did not support LCLS, LCLS-BSS-Status IE is not included in the
> Assignment Complete message.
13\. When the access assignment is completed the oMSC sends Continuity to
tMSC.
> 14\. The tMSC requests the seizure of the access side bearer termination. If
> not requested during the seizure of network side bearer termination (step
> 8b) the tMSC will request the tMGW to through-connect the bearer
> terminations so that the bearer will be backward through-connected.
>
> 15a. tMSC may use received GCR and may perform \"intra-Network call
> detection\" based on Network ID and/or may perform \"intra-BSS call
> detection\" based on BSS ID as described in subclause 9.2.2 (comparison of
> own value with the value of originating Network /BSS Node received within
> GCR).
>
> 15b. tMSC performs terminating side Assignment containing GCR, LCLS-
> Configuration and LCLS-Correlation request if LCLS is feasible in the core
> network. If the tMSC performed \"intra-BSS call detection\" and the oBSS ID
> does not equal to the tBSS ID then the tMSC shall indicate in the LCLS-
> Correlation-request \"Do not correlate GCR\". \". Otherwise it shall
> indicate \"Correlate GCR\". The LCLS-Connection-Status-Control should not be
> included in the Assignment, but if present it should be set to the value
> \"do not connect\".
>
> 16\. tBSS returns the ASSIGMENT COMPLETE message with LCLS-BSS-Status
> indicating \"Call not yet locally switched\". In case the tBSS did not
> support LCLS, LCLS-BSS-Status IE is not included in the ASSIGMENT COMPLETE
> message.
>
> 16a. oBSS signals LCLS_NOTIFICATION with LCLS-Status set to \"Call not yet
> locally switched\".
NOTE: In the sub-clause 14.5 of this TR it is stated the BSS will send
LCLS_NOTIFICATION message to the MSC server whenever the BSS detects that
LCLS-BSS-Status has changed. In this case from the originating call leg point
of view it has been changed (from \" call not possible to be locally
switched\" as stated in step 12).
Figure 13.2.1.3: Basic Call Establishment when call is locally switched
(continuation of figure 13.2.1.2)
17\. tUE reports alerting
> 18\. tMSC returns BICC ACM (or SIP-I 180 with encapsulated ACM) and requests
> the tMGW to provide a ring-back tone.
19\. oMSC reports alerting
20\. tUE answers the call
> 21\. Since tBSS reported in the ASSIGNMENT COMPLETE message LCLS is feasible
> (see step 16), tMSC requests tBSS to setup the Userplane from tUE to tBSS in
> the LCLS_CONNECT_CONTROL message (note the BSS cannot throughconnect LCLS
> until it receives the same command from oMSC).
>
> 21a. tBSS signals LCLS_CONNECT_CONTROL_ACK with LCLS-BSS-Status set to
> \"Call not yet locally switched\" since BSS has not received the same order
> from oMSC.
NOTE: In the sub-clause 14.6 of this TR it is stated both tMSC and oMSC send
the new message LCLS_CONNECT_CONTROL to both, tBSS and oBSS, respectively. If
both call legs receive an LCLS_CONNECT_CONTROL message and the contents of the
LCLS-Connection-Status-Control IEs allow LCLS, then BSS establishes LCLS.
> 22\. When the tMSC receives Connect message it requests the tMGW to stop
> providing ring-back tone to the calling party and does request to bothway
> through-connect the bearer.
23\. tMSC returns BICC ANM (or SIP-I 200 OK to initial INVITE with
encapsulated ANM) with LCLS-Status.
24\. oMSC reports Answer/Connect to oUE.
25\. oMSC request the MGW to bothway through-connect the bearer.
> 26\. oMSC requests oBSS to connect LCLS since the received ANM message
> indicated LCLS is feasible.
>
> 26a. oBSS signals LCLS_CONNECT_CONTROL_ACK with LCLS-BSS-Status set to \"the
> call is locally switched\".
>
> 27\. oMSC signals the LCLS status to the oMGW.
28\. oMSC signals the change of LCLS status through the Core Network.
29\. tMSC signals the LCLS status to the tMGW.
NOTE: LCLS Status signalled to MGW and corresponding actions (if required)
from MGW (steps 27 and 29)\ needs to be specified in the Clause 12, Solutions
for User Plane handling.
The following Figure 13.2.1.4 shows the message sequence example for the basic
call establishment when the call could not be locally switched.
Figure 13.2.1.4: Example LCLS Call Flow using GCR with encapsulated BSS ID
when call is not Intra-BSS
The following steps are different compared to the basic call sequence
presented in the figures 13.2.1.2 and 13.2.1.3:
> 1 -- 14. as for general basic call sequence in Figure 13.2.1.2.
>
> 15a. tMSC may perform \"intra-Network call detection\" based on Network ID
> and/or may perform \"intra-BSS call detection\" based on the BSS ID, as per
> described in subclause 9.2.2 (comparison of own value with the value of
> originating Network ID/BSS Node ID received within GCR). In this case, the
> result of the detection is that the call is not an intra-Network/intra-BSS
> call.
>
> 15b. tMSC performs terminating side Assignment containing GCR, LCLS-
> Configuration and LCLS-Correlation-request if LCLS is feasible in the core
> network. If tMSC performed \"intra-Network call detection\" in step 15a and
> the oNetwork ID does not equal to the tNetwork ID, or tMSC performed
> \"intra-BSS call detection\" in step 15a and the oBSS ID does not equal to
> the tBSS ID, then tMSC shall indicate the tBSC \"Do not correlate GCR\" in
> LCLS-Correlation-request.
>
> 16\. tBSS returns the ASSIGMENT COMPLETE message with LCLS-BSS-Status
> indicating \"Call Not Possible to be Locally Switched\". If the tMSC does
> not perform \"intra-BSS call detection\" in advance, the tBSC would try to
> make call correlation by GCR and find that the call is not an Intra-BSS
> call. In case tBSS did not support LCLS, LCLS-BSS-Status IE is not included
> in the ASSIGMENT COMPLETE message.
17 - 23. as for general basic call sequence without any specific LCLS
signalling occurs, the call is connected through the CN as for a normal, non-
LCLS call.
### 13.2.2 Specific scenarios and analysis of call establishment and LCLS
signalling for GCR plus mandatory support of BSS ID solution.
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.2.3 Specific scenarios and analysis of call establishment and LCLS
signalling for GCR plus optional support of BSS ID solution
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.2.4 Specific scenarios and analysis of call establishment and LCLS
signalling for GCR only solution
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.2.5 Call Flows During Call Establishment With Handover
#### 13.2.5.1 Handover at oMSC prior to Assignment
The following sequences show a call starting as not local but then the
originating side performs a handover to the local BSS of the terminating end.
##### 13.2.5.1.1 Example of Handover at oMSC prior to Assignment
Editor\'s Note: Connection model is not included, could be added at a later
date if required.
Figure 13.2.5.1.1.1: Example LCLS Call Flow with handover occurring at
originating MSC prior to Assignment
> 1 -- 9 (black) Normal call establishment -- NOTE the CM Service Request and
> MGW signalling are not included for brevity (see Figure 13.2.1.2 for the
> complete normal signalling sequence).
>
> 1 -- 8(red) Handover signalling sequence. Since theses are prior to
> Assignment they do not contain any LCLS information.
>
> 10(black) oMSC request LCLS correlation in the Assignment request.
11-17 (black) Remaining Call Establishment sequence
18-29 as per basic call flow in Figure 13.2.1.3
##### 13.2.5.1.2 Handover at oMSC prior to Assignment with GCR Only
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.2.5.1.3 Inter-BSS Handover at Originating MSC prior to Assignment
with BSS ID (alternative 2)
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.2.5.1.4 Differences between GCR Only and GCR plus BSS ID for handover
occurring at Originating MSC prior to Assignment.
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.2.5.2 Handover at tMSC prior to Assignment
The following sequences show a call starting as not local but then the
terminating side performs a handover to the local BSS of the originating end.
##### 13.2.5.2.1 Example of Handover at tMSC prior to Assignment
Editor\'s Note: Connection model is not included, could be added a later date
if required.
Figure 13.2.5.2.1.1: Example LCLS Call Flow with handover occurring at
terminating MSC prior to Assignment
> 1 -- 12 (black) Normal call establishment for call not local. oMSC performs
> Assignment and indicates \"no correlation\". NOTE the CM Service Request and
> MGW signalling are not included for brevity (see Figure 13.2.2.1.2 for the
> complete normal signalling sequence).
>
> 13 - 14 (black) Terminating side Assignment. Since handover occurred the
> tMSC explicitly request the tBSS to correlate GCR.
>
> 1 -- 8 (red) Handover signalling sequence. As this is prior to Assignment
> then no LCLS data is included in these messages.
>
> 15 -- 29 as per basic call flow in Figure 13.2.1.3.
NOTE: The flows assume early Assignment request from oMSC and Assignment in
tMSC is performed second due to indicating COT.
##### 13.2.5.2.2 Handover at tMSC prior to Assignment with GCR Only
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.2.5.2.3 Inter-BSS Handover at Terminating MSC prior to tAssignment
with BSS ID (alternative 2)
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.2.5.2.4 Differences between GCR Only and GCR plus BSS ID for handover
occurring at Terminating MSC prior to Assignment.
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.2.5.3 Handover at oMSC after Assignment (Call not local becomes Local)
The following sequences show a call starting as not local but then the
originating side performs a handover to the local BSS of the terminating end
after the originating assignment.
##### 13.2.5.3.1 Example of Handover at oMSC after Assignment (Call not local
becomes Local)
Editor\'s Note: Connection model is not included, could be added at a later
date if required.
Figure 13.2.5.3.1.1: Example LCLS Call Flow with handover occurring at
originating MSC after oAssignment
> 1 -- 17 (black) Normal call establishment -- NOTE the CM Service Request and
> MGW signalling are not included for brevity (see Figure 13.2.1.2 for the
> complete normal signalling sequence).
>
> 1 -- 12 (red) Handover signalling sequence. The oMSC must wait until the
> handover is completed before signalling Alerting (normal MSC behaviour for
> handover during establishment).
>
> 18 - 29 as per basic call flow in Figure 13.2.1.3.
NOTE: If the oMSC simply went ahead with the HO request and did not indicate
the LCLS Status Update to tMSC and the tAssignment occurs after the HO Request
is sent to Target BSS then LCLS would not be initiated during call
establishment. Then tMSC would need to perform a subsequent LCLS Request to
tBSS to correlate GCR and establish LCLS and then each MSC would receive a
later LCLS Notification and a subsequent LCLS Status Update to notify all
nodes in the call that LCLS is now active.
##### 13.2.5.3.2 Handover at oMSC after Assignment (Call not local becomes
Local) with GCR Only
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.2.5.3.3 Differences between GCR Only and GCR plus BSS ID for handover
occurring at oMSC after Terminating Assignment.
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.2.5.4 Inter-BSS Handover at Originating MSC after Assignment by
Originating MSC (but prior to tAssignment)
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.4.1 Connection Model
Editor\'s Note: connection model may be added later
##### 13.2.5.4.2 Technical description
Figure 13.2.5.4.2.1 illustrates a call flow for Inter-BSS Handover at MSC1
after Assignment by MSC1 that establishes Local Switching. New messages and
new elements are marked in red. Target BSS and BSS2 are the same physical
nodes.
Figure 13.2.5.4.2.1: Inter-BSS Handover during Call Establishment that
Establishes Local Switching
In this scenario it is assumed that the inter-BSS handover changes a not local
call into a local one during the call establishment. This scenario just
considers MS1 handover before Assignment by MSC2. If handover occurs after
Assignment by MSC2, the normal call flow can apply.
> 1 - 11. As for basic call flow in Figure 13.2.2.1.1.
>
> 12\. HO Required is received from BSS1 requesting an inter-BSS handover. The
> call is currently not served by the same BSS and call establishment has not
> completed.
>
> 14\. The MSC1 shall set the LCLS-Connection-Status-Control to \"do not
> connect\" and LCLS-Correlation-request = \"correlate GCR\", and sends HO
> request to target BSS with GCR and LCLS-Configuration.
>
> 15\. Target BSS performs call leg correlation with GCR to find if there has
> another active call leg using the same GCR. As this is the first assignment
> it does not find an correlation.
>
> 16\. HO Request Ack contains LCLS-BSS-Status indicating the call cannot be
> locally switched.
>
> Editor\'s Note: If the handover happens after the Assignment by MSC2, the
> target BSS can find another call leg in step 15, and will indicate the MSC1
> the call is local, but not yet locally switched in step 16.
>
> 17\. MSC1 signals HO Command.
>
> 18\. MS is detected at target BSS.
>
> 19\. HO Complete signalled from target BSS.
>
> 20\. The MSC1 release source resource.
>
> 21\. MSC1 sends Continuity to MSC2. If the handover is completed, the new
> LCLS-Status according to target BSS acknowledgment is also included in
> Continuity. Otherwise they will be included in another APM message as
> described on steps 24a.
>
> 22\. MSC1 sends Assignment to the terminating side BSS containing LCLS-
> Configuration, GCR and LCLS-Correlation-request. The LCLS-Correlation-
> request is set to \"correlate GCR \".
NOTE: In step 22-23, it is assumed that the Continuity message is sent after
handover complete. And in step24a-24c, it is assumed that the Continuity
message has been sent before handover complete.
> 23\. BSS2 returns the Assignment Complete with LCLS-BSS-Status indicating
> \"call not yet locally switched \".
>
> 24a. If the handover procedure is completed after oMSC sends Continuity
> message, the MSC1 shall signal the new LCLS-Status by APM message to tMSC.
>
> 24b. When receiving the updated LCLS-Status message, if the MSC2 has just
> sent Assignment to the BSS2 but the LCLS-Status indicates that call is not
> local call, then tMSC re-signals an Assignment Request message or another
> message to BSS2 aiming to modify present bearer with LCLS_Connection-Status-
> Control = \"do not connect\" and LCLS-Correlation-request = \"correlate
> GCR\".
>
> 24c. BSS2 returns the Assignment Complete or other corresponding message
> with latest LCLS-BSS-Status indicating \"call not yet locally switched\".
>
> 25\. MS2 reports alerting.
>
> 26\. MSC2 returns BICC ACM (or SIP-I 180 with encapsulated ACM).
>
> 27\. MSC1 reports alerting.
>
> 28\. MS2 answers the call.
>
> 29\. MSC2 returns BICC ANM (or SIP-I 200 OK to initial INVITE with
> encapsulated ANM).
>
> 30\. MSC1 reports Answer/Connect to oMS.
>
> 31a. MSC2 informs BSS2 to connect LCLS (note the BSS cannot through connect
> LCLS until receives same command from MSC1).
>
> Editor\'s Note: It is FFS if the 31a step is needed.
>
> 31b. MSC1 requests BSS1 to connect LCLS
>
> 32a-b. Target BSS/BSS2 signals LCLS_CONNECTION_CONTROL_ACK with LCLS-BSS-
> Status which is set to LCLS connected.
>
> 33\. MSC1 signals the change of LCLS status through the Core Network.
>
> 34a-b. Inform the MGW to update LCLS status. Notes: The MSC1 updates the
> remote end after handover complete, the Assignment by MSC2 occurs after the
> HO Request is sent to Target BSS then it requires subsequent LCLS Request to
> tBSS to correlate GCR and establish LCLS.
#### 13.2.5.5 Handover at oMSC after Assignment (Call which is Local becomes
not local)
FFS
#### 13.2.5.6 Inter-BSS Handover at Terminating MSC after Assignment by
Terminating MSC
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.6.1 Connection Model
Editor\'s Note: connection model may be added later
##### 13.2.5.6.2 Technical description
Figure 13.2.5.6.2.1 illustrates a call flow for Inter-BSS Handover at MSC2
after Assignment by MSC2 that establishes Local Switching. New messages and
new elements are marked in red. Target BSS and BSS1 are the same physical
nodes.
Figure 13.2.5.6.2.1: Inter-BSS Handover during Call Establishment that
Establishes Local Switching
In this scenario it is assumed that the inter-BSS handover change a not local
call into a local one during the call establishment.
> 1 - 14. As for basic call flow in Figure 13.2.2.1.2.
>
> 15 - 24. Normal handover procedure is applied here.
>
> 24a. After handover, the tMSC updates the information to remote end with new
> LCLS-Status.
>
> 25 - 34b. Normal call establishment is applied.
#### 13.2.5.7 Simultaneous Handover at tMSC and oMSC during call establishment
FFS
#### 13.2.5.8 Inter-BSS Handover during Call Establishment with optional BSS
ID
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.2.5.9 Inter-MSC Handover at Originating MSC prior to Assignment
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.9.1 Connection Model
Editor\'s Note: connection model may be added later.
##### 13.2.5.9.2 Technical description
Figure. 13.2.5.9.2.1 Inter-MSC Handover at Originating MSC prior to Assignment
Scenario
As shown in the Fig. 13.2.5.9.2.1, it is assumed that the MS1 performs
handover to the BSS2 prior to Assignment by MSC1. MSC1 is the Originating MSC
and MSC2 is the Terminating MSC.
Figure 13.2.5.9.2.2 illustrates a call flow for Inter-MSC Handover at
Originating MSC prior to Assignment that establishes Local Switching. New
messages and new elements are marked in red. Target BSS and BSS2 are the same
physical nodes.
Figure 13.2.5.9.2.2/1: Inter-MSC Handover at Originating MSC prior to
assignment that Establishes Local Switching
Figure 13.2.5.9.2.2/2: Inter-MSC Handover at Originating MSC prior to
assignment that Establishes Local Switching
> 1 - 11. As per the Normal call establishment.
>
> 1 -- 13 (handover procedure box). Normal Inter-MSC handover procedure.
>
> 12 - 21. Assignment procedure is done under control of MSC1. The MSC1 also
> includes LCLS Negotiation and GCR.
>
> Editor\'s Note: It need to be clarified the difference between step 12 in
> the box and out of box.
>
> 22\. MSC1 sends Continuity to MSC2 with new LCLS-Status.
>
> 23 - 37. As per basic call establishment flow.
Editor\'s Note: the above sequence needs to be checked.
#### 13.2.5.10 Inter-MSC Handover at Terminating MSC prior to Assignment
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.10.1 Connection Model
Editor\'s Note: connection model may be added later.
##### 13.2.5.10.2 Technical description
Fig. 13.2.5.10.2.1 Inter-MSC Handover at Terminating MSC prior to Assignment
Scenario
As shown in the Fig. 13.2.5.10.2.1, it is assumed that the MS2 performs
handover to the BSS1 prior to Assignment. The MSC1 is the Originating MSC and
MSC2 is the Terminating MSC.
Figure 13.2.5.10.2.2 illustrates a call flow for Inter-MSC Handover at
Terminating MSC prior to Assignment that establishes Local Switching. New
messages and new elements are marked in red. Target BSS and BSS1 are the same
physical nodes.
Figure 13.2.5.10.2.2/1: Inter-MSC Handover at Terminating MSC prior to
assignment that Establishes Local Switching
Figure 13.2.5.10.2.2/2: Inter-MSC Handover at Terminating MSC prior to
assignment that Establishes Local Switching
> 1 - 15. As per Normal call establishment.
>
> 16 - 27. Normal Inter-MSC handover procedure.
>
> 29\. tMSC updates the remote end with new LCLS-Status.
>
> 30 - 53. As per basic call establishment flow.
>
> Editor\'s Note: Why is there a MAP Prepare HO message here when the HO is
> already complete? This should be a MAP process Access Signalling message
> should it not? Also it should be stated that there is an additional Intra-
> BSS check at this point which is not normally applied during call
> establishment so not same as basic flow.
#### 13.2.5.11 Inter-MSC Handover at Originating MSC after Assignment
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.11.1 Connection Model
Editor\'s Note: connection model may be added later.
##### 13.2.5.11.2 Technical description
Figure 13.2.5.11.2.1 illustrates a call flow for Inter-MSC Handover at
Originating MSC after Assignment that establishes Local Switching. New
messages and new elements are marked in red. Target BSS and BSS2 are the same
physical nodes. The MSC1 is the Originating MSC and MSC2 is the Terminating
MSC.
Figure 13.2.5.11.2.1: Inter-MSC Handover at Originating MSC after assignment
that Establishes Local Switching
In this scenario it is assumed that the inter-MSC handover change a not local
call into a local one during the call establishment.
> 1 - 11. As for basic call flow in Figure 13.2.1.2.
>
> 12 - 25. Normal Inter-MSC for LCLS applies.
>
> Editor\'s Note: If the handover happens after the Terminating MSC performs
> Assignment, the target BSS can find another call leg in step 16, and will
> indicate the target MSC the call is local, but not yet locally switched in
> step 17
>
> 26\. MSC1 sends Continuity to MSC2. If the handover is completed, the new
> LCLS-Status according to target BSS acknowledgment is also included in
> Continuity. Otherwise it will be included in other APM message as described
> on steps 29a.
>
> 27\. MSC2 sends Assignment to the BSS2 containing LCLS Configuration, GCR
> and LCLS-Correlation-request. The LCLS-Correlation-request is set to
> \"correlate GCR\".
NOTE: In step 27-28, it is assumed that the Continuity message is sent after
handover complete. And in step 29a-29c, it is assumed that the Continuity
message has been sent before handover complete.
> 28\. BSS2 returns the Assignment Complete with LCLS-Correlation-result
> indicating \"LCLS correlation established\" and LCLS-BSS-Status indicating
> \"call not yet locally switched\".
>
> 29a. If the handover procedure is completed after oMSC sends Continuity
> message, the MSC1 shall signal the new LCLS-Status by APM message to MSC2.
>
> 30 - 43. The basic call flow applies.
#### 13.2.5.12 Inter-MSC Handover at Terminating MSC after Assignment
> Editor\'s Note: The call flow in this section need to be aligned with Inter-
> BSS handover during call establishment sequences.
##### 13.2.5.12.1 Connection Model
Editor\'s Note: connection model may be added later.
##### 13.2.5.12.2 Technical description
Figure 13.2.5.12.2.1 illustrates a call flow for Inter-MSC Handover at
Terminating MSC after Assignment that establishes Local Switching. New
messages and new elements are marked in red. Target BSS and BSS1 are the same
physical nodes. The MSC1 is the Originating MSC and MSC2 is the Terminating
MSC.
Figure 13.2.5.12.2.1: Inter-MSC Handover at Terminating MSC after Assignment
Scenario
In this scenario it is assumed that the inter-BSS handover change a not local
call into a local one during the call establishment.
> 1 - 14. As per basic call flow in Figure 13.2.1.2.
>
> 15a - 27. Normal Inter-MSC handover procedure for LCLS applies.
NOTE: the above flow is not realistic since it assumes the handover occurs at
the point in time where the Assignment is complete but no alerting or answer
has been received. Since the Assignment triggers alerting then at any time
during the handover preparation the answer message can be received. This is
assumed not to occur in the above flow and therefore the alerting does not
occur until after the handover, this is however unlikely and potentially the
call will be alerted and answered during the handover which will result in the
call being established as Non-LCLS and the handover triggering a subsequent
change to LCLS.
> 28\. After handover, the MSC2 update the remote end with new LCLS-Status.
>
> 29 - 42. Normal call establishment for LCLS applies.
## 13.3 Handover Scenarios
### 13.3.1 Basic handover solutions
The following sequences describe handover scenarios using the selected method
for call leg correlation where the originating BSS ID is encapsulated within
GCR. General requirements and principles from clause 7 shall be followed.
#### 13.3.1.1 Inter-BSS Handover when LCLS is broken
##### 13.3.1.1.1 Inter-BSS Handover when LCLS is broken and CN User Plane is
de-activated During LCLS
###### 13.3.1.1.1.1 Connection Model
Figure 13.3.1.1.1.1.1 shows the network model for the Intra-MSC Inter-BSS GSM
to GSM Handover, where call leg MS-1 is handed over from BSS-1 to the Target
BSS. BSS-1 is the same as BSS-2 when LCLS is established for the call. The
bearer termination T2 is used for the bearer towards BSS-2, which is not
affected by this handover. Bearer termination T~S~ is used for the bearer
towards BSS-1 and the bearer terminations T1 and T~A~ are used for the bearer
towards the succeeding/preceding MGW. Bearer termination T~T~ is for the
bearer termination towards the Target BSS. The colours and line types used in
the figure are defined differently from 3GPP TS 23.205 [8] to indicate LCLS
specific issues.
Connection Model 1: The call is locally switched and the CN MGWs are set to
\"inactive\"
Connection Model 2: MGW-1 is set to active and both-way connected between Ta
and Tt, Ts is isolated. BSS-2 starts to bicast data UL.
Connection Model 3: MS has moved to Target BSS but HO Detect has not yet been
received by MSC-1
Connection Model 4: LCLS is released in BSS-2, old serving Termination Ts is
removed.
Figure 13.3.1.1.1.1.1: Inter-BSS Handover Connection Model when LCLS is broken
and CN User Plane is de-activated during LCLS
###### 13.3.1.1.1.2 Basic Sequence for inter-BSS Handover that breaks LCLS and
CN User Plane is de-activated during LCLS
Figure 13.3.1.1.2.1: Inter-BSS Handover that terminates Local Switching (local
switching break indicated by BSS)
1\. HO Required is received from BSS-1 requesting an inter-BSS handover. The
call is currently locally switched so the MSC can know that an inter-BSS
handover at one end will break local switch but in this sequence the local
switch is not broken in serving BSS until MS-1 has moved out of the BSS and
MSC-1 sends clear command.
2\. Anchor MSC-1 re-activates the User Plane at its MGW-1 towards the next CN
MGW and connects a new leg to the Target BSS and through-connects it bothway
to Ta. Additionally it isolates the old serving Termination Ts. This makes the
handover much more efficient than even current non-LCLS handover as
immediately the MS-1 moves into the new BSS it will be able to send UL user
data to MS-2.
3\. Anchor MSC sends HO Request to Target BSS with GCR and LCLS-Connection-
Status-Control indicating \"connect\" to through-connect the local call and
LCLS-Configuration indicating what was previously negotiated (e.g. LCLS both-
way permitted) and within LCLS-Correlation-request \"correlate GCR\" for
handover messages.
4\. Target BSS returns acknowledgment and also indicates that call is not
local, LCLS not feasible.
5\. Anchor MSC signals break in LCLS to far end, also alerting any nodes in
the path that they must re-activate their User Plane.
5a. Far end MSC re-configures its MGW connections to be active.
5b. Far end MSC requests BSS-2 to start sending data UL with
LCLS_CONNECT_CONTROL message and LCLS-Connection-Status-Control indicating
\"BicastatHandover\", see Figure 13.3.1.1.1.1.1 Connection Model 2. This
triggers the BSS to bicast user plane data in the same way as the Access MGW
would be doing in a non-LCLS inter-BSS handover. At this point the BSS shall
send any DL data it receives directly to the served MS. Since the BSS cannot
receive DL data at the same time as it receives local data (Ts is isolated)
this will minimise the break in user plane data even more than for existing
non-LCLS handover.
NOTE1: It is also possible that the bicasting is initiated autonomously by the
serving BSS when it receives HO Command but this is potentially later than
step 5b and thus could increase the break of user data after the MS-1 moves.
It could be optional to perform step 5b and so the BSS performs bicasting when
it receives HO Command unless it receives an explicit request to bicast early
to minimise breaks in speech. The Serving BSS shall forward user plane data
from MS1 to MS2 while MS1 is served by the BSS. The UL user plane data are bi-
cast to both MGW2 and local path by the BSS-2, as described in subclause 12.4.
The MGW-2 transmits the user plane data to the MGW-1, and the MGW-1 will
transmit the user plane data to the target BSS. When the MS1 leaves the
serving BSS and begins sending UL data from the Target BSS, that data will
then be received via the A-interface leg at the serving BSS-2.
NOTE2: Possible bicasting for lawful interception may have been activated
earlier when LCLS was established in BSS-1 /BSS-2 (not shown here) and was
indicated with LCLS-Configuration IE in step 3 and applies to both call legs.
If LCLS bicasting was not activated the LCLS-Configuration value is
\"Connect\" (i.e. no bicasting) in step 3, but the value of LCLS-Connection-
Status-Control in step 5 is \"BicastatHandover\", which applies only for this
call leg.
6\. Anchor MSC triggers HO command. If the BSS is not explicitly requested to
start UL bicasting this shall occur at this point (from the call leg that does
not perform the handover). When MS-1 moves to Target BSS it can immediately
send UL data through the CN to MS-2 and also receive DL data from MS-2 via the
CN since the MGW-1 topology for Ta, Tt is already bothway connected. This is a
change from the current non-LCLS solution but is more efficient since the non-
LCLS solution needs to set this to one-way DL only until it receives HO
Detect..
7\. MS is detected at target BSS-1\'. BSS1/BSS2 may continue to signal user
plane data locally until Clear Command is received.
NOTE3: this flow shows the Termination to the Target BSS as always connected
bothway. This is a change to the existing call handling which would normally
connect the termination as one-way and then change to bothway after receiving
HO Detect. It is FFS whether this procedure should be adopted or the existing
procedure used, however the termination does not need to be connected one-way
and will in fact make the break in speech worse since UL data cannot be sent
from MS-1 until the MGW topology is modified, also it saves the additional
intermediate H.248 modification step.
8\. In the Handover Complete the Target-BSS indicates to MSC-1 in LCLS-BSS-
Status that the call cannot be locally switched.
9\. MSC-1 requests old serving BSS-1 to clear old call leg. BSS-1 now stops
sending local user data from MS-1, LCLS is finally broken.
10\. Serving BSS informs MSC Servers that LCLS is broken via LCLS-
Notification.
NOTE4: There is no need to send LCLS-Notification from BSS-1 after receiving
the Clear command since Clear Complete indicates that LCLS was disconnected.
11\. Clearing of old call leg to Serving BSS.
12\. MGW Termination to old serving BSS-1 removed from Access MGW.
13\. Anchor MSC informs succeeding CN nodes that LCLS is finally disconnected.
LCLS is impossible after an Inter-BSS handover which makes the call not local
(as described above). While a handover is being performed for one call leg, it
is possible that a handover also is started for the other call leg, possibly
moving both call legs to the same BSS, thereby creating a local call. The
target BSS shall only establish LCLS for a local call when both call legs are
connected and e.g. any handover process has been successfully completed on
both call legs.
###### 13.3.1.1.1.3 Pros and Cons of Intra-BSS Handover with BSS informing CN
when LCLS is broken
Pros:
\- LCLS is not broken if inter-BSS handover fails, BSS controls when LCLS
needs to be re-established in CN.
Cons:
\- No user plane connection established/activated in CN at time when serving
BSS indicates LCLS broken resulting in potential worsening of break in speech.
> Editor\'s Note: the above pros and cons are not related to the latest above
> description of the solution and need to be updated.
#### 13.3.1.1.2 Inter-BSS Handover with CN determining when LCLS is broken
###### 13.3.1.1.2.1 Connection Model
Editor\'s Note: connection model needs to be added in future contribution
###### 13.3.1.1.2.2 Basic Sequence
Figure 13.3.1.1.2.1.1: Inter-BSS Handover that terminates Local Switching
(local switching break indicated by BSS)
1\. HO Required is received from BSS-1 requesting an inter-BSS handover. The
call is currently locally switched so the MSC knows that an inter-BSS handover
at one end will break local switch.
2\. Anchor MSC signals break in LCLS to far end, also alerting any nodes in
the path that they must re-active their User Plane. 3a. Anchor MSC re-
activates the User Plane at its Anchor MGW and configures the MGW as for
normal inter-BSS handover, e.g. connects a new leg to the Target BSS and
activates the user plane to both serving and target BSS.
3b. Far end nodes activate user plane connections, user plane is re-
established from serving BSS to far end. Note, it is still possible for the
serving BSS to remain in LCLS and bicast user-plane data up until the point
where the MS is detected in the target BSS.
4\. Anchor MSC sends HO Request to Target BSS with GCR, LCLS-Configuration and
LCLS-Connection-Status-Control indicating \"connect\" and LCLS-Correlation
request indicating \"correlate GCR\". Note that for GCR with encapsulated oBSS
ID solution the LCLS-Correlation-request shall always be \"correlate GCR\" for
handover messages..
5\. Target BSS returns acknowledgment and also indicates that call is not
local, LCLS not feasible.
6\. Anchor MSC triggers HO command.
7\. MS is detected at target BSS.
8\. Handover Complete (MSC shall also release MGW connections to old serving
BSS).
###### 13.3.1.1.2.3 Pros and Cons of Intra-BSS Handover with BSS informing CN
when LCLS is broken
Pros:
\- LCLS is broken immediately Serving MSC knows that call is no longer intra-
BSS.
\- CN user plane is re-established prior to handover being executed so normal
signalling sequences including MGW control procedures are followed.
Cons:
\- If inter-BSS handover is not successful and MS reverts back to serving BSS
then LCLS may need to be re-established.
##### 13.3.1.1.3 Inter-BSS Handover when LCLS is broken if user plane active
###### 13.3.1.1.3.1 Connection model
This solution is based on all user plane links are kept and the BSS may sends
SID frames or nothing to CN when LCLS is established.
Connection Model 1 Before triggering handover
Connection Model 2 applies from step2 to step5 in Figure 13.3.1.1.3.2.1
Connection Model 3 applies from step6 in Figure 13.3.1.1.3.2.1
Connection Model 4 applies from step7 to step8 in Figure 13.3.1.1.3.2.1
Connection Model 5 apply from step9 to 14 in Figure 13.3.1.1.3.2.1
Connection Model 6 handover completed
Figure 13.3.1.1.3.1.1: Inter-BSS Handover when LCLS is broken if user plane
active
###### 13.3.1.1.3.2 Basic Sequence
Figure 13.3.1.1.3.2.1: Inter-BSS Handover when LCLS is broken if user plane
active
> 1\. HO Required is received from BSS-1 requesting an inter-BSS handover. The
> call is currently locally switched so the MSC can know that an inter-BSS
> handover at one end will break local switch.
>
> 2\. The MSC-1 uses the Change Flow Direction procedure to request the MGW-1
> to set the Handover Device to initial state. And then Ta to Tt is Oneway,
> and Ta,Ts is still both-way.
>
> 3\. MSC-1 sends HO Request to Target BSS with GCR, LCLS-Configuration and
> LCLS-Connection-Status-Control = connect. The LCLS-Correlation-request shall
> always be set to \"correlate GCR\" for handover messages.
>
> 4\. Target BSS returns acknowledgment and also indicates that call is not
> local, LCLS not feasible.
>
> 5\. If the assigned GSM Channel coding properties differ from the previously
> provided ones the MSC-1 provides the MGW-1 with the assigned GSM Channel
> coding properties using the Modify Bearer Characteristics procedure
>
> 6\. MSC-1 triggers HO command to BSS-1.
>
> 7\. BSS-1 sends handover command to MS-1. BSS-1 will discard incoming user
> plane data sent to MS-1 received from CN. BSS-2 starts bi-casting UP user
> plane data generated by MS-2 to local path and A-interface, meanwhile,
> starts to check whether incoming data received from CN is SID frames or
> not/whether there has DL user plane data.
NOTE: there is no situation where BSS-2 will receive real DL user plane data
from the CN at the same time as it receives local data from MS-1 as part of
the handover.
> 8\. MS-1 is detected at target BSS. But still no UL data can be sent from
> target BSS to MGW-1 because Ta-Tt is one-way DL only. MGW-1 will continue to
> transmit DL user plane data to the target BSS. BSS-1 continues to send UL
> SID frames/nothing to the MGW. BSS2 continues to bi-cast UP user plane data
> to both local path and A interface.
>
> 9\. The MSC-1 uses the Change Flow Direction procedure to requests the MGW-1
> to set the Handover Device to intermediate state: Tt-Ta is set to bothway
> and Ta. Then BSS-2 finds incoming DL user plane data received from CN is not
> SID frames/BSS-2 finds there has DL user plane data, then the BSS-2 will
> transmit DL user plane data received from CN to the MS-2.
>
> 10\. Handover Complete is received from target BSS with LCLS-BSS-status.
>
> 11\. LCLS Status Update with LCLS status is sent from MSC-1 to MSC-2.
>
> 12\. MSC-1 requests BSS-1 to clear old call leg.
>
> 13\. Serving BSS informs MSC Servers that LCLS is broken via LCLS-
> Notification.
NOTE: There is no need to send LCLS-Notification from BSS-1 after receiving
the Clear command since Clear Complete indicates that LCLS was disconnected.
> 14\. BSS-1 informs MSC-1 the resource for the MS-1 has been released and
> also BSS-2 stops bi-casting.
>
> 15\. The MSC-1 requests the MGW-1 to set the Handover Device to its final
> state by removing the bearer termination towards the BSC-1, using the
> Release Termination procedure.
##### 13.3.1.1.4 Conclusions on Inter-BSS Handover that breaks Local Switching
#### 13.3.1.2 Inter-BSS Handover that establishes Local Switching
##### 13.3.1.2.1 Connection Model
Connection Model 1: User plane connected and active through the CN.
Connection Model 2: Anchor MGW is bicasting, MS-1 has not yet been detected by
Target BSS
Connection Model 3: Handover is complete and local call established and
through-connected.
Figure 13.3.1.2.1.1: Inter-BSS Handover Connection Model when LCLS is
established
##### 13.3.1.2.2 Basic Sequence
Figure 13.3.1.2.2.1: Inter-BSS Handover establishes Local Switching
> 1\. HO Required is received from BSS-1 requesting an inter-BSS handover. The
> call is currently not locally switched.
>
> 2\. Anchor MSC checks that LCLS negotiation permitted LCLS in CN.
>
> 3\. Anchor MSC reserves new Termination for Target BSS and configures this
> as a one-way connected to Anchor Termination (as per existing handover
> procedures).
>
> 4\. Anchor MSC performs HO request to target BSS with GCR and LCLS-
> Connection-Status-Control set to \"BicastatHandover\" and LCLS-Correlation-
> request set to \"correlate GCR\" and LCLS-Configuration set to what was
> previously negotiated (e.g. LCLS both-way connect).
NOTE: Possible bicasting for lawful interception that may have been
negotiated, indicated with the value \"Connect bothway plus bicast\" of LCLS-
Configuration IE, applies to both call legs. If LCLS bicasting was not
requested the LCLS-Configuration value is \"Connect\" (i.e. no bicasting), but
the value of LCLS-Connection-Status-Control IE is \"BicastatHandover\", which
applies only for this call leg.
> 5\. The target BSS performs call leg correlation with GCR to find if another
> call leg is active with same GCR. If found reports in HO Request
> Acknowledge. The target BSS may bicast the user plane in preparation for
> receiving the new MS.
>
> 6\. HO Request Ack contains LCLS-BSS-Status indicating whether local call
> has been found (Call not yet locally switched).
>
> 7\. Anchor signals HO Command.
>
> 8\. MS is detected at target BSS. Target BSS may be bicasting the user plane
> at this point to enhance the handover connection since the Target
> Termination is configured as DL only to the CN but if user plane data is
> passed locally it can be received by MS-1 earlier. BSS-2 continues to pass
> data UL to CN/receive data DL from CN until HO Complete is received.
>
> 9\. HO Complete signalled from target BSS including LCLS-BSS-Status
> indicating call is locally switched.
>
> 10\. Anchor MSC signals to old serving BSS to clear the old call leg.
>
> 11\. Old serving BSS confirms clearing of old call leg.
>
> 12\. Anchor MSC signals LCLS connection in LCLS-Status-Update message to far
> end, also alerting any nodes in the path that they must de-activate their
> User Plane.
>
> 12a. It is possible that an LCLS-NOTIFICATION can be sent from the target
> BSS-1\' to the far end MSC Server to indicate that LCLS connection has been
> made however the far end MSC Server still needs to receive the LCLS-Status-
> Update from the other end (Anchor MSC).
>
> 13\. Anchor MSC deletes Access MGW termination to old BSS.
>
> 14\. Anchor MSC de-activates the User Plane at its Anchor MGW.
>
> 14a. Far end nodes de-activate user plane connections.
#### 13.3.1.3 Inter-BSS Handover that leaves a not Locally Switched Call
unchanged
##### 13.3.1.3.1 Basic Sequence
In this scenario it is assumed that LCLS was not established before the Inter-
BSS handover. When one call leg is handed over to another BSS, the call may
still remain not local and LCLS can not be established for the call. The LCLS
status of the call is not changed in this case.
The procedure follows Figure 13.3.1.2.2.1 steps 1. to 5. at which point the
BSS indicates that no LCLS found, then the MSC shall not normally signal LCLS
Status Update and therefore CN shall not release/deactivate any user plane
resources.
Figure 13.3.1.3.1.1: Inter-BSS Handover which leaves a not Locally Switched
Call unchanged
1\. HO Required is received from BSS-1 requesting an inter-BSS handover. The
call is currently not locally switched.
2\. Anchor MSC checks that LCLS negotiation permitted LCLS in CN.
3\. Anchor MSC performs HO request to target BSS with GCR, LCLS-Connection-
Status-Control = \"connect\" and LCLS-Configuration and LCLS-Correlation-
request. If MSC supports check of intra BSS calls and this results in the
calls being found to be not local then LCLS-Correlation-request = \"do not
correlate GCR\" is signalled to the BSS. LCLS-Correlation-request is always
set to \"Correlate GCR\" for handover messages.
4\. If target BSS is informed \"call correlation needed\", it performs call
leg correlation with GCR and in this case does not find the call can be
locally switched.
5\. HO Request Ack contains LCLS-BSS-Status indicating call not possible to be
locally switched.
6\. Anchor signals HO Command.
7\. MS is detected at target BSS.
8\. HO Complete signalled from target BSS including LCLS-BSS-Status indicating
call is not possible to be locally switched.
#### 13.3.1.4 Inter-MSC Handover that establishes Local Switching
##### 13.3.1.4.1 Connection Model
Figure 13.3.1.4.1.1 shows the network model for the Basic Inter-MSC GSM to GSM
handover when LCLS is established as a result of the handover. The dashed line
in green represents call control signalling and the dashed line in blue
represents SID frames /silence codewords sent via the core network, or the
dashed blue line can also represent the non-connected user plane, which is
prepared to be connected in the MGWs if the established LCLS needs to be
broken. The non-dotted lines represent the bearer carrying real user plane
data. In MGW1 the bearer termination **T~S~** is used for the bearer towards
BSS1, bearer termination **T~1~** is used for the bearer towards MGW2 and the
bearer termination **T~2~** is used for the bearer towards the
succeeding/preceding MGW. In MGW2 the bearer termination **T~4~** is used for
the bearer towards BSS2 and bearer termination **T~3~** is used for the bearer
towards MGW1. In Target-MGW the bearer termination **T~T~** is used towards
the Target-BSS and bearer termination **T~5~** is used towards MGW1.
In this example scenario the Handover Device is located in the MGW1 selected
for the call establishment by the MSC1 server, which controls the call and the
mobility management.
Before Handover
During Handover
After Handover, LCLS is established
Figure 13.3.1.4.1.1: Basic Inter-MSC GSM to GSM Handover (network model)
##### 13.3.1.4.2 Basic Sequence
Figures 13.3.1.4.2.1 and 13.3.1.4.2.2 show the message sequence example for
the Basic Inter-MSC GSM to GSM Handover shown in the corresponding network
model Figure 13.3.1.4.1.1. The Handover Device is located in the MGW1 selected
for the call establishment by the MSC1 server, which controls the call and the
mobility management. The description is based on 3GPP TS 23.009 [9] and 3GPP
TS 23.205 [8].
Figure 13.3.1.4.2.1: First part of Inter-MSC Handover establishing Local
Switching
> 1\. HO Required is received from BSS1 requesting an inter-MSC handover. The
> call is currently not locally switched.
>
> 2\. MSC1 finds that inter-MSC handover is required, it sends MAP-Pre-
> Handover Req to target MSC which includes LCLS Negotiation and GCR.
>
> 3\. Target MSC checks that LCLS negotiation permitted LCLS in CN.
>
> 4a and 4b. Target-MSC reserves circuit or Connection Point towards the
> Target-BSS
>
> 5\. Target MSC sends HO request to target BSS with GCR and instructs the BSS
> to prepare to connect LCLS and to correlate the call leg. The request can
> include an instruction for BSS to bi-cast user plane data, if applicable.
>
> 6\. Target BSS performs call leg correlation with GCR to find if another
> call leg is active with same GCR. The BSS reports in HO Request Acknowledge
> that the local call was found but LCLS is not yet established. The target
> BSS may start bicasting the user plane in preparation for receiving the new
> MS, but the user plane is only through-connected in the core network after
> step 10c.
>
> 7a and 7b. (These signalling steps are only applicable to AoIP.) When the
> Target-MSC server receives the BSSMAP Handover Request-Ack message, it sends
> the BSC-B IP address and UDP Port number to the MGW-B using the Configure
> RTP Connection Point procedure.
>
> 8\. The Target MSC-Server sends prepare handover response to MSC1.
>
> 9a and 9b. The handling of the bearer establishment between MGW1 and Target
> MGW is as for a Basic Mobile Terminating Call, using either forward or
> backward bearer establishment.
>
> Steps 10a, 11 and 12 are similar to the corresponding steps in LCLS call
> establishment described in subclause 13.2.1.
>
> 10a. MSC1 sends IAM (Initial Address Message) to Target MSC including GCR
> and configures the LCLS-Negotiation IE.\ The LCLS-Negotiation IE in step 10a
> can be different from LCLS Negotiation IE in step 2, because step 10a is
> BICC and the IE value can be changed by intermediate MSCs
>
> 10b and 10c. Target-MSC reserves bearer connection T~5~ towards MGW1
>
> 11\. After Target MGW has replied with the bearer address and the binding
> reference (Step 10c), Target MSC returns APM with selected codec plus LCLS-
> Negotiation IE.
>
> 12\. Target MSC sends ACM (Address Complete Message). Target MSC awaits the
> capturing of the MS on the radio path when the ACM is sent and MSC1
> initiates the handover execution when receiving ACM.
The remaining signalling steps for the Inter-MSC handover establishing LCLS
are shown in Figure 13.3.1.4.2.2.
Figure 13.3.1.4.2.2: Second part of Inter-MSC Handover establishing Local
Switching
> 13 - 18. When the local switching has been established during the handover
> procedure, the target BSS shall inform the target MSC that the call has been
> locally switched in HANDOVER COMPLETE, and the target BSS shall also send a
> new message LCLS-Notification with LCLS-BSS-Status IE to inform the MSC2
> Server that the local switching has been established. In steps 16a and 16b
> the MSC1 Servers configures the MGW1 for the completion of the handover.
>
> 19\. A-HO-DETECT/COMPLETE when received is included in the MAP-Send-End-
> Signal request and send back to the MSC1.
>
> 20\. Target MSC sends ANSWER when A-HO-DETECT/COMPLETE is received.
>
> 21\. and 22. MSC1 clears the call in BSS1 and releases the corresponding
> bearer termination.
>
> 23a/b, 25a/b and 27a/b. The MSC servers inform their corresponding MGWs that
> LCLS has been established for the call.
>
> NOTE: The MSC2 Server can inform MGW2 that LCLS has been established for the
> call directly after getting the LCLS Notification from BSS2 or after
> receiving the LCLS Status = Connected from MSC1 Server.
>
> 24\. Target MSC informs the MSC1 about the LCLS Status.
>
> 26\. MSC1 Server (Anchor MSC) sends LCLS-Status-Update message to the far
> end MSC2 Server.
>
> 28\. Local switching is established in the BSS.
The handling of the User Plane when LCLS was established or released is
described in Clause 12.
#### 13.3.1.5 Inter-MSC Handover that terminates Local Switching
###### 13.3.1.5.1.1 Connection Model
Figure 13.3.1.5.1.1.1 shows the network model for the Inter-MSC GSM to GSM
Handover, where call leg MS-1 is handed over from BSS-1 to the Target BSS.
BSS-1 is the same as BSS-2 when LCLS is established for the call. The BSS-1 is
served by the MSC-1, the target BSS is served by the target MSC, and MSC-1 is
not the same as Target MSC.
Connection Model 1 Before triggering handover
Connection Model 2 applies from step2 to step12 in Figure 13.3.1.5.1.2.1
Connection Model 3 applies for step13 in Figure 13.3.1.5.1.2.1
Connection Model 4 applies for step13 in Figure 13.3.1.5.1.2.1
Connection Model 5 apply from step14 to 19 in Figure 13.3.1.5.1.2.1
Connection Model 6 handover completed
Figure 13.3.1.5.1.1.1: Inter-BSS Handover Connection Model when user plane
active
###### 13.3.1.5.1.2 Basic Sequence
Figure 13.3.1.5.1.2.1: Inter-MSC Handover that break LCLS when user plane
active
> 1\. HO Required is received from BSS1 requesting an inter-MSC handover. The
> call is currently locally switched.
>
> 2\. MSC1 finds that inter-MSC handover is required, it sends MAP-Pre-
> Handover Req to target MSC which includes LCLS Negotiation and GCR.
>
> 3a and 3b. Target-MSC reserves circuit or Connection Point towards the
> Target BSS
>
> 4\. Target MSC sends HO request to target BSS with GCR and instructs the BSS
> don't need to prepare to connect LCLS.
>
> 5\. Target BSS reports in HO Request Acknowledge that call is not locally
> switched.
>
> 6a and 7b. (These signalling steps are only applicable to AoIP) When the
> Target-MSC server receives the BSSMAP Handover Request-Ack message, it sends
> the target BSC IP address and UDP Port number to the target MGW using the
> Configure RTP Connection Point procedure.
>
> 7\. The Target MSC sends prepare handover response to MSC-1.
>
> 8a and 8b. The handling of the bearer establishment between MGW-1 and Target
> MGW is as for a Basic Mobile Terminating Call, using either forward or
> backward bearer establishment.
>
> 9a. MSC1 sends IAM (Initial Address Message) to Target MSC including GCR and
> configures the LCLS-Negotiation IE.
>
> 9b and 9c. Target-MSC reserves bearer connection T~5~ towards MGW-1
>
> 10\. After Target MGW has replied with the bearer address and the binding
> reference, Target MSC returns APM with selected codec plus LCLS-Negotiation
> IE.
>
> 11\. Target MSC sends ACM (Address Complete Message). Target MSC awaits the
> capturing of the MS on the radio path when the ACM is sent and MSC1
> initiates the handover execution when receiving ACM.
>
> 12\. MSC-1 triggers HO command to BSS-1.
>
> 13\. BSS-1 sends handover command to MS-1. BSS-1 will discard incoming user
> plane data send to MS-1 received from CN. BSS-2 starts bi-casting UP user
> plane data generated by MS-2 to local path and A interface, meanwhile,
> starts to check whether incoming data received from CN is SID frames or
> not/whether there has DL user plane data.
>
> NOTE: there is no situation where BSS-2 will receive real DL user plane data
> from the CN at the same time as it receives local data from MS-1 as part of
> the handover.
>
> 14\. MS-1 is detected at target BSS. But still no UL data can be sent from
> target BSS to MGW-1 because Ta-Tt is one-way DL only. MGW-1 will continue to
> transmit DL user plane data to the target BSS-1. BSS-1 continues to send UL
> SID frames/nothing to the MGW. BSS-2 continues to bi-cast UP user plane data
> to both local path and A interface.
>
> 15\. Target MSC sends MAP-Process-Access-Signal request to the MSC-1.
>
> 16a - 16b. The MSC-1 uses the Change Flow Direction procedure to requests
> the MGW-1 to set the Handover Device to intermediate state: Tt-Ta is set to
> bothway and Ta. Then BSS-2 finds incoming DL user plane data received from
> CN is not SID frames/BSS-2 finds there has DL user plane data, then the
> BSS-2 will transmit DL user plane data received from CN to the MS-2.
>
> 17\. Handover Complete is received from target BSS with LCLS-BSS-status.
>
> 18\. A-HO-DETECT/COMPLETE when received is included in the MAP-Send-End-
> Signal request and send back to the MSC1.
>
> 19\. Target MSC sends ANSWER when A-HO-DETECT/COMPLETE is received.
>
> 20\. MSC1 informs BSS1 to clear old call leg.
>
> 21\. LCLS Status Update message with LCLS status is sent from MSC-1 to
> MSC-2.
>
> 22\. Serving BSS informs MSC Server that LCLS is broken via LCLS-
> Notification.
NOTE: There is no need to send LCLS-Notification from BSS-1 after receiving
the Clear command since Clear Complete indicates that LCLS was disconnected.
> 23\. BSS-1 informs MSC-1 the resource for the MS-1 has been released and
> also BSS-2 stops bi-casting.
>
> 24a and 24b. The MSC-1 requests the MGW-1 to set the Handover Device to its
> final state by removing the bearer termination towards the BSC-1, using the
> Release Termination procedure.
##### 13.3.1.5.2 Inter-MSC Handover that terminates Local Switching when user
plane deactivated
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.1.6 Inter-MSC Handover that leaves a not Locally Switched Call
unchanged
In this scenario it is assumed that LCLS was not established before the Inter-
MSC handover. When one call leg is handed over to another MSC, the call may
still remain not local and LCLS can not be established for the call. The LCLS
status of the call is not changed in this case.
The procedure in this case is similar to the one described in subclause
13.3.1.3. The difference is that when the source MSC receives the HO required,
it informs the target MSC about the GCR. The behaviour of target MSC is
similar to MSC-1 in subclause 13.3.1.3. The source MSC forwards LCLS
information to remote end MSC in a LCLS-Status-Update message. Note, for GCR
with encapsulated oBSS ID solution signalling of the LCLS-Status-Update
message is not required since no change of LCLS-Status has occurred and no BSS
ID needs to be conveyed.
> Editor\'s Note: A detailed message sequence figure and corresponding
> descriptions should be added to describe this case.
#### 13.3.1.7 Failed handover with the GCR with encapsulated oBSS ID based
solution
When a handover was successful, the Target BSC only sends the HO Complete
message to MSC after the MS has been successfully handed over, see subclauses
13.3.1.1 and 13.3.1.5 for the detailed descriptions of the successful handover
procedures when GCR is used.
3GPP TS 23.009 [9] specifies a number of actions to be taken if an Inter-BSS
handover fails and the action to be taken depends on the instance the failure
occurred. In all failure cases the existing connection to the MS shall not be
cleared except in the case of expiry of the timer for receipt of A-HANDOVER-
COMPLETE.
#### 13.3.1.8 Failing handover that would have broken a LCLS call
When an Inter-BSS handover that was about to break LCLS has failed, the impact
on the LCLS procedure differs depending on the type of failure.
\- If the failure occurred before the HANDOVER COMMAND was sent, the oMSC
sends A-HANDOVER-REQUIRED-REJECT to oBSS. oBSS shall keep LCLS established, if
possible.
\- If the Target BSS could not establish any connection with the oMS (eg
R1-HO-Access was not received from oMS), the Target BSS can not send HO
Detect. The oBSS keeps LCLS established if possible and informs oMSC about the
failed handover.
\- If the handover failed, ie the oMS was lost (as detected by radio link
layers), after the Target BSS had sent HO Detect but before HO Complete, the
Target BSS realizes that the call was lost. The oBSS keeps LCLS established if
possible and informs oMSC about the failed handover.
#### 13.3.1.9 Failing handover that would have established a call within one
BSS
When an Inter-BSS handover, which was about to move one call leg to the same
BSS as the other call leg, fails, the impact on the LCLS procedure differs
depending on the type of failure.
\- If the failure occurred before the HANDOVER COMMAND was sent, the oMSC
sends A-HANDOVER-REQUIRED-REJECT to oBSS and LCLS can not be established in
the Target BSS.
\- If the Target BSS could not establish any connection with the oMS (eg
R1-HO-Access was not received from oMS), the Target BSS can not send HO Detect
and LCLS can certainly not be established in the Target BSS. The oBSS informs
oMSC about the failed handover.
\- If the handover failed, ie the oMS was lost (as detected by radio link
layers), after the Target BSS had sent HO Detect but before HO Complete, the
Target BSS realizes that the call was lost and should not try to establish
LCLS. The oBSS informs oMSC about the failed handover.
\- After the Target BSS has sent HO Complete, the Target BSS shall seek to
establish LCLS. If the oMS is lost during or after the LCLS establishment
process, the error case should be handled as any loss of a LCLS call leg.
Because the original call leg was not local in oBSS, the oBSS will not try to
establish any LCLS after a failed handover to Target BSS, so the LCLS status
is not changed in this case.
The oMSC shall anyhow only inform other MSCs about the LCLS status when the
LCLS status has changed.
### 13.3.2 Specific handover scenarios and analysis of GCR plus mandatory
support of BSS ID solution
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.3.3 Specific handover scenarios and analysis of GCR plus optional
support of BSS ID solution
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.3.4 Handover Sequences for GCR Method
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
### 13.3.5 Simultaneous Handovers
#### 13.3.5.1 General
Handovers can occur at either end of the call at any time. Normally this does
not directly affect the other leg of the call and the nodes are not normally
aware of such a change. For solution using \"GCR with encapsulated oBSS ID\"
method the LCLS signalling may occur through the CN between each serving MSC
when the LCLS status changes.
A handover at one side of the call may either break LCLS or potentially enable
LCLS by moving into the BSS where the other party is served. When a handover
occurs at the same time/during the other side\'s handover this may change the
outcome, the following scenarios are considered:
i) Simultaneous Handover that maintains LCLS: initial handover at one side
breaks LCLS but handover at other side moves into same BSS and LCLS can be
resumed
ii) Simultaneous Handover that breaks LCLS: initial handover at one side makes
LCLS but handover at the other side moves out of the same BSS and LCLS is
broken
#### 13.3.5.2 Inter-BSS Simultaneous Handover that Maintains LCLS (Early
detection)
##### 13.3.5.2.1 Connection for Model for Simultaneous Handover that maintains
LCLS (CN UP de-activated during LCLS)
The following figures are based on the sequences for single side HO with user
plane inactive.
Connection Model 1: Call is locally switched
Connection Model 2: MS-1 triggers handover request, MGW-1 is configured both-
way connection to Target BSS and isolated from Serving BSS. HO command
triggers the BSS-2 side to bicast UL
Connection Model 3: MS-2 triggers handover request, MGW-2 is configured both-
way connection to Target BSS and isolated from Serving BSS. HO command
triggers UL bicast.
Connection Model 4: MSC-2 receives LCLS-Status-Update from MSC-1 and
configures BSS to bicast UL on one side and discard DL. MSC-2 reconfigures
MGW-2 to \"normal handover\" -- Ta,Ts bothway, Ta,Tt one-way. MSC-1 receives
the LCLS-Status-Update from MSC-2 and configures BSS to bicast UL and discard
DL data. MSC-1 performs same change to MGW-1.
Connection Model 5: MS-1 moves into Target BSS and receives DL data from MS-2,
no UL data from Target BSS can be sent to MS-2 as Ta, Tt is oneway DL
connected.
Connection Model 6: MS-2 move into Target BSS. Both legs to Target BSS are now
only connected DL and so there is a break in speech. Note this is the same as
for non-LCLS simultaneous HO.
Connection Model 7: HO detect is received at both ends and the MSC\'s
reconfigure the MGWs to support both-way connections between Ta and Ts.
Connection Model 8: Local path is established and old BSS connections are
cleared with Clear Command.
Figure 13.3.5.2.1.1: Simultaneous Inter-BSS Handover Connection Model when
LCLS is maintained and CN User Plane is de-activated during LCLS
##### 13.3.5.2.2 Simultaneous Inter-BSS Handover when LCLS is maintained (CN
UP de-activated during LCLS)
Figure 13.3.5.2.2.1: Simultaneous Handover that maintains LCLS and CN User
Plane is de-activated during LCLS
> 1 -- 5 (black) As for basic inter-BSS HO that breaks LCLS.
>
> 1 -- 4 (red) As for basic inter-BSS HO that breaks LCLS except that at this
> point if occurring after it has stored the GCR for the other end it could
> indicate that LCLS is possible. However this should not affect the
> subsequent signalling from MSC point of view as it cannot ensure that the
> far end handover will complete so it must continue under the premise that a
> handover out of a BSS which is currently locally switched will break LCLS
> and so it should still signal to prepare CN for LCLS break.
>
> 5\. Anchor MSC signals break in LCLS to far end, also alerting any nodes in
> the path that they must re-activate their User Plane.
>
> 5a. Due to simultaneous handover Anchor MSC signals to old BSS to bicast UL
> but also discard any DL data.
>
> 5b. MSC-2 re-activates the MGW connection towards old BSS in the manner used
> for Inter BSS HO of non-LCLS call i.e. the old serving Termination Ts is
> bothway through-connected to Ta while the new target Termination Tt is
> oneway connected.
>
> NOTE: The Access MGWs could be left as configured for single side handover
> with the Ts isolated. This would mean that while one MS has moved out of the
> serving BSS it will not get any DL data from the other side as shown in the
> Connection Models. However since this will be short lived when the second MS
> moves to the Target BSS it is possibly not worth making this additional
> transition in the Access MGWs for the simultaneous HO.
>
> 6\. Anchor MSC triggers HO command (this may also trigger UL bicasting but
> if occurs before steps 5a for the opposite side then the data will be
> blocked by the Access MGW. When the MS\'s move into the Target BSS since
> both legs to the Access MGWs are DL only connected there is no user data
> transmitted between them. It should be noted that this is the same problem
> for a simultaneous HO without LCLS.
Figure 13.3.5.2.2.2: Simultaneous Handover that maintains LCLS and CN User
Plane is de-activated during LCLS, Continued
> 7\. As for basic sequence.
>
> 7a. Dues to simultaneous HO the MSCs have reverted to standard HO topology
> in Access MGWs. At HO Detect the MSCs switch the Access MGWs to the
> intermediary state (Ta,Tt bothway, Ta,Ts is one way DL).
>
> 8\. (black) As for basic sequence, assuming this side performs handover
> detect first then the call is identified as local call but will not be
> locally switched at this instant,
>
> 8\. (red) Handover Complete indicates the BSS has correlated the two call
> legs and found they are in the same BSS and thus locally switched.
>
> 8a. (red) Target BSS informs MSC-1 that LCLS is connected.
>
> 9\. -- 12. Clear Command releases resources from serving BSS.\ MSC-1 and
> MSC-2 receive notification from old BSS (BSS-1/BSS-2) that LCLS has been
> released but they ignore notification as they received from target BSS
> information that call is locally switched.
>
> 13\. Since MSC-2 has been received in Handover Complete LCLS-Status
> indicating locally switched call MSC-S informs MGW-2 that LCLS is connected
> and CN UP can be de-activated.
>
> 14\. (red) MSC-2 notifies other CN nodes that LCLS is connected,
>
> 15\. MGW is updated that LCLS is connected and CN UP can be de-activated.
##### 13.3.5.2.3 Simultaneous Inter-BSS Handover when LCLS is maintained (CN
UP de-activated during LCLS) -- GCR + BSS ID mandatory
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.3.5.2.4 Simultaneous Inter-BSS Handover when LCLS is maintained (CN
UP de-activated during LCLS) -- GCR + BSS ID optional
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.3 Inter-BSS Simultaneous Handover that Maintains LCLS (Late
Detection)
##### 13.3.5.3.1 Connection for Model for Simultaneous Handover that maintains
LCLS
Figure 13.3.5.3.1.1: Simultaneous Inter-BSS Handover Connection Model when
LCLS is maintained
##### 13.3.5.3.2 Simultaneous Inter-BSS Handover when LCLS is maintained --
GCR + BSS ID mandatory (Late Detection)
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.3.5.3.3 Simultaneous Inter-BSS Handover when LCLS is maintained --
GCR + BSS ID optional
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.4 Inter-BSS Simultaneous Handover that Breaks LCLS (Early
Detection)
##### 13.3.5.4.1 Connection for Model for Simultaneous Handover that breaks
LCLS (CN UP de-activated during LCLS)
Figure 13.3.5.4.1.1: Simultaneous Inter-BSS Handover Connection Model that
breaks LCLS and CN User Plane is de-activated during LCLS
##### 13.3.5.4.2 Simultaneous Inter-BSS Handover that breaks LCLS (CN UP de-
activated during LCLS)
Initially call legs are not local, then one side performs a handover to the
BSS served by the far end. However at the same time the far end performs a
handover to the BSS served by the other end. So during the handover both ends
think that they are performing a handover to enable LCLS but in reality both
handovers will leave LCLS not possible.
Figure 13.3.5.4.2.1: Simultaneous Handover that breaks LCLS and CN User Plane
is de-activated during LCLS
> 1 - 4 (black) As for basic call flow on Inter-BSS HO when the call is
> currently not locally switched.
>
> 1 - 4 (red) As for basic call flow on Inter-BSS HO when the call is
> currently not locally switched, here the far end performs a handover into
> the BSS which is being left behind by MS-1.
>
> 5 (black) The target BSS performs call leg correlation with GCR to find if
> another call leg is active with same GCR. If the second handover has not
> started yet then it may report in HO Request Acknowledge that call can be
> locally switched. The target BSS-1 may bicasts the user plane in preparation
> for receiving the new MS.
>
> 5 (red) Assuming this is the second handover then the request to the BSS-1
> will result in finding the other call leg with the same GCR but this call
> leg is known to be undergoing a handover and so the response indicates that
> call cannot be locally switched. An additional detail in the LCLS-Status
> could be to indicate pending handover.
>
> 6 -- 11 Call flows complete individually on each side with no resulting
> change to the LCLS-Status. Thus no notifications occur and no updates
> through the CN.
##### 13.3.5.4.3 Simultaneous Inter-BSS Handover that breaks LCLS (CN UP de-
activated during LCLS) -- GCR plus BSS ID mandatory
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.3.5.4.4 Simultaneous Inter-BSS Handover that breaks LCLS (CN UP de-
activated during LCLS) -- GCR + BSS ID optional
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.5 Inter-BSS Simultaneous Handover that Breaks LCLS (Late
Detection)
##### 13.3.5.5.1 Connection for Model for Simultaneous Handover that breaks
LCLS
Figure 13.3.5.5.1.1: Simultaneous Inter-BSS Handover Connection Model that
breaks LCLS
##### 13.3.5.5.2 Simultaneous Inter-BSS Handover that breaks LCLS -- GCR plus
BSS ID mandatory
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.3.5.5.3 Simultaneous Inter-BSS Handover that breaks LCLS -- GCR plus
BSS ID optional
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.6 Simultaneous Inter-MSC Handover that Maintains LCLS (Early
Detection)
##### 13.3.5.6.1 Simultaneous Inter-MSC Handover when LCLS is maintained (CN
UP de-activated during LCLS)
For simultaneous Inter-MSC handover when CN User Plane is de-activated during
LCLS for using GCR with encapsulated oBSS ID method there is no additional
signalling between the two ends of the call compared to the case for
simultaneous inter-BSS handover as described in 13.3.5.2.2.
##### 13.3.5.6.2 Simultaneous Inter-MSC Handover when LCLS is maintained (CN
UP de-activated during LCLS) -- GCR + BSS ID mandatory
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
##### 13.3.5.6.3 Simultaneous Inter-MSC Handover when LCLS is maintained (CN
UP de-activated during LCLS) -- GCR + BSS ID optional
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.7 Inter-MSC Simultaneous Handover that Maintains LCLS (Late
Detection)
##### 13.3.5.7.1 Inter-MSC Simultaneous Handover in Both Sides when Handover
to Same BSS allows LCLS where previously LCLS was not possible: GCR+BSS ID
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
#### 13.3.5.8 Inter-MSC Simultaneous Handover that Breaks LCLS (Late
Detection)
> Editor\'s Note: The Inter-MSC simultaneous handover break LCLS need to be
> aligned with Inter-BSS simultaneous handover in 13.3.5.4 in the future.
##### 13.3.5.8.1 Inter-MSC Simultaneous Handover in Both Sides With Handover
to Different BSSs
###### 13.3.5.8.1.1 Technical Description
It is assumed that a non-local call was established. In this scenario, the oMS
performs an Inter-MSC handover to the tBSS, and the tMS performs a handover to
a new tTargetBSS from the tBSS simultaneously.
When receiving the Handover required Message, the oMSC finds that inter-MSC
handover is required, it sends MAP-Pre-Handover Req to target MSC which
includes LCLS Negotiation IE and GCR. The target MSC assumes that the call is
served by the same BSS, because it believes the tMS is in the tBSS (the
information of tMS in oMSC has not been updated). If the LCLS is permitted,
the target MSC sends HO request to target BSS with GCR and LCLS-Connection-
Status-Control, LCLS-Configuration and LCLS-Correlation-request set to
\"Correlate GCR \".
Because the tMS has performed a handover to tTargetBSS, the BSS should not
establish LCLS. The tBSS indicates to the target MSC that LCLS was not
possible (it did not find the tcall leg in use in the BSS).
After oMS completes the handover to target tBSS, the target MSC Server then
sends the MAP-Send-End-Sig Request message to the oMSC Server with the LCLS-
Status. The oMSC updates the remote side with LCLS-Status.
After tMS completes the handover to tTargetBSS, the tMSC updates the remote
side with LCLS-Status.
Figure 13.3.5.8.1.1.1 illustrates an Inter-MSC simultaneous handover call flow
when LCLS should not be established. New messages and new elements are marked
in red color in the figure.
Figure 13.3.5.8.1.1.1 Inter-BSS Simultaneous Handover Call Flow when LCLS is
failure
> 1\. The tMS performs the Inter-MSC handover from tBSS to tTargetBSS.
>
> 2\. oMSC finds that inter-MSC handover is required, it sends MAP-Pre-
> Handover Req to target MSC which includes LCLS Negotiation IE and GCR.
>
> 4\. Target MSC checks that LCLS negotiation permitted LCLS in CN.
>
> 5\. If matching then the target MSC shall set the LCLS-Connection-Status-
> Control to \"connect \" and LCLS-Correlation-request to \"correlate GCR\",
> and perform HO request to target BSS with GCR and LCLS-Connection-Status-
> Control and LCLS-Configuration.
>
> 6 - 7. Target BSS performs call leg correlation with GCR to find if another
> call leg is active with same GCR. In this case, the tMS has already
> performed handover to tTargetBSS, so the target BSS returns acknowledgment
> and also indicates that call is not possible to be locally switched.
>
> 8- 13. the oMSC sends HO CMD message to inform oMS to perform handover to
> target tBSS, and oMS performs handover.
>
> 14\. When the oMS completes handover to target tBSS, the target MSC will
> send the MAP Send-End-Sig Req message to oMSC with LCLS-Status indication
> LCLS not feasible. The oMSC shall release the source resource after
> receiving this message.
>
> 15\. After both handovers complete, the oMSC and tMSC update each other with
> new LCLS-Status.
## 13.4 Comparison and conclusions on Call Establishment and Handover
Scenarios
During Call Establishment the originating MSC composes the GCR to include the
originating BSS Node ID within the Call Reference ID parameter, see Section
9.8, it is an option whether the tMSC/tBSS utilizes this to determine if the
call is an Intra-BSS call. It is an option whether the tMSC/tBSS utilizes the
Network ID within the GCR to determine whether the call is an intra-network
call. Therefore the relevant sections above related to the GCR encapsulated
oBSS ID method for call establishment apply.
During Handover, the originating BSS Node ID is not updated within the Call
Reference ID parameter of the GCR. Therefore the relevant sections above
related to the GCR with encapsulated oBSS ID method for handover apply.
## 13.5 Signalling Sequences for MSC-S Judged Method
Due to the decision made in 3GPP CT4#50 Working Group to define and conclude
on a single solution within the Technical Report based on the Solution 3
defined within Section 9.2.2, this section is void.
# 14\. Solutions for A Interface signalling and LCLS support
## 14.1 General
The purpose of this section is to identify the protocol signalling information
that needs to be exchanged between BSS and CN, from CT4\'s perspective. This
is however informative and the final protocol encoding is in the remit of
GERAN. Different options may be presented provided they are deemed feasible.
The conclusions will finalise which options from this section are selected.
In order for the BSS to establish a Local Switch several prerequisites are
necessary that are related to the control protocol:
\- the Core Network must give permission and preferred LCLS connectivity (e.g.
write access) to the BSS (LCLS-Configuration and LCLS-Connection-Status-
Control)
\- the Core Network must be able to withdraw the permission for LCLS any time
during the call (LCLS-Configuration and/or LCLS-Connection-Status-Control)
\- the Core Network must give indication, which call legs belong to one call
(unique Call Identifier)
\- the Core Network should give indication that the BSS shall correlate, or
not correlate, call legs using the given Call Identifiers
\- the BSS must indicate, when Local Switch was established or broken (LCLS-
BSS-Status)
\- the BSS must indicate, when it intends/needs to break the Local Switch
(LCLS-BSS-Status)
\- the Core Network must give indication when to through-connect
(LCLS_CONNECT_CONTROL Message)
NOTE: some of the above steps may be combined into a single BSSAP message or
procedure.
## 14.2 Signalling of Local Switching Capability from BSS to CN
### 14.2.1 General Considerations
If the CN would not always send GCR to the BSS, it could be useful for the CN
to know the LCLS capabilities of the BSS as early as possible. The other
direction, CN to BSS, seems less critical. This subclause describes possible
solutions to inform the CN about the LCLS capabilities of the BSS, but
according to the conclusion this type of functionality is not needed at all
with the selected call correlation solution.
### 14.2.2 LCLS Capability Solution using O&M Configuration
#### 14.2.2.1 Technical Description
One option [ ]{.underline} is to configure the BSS-capabilities within each
MSC by O&M parameters and the MSC capabilities within each BSS by other O&M
parameters. Then no additional signalling for the capability exchange is
necessary.
#### 14.2.2.2 Pros and Cons LCLS Capability Solution using O&M
Pros:
\- no signalling interface impacts
Cons:
\- This approach is error prone due to the hand-administration
\- The whole BSS must be homogeneously supporting LCLS or the LCLS attempt
would fail rather often
\- This administrative approach is static and can not react quickly on
changing conditions.
\- It is unlikely that all operators would be in favour of this approach.
\- There is no need to configure BSS capabilities regarding LCLS in the MSC.
### 14.2.3 LCLS Capability Solution Signalling LCLS Capability in Assignment
Complete
#### 14.2.3.1 Technical Description
This option proposes to add a new IE \"**LCLS-Capability** \" in the
Assignment- Complete message. But this is a bit late in the process, the CN
may have to do pro-active signalling for LCLS without knowing, if that would
ever be successful.
This new IE needs to indicate: \"LCLS-Yes\" / \"LCLS-No\". Default is \"LCLS-
No\" and this is assumed, if the IE is not present. oMSC may only start to
employ the additional signalling for LCLS, if it knows that the oBSS supports
it. tMSC may only apply signalling for LCLS, if it knows that tBSS supports
it.
#### 14.2.3.2 Pros and Cons for LCLS Capability Solution using Assignment
Complete
Pros:
-
Cons:
\- Depending on the call establishment the CN LCLS capability would need to be
negotiated without knowing if the originating BSS supported LCLS. Depending on
the LCLS CN solution this could be unnecessary signalling and configuration in
the CN.
\- Impact to the signalling interface
\- There is no need to have BSS inform MSC about the LCLS capabilities of the
BSS
### 14.2.4 LCLS Capability Solution Signalling LCLS Capability in \"Complete
Layer 3\" message
#### 14.2.4.1 Technical Description
This option proposes to add a new IE \"**LCLS-Capability** \" on the
A-Interface, per call leg, within the \"Complete Layer 3\" Message. This is
the approach already taken for the AoIP-Capabilities. The new IE could be used
by oBSS and tBSS. The MSC\'s would be informed at a very early point in time
and per call leg, so very accurate.
This new IE needs to indicate: \"LCLS-Yes\" / \"LCLS-No\". Default is \"LCLS-
No\" and this is assumed, if the IE is not present. oMSC may only start to
employ the additional signalling for LCLS, if it knows that the oBSS supports
it. tMSC may only apply signalling for LCLS, if it knows that tBSS supports
it.
Editor\'s Note: how the target BSS involved in the inter-BSS handover
indicates its support for LCLS is FFS.
#### 14.2.4.2 Pros and Cons for LCLS Capability Solution using Complete Layer
3 message
Pros:
\- The CN receives the information that the BSS supports LCLS very early in
the call and therefore if it is not supported then no further CN signalling
would be initiated for LCLS.
\- There is no dependency on when the assignment is applied compared to
solution using Assignment Complete.
\- This approach supports a non-homogeneous BSS, i.e. some parts of the BSS
could (already) support LCLS, while others are (still) not capable.
Cons:
\- Small impact to the signalling interface (one extra byte in the Complete
Layer 3 message, which may be re-used in future to convey additional BSS
capabilities)
\- This solution does not work in case of inter-BSS handover and therefore MSC
would need to make an assumption that the target BSS supports the LCLS before
LCLS capability negotiation in CN.
\- There is no need to have BSS inform MSC about the LCLS capabilities of the
BSS.
### 14.2.5 Comparison of Solutions for Signalling of Local Switching
Capability from BSS to CN
An MSC that supports LCLS shall always send the GCR to the BSS, irrespective
of whether the BSS supports LCLS or not. Therefore there is no need e.g. to
have the BSS inform the CN about its LCLS capabilities or to configure MSC
with this information.
## 14.3 Signalling of Local Switching Configuration from CN to BSS
### 14.3.1 General Considerations
The MSC needs to inform the BSS one way or another that it supports LCLS and
that the CN permits LCLS to be activated for this call. The Core Network may
in addition to an indication that it permits LCLS specify further conditions
for LCLS, like \"LCLS is allowed, but a copy of the User Plane data must be
sent in uplink\".
### 14.3.2 LCLS Configuration Solution by signalling of LCLS-Configuration in
Assignment/Handover procedures
#### 14.3.2.1 Technical Description
After the CN has negotiated along the routing path (see chapter 8) that LCLS
is feasible, the CN instructs the BSS about LCLS according to signalling flows
described in Clause 13.
A new IE \"**LCLS-Configuration** \" is introduced. It is sent within the
Assignment Request message from the MSC to the BSS on a per call-leg basis. It
instructs the BSS on the possibilities and preferences for LCLS for the call-
leg.
The values for the LCLS-Configuration are listed in the subclause 15.2.
This new IE LCLS-Configuration\" is also sent in Handover Request to the
target BSS in case of Inter-BSS handover (and Inter-MSC Handover and Inter-
System Handover). Note that this way of signalling is comparable to the AoIP
solution for Inter-BSS Handover, where the Codec List (MSC Preferred) is sent
to the BSC before it has sent the Codec List (BSS Supported).
#### 14.3.2.2 Pros and Cons for LCLS Configuration Solution using Assignment
and Handover Request
Pros:
\- The BSS receives explicit indication that CN supports and permits LCLS for
the given call leg throughout the core network.
\- The core network\'s LCLS capability and permission information is not
coupled to the call leg correlation information, the core network can e.g.
temporary prohibit LCLS for a given call, while still keeping the call leg
correlation information intact in the BSS.
\- Different IE\'s are defined to control the LCLS configuration and
correlation request respectively in the BSS for specific call scenarios, for
example if the Assignment Request is for the first leg of the call it allows
CN to signal the LCLS configuration to the BSS without requesting the call leg
correlation for this call leg.
Cons:
\- Impact to the signalling interface. This solution requires an extra
signalling sequence compared to solution without signalling of LCLS
Configuration and LCLS Correlation, e.g. to permit or prohibit LCLS.
### 14.3.3 Comparison of Solutions for Signalling of Local Switching
Preference from CN to BSS
Using an explicit new IE \"LCLS-Configuration\" has more potential than the
simple implicit signalling (i.e. presence of unique call identifier). Since it
needs only one or few octets in existing messages, i.e. the signalling
overhead is small compared to other IEs for LCLS (e.g. the GCR) it is the
current working assumption to introduce a new IE LCLS-Configuration.
## 14.4 Signalling of the correlation of the call legs from CN to BSS
### 14.4.1 General Considerations
The call legs belonging to one specific call need to be identified by the
MSC(s) to the BSS(s) so that the BSS(s) can determine whether or not they are
belonging to the same call and therefore LCLS is feasible.
### 14.4.2 Correlation Solution by signalling of GCR in Assignment/Handover
procedures (CN to BSS)
#### 14.4.2.1 Technical Description
This solution is based on the assumption that in order to correlate the two
call legs in the BSS the method is to send the Global Call Reference of the
call. This is a proposed solution in subclause 9.2.
The MSCs within the CN have no knowledge about the other end\'s call-leg or
radio access network. They send therefore a new Global Call Reference (see
9.2.1), which is worldwide (globally) unique for the call, within Assignment
Request and Handover Request to each BSS on a per call-leg basis to allow the
correlation of call-legs of one call, if both end in one BSS.
A new IE \"Global Call Reference\" is introduced for the A-Interface. It is
sent within the Assignment Request and Handover Request message from the MSC
to the BSS on a per call-leg basis. Contents and coding is as for the Global
Call Reference within the Core Network (see chapter 9.2).
#### 14.4.2.2 Pros and Cons for Correlation Solution using GCR
Pros:
\- The BSS receives globally unique call identifiers (GCR) for each call leg
and can then check if they are identical, i.e. if these call legs belong to
one call
\- The MSC does not need to have any signalling or coordination with the other
leg of the call
Cons:
\- Impact to the signalling interface
### 14.4.3 Correlation (CN to BSS) Solution by signalling of Call-Leg
Information parameter in Assignment/Handover Procedures
This solution is based on the assumption that in order to correlate the two
call legs in the BSS the method is to exchange the other Call-leg\'s
information through the CN between the BSSes. This is a proposed solution in
subclause 9.2. The MSCs within the CN must then have the knowledge about the
other end\'s call-leg IDs and/or radio access network IDs. A new IE \"distant
Call-Leg Information\" is introduced for the A-Interface, which is unique for
the call-leg in the other BSS, and it is sent within Assignment Request and
Handover Request to the BSS in order to allow the correlation of call-legs of
one call, if both end in one BSS.
The contents and coding of the \"distant Call-Leg Information\" is as for this
IE within the Core Network (see chapter 9).
#### 14.4.3.1 Pros and Cons for Correlation ID (CN to BSS) Solution using Call
Leg Info
Pros:
\- The A-Interface defines Call-leg IDs already: \"CIC\" for AoTDM and \"Call
Identifier\" for AoIP
Cons:
> \- The call leg changes for each handover to a new BSS
\- The existing Call-leg IDs are not globally unique, but only MSC-unique;
they need to be extended and may then not be smaller than the GCR, see next
chapter
\- two Call-Leg IDs are necessary and must be exchanged through the CN
> \- Standardisation effort is necessary to extend the existing call-leg IDs
> to globally unique call-leg IDs
### 14.4.4 Correlation (CN to BSS) Solution by signalling of existing call
reference parameter Call ID/CIC & MSC ID in Assignment/Handover procedures
#### 14.4.4.1 Technical Description
This solution is based on the method to send the Call ID/CIC & MSC ID pair
(see subclause 9.3) to the BSS in order to identify the originating leg of the
call when establishing the terminating leg. The signalling solution is in
principle the same as in 14.4.3 but contains different call leg
identification.
The Call ID/CIC & MSC ID pair identifying the originating leg of the call is
propagated through the network up to the tBSS which can detect whether both
call legs are served by the same BSS.
One (or more) information element(s) containing the Call ID/CIC & MSC ID pair
of the other leg of the call are added to the Assignment Request and Handover
Request messages from the MSC to the BSS on a per call-leg basis. The possible
contents and coding of the Call ID/CIC & MSC ID pair are described in
subclause 9.3.
If the tMSC does not support LCLS, or does not want to allow the BSS to
correlate the two legs of the call (as in Lawful Interception solution
restricting the LCLS (see Section 11), it simply does not add the Call ID/CIC
& MSC ID pair of the other leg of the call in Assignment Request/ Handover
Request messages. In this case the tBSS cannot perform the correlation, cannot
know that a call is a local one and consequently cannot establish LCLS. When
the situation possibly later on has changed, the tMSC can provide the call
correlation information to the BSS.
> Editor\'s Note: the above paragraph describes handling that should be
> described in the LCLS-Negotiation or LCLS Handover sections. Issues have
> been raised with the fact that when a far end node performs a handover to
> new BSS and the near end did not include any LCLS info then it will not
> trigger LCLS without additional CN signalling and procedures.
#### 14.4.4.2 Pros and Cons for Correlation (CN to BSS) Solution using Call ID
plus CIC & MSC Id
Pros:
\- The existing BSS CIC or AoIP Identifiers can be reused.
Cons:
\- Call leg ID changes when handover to another BSS
\- The size of IE consisting of CALL ID /CIC + MSC ID (to become globally
unique) may then not be smaller than the GCR, see previous chapter
\- two Call-Leg IDs are necessary and must be exchanged through the CN
\- Standardisation effort is necessary to specify globally unique call-leg IDs
See also the corresponding Pros and Cons listed in subclause 14.3.3.2 and 9.
### 14.4.5 Comparison of Solutions for signalling the correlation of call legs
from CN to BSS
The Global Call Reference ID is already standardized in a globally unique
manner. Only one GCR is necessary for each call, regardless of handovers and
other - partly complex - supplementary services. GCR option is preferred by
GERAN2. GCR option would remain the call id unique throughout the call
duration and if LCLS status changes from not possible to possible (e.g. in
Handover) the GCR is maintained and known by the BSS through the call
duration.\ **Working Assumption:** The GCR is used as a new IE in the existing
Assignment Request and Handover Request messages. The MSC shall always send
the GCR to the BSS in the Assignment Request and Handover Request messages.
The MSC shall always instruct the BSS either to do call correlation using GCR,
or not to do call correlation using GCR.
## 14.5 Signalling of Local Switching Status from BSS to CN
### 14.5.1 General Considerations
After the BSS has identified that LCLS is feasible/not feasible, it needs to
report the indication back to the CN that it has correlated the two legs of
the call and that it is feasible to perform local switching or not and what
status this local switch may have.
### 14.5.2 LCLS Status Solution by signalling Local Switching Status in new
message and in Assignment/Handover procedures
#### 14.5.2.1 Technical Description
A new IE \"LCLS-BSS-Status\" is sent in e.g. the Assignment Complete and
Handover Request Acknowledge (and more)messages to the CN. Both MSCs (oMSC and
tMSC) send the Assignment Request (or Handover Request) at different points in
time to the BSS.
The LCLS-BSS-Status is only fully known and stable after the second Assignment
Request (oAssignment-Request or tAssignment-Request, whichever comes later),
or the Handover Request, has been received. An additional new Message seems
necessary, e.g. termed \"LCLS-Notification\", which is sent whenever the BSS
detects that the LCLS-BSS-Status has changed. The MSCs need this LCLS-Status
to determine how to handle the User Plane within the Core Network.
A new Message \"LCLS-NOTIFICATION\" and a new IE \"**LCLS-BSS-Status** \" are
introduced. The **LCLS-BSS-Status** IE may be sent in the Assignment Complete
message and Handover Complete messages and in the new LCLS-NOTIFICATION
message, whenever it is necessary to inform the CN about a change in the LCLS-
BSS-Status. If the (optional) LCLS-Status is not included in Assignment
Complete and Handover Complete then it must be assumed that LCLS is not
feasible. The values of LCLS-BSS-Status are listed in subclause 15.2.
LCLS-BSS-Status indicates that local switching is feasible but also may
indicate if local switching is feasible/established or must be reverted for
example if a handover is needed.
NOTE: The LCLS Status exchanged within the CN is different from the LCLS-BSS-
Status and issignalled through the CN via NNI signalling to update
intermediate nodes in the call path of the current LCLS status from core
network point of view. The core network signalling is described in Clause 13.
#### 14.5.2.2 Pros and Cons for LCLS Status Solution as new IE in new message
and existing messages
Pros:
\- The CN receives notification that the two call legs have been correlated
and LCLS is feasible.
\- The CN receives notification at any time during the call if local switching
status of the call has changed.
Cons:
\- Impact to the signalling interface
### 14.5.3 Comparison of Solutions for Signalling of Local Switching Status
from BSS to CN
Currently there is only one option feasible, which therefore should be
standardised.
## 14.6 Signalling of Local Switching user plane Connection Control from CN to
BSS
### 14.6.1 General Considerations
The signalling within the Assignment procedures does not yet determine the
feasibility of LCLS within the BSS. At that time in signalling the tUser has
still not accepted the call and the User Plane shall therefore still not be
through-connected. The Connect information for non-LCLS calls is currently not
sent to the BSS, but only to the MS. As the answer to the call occurs after
any further A-interface messaging from the oMSC it seems therefore necessary
to introduce a new message from CN to BSS to tell the BSS when to through-
connect the user plane locally in the BSS.
### 14.6.2 LCLS Connection Control Solution using new \"LCLS-
CONNECTION_CONTROL\" message and IE to BSS
#### 14.6.2.1 Technical Description
A new Procedure \"**LCLS-Connect Control** \", two new Messages \"**LCLS-
CONNECT_CONTROL** \" / \"**LCLS-CONNECT_CONTROL_ACK** \" and a new IE
\"**LCLS-Connection-Status-Control** \" are introduced on the A-Interface to
inform the BSS, when and how to \"Connect\" the call locally within BSS.
The trigger for this LCLS-Connect Control procedure during call establishment
is the \"Answer\" message from tMSC. Both tMSC and oMSC send the new Message
LCLS-CONNECT_CONTROL to both tBSS and oBSS respectively. The content, i.e. the
coding of the IE LCLS-Connection-Status-Control is in general identical on
both A-Interfaces, but could be different as described in Clause 13.
If both call legs receive an LCLS-CONNECT_CONTROL message and the contents of
the LCLS-Connection-Status-Control IE allow and request LCLS to be
established, the BSS establishes LCLS. The tBSS call leg gets tLCLS-CONNECT in
general earlier than the oBSS call leg gets oA-CONNECT.
Both tBSS and oBSS shall acknowledge this LCLS-CONNECT_CONTROL message after
the status of LCLS is clarified, i.e. after both call leg got the LCLS-
CONNECT_CONTROL message and LCLS is through-connected.**\** The new message
\"LCLS-CONNECT_CONTROL\" and the values of the LCLS-Connection-Status-Control
IE are listed in subclause 15.2. The new IE LCLS-Connection-Status-Control can
be included also in the existing messages Handover Request and Internal
Handover Command.
The LCLS-Connection-Status-Control IE can be included in Assignment Request
for the supplementary services like Call Waiting but not needed in the
Assignment request sent before the answer since the MSC-Servers must request
LCLS connection using the new LCLS-CONNECT-CONTROL message at call set-up, as
described in Clause 13.
#### 14.6.2.2 Pros and Cons for LCLS Connect Control Solution
Pros:
\- The CN controls when the local call local switch user plane through-
connection occurs;\ this functionality is required to fulfil fundamental call
establishment control principles.
\- The BSS is told when the user plane can be locally switched both-way and
when the user plane shall be bi-casted.
\- The CN is informed when this has been achieved by the LCLS-BSS-Status sent
by the BSS.
Cons:
\- Impact to the signalling interface
### 14.6.3 Comparison of Solutions for Signalling of Local Switching User
Plane Connection Control/Enabled from CN to BSS
Currently there is only one option feasible and this solution should be
standardised.
## 14.7 Signalling of Local Switching Disabled from CN to BSS
### 14.7.1 General Considerations
It shall be possible for the CN to disable LCLS (e.g. due to some
Supplementary Services), when LCLS is already established.
### 14.7.2 LCLS Disabled Solution using new LCLS-Disconnect message to BSS
#### 14.7.2.1 Technical Description
A Supplementary Service may be invoked any time during a normal call. In
general there is no existing message from CN to BSS in this very moment.
Therefore a new Message must be introduced to indicate that LCLS connection in
the BSS shall be disconnected. This new Message may be sent from either or
both oMSC or tMSC. The BSS shall then disconnect the LCLS path within its BSS
and re-route the connection as for a normal call across the A-interfaces to
oMSC and tMSC.
The new Message could be named \"LCLS-DISCONNECT\".
#### 14.7.2.2 Pros and Cons for LCLS Disabled Solution using new message
Pros:
The CN can at any time break an established LCLS-path
Cons
\- A new message specifically for disconnecting LCLS is defined.
### 14.7.3 LCLS Disabled Solution using LCLS-Connection-Status-Control IE
within LCLS-CONNECT_CONTROL Message to BSS
#### 14.7.3.1 Technical Description
The new message LCLS-CONNECT_CONTROL, proposed in 14.6.2, could be used to
indicate that LCLS connection in the BSS shall be disconnected by setting the
LCLS-Connection-Status-Control IE to \"Release LCLS\". This message may be
sent from either or both oMSC or tMSC. The BSS shall then disconnect the LCLS
path within its BSS and re-route the connection as for a normal call across
the A-interfaces to oMSC and tMSC.
After the Supplementary Service is terminated the same Message LCLS-
CONNECT_CONTROL may then be reused, of course with other parameter settings.
#### 14.7.3.2 Pros and Cons for LCLS Disabled Solution using LCLS-CONNECT
Pros:
  * The CN can at any time break an established LCLS-path
  * The same message as defined for connection of LCLS is re-used. This is more code-space-economic and simpler to implement.
Cons
\- The BSS must check the control IE to determine the request from the MSC.
### 14.7.4 Comparison of Solutions for Signalling of Local Switching Disabled
from CN to BSS
Little is gained from defining separate messages for LCLS Connect and LCLS
Disconnect; one new Message, e.g. \"LCLS-CONNECT_CONTROL\" is sufficient and
adequate for this functionality. The included new IE LCLS-Connection-Status-
Control allows CN control of all necessary actions.
**Working Assumption** : one new Message \"LCLS-CONNECT_CONTROL\" is used by
the CN to control the break of the LCLS-path within the BSS.
## 14.8 Request to Control Call Leg Correlation
### 14.8.1 General Considerations
In order to support the option for Intra-BSS ID check where the CN attempts to
determine if the call is served by the same BSS or not and thereby indicate
explicitly whether the BSS shall perform a correlation of the GCR with
existing call legs there is a need for additional A-interface signalling to
request call leg correlation.
Additionally if the optimisations described in sub-clause 9.2.2 for avoiding
or minimizing correlation requests in BSS is deployed then the same
A-interface signalling is used to inform BSS that call leg correlation is not
needed.
### 14.8.2 Solution using Call Leg Correlation Request information element
A new IE LCLS-Correlation-request is introduced to indicate either
\"correlate\" the GCR or \"do not correlate\" the GCR. This IE may be
signalled in Assignment messages and Handover messages as specified in
subclause 15.2.
# 15\. Proposed New Control Flags, Information Elements, Messages
## 15.1 Core Network Interfaces
Table 15.1.1: Core Network Interface Information Elements and Control Flags
+----------+----------+----------+----------+----------+----------+ | Element | Values | Existing | New | Des | Comment | | Name | | Messages | Message | cription | | | | | in which | | | | | | | to be | | | | | | | Included | | | | +----------+----------+----------+----------+----------+----------+ | Global | As | IAM, APM | LCLS-APP | Globally | | | Call | defined | | ? | id | | | R | in TR - | | | entifies | | | eference | integer | | | call leg | | +----------+----------+----------+----------+----------+----------+ | BSS ID | As | IAM, APM | LCLS-APP | Id | Only | | | defined | | ? | entifies | required | | | in TR - | | | BSS | if MSC | | | integer | | LCL | served | check of | | | | | S-Status | by call | BSS ID | | | | | -Update- | leg | is | | | | | Request, | | agreed. | | | | | | | | | | | | LCL | | | | | | | S-Status | | | | | | | -Update- | | | | | | | Response | | | +----------+----------+----------+----------+----------+----------+ | LCLS | LCLS | ANM | LCL | Notifies | A | | Status | Co | | S-Status | CN nodes | response | | | nnected, | | -Update- | of the | is | | | | | Request, | LCLS | needed | | | LCLS Not | | | co | to | | | Co | | LCL | nnection | confirm | | | nnected, | | S-Status | Status. | receipt | | | | | -Update- | | by all | | | LCLS | | Response | | entities | | | feasible | | | | both for | | | but not | | | | handover | | | yet | | | | and also | | | c | | | | for | | | onnected | | | | handover | | | | | | | during | | | | | | | call | | | | | | | establ | | | | | | | ishment. | +----------+----------+----------+----------+----------+----------+ | LC | LCLS-Di | | LCL | Requests | A | | LS-Statu | sconnect | | S-Status | a change | response | | s-Change | ion-Prep | | -Update- | in LCLS | is | | -Request | aration, | | Request, | Status | needed | | | | | | through | to | | | LCLS | | LCL | the CN | confirm | | | Co | | S-Status | | receipt | | | nnection | | -Update- | | by all | | | Pre | | Response | | entities | | | paration | | | | both for | | | | | | | handover | | | | | | | and also | | | | | | | for | | | | | | | handover | | | | | | | during | | | | | | | call | | | | | | | establ | | | | | | | ishment. | +----------+----------+----------+----------+----------+----------+ | LCLS-Neg | Connect | IAM, | LCLS-Neg | I | Some | | otiation | B | | otiation | ndicates | s | | (CN) | oth-way, | APM. | (new | the | cenarios | | | | | APP) ? | ne | need | | | Connect | ACM ? | | gotiated | further | | | Both-way | | | LCLS | de | | | plus | | | co | finition | | | bicast, | | | nnection | but in | | | | | | pr | p | | | LCLS Not | | | eference | rinciple | | | Allowed | | | which | this IE | | | | | | shall | should | | | | | | persist | not be | | | | | | in the | mixed up | | | | | | BSS | with the | | | | | | while | Control | | | | | | LCLS is | Flags | | | | | | \"con | which | | | | | | nected\" | are | | | | | | unless | spo | | | | | | ex | ntaneous | | | | | | plicitly | orders. | | | | | | i | | | | | | | ndicated | | | | | | | to | | | | | | | change. | | | | | | | CN nodes | | | | | | | can | | | | | | | modify | | | | | | | this | | | | | | | request | | | | | | | but not | | | | | | | extend | | | | | | | the | | | | | | | capab | | | | | | | ility... | | +----------+----------+----------+----------+----------+----------+ | LCLS-In | Activate | H.248 | New | Informs | FFS | | dication | UP, | ADD, MOD | Package | MGWs | whether | | | | | ? | when UP | new | | | De- | | | is | package | | | Activate | | | active | is | | | UP | | | through | required | | | | | | the CN | or | | | | | | or when | existing | | | | | | UP is | pr | | | | | | locally | operties | | | | | | s | can be | | | | | | witched. | used. | +----------+----------+----------+----------+----------+----------+
> Editor\'s Note: other LCLS-Negotiation settings may exist but need to be
> described in the TR first for example Connect One-way Forward, Connect One-
> way Backward, Connect One-way Forward Bicast,Connect One-way backward
> Bicast.
## 15.2 Radio Access Interfaces
Table 15.2.1: Radio Access Interface Information Elements and Control Flags
+----------+----------+----------+----------+----------+----------+ | Element | Values | Existing | New | Des | Comment | | Name | | Messages | Message | cription | | | | | in which | | | | | | | to be | | | | | | | Included | | | | +----------+----------+----------+----------+----------+----------+ | Global | As | As | | Globally | | | Call | defined | signment | | id | | | R | in TR - | Request, | | entifies | | | eference | integer | | | call leg | | | | | Handover | | | | | | | Request | | | | | | | | | | | | | | Internal | | | | | | | Handover | | | | | | | Command | | | | +----------+----------+----------+----------+----------+----------+ | LCLS-BS | Call is | As | LCL | Notifies | Could be | | S-Status | Locally | signment | S_CONNE | CN of | combined | | | S | C | CT_CONT | the LCLS | with | | | witched, | omplete, | ROL_ACK | co | LCLS | | | | | | nnection | Cor | | | Call not | Handover | L | Status | relation | | | yet | Complete | CLS-Noti | in the | Result | | | locally | | fication | BSS. | | | | switched | Handover | | Should | \"Call | | | | Request | | be | not yet | | | Call Not | Ack | | s | locally | | | Possible | nowledge | | ignalled | sw | | | to be | | | via new | itched\" | | | Locally | Handover | | message | implies | | | Switched | P | | L | that | | | | erformed | | CLS-Noti | cor | | | Locally | | | fication | relation | | | Switched | | | whenever | was | | | Call is | | | this | found in | | | no | | | status | BSS. | | | longer | | | changes. | | | | locally | | | | | | | switched | | | Included | | | | | | | in | | | | | | | messages | | | | | | | for each | | | | | | | call | | | | | | | leg, | | | | | | | even if | | | | | | | sent to | | | | | | | both | | | | | | | call | | | | | | | legs at | | | | | | | the same | | | | | | | time. | | +----------+----------+----------+----------+----------+----------+ | LCLS-Cor | C | As | | I | | | relation | orrelate | signment | | ndicates | | | -request | GCR, | Request, | | to BSS | | | | | | | whether | | | | Do Not | Handover | | GCR | | | | C | Request | | should | | | | orrelate | | | be | | | | GCR | Internal | | co | | | | | Handover | | rrelated | | | | | Command | | for | | | | | | | another | | | | | | | call leg | | | | | | | with | | | | | | | same GCR | | | | | | | or not. | | | | | | | If not, | | | | | | | just | | | | | | | store | | | | | | | the GCR. | | +----------+----------+----------+----------+----------+----------+ | LCLS-Co | LCLS | As | | I | C | | rrelatio | Cor | signment | | ndicates | urrently | | n-Result | relation | C | | response | combined | | | Not | omplete, | | to | in LCLS | | | Esta | | | request | Status | | | blished, | Handover | | | but | | | | Complete | | | l | | | LCLS | | | | ogically | | | Cor | | | | should | | | relation | | | | be | | | Est | | | | d | | | ablished | | | | escribed | | | | | | | sep | | | | | | | arately. | | | | | | | | | | | | | | See | | | | | | | NOTE. | +----------+----------+----------+----------+----------+----------+ | LCLS-C | Connect, | As | LCLS | I | Values | | onnectio | | signment | -Connect | ndicates | \" | | n-Status | Do Not | Request, | -Control | to BSS | Bicast\" | | -Control | Connect | | | whether | and | | | | Handover | | it is | \"Bic | | | Bicastat | Request | | p | ast-atHa | | | Handover | | | ermitted | ndover\" | | | | Internal | | to | also | | | Bicast | Handover | | through | imply | | | | Command | | -connect | Connect. | | | Release | | | the | | | | LCLS | | | local | The | | | | | | call | value | | | | | | | \"Bi | | | | | | | castatHa | | | | | | | ndover\" | | | | | | | only | | | | | | | applies | | | | | | | for the | | | | | | | call leg | | | | | | | where it | | | | | | | was | | | | | | | r | | | | | | | eceived. | | | | | | | The | | | | | | | value | | | | | | | \" | | | | | | | Bicast\" | | | | | | | applies | | | | | | | to both | | | | | | | call | | | | | | | legs | | | | | | | even | | | | | | | when | | | | | | | received | | | | | | | on one | | | | | | | call leg | | | | | | | only. | | | | | | | | | | | | | | This | | | | | | | control | | | | | | | element | | | | | | | is | | | | | | | optional | | | | | | | in | | | | | | | As | | | | | | | signment | | | | | | | Request, | | | | | | | see | | | | | | | si | | | | | | | gnalling | | | | | | | flows. | +----------+----------+----------+----------+----------+----------+ | LC | Connect | As | | I | The | | LS-Confi | B | signment | | ndicates | values | | guration | oth-way, | Request, | | the | of this | | | | | | ne | element | | | Connect | Handover | | gotiated | are | | | Both-way | Request | | LCLS | ap | | | plus | | | co | plicable | | | bicast, | Internal | | nnection | to both | | | | Handover | | pr | call | | | | Command | | eference | legs | | | | | | which | when | | | | | | shall | received | | | | | | persist | on one | | | | | | in the | call leg | | | | | | BSS | only or | | | | | | while | on both | | | | | | LCLS is | call | | | | | | \"con | legs. | | | | | | nected\" | | | | | | | unless | Some | | | | | | ex | s | | | | | | plicitly | cenarios | | | | | | i | need | | | | | | ndicated | further | | | | | | to | de | | | | | | change. | finition | | | | | | | but in | | | | | | | p | | | | | | | rinciple | | | | | | | this IE | | | | | | | should | | | | | | | not be | | | | | | | mixed up | | | | | | | with the | | | | | | | Control | | | | | | | Flags | | | | | | | which | | | | | | | are | | | | | | | spo | | | | | | | ntaneous | | | | | | | orders. | +----------+----------+----------+----------+----------+----------+ | NOTE: | | | | | | | The | | | | | | | \"LCLS | | | | | | | Cor | | | | | | | relation | | | | | | | Estab | | | | | | | lished\" | | | | | | | can be | | | | | | | received | | | | | | | even | | | | | | | when the | | | | | | | Cor | | | | | | | relation | | | | | | | Request | | | | | | | i | | | | | | | ndicated | | | | | | | \"Do not | | | | | | | corr | | | | | | | elate\", | | | | | | | only | | | | | | | because | | | | | | | the | | | | | | | cor | | | | | | | relation | | | | | | | was | | | | | | | r | | | | | | | equested | | | | | | | simult | | | | | | | aneously | | | | | | | on the | | | | | | | other | | | | | | | call | | | | | | | leg. | | | | | | | Possible | | | | | | | other | | | | | | | reasons | | | | | | | are FFS | | | | | | | in stage | | | | | | | 3. | | | | | | +----------+----------+----------+----------+----------+----------+
> Editor\'s Note: Other LCLS-Configuration settings may exist but need to be
> described in the TR first for example Connect One-way Forward, Connect One-
> way Backward,Connect One-way Forward Bicast,Connect One-way backward Bicast.
>
> Editor\'s Note: LCLS Not Allowed is currently not included in the LCLS-
> Configuration as it is assumed that no LCLS information elements will be
> included in any BSSAP message if the LCLS Negotiation results in LCLS Not
> Allowed. This needs to be further considered (esp GERAN 2).
# 16\. Conclusions and Recommendations
Through the preceding technical investigation within this technical report, it
is concluded that providing Local Call Local Switch functionality is
achievable with functionality both with the BSS and the Core Network.
It is recommended to 3GPP that the necessary detail within this report related
to fundamental functionality is used as a basis for further technical work
within the Release 10 timeframe. Fundamental functionality is defined below:-
\- Ability to (re-)Establish Local Call Local Switch
\- Call Leg Correlation
\- Signaling on A-interface and within Core Network
\- Impacts to User Plane
\- Lawful Intercept
\- Ability to Break LCLS
It is further recommended that Stage 2 and Stage 3 work be specified within
existing specifications as defined within Annex A.
It is also recommended to 3GPP that further technical investigation and
specification is required within the Release 11 timescale in order to progress
further enhancements to LCLS e.g. Impacts of LCLS to some Supplementary
Services and Existing Features, optional package to notify MGW that call is
local call local switch, enhanced solution for mid-call tones/announcements.
It is viewed that if time permits and solutions can be agreed upon, normative
standardization of these enhancements to LCLS can also be considered within
Release 10. This can be handled on a case by case basis.
###### ## Annex A (informative): Impacts to Specifications
Table A.1 identifies the existing specifications within CT Working Groups that
require modification to define LCLS.
Table A.1
* * *
Existing Specification Responsible WG Brief summary of impacts 3GPP TS 23.205
[8] CT4 Reference to the new Stage 2 specification for call flows and
procedures to introduce LCLS core network functionality in a BICC based CS
Core Network. 3GPP TS 23.231 [12] CT4 Reference to the new Stage 2
specification for call flows and procedures to introduce LCLS core network
functionality into a SIP-I based CS Core Network, 3GPP TS 29.205 [15] CT4
Creation of the LCLS APP 3GPP TS 29.002 [16] CT4 Extension to MAP for LCLS-
Status for the Inter-MSC Handover scenario 3GPP TS 23.003 [17] CT4 Definition
of BSS ID 3GPP TS 29.232 [18] CT4 Definition of optional package to notify MGW
of local call local switch
* * *
Table A.2 identifies the new specifications that are required to define LCLS.
Table A.2
+-------------------------+----------------+-------------------------+ | New Specification | Responsible WG | Brief summary of | | | | impacts | +-------------------------+----------------+-------------------------+ | 3GPP TS 23.abc | CT4 | New TS to specify the | | | | call flows and | | Local Call Local | | procedures for Call | | Switch; Stage 2 | | Establishment, | | | | Handover, etc. | | | | | | | | Level of support of | | | | Supplementary Services | | | | and existing Features. | | | | | | | | The TS does not intend | | | | to specify the protocol | | | | impacts related to | | | | GERAN specifications. | +-------------------------+----------------+-------------------------+
#