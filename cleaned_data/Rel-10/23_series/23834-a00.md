# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The objective of this feasibility study is to investigate solutions and
benefits for supporting a new GTP option for S2b network based mobility.
The study will develop the stage 2 message flows necessary to support S2b
based on GTP and mobility between S5/S8 based on GTP and S2b based on GTP.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 41.001: \"GSM Release specifications\".
[3] 3GPP TS 23.401: _\"_ GPRS Enhancements for E-UTRAN Access _\"_.
[4] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[5] 3GPP TS 29.273: \"Evolved Packet System (EPS); 3GPP EPS AAA interfaces\".
[6] 3GPP TS 23.002: \"Network architecture\".
[7] 3GPP TS 23.203: \"Policy and Charging Control Architecture\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Architectural requirements
Applying GTP based S2b as opposed to PMIP based S2b shall have no impact to
the UE.
The impacts to the existing functionalities and to the EPC shall be minimized.
The protocol design on S2b should aim at keeping S2b GTP operations similar to
those supported on GTP-based S5/S8 as much as possible.
The GTP S2b option is expected to be functionally equivalent to the already
existing PMIP S2b option.
# 5 Solutions for GTP based S2b
## 5.1 Solution 1
### 5.1.1 Architecture
The same architecture reference models as those defined in TS 23.402 [4] can
be applied to GTP based S2b, with the following differences:
\- BBERF is not required with GTP based S2b;
\- Gxb interface is not required between the PCRF (or vPCFR) and the ePDG;
\- vPCRF (and S9 interface) is not required for roaming with Home Routed
traffic (i.e. non-LBO traffic);
\- a new roaming architecture is defined for EPS using S8, S2b (chained GTP-
based S8-S2b) for Home Routed traffic (equivalent to the existing chained
PMIP-based S8-S2b roaming architecture), where the S-GW serves as anchor
point.
Figures 5.1.1-1 to 5.1.1-4 show the baseline architecture reference model for
GTP based S2b in the non roaming and roaming cases.
Figure 5.1.1-1: Non-Roaming Architecture within EPS using GTP based S2b
Figure 5.1.1-2: Roaming Architecture for EPS using GTP based S8, S2b - Home
Routed
Figure 5.1.1-3: Roaming Architecture for EPS using GTP-based S8, S2b (Chained
GTP-based S8-S2b) - Home Routed
NOTE: Chained S2a/S2b and S8 used when VPLMN has business relationship with
Non-3GPP Networks and SGW in VPLMN includes local non-3GPP Anchor.
Figure 5.1.1-4: Roaming Architecture for EPS using GTP based S5, S2b -- Local
Breakout
### 5.1.2 Functional description
#### 5.1.2.1 Bearer model
Support of QoS differentiation on the SWu interface is not required within the
scope of the present study (this is functionally equivalent to the PMIPv6
based S2b).
However the protocol design on S2b should aim at keeping S2b GTP operations
similar to those supported on GTP-based S5/S8 as much as possible.
It is proposed to apply to the S2b interface the following GTP bearer model.
Figure 5.1.2.1-1: Bearer model on GTP based S2b
For untrusted non-3GPP access to the EPC the PDN connectivity service is
provided by IPsec connectivity between the WLAN UE and the ePDG concatenated
with bearer(s) for GTP-based S2b.
**On the S2b interface** , a bearer uniquely identifies traffic flows that
receive a common QoS treatment between the ePDG and the PDN GW. All traffic
mapped to the same bearer receive the same bearer level packet forwarding
treatment.
The ePDG stores the uplink bearer traffic flow template (UL TFT) it receives
from the PGW (e.g. in the Create Bearer Request message) and does not forward
them to the WLAN UE. The ePDG routes uplink packets to the different bearers
based on the uplink packet filters in the TFTs assigned to the bearers in the
PDN connection, similarly as what is done by UE for uplink traffic under 3GPP
access. If no match is found, the uplink data packet shall be sent via the
bearer that does not have any uplink packet filter assigned. If all bearers
(including the default bearer for that PDN) have been assigned an uplink
packet filter, the ePDG shall discard the uplink data packet.
The PGW uses the DL TFT for mapping traffic to a bearer in the downlink
direction, like done on GTP-based S5/S8.
The ePDG releases the IPsec tunnel when the last active GTP tunnel of the
associated PDN connection to the PGW is released.
**On the SWu interface** , the same interface is maintained between the WLAN
UE and the ePDG. No change to the existing standard.
The bearer model proposed on S2b is used for compatibility with GTP based
S5/S8, however the QoS functionality is not supported within the scope of this
work, i.e. the Bearer QoS parameters in GTP signalling are not functionally
required. This is in principle similar to PMIP based S2b for which a Gxb
reference point is defined in the network architecture but not \"active\" yet.
This bearer model allows one or multiple bearers to be setup on S2b per
operator\'s policy. The PCRF (if dynamic PCC is deployed) or the PGW (if
dynamic PCC is not deployed) may use the RAT type to avoid triggering
establishment of dedicated bearers when the UE is under non 3GPP access.
The bearer model proposed in this solution is not similar to the PMIP bearer
model in that with GTP it is possible to have multiple tunnels per PDN. These
additional tunnels are just GTP behaviour alignment over S2b and S5/S8 and do
not extend over the SWu interface.
### 5.1.3 Information flows
NOTE: The exact list of parameters signalled in GTP S2b information flows will
be defined during normative work.
#### 5.1.3.1 Initial Attach with GTP on S2b
Figure 5.1.3.1-1: Initial attachment when GTP-based MM mechanism are used over
S2b for roaming, non-roaming and LBO
Principles are similar to those specified for the PMIP S2b call flow in clause
7.2.1 of TS 23.402 [4], but with GTP signalling:
> 1) as per step 1 of clause 7.2.1 of TS 23.402 [4], with the following
> additions:
\- during the Tunnel Authentication and Authorization procedure the ePDG shall
provide information on its GTP capabilities to the 3GPP AAA Server;
\- upon a successful authorization, when authorizing GTP, the 3GPP AAA server
shall return the same information as it returns when PMIPv6 is used plus the
following information:
\- APN-AMBR;
\- EPS-Subscribed-QoS-Profile (which defines the default bearer QoS for the
APN);
\- Trace Information (Trace Reference, Trace Type, Trigger Id, OMC Identity).
\- the ePDG selects the PGW as per the existing PGW selection procedure; if
the ePDG receives a PGW Identity under the form of a FQDN, it shall derive it
to an IP address according to the selected mobility management protocol (here
GTP).
NOTE 1: APN-AMBR, EPS-Subscribed-QoS-Profile and Trace Information are
currently not downloaded to the ePDG on the SWm interface (see Table
7.1.2.1.1/2 of TS 29.273 [5]) but directly to the PGW via the S6b interface
(see Table 9.1.2.2.1/2 of TS 29.273 [5]).
NOTE 2: As per existing principles, to support separate PDN GW addresses at a
PDN GW for different mobility protocols (e.g. PMIP, MIPv4 or GTP), the PDN GW
Selection function takes mobility protocol type into account when deriving PDN
GW address by using the Domain Name Service function.
NOTE 3: PMIP and DSMIPv6 are the only mobility capabilities which are
signalled currently on the SWm, SWx and S6b interfaces. Signalling GTP
mobility capability on those interfaces enables the 3GPP AAA Server/Proxy to
take into account the ePDG and subscription profile mobility capabilities
during the authorization procedure and to possibly enforce a specific mobility
protocol on S2b between the respective PLMNs (e.g. based on SLA). E.g. the AAA
Server would only grant authorization for GTP on S2b when both ePDG and PGW
support GTP and PMIP on S2b, but SLA between the HPLMN and VPLMN requests use
of GTP. This also enables the AAA Server/Proxy to download the appropriate
information in AAA responses.
> 2) The ePDG sends a Create Session Request (IMSI, APN, RAT type, ePDG TEID
> of the control plane, PDN Type, PDN Address, EPS Bearer Identity, Default
> EPS Bearer QoS, ePDG Address for the user plane, ePDG TEID of the user
> plane, APN-AMBR, Protocol Configuration Options, Selection Mode, Dual
> Address Bearer Flag, Trace Information) message to the PGW. The RAT type
> indicates the non-3GPP IP access technology type. The PDN Type shall be set
> based on the CFG_Request in step 1 and subscription profile. The PGW creates
> a new entry in its EPS bearer context table and generates a Charging Id. The
> new entry allows the PGW to route user plane PDUs between the ePDG and the
> packet data network, and to start charging.
>
> 3 ) as per step 3 of clause 7.2.1 of TS 23.402 [4];
>
> 4) as per step 4 of clause 7.2.1 of TS 23.402 [4], with the following
> addition:
\- the PGW shall indicate use of GTP in the Authorization Request sent to the
3GPP AAA Server/Proxy; the 3GPP AAA Server shall return the same AVP
signalling GTP if the authorization was successful.
> 5) The PDN GW returns a Create Session Response (PDN GW Address for the user
> plane, PDN GW TEID of the user plane, PDN GW TEID of the control plane, PDN
> Type, PDN Address, EPS Bearer Identity, EPS Bearer QoS, Protocol
> Configuration Options, APN-AMBR, Cause) message to the ePDG, including the
> IP address(es) allocated for the UE.
The PGW may initiate the creation of dedicated bearers on GTP based S2b (like
it may do it on GTP based S5/S8 for an Attach on 3GPP access).
> 6 to 8) as per steps 6 to 8 of clause 7.2.1 of TS 23.402 [4].
#### 5.1.3.2 Detach and PDN Disconnection with GTP on S2b
Figure 5.1.3.2-1: UE/ePDG - initiated detach procedure with GTP
Principles are similar to those specified for the PMIP S2b call flow in clause
7.4.1 of TS 23.402 [4], but with GTP signalling:
> 1) as per step 1 of clause 7.4.1 of TS 23.402 [4];
>
> 2) The active Bearer(s) in the ePDG regarding this particular UE and PDN
> connection are deactivated by the ePDG sending a Delete Session Request
> (Linked EPS Bearer ID) to the PGW for the related PDN connection.
>
> 3 to 4) as per steps 3 to 4 of clause 7.4.1 of TS 23.402 [4];
>
> 5) The PDN GW acknowledges with Delete Session Response (Cause);
>
> 6) as per step 6 of clause 7.4.1 of TS 23.402 [4].
{width="6.434722222222222in" height="2.604861111111111in"}
Figure 5.1.3.2-2: HSS/AAA-initiated detach procedure with GTP
Principles are similar to those specified for the PMIP S2b call flow in clause
7.4.2 of TS 23.402 [4], but with GTP signalling:
> 1) as per step 1 of clause 7.4.2 of TS 23.402 [4];
>
> 2) This include the procedure after step1 as Figure 5.1.3.2-1. For multiple
> PDN connectivity, this step shall be repeated for each PDN connected;
>
> 3) as per step 3 of clause 7.4.2 of TS 23.402 [4].
#### 5.1.3.3 UE-initiated Connectivity to Additional PDN with GTP on S2b
Same scenario as for Initial Attach (see clause 5.1.3.1). The UE establishes a
separate SWu instance (i.e. a separate IPSec tunnel) for each additional PDN.
The ePDG allocates a Bearer Id for and initiates a GTP Create Session
Request/Response messages towards the PGW for each new PDN connection.
#### 5.1.3.4 Handover (without optimization) from untrusted Non-3GPP access to
3GPP access
Figure 5.1.3.4-1: Untrusted Non-3GPP IP Access to E-UTRAN Handover
Principles are similar to those specified for the PMIP S2b call flow in
clauses 8.2.1.1 & 8.2.1.3 of TS 23.402 [4], but with GTP signalling:
> 1) The UE uses an untrusted non-3GPP access system and is being served by
> PDN GW.
>
> 2 to 6) as per steps 2 to 6 of clause 8.2.1.1 of TS 23.402 [4];
>
> 7) as per step 7 of clause 8.2.1.1 of TS 23.402 [4] with the following
> precisions:
\- the PGW receives a Create Session Request carrying a \'handover
indication\' (relying on the existing specification/protocol), for an IMSI for
which it already has an existing GTP session via S2b.
\- Since an Handover Indication is included, the PDN GW should not switch the
tunnel from non-3GPP IP access to 3GPP access system at this point. The PGW
shall accept the creation of the new (so far inactive) S5/S8 session, while
maintaining the active GTP session on S2b. This is similar in principles to
today\'s PGW behaviour creating an inactive S5/S8 session while maintaining
the S2b PMIP tunnel.
NOTE: This however implies some modifications to the context information in
the PGW since different to the current GTP model which supports only one GTP-C
tunnel per PDN connection.
8 to 18) as per steps 8 to 18 of clause 8.2.1.1 of TS 23.402 [4];
\- the PGW switches user traffic from the S2b GTP to the S5/S8 GTP tunnel in
step 13.
\- the PGW may create dedicated bearers during this procedure, as per existing
specifications for the Handover between PMIP S2b and GTP based S5/S8.
#### 5.1.3.5 Handover (without optimization) from 3GPP access to untrusted
Non-3GPP access
Figure 5.1.3.5-1: E-UTRAN to Untrusted Non-3GPP IP Access Handover
Principles are similar to those specified for the PMIP S2b call flow in clause
8.2.3 of TS 23.402 [4], but with GTP signalling:
> 1 to 3) as per steps 1 to 3 of clause 8.2.3 of TS 23.402 [4];4) The ePDG
> sends a Create Session Request (IMSI, APN, Handover Indication, RAT type,
> ePDG TEID of the control plane, ePDG Address for the user plane, ePDG TEID
> of the user plane) message to the PGW. The RAT type is set to a value
> matching the characteristics of the non-3GPP IP access. If the UE supports
> IP address preservation and included the address in step 3, the ePDG sets
> the \'Handover Indication\' in the Creation Session Request to allow the PGW
> to re-allocate the same IP address or prefix that was assigned to the UE
> while it was connected to the 3GPP IP access and to initiate a PCEF-
> Initiated IP CAN Session Modification Procedure with the PCRF.
NOTE 1: The \'Handover Indication\' as defined so far in the GTPv2
specification indicates a handover from a non-3GPP to 3GPP access. This leads
the PGW, among others, to delay switching DL user plane traffic from non-3GPP
to 3GPP until a Modify Bearer Request is received. In the E-UTRAN to untrusted
non 3GPP IP access handover scenario above, the \'Handover Indication\' will
signal a handover from 3GPP to non-3GPP access, and should not delay the
switching of DL user plane traffic from 3GPP to non-3GPP access.
> 5) as per step 5 of clause 8.2.3 of TS 23.402 [4];
>
> 6) The PDN GW responds with a Create Session Response (PDN GW Address for
> the user plane, PDN GW TEID of the user plane, PDN GW TEID of the control
> plane, PDN Type, PDN Address, EPS Bearer Identity, EPS Bearer QoS, Protocol
> Configuration Options, APN-AMBR, Cause) message to the ePDG. The Create
> Session Response contains the IP address or the prefix that was assigned to
> the UE while it was connected to the 3GPP IP access.
>
> 7) as per step 5 of clause 8.2.3 of TS 23.402 [4];
>
> 8) At the end of the handover procedure there is a default bearer for the UE
> that consists of an IPsec tunnel between the UE and the ePDG and a GTP
> tunnel between the ePDG and the PDN GW;
>
> 9 to 10) as per steps 9 to 10 of clause 8.2.3 of TS 23.402 [4].
The PGW may create dedicated bearers during this procedure (e.g. if dedicated
bearers had been setup on S5/S8 under the 3GPP access) based on its knowledge
of the bearers in place before the handover or on updated PCC policy rules.
The establishment of dedicated bearers in combination with the default takes
place as described in Annex F of TS 23.401 [3].
NOTE 2: These dedicated bearers are just GTP behaviour alignment over S2b and
S5/S8 and do not extend over the SWu interface.
### 5.1.4 Roaming aspects
Editor's Note: This clause will contain considerations on roaming aspects with
a GTP based S2b interface.
# 6 Evaluation
This technical report shows that it is feasible to support GTP on the S2b
interface with minimum impacts to EPC standards and implementations.
The study of the solution proposed in clause 5.1 can be considered completed
to the extent on making a decision on it and no major open issues have been
identified.
BBERF and Gxb are not required with GTP-based S2b.
Deployment of an S9 interface is not required for roaming with home routed
traffic.
In all scenarios, the same UE functionalities are required for GTP based S2b
as for PMIP based S2b.
# 7 Conclusion
Through the preceding technical analysis within this technical report, it is
concluded that providing a GTP based S2b interface as an alternative to the
existing PMIP based S2b definition is a feasible option, using the solution
proposed in clause 5.1.
Annex A identifies the SA WG2 specifications that require modifications to
define a GTP based S2b interface.
###### ### Annex A: Impacts on Existing SA WG2 Specifications
Table A.1
* * *
Existing Specification Responsible WG Brief summary of impacts TS 23.002 [6]
SA WG2 Addition of the option for the ePDG to support GTP on S2b. Addition of
the reference to TS 29.274 for the S2b interface. TS 23.402 [4] SA WG2
Addition of new procedures/call flows required to support GTP on the S2b
interface. Main new call flows are identified within clause 5.1.3. New call
flows shall reference the existing PMIP S2b call flows to a large extent. TS
23.203 [7] SA WG2 Precise non-3GPP access specific aspects with GTP S2b: no
BBERF; no Gxb interface; no vPCRF (and S9 interface) for roaming with Home
Routed traffic (i.e. non-LBO traffic).
* * *
#