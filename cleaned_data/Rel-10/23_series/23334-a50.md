# Foreword {#foreword .TT}
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
Annex G of 3GPP TS 23.228 [2] gives out an IMS Application Level Gateway (IMS-
ALG) and IMS Access Media Gateway (IMS-AGW) based reference model to support
NAPT-PT, gate control and traffic policing between IP-CAN and IMS domain.
> Figure 1.1: Scope of the specification
Figure 1.1 illustrates the reference model for Iq:
\- the dashed line represents the IP signalling-path with SIP (at Gm) as
call/session control protocol between the UE and the P-CSCF (IMS-ALG);
\- the bold, horizontal line represents the IP media-path (also known as (IP)
bearer-path or (IP) data-path; the notion \'media\' is used as generic term
for \"IP application data\"); and
\- the vertical line represents the Iq control-path with H.248 as
gateway/policy control protocol between the IMS-ALG and the IMS-AGW (H.248
messages are transported over IP).
The Iq reference point is between the P-CSCF (IMS-ALG) and the IMS-AGW. It
conveys the necessary information that is needed to allocate, modify and
release (IP) transport addresses.
The present document defines the stage 2 description for the Iq reference
point. The stage 2 shall cover the information flow between the P-CSCF (IMS-
ALG) and IMS-AGW. The protocol used over the Iq interface is the gateway
control protocol according ITU-T Recommendation H.248 (which is specified for
Iq by an H.248 profile according 3GPP TS 29.334 [3]).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS), stage 2\".
[3] 3GPP TS 29.334: \"IMS Application Level Gateway (IMS-ALG) -- IMS Access
Gateway (IMS-AGW) Iq interface, stage 3\".
[4] IETF RFC 2663: \"IP Network Address Translator (NAT) Terminology and
Considerations\".
[5] 3GPP TS 32.260: \"Telecommunication management; Charging management; IP
Multimedia Subsystem (IMS) charging\".
[6] IETF RFC 3556: \"Session Description Protocol (SDP) Bandwidth Modifiers
for RTP Control Protocol (RTCP) Bandwidth\".
[7] IETF RFC 3605: \"Real Time Control Protocol (RTCP) attribute in Session
Description Protocol (SDP)\".
[8] 3GPP TS 23.205: \"Bearer independent circuit-switched core network; Stage
2\".
[9] ITU-T Recommendation H.248.1 (05/2002): \"Gateway Control Protocol:
Version 2\" including the Corrigendum1 for Version 2 (03/04).
[10] IETF RFC 2216: \"Network Element Service Template\".
[11] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and
SDP\".
[12] 3GPP TS 33.328: \"IMS Media Plane Security\".
[13] IETF RFC 4568: \"Session Description Protocol (SDP) Security Descriptions
for Media Streams\".
[14] IETF RFC 3711: \"The Secure Real-time Transport Protocol (SRTP)\".
[15] IETF RFC 5124: \"Extended Secure RTP Profile for Real-time Transport
Control Protocol (RTCP)-Based Feedback (RTP/SAVPF)\".
[16] IETF RFC 3168: \"The Addition of Explicit Congestion Notification (ECN)
to IP\".
[17] IETF RFC 6679: \"Explicit Congestion Notification (ECN) for RTP over
UDP\".
[18] 3GPP TS 23.237: \"IP Multimedia subsystem (IMS) Service Continuity; Stage
2\".
[19] 3GPP TS 24.237: \"IP Multimedia subsystem (IMS) Service Continuity; Stage
3\".
[20] 3GPP TS 29.162: \"Interworking between the IM CN subsystem and IP
networks\".
[21] 3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia Telephony;
Media handling and interaction\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Network Address Translation (NA(P)T):** see definition in 3GPP TS 23.228
[2].
**NAT-PT/NAPT-PT:** see definition in 3GPP TS 23.228 [2].
**Local (near-end) NAPT control:** the operation of providing network address
mapping information and NAPT policy rules to a near-end NAT in the media flow.
**Remote (far-end) NAT traversal:** the operation of adapting the IP addresses
so that the packets in the media flow can pass through a far-end (remote) NAT.
**\ NAPT control and NAT traversal** : controls network address translation
for both near-end NA(P)T and far-end NA(P)T
**Convention:**
Wherever the **term NAT** is used in this specification, it may be replaced by
**NA(P)T or NA(P)T-PT.**
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.237 [18] apply:
**Access Leg**
**Access Transfer Control Function (ATCF)**
**Access Transfer Gateway (ATGW)**
**Remote Leg**
**Target Access Leg**
**Source Access Leg**
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Iq Interface between the IMS Application Level Gateway and the IMS Access
Media Gateway
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
ATCF Access Transfer Control Function
ATGW Access Transfer Gateway
e2ae security End-to-access-edge security
e2e security End-to-end security
ECN Explicit Congestion Notification
ECN-CE ECN Congestion Experienced
IMS-AGW IMS Access Media Gateway
IMS-ALG IMS Application Level Gateway
IM CN IMS Core Network
NA(P)T Network Address and optional Port Translation
NAPT Network Address Port Translation
NAT Network Address Translation
NA(P)T-PT NAT Address (and optional Port-) Translation and Protocol
Translation
P-CSCF Proxy-CSCF
SRVCC Single Radio Voice Call Continuity
# 4 Architecture
## 4.1 Reference architecture
The reference architecture for the IMS-ALG and the IMS-AGW when NAT is invoked
between the UE and the IMS domain is shown in figure 4.1.1 below.
> Figure 4.1.1: Reference Architecture with NAT invoked between the UE and the
> IMS domain
See 3GPP TS 23.228 [2] Annexes G.1 and G.2 for a comprehensive description of
the reference models.
The reference architecture for the IMS-ALG and the IMS-AGW supporting the
ATCF/ATGW function is shown in figure 4.1.2 below.
> Figure 4.1.2: Reference Architecture for IMS-ALG/IMS-AGW with ATCF/ATGW
> function
See 3GPP TS 23.237 [18] subclause 5.2 for a comprehensive description of the
reference model.
## 4.2 NAT Function
An operator may need NAT function between UE and IMS domain. Such function can
be provided by the IMS-AGW and can be called local (near-end) NAT or IM CN
hosted NAT (see subclause 5.2). There can also be an independent NAT device
between UE and IMS domain (see subclause 5.4), referred as remote (far end)
NAT. Thus the IMS-AGW shall support remote NA(P)T traversal.
Figure 4.1.1 illustrates the particular IP media-path scenario with both a
remote NAT and local NAT function. Each NAT function is partitioning an IP
domain into two address domains, or partitioning the used IP address space
(realm) into two realms.
The reference architecture of Figure 4.1.1 may be mapped on various network
scenarios, like e.g. to three IPv4 realms, indicated by a) IP-CAN
(connectivity access network), b) (Media) Access Domain and c) (Media) IM CN
domain. If there would not be any remote NAT device between the UE and IMS-
AGW, then there would be just two IP domains (a and c).
The two types of NATs are also typically different from control perspective:
local (near-end) NAT can be controlled by the operators directly, and remote
(far-end) NAT that cannot be controlled by the operators directly.
The support of local NAT is thus implicitly leading to the requirement for IP
realm indication at Iq (see subclause 5.3).
The edge node of the IP-CAN may be a remote (far-end) NAT device (see Figure
4.1.1). This NAT device provides NAT or NAPT or NA(P)T-PT for IP traffic in
the media-path and signalling path (e.g. IP network addresses and possibly L4
transport port values may be translated of SIP Gm messages).
The remote NAT device cannot be directly controlled by the operators of the
(Media) Access and IP CN domain. The IMS-ALG is consequently lacking the
direct information with regards to the applied NAT bindings by the remote NAT
device.
## 4.3 ATCF/ATGW Function
The ATCF/ATGW functions may be supported by the IMS-ALG/IMS-AGW when SRVCC
enhanced with ATCF is used. In this case, the Iq reference point is used for
IMS sessions that the IMS-ALG (ATCF) decides to anchor at the IMS-AGW (ATGW)
to provide the following functions:
  * reservation and configuration of IMS-AGW (ATGW) resources for media anchoring during PS session origination or termination;
  * reconfiguration of IMS-AGW (ATGW) resources during access transfer to the CS domain;
  * release of IMS-AGW (ATGW) resources upon completion of the access transfer or release of the session;
  * media transcoding if the media that was used prior to the access transfer is not supported by the MSC server;
  * IP version interworking if different IP versions are used between the access and the remote legs;
  * Indication of IP realm during allocation of transport addresses/resources (the PS and CS accesses may be reachable via different IP realms);
  * the ability to configure ECN properties towards the transferred to Access if ECN is supported/requested;
  * the ability to reconfigure the ECN mode e.g. from ECN transparent to ECN endpoint towards the IMS CN if ECN transparent cannot be maintained after access transfer to the CS domain.
See 3GPP TS 23.237 [18] and 3GPP TS 24.237 [19] for a comprehensive
description of the ATCF and ATGW functions.
# 5 Functional Requirements
## 5.1 General
A single IMS-ALG may control one or multiple IMS-AGW(s).
## 5.2 Gate Control & Local NAT
The IMS-ALG shall provide the NAPT control function, i.e. obtain the address
binding information (according to IETF RFC 2663 [4]) and perform the NAPT
policy control along with gate control (i.e. instruct the opening/closing of a
gate).
The IMS-ALG shall request the IMS-AGW to allocate transport
addresses/resources to enable media to traverse the IMS-AGW. The IMS-ALG may
indicate the corresponding IP realm to the IMS-AGW -- see subclause 5.3. The
IMS-AGW shall provide the corresponding external transport addresses to the
IMS-ALG.
Terminations for the Iq interface may be pre-defined with different levels of
granularity for specific IP ports, interfaces, or groups of interfaces. These
may then be defined as an IP realm (see subclause 5.3) known by both the IMS-
ALG and the IMS-AGW, however IP Realms may also be defined for multiple
physical interfaces. In order to efficiently report a failure affecting a
large number of terminations associated to specific physical interfaces, the
IMS-AGW shall, when allocating a new termination, return to the IMS-ALG an
associated Interface ID.
An IMS-AGW not supporting this procedure may allocate the same Interface ID
for all IP terminations.
An IMS-AGW supporting the Termination Out-of-Service procedure (see subclause
6.1.15) shall maintain a local mapping of Interface ID to its internal
resources.
The IMS-AGW shall provide the NAPT enforcement function, i.e. change the
address and port number of the media packets as they traverse the IMS-AGW,
along with gate control (i.e. open/close a gate under the control of the IMS-
ALG).
The IMS-AGW may provide IP version inter-working.
The IMS-ALG shall request the IMS-AGW to release its transport resources at
the end of a session.
## 5.3 IP realm indication and availability
The IMS-ALG and the IMS-AGW shall support IP realm indication.
The IMS-ALG, when requesting the allocation of transport resources at the IMS-
AGW, may indicate the correspondent IP realm to the IMS-AGW. The IMS-AGW shall
assign the IP termination in the IP realm indicated. The same IP realm shall
be applied to all media streams associated with the termination. The IP realm
identifier cannot be changed after the initial assignment.
A default IP realm may be configured such that if the IMS-AGW has not received
the IP realm identifier and the IMS-AGW supports multiple IP realms then the
default IP realm shall be used.
In order to prevent the IMS-ALG requesting an unavailable IP Realm, the IMS-
ALG may audit the list of currently available realms on the IMS-AGW and may
request the IMS-AGW to report any changes to that list as they occur over
time.
The monitoring of IP realm availability is optional and if supported by IMS-
AGW may be requested by the IMS-ALG.
## 5.4 Remote NAT traversal support
The IMS-ALG and the IMS-AGW shall support remote NA(P)T traversal support.
The IMS-ALG is responsible for determining whether there is a remote NAT
device (the mechanism by which this achieved is out of scope of the current
document).
If a remote NAT device is present, the IMS-ALG shall request the IMS-AGW to
perform latching or re-latching when requesting the IMS-AGW to reserve
transport addresses/resources.
If remote NAT is applicable, the IMS-AGW shall not use the remote media
address/port information (supplied by the IMS-ALG) as the destination address
for outgoing media. Instead, the IMS-AGW shall dynamically learn the required
destination address via the source address/port of incoming media. This
mechanism is known as \"latching\".
When remote NAT Traversal is applied to a stream associated with multiple
flows (e.g. RTP and RTCP), the IMS-AGW shall perform individual latching
and/or re-latching on the various flows. This means that an RTP and an RTCP
flow of a single stream can be latched to different remote addresses and/or
ports.
## 5.5 Remote Source Address/Port Filtering
The IMS-ALG may support and the IMS-AGW shall support policing of the remote
source address/port of incoming media flow(s).
The IMS-ALG may determine that the source address/port of received media
packets should be policed.
When the IMS-ALG requests the IMS-AGW to reserve transport
addresses/resources, the IMS-ALG may indicate to the IMS-AGW that policing of
source address and/or port of received media packets is required.
If such policing is applicable, the IMS-AGW shall check the source address
and/or port of all received media packets and silently discard any packets
that do not conform to the expected source address and/or port.
## 5.6 Traffic Policing
The IMS-ALG may support traffic policing of incoming media flows.
The IMS-AGW shall support traffic policing of the maximum average bitrate,
defined as sustainable data rate (see IETF RFC 2216 [10]) of incoming media
flows and may support traffic policing of the peak data rate of incoming media
flows.
The IMS-ALG may require the IMS-AGW to police the media flows to ensure that
they conform to the expected data rates.
When the IMS-ALG requests the IMS-AGW to reserve transport
addresses/resources, the IMS-ALG may indicate to the IMS-AGW that policing of
the related media streams is required and provide traffic policing related
parameters as detailed in subclause 6.2.5.
If such policing is requested, the IMS-AGW shall police the corresponding
media streams as detailed in subclause 6.2.5 by measuring the data rate for
the received packets within that media stream. If the permissible data rate
provided by the IMS-ALG is exceeded, the IMS-AGW shall discard packets to
reduce their data rate to the permissible data rate.
For RTP flows where RTCP resources are reserved together with the RTP
resources (see subclause 5.9), the permissible data rate shall include the
bandwidth used by RTP and RTCP together.
## 5.7 Hanging Termination Detection
The IMS-ALG and the IMS-AGW shall support detection of hanging termination.
The IMS-ALG, when requesting the IMS-AGW to reserve an AGW connection point,
shall indicate to the IMS-AGW to perform detection of hanging terminations.
The IMS-AGW shall determine a termination to be hanging if there is no
signalling sent/received within a specified period.
On being informed of the hanging termination, the IMS-ALG shall
check/determine whether the cited termination is valid and initiate any
appropriate corrective action, e.g. release an invalid termination.
## 5.8 QoS Packet Marking
The IMS-ALG may support and the IMS-AGW shall support control via the Iq
interface of the setting of the DiffServ Code Point (DSCP) for media packets
sent on a termination.
When the IMS-ALG requests the IMS-AGW to reserve transport
addresses/resources, the IMS-ALG may indicate to the IMS-AGW that the DSCP of
outgoing media packets shall be explicitly set or copied from the DSCP of the
corresponding received packet.
If such modification of the DSCP is required by the IMS-ALG, the IMS-AGW shall
set the DSCP for outgoing packets on a termination.
## 5.9 Handling of RTCP streams
The IMS-ALG and the IMS-AGW shall support control via the Iq interface of the
specific RTCP behaviour associated to an RTP flow.
When the IMS-ALG requests the IMS-AGW to reserve transport addresses/resources
for an RTP flow, the IMS-ALG should also request the IMS-AGW to reserve
resources for the corresponding RTCP flow, but may alternatively request the
IMS-AGW not to reserve resources for the corresponding RTCP flow. When the
IMS-ALG requests the IMS-AGW to reserve transport addresses/resources for a
non-RTP flow, the IMS-ALG shall not request the IMS-AGW to reserve resources
for an RTCP flow.
To request the IMS-AGW to reserve resources for an RTCP flow, the IMS ALG
shall provide the RTCP handling information element with a value indicating
that resources for RTCP shall be reserved.
To request the IMS-AGW not to reserve resources for an RTCP flow, the IMS ALG
shall either provide the RTCP handling information element with a value
indicating that resources for RTCP shall not be reserved or omit the RTCP
handling information element.
If the IMS-AGW receives the indication to reserve RTCP resources, the IMS-AGW
shall allocate a local port with even number for an RTP flow also reserve the
consecutive local port with odd number for the associated RTCP flow, and it
shall send and be prepared to receive RTCP.
If the IMS-AGW receives the indication to not reserve RTCP resources, or if it
does not receive any indication at all, it shall not allocate an RTCP port
when allocating a port for an RTP flow. The IMS-AGW shall not send any RTCP
packets and shall silently discard any received RTCP packets.
When RTCP resources are requested, the IMS-ALG may also specify:
\- the remote RTCP port, and optionally the remote address, where to send RTCP
packets; if not specified, the IMS-AGW shall send RCTP packets to the port
contiguous to the remote RTP port;
\- bandwidth allocation requirements for RTCP, if the RTCP bandwidth level for
the session is different than the default RTCP bandwidth as specified in RFC
3556 [6].
NOTE: In line with the recommendations of RFC 3605 [7], separate address or
non-contiguous RTCP port numbers will not be allocated by the IMS-ALG / IMS-
AGW.
The IMS-AGW shall return an error if it can not allocate the requested RTCP
resources.
## 5.10 Media Inactivity Detection
The IMS-ALG and the IMS-AGW may support the detection of inactive media flows.
The IMS-ALG may require an IMS-AGW that supports media inactivity detection to
detect if a media flow is inactive.
NOTE: The decision to apply or not media inactivity is general for all
sessions with the same media characteristics (i.e. not user specific). It is
for further study under which conditions inactivity media detection may be
requested.
When the IMS-ALG requests the IMS-AGW to reserve transport
addresses/resources, the IMS-ALG may indicate to the IMS-AGW that detection of
an inactive media flow is required and may additional specify inactivity
detection time and inactivity detection direction.
The IMS-AGW shall determine a media flow on termination to be inactive if
there is no media sent and/or received within the inactivity detection time
period.
On being informed of the inactive media, the IMS-ALG shall initiate any
appropriate corrective action.
## 5.11 IMS Media Plane Security
### 5.11.1 General
The IMS-ALG and the IMS-AGW may support IMS media plane security as specified
in 3GPP TS 33.328 [12]. They may support end-to-access edge security, or end-
to-end security, or both. If supported the IMS-ALG and the IMS-AGW shall use
the procedures in the following two subclauses.
NOTE: For the support of end-to-end security, the presence of an IMS-ALG is
not required.
### 5.11.2 End-to-access-edge Security
#### 5.11.2.1 End-to-access-edge security using SDES
Procedures for the IMS-ALG to determine if end-to-access edge security is
applicable to a session and to exchange cryptography related SDP parameters
with the served UE during the SIP session setup are specified in 3GPP TS
33.328 [12] and 3GPP TS 24.229[11].
For media lines that can be subject to e2ae security, the IMS-ALG will receive
\"RTP/AVP\" or \"RTP/AVPF\" as transport protocol in SDP from the core
network. When the IMS-ALG determines that e2ae security is applicable, it will
indicate \"RTP/SAVP\" (see IETF RFC 3711 [14]) or \"RTP/SAVPF\" (see IETF RFC
5124 [15]), respectively, as transport protocol in the corresponding SDP media
lines send towards the served UE. When e2ae security is applied, the IMS-ALG
will also receive \"RTP/SAVP\" or \"RTP/SAVPF\" in SDP from the served UE. The
IMS-ALG will then indicate \"RTP/AVP\" or \"RTP/AVPF\" respectively, as
transport protocol in the corresponding SDP media lines send towards the core
network. When the IMS-ALG requests the IMS-AGW to reserve transport
addresses/resources for media to which e2ae security is applicable, the IMS
ALG shall configure \"RTP/SAVP\" or \"RTP/SAVPF\" as transport protocol at the
access side termination. The IMS ALG shall configure \"RTP/AVP\" or
\"RTP/AVPF\" as transport protocol at the core network side termination for
media where e2ae security is applicable.
When the IMS-ALG determines that e2ae security is applicable, it will generate
appropriate cryptographic context parameters, in particular key(s), and will
transfer them to the served UE within SDES SDP \"crypto\" attribute(s)
according to IETF RFC 4568 [13]. The IMS-ALG will also receive cryptographic
context parameters, in particular key(s), from the served UE within SDES SDP
\"crypto\" attribute(s). When the IMS-ALG requests the IMS-AGW to reserve or
configure transport addresses/resources for media to which e2ae security is
applicable, the IMS-ALG shall provide cryptography related parameters as SDES
SDP \"crypto\" attributes applicable at the access side termination.
On the originating side of the SIP session setup, the IMS-ALG shall provide as
\"Remote cryptographic SDES attribute\" the SDES crypto attribute it selected
from the ones received from the IMS UE in the SDP Offer . The IMS-ALG shall
provide as \"Local cryptographic SDES attribute\" the SDES crypto attribute
the IMS-ALG generated and inserted in the SDP Answer sent to IMS UE.
On the terminating side of the SIP session setup, the IMS-ALG shall provide as
\"Remote cryptographic SDES attribute\" the SDES crypto attribute received
from the IMS UE in the SDP Answer. The IMS-ALG shall provide as \"Local
cryptographic SDES attribute\" the SDES crypto attribute selected by the UE
from the ones the IMS-ALG generated and inserted in the SDP Offer sent to UE.
If the IMS-ALG offers only one SDES crypto attribute to the UE, the IMS-ALG
may provide this attribute as \"Local cryptographic SDES attribute\" within
the Reserve AGW Connection Point Procedure before receiving the SDP answer
from the UE.In the present release, a modification of an established e2ae
crypto session is not supported. Thus, the IMS-ALG shall not modify any
previously provided \"Local cryptographic SDES attribute\" or \"Remote
cryptographic SDES attribute\".
The IMS Access GW shall, upon reception of an SDES crypto attribute, establish
an SRTP security context (as described in RFC 4568 [13] and RFC 3711 [14]) and
be prepared to convert RTP packets to SRTP packets and vice versa, using the
corresponding SRTP security contexts.
### 5.11.3 End-to-end Security
For the support of e2e-security, IMS-ALG and IMS-AGW shall support
\"RTP/SAVP\" (see IETF RFC 3711 [14]) and/or \"RTP/SAVPF\" (see IETF RFC 5124
[15]) as transport protocol.
If the IMS-ALG receives SDP containing media lines with \"RTP/SAVP\" (see IETF
RFC 3711 [14]) or \"RTP/SAVPF\" (see IETF RFC 5124 [15]) as transport
protocol, the IMS-ALG shall:
  * forward the SDP with unmodified transport protocol for those media lines;
  * provide \"RTP/SAVP\" or \"RTP/SAVPF\", as received in the SDP, to the IMS-AGW as transport protocol for all related terminations, and provide no media related information to these terminations, to configure the IMS-AGW to pass media transparently.
If the IMS-ALG receives SDP containing SDES SDP attribute(s) according to IETF
RFC 4568 [13] , and does not apply e2ae security, it shall forward the SDP
with unmodified SDES SDP attribute(s), but shall not provide the SDES SDP
attribute(s) to the IMS-AGW.
## 5.12 Explicit Congestion Notification support
### 5.12.1 General
An IMS-ALG and IMS-AGW may support Explicit Congestion Notification (see IETF
RFC 3168 [16], IETF RFC 6679 [17] and 3GPP TS 26.114 [21]).
An IMS-ALG and IMS-AGW which supports ECN shall support the ECN transparent
procedure i.e. the transparent forwarding of ECN bits in the IP header (see
IETF RFC 3168 [16]). If the IMS-AGW does not support the transparent
forwarding of ECN bits then the IMS-ALG shall not permit ECN in the SDP
Offer/Answer negotiation.
The IMS-AGW shall treat RTCP for ECN as a RTP translator with no media
translation.
An IMS-ALG and IMS-AGW which supports ECN may then act as an ECN endpoint to
enable ECN towards the IMS access network or/and towards the IMS Core Network.
The subsequent sub-sections describe the general support for ECN, further
details on the support of ECN during PS to CS access transfer is described in
sub-clause 6.2.14.3.
NOTE: It is out of the scope of this profile to support interworking with a
non-3GPP ECN IP terminal.
An IMS-ALG and IMS-AGW that support ECN Transparent as well as transcoding
shall also support the ECN endpoint procedure.
An IMS-ALG/IMS-AGW supporting the ATCF/ATGW function and ECN shall support ECN
Endpoint (see sub-clause 6.2.14).
When acting as an ECN endpoint, the IMS-AGW shall be capable of enabling end-
to-end rate adaptation between the local terminal and the remote entity by
performing the following towards the ECN-capable peer:
\- trigger rate adaptation request towards the ECN-capable peer when receiving
in the incoming IMS media flow IP packets marked with ECN-CE, regardless of
whether the IMS-AGW applies or does not apply transcoding;
\- forward adaptation requests between the local and the remote peer when the
IMS-AGW bridges compatible codec configurations between the interfaces without
applying a transcoding function;
\- perform media adaptation (e.g. reduce media bit-rate) towards the ECN-
capable peer when receiving from the latter an adaptation request. and the
IMS-AGW applies transcoding.
### 5.12.2 Incoming SDP offer with ECN
The IMS-ALG and IMS-AGW shall apply the requirements specified in clause
10.2.13.2 of 3GPP TS 29.162 [20] replacing the IBCF and TrGW with IMS-ALG and
IMS-AGW respectively.
### 5.12.3 Incoming SDP offer without ECN
The IMS-ALG and IMS-AGW shall apply the requirements specified in clause
10.2.13.3 of 3GPP TS 29.162 [20] replacing the IBCF and TrGW with IMS-ALG and
IMS-AGW respectively with the following additions:
\- if the IMS-ALG or IMS-AGW does not support the procedure to act as an ECN
endpoint, the IMS-ALG shall not include the \"a=ecn-capable-rtp\" attribute in
the SDP offer it forwards to the succeeding node.
### 5.12.4 Detection of ECN failures by IMS-AGW
An IMS-ALG and IMS-AGW that support the procedure to act as an ECN endpoint
shall support the requirements specified in clause 10.2.13.3a of 3GPP TS
29.162 [20] replacing the IBCF and TrGW with IMS-ALG and IMS-AGW respectively.
## 5.13 Transcoding
The transcoding functionality, where the IMS-AGW processes and possibly
converts media data (like e.g. RTP payload) is optional for the P-CSCF and
IMS-AGW to support. Transcoding should be supported if the IMS-ALG and IMS-AGW
support the ATCF and ATGW functions for use after an SRVCC handover if the
media that was used prior to the access transfer is not supported by the MSC
Server.
An IMS-ALG and IMS-AGW that support transcoding shall support the requirements
specified for Media Control in clause 10.2.5 of 3GPP TS 29.162 [20]
respectively for the IBCF and TrGW, with the following additions:
\- During an originating or terminating PS session establishment, the IMS-ALG
(ATCF) may remove codecs when passing SDP offers (e.g. codecs known not to be
supported by either the IMS-AGW (ATGW) or the MSC Server), but the IMS-ALG
(ATCF) should pass SDP offers without adding codecs to the SDP offer and pass
SDP answers without modification to the contained codecs to avoid the
potential need for transcoding in the IMS-AGW (ATGW) before the PS to CS
access transfer;
\- During the PS to CS access transfer procedure, the IMS-ALG (ATCF) shall
preferentially select from the SDP offer it receives from the MSC Server the
codec already configured on the corresponding remote leg, if available.
The procedures for the IMS-ALG (ATCF) and IMS-AGW (ATGW) are further detailed
in subclause 6.2.x.
# 6 IMS-ALG to IMS-AGW Procedures
## 6.1 Non-Call Related Procedures
### 6.1.1 General
The non-call related procedures are based on corresponding procedures of 3GPP
TS 23.205 [8] where the IMS-ALG takes the place of the MSC server and the IMS-
AGW takes the place of the MGW.
### 6.1.2 IMS-AGW Unavailable
The IMS-ALG server recognises that the IMS-AGW is unavailable in the following
4 cases:
1\. The signalling connection is unavailable
Figure 6.1.2.1: Signalling connection failure
2\. The IMS-AGW indicates the failure or the maintenance locking condition to
all connected IMS-ALG servers
Figure 6.1.2.2: IMS-AGW indicates the Failure/Maintenance locking
The failure or maintenance locking indication indicates that the IMS-AGW is
locked for new calls or will soon go out of service and that no new
connections should be established using this IMS-AGW. The IMS-AGW can choose
between the \"graceful\" and the \"forced\" method. In the graceful method the
connections are cleared when the corresponding calls are disconnected. In the
forced method all connection are cleared immediately.
  1. The IMS-ALG recognises that the IMS-AGW is not functioning correctly, e.g. because there is no reply on periodic sending of Audits. The periodic sending of Audits by IMS-ALG should go on.
In all of the above cases the IMS-ALG shall prevent the usage of the IMS-AGW
until the IMS-AGW has recovered or the communication with the IMS-AGW is
restored.
### 6.1.3 IMS-AGW Available
The IMS-ALG discovers that the IMS-AGW is available when it receives an IMS-
AGW Communication Up message or an IMS-AGW Restoration message. If the IMS-ALG
does not wish to sustain an association with the IMS-AGW, the response sent to
the IMS-AGW may indicate an alternative IMS-ALG signalling address, in which
case the IMS-AGW shall not consider itself registered and should preferably
attempt to re-register with this alternative IMS-ALG before any further
alternate IMS-ALGs. Otherwise, the response shall not indicate any alternative
IMS-ALG signalling address.
When the IMS-ALG discovers that the IMS-AGW is available the following shall
occur:
1\. Signalling recovery
The IMS-AGW indicates to all connected IMS-ALGs that the signalling connection
is restored.
Figure 6.1.3.1: Communication goes up
2\. IMS-AGW restoration/maintenance unlocking indication.
The IMS-AGW indicates to all connected IMS-ALGs that normal operation has
resumed.
Figure 6.1.3.2: IMS-AGW indicates recovery from a failure/or maintenance
unlocking
NOTE: This procedure may be used after recovery from a signalling failure.
3\. The IMS-ALG recognises that the IMS-AGW is now functioning correctly, e.g.
because there is a reply on periodic sending of Audits.
After this the IMS-ALG can use the IMS-AGW.
If none of 1, 2, and 3 happens the IMS-ALG server can initiate the IMS-ALG
Ordered Re-register procedure.
### 6.1.4 IMS-AGW Recovery
If the IMS-AGW recovers from a failure, is maintenance unlocked, or it has
been restarted, it registers to its known IMS-ALGs using the IMS-AGW
Restoration procedure or the IMS-AGW Registration procedure. The IMS-AGW can
indicate whether the Service has been restored or whether it has restarted
with a cold or warm boot. If the IMS-ALG does not wish to sustain an
association with the IMS-AGW, the response sent to the IMS-AGW may indicate an
alternative IMS-ALG signalling address, in which case the IMS-AGW shall not
consider itself registered and should preferably attempt to re-register with
this alternative IMS-ALG before any further alternate IMS-ALGs. Otherwise, the
response shall not indicate any alternative IMS-ALG signalling address.
Figure 6.1.4.1: IMS-AGW Restoration
Figure 6.1.4.2 IMS-AGW Registration
After the recovery the IMS-ALG can use the IMS-AGW.
### 6.1.5 IMS-ALG Recovery
#### 6.1.5.1 General
If an IMS-AGW-unavailable condition is provoked by a failure/recovery action,
the IMS-ALG recovery sequence will, from an information flow point of view,
look like IMS-AGW unavailable and then IMS-AGW available. If an IMS-AGW-
unavailable condition is not provoked, the IMS-ALG recovery sequence will look
like IMS-AGW available.
After the information flow, the terminations affected by the recovery action
are released.
#### 6.1.5.2 IMS-ALG Restoration
NOTE: Normal release procedure may also be initiated.
Figure 6.1.5.2.1: IMS-ALG Restoration
After the recovery action is complete and it is possible to signal to the IMS-
AGW the IMS-ALG starts a timer Tw. If recovery indications are not received
(IMS-AGW Communication Up or IMS-AGW Restoration) from the IMS-AGW during Tw
an Audit is sent. If the IMS-ALG receives a recovery indication or IMS-AGW
communication up indication, it shall acknowledge the indication before the
IMS-ALG Restoration may be sent or the release procedure is initiated.
### 6.1.6 IMS-AGW Re-register
When the IMS-ALG requests an IMS-AGW to perform a registration (see subclauses
6.1.3, 6.1.4 and 6.1.7), the IMS-AGW performs a re-registration to the IMS-ALG
which is defined in the IMS-ALG address.
Figure 6.1.6.1: Re-registration of an IMS-AGW
### 6.1.7 IMS-AGW Re-registration Ordered by IMS-ALG
If the IMS-ALG knows that communication is possible, but the IMS-AGW has not
registered, the IMS-ALG can order re-registration of the IMS-AGW.
Figure 6.1.7.1: Re-registration ordered by the IMS-ALG
If the re-registration request is accepted the IMS-AGW uses the IMS-AGW Re-
register procedure to register with the IMS-ALG.
### 6.1.8 Audit of IMS-AGW
#### 6.1.8.1 Audit of Value
The IMS-ALG may request the IMS-AGW to report the current values assigned to
distinct objects in the IMS-AGW. This procedure may be used when a change has
occurred in the IMS-ALG such that the IMS-ALG is unsure of the current Service
State of Terminations.
Figure 6.1.8.1.1: Audit Value
#### 6.1.8.2 Audit of Capability
The IMS-ALG may request the IMS-AGW to report the capabilities of distinct
objects in the MGW.
Figure 6.1.8.2.1: Audit Capability
### 6.1.9 IMS-AGW Capability Change
The IMS-AGW reports a change of capability of distinct objects in the MGW.
Figure 6.1.9.1: Capability Update
The IMS-ALG may use the Audit Value and/or Audit Capability procedures to
obtain further information, about the objects whose capabilities have changed.
### 6.1.10 IMS-ALG Out of service
Figure 6.1.10.1: IMS-ALG Out of Service
If an IMS-ALG discovers that it wants to go out of service it may start an
IMS-ALG Out of Service procedure. The IMS-ALG can indicate whether it requires
the context to be cleared immediately (forced) or cleared as the bearer
control protocol clears the bearer (Graceful).
### 6.1.11 IMS-AGW Resource Congestion Handling - Activate
When the IMS-ALG requires that an IMS-AGW congestion notification mechanism be
applied in the MGW, the IMS-ALG shall use the IMS-AGW Resource Congestion
Handling - Activate procedure towards the IMS-AGW.
Figure 6.1.11.1: IMS-AGW Resource Congestion Handling - Activate
### 6.1.12 MGW Resource Congestion Handling -Indication
When the IMS-ALG receives a load reduction notification from the IMS-AGW via
the IMS-AGW Resource Congestion Handling - Indication procedure, the IMS-ALG
tries to reduce the processing load that the IMS-ALG creates on the IMS-AGW.
The IMS-AGW shall decide the actual level of traffic reduction.
Figure 6.1.12.1: IMS-AGW Resource Congestion Handling -- Indication
### 6.1.13 Control association monitoring
Monitoring of the H.248 control association may be performed by monitoring the
status of the transport link association where the transport protocol provides
sufficient coupling to the H.248.1 protocol, i.e. if the transport link
association is disconnected when no local H.248.1 protocol connection exists.
An alternative method for the IMS-AGW to detect loss of the IMS-ALG may be
achieved by requesting the IMS-AGW to poll the IMS-ALG periodically
Upon registration of an IMS-AGW, the IMS-ALG may use the Inactivity Timeout -
Activate procedure towards the IMS-AGW to request the IMS-AGW to monitor
incoming messages for periods of silence exceeding the maximum inactivity
timer value.
Figure 6.1.13.1: Inactivity Timeout - Activate
Upon receipt of an inactivity timeout notification from the IMS-AGW via the
Inactivity Timeout - Indication procedure, the IMS-ALG shall send a reply to
the IMS-AGW. If the IMS-ALG has failed, the IMS-AGW will not receive a reply.
Figure 6.1.13.2: Inactivity Timeout - Indication
If no Inactivity Timeout -- Indication Ack reply is received, the IMS-AGW
shall consider the IMS-ALG to have failed. The IMS-AGW may then attempt to re-
contact its controlling IMS-ALG by performing IMS-AGW Communication Up. If not
successful, the IMS-AGW may then attempt to register to a new IMS-ALG.
### 6.1.14 Realm Availability Monitoring
If the IMS-AGW supports IP Realm Availability monitoring, the IMS-ALG may
request the monitoring of the available IP Realms by the IMS-AGW; the IMS-AGW
shall inform the IMS-ALG of any changes in realm availability.
NOTE: The IMS-ALG can use the AuditValue procedure to determine which IP
realms are currently available.
The IMS-ALG may use the Realm Availability - Activate procedure towards the
IMS-AGW to request the IMS-AGW to monitor the status of its IP Realms.
Figure 6.1.14.1: Realm Availability - Activate
The IMS-AGW shall inform the IMS-ALG via the Realm Availability --
Notification procedure.
Figure 6.1.14.2: Realm Availability - Indication
On being informed of newly available/unavailable realms, IMS-ALG shall take
appropriate action (e.g. update its list of available realms etc.).
### 6.1.15 Failure of IP Port, Interface or Group of Interfaces
This procedure only applies when text encoding is used on the H.248 interface.
The IMS-ALG shall and the IMS-AGW may support the Termination Out-of-Service
procedure.
If the IMS AGW suffers a loss of physical IP device(s) that pertain to a whole
IP Realm it may report the IP Realm as unavailable (see subclause 6.1.14).
However, it is possible that a failure affects a physical port or group of
ports that forms a subset of the IP Realm and therefore many terminations are
affected. In such cases the IMS-AGW may initiate a Termination Out of Service
procedure to inform the IMS-ALG that the set of terminations is out of
service. This is shown in Figure 6.1.15.1.
Figure 6.1.15.1: Termination Out of Service
On receipt of the Termination Out Of Service the IMS-ALG shall initiate the
appropriate actions, e.g. by subtracting the affected terminations and
releasing the affected calls.
NOTE: This procedure provides an alternative failure reporting to the IP
Bearer Released procedure (which allows reporting the failure of one IP Bearer
/ termination). The Termination Out-of-Service procedure avoids sending an
avalanche of notifications when the failure affects multiple ephemeral
terminations.
## 6.2 Call Related Procedures
### 6.2.1 Gate Control & Local NA(P)T procedure
The session establishment and session release procedures are specified in 3GPP
TS 23.228 [2] Annex G.4.3 and G.4.
Figure 6.2.1.2 depicts the signalling flow for a session setup from the IMS
access network towards the IMS core network when the Pâ€‘CSCF invokes the IMS-
ALG function for a session. The same signalling flow applies for a session
setup from the IMS core network towards the IMS access network with the
exception that terminations T1 and T2 are then exchanged.
Figure 6.2.1.1: H.248 Context Model
Figure 6.2.1.2: IMS-ALG and IMS-AGW interaction at session establishment
Upon receipt of a session initiation request, the IMS-ALG shall extract the
offerer\'s destination network address(es) and port number(s) from the
signalling message body received from the calling party endpoint. It shall
then request the IMS-AGW to allocate transport resources (T2) via the Reserve
AGW Connection Point procedure. Upon receipt of the response from the IMS-AGW,
the IMS-ALG shall modify the offerer\'s destination address(es) and/or port(s)
contained in the application signalling message body and propagate the session
establishment toward the terminating party.
On receipt of the terminating end SDP in the session establishment response,
the IMS-ALG shall pass the information to the IMS-AGW in the Configure AGW
Connection Point procedure and shall request the IMS-AGW to allocate transport
resources (T1) via the Reserve and Configure AGW Connection Point. Upon
receiving the response from the IMS-AGW, the IMS-ALG shall modify the
answerer\'s destination address(es) and/or port(s) contained in the
application signalling message body and pass the information to the
originating party.
On session termination, the IMS-ALG shall request the IMS-AGW to release its
transport resources via the Release AGW Termination procedure.
### 6.2.2 IP realm indication procedure
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally specifying the required IP Realm to the IMS-AGW when requesting the
allocation of transport resources on the IMS-AGW.
### 6.2.3 Remote NA(P)T traversal support procedure
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally indicating to the IMS-AGW that the remote media address/port
information (supplied by the IMS-ALG) shall not be used as the destination
address for outgoing media. Instead, the IMS-AGW shall \"latch\" or
\"relatch\" onto the required destination address via the source address/port
of the incoming media. The IMS-ALG may command the IMS-AGW to latch once (on
the first received packet) or to re-latch (i.e. to check for a change of
source address on the incoming media stream and latch once on this new
address).
### 6.2.4 Remote Source Address/Port Filtering
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally specifying the required IP address and/or port to be used to screen
received media packets on a termination.
This subclause considers when the IMS-ALG is acting as an Entry point and
remote source transport address filtering is required towards the external
network.
As a security related option, on request from the IMS-ALG, filtering may be
enabled to check/validate the source address or source address and port number
of incoming packets from the external network. If the IMS-ALG requests address
filtering, it may additionally provide an address specification, which may
identify either a single address or a range of addresses, against which
filtering is to be performed. The absence of such an address specification in
the request shall implicitly request filtering against the IP address of the
remote connection address. In addition to address filtering, the IMS-ALG may
also request port filtering. If the IMS-ALG requests port filtering, it may
additionally include either a port or a range of ports, against which
filtering is to be performed. The absence of a port specification in the
request shall implicitly request filtering against the port of the remote
connection address.
If the IMS-AGW is requested to apply source IP address and possibly source
port filtering, it shall only pass incoming IP packets from the identified
source, and discard IP packets from other sources.
If remote source address filtering is required for the created termination,
then the IMS-ALG shall include the information element \"Remote source address
filtering\" in the request sent to the IMS-AGW. In addition, it may also
include the information element \"Remote source address mask\" in order to
request filtering of a range of addresses.
If remote source port filtering is required for the created termination (in
addition to remote source address filtering), then the IMS-ALG shall include
the information element \"Remote source port filtering\" in the request sent
to the IMS-AGW. It may also include one of the information elements \"Remote
source port\" or \"Remote source port range\".
Subsequently, the IMS-AGW shall apply filtering as requested to the packets
arriving from the external network. Any packet arriving, which does not meet
the filtering requirement, shall be discarded.
### 6.2.5 Traffic Policing
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally requesting the IMS-AGW to police the media stream flow according to
one or more of the following media policing(s) through the IMS-AGW, in
accordance with IETF RFC 2216 [10].
The following media policing shall be supported at the IMS-AGW:
\- **Sustainable Data Rate (SDR) Policing:** \ To request policing of the
sustainable data rate of a media stream, the IMS-ALG shall request media
policing for that media stream and shall provide the sustainable data rate,
and shall provide a maximum burst size (MBS) indicating the expected maximum
size of packet bursts for that media stream. The IMS-AGW shall then measure
the data rate for the received packets within that media stream as per IETF
RFC 2216 [10] for \"Token Bucket\", where r = SDR and b = MBS. If the
permissible sustainable data rate is exceeded, the IMS-AGW shall discard
packets to reduce the data rate to the permissible sustainable data rate.
NOTE 1: The IMS-ALG can derive the sustainable data rate from bandwidth
parameters if it receives them within an SDP description.
The following media policing may be supported in addition at the IMS-AGW ; if
supported then the following applies:
\- **Peak Data Rate Policing** :\ To request policing of the peak data rate of
a media stream, the IMS-ALG shall request media policing for that media stream
and shall provide the peak data rate, and may provide a Delay Variation
Tolerance indicating the expected maximum delay variation due to jitter for
that media stream. The IMS-AGW shall then measure the data rate for the
received packets within that media stream. If the permissible peak data rate
is exceeded, the IMS-AGW shall discard packets to reduce the data rate to the
permissible peak data rate. If both peak data rate and sustainable data rate
have been provided for the same media stream, the IMS-AGW shall discard
packets to reduce the data rate to the permissible peak data rate and should
discard packets to reduce the data rate to the permissible sustainable data
rate.
NOTE 2: The decision to apply or not traffic policing is general for all
sessions with the same media characteristics (i.e. not user specific). The
conditions which media policings to apply are beyond the scope of the
specification. This can be based on the media characteristics of the session
(e.g. media type).
### 6.2.6 Hanging Termination Detection
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
requesting the IMS-AGW to periodically report termination heartbeat
indications to detect hanging context and termination in the IMS-AGW that may
result e.g. from a loss of communication between the IMS-ALG and the IMS-AGW.
When the IMS-ALG receives a termination heartbeat notification from the IMS-
AGW via the Termination heartbeat - Indication procedure, the IMS-ALG shall
return a Termination heartbeat --Indication Ack (without an error) if the
context id / termination identity combination exists in the IMS-ALG. If it
does not exist, the IMS-ALG shall return an error and shall correct the
mismatch, e.g. by requesting the IMS-AGW to subtract the indicated termination
and to clear any associated context.
Figure 6.2.6.1: Termination heartbeat -- Indication
### 6.2.7 QoS Packet Marking
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally specifying the setting of the DSCP for outgoing packets on a
termination. The DSCP value may be explicitly set by the IMS-AGW or else
copied from that received in the corresponding received packet.
If differentiated services are required for the created termination, then the
IMS-ALG shall include the information elements \"DiffServ Code Point\" and/or
\"DiffServ Tagging Behaviour\" in the request sent to the IMS-AGW.
Subsequently, for all egress packets, the IMS-AGW shall set the DiffServ Code
Point in the IP header as specified by the IMS-ALG:
\- If the DiffServ Tagging Behaviour information element was received with a
value to indicate that the DiffServ Code Point should be copied, then the
DiffServ Code Point in the IP header of the egress packet is copied from the
ingress packet.
\- If the Diffserv Tagging Behaviour information element was not received, or
was received with a value to indicate that the DiffServ Code Point should be
set to a specific value, then:
\- If the DiffServ Code Point information element was received, then the
DiffServ Code Point in the IP header of the egress packet shall be set to the
value received in the DiffServ Code Point information element.
\- If the DiffServ Code Point information element was not received, then the
DiffServ Code Point in the IP header of the egress packet shall be set to a
configured default value.
### 6.2.8 Media Inactivity Detection
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally requesting the IMS-AGW to detect inactive media.
If media inactivity detection is required for the created termination, the
IMS-ALG may include the information elements \"Inactivity detection time\" and
\"Inactivity detection direction\" in the request sent to the IMS-AGW. The
IMS-ALG may request the detection of media inactivity on a termination or a
stream basis.
When the IMS-ALG receives a notification of inactive media from the IMS-AGW
via the Media Inactivity Notification procedure, the IMS-ALG shall return a
Media Inactivity Notification Ack and shall take appropriate action (e.g.
release the termination).
Figure 6.2.8.1: Media Inactivity Notification
### 6.2.9 Handling of RTCP streams
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally requesting the IMS-AGW to allocate or not allocate RTCP resources,
and if RTCP is requested, optionally specifying the remote RTCP port and
address, and bandwidth allocation for RTCP.
### 6.2.10 IMS end-to-access-edge Media Plane Security
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
optionally requesting the IMS-AGW to provide IMS media plane security in
accordance with 3GPP TS 33.328 [12].
The IMS-ALG shall provide the following media plane security related
parameters to the IMS-AGW:
  * **The SDES crypto attributes**
### 6.2.11 Change Through-Connection
The Change Through-Connection procedure is used for opening and closing of
gates and is mandatory for IMS-ALG and IMS-AGW to support. The IMS-ALG sets
the Stream mode parameter using the Change Through-Connection procedure to
request the IMS-AGW to one-way or both-way through-connect or block media
streams on a termination.
The IMS-ALG may combine the Change Through-Connection procedure with the
Reserve and Configure AGW Connection Point, Reserve AGW Connection Point or
Configure AGW Connection Point procedure as in Figure 6.2.1.2., or may apply
this procedure separately.
### 6.2.12 Emergency Calls
This procedure is identical to that of subclause 6.2.1 apart from the IMS-ALG
requesting the IMS-AGW to treat the call as emergency call with a preferential
handling by including the information element \"Emergency Call Indicator\"
within the \"Reserve and Configure AGW Connection Point\" or \"Reserve AGW
Connection Point procedure\".
### 6.2.13 Explicit Congestion Notification support
#### 6.2.13.1 General
An IMS-ALG may configure the IMS-AGW to transfer the ECN bits in the IP header
transparent (see subclause 6.2.13.2) or to act as an ECN endpoint (see
subclause 6.2.13.3). See subclause 5.12.
#### 6.2.13.2 ECN Active Indicated (ECN transparent)
Figure 6.2.13.2.1 shows the message sequence chart example for indicating ECN
transparent.
Figure 6.2.13.2.1: Procedure to indicate ECN transparent negotiated
Upon receipt of the indication that ECN transparent has been negotiated, the
IMS-AGW shall forward ECN bits within IP packets unmodified. Any RTCP feedback
received shall be passed unchanged.
#### 6.2.13.3 ECN support requested (ECN endpoint)
Figure 6.2.13.3.1 shows the message sequence chart example for requesting ECN
endpoint.
Figure 6.2.13.3.1: Procedure to Request ECN endpoint
Upon receipt of a request to apply ECN the IMS-AGW shall set the ECN field of
the IP header in accordance with 3GPP TS 26.114 [21] when sending any data
packets.
Upon receipt of any IP headers indicating ECN Congestion Experienced (ECN-CE)
the IMS-AGW shall trigger rate adaptation in accordance with 3GPP TS 26.114
[21].
NOTE: ECN endpoint requires the IMS-ALG to configure the IMS-AGW with all
media attributes to allow rate adaptation even if no transcoding is
required/supported in the IMS-AGW.
#### 6.2.13.4 ECN Failure Indication (ECN endpoint)
Figure 6.2.13.4.1 shows the message sequence chart example for an ECN Failure
Event.
Figure 6.2.13.4.1: Procedure to Report ECN Failure
When the IMS-ALG receives a Notification indicating that a failure has
occurred, the IMS-ALG may trigger a new SDP offer to disable ECN.
### 6.2.14 Access Transfer procedures with media anchored in IMS-AGW (ATGW)
#### 6.2.14.1 General
This clause describes extensions to the Iq signalling procedures and their
interactions with SIP signalling in the control plane and with user plane
procedures to support the \"SRVCC enhanced with ATCF\" procedures between the
IMS-ALG (ATCF) and IMS-AGW (ATGW) when the IMS-ALG and IMS-AGW support the
ATCF and ATGW functionality, as specified in 3GPP TS 23.237 [18] and 3GPP TS
24.237 [19].
The Access Transfer procedures are optional to support on the Iq reference
point. The requirements in this clause shall apply if these procedures are
supported.
All message sequence charts in this clause are examples.
#### 6.2.14.2 H.248 context model
Figure 6.2.14.2.1 shows the H.248 context model after the PS originating or
terminating session establishment and before the PS to CS access transfer
procedure. The \"squared\" line represents the call control signalling. The
\"dotted\" line represents the bearer. The bearer termination T1 is used for
the media path of the PS access leg, the bearer termination T2 is used for the
media path of the remote leg.
Figure 6.2.14.2.1: H.248 Context Model before Access Transfer
Figure 6.2.14.2.2 shows the H.248 context model during the PS to CS access
transfer procedure. The IMS-ALG (ATCF) may seize a new bearer termination T3
for the new media path of the CS access leg, e.g. if the PS and CS nodes
before and after the handover are reachable via different IP realms or use a
different IP version. The IMS-ALG (ATCF) may alternatively reconfigure the T1
termination with the new remote configuration (e.g. IP address and media)
instead of seizing a new termination; in that case, the H.248 context model
remains as before access transfer.
Bi-casting is not supported during access transfer, i.e. the IMS-AGW (ATGW)
does not duplicate downlink media packets received from the remote leg to the
source and target access legs simultaneously.
Figure 6.2.14.2.2: H.248 Context Model during Access Transfer
Figure 6.2.14.2.3 shows the H.248 context model after the PS to CS access
transfer procedure if the source access leg is released. If the UE chooses to
retain some media flow(s) in the transferred-out access, the H.248 context
model remains as during access transfer.
Figure 6.2.14.2.3: H.248 Context Model after Access Transfer
#### 6.2.14.3 PS session origination or termination with media anchoring in
IMS-AGW (ATGW) signaling procedures
If the IMS-ALG (ATCF) decides to anchor the media of a session in the IMS-AGW
(ATGW) the call related procedures shall follow the basic procedures for IMS
ALG (i.e. as specified in clause 6.2.1) with the following differences:
\- The IMS-ALG (ATCF) shall seize a termination towards the terminating user,
using the \"Reserve AGW Connection Point\" procedure before sending a SDP
offer to the terminating user. The IMS-ALG (ATCF) may signal media related
information to the IMS-AGW (ATGW) or omit media when adding the IP termination
at this stage.
NOTE : The signalling of media related information to a MGW requires that it
reserve the indicated resources before returning a positive response to the
H.248 command, by omitting media related information the IMS-AGW (ATGW) does
not need to reserve any associated resources at this stage.
\- When the IMS-ALG (ATCF) receives the SDP answer from the terminating user,
the IMS-ALG (ATCF) shall configure the IMS-AGW (ATGW) accordingly by either
supplying the same media related information for all interconnected
terminations or by omitting the media related information.
Figure 6.2.14.3.1: PS session establishment with media anchoring in IMS-AGW
(ATGW)
1\. The IMS-ALG (ATCF) receives an SDP offer in SIP signalling. The IMS-ALG
(ATCF) requires an IMS-AGW (ATGW) for media anchoring (or for another IMS-AGW
use case) but does not offer transcoding.
2\. The IMS-ALG (ATCF) sends a H.248 ADD request command to create the
outgoing termination and to request IP resources to execute ATGW function. As
no media transcoding is required this may be indicated by signalling \"-\".
Alternatively any codec (e.g. Codec 1) can be signalled. If the IMS-ALG (ATCF)
selects an IMS-AGW (ATGW) that does not support transcoding, the IMS-ALG
(ATCF) may signal media related sub-fields in the media descriptor to the IMS-
AGW (ATGW) if the IMS-AGW (ATGW) supports media encoding. The IMS-AGW (ATGW)
shall accept the ADD request even though it cannot reserve any transcoding
resources for the indicated media.
3\. The IMS-AGW (ATGW) creates the outgoing termination.
4\. The IMS-AGW (ATGW) replies to IMS-ALG (ATCF) with a H.248 ADD reply
command and provides the local address and port of the outgoing termination.
5\. The IMS-ALG (ATCF) replaces the IP address inside the SDP using the
information coming from IMS-AGW (ATGW).
6\. The IMS-ALG (ATCF) forwards the new offer to the succeeding node.
7\. The SDP answer is received by IMS-ALG (ATCF). In this example the codec1
received in the original SDP offer in step1 has been selected.
8\. The IMS-ALG (ATCF) sends a H.248 MOD request command to configure the
outgoing termination with address and port information. As no media
transcoding is needed this may be indicated by signalling \"-\" .Alternatively
the selected codec (Codec 1) can be signalled.
9\. The IMS-AGW (ATGW) configures the outgoing termination.
10\. The IMS-AGW (ATGW) replies to IMS-ALG (ATCF) with a H.248 MOD reply
command.
11\. The IMS-ALG (ATCF) sends a H.248 ADD command to create the incoming
termination to configure this termination with remote address and port
information and to request resources to execute ATGW function. As no media
transcoding is needed this may be indicated by signalling \"-\" .Alternatively
media related sub-fields in the media descriptor for the codec indicated to
the incoming termination may be signalled (e.g. the selected codec received in
step 7 (Codec 1).
12\. The IMS-AGW (ATGW) creates the incoming termination.
13\. The IMS-AGW (ATGW) replies to the IMS-ALG (ATCF) with a H.248 ADD reply
command and provides the local address and port of the incoming termination.
14\. The IMS-ALG (ATCF) replaces the IP address inside the SDP answer using
the information coming from IMS-AGW (ATGW).
15\. SDP answer is sent to the network at the incoming side.
Similar principles shall apply during the establishment of a mobile
terminating session.
#### 6.2.14.4 PS to CS Access Transfer procedure with media anchored in IMS-
AGW (ATGW)
The signalling flow shown in figure 6.2.14.4.1 gives an example for PS to CS
access transfer with media anchored in the IMS-AGW (ATGW). In this case, the
media has been anchored in IMS-AGW (ATGW) as specified in subclause 6.2.14.3.
1\. The IMS-ALG (ATCF) receives an SDP offer in SIP signalling from the MSC
Server. The IMS-ALG (ATCF) checks whether transcoding is required.2. The IMS-
ALG (ATCF) sends a H.248 ADD request command to create the target access leg
termination and to request IP resources to execute ATGW function. Topology is
changed and media reconfigured to connect media between T2 and T3.\ If no
media transcoding is required this may be indicated by signalling \"-\" or by
signalling the same media information on T3 as is configured on T2, following
the principles specified in subclause 6.2.14.3.\ If media transcoding is
required (as illustrated in this example), the IMS-ALG (ATCF) signals media
related sub-fields in the media descriptor to the IMS-AGW (ATGW). The IMS-AGW
(ATGW) determines from the media configuration whether transcoding is required
on a stream between two terminations between which data flow is permitted.
3\. The IMS-AGW (ATGW) creates the target access leg termination T3 and starts
to apply transcoding between T2 and T3 (if required).
4\. The IMS-AGW (ATGW) replies to IMS-ALG (ATCF) with a H.248 ADD reply
command and provides the local address and port of the outgoing termination.
5\. The IMS-ALG (ATCF) returns an SDP answer to the MSC Server; the IP address
inside the SDP uses the information coming from IMS-AGW (ATGW).
6\. Upon successful completion of the access transfer procedure, the IMS-ALG
(ATCF) receives a BYE request from the SCC AS if there is no more media flows
on the PS access.
7\. The IMS-ALG (ATCF) sends a H.248 SUB request command to subtract the
source access leg termination.
8\. The IMS-AGW (ATGW) releases the source access leg termination.
9\. The IMS-AGW (ATGW) replies to IMS-ALG (ATCF) with a H.248 SUB reply
command.
Figure 6.2.14.4.1: PS to CS Access Transfer with transcoding in IMS-AGW (ATGW)
#### 6.2.14.5 ECN support during PS to CS Access Transfer procedure with media
anchored in IMS-AGW (ATGW)
The signalling flow shown in figure 6.2.14.4.1 gives an example for PS to CS
access transfer with media anchored in the IMS-AGW (ATGW). The following
additional actions are required if ECN is supported by the IMS-ALG/IMS-AGW:
1.
> a) If ECN was supported during the PS session transparently and the SDP
> offer received from the MSC Server does not indicate ECN support, it is not
> possible to maintain transparent ECN support to the IMS CN. The IMS-ALG
> (ATCF) shall modify the Termination T2 to act as an ECN endpoint toward the
> IMS CN (see Subclause 5.12). Additionally the IMS-ALG (ATCF) shall disable
> ECN on the termination T3 (or T1).
>
> b) If ECN was supported during the PS session transparently and the SDP
> offer received from the MSC Server does indicate ECN support and no
> transcoding is required (codec types and modes are aligned between ICS side
> and IMS CN), then the IMS-ALG (ATCF) shall request ECN transparent
> properties when seizing T3 and respond to the MSC Server with ECN supported
> in the SDP answer (step 5).
>
> c) If ECN was supported during the PS session transparently and the SDP
> offer received from the MSC Server does indicate ECN support and transcoding
> is required between the CS leg and the IMS-CN, then the IMS-ALG (ATCF) shall
> request ECN endpoint properties when seizing T3 (or modify the termination
> T1 with ECN endpoint properties) and respond to the MSC Server with ECN
> supported in the SDP answer (step 5). Additionally the IMS-ALG (ATCF) shall
> modify the Termination T2 to act as an ECN endpoint toward the IMS CN (see
> Subclause 5.12).
>
> d) If ECN was not supported during the PS session and the SDP Offer received
> from the MSC Server indicates ECN support, the IMS-ALG (ATCF) shall not
> accept ECN support in the SDP answer (step 5).
# 7 Charging
The charging is specified in 3GPP TS 32.260 [5]. No requirements are
identified for the Iq interface.
# 8 Messages/Procedures and Contents
## 8.1 General
This clause describes logical signalling procedures between the IMS-ALG and
IMS-AGW. The procedures within this clause are intended to be implemented
using the standard H.248 procedure as defined in ITU recommendation H.248.1
[9] with appropriate parameter combinations.
## 8.2 Reserve and Configure AGW Connection Point
This procedure is used to reserve multimedia-processing resources for the Iq
interface connection.
Table 8.2.1: Procedures between IMS-ALG and IMS-AGW: Reserve and Configure AGW
Connection Point
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Reserve and | IMS-ALG | Cont | M | This | | Configure | | ext/Context | | information | | AGW | | Request | | element | | Connection | | | | indicates | | Point | | | | the | | | | | | existing | | | | | | context or | | | | | | requests a | | | | | | new context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Emergency | O | This | | | | Call | | information | | | | Indicator | | element | | | | | | identifies | | | | | | the call as | | | | | | emergency | | | | | | call that | | | | | | requires a | | | | | | p | | | | | | referential | | | | | | handling. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | Request | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | termination | | | | | | or requests | | | | | | a new | | | | | | bearer | | | | | | termination | | | | | | for the | | | | | | bearer to | | | | | | be | | | | | | e | | | | | | stablished. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data. | | | | | | May be | | | | | | excluded | | | | | | (i.e. \"-\" | | | | | | is used in | | | | | | SDP m-line) | | | | | | if no | | | | | | transcoding | | | | | | or media | | | | | | related | | | | | | functions | | | | | | are | | | | | | required. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | R | O | This | | | | eserveValue | | information | | | | | | element | | | | | | indicates | | | | | | if multiple | | | | | | local | | | | | | resources | | | | | | are to be | | | | | | reserved. | | | | | | | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included if | | | | | | a speech | | | | | | codec and | | | | | | auxiliary | | | | | | payload | | | | | | types are | | | | | | configured. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall send | | | | | | data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | | | | | | | | | | | | May be | | | | | | excluded | | | | | | (i.e. \"-\" | | | | | | is used in | | | | | | SDP m-line) | | | | | | if no | | | | | | transcoding | | | | | | or media | | | | | | related | | | | | | functions | | | | | | are | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | Request | | requests an | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | on the | | | | | | IMS-AGW | | | | | | that the | | | | | | remote end | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | IMS-AGW can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | M | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included | | | | | | when | | | | | | requesting | | | | | | a new | | | | | | bearer | | | | | | t | | | | | | ermination. | | | | | | Otherwise | | | | | | the | | | | | | information | | | | | | element is | | | | | | optional. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | Released | | information | | | | Bearer | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | released | | | | | | bearer. | +-------------+-------------+-------------+-------------+-------------+ | | | Latching | O | This | | | | Requirement | | information | | | | | | element | | | | | | indicates | | | | | | that the | | | | | | IMS-AGW | | | | | | should | | | | | | (re)latch | | | | | | onto the | | | | | | address of | | | | | | received | | | | | | media | | | | | | packets to | | | | | | determine | | | | | | the | | | | | | co | | | | | | rresponding | | | | | | destination | | | | | | address. | +-------------+-------------+-------------+-------------+-------------+ | | | IP Realm | O | This | | | | Identifier | | information | | | | | | element | | | | | | indicates | | | | | | the IP | | | | | | realm of | | | | | | the bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source | | information | | | | Address | | element | | | | Filtering | | indicates | | | | | | that remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source | | information | | | | Address | | element | | | | Mask | | provides | | | | | | information | | | | | | on the | | | | | | valid | | | | | | remote | | | | | | source | | | | | | addresses. | | | | | | This is | | | | | | required if | | | | | | a range of | | | | | | remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source Port | | information | | | | Filtering | | element | | | | | | indicates | | | | | | that remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | | | element | | | | | | identifies | | | | | | the valid | | | | | | remote | | | | | | source | | | | | | port. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | Range | | element | | | | | | identifies | | | | | | a range of | | | | | | valid | | | | | | remote | | | | | | source | | | | | | ports. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Traffic | O | This | | | | Policing | | information | | | | Required | | element | | | | | | indicates | | | | | | that | | | | | | policing of | | | | | | the media | | | | | | flow is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Peak Data | O | This | | | | Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | peak data | | | | | | rate for a | | | | | | media | | | | | | stream. | | | | | | (NOTE 2).. | +-------------+-------------+-------------+-------------+-------------+ | | | Sustainable | O | This | | | | Data Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | sustainable | | | | | | data rate | | | | | | for a media | | | | | | stream. | | | | | | (NOTE 2). | +-------------+-------------+-------------+-------------+-------------+ | | | Delay | O | This | | | | Variation | | information | | | | Tolerance | | element may | | | | | | be present | | | | | | if Policing | | | | | | on Peak | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | delay | | | | | | variation | | | | | | tolerance | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Maximum | C | This | | | | Burst Size | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | Policing on | | | | | | Sustainable | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | burst size | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Code Point | | information | | | | | | element | | | | | | indicates a | | | | | | specific | | | | | | DiffServ | | | | | | code point | | | | | | to be used | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Tagging | | information | | | | Behaviour | | element | | | | | | indicates | | | | | | whether the | | | | | | Diffserv | | | | | | code point | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | termination | | | | | | shall be | | | | | | copied from | | | | | | the | | | | | | received | | | | | | value or | | | | | | set to a | | | | | | specific | | | | | | value. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | O | This | | | | Inactivity | | information | | | | Detection | | element | | | | Required | | indicates | | | | | | that | | | | | | detection | | | | | | of inactive | | | | | | media flows | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Time | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | time. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Direction | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | direction. | +-------------+-------------+-------------+-------------+-------------+ | | | RTCP | O | This | | | | handling | | information | | | | | | element is | | | | | | present if | | | | | | IMS-ALG | | | | | | wants | | | | | | explicitly | | | | | | control the | | | | | | reservation | | | | | | of RTCP | | | | | | resources | | | | | | by the | | | | | | IMS-AGW. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element is | | | | SDES | | present if | | | | attribute | | IMS-ALG | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | encrypted | | | | | | and/or | | | | | | integrity | | | | | | protected | | | | | | by the | | | | | | IMS-AGW | | | | | | (NOTE 3). | | | | | | It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | cr | | information | | | | yptographic | | element is | | | | SDES | | present if | | | | attribute | | IMS-ALG | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | decrypted, | | | | | | and/or | | | | | | integrity | | | | | | checked by | | | | | | the IMS-AGW | | | | | | (NOTE 3). | | | | | | It | | | | | | indicates | | | | | | the SDES | | | | | | remote | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the IMS-AGW | | | | | | to apply | | | | | | ECN | | | | | | procedures. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the IMS-AGW | | | | | | to perform | | | | | | IP header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint, | | | | | | or | | | | | | indicates | | | | | | that ECN | | | | | | bits shall | | | | | | be passed | | | | | | tra | | | | | | nsparently. | | | | | | It may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if a ECN | | | | | | failure | | | | | | occurs due | | | | | | to ECN. It | | | | | | may only be | | | | | | supplied if | | | | | | ECN is | | | | | | enabled and | | | | | | the IMS-AGW | | | | | | acts as ECN | | | | | | endpoint. | +-------------+-------------+-------------+-------------+-------------+ | Reserve and | IMS-AGW | Context | M | This | | Configure | | | | information | | AGW | | | | element | | Connection | | | | indicates | | Point Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | C | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data. | | | | | | This IE | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. If | | | | | | the IE was | | | | | | not | | | | | | contained | | | | | | in the | | | | | | request, it | | | | | | may be | | | | | | present in | | | | | | the reply. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall send | | | | | | data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | the IMS-AGW | | | | | | shall | | | | | | receive | | | | | | user plane | | | | | | data from | | | | | | IMS. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | IMS-AGW can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element may | | | | SDES | | be present | | | | attribute | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | cr | | information | | | | yptographic | | element may | | | | SDES | | be present | | | | attribute | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SDES | | | | | | remote | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | Remote | | | | | | Source Port | | | | | | and Remote | | | | | | Source Port | | | | | | Range are | | | | | | mutually | | | | | | exclusive. | | | | | | | | | | | | NOTE 2: One | | | | | | of those | | | | | | IEs shall | | | | | | at least be | | | | | | present | | | | | | when | | | | | | policing is | | | | | | required. | | | | | | | | | | | | NOTE 3: | | | | | | This IE may | | | | | | only be | | | | | | present for | | | | | | access | | | | | | network | | | | | | te | | | | | | rminations. | | | | | +-------------+-------------+-------------+-------------+-------------+
## 8.3 Reserve AGW Connection Point Procedure
This procedure is used to reserve local connection addresses and local
resources in IMS-AGW.
Table 8.3.1: Procedures between IMS-ALG and IMS-AGW: Reserve AGW Connection
Point
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Reserve AGW | IMS-ALG | Context | M | This | | Connection | | /Context | | information | | Point | | Request | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | context or | | | | | | requests a | | | | | | new context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Emergency | O | This | | | | Call | | information | | | | Indicator | | element | | | | | | identifies | | | | | | the call as | | | | | | emergency | | | | | | call that | | | | | | requires a | | | | | | p | | | | | | referential | | | | | | handling. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | Request | | element | | | | | | requests a | | | | | | new bearer | | | | | | termination | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | | | | | | | | | | | | May be | | | | | | excluded | | | | | | (i.e. \"-\" | | | | | | is used in | | | | | | SDP m-line) | | | | | | if no | | | | | | transcoding | | | | | | or media | | | | | | related | | | | | | functions | | | | | | are | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | R | O | This | | | | eserveValue | | information | | | | | | element | | | | | | indicates | | | | | | if multiple | | | | | | local | | | | | | resources | | | | | | are to be | | | | | | reserved. | | | | | | | | | | | | This | | | | | | information | | | | | | element | | | | | | shall be | | | | | | included if | | | | | | a speech | | | | | | codec and | | | | | | auxiliary | | | | | | payload | | | | | | types are | | | | | | configured. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | Request | | requests an | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | on the | | | | | | IMS-AGW | | | | | | that the | | | | | | remote end | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | M | This | | | | termination | | information | | | | heartbeat | | element | | | | | | requests | | | | | | termination | | | | | | heartbeat | | | | | | i | | | | | | ndications. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify | O | This | | | | Released | | information | | | | Bearer | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | of a | | | | | | released | | | | | | bearer. | +-------------+-------------+-------------+-------------+-------------+ | | | Latching | O | This | | | | Requirement | | information | | | | | | element | | | | | | indicates | | | | | | that the | | | | | | IMS-AGW | | | | | | should | | | | | | (re)latch | | | | | | onto the | | | | | | address of | | | | | | received | | | | | | media | | | | | | packets to | | | | | | determine | | | | | | the | | | | | | co | | | | | | rresponding | | | | | | destination | | | | | | address. | +-------------+-------------+-------------+-------------+-------------+ | | | IP Realm | O | This | | | | Identifier | | information | | | | | | element | | | | | | indicates | | | | | | the IP | | | | | | realm of | | | | | | the bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source | | information | | | | Address | | element | | | | Filtering | | indicates | | | | | | that remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source | | information | | | | Address | | element | | | | Mask | | provides | | | | | | information | | | | | | on the | | | | | | valid | | | | | | remote | | | | | | source | | | | | | addresses. | | | | | | This is | | | | | | required if | | | | | | a range of | | | | | | remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source Port | | information | | | | Filtering | | element | | | | | | indicates | | | | | | that remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | | | element | | | | | | identifies | | | | | | the valid | | | | | | remote | | | | | | source | | | | | | port. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | Range | | element | | | | | | identifies | | | | | | a range of | | | | | | valid | | | | | | remote | | | | | | source | | | | | | ports. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Policing | O | This | | | | Required | | information | | | | | | element | | | | | | indicates | | | | | | that | | | | | | policing of | | | | | | the media | | | | | | flow is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Peak Data | O | This | | | | Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | peak data | | | | | | rate for a | | | | | | media | | | | | | stream. | | | | | | (NOTE 2). | +-------------+-------------+-------------+-------------+-------------+ | | | Sustainable | O | This | | | | Data Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | sustainable | | | | | | data rate | | | | | | for a media | | | | | | stream. | | | | | | (NOTE 2). | +-------------+-------------+-------------+-------------+-------------+ | | | Delay | O | This | | | | Variation | | information | | | | Tolerance | | element may | | | | | | be present | | | | | | if Policing | | | | | | on Peak | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | delay | | | | | | variation | | | | | | tolerance | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Maximum | C | This | | | | Burst Size | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | Policing on | | | | | | Sustainable | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | burst size | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Code Point | | information | | | | | | element | | | | | | indicates a | | | | | | specific | | | | | | DiffServ | | | | | | code point | | | | | | to be used | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Tagging | | information | | | | Behaviour | | element | | | | | | indicates | | | | | | whether the | | | | | | Diffserv | | | | | | code point | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | termination | | | | | | should be | | | | | | copied from | | | | | | the | | | | | | received | | | | | | value or | | | | | | set to a | | | | | | specific | | | | | | value. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | O | This | | | | Inactivity | | information | | | | Detection | | element | | | | Required | | indicates | | | | | | that | | | | | | detection | | | | | | of inactive | | | | | | media flows | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Time | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | time. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Direction | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | direction. | +-------------+-------------+-------------+-------------+-------------+ | | | RTCP | O | This | | | | handling | | information | | | | | | element is | | | | | | present if | | | | | | IMS-ALG | | | | | | wants | | | | | | explicitly | | | | | | control the | | | | | | reservation | | | | | | of RTCP | | | | | | resources | | | | | | by the | | | | | | IMS-AGW. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element is | | | | SDES | | present if | | | | attribute | | IMS-ALG | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | encrypted | | | | | | and/or | | | | | | integrity | | | | | | protected | | | | | | by the | | | | | | IMS-AGW | | | | | | (NOTE 3). | | | | | | It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s). | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the IMS-AGW | | | | | | to apply | | | | | | ECN | | | | | | procedures. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the IMS-AGW | | | | | | to perform | | | | | | IP header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint, | | | | | | or | | | | | | indicates | | | | | | that ECN | | | | | | bits shall | | | | | | be passed | | | | | | tra | | | | | | nsparently. | | | | | | It may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if a ECN | | | | | | failure | | | | | | occurs due | | | | | | to ECN. It | | | | | | may only be | | | | | | supplied if | | | | | | ECN is | | | | | | enabled and | | | | | | the IMS-AGW | | | | | | acts as ECN | | | | | | endpoint. | +-------------+-------------+-------------+-------------+-------------+ | Reserve AGW | IMS-AGW | Context | M | This | | Connection | | | | information | | Point Ack | | | | element | | | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | C | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data. | | | | | | This IE | | | | | | shall be | | | | | | present if | | | | | | it was | | | | | | contained | | | | | | in the | | | | | | request. If | | | | | | the IE was | | | | | | not | | | | | | contained | | | | | | in the | | | | | | request, it | | | | | | may be | | | | | | present in | | | | | | the reply. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | M | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | the IMS-AGW | | | | | | shall | | | | | | receive | | | | | | user plane | | | | | | data from | | | | | | IMS. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element may | | | | SDES | | be present | | | | attribute | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | Remote | | | | | | Source Port | | | | | | and Remote | | | | | | Source Port | | | | | | Range are | | | | | | mutually | | | | | | exclusive. | | | | | | | | | | | | NOTE 2: One | | | | | | of those | | | | | | IEs shall | | | | | | at least be | | | | | | present | | | | | | when | | | | | | policing is | | | | | | required. | | | | | | | | | | | | NOTE 3: | | | | | | This IE may | | | | | | only be | | | | | | present for | | | | | | access | | | | | | network | | | | | | te | | | | | | rminations, | | | | | | and only if | | | | | | the IMS-ALG | | | | | | includes | | | | | | only one | | | | | | SDES crypto | | | | | | attribute | | | | | | in the SDP | | | | | | sent | | | | | | towards the | | | | | | served UE. | | | | | +-------------+-------------+-------------+-------------+-------------+
## 8.4 Configure AGW Connection Point Procedure
This procedure is used to select or modify multimedia-processing resources for
the Iq interface connection.
Table 8.4.1: Procedures between IMS-ALG and IMS-AGW: Configure AGW Connection
Point
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | ** | ** | ** | | Procedure**| Initiated** | Information | Information | Information | | | | element | element | element | | | | name**| required** | de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | Configure | IMS-ALG | Context | M | This | | AGW | | | | information | | Connection | | | | element | | Point | | | | indicates | | | | | | the context | | | | | | for the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | existing | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | | | | | | | | | | | | May be | | | | | | excluded | | | | | | (i.e. \"-\" | | | | | | is used in | | | | | | SDP m-line) | | | | | | if no | | | | | | transcoding | | | | | | or media | | | | | | related | | | | | | functions | | | | | | are | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall send | | | | | | data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | | | | | | | | | | | | May be | | | | | | excluded | | | | | | (i.e. \"-\" | | | | | | is used in | | | | | | SDP m-line) | | | | | | if no | | | | | | transcoding | | | | | | or media | | | | | | related | | | | | | functions | | | | | | are | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | on the | | | | | | IMS-AGW | | | | | | that the | | | | | | IMS user | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | video any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | may contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | IMS-AGW can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Latching | O | This | | | | Requirement | | information | | | | | | element | | | | | | indicates | | | | | | that the | | | | | | IMS-AGW | | | | | | should | | | | | | (re)latch | | | | | | onto the | | | | | | address of | | | | | | received | | | | | | media | | | | | | packets to | | | | | | determine | | | | | | the | | | | | | co | | | | | | rresponding | | | | | | destination | | | | | | address. | +-------------+-------------+-------------+-------------+-------------+ | | | IP Realm | O | This | | | | Identifier | | information | | | | | | element | | | | | | indicates | | | | | | the IP | | | | | | realm of | | | | | | the bearer | | | | | | t | | | | | | ermination. | | | | | | (NOTE 3) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source | | information | | | | Address | | element | | | | Filtering | | indicates | | | | | | that remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source | | information | | | | Address | | element | | | | Mask | | provides | | | | | | information | | | | | | on the | | | | | | valid | | | | | | remote | | | | | | source | | | | | | addresses. | | | | | | This is | | | | | | required if | | | | | | a range of | | | | | | remote | | | | | | source | | | | | | address | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Source Port | | information | | | | Filtering | | element | | | | | | indicates | | | | | | that remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | | | element | | | | | | identifies | | | | | | the valid | | | | | | remote | | | | | | source | | | | | | port. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | Source Port | | information | | | | Range | | element | | | | | | identifies | | | | | | a range of | | | | | | valid | | | | | | remote | | | | | | source | | | | | | ports. This | | | | | | may be | | | | | | included if | | | | | | remote | | | | | | source port | | | | | | filtering | | | | | | is | | | | | | included. | | | | | | (NOTE 1) | +-------------+-------------+-------------+-------------+-------------+ | | | Policing | O | This | | | | Required | | information | | | | | | element | | | | | | indicates | | | | | | that | | | | | | policing of | | | | | | the media | | | | | | flow is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Peak Data | O | This | | | | Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | peak data | | | | | | rate for a | | | | | | media | | | | | | stream. | | | | | | (NOTE 2). | +-------------+-------------+-------------+-------------+-------------+ | | | Sustainable | O | This | | | | Data Rate | | information | | | | | | element may | | | | | | be present | | | | | | if Policing | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | permissible | | | | | | sustainable | | | | | | data rate | | | | | | for a media | | | | | | stream. | | | | | | (NOTE 2). | +-------------+-------------+-------------+-------------+-------------+ | | | Delay | O | This | | | | Variation | | information | | | | Tolerance | | element may | | | | | | be present | | | | | | if Policing | | | | | | on Peak | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | delay | | | | | | variation | | | | | | tolerance | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Maximum | C | This | | | | Burst Size | | information | | | | | | element | | | | | | shall be | | | | | | present if | | | | | | Policing on | | | | | | Sustainable | | | | | | Data Rate | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the maximum | | | | | | expected | | | | | | burst size | | | | | | for the | | | | | | co | | | | | | rresponding | | | | | | media | | | | | | stream. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Code Point | | information | | | | | | element | | | | | | indicates a | | | | | | specific | | | | | | DiffServ | | | | | | code point | | | | | | to be used | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | DiffServ | O | This | | | | Tagging | | information | | | | Behaviour | | element | | | | | | indicates | | | | | | whether the | | | | | | Diffserv | | | | | | code point | | | | | | in the IP | | | | | | header in | | | | | | packets | | | | | | sent on the | | | | | | bearer | | | | | | termination | | | | | | should be | | | | | | copied from | | | | | | the | | | | | | received | | | | | | value or | | | | | | set to a | | | | | | specific | | | | | | value. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | O | This | | | | Inactivity | | information | | | | Detection | | element | | | | Required | | indicates | | | | | | that | | | | | | detection | | | | | | of inactive | | | | | | media flows | | | | | | is | | | | | | required. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Time | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | time. | +-------------+-------------+-------------+-------------+-------------+ | | | Media | C | This | | | | Inactivity | | information | | | | Detection | | element may | | | | Direction | | be present | | | | | | if Inactive | | | | | | Media | | | | | | Detection | | | | | | is required | | | | | | and | | | | | | specifies | | | | | | the | | | | | | Inactivity | | | | | | Detection | | | | | | direction. | +-------------+-------------+-------------+-------------+-------------+ | | | RTCP | O | This | | | | handling | | information | | | | | | element is | | | | | | present if | | | | | | IMS-ALG | | | | | | wants | | | | | | explicitly | | | | | | control the | | | | | | reservation | | | | | | of RTCP | | | | | | resources | | | | | | by the | | | | | | IMS-AGW. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element is | | | | SDES | | present if | | | | attribute | | IMS-ALG | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | encrypted | | | | | | and/or | | | | | | integrity | | | | | | protected | | | | | | by the | | | | | | IMS-AGW | | | | | | (NOTE 4). | | | | | | It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s). | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | cr | | information | | | | yptographic | | element is | | | | SDES | | present if | | | | attribute | | IMS-ALG | | | | | | wants that | | | | | | the media | | | | | | is | | | | | | decrypted, | | | | | | and/or | | | | | | integrity | | | | | | checked by | | | | | | the IMS-AGW | | | | | | (NOTE 4). | | | | | | It | | | | | | indicates | | | | | | the SDES | | | | | | remote | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s). | +-------------+-------------+-------------+-------------+-------------+ | | | ECN Enable | O | This | | | | | | information | | | | | | element | | | | | | requests | | | | | | the IMS-AGW | | | | | | to apply | | | | | | ECN | | | | | | procedures. | +-------------+-------------+-------------+-------------+-------------+ | | | ECN | C | This | | | | Initiation | | information | | | | Method | | element | | | | | | specifies | | | | | | the ECN | | | | | | Initiation | | | | | | method and | | | | | | requests | | | | | | the IMS-AGW | | | | | | to perform | | | | | | IP header | | | | | | settings as | | | | | | an ECN | | | | | | endpoint, | | | | | | or | | | | | | indicates | | | | | | that ECN | | | | | | bits shall | | | | | | be passed | | | | | | tra | | | | | | nsparently. | | | | | | It may be | | | | | | included | | | | | | only if ECN | | | | | | is enabled. | +-------------+-------------+-------------+-------------+-------------+ | | | Notify ECN | C | This | | | | Failure | | information | | | | Event | | element | | | | | | requests a | | | | | | n | | | | | | otification | | | | | | if a ECN | | | | | | failure | | | | | | occurs due | | | | | | to ECN. It | | | | | | may only be | | | | | | supplied if | | | | | | ECN is | | | | | | enabled and | | | | | | the IMS-AGW | | | | | | acts as ECN | | | | | | endpoint. | +-------------+-------------+-------------+-------------+-------------+ | Configure | IMS-AGW | Context | M | This | | AGW | | | | information | | Connection | | | | element | | Point Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Bearer | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the bearer | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Local IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall be | | | | | | prepared to | | | | | | receive | | | | | | user data | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote IP | O | This | | | | Resources | | information | | | | | | element | | | | | | indicates | | | | | | the | | | | | | resource(s) | | | | | | for which | | | | | | the IMS-AGW | | | | | | shall send | | | | | | data. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this IE | | | | | | shall | | | | | | contain | | | | | | separate | | | | | | resources | | | | | | per stream. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the IP | | | | | | address and | | | | | | port | | | | | | number(s) | | | | | | on the | | | | | | IMS-AGW | | | | | | that the | | | | | | IMS user | | | | | | can send | | | | | | user plane | | | | | | data to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | O | This | | | | Connection | | information | | | | Address | | element | | | | | | indicates | | | | | | the remote | | | | | | IP address | | | | | | and port | | | | | | number(s) | | | | | | that the | | | | | | IMS-AGW can | | | | | | send user | | | | | | plane data | | | | | | to. | | | | | | | | | | | | For | | | | | | t | | | | | | erminations | | | | | | supporting | | | | | | any | | | | | | combination | | | | | | of video, | | | | | | audio and | | | | | | messaging | | | | | | this may | | | | | | contain | | | | | | multiple | | | | | | addresses. | +-------------+-------------+-------------+-------------+-------------+ | | | Local | C | This | | | | cr | | information | | | | yptographic | | element may | | | | SDES | | be present | | | | attribute | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SDES | | | | | | local | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | | | Remote | C | This | | | | cr | | information | | | | yptographic | | element may | | | | SDES | | be present | | | | attribute | | only if it | | | | | | was | | | | | | contained | | | | | | in the | | | | | | request. It | | | | | | indicates | | | | | | the SDES | | | | | | remote | | | | | | cr | | | | | | yptographic | | | | | | parameters | | | | | | such as | | | | | | key(s) | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | Remote | | | | | | Source Port | | | | | | and Remote | | | | | | Source Port | | | | | | Range are | | | | | | mutually | | | | | | exclusive. | | | | | | | | | | | | NOTE 2: One | | | | | | of those | | | | | | IEs shall | | | | | | at least be | | | | | | present | | | | | | when | | | | | | policing is | | | | | | required. | | | | | | | | | | | | NOTE 3: | | | | | | Additional | | | | | | streams may | | | | | | be added by | | | | | | the | | | | | | Configure | | | | | | AGW | | | | | | Connection | | | | | | Point | | | | | | procedure. | | | | | | The | | | | | | additional | | | | | | streams | | | | | | shall then | | | | | | carry the | | | | | | same IP | | | | | | Realm | | | | | | Identifier | | | | | | as the very | | | | | | first | | | | | | Stream. | | | | | | | | | | | | NOTE 4: | | | | | | This IE may | | | | | | only be | | | | | | present for | | | | | | access | | | | | | network | | | | | | te | | | | | | rminations. | | | | | +-------------+-------------+-------------+-------------+-------------+
> Editor\'s Note : The details of how the transparent indication included in
> ECN Control is subject of stage 3 specification. It also needs to be
> determined if this indication is needed on both incoming and outgoing
> terminations.
## 8.5 Release AGW Termination
This procedure is used to release a termination towards the IMS and free all
related resources.
Table 8.5.1: Procedures between IMS-ALG and IMS-AGW: Release AGW Termination
* * *
**Procedure** **Initiated** **Information element name** **Information element
required** **Information element description** **Release AGW Termination**
IMS-ALG Context M This information element indicates the existing context for
the bearer termination. Bearer Termination M This information element
indicates the bearer termination to be released. **Release AGW Termination**
Ack IMS-AGW Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the bearer termination where the command was executed.
* * *
## 8.6 Termination heartbeat indication
This procedure is used to report a termination heartbeat.
Table 8.6.1: Procedures between IMS-ALG and IMS-AGW: Termination heartbeat
indication
* * *
Procedure Initiated Information element name Information element required
Information element description Termination heartbeat indication IMS-AGW
Context M This information element indicates the context for the bearer
termination. Bearer Termination M This information element indicates the
bearer termination for which the termination heartbeat is reported.
Termination heartbeat M Hanging Termination event, as defined in 3GPP TS
29.334 [3]. Termination heartbeat indication Ack IMS-ALG Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed.
* * *
## 8.7 IMS-AGW Out-of-Service
This procedure is used to indicate that the IMS-AGW will go out of service or
is maintenance locked.
Table 8.7.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Out-of-Service
* * *
Procedure Initiated Information element name Information element required
Information element description IMS-AGW Out-of-Service IMS-AGW Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for service change.
Method M This information element indicates the method for service change.
IMS-AGW Out-of-Service Ack IMS-ALG Context M This information element
indicates the context where the command was executed. Root Termination M This
information element indicates the root termination where the command was
executed.
* * *
## 8.8 IMS-AGW Communication Up
This procedure is used to indicate that the IMS-AGW is back in service using
an existing control association.
Table 8.8.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Communication Up
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | IMS-AGW | IMS-AGW | Context | M | This | | Co | | | | information | | mmunication | | | | element | | | | | | indicates | | Up | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | Method | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the method | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | IMS-AGW | IMS-ALG | Context | M | This | | Co | | | | information | | mmunication | | | | element | | | | | | indicates | | Up Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | IMS-ALG | O | This | | | | Address | | information | | | | | | element | | | | | | indicates | | | | | | the IMS-ALG | | | | | | signalling | | | | | | address to | | | | | | which the | | | | | | IMS-AGW | | | | | | should | | | | | | preferably | | | | | | attempt to | | | | | | r | | | | | | e-register. | +-------------+-----------+-------------+-------------+-------------+
## 8.9 IMS-AGW Restoration
This procedure is used to indicate the IMS-AGW has recovered from a failure.
Table 8.9.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Restoration
* * *
Procedure Initiated Information element name Information element required
Information element description IMS-AGW Restoration IMS-AGW Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
IMS-AGW Restoration Ack IMS-ALG Context M This information element indicates
the context where the command was executed. Root Termination M This
information element indicates the root termination where the command was
executed. IMS-ALG Address O This information element indicates the IMS-ALG
signalling address to which the IMS-AGW should preferably attempt to re-
register.
* * *
## 8.10 IMS-AGW Register
This procedure is used to register the IMS-AGW after a cold/warm boot.
Table 8.10.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Register
* * *
Procedure Initiated Information element name Information element required
Information element description IMS-AGW Register IMS-AGW Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
Protocol Version M This information element indicates the protocol version for
Iq interface requested by the IMS-AGW. Service Change Profile M This
information element indicates the profile for the Iq interface requested by
the IMS-AGW. IMS-AGW Register Ack IMS-ALG Context M This information element
indicates the context where the command was executed. Root Termination M This
information element indicates the root termination where the command was
executed. Protocol Version O This information element indicates the protocol
version for Iq interface supported by the IMS-ALG. Service Change Profile O
This information element indicates the profile for the Iq interface supported
by the IMS-ALG. IMS-ALG Address O This information element indicates the IMS-
ALG signalling address to which the IMS-AGW should preferably attempt to re-
register.
* * *
## 8.11 IMS-ALG Restoration
This procedure is used to indicate the IMS-ALG has recovered from a failure.
Table 8.11.1: Procedures between IMS-ALG and IMS-AGW: IMS-ALG Restoration
* * *
Procedure Initiated Information element name Information element required
Information element description IMS-ALG Restoration IMS-ALG Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
IMS-ALG Restoration Ack IMS-AGW Context M This information element indicates
the context where the command was executed. Root Termination M This
information element indicates the root termination where the command was
executed.
* * *
## 8.12 IMS-AGW Re-register
This procedure is used to re-register the IMS-AGW (having been requested to do
so by the IMS-ALG).
Table 8.12.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Re-register
* * *
Procedure Initiated Information element name Information element required
Information element description IMS-AGW Re-register IMS-AGW Context M This
information element indicates the context for the command. Root Termination M
This information element indicates the root termination for the command.
Reason M This information element indicates the reason for the service change.
Method M This information element indicates the method for service change.
Protocol Version M This information element indicates the protocol version for
Iq interface requested by the IMS-AGW. Service Change Profile M This
information element indicates the profile for the Iq interface requested by
the IMS-AGW. IMS-AGW Re-register Ack IMS-ALG Context M This information
element indicates the context where the command was executed. Root Termination
M This information element indicates the root termination where the command
was executed. Protocol Version O This information element indicates the
protocol version for Iq interface supported by the IMS-ALG. Service Change
Profile O This information element indicates the profile for the Iq interface
supported by the IMS-ALG. IMS-ALG Address O This information element indicates
the IMS-ALG signalling address to which the IMS-AGW should preferably attempt
to re-register.
* * *
## 8.13 IMS-ALG Ordered Re-registration
This procedure is used by the IMS-ALG to request the IMS-AGW to re-register.
Table 8.13.1: Procedures between IMS-ALG and IMS-AGW: IMS-ALG Ordered Re-
register
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | IMS-ALG | IMS-ALG | Context | M | This | | Ordered Re- | | | | information | | | | | | element | | register | | | | indicates | | | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for the | | | | | | service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | IMS-ALG | O | This | | | | Address | | information | | | | | | element | | | | | | indicates | | | | | | the IMS-ALG | | | | | | signalling | | | | | | address. | +-------------+-----------+-------------+-------------+-------------+ | IMS-ALG | IMS-AGW | Context | M | This | | Ordered Re- | | | | information | | | | | | element | | register | | | | indicates | | Ack | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.14 Audit Value
This procedure is used to audit values of different object(s).
Table 8.14.1: Procedures between IMS-ALG and IMS-AGW: Audit Value
* * *
Procedure Initiated Information element name Information element required
Information element description Audit Value IMS-ALG Context M This information
element indicates the context for the command. Bearer Termination M This
information element indicates the bearer termination(s) for the command.
Object(s) M This information element indicates the object(s) to be audited.
Audit Value Ack IMS-AGW Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the bearer termination where the command was executed.
Value(s) M This information element indicates the value(s) of the object(s).
* * *
## 8.15 Audit Capability
This procedure is used to audit capabilities of different object(s).
Table 8.15.1: Procedures between IMS-ALG and IMS-AGW: Audit Capability
* * *
Procedure Initiated Information element name Information element required
Information element description Audit Capability IMS-ALG Context M This
information element indicates the context for the command. Bearer Termination
M This information element indicates the bearer termination(s) for the
command. Object(s) M This information element indicates the object(s) which
capability is requested. Audit Capability Ack IMS-AGW Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer termination
where the command was executed. Capabilities(s) M This information element
indicates the capabilities of the object(s).
* * *
## 8.16 Capability Update
This procedure is used to indicate update of an object capability.
Table 8.16.1: Procedures between IMS-ALG and IMS-AGW: Capability Update
* * *
Procedure Initiated Information element name Information element required
Information element description Capability Update IMS-AGW Context M This
information element indicates the context for the command. Bearer Termination
M This information element indicates the bearer termination(s) for the
command. Reason M This information element indicates the reason for service
change. Method M This information element indicates the method for service
change. Capability Update Ack IMS-ALG Context M This information element
indicates the context where the command was executed. Bearer Termination M
This information element indicates the bearer termination where the command
was executed.
* * *
## 8.17 IMS-ALG Out of Service
This procedure is used to indicate that IMS-ALG has gone out of service.
Table 8.17.1: Procedures between IMS-ALG and IMS-AGW: IMS-ALG Out of Service
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | IMS-ALG Out | IMS-ALG | Context | M | This | | of Service | | | | information | | | | | | element | | | | | | indicates | | | | | | the context | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | for the | | | | | | command. | +-------------+-----------+-------------+-------------+-------------+ | | | Reason | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the reason | | | | | | for the | | | | | | service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | | | Method | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the method | | | | | | for service | | | | | | change. | +-------------+-----------+-------------+-------------+-------------+ | IMS-ALG Out | IMS-AGW | Context | M | This | | of Service | | | | information | | | | | | element | | Ack | | | | indicates | | | | | | the context | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | the root | | | | | | termination | | | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.18 IMS-AGW Resource Congestion Handling - Activate
This procedure is used to activate the congestion handling mechanism.
Table 8.18.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Resource
Congestion Handling - Activate
+-------------+-----------+-------------+-------------+-------------+ | Procedure | Initiated | Information | Information | Information | | | | element | element | element | | | | name | required | description | +-------------+-----------+-------------+-------------+-------------+ | IMS-AGW | IMS-ALG | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling -- | | | | indicates | | | | | | that all | | Activate | | | | context are | | | | | | applicable | | | | | | for the | | | | | | root | | | | | | t | | | | | | ermination. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the | | | | | | congestion | | | | | | mechanism | | | | | | is | | | | | | activated. | +-------------+-----------+-------------+-------------+-------------+ | | | Congestion | M | This | | | | Activate | | information | | | | | | element | | | | | | requests to | | | | | | activate | | | | | | the | | | | | | congestion | | | | | | mechanism. | +-------------+-----------+-------------+-------------+-------------+ | IMS-AGW | IMS-AGW | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | that all | | Activate | | | | context are | | Ack | | | | where the | | | | | | command was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the command | | | | | | was | | | | | | executed. | +-------------+-----------+-------------+-------------+-------------+
## 8.19 IMS-AGW Resource Congestion Handling - Indication
This procedure is used to inform the IMS-ALG that traffic restriction is
advised.
Table 8.19.1: Procedures between IMS-ALG and IMS-AGW: IMS-AGW Resource
Congestion Handling -Indication
+-------------+-------------+-------------+-------------+-------------+ | ** | ** | Information | ** | ** | | Procedure**| Initiated** | element | Information | Information | | | | name | element | element | | | | | required**| de | | | | | | scription** | +-------------+-------------+-------------+-------------+-------------+ | IMS-AGW | IMS-AGW | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | all context | | Indication | | | | are | | | | | | applicable | | | | | | for the | | | | | | root | | | | | | t | | | | | | ermination. | +-------------+-------------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the | | | | | | congestion | | | | | | mechanism | | | | | | was | | | | | | activated. | +-------------+-------------+-------------+-------------+-------------+ | | | Reduction | M | This | | | | | | information | | | | | | element | | | | | | indicates | | | | | | the load | | | | | | percentage | | | | | | to be | | | | | | reduced. | +-------------+-------------+-------------+-------------+-------------+ | IMS-AGW | IMS-ALG | Context | M | This | | Resource | | | | information | | Congestion | | | | element | | Handling - | | | | indicates | | | | | | all context | | Indication | | | | are where | | Ack | | | | the command | | | | | | was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+ | | | Root | M | This | | | | Termination | | information | | | | | | element | | | | | | indicates | | | | | | that root | | | | | | termination | | | | | | is where | | | | | | the command | | | | | | was | | | | | | executed. | +-------------+-------------+-------------+-------------+-------------+
## 8.20 Inactivity Timeout Activate
This procedure is used to activate the inactivity timeout mechanism.
Table 8.20.1: Procedures between IMS-ALG and IMS-AGW: Inactivity Timeout
Activate
* * *
**Procedure** **Initiated** Information element name **Information element
required** **Information element description** Inactivity Timeout Activate
IMS-ALG Context M This information element indicates all context are
applicable for the root termination. Root Termination M This information
element indicates that root termination is where inactivity timeout mechanism
was activated. Inactivity Timeout Activate M This information element
activates the Inactivity Timeout request. Inactivity Timeout O This
information element indicates the maximum length of time before triggering the
related notification. Inactivity Timeout Activate Ack IMS-AGW Context M This
information element indicates all context are where the command was executed.
Root Termination M This information element indicates that root termination is
where the command was executed.
* * *
## 8.21 Inactivity Timeout Notification
This command is used to notify the IMS-ALG of an inactive control association.
Table 8.21.1: Procedures between IMS-AGW and IMS-ALG: Inactivity Timeout
Notification
* * *
**Procedure** **Initiated** Information element name **Information element
required** **Information element description** Inactivity Timeout Notification
IMS-AGW Context M This information element indicates all context are
applicable for the root termination. Root Termination M This information
element indicates that root termination is where the inactivity timeout
mechanism was activated. Inactivity Timeout Notification M This information
element notifies the IMS-ALG of an inactivity time period. Inactivity Timeout
Notifcation Ack IMS-ALG Context M This information element indicates all
context are where the command was executed. Root Termination M This
information element indicates that root termination is where the command was
executed.
* * *
## 8.22 Command Reject
This command is used to reject the received command request. It may be used as
response to any of the procedures.
Table 8.22.1: Procedures between IMS-ALG and IMS-AGW: Command Reject
* * *
Procedure Initiated Information element name Information element required
Information element description Command Reject Both Context O This information
element indicates the context where the command was rejected. Bearer
Termination O This information element indicates the bearer termination where
the command was rejected. Error M This information element indicates the error
that caused command rejection.
* * *
## 8.23 Realm Availability Activate
This command is used to request the IMS-AGW to monitor the status of its IP
Realms and to report any changes to the IMS-ALG.
Table 8.23.1: Procedures between IMS-ALG and IMS-AGW: Realm Availability
Activate
* * *
Procedure Initiated Information element name Information element required
Information element description Realm Availability Activate IMS-ALG Context M
This information element indicates all context are applicable for the root
termination. Root Termination M This information element indicates that root
termination is where the realm availability monitoring was activated. Realm
Availability Activate M This information element activates the monitoring of
the availability of IP Realms on the IMS-AGW. Realm Availability Activate Ack
IMS-AGW Context M This information element indicates all context are where the
command was executed. Root Termination M This information element indicates
that root termination is where the command was executed.
* * *
## 8.24 Realm Availability Notification
This command is used to notify the IMS-ALG of any changes in the availability
of IP Realms on the IMS-AGW.
Table 8.24.1: Procedures between IMS-ALG and IMS-AGW: Realm Availability
Notification
* * *
Procedure Initiated Information element name Information element required
Information element description Realm Availability Notification IMS-AGW
Context M This information element indicates all context are applicable for
the root termination. Root Termination M This information element indicates
that root termination is where the realm availability monitoring was
activated. Realm Availability Changes M This information element notifies the
IMS-ALG of newly available/unavailable IP Realms. Realm Availability
Notifcation Ack IMS-ALG Context M This information element indicates all
context are where the command was executed. Root Termination M This
information element indicates that root termination is where the command was
executed.
* * *
## 8.25 IP Bearer Released
Table 8.25.1: Procedures between IMS-ALG and IMS-AGW: IP Bearer Released
* * *
Procedure Initiated Information element name Information element required
Information element description IP Bearer Released IMS-AGW Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination where
the bearer was released. Bearer Released M This information element notifies a
bearer release. Release Cause M This information element indicates the cause
of a bearer release. IP Bearer Released Ack IMS-ALG Context M This information
element indicates all context are where the command was executed. Bearer
Termination M This information element indicates that Bearer termination is
where the command was executed.
* * *
## 8.26 Media Inactivity Notification
This command is used to notify the IMS-ALG of media inactivity on the IMS-AGW.
Table 8.26.1: Procedures between IMS-ALG and IMS-AGW: Media Inactivity
Notification
* * *
Procedure Initiated Information element name Information element required
Information element description Media Inactivity Notification IMS-AGW Context
M This information element indicates the existing context for the bearer
termination. Bearer Termination M This information element indicates that
bearer termination is where the media inactivity detection was activated.
Media Inactivity M This information element notifies the IMS-ALG of Media
inactivity detection on the bearer termination. Media Inactivity Notification
Ack IMS-ALG Context M This information element indicates the context where the
command was executed. Bearer Termination M This information element indicates
the bearer termination where the command was executed.
* * *
## 8.27 Termination Out-of-Service
This procedure is used to indicate that a termination on the IMS-AGW has gone
out of service
Table 8.27.1: Procedures between IMS-ALG and IMS-AGW: Termination Out-of-
Service
* * *
Procedure Initiated Information element name Information element required
Information element description Termination Out-of-Service IMS-AGW Context M
This information element indicates the context for the command. Bearer
Termination M This information element indicates the bearer termination(s) for
the command. Reason M This information element indicates the reason for
service change. Method M This information element indicates the method for
service change. Termination Out-of-Service Ack IMS-ALG Context M This
information element indicates the context where the command was executed.
Bearer Termination M This information element indicates the bearer
termination(s) where the command was executed.
* * *
## 8.28 Change Through-Connection
This procedure is used to change the through-connection in the bearer
termination
Table 8.28.1: Procedures between IMS-ALG and IMS-AGW: Change Through-
Connection
* * *
Procedure Initiated Information element name Information element required
Information element description Change Through-Connection IMS-ALG
Context/Context Request M This information element indicates the existing
context or requests a new context for the bearer termination. Bearer
Termination/Bearer Termination Request M This information element indicates
the existing bearer termination or requests a new bearer termination where the
through-connection is changed. Through-Connection M This information element
indicates the through-connection of the bearer termination Change Through-
Connection Ack IMS-AGW Context M This information element indicates the
context where the command was executed. Bearer Termination M This information
element indicates the bearer termination where the command was executed.
* * *
NOTE: This procedure may be combined with Reserve and Configure AGW Connection
Point, Reserve AGW Connection Point or Configure AGW Connection Point
procedure. This list of procedures is not exhaustive.
## 8.29 Change Flow Direction
This procedure is used to change the flow direction between bearer
terminations within the context.
Table 8.29: Procedures between IMS-ALG and IMS-AGW: Configure AGW Connection
Point
* * *
Procedure Initiated Information element name Information element required
Information element description Change Flow Direction IMS-ALG Context/Context
Request M This information element indicates the existing context or a new
context where the flow direction is changed. Bearer Termination 1/ Bearer
Termination 1 Request M This information element indicates the existing bearer
termination or a new bearer termination from where the new flow direction is
applied. Bearer Termination 2/ Bearer Termination 2 Request M This information
element indicates the existing bearer termination or a new bearer termination
where to the new flow direction is applied. Flow Direction M This information
element indicates the flow direction from the bearer termination 1 to bearer
termination 2 within the context. Change Flow Direction Ack IMS-AGW Context M
This information element indicates the context where the command was executed.
* * *
## 8.30 ECN Failure Indication
This procedure is used to report ECN related failures (see clause 6.2.13.4).
Table 8.30.1: Procedures between IMS-ALG and IMS-AGW: ECN Failure Indication
* * *
Procedure Initiated Information element name Information element required
Information element description ECN Failure Indication IMS-AGW Context M This
information element indicates the context for the bearer termination. Bearer
Termination M This information element indicates the bearer termination for
which the ECN failure is reported. ECN Error Indication M This information
element indicates an ECN failure event. ECN Failure Indication Ack IMS-ALG
Context M This information element indicates the context where the command was
executed.
* * *
#