# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document shall provide an overview and overall description of the
UE-UTRAN radio interface protocol architecture as agreed within the 3GPP TSG
RAN working group 2. Details of the radio protocols will be specified in
companion documents.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TS 23.110: \"UMTS Access Stratum; Services and Functions\".
[2] 3GPP TS 25.401: \"RAN Overall Description\".
[3] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[4] 3GPP TS 25.302: \"Services provided by the Physical Layer\".
[5] 3GPP TS 25.303: \"Interlayer Procedures in Connected Mode\".
[6] 3GPP TS 25.304: \"UE Procedures in Idle Mode and Procedures for Cell
Reselection in Connected Mode\".
[7] 3GPP TS 25.321: \"MAC Protocol Specification\".
[8] 3GPP TS 25.322: \"RLC Protocol Specification\".
[9] 3GPP TS 25.323: \"PDCP Protocol Specification\".
[10] 3GPP TS 25.324: \"BMC Protocol Specification\".
[11] 3GPP TS 25.331: \"RRC Protocol Specification\".
[12] 3GPP TS 25.224: \"Physical Layer Procedures (TDD)\".
[13] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[14] 3GPP TS 33.105: \"Cryptographic Algorithm Requirements\".
[15] 3GPP TS 33.102: \"Security Architecture\".
[16] 3GPP TS 44.005: \"Data Link (DL) layer; General aspects\".
[17] 3GPP TS 25.308: \"UTRA High Speed Downlink Packet Access (HSDPA); Overall
description\".
[18] 3GPP TS 25.309: \" FDD Enhanced Uplink; Overall description\".
[19] 3GPP TS 25.346: \"Introduction of the Multimedia Broadcast Multicast
Service (MBMS) in the Radio Access Network (RAN) (Stage-2)\".
[20] 3GPP TS 25.423: \"UTRAN Iur interface RNSAP signalling\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
[3] apply.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
ARQ Automatic Repeat Request
AS Access Stratum
ASC Access Service Class
BCCH Broadcast Control Channel
BCH Broadcast Channel
BMC Broadcast/Multicast Control
C- Control-
CC Call Control
CCCH Common Control Channel
CCH Control Channel
CCTrCH Coded Composite Transport Channel
CN Core Network
CRC Cyclic Redundancy Check
CTCH Common Traffic Channel
DC Dedicated Control (SAP)
DCA Dynamic Channel Allocation
DCCH Dedicated Control Channel
DCH Dedicated Channel
DL Downlink
DRNC Drift Radio Network Controller
DSCH Downlink Shared Channel
DTCH Dedicated Traffic Channel
E-DCH Enhanced Dedicated Channel
FACH Forward Link Access Channel
FCS Frame Check Sequence
FDD Frequency Division Duplex
GC General Control (SAP)
HARQ Hybrid Automatic Repeat Request
HO Handover
HS-DSCH High Speed Downlink Shared Channel
HS-PDSCH High Speed Physical Downlink Shared Channel
JBM Jitter Buffer Management
ITU International Telecommunication Union
kbps kilobits per second
L1 Layer 1 (physical layer)
L2 Layer 2 (data link layer)
L3 Layer 3 (network layer)
LAC Link Access Control
LAI Location Area Identity
MAC Medium Access Control
MBMS Multimedia Broadcast Multicast Service
MCCH MBMS point-to-multipoint Control Channel
MM Mobility Management
MRNC MBMS Master RNC
MSCH MBMS point-to-multipoint Scheduling Channel
MTCH MBMS point-to-multipoint Traffic Channel
NAS Non-Access Stratum
Nt Notification (SAP)
PCCH Paging Control Channel
PCH Paging Channel
PDCP Packet Data Convergence Protocol
PDU Protocol Data Unit
PHY Physical layer
PhyCH Physical Channels
RAB Radio Access Bearer
RACH Random Access Channel
RB Radio Bearer
RLC Radio Link Control
RNC Radio Network Controller
RNS Radio Network Subsystem
RNTI Radio Network Temporary Identity
RRC Radio Resource Control
SAP Service Access Point
SDU Service Data Unit
SHCCH Shared Channel Control Channel
SRNC Serving Radio Network Controller
SRNS Serving Radio Network Subsystem
SYNC Synchronization User Plane Protocol
TCH Traffic Channel
TDD Time Division Duplex
TFCI Transport Format Combination Indicator
TFI Transport Format Indicator
TFRI Transport Format and Resource Indicator
TMSI Temporary Mobile Subscriber Identity
TPC Transmit Power Control
TSN Transmit Sequence Number
U- User-
UE User Equipment
UL Uplink
UMTS Universal Mobile Telecommunications System
URA UTRAN Registration Area
USCH Uplink Shared Channel
UTRA UMTS Terrestrial Radio Access
UTRAN UMTS Terrestrial Radio Access Network
UuS Uu (Radio Interface) Stratum
# 4 Assumed UMTS Architecture
Figure 1 shows the assumed UMTS architecture as outlined in [1]. The figure
shows the UMTS architecture in terms of its entities User Equipment (UE),
UTRAN and Core Network. The respective reference points Uu (Radio Interface)
and Iu (CN-UTRAN interface) are shown. The figure illustrates furthermore the
high-level functional grouping into the Access Stratum and the Non-Access
Stratum.
The Access Stratum offers services through the following Service Access Points
(SAP) to the Non-Access Stratum:
\- General Control (GC) SAPs;
\- Notification (Nt) SAPs; and
\- Dedicated Control (DC) SAPs.
The SAPs are marked with circles in Figure 1.
Figure 1: Assumed UMTS Architecture
The model in Figure 1 distinguishes the end AS entities [1], which provide the
services to higher layers, from the local entities, which provide services
over respectively the Uu and the Iu reference points.
The Uu Stratum (UuS) block includes the radio interface protocol stack
described in subclause 5.1.
# 5 Radio interface protocol architecture
## 5.1 Overall protocol structure
The radio interface is layered into three protocol layers:
\- the physical layer (L1);
\- the data link layer (L2);
\- network layer (L3).
Layer 2 is split into following sublayers: Medium Access Control (MAC), Radio
Link Control (RLC), Packet Data Convergence Protocol (PDCP) and
Broadcast/Multicast Control (BMC).
Layer 3 and RLC are divided into Control (C-) and User (U-) planes. PDCP and
BMC exist in the U-plane only.
In the C-plane, Layer 3 is partitioned into sublayers where the lowest
sublayer, denoted as Radio Resource Control (RRC), interfaces with layer 2 and
terminates in the UTRAN. The next sublayer provides \'Duplication avoidance\'
functionality as specified in [13]. It terminates in the CN but is part of the
Access Stratum; it provides the Access Stratum Services to higher layers. The
higher layer signalling such as Mobility Management (MM) and Call Control (CC)
is assumed to belong to the non-access stratum, and therefore not in the scope
of 3GPP TSG RAN. On the general level, the protocol architecture is similar to
the current ITU-R protocol architecture, ITU-R M.1035.
Figure 2 shows the radio interface protocol architecture. Each block in Figure
2 represents an instance of the respective protocol. Service Access Points
(SAP) for peer-to-peer communication are marked with circles at the interface
between sublayers. The SAP between MAC and the physical layer provides the
transport channels (cf. subclause 5.2.1.1). The SAPs between RLC and the MAC
sublayer provide the logical channels (cf. subclause 5.3.1.1.1). The RLC layer
provides three types of SAPs, one for each RLC operation mode (UM, AM, and TM,
see [8]). PDCP and BMC are accessed by PDCP and BMC SAPs, respectively. The
service provided by layer 2 is referred to as the radio bearer. The C-plane
radio bearers, which are provided by RLC to RRC, are denoted as signalling
radio bearers. In the C-plane, the interface between \'Duplication avoidance\'
and higher L3 sublayers (CC, MM) is defined by the General Control (GC),
Notification (Nt) and Dedicated Control (DC) SAPs.
NOTE: The SAPs shown in Figure 2 are examples. For details on the definition
of SAPs refer to the respective radio interface protocol specification.
Also shown in the figure are connections between RRC and MAC as well as RRC
and L1 providing local inter-layer control services. An equivalent control
interface exists between RRC and the RLC sublayer, between RRC and the PDCP
sublayer and between RRC and BMC sublayer. These interfaces allow the RRC to
control the configuration of the lower layers. For this purpose separate
Control SAPs are defined between RRC and each lower layer (PDCP, RLC, MAC, and
L1).
The RLC sublayer provides ARQ functionality closely coupled with the radio
transmission technique used. There is no difference between RLC instances in C
and U planes.
The MAC sublayer is made up of several different MAC entities, MAC-d,
MAC-c/sh/m, MAC-hs/MAC-ehs, MAC-es/MAC-e, MAC-i/is and MAC-m.
The MAC-hs/MAC-ehs entity provides Hybrid ARQ functionality, and is only used
on the HS-DSCH.
The MAC-es/MAC-e and MAC-i/is entities provide Hybrid ARQ functionality, and
are only used with E-DCH.
The MAC-m entity provides selection combining functionality for MTCH from
different cells. MAC-m is only used for FACH carrying MTCH and MSCH.
The UTRAN can be requested by the CN to prevent all loss of data (i.e.
independently of the handovers on the radio interface), as long as the Iu
connection point is not modified. This is a basic requirement to be fulfilled
by the UTRAN retransmission functionality as provided by the RLC sublayer.
However, in case of the Iu connection point is changed (e.g. SRNS relocation,
streamlining), the prevention of the loss of data may not be guaranteed
autonomously by the UTRAN but relies on \'Duplication avoidance\' functions in
the CN.
There are primarily two kinds of signalling messages transported over the
radio interface - RRC generated signalling messages and NAS messages generated
in the higher layers. On establishment of the signalling connection between
the peer RRC entities three or four UM/AM signalling radio bearers may be set
up. Two of these bearers are set up for transport of RRC generated signalling
messages - one for transferring messages through an unacknowledged mode RLC
entity (see subclause 5.3.2. for details on RLC modes) and the other for
transferring messages through an acknowledged mode RLC entity. One signalling
radio bearer is set up for transferring NAS messages set to \"high priority\"
by the higher layers. An optional signalling radio bearer may be set up for
transferring NAS messages set to \"low priority\" by the higher layers.
Subsequent to the establishment of the signalling connection zero to several
TM signalling radio bearers may be set up for transferring RRC signalling
messages using transparent mode RLC.
Figure 2: Radio Interface protocol architecture (Service Access Points marked
by circles)
### 5.1.1 Service access points and service primitives
Each layer provides services at Service Access Points (SAPs). A service is
defined by a set of service primitives (operations) that a layer provides to
upper layer(s).
Control services, allowing the RRC layer to control lower layers locally (i.e.
not requiring peer-to-peer communication) are provided at Control SAPs
(C-SAP). Note that C-SAP primitives can bypass one or more sublayers, see
Figure 2.
In the radio interface protocol specifications, the following naming
conventions for primitives shall be applicable:
\- Primitives provided by SAPs between adjacent layers shall be prefixed with
the name of the service-providing layer, i.e. PHY, MAC, RLC, PDCP, BMC or UUS.
\- Primitives provided by SAPs to an application shall be prefixed with the
name of the service-providing layer, i.e. RRC.
\- Primitives provided by Control SAPs, in addition to the name of the
service-providing layer, shall be prefixed with a \"C\", i.e. CPHY, CMAC,
CRLC, CPDCP or CBMC.
This principle leads to the following notations, where \ corresponds to
request, indication, response or confirm type of primitives:
Primitives between PHY and MAC:
**PHY- \  \- \**
Primitives between PHY and RRC (over C-SAP):
**CPHY- \  \- \**
Primitives between MAC and RLC:
**MAC- \  \- \**
Primitives between MAC and RRC (over C-SAP):
**CMAC- \  \- \**
Primitives between RLC and upper layers, between RLC and RRC for data transfer
and between RLC and PDCP:
**RLC- \  \- \**
Primitives between RLC and RRC for control of RLC (over C-SAP):
**CRLC- \  \- \**
Primitives above Uu Stratum:
**UUS- \  \- \**
Primitives between PDCP and non-access stratum:
**PDCP- \  \- \**
Primitives between PDCP and RRC (over C-SAP):
**CPDCP- \  \- \**
Primitives between BMC and upper layer:
**BMC- \  \- \**
Primitives between BMC and RRC for control of BMC (over C-SAP):
**CBMC- \  \- \**
In this model, some UUS primitives map directly to RLC primitives without
intervening function.
## 5.2 Layer 1 Services and Functions
This subclause shall provide an overview on services and functions provided by
the physical layer. A detailed description of Layer 1 general requirements can
be found in [4].
### 5.2.1 L1 Services
The physical layer offers information transfer services to MAC and higher
layers. The physical layer transport services are described by _how_ and with
what characteristics data are transferred over the radio interface. An
adequate term for this is \'Transport Channel\'.
NOTE: This should be clearly separated from the classification of _what_ is
transported, which relates to the concept of logical channels. Thus DCH is
used to denote that the physical layer offers the same type of service for
both control and traffic.
#### 5.2.1.1 Transport channels
A general classification of transport channels is into two groups:
\- common transport channels (where there is a need for inband identification
of the UEs when particular UEs are addressed); and
\- dedicated transport channels (where the UEs are identified by the physical
channel, i.e. code and frequency for FDD and code, time slot and frequency for
TDD).
Common transport channel types are (a more detailed description can be found
in [4]):
**\- Random Access Channel (RACH)**
A contention based uplink channel used for transmission of relatively small
amounts of data, e.g. for initial access or non-real-time dedicated control or
traffic data.
**\- Forward Access Channel (FACH)**
Common downlink channel without closed-loop power control used for
transmission of relatively small amount of data. In addition FACH is used to
carry broadcast and multicast data.
**\- Downlink Shared Channel (DSCH)**
A downlink channel shared by several UEs carrying dedicated control or traffic
data, used in TDD mode only.
**\- Uplink Shared Channel (USCH)**
An uplink channel shared by several UEs carrying dedicated control or traffic
data, used in TDD mode only.
**\- Broadcast Channel (BCH)**
A downlink channel used for broadcast of system information into an entire
cell.
**\- Paging Channel (PCH)**
A downlink channel used for broadcast of control information into an entire
cell allowing efficient UE sleep mode procedures. Currently identified
information types are paging and notification. Another use could be UTRAN
notification of change of BCCH information.
\- **High Speed Downlink Shared Channel (HS-DSCH)**
A downlink channel shared between UEs by allocation of individual codes, from
a common pool of codes assigned for the channel.
\- **Enhanced Dedicated Channel (E-DCH) (FDD and 1.28 Mcps TDD only)**
For FDD, in CELL_FACH state and IDLE mode, this channel is used for uplink
transmission and is shared between UEs by allocation of individual codes, from
a common pool of codes assigned for the channel. For 1.28 Mcps TDD, in
CELL_FACH state and IDLE mode, this channel is used for uplink transmission
and is shared by UEs in CELL_FACH, CELL_DCH and Idle mode. The common E-DCH is
subject to Node-B controlled scheduling and HARQ.
Dedicated transport channel types are:
**\- Dedicated Channel (DCH)**
A channel dedicated to one UE used in uplink or downlink.
**\- Enhanced Dedicated Channel (E-DCH)**
In CELL_DCH, a channel dedicated to one UE used in uplink only. The E-DCH is
subject to Node-B controlled scheduling and HARQ.
To each transport channel, there is an associated Transport Format (for
transport channels with a fixed or slow changing rate) or an associated
Transport Format Set (for transport channels with fast changing rate). A
Transport Format is defined as a combination of encodings, interleaving, bit
rate and mapping onto physical channels (see [4] for details). A Transport
Format Set is a set of Transport Formats. E.g., a variable rate DCH has a
Transport Format Set (one Transport Format for each rate), whereas a fixed
rate DCH has a single Transport Format.
### 5.2.2 L1 Functions
The physical layer performs the following main functions:
\- Macrodiversity distribution/combining and soft handover execution;
\- Error detection on transport channels and indication to higher layers;
\- FEC encoding/decoding and interleaving/deinterleaving of transport
channels;
\- Multiplexing of transport channels and demultiplexing of coded composite
transport channels;
\- Rate matching;
\- Mapping of coded composite transport channels on physical channels;
\- Power weighting and combining of physical channels;
\- Modulation and spreading/demodulation and despreading of physical channels;
\- Frequency and time (chip, bit, slot, frame) synchronisation;
\- Measurements and indication to higher layers (e.g. FER, SIR, interference
power, transmit power, etc.);
\- Closed-loop power control;
\- RF processing;
\- Support of timing advance on uplink channels (TDD only);
\- Support of Uplink Synchronisation as defined in [12] (TDD only).
## 5.3 Layer 2 Services and Functions
### 5.3.1 MAC Services and Functions
This subclause provides an overview on services and functions provided by the
MAC sublayer. A detailed description of the MAC protocol is given in [7].
#### 5.3.1.1 MAC Services to upper layers
\- **Data transfer**. This service provides unacknowledged transfer of MAC
SDUs between peer MAC entities. This service provides data segmentation on HS-
DSCH and E-DCH but not for other transport channels. Therefore,
segmentation/reassembly function should be achieved by upper layer when HS-
DSCH or E-DCH is not used and optionally when HS-DSCH or E-DCH is used.
\- **Reallocation of radio resources and MAC parameters**. This service
performs on request of RRC execution of radio resource reallocation and change
of MAC parameters, i.e. reconfiguration of MAC functions such as change of
identity of UE, change of transport format (combination) sets, change of
transport channel type. In TDD mode, in addition, the MAC can handle resource
allocation autonomously.
\- **Reporting of measurements**. Local measurements such as traffic volume
and quality indication are reported to RRC.
##### 5.3.1.1.1 Logical channels
The MAC layer provides data transfer services on logical channels. A set of
logical channel types is defined for different kinds of data transfer services
as offered by MAC. Each logical channel type is defined by what type of
information is transferred.
A general classification of logical channels is into two groups:
\- Control Channels (for the transfer of control plane information);
\- Traffic Channels (for the transfer of user plane information).
The configuration of logical channel types is depicted in Figure 3.
Figure 3: Logical channel structure
##### Control Channels {#control-channels .H6}
Control channels are used for transfer of control plane information only.
**Broadcast Control Channel (BCCH)**
A downlink channel for broadcasting system control information.
**Paging Control Channel (PCCH)**
A downlink channel that transfers paging information. This channel is used
when the network does not know the location cell of the UE, or, the UE is in
the cell connected state (utilising UE sleep mode procedures).
**Common Control Channel (CCCH)**
Bi-directional channel for transmitting control information between network
and UEs. This channel is commonly used by the UEs having no RRC connection
with the network and by the UEs using common transport channels when accessing
a new cell after cell reselection.
**Dedicated Control Channel (DCCH)**
A point-to-point bi-directional channel that transmits dedicated control
information between a UE and the network. This channel is established through
RRC connection setup procedure.
**Shared Channel Control Channel (SHCCH)**
Bi-directional channel that transmits control information for uplink and
downlink shared channels between network and UEs. This channel is for TDD
only.
**MBMS point-to-multipoint Control Channel (MCCH)**
A point-to-multipoint downlink channel used for transmitting control
information from the network to the UE. This channel is only used by UEs that
receive MBMS.
**MBMS point-to-multipoint Scheduling Channel (MSCH)**
A point-to-multipoint downlink channel used for transmitting scheduling
control information, from the network to the UE, for one or several MTCHs
carried on a CCTrCH. This channel is only used by UEs that receive MBMS.
##### Traffic Channels {#traffic-channels .H6}
Traffic channels are used for the transfer of user plane information only.
**Dedicated Traffic Channel (DTCH)**
A Dedicated Traffic Channel (DTCH) is a point-to-point channel, dedicated to
one UE, for the transfer of user information. A DTCH can exist in both uplink
and downlink.
**Common Traffic Channel (CTCH)**
A point-to-multipoint unidirectional channel for transfer of dedicated user
information for all or a group of specified UEs.
**MBMS point-to-multipoint Traffic Channel (MTCH)**
A point-to-multipoint downlink channel used for transmitting traffic data from
the network to the UE. This channel is only used for MBMS.
##### 5.3.1.1.2 Mapping between logical channels and transport channels
###### 5.3.1.1.2.1 Mapping in Uplink
In Uplink, the following connections between logical channels and transport
channels exist:
\- CCCH can be mapped to RACH;
\- CCCH can be mapped to E-DCH (in FDD and 1.28 Mcps TDD mode only);
\- DCCH can be mapped to RACH;
\- DCCH can be mapped to DCH;
\- DCCH can be mapped to USCH (in TDD mode only);
\- DCCH can be mapped to E-DCH;
\- DTCH can be mapped to RACH;
\- DTCH can be mapped to DCH;
\- DTCH can be mapped to USCH (in TDD mode only);
\- SHCCH can be mapped to RACH (in TDD mode only);
\- SHCCH can be mapped to USCH (in TDD mode only);
\- DTCH can be mapped to E-DCH.
###### 5.3.1.1.2.2 Mapping in Downlink
In Downlink, the following connections between logical channels and transport
channels exist:
\- BCCH can be mapped to BCH;
\- BCCH can be mapped to FACH;
\- BCCH can be mapped to HS-DSCH (in FDD and 1.28 Mcps TDD mode only);
\- PCCH can be mapped to PCH;
\- PCCH can be mapped to HS-DSCH (in FDD and 1.28 Mcps TDD mode only);
\- CCCH can be mapped to FACH;
\- CCCH can be mapped to HS-DSCH (in FDD and 1.28 Mcps TDD mode only);
\- DCCH can be mapped to FACH;
\- DCCH can be mapped to DSCH (in TDD mode only);
\- DCCH can be mapped to HS-DSCH;
\- DCCH can be mapped to DCH;
\- MCCH can be mapped to FACH;
\- MSCH can be mapped to FACH;
\- DTCH can be mapped to FACH;
\- DTCH can be mapped to DSCH (in TDD mode only);
\- DTCH can be mapped to HS-DSCH;
\- DTCH can be mapped to DCH;
\- CTCH can be mapped to FACH;
\- MTCH can be mapped to FACH;
\- SHCCH can be mapped to FACH (in TDD mode only);
\- SHCCH can be mapped to DSCH (in TDD mode only).
The mappings as seen from the UE and UTRAN sides are shown in Figure 4 and
Figure 5 respectively.
Figure 4: Logical channels mapped onto transport channels, seen from the UE
side
Figure 5: Logical channels mapped onto transport channels, seen from the UTRAN
side
#### 5.3.1.2 MAC functions
The functions of MAC include:
\- **Mapping between logical channels and transport channels.** The MAC is
responsible for mapping of logical channel(s) onto the appropriate transport
channel(s).
\- **Selection of appropriate Transport Format for each Transport Channel
depending on instantaneous source rate**. Given the Transport Format
Combination Set assigned by RRC, MAC selects the appropriate transport format
within an assigned transport format set for each active transport channel
depending on source rate**.** The control of transport formats ensures
efficient use of transport channels.
\- **Priority handling between data flows of one UE**. When selecting between
the Transport Format Combinations in the given Transport Format Combination
Set, priorities of the data flows to be mapped onto the corresponding
Transport Channels can be taken into account. Priorities are e.g. given by
attributes of Radio Bearer services and RLC buffer status. The priority
handling is achieved by selecting a Transport Format Combination for which
high priority data is mapped onto L1 with a \"high bit rate\" Transport
Format, at the same time letting lower priority data be mapped with a \"low
bit rate\" (could be zero bit rate) Transport Format. Transport format
selection may also take into account transmit power indication from Layer 1.
\- **Priority handling between UEs by means of dynamic scheduling**. In order
to utilise the spectrum resources efficiently for bursty transfer, a dynamic
scheduling function may be applied. MAC realises priority handling on common
transport channels, shared transport channels and for the dedicated and common
E-DCH transport channel. Note that for dedicated transport channels other than
E-DCH, the equivalent of the dynamic scheduling function is implicitly
included as part of the reconfiguration function of the RRC sublayer.
NOTE: In the TDD mode the data to be transported are represented in terms of
sets of resource units.
\- **Identification of UEs on common transport channels**. When a particular
UE is addressed on a common downlink channel, or when a UE is using the RACH,
there is a need for inband identification of the UE. Since the MAC layer
handles the access to, and multiplexing onto, the transport channels, the
identification functionality is naturally also placed in MAC. In FDD and 1.28
Mcps TDD mode only, if a UE is in CELL_FACH, CELL_PCH or URA_PCH state and HS-
DSCH is used as a common transport channel, it is possible to identify the UE
in physical layer using dedicated H-RNTI on HS-SCCH if the H-RNTI is dedicated
for the UE. In FDD mode only, if a UE is in CELL_FACH state or IDLE mode and
E-DCH is used as a common transport channel, there is a need for inband
identification of the UE.
\- **Multiplexing/demultiplexing of upper layer PDUs into/from transport
blocks delivered to/from the physical layer on common transport channels**.
MAC should support service multiplexing for common transport channels, since
the physical layer does not support multiplexing of these channels.
\- **Multiplexing/demultiplexing of upper layer PDUs into/from transport block
sets delivered to/from the physical layer on dedicated transport channels**.
The MAC allows service multiplexing for dedicated transport channels. This
function can be utilised when several upper layer services (e.g. RLC
instances) can be mapped efficiently on the same transport channel. In this
case the identification of multiplexing is contained in the MAC protocol
control information.
\- **Multiplexing/demultiplexing of upper layer PDUs into transport blocks
delivered to/from the physical layer on HS-DSCH**. The MAC allows service
multiplexing for HS-DSCH. This function can be utilised to multiplex data from
several upper layer services (e.g. RLC instances). In this case the
identification of multiplexing is contained in the MAC protocol control
information.
\- **Traffic volume measurement**. Measurement of traffic volume on logical
channels and reporting to RRC. Based on the reported traffic volume
information, RRC performs transport channel switching decisions.
\- **Transport Channel type switching.** Execution of the switching between
common and dedicated transport channels based on a switching decision derived
by RRC**.**
\- **Ciphering**. This function prevents unauthorised acquisition of data.
Ciphering is performed in the MAC layer for transparent RLC mode. Details of
the security architecture are specified in [15].
\- **Access Service Class selection for RACH transmission and Enhanced Uplink
for CELL_FACH and Idle mode**. The RACH and E-DCH (as common transport
channel) resources (i.e. access slots and preamble signatures for FDD,
timeslot and channelisation code for TDD) may be divided between different
Access Service Classes in order to provide different priorities of RACH and
E-DCH (as common transport channel) usage. In addition it is possible for more
than one ASC or for all ASCs to be assigned to the same access slot/signature
space. Each access service class will also have a set of back-off parameters
associated with it, some or all of which may be broadcast by the network. The
MAC function applies the appropriate back-off and indicates to the PHY layer
the RACH partition associated to a given MAC PDU transfer.
\- **HARQ functionality for HS-DSCH and E-DCH transmission**. The MAC-hs, MAC-
ehs, MAC-e and MAC-i entities are responsible for establishing the HARQ entity
in accordance with the higher layer configuration and handling all the tasks
required to perform HARQ functionality. This functionality ensures delivery
between peer entities by use of the ACK and NACK signalling between the peer
entities.
\- **Data segmentation/re-assembly for HS-DSCH and E-DCH**. Higher layer SDUs
can be segmented by the transmitting MAC-hs/MAC-ehs or MAC-i/is entity to fit
the available radio resource. Reassembly is provided in the receiving MAC-
hs/MAC-ehs or MAC-is entity.
\- **In-sequence delivery and assembly/disassembly of higher layer PDUs on HS-
DSCH**. In CELL_DCH state the transmitting MAC-hs/MAC-ehs entity assembles the
data block payload for the MAC-hs/MAC-ehs PDUs from the delivered MAC-d PDUs.
For MAC-hs, the MAC-d PDUs that are assembled in any one MAC-hs PDU are the
same priority, and from the same MAC-d flow. For MAC-ehs the MAC-d PDUs that
are assembled in any one MAC-ehs PDU may be of the same or different priority,
and from the same or different MAC-d flow. The receiving MAC-hs/MAC-ehs entity
is then responsible for the reordering of the received data blocks according
to the received TSN, per priority and MAC-d flow, and then disassembling the
data block into MAC-d PDUs for in-sequence delivery to the higher layers. In
FDD and 1.28 Mcps TDD mode in CELL_FACH, CELL_PCH and URA_PCH state the
transmitting MAC-ehs entity assembles the data block payload for the MAC-ehs
PDUs from the delivered MAC-d PDUs and MAC-c PDUs for CCCH, BCCH and PCCH
logical channels.
**\- In-sequence delivery and assembly/disassembly of higher layer PDUs on
E-DCH**. The transmitting MAC-es/MAC-e or MAC-i/is entity assembles the data
block payload for the MAC-e/MAC-i PDUs from the delivered MAC-d PDUs. For DTCH
and DCCH transmission, the receiving MAC-es or MAC-is entity is then
responsible for the reordering of the received data blocks according to the
received TSN and Node-B tagging information, per re-ordering queue, and then
disassembling the data block into MAC-d PDUs for in-sequence delivery to the
higher layers. For CCCH transmission, the receiving MAC-is entity is then
responsible for the reordering of the received data blocks according to the
received TSN and Node-B tagging information, then disassembling the data block
into a MAC-c PDU. If more then one MAC-is PDU was received, the added check
sum is removed and is verified, before delivery to the higher layers. A
failure to verify the checksum results in discarding the MAC-c PDU.
### 5.3.2 RLC Services and Functions
This subclause provides an overview on services and functions provided by the
RLC sublayer. A detailed description of the RLC protocol is given in [8].
#### 5.3.2.1 Services provided to the upper layer
**\- Transparent data transfer**. This service transmits upper layer PDUs
without adding any protocol information, possibly including
segmentation/reassembly functionality.
**\- Unacknowledged data transfer**. This service transmits upper layer PDUs
without guaranteeing delivery to the peer entity. The unacknowledged data
transfer mode has the following characteristics:
**-** Detection of erroneous data: The RLC sublayer shall deliver only those
SDUs to the receiving upper layer that are free of transmission errors by
using the sequence-number check function.
**-** Immediate delivery: The receiving RLC sublayer entity shall deliver a
SDU to the upper layer receiving entity as soon as it arrives at the receiver.
\- Duplication avoidance and reordering: Alternative to immediate delivery,
the RLC sublayer shall deliver SDUs to the receiving upper layer entity in the
same order as the transmitting upper layer entity submits them to the RLC
sublayer without duplication. SDUs may be delayed by this procedure to ensure
in-sequence delivery.
\- Out-of-sequence SDU delivery: Alternative to immediate delivery, the RLC
sublayer shall deliver SDUs to the upper layer receiving entity as soon as
they can be recovered from PDUs, without waiting for earlier in-sequence SDUs
to be recovered.
\- Sequence-number delivery to JBM.
**\- Acknowledged data transfer**. This service transmits upper layer PDUs and
guarantees delivery to the peer entity. In case RLC is unable to deliver the
data correctly, the user of RLC at the transmitting side is notified. For this
service, both in-sequence and out-of-sequence delivery are supported. In many
cases a upper layer protocol can restore the order of its PDUs. As long as the
out-of-sequence properties of the lower layer are known and controlled (i.e.
the upper layer protocol will not immediately request retransmission of a
missing PDU) allowing out-of-sequence delivery can save memory space in the
receiving RLC. The acknowledged data transfer mode has the following
characteristics:
**-** Error-free delivery: Error-free delivery is ensured by means of
retransmission. The receiving RLC entity delivers only error-free SDUs to the
upper layer.
**-** Unique delivery: The RLC sublayer shall deliver each SDU only once to
the receiving upper layer using duplication detection function.
**-** In-sequence delivery: RLC sublayer shall provide support for in-order
delivery of SDUs, i.e., RLC sublayer should deliver SDUs to the receiving
upper layer entity in the same order as the transmitting upper layer entity
submits them to the RLC sublayer.
**-** Out-of-sequence delivery: Alternatively to in-sequence delivery, it
shall also be possible to allow that the receiving RLC entity delivers SDUs to
upper layer in different order than submitted to RLC sublayer at the
transmitting side.
**\- Maintenance of QoS as defined by upper layers.** The retransmission
protocol shall be configurable by layer 3 to provide different levels of QoS.
This can be controlled.
**\- Notification of unrecoverable errors**. RLC notifies the upper layer of
errors that cannot be resolved by RLC itself by normal exception handling
procedures, e.g. by adjusting the maximum number of retransmissions according
to delay requirements.
For AM RLC, there is only one RLC entity per Radio Bearer. For UM and TM RLC,
there is one or two (one for each direction) RLC entities per Radio Bearer.
#### 5.3.2.2 RLC Functions
**\- Segmentation and reassembly.** This function performs
segmentation/reassembly of variable-length upper layer PDUs into/from smaller
RLC PDUs. The RLC PDU size is either fixed (a semi static variable configured
by upper layers) or flexible (automatically adjusted to the incoming SDU size)
depending on the configuration. Flexible RLC PDU size is only supported when
mapped on HS-DSCH or E-DCH.
**\- Concatenation.** If the contents of an RLC SDU cannot be carried by one
RLC PDU, the first segment of the next RLC SDU may be put into the RLC PDU in
concatenation with the last segment of the previous RLC SDU.
**\- Padding.** When concatenation is not applicable and the remaining data to
be transmitted does not fill an entire RLC PDU of given size, the remainder of
the data field shall be filled with padding bits.
**\- Transfer of user data.** This function is used for conveyance of data
between users of RLC services. RLC supports acknowledged, unacknowledged and
transparent data transfer. QoS setting controls transfer of user data.
**\- Error correction.** This function provides error correction by
retransmission (e.g. Selective Repeat, Go Back N, or a Stop-and-Wait ARQ) in
acknowledged data transfer mode.
**\- In-sequence delivery of upper layer PDUs**. This function preserves the
order of upper layer PDUs that were submitted for transfer by RLC using the
acknowledged data transfer service. If this function is not used, out-of-
sequence delivery is provided.
**\- Duplicate Detection.** This function detects duplicated received RLC PDUs
and ensures that the resultant upper layer PDU is delivered only once to the
upper layer.
**\- Flow control**. This function allows an RLC receiver to control the rate
at which the peer RLC transmitting entity may send information.
**\- Sequence number check.** This function is used in unacknowledged mode and
guarantees the integrity of reassembled PDUs and provides a mechanism for the
detection of corrupted RLC SDUs through checking sequence number in RLC PDUs
when they are reassembled into a RLC SDU. A corrupted RLC SDU will be
discarded.
**\- Protocol error detection and recovery**. This function detects and
recovers from errors in the operation of the RLC protocol.
**\- Ciphering**. This function prevents unauthorised acquisition of data.
Ciphering is performed in RLC layer for non-transparent RLC mode. Details of
the security architecture are specified in [15].
**\- SDU discard**. This function allows an RLC transmitter to discharge RLC
SDU from the buffer.
### 5.3.3 PDCP Services and Function
This subclause provides an overview on services and functions provided by the
Packet Data Convergence Protocol (PDCP). A detailed description of the PDCP is
given in [9].
#### 5.3.3.1 PDCP Services provided to upper layers
**-** PDCP SDU delivery.
**-** CS counter delivery to JBM.
#### 5.3.3.2 PDCP Functions
**\- Header compression and decompression.** Header compression and
decompression of IP data streams (e.g., TCP/IP and RTP/UDP/IP headers) at the
transmitting and receiving entity, respectively. The header compression method
is specific to the particular network layer, transport layer or upper layer
protocol combinations e.g. TCP/IP and RTP/UDP/IP.
**\- Transfer of user data.** Transmission of user data means that PDCP
receives PDCP SDU from the NAS and forwards it to the RLC layer and vice
versa.
**\- Support for lossless SRNS relocation or lossless DL RLC PDU size
change.** Maintenance of PDCP sequence numbers for radio bearers that are
configured to support lossless SRNS relocation or lossless DL RLC PDU size
change.
**-** **CS counter.** A CS counter provides the PDCP PDU with a timestamp
value called the \'CS counter\'. The value of the \'CS counter\' is set to the
first to fifth LSBs of the CFN at which the packet is received from higher
layers.
### 5.3.4 Broadcast/Multicast Control - Services and functions
This subclause provides an overview on services and functions provided by the
BMC sublayer. A detailed description of the BMC protocol is given in [10].
#### 5.3.4.1 BMC Services
The BMC-SAP provides a broadcast/multicast transmission service in the user
plane on the radio interface for common user data in unacknowledged mode.
#### 5.3.4.2 BMC Functions
**\- Storage of Cell Broadcast Messages.\** The BMC stores the Cell Broadcast
messages received over the CBC-RNC interface for scheduled transmission.
\- **Traffic volume monitoring and radio resource request for CBS.\** At the
UTRAN side, the BMC calculates the required transmission rate for Cell
Broadcast Service based on the messages received over the CBC-RNC interface,
and requests for appropriate CTCH/FACH resources from RRC.
\- **Scheduling of BMC messages.** \ The BMC receives scheduling information
together with each Cell Broadcast message over the CBC-RNC-interface. Based on
this scheduling information, at the UTRAN side, BMC generates schedule
messages and schedules BMC message sequences accordingly. At the UE side, BMC
evaluates the schedule messages and indicates scheduling parameters to RRC,
which are used by RRC to configure the lower layers for CBS discontinuous
reception.
**\- Transmission of BMC messages to UE.** \ This function transmits the BMC
messages (Scheduling and Cell Broadcast messages) according to schedule.
**\- Delivery of Cell Broadcast messages to upper layer (NAS).** \ This
functions delivers the received Cell Broadcast messages to upper layer (NAS)
in the UE. Only non-corrupted Cell Broadcast messages are delivered.
### 5.3.5 Data flows through Layer 2
Data flows through layer 2 are characterised by the applied data transfer
modes on RLC (acknowledged, unacknowledged and transparent transmission) in
combination with the data transfer type on MAC, i.e. whether or not a MAC
header is required. The case where no MAC header is required is referred to as
\"transparent\" MAC transmission. Acknowledged and unacknowledged RLC
transmissions both require a RLC header. In unacknowledged transmission, only
one type of unacknowledged data PDU is exchanged between peer RLC entities. In
acknowledged transmission, both (acknowledged) data PDUs and control PDUs are
exchanged between peer RLC entities.
The resulting different data flow cases are illustrated in Figures 6 - 9\. On
the level of detail presented here, differences between acknowledged and
unacknowledged RLC transmission are not visible. Acknowledged and
unacknowledged RLC transmission is shown as one case, referred to as non-
transparent RLC.
NOTE: The term \"transparent transmission\" is used here to characterise the
case where a protocol, MAC or RLC, does not require any protocol control
information (e.g. header). In transparent transmission mode, however, some
protocol functions may still be applied. In this case an entity of the
respective protocol must be present even when the protocol is transparent. For
the RLC protocol the segmentation/reassembly function may be applied. This can
be performed without segmentation header when a given higher layer PDU fits
into a fixed number of RLC PDUs to be transferred in a given transmission time
interval. In this case segmentation/reassembly follows predefined rules known
to sending and receiving RLC entities. For instance in the user plane, the
segmentation/reassembly function is needed for the case of real-time services
using high and possibly variable bit rates. For such services higher layer
PDUs shall be segmented into reasonably sized RLC PDUs of fixed length
allowing efficient FCS error detection on the physical layer. The higher layer
PDU can be reassembled by simply concatenating all RLC PDUs included in a
transport block set as implied by the used transport format.
Figure 6 and Figure 7 illustrate the data flows for transparent RLC with
transparent and non-transparent MAC transmission, respectively.
Figure 8 and Figures 9, 9a, 9a1, 9b, 9c illustrate the data flows for non-
transparent RLC with transparent and non-transparent MAC transmission,
respectively.
Figure 10 illustrates the data flow for transparent RLC with transparent and
non-transparent MAC transmission.
In Figure 9a, with MAC-hs configuration, MAC-d operation is non-transparent,
when multiple logical channels are multiplexed on the same MAC-d flow,
otherwise it is transparent.
A number of MAC PDUs shown in the figures shall comprise a transport block
set. Note, however, that in all cases a transport block set must not
necessarily match with a RLC SDU. The span of a transport block set can be
smaller or larger than an RLC SDU.
Each mapping between a logical channel and a transport channel as defined in
Figure 4 and Figure 5 in combination with the respective RLC transmission mode
implies a certain data flow that is specified on a general level in the
following.
Figure 6: Data flow for transparent RLC and MAC
Figure 7: Data flow for transparent RLC and non-transparent MAC
Figure 8: Data flow for non-transparent RLC and transparent MAC
Figure 9: Data flow for non-transparent RLC and MAC
Figure 9a: Data flow for non-transparent RLC and MAC mapped to HS-DSCH (MAC-hs
configured)
Figure 9a1: Data flow for non-transparent RLC and MAC mapped to HS-DSCH (MAC-
ehs configured)
Figure 9b: Data flow for non-transparent RLC and MAC mapped to E-DCH (MAC-e/es
configured)
Figure 9c: Data flow for non-transparent RLC and MAC mapped to E-DCH (MAC-i/is
configured)
{width="6.497222222222222in" height="2.888888888888889in"}
Figure 10: CCCH data for transparent RLC and non-transparent MAC mapped to
E-DCH (MAC-i/is configured, FDD and 1.28 Mcps TDD only)
#### 5.3.5.1 Data flow for BCCH mapped to BCH
All RRC PDUs transmitted on BCCH have a fixed length and fit into one RLC PDU
(and, equivalently, MAC PDU, as defined by the transport format). No RLC
header is needed, i.e. the transparent data transfer mode of RLC is applied.
No MAC header is needed since only one BCCH logical channel is mapped onto a
BCH. Figure 6 is applicable.
#### 5.3.5.2 Data flow for BCCH mapped to FACH
No RLC header is needed, i.e. the transparent data transfer mode of RLC is
applied. A MAC header is required for identification of the logical channel
carried by the FACH. The data flow shown in Figure 7 is applicable.
#### 5.3.5.3 Data flow for PCCH mapped to PCH
No RLC or MAC header is needed, i.e. the data flow in Figure 6 is applicable.
#### 5.3.5.4 Data flow for CCCH mapped to FACH/RACH
For CCCH, transparent transmission mode on RLC is employed on the uplink (when
mapped to RACH). Unacknowledged transmission mode on RLC is employed on the
downlink (when mapped to FACH). A MAC header is used for logical channel
identification (BCCH, CCCH, CTCH, SHCCH, DCCH, DTCH). If the transparent RLC
transfer mode is applied, the data flow Figure 7 is applicable. If the
unacknowledged RLC transfer mode is applied, the data flow Figure 9 is
applicable.
#### 5.3.5.5 Data flow for SHCCH mapped to USCH
For SHCCH mapped on USCH, transparent transmission mode on RLC is employed. A
MAC header may be used for logical channel identification (SHCCH, DCCH, DTCH).
When no MAC header is used, SHCCH must be the only channel mapped to
USCH/DSCH. Depending on whether the MAC header is needed or not, either the
data flow Figure 6 or Figure 7 is applicable.
#### 5.3.5.6 Data flow for SHCCH mapped to FACH/RACH
For SHCCH, transparent transmission mode on RLC is employed on the uplink
(when mapped to RACH). Unacknowledged transmission mode on RLC is employed on
the downlink (when mapped to FACH). A MAC header may be used for logical
channel identification (BCCH, CCCH, CTCH, SHCCH, DCCH, DTCH). When no MAC
header is used, SHCCH must be the only channel mapped to RACH/FACH. If the
transparent RLC transfer mode is applied, depending on whether the MAC header
is needed or not, either the data flow Figure 6 or Figure 7 is applicable. If
the unacknowledged RLC transfer mode is applied, depending on whether the MAC
header is needed or not, either the data flow Figure 8 or Figure 9 is
applicable.
#### 5.3.5.7 Data flow for DCCH mapped to FACH/RACH
For DCCH, both unacknowledged and acknowledged transmission mode on RLC is
employed. A MAC header is mandatory for FACH/RACH carrying DCCH. The data flow
shown in Figure 9 is applicable.
#### 5.3.5.8 Data flow for DCCH mapped to DSCH
For DCCH, both unacknowledged and acknowledged transmission mode on RLC is
employed. A MAC header is optional, i.e. either the data flow in Figure 8 or
Figure 9 is applicable.
#### 5.3.5.9 Data flow for DCCH mapped to USCH
For DCCH, both unacknowledged and acknowledged transmission mode on RLC is
employed. A MAC header is needed if DCCH and DTCH logical channels are
multiplexed in MAC before mapping to a USCH, i.e. either the data flow in
Figure 8 or Figure 9 is applicable.
#### 5.3.5.10 Void
#### 5.3.5.11 Data flow for DTCH (non-transparent RLC) mapped to FACH/RACH
Mapping to FACH/RACH implies a DTCH with acknowledged or unacknowledged
transmission on RLC. A MAC header is mandatory for FACH/RACH when carrying
DTCH. The data flow shown in Figure 9 is applicable.
#### 5.3.5.12 Data flow for DTCH (non-transparent RLC) mapped to DSCH
Mapping to DSCH implies a DTCH with acknowledged or unacknowledged
transmission on RLC. A MAC header is optional, i.e. either the data flow in
Figure 8 or Figure 9 is applicable.
#### 5.3.5.13 Data flow for DTCH (non-transparent RLC) mapped to USCH
Mapping to USCH implies a DTCH with acknowledged or unacknowledged
transmission on RLC. A MAC header is needed if DCCH and DTCH logical channels
are multiplexed in MAC before mapping to a USCH, i.e. either the data flow in
Figure 8 or Figure 9 is applicable.
#### 5.3.5.14 Data flow for DTCH (transparent RLC) mapped to DCH
Continuous DTCH data stream is segmented into transport blocks on RLC and
mapped on a DCH transport channel on MAC. The transport block size is
naturally implied by the data rate. Both RLC and MAC sublayers are
transparent, i.e. no protocol control information is added, when no
multiplexing of DTCH on MAC is applied. The data flow shown in Figure 6 is
applicable. If multiplexing on MAC is performed, a MAC header is needed, and
Figure 7 applies.
#### 5.3.5.15 Data flow for DTCH (non-transparent RLC) mapped to DCH
In this case acknowledged or unacknowledged transmission on RLC is applied. A
MAC header is needed only if multiple DTCH logical channels are multiplexed in
MAC before mapping to a DCH, i.e. either the data flow in Figure 8 or Figure 9
is applicable.
#### 5.3.5.16 Void
#### 5.3.5.17 Data flow for DCCH mapped to DCH
In this case non-transparent or transparent transmission mode on RLC is
applied. A MAC header is needed only if DCCH and DTCH logical channels are
multiplexed in MAC before mapping to a DCH, i.e. either the data flow in
Figure 8 or Figure 9 is applicable.
#### 5.3.5.18 Data flow for CTCH mapped to FACH
For CTCH, unacknowledged transmission mode on RLC is employed. A MAC header is
used for logical channel identification (BCCH, CCCH, CTCH, SHCCH, DCCH, DTCH).
The data flow shown in Figure 9 is applicable.
#### 5.3.5.19 Data flow for DCCH mapped to HS-DSCH
For DCCH, both unacknowledged and acknowledged transmission mode on RLC is
employed. _With MAC-hs configuration, a MAC-d header is needed only if DCCH
and DTCH logical channels are multiplexed on the same MAC-d flow, i.e. the
data flow in Figure 9a is applicable. With MAC-ehs configuration, a MAC-d
header is not needed, i.e. the data flow in Figure 9a1 is applicable._
#### 5.3.5.20 Data flow for DTCH (non-transparent RLC) mapped to HS-DSCH
Mapping to HS-DSCH implies a DTCH with acknowledged or unacknowledged
transmission on RLC. With MAC-hs configuration, a MAC-d header is needed only
if DCCH and DTCH logical channels are multiplexed on the same MAC-d flow, i.e.
the data flow in Figure 9a is applicable. With MAC-ehs configuration, a MAC-d
header is not needed, i.e. the data flow in Figure 9a1 is applicable.
#### 5.3.5.21 Data flow for DCCH mapped to E-DCH
For DCCH, both unacknowledged and acknowledged transmission mode on RLC is
employed. A MAC header is mandatory when the DCCH is mapped to the E-DCH, i.e.
the data flow in figure 9b and 9c is applicable.
#### 5.3.5.22 Data flow for DTCH (non-transparent RLC) mapped to E-DCH
Mapping to E-DCH implies a DTCH with acknowledged or unacknowledged
transmission on RLC. A MAC header is mandatory when the DTCH is mapped to the
E-DCH, i.e. the data flow in figure 9b and 9c is applicable.
#### 5.3.5.23 Data flow for MCCH (non-transparent RLC) mapped to FACH
For MCCH mapped to FACH, unacknowledged transmission mode on RLC is employed.
In case of MAC multiplexing the MAC header is needed for logical channel
service multiplexing. The data flow in either Figure 8 or Figure 9 is
applicable.
#### 5.3.5.24 Data flow for MSCH (non-transparent RLC) mapped to FACH
For MSCH mapped to FACH, unacknowledged transmission mode on RLC is employed.
In case of MAC multiplexing the MAC header is needed for logical channel
service multiplexing. The data flow in either Figure 8 or Figure 9 is
applicable.
#### 5.3.5.25 Data flow for MTCH (non-transparent RLC) mapped to FACH
For MTCH mapped to FACH, unacknowledged transmission mode on RLC is employed.
In case of MAC multiplexing the MAC header is needed for logical channel
service multiplexing. The data flow in either Figure 8 or Figure 9 is
applicable.
#### 5.3.5.26 Data flow for CCCH mapped to HS-DSCH/RACH (FDD only)
In FDD, for CCCH, transparent transmission mode on RLC is employed on the
uplink (when mapped to RACH). Unacknowledged transmission mode on RLC is
employed on the downlink (when mapped to HS-DSCH). A MAC header is used for
logical channel identification (CCCH). If the transparent RLC transfer mode is
applied, the data flow Figure 7 is applicable. If the unacknowledged RLC
transfer mode is applied, the data flow Figure 9a is applicable.
#### 5.3.5.27 Data flow for PCCH mapped to HS-DSCH
No RLC header is needed. A MAC header is mandatory when the PCCH is mapped to
the HS-DSCH. For FDD, an H-RNTI specific for PCCH transmission is used on HS-
SCCH to identify the logical channel carried by the HS-DSCH. For 1.28 Mcps
TDD, the HS-SCCH less operation is used. The logical channel ID in MAC header
is set to a reserved value.
#### 5.3.5.28 Data flow for BCCH mapped to HS-DSCH (FDD and 1.28 Mcps TDD
only)
No RLC header is needed, i.e. the transparent data transfer mode of RLC is
applied. A MAC header is mandatory when the BCCH is mapped to the HS-DSCH. An
H-RNTI specific for BCCH transmission is used on HS-SCCH to identify the
logical channel carried by the HS-DSCH. The logical channel ID in MAC header
is set to a reserved value.
#### 5.3.5.29 Data flow for CCCH mapped to HS-DSCH/E-DCH (FDD and 1.28 Mcps
TDD only)
For CCCH transmission, transparent transmission mode on RLC is employed on the
uplink (when mapped to E-DCH). Unacknowledged transmission mode on RLC is
employed on the downlink (when mapped to HS-DSCH). A MAC header is used for
logical channel identification (CCCH). If the transparent RLC transfer mode is
applied, the data flow Figure 10 is applicable. If the unacknowledged RLC
transfer mode is applied, the data flow Figure 9a is applicable.
### 5.3.6 Transport Channel, Logical Channel and MAC-d flow Numbering
The UE model for transport channel and logical channel numbering is defined by
the following:
\- For FACH transport channels:
\- A transport channel identity is associated with each FACH transport
channel. Each identity is unique within the downlink FACHs mapped onto the
same physical channel.
\- Transport channel identities can be allocated non sequentially.
\- Transport channel identity is not used to determine the radio bearer
mapping. The transport channels that can be used are determined from the
available physical channels.
\- Each downlink DCCH and DTCH has a unique logical channel identity.
\- A MAC MBMS identity (MBMS-Id) is associated with each MBMS service carried
on MTCH on FACH. The identity is unique within a FACH and the mapping of the
MBMS service id to the MBMS-Id is provided on the MCCH.
\- For RACH transport channels:
\- A transport channel identity is associated with each RACH transport
channel. Each identity is unique within the RACHs mapped onto the same PRACH.
\- Transport channel identities can be allocated non sequentially.
\- Transport channel identity is not used to determine the radio bearer
mapping. The transport channels that can be used are determined from the
available physical channels.
\- Each uplink DCCH and DTCH has a unique logical channel identity.
\- For downlink DCH and DSCH transport channels:
\- A transport channel identity is associated with each downlink DCH transport
channel. Each identity is unique within the downlink DCHs configured in the
UE;
\- Transport channel identities can be allocated non sequentially.
\- A transport channel identity is associated with each DSCH transport
channel. Each identity is unique within the DSCHs configured in the UE;
\- A logical channel identity is associated with each logical channel that is
multiplexed with other logical channels before being mapped to a transport
channel. Each identity is unique within the logical channels mapped to the
same transport channel.
\- A logical channel that is mapped to DCH and DSCH simultaneously in TDD has
one logical channel identity.
\- For HS-DSCH, when MAC-hs is configured:
\- A MAC-flow identity is associated with each MAC-d flow. Each identity is
unique within the MAC-d flows configured in the UE;
\- A logical channel identity is associated with each logical channel that is
multiplexed with other logical channels before being mapped to a MAC-d flow.
Each identity is unique within the logical channels mapped to the same MAC-d
flow;
\- A logical channel that is mapped to DCH and HS-DSCH simultaneously has one
logical channel identity.
\- For HS-DSCH, when MAC-ehs is configured:
\- A reordering queue identity is associated with each reordering queue. Each
identity is unique within the reordering queues configured in the UE;
\- A logical channel identity is associated with each logical channel that is
mapped to a reordering queue. Each identity is unique within the logical
channels mapped to any reordering queue;
\- A logical channel that is mapped to DCH and HS-DSCH simultaneously has one
logical channel identity.
\- For uplink DCH and USCH transport channels:
\- A transport channel identity is associated with each uplink DCH transport
channel. Each identity is unique within the uplink DCHs configured in the UE;
\- Transport channel identities can be allocated non sequentially.
\- A transport channel identity is associated with each USCH transport
channel. Each identity is unique within the USCHs configured in the UE;
\- A logical channel identity is associated with each logical channel that is
multiplexed with other logical channels before being mapped to a transport
channel. Each identity is unique within the logical channels mapped to the
same transport channel.
\- For E-DCH, when MAC-e/es is configured:
\- A MAC-flow identity is associated with each MAC-d flow. Each identity is
unique within the MAC-d flows configured in the UE;
\- A logical channel identity is associated with each logical channel that is
mapped to a MAC-d flow. Each identity is unique within the logical channels
mapped to any MAC-d flow;
\- A DDI (Data Description Identity) is associated with each MAC-d PDU. The
DDI values are unique within the UE;
\- In addition to indicating the MAC-d PDU size, the DDI value indicates MAC-d
flow and logical channel for the MAC-d PDU within the MAC-e PDU.
\- For E-DCH, when MAC-i/is is configured:
\- A MAC-flow identity is associated with each MAC-d flow. Each identity is
unique within the MAC-d flows configured in the UE;
\- A logical channel identity is associated with each logical channel that is
mapped to a MAC-d flow. Each identity is unique within the logical channels
mapped to any MAC-d flow;
\- A LCH-ID (Logical channel identity) is associated with each MAC-d PDU. The
LCH-ID values indicate the logical channel for the MAC-d PDU within the MAC-i
PDU.
\- In FDD only, when the UE is in CELL_FACH state, an E-RNTI is associated
with each MAC-d PDU until an E-AGCH with the UE's E-RNTI has been received
(through an ID-specific CRC attachment).\ For FDD and 1.28 Mcps TDD, one LCH-
id value in the MAC-is header identifies MAC-d flows containing CCCH data.
## 5.4 Layer 3 - Uu Stratum Services and Functions
This subclause provides an overview on Layer 3 services and functions provided
by the Uu Stratum as a whole. A detailed description of the RRC protocol is
given in [11]. Examples of structured procedures involving RRC in Idle Mode
and Connected Mode are described in [5] and [6], respectively.
### 5.4.1 Uu Stratum services
#### 5.4.1.1 General Control
The GC SAP provides an information broadcast service. This service broadcasts
information to all UEs in a certain geographical area. The basic requirements
from such service are:
**-** It should be possible to broadcast non-access stratum information in a
certain geographical area.
**-** The information is transferred on an unacknowledged mode link.
Unacknowledged mode means that the delivery of the broadcast information can
not be guaranteed (typically no retransmission scheme is used). It seems
reasonable to use an unacknowledged mode link since the information is
broadcast to a lot of UEs and since broadcast information often is repeated
periodically.
**-** It should be possible to do repeated transmissions of the broadcast
information (how it is repeated is controlled by the non-access stratum).
**-** The point where the UE received the broadcast information should be
included, when the access stratum delivers broadcast information to the non-
access stratum.
#### 5.4.1.2 Notification
The Nt SAP provides paging and notification broadcast services. The paging
service sends information to a specific UE(s). The information is broadcast in
a certain geographical area but addressed to a specific UE(s). The basic
requirements from such service are:
**-** It should be possible to broadcast paging information to a number of UEs
in a certain geographical area.
**-** The information is transferred on an unacknowledged mode link. It is
assumed that the protocol entities in non-access stratum handle any kind of
retransmission of paging information.
The notification broadcast service broadcasts information to all UEs in a
certain geographical. The basic requirements from this service are typically
the same as for the information broadcast service of the GC SAP:
**-** It should be possible to broadcast notification information in a certain
geographical area.
**-** The information is transferred on an unacknowledged mode link.
#### 5.4.1.3 Dedicated Control
The DC SAP provides services for establishment/release of a connection and
transfer of messages using this connection. It should also be possible to
transfer a message during the establishment phase. The basic requirements from
the establishment/release services are:
**-** It should be possible to establish connections (both point and group
connections).
**-** It should be possible to transfer an initial message during the
connection establishment phase. This message transfer has the same
requirements as the information transfer service.
**-** It should be possible to release connections.
The information transfer service sends a message using the earlier established
connection. According to [1] it is possible to specify the quality of service
requirements for each message. A finite number of quality of service classes
will be specified in [1], but currently no class has been specified. In order
to get an idea of the basic requirements, the CC and MM protocols in GSM are
used as a reference. A GSM based core network is chosen since it is one main
option for UMTS. Considering the existing GSM specification of CC and MM the
basic requirements from the information transfer service provided by the
\'Duplication avoidance\' function are (these are some of the services
provided by the combination of a duplication layer, RR and the data link layer
in GSM):
**-** In-sequence transfer of messages\ Messages are delivered to the NAS on
the receiver side exactly in the order they have been submitted by the NAS on
the sending side, without loss or duplication, except possibly for the loss of
last messages in case of connection abortion.
**-** Priority handling\ If SMS messages should be transported through the
control plane it should be possible to give higher priority to signalling
messages.
The CC and MM protocols also expect other services, which can not be supported
by the current primitives of the DC SAP, e.g. indication of radio link
failure.
The information transfer service is provided by a combination of the services
provided by the data link layer, RNC and the \'Duplication avoidance\'
function.
### 5.4.2 RRC functions
The Radio Resource Control (RRC) layer handles the control plane signalling of
Layer 3 between the UEs and UTRAN. The RRC performs the following functions:
**\- Broadcast of information provided by the non-access stratum (Core
Network).** The RRC layer performs system information broadcasting from the
network to all UEs. The system information is normally repeated on a regular
basis. The RRC layer performs the scheduling, segmentation and repetition.
This function supports broadcast of higher layer (above RRC) information. This
information may be cell specific or not. As an example RRC may broadcast Core
Network location service area information related to some specific cells.
**\- Broadcast of information related to the access stratum.** The RRC layer
performs system information broadcasting from the network to all UEs. The
system information is normally repeated on a regular basis. The RRC layer
performs the scheduling, segmentation and repetition. This function supports
broadcast of typically cell-specific information.
**\- Establishment, re-establishment, maintenance and release of an RRC
connection between the UE and UTRAN.** The establishment of an RRC connection
is initiated by a request from higher layers at the UE side to establish the
first Signalling Connection for the UE. The establishment of an RRC connection
includes an optional cell re-selection, an admission control, and a layer 2
signalling link establishment. The release of an RRC connection can be
initiated by a request from higher layers to release the last Signalling
Connection for the UE or by the RRC layer itself in case of RRC connection
failure. In case of connection loss, the UE requests re-establishment of the
RRC connection. In case of RRC connection failure, RRC releases resources
associated with the RRC connection.
**\- Establishment, reconfiguration and release of Radio Bearers.** The RRC
layer can, on request from higher layers, perform the establishment,
reconfiguration and release of Radio Bearers in the user plane. A number of
Radio Bearers can be established to an UE at the same time. At establishment
and reconfiguration, the RRC layer performs admission control and selects
parameters describing the Radio Bearer processing in layer 2 and layer 1,
based on information from higher layers.
**\- Assignment, reconfiguration and release of radio resources for the RRC
connection.** The RRC layer handles the assignment of radio resources (e.g.
codes) needed for the RRC connection including needs from both the control and
user plane. The RRC layer may reconfigure radio resources during an
established RRC connection. This function includes coordination of the radio
resource allocation between multiple radio bearers related to the same RRC
connection. RRC controls the radio resources in the uplink and downlink such
that UE and UTRAN can communicate using unbalanced radio resources (asymmetric
uplink and downlink). RRC signals to the UE to indicate resource allocations
for purposes of handover to GSM or other radio systems.
**\- RRC connection mobility functions[.]{.underline}** The RRC layer performs
evaluation, decision and execution related to RRC connection mobility during
an established RRC connection, such as handover, preparation of handover to
GSM or other systems, cell re-selection and cell/paging area update
procedures, based on e.g. measurements done by the UE**.**
**\- Paging/notification.** The RRC layer can broadcast paging information
from the network to selected UEs. Higher layers on the network side can
request paging and notification. The RRC layer can also initiate paging during
an established RRC connection.
**\- Routing of higher layer PDUs.** This function performs at the UE side
routing of higher layer PDUs to the correct higher layer entity, at the UTRAN
side to the correct RANAP entity.
**\- Control of requested QoS**. This function shall ensure that the QoS
requested for the Radio Bearers can be met. This includes the allocation of a
sufficient number of radio resources.
**\- UE measurement reporting and control of the reporting.** The measurements
performed by the UE are controlled by the RRC layer, in terms of what to
measure, when to measure and how to report, including both UMTS air interface
and other systems. The RRC layer also performs the reporting of the
measurements from the UE to the network.
**\- Outer loop power control.** The RRC layer controls setting of the target
of the closed loop power control.
**\- Control of ciphering.** The RRC layer provides procedures for setting of
ciphering (on/off) between the UE and UTRAN. Details of the security
architecture are specified in [15].
**\- Slow DCA**. Allocation of preferred radio resources based on long-term
decision criteria. It is applicable only in TDD mode.
  * **Arbitration of radio resources on uplink DCH**. This function > controls the allocation of radio resources on uplink DCH on a fast > basis, using a broadcast channel to send control information to > all involved users.
NOTE: This function is implemented in the CRNC.
**\- Initial cell selection and re-selection in idle mode.** Selection of the
most suitable cell based on idle mode measurements and cell selection
criteria.
**\- Integrity protection.** This function adds a Message Authentication Code
(MAC-I) to those RRC messages that are considered sensitive and/or contain
sensitive information. The mechanism how the MAC-I is calculated is described
in [14].
**\- Initial Configuration for CBS** \ This function performs the initial
configuration of the BMC sublayer.
\- **Allocation of radio resources for CBS** \ This function allocates radio
resources for CBS based on traffic volume requirements indicated by BMC. The
radio resource allocation set by RRC (i.e. the schedule for mapping of CTCH
onto FACH/S-CCPCH) is indicated to BMC to enable generation of schedule
messages. The resource allocation for CBS shall be broadcast as system
information.
**\- Configuration for CBS discontinuous reception** \ This function
configures the lower layers (L1, L2) of the UE when it shall listen to the
resources allocated for CBS based on scheduling information received from BMC.
**\- Timing advance control.** The RRC controls the operation of timing
advance. It is applicable only in 3.84/7.68 Mcps TDD.
**\- MBMS control.** The RRC controls the operation of MBMS point-to-point and
point-to-multipoint radio bearers.
## 5.5 Interactions between RRC and lower layers in the C plane
Figure 10: Interactions between RRC and lower layers
The RRC protocol controls and signals the allocation of radio resources to the
UE. RRC allows MAC to arbitrate between users and Radio Bearers within the
radio resource allocation. The RRC uses the measurements done by the lower
layers to determine which radio resources that are available. Therefore it is
a need for a measurement report from the UE RRC to the UTRAN RRC. Figure 10
illustrates the principle. The local control and local measurements reporting
is handled through the control SAPs between RRC and the lower layers.
## 5.6 Protocol termination
This subclause specifies in which node of the UTRAN the radio interface
protocols are terminated, i.e. where within UTRAN the respective protocol
services are accessible. Dashed lines indicate those protocols whose presence
is dependent on the service provided to upper layers.
### 5.6.1 Protocol termination for DCH
Figure 11 and Figure 12 show the protocol termination for DCH for the control
and user planes, respectively. The part of physical layer terminating in the
Serving RNC is the topmost macro-diversity combining and splitting function
for the FDD mode. If no macrodiversity applies, the physical layer is
terminated in Node B.
Figure 11: Protocol Termination for DCH, control plane
Figure 12: Protocol Termination for DCH, user plane
### 5.6.2 Protocol termination for RACH/FACH
Figure 13 and Figure 14 show the protocol termination for RACH/FACH for the
control and user planes, respectively. Control plane termination refers to the
case where RACH/FACH carry dedicated, common or shared control information
(i.e. CCCH, DCCH or SHCCH, and in the downlink possibly also BCCH). User plane
termination refers to the case where RACH/FACH carry dedicated user data
(DTCH) or common user data (CTCH).
It is assumed that macrodiversity/soft handover is not applied for RACH/FACH.
Therefore, the physical layer terminates in Node B. For RACH/FACH carrying
DCCH, MAC is split between Controlling and Serving RNC. RLC, and in the C
plane also RRC terminate in the Serving RNC. Since Iur can support common
channel data streams, the users of that common channel can depend on different
SRNCs. However, they depend on the same Controlling RNC. Therefore, for a
given user, the Controlling RNC and the Serving RNC can be separate RNCs.
For FACH carrying BCCH, MAC, RLC and RRC are terminated in the CRNC.
For RACH/FACH carrying SHCCH, MAC, RLC and RRC are terminated in the
Controlling RNC (TDD only).
For RACH/FACH carrying CCCH, MAC, RLC and RRC are terminated in the RNC.
Figure 13: Protocol Termination for RACH/FACH, control plane
Figure 14: Protocol Termination for RACH/FACH, user plane
### 5.6.3 Void
### 5.6.4 Void
### 5.6.5 Protocol termination for DSCH
#### 5.6.5.1 DSCH definition
The DSCH is only supported for TDD. The DSCH is a resource that exists in
downlink only. It has only impact on the physical and transport channel
levels, so there is no definition of shared channel in the logical channels
provided by MAC.
The DSCH is a transport channel shared dynamically between several UEs. The
DSCH is mapped to one or several physical channels such that a specified part
of the downlink resources is employed. For the DSCH no macrodiversity is
applied, i.e. a specific DSCH is transmitted in a single cell only.
The DSCH is defined as a shared downlink channel for which resource allocation
is performed by RRC in Controlling RNC. The allocation messages, including UE
identification, are transmitted on SHCCH, which is mapped on RACH/FACH.
Several DSCH can be multiplexed on a CCTrCH in the physical layer, the
transport formats of the DSCHs have to be selected from the transport format
combination set of this CCTrCH. Each CCTrCH is mapped on one or more PDSCHs.
If the transport format combination subset of a CCTrCH contains more than one
transport format combination, a TFCI can be transmitted inside the PDSCH, or
blind detection can be applied in the UE.
Interleaving for the DSCH may be applied over a multiplicity of radio frames.
Nevertheless, here the basic case is considered where the interleaving is
rectangular for a given MAC PDU, and equal to one radio frame (10 ms). The
framing is synchronised on the SCH.
In every radio frame, one or several PDSCHs can be used in the downlink.
Therefore, the DSCH supports code multiplexing. MAC multiplexing of different
UEs shall not be applied within a radio frame, i.e. within one radio frame a
PDSCH is assigned to a single UE. However, MAC multiplexing is allowed on a
frame by frame basis, i.e. one PDSCH may be allocated to different UEs at each
frame.
Transport blocks on the DSCH may be of constant size, so that the Transport
Block Set may be derived from the code allocated to each UE on the DSCH. For
case B, the transport format combination set can change with each transmission
time interval.
#### 5.6.5.2 Resource allocation and UE identification on DSCH
The principles of capacity allocation and UE identification on the DSCH are
described in more detail below.
##### 5.6.5.2.1 Void
##### 5.6.5.2.2 UE requires a downlink SHCCH
The information which physical downlink shared channels to listen to and when,
is sent by RRC on the SHCCH logical channel, which is mapped on RACH and
USCH/FACH and DSCH. The transmitted Layer 3 messages contain information about
the used PDSCHs and the timing of the allocation.
#### 5.6.5.3 Model of DSCH in UTRAN
Figure 15 captures the working assumption on the Downlink Shared Channel
(DSCH). The two RLCs point to logical channel (DTCH) specific RLC-entities of
specific users while MAC refers to the provision of MAC sublayer functions for
all users.
The MAC sublayer of a DSCH is split between the Controlling RNC and SRNC. For
a given user, the RLC sublayer is terminated in its SRNC. Since Iur can
support DSCH data streams, the users on that DSCH can depend on different
SRNCs. For a given user, the Controlling RNC and the Serving RNC can be
separate RNCs. The MAC in the network takes care of mapping downlink data
either to a common channel (FACH, not shown in this figure), or to a DCH
and/or the DSCH.
Figure 15: Model of downlink shared channel (DSCH) in UTRAN (TDD only)
#### 5.6.5.4 Protocol termination
The protocol termination points for DSCH in control and user planes are
presented in Figure 16 and Figure 17, respectively. The DSCH is for TDD only.
Figure 16: Protocol termination points for DSCH, control plane (TDD only)
Figure 17: Protocol termination points for DSCH, user plane (TDD only)
### 5.6.6 Protocol termination for transport channel of type USCH
#### 5.6.6.1 USCH definition
The USCH is only supported for TDD. It is a resource that exists in uplink
only. It has only impact on the physical and transport channel levels, so
there is no definition of shared channel in the logical channels provided by
MAC.
The USCH is a transport channel shared dynamically between several UEs. The
USCH is mapped to one or several physical channels such that a specified part
of the uplink resources is employed.
The USCH is defined as a shared uplink channel for which resource allocation
is performed by RRC in Controlling RNC. The allocation requests and allocation
messages, including UE identification, are transmitted on SHCCH, which is
mapped on RACH and USCH/FACH and DSCH. Several USCHs can be multiplexed on a
CCTrCH in the physical layer, the transport formats of the USCHs have to be
selected from the transport format combination set of this CCTrCH. Each CCTrCH
is mapped on one or more PUSCHs. If the transport format combination subset of
a CCTrCH contains more than one transport format combination, a TFCI can be
transmitted inside the PUSCH, or blind detection can be applied in the Node B.
Interleaving for the USCH may be applied over a multiplicity of radio frames.
In every radio frame, one or several PUSCHs can be used in the uplink.
Therefore, the USCH supports physical channel multiplexing. MAC multiplexing
of different UEs shall not be applied within a radio frame, i.e. within one
radio frame a PUSCH is assigned to a single UE. However, MAC multiplexing is
allowed on a frame by frame basis, i.e. one PUSCH may be allocated to
different UEs at each frame.
The transport format combination set on the USCH can change with each
transmission time interval.
#### 5.6.6.2 Resource allocation and UE identification on USCH
The information which physical uplink shared channels to transmit on and when
is sent by RRC on the SHCCH logical channel, which is mapped on RACH and
USCH/FACH and DSCH. The transmitted Layer 3 messages contain information about
the assigned PUSCHs and the timing of the allocation.
#### 5.6.6.3 Model of USCH in UTRAN
Figure 18 captures the working assumption on the Uplink Shared Channel (USCH).
The two RLCs point to logical channel (DTCH) specific RLC-entities of specific
users while MAC refers to the provision of MAC sublayer functions for all
users.
The MAC sublayer of a USCH is split between the Controlling RNC and SRNC. For
a given user, the RLC sublayer is terminated in its SRNC. Since Iur can
support USCH data streams, the users on that USCH can depend on different
SRNCs. For a given user, the Controlling RNC and the Serving RNC can be
separate RNCs. The MAC in the network takes care of mapping uplink data either
from a common channel (RACH, not shown in this figure), DCH or the USCH.
Allocations of uplink capacity are requested by the UEs and signalled to the
UEs on the SHCCH (Shared channel control channel), which is mapped on RACH and
USCH/FACH and DSCH.
Figure 18: Model of uplink shared channel (USCH) in UTRAN (TDD only)
#### 5.6.6.4 Protocol termination
The protocol termination points for USCH in control and user planes are
presented in Figure 19 and Figure 20, respectively. The USCH is for TDD only.
Figure 19: Protocol termination points for USCH, control plane (TDD only)
Figure 20: Protocol termination points for USCH, user plane (TDD only)
### 5.6.7 Protocol termination for transport channel of type BCH
System information on BCH can include information that is available only in
Node B, and need to be updated very frequently (each 20-100 ms), such as
uplink interference in the cell. Also, for the system information originating
from the RNC, it is assumed that the updating of system information is at
least one magnitude less (minutes) than the repetition frequency on the BCH
(in the order of 1s). The system information originating from the CRNC should
be sent transparently to Node B, which then handles the repetition. Protocol
termination for the BCH shall therefore be distributed between the Node B and
the CRNC, resulting in less signalling on Iub and lower processor load. Note
that the RLC sublayer is transparent for this transport channel type.
Figure 21: Protocol termination for BCH
### 5.6.8 Protocol termination for transport channel of type PCH
In order to enable co-ordinated scheduling between PCH and FACH/DSCH the
corresponding MAC scheduling functions shall be allocated in the same node.
MAC-c/sh is terminated in CRNC. A natural implication is that RLC and RRC also
are terminated in CRNC.
Note that the RLC sublayer is transparent for this channel.
Figure 22: Protocol termination for PCH
### 5.6.9 Protocol termination for HS-DSCH
#### 5.6.9.1 HS-DSCH definition
The HS-DSCH is a resource that exists in downlink only. It has only impact on
the physical and transport channel levels, so there is no definition of shared
channel in the logical channels provided by MAC.
The HS-DSCH is a transport channel for which a common pool of radio resources
is shared dynamically between several UEs. The HS-DSCH is mapped to one or
several physical channels such that a specified part of the downlink resources
is employed. For the HS-DSCH no macrodiversity is applied, i.e. a specific HS-
DSCH is transmitted in a single cell only.
\- In CELL_DCH state the HS-DSCH is defined as an extension to DCH
transmission. Physical channel signalling is used for indicating to a UE when
it has been scheduled and then the necessary signalling information for the UE
to decode the HS-PDSCH.
\- In FDD and 1.28 Mcps TDD mode, the HS-DSCH can be used to transmit both
dedicated control plane and user plane data to the UE in CELL_FACH, CELL_PCH
and URA_PCH state.
In every HS-DSCH TTI, one or several HS-PDSCHs can be used in the downlink.
Therefore, the HS-DSCH supports code multiplexing. MAC multiplexing of
different UEs shall not be applied within an HS-DSCH TTI, i.e. within one HS-
DSCH TTI an HS-PDSCH is assigned to a single UE. However, MAC multiplexing is
allowed on a TTI by TTI basis, i.e. one HS-PDSCH may be allocated to different
UEs at each TTI.
#### 5.6.9.2 Resource allocation and UE identification on HS-DSCH
For each HS-DSCH TTI, each HS-SCCH carries HS-DSCH related downlink signalling
for one UE, along with a UE identity (via a UE specific CRC) that identifies
the UE for which this information is necessary in order to decode the
scheduled HS-PDSCH.
#### 5.6.9.3 Protocol termination
The protocol termination points for HS-DSCH in the control (DCCH) and user
planes (DTCH) are presented in figure 5.6.9.3-1 and figure 5.6.9.3-2,
respectively. In FDD and 1.28 Mcps TDD, the protocol termination presented in
figure 5.6.9.3-1 applies for BCCH and PCCH in CELL_FACH, CELL_PCH or URA_PCH
state. Two configurations exist, a Configuration with MAC-c/sh and a
Configuration without MAC-c/sh.
\- Configuration with MAC-c/sh: In this case, the MAC-hs/MAC-ehs in Node B is
located below MAC-c/sh in CRNC.
\- Configuration without MAC-c/sh: In this case, the CRNC does not have any
function for the HS-DSCH. MAC-d in SRNC is located directly above MAC-hs/MAC-
ehs in Node B, i.e. in the HS-DSCH the SRNC is directly connected to the Node
B, thus bypassing the DRNC.
Both configurations are transparent to both the UE and Node B. Figures
5.6.9.3-2 and 5.6.9.3-3 show the respective user plane protocol architecture
with termination points for the above two configurations.
Figure 5.6.9.3-1: Protocol termination points for HS-DSCH, control plane
Figure 5.6.9.3-2: Protocol termination points for HS-DSCH, user plane
### 5.6.10 Protocol termination for E-DCH
#### 5.6.10.1 E-DCH definition
The E-DCH is a resource that exists in uplink only. It has only impact on the
physical and transport channel levels, it is not visible in the logical
channels provided by MAC.
The E-DCH is a transport channel that is subject to Node-B scheduling. The
E-DCH is defined as an extension to DCH transmission.
#### 5.6.10.2 Resource allocation and UE identification related to E-DCH
Physical channel signalling from the Node-B is used for indicating to the UE
what amount of uplink resources it is allowed to use. Also the UE sends
scheduling requests to the Node-B about the resource needs.
Scheduling information is sent on a common physical channel and a UE identity
is used to address the different UEs.
#### 5.6.10.3 Protocol termination
The protocol termination points for E-DCH in the control and user planes are
presented in figure 5.6.10.3-1 and figure 5.6.10.3-2, respectively.
Figure 5.6.10.3-1: Protocol termination points for E-DCH for DCCH, control
plane
Figure 5.6.10.3-2: Protocol termination points for E-DCH, user plane
Figure 5.6.10.3-3: Protocol termination points for E-DCH for CCCH, control
plane
### 5.6.11 Protocol termination for MBMS
#### 5.6.11.1 MBMS definition
The MBMS feature is downlink unidirectional.
MBMS services can be provided in point-to-point and point-to-multipoint. For
the point-to-multipoint there exist three logical channels specifically for
MBMS: MCCH, MSCH and MTCH.
#### 5.6.11.2 Resource allocation related to MBMS
The radio bearer allocation for the MCCH is indicated in system information on
the BCCH. The radio bearer allocations for MSCH and MTCH are indicated on
MCCH.
#### 5.6.11.3 Protocol termination
The protocol termination points for MCCH and MSCH in the control plane and
MTCH in the user plane are presented in figure 5.6.11.3-1 and figure
5.6.11.3-2, respectively.
Figure 5.6.11.3-1: Protocol termination points for MCCH and MSCH, control
plane
Figure 5.6.11.3-2: Protocol termination points for MTCH, user plane
Figure 5.6.11.3-3 illustrates the protocol termination for MTCH in MBMS, which
is used in p-t-m transmission in case of IP Multicast distribution.
Based on the configuration in BM-SC the PDCP sub-layer may perform header
compression/decompression for the MBMS traffic.
The PDCP sub-layer may operate with the RFC 3095 header compression protocol.
In that case, header compression should be performed under RFC 3095 U-mode.
Figure 5.6.11.3-3: Protocol Stack for MTCH (P-T-M) in case of IP multicast
distribution
In case MRNC is used, figure 5.6.11.3-4 illustrates the protocol termination
for MCCH in MBMS, which is MBMS p-t-m control channel.
MBSFN MCCH Information Control function is split between MRNC and CRNC. The
MRNC controls the logical resources of the RNSs that are used for MBSFN
operation within the MBSFN cluster(s). The MRNC informs the CRNC of the MCCH
configuration (using transfer of MCCH Information Control messages) and
schedule information to be used (included in RNSAP as defined in [20]) .The
CRNC performs the MCCH configuration and sends the MCCH information
accordingly.
{width="5.272222222222222in" height="1.6888888888888889in"}
Figure 5.6.11.3-4: Protocol Stack for MCCH
# 6 User Identification and RRC Connection Mobility
## 6.1 UE identification on the radio interface
A Radio Network Temporary Identity (RNTI) is used as an UE identifier on
RACH/FACH, or, for TDD mode, also on DSCH by the RRC, or on PCH by the RRC,
when a RRC connection exists. For the HS-DSCH the UE identification is
included by the physical layer with the help of a UE-specific CRC.
**Definition of UE identifiers**
Several types of RNTIs exist. One is used within the Serving RNC and it is
denoted by Serving RNC RNTI (S-RNTI). A second type is used within a cell
controlled by a CRNC, when applicable, and it is denoted by Cell RNTI
(C-RNTI). A third type is used only for TDD within a cell controlled by a CRNC
when a DSCH is allocated and it is denoted by DSCH-RNTI. A fourth type is used
within a cell controlled by a CRNC when an HS-DSCH is configured and it is
denoted by HS-DSCH-RNTI (H-RNTI). A fifth type is used within a cell when an
E-DCH is configured to a UE and it is denoted by E-RNTI.
S-RNTI is allocated for all UEs having a RRC connection. It is allocated by
the Serving RNC and it is unique within the Serving RNC. S-RNTI is reallocated
always when the Serving RNC for the RRC connection is changed and deallocated
when the RRC connection is released.
In addition for each UE having an RRC connection, there is an identifier of
its current serving RNC, which is denoted as SRNC identifier. The SRNC
identifier together with S-RNTI is a unique identifier of the RRC connection
within PLMN. The combination of SRNC identifier and S-RNTI is referred to as
U-RNTI (UTRAN Radio Network Temporary Identity), which is used on the radio
interface.
C-RNTI for a UE is allocated by a controlling RNC and it is unique within one
cell controlled by the allocating CRNC. C-RNTI can be reallocated when a UE
accesses a new cell with the cell update procedure.
In TDD mode, DSCH-RNTI for a UE is allocated by controlling RNC when a DSCH
channel is configured. DSCH-RNTI is unique within the cell carrying the DSCH.
When a UE is in CELL_DCH state, H-RNTI for the UE is allocated by a
controlling RNC and it is unique within one cell controlled by the allocating
CRNC. H-RNTI is reallocated when an HS-DSCH cell change is performed. In FDD
and 1.28 Mcps TDD mode, when a UE is in CELL_FACH, CELL_PCH or URA_PCH state,
H-RNTI for the UE is allocated by a controlling RNC and it may be unique or
shared among users within one cell controlled by the allocating CRNC.
E-RNTI for a UE is allocated by the Node-B and it is valid within one cell.
E-RNTI may be reallocated when the serving E-DCH cell changes. Several UEs may
use the same E-RNTI. The E-RNTI may be allocated to a UE in CELL_DCH,
CELL_FACH (FDD and 1.28 Mcps TDD only) and CELL_PCH (FDD and 1.28 Mcps TDD
only).
**Usage of UE identifiers**
U-RNTI is allocated to an UE having a RRC connection. It identifies the UE
within UTRAN and is used as a UE identifier in cell update, URA update, RRC
connection reestablishment and (UTRAN originated) paging messages and
associated responses on the radio interface. The SRNC identifier within the
U-RNTI is used by the Controlling RNC to route the received uplink messages
towards the Serving RNC.
C-RNTI is used as a UE identifier in all other DCCH/DTCH common channel
messages on the radio interface.
In TDD mode, DSCH-RNTI is used as a UE identifier for DTCH and DCCH in
downlink when mapped onto DSCH transport channel.
H-RNTI is used as a UE identifier for the HS-DSCH.
E-RNTI is used as a UE identifier when controlling UE uplink resources on the
E-DCH.
NAS identifiers are used as the UE identifier in the initial access CCCH
message on the radio interface.
## 6.2 UE connection to UTRAN
The different levels of UE connection to UTRAN are listed below:
**-** No signalling connection exist\ The UE has no relation to UTRAN, only to
CN. For data transfer, a signalling connection has to be established.
**-** Signalling connection exist\ There is a RRC connection between UE and
UTRAN. The UE position can be known on different levels:
**-** UTRAN Registration Area (URA) level\ The UE position is known on UTRAN
registration area level. URA is a specified set of cell, which can be
identified on the BCCH.
**-** Cell level\ The UE position is known on cell level. Different channel
types can be used for data transfer:
**-** Common transport channels (RACH, FACH, DSCH, HS-DSCH, E-DCH);
**-** Dedicated transport channels (DCH, E-DCH).
# 7 UE modes
Two modes of operation are currently defined for the UE, idle mode and
connected mode [5, 6].
After power on, the UE stays in idle mode until it transmits a request to
establish an RRC connection. In idle mode the UE is identified by non-access
stratum identities such as IMSI, TMSI and P-TMSI. In addition, the UTRAN has
no own information about the individual idle mode UEs, and can only address
e.g. all UEs in a cell or all UEs monitoring a specific paging occasion.
The connected mode is entered when the RRC connection is established. A RRC
connection is established between the UE and a RNC called SRNC. The UE is
assigned a radio network temporary identity (U-RNTI and possibly in addition
C-RNTI or, only for TDD, DSCH-RNTI or, only for FDD and 1.28 Mcps TDD, H-RNTI
and E-RNTI) to be used as UE identity on common transport channels _._ RRC
connection is within a UTRAN identified with the U-RNTI.
The UE leaves the connected mode and returns to idle mode when the RRC
connection is released or at RRC connection failure.
Reception of SMS cell broadcast can be done in both idle and connected mode.
#