# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of this present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies and establishes the characteristics of the
physicals layer procedures in the FDD and TDD modes of E-UTRA.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications"
[2] 3GPP TS 36.201: "Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical Layer -- General Description"
[3] 3GPP TS 36.211: "Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical channels and modulation"
[4] 3GPP TS 36.212: "Evolved Universal Terrestrial Radio Access (E-UTRA);
Multiplexing and channel coding"
[5] 3GPP TS 36.214: "Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer -- Measurements"
[6] 3GPP TS 36.101: "Evolved Universal Terrestrial Radio Access (E-UTRA); User
Equipment (UE) radio transmission and reception"
[7] 3GPP TS 36.104: "Evolved Universal Terrestrial Radio Access (E-UTRA); Base
Station (BS) radio transmission and reception"
[8] 3GPP TS36.321, "Evolved Universal Terrestrial Radio Access (E-UTRA);
Medium Access Control (MAC) protocol specification"
[9] 3GPP TS36.423, "Evolved Universal Terrestrial Radio Access (E-UTRA); X2
Application Protocol (X2AP)"
[10] 3GPP TS36.133, "Evolved Universal Terrestrial Radio Access (E-UTRA);
Requirements for support of radio resource management"
[11] 3GPP TS36.331, "Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC) protocol specification"
[12] 3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio access capabilities\".
# 3 Definitions, symbols, and abbreviations
## 3.1 Symbols
For the purposes of the present document, the following symbols apply:
$n_{f}$ System frame number as defined in [3]
Slot number within a radio frame as defined in [3]
$N_{\text{cells}}^{\text{DL}}$ Number of configured cells
$N_{\text{RB}}^{\text{DL}}$ Downlink bandwidth configuration, expressed in
units of $N_{\text{sc}}^{\text{RB}}$as defined in [3]
$N_{\text{RB}}^{\text{UL}}$ Uplink bandwidth configuration, expressed in units
of $N_{\text{sc}}^{\text{RB}}$as defined in [3]
$N_{\text{symb}}^{\text{UL}}$ Number of SC-FDMA symbols in an uplink slot as
defined in [3]
$N_{\text{sc}}^{\text{RB}}$ Resource block size in the frequency domain,
expressed as a number of subcarriers as defined in [3]
$T_{s}$ Basic time unit as defined in [3]
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply.
ACK Acknowledgement
BCH Broadcast Channel
CCE Control Channel Element
CIF Carrier Indicator Field
CQI Channel Quality Indicator
CRC Cyclic Redundancy Check
CSI Channel State Information
DAI Downlink Assignment Index
DCI Downlink Control Information
DL Downlink
DL-SCH Downlink Shared Channel
DTX Discontinuous Transmission
EPRE Energy Per Resource Element
MCS Modulation and Coding Scheme
NACK Negative Acknowledgement
PBCH Physical Broadcast Channel
PCFICH Physical Control Format Indicator Channel
PDCCH Physical Downlink Control Channel
PDSCH Physical Downlink Shared Channel
PHICH Physical Hybrid ARQ Indicator Channel
PMCH Physical Multicast Channel
PMI Precoding Matrix Indicator
PRACH Physical Random Access Channel
PRS Positioning Reference Symbol
PRB Physical Resource Block
PUCCH Physical Uplink Control Channel
PUSCH Physical Uplink Shared Channel
PTI Precoding Type Indicator
QoS Quality of Service
RBG Resource Block Group
RE Resource Element
RI Rank Indication
RPF Repetition Factor
RS Reference Signal
SIR Signal-to-Interference Ratio
SINR Signal to Interference plus Noise Ratio
SPS C-RNTI Semi-Persistent Scheduling C-RNTI
SR Scheduling Request
SRS Sounding Reference Symbol
TA Time alignment
TTI Transmission Time Interval
UCI Uplink Control Information
UE User Equipment
UL Uplink
UL-SCH Uplink Shared Channel
VRB Virtual Resource Block
# 4 Synchronisation procedures
## 4.1 Cell search
Cell search is the procedure by which a UE acquires time and frequency
synchronization with a cell and detects the physical layer Cell ID of that
cell. E-UTRA cell search supports a scalable overall transmission bandwidth
corresponding to 6 resource blocks and upwards.
The following signals are transmitted in the downlink to facilitate cell
search: the primary and secondary synchronization signals.
## 4.2 Timing synchronisation
### 4.2.1 Radio link monitoring
The downlink radio link quality of the primary cell shall be monitored by the
UE for the purpose of indicating out-of-sync/in-sync status to higher layers.
In non-DRX mode operation, the physical layer in the UE shall every radio
frame assess the radio link quality, evaluated over the previous time period
defined in [10], against thresholds (Q~out~ and Q~in~) defined by relevant
tests in [10].
In DRX mode operation, the physical layer in the UE shall at least once every
DRX period assess the radio link quality, evaluated over the previous time
period defined in [10], against thresholds (Q~out~ and Q~in~) defined by
relevant tests in [10].
If higher-layer signalling indicates certain subframes for restricted radio
link monitoring, the radio link quality shall not be monitored in any subframe
other than those indicated.
The physical layer in the UE shall in radio frames where the radio link
quality is assessed indicate out-of-sync to higher layers when the radio link
quality is worse than the threshold Q~out~. When the radio link quality is
better than the threshold Q~in~, the physical layer in the UE shall in radio
frames where the radio link quality is assessed indicate in-sync to higher
layers.
### 4.2.2 Inter-cell synchronisation
No functionality is specified in this section in this release.
### 4.2.3 Transmission timing adjustments
Upon reception of a timing advance command, the UE shall adjust its uplink
transmission timing for PUCCH/PUSCH/SRS of the primary cell. The timing
advance command indicates the change of the uplink timing relative to the
current uplink timing as multiples of 16$T_{s}$. The start timing of the
random access preamble is specified in [3]. The UL transmission timing for
PUSCH/SRS of a secondary cell is the same as the primary cell.
In case of random access response, 11-bit timing advance command [8], _T~A~_ ,
indicates _N~TA~_ values by index values of _T~A~_ = 0, 1, 2, ..., 1282, where
an amount of the time alignment is given by _N~TA~_ = _T~A~_ ×16. _N~TA\ ~_ is
defined in [3].
In other cases, 6-bit timing advance command [8], _T~A~_ , indicates
adjustment of the current _N~TA~_ value, _N~TA,old~_ , to the new _N~TA~_
value, _N~TA,new~_ , by index values of _T~A~_ = 0, 1, 2,..., 63, where
_N~TA,new~_ = _N~TA,old~_ \+ (_T~A~_ −31)×16. Here, adjustment of _N~TA~_
value by a positive or a negative amount indicates advancing or delaying the
uplink transmission timing by a given amount respectively.
For a timing advance command received on subframe _n_ , the corresponding
adjustment of the timing shall apply from the beginning of subframe _n+6._
When the UE's uplink PUCCH/PUSCH/SRS transmissions in subframe _n_ and
subframe _n_ +1 are overlapped due to the timing adjustment, the UE shall
transmit complete subframe _n_ and not transmit the overlapped part of
subframe _n_ +1.
If the received downlink timing changes and is not compensated or is only
partly compensated by the uplink timing adjustment without timing advance
command as specified in [10], the UE changes N~TA~ accordingly.
## 4.3 Timing for Secondary Cell Activation / Deactivation
When a UE receives an activation command [8] for a secondary cell in subframe
_n_ , the corresponding actions in [8] shall be applied no later than the
minimum requirement defined in [10] and no earlier than subframe n+8, except
for the following:
\- the actions related to CSI reporting
\- the actions related to the _sCellDeactivationTimer_ associated with the
secondary cell [8]
which shall be applied in subframe _n+8_.
When a UE receives a deactivation command [8] for a secondary cell _or the
sCellDeactivationTimer secondary cell's deactivation timer associated with the
secondary cell expires_ in subframe _n_ , the corresponding actions in [8]
shall apply no later than the minimum requirement defined in [10]_, except_
for the actions related to CSI reporting which shall be applied in subframe
_n+8._
# 5 Power control
Downlink power control determines the energy per resource element (EPRE). The
term resource element energy denotes the energy prior to CP insertion. The
term resource element energy also denotes the average energy taken over all
constellation points for the modulation scheme applied. Uplink power control
determines the average power over a SC-FDMA symbol in which the physical
channel is transmitted.
## 5.1 Uplink power control
Uplink power control controls the transmit power of the different uplink
physical channels.
For PUSCH, the transmit power ${\hat{P}}_{\text{PUSCH},c}(i)$ defined in
subclause 5.1.1, is first scaled by the ratio of the number of antennas ports
with a non-zero PUSCH transmission to the number of configured antenna ports
for the transmission scheme. The resulting scaled power is then split equally
across the antenna ports on which the non-zero PUSCH is transmitted.
For PUCCH or SRS, the transmit power ${\hat{P}}_{\text{PUCCH}}(i)$, defined in
subclause 5.1.1.1, or${\hat{P}}_{\text{SRS,c}}(i)$ is split equally across the
configured antenna ports for PUCCH or SRS. ${\hat{P}}_{\text{SRS,c}}(i)$ is
the linear value of$P_{\text{SRS,c}}(i)$defined in subclause 5.1.3.
A cell wide overload indicator (OI) and a High Interference Indicator (HII) to
control UL interference are defined in [9].
### 5.1.1 Physical uplink shared channel
#### 5.1.1.1 UE behaviour
The setting of the UE Transmit power for a physical uplink shared channel
(PUSCH) transmission is defined as follows.
If the UE transmits PUSCH without a simultaneous PUCCH for the serving cell
$c$, then the UE transmit power $P_{\text{PUSCH},c}(i)$ for PUSCH transmission
in subframe _i_ for the serving cell $c$is given by
$P_{\text{PUSCH,c}}(i) = \text{min}\begin{matrix} \left{ P_{\text{CMAX},c}(i),
\middle| \right} \ \end{matrix}\left{ \right}$ [dBm]
If the UE transmits PUSCH simultaneous with PUCCH for the serving cell $c$,
then the UE transmit power $P_{\text{PUSCH},c}(i)$ for the PUSCH transmission
in subframe _i_ for the serving cell $c$ is given by
$P_{\text{PUSCH,c}}(i) = \text{min}\begin{matrix} \left{
\text{10}\text{log}_{\text{10}}\left( {\hat{P}}_{\text{CMAX},c}(i) -
{\hat{P}}_{\text{PUCCH}}(i) \right)\ , \middle| \right} \ \end{matrix}\left{
\right}$ [dBm]
If the UE is not transmitting PUSCH for the serving cell c, for the
accumulation of TPC command received with DCI format 3/3A for PUSCH, the UE
shall assume that the UE transmit power $P_{\text{PUSCH},c}(i)$ for the PUSCH
transmission in subframe _i_ for the serving cell $c$ is computed by
$P_{\text{PUSCH,c}}(i) = \text{min}\left{ P_{\text{CMAX,c}}(i),\
P_{\text{O_PUSCH,c}}(1) + \alpha_{c}(1) \cdot \text{PL}_{c} + f_{c}(i)\
\right}\ $ [dBm]
where,
  * $P_{\text{CMAX,c}}(i)$is the configured UE transmit power defined in [6] in subframe _i_ for serving cell $c$ and ${\hat{P}}_{\text{CMAX,c}}(i)$ is the linear value of $P_{\text{CMAX,c}}(i)$. If the UE transmits PUCCH without PUSCH in subframe $i$for the serving cell c, for the accumulation of TPC command received with DCI format 3/3A for PUSCH, the UE shall assume $P_{\text{CMAX,c}}(i)$ as given by subclause 5.1.2.1. If the UE does not transmit PUCCH and PUSCH in subframe $i$ for the serving cell c, for the accumulation of TPC command received with DCI format 3/3A for PUSCH, the UE shall compute $P_{\text{CMAX,c}}(i)$ assuming MPR=0dB, A-MPR=0dB, P-MPR=0dB and ∆T~C~ =0dB, where MPR, A-MPR, P-MPR and ∆T~C~ are defined in [6].
  * ${\hat{P}}_{\text{PUCCH}}(i)$ is the linear value of $P_{\text{PUCCH}}(i)$defined in subclause 5.1.2.1
  * $M_{\text{PUSCH,c}}(i)$is the bandwidth of the PUSCH resource assignment expressed in number of resource blocks valid for subframe _i_ and serving cell $c$.
  * $P_{\text{O_PUSCH,c}}(j)$is a parameter composed of the sum of a component $P_{\text{O_NOMINAL_\ PUSCH,c}}(j)$ provided from higher layers for _j=0_ and _1_ and a component $P_{\text{O_UE_PUSCH,c}}(j)$ provided by higher layers for _j=0_ and _1_ for serving cell $c$. For PUSCH (re)transmissions corresponding to a semi-persistent grant then _j=0_ , for PUSCH (re)transmissions corresponding to a dynamic scheduled grant then _j=1_ and for PUSCH (re)transmissions corresponding to the random access response grant then _j=2_. $P_{\text{O_UE_PUSCH,c}}(2) = 0$ and $P_{\text{O_NOMINAL_PUSCH,c}}(2) = P_{\text{O_PRE}} + \Delta_{\text{PREAMBLE}_{\text{Msg}}3}$, where the parameter _preambleInitialReceivedTargetPower_ [8] ($P_{\text{O_PRE}}$) and $\Delta_{\text{PREAMBLE}_{\text{Msg}}3}$ are signalled from higher layers.
  * For _j_ =0 or _1_ , $\alpha_{c} \in \left{ 0,\ 0\text{.}4,\ 0\text{.}5,\ 0\text{.}6,\ 0\text{.}7,\ 0\text{.}8,\ 0\text{.}9,\ 1 \right}$ is a 3-bit parameter provided by higher layers for serving cell $c$. For j=2, $\alpha_{c}(j) = 1\text{.}$
  * $\text{PL}_{c}$ is the downlink pathloss estimate calculated in the UE for serving cell $c$ in dB and $\text{PL}_{c}$ = _referenceSignalPower_ \-- higher layer filtered RSRP, where _referenceSignalPower_ is provided by higher layers and RSRP is defined in [5] for the reference serving cell and the higher layer filter configuration is defined in [11] for the reference serving cell. For the uplink of the primary cell, the primary cell is used as the reference serving cell for determining _referenceSignalPower_ and higher layer filtered RSRP. For the uplink of the secondary cell, the serving cell configured by the higher layer parameter _pathlossReferenceLinking_ defined in [11] is used as the reference serving cell for determining _referenceSignalPower_ and higher layer filtered RSRP.
  * $\Delta_{\text{TF},c}(i) = \text{10}\text{log}_{\text{10}}\left( \left( \ 2^{\text{BPRE} \cdot K_{s}} - 1 \right) \cdot \beta_{\text{offset}}^{\text{PUSCH}} \right)$for $K_{S} = 1\text{.}\text{25}$and 0 for $K_{S} = 0$where $K_{S}$ is given by the parameter _deltaMCS-Enabled_ provided by higher layers for each serving cell $c$. $\text{BPRE}$ and $\beta_{\text{offset}}^{\text{PUSCH}}$, for each serving cell $c$, are computed as below. $K_{S} = 0$ for transmission mode 2.
    * $\text{BPRE} = \frac{O_{\text{CQI}}}{N_{\text{RE}}}$for control data sent via PUSCH without UL-SCH data and $\sum_{r = 0}^{C - 1}{}\frac{K_{r}}{N_{\text{RE}}}$for other cases.
      * where is the number of code blocks, is the size for code block , $O_{\text{CQI}}$ is the number of CQI/PMI bits including CRC bits and $N_{\text{RE}}$ is the number of resource elements determined as$N_{\text{RE}} = M_{\text{sc}}^{\text{PUSCH} - \text{initial}} \cdot N_{\text{symb}}^{\text{PUSCH-initial}}$, where , , $M_{\text{sc}}^{\text{PUSCH} - \text{initial}}$ and $N_{\text{symb}}^{\text{PUSCH-initial}}$ are defined in [4].
    * for control data sent via PUSCH without UL-SCH data and for other cases.
  * $\delta_{\text{PUSCH,c}}$ is a correction value, also referred to as a TPC command and is included in PDCCH with DCI format 0/4 for serving cell $c$or jointly coded with other TPC commands in PDCCH with DCI format 3/3A whose CRC parity bits are scrambled with TPC-PUSCH-RNTI. The current PUSCH power control adjustment state for serving cell $c$is given by$f_{c}(i)$ which is defined by:
    * $f_{c}(i) = f_{c}(i - 1) + \delta_{\text{PUSCH,c}}(i - K_{\text{PUSCH}})$ if accumulation is enabled based on the parameter _Accumulation-enabled_ provided by higher layers or if the TPC command $\delta_{\text{PUSCH,c}}$ is included in a PDCCH with DCI format 0 for serving cell $c$ where the CRC is scrambled by the Temporary C-RNTI
      * where $\delta_{\text{PUSCH,c}}(i - K_{\text{PUSCH}})$was signalled on PDCCH with DCI format 0/4 or 3/3A on subframe $i - K_{\text{PUSCH}}$, and where $f_{c}(0)$ is the first value after reset of accumulation.
      * The value of $K_{\text{PUSCH}}$ is
        * For FDD,$K_{\text{PUSCH}}$= 4
        * For TDD UL/DL configurations 1-6, is given in Table 5.1.1.1-1
        * For TDD UL/DL configuration 0
          * If the PUSCH transmission in subframe _2_ or _7_ is scheduled with a PDCCH of DCI format 0/4 in which the LSB of the UL index is set to 1, $K_{\text{PUSCH}}$= 7
          * For all other PUSCH transmissions, is given in Table 5.1.1.1-1.
      * For serving cell $c$ the UE attempts to decode a PDCCH of DCI format 0/4 with the UE's CRNTI or DCI format 0 for SPS C-RNTI and a PDCCH of DCI format 3/3A with this UE's TPC-PUSCH-RNTI in every subframe except when in DRX or where serving cell $c$ is deactivated.
      * If DCI format 0/4 for serving cell $c$and DCI format 3/3A are both detected in the same subframe, then the UE shall use the $\delta_{\text{PUSCH,c}}$ provided in DCI format 0/4.
      * $\delta_{\text{PUSCH,c}} = 0$dB for a subframe where no TPC command is decoded for serving cell $c$or where DRX occurs or _i_ is not an uplink subframe in TDD.
      * The $\delta_{\text{PUSCH,c}}$ dB accumulated values signalled on PDCCH with DCI format 0/4 are given in Table 5.1.1.1-2. If the PDCCH with DCI format 0 is validated as a SPS activation or release PDCCH, then $\delta_{\text{PUSCH,c}}$ is 0dB.
      * The $\delta_{\text{PUSCH}}$ dB accumulated values signalled on PDCCH with DCI format 3/3A are one of SET1 given in Table 5.1.1.1-2 or SET2 given in Table 5.1.1.1-3 as determined by the parameter _TPC-Index_ provided by higher layers.
      * If UE has reached $P_{\text{CMAX,c}}(i)$ for serving cell $c$, positive TPC commands for serving cell $c$ shall not be accumulated
      * If UE has reached minimum power, negative TPC commands shall not be accumulated
      * UE shall reset accumulation
        * For serving cell $c$, when $P_{\text{O_UE_PUSCH,c}}$ value is changed by higher layers
        * For the primary cell, when the UE receives random access response message
    * $f_{c}(i) = \delta_{\text{PUSCH,c}}(i - K_{\text{PUSCH}})$if accumulation is not enabled for serving cell $c$ based on the parameter _Accumulation-enabled_ provided by higher layers
      * where $\delta_{\text{PUSCH,c}}(i - K_{\text{PUSCH}})$was signalled on PDCCH with DCI format 0/4 for serving cell $c$ on subframe $i - K_{\text{PUSCH}}$
      * The value of is
        * For FDD,$K_{\text{PUSCH}}$= 4
        * For TDD UL/DL configurations 1-6, is given in Table 5.1.1.1-1
        * For TDD UL/DL configuration 0
          * If the PUSCH transmission in subframe _2_ or _7_ is scheduled with a PDCCH of DCI format 0/4 in which the LSB of the UL index is set to 1, $K_{\text{PUSCH}}$= 7
          * For all other PUSCH transmissions, is given in Table 5.1.1.1-1.
      * The $\delta_{\text{PUSCH,c}}$ dB absolute values signalled on PDCCH with DCI format 0/4 are given in Table 5.1.1.1-2. If the PDCCH with DCI format 0 is validated as a SPS activation or release PDCCH, then $\delta_{\text{PUSCH,c}}$ is 0dB.
      * $f_{c}(i) = f_{c}(i - 1)$for a subframe where no PDCCH with DCI format 0/4 is decoded for serving cell $c$ or where DRX occurs or _i_ is not an uplink subframe in TDD.
    * For both types of $f_{c}( \ast )$ (accumulation or current absolute) the first value is set as follows:
      * If $P_{\text{O_UE_PUSCH,c}}$ value is changed by higher layers and serving cell $c$ is the primary cell or, if $P_{\text{O_UE_PUSCH,c}}$ value is received by higher layers and serving cell $c$ is a Secondary cell
        *       * Else
        * If serving cell $c$ is the primary cell
          *             * where $\delta_{\text{msg}2}$ is the TPC command indicated in the random access response, see subclause 6.2, and
            * $\text{ΔP}_{\text{rampup}}$ is provided by higher layers and corresponds to the total power ramp-up from the first to the last preamble
Table 5.1.1.1-1 for TDD configuration 0-6
* * *
**TDD UL/DL\** subframe number _i_**  
Configuration**
                    **0**                     **1**   **2**   **3**   **4**   **5**   **6**   **7**   **8**   **9**
0 - - 6 7 4 - - 6 7 4
1 - - 6 4 - - - 6 4 -
2 - - 4 - - - - 4 - -
3 - - 4 4 4 - - - - -
4 - - 4 4 - - - - - -
5 - - 4 - - - - - - -
6 - - 7 7 5 - - 7 7 -
* * *
Table 5.1.1.1-2: Mapping of TPC Command Field in DCI format 0/3/4 to absolute
and accumulated $\delta_{\text{PUSCH,c}}$ values.
+----------------------+----------------------+----------------------+ | TPC Command Field in | Accumulated | Absolute | | | $\del | $\del | | DCI format 0/3/4 | ta_{\text{PUSCH,c}}$ | ta_{\text{PUSCH,c}}$ | | | [dB] | [dB] only DCI | | | | format 0/4 | +----------------------+----------------------+----------------------+ | 0 | -1 | -4 | +----------------------+----------------------+----------------------+ | 1 | 0 | -1 | +----------------------+----------------------+----------------------+ | 2 | 1 | 1 | +----------------------+----------------------+----------------------+ | 3 | 3 | 4 | +----------------------+----------------------+----------------------+
Table 5.1.1.1-3: Mapping of TPC Command Field in DCI format 3A to accumulated
$\delta_{\text{PUSCH,c}}$ values.
+----------------------+---------------------------------------------+ | TPC Command Field in | Accumulated$\delta_{\text{PUSCH,c}}$ [dB] | | | | | DCI format 3A | | +----------------------+---------------------------------------------+ | 0 | -1 | +----------------------+---------------------------------------------+ | 1 | 1 | +----------------------+---------------------------------------------+
If _the total transmit power of the UE would exceed_
${\hat{P}}_{\text{CMAX}}(i)$_, the UE scales_
${\hat{P}}_{\text{PUSCH},c}(i)$_for the serving cell in subframe i such that
the condition_
_is satisfied where_ ${\hat{P}}_{\text{PUCCH}}(i)$_is the linear value of_
$P_{\text{PUCCH}}(i)$_,_ ${\hat{P}}_{\text{PUSCH},c}(i)$_is the linear value
of_ $P_{\text{PUSCH},c}(i)$_,_ ${\hat{P}}_{\text{CMAX}}(i)$_is the linear
value of the UE total configured maximum output power_ $P_{\text{CMAX}}$
_defined in [6] in subframe i and_ $w(i)$ _is a scaling factor of_
${\hat{P}}_{\text{PUSCH},c}(i)$_for serving cell_ $c$ _where_ $0 \leq w(i)
\leq 1$_. In case there is no PUCCH transmission in subframe i_
${\hat{P}}_{\text{PUCCH}}(i) = 0$_._
If the UE has PUSCH transmission with UCI on serving cell _j_ and PUSCH
without UCI in any of the remaining serving cells, and the total transmit
power of the UE would exceed ${\hat{P}}_{\text{CMAX}}(i)$, the UE scales
${\hat{P}}_{\text{PUSCH},c}(i)$for the serving cells without UCI in subframe
_i_ such that the condition
is satisfied where ${\hat{P}}_{\text{PUSCH},j}(i)$ is the PUSCH transmit power
for the cell with UCI and$w(i)$is a scaling factor of
${\hat{P}}_{\text{PUSCH},c}(i)$for serving cell without UCI. In this case, no
power scaling is applied to ${\hat{P}}_{\text{PUSCH},j}(i)$
unless$_{}^{}\sum_{c \neq j}^{}{w(i) \cdot {\hat{P}}_{\text{PUSCH},c}(i)} = 0$
and the total transmit power of the UE still would exceed
${\hat{P}}_{\text{CMAX}}(i)$_. Note that_ $w(i)$_values are the same across
serving cells when_ $w(i) > 0$_but for certain serving cells_ $w(i)$_may be
zero._
_If the UE has simultaneous PUCCH and PUSCH transmission with UCI on serving
cell j_ and PUSCH transmission without UCI in any of the remaining serving
cells, and the total transmit power of the UE would exceed
${\hat{P}}_{\text{CMAX}}(i)$, the UE obtains
${\hat{P}}_{\text{PUSCH},c}(i)$according to
and
#### 5.1.1.2 Power headroom
There are two types of UE power headroom reports defined. A UE power
headroom$\text{PH}$ is valid for subframe _i_ for serving cell $c$.
Type 1:
If the UE transmits PUSCH without PUCCH in subframe $i$ for serving cell $c$,
power headroom for a Type 1 report is computed using
$\text{PH}_{\text{type1,c}}(i) = P_{\text{CMAX},c}(i) -_{}^{}\left{ \
\text{10}\text{log}_{\text{10}}(M_{\text{PUSCH,c}}(i)) +
P_{\text{O_PUSCH,c}}(j) + \alpha_{c}(j) \cdot \text{PL}_{c} +
\Delta_{\text{TF,c}}(i) + f_{c}(i)\ \right}\ $ [dB]
where, $P_{\text{CMAX}_{,c}}\left( i \right)$, $M_{\text{PUSCH,c}}(i)$,
$P_{\text{O_PUSCH,c}}(j)$, $\alpha_{c}(j)$, $\text{PL}_{c}$,
$\Delta_{\text{TF},c}(i)$ and $f_{c}(i)$ are defined in subclause 5.1.1.1.
If the UE transmits PUSCH with PUCCH in subframe $i$ for serving cell $c$,
power headroom for a Type 1 report is computed using
$\text{PH}_{\text{type1,c}}(i) = {\overset{\sim}{P}}_{\text{CMAX},c}(i)
-_{}^{}\left{ \ \text{10}\text{log}_{\text{10}}(M_{\text{PUSCH,c}}(i)) +
P_{\text{O_PUSCH,c}}(j) + \alpha_{c}(j) \cdot \text{PL}_{c} +
\Delta_{\text{TF,c}}(i) + f_{c}(i)\ \right}\ $ [dB]
where, $M_{\text{PUSCH,c}}(i)$, $P_{\text{O_PUSCH,c}}(j)$, $\alpha_{c}(j)$,
$\text{PL}_{c}$, $\Delta_{\text{TF},c}(i)$ and $f_{c}(i)$ are defined in
subclause 5.1.1.1. ${\overset{\sim}{P}}_{\text{CMAX}_{,c}}(i)$is computed
based on the requirements in [6] assuming a PUSCH only transmission in
subframe $i$. For this case, the physical layer delivers
${\overset{\sim}{P}}_{\text{CMAX}_{,c}}(i)$instead of
$P_{\text{CMAX}_{,c}}(i)$ to higher layers.
If the UE does not transmit PUSCH in subframe $i$ for serving cell $c$, power
headroom for a Type 1 report is computed using
$\text{PH}_{\text{type1,c}}(i) = {\overset{\sim}{P}}_{\text{CMAX},c}(i)
-_{}^{}\left{ \ P_{\text{O_PUSCH,c}}(1) + \alpha_{c}(1) \cdot \text{PL}_{c} +
f_{c}(i)\ \right}\ $ [dB]
where, ${\overset{\sim}{P}}_{\text{CMAX,c}}(i)$is computed assuming MPR=0dB,
A-MPR=0dB, P-MPR=0dB and ∆T~C~ =0dB, where MPR , A-MPR, P-MPR and ∆T~C~ are
defined in [6]. $P_{\text{O_PUSCH,c}}(1)$, $\alpha_{c}(1)$, $\text{PL}_{c}$,
and $f_{c}(i)$are defined in subclause 5.1.1.1.
Type 2:
If the UE transmits PUSCH simultaneous with PUCCH in subframe $i$ for the
primary cell, power headroom for a Type 2 report is computed using
$\text{PH}_{\text{type2}}(i) = P_{\text{CMAX},c}(i) -
\text{10}\text{log}_{\text{10}}\begin{matrix} \left( \text{10}^{\left(
\text{10}\text{log}_{\text{10}}(M_{\text{PUSCH,c}}(i)) +
P_{\text{O_PUSCH,c}}(j) + \alpha_{c}(j) \cdot \text{PL}_{c} +
\Delta_{\text{TF,c}}(i) + f_{c}(i) \right)/\text{10}} \middle| \right) \ \
\end{matrix}$ [dB]
where, $P_{\text{CMAX,c}}$, $M_{\text{PUSCH,c}}(i)$,
$P_{\text{O_PUSCH,c}}(j)$, $\alpha_{c}(j)$, $\Delta_{\text{TF},c}(i)$ and
$f_{c}(i)$ are the primary cell parameters as defined in subclause 5.1.1.1 and
$P_{\text{O_PUCCH}}$, $\text{PL}_{c}$,
$h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}})$, , $\Delta_{\text{TxD}}(F')$
and $g(i)$ are defined in subclause 5.1.2.1
If the UE transmits PUSCH without PUCCH in subframe $i$for the primary cell,
power headroom for a Type 2 report is computed using
$\text{PH}_{\text{type2}}(i) = P_{\text{CMAX},c}(i) -
\text{10}\text{log}_{\text{10}}\begin{matrix} \left( \text{10}^{\left(
\text{10}\text{log}_{\text{10}}(M_{\text{PUSCH,c}}(i)) +
P_{\text{O_PUSCH,c}}(j) + \alpha_{c}(j) \cdot \text{PL}_{c} +
\Delta_{\text{TF,c}}(i) + f_{c}(i) \right)/\text{10}} \middle| \right) \ \
\end{matrix}$ [dB]
where, $P_{\text{CMAX,c}}(i)$, $M_{\text{PUSCH,c}}(i)$,
$P_{\text{O_PUSCH,c}}(j)$, $\alpha_{c}(j)$, $\Delta_{\text{TF},c}(i)$ and
$f_{c}(i)$ are the primary cell parameters as defined in subclause 5.1.1.1 and
$P_{\text{O_PUCCH}}$, $\text{PL}_{c}$ and $g(i)$ are defined in subclause
5.1.2.1.
If the UE transmits PUCCH without PUSCH in subframe $i$for the primary cell,
power headroom for a Type 2 report is computed using
$\text{PH}_{\text{type2}}(i) = P_{\text{CMAX},c}(i) -
\text{10}\text{log}_{\text{10}}\begin{matrix} \left( \text{10}^{\left(
P_{\text{O_PUSCH,c}}(1) + \alpha_{c}(1) \cdot \text{PL}_{c} + f_{c}(i)
\right)/\text{10}} \middle| \right) \ \ \end{matrix}$ [dB]
where, $P_{\text{O_PUSCH,c}}(1)$, $\alpha_{c}(1)$and $f_{c}(i)$ are the
primary cell parameters as defined in subclause 5.1.1.1,
$P_{\text{CMAX,c}}(i)$,$P_{\text{O_PUCCH}}$, $\text{PL}_{c}$,
$h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}})$, , $\Delta_{\text{TxD}}(F')$
and $g(i)$ are also defined in subclause 5.1.2.1.
If the UE does not transmit PUCCH or PUSCH in subframe $i$ for the primary
cell, power headroom for a Type 2 report is computed using
$\text{PH}_{\text{type2}}(i) = {\overset{\sim}{P}}_{\text{CMAX},c}(i) -
\text{10}\text{log}_{\text{10}}\begin{matrix} \left( \text{10}^{\left(
P_{\text{O_PUSCH,c}}(1) + \alpha_{c}(1) \cdot \text{PL}_{c} + f_{c}(i)
\right)/\text{10}} \middle| \right) \ \ \end{matrix}$ [dB]
where, ${\overset{\sim}{P}}_{\text{CMAX},c}(i)$ is computed assuming MPR=0dB,
A-MPR=0dB, P-MPR=0dB and ∆T~C~ =0dB, where MPR , A-MPR, P-MPR and ∆T~C~ are
defined in [6], $P_{\text{O_PUSCH,c}}(1)$, $\alpha_{c}(1)$ and $f_{c}(i)$ are
the primary cell parameters as defined in subclause 5.1.1.1 and
$P_{\text{O_PUCCH}}$, $\text{PL}_{c}$ and $g(i)$ are defined in subclause
5.1.2.1.
The power headroom shall be rounded to the closest value in the range [40;
-23] dB with steps of 1 dB and is delivered by the physical layer to higher
layers.
### 5.1.2 Physical uplink control channel
#### 5.1.2.1 UE behaviour
If serving cell $c$is the primary cell, the setting of the UE Transmit
power$P_{\text{PUCCH}}$for the physical uplink control channel (PUCCH)
transmission in subframe _i_ is defined by
$P_{\text{PUCCH}}\left( i \right) = \text{min}\begin{matrix} \left{
P_{\text{CMAX,c}}(i), \middle| \right} \ \end{matrix}\left{ \right}$ [dBm]
If the UE is not transmitting PUCCH for the primary cell, for the accumulation
of TPC command received with DCI format 3/3A for PUCCH, the UE shall assume
that the UE transmit power $P_{\text{PUCCH}}$ for the PUCCH transmission in
subframe _i_ is computed by
$P_{\text{PUCCH}}\left( i \right) = \text{min}\left{
P_{\text{CMAX,c}}(i),P_{\text{0_PUCCH}} + \text{PL}_{c} + g\left( i \right)
\right}$ [dBm]
where
  * $P_{\text{CMAX,c}}(i)$is the configured UE transmit power defined in [6] in subframe i for serving cell $c$. If the UE transmits PUSCH without PUCCH in subframe $i$ for the serving cell c, for the accumulation of TPC command received with DCI format 3/3A for PUCCH, the UE shall assume $P_{\text{CMAX,c}}(i)$ as given by subclause 5.1.1.1. If the UE does not transmit PUCCH and PUSCH in subframe $i$ for the serving cell c, for the accumulation of TPC command received with DCI format 3/3A for PUCCH, the UE shall compute $P_{\text{CMAX,c}}(i)$ assuming MPR=0dB, A-MPR=0dB, P-MPR=0dB and ∆T~C~ =0dB, where MPR, A-MPR, P-MPR and ∆T~C~ are defined in [6].
  * The parameter is provided by higher layers. Each value corresponds to a PUCCH format (_F_) relative to PUCCH format 1a, where each PUCCH format (_F_ ) is defined in Table 5.4-1 of [3].
  * If the UE is configured by higher layers to transmit PUCCH on two antenna ports, the value of $\Delta_{\text{TxD}}(F')$is provided by higher layers where each PUCCH format _F'_ is defined in Table 5.4-1 of [3] ; otherwise, $\Delta_{\text{TxD}}(F') = 0$.
  * $h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}})$ is a PUCCH format dependent value, where $n_{\text{CQI}}$ corresponds to the number of information bits for the channel quality information defined in subclause 5.2.3.3 in [4]. $n_{\text{SR}}$ = 1 if subframe _i_ is configured for SR for the UE not having any associated transport block for UL-SCH, otherwise $n_{\text{SR}}$=0. If the UE is configured with more than one serving cell, or the UE is configured with one serving cell and transmitting using PUCCH format 3, the value of $n_{\text{HARQ}}$ is defined in subclause 10.1; otherwise, $n_{\text{HARQ}}$ is the number of HARQ-ACK bits sent in subframe _i_.
    * For PUCCH format 1,1a and 1b $h\left( n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}} \right) = 0$
    * For PUCCH format 1b with channel selection, if the UE is configured with more than one serving cell, $h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}}) = \frac{\left( n_{\text{HARQ}} - 1 \right)}{2}$, otherwise, $h\left( n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}} \right) = 0$
    * For PUCCH format 2, 2a, 2b and normal cyclic prefix $h\left( n_{\text{CQI}},n_{\text{HARQ},}n_{\text{SR}} \right) = \left{ \begin{matrix} \text{10}\text{log}_{\text{10}}\left( \frac{n_{\text{CQI}}}{4} \right) & \text{if}\ n_{\text{CQI}} \geq 4 \ 0 & \text{otherwise} \ \end{matrix} \right.\ $
    * For PUCCH format 2 and extended cyclic prefix $h\left( n_{\text{CQI}},n_{\text{HARQ},}n_{\text{SR}} \right) = \left{ \begin{matrix} \text{10}\text{log}_{\text{10}}\left( \frac{n_{\text{CQI}} + n_{\text{HARQ}}}{4} \right) & \text{if}\ n_{\text{CQI}} + n_{\text{HARQ}} \geq 4 \ 0 & \text{otherwise} \ \end{matrix} \right.\ $
    * For PUCCH format 3
      * If the UE is configured by higher layers to transmit PUCCH on two antenna ports, or if the UE transmits more than 11 bits of HARQ-ACK/SR\ $h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}}) = \frac{n_{\text{HARQ}} + n_{\text{SR}} - 1}{3}$
      * Otherwise\ $h(n_{\text{CQI}},n_{\text{HARQ}},n_{\text{SR}}) = \frac{n_{\text{HARQ}} + n_{\text{SR}} - 1}{2}$
  * $P_{\text{O_PUCCH}}$ is a parameter composed of the sum of a parameter $P_{\text{O_NOMINAL_\ PUCCH}}$ provided by higher layers and a parameter $P_{\text{O_UE_PUCCH}}$ provided by higher layers.
  * $\delta_{\text{PUCCH}}$ is a UE specific correction value, also referred to as a TPC command, included in a PDCCH with DCI format 1A/1B/1D/1/2A/2/2B/2C for the primary cell or sent jointly coded with other UE specific PUCCH correction values on a PDCCH with DCI format 3/3A whose CRC parity bits are scrambled with TPC-PUCCH-RNTI.
    * The UE attempts to decode a PDCCH of DCI format 3/3A with the UE's TPC-PUCCH-RNTI and one or several PDCCHs of DCI format 1A/1B/1D/1/2A/2/2B/2C with the UE's C-RNTI or SPS C-RNTI on every subframe except when in DRX.
    * If the UE decodes a PDCCH with DCI format 1A/1B/1D/1/2A/2/2B/2C for the primary cell and the corresponding detected RNTI equals the C-RNTI or SPS C-RNTI of the UE and the TPC field in the DCI format is not used to determine the PUCCH resource as in subclause 10.1, the UE shall use the $\delta_{\text{PUCCH}}$ provided in that PDCCH.
> else
  * if the UE decodes a PDCCH with DCI format 3/3A, the UE shall use the $\delta_{\text{PUCCH}}$ provided in that PDCCH
> else the UE shall set $\delta_{\text{PUCCH}}$ = 0 dB.
  * where $g(i)$ is the current PUCCH power control adjustment state and where is the first value after reset.
    * For FDD, $M = 1$ and $k_{0} = 4$.
    * For TDD, values of $M$ and $k_{m}$ are given in Table 10.1.3.1-1 _._
    * The $\delta_{\text{PUCCH}}$ dB values signalled on PDCCH with DCI format 1A/1B/1D/1/2A/2/2B/2C are given in Table 5.1.2.1-1. If the PDCCH with DCI format 1/1A/2/2A/2B/2C is validated as an SPS activation PDCCH, or the PDCCH with DCI format 1A is validated as an SPS release PDCCH, then $\delta_{\text{PUCCH}}$ is 0dB.
    * The $\delta_{\text{PUCCH}}$ dB values signalled on PDCCH with DCI format 3/3A are given in Table 5.1.2.1-1 or in Table 5.1.2.1-2 as semi-statically configured by higher layers.
    * If $P_{\text{O_UE_PUCCH}}$ value is changed by higher layers,
      *     * Else
      *         * where $\delta_{\text{msg}2}$ is the TPC command indicated in the random access response, see subclause 6.2 and
        * $\text{ΔP}_{\text{rampup}}$ is the total power ramp-up from the first to the last preamble provided by higher layers
    * If UE has reached $P_{\text{CMAX,c}}(i)$ for the primary cell, positive TPC commands for the primary cell shall not be accumulated
    * If UE has reached minimum power, negative TPC commands shall not be accumulated
    * UE shall reset accumulation
      * when $P_{\text{O_UE_PUCCH}}$ value is changed by higher layers
      * when the UE receives a random access response message
    * if $i$ is not an uplink subframe in TDD.
Table 5.1.2.1-1: Mapping of TPC Command Field in DCI format
1A/1B/1D/1/2A/2B/2C/2/3 to $\delta_{\text{PUCCH}}$ values.
+------------------------------------+--------------------------------+ | TPC Command Field in | $\delta_{\text{PUCCH}}$ [dB] | | | | | DCI format 1A/1B/1D/1/2A/2B/2C/2/3 | | +------------------------------------+--------------------------------+ | 0 | -1 | +------------------------------------+--------------------------------+ | 1 | 0 | +------------------------------------+--------------------------------+ | 2 | 1 | +------------------------------------+--------------------------------+ | 3 | 3 | +------------------------------------+--------------------------------+
Table 5.1.2.1-2: Mapping of TPC Command Field in DCI format 3A to
$\delta_{\text{PUCCH}}$ values.
+----------------------+--------------------------------+ | TPC Command Field in | $\delta_{\text{PUCCH}}$ [dB] | | | | | DCI format 3A | | +----------------------+--------------------------------+ | 0 | -1 | +----------------------+--------------------------------+ | 1 | 1 | +----------------------+--------------------------------+
### 5.1.3 Sounding Reference Symbol
#### 5.1.3.1 UE behaviour
The setting of the UE Transmit power $P_{\text{SRS}}$for the Sounding
Reference Symbol transmitted on subframe _i_ for serving cell $c$ is defined
by
$P_{\text{SRS,c}}\left( i \right) = \text{min}\ \left{ \
P_{\text{CMAX,c}}(i),\ P_{\text{SRS_OFFSET,c}}(m) +
\text{10}\text{log}_{\text{10}}(M_{\text{SRS,c}}) + P_{\text{O_PUSCH,c}}(j) +
\alpha_{c}(j) \cdot \text{PL}_{c} + f_{c}\left( i \right)\ \right}$ [dBm]
where
  * $P_{\text{CMAX,c}}(i)$ is the configured UE transmit power defined in [6] in subframe _i_ for serving cell $c$.
  * $P_{\text{SRS_OFFSET,c}}(m)$ is a 4-bit parameter semi-statically configured by higher layers for _m=0_ and _m=1_ for serving cell $c$. For SRS transmission given trigger type 0 then _m=0_ and for SRS transmission given trigger type 1 then _m=1_. For, $P_{\text{SRS_OFFSET,c}}(m)$ has 1dB step size in the range [-3, 12] dB. For$K_{S} = 0$, $P_{\text{SRS_OFFSET,c}}(m)$ has 1.5 dB step size in the range [-10.5, 12] dB.
  * $M_{\text{SRS,c}}$ is the bandwidth of the SRS transmission in subframe _i_ for serving cell $c$ expressed in number of resource blocks.
  * $f_{c}(i)$ is the current PUSCH power control adjustment state for serving cell $c$, see subclause 5.1.1.1.
  * $P_{\text{O_PUSCH,c}}(j)$ and $\alpha_{c}(j)$ are parameters as defined in subclause 5.1.1.1, where $j = 1$.
If _the total transmit power of the UE_ for the Sounding Reference Symbol in
an SC-FDMA symbol _would exceed_ ${\hat{P}}_{\text{CMAX}}(i)$_, the UE scales_
${\hat{P}}_{\text{SRS},c}(i)$_for the serving cell and the SC-FDMA symbol in
subframe i such that the condition_
_is satisfied where_ ${\hat{P}}_{\text{SRS},c}(i)$_is the linear value of_
$P_{\text{SRS},c}(i)$_,_ ${\hat{P}}_{\text{CMAX}}(i)$_is the linear value of_
$P_{\text{CMAX}}$ _defined in [6] in subframe i and_ $w(i)$ _is a scaling
factor of_ ${\hat{P}}_{\text{SRS},c}(i)$ _for serving cell_ $c$ _where_ $0  Truncate the fixed size resource block assignment to its _b_ least
> significant bits, where $b = \left\lceil \text{log}_{2}\left(
> \frac{N_{\text{RB}}^{\text{UL}} \cdot \left( N_{\text{RB}}^{\text{UL}} + 1
> \right)}{2} \right) \right\rceil$, and interpret the truncated resource
> block assignment according to the rules for a regular DCI format 0
else
> Insert _b_ most significant bits with value set to '0' after the _N~UL_hop~_
> hopping bits in the fixed size resource block assignment, where the number
> of hopping bits _N~UL_hop~_ is zero when the hopping flag bit is not set to
> 1, and is defined in Table 8.4-1 when the hopping flag bit is set to 1, and
> $b = \left( \left\lceil \text{log}_{2}\left( \frac{N_{\text{RB}}^{\text{UL}}
> \cdot \left( N_{\text{RB}}^{\text{UL}} + 1 \right)}{2} \right) \right\rceil
> - \text{10} \right)$, and interpret the expanded resource block assignment
> according to the rules for a regular DCI format 0
end if
The truncated modulation and coding scheme field is interpreted such that the
modulation and coding scheme corresponding to the Random Access Response grant
is determined from MCS indices 0 through 15 in Table 8.6.1-1.
The TPC command $\delta_{\text{msg}2}$ shall be used for setting the power of
the PUSCH, and is interpreted according to Table 6.2-1.
Table 6.2-1: TPC Command $\delta_{\text{msg}2}$ for Scheduled PUSCH
* * *
TPC Command Value (in dB) 0 -6 1 -4 2 -2 3 0 4 2 5 4 6 6 7 8
* * *
In non-contention based random access procedure, the CSI request field is
interpreted to determine whether an aperiodic CQI, PMI, and RI report is
included in the corresponding PUSCH transmission according to subclause 7.2.1.
In contention based random access procedure, the CSI request field is
reserved.
The UL delay applies for both TDD and FDD and this field can be set to 0 or 1
to indicate whether the delay of PUSCH is introduced as shown in subclause
6.1.1.
# 7 Physical downlink shared channel related procedures
For FDD, there shall be a maximum of 8 downlink HARQ processes per serving
cell.
For TDD, the maximum number of downlink HARQ processes per serving cell shall
be determined by the UL/DL configuration (Table 4.2-2 of [3]), as indicated in
Table 7-1.
The dedicated broadcast HARQ process defined in [8] is not counted as part of
the maximum number of HARQ processes for both FDD and TDD.
Table 7-1: Maximum number of DL HARQ processes for TDD
* * *
TDD UL/DL configuration Maximum number of HARQ processes 0 4 1 7 2 10 3 9 4 12
5 15 6 6
* * *
## 7.1 UE procedure for receiving the physical downlink shared channel
Except the subframes indicated by the higher layer parameter _mbsfn-
SubframeConfigList_ , a UE shall upon detection of a PDCCH of a serving cell
with DCI format 1, 1A, 1B, 1C, 1D, 2, 2A, 2B or 2C intended for the UE in a
subframe, decode the corresponding PDSCH in the same subframe with the
restriction of the number of transport blocks defined in the higher layers.
A UE may assume that positioning reference signals are not present in resource
blocks in which it shall decode PDSCH according to a detected PDCCH with CRC
scrambled by the SI-RNTI or P-RNTI with DCI format 1A or 1C intended for the
UE.
A UE configured with the carrier indicator field for a given serving cell
shall assume that the carrier indicator field is not present in any PDCCH of
the serving cell in the common search space that is described in subclause
9.1. Otherwise, the configured UE shall assume that for the given serving cell
the carrier indicator field is present in PDCCH located in the UE specific
search space described in subclause 9.1 when the PDCCH CRC is scrambled by
C-RNTI or SPS C-RNTI.
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the SI-RNTI, the UE shall decode the PDCCH and the corresponding PDSCH
according to any of the combinations defined in Table 7.1-1. The scrambling
initialization of PDSCH corresponding to these PDCCHs is by SI-RNTI.
Table 7.1-1: PDCCH and PDSCH configured by SI-RNTI
* * *
DCI format Search Space Transmission scheme of PDSCH corresponding to PDCCH
DCI format 1C Common If the number of PBCH antenna ports is one, Single-
antenna port, port 0 is used, otherwise Transmit diversity. DCI format 1A
Common If the number of PBCH antenna ports is one, Single-antenna port, port 0
is used, otherwise Transmit diversity
* * *
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the P-RNTI, the UE shall decode the PDCCH and the corresponding PDSCH
according to any of the combinations defined in Table 7.1-2. The scrambling
initialization of PDSCH corresponding to these PDCCHs is by P-RNTI.
Table 7.1-2: PDCCH and PDSCH configured by P-RNTI
* * *
DCI format Search Space Transmission scheme of PDSCH corresponding to PDCCH
DCI format 1C Common If the number of PBCH antenna ports is one, Single-
antenna port, port 0 is used (see subclause 7.1.1), otherwise Transmit
diversity (see subclause 7.1.2) DCI format 1A Common If the number of PBCH
antenna ports is one, Single-antenna port, port 0 is used (see subclause
7.1.1), otherwise Transmit diversity (see subclause 7.1.2)
* * *
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the RA-RNTI, the UE shall decode the PDCCH and the corresponding PDSCH
according to any of the combinations defined in Table 7.1-3. The scrambling
initialization of PDSCH corresponding to these PDCCHs is by RA-RNTI.
When RA-RNTI and either C-RNTI or SPS C-RNTI are assigned in the same
subframe, UE is not required to decode a PDSCH indicated by a PDCCH with a CRC
scrambled by C-RNTI or SPS C-RNTI.
Table 7.1-3: PDCCH and PDSCH configured by RA-RNTI
* * *
DCI format Search Space Transmission scheme of PDSCH corresponding to PDCCH
DCI format 1C Common If the number of PBCH antenna ports is one, Single-
antenna port, port 0 is used (see subclause 7.1.1), otherwise Transmit
diversity (see subclause 7.1.2) DCI format 1A Common If the number of PBCH
antenna ports is one, Single-antenna port, port 0 is used (see subclause
7.1.1), otherwise Transmit diversity (see subclause 7.1.2)
* * *
The UE is semi-statically configured via higher layer signalling to receive
PDSCH data transmissions signalled via PDCCH according to one of nine
transmission modes, denoted mode 1 to mode 9.
For frame structure type 1,
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 5 in any subframe in which the number of OFDM symbols for PDCCH with normal CP is equal to four;
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 5, 7, 8, 9, 10, 11, 12, 13 or 14 in the two PRBs to which a pair of VRBs is mapped if either one of the two PRBs overlaps in frequency with a transmission of either PBCH or primary or secondary synchronisation signals in the same subframe;
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 7 for which distributed VRB resource allocation is assigned.
  * The UE may skip decoding the transport block(s) if it does not receive all assigned PDSCH resource blocks. If the UE skips decoding, the physical layer indicates to higher layer that the transport block(s) are not successfully decoded.
For frame structure type 2,
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 5 in any subframe in which the number of OFDM symbols for PDCCH with normal CP is equal to four;
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 5 in the two PRBs to which a pair of VRBs is mapped if either one of the two PRBs overlaps in frequency with a transmission of PBCH in the same subframe;
  * the UE is not expected to receive PDSCH resource blocks transmitted on antenna port 7, 8, 9, 10, 11, 12, 13 or 14 in the two PRBs to which a pair of VRBs is mapped if either one of the two PRBs overlaps in frequency with a transmission of primary or secondary synchronisation signals in the same subframe;
  * with normal CP configuration, the UE is not expected to receive PDSCH on antenna port 5 for which distributed VRB resource allocation is assigned in the special subframe with configuration #1 or #6;
  * the UE is not expected to receive PDSCH on antenna port 7 for which distributed VRB resource allocation is assigned.
  * The UE may skip decoding the transport block(s) if it does not receive all assigned PDSCH resource blocks. If the UE skips decoding, the physical layer indicates to higher layer that the transport block(s) are not successfully decoded.
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the C-RNTI, the UE shall decode the PDCCH and any corresponding PDSCH
according to the respective combinations defined in Table 7.1-5. The
scrambling initialization of PDSCH corresponding to these PDCCHs is by C-RNTI.
If the UE is configured with the carrier indicator field for a given serving
cell and, if the UE is configured by higher layers to decode PDCCH with CRC
scrambled by the C-RNTI, then the UE shall decode PDSCH of the serving cell
indicated by the carrier indicator field value in the decoded PDCCH.
When a UE configured in transmission mode 3, 4, 8 or 9 receives a DCI Format
1A assignment, it shall assume that the PDSCH transmission is associated with
transport block 1 and that transport block 2 is disabled.
When a UE is configured in transmission mode 7, scrambling initialization of
UE-specific reference signals corresponding to these PDCCHs is by C-RNTI.
The UE does not support transmission mode 8 if extended cyclic prefix is used
in the downlink.
When a UE is configured in transmission mode 9, in the subframes indicated by
the higher layer parameter _mbsfn-SubframeConfigList_ except in subframes for
the serving cell
  * indicated by higher layers to decode PMCH or,
  * configured by higher layers to be part of a positioning reference signal occasion and the positioning reference signal occasion is only configured within MBSFN subframes and the cyclic prefix length used in subframe #0 is normal cyclic prefix,
the UE shall upon detection of a PDCCH with CRC scrambled by the C-RNTI with
DCI format 1A or 2C intended for the UE, decode the corresponding PDSCH in the
same subframe.
Table 7.1-5: PDCCH and PDSCH configured by C-RNTI
+----------------+---------------+----------------+----------------+ | Transmission | DCI format | Search Space | Transmission | | mode | | | scheme of | | | | | PDSCH | | | | | corresponding | | | | | to PDCCH | +----------------+---------------+----------------+----------------+ | Mode 1 | DCI format 1A | Common and | Single-antenna | | | | | port, port 0 | | | | UE specific by | (see subclause | | | | C-RNTI | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Single-antenna | | | | C-RNTI | port, port 0 | | | | | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 2 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Transmit | | | | C-RNTI | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 3 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 2A | UE specific by | Large delay | | | | C-RNTI | CDD (see | | | | | subclause | | | | | 7.1.3) or | | | | | Transmit | | | | | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 4 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 2 | UE specific by | Closed-loop | | | | C-RNTI | spatial | | | | | multiplexing | | | | | (see subclause | | | | | 7.1.4)or | | | | | Transmit | | | | | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 5 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 1D | UE specific by | Multi-user | | | | C-RNTI | MIMO (see | | | | | subclause | | | | | 7.1.5) | +----------------+---------------+----------------+----------------+ | Mode 6 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 1B | UE specific by | Closed-loop | | | | C-RNTI | spatial | | | | | multiplexing | | | | | (see subclause | | | | | 7.1.4) using a | | | | | single | | | | | transmission | | | | | layer | +----------------+---------------+----------------+----------------+ | Mode 7 | DCI format 1A | Common and | If the number | | | | | of PBCH | | | | UE specific by | antenna ports | | | | C-RNTI | is one, | | | | | Single-antenna | | | | | port, port 0 | | | | | is used (see | | | | | subclause | | | | | 7.1.1), | | | | | otherwise | | | | | Transmit | | | | | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Single-antenna | | | | C-RNTI | port, port 5 | | | | | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 8 | DCI format 1A | Common and\ | If the number | | | | UE specific by | of PBCH | | | | C-RNTI | antenna ports | | | | | is one, | | | | | Single-antenna | | | | | port, port 0 | | | | | is used (see | | | | | subclause | | | | | 7.1.1), | | | | | otherwise | | | | | Transmit | | | | | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 2B | UE specific by | Dual layer | | | | C-RNTI | transmission, | | | | | port 7 and 8 | | | | | (see subclause | | | | | 7.1.5A) or | | | | | single-antenna | | | | | port, port 7 | | | | | or 8 (see | | | | | subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 9 | DCI format 1A | Common and\ | Non-MBSFN | | | | UE specific by | subframe: If | | | | C-RNTI | the number of | | | | | PBCH antenna | | | | | ports is one, | | | | | Single-antenna | | | | | port, port 0 | | | | | is used (see | | | | | subclause | | | | | 7.1.1), | | | | | otherwise | | | | | Transmit | | | | | diversity (see | | | | | subclause | | | | | 7.1.2) | | | | | | | | | | MBSFN | | | | | subframe: | | | | | Single-antenna | | | | | port, port 7 | | | | | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 2C | UE specific by | Up to 8 layer | | | | C-RNTI | transmission, | | | | | ports 7-14 | | | | | (see subclause | | | | | 7.1.5B) or | | | | | single-antenna | | | | | port, port 7 | | | | | or 8 (see | | | | | subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the SPS C-RNTI, the UE shall decode the PDCCH on the primary cell and any
corresponding PDSCH on the primary cell according to the respective
combinations defined in Table 7.1-6. The same PDSCH related configuration
applies in the case that a PDSCH is transmitted without a corresponding PDCCH.
The scrambling initialization of PDSCH corresponding to these PDCCHs and PDSCH
without a corresponding PDCCH is by SPS C-RNTI.
When a UE is configured in transmission mode 7, scrambling initialization of
UE-specific reference signals for PDSCH corresponding to these PDCCHs and for
PDSCH without a corresponding PDCCH is by SPS C-RNTI.
When a UE is configured in transmission mode 9, in the subframes indicated by
the higher layer parameter _mbsfn-SubframeConfigList_ except in subframes for
the serving cell
  * indicated by higher layers to decode PMCH or,
  * configured by higher layers to be part of a positioning reference signal occasion and the positioning reference signal occasion is only configured within MBSFN subframes and the cyclic prefix length used in subframe #0 is normal cyclic prefix,
the UE shall upon detection of a PDCCH with CRC scrambled by the SPS C-RNTI
with DCI format 1A or 2C or for a configured PDSCH without PDCCH intended for
the UE, decode the corresponding PDSCH in the same subframe.
Table 7.1-6: PDCCH and PDSCH configured by SPS C-RNTI
+----------------+---------------+----------------+----------------+ | Transmission | DCI format | Search Space | Transmission | | mode | | | scheme of | | | | | PDSCH | | | | | corresponding | | | | | to PDCCH | +----------------+---------------+----------------+----------------+ | Mode 1 | DCI format 1A | Common and | Single-antenna | | | | | port, port 0 | | | | UE specific by | (see subclause | | | | C-RNTI | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Single-antenna | | | | C-RNTI | port, port 0 | | | | | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 2 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Transmit | | | | C-RNTI | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 3 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 2A | UE specific by | Transmit | | | | C-RNTI | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 4 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | | DCI format 2 | UE specific by | Transmit | | | | C-RNTI | diversity (see | | | | | subclause | | | | | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 5 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 6 | DCI format 1A | Common and | Transmit | | | | | diversity (see | | | | UE specific by | subclause | | | | C-RNTI | 7.1.2) | +----------------+---------------+----------------+----------------+ | Mode 7 | DCI format 1A | Common and | Single-antenna | | | | | port, port 5 | | | | UE specific by | (see subclause | | | | C-RNTI | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 1 | UE specific by | Single-antenna | | | | C-RNTI | port, port 5 | | | | | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 8 | DCI format 1A | Common and\ | Single-antenna | | | | UE specific by | port, port | | | | C-RNTI | 7(see | | | | | subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 2B | UE specific by | Single-antenna | | | | C-RNTI | port, port 7 | | | | | or 8 (see | | | | | subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | Mode 9 | DCI format 1A | Common and\ | Single-antenna | | | | UE specific by | port, port 7 | | | | C-RNTI | (see subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+ | | DCI format 2C | UE specific by | Single-antenna | | | | C-RNTI | port, port 7 | | | | | or 8, (see | | | | | subclause | | | | | 7.1.1) | +----------------+---------------+----------------+----------------+
If a UE is configured by higher layers to decode PDCCH with CRC scrambled by
the Temporary C-RNTI and is not configured to decode PDCCH with CRC scrambled
by the C-RNTI, the UE shall decode the PDCCH and the corresponding PDSCH
according to the combination defined in Table 7.1-7. The scrambling
initialization of PDSCH corresponding to these PDCCHs is by Temporary C-RNTI.
Table 7.1-7: PDCCH and PDSCH configured by Temporary C-RNTI
* * *
DCI format Search Space Transmission scheme of PDSCH corresponding to PDCCH
DCI format 1A Common and UE specific by Temporary C-RNTI If the number of PBCH
antenna port is one, Single-antenna port, port 0 is used (see subclause
7.1.1), otherwise Transmit diversity (see subclause 7.1.2) DCI format 1 UE
specific by Temporary C-RNTI If the number of PBCH antenna port is one,
Single-antenna port, port 0 is used (see subclause 7.1.1), otherwise Transmit
diversity (see subclause 7.1.2)
* * *
The transmission schemes of the PDSCH are described in the following sub-
clauses.
### 7.1.1 Single-antenna port scheme
For the single-antenna port transmission schemes (port 0, port 5, port 7 or
port 8) of the PDSCH, the UE may assume that an eNB transmission on the PDSCH
would be performed according to subclause 6.3.4.1 of [3].
In case an antenna port $p \in \left{ 7,8 \right}$ is used, the UE cannot
assume that the other antenna port in the set $\left{ 7,8 \right}$ is not
associated with transmission of PDSCH to another UE.
### 7.1.2 Transmit diversity scheme
For the transmit diversity transmission scheme of the PDSCH, the UE may assume
that an eNB transmission on the PDSCH would be performed according to
subclause 6.3.4.3 of [3]
### 7.1.3 Large delay CDD scheme
For the large delay CDD transmission scheme of the PDSCH, the UE may assume
that an eNB transmission on the PDSCH would be performed according to large
delay CDD as defined in subclause 6.3.4.2.2 of [3].
### 7.1.4 Closed-loop spatial multiplexing scheme
For the closed-loop spatial multiplexing transmission scheme of the PDSCH, the
UE may assume that an eNB transmission on the PDSCH would be performed
according to the applicable number of transmission layers as defined in
subclause 6.3.4.2.1 of [3].
### 7.1.5 Multi-user MIMO scheme
For the multi-user MIMO transmission scheme of the PDSCH, the UE may assume
that an eNB transmission on the PDSCH would be performed on one layer and
according to subclause 6.3.4.2.1 of [3]. The $\delta_{\text{power-offset}}$dB
value signalled on PDCCH with DCI format 1D using the downlink power offset
field is given in Table 7.1.5-1.
Table 7.1.5-1: Mapping of downlink power offset field in DCI format 1D to the
$\delta_{\text{power-offset}}$value.
* * *
Downlink power offset field $\delta_{\text{power-offset}}$[dB] 0 -10log~10~(2)
1 0
* * *
### 7.1.5A Dual layer scheme
For the dual layer transmission scheme of the PDSCH, the UE may assume that an
eNB transmission on the PDSCH would be performed with two transmission layers
on antenna ports 7 and 8 as defined in subclause 6.3.4.4 of [3].
### 7.1.5B Up to 8 layer transmission scheme
For the up to 8 layer transmission scheme of the PDSCH, the UE may assume that
an eNB transmission on the PDSCH would be performed with up to 8 transmission
layers on antenna ports 7 - 14 as defined in subclause 6.3.4.4 of [3].
### 7.1.6 Resource allocation
The UE shall interpret the resource allocation field depending on the PDCCH
DCI format detected. A resource allocation field in each PDCCH includes two
parts, a resource allocation header field and information consisting of the
actual resource block assignment. PDCCH DCI formats 1, 2, 2A, 2B and 2C with
type 0 and PDCCH DCI formats 1, 2, 2A,2B and 2C with type 1 resource
allocation have the same format and are distinguished from each other via the
single bit resource allocation header field which exists depending on the
downlink system bandwidth (subclause 5.3.3.1 of [4]), where type 0 is
indicated by 0 value and type 1 is indicated otherwise. PDCCH with DCI format
1A, 1B, 1C and 1D have a type 2 resource allocation while PDCCH with DCI
format 1, 2, 2A, 2B and 2C have type 0 or type 1 resource allocation. PDCCH
DCI formats with a type 2 resource allocation do not have a resource
allocation header field.
#### 7.1.6.1 Resource allocation type 0
In resource allocations of type 0, resource block assignment information
includes a bitmap indicating the resource block groups (RBGs) that are
allocated to the scheduled UE where a RBG is a set of consecutive virtual
resource blocks (VRBs) of localized type as defined in subclause 6.2.3.1 of
[3]. Resource block group size (_P_) is a function of the system bandwidth as
shown in Table 7.1.6.1-1. The total number of RBGs ($N_{\text{RBG}}$) for
downlink system bandwidth of$N_{\text{RB}}^{\text{DL}}$ is given by
$N_{\text{RBG}} = \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P}
\right\rceil$where $\left\lfloor \frac{N_{\text{RB}}^{\text{DL}}}{P}
\right\rfloor$of the RBGs are of size P and if
$N_{\text{RB}}^{\text{DL}}\text{mod}P > 0$ then one of the RBGs is of
size$N_{\text{RB}}^{\text{DL}} - P \cdot \left\lfloor
\frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rfloor$. The bitmap is of size
$N_{\text{RBG}}$bits with one bitmap bit per RBG such that each RBG is
addressable. The RBGs shall be indexed in the order of increasing frequency
and non-increasing RBG sizes starting at the lowest frequency. The order of
RBG to bitmap bit mapping is in such way that RBG 0 to RBG$N_{\text{RBG}} - 1$
are mapped to MSB to LSB of the bitmap. The RBG is allocated to the UE if the
corresponding bit value in the bitmap is 1, the RBG is not allocated to the UE
otherwise.
Table 7.1.6.1-1: Type 0 Resource Allocation RBG Size vs. Downlink System
Bandwidth
* * *
System Bandwidth RBG Size (_P_) ≤10 1 11 -- 26 2 27 -- 63 3 64 -- 110 4
* * *
#### 7.1.6.2 Resource allocation type 1
In resource allocations of type 1, a resource block assignment information of
size $N_{\text{RBG}}$ indicates to a scheduled UE the VRBs from the set of
VRBs from one of _P_ RBG subsets. The virtual resource blocks used are of
localized type as defined in subclause 6.2.3.1 of [3]. Also _P_ is the RBG
size associated with the system bandwidth as shown in Table 7.1.6.1-1. A RBG
subset $p$, where $0 \leq p  0$ then one of the PRGs is of
size $N_{\text{RB}}^{\text{DL}} - P^{'}\left\lfloor
\frac{N_{\text{RB}}^{\text{DL}}}{P^{'}} \right\rfloor$. The PRG size is non-
increasing starting at the lowest frequency. The UE may assume that the same
precoder applies on all scheduled PRBs within a PRG.
The PRG size a UE may assume for a given system bandwidth is given by:
Table 7.1.6.5-1
+------------------------------------------------+--------------------+ | System Bandwidth ($N_{\text{RB}}^{\text{DL}}$) | PRG Size ($P^{'}$) | | | | | | (PRBs) | +------------------------------------------------+--------------------+ | ≤10 | 1 | +------------------------------------------------+--------------------+ | 11 -- 26 | 2 | +------------------------------------------------+--------------------+ | 27 -- 63 | 3 | +------------------------------------------------+--------------------+ | 64 -- 110 | 2 | +------------------------------------------------+--------------------+
### 7.1.7 Modulation order and transport block size determination
To determine the modulation order and transport block size(s) in the physical
downlink shared channel, the UE shall first
  * read the 5-bit "modulation and coding scheme" field ($I_{\text{MCS}}$) in the DCI
and second if the DCI CRC is scrambled by P-RNTI, RA-RNTI, or SI-RNTI then
  * for DCI format 1A:
    * set the Table 7.1.7.2.1-1 column indicator$N_{\text{PRB}}$ to from subclause 5.3.3.1.3 in [4]
  * for DCI format 1C:
    * use Table 7.1.7.2.3-1 for determining its transport block size.
else
  * set $N_{\text{PRB}}^{'}$ to the total number of allocated PRBs based on the procedure defined in subclause 7.1.6.
> if the transport block is transmitted in DwPTS of the special subframe in
> frame structure type 2, then
>
> set the Table 7.1.7.2.1-1 column indicator ,
>
> else, set the Table 7.1.7.2.1-1 column indicator $N_{\text{PRB}} =
> N_{\text{PRB}}^{'}$.
The UE may skip decoding a transport block in an initial transmission if the
effective channel code rate is higher than 0.930, where the effective channel
code rate is defined as the number of downlink information bits (including CRC
bits) divided by the number of physical channel bits on PDSCH. If the UE skips
decoding, the physical layer indicates to higher layer that the transport
block is not successfully decoded. For the special subframe configurations 0
and 5 with normal downlink CP or configurations 0 and 4 with extended downlink
CP, shown in Table 4.2-1 of [3], there shall be no PDSCH transmission in DwPTS
of the special subframe.
#### 7.1.7.1 Modulation order determination
The UE shall use $Q_{m}$**= 2** if the DCI CRC is scrambled by P-RNTI, RA-
RNTI, or SI-RNTI, otherwise, the UE shall use$I_{\text{MCS}}$and Table
7.1.7.1-1 to determine the modulation order ($Q_{m}$) used in the physical
downlink shared channel.
Table 7.1.7.1-1: Modulation and TBS index table for PDSCH
* * *
**MCS Index\** Modulation Order\ **TBS Index\** $I_{\text{MCS}}$ **$Q_{m}$**
$I_{\text{TBS}}$
0 2 0
1 2 1
2 2 2
3 2 3
4 2 4
5 2 5
6 2 6
7 2 7
8 2 8
9 2 9
10 4 9
11 4 10
12 4 11
13 4 12
14 4 13
15 4 14
16 4 15
17 6 15
18 6 16
19 6 17
20 6 18
21 6 19
22 6 20
23 6 21
24 6 22
25 6 23
26 6 24
27 6 25
28 6 26
29 2 reserved
30 4
31 6
* * *
#### 7.1.7.2 Transport block size determination
If the DCI CRC is scrambled by P-RNTI, RA-RNTI, or SI-RNTI then
  * for DCI format 1A:
    * the UE shall set the TBS index ($I_{\text{TBS}}$) equal to $I_{\text{MCS}}$ and determine its TBS by the procedure in subclause 7.1.7.2.1.
  * for DCI format 1C:
    * the UE shall set the TBS index ($I_{\text{TBS}}$) equal to $I_{\text{MCS}}$ and determine its TBS from Table 7.1.7.2.3-1.
else
  * for$0 \leq I_{\text{MCS}} \leq \text{28}$, the UE shall first determine the TBS index ($I_{\text{TBS}}$) using$I_{\text{MCS}}$and Table 7.1.7.1-1 except if the transport block is disabled in DCI formats 2, 2A, 2B and 2C as specified below. For a transport block that is not mapped to more than single-layer spatial multiplexing, the TBS is determined by the procedure in subclause 7.1.7.2.1. For a transport block that is mapped to two-layer spatial multiplexing, the TBS is determined by the procedure in subclause 7.1.7.2.2. For a transport block that is mapped to three-layer spatial multiplexing, the TBS is determined by the procedure in subclause 7.1.7.2.4. For a transport block that is mapped to four-layer spatial multiplexing, the TBS is determined by the procedure in subclause 7.1.7.2.5.
  * for$\text{29} \leq I_{\text{MCS}} \leq \text{31}$, the TBS is assumed to be as determined from DCI transported in the latest PDCCH for the same transport block using $0 \leq I_{\text{MCS}} \leq \text{28}$. If there is no PDCCH for the same transport block using$0 \leq I_{\text{MCS}} \leq \text{28}$, and if the initial PDSCH for the same transport block is semi-persistently scheduled, the TBS shall be determined from the most recent semi-persistent scheduling assignment PDCCH.
  * In DCI formats 2, 2A, 2B and 2C a transport block is disabled if $I_{\text{MCS}} = 0$ and if _rv~idx~_ = 1 otherwise the transport block is enabled.
The NDI and HARQ process ID, as signalled on PDCCH, and the TBS, as determined
above, shall be delivered to higher layers.
##### 7.1.7.2.1 Transport blocks not mapped to two or more layer spatial
multiplexing
For$1 \leq N_{\text{PRB}} \leq \text{110}$, the TBS is given by the
($I_{\text{TBS}}$,$N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1.
Table 7.1.7.2.1-1: Transport block size table (dimension 27×110)
* * *
       1       2       3       4       5       6       7       8       9       10
0 16 32 56 88 120 152 176 208 224 256 1 24 56 88 144 176 208 224 256 328 344 2
32 72 144 176 208 256 296 328 376 424 3 40 104 176 208 256 328 392 440 504 568
4 56 120 208 256 328 408 488 552 632 696 5 72 144 224 328 424 504 600 680 776
872 6 328 176 256 392 504 600 712 808 936 1032 7 104 224 328 472 584 712 840
968 1096 1224 8 120 256 392 536 680 808 968 1096 1256 1384 9 136 296 456 616
776 936 1096 1256 1416 1544 10 144 328 504 680 872 1032 1224 1384 1544 1736 11
176 376 584 776 1000 1192 1384 1608 1800 2024 12 208 440 680 904 1128 1352
1608 1800 2024 2280 13 224 488 744 1000 1256 1544 1800 2024 2280 2536 14 256
552 840 1128 1416 1736 1992 2280 2600 2856 15 280 600 904 1224 1544 1800 2152
2472 2728 3112 16 328 632 968 1288 1608 1928 2280 2600 2984 3240 17 336 696
1064 1416 1800 2152 2536 2856 3240 3624 18 376 776 1160 1544 1992 2344 2792
3112 3624 4008 19 408 840 1288 1736 2152 2600 2984 3496 3880 4264 20 440 904
1384 1864 2344 2792 3240 3752 4136 4584 21 488 1000 1480 1992 2472 2984 3496
4008 4584 4968 22 520 1064 1608 2152 2664 3240 3752 4264 4776 5352 23 552 1128
1736 2280 2856 3496 4008 4584 5160 5736 24 584 1192 1800 2408 2984 3624 4264
4968 5544 5992 25 616 1256 1864 2536 3112 3752 4392 5160 5736 6200 26 712 1480
2216 2984 3752 4392 5160 5992 6712 7480
       11      12      13      14      15      16      17      18      19      20
0 288 328 344 376 392 424 456 488 504 536 1 376 424 456 488 520 568 600 632
680 712 2 472 520 568 616 648 696 744 776 840 872 3 616 680 744 808 872 904
968 1032 1096 1160 4 776 840 904 1000 1064 1128 1192 1288 1352 1416 5 968 1032
1128 1224 1320 1384 1480 1544 1672 1736 6 1128 1224 1352 1480 1544 1672 1736
1864 1992 2088 7 1320 1480 1608 1672 1800 1928 2088 2216 2344 2472 8 1544 1672
1800 1928 2088 2216 2344 2536 2664 2792 9 1736 1864 2024 2216 2344 2536 2664
2856 2984 3112 10 1928 2088 2280 2472 2664 2792 2984 3112 3368 3496 11 2216
2408 2600 2792 2984 3240 3496 3624 3880 4008 12 2472 2728 2984 3240 3368 3624
3880 4136 4392 4584 13 2856 3112 3368 3624 3880 4136 4392 4584 4968 5160 14
3112 3496 3752 4008 4264 4584 4968 5160 5544 5736 15 3368 3624 4008 4264 4584
4968 5160 5544 5736 6200 16 3624 3880 4264 4584 4968 5160 5544 5992 6200 6456
17 4008 4392 4776 5160 5352 5736 6200 6456 6712 7224 18 4392 4776 5160 5544
5992 6200 6712 7224 7480 7992 19 4776 5160 5544 5992 6456 6968 7224 7736 8248
8504 20 5160 5544 5992 6456 6968 7480 7992 8248 8760 9144 21 5544 5992 6456
6968 7480 7992 8504 9144 9528 9912 22 5992 6456 6968 7480 7992 8504 9144 9528
10296 10680 23 6200 6968 7480 7992 8504 9144 9912 10296 11064 11448 24 6712
7224 7992 8504 9144 9912 10296 11064 11448 12216 25 6968 7480 8248 8760 9528
10296 10680 11448 12216 12576 26 8248 8760 9528 10296 11064 11832 12576 13536
14112 14688
       21      22      23      24      25      26      27      28      29      30
0 568 600 616 648 680 712 744 776 776 808 1 744 776 808 872 904 936 968 1000
1032 1064 2 936 968 1000 1064 1096 1160 1192 1256 1288 1320 3 1224 1256 1320
1384 1416 1480 1544 1608 1672 1736 4 1480 1544 1608 1736 1800 1864 1928 1992
2088 2152 5 1864 1928 2024 2088 2216 2280 2344 2472 2536 2664 6 2216 2280 2408
2472 2600 2728 2792 2984 2984 3112 7 2536 2664 2792 2984 3112 3240 3368 3368
3496 3624 8 2984 3112 3240 3368 3496 3624 3752 3880 4008 4264 9 3368 3496 3624
3752 4008 4136 4264 4392 4584 4776 10 3752 3880 4008 4264 4392 4584 4776 4968
5160 5352 11 4264 4392 4584 4776 4968 5352 5544 5736 5992 5992 12 4776 4968
5352 5544 5736 5992 6200 6456 6712 6712 13 5352 5736 5992 6200 6456 6712 6968
7224 7480 7736 14 5992 6200 6456 6968 7224 7480 7736 7992 8248 8504 15 6456
6712 6968 7224 7736 7992 8248 8504 8760 9144 16 6712 7224 7480 7736 7992 8504
8760 9144 9528 9912 17 7480 7992 8248 8760 9144 9528 9912 10296 10296 10680 18
8248 8760 9144 9528 9912 10296 10680 11064 11448 11832 19 9144 9528 9912 10296
10680 11064 11448 12216 12576 12960 20 9912 10296 10680 11064 11448 12216
12576 12960 13536 14112 21 10680 11064 11448 12216 12576 12960 13536 14112
14688 15264 22 11448 11832 12576 12960 13536 14112 14688 15264 15840 16416 23
12216 12576 12960 13536 14112 14688 15264 15840 16416 16992 24 12960 13536
14112 14688 15264 15840 16416 16992 17568 18336 25 13536 14112 14688 15264
15840 16416 16992 17568 18336 19080 26 15264 16416 16992 17568 18336 19080
19848 20616 21384 22152
       31      32      33      34      35      36      37      38      39      40
0 840 872 904 936 968 1000 1032 1032 1064 1096 1 1128 1160 1192 1224 1256 1288
1352 1384 1416 1416 2 1384 1416 1480 1544 1544 1608 1672 1672 1736 1800 3 1800
1864 1928 1992 2024 2088 2152 2216 2280 2344 4 2216 2280 2344 2408 2472 2600
2664 2728 2792 2856 5 2728 2792 2856 2984 3112 3112 3240 3368 3496 3496 6 3240
3368 3496 3496 3624 3752 3880 4008 4136 4136 7 3752 3880 4008 4136 4264 4392
4584 4584 4776 4968 8 4392 4584 4584 4776 4968 4968 5160 5352 5544 5544 9 4968
5160 5160 5352 5544 5736 5736 5992 6200 6200 10 5544 5736 5736 5992 6200 6200
6456 6712 6712 6968 11 6200 6456 6712 6968 6968 7224 7480 7736 7736 7992 12
6968 7224 7480 7736 7992 8248 8504 8760 8760 9144 13 7992 8248 8504 8760 9144
9144 9528 9912 9912 10296 14 8760 9144 9528 9912 9912 10296 10680 11064 11064
11448 15 9528 9912 10296 10296 10680 11064 11448 11832 11832 12216 16 9912
10296 10680 11064 11448 11832 12216 12216 12576 12960 17 11064 11448 11832
12216 12576 12960 13536 13536 14112 14688 18 12216 12576 12960 13536 14112
14112 14688 15264 15264 15840 19 13536 13536 14112 14688 15264 15264 15840
16416 16992 16992 20 14688 14688 15264 15840 16416 16992 16992 17568 18336
18336 21 15840 15840 16416 16992 17568 18336 18336 19080 19848 19848 22 16992
16992 17568 18336 19080 19080 19848 20616 21384 21384 23 17568 18336 19080
19848 19848 20616 21384 22152 22152 22920 24 19080 19848 19848 20616 21384
22152 22920 22920 23688 24496 25 19848 20616 20616 21384 22152 22920 23688
24496 24496 25456 26 22920 23688 24496 25456 25456 26416 27376 28336 29296
29296
       41      42      43      44      45      46      47      48      49      50
0 1128 1160 1192 1224 1256 1256 1288 1320 1352 1384 1 1480 1544 1544 1608 1608
1672 1736 1736 1800 1800 2 1800 1864 1928 1992 2024 2088 2088 2152 2216 2216 3
2408 2472 2536 2536 2600 2664 2728 2792 2856 2856 4 2984 2984 3112 3112 3240
3240 3368 3496 3496 3624 5 3624 3752 3752 3880 4008 4008 4136 4264 4392 4392 6
4264 4392 4584 4584 4776 4776 4968 4968 5160 5160 7 4968 5160 5352 5352 5544
5736 5736 5992 5992 6200 8 5736 5992 5992 6200 6200 6456 6456 6712 6968 6968 9
6456 6712 6712 6968 6968 7224 7480 7480 7736 7992 10 7224 7480 7480 7736 7992
7992 8248 8504 8504 8760 11 8248 8504 8760 8760 9144 9144 9528 9528 9912 9912
12 9528 9528 9912 9912 10296 10680 10680 11064 11064 11448 13 10680 10680
11064 11448 11448 11832 12216 12216 12576 12960 14 11832 12216 12216 12576
12960 12960 13536 13536 14112 14112 15 12576 12960 12960 13536 13536 14112
14688 14688 15264 15264 16 13536 13536 14112 14112 14688 14688 15264 15840
15840 16416 17 14688 15264 15264 15840 16416 16416 16992 17568 17568 18336 18
16416 16416 16992 17568 17568 18336 18336 19080 19080 19848 19 17568 18336
18336 19080 19080 19848 20616 20616 21384 21384 20 19080 19848 19848 20616
20616 21384 22152 22152 22920 22920 21 20616 21384 21384 22152 22920 22920
23688 24496 24496 25456 22 22152 22920 22920 23688 24496 24496 25456 25456
26416 27376 23 23688 24496 24496 25456 25456 26416 27376 27376 28336 28336 24
25456 25456 26416 26416 27376 28336 28336 29296 29296 30576 25 26416 26416
27376 28336 28336 29296 29296 30576 31704 31704 26 30576 30576 31704 32856
32856 34008 35160 35160 36696 36696
       51      52      53      54      55      56      57      58      59      60
0 1416 1416 1480 1480 1544 1544 1608 1608 1608 1672 1 1864 1864 1928 1992 1992
2024 2088 2088 2152 2152 2 2280 2344 2344 2408 2472 2536 2536 2600 2664 2664 3
2984 2984 3112 3112 3240 3240 3368 3368 3496 3496 4 3624 3752 3752 3880 4008
4008 4136 4136 4264 4264 5 4584 4584 4776 4776 4776 4968 4968 5160 5160 5352 6
5352 5352 5544 5736 5736 5992 5992 5992 6200 6200 7 6200 6456 6456 6712 6712
6712 6968 6968 7224 7224 8 7224 7224 7480 7480 7736 7736 7992 7992 8248 8504 9
7992 8248 8248 8504 8760 8760 9144 9144 9144 9528 10 9144 9144 9144 9528 9528
9912 9912 10296 10296 10680 11 10296 10680 10680 11064 11064 11448 11448 11832
11832 12216 12 11832 11832 12216 12216 12576 12576 12960 12960 13536 13536 13
12960 13536 13536 14112 14112 14688 14688 14688 15264 15264 14 14688 14688
15264 15264 15840 15840 16416 16416 16992 16992 15 15840 15840 16416 16416
16992 16992 17568 17568 18336 18336 16 16416 16992 16992 17568 17568 18336
18336 19080 19080 19848 17 18336 19080 19080 19848 19848 20616 20616 20616
21384 21384 18 19848 20616 21384 21384 22152 22152 22920 22920 23688 23688 19
22152 22152 22920 22920 23688 24496 24496 25456 25456 25456 20 23688 24496
24496 25456 25456 26416 26416 27376 27376 28336 21 25456 26416 26416 27376
27376 28336 28336 29296 29296 30576 22 27376 28336 28336 29296 29296 30576
30576 31704 31704 32856 23 29296 29296 30576 30576 31704 31704 32856 32856
34008 34008 24 31704 31704 32856 32856 34008 34008 35160 35160 36696 36696 25
32856 32856 34008 34008 35160 35160 36696 36696 37888 37888 26 37888 37888
39232 40576 40576 40576 42368 42368 43816 43816
       61      62      63      64      65      66      67      68      69      70
0 1672 1736 1736 1800 1800 1800 1864 1864 1928 1928 1 2216 2280 2280 2344 2344
2408 2472 2472 2536 2536 2 2728 2792 2856 2856 2856 2984 2984 3112 3112 3112 3
3624 3624 3624 3752 3752 3880 3880 4008 4008 4136 4 4392 4392 4584 4584 4584
4776 4776 4968 4968 4968 5 5352 5544 5544 5736 5736 5736 5992 5992 5992 6200 6
6456 6456 6456 6712 6712 6968 6968 6968 7224 7224 7 7480 7480 7736 7736 7992
7992 8248 8248 8504 8504 8 8504 8760 8760 9144 9144 9144 9528 9528 9528 9912 9
9528 9912 9912 10296 10296 10296 10680 10680 11064 11064 10 10680 11064 11064
11448 11448 11448 11832 11832 12216 12216 11 12216 12576 12576 12960 12960
13536 13536 13536 14112 14112 12 14112 14112 14112 14688 14688 15264 15264
15264 15840 15840 13 15840 15840 16416 16416 16992 16992 16992 17568 17568
18336 14 17568 17568 18336 18336 18336 19080 19080 19848 19848 19848 15 18336
19080 19080 19848 19848 20616 20616 20616 21384 21384 16 19848 19848 20616
20616 21384 21384 22152 22152 22152 22920 17 22152 22152 22920 22920 23688
23688 24496 24496 24496 25456 18 24496 24496 24496 25456 25456 26416 26416
27376 27376 27376 19 26416 26416 27376 27376 28336 28336 29296 29296 29296
30576 20 28336 29296 29296 29296 30576 30576 31704 31704 31704 32856 21 30576
31704 31704 31704 32856 32856 34008 34008 35160 35160 22 32856 34008 34008
34008 35160 35160 36696 36696 36696 37888 23 35160 35160 36696 36696 37888
37888 37888 39232 39232 40576 24 36696 37888 37888 39232 39232 40576 40576
42368 42368 42368 25 39232 39232 40576 40576 40576 42368 42368 43816 43816
43816 26 45352 45352 46888 46888 48936 48936 48936 51024 51024 52752
       71      72      73      74      75      76      77      78      79      80
0 1992 1992 2024 2088 2088 2088 2152 2152 2216 2216 1 2600 2600 2664 2728 2728
2792 2792 2856 2856 2856 2 3240 3240 3240 3368 3368 3368 3496 3496 3496 3624 3
4136 4264 4264 4392 4392 4392 4584 4584 4584 4776 4 5160 5160 5160 5352 5352
5544 5544 5544 5736 5736 5 6200 6200 6456 6456 6712 6712 6712 6968 6968 6968 6
7480 7480 7736 7736 7736 7992 7992 8248 8248 8248 7 8760 8760 8760 9144 9144
9144 9528 9528 9528 9912 8 9912 9912 10296 10296 10680 10680 10680 11064 11064
11064 9 11064 11448 11448 11832 11832 11832 12216 12216 12576 12576 10 12576
12576 12960 12960 12960 13536 13536 13536 14112 14112 11 14112 14688 14688
14688 15264 15264 15840 15840 15840 16416 12 16416 16416 16416 16992 16992
17568 17568 17568 18336 18336 13 18336 18336 19080 19080 19080 19848 19848
19848 20616 20616 14 20616 20616 20616 21384 21384 22152 22152 22152 22920
22920 15 22152 22152 22152 22920 22920 23688 23688 23688 24496 24496 16 22920
23688 23688 24496 24496 24496 25456 25456 25456 26416 17 25456 26416 26416
26416 27376 27376 27376 28336 28336 29296 18 28336 28336 29296 29296 29296
30576 30576 30576 31704 31704 19 30576 30576 31704 31704 32856 32856 32856
34008 34008 34008 20 32856 34008 34008 34008 35160 35160 35160 36696 36696
36696 21 35160 36696 36696 36696 37888 37888 39232 39232 39232 40576 22 37888
39232 39232 40576 40576 40576 42368 42368 42368 43816 23 40576 40576 42368
42368 43816 43816 43816 45352 45352 45352 24 43816 43816 45352 45352 45352
46888 46888 46888 48936 48936 25 45352 45352 46888 46888 46888 48936 48936
48936 51024 51024 26 52752 52752 55056 55056 55056 55056 57336 57336 57336
59256
       81      82      83      84      85      86      87      88      89      90
0 2280 2280 2280 2344 2344 2408 2408 2472 2472 2536 1 2984 2984 2984 3112 3112
3112 3240 3240 3240 3240 2 3624 3624 3752 3752 3880 3880 3880 4008 4008 4008 3
4776 4776 4776 4968 4968 4968 5160 5160 5160 5352 4 5736 5992 5992 5992 5992
6200 6200 6200 6456 6456 5 7224 7224 7224 7480 7480 7480 7736 7736 7736 7992 6
8504 8504 8760 8760 8760 9144 9144 9144 9144 9528 7 9912 9912 10296 10296
10296 10680 10680 10680 11064 11064 8 11448 11448 11448 11832 11832 12216
12216 12216 12576 12576 9 12960 12960 12960 13536 13536 13536 13536 14112
14112 14112 10 14112 14688 14688 14688 14688 15264 15264 15264 15840 15840 11
16416 16416 16992 16992 16992 17568 17568 17568 18336 18336 12 18336 19080
19080 19080 19080 19848 19848 19848 20616 20616 13 20616 21384 21384 21384
22152 22152 22152 22920 22920 22920 14 22920 23688 23688 24496 24496 24496
25456 25456 25456 25456 15 24496 25456 25456 25456 26416 26416 26416 27376
27376 27376 16 26416 26416 27376 27376 27376 28336 28336 28336 29296 29296 17
29296 29296 30576 30576 30576 30576 31704 31704 31704 32856 18 31704 32856
32856 32856 34008 34008 34008 35160 35160 35160 19 35160 35160 35160 36696
36696 36696 37888 37888 37888 39232 20 37888 37888 39232 39232 39232 40576
40576 40576 42368 42368 21 40576 40576 42368 42368 42368 43816 43816 43816
45352 45352 22 43816 43816 45352 45352 45352 46888 46888 46888 48936 48936 23
46888 46888 46888 48936 48936 48936 51024 51024 51024 51024 24 48936 51024
51024 51024 52752 52752 52752 52752 55056 55056 25 51024 52752 52752 52752
55056 55056 55056 55056 57336 57336 26 59256 59256 61664 61664 61664 63776
63776 63776 66592 66592
       91      92      93      94      95      96      97      98      99      100
0 2536 2536 2600 2600 2664 2664 2728 2728 2728 2792 1 3368 3368 3368 3496 3496
3496 3496 3624 3624 3624 2 4136 4136 4136 4264 4264 4264 4392 4392 4392 4584 3
5352 5352 5352 5544 5544 5544 5736 5736 5736 5736 4 6456 6456 6712 6712 6712
6968 6968 6968 6968 7224 5 7992 7992 8248 8248 8248 8504 8504 8760 8760 8760 6
9528 9528 9528 9912 9912 9912 10296 10296 10296 10296 7 11064 11448 11448
11448 11448 11832 11832 11832 12216 12216 8 12576 12960 12960 12960 13536
13536 13536 13536 14112 14112 9 14112 14688 14688 14688 15264 15264 15264
15264 15840 15840 10 15840 16416 16416 16416 16992 16992 16992 16992 17568
17568 11 18336 18336 19080 19080 19080 19080 19848 19848 19848 19848 12 20616
21384 21384 21384 21384 22152 22152 22152 22920 22920 13 23688 23688 23688
24496 24496 24496 25456 25456 25456 25456 14 26416 26416 26416 27376 27376
27376 28336 28336 28336 28336 15 28336 28336 28336 29296 29296 29296 29296
30576 30576 30576 16 29296 30576 30576 30576 30576 31704 31704 31704 31704
32856 17 32856 32856 34008 34008 34008 35160 35160 35160 35160 36696 18 36696
36696 36696 37888 37888 37888 37888 39232 39232 39232 19 39232 39232 40576
40576 40576 40576 42368 42368 42368 43816 20 42368 42368 43816 43816 43816
45352 45352 45352 46888 46888 21 45352 46888 46888 46888 46888 48936 48936
48936 48936 51024 22 48936 48936 51024 51024 51024 51024 52752 52752 52752
55056 23 52752 52752 52752 55056 55056 55056 55056 57336 57336 57336 24 55056
57336 57336 57336 57336 59256 59256 59256 61664 61664 25 57336 59256 59256
59256 61664 61664 61664 61664 63776 63776 26 66592 68808 68808 68808 71112
71112 71112 73712 73712 75376
       101     102     103     104     105     106     107     108     109     110
0 2792 2856 2856 2856 2984 2984 2984 2984 2984 3112 1 3752 3752 3752 3752 3880
3880 3880 4008 4008 4008 2 4584 4584 4584 4584 4776 4776 4776 4776 4968 4968 3
5992 5992 5992 5992 6200 6200 6200 6200 6456 6456 4 7224 7224 7480 7480 7480
7480 7736 7736 7736 7992 5 8760 9144 9144 9144 9144 9528 9528 9528 9528 9528 6
10680 10680 10680 10680 11064 11064 11064 11448 11448 11448 7 12216 12576
12576 12576 12960 12960 12960 12960 13536 13536 8 14112 14112 14688 14688
14688 14688 15264 15264 15264 15264 9 15840 16416 16416 16416 16416 16992
16992 16992 16992 17568 10 17568 18336 18336 18336 18336 18336 19080 19080
19080 19080 11 20616 20616 20616 21384 21384 21384 21384 22152 22152 22152 12
22920 23688 23688 23688 23688 24496 24496 24496 24496 25456 13 26416 26416
26416 26416 27376 27376 27376 27376 28336 28336 14 29296 29296 29296 29296
30576 30576 30576 30576 31704 31704 15 30576 31704 31704 31704 31704 32856
32856 32856 34008 34008 16 32856 32856 34008 34008 34008 34008 35160 35160
35160 35160 17 36696 36696 36696 37888 37888 37888 39232 39232 39232 39232 18
40576 40576 40576 40576 42368 42368 42368 42368 43816 43816 19 43816 43816
43816 45352 45352 45352 46888 46888 46888 46888 20 46888 46888 48936 48936
48936 48936 48936 51024 51024 51024 21 51024 51024 51024 52752 52752 52752
52752 55056 55056 55056 22 55056 55056 55056 57336 57336 57336 57336 59256
59256 59256 23 57336 59256 59256 59256 59256 61664 61664 61664 61664 63776 24
61664 61664 63776 63776 63776 63776 66592 66592 66592 66592 25 63776 63776
66592 66592 66592 66592 68808 68808 68808 71112 26 75376 75376 75376 75376
75376 75376 75376 75376 75376 75376
* * *
##### 7.1.7.2.2 Transport blocks mapped to two-layer spatial multiplexing
For$1 \leq N_{\text{PRB}} \leq \text{55}$, the TBS is given by the
($I_{\text{TBS}}$,$2 \cdot N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1.
For$\text{56} \leq N_{\text{PRB}} \leq \text{110}$, a baseline TBS_L1 is taken
from the ($I_{\text{TBS}}$,$N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1, which
is then translated into TBS_L2 using the mapping rule shown in Table
7.1.7.2.2-1. The TBS is given by TBS_L2.
Table 7.1.7.2.2-1: One-layer to two-layer TBS translation table
* * *
TBS_L1 TBS_L2 TBS_L1 TBS_L2 TBS_L1 TBS_L2 TBS_L1 TBS_L2 1544 3112 3752 7480
10296 20616 28336 57336 1608 3240 3880 7736 10680 21384 29296 59256 1672 3368
4008 7992 11064 22152 30576 61664 1736 3496 4136 8248 11448 22920 31704 63776
1800 3624 4264 8504 11832 23688 32856 66592 1864 3752 4392 8760 12216 24496
34008 68808 1928 3880 4584 9144 12576 25456 35160 71112 1992 4008 4776 9528
12960 25456 36696 73712 2024 4008 4968 9912 13536 27376 37888 76208 2088 4136
5160 10296 14112 28336 39232 78704 2152 4264 5352 10680 14688 29296 40576
81176 2216 4392 5544 11064 15264 30576 42368 84760 2280 4584 5736 11448 15840
31704 43816 87936 2344 4776 5992 11832 16416 32856 45352 90816 2408 4776 6200
12576 16992 34008 46888 93800 2472 4968 6456 12960 17568 35160 48936 97896
2536 5160 6712 13536 18336 36696 51024 101840 2600 5160 6968 14112 19080 37888
52752 105528 2664 5352 7224 14688 19848 39232 55056 110136 2728 5544 7480
14688 20616 40576 57336 115040 2792 5544 7736 15264 21384 42368 59256 119816
2856 5736 7992 15840 22152 43816 61664 124464 2984 5992 8248 16416 22920 45352
63776 128496 3112 6200 8504 16992 23688 46888 66592 133208 3240 6456 8760
17568 24496 48936 68808 137792 3368 6712 9144 18336 25456 51024 71112 142248
3496 6968 9528 19080 26416 52752 73712 146856 3624 7224 9912 19848 27376 55056
75376 149776
* * *
##### 7.1.7.2.3 Transport blocks mapped for DCI Format 1C
The TBS is given by the$I_{\text{TBS}}$entry of Table 7.1.7.2.3-1.
Table 7.1.7.2.3-1: Transport Block Size Table for DCI format 1C
* * *
        0     1     2     3     4     5     6     7      8      9      10     11     12     13     14     15
TBS 40 56 72 120 136 144 176 208 224 256 280 296 328 336 392 488 16 17 18 19
20 21 22 23 24 25 26 27 28 29 30 31 TBS 552 600 632 696 776 840 904 1000 1064
1128 1224 1288 1384 1480 1608 1736
* * *
##### 7.1.7.2.4 Transport blocks mapped to three-layer spatial multiplexing
For $1 \leq N_{\text{PRB}} \leq \text{36}$, the TBS is given by the
($I_{\text{TBS}}$,$3 \cdot N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1.
For $\text{37} \leq N_{\text{PRB}} \leq \text{110}$, a baseline TBS_L1 is
taken from the ($I_{\text{TBS}}$,$N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1,
which is then translated into TBS_L3 using the mapping rule shown in Table
7.1.7.2.4-1. The TBS is given by TBS_L3.
Table 7.1.7.2.4-1: One-layer to three-layer TBS translation table
* * *
TBS_L1 TBS_L3 TBS_L1 TBS_L3 TBS_L1 TBS_L3 TBS_L1 TBS_L3 1032 3112 2664 7992
8248 24496 26416 78704 1064 3240 2728 8248 8504 25456 27376 81176 1096 3240
2792 8248 8760 26416 28336 84760 1128 3368 2856 8504 9144 27376 29296 87936
1160 3496 2984 8760 9528 28336 30576 90816 1192 3624 3112 9144 9912 29296
31704 93800 1224 3624 3240 9528 10296 30576 32856 97896 1256 3752 3368 9912
10680 31704 34008 101840 1288 3880 3496 10296 11064 32856 35160 105528 1320
4008 3624 10680 11448 34008 36696 110136 1352 4008 3752 11064 11832 35160
37888 115040 1384 4136 3880 11448 12216 36696 39232 119816 1416 4264 4008
11832 12576 37888 40576 119816 1480 4392 4136 12576 12960 39232 42368 128496
1544 4584 4264 12960 13536 40576 43816 133208 1608 4776 4392 12960 14112 42368
45352 137792 1672 4968 4584 13536 14688 43816 46888 142248 1736 5160 4776
14112 15264 45352 48936 146856 1800 5352 4968 14688 15840 46888 51024 152976
1864 5544 5160 15264 16416 48936 52752 157432 1928 5736 5352 15840 16992 51024
55056 165216 1992 5992 5544 16416 17568 52752 57336 171888 2024 5992 5736
16992 18336 55056 59256 177816 2088 6200 5992 18336 19080 57336 61664 185728
2152 6456 6200 18336 19848 59256 63776 191720 2216 6712 6456 19080 20616 61664
66592 199824 2280 6712 6712 19848 21384 63776 68808 205880 2344 6968 6968
20616 22152 66592 71112 214176 2408 7224 7224 21384 22920 68808 73712 221680
2472 7480 7480 22152 23688 71112 75376 226416 2536 7480 7736 22920 24496 73712  
2600 7736 7992 23688 25456 76208
* * *
##### 7.1.7.2.5 Transport blocks mapped to four-layer spatial multiplexing
For $1 \leq N_{\text{PRB}} \leq \text{27}$, the TBS is given by the
($I_{\text{TBS}}$,$4 \cdot N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1.
For $\text{28} \leq N_{\text{PRB}} \leq \text{110}$, a baseline TBS_L1 is
taken from the ($I_{\text{TBS}}$,$N_{\text{PRB}}$) entry of Table 7.1.7.2.1-1,
which is then translated into TBS_L4 using the mapping rule shown in Table
7.1.7.2.5-1. The TBS is given by TBS_L4.
Table 7.1.7.2.5-1: One-layer to four-layer TBS translation table
* * *
TBS_L1 TBS_L4 TBS_L1 TBS_L4 TBS_L1 TBS_L4 TBS_L1 TBS_L4 776 3112 2280 9144
7224 29296 24496 97896 808 3240 2344 9528 7480 29296 25456 101840 840 3368
2408 9528 7736 30576 26416 105528 872 3496 2472 9912 7992 31704 27376 110136
904 3624 2536 10296 8248 32856 28336 115040 936 3752 2600 10296 8504 34008
29296 115040 968 3880 2664 10680 8760 35160 30576 124464 1000 4008 2728 11064
9144 36696 31704 128496 1032 4136 2792 11064 9528 37888 32856 133208 1064 4264
2856 11448 9912 39232 34008 137792 1096 4392 2984 11832 10296 40576 35160
142248 1128 4584 3112 12576 10680 42368 36696 146856 1160 4584 3240 12960
11064 43816 37888 151376 1192 4776 3368 13536 11448 45352 39232 157432 1224
4968 3496 14112 11832 46888 40576 161760 1256 4968 3624 14688 12216 48936
42368 169544 1288 5160 3752 15264 12576 51024 43816 175600 1320 5352 3880
15264 12960 51024 45352 181656 1352 5352 4008 15840 13536 55056 46888 187712
1384 5544 4136 16416 14112 57336 48936 195816 1416 5736 4264 16992 14688 59256
51024 203704 1480 5992 4392 17568 15264 61664 52752 211936 1544 6200 4584
18336 15840 63776 55056 220296 1608 6456 4776 19080 16416 66592 57336 230104
1672 6712 4968 19848 16992 68808 59256 236160 1736 6968 5160 20616 17568 71112
61664 245648 1800 7224 5352 21384 18336 73712 63776 254328 1864 7480 5544
22152 19080 76208 66592 266440 1928 7736 5736 22920 19848 78704 68808 275376
1992 7992 5992 23688 20616 81176 71112 284608 2024 7992 6200 24496 21384 84760
73712 293736 2088 8248 6456 25456 22152 87936 75376 299856 2152 8504 6712
26416 22920 90816  
2216 8760 6968 28336 23688 93800
* * *
#### 7.1.7.3 Redundancy Version determination for Format 1C
If the DCI Format 1C CRC is scrambled by P-RNTI or RA-RNTI, then
  * the UE shall set the Redundancy Version to 0
Else if the DCI Format 1C CRC is scrambled by SI-RNTI, then
  * the UE shall set the Redundancy Version as defined in [8].
### 7.1.8 Storing soft channel bits
Both for FDD and TDD, if the UE is configured with more than one serving cell,
then for each serving cell, for at least $K_{\text{MIMO}} \cdot
\text{min}\left( M_{\text{DL_HARQ}},\ M_{\text{limit}} \right)$ transport
blocks, upon decoding failure of a code block of a transport block, the UE
shall store received soft channel bits corresponding to a range of at least
$w_{k}$$w_{k + 1}$,...,$w_{\text{mod}(k + n_{\text{SB}} - 1,N_{\text{cb}})}$,
where:
$n_{\text{SB}} = \text{min}\left( N_{\text{cb}},\left\lfloor
\frac{N_{\text{soft}}^{'}}{C \cdot N_{\text{cells}}^{\text{DL}} \cdot
K_{\text{MIMO}} \cdot \text{min}\left( M_{\text{DL_HARQ}},\ M_{\text{limit}}
\right)} \right\rfloor \right)$,
$w_{k}$, _C_ , $N_{\text{cb}}$, $K_{\text{MIMO}}$, ,and $M_{\text{limit}}$ are
defined in subclause 5.1.4.1.2 of [4].
_M_ ~DL_HARQ~ is the maximum number of DL HARQ processes.
$N_{\text{cells}}^{\text{DL}}$is the number of configured serving cells.
If the UE signals _ue-Category-v1020_ , $N_{\text{soft}}^{'}$ is the total
number of soft channel bits [12] according to the UE category indicated by
_ue-Category-v1020_ [11]. Otherwise, $N_{\text{soft}}^{'}$ is the total number
of soft channel bits [12] according to the UE category indicated by _ue-
Category_[11].
In determining _k_ , the UE should give priority to storing soft channel bits
corresponding to lower values of _k_. $w_{k}$ shall correspond to a received
soft channel bit. The range $w_{k}$$w_{k + 1}$,...,$w_{\text{mod}(k +
n_{\text{SB}} - 1,N_{\text{cb}})}$may include subsets not containing received
soft channel bits.
## 7.2 UE procedure for reporting Channel State Information (CSI)
The time and frequency resources that can be used by the UE to report CSI
which consists of channel quality indicator (CQI), precoding matrix indicator
(PMI), precoding type indicator (PTI), and/or rank indication (RI) are
controlled by the eNB. For spatial multiplexing, as given in [3], the UE shall
determine a RI corresponding to the number of useful transmission layers. For
transmit diversity as given in [3], RI is equal to one.
A UE in transmission mode 8 or 9 is configured with or without PMI/RI
reporting by the higher layer parameter _pmi-RI-Report_.
A UE is configured with resource-restricted CSI measurements if the subframe
sets $C_{\text{CSI,0}}$ and $C_{\text{CSI,1}}$ are configured by higher
layers.
CSI reporting is periodic or aperiodic.
If the UE is configured with more than one serving cell, it transmits CSI for
activated serving cell(s) only.
If a UE is not configured for simultaneous PUSCH and PUCCH transmission, it
shall transmit periodic CSI reporting on PUCCH as defined hereafter in
subframes with no PUSCH allocation.
If a UE is not configured for simultaneous PUSCH and PUCCH transmission, it
shall transmit periodic CSI reporting on PUSCH of the serving cell with
smallest _ServCellIndex_ as defined hereafter in subframes with a PUSCH
allocation, where the UE shall use the same PUCCH-based periodic CSI reporting
format on PUSCH.
A UE shall transmit aperiodic CSI reporting on PUSCH if the conditions
specified hereafter are met. For aperiodic CQI/PMI reporting, RI reporting is
transmitted only if the configured CSI feedback type supports RI reporting.
The CSI transmissions on PUCCH and PUSCH for various scheduling modes are
summarized in the following table:
Table 7.2-1: Physical Channels for Aperiodic or Periodic CSI reporting
* * *
Scheduling Mode Periodic CSI reporting channels Aperiodic CSI reporting
channel Frequency non-selective PUCCH  
Frequency selective PUCCH PUSCH
* * *
In case both periodic and aperiodic CSI reporting would occur in the same
subframe, the UE shall only transmit the aperiodic CSI report in that
subframe.
When reporting RI the UE reports a single instance of the number of useful
transmission layers. For each RI reporting interval when the UE is configured
in transmission modes 4 or when the UE is configured in transmission mode 8 or
9 with PMI/RI reporting, a UE shall determine a RI from the supported set of
RI values as defined in subclause 5.2.2.6 of [4] and report the number in each
RI report. For each RI reporting interval when the UE is configured in
transmission mode 3, a UE shall determine RI as defined in subclause 5.2.2.6
of [4] in each reporting interval and report the detected number in each RI
report to support selection between transmit diversity and large delay CDD.
When reporting PMI the UE reports either a single or a multiple PMI report.
The number of RBs represented by a single UE PMI report can be
$N_{\text{RB}}^{\text{DL}}$ or a smaller subset of RBs. The number of RBs
represented by a single PMI report is semi-statically configured by higher
layer signalling. A UE is restricted to report PMI, RI and PTI within a
precoder codebook subset specified by a bitmap parameter
_codebookSubsetRestriction_ configured by higher layer signalling. For a
specific precoder codebook and associated transmission mode, the bitmap can
specify all possible precoder codebook subsets from which the UE can assume
the eNB may be using when the UE is configured in the relevant transmission
mode. Codebook subset restriction is supported for transmission modes 3, 4, 5,
6 and for transmission modes 8 and 9 with PMI/RI reporting. The resulting
number of bits for each transmission mode is given in Table 7.2-1b. The bitmap
forms the bit sequence $a_{A_{c} -
1},\text{.}\text{.}\text{.},a_{3},a_{2},a_{1},a_{0}$where $a_{0}$ is the LSB
and $a_{A_{c} - 1}$is the MSB and where a bit value of zero indicates that the
PMI and RI reporting is not allowed to correspond to precoder(s) associated
with the bit. The association of bits to precoders for the relevant
transmission modes are given as follows:
  1. Transmission mode 3
a. 2 antenna ports: bit $a_{\upsilon - 1},\ \upsilon = 2$is associated with
the precoder in Table 6.3.4.2.3-1 of [3] corresponding to $\upsilon$ layers
and codebook index 0 while bit $a_{0}$ is associated with the precoder for 2
antenna ports in subclause 6.3.4.3 of [3].
b. 4 antenna ports: bit $a_{\upsilon - 1},\ \upsilon = 2,3,4$is associated
with the precoders in Table 6.3.4.2.3-2 of [3] corresponding to $\upsilon$
layers and codebook indices 12, 13, 14, and 15 while bit $a_{0}$ is associated
with the precoder for 4 antenna ports in subclause 6.3.4.3 of [3].
  2. Transmission mode 4
a. 2 antenna ports: see Table 7.2-1c
b. 4 antenna ports: bit $a_{\text{16}(\upsilon - 1) + i_{c}}$ is associated
with the precoder for $\upsilon$ layers and with codebook index $i_{c}$in
Table 6.3.4.2.3-2 of [3].
  3. Transmission modes 5 and 6
a. 2 antenna ports: bit $a_{i_{c}}$ is associated with the precoder for
$\upsilon = 1$ layer with codebook index $i_{c}$in Table 6.3.4.2.3-1 of [3].
b. 4 antenna ports: bit $a_{i_{c}}$ is associated with the precoder for
$\upsilon = 1$ layer with codebook index $i_{c}$in Table 6.3.4.2.3-2 of [3].
  4. Transmission mode 8
a. 2 antenna ports: see Table 7.2-1c
b. 4 antenna ports: bit $a_{\text{16}(\upsilon - 1) + i_{c}}$ is associated
with the precoder for $\upsilon$ layers and with codebook index $i_{c}$in
Table 6.3.4.2.3-2 of [3], $\upsilon = 1,2$.
  5. Transmission mode 9
a. 2 antenna ports: see Table 7.2-1c
b. 4 antenna ports: bit $a_{\text{16}(\upsilon - 1) + i_{c}}$ is associated
with the precoder for $\upsilon$ layers and with codebook index $i_{c}$in
Table 6.3.4.2.3-2 of [3].
c. 8 antenna ports: bit $a_{f1(\upsilon - 1) + i_{1}}$is associated with the
precoder for $\upsilon$ layers ($\upsilon \in \left{ 1,2,3,4,5,6,7,8 \right}$)
and codebook index $i_{1}$ where$f1( \cdot ) = \left{ \
0,\text{16},\text{32},\text{36},\text{40},\text{44},\text{48},\text{52}\
\right}$ and bit $a_{\text{53} + g1(\upsilon - 1) + i_{2}}$is associated with
the precoder for $\upsilon$ layers ($\upsilon \in \left{ 1,2,3,4 \right}$) and
codebook index $i_{2}$ where $g1( \cdot ) = \left{ \
0,\text{16},\text{32},\text{48}\ \right}$. Codebook indices $i_{1}$ and
$i_{2}$ are given in Table 7.2.4-1, 7.2.4-2, 7.2.4-3, 7.2.4-4, 7.2.4-5,
7.2.4-6, 7.2.4-7, or 7.2.4-8, for $\upsilon$=1,2,3,4,5,6,7, or 8 respectively.
Table 7.2-1b: Number of bits in codebook subset restriction bitmap for
applicable transmission modes.
* * *
                        Number of bits $A_{c}$                     
                        2 antenna ports          4 antenna ports   8 antenna ports
Transmission mode 3 2 4  
Transmission mode 4 6 64  
Transmission mode 5 4 16  
Transmission mode 6 4 16  
Transmission mode 8 6 32  
Transmission mode 9 6 64 109
* * *
Table 7.2-1c: Association of bits in _codebookSubSetRestriction_ bitmap to
precoders in the 2 antenna port codebook of Table 6.3.4.2.3-1 in [3].
* * *
Codebook index $i_{c}$ Number of layers $\upsilon$  
1 2 0 _a_ ~0~ - 1 _a_ ~1~ _a~4~_ 2 _a_ ~2~ _a~5~_ 3 _a_ ~3~ -
* * *
The set of subbands (_S_) a UE shall evaluate for CQI reporting spans the
entire downlink system bandwidth. _A subband is a set of k contiguous PRBs
where k is a function of system bandwidth. Note the last subband in set S may
have fewer than k contiguous PRBs depending on_ $N_{\text{RB}}^{\text{DL}}$ _.
The number of subbands for system bandwidth given by_
$N_{\text{RB}}^{\text{DL}}$ _is defined by_ $N = \left\lceil
\frac{N_{\text{RB}}^{\text{DL}}}{k} \right\rceil$. The subbands shall be
indexed in the order of increasing frequency and non-increasing sizes starting
at the lowest frequency _._
  * _For transmission modes 1, 2, 3 and 5, as well as transmission modes 8 and 9 without PMI/RI reporting, transmission mode 4 with RI=1, and transmission modes 8 and 9 with PMI/RI reporting and RI=1, a single 4-bit wideband CQI is reported according to Table 7.2.3-1._
  * _For transmission modes 3 and 4, as well as transmission modes 8 and 9 with PMI/RI reporting, CQI is calculated assuming transmission of one codeword for RI=1 and two codewords for RI > 1._
  * _For RI > 1 with transmission mode 4, as well as transmission modes 8 and 9 with PMI/RI reporting, PUSCH based triggered reporting includes reporting a wideband CQI which comprises:_
    * _A 4-bit wideband CQI for codeword 0 according to Table 7.2.3-1_
    * _A 4-bit wideband CQI for codeword 1 according to Table 7.2.3-1_
```{=html}
``` \- _For RI > 1 with transmission mode 4, as well as transmission modes 8
and 9 with PMI/RI reporting, PUCCH based reporting includes reporting a 4-bit
wideband CQI for codeword 0 according to Table 7.2.3-1 and a wideband spatial
differential CQI. The wideband spatial differential CQI value comprises:_
    -   *A 3-bit wideband spatial differential CQI value for codeword 1
        offset level*
        -   *Codeword 1 offset level = wideband CQI index for codeword 0
            -- wideband CQI index for codeword 1.*
    -   *The mapping from the 3-bit wideband spatial differential CQI
        value to the offset level is shown in Table 7.2-2.*
Table 7.2-2 Mapping spatial differential CQI value to offset level
* * *
Spatial differential CQI value Offset level 0 0 1 1 2 2 3 ≥3 4 ≤-4 5 -3 6 -2 7
-1
* * *
### 7.2.1 Aperiodic CSI Reporting using PUSCH
A UE shall perform aperiodic CSI reporting using the PUSCH in subframe _n+k_
on serving cell $c$, upon decoding in subframe _n_ either:
  * an uplink DCI format, or
  * a Random Access Response Grant,
for serving cell $c$ if the respective CSI request field is set to trigger a
report and is not reserved. If the CSI request field is 1 bit [4], a report is
triggered for serving cell $c$ if the CSI request field is set to '1'. If the
CSI request field size is 2 bits [4], a report is triggered according to the
value in Table 7.2.1-1A corresponding to aperiodic CSI reporting.
A UE is not expected to receive more than one aperiodic CSI report request for
a given subframe.
Table 7.2.1-1A: CSI Request field for PDCCH with uplink DCI format in UE
specific search space
* * *
Value of CSI request field Description '00' No aperiodic CSI report is
triggered '01' Aperiodic CSI report is triggered for serving cell $c$ '10'
Aperiodic CSI report is triggered for a 1^st^ set of serving cells configured
by higher layers '11' Aperiodic CSI report is triggered for a 2^nd^ set of
serving cells configured by higher layers
* * *
Note: PDCCH with DCI formats used to grant PUSCH transmissions as given by DCI
format 0 and DCI format 4 are herein referred to as uplink DCI format when
common behaviour is addressed.
When the CSI request field from an uplink DCI format is set to trigger a
report, for FDD _k=4_ , and for TDD UL/DL configuration 1-6, _k_ is given in
Table 8-2. For TDD UL/DL configuration 0, if the MSB of the UL index is set to
1 and LSB of the UL index is set to 0, _k_ is given in Table 8-2; or if MSB of
the UL index is set to 0 and LSB of the UL index is set to 1, _k_ is equal to
7; or if both MSB and LSB of the UL index is set to 1, _k_ is given in Table
8-2.
When the CSI request field from a Random Access Response Grant is set to
trigger a report and is not reserved, _k_ is equal to $k_{1}$ if the UL delay
field in subclause 6.2 is set to zero, where $k_{1}$ is given in subclause
6.1.1. The UE shall postpone aperiodic CSI reporting to the next available UL
subframe if the UL delay field is set to 1.
The minimum reporting interval for aperiodic reporting of CQI and PMI and RI
is 1 subframe. _The subband size for CQI shall be the same for transmitter-
receiver configurations with and without precoding._
_If a UE is not configured for simultaneous PUSCH and PUCCH transmission, when
aperiodic CSI report with no transport block associated as defined in
subclause 8.6.2 and positive SR is transmitted in the same subframe, the UE
shall transmit SR, and, if applicable, HARQ-ACK, on PUCCH resources as
described in subclause 10.1_
A UE is semi-statically configured by higher layers to feed back CQI and PMI
and corresponding RI on the same PUSCH using one of the following CSI
reporting modes given in Table 7.2.1-1 and described below.
Table 7.2.1-1: CQI and PMI Feedback Types for PUSCH CSI reporting Modes
* * *
                                                              PMI Feedback Type                
                                                              **No PMI**          Single PMI   Multiple PMI
**PUSCH CQI Feedback Type**  
**Wideband** Mode 1-2 **(wideband CQI)**
                                **UE Selected**               Mode 2-0                         Mode 2-2
                                **(subband CQI)**
                                **Higher Layer-configured**   Mode 3-0            Mode 3-1     
                                **(subband CQI)**
* * *
For each of the transmission modes defined in subclause 7.1, the following
reporting modes are supported on PUSCH:
> Transmission mode 1 : Modes 2-0, 3-0
>
> Transmission mode 2 : Modes 2-0, 3-0
>
> Transmission mode 3 : Modes 2-0, 3-0
>
> Transmission mode 4 : Modes 1-2, 2-2, 3-1
>
> Transmission mode 5 : Mode 3-1
>
> Transmission mode 6 : Modes 1-2, 2-2, 3-1
>
> Transmission mode 7 : Modes 2-0, 3-0
>
> Transmission mode 8 : Modes 1-2, 2-2, 3-1 if the UE is configured with
> PMI/RI reporting; modes 2-0, 3-0 if the UE is configured without PMI/RI
> reporting
>
> Transmission mode 9 : Modes 1-2, 2-2, 3-1 if the UE is configured with
> PMI/RI reporting and number of CSI-RS ports > 1; modes 2-0, 3-0 if the UE is
> configured without PMI/RI reporting or number of CSI-RS ports=1
The aperiodic CSI reporting mode is given by the parameter _cqi-
ReportModeAperiodic_ which is configured by higher-layer signalling.
For a serving cell with $N_{\text{RB}}^{\text{DL}} \leq 7$, PUSCH reporting
modes are not supported for that serving cell.
RI is only reported for transmission modes 3 and 4, _as well as transmission
modes_ 8 and 9 with PMI/RI reporting.
A RI report for a serving cell on an aperiodic reporting mode is valid only
for CQI/PMI report for that serving cell on that aperiodic reporting mode
  * Wideband feedback
    * Mode 1-2 description:
      * For each subband a preferred precoding matrix is selected from the codebook subset assuming transmission only in the subband
      * A UE shall report one wideband CQI value per codeword which is calculated assuming the use of the corresponding selected precoding matrix in each subband and transmission on set _S_ subbands.
      * The UE shall report the selected precoding matrix indicator for each set _S_ subband except for transmission mode 9 with 8 CSI-RS ports configured in which case a first precoding matrix indicator $i_{1}$is reported for the set _S_ subbands and a second precoding matrix indicator $i_{2}$ is reported for each set _S_ subband.
      * Subband size is given by Table 7.2.1-3.
      * For transmission modes 4, 8 and 9, the reported PMI and CQI values are calculated conditioned on the reported RI. For other transmission modes they are reported conditioned on rank 1.
  * Higher Layer-configured subband feedback
    * Mode 3-0 description:
      * A UE shall report a wideband CQI value which is calculated > assuming transmission on set _S_ subbands
      * The UE shall also report one subband CQI value for each set > _S_ subband. The subband CQI value is calculated assuming > transmission only in the subband
      * Both the wideband and subband CQI represent channel quality > for the first codeword, even when RI>1 _._
      * For transmission mode 3 the reported CQI values are > calculated conditioned on the reported RI. For other > transmission modes they are reported conditioned on > rank 1.
    * Mode 3-1 description:
      * A single precoding matrix is selected from the codebook > subset assuming transmission on set S subbands
      * A UE shall report one subband CQI value per codeword for > each set _S_ subband which are calculated assuming the use > of the single precoding matrix in all subbands and > assuming transmission in the corresponding subband.
      * A UE shall report a wideband CQI value per codeword which is > calculated assuming the use of the single precoding matrix > in all subbands and transmission on set _S_ subbands
      * The UE shall report the selected single precoding matrix > indicator except for transmission mode 9 with 8 CSI-RS > ports configured in which case a first and second > precoding matrix indicator are reported corresponding to > the selected single precoding matrix.
      * For transmission modes 4, 8 and 9, the reported PMI and CQI > values are calculated conditioned on the reported RI. For > other transmission modes they are reported conditioned on > rank 1.
    * Subband CQI value for each codeword are encoded differentially > with respect to their respective wideband CQI using 2-bits as > defined by
      * Subband differential CQI offset level = subband CQI index -- > wideband CQI index. _The mapping from the 2-bit subband > differential CQI value to the offset level is shown in > Table 7.2.1-2._
Table 7.2.1-2: Mapping subband differential CQI value to offset level
* * *
Subband differential CQI value Offset level 0 0 1 1 2 ≥2 3 ≤-1
* * *
  * Supported subband size (_k_) is given in Table 7.2.1-3.
Table 7.2.1-3: Subband Size (_k_) vs. System Bandwidth
* * *
System Bandwidth Subband Size (_k_) 6 - 7 NA 8 - 10 4 11 - 26 4 27 - 63 6 64 -
110 8
* * *
  * UE-selected subband feedback
    * Mode 2-0 description:
      * The UE shall select a set of _M_ preferred subbands of size > _k_ (where _k_ and _M_ are given in Table 7.2.1-5 for each > system bandwidth range) within the set of subbands _S_.
      * The UE shall also report one CQI value reflecting > transmission only over the _M_ selected subbands > determined in the previous step. The CQI represents > channel quality for the first codeword, even when RI>1.
      * Additionally, the UE shall also report one wideband CQI > value which is calculated assuming transmission on set _S_ > subbands. The wideband CQI represents channel quality for > the first codeword, even when RI>1.
      * For transmission mode 3 the reported CQI values are > calculated conditioned on the reported RI. For other > transmission modes they are reported conditioned on > rank 1.
    * Mode 2-2 description:
      * The UE shall perform joint selection of the set of _M_ > preferred subbands of size _k_ within the set of subbands > _S_ and a preferred single precoding matrix selected from > the codebook subset that is preferred to be used for > transmission over the _M_ selected subbands.
      * The UE shall report one CQI value per codeword reflecting > transmission only over the selected _M_ preferred subbands > and using the same selected single precoding matrix in > each of the _M_ subbands.
      * Except for transmission mode 9 with 8 CSI-RS ports > configured, the UE shall also report the selected single > precoding matrix indicator preferred for the M selected > subbands. A UE shall also report the selected single > precoding matrix indicator for all set _S_ subbands.
      * For transmission mode 9 with 8 CSI-RS ports configured, a UE > shall report a first precoding matrix indicator for all > set _S_ subbands. A UE shall also report a second > precoding matrix indicator for all set _S_ subbands and > another second precoding matrix indicator for the M > selected subbands.
      * A single precoding matrix is selected from the codebook > subset assuming transmission on set S subbands
      * A UE shall report a wideband CQI value per codeword which is > calculated assuming the use of the single precoding matrix > in all subbands and transmission on set _S_ subbands
      * For transmission modes 4, 8 and 9, the reported PMI and CQI > values are calculated conditioned on the reported RI. For > other transmission modes they are reported conditioned on > rank 1.
    * For all UE-selected subband feedback modes the UE shall report > the positions of the _M_ selected subbands using a > combinatorial index _r_ defined as
      *       * where the set , () contains the _M_ sorted subband indices and $\left\langle \begin{matrix} x \ y \ \end{matrix} \right\rangle = \left{ \begin{matrix} \begin{pmatrix} x \ y \ \end{pmatrix} & x \geq y \ 0 & x  encoded differentially using 2-bits relative to its respective > wideband CQI as defined by
      * Differential CQI offset level = _M_ selected subbands CQI index -- wideband CQI index
      * _The mapping from the 2-bit differential CQI value to the offset level is shown in Table 7.2.1-4._
Table 7.2.1-4: Mapping differential CQI value to offset level
* * *
Differential CQI value Offset level 0 ≤1 1 2 2 3 3 ≥4
* * *
  * Supported subband size _k_ and _M_ values include those shown in > Table 7.2.1-5. In Table 7.2.1-5 the _k_ and _M_ values are a > function of system bandwidth.
  * The number of bits to denote the position of the _M_ selected > subbands is $L = \left\lceil \text{log}_{2}\begin{pmatrix} > N \ > M \ > \end{pmatrix} \right\rceil$.
Table 7.2.1-5: Subband Size (_k_) and Number of Subbands (_M_) in S vs.
Downlink System Bandwidth
* * *
System Bandwidth Subband Size _k_ (RBs) _M_
6 -- 7 NA NA 8 -- 10 2 1 11 -- 26 2 3 27 -- 63 3 5 64 -- 110 4 6
* * *
### 7.2.2 Periodic CSI Reporting using PUCCH
A UE is semi-statically configured by higher layers to periodically feed back
different CSI (CQI, PMI, PTI, and/or RI) on the PUCCH using the reporting
modes given in Table 7.2.2-1 and described below.
Table 7.2.2-1: CQI and PMI Feedback Types for PUCCH CSI reporting Modes
* * *
                                             PMI Feedback Type   
                                             No PMI              Single PMI
PUCCH CQI Feedback Type  
Wideband Mode 1-0 Mode 1-1 (wideband CQI)
                            UE Selected      Mode 2-0            Mode 2-1
                            (subband CQI)
* * *
For each of the transmission modes defined in subclause 7.1, the following
periodic CSI reporting modes are supported on PUCCH:
> Transmission mode 1 : Modes 1-0, 2-0
>
> Transmission mode 2 : Modes 1-0, 2-0
>
> Transmission mode 3 : Modes 1-0, 2-0
>
> Transmission mode 4 : Modes 1-1, 2-1
>
> Transmission mode 5 : Modes 1-1, 2-1
>
> Transmission mode 6 : Modes 1-1, 2-1
>
> Transmission mode 7 : Modes 1-0, 2-0
>
> Transmission mode 8 : Modes 1-1, 2-1 if the UE is configured with PMI/RI
> reporting; modes 1-0, 2-0 if the UE is configured without PMI/RI reporting
>
> Transmission mode 9 : Modes 1-1, 2-1 if the UE is configured with PMI/RI
> reporting and number of CSI-RS ports>1; modes 1-0, 2-0 if the UE is
> configured without PMI/RI reporting or number of CSI-RS ports=1.
The periodic CSI reporting mode for each serving cell is configured by higher-
layer signalling. For a UE configured with transmission mode 9 and with 8 CSI-
RS ports, mode 1-1 is configured to be either submode 1 or submode 2 via
higher-layer signaling using the parameter
_PUCCH_format1-1_CSI_reporting_mode._
For the UE-selected subband CQI, a CQI report in a certain subframe of a
certain serving cell describes the channel quality in a particular part or in
particular parts of the bandwidth of that serving cell described subsequently
as bandwidth part (BP) or parts. The bandwidth parts shall be indexed in the
order of increasing frequency and non-increasing sizes starting at the lowest
frequency.
For each serving cell
  * There are a total of _N_ subbands for a serving cell system bandwidth given by$N_{\text{RB}}^{\text{DL}}$ where$\left\lfloor \frac{N_{\text{RB}}^{\text{DL}}}{k} \right\rfloor$subbands are of size _k._ If $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{k} \right\rceil - \left\lfloor \frac{N_{\text{RB}}^{\text{DL}}}{k} \right\rfloor > 0$ then one of the subbands is of size$N_{\text{RB}}^{\text{DL}} - k \cdot \left\lfloor \frac{N_{\text{RB}}^{\text{DL}}}{k} \right\rfloor$.
  * A bandwidth part _j_ is frequency-consecutive and consists of $N_{j}$subbands where _J_ bandwidth parts span _S_ or $N_{\text{RB}}^{\text{DL}}$ as given in Table 7.2.2-2. If then $N_{j}$ is$\left\lceil \frac{\frac{N_{\text{RB}}^{\text{DL}}}{k}}{J} \right\rceil$. If _J >1_ then $N_{j}$ is either $\left\lceil \frac{\frac{N_{\text{RB}}^{\text{DL}}}{k}}{J} \right\rceil$ or $\left\lceil \frac{\frac{N_{\text{RB}}^{\text{DL}}}{k}}{J} \right\rceil - 1$, depending on$N_{\text{RB}}^{\text{DL}}$, _k_ and _J_.
  * Each bandwidth part _j_ , where 0 ≤ _j_ ≤ _J_ -1, is scanned in sequential order according to increasing frequency.
  * For UE selected subband feedback a single subband out of $N_{j}$ subbands of a bandwidth part is selected along with a corresponding _L_ -bit label indexed in the order of increasing frequency, where.
The CQI and PMI payload sizes of each PUCCH CSI reporting mode are given in
Table 7.2.2-3.
The following CQI/PMI and RI reporting types with distinct periods and offsets
are supported for the PUCCH CSI reporting modes given in Table 7.2.2-3:
  * Type 1 report supports CQI feedback for the UE selected sub-bands
  * Type 1a report supports subband CQI and second PMI feedback
  * Type 2, Type 2b, and Type 2c report supports wideband CQI and PMI feedback
  * Type 2a report supports wideband PMI feedback
  * Type 3 report supports RI feedback
  * Type 4 report supports wideband CQI
  * Type 5 report supports RI and wideband PMI feedback
  * Type 6 report supports RI and PTI feedback
For each serving cell, the periodicity $N_{\text{pd}}$ (in subframes) and
offset (in subframes) for CQI/PMI reporting are determined based on the
parameter _cqi-pmi-ConfigIndex_ () given in Table 7.2.2-1A for FDD and Table
7.2.2-1C for TDD. The periodicity and relative offset for RI reporting are
determined based on the parameter _ri-ConfigIndex_ () given in Table 7.2.2-1B.
Both _cqi-pmi-ConfigIndex_ and _ri-ConfigIndex_ are configured by higher layer
signalling. The relative reporting offset for RI takes values from the set
$\left{ 0, - 1,\text{.}\text{.}\text{.}, - (N_{\text{pd}} - 1) \right}$. If a
UE is configured to report for more than one CSI subframe set then parameter
_cqi-pmi-ConfigIndex_ and _ri-ConfigIndex_ respectively correspond to the
CQI/PMI and RI periodicity and relative reporting offset for subframe set 1
and _cqi-pmi-ConfigIndex2_ and _ri-ConfigIndex_ 2 respectively correspond to
the CQI/PMI and RI periodicity and relative reporting offset for subframe set
2.
In the case where wideband CQI/PMI reporting is configured:
  * The reporting instances for wideband CQI/PMI are subframes satisfying $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} \right)\text{mod}\left( N_{\text{pd}} \right) = 0$_._
  * In case RI reporting is configured, the reporting interval of the RI reporting is an integer multiple of period $N_{\text{pd}}$ (in subframes).
    * The reporting instances for RI are subframes satisfying $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} - N_{\text{OFFSET},\text{RI}} \right)\text{mod}\left( N_{\text{pd}} \cdot M_{\text{RI}} \right) = 0$.
In the case where both wideband CQI/PMI and subband CQI reporting are
configured:
  * The reporting instances for wideband CQI/PMI and subband CQI are > subframes satisfying > $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} \right)\text{mod}N_{\text{pd}} = 0$.
    * When PTI is not transmitted (due to not being configured) or the most recently transmitted PTI was equal to 1:
      * The wideband CQI/ wideband PMI (or wideband CQI/wideband second PMI for transmission mode 9) report has period $H \cdot N_{\text{pd}}$, and is reported on the subframes satisfying $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} \right)\text{mod}\left( H \cdot N_{\text{pd}} \right) = 0$. The integer is defined as , where is the number of bandwidth parts.
      * Between every two consecutive wideband CQI/ wideband PMI (or wideband CQI/wideband second PMI for transmission mode 9) reports, the remaining reporting instances are used in sequence for subband CQI reports on full cycles of bandwidth parts except when the gap between two consecutive wideband CQI/PMI reports contains less than reporting instances due to a system frame number transition to 0, in which case the UE shall not transmit the remainder of the subband CQI reports which have not been transmitted before the second of the two wideband CQI/ wideband PMI (or wideband CQI/wideband second PMI for transmission mode 9) reports. Each full cycle of bandwidth parts shall be in increasing order starting from bandwidth part 0 to bandwidth part . The parameter is configured by higher-layer signalling.
    * When the most recently transmitted PTI is 0:
    * The wideband first precoding matrix indicator report has period > $H^{'} \cdot N_{\text{pd}}$, and is reported on the subframes > satisfying > $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} \right)\text{mod}\left( H^{'} \cdot N_{\text{pd}} \right) = 0$, > where $H^{'}$is signalled by higher layers.
    * Between every two consecutive wideband first precoding matrix > indicator reports, the remaining reporting instances are used > for a wideband second precoding matrix indicator with wideband > CQI as described below
```{=html}
``` \- In case RI reporting is configured, the reporting interval of RI is
times the wideband CQI/PMI period $H \cdot N_{\text{pd}}$, and RI is reported
on the same PUCCH cyclic shift resource as both the wideband CQI/PMI and
subband CQI reports.
    -   The reporting instances for RI are subframes satisfying
        > $\left( \text{10} \times n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - N_{\text{OFFSET},\text{CQI}} - N_{\text{OFFSET},\text{RI}} \right)\text{mod}\left( H \cdot N_{\text{pd}} \cdot M_{\text{RI}} \right) = 0$
In case of collision of a CSI report with PUCCH reporting type 3, 5, or 6 of
one serving cell with a CSI report with PUCCH reporting type 1, 1a, 2, 2a, 2b,
2c, or 4 of the same serving cell the latter CSI report with PUCCH reporting
type (1, 1a, 2, 2a, 2b, 2c, or 4) has lower priority and is dropped.
If the UE is configured with more than one serving cell, the UE transmits a
CSI report of only one serving cell in any given subframe. For a given
subframe, in case of collision of a CSI report with PUCCH reporting type 3, 5,
6, or 2a of one serving cell with a CSI report with PUCCH reporting type 1,
1a, 2, 2b, 2c, or 4 of another serving cell, the latter CSI with PUCCH
reporting type (1, 1a, 2, 2b, 2c, or 4) has lower priority and is dropped. For
a given subframe, in case of collision of CSI report with PUCCH reporting type
2, 2b, 2c, or 4 of one serving cell with CSI report with PUCCH reporting type
1 or 1a of another serving cell, the latter CSI report with PUCCH reporting
type 1, or 1a has lower priority and is dropped.
For a given subframe, in case of collision between CSI reports of different
serving cells with PUCCH reporting type of the same priority, the CSI of the
serving cell with lowest _ServCellIndex_ is reported, and CSI of all other
serving cells are dropped.
See subclause 10.1 regarding UE behaviour for collision between CSI and HARQ-
ACK and the corresponding PUCCH format assignment.
The CSI report of a given PUCCH reporting type shall be transmitted on the
PUCCH resource $n_{\text{PUCCH}}^{(2,\overset{\sim}{p})}$ as defined in [3],
where $n_{\text{PUCCH}}^{(2,\overset{\sim}{p})}$ is UE specific and configured
by higher layers for each serving cell.
If the UE is not configured for simultaneous PUSCH and PUCCH transmission or,
if the UE is configured for simultaneous PUSCH and PUCCH transmission and not
transmitting PUSCH, in case of collision between CSI and positive SR in a same
subframe, CSI is dropped.
Table 7.2.2-1A: Mapping of to $N_{\text{pd}}$ and for FDD.
* * *
                 Value of $N_{\text{pd}}$   Value of
0 ≤ ≤ 1 2  
2 ≤ ≤ 6 5 -- 2 7 ≤ ≤ 16 10 -- 7 17 ≤ ≤ 36 20 -- 17 37 ≤ ≤ 76 40 -- 37 77 ≤ ≤
156 80 -- 77 157 ≤ ≤ 316 160 -- 157 = 317 Reserved  
318 ≤ ≤ 349 32 -- 318 350 ≤ ≤ 413 64 -- 350 414 ≤ ≤ 541 128 -- 414 542 ≤ ≤
1023 Reserved
* * *
Table 7.2.2-1B: Mapping of to and .
* * *
                 Value of   Value of
0 ≤ ≤ 160 1 _−_ 161 ≤ ≤ 321 2 _−_ ( -- 161) 322 ≤ ≤ 482 4 _−_ ( -- 322) 483 ≤
≤ 643 8 _−_ ( -- 483) 644 ≤ ≤ 804 16 _−_ ( -- 644) 805 ≤ ≤ 965 32 _−_ ( --
805) 966 ≤ ≤ 1023 Reserved
* * *
Table 7.2.2-1C: Mapping of to $N_{\text{pd}}$ and for TDD.
* * *
                 Value of $N_{\text{pd}}$   Value of
= 0 1  
1 ≤ ≤ 5 5 -- 1 6 ≤ ≤ 15 10 -- 6 16 ≤ ≤ 35 20 -- 16 36 ≤ ≤ 75 40 -- 36 76 ≤ ≤
155 80 -- 76 156 ≤ ≤ 315 160 -- 156 316 ≤ ≤ 1023 Reserved
* * *
For TDD periodic CQI/PMI reporting, the following periodicity values apply
depending on the TDD UL/DL configuration [3]:
  * The reporting period of $N_{\text{pd}} = 1$ is only applicable to > TDD UL/DL configurations 0, 1, 3, 4, and 6, where all UL subframes > in a radio frame are used for CQI/PMI reporting.
  * The reporting period of $N_{\text{pd}} = 5$ is only applicable to > TDD UL/DL configurations 0, 1, 2, and 6.
  * The reporting periods of > $N_{\text{pd}} = \left{ \text{10},\text{20},\text{40},\text{80},\text{160} \right}$ > are applicable to all TDD UL/DL configurations.
For a serving cell with $N_{\text{RB}}^{\text{DL}} \leq 7$, Mode 2-0 and Mode
2-1 are not supported for that serving cell.
The sub-sampled codebook for PUCCH mode 1-1 submode 2 is defined in Table
7.2.2-1D for first and second precoding matrix indicator $i_{1}$ and $i_{2}$.
Joint encoding of rank and first precoding matrix indicator $i_{1}$ for PUCCH
mode 1-1 submode 1 is defined in Table 7.2.2-1E. The sub-sampled codebook for
PUCCH mode 2-1 is defined in Table 7.2.2-1F for PUCCH Reporting Type 1a.
Table 7.2.2-1D: PUCCH mode 1-1 submode 2 codebook subsampling.
* * *
RI Relationship between the first PMI value and codebook index $i_{1}$
Relationship between the second PMI value and codebook index $i_{2}$ total  
Value of the first PMI Codebook index $i_{1}$ Value of the second PMI Codebook
index $i_{2}$ #bits 1 0-7 0-1 4 2 0-7 0-1 4 3 0-1 0-7 4 4 0-1 0-7 4 5 0-3 0 0
2 6 0-3 0 0 2 7 0-3 0 0 2 8 0 0 0 0 0
* * *
Table 7.2.2-1E: Joint encoding of RI and $i_{1}$ for PUCCH mode 1-1 submode 1.
* * *
**Value of joint encoding of RI and the first PMI** RI Codebook index $i_{1}$
0-7 1  
8-15 2  
16-17 3  
18-19 4  
20-21 5  
22-23 6  
24-25 7  
26 8 0 27-31 reserved NA
* * *
Table 7.2.2-1F: PUCCH mode 2-1 codebook subsampling.
* * *
RI **Relationship between the second PMI value and codebook index** $i_{2}$  
Value of the second PMI **Codebook index** $i_{2}$ 1 0-15  
2 0-3  
3 0-3  
4 0-3  
5 0 0 6 0 0 7 0 0 8 0 0
* * *
An RI or PTI or any precoding matrix indicator reported for a serving cell in
a periodic reporting mode is valid only for CSI reports for that serving cell
on that periodic CSI reporting mode.
For the calculation of CQI/PMI conditioned on the last reported RI, in the
absence of a last reported RI the UE shall conduct the CQI/PMI calculation
conditioned on the lowest possible RI as given by the bitmap parameter
_codebookSubsetRestriction_ . If reporting for more than one CSI subframe set
is configured, CQI/PMI is conditioned on the last reported RI linked to the
same subframe set as the CSI report.
  * Wideband feedback
    * Mode 1-0 description:
      * In the subframe where RI is reported (only for transmission > mode 3):
        * A UE shall determine a RI assuming transmission on set > _S_ subbands.
        * The UE shall report a type 3 report consisting of one > RI.
      * In the subframe where CQI is reported:
        * A UE shall report a type 4 report consisting of one > wideband CQI value which is calculated assuming > transmission on set _S_ subbands. The wideband CQI > represents channel quality for the first codeword, > even when RI>1.
        * For transmission mode 3 the CQI is calculated > conditioned on the last reported periodic RI. For > other transmission modes it is calculated conditioned > on transmission rank 1.
    * Mode 1-1 description:
      * In the subframe where RI is reported (only for transmission > mode 4 and transmission mode 8 and transmission mode 9):
        * A UE shall determine a RI assuming transmission on set _S_ subbands.
        * The UE shall report a type 3 report consisting of one RI.
      * In the subframe where RI and a first PMI are reported (only > for transmission mode 9 with submode 1 and when 8 CSI-RS > ports are configured)
        * A UE shall determine a RI assuming transmission on set _S_ subbands.
        * The UE shall report a type 5 report consisting of jointly coded RI and a first PMI corresponding to a set of precoding matrices selected from the codebook subset assuming transmission on set _S_ subbands.
        * The wideband first PMI value is calculated conditioned on the reported periodic RI.
      * In the subframe where CQI/PMI is reported for all transmission modes except transmission mode 9 with 8 CSI-RS ports configured:
        * A single precoding matrix is selected from the codebook subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2 report consisting of
          * A single wideband CQI value which is calculated > assuming the use of a single precoding matrix in > all subbands and transmission on set _S_ subbands.
          * The selected single PMI (wideband PMI).
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * For transmission mode 4, 8 and 9, the PMI and CQI are calculated conditioned on the last reported periodic RI. For other transmission modes they are calculated conditioned on transmission rank 1.
      * In the subframe where wideband CQI/second PMI is reported for transmission mode 9 with 8 CSI-RS ports configured to submode 1 only:
        * A single precoding matrix is selected from the codebook subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2b report consisting of
          * A single wideband CQI value which is calculated > assuming the use of the single precoding matrix in > all subbands and transmission on set _S_ subbands.
          * The wideband second PMI corresponding to the > selected single precoding matrix.
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * The wideband second PMI value is calculated conditioned on the last reported periodic RI and the wideband first PMI. The wideband CQI value is calculated conditioned on the selected precoding matrix and the last reported periodic RI.
      * In the subframe where wideband CQI/first PMI/second PMI is reported for transmission mode 9 with 8 CSI-RS ports configured to submode 2 only:
        * A single precoding matrix is selected from the codebook subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2c report consisting of
          * A single wideband CQI value which is calculated > assuming the use of a single precoding matrix in > all subbands and transmission on set _S_ subbands.
          * The wideband first PMI and the wideband second PMI > corresponding to the selected single precoding > matrix as defined in subclause 7.2.4.
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * The wideband first PMI, the wideband second PMI and the wideband CQI are calculated conditioned on the last reported periodic RI.
  * UE Selected subband feedback
    * Mode 2-0 description:
      * In the subframe where RI is reported (only for transmission > mode 3):
        * A UE shall determine a RI assuming transmission on set > _S_ subbands.
        * The UE shall report a type 3 report consisting of one > RI.
      * In the subframe where wideband CQI is reported:
        * The UE shall report a type 4 report on each respective > successive reporting opportunity consisting of one > wideband CQI value which is calculated assuming > transmission on set _S_ subbands. The wideband CQI > represents channel quality for the first codeword, > even when RI>1.
        * For transmission mode 3 the CQI is calculated > conditioned on the last reported periodic RI. For > other transmission modes it is calculated conditioned > on transmission rank 1.
      * In the subframe where CQI for the selected subbands is > reported:
        * The UE shall select the preferred subband within the set > of $N_{j}$ subbands in each of the _J_ bandwidth parts > where _J_ is given in Table 7.2.2-2.
        * The UE shall report a type 1 report consisting of one > CQI value reflecting transmission only over the > selected subband of a bandwidth part determined in the > previous step along with the corresponding preferred > subband _L_ -bit label. A type 1 report for each > bandwidth part will in turn be reported in respective > successive reporting opportunities. The CQI represents > channel quality for the first codeword, even when > RI>1.
        * For transmission mode 3 the preferred subband selection > and CQI values are calculated conditioned on the last > reported periodic RI. For other transmission modes > they are calculated conditioned on transmission > rank 1.
    * Mode 2-1 description:
      * In the subframe where RI is reported (only for transmission > mode 4, 8 and 9 if the number of configured CSI-RS ports > is 2 or 4):
        * A UE shall determine a RI assuming transmission on set > _S_ subbands.
        * The UE shall report a type 3 report consisting of one > RI.
      * In the subframe where RI is reported for transmission mode 9 > with 8 CSI-RS ports configured then:
        * A UE shall determine a RI assuming transmission on set > _S_ subbands.
        * A UE shall determine a precoder type indication (PTI).
        * The UE shall report a type 6 report consisting of one RI > and the PTI.
      * In the subframe where wideband CQI/PMI is reported for all > transmission modes except transmission mode 9 with 8 > CSI-RS ports configured:
        * A single precoding matrix is selected from the codebook > subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2 report on each respective > successive reporting opportunity consisting of:
          * A wideband CQI value which is calculated assuming > the use of a single precoding matrix in all > subbands and transmission on set _S_ subbands.
          * The selected single PMI (wideband PMI).
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * For transmission modes 4, 8 and 9, the PMI and CQI > values are calculated conditioned on the last reported > periodic RI. For other transmission modes they are > calculated conditioned on transmission rank 1.
      * In the subframe where the wideband first PMI is reported for > transmission mode 9 with 8 CSI-RS ports configured and the > last reported PTI=0:
        * A set of precoding matrices corresponding to the wideband first PMI is selected from the codebook subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2a report on each respective successive reporting opportunity consisting of the wideband first PMI corresponding to the selected set of precoding matrices.
        * The wideband first PMI value is calculated conditioned on the last reported periodic RI.
      * In the subframe where wideband CQI/second PMI is reported > for transmission mode 9 with 8 CSI-RS ports configured and > the last reported PTI=1:
        * A single precoding matrix is selected from the codebook > subset assuming transmission on set _S_ subbands.
        * A UE shall report a type 2b report on each respective > successive reporting opportunity consisting of:
          * A wideband CQI value which is calculated assuming > the use of the selected single precoding matrix in > all subbands and transmission on set _S_ subbands.
          * The wideband second PMI corresponding to the > selected single precoding matrix.
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * The wideband second PMI value is calculated conditioned > on the last reported periodic RI and the wideband > first PMI. The wideband CQI value is calculated > conditioned on the selected precoding matrix and the > last reported periodic RI.
          * If the last reported first PMI was computed under an RI assumption that differs from the last reported periodic RI, or in the absence of a last reported first PMI, the conditioning of the second PMI value is not specified.
      * In the subframe where CQI for the selected subband is > reported for all transmission modes except for > transmission mode 9 with 8 CSI-RS ports configured:
        * The UE shall select the preferred subband within the set > of _N~j~_ subbands in each of the _J_ bandwidth parts > where _J_ is given in Table 7.2.2-2.
        * The UE shall report a type 1 report per bandwidth part > on each respective successive reporting opportunity > consisting of:
          * CQI value for codeword 0 reflecting transmission > only over the selected subband of a bandwidth part > determined in the previous step along with the > corresponding preferred subband _L_ -bit label.
          * _When RI >1, an additional 3-bit subband spatial > differential CQI value for codeword 1 offset > level_
            * _Codeword 1 offset level = subband CQI index for > codeword 0 -- subband CQI index for > codeword 1._
            * Assuming the use of the most recently reported > single precoding matrix in all subbands and > transmission on the selected subband within > the applicable bandwidth part.
          * _The mapping from the 3-bit subband spatial > differential CQI value to the offset level is > shown in Table 7.2-2._
        * For transmission modes 4, 8 and 9, the subband selection and CQI values are calculated conditioned on the last reported periodic wideband PMI and RI. For other transmission modes they are calculated conditioned on the last reported PMI and transmission rank 1.
      * In the subframe where wideband CQI/second PMI is reported > for transmission mode 9 with 8 CSI-RS ports configured and > the last reported PTI=0:
        * A single precoding matrix is selected from the codebook > subset assuming transmission on set _S_ subbands.
        * The UE shall report a type 2b report on each respective > successive reporting opportunity consisting of:
          * A wideband CQI value which is calculated assuming > the use of the selected single precoding matrix in > all subbands and transmission on set _S_ subbands.
          * The wideband second PMI corresponding to the > selected single precoding matrix.
          * When RI>1, an additional 3-bit wideband spatial > differential CQI, which is shown in Table 7.2-2.
        * The wideband second PMI value is calculated conditioned > on the last reported periodic RI and the wideband > first PMI. The wideband CQI value is calculated > conditioned on the selected precoding matrix and the > last reported periodic RI.
          * If the last reported first PMI was computed under an RI assumption that differs from the last reported periodic RI, or in the absence of a last reported first PMI, the conditioning of the second PMI value is not specified.
      * In the subframe where subband CQI/second PMI for the > selected subband is reported for transmission mode 9 with > 8 CSI-RS ports configured and the last reported PTI=1:
        * The UE shall select the preferred subband within the set of _N~j~_ subbands in each of the _J_ bandwidth parts where _J_ is given in Table 7.2.2-2.
        * The UE shall report a type 1a report per bandwidth part > on each respective successive reporting opportunity > consisting of:
          * CQI value for codeword 0 reflecting transmission > only over the selected subband of a bandwidth part > determined in the previous step along with the > corresponding preferred subband _L_ -bit label.
          * _When RI >1, an additional 3-bit subband spatial > differential CQI value for codeword 1 offset > level_
            * _Codeword 1 offset level = subband CQI index for > codeword 0 -- subband CQI index for > codeword 1._
            * Assuming the use of the precoding matrix > corresponding to the selected second PMI and > the most recently reported first PMI and > transmission on the selected subband within > the applicable bandwidth part.
          * _The mapping from the 3-bit subband spatial > differential CQI value to the offset level is > shown in Table 7.2-2._
          * _A second PMI of the preferred precoding matrix > selected from the codebook subset assuming > transmission_ only over the selected subband > within the applicable bandwidth part determined in > the previous step.
        * The subband _second_ PMI values are calculated > conditioned on the last reported periodic RI and the > wideband first PMI. The subband selection and CQI > values are calculated conditioned on the selected > precoding matrix and the last reported periodic RI.
          * If the last reported first PMI was computed under an RI assumption that differs from the last reported periodic RI, or in the absence of a last reported first PMI, the conditioning of the second PMI value is not specified.
Table 7.2.2-2: Subband Size (_k_) and Bandwidth Parts _(J)_ vs. Downlink
System Bandwidth
* * *
System Bandwidth $N_{\text{RB}}^{\text{DL}}$ Subband Size _k_ (RBs) Bandwidth
Parts (_J_)
6 -- 7 NA NA 8 -- 10 4 1 11 -- 26 4 2 27 -- 63 6 3 64 -- 110 8 4
* * *
If parameter _ttiBundling_ provided by higher layers is set to _TRUE_ and if
an UL-SCH in subframe bundling operation collides with a periodic CSI
reporting instance, then the UE shall drop the periodic CSI report of a given
PUCCH reporting type in that subframe and shall not multiplex the periodic CSI
report payload in the PUSCH transmission in that subframe. A UE is not
expected to be configured with simultaneous PUCCH and PUSCH transmission when
UL-SCH subframe bundling is configured.
Table 7.2.2-3: PUCCH Reporting Type Payload size per PUCCH Reporting Mode and
Mode State
+---------+---------+---------+---------+---------+---------+---------+ | PUCCH | R | Mode | PUCCH | | | | | Re | eported | State | Re | | | | | porting | | | porting | | | | | Type | | | Modes | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | | Mode | Mode | Mode | Mode | | | | | 1-1 | 2-1 | 1-0 | 2-0 | +---------+---------+---------+---------+---------+---------+---------+ | | | | (b | (b | (b | (b | | | | | its/BP) | its/BP) | its/BP) | its/BP) | +---------+---------+---------+---------+---------+---------+---------+ | 1 | S | RI = 1 | NA | 4+L | NA | 4+L | | | ub-band | | | | | | | | | | | | | | | | CQI | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | RI > 1 | NA | 7+L | NA | 4+L | +---------+---------+---------+---------+---------+---------+---------+ | 1a | S | 8 | NA | 8+L | NA | NA | | | ub-band | antenna | | | | | | | CQI / | ports | | | | | | | second | RI = 1 | | | | | | | PMI | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 8 | NA | 9+L | NA | NA | | | | antenna | | | | | | | | ports 1 | | | | | | | | \ 4 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 2 | W | 2 | 6 | 6 | NA | NA | | | ideband | antenna | | | | | | | CQI/PMI | ports | | | | | | | | RI = 1 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 4 | 8 | 8 | NA | NA | | | | antenna | | | | | | | | ports | | | | | | | | RI = 1 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 2 | 8 | 8 | NA | NA | | | | antenna | | | | | | | | ports | | | | | | | | RI > 1 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 4 | 11 | 11 | NA | NA | | | | antenna | | | | | | | | ports | | | | | | | | RI > 1 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 2a | W | 8 | NA | 4 | NA | NA | | | ideband | antenna | | | | | | | first | ports | | | | | | | PMI | RI \ 4 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 2c | W | 8 | 8 | NA | NA | NA | | | ideband | antenna | | | | | | | CQI / | ports | | | | | | | first | RI = 1 | | | | | | | PMI / | | | | | | | | second | | | | | | | | PMI | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 8 | 11 | NA | NA | NA | | | | antenna | | | | | | | | ports 1 | | | | | | | | \1 | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 5 | RI/ | 8 | 4 | NA | NA | NA | | | first | antenna | | | | | | | PMI | ports, | | | | | | | | 2-layer | | | | | | | | spatial | | | | | | | | multi | | | | | | | | plexing | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 8 | 5 | | | | | | | antenna | | | | | | | | ports, | | | | | | | | 4 and | | | | | | | | 8-layer | | | | | | | | spatial | | | | | | | | multi | | | | | | | | plexing | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 6 | RI/PTI | 8 | NA | 2 | NA | NA | | | | antenna | | | | | | | | ports, | | | | | | | | 2-layer | | | | | | | | spatial | | | | | | | | multi | | | | | | | | plexing | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 8 | NA | 3 | NA | NA | | | | antenna | | | | | | | | ports, | | | | | | | | 4-layer | | | | | | | | spatial | | | | | | | | multi | | | | | | | | plexing | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | 8 | NA | 4 | NA | NA | | | | antenna | | | | | | | | ports, | | | | | | | | 8-layer | | | | | | | | spatial | | | | | | | | multi | | | | | | | | plexing | | | | | +---------+---------+---------+---------+---------+---------+---------+
### 7.2.3 Channel quality indicator (CQI) definition
_The CQI indices and their interpretations are given in Table 7.2.3-1._
Based on an unrestricted observation interval in time and frequency, the UE
shall derive for each CQI value reported in uplink subframe _n_ the highest
CQI index between 1 and 15 in Table 7.2.3-1 which satisfies the following
condition, or CQI index 0 if CQI index 1 does not satisfy the condition:
  * A single PDSCH transport block with a combination of modulation scheme and transport block size corresponding to the CQI index, and occupying a group of downlink physical resource blocks termed the CSI reference resource, could be received with a transport block error probability not exceeding 0.1.
If CSI subframe sets $C_{\text{CSI,0}}$ and $C_{\text{CSI,1}}$ are configured
by higher layers, each CSI reference resource belongs to either
$C_{\text{CSI,0}}$ or $C_{\text{CSI,1}}$ but not to both. When CSI subframe
sets $C_{\text{CSI,0}}$ and $C_{\text{CSI,1}}$ are configured by higher layers
a UE is not expected to receive a trigger for which the CSI reference resource
is in subframe that does not belong to either subframe set.
For a UE in transmission mode 9 when parameter _pmi-RI-Report_ is configured
by higher layers,the UE shall derive the channel measurements for computing
the CQI value reported in uplink subframe _n_ based on only the Channel-State
Information (CSI) reference signals defined in [3] for which the UE is
configured to assume non-zero power. For a UE in transmission mode 9 when the
parameter _pmi-RI-Report_ is not configured by higher layers or in other
transmission modes the UE shall derive the channel measurements for computing
CQI based on CRS.
A combination of modulation scheme and transport block size corresponds to a
CQI index if:
  * the combination could be signalled for transmission on the PDSCH in the CSI reference resource according to the relevant Transport Block Size table, and
  * the modulation scheme is indicated by the CQI index, and
  * the combination of transport block size and modulation scheme when applied to the reference resource results in the effective channel code rate which is the closest possible to the code rate indicated by the CQI index. If more than one combination of transport block size and modulation scheme results in an effective channel code rate equally close to the code rate indicated by the CQI index, only the combination with the smallest of such transport block sizes is relevant.
The CSI reference resource is defined as follows:
  * In the frequency domain, the CSI reference resource is defined by the group of downlink physical resource blocks corresponding to the band to which the derived CQI value relates.
  * In the time domain, the CSI reference resource is defined by a single downlink subframe _n_ -_n~CQI_ref~_ ,
    * where for periodic CSI reporting _n~CQI_ref~_ is the smallest value greater than or equal to 4, such that it corresponds to a valid downlink subframe;
    * where for aperiodic CSI reporting _n~CQI_ref~_ is such that the reference resource is in the same valid downlink subframe as the corresponding CSI request in an uplink DCI format.
    * where for aperiodic CSI reporting _n~CQI_ref~_ is equal to 4 and downlink subframe _n_ -_n~CQI_ref~_ corresponds to a valid downlink subframe, where downlink subframe _n_ -_n~CQI_ref~ is_ received after the subframe with the corresponding CSI request in a Random Access Response Grant.
A downlink subframe in a serving cell shall be considered to be valid if:
      * it is configured as a downlink subframe for that UE, and
      * except for transmission mode 9, it is not an MBSFN subframe, and
      * it does not contain a DwPTS field in case the length of DwPTS is $\text{7680} \cdot T_{s}$ and less, and
      * it does not fall within a configured measurement gap for that UE, and
      * for periodic CSI reporting, it is an element of the CSI subframe set linked to the periodic CSI report when that UE is configured with CSI subframe sets.
If there is no valid downlink subframe for the CSI reference resource in a
serving cell, CSI reporting is omitted for the serving cell in uplink subframe
_n_.
  * In the layer domain, the CSI reference resource is defined by any RI and PMI on which the CQI is conditioned.
_In the CSI reference resource, the UE shall assume the following for the
purpose of deriving the CQI index, and if also configured, PMI and RI:_
  * _The first 3 OFDM symbols are occupied by control signalling_
  * _No resource elements used by primary or secondary synchronisation signals or PBCH_
  * _CP length of the non-MBSFN subframes_
  * _Redundancy Version 0_
  * _If CSI-RS is used for channel measurements, the ratio of PDSCH EPRE to CSI-RS EPRE is as given in subclause 7.2.5_
  * For transmission mode 9 CSI reporting:
    * CRS REs are as in non-MBSFN subframes;
    * If the UE is configured for PMI/RI reporting, the UE-specific reference signal overhead is consistent with the most recent reported rank if more than one CSI-RS ports are configured, and is consistent with rank 1 transmission if only one CSI-RS port is configured; and PDSCH signals on antenna ports $\left{ 7\ldots 6 + \upsilon \right}$for $\upsilon$layers would result in signals equivalent to corresponding symbols transmitted on antenna ports $\left{ \text{15}\ldots\text{14} + P \right}$, as given by $\begin{bmatrix} y^{(\text{15})}(i) \ \vdots \ y^{(\text{14} + P)}(i) \ \end{bmatrix} = W(i)\begin{bmatrix} x^{(0)}(i) \ \vdots \ x^{(\upsilon - 1)}(i) \ \end{bmatrix}$, where $x(i) = \begin{bmatrix} x^{(0)}(i) & \text{.}\text{.}\text{.} & x^{(\upsilon - 1)}(i) \ \end{bmatrix}^{T}$ is a vector of symbols from the layer mapping in subclause 6.3.3.2 of [3], $P \in \left{ 1,2,4,8 \right}$is the number of CSI-RS ports configured, and if only one CSI-RS port is configured, $W(i)$is 1, otherwise $W(i)$is the precoding matrix corresponding to the reported PMI applicable to $x(i)$. The corresponding PDSCH signals transmitted on antenna ports $\left{ \text{15}\ldots\text{14} + P \right}$ would have a ratio of EPRE to CSI-RS EPRE equal to the ratio given in subclause 7.2.5
  * _Assume no REs allocated for CSI-RS and zero-power CSI-RS_
  * _Assume no REs allocated for PRS_
```{=html}
``` \- _The PDSCH transmission scheme given by Table 7.2.3-0 depending on the
transmission mode currently configured for the UE (which may be the default
mode)._
  * If CRS is used for channel measurements, the ratio of PDSCH EPRE to cell-specific RS EPRE is as given in subclause 5.2 with the exception of $\rho_{A}$which shall be assumed to be
    * $\rho_{A} = P_{A} + \Delta_{\text{offset}} + \text{10}\text{log}_{\text{10}}(2)$[dB] for any modulation scheme, if the UE is configured with transmission mode 2 with 4 cell-specific antenna ports, or transmission mode 3 with 4 cell-specific antenna ports and the associated RI is equal to one;
    * $\rho_{A} = P_{A} + \Delta_{\text{offset}}$[dB] for any modulation scheme and any number of layers, otherwise.
> The shift $\Delta_{\text{offset}}$is given by the parameter _nomPDSCH-RS-
> EPRE-Offset_ which is configured by higher-layer signalling.
>
> Table 7.2.3-0: PDSCH transmission scheme assumed for CSI reference resource
+-------------------+-------------------------------------------------+ | Transmission mode | Transmission scheme of PDSCH | +-------------------+-------------------------------------------------+ | 1 | Single-antenna port, port 0 | +-------------------+-------------------------------------------------+ | 2 | Transmit diversity | +-------------------+-------------------------------------------------+ | 3 | Transmit diversity if the associated rank | | | indicator is 1, otherwise large delay CDD | +-------------------+-------------------------------------------------+ | 4 | Closed-loop spatial multiplexing | +-------------------+-------------------------------------------------+ | 5 | Multi-user MIMO | +-------------------+-------------------------------------------------+ | 6 | Closed-loop spatial multiplexing with a single | | | transmission layer | +-------------------+-------------------------------------------------+ | 7 | If the number of PBCH antenna ports is one, | | | Single-antenna port, port 0; otherwise Transmit | | | diversity | +-------------------+-------------------------------------------------+ | 8 | If the UE is configured without PMI/RI | | | reporting: if the number of PBCH antenna ports | | | is one, single-antenna port, port 0; otherwise | | | transmit diversity | | | | | | If the UE is configured with PMI/RI reporting: | | | closed-loop spatial multiplexing | +-------------------+-------------------------------------------------+ | 9 | If the UE is configured without PMI/RI | | | reporting: if the number of PBCH antenna ports | | | is one, single-antenna port, port 0; otherwise | | | transmit diversity | | | | | | If the UE is configured with PMI/RI reporting: | | | if the number of CSI-RS ports is one, | | | single-antenna port, port 7; otherwise up to 8 | | | layer transmission, ports 7-14 (see subclause | | | 7.1.5B) | +-------------------+-------------------------------------------------+
Table 7.2.3-1: 4-bit CQI Table
* * *
CQI index modulation code rate x 1024 efficiency 0 out of range  
1 QPSK 78 0.1523 2 QPSK 120 0.2344 3 QPSK 193 0.3770 4 QPSK 308 0.6016 5 QPSK
449 0.8770 6 QPSK 602 1.1758 7 16QAM 378 1.4766 8 16QAM 490 1.9141 9 16QAM 616
2.4063 10 64QAM 466 2.7305 11 64QAM 567 3.3223 12 64QAM 666 3.9023 13 64QAM
772 4.5234 14 64QAM 873 5.1152 15 64QAM 948 5.5547
* * *
### 7.2.4 Precoding Matrix Indicator (PMI) definition
For transmission modes 4, 5 and 6, precoding feedback is used for channel
dependent codebook based precoding and relies on UEs reporting precoding
matrix indicator (PMI). For transmission mode 8, the UE shall report PMI if
configured with PMI/RI reporting. For transmission mode 9, the UE shall report
PMI if configured with PMI/RI reporting and the number of CSI-RS ports is
larger than 1. A UE shall report PMI based on the feedback modes described in
7.2.1 and 7.2.2. For other transmission modes, PMI reporting is not supported.
For 2 and 4 antenna ports, each PMI value corresponds to a codebook index
given in Table 6.3.4.2.3-1 or Table 6.3.4.2.3-2 of [3] as follows:
  * For 2 antenna ports $\left{ 0,1 \right}$ or {15,16} and an associated RI value of 1, a PMI value of $n \in \left{ 0,1,2,3 \right}$ corresponds to the codebook index $n$ given in Table 6.3.4.2.3-1 of [3] with $\upsilon = 1$.
  * For 2 antenna ports $\left{ 0,1 \right}$ or {15,16} and an associated RI value of 2, a PMI value of $n \in \left{ 0,1 \right}$ corresponds to the codebook index $n + 1$given in Table 6.3.4.2.3-1 of [3] with $\upsilon = 2$.
  * For 4 antenna ports $\left{ 0,1,2,3 \right}$ or {15,16,17,18}, a PMI value of $n \in \left{ 0,1,\cdots,\text{15} \right}$ corresponds to the codebook index $n$ given in Table 6.3.4.2.3-2 of [3] with $\upsilon$ equal to the associated RI value.
For 8 antenna ports, each PMI value corresponds to a pair of codebook indices
given in Table 7.2.4-1, 7.2.4-2, 7.2.4-3, 7.2.4-4, 7.2.4-5, 7.2.4-6, 7.2.4-7,
or 7.2.4-8, where the quantities $\phi_{n}$ and $v_{m}$ are given by
  * as follows:For 8 antenna ports$_{}^{}\left{ \ \text{15},\text{16},\text{17},\text{18},\text{19},\text{20},\text{21},\text{22}\ \right}$, a first PMI value of $i_{1} \in \left{ \ 0,1,\cdots,f(\upsilon)\ - 1 \right}$ and a second PMI value of $i_{2} \in \left{ \ 0,1,\cdots,g(\upsilon)\ - 1 \right}$corresponds to the codebook indices $i_{1}$ and $i_{2}$ given in Table 7.2.4-_j_ with $\upsilon$ equal to the associated RI value and where _j_ = $\upsilon$, $f(\upsilon) = \left{ \ \text{16},\text{16},4,4,4,4,4,1\ \right}$ and $g(\upsilon) = \left{ \ \text{16},\text{16},\text{16},8,1,1,1,1\ \right}$.
  * In some cases codebook subsampling is supported. The sub-sampled codebook for PUCCH mode 1-1 submode 2 is defined in Table 7.2.2-1D for first and second precoding matrix indicator $i_{1}$ and $i_{2}$. Joint encoding of rank and first precoding matrix indicator $i_{1}$ for PUCCH mode 1-1 submode 1 is defined in Table 7.2.2-1E. The sub-sampled codebook for PUCCH mode 2-1 is defined in Table 7.2.2-1F for PUCCH Reporting Type 1a.
Table 7.2.4-1: Codebook for 1-layer CSI reporting using antenna ports 15 to
22.
* * *
                                                             0       1       2        3        4        5        6        7
0 -- 15
                                                             **8**   **9**   **10**   **11**   **12**   **13**   **14**   **15**
0 - 15  
where $W_{m,n}^{(1)} = \frac{1}{\sqrt{8}}\begin{bmatrix}  
v_{m} \  
\phi_{n}v_{m} \  
\end{bmatrix}$
* * *
Table 7.2.4-2: Codebook for 2-layer CSI reporting using antenna ports 15 to
22.
* * *
                                                                0    1    2    3
0 -- 15
                                                                4    5    6    7
0 -- 15
                                                                8    9    10   11
0 -- 15
                                                                12   13   14   15
0 -- 15  
where $W_{m,m\text{',}n}^{(2)} = \frac{1}{4}\begin{bmatrix}  
v_{m} & v_{m'} \  
\phi_{n}v_{m} & \- \phi_{n}v_{m'} \  
\end{bmatrix}$
* * *
Table 7.2.4-3: Codebook for 3-layer CSI reporting using antenna ports 15 to
22.
* * *
                                                                                                                                                                                              0    1    2    3
0 - 3
                                                                                                                                                                                              4    5    6    7
0 - 3
                                                                                                                                                                                              8    9    10   11
0 - 3
                                                                                                                                                                                              12   13   14   15
0 - 3  
where $W_{m,m\text{',}m\text{}\ }\ \ rSup\ {\ size\ 8{\ \textbackslash(\ 3\
\textbackslash)\ }\ }\ =\ {\ \ {1}\ \ over\ \ {\ sqrt\ {}24\text{}\ }\ }\ \
left\ [\ matrix\ {  
v\ rSub\ {\ size\ 8{m}\ }\ \ {}\ #\ v\ rSub\ {\ size\ 8{m'}\ }\ \ {}\ #\ v\
rSub\ {\ size\ 8{m}}v_{m} - v_{m'} - v_{{m\text{}\ }\ {}  
}\ \ right\ ]},\text{\ tilde\ \ ital\ {W}}\ rSub\ {\ size\
8{m,m}',\text{m}}^{(3)} = \frac{1}{\sqrt{\text{24}}}\begin{bmatrix}  
v_{m} & v_{m'} & v_{m\text{}\ }\ \ {}\ ##  
v\ rSub\ {\ size\ 8{m}\ }\ \ {}\ #\ v\ rSub\ {\ size\ 8{m'}\ }\ \ {}\ #\ \ -\
v\ rSub\ {\ size\ 8{m}} \  
\end{bmatrix}}$
* * *
Table 7.2.4-4: Codebook for 4-layer CSI reporting using antenna ports 15 to
22.
* * *
                                                                               0   1   2   3
0 - 3
                                                                               4   5   6   7
0 - 3  
where $W_{m,m\text{',}n}^{(4)} = \frac{1}{\sqrt{\text{32}}}\begin{bmatrix}  
v_{m} & v_{m'} & v_{m} & v_{m'} \  
\phi_{n}v_{m} & \phi_{n}v_{m'} & \- \phi_{n}v_{m} & \- \phi_{n}v_{m'} \  
\end{bmatrix}$
* * *
Table 7.2.4-5: Codebook for 5-layer CSI reporting using antenna ports 15 to
22.
* * *
          0
0 - 3
* * *
Table 7.2.4-6: Codebook for 6-layer CSI reporting using antenna ports 15 to
22.
* * *
          0
0 - 3
* * *
Table 7.2.4-7: Codebook for 7-layer CSI reporting using antenna ports 15 to
22.
* * *
          0
0 - 3
* * *
Table 7.2.4-8: Codebook for 8-layer CSI reporting using antenna ports 15 to
22.
* * *
      0
0
* * *
### 7.2.5 Channel-State Information -- Reference Signal (CSI-RS) definition
_The following parameters for CSI-RS are configured via higher layer
signaling:_
  * _Number of CSI-RS ports_. The allowable values and port mapping are given in subclause 6.10.5 of [3].
  * _CSI RS Configuration (see Table 6.10.5.2-1 and Table 6.10.5.2-2 in [3])_
  * _CSI RS subframe configuration_ $I_{\text{CSI} - \text{RS}}$. The allowable values are given in subclause 6.10.5.3 of [3].
  * _Subframe configuration period_ $T_{\text{CSI-RS}}$_. The allowable values are given in subclause 6.10.5.3 of [3]._
  * _Subframe offset_ $\Delta_{\text{CSI-RS}}$_. The allowable values are given in subclause 6.10.5.3 of [3]._
  * UE assumption on reference PDSCH transmitted power for CSI feedback $P_{c}$. $P_{c}$_is the assumed ratio of PDSCH EPRE to CSI-RS EPRE when UE derives CSI feedback and takes values in the range of [-8, 15] dB with 1 dB step size, where the PDSCH EPRE corresponds to the symbols for which_ the ratio of the PDSCH EPRE to the cell-specific RS EPRE is denoted by $\rho_{A}$, as specified in Table 5.2-2 and Table 5.2-3 _._
A UE should not expect the configuration of CSI-RS and/or zero-power CSI-RS
and PMCH in the same subframe of a serving cell.
For frame structure type 1, the UE is not expected to receive the 16-bit
bitmap _ZeroPowerCSI-RS_ with any one of the 6 LSB bits set to 1 for the
normal CP case, or with any one of the 8 LSB bits set to 1 for the extended CP
case.
For frame structure type 2 and 4 CRS ports, the UE is not expected to receive
a CSI RS Configuration index (see Table 6.10.5.2-1 and Table 6.10.5.2-2 in
[3]) belonging to the set [20-31] for the normal CP case or the set [16-27]
for the extended CP case.
For frame structure type 2 and 4 CRS ports, the UE is not expected to receive
the 16-bit bitmap _ZeroPowerCSI-RS_ with any one of the 6 LSB bits set to 1
for the normal CP case, or with any one of the 8 LSB bits set to 1 for the
extended CP case.
## 7.3 UE procedure for reporting HARQ-ACK
For FDD with PUCCH format 1a/1b transmission, when both HARQ-ACK and SR are
transmitted in the same sub-frame, a UE shall transmit the HARQ-ACK on its
assigned HARQ-ACK PUCCH format 1a/1b resource for a negative SR transmission
and transmit the HARQ-ACK on its assigned SR PUCCH resource for a positive SR
transmission.
For FDD with PUCCH format 1b with channel selection, when both HARQ-ACK and SR
are transmitted in the same sub-frame a UE shall transmit the HARQ-ACK on its
assigned HARQ-ACK PUCCH resource with channel selection as defined in
subclause 10.1.2.2.1 for a negative SR transmission and transmit one HARQ-ACK
bit per serving cell on its assigned SR PUCCH resource for a positive SR
transmission according to the following:
  * if only one transport block or a PDCCH indicating downlink SPS release is detected on a serving cell, the HARQ-ACK bit for the serving cell is the HARQ-ACK bit corresponding to the transport block or the PDCCH indicating downlink SPS release;
  * if two transport blocks are received on a serving cell, the HARQ-ACK bit for the serving cell is generated by spatially bundling the HARQ-ACK bits corresponding to the transport blocks;
  * if neither PDSCH transmission for which HARQ-ACK response shall be provided nor PDCCH indicating downlink SPS release is detected for a serving cell, the HARQ-ACK bit for the serving cell is set to NACK;
and the HARQ-ACK bits for the primary cell and the secondary cell are mapped
to $b(0)$ and $b(1)$, respectively, where $b(0)$ and $b(1)$ are specified in
subclause 5.4.1 in [3]..
For FDD, when a PUCCH format 3 transmission of HARQ-ACK coincides with _a sub-
frame configured to the UE by higher layers for transmission of a scheduling
request_ , the UE shall multiplex HARQ-ACK and SR bits on HARQ-ACK PUCCH
resource as defined in subclause 5.2.3.1 in [4], unless the HARQ-ACK
corresponds to a PDSCH transmission on the primary cell only or a PDCCH
indicating downlink SPS release on the primary cell only, in which case the SR
shall be transmitted as for FDD with PUCCH format 1a/1b.
For FDD and for a PUSCH transmission, a UE shall not transmit HARQ-ACK on
PUSCH in subframe _n_ if the UE does not receive PDSCH or PDCCH indicating
downlink SPS release in subframe _n-4_.
For TDD, the UE shall upon detection of a PDSCH transmission or a PDCCH
indicating downlink SPS release (defined in subclause 9.2) within subframe(s)
$n - k$, where $k \in K$ and $K$ is defined in Table 10.1.3.1-1 intended for
the UE and for which HARQ-ACK response shall be provided, transmit the HARQ-
ACK response in UL subframe _n_.
For TDD, when PUCCH format 3 is configured for transmission of HARQ-ACK, for
special subframe configurations 0 and 5 with normal downlink CP or
configurations 0 and 4 with extended downlink CP in a serving cell, shown in
table 4.2-1 [3], the special subframe of the serving cell is excluded from the
HARQ-ACK codebook size determination. In this case, if the serving cell is the
primary cell, there is no PDCCH indicating downlink SPS release in the special
subframe.
For TDD UL-DL configurations 1-6 and one configured serving cell, if the UE is
not configured with PUCCH format 3, the value of the Downlink Assignment Index
(DAI) in DCI format 0/4, $V_{\text{DAI}}^{\text{UL}}$, detected by the UE
according to Table 7.3-X in subframe $n - k'$, where $k'$ is defined in Table
7.3-Y, represents the total number of subframes with PDSCH transmissions and
with PDCCH indicating downlink SPS release to the corresponding UE within all
the subframe(s)$n - k$, where$k \in K$. The value $V_{\text{DAI}}^{\text{UL}}$
includes all PDSCH transmission with and without corresponding PDCCH within
all the subframe(s) $n - k$. In case neither PDSCH transmission, nor PDCCH
indicating the downlink SPS resource release is intended to the UE, the UE can
expect that the value of the DAI in DCI format 0/4,
$V_{\text{DAI}}^{\text{UL}}$, if transmitted, is set to 4.
For TDD UL-DL configuration 1-6 and a UE configured with more than one serving
cell, or for TDD UL-DL configuration 1-6 and a UE configured with one serving
cell and PUCCH format 3, a value $W_{\text{DAI}}^{\text{UL}}$is determined by
the Downlink Assignment Index (DAI) in DCI format 0/4 according to Table 7.3-Z
in subframe $n - k'$, where $k'$ is defined in Table 7.3-Y. In case neither
PDSCH transmission, nor PDCCH indicating the downlink SPS resource release is
intended to the UE, the UE can expect that the value of
$W_{\text{DAI}}^{\text{UL}}$ is set to 4 by the DAI in DCI format 0/4 if
transmitted.
For TDD UL-DL configurations 1-6, the value of the DAI in DCI format
1/1A/1B/1D/2/2A/2B/2C denotes the accumulative number of PDCCH(s) with
assigned PDSCH transmission(s) and PDCCH indicating downlink SPS release up to
the present subframe within subframe(s) $n - k$ of each configured serving
cell, where $k \in K$, and shall be updated from subframe to subframe. Denote
$V_{\text{DAI},c}^{\text{DL}}$ as the value of the DAI in PDCCH with DCI
format 1/1A/1B/1D/2/2A/2B/2C detected by the UE according to Table 7.3-X in
subframe$n - k_{m}$ in serving cell $c$, where $k_{m}$ is the smallest value
in the set $K$ (defined in Table 10.1.3.1-1) such that the UE detects a DCI
format 1/1A/1B/1D/2/2A/2B/2C. When configured with one serving cell, the
subscript of $c$ in $V_{\text{DAI},c}^{\text{DL}}$ can be omitted.
For all TDD UL-DL configurations, denote $U_{\text{DAI},c}$ as the total
number of PDCCH(s) with assigned PDSCH transmission(s) and PDCCH indicating
downlink SPS release detected by the UE within the subframe(s) $n - k$ in
serving cell $c$, where $k \in K$. When configured with one serving cell, the
subscript of $c$ in $U_{\text{DAI},c}$ can be omitted. Denote
$N_{\text{SPS}}$, which can be zero or one, as the number of PDSCH
transmissions without a corresponding PDCCH within the subframe(s) $n - k$,
where $k \in K$.
For TDD HARQ-ACK bundling or HARQ-ACK multiplexing and a subframe $n$ with $M
= 1$, the UE shall generate one or two HARQ-ACK bits by performing a logical
AND operation per codeword across $M$ DL subframes associated with a single UL
subframe, of all the corresponding $U_{\text{DAI}} + N_{\text{SPS}}$
individual PDSCH transmission HARQ-ACKs and individual ACK in response to
received PDCCH indicating downlink SPS release, where $M$ is the number of
elements in the set $K$ defined in Table 10.1.3.1-1. The UE shall detect if at
least one downlink assignment has been missed, and for the case that the UE is
transmitting on PUSCH the UE shall also determine the
parameter$N_{\text{bundled}}$.
  * For TDD UL-DL configuration 0, $N_{\text{bundled}}$ shall be 1 if the UE detects the PDSCH transmission with or without corresponding PDCCH, or detects PDCCH indicating downlink SPS release within the subframe $n - k$, where $k \in K$. The UE shall not transmit HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH indicating downlink SPS release within the subframe(s) $n - k$, where $k \in K$.
  * For the case that the UE is not transmitting on PUSCH in subframe _n_ and TDD UL-DL configurations 1-6, if $U_{\text{DAI}} > 0$ and $V_{\text{DAI}}^{\text{DL}} \neq \left( U_{\text{DAI}} - 1 \right)\text{mod}4 + 1$, the UE detects that at least one downlink assignment has been missed.
  * For the case that the UE is transmitting on PUSCH and the PUSCH transmission is adjusted based on a detected PDCCH with DCI format 0/4 intended for the UE and TDD UL-DL configurations 1-6, if $V_{\text{DAI}}^{\text{UL}} \neq \left( U_{\text{DAI}} + N_{\text{SPS}} - 1 \right)\text{mod}4 + 1$ the UE detects that at least one downlink assignment has been missed and the UE shall generate NACK for all codewords where $N_{\text{bundled}}$ is determined by the UE as $N_{\text{bundled}} = V_{\text{DAI}}^{\text{UL}} + 2$. If the UE does not detect any downlink assignment missing, $N_{\text{bundled}}$ is determined by the UE as $N_{\text{bundled}} = V_{\text{DAI}}^{\text{UL}}$. UE shall not transmit HARQ-ACK if $U_{\text{DAI}} + N_{\text{SPS}} = 0$and $V_{\text{DAI}}^{\text{UL}} = 4$.
  * For the case that the UE is transmitting on PUSCH, and the PUSCH transmission is not based on a detected PDCCH with DCI format 0/4 intended for the UE and TDD UL-DL configurations 1-6, if $U_{\text{DAI}} > 0$ and $V_{\text{DAI}}^{\text{DL}} \neq \left( U_{\text{DAI}} - 1 \right)\text{mod}4 + 1$, the UE detects that at least one downlink assignment has been missed and the UE shall generate NACK for all codewords. The UE determines $N_{\text{bundled}} = (U_{\text{DAI}} + N_{\text{SPS}})$ as the number of assigned subframes. The UE shall not transmit HARQ-ACK if $U_{\text{DAI}} + N_{\text{SPS}} = 0$.
For TDD, when PUCCH format 3 is configured for transmission of HARQ-ACK, the
HARQ-ACK feedback bits
$o_{c,0}^{\text{ACK}}o_{c,1}^{\text{ACK}},\text{.}\text{.}\text{.},o_{c,O_{c}^{\text{ACK}}
- 1}^{\text{ACK}}$ for the _c_ -th serving cell configured by RRC are
constructed as follows, where _c_ ≥0, $O_{c}^{\text{ACK}} = B_{c}^{\text{DL}}$
if transmission mode configured in the _c_ -th serving cell supports one
transport block or spatial HARQ-ACK bundling is applied and
$O_{c}^{\text{ACK}} = 2B_{c}^{\text{DL}}$otherwise, where$B_{c}^{\text{DL}}$
is the number of downlink subframes for which the UE needs to feedback HARQ-
ACK bits for the _c_ -th serving cell.
\- For the case that the UE is transmitting on PUCCH, $B_{c}^{\text{DL}} = M$
where $M$ is the number of elements in the set $K$ defined in Table 10.1.3.1-1
associated with subframe _n_ and the set $K$ does not include a special
subframe of configurations 0 and 5 with normal downlink CP or of
configurations 0 and 4 with extended downlink CP; otherwise $B_{c}^{\text{DL}}
= M - 1$.
\- For TDD UL-DL configuration 0 or for a PUSCH transmission not adjusted
based on a detected PDCCH with DCI format 0/4, the UE shall assume
$B_{c}^{\text{DL}} = M$ where $M$ is the number of elements in the set $K$
defined in Table 10.1.3.1-1 associated with subframe _n_ and the set $K$ does
not include a special subframe of configurations 0 and 5 with normal downlink
CP or of configurations 0 and 4 with extended downlink CP; otherwise
$B_{c}^{\text{DL}} = M - 1$. The UE shall not transmit HARQ-ACK on PUSCH if
the UE does not receive PDSCH or PDCCH indicating downlink SPS release in
subframe(s)$n - k$, where $k \in K$.
\- For TDD UL-DL configurations {1, 2, 3, 4, 6} and a PUSCH transmission
adjusted based on a detected PDCCH with DCI format 0/4, the UE shall assume
$B_{c}^{\text{DL}} = W_{\text{DAI}}^{\text{UL}}$. The UE shall not transmit
HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH indicating
downlink SPS release in subframe(s)$n - k$ where $k \in K$ and
$W_{\text{DAI}}^{\text{UL}} = 4$.
\- For TDD UL-DL configurations 5 and a PUSCH transmission adjusted based on a
detected PDCCH with DCI format 0/4, the UE shall assume , where $U$denotes the
maximum value of $U_{c}$ among all the configured serving cells,$U_{c}$ is the
total number of received PDSCHs and PDCCH indicating downlink SPS release in
subframe(s) $n - k$ on the _c_ -th serving cell,$k \in K$. The UE shall not
transmit HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH
indicating downlink SPS release in subframe(s)$n - k$ where $k \in K$ and
$W_{\text{DAI}}^{\text{UL}} = 4$.
For TDD, when PUCCH format 3 is configured for transmission of HARQ-ACK,
  * for TDD UL-DL configurations 1-6, the HARQ-ACK for a PDSCH transmission with a corresponding PDCCH or for a PDCCH indicating downlink SPS release in subframe $n - k$ is associated with $o_{c,\text{DAI}(k) - 1}^{\text{ACK}}$ if transmission mode configured in the _c_ -th serving cell supports one transport block or spatial HARQ-ACK bundling is applied, or associated with $o_{c,2\text{DAI}(k) - 2}^{\text{ACK}}$ and $o_{c,2\text{DAI}(k) - 1}^{\text{ACK}}$ otherwise, where _DAI(k)_ is the value of DAI in DCI format 1A/1B/1D/1/2/2A/2B/2C detected in subframe $n - k$, $o_{c,2\text{DAI}(k) - 2}^{\text{ACK}}$ and $o_{c,2\text{DAI}(k) - 1}^{\text{ACK}}$ are the HARQ-ACK feedback for codeword 0 and codeword 1, respectively. For the case with $N_{\text{SPS}} > 0$, the HARQ-ACK associated with a PDSCH transmission without a corresponding PDCCH is mapped to $o_{c,O_{c}^{\text{ACK}} - 1}^{\text{ACK}}$ The HARQ-ACK feedback bits without any detected PDSCH transmission or without detected PDCCH indicating downlink SPS release are set to NACK;
> \- for TDD UL-DL configuration 0, the HARQ-ACK for a PDSCH transmission or
> for a PDCCH indicating downlink SPS release in subframe $n - k$ is
> associated with if transmission mode configured in the _c_ -th serving cell
> supports one transport block or spatial HARQ-ACK bundling is applied, or
> associated with and otherwise, where and are the HARQ-ACK feedback for
> codeword 0 and codeword 1, respectively. The HARQ-ACK feedback bits without
> any detected PDSCH transmission or without detected PDCCH indicating
> downlink SPS release are set to NACK.
For TDD when format 1b with channel selection is configured for transmission
of HARQ-ACK and for 2 configured serving cells, the HARQ-ACK feedback bits
$o_{0}^{\text{ACK}}o_{1}^{\text{ACK}},\text{.}\text{.}\text{.},o_{O^{\text{ACK}}
- 1}^{\text{ACK}}$on PUSCH are constructed as follows.
\- For TDD UL-DL configuration 0, $o_{j}^{\text{ACK}}$= HARQ-ACK(_j_), $0 \leq
j \leq A - 1$ as defined in subclause 10.1.3.2.1. The UE shall not transmit
HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH indicating
downlink SPS release in subframe(s)$n - k$ where $k \in K$.
\- For TDD UL-DL configurations {1, 2, 3, 4, 6} and a PUSCH transmission
adjusted based on a detected PDCCH with DCI format 0/4 with
$W_{\text{DAI}}^{\text{UL}}$=1 or 2, $o_{j}^{\text{ACK}}$ is determined as if
PUCCH format 3 is configured for transmission of HARQ-ACK, except that spatial
HARQ-ACK bundling across multiple codewords within a DL subframe is performed
for all serving cells configured with a downlink transmission mode that
supports up to two transport blocks in case $W_{\text{DAI}}^{\text{UL}}$=2.
\- For TDD UL-DL configurations {1, 2, 3, 4, 6} and a PUSCH transmission
adjusted based on a detected PDCCH with DCI format 0/4 with
$W_{\text{DAI}}^{\text{UL}}$=3 or 4, $o_{j}^{\text{ACK}} = o(j)$, $0 \leq j
\leq 3$as defined in Table 10.1.3.2-5 or in Table 10.1.3.2-6 respectively,
where the value of $M$is replaced by $W_{\text{DAI}}^{\text{UL}}$. The UE
shall not transmit HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH
indicating downlink SPS release in subframe(s)$n - k$ where $k \in K$ and
$W_{\text{DAI}}^{\text{UL}} = 4$.
\- For TDD UL-DL configurations {1, 2, 3, 4, 6} and a PUSCH transmission not
adjusted based on a detected PDCCH with DCI format 0/4 and a subframe $n$ with
$M$=1 or 2, $o_{j}^{\text{ACK}}$= HARQ-ACK(_j_), $0 \leq j \leq A - 1$ as
defined in subclause 10.1.3.2.1. The UE shall not transmit HARQ-ACK on PUSCH
if the UE does not receive PDSCH or PDCCH indicating downlink SPS release in
subframe(s)$n - k$ where $k \in K$.
\- For TDD UL-DL configurations {1, 2, 3, 4, 6} and a PUSCH transmission not
adjusted based on a detected PDCCH with DCI format 0/4 and a subframe $n$ with
$M$=3 or 4, $o_{j}^{\text{ACK}} = o(j)$, $0 \leq j \leq 3$as defined in Table
10.1.3.2-5 or in Table 10.1.3.2-6 respectively. The UE shall not transmit
HARQ-ACK on PUSCH if the UE does not receive PDSCH or PDCCH indicating
downlink SPS release in subframe(s)$n - k$ where $k \in K$.
For TDD HARQ-ACK bundling, when the UE is configured by transmission mode 3,
4, 8 or 9 defined in subclause 7.1 and HARQ-ACK bits are transmitted on PUSCH,
the UE shall always generate 2 HARQ-ACK bits assuming both codeword 0 and 1
are enabled. For the case that the UE detects only the PDSCH transmission
associated with codeword 0 within the bundled subframes, the UE shall generate
NACK for codeword 1.
Table 7.3-X: Value of Downlink Assignment Index
* * *
DAI\ $V_{\text{DAI}}^{\text{UL}}$ or $V_{\text{DAI}}^{\text{DL}}$ Number of
subframes with PDSCH transmission and with PDCCH indicating DL SPS release
MSB, LSB
0,0 1 1 or 5 or 9
0,1 2 2 or 6
1,0 3 3 or 7
1,1 4 0 or 4 or 8
* * *
Table 7.3-Y: Uplink association index _k_ ' for TDD
* * *
**TDD UL/DL\** subframe number _n_**  
Configuration**
[]{.underline} **0** **1** **2** **3** **4** **5** **6** **7** **8** **9**
1 6 4 6 4
2 4 4
3 4 4 4
4 4 4
5 4
6 7 7 5 7 7
* * *
Table 7.3-Z: Value of $W_{\text{DAI}}^{\text{UL}}$ determined by the DAI field
in DCI format 0/4
* * *
DAI\ $W_{\text{DAI}}^{\text{UL}}$ MSB, LSB
0,0 1
0,1 2
1,0 3
1,1 4
* * *
For TDD HARQ-ACK multiplexing and a subframe $n$ with $M > 1$, spatial HARQ-
ACK bundling across multiple codewords within a DL subframe is performed by a
logical AND operation of all the corresponding individual HARQ-ACKs. In case
the UE is transmitting on PUSCH, the UE shall determine the number of HARQ-ACK
feedback bits $O^{\text{ACK}}$ and the HARQ-ACK feedback bits
$o_{n}^{\text{ACK}}$ , $n = 0,\ldots,O^{\text{ACK}} - 1$ to be transmitted in
subframe _n_.
  * If the PUSCH transmission is adjusted based on a detected PDCCH with DCI format 0/4 intended for the UE, then $O^{\text{ACK}} = V_{\text{DAI}}^{\text{UL}}$ unless $V_{\text{DAI}}^{\text{UL}} = 4$ and $U_{\text{DAI}} + N_{\text{SPS}} = 0$ in which case the UE shall not transmit HARQ-ACK. The spatially bundled HARQ-ACK for a PDSCH transmission with a corresponding PDCCH or for a PDCCH indicating downlink SPS release in subframe $n - k$ is associated with $o_{\text{DAI}(k) - 1}^{\text{ACK}}$ where _DAI(k)_ is the value of DAI in DCI format 1A/1B/1D/1/2/2A/2B/2C detected in subframe $n - k$. For the case with $N_{\text{SPS}} > 0$, the HARQ-ACK associated with a PDSCH transmission without a corresponding PDCCH is mapped to $o_{O^{\text{ACK}} - 1}^{\text{ACK}}$. The HARQ-ACK feedback bits without any detected PDSCH transmission or without detected PDCCH indicating downlink SPS release are set to NACK.
  * If the PUSCH transmission is not adjusted based on a detected PDCCH with DCI format 0/4 intended for the UE, $O^{\text{ACK}} = M$, and $o_{i}^{\text{ACK}}$ is associated with the spatially bundled HARQ-ACK for DL subframe $n - k_{i}$, where$k_{i} \in K$. The HARQ-ACK feedback bits without any detected PDSCH transmission or without detected PDCCH indicating downlink SPS release are set to NACK. The UE shall not transmit HARQ-ACK if $U_{\text{DAI}} + N_{\text{SPS}} = 0$.
For TDD when a PUCCH format 3 transmission of HARQ-ACK coincides with _a sub-
frame configured to the UE by higher layers for transmission of a scheduling
request_ , the UE shall multiplex HARQ-ACK and SR bits on HARQ-ACK PUCCH
resource as defined in subclause 5.2.3.1 in [4], unless the HARQ-ACK
corresponds to one of the following cases
  * a single PDSCH transmission only on the primary cell indicated by the detection of a corresponding PDCCH in subframe $n - k_{m}$, where $k_{m} \in K$, and for TDD UL-DL configurations 1-6 the DAI value in the PDCCH is equal to '1' (defined in Table 7.3-X), or a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - k_{m}$, where $k_{m} \in K$, and for TDD UL-DL configurations 1-6 the DAI value in the PDCCH is equal to '1', or
  * a single PDSCH transmission only on the primary cell where there is not a corresponding PDCCH detected within subframe(s) $n - k$, where $k \in K$ and no PDCCH indicating downlink SPS release (defined in subclause 9.2) within subframe(s) $n - k$, where $k \in K$, or
  * a PDSCH transmission only on the primary cell where there is not a corresponding PDCCH detected within subframe(s) $n - k$, where $k \in K$and an additional PDSCH transmission only on the primary cell indicated by the detection of a corresponding PDCCH in subframe $n - k_{m}$, where $k_{m} \in K$ with the DAI value in the PDCCH equal to '1' (defined in Table 7.3-X) or a PDCCH indicating downlink SPS release (defined in subclause 9.2) in the subframe $n - k_{m}$, where $k_{m} \in K$ with the DAI value in the PDCCH equal to '1',
in which case the UE shall transmit the HARQ-ACK and scheduling request
according to the procedure for PUCCH format 1b with channel selection in TDD.
For TDD when the UE is configured with HARQ-ACK bundling, HARQ-ACK
multiplexing or PUCCH format 1b with channel selection, and when both HARQ-ACK
and SR are transmitted in the same sub-frame, a UE shall transmit the bundled
HARQ-ACK or the multiple HARQ-ACK responses (according to subclause 10.1) on
its assigned HARQ-ACK PUCCH resources for a negative SR transmission. For a
positive SR, the UE shall transmit $b(0),b(1)$ on its assigned SR PUCCH
resource using PUCCH format 1b according to subclause 5.4.1 in [3]. The value
of $b(0),b(1)$ are generated according to Table 7.3-1 from the $N_{\text{SPS}}
+ \sum_{c = 0}^{N_{\text{cells}}^{\text{DL}} - 1}U_{\text{DAI},c}$ HARQ-ACK
responses including ACK in response to PDCCH indicating downlink SPS release
by spatial HARQ-ACK bundling across multiple codewords within each PDSCH
transmission for all serving cells $N_{\text{cells}}^{\text{DL}}$. For TDD UL-
DL configurations 1-6, if $\sum_{c = 0}^{N_{\text{cells}}^{\text{DL}} -
1}U_{\text{DAI},c} > 0$ and $V_{\text{DAI},c}^{\text{DL}} \neq \left(
U_{\text{DAI},c} - 1 \right)\text{mod}4 + 1$ for a serving cell c, the UE
detects that at least one downlink assignment has been missed.
Table 7.3-1: Mapping between multiple HARQ-ACK responses and $b(0),b(1)$
* * *
Number of ACK among multiple ($N_{\text{SPS}} + \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}U_{\text{DAI},c}$) HARQ-ACK responses  
0 or None (UE detect at least one DL assignment is missed) 0, 0 1 1, 1 2 1, 0
3 0, 1 4 1, 1 5 1, 0 6 0, 1 7 1, 1 8 1, 0 9 0, 1
* * *
For TDD when both HARQ-ACK and CSI are configured to be transmitted in the
same sub-frame on the PUCCH, if the UE is configured with HARQ-ACK bundling,
HARQ-ACK multiplexing or PUCCH format 1b with channel selection, and if the UE
receives PDSCH and/or PDCCH indicating downlink SPS release only on the
primary cell within subframe(s) $n - k$, where $k \in K$, a UE shall transmit
the CSI and $b(0),b(1)$ using PUCCH format 2b for normal CP or PUCCH format 2
for extended CP, according to subclause 5.2.3.4 in [4] with
$a_{0}^{''},a_{1}^{''}$ replaced by $b(0),b(1)$. The value of $b(0),b(1)$ are
generated according to Table 7.3-1 from the $N_{\text{SPS}} + \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}U_{\text{DAI},c}$ HARQ-ACK responses
including ACK in response to PDCCH indicating downlink SPS release by spatial
HARQ-ACK bundling across multiple codewords within each PDSCH transmission for
all serving cells $N_{\text{cells}}^{\text{DL}}$. For TDD UL-DL configurations
1-6, if $\sum_{c = 0}^{N_{\text{cells}}^{\text{DL}} - 1}U_{\text{DAI},c} > 0$
and $V_{\text{DAI},c}^{\text{DL}} \neq \left( U_{\text{DAI},c} - 1
\right)\text{mod}4 + 1$ for a serving cell c, the UE detects that at least one
downlink assignment has been missed.
For TDD when both HARQ-ACK and CSI are configured to be transmitted in the
same sub-frame and the UE is configured with PUCCH format 1b with channel
selection and receives at least one PDSCH on the secondary cell within
subframe(s) $n - k$, where $k \in K$, the UE shall drop the CSI and transmit
HARQ-ACK according to subclause 10.1.3.
For TDD when both HARQ-ACK and CSI are configured to be transmitted in the
same sub-frame and a UE configured with PUCCH format 3, if the UE receives
  * a single PDSCH transmission only on the primary cell indicated by the detection of a corresponding PDCCH in subframe $n - k_{m}$, where $k_{m} \in K$, and for TDD UL-DL configurations 1-6 the DAI value in the PDCCH is equal to '1' (defined in Table 7.3-X), or a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - k_{m}$, where $k_{m} \in K$, and for TDD UL-DL configurations 1-6 the DAI value in the PDCCH is equal to '1', or
  * a single PDSCH transmission only on the primary cell where there is not a corresponding PDCCH detected within subframe(s) $n - k$, where $k \in K$ and no PDCCH indicating downlink SPS release (defined in subclause 9.2) within subframe(s) $n - k$, where $k \in K$,
the UE shall transmit the CSI and HARQ-ACK using PUCCH format 2/2a/2b
according to subclause 5.2.3.4 in [4]; otherwise, the UE shall drop the CSI
and transmit the HARQ-ACK according to subclause 10.1.3.
When only a positive SR is transmitted a UE shall use PUCCH Format 1 for the
SR resource as defined in subclause 5.4.1 in [3].
# 8 Physical uplink shared channel related procedures
For FDD and transmission mode 1, there shall be 8 uplink HARQ processes per
serving cell for non-subframe bundling operation, i.e. normal HARQ operation,
and 4 uplink HARQ processes for subframe bundling operation. For FDD and
transmission mode 2, there shall be 16 uplink HARQ processes per serving cell
for non-subframe bundling operation and there are two HARQ processes
associated with a given subframe as described in [8]. The subframe bundling
operation is configured by the parameter _ttiBundling_ provided by higher
layers.
In case higher layers configure the use of subframe bundling for FDD and TDD,
the subframe bundling operation is only applied to UL-SCH, such that four
consecutive uplink subframes are used.
## 8.0 UE procedure for transmitting the physical uplink shared channel
For FDD and normal HARQ operation, the UE shall upon detection on a given
serving cell of a PDCCH with DCI format 0/4 and/or a PHICH transmission in
subframe _n_ intended for the UE, adjust the corresponding PUSCH transmission
in subframe _n+4_ according to the PDCCH and PHICH information.
For normal HARQ operation, if the UE detects a PHICH transmission and if the
most recent PUSCH transmission for the same transport block was using spatial
multiplexing according to subclause 8.0.2 and the UE does not detect a PDCCH
with DCI format 4 in subframe _n_ intended for the UE, the UE shall adjust the
corresponding PUSCH retransmission in the associated subframe according to the
PHICH information, and using the number of transmission layers and precoding
matrix according to the most recent PDCCH, if the number of negatively
acknowledged transport blocks is equal to the number of transport blocks
indicated in the most recent PDCCH associated with the corresponding PUSCH.
For normal HARQ operation, if the UE detects a PHICH transmission and if the
most recent PUSCH transmission for the same transport block was using spatial
multiplexing according to subclause 8.0.2 and the UE does not detect a PDCCH
with DCI format 4 in subframe _n_ intended for the UE, and if the number of
negatively acknowledged transport blocks is not equal to the number of
transport blocks indicated in the most recent PDCCH associated with the
corresponding PUSCH then the UE shall adjust the corresponding PUSCH
retransmission in the associated subframe according to the PHICH information,
using the precoding matrix with codebook index 0 and the number of
transmission layers equal to number of layers corresponding to the negatively
acknowledged transport block from the most recent PDCCH. In this case, the UL
DMRS resources are calculated according to the cyclic shift field for DMRS [3]
in the most recent PDCCH with DCI format 4 associated with the corresponding
PUSCH transmission and number of layers corresponding to the negatively
acknowledged transport block.
If a UE is configured with the carrier indicator field for a given serving
cell, the UE shall use the carrier indicator field value from the detected
PDCCH with uplink DCI format to determine the serving cell for the
corresponding PUSCH transmission.
For FDD and normal HARQ operation, if a PDCCH with CSI request field set to
trigger an aperiodic CSI report, as described in subclause 7.2.1, is detected
by a UE on subframe _n,_ then on subframe _n+4_ UCI is mapped on the
corresponding PUSCH transmission, when simultaneous PUSCH and PUCCH
transmission is not configured for the UE.
For TDD and normal HARQ operation, if a PDCCH with CSI request field set to
trigger an aperiodic CSI report, as described in subclause 7.2.1, is detected
by a UE on subframe _n_ , then on subframe _n+k_ UCI is mapped on the
corresponding PUSCH transmission where _k_ is given by Table 8-2, when
simultaneous PUSCH and PUCCH transmission is not configured for the UE.
For FDD and subframe bundling operation, the UE shall upon detection of a
PDCCH with DCI format 0 in subframe _n_ intended for the UE, and/or a PHICH
transmission in subframe _n-5_ intended for the UE, adjust the corresponding
first PUSCH transmission in the bundle in subframe _n+4_ according to the
PDCCH and PHICH information.
For FDD and TDD, the NDI as signalled on PDCCH, the RV as determined in
subclause 8.6.1, and the TBS as determined in subclause 8.6.2, shall be
delivered to higher layers.
For TDD and transmission mode 1, the number of HARQ processes per serving cell
shall be determined by the DL/UL configuration (Table 4.2-2 of [3]), as
indicated in Table 8-1. For TDD and transmission mode 2, the number of HARQ
processes per serving cell for non-subframe bundling operation shall be twice
the number determined by the DL/UL configuration (Table 4.2-2 of [3]) as
indicated in Table 8-1 and there are two HARQ processes associated with a
given subframe as described in [8].
Table 8-1: Number of synchronous UL HARQ processes for TDD
* * *
TDD UL/DL configuration Number of HARQ processes for normal HARQ operation
Number of HARQ processes for subframe bundling operation 0 7 3 1 4 2 2 2 N/A 3
3 N/A 4 2 N/A 5 1 N/A 6 6 3
* * *
For TDD UL/DL configurations 1-6 and normal HARQ operation, the UE shall upon
detection of a PDCCH with uplink DCI format and/or a PHICH transmission in
subframe _n_ intended for the UE, adjust the corresponding PUSCH transmission
in subframe _n+k_ , with _k_ given in Table 8-2, according to the PDCCH and
PHICH information.
For TDD UL/DL configuration 0 and normal HARQ operation the UE shall upon
detection of a PDCCH with uplink DCI format and/or a PHICH transmission in
subframe _n_ intended for the UE, adjust the corresponding PUSCH transmission
in subframe _n+k_ if the MSB of the UL index in the PDCCH with uplink DCI
format is set to 1 or PHICH is received in subframe _n_ =0 or 5 in the
resource corresponding to , as defined in subclause 9.1.2, with _k_ given in
Table 8-2. If, for TDD UL/DL configuration 0 and normal HARQ operation, the
LSB of the UL index in the DCI format 0/4 is set to 1 in subframe _n_ or a
PHICH is received in subframe _n_ =0 or 5 in the resource corresponding to ,
as defined in subclause 9.1.2, or PHICH is received in subframe _n_ =1 or 6,
the UE shall adjust the corresponding PUSCH transmission in subframe _n+7_.
If, for TDD UL/DL configuration 0, both the MSB and LSB of the UL index in the
PDCCH with uplink DCI format are set in subframe _n_ , the UE shall adjust the
corresponding PUSCH transmission in both subframes _n+ k_ and _n+7_ , with _k_
given in Table 8-2
For TDD UL/DL configurations 1 and 6 and subframe bundling operation, the UE
shall upon detection of a PDCCH with DCI format 0 in subframe _n_ intended for
the UE, and/or a PHICH transmission intended for the UE in subframe _n-l_ with
_l_ given in Table 8-2a, adjust the corresponding first PUSCH transmission in
the bundle in subframe _n+k_ , with _k given in Table 8-2,_ according to the
PDCCH and PHICH information.
For TDD UL/DL configuration 0 and subframe bundling operation, the UE shall
upon detection of a PDCCH with DCI format 0 in subframe _n_ intended for the
UE, and/or a PHICH transmission intended for the UE in subframe _n-l_ with _l_
given in Table 8-2a, adjust the corresponding first PUSCH transmission in the
bundle in subframe _n+k_ , if the MSB of the UL index in the DCI format 0 is
set to 1 or if , as defined in subclause 9.1.2, with _k_ given in Table 8-2,
according to the PDCCH and PHICH information. If, for TDD UL/DL configuration
0 and subframe bundling operation, the LSB of the UL index in the PDCCH with
DCI format 0 is set to 1 in subframe _n_ or if , as defined in subclause
9.1.2, the UE shall adjust the corresponding first PUSCH transmission in the
bundle in subframe _n+7_ , according to the PDCCH and PHICH information.
Table 8-2 _k_ for TDD configurations 0-6
* * *
**TDD UL/DL\** subframe number _n_**  
Configuration**
[]{.underline} **0** **1** **2** **3** **4** **5** **6** **7** **8** **9**
0 4 6 4 6
1 6 4 6 4
2 4 4
3 4 4 4
4 4 4
5 4
6 7 7 7 7 5
* * *
Table 8-2a _l_ for TDD configurations 0, 1 and 6
* * *
**TDD UL/DL\** subframe number _n_**  
Configuration**
[]{.underline} **0** **1** **2** **3** **4** **5** **6** **7** **8** **9**
0 9 6 9 6
1 2 3 2 3
6 5 5 6 6 8
* * *
A UE is semi-statically configured via higher layer signalling to transmit
PUSCH transmissions signalled via PDCCH according to one of two uplink
transmission modes, denoted mode 1 - 2 as defined in Table 8-3.If a UE is
configured by higher layers to decode PDCCHs with the CRC scrambled by the
C-RNTI, the UE shall decode the PDCCH according to the combination defined in
Table 8-3 and transmit the corresponding PUSCH. The scrambling initialization
of this PUSCH corresponding to these PDCCHs and the PUSCH retransmission for
the same transport block is by C-RNTI. Transmission mode 1 is the default
uplink transmission mode for a UE until the UE is assigned an uplink
transmission mode by higher layer signalling.
When a UE configured in transmission mode 2 receives a DCI Format 0 uplink
scheduling grant, it shall assume that the PUSCH transmission is associated
with transport block 1 and that transport block 2 is disabled.
Table 8-3: PDCCH and PUSCH configured by C-RNTI
+----------------+--------------+----------------+----------------+ | Transmission | DCI format | Search Space | Transmission | | mode | | | scheme of | | | | | PUSCH | | | | | corresponding | | | | | to PDCCH | +----------------+--------------+----------------+----------------+ | Mode 1 | DCI format 0 | Common and | Single-antenna | | | | | port, port 10 | | | | UE specific by | (see subclause | | | | C-RNTI | 8.0.1) | +----------------+--------------+----------------+----------------+ | Mode 2 | DCI format 0 | Common and | Single-antenna | | | | | port, port 10 | | | | UE specific by | (see subclause | | | | C-RNTI | 8.0.1) | +----------------+--------------+----------------+----------------+ | | DCI format 4 | UE specific by | Closed-loop | | | | C-RNTI | spatial | | | | | multiplexing | | | | | (see subclause | | | | | 8.0.2) | +----------------+--------------+----------------+----------------+
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the C-RNTI and is also configured to receive random access procedures
initiated by PDCCH orders, the UE shall decode the PDCCH according to the
combination defined in Table 8-4.
Table 8-4: PDCCH configured as PDCCH order to initiate random access procedure
+---------------+-----------------------+ | DCI format | Search Space | +---------------+-----------------------+ | DCI format 1A | Common and | | | | | | UE specific by C-RNTI | +---------------+-----------------------+
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the SPS C-RNTI, the UE shall decode the PDCCH according to the combination
defined in Table 8-5 and transmit the corresponding PUSCH. The scrambling
initialization of this PUSCH corresponding to these PDCCHs and PUSCH
retransmission for the same transport block is by SPS C-RNTI. The scrambling
initialization of initial transmission of this PUSCH without a corresponding
PDCCH and the PUSCH retransmission for the same transport block is by SPS
C-RNTI.
Table 8-5: PDCCH and PUSCH configured by SPS C-RNTI
+----------------+--------------+----------------+----------------+ | Transmission | DCI format | Search Space | Transmission | | mode | | | scheme of | | | | | PUSCH | | | | | corresponding | | | | | to PDCCH | +----------------+--------------+----------------+----------------+ | Mode 1 | DCI format 0 | Common and | Single-antenna | | | | | port, port 10 | | | | UE specific by | (see subclause | | | | C-RNTI | 8.0.1) | +----------------+--------------+----------------+----------------+ | Mode 2 | DCI format 0 | Common and | Single-antenna | | | | | port, port 10 | | | | UE specific by | (see subclause | | | | C-RNTI | 8.0.1) | +----------------+--------------+----------------+----------------+
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the Temporary C-RNTI regardless of whether UE is configured or not
configured to decode PDCCHs with the CRC scrambled by the C-RNTI, the UE shall
decode the PDCCH according to the combination defined in Table 8-6 and
transmit the corresponding PUSCH. The scrambling initialization of PUSCH
corresponding to these PDCCH is by Temporary C-RNTI.
If a Temporary C-RNTI is set by higher layers, the scrambling of PUSCH
corresponding to the Random Access Response Grant in subclause 6.2 and the
PUSCH retransmission for the same transport block is by Temporary C-RNTI.
Else, the scrambling of PUSCH corresponding to the Random Access Response
Grant in subclause 6.2 and the PUSCH retransmission for the same transport
block is by C-RNTI.
Table 8-6: PDCCH configured by Temporary C-RNTI
* * *
DCI format Search Space DCI format 0 Common
* * *
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the TPC-PUCCH-RNTI, the UE shall decode the PDCCH according to the
combination defined in table 8-7. The notation 3/3A implies that the UE shall
receive either DCI format 3 or DCI format 3A depending on the configuration.
Table 8-7: PDCCH configured by TPC-PUCCH-RNTI
* * *
DCI format Search Space DCI format 3/3A Common
* * *
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the TPC-PUSCH-RNTI, the UE shall decode the PDCCH according to the
combination defined in table 8.8. The notation 3/3A implies that the UE shall
receive either DCI format 3 or DCI format 3A depending on the configuration.
Table 8-8: PDCCH configured by TPC-PUSCH-RNTI
* * *
DCI format Search Space DCI format 3/3A Common
* * *
### 8.0.1 Single-antenna port scheme
For the single-antenna port transmission schemes (port 10) of the PUSCH, the
UE transmission on the PUSCH is performed according to subclause 5.3.2A.1 of
[3].
### 8.0.2 Closed-loop spatial multiplexing scheme
For the closed-loop spatial multiplexing transmission scheme of the PUSCH, the
UE transmission on the PUSCH is performed according to the applicable number
of transmission layers as defined in subclause 5.3.2A.2 of [3].
## 8.1 Resource Allocation for PDCCH with uplink DCI Format
Two resource allocation schemes Type 0 and Type 1 are supported for PDCCH with
uplink DCI format.
If the resource allocation type bit is not present in the uplink DCI format,
only resource allocation type 0 is supported.
If the resource allocation type bit is present in the uplink DCI format, the
selected resource allocation type for a decoded PDCCH is indicated by a
resource allocation type bit where type 0 is indicated by 0 value and type 1
is indicated otherwise. The UE shall interpret the resource allocation field
depending on the resource allocation type bit in the uplink PDCCH DCI format
detected.
#### 8.1.1 Uplink Resource allocation type 0
The resource allocation information for uplink resource allocation type 0
indicates to a scheduled UE a set of contiguously allocated virtual resource
block indices denoted by $n_{\text{VRB}}$. A resource allocation field in the
scheduling grant consists of a resource indication value (_RIV_) corresponding
to a starting resource block ($\text{RB}_{\text{START}}$) and a length in
terms of contiguously allocated resource blocks ($L_{\text{CRBs}}$≥ 1). The
resource indication value is defined by
if $(L_{\text{CRBs}} - 1) \leq \left\lfloor
\frac{N_{\text{RB}}^{\text{UL}}}{2} \right\rfloor$ then
else
#### 8.1.2 Uplink Resource allocation type 1
The resource allocation information for uplink resource allocation type 1
indicates to a scheduled UE two sets of resource blocks with each set
including one or more consecutive resource block groups of size _P_ as given
in table 7.1.6.1-1 assuming $N_{\text{RB}}^{\text{UL}}$ as the system
bandwidth. A combinatorial index _r_ consists of $\left\lceil
\text{log}_{2}\left( \begin{pmatrix} \left\lceil
\frac{N_{\text{RB}}^{\text{UL}}}{P} + 1 \right\rceil \ 4 \ \end{pmatrix}
\right) \right\rceil$ bits. The bits from the resource allocation field in the
scheduling grant represent _r_ unless the number of bits in the resource
allocation field in the scheduling grant is
\- smaller than required to fully represent _r_ , in which case the bits in
the resource allocation field in the scheduling grant occupy the LSBs of _r_
and the value of the remaining bits of _r_ shall be assumed to be 0; or
\- larger than required to fully represent _r_ , in which case _r_ occupies
the LSBs of the resource allocation field in the scheduling grant.
The combinatorial index _r_ corresponds to a starting and ending RBG index of
resource block set 1, $s_{0}$and $s_{1} - 1$, and resource block set 2,
$s_{2}$and $s_{3} - 1$ respectively, where _r_ is given by equation defined in
subclause 7.2.1 with _M_ =4 and $N = \left\lceil
\frac{N_{\text{RB}}^{\text{UL}}}{P} \right\rceil + 1$. Subclause 7.2.1 also
defines ordering properties and range of values that $s_{i}$ (RBG indices) map
to. Only a single RBG is allocated for a set at the starting RBG index if the
corresponding ending RBG index equals the starting RBG index.
## 8.2 UE sounding procedure
A UE shall transmit Sounding Reference Symbol (SRS) on per serving cell SRS
resources based on two trigger types:
\- trigger type 0: higher layer signalling
\- trigger type 1: DCI formats 0/4/1A for FDD and TDD and DCI formats 2B/2C
for TDD.
In case both trigger type 0 and trigger type 1 SRS transmissions would occur
in the same subframe in the same serving cell, the UE shall only transmit the
trigger type 1 SRS transmission.
A UE may be configured with SRS parameters for trigger type 0 and trigger type
1 on each serving cell. The following SRS parameters are serving cell specific
and semi-statically configurable by higher layers for trigger type 0 and for
trigger type 1.
  * Transmission comb ${\overline{k}}_{\text{TC}}$, as defined in subclause 5.5.3.2 of [3] for trigger type 0 and each configuration of trigger type 1
  * Starting physical resource block assignment $n_{\text{RRC}}$, as defined in subclause 5.5.3.2 of [3] for trigger type 0 and each configuration of trigger type 1
  * _duration_ : single or indefinite (until disabled), as defined in [11] for trigger type 0
  * _srs-ConfigIndex_ I~SRS~ for SRS periodicity $T_{\text{SRS}}$ and SRS subframe offset $T_{\text{offset}}$, as defined in Table 8.2-1 and Table 8.2-2 for trigger type 0 and SRS periodicity $T_{\text{SRS,1}}$ and SRS subframe offset $T_{\text{offset},1}$, as defined in Table 8.2-4 and Table 8.2-5 trigger type 1
  * SRS bandwidth $B_{\text{SRS}}$, as defined in subclause 5.5.3.2 of [3] for trigger type 0 and each configuration of trigger type 1
  * Frequency hopping bandwidth, $b_{\text{hop}}$, as defined in subclause 5.5.3.2 of [3] for trigger type 0
  * Cyclic shift $n_{\text{SRS}}^{\text{cs}}$, as defined in subclause 5.5.3.1 of [3] for trigger type 0 and each configuration of trigger type 1
  * Number of antenna ports $N_{p}$ for trigger type 0 and each configuration of trigger type 1
For trigger type 1 and DCI format 4 three sets of SRS parameters, _srs-
ConfigApDCI-Format4_ , are configured by higher layer signalling. The 2-bit
SRS request field [4] in DCI format 4 indicates the SRS parameter set given in
Table 8.1-1. For trigger type 1 and DCI format 0, a single set of SRS
parameters, _srs-ConfigApDCI-Format0_ , is configured by higher layer
signalling. For trigger type 1 and DCI formats 1A/2B/2C, a single common set
of SRS parameters, _srs-ConfigApDCI-Format1a2b2c_ , is configured by higher
layer signalling. The SRS request field is 1 bit [4] for DCI formats
0/1A/2B/2C, with a type 1 SRS triggered if the value of the SRS request field
is set to '1'. A 1-bit SRS request field shall be included in DCI formats 0/1A
for frame structure type 1 and 0/1A/2B/2C for frame structure type 2 if the UE
is configured with SRS parameters for DCI formats 0/1A/2B/2C by higher-layer
signalling.
Table 8.1-1: SRS request value for trigger type 1 in DCI format 4
* * *
Value of SRS request field Description '00' No type 1 SRS trigger '01' The
1^st^ SRS parameter set configured by higher layers '10' The 2^nd^ SRS
parameter set configured by higher layers '11' The 3^rd^ SRS parameter set
configured by higher layers
* * *
The serving cell specific SRS transmission bandwidths $C_{\text{SRS}}$ are
configured by higher layers. The allowable values are given in subclause
5.5.3.2 of [3].
The serving cell specific SRS transmission sub-frames are configured by higher
layers. The allowable values are given in subclause 5.5.3.3 of [3].
When antenna selection is enabled for a given serving cell for a UE that
supports transmit antenna selection, the index $a\left( n_{\text{SRS}}
\right)$, of the UE antenna that transmits the SRS at time _n~SRS~_ is given
by
$a\left( n_{\text{SRS}} \right) = n_{\text{SRS}}\text{mod}2$, for both partial
and full sounding bandwidth, and when frequency hopping is disabled (i.e.,
$b_{\text{hop}} \geq B_{\text{SRS}}$),
$a(n_{\text{SRS}}) = \begin{matrix} \left{ \left( n_{\text{SRS}} +
\left\lfloor \frac{n_{\text{SRS}}}{2} \right\rfloor + \beta \cdot \left\lfloor
\frac{n_{\text{SRS}}}{K} \right\rfloor \right)\text{mod}2\text{\ \ when\
}K\text{\ is\ even\ \ } \middle| \right.\ \ \end{matrix}$,$\beta =
\begin{matrix} \left{ 1\text{\ \ \ where\ }K\text{mod}4 = 0 \middle| \right.\
\ \end{matrix}$
when frequency hopping is enabled (i.e., $b_{\text{hop}}  2$ and for FDD are the subframes satisfying $(\text{10}
\cdot n_{f} + k_{\text{SRS}} - T_{\text{offset}})\text{mod}T_{\text{SRS}} =
0$, where for FDD $k_{\text{SRS}} = \left{ 0,1,\text{.}\text{.}\text{.},9
\right}$ is the subframe index within the frame, for TDD $k_{\text{SRS}}$ is
defined in Table 8.2-3. The SRS transmission instances for TDD with
$T_{\text{SRS}} = 2$ are the subframes satisfying $(k_{\text{SRS}} -
T_{\text{offset}})\text{mod}5 = 0$.
Trigger type 1 SRS configuration of a UE in a serving cell for SRS
periodicity,$T_{\text{SRS,1}}$, and SRS subframe offset,$T_{\text{offset},1}$,
is defined in Table 8.2-4 and Table 8.2-5, for FDD and TDD, respectively. The
periodicity $T_{\text{SRS,1}}$ of the SRS transmission is serving cell
specific and is selected from the set {2, 5, 10} ms or subframes. For the SRS
periodicity $T_{\text{SRS,1}}$ of 2 ms in TDD, two SRS resources are
configured in a half frame containing UL subframe(s) of a given serving cell.
A UE configured for type 1 triggered SRS transmission in serving cell _c_ and
not configured with a carrier indicator field shall transmit SRS on serving
cell _c_ upon detection of a positive SRS request in PDCCH scheduling
PUSCH/PDSCH on serving cell _c_.
A UE configured for type 1 triggered SRS transmission in serving cell _c_ and
configured with a carrier indicator field shall transmit SRS on serving cell
_c_ upon detection of a positive SRS request in PDCCH scheduling PUSCH/PDSCH
with the value of carrier indicator field corresponding to serving cell _c_.
A UE configured for type 1 triggered SRS transmission on serving cell _c_ upon
detection of a positive SRS request in subframe _n_ of serving cell _c_ shall
commence SRS transmission in the first subframe satisfying $n + k,k \geq 4$
and
$(\text{10} \cdot n_{f} + k_{\text{SRS}} -
T_{\text{offset},1})\text{mod}T_{\text{SRS,1}} = 0$ for TDD with
$T_{\text{SRS,1}} > 2$ and for FDD,
$(k_{\text{SRS}} - T_{\text{offset},1})\text{mod}5 = 0$ for TDD with
$T_{\text{SRS,1}} = 2$
where for FDD $k_{\text{SRS}} = \left{ 0,1,\text{.}\text{.}\text{.},9 \right}$
is the subframe index within the frame $n_{f}$, for TDD $k_{\text{SRS}}$ is
defined in Table 8.2-3.
A UE configured for type 1 triggered SRS transmission is not expected to
receive type 1 SRS triggering events associated with different values of
trigger type 1 SRS transmission parameters, as configured by higher layer
signalling, for the same subframe and the same serving cell.
A UE shall not transmit SRS whenever SRS and a PUSCH transmission
corresponding to a Random Access Response Grant or a retransmission of the
same transport block as part of the contention based random access procedure
coincide in the same subframe.
Table 8.2-1: UE Specific SRS Periodicity $T_{\text{SRS}}$ and Subframe Offset
Configuration $T_{\text{offset}}$ for trigger type 0, FDD
* * *
SRS Configuration Index I~SRS~ SRS Periodicity $T_{\text{SRS}}$ (ms) SRS
Subframe Offset $T_{\text{offset}}$ 0 -- 1 2 I~SRS~ 2 -- 6 5 I~SRS~ -- 2 7 --
16 10 I~SRS~ -- 7 17 -- 36 20 I~SRS~ -- 17 37 -- 76 40 I~SRS~ -- 37 77 -- 156
80 I~SRS~ -- 77 157 -- 316 160 I~SRS~ -- 157 317 -- 636 320 I~SRS~ -- 317 637
-- 1023 reserved reserved
* * *
Table 8.2-2: UE Specific SRS Periodicity $T_{\text{SRS}}$ and Subframe Offset
Configuration $T_{\text{offset}}$ for trigger type 0, TDD
* * *
SRS Configuration Index I~SRS~ SRS Periodicity $T_{\text{SRS}}$ (ms) SRS
Subframe Offset $T_{\text{offset}}$ 0 2 0, 1 1 2 0, 2 2 2 1, 2 3 2 0, 3 4 2 1,
3 5 2 0, 4 6 2 1, 4 7 2 2, 3 8 2 2, 4 9 2 3, 4 10 -- 14 5 I~SRS~ -- 10 15 --
24 10 I~SRS~ -- 15 25 -- 44 20 I~SRS~ -- 25 45 -- 84 40 I~SRS~ -- 45 85 -- 164
80 I~SRS~ -- 85 165 -- 324 160 I~SRS~ -- 165 325 -- 644 320 I~SRS~ -- 325 645
-- 1023 reserved reserved
* * *
Table 8.2-3: $k_{\text{SRS}}$ for TDD
* * *
                                                       subframe index *n*                                                                                                                   
                                                       0                    1                     2                     3   4   5   6   7                     8                     9       
                                                                            1st symbol of UpPTS   2nd symbol of UpPTS                   1st symbol of UpPTS   2nd symbol of UpPTS
$k_{\text{SRS}}$ in case UpPTS length of 2 symbols 0 1 2 3 4 5 6 7 8 9
$k_{\text{SRS}}$ in case UpPTS length of 1 symbol 1 2 3 4 6 7 8 9
* * *
Table 8.2-4: UE Specific SRS Periodicity $T_{\text{SRS,1}}$ and Subframe
Offset Configuration $T_{\text{offset},1}$ for trigger type 1, FDD
* * *
SRS Configuration Index I~SRS~ SRS Periodicity $T_{\text{SRS,1}}$ (ms) SRS
Subframe Offset $T_{\text{offset},1}$ 0 -- 1 2 I~SRS~ 2 -- 6 5 I~SRS~ -- 2 7
-- 16 10 I~SRS~ -- 7 17 -- 31 reserved reserved
* * *
Table 8.2-5: UE Specific SRS Periodicity $T_{\text{SRS,1}}$ and Subframe
Offset Configuration $T_{\text{offset},1}$ for trigger type 1, TDD
* * *
SRS Configuration Index I~SRS~ SRS Periodicity $T_{\text{SRS,1}}$ (ms) SRS
Subframe Offset $T_{\text{offset},1}$ 0 reserved reserved 1 2 0, 2 2 2 1, 2 3
2 0, 3 4 2 1, 3 5 2 0, 4 6 2 1, 4 7 2 2, 3 8 2 2, 4 9 2 3, 4 10 -- 14 5 I~SRS~
-- 10 15 -- 24 10 I~SRS~ -- 15 25 -- 31 reserved reserved
* * *
## 8.3 UE HARQ-ACK procedure
For Frame Structure type 1, an HARQ-ACK received on the PHICH assigned to a UE
in subframe _i_ is associated with the PUSCH transmission in subframe _i_ -4.
For Frame Structure type 2 UL/DL configuration 1-6, an HARQ-ACK received on
the PHICH assigned to a UE in subframe _i_ is associated with the PUSCH
transmission in the subframe _i-k_ as indicated by the following table 8.3-1.
For Frame Structure type 2 UL/DL configuration 0, an HARQ-ACK received on the
PHICH in the resource corresponding to , as defined in subclause 9.1.2,
assigned to a UE in subframe _i_ is associated with the PUSCH transmission in
the subframe _i-k_ as indicated by the following table 8.3-1. For Frame
Structure type 2 UL/DL configuration 0, an HARQ-ACK received on the PHICH in
the resource corresponding to , as defined in subclause 9.1.2, assigned to a
UE in subframe _i_ is associated with the PUSCH transmission in the subframe
_i-_ 6.
Table 8.3-1 _k_ for TDD configurations 0-6
* * *
**TDD UL/DL\** subframe number _i_**  
Configuration**
[]{.underline} **0** **1** **2** **3** **4** **5** **6** **7** **8** **9**
0 7 4 7 4
1 4 6 4 6
2 6 6
3 6 6 6
4 6 6
5 6
6 6 4 7 4 6
* * *
The physical layer in the UE shall deliver indications to the higher layers as
follows:
For downlink subframe _i_ , if a transport block was transmitted in the
associated PUSCH subframe then:
  * if ACK is decoded on the PHICH corresponding to that transport block in subframe _i_ , or if that transport block is disabled by PDCCH received in downlink subframe _i_ , ACK for that transport block shall be delivered to the higher layers;
  * else NACK for that transport block shall be delivered to the higher layers.
## 8.4 UE PUSCH Hopping procedure
The UE shall perform PUSCH frequency hopping if the single bit frequency
hopping (FH) field in a corresponding PDCCH with DCI format 0 is set to 1 and
the uplink resource block assignment is type 0 otherwise no PUSCH frequency
hopping is performed.
A UE performing PUSCH frequency hopping shall determine its PUSCH resource
allocation (RA) for the first slot of a subframe (_S1_) including the lowest
index PRB ($n_{\text{PRB}}^{S1}(n)$) in subframe _n_ from the resource
allocation field in the latest PDCCH with DCI format 0 for the same transport
block. If there is no PDCCH for the same transport block, the UE shall
determine its hopping type based on
  * the hopping information in the most recent semi-persistent scheduling assignment PDCCH, when the initial PUSCH for the same transport block is semi-persistently scheduled or
  * the random access response grant for the same transport block, when the PUSCH is initiated by the random access response grant.
The resource allocation field in DCI format 0 excludes either 1 or 2 bits used
for hopping information as indicated by Table 8.4-1 below where the number of
PUSCH resource blocks is defined as
For type 1 and type 2 PUSCH hopping,
${\overset{\sim}{N}}_{\text{RB}}^{\text{HO}} = N_{\text{RB}}^{\text{HO}} + 1$
if $N_{\text{RB}}^{\text{HO}}$ is an odd number where
$N_{\text{RB}}^{\text{HO}}$ defined in [3].
${\overset{\sim}{N}}_{\text{RB}}^{\text{HO}} = N_{\text{RB}}^{\text{HO}}$ in
other cases. The size of the resource allocation field in DCI format 0 after
excluding either 1 or 2 bits shall be $y = \left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{UL}}(N_{\text{RB}}^{\text{UL}} +
1\frac{)}{2}) \right\rceil - N_{\text{UL}_{\text{hop}}}$, where _N~UL_hop~_ =
1 or 2 bits. The number of contiguous RBs that can be assigned to a type-1
hopping user is limited to $\left\lfloor
\frac{2^{y}}{N_{\text{RB}}^{\text{UL}}} \right\rfloor$. The number of
contiguous RBs that can be assigned to a type-2 hopping user is limited to
min($\left\lfloor \frac{2^{y}}{N_{\text{RB}}^{\text{UL}}}
\right\rfloor$,$\left\lfloor
\frac{N_{\text{RB}}^{\text{PUSCH}}}{N_{\text{sb}}} \right\rfloor$), where the
number of sub-bands $N_{\text{sb}}$ is given by higher layers.
A UE performing PUSCH frequency hopping shall use one of two possible PUSCH
frequency hopping types based on the hopping information. PUSCH hopping type 1
is described in subclause 8.4.1 and type 2 is described in subclause 8.4.2.
Table 8.4-1: Number of Hopping Bits N~UL_hop~ vs. System Bandwidth
+---------------------------------------+--------------------------------+ | System BW $N_{\text{RB}}^{\text{UL}}$ | #Hopping bits for 2nd slot RA | | | | | | (_N~UL_hop~_) | +---------------------------------------+--------------------------------+ | 6-49 | 1 | +---------------------------------------+--------------------------------+ | 50-110 | 2 | +---------------------------------------+--------------------------------+
The parameter _Hopping-mode_ provided by higher layers determines if PUSCH
frequency hopping is "inter-subframe" or "intra and inter-subframe".
### 8.4.1 Type 1 PUSCH Hopping
For PUSCH hopping type 1 the hopping bit or bits indicated in Table 8.4-1
determine${\overset{\sim}{n}}_{\text{PRB}}(i)$ as defined in Table 8.4-2. The
lowest index PRB () of the 1^st^ slot RA in subframe _i_ is defined as , where
, and $\text{RB}_{\text{START}}$is obtained from the uplink scheduling grant
as in subclause 8.4 and subclause 8.1.
The lowest index PRB ($n_{\text{PRB}}(i)$) of the 2^nd^ slot RA in subframe
_i_ is defined as _._
The set of physical resource blocks to be used for PUSCH transmission are
$L_{\text{CRBs}}$contiguously allocated resource blocks from PRB index for the
1^st^ slot, and from PRB index $n_{\text{PRB}}(i)$ for the 2^nd^ slot,
respectively, where $L_{\text{CRBs}}$is obtained from the uplink scheduling
grant as in subclause 8.4 and subclause 8.1.
If the _Hopping-mode_ is \"inter-subframe\", the 1^st^ slot RA is applied to
even CURRENT_TX_NB, and the 2^nd^ slot RA is applied to odd CURRENT_TX_NB,
where CURRENT_TX_NB is defined in [8].
### 8.4.2 Type 2 PUSCH Hopping
In PUSCH hopping type 2 the set of physical resource blocks to be used for
transmission in slot $n_{s}$ is given by the scheduling grant together with a
predefined pattern according to [3] subclause 5.3.4. If the system frame
number is not acquired by the UE yet, the UE shall not transmit PUSCH with
type-2 hopping and for TDD, where is defined in [3].
Table 8.4-2: PDCCH DCI Format 0 Hopping Bit Definition
* * *
System BW $N_{\text{RB}}^{\text{UL}}$ Number of Hopping bits **Information in
hopping bits**  
6 -- 49 1 0 $\left( \left\lfloor \frac{N_{\text{RB}}^{\text{PUSCH}}}{2}
\right\rfloor + {\overset{\sim}{n}}_{\text{PRB}}^{S1}(i)
\right)\text{mod}N_{\text{RB}}^{\text{PUSCH}}$, 1 Type 2 PUSCH Hopping 50 --
110 2 00  
01  
10  
11 Type 2 PUSCH Hopping
* * *
## 8.5 UE Reference Symbol procedure
If UL sequence-group hopping or sequence hopping is configured in a serving
cell, it applies to all reference symbols (SRS, PUSCH and PUCCH RS). If
disabling of the sequence-group hopping and sequence hopping is configured for
the UE in the serving cell through the higher-layer parameter _Disable-
sequence-group-hopping_ , the sequence-group hopping and sequence hopping for
PUSCH RS are disabled.
## 8.6 Modulation order, redundancy version and transport block size
determination
To determine the modulation order, redundancy version and transport block size
for the physical uplink shared channel, the UE shall first
  * read the "modulation and coding scheme and redundancy version" field ($I_{\text{MCS}}$), and
  * check the "CSI request" bit field, and
  * compute the total number of allocated PRBs ($N_{\text{PRB}}$) based on the procedure defined in subclause 8.1, and
  * compute the number of coded symbols for control information.
### 8.6.1 Modulation order and redundancy version determination
For$0 \leq I_{\text{MCS}} \leq \text{28}$, the modulation order ($Q_{m}$) is
determined as follows:
  * If the UE is capable of supporting 64QAM in PUSCH and has not been configured by higher layers to transmit only QPSK and 16QAM, the modulation order is given by $Q_{m}^{'}$in Table 8.6.1-1.
  * If the UE is not capable of supporting 64QAM in PUSCH or has been configured by higher layers to transmit only QPSK and 16QAM, $Q_{m}^{'}$is first read from Table 8.6.1-1. The modulation order is set to $Q_{m} = \text{min}(4,Q_{m}^{'})$**.**
  * If the parameter _ttiBundling_ provided by higher layers is set to _TRUE_ , then the resource allocation size is restricted to $N_{\text{PRB}} \leq 3$ and the modulation order is set to $Q_{m} = 2$.
For$\text{29} \leq I_{\text{MCS}} \leq \text{31}$ the modulation order
($Q_{m}$) is determined as follows:
  * if DCI format 0 is used and $I_{\text{MCS}} = \text{29}$ or, if DCI > format 4 is used and only 1 TB is enabled and > $I_{\text{MCS}} = \text{29}$for the enabled TB and the signalled > number of transmission layers is 1, and if
    * the "CSI request" bit field is 1 bit and the bit is set to trigger an aperiodic report and, $N_{\text{PRB}} \leq 4$ or,
    * the "CSI request" bit field is 2 bits and is triggering an aperiodic CSI report for one serving cell according to Table 7.2.1-1A, and, $N_{\text{PRB}} \leq 4$ or,
    * the "CSI request" bit field is 2 bits and is triggering an aperiodic CSI report for more than one serving cell according to Table 7.2.1-1A and, $N_{\text{PRB}} \leq \text{20}$,
then the modulation order is set to $Q_{m} = 2$**.**
  * Otherwise, the modulation order shall be determined from the DCI > transported in the latest PDCCH with DCI format 0/4 for the same > transport block using $0 \leq I_{\text{MCS}} \leq \text{28}$. If > there is no PDCCH with DCI format 0/4 for the same transport block > using $0 \leq I_{\text{MCS}} \leq \text{28}$, the modulation order > shall be determined from
    * the most recent semi-persistent scheduling assignment PDCCH, when the initial PUSCH for the same transport block is semi-persistently scheduled, or,
    * the random access response grant for the same transport block, when the PUSCH is initiated by the random access response grant.
The UE shall use$I_{\text{MCS}}$and Table 8.6.1-1 to determine the redundancy
version (_rv~idx~_) to use in the physical uplink shared channel.
Table 8.6.1-1: Modulation, TBS index and redundancy version table for PUSCH
* * *
**MCS Index\** Modulation Order\ **TBS Index\** Redundancy Version\
**$I_{\text{MCS}}$** $Q_{m}^{'}$ **$I_{\text{TBS}}$**_rv~idx~_
0 2 0 0
1 2 1 0
2 2 2 0
3 2 3 0
4 2 4 0
5 2 5 0
6 2 6 0
7 2 7 0
8 2 8 0
9 2 9 0
10 2 10 0
11 4 10 0
12 4 11 0
13 4 12 0
14 4 13 0
15 4 14 0
16 4 15 0
17 4 16 0
18 4 17 0
19 4 18 0
20 4 19 0
21 6 19 0
22 6 20 0
23 6 21 0
24 6 22 0
25 6 23 0
26 6 24 0
27 6 25 0
28 6 26 0
29 reserved 1
30 2
31 3
* * *
### 8.6.2 Transport block size determination
For$0 \leq I_{\text{MCS}} \leq \text{28}$, the UE shall first determine the
TBS index ($I_{\text{TBS}}$) using$I_{\text{MCS}}$and Table 8.6.1-1 except if
the transport block is disabled in DCI format 4 as specified below. For a
transport block that is not mapped to two-layer spatial multiplexing, the TBS
is determined by the procedure in subclause 7.1.7.2.1. For a transport block
that is mapped to two-layer spatial multiplexing, the TBS is determined by the
procedure in subclause 7.17.2.2.
For$\text{29} \leq I_{\text{MCS}} \leq \text{31}$,
  * if DCI format 0 is used and $I_{\text{MCS}} = \text{29}$ or, if DCI > format 4 is used and only 1 TB is enabled and > $I_{\text{MCS}} = \text{29}$ for the enabled TB and the number of > transmission layers is 1, and if
    * the "CSI request" bit field is 1 bit and is set to trigger an aperiodic CSI report and $N_{\text{PRB}} \leq 4$, or
    * the "CSI request" bit field is 2 bits and is triggering an aperiodic CSI report for one serving cell according to Table 7.2.1-1A, and , $N_{\text{PRB}} \leq 4$ or,
    * the "CSI request" bit field is 2 bits and is triggering aperiodic CSI report for more than one serving cell according to Table 7.2.1-1A and, $N_{\text{PRB}} \leq \text{20}$,
then there is no transport block for the UL-SCH and only the control
information feedback for the current PUSCH reporting mode is transmitted by
the UE.
  * Otherwise, the transport block size shall be determined from the > initial PDCCH for the same transport block using > $0 \leq I_{\text{MCS}} \leq \text{28}$. If there is no initial > PDCCH with an uplink DCI format for the same transport block using > $0 \leq I_{\text{MCS}} \leq \text{28}$, the transport block size > shall be determined from
    * the most recent semi-persistent scheduling assignment PDCCH, when the initial PUSCH for the same transport block is semi-persistently scheduled, or,
    * the random access response grant for the same transport block, when the PUSCH is initiated by the random access response grant.
In DCI format 4 a transport block is disabled if either the combination of
$I_{\text{MCS}} = 0$ and $N_{\text{PRB}} > 1$ or the combination of
$I_{\text{MCS}} = \text{28}$ and $N_{\text{PRB}} = 1$ is signalled, otherwise
the transport block is enabled.
### 8.6.3 Control information MCS offset determination
Offset values are defined for single codeword PUSCH transmission and multiple
codeword PUSCH transmission. Single codeword PUSCH transmission offsets
$\beta_{\text{offset}}^{\text{HARQ} - \text{ACK}}$,
$\beta_{\text{offset}}^{\text{RI}}$ and $\beta_{\text{offset}}^{\text{CQI}}$
shall be configured to values according to Table 8.6.3-1,2,3 with the higher
layer signalled indexes $I_{\text{offset}}^{\text{HARQ} - \text{ACK}}$,
$I_{\text{offset}}^{\text{RI}}$, and $I_{\text{offset}}^{\text{CQI}}$,
respectively. Multiple codeword PUSCH transmission offsets
$\beta_{\text{offset}}^{\text{HARQ} - \text{ACK}}$,
$\beta_{\text{offset}}^{\text{RI}}$ and $\beta_{\text{offset}}^{\text{CQI}}$
shall be configured to values according to Table 8.6.3-1,2,3 with the higher
layer signalled indexes $I_{\text{offset},\text{MC}}^{\text{HARQ} -
\text{ACK}}$, $I_{\text{offset},\text{MC}}^{\text{RI}}$ and
$I_{\text{offset},\text{MC}}^{\text{CQI}}$, respectively.
Table 8.6.3-1: Mapping of HARQ-ACK offset values and the index signalled by
higher layers
* * *
$I_{\text{offset}}^{\text{HARQ} - \text{ACK}}$ or
$I_{\text{offset},\text{MC}}^{\text{HARQ} - \text{ACK}}$  
0 2.000 1 2.500 2 3.125 3 4.000 4 5.000 5 6.250 6 8.000 7 10.000 8 12.625 9
15.875 10 20.000 11 31.000 12 50.000 13 80.000 14 126.000 15 1.0
* * *
Table 8.6.3-2: Mapping of RI offset values and the index signalled by higher
layers
* * *
$I_{\text{offset}}^{\text{RI}}$ or $I_{\text{offset},\text{MC}}^{\text{RI}}$  
0 1.250 1 1.625 2 2.000 3 2.500 4 3.125 5 4.000 6 5.000 7 6.250 8 8.000 9
10.000 10 12.625 11 15.875 12 20.000 13 reserved 14 reserved 15 reserved
* * *
Table 8.6.3-3: Mapping of CQI offset values and the index signalled by higher
layers
* * *
$I_{\text{offset}}^{\text{CQI}}$ or $I_{\text{offset},\text{MC}}^{\text{CQI}}$  
0 reserved 1 reserved 2 1.125 3 1.250 4 1.375 5 1.625 6 1.750 7 2.000 8 2.250
9 2.500 10 2.875 11 3.125 12 3.500 13 4.000 14 5.000 15 6.250
* * *
## 8.7 UE Transmit Antenna Selection
UE transmit antenna selection is configured by higher layers via parameter
_ue-TransmitAntennaSelection_.
A UE configured with transmit antenna selection for a serving cell is not
expected to
  * be configured with more than one antenna port for any uplink physical channel or signal for any configured serving cell, or
  * be configured with trigger type 1 SRS transmission on any configured serving cell, or
  * be configured with simultaneous PUCCH and PUSCH transmission, or
  * be configured with demodulation reference signal for PUSCH with OCC for any configured serving cell (see [3], subclause 5.5.2.1.1), or
  * receive DCI Format 0 indicating uplink resource allocation type 1 for any serving cell.
If UE transmit antenna selection is disabled or not supported by the UE, the
UE shall transmit from UE port 0.
If closed-loop UE transmit antenna selection is enabled by higher layers the
UE shall perform transmit antenna selection in response to the most recent
command received via DCI Format 0 in subclause 5.3.3.2 of [4]. If a UE is
configured with more than one serving cell, the UE may assume the same
transmit antenna port value is indicated in each DCI format 0 PDCCH grant in a
given subframe.
If open-loop UE transmit antenna selection is enabled by higher layers, the
transmit antenna to be selected by the UE is not specified.
# 9 Physical downlink control channel procedures
## 9.1 UE procedure for determining physical downlink control channel
assignment
### 9.1.1 PDCCH Assignment Procedure
The control region of each serving cell consists of a set of CCEs, numbered
from 0 to $N_{\text{CCE},k} - 1$ according to subclause 6.8.1 in [3], where
$N_{\text{CCE},k}$ is the total number of CCEs in the control region of
subframe $k$. The UE shall monitor a set of PDCCH candidates on one or more
activated serving cells as configured by higher layer signalling for control
information in every non-DRX subframe, where monitoring implies attempting to
decode each of the PDCCHs in the set according to all the monitored DCI
formats.
The set of PDCCH candidates to monitor are defined in terms of search spaces,
where a search space $S_{k}^{(L)}$ at aggregation level $L \in \left{ 1,2,4,8
\right}$ is defined by a set of PDCCH candidates. For each serving cell on
which PDCCH is monitored, the CCEs corresponding to PDCCH candidate _m_ of the
search space $S_{k}^{(L)}$ are given by
where is defined below, . For the common search space $m^{'} = m$. For the UE
specific search space, for the serving cell on which PDCCH is monitored, if
the monitoring UE is configured with carrier indicator field then $m^{'} = m +
M^{(L)} \cdot n_{\text{CI}}$ where $n_{\text{CI}}$ is the carrier indicator
field value, else if the monitoring UE is not configured with carrier
indicator field then $m^{'} = m$, where . $M^{(L)}$ is the number of PDCCH
candidates to monitor in the given search space.
Note that the carrier indicator field value is the same as _ServCellIndex_
given in [11].
The UE shall monitor one common search space at each of the aggregation levels
4 and 8 on the primary cell.
A UE not configured with a carrier indicator field shall monitor one UE-
specific search space at each of the aggregation levels 1, 2, 4, 8 on each
activated serving cell. A UE configured with a carrier indicator field shall
monitor one or more UE-specific search spaces at each of the aggregation
levels 1, 2, 4, 8 on one or more activated serving cells as configured by
higher layer signalling.
The common and UE-specific search spaces on the primary cell may overlap.
A UE configured with the carrier indicator field associated with monitoring
PDCCH on serving cell _c_ shall monitor PDCCH configured with carrier
indicator field and with CRC scrambled by C-RNTI in the UE specific search
space of serving cell _c_.
A UE configured with the carrier indicator field associated with monitoring
PDCCH on the primary cell shall monitor PDCCH configured with carrier
indicator field and with CRC scrambled by SPS C-RNTI in the UE specific search
space of the primary cell.
The UE shall monitor the common search space for PDCCH without carrier
indicator field.
For the serving cell on which PDCCH is monitored, if the UE is not configured
with a carrier indicator field, it shall monitor the UE specific search space
for PDCCH without carrier indicator field, if the UE is configured with a
carrier indicator field it shall monitor the UE specific search space for
PDCCH with carrier indicator field.
A UE is not expected to monitor the PDCCH of a secondary cell if it is
configured to monitor PDCCH with carrier indicator field corresponding to that
secondary cell in another serving cell. For the serving cell on which PDCCH is
monitored, the UE shall monitor PDCCH candidates at least for the same serving
cell.
A UE configured to monitor PDCCH candidates with CRC scrambled by C-RNTI or
SPS C-RNTI with a common payload size and with the same first CCE index
$n_{\text{CCE}}$ (as described in subclause 10.1) but with different sets of
DCI information fields as defined in [4] in the
  * common search space
  * UE specific search space
on the primary cell shall assume that for the PDCCH candidates with CRC
scrambled by C-RNTI or SPS C-RNTI,
  * if the UE is configured with the carrier indicator field associated with monitoring the PDCCH on the primary cell, only the PDCCH in the common search space is transmitted by the primary cell;
  * otherwise, only the PDCCH in the UE specific search space is transmitted by the primary cell.
A UE configured to monitor PDCCH candidates in a given serving cell with a
given DCI format size with CIF, and CRC scrambled by C- RNTI, where the PDCCH
candidates may have one or more possible values of CIF for the given DCI
format size, shall assume that a PDCCH candidate with the given DCI format
size may be transmitted in the given serving cell in any UE specific search
space corresponding to any of the possible values of CIF for the given DCI
format size.
The aggregation levels defining the search spaces are listed in Table 9.1.1-1.
The DCI formats that the UE shall monitor depend on the configured
transmission mode per each serving cell as defined in subclause 7.1.
Table 9.1.1-1: PDCCH candidates monitored by a UE.
* * *
Search space $S_{k}^{(L)}$ Number of PDCCH candidates $M^{(L)}$  
Type Aggregation level $L$ Size [in CCEs]  
UE-specific 1 6 6 2 12 6 4 8 2 8 16 2 Common 4 16 4 8 16 2
* * *
For the common search spaces, is set to 0 for the two aggregation levels $L =
4$ and $L = 8$.
For the UE-specific search space $S_{k}^{(L)}$ at aggregation level$L$, the
variable is defined by
where $Y_{- 1} = n_{\text{RNTI}} \neq 0$, $A = \text{39827}$, $D =
\text{65537}$ and , is the slot number within a radio frame. The RNTI value
used for $n_{\text{RNTI}}$ is defined in subclause 7.1 in downlink and clause
8 in uplink.
### 9.1.2 PHICH Assignment Procedure
For PUSCH transmissions scheduled from serving cell $c$in subframe _n_ , a UE
shall determine the corresponding PHICH resource of serving cell $c$ in
subframe , where is always 4 for FDD and is given in table 9.1.2-1 for TDD.
For subframe bundling operation, the corresponding PHICH resource is
associated with the last subframe in the bundle.
Table 9.1.2-1: for TDD
* * *
**TDD UL/DL\** subframe index _n_**  
Configuration**
[]{.underline} **0** **1** **2** **3** **4** **5** **6** **7** **8** **9**
0 4 7 6 4 7 6
1 4 6 4 6
2 6 6
3 6 6 6
4 6 6
5 6
6 4 6 6 4 7
* * *
The PHICH resource is identified by the index pair$\
(n_{\text{PHICH}}^{\text{group}},n_{\text{PHICH}}^{\text{seq}})\ $where
$n_{\text{PHICH}}^{\text{group}}$is the PHICH group number and
$n_{\text{PHICH}}^{\text{seq}}$is the orthogonal sequence index within the
group as defined by:
where
  * $n_{\text{DMRS}}$is mapped from the cyclic shift for DMRS field (according to Table 9.1.2-2) in the most recent PDCCH with uplink DCI format [4] for the transport block(s) associated with the corresponding PUSCH transmission. $n_{\text{DMRS}}$shall be set to zero, if there is no PDCCH with uplink DCI format for the same transport block, and
    * if the initial PUSCH for the same transport block is semi-persistently scheduled, or
    * if the initial PUSCH for the same transport block is scheduled by the random access response grant .
  * $N_{\text{SF}}^{\text{PHICH}}$is the spreading factor size used for PHICH modulation as described in subclause 6.9.1 in [3].
  * $I_{\text{PRB}_{\text{RA}}} = \left{ \begin{matrix} I_{\text{PRB}_{\text{RA}}}^{\text{lowest}_{\text{index}}} & \begin{matrix} \text{for\ the\ first\ TB\ of\ a\ PUSCH\ with\ associated\ PDCCH}\text{\ or\ for\ the\ case\ of\ } \ \text{no\ associated\ PDCCH\ }\text{when\ the\ number\ of\ negatively\ acknowledged} \ \text{TBs\ is\ not\ equal\ to\ the\ number\ of\ TBs\ indicated\ in\ the\ most\ recent} \ \text{PDCCH\ }\text{associated\ with\ the\ corresponding\ PUSCH} \ \ \end{matrix} \ I_{\text{PRB}_{\text{RA}}}^{\text{lowest}_{\text{index}}} + 1 & \text{for\ a\ second\ TB\ of\ a\ PUSCH\ with\ associated\ PDCCH} \ \end{matrix} \right.\ $ where $I_{\text{PRB}_{\text{RA}}}^{\text{lowest}_{\text{index}}}$ is the lowest PRB index in the first slot of the corresponding PUSCH transmission
  * $N_{\text{PHICH}}^{\text{group}}$ is the number of PHICH groups configured by higher layers as described in subclause 6.9 of [3],
  * 
Table 9.1.2-2: Mapping between $n_{\text{DMRS}}$ and the cyclic shift for DMRS
field in PDCCH with uplink DCI format in [4]
* * *
Cyclic Shift for DMRS Field in PDCCH with uplink DCI format in [4]  
000 0 001 1 010 2 011 3 100 4 101 5 110 6 111 7
* * *
### 9.1.3 Control Format Indicator assignment procedure
PHICH duration is signalled by higher layers according to Table 6.9.3-1 in
[3]. The duration signalled puts a lower limit on the size of the control
region determined from the control format indicator (CFI). When
$N_{\text{RB}}^{\text{DL}} > \text{10}$, if extended PHICH duration is
indicated by higher layers then the UE shall assume that CFI is equal to PHICH
duration.
## 9.2 PDCCH validation for semi-persistent scheduling
A UE shall validate a Semi-Persistent Scheduling assignment PDCCH only if all
the following conditions are met:
> \- the CRC parity bits obtained for the PDCCH payload are scrambled with the
> Semi-Persistent Scheduling C-RNTI
>
> \- the new data indicator field is set to '0'. In case of DCI formats 2, 2A,
> 2B and 2C, the new data indicator field refers to the one for the enabled
> transport block.
Validation is achieved if all the fields for the respective used DCI format
are set according to Table 9.2-1 or Table 9.2-1A.
If validation is achieved, the UE shall consider the received DCI information
accordingly as a valid semi-persistent activation or release.
If validation is not achieved, the received DCI format shall be considered by
the UE as having been received with a non-matching CRC.
Table 9.2-1: Special fields for Semi-Persistent Scheduling Activation PDCCH
Validation
+----------------+----------------+----------------+----------------+ | | DCI format 0 | DCI format | DCI format | | | | 1/1A | 2/2A/2B/2C | +----------------+----------------+----------------+----------------+ | TPC command | set to '00' | N/A | N/A | | for scheduled | | | | | PUSCH | | | | +----------------+----------------+----------------+----------------+ | Cyclic shift | set to '000' | N/A | N/A | | DM RS | | | | +----------------+----------------+----------------+----------------+ | Modulation and | MSB is set to | N/A | N/A | | coding scheme | '0' | | | | and redundancy | | | | | version | | | | +----------------+----------------+----------------+----------------+ | HARQ process | N/A | FDD: set to | FDD: set to | | number | | '000' | '000' | | | | | | | | | TDD: set to | TDD: set to | | | | '0000' | '0000' | +----------------+----------------+----------------+----------------+ | Modulation and | N/A | MSB is set to | For the | | coding scheme | | '0' | enabled | | | | | transport | | | | | block:\ | | | | | MSB is set to | | | | | '0' | +----------------+----------------+----------------+----------------+ | Redundancy | N/A | set to '00' | For the | | version | | | enabled | | | | | transport | | | | | block:\ | | | | | set to '00' | +----------------+----------------+----------------+----------------+
Table 9.2-1A: Special fields for Semi-Persistent Scheduling Release PDCCH
Validation
+-----------------------------+-----------------+--------------------+ | | DCI format 0 | DCI format 1A | +-----------------------------+-----------------+--------------------+ | TPC command for scheduled | set to '00' | N/A | | PUSCH | | | +-----------------------------+-----------------+--------------------+ | Cyclic shift DM RS | set to '000' | N/A | +-----------------------------+-----------------+--------------------+ | Modulation and coding | set to '11111' | N/A | | scheme and redundancy | | | | version | | | +-----------------------------+-----------------+--------------------+ | Resource block assignment | Set to all '1's | N/A | | and hopping resource | | | | allocation | | | +-----------------------------+-----------------+--------------------+ | HARQ process number | N/A | FDD: set to '000' | | | | | | | | TDD: set to '0000' | +-----------------------------+-----------------+--------------------+ | Modulation and coding | N/A | set to '11111' | | scheme | | | +-----------------------------+-----------------+--------------------+ | Redundancy version | N/A | set to '00' | +-----------------------------+-----------------+--------------------+ | Resource block assignment | N/A | Set to all '1's | +-----------------------------+-----------------+--------------------+
For the case that the DCI format indicates a semi-persistent downlink
scheduling activation, the TPC command for PUCCH field shall be used as an
index to one of the four PUCCH resource values configured by higher layers,
with the mapping defined in Table 9.2-2
Table 9.2-2: PUCCH Resource value for Downlink Semi-Persistent Scheduling
* * *
Value of 'TPC command for PUCCH'  
'00' The first PUCCH resource value configured by the higher layers '01' The
second PUCCH resource value configured by the higher layers '10' The third
PUCCH resource value configured by the higher layers '11' The fourth PUCCH
resource value configured by the higher layers
* * *
## 9.3 PDCCH control information procedure
A UE shall discard the PDCCH if consistent control information is not
detected.
# 10 Physical uplink control channel procedures
## 10.1 UE procedure for determining physical uplink control channel
assignment
If the UE is configured for a single serving cell and is not configured for
simultaneous PUSCH and PUCCH transmissions, then in subframe $n$ uplink
control information (UCI) shall be transmitted
  * on PUCCH using format 1/1a/1b/3 or 2/2a/2b if the UE is not transmitting on PUSCH
  * on PUSCH if the UE is transmitting on PUSCH in subframe $n$ unless the PUSCH transmission corresponds to a Random Access Response Grant or a retransmission of the same transport block as part of the contention based random access procedure, in which case UCI is not transmitted
If the UE is configured for a single serving cell and simultaneous PUSCH and
PUCCH transmission, then in subframe$n$ UCI shall be transmitted
  * on PUCCH using format 1/1a/1b/3 if the UCI consists only of HARQ-ACK and/or SR
  * on PUCCH using format 2 if the UCI consists only of periodic CSI
  * on PUCCH using format 2/2a/2b if the UCI consists of periodic CSI and HARQ-ACK and if the UE is not transmitting PUSCH
  * on PUCCH and PUSCH if the UCI consists of HARQ-ACK/HARQ-ACK+SR/positive SR and periodic/aperiodic CSI in which case the HARQ-ACK/HARQ-ACK+SR/positive SR is transmitted on PUCCH using format 1/1a/1b/3 and the periodic/aperiodic CSI transmitted on PUSCH unless the PUSCH transmission corresponds to a Random Access Response Grant or a retransmission of the same transport block as part of the contention based random access procedure, in which case periodic/aperiodic CSI is not transmitted
If the UE is configured with more than one serving cell and is not configured
for simultaneous PUSCH and PUCCH transmission, then in subframe $n$ UCI shall
be transmitted
  * on PUCCH using format 1/1a/1b/3 or 2/2a/2b if the UE is not transmitting PUSCH
  * on PUSCH of the serving cell given in subclause 7.2.1 if the UCI consists of aperiodic CSI or aperiodic CSI and HARQ-ACK
  * on primary cell PUSCH if the UCI consists of periodic CSI and/or HARQ-ACK and if the UE is transmitting on the primary cell PUSCH in subframe $n$ unless the primary cell PUSCH transmission corresponds to a Random Access Response Grant or a retransmission of the same transport block as part of the contention based random access procedure, in which case UCI is not transmitted
  * on PUSCH of the secondary cell with smallest _SCellIndex_ if the UCI consists of periodic CSI and/or HARQ-ACK and if the UE is not transmitting PUSCH on primary cell but is transmitting PUSCH on at least one secondary cell
If the UE is configured with more than one serving cell and simultaneous PUSCH
and PUCCH transmission, then in subframe $n$ UCI shall be transmitted
  * on PUCCH using format 1/1a/1b/3 if the UCI consists only of HARQ-ACK and/or SR
  * on PUCCH using format 2 if the UCI consists only of periodic CSI
  * as described in subclause 10.1.1, if the UCI consists of periodic CSI and HARQ-ACK and if the UE is not transmitting on PUSCH
  * on PUCCH and primary cell PUSCH if the UCI consists of HARQ-ACK and periodic CSI and the UE is transmitting PUSCH on the primary cell, in which case the HARQ-ACK is transmitted on PUCCH using format 1a/1b/3 and the periodic CSI is transmitted on PUSCH unless the primary cell PUSCH transmission corresponds to a Random Access Response Grant or a retransmission of the same transport block as part of the contention based random access procedure, in which case periodic CSI is not transmitted
  * on PUCCH and PUSCH of the secondary cell with the smallest _SCellIndex_ if the UCI consists of HARQ-ACK and periodic CSI and if the UE is not transmitting PUSCH on primary cell but is transmitting PUSCH on at least one secondary cell, in which case, the HARQ-ACK is transmitted on PUCCH using format 1a/1b/3 and the periodic CSI is transmitted on PUSCH
  * on PUCCH and PUSCH if the UCI consists of HARQ-ACK/HARQ-ACK+SR/positive SR and aperiodic CSI in which case the HARQ-ACK/HARQ-ACK+SR/positive SR is transmitted on PUCCH using format 1/1a/1b/3 and the aperiodic CSI is transmitted on PUSCH of the serving cell given in subclause 7.2.1
If the UE is configured with more than one serving cell, then reporting
prioritization and collision handling of periodic CSI reports of a certain
PUCCH reporting type is given in subclause 7.2.2.
A UE transmits PUCCH only on the primary cell.
A UE is configured by higher layers to transmit PUCCH on one antenna port $(p
= p_{0})$ or two antenna ports $(p \in \lbrack p_{0},p_{1}\rbrack)$.
For FDD with two configured serving cells and PUCCH format 1b with channel
selection or for FDD with two or more configured serving cells and PUCCH
format 3, $n_{\text{HARQ}} = \sum_{c = 0}^{N_{\text{cells}}^{\text{DL}} -
1}N_{c}^{\text{received}}$ where $N_{\text{cells}}^{\text{DL}}$ is the number
of configured cells and $N_{c}^{\text{received}}$ is the number of transport
blocks or the SPS release PDCCH, if any, received in subframe $n - 4$ in
serving cell $c$.
For TDD with two configured serving cells and PUCCH format 1b with channel
selection and a subframe _n_ with _M = 1_ , or for TDD UL-DL configuration 0
and PUCCH format 3, $n_{\text{HARQ}} = \sum_{c =
0}^{N_{\text{cells}}^{\text{DL}} - 1}{\sum_{k \in K}^{}N_{k,\
c}^{\text{received}}}$, where $N_{k,\ c}^{\text{received}}$is the number of
transport blocks or the SPS release PDCCH, if any, received in subframe $n -
k$ in serving cell $c$, where $k \in K$, and _M_ is the number of elements in
_K_.
For TDD UL-DL configurations 1-6 and PUCCH format 3, or for TDD with two
configured serving cells and PUCCH format 1b with channel selection and _M_ =
2, $n_{\text{HARQ}} = \sum_{c = 0}^{N_{\text{cells}}^{\text{DL}} - 1}\left(
\left( \left( V_{\text{DAI},\ c}^{\text{DL}} - U_{\text{DAI},\ c}
\right)\text{mod}4 \right) \cdot n_{c}^{\text{ACK}} + \sum_{k \in K}^{}N_{k,\
c}^{\text{received}} \right)$ where $V_{\text{DAI,}\ c}^{\text{DL}}$ is the
$V_{\text{DAI}}^{\text{DL}}$ in serving cell $c$, $U_{\text{DAI,}\ c}$ is the
$U_{\text{DAI}}$ in serving cell $c$, and $n_{c}^{\text{AC}K}$ is the number
of HARQ-ACK bits corresponding to the configured DL transmission mode on
serving cell $c$. In case spatial HARQ-ACK bundling is applied,
$n_{c}^{\text{AC}K} = 1$ and $N_{k,\ c}^{\text{received}}$ is the number of
PDCCH or PDSCH without a corresponding PDCCH received in subframe $n - k$ and
serving cell$c$, where $k \in K$ and _M_ is the number of elements in _K_. In
case spatial HARQ-ACK bundling is not applied, $N_{k,\ c}^{\text{received}}$is
the number of transport blocks received or the SPS release PDCCH received in
subframe $n - k$ in serving cell $c$, where $k \in K$ and _M_ is the number of
elements in _K_. $V_{\text{DAI,}\ c}^{\text{DL}}$=0 if no transport block or
SPS release PDCCH is detected in subframe(s) $n - k$ in serving cell $c$,
where $k \in K$.
For TDD with two configured serving cells and PUCCH format 1b with channel
selection and _M_ = 3 or 4, if UE receives PDSCH or PDCCH indicating downlink
SPS release only on one serving cell within subframes $n - k$,where $k \in
K$;otherwise .
Throughout the following sections, subframes are numbered in monotonically
increasing order; if the last subframe of a radio frame is denoted as $k$, the
first subframe of the next radio frame is denoted as $k + 1$.
### 10.1.1 PUCCH format information
Using the PUCCH formats defined in subclauses 5.4.1 and 5.4.2 in [3], the
following combinations of UCI on PUCCH are supported:
  * Format 1a for 1-bit HARQ-ACK or in case of FDD for 1-bit HARQ-ACK with positive SR
```{=html}
``` \- Format 1b for 2-bit HARQ-ACK or for 2-bit HARQ-ACK with positive SR
  * Format 1b for up to 4-bit HARQ-ACK with channel selection when the UE is configured with more than one serving cell or, in the case of TDD, when the UE is configured with a single serving cell
  * Format 1 for positive SR
  * Format 2 for a CSI report when not multiplexed with HARQ-ACK
  * Format 2a for a CSI report multiplexed with 1-bit HARQ-ACK for normal cyclic prefix
  * Format 2b for a CSI report multiplexed with 2-bit HARQ-ACK for normal cyclic prefix
  * Format 2 for a CSI report multiplexed with HARQ-ACK for extended cyclic prefix
  * Format 3 for up to 10-bit HARQ-ACK for FDD and for up to 20-bit HARQ-ACK for TDD
  * Format 3 for up to 11-bit corresponding to 10-bit HARQ-ACK and 1-bit positive/negative SR for FDD and for up to 21-bit corresponding to 20-bit HARQ-ACK and 1-bit positive/negative SR for TDD.
For a UE configured with PUCCH format 3 and HARQ-ACK transmission on PUSCH or
using PUCCH format 3, or for a UE configured with two serving cells and PUCCH
format 1b with channel selection and HARQ-ACK transmission on PUSCH, or for UE
configured with one serving cell and PUCCH format 1b with channel selection
according to Tables 10.1.3-5, 10.1.3-6, 10.1.3-7 and HARQ-ACK transmission on
PUSCH.
  * If the configured downlink transmission mode for a serving cell supports up to 2 transport blocks and only one transport block is received in a subframe, the UE shall generate a NACK for the other transport block if spatial HARQ-ACK bundling is not applied.
  * If neither PDSCH nor PDCCH indicating downlink SPS release is detected in a subframe for a serving cell, the UE shall generate two NACKs when the configured downlink transmission mode supports up to 2 transport blocks and the UE shall generate a single NACK when the configured downlink transmission mode supports a single transport block.
The scrambling initialization of PUCCH format 2, 2a, 2b and 3 is by C-RNTI.
For a UE that is configured with a single serving cell and is not configured
with PUCCH format 3, in case of collision between a periodic CSI report and an
HARQ-ACK in a same subframe without PUSCH, the periodic CSI report is
multiplexed with HARQ-ACK on PUCCH if the parameter
_simultaneousAckNackAndCQI_ provided by higher layers is set _TRUE_ ,
otherwise the CSI is dropped.
For TDD and for a UE that is configured with a single serving cell and with
PUCCH format 3, in case of collision between a periodic CSI report and an
HARQ-ACK in a same subframe without PUSCH, if the parameter
_simultaneousAckNackAndCQI_ provided by higher layers is set _TRUE_ , the
periodic CSI report is multiplexed with HARQ-ACK or dropped as described in
subclause 7.3, otherwise the CSI is dropped.
For FDD and for a UE that is configured with more than one serving cell, in
case of collision between a periodic CSI report and an HARQ-ACK in a same
subframe without PUSCH, the periodic CSI report is multiplexed with HARQ-ACK
on PUCCH if the parameter _simultaneousAckNackAndCQI_ provided by higher
layers is set TRUE and if the HARQ-ACK corresponds to a PDSCH transmission or
PDCCH indicating downlink SPS release only on the primary cell, otherwise CSI
is dropped.
For TDD and for a UE that is configured with more than one serving cell, in
case of collision between a periodic CSI report and an HARQ-ACK in a same
subframe without PUSCH, if the parameter _simultaneousAckNackAndCQI_ provided
by higher layers is set _TRUE_ , the periodic CSI report is multiplexed with
HARQ-ACK or dropped as described in subclause 7.3, otherwise the CSI is
dropped.In case of collision between a periodic CSI report and an HARQ-ACK in
a same subframe with PUSCH, the periodic CSI is multiplexed with the HARQ-ACK
in the PUSCH transmission in that subframe if the UE is not configured by
higher layers simultaneous PUCCH and PUSCH transmissions. Otherwise, if the UE
is configured by higher layers simultaneous PUCCH and PUSCH transmissions, the
HARQ-ACK is transmitted in the PUCCH and the periodic CSI in transmitted in
the PUSCH.
### 10.1.2 FDD HARQ-ACK feedback procedures
For FDD and for a UE transmitting HARQ-ACK using PUCCH format 1b with channel
selection or PUCCH format 3, the UE shall determine the number of HARQ-ACK
bits, $O$, based on the number of configured serving cells and the downlink
transmission modes configured for each serving cell. The UE shall use two
HARQ-ACK bits for a serving cell configured with a downlink transmission mode
that support up to two transport blocks; and one HARQ-ACK bit otherwise.
A UE that supports aggregating at most 2 serving cells with frame structure
type 1 shall use PUCCH format 1b with channel selection for transmission of
HARQ-ACK when configured with more than one serving cell with frame structure
type 1.
A UE that supports aggregating more than 2 serving cells with frame structure
type 1 is configured by higher layers to use either PUCCH format 1b with
channel selection or PUCCH format 3 for transmission of HARQ-ACK when
configured with more than one serving cell with frame structure type 1.
The FDD HARQ-ACK feedback procedure for one configured serving cell is given
in subclause 10.1.2.1 and procedures for more than one configured serving cell
are given in subclause 10.1.2.2.
#### 10.1.2.1 FDD HARQ-ACK procedure for one configured serving cell
HARQ-ACK transmission on two antenna ports $(p \in \lbrack
p_{0},p_{1}\rbrack)$ is supported for PUCCH format 1a/1b.
For FDD and one configured serving cell, the UE shall use PUCCH resource
$n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ for transmission of HARQ-ACK in
subframe $n$ for $\overset{\sim}{p}$ mapped to antenna port _p_ for PUCCH
format 1a/1b [3], where
  * for a PDSCH transmission indicated by the detection of a corresponding PDCCH in subframe $n - 4$ , or for a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - 4$ , the UE shall use $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})} = n_{\text{CCE}} + N_{\text{PUCCH}}^{(1)}$ for antenna port $p_{0}$, where $n_{\text{CCE}}$ is the number of the first CCE (i.e. lowest CCE index used to construct the PDCCH) used for transmission of the corresponding DCI assignment and $N_{\text{PUCCH}}^{(1)}$ is configured by higher layers. For two antenna port transmission the PUCCH resource for antenna port $p_{1}$ is given by $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{1})} = n_{\text{CCE}} + 1 + N_{\text{PUCCH}}^{(1)}$.
  * for a PDSCH transmission on the primary cell where there is not a corresponding PDCCH detected in subframe $n - 4$, the value of $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ is determined according to higher layer configuration and Table 9.2-2. For a UE configured for two antenna port transmission, a PUCCH resource value in Table 9.2-2 maps to two PUCCH resources with the first PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$ and the second PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{1})}$ for antenna port $p_{1}$, otherwise, the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$.
#### 10.1.2.2 FDD HARQ-ACK procedures for more than one configured serving
cell
The FDD HARQ-ACK feedback procedures for more than one configured serving cell
are either based on a PUCCH format 1b with channel selection HARQ-ACK
procedure as described in subclause 10.1.2.2.1 or a PUCCH format 3 HARQ-ACK
procedure as described in subclause 10.1.2.2.2.
HARQ-ACK transmission on two antenna ports $(p \in \lbrack
p_{0},p_{1}\rbrack)$ is supported for PUCCH format 3.
##### 10.1.2.2.1 PUCCH format 1b with channel selection HARQ-ACK procedure
For FDD with two configured serving cells and PUCCH format 1b with channel
selection, the UE shall transmit $b(0)b(1)$ on PUCCH resource
$n_{\text{PUCCH}}^{(1)}$ selected from $A$ PUCCH resources,
$n_{\text{PUCCH,}j}^{(1)}$where $0 \leq j \leq A - 1$ and$A \in \left{ 2,3,4
\right}$, according to Table 10.1.2.2.1-3, Table 10.1.2.2.1-4, Table
10.1.2.2.1-5 in subframe $n$ using PUCCH format 1b. HARQ-ACK(_j_) denotes the
ACK/NACK/DTX response for a transport block or SPS release PDCCH associated
with serving cell $c$, where the transport block and serving cell for HARQ-
ACK(_j_) and $A$ PUCCH resources are given by Table 10.1.2.2.1-1.
A UE configured with a transmission mode that supports up to two transport
blocks on serving cell, $c$, shall use the same HARQ-ACK response for both the
transport blocks in response to a PDSCH transmission with a single transport
block or a PDCCH indicating downlink SPS release associated with the serving
cell $c$.
Table 10.1.2.2.1-1: Mapping of Transport Block and Serving Cell to HARQ-
ACK(_j_) for PUCCH format 1b HARQ-ACK channel selection
* * *
A _HARQ-ACK(j)_  
HARQ-ACK(0) HARQ-ACK(1) HARQ-ACK(2) HARQ-ACK(3) 2 TB1 Primary cell TB1
Secondary cell NA NA 3 TB1 Serving cell1 TB2 Serving cell1 TB1 Serving cell2
NA 4 TB1 Primary cell TB2 Primary cell TB1 Secondary cell TB2 Secondary cell
* * *
The UE shall determine the $A$ PUCCH resources, $n_{\text{PUCCH,}j}^{(1)}$
associated with HARQ-ACK(_j_) where $0 \leq j \leq A - 1$ in Table
10.1.2.2.1-1, according to
  * for a PDSCH transmission indicated by the detection of a corresponding PDCCH in subframe $n - 4$ on the primary cell, or for a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - 4$ on the primary cell, the PUCCH resource is $n_{\text{PUCCH,j}}^{(1)} = n_{\text{CCE}} + N_{\text{PUCCH}}^{(1)}$, and for transmission mode that supports up to two transport blocks, the PUCCH resource $n_{\text{PUCCH,}j + 1}^{(1)}$ is given by $n_{\text{PUCCH,}j + 1}^{(1)} = n_{\text{CCE}} + 1 + N_{\text{PUCCH}}^{(1)}$ where $n_{\text{CCE}}$ is the number of the first CCE used for transmission of the corresponding PDCCH and $N_{\text{PUCCH}}^{(1)}$ is configured by higher layers.
  * for a PDSCH transmission on the primary cell where there is not a corresponding PDCCH detected in subframe $n - 4$, the value of $n_{\text{PUCCH,}j}^{(1)}$ is determined according to higher layer configuration and Table 9.2-2. For transmission mode that supports up to two transport blocks, the PUCCH resource $n_{\text{PUCCH,}j + 1}^{(1)}$ is given by $n_{\text{PUCCH,}j + 1}^{(1)} = n_{\text{PUCCH,}j}^{(1)} + 1$
  * for a PDSCH transmission indicated by the detection of a corresponding PDCCH in subframe $n - 4$ on the secondary cell, the value of $n_{\text{PUCCH,}j}^{(1)}$, and the value of $n_{\text{PUCCH,}j + 1}^{(1)}$ for the transmission mode that supports up to two transport blocks is determined according to higher layer configuration and Table 10.1.2.2.1-2. The TPC field in the DCI format of the corresponding PDCCH shall be used to determine the PUCCH resource values from one of the four resource values configured by higher layers, with the mapping defined in Table 10.1.2.2.1-2. For a UE configured for a transmission mode that supports up to two transport blocks a PUCCH resource value in Table 10.1.2.2.1-2 maps to two PUCCH resources $(n_{\text{PUCCH,}j}^{(1)},n_{\text{PUCCH,}j + 1}^{(1)})$, otherwise, the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH,}j}^{(1)}$.
Table 10.1.2.2.1-2: PUCCH Resource Value for HARQ-ACK Resource for PUCCH
* * *
Value of 'TPC command for PUCCH' $n_{\text{PUCCH,}j}^{(1)}$ or
$(n_{\text{PUCCH,}j}^{(1)},n_{\text{PUCCH,}j + 1}^{(1)})$ '00' The 1st PUCCH
resource value configured by the higher layers '01' The 2^nd^ PUCCH resource
value configured by the higher layers '10' The 3^rd^ PUCCH resource value
configured by the higher layers '11' The 4^th^ PUCCH resource value configured
by the higher layers Note: $(n_{\text{PUCCH,}j}^{(1)},n_{\text{PUCCH,}j +
1}^{(1)})$ are determined from the first and second PUCCH resource lists
configured by _n1PUCCH-AN-CS-List-r10_ in [11], respectively.
* * *
Table 10.1.2.2.1-3: Transmission of Format 1b HARQ-ACK channel selection for
$A = 2$
* * *
HARQ-ACK(0) HARQ-ACK(1)  
ACK ACK 1,1 ACK NACK/DTX 1,1 NACK/DTX ACK 0,0 NACK NACK/DTX 0,0 DTX NACK/DTX
No Transmission
* * *
Table 10.1.2.2.1-4: Transmission of Format 1b HARQ-ACK channel selection for
$A = 3$
* * *
HARQ-ACK(0) HARQ-ACK(1) HARQ-ACK(2)  
ACK ACK ACK 1,1 ACK NACK/DTX ACK 1,0 NACK/DTX ACK ACK 0,1 NACK/DTX NACK/DTX
ACK 1,1 ACK ACK NACK/DTX 1,1 ACK NACK/DTX NACK/DTX 1,0 NACK/DTX ACK NACK/DTX
0,1 NACK/DTX NACK/DTX NACK 0,0 NACK NACK/DTX DTX 0,0 NACK/DTX NACK DTX 0,0 DTX
DTX DTX No Transmission
* * *
Table 10.1.2.2.1-5: Transmission of Format 1b HARQ-ACK channel selection for
$A = 4$
* * *
HARQ-ACK(0) HARQ-ACK(1) HARQ-ACK(2) HARQ-ACK(3)  
ACK ACK ACK ACK 1,1 ACK NACK/DTX ACK ACK 0,1 NACK/DTX ACK ACK ACK 0,1 NACK/DTX
NACK/DTX ACK ACK 1,1 ACK ACK ACK NACK/DTX 1,0 ACK NACK/DTX ACK NACK/DTX 0,0
NACK/DTX ACK ACK NACK/DTX 0,0 NACK/DTX NACK/DTX ACK NACK/DTX 1,0 ACK ACK
NACK/DTX ACK 1,1 ACK NACK/DTX NACK/DTX ACK 1,0 NACK/DTX ACK NACK/DTX ACK 0,1
NACK/DTX NACK/DTX NACK/DTX ACK 0,0 ACK ACK NACK/DTX NACK/DTX 1,1 ACK NACK/DTX
NACK/DTX NACK/DTX 1,0 NACK/DTX ACK NACK/DTX NACK/DTX 0,1 NACK/DTX NACK
NACK/DTX NACK/DTX 0,0 NACK NACK/DTX NACK/DTX NACK/DTX 0,0 DTX DTX NACK/DTX
NACK/DTX No Transmission
* * *
##### 10.1.2.2.2 PUCCH format 3 HARQ-ACK procedure
For FDD with PUCCH format 3, the UE shall use PUCCH resource
$n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ or
$n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ for transmission of HARQ-ACK in
subframe $n$ for $\overset{\sim}{p}$ mapped to antenna port _p_ where
  * for a PDSCH transmission only on the primary cell indicated by the detection of a corresponding PDCCH in subframe $n - 4$, or for a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - 4$ on the primary cell, the UE shall use PUCCH format 1a/1b and PUCCH resource $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ with $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})} = n_{\text{CCE}} + N_{\text{PUCCH}}^{(1)}$ for antenna port $p_{0}$, where $n_{\text{CCE}}$ is the number of the first CCE (i.e. lowest CCE index used to construct the PDCCH) used for transmission of the corresponding PDCCH and $N_{\text{PUCCH}}^{(1)}$ is configured by higher layers. When two antenna port transmission is configured for PUCCH format 1a/1b, the PUCCH resource for antenna port $p_{1}$ is given by $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{1})} = n_{\text{CCE}} + 1 + N_{\text{PUCCH}}^{(1)}$.
  * for a PDSCH transmission only on the primary cell where there is not a corresponding PDCCH detected in subframe $n - 4$, the UE shall use PUCCH format 1a/1b and PUCCH resource $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ where the value of $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ is determined according to higher layer configuration and Table 9.2-2. For a UE configured for two antenna port transmission for PUCCH format 1a/1b, a PUCCH resource value in Table 9.2-2 maps to two PUCCH resources with the first PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$ and the second PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{1})}$ for antenna port $p_{1}$, otherwise, the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH}}^{(1,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$.
  * for a PDSCH transmission on the secondary cell indicated by the detection of a corresponding PDCCH in subframe $n - 4$, the UE shall use PUCCH format 3 and PUCCH resource $n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ where the value of $n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ is determined according to higher layer configuration and Table 10.1.2.2.2-1. The TPC field in the DCI format of the corresponding PDCCH shall be used to determine the PUCCH resource values from one of the four resource values configured by higher layers, with the mapping defined in Table 10.1.2.2.2-1. For a UE configured for two antenna port transmission for PUCCH format 3, a PUCCH resource value in Table 10.1.2.2.2-1 maps to two PUCCH resources with the first PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$ and the second PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{1})}$ for antenna port $p_{1}$, otherwise, the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$. A UE shall assume that the same HARQ-ACK PUCCH resource value is transmitted in each DCI format of the corresponding secondary cell PDCCH assignments in a given subframe.
Table 10.1.2.2.2-1: PUCCH Resource Value for HARQ-ACK Resource for PUCCH
* * *
Value of 'TPC command for PUCCH'  
'00' The 1st PUCCH resource value configured by the higher layers '01' The
2^nd^ PUCCH resource value configured by the higher layers '10' The 3^rd^
PUCCH resource value configured by the higher layers '11' The 4^th^ PUCCH
resource value configured by the higher layers
* * *
### 10.1.3 TDD HARQ-ACK feedback procedures
For TDD and a UE that does not support aggregating more than one serving cell
with frame structure type 2, two HARQ-ACK feedback modes are supported by
higher layer configuration.
  * HARQ-ACK bundling and
  * HARQ-ACK multiplexing
For TDD UL-DL configuration 5 and a UE that does not support aggregating more
than one serving cell with frame structure type 2, only HARQ-ACK bundling is
supported.
A UE that supports aggregating more than one serving cell with frame structure
type 2 is configured by higher layers to use either PUCCH format 1b with
channel selection or PUCCH format 3 for transmission of HARQ-ACK when
configured with more than one serving cell with frame structure type 2.
A UE that supports aggregating more than one serving cell with frame structure
type 2 is configured by higher layers to use HARQ-ACK bundling, PUCCH format
1b with channel selection according to the set of Tables 10.1.3-2/3/4 or
according to the set of Tables 10.1.3-5/6/7, or PUCCH format 3 for
transmission of HARQ-ACK when configured with one serving cell with frame
structure type 2.
PUCCH format 1b with channel selection according to the set of Tables
10.1.3-2/3/4 or according to the set of Tables 10.1.3-5/6/7 is not supported
for TDD UL-DL configuration 5.
TDD HARQ-ACK bundling is performed per codeword across $M$ multiple DL
subframes associated with a single UL subframe _n_ , where $M$ is the number
of elements in the set $K$ defined in Table 10.1.3.1-1, by a logical AND
operation of all the individual PDSCH transmission (with and without
corresponding PDCCH) HARQ-ACKs and ACK in response to PDCCH indicating
downlink SPS release. For one configured serving cell the bundled 1 or 2 HARQ-
ACK bits are transmitted using PUCCH format 1a or PUCCH format 1b,
respectively.
For TDD HARQ-ACK multiplexing and a subframe _n_ with $M > 1$, where $M$ is
the number of elements in the set $K$ defined in Table 10.1.3.1-1, spatial
HARQ-ACK bundling across multiple codewords within a DL subframe is performed
by a logical AND operation of all the corresponding individual HARQ-ACKs.
PUCCH format 1b with channel selection is used in case of one configured
serving cell. For TDD HARQ-ACK multiplexing and a subframe _n_ with $M = 1$,
spatial HARQ-ACK bundling across multiple codewords within a DL subframe is
not performed, 1 or 2 HARQ-ACK bits are transmitted using PUCCH format 1a or
PUCCH format 1b, respectively for one configured serving cell.
In the case of TDD and more than one configured serving cell with PUCCH format
1b with channel selection and more than 4 HARQ-ACK bits for $M$ multiple DL
subframes associated with a single UL subframe _n_ , where $M$ is the number
of elements in the set $K$ defined in Table 10.1.3.1-1 and for the configured
serving cells, spatial HARQ-ACK bundling across multiple codewords within a DL
subframe for all configured cells is performed and the bundled HARQ-ACK bits
for each configured serving cell is transmitted using PUCCH format 1b with
channel selection. For TDD and more than one configured serving cell with
PUCCH format 1b with channel selection and up to 4 HARQ-ACK bits for$M$
multiple DL subframes associated with a single UL subframe _n_ , where $M$ is
the number of elements in the set $K$ defined in Table 10.1.3.1-1 and for the
configured serving cells, spatial HARQ-ACK bundling is not performed and the
HARQ-ACK bits are transmitted using PUCCH format 1b with channel selection.
In the case of TDD and more than one configured serving cell with PUCCH format
3 and more than 20 HARQ-ACK bits for $M$ multiple DL subframes associated with
a single UL subframe _n_ , where $M$ is the number of elements in the set $K$
defined in Table 10.1.3.1-1 and for the configured serving cells, spatial
HARQ-ACK bundling across multiple codewords within a DL subframe is performed
for each serving cell by a logical AND operation of all of the corresponding
individual HARQ-ACKs and PUCCH format 3 is used. For TDD and more than one
configured serving cell with PUCCH format 3 and up to 20 HARQ-ACK bits for $M$
multiple DL subframes associated with a single UL subframe _n_ , where $M$ is
the number of elements in the set $K$ defined in Table 10.1.3.1-1 and for the
configured serving cells, spatial HARQ-ACK bundling is not performed and the
HARQ-ACK bits are transmitted using PUCCH format 3.
For TDD with PUCCH format 3, a UE shall determine the number of HARQ-ACK bits,
$O$, associated with an UL subframe _n_ based on the number of configured
serving cells, the downlink transmission modes configured for each serving
cell and $M$ which is the number of elements in the set $K$ defined in Table
10.1.3.1-1 according to $O = \sum_{c =
1}^{N_{\text{cells}}^{\text{DL}}}O_{c}^{\text{ACK}}$ where
$N_{\text{cells}}^{\text{DL}}$ is the number of configured cells, and
$O_{c}^{\text{ACK}}$is the number of HARQ-bits for the for the _c_ -th serving
cell defined in subclause 7.3.
TDD HARQ-ACK feedback procedures for one configured serving cell are given in
subclause 10.1.3.1 and procedures for more than one configured serving cell
are given in subclause 10.1.3.2.
#### 10.1.3.1 TDD HARQ-ACK procedure for one configured serving cell
HARQ-ACK transmission on two antenna ports $(p \in \lbrack
p_{0},p_{1}\rbrack)$ is supported for PUCCH format 1a/1b with TDD HARQ-ACK
bundling feedback mode and for PUCCH format 3.
The TDD HARQ-ACK procedure for a UE configured with PUCCH format 3 is as
described in subclause 10.1.3.2.2 when the UE receives PDSCH and/or SPS
release PDCCH only on the primary cell.
For TDD HARQ-ACK bundling or TDD HARQ-ACK multiplexing for one configured
serving cell and a subframe _n_ with $M = 1$ where $M$ is the number of
elements in the set $K$ defined in Table 10.1.3.1-1, the UE shall use PUCCH
resource $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ for transmission of HARQ-
ACK in subframe $n$ for $\overset{\sim}{p}$ mapped to antenna port _p_ for
PUCCH format 1a/1b, where
  * If there is PDSCH transmission indicated by the detection of corresponding PDCCH or there is PDCCH indicating downlink SPS release within subframe(s) $n - k$, where $k \in K$ and $K$ _(defined in Table 10.1.3.1-1) is a set of M elements depending on the subframe n_ and the UL-DL configuration (defined in Table 4.2-2 in [3]), the UE first selects a $c$ value out of {0, 1, 2, 3} which makes $N_{c} \leq n_{\text{CCE}}  1$ and one
configured serving cell, where $M$ is the number of elements in the set $K$
defined in Table 10.1.3.1-1, denote $n_{\text{PUCCH,}i}^{(1)}$ as the PUCCH
resource derived from sub-frame and HARQ-ACK(i) as the ACK/NACK/DTX response
from sub-frame , where (defined in Table 10.1.3.1-1) and $0 \leq i \leq M -
1$.
  * For a PDSCH transmission indicated by the detection of corresponding PDCCH or a PDCCH indicating downlink SPS release in sub-frame where , the PUCCH resource $n_{\text{PUCCH,}i}^{(1)} = (M - i - 1) \cdot N_{c} + i \cdot N_{c + 1} + n_{\text{CCE,}i} + N_{\text{PUCCH}}^{(1)}$, where $c$ is selected from {0, 1, 2, 3} such that $N_{c} \leq n_{\text{CCE,}i}  2$ and two configured serving cells, where $M$ is the
number of elements in the set $K$ defined in Table 10.1.3.1-1, denotes
{width="0.5694444444444444in" height="0.2777777777777778in"} $0 \leq i \leq
3$as the PUCCH resource derived from the transmissions in $M$DL sub-frames
associated with the UL subframe _n_ . $n_{\text{PUCCH,0}}^{(1)}$ and
$n_{\text{PUCCH,1}}^{(1)}$are associated with the PDSCH transmission(s) or a
PDCCH indicating downlink SPS release (defined in subclause 9.2) on the
primary cell and $n_{\text{PUCCH,2}}^{(1)}$ and $n_{\text{PUCCH,3}}^{(1)}$are
associated with the PDSCH transmission(s) on the secondary cell.
For Primary cell:
  * If there is a PDSCH transmission on the primary cell without a corresponding PDCCH detected within the subframe(s) $n - k$, where $k \in K$,
    * the value of $n_{\text{PUCCH,0}}^{(1)}$ is determined according to higher layer configuration and Table 9.2-2.
    * for a PDSCH transmission on the primary cell indicated by the detection of a corresponding PDCCH in subframe $n - k_{m}$, where with the DAI value in the PDCCH equal to '1' (defined in Table 7.3-X) or a PDCCH indicating downlink SPS release (defined in subclause 9.2) in subframe $n - k_{m}$, where with the DAI value in the PDCCH equal to '1', the PUCCH resource where $c$ is selected from {0, 1, 2, 3} such that $N_{c} \leq n_{\text{CCE,}m}  1$, and
\- for a PDSCH transmission only on the primary cell where there is not a
corresponding PDCCH detected within subframe(s) $n - k$, where $k \in K$, and
\- for an additional PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe $n - k_{m}$, where $k_{m}
\in K$ with the DAI value in the PDCCH equal to '1' (defined in Table 7.3-X),
or
\- for an additional PDCCH indicating downlink SPS release (defined in
subclause 9.2) in subframe $n - k_{m}$, where $k_{m} \in K$ with the DAI value
in the PDCCH equal to '1',
\- the UE shall transmit in subframe $n$ using PUCCH format 1b on PUCCH
resource selected from PUCCH resources where , according to Table 10.1.3.2-1
and Table 10.1.3.2-2 for $A = 2$ and $A = 3$, respectively. For a UE
configured with a transmission mode that supports up to two transport blocks
on the primary cell, $A = 3$; otherwise, $A = 2$.
\- The PUCCH resource $n_{\text{PUCCH,0}}^{(1)}$ is determined according to
higher layer configuration and Table 9.2-2. The PUCCH resource
$n_{\text{PUCCH,1}}^{(1)}$ is determined as , where $N_{\text{PUCCH}}^{(1)}$
is configured by higher layers, $c$ is selected from {0, 1, 2, 3} such that
$N_{c} \leq n_{\text{CCE,}m}  \- for the first transport block of the PDSCH indicated by the detection of
> a corresponding PDCCH for which the value of the DAI field in the
> corresponding DCI format is equal to '1', or
>
> \- for the PDCCH indicating downlink SPS release for which the value of the
> DAI field in the corresponding DCI format is equal to '1'.
\- HARQ-ACK(2) is the ACK/NACK/DTX response for the second transport block of
the PDSCH indicated by the detection of a corresponding PDCCH for which the
value of the DAI field in the corresponding DCI format is equal to '1'.
  * for $M > 1$, and
\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding PDCCH in subframe $n - k_{m}$, where $k_{m} \in
K$ with the DAI value in the PDCCH greater than '1' (defined in Table 7.3-X),
or
\- for a PDCCH indicating downlink SPS release (defined in subclause 9.2) in
subframe $n - k_{m}$, where $k_{m} \in K$ with the DAI value in the PDCCH
greater than '1', or
\- for $M = 9$ and for a PDSCH transmission only on the primary cell indicated
by the detection of a corresponding PDCCH in subframe $n - k_{m}$, where
$k_{m} \in K$ with the DAI value in the PDCCH equal to \'1\' (defined in Table
7.3-X) not being the first PDCCH transmission in subframe(s) $n - k$, where $k
\in K$ with the DAI value equal to \'1\', or
\- for $M = 9$ and for a PDCCH indicating downlink SPS release (defined in
subclause 9.2) in subframe $n - k_{m}$, where $k_{m} \in K$ with the DAI value
in the PDCCH equal to '1' (defined in Table 7.3-X) not being the first PDCCH
transmission in subframe(s) $n - k$, where $k \in K$ with the DAI value equal
to \'1\',
\- the UE shall use PUCCH format 3 and PUCCH resource
$n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ where the value of
$n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ is determined according to higher
layer configuration and Table 10.1.2.2.2-1 and the TPC field in a PDCCH
assignment with DAI value greater than '1' (defined in Table 7.3-X) or with
DAI value equal to '1', not being the first PDCCH assignment in subframe(s) $n
- k$, where $k \in K$ with the DAI value equal to \'1\', shall be used to
determine the PUCCH resource value from one of the four PUCCH resource values
configured by higher layers, with the mapping defined in Table 10.1.2.2.2-1. A
UE shall assume that the same HARQ-ACK PUCCH resource value is transmitted on
all PDCCH assignments used to determine the PUCCH resource values within the
subframe(s) $n - k$, where $k \in K$.
  * For a PDSCH transmission on the secondary cell indicated by the detection of a corresponding PDCCH within subframe(s) $n - k$, where $k \in K$, the UE shall use PUCCH format 3 and PUCCH resource $n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ where the value of $n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ is determined according to higher layer configuration and Table 10.1.2.2.2-1 and the TPC field in the corresponding PDCCH shall be used to determine the PUCCH resource value from one of the four resource values configured by higher layers, with the mapping defined in Table 10.1.2.2.2-1.
\- For TDD UL-DL configurations 1-6,
\- if a PDCCH corresponding to a PDSCH on the primary cell within subframe(s)
$n - k$, where $k \in K$, or a PDCCH indicating downlink SPS release (defined
in subclause 9.2) within subframe(s) $n - k$, where $k \in K$, is detected,
the TPC field in the PDCCH with the DAI value greater than '1' (defined in
Table 7.3-X) or with DAI value equal to '1' not being the first PDCCH
transmission in subframe(s) $n - k$, where $k \in K$ with the DAI value equal
to \'1\', shall be used to determine the PUCCH resource value from one of the
four resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH resource
value is transmitted on all PDCCH assignments in the primary cell and in each
secondary cell that are used to determined the PUCCH resource value within the
subframe(s) $n - k$, where $k \in K$.
  * For PUCCH format 3 and PUCCH resource $n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ and a UE configured for two antenna port transmission, a PUCCH resource value in Table 10.1.2.2.2-1 maps to two PUCCH resources with the first PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$ and the second PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{1})}$ for antenna port $p_{1}$, otherwise, the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH}}^{(3,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$.
### 10.1.4 HARQ-ACK Repetition procedure
> HARQ-ACK repetition is enabled or disabled by a UE specific parameter
> _ackNackRepetition_ configured by higher layers. Once enabled, the UE shall
> repeat any HARQ-ACK transmission with a repetition factor
> $N_{\text{ANRep}}$, where $N_{\text{ANRep}}$ is provided by higher layers
> and includes the initial HARQ-ACK transmission, until HARQ-ACK repetition is
> disabled by higher layers. For a PDSCH transmission without a corresponding
> PDCCH detected, the UE shall transmit the corresponding HARQ-ACK response
> $N_{\text{ANRep}}$ times using PUCCH resource
> $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ configured by higher layers. For
> a PDSCH transmission with a corresponding PDCCH detected, or for a PDCCH
> indicating downlink SPS release, the UE shall first transmit the
> corresponding HARQ-ACK response once using PUCCH resource derived from the
> corresponding PDCCH CCE index (as described in subclauses 10.1.2 and
> 10.1.3), and repeat the transmission of the corresponding HARQ-ACK response
> $N_{\text{ANRep}} - 1$ times always using PUCCH resource $n_{\text{PUCCH,\
> ANRep}}^{(1,\overset{\sim}{p})}$, where $n_{\text{PUCCH,\
> ANRep}}^{(1,\overset{\sim}{p})}$is configured by higher layers.
>
> HARQ-ACK repetition is only applicable for UEs configured with one serving
> cell for FDD and TDD. For TDD, HARQ-ACK repetition is only applicable for
> HARQ-ACK bundling.
>
> HARQ-ACK repetition can be enabled with PUCCH format 1a/1b on two antenna
> ports. For a UE configured for two antenna port transmission for HARQ-ACK
> repetition with PUCCH format 1a/1b, a PUCCH resource value $n_{\text{PUCCH,\
> ANRep}}^{(1,\overset{\sim}{p})}$ maps to two PUCCH resources with the first
> PUCCH resource $n_{\text{PUCCH,\ ANRep}}^{(1,{\overset{\sim}{p}}_{0})}$ for
> antenna port $p_{0}$ and the second PUCCH resource $n_{\text{PUCCH,\
> ANRep}}^{(1,{\overset{\sim}{p}}_{1})}$for antenna port $p_{1}$, otherwise,
> the PUCCH resource value maps to a single PUCCH resource $n_{\text{PUCCH,\
> ANRep}}^{(1,{\overset{\sim}{p}}_{0})}$ for antenna port $p_{0}$.
### 10.1.5 Scheduling Request (SR) procedure
> A UE is configured by higher layers to transmit the scheduling request (SR)
> on one antenna port or two antenna ports. The scheduling request shall be
> transmitted on the PUCCH resource(s)
> $n_{\text{PUCCH}}^{(1,\overset{\sim}{p})} =
> n_{\text{PUCCH,SRI}}^{(1,\overset{\sim}{p})}$for $\overset{\sim}{p}$ mapped
> to antenna port _p_ as defined in [3], where
> $n_{\text{PUCCH,SRI}}^{(1,\overset{\sim}{p})}$ is configured by higher
> layers unless the SR coincides in time with the transmission of HARQ-ACK
> using PUCCH Format 3 in which case the SR is multiplexed with HARQ-ACK
> according to subclause 5.2.3.1 of [4]. The SR configuration for SR
> transmission periodicity and SR subframe offset is defined in Table 10.1.5-1
> by the parameter _sr-ConfigIndex_ $I_{\text{SR}}$ given by higher layers.
>
> SR transmission instances are the uplink subframes satisfying .
Table 10.1.5-1: UE-specific SR periodicity and subframe offset configuration
* * *
SR configuration Index $I_{\text{SR}}$ SR periodicity (ms) SR subframe offset
0 -- 4 5  
5 -- 14 10  
15 -- 34 20  
35 -- 74 40  
75 -- 154 80  
155 -- 156 2  
157 1
* * *
## 10.2 Uplink HARQ-ACK timing
For FDD, the UE shall upon detection of a PDSCH transmission in subframe _n-4_
intended for the UE and for which an HARQ-ACK shall be provided, transmit the
HARQ-ACK response in subframe _n_. If HARQ-ACK repetition is enabled, upon
detection of a PDSCH transmission in subframe _n-4_ intended for the UE and
for which HARQ-ACK response shall be provided, and if the UE is not repeating
the transmission of any HARQ-ACK in subframe $n$ corresponding to a PDSCH
transmission in subframes $n - N_{\text{ANRep}} - 3$, ... , $n - 5$, the UE:
  * shall transmit only the HARQ-ACK response (corresponding to the detected PDSCH transmission in subframe $n - 4$) on PUCCH in subframes $n$, $n + 1$, ..., $n + N_{\text{ANRep}} - 1$;
  * shall not transmit any other signal in subframes $n$, $n + 1$, ..., $n + N_{\text{ANRep}} - 1$; and
  * shall not transmit any HARQ-ACK response repetitions corresponding to any detected PDSCH transmission in subframes $n - 3$, ..., $n + N_{\text{ANRep}} - 5$.
For TDD, the UE shall upon detection of a PDSCH transmission within
subframe(s) $n - k$, where $k \in K$ and $K$ is defined in Table 10.1.3.1-1
intended for the UE and for which HARQ-ACK response shall be provided,
transmit the HARQ-ACK response in UL subframe _n_. If HARQ-ACK repetition is
enabled, upon detection of a PDSCH transmission within subframe(s) $n - k$,
where $k \in K$ and $K$ is defined in Table 10.1.3.1-1 intended for the UE and
for which HARQ-ACK response shall be provided, and if the UE is not repeating
the transmission of any HARQ-ACK in subframe $n$ corresponding to a PDSCH
transmission in a DL subframe earlier than subframe $n - k$, the UE:
  * shall transmit only the HARQ-ACK response (corresponding to the detected PDSCH transmission in subframe$n - k$) on PUCCH in UL subframe$n$ and the next $N_{\text{ANRep}} - 1$UL subframes denoted as $n_{1}$, ...,$n_{N_{\text{ANRep}} - 1}$;
```{=html}
``` \- shall not transmit any other signal in UL subframe $n$, $n_{1}$,
...,$n_{N_{\text{ANRep}} - 1}$; and
```{=html}
``` \- shall not transmit any HARQ-ACK response repetitions corresponding to
any detected PDSCH transmission in subframes $n_{i} - k$, where $k \in K_{i}$,
$K_{i}$is the set defined in Table 10.1.3.1-1 corresponding to UL subframe
$n_{i}$, and $1 \leq i \leq N_{\text{ANRep}} - 1$.
For TDD, HARQ-ACK bundling, if the UE detects that at least one downlink
assignment has been missed as described in subclause 7.3, the UE shall not
transmit HARQ-ACK on PUCCH if HARQ-ACK is the only UCI present in a given
subframe.
The uplink timing for the ACK corresponding to a detected PDCCH indicating
downlink SPS release shall be the same as the uplink timing for the HARQ-ACK
corresponding to a detected PDSCH, as defined above.
# 11 Physical multicast channel related procedures
## 11.1 UE procedure for receiving the physical multicast channel
The UE shall decode the PMCH when configured by higher layers. The UE may
assume that an eNB transmission on the PMCH is performed according to
subclause 6.5 of [3].
The$I_{\text{MCS}}$for the PMCH is configured by higher layers. The UE shall
use$I_{\text{MCS}}$for the PMCH and Table 7.1.7.1-1 to determine the
modulation order ($Q_{m}$) and TBS index ($I_{\text{TBS}}$) used in the PMCH.
The UE shall then follow the procedure in subclause 7.1.7.2.1 to determine the
transport block size, assuming $N_{\text{PRB}}$is equal
to$N_{\text{RB}}^{\text{DL}}$. The UE shall set the redundancy version to 0
for the PMCH.
## 11.2 UE procedure for receiving MCCH change notification
If a UE is configured by higher layers to decode PDCCHs with the CRC scrambled
by the M-RNTI, the UE shall decode the PDCCH according to the combination
defined in table 11.2-1.
Table 11.2-1: PDCCH configured by M-RNTI
* * *
DCI format Search Space DCI format 1C Common
* * *
The 8-bit information for MCCH change notification [11], as signalled on the
PDCCH, shall be delivered to higher layers.
#