# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes a generic frame format for the Adaptive Multi-
Rate Wideband (AMR-WB) speech codec. This format shall be used as a common
reference point when interfacing speech frames between different elements of
the 3G system and between different systems. Appropriate mappings to and from
this generic frame format will be used within and between each system element.
Annex A describes a second frame format which shall be used when octet
alignment of AMR-WB frames is required.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies.
[1] 3GPP TS 26.190: \"AMR Wideband Speech Codec; Speech Transcoding
Functions\".
[2] 3GPP TS 26.193: \"AMR Wideband Speech Codec; Source Controlled Rate
Operation\".
[3] 3GPP TS 26.192: \"AMR Wideband Speech Codec; Comfort Noise Aspects\".
# 3 Definitions and Abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply:
**AMR-WB mode:** one of the nine AMR-WB codec bit-rates denoted also with
indices 0 to 8 where 0 maps to the 6.60 kbit/s mode and 8 maps to the 23.85
kbit/s mode.
**AMR-WB codec mode:** same as AMR-WB mode.
**RX_TYPE:** classification of the received frame as defined in [2].
**TX_TYPE:** classification of the transmitted frame as defined in [2].
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
CRC Cyclic Redundancy Check
FQI Frame Quality Indicator
GSM Global System for Mobile communication
LSB Least Significant Bit
MSB Most Significant BitRX Receive
SCR Source Controlled Rate operation
SID Silence Descriptor (Comfort Noise Frame)
TX Transmit
# 4 AMR-WB codec Interface format 1 (AMR-WB IF1)
This clause describes the generic frame format for both the speech and comfort
noise frames of the AMR-WB speech codec. This format is referred to as AMR-WB
Interface Format 1 (AMR-WB IF1). Annex A describes AMR-WB Interface Format 2
(AMR-WB IF2).
Each AMR-WB codec mode follows the generic frame structure depicted in figure
1. The frame is divided into three parts: AMR-WB Header, AMR-WB Auxiliary
Information, and AMR-WB Core Frame. The AMR-WB Header part includes the Frame
Type and the Frame Quality Indicator fields. The AMR-WB auxiliary information
part includes the Mode Indication, Mode Request, and Codec CRC fields. The
AMR-WB Core Frame part consists of the speech parameter bits or, in case of a
comfort noise frame, the comfort noise parameter bits. In case of a comfort
noise frame, the comfort noise parameters replace Class A bits of AMR-WB Core
Frame while Class B and C bits are omitted.
It is to be noted that unlike AMR, AMR-WB uses only two bit protection classes
A and B. In no case bits are assigned to protection class C and,
correspondingly, no RAB subflow needs to be allocated for such a class. The
mentioning of class C is only done for the purpose of keeping uniformity of
this specification with the corresponding specification for AMR.
* * *
Frame Type (4 bits) Frame Quality Indicator (1 bit)
* * *
* * *
Mode Indication (4 bits) Mode Request (4 bits) Codec CRC (8 bits)
* * *
* * *
Class A bits Class B bits Class C bits
* * *
Figure 1. Generic AMR-WB frame structure
## 4.1 AMR-WB Header and AMR-WB Auxiliary Information
This subclause describes the AMR-WB Header of figure 1.
### 4.1.1 Frame Type, Mode Indication, and Mode Request
Table 1a defines the 4-bit Frame Type field. Frame Type can indicate the use
of one of the nine AMR-WB codec modes, comfort noise frame, lost speech frame,
or an empty frame. In addition, four Frame Type Indices are reserved for
future use. The same table is reused for the Mode Indication and Mode Request
fields which are 4-bit fields each and are defined only in the range 0...8 to
specify one of the nine AMR-WB codec modes.
Table 1a: Interpretation of Frame Type,\ Mode Indication and Mode Request
fields.
* * *
Frame Type Index Mode Indication Mode Request Frame content (AMR-WB mode,
comfort noise, or other) 0 0 0 AMR-WB 6.60 kbit/s 1 1 1 AMR-WB 8.85 kbit/s 2 2
2 AMR-WB 12.65 kbit/s 3 3 3 AMR-WB 14.25 kbit/s 4 4 4 AMR-WB 15.85 kbit/s 5 5
5 AMR-WB 18.25 kbit/s 6 6 6 AMR-WB 19.85 kbit/s 7 7 7 AMR-WB 23.05 kbit/s 8 8
8 AMR-WB 23.85 kbit/s 9 - - AMR-WB SID (Comfort Noise Frame) 10-13 - - For
future use 14 - - speech lost 15 - - No Data (No transmission/No reception) \-
-
* * *
### 4.1.2 Frame Quality Indicator
The content of the Frame Quality Indicator field is defined in Table 1b. The
field length is one bit. The Frame Quality Indicator indicates whether the
data in the frame contains errors.
Table 1b: Definition of Frame Quality Indicator
+-------------------------------+-------------------------------------+ | Frame Quality Indicator (FQI) | Quality of data | +-------------------------------+-------------------------------------+ | 0 | Bad frame or Corrupted frame | | | | | | (bits may be used to assist error | | | concealment) | +-------------------------------+-------------------------------------+ | 1 | Good frame | +-------------------------------+-------------------------------------+
### 4.1.3 Mapping to TX_TYPE and RX_TYPE
Table 1c shows how the AMR-WB Header data (FQI and Frame Type) maps to the
TX_TYPE and RX_TYPE frames defined in [2].
Table 1c: Mapping of Frame Quality Indicator and Frame Type to\ TX_TYPE and
RX_TYPE [2], respectively
* * *
Frame Quality Indicator Frame Type Index TX_TYPE or\ Comment RX_TYPE
1 0-8 SPEECH_GOOD The specific Frame Type Index depends on the bit-rate being
used.
0 0-8 SPEECH_BAD The specific Frame Type Index depends on the bit-rate being
used. The corrupted data may be used to assist error concealment.
0 14 SPEECH_LOST No useful information. An erased or stolen frame with no data
usable to assist error concealment.
1 9\ SID_FIRST or\ SID_FIRST and SID_UPDATE\ 9 SID_UPDATE are differentiated
using one Class A bit: STI.
0 9 SID_BAD
1 15 NO_DATA Typically a non-transmitted frame.
* * *
### 4.1.4 Codec CRC
Generic AMR-WB codec frames with Frame Type 0...9 are associated with an 8-bit
CRC for error-detection purposes. The Codec CRC field of AMR-WB Auxiliary
Information in figure 1 contains the value of this CRC. These eight parity
bits are generated by the cyclic generator polynomial:
\- G(x)=D^8^ + D^6^ + D^5^ + D^4^ + 1
which is computed over all Class A bits of AMR-WB Core Frame. Class A bits for
Frame Types 0...8 are defined in subclause 4.2.2 (for speech bits) and for
Frame Type 9 in subclause 4.2.3 (for comfort noise bits).
When Frame Type Index of table 1a is 14 or 15, the CRC field is not included
in the Generic AMR-WB frame.
## 4.2 AMR-WB Core Frame
This subclause contains the description of AMR-WB Core Frame of figure 1. The
descriptions for AMR-WB Core Frame with speech bits and with comfort noise bit
are given separately.
### 4.2.1 AMR-WB Core Frame with speech bits: Bit ordering
This subclause describes how AMR-WB Core Frame carries the coded speech data.
The bits produced by the speech encoder are denoted as
{_s_(1),_s_(2),...,_s_(_K_)}, where _K_ refers to the number of bits produced
by the speech encoder as shown in table 2. The notation _s_(_i_) follows that
of [1]. The speech encoder output bits are ordered according to their
subjective importance. This bit ordering can be utilized for error protection
purposes when the speech data is, for example, carried over a radio interface.
Tables B.1 to B.9 in Annex B define the AMR-WB IF1 bit ordering for all the
nine AMR-WB codec modes. In these tables the speech bits are numbered in the
order they are produced by the corresponding speech encoder as described in
the relevant tables of 3GPP TS 26.190 [1]. The reordered bits are denoted
below, in the order of decreasing importance, as
{_d_(0),_d_(1),...,_d_(_K-1_)}.
The ordering algorithm is described in pseudo code as:
\- for _j_ = 0 to _K_ -1
\- _d_(_j_) := _s_(_table~m~_(_j_)+1);
where _table~m~_(_j_) refers to the relevant table in Annex B depending on the
AMR-WB mode _m_ =0..8. The Annex B tables should be read line by line from
left to right. The first element of the table has the index 0.
### 4.2.2 AMR-WB Core Frame with speech bits: Class division
The reordered bits are further divided into three indicative classes according
to their subjective importance. The three different importance classes can
then be subject to different error protection in the network.
The importance classes are Class A, Class B, and Class C. Class A contains the
bits most sensitive to errors and any error in these bits typically results in
a corrupted speech frame which should not be decoded without applying
appropriate error concealment. This class is protected by the Codec CRC in
AMR-WB Auxiliary Information. Classes B and C contain bits where increasing
error rates gradually reduce the speech quality, but decoding of an erroneous
speech frame is usually possible without annoying artifacts. Class B bits are
more sensitive to errors than Class C bits. The importance ordering applies
also within the three different classes and there are no significant step-wise
changes in subjective importance between neighbouring bits at the class
borders.
The number of speech bits in each class (Class A, Class B, and Class C) for
each AMR-WB mode is shown in table 2. The classification in table 2 and the
importance ordering _d_(_j_), together, are sufficient to assign all speech
bits to their correct classes. For example, when the AMR-WB codec mode is
6.60, then the Class A bits are _d_(0).._d_(53), Class B bits are
_d_(54).._d_(131), and there are no Class C bits.
Table 2: Number of bits in Classes A, B, and C for each AMR-WB codec mode
* * *
Frame Type AMR-WB\ Total number of bits Class A Class B Class C codec mode
0 6.60 132 54 78 0
1 8.85 177 64 113 0
2 12.65 253 72 181 0
3 14.25 285 72 213 0
4 15.85 317 72 245 0
5 18.25 365 72 293 0
6 19.85 397 72 325 0
7 23.05 461 72 389 0
8 23.85 477 72 405 0
* * *
### 4.2.3 AMR-WB Core Frame with comfort noise bits
The AMR-WB Core Frame content for the additional frame types with Frame Type
Indices 9-15 in table 1a are described in this subclause. These mainly consist
of the frames related to Source Controlled Rate Operation specified in [2].
The data content (comfort noise bits) of the additional frame types is carried
in AMR-WB Core Frame. The comfort noise bits are all mapped to Class A of AMR-
WB Core Frame and Classes B and C are not used. This is a notation convention
only and the class division has no meaning for comfort noise bits.
The number of bits in each class (Class A, Class B, and Class C) for the AMR-
WB comfort noise bits (Frame Type Index 9) is shown in table 3. The contents
of SID_UPDATE and SID_FIRST are divided into three parts (SID Type Indicator
(STI), Mode Indication (mi(i)), and Comfort Noise Parameters (s(i)) as defined
in [2].
The comfort noise parameter bits produced by the AMR-WB speech encoder are
denoted as s(i) = {_s_(1),_s_(2),...,_s_(35)}. The notation _s_(_i_) follows
that of [3]. These bits are numbered in the order they are produced by the
AMR-WB encoder without any reordering. These bits are followed by the SID Type
Indicator STI and the Mode Indication bits\ mi(i) = {_mi_(0),_mi_(1),_mi_(2),
_mi_(3)} = {LSB ::: MSB}. Thus, the AMR-WB SID or comfort noise bits
{_d_(0),_d_(1),...,_d_(39)}are formed as defined by the pseudo code below.
\- for _j_ = 0 to 34;
\- _d_(_j_) := _s_(_j_ +1);
\- _d_(35) := _STI_ ;
\- for _j_ = 36 to 39;
> \- _d_(_j_) := _smi_(39-_j_).
Table 3. Bit classification for Frame Type 9: AMR-WB SID (Comfort Noise Frame)
+--------+-----+--------+--------+--------+--------+--------+---+---+ | Frame | FQI | AMR-WB | Total | Class | Class | Class | | | | Type | | | number | A | B | C | | | | Index | | TX | of | | | | | | | | | _TYPE | bits | | | | | | | | | or | | | | | | | | | | RX | | | | | | | | | | _TYPE | | | | | | | +--------+-----+--------+--------+--------+--------+--------+---+---+ | | | | | **SID | * |** Co | | | | | | | | Type | _Mode\ | mfort\ | | | | | | | | Ind | Indic | Noise | | | | | | | | icator | ation\ | Par | | | | | | | | STI_ _| m | ameter | | | | | | | | | i(i)__| s(i)_ * | | | +--------+-----+--------+--------+--------+--------+--------+---+---+ | 9 | 1 | SID_ | 40 | 1 (= | 4 | 35 | 0 | 0 | | | | UPDATE | | \"1\") | | | | | +--------+-----+--------+--------+--------+--------+--------+---+---+ | 9 | 1 | SID\ | 40 | 1 (= | 4 | 35 (= | 0 | 0 | | | | _FIRST | | \"0\") | | \"0\") | | | +--------+-----+--------+--------+--------+--------+--------+---+---+ | 9 | 0 | SI | 40 | 1 | 4 | 35 | 0 | 0 | | | | D_BAD | | | | | | | +--------+-----+--------+--------+--------+--------+--------+---+---+
AMR-WB no transmission frame type (14 or 15) contains the AMR-WB Header
information (as defined in Figure 1), while AMR-WB Auxiliary Information and
AMR-WB Core frame are omitted. The AMR-WB Header includes the corresponding
Frame Type and the Frame Quality Indicator (as defined in table 1c).
## 4.3 Generic AMR-WB Frame Composition
The generic AMR-WB frame is formed as a concatenation of AMR-WB Header, AMR-WB
Auxiliary Information and the AMR-WB Core Frame, in this order. The MSB of the
Frame Type is placed in bit 8 of the first octet (see example in table 5
below), the LSB of the Frame Type is placed in bit 5. Then the next parameter
follows, which is the Frame Quality Indicator, and so on.After FQI, three
spare bits are inserted to align the Codec CRC and the AMR-WB Core frame to
the octet boundary. The first bit of the AMR-WB Core frame d(0) is placed in
bit 8 of octet 4. The last bit of the generic AMR-WB frame is the last bit of
AMR-WB Core Frame, which is the last bit of speech bits or the last bit of
comfort noise bits, as defined in subclauses 4.2.1 and 4.2.3. Table 5 shows
the composition for the example of the Codec Mode 12.65 kbit/s and table 6
shows the composition for the AMR-WB SID frame.
Table 5: Mapping of an AMR-WB speech coding mode into the generic AMR-WB
frame, AMR-WB IF1,\ example: AMR-WB 12.65 kbit/s (Mode Indication = 3), \"good
frame\", Mode Request = 1.
* * *
              MSB                                  Mapping of bits\     LSB                                          
                                                   AMR-WB 12.65
**Octet** bit 8 bit 7 bit 6 bit 5 bit 4 bit 3 bit 2 bit 1
**1** Frame Type (=3) FQI spare
              0                                    0                    1        1        1        0        0        0
**2** Mode Indication (=3)\ Mode Request (=1)\  
MSB ... LSB MSB ... LSB
              0                                    0                    1        1        0        0        0        1
3 Codec CRC
              CRC(7)                               CRC(6)               CRC(5)   CRC(4)   CRC(3)   CRC(2)   CRC(1)   CRC(0)
4 AMR-WB Core Frame (octet 1)
              d(0)                                 d(1)                 d(2)     d(3)     d(4)     d(5)     d(6)     d(7)
5..34 AMR-WB Core Frame (octets 2 to 31)
              d(8)                                 ...                  ...      ...      ...      ...      ...      ...
**35** AMR-WB Core Frame (octet 32) undefined
              d(248)                               d(249)               d(250)   d(251)   d(252)
* * *
Table 6: Mapping of an AMR-WB SID frame into the generic AMR-WB frame, AMR-WB
IF1,\ example: AMR-WB SID_Update, \"good frame\", Mode Indication = 3, Mode
Request = 2.
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | MSB | Ma | LSB | | | | | | | | | pping | | | | | | | | | | of | | | | | | | | | | bits\ | | | | | | | | | | A | | | | | | | | | | MR-WB | | | | | | | | | | SID | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **Oc | bit 8 | bit 7 | bit 6 | bit 5 | bit 4 | bit 3 | bit 2 | bit 1 | | tet** | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **1** | Frame | FQI | spare | | | | | | | | Type | | | | | | | | | | (=9) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | 1 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **2** | Mode | Mode | | | | | | | | | Indic | Re | | | | | | | | | ation | quest | | | | | | | | | | (=2)\ | | | | | | | | | | MSB | | | | | | | | | | ... | | | | | | | | | | LSB | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | unde | 0 | 0 | 1 | 0 | | | | | | fined | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **3** | Codec | | | | | | | | | | CRC | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | C | C | C | C | C | C | C | C | | | RC(7) | RC(6) | RC(5) | RC(4) | RC(3) | RC(2) | RC(1) | RC(0) | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **4** | A | | | | | | | | | | MR-WB | | | | | | | | | | Core | | | | | | | | | | Frame | | | | | | | | | | ( | | | | | | | | | | octet | | | | | | | | | | 1) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | d(0) | d(1) | d(2) | d(3) | d(4) | d(5) | d(6) | d(7) | | | =s(1) | =s(2) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **5 | A | | | | | | | | | ..7** | MR-WB | | | | | | | | | | Core | | | | | | | | | | Frame | | | | | | | | | | (o | | | | | | | | | | ctets | | | | | | | | | | 2 to | | | | | | | | | | 4) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | d(8) | ... | ... | ... | ... | ... | ... | ... | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **8** | A | STI | Mode | | | | | | | | MR-WB | | Indic | | | | | | | | Core | | ation | | | | | | | | Frame | | (=3) | | | | | | | | ( | | | | | | | | | | octet | | MSB | | | | | | | | 5) | | ... | | | | | | | | | | LSB | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | d(32) | d(33) | d(34) | 1 | 0 | 0 | 1 | 1 | | | | | = | | | | | | | | | | s(35) | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Table 7 summarizes all possible AMR-WB frame format combinations in terms of
number of bits in each field.
Table 7. Number of bits for different fields in different AMR-WB frame
compositions
* * *
Frame Type Index Frame Type Frame Quality Indicator Mode Indication Mode
Request Codec CRC Class A Class B Class C Total AMR-WB Core Frame  
0 4 1 4 4 8 54 78 0 153 1 4 1 4 4 8 64 113 0 198 2 4 1 4 4 8 72 181 0 274 3 4
1 4 4 8 72 213 0 306 4 4 1 4 4 8 72 245 0 338 5 4 1 4 4 8 72 293 0 386 6 4 1 4
4 8 72 325 0 418 7 4 1 4 4 8 72 389 0 482 8 4 1 4 4 8 72 405 0 498 9 4 1 4 4 8
40 0 0 61 10-13 Not used  
14 4 1 0 0 0 0 0 0 4 15 4 1 0 0 0 0 0 0 4
* * *
###### ## Annex A (normative): AMR-WB Interface Format 2 (with octet
alignment)
This annex defines an octet-aligned frame format for the AMR-WB codec. This
format is useful, for example, when the AMR-WB codec is used in connection
with applicable ITU-T Hâ€‘series of recommendations. The format is referred to
as AMR-WB Interface Format 2 (AMR-WB IF2).
The AMR-WB IF2 frame is formed by concatenation of the 4-bit Frame Type field
(as defined for AMR-WB IF1 in subclause 4.1.1),the 1-bit Frame Quality
Indicator field (as defined for AMR-WB IF1 in subclause 4.1.2) and the AMR-WB
Core Frame (as defined for AMR-WB IF1 in subclause 4.2) as shown in figure
A.1. The length of the AMR-WB Core Frame field depends on the particular Frame
Type. The total number of bits in the AMR-WB IF2 speech frames in the
different modes is typically not a multiple of eight and bit stuffing is
needed to achieve an octet structure.
* * *
Frame Type (4 bits) Frame Quality Indicator (1 bit)
* * *
* * *
Class A bits Class B bits Class C bits
* * *
* * *
Bit Stuffing
* * *
Figure A.1: Frame structure for AMR-WB IF2
Table A.1a shows an example how the AMR-WB 8.85 kbit/s mode is mapped into
AMR-WB IF2. The four MSBs of the first octet (octet 1) consist of the Frame
Type (=1) for the AMR-WB 8.85 kbit/s mode (see table 1a in AMR-WB IF1
specification) and the Frame Quality Indicator bit. This field is followed by
the 177 AMR-WB Core Frame speech bits (_d_(0)..._d_(176)) which consist of 64
Class A bits and 113 Class B bits as described in table 2 for AMR-WB IF1. This
results in a total of 182 bits and 2 bits are needed for Bit Stuffing to
arrive to the closest multiple of 8 which is 184 bits.
Table A.1a: Example mapping of the AMR-WB speech coding mode 8.85kbit/s into
AMR-WB IF2.\ The bits used for Bit Stuffing are denoted as UB (for \"unused
bit\").
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Octet | MSB | Ma | LSB | | | | | | | | | pping | | | | | | | | | | of | | | | | | | | | | bits\ | | | | | | | | | | A | | | | | | | | | | MR-WB | | | | | | | | | | 8.85 | | | | | | | | | | k | | | | | | | | | | bit/s | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | bit 8 | bit 7 | bit 6 | bit 5 | bit 4 | bit 3 | bit 2 | bit 1 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | Frame | | | | | | | | | | Type | | | | | | | | | | (= 1) | | | | | | | | | | | | | | | | | | | | MSB | | | | | | | | | | LSB | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | 0 | 0 | 0 | 1 | FQI | d(0) | d(1) | d(2) | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | d(3) | d(4) | d(5) | d(6) | d(7) | d(8) | d(9) | d(10) | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | d(11) | ... | ... | ... | ... | ... | ... | ... | | :::22 | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 23 | d | d | d | d | d | d | Stu | | | | (171) | (172) | (173) | (174) | (175) | (176) | ffing | | | | | | | | | | bits | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | d | d | d | d | d | d | UB | UB | | | (171) | (172) | (173) | (174) | (175) | (176) | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Table A.1b shows the composition of AMR-WB IF2 frames for all Frame Types in
terms of how many bits are used for each field of figure A.1.
Table A.2 specify how the AMR-WB Core Frame comfort noise bits of Frame Type 9
is mapped to AMR-WB IF2. Table A.3 specifies the mapping for an empty or lost
frame (\"no transmission\" or \" speech lost\").
Table A.1b: Composition of AMR-WB IF2 Frames for all Frame Types
* * *
Frame Type Index Frame content Number of bits in Frame Type Number of bits in
Frame Quality Indicator Number of Bits in AMR-WB Core Frame Number of Bits in
Bit Stuffing Number of octets (N) 0 AMR-WB 6.60 kbit/s 4 1 132 7 18 1 AMR-WB
8.85 kbit/s 4 1 177 2 23 2 AMR-WB 12.65 kbit/s 4 1 253 6 33 3 AMR-WB 14.25
kbit/s 4 1 285 6 37 4 AMR-WB 15.85 kbit/s 4 1 317 6 41 5 AMR-WB 18.25 kbit/s 4
1 365 6 47 6 AMR-WB 19.85 kbit/s 4 1 397 6 51 7 AMR-WB 23.05 kbit/s 4 1 461 6
59 8 AMR-WB 23.85 kbit/s 4 1 477 6 61 9 AMR-WB SID (Comfort Noise Frame) 4 1
40 3 6 10-13 For future use - - - - - 14 speech lost 4 1 0 3 1 15 No Data (No
transmission/No reception) 4 1 0 3 1
* * *
Table A.2: Mapping of bits for Frame Type 9 (AMR-WB SID)\ (Bits s1 to s35
refer to TS 26.192)
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | MSB | Ma | LSB | | | | | | | | | pping | | | | | | | | | | of | | | | | | | | | | bits\ | | | | | | | | | | A | | | | | | | | | | MR-WB | | | | | | | | | | SID | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | **Oc | bit 8 | bit 7 | bit 6 | bit 5 | bit 4 | bit 3 | bit 2 | bit 1 | | tet** | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | Frame | | | | | | | | | | Type | | | | | | | | | | (= 9) | | | | | | | | | | | | | | | | | | | | MSB | | | | | | | | | | ... | | | | | | | | | | ...\ | | | | | | | | | | ..... | | | | | | | | | | LSB | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | 1 | 0 | 0 | 1 | FQI | s1 | s2 | s3 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | s4 | s5 | s6 | s7 | s8 | s9 | s10 | s11 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | s12 | s13 | S14 | s15 | s16 | s17 | s18 | s19 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | s20 | s21 | S22 | s23 | s24 | s25 | s26 | s27 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | s28 | s29 | S30 | s31 | s32 | s33 | s34 | s35 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | SID | Mode | Stu | | | | | | | | Type | I | ffing | | | | | | | | Indi | ndica | bits | | | | | | | | cator | tion\ | | | | | | | | | | MSB | | | | | | | | | | mi(i) | | | | | | | | | | LSB | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | t1 | mi(3) | mi(2) | mi(1) | mi(0) | UB | UB | UB | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Definitions of additional descriptor bits needed for the silence descriptor in
the table are as follows: SID-type Indicator STI is {0=SID_FIRST, 1=SID_UPDATE
}, Speech Mode Indication (mi(0)- mi(3)) is the AMR-WB codec mode according to
the first nine entries in table 1a. Note that in parameter mi the index 3
refers to MSB.
Table A.3: Mapping of bit for Frame Type 14 (Speech Lost) and for Frame Type
15 (No Data)
* * *
Transmitted Octets MSB Mapping of bits LSB
                       Frame Type 14 = 1 1 1 0\                     Stuffing bits                           
                       Frame Type 15 = 1 1 1 1
1 mi(3) mi(2) mi(1) mi(0) FQI UB UB UB
* * *
###### ## Annex B (normative): Tables for AMR-WB Core Frame bit ordering
This annex contains the tables required for ordering the AMR-WB Core Frame
speech bits corresponding to the different AMR-WB modes. These tables
represent _table~m~_(_j_) in subclause 4.2.1 where _m_ =0..8 is the AMR-WB
mode. The tables are read from left to right so that the first element (top
left corner) of the table has index 0 and the last element (the rightmost
element of the last row) has the index _K_ -1 where _K_ is the total number of
speech bits in the specific mode. For example, _table_ ~0~(20)=60, as defined
in table B.1.
Table B.1: Ordering of the speech encoder bits for the 6.60 kbit/s mode:
_table_ ~0~(_j_)
* * *
0 5 6 7 61 84 107 130 62 85 8 4 37 38 39 40 58 81 104 127 60 83 106 129 108
131 128 41 42 80 126 1 3 57 103 82 105 59 2 63 109 110 86 19 22 23 64 87 18 20
21 17 13 88 43 89 65 111 14 24 25 26 27 28 15 16 44 90 66 112 9 11 10 12 67
113 29 30 31 32 34 33 35 36 45 51 68 74 91 97 114 120 46 69 92 115 52 75 98
121 47 70 93 116 53 76 99 122 48 71 94 117 54 77 100 123 49 72 95 118 55 78
101 124 50 73 96 119 56 79 102 125
* * *
Table B.2: Ordering of the speech encoder bits for the 8.85 kbit/s mode:
_table_ ~1~(_j_)
* * *
0 4 6 7 5 3 47 48 49 112 113 114 75 106 140 171 80 111 145 176 77 108 142 173
78 109 143 174 79 110 144 175 76 107 141 172 50 115 51 2 1 81 116 146 19 21 12
17 18 20 16 25 13 10 14 24 23 22 26 8 15 52 117 31 82 147 9 33 11 83 148 53
118 28 27 84 149 34 35 29 46 32 30 54 119 37 36 39 38 40 85 150 41 42 43 44 45
55 60 65 70 86 91 96 101 120 125 130 135 151 156 161 166 56 87 121 152 61 92
126 157 66 97 131 162 71 102 136 167 57 88 122 153 62 93 127 158 67 98 132 163
72 103 137 168 58 89 123 154 63 94 128 159 68 99 133 164 73 104 138 169 59 90
124 155 64 95 129 160 69 100 134 165 74 105 139 170
* * *
Table B.3: Ordering of the speech encoder bits for the 12.65 kbit/s mode:
_table_ ~2~(_j_)
* * *
0 4 6 93 143 196 246 7 5 3 47 48 49 50 51 150 151 152 153 154 94 144 197 247
99 149 202 252 96 146 199 249 97 147 200 250 100 203 98 148 201 251 95 145 198
248 52 2 1 101 204 155 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8 15 53
156 31 102 205 9 33 11 103 206 54 157 28 27 104 207 34 35 29 46 32 30 55 158
37 36 39 38 40 105 208 41 42 43 44 45 56 106 159 209 57 66 75 84 107 116 125
134 160 169 178 187 210 219 228 237 58 108 161 211 62 112 165 215 67 117 170
220 71 121 174 224 76 126 179 229 80 130 183 233 85 135 188 238 89 139 192 242
59 109 162 212 63 113 166 216 68 118 171 221 72 122 175 225 77 127 180 230 81
131 184 234 86 136 189 239 90 140 193 243 60 110 163 213 64 114 167 217 69 119
172 222 73 123 176 226 78 128 181 231 82 132 185 235 87 137 190 240 91 141 194
244 61 111 164 214 65 115 168 218 70 120 173 223 74 124 177 227 79 129 182 232
83 133 186 236 88 138 191 241 92 142 195 245
* * *
Table B.4: Ordering of the speech encoder bits for the 14.25 kbit/s mode:
_table_ ~3~(_j_)
* * *
0 4 6 101 159 220 278 7 5 3 47 48 49 50 51 166 167 168 169 170 102 160 221 279
107 165 226 284 104 162 223 281 105 163 224 282 108 227 106 164 225 283 103
161 222 280 52 2 1 109 228 171 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 172 31 110 229 9 33 11 111 230 54 173 28 27 112 231 34 35 29 46 32 30 55
174 37 36 39 38 40 113 232 41 42 43 44 45 56 114 175 233 62 120 181 239 75 133
194 252 57 115 176 234 63 121 182 240 70 128 189 247 76 134 195 253 83 141 202
260 92 150 211 269 84 142 203 261 93 151 212 270 85 143 204 262 94 152 213 271
86 144 205 263 95 153 214 272 64 122 183 241 77 135 196 254 65 123 184 242 78
136 197 255 87 145 206 264 96 154 215 273 58 116 177 235 66 124 185 243 71 129
190 248 79 137 198 256 88 146 207 265 97 155 216 274 59 117 178 236 67 125 186
244 72 130 191 249 80 138 199 257 89 147 208 266 98 156 217 275 60 118 179 237
68 126 187 245 73 131 192 250 81 139 200 258 90 148 209 267 99 157 218 276 61
119 180 238 69 127 188 246 74 132 193 251 82 140 201 259 91 149 210 268 100
158 219 277
* * *
Table B.5: Ordering of the speech encoder bits for the 15.85 kbit/s mode:
_table_ ~4~(_j_)
* * *
0 4 6 109 175 244 310 7 5 3 47 48 49 50 51 182 183 184 185 186 110 176 245 311
115 181 250 316 112 178 247 313 113 179 248 314 116 251 114 180 249 315 111
177 246 312 52 2 1 117 252 187 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 188 31 118 253 9 33 11 119 254 54 189 28 27 120 255 34 35 29 46 32 30 55
190 37 36 39 38 40 121 256 41 42 43 44 45 56 122 191 257 63 129 198 264 76 142
211 277 89 155 224 290 102 168 237 303 57 123 192 258 70 136 205 271 83 149
218 284 96 162 231 297 62 128 197 263 75 141 210 276 88 154 223 289 101 167
236 302 58 124 193 259 71 137 206 272 84 150 219 285 97 163 232 298 59 125 194
260 64 130 199 265 67 133 202 268 72 138 207 273 77 143 212 278 80 146 215 281
85 151 220 286 90 156 225 291 93 159 228 294 98 164 233 299 103 169 238 304
106 172 241 307 60 126 195 261 65 131 200 266 68 134 203 269 73 139 208 274 78
144 213 279 81 147 216 282 86 152 221 287 91 157 226 292 94 160 229 295 99 165
234 300 104 170 239 305 107 173 242 308 61 127 196 262 66 132 201 267 69 135
204 270 74 140 209 275 79 145 214 280 82 148 217 283 87 153 222 288 92 158 227
293 95 161 230 296 100 166 235 301 105 171 240 306 108 174 243 309
* * *
Table B.6: Ordering of the speech encoder bits for the 18.25 kbit/s mode:
_table_ ~5~(_j_)
* * *
0 4 6 121 199 280 358 7 5 3 47 48 49 50 51 206 207 208 209 210 122 200 281 359
127 205 286 364 124 202 283 361 125 203 284 362 128 287 126 204 285 363 123
201 282 360 52 2 1 129 288 211 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 212 31 130 289 9 33 11 131 290 54 213 28 27 132 291 34 35 29 46 32 30 55
214 37 36 39 38 40 133 292 41 42 43 44 45 56 134 215 293 198 299 136 120 138
60 279 58 62 357 139 140 295 156 57 219 297 63 217 137 170 300 222 64 106 61
78 294 92 142 141 135 221 296 301 343 59 298 184 329 315 220 216 265 251 218
237 352 223 157 86 171 87 164 351 111 302 65 178 115 323 72 192 101 179 93 73
193 151 337 309 143 274 69 324 165 150 97 338 110 310 330 273 68 107 175 245
114 79 113 189 246 259 174 71 185 96 344 100 322 83 334 316 333 252 161 348
147 82 269 232 260 308 353 347 163 231 306 320 188 270 146 177 266 350 256 85
149 116 191 160 238 258 336 305 255 88 224 99 339 230 228 227 272 242 241 319
233 311 102 74 180 275 66 194 152 325 172 247 244 261 117 158 166 354 75 144
108 312 94 186 303 80 234 89 195 112 340 181 345 317 326 276 239 167 118 313
70 355 327 253 190 176 271 104 98 153 103 90 76 267 277 248 225 262 182 84 154
235 335 168 331 196 341 249 162 307 148 349 263 321 257 243 229 356 159 119 67
187 173 145 240 77 304 332 314 342 109 254 81 278 105 91 346 318 183 250 197
328 95 155 169 268 226 236 264
* * *
Table B.7: Ordering of the speech encoder bits for the 19.85 kbit/s mode:
_table_ ~6~(_j_)
* * *
0 4 6 129 215 304 390 7 5 3 47 48 49 50 51 222 223 224 225 226 130 216 305 391
135 221 310 396 132 218 307 393 133 219 308 394 136 311 134 220 309 395 131
217 306 392 52 2 1 137 312 227 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 228 31 138 313 9 33 11 139 314 54 229 28 27 140 315 34 35 29 46 32 30 55
230 37 36 39 38 40 141 316 41 42 43 44 45 56 142 231 317 63 73 92 340 82 324
149 353 159 334 165 338 178 163 254 77 168 257 153 343 57 248 238 79 252 166
67 80 201 101 267 143 164 341 255 339 187 376 318 78 328 362 115 232 242 253
290 276 62 58 158 68 93 179 319 148 169 154 72 385 329 333 344 102 83 144 233
323 124 243 192 354 237 64 247 202 209 150 116 335 268 239 299 188 196 298 94
195 258 123 363 384 109 325 371 170 370 84 110 295 180 74 210 191 106 291 205
367 381 377 206 355 122 119 120 383 160 105 108 277 380 294 284 285 345 208
269 249 366 386 300 297 259 125 369 197 97 194 286 211 281 280 183 372 87 155
283 59 348 327 184 76 111 330 203 349 69 98 152 145 189 66 320 337 173 358 251
198 174 263 262 126 241 193 88 388 117 95 387 112 359 287 244 103 272 301 171
162 234 273 127 373 181 292 85 378 302 121 107 364 346 356 212 278 213 65 382
288 207 113 175 99 296 374 368 199 260 185 336 331 161 270 264 250 240 75 350
151 60 89 321 156 274 360 326 70 282 167 146 352 81 91 389 266 245 177 235 190
256 204 342 128 118 303 104 379 182 114 375 200 96 293 172 214 365 279 86 289
351 347 357 261 186 176 271 90 100 147 322 275 361 71 332 61 265 157 246 236
* * *
Table B.8: Ordering of the speech encoder bits for the 23.05 kbit/s mode:
_table_ ~7~(_j_)
* * *
0 4 6 145 247 352 454 7 5 3 47 48 49 50 51 254 255 256 257 258 146 248 353 455
151 253 358 460 148 250 355 457 149 251 356 458 152 359 150 252 357 459 147
249 354 456 52 2 1 153 360 259 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 260 31 154 361 9 33 11 155 362 54 261 28 27 156 363 34 35 29 46 32 30 55
262 37 36 39 38 40 157 364 41 42 43 44 45 56 158 263 365 181 192 170 79 57 399
90 159 297 377 366 275 68 183 388 286 194 299 92 70 182 401 172 59 91 58 400
368 161 81 160 264 171 80 389 390 378 379 193 298 69 266 265 367 277 288 276
287 184 60 195 82 93 71 369 402 173 162 444 300 391 98 76 278 61 267 374 135
411 167 102 380 200 87 178 65 94 204 124 72 342 189 305 381 396 433 301 226
407 289 237 113 215 185 128 309 403 116 320 196 331 370 422 174 64 392 83 425
219 134 188 432 112 427 139 279 163 436 208 447 218 236 229 97 294 385 230 166
268 177 443 225 426 101 272 138 127 290 117 347 199 414 95 140 240 410 395 209
129 283 346 105 241 437 86 308 448 203 345 186 107 220 415 334 319 106 313 118
123 73 207 421 214 384 373 438 62 371 341 75 449 168 323 164 242 416 324 304
197 335 404 271 63 191 325 96 169 231 280 312 187 406 84 201 100 67 382 175
336 202 330 269 393 376 383 293 307 409 179 285 314 302 372 398 190 180 89 99
103 232 78 88 77 136 387 165 198 394 125 176 428 74 375 238 227 66 273 282 141
306 412 114 85 130 348 119 291 296 386 233 397 303 405 284 445 423 221 210 205
450 108 274 434 216 343 337 142 243 321 408 451 310 292 120 109 281 439 270
429 332 295 418 211 315 222 326 131 430 244 327 349 417 316 143 338 440 234
110 212 452 245 121 419 350 223 132 441 328 413 317 339 126 104 137 446 344
239 435 115 333 206 322 217 228 424 453 311 351 111 442 224 213 122 431 340
235 246 133 144 420 329 318
* * *
Table B.9: Ordering of the speech encoder bits for the 23.85 kbit/s mode:
_table_ ~8~(_j_)
* * *
0 4 6 145 251 360 466 7 5 3 47 48 49 50 51 262 263 264 265 266 146 252 361 467
151 257 366 472 148 254 363 469 149 255 364 470 156 371 150 256 365 471 147
253 362 468 52 2 1 157 372 267 19 21 12 17 18 20 16 25 13 10 14 24 23 22 26 8
15 53 268 31 152 153 154 155 258 259 260 261 367 368 369 370 473 474 475 476
158 373 9 33 11 159 374 54 269 28 27 160 375 34 35 29 46 32 30 55 270 37 36 39
38 40 161 376 41 42 43 44 45 56 162 271 377 185 196 174 79 57 411 90 163 305
389 378 283 68 187 400 294 198 307 92 70 186 413 176 59 91 58 412 380 165 81
164 272 175 80 401 402 390 391 197 306 69 274 273 379 285 296 284 295 188 60
199 82 93 71 381 414 177 166 456 308 403 98 76 286 61 275 386 135 423 171 102
392 204 87 182 65 94 208 124 72 350 193 313 393 408 445 309 230 419 297 241
113 219 189 128 317 415 116 328 200 339 382 434 178 64 404 83 437 223 134 192
444 112 439 139 287 167 448 212 459 222 240 233 97 302 397 234 170 276 181 455
229 438 101 280 138 127 298 117 355 203 426 95 140 244 422 407 213 129 291 354
105 245 449 86 316 460 207 353 190 107 224 427 342 327 106 321 118 123 73 211
433 218 396 385 450 62 383 349 75 461 172 331 168 246 428 332 312 201 343 416
279 63 195 333 96 173 235 288 320 191 418 84 205 100 67 394 179 344 206 338
277 405 388 395 301 315 421 183 293 322 310 384 410 194 184 89 99 103 236 78
88 77 136 399 169 202 406 125 180 440 74 387 242 231 66 281 290 141 314 424
114 85 130 356 119 299 304 398 237 409 311 417 292 457 435 225 214 209 462 108
282 446 220 351 345 142 247 329 420 463 318 300 120 109 289 451 278 441 340
303 430 215 323 226 334 131 442 248 335 357 429 324 143 346 452 238 110 216
464 249 121 431 358 227 132 453 336 425 325 347 126 104 137 458 352 243 447
115 341 210 330 221 232 436 465 319 359 111 454 228 217 122 443 348 239 250
133 144 432 337 326
* * *
#