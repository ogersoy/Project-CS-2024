# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides the protocol details for multimedia telephony
communication service and associated supplementary services in the IP
Multimedia (IM) Core Network (CN) subsystem based on the requirements from
3GPP TS 22.173 [2].
Multimedia telephony and supplementary services allow users to establish
communications between them and enrich that by enabling supplementary
services.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.173: \"IP Multimedia Core Network Subsystem (IMS) Multimedia
Telephony Service and supplementary services; Stage 1\".
[3] 3GPP TS 24.604: \"Communication Diversion (CDIV); Protocol specification
using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification
\".
[4] 3GPP TS 24.605: \"Conference (CONF) using IP Multimedia (IM) Core Network
(CN) subsystem; Protocol specification\".
[5] 3GPP TS 24.606: \"Message Waiting Indication (MWI) using IP Multimedia
(IM) Core Network (CN) subsystem; Protocol specification\".
[6] 3GPP TS 24.607: \"Originating Identification Presentation (OIP) and
Originating Identification Restriction (OIR) using IP Multimedia (IM) Core
Network (CN) subsystem; Protocol specification\".
[7] 3GPP TS 24.608: \"Terminating Identification Presentation (TIP) and
Terminating Identification Restriction (TIR) using IP Multimedia (IM) Core
Network (CN) subsystem; Protocol specification\".
[8] 3GPP TS 24.610: \"Communication HOLD (HOLD) using IP Multimedia (IM) Core
Network (CN) subsystem; Protocol specification\".
[9] 3GPP TS 24.611: \"Anonymous Communication Rejection (ACR) and
Communication Barring (CB) using IP Multimedia (IM) Core Network (CN)
subsystem; Protocol specification\".
[10] 3GPP TS 24.629: \"Explicit Communication Transfer (ECT) using IP
Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".
[11] 3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access
Protocol (XCAP) over the Ut interface for Manipulating Simulation Services\".
[12] 3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia telephony;
Media handling and interaction\".
[13] 3GPP TS 24.229: \"Internet Protocol (IP) multimedia call control protocol
based on Session Initiation Protocol (SIP) and Session Description Protocol
(SDP); Stage 3\".
[14] 3GPP TS 24.247: \"Messaging using the IP Multimedia (IM) Core Network
(CN) subsystem; Stage 3\".
[15] Void
[16] IETF RFC 3841 (August 2004): \"Caller Preferences for the Session
Initiation Protocol (SIP)\".
[17] 3GPP TS 24.647: \"Advice Of Charge (AOC) using IP Multimedia (IM)Core
Network (CN) subsystem; Protocol Specification\".
[18] 3GPP TS 24.654: \"Closed User Group (CUG) using IP Multimedia (IM) Core
Network (CN) subsystem, Protocol Specification\".
[19] 3GPP TS 24.239: \"IP Multimedia Subsystem (IMS) Flexible alerting
supplementary service\".
[20] 3GPP TS 24.238: \"Session Initiation Protocol (SIP) based user
configuration; stage 3\".
[21] 3GPP2 C.S0055-A: \"Packet Switched Video Telephony Services\".
[22] ETSI TS 181 005: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); Service and Capability
Requirements\".
[23] 3GPP TS 24.615: \"Communication Waiting (CW) using IP Multimedia (IM)
Core Network (CN) subsystem, Protocol Specification\".
[24] 3GPP TS 24.642: \"Completion of Communications to Busy Subscriber (CCBS)
Completion of Communications by No Reply (CCNR) using IP Multimedia (IM) Core
Network (CN) subsystem; Protocol specification\".
[25] 3GPP TS 24.182: \"**IP Multimedia Subsystem (IMS) Customized Alerting
Tones (CAT); Protocol specification** \".
[26] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[27] 3GPP TS 24.183: \"**IP Multimedia Subsystem (IMS) Customized Ringing
Signal (CRS); Protocol specification** \".
[28] IETF RFC 3362 (August 2002): \"Real-time Facsimile (T.38) - image/t38
MIME Sub-type Registration\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 21.905 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
CS Circuit Switched
CN Core Network
ICSI IMS Communication Service Identifier
IP Internet Protocol
IM IP Multimedia
MMTEL Multimedia Telephony
UDP User Datagram Protocol
UDPTL UDP Transport Layer
# 4 Overview of multimedia telephony communication service and associated
supplementary services in the IP Multimedia (IM) Core Network (CN) subsystem
## 4.1 General
In accordance with the service definition and requirements in 3GPP TS 22.173
[2], the IMS multimedia telephony communication service specified herein
allows multimedia conversational communication between two or more end points.
An end point is typically located in a UE, but can also be located in a
network entity.
As for traditional circuit-switched telephony, the protocols for the IMS
multimedia Telephony communication service allow a user to connect to any
other user, regardless of operator and access technology.
The IMS multimedia Telephony communication service consists of two principal
parts: a basic communication part, and an optional supplementary services
part.
## 4.1A Roles
### 4.1A.1 Multimedia telephony participant
A UE shall implement the role of a multimedia telephony participant.
### 4.1A.2 Multimedia telephony application server
An application server shall implement the role of a multimedia telephony
application server. Various application server usages are called out by
references to the various supplementary services, see subclause 4.3. It is an
implementation decision on how to allocate the functionality to one or more
application servers.
## 4.2 Overview of basic communication part
The basic communication part of an IMS multimedia telephony communication
service session is realised by a single SIP session. It utilises media
capabilities and flexibility provided by the SIP protocol and the 3GPP IMS
specifications. In accordance with the service definition in 3GPP TS 22.173
[2], media capabilities include RTP-based transfer of voice, real-time video,
text and data, and UDPTL-based transfer of fax (IETF RFC 3362 [28]), as well
as TCP/MSRP-based transfer of text, arbitrary files and sharing of media files
with predefined formats.
To ensure interoperability, media codecs and formats are fully specified for
RTP-based and MSRP-based transfer in:
\- 3GPP TS 26.114 [12] for 3GPP systems;
\- 3GPP2 C.S0055-A [21] for 3GPP2 systems; and
\- ETSI TS 181 005 [22] for fixed-broadband accesses.
NOTE: ETSI TS 181 005 [22] provides general rules for codecs and formats usage
within networks using fixed-broadband accesses. These rules are not specific
to IMS multimedia telephony communication services.
The service is highly dynamic in terms of media component usage: the protocols
allow a communication session to start with one or more media components, and
components can then be added and/or removed during the communication session.
The protocols allow both one-way and two ways transfer between end points.
Full duplex speech, and speech combined with other media components, are
typical media cases but the protocols do not mandate the use of speech in all
sessions.
## 4.3 Overview of supplementary services part
The supplementary services part of the IMS multimedia telephony communication
service consists of a number of specified supplementary services. These are
fully standardized to ensure interoperability between multiple end points, and
between end points and network control entities. The behaviour of
supplementary services is similar to supplementary services specified for CS
speech (TS 11). Supplementary services uses SIP as enabling protocol.
Configuration of supplementary services by the user should:
\- take place over the Ut interface using XCAP as enabling protocol as
described in 3GPP TS 24.623 [11]; or
\- use SIP based user configuration as described in 3GPP TS 24.238 [20] ;
NOTE: Other possibilities for user configuration, such as web-based
provisioning or pre-provisioning by the operator are outside the scope of the
present document, but are not precluded.
# 5 Basic Communication
## 5.1 IMS communication service identifier
URN used to define the ICSI for the IMS Multimedia Telephony Communication
Service: urn:urn-7:3gpp-service.ims.icsi.mmtel. The URN is registered at
http://www.3gpp.com/Uniform-Resource-Name-URN-list.html.
Summary of the URN: This URN indicates that the device supports the IMS
Multimedia Telephony Communication Service.
The URN is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms:
This URN is most useful in a communications application, for describing the
capabilities of a device, such as a phone or PDA.
Examples of typical use: Indicating that a mobile phone can support the IMS
Multimedia Telephony Communication Service.
Related standards or documents:
> 3GPP TS 24.173: \"IMS Multimedia Telephony Communication Service and
> Supplementary Services, stage 3\"
## 5.2 Session control procedures
The IMS multimedia telephony communication service can support different types
of media, including media types listed in 3GPP TS 22.173 [2]. The session
control procedures for the different media types shall be in accordance with
3GPP TS 24.229 [13] and 3GPP TS 24.247 [14], with the following additions:
a) Multimedia telephony is an IMS communication service and the P-Preferred-
Service and P-Asserted-Service headers shall be treated as described in 3GPP
TS 24.229 [13]. The coding of the ICSI value in the P-Preferred-Service and
P-Asserted-Service headers shall be according to subclause 5.1.
b) The multimedia telephony participant shall include the g.3gpp. icsi-ref
feature tag equal to the ICSI value defined in subclause 5.1 in the Contact
header field in initial requests and responses as described in 3GPP TS 24.229
[13].
c) The multimedia telephony participant shall include an Accept-Contact header
field containing the g.3gpp. icsi-ref feature tag containing the ICSI value
defined in subclause 5.1 in initial requests. If the user requests
capabilities other than multimedia telephony, the Accept-Contact header field
may contain other feature parameters and feature parameter values, and other
Accept-Contact header fields may be added to express user preferences as per
IETF RFC 3841 [16].
NOTE: How the user indicates other feature parameters and feature parameter
values is outside of the scope of this document.
## 5.3 Interworking
The multimedia telephony participant could receive initial requests that do
not contain the ICSI value defined in subclause 5.1 in the Accept-Contact
header but still invoke the IMS multimedia telephony communication service
application.
# 6 Supplementary Services
## 6.1 High level requirements
## 6.2 Originating Identification Presentation (OIP)
The OIP service is specified in 3GPP TS 24.607 [6].
## 6.3 Originating Identification Restriction (OIR)
The OIR service is specified in 3GPP TS 24.607 [6].
## 6.4 Terminating Identification Presentation (TIP)
The TIP service is specified in 3GPP TS 24.608 [7].
## 6.5 Terminating Identification Restriction (TIR)
The TIR service is specified in 3GPP TS 24.608 [7].
## 6.6 Communication Diversion (CDIV)
The CDIV service is specified in 3GPP TS 24.604 [3].
## 6.7 Communication Hold (HOLD)
The HOLD service is specified in 3GPP TS 24.610 [8].
## 6.8 Communication Barring (CB)
The CB service is specified in 3GPP TS 24.611 [9].
## 6.9 Message Waiting Indication (MWI)
The MWI service is specified in 3GPP TS 24.606 [5].
## 6.10 Conference (CONF)
The CONF service is specified in 3GPP TS 24.605 [4].
## 6.11 Explicit Communication Transfer (ECT)
The ECT service is specified in 3GPP TS 24.629 [10].
## 6.12 XCAP over Ut interface for Manipulating NGN Services
The XCAP is specified in 3GPP TS 24.623 [11].
## 6.13 Advice Of Charge (AOC)
The AOC service is specified in 3GPP TS 24.647 [17].
## 6.14 Closed User Groups (CUG)
The CUG service is specified in 3GPP TS 24.654 [18].
## 6.15 Three-Party (3PTY)
The 3PTY service is specified in 3GPP TS 24.605 [4].
NOTE: 3PTY can be seen as a special case of CONF and most of service
interactions for CONF apply also to 3PTY.
## 6.16 Flexible Alerting (FA)
The FA service is specified in 3GPP TS 24.239 [19].
NOTE: 3GPP TS 22.173 also contains a Reverse charging service, but no stage 3
work has been done for that in this release.
## 6.17 Communication Waiting (CW)
The CW service is specified in 3GPP TS 24.615 [23].
## 6.18 Completion of Communications to Busy Subscriber (CCBS) Completion of
Communications by No Reply (CCNR)
The Completion of Communications to Busy Subscriber (CCBS) Completion of
Communications by No Reply (CCNR) service is specified in 3GPP TS 24.642 [24].
## 6.19 Customized Alerting Tones (CAT)
The CAT service is specified in 3GPP TS 24.182 [25].
## 6.20 Customized Ringing Signal (CRS)
The CRS service is specified in 3GPP TS 24.183 [27].
###### ## Annex A (informative): Void
###### ## Annex B (informative): Void.
###### ## Annex C (informative): Void
###### ## Annex D (informative): Void
###### ## Annex E (informative): Void
###### ## Annex F (informative): Void
###### ## Annex G (informative): Void
###### ## Annex H (informative): Void
###### ## Annex I (informative): Void
###### ## Annex J (normative): IP-Connectivity Access Network specific
concepts when using EPS to access IM CN subsystem
# J.1 Scope
The present annex defines IP-CAN specific requirements for a multimedia
telephony communication service and associated supplementary services in the
IP Multimedia (IM) Core Network (CN) subsystem, where the IP-CAN is Evolved
Packet System (EPS).
# J.2 EPS aspects when connected to the IM CN subsystem
## J.2.1 Procedures at the UE
### J.2.1.1 Service Specific Access Control
The following information is provided by lower layer:
\- BarringFactorForMMTEL-Voice: barring rate for MMTEL voice;
\- BarringTimeForMMTEL-Voice: barring timer for MMTEL voice;
\- BarringFactorForMMTEL-Video: barring rate for MMTEL video; and
\- BarringTimeForMMTEL-Video: barring timer for MMTEL video.
Upon request from a user to establish a multimedia telephony communication
session as described in subclause 5.2, the UE shall:
1) if the multimedia telephony communication session to be established is an
emergency session, then skip the rest of steps below and continue with session
establishment as described in subclause 5.2;
2) retrieve SSAC related information mentioned above from lower layers;
3) if video is offered in the multimedia telephony communication session:
A) if back-off timer Tx is running, reject the multimedia telephony
communication session establishment and skip the rest of steps below; or
B) else, then:
I) draw a new random number \"rand1\" that is uniformly distributed in the
range 0 â‰¤ rand1 \< 1; and
II) if the random number \"rand1\" is lower than BarringFactorForMMTEL-Video,
then skip the rest of steps below and continue with session establishment as
described in subclause 5.2;
III) else, then;
i) draw a new random number \"rand2\" that is uniformly distributed in the
range 0 â‰¤ rand2 \< 1; and
ii) start back-off timer Tx with the timer value calculated using the formula:
Tx = (0,7 + 0,6*rand2) * BarringTimeForMMTEL-Video; and
iii) reject the multimedia telephony communication session establishment and
skip the rest of steps below;
4) if audio is offered in the multimedia telephony communication session:
A) if back-off timer Ty is running, reject the multimedia telephony
communication session establishment and skip the rest of steps below; or
B) else, then;
I) draw a new random number \"rand3\" that is uniformly distributed in the
range 0 â‰¤ rand3 \< 1; and
II) if the random number \"rand3\" is lower than BarringFactorForMMTEL-Voice,
then skip the rest of steps below and continue with session establishment as
described in subclause 5.2;
III) else, then;
i) draw a new random number \"rand4\" that is uniformly distributed in the
range 0 â‰¤ rand4 \< 1; and
ii) start timer Ty with the timer value calculated using the fomula:
Ty = (0,7 + 0,6*rand4) * BarringTimeForMMTEL-Voice; and
iii) reject the multimedia telephony communication session establishment;
NOTE: If the multimedia telephony communication implemenation and the access
stratum protocol implementation are located in separate physical entities, it
is expected that the interconnecting protocol supports the transfer of
information elements needed for the service specific access control
enforcement.
Service Specific Access Control is not activated when the UE is in other radio
accesses (e.g. UTRAN/GERAN). And when UE camping on E-UTRAN moves to other
radio accesses (e.g. UTRAN/GERAN), back-off timer (Tx or Ty or both) shall be
stopped if running.
#