# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document specifies the Radio Link Protocol (RLP) for circuit
switched data transmission within the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the Radio Link Protocol (RLP) for circuit
switched data transmission within a PLMN. RLP covers the Layer 2 functionality
of the ISO OSI Reference Model (ISO/IEC 7498 [22]). It is based on ideas
contained in ISO/IEC 3309 [21], ISO/IEC 4335 [20] and ISO/IEC 7809 [26] (HDLC
of ISO) as well as ITU-T Recommendation X.25 [30] and Q.92x (LAP-B and LAP-D
of ITU, respectively.) RLP has been tailored to the special needs of digital
radio transmission. RLP provides to its users the OSI Data Link Service
(ISO/IEC 8886 [24]).
RLP is intended for use with non-transparent data-transfer. Protocol
conversion may be provided for a variety of protocol configurations. Those
foreseen immediately are:
\- character-mode protocols using start-stop transmission (IA5);
\- X.25 LAP-B.
For reasons of better presentation, material about protocol conversion has
been placed within those Specifications concerned with the relevant Terminal
Adapters, i.e. 3GPP TS 27.002 [10] for the asynchronous case and 3GPP TS
27.003 [11] for the synchronous case. Care must be taken that that material
also applies to Interworking Functions; see 3GPP TS 29.007 [13].
The present document is valid for a PLMN in A/Gb mode as well as in Iu mode.
If text applies only for one of these systems it is explicitly mentioned by
using the terms \"A/Gb mode\" and \"Iu mode\". Please note, that the Gb
interface does not play any role in the scope of the present document although
the term \"A/Gb mode\" is used.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] Void.
[2] 3GPP TS 44.021: \"Rate adaption on the Mobile Station - Base Station
System (MS - BSS) interface\".
[3] 3GPP TS 48.004: \"Base Station System - Mobile services Switching Centre
(BSS - MSC) interface Layer 1 specification\".
[4] 3GPP TS 48.020: \"Rate adaption on the Base Station System - Mobile
services Switching Centre (BSS - MSC) interface\".
[5] 3GPP TS 25.410: \"UTRAN Iu interface: General Aspects and Principles\".
[6] 3GPP TS 25.411: \"UTRAN Iu interface Layer 1\".
[7] 3GPP TS 25.414: \"UTRAN Iu interface data transport and transport
signalling\".
[8] 3GPP TS 25.415: \"UTRAN Iu interface user plane protocols\".
[9] 3GPP TS 27.001: \"General on Terminal Adaptation Functions (TAF) for
Mobile Stations (MS)\".
[10] 3GPP TS 27.002: \"Terminal Adaptation Functions (TAF) for services using
Asynchronous bearer capabilities\".
[11] 3GPP TS 27.003: \"Terminal Adaptation Functions (TAF) for services using
Synchronous bearer capabilities\".
[12] Void.
[13] 3GPP TS 29.007: \"General requirements on interworking between the Public
Land Mobile Network (PLMN) and the Integrated Services Digital Network (ISDN)
or Public Switched Telephone Network (PSTN)\".
[14] ITU-T Recommendation Q.920: \"ISDN user-network interface data link layer
- General aspects\".
[15] ITU-T Recommendation Q.921: \"ISDN user-network interface - Data link
layer specification\".
[16] ITU-T Recommendation Q.921bis: \"Abstract test suite for LAPD conformance
testing\".
[17] ITU-T Recommendation Q.922: \"ISDN data link layer specification for
frame mode bearer services\".
[18] ITU-T Recommendation V.42bis: \"Data compression procedures for Data
Circuit-terminating Equipment (DCE) using error correction procedures\".
[19] ITU-T Recommendation X.25: \"Interface between Data Terminal Equipment
(DTE) and Data Circuit-terminating Equipment (DCE) for terminals operating in
packet mode and connected to public data networks by dedicated Circuit\".
[20] ISO/IEC 4335: \"Information technology - Telecommunications and
information exchange between systems - High-level Data Link Control (HDLC)
procedures - Elements of procedures\".
[21] ISO/IEC 3309: \"Information technology - Telecommunications and
information exchange between systems - High-level Data Link Control (HDLC)
procedures - Frame structure\".
[22] ISO/IEC 7498: \"Information technology - Open Systems Interconnection -
Basic Reference Model\".
[23] ISO/IEC 8885: \"Information technology - Telecommunication and
information exchange between systems - High-level Data Link Control (HDLC)
procedures - General purpose XID frame information field content and format\".
[24] ISO/IEC 8886: \"Information technology - Open Systems Interconnection -
Data link service definition\".
[25] ISO/TR 8509: \"Information processing systems - Open Systems
Interconnection - Service conventions\".
[26] ISO/IEC 7809: \"Information technology - Telecommunications and
information exchange between systems - High-level Data Link Control (HDLC)
procedures - Classes of procedures\".
[27] ISO/IEC 7776: \"Information technology - Telecommunications and
information exchange between systems - High-level data link control procedures
- Description of the X.25 LAPB-compatible DTE data link procedures\".
[28] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[29] 3GPP TS 43.051: \"GSM/EDGE Radio Access Network (GERAN) overall
description; Stage 2\".
[30] ITU-T Recommendation X.25: \"Interface between Data Terminal Equipment
(DTE) and Data Circuit-terminating Equipment (DCE) for terminals operating in
the packet mode and connected to public data networks by dedicated circuit\".
## 2.1 Definitions and abbreviations
### 2.1.1 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [28] and the following apply:
ABM Asynchronous Balanced Mode
ADM Asynchronous Disconnected Mode
ATM Asynchronous Transfer Mode.
C/R Command/Response bit
DISC Disconnect frame
DM Disconnected Mode frame
DTX Discontinuous Transmission
FCS Frame Check Sequence
L2R Layer 2 Relay function
N(R) Receive sequence number
N(S) Send sequence number
NULL Null information frame
P/F Poll/Final bit
REJ Reject frame
REMAP Remap frame
RLP Radio Link Protocol
RNR Receive Nor ready frame
RR Receive Ready frame
SABM Set Asynchronous Balanced Mode frame
SREJ Selected reject frame
STM Synchronous Transfer Mode
TEST Test frame
UA Unnumbered Acknowledge frame
UI Unnumbered Information frame
XID Exchange Identification frame
### 2.1.2 Definitions
For the purposes of the present document, the following terms and definitions
apply:
**A/Gb mode: system or a subsystem operates in A/Gb mode if an A or Gb
interface is used between the radio access network and the core network.**
**backwards compatibility:** RLP defines several backwards-compatible
versions. That means that a newer version can interwork with an older one
without changing the older one. This is realized by a fall back mechanism
during XID exchange.
**command:** instruction represented in the RLP header, causing the receiving
RLP entity to execute a specific function.
**frame check sequence:** field of redundant information based on a cyclic
code, used for error detection.
**I + S frame:** RLP frame that is used for user information transfer,
carrying supervisory information piggyback.
**improper frame:** RLP frame having an FCS error or having a header the
contents of which is inconsistent with the present document.
**Iu mode:** system or a subsystem operates in Iu mode if an Iu-CS or Iu-PS
interface is used between the radio access network and the core network. It
operates in UTRAN Iu mode if UTRAN is used as radio access network. It
operates in GERAN Iu mode if GERAN is used as radio access network.
**non-transparent:** in PLMN data transmission, a configuration where at layer
2, protocol information of the fixed network is mapped on RLP elements, and
vice versa.
**piggybacking:** means by which one and the same frame can carry both user
information and RLP related supervisory information.
**response:** reply represented in the RLP-header, by which the sending RLP
entity reports back about its status.
**RLP frame:** sequence of contiguous bits, representing an RLP procedural
element.
**RLP header:** that part of an RLP frame that encodes either a command or a
response, located at the beginning of the RLP frame.
**S frame:** RLP frame that contains supervisory information in the absence of
user information.
**transparent:** in PLMN data transmission, a configuration where at layer 2
(and also at the layers above) no protocol conversion takes place.
**U frame:** RLP frame that contains unnumbered protocol control information.
# 3 Introduction
Three versions of RLP are defined:
\- RLP version 0: single-link basic version;
\- RLP version 1: single-link extended version (e.g. extended by data
compression);
\- RLP version 2: multi-link version.
RLP uses one substream on one physical link (single-link) or from 1 up to 4
(multi-link) substreams on one or more physical links. However, the RLP multi-
link version is designed to be able to support up to 8 substreams.
In A/Gb and GERAN Iu mode:
\- If in the call set-up signalling, either end indicates that it cannot
support multi-link operation, neither end shall require usage of RLP‑versions
higher than 1. If the BC negotiation during call set-up results in a
possibility for multi-link operation during the call, both ends shall require
and accept RLP version 2 only;
\- If the BC-IE sent by the UE in the SETUP or CALL CONFIRM message indicates
\"maximum number of traffic channels\" = \"1 TCH\" and WAIUR ≤ 14,4 kbit/s and
the BC-IE sent by the UE in the CALL CONFIRM message (MT case) or by the MSC
in the CALL PROCEEDING message (MO case) indicates UIMI = \"User initiated
modification not allowed/required/applicable\" or \"User initiated
modification up to 1 TCH/F allowed/may be requested\", this shall be
interpreted as if at least one end does not support multi-link operation, and
neither end shall require an RLP version higher than 1.
In UTRAN Iu mode, either end is allowed to request the usage of any
RLP‑version.
RLP makes use of an underlying FEC (Forward Error Correction) mechanism. For
RLP to perform adequately it is assumed that the basic radio channel together
with FEC provides for a block error rate of less than 10 %, where a block
consists of 240 bits or 576 bits (Further study on the BLER for 576-bit blocks
is needed). Furthermore, it is assumed that in case of multi-link RLP the
difference of the delay between all physical links is less than timer T4.
In A/Gb mode and in GERAN Iu mode, RLP frames are of a fixed size of 240
(TCH/F4,8 and TCH/F9,6 channel codings) or 576 bits (TCH/F14,4, TCH/F28,8 and
TCH/F43,2 channel codings). In UTRAN Iu mode, the RLP frame size does not
depend on the channel coding, only 576 bit frames are used.
RLP entities running only in an UTRAN Iu mode environment need only to support
the 576 bit frame length. The REMAP function is not necessary. RLP entities
running in both of the systems have to support the REMAP function. In a
handover from UTRAN Iu mode to A/Gb mode or GERAN Iu mode the frame either
stays 576 bits long or changes from 576 bits to 240 bits incurring a REMAP. In
a handover from A/Gb mode or GERAN Iu mode to UTRAN Iu mode the frame either
stays 576 bits long or changes from 240 bits to 576 bits incurring a REMAP.
In A/Gb mode, RLP frames are sent in strict alignment with the radio
transmission. (For details, see 3GPP TS 44.021 ([2]). Whenever a frame is to
be sent, the RLP entity has to provide the necessary protocol information to
be contained in it.
Provision is made for Discontinuous Transmission (DTX).
RLP spans from the User Equipment (UE) to the interworking function (IWF),
located at the nearest Mobile Switching Centre (MSC), or beyond. Depending on
the exact location of the IWF, handover of the UE may result in link-reset or
even total loss of the connection.
The UE shall initiate the RLP link. In addition the MSC/IWF may initiate the
RLP link.
In the terminology of HDLC, RLP is used in a balanced configuration, employing
asynchronous operation, i.e. either station has the right to set-up, reset, or
disconnect a link at any time. Procedural means are provided for to deal with
contentious situations, should they ever occur.
RLP is full-duplex in the sense that it allows for information to be
transferred in both directions simultaneously.
# 4 Frame structure
## 4.1 Basic frame structure
In A/Gb mode and GERAN Iu mode, an RLP-frame has a fixed length of either 240
bits, used when the channel coding is TCH/F4,8 or TCH/F9,6, or 576 bits, used
when the channel coding is TCH/F14,4, TCH/F28,8 or TCH/F43,2. In UTRAN Iu
mode, the RLP-frame has a fixed length of 576 bits.
A frame consists of a header, an information field, and an FCS (frame check
sequence) field. The size of the components depends on the radio channel type,
RLP version and on the RLP frame. As a benefit of using strict alignment with
underlying radio transmission there is no need for frame delimiters (like
flags etc.) in RLP. In consequence, there is no \"bit-stuffing\" necessary in
order to achieve code transparency.
a) 240 bit frame size
* * *
                                               Header   Information   FCS
version 0 and 1, version 2 (U frames only) 16 bit 200 bit 24 bit version 2 (S
and I+S frames only) 24 bit 192 bit 24 bit
* * *
b) 576 bit frame size
* * *
                                                Header   Information   FCS
version 0, 1, and version 2 (U frames only) 16 bit 536 bit 24 bit version 2 (S
and I+S frames only) 24 bit 528 bit 24 bit
* * *
Figure 1: Frame structure
## 4.2 RLP header
An RLP-header carries one of three types of control information, the first
being unnumbered protocol control information (U frames), the second being
supervisory information (S frames), the third being user information carrying
supervisory information piggybacked (I + S frames).
## 4.3 Order of transmission
The header, as defined in subclause 5.2, shall be transmitted from left to
right. The FCS shall be transmitted commencing with the highest order term.
The order of bit transmission for the information field is from left to right.
## 4.4 Frame check sequence
The FCS shall be the ones complement of the modulo 2 sum of:
a) the remainder of:
For 240 bit frames:
x216 (x23 + x22 + x21 + x20 + x19 + x18 + x17 + x16 + x15 + x14 + x13 + x12 +
x11 + x10 + x9 + x8 + x7 + x6 + x5 + x4 + x3 + x2 + x + 1)
For 576 bit frames:
x552 (x23 + x22 + x21 + x20 + x19 + x18 + x17 + x16 + x15 + x14 + x13 + x12 +
x11 + x10 + x9 + x8 + x7 + x6 + x5 + x4 + x3 + x2 + x + 1
divided modulo 2 by the generator polynomial:
x24 + x23 + x21 + x20 + x19 + x17 + x16 + x15 + x13 + x8 + x7 + x5 + x4 + x2 +
1
and
b) the remainder of the division modulo 2 by the generator polynomial:
x24 + x23 + x21 + x20 + x19 + x17 + x16 + x15 + x13 + x8 + x7 + x5 + x4 + x2 +
1
of the product of x24 by the content of the frame, excluding the FCS field.
(The first bit transmitted corresponds to the highest order term.)
**Implementation note:** As a typical implementation, at the transmitter, the
initial content of the register of the device computing the remainder of the
division is pre-set to all ones and is then modified by division by the
generator polynomial (as described above) of the header and information field;
the ones complement of the resulting remainder is transmitted as the 24 bit
FCS sequence.
At the receiver, the initial content of the register of the device computing
the remainder is pre-set to all ones. The final remainder after multiplication
by x24 and then division (modulo 2) by the generator polynomial:
x24 + x23 + x21 + x20 + x19 + x17 + x16 + x15 + x13 + x8 + x7 + x5 + x4 + x2 +
1
of the serial incoming protected bits and the FCS will be:
0 1 1 0 1 1 0 1 1 0 0 0 1 0 0 1 0 0 1 1 0 0 0 0 (x23 to x0, resp.)
in the absence of transmission errors.
# 5 Elements and procedure
## 5.1 Modes
An RLP entity can be in one of two modes:
\- Asynchronous Balanced Mode (ABM);
\- Asynchronous Disconnected Mode (ADM).
### 5.1.1 Asynchronous Balanced Mode (ABM)
In ABM, which is the data link operational mode, either RLP entity may send
commands at any time and may initiate response frame transmission without
receiving explicit permission to do so from the other RLP-station. In ABM,
frames shall be used for information field transfer and/or to indicate status
changes in the RLP-station.
### 5.1.2 Asynchronous Disconnected Mode (ADM)
In ADM, which is the data-link non-operational mode, the RLP entity shall be
logically disconnected from the data link and shall, therefore, neither
transmit nor accept numbered information frames.
The RLP entity shall, however, be permitted to transmit and accept NULL, DM,
UI, TEST and XID frames. Either RLP entity can issue an SABM command at any
time, in order to terminate the ADM state. In that case, entrance of the ABM
state will be indicated by a UA response from the opposite station. If the
opposite station is not able to enter ABM, it will indicate this by a DM
response. All commands other than those mentioned above and any unsolicited
response will be ignored in ADM under all circumstances.
## 5.2 Header and parameters
The formats defined for the header are listed in figure 2.
### 5.2.1 Generally used bits
NOTE 1: C/R = COMMAND/RESPONSE BIT\ P/F = POLL/FINAL BIT\ X = DON\'T CARES
* * *
       M1M2M3M4M5                            
       1 1 1 0 0    S A B M                  
       0 0 1 1 0    U A                      
       0 0 0 1 0    D I S C
S1 S2 1 1 0 0 0 D M 0 0 R R 1 1 1 1 0 NULL 0 1 R E J 0 0 0 0 0 U I 1 0 R N R 1
1 1 0 1 X I D 1 1 S R E J 0 0 1 1 1 T E S T 1 0 0 0 1 REMAP
* * *
**Versions 0 and 1:**
NOTE 2: N(S) : Bit 4 low order bit\ N(R) : Bit 11 low order bit
* * *
U C/R X X 1 1 1 1 1 1 P/F M1 M2 M3 M4 M5 X S C/R S1 S2 0 1 1 1 1 1 P/F
^______________^ N (R) ^______________^  
I+S C/R S1 S2 ^______________^ N (S) ^______________^ P/F ^______________^ N
(R) ^______________^  
bit 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
* * *
**Version 2:**
NOTE 3: S = L2R Status Bit\ N(S) : Bit 1 low order bit\ N(R) : Bit 14 low
order bit\ UP : UP bit (only if negotiated, \'don\'t care\' otherwise)
* * *
U C/R X X 1 1 1 1 1 1 P/F M1 M2 M3 M4 M5 X  
S X X X 0 1 1 1 1 1 P/F C/R S1 S2 ^______________^ N(R) ^______________^ X UP  
I+S ^______________^ N(S) ^______________^ P/F C/R S1 S2 ^______________^ N(R)
^______________^ S UP  
bit 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
* * *
Figure 2: Header formats
#### 5.2.1.1 Command/response bit, C/R
The C/R-bit is used to indicate whether the frame is a command or response
frame and whether the P/F‑bit is to be interpreted as a poll or final bit,
resp. For commands, the C/R bit shall be set to \"1\", for responses it shall
be set to \"0\".
#### 5.2.1.2 Poll/Final bit, P/F
The P/F-bit is used to mark a special instance of command/response exchange.
With a command, it is called the P-bit, with a response, it is called the
F-bit. In any one direction, only one P/F-bit exchange may be outstanding at
any time. A response with the F-bit set to \"1\" shall always reflect the
latest receive status of the RLP entity.
A P/F-bit exchange always starts with a command frame with the P-bit set to
\"1\", which shall be answered by a response frame with the F-bit set to \"1\"
at the earliest response opportunity.
No unsolicited F-bit = \"1\" is allowed. Such a frame shall be considered
\"improper\" (see subclause 5.3.1). In ABM, the use of the P/F-bit with
numbered information exchange is only allowed for checkpoint-recovery (see
subclause 5.3.3).
### 5.2.2 Unnumbered frames, U
#### 5.2.2.1 Set asynchronous balanced mode SABM (11100)
The SABM encoding is used as a command only. It is always used with the P-bit
set to \"1\".
The SABM command is used either to initiate a link for numbered information
transfer, i.e. to go from ADM to ABM, or to reset a link already established
for numbered information transfer. With an SABM command, no information
transfer is allowed.
When issuing an SABM, the RLP entity has set to zero its internal variables
for sending and receiving numbered information. The other RLP entity, on
receiving an SABM command, will either confirm it by setting to zero its
internal variables for sending and receiving numbered information and then
issuing an UA (unnumbered acknowledgement) response or reject it by sending a
DM (disconnected mode) response. In the former case, both entities have
entered ABM and numbered information transfer may commence. In the latter
case, both entities are in ADM.
When an SABM command is issued, a loss of information may occur. Appropriate
action is in the responsibility of the layers above.
#### 5.2.2.2 Unnumbered Acknowledge. UA (00110)
The UA encoding is used as a response only. It is used to positively
acknowledge an SABM or DISC command. With the UA response, no information
transfer is allowed. In version 2, the UA response is sent no sooner than T4
(see subclause 5.5.6) after the last information frame sent. Information
frames received within a period of T4 after reception of the SABM are
discarded.
#### 5.2.2.3 Disconnect, DISC (00010)
The DISC encoding is used as a command only. It is used to disestablish a
link, previously established for numbered information transfer, i.e. to
terminate ABM and go into ADM. With the DISC command, no information transfer
is allowed.
The other RLP-entity shall answer with a UA response before actioning the DISC
command. When a DISC command is actioned, loss of information may occur. It is
the responsibility of the layers above, to provide for a \"graceful\"
disconnect.
#### 5.2.2.4 Disconnected Mode, DM (11000)
The DM encoding is used as a response only. It is used by RLP entity to report
that it is in ADM and, as an answer to SABM, that it is (possibly temporary)
unable to action a mode setting command. With the DM response, no information
transfer is allowed.
#### 5.2.2.5 Unnumbered Information, UI (00000)
The information field is to be interpreted as unnumbered information.
Unnumbered Information (UI) frames can be sent in both ADM and ABM. There is
no acknowledgement of receipt of UI-frames within RLP.
#### 5.2.2.6 Exchange Identification, XID (11101)
The information field is to be interpreted as exchange identification. This
frame is used to negotiate and renegotiate parameters of RLP and layer 2 Relay
function. XID frames can be sent in both ADM and ABM.
The negotiation procedure is one step i.e. one side will start the process by
sending an XID command, offering a certain set of parameters from the
applicable parameter repertoire (see table 1) the sending entity wants to
negotiate proposing values within the allowed range. In return, the other side
will send an XID response, either confirming these parameter values by
returning the requested values, or offering higher or lower ones in their
place (see table 1 for sense of negotiation), except when the indicated RLP
version is a lower one where a limited set of those parameters presented in
the XID command may be answered according to the negotiated version. In RLP
versions higher than \"0\", any unrecognisable parameters will be ignored.
Default values will apply to those parameters which are not commented upon by
the responding side (see subclause 5.4 for default values). This normally will
end the negotiation process. XID frames are always used with the P/F-bit set
to \"1\".
Without any prior XID exchange, default values will apply (see subclause 5.4).
A negotiation of data compression parameters (see table 1) is only allowed in
ADM. In addition, in RLP version 2, negotiation of RLP version N°(see table 1)
is only allowed in ADM.
In the case of a collision of XID commands, all XID commands shall be ignored.
The UE shall restart the parameter negotiation on expiry of T1, while the
Interworking Function shall do so on expiry of twice the value of T1. An
unsuccessful XID exchange shall be repeated on expiry of T1. After N2 times of
unsuccessful repetition, the link shall be disconnected.
In table 1 a list of parameters is given which constitute the parameter
repertoire. In addition, the format of the XID information field is given.
Table 1: XID parameters
+----------+------+--------+----------+-------+----------+----------+ | P | Type | Length | Format | Units | Sense of | Valid in | | arameter | | | | | Neg | Versions | | Name | | | (87 | | otiation | | | | | | 654321) | | | | +----------+------+--------+----------+-------+----------+----------+ | RLP | 1 | 1 | bbbbbbbb | ./. | down | ≥ 0 | | version | | | (note 1) | | | | | N° | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | IWF to | 2 | 1 | 00bbbbbb | ./. | down | 0..1 | | UE | | | | | | | | window | | | | | | | | size | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | IWF to | 2 | 1 | 00bbbbbb | 8 | down | ≥ 2 | | UE | | | | | | | | window | | | | | | | | size | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | UE to | 3 | 1 | 00bbbbbb | ./. | down | 0..1 | | IWF | | | | | | | | window | | | | | | | | size | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | UE to | 3 | 1 | 00bbbbbb | 8 | down | ≥ 2 | | IWF | | | | | | | | window | | | | | | | | size | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Acknowl | 4 | 1 | bbbbbbbb | 10ms | up | ≥ 0 | | edgement | | | | | | | | T | | | | | | | | imer(T1) | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Retran | 5 | 1 | bbbbbbbb | ./. | up | ≥ 0 | | smission | | | | | | | | attempts | | | | | | | | (N2) | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Reply | 6 | 1 | bbbbbbbb | 10ms | up | ≥ 0 | | delay | | | | | | | | (T2) | | | | | | | | (note 2) | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Com | 7 | 4 | aaaa | ./. | none | ≥ 1 | | pression | | | | | | | | PT | | | 00bb | ./. | s | | | | | | | | ee ITU-T | | | P0 | | | cccccccc | ./. | Q.92 | | | | | | | | 1 [15] | | | P1 low | | | cccccccc | ./. | | | | | | | | | down | | | P1 high | | | dddddddd | | | | | | | | | | down | | | P2 | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Re-se | 8 | 1 | bbbbbbbb | 10 ms | up | ≥ 2 | | quencing | | | | | | | | timer | | | | | | | | (T4) | | | | | | | | (note 2) | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | Optional | 9 | 1 | bbbbbbbb | ./. | down | ≥ 2 | | features | | | | | | | +----------+------+--------+----------+-------+----------+----------+ | NOTE 1: | | | | | | | | Ch | | | | | | | | aracters | | | | | | | | \"a\", | | | | | | | | \"b\", | | | | | | | | \"c\" | | | | | | | | and | | | | | | | | \"d\" | | | | | | | | indicate | | | | | | | | a bit | | | | | | | | which is | | | | | | | | part of | | | | | | | | the | | | | | | | | p | | | | | | | | arameter | | | | | | | | value in | | | | | | | | q | | | | | | | | uestion. | | | | | | | | Pa | | | | | | | | rameters | | | | | | | | i | | | | | | | | ndicated | | | | | | | | by \"a\" | | | | | | | | are not | | | | | | | | neg | | | | | | | | otiable. | | | | | | | | | | | | | | | | NOTE 2: | | | | | | | | In case | | | | | | | | of | | | | | | | | neg | | | | | | | | otiation | | | | | | | | of this | | | | | | | | p | | | | | | | | arameter | | | | | | | | it may | | | | | | | | be | | | | | | | | n | | | | | | | | ecessary | | | | | | | | to | | | | | | | | n | | | | | | | | egotiate | | | | | | | | also the | | | | | | | | other | | | | | | | | timer | | | | | | | | values | | | | | | | | (e.g. \ | | | | | | | | "Acknowl | | | | | | | | edgement | | | | | | | | timer\" | | | | | | | | (T1)). | | | | | | | +----------+------+--------+----------+-------+----------+----------+
The type and length are encoded within one octet, the type field occupying
bits 8 to 5 and the length field occupying bits 4 to 1; 1 resp. 5 being the
least significant bit. The least significant bit shall always be transmitted
first.
A parameter item consists of the type/length-octet followed by the value of
that parameter, where the length-indicator gives the number of octets the
value actually occupies. Such parameter items may be arranged in arbitrary
order, with the exception of the RLP version number, which shall be sent first
in RLP versions higher than \"0\". The parameter items must begin in the first
octet of the XID-information field and follow on contiguously. The parameter
list is delimited by parameter type zero.
#### 5.2.2.7 Test, TEST (00111)
The information field of that frame is to be interpreted as test information.
Test frames can be sent in both ADM and ABM. A test sequence is always
initiated by sending a TEST command in one direction and completed by sending
a TEST response in the other direction.
#### 5.2.2.8 Null information, NULL (11110)
In ADM, null-frames shall be sent each time there is a send opportunity but no
UI, TEST or XID frame is awaiting transmission.
In ABM, null-frames shall be sent in reset state if there is a send
opportunity and no unnumbered frames are to be sent.
The information field is to be interpreted as null information i.e. the
information field is not used and its contents may be arbitrary.
#### 5.2.2.9 REMAP (10001)
A REMAP-exchange can only take place in ABM following a change of channel
coding. REMAP frames are always used with the P/F-bit set to \"0\". The
exchange is started by the mobile-end which sends a REMAP command U-frame in
the information field of which the RLP-entity indicates the N(R) of the frame
- according to the \'old\' frame format \- from which the network-end should
resend the information mapped into a frame format corresponding to the new
channel coding. The mobile-end sends a REMAP-frame on every sending
opportunity until a responding REMAP‑frame is received from the network-end.
The network-end answers by sending a REMAP U-frame with the C/R-bit set to
\'Response\'. In the information-field the network-end indicates the
N(R)-number of the frame from which the mobile-end should remap the
information into the new frame format. The network-end responds to all
REMAP‑commands it receives as long as it is in the REMAP synchronisation
state. The network sends a numbered S frame with poll bit P=1 or an I+S frame
after the first REMAP frame to the user equipment to compel it to acknowledge
the end of the REMAP condition. This frame is guarded by T1. Upon reception of
an I+S frame or an S frame with the final bit F=1 from the UE, the IWF exists
the REMAP synchronisation state. Any REMAP-acknowledgement that may arrive at
the mobile-end after one of them has been received is discarded by the mobile-
end. The RLP shall supervise the synchronisation state by a timer with the
value of N2*T1. If the network-end does not receive an appropriate U‑frame
within N2*T1, it enters ADM. If the mobile-end does not receive a response
within N2×T1 measured from the transmission of the first command, it enters
ADM.
In addition to the N(R)-information the REMAP-frame information field can
include any XID-parameters that should be renegotiated because of the change
of channel coding. The procedures concerning these XID-parameters are as
defined in subclause 5.2.2.6 except that the mobile-end always starts the
negotiation. Also the mapping of the parameters is as defined in subclause
5.2.2.6 except that the first two octets in the REMAP information field are
occupied by the N(R)-number (The LSB is transmitted first). The information
field shall always include parameter type zero, which delimits the XID-
parameter list.
After the change of channel coding, default values according to the new
channel coding apply until new values have been negotiated by the REMAP or XID
procedure. Default values according to the new channel coding also apply for
those XID parameters that are not included in the REMAP information field.
Values for XID parameters whose negotiation is only allowed in ADM remain
valid after change of channel coding.
* * *
Header 16 bits N(R) 6 bits xxxxxxxxxx XID parameters 00000000 xxxxxx FCS 24
bits Information field either 200 or 536 bits x= don\'t care  
\
* * *
a) version 0 and 1
* * *
Header 16 bits N(R) 9 bits xxxxxxx XID parameters 00000000 xxxxxx FCS 24 bits
Information field either 200 or 536 bits x= don\'t care  
\
* * *
b) version 2
Figure 3: REMAP U-frame format
### 5.2.3 Supervisory frames, S, and numbered information transfer and
supervisory frames combined, I+S
In ABM, there are cases where there is no user information pending
transmission. In consequence, supervisory (S) frames alone must be conveyed.
In such cases, the information field is to be interpreted as null information,
i.e. the information field is not used and may be of arbitrary contents.
For reasons of optimization in the special situation of digital radio
transmission, numbered information transfer frames carry also supervisory type
information (\"piggy-backing\"). Numbered information can be exchanged only in
ABM.
NOTE: The extent to which piggy-backing is used by the sending RLP entity is
optional. An RLP entity receiving any of allowed piggy-backed formats,
however, shall take the appropriate actions. Implementers should be aware that
not using the full capability of piggy-backing could, in certain
circumstances, result in a less than optimal performance.
#### 5.2.3.1 Numbering
Each I frame is sequentially numbered and may have the value 0 through M‑1,
where M is the modulus. The modulus M is 62 (single-link) or 496 (multi-link).
#### 5.2.3.2 Send Sequence number, N(S)
The send sequence number contains the number of the I frame. With the
exception of SREJ conditions, information frames are transmitted in numerical
order of their N(S). If multiple substreams are used, the frames may arrive at
the receiver in another order. Normal information transfer is halted, when the
number of outstanding, unacknowledged frames is equal to the currently
established window size (see subclause 5.4).
#### 5.2.3.3 Receive sequence number, N(R)
The N(R) field is used in ABM to designate the next information frame to be
sent by the other RLP entity and to confirm that all frames up to and
including N(R) - 1 have been received properly. As an exception to this, in
the case of SREJ (selective reject), N(R) designates the information frame
that is selectively rejected and thus requested for retransmission. In this
case, no previously received frames are confirmed.
#### 5.2.3.4 L2R Status bit
The L2R status bit set to \"1\" indicates that the L2R PDU transported in the
information field of the RLP PDU contains at least a status octet. Otherwise,
the L2R PDU contains only user data. The bit is only used for RLP-version 2.
#### 5.2.3.5 Receive ready, RR (00)
The RR encoding can be used either as command or response. In ABM, it is used
by an RLP entity to confirm all information frames up to and including N(R)‑1.
In doing so, the RLP-station allows the other station to transmit up to k
additional information frames, counting from N(R) onwards. The issue of an RR
command/response clears any previous busy condition in that direction.
#### 5.2.3.6 Reject, REJ (01)
The REJ encoding can be used either as command or response. It is used by an
RLP entity to indicate that in numbered information transfer one or more out-
of sequence frames have been received. Frames up to and including N(R)‑1 have
been received correctly, frames N(R) and following are requested to be
retransmitted. Following retransmission of those frames, further frames
awaiting initial transmission may be sent. With respect to each direction of
transmission, only one REJ condition may exist at any given time.
A REJ condition is cleared:
\- on receipt of the frame numbered N(R);
\- on time-out;
\- or on reset (SABM).
An REJ shall be sent at the earliest opportunity. On time-out, REJ frames
shall not be repeated. An RLP‑entity receiving an REJ frame with the same
N(R), which has already been the starting frame of a retransmission sequence
due to P/F‑bit checkpointing, shall inhibit the retransmission due to that
particular REJ frame.
#### 5.2.3.7 Receive not ready, RNR (10)
The RNR encoding can be used either as command or response. It is used by an
RLP entity to indicate that it is temporarily not ready to receive numbered
information frames. In that case, the RLP entity is said to be in the busy
condition. All frames up to and including N(R)‑1 shall be considered
acknowledged. Subsequent frames, if any, shall not be considered confirmed.
The acceptance status of those is a matter of further status exchange.
#### 5.2.3.8 Selective reject, SREJ (11)
The SREJ encoding can be used either as command or response. The SREJ
command/response is used to request retransmission of a single frame, thus,
under certain circumstances, providing for more efficient error recovery than
by REJ. No acknowledgement of received I frames is indicated by an SREJ frame,
thus allowing an RLP entity to transmit one or more SREJ frames with a
different N(R) before earlier SREJ conditions have been cleared.
An SREJ condition shall be cleared:
\- on receipt of an information frame with N(S) equal N(R) of the SREJ;
\- on time out;
\- on reset (SABM).
No SREJ shall be issued during a pending REJ condition. For each frame, only
one SREJ condition may exist at any time.
SREJ frames shall be sent at the earliest possibility. On time-out, SREJ
frames may be repeated.
NOTE: Sending SREJ commands/responses is not mandatory.
#### 5.2.3.9 Upgrading Proposal bit, UP bit
In version 2, the UP bit in the S and I+S frame headers may be used by the IWF
to indicate to the UE that a service level upgrading will increase the
throughput, and is used in accordance with 3GPP TS 27.001 [9] and 3GPP TS
29.007 [13]. The usage of the UP bit is negotiated by XID exchange.
## 5.3 Error Recovery
### 5.3.1 Improper frames
Frames containing an FCS error or having a control field the contents of which
is not implemented or inconsistent with those defined in the present document
are called improper frames. Improper frames shall be ignored, i.e. the
receiving RLP station shall not make any use of their contents.
### 5.3.2 N(S) sequence error
In numbered information transfer, any information frame with an N(S) out of
the normal sequence shall lead to an N(S) sequence error condition, unless
that frame is requested for retransmission by an SREJ, sent at an earlier
time. In case multiple substreams make up a connection when the multi-link
version is used the received frames must be re‑sequenced. For that a timer T4
defines a re-sequencing period (see subclause 5.4) during which frames may be
out‑of‑order. An N(S) sequence error condition only occurs if the N(S) arrives
after the expiry of T4. There are three mechanisms to deal with N(S) sequence
errors:
\- REJ recovery;
\- SREJ recovery;
\- P/F-bit recovery (checkpointing).
The first two being the responsibility of the receiving station, the last
being the responsibility of the sending station. There are no strict rules as
to whether REJ or SREJ recovery shall be applied, however, if a station
decides to initiate REJ or SREJ recovery, it shall do so at the earliest
opportunity. The information part of out-of sequence frames shall be
discarded, unless the receiving station intends to initiate SREJ recovery.
### 5.3.3 N(R) error
Any confirming N(R) that is not in the range of the window size shall be
ignored.
### 5.3.4 Time-out and checkpointing
All frames requiring a response or acknowledgement shall be guarded by time-
out (timer T1). In detail, those frames are:
\- SABM;
\- DISC;
\- REJ;
\- SREJ;
\- numbered information frames (see note);
\- any frame with the P-bit set to \"1\" in ABM, i.e. checkpointing.
NOTE: T1 started, or restarted if already running, on the transmission of
every numbered information frame.
#### 5.3.4.1 Treatment of errors during link establishment, link reset and
link disconnect
An SABM, which is not answered by either UA or DM within the timer period,
shall be repeated up to N2 times.
A DISC, which is not answered by UA within the timer period, shall be repeated
up to N2 times.
If the SABM or DISC, respectively, is finally unanswered, the RLP station will
go into ADM in any case. For this reason, it is the responsibility of the
management of any RLP entity to put the RLP entity into ADM, should there be
an indication of a permanent outage, i.e. a loss of connectivity longer than
N2 times the timer value.
#### 5.3.4.2 Treatment of errors during numbered information transfer
The last frame of a sequence of numbered information frames shall also be
guarded by time-out. If neither a positive acknowledgement nor a REJ is
received, the RLP entity will start checkpoint recovery, i.e. the station will
send a frame with the P-bit set to \"1\", requesting the latest status
information from the other entity, indicated by the F-bit set to \"1\". In
that case, status information is carried either by RR or RNR responses and all
frames currently held by the responding RLP entity which are not delivered
because of missing frames shall be discarded. A P-bit set to \"1\" shall only
be sent with a Supervisory Frame.
Awaiting the latest status information from the other RLP entity, the sending
entity does not react on REJ and SREJ frames received during this time. If
such status information is received, retransmission from N(R) onwards will be
performed if appropriate. However, no frame sequence starting with a given
N(R) shall be retransmitted more than N2 times. If there is a frame sequence
that cannot be transmitted successfully after N2 repetitions, the RLP link
shall be reset or disconnected.
If no status information is received during the time-out period, this request
will be repeated up to N2 times. If still there is no valid status reported
back, the RLP link shall be reset or disconnected.
### 5.3.5 Contentious situations
Due to the asynchronous procedure, various contentious situations may arise. A
contention of SABMs shall result into both entities be set into ABM or be
reset. A contention of DISC\'s shall result into both entities be
disconnected. A contention of SABM and DISC shall result into both entities be
disconnected.
## 5.4 Transitions between 240 bit and 576 bit frame lengths
The RLP has to change the supported frame length due to transitions between
different channel codings. The RLP entities have to be re-synchronised after a
change of the channel coding.
Any change of the channel coding is indicated to the RLP- entity by an
external event. The RLP-entity at the mobile‑end enters the synchronisation
state when it receives a relevant Radio Resource Management message, and it
starts sending the REMAP-messages at the earliest possible time. The RLP-
entity at the network-end enters the synchronisation state when the network-
end detects Layer 1 synchronisation after a change of channel coding. The
change of channel coding is eventually confirmed by an outband signalling
message.
On entering the synchronisation state timers are halted and zeroed, and the
TX- and RX-windows are frozen. When the RLP entity enters the synchronisation
state it clears all SREJ or REJ conditions, discards all out-of-sequence
frames received and clears all previous re-transmission requests received by
any SREJ.
After this the mobile-end starts a REMAP-exchange (subclause 5.2.2.9). When an
RLP-entity receives a REMAP‑frame, it moves the user information contained by
the frames to be remapped from the TX-window to a transition buffer between
the RLP- and L2R-entities. The L2R uses the information in this buffer before
mapping new data into the PDUs. The network-end regards the REMAP-procedure as
completed when it has received an I+S-frame, an S-frame or an SABM U-frame
from the mobile-end, whereas the mobile-end leaves the synchronisation state
after receiving a responding REMAP-frame or an SABM U-frame. The data in the
transition buffer at the network-end must not be deleted before an I+S-, or an
S-frame is received from the mobile-end.
Supervisory or Information transfer frames or XID U frames are discarded by
the receiving entity while in REMAP synchronisation state. If the RLP entity
receives another U-frame, it reacts according to the defined procedures. That
is, if the frame is an SABM frame it performs a reset procedure and leaves the
synchronisation state. If the frame is NULL, UI or TEST frame, RLP performs
the defined procedure and remains in the synchronisation state. In the case of
a DISC frame RLP terminates ABM and goes into ADM.
After the REMAP-procedure is completed, the RLP-entities leave the
synchronisation state and normal operation is resumed. On resuming the normal
operation, the TX- and RX- windows are emptied. The N(S)-numbering resumes
from the value indicated in the REMAP-message by the N(R)-number.
Abortion of the transition or another transition taking place during the
REMAP-procedure restarts the REMAP‑procedure in order to resume operation
using the channel coding corresponding to the latest transition.
## 5.5 List of system parameters
The system parameters are as follows.
Table 2: RLP parameter values
+----------------+----------------+----------------+----------------+ | Name | Range of | Default value | Recommended | | | values | | value | +----------------+----------------+----------------+----------------+ | Version N° | 0 -- 2 | 0 | 2 | +----------------+----------------+----------------+----------------+ | k UE ⇒ IWF | 0 -- 61 | 61 | 61 | | | | | | | (for N° = 0/1) | | | | +----------------+----------------+----------------+----------------+ | k UE ⇒ IWF | 0 - k~max~ | 480 | 240 (note 2) | | | (note 3) | | | | (for N° = 2) | | | | +----------------+----------------+----------------+----------------+ | k IWF ⇒ UE | 0 -- 61 | 61 | 61 | | | | | | | (for N° = 0/1) | | | | +----------------+----------------+----------------+----------------+ | k IWF ⇒ UE | 0 - k~max~ | 480 | 240 (note 2) | | | (note 3) | | | | (for N° = 2) | | | | +----------------+----------------+----------------+----------------+ | T1 (note 1) | > 420 ms | 520 ms | 520 ms | | | (version2) | (fullrate on | (fullrate on | | | | 14, 5 kbit/s, | 14, 5 kbit/s, | | | > 380 ms | 29,0 kbit/s or | 29,0 kbit/s or | | | | 43,5 kbit/s) | 43,5 kbit/s) | | | > 440 ms\ | | | | | > 600 ms | 480 ms | 480 ms | | | | (fullrate on | (fullrate on | | | | 12 kbit/s) | 12 kbit/s) | | | | | | | | | 540 ms | 540 ms | | | | (fullrate on 6 | (fullrate on 6 | | | | kbit/s)\ | kbit/s)\ | | | | 780 ms | 780 ms | | | | (halfrate) | (halfrate) | +----------------+----------------+----------------+----------------+ | T2 (note 1) | | \ 0 | 6 | 6 | +----------------+----------------+----------------+----------------+ | P~T~ | 0 | 0 | 0 | +----------------+----------------+----------------+----------------+ | P~0~ | 0 -- 3 | 0 | 3 | +----------------+----------------+----------------+----------------+ | P~1~ | 512 -- 65535 | 512 | 2048 | +----------------+----------------+----------------+----------------+ | P~2~ | 6 -- 250 | 6 | 20 | +----------------+----------------+----------------+----------------+ | T4 (note 1) | > 25 ms | 30 ms | 30 ms | | | | | | | | | 50 ms | 50 ms | | | | (fullrate on | (fullrate on | | | | 14,5 kbit/s, | 14,5 kbit/s, | | | | 29,0 kbit/s or | 29,0 kbit/s or | | | | 43,5 kbit/s) | 43,5 kbit/s) | +----------------+----------------+----------------+----------------+ | Optional | 0 -- 1 | 0 | 1 | | feature, Up | | | | | signalling | | | | +----------------+----------------+----------------+----------------+ | NOTE 1: The | | | | | timer values | | | | | shall fulfil | | | | | the formula:\ | | | | | - T1 > T2 + | | | | | T4 + (2 * | | | | | transmission | | | | | delay) for | | | | | multi-link | | | | | operation;\ | | | | | - T1 > T2 + | | | | | (2 * | | | | | transmission | | | | | delay) for | | | | | single link | | | | | operation.\ | | | | | For A/Gb and | | | | | GERAN Iu mode | | | | | the values | | | | | apply | | | | | according to | | | | | indicated | | | | | channel types, | | | | | for UTRAN Iu | | | | | mode the | | | | | values apply | | | | | according to | | | | | \"fullrate on | | | | | 14.5\" Timer | | | | | T4 is ignored | | | | | in UTRAN Iu | | | | | mode and in | | | | | single-link | | | | | operation. | | | | | | | | | | NOTE 2: This | | | | | value is | | | | | recommended in | | | | | the case of 4 | | | | | physical | | | | | links. | | | | | | | | | | NOTE 3: The | | | | | maximum window | | | | | size shall | | | | | fulfil the | | | | | formula:\ | | | | | - kmax \ n × (2 | | | | | × transmission | | | | | delay) / 20 | | | | | ms. | | | | +----------------+----------------+----------------+----------------+
### 5.5.1 RLP Version N°
The current version of RLP is \"2\". \"0\" is the default value for the
version N°. RLP-versions are backwards compatible. It is assumed that future
versions of RLP will be backwards-compatible with former ones. Backwards-
compatible refers to the signalling, i.e. the handling of the parameters in
the XID frame. The parameters are defined as specified by the RLP version with
the lower number.
### 5.5.2 Maximum number of outstanding I frames k (Window size)
The window size is the maximum number (k) of sequentially numbered I frames
that may be outstanding (i.e. unacknowledged) at any given time. It shall be
agreed for a period of time.
In case of a single-link version the value can never exceed 61. In the case of
a multi-link version it is necessary to use a window size that is less than
the sequence number space to avoid misinterpretations of the confirming N(R).
Therefore, a guard section is defined and the value k must not exceed the
value k~max~ defined in table 2. On mutual agreement between the communication
parties, a smaller window size may be established. For the support of 4
physical links, a value of 240 is recommended.
### 5.5.3 Timer T1
The period of Timer T1 is regarded to start at the beginning of the
transmission of the relevant frame.
The negotiation (or default) value is defined to be the earliest instant to
enter recovery.
The period of Timer T1 at the end of which retransmission of a frame may be
initiated according to the procedures described in subclause 5.3, is a system
parameter agreed for a period of time.
The proper operation of the procedure requires that Timer T1 be greater than
the maximum time between transmission of frames (SABM, DM, DISC, I or
supervisory commands) and the reception of the corresponding frame returned as
a response to this frame (UA, DM or acknowledging frame). Therefore, the RLP
entity should not delay the response or acknowledging frame returned to the
above frame by more than a value T2. T2 is a system parameter, which is less
than T1. T1 is influenced by the value of T4 and shall fulfil the formula in
table 2.
### 5.5.4 Maximum number of retransmissions N2
The value of the maximum number of retransmissions N2 of a frame following the
running out of Timer T1 is a system parameter agreed for a period of time.
### 5.5.5 Data Compression Parameters
If the Layer 2 Relay function supports a data compression function and its use
is desired the needed data compression parameters have to be negotiated. The
parameter PT is not negotiable. In case of V.42 bis the parameters P0, P1 and
P2 have to be negotiated. The parameters are defined as follows:
\- PT: Type of data compression:
\- 0 V.42 bis;
\- other values are reserved.
\- P0: V.42bis data compression request:
\- 0 compress in neither direction;
\- 1 compress in initiator-responder direction only;
\- 2 compress in responder-initiator direction only;
\- 3 compress in both directions.
\- P1: V.42bis number of possible codewords in the algorithm;
\- P2: V.42bis maximum encodable data string length.
The initiator is the sender of XID command, the responder is the sender of XID
response.
### 5.5.6 Re-sequencing period (Timer T4)
In the case of a multi-link version frames may be received out of sequence due
to different transmission delays. The period of timer T4 guards the re-
sequencing period. During this time frames may be out of sequence.
T4 is a system parameter agreed for a period of time. The proper operation of
the procedure requires that the timer T4 shall be greater than the re-
sequencing period and it shall fulfil the formula in table 2\. A change of the
timer T4 has impact on the usable maximum window size as defined in table 2.
### 5.5.7 Optional features
The format of the optional features parameters is an octet where each bit
position represents an optional feature that can be negotiated. The optional
features are:
* * *
Bit position Optional feature name 1 Up signalling 2 (Not yet assigned) 3 (Not
yet assigned) 4 (Not yet assigned) 5 (Not yet assigned) 6 (Not yet assigned) 7
(Not yet assigned) 8 (Not yet assigned)
* * *
The \'Optional Features\' parameter is negotiated bitwise in the downward
sense, meaning that the value of bit _i_ in the XID response shall be less or
equal to the value of bit _i_ in the XID command.
**Up signalling:** If the negotiated value of the \'Up signalling\' feature is
1, then the UP bit in the S and I+S frame header is used for indicating an
upgrading proposal to the UE, otherwise the UP bit is ignored (don\'t care).
This optional feature is only applicable for A/Gb mode and GERAN Iu mode.
## 5.6 Support for discontinuous transmission (DTX)
In both ADM and ABM, whenever the RLP entity has no numbered or unnumbered
supervisory commands/responses and no information transfer frames pending
transmission, the RLP entity shall indicate to the lower layer that the DTX
function may be invoked.
### 5.6.1 In case of A/Gb mode
Protocol of lower layer conforms to 3GPP TS 48.004 [3], 3GPP TS 48.020 [25]
and 3GPP TS 44.021 [2]. A/Gb mode specification assumes STM for lower layer
protocol. Even if there is no data to be sent, some transmission is needed on
STM. RLP acts as follows in case of DTX.
In case DTX is invoked, in ADM a NULL-frame will be sent, and in ABM a RR or
RNR S-frame will be sent.
### 5.6.2 In case of Iu mode
Protocol of lower layer conforms to 3GPP TS 25.410 [5], 3GPP TS 25.411 [6],
3GPP TS 25.414 [7], 3GPP TS 25.415 [8] and 3GPP TS 43.051 [29]. Iu mode
specification assumes ATM for lower layer protocol. When there is no data to
be sent, no transmission is available on ATM. In consideration of transmission
efficiency, no transmission is suitable. RLP acts as follows in case of DTX.
In case DTX is invoked, in ADM and ABM no frame will be sent.
# 6 Service definitions
## 6.1 Introduction
This subclause defines the service provided by the RLP-sublayer to the
L2R-sublayer at the boundary between the RLP‑sublayer and the L2R-sublayer.
The relationships between RLP-sublayer, L2R-sublayer and RLP-protocol are
shown in figure 4.
* * *
           L2R SL      user       ~RLP\ Service~
RLP\ RLP SL provider  
←→
* * *
Figure 4: Basic relationship between RLP and L2R
The RLP service is defined in terms of:
\- the primitive actions and events of the service;
\- the parameters associated with each primitive action and event;
\- the inter-relationship between, and the valid sequence of, these actions
and events.
## 6.2 Conventions
For the description of the Data Link Service, the following conventions are
used with time-sequence diagrams:
{width="4.959027777777778in" height="1.2770833333333333in"}
Figure 5: Confirmed service with acknowledgement
{width="4.948611111111111in" height="0.5951388888888889in"}
Figure 6: Unconfirmed service
In time-sequence diagrams, time moves from top to bottom. Arrows indicate the
flow of information. Such flow of information may be subject to implicit flow-
control. Skewed lines indicate a logical relationship between arrows. For
clarity, the absence of such a relation may be marked by the symbol \"\~\"
(tilde).
## 6.3 Queue model
Between the two endpoints of an RLP-connection, there exists a flow control
function. As a means of specifying this flow control feature and its
relationship with other capabilities of the RLP, the following queue model is
provided.
{width="3.6569444444444446in" height="2.28125in"}
Figure 7: Queue Model
The following objects may be placed in a queue by a service user:
a) connect;
b) connection-mode data (numbered information);
c) reset;
d) disconnect.
The following objects may be placed in a queue by a service provider:
a) reset;
b) synchronization mark;
c) disconnect.
NOTE: Other possible objects (i.e. unnumbered information, identification,
test) are irrelevant (-) to the queue model and for reasons of simplicity are
not shown.
+------------+---------+------+-------+-----------+------------+ | **F | Connect | Data | Reset | Sync Mark | Disconnect | | ollowing** | | | | | | +------------+---------+------+-------+-----------+------------+ | **P | | | | | | | receding** | | | | | | +------------+---------+------+-------+-----------+------------+ | Connect | NA | ‑‑‑‑ | ‑‑‑‑‑ | NA | DES | +------------+---------+------+-------+-----------+------------+ | Data | NA | ‑‑‑‑ | DES | NA | DES | +------------+---------+------+-------+-----------+------------+ | Reset | NA | ‑‑‑‑ | DES | ‑‑‑‑ | DES | +------------+---------+------+-------+-----------+------------+ | Synch | NA | ‑‑‑‑ | DES | NA | DES | | ronization | | | | | | | Mark | | | | | | +------------+---------+------+-------+-----------+------------+ | Disconnect | NA | NA | NA | NA | DES | +------------+---------+------+-------+-----------+------------+ | Legend: | | | | | | | | | | | | | | NA: Not | | | | | | | a | | | | | | | pplicable. | | | | | | | | | | | | | | ‑‑: not | | | | | | | de | | | | | | | structive, | | | | | | | not able | | | | | | | to advance | | | | | | | ahead of | | | | | | | the | | | | | | | preceding | | | | | | | object. | | | | | | | | | | | | | | DES: | | | | | | | D | | | | | | | estructive | | | | | | | to the | | | | | | | preceding | | | | | | | object. | | | | | | +------------+---------+------+-------+-----------+------------+
## 6.4 List of Primitives
Link establishment:
RLP-CONNECT-REQUEST
RLP-CONNECT-INDICATION
RLP-CONNECT-RESPONSE (-NEG)
RLP-CONNECT-CONFIRM (-NEG)
Normal Data Transfer:
RLP-DATA-REQUEST (S, INF)
RLP-DATA-INDICATION (S, INF)
NOTE: The parameter S (L2R status bit) is only relevant for RLP-version 2.
Reset:
RLP-RESET-REQUEST
RLP-RESET-INDICATION
RLP-RESET-RESPONSE
RLP-RESET-CONFIRM
Release:
RLP-DISCONNECT-REQUEST
RLP-DISCONNECT-INDICATION
Miscellaneous:
unnumbered information
RLP-UNITDATA-REQUEST (INF)
RLP-UNITDATA-INDICATION (INF)
Exchange Identification:
RLP-XIDDATA-REQUEST (INF)
RLP-XIDDATA-INDICATION (INF)
Test:
RLP-TESTDATA-REQUEST (INF)
RLP-TESTDATA-CONFIRM (-NEG) (INF)
## 6.5 Possible RLP time sequence diagrams
a) Connection establishment (without collision)
{width="5.219444444444444in" height="1.2680555555555555in"}
b) Connection establishment (with collision)
{width="5.313194444444444in" height="1.2645833333333334in"}
c) User invoked release (without collision)
{width="5.417361111111111in" height="0.6215277777777778in"}
d) Collision of user invoked releases
{width="5.802777777777778in" height="0.7798611111111111in"}
e) Simultaneous user and provider invoked release
{width="5.427777777777778in" height="0.7798611111111111in"}
f) Provider invoked release
{width="5.136111111111111in" height="0.7798611111111111in"}
g) Provider rejection of establishment
{width="3.4590277777777776in" height="0.88125in"}
h) Normal data transfer
{width="5.084027777777778in" height="0.6215277777777778in"}
I) User invoked reset
{width="5.063194444444444in" height="0.9944444444444445in"}
j) Collision of user invoked resets
{width="5.011111111111111in" height="0.9916666666666667in"}
k) provider invoked reset
{width="5.031944444444444in" height="0.9916666666666667in"}
l) simultaneous user and provider invoked reset
{width="6.177777777777778in" height="6.044444444444444in"}
Figure 8: State transition diagram for sequence of RLP connection-mode service
primitives
###### ## Annex A (informative): RLP SDL Diagrams
This annex describes a model implementation of an RLP entity for RLP version
\"0\".
The description should help to clarify the present document, the RLP service
and protocol definition.
However, it is not intended to restrict any implementation of an RLP entity in
any way, on condition the implementation shows the correct behaviour at the
RLP protocol level.
The model implementation consists of three processes. Process \"SEND_PDU\"
adds the CRC to a given PDU and hands it to the lower layer entity for
transmission. Process \"RECEIVE_PDU\" gets a received PDU block, checks the
value of the CRC and the bits of the PDU header. If the CRC has the right
value and if the header is syntactically correct, the receipt event is
signalled to the \"RLP_KERNEL\" process, which is the protocol handling
automaton.
Each process is described as an extended finite state machine (using SDL-
Diagrams).
Each state of the automaton is described by a (main-)state number and a
corresponding (main-)state name. The state may further be distinguished by the
value of other state variables. This scheme is used because not every state
variable needs to be defined in every state. The states are defined in clause
A.1.
The RLP machine reacts on events, which may be classified as:
\- lower layer interface events;
\- upper layer interface events; and
\- station management or internal events.
The events of the RLP-Kernel are described in clause A.2.
# A.1 List of RLP entity states
## A.1.1 (main) states
* * *
state number state symbol state name 0 S0 ADM and Detached 1 S1 ADM and
Attached 2 S2 Pending Connect Request 3 S3 Pending Connect Indication 4 S4 ABM
and Connection Established 5 S5 Disconnect Initiated 6 S6 Pending Reset
Request 7 S7 Pending Reset Indication
* * *
## A.1.2 state variables
The main states are further distinguished by the values of the state
variables. However, not every state variable is used (evaluated/ defined) in
every state.
First some constants need to be defined:
M = 62 number of different sequence numbers (modulus).
Nmin = 0 smallest sequence number.
Nmax = 61 largest sequence number (= M - 1).
N2 = 6 maximum number of retransmissions.
* * *
variable name variable type and range semantic
Ackn_FBit (0, 1) Value of the F-Bit used in the next acknowledging PDU.
Ackn_State (idle, send) Ackn_State = send means, an acknowledging PDU
(Supervisory or Data) has to be sent.
C (0, 1) to store the C/R-Bit value of a received S- or I-frames
Data char[25] to store temporarily the information part (user data) of a
received I-frame.
DISC_Count (0, 1,..., N2) to count the transmissions of DISC.
DISC_PBit (0, 1) The value of the P-bit in the next DISC command PDU.
DISC_State (idle, send, wait) if (DISC_State = send) the DISC command PDU has
to be sent at the next possible opportunity.
                                                    if (DISC\_State = wait) the RLP entity waits for the corresponding response.
DM_FBit (0, 1) Value of the F-Bit used in the next DM response PDU.
DM_State (idle, send) if (DM_State = send) the PDU DM has to be sent.
DTX_SF (N, RR, RNR) to store the last Supervisory frame for DTX (only RR or
RNR can be suppressed)
DTX_VR (0, 1,.., Nmax) to store the last transmitted value of VR (used to
decide the DTX condition)
F (0, 1) to store temporarily the F-bit of a received response PDU.
NR (0, 1,..., Nmax) to store temporarily the receive sequence number of a
received S- or I-frame
NS (0, 1,..., Nmax) to store temporarily the send sequence number of a
received I-frame
P (0, 1) to store temporarily the P-bit of a received command PDU
P_F (0, 1) to store temporarily the P- or F-bit of received command or
response PDUs
Poll_Count (0, 1,..., N2) to count the transmissions of poll requests
Poll_State (idle, send, wait) (Poll_State = send) means, a supervisory PDU
with P-bit set to one has to be sent
                                                    (Poll\_State = wait) means, the RLP entity waits for the response with F-bit set to one
Poll_xchg (idle, wait) (Poll_xchg = idle) means, sending of a frame with P-bit
set is allowed
                                                    (Poll\_xchg = wait) means, an acknowledgement of a previous P-bit is outstanding
R[M] record array Receiver slots (M slots, numbered 0 to M‑1)
R[n].Data char[25] to store user information
R[n].State (idle, rcvd, ackn, srej, wait) (R[n].State = rcvd) means, data has
been received (with sequence number n).
                                                    (R\[n\].State = ackn) means, data has been received and acknowledged
                                                    (R\[n\].State = srej) means, the retransmission of data has to be requested using srej(n).
                                                    (R\[n\].State = wait) means, the entity waits for the requested retransmitted data
REJ_State (idle, send, wait) The REJ_State is send if and only if a REJ PDU
has to be sent
returncode Integer used in procedures to report a result
RRReady Boolean Remote Receiver Ready
SABM_Count (0, 1,..., N2) to count the transmissions of SABM
SABM_State (idle, send, wait) if (.._State = send) the SABM PDU has to be sent
                                                    if (..\_State = wait) the RLP entity waits for the UA response
S[M] record array Sender Slots (M slots, numbered 0 to M‑1)
S[n].Data char[25] user information to be sent
S[n].State (idle, send, wait) (S[n].State = send) means, data has to be sent\
(with sequence# n).
SF (RR, RNR, REJ, SREJ) to store the last superv. PDU type
T Timer used by the data sender if waiting for I-frame acknowledgements or
F-bits
TEST_Count (0, 1,...,N2) to count the transmissions of TEST
TEST_C_Data char [25] data to be sent in the next TEST command PDU
TEST_C_PBit (0, 1) value of the P-Bit used in the next TEST command PDU
TEST_C_State (idle, send, wait) if (.._State = send) the TEST command PDU has
to be sent
                                                    if (..\_State = wait) the RLP entity waits for the next TEST response
TEST_R_Data char[25] data to be sent in the next TEST response PDU
TEST_R_FBit (0, 1) value of the P-Bit used in the next TEST response PDU
TEST_R_State (idle, send) if (.._State = send) the TEST response PDU has to be
sent
T_RCVR Timer used by the receiver to timeout a REJ condition
T_RCVS(n) Timer used by the receiver to timeout a SREJ condition for Slot n
T_TEST Timer used by the sender of a TEST frame if waiting for a TEST response
T_XID Timer used by the sender of a XID frame if waiting for the XID response
UA_FBit (0, 1) value of the F-Bit used in the next UA response
UA_State (idle, send) if (UA_State = send) an UA PDU has to be sent
UI_Data char[25] data to be sent in the next UI PDU
UI_PBit (0, 1) value of the P-Bit used in the next UI PDU
UI_State (idle, send) if (UI_State = send) a UI PDU has to be sent
VA (0, 1,..., Nmax) frame sequence number of oldest not yet acknowledged\
I-frame\ (if VA = VS then there are no unacknowledged frames)
VD (0, 1, ..., Nmax) slot number used in the next Data_Req
VR (0, 1, ..., Nmax) receiver sequence number (the next received I-frame is
expected to carry this sequence number)
VS (0, 1, ..., Nmax) sender sequence number (under normal operating conditions
the next I-frame is assigned this number)
XID_Count (0, 1,...,N2) to count the transmissions of XID commands
XID_C_Data char [25] data to be sent in the next XID command PDU
XID_C_PBit (0, 1) value of the P-Bit used in the next XID command PDU
XID_C_State (idle, send, wait) if (.._State = send) the XID command PDU has to
be sent
                                                    if (..\_State = wait) the RLP entity waits for the next XID response
XID_R_FBit (0, 1) value of the P-Bit used in the next XID response PDU
XID_R_State (idle, send) if (.._State = send) the XID response PDU has to be
sent
* * *
# A.2 List of RLP entity events
The interface is indicated by l:lower, u:upper and m:management. From the
formal definition point of view this distinction of course is unnecessary.
+---------+----------------------+----------------------+-----------+ | event# | name | semantic | interface | +---------+----------------------+----------------------+-----------+ | 1 | Attach_Req | Switch to \"ADM and | m | | | | Attached\" | | +---------+----------------------+----------------------+-----------+ | 2 | Conn_Ind | Connect indication | u | +---------+----------------------+----------------------+-----------+ | 3 | Conn_Conf | Connect confirm | u | +---------+----------------------+----------------------+-----------+ | 4 | Conn_Conf_Neg | Connect confirm | u | | | | negative | | +---------+----------------------+----------------------+-----------+ | 5 | Conn_Req | Connect request | u | +---------+----------------------+----------------------+-----------+ | 6 | Conn_Resp | Connect response | u | +---------+----------------------+----------------------+-----------+ | 7 | Conn_Resp_Neg | Connect response | u | | | | negative | | +---------+----------------------+----------------------+-----------+ | 8 | Data_Ind(Data) | Data transfer | u | | | | indication (user | | | | | data in Data) | | +---------+----------------------+----------------------+-----------+ | 9 | Data_Req(Data) | Data transfer | u | | | | request (user data | | | | | in Data) | | +---------+----------------------+----------------------+-----------+ | 10 | Detach_Req | Switch to \"ADM and | m | | | | Detached\" | | +---------+----------------------+----------------------+-----------+ | 11 | Disc_Ind | Disconnection | u | | | | indication | | +---------+----------------------+----------------------+-----------+ | 12 | Disc_Req | Disconnect request | u | +---------+----------------------+----------------------+-----------+ | 13 | DISC(P) | PDU DISC received | l | | | | (P-bit in P) | | +---------+----------------------+----------------------+-----------+ | 14 | DM(F) | PDU DM received | l | | | | (F-bit in F) | | +---------+----------------------+----------------------+-----------+ | 15 | Error_Ind | Error Indication | u | +---------+----------------------+----------------------+-----------+ | 16 | LL_Data_Req | Data request to | l | | | | lower layer | | +---------+----------------------+----------------------+-----------+ | 17 | LL_Data_Ind | Data indication from | l | | | | lower layer | | +---------+----------------------+----------------------+-----------+ | 18 | NULL | PDU NULL received | l | +---------+----------------------+----------------------+-----------+ | 19 | Ready_Ind | Indication that a | m | | | | new PDU may be sent | | +---------+----------------------+----------------------+-----------+ | 20 | Reset_Conf | Reset confirm | u | +---------+----------------------+----------------------+-----------+ | 21 | Reset_Ind | Reset indication | u | +---------+----------------------+----------------------+-----------+ | 22 | Reset_Req | Reset request | u | +---------+----------------------+----------------------+-----------+ | 23 | Reset_Resp | Reset response | u | +---------+----------------------+----------------------+-----------+ | 24 | RR_I(C, P_F, NR, | I-frame RR received | l | | | NS, Data) | | | +---------+----------------------+----------------------+-----------+ | 25 | RNR_I(C, P_F, NR, | I-frame RNR received | l | | | NS, Data) | | | +---------+----------------------+----------------------+-----------+ | 26 | REJ_I(C, P_F, NR, | I-frame REJ received | l | | | NS, Data) | | | +---------+----------------------+----------------------+-----------+ | 27 | SREJ_I(C, P_F, NR, | I-frame SREJ | l | | | NS, Data) | received | | +---------+----------------------+----------------------+-----------+ | 28 | RR(C, P_F, NR) | S-frame RR received | l | +---------+----------------------+----------------------+-----------+ | 29 | RNR(C, P_F, NR) | S-frame RNR received | l | +---------+----------------------+----------------------+-----------+ | 30 | REJ(C, P_F, NR) | S-frame REJ received | l | +---------+----------------------+----------------------+-----------+ | 31 | SREJ(C, P_F, NR) | S-frame SREJ | l | | | | received | | +---------+----------------------+----------------------+-----------+ | 32 | SABM(P) | PDU SABM received | l | +---------+----------------------+----------------------+-----------+ | 33 | UA(F) | PDU UA received | l | | | | (F-bit in F) | | +---------+----------------------+----------------------+-----------+ | 34 | UI_Req(Data) | Unnumbered | u | | | | Information transfer | | | | | request | | +---------+----------------------+----------------------+-----------+ | 35 | UI(C, P_F, Data) | UI PDU received | l | +---------+----------------------+----------------------+-----------+ | 36 | T | Timeout (Timer of | m | | | | the sender expired) | | +---------+----------------------+----------------------+-----------+ | 37 | Test_Conf(Data) | Test confirm | u | | | | (received data in | | | | | Data) | | +---------+----------------------+----------------------+-----------+ | 38 | T | Test confirm | u | | | est_Conf_Neg(Data) | negative (received | | | | | data in Data) | | +---------+----------------------+----------------------+-----------+ | 39 | T_RCVR | Timeout (Timer of | m | | | | the receiver for REJ | | | | | expired) | | +---------+----------------------+----------------------+-----------+ | 40 | T_RCVS(n) | Timeout (Timer of | m | | | | the receiver for | | | | | SREJ expired) | | +---------+----------------------+----------------------+-----------+ | 41 | T_TEST | Timeout (Test timer | m | | | | expired) | | +---------+----------------------+----------------------+-----------+ | 42 | T_XID | Timeout (Xid timer | m | | | | expired) | | +---------+----------------------+----------------------+-----------+ | 43 | Test_Req(Data) | Test request (Test | m | | | | data in Data) | | +---------+----------------------+----------------------+-----------+ | 44 | TEST(C, P_F, Data) | TEST | l | | | | command/response PDU | | | | | received | | | | | | | | | | (C/R-bit in C, | | | | | P/F-bit in P_F, | | | | | Data in Data) | | +---------+----------------------+----------------------+-----------+ | 45 | XID_Req(Data) | Exchange ID request | m | +---------+----------------------+----------------------+-----------+ | 46 | XID_Ind(Data) | Exchange ID | m | | | | indication | | +---------+----------------------+----------------------+-----------+ | 47 | XID(C, P_F, Data) | XID command/response | l | | | | PDU received | | +---------+----------------------+----------------------+-----------+
{width="6.146527777777778in" height="7.179166666666666in"}
Figure A.1
{width="5.448611111111111in" height="7.999305555555556in"}
Figure A.2
{width="6.063194444444444in" height="6.697222222222222in"}
Figure A.3
{width="6.021527777777778in" height="7.165277777777778in"}
Figure A.4
{width="6.209027777777778in" height="8.94513888888889in"}
Figure A.5
{width="5.459027777777778in" height="5.188888888888889in"}
Figure A.6
{width="6.125694444444444in" height="6.382638888888889in"}
Figure A.7
{width="5.563194444444444in" height="6.476388888888889in"}
Figure A.8
{width="6.438194444444444in" height="6.659027777777778in"}
Figure A.9
{width="6.334027777777778in" height="8.591666666666667in"}
Figure A.10
{width="5.906944444444444in" height="8.957638888888889in"}
Figure A.11
{width="6.490277777777778in" height="9.433333333333334in"}
Figure A.12
{width="5.531944444444444in" height="6.472222222222222in"}
Figure A.13
{width="6.219444444444444in" height="8.544444444444444in"}
Figure A.14
{width="4.052777777777778in" height="7.418055555555555in"}
Figure A.15
{width="6.479861111111111in" height="9.372222222222222in"}
Figure A.16
{width="6.427777777777778in" height="8.893055555555556in"}
Figure A.17
{width="6.063194444444444in" height="8.73125in"}
Figure A.18
{width="5.636111111111111in" height="7.372222222222222in"}
Figure A.19
{width="5.417361111111111in" height="9.374305555555555in"}
Figure A.20
{width="5.281944444444444in" height="9.348611111111111in"}
Figure A.21
{width="5.948611111111111in" height="7.976388888888889in"}
Figure A.22
{width="5.552777777777778in" height="6.854861111111111in"}
Figure A.23
{width="4.906944444444444in" height="8.313888888888888in"}
Figure A.24
{width="5.156944444444444in" height="4.892361111111111in"}
Figure A.25
{width="5.834027777777778in" height="8.608333333333333in"}
Figure A.26
Figure A.27
{width="5.292361111111111in" height="8.19513888888889in"}
Figure A.28
{width="4.771527777777778in" height="8.395833333333334in"}
Figure A.29
{width="4.969444444444444in" height="7.999305555555556in"}
Figure A.30
{width="5.781944444444444in" height="9.34375in"}
Figure A.31
#