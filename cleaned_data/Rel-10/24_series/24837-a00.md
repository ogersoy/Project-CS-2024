# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This technical report intends to develop enhancements to Rel-9 IMS service
continuity stage 3 within the scope of 3GPP TS 24.237 [6], specifically in the
area of inter-UE transfer. This technical report serves as a collection and a
base for decision on alternative solution proposals for the different
enhancement to Rel-9 IMS service continuity stage 3.
This technical report will be used to move the agreed solutions into the main
specifications, once the content has stabilized.
Editor\'s Note: This TR reflects those inter-UE transfer issues, which are
currently reflected in 3GPP TR 23.837. As currently SA2 did not move any of
the Rel-10 inter-UE transfer topics to 3GPP TS 24.237, it is not sure which of
these features will be finally part of Rel-10. The content of this TR will be
scoped to those features, which SA2 decides to make part of the Rel-10 version
of 3GPP TS 24.237.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
Editor\'s Note: Internet Drafts referenced from this TR do not automatically
constitute a 3GPP IETF dependency. If a new 3GPP IETF dependency needs to be
created will be evaluated when the related material is shifted to the main
3GPP TS.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.237: \"IP Multimedia subsystem (IMS) Service Continuity; Stage
2\".
[3] 3GPP TR 23.831: \"IP Multimedia Subsystem (IMS) Inter-UE transfer
enhancements, Stage 2\".
[4] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[5] IETF RFC 2976: \"The SIP INFO Method\".
[6] 3GPP TS 24.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage
3\".
[7] IETF RFC 3428: \"Session Initiation Protocol (SIP) Extension for Instant
Messaging\".
[8] IETF RFC 3515: \"The Session Initiation Protocol (SIP) Refer Method\".
[9] IETF RFC 3840 (August 2004): \"Indicating User Agent Capabilities in the
Session Initiation Protocol (SIP)\".
[10] IETF RFC 3891: \"The Session Initiation Protocol (SIP) \"Replaces\"
Header\".
[11] IETF RFC 3903: \"The Session Initiation Protocol (SIP) Publish Extension
for Event State Publication\".
[12] IETF RFC 4235: \"An INVITE-- Initiated Dialog Event Package for the
Session Initiation Protocol (SIP)\".
[13] IETF RFC 4661: \"An Extensible Markup Language (XML) -- Based Format for
Event Notification Filtering\".
[14] draft-ietf-sipcore-info-events-09 (September 2010): \"Session Initiation
Protocol (SIP) INFO Method and Package Framework\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[15] draft-ietf-mmusic-sdp-misc-cap-00 (March 2010) \"Miscellaneous
Capabilities Negotiation in the Session Description Protocol (SDP)\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[16] draft-yang-dispatch-SIP-connection-address-type-01 (June 2010) \" Session
Description Protocol (SDP) Extension for A SIP Connection Address Type\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[17] 3GPP TS 24.605: \"Conference (CONF) using IP Multimedia (IM) Core Network
(CN) subsystem; Protocol specification\".
[18] 3GPP TS 24.629: \"Explicit Communication Transfer (ECT) using IP
Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".
[19] IETF RFC 4538: \"Request Authorization through Dialog Identification in
the Session Initiation Protocol\".
[20] IETF RFC 3261: \"SIP: Session Initiation Protocol\".
[21] IETF RFC 3023: \"XML Media Types\".
[22] draft-holmberg-sipcore-proxy-feature-00 (September 2010): \"Indication of
features supported by proxy\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[23] IETF RFC 5368: \" Referring to Multiple Resources in the Session
Initiation Protocol (SIP)\".
[24] IETF RFC 5364: \"Extensible Markup Language (XML) Format Extension for
Representing Copy Control Attributes in Resource Lists\".
[25] 3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access
Protocol (XCAP) over the Ut interface for Manipulating Supplementary
Services\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1], 3GPP TS 24.237 [6] and the following apply. A term defined
in the present document takes precedence over the definition of the same term,
if any, in 3GPP TR 21.905 [1] and 3GPP TS 24.237 [6].
Editor\'s Note: This subclause will only capture definitions from 3GPP
TS24.237 [2] which need modification or completely new definitions.
**Controller capable UE:** A UE that is capable of becoming a controller UE.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1], 3GPP TS 24.237 [6] and the following apply. An abbreviation
defined in the present document takes precedence over the definition of the
same abbreviation, if any, in 3GPP TR 21.905 [1] and 3GPP TS 24.237 [6].
Editor\'s Note: This subclause will only capture new abbreviations compared to
those defined in 3GPP TS 24.237 [2].
# 4 Procedures and issues
## 4.1 General
Editor\'s Note: This subclause will include general information on the
procedures in the TR, as well as generic concerns and issues which are
applicable to all procedures in this section.
### 4.1.1 Subscription to dialog events filtering
In order to reduce the number of redundant notifications when subscribing to
dialog events using RFC 4235 [12] a filtering mechanism based on the mechanism
defined in RFC 4661 [13] should be defined.
### 4.1.2 Routing incoming session requests to a controller capable UE
In order to route incoming session request to controller capable UEs the
controller capable UE includes the media feature tag g.3gpp.iut-controller in
the Contact header field of the SIP REGISTER request when registering, (this
is already required Controller UE functionality in release 9). When the SCC AS
receives an incoming initial session establishment request it checks the
request against the following stored user preference criteria to see if
collaborative sessions are enabled for this session:
\- URI in the P-Asserted-Identity header field
\- URI in the Request-URI
\- Any ICSI value in the Accept-Contact header field; and
\- Media types in the SDP offer.
If the stored user preference criteria indicates that collaborative sessions
are enabled for this session then the SCC AS shall include the media feature
tag g.3gpp.iut-controller along with the explicit parameter in an Accept-
Contact header field in the request before forwarding.
The UE configures the user preference criteria in the SCC AS using the XCAP
over the Ut reference point.
Editor's Note: The XCAP usage still has to be defined.
NOTE: Other possibilities for user configuration, such as web-based
provisioning or pre-provisioning by the operator are outside the scope of the
present document, but are not precluded.
## 4.2 Inter-UE transfer and collaborative session procedures for UEs
belonging to different IMS subscriptions under the same operator
Editor\'s Note: This subclause corresponds to various subclauses under 6.1.3
of 3GPP TR 23.831 [3]
### 4.2.1 General
Editor\'s Note: This subclause will identify the generic procedures for IUT
with UEs belonging to different IMS subscriptions (under the same operator).
It is assumed that the related extensions and mechanisms can be specified
independently from the other IUT procedures in 3GPP Rel-9 and 3GPP Rel-10.
### 4.2.2 Procedures
#### 4.2.2.1 Extension of existing Rel-9 procedures for inter-UE transfer and
collaborative session for UEs belonging to different IMS subscriptions under
the same operator
There are no changes needed to existing Rel-9 procedures.
Before sending the inter-UE transfer request towards the remote party, the SCC
AS serving the collaborative session, shall act as follows:
1) if the Contact header field containing the address of SCC AS, insert the
media feature tag g.3gpp.iut-focus as described in subclause 6.2 into the
Contact header field; or
2) if the Contact header field not containing the address of SCC AS, insert
the media feature tag g.3gpp.iut-focus into the Record-Route header field as
described in IETF draft-holmberg-sipcore-proxy-feature [22].
Editor\'s note: The insertion of the g.3gpp.atcf media feature tag is inline
with the current solution in the draft-holmberg-sipcore-proxy-feature [22].
The actual solution needs to align with the IETF accepted solution.
When the SCC AS in the home network of the controllee UE recievies the inter-
UE transfer request containing the media feature tag g.3gpp.iut-focus, it will
forward the inter-UE transfer request to the controllee UE without applying
inter-UE transfer functionality.
NOTE: The SCC AS in the home network of the controller UE takes full control
of the collaborative session. Further SCC AS added in the home networks of
controllee UEs do not influence the collaborative session call flows in a way
which would cause additional signalling from/to the SCC AS in the home network
of the controller UE. The SCC AS in the home network of the controller UE
therefore does not need to distinguish whether a request is sent to / received
from a controllee UE directly or via an SCC AS in the controllee UEs home
network.
#### 4.2.2.2 New Rel-10 procedures for inter-UE transfer and collaborative
session for UEs belonging to different IMS subscriptions under the same
operator
An IUT capable UE shall insert the media feature-tag g.3gpp.iut-xyz as
described in annex A, in the Accept-Contact header field with explicit and
require tags at the time of sending an inter-UE transfer request.
The SCC AS controlling the collaborative session, shall remove the media
feature-tag g.3gpp.iut-xyz from the Accept-Contact header field when sending
the inter-UE transfer request towards the remote party.
Editor\'s Note: It is FFS what the syntax of the media feature tag g.3gpp.iut-
xyz is.
Where an MRF is required as part of Inter-UE transfer procedures (e.g. during
media flow replication by the network), the SCC AS which acts as the anchor of
the collaborative session shall control the MRF.
### 4.2.3 Identified issues
**(Closed) Issue 4.2.3-1** : For call flows in all other sections it needs to
be decided base on which type of flows the comparison of the different
solutions should be done, i.e.
\- either one subscription
\- or two subscriptions.
In the end all flows should be of the same nature, before selecting a protocol
solution.
Issue closed -- the SCC AS of the controller UE takes full control of the
collaborative session. The SCC AS of the controller UE cannot be aware whether
there are additional SCC AS added in the home networks of controllee UEs.
Therefore the signalling between the SCC AS of the controller UE and the
controllee UE is not influenced by the presence or absence of an additional
SCC AS.
**(Closed) Issue 4.2.3-2** : It needs to be clarified (maybe for every
individual sub-feature) whether the call flows and state machines for the
cases when AS1 and AS2 are split or when there is only one AS are straight
forward to be aligned.
Issue closed -- a split is not needed. See reason for closing Issue 4.2.3-1
**(Closed) Issue 4.2.3-3:** In the case when there are two or more AS\'s and a
MRF is in the flow, can only the AS which anchors the collaborative session
control the MRF or can the MRF be located in a different network?
Issue closed -- in this version of the specification, only the AS where the
session is anchored controls the MRF, if an MRF is required in the IUT
procedures. In which network the MRF is located is dependent on inter-operator
agreements, See subclause 4.2.2.2 for the statement which resolves this issue.
**(Closed) Issue 4.2.3-4:** Within the messages between the two AS\'s, is
there a protocol indication needed, which indicates which of the two AS\'s is
anchoring the session? If yes, how should this indication be transported /
look like?
Issue closed- The media feature tag g.3gpp.iut-focus is defined to indicate
that one of the ASs has the control of the collaborative session. See the
definition in subclause 6.2
**Issue 4.2.3-5:** Is it necessary for the controller UE or the SCC AS1 to
discover the address of SCC AS2 and if yes, how could this be done?
**Issue 4.2.3-6:** It must be possible in all scenarios for UEs to address SIP
requests to a SCC AS (which takes the controlling role) which is assigned to a
controller UE under a different subscription.
### 4.2.4 Call flows
#### 4.2.4.1 Controller UE initiated media transfer from controller UE to
controllee UE belonging to different subscriptions under the same operator
In the example flow at the figure 4.2.4.1, UE-1 has an ongoing multimedia
session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to the different
subscribers. UE-1 decides to transfer video media to UE-2 and keep the
collaborative session control in itself.
Figure 4.2.4.1-1: Signalling flow for controller UE initiated media transfer
from controller UE to controllee UE belonging to different subscriptions under
the same operator
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1\. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS-1.
**2\. UE-1 decides to transfer the video portion of the session from UE-1 to
UE-2 and keep the collaborative session control in itself.**
**3-4. SIP REFER request (UE-1 to SCC AS-1) - see example in table**
**4.2.4.1-3**
The UE-1 sends SIP REFER request to SCC AS-1 to request the media transfer.
Table 4.2.4.1-3: SIP REFER request (**UE-1 to SCC AS-1**)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Refer-To: **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099**>**
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Contact:
> \
>
> Referred-by: sip:user1\@home1.net
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
**5\. When SCC AS-1 receives the SIP REFER request, the SCC AS-1 authorizes
the request.**
**6-7. SIP 202 (Accepted) response to SIP REFER request (SCC AS-1 to UE-1).**
**8-9. SIP NOTIFY request (SCC AS-2 to UE-1)**
The SCC AS-1 informs the UE-1 to notify the implicit subscription to the SIP
REFER request results.
**10-11. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to SCC AS-1)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
**12-15. SIP INVITE request (SCC AS-1 to UE-2) - see example in table
4.2.4.1-12**
The SCC AS-1 sends the SIP INVITE towards UE-2 to establish a session based on
the information provided in the SIP REFER request.
Table 4.2.4.1-12: SIP INVITE request (**SCC AS-1 to UE-2**)
> INVITE sip:user2\@home2.net SIP/2.0
>
> Via: SIP/2.0/UDP
>
> Max-Forwards:
>
> From: \;tag=38789
>
> To: \
>
> Call-ID: duie4hr3896
>
> Cseq: 41 INVITE
>
> Contact: \;g.3gpp.iut-focus
>
> Referred-By: sip:user1\@home1.net
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=IN IP4 123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**16-19. SIP 200 (OK) response to SIP INVITE request(UE-2 to SCC AS-1)**
UE-2 acknowledges the SIP INVITE request by sending SIP 200 (OK) response to
SCC AS-1.
**20-22. SIP re-INVITE request (SCC AS-1 to UE-3)- see example in table
4.2.4.1-20**
> SCC AS-1 sends SIP re-INVITE request to the remote UE to update the video
> media.
Table **4.2.4.1-20:** SIP INVITE request (SCC AS-1 to UE-3)
> INVITE sip:user3\@home3.net SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**23-25. SIP 200 (OK) response to re-INVITE request (UE-3 to SCC AS-1)**
After successful media update, UE-3 sends the SIP 200 (OK) response towards
SCC AS-1.
**26-28. SIP ACK request (SCC AS-1 to UE-3)**
SCC AS-1 sends SIP ACK request to the remote UE-3.
**29-32. SIP ACK request (SCC AS-1 to UE-2)**
SCC AS-1 sends SIP ACK request to UE-2 to confirm the session establishment.
**33-34**. **SIP NOTIFY request (SCC AS-1 to UE-1)**
The SCC AS-1 informs the UE-1 that the action triggered by SIP REFER request
was successfully completed.
**35-36. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to SCC AS-1)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
## 4.3 Discovery of UEs of different IMS subscriptions which can participate
in collaborative sessions
### 4.3.1 General
Editor\'s Note: This subclause will describe the UE discovery procedures,
especially for the case when UEs belong to different IMS subscriptions.
### 4.3.2 Procedures
### 4.3.3 Identified issues
### 4.3.4 Call flows
## 4.4 Establishment of collaborative session upon session setup
### 4.4.1 General
The following subclauses describe the procedures and call flows of
collaborative session establishment without the pre-requisite of having an IMS
session established.
### 4.4.2 Procedures
#### 4.4.2.1 Establishment of collaborative session upon originating IMS
session setup
Editor\'s Note: This subclause corresponds to subclause 6.1.3.2 of 3GPP TR
23.831 [3]
##### 4.4.2.1.1 Alternative 1 -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP
###### 4.4.2.1.1.1 Alternative 1a- media negotiation with remote party first
###### # 4.4.2.1.1.1.1 Controller UE
To establish a collaborative session upon originating session setup, the
controller UE sends a SIP INVITE request to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4]. The controller UE shall
populate the SIP INVITE request as follows:
1) the Request-URI set to the URI of remote party; and
2) the SDP information as follows:
a) for the media component(s) served by itself, containing the port numbers of
the UE; and
b) for the media component(s) that to be established in the controllee UE, set
as follows:
\- the port numbers set to 9; and
\- the SIP URI of controllee UE in the c line as described in draft-yang-
dispatch-SIP-connection-address-type [16].
Upon receiving a SIP 200 (OK) response with the SDP answer from SCC AS, the
controller UE shall send a SIP ACK request to the SCC AS.
###### # 4.4.2.1.1.1.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request due to the c line containing a SIP address
as described in draft-yang-dispatch-SIP-connection-address-type [16], the SCC
AS shall remove the ccap line containing the SIP address and uses the 0.0.0.0
address instead, and forward the SIP INVITE request to the remote party.
on receiving a SIP 18x response from remote party, the SCC AS shall send a SIP
INVITE request to the controllee UE includes:
1) the Request-URI set to the URI of controllee UE;
2) the Referred-by header field set to the URI of the controller UE; and
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 18x response from the controllee UE, the SCC AS shall
send a SIP UPDATE request to the remote party to update the media includes:
1) the Request-URI set to the URI of remote party; and
2) the SDP offer with
a) for the media component(s) that are to be established on the controller UE
with the port number received from the initial SIP INVITE request sent by the
controller UE; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
###### 4.4.2.1.1.2 Alternative 1b- media negotiation with controllee UE first
###### # 4.4.2.1.1.2.1 Controller UE
To establish a collaborative session upon originating session setup, the
controller UE sends a SIP INVITE request to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4]. The controller UE shall
populate the SIP INVITE request as follows:
1) the Request-URI set to the URI of remote party; and
2) the SDP information as follows:
a) for the media component(s) served by itself, containing the port numbers of
the UE; and
b) for the media component(s) that to be established in the controllee UE, as
follows:
\- the port numbers set to 9;
\- the connection address set to 0.0.0.0; and
\- \"a=3gpp.iut.controllee\" attribute set to the SIP URI of the controllee
UE.
Upon receiving a SIP 200 (OK) response with the SDP answer from the remote
party, the controller UE shall send a SIP ACK request to the remote party.
###### # 4.4.2.1.1.2.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request due to the \"a=3gpp.iut.controllee\"
attribute, the SCC AS shall send a SIP INVITE request to the controllee UE
includes:
1) the Request-URI set to the URI of controllee UE which is indicated in the
\"a=3gpp.iut.controllee\" attribute;
2) the Referred-by header field set to the URI of the controller UE; and
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number set to 9.
Upon receiving a SIP 18x/200 response from the controllee UE, the SCC AS shall
send a SIP INVITE request to the remote party includes:
1) the Request-URI set to the URI of remote party using the URI from the
Request-URI of the original SIP INVITE request; and
2) the SDP offer with
a) for the media component(s) that are to be established on the controller UE
with the port number received from the initial SIP INVITE request sent by the
controller UE; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 200 (OK) response from the remote UE, the SCC AS shall
forward the SIP 200(OK) respose to the controller UE and send a SIP re-
INVTE/UPDATE request to the controllee UE includes:
1) the Request-URI set to the URI of remote party; and
2) the SDP offer with
a) for the media component(s) that are to be established on the controller UE
with the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.1.2 Alternative 2 -- indicating collaborative session
establishment by multipart/related Content-Type parameter
###### 4.4.2.1.2.1 Controller UE
To establish a collaborative session upon originating session setup the
controller UE sends a SIP INVITE request to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4]. The controller UE shall
populate the SIP INVITE request as follows:
1) the Request-URI set to the URI of the remote party;
2) the Contact header field containing the +g.3gpp.iut-controller media
feature-tag as described in 3GPP TS 24.237 [6], annex C;
3) the Content-Type header field set to multipart/related with a start-info
parameter value \"collaborative-session\"; and
4) the body including:
a) SDP for the media component(s) served by itself, containing the port
numbers of the UE; and
b) SIPfrag of a SIP REFER request, indicating the media component(s) to be
established on the controllee UE, with a Refer-To header including:
> \- the SIP URI of the controllee UE where the media stream(s) should be
> established; and
NOTE 1: The SIP URI of the controllee UE needs to be a GRUU if the controllee
UE and any other UEs share the same public user identity.
> \- the SIP URI additionally containing the URI header field with the hname
> \"body\" containing SDP media (m=) line(s) for the media to be added to the
> controllee UE with the port numbers set to 9.
NOTE 2: The SIP INVITE request will be forwarded to the SCC AS through means
of intial filter criteria.
Upon receiving a SIP 200 (OK) response with an SDP answer from the SCC AS, the
controller UE shall send a SIP ACK request to the SCC AS.
###### 4.4.2.1.2.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request including a Contact header field
containing the +g.3gpp.iut-controller media feature-tag as described in 3GPP
TS 24.237 [6], annex C, and including a multipart/related Content-Type header
field with a start-info parameter value \"collaborative-session\", the SCC AS
shall remove the SIPfrag and add the SDP of the body parameter of the SIP
REFER request of the SIPfrag to the SDP of the SIP INVITE request with a
connection (c=) line using the unspecified (0.0.0.0) address if IPv4 is being
used or a domain name within the \".invalid\" DNS top-level domain as
described in draft-ietf-sipping-v6-transition if IPv6 is being used and
forward the SIP INVITE request to the remote party.
Upon receiving a SIP 18x response from the remote party, the SCC AS shall send
a SIP INVITE request to the controllee UE including:
1) the Request-URI set to the URI of the controllee UE;
2) the Referred-by header field set to the URI of the controller UE; and
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers set to zero; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers of the corresponding media lines of the SDP received
during the last successful SDP offer/answer exchange.
Upon receiving a SIP 18x response from the controllee UE, the SCC AS shall
send a SIP UPDATE request to the remote party to update the media, including:
1) the Request-URI set to the URI of the remote party; and
2) the SDP offer as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers received in the initial SIP INVITE request sent by
the controller UE; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers received in the SIP 18x response from the controllee
UE.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.1.3 Alternative 3 -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP attribute and using
P-Asserted-Identity
###### 4.4.2.1.3.1 Controller UE
To establish a collaborative session upon originating session setup the
controller UE sends a SIP INVITE request to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4]. The controller UE shall
populate the SIP INVITE request as follows:
1) the Request-URI set to the URI of the remote party; and
2) the SDP information as follows:
a) for the media component(s) served by itself, containing the port numbers of
the UE; and
b) for the media component(s) that to be established in the controllee UE, as
follows:
\- the port numbers set to 9;
\- the connection address set to 0.0.0.0; and
\- \"a=3gpp.iut.controllee\" attribute set to the SIP URI of controllee UE.
Upon receiving a SIP 200 (OK) response with the SDP answer from SCC AS, the
controller UE shall send a SIP ACK request to the SCC AS.
###### 4.4.2.1.3.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request including SDP containing media with the
\"a=3gpp.iut.controllee\" attribute, the SCC AS shall send a SIP INVITE
request to the controllee UE including:
1) the Request-URI set to the URI of the controllee UE which is indicated in
the \"a= 3gpp. iut.controllee\" attribute;
2) the P-Asserted-Identity header field set to the URI of the controller UE;
and
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE:
\- remove the attribute \"a=3gpp.iut.controllee\";
\- the port number set to 9; and
\- the connection address set to 0.0.0.0.
Upon receiving a SIP 18x or 200 (OK) response from the controllee UE that
includes an SDP answer, the SCC AS shall send a SIP INVITE request to the
remote party including:
1) the Request-URI set to the URI of the remote party using the URI from the
Request-URI of the original SIP INVITE request;
2) the P-Asserted-Identity header field set to the URI of the controller UE;
and
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 200 (OK) response from the remote UE, the SCC AS shall
forward the SIP 200(OK) respose to the controller UE and send a SIP re-
INVTE/UPDATE request to the controllee UE to update the media description
based upon the last successful SDP offer/answer exchange with the remote party
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.1.3A Alternative 3A -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP connection line and
using P-Asserted-Identity
###### 4.4.2.1.3A.1 Controller UE
To establish a collaborative session upon originating session setup, the
controller UE sends a SIP INVITE request to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4]. The controller UE shall
populate the SIP INVITE request as follows:
1) the Request-URI set to the URI of remote party; and
2) the SDP information as follows:
a) for the media component(s) served by itself, containing the port numbers of
the UE; and
b) for the media component(s) that to be established in the controllee UE, as
follows:
\- the port numbers set to 9; and
\- the SIP URI of controllee UE in the c line as described in draft-yang-
dispatch-SIP-connection-address-type [16].
Upon receiving a SIP 200 (OK) response with the SDP answer from SCC AS, the
controller UE shall send a SIP ACK request to the SCC AS.
###### 4.4.2.1.3A.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request including SDP containing media containing
a SIP address in the c line as described in draft-yang-dispatch-SIP-
connection-address-type [16], the SCC AS shall send a SIP INVITE request to
the controllee UE including.
1) the Request-URI set to the URI of the controllee UE which is indicated in
the c line as described in draft-yang-dispatch-SIP-connection-address-type
[16];
2) the P-Asserted-Identity header field set to the URI of the controller UE;
and
2) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE:
\- the port number set to 9; and
\- the connection address set to 0.0.0.0.
Upon receiving a SIP 18x or 200 (OK) response from the controllee UE that
includes an SDP answer, the SCC AS shall send a SIP INVITE request to the
remote party including:
1) the Request-URI set to the URI of the remote party using the URI from the
Request-URI of the original SIP INVITE request;
2) the P-Assserted-Identity header field set to the URI of the controller UE;
and
3) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 200 (OK) response from the remote UE, the SCC AS shall
forward the SIP 200(OK) respose to the controller UE and send a SIP re-
INVTE/UPDATE request to the controllee UE to update the media description
based upon the last successful SDP offer/answer exchange with the remote party
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.1.4 Alternative 4 -- indicating collaborative session
establishment using multiple REFER
###### 4.4.2.1.4.1 Controller UE
To establish a collaborative session upon originating session setup, the
controller UE sends a SIP REFER request to the SCC AS in accordance with the
procedures specified in 3GPP TS 24.229 [4]. The controller UE shall populate
the SIP REFER request as follows:
1) the Request-URI set to the Inter UE Transfer SCC AS URI;
2) the Refer-To header field containing a Content-ID URL as specified in RFC
5368 [23];
3) the Require header field containing the option-tags \"multiple-refer\" and
\"norefersub\";
4) the Refer-Sub header field set to \"false\";
5) the Content-Type header field containing the MIME type
\"application/resource-lists+xml\";
6) the Content-Disposition header field containing \"recipient-list\";
7) the Content-Id header field containing the content ID;
8) the Accept header field containing the MIME types \"application/sdp \" and
\"message/sipfrag\"**;**
9) the Contact header field containing the media feature tags g.3gpp.iut-
controller and the \"g.3gpp current-iut-controller\" set to \"active\" as
described in annex C;
10) the Referred-By header field containing a currently registered public user
identity of the user to be delivered to the controllee UE(s) and remote UE;
and
11) a recipient-list MIME body formatted as follows:
a) an \ element containing:
i) the SIP URI of the remote UE being invited to the session;
ii) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines
for the session with port numbers set to zero; and
iii) a copyControl attribute set to \"to\" as specified in RFC 5364 [24];
b) an \ element containing:
i) the SIP URI of the controller UE;
NOTE 1: The SIP URI of the controllee UE needs to be a GRUU if the controllee
UE and other UEs share the same public user identity.
ii) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines
for the session with port numbers set as follows:
\- media lines that are being added on controllee UE(s) with the port number
set to zero;
\- media line(s )that are to be added on the controller UE containing the
media type(s) to be added and the discard port number \"9\" ; and
NOTE 2: The discard port number \"9\" indicates that this port number should
be ignored.
iii) a copyControl attribute set to \"bcc\" as specified in RFC 5364 [24];
c) an \ element for each controllee UE containing:
i) the SIP URI of the controller UE;
NOTE 3: The SIP URI of the controllee UE needs to be a GRUU if the controllee
UE and other UEs share the same public user identity.
ii) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines
for the session with port numbers set as follows:
\- media lines that are not being added on the controllee UE with the port
number set to zero;
\- media line(s )that are to be added on the controllee UE containing the
media type(s) to be added and the discard port number \"9\" ; and
NOTE 4: The discard port number \"9\" indicates that this port number should
be ignored.
iii) a copyControl attribute set to \"bcc\" as specified in RFC 5364 [24].
The controller UE shall handle any response to the SIP REFER request and the
subsequent SIP NOTIFY requests according to 3GPP TS 24.229 [2] and IETF RFC
3515 [13].
Upon receiving a SIP INVITE request containing the Referred-By header field
contents provided in the SIP REFER request, the controller UE shall send a SIP
183 (Session Progress) response containing an SDP answer and the media feature
tag \"g.3gpp current-iut-controller\" set to \"active\" in the Contact header
field.
The controller UE shall send a SIP 200 (OK) response to the SCC AS in
accordance with the procedures specified in 3GPP TS 24.229 [4]
###### 4.4.2.1.4.2 SCC AS serving the collaborative session
Upon receiving a SIP REFER request with the Request-URI set to the Inter UE
Transfer SCC AS URI and containing a recipient-list MIME body the SCC AS shall
send a SIP INVITE request to the remote party identified by the \
element containing the copyControl attribute set to \"to\" containing:
1) Request-URI with SIP URI from the Refer-To header field of the received SIP
REFER request;
2) the Referred-By header field containing the values from the Referred-By
header field of the received SIP REFER request according to the procedures of
RFC 3892 [59];
3) the P-Asserted-Identity header field containing the URI of the Controller
UE from the Referred-By header field of the received SIP REFER request; and
4) the SDP information for the media component to be offerred from the media
type(s) from the media (m=) lines from the hname \"body\" URI header field in
the SIP URI in the \ element of remote UE from the received SIP
REFER request.
Upon receiving a SIP 18x response from remote party, the SCC AS shall send a
SIP INVITE request to the controller and controllee UEs identified by the
\ elements containing the copyControl attribute set to \"bcc\"
containing:
1) the Request-URI set to the URI from \ element;
2) the Referred-By header field containing the values from the Referred-By
header field of the received SIP REFER request according to the procedures of
RFC 3892 [59];
3) the P-Assserted-Identity header field set to the URI of the controller UE
from the Referred-By header field of the received SIP REFER request; and
4) the SDP information as from the media type(s) from the media (m=) lines
from the hname \"body\" URI header field in the SIP URI in the \
element of the UE from the received SIP REFER request follows:
a) for the media component(s) that are not to be established on the UE
containing the port number set to zero; and
b) for the media component(s) that are to be established on the UE containing
the port number for the corresponding media received in the media line of the
SDP received during the last successful SDP offer/answer exchange.
After receiving a SIP 18x response containing an SDP answer from all the
controllee UEs and the controller UE, the SCC AS shall send a SIP UPDATE
request to the remote party to update the media as follows:
1) the Request-URI set to the URI of remote party; and
2) the SDP offer with the active port number received in the SDP answers from
the controllee UEs and the controller UE
The SCC AS identifies the controller UE from the media feature tag \"g.3gpp
current-iut-controller\" set to \"active\" in the Contact header field of the
response.
Upon receiving a SIP 200 (OK) response from the remote UE then once a SIP 200
(OK) response has been received from a controllee UEs or the controller UE,
the SCC AS shall send a SIP ACK request to that UE. The SCC AS also shall send
a SIP ACK request to the remote UE.
Upon receiving a 4xx, 5xx or 6xx response from the remote UE or upon a timeout
on the dialog towards the remote UE before the SIP 200 (OK) response is
received from the remote UE the SCC AS shall send a SIP CANCEL request to the
controller UE and controllee UEs and consider the establishment of the
collaborative session terminated.
#### 4.4.2.2 Establishment of collaborative session upon terminating IMS
session setup
Editor\'s Note: This subclause corresponds to subclause 6.1.3.3 of 3GPP TR
23.831 [3]
##### 4.4.2.2.1 Alternative 1: Using SIP 183 (Session Progress) response
###### 4.4.2.2.1.1 Controller UE
Upon receiving a SIP initial INVITE request from the remote party, the
controller UE shall send a SIP 18x response to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4] with the SDP information
as follows:
1) for the media component(s) that are to be established on the controller UE
containing the port numbers of the controller UE; and
2) for the media component(s) that to be established in the controllee UE with
the port set to 9.
After sending the SIP 18x response, to establish the media on the controllee
UE, the controller UE sends a SIP UPDATE request to the remote party includes:
1) the Request-URI set to the URI of remote party; and
2) the SDP information as follows:
a) for the media component(s) served by controller UE, containing the port
numbers of the controller UE; and
b) for the media component(s) that to be established in the controllee UE, set
as follows:
\- the port numbers set to 9; and
\- the SIP URI of controllee UE in the c line as described in draft-yang-
dispatch-SIP-connection-address-type [16].
When the controller UE answers the call, the controller UE sends a SIP 200
(OK) response to the remote party.
###### 4.4.2.2.1.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request from the remote party, the SCC AS shall
forward the SIP INVITE request to the controller UE.
Upon receiving a SIP UPDATE request from the controller UE, the SCC AS
authorizes the request for the session setup in controllee UE. To establish
the media on the controllee UE, the SCC AS sends a SIP INVITE request to the
controllee UE includes:
1) the Request-URI set to the URI of controllee UE; and
2) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
with the port number set to zero; and
b) for the media component(s) that are to be established on the controllee UE
containing the port number for the corresponding media received in the media
line of the SDP received during the last successful SDP offer/answer exchange.
Upon receiving a SIP 18x response from the controllee UE, the SCC AS shall
forward the SIP UPDATE request with the updated SDP offer to the remote party
to update the media.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.2.2 Alternative 2 -- indicating collaborative session
establishment bymultipart/related Content-Type parameter
###### 4.4.2.2.2.1 Controller UE
Upon receiving a SIP initial INVITE request from the remote party, the
controller UE shall send a SIP 18x response to the remote party in accordance
with the procedures specified in 3GPP TS 24.229 [4] with the SDP information
as follows:
1) for the media component(s) that are to be established on the controller UE
contain the port numbers of the controller UE; and
2) for the media component(s) that are to be established on the controllee UE
contain the port numbers set to 9.
When the controller UE answers the call, the controller UE sends a SIP 200
(OK) response to the remote party, including:
1) the Request-URI set to the URI of the remote party;
2) the Contact header field containing the g.3gpp.iut-controller media
feature-tag as described in 3GPP TS 24.237 [6], annex C;
3) the Content-Type header field set to multipart/related with a start-info
parameter value \"collaborative-session\"; and
4) the body including:
a) SDP for the media component(s) served by itself, containing the port
numbers of the UE; and
b) SIPfrag of a SIP REFER request, indicating the media component(s) to be
established on the controllee UE, with a Refer-To header including:
> \- the SIP URI of the controllee UE where the media stream(s) should be
> established; and
NOTE: The SIP URI of the controllee UE needs to be a GRUU if the controllee UE
and any other UEs share the same public user identity.
> \- the SIP URI additionally containing the URI header field with the hname
> \"body\" containing SDP media (m=) line(s) for the media to be added to the
> controllee UE with the port numbers set to 9.
###### 4.4.2.2.2.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request from the remote party, the SCC AS shall
forward the SIP INVITE request to the terminating UE.
NOTE: The SIP INVITE request will be forwarded to the SCC AS through means of
intial filter criteria.
When the SCC AS receives a SIP 200 (OK) response from the terminating UE
including a Contact header field containing the g.3gpp.iut-controller media
feature-tag as described in 3GPP TS 24.237 [6], annex C, and including a
multipart/related Content-Type header field with a start-info parameter value
\"collaborative-session\", the SCC AS shall authorize the request for the
session setup in the controllee UE. To establish the media on the controllee
UE, the SCC AS shall send a SIP INVITE request to the controllee UE including:
1) the Request-URI set to the URI of the controllee UE; and
2) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers set to zero; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers of the corresponding media lines of the SDP received
during the last successful SDP offer/answer exchange.
Upon receiving a SIP 18x response from the controllee UE, the SCC AS shall
send a SIP UPDATE request to the remote party to update the media, including:
1) the Request-URI set to the URI of the remote party; and
2) the SDP offer as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers received in the SIP 200 (OK) response from the
controller UE; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers received in the SIP 18x response from the controllee
UE.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.2.3 Alternative 3 -- indicating collaborative session
establishment by SIP REFER request before SIP 200 (OK) response
###### 4.4.2.2.3.1 Controller UE
Upon receiving a SIP initial INVITE request from the remote party, the
controller UE shall send a SIP 18x response reliably to the remote party in
accordance with the procedures specified in 3GPP TS 24.229 [4] with the SDP
information as follows:
1) for the media component(s) that are to be established on the controller UE
contain the port numbers of the controller UE; and
2) for the media component(s) that are to be established on the controllee UE
contain the port numbers set to 9.
Upon receiving a SIP PRACK request from the SCC AS acknowledging the reception
of the SIP 18x response, the controller UE shall send a SIP 200 (OK) response
to the SIP PRACK request.
After sending the SIP 200 (OK) response the controller UE shall send a SIP
REFER request outside the dialog initiated by the received SIP INVITE request
to the SCC AS as specified in IETF RFC 3515 [8] and include:
1) the Request-URI set to the URI of the SCC AS;
2) the Refer-To header field, including:
a) the SIP URI of the controllee UE;
NOTE: The SIP URI of the controllee UE needs to be a GRUU if the controllee UE
and other UEs share the same public user identity.
> b) the body parameter containing SDP media (m=) line(s) for the media to be
> transferred to the controllee UE with the port numbers set to 9.
3) the Accept header field containing the MIME type \"message/sipfrag\"**;**
**4) the Target-Dialog header field containing the dialog parameters for the**
dialog of the session initiated by the received SIP INVITE request;
5) the Contact header field containing the g.3gpp.iut-controller media
feature-tag as described in 3GPP TS 24.237 [6],annex C;and
6) the Referred-By header field containing a currently registered public user
identity of the controller UE.
The controller UE shall handle any response to the SIP REFER request and the
subsequent SIP NOTIFY requests according to 3GPP TS 24.229 [4] and IETF RFC
3515 [8]. The controller UE shall save the media information (e.g. media
line(s) and port number(s)) received in the sipfrag body of the SIP NOTIFY
requests in order to perform further inter-UE transfer operations on the
controllee UE.
If an error response is received for the SIP REFER request or the subsequent
SIP NOTIFY requests including a non-2xx final response, the controller UE
shall consider the transfer operation failed and continue the existing
session.
When the controller UE answers the call, the controller UE sends a SIP 200
(OK) response to the remote party.
###### 4.4.2.2.3.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request from the remote party, the SCC AS shall
forward the SIP INVITE request to the terminating UE.When the SCC AS receives
a SIP REFER request in a new dialog from the terminating UE including a
Contact header field containing the g.3gpp.iut-controller media feature-tag as
described in 3GPP TS 24.237 [6], annex C, the SCC AS shall check whether the
**Target-Dialog header field of the SIP REFER request contains the dialog
parameters for the** dialog of the session initiated by the forwarded SIP
INVITE request. If the **Target-Dialog header field contains the dialog
parameters for the** dialog of the session initiated by the forwarded SIP
INVITE request a collaborative session shall be established with the
terminating UE as the controller UE.
The SCC AS shall authorize the request for the session setup in the controllee
UE indicated by the SIP REFER request and send a SIP 202 (Accepted) response
to the controller UE, if the session setup in the controllee UE has been
authorized.
Upon receiving a SIP 200 (OK) response from the controller UE, the SCC AS
shall send a SIP INVITE request to the controllee UE including:
1) the Request-URI set to the URI of controllee UE; and
2) the SDP information as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers set to zero; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers of the corresponding media lines of the SDP received
during the last successful SDP offer/answer exchange.
Upon receiving a SIP 18x response from the controllee UE, the SCC AS shall
send a SIP UPDATE request to the remote party to update the media, including:
1) the Request-URI set to the URI of the remote party; and
2) the SDP offer as follows:
a) for the media component(s) that are to be established on the controller UE
contain the port numbers received in the SIP 200 (OK) response from the
controller UE; and
b) for the media component(s) that are to be established on the controllee UE
contain the port numbers received in the SIP 18x response from the controllee
UE.
Upon receiving a SIP 200 (OK) response from the controllee UE, the SCC AS
shall send a SIP ACK request to the controllee UE.
##### 4.4.2.2.4 Alternative 4 -- Using SIP 300 (Multiple Choices) response
###### 4.4.2.2.4.1 Controller capable UE
Upon receiving a SIP initial INVITE request from the remote party, the
controller capable UE shall send a SIP 300 (Multiple Choices) response to the
remote party in accordance with the procedures specified in 3GPP TS 24.229 [4]
as follows:
1) a Contact header field for each UE that is to be a participant in the
collaborative session (including the controller capable UE if the controller
capable UE is also a participant) containing the SIP URI of that UE
NOTE: The SIP URI of the UE needs to be a GRUU if any of the UEs that are
participants of the collaborative session share the same public user identity.
2) a Content-Type header field containing the MIME type
application/**vnd.3gpp.iut+xml** ; and
3) an application/**vnd.3gpp.iut+xml** MIME body containing a
\ element as containing
i) an \ element containing the SIP URI of the controller UE
for the collaborative session and additionally containing the URI header field
with the hname \"body\" containing SDP for the media type for each of the
media (m=) lines in the session set as follows:
\- media lines that are not being assigned to the controller capable UE with
the port number set to zero
\- media line(s) that are to be assigned to the controller capable UE
containing the port number for the corresponding media types received in the
media line of the SDP offer in the SIP INVITE request; and
ii) a \ element for each controllee UE that is to be a participant
in the collaborative session containing the SIP URI of the controllee UE for
the collaborative session and additionally containing the URI header field
with the hname \"body\" containing SDP for the media type for each of the
media (m=) lines in the session set as follows:
\- media lines that are not being assigned to that controllee UE with the port
number set to zero
\- media line(s) that are to be assigned to that controllee UE containing the
port number for the corresponding media types received in the media line of
the SDP offer in the SIP INVITE request;
If the controller capable UE indicated in the SIP 300 (Multiple Choices)
response that it will be a participant in the collaborative session then the
controller capable UE will receive a SIP INVITE request containing an SDP
offer . The controller capable UE shall handle the SIP INVITE request in
accordance with the procedures specified in 3GPP TS 24.229 [4].
If the controller capable UE indicated in the SIP 300 (Multiple Choices)
response that it will be the controller UE for the collaborative session then
the controller capable UE shall when accepting the session behave as a
controller UE of the collaborative session, otherwise the controller capable
UE shall act as a controllee UE for the collaborative session.
###### 4.4.2.2.4.2 SCC AS serving the collaborative session
Upon receiving a SIP INVITE request from the remote party, the SCC AS shall
forward the SIP INVITE request to the controller capable UE in accordance with
the procedures specified in 3GPP TS 24.229 [4] adding the following:
1) an Accept-Contact header field containing the media feature tag g.3gpp.iut-
controller along with the explicit parameter; and
2) an Accept header field containing the MIME type
application/**vnd.3gpp.iut+xml**.
Upon receiving a SIP 300 (Multiple Choices) response containing the MIME body
application/**vnd.3gpp.iut+xml** from the controller capable UE in response to
the initial SIP INVITE request, the SCC AS sends a SIP ACK request to the
controller capable UE in accordance with the procedures specified in 3GPP TS
24.229 [4] and then authorizes the request for the collaborative session setup
with the controllee UE(s) identified in the \ element in the MIME
body of the SIP 300 (Multiple Choices) response. The UE identified in
\ element in the MIME body of the SIP 300 (Multiple Choices)
will become the controller UE for the collaborative session.
If authorised the SCC AS shall send a SIP 183 (Session Progress) response to
the remote UE containing an SDP answer for all media lines indicated in the
MIME body of the SIP 300 (Multiple Choices) response with a=INACTIVE set and
for any media lines in the original offer that are not indicated in the MIME
body of the SIP 300 (Multiple Choices) response with port numbers set to zero.
To establish the media the SCC AS sends a SIP INVITE request to each UE
identified in the Contact header fields of the SIP 300 (Multiple Choices)
response including:
1) the Request-URI set to the URI of UE from a Contact header of the SIP 300
(Multiple Choices) response;
2) the P-Asserted-Identity header field containing the identity of the remote
UE as received in the P-Asserted-Identity header field from the remote UE in
the original SIP INVITE request; and
3) the SDP information for the media component to be transferred to that UE as
follows:
a) the media type(s) from the media (m=) lines from the hname \"body\" URI
header field in the corresponding SIP URI in the \ element
and \ element(s) in the \ element of the
application/**vnd.3gpp.iut+xml** MIME body of the SIP 300 (Multiple Choices)
response; and
b) for media lines which have non zero port numbers the SDP parameters from
the corresponding media lines as received in the SDP offer from the remote UE
and extended with
i) sendonly directionality; and
ii) bandwidth information with RS set to zero and RR set to zero.
If the SIP final response was a non 2xx response then the SCC AS shall
consider the transfer operation failed and the SCC AC shall send to the
controller capable UE either a SIP re-INVITE request if a 2xx response has
been received from the controller UE or a SIP UPDATE request if a final
response has not yet been received from the controller capable UE following
the procedures described in 3GPP TS 24.229 [2] as follows:
1) containing SDP reoffering the media component(s) that were offered to the
UE that did not accept the SDP offer.
If the a response containing an SDP answer is received from a local UE, the
SCC AC shall send a SIP UPDATE request on the dialog for the remote leg to the
remote UE as specified in 3GPP TS 24.229 [2]. The SCC AS shall:
1) send a SIP UPDATE request containing SDP information as follows:
a) for the transferred media component(s), set the SDP information as from the
SDP answer received in the response from the UE; and
b) for all other media components in the collaborative session, include the
SDP information as from the previous offer answer exchange with the remote
leg.
Upon receipt of a 2xx response for the SIP UPDATE request sent to the remote
UE, the SCC AS shall send a SIP UPDATE request to the local UE that terminates
the media component accepted in the SDP answer from the remote UE following
the procedures described in 3GPP TS 24.229 [2] and set the directionality
(i.e. sendrecv/sendonly/recvonly/inactive) attributes associated to the
transferred media component to according to the SDP answer received from the
remote UE.
Upon receipt of a 2xx response for the SIP INVITE request sent to the
controller capable UE, the SCC AS shall send a SIP 2xx response to the remote
UE following the procedures described in 3GPP TS 24.229 [2] to establish the
session with the remote UE.
Upon receiving a SIP ACK request from the remote UE, the SCC AS shall send a
SIP ACK request to each local UE once a SIP 200 (OK) response has been
received from the local UE.
### 4.4.3 Identified issues
**Issue 4.4.3-1:** What happens with early media and forked responses during
session establishment, when a controllee UE is also added to the session
currently being established? Will the related responses e.g. all be all
delivered to the controller UE or be intercepted by the SCC AS?
### 4.4.4 Call flows
#### 4.4.4.1 Call flows for establishment of collaborative session upon
originating IMS session setup without forked responses
##### 4.4.4.1.1 Alternative 1 -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP
###### 4.4.4.1.1.1 Alternative1a - Media negotiation with remote UE first
In the example flow at the figure 4.4.4.1.1-1, UE-1 wants to establish a
collaborative session without the pre-requisite of having an IMS session
established. The UE-1 wants to setup a collaborative session with audio media
flow in UE-1 and video media flow in UE-2, and wants to control the
collaborative session through UE-1.The SCC AS forwards the SIP INVITE request
to the remote UE to do the media negotiation with remote UE first.
Figure 4.4.4.1.1.1-1: Signalling flow for establishment of collaborative
session upon originating IMS session
NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
signalling flow.
**1-2. SIP INVITE request (UE-1 to SCC AS) - see example in table
4.4.4.1.1.1-1**
The UE-1 sends SIP INVITE request to SCC AS to setup the collaborative
session.
Table 4.4.4.1.1.1-1: SIP INVITE request (UE-1 to intermediate IM CN subsystem
entities)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> c= URL SIPURI sip:user2\@example2.net
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**SDP** : The first media stream (audio) will be terminated by UE-1 of which
the IP address is indicated in the c-line in the SDP header.
Editor\'s Note: The second media stream (video) is destined to be terminated
by UE-2, of which the address is only known as a SIP address by UE-1. One
possible solution in this example is, UE-1 includes the SIP address of UE-2 in
the c line in the SDP media block for the video media stream, as described in
draft-yang-dispatch-SIP-connection-address-type [16].
The port number of the remote side, i.e. UE-3 for the video media is currently
not known to UE-1, therefore the port number for the video media stream is set
to the discard port number \"9\".
**3-4. SIP INVITE request (SCC AS to UE-3) - see example in table
4.4.4.1.1.1-3**
SCC AS forwards the SIP INVITE request to UE-3.
Table 4.4.4.1.1.1-3: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE sip:user3\@example1.net; SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net;
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> c=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**5-6. SIP 183 (Session Progress) response to SIP INVITE request (UE-3 to SCC
AS)**
The remote UE-3 responds with SIP 183 (Session Progress) response containing
the SDP answer of remote UE.
**7-8. SIP INVITE request (SCC AS to UE-2) -- see example in table
4.4.4.1.1.1-7**
The SCC AS sends the SIP INVITE request to UE-2 to establish the media between
UE-2 and remote UE-3.
Table 4.4.4.1.1.1-7: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;
>
> From: sip:user3\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3\@example1.net
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
**9-10. SIP 183 (Session Progress) response to SIP INVITE request (UE-2 to SCC
AS)**
UE-2 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-2.
**11-12. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.4.4.1.1.1-11**
SCC AS sends SIP UPDATE request to UE-3 to update the media in UE-3.
Table 4.4.4.1.1.1-11: SIP UPDATE request (SCC AS to remote intermediate IM CN
subsystem entities)
> UPDATE sip:user3_public3\@home3.net SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**13-14. SIP 200 (OK) response to SIP UPDATE request(remote UE to SCC AS)**
The remote UE-3 responds with SIP 200 (OK) response.
**15-18. SIP 200 (OK) response to the initial SIP INVITE request (remote UE to
UE-1)**
When the remote UE answers the call, UE-3 sends the SIP 200 (OK) response back
to UE-1.
**19-20. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends the SIP ACK request to confirm the establishment of call to SCC AS.
**21-22. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
UE-2 responds SIP 200 (OK) response to the SIP INVITE request.
**23-24. SIP ACK request (UE-2 to SCC AS)**
UE-2 sends the SIP ACK request to SCC AS.
**25-26. SIP ACK request (SCC AS to UE-3)**
SCC AS sends SIP ACK request to the remote UE.
###### 4.4.4.1.1.2 Alternative 1b - Media negotiation with controllee UE first
In the example flow at the figure 4.4.4.1.1.2-1, UE-1 wants to establish a
collaborative session without the pre-requisite of having an IMS session
established. The UE-1 wants to setup a collaborative session with audio media
flow in UE-1 and video media flow in UE-2, and wants to control the
collaborative session through UE-1. The SCC AS establishes the Access Leg at
UE-2 first to obtain the full media description of the video media.
Figure 4.4.4.1.1.2-1: Signalling flow for establishment of collaborative
session at IMS session origination
NOTE: For clarity, the SIP 100 (Trying) messages and SIP NOTIFY with SIP 100
(Trying) are not shown in the signalling flow.
**1-2. SIP INVITE reuqest (UE-1 to SCC AS) - see example in table
4.4.4.1.1.2-1**
The UE-1 sends SIP INVITE request to SCC AS-1 to setup the collaborative
session.
Table 4.4.4.1.1.2-1: SIP INVITE request (UE-1 to intermediate IM CN subsystem
entities)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> c=IN IP4 0.0.0.0
>
> a=3gpp.iut.controllee SIPURI sip:user2\@example2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**SDP** : The first media stream (audio) will be terminated by UE-1 of which
the IP address is indicated in the c-line in the SDP header.
  1. **SIP INVITE request (SCC AS to UE-2) - see example in table 4.4.4.1.1.2** -**-3**
> Upon receiving the SIP INVITE request, the SCC AS sends a SIP INVITE request
> to UE-2 to establish the media between UE-2 and the remote UE-3.
Table 4.4.4.1.1.2-3: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE
> sip:uesr2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route: sip:scc-as\@home1.net
>
> To: \
>
> From: \; tag=171828
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.5
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 9 RTP/AVP 98
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS
  1. **SIP 200(OK) response to SIP INVITE request (UE-2 to SCC AS) - see example in table 4.4.4.1.1.2-5.**
Table 4.4.4.1.1.2-5: SIP 200 (OK) response (**UE-2 to** intermediate IM CN
subsystem entities)
> SIP/2.0 200 OK
>
> Via:
>
> To: \tag=xyzwv
>
> From: \; tag=171828
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.5
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 1300 RTP/AVP 98
>
> a=inactive
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
**SDP** : The connection information now indicates the IP address of UE-2.
**7-8. SIP INVITE request (SCC AS to UE-3)**
The SCC AS sends the SIP INVITE request towards the remote UE-3 containg the
SDP information of UE-1 and UE-2.
  1. **SIP 200 (OK) reponse to SIP INVITE request(UE-3 to UE-1)**
> UE-3 acknowledges the SIP INVITE request by sending SIP 200 (OK) response
> with the SDP answer to UE-1.S
  1. **SIP ACK request (UE-1 to UE-3)**
> UE-1 sends SIP ACK request to the remote UE.
  1. **SIP re-INVITE request (SCC AS to UE-2)**
> SCC AS-2 sends SIP re-INVITE request to UE-2 to update the media in UE-2.
**19-20. SIP 200 (OK) response to SIP re-INVITE request (UE-2 to SCC AS)**
The UE-2 confirms the SIP re-INVITE request by sending SIP 200 (OK) response
to SCC AS.
  1. **SIP ACK request (SCC AS to UE-2)**
> SCC AS sends SIP ACK request to the remote UE.
**23-24. Media path:**
The audio media is between controller UE-1 and remote UE-3, and the video
media is established between controllee UE-2 and the remote UE. The
collaborative session control is in the controller UE-1.
##### 4.4.4.1.2 Alternative 2 -- indicating collaborative session
establishment by multipart/related Content-Type parameter
In the example flow of figure 4.4.4.1.2-1 UE-1 wants to establish a
collaborative session without having established an IMS session. UE-1 wants to
setup the collaborative session with audio media on UE-1 and with video media
on UE-2. The collaborative session is to be controlled by UE-1.
Figure 4.4.4.1.2-1: Signalling flow for establishment of collaborative session
upon originating IMS session setup
NOTE 1: For clarity, SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-2. SIP INVITE request (UE-1 to SCC AS) - see example in table
4.4.4.1.2-1**
UE-1 sends a SIP INVITE request to the SCC AS to setup the collaborative
session.
Table 4.4.4.1.2-1: SIP INVITE request (UE-1 to SCC AS)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
>
> Contact:\;+g.3gpp.iut-
> controller
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml;message/sipfrag
>
> Content-Type: multipart/related; boundary=boundary42;
> type=\"application/sdp\"; start-info=\"collaborative-session\"
>
> Content-Length: (...)
>
> \--boundary42
>
> Content-Type: application/sdp
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> \--boundary42
>
> Content-Type: message/sipfrag
>
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Refer-To:
> \ b%3DAS%3A75%0D%0Aa%3Drtpmap%3A98%20H263%0D%0Aa%3Dfmtp%3A98%20profile-level-
> id%3D0%0D%0Aa%3Drtpmap%3A99%20MP4V-ES>
>
> The SIP INVITE request includes SDP and a SIPfrag of a SIP REFER request in
> its body. The SDP describes the audio media for UE-1. The SIP REFER request
> refers to UE-2 for establishing the video media stream on UE-2.
>
> The start-info parameter of the multipart/related Content-Type header field
> of the SIP INVITE request indicates to the SCC AS that a collaborative
> session should be established with media as indicated in the SIP INVITE
> request\'s body.
NOTE 2: The SIP REFER request included in the SIP INVITE request is being
created by UE-1 and not duplicated from another SIP REFER request.
> The port number of the controllee UE, UE-2 for the video media is not known
> to UE-1. Therefore the port number for the video media stream is set to the
> discard port number \"9\".
**3-4. SIP INVITE request (SCC AS to UE-3) - see example in table
4.4.4.1.2-3**
The SCC AS forwards the SIP INVITE request to UE-3.
Table 4.4.4.1.2-3: SIP INVITE request (**SCC AS to UE-3**)
> INVITE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:user1\@example1.net;gr=
> urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98 99
>
> c=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> The forwarded SIP INVITE request includes the SDP from the received SIP
> INVITE and the SDP from the SIP REFER request included in the received SIP
> INVITE body.
**5-6. SIP 183 (Session Progress) response to SIP INVITE request (UE-3 to SCC
AS)**
The remote UE-3 responds with a SIP 183 (Session Progress) response containing
its SDP answer.
**7-8. SIP INVITE request (SCC AS to UE-2) -- see example in table
4.4.4.1.2-7**
The SCC AS sends the SIP INVITE request indicated in the SIP REFER request
received from UE-1 to UE-2 for establishing the video media between UE-2 and
remote UE-3.
Table 4.4.4.1.2-7: SIP INVITE request (**SCC AS to UE-2**)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91eg63j
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;
>
> From: sip:user3\@example1.net;tag=zshfk
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3\@example1.net
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 98 99
>
> a=sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**9-10. SIP 183 (Session Progress) response to SIP INVITE request (UE-2 to SCC
AS)**
UE-2 sends a SIP 183 (Session Progress) response towards the SCC AS containing
the SDP answer of UE-2.
**11-12. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.4.4.1.2-11**
The SCC AS sends a SIP UPDATE request to UE-3 to update the media on UE-3.
Table 4.4.4.1.2-11: SIP UPDATE request (SCC AS to UE-3)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag=zshfk
>
> From: sip:interUEtransfer\@example.net;tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:user1\@example1.net;gr=
> urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**13-14. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
The remote UE, UE-3 responds with a SIP 200 (OK) response.
**15-18. SIP 200 (OK) response to the initial SIP INVITE request (UE-3 to
UE-1)**
When the remote UE, UE-3 answers the call, it sends a SIP 200 (OK) response
back to UE-1.
**19-20. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends a SIP ACK request to the SCC AS to confirm call establishment.
**21-22. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
UE-2 responds to the SIP INVITE request received from the SCC AS with a SIP
200 (OK) response.
**23-24. SIP ACK request (SCC AS to UE-2)**
The SCC AS sends a SIP ACK request back to UE-2.
**25-26. SIP ACK request (SCC AS to UE-3)**
The SCC AS sends a SIP ACK request to the remote UE, UE-3.
##### 4.4.4.1.3 Alternative 3 -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP using P-Asserted-
Identity
In the example flow at the figure 4.4.4.1.3-1, UE-1 wants to establish a
collaborative session without the pre-requisite of having an IMS session
established. The UE-1 wants to setup a collaborative session with audio media
flow in UE-1 and video media flow in UE-2, and wants to control the
collaborative session through UE-1.
Figure 4.4.4.1.3-1: Signalling flow for establishment of collaborative session
upon originating IMS session
NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
signalling flow.
**1-2. SIP INVITE request (UE-1 to SCC AS) - see example in table
4.4.4.1.3-1**
The UE-1 sends SIP INVITE request to SCC AS to setup the collaborative
session.
Table 4.4.4.1.3-1: SIP INVITE request (UE-1 to intermediate IM CN subsystem
entities)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> a=creq:ccap-v0
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> c=IN IP4 0.0.0.0
>
> a=3gpp.iut.controllee SIPURI sip:user2\@example2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**SDP: The first media stream (audio) will be terminated by UE-1 of which the
IP address is indicated in the c-line in the SDP header.**
The port number of the remote side, i.e. UE-3 for the video media is currently
not known to UE-1, therefore the port number for the video media stream is set
to the discard port number \"9\".
**3-4. SIP INVITE request (SCC AS to UE-2) - see example in table
4.4.4.1.3-3**
Upon receiving the SIP INVITE request, the SCC AS sends a SIP INVITE request
to UE-2 to establish the media between UE-2 and the remote UE-3.
Table 4.4.4.1.3-3: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE
> sip:uesr2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: \
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: sip:user1\@example1.net
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> a=creq:ccap-v0
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> C=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**5-6. SIP 200(OK) response to SIP INVITE request (UE-2 to SCC AS) - see
example in table 4.4.4.1.3-5**
Table 4.4.4.1.1.2-5: SIP 200 (OK) response (**UE-2 to** intermediate IM CN
subsystem entities)
> SIP/2.0 200 OK
>
> Via:
>
> To: \;tag=xyzwv
>
> From: \; tag=171828
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.5
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 1300 RTP/AVP 98
>
> a=inactive
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
**SDP** : The connection information now indicates the IP address of UE-2.
**7-8. SIP INVITE request (SCC AS to UE-3)**
The SCC AS sends the SIP INVITE request towards the remote UE-3 containg the
SDP information of UE-1 and UE-2.
  1. **9-13.**
  2. **SIP 200 (OK) reponse to SIP INVITE request(UE-3 to UE-1)**
> UE-3 acknowledges the SIP INVITE request by sending SIP 200 (OK) response
> with the SDP answer to UE-1.S
  1. **SIP ACK request (UE-1 to UE-3)**
> UE-1 sends SIP ACK request to the remote UE.
  1. **SIP re-INVITE request (SCC AS to UE-2)**
> SCC AS-2 sends SIP re-INVITE request to UE-2 to update the media in UE-2.
**19-20. SIP 200 (OK) response to SIP re-INVITE request (UE-2 to SCC AS)**
The UE-2 confirms the SIP re-INVITE request by sending SIP 200 (OK) response
to SCC AS.
  1. **SIP ACK request (SCC AS to UE-2)**
> SCC AS sends SIP ACK request to the remote UE.
**23-24. Media path:**
The audio media is between controller UE-1 and remote UE-3, and the video
media is established between controllee UE-2 and the remote UE. The
collaborative session control is in the controller UE-1.
##### 4.4.4.1.4 Alternative 4 -- indicating collaborative session
establishment using multiple REFER
In the example flow at the figure 4.4.4.1.4-1, UE-1 wants to establish a
collaborative session without the pre-requisite of having an IMS session
established. The UE-1 wants to setup a collaborative session with audio media
flow in UE-1 and video media flow in UE-2, and wants to control the
collaborative session through UE-1.UE-1 sends a SIP REFER request containing a
recipient-list to cause the SCC AS to send SIP INVITE requests to the remote
UE, the controllee UE and controller UE.
Figure 4.4.4.1.4-1: Signalling flow for establishment of collaborative session
upon originating IMS session using multiple REFER
NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
signalling flow.
**1-2. SIP REFER request (UE-1 to SCC AS) - see example in table 4.4.4.1.4-1**
The UE-1 sends SIP REFER request to SCC AS to initate the setup of the
collaborative session.
Table 4.4.4.1.4-1: SIP REFER request (UE-1 to intermediate IM CN subsystem
entities)
> REFER sip:scc-as\@home1.net SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> To: sip:scc-as\@home1.net; tag= 24680
>
> From: sip:user1\@home1.net; tag=13579
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: sip:user1\@home1.net
>
> Refer-To: cid:cn35t8jf02\@home1.net
>
> Refer-Sub: false
>
> Require: recipient-list, norefersub
>
> Contact:
> \ >**;+g.3gpp.iut-controller,+g.3gpp-current-iut-controller=active
>
> Referred-By: sip:user1\@home1.net
>
> Accept: application/sdp, **message/sipfrag**
>
> Content-Length: ..
>
> Content-Type: application/resource-lists+xml
>
> Content-Disposition: recipient-list
>
> Content-ID: \
>
> \
>
> \
> xmlns:cp=\"urn:ietf:params:xml:ns:copycontrol\">
>
> \
>
> \ \"\\"
> cp:copyControl=\"to\"/>
>
> \ uri=\"\ body=m%3Daudio%209%20RTP%2FAVP%20%0Dm%video%200%20RTP%2FAVP%20>\"
> cp:copyControl=\"bcc\"/>
>
> \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?
> body=m%3Daudio%200%20RTP%2FAVP%20%0Dm%3Dvideo%209%20RTP%2FAVP%20>\"
> cp:copyControl=\"bcc\"/>
>
> \
>
> \
The SIP REFER request contains a recipient-list MIME body containng \ elements containing the SIP URIs of UE-3, UE-1 and UE-2. Each SIP URI
contains a \"body\" URI header field identifying the media types to be
assigned. The copyControl attribute set to \"to\" is used to indicate the
remote UE.
**3-4. SIP 202 (Accepted) response (from SCC AS to UE-1)**
The SCC-AS sends a SIP 202 (Accepted) response to controller UE-1 as response
to the SIP REFER request.
**5-6. SIP INVITE request (SCC AS to UE-3) - see example in table
4.4.4.1.4-5**
SCC AS sends a SIP INVITE request to UE-3.
Table 4.4.4.1.4-5: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE sip:user3\@example1.net; SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> Route: \
>
> To: sip:user3\@example1.net;
>
> From: sip:user1@example1.net;tag=acegi
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Max-Forwards:70
>
> P-Asserted-Identity: sip:user1\@example1.net
>
> Supported: 100rel; precondition, gruu,
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 0 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98
>
> c=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**SDP** : The first media stream (audio) will be terminated by UE-1.
The port number of the remote side, i.e. UE-3 for the video media is currently
not known to UE-1, therefore the port number for the video media stream is set
to the discard port number \"9\".
**7-8. SIP 183 (Session Progress) response to SIP INVITE request (UE-3 to SCC
AS)**
The remote UE-3 responds with SIP 183 (Session Progress) response containing
the SDP answer of remote UE.
**9-10. SIP INVITE request (SCC AS to UE-1) -- see example in table
4.4.4.1.4-9**
The SCC AS sends a SIP INVITE request to UE-1 to establish the media between
UE-1 and remote UE-3.
Table 4.4.4.1.4-9: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE sip:user1@example1.net;
> **gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz** SIP/2.0
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;
>
> From: sip:user3\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards: 70
>
> P-Asserted-Identity: sip:user1\@example1.net
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 4788 RTP/AVP 0 8 3
>
> m=video 0 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**11-12. SIP INVITE request (SCC AS to UE-2) -- see example in table
4.4.4.1.4-11**
The SCC AS sends a SIP INVITE request to UE-2 to establish the media between
UE-2 and remote UE-3.
Table 4.4.4.1.4-11: SIP INVITE request (**SCC AS to** intermediate IM CN
subsystem entities)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Require:
>
> Referred-By: sip:user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;
>
> From: sip:user3\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: sip:user1\@example1.net
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**13-14. SIP 183 (Session Progress) response to SIP INVITE request (UE-1 to
SCC AS)**
UE-1 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-1.
**15-16. SIP 183 (Session Progress) response to SIP INVITE request (UE-2 to
SCC AS)**
UE-2 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-2.
**17-18. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.4.4.1.4-17**
SCC AS sends SIP UPDATE request to UE-3 to update the media in UE-3.
Table 4.4.4.1.4-17: SIP UPDATE request (SCC AS to remote intermediate IM CN
subsystem entities)
> UPDATE sip:user3_public3\@home3.net SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**19-20. SIP 200 (OK) response to SIP UPDATE request(remote UE to SCC AS)**
The remote UE-3 responds with SIP 200 (OK) response.
**21-22. SIP 200 (OK) response to SIP INVITE request (UE-1 to SCC AS)**
UE-1 responds SIP 200 (OK) response to the SIP INVITE request.
**23-24. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
UE-2 responds SIP 200 (OK) response to the SIP INVITE request.
**25-26. SIP 200 (OK) response to the initial SIP INVITE request (remote UE to
SCC AS)**
When the remote UE answers the call, UE-3 sends the SIP 200 (OK) response to
SCC AS.
**27-28. SIP ACK request (SCC AS to UE-1)**
SCC AS sends the SIP ACK request to confirm the establishment of call to UE-1.
**29-30. SIP ACK request (SCC AS to UE-2)**
SCC AS sends the SIP ACK request to UE-2.
**31-32. SIP ACK request (SCC AS to UE-3)**
SCC AS sends SIP ACK request to the remote UE.
##### 5.4.1.4 Pros and cons of alternative 3 -- indicating collaborative
session establishment using multiple REFER
Advantages:
Disadvantages:
\- Additional overhead of use of REFER.
\- Session is established with Initiating UE before the remote UE answers.
\- Intermediate responses such as SIP 180 (Ringing) response are not indicated
to initiating UE.
#### 4.4.4.2 Call flows for establishment of collaborative session upon
terminating IMS session setup
##### 4.4.4.2.1 Alternative 1: Using SIP 183 (Session Progress) response
Figure 4.4.4.2.1-1: Call flows for establishment of collaborative session upon
terminating IMS session setup using SIP 183 (Session Progress) response
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-4. SIP INVITE request (UE-3 to UE-1) - see example in table 4.4.4.2.1-1**
The UE-3 sends SIP INVITE request to UE-1 to setup the session.
Table 4.4.4.2.1-1: SIP INVITE request (**UE-3 to Intermediate IM CN subsystem
entities**)
> INVITE sip:user1\@example1.net SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> a=creq:ccap-v0
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 28540 RTP/AVP 98
>
> a=creq:ccap-v0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**5-8. SIP 183 (session progress) response to SIP INVITE request (UE-1 to
UE-3)**
The UE-1 responds with SIP 183 (session progress) response to UE-3 including
its SDP answer.
Editor\'s Note: The SDP contents of this response need to be shown in order to
understand this flow.
**9-10. SIP UPDATE request (UE-1 to SCC AS)- - see example in table
4.4.4.2.1-9**
The UE-1 sends the SIP UPDATE request to initiate the video media setup in
UE-2.
Table 4.4.4.2.1-9: SIP UPDATE request (**UE-1 to Intermediate IM CN subsystem
entities**)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example.net;tag = 66666
>
> From: sip:user1\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98 99
>
> a=creq:ccap-v0
>
> a=ccap:1 URL SIPURI sip:user2\@example2.net
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: The second media stream (video) is destined to be terminated
by UE-2, of which the address is only known as a SIP address by UE-1. One
possible solution in this example is, UE-1 includes the SIP address of UE-2 in
the a=ccap line in the SDP media block for the video media stream, as
described in draft-ietf-mmusic-sdp-misc-cap [15] and draft-yang-dispatch-SIP-
connection-address-type [16].
**11\. SCC AS authorizes the request for the collaborative session setup
involving UE-2.**
**12-13. SIP INVITE request (SCC AS to UE-2)**
The SCC AS sends the SIP INVITE request to the UE-2 based on the SDP content
in the SIP UPDATE request sent by the UE-1.
**14-15. SIP 183 (session progress) response to the SIP INVITE request (UE-2
to SCC AS)**
UE-2 responds with SIP 183 (session progress) response to SCC AS.
**16-17. SIP UPDATE request (SCC AS to UE-3)**
The SCC AS then sends the SIP UPDATE request to UE-3 with the SDP answer of
UE-1 and UE-2.
**18-21. SIP 200 (OK) response to SIP UPDATE request (UE-3 to UE-1)**
Editor\'s Note: Do SIP UPDATE requests need to be sent to UE-1 and UE-2 to
activate the media.
**22-23. SIP 200 (OK) response to SIP INVITE request (UE-1 to SCC AS)**
When the UE-1 answers the call, it sends the SIP 200 (OK) response to the
initial SIP INVITE request.
**24-25. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
When the UE-2 answers the call, it sends the SIP 200 (OK) response to the
initial SIP INVITE request.
**26-27. SIP 200 (OK) response to SIP INVITE request (SCC AS to UE-3)**
The SCC AS forwards the SIP 200 (OK) response to the UE-3.
**28-29. SIP ACK request (UE-3 to SCC AS)**
**30-31. SIP ACK request (SCC AS to UE-2)**
**32-33. SIP ACK request (SCC AS to UE-1)**
##### 4.4.4.2.2 Alternative 2 -- indicating collaborative session
establishment by multipart/related Content-Type parameter
In the example flow of figure 4.4.4.2.2-1 UE-3 wants to setup a call with
UE-1. When receiving the invitation to the call UE-1 wants to establish a
collaborative session without having established an IMS session. UE-1 wants to
setup the collaborative session with audio media on UE-1 and with video media
on UE-2. The collaborative session is to be controlled by UE-1.
Figure 4.4.4.2.2-1: Signalling flow for establishment of collaborative session
upon terminating IMS session setup
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-4. SIP INVITE request (UE-3 to UE-1) - see example in table 4.4.4.2.2-1**
UE-3 sends a SIP INVITE request to UE-1 to setup the call.
Table 4.4.4.2.2-1: SIP INVITE request (**UE-3 to UE-1**)
> INVITE SIP: user1\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
>
> Contact:\;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 28540 RTP/AVP 98
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**5-8. SIP 183 (Session Progress) response to SIP INVITE request (UE-1 to
UE-3)**
UE-1 responds with a SIP 183 (Session Progress) response to UE-3 including its
SDP answer.
**9-10. SIP 200 (OK) response (UE-1 to SCC AS) -- see example in table
4.4.4.2.2-9**
UE-1 sends a SIP 200 (OK) response to the SCC AS to accept the call.
Table 4.4.4.2.2-9: SIP 200 (OK) response (**UE-1 to SCC AS**)
> 200 OK sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag=171828
>
> From: sip:user1\@example1.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
> ;+g.3gpp.iut-controller
>
> Accept: message/sipfrag
>
> Allow:
>
> Content-Type: multipart/related; boundary=boundary42;
> type=\"application/sdp\"; start-info=\"collaborative-session\"
>
> Content-Length: (...)
>
> \--boundary42
>
> Content-Type: application/sdp
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=
>
> t=0 0
>
> c=IN IP4 123.45.67.89
>
> m=audio 1300 RTP/AVP 96 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> \--boundary42
>
> Content-Type: message/sipfrag
>
> REFER sip: interUEtransfer\@example.net SIP/2.0
>
> Refer-To: \ user2\@example2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a762-00a0c91e6bf6?body=m%3Dvideo%209%20RTP%2FAVP%2098%2099
> b%3DAS%3A75%0D%0Aa%3Drtpmap%3A98%20H263%0D%0Aa%3Dfmtp%3A98%20profile-level-
> id%3D0%0D%0Aa%3Drtpmap%3A99%20MP4V-ES>
The SIP 200 (OK) response includes SDP and a SIPfrag of a SIP REFER request in
its body. The SDP describes the accepted audio media for UE-1. The SIP REFER
request refers the video media stream to UE-2.
The start-info parameter of the multipart/related Content-Type header field of
the SIP 200 (OK) response indicates to the SCC AS that a collaborative session
should be established with media as indicated in the SIP 200 (OK) response\'s
body.
**11\. SCC AS authorizes the request for session setup in UE-2.**
**12-13. SIP INVITE request (SCC AS to UE-2)**
The SCC AS sends a SIP INVITE request to UE-2 based on the SIP REFER request
included in the SIP 200 (OK) response received from UE-1.
**14-15. SIP 183 (Session Progress) response to the SIP INVITE request (UE-2
to SCC AS)**
UE-2 responds with a SIP 183 (Session Progress) response to the SCC AS.
**16-17. SIP UPDATE request (SCC AS to UE-3)**
The SCC AS sends a SIP UPDATE request to UE-3 with the SDP answers of UE-1 and
UE-2.
**18-19. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
Editor\'s Note: It is FFS how and when H.245 inband negotiation with the
remote UE, UE-3 takes place if UE-3 is a PSTN UE.
**20-21. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
When UE-2 answers the call, it sends a SIP 200 (OK) response to the SCC AS.
**22-23. SIP 200 (OK) response to SIP INVITE request (SCC AS to UE-3)**
The SCC AS sends a SIP 200 (OK) response to UE-3.
**24-25. SIP ACK request (UE-3 to SCC AS)**
**26-27. SIP ACK request (SCC AS to UE-2)**
**28-29. SIP ACK request (SCC AS to UE-1)**
##### 4.4.4.2.3 Alternative 3 -- indicating collaborative session
establishment by SIP REFER request before SIP 200 (OK) response
In the example flow of figure 4.4.4.2.3-1 UE-3 wants to setup a call with
UE-1. When receiving the invitation to the call UE-1 wants to establish a
collaborative session without having established an IMS session. UE-1 wants to
setup the collaborative session with audio media on UE-1 and with video media
on UE-2. The collaborative session is to be controlled by UE-1.
Figure 4.4.4.2.3-1: Signalling flow for establishment of collaborative session
upon terminating IMS session setup
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-4. SIP INVITE request (UE-3 to UE-1) - see example in table 4.4.4.2.3-1**
UE-3 sends a SIP INVITE request to UE-1 to setup the call.
Table 4.4.4.2.3-1: SIP INVITE request (**UE-3 to UE-1**)
> INVITE SIP: user1\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
>
> Contact:\;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 28540 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**5-6. SIP 183 (Session Progress) response to SIP INVITE request (UE-1 to SCC
AS)**
UE-1 responds with a reliably SIP 183 (Session Progress) response to UE-3
including its SDP answer.
**7-8. SIP PRACK request (SCC AS to UE-1)**
The SCC AS acknowledges the reception of the SIP 183 response by sending a SIP
PRACK request to UE-1.
**9-10. SIP 200 (OK) response (UE-1 to SCC AS)**
UE-1 responds with a SIP 200 (OK) response to the SIP PRACK request.
**11-12. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-3)**
The SCC AS forwards the SIP 183 (Session Progress) response to UE-3.
**13-14. SIP REFER request (UE-1 to SCC AS) -- see example in table
4.4.4.2.3-9**
UE-1 sends a SIP REFER request to the SCC AS to transfer the video media to
controllee UE, UE-2.
Table 4.4.4.2.3-13: SIP REFER request (**UE-1 to SCC AS**)
> REFER sip: interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip: interUEtransfer\@example.net
>
> From: \; tag=33333
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: sip:user1\@example1.net
>
> Refer-To: \ user2\@example2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a762-00a0c91e6bf6?body=m%3Dvideo%209%20RTP%2FAVP%2098%2099
> b%3DAS%3A75%0D%0Aa%3Drtpmap%3A98%20H263%0D%0Aa%3Dfmtp%3A98%20profile-level-
> id%3D0%0D%0Aa%3Drtpmap%3A99%20MP4V-ES>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj490237;remote-tag=171828;local-tag=33333
>
> Referred-By: sip:user1\@example1.net
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz>;+g.3gpp.iut-controller
>
> Allow:
>
> Accept: message/sipfrag
>
> Content-Length:0
**15\. SCC AS authorizes the request for session setup in UE-2.**
**16-17. SIP 202 (Accepted) response (SCC AS to UE-1)**
The SCC-AS sends a SIP 202 (Accepted) response to the controller UE-1 as
response to the SIP REFER request.
**18-19. SIP 200 (OK) response (UE-1 to SCC AS) -- see example in table
4.4.4.2.3-18**
UE-1 sends a SIP 200 (OK) response to the SCC AS to accept the call.
Table 4.4.4.2.3-18: SIP 200 (OK) response (**UE-1 to SCC AS**)
> 200 OK sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag=171828
>
> From: sip:user1\@example1.net; tag=33333
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=
>
> t=0 0
>
> c=IN IP4 123.45.67.89
>
> m=audio 1300 RTP/AVP 96 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**20-21. SIP INVITE request (SCC AS to UE-2)**
The SCC AS sends a SIP INVITE request to UE-2 based on the SIP REFER request
received from UE-1.
**22-23. SIP 183 (Session Progress) response to the SIP INVITE request (UE-2
to SCC AS)**
UE-2 responds with a SIP 183 (Session Progress) response to the SCC AS.
**24-25. SIP UPDATE request (SCC AS to UE-3)**
The SCC AS sends a SIP UPDATE request to UE-3 with the SDP answers of UE-1 and
UE-2.
**26-27. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
**28-29. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
When UE-2 answers the call, it sends a SIP 200 (OK) response to the SCC AS.
**30-31. SIP 200 (OK) response to SIP INVITE request (SCC AS to UE-3)**
The SCC AS sends a SIP 200 (OK) response to UE-3.
**32-33. SIP ACK request (UE-3 to SCC AS)**
**34-35. SIP ACK request (SCC AS to UE-2)**
**36-37. SIP ACK request (SCC AS to UE-1)**
**38-39**. **SIP NOTIFY request (SCC AS to UE-1)**
The SCC AS informs UE-1 that the action triggered by the SIP REFER request was
successfully completed.
**40-41. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to SCC AS)**
The UE-1 confirms the SIP NOTIFY request by sending a SIP 200 (OK) response to
the SIP NOTIFY request.
##### 4.4.4.2.4 Alternative 4: Using SIP 300 (Multiple Choices) response
Figure 4.4.4.2.4-1: Call flows for establishment of collaborative session upon
terminating IMS session setup using SIP 300 (Multiple Choices) response
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-2. SIP INVITE request (UE-3 to SCC AS) - see example in table
4.4.4.2.4-1**
The UE-3 sends SIP INVITE request to UE-1 to setup the session.
Table 4.4.4.2.4-1: SIP INVITE request (**UE-3 to Intermediate IM CN subsystem
entities**)
> INVITE sip:user1\@example1.net SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 28540 RTP/AVP 98
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**3-4. SIP INVITE request (SCC AS to UE-1) - see example in table
4.4.4.2.4-3**
The SCC AS adds an Accept-Contact header field containing the media feature
tag g.3gpp.iut-controller along with the explicit parameter to indicate a
preference to reach a controller capable UE and also includes the MIME type
**application/vnd.3gpp.iut+xml** to indicate that it supports the MIME type
and then sends the SIP INVITE request to UE-1 to setup the session.
Table 4.4.4.2.4-3: SIP INVITE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> INVITE sip:user1\@example1.net SIP/2.0
>
> Via:
>
> Max-Forwards:
>
> Route:
>
> P-Asserted-Identity: \
>
> Privacy: none
>
> From:
>
> To:
>
> Cseq:
>
> Supported:
>
> Require:
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Accept-Contact: *;+g.3gpp.iut-controller;explicit
>
> Contact:
>
> Allow:
>
> Accept: application/sdp; application/3gpp-ims+xml;
> **application/vnd.3gpp.iut+xml**
>
> Content-Type:
>
> Content-Length: (...)
>
> v=
>
> o=
>
> s=
>
> t=
>
> c=
>
> m=
>
> b=
>
> a=
>
> a=
>
> a=
>
> a=
>
> a=
>
> a=
>
> a=
>
> a=
>
> m=
>
> b=
>
> a=
>
> a=
>
> a=
**5-6. SIP 300 (Multiple Choices) response to SIP INVITE request (UE-1 to SCC
AS) see example in table 4.4.4.2.4-5**
The UE-1 responds with SIP 300 (Multiple choices) response to SCC AS including
in the body the media characteristics (Audio and Video) associated with the
contact addresses of UE-1 and UE-2 respectively.
Table 4.4.4.2.4-5: SIP 300 (Multiple Choices) response (UE-1 to SCC-AS)
> SIP/2.0 300 Multiple Choices
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity: sip:user1\@example.net
>
> Contact:
> \ >**,**
>
> **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 >**
>
> Allow:
>
> **Content-Type=application/vnd.3gpp.iut+xml**
>
> Content-Length: (...)
>
> **\ **
>
> **\
>  =**m** %3Daudio%2049170%20RTP%2FAVP%97%0D**> />**
>
> **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body** =**m**
> %3Dvideo%2028540%20RTP%2FAVP%98%0D**> />**
>
> **\ **
**7-8. SIP ACK request (SCC AS to UE-1)**
**9\. SCC AS authorizes the request for the collaborative session setup
involving UE-2.**
**10-11. SIP 183 (session progress) response to SIP INVITE request (SCC AS to
UE-3)**
The SCC AS responds with SIP 183 (session progress) response to UE-3 including
an SDP answer based on the media types contained in the SIP 300 (Multiple
choices) response and containing the discard port number \"9\" for those media
lines.
**12-13. SIP INVITE request (SCC AS to UE-1)- - see example in table
4.4.4.2.4-12**
The SCC AS sends the SIP INVITE request to initiate the audio media setup in
UE-1.
Table 4.4.4.2.4-12: SIP INVITE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> INVITE
> sip:user1\@example.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
> SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route:
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98
**14-15. SIP INVITE request (SCC AS to UE-2)- - see example in table
4.4.4.2.4-14**
The SCC AS sends the SIP INVITE request to initiate the video media setup in
UE-2.
Table 4.4.4.2.4-14: SIP INVITE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> INVITE **sip:** user**1\@example.net;gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route:
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 0 RTP/AVP 97
>
> m=video 28540 RTP/AVP 98
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**20-21. SIP UPDATE request (SCC AS to UE-3)- - see example in table
4.4.4.2.4-20**
The SCC AS then sends the SIP UPDATE request to UE-3 with the SDP answer of
UE-1 and UE-2 received in the SIP 183 (session progress) responses.
Table 4.4.4.2.4-20: SIP UPDATE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example.net;tag = 66666
>
> From: sip:user1\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1500 RTP/AVP 98
>
> c=IN IP4 123.45.67.42
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**22-23. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
UE-3 sends the SIP 200 (OK) response to the SIP UPDATE request.
**24-25. SIP UPDATE request (SCC AS to UE-1)**
The SCC AS sends the SIP INVITE request to the UE-1 based on the SDP content
in the SIP 200 (OK) response to the SIP UPDATE request received from UE-3.
**26-27. SIP UPDATE request (SCC AS to UE-2)**
The SCC AS sends the SIP INVITE request to the UE-2 based on the SDP content
in the SIP 200 (OK) response to the SIP UPDATE request received from UE-3.
**28-29. SIP 200 (OK) response to SIP UPDATE request (UE-1 to SCC AS)**
**30-31. SIP 200 (OK) response to SIP UPDATE request (UE-2 to SCC AS)**
**32-33. SIP 200 (OK) response to SIP INVITE request (UE-1 to SCC AS)**
When the UE-1 answers the call, it sends the SIP 200 (OK) response to the
initial SIP INVITE request.
**34-35. SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
When the UE-2 answers the call, it sends the SIP 200 (OK) response to the
initial SIP INVITE request.
**36-37. SIP 200 (OK) response to SIP INVITE request (SCC AS to UE-3)**
The SCC AS sends the SIP 200 (OK) response to the UE-3.
**38-39. SIP ACK request (UE-3 to SCC AS)**
**40-41. SIP ACK request (SCC AS to UE-1)**
**42-43. SIP ACK request (SCC AS to UE-2)**
#### 4.4.4.3 Call flows for establishment of collaborative session upon
originating IMS session setup with forked responses
##### 4.4.4.3.1 Alternative 1 -- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP
In the information flow at the figure 4.4.4.3.1-1, UE-1 wants to establish a
collaborative session without the pre-requisite of having an IMS session
established. The UE-1 wants to setup a collaborative session with audio media
flow in UE-1 and video media flow in UE-2, and wants to control the
collaborative session through UE-1.
The SIP INVITE request is forked to the remote party. This flow assumes that
the second Remote UE accepts the call.
Figure 4.4.4.3.1-1: Signalling flow for establishment of collaborative session
upon originating IMS session with forked response
NOTE: For clarity, the SIP 100 (Trying), SIP PRACK requests to 183 (Session
Progress) responses and SIP 200 (OK) responses to SIP PRACK requests are not
shown in the signalling flow.
**1-2. SIP INVITE request (UE-1 to SCC AS) - see example in table
4.4.4.3.1-1**
The UE-1 sends SIP INVITE request to SCC AS to setup the collaborative
session.
Table 4.4.4.3.1-1: SIP INVITE request (UE-1 to SCC AS)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
> Contact:\ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> a=creq:ccap-v0
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> a=creq:ccap-v0
>
> a=ccap:1 URL SIPURI sip:user2\@example2.net
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**SDP** : The first media stream (audio) will be terminated by UE-1 of which
the IP address is indicated in the c-line in the SDP header. The second media
stream (video) will be terminated by UE-2.
Editor\'s Note: The SDP indicates that the second media stream (video) is
destined to be terminated by UE-2, of which the address is only known as a SIP
address by UE-1. One possible solution in this example is, UE-1 includes the
SIP address of UE-2 in the a=ccap line in the SDP media block for the video
media stream, as described in draft-ietf-mmusic-sdp-misc-cap [15] and draft-
yang-dispatch-SIP-connection-address-type [16].
The port number of the UE-2 for the video media is currently not known to
UE-1, therefore the port number for the video media stream is set to the
discard port number \"9\".
**3\. SIP INVITE request (SCC AS to Intermediate IM CN subsystem entities) -
see example in table 4.4.4.3.1-3**
SCC AS sends a SIP INVITE request to **intermediate IM CN subsystem
entities**.
Table 4.4.4.3.1-3: SIP INVITE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> INVITE sip:user3\@example1.net; SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net;
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> a=creq:ccap-v0
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> C=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether sending the SIP-URI c-line to remote UE or just using
0.0.0.0 address is FFS.
**4a. SIP INVITE request (Intermediate IM CN subsystem entities to UE-3)**
**Intermediate IM CN subsystem entities, i.e. S-CSCF serving for remote UE,
determine that the SIP INVITE request should be forked, and send the SIP
INVITE request to UE-3.**
**4b. SIP INVITE request (Intermediate IM CN subsystem entities to UE-4)**
**Intermediate IM CN subsystem entities, i.e. S-CSCF serving for remote UE,
determine that the SIP INVITE request should be forked, and send the SIP
INVITE request to UE-4.**
**5a-6a. SIP 183 (Session Progress) response to SIP INVITE request (UE-3 to
SCC AS)**
The remote UE-3 responds with SIP 183 (Session Progress) response containing
the SDP answer of remote UE.
Table 4.4.4.3.1-5a: SIP 183 (Session Progress) response (UE-3 to Intermediate
IM CN subsystem entities)
> SIP/2.0 183 Session Progress
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net;tag = 66666
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> \;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.1.3.9
>
> s=
>
> t=
>
> c=IN IP4 192.1.3.9
>
> a=creq:ccap-v0
>
> m=audio 3370 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 4390 RTP/AVP 98
>
> C=IN IP4 192.1.3.9
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**7a-8a. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
The SCC AS responds UE-1 with SIP 183 (Session Progress) response containing
the SDP answer of UE-3.
**9a-10a. SIP INVITE request (SCC AS to UE-2) -- see example in table
4.4.4.3.1-9a**
The SCC AS sends a SIP INVITE request to UE-2 according to the indication in
step 1 to establish the connection between SCC AS and UE-2.
Table 4.4.4.3.1-9a: SIP INVITE request (**SCC AS to UE-2**)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route:
>
> To: sip:user2\@example1.net;
>
> From: sip:interUEtransfer\@example.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3\@example1.net
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
**11a-12a. SIP 183 (Session Progress) response to SIP INVITE request (UE-2 to
SCC AS)**
UE-2 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-2.
**13a-14a. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.4.4.3.1-13a**
SCC AS sends SIP UPDATE request to UE-3 to update the SDP in UE-3.
Table 4.4.4.3.1-13a: SIP UPDATE request (SCC AS to remote UE-3)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**15a-16a. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
The remote UE-3 responds with SIP 200 (OK) response.
**5b-6b. SIP 183 (Session Progress) response to SIP INVITE request (UE-4 to
SCC AS)**
> The remote UE-4 responds with SIP 183 (Session Progress) response containing
> the SDP answer of remote UE.
Table 4.4.4.3.1-5b: SIP 183 (Session Progress) response (UE-4 to Intermediate
IM CN subsystem entities)
> SIP/2.0 183 Session Progress
>
> Via:
>
> Record-Route:
>
> To: sip:user3\@example1.net;tag=77777
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e87f7>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.1.4.8
>
> s=
>
> t=
>
> c=IN IP4 192.1.4.8
>
> a=creq:ccap-v0
>
> m=audio 3570 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 3580 RTP/AVP 98
>
> C=IN IP4 192.1.4.8
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**7b-8b. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
> The SCC AS responds UE-1 with SIP 183 (Session Progress) response containing
> the SDP answer of UE-4.
**9b. The SCC AS saves the SIP 183 when determining that the session is
forked**
> The SCC AS determines that the call is forked according to step 6a and 6b
> and saves the SIP 183 message of step 6b.
**17a-18a. SIP UPDATE request (SCC AS to UE-4)- see example in table
4.4.4.3.1-17a**
SCC AS sends SIP UPDATE request to UE-4 to update the SDP.
Table 4.4.4.3.1-17a: SIP UPDATE request (SCC AS to remote UE-4)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;
>
> From: sip:interUEtransfer\@example.net; tag=55555
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**19a-20a. SIP 200 (OK) response to SIP UPDATE request (UE-4 to SCC AS)**
The remote UE-4 responds with SIP 200 (OK) response.
**21-22. SIP 200 (OK) response to the initial SIP INVITE request (UE-4 to SCC
AS)**
When the remote UE answers the call, UE-4 sends the SIP 200 (OK) response back
to UE-1 via the SCC AS.
**23-24. SIP 200 (OK) response to the initial SIP INVITE request (SCC AS to
UE-1)**
The SCC AS sends the SIP 200 (OK) response to UE-1.
**25-26. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends the SIP ACK request to confirm the establishment of call to SCC AS.
**27-28. SIP UPDATE request (SCC AS to UE-2)**
SCC AS sends a SIP UPDATE request with the saved information in SIP 183
(Session Progress) response **in step 9b** to control the renegotiation of the
video media when determining that the UE-4 has answered the call.
**29-30. SIP 200 (OK) response to SIP UPDATE request (UE-2 to SCC AS)**
The UE-2 responds with SIP 200 (OK) response.
**31-32. SIP UPDATE request (SCC AS to UE-4) - see example in table
4.4.4.3.1-31**
SCC AS sends SIP UPDATE request to UE-4 to update the media in UE-4.
Table 4.4.4.3.1-31: SIP UPDATE request (SCC AS to UE-4)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag = 77777
>
> From: sip:interUEtransfer\@example.net; tag=55555
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**33-34. SIP 200 (OK) response to SIP UPDATE request (UE-4 to SCC AS)**
UE-4 responds with SIP 200 (OK) response.
**35-36 SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
UE-2 responds SIP 200 (OK) response to the SIP INVITE request.
**37-38. SIP ACK request (SCC AS to UE-2)**
SCC AS sends the SIP ACK request to UE-2.
**39-40. SIP ACK request (SCC AS to UE-4)**
SCC AS sends the SIP ACK request to UE-4.
**41-43. SIP CANCEL request ( Intermediate IM CN subsystem entities to UE-3)**
The intermediate IM CN subsystem entities sends the SIP CANCEL request to
UE-3.
**44-46. SIP 200 (OK) response to SIP CANCEL request (UE-3 to Intermediate IM
CN subsystem entities)**
UE-3 responds SIP 200 (OK) response to the SIP CANCEL request.
##### 4.4.4.3.2 Alternative 2 -- indicating collaborative session
establishment by multipart/related Content-Type parameter
In the example flow of figure 4.4.4.3.2-1 UE-1 wants to establish a
collaborative session without having established an IMS session. UE-1 wants to
setup the collaborative session with audio media on UE-1 and with video media
on UE-2. The collaborative session is to be controlled by UE-1.
The SIP INVITE request is forked to the remote party. This flow assumes that
the second remote UE accepts the call.
Figure 4.4.4.3.2-1: Signalling flow for establishment of collaborative session
upon originating IMS session with forked response
NOTE 1: For clarity, the SIP 100 (Trying) responses, SIP PRACK requests to 183
(Session Progress) responses and SIP 200 (OK) responses to SIP PRACK requests
are not shown in the signalling flow.
**1-2. SIP INVITE request (UE-1 to SCC AS) - see example in table
4.4.4.3.2-1**
UE-1 sends a SIP INVITE request to the SCC AS to setup the collaborative
session.
Table 4.4.4.3.2-1: SIP INVITE request (UE-1 to SCC AS)
> INVITE SIP: user3\@example1.net; SIP/2.0
>
> Via: SIP/2.0/UDP 192.0.2.5;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: sip:pcscf1.home1.net:7531;lr;comp=sigcomp>,
> \
>
> P-Preferred-Identity: \
>
> P-Access-Network-Info:
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490237
>
> Cseq: 127 INVITE
>
> Supported: 100rel; precondition, gruu, 199
>
> Require: sec-agree, replaces
>
> Proxy-Require: sec-agree
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.mmtel\"
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi=87654321;
> port1=7531
>
>
> Contact:\;+g.3gpp.iut-
> controller
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE
>
> Accept: application/sdp; application/3gpp-ims+xml;message/sipfrag
>
> Content-Type: multipart/related; boundary=boundary42;
> type=\"application/sdp\"; start-info=\"collaborative-session\"
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> \--boundary42
>
> Content-Type: message/sipfrag
>
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Refer-To:
> \ b%3DAS%3A75%0D%0Aa%3Drtpmap%3A98%20H263%0D%0Aa%3Dfmtp%3A98%20profile-level-
> id%3D0%0D%0Aa%3Drtpmap%3A99%20MP4V-ES>
>
> The SIP INVITE request includes SDP and a SIPfrag of a SIP REFER request in
> its body. The SDP describes the audio media for UE-1. The SIP REFER request
> refers to UE-2 for establishing the video media stream on UE-2.
>
> The start-info parameter of the multipart/related Content-Type header field
> of the SIP INVITE request indicates to the SCC AS that a collaborative
> session should be established with media as indicated in the SIP INVITE
> request\'s body.
NOTE 2: The SIP REFER request included in the SIP INVITE request is being
created by UE-1 and not duplicated from another SIP REFER request.
The port number of the controllee UE, UE-2 for the video media is not known to
UE-1. Therefore the port number for the video media stream is set to the
discard port number \"9\".
**3\. SIP INVITE request (SCC AS to Intermediate IM CN subsystem entities) -
see example in table 4.4.4.3.2-3**
The SCC AS sends a SIP INVITE request to the **intermediate IM CN subsystem
entities**.
Table 4.4.4.3.2-3: SIP INVITE request (**SCC AS to Intermediate IM CN
subsystem entities**)
> INVITE sip:user3\@example1.net; SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net;
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.0.2.5
>
> s=
>
> t=0 0
>
> c=IN IP4 192.0.2.5
>
> m=audio 49170 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 9 RTP/AVP 98
>
> C=IN IP4 0.0.0.0
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> The forwarded SIP INVITE request includes the SDP from the received SIP
> INVITE and the SDP from the SIP REFER request included in the received SIP
> INVITE body.
**4a. SIP INVITE request (Intermediate IM CN subsystem entities to UE-3)**
**The intermediate IM CN subsystem entities, i.e. the S-CSCF serving the
remote UE, determine that the SIP INVITE request should be forked and send the
SIP INVITE request to UE-3.**
**4b. SIP INVITE request (Intermediate IM CN subsystem entities to UE-4)**
**The intermediate IM CN subsystem entities, i.e. the S-CSCF serving the
remote UE, determine that the SIP INVITE request should be forked and send the
SIP INVITE request to UE-4.**
**5a-6a. SIP 183 (Session Progress) response to SIP INVITE request (UE-3 to
SCC AS) -- see example in table 4.4.4.3.2-5a**
The remote UE-3 responds with a SIP 183 (Session Progress) response containing
its SDP answer.
Table 4.4.4.3.2-5a: SIP 183 (Session Progress) response (UE-3 to Intermediate
IM CN subsystem entities)
> SIP/2.0 183 Session Progress
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user3\@example1.net;tag = 66666
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> \;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.1.3.9
>
> s=
>
> t=
>
> c=IN IP4 192.1.3.9
>
> m=audio 3370 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 4390 RTP/AVP 98
>
> C=IN IP4 192.1.3.9
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**7a-8a. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
The SCC AS responds to UE-1 with a SIP 183 (Session Progress) response
containing the SDP answer of UE-3.
**9a-10a. SIP INVITE request (SCC AS to UE-2) -- see example in table
4.4.4.3.2-9a**
The SCC AS sends the SIP INVITE request indicated in the SIP REFER request
received from UE-1 to UE-2 for establishing the video media between the SCC AS
and UE-2.
Table 4.4.4.3.2-9a: SIP INVITE request (**SCC AS to UE-2**)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route:
>
> To: sip:user2\@example1.net;
>
> From: sip:interUEtransfer\@example.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3\@example1.net
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
> sip:user3\@example1.net;gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
**11a-12a. SIP 183 (Session Progress) response to SIP INVITE request (UE-2 to
SCC AS)**
UE-2 sends a SIP 183 (Session Progress) response towards the SCC AS containing
the SDP answer of UE-2.
**13a-14a. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.4.4.3.2-13a**
The SCC AS sends a SIP UPDATE request to UE-3 to update the media on UE-3.
Table 4.4.4.3.2-13a: SIP UPDATE request (SCC AS to remote UE-3)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**15a-16a. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
The remote UE, UE-3 responds with a SIP 200 (OK) response.
**5b-6b. SIP 183 (Session Progress) response to SIP INVITE request (UE-4 to
SCC AS) -- see example in table 4.4.4.3.2-5b**
> The remote UE-4 responds with a SIP 183 (Session Progress) response
> containing its SDP answer.
Table 4.4.4.3.2-5b: SIP 183 (Session Progress) response (UE-4 to Intermediate
IM CN subsystem entities)
> SIP/2.0 183 Session Progress
>
> Via:
>
> Record-Route:
>
> To: sip:user3\@example1.net;tag=77777
>
> From: sip:user1\@example1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e87f7>;
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP4 192.1.4.8
>
> s=
>
> t=
>
> c=IN IP4 192.1.4.8
>
> m=audio 3570 RTP/AVP 0 8 3
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 3580 RTP/AVP 98
>
> C=IN IP4 192.1.4.8
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**7b-8b. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
> The SCC AS responds to UE-1 with a SIP 183 (Session Progress) response
> containing the SDP answer of UE-4.
**9b. The SCC AS saves the SIP 183 (Session Progress) response when
determining that the session is forked**
> The SCC AS determines that the call is forked according to step 6a and 6b
> and saves the SIP 183 (Session Progress) response of step 6b.
**17a-18a. SIP UPDATE request (SCC AS to UE-4) - see example in table
4.4.4.3.2-17a**
The SCC AS sends a SIP UPDATE request to UE-4 to update the media on UE-4.
Table 4.4.4.3.2-17a: SIP UPDATE request (SCC AS to remote UE-4)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;
>
> From: sip:interUEtransfer\@example.net; tag=55555
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**19a-20a. SIP 200 (OK) response to SIP UPDATE request (UE-4 to SCC AS)**
The remote UE, UE-4 responds with a SIP 200 (OK) response.
**21-22. SIP 200 (OK) response to the initial SIP INVITE request (UE-4 to SCC
AS)**
When the remote UE, UE-4 answers the call, it sends a SIP 200 (OK) response
back to UE-1 via the SCC AS.
**23-24. SIP 200 (OK) response to the initial SIP INVITE request (SCC AS to
UE-1)**
The SCC AS forwards the SIP 200 (OK) response to UE-1.
**25-26. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends a SIP ACK request to the SCC AS to confirm call establishment.
**27-28. SIP UPDATE request (SCC AS to UE-2)**
The SCC AS sends a SIP UPDATE request with the saved information of the SIP
183 (Session Progress) response **of step 9b** to re-negotiate the video media
when determining that UE-4 has answered the call.
**29-30. SIP 200 (OK) response to SIP UPDATE request (UE-2 to SCC AS)**
UE-2 responds with a SIP 200 (OK) response.
**31-32. SIP UPDATE request (SCC AS to UE-4) - see example in table
4.4.4.3.2-31**
The SCC AS sends a SIP UPDATE request to UE-4 to update the media on UE-4.
Table 4.4.4.3.2-31: SIP UPDATE request (SCC AS to UE-4)
> UPDATE sip:user3\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user3\@example1.net;tag = 77777
>
> From: sip:interUEtransfer\@example.net; tag=55555
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1\@example1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**33-34. SIP 200 (OK) response to SIP UPDATE request (UE-4 to SCC AS)**
UE-4 responds with a SIP 200 (OK) response.
**35-36 SIP 200 (OK) response to SIP INVITE request (UE-2 to SCC AS)**
UE-2 responds to the SIP INVITE request received from the SCC AS with a SIP
200 (OK) response.
**37-38. SIP ACK request (SCC AS to UE-2)**
The SCC AS sends a SIP ACK request back to UE-2.
**39-40. SIP ACK request (SCC AS to UE-4)**
The SCC AS sends a SIP ACK request to UE-4.
**41-43. SIP CANCEL request (Intermediate IM CN subsystem entities to UE-3)**
The intermediate IM CN subsystem entities send a SIP CANCEL request to UE-3.
**44-46. SIP 200 (OK) response to SIP CANCEL request (UE-3 to Intermediate IM
CN subsystem entities)**
UE-3 responds with a SIP 200 (OK) response to the SIP CANCEL request.
## 4.5 Assignment and transfer of control of a collaborative session
Editor\'s Note: This subclause corresponds to subclause 6.1.3.4 of 3GPP TR
23.831 [3]
### 4.5.1 General
The mechanism for transferring control of a collaborative session involves
five aspects that can be considered separately:
> i) the Controller UE indicating whether or not it wishes to remain the [a]
> controller of the collaborative session,
>
> ii) the Controller UE identifying to the SCC AS that another UE is requested
> to become the [a] controller of the collaborative session.
>
> iii) the SCC AS indicating to another controller capable UE that it is
> requested to become the [a] controller of the collaborative session.
>
> iv) the target controller UE indicating to the SCC AS that it has accepted
> to become the [a] controller of the collaborative session.
>
> v) the (former) Controller UE being informed that another UE has become the
> [a] controller of the collaborative session.
While in release 10 there is no requirement for multiple controller UEs
controlling a collaborative session, such a requirement has been included in
TR 23.831 [3] for potential implementation in a future release. In addition
based on other future potential requirements in TR 23.831 [3] a target
Controller UE could itself request transfer of session control or the SCC AS
could transfer collaborative session control from one Controller UE to a
target Controller UE on behalf of the UEs involved in the collaborative
session. Therefore the procedures for transfer of collaborative session
control should take into account the future possibility that assigning another
UE as a Controller UE of the Collaborative Session might not always be the
same as relinquishing control of the Collaborative Session. For this reason
also \"[a]\" has been used in the above bullets.
It also should be considered that transfer of control of a collaborative
session could be a standalone operation or be combined with other
collaborative session control procedures such as Transfer of Media, Addition
of a Media or Removal of a media. Therefore steps i) (relinquishing control)
and ii) (assigning a new controller) above should be considered as potentially
separate procedures.
### 4.5.2 Procedures
#### 4.5.2.1 Indicating whether controller UE wishes to be the controller of
the collaborative session
#### 4.5.2.1.0 General
The following procedures from TS 24.237 make use of this procedure to indicate
whether the UE wishes to be the controller of the collaborative session:
\- 16.2.1 SC UE procedures for collaborative session establishment by
transferring media used in an existing session/ 16.2.1.1 Controller UE
procedures
\- 16.2.2 SC UE procedures for collaborative session establishment with new
media/ 16.2.2.1 Controller UE procedures
\- 17.2.1 Procedures for controller UE initiated media transfer from
controller UE to controllee UE/ 17.2.1.1 Controller UE procedures
\- 17.2.2 Procedures for controller UE initiated media transfer from
controllee UE to another controllee UE /17.2.2.1 Controller UE procedures
\- 19.2.1 Procedures for adding new media on controllee UE by controller UE
The following procedures from TS 24. 837 make use of this procedure to
indicate whether the UE wishes to be the controller of the collaborative
session:
  * 4.7.2.2 Session replication by the SCC AS -- push mode/ 4.7.2.2.1.1.1 Controller UE
##### 4.5.2.1.1 Alternative 1 -- Indicating whether controller UE wishes to be
the controller of the collaborative session using the iut-controller media
feature tag
If the controller UE wishes to not be the controller of the collaborative
session then it does not include the g.3gpp.iut-controller media feature tag
in the Contact header field of the SIP REFER request.
NOTE: In release 9 the g.3gpp.iut-controller media feature tag was only used
to identify that the UE had the IUT controller capability. With the above
proposal this means that when including the g.3gpp.iut-controller media
feature tag in the Contact header field of session related requests the
presence of the media feature tag indicates that the UE wishes to be the
controller UE for the collaborative session.
##### 4.5.2.1.2 Alternative 2 -- Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using an XML body
###### 4.5.2.1.2.1 General
###### 4.5.2.1.2.2 Alternative 2A - Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using SIP INFO request
To indicate that the controller UE wishes to remain the controller UE it sends
a SIP INFO request to the SCC AS including in the SIP INFO request's body a
list of SIP URIs including the SIP URI of the controller UE.
###### 4.5.2.1.2.3 Alternative 2B - Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using an XML body in the
transfer request
To indicate that the controller UE wishes to remain the controller UE includes
the XML MIME body application/**vnd.3gpp.iut+xml in the transfer request (i.e
SIP REFER request) containing** a \ element containing an
\ element containing its own SIP URI. To indicate that the
controller UE does not wish to remain the controller UE includes the XML MIME
body application/**vnd.3gpp.iut+xml in the transfer request (i.e SIP REFER
request) containing** a \ element containing a \
element containing its own SIP URI.
##### 4.5.2.1.3 Alternative 3 -- Indicating whether controller UE wishes to be
the controller of the collaborative session using a new media feature tag
If the controller UE wishes to not be the controller of the collaborative
session then the controller UE includes a new media feature tag \"g.3gpp
current-iut-controller\" in the Contact header field of the SIP REFER request
with the value of \"passive\" to \" indicate that the UE is not the active
controller for the collaborative session. If the controller UE wishes to be
the controller of the collaborative session then the controller UE includes a
new media feature tag \"g.3gpp current-iut-controller\" in the Contact header
field of the SIP REFER request with the value of \"active\" to indicate that
the UE is currently the active controller for the collaborative session. For
backward compatibility with release 9 the absence of the media feature tag
\"g.3gpp current-iut-controller\" in the Contact header field of the SIP REFER
request means the UE wishes to be the controller of the collaborative session
#### 4.5.2.2 Identifying that another UE is requested to become a controller
of the collaborative session
##### 4.5.2.2.1 Alternative 1 -- Identifying a new controller UE using SIP
REFER with method= REFER
The controller UE role is requested for another UE other than the requesting
UE by sending a SIP REFER request with the \"method\" URI parameter in the
Refer-To header field set to \"REFER\" to the SCC AS.
Editor\'s Note: The use of a SIP REFER request with the \"method\" URI
parameter set to \"REFER\" for controller UE transfer is motivated by the
Rel-9 controller UE assignment mechanism. In Rel-9 the controller UE role is
requested by SIP REFER requests for media transfer.
If no media transfer is wanted then the referred SIP REFER requests is to be
specified as to transfer media according to already existing media
connections, meaning that no media transfer will occur.
The Refer-To header field of the referred SIP REFER request points to the SCC
AS. This means that the referred SIP REFER request is to be sent from the SCC
AS to the SCC AS. This follows the Rel-9 procedure for media transfer where a
SIP REFER request for media transfer is always sent to the SCC AS.
NOTE: In an actual implementation the SCC AS might not actually send the SIP
REFER request to the SCC AS but just behave as if it had sent and received the
SIP REFER request.
##### 4.5.2.2.2 Alternative 2 - Identifying a new controller UE using an XML
Body
##### 4.5.2.2.2.1 General
The Controller includes an XML body in the request to transfer collaborative
session control. The XML body contains a \ element that
contains a \ element that contains the identity of the
intended target Controller UE which is requested to become a controller of the
collaborative session along with a \ element that contains the
identity of the Controller UE that is requesting the assignment. The
\ and \ elements may contain either the GRUU or
the public user identity of the UE.
NOTE: The GRUUs can be obtained during registration procedures and can be
included in existing SIP header fields to identify the source and target of
the request for collaborative session control transfer.
##### 4.5.2.2.2.2 Alternative 2A - Identifying a new controller UE using SIP
INFO
For requesting assignment of a new Controller UE the requesting UE sends a SIP
INFO request associated with the \"collaborativeSessionControl\" Info Package
to the SCC AS.
Editor's note: Once the Info Package is defined, a reference needs to be added
to the text above.
Editor's note: The negotiation of the Info Package needs to be specified.
Editor\'s note: The \"collaborativeSessionControl\" Info Package needs to be
defined.
The SIP INFO request includes an application/**vnd.3gpp.iut+xml** MIME body
containing a \ element that contains the \
element from subclause 4.5.2.2.2.1 that identifies the Controller UE that is
requested to become a controller of the collaborative session.
###### 4.5.2.2.2.3 Alternative 2B - Identifying a new controller UE using an
Event Package
For requesting transfer the requesting UE sends a SIP PUBLISH method as
defined in RFC 3903 [11] to the SCC AS.
The SIP PUBLISH method includes in the body an IUT-Controller Event Package
containing the \ element that contains the
\ element from subclause 4.5.2.2.2.1 that identifies the
Controller UE that is requested to become a controller of the collaborative
session.
NOTE: The IUT controller Event Package would need to be defined in an IETF
internet draft.
###### 4.5.2.2.2.4 Alternative 2C - Identifying a new controller UE using XML
embedded in Refer-To URI
For requesting transfer the requesting UE sends embedded in the Refer-To URI
using the hname \"body\" the XML body containing the \
element that contains the \ element from subclause
4.5.2.2.2.1 that identifies the Controller UE that is requested to become a
controller of the collaborative session. The Refer-To header field may also
contain a method parameter for the request to be sent to the target controller
UE (e.g. SIP INFO method).
##### 4.5.2.2.3 Alternative 3 - Identifying a new controller UE using a SIP
header field
A new header field is defined \"IUT-Controller-Assignment\" which indicates:
\- type of transfer of control request (i.e. \"transfer control\" in the case
the existing Controller UE initiates the transfer of collaborative session
control towards another Controller capable UE);
\- identity (i.e. GRUU or public user identity) of originator of transfer of
control request;
\- identity (i.e. GRUU or public user identity) of the controller UE.
This header field is included in the request (e.g. SIP REFER request) that
requests the transfer of the control of the collaborative session.
##### 4.5.2.2.4 Alternative 4 - Identifying a new controller UE using Accept-
Contact in the Refer-To URI
For requesting transfer the requesting UE sends in the Refer-TO URI the GRUU
or public user identity of the Controller UE that is requested to become a
controller of the collaborative session and embedded in the Refer-To URI an
Accept-Contact header field containing the g.3gpp.iut-controller media feature
tag along with \"require\" and \"explicit\" parameters. The SCC AS send the
request (identified by the method parameter if present or a SIP INVITE request
if no method parameter) to the UE identified by the Refer-To URI.
#### 4.5.2.3 Indicating to another UE that it is requested to become a
controller of the collaborative Session
##### 4.5.2.3.1 General
##### 4.5.2.3.2 Alternative 1 -- Requesting a UE to become a controller UE
using an XML Body
###### 4.5.2.3.2.1 General
The SCC AS includes an XML body in the request to transfer collaborative
session control. The XML body contains a \ element that
itself contains a \ and a \ element as in
subclause 4.5.2.2.2.1. The SCC AS includes these XML elements in the request
sent to the target Controller UE.
###### 4.5.2.3.2.2 Alternative 1A - Assigning a new controller UE using SIP
INFO request
For requesting assignment of a new Controller UE the SCC AS sends a SIP INFO
method to the SCC AS.
The SIP INFO method includes in the body an Info Package containing the
\ element that contains a \ and a
\ element as defined in subclause 4.5.2.2.3.1.
To clearly indicate the purpose of the SIP INFO request, the Info Package
mechanism is being utilized according to draft-ietf-sipcore-info-events [14].
The purpose is indicated by the Info-Package header field value
\"collaborativeSessionControl\".
###### 4.5.2.3.2.3 Alternative 1B - Assigning a new controller UE using an
Event Package
For requesting assignment of a new Controller UE the SCC AS sends a SIP
PUBLISH method as defined in RFC 3903 [11] to the UE.
The SIP PUBLISH method includes in the body an IUT-Controller Event Package
containing the \ element that contains a \
and a \ element as defined in subclause 4.5.2.2.3.1..
NOTE: The IUT controller Event Package would need to be defined in an IETF
internet draft.
###### 4.5.2.3.2.4 Alternative 1C - Assigning a new controller UE using XML
Body as a MIME type in the request
For requesting assignment of a new Controller UE the SCC AS includes in the
body of the request sent to the UE (e.g. SIP INVITE request) an XML body
containing the \ element that contains a \
and a \ element as defined in subclause 4.5.2.2.3.1. When this
request also contains SDP multipart MIME is needed to additionally include
this XML body in the request. The Content-Disposition is set to
\"application/vnd.3gpp.iut+xml\" with the handling parameter set to
\"optional\". When this alternative is aligned with Alternative 2C in
subclause 4.5.2.2.2.4 the XML body is obtained from the hname \"body\" in the
Refer-To URI.
##### 4.5.2.3.3 Alternative 2 -- Requesting a UE to become a controller UE
using a SIP header field
This is the same header field as the header field defined in subclause
4.5.2.2.3 except that this header field is included in the request (e.g. SIP
INVITE request) that requests the UE to become a controller of the
collaborative session.
##### 4.5.2.3.4 Alternative 3 -- Requesting a UE to become a controller UE
using a media feature tag in an Accept-Contact header field
The SCC includes an Accept-Contact header field in the request (e.g. SIP
INVITE request) that requests the UE to become a controller of the
collaborative session. The receiving UE uses the presence of the Accept-
Contact header field containing the g.3gpp.iut-controller media feature tag to
determine that it is being requested to become a Controller UE for the
collaborative session. When this alternative is aligned with Alternative 4 in
subclause 4.5.2.2.3 the Accept-Contact header is obtained from the Refer-To
URI
#### 4.5.2.4 Indicating acceptance of becoming a controller of the
collaborative session
##### 4.5.2.4.1 Alternative 1 -- Indicating acceptance of becoming a
controller using an XML Body
###### 4.5.2.4.1.1 General
Since a request to transfer control of a collaborative session may be combined
with a request to Transfer Media, Add a Media or Remove a media the target UE
may accept the media operation but be unwilling to accept the transfer of
control. In addition the target UE may not support transfer of control so a
positive (i.e. 200 (OK) response) to the request to assign control might not
definitively indicate acceptance of control. Therefore for at least some
alternatives a specific means needs to be defined to enable the target UE to
indicate whether it has accepted to become a Controller UE for the
collaborative session.
The target Controller UE includes an XML body in a message sent after
receiving the request to transfer collaborative session control. The XML body
contains a \ element that itself contains a
\ element that contains the identity of the UE which was
requested to become a controller of the collaborative session if the target UE
accepts to become a controller UE otherwise it includes the identity of the
current Controller UE. The \ XML element may contain either
the GRUU or the public user identity of the Controller UE.
###### 4.5.2.4.1.2 Alternative 1A -- Indicating acceptance of becoming a
controller using an XML Body in SIP 200 (OK) response
When responding to a request to become a controller UE the UE indicates that
it accepts to become the controller UE by sending a SIP 200 (OK) response to
the SCC AS including in the SIP 200 (OK) response\'s body an
application/**vnd.3gpp.iut+xml** MIME body according to the IUT transfer
feature XML schema defined in annex D.2 containing the \ XML
element with the URI of the controllee UE in the \ element.
NOTE: The SIP URI of the controllee UE needs to be a GRUU if the controllee UE
and any other UEs share the same public user identity.
###### 4.5.2.4.1.3 Alternative 1B -- Indicating acceptance of becoming a
controller using an XML Body in SIP INFO request
To indicate that the controllee UE accepts to become the controller UE it
sends a SIP INFO request to the SCC AS including in the SIP INFO request's
body a list of SIP URIs including the SIP URI of the controllee UE.
##### 4.5.2.4.2 Alternative 2 -- Indicating acceptance of becoming a
controller using a SIP header field
This is the same header field as the header field defined in subclause
4.5.2.2.3 except that this header field is included in the response to the
request that the UE become a controller of the collaborative session.
##### 4.5.2.4.3 Alternative 3 -- Indicating acceptance of becoming a
controller using a new feature tag
The UE includes a new media feature tag \"g.3gpp current-iut-controller\" in
the Contact header of the response to the request to transfer control to
indicate that the UE is a controller for the collaborative session. The new
feature tag has have values of \"active\" and \"passive\" where \"active\"
indicates that a UE is currently an active controller for the collaborative
session and \"passive\" indicates that the UE is not an active controller for
the collaborative session but is willing to become an active controller for
the collaborative session
NOTE: The existing g.3gpp iut-controller media feature tag cannot be used for
this as it is possible in release 9 for non active controller UEs to include
this media feature tag in a response.
#### 4.5.2.5 Informing that another UE has become a controller of the
collaborative session
##### 4.5.2.5.1 Alternative 1 -- Informing that another UE has become a
controller UE using an XML Body
###### 4.5.2.5.1.1 General
The SCC AS includes an XML body in the request to transfer collaborative
session control. The XML body contains a \ element that
itself contains a \ element that contains the identity of
the UE which was requested to become a controller of the collaborative session
if the target UE accepts to become a controller UE otherwise it includes the
identity of the current Controller UE. The \ XML element may
contain either the GRUU or the public user identity of the Controller UE.
###### 4.5.2.5.1.2 Alternative 1A - Informing that another UE has become a
controller UE using SIP INFO
For informing that another Controller UE has become a controller of the
collaborative session the SCC AS sends a SIP INFO method to the UE that
requested the assignment of the new controller UE..
The SIP INFO method includes in the body an Info Package containing the
\ element that itself contains an \ element
from subclause 4.5.2.4.2.1 that identifies the Controller UE that is the
controller of the collaborative session.
To clearly indicate the purpose of the SIP INFO request, the Info Package
mechanism is being utilized according to draft-ietf-sipcore-info-events [14].
The purpose is indicated by the Info-Package header field value
\"collaborativeSessionControl\".
###### 4.5.2.5.1.3 Alternative 1B - Informing that another UE has become a
controller UE using a new Event Package
For informing that another Controller UE the UE that sent the request to
transfer control subscribes to the IUT-Controller Event Package. The SCC AS
sends a SIP NOTIFY request to the UE that requested the assignment of the new
controller UE..
The SIP NOTIFY request includes in the body the IUT-Controller Event Package
containing \ element that itself contains an
\ XML element from subclause 4.5.2.4.2.1 that identifies the
Controller UE that is the controller of the collaborative session.
NOTE: The IUT controller Event Package would need to be defined in an IETF
internet draft.
##### 4.5.2.5.2 Alternative 2 -- Informing that another UE has become a
controller UE using a SIP header field
This is the same header field as the header field defined in subclause
4.5.2.2.3 except that this header field is included in the SIP NOTIFY request
(e.g. SIP NOTIFY for the refer package or dialog events package) that is sent
to the imitator of the transfer of control of the collaborative session.
##### 4.5.2.5.3 Alternative 3 -- Informing that another UE has become a
controller UE using a SIPfrag in an events package
###### 4.5.2.5.3.1 Alternative 3A - Informing that another UE has become a
controller UE using a SIPfrag of the XML body in the response
This alternative is aligned with Alternative 1 in subclause 4.5.2.4.1. In this
case the XML body in the response is included in a SIPfrag in the SIP NOTIFY
of the refer events package.
###### 4.5.2.5.3.2 Alternative 3B - Informing that another UE has become a
controller UE using a SIPfrag of the new header field
This alternative is aligned with Alternative 2 in subclause 4.5.2.4.2. In this
case the new SIP header field in the response is included in a SIPfrag in the
SIP NOTIFY of the refer events package.
###### 4.5.2.5.3.3 Alternative 3C - Informing that another UE has become a
controller UE using a SIPfrag of a feature tag in the Contact header field
This alternative is aligned with Alternative 3 in subclause 4.5.2.4.3. In this
case the new feature tag in the Contact header field in the response is
included in a SIPfrag in the SIP NOTIFY of the refer events package.
### 4.5.3 Identified issues and advantages for each alternative
Editor\'s Note: This subclause will discuss issues and advantages for each
alternative
### 4.5.4 Call flows
#### 4.5.4.1 Indicating whether Controller UE wishes to remain a controller of
the collaborative Session
##### 4.5.4.1.1 Alternative 1 -- Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using the iut-controller
media feature tag
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
Figure 4.5.4.1.1-1: Signalling flow for collaborative session controller
transfer by SIP REFER
**1-2. SIP REFER request (controller UE to intermediate IM CN subsystem
entities) -- see example in table 4.5.4.1.1-1**
It is assumed that UE-1 and UE-2 have the controller UE functionality. The
controller UE wants to transfer control of the collaborative session control
to UE-2.
UE-1sends a SIP REFER request to the SCC AS containing in the Refer-To header
a SIP URI containing:
i) The GRUU of UE 2
ii) A "body" URI header field containing SDP media lines for the media types
for the collaborative session with those media types on other UEs having their
port numbers set to zero and others that terminate on UE2 to their actual port
numbers (or the reserved port number '9" if a media is being added to UE-2).
iii) An Accept-Contact header field containing the g.3gpp.iut-controller media
feature tag along with the parameters require and explicit to indicate that
UE-2 is requested to become a controller for the collaborative session
> UE-1 does not include the g.3gpp.iut-controller media feature tag in the
> Contact header field of the SIP REFER request as it is indicating to the
> SCC-AS that it is transferring control of the collaborative session to UE-2.
Table 4.5.4.1.1-1: SIP REFER request (UE-1 to SCC AS)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip:interUEtransfer\@example.net
>
> From: sip:user1_public1\@home1.net;tag =13579
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \"John Doe\" \
>
> Refer-To:
> \ **Accept-Contact=\"*;** +g.3gpp.iut-controller**;require;explicit\" &body**=
> **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099**>**
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj13579;to-tag=abcdef;from-tag=123456
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> \ >**
>
> Accept: **message/sipfrag**
**3-4. SIP 202 (Accepted) response**
> The SCC-AS sends a SIP 202 (Accepted) response to the controller UE-1 as
> response to the SIP REFER request
**5-6. SIP NOTIFY request (SCC AS to UE-1 through intermediate IM CN subsystem
entities)-**
The SCC-AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription
to the SIP REFER request results..
**7-8. SIP 200 (OK) response (UE-1 to SCC-AS through intermediate IM CN
subsystem entities)**
The controller UE, UE-1, acknowledges the SIP NOTIFY request by sending a SIP
200 (OK) response to the SCC AS.
**9\. SIP re-INVITE request (SCC AS to intermediate IM CN subsystem entities)
- see example in table 4.5.4.1.1-9**
The SCC AS sends a SIP re-INVITE request towards UE-2 including the Accept-
Contact header field containing the g.3gpp.iut-controller media feature tag
and the parameters require and explicit from the URI in the Refer-To header
field from the SIP REFER request.
Table 4.5.4.1.1-9: SIP re-INVITE request (SCC-AS to IM CN subsystem entities)
> INVITE sip:user2_public1\@home1.net;**gr** =**urn:uuid:f
> 81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Route:
>
> To: sip:user2_public1\@home1.net;abcdef
>
> From: sip:user3_public3\@home3.net;tag=123456
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> Accept-Contact:*;+g.3gpp.iut-controller**;require;explicit**
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Accept: **application/vnd.3gpp.iut+xml**
>
> **Content-Type=application/sdp**
>
> Content-Length: {...}
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=IN IP4 123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**10\. SIP re-INVITE request (intermediate IM CN subsystem entities to UE-2)**
**11-12. SIP 200 (OK) response (UE-2 to SCC AS through intermediate IM CN
subsystem entities)**
UE-2 accepts the transfer of control and indicates this by including a
g.3gpp.current-iut-controller media feature tag set to Active in the SIP 200
(OK) response it sends to the SCC AS.
Table 4.5-4.1.1-11: SIP 200 (OK) response (UE-2 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net;tag=xyzwv
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: sip:user1_public2\@home1.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;** +g.3gpp current-iut-
> controller=Active
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 145.23.77.88
>
> s=-
>
> c=145.23.77.88
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**13-14. SIP ACK request (from SCC-AS to UE-2)**
**15-16. SIP NOTIFY request (SCC-AS to UE-1)-see example table 4.5.4.1.1-15**
The SCC AS sends a SIP NOTIFY request to the controller UE, UE-1 to inform
about the success status of the control transfer. The body of the SIP NOTIFY
request contains a SIPfrag including the Contact header field containing the
g.3gpp.current-iut-controller media feature tag set to Active from the
received SIP 200 (OK) response from UE-2
Table 4.5-4.1.1-15: SIP NOTIFY request (SCC AS to UE-1)
> NOTIFY
> sip:**user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
> SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;tag = 13579
>
> From: sip:interUEtransfer\@example.net;tag=2255
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State:terminated; reason=noresource
>
> Content-Type: message/sipfrag ;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 200 OK
>
> **Content-Type=application/sdp**
>
> Contact: sip:user1_public2\@home1.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;** +g.3gpp current-iut-
> controller=Active
>
> v=0
>
> s=-
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**17-18. SIP 200 (OK) response (UE-1 to SCC AS)**
The controller UE,UE-1 acknowledges the SIP NOTIFY request by sending a SIP
200 (OK) response to the SCC AS.
##### 4.5.4.1.2 Alternative 2 -- Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using an XML body
###### 4.5.4.1.2.1 General
###### 4.5.4.1.2.2 Alternative 2A - Indicating whether Controller UE wishes to
remain a controller of the collaborative Session using SIP INFO request
The flow for this alternative is shown in subclause 4.5.4.2.2.2.
In steps 2-3. a SIP INFO request is sent from the controller UE, UE-1 to the
SCC AS. Instead of sending the SIP INFO request as shown in table 4.5.4.2.2-2,
a SIP INFO request as shown in table 4.5.4.2.2-2, but listing the SIP URI of
UE-1 instead of the SIP URI of UE-2 is being sent. The listed SIP URI of UE-1
indicates that the controller UE wishes to remain the controller UE.
#### 4.5.4.2 Identifying that another UE is requested to become a controller
of the collaborative session
##### 4.5.4.2.1 Alternative 1 - controller UE transfer by SIP REFER with
method=REFER
The following flow depicts the procedure for control transfer from UE-1 to
UE-2 using SIP REFER:
Figure 4.5.4.2.1-1: Signalling flow for collaborative session controller
transfer by SIP REFER
**1\. Collaborative session controlled by UE-1**
A collaborative session is established between UE-1 and UE-2 and the remote UE
with UE-1 acting as the controller UE and UE-2 acting as a controllee UE. Each
UE has a media flow with the remote UE.
**2-3. SIP REFER request (UE-1 to SCC AS) - see example in table 4.5.4.1-2**
Table 4.5.4.2.1-2: SIP REFER request (UE-1 to SCC-AS)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip:interUEtransfer\@example.net
>
> From: sip:user1_public1\@home1.net; tag=13579
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity:
>
> Refer-To: **\  URI=%3C** interUEtransfer\@example.net%3E%3B**To=%3C**
> interUEtransfer%40example.net%3E%3B**From=%3Csip:**
> user1_public2**%40home1.net%3Bgr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6%3E%3B** Refer-
> To=%3C**sip:** user1_public2**\@home1.net%3Bgr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6%3BContent-
> Type=multipart%2Fmixed%3Bboundary%3Dboundary42?body** =**%0D--
> boundary42%0DContent-
> Type%3Aapplication%2Fsdp%0Dm%3Daudio%200%20RTP%2FAVP%2097%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099%0D%0D
> --boundary42%0DContent-
> Type%3Aapplication%2Fvnd.3gpp.iut+xml%0D%3CcontrolTransfer%3E%3CtargetController%3D%3Csip%3A**
> user1_public2\@home1.net%3Bgr%3Durn**%3A** uuid**%3A**
> f81d4fae-7dec-11d0-a765-00a0c91e6bf6**%3E%2F%3E%3C
> %2FControlTansfer%3E%3E%3B** Target-
> dialog=cb03a0s09a2sdfglkj321576%3Bremote-tag=abcdef%3Blocal-tag=123456**>**
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj321576;remote-tag=abcdef;local-tag=123456
>
> Contact:
> \ >**;+g.3gpp.iut-controller
>
> Accept: **application/sdp, message/sipfrag**
>
> Content-Length: 0
The SIP REFER request is targeted at the SCC AS. Through the request the SCC
AS is requested to issue a SIP REFER request as if it would have been sent
from UE-2 (From header field of nested REFER request in Refer-To header field
is set to UE-2's SIP URI) to the SCC AS (Request-URI of nested REFER request
is set to SCC AS SIP URI).
**4-5. SIP 202 (ACCEPTED) response to the SIP REFER request (SCC AS to UE-1)**
**6\. SIP REFER request (SCC AS to SCC AS)**
The SCC AS sends the SIP REFER request specified in the Refer-To header of the
SIP REFER request received from UE-1 to the SCC AS.
**7\. SIP 202 (Accepted) response (SCC AS to SCC AS)**
**8-9. SIP NOTIFY request (SCC AS to UE-1)**
The SCC AS generates a SIP NOTIFY request and sends it to UE-1 to inform about
the result of the SIP REFER request.
**10-11. SIP 200 (OK) response to the SIP NOTIFY request (UE-1 to SCC AS)**
**12**. **SIP NOTIFY request (SCC AS to SCC AS)**
The SCC AS informs the SCC AS that the action triggered by the SIP REFER
request was successfully completed.
**13\. SIP 200 (OK) response to SIP NOTIFY request (SCC AS to SCC AS)**
The SCC AS confirms the SIP NOTIFY request by sending a SIP 200 (OK) response
to the SIP NOTIFY request.
NOTE: In an actual implementation the SCC AS might not actually send the
messages of steps 6, 7, 12 and 13 to itself but just behave as if it had sent
and received the messages.
**14\. SIP re-INVITE request (SCC AS to UE-2) - see example in table
4.5.4.2.1-14**
The SCC AS sends a SIP re-INVITE request towards the controllee UE (UE-2). The
re-INVITE request contains an XML body indicating to UE-2 that UE-2 is
requested to assume the controller role by including the \
XML element with the GRUU of UE-2 in the \ element.
Table 4.5.4.2.1-14: SIP re-INVITE request (SCC-AS to UE-2)
> INVITE sip:user1_public2@**home1.net;gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Route:
>
> To: sip:user1_public2\@home1.net;123456
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> Required:
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact: sip:sccas1.home1.example.net; tag = 12486
>
> Allow:
>
> Accept: **application/vnd.3gpp.iut+xml**
>
> Content-Length: ...
>
> Content-Type: multipart/mixed; boundary=boundary42
>
> \--boundary42
>
> Content-Type: application/sdp
>
> **m** =audio 0 RTP/AVP 97
>
> **m** =video 3002 RTP/AVP 98 99
>
> \--boundary42
>
> **Content-Type: application/vnd.3gpp.iut+xml**
>
> **\ **
>
> **\
> **/
> >**
>
> **\ **
**15\. SIP UPDATE request (SCC AS to UE-3)**
The SCC AS sends a SIP UPDATE request to UE-3 with the SDP answers of UE-1 and
UE-2.
**16\. SIP 200 (OK) response to SIP UPDATE request (UE-3 to SCC AS)**
**17\. SIP 200 (OK) response (UE-2 to SCC AS) - see example in table
4.5.4.2.1-17**
UE-2 accepts the transfer of control and indicates this by including an XML
body element in the SIP 200 (OK) response it sends to the SCC AS containing
the \ XML element with the GRUU of UE-2 in the
\ element.
Table 4.5.4.2.1-17: SIP 200 (OK) response (UE-2 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net;abcdef
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: sip:user1_public2@**home1.net;gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6**
>
> Allow:
>
> Content-Length: ...
>
> Content-Type: multipart/mixed; boundary=boundary42
>
> \--boundary42
>
> Content-Type: application/sdp
>
> **m** =audio 0 RTP/AVP 97
>
> **m** =video 3002 RTP/AVP 98 99
>
> \--boundary42
>
> **Content-Type: application/vnd.3gpp.iut+xml**
>
> **\ **
>
> **\  user1_public2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6>**/
> >**
>
> **\ **
**18\. SIP ACK request (SCC-AS to UE-2)**
##### 4.5.4.2.2 Alternative 2 - Identifying a new controller UE using an XML
Body
###### 4.5.4.2.2.1 General
###### 4.5.4.2.2.2 Alternative 2A - Identifying a new controller UE transfer
by using SIP INFO
The following flow depicts the procedure for control transfer from UE-1 to
UE-2 using SIP INFO:
Figure 4.5.4.2.2.2-1: Signalling flow for collaborative session controller
transfer by SIP INFO
**1\. Collaborative session controlled by UE-1**
A collaborative session is established between UE-1 and UE-2 and the remote UE
with UE-1 acting as the controller UE and UE-2 acting as a Controllee UE. Each
UE has a media flow with the remote UE.
**2-3. SIP INFO request (UE-1 to SCC AS) - see example in table 4.5.4.2.2-2**
Table 4.5.4.2.2.2-2: SIP INFO request (UE-1 to SCC-AS)
> INFO sip:interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip:interUEtransfer\@example.net
>
> From: sip:user1_public1\@home1.net; tag=13579
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 INFO
>
> Max-Forwards: 70
>
> P-Preferred-Identity:
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj321576;remote-tag=abcdef;local-tag=123456
>
> Contact:
> \ >**;+g.3gpp.iut-controller
>
> Accept: **application/sdp, message/sipfrag**
>
> **Info-Package: collaborativeSessionControl**
>
> **Content-Type: application/vnd.3gpp.iut+xml**
>
> **Content-Disposition: Info-Package**
>
> Content-Length: ...
>
> \
>
> \
>
>
> \/>
>
> \
>
> In the SIP INFO request an XML body according to the IUT transfer feature
> XML schema defined in annex A.4 is being included containing a
> \ element that contains a \ element
> identifying UE-2 to become a controller of the collaborative session. UE-1
> is not being listed in the SIP INFO request's body indicating that UE-1 is
> not requested to remain controller UE.
To indicate the (controller transfer) purpose of the SIP INFO request, the
Info Package mechanism is being utilized. The controller transfer purpose is
indicated by the Info-Package header field value
\"collaborativeSessionControl\".
Editor's note: The negotiation of the Info Package needs to be specified.
**4-5. SIP 200 (OK) response to the SIP INFO request (SCC AS to UE-1)**
**6\. SIP INFO request (SCC AS to UE-2)**
Upon receiving the SIP REFER request the SCC AS asks UE-2 to assume the
controller role by sending a SIP INFO request to UE-2.
> To indicate the (controller transfer) purpose of the SIP INFO request, the
> Info Package mechanism is being utilized. The controller transfer purpose is
> indicated by the Info-Package header field value
> \"collaborativeSessionControl\".
Editor's note: The Info Package name to be used and its detailed specification
is FFS.
**7\. SIP 200 (OK) response to SIP INFO request (UE-2 to SCC AS)**
**8\. SIP INFO request (UE-2 to SCC AS)**
UE-2 confirms the collaborative session control transfer request by sending a
SIP 200 (OK) response to the SIP INFO request to the SCC AS.
> To indicate the (controller transfer) purpose of the SIP INFO request, the
> Info Package mechanism is being utilized. The controller transfer purpose is
> indicated by the Info-Package header field value
> \"collaborativeSessionControl\".
**9\. SIP 200 (OK) response to SIP INFO request (SCC AS to UE-2)**
**10\. SIP INFO request (SCC AS to UE-2)**
Upon receiving the confirmation from UE-2 the SCC AS informs UE-2 about the
new controller assignment by sending a SIP INFO request to UE-2.
> To indicate the purpose of the SIP INFO request, the Info Package mechanism
> is being utilized. The controller transfer purpose is indicated by the Info-
> Package header field value \"collaborativeSessionControl\".
**11\. SIP 200 (OK) response to SIP INFO request (UE-2 to SCC AS)**
**12-13. SIP INFO request (SCC AS to UE-1)**
The SCC AS sends another SIP INFO request back to UE-1 that requested the
controller transfer in order to inform UE-1 about the operation's outcome. The
SIP INFO also uses the \"collaborativeSessionControl\" Info Package and lists
the new controller UE in its message body.
**14-15. SIP 200 (OK) response to the SIP INFO request (UE-1 to SCC AS)**
**16\. Collaborative session controlled by UE-2**
###### 4.5.4.2.2.3 Alternative 2B - Identifying a new controller UE using an
Event Package
###### 4.5.4.2.2.4 Alternative 2C - Identifying a new controller UE using XML
embedded in Refer-To URI
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
Figure 4.5.4.2.2.4-1:Controller UE remove media at the controllee UE
**1-2. SIP REFER request (controller UE to intermediate IM CN subsystem
entities) -- see example in table 4.5.4.2.2.4-1**
It is assumed that UE-1 and UE-2 have the controller UE functionality. The
controller UE wants to transfer control of the collaborative session control
to UE-2.
UE-1sends a SIP REFER request to the SCC AS containing in the Refer-To header
a SIP URI containing:
> i) The GRUU of UE 2
>
> ii) A "body" URI header field containing the \ XML element
> including the \ element set to the GRUU of UE-2.
>
> iii) A Content-Type header field containing the application/vnd.3gpp.iut+xml
> MIME type for the XML body along with the handling parameter set to
> optional..
>
> UE-1 does not include the g.3gpp.iut-controller media feature tag in the
> Contact header field of the SIP REFER request as it is indicating to the
> SCC-AS that it is transferring control of the collaborative session to UE-2.
Table 4.5.4.2.2.4-1: SIP REFER request (UE-1 to SCC AS)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip:interUEtransfer\@example.net
>
> From: sip:user1_public1\@home1.net;tag =13579
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \"John Doe\" \
>
> Refer-To:
> \ **Content-Type=\"application/vnd.3gpp.iut+xml\";handling=optional &
> body**=**\  \ user2_public2\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a762-00a0c91e6bf6>**/
> > \**>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj13579;to-tag=abcdef;from-tag=123456
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> \ >**
>
> Accept: **message/sipfrag,application/vnd.3gpp.iut+xml**
>
> Content-Length: 0
**3-4. SIP 202 (Accepted) response**
> The SCC-AS sends a SIP 202 (Accepted) response to the controller UE-1 as
> response to the SIP REFER request.
**5-6. SIP NOTIFY request (SCC AS to UE-1 through intermediate IM CN subsystem
entities)-**
The SCC-AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription
to the SIP REFER request results..
**7-8. SIP 200 (OK) response (UE-1 to SCC-AS through intermediate IM CN
subsystem entities)**
The controller UE, UE-1, acknowledges the SIP NOTIFY request by sending a SIP
200 (OK) response to the SCC AS.
**9\. SIP re-INVITE request (SCC AS to intermediate IM CN subsystem entities)
- see example in table 4.5.4.2.2.4-9**
The SCC AS sends a SIP re-INVITE request towards the Controllee UE (UE-2). The
re-INVITE request contains the XML body from the URI in the Refer-To header
field from the SIP REFER request.
Table 4.5.4.2.2.4-9: SIP re-INVITE request (SCC-AS to IM CN subsystem
entities)
> INVITE sip:user2_public1\@home1.net;**gr** =**urn:uuid:f
> 81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Route:
>
> To: sip:user2_public1\@home1.net;abcdef
>
> From: sip:user3_public3\@home3.net;tag=123456
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Accept: **application/vnd.3gpp.iut+xml**
>
> Content-Length: {...}
>
> **Content-Type=application/vnd.3gpp.iut+xml;handling=optional**
>
> **\ **
>
> **\
> **/
> >**
>
> **\ **
**10\. SIP re-INVITE request (intermediate IM CN subsystem entities to UE-2)**
**11-12. SIP 200 (OK) response (UE-2 to SCC AS through intermediate IM CN
subsystem entities)**
UE-2 accepts the transfer of control and indicates this by including an XML
body element in the SIP 200 (OK) response it sends to the SCC AS containing
the \ XML element with the GRUU of UE-2 in the
\.
Table 4.5.4.2.2.4-11: SIP 200 (OK) response (UE-2 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net;tag=xyzwv
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: sip:user1_public2\@home1.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> **Content-Type=application/vnd.3gpp.iut+xml**
>
> **controlTransfer >**
>
> **\
> **/
> >**
>
> **\  NOTIFY
> sip:**user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
> SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;tag = 13579
>
> From: sip:interUEtransfer\@example.net;tag=2255
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State:terminated; reason=noresource
>
> Content-Type: message/sipfrag ;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 200 OK
>
> **Content-Type=application/vnd.3gpp.iut+xml**
>
> **controlTransfer >**
>
> **\
> **/
> >**
>
> **\ **
**17-18. SIP 200 (OK) response (UE-1 to SCC AS)**
The controller UE,UE-1 acknowledges the SIP NOTIFY request by sending a SIP
200 (OK) response to the SCC AS.
##### 4.5.4.2.3 Alternative 3 - Identifying a new controller UE using a SIP
header field
##### 4.5.4.2.4 Alternative 4 - Identifying a new controller UE using Accept-
Contact in the Refer-To URI
The flow for this alternative is shown in subclause 4.5.4.1.1.
#### 4.5.4.3 Indicating to another UE that it is requested to become a
controller of the collaborative Session
##### 4.5.4.3.1 General
##### 4.5.4.3.2 Alternative 1 -- Requesting a UE to become a controller UE
using an XML Body
###### 4.5.4.3.2.1 General
###### 4.5.4.3.2.2 Alternative 1A - Assigning a new controller UE using SIP
INFO request
The flow for this alternative is shown in subclause 4.5.4.2.2.2.
###### 4.5.4.3.2.3 Alternative 1B - Assigning a new controller UE using an
Event Package
###### 4.5.4.3.2.4 Alternative 1C - Assigning a new controller UE using XML
Body as a MIME type in the request
The flow for this alternative is shown in subclauses 4.5.4.2.1 and
4.5.4.2.2.4.
##### 4.5.4.3.3 Alternative 2 -- Requesting a UE to become a controller UE
using a SIP header field
##### 4.5.4.3.4 Alternative 3 -- Requesting a UE to become a controller UE
using a media feature tag in an Accept-Contact header field
The flow for this alternative is shown in subclause 4.5.4.1.1
#### 4.5.4.4 Indicating acceptance of becoming a controller of the
collaborative session
##### 4.5.4.4.1 Alternative 1 -- Indicating acceptance of becoming a
controller using an XML Body
###### 4.5.4.4.1.1 General
###### 4.5.4.4.1.2 Alternative 1A -- Indicating acceptance of becoming a
controller using an XML Body in SIP 200 (OK) response
The flow for this alternative is shown in subclauses 4.5.4.2.1 and
4.5.4.2.2.4.
###### 4.5.4.4.1.3 Alternative 1B -- Indicating acceptance of becoming a
controller using an XML Body in SIP INFO request
The flow for this alternative is shown in subclause 4.5.4.2.2.2.
##### 4.5.4.4.2 Alternative 2 -- Indicating acceptance of becoming a
controller using a SIP header field
##### 4.5.4.4.3 Alternative 3 -- Indicating acceptance of becoming a
controller using a new feature tag
The flow for this alternative is shown in subclause 4.5.4.1.1
#### 4.5.4.5 Informing that another UE has become a controller of the
collaborative session
##### 4.5.4.5.1 Alternative 1 -- Informing that another UE has become a
controller UE using an XML Body
###### 4.5.4.5.1.1 General
###### 4.5.4.5.1.2 Alternative 1A - Informing that another UE has become a
controller UE using SIP INFO
The flow for this alternative is shown in subclause 4.5.4.2.2.2.
###### 4.5.4.5.1.3 Alternative 1B - Informing that another UE has become a
controller UE using a new Event Package
##### 4.5.4.5.2 Alternative 2 -- Informing that another UE has become a
controller UE using a SIP header field
##### 4.5.4.5.3 Alternative 3 -- Informing that another UE has become a
controller UE using a SIPfrag in an events package
###### 4.5.4.5.3.1 Alternative 3A - Informing that another UE has become a
controller UE using a SIPfrag of the XML body in the response
The flow for this alternative is shown in subclause 4.5.4.2.2.4.
###### 4.5.4.5.3.2 Alternative 3B - Informing that another UE has become a
controller UE using a SIPfrag of the new header field
###### 4.5.4.5.3.3 Alternative 3C - Informing that another UE has become a
controller UE using a SIPfrag of a feature tag in the Contact header field
The flow for this alternative is shown in subclause 4.5.4.1.1
## 4.6 Media flows transfer
NOTE: This subclause corresponds to subclauses 6.1.3.5 and 6.1.3.6 of 3GPP TR
23.831 [3]
### 4.6.1 General
### 4.6.2 Procedures
#### 4.6.2.1 Media flows transfer initiated by the target UE
##### 4.6.2.1.1 Media flows transfer initiated by a UE not participating in
the ongoing collaborative session
###### 4.6.2.1.1.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.2.1.1.1.1 Same/Different subscription
###### # 4.6.2.1.1.1.1.1 SC UE
For requesting media transfer to the requesting UE (the target UE), the target
UE sends a SIP REFER to the controller UE in the ongoing collaborative session
with transferred media. The SIP REFER request includes:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing collaborative session with transferred media and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE in the ongoing
collaborative session with transferred media;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if multiple UEs
share the same public user identity.
2) The Refer-To header field set as follows:
a) The SIP URI of the Target UE;
NOTE 3: The SIP URI of Target UE needs to be a GRUU if the Target UE and any
other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- Media lines which are not being transferred with the port numbers set to
zero
\- Media lines which are to be transferred containing the port number of the
Remote UE;
3) The Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
4) The Accept header field containing the MIME type "message/sipfrag";
5) The Target-Dialog header field containing the dialog parameters for the
dialog of the ongoing collaborative session with the transferred media; and
NOTE 3: The dialog parameters are obtained by subscribing to dialog event
package.
6) The Referred-By header field containing a currently registered public user
identity of the user.
###### # 4.6.2.1.1.1.1.2 SCC AS
On receiving the SIP REFER, the SCC AS requests the controller UE to authorize
the pull request or the SCC AS authorizes the request on behalf of the
controller UE (e.g. pre-configured).
The SCC AS performs the steps as described in 3GPP TS 24.237 [6], subclause
17.3.1, except that the target UE serves as the controllee UE and the NOTIFY
request is sent to target UE instead of controller UE.
###### 4.6.2.1.1.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.2.1.1.2.1 Same/Different subscription
###### # 4.6.2.1.1.2.1.1 SC UE
The SC UE will perform as described in 3GPP TS 24.237 [6], subclause 16.2.1
except described in this subclause.
For requesting media transfer, the target UE sends a SIP REFER (referred
REFER) request to the controller UE. The referred SIP REFER request includes:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing collaborative session with transferred media and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if the controller
UE and any other UEs share the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Inter UE Transfer SCC AS URI
b) the method parameter set to the REFER; and
c) the SIP URI additionally containing the following URI header fields:
\- the From header field set to the SIP URI of the controller UE;
\- the To header field set to the Inter UE Transfer SCC AS URI; and
\- the Refer-To header field set as follows:
i the SIP URI of the target UE; and
NOTE 3: The SIP URI of the target UE needs to be a GRUU if the target UE and
any other UEs share the same public user identity.
ii the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
o media lines that are not being transferred in ongoing collaborative session
with the port number set to zero; and
o media line(s) that are to be transferred containing the port number for the
corresponding media received in the media line of the SDP received during the
last successful SDP offer/answer exchange; and
3) the Referred-By header field containing a currently registered public user
identity of the user.
On receiving the referred REFER, the controller UE makes the REFER request
based on the Refer-To header field and sends the REFER request to SCC AS.
###### # 4.6.2.1.1.2.1.2 SCC AS
On receiving the SIP referred REFER request, SCC AS routes the SIP referred
REFER to the controller UE.
On receiving the SIP REFER request in the case of same subscription, SCC AS
performs the media transfer according to the 3GPP TS 24.237 [6], subclause
16.3.2.
On receiving the SIP REFER request in the case of different subscription, SCC
AS performs the media transfer according to the media transfer procedure
requested by controller UE as described in the 3GPP TS 24.237 [6], subclause
4.2.2.1.
###### 4.6.2.1.1.3 Alternative 3 (Based on SIP INVITE request)
###### # 4.6.2.1.1.3.1 Same/Different subscription
###### # 4.6.2.1.1.3.1.1 SC UE
In order to transfer media to itself, the target UE sends a SIP INVITE request
to the SCC AS. The SIP INVITE request shall include:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing collaborative session with transferred media and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE in the ongoing
collaborative session with transferred media;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if multiple UEs
share the same public user identity.
2) the Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
3) the Target-Dialog header field containing the dialog parameters for the
dialog of the ongoing collaborative session with the transferred media; and
NOTE 3: The dialog parameters are obtained by subscribing to dialog event
package.
4) the SDP information as follows:
a) for the media component already served by the target UE, include the SDP
information from the original session;
b) for the transferred media component(s), containing the port numbers of the
target UE; and
c) for the media component(s) not transferred from the controller UE,
containing the port numbers set to zero.
Upon receiving the SIP 2xx response for the INVITE request from the SCC AS,
the UE shall send a SIP ACK request to the SCC AS.
###### # 4.6.2.1.1.3.1.2 SCC AS serving the collaborative session
On receiving the SIP INVITE request, the SCC AS requests the controller UE to
authorize the pull request or the SCC AS authorizes the request on behalf of
the controller UE(e.g. pre-configured).
The SCC AS shall send a SIP re-INVITE request on the dialog for the remote leg
to the remote UE containing SDP information as follows:
1) for the transferred media component(s), set the SDP information as from the
SDP offer received in the SIP INVITE request from the target UE; and
2) for all other media components in the collaborative session, include the
SDP information as from the original session to the remote leg.
Upon receiving a SIP 2xx response for the re-INVITE request sent to the remote
UE, the SCC AS shall send a SIP ACK request on the remote leg and send a SIP
re-INVITE request to the controllerUE to remove the media for the transferred
media component.
##### 4.6.2.1.1a Media flow transfer initiated by a UE not participating in
the ongoing collaborative session - media on controllee UE
###### # 4.6.2.1.1a.1 Alternative 1 (SIP REFER with media feature tag)
###### 4.6.2.1.1a.1.1 Same/Different subscription
###### # 4.6.2.1.1a.1.1.1 SC UE
The procedures of the SC UE are identical as described in subclause
4.6.2.1.1.1.1.1.
###### # 4.6.2.1.1a.1.1.2 SCC AS
On receiving the SIP REFER request, the SCC AS requests the controller UE to
authorize the pull request or the SCC AS authorizes the request on behalf of
the controller UE (e.g. pre-configured).
The SCC AS performs the steps as described in 3GPP TS 24.237 [6], subclause
17.3.2, except that:
\- the SCC AS sends a SIP INVITE request to the controllee UE to which the
media component(s) is to be transferred (i.e. the target UE), instead of a SIP
re-INVITE request;
\- the SCC AS sends the SIP NOTIFY request to the target UE instead of the
controller UE.
###### # 4.6.2.1.1a.2 Alternative 2 (SIP REFER with method= REFER)
###### 4.6.2.1.1a.2.1 Same/Different subscription
###### # 4.6.2.1.1a.2.1.1 SC UE
The procedures of the SC UE are identical as described in subclause
4.6.2.1.1.2.1.1.
###### # 4.6.2.1.1a.2.1.2 SCC AS
On receiving the SIP REFER request from the controller UE, SCC AS performs the
media transfer according to the 3GPP TS 24.237 [6], subclause 17.3.2, except
that:
\- the SCC AS sends a SIP INVITE request to the controllee UE to which the
media component(s) is to be transferred (i.e. the target UE), instead of a SIP
re-INVITE request;
\- the SCC AS also sends the SIP NOTIFY request to the target UE, as
subscribed by the SIP REFER request from the target UE.
###### # 4.6.2.1.1a.3 Alternative 3 (Based on SIP INVITE request)
###### 4.6.2.1.1a.3.1 Same/Different subscription
###### # 4.6.2.1.1a.3.1.1 SC UE
The procedures of the SC UE are identical as described in subclause
4.6.2.1.1.3.1.1.
###### # 4.6.2.1.1a.3.1.2 SCC AS
On receiving the SIP INVITE request, the SCC AS requests the controller UE to
authorize the pull request or the SCC AS authorizes the request on behalf of
UE-1(e.g. pre-configured).
If the SIP INVITE request is authorized, the SCC AS shall send a SIP re-INVITE
request on the dialog for the remote leg to the remote UE containing SDP
information as follows:
> 1) for the transferred media component(s), set the SDP information as from
> the SDP offer received in the SIP INVITE request from the target UE; and
>
> 2) for all other media components in the collaborative session, include the
> SDP information as from the original session to the remote leg.
Upon receiving a SIP 2xx response for the re-INVITE request sent to the remote
UE, the SCC AS shall:
1) send a SIP ACK request on the remote leg;
2) if the transferred media component was the only media component active at
the controllee UE from which the media component was transferred, send a SIP
BYE request to the controllee UE from which the media was transferred; or
3) if after the transfer of the media component the controllee UE from which
the media was transferred still has other media components within the
collaborative session, send a SIP re-INVITE request to the controllee UE from
which the media component was transferred, following the procedures described
in 3GPP TS 24.229 [2] and set the port value of the associated media
descriptions (m) for the transferred media to 0.
Upon receiving a SIP 200 (OK) response with the SDP answer on the remote leg,
the SCC AS shall send a SIP ACK request on the remote leg.
##### 4.6.2.1.2 Media flows transfer initiated when no collaborative session
has been established
###### 4.6.2.1.2.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.2.1.2.1.1 Same/Different subscription
###### # 4.6.2.1.2.1.1.1 SC UE
To transfer a media component when no collaborative session has been
established, the Target UE shall send a SIP REFER request to the SCC AS as
specified in IETF RFC 3515 [8] and include:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing session with transferred media and gets information
about its media flow by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the local UE that currently holds the
media for the session;
NOTE 2: The SIP URI of the local UE need to be a GRUU if multiple UEs share
the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Target UE to which the media m-lines are to be
transferred; and
NOTE 3: The SIP URI of Target UE needs to be a GRUU if the Target UE and any
other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- media lines which are not being transferred with the port numbers set to
zero; and
\- media lines which are to be transferred containing the port numbers of the
remote UE.
3) an Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
4) an Accept header field containing the MIME type \"message/sipfrag\";
5) the Target-Dialog header field containing the dialog parameters for the
dialog of the existing session; and
NOTE 4: The dialog parameters are obtained by subscribing to dialog event
package.
6) the Referred-By header field containing a currently registered public user
identity of the user.
###### # 4.6.2.1.2.1.1.2 SCC AS
On receiving the SIP REFER, the SCC AS requests the local UE to authorize the
pull request or the SCC AS authorizes the request on behalf of local UE (e.g.
pre-configured).
In the case of same subscription, the SCC AS performs the steps as described
in 3GPP TS 24.237 [6], subclause 16.3.2, except that the NOTIFY request is
sent to target UE instead of local UE.
In the case of different subscription, the SCC AS performs the steps as
described in 3GPP TS 24.237 [6], subclause 17.3.1, except that the request URI
of the NOTIFY request is set to the address of the target UE instead of local
UE.
###### 4.6.2.1.2.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.2.1.2.2.1 Same/Different subscription
###### # 4.6.2.1.2.2.1.1 SC UE
For requesting media transfer, the target UE sends a SIP REFER (referred
REFER) request to the UE with transferred media. The referred SIP REFER
request includes:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing session with transferred media and gets information
about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the local UE that currently holds the
media for the session;
NOTE 2: The SIP URI of the local UE needs to be a GRUU if multiple UEs share
the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Inter UE Transfer SCC AS URI
b) the method parameter set to the REFER
c) the SIP URI additionally containing the following URI header fields
\- the From header field set to the SIP URI of the local UE;
\- the To header field set to the Inter UE Transfer SCC AS URI; and
\- the Refer-To header field set as follows.
i the SIP URI of the target UE
NOTE 3: The SIP URI of the target UE needs to be a GRUU if the target UE and
any other UEs share the same public user identity.
ii the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
o media lines which are not being transferred in ongoing session with the port
number set to zero
o media line(s) that are to be transferred containing the port number for the
corresponding media received in the media line of the SDP received during the
last successful SDP offer/answer exchange;
3) the Referred-By header field containing a currently registered public user
identity of the user.
On receiving the referred REFER, the local UE makes the REFER request based on
the Refer-To header field and sends the REFER request to SCC AS.
###### # 4.6.2.1.2.2.1.2 SCC AS
On receiving the SIP referred REFER request, SCC AS routes the SIP referred
REFER to the local UE.
On receiving the SIP REFER request in the case of same subscription, SCC AS
performs the media transfer according to the 3GPP TS 24.237 [6], subclause
16.3.2.
On receiving the SIP REFER request in the case of different subscription, SCC
AS performs the media transfer according to the 3GPP TS 24.237 [6], subclause
4.2.2.1.
###### 4.6.2.1.2.3 Alternative 3 (Based on SIP INVITE request)
###### # 4.6.2.1.2.3.1 Same/Different subscription
###### # 4.6.2.1.2.3.1.1 SC UE
In order to transfer a media component when no collaborative session has been
established, the target UE sends a SIP INVITE request to the SCC AS. The SIP
INVITE request shall include:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing collaborative session with transferred media and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the local UE that currently holds the
media for the session;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if multiple UEs
share the same public user identity.
2) the Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
3) the Target-Dialog header field containing the dialog parameters for the
dialog of the ongoing session with the transferred media; and
NOTE 3: The dialog parameters are obtained by subscribing to dialog event
package.
4) the SDP information as follows:
a) for the media component already served by the target UE, include the SDP
information from the original session;
b) for the transferred media component(s), containing the port numbers of the
target UE; and
c) for the media component(s) not transferred from the controller UE,
containing the port numbers set to zero.
Upon receiving the SIP 2xx response for the INVITE request from the SCC AS,
the UE shall send a SIP ACK request to the SCC AS.
###### # 4.6.2.1.2.3.1.2 SCC AS serving the collaborative session
On receiving the SIP INVITE request, the SCC AS requests the local UE to
authorize the pull request or the SCC AS authorizes the request on behalf of
the local UE (e.g. pre-configured). The SCC AS will also authorize that the
target UE is of the same subscription in the case of the same subscription.
The SCC AS will also authorize that the target UE is of the different
subscription in the case of the different subscription.
The SCC AS shall send a SIP re-INVTE request to the local UE, indicating the
media streams, which are about to be transferred to the target UE, as
inactive.
Upon receiving a SIP 200 (OK) response with the SDP answer from the local UE,
the SCC AS shall send a SIP ACK request to the local UE. After that, the SCC
AS shall send a SIP re-INVITE request on the dialog for the remote leg to the
remote UE containing SDP information as follows:
1) for the transferred media component(s), set the SDP information as from the
SDP offer received in the SIP INVITE request from the target UE; and
2) for all other media components in the collaborative session, include the
SDP information as from the original session to the remote leg.
Upon receiving a SIP 2xx response for the re-INVITE request sent to the remote
UE, SCC AS shall send a SIP ACK request on the remote leg and shall send a SIP
re-INVITE request to the local UE to remove the media for the transferred
media component.
##### 4.6.2.1.3 Media flows transfer initiated by a controllee UE of an
ongoing collaborative session
###### 4.6.2.1.3.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.2.1.3.1.1 Same/Different subscription
###### # 4.6.2.1.3.1.1.1 SC UE
The controllee UE initiates the transfer of Media flow from the controller UE
to itself by sending a SIP REFER request to the SCC AS outside the existing
dialog as specified in IETF RFC 3515 [8] and include:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing session with transferred media and gets information
about its media flow by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the local UE that currently holds the
media for the session;
NOTE 2: The SIP URI of the local UE needs to be a GRUU if multiple UEs share
the same public user identity.
2) The Refer-To header field set as follows:
a) The SIP URI of the Target UE;
NOTE 3: The SIP URI of Target UE needs to be a GRUU if the Target UE and any
other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- Media lines which are not being transferred with the port numbers set to
zero;
\- Media lines which are to be transferred containing the port number of the
Remote UE.
3) The Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags; and
4) The Accept header field containing the MIME type "message/sipfrag"; and
5) The Target-Dialog header field containing the dialog parameters for the
dialog of the existing session; and
NOTE 2: The dialog parameters are obtained by subscribing to dialog event
package.
6) The Referred-By header field containing a currently registered public user
identity of the user.
###### # 4.6.2.1.3.1.1.2 SCC AS
On receiving the SIP REFER, the SCC AS requests the local UE to authorize the
pull request or the SCC AS authorizes the request on behalf of the local UE
(e.g. pre-configured).
In the case of same subscription, the SCC AS performs the steps as described
in 3GPP TS 24.237 [6], subclause 16.3.2, except that the NOTIFY request is
sent to target UE instead of local UE.
In the case of different subscription, the SCC AS performs the steps as
described in 3GPP TS 24.237 [6], subclause 17.3.1, except that the request URI
of the NOTIFY request is set to the address of the target UE instead of local
UE.
###### 4.6.2.1.3.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.2.1.3.2.1 Same/Different subscription
###### # 4.6.2.1.3.2.1.1 SC UE
For requesting media transfer, the target UE sends a SIP REFER (referred
REFER) request to the controller UE. The referred SIP REFER request includes:
NOTE 1: Before requesting media flow transfer, the target UE of media transfer
discovers the ongoing collaborative session with transferred media and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if the controller
UE and any other UEs share the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Inter UE Transfer SCC AS URI;
b) the method parameter set to the REFER; and
c) the SIP URI additionally containing the following URI header fields:
\- the From header field set to the SIP URI of the controller UE;
\- the To header field set to the Inter UE Transfer SCC AS URI; and
\- the Refer-To header field set as follows:
i the SIP URI of the target UE; and
NOTE 3: The SIP URI of the target UE needs to be a GRUU if the target UE and
any other UEs share the same public user identity.
ii The for the media type for each of the media (m=) lines in the session set
as follows:
o media lines which are not served by the target controllee UE and which are
not being transferred with the port numbers set to zero;
o media lines which are already served by the target controllee UE, therefore
are not to be transferred containing the port numbers of the remote UE; and
o media line(s) that are to be transferred containing the port number for the
corresponding media received in the media line of the SDP received during the
last successful SDP offer/answer exchange 3) the Referred-By header field
containing a currently registered public user identity of the user.
On receiving the referred REFER, the controller UE makes the REFER request
based on the Refer-To header field and sends the REFER request to SCC AS.
###### # 4.6.2.1.3.2.1.2 SCC AS
On receiving the SIP referred REFER request, SCC AS routes the SIP referred
REFER to the controller UE.
On receiving the SIP REFER request in the case of same subscription, SCC AS
performs the media transfer according to the 3GPP TS 24.237 [6], subclause
16.3.2.
On receiving the SIP REFER request in the case of different subscription, SCC
AS performs the media transfer according to the media transfer procedure
requested by controller UE in the case of different subscription as described
in the 3GPP TS 24.837 [6], subclause 4.2.2.1.
###### 4.6.2.1.3.3 Alternative 3 (Based on SIP re-INVITE request)
###### # 4.6.2.1.3.3.1 Same/Different subscription
###### # 4.6.2.1.3.3.1.1 Controllee UE
In order to transfer the media to itself, the target UE sends a SIP re-INVITE
request to the SCC AS serving the collaborative session. The SIP INVITE
request shall include:
NOTE 1: Before requesting media flow transfer, the UE discovers the ongoing
collaborative session with transferred media and gets information about its
media flows by subscribing to dialog event.
1) the Request-URI set to the SCC AS of the on-going SIP dialog;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if multiple UEs
share the same public user identity.
2) the Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
3) the Target-Dialog header field containing the dialog parameters for the
dialog of the ongoing collaborative session with the transferred media; and
NOTE 3: The dialog parameters are obtained by subscribing to dialog event
package.
4) the SDP information as follows:
a) for the media component(s) already served by the target UE, include the SDP
information from the original session;
b) for the transferred media component(s), containing the port numbers of the
target UE; and
c) for the media component(s) not served by the UE, containing the port
numbers set to zero.
Upon receiving the SIP 2xx response for the re-INVITE request from the SCC AS,
the UE shall send a SIP ACK request to the SCC AS.
###### # 4.6.2.1.3.3.1.2 SCC AS serving the collaborative session
On receiving the SIP re-INVITE request, the SCC AS requests the controller UE
to authorize the transfer request or the SCC AS authorizes the request on
behalf of controller UE (e.g. pre-configured).
The SCC AS shall send a SIP re-INVTE request to the controller UE, indicating
the media streams, which are about to be transferred to the controllee UE, as
inactive.
Upon receiving a SIP 200 (OK) response with the SDP answer from the controller
UE, the SCC AS shall send a SIP ACK request to the controller UE. After that,
the SCC AS shall send a SIP re-INVITE request on the dialog for the remote leg
to the remote UE containing SDP information as follows:
1) for the transferred media component(s), set the SDP information as from the
SDP offer received in the SIP INVITE request from the target controllee UE;
and
2) for all other media components in the collaborative session, include the
SDP information as from the original session to the remote leg.
Upon receiving a SIP 2xx response for the re-INVITE request sent to the remote
UE, the SCC AS shall send a SIP ACK request on the remote log and shall send a
SIP re-INVITE request to the controller UE to remove the media for the
transferred media component.
##### 4.6.2.1.4 Inter-UE transfer solicited by a target UE without prior
information about the existing session
###### 4.6.2.1.4.1 Alternative 1 (Based on "reg" event package using a Contact
header)
###### # 4.6.2.1.4.1.1 Same/Different subscription
This clause specifies the procedures for transferring a media when the target
of an IUT dose not have information about ongoing session.
###### # 4.6.2.1.4.1.1.1 SC UE
For IUT solicited by a target UE, other UEs shall subscribe to the reg event
package to get the availability and capabilities of potential target UEs and
also to receive the solicitation request for IUT from the target UE.
In order to update status of the target UE, the target UE performs the
reregistration of a previously registered public user identity bound to any
one of its contact addresses as described in 3GPP TS 24.229 [4], subclause
5.1.1.4 and includes information in a Contact header field of REGISTER method
as follows:
1) the g.3gpp.iut.solicit media feature tag which represent the solicit IUT
request;
2) the requested-ue is set by the identifier of UE which has the media session
requested for IUT by the target UE is set to SIP URI of the requested UE as
defined in IETF RFC 3261 [20];
3) the media-type is set by the media information that requested to be
transferred; and
4) the service-type is set by the service information that associated with the
media and that is serving for the requested UE;
When the requested UE receives the NOTIFY request from the IMS entity, the
requested UE checjs that it controls the media which is requested by the
solicitation request. If the requested UE controls the media, the requested UE
decides whether to initiate the IUT solicited by the target UE or not. If the
requested UE decides to initiate the IUT, then the requested UE proceedes the
relevant IUT procedures to transfer the media to the target UE as described in
3GPP TS 24.237[6], subclause 15, 16, and 17.
###### # 4.6.2.1.4.1.1.2 SCC AS
On receiving the IUT request, the SCC AS proceedes the relevant IUT procedures
to transfer media to the target UE.
###### # 4.6.2.1.4.1.1.3 IMS Entities
On receiving the re-registration request, the S-CSCF shall send a NOTIFY
request to the requested UE as specified in 3GPP TS 24.229, subclause
5.4.2.1.2.
#### 4.6.2.2 Media flows transfer initiated by a UE other than the target UE
##### 4.6.2.2.1 Void
##### 4.6.2.2.2 Controllee UE initiated addition of media to another
controllee UE
###### 4.6.2.2.2.1 Alternative 1 (SIP REFER with media feature tag)
###### # 4.6.2.2.2.1.1 Same/Different subscription
###### # 4.6.2.2.2.1.1.1 SC UE
For requesting addition of media to another controllee UE, the requesting
controllee UE sends a SIP REFER request to the controller UE. The referred SIP
REFER request includes:
NOTE 1: Before requesting addition of media, the requesting controllee UE of
addition of media discovers the ongoing collaborative session and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE in the ongoing
collaborative session to be added media;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if the controller
UE and any other UEs share the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the target UE;
NOTE 3: The SIP URI of Target UE needs to be a GRUU if the Target UE and any
other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- media lines which are not served by the target controllee UE and which are
not being added with the port numbers set to zero;
\- media lines which are already served by the target controllee UE, therefore
are not to be added containing the port numbers of the remote UE; and
\- media line(s) that are to be added containing the media type(s) to be added
and the discard port number \"9\".
3) the Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags;
4) the Accept header field containing the MIME type "message/sipfrag";
5) the Target-Dialog header field containing the dialog parameters for the
dialog of the existing session; and
NOTE 3: The dialog parameters are obtained by subscribing to dialog event
package.
6) the Referred-By header field containing a currently registered public user
identity of the user.
###### # 4.6.2.2.2.1.1.2 SCC AS
On receiving the SIP REFER, the SCC AS requests the controller UE to authorize
the adding media request or the SCC AS authorizes the request on behalf of the
controller UE (e.g. pre-configured).
The SCC AS performs the steps as described in 3GPP TS 24.237 [6], subclause
19.3.1, except that the NOTIFY request is sent to request UE instead of
controller UE.
###### 4.6.2.2.2.2 Alternative 2(SIP REFER with method= REFER)
###### # 4.6.2.2.2.2.1 Same subscription
###### # 4.6.2.2.2.2.1.1 Controllee UE
The SC UE shall perform as described in 3GPP TS 24.237 [6], subclause 19.2.1
except described in this subclause.
For requesting addition of media to another controllee UE, the requesting
controllee UE sends a SIP REFER (referred REFER) request to the controller UE.
The referred SIP REFER request includes:
NOTE 1: Before requesting addition of media, the requesting controllee UE of
addition of media discovers the ongoing collaborative session and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if the controller
UE and any other UEs share the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Inter UE Transfer SCC AS URI;
b) the method parameter set to the REFER; and
c) the SIP URI additionally containing the following URI header fields:
\- the From header field set to the SIP URI of the controller UE;
\- the To header field set to the Inter UE Transfer SCC AS URI; and
\- the Refer-To header field set as follows:
i the SIP URI of the target UE; and,
NOTE 3: The SIP URI of the target UE needs to be a GRUU if the target UE and
any other UEs share the same public user identity.
ii the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
o media lines which are not served by the target controllee UE and which are
not being added with the port numbers set to zero;
o media lines which are already served by the target controllee UE, therefore
are not to be added containing the port numbers of the remote UE; and
o media line(s) that are to be added containing the media type(s) to be added
and the discard port number \"9\".
3) the Referred-By header field containing a currently registered public user
identity of the user; and
4) the Target-Dialog header field containing the dialog parameters for the
dialog of the existing session;
NOTE 4: The dialog parameters are obtained by subscribing to dialog event
package.
###### # 4.6.2.2.2.2.1.2 Controller UE
The Controller UE shall perform as described in 3GPP TS 24.237 [6], subclause
19.2.1 except described in this subclause.
On receiving the referred REFER, the controller UE authorizes the request and
makes the REFER request based on the Refer-To header field and sends the REFER
request to SCC AS.
###### # 4.6.2.2.2.2.1.3 SCC AS
On receiving the SIP REFER, SCC AS performs addition of the media according to
the media transfer procedure requested by controller UE as described in the
3GPP TS 24.237 [6], subclause 19.3.1.
###### # 4.6.2.2.2.2.2 Different subscription
###### # 4.6.2.2.2.2.2.1 Controllee UE
For requesting addition of media to another controllee UE, the requesting
controllee UE sends a SIP REFER (referred REFER) request to the controller UE.
The referred SIP REFER request includes:
NOTE 1: Before requesting addition of media, the requesting controllee UE of
addition of media discovers the ongoing collaborative session and gets
information about its media flows by subscribing to dialog event.
1) the Request-URI set to the SIP URI of the controller UE;
NOTE 2: The SIP URI of the controller UE needs to be a GRUU if the controller
UE and any other UEs share the same public user identity.
2) the Refer-To header field set as follows:
a) the SIP URI of the Inter UE Transfer SCC AS URI;
b) the method parameter set to the REFER; and
c) the SIP URI additionally containing the following URI header fields:
\- the From header field set to the SIP URI of the controller UE;
\- the To header field set to the Inter UE Transfer SCC AS URI; and
\- the Refer-To header field set as follows:
i the SIP URI of the target UE;
NOTE 3: The SIP URI of the target UE needs to be a GRUU if the target UE and
any other UEs share the same public user identity.
ii the SIP URI additionally containing the URI header field with the hname
"body" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
o media lines which are not served by the target controllee UE and which are
not being added with the port numbers set to zero;
o media lines which are already served by the target controllee UE, therefore
are not to be added containing the port numbers of the remote UE; and
o media line(s) that are to be added containing the media type(s) to be added
and the discard port number \"9\".
3) the Referred-By header field containing a currently registered public user
identity of the user; and
4) the Target-Dialog header field containing the dialog parameters for the
dialog of the existing session.
NOTE 4: The dialog parameters are obtained by subscribing to dialog event
package.
###### # 4.6.2.2.2.2.2.2 Controller UE
On receiving the referred REFER, the controller UE authorizes the request and
makes the REFER request based on the Refer-To header field and sends the REFER
request to SCC AS.
###### # 4.6.2.2.2.2.2.3 SCC AS
On receiving the SIP REFER, SCC AS performs addition of the media according to
the media transfer procedure requested by controller UE in the case of
different subscription as described in the 3GPP TS 24.237 [6], subclause
19.3.1.
### 4.6.3 Identified issues
Following issues were all resolved.
**Issue 4.6.3-1** : To which entity (SCC AS or controller UE) does the target
UE requests to pull the existed media flow? There are two approaches:
Approach 1 (to SCC AS): SCC AS authorizes and executes the request instead of
controller UE
Approach 2 (to controller UE): The target UE sends the referred REFER to
controller UE. The controller UE authorizes the request and sends the REFER
message to SCC AS for media transfer
**Issue 4.6.3-2** : How the controller UE receives the final status of the
Media transfer is FFS.
**Issue 4.6.3-3** : (relevant only to 4.6.2.1.2): Which UE takes the role of
controller is FFS when there is no collaboration and the target UE establishes
the collaboration session by pulling the media from the existing non
collaboration session.
### 4.6.4 Call flows
#### 4.6.4.1 Media flows transfer initiated by the target UE
##### 4.6.4.1.1 Media flows transfer initiated by a UE not participating in
the ongoing collaborative session
###### 4.6.4.1.1.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.4.1.1.1.1 Same/Different subscription
This subclause describes the scenario when the Media flow is transferred from
UE-1 to UE-3 requested by UE-3 and the UE-3 becomes a new Controllee UE. The
flow diagram shows when UE-1 and UE-3 belong to the different subscription.
The SCC AS-1 is controlling the colloaborative session.
UE-1(123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the Controller UE
and UE-2 is the Controllee UE. Media paths exist between UE-1 and remote
UE(video) and between UE-2 and remote UE(audio). The video component is
bidirectional from the remote UE to the controller UE, UE-1. The
UE-3(123.23.45.67) wants to pull the media flow between UE-1 and remote UE.
After this procedure, the UE-3 will be in collaborative session.
Figure 4.6.4.1.1.1.1-1: Signalling flow for Media flows transfer initiated by
a UE not participating in the ongoing collaborative session
**1\. UE-3 discovers the sessions of UE-1.**
**2-6. SIP REFER request (from UE-3 to controller UE, UE-1)**
The UE-3 sends SIP REFER request to the controller UE, UE-1 to request the
media transfer. The SIP REFER request is finally routed to the SCC AS-1
serving UE-1.
Editor\'s Note: How the SCC AS-1 authorize the request is FFS.
Table 4.6.4.1.1.1.1-2: SIP REFER request (UE-3 to UE-1)
> REFER
> sip:user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333?body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m** %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333
>
> Accept-Contact:+g.3gpp.iut-xyz;explicit;require
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**7-11. SIP 202 (Accepted) response (from SCC AS-1 serving UE-1 to UE-3)**
SCC AS-1 serving UE-1 sends a SIP 202 (Accepted) response to UE-3 as response
to the SIP REFER request.
**12-16. SIP NOTIFY request (from SCC AS-1 serving UE-1 to UE-3)**
The SCC AS-1 serving UE-1 sends a SIP NOTIFY request to UE-3 to notify
implicit subscription to the SIP REFER request results.
**17-21. SIP 200 (OK) response (from UE-3 to SCC AS-1 serving UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
**22-26. SIP INVITE request (from SCC AS-1 serving UE-1 to UE-3)**
Since the message 2-6 contains a Refer-to header field addressed to UE-3 and
the URI paramaters, listing an video line which is not currently supported by
another UE than controller UE, the SCC AS-1 realizes the procedure is for
transferring the media from that controller UE (UE-1) to UE-3. The SCC AS-1
sends a SIP INVITE request to the UE-3, to transfer the video media component.
Table 4.6.4.1.1.1.1-22: SIP INVITE request (SCC AS-1 serving UE-1 to UE-3)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**27-31. SIP 200 (OK) response (from UE-3 to SCC AS-1 serving UE-1)**
The target UE, UE-3, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCCAS-1.
Table 4.6.4.1.1.1.1-27: SIP 200 (OK) response (UE-3 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=recvonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**32-36. SIP ACK request (from SCC AS-1 serving UE-1 to target UE; UE-3)**
The SCC AS-1 serving UE-1 sends a SIP ACK request to the UE-3.
**37-38. SIP re-INVITE request (from SCC AS-1 serving UE-1 to controller UE;
UE-1)**
Table 4.6.4.1.1.1.1-37: SIP INVITE request (SCC AS-1 serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=sendonly
**39-40. SIP 200 (OK) response (from controller UE, UE-1 to SCC AS-1 serving
UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.1.1.1-39: SIP 200 (OK) response (UE-1 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=inactive
**41-42. SIP ACK request (from SCC AS-1 serving UE-1 to controller UE; UE-1)**
The SCC AS-1 serving UE-1 sends a SIP ACK request to the UE-1.
**43-45. SIP re-INVITE request (from SCC AS-1 serving UE-1 to remote UE)**
The SCC AS-1 serving UE-1 sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.1.1.1-43: SIP INVITE request (SCC AS-1 serving UE-1 to remote
UE)
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**46-48. SIP 200 (OK) response (from remote UE to SCC AS-1 serving UE-1)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS-1.
Table 4.6.4.1.1.1.1-46: SIP 200 (OK) response (remote UE to SCC AS-1 serving
UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**49-51. SIP ACK request (from SCC AS-1 serving UE-1 to remote UE)**
The SCC AS-1 serving UE-1 sends a SIP ACK request to the remote UE.
**52-56. SIP re-INVITE request (from SCC AS-1 serving UE-1 to UE-3)**
The SCC AS-1 serving UE-1 sends a SIP re-INVITE request to UE-3 to activate
the video media component.
Table 4.6.4.1.1.1.1-52: SIP INVITE request (SCC AS-1 serving UE-1 to UE-3)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-61. SIP 200 (OK) response (from UE-3 to SCC AS-1 serving UE-1)**
The target UE, UE-3, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCCAS-1 serving UE-1.
Table 4.6.4.1.1.1.1-57: SIP 200 (OK) response (UE-3 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**62-66. SIP ACK request (from SCC AS-1 serving UE-1 to target UE; UE-3)**
The SCC AS-1 serving UE-1 sends a SIP ACK request to the UE-3.
**67-68. SIP re-INVITE request (from SCC AS-1 serving UE-1 to controller UE;
UE-1)**
The SCC AS-1 sends a SIP re-INVITE request to the controller UE. Since UE-1
keep the collaborative session control, SCC AS-1 sends the re-INVITE instead
of BYE in spite of no media flow at UE-1.
Table 4.6.4.1.1.1.1-67: SIP INVITE request (SCC AS-1 serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**69-70. SIP 200 (OK) response (from controller UE, UE-1 to SCC AS-1 serving
UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.1.1.1-69: SIP 200 (OK) response (UE-1 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**71-72. SIP ACK request (from SCC AS-1 serving UE-1 to controller UE; UE-1)**
The SCC AS-1 sends a SIP ACK request to the UE-1.
**73-77. SIP NOTIFY request (from SCC AS-1 serving UE-1 to UE-3)**
The SCC AS-1 serving UE-1 sends a SIP NOTIFY request to the UE-3 to inform
about the success status of the inter-UE transfer.
**78-82. SIP 200 (OK) response (from UE-3 to SCC AS-1 serving UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
###### 4.6.4.1.1.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.4.1.1.2.1 Same subscription
This subclause describes the scenario when the Media flow is transferred from
UE-1 to UE-3 requested by UE-3. The flow diagram shows when UE-1, UE-2, and
UE-3 belong to the same subscription.
UE-1(123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the Controller UE
and UE-2 is the Controllee UE. Media paths exist between UE-1 and remote
UE(video) and between UE-2 and remote UE(audio). The UE-3(123.23.45.67) wants
to pull the media flow between UE-1 and remote UE. After this procedure, the
UE-3 will be in collaborative session.
Figure 4.6.4.1.1.2.1-1: Signalling flow for Media flows transfer initiated by
a UE not participating in the ongoing collaborative session
**1\. UE-3 discovers the sessions of UE-1.**
**2-5. SIP REFER request (from UE-3 to UE-1)**
The UE-3 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request the media transfer from UE-1 to UE-3.
Table 4.6.4.1.1.2.1-2: SIP REFER request (UE-3 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ interUEtransfer%40example.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user1_public3**\@home1.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333**?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E%3B**
> Target-dialog= cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-
> tag=11928**>**
>
> Referred-By: sip:user1_public3\@home1.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**6-9. SIP 202 (Accepted) response (from UE-1 to UE-3)**
UE-1 sends a SIP 202 (Accepted) response to UE-3 as response to the SIP REFER
request.
**10-13. SIP NOTIFY request (from UE-1 to UE-3)**
The UE-1 sends a SIP NOTIFY request to UE-3 to notify implicit subscription to
the SIP REFER request results.
**14-17. SIP 200 (OK) response (from UE-3 to UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS.
**18-19. SIP REFER request (from UE-1 to SCC AS)**
The UE-1 sends SIP REFER request to SCC AS to request the media transfer from
UE-1 to UE-3.
Table 4.6.4.1.1.2.1-18: SIP REFER request (UE-1 to SCC-AS)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333?body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m** %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public3\@home1.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**20-21. SIP 202 (Accepted) response (from SCC AS to UE-1)**
SCC-AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**22-25. SIP NOTIFY request (from UE-1to UE-3)**
The UE-1 sends a SIP NOTIFY request to the UE-3 to inform the success status
about sending the SIP REFER requested by the referred REFER.
**26-29. SIP 200 OK response (from UE-3 to UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 OK response
to the UE-1.
**30-31. SIP NOTIFY request (from SCC AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription
to the SIP REFER request results.
**32-33. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS.
**34-35. SIP INVITE request (from SCC-AS to UE-3)**
Since the message 18-19 contains a Refer-to header field addressed to UE-3 and
the URI parameters, listing a video line which is not currently supported by
another UE than controller UE, the SCC AS realizes the procedure is for
transferring the media from that controller UE (UE-1) to UE-3. The SCC-AS
sends a SIP INVITE request to the UE-3, to transfer the video media component.
Table 4.6.4.1.1.2.1-34: SIP INVITE request (SCC-AS to UE-3)
> INVITE sip:user1_public3\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home1.net;
>
> From: sip:interUEtransfer\@example.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**36-37. SIP 200 (OK) response (from UE-3 to SCC-AS)**
The target UE, UE-3, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC-AS.
Table 4.6.4.1.1.2.1-36: SIP 200 (OK) response (UE-3 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home1.net; tag = 24861
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=recvonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**38-39. SIP ACK request (from SCC-AS to target UE; UE-3)**
The SCC-AS sends a SIP ACK request to the UE-3.
**40-41. SIP re-INVITE request (from SCC-AS to controller UE; UE-1)**
Table 4.6.4.1.1.2.1-40: SIP INVITE request (SCC-AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=sendonly
>
> m=audio 0 RTP/AVP 97
**42-43. SIP 200 (OK) response (from controller UE, UE-1 to SCC-AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.1.2.1-42: SIP 200 (OK) response (UE-1 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=recvonly
>
> m=audio 0 RTP/AVP 97
**44-45. SIP ACK request (from SCC-AS to controller UE; UE-1)**
The SCC-AS sends a SIP ACK request to the UE-1.
**46-48. SIP re-INVITE request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.1.2.1-46: SIP INVITE request (SCC-AS to remote UE)
> INVITE sip:userR_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**49-51. SIP 200 (OK) response (from remote UE to SCC-AS)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC-AS.
Table 4.6.4.1.1.2.1-49: SIP 200 (OK) response (remote UE to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**52-54. SIP ACK request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP ACK request to the remote UE.
**55-56. SIP re-INVITE request (from SCC-AS to UE-3)**
Table 4.6.4.1.1.2.1-55: SIP INVITE request (SCC-AS to UE-3)
> INVITE sip:user1_public3\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home1.net;
>
> From: sip:interUEtransfer\@example.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-58. SIP 200 (OK) response (from UE-3 to SCC-AS)**
The target UE, UE-3, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC-AS.
Table 4.6.4.1.1.2.1-57: SIP 200 (OK) response (UE-3 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home1.net; tag = 24861
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**59-60. SIP ACK request (from SCC-AS to target UE; UE-3)**
The SCC-AS sends a SIP ACK request to the UE-3.
**61-62. SIP re-INVITE request (from SCC-AS to controller UE; UE-1)**
The SCC-AS sends a SIP re-INVITE request to the controller UE. Since UE-1 keep
the collaborative session control, SCC AS sends the re-INVITE instead of BYE
in spite of no media flow at UE-1.
Table 4.6.4.1.1.2.1-61: SIP INVITE request (SCC-AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=video 0 RTP/AVP 98 99
>
> m=audio 0 RTP/AVP 97
**63-64. SIP 200 (OK) response (from controller UE, UE-1 to SCC-AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.1.2.1-63: SIP 200 (OK) response (UE-1 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**65-66. SIP ACK request (from SCC-AS to controller UE; UE-1)**
The SCC-AS sends a SIP ACK request to the UE-1.
**67-68. SIP NOTIFY request (from SCC-AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to the UE-1 to inform about the success
status of the inter-UE transfer from UE-1 to UE-3.
**69-70. SIP 200 (OK) response (from UE-1 to SCC-AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
###### # 4.6.4.1.1.2.2 Different subscription
This subclause describes the scenario when the Media flow is transferred from
Controller UE, UE-1 to UE-3 requested by UE-3. The flow diagram shows when
UE-1 and UE-3 belong to the different subscription.
UE-1 (123.45.67.89) and UE-2 (123.112.67.87) belong to the same subscription
and are included in a Collaborative Session with the remote UE (132.54.76.98),
in which UE-1 is the Controller UE and UE-2 is the Controllee UE. The call is
anchored in the SCC AS of UE-1. Media paths exist between UE-1 and remote
UE(video) and between UE-2 and remote UE(audio). The UE-3(123.23.45.67) wants
to pull the media flow between UE-1 and remote UE. After this procedure, the
UE-3 will be in collaborative session.
**Figure 4.6.4.1.1.2.2-1: Signalling flow for Media flows transfer initiated
by a UE not participating in the ongoing collaborative session**
> NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
> signalling flow.
**1\. UE-3 discovers the sessions of UE-1**
**2-8. SIP REFER request (from UE-3 to UE-1)**
The UE-3 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request the media transfer from UE-1 to UE-3.
Table 4.6.4.1.1.2.2-2: SIP REFER request (UE-3 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ interUEtransfer%40example.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user2_public1**\@home2.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333**?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E%3B**
> Target-dialog= cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-tag=11928>
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**9-15. SIP 202 (Accepted) response (from UE-1 to UE-3)**
UE-1 sends a SIP 202 (Accepted) response to UE-3 as response to the SIP REFER
request.
**16-22. SIP NOTIFY request (from UE-1 to UE-3)**
The UE-1 sends a SIP NOTIFY request to UE-3 to notify implicit subscription to
the SIP REFER request results.
**23-29. SIP 200 (OK) response (from UE-3 to UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**30-31. SIP REFER request (from UE-1 to SCC AS serving UE-1)**
The UE-1 makes the REFER request based on the Refer-To header field in the
received REFER (referred REFER) message and sends the REFER request via IMS
CN. The REFER request is routed to the SCC AS serving UE-1.The SCC AS serving
UE-1 performs the media transfer.
Table 4.6.4.1.1.2.2-30: SIP REFER request (UE-1 to SCC-AS serving UE-1)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To:
> \ **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**32-33. SIP 202 (Accepted) response (from SCC AS serving UE-1 to UE-1)**
SCC-AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**34-40. SIP NOTIFY request (from UE-1 to UE-3)**
The UE-1 sends a SIP NOTIFY request to the UE-3 to inform about the success
status of sending the REFER.
**41-47. SIP 200 (OK) response (from UE-3 to UE-1)**
The UE-3 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**48-49. SIP NOTIFY request (from SCC AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP NOTIFY request to UE-1 to notify implicit
subscription to the SIP REFER request results.
**50-51. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS serving UE-1.
**52-56. SIP INVITE request (from SCC-AS serving UE-1 to UE-3)**
Since the message 30-31 contains a Refer-to header field addressed to UE-3 and
the URI parameters, listing a video line which is not currently supported by
UE-3, the SCC AS serving UE-1 realizes the procedure is for transferring the
media from that controller UE (UE-1) to UE-3. The SCC-AS serving UE-1 sends a
SIP INVITE request to the UE-3, to transfer the video media component.
Table 4.6.4.1.1.2.2-52: SIP INVITE request (SCC-AS serving UE-1 to UE-3)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@example.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-61. SIP 200 (OK) response (from UE-3 to SCC-AS serving UE-1)**
The target UE, UE-3, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC-AS serving UE-1.
Table 4.6.4.1.1.2.2-57: SIP 200 (OK) response (UE-3 to SCC-AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**62-66. SIP ACK request (from SCC-AS serving UE-1 to target UE; UE-3)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-3.
**67-68. SIP re-INVITE request (from SCC-AS serving UE-1 to controller UE;
UE-1)**
Table 4.6.4.1.1.2.2-67: SIP INVITE request (SCC-AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=sendonly
**69-70. SIP 200 (OK) response (from controller UE, UE-1 to SCC-AS serving
UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.1.2.2-69: SIP 200 (OK) response (UE-1 to SCC-AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=inactive
**71-72. SIP ACK request (from SCC-AS serving UE-1 to controller UE; UE-1)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-1.
**73-75. SIP re-INVITE request (from SCC-AS serving UE-1 to remote UE)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.1.1.2.2-73: SIP INVITE request (SCC-AS serving UE-1 to remote
UE)**
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**76-78. SIP 200 (OK) response (from remote UE to SCC-AS serving UE-1)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC-AS serving UE-1.
**Table 4.6.4.1.1.2.2-76: SIP 200 (OK) response (remote UE to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**79-81. SIP ACK request (from SCC-AS serving UE-1 to remote UE)**
The SCC-AS serving UE-1 sends a SIP ACK request to the remote UE.
**82-86. SIP re-INVITE request (from SCC-AS serving UE-1 to UE-3)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-3.
**Table 4.6.4.1.1.2.2-82: SIP INVITE request (SCC-AS serving UE-1 to UE-3)**
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@example.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**87-91. SIP 200 (OK) response (from UE-3 to SCC-AS serving UE-1)**
The UE-3 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.1.2.2-87: SIP 200 (OK) response (UE-3 to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@example.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> c=123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**92-96. SIP ACK request (from SCC-AS serving UE-1 to UE-3)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-3.
**97-98. SIP re-INVITE request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1.
**Table 4.6.4.1.1.2.2-97: SIP INVITE request (SCC-AS serving UE-1 to UE-1)**
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**99-100. SIP 200 (OK) response (from UE-1 to SCC-AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.1.2.2-99: SIP 200 (OK) response (UE-1 to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public1\@home1.net; tag= 11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**101-102. SIP ACK request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS sends a SIP ACK request to the UE-1.
**103-104. SIP NOTIFY request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP NOTIFY request to the UE-1 to inform about
the success status of the inter-UE transfer from UE-1 to UE-3.
**105-106. SIP 200 (OK) response (from UE-1 to SCC-AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
###### 4.6.4.1.1.3 Alternative 3 (Based on SIP INVITE request)
This subclause describes the scenario when the Media flow is transferred from
UE-1 to UE-3 requested by UE-3 and the UE-3 becomes a new controllee UE. The
flow diagram shows when UE-1, UE-2, and UE-3 belong to the same subscription.
UE-1(123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the controller UE
and UE-2 is the controllee UE. Media paths exist between UE-1 and remote
UE(video) and between UE-2 and remote UE(audio). The video component is
bidirectional from the remote UE to the controller UE, UE-1. The
UE-3(123.23.45.67) wants to pull the media flow between UE-1 and remote UE.
After this procedure, the UE-3 will be in collaborative session.
Figure 4.6.4.1.1.3-1: Inter UE Transfer initiated by UE not participating in
the collaborative session
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1\. UE-3 fetches the dialog information of UE-1 from SCC AS and decides to
transfer the media-A (video) from UE-1 to itself.**
**2-3. SIP INVITE request (UE-3 to Intermediate IM CN subsystem entities)**
The UE-3 sends SIP INVITE request toUE-1.
Table 4.6.4.1.1.3-2: SIP INVITE request (**UE-3 to Intermediate IM CN
subsystem entities**)
> INVITE sip:sip:user1_public1\@home1.net; SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \;
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 INVITE
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Contact:
> \
>
> Accept-Contact:+g.3gpp.iut-xyz;explicit;require
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H.263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: 3gpp.iut.transfer: collaborative pull-controller receiver is
to be specified.
**4-5. SIP re-INVITE request (SCC AS to remote UE)**
The SCC AS sends the SIP re-INVITE request to the remote UE to update the
session.
Table 4.6.4.1.1.3-4 SIP INVITE request (SCC AS to remote UE, UE-4)
> INVITE sip:user4_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:user4_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**6-7. SIP 200 (OK) response for the SIP re-INVITE request (Remote UE to SCC
AS)**
Remote UE responds with SIP 200 (OK) response to SCC AS.
Table 4.6.4.1.1.3-6: SIP 200 (OK) response (remote UE to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:user4_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**8-9. SIP 200 (OK) response for the SIP INVITE request (SCC AS to UE-3)**
The SCC AS responds with SIP 200 (OK) response to UE-3.
**10-13. SIP ACK request (UE-3 to remote UE)**
The UE-3 sends the SIP ACK request to remote UE
**14-15. SIP re-INVITE request (SCC-AS to UE-1)**
The SCC-AS updates the access leg on controller UE-1, and the collaborative
session control is kept in the controller UE-1.
Table 4.6.4.1.1.3-14: SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:user4_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**16-17. SIP 200 (OK) response to re-INVITE request (UE-1 to SCC-AS)**
After successful media update, UE-1 sends the SIP 200 (OK) reponse towards
SCC-AS.
Table 4.6.4.1.1.1.2-69: SIP 200 (OK) response (UE-1 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**18-19. SIP ACK request (SCC-AS to UE-1)**
The SCC AS sends the SIP ACK request to UE-1.
##### 4.6.4.1.2 Media flows transfer initiated when no collaborative session
has been established
###### 4.6.4.1.2.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.4.1.2.1.1 Same subscription
This subclause describes the scenario when the media flow is transferred from
UE-1 to UE-2 requested by UE-2. The flow diagram shows when UE-1 and UE-2
belong to the same subscription.
Media path exist between UE-1(123.45.67.89) and Remote UE(132.54.76.98).
UE-2(123.112.67.87) wants to pull the video media flow between UE-1 and
Remote-UE. After this procedure, collaborative session will be established.
Figure 4.6.4.1.2.1.1-1 Signalling flow for Media flow transfer initiated when
no collaborative session has been established
**1-2. UE-1 is in session with Remote UE**
There is a multimedia session comprising audio and video media between the
UE-1 and the Remote UE anchored at SCC AS.
**3\. UE-2 discovers the session of UE-1**
**4-5. SIP REFER request (from UE-2 to SCC AS)**
The UE-2 sends SIP REFER request to the UE-1 to request the media transfer
from UE-1 to UE-2. The SIP REFER request is routed to the SCC AS by filter
criteria. The SCC AS does not route the SIP REFER request to the address set
in the Request-URI if there is the g.3gpp.iut-xyz media feature tag in the
Accept-Contact header field.
Table 4.6.4.1.2.1.1-4: SIP REFER request (UE-2 to SCC AS)
> REFER sip:user1_public1\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**294756**
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222?** body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m** %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: **cb03a0s09a2sdfglkj11111** ;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact:
> sip:user1_public2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
>
> Accept-Contact: +g.3gpp.iut-xyz;explicit;require
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**6-7. SIP 202 (Accepted) response (from SCC AS to UE-2)**
SCC AS sends a SIP 202 (Accepted) response to UE-2 as response to the SIP
REFER request.
**8-9. SIP NOTIFY request (from SCC AS to UE-2)**
The SCC AS sends a SIP NOTIFY request to UE-2 to notify implicit subscription
to the SIP REFER request results.
**10-11. SIP 200 (OK) response (from UE-2 to SCC AS)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
**12-13. SIP INVITE request (from SCC AS to UE-2)**
Since the 4-5 SIP REFER request contains a Refer-to header field addressed to
UE-2 and the URI parameters, listing a video line which is transferred and an
audio line with port number set to zero which is not transferred, The SCC-AS
sends a SIP INVITE request to the UE-2, to transfer the video media component.
In order to avoid to UE-2 to start sending video to the Remote UE, the SCC AS
add an a line to sendonly in the SDP offer.
Table 4.6.4.1.2.1.1-12: SIP INVITE request (SCC-AS to UE-2)
> INVITE sip:user1_public2\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**14-15. SIP 200 (OK) response (from UE-2 to SCC-AS)**
The target UE, UE-2, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC AS.
Table 4.6.4.1.2.1.1-14: SIP 200 (OK) response (UE-2 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**16-17. SIP ACK request (from SCC AS to UE-2)**
The SCC AS sends a SIP ACK request to the UE-2.
**18-19. SIP re-INVITE request (from SCC AS to UE-1)**
The SCC-AS sends a SIP re-INVITE request to the UE-1 to hold the video media
session to be transferred.
Table 4.6.4.1.2.1.1-18: SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
**20-21. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.1.1-20: SIP 200 (OK) response (UE-1 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1202 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**22-23. SIP ACK request (from SCC AS to UE-1)**
The SCC AS sends a SIP ACK request to the UE-1.
**24-26. SIP re-INVITE request (from SCC AS to remote UE)**
> The SCC AS sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.2.1.1-24: SIP INVITE request (SCC AS to remote UE)
> INVITE sip:userR_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**27-29. SIP 200 (OK) response (from Remote UE to SCC AS)**
The Remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS.
Table 4.6.4.1.2.1.1-27: SIP 200 (OK) response (Remote UE to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**30-32. SIP ACK request (from SCC AS to Remote UE)**
The SCC-AS sends a SIP ACK request to the Remote UE.
**33-34. SIP re-INVITE request (from SCC AS to UE-2)**
The SCC AS sends a SIP re-INVITE request to UE-2 to activate the video media
component.
Table 4.6.4.1.2.1.1-33: SIP INVITE request (SCC AS to UE-2)
> INVITE sip:user1_public2\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**35-36. SIP 200 (OK) response (from UE-2 to SCC AS)**
The UE-2 sends a SIP 200 (OK) response to the SCC AS.
Table 4.6.4.1.2.1.1-35: SIP 200 (OK) response (UE-2 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**37-38. SIP ACK request (from SCC AS to UE-2)**
The SCC AS sends a SIP ACK request to the UE-2.
**40-41. SIP re-INVITE request (from SCC AS to UE-1)**
The SCC-AS sends a SIP re-INVITE request to the UE-1 to release the video
media component.
Table 4.6.4.1.2.1.1-40: SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**41-42. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.1.1-41: SIP 200 (OK) response (UE-1 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**43-44. SIP ACK request (from SCC AS to UE-1)**
The SCC AS sends a SIP ACK request to the UE-1.
**45-46. SIP NOTIFY request (from SCC AS to UE-2)**
The SCC AS sends a SIP NOTIFY request to the UE-2 to inform about success
status of transferring the media from UE-1 to the UE-2.
**47-48. SIP 200 (OK) response (from UE-2 to SCC AS)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
###### # 4.6.4.1.2.1.2 Different subscription
This subclause describes the scenario when the media flow is transferred from
UE-1 to UE-2 requested by UE-2. The flow diagram shows when UE-1 and UE-2
belong to the different subscription.
Media path exist between UE-1(123.45.67.89) and Remote UE(132.54.76.98).
UE-2(123.112.67.87) wants to pull the video media flow between UE-1 and
Remote-UE. After this procedure, collaborative session will be established.
Figure 4.6.4.1.2.1.2-1: Signalling flow for Media flow transfer initiated when
no collaborative session has been established
**1-2. UE-1 is in session with Remote UE**
There is a multimedia session comprising audio and video media between the
UE-1 and the Remote UE anchored at SCC AS.
**3\. UE-2 discovers the session of UE-1**
**4-8. SIP REFER request (from UE-2 to SCC AS serving UE-1)**
The UE-2 sends SIP REFER request to the UE-1 to request the media transfer
from UE-1 to UE-2. The SIP REFER request is finally routed to the SCC AS
serving UE-1.
Table 4.6.4.1.2.1.2-4: SIP REFER request (UE-2 to SCC AS serving UE-1)
> REFER
> sip:user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**294756**
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To:
> \ body= **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
>
> Accept-Contact:+g.3gpp.iut-xyz;explicit;require
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**9-13. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**14-18. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**19-23. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**24-28. SIP INVITE request (from SCC AS serving UE-1 to UE-2)**
Since the 4-8 SIP REFER request contains a Refer-to header field addressed to
UE-2 and the URI parameters, listing a video line which is transferred and an
audio line with port number set to zero which is not transferred, the SCC-AS
serving UE-1 sends a SIP INVITE request to the UE-2, to transfer the video
media component. In order to avoid to UE-2 to start sending video to the
Remote UE, the SCC AS serving UE-1 adds an a line to sendonly in the SDP
offer.
Table 4.6.4.1.2.1.2-24: SIP INVITE request (SCC AS serving UE-1 to UE-2)
> INVITE
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
> SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net;branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@example.net;tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**29-33. SIP 200 (OK) response (from UE-2 to SCC-AS serving UE-1)**
The target UE, UE-2, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC AS serving UE-1.
Table 4.6.4.1.2.1.2-29: SIP 200 (OK) response (UE-2 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**34-38. SIP ACK request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-2.
**39-40. SIP re-INVITE request (from SCC AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1 to hold the
video media session to be transferred.
Table 4.6.4.1.2.1.2-39: SIP INVITE request (SCC AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**41-42. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.1.2-41: SIP 200 (OK) response (UE-1 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1202 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**43-44. SIP ACK request (from SCC AS serving UE-1 to UE-1)**
> The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**45-47. SIP re-INVITE request (from SCC AS serving UE-1 to remote UE)**
> The SCC AS serving UE-1 sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.2.1.2-45: SIP INVITE request (SCC AS serving UE-1 to remote UE)
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**48-50. SIP 200 (OK) response (from Remote UE to SCC AS serving UE-1)**
The Remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
Table 4.6.4.1.2.1.2-48: SIP 200 (OK) response (Remote UE to SCC AS serving
UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**51-53. SIP ACK request (from SCC AS serving UE-1 to Remote UE)**
The SCC-AS serving UE-1 sends a SIP ACK request to the Remote UE.
**54-58. SIP re-INVITE request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP re-INVITE request to UE-2 to activate the
video media component.
Table 4.6.4.1.2.1.2-54: SIP INVITE request (SCC AS serving UE-1 to UE-2)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**59-63. SIP 200 (OK) response (from UE-2 to SCC AS serving UE-1)**
The UE-2 sends a SIP 200 (OK) response to the SCC AS serving UE-1.
Table 4.6.4.1.2.1.2-59: SIP 200 (OK) response (UE-2 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**64-68. SIP ACK request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-2.
**69-70. SIP re-INVITE request (from SCC AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1 to release
the video media component.
Table 4.6.4.1.2.1.2-69: SIP INVITE request (SCC AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**71-72. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.1.2-71: SIP 200 (OK) response (UE-1 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**73-74. SIP ACK request (from SCC AS serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**75-79. SIP NOTIFY request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP NOTIFY request to the UE-2 to inform about
success status of transferring the media from UE-1 to the UE-2.
**80-84. SIP 200 (OK) response (from UE-2 to SCC AS serving UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
###### 4.6.4.1.2.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.4.1.2.2.1 Same subscription
This subclause describes the scenario when the media flow is transferred from
UE-1 to UE-2 requested by UE-2. The flow diagram shows when UE-1 and UE-2
belong to the same subscription.
Media path exists between UE-1(123.45.67.89) and Remote UE(132.54.76.98).
UE-2(123.112.67.87) wants to pull the video media flow between UE-1 and
Remote-UE. After this procedure, collaborative session will be established.
Figure 4.6.4.1.2.2.1-1: Signalling flow for Media flow transfer initiated when
no collaborative session has been established
**1-2. UE-1 is in session with Remote UE**
There is a multimedia session comprising audio and video media between the
UE-1 and the Remote UE anchored at SCC AS.
**3\. UE-2 discovers the session of UE-1**
**4-7. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the local UE, UE-1 to
request the media transfer from UE-1 to UE-2.
Table 4.6.4.1.2.2.1-4: SIP REFER request (UE-2 to UE-1)
> REFER
> sip:user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**294756**
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ To=%3CinterUEtransfer%40example.net%3E%3BFrom=%3Csip:user1_public1%40home1.net%3BRefer-
> To=%3Csip:user1_public2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222?**
> body= **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact:
> \ >
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**8-11. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**12-15. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**16-19. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**20-21. SIP REFER request (from UE-1 to SCC AS)**
The UE-1 send SIP REFER request to SCC AS to request the media transfer from
UE-1 to UE-2.
Table 4.6.4.1.2.2.1-20: SIP REFER request (UE-1 to SCC AS)
> REFER sip:interUEtransfer\@sccas1.home1.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**223457**
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222?** body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m** %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: **cb03a0s09a2sdfglkj11111** ;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**22-23. SIP 202 (Accepted) response (from SCC AS to UE-1)**
SCC AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**24-27. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of sending the REFER.
**28-31. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**32-33. SIP NOTIFY request (from SCC AS to UE-1)**
SCC AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription to
the SIP REFER request results.
**34-35. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
**36-37. SIP INVITE request (from SCC AS to UE-2)**
Since the 20-21 SIP REFER request contains a Refer-to header field addressed
to UE-2 and the URI parameters, listing a video line which is transferred and
an audio line with port number set to zero which is not transferred, The SCC
AS sends a SIP INVITE request to the UE-2, to transfer the video media
component. In order to avoid to UE-2 to start sending video to the Remote UE,
the SCC AS adds an a line to sendonly in the SDP offer.
Table 4.6.4.1.2.2.1-36: SIP INVITE request (SCC AS to UE-2)
> INVITE
> sip:user1_public2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
> SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net;branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net;
>
> From: sip:interUEtransfer\@example.net;tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**38-39. SIP 200 (OK) response (from UE-2 to SCC AS)**
The target UE, UE-2, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC AS.
Table 4.6.4.1.2.2.1-38: SIP 200 (OK) response (UE-2 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**40-41. SIP ACK request (from SCC AS to UE-2)**
The SCC AS sends a SIP ACK request to the UE-2.
**42-43. SIP re-INVITE request (from SCC AS to UE-1)**
The SCC AS sends a SIP re-INVITE request to the UE-1 to hold the video media
session to be transferred.
Table 4.6.4.1.2.2.1-42: SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**44-45. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.2.1-44: SIP 200 (OK) response (UE-1 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1202 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**46-47. SIP ACK request (from SCC AS to UE-1)**
The SCC AS sends a SIP ACK request to the UE-1.
**48-50. SIP re-INVITE request (from SCC AS to remote UE)**
> The SCC AS sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.2.2.1-48: SIP INVITE request (SCC AS to remote UE)
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**51-53. SIP 200 (OK) response (from Remote UE to SCC AS)**
The Remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS.
Table 4.6.4.1.2.2.1-51: SIP 200 (OK) response (Remote UE to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**54-56. SIP ACK request (from SCC AS to Remote UE)**
The SCC AS sends a SIP ACK request to the Remote UE.
**57-58. SIP re-INVITE request (from SCC AS to UE-2)**
The SCC AS sends a SIP re-INVITE request to UE-2 to activate the video media
component.
Table 4.6.4.1.2.2.1-57: SIP INVITE request (SCC AS to UE-2)
> INVITE sip:user1_public2\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**59-60. SIP 200 (OK) response (from UE-2 to SCC AS)**
The UE-2 sends a SIP 200 (OK) response to the SCC AS.
Table 4.6.4.1.2.2.1-59: SIP 200 (OK) response (UE-2 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**61-62. SIP ACK request (from SCC AS to UE-2)**
The SCC AS sends a SIP ACK request to the UE-2.
**63-64. SIP re-INVITE request (from SCC AS to UE-1)**
The SCC AS sends a SIP re-INVITE request to the UE-1 to release the video
media component.
Table 4.6.4.1.2.2.1-63: SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**65-66. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.2.1-65: SIP 200 (OK) response (UE-1 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**67-68. SIP ACK request (from SCC AS to UE-1)**
The SCC AS sends a SIP ACK request to the UE-1.
**69-70. SIP NOTIFY request (from SCC AS to UE-1)**
The SCC AS sends a SIP NOTIFY request to the UE-1 to inform about success
status of transferring the media from UE-1 to the UE-2.
Editor\'s Note: The detail example of sipfrag is FFS.
**71-72. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
###### # 4.6.4.1.2.2.2 Different subscription
This subclause describes the scenario when the media flow is transferred from
UE-1 to UE-2 requested by UE-2. The flow diagram shows when UE-1 and UE-2
belong to the different subscription.
Media path exist between UE-1(123.45.67.89) and Remote UE(132.54.76.98).
UE-2(123.112.67.87) wants to pull the video media flow between UE-1 and
Remote-UE. After this procedure, collaborative session will be established.
Figure 4.6.4.1.2.2.2-1: Signalling flow for Media flow transfer initiated when
no collaborative session has been established
**1-2. UE-1 is in session with Remote UE**
There is a multimedia session comprising audio and video media between the
UE-1 and the Remote UE anchored at SCC AS serving UE-1.
**3\. UE-2 discovers the session of UE-1**
**4-10. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the local UE-1, UE-1 to
request the media transfer from UE-1 to UE-2.
Table 4.6.4.1.2.2.2-4: SIP REFER request (UE-2 to UE-1)
> REFER
> sip:user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**294756**
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ To=%3CinterUEtransfer%40example.net%3E%3BFrom=%3Csip:user1_public1%40home1.net%3BRefer-
> To=%3Csip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222?**
> body= **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> \ >
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**11-17. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**18-24. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**25-31. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**32-33. SIP REFER request (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends SIP REFER request to SCC AS serving UE-1 to request the media
transfer from UE-1 to UE-2.
Table 4.6.4.1.2.2.2-32: SIP REFER request (UE-1 to SCC AS serving UE-1)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**223457**
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To:
> \ body= **m** %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: **cb03a0s09a2sdfglkj11111** ;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**34-35. SIP 202 (Accepted) response (from SCC AS serving UE-1 to UE-1)**
SCC AS serving UE-1 sends a SIP 202 (Accepted) response to UE-1 as response to
the SIP REFER request.
**36-42. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of sending the REFER.
**43-49. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**50-51. SIP NOTIFY request (from SCC AS serving UE-1 to UE-1)**
SCC AS serving UE-1 sends a SIP NOTIFY request to UE-1 to notify implicit
subscription to the SIP REFER request results.
**52-53. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
**54-58. SIP INVITE request (from SCC AS serving UE-1 to UE-2)**
Since the 32-33 SIP REFER request contains a Refer-to header field addressed
to UE-2 and the URI parameters, listing a video line which is transferred and
an audio line with port number set to zero which is not transferred, the SCC-
AS serving UE-1 sends a SIP INVITE request to the UE-2, to transfer the video
media component. In order to avoid to UE-2 to start sending video to the
Remote UE, the SCC AS serving UE-1 adds an a line to sendonly in the SDP
offer.
Table 4.6.4.1.2.2.2-54: SIP INVITE request (SCC-AS serving UE-1 to UE-2)
> INVITE
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
> SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net;branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@example.net;tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**59-63. SIP 200 (OK) response (from UE-2 to SCC-AS serving UE-1)**
The target UE, UE-2, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC AS serving UE-1.
Table 4.6.4.1.2.2.2-59: SIP 200 (OK) response (UE-2 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**64-68. SIP ACK request (from SCC AS serving UE-1 to UE-2)**
The SCC AS sends a SIP ACK request to the UE-2.
**69-70. SIP re-INVITE request (from SCC AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1 to hold the
video media session to be transferred.
Table 4.6.4.1.2.2.2-69: SIP INVITE request (SCC AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**71-72. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.2.2-71: SIP 200 (OK) response (UE-1 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1202 RTP/AVP 98 99
>
> a=inactive
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**73-74. SIP ACK request (from SCC AS serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**75-77. SIP re-INVITE request (from SCC AS serving UE-1 to remote UE)**
> The SCC AS serving UE-1 sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.2.2.2-75: SIP INVITE request (SCC AS serving UE-1 to remote UE)
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**78-80. SIP 200 (OK) response (from Remote UE to SCC AS serving UE-1)**
The Remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
Table 4.6.4.1.2.2.2-78: SIP 200 (OK) response (Remote UE to SCC AS serving
UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**81-83. SIP ACK request (from SCC AS serving UE-1 to Remote UE)**
The SCC-AS serving UE-1 sends a SIP ACK request to the Remote UE.
**84-88. SIP re-INVITE request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP re-INVITE request to UE-2 to activate the
video media component.
Table 4.6.4.1.2.2.2-84: SIP INVITE request (SCC AS serving UE-1 to UE-2)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**89-93. SIP 200 (OK) response (from UE-2 to SCC AS serving UE-1)**
The UE-2 sends a SIP 200 (OK) response to the SCC AS.
Table 4.6.4.1.2.2.2-89: SIP 200 (OK) response (UE-2 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**94-98. SIP ACK request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-2.
**99-100. SIP re-INVITE request (from SCC AS serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP re-INVITE request to the UE-1 to release
the video media component.
Table 4.6.4.1.2.2.2-99: SIP INVITE request (SCC AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**101-102. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.2.2.2-101: SIP 200 (OK) response (UE-1 to SCC AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**103-104. SIP ACK request (from SCC AS serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**105-106. SIP NOTIFY request (from SCC AS serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP NOTIFY request to the UE-1 to inform about
success status of transferring the media from UE-1 to the UE-2.
Editor\'s Note: The detail example of sipfrag is FFS.
**107-108. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
###### 4.6.4.1.2.3 Alternative 3 (Based on SIP re-INVITE request)
The flow for this subclause is same with the flow in the subcluase 4.6.4.1.3.2
Alternative 3 (Based on SIP re-INVITE request) except that the SIP INVITE
request is used for steps 2 and 3 instead of SIP re-INVITE request.
##### 4.6.4.1.3 Media flows transfer initiated by a controllee UE of an
ongoing collaborative session
###### 4.6.4.1.3.1 Alternative 1 (REFER with media feature tag)
###### # 4.6.4.1.3.1.1 Same/Different subscription
This subclause describes the scenario when the Media flow is transferred from
Controller UE, UE-1 to Controllee UE, UE-2 requested by UE-2. The flow diagram
shows when UE-1 and UE-2 belong to the different subscription.
UE-1 (123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the Controller UE
and UE-2 is the Controllee UE. The call is anchored in the SCC AS-1
controlling the collaborative session. Prior to transfer the Media flow, UE-2
gets the dialog information such as the content type and port numbers on the
remote end. This is done by UE-2 having subscribed to dialog event package
between UE-1 and the SCC AS-1.
Figure 4.6.4.1.3.1.1-1: Signalling flow for Media flows transfer initiated by
a controllee UE of an ongoing collaborative session
**1\. UE-2 discovers the session of UE-1**
**2-6. SIP REFER request (from UE-2 to SCC AS serving UE-1)**
The SIP REFER request contains a Refer-To header field containing a URI of
Target UE, UE-2 and a body parameter containing an m line for audio to be
pulled with the port number set to the non-zero port numbers use in the SDP
parameter from the corresponding media descriptions as received during the
last successful SDP offer-answer exchange from the Remote UE. The SIP REFER
request also includes a Target-dialog header field containing the details of
the dialog for the existing session between UE-1 and Remote-UE.
Table 4.6.4.1.3.1.1-2 SIP REFER request (UE-2 to SCC AS-1 serving UE-1)
> REFER
> sip:user1_public1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=**294756**
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To:
> \ body=**m** %3Daudio%203000%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
>
> Accept-Contact:+g.3gpp.iut-xyz;explicit;require
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**7-11. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**12-16. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**17-21. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**22-26. SIP re-INVITE request (from SCC AS-1 serving UE-1 to UE-2)**
Since the 2-6 SIP REFER request contains a Refer-to header field addressed to
UE-2 and the URI paramaters, listing an audio line which is not currently
supported by UE-2, the SCC AS-1 realizes the procedure is for transferring the
media from that controller UE (UE-1) to UE-2. The SCC-AS-1 sends a SIP re-
INVITE request to the UE-2, to transfer the audio media component.
Table 4.6.4.1.3.1.1-22 SIP INVITE request (SCC AS-1 serving UE-1 to UE-2)
> INVITE
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222**
> SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net;branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:interUEtransfer\@example.net;tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**27-31. SIP 200 (OK) response (from UE-2 to SCC-AS-1 serving UE-1)**
The target UE, UE-2, acknowledges the SIP INVITE request by sending a SIP 200
(OK) response to the SCC AS serving UE-1.
Table 4.6.4.1.3.1.1-27 SIP 200 (OK) response (UE-2 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.87
>
> s=-
>
> c=123.23.45.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**32-36. SIP ACK request (from SCC AS-1 serving UE-1 to UE-2)**
The SCC AS-1 serving UE-1 sends a SIP ACK request to the UE-2.
**37-38. SIP re-INVITE request (from SCC AS-1 serving UE-1 to UE-1)**
The SCC AS-1 serving UE-1 sends a SIP re-INVITE request to the UE-1 to hold
the video media session to be transferred.
Table 4.6.4.1.3.1.1-37 SIP INVITE request (SCC AS-1 serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**39-40. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.3.1.1-39 SIP 200 (OK) response (UE-1 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1200 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**41-42. SIP ACK request (from SCC AS-1 serving UE-1 to UE-1)**
> The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**43-45. SIP re-INVITE request (from SCC AS-1 serving UE-1 to remote UE)**
> The SCC AS-1 serving UE-1 sends a SIP re-INVITE request to the remote UE.
Table 4.6.4.1.3.1.1-45 SIP INVITE request (SCC AS-1 serving UE-1 to remote UE)
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**46-48. SIP 200 (OK) response (from Remote UE to SCC AS-1 serving UE-1)**
The Remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS-1 serving UE-1.
Table 4.6.4.1.3.1.1-46 SIP 200 (OK) response (Remote UE to SCC AS-1 serving
UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**49-51. SIP ACK request (from SCC AS serving UE-1 to Remote UE)**
The SCC-AS serving UE-1 sends a SIP ACK request to the Remote UE.
**52-56. SIP re-INVITE request (from SCC AS serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP re-INVITE request to UE-2 to activate the
video media component.
Table 4.6.4.1.3.1.1-52 SIP INVITE request (SCC AS-1 serving UE-1 to UE-2)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-**222222222222** SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-61. SIP 200 (OK) response (from UE-2 to SCC AS-1 serving UE-1)**
The UE-2 sends a SIP 200 (OK) response to the SCC AS serving UE-1.
Table 4.6.4.1.3.1.1-57 SIP 200 (OK) response (UE-2 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj**22222**
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \ >
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.87
>
> s=-
>
> c=123.23.45.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**62-66. SIP ACK request (from SCC AS-1 serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-2.
**67-68. SIP re-INVITE request (from SCC AS-1 serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1 to release
the video media component.
Table 4.6.4.1.3.1.1-67 SIP INVITE request (SCC AS-1 serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**69-70. SIP 200 (OK) response (from UE-1 to SCC AS-1 serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.3.1.1-69 SIP 200 (OK) response (UE-1 to SCC AS-1 serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**71-72. SIP ACK request (from SCC AS-1 serving UE-1 to UE-1)**
The SCC AS serving UE-1 sends a SIP ACK request to the UE-1.
**73-77. SIP NOTIFY request (from SCC AS-1 serving UE-1 to UE-2)**
The SCC AS serving UE-1 sends a SIP NOTIFY request to the UE-2 to inform about
success status of transferring the media from UE-1 to the UE-2.
**78-82. SIP 200 (OK) response (from UE-2 to SCC AS-1 serving UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1 serving UE-1.
###### 4.6.4.1.3.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.4.1.3.2.1 Same subscription
This subclause describes the scenario when the Media flow is transferred from
Controller UE, UE-1 to Controllee UE, UE-2 requested by UE-2. The flow diagram
shows when UE-1 and UE-2 belong to the same subscription.
UE-1 (123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the Controller UE
and UE-2 is the Controllee UE. The call is anchored in the SCC AS. Prior to
transfer the Media flow, UE-2 gets the dialog information such as the content
type and port numbers on the remote end. This is done by UE-2 having
subscribed to dialog event package between UE-1 and the SCC AS.
Figure 4.6.4.1.3.2.1-1: Signalling flow for Media flows transfer initiated by
a controllee UE of an ongoing collaborative session
> NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
> signalling flow.
**1\. UE-2 discovers the sessions of UE-1**
**2-5. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request the media transfer from UE-1 to UE-2.
Table 4.6.4.1.3.2.1-2: SIP REFER request (UE-2 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ interUEtransfer%40example.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user1_public2**\@home1.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222**?body** = **m**
> %3Daudio%203000%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E%3B**
> Target-dialog= cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-
> tag=11928**>**
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**6-9. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**10-13. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**14-17. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**18-19. SIP REFER request (from UE-1 to SCC AS)**
The UE-1 sends SIP REFER request to SCC AS to request the media transfer from
UE-1 to UE-2.
Table 4.6.4.1.3.2.1-18: SIP REFER request (UE-1 to SCC-AS)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222?body= **m**
> %3Daudio%203000%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**20-21. SIP 202 (Accepted) response (from SCC AS to UE-1)**
SCC-AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**22-25. SIP NOTIFY request (from UE-1to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of the inter-UE transfer.
**26-29. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**30-31. SIP NOTIFY request (from SCC AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription
to the SIP REFER request results.
**32-33. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS.
**34-35. SIP re-INVITE request (from SCC-AS to UE-2)**
Since the message 18-19 contains a Refer-to header field addressed to UE-2 and
the URI parameters, listing an audio line which is not currently supported by
UE-2, the SCC AS realizes the procedure is for transferring the media from
that controller UE (UE-1) to UE-2. The SCC-AS sends a SIP re-INVITE request to
the UE-2, to transfer the audio media component.
Table 4.6.4.1.3.2.1-34: SIP INVITE request (SCC-AS to UE-2)
> INVITE sip:user1_public2\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net;
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj22222
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**36-37. SIP 200 (OK) response (from UE-2 to SCC-AS)**
The target UE, UE-2, acknowledges the SIP re-INVITE request by sending a SIP
200 (OK) response to the SCC-AS.
Table 4.6.4.1.3.2.1-36: SIP 200 (OK) response (UE-2 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag = 36527
>
> From: sip:interUEtransfer\@example.net; tag = 27365
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**38-39. SIP ACK request (from SCC-AS to target UE; UE-2)**
The SCC-AS sends a SIP ACK request to the UE-2.
**40-41. SIP re-INVITE request (from SCC-AS to controller UE; UE-1)**
Table 4.6.4.1.3.2.1-40: SIP INVITE request (SCC-AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**42-43. SIP 200 (OK) response (from controller UE, UE-1 to SCC-AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.3.2.1-42: SIP 200 (OK) response (UE-1 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1200 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**44-45. SIP ACK request (from SCC-AS to controller UE; UE-1)**
The SCC-AS sends a SIP ACK request to the UE-1.
**46-48. SIP re-INVITE request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.1.3.2.1-46: SIP INVITE request (SCC-AS to remote UE)**
> INVITE sip:userR_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**49-51. SIP 200 (OK) response (from remote UE to SCC-AS)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC-AS.
**Table 4.6.4.1.3.2.1-49: SIP 200 (OK) response (remote UE to SCC-AS)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**52-54. SIP ACK request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP ACK request to the remote UE.
**55-56. SIP re-INVITE request (from SCC-AS to controllee UE; UE-2)**
The SCC-AS sends a SIP re-INVITE request to the controllee UE.
**Table 4.6.4.1.3.2.1-55: SIP INVITE request (SCC-AS to UE-2)**
> INVITE sip:user1_public2\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public2\@home1.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj22222
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-58. SIP 200 (OK) response (from UE-2 to SCC-AS)**
The UE-2 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.3.2.1-57: SIP 200 (OK) response (UE-2 to SCC-AS)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public2\@home1.net; tag = 36527
>
> From: sip:interUEtransfer\@example.net; tag = 27365
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**59-60. SIP ACK request (from SCC-AS to UE-2)**
The SCC-AS sends a SIP ACK request to the UE-2.
**61-62. SIP re-INVITE request (from SCC-AS to UE-1)**
The SCC-AS sends a SIP re-INVITE request to the UE-1.
**Table 4.6.4.1.3.2.1-61: SIP INVITE request (SCC-AS to UE-1)**
> INVITE sip:user1_public1\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public1\@home1.net; tag= 11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> Cseq: 222 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**63-64. SIP 200 (OK) response (from UE-1 to SCC-AS)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.3.2.1-63: SIP 200 (OK) response (UE-1 to SCC-AS)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public1\@home1.net; tag= 11928
>
> From: sip:userR_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**65-66. SIP ACK request (from SCC-AS to UE-1)**
The SCC-AS sends a SIP ACK request to the UE-1.
**67-68. SIP NOTIFY request (from SCC-AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to the UE-1 to inform about the success
status of the inter-UE transfer from UE-1 to UE-2.
**69-70. SIP 200 (OK) response (from UE-1 to SCC-AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
###### # 4.6.4.1.3.2.2 Different subscription
This subclause describes the scenario when the Media flow is transferred from
Controller UE, UE-1 to Controllee UE-2 requested by UE-2. The flow diagram
shows when UE-1 and UE-2 belong to the different subscription.
UE-1 (123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the Controller UE
and UE-2 is the Controllee UE. The call is anchored in the SCC AS of UE-1.
Prior to transfer the Media flow, UE-2 gets the dialog information such as the
content type and port numbers on the remote end. This is done by UE-2 having
subscribed to dialog event package between UE-1 and the SCC AS.
**Figure 4.6.4.1.3.2.2-1: Signalling flow for Media flows transfer initiated
by a controllee UE of an ongoing collaborative session**
> NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
> signalling flow.
**1\. UE-2 discovers the sessions of UE-1**
**2-8. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request the media transfer from UE-1 to UE-2.
Table 4.6.4.1.3.2.2-2: SIP REFER request (UE-2 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [2222::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ interUEtransfer%40example.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user2_public1**\@home2.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222**?body** = **m**
> %3Daudio%203000%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E%3B**
> Target-dialog=cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-
> tag=11928**>**
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**9-15. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**16-22. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**23-29. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**30-31. SIP REFER request (from UE-1 to SCC AS serving UE-1)**
The UE-1 sends SIP REFER request to SCC AS serving UE-1 to request the media
transfer from UE-1 to UE-2.
Table 4.6.4.1.3.2.2-30: SIP REFER request (UE-1 to SCC-AS serving UE-1)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To:
> \ **m** %3Daudio%203000%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user2_public1\@home2.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**32-33. SIP 202 (Accepted) response (from SCC AS serving UE-1 to UE-1)**
SCC-AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**34-40. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of sending the REFER.
**41-47. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**48-49. SIP NOTIFY request (from SCC AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP NOTIFY request to UE-1 to notify implicit
subscription to the SIP REFER request results.
**50-51. SIP 200 (OK) response (from UE-1 to SCC AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS serving UE-1.
**52-56. SIP re-INVITE request (from SCC-AS serving UE-1 to UE-2)**
Since the message 30-31 contains a Refer-to header field addressed to UE-2 and
the URI parameters, listing an audio line which is not currently supported by
UE-2, the SCC AS serving UE-1 realizes the procedure is for transferring the
media from that controller UE (UE-1) to UE-2. The SCC-AS serving UE-1 sends a
SIP re-INVITE request to the UE-2, to transfer the audio media component.
Table 4.6.4.1.3.2.2-52: SIP INVITE request (SCC-AS serving UE-1 to UE-2)
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj22222
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-61. SIP 200 (OK) response (from UE-2 to SCC-AS serving UE-1)**
The target UE, UE-2, acknowledges the SIP re-INVITE request by sending a SIP
200 (OK) response to the SCC-AS serving UE-1.
Table 4.6.4.1.3.2.2-57: SIP 200 (OK) response (UE-2 to SCC-AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 36527
>
> From: sip:interUEtransfer\@example.net; tag = 27365
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**62-66. SIP ACK request (from SCC-AS serving UE-1 to target UE; UE-2)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-2.
**67-68. SIP re-INVITE request (from SCC-AS serving UE-1 to controller UE;
UE-1)**
Table 4.6.4.1.3.2.2-67: SIP INVITE request (SCC-AS serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**69-70. SIP 200 (OK) response (from controller UE, UE-1 to SCC-AS serving
UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
Table 4.6.4.1.3.2.2-69: SIP 200 (OK) response (UE-1 to SCC-AS serving UE-1)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 1200 RTP/AVP 97
>
> a=inactive
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**71-72. SIP ACK request (from SCC-AS serving UE-1 to controller UE; UE-1)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-1.
**73-75. SIP re-INVITE request (from SCC-AS serving UE-1 to remote UE)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.1.3.2.2-73: SIP INVITE request (SCC-AS serving UE-1 to remote
UE)**
> INVITE sip:userR_public1\@homeR.net SIP/2.0
>
> Via:
>
> To: sip:userR_public1\@homeR.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**76-78. SIP 200 (OK) response (from remote UE to SCC-AS serving UE-1)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC-AS serving UE-1.
**Table 4.6.4.1.3.2.2-76: SIP 200 (OK) response (remote UE to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:userR_public1\@homeR.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**79-81. SIP ACK request (from SCC-AS serving UE-1 to remote UE)**
The SCC-AS serving UE-1 sends a SIP ACK request to the remote UE.
**82-86. SIP re-INVITE request (from SCC-AS serving UE-1 to controllee UE;
UE-2)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the controllee UE.
**Table 4.6.4.1.3.2.2-82: SIP INVITE request (SCC-AS serving UE-1 to UE-2)**
> INVITE sip:user2_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user2_public1\@home2.net; tag=36527
>
> From: sip:interUEtransfer\@example.net; tag=27365
>
> Call-ID: cb03a0s09a2sdfglkj22222
>
> Cseq: 112 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**87-91. SIP 200 (OK) response (from controllee UE, UE-2 to SCC-AS serving
UE-1)**
The UE-2 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.3.2.2-87: SIP 200 (OK) response (UE-2 to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user2_public1\@home2.net; tag = 36527
>
> From: sip:interUEtransfer\@example.net; tag = 27365
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> c=123.112.67.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**92-96. SIP ACK request (from SCC-AS serving UE-1 to UE-2)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-2.
**97-98. SIP re-INVITE request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP re-INVITE request to the UE-1.
**Table 4.6.4.1.3.2.2-97: SIP INVITE request (SCC-AS serving UE-1 to UE-1)**
> INVITE sip:user1_public1\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.example.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public1\@home1.net; tag= 11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> Cseq: 222 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**99-100. SIP 200 (OK) response (from UE-1 to SCC-AS serving UE-1)**
The UE-1 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.1.3.2.2-99: SIP 200 (OK) response (UE-1 to SCC-AS serving
UE-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public1\@home1.net; tag= 11928
>
> From: sip:userR_public1\@homeR.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**101-102. SIP ACK request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP ACK request to the UE-1.
**103-104. SIP NOTIFY request (from SCC-AS serving UE-1 to UE-1)**
The SCC-AS serving UE-1 sends a SIP NOTIFY request to the UE-1 to inform about
the success status of the inter-UE transfer from UE-1 to UE-2.
**105-106. SIP 200 (OK) response (from UE-1 to SCC-AS serving UE-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS serving UE-1.
###### 4.6.4.1.3.3 Alternative 3 (Based on SIP re-INVITE request)
This subclause describes the scenario when the Media flow is transferred from
controller UE, UE-1 to controllee UE, UE-2 requested by UE-2. The flow diagram
shows when UE-1 and UE-2 belong to the same subscription.
UE-1 (123.45.67.89) and UE-2 (123.112.67.87) are included in a Collaborative
Session with the remote UE (132.54.76.98), in which UE-1 is the controller UE
and UE-2 is the controllee UE. The call is anchored in the SCC AS controlling
the collaborative session. Prior to transfer the Media flow, UE-2 gets the
dialog information such as the content type and port numbers on the remote
end. This is done by UE-2 having subscribed to dialog event package between
UE-1 and the SCC AS.
Figure 4.6.4.1.3.3-1: Inter UE Transfer initiated by controllee UE in ongoing
Collaborative Session
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1\. UE-2 fetches the dialog information of UE-1 from SCC AS and decides to
transfer the media-A (audio) from UE-1 to UE-2.**
**2-3. SIP re-INVITE request (UE-2 toIntermediate IM CN subsystem entities)**
The UE-2 sends SIP re-INVITE request to SCC AS.
Table 4.6.4.1.3.3-2: SIP INVITE request (**UE-2 to Intermediate IM CN
subsystem entities**)
> INVITE sip:interUEtransfer\@sccas1.home1.net; SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:eee]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \;tag=756430
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 INVITE
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Accept-Contact:+g.3gpp.iut-xyz;explicit;require
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.87
>
> s=-
>
> c=123.23.45.87
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**m=video 1302 RTP/AVP 98:** The video media is transferred from controller UE
to controllee UE.
**4-5. SIP re-INVITE request (SCC AS to UE-1)**
The SCC AS sends the SIP re-INVITE request to UE-1 to hold the session.
Table 4.6.4.1.3.3-4 SIP INVITE request (SCC AS to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:user3_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> a=sendonly
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 0 RTP/AVP 98 99
**6-7. SIP 200 (OK) response to the SIP re-INVITE request (UE-1 to SCC AS)**
The UE-1 responds with SIP 200 (OK) to the SIP re-INVITE request.
**8-9. SIP ACK request (SCC AS to UE-1)**
The SCC AS sends the SIP ACK request to UE-1.
**10-11. SIP re-INVITE request (SCC AS to UE-3)**
The SCC sends the SIP re-INVITE request to the remote UE-3 to update the
session.
Table 4.6.4.1.3.3-10 SIP INVITE request (SCC AS to remote UE)
> INVITE sip:user3_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:user3_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.112.67.87
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**12-13. SIP 200 (OK) response to the SIP re-INVITE request (UE-3 to SCC AS)**
The UE-3 responds with SIP 200 (OK) response to the SCC AS.
Table 4.6.4.1.3.3-12 SIP 200 (OK) response (UE-3 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:user3_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**14-15. SIP 200 (OK) response to the SIP re-INVITE request (SCC AS to UE-2)**
After successful media transfer, the SCC AS responds with SIP 200 (OK)
response to UE-2.
**16-17. SIP ACK request (UE-2 to SCC AS)**
The UE-2 sends the SIP ACK request to SCC AS.
**18-19.** **SIP ACK request (SCC AS to UE-3)**
The SCC AS sends the SIP ACK request to UE-3.
**20-21. SIP re-INVITE request (SCC-AS to UE-1)**
The SCC-AS updates the access leg on controller UE-1.
Table 4.6.4.1.3.3-20 SIP INVITE request (SCC AS-1 serving UE-1 to UE-1)
> INVITE sip:user1_public1\@home1.net**;gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;Tag=11928
>
> From: sip:user3_public1\@home2.net; tag=27364
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@example.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**22-23. SIP 200 (OK) response to re-INVITE request (UE-1 to SCC-AS)**
After successful media update, UE-1 sends the SIP 200 (OK) reponse towards
SCC-AS.
Table 4.6.4.1.3.3-22 SIP 200 (OK) response (UE-1 to SCC AS)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>; +g.3gpp.iut-controller
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> c=123.45.67.89
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 0 RTP/AVP 98 99
**24-25. SIP ACK request (SCC-AS to UE-1)**
The SCC AS sends the SIP ACK request to UE-1.
##### 4.6.4.1.4 Inter-UE transfer solicited by a target UE without prior
information about the existing session
###### 4.6.4.1.4.1 Alternative 1 (Based on "reg" event package using a Contact
header)
###### # 4.6.4.1.4.1.1 Same/Different subscription
This subclause describes the scenario when the Media flow is transferred from
UE-1 (123.45.67.89) to UE-2 (123.112.67.87) by solicitation of UE-2 when the
UE-2 does not have information about ongoing session of UE-1.
The call is anchored in the SCC AS. Prior to transfer the Media flow, UE-2
does not have any information such as the media type and port numbers on the
remote end.
Figure 4.6.4.1.4.1.1-1: Signalling flow for Inter-UE transfer solicited by a
target UE without prior information about the existing session
**1\. UE-1 discovers potential target UEs**
In order to discover the availability and capabilities of potential target UEs
for inter UE transfer, UE-1 follows the procedures as described in 3GPP TS
24.237 [2], subclause 14.2.
**2\. User requests to transfer a video to UE-2**
Because the target UE, UE-2, does not have any prior information about the
existing session, it is needed for user to interact with the target UE, UE-2.
When the user interacts with the target UE, UE-2, the user provides the
following information:
IUT request: IUT request indicates that the target UE, UE-2, solicits the IUT
of a video flow.
Media owner: Media owner indicates the SIP URI of UE-1 which has the video
session requested for IUT by the target UE, UE-2.
Media: Media indicates media type that is transferred to the target UE, UE-2.
Service: Service indicates the application service which includes media
session that is transferred to the target UE, UE-2.
**3\. SIP re-REGISTER request (from UE-2 to IMS Entities)**
After performing the user interaction, the target UE, UE-2, sends the re-
REGISTER request towards IMS Entities. The Contact header filed should include
information for solicitation of IUT and the relevant values which are provided
by User interaction in step 2 according to IETF RFC 3261 [20]. This request is
sent to the same IMS Entities with which the UE initially registered.
Table 4.6.4.1.4.1.1-3 SIP REGISTER request (UE-2 to IMS Entities)
> REGISTER sip:registrar.home1.net SIP/2.0
>
> Via: SIP/2.0/UDP 123.112.67.87;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> P-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11
>
> From: \;tag=4fa3
>
> To: \
>
> Contact: \; reg-id=1;
> +g.3gpp.icsi-ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\";
> +g.3gpp.ics=\"principal\"; +g.3gpp.iut.solicit; requested-
> ue=\"sip:user1_public1\@home1.net\"; media-type=\"video\"; service-
> type=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.mmtel\"; expires=3600
>
> Call-ID: apb03a0s09dkjdfglkj49111
>
> Authorization:
>
> Security-Verify:
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> CSeq: 2 REGISTER
>
> Supported: path, outbound, gruu
>
> Content-Length: 0
**4\. SIP 200 (OK) response (IMS Entities to UE-2)**
The IMS Entities (S-CSCF) sends a SIP 200 (OK) response to the target UE,
UE-2, indicating that reregistration was successful.
**5\. SIP NOTIFY request (IMS Entities to UE-1)**
The IMS Entities (S-CSCF) sends a first NOTIFY request towards the requested
UE, UE-1, in order to inform the UE-1 about the registration status of the
target UE, UE-2.
The Route header is constructed from the Record-Route header as constructed
during subscription.
**Table 4.6.4.1.4.1.1-5: SIP NOTIFY request (IMS Entities to UE-1)**
> NOTIFY sip:user1_public1\@home1.net SIP/2.0
>
> Via:
>
> Max-Forwards: 70
>
> From: \;tag=151170
>
> To: \;tag=31415
>
> Call-ID:
>
> CSeq: 42 NOTIFY
>
> Contact:
>
> Event: reg
>
> Content-Type: application/reginfo+xml
>
> Content-Length: (...)
>
> \
>
> \
> version=\"1\" state=\"full\">
>
> \ state=\"active\">
>
> \
>
> \sip:123.112.67.87\
>
> \
>
> \ ue\">sip:user1_public1\@home1.net\
>
> \video\
>
> \urn:urn-7:3gpp-service.ims.icsi.mmtel
>
> \
>
> \
>
> \
>
> \
**6\. SIP 200 (OK) response (UE-1 to IMS Entities)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the IMS Entities.
**7\. UE-1 decides Inter-UE transfer**
After receiving the SIP NOTIFY containing solicit IUT request, the resuested
UE, UE-1, decides whwther to initiate the IUT solicited by the target UE,
UE-2, or not.
**8\. Relevant IUT procedures**
If the UE-1 decides to accept the IUT solicited by the target UE, UE-1, then
the UE-1 initiates the relevant IUT procedures as decribed in 3GPP TS 24.237
[6], subclause 15, 16, and 17.
##### 4.6.4.2.2 Controllee UE initiated addition of media to another
controllee UE
###### 4.6.4.2.2.1 Alternative 1 (SIP REFER with media feature tag)
###### # 4.6.4.2.2.1.1 Same/Different subscription
This subclause describes the scenario when controllee UE, UE-2 initiate
addition of a media to another controllee UE, UE-3. The flow diagram shows
when UE-1and UE-2, UE-3 belong to the different subscription.
Note: When UE-1and UE-2, UE-3 belong to the same subscription, Serving SCC AS
of UE-1, UE-2 and UE-3 are same.
UE-1(123.45.67.89), UE-2 (123.112.67.87) and UE-3(123.23.45.67) are included
in a Collaborative Session with the remote UE (132.54.76.98), in which UE-1 is
the controller UE and UE-2 and UE-3 are the controllee UEs. The Collaborative
Session is controlled by SCC AS-1. Media paths exist between UE-2 and remote
UE(audio) and between UE-3 and remote UE(video). The UE-2(123.23.45.67) wants
to add another media flow between UE-3 and remote UE(video).
Figure 4.6.4.2.2.1.1-1: Signalling flow for controllee UE initiated addition
of media to another controllee UE
**1\. UE-2 discovers the information of the collaborative session.**
**2-6. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER request to the controller UE, UE-1 to request
addition of media to UE-3. The SIP REFER request is finally routed to the SCC
AS-1 serving UE-1.
Table 4.6.4.2.2.1.1-2: SIP REFER request (UE-2 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333**?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E**
> m%3Dvideo%209%20RTP%2FAVP%2098%2099**>**
>
> Referred-By: sip:user2_public1\@home2.net
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Contact:
> sip:user2_public1@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-222222222222
>
> Referred-By: sip:user2_public1\@home2.net
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**7-11. SIP 202 (Accepted) response (from SCC AS-1 to UE-2)**
SCC AS-1 serving UE-1 sends a SIP 202 (Accepted) response to UE-2 as response
to the SIP REFER request.
**12-16. SIP NOTIFY request (from SCC AS-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**17-21. SIP 200 (OK) response (from UE-2 to SCC AS-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
**22-26. SIP re-INVITE request (from SCC AS-1 to UE-3)**
Since the message 2-6 contains a Refer-to header field addressed to UE-3 and
the URI parameters, listing an audio line which is not currently supported by
UE-3, the SCC AS realizes the procedure is for adding the media to UE-3. The
SCC AS-1 sends a SIP re-INVITE request to the UE-3, to add the video media
component.
Table 4.6.4.2.2.1.1-22: SIP INVITE request (SCC AS-1 to UE-2)
> INVITE sip:user3_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas1.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user3_public1\@home2.net;
>
> From: sip:interUEtransfer\@home.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 9 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**27-31. SIP 200 (OK) response (from UE-3 to SCC AS-1)**
The target UE, UE-3, acknowledges the SIP re-INVITE request by sending a SIP
200 (OK) response to the SCC AS-1.
Table 4.6.4.2.2.1.2-36: SIP 200 (OK) response (UE-2 to SCC AS-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user3_public1\@home2.net; tag = 24861
>
> From: sip:interUEtransfer\@home.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> a=recvonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**32-36. SIP ACK request (from SCC AS-1 to UE-3)**
The SCC AS-1 sends a SIP ACK request to the UE-3.
**37-39. SIP re-INVITE request (from SCC AS-1 to remote UE)**
The SCC AS-1 sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.2.2.1.1-37 SIP INVITE request (SCC AS-1 to remote UE)**
> INVITE sip:user4_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:user4_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**40-42. SIP 200 (OK) response (from remote UE to SCC AS-1)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS -1.
**Table 4.6.4.2.2.1.1-40: SIP 200 (OK) response (remote UE to SCC AS-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:user4_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**43-45. SIP ACK request (from SCC AS-1 to remote UE)**
The SCC AS-1 sends a SIP ACK request to the remote UE.
**46-50. SIP re-INVITE request (from SCC AS-1 to UE-3)**
The SCC AS-1 sends a SIP re-INVITE request to the controllee UE.
**Table 4.6.4.2.2.1.1-46: SIP INVITE request (SCC AS-1 to UE-3)**
> INVITE sip:user3_public1\@home2.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user3_public1\@home2.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**51-55. SIP 200 (OK) response (from UE-3 to SCC AS-1)**
The UE-3 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.2.2.1.1-51: SIP 200 (OK) response (UE-3 to SCC AS-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user3_public1\@home3.net; tag = 24861
>
> From: sip:interUEtransfer\@home.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**56-60. SIP ACK request (from SCC AS-1 to UE-3)**
The SCC AS-1 sends a SIP ACK request to the UE-3.
**61-65. SIP NOTIFY request (from SCC AS-1 to UE-2)**
The SCC AS-1 sends a SIP NOTIFY request to the request UE,UE-2 to inform about
the success status of adding media to UE-3.
**66-70. SIP 200 (OK) response (from UE-2 to SCC AS-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
###### 4.6.4.2.2.2 Alternative 2 (SIP REFER with method= REFER)
###### # 4.6.4.2.2.2.1 Same subscription
This subclause describes the scenario when controllee UE, UE-2 initiate
addition of a media to another controllee UE, UE-3. The flow diagram shows
when UE-1, UE-2, and UE-3 belong to the same subscription.
UE-1(123.45.67.89), UE-2 (123.112.67.87) and UE-3(123.23.45.67) are included
in a Collaborative Session with the remote UE (132.54.76.98), in which UE-1 is
the controller UE and UE-2 and UE-3 are the controllee UEs. Media paths exist
between UE-2 and remote UE(audio) and between UE-3 and remote UE(video). The
UE-2(123.23.45.67) wants to add another media flow between UE-3 and remote
UE(video).
Figure 4.6.4.2.2.2.1-1: Signalling flow for controllee UE initiated addition
of media to another controllee UE
**1\. UE-2 discovers the sessions of UE-1.**
**2-5. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request addition of media to UE-3.
Table 4.6.4.2.2.2.1-2: SIP REFER request (UE-2 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ To=%3C** interUEtransfer%40sccas1.home1.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user1_public3**\@home1.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333**?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E**
> m%3Dvideo%209%20RTP%2FAVP%2098%2099**%3E%3B** Target-dialog=
> cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-tag=11928**>**
>
> Referred-By: sip:user1_public2\@home1.net
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**6-9. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**10-13. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**14-17. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS.
**18-19. SIP REFER request (from UE-1 to SCC AS)**
The UE-1 sends SIP REFER request to SCC AS to request addition of the media to
UE-3.
Table 4.6.4.2.2.2.1-18: SIP REFER request (UE-1 to SCC-AS)
> REFER sip:interUEtransfer@ sccas1.home1.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333?body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099%0D**m**
> %3Dvideo%209%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public2\@home1.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**20-21. SIP 202 (Accepted) response (from SCC AS to UE-1)**
SCC-AS sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**22-25. SIP NOTIFY request (from UE-1to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of the inter-UE transfer.
**26-29. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**30-31. SIP NOTIFY request (from SCC AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to UE-1 to notify implicit subscription
to the SIP REFER request results.
**32-33. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC-AS.
**34-35. SIP re-INVITE request (from SCC-AS to UE-3)**
Since the message 18-19 contains a Refer-to header field addressed to UE-3 and
the URI parameters, listing an audio line which is not currently supported by
UE-3, the SCC AS realizes the procedure is for adding the media to UE-3. The
SCC-AS sends a SIP re-INVITE request to the UE-3, to add the video media
component.
Table 4.6.4.2.2.2.1-34: SIP INVITE request (SCC-AS to UE-2)
> INVITE sip:user1_public3\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home1.net;
>
> From: sip:interUEtransfer@ sccas1.home.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 9 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**36-37. SIP 200 (OK) response (from UE-3 to SCC-AS)**
The target UE, UE-3, acknowledges the SIP re-INVITE request by sending a SIP
200 (OK) response to the SCC-AS.
Table 4.6.4.2.2.2.1-36: SIP 200 (OK) response (UE-3 to SCC-AS)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home1.net; tag = 24861
>
> From: sip:interUEtransfer@ sccas1.home.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> a=recvonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**38-39. SIP ACK request (from SCC-AS to target UE; UE-3)**
The SCC-AS sends a SIP ACK request to the UE-3.
**40-42. SIP re-INVITE request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.2.2.2.1-40 SIP INVITE request (SCC-AS to remote UE)**
> INVITE sip:user4_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:user4_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**43-45. SIP 200 (OK) response (from remote UE to SCC-AS)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC-AS.
**Table 4.6.4.2.2.2.1-43: SIP 200 (OK) response (remote UE to SCC-AS)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:user4_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**46-48. SIP ACK request (from SCC-AS to remote UE)**
The SCC-AS sends a SIP ACK request to the remote UE.
**49-50. SIP re-INVITE request (from SCC-AS to controllee UE; UE-3)**
The SCC-AS sends a SIP re-INVITE request to the controllee UE, UE-3.
**Table 4.6.4.2.2.2.1-49: SIP INVITE request (SCC-AS to UE-3)**
> INVITE sip:user1_public3\@home1.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home1.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**51-52. SIP 200 (OK) response (from UE-3 to SCC-AS)**
The UE-3 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.2.2.1.1-51: SIP 200 (OK) response (UE-3 to SCC-AS)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home1.net; tag = 24861
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.87
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**53-54. SIP ACK request (from SCC-AS to UE-3)**
The SCC-AS sends a SIP ACK request to the UE-3.
**55-56. SIP NOTIFY request (from SCC-AS to UE-1)**
The SCC-AS sends a SIP NOTIFY request to the UE-1 to inform about the success
status of adding media to UE-3.
**57-58. SIP 200 (OK) response (from UE-1 to SCC-AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
###### # 4.6.4.2.2.2.2 Different subscription
This subclause describes the scenario when controllee UE, UE-2 initiate
addition of a media to another controllee UE, UE-3. The flow diagram shows
when UE-1and UE-2, UE-3 belong to the different subscription.
UE-1(123.45.67.89), UE-2 (123.112.67.87) and UE-3(123.23.45.67) are included
in a Collaborative Session with the remote UE (132.54.76.98), in which UE-1 is
the controller UE and UE-2 and UE-3 are the controllee UEs. The Collaborative
Session is controlled by SCC AS-1. Media paths exist between UE-2 and remote
UE(audio) and between UE-3 and remote UE(video). The UE-2(123.23.45.67) wants
to add another media flow between UE-3 and remote UE(video).
Figure 4.6.4.2.2.2.2-1: Signalling flow for controllee UE initiated addition
of media to another controllee UE -
**1\. UE-2 discovers the information of the collaborative session.**
**2-8. SIP REFER request (from UE-2 to UE-1)**
The UE-2 sends SIP REFER (referred REFER) request to the controller UE, UE-1
to request addition of media to UE-3.
Table 4.6.4.2.2.2.2-2: SIP REFER request (UE-2 to UE-1)
> REFER sip:user1_public1\@home1.net;**gr=**
> urn:uuid:f81d4fae-7dec-11d0-1111-111111111111 SIP/2.0
>
> Via: SIP/2.0/UDP
> [3333::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=294756
>
> Call-ID: Asdasd23123366
>
> Cseq: 4897924 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ interUEtransfer%home.net%3E%3B**From=%3Csip:**
> user1_public1**%40home1.net%3B** Refer-To=%3C**sip:**
> user1_public3**\@home1.net%3B**
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333**?body** = **m**
> %3Daudio%200%20RTP%2FAVP%97%0Dm%3Dvideo%203002%20RTP%2FAVP%2098%2099**%3E**
> m%3Dvideo%209%20RTP%2FAVP%2098%2099**%3E%3B** Target-dialog=
> cb03a0s09a2sdfglkj11111%3Bremote-tag=27364%3Blocal-tag=11928**>**
>
> Referred-By: sip:user1_public2\@home2.net
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Contact:
> \
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**9-15. SIP 202 (Accepted) response (from UE-1 to UE-2)**
UE-1 sends a SIP 202 (Accepted) response to UE-2 as response to the SIP REFER
request.
**16-22. SIP NOTIFY request (from UE-1 to UE-2)**
The UE-1 sends a SIP NOTIFY request to UE-2 to notify implicit subscription to
the SIP REFER request results.
**23-29. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
**30-31. SIP REFER request (from UE-1 to SCC AS)**
The UE-1 sends SIP REFER request to SCC AS to request addition of the media to
UE-3.
Table 4.6.4.2.2.2.2-30: SIP REFER request (UE-1 to SCC AS-1)
> REFER sip:interUEtransfer\@home.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [1111::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> To: \
>
> From: \;tag=223457
>
> Call-ID: Asdasd23123377
>
> Cseq: 112 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \;
>
> Refer-To: \ gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333?body= **m**
> %3Daudio%200%20RTP%2FAVP%97%0D**m**
> %3Dvideo%203002%20RTP%2FAVP%2098%2099%0D**m**
> %3Dvideo%209%20RTP%2FAVP%2098%2099>
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj11111;remote-tag=27364;local-tag=11928
>
> Referred-By: sip:user1_public2\@home2.net
>
> Contact: \ urn:uuid:f81d4fae-7dec-11d0-1111-111111111111>
>
> Accept: application/sdp, message/sipfrag
>
> Content-Length: 0
**32-33. SIP 202 (Accepted) response (from SCC AS to UE-1)**
SCC AS-1 sends a SIP 202 (Accepted) response to UE-1 as response to the SIP
REFER request.
**34-40. SIP NOTIFY request (from UE-1to UE-2)**
The UE-1 sends a SIP NOTIFY request to the UE-2 to inform about the success
status of the inter-UE transfer.
**41-47. SIP 200 (OK) response (from UE-2 to UE-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the UE-1.
**48-49. SIP NOTIFY request (from SCC AS to UE-1)**
The SCC AS-1 sends a SIP NOTIFY request to UE-1 to notify implicit
subscription to the SIP REFER request results.
**50-51. SIP 200 (OK) response (from UE-1 to SCC AS)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS-1.
**52-56. SIP re-INVITE request (from SCC AS-1 to UE-3)**
Since the message 18-19 contains a Refer-to header field addressed to UE-3 and
the URI parameters, listing an audio line which is not currently supported by
UE-3, the SCC AS realizes the procedure is for adding the media to UE-3. The
SCC AS-1 sends a SIP re-INVITE request to the UE-3, to add the video media
component.
Table 4.6.4.2.2.2.2-52: SIP INVITE request (SCC AS-1 to UE-2)
> INVITE sip:user1_public3\@home3.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home3.net;
>
> From: sip:interUEtransfer\@home.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 115 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 9 RTP/AVP 98 99
>
> a=sendonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**57-61. SIP 200 (OK) response (from UE-3 to SCC AS-1)**
The target UE, UE-3, acknowledges the SIP re-INVITE request by sending a SIP
200 (OK) response to the SCC AS-1.
Table 4.6.4.2.2.2.2-57: SIP 200 (OK) response (UE-2 to SCC AS-1)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home3.net; tag = 24861
>
> From: sip:interUEtransfer\@home.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> a=recvonly
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**62-66. SIP ACK request (from SCC AS-1 to target UE; UE-3)**
The SCC AS-1 sends a SIP ACK request to the UE-3.
**67-69. SIP re-INVITE request (from SCC AS-1 to remote UE)**
The SCC AS-1 sends a SIP re-INVITE request to the remote UE.
**Table 4.6.4.2.2.2.2-67 SIP INVITE request (SCC AS-1 to remote UE)**
> INVITE sip:user4_public1\@home2.net SIP/2.0
>
> Via:
>
> To: sip:user4_public1\@home2.net;tag=27364
>
> From: sip:user1_public1\@home1.net;tag=11928
>
> Call-ID: cb03a0s09a2sdfglkj11111
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.112.67.87
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> c=IN IP4 123.23.45.67
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**70-72. SIP 200 (OK) response (from remote UE to SCC AS-1)**
The remote UE acknowledges the SIP re-INVITE request by sending a SIP 200 (OK)
response to the SCC AS-1.
**Table 4.6.4.2.2.2.2-70: SIP 200 (OK) response (remote UE to SCC AS-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact: sip:user4_public1\@home2.net
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 3000 RTP/AVP 97
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**73-75. SIP ACK request (from SCC AS-1 to remote UE)**
The SCC AS-1 sends a SIP ACK request to the remote UE.
**76-80. SIP re-INVITE request (from SCC AS-1 to controllee UE; UE-3)**
The SCC AS-1 sends a SIP re-INVITE request to the controllee UE.
**Table 4.6.4.2.2.2.2-76: SIP INVITE request (SCC AS-1 to UE-3)**
> INVITE sip:user1_public3\@home3.net;
> gr=urn:uuid:f81d4fae-7dec-11d0-1111-333333333333 SIP/2.0
>
> Via: SIP/2.0/UDP sccas.home1.net; branch=z9hG4bK332b33.3;
>
> To: sip:user1_public3\@home3.net;
>
> From: sip:interUEtransfer\@sccas1.home1.net; tag=12486
>
> Call-ID: cb03a0s09a2sdfglkj33333
>
> Cseq: 111 INVITE
>
> Max-Forwards: 70
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:interUEtransfer\@sccas1.home1.net
>
> Allow:
>
> Accept:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 3002 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 3004 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**81-85. SIP 200 (OK) response (from UE-3 to SCC AS-1)**
The UE-3 sends a SIP 200 (OK) response with an SDP answer.
**Table 4.6.4.2.2.2.2-81: SIP 200 (OK) response (UE-2 to SCC AS-1)**
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user1_public3\@home3.net; tag = 24861
>
> From: sip:interUEtransfer\@home.net; tag = 12486
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> \
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.23.45.67
>
> s=-
>
> c=123.23.45.67
>
> t=0 0
>
> m=audio 0 RTP/AVP 97
>
> m=video 1302 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> m=video 1304 RTP/AVP 98 99
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**86-90. SIP ACK request (from SCC AS-1 to UE-3)**
The SCC AS-1 sends a SIP ACK request to the UE-3.
**91-92. SIP NOTIFY request (from SCC AS-1 to UE-1)**
The SCC AS-1 sends a SIP NOTIFY request to the UE-1 to inform about the
success status of adding media to UE-3.
**93-94. SIP 200 (OK) response (from UE-1 to SCC AS-1)**
The UE-1 acknowledges the SIP NOTIFY request by sending a SIP 200 (OK)
response to the SCC AS.
## 4.7 Session replication
### 4.7.1 General
#### 4.7.1.1 Alternatives for protocol solutions to identify requests for
replication
The issues identified in clause 4.7.3.1 regarding indication of request of
session replication can be resolved by one of the options summarised below:
1\. UE includes new information in the SDP of the media to be replicated. One
example is to define a new attribute within the \"i=\" field, e.g.,
\"i=replicate\". The same method could be also used to define an indication to
transfer media, e.g., \"i=transfer\". However, \"i=\" field is intended to be
human-readable and not for parsing by automata. Alternatively, a new attribute
can be introduced to indicate explicitly if a media component is to be
replicated. Such an attribute may be used at the session level if all media
components are to be replicated, else applied to each media component at the
media level. The \"a=\" field is the main method for extending the SDP in
order to meet application demands. Therefore, it is more suitable to be used
as an indication of replication.
2\. Include a new header field, i.e. \"Replicate Header Field\" that describe
the session/media to be replicated. The \"Replicate Header Field\" would have
similar parameters to the \"Replaces Header Field\" as defined in IETF RFC
3891 [10]. The Replicate header includes the dialog-id of the session to be
replicated (call-id, to and from tags);
3\. include an XML body in the request for session/media replication. The XML
body contains the instruction to \"replicate\" session/media from the existing
Controller UE to the intended target Controller UE. The XML body may include
the identity (i.e. the GRUU) of the existing Controller UE and the identity
(i.e. GRUU) of the target Controller UE. Alternatively, these may be included
in the appropriate SIP header fields (e.g. Request-URI, Contact, etc);
4\. include an feature tag in Accept-Contact as described in subclause
4.7.2.1.4.
### 4.7.2 Procedures
#### 4.7.2.1 Session replication by the SCC AS -- pull mode
##### 4.7.2.1.1 Alternative 1: new SDP attribute to indicate replication of
media component
###### 4.7.2.1.1.1 General
A new attribute is introduced to indicate replication of a media component.
a = 3gpp.iut.replication
The replicate attribute can be included either at the session level or at the
media level. Inclusion of \"a=3gpp.iut.replication\" at the session level
indicates replication of all media components included in the SDP. Inclusion
of \"a=3gpp.iut.replication\" at the media level indicates replication of the
specific media component that the attribute is associated with.
Editor's Note: The syntax of the \"a=3gpp.iut.replication\" field and the
amount of information that it can convey is FFS. See section 4.7.4.1.2.1 for
an example of the usage of this attribute.
###### 4.7.2.1.1.2 Single subscription
###### # 4.7.2.1.1.2.1 SC UE
In order to replicate an existing session, the UE shall send a SIP INVITE
request to the SCC AS containing SDP information as follows:
NOTE: Before requesting replication, the UE discovers the ongoing
collaborative session with the replicated media and gets information about its
media flows by subscribing to dialog event.
1) for the replicated media component(s), containing the port numbers of the
UE and the \"a= 3gpp. iut. replication\" attribute set to \"nw pull receiver\"
which indicates that the replication request is sent from the controllee UE,
and it uses the network based solution; 2) for the media component(s) served
by the UE itself, containing the port numbers of the UE; and
2) for the media component(s) not served by the UE, containing the port
numbers set to zero.
Upon receiving the SIP 2xx response for the INVITE request from the SCC AS,
the UE shall send a SIP ACK request to the SCC AS.
###### # 4.7.2.1.1.2.2 SCC AS serving the collaborative session
On receiving the SIP INVITE request, the SCC AS authorizes the request and
sends information to MRF to allocate the media resource for the media to be
replicated.
Editor\'s Note: How the SCC AS authorizes the request for session replication
is FFS.
Editor\'s Note: There is a need to understand what functionality the MRF is
providing. This can either be done by showing the instructions to the MRF or
by showing the SDP in other messages thus enabling the activity of the MRF to
be seen.
On receiving the SIP INVITE request, the SCC AS shall send a SIP re-INVTE
request to the controller UE to updates the access leg on Controller UE for
the replicated media flow with MRF. The SIP re-INVITE request includes the SDP
offer with the \"a= 3gpp. iut. replication\" attribute which indicates that
**the request is sent from SCC AS using the network based solution, and it
needs controller UE to authorize the media.**
Upon receiving a SIP 200 (OK) response with the SDP answer from the controller
UE, the SCC AS shall send a SIP ACK request to the controller UE. After that,
the SCC AS shall send a SIP re-INVITE request on the dialog for the remote leg
to the remote UE update the remote leg to communicate media with MRF.
Upon receiving a SIP 200 (OK) response with the SDP answer on the remote leg,
the SCC AS shall send a SIP ACK request on the remote leg.
##### 4.7.2.1.2 Alternative 2: new SIP header field, \"Replicate\", to
distinguish a request for replication
Inclusion of the Replicate header field in a request indicates request for
replication of an existing session identified in the Replicate header field.
The Replicate header field is optional and shall only be included in INVITE
requests, or REFER requests. The syntax of a new header field to explicitly
indicate replication is shown in Table 4.7.2.1.2-1.
Table 4.7.2.1.2-1: Syntax of Replicate header
Replicate = \"Replicate\" HCOLON callid * (SEMI replicate-param)
replicate-param = to-tag / from-tage / early-flag / gemeric-param
to-tag = \"to-tag\" EQUAL token
from-tag = \"from-tag\" EQUAL token
early-flag = \"early-only\"
##### 4.7.2.1.3 Alternative 3: MIME body indicating replication
Inclusion of MIME body application/vnd.3gpp.replication+xml indicates that the
request is related to replication.
##### 4.7.2.1.4 Alternative 4: feature tag indicating replication
Inclusion of Accept-Contact with media feature tag g.3gpp.iut.replicator in a
request indicates request for replication.
##### 4.7.2.1.5 Alternative 5: Use of discard port number
###### # 4.7.2.1.5.1 Different subscriptions
###### # 4.7.2.1.5.1.1 Controller UE procedures
Upon receipt of a SIP MESSAGE request, requesting the permission for a media
component replication from a collaborative session, the controller UE shall
send a SIP MESSAGE request targeted to the SCC-AS indicating whether the media
replication is allowed or disallowed by including an XML body as described in
subclause 4.7.2.1.5.1.4.
When the controller UE receives a SIP re-INVITE request or a SIP UPDATE
request from the SCC AS to update the status of the replicated media component
after a successful replication, the controller UE shall follow the procedures
described in 3GPP TS 24.229 [4]. The controller UE shall save the media
information (e.g. media line(s) and port number(s)) related to the replicated
media(s) and IP address of MRF received in the SIP re-INVITE request or SIP
UPDATE request in order to perform further inter-UE transfer operations on the
controllee UE.
###### # 4.7.2.1.5.1.2 Controllee UE procedures
To replicate a media component from a collaborative session, the controllee UE
shall send a SIP REFER request outside the existing dialog as specified in
IETF RFC 3515 [8] and include:
1) a Request-URI field containing contact of the controller UE;
2) the Refer-To header field containing:
a) the SIP URI of the controllee UE; and;
NOTE 1: The SIP URI of the controllee UE needs to be a GRUU if the controllee
UE and any other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session to be replicated containing the discard port number \"9\".
Editor\'s Note: The discard port number \"9\" was used in rel-9 Inter-UE
Transfer in the adding new media component where the port number of the target
UE was not known, however, in this case the port number of the target UE is
known. Therefore, it is not clear if the concept of using this discard port is
correct for this case.
NOTE 2: If there were media lines that would not to be replicated, those media
lines would be listed in the SDP however, the port numbers would have been set
to zero.
3) a **Target-Dialog header field containing the dialog parameters for the**
dialog of the existing session;
4) an Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags; and
5) an Accept header field containing the MIME types \"application/sdp\" and
\"message/sipfrag\".
The controllee UE shall handle any response to the SIP REFER request and the
subsequent SIP NOTIFY requests according to 3GPP TS 24.229 [4] and IETF RFC
3515 [8].
If an error response is received for the SIP REFER request or the subsequent
SIP NOTIFY requests include a non-2xx final response, the controllee UE shall
consider the replication operation failed and continue the existing session.
###### # 4.7.2.1.5.1.3 SCC AS procedures
When the SCC AS replicates a media component as a result of receiving a SIP
REFER request from the controllee UE containing the discard port number \"9\",
the SCC AS shall check if the media components can be shared:
Editor\'s Note: The discard port number \"9\" was used in rel-9 Inter-UE
Transfer in the adding new media component where the port number of the target
UE was not known, however, in this case the port number of the target UE is
known. Therefore, it is not clear if the concept of using this discard port is
correct for this case.
\- if the media component(s) is forbidden to be shared, then the SCC-AS shall
send an error code to controllee UE that the session replication is forbidden;
or
\- if the media needs to be asked to be shared, then the SCC AS shall send a
SIP MESSAGE request to the controller UE requesting in the XML body if the
controller UE allows this session replication.
Editor\'s Note: It is FFS if and how this request needs to be communicated
with the user. Whether the user should know about these options or the UE
makes the decision without the user interaction.
Upon receiving the SIP MESSAGE request indicating that the session
replications is allowed, the SCC AS shall send:
1) a SIP 202 (Accepted) response to the SIP REFER request and a SIP NOTIFY
request to the controllee UE as specified in IETF RFC 3515 [8]; and
2) a SIP INVITE request to controllee UE, containing:
a) Request-URI with SIP URI from the Refer-To header field of the received SIP
REFER request; and
b) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- media lines which are from the body parameter in the Refer-To header field
of the received SIP REFER request; and
\- media lines which have non zero port numbers the SDP parameters from the
corresponding media lines as received during the last successful SDP offer-
answer exchange from the remote UE.
Upon receiving a SIP final response from the controllee UE, the SCC AS shall
send, a SIP NOTIFY request to the controllee UE containing the received final
response code in the sipfrag body and if the received response was a SIP 200
(OK) response containing an SDP answer then also include in the sipfrag the
Content-Type header field from the received 200 (OK) response along with the
media (m=) lines from the SDP answer.
If the SIP final response was a non 2xx response then the SCC AS shall
consider the replication operation failed and abort the session replication.
If the SIP final response was a SIP 200 (OK) response containing a SDP answer,
the SCC AC shall send a SIP re-INVITE request on the dialog for the remote end
as sepcified in 3GPP TS 24.229 [4]. The SCC AS shall:
1) send a SIP re-INVITE request containing SDP information as follows:
a) for the replicated media component(s), set the SDP information as from the
SDP answer received in the SIP 200 (OK) response from the controllee UE; and
b) for all other media components in the collaborative session, include the
SDP information as from the original session to the MRF.
2) send a SIP re-INVITE request or SIP UPDATE request to the controller UE
following the procedures described in 3GPP TS 24.229 [4] sending the media
information (e.g. media line(s) and port number(s)) related to the replicated
media(s) and IP address of the MRF.
###### # 4.7.2.1.5.1.4 Allowing or disallowing media component replication by
use of an XML body
Editor\'s Note: In order to allow or disallow a media component replication
from a collaborative session, the controller UE populates a SIP 200 (OK)
response to a SIP MESSAGE request received from the SCC-AS requesting for this
permission. It is FFS how to populate this XML body which needs to be
populated so that the size of the SIP 200 (OK) be kept less than 1300 bytes.
#### 4.7.2.2 Session replication by the SCC AS -- push mode
##### 4.7.2.2.1 Alternative1
Refer to subclause 4.7.2.1 for proposed alternatives to identify requests for
replication.
###### 4.7.2.2.1.1 Single subscription
###### # 4.7.2.2.1.1.1 Controller UE
In order to replicate an existing session to other UE, the SC UE shall send a
SIP REFER request as specified in IETF RFC 3515 [8] and include:
> 1) the Request-URI set to the inter UE Transfer SCC AS URI; and
>
> 2) the Refer-To header field set as follows:
>
> a) the SIP URI of the controllee UE;
NOTE: The SIP URI of the controllee UE needs to be a GRUU if the controllee UE
and any other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- media lines that are not being replicated with the port number set to zero;
and
\- media line(s) that are to be replicated containing the \"a= 3gpp. iut.
replication\" attribute which indicates that the replication request was sent
from controller UE and using the network based solution.
Upon receiving a SIP re-INVITE request from SCC AS, the UE shall send a SIP
200 (OK) response to SCC AS to confirm the successful media update.
Upon receiving a SIP NOTIFY request from SCC AS, the UE shall send a SIP 200
(OK) response to SCC AS.
###### # 4.7.2.2.1.1.2 SCC AS serving the collaborative session
Upon receiving a SIP REFER request due to session replication, the SCC AS
shall:
> 1) if not authorized, reject the SIP request with a SIP 403 (Forbidden)
> response and do not process the remaining steps;
>
> Editor\'s note: authorization policy is FFS.
>
> 2) send information to MRF to allocate the media resource for the media to
> be replicated; and
>
> 3) send a SIP INVITE request to the controllee UE includes:
a) the Request-URI with SIP URI from the Refer-To header field of the received
SIP REFER request; and
b) the SDP information as follows:
\- the media type(s) that are to be replicated from the media (m=) lines from
the hname \"body\" URI header field in the SIP URI in the Refer-To header
field of the received SIP REFER request and the \"a= 3gpp. iut.-replication\"
attribute set to \"nw push replicator \" which indicates that the replication
request is sent sent by the SCC AS and using the network based solution.
Upon receiving a SIP 200 (OK) response with the SDP answer from the controllee
UE, the SCC AS shall send a SIP ACK request to the controllee UE. After that,
the SCC AS shall send a SIP re-INVITE request to controller UE to update the
access leg for the replicated media flow with MRF.
Upon receiving a SIP 200 (OK) response with the SDP answer from the controller
UE, the SCC AS shall send a SIP ACK request to the controller UE. After that,
the SCC AS shall send a SIP re-INVITE request on the dialog for the remote leg
to the remote UE update the remote leg to communicate media with MRF.
Upon receiving a SIP 200 (OK) response with the SDP answer on the remote leg,
the SCC AS shall send a SIP ACK request on the remote leg.
##### 4.7.2.2.2 Alternative 2: Use of discard port number
###### # 4.7.2.2.2.1 Different subscriptions
###### # 4.7.2.2.2.1.1 Controller UE procedures
To replicate a media component from a collaborative session, the controller UE
shall send a SIP REFER request outside the existing dialog as specified in
IETF RFC 3515 [8] and include:
1) a Request-URI field containing contact of the SCC AS;
2) the Refer-To header field containing:
a) the SIP URI of the controllee UE; and;
NOTE 1: The SIP URI of the controllee UE needs to be a GRUU if the controllee
UE and any other UEs share the same public user identity.
b) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session to be replicated containing the discard port number \"9\".
Editor\'s Note: The discard port number \"9\" was used in rel-9 Inter-UE
Transfer in the adding new media component where the port number of the target
UE was not known, however, in this case the port number of the target UE is
known. Therefore, it is not clear if the concept of using this discard port is
correct for this case.
NOTE 2: If there were media lines that would not to be replicated, those media
lines would be listed in the SDP however, the port numbers would have been set
to zero.
3) a **Target-Dialog header field containing the dialog parameters for the**
dialog of the existing session;
**4)** a Referred-By header field containing a currently registered public
user identity of the controller UE;
5) a Contact header field containing the g.3gpp.iut-controller media feature
tag;
6) an Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags; and
7) an Accept header field containing the MIME types \"application/sdp\" and
\"message/sipfrag\".
The controller UE shall handle any response to the SIP REFER request and the
subsequent SIP NOTIFY requests according to 3GPP TS 24.229 [4] and IETF RFC
3515 [8].
If an error response is received for the SIP REFER request or the subsequent
SIP NOTIFY requests include a non-2xx final response, the controller UE shall
consider the replication operation failed and continue the existing session.
When the controller UE receives a SIP re-INVITE request or a SIP UPDATE
request from the SCC AS to update the status of the replicated media component
after a successful replication, the controller UE shall follow the procedures
described in 3GPP TS 24.229 [4]. The controller UE shall save the media
information (e.g. media line(s) and port number(s)) related to the replicated
media(s) and IP address of MRF received in the SIP re-INVITE request or SIP
UPDATE request in order to perform further inter-UE operations on the
controllee UE.
###### # 4.7.2.2.2.1.2 Controllee UE procedures
There are no specific procedures for the controllee UE for the collaborative
session establishment by transferring media, besides the procedures described
in 3GPP TS 24.229 [4].
###### # 4.7.2.2.2.1.3 SCC AS procedures
Upon receiving a SIP REFER request from the controller UE containing the
discard port number \"9\", the SCC AS shall send:
Editor\'s Note: The discard port number \"9\" was used in rel-9 Inter-UE
Transfer in the adding new media component where the port number of the target
UE was not known, however, in this case the port number of the target UE is
known. Therefore, it is not clear if the concept of using this discard port is
correct for this case.
1) a SIP 202 (Accepted) response to the SIP REFER request and a SIP NOTIFY
request as specified in IETF RFC 3515 [8]; and
2) a SIP INVITE request to controllee UE, containing:
a) Request-URI with SIP URI from the Refer-To header field of the received SIP
REFER request;
b) the Referred-By header field containing the SIP URI from the Referred-By
header field of the received SIP REFER request;
c) the P-Asserted-Identity header field containing the identity of the remote
UE; and
d) the SIP URI additionally containing the URI header field with the hname
\"body\" containing SDP for the media type for each of the media (m=) lines in
the session set as follows:
\- media lines which are from the body parameter in the Refer-To header field
of the received SIP REFER request; and
\- media lines which have non zero port numbers the SDP parameters from the
corresponding media lines as received during the last successful SDP offer-
answer exchange from the remote UE.
Upon receiving a SIP final response from the controllee UE, the SCC AS shall
send, a SIP NOTIFY request to controller UE containing the received final
response code in the sipfrag body and if the received response was a SIP 200
(OK) response containing an SDP answer then also include in the sipfrag the
Content-Type header field from the received 200 (OK) response along with the
media (m=) lines from the SDP answer.
If the SIP final response was a non 2xx response then the SCC AS shall
consider the replication operation failed and abort the session replication.
If the SIP final response was a SIP 200 (OK) response containing a SDP answer,
the SCC AC shall send a SIP re-INVITE request on the dialog for the remote end
as sepcified in 3GPP TS 24.229 [4]. The SCC AS shall:
1) send a SIP re-INVITE request containing SDP information as follows:
a) for the replicated media component(s), set the SDP information as from the
SDP answer received in the SIP 200 (OK) response from the controllee UE;
b) for all other media components in the collaborative session, include the
SDP information as from the original session to the MRF; and
2) send a SIP re-INVITE request or SIP UPDATE request to the controller UE
following the procedures described in 3GPP TS 24.229 [4] sending the media
information (e.g. media line(s) and port number(s)) related to the replicated
media(s) and IP address of the MRF.
#### 4.7.2.3 Session replication by remote UE -- pull mode
Refer to subclause 4.7.2.1 for proposed alternatives to identify requests for
replication.
##### 4.7.2.3.1 Alternative 1
###### 4.7.2.3.1.0 General
This alternative requires replication support in remote UE as described in
4.7.2.3.1.0A.
###### 4.7.2.3.1.0A Remote UE
The same handling as in subclause 4.7.2.4.1.0A applies.
###### 4.7.2.3.1.1 SC UE
###### # 4.7.2.3.1.1.1 Triggering pull mode session replication
The SC UE shall fetch the dialog information of a source UE as described in
subclause 4.9 and select an existing session for replication.
The SC UE shall send a SIP INVITE request according to 3GPP TS 24.229 [4]. The
SC UE shall populate the SIP INVITE request as follows:
A. the Request-URI is set to the remote target URI (as defined in IETF RFC
3261 [20]) of the existing session;
B. an Accept-Contact with
a. g.3gpp.iut.replicator media feature tag; and
b. explicit and require; and
C. Target-Dialog header field containing the value of the
g.3gpp.iut.replicator media feature tag in Contact header field provided by
remote UE during the establishment of the existing session;
D. SDP offer containing the same media components as used in the existing
session.
###### 4.7.2.3.1.2 SCC AS
No additional requirements above the handling for originating session.
##### 4.7.2.3.1A Alternative 1A
###### 4.7.2.3.1A.0 General
This alternative:
\- assumes that the existing dialog does not need to be indicated in session
replication as all sessions established towards a URI of the remote UE provide
the same media, e.g. an INVITE to a URI identifying a movie at an AS will
always result to playback of the same movie.
\- does not require extension of remote UE as playback state is exchanged
between the SC UEs.
###### 4.7.2.3.1A.1 SC UE
###### # 4.7.2.3.1A.1.1 Triggering pull mode session replication
The SC UE shall fetch the dialog information of a UE as described in subclause
4.9 and select an existing session for replication.
In order to replicate the session, the SC UE:
1\. shall send a SIP INVITE request according to 3GPP TS 24.229 [2]. The SC UE
shall populate the SIP INVITE request as follows:
A. the Request-URI is set to the remote URI (as defined in IETF RFC 3261 [x])
of the existing session; and
B. SDP offer containing the same media components as used in the existing
session selected for replication.
###### # 4.7.2.3.1A.1.2 Requesting playback state
In order to get playback state from another UE participating in an existing
session, the SC UE shall send a SIP REFER request as specified in IETF RFC
3515 [13] and 3GPP TS 24.229 [2]. The SC UE shall populate the SIP REFER
request as follows:
1\. the Request-URI set to the URI of the UE participating in the existing
session;
NOTE 1: The URI of the UE needs to be a GRUU if several UEs share the same
identity.
2\. the Refer-To header field set to the own SIP URI extended with:
NOTE 2: The own SIP URI needs to be a GRUU if several UEs share the same
identity.
A. method parameter set to \"MESSAGE\"; and
B. In-Reply-To URI header field set to the value of the Call-Id header field
of the SIP REFER request;
3\. the Target-Dialog header field set to the dialog identifier of the session
whose playback state is to be provided;
NOTE 3: The dialog identifiers of sessions of other UEs can be found using
dialog event package subscription.
4\. the Require header field populated with the option tag value \"tdialog\";
and
5\. application/vnd.3gpp.replication+xml MIME body containing the playback
state parameters to be provided.
The SC UE receives the playback state upon receiving SIP MESSAGE request with:
1\. In-Reply-To header field containing the call-id of the dialog of the
subscription created by SIP REFER request; and
2\. application/vnd.3gpp.replication+xml MIME body.
###### # 4.7.2.3.1A.1.3 Providing playback state on request of other UE
Upon receiving SIP REFER request containing:
1\. the Refer-To header field containing a SIP URI with method parameter equal
to \"MESSAGE\";
2\. the Target-Dialog header field containing the dialog identifier of an
existing session with playback state; and
3\. application/vnd.3gpp.replication+xml MIME body containing the playback
state parameters to be provided;
then the SC UE shall handle the SIP REFER request as specified in 3GPP TS
24.229 [2] and IETF RFC 3515 [13]. The UE shall populate the SIP MESSAGE
request with
1\. header fields which were included as URI header fields in the URI in the
Refer-To header field of the received SIP REFER request; and
2\. application/vnd.3gpp.replication+xml MIME body containing the playback
state of the session identified by Target-Dialog header field as requested in
the application/vnd.3gpp.replication+xml MIME body included in the REFER
request.
###### 4.7.2.3.1A.2 SCC AS
###### # 4.7.2.3.1A.2.1 Distinction of requests sent to the SCC AS
The SCC AS needs to distinguish between the following SIP requests to provide
specific functionality relating to session replication:
1\. SIP REFER request routed to the SCC AS due to the terminating filter
criteria:
A. where the Refer-To header field contains a SIP URI with method parameter
set to \"MESSAGE\"; and
B. containing application/vnd.3gpp.replication+xml MIME body;
In the procedures below, such request is known as \"SIP REFER request for
providing playback state\".
Other SIP initial requests for a dialog and requests for a SIP standalone
transaction can be dealt with in any manner conformant with 3GPP TS 24.229
[2].
###### # 4.7.2.3.1A.2.2 Providing playback state on request of other UE
Upon receiving a SIP REFER request for providing playback state, the SCC AS
shall:
1\. if not authorized, reject the SIP request with a SIP 403 (Forbidden)
response and do not process the remaining steps; and
Editor\'s note: authorization policy if FFS
2\. forward the SIP REFER request in any manner conformant with 3GPP TS 24.229
[2].
#### 4.7.2.4 Session replication by remote UE -- push mode
Refer to subclause 4.7.2.1 for proposed alternatives to identify requests for
replication.
Editor\'s Note: For the above sentence (introduced by C1-103398) it must be
decided in which subclause to put it.
##### 4.7.2.4.1 Alternative 1
###### 4.7.2.4.1.0 General
This alternative requires replication support in remote UE as described in
4.7.2.4.1.0A.
###### 4.7.2.4.1.0A Remote UE
###### # 4.7.2.4.1.0A.1 General
When the UE establishes a session which can be replicated and which has a
playback state, the UE shall include the g.3gpp.iut.replicator media feature
tag in Contact header field of sent SIP request and SIP responses establishing
the session. The UE shall set the value of the g.3gpp.iut.replicator to the
dialog identifier of the session being established.
###### # 4.7.2.4.1.0A.1 Session replication request handling
Upon receiving the SIP INVITE request with:
\- Accept-Contact header field containing g.3gpp.iut.replicator media feature
tag; and
\- Target-Dialog header field;
and if the Target-Dialog header field value identifies an existing session and
if both sessions are established with the same local resource, then the UE has
enough information to set the playback state in the session being established
to the same state as the playback state of the existing session.
###### 4.7.2.4.1.1 SC UE
###### # 4.7.2.4.1.1.1 Triggering push mode session replication request
In order to replicate an existing session of this SC UE to other UE, the SC UE
shall send a SIP REFER request as specified in IETF RFC 3515 [8] and 3GPP TS
24.229 [4]. The SC UE shall populate the SIP REFER request as follows:
1\. the Request-URI set to the URI of the UE where the session is to be
replicated;
NOTE: The URI of the UE needs to be a GRUU if multiple UEs share the same
identity.
2\. the Refer-To header field set to the remote target URI (as defined in IETF
RFC 3261 [19]) of the existing session and extended with the following URI
header field:
A. if the session is established using an IMS communication service that
requires the use of an IMS communication service identifier:
a. optionally the Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the IMS communication service identifier of the
existing session; and
b. the P-Preferred-Service header field set to the IMS communication service
identifier of the existing session;
B. SDP body listing the media as used in the existing session selected for
replication;
C. Accept-Contact URI header field with:
a. g.3gpp.iut.replicator media feature tag; and
b. explicit and require; and
D. Target-Dialog header field containing the value of the
g.3gpp.iut.replicator media feature tag in Contact header field provided by
remote UE during the establishment of the existing session.
###### # 4.7.2.4.1.1.2 Handling push mode session replication request
Upon receiving SIP REFER request containing Refer-To header field containing a
URI with method parameter equal to \"INVITE\" or without method parameter and
with Accept-Contact URI header field containing g.3gpp.iut.replicator media
feature tag the UE shall handle the SIP REFER request as specified in 3GPP TS
24.229 [4] and IETF RFC 3515 [8].
###### 4.7.2.4.1.2 SCC AS
###### # 4.7.2.4.1.2.1 Distinction of requests sent to the SCC AS
The SCC AS needs to distinguish between the following SIP requests to provide
specific functionality relating to session replication:
1\. SIP REFER request routed to the SCC AS due to the originating filter
criteria where:
A. the Refer-To contains a SIP URI with:
a. method parameter set to \"INVITE\" or without method parameter; and
b. Accept-Contact URI header field containing g.3gpp.iut.replicator media
feature tag.
In the procedures below, such request is known as \"SIP REFER request due to
session replication\".
Other SIP initial requests for a dialog and requests for a SIP standalone
transaction can be dealt with in any manner conformant with 3GPP TS 24.229
[4].
###### # 4.7.2.4.1.2.2 Session replication from the served UE
Upon receiving a SIP REFER request due to session replication, the SCC AS
shall:
1\. if not authorized, reject the SIP request with a SIP 403 (Forbidden)
response and do not process the remaining steps; and
Editor\'s note: authorization policy if FFS
2\. forward the SIP REFER request in any manner conformant with 3GPP TS 24.229
[4].
##### 4.7.2.4.1A Alternative 1A
###### 4.7.2.4.1A.1 SC UE
4.7.2.4.1A.1.1 Triggering push mode session replication request
In order to replicate an existing session of this SC UE to other UE, the SC UE
shall send a SIP REFER request as specified in IETF RFC 3515 [8] and 3GPP TS
24.229 [4]. The SC UE shall populate the SIP REFER request as follows:
1\. the Request-URI set to the URI of the UE where the session is to be
replicated;
NOTE: The URI of the UE needs to be a GRUU if multiple UEs share the same
identity.
2\. the Refer-To header field set:
A. if the asserted remote UE identity of the existing session is known, then
to the asserted remote UE identity of the existing session; and
B. if the asserted remote UE identity of the existing session is not known,
then to the remote URI (as defined in IETF RFC 3261 [x]) of the existing
session;
and extended with the following URI header fields:
A. if the session is established using an IMS communication service that
requires the use of an IMS communication service identifier:
a. optionally the Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the IMS communication service identifier of the
existing session; and
b. the P-Preferred-Service header field set to the IMS communication service
identifier of the existing session; and
B. SDP body listing the media as used in the existing session selected for
replication; and
3\. application/vnd.3gpp.replication+xml MIME body which optionally can
include the playback state.
###### # 4.7.2.4.1A.1.2 Handling push mode session replication request
Upon receiving SIP REFER request containing:
1\. Refer-To header field containing a URI with method parameter equal to
\"INVITE\" or without method parameter; and
2\. MIME body of MIME type the application/vnd.3gpp.replication+xml;
UE:
1\. shall handle the SIP REFER request as specified in 3GPP TS 24.229 [4] and
IETF RFC 3515 [8].
###### 4.7.2.4.1A.2 SCC AS
###### # 4.7.2.4.1A.2.1 Distinction of requests sent to the SCC AS
The SCC AS needs to distinguish between the following SIP requests to provide
specific functionality related to session replication:
1\. SIP REFER request routed to the SCC AS due to the originating filter
criteria containing:
A. Refer-To header field with a SIP URI with method parameter set to
\"INVITE\" or without method parameter; and
B. MIME body with MIME type application/vnd.3gpp.replication+xml.
In the procedures below, such request is known as \"SIP REFER request due to
session replication\".
Other SIP initial requests for a dialog and requests for a SIP standalone
transaction can be dealt with in any manner conformant with 3GPP TS 24.229
[4].
###### # 4.7.2.4.1A.2.2 Session replication from the served UE
Upon receiving a SIP REFER request due to session replication, the SCC AS
shall:
1\. if not authorized, reject the SIP request with a SIP 403 (Forbidden)
response and do not process the remaining steps; and
Editor\'s note: authorization policy if FFS
2\. forward the SIP REFER request in any manner conformant with 3GPP TS 24.229
[4].
### 4.7.3 Identified issues
**Issue 4.7.3-1:** Are the call flows between AS and MRF needed in detail?
**Issue 4.7.3-2:** The communication between AS and MRF needs to be studied in
more detail in order to see if the protocol currently used is functionally
complete for inter-UE transfer purposes.
**Issue 4.7.3-3:** Which packages are used for the communication between AS
and MRF? The evaluation of the related packets could go into protocol
evaluation or protocol extension.
**Issue 4.7.3-4:** It has to be evaluated, whether specific protocol
indications are needed for the following cases and if yes, how these
indications should be transported within the protocol:
a) within the request from the pulling UE to the SCC AS in the pull scenario;
b) within the request from the SCC AS to the controller UE in the pull
scenario;
c) within the request from the controller UE to the SCC AS in the push
scenario;
d) within the request from the SCC AS to the UE to which the media will be
replicated to in the push scenario; and
e) within the request from the SCC AS to the remote UE to indicate that a
specific media is there due to replication.
**Issue 4.7.3-5:** Are there different protocol indications (as described in
issue 4.7.3-4) needed for the individual actions described in issue 4.7.3-4
when:
a) replication happens in the network; and
b) replication happens at the UE?
**(Closed) Issue 4.7.3-6:** Can the UE which the media gets replicated to only
receive media or also send media? The abilities of that UE could be based on
Offer/Answer negotiation, i.e. the controller UE / AS could indicate in the
SDP whether the media towards the UE to which the media gets replicated to is
e.g. \"receiveonly\" or \"send/receive\".
The following was added to the stage 2 study in 3GPP TS 23.831 [3], subclause
4.1.8 and is reflected in 3GPP TS 23.237 [2]:
Video-1 and video-2 media flows are transferring same downlink video packets
from remote party, and only uplink video packets from UE-1 will be transferred
to remote party.
For the above example, either UE-1 or UE-2 could request to replicate video-1
from UE-1 to itself. Only the downlink media of Video-1 will be replicated to
UE-2.
The limitation of replicating downlink data only of the media flow which is
required to be replicated applies to all types of media flows in this release.
The above is applicable only to cases for session replication by the SCC AS.
**Issue 4.7.3-7:** How does the SCC AS / controller UE authorize the request
for replication?
**Issue 4.7.3-8:** How does the controller UE find out, that a request
received for replication authorization is meant for that purpose? A specific
protocol indication might be needed. This protocol indication is most likely
dependant on the protocol message which is used to transport the authorization
request.
**Issue 4.7.3-9:** It has to be determined if, once duplication has been
completed, the duplicated media stream is independent from the original media
stream. For example if a duplicated video stream can be forwarded by one UE,
whilst the other does not.
### 4.7.4 Call flows
#### 4.7.4.1 Session replication by SCC AS -- pull mode
##### 4.7.4.1.1 Alternative 1
###### # 4.7.4.1.1.1 Single subscription
###### # 4.7.4.1.1.2 Different subscriptions
This subclause describes the scenario when the session is replicated in the
network from the controller UE to the controllee UE. The flow diagram shows
when UE-1 and UE-2 belong to two different subscriptions.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
UE-1(123.45.67.89) is in an active session with the remote UE (132.54.76.98).
The call is anchored in the SCC AS of the UE-1. UE-2 (123.112.67.87) is
replicating the media components belonging to the session between UE-1 and the
remote UE, by sending a SIP REFER request to the SCC AS anchoring the session.
The media components are replicated in an MRF (125.124.123.122). After
successful replication, the media flowing between UE-1 and the remote UE is
not impacted. The replicated media component(s) are sent towards UE-2. UE-2
cannot send media flows towards UE-1 or the remote UE during this session.
Figure 4.7.4.1.1.2-1: Signalling flow for session replication in the network
-- Pull mode
**1-2. SIP REFER request (from UE-2 to the serving SCC AS)**
The SIP REFER request contains,
1) a Request-URI field containing contact of the controller UE, UE-1;
2) a Refer-To header field containing:
\- the public user identity or if available the GRUU of the controllee UE,
UE-2; and
\- the body URI header field containing SDP for the media (m=) line for audio
to be replicated containing the discard port number \"9\" for the media lines
to be replicated;
NOTE 1: If there were media lines that would not to be replicated, those media
lines would be listed in the SDP however, the port numbers would have been set
to zero.
Editor\'s Note: It is FFS what value the discard port number has.
3) a **Target-Dialog header field containing the dialog parameters for the**
dialog of the existing session;
4) a Referred-By header field containing a currently registered public user
identity of the controller UE;
5) an Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags; and
6) an Accept header field containing the MIME type \"application/sdp,
message/sipfrag\".
Table 4.7.4.1.1.2-1: SIP REFER request (UE-2 to SCC-AS serving UE-2)
> REFER sip:user1_public1\@home1.net SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;
>
> From: sip:user2_public1\@home2.net;tag=24680
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity:
>
> Refer-To: **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body** = **m**
> %3Daudio%209%20RTP%2FAVP%97%0D**m >**
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj321576;remote-tag=abcdef;local-tag=123456
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz >**
>
> Referred-By: sip:user1_public1\@home2.net
>
> Accept-Contact: +g.3gpp.iut-xyz;explicit;require
>
> Accept: **application/sdp, message/sipfrag**
>
> Content-Length: 0
**3-4. SIP REFER request (from SCC AS serving UE-2 towards UE-1)**
Serving SCC AS forwards the SIP REFER request towards the UE-1.
**5\. SIP REFER request (from S-CSCF to SCC AS anchoring the session)**
The SIP REFER request is finally routed to the SCC AS anchoring the session.
The SCC AS checks the following
i- the content in the Request URI is different than the To header field which
is the contact of controller UE, UE-1;
ii- the port number set to the discard port number \"9\" to indicate adding
the audio to the UE with gruu in REFER To header; and
iii- if the media components belong already to an existing session.
Editor\'s Note: It is FFS if the conditions in this step are adequate for the
SCC AS to populate this SIP INVITE request.
**6-10. SIP 202 (Accepted) response (from SCC AS anchoring the session to
UE-2)**
SCC AS anchoring the session sends a SIP 202 (Accepted) response towards the
UE-2.
**11-14. SIP NOTIFY request (from SCC AS anchoring the session to UE-2)**
SCC-AS anchoring the session sends a SIP NOTIFY request to UE-2 notifying
implicit subscription to the SIP REFER request.
Table 4.7.4.1.1.2-11: SIP NOTIFY request (SCC-AS anchoring the session to
UE-2)
> NOTIFY
>
> Via:
>
> To: sip:user2_public1\@home2.net;tag=24680
>
> From: sip:interUEtransfer\@example.net;tag=13579
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State: active;expires=3600
>
> Content-Type: message/sipfrag;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 100 Trying
**16-20. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP NOTIFY request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
**21-22. SIP MESSAGE request (from SCC-AS anchoring the session to UE-1)**
The controller UE, UE-1, uses media components which can be shared, forbidden
to be shared, or need to be asked to be shared. This can be configured in the
SCC-AS. If the status for the media components are set to
1- can be shared, the steps 21 through 24 shall be bypassed;
2- forbidden to be shared, then the SCC-AS shall send an error code to UE-2
that the session replication is forbidden; or
2- need to be asked to be shared, then the SCC AS shall send a SIP MESSAGE
request to UE-1 requesting in the XML body if the controller UE allows this
session replication.
Editor\'s Note: It is FFS if and how this request needs to be communicated
with the user. Whether the user should know about these options or the UE
makes the decision without the user interaction.
**23-24. SIP 200 (OK) response (from UE-1 to SCC-AS anchoring the session)**
The controller UE, UE-1, sends SIP 200 (OK) response with XML body to the SCC-
AS indicating this session replication is allowed.
**25\. SCC-AS anchoring the session fetches MRF information**
The information about the media port numbers and IP address.
NOTE 2: The SCC AS anchoring the session controls the MRF.
**26-30. SIP INVITE request (from SCC-AS anchoring the session to UE-2)**
Based on the conditions in step 5, the SCC-AS anchoring the session sends a
SIP INVITE request to the controllee UE, UE-2, adding audio media and
establishing collaborative session. The SCC AS sets the a-line for audio
m-line to inactive and the remote UE address to 0.0.0.0 in SDP offer to
prevent the controllee UE sending media to the remote UE. The SIP INVITE
request contains a Referred-By header field containing the identity of UE-1.
Editor\'s Note: It is FFS if the conditions in step 5 are adequate for the SCC
AS to populate this SIP INVITE request.
Table 4.7.4.1.1.2-26: SIP INVITE request (SCC-AS anchoring the session to
UE-2)
> INVITE sip:user2_public1\@home2.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user3_public3\@home3.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3_public3\@home3.net
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97 0
>
> a=inactive
>
> c=0.0.0.0
NOTE 2: The port number is not set to the discard port number \"9\" since the
SCC AS is aware of the port number. The discard port number \"9\" just
indicated the SCC AS not to remove the media from the controller UE, UE-1.
**31-35. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP INVITE request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
Table 4.7.4.1.1.2-31: SIP 200 (OK) response (UE-2 to SCC-AS anchoring the
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6+g.3gpp.iut-
> controller
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 97 0
>
> c=123.112.67.87
**36-40. SIP ACK request (from SCC-AS Anchoring the session to controllee
UE)**
SCC-AS sends SIP ACK request to the remote UE.
**41-42. SIP re-INVITE request (from SCC-AS anchoring the session to the
remote UE)**
SCC-AS anchoring the session sends SIP re-INVITE request to the remote UE.
Table 4.7.4.1.1.2-41: SIP re-INVITE request (SCC-AS anchoring the session to
the remote UE)
> INVITE
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag=66666
>
> From: sip:user1_public1\@home1.net;tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:
> user1_public1\@home1.net;**gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1500 RTP/AVP 96 97
**43-44. SIP 200 (OK) response (from remote UE to SCC-AS anchoring the
session)**
The remote UE acknowledges the SIP re-INVITE request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
Table 4.7.4.1.1.2-43: SIP 200 (OK) response (remote UE to SCC-AS anchoring
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
**45-46. SIP ACK request (from SCC-AS anchoring the session to the remote
UE)**
The SCC-AS anchoring the session sends SIP ACK request to the remote UE.
**47-51. SIP re-INVITE request (from SCC-AS anchoring the session to UE-2)**
The SCC-AS anchoring the session sends a SIP re-INVITE request to the
controllee UE, UE-2 to inform controllee UE adding now an a-line set to active
for the audio and c-line to the IP address of the remote UE in the SDP offer.
Table 4.7.4.1.1.2-47: SIP INVITE request (SCC-AS anchoring the session to
UE-2)
> INVITE sip:user2_public1\@home2.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user3_public3\@home3.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3_public3\@home3.net
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97 0
>
> a=active
**52-56. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP INVITE request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
Table 4.7.4.1.1.2-52: SIP 200 (OK) response (UE-2 to SCC-AS anchoring the
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6+g.3gpp.iut-
> controller
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 97 0
**57-61. SIP ACK request (from SCC-AS anchoring the session to the controllee
UE)**
The SCC-AS anchoring the session sends SIP ACK request to controllee UE to
acknowledge.
**62-63. SIP UPDATE request (from SCC-AS anchoring the session to controller
UE, UE-1)**
A SIP UPDATE.request is sent to the controller UE, UE-1, to inform about the
media port numbers and IP address of MRF.
**64-65. SIP 200 (OK) response (from controller UE to SCC-AS anchoring the
session)**
The controller UE acknowledges the SIP UPDATE request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
**66-70. SIP NOTIFY request (from SCC-AS anchoring the session to controllee
UE, UE-2)**
When the media component is added to the controllee UE, UE-2, the SCC-AS sends
SIP NOTIFY request to the controllee UE to inform about the success status of
adding the media to the UE-2..
Table 4.7.4.1.1.2-66: SIP NOTIFY request (SCC-AS anchoring the session to
UE-2)
> NOTIFY
>
> Via:
>
> To: sip:user2_public1\@home2.net;tag = 13579
>
> From: sip: interUEtransfer\@example.net;tag=24680
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State:terminated; reason=noresource
>
> Content-Type: message/sipfrag ;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 200 OK
>
> Content-Type: application/sdp
>
> m=audio 1456 RTP/AVP 97 0
**71-75. SIP 200 (OK) response (from controllee UE to SCC-AS anchoring the
session)**
The controllee UE acknowledges the NOTIFY request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
##### 4.7.4.1.2 Alternative 2
##### 4.7.4.1.2.1 Single subscription
In the example flow at the figure 4.7.4.1.2.1-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to the
same IMS subscriber. After successful replication, the media flowing between
UE-1 and UE-3 is not impacted. The replicated media component(s) are sent
towards UE-2. UE-2 cannot send media flows towards UE-1 or UE-3 during this
session.
Figure 4.7.4.1.2.1-1: Signalling flows for session replication by SCC AS from
controller to another UE belong to same subscription- pull mode
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1\. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS.
**2\. UE-2 decides to replicate the session from UE-1 to UE-2.**
**3\. UE-2 fetches the dialog information of UE-1 from SCC AS.**
**4-5. SIP INVITE request (UE-2 to SCC-AS) - see example in table
4.7.4.1.2.1-4**
The UE-2 sends SIP INVITE request to SCC-AS to perform the session
replication. When the SCC AS receives the SIP INVITE request, the SCC AS-1
authorizes the request.
Table 4.7.4.1.2.1-4: SIP INVITE request (UE-2 to Intermediate IM CN subsystem
entities)
> INVITE sip:interUEtransfer\@example.net; SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:eee]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 INVITE
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Content-Length: 0
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:eee
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:eee
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 6666 RTP/AVP 98
>
> a=rtpmap:98 MPV/90000
>
> a=3gpp.iut.replication:nw pull receiver
#####
**a= 3gpp. iut. replication: The replication request is sent from the
controllee UE(receiver, i.e. pull mode), and it uses the network based
solution.**
Editor\'s Note: How the SCC AS authorizes the request for session replication
is FFS.
**6\. SCC-AS sends information to MRF to allocate the media resource for the
media to be replicated.**
Editor\'s Note: There is a need to understand what functionality the MRF is
providing. This can either be done by showing the instructions to the MRF or
by showing the SDP in other messages thus enabling the activity of the MRF to
be seen.
**7-8. SIP 200 (OK) response for the SIP INVITE request (SCC AS to UE-2)**
SCC AS responds with SIP 200 (OK) response to UE-2.
**9-10. SIP ACK request (UE-2 to SCC AS)**
The UE-2 sends the SIP ACK request to SCC AS.
**11-12. SIP re-INVITE request (SCC-AS to UE-1) - see example in table
4.7.4.1.2.1-11**
The SCC-AS updates the access leg on Controller UE-1 for the replicated media
flow with MRF.
Table 4.7.4.1.2.1-11: SIP re-INVITE request (SCC AS to Intermediate IM CN
subsystem entities)
> INVITE sip:user1\@home1.net; SIP/2.0
>
> Via: SIP/2.0/UDP
>
> Max-Forwards:
>
> P-Preferred-Identity:
>
> From: \;tag=171828
>
> To: \; tag=297786
>
> Call-ID:
>
> Cseq: 41278 INVITE
>
> Contact:
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:fff
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:fff
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 6666 RTP/AVP 98
>
> a=rtpmap:98 MPV/90000
>
> a=3gpp.iut.replication nw pull replicator 4444::aaa:bbb:ccc:eee authorize
#####
**a= 3gpp. iut. replication: The replication request is sent from SCC AS using
the network based solution, and it needs controller UE to authorize the
media.**
**13-14. SIP 200 (OK) response to re-INVITE request (UE-1 to SCC-AS) - see
example in table 4.7.4.1.2.1-13**
After successful media update, UE-1 sends the SIP 200 (OK) reponse towards
SCC-AS.
Table 4.7.4.1.2.1-13: SIP 200 (OK) response (UE-1 to Intermediate IM CN
subsystem entities)
> SIP/2.0 200 OK
>
> Via:
>
> Max-Forwards:
>
> P-Preferred-Identity:
>
> From: \;tag=171828
>
> To: \; tag=297786
>
> Call-ID:
>
> Cseq:
>
> Contact:
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:fff
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:fff
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 6666 RTP/AVP 98
>
> a=rtpmap:98 MPV/90000
>
> a=3gpp.iut.replication nw pull controller 4444::aaa:bbb:ccc:eee authorized
#####
**a= 3gpp. iut. replication: The replication request is authorized by the
controller UE.**
**15-16. SIP ACK request (SCC-AS to UE-1)**
The SCC AS sends the SIP ACK request to UE-1.
**17-18. SIP re-INVITE request (SCC-AS to UE-3)**
The SCC-AS sends a SIP re-INVITE request towards remote UE to update the
remote leg to communicate media with MRF.
**20-22. SIP 200 (OK) response to re-INVITE request (UE-3 to SCC-AS)**
After successful media update, reomote UE-3 sends the SIP 200 (OK) response
towards SCC-AS.
**23-25. SIP ACK request (SCC-AS to UE-3)**
The SCC AS sends the SIP ACK request to remote UE-3.
##### 4.7.4.1.1.2.2 Dual subscription
##### 4.7.4.1.3 Alternative 3 -- Session replication by SCC AS -- pull mode by
controlling the MRF to active or inactive the media
###### 4.7.4.1.3.1 Single subscription
###### 4.7.4.1.3.2 Different subscriptions
This subclause describes the scenario when the session is replicated in the
network from the controller UE to the controllee UE. The flow diagram shows
when UE-1 and UE-2 belong to two different subscriptions.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
UE-1(123.45.67.89) is in an active session with the remote UE (132.54.76.98).
The call is anchored in the SCC AS of the UE-1. UE-2 (123.112.67.87) is
replicating the media components belonging to the session between UE-1 and the
remote UE, by sending a SIP REFER request to the SCC AS anchoring the session.
The media components are replicated in an MRF (125.124.123.122). After
successful replication, the media flowing between UE-1 and the remote UE is
not impacted. The replicated media component(s) are sent towards UE-2. UE-2
cannot send media flows towards UE-1 or the remote UE during this session.
Figure 4.7.4.1.3.2-1: Signalling flow for session replication in the network
-- Pull mode
**1-2. SIP REFER request (from UE-2 to the serving SCC AS)**
The SIP REFER request contains,
1) a Request-URI field containing contact of the controller UE, UE-1;
2) a Refer-To header field containing:
\- the public user identity or if available the GRUU of the controllee UE,
UE-2; and
\- the body URI header field containing SDP for the media (m=) line for audio
to be replicated containing the discard port number \"9\" for the media lines
to be replicated;
NOTE 1: If there were media lines that would not to be replicated, those media
lines would be listed in the SDP however, the port numbers would have been set
to zero.
Editor\'s Note: The discard port number \"9\" was used in rel-9 Inter-UE
Transfer in the adding new media component where the port number of the target
UE was not known, however, in this case the port number of the target UE is
known. Therefore, it is not clear if the concept of using this discard port is
correct for this case.
3) a Target-Dialog header field containing the dialog parameters for the
dialog of the existing session;
4) a Referred-By header field containing a currently registered public user
identity of the controller UE;
5) an Accept-Contact header field containing the g.3gpp.iut-xyz media feature
tag as described in annex A with explicit and require tags; and
6) an Accept header field containing the MIME type \"application/sdp,
message/sipfrag\".
Table 4.7.4.1.3.2-1: SIP REFER request (UE-2 to SCC-AS serving UE-2)
> REFER sip:user1_public1\@home1.net SIP/2.0
>
> Via:
>
> To: sip:user1_public1\@home1.net;
>
> From: sip:user2_public1\@home2.net;tag=24680
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity:
>
> Refer-To: **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body** = **m**
> %3Daudio%209%20RTP%2FAVP%97%0D**m >**
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj321576;remote-tag=abcdef;local-tag=123456
>
> Contact: \ gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz >**
>
> Referred-By: sip:user1_public1\@home2.net
>
> Accept-Contact: +g.3gpp.iut-xyz;explicit;require
>
> Accept: **application/sdp, message/sipfrag**
>
> Content-Length: 0
**3-4. SIP REFER request (from SCC AS serving UE-2 towards UE-1)**
Serving SCC AS forwards the SIP REFER request towards the UE-1.
**5\. SIP REFER request (from S-CSCF to SCC AS anchoring the session)**
The SIP REFER request is finally routed to the SCC AS anchoring the session.
The SCC AS checks the following
i- the content in the Request URI is different than the To header field which
is the contact of controller UE, UE-1;
ii- the port number set to the discard port number \"9\" to indicate adding
the audio to the UE with gruu in REFER To header; and
iii- if the media components belong already to an existing session.
Editor\'s Note: It is FFS if the conditions in this step are adequate for the
SCC AS to populate this SIP INVITE request.
**6-10. SIP 202 (Accepted) response (from SCC AS anchoring the session to
UE-2)**
SCC AS anchoring the session sends a SIP 202 (Accepted) response towards the
UE-2.
**11-15. SIP NOTIFY request (from SCC AS anchoring the session to UE-2)**
SCC-AS anchoring the session sends a SIP NOTIFY request to UE-2 notifying
implicit subscription to the SIP REFER request.
Table 4.7.4.1.3.2-11: SIP NOTIFY request (SCC-AS anchoring the session to
UE-2)
> NOTIFY
>
> Via:
>
> To: sip:user2_public1\@home2.net;tag=24680
>
> From: sip:interUEtransfer\@example.net;tag=13579
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State: active;expires=3600
>
> Content-Type: message/sipfrag;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 100 Trying
**16-20. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP NOTIFY request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
**21-22. SIP MESSAGE request (from SCC-AS anchoring the session to UE-1)**
The controller UE, UE-1, uses media components which can be shared, forbidden
to be shared, or need to be asked to be shared. This can be configured in the
SCC-AS. If the status for the media components are set to
1- can be shared, the steps 21 through 24 shall be bypassed;
2- forbidden to be shared, then the SCC-AS shall send an error code to UE-2
that the session replication is forbidden; or
3- need to be asked to be shared, then the SCC AS shall send a SIP MESSAGE
request to UE-1 requesting in the XML body if the controller UE allows this
session replication.
Editor\'s Note: It is FFS if and how this request needs to be communicated
with the user. Whether the user should know about these options or the UE
makes the decision without the user interaction.
**23-24. SIP 200 (OK) response (from UE-1 to SCC-AS anchoring the session)**
The controller UE, sends SIP 200 (OK) response to SCC-AS anchoring the
session.
**25-26. SIP MESSAGE request (from UE-1 to SCC-AS anchoring the session)**
The controller UE, UE-1, sends a SIP MESSAGE request to the SCC-AS anchoring
the seesion with the XML body indicating this session replication is allowed.
**27-28. SIP 200 (OK) response (from SCC-AS anchoring the session to the
UE-1)**
The SCC-AS anchoring the session sends SIP 200 (OK) response to the controller
UE.
**29\. The SCC-AS sends information to MRF to allocate the media resource for
the media to be replicated.**
NOTE: The SCC AS anchoring the session controls the MRF.
**30-34. SIP INVITE request (from SCC-AS anchoring the session to UE-2)**
Based on the conditions in step 5, the SCC-AS anchoring the session sends a
SIP INVITE request to the controllee UE, UE-2, adding audio media of the MRF
and establishing collaborative session. The SCC AS control MRF to inactive the
media to prevent the controllee UE sending media to the remote UE . The SIP
INVITE request contains a Referred-By header field containing the identity of
UE-1.
Editor\'s Note: It is FFS if the conditions in step 5 are adequate for the SCC
AS to populate this SIP INVITE request.
Table 4.7.4.1.3.2-30: SIP INVITE request (SCC-AS anchoring the session to
UE-2)
> INVITE sip:user2_public1\@home2.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user3_public3\@home3.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3_public3\@home3.net
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97 0
>
> c=125.124.123.122
NOTE 2: The port number is not set to the discard port number \"9\" since the
SCC AS is aware of the port number. The discard port number \"9\" just
indicated the SCC AS not to remove the media from the controller UE, UE-1.
**35-39. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP INVITE request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
Table 4.7.4.1.3.2-35: SIP 200 (OK) response (UE-2 to SCC-AS anchoring the
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6+g.3gpp.iut-
> controller
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 97 0
>
> c=123.112.67.87
**40-44. SIP ACK request (from SCC-AS Anchoring the session to controllee
UE)**
SCC-AS sends SIP ACK request to the remote UE.
**45-46. SIP re-INVITE request (from SCC-AS anchoring the session to the
remote UE)**
SCC-AS anchoring the session sends SIP re-INVITE request to the remote UE.
Table 4.7.4.1.3.2-45: SIP re-INVITE request (SCC-AS anchoring the session to
the remote UE)
> INVITE
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag=66666
>
> From: sip:user1_public1\@home1.net;tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:
> user1_public1\@home1.net;**gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1500 RTP/AVP 96 97
**47-48. SIP 200 (OK) response (from remote UE to SCC-AS anchoring the
session)**
The remote UE acknowledges the SIP re-INVITE request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
Table 4.7.4.1.3.2-47: SIP 200 (OK) response (remote UE to SCC-AS anchoring
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
**49-50. SIP ACK request (from SCC-AS anchoring the session to the remote
UE)**
The SCC-AS anchoring the session sends SIP ACK request to the remote UE.
**51-52. SIP UPDATE request (from SCC-AS anchoring the session to controller
UE, UE-1)**
A SIP UPDATE.request is sent to the controller UE, UE-1, to inform about the
media port numbers and IP address of MRF.
**53-54. SIP 200 (OK) response (from controller UE to SCC-AS anchoring the
session)**
The controller UE acknowledges the SIP UPDATE request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
**55\. The SCC-AS sends information to the MRF to acitve the media resource
for the media to be replicated**
**56-60. SIP NOTIFY request (from SCC-AS anchoring the session to controllee
UE, UE-2)**
When the media component is added to the controllee UE, UE-2, the SCC-AS sends
SIP NOTIFY request to the controllee UE to inform about the success status of
adding the media to the UE-2..
Table 4.7.4.1.3.2-56: SIP NOTIFY request (SCC-AS anchoring the session to
UE-2)
> NOTIFY
>
> Via:
>
> To: sip:user2_public1\@home2.net;tag = 13579
>
> From: sip:interUEtransfer\@example.net;tag=24680
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State:terminated; reason=noresource
>
> Content-Type: message/sipfrag ;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 200 OK
>
> Content-Type: application/sdp
>
> m=audio 1456 RTP/AVP 97 0
**61-65. SIP 200 (OK) response (from controllee UE to SCC-AS anchoring the
session)**
The controllee UE acknowledges the NOTIFY request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
#### 4.7.4.2 Session replication by SCC AS -- push mode
##### 4.7.4.2.1 Alternative 1
###### 4.7.4.2.1.1 Single subscription
In the example flow at the figure 4.7.4.2.1.1-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to the
same subscriber. After successful replication, the media flowing between UE-1
and UE-3 is not impacted. The replicated media component(s) are sent towards
UE-2. UE-2 cannot send media flows towards UE-1 or UE-3 during this session.
Figure 4.7.4.2.1.1-1: Signalling flow for replicating media in network from
controller to another UE belong to same subscription
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1\. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS-1.
**2\. UE-1 decides to replicate the session from UE-1 to UE-2.**
**3-4. SIP REFER request (UE-1 to SCC-AS) - see example in table 4.7.4.2.1-3**
The UE-1 sends SIP REFER request to SCC-AS to request the session replication.
When SCC-AS receives the SIP REFER request, the SCC-AS authorizes the request.
Table 4.7.4.2.1-3: SIP REFER request (**UE-1 to Intermediate IM CN subsystem
entities**)
> REFER sip:interUEtransfer\@example.net; SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 REFER
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Refer-To:
> \ m%3Dvedio%209%20RTP%2FAVP%98%0Dm% a=3gpp.iut.replication nw push controller
> 4444::aaa:bbb:ccc:eee>
>
> Referred-by: sip:user1\@home1.net
>
> Content-Type: application/
>
> Content-Length: (...)
**a= 3gpp. iut. replication:** the replication request was sent from
controller UE and using the network based solution.
**5-6. SIP 202 (Accepted) response for the SIP REFER request (SCC AS to
UE-1)**
**7\. SCC-AS sends information to MRF to allocate the media resource for the
media to be replicated.**
Editor\'s Note: There is a need to understand what functionality the MRF is
providing. This can either be done by showing the instructions to the MRF or
by showing the SDP in other messages thus enabling the activity of the MRF to
be seen.
**8-9. SIP INVITE request (SCC-AS to UE-2) - See example in table
4.7.4.2.1.1-8**
The SCC-AS sends the SIP INVITE towards UE-2 to establish a session based on
the information provided in the SIP REFER request.
Table 4.7.4.2.1.1-8: SIP INVITE request (**SCC-AS to UE-2**)
> INVITE sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
>
> Max-Forwards: 70
>
> From: \;tag=171828
>
> To: \
>
> Referred-By: sip: user1\@example1.net
>
> Call-ID: duie4hr3896
>
> Cseq: 41 INVITE-
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:eee
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:eee
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 6666 RTP/AVP 98
>
> a=rtpmap:98 MPV/90000
>
> a=g.3gpp.iut.replication nw push replicator
**Referred-By** : The SCC AS adds the Referred-By header in order to indicate
to UE-2 that this collaborative session request was triggered by UE-1.
**a= 3gpp. iut. replication:** the replication request is sent by the SCC AS
and using the network based solution.
**10-11. SIP 200 (OK) reponse to SIP INVITE request(UE-2 to SCC-AS)**
UE-2 establish the session by sending the SIP 200 (OK) response towards SCC-
AS.
**12-13. SIP ACK request (SCC-AS to UE-2)**
The SCC AS sends the SIP ACK request to UE-2.
**14-15. SIP re-INVITE request (SCC-AS to UE-1)**
The SCC-AS updates the access leg on Controller UE-1 for the replicated media
flow with MRF.
**16-17. SIP 200 (OK) response to re-INVITE request (UE-1 to SCC-AS)**
After successful media update, UE-1 sends the SIP 200 (OK) reponse towards
SCC-AS.
**18-19. SIP ACK request (SCC-AS to UE-1)**
The SCC AS sends the SIP ACK request to UE-1.
**20-22. SIP re-INVITE request (SCC-AS to UE-3)**
The SCC-AS sends a SIP re-INVITE request towards remote UE to update the
remote leg to communicate media with MRF.
**23-25. SIP 200 (OK) response to re-INVITE request (UE-3 to SCC-AS)**
After successful media update, UE-3 sends the SIP 200 (OK) response towards
SCC-AS.
**26-27. SIP ACK request (SCC-AS to UE-3)**
The SCC AS sends the SIP ACK request to remote UE-3.
**29-30. SIP NOTIFY request (SCC-AS to UE-1)**
The SCC-AS informs the UE-1 that the action triggered by SIP REFER request was
successfully completed.
**31-32. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to SCC-AS)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
###### 4.7.4.2.1.2 Different subscriptions
This subclause describes the scenario when the session is replicated in the
network from the controller UE to the controllee UE. The flow diagram shows
when UE-1 and UE-2 belong to two different subscriptions. After this
procedures, the UE will be in collaborative session which is anchored by the
SCC AS serving UE-1.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
UE-1(123.45.67.89) is in an active session with the remote UE (132.54.76.98).
The call is anchored in the SCC AS of the UE-1. The controller UE, UE-1,
setups a collaborative session by establishing a session between UE-2
(123.112.67.87) and the remote UE. This session is anchored by the SCC-AS
serving the controllee UE, UE-2. UE-1 replicates the existing media components
within the dialog between itself and the remote UE into the newly established
session between UE-2 and the remote UE, by sending a SIP REFER request to the
SCC AS anchoring the session. The media components are replicated in an MRF
(125.124.123.122). After successful replication, the media flowing between
UE-1 and the remote UE is not impacted. The replicated media component(s) are
sent towards UE-2. UE-2 cannot send media flows towards UE-1 or the remote UE
during this session.
Figure 4.7.4.2.1.2-1: Signalling flow for media replication in the network --
Push mode
**1-2. SIP REFER request (from UE-1 to the SCC AS anchoring the session)**
The SIP REFER request contains:
1) a Request-URI field containing contact of the SCC AS, UE-2;
2) a Refer-To header field containing:
\- the public user identity or if available the GRUU of the controllee UE,
UE-2; and
\- the body URI header containing SDP for the media (m=) line for audio to be
replicated containing the discard port number \"9\" for the media lines to
replicated.
NOTE 1: If there were media lines that would not to be replicated, those media
lines would be listed in the SDP however, the port numbers would have been set
to zero.
3) a **Target-Dialog header field containing the dialog parameters for the**
dialog of the existing session;
4) a Referred-By header field containing a currently registered public user
identity of the controller UE;
5) a Contact header field containing the g.3gpp.iut-controller media feature
tag; and
6) an Accept header field containing the MIME type \"application/sdp,
message/sipfrag\".
Table 4.7.4.2.1.2-1: SIP REFER request (UE-1 to SCC-AS anchoring the session)
> REFER sip:interUEtransfer\@example.net SIP/2.0
>
> Via:
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user1_public1\@home1.net;tag=24680
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> P-Preferred-Identity:
>
> Refer-To: **\  =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body** = **m**
> %3Daudio%209%20RTP%2FAVP%97%0D**m >**
>
> Require: target-dialog
>
> Target-dialog: cb03a0s09a2sdfglkj321576;remote-tag=abcdef;local-tag=123456
>
> Contact: \ e72edef-7efe-11e0-a567-00c0c91ewxyz >**;+g.3gpp.iut-controller
>
> Referred-By: sip:user1_public1\@home1.net
>
> Accept: **application/sdp, message/sipfrag**
>
> Content-Length: 0
**3-4. SIP 202 (Accepted) response (from SCC AS anchoring the session to
UE-1)**
SCC AS anchoring the session sends a SIP 202 (Accepted) response towards the
UE-1.
**5-6. SIP NOTIFY request (from SCC AS anchoring the session to UE-1)**
SCC-AS anchoring the session sends a SIP NOTIFY request to UE-2 notifying
implicit subscription to the SIP REFER request.
Table 4.7.4.2.1.2-5: SIP NOTIFY request (SCC-AS anchoring the session to UE-1)
> NOTIFY
>
> Via:
>
> To: sip:user1_public1\@home1.net;tag=24680
>
> From: sip:interUEtransfer\@example.net;tag=13579
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State: active;expires=3600
>
> Content-Type: message/sipfrag;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 100 Trying
**7-8. SIP 200 (OK) response (from UE-1 to SCC-AS anchoring the session)**
The controller UE, UE-1, acknowledges the SIP NOTIFY request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
**9\. SCC-AS anchoring the session fetches MRF information**
The information about the media port numbers and IP address.
NOTE 2: The SCC AS anchoring the session controls the MRF.
**10-13. SIP INVITE request (from SCC-AS anchoring the session to UE-2)**
The SCC AS anchoring the session checks the following
i- the content in the Request URI is different than the To header field which
is the contact of controllee UE, UE-2;
ii- the port number set to the discard port number \"9\" to indicate adding
the audio to the UE with gruu in REFER To header field; and
iii- if the media components belong already to an existing session.
> SCC-AS anchoring the session sends a SIP INVITE request to the controllee
> UE, UE-2, adding audio media and establishing collaborative session. The SCC
> AS sets the a-line for audio m-line to inactive and the remote UE address to
> 0.0.0.0 in SDP offer to prevent the controllee UE sending media to the
> remote UE. The SIP INVITE request contains a Referred-By header field
> containing the identity of UE-1.
Table 4.7.4.2.1.2-10: SIP INVITE request (SCC-AS anchoring the session to
UE-2)
> INVITE sip:user2_public1\@home2.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user3_public3\@home3.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3_public3\@home3.net
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97 0
>
> a=inactive
>
> c=0.0.0.0
NOTEX: The port number is not set to the discard port number \"9\" since the
SCC AS is aware of the port number. The discard port number \"9\" just
indicated the SCC AS not to remove the media from the controller UE, UE-1.
**14-17. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP INVITE request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
Table 4.7.4.2.1.2-14: SIP 200 (OK) response (UE-2 to SCC-AS anchoring the
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6+g.3gpp.iut-
> controller
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 97 0
>
> c=123.112.67.87
**18-21. SIP ACK request (from SCC-AS Anchoring the session to controllee
UE)**
SCC-AS sends SIP ACK request to the UE-2.
**22-23. SIP re-INVITE request (from SCC-AS anchoring the session to the
remote UE)**
SCC-AS anchoring the session sends SIP re-INVITE request to the remote UE.
Table 4.7.4.2.1.2-22: SIP re-INVITE request (SCC-AS anchoring the session to
the remote UE)
> INVITE
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag=66666
>
> From: sip:user1_public1\@home1.net;tag=33333
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:
> user1_public1\@home1.net;**gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 96 0
**24-25. SIP 200 (OK) response (from remote UE to SCC-AS anchoring the
session)**
The remote UE acknowledges the SIP re-INVITE request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
Table 4.7.4.2.1.2-24: SIP 200 (OK) response (remote UE to SCC-AS anchoring
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> c=IN IP4 132.54.76.98
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
**26-27. SIP ACK request (from SCC-AS anchoring the session to the remote
UE)**
The SCC-AS anchoring the session sends SIP ACK request to the remote UE.
**28-31. SIP re-INVITE request (from SCC-AS anchoring the session to UE-2)**
The SCC-AS anchoring the session sends a SIP re-INVITE request to the
controllee UE, UE-2 to inform controllee UE adding now an a-line set to active
for the audio and c-line to the IP address of the remote UE in the SDP offer.
Table 4.7.4.2.1.2-27: SIP INVITE request (SCC-AS anchoring the session to
UE-2)
> INVITE sip:user2_public1\@home2.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2_public1\@home2.net;
>
> From: sip:user3_public3\@home3.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user3_public3\@home3.net
>
> Require:
>
> Referred-By: sip:user1_public1\@home1.net
>
> Contact:
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 125.124.123.122
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 97 0
>
> a=active
**32-35. SIP 200 (OK) response (from UE-2 to SCC-AS anchoring the session)**
The controllee UE, UE-2, acknowledges the SIP INVITE request by sending SIP
200 (OK) response to SCC-AS anchoring the session.
Table 4.7.4.2.1.2-31: SIP 200 (OK) response (UE-2 to SCC-AS anchoring the
session)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Preferred-Identity:
>
> Contact:
> sip:user2_public1\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6+g.3gpp.iut-
> controller
>
> Allow: INVITE, PRACK, UPDATE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 97 0
>
> c=123.112.67.87
**36-39. SIP ACK request (from SCC-AS anchoring the session to the controllee
UE)**
The SCC-AS anchoring the session sends SIP ACK request to controllee UE to
acknowledge.
**40-41. SIP UPDATE request (from SCC-AS anchoring the session to controller
UE, UE-1)**
A SIP UPDATE.request is sent to the controller UE, UE-1, to inform about the
media port numbers and IP address of MRF.
**42-43. SIP 200 (OK) response (from controller UE to SCC-AS anchoring the
session)**
> The controller UE acknowledges the SIP UPDATE request by sending SIP 200
> (OK) response to the SCC-AS anchoring the session.
**44-45. SIP NOTIFY request (from SCC-AS anchoring the session to controller
UE, UE-1)**
When the media component is added to the controller UE, UE-1, the SCC-AS sends
SIP NOTIFY request to controller UE, UE-1 to inform about the success status
of adding the media to the UE-2.
Table 4.7.4.2.1.2-39: SIP NOTIFY request (SCC-AS anchoring the session to
UE-1)
> NOTIFY
>
> Via:
>
> To: sip:user1_public1\@home1.net;tag = 13579
>
> From: sip:interUEtransfer\@example.net;tag=24680
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: refer
>
> Subscription-State:terminated; reason=noresource
>
> Content-Type: message/sipfrag ;version=2.0
>
> Content-Length: (...)
>
> SIP/2.0 200 OK
>
> Content-Type: application/sdp
>
> m=audio 1456 RTP/AVP 97 0
**41-42. SIP 200 (OK) response (from controller UE to SCC-AS anchoring the
session)**
The controller UE acknowledges the NOTIFY request by sending SIP 200 (OK)
response to the SCC-AS anchoring the session.
#### 4.7.4.3 Session replication by remote UE -- pull mode
##### 4.7.4.3.1 Alternative 1
###### 4.7.4.3.1.1 Single subscription
###### 4.7.4.3.1.2 Dual subscription
This subclause describes the scenario when the session is replicated in the
remote UE upon request from UE-2. The session is established using IMS
communication service identified by ICSI urn:urn-7:3gpp-service.ims.icsi.iptv.
The flow diagram shows when UE-1 and UE-2 belong to two different
subscriptions.
UE-1(123.45.67.89) is in an active session with the remote UE (132.54.76.98).
The remote UE included the g.3gpp.iut.replicator media feature tag with value
fa77as7dad8-sd98ajzz\@sccas.home3.net;local-tag=kkaz;remote-tag=6544 in the
Contact header when establishing the session. The call is anchored in the SCC
AS of the UE-1. Prior to pull the session replication, UE-2 gets the dialog
information of UE-1 such as the media type and port numbers on the remote end
or IMS communication service identifier of each session. This is done by UE-2
having subscribed to dialog event package between UE-1 and the SCC AS.
Figure 4.7.4.3.1.2-1: Signalling flow for session replication in the remote UE
-- Pull mode
**1-4. SIP INVITE request (from UE-2 to remote UE)**
UE-2 (123.112.67.87) sends a SIP INVITE request to the remote UE.
Table 4.7.4.3.1.2-1: SIP INVITE request (UE-2 to remote UE)
> INVITE
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas2.home2.example.net
>
> To: sip:user3_public3\@home3.net;
>
> From: sip:user2_public1\@home2.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user2_public1\@home2.net
>
> Contact: \ =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 >;+**g.3gpp.icsi-
> ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.iptv\"
>
> P-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.iptv
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.iptv\"
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> Accept-Contact: *;+g.3gpp.iut.replicator; explicit; require
>
> Target-Dialog: fa77as7dad8-sd98ajzz\@sccas.home3.net;local-tag=kkaz;remote-
> tag=6544
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 96 0
>
> c=IN IP4 123.112.67.87
**5-8. SIP 200 (OK) response (from remote UE to UE-2)**
The remote UE acknowledges the SIP INVITE request by sending SIP 200 (OK)
response to UE-2. Based on the Accept-Contact header field with the
g.3gpp.iut.replicator media feature tag and the dialog identifier provided in
the Target-Dialog header field, the remote UE sets the playback state in the
session being established to the same state as the playback state of the
session being replicated, i.e. fa77as7dad8-sd98ajzz\@sccas.home3.net;local-
tag=kkaz;remote-tag=6544.
Since the replicated session is a new independent session which can be further
replicated, the g.3gpp.iut.replicator media feature tag with a new value is
included in the Contact header field.
Table 4.7.4.3.1.2-5: SIP 200 (OK) response (Remote UE to UE-2)
> SIP/2.0 200 OK
>
> Via:
>
> To: sip:user3_public3\@home3.net;tag=aabb
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact:
> \ >;+**g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.iptv\";+g.3gpp.iut.replicator=\"dkjhlfjgrt\@sccas.home3.net;local-
> tag=aabb;remote-tag=acegi\"
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 132.54.76.98
**9-12. SIP ACK request (from UE-2 to the remote UE)**
The controllee UE, UE-2, sends SIP ACK request to the remote UE.
##### 4.7.4.3.1A Alternative 1A
###### 4.7.4.3.1A.1 Single subscription
###### 4.7.4.3.1A.2 Dual subscription
In the example flow at the figure 4.7.4.3.1A.2-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. The session is established
using an IMS communication service identified by ICSI urn:urn-7:3gpp-
service.ims.icsi.iptv. UE-1 and UE-2 belong to different subscribers. UE-3 is
an application server acting as a terminating UE.
Figure 4.7.4.3.1A.2-1: Signalling flow for session replication in the remote
UE -- Pull mode
NOTE: For clarity, the SIP 100 (Trying) messages and SIP NOTIFY with SIP 100
(Trying) are not shown in the signalling flow.
**1\. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS-1. The session was established
using IMS communication service identified by ICSI urn:urn-7:3gpp-
service.ims.icsi.iptv. The dialog identifier of the session between SCC AS-1
and UE-1 is AB03a0s09a2sdfglkj490333, remote-tag=dfg45, local-tag=444.
**2\. UE-2 decides to replicate the session of UE-1 to UE-2.**
**3\. UE-2 fetches the dialog information of the UE-1 from SCC AS-1.**
**4-9. SIP REFER request (UE-2 to UE-1) - see example in table
4.7.4.3.1A.2-4**
The UE-2 sends SIP REFER request to UE-1 to request the playback state. When
SCC AS-1 forwards the SIP REFER request, the SCC AS-1 authorizes the request.
Table 4.7.4.3.1A.2-4: SIP REFER request
> REFER sip:user1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-1111-111111111111
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:fff]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: ddfftq34gasgaegr
>
> Cseq: 1112 REFER
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/vnd.3gpp.replication+xml
>
> Content-Length: (...)
>
> Supported: 100rel, precondition
>
> Refer-To:
> \ Reply-To=ddfftq34gasgaegr>
>
> Target-Dialog: AB03a0s09a2sdfglkj490333;remote-tag=dfg45;local-tag=444
>
> Require: tdialog
>
> \
>
> \
> xmlns:ms=\"urn:3gpp:ns:mediaState:1.0\"
>
> >
>
> ....
>
> \
**Request-URI:** set to the URI of UE-1
**Refer-To:** contains the URI of UE-2 extended with the method parameter set
to MESSAGE and with In-Reply-To URI header field containing the call-id of the
SIP REFER request
**Target-Dialog:** contains the dialog identifier of the session being
replicated
**application/vnd.3gpp.replication+xml: lists the playback state parameters to
be provided**
**10-15. SIP 202 (Accepted) response for the SIP REFER request (UE-1 to
UE-2)**
**16-21. SIP MESSAGE request (UE-1 to UE-2)**
Based on the received SIP REFER request, the UE-2 generate a SIP MESSAGE
request with values of the requested playback state parameters.
Table 4.7.4.3.1A.2-16: SIP MESSAGE request
> MESSAGE
> sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:32ff]:887;comp=sigcomp;branch=z9hG4bKnashds775
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=aaa171828
>
> To: \
>
> Call-ID: dfsgaerddfftq34gasgaegr
>
> Cseq: 41112 MESSAGE
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/vnd.3gpp.replication+xml
>
> Content-Length: (...)
>
> Supported: 100rel, precondition
>
> In-Reply-To: ddfftq34gasgaegr
>
> \
>
> \
> xmlns:ms=\"urn:3gpp:ns:mediaState:1.0\"
>
> >
>
> ....
>
> \
**Request-URI:** set to the URI of UE-2
**In-Reply-To** : containing the value of the In-Reply-To URI header field of
the Refer-To header field of the SIP REFER request
**application/vnd.3gpp.replication+xml: lists the values of the requested
playback state parameters**
**22-27. SIP 200 (OK) response to SIP MESSAGE request (UE-2 to UE-1)**
The UE-2 confirms the SIP MESSAGE request by sending SIP 200 (OK) response to
SIP MESSAGE request.
**28-33**. **SIP NOTIFY request (UE-1 to UE-2)**
The UE-1 informs the UE-2 that the action triggered by SIP REFER request was
successfully completed.
**34-39. SIP 200 (OK) response to SIP NOTIFY request (UE-2 to UE-1)**
The UE-2 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
**40-44. SIP INVITE request (UE-2 to UE-3)**
The UE-2 establishes a session with UE-3 using the remote URI provided in the
dialog event package in the step 3.
**45-49. SIP 200 (OK) response to SIP INVITE request (UE-3 to UE-2)**
The UE-3 establishes the session by sending SIP 200 (OK) response to SIP
INVITE request.
**50-54. SIP ACK request (UE-2 to UE-3)**
**55\. UE-2 sets up the playback state based on the playback state parameters
received message 21.**
**56-57. Media path:**
Two independent sessions exist - the original session still has the media path
between UE-1 and UE-3 and the replicated session has the media path between
UE-2 and UE-3.
##### 4.7.4.3.2 Alternative 2
###### 4.7.4.3.2.1 Single subscription
###### 4.7.4.3.2.2 Dual subscription
This subclause describes the scenario when the session is replicated in the
remote UE upon request from UE-2. The flow diagram shows when UE-1 and UE-2
belong to two different subscriptions.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
UE-1(123.45.67.89) is in an active session with the remote UE (132.54.76.98).
The call is anchored in the SCC AS of the UE-1. Prior to pull the session
replication, UE-2 gets the dialog information of UE-1 such as the content
media type and port numbers on the remote end or IMS communication service
identifier of each session. This is done by UE-2 having subscribed to dialog
event package between UE-1 and the SCC AS.
Figure 4.7.4.3.2.2-1: Signalling flow for session replication in the remote UE
-- Pull mode
**1-4. SIP INVITE request (from UE-2 to remote UE)**
UE-2 (123.112.67.87) sends a SIP INVITE request to the remote UE.
Editor\'s Note: It is FFS if and how to indicate the association with the
existing dialog between UE-1 and the remote UE to the remote UE.
Editor\'s Note: It is FFS if and how UE-2 gets the information about the media
playback parameters from UE-1.
Editor\'s Note: it is FFS if and how to discover and indicate the IMS
Communication Service to be used by UE-2. The solution should be designed in a
way that any type of IMS Communication Service can be used.
Table 4.7.4.3.2.2-1: SIP INVITE request (UE-2 to remote UE)
> INVITE
> sip:user3_public3\@home3.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas2.home2.example.net
>
> To: sip:user3_public3\@home3.net;
>
> From: sip:user2_public1\@home2.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: \"remote user\" sip:user2_public1\@home2.net
>
> Contact: \ =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6 >;+**g.3gpp.icsi-
> ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.iptv\"
>
> P-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.iptv
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.iptv\"
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 96 0
>
> c=IN IP4 123.112.67.87
>
> a=3gpp.iut.replication ue pull receiver
>
> **a= 3gpp. iut. replication:** the replication is sent by the controllee UE
> (receiver) and using the UE based solution.
**5-8. SIP 200 (OK) response (from remote UE to UE-2)**
The remote UE acknowledges the SIP INVITE request by sending SIP 200 (OK)
response to UE-2
Table 4.7.4.3.2.2-5: SIP 200 (OK) response (Remote UE to UE-2)
> SIP/2.0 200 OK
>
> Via:
>
> To:
>
> From:
>
> Call-ID:
>
> CSeq:
>
> P-Asserted-Identity:
>
> Contact:
> \ >;+**g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.iptv\"
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 132.54.76.98
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 132.54.76.98
>
> a=3gpp.iut.replication ue pull replicator
>
> **a= 3gpp. iut. replication:** the response is sent by the replicator, i.e.
> remote UE-3.
**9-12. SIP ACK request (from UE-2 to the remote UE)**
The controllee UE, UE-2, sends SIP ACK request to the remote UE.
#### 4.7.4.4 Session replication by remote UE -- push mode
##### 4.7.4.4.1 Alternative 1
###### 4.7.4.4.1.1 Single subscription
###### 4.7.4.4.1.2 Dual subscription
In the example flow at the figure 4.7.4.4.1.2-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. The UE-3 included the
g.3gpp.iut.replicator media feature tag with value
fa77as7dad8-sd98ajzz\@sccas.home3.net;local-tag=kkaz;remote-tag=6544 in the
Contact header when establishing the session. UE-1 and UE-2 belong to
different subscribers.
Figure 4.7.4.4.1.2-1: Signalling flow for replication of session existing at
other UE
NOTE: For clarity, the SIP 100 (Trying) responses and SIP NOTIFY requests with
SIP 100 (Trying) are not shown in the signalling flow.
**1\. UE-1 is in session with UE-3**
The dialog identifier of the session between SCC AS-1 and UE-1 is
AB03a0s09a2sdfglkj490333, remote-tag=dfg45, local-tag=444.
**2\. UE-1 decides to replicate the session from UE-1 to UE-2.**
**3-9. SIP REFER request (UE-1 to UE-2) - see example in table 4.7.4.4.1.2-3**
The UE-1 sends SIP REFER request to UE-2 to request the session replication.
When SCC AS-2 receives the SIP REFER request, the SCC AS-2 authorizes the
request.
Table 4.7.4.4.1.2-3: SIP REFER request (**UE-1 to Intermediate IM CN subsystem
entities**)
> REFER sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 REFER
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Refer-To:
> \ Service=urn:urn-7:3gpp-service.ims.icsi.iptv&Accept-
> Contact=*%3b+g.3gpp.icsi-ref%3d%22urn%253Aurn-7%253gpp-
> service.ims.icsi.iptv%22&Accept-
> Contact:*%3bg.3gpp.iut.replicator%3dexplicit%3brequire&Target-
> Dialog=fa77as7dad8-sd98ajzz%40sccas.home3.net%3Blocal-tag%3Dkkaz%3Bremote-
> tag%3D6544%0A>
>
> Referred-By: \
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; ealg=aes-cbc;
> spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531
**Request-URI:** contains the GRUU of the UE-2
**Refer-To:** contains the URI of UE-3 together with Accept-Contact header
field indicating that replication is requested and Target-Dialog header field
containing the dialog identifier of the session to be replicated.
**10-16. SIP 202 (Accepted) response for the SIP REFER request (UE-1 to
UE-2)**
**17-21. SIP INVITE request (UE-2 to UE-3)**
The UE-2 establishes a session with UE-3 based on the information provided in
the SIP REFER request.
Table 4.7.4.4.1.2-17: SIP INVITE request (UE-2 to UE-3)
> INVITE
> sip:user3\@home2.net;**gr=urn:uuid:f81d4fae-17oct-11a1-a678-0054c91eabcd**
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas2.home2.example.net
>
> To: sip:user3\@home2.net
>
> From: sip:user2\@home1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: sip:user2\@home1.net
>
> Contact:
> \
> ;+**g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.iptv\"
>
> P-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.iptv
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.iptv\"
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> Accept-Contact: *;+g.3gpp.iut.replicator; explicit; require
>
> Target-Dialog: fa77as7dad8-sd98ajzz\@sccas.home3.net;local-tag=kkaz;remote-
> tag=6544
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 96 0
>
> c=IN IP4 123.112.67.87
**22-26. SIP 200 (OK) response to SIP INVITE request (UE-3 to UE-2)**
The UE-3 establishes the session by sending SIP 200 (OK) response to SIP
INVITE request. Based on the Accept-Contact header field with the
g.3gpp.iut.replicator media feature tag and the dialog identifier provided in
the Target-Dialog header field, the UE-3 sets the playback state in the
session being established to the same state as the playback state of the
session being replicated, i.e. fa77as7dad8-sd98ajzz\@sccas.home3.net;local-
tag=kkaz;remote-tag=6544.
**27-31. SIP ACK request (UE-2 to UE-3)**
**32-38**. **SIP NOTIFY request (UE-2 to UE-1)**
The UE-2 informs the UE-1 that the action triggered by SIP REFER request was
successfully completed.
**39-45. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to UE-2)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
**46-47. Media**
Two independent sessions exist - the original session still has the media path
between UE-1 and UE-3 and the replicated session has the media path between
UE-2 and UE-3.
##### 4.7.4.4.1A Alternative 1A
###### 4.7.4.4.1A.1 Single subscription
###### 4.7.4.4.1A.2 Dual subscription
In the example flow at the figure 4.7.4.4.1A.2-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to
different subscribers.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
Figure 4.7.4.4.1A.2-1: Signalling flow for replication of session existing at
other UE
NOTE: For clarity, the SIP 100 (Trying) responses and SIP NOTIFY requests with
SIP 100 (Trying) are not shown in the signalling flow.
**1\. UE-1 is in session with UE-3**
The dialog identifier of the session between SCC AS-1 and UE-1 is
AB03a0s09a2sdfglkj490333, remote-tag=dfg45, local-tag=444.
**2\. UE-1 decides to replicate the session from UE-1 to UE-2.**
**3-9. SIP REFER request (UE-1 to UE-2) - see example in table
4.7.4.4.1A.2-3**
The UE-1 sends SIP REFER request to UE-2 to request the session replication.
When SCC AS-2 receives the SIP REFER request, the SCC AS-2 authorizes the
request.
Table 4.7.4.4.1.2-3: SIP REFER request (**UE-1 to Intermediate IM CN subsystem
entities**)
> REFER sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 REFER
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Refer-To: \ service.ims.icsi.iptv&Accept-Contact=*%3b+g.3gpp.icsi-
> ref%3d%22urn%253Aurn-7%253gpp-service.ims.icsi.iptv%22>
>
> Referred-By: \
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; ealg=aes-cbc;
> spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531
>
> Content-Type: application/vnd.3gpp.replication+xml
>
> Content-Length: (...)
>
> \
>
> \
>
> \
> xmlns:ms=\"urn:3gpp:ns:mediaState:1.0\"
>
> >
>
> ....
>
> \
>
> \
**Request-URI:** contains the GRUU of the UE-2
**Refer-To:** contains the URI of UE-3 and IMS Communication Service of the
existing session.
**application/vnd.3gpp.replication+xml: indicates that push mode replication
is requested and if available, lists the values of the playback state
parameters**
**10-16. SIP 202 (Accepted) response for the SIP REFER request (UE-1 to
UE-2)**
**17-21. SIP INVITE request (UE-2 to UE-3)**
The UE-2 establishes a session with UE-3 based on the information provided in
the SIP REFER request.
Table 4.7.4.4.1A.2-17: SIP INVITE request (UE-2 to UE-3)
> INVITE sip:user3\@home2.net SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas2.home2.example.net
>
> To: sip:user3\@home2.net
>
> From: sip:user2\@home1.net;tag=acegi
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity: sip:user2\@home1.net
>
> Contact:
> \
> ;+**g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-service.ims.icsi.iptv\"
>
> P-Preferred-Service: urn:urn-7:3gpp-service.ims.icsi.iptv
>
> Accept-Contact: *;+g.3gpp.icsi-ref=\"urn%3Aurn-7%3gpp-
> service.ims.icsi.iptv\"
>
> Allow:
>
> Content-Type: application/sdp
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.112.67.87
>
> s=-
>
> t=0 0
>
> m=audio 1456 RTP/AVP 96 0
>
> c=IN IP4 123.112.67.87
**22-26. SIP 200 (OK) response to SIP INVITE request (UE-3 to UE-2)**
The UE-3 establishes the session by sending SIP 200 (OK) response to SIP
INVITE request.
**27-31. SIP ACK request (UE-2 to UE-3)**
**32-38**. **SIP NOTIFY request (UE-2 to UE-1)**
The UE-2 informs the UE-1 that the action triggered by SIP REFER request was
successfully completed.
**39-45. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to UE-2)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
**46-47. Media**
Two independent sessions exist - the original session still has the media path
between UE-1 and UE-3 and the replicated session has the media path between
UE-2 and UE-3.
###### 4.7.4.4.2 Alternative 2
###### 4.7.4.4.2.1 Single subscription
###### 4.7.4.4.2.2 Dual subscription
In the example flow at the figure 4.7.4.4.2.2-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to
different subscribers.
Editor\'s Note: It is FFS if the session replication can be replication of
some of the media components belonging to the session.
Figure 4.7.4.4.2.2-1: Signalling flow for replication of session existing at
other UE
NOTE: For clarity, the SIP 100 (Trying) responses and SIP NOTIFY requests with
SIP 100 (Trying) are not shown in the signalling flow.
**1\. UE-1 is in session with UE-3**
The dialog identifier of the session between SCC AS-1 and UE-1 is
AB03a0s09a2sdfglkj490333, remote-tag=dfg45, local-tag=444.
**2\. UE-1 decides to replicate the session from UE-1 to UE-2.**
**3-9. SIP REFER request (UE-1 to UE-2) - see example in table 4.7.4.4.2.2-3**
The UE-1 sends SIP REFER request to UE-2 to request the session replication.
When SCC AS-2 receives the SIP REFER request, the SCC AS-2 authorizes the
request.
Table 4.7.4.4.2.2-3: SIP REFER request (**UE-1 to Intermediate IM CN subsystem
entities**)
> REFER sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 REFER
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Refer-To: \ service.ims.icsi.iptv&Accept-Contact=*%3b+g.3gpp.icsi-
> ref%3d%22urn%253Aurn-7%253gpp-
> service.ims.icsi.iptv%22;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6?body=
> m%3Dvedio%209%20RTP%2FAVP%98%0Dm% a=3gpp.iut.replication ue push controller
> 4444::aaa:bbb:ccc:eee>
>
> Referred-By: \
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; ealg=aes-cbc;
> spi-c=98765432; spi-s=87654321; port-c=8642; port-s=7531
**Request-URI:** contains the GRUU of the UE-2
**Refer-To:** contains the URI of UE-3.
> **a= 3gpp. iut. replication:** the replication request is sent from the
> controller UE and using UE based solution.
Editor Note: It is FFS if and how to indicate the association with the
existing dialog between UE-1 and the remote UE to the remote UE.
Editor Note: It is FFS if and how UE-2 gets the information about the media
playback parameters from UE-1.
**10-16. SIP 202 (Accepted) response for the SIP REFER request (UE-1 to
UE-2)**
**17-21. SIP INVITE request (UE-2 to UE-3) - see example in table
4.7.4.4.2.2-17**
The UE-2 establishes a session with UE-3 based on the information provided in
the SIP REFER request.
Table 4.7.4.4.1.2-17: SIP INVITE request (UE-2 to Intermediate IM CN subsystem
entities)
> INVITE sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via: SIP/2.0/UDP
>
> Max-Forwards: 70
>
> From: \;tag=171828
>
> To: \
>
> Referred-By: sip: user1\@example1.net
>
> Call-ID: duie4hr3896
>
> Cseq: 41 INVITE-
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Length: 0
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:fff
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:fff
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> m=video 6666 RTP/AVP 98
>
> a=rtpmap:98 MPV/90000
>
> a=g.3gpp.iut.replication ue push receiver
**a= 3gpp. iut. replication:** the replication request is sent from the
controllee UE to setup the replication session.
**22-26. SIP 200 (OK) response to SIP INVITE request (UE-3 to UE-2)**
The UE-3 establishes the session by sending SIP 200 (OK) response to SIP
INVITE request.
**27-31. SIP ACK request (UE-2 to UE-3)**
**32-38**. **SIP NOTIFY request (UE-2 to UE-1)**
The UE-2 informs the UE-1 that the action triggered by SIP REFER request was
successfully completed.
**39-45. SIP 200 (OK) response to SIP NOTIFY request (UE-1 to UE-2)**
The UE-1 confirms the SIP NOTIFY request by sending SIP 200 (OK) response to
SIP NOTIFY request.
**46-47. Media**
Two independent sessions exist - the original session still has the media path
between UE-1 and UE-3 and the replicated session has the media path between
UE-2 and UE-3.
## 4.8 Inter-UE Transfer between UEs connected to the IMS and UEs in the CS
domain
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.9 of 3GPP TR
23.831 [3]
### 4.8.1 General
### 4.8.2 Procedures
### 4.8.3 Identified issues
### 4.8.4 Call flows
## 4.9 Session discovery
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.a of 3GPP TR
23.831 [3]
### 4.9.1 General
### 4.9.2 Procedures
#### 4.9.2.1 Alternative 1
##### 4.9.2.1.1 SC UE
In order to discover sessions of a user, the SC UE shall send SIP SUBSCRIBE
request according to IETF RFC 4235 [12]. The SC UE shall populate the SIP
SUBSCRIBE request as follows:
1\. the Request-URI set to the public user identity of the user;
2\. the Event header field containing the \"dialog\" event package name;
3\. the Accept-Contact header field with the g.3gpp.iut-xyz media feature tag
together with explicit and require; and
4\. the Expires header field set to zero.
##### 4.9.2.1.2 SCC AS
###### 4.9.2.1.2.1 Distinction of requests sent to the SCC AS
The SCC AS distinguish the following initial SIP requests:
1\. SIP SUBSCRIBE request containing Request-URI with the public user identity
of a served user, the Event header field with \"dialog\" event name and the
Accept-Contact header field with the g.3gpp.iut-xyz media feature tag along
with explicit and require.
In the procedures below, such request is known as \"SIP SUBSCRIBE request for
session discovery\".
Other SIP requests can be dealt with in any manner conformant with 3GPP TS
24.229 [2].
###### 4.9.2.1.2.2 SCC AS procedures for discovery of sessions
When the SCC AS receives a SIP SUBSCRIBE request for session discovery, the
SCC AS shall:
1\. if the subscriber is not authorized to receive the dialog information of
the user identified by Request-URI, then reject the SIP request with a SIP 403
(Forbidden) response and do not process the remaining steps; and
Editor\'s note: authorization policy is FFS
2\. handle the SIP request according to IETF RFC 4235 [48].
### 4.9.3 Identified issues
### 4.9.4 Call flows
#### 4.9.4.1 Discovery of sessions of user of same or different IMS
subscription using dialog event package subscription
##### 4.9.4.1.1 Alternative 1
In the example flow at the figure 4.9.4.1.1-1, UE-1 has an ongoing multimedia
session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to different
subscribers.
Figure 4.9.4.1.1-1: Signalling flow for discovery of sessions of user at other
UE
NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
signalling flow.
**1-2. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS-1. The dialog identifier of the
session between SCC AS-1 and UE-1 is AB03a0s09a2sdfglkj490333, remote-
tag=dfg45, local-tag=444.
**3\. UE-2 decides to discover sessions of user at UE-1**
**4-7. SIP SUBSCRIBE request (from UE-2 to SCC AS-1) - see example in table
4.9.4.1.1-4**
The UE-2 sends SIP SUBSCRIBE request to fetch the dialog information of the
dialogs of user at UE-1. SCC AS-2 is invoked upon originating initial filter
criteria but since Request-URI does not contain a URI owned by SCC AS, the SCC
AS-2 forwards the request.
Table 4.9.4.1.1-4: SIP SUBSCRIBE request
> SUBSCRIBE sip:user1\@home1.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:fff]:1357;comp=sigcomp;branch=z9hG4bKnashds7664
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: tq34gasgaeg335r
>
> Event: dialog
>
> CSeq: 145454 SUBSCRIBE
>
> Max-Forwards: 70
>
> Expires: 0
>
> Contact:
> \
>
> Accept: application/dialog-info+xml
>
> Accept-Contact: *;+g.3gpp.iut-xyz;explicit;require
>
> Content-Length: 0
**8-11. SIP 202 (Accepted) response (from SCC AS-1 to UE-2)**
Since the request is addressed to a user served by SCC AS-1 and since the
request contains the g.3gpp.iut-xyz media feature tag in the Accept-Contact
header field, the SCC AS-1 acknowledges the SIP SUBSCRIBE request by sending
SIP 202 (Accepted) response.
**12-15. SIP NOTIFY request (from SCC AS-2 to UE-2) - see example in table
4.9.4.1.1-12**
The SCC AS-1 sends SIP NOTIFY request containing the dialog information
related to dialogs between the SCC AS-1 and the UEs of user.
Table 4.9.4.1.1-12: SIP NOTIFY request
> NOTIFY sip:user2\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-2222-222222222222
> SIP/2.0
>
> Via:
>
> To: \;tag=171828
>
> From: \;tag=eerr
>
> Call-ID:
>
> CSeq:
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact: sip:sccas1.home1.example.net
>
> Allow:
>
> Event: dialog
>
> Content-Type: application/dialog-info+xml
>
> Content-Length: (...)
>
> \
>
> \
> version=\"0\"
>
> state=\"full\"
>
> entity=\"sip:user1\@home1.net\">
>
> \ tag=\"444\" remote-tag=\"dfg45\">
>
> \confirmed\
>
> \
>
> \sip:remoteuser\@home2.net\
>
> \ uri=sip:remoteuser\@home2.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-333333333333\">
>
> \ service.ims.icsi.iptv\"/>
>
> \
>
> \
>
> \
>
> \sip:user1\@home1.net\
>
> \ uri=\"sip:user1\@home1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-111111111111\">
>
> \ service.ims.icsi.iptv\"/>
>
> \
>
> \
>
> \
>
> \
**16-19. SIP 200 (OK) response (from UE-2 to SCC AS-1)**
The UE-2 acknowledges the SIP NOTIFY request by sending SIP 200 (OK) response
to SCC AS-1.
## 4.10 Collaborative session handling upon loss of collaborative session
control
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.b of 3GPP TR
23.831 [3]
### 4.10.1 General
### 4.10.2 Procedures
#### 4.10.2.1 Set controller loss preference using XCAP over Ut interface
User may send or modify controller loss preference at any time during a
session using XCAP over Ut interface. Candidate UEs in controller loss
preference should be configured in a priority order.
#### 4.10.2.2 Session handling upon controller lost
Since SCC AS inserted itself in record-route header in IUT situation, when
radio/bearer resources are no longer available or the signalling bearer is
lost to the UE for a session (e.g. abort session request from PCRF) (as
specified in 24.229[4] subclause 5.2.8.1.2), the SCC AS will receive a BYE
message with a reason header 503 (Service Unavailable) response code. SCC AS
should not send 2xx responses for the BYE request if it wants to handle the
controller loss, because the P-CSCF will delete all information related to the
dialog and the related multimedia session upon receiving 2xx responses for the
BYE request (24.229 [4] subclause 5.2.8.1.2).
Editor's note: use SIP signaling timeout or SIP error response returned by
P-CSCF for controller loss detection is FFS.
SCC AS uses subscription information and session status to select a controller
based on controller loss preference.
SCC AS checks for presence of controller loss preference in case of controller
loss. If present, the SCC AS checks for priority among controllees for
assuming the controller role. The SCC AS sequentially requests controllees to
assume controller role according to the priority assigned in the controller
loss preference.
The SCC AS indicates to the selected UE to become a controller of the
collaborative session on lost controller UE, using procedures in subclause
4.5.2.3. Selected UE can choose to accept or reject the offer using procedures
in subclause 4.5.2.4.
If SCC AS receives a 2xx response, session control is assumed to be accepted
by the selected UE. SCC AS then transfers the session control to this new
controller using procedures in subclause 4.5.2.4.
If selected UE replies with a non 2xx response, it is assumed by the SCC AS
that the selected UE has declined the offer to be a new controller. The SCC AS
then repeats the procedure in 4.5.2.3 after selecting another UE to which
controller role is offered to. If no suitable candidate UE is left, SCC AS
releases the session and sends BYE message to all UEs participating in the
session.
### 4.10.3 Identified issues
### 4.10.4 Call flows
#### 4.10.4.1 Configuration of controller loss preference
##### 4.10.4.1.1 Introduction
The configuration of the controller loss preferences is described in subclause
4.10.2.1. The mechanism used is via the Ut interface as described in 3GPP TS
23.623 [25]. The following describes the XML document required for configuring
the list of preferred UEs that are used in the case of controller loss.
NOTE: Other possibilities for user configuration, such as web-based
provisioning or pre-provisioning by the operator are outside the scope of the
present document, but are not precluded.
##### 4.10.4.1.2 Structure of the XML document
###### 4.10.4.1.2.1 General
Controller Loss Preferences documents are subâ€‘trees of the _simservs_ XML
document specified in 3GPP TS 24.623 [25]. As such, Originating Identity
documents use the XCAP application usage in 3GPP TS 24.623 [6].
**Data semantics:** The semantics of the Controller Loss Preferences XML
configuration document is specified in subclause 4.10.4.1.2.2.
**XML schema:** Implementations in compliance with the present document shall
implement the XML schema that minimally includes the XML Schema defined in
subclause 4.10.4.1.2.3 and the _simservs_ XML schema specified in subclause
6.3 of 3GPP TS 24.623 [25].
An instance of an Controller Loss Preferences document is shown:
\
\
\
\ uri \
\
\
###### 4.10.4.1.2.2 Definitions
Candidate UEs in controller loss preferences can be configured using the
active attribute of the \ service element. A list
of URIs identifying each UE that is a candidate UE for controller loss
preference is configured in a priority order.
###### 4.10.4.1.2.3 XML Schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
#### 4.10.4.2 Session handling upon controller lost
**1\. Collaborative session controlled by UE-1**
A collaborative session is established between UE-1 and UE-2 and the remote UE
with UE-1 acting as the controller UE and UE-2 acting as a controllee UE. For
simplicity, other UEs participating in the session are not shown in this flow
and only controllee UEs have media flows with the remote UE.
**2\. SIP BYE (IMS CN to SCC AS)**
> When S-CSCF receives a SIP BYE message with a reason header 503 (Service
> Unavailable) from P-CSCF that detecting the lost of UE, it routes this SIP
> BYE message to SCC AS of the session.
**3\. SCC AS checks for presence of controller loss preference configuration
and if present it selects a candidate UE as new controller. Otherwise the
session is released.**
**4\. SIP INFO (SCC AS to UE-2)**
SCC AS asks UE-2 to assume the controller role by sending a SIP INFO transfer
request to UE-2.
> To indicate the (controller transfer) purpose of the SIP INFO request, the
> Info Package mechanism is being utilized. The controller transfer purpose is
> indicated by the Info-Package header field value
> \"collaborativeSessionControl\".
Editor's note: The Info Package name to be used and its detailed specification
is FFS.
Editor's note: It is FFS whether the request for assuming the controller role
should be based on SIP INVITE instead of SIP INFO.
**5\. SIP 200 (OK) responses to SIP INFO request (UE-2 to SCC AS)**
**6\. SIP INFO request (UE-2 to SCC AS)**
UE-2 confirms the collaborative session control transfer request by sending a
SIP INFO request to the SCC AS.
> To indicate the (controller transfer) purpose of the SIP INFO request, the
> Info Package mechanism is being utilized. The controller transfer purpose is
> indicated by the Info-Package header field value
> \"collaborativeSessionControl\".
**7\. SIP 200 (OK) response to SIP INFO request (SCC AS to UE-2)**
**8\. SIP INFO request (SCC AS to UE-2)**
Upon receiving the confirmation from UE-2 the SCC AS informs UE-2 about the
new controller assignment by sending a SIP INFO request to UE-2.
> To indicate the purpose of the SIP INFO request, the Info Package mechanism
> is being utilized. The controller transfer purpose is indicated by the Info-
> Package header field value \"collaborativeSessionControl\".
**9\. SIP 200 (OK) responses to SIP INFO request (UE-2 to SCC AS)**
**10\. Collaborative session controlled by UE-2**
## 4.11 Media modification
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.c of 3GPP TR
23.831 [3]
### 4.11.1 General
### 4.11.2 Procedures
#### 4.11.2.1 Controller UE initiated media modification on controllee UE
##### 4.11.2.1.1 Controller UE
The controller UE procedures for modifying media on controllee UE by the
controller UE is the same as the procedure described in 3GPP TS 24.237[6]
subclause 16.2.2.1 with exception that the controller UE additionally sets the
port numbers for the media types of the media components (in the hname
\"body\" URI header field in the SIP URI in the Refer-To header field of the
SIP REFER request) which are being modified on the controllee UE to values
from the corresponding media lines received during the last successful SDP
offer and answer exchange with the remote party.
##### 4.11.2.1.2 SCC AS serving for collaborative session
The SCC AS procedures for modifying media on controllee UE by the controller
UE is the same as the procedure described in 3GPP TS 24.237[6] subclause
16.3.3.
#### 4.11.2.2 Controllee UE initiated media modification on itself
##### 4.11.2.2.1 Controllee UE
If the controllee UE wants to modify the characteristics of a media component
on itself within a collaborative session, the controllee UE shall follow the
procedures defined in 3GPP TS 24.229 [4] for modifying media.
##### 4.11.2.2.2 SCC AS serving the collaborative session
When SCC AS receives a SIP re-INVITE request within an existing dialog from
the controllee UE to modify a media component on itself, the SCC AS shall send
a SIP re-INVITE request to the remote UE. The SCC AS shall construct the SDP
information in the SIP re-INVITE request as follows:
1) set the modified media information as the same in the SIP re-INVITE request
received from the controllee UE; and
2) include the SDP information for all other media components in the
collaborative session as received during the last successful SDP offer-answer
exchange from the remote UE.
Upon receiving SIP 200 (OK) response with the SDP answer from the remote UE,
the SCC AS shall send:
1) a SIP ACK request to the remote UE; and
2) a SIP 200 (OK) response to the controllee UE with an SDP answer that only
contains the media component on the controllee UE.
### 4.11.3 Identified issues
#### 4.11.4 Call flows
#### 4.11.4.1 Controllee UE initiated media modification on controllee UE
#### 4.11.4.2 Controllee UE initiated media modification on itself
Figure 4.11.2.2-1: Controllee UE initiated media modification on itself
NOTE: For clarity, the SIP 100 (Trying) responses are not shown in the
signalling flow.
**1-4. SIP re-INVITE request (UE-2 to SCC AS-1) - see example in table
4.11.2.2-2**
The UE-2 sends SIP re-INVITE request to remote UE to modify the media on
itself.
Table 4.11.2.2-1: SIP re-INVITE request (**UE-2 to Intermediate IM CN
subsystem entities**)
> INVITE sip:remoteuser\@home1.net; SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:eee]:1357;comp=sigcomp;branch=z9hG4bKnashds7dfdsdq
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \;tag=986765
>
> Call-ID: Asdasd23123366
>
> Cseq: 41277 INVITE
>
> Contact:
> \
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 4444::aaa:bbb:ccc:eee
>
> s=-
>
> c=IN IP6 4444::aaa:bbb:ccc:eee
>
> t=0 0
>
> m=audio 4444 RTP/AVP 97
>
> a=rtpmap:97 PCMU/8000
>
> a=3gpp.iut.modify: collaborative controllee
**a=3gpp.iut.** **modify: collaborative controllee:** indicates that this
media is modified by the controllee UE itself within the collaborative
session.
**5\. Authorizes the request for media modification.**
Editor\'s Note: How the SCC AS/Controller UE authorizes the media modification
request is FFS.
**6-7. SIP re-INVITE request (SCC AS-1 to remote UE)**
After successful authorization, SCC AS-1 sends the SIP re-INVITE to the remote
UE.
NOTE: The SDP attribute \"a=3gpp.iut. modify: collaborative controlee\" is not
included in this SIP re-INVITE request.
**8-13. SIP 200 (OK) response for the SIP re-INVITE request (Remote UE to
UE-2)**
Remote UE responds with SIP 200 (OK) response to UE-2.
**14-19. SIP ACK request (UE-2 to remote UE)**
The UE-2 sends the SIP ACK request to remote UE.
## 4.12 Collaborative session profile
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.4 of 3GPP TR
23.831 [3]
### 4.12.1 General
### 4.12.2 Procedures
### 4.12.3 Identified issues
### 4.12.4 Call flows
## 4.13 Inter-UE transfer without establishing a collaborative session
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.d of 3GPP TR
23.831 [3]
### 4.13.1 General
### 4.13.2 Procedures
#### 4.13.2.1 Complete transfer triggered by UE belonging to the same
subscription
##### 4.13.2.1.1 Complete transfer triggered by UE not participating in
session
###### 4.13.2.1.1.1 Alternative 1
###### # 4.13.2.1.1.1.1 SC UE
In order to transfer all media streams of an existing session of another UE to
the SC UE, the SC UE shall send a SIP INVITE request as specified in 3GPP TS
24.229 [4]. The SC UE shall populate the SIP INVITE request as follows:
1\. the Request-URI set to the Inter UE Transfer SCC AS URI;
2\. the Replaces header field containing the dialog identifier of the session
to be transferred; and
3\. the Require header field containing the option tag value \"replaces\".
###### 4.13.2.1.1.1.2 SCC AS
###### # 4.13.2.1.1.1.2.1 Distinction of requests sent to the SCC AS
\"SIP INVITE request due to inter UE transfer\" as specified in 3GPP TS 24.237
[6], subclause 15.3.1 apply.
###### # 4.13.2.1.1.1.2.1 Complete transfer triggered by UE not participating
in session
When handling the \"SIP INVITE request due to inter UE transfer\" as described
in 3GPP TS 24.237 [6], subclause 15.3.3, if the SCC AS authorizes the request
on behalf of the served user then the SCC AS shall not perform the rejection
of the SIP INVITE request (as described in 3GPP TS 24.237 [6], subclause
15.3.3, step 1) and shall continue with remaining steps of 3GPP TS 24.237 [6],
subclause 15.3.3.
### 4.13.3 Identified issues
### 4.13.4 Call flows
#### 4.13.4.1 Complete transfer triggered by UE belonging to the same
subscription
##### 4.13.4.1.1 Complete transfer triggered by UE not participating in
session
###### 4.13.4.1.1.1 Alternative 1
In the example flow at the figure 4.13.4.1.1.1-1, UE-1 has an ongoing
multimedia session with UE-3 anchored at SCC AS-1. UE-1 and UE-2 belong to the
same IMS subscriptions. The SCC AS-1 authorizes the inter UE transfer request
on behalf of the UE-1.
Figure 4.13.4.1.1.1-1: Signalling flow for inter UE transfer without
collaborative session establishment triggered by UE not participating in the
session
NOTE: For clarity, the SIP 100 (Trying) messages are not shown in the
signalling flow.
**1-2. UE-1 is in session with UE-3**
There is a multimedia session comprising audio and video media between the
UE-1 and the remote UE-3 anchored at SCC AS-1. The dialog identifier of the
session between SCC AS-1 and UE-1 is AB03a0s09a2sdfglkj490333, remote-
tag=dfg45, local-tag=444.
**3\. UE-2 discovers the sessions of UE-1 as shown in subclause 4.9**
**4-5. SIP INVITE request (UE-2 to SCC AS-1) - see example in table
4.13.4.1.1.1-4**
The UE-2 sends SIP INVITE request to transfer the session to the UE-2.
Table 4.13.4.1.1.1-4: SIP INVITE request
> INVITE sip:sccas1\@home1.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:fff]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> P-Preferred-Identity: \
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: tq34gasgaegr
>
> Cseq: 4127 INVITE
>
> Contact:
> \;+g.3gpp.icsi-
> ref=\"urn%3Aurn-7%3A3gpp-service.ims.icsi.iptv\"
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE
>
> Replaces: AB03a0s09a2sdfglkj490333;remote-tag=dfg45;local-tag=444
>
> Require: replaces
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> Supported: 100rel, precondition
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:fff
>
> s=
>
> c=IN IP6 5555::aaa:bbb:ccc:fff
>
> t=0 0
>
> m=audio 3456 RTP/AVP 97 96
>
> a=tcap:1 RTP/AVPF
>
> a=pcfg:1 t=1
>
> b=AS:25.4
>
> a=curr:qos local sendrecv
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> m=video 3400 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**Replaces:** set to the dialog information of the session to be transferred
**6.-8.** **SIP re-INVITE request (SCC AS-1 to UE3) --**
Since the request is addressed to SCC AS-1 and since STI in the Replaces
header field identifies an dialog anchored in the SCC AS-1, the SCC AS-1
detects that the inter UE transfer is being attempted, authorizes the request
of behalf of UE-1, acts as a routing B2BUA and performs remote leg update by
sending the SIP re-INVITE request towards the UE-3.
**9-11. SIP 200 (OK) response (UE-3 to intermediate IM CN subsystem
entities)**
Upon receiving the SIP re-INVITE request containing the SDP offer, since the
UE-3 has all resources available, it sends immediately the SIP 200 (OK)
response to the SIP re-INVITE request that contains the SDP answer. The SDP
answer indicates that the resources are available.
**12-14**. **SIP ACK request (SCC AS-1 to UE-3 via intermediate IM CN
subsystem entities)**
The SCC AS-1 generates the SIP ACK request to the SIP 200 (OK) response, and
forwards the SIP ACK request to the remote UE-3.
**15-16. SIP 200 (OK) response (SCC AS-1 to UE-2 via intermediate IM CN
subsystem entities)**
The SCC AS-1 generates the SIP 200 (OK) response to the SIP INVITE request,
and forwards the SIP 200 (OK) response towards the UE-2.
**17-18**. **SIP ACK request (UE-2 to SCC AS-1 via intermediate IM CN
subsystem entities)**
The UE-2 generates the SIP ACK request to the SIP 200 (OK) response.
**19-20. SIP BYE request (SCC AS-1 to UE-1 via intermediate IM CN subsystem
entities)**
The SCC AS-1 terminates the source access leg by sending a BYE request to the
UE-1.
**21-22. SIP 200 (OK) response (UE-1 to SCC AS-1 via intermediate IM CN
subsystem entities)**
Upon receiving the BYE request, the UE-1 sends a SIP 200 (OK) response.
Subsequently, the UE-1 releases all resources pertaining to the session.
**23-24.** **UE-2 is now in session with UE-3**
## 4.14 Execution of Supplementary Services
Editor\'s Note: This subclause corresponds to subclauses 6.1.3.5 of 3GPP TR
23.831 [3]
### 4.14.1 General
Only the supplementary services impacted by the Rel-10 IUT procedures are
listed in the following subclause.
### 4.14.2 Procedures
#### 4.14.2.1 Conference (CONF)
##### 4.14.2.1.1 SC UE
The controller UE of an existing collaborative session may be invited by the
remote party to a conference. In this case, the controller UE perfoms the same
procedures as specified in subclause 4.14.2.2.1.
NOTE: The SIP URI in the Refer-To header field of the SIP REFER request
received by the controller UE is the conference URI, which may not be awared
by the controller UE. However, this does not affect the controller UE
procedures.
##### 4.14.2.1.2 SCC AS
The SCC AS perfoms the same procedures as specified in subclause 4.14.2.2.2.
NOTE: The SIP URI in the Refer-To header field of the SIP REFER request
received by the SCC AS is the conference URI, which may not be awared by the
SCC AS. However, this does not affect the SCC AS procedures.
##### 4.14.2.2 Explicit Communication Transfer (ECT)
##### 4.14.2.2.1 SC UE
As the transferor of the ECT service, only the controller UE can invoke the
ECT service on behalf of the collaborative session and it shall send a SIP
REFER request to the transferee as specified in TS 24.629 [18]. Upon receiving
notification that ECT has been performed successfully, the controller UE shall
terminate the previous active session with the transferee UE by terminating
all related media control sessions on the controllee UEs.
Upon receiving a SIP REFER request within an existing collaborative session
containing:
1) the Referred-By header field set to the URI of the remote party; and
2) the Refer-To header field containing the \"method\" URI parameter set to
INVITE or not including the \"method\" URI parameter,
the controller UE, if decides to continue using a collaborative session to
communicate with the new remote party (i.e. transfer target), may send to the
SCC AS a SIP INVITE request including:
1) the Request-URI set to the URI in the Refer-To header field of the SIP
REFER request; and
2) the SDP information as follows:
\- for the media component(s) that are to be established on the controller UE
containing the port number(s) of the controller UE; and
\- for the media component(s) that are to be established in the same
controllee UE with the same port number(s) as in the original collaborative
session.
The following procedures of the controller UE for establishing the
collaborative session with the transfer target is the same as described in
subclause 4.4.4.1.
##### 4.14.2.2.2 SCC AS
Upon receiving a SIP REFER request from the controller UE with Request-URI
containing URI not belonging to SCC AS, the SCC AS shall follow the procedures
as specified in TS 24.229 [4].
Upon receiving a SIP REFER request from the controllee UE with Request-URI
containing URI not belonging to SCC AS, the SCC AS shall reject the request.
Upon receiving from the remote party a SIP REFER request in the existing
dialog for which a collaborative session is established in the local party and
the SIP REFER request includes:
1) the Referred-By header field set to the URI of the remote party; and
2) the Refer-To header field containing the \"method\" URI parameter set to
INVITE or not including the \"method\" URI parameter,
the SCC AS shall forward the SIP REFER request towards the controller UE using
the procedures as specified in TS 24.229 [4].
Upon receiving a SIP INVITE request from the controller UE due to the SIP
RFFER request and the SIP INVITE request includes:
1) the Request-URI set to the URI in the Refer-To header field of the SIP
REFER request; and
2) the SDP information as follows:
\- for the media component(s) that are to be established on the controller UE
containing the port number(s) of the controller UE; and
\- for the media component(s) that are to be established in the same
controllee UE with the same port number(s) as in the original collaborative
session,
the SCC AS shall establish a new collaborative session towards the new remote
party (i.e. transfer target), using the procedure as described in subclause
4.4.4.1 with the following difference:
\- instead of sending a SIP INVITE request toward the controllee UE to
establish a new access leg, the SCC AS may send a SIP re-INVITE request
towards the controllee UE using the existing access leg between the controllee
UE and the SCC AS, to update the SDP information over the access leg which is
now bound to the new collaborative session.
NOTE 1: The SCC AS can not distinguish the SIP REFER request for ECT from the
common SIP REFER request. However this does not affect the SCC AS procedures,
i.e. the SCC AS can decide, based on the SIP INVITE request from the
controller UE due to the SIP RFFER request, to reuse the existing access leg
of the controllee UE for the new collaborative session.
NOTE 2: The SCC AS can decide the duration that it keeps the information of
the SIP REFER request based on, e.g. the expiration time of the SIP REFER
request (the Expires header field in the REFER request) and the duration of
the implicit subscription created by the SIP REFER request ("expires" header
field parameter in the Subscription-State header field in the first NOTIFY
sent in the subscription) as specified in IETF RFC 3515 [8], so that the SIP
INVITE request from controller UE can be associated with the SIP REFER
request.
#### 4.14.2.3 Customized Alerting Tones (CAT)
For Collaborative Sessions established concurrently with terminating IMS
session setup, the CAT provided by the network (under the control of the SCC
AS associated with the Controller UE) to the remote party is the CAT
associated with the Controller UE.
#### 4.14.2.4 Customized Ringing Signal (CRS)
For Collaborative Sessions established concurrently with terminating IMS
session setup, the Customized Ringing Signal (CRS) provided to the Controller
UE is the CRS associated with the remote party. For Collaborative Sessions
established concurrently with originating IMS session setup, the CRS provided
to the remote party is the CRS associated with the Controller UE.
### 4.14.3 Identified issues
### 4.14.4 Call flows
#### 4.14.4.1 Explicit Communication Transfer (ECT)
##### 4.14.4.1.1 Alternative1
Figure 4.14.4.1.1-1 describes how IMS blind ECT is performed when the
controller UE is playing the role of transfer recipient. The controller UE-1
and controllee UE-2 are in a collaborative session with remote party UE-3
under the control of SCC AS, and the session is on held before transfer.
Figure 4.14.4.1.1-1: Signalling flow for the remote party initiate ECT service
NOTE: For clarity, the SIP 100 (Trying), SIP PRACK requests to 183 (Session
Progress) responses and SIP 200 (OK) responses to SIP PRACK requests are not
shown in the signalling flow.
**1-2. SIP REFER request (remote UE-3 to SCC AS) -- see example in table
4.14.4.1.1-1**
It is assumed that controller UE, UE-1, and controllee UE, UE-2, are in a
collaborative session with remote Party UE, UE-3, and the session is on held
before transfer.
The UE-3 initiates transfer UE-1 to remote party UE, UE-4, as specified in TS
24.629 [18] by sending SIP REFER request To: UE-1 with Referred-To: UE-4,
Referred-By: UE-3. The REFER request is send in the existing collaborative
session.
Table 4.14.4.1.1-1: SIP REFER request (UE-3 to SCC AS)
> REFER sip:user1\@example1.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> To: sip:user1\@example1.net;tag=abcdef
>
> From: sip:user3\@example1.net;tag=123456
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> Refer-To: \**
>
> Referred-By: sip: user3\@example1.net
>
> Accept: **message/sipfrag**
**3-4. SIP REFER request (SCC AS to UE-1)**
The SCC AS acknowledges the REFER message as a blind ECT transfer request for
the UE-1 and sends the REFER to the UE-1.
**5-6. SIP 202 (Accepted) response(UE-1 to SCC AS)**
The UE-1 sends a SIP 202 (Accepted) response to SCC-AS as response to SIP
REFER request
**7-8. SIP 202 (Accepted) response(SCC AS to UE-3)**
The SCC AS sends a SIP 202 (Accepted) response to UE-3 as response to the SIP
REFER request
> **9-10. SIP BYE request (Remote UE-3 to SCC AS)**
The UE-3 initiates the session release with the UE-1 by initiating a SIP BYE
message to the SCC AS as specified in TS 24.629 [18]
**11-12. SIP BYE request (SCC AS to UE-1)**
The SCC AS only sends a SIP BYE request to UE-1, the media session between the
UE-2 and the SCC AS is kept for further reuse.
> **13-14. SIP 200 (OK) response(UE-1 to SCC AS)**
The UE-1 acknowledges the SIP BYE request by sending a SIP 200 (OK) response
to the SCC AS.
> **15-16. SIP 200 (OK) response(SCC AS to UE-3)**
The SCC AS acknowledges the SIP BYE request by sending a SIP 200 (OK) response
to the UE-3.
**17-18. SIP NOTIFY request (UE-1 to SCC AS)**
UE-1 sends a NOTIFY request to SCC AS to indicate the progress of the REFER
request processing.
**19-20. SIP NOTIFY request (SCC AS to UE-3)**
SCC AS sends a NOTIFY request to UE-3 to indicate the progress of the REFER
request processing.
**21-22. SIP 200 (OK) response to SIP NOTIFY request(UE-3 to SCC AS)**
UE-3 responds to SCC AS with SIP 200 (OK) response.
**23-24. SIP 200 (OK) response to SIP NOTIFY request (SCC AS to UE-1)**
SCC AS responds to UE-1 with SIP 200 (OK) response.
**25-26. SIP INVITE request (UE-1 to SCC AS)**
The UE-1 sends SIP INVITE request to SCC AS to setup the collaborative session
with the UE-4.
**27-28. SIP INVITE request (SCC AS to UE-4)**
SCC AS forwards the SIP INVITE request to UE-4.
**29-30. SIP 183 (Session Progress) response to SIP INVITE request (UE-4 to
SCC AS)**
The UE-4 responds with SIP 183 (Session Progress) response containing the SDP
answer of UE-4.
**31-32. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
The SCC AS responds with SIP 183 (Session Progress) response containing the
SDP answer of UE-4.
**33-34. SIP RE-INVITE request (SCC AS to UE-2) -- see example in table
4.14.4.1.1-33**
Based on SIP REFER request received in step 2 and SIP INVITE request in step
18, which indicate the session is to be transferred and the video media is
still to be terminated on UE-2, the SCC AS binds the existing access leg of
UE-2 to the new collaborative session between UE-1 and UE-4**, and** reuses
the existing access leg to send the SIP RE-INVITE request to UE-2.
Table 4.14.4.1.1-33: SIP INVITE request (**SCC AS to UE-2**)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;tag=edfex
>
> From: sip:interUEtransfer\@example.net;tag=acegi
>
> Call-ID:
>
> CSeq: 127 INVITE
>
> Max-Forwards:
>
> Require:
>
> Referred-By: sip: user1\@example1.net
>
> Contact:
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a= sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
**35-36. SIP 183 (Session Progress) response to SIP RE-INVITE request (UE-2 to
SCC AS)**
UE-2 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-2.
**37-38. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.14.4.1.1-37**
SCC AS sends SIP UPDATE request to UE-4 to update the media in UE-4.
Table 4.14.4.1.1-37: SIP UPDATE request (SCC AS to remote UE)
> UPDATE sip:user4\@example1.net SIP/2.0
>
> Via:
>
> To: sip:user4\@example1.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq: 128 UPDATE
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 1300 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**39-40. SIP 200 (OK) response to SIP UPDATE request(UE-4 to SCC AS)**
The remote UE-4 responds with SIP 200 (OK) response.
**41-42. SIP 200 (OK) response to SIP INVITE request(UE-4 to SCC AS)**
The remote UE-4 responds with SIP 200 (OK) response.
**43-44. SIP 200 (OK) response to SIP INVITE request(SCC AS to UE-1)**
The SCC AS responds with SIP 200 (OK) response.
**46-46. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends the SIP ACK request to confirm the establishment of call to SCC AS.
**47-48. SIP ACK request (SCC AS to UE-4)**
SCC AS sends SIP ACK request to the UE-4.
**49-50. SIP NOTIFIY request (UE-1 to SCC AS)**
UE-1 sends SIP NOTIFIY request to SCC AS to notify the session between the
UE-1 and UE-4 has been established.
**51-52. SIP NOTIFIY request (SCC AS to UE-3)**
SCC AS sends SIP NOTIFIY request to UE-3 to notify the session between the
UE-1 and UE-4 has been established.
**53-54. SIP 200 (OK) reponse to SIP NOTIFY request (UE-3 to SCC AS)**
UE-3 responds to SCC AS with SIP 200 (OK) response.
**55-56. SIP 200 (OK) reponse to SIP NOTIFY request (SCC AS to UE-1)**
#### SCC AS sends the SIP 200 (OK) response to UE-1.4.14.4.2 Conference (CONF)
##### 4.14.4.2.1 Alternative1
Figure 4.14.4.2.1-1 shows the remote party invoked the conferencing service.
UE-1 and UE-2 are in a collaborative session with remote party under the
control of SCC AS before the remote party invites UE-1, the controller UE, to
a conference.
Figure 4.14.4.2.1-1: Signalling flow for the remote party initiated
conferencing service
NOTE: For clarity, the SIP 100 (Trying), SIP PRACK requests to SIP 183
(Session Progress) responses and SIP 200 (OK) responses to PRACK requests are
not shown in the signalling flow.
**1-2. SIP INVITE request (remote UE-3 to conferencing AS)**
The remote UE-3 initiates a conferencing session with a conferencing AS by
sending a SIP INVITE request as specified in TS 24.605 [17]
> **3-4. SIP 200 (OK) response (UE-3 to conferencing AS)**
The conferencing AS acknowledges the conference establishment request by
sending a SIP 200 (OK) response to the SCC AS. The conference URI is contained
in the response.
**5-6. SIP ACK request (UE-3 to conferencing AS)**
The UE-3 sends SIP ACK request to the conferencing AS.
**7-8. SIP REFER request (remote UE-3 to SCC AS) -- see example in table
4.14.4.2.1-7**
The UE-3 initiates transfer UE-1 to the conferencing AS, by sending SIP REFER
request To: UE-1 with Referred-To: conference URI, Referred-By: UE-3. The
REFER request is sent in the existing session with SCC AS.
Table 4.14.4.2.1-7: SIP REFER request (UE-3 to SCC AS)
> REFER sip:user1\@example1.net;**gr**
> =**urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6** SIP/2.0
>
> Via:
>
> To: sip:user1\@example1.net;tag=abcdef
>
> From: sip:user3\@example1.net;tag=123456
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> CSeq: 93809824 REFER
>
> Max-Forwards: 70
>
> Require: 100rel
>
> Refer-To: \**
>
> Referred-By: sip: user3\@example1.net
>
> Accept: **message/sipfrag**
**9-10. SIP REFER request (SCC AS to UE-1)**
The SCC AS acknowledges the REFER message as a conference invitation request
for the UE-1 and sends the REFER to the UE-1.
**11-12. SIP 202 (Accepted) response(UE-1 to SCC AS)**
The UE-1 sends a SIP 202 (Accepted) response to SCC-AS as response to SIP
REFER request
**13-14. SIP 202 (Accepted) response(SCC AS to UE-3)**
The SCC AS sends a SIP 202 (Accepted) response to UE-3 as response to the SIP
REFER request
**15-16. SIP NOTIFY request (UE-1 to SCC AS)**
UE-1 sends a NOTIFY request to SCC AS to indicate the progress of the REFER
request processing.
**17-18. SIP NOTIFY request (SCC AS to UE-3)**
SCC AS sends a NOTIFY request to UE-3 to indicate the progress of the REFER
request processing.
**19-20. SIP 200 (OK) response to SIP NOTIFY request(UE-3 to SCC AS)**
UE-3 responds to SCC AS with SIP 200 (OK) response.
**21-22. SIP 200 (OK) response to SIP NOTIFY request (SCC AS to UE-1)**
SCC AS responds to UE-1 with SIP 200 (OK) response.
**23-24. SIP INVITE request (UE-1 to SCC AS)**
The UE-1 sends a SIP INVITE request towards the SCC AS to setup the
collaborative session.
**25-26. SIP INVITE request (SCC AS to conferencing AS)**
SCC AS forwards the SIP INVITE request to conferencing **AS**.
**27-28. SIP 183 (Session Progress) response to SIP INVITE request
(conferencing AS to SCC AS)**
The conferencing **AS** responds with SIP 183 (Session Progress) response
containing the SDP answer of conferencing **AS**.
**29-30. SIP 183 (Session Progress) response to SIP INVITE request (SCC AS to
UE-1)**
The SCC AS sends to UE-1 the SIP 183 (Session Progress) response containing
the SDP answer of conferencing **AS**.
**31-32. SIP RE-INVITE request (SCC AS to UE-2) -- see example in table
4.14.4.2.1-23**
Based on SIP REFER request received in step 8 and SIP INVITE request in step
16, which indicate the session is to be transferred to the conferencing AS and
the video media is still to be terminated on UE-2, the SCC AS binds the
existing access leg between the SCC AS and UE-2 to the new collaborative
session between UE-1 and the conferencing **AS, and** reuses the existing
access leg to send the SIP RE-INVITE request to UE-2.
Table 4.14.4.2.1-23: SIP INVITE request (**SCC AS to UE-2**)
> INVITE
> sip:user2\@example1.net;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
> SIP/2.0
>
> Via:
>
> Record-Route: sip:sccas1.home1.example.net
>
> To: sip:user2\@example1.net;tag=edfex
>
> From: sip: interUEtransfer\@example.net;tag=acegi
>
> Call-ID:
>
> CSeq: 127 INVITE
>
> Max-Forwards:
>
> Require:
>
> Referred-By: sip:user1\@example1.net
>
> Contact:
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length:(...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 192.0.2.23
>
> s=-
>
> t=0 0
>
> m=audio 0 RTP/AVP 0 8 3
>
> m=video 4390 RTP/AVP 34
>
> a=sendrecv
>
> c=IN IP4 192.0.2.23
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
Editor\'s Note: Whether containing the \"Referred-by\" header in the INVITE
request to indicate the request comes from the controller UE is FFS.
**33-34. SIP 183 (Session Progress) response to SIP RE-INVITE request (UE-2 to
SCC AS)**
UE-2 sends the SIP 183 (Session Progress) response towards SCC AS containing
the SDP answer of UE-2.
**35-36. SIP UPDATE request (SCC AS to UE-3)- see example in table
4.14.4.2.1-27**
SCC AS sends SIP UPDATE request to conferencing AS to update the media in
conferencing AS.
Table 4.14.4.2.1-27: SIP UPDATE request (SCC AS to conferencing AS)
> UPDATE sip:conference1\@example1.net SIP/2.0
>
> Via:
>
> To: sip:conference1\@example1.net;tag = 66666
>
> From: sip:interUEtransfer\@example.net; tag=33333
>
> Call-ID:
>
> CSeq: 128 UPDATE
>
> Max-Forwards:
>
> P-Asserted-Identity:
>
> Require:
>
> Contact:
> sip:user1_public1\@home1.net**;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91ewxyz**
>
> Allow:
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 1027933615 1027933615 IN IP4 123.45.67.89
>
> s=-
>
> t=0 0
>
> m=audio 49170 RTP/AVP 96 97
>
> c=IN IP4 123.45.67.89
>
> b=AS:25.4
>
> a=rtpmap:96 AMR
>
> a=fmtp:96 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:97 telephone-event
>
> a=maxptime:20
>
> m=video 1302 RTP/AVP 98 99
>
> c=IN IP4 145.23.77.88
>
> b=AS:75
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
**37-38. SIP 200 (OK) response to SIP UPDATE request(conferencing AS to SCC
AS)**
The conferencing AS responds with SIP 200 (OK) response.
**39-40. SIP 200 (OK) response to SIP INVITE request(conferencing AS to SCC
AS)**
The conferencing AS responds with SIP 200 (OK) response.
**41-42. SIP 200 (OK) response to SIP INVITE request(SCC AS to UE-1)**
The SCC AS responds with SIP 200 (OK) response.
**43-44. SIP ACK request (UE-1 to SCC AS)**
UE-1 sends the SIP ACK request to confirm the establishment of call to SCC AS.
**45-46. SIP ACK request (SCC AS to UE-4)**
SCC AS sends SIP ACK request to the conferencing AS.
**47-48. SIP NOTIFY request (UE-1 to SCC AS)**
UE-1 sends a NOTIFY request to UE-3 to indicate that it has finished action
required
**49-50. SIP NOTIFY request (SCC AS to UE-3)**
UE-1 sends a NOTIFY request to UE-3 to indicate that it has finished action
required
**51-52. SIP 200 (OK) response to SIP NOTIFY request(UE-3 to SCC AS)**
The UE-3 responds with SIP 200 (OK) response.
**53-54. SIP 200 (OK) response to SIP INVITE request(conferencing AS to SCC
AS)**
The UE-3 responds with SIP 200 (OK) response.
> **55-56. SIP BYE request (remote UE-3 to SCC AS)**
The UE-3 initiates the session release with the UE-1 by initiating a SIP BYE
message to the SCC AS
**57-58. SIP BYE request (SCC AS to UE-1)**
The SCC AS only sends a SIP BYE request to UE-1, the media session between the
UE-2 and the SCC AS is kept for further reuse.
> **59-60. SIP 200 (OK) response(UE-1 to SCC AS)**
The UE-1 acknowledges the SIP BYE request by sending a SIP 200 (OK) response
to the SCC AS.
> **61-62. SIP 200 (OK) response(SCC AS to UE-3)**
The SCC AS acknowledges the SIP BYE request by sending a SIP 200 (OK) response
to the UE-3.
# 5 Protocol evaluation
## 5.1 General
## 5.2 Evaluation of solutions for inter-UE transfer and collaborative session
procedures for UEs belonging to different IMS subscriptions under the same
operator
### 5.2.1 Conclusion
The decision of the CT1 working group is that the procedures as described in
subclause 4.2.2.1 will be specified in normative specifications in release 10.
## 5.3 Discovery of UEs of different IMS subscriptions which can participate
in collaborative sessions
### 5.3.1 Conclusion
The decision of the CT1 working group is that no specific additional
procedures need to be described in Rel-10 for the discovery of UEs of
different IMS subscriptions which can participate in collaborative sessions.
## 5.4 Evaluation of solutions for establishment of collaborative session upon
session setup
### 5.4.0 Conclusion
For the originating case, the decision of the CT1 working group is that the
procedures as described in subclauses 4.4.2.1.1.1, 4.4.2.1.1.2, 4.4.2.1.3A and
4.4.2.1.4 will NOT be specified in normative specifications in release 10.
For the terinating case, the decision of the CT1 working group is that the
procedures as described in subclauses 4.4.2.2.1 and 4.4.2.2.3 will NOT be
specified in normative specifications in release 10.
For the originating case, the decision of the CT1 working group is that the
procedures as described in subclause 4.4.2.1.1.2 will be specified in
normative specifications in release 10.
For the terminating case, the decision of the CT1 working group is that the
procedures as described in subclause 4.4.2.2.4 will be specified in normative
specifications in release 10.
### 5.4.1 Evaluation of solutions for establishment of collaborative session
upon originating session setup
#### 5.4.1.1 Pros and cons of alternative1- indicating collaborative session
establishment by providing controllee UE SIP URI in SDP
Advantages:
\- Media information is kept in one place;
Disadvantages:
\- The impact to PCC is FFS.
#### 5.4.1.2 Pros and cons of alternative2- indicating collaborative session
establishment by multipart/related Content-Type parameter
Advantages:
Disadvantages:
#### 5.4.1.3 Pros and cons of alternative 3 -- indicating collaborative
session establishment by providing controllee UE SIP URI in SDP using
P-Asserted-Identity
Advantages:
\- Media information is kept in one place;
Disadvantages:
\- The impact to PCC is FFS.
#### 5.4.2.2 Evaluation of procedures for establishment of collaborative
session upon terminating IMS session setup
##### 5.4.2.2.1 Pros and Cons of Alternative 1 -- indicating collaborative
session establishment by providing controllee UE SIP URI in SDP
Advantages:
\- Media information is kept in one place.
Disadvantages:
\- The impact to PCC is FFS.
##### 5.4.2.2.2 Pros and Cons of Alternative 2 -- indicating collaborative
session establishment by multipart/related Content-Type parameter
Advantages:
Disadvantages:
##### 5.4.2.2.3 Pros and Cons of Alternative 3 -- indicating collaborative
session establishment by SIP REFER request before SIP 200 (OK) response
Advantages:
Disadvantages:
##### 5.4.2.2.4 Pros and Cons of Alternative 4 -- Using SIP 300 (Multiple
Choices) response
Advantages:
Disadvantages:
## 5.5 Evaluation of solutions for transfer of control of a collaborative
session
### 5.5.1 Conclusion
For the indication whether a controller capable UE wants to be a controller,
the decision of the CT1 working group is that the procedures as described in
subclause 4.5.2.1.1 will NOT be specified in normative specifications in
release 10.
For the indication that other UE is requested to become a controller, the
decision of the CT1 working group is that the procedures as described in
subclauses 4.5.2.2.1, 4.5.2.2.3 and 4.5.2.2.4 will NOT be specified in
normative specifications in release 10.
For the indication to another UE that it is requested to become a controller,
the decision of the CT1 working group is that the procedures as described in
subclauses 4.5.2.3.3 and 4.5.2.3.4 will NOT be specified in normative
specifications in release 10.
For the indication of acceptance of becoming a controller, the decision of the
CT1 working group is that the procedures as described in subclause 4.5.2.4.2
will NOT be specified in normative specifications in release 10.
For the indication that another UE has become controller UE, the decision of
the CT1 working group is that the procedures as described in subclauses
4.5.2.5.2 and 4.5.2.5.3.2 will NOT be specified in normative specifications in
release 10.
For the transfer of control of a collaborative session feature, the decision
of the CT1 working group is that the procedures as described in subclauses
4.5.2.1.3, 4.5.2.2.2.4, 4.5.2.3.2.4, 4.5.2.4.3 and 4.5.2.5.3.3 will be
specified in normative specifications in release 10.
### 5.5.2 Evaluation of procedures for transfer of control of a collaborative
session
#### 5.5.2.1 Indicating whether Controller UE wishes to remain a controller of
the collaborative Session
##### 5.5.2.1.1 Pros and Cons of Alternative 1 -- Indicating whether
Controller UE wishes to remain a controller of the collaborative Session using
the iut-controller media feature tag
Advantages:
\- Uses existing Release-9 iut-controller media feature tag
\- Backward compatible with Release-9 Controller assignment (i.e. the iut-
controller media feature tag is already included in the REFER request by
release 9 IUT UEs)
Disadvantages:
\- If the iut-controller media feature-tag is used it could be considered to
overload the release 9 semantics of this feature tag could be considered to
overload the release 9 semantics of this feature tag
##### 5.5.2.1.2 Pros and Cons of Alternative 2 -- Indicating whether
Controller UE wishes to remain a controller of the collaborative Session using
an XML body
Advantages:
\- Backward compatible with Rel-9 controller assignment (i.e. the SIP INFO
request for control transfer will be ignored by Rel-9 equipment)
Disadvantages:
##### 5.5.2.1.3 Pros and Cons of Alternative 3 -- Indicating whether
Controller UE wishes to be the controller of the collaborative session using a
new media feature tag
Advantages:
\- Does not overload the release 9 semantics of an existing media feature tag.
Disadvantages:
\- Backward compatibility with Release-9 Controller assignment is a little
harder to achieve as Release 9 IUT UEs will not include this feature tag. The
absence of the feature tag has to be considered to requesting to maintain
control.
#### 5.5.2.2 Identifying that another UE is requested to become a controller
of the collaborative session
##### 5.5.2.2.1 Pros and Cons of Alternative 1 -- Identifying a new controller
UE using SIP REFER with method= REFER
Advantages:
\- Follows existing Rel-9 mechanism for media transfer
\- Allows for controller and media transfer in a single request
Disadvantages:
\- Based on special semantics for REFER
##### 5.5.2.2.2 Pros and Cons of Alternative 2 - Identifying a new controller
UE using an XML Body
Advantages:
\- XML body format is flexible (we can define exactly what we need) including
identifying which entities are terminating which media components
Disadvantages:
###### 5.5.2.2.2.1 General
###### 5.5.2.2.2.2 Pros and Cons of Alternative 2A - Identifying a new
controller UE using SIP INFO
Advantages:
\- SIP INFO request can also be used for requesting a UE to assume the
controller role
Disadvantages:
\- Requires two separate requests for media transfer and controller transfer
\- New Controller UE needs to also receive Media Descriptions for
collaborative session
\- Requires to define new Info Package
###### 5.5.2.2.2.3 Pros and Cons of Alternative 2B - Identifying a new
controller UE using an Event Package
Advantages:
\- Events mechanism provides consistent framework for identifying new
controller and notification of changes of controller and controllee.
Disadvantages:
\- Requires two separate requests for media transfer and controller transfer
\- New Controller UE needs to also receive Media Descriptions for
collaborative session
\- Significant messaging overhead using Events Mechanism
\- Requires an RFC to define an Event Package.
###### 5.5.2.2.2.4 Pros and Cons of Alternative 2C - Identifying a new
controller UE using XML embedded in Refer-To URI
Advantages:
\- Control transfer can be done in the same SIP REFER request between
controller UE and SCC AS as is used for requesting media transfer
\- Aligns with release 9 Collaborative Session participant assignment
mechanism (compatible with use of INVITE)
Disadvantages:
\- Probably requires Multipart MIME support in Controllee UE in order to
include in INVITE along with SDP.
##### 5.5.2.2.3 Pros and Cons of Alternative 3 - Identifying a new controller
UE using a SIP header field
Advantages:
\- Complete standardised solution
\- Control transfer can be done in the same SIP REFER request between
controller UE and SCC AS as is used for requesting media transfer
Disadvantages:
\- Requires going through the IETF process for defining a new SIP header
field.
##### 5.5.2.2.4 Pros and Cons of Alternative 4 - Identifying a new controller
UE using Accept-Contact in the Refer-To URI
Advantages:
\- Use of a media feature tag. in an Accept-Contact header in the Refer-To URI
is an efficient solution that aligns well semantically with other application
level invocation functions
\- Control transfer can be done in the same SIP REFER request between
controller UE and SCC AS as is used for requestingmedia transfer
Disadvantages:
\- If the iut-controller media feature-tag is being used it could be
considered to overload the release 9 semantics of this feature tag
#### 5.5.2.3 Indicating to another UE that it is requested to become a
controller of the collaborative Session
##### 5.5.2.3.1 General
##### 5.5.2.3.2 Pros and Cons of Alternative 1 -- Requesting a UE to become a
controller UE using an XML Body
Advantages:
\- XML body format is flexible (we can define exactly what we need) including
identifying which entities are terminating which media components
Disadvantages:
###### 5.5.2.3.2.1 General
###### 5.5.2.3.2.2 Pros and Cons of Alternative 1A - Assigning a new
controller UE using SIP INFO
Advantages:
\- INFO package can be used for multiple functions such as indicating which UE
to assume the controller role
Disadvantages:
\- Requires two separate requests for media transfer and controller transfer
\- New Controller UE needs to also receive Media Descriptions for
collaborative session
\- Requires to define new INFO Package
###### 5.5.2.3.2.3 Pros and Cons of Alternative 1B - Assigning a new
controller UE using an Event Package
Advantages:
\- Events mechanism provides consistent framework for identifying new
controller and notification of changes of controller and controllee.
Disadvantages:
\- Requires two separate requests for media transfer and controller transfer
\- Significant messaging overhead using Events Mechanism
\- Requires an RFC to define an Event Package.
###### 5.5.2.3.2.4 Pros and Cons of Alternative 1C - Assigning a new
controller UE using XML Body as a MIME type in the request
Advantages:
\- Control transfer can be done in the same SIP REFER request between
controller UE and SCC AS as is used for requesting media transfer
\- Aligns with release 9 Collaborative Session participant assignment
mechanism (compatible with use of INVITE)
Disadvantages:
\- Probably requires Multipart MIME support in Controllee UE in order to
include in INVITE along with SDP.
##### 5.5.2.3.3 Pros and Cons of Alternative 2 -- Requesting a UE to become a
controller UE using a SIP header field
Advantages:
\- Complete standardised solution
\- Control transfer can be done in the same SIP INVITE request between SCC AS
and controllee UE is used for effecting as media transfer
Disadvantages:
\- Requires going through the IETF process for defining a new SIP header
field.
##### 5.5.2.3.4 Pros and Cons of Alternative 3 -- Requesting a UE to become a
controller UE using a media feature tag in an Accept-Contact header field
Advantages:
\- Use of a media feature tag in an Accept-Contact header field is an
efficient solution that aligns well semantically with other application level
invocation functions
\- Control transfer can be done in the same SIP INVITE request between SCC AS
and controllee UE as is used for effecting media transfer
Disadvantages:
\- If the iut-controller media feature-tag is being used it could be
considered to overload the release 9 semantics of this of this feature tag
#### 5.5.2.4 Indicating acceptance of becoming a controller of the
collaborative session
##### 5.5.2.4.1 Pros and Cons of Alternative 1 -- Indicating acceptance of
becoming a controller using an XML Body
Advantages:
\- XML body format is flexible (we can define exactly what we need) including
identifying which entities are terminating which media components
Disadvantages:
###### 5.5.2.4.1.1 General
###### 5.5.2.4.1.2 Pros and Cons of Alternative 1A -- Indicating acceptance of
becoming a controller using an XML Body in SIP 200 (OK) response
Advantages:
\- No additional messages exchanged
Disadvantages:
###### 5.5.2.4.1.3 Pros and Cons of Alternative 1B -- Indicating acceptance of
becoming a controller using an XML Body in SIP INFO request
Advantages:
\- INFO package can be used for multiple functions such as indicating which UE
to assume the controller role
Disadvantages:
\- Requires to define new INFO Package
##### 5.5.2.4.2 Pros and Cons of Alternative 2 -- Indicating acceptance of
becoming a controller using a SIP header field
Advantages:
\- Complete standardised solution
\- Control transfer can be done without additional messages when combined
withmedia transfer
Disadvantages:
\- Requires going through the IETF process for defining a new SIP header
field.
##### 5.5.2.4.3 Pros and Cons of Alternative 3 -- Indicating acceptance of
becoming a controller using a new feature tag
Advantages:
\- Use of a media feature tag is an efficient solution that aligns well
semantically with other application level invocation functions
\- Control transfer can be done without additional messages when combined with
media transfer
Disadvantages:
#### 5.5.2.5 Informing that another UE has become a controller of the
collaborative session
##### 5.5.2.5.1 Pros and Cons of Alternative 1 -- Informing that another UE
has become a controller UE using an XML Body
Advantages:
\- XML body format is flexible (we can define exactly what we need) including
identifying which entities are terminating which media components
Disadvantages:
###### 5.5.2.5.1.1 General
###### 5.5.2.5.1.2 Pros and Cons of Alternative 1A - Informing that another UE
has become a controller UE using SIP INFO
Advantages:
\- INFO package can be used for multiple functions such as indicating which UE
to assume the controller role
Disadvantages:
\- Requires additional messages when combined with media transfer
\- Requires to define new INFO Package
###### 5.5.2.5.1.3 Pros and Cons of Alternative 1B - Informing that another UE
has become a controller UE using a new Event Package
Advantages:
\- Events mechanism provides consistent framework for identifying new
controller and notification of changes of controller and controllee.
Disadvantages:
\- Requires additional messages when combined with media transfer
\- Significant messaging overhead using Events Mechanism
\- Requires an RFC to define an Event Package.
##### 5.5.2.5.2 Pros and Cons of Alternative 2 -- Informing that another UE
has become a controller UE using a SIP header field
Advantages:
\- Complete standardised solution
Disadvantages:
\- Requires going through the IETF process for defining a new SIP header
field.
##### 5.5.2.5.3 Pros and Cons of Alternative 3 -- Informing that another UE
has become a controller UE using a SIPfrag in an event package
Advantages:
\- Use of a SIPfrag is already included in release 9
Disadvantages:
\- Significant messaging overhead using Event Mechanism
###### 5.5.2.5.3.1 Pros and Cons of Alternative 3A - Informing that another UE
has become a controller UE using a SIPfrag of the XML body in the response
Advantages:
\- XML body format is flexible (we can define exactly what we need) including
identifying which entities are terminating which media components
Disadvantages:
###### 5.5.2.5.3.2 Pros and Cons of Alternative 3B - Informing that another UE
has become a controller UE using a SIPfrag of the new header field
Advantages:
\- Complete standardised solution
Disadvantages:
\- Requires going through the IETF process for defining a new SIP header
field.
###### 5.5.2.5.3.3 Pros and Cons of Alternative 3C - Informing that another UE
has become a controller UE using a SIPfrag of a feature tag in the Contact
header field
Advantages:
\- Use of a media feature tag is an efficient solution that aligns well
semantically with other application level invocation functions
Disadvantages
## 5.6 Evaluation of solutions for media flows transfer
### 5.6.1 Evaluation of solution for media flows transfer by the target UE
### 5.6.0 Conclusion
For the media flows transfer initiated by a UE not participating in the
ongoing collaborative session, the decision of the CT1 working group is that
the procedures as described in subclause 4.6.2.1.1.2 will NOT be specified in
normative specifications in release 10.
For the media flows transfer initiated by a UE not participating in the
ongoing collaborative session - media on controllee UE, the decision of the
CT1 working group is that the procedures as described in subclause
4.6.2.1.1a.2 will NOT be specified in normative specifications in release 10.
For the media flows transfer initiated when no collaborative session has been
established, the decision of the CT1 working group is that the procedures as
described in subclause 4.6.2.1.2.2 will NOT be specified in normative
specifications in release 10.
For the media flows transfer initiated by a controllee UE of an ongoing
collaborative session, the decision of the CT1 working group is that the
procedures as described in subclause 4.6.2.1.3.2 will NOT be specified in
normative specifications in release 10.
For the controllee UE initiated addition of media to another controllee UE,
the decision of the CT1 working group is that the procedures as described in
subclause 4.6.2.2.2.1 will be specified in normative specifications in release
10.
For the media flows transfer feature, the decision of the CT1 working group is
that the procedures as described in subclauses 4.6.2.1.1.1, 4.6.2.1.1a.1,
4.6.2.1.2.1, 4.6.2.1.3.1, 4.6.2.2.2.1 will be specified in normative
specifications in release 10.
#### 5.6.1.1 Pros and Cons of Alternative 1 (SIP REFER with media feature tag)
Advantages:
\- Same solution for both same subscription and different subscription
\- No need to know beforehand the hosting address of the SCC AS in another
domain in the case of different subscription
\- The UE requesting the media flow transfer is informed the result of IUT
after completion
Disadvantages:
\- Require another separate signalling than the SIP REFER signalling itself in
order for the controller UE to be able to authorize the media flows transfer
if authorization is to be performed by the controller UE
\- Require the Subscribe/Notify mechanism to inform the result of IUT to
controller UE.
#### 5.6.1.2 Pros and Cons of Alternative 2 (SIP REFER with method=REFER)
Advantages:
\- Same solution for both same subscription and different subscription
\- Most efficient for authorization: does NOT require another separate
signalling than the SIP REFER signalling itself in order for the controller UE
to be able to authorize the media flows transfer if authorization is to be
performed by the controller UE
\- No need to know beforehand the hosting address of the SCC AS in another
domain in the case of different subscription
\- Controller UE knows the result of IUT. No need the Subscribe/Notify
mechanism to inform the result of IUT to controller UE.
Disadvantages:
\- The UE requesting the media flow transfer is not informed the result of IUT
after completion
#### 5.6.1.3 Pros and Cons of Alternative 3 (based on SIP re-INVITE request)
Advantages:
\- The UE requesting the media flow transfer is informed the result of IUT
after completion
Disadvantages:
\- Require another separate signalling than the SIP REFER signalling itself in
order for the controller UE to be able to authorize the media flows transfer
if authorization is to be performed by the controller UE
\- Require the Subscribe/Notify mechanism to inform the result of IUT to
controller UE
## 5.7 Evaluation of solutions for session replication
### 5.7.1 Evaluation of solutions for session replication by the SCC AS --
pull mode
#### 5.7.1.1 General
The following subclauses evaluate the protocol solutions for identifying
Inter-UE transfer requests for media or session replication by the SCC AS as
described in subclause 4.7.1.1, providing advantages and disadvantages for
each solution.
#### 5.7.1.2 New SDP attribute to indicate replication of media component
Advantages:
\- since replication is an action on the media, it makes sense to include an
indication in the SDP rather than in the SIP message headers.
\- it is possible to apply semantics to the session level usage and media
level usage of the attribute to distinguish replication of a session,
including signalling, compared with replication of specific media flows.
\- extending the attributes requires no further specification in IETF, with
only IANA registration of the attribute.
Disadvantages:
\- An indication in the SDP does not provide a immediate distinction of
requests for replication within the SIP header fields.
#### 5.7.1.3 New SIP header field, \"Replicate\", to distinguish a request for
replication
Advantages:
\- explicitly identifies the session to be replicated as well as
distinguishing requests for replication
Disadvantages:
\- may require further specification in IETF and thus may not be a stable
solution for release 10
#### 5.7.1.4 New XML body for session and media flow replication
Editor\'s Note: No protocol solution is currently available to evaluate. If no
protocol solution is provided, this subclause can be removed.
#### 5.7.1.5 New media feature tag g.3gpp.iut.replicator in Accept-Contact
header field
Advantages:
\- The feature tag can be extended to provide more instructions to the network
on which media flows are to be replicated.
Disadvantages:
\- In conventional usage of media feature tags, such tags are normally
registered by UAs. When used by a calling party in the Accept-Contact header
field, it intends to reach a UA which has the capabilities that are described
by the included feature-tags. In the case of replication, and the use of
g.3gpp.iut.replicator, it does not appear to be used for target selection, but
as a request for the network or endpoint to perform a specific set of
procedures, i.e., replication.
\- Therefore, this proposal can be considered to not fit in line with the
semantics of the Accept-Contact header.
#### 5.7.1.6 Conclusion on identifying requests for replication by the SCC AS
Based upon the evaluations that have been carried out in the above subclauses,
a new SDP attribute is chosen as the working solution for identifying requests
for replication by the SCC AS. Thus, the presence of the attribute as
specified in subclause 4.7.2.1.1, in the SDP at either a session level or at a
media level, identifies that the SIP request is a request for replication by
the SCC AS of a session or some or all media components of a session towards
another UE.
### 5.7.2 Evaluation of solutions for session replication by the SCC AS --
push mode
Refer to subclause 5.7.1. The evaluations and conclusions in subclause 5.7.1
equally apply to the case for session replication by the SCC AS -- push mode.
### 5.7.3 Evaluation of solutions for session replication by remote UE -- pull
mode
#### 5.7.3.0 Conclusion
The decision of the CT1 working group is that the alternative 1A (as described
in subclause 4.7.2.3.1A) will be specified in normative specifications in
release 10.
#### 5.7.3.1 Pros and cons of alternative 1 (as described in subclause
4.7.2.3.1)
Advantages:
\- simple signalling
Disadvantages:
\- requires replication support in the remote UE
\- privacy of the user participating in the session is violated as any UE
which is able to fetch dialog event package of the user participating in the
session can replicate the user\'s session and get the same playback state
without authorization of the user participating in the session
#### 5.7.3.1A Pros and cons of alternative 1A (as described in subclause
4.7.2.3.1A)
Advantages:
\- privacy of the user participating in the session is protected as the UE
participating in the session provides the playback state
Disadvantages:
\- more complicated signalling due to need to fetch the playback state from
the SC UE participating in the session
\- requires remote UE to provide the same media in sessions established with
the same Request-URI, e.g. an INVITE to a URI identifying a movie at an AS
always results to playback of the same movie
### 5.7.4 Evaluation of solutions for session replication by remote UE -- push
mode
#### 5.7.4.0 Conclusion
The decision of the CT1 working group is that the alternative 1A (as described
in subclause 4.7.2.4.1A) will be specified in normative specifications in
release 10.
#### 5.7.4.1 Pros and cons of alternative 1 (as described in subclause
4.7.2.4.1)
Advantages:
\- simple signalling
Disadvantages:
\- requires replication support in the remote UE
\- privacy of the user participating in the session is violated as any UE
which is able to fetch dialog event package of the user participating in the
session can replicate the user\'s session and get the same playback state
without authorization of the user participating in the session
#### 5.7.4.1A Pros and cons of alternative 1A (as described in subclause
4.7.2.4.1A)
Advantages:
\- simple signalling
\- privacy of the user participating in the session is protected as the UE
participating in the session provides the playback state.
Disadvantages:
\- requires remote UE to provide the same media in sessions established with
the same Request-URI, e.g. an INVITE to a URI identifying a movie at an AS
always results to playback of the same movie.
## 5.8 Inter-UE transfer between UEs connected to the IMS and UEs in the CS
domain
### 5.8.0 Conclusion
The decision of the CT1 working group is that no specific additional
procedures need to be described in Rel-10 for the inter-UE transfer between
UEs connected to the IMS and UEs in the CS domain.
## 5.9 Evaluation of solutions for session discovery
### 5.9.0 Conclusion
The decision of the CT1 working group is that the alternative 1 (as described
in subclause 4.9.2.1) will be specified in normative specifications in release
10.
## 5.10 Collaborative session handling upon loss of collaborative session
control
### 5.10.0 Conclusion
The decision of the CT1 working group is that the procedures as described in
subclause 4.10.2.1 and subclause 4.10.2.2 will be specified in normative
specifications in release 10.
## 5.11 Evaluation of solutions for media modification
### 5.11.1 Conclusion
The decision of the CT1 working group is that the procedures as described in
subclause 4.11.2.1 and 4.11.2.2 will be specified in the normative
specification in release 10.
## 5.12 Collaborative session profile
### 5.12.0 Conclusion
The decision of the CT1 working group is that no specific additional
procedures need to be described in Rel-10 for the collaborative session
profile.
## 5.13 Evaluation of solutions for inter-UE transfer without establishing a
collaborative session
### 5.13.0 Conclusion
The decision of the CT1 working group is that the alternative 1 (as described
in subclause 4.13.2.1.1.1) will be specified in normative specifications in
release 10.
## 5.14 Evaluation of solutions for supplementary services
### 5.14.1 Conclusion
The decision of the CT1 working group is that the procedures as described in
subclause 4.14.2.1, 4.14.2.2, 4.14.2.3 and 4.14.2.4 will be specified in the
normative specification in release 10.
# 6 Protocol extensions
## 6.1 General
Editor\'s Note: This section will include possibly necessary protocol
extensions, such as e.g. SIP feature tags or SIP headers, which might be
necessary to resolve the issues found with the new procedures described in
this CR. Every new protocol extension has to identify, whether it can be
defined within 3GPP or needs involvement from other standardisation bodies,
such as IETF.
## 6.2 Definition of media feature tag g.3gpp.iut-focus
Media feature-tag name: g.3gpp.iut-focus
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Summary of the media feature indicated by this tag: This media feature-tag
when used in a SIP request or a SIP response indicates that the function
sending the SIP message supports anchoring a IUT session.
Values appropriate for use with this feature-tag: none
The feature-tag is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms: This feature-tag is most
useful in a communications application, for describing the capabilities of a
device, such as a phone or PDA.
Examples of typical use: Indicating that a SCC AS has anchored the related IUT
session.
Related standards or documents: 3GPP TR 24.837: \"IP Multimedia Subsystem
(IMS) Service Continuity; Stage 3\"
Security Considerations: Security considerations for this media feature-tag
are discussed in subclause 12.1 of IETF RFC 3840 [9].
## 6.3 Replication body
### 6.3.1 General
This subclause defines XML schema and MIME type of the replication body.
NOTE: IMS communication services using the session replication can define
parameters describing the playback state parameters by substitution of the
parameterAbstract element.
### 6.3.2 XML schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
### 6.3.3 IANA registration template
Editor's note: The MIME type \"application/vnd.3gpp.replication+xml\" as
defined in this subclause is to be registered in the IANA registry for
Application Media Types based upon the following template.
MIME media type name:
application
MIME subtype name:
vnd.3gpp.replication+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in IETF RFC 3023 [21].
Encoding considerations:
Same as encoding considerations of application/xml as specified in IETF RFC
3023 [21].
Security considerations:
Same as general security considerations for application/xml as specified in
section 10 of IETF RFC 3023 [21]. In addition, this content type provides a
format for exchanging information in SIP, so the security considerations from
IETF RFC 3261 [x] apply.
Interoperability considerations:
Same as interoperability considerations as specified in section 3.1 of IETF
RFC 3023 [21].
The requestedParameters element is the root element, when the body contains
the playback state parameters to be provided. The parameterValues element is
the root element, when the body contains the playback state parameter values.
The replication element is the root element, when the body indicates
replication request.
Published specification:
3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version
10.0.0, available via http://www.3gpp.org/specs/numbering.htm.
Applications which use this media:
Applications support the service continuity as described in the published
specification.
Intended usage:
COMMON
Additional information:
1\. Magic number(s): none
2\. File extension(s): none
3\. Macintosh file type code: none
4\. Object Identifiers: none
Editor\'s note: it is FFS whether to have a separate MIME type for playback
state
## 6.4 Media feature tag g.3gpp.iut.solicit
Media feature-tag name: g.3gpp.iut.solicit
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Summary of the media feature indicated by this tag: This media feature-tag
when used in a Contact header field of SIP REGISTER request indicates that the
UE want to solicit the IUT of media flows through updating its status.
Values appropriate for use with this feature-tag: none
The feature-tag is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms: This feature-tag is most
useful in a communications application, for soliciting an Inter UE transfer
operation.
Examples of typical use: Indicating that to the IMS Core that the SIP message
is the solicited inter-UE transfer operation.
Related standards or documents: 3GPP TS 24.837: \"IP Multimedia Subsystem
(IMS) inter-UE transfer enhancements; Stage 3\"
Editor\'s note: The document 3GPP TS 24.837 will be replaced by document 3GPP
TS 24.237.
Security Considerations: Security considerations for this media feature-tag
are discussed in subclause 12.1 of IETF RFC 3840 [9].
## 6.5 Extension to Contact header field
### 6.5.1 Introduction
This extension defines a new contact-param for the Contact header field used
in re-REGISTER requests. For more information, see RFC 3261 [20] subclause
25.1.
### 6.5.2 Syntax
The syntax of contact-param for the Contact header field is specified in table
6.5-1.
Table 6.5-1: Syntax of contact-param for Contact header field
Contact = (\"Contact\" / \"m\" ) HCOLON
( STAR / (contact-param *(COMMA contact-param)))
contact-param = (name-addr / addr-spec) *(SEMI contact-params)
name-addr = [ display-name ] LAQUOT addr-spec RAQUOT
addr-spec = SIP-URI / SIPS-URI / absoluteURI
display-name = *(token LWS)/ quoted-string
contact-params = c-p-q / c-p-expires / contact-extension
/ c-p-rue / c-p-m-type / c-p-s-type
c-p-q = \"q\" EQUAL qvalue
c-p-expires = \"expires\" EQUAL delta-seconds
contact-extension = generic-param
c-p-rue = \"requested-ue\" EQUAL DQUOTE SIP-URI DQUOTE
c-p-m-type = \"media-type\" EQUAL DQUOTE media-type-value DQUOTE
c-p-s-type = \"service-type\" EQUAL DQUOTE service-type-value DQUOTE
media-type-value = (\"audio\" / \"video\" / \"text\" / \"application\" /
\"message\")
; defined in RFC 4566
service-type-value = Service-ID ; defined in draft-drage-sipping-service-
identification-02
The BNF for contact-param is taken from IETF RFC 3261 [20] and modified
accordingly.
Editor's Note: Contact header field parameter extension needs IETF RFC.
### 6.5.3 Operation
These contact parameters are appended to the Contact header field of re-
REGISTER requests for solicitation of IUT. On receiving the re-registration
request, the S-CSCF shall send a NOTIFY request to the requested UE as
specified in 3GPP TS 24.229, subclause 5.4.2.1.2.
# 7 Extensions to 3GPP TS 24.229
## 7.1 General
Editor\'s Note: This section will include possibly necessary extensions to
3GPP TS 24.229. It is currently not foreseen that any profile table changes
should be reflected in this TR -- those should go directly into 3GPP TS
24.229, once the related procedures and extensions have been agreed to be
included in the relevant 3GPP TS.
###### ## Annex A (informative): Definition of protocol extensions
# A.1. Media feature tag g.3gpp.iut-xyz
Media feature-tag name: g.3gpp.iut-xyz
Editor\'s Note: It is FFS what the syntax of the media feature tag g.3gpp.iut-
xyz is.
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Summary of the media feature indicated by this tag: This media feature-tag
when used in a SIP message indicates that the SIP message is an inter-UE
transfer operation.
Values appropriate for use with this feature-tag: none
The feature-tag is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms: This feature-tag is most
useful in a communications application, for indicating that the SIP message
request is an inter-UE transfer operation.
Examples of typical use: Indicating that to the IMS Core that the SIP message
is an inter-UE transfer operation.
Related standards or documents: 3GPP TS 24.837: \"IP Multimedia Subsystem
(IMS) inter-UE transfer enhancements; Stage 3\"
Editor\'s note: The document 3GPP TS 24.837 will be replaced by document 3GPP
TS 24.237.
Security Considerations: Security considerations for this media feature-tag
are discussed in subclause 12.1 of IETF RFC 3840 [9].
# A.2. Media feature tag g.3gpp.iut.replicator
Media feature-tag name: g.3gpp.iut.replicator
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Summary of the media feature indicated by this tag:
This media feature-tag when used in a Contact header field of SIP INVITE
request or SIP response to the SIP INVITE requests indicates that the session
being established can be replicated. The value of the feature tag indicates
the unique identity of the session.
This media feature-tag when used in a Accept-Contact header field of SIP
INVITE request indicates that originator of the session being established
wishes to replicate the session identified by the Target-Dialog header field
included in the SIP INVITE request.
Values appropriate for use with this feature-tag: string with syntax as
defined for value of the Target-Dialog header field in IETF RFC 4538 [19].
The feature-tag is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms: This feature-tag is most
useful in a communications application, for Inter UE replication operation.
Examples of typical use: Indicating that to the IMS Core that the SIP message
is an inter-UE replication operation.
Related standards or documents: 3GPP TS 24.837: \"IP Multimedia Subsystem
(IMS) inter-UE transfer enhancements; Stage 3\"
Editor\'s note: The document 3GPP TS 24.837 will be replaced by document 3GPP
TS 24.237.
Security Considerations: Security considerations for this media feature-tag
are discussed in subclause 12.1 of IETF RFC 3840 [9].
# A.3. Media feature tag g.3gpp.current-iut-controller
Media feature-tag name: g.3gpp.current-iut-controller
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Summary of the media feature indicated by this tag:
This media feature-tag when used in a Contact header field of SIP request or
SIP response indicates that the UA is the currently active IUT controller for
the collaborative session or is a controllee in the collaborative. The values
of the feature tag are \"Active\" and \"Passive\".
This media feature-tag when used in a Accept-Contact header field of a SIP
INVITE request indicates that the target UE is requested to become the active
IUT controller for the collaborative session.
Values appropriate for use with this feature-tag: string with syntax as
follows:
\"Active\" indicates that the UA is the currently active IUT controller for
the collaborative session.
\"Passive\" indicates that the UA is a controllee in the collaborative session
but is willing to become an active controller for the collaborative session.
The feature-tag is intended primarily for use in the following applications,
protocols, services, or negotiation mechanisms: This feature-tag is most
useful in a communications application, for Inter UE control transfer
operation.
Examples of typical use: Indicating that a UA wishes to relinquish control of
the collaborative session and requesting a UA to become the active IUT
controller for the collaborative session.
Related standards or documents: 3GPP TS 24.837: \"IP Multimedia Subsystem
(IMS) inter-UE transfer enhancements; Stage 3\".
Editor\'s note: The document 3GPP TS 24.837 will be replaced by document 3GPP
TS 24.237.
Security Considerations: Security considerations for this media feature-tag
are discussed in subclause 12.1 of IETF RFC 3840 [9].
# A.4 IUT transfer feature XML schema
## A.4.1 General
This subclause defines XML schema and MIME type related to the IUT transfer
features.
## A.4.2 XML schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## A.4.3 IANA registration template
Editor's note: The MIME type \"application/vnd.3gpp.iut+xml\" as defined in
this subclause is to be registered in the IANA registry for Application Media
Types based upon the following template.
MIME media type name:
application
MIME subtype name:
application/vnd.3gpp.iut+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in IETF RFC 3023 [21].
Encoding considerations:
Same as encoding considerations of application/xml as specified in IETF RFC
3023 [21]
Security considerations:
Same as general security considerations for application/xml as specified in
section 10 of IETF RFC 3023 [21]. In addition, this content type provides a
format for exchanging information in SIP, so the security considerations from
IETF RFC 3261 [19] apply.
Interoperability considerations:
Same as interoperability considerations as specified in section 3.1 of IETF
RFC 3023 [21].
Published specification:
3GPP TS 24.237 \"IP Multimedia Subsystem (IMS) Service Continuity\", version
10.X.0, available via http://www.3gpp.org/specs/numbering.htm.
Applications which use this media:
Applications supporting the Inter UE Transfer as described in the published
specification.
Intended usage:
COMMON
Additional information:
1\. Magic number(s): none
2\. File extension(s): none
3\. Macintosh file type code: none
4\. Object Identifiers: none
# A.5 Definition of **SDP attribute a=3gpp.iut.controllee**
SDP Attribute name: **a=3gpp.iut.controllee**
ASN.1 Identifier: 1.3.6.1.8.2.x
Editor\'s note: The ASN.1 Identifier will need to be updated once the IANA
registration is completed.
Editor\'s note: The IANA registration needs to be done when Rel-10 frozen.
Summary of the SDP attribute indicated by this attribute: This SDP attribute
when used in a SIP request or a SIP response indicates the SIP address of the
controllee UE in collaborative session.
Values appropriate for use with this attribute:
\ = SIPURI / TEL URI
\ = SIP address of controlee UE
The **3gpp.iut.controllee** attribute is a media attribute and it is not
dependent on charset.
Examples of typical use: Indicating that the media is established in the
controllee UE of the collaborative session.
Related standards or documents: 3GPP TR 24.837: \"IP Multimedia Subsystem
(IMS) Service Continuity; Stage 3\"
Security Considerations: none
###### ## Annex B (informative): Example signalling flows
# B.1 Scope of signalling flows
This annex gives examples of signalling flows for Service Continuity based on
the Session Initiation Protocol (SIP) and SIP Events.
These signalling flows provide detailed signalling flows, which expand on the
overview information flows provided in 3GPP TS 23.237 [9].
# B.2 Introduction
## B.2.1 General
The signalling flows provided in this annex follow the methodology developed
in 3GPP TS 24.228 [3].
## B.2.2 Key required to interpret signalling flows
Editor's Note: Text different from TS 24.237 needs to be shifted to TS 24.237.
The key to interpret signalling flows specified in 3GPP TS 24.228 [3]
subclauses 4.1 and 4.2 applies with the additions specified below:
\- tel:+1-237-555-1111 represents the public user indentity of SC UE A.
\- tel:+1-237-555-2222 represents the public user indentity of UE B.
\- sip:sccas1.home1.example.net represents the Internet host of SCC AS 1.
\- sip:sccas2.home2.example.net represents the Internet host of SCC AS 2.
\- sip:interUEtransfer\@example.net represents the Inter UE Transfer SCC AS
URI of the all UA.
\- sip:conference1\@home1.example.net represents the Conference URI.
Each signalling flow table contains descriptions for headers where the content
of the header is new to that signalling flow, as is already performed in 3GPP
TS 24.228 [3].
However, 3GPP TS 24.228 [3] includes extensive descriptions for the contents
of various headers following each of the tables representing the contents of
the signalling flows. Where the operation of the header is identical to that
shown in 3GPP TS 24.228 [3], then such text is not reproduced in the present
document.
Additional text may also be found on the contents of headers within 3GPP TS
24.228 [3] in addition to the material shown in the present document.
In order to differentiate between messages for SIP and media, the notation in
figure C.2-1 is used.
> Figure C.2-1: Signalling flow notation
#