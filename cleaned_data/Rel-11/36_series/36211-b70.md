# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes the physical channels for evolved UTRA.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.201: \"Evolved Universal Terrestrial Radio Access (E-UTRA); LTE
physical layer; General description\".
[3] 3GPP TS 36.212: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Multiplexing and channel coding\".
[4] 3GPP TS 36.213: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer procedures\".
[5] 3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer; Measurements\".
[6] 3GPP TS 36.104: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Base Station (BS) radio transmission and reception\".
[7] 3GPP TS 36.101: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio transmission and reception\".
[8] 3GPP TS 36.321, \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Medium Access Control (MAC) protocol specification\".
# 3 Symbols and abbreviations
## 3.1 Symbols
For the purposes of the present document, the following symbols apply:
$(k,l)$ Resource element with frequency-domain index $k$ and time-domain index
$l$
$a_{k,l}^{(p)}$ Value of resource element $(k,l)$ [for antenna port$p$]
$D$ Matrix for supporting cyclic delay diversity
$D_{\text{RA}}$ Density of random access opportunities per radio frame
$f_{0}$ Carrier frequency
$f_{\text{RA}}$ PRACH resource frequency index within the considered time-
domain location
$M_{\text{sc}}^{\text{PUSCH}}$ Scheduled bandwidth for uplink transmission,
expressed as a number of subcarriers
$M_{\text{RB}}^{\text{PUSCH}}$ Scheduled bandwidth for uplink transmission,
expressed as a number of resource blocks
$M_{\text{bit}}^{(q)}$ Number of coded bits to transmit on a physical channel
[for codeword $q$]
$M_{\text{symb}}^{(q)}$ Number of modulation symbols to transmit on a physical
channel [for codeword $q$]
$M_{\text{symb}}^{\text{layer}}$ Number of modulation symbols to transmit per
layer for a physical channel
$M_{\text{symb}}^{\text{ap}}$ Number of modulation symbols to transmit per
antenna port for a physical channel
$N$ A constant equal to 2048 for $\text{Δf} = \text{15}\text{\ kHz}$ and 4096
for $\text{Δf} = 7\text{.}5\text{\ kHz}$
$N_{\text{CP},l}$ Downlink cyclic prefix length for OFDM symbol $l$ in a slot
$N_{\text{CS}}$ Cyclic shift value used for random access preamble generation
$N_{\text{cs}}^{(1)}$ Number of cyclic shifts used for PUCCH formats 1/1a/1b
in a resource block with a mix of formats 1/1a/1b and 2/2a/2b
$N_{\text{RB}}^{(2)}$ Bandwidth available for use by PUCCH formats 2/2a/2b,
expressed in multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{HO}}$ The offset used for PUSCH frequency hopping,
expressed in number of resource blocks (set by higher layers)
$N_{\text{ID}}^{\text{cell}}$ Physical layer cell identity
$N_{\text{ID}}^{\text{MBSFN}}$ MBSFN area identity
$N_{\text{RB}}^{\text{DL}}$ Downlink bandwidth configuration, expressed in
multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{min,\ DL}}$ Smallest downlink bandwidth configuration,
expressed in multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{max,\ DL}}$ Largest downlink bandwidth configuration,
expressed in multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{UL}}$ Uplink bandwidth configuration, expressed in
multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{min,\ UL}}$ Smallest uplink bandwidth configuration,
expressed in multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{RB}}^{\text{max,\ UL}}$ Largest uplink bandwidth configuration,
expressed in multiples of $N_{\text{sc}}^{\text{RB}}$
$N_{\text{symb}}^{\text{DL}}$ Number of OFDM symbols in a downlink slot
$N_{\text{symb}}^{\text{UL}}$ Number of SC-FDMA symbols in an uplink slot
$N_{\text{sc}}^{\text{RB}}$ Resource block size in the frequency domain,
expressed as a number of subcarriers
$N_{\text{sb}}$ Number of sub-bands for PUSCH frequency-hopping with
predefined hopping pattern
$N_{\text{RB}}^{\text{sb}}$ Size of each sub-band for PUSCH frequency-hopping
with predefined hopping pattern, expressed as a number of resource blocks
$N_{\text{SP}}$ Number of downlink to uplink switch points within the radio
frame
$N_{\text{RS}}^{\text{PUCCH}}$ Number of reference symbols per slot for PUCCH
$N_{\text{TA}}$ Timing offset between uplink and downlink radio frames at the
UE, expressed in units of $T_{s}$
$N_{\text{TA\ offset}}$ Fixed timing advance offset, expressed in units of
$T_{s}$
$n_{\text{PUCCH}}^{(1,\overset{\sim}{p})}$ Resource index for PUCCH formats
1/1a/1b
$n_{\text{PUCCH}}^{(2,\overset{\sim}{p})}$ Resource index for PUCCH formats
2/2a/2b
$n_{\text{PUCCH}}^{(3,\overset{\sim}{p})}$ Resource index for PUCCH formats 3
$n_{\text{PDCCH}}$ Number of PDCCHs present in a subframe
$n_{\text{PRB}}$ Physical resource block number
$n_{\text{PRB}}^{\text{RA}}$ First physical resource block occupied by PRACH
resource considered
$n_{\text{PRB\ offset}}^{\text{RA}}$ First physical resource block available
for PRACH
$n_{\text{VRB}}$ Virtual resource block number
$n_{\text{RNTI}}$ Radio network temporary identifier
$n_{f}$ System frame number
$n_{s}$ Slot number within a radio frame
$P$ Number of antenna ports used for transmission of a channel
$p$ Antenna port number
$q$ Codeword number
$r_{\text{RA}}$ Index for PRACH versions with same preamble format and PRACH
density
_Q~m~_ Modulation order: 2 for QPSK, 4 for 16QAM and 6 for 64QAM transmissions
$s_{l}^{(p)}\left( t \right)$ Time-continuous baseband signal for antenna port
$p$ and OFDM symbol $l$ in a slot
$t_{\text{RA}}^{(0)}$ Radio frame indicator index of PRACH opportunity
$t_{\text{RA}}^{(1)}$ Half frame index of PRACH opportunity within the radio
frame
$t_{\text{RA}}^{(2)}$ Uplink subframe number for start of PRACH opportunity
within the half frame
$T_{f}$ Radio frame duration
$T_{s}$ Basic time unit
$T_{\text{slot}}$ Slot duration
$W$ Precoding matrix for downlink spatial multiplexing
$\beta_{\text{PRACH}}$ Amplitude scaling for PRACH
$\beta_{\text{PUCCH}}$ Amplitude scaling for PUCCH
$\beta_{\text{PUSCH}}$ Amplitude scaling for PUSCH
$\beta_{\text{SRS}}$ Amplitude scaling for sounding reference symbols
$\text{Δf}$ Subcarrier spacing
$\text{Δf}_{\text{RA}}$ Subcarrier spacing for the random access preamble
$\upsilon$ Number of transmission layers
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
CCE Control Channel Element
CDD Cyclic Delay Diversity
CRS Cell-specific Reference Signal
CSI Channel-State Information
DCI Downlink Control Information
DM-RS Demodulation Reference Signal
ECCE Enhanced Control Channel Element
EPDCCH Enhanced Physical Downlink Control CHannel
EREG Enhanced Resource-Element Group
PBCH Physical Broadcast CHannel
PCFICH Physical Control Format Indicator CHannel
PDCCH Physical Downlink Control CHannel
PDSCH Physical Downlink Shared CHannel
PHICH Physical Hybrid-ARQ Indicator CHannel
PMCH Physical Multicast CHannel
PRACH Physical Random Access CHannel
PRB Physical Resource Block
PRS Positioning Reference Signal
PUCCH Physical Uplink Control CHannel
PUSCH Physical Uplink Shared CHannel
REG Resource-Element Group
SRS Sounding Reference Signal
VRB Virtual Resource Block
# 4 Frame structure
Throughout this specification, unless otherwise noted, the size of various
fields in the time domain is expressed as a number of time units $T_{s} =
1/\left( \text{15000} \times \text{2048} \right)$ seconds.
Downlink and uplink transmissions are organized into radio frames with $T_{f}
= \text{307200} \times T_{s} = \text{10}\text{\ ms}$ duration.\ Two radio
frame structures are supported:
\- Type 1, applicable to FDD,
\- Type 2, applicable to TDD.
Transmissions in multiple cells can be aggregated where up to four secondary
cells can be used in addition to the primary cell. Unless otherwise noted, the
description in this specification applies to each of the up to five serving
cells. In case of multi-cell aggregation, the UE may assume the same frame
structure is used in all the serving cells.
## 4.1 Frame structure type 1
Frame structure type 1 is applicable to both full duplex and half duplex FDD.
Each radio frame is $T_{f} = \text{307200} \cdot T_{s} = \text{10}\text{\ ms}$
long and consists of 20 slots of length$T_{\text{slot}} = \text{15360} \cdot
T_{s} = 0\text{.}5\text{\ ms}$, numbered from 0 to 19. A subframe is defined
as two consecutive slots where subframe $i$ consists of slots $2i$and$2i + 1$.
For FDD, 10 subframes are available for downlink transmission and 10 subframes
are available for uplink transmissions in each 10 ms interval. Uplink and
downlink transmissions are separated in the frequency domain. In half-duplex
FDD operation, the UE cannot transmit and receive at the same time while there
are no such restrictions in full-duplex FDD.
Figure 4.1-1: Frame structure type 1
## 4.2 Frame structure type 2
Frame structure type 2 is applicable to TDD. Each radio frame of length $T_{f}
= \text{307200} \cdot T_{s} = \text{10}\text{\ ms}$ consists of two half-
frames of length $\text{153600} \cdot T_{s} = 5\text{\ ms}$each. Each half-
frame consists of five subframes of length$3\text{0720} \cdot T_{s} = 1\text{\
ms}$.\ The supported uplink-downlink configurations are listed in Table 4.2-2
where, for each subframe in a radio frame, \"D\" denotes the subframe is
reserved for downlink transmissions, \"U\" denotes the subframe is reserved
for uplink transmissions and \"S\" denotes a special subframe with the three
fields DwPTS, GP and UpPTS.\ The length of DwPTS and UpPTS is given by Table
4.2-1 subject to the total length of DwPTS, GP and UpPTS being equal
to$3\text{0720} \cdot T_{s} = 1\text{\ ms}$. Each subframe $i$_is_ defined as
two slots, $2i$and$2i + 1$ of length $T_{\text{slot}} = \text{15360} \cdot
T_{s} = 0\text{.}5\text{\ ms}$in each subframe.
Uplink-downlink configurations with both 5 ms and 10 ms downlink-to-uplink
switch-point periodicity are supported.
In case of 5 ms downlink-to-uplink switch-point periodicity, the special
subframe exists in both half-frames.
In case of 10 ms downlink-to-uplink switch-point periodicity, the special
subframe exists in the first half-frame only.
Subframes 0 and 5 and DwPTS are always reserved for downlink transmission.
UpPTS and the subframe immediately following the special subframe are always
reserved for uplink transmission.
In case multiple cells are aggregated, the UE may assume that the guard period
of the special subframe in the different cells have an overlap of at least
$\text{1456} \cdot T_{s}$.
In case multiple cells with different uplink-downlink configurations are
aggregated and the UE is not capable of simultaneous reception and
transmission in the aggregated cells, the following constraints apply:
\- if the subframe in the primary cell is a downlink subframe, the UE shall
not transmit any signal or channel on a secondary cell in the same subframe
\- if the subframe in the primary cell is an uplink subframe, the UE is not
expected to receive any downlink transmissions on a secondary cell in the same
subframe
\- if the subframe in the primary cell is a special subframe and the same
subframe in a secondary cell is a downlink subframe, the UE is not expected to
receive PDSCH/EPDCCH/PMCH/PRS transmissions in the secondary cell in the same
subframe, and the UE is not expected to receive any other signals on the
secondary cell in OFDM symbols that overlaps with the guard period or UpPTS in
the primary cell.
Figure 4.2-1: Frame structure type 2 (for 5 ms switch-point periodicity)
Table 4.2-1: Configuration of special subframe (lengths of DwPTS/GP/UpPTS)
* * *
Special subframe configuration Normal cyclic prefix in downlink Extended
cyclic prefix in downlink
                                   DwPTS                              UpPTS                                DwPTS                     UpPTS
                                                                      Normal cyclic prefix\                Extended cyclic prefix\           Normal cyclic prefix in uplink   Extended cyclic prefix in uplink
                                                                      in uplink                            in uplink
0
1
2
3
4
5
6
7
8 - - -
9 - - -
* * *
Table 4.2-2: Uplink-downlink configurations
Uplink-downlink configuration | Downlink-to-Uplink Switch-point periodicity | Subframe number |  |  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---|---  
|  | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9  
0 | 5 ms | D | S | U | U | U | D | S | U | U | U  
1 | 5 ms | D | S | U | U | D | D | S | U | U | D  
2 | 5 ms | D | S | U | D | D | D | S | U | D | D  
3 | 10 ms | D | S | U | U | U | D | D | D | D | D  
4 | 10 ms | D | S | U | U | D | D | D | D | D | D  
5 | 10 ms | D | S | U | D | D | D | D | D | D | D  
6 | 5 ms | D | S | U | U | U | D | S | U | U | D  
# 5 Uplink
## 5.1 Overview
The smallest resource unit for uplink transmissions is denoted a resource
element and is defined in clause 5.2.2.
### 5.1.1 Physical channels
An uplink physical channel corresponds to a set of resource elements carrying
information originating from higher layers and is the interface defined
between 3GPP TS 36.212 [3] and the present document 3GPP TS 36.211.\ The
following uplink physical channels are defined:
\- Physical Uplink Shared Channel, PUSCH
\- Physical Uplink Control Channel, PUCCH
\- Physical Random Access Channel, PRACH
### 5.1.2 Physical signals
An uplink physical signal is used by the physical layer but does not carry
information originating from higher layers. The following uplink physical
signals are defined:
\- Reference signal
## 5.2 Slot structure and physical resources
### 5.2.1 Resource grid
The transmitted signal in each slot is described by one or several resource
grids of $N_{\text{RB}}^{\text{UL}}N_{\text{sc}}^{\text{RB}}$ subcarriers and
$N_{\text{symb}}^{\text{UL}}$ SC-FDMA symbols. The resource grid is
illustrated in Figure 5.2.1-1. The quantity $N_{\text{RB}}^{\text{UL}}$
depends on the uplink transmission bandwidth configured in the cell and shall
fulfil
where $N_{\text{RB}}^{\text{min,UL}} = 6$ and $N_{\text{RB}}^{\text{max,UL}} =
\text{110}$ are the smallest and largest uplink bandwidths, respectively,
supported by the current version of this specification. The set of allowed
values for $N_{\text{RB}}^{\text{UL}}$ is given by 3GPP TS 36.101 [7].
The number of SC-FDMA symbols in a slot depends on the cyclic prefix length
configured by the higher layer parameter _UL-CyclicPrefixLength_ and is given
in Table 5.2.3-1.
An antenna port is defined such that the channel over which a symbol on the
antenna port is conveyed can be inferred from the channel over which another
symbol on the same antenna port is conveyed. There is one resource grid per
antenna port. The antenna ports used for transmission of a physical channel or
signal depends on the number of antenna ports configured for the physical
channel or signal as shown in Table 5.2.1-1. The index $\overset{\sim}{p}$ is
used throughout clause 5 when a sequential numbering of the antenna ports is
necessary.
Figure 5.2.1-1: Uplink resource grid
Table 5.2.1-1: Antenna ports used for different physical channels and signals
* * *
Physical channel or signal Index $\overset{\sim}{p}$ Antenna port number $p$
as a function of\  
the number of antenna ports configured\  
for the respective physical channel/signal
                                                           1                                            2     4
PUSCH 0 10 20 40
                               1                           \-                                           21    41
                               2                           \-                                           \-    42
                               3                           \-                                           \-    43
SRS 0 10 20 40
                               1                           \-                                           21    41
                               2                           \-                                           \-    42
                               3                           \-                                           \-    43
PUCCH 0 100 200 -
                               1                           \-                                           201   \-
* * *
### 5.2.2 Resource elements
Each element in the resource grid is called a resource element and is uniquely
defined by the index pair $\left( k,l \right)$ in a slot where $k =
0,\text{.}\text{.}\text{.},N_{\text{RB}}^{\text{UL}}N_{\text{sc}}^{\text{RB}}
- 1$ and $l = 0,\text{.}\text{.}\text{.},N_{\text{symb}}^{\text{UL}} - 1$ are
the indices in the frequency and time domains, respectively. Resource element
$\left( k,l \right)$ on antenna port $p$ corresponds to the complex value
$a_{k,l}^{(p)}$_._ \ _When there is no risk for confusion, or no particular
antenna port is specified, the index_ $p$ may be dropped _._ \ Quantities
$a_{k,l}^{(p)}$ corresponding to resource elements not used for transmission
of a physical channel or a physical signal in a slot shall be set to zero.
### 5.2.3 Resource blocks
A physical resource block is defined as
$N_{\text{symb}}^{\text{UL}}$consecutive SC-FDMA symbols in the time domain
and $N_{\text{sc}}^{\text{RB}}$consecutive subcarriers in the frequency
domain, where $N_{\text{symb}}^{\text{UL}}$ and $N_{\text{sc}}^{\text{RB}}$
are given by Table 5.2.3-1.\ A physical resource block in the uplink thus
consists of $N_{\text{symb}}^{\text{UL}} \times N_{\text{sc}}^{\text{RB}}$
resource elements, corresponding to one slot in the time domain and 180 kHz in
the frequency domain.
Table 5.2.3-1: Resource block parameters
* * *
Configuration  
Normal cyclic prefix 12 7 Extended cyclic prefix 12 6
* * *
The relation between the physical resource block number $n_{\text{PRB}}$ in
the frequency domain and resource elements $(k,l)$ in a slot is given by
## 5.3 Physical uplink shared channel
The baseband signal representing the physical uplink shared channel is defined
in terms of the following steps:
\- scrambling
\- modulation of scrambled bits to generate complex-valued symbols
\- mapping of the complex-valued modulation symbols onto one or several
transmission layers
\- transform precoding to generate complex-valued symbols
\- precoding of the complex-valued symbols
\- mapping of precoded complex-valued symbols to resource elements
\- generation of complex-valued time-domain SC-FDMA signal for each antenna
port
Figure 5.3-1: Overview of uplink physical channel processing
### 5.3.1 Scrambling
For each codeword $q$, the block of bits
$b^{(q)}(0),\text{.}\text{.}\text{.},b^{(q)}(M_{\text{bit}}^{(q)} - 1)$, where
$M_{\text{bit}}^{(q)}$ is the number of bits transmitted in codeword $q$ on
the physical uplink shared channel in one subframe, shall be scrambled with a
UE-specific scrambling sequence prior to modulation, resulting in a block of
scrambled bits
${\overset{\sim}{b}}^{(q)}(0),\text{.}\text{.}\text{.},{\overset{\sim}{b}}^{(q)}(M_{\text{bit}}^{(q)}
- 1)$ according to the following pseudo code
Set _i_ = 0
while $i  ${\overset{\sim}{b}}^{(q)}(i) = {\overset{\sim}{b}}^{(q)}(i - 1)$
>
> else // Data or channel quality coded bits, Rank Indication coded bits or
> ACK/NACK coded bits
>
> end if
end if
> _i_ = _i_ \+ 1
end while
where x and y are tags defined in 3GPP TS 36.212 [3] clause 5.2.2.6 and where
the scrambling sequence $c^{(q)}(i)$ is given by clause 7.2. The scrambling
sequence generator shall be initialised with $c_{\text{init}} =
n_{\text{RNTI}} \cdot 2^{\text{14}} + q \cdot 2^{\text{13}} + \left\lfloor
n_{s}/2 \right\rfloor \cdot 2^{9} + N_{\text{ID}}^{\text{cell}}$ at the start
of each subframe where $n_{\text{RNTI}}$ corresponds to the RNTI associated
with the PUSCH transmission as described in clause 8 in 3GPP TS 36.213 [4].
Up to two codewords can be transmitted in one subframe, i.e., $q \in \left{
0,1 \right}$. In the case of single-codeword transmission, $q = 0$.
### 5.3.2 Modulation
For each codeword$q$, the block of scrambled bits
${\overset{\sim}{b}}^{(q)}(0),\text{.}\text{.}\text{.},{\overset{\sim}{b}}^{(q)}(M_{\text{bit}}^{(q)}
- 1)$ shall be modulated as described in clause 7.1, resulting in a block of
complex-valued symbols
$d^{(q)}(0),\text{.}\text{.}\text{.},d^{(q)}(M_{\text{symb}}^{(q)} - 1)$.
Table 5.3.2-1 specifies the modulation mappings applicable for the physical
uplink shared channel.
Table 5.3.2-1: Uplink modulation schemes
* * *
Physical channel Modulation schemes PUSCH QPSK, 16QAM, 64QAM
* * *
### 5.3.2A Layer mapping
The complex-valued modulation symbols for each of the codewords to be
transmitted are mapped onto one or two layers. Complex-valued modulation
symbols $d^{(q)}(0),\text{.}\text{.}\text{.},d^{(q)}(M_{\text{symb}}^{(q)} -
1)$ for codeword $q$ shall be mapped onto the layers $x(i) = \begin{bmatrix}
x^{(0)}(i) & \text{.}\text{.}\text{.} & x^{(\upsilon - 1)}(i) \
\end{bmatrix}^{T}$, $i =
0,1,\text{.}\text{.}\text{.},M_{\text{symb}}^{\text{layer}} - 1$ where
$\upsilon$ is the number of layers and $M_{\text{symb}}^{\text{layer}}$ is the
number of modulation symbols per layer.
#### 5.3.2A.1 Layer mapping for transmission on a single antenna port
For transmission on a single antenna port, a single layer is used, $\upsilon =
1$, and the mapping is defined by
with $M_{\text{symb}}^{\text{layer}} = M_{\text{symb}}^{(0)}$.
#### 5.3.2A.2 Layer mapping for spatial multiplexing
For spatial multiplexing, the layer mapping shall be done according to Table
5.3.2A.2-1. The number of layers $\upsilon$ is less than or equal to the
number of antenna ports $P$ used for transmission of the physical uplink
shared channel.\ The case of a single codeword mapped to multiple layers is
only applicable when the number of antenna ports used for PUSCH is four.
Table 5.3.2A.2-1: Codeword-to-layer mapping for spatial multiplexing
* * *
Number of layers Number of codewords Codeword-to-layer mapping  
1 1  
2 1  
2 2
3 2  
4 2
* * *
### 5.3.3 Transform precoding
For each layer $\lambda = 0,1,\text{.}\text{.}\text{.},\upsilon - 1$ the block
of complex-valued symbols
$x^{(\lambda)}(0),\text{.}\text{.}\text{.},x^{(\lambda)}(M_{\text{symb}}^{\text{layer}}
- 1)$ is divided into
$M_{\text{symb}}^{\text{layer}}/M_{\text{sc}}^{\text{PUSCH}}$ sets, each
corresponding to one SC-FDMA symbol. Transform precoding shall be applied
according to
resulting in a block of complex-valued symbols
$y^{(\lambda)}(0),\text{.}\text{.}\text{.},y^{(\lambda)}(M_{\text{symb}}^{\text{layer}}
- 1)$. The variable$M_{\text{sc}}^{\text{PUSCH}} =
M_{\text{RB}}^{\text{PUSCH}} \cdot N_{\text{sc}}^{\text{RB}}$, where
$M_{\text{RB}}^{\text{PUSCH}}$ represents the bandwidth of the PUSCH in terms
of resource blocks, and shall fulfil
where $\alpha_{2},\alpha_{3},\alpha_{5}$ is a set of non-negative integers.
### 5.3.3A Precoding
The precoder takes as input a block of vectors $\begin{bmatrix} y^{(0)}(i) &
\text{.}\text{.}\text{.} & y^{(\upsilon - 1)}(i) \ \end{bmatrix}^{T}$, $i =
0,1,\text{.}\text{.}\text{.},M_{\text{symb}}^{\text{layer}} - 1$ from the
transform precoder and generates a block of vectors $\begin{bmatrix}
z^{(0)}(i) & \ldots & z^{(P - 1)}(i) \ \end{bmatrix}^{T}$, $i =
0,1,\text{.}\text{.}\text{.},M_{\text{symb}}^{\text{ap}} - 1$ to be mapped
onto resource elements.
#### 5.3.3A.1 Precoding for transmission on a single antenna port
For transmission on a single antenna port, precoding is defined by
where $i = 0,1,\text{.}\text{.}\text{.},M_{\text{symb}}^{\text{ap}} - 1$,
$M_{\text{symb}}^{\text{ap}} = M_{\text{symb}}^{\text{layer}}$.
#### 5.3.3A.2 Precoding for spatial multiplexing
Precoding for spatial multiplexing is only used in combination with layer
mapping for spatial multiplexing as described in clause 5.3.2A.2. Spatial
multiplexing supports $P = 2$ or $P = 4$ antenna ports where the set of
antenna ports used for spatial multiplexing is $p \in \left{
\text{20},\text{21} \right}$ and $p \in \left{
\text{40},\text{41},\text{42},\text{43} \right}$, respectively.
Precoding for spatial multiplexing is defined by
where $i = 0,1,\text{.}\text{.}\text{.},M_{\text{symb}}^{\text{ap}} - 1$,
$M_{\text{symb}}^{\text{ap}} = M_{\text{symb}}^{\text{layer}}$.
The precoding matrix $W$ of size $P \times \upsilon$ is given by one of the
entries in Table 5.3.3A.2-1 for $P = 2$ and by Tables 5.3.3A.2-2 through
5.3.3A.2-5 for $P = 4$ where the entries in each row are ordered from left to
right in increasing order of codebook indices.
Table 5.3.3A.2-1: Codebook for transmission on antenna ports $\left{
\text{20},\text{21} \right}$
* * *
Codebook index Number of layers
0  
1 - 2 - 3 - 4 - 5 -
* * *
Table 5.3.3A.2-2: Codebook for transmission on antenna ports $\left{
\text{40},\text{41},\text{42},\text{43} \right}$ with $\upsilon = 1$
* * *
Codebook index Number of layers $\upsilon = 1$  
0 -- 7  
8 -- 15  
16 -- 23
* * *
Table 5.3.3A.2-3: Codebook for transmission on antenna ports $\left{
\text{40},\text{41},\text{42},\text{43} \right}$ with $\upsilon = 2$
* * *
Codebook index Number of layers $\upsilon = 2$  
0 -- 3  
4 -- 7  
8 -- 11  
12 -- 15
* * *
Table 5.3.3A.2-4: Codebook for transmission on antenna ports $\left{
\text{40},\text{41},\text{42},\text{43} \right}$ with $\upsilon = 3$
* * *
Codebook index Number of layers $\upsilon = 3$  
0 -- 3  
4 -- 7  
8 -- 11
* * *
Table 5.3.3A.2-5: Codebook for transmission on antenna ports $\left{
\text{40},\text{41},\text{42},\text{43} \right}$ with $\upsilon = 4$
* * *
Codebook index Number of layers $\upsilon = 4$ 0
* * *
### 5.3.4 Mapping to physical resources
For each antenna port $p$ used for transmission of the PUSCH in a subframe the
block of complex-valued symbols
$z^{(\overset{\sim}{p})}(0),\text{.}\text{.}\text{.},z^{(\overset{\sim}{p})}(M_{\text{symb}}^{\text{ap}}
- 1)$ shall be multiplied with the amplitude scaling factor
$\beta_{\text{PUSCH}}$ in order to conform to the transmit power
$P_{\text{PUSCH}}$specified in clause 5.1.1.1 in 3GPP TS 36.213 [4], and
mapped in sequence starting with $z^{(\overset{\sim}{p})}(0)$ to physical
resource blocks on antenna port $p$ and assigned for transmission of PUSCH.
The relation between the index $\overset{\sim}{p}$ and the antenna port number
$p$ is given by Table 5.2.1-1. The mapping to resource elements $\left( k,l
\right)$ corresponding to the physical resource blocks assigned for
transmission and
\- not used for transmission of reference signals, and
\- not part of the last SC-FDMA symbol in a subframe, if the UE transmits SRS
in the same subframe, and
\- not part of the last SC-FDMA symbol in a subframe configured with cell-
specific SRS, if the PUSCH transmission partly or fully overlaps with the
cell-specific SRS bandwidth, and
\- not part of an SC-FDMA symbol reserved for possible SRS transmission in a
UE-specific aperiodic SRS subframe, and
\- not part of an SC-FDMA symbol reserved for possible SRS transmission in a
UE-specific periodic SRS subframe in the same serving cell when the UE is
configured with multiple TAGs
shall be in increasing order of first the index $k$, then the index$l$,
starting with the first slot in the subframe.
If uplink frequency-hopping is disabled or the resource blocks allocated for
PUSCH transmission are not contiguous in frequency, the set of physical
resource blocks to be used for transmission is given by $n_{\text{PRB}} =
n_{\text{VRB}}$ where $n_{\text{VRB}}$ is obtained from the uplink scheduling
grant as described in clause 8.1 in 3GPP TS 36.213 [4].
If uplink frequency-hopping with type 1 PUSCH hopping is enabled, the set of
physical resource blocks to be used for transmission is given by clause 8.4.1
in 3GPP TS 36.213 [4].
If uplink frequency-hopping with predefined hopping pattern is enabled, the
set of physical resource blocks to be used for transmission in slot $n_{s}$ is
given by the scheduling grant together with a predefined pattern according to
where $n_{\text{VRB}}$ is obtained from the scheduling grant as described in
clause 8.1 in 3GPP TS 36.213 [4]. The parameter _pusch-HoppingOffset_
,$N_{\text{RB}}^{\text{HO}}$, is provided by higher layers. The size
$N_{\text{RB}}^{\text{sb}}$ of each sub-band is given by,
where the number of sub-bands $N_{\text{sb}}$ is given by higher layers. The
function $f_{m}(i) \in \left{ 0,1 \right}$ determines whether mirroring is
used or not. The parameter _Hopping-mode_ provided by higher layers determines
if hopping is \"inter-subframe\" or \"intra and inter-subframe\".
The hopping function $f_{\text{hop}}(i)$and the function$f_{m}(i)$ are given
by
where $f_{\text{hop}}( - 1) = 0$ and the pseudo-random sequence $c(i)$ is
given by clause 7.2 and CURRENT_TX_NB indicates the transmission number for
the transport block transmitted in slot $n_{s}$as defined in [8]. The pseudo-
random sequence generator shall be initialised with $c_{\text{init}} =
N_{\text{ID}}^{\text{cell}}$ for frame structure type 1 and $c_{\text{init}} =
2^{9} \cdot (n_{f}\text{mod}4) + N_{\text{ID}}^{\text{cell}}$ for frame
structure type 2 at the start of each frame.
## 5.4 Physical uplink control channel
The physical uplink control channel, PUCCH, carries uplink control
information. Simultaneous transmission of PUCCH and PUSCH from the same UE is
supported if enabled by higher layers. For frame structure type 2, the PUCCH
is not transmitted in the UpPTS field.
The physical uplink control channel supports multiple formats as shown in
Table 5.4-1.\ Formats 2a and 2b are supported for normal cyclic prefix only.
Table 5.4-1: Supported PUCCH formats
* * *
PUCCH format Modulation scheme Number of bits per subframe, $M_{\text{bit}}$ 1
N/A N/A 1a BPSK 1 1b QPSK 2 2 QPSK 20 2a QPSK+BPSK 21 2b QPSK+QPSK 22 3 QPSK
48
* * *
All PUCCH formats use a cyclic shift, $n_{\text{cs}}^{\text{cell}}(n_{s},l)$,
which varies with the symbol number $l$ and the slot number $n_{s}$ according
to
where the pseudo-random sequence $c(i)$ is defined by clause 7.2. The pseudo-
random sequence generator shall be initialized with $c_{\text{init}} =
n_{\text{ID}}^{\text{RS}}$, where $n_{\text{ID}}^{\text{RS}}$ is given by
clause 5.5.1.5 with $N_{\text{ID}}^{\text{cell}}$ corresponding to the primary
cell, at the beginning of each radio frame.
The physical resources used for PUCCH depends on two parameters,
$N_{\text{RB}}^{(2)}$ and $N_{\text{cs}}^{(1)}$, given by higher layers.\ The
variable $N_{\text{RB}}^{(2)} \geq 0$ denotes the bandwidth in terms of
resource blocks that are available for use by PUCCH formats 2/2a/2b
transmission in each slot. The variable $N_{\text{cs}}^{(1)}$ denotes the
number of cyclic shift used for PUCCH formats 1/1a/1b in a resource block used
for a mix of formats 1/1a/1b and 2/2a/2b. The value of $N_{\text{cs}}^{(1)}$
is an integer multiple of $\Delta_{\text{shift}}^{\text{PUCCH}}$ within the
range of {0, 1, ..., 7}, where $\Delta_{\text{shift}}^{\text{PUCCH}}$ is
provided by higher layers. No mixed resource block is present if
$N_{\text{cs}}^{(1)} = 0$. At most one resource block in each slot supports a
mix of formats 1/1a/1b and 2/2a/2b.\ Resources used for transmission of PUCCH
formats 1/1a/1b, 2/2a/2b and 3 are represented by the non-negative indices
$n_{\text{PUCCH}}^{(\text{1,\ {}\overset{\sim}{p})}$,
$n_{\text{PUCCH}}^{(\text{2,\ {}\overset{\sim}{p})}  0$starts at time
$\sum_{}^{}{(N_{\text{CP},l^{'}} + N)T_{s}}$ within the slot.
Table 5.6-1 lists the values of $N_{\text{CP},l}$that shall be used.
Table 5.6-1: SC-FDMA parameters
* * *
Configuration Cyclic prefix length $N_{\text{CP},l}$ Normal cyclic prefix  
Extended cyclic prefix
* * *
## 5.7 Physical random access channel
### 5.7.1 Time and frequency structure
The physical layer random access preamble, illustrated in Figure 5.7.1-1,
consists of a cyclic prefix of length$T_{\text{CP}}$ and a sequence part of
length$T_{\text{SEQ}}$. The parameter values are listed in Table 5.7.1-1 and
depend on the frame structure and the random access configuration. Higher
layers control the preamble format.
Figure 5.7.1-1: Random access preamble format
Table 5.7.1-1: Random access preamble parameters
* * *
Preamble format  
0  
1  
2  
3  
4 (see Note)  
NOTE: Frame structure type 2 and special subframe configurations with UpPTS
lengths $\text{4384} \cdot T_{s}$and $\text{5120} \cdot T_{s}$only.
* * *
The transmission of a random access preamble, if triggered by the MAC layer,
is restricted to certain time and frequency resources. These resources are
enumerated in increasing order of the subframe number within the radio frame
and the physical resource blocks in the frequency domain such that index 0
correspond to the lowest numbered physical resource block and subframe within
the radio frame. PRACH resources within the radio frame are indicated by a
PRACH Resource Index, where the indexing is in the order of appearance in
Table 5.7.1-2 and Table 5.7.1-4.
For frame structure type 1 with preamble format 0-3, there is at most one
random access resource per subframe.\ Table 5.7.1-2 lists the preamble formats
according to Table 5.7.1-1 and the subframes in which random access preamble
transmission is allowed for a given configuration in frame structure type 1.
The parameter _prach-ConfigurationIndex_ is given by higher layers. The start
of the random access preamble shall be aligned with the start of the
corresponding uplink subframe at the UE assuming $N_{\text{TA}} = 0$, where
$N_{\text{TA}}$ is defined in clause 8.1. For PRACH configurations 0, 1, 2,
15, 16, 17, 18, 31, 32, 33, 34, 47, 48, 49, 50 and 63 the UE may for handover
purposes assume an absolute value of the relative time difference between
radio frame $i$ in the current cell and the target cell of less than
$\text{153600} \cdot T_{s}$.\ The first physical resource block
$n_{\text{PRB}}^{\text{RA}}$ allocated to the PRACH opportunity considered for
preamble formats 0, 1, 2 and 3 is defined as $n_{\text{PRB}}^{\text{RA}} =
n_{\text{PRB\ offset}}^{\text{RA}}$, where the parameter _prach-
FrequencyOffset,_ $n_{\text{PRBoffset}}^{\text{RA}}$ is expressed as a
physical resource block number configured by higher layers and fulfilling $0
\leq n_{\text{PRBoffset}}^{\text{RA}} \leq N_{\text{RB}}^{\text{UL}} - 6$.
Table 5.7.1-2: Frame structure type 1 random access configuration for preamble
formats 0-3
+-------+-------+-------+-------+-------+-------+-------+-------+ | PRACH | Prea | S | Sub | PRACH | Prea | S | Sub | | Con | mble\ | ystem | frame | Con | mble\ | ystem | frame | | figur | F | frame | n | figur | F | frame | n | | ation | ormat | n | umber | ation | ormat | n | umber | | | | umber | | | | umber | | | Index | | | | Index | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | 0 | Even | 1 | 32 | 2 | Even | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | 0 | Even | 4 | 33 | 2 | Even | 4 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | 0 | Even | 7 | 34 | 2 | Even | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | 0 | Any | 1 | 35 | 2 | Any | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | 0 | Any | 4 | 36 | 2 | Any | 4 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | 0 | Any | 7 | 37 | 2 | Any | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | 0 | Any | 1, 6 | 38 | 2 | Any | 1, 6 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 7 | 0 | Any | 2 ,7 | 39 | 2 | Any | 2 ,7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 0 | Any | 3, 8 | 40 | 2 | Any | 3, 8 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 9 | 0 | Any | 1, 4, | 41 | 2 | Any | 1, 4, | | | | | 7 | | | | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 10 | 0 | Any | 2, 5, | 42 | 2 | Any | 2, 5, | | | | | 8 | | | | 8 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 11 | 0 | Any | 3, 6, | 43 | 2 | Any | 3, 6, | | | | | 9 | | | | 9 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 12 | 0 | Any | 0, 2, | 44 | 2 | Any | 0, 2, | | | | | 4, 6, | | | | 4, 6, | | | | | 8 | | | | 8 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 13 | 0 | Any | 1, 3, | 45 | 2 | Any | 1, 3, | | | | | 5, 7, | | | | 5, 7, | | | | | 9 | | | | 9 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 14 | 0 | Any | 0, 1, | 46 | N/A | N/A | N/A | | | | | 2, 3, | | | | | | | | | 4, 5, | | | | | | | | | 6, 7, | | | | | | | | | 8, 9 | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 15 | 0 | Even | 9 | 47 | 2 | Even | 9 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 16 | 1 | Even | 1 | 48 | 3 | Even | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 17 | 1 | Even | 4 | 49 | 3 | Even | 4 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 18 | 1 | Even | 7 | 50 | 3 | Even | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 19 | 1 | Any | 1 | 51 | 3 | Any | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | 1 | Any | 4 | 52 | 3 | Any | 4 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 21 | 1 | Any | 7 | 53 | 3 | Any | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 22 | 1 | Any | 1, 6 | 54 | 3 | Any | 1, 6 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 23 | 1 | Any | 2 ,7 | 55 | 3 | Any | 2 ,7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 24 | 1 | Any | 3, 8 | 56 | 3 | Any | 3, 8 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 25 | 1 | Any | 1, 4, | 57 | 3 | Any | 1, 4, | | | | | 7 | | | | 7 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 26 | 1 | Any | 2, 5, | 58 | 3 | Any | 2, 5, | | | | | 8 | | | | 8 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 27 | 1 | Any | 3, 6, | 59 | 3 | Any | 3, 6, | | | | | 9 | | | | 9 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 28 | 1 | Any | 0, 2, | 60 | N/A | N/A | N/A | | | | | 4, 6, | | | | | | | | | 8 | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29 | 1 | Any | 1, 3, | 61 | N/A | N/A | N/A | | | | | 5, 7, | | | | | | | | | 9 | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 30 | N/A | N/A | N/A | 62 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 31 | 1 | Even | 9 | 63 | 3 | Even | 9 | +-------+-------+-------+-------+-------+-------+-------+-------+
For frame structure type 2 with preamble formats 0-4, there might be multiple
random access resources in an UL subframe (or UpPTS for preamble format 4)
depending on the UL/DL configuration [see table 4.2-2]. Table 5.7.1-3 lists
PRACH configurations allowed for frame structure type 2 where the
configuration index corresponds to a certain combination of preamble format,
PRACH density value, $D_{\text{RA}}$ and version index, $r_{\text{RA}}$.\ The
parameter _prach-ConfigurationIndex_ is given by higher layers. For frame
structure type 2 with PRACH configuration 0, 1, 2, 20, 21, 22, 30, 31, 32, 40,
41, 42, 48, 49, 50, or with PRACH configuration 51, 53, 54, 55, 56, 57 in
UL/DL configuration 3, 4, 5, [ ]{.underline} the UE may for handover purposes
assume an absolute value of the relative time difference between radio frame
$i$in the current cell and the target cell is less than $\text{153600} \cdot
T_{s}$.
Table 5.7.1-3: Frame structure type 2 random access configurations for
preamble formats 0-4
+-------+-------+-------+-------+-------+-------+-------+-------+ | P | Prea | De | Ver | P | Prea | De | Ver | | RACH\ | mble\ | nsity | sion\ | RACH\ | mble\ | nsity | sion\ | | con | F | | $r_{\ | con | F | | $r_{\ | | figur | ormat | Per | text{ | figur | ormat | Per | text{ | | ation | | 10 ms | RA}}$ | ation | | 10 ms | RA}}$ | | | | | | | | | | | Index | | | | Index | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | 0 | 0.5 | 0 | 32 | 2 | 0.5 | 2 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | 0 | 0.5 | 1 | 33 | 2 | 1 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | 0 | 0.5 | 2 | 34 | 2 | 1 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | 0 | 1 | 0 | 35 | 2 | 2 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | 0 | 1 | 1 | 36 | 2 | 3 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | 0 | 1 | 2 | 37 | 2 | 4 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | 0 | 2 | 0 | 38 | 2 | 5 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 7 | 0 | 2 | 1 | 39 | 2 | 6 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | 0 | 2 | 2 | 40 | 3 | 0.5 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 9 | 0 | 3 | 0 | 41 | 3 | 0.5 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 10 | 0 | 3 | 1 | 42 | 3 | 0.5 | 2 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 11 | 0 | 3 | 2 | 43 | 3 | 1 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 12 | 0 | 4 | 0 | 44 | 3 | 1 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 13 | 0 | 4 | 1 | 45 | 3 | 2 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 14 | 0 | 4 | 2 | 46 | 3 | 3 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 15 | 0 | 5 | 0 | 47 | 3 | 4 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 16 | 0 | 5 | 1 | 48 | 4 | 0.5 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 17 | 0 | 5 | 2 | 49 | 4 | 0.5 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 18 | 0 | 6 | 0 | 50 | 4 | 0.5 | 2 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 19 | 0 | 6 | 1 | 51 | 4 | 1 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 | 1 | 0.5 | 0 | 52 | 4 | 1 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 21 | 1 | 0.5 | 1 | 53 | 4 | 2 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 22 | 1 | 0.5 | 2 | 54 | 4 | 3 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 23 | 1 | 1 | 0 | 55 | 4 | 4 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 24 | 1 | 1 | 1 | 56 | 4 | 5 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 25 | 1 | 2 | 0 | 57 | 4 | 6 | 0 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 26 | 1 | 3 | 0 | 58 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 27 | 1 | 4 | 0 | 59 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 28 | 1 | 5 | 0 | 60 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29 | 1 | 6 | 0 | 61 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 30 | 2 | 0.5 | 0 | 62 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 31 | 2 | 0.5 | 1 | 63 | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+
Table 5.7.1-4 lists the mapping to physical resources for the different random
access opportunities needed for a certain PRACH density value,
$D_{\text{RA}}$. Each quadruple of the format
$(f_{\text{RA}},t_{\text{RA}}^{(0)},t_{\text{RA}}^{(1)},t_{\text{RA}}^{(2)})$
indicates the location of a specific random access resource, where
$f_{\text{RA}}$ is a frequency resource index within the considered time
instance, $t_{\text{RA}}^{(0)} = 0,1,2$ indicates whether the resource is
reoccurring in all radio frames, in even radio frames, or in odd radio frames,
respectively, $t_{\text{RA}}^{(1)} = 0,1$ indicates whether the random access
resource is located in first half frame or in second half frame, respectively,
and where $t_{\text{RA}}^{(2)}$ is the uplink subframe number where the
preamble starts, counting from 0 at the first uplink subframe between 2
consecutive downlink-to-uplink switch points, with the exception of preamble
format 4 where $t_{\text{RA}}^{(2)}$ is denoted as (*). The start of the
random access preamble formats 0-3 shall be aligned with the start of the
corresponding uplink subframe at the UE assuming $N_{\text{TA}} = 0$ and the
random access preamble format 4 shall start $\text{4832} \cdot T_{s}$ before
the end of the UpPTS at the UE, where the UpPTS is referenced to the UE's
uplink frame timing assuming$N_{\text{TA}} = 0$.
The random access opportunities for each PRACH configuration shall be
allocated in time first and then in frequency if and only if time multiplexing
is not sufficient to hold all opportunities of a PRACH configuration needed
for a certain density value $D_{\text{RA}}$ without overlap in time. For
preamble format 0-3, the frequency multiplexing shall be done according to
where $N_{\text{RB}}^{\text{UL}}$ is the number of uplink resource blocks,
$n_{\text{PRB}}^{\text{RA}}$is the first physical resource block allocated to
the PRACH opportunity considered and where the parameter _prach-
FrequencyOffset,_ $n_{\text{PRB\ offset}}^{\text{RA}}$ is the first physical
resource block available for PRACH expressed as a physical resource block
number configured by higher layers and fulfilling $0 \leq
n_{\text{PRBoffset}}^{\text{RA}} \leq N_{\text{RB}}^{\text{UL}} - 6$.
For preamble format 4, the frequency multiplexing shall be done according to
where$n_{f}$is the system frame number and where$N_{\text{SP}}$is the number
of DL to UL switch points within the radio frame.
Each random access preamble occupies a bandwidth corresponding to 6
consecutive resource blocks for both frame structures.
Table 5.7.1-4: Frame structure type 2 random access preamble mapping in time
and frequency
+-------+-------+-------+-------+-------+-------+-------+-------+ | PRACH | UL/DL | | | | | | | | | con | | | | | | | | con | figur | | | | | | | | figur | ation | | | | | | | | ation | (See | | | | | | | | Index | Table | | | | | | | | | 4 | | | | | | | | (See | .2-2) | | | | | | | | Table | | | | | | | | | 5.7 | | | | | | | | | .1-3) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | 0 | 1 | 2 | 3 | 4 | 5 | 6 | +-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | (0,1 | (0,1 | (0,1 | (0,1 | (0,1 | (0,1 | (0,1 | | | ,0,2) | ,0,1) | ,0,0) | ,0,2) | ,0,1) | ,0,0) | ,0,2) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | (0,2 | (0,2 | (0,2 | (0,2 | (0,2 | (0,2 | (0,2 | | | ,0,2) | ,0,1) | ,0,0) | ,0,2) | ,0,1) | ,0,0) | ,0,2) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | (0,1 | (0,1 | (0,1 | (0,1 | (0,1 | N/A | (0,1 | | | ,1,2) | ,1,1) | ,1,0) | ,0,1) | ,0,0) | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,2) | ,0,1) | ,0,0) | ,0,2) | ,0,1) | ,0,0) | ,0,2) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | N/A | (0,0 | | | ,1,2) | ,1,1) | ,1,0) | ,0,1) | ,0,0) | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | (0,0 | (0,0 | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,1) | ,0,0) | | ,0,0) | | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,2) | ,0,1) | ,0,0) | ,0,1) | ,0,0) | ,0,0) | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (1,0 | (0,0 | | | ,1,2) | ,1,1) | ,1,0) | ,0,2) | ,0,1) | ,0,0) | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 7 | (0,0 | (0,0 | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,1) | ,0,0) | | ,0,0) | | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (0,0 | | | (0,0 | | | ,1,1) | ,1,0) | | ,0,2) | | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (0,0 | | | (0,0 | | | ,1,0) | | | ,0,1) | | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 9 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,1) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (1,0 | (0,0 | | | ,0,2) | ,0,1) | ,1,0) | ,0,1) | ,0,1) | ,0,0) | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (0,0 | (1,0 | (2,0 | (0,0 | | | ,1,2) | ,1,1) | ,0,0) | ,0,2) | ,0,1) | ,0,0) | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 10 | (0,0 | (0,0 | (0,0 | N/A | (0,0 | N/A | (0,0 | | | ,0,0) | ,0,1) | ,0,0) | | ,0,0) | | ,0,0) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | | (0,0 | | (0,0 | | | ,1,0) | ,1,0) | ,1,0) | | ,0,1) | | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | | (1,0 | | (0,0 | | | ,1,1) | ,1,1) | ,1,0) | | ,0,0) | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 11 | N/A | (0,0 | N/A | N/A | N/A | N/A | (0,0 | | | | ,0,0) | | | | | ,0,1) | | | | | | | | | | | | | (0,0 | | | | | (0,0 | | | | ,0,1) | | | | | ,1,0) | | | | | | | | | | | | | (0,0 | | | | | (0,0 | | | | ,1,0) | | | | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 12 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,1) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (1,0 | (0,0 | | | ,0,2) | ,0,1) | ,1,0) | ,0,1) | ,0,1) | ,0,0) | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (0,0 | (1,0 | (2,0 | (0,0 | | | ,1,1) | ,1,0) | ,0,0) | ,0,2) | ,0,0) | ,0,0) | ,1,0) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (1,0 | (1,0 | (3,0 | (0,0 | | | ,1,2) | ,1,1) | ,1,0) | ,0,2) | ,0,1) | ,0,0) | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 13 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (0,0 | | | (0,0 | | | ,0,2) | | | ,0,1) | | | ,0,1) | | | | | | | | | | | | (0,0 | | | (0,0 | | | (0,0 | | | ,1,0) | | | ,0,2) | | | ,0,2) | | | | | | | | | | | | (0,0 | | | (1,0 | | | (0,0 | | | ,1,2) | | | ,0,1) | | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 14 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (0,0 | | | (0,0 | | | ,0,1) | | | ,0,1) | | | ,0,2) | | | | | | | | | | | | (0,0 | | | (0,0 | | | (0,0 | | | ,1,0) | | | ,0,2) | | | ,1,0) | | | | | | | | | | | | (0,0 | | | (1,0 | | | (0,0 | | | ,1,1) | | | ,0,0) | | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 15 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (1,0 | (0,0 | | | ,0,1) | ,0,1) | ,1,0) | ,0,1) | ,0,1) | ,0,0) | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (0,0 | (1,0 | (2,0 | (0,0 | | | ,0,2) | ,1,0) | ,0,0) | ,0,2) | ,0,0) | ,0,0) | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (1,0 | (1,0 | (3,0 | (0,0 | | | ,1,1) | ,1,1) | ,1,0) | ,0,1) | ,0,1) | ,0,0) | ,1,0) | | | | | | | | | | | | (0,0 | (1,0 | (2,0 | (1,0 | (2,0 | (4,0 | (0,0 | | | ,1,2) | ,0,1) | ,0,0) | ,0,2) | ,0,1) | ,0,0) | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 16 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | N/A | N/A | | | ,0,1) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | | | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | | | ,0,2) | ,0,1) | ,1,0) | ,0,1) | ,0,1) | | | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (0,0 | (1,0 | | | | | ,1,0) | ,1,0) | ,0,0) | ,0,2) | ,0,0) | | | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (1,0 | (1,0 | | | | | ,1,1) | ,1,1) | ,1,0) | ,0,0) | ,0,1) | | | | | | | | | | | | | | (0,0 | (1,0 | (2,0 | (1,0 | (2,0 | | | | | ,1,2) | ,1,1) | ,1,0) | ,0,2) | ,0,0) | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 17 | (0,0 | (0,0 | N/A | (0,0 | N/A | N/A | N/A | | | ,0,0) | ,0,0) | | ,0,0) | | | | | | | | | | | | | | | (0,0 | (0,0 | | (0,0 | | | | | | ,0,1) | ,0,1) | | ,0,1) | | | | | | | | | | | | | | | (0,0 | (0,0 | | (0,0 | | | | | | ,0,2) | ,1,0) | | ,0,2) | | | | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | | | | | | ,1,0) | ,1,1) | | ,0,0) | | | | | | | | | | | | | | | (0,0 | (1,0 | | (1,0 | | | | | | ,1,2) | ,0,0) | | ,0,1) | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 18 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | | | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | ,0,0) | | | | | | | | | | | | (0,0 | (0,0 | (0,0 | (0,0 | (0,0 | (1,0 | (0,0 | | | ,0,1) | ,0,1) | ,1,0) | ,0,1) | ,0,1) | ,0,0) | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (0,0 | (1,0 | (2,0 | (0,0 | | | ,0,2) | ,1,0) | ,0,0) | ,0,2) | ,0,0) | ,0,0) | ,0,2) | | | | | | | | | | | | (0,0 | (0,0 | (1,0 | (1,0 | (1,0 | (3,0 | (0,0 | | | ,1,0) | ,1,1) | ,1,0) | ,0,0) | ,0,1) | ,0,0) | ,1,0) | | | | | | | | | | | | (0,0 | (1,0 | (2,0 | (1,0 | (2,0 | (4,0 | (0,0 | | | ,1,1) | ,0,1) | ,0,0) | ,0,1) | ,0,0) | ,0,0) | ,1,1) | | | | | | | | | | | | (0,0 | (1,0 | (2,0 | (1,0 | (2,0 | (5,0 | (1,0 | | | ,1,2) | ,1,1) | ,1,0) | ,0,2) | ,0,1) | ,0,0) | ,0,2) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 19 | N/A | (0,0 | N/A | N/A | N/A | N/A | (0,0 | | | | ,0,0) | | | | | ,0,0) | | | | | | | | | | | | | (0,0 | | | | | (0,0 | | | | ,0,1) | | | | | ,0,1) | | | | | | | | | | | | | (0,0 | | | | | (0,0 | | | | ,1,0) | | | | | ,0,2) | | | | | | | | | | | | | (0,0 | | | | | (0,0 | | | | ,1,1) | | | | | ,1,0) | | | | | | | | | | | | | (1,0 | | | | | (0,0 | | | | ,0,0) | | | | | ,1,1) | | | | | | | | | | | | | (1,0 | | | | | (1,0 | | | | ,1,0) | | | | | ,1,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 20 / | (0,1 | (0,1 | N/A | (0,1 | (0,1 | N/A | (0,1 | | 30 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 21 / | (0,2 | (0,2 | N/A | (0,2 | (0,2 | N/A | (0,2 | | 31 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 22 / | (0,1 | (0,1 | N/A | N/A | N/A | N/A | (0,1 | | 32 | ,1,1) | ,1,0) | | | | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 23 / | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | 33 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 24 / | (0,0 | (0,0 | N/A | N/A | N/A | N/A | (0,0 | | 34 | ,1,1) | ,1,0) | | | | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 25 / | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | 35 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | (1,0 | | (0,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 26 / | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | 36 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | (1,0 | | (0,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (1,0 | (1,0 | | (2,0 | (2,0 | | (1,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 27 / | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | 37 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | (1,0 | | (0,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (1,0 | (1,0 | | (2,0 | (2,0 | | (1,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (1,0 | (1,0 | | (3,0 | (3,0 | | (1,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 28 / | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | 38 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | (1,0 | | (0,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (1,0 | (1,0 | | (2,0 | (2,0 | | (1,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (1,0 | (1,0 | | (3,0 | (3,0 | | (1,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (2,0 | (2,0 | | (4,0 | (4,0 | | (2,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29 | (0,0 | (0,0 | N/A | (0,0 | (0,0 | N/A | (0,0 | | /39 | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (0,0 | (0,0 | | (1,0 | (1,0 | | (0,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (1,0 | (1,0 | | (2,0 | (2,0 | | (1,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (1,0 | (1,0 | | (3,0 | (3,0 | | (1,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | | | | | | | | | | | | (2,0 | (2,0 | | (4,0 | (4,0 | | (2,0 | | | ,0,1) | ,0,0) | | ,0,1) | ,0,0) | | ,0,1) | | | | | | | | | | | | (2,0 | (2,0 | | (5,0 | (5,0 | | (2,0 | | | ,1,1) | ,1,0) | | ,0,1) | ,0,0) | | ,1,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 40 | (0,1 | N/A | N/A | (0,1 | N/A | N/A | (0,1 | | | ,0,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 41 | (0,2 | N/A | N/A | (0,2 | N/A | N/A | (0,2 | | | ,0,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 42 | (0,1 | N/A | N/A | N/A | N/A | N/A | N/A | | | ,1,0) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 43 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 44 | (0,0 | N/A | N/A | N/A | N/A | N/A | N/A | | | ,1,0) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 45 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (1,0 | | | (1,0 | | | ,1,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 46 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (1,0 | | | (1,0 | | | ,1,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (1,0 | | | (2,0 | | | (2,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 47 | (0,0 | N/A | N/A | (0,0 | N/A | N/A | (0,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (0,0 | | | (1,0 | | | (1,0 | | | ,1,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (1,0 | | | (2,0 | | | (2,0 | | | ,0,0) | | | ,0,0) | | | ,0,0) | | | | | | | | | | | | (1,0 | | | (3,0 | | | (3,0 | | | ,1,0) | | | ,0,0) | | | ,0,0) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 48 | (0,1, | (0,1, | (0,1, | (0,1, | (0,1, | (0,1, | (0,1, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 49 | (0,2, | (0,2, | (0,2, | (0,2, | (0,2, | (0,2, | (0,2, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 50 | (0,1, | (0,1, | (0,1, | N/A | N/A | N/A | (0,1, | | | 1,*) | 1,*) | 1,*) | | | | 1,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 51 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 52 | (0,0, | (0,0, | (0,0, | N/A | N/A | N/A | (0,0, | | | 1,*) | 1,*) | 1,*) | | | | 1,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 53 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (0,0, | (0,0, | (0,0, | (1,0, | (1,0, | (1,0, | (0,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 54 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (0,0, | (0,0, | (0,0, | (1,0, | (1,0, | (1,0, | (0,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (2,0, | (2,0, | (2,0, | (1,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 55 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (0,0, | (0,0, | (0,0, | (1,0, | (1,0, | (1,0, | (0,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (2,0, | (2,0, | (2,0, | (1,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (3,0, | (3,0, | (3,0, | (1,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 56 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (0,0, | (0,0, | (0,0, | (1,0, | (1,0, | (1,0, | (0,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (2,0, | (2,0, | (2,0, | (1,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (3,0, | (3,0, | (3,0, | (1,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (2,0, | (2,0, | (2,0, | (4,0, | (4,0, | (4,0, | (2,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 57 | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | (0,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (0,0, | (0,0, | (0,0, | (1,0, | (1,0, | (1,0, | (0,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (2,0, | (2,0, | (2,0, | (1,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (1,0, | (1,0, | (1,0, | (3,0, | (3,0, | (3,0, | (1,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | | | | | | | | | | | | (2,0, | (2,0, | (2,0, | (4,0, | (4,0, | (4,0, | (2,0, | | | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | 0,*) | | | | | | | | | | | | (2,0, | (2,0, | (2,0, | (5,0, | (5,0, | (5,0, | (2,0, | | | 1,*) | 1,*) | 1,*) | 0,*) | 0,*) | 0,*) | 1,*) | +-------+-------+-------+-------+-------+-------+-------+-------+ | 58 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 59 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 60 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 61 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 62 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | 63 | N/A | N/A | N/A | N/A | N/A | N/A | N/A | +-------+-------+-------+-------+-------+-------+-------+-------+ | NOTE: | | | | | | | | | * | | | | | | | | | UpPTS | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
### 5.7.2 Preamble sequence generation
The random access preambles are generated from Zadoff-Chu sequences with zero
correlation zone, generated from one or several root Zadoff-Chu sequences. The
network configures the set of preamble sequences the UE is allowed to use.
There are 64 preambles available in each cell. The set of 64 preamble
sequences in a cell is found by including first, in the order of increasing
cyclic shift, all the available cyclic shifts of a root Zadoff-Chu sequence
with the logical index RACH_ROOT_SEQUENCE, where RACH_ROOT_SEQUENCE is
broadcasted as part of the System Information. Additional preamble sequences,
in case 64 preambles cannot be generated from a single root Zadoff-Chu
sequence, are obtained from the root sequences with the consecutive logical
indexes until all the 64 sequences are found.\ The logical root sequence order
is cyclic: the logical index 0 is consecutive to 837. The relation between a
logical root sequence index and physical root sequence index $u$ is given by
Tables 5.7.2-4 and 5.7.2-5 for preamble formats 0 -- 3 and 4, respectively.
The $u^{\text{th}}$ root Zadoff-Chu sequence is defined by
where the length $N_{\text{ZC}}$ of the Zadoff-Chu sequence is given by Table
5.7.2-1. From the $u^{\text{th}}$ root Zadoff-Chu sequence, random access
preambles with zero correlation zones of length $N_{\text{CS}} - 1$are defined
by cyclic shifts according to
where the cyclic shift is given by
and $N_{\text{CS}}$ is given by Tables 5.7.2-2 and 5.7.2-3 for preamble
formats 0-3 and 4, respectively, where the parameter
_zeroCorrelationZoneConfig_ is provided by higher layers. The parameter _High-
speed-flag_ provided by higher layers determines if unrestricted set or
restricted set shall be used.
The variable $d_{u}$ is the cyclic shift corresponding to a Doppler shift of
magnitude $1/T_{\text{SEQ}}$ and is given by
where $p$ is the smallest non-negative integer that fulfils $\left( \text{pu}
\right)\text{mod}N_{\text{ZC}} = 1$. The parameters for restricted sets of
cyclic shifts depend on $d_{u}$. For$N_{\text{CS}} \leq d_{u} 
\text{10}$ Number of OFDM symbols for PDCCH when $N_{\text{RB}}^{\text{DL}}
\leq \text{10}$ Subframe 1 and 6 for frame structure type 2 1, 2 2 MBSFN
subframes on a carrier supporting PDSCH, configured with 1 or 2 cell-specific
antenna ports 1, 2 2 MBSFN subframes on a carrier supporting PDSCH, configured
with 4 cell-specific antenna ports 2 2 Subframes on a carrier not supporting
PDSCH 0 0 Non-MBSFN subframes (except subframe 6 for frame structure type 2)
configured with positioning reference signals 1, 2, 3 2, 3 All other cases 1,
2, 3 2, 3, 4
* * *
The PCFICH shall be transmitted when the number of OFDM symbols for PDCCH is
greater than zero.
### 6.7.1 Scrambling
The block of bits $b(0),\text{.}\text{.}\text{.},b(\text{31})$ transmitted in
one subframe shall be scrambled with a cell-specific sequence prior to
modulation, resulting in a block of scrambled
bits$\overset{\sim}{b}(0),\text{.}\text{.}\text{.},\overset{\sim}{b}(\text{31})$according
to
where the scrambling sequence $c(i)$ is given by clause 7.2. The scrambling
sequence generator shall be initialised with $c_{\text{init}} = \left(
\left\lfloor n_{s}/2 \right\rfloor + 1 \right) \cdot \left(
2N_{\text{ID}}^{\text{cell}} + 1 \right) \cdot 2^{9} +
N_{\text{ID}}^{\text{cell}}$ at the start of each subframe.
### 6.7.2 Modulation
The block of scrambled
bits$\overset{\sim}{b}(0),\text{.}\text{.}\text{.},\overset{\sim}{b}(\text{31})$
shall be modulated as described in clause 7.1, resulting in a block of
complex-valued modulation symbols$d(0),\text{.}\text{.}\text{.},d(\text{15})$.
Table 6.7.2-1 specifies the modulation mappings applicable for the physical
control format indicator channel.
Table 6.7.2-1: PCFICH modulation schemes
* * *
Physical channel Modulation schemes PCFICH QPSK
* * *
### 6.7.3 Layer mapping and precoding
The block of modulation symbols $d(0),\text{.}\text{.}\text{.},d(\text{15})$
shall be mapped to layers according to one of clauses 6.3.3.1 or 6.3.3.3
with$M_{\text{symb}}^{(0)} = \text{16}$ and precoded according to one of
clauses 6.3.4.1 or 6.3.4.3, resulting in a block of vectors $y(i) =
\begin{bmatrix} y^{(0)}(i) & \text{.}\text{.}\text{.} & y^{(P - 1)}(i) \
\end{bmatrix}^{T}$, $i = 0,\text{.}\text{.}\text{.},\text{15}$, where
$y^{(p)}(i)$ represents the signal for antenna port $p$ and where $p =
0,\text{.}\text{.}\text{.},P - 1$and the number of antenna ports for cell-
specific reference signals $P \in \left{ 1,2,4 \right}$. The PCFICH shall be
transmitted on the same set of antenna ports as the PBCH.
### 6.7.4 Mapping to resource elements
The mapping to resource elements is defined in terms of quadruplets of
complex-valued symbols. Let $z^{(p)}(i) = \left\langle y^{(p)}(4i),y^{(p)}(4i
+ 1),y^{(p)}(4i + 2),y^{(p)}(4i + 3) \right\rangle$ denote symbol quadruplet
$i$ for antenna port$p$. For each of the antenna ports, symbol quadruplets
shall be mapped in increasing order of $i$ to the four resource-element groups
in the first OFDM symbol in a downlink subframe with the representative
resource-element as defined in clause 6.2.4 given by
where the additions are modulo
$N_{\text{RB}}^{\text{DL}}N_{\text{sc}}^{\text{RB}}$ ,
and $N_{\text{ID}}^{\text{cell}}$ is the physical-layer cell identity as given
by clause 6.11.
## 6.8 Physical downlink control channel
### 6.8.1 PDCCH formats
The physical downlink control channel carries scheduling assignments and other
control information. A physical control channel is transmitted on an
aggregation of one or several consecutive control channel elements (CCEs),
where a control channel element corresponds to 9 resource element groups. The
number of resource-element groups not assigned to PCFICH or PHICH is
$N_{\text{REG}}$. The CCEs available in the system are numbered from 0
to$N_{\text{CCE}} - 1$, where $N_{\text{CCE}} = \left\lfloor
\frac{N_{\text{REG}}}{9} \right\rfloor$. The PDCCH supports multiple formats
as listed in Table 6.8.1-1. A PDCCH consisting of $n$ consecutive CCEs may
only start on a CCE fulfilling$i\text{mod}n = 0$, where $i$ is the CCE number.
Multiple PDCCHs can be transmitted in a subframe.
Table 6.8.1-1: Supported PDCCH formats
* * *
PDCCH format Number of CCEs Number of resource-element groups Number of PDCCH
bits 0 1 9 72 1 2 18 144 2 4 36 288 3 8 72 576
* * *
### 6.8.2 PDCCH multiplexing and scrambling
The block of bits
$b^{(i)}(0),\text{.}\text{.}\text{.},b^{(i)}(M_{\text{bit}}^{(i)} - 1)$ on
each of the control channels to be transmitted in a subframe, where
$M_{\text{bit}}^{(i)}$ is the number of bits in one subframe to be transmitted
on physical downlink control channel number $i$, shall be multiplexed,
resulting in a block of bits
$b^{(0)}(0),\text{.}\text{.}\text{.},b^{(0)}(M_{\text{bit}}^{(0)} -
1),b^{(1)}(0),\text{.}\text{.}\text{.},b^{(1)}(M_{\text{bit}}^{(1)} -
1),\text{.}\text{.}\text{.},b^{(n_{\text{PDCCH}} -
1)}(0),\text{.}\text{.}\text{.},b^{(n_{\text{PDCCH}} -
1)}(M_{\text{bit}}^{(n_{\text{PDCCH}}\text{-1})} - 1)$, where
$n_{\text{PDCCH}}$ is the number of PDCCHs transmitted in the subframe.
The block of bits
$b^{(0)}(0),\text{.}\text{.}\text{.},b^{(0)}(M_{\text{bit}}^{(0)} -
1),b^{(1)}(0),\text{.}\text{.}\text{.},b^{(1)}(M_{\text{bit}}^{(1)} -
1),\text{.}\text{.}\text{.},b^{(n_{\text{PDCCH}} -
1)}(0),\text{.}\text{.}\text{.},b^{(n_{\text{PDCCH}} -
1)}(M_{\text{bit}}^{(n_{\text{PDCCH}}\text{-1})} - 1)$ shall be scrambled with
a cell-specific sequence prior to modulation, resulting in a block of
scrambled bits
$\overset{\sim}{b}(0),\text{.}\text{.}\text{.},\overset{\sim}{b}(M_{\text{tot}}
- 1)$according to
where the scrambling sequence $c(i)$ is given by clause 7.2. The scrambling
sequence generator shall be initialised with $c_{\text{init}} = \left\lfloor
n_{s}/2 \right\rfloor 2^{9} + N_{\text{ID}}^{\text{cell}}$ at the start of
each subframe.
CCE number $n$ corresponds to bits $b(\text{72}n),b(\text{72}n +
1),\text{.}\text{.}\text{.},b(\text{72}n + \text{71})$. If necessary, \
elements shall be inserted in the block of bits prior to scrambling to ensure
that the PDCCHs starts at the CCE positions as described in 3GPP TS 36.213 [4]
and to ensure that the length $M_{\text{tot}} = 8N_{\text{REG}} \geq
\sum_{}^{}M_{\text{bit}}^{(i)}$ of the scrambled block of bits matches the
amount of resource-element groups not assigned to PCFICH or PHICH.
### 6.8.3 Modulation
The block of scrambled
bits$\overset{\sim}{b}(0),\text{.}\text{.}\text{.},\overset{\sim}{b}(M_{\text{tot}}
- 1)$ shall be modulated as described in clause 7.1, resulting in a block of
complex-valued modulation
symbols$d(0),\text{.}\text{.}\text{.},d(M_{\text{symb}} - 1)$. Table 6.8.3-1
specifies the modulation mappings applicable for the physical downlink control
channel.
Table 6.8.3-1: PDCCH modulation schemes
* * *
Physical channel Modulation schemes PDCCH QPSK
* * *
### 6.8.4 Layer mapping and precoding
The block of modulation symbols
$d(0),\text{.}\text{.}\text{.},d(M_{\text{symb}} - 1)$ shall be mapped to
layers according to one of clauses 6.3.3.1 or 6.3.3.3 with
$M_{\text{symb}}^{(0)} = M_{\text{symb}}$ and precoded according to one of
clauses 6.3.4.1 or 6.3.4.3, resulting in a block of vectors $y(i) =
\begin{bmatrix} y^{(0)}(i) & \text{.}\text{.}\text{.} & y^{(P - 1)}(i) \
\end{bmatrix}^{T}$, $i = 0,\text{.}\text{.}\text{.},M_{\text{symb}} - 1$ to be
mapped onto resources on the antenna ports used for transmission, where
$y^{(p)}(i)$ represents the signal for antenna port $p$. The PDCCH shall be
transmitted on the same set of antenna ports as the PBCH.
### 6.8.5 Mapping to resource elements
The mapping to resource elements is defined by operations on quadruplets of
complex-valued symbols. Let $z^{(p)}(i) = \left\langle y^{(p)}(4i),y^{(p)}(4i
+ 1),y^{(p)}(4i + 2),y^{(p)}(4i + 3) \right\rangle$ denote symbol quadruplet
$i$ for antenna port$p$.
The block of
quadruplets$z^{(p)}(0),\text{.}\text{.}\text{.},z^{(p)}(M_{\text{quad}} - 1)$
, where $M_{\text{quad}} = M_{\text{symb}}/4$, shall be permuted resulting in
$w^{(p)}(0),\text{.}\text{.}\text{.},w^{(p)}(M_{\text{quad}} - 1)$. The
permutation shall be according to the sub-block interleaver in clause
5.1.4.2.1 of 3GPP TS 36.212 [3] with the following exceptions:
\- the input and output to the interleaver is defined by symbol quadruplets
instead of bits
\- interleaving is performed on symbol quadruplets instead of bits by
substituting the terms \"bit\", \"bits\" and \"bit sequence\" in clause
5.1.4.2.1 of 3GPP TS 36.212 [3] by \"symbol quadruplet\", \"symbol
quadruplets\" and \"symbol-quadruplet sequence\", respectively
\ elements at the output of the interleaver in 3GPP TS 36.212 [3] shall
be removed when forming
$w^{(p)}(0),\text{.}\text{.}\text{.},w^{(p)}(M_{\text{quad}} - 1)$. Note that
the removal of \ elements does not affect any \ elements inserted
in clause 6.8.2.
The block of quadruplets
$w^{(p)}(0),\text{.}\text{.}\text{.},w^{(p)}(M_{\text{quad}} - 1)$ shall be
cyclically shifted, resulting in
${\overline{w}}^{(p)}(0),\text{.}\text{.}\text{.},{\overline{w}}^{(p)}(M_{\text{quad}}
- 1)$ where${\overline{w}}^{(p)}\left( i \right) = w^{(p)}\left( (i +
N_{\text{ID}}^{\text{cell}})\text{mod}M_{\text{quad}} \right)$.
Mapping of the block of quadruplets
${\overline{w}}^{(p)}(0),\text{.}\text{.}\text{.},{\overline{w}}^{(p)}(M_{\text{quad}}
- 1)$ is defined in terms of resource-element groups, specified in clause
6.2.4, according to steps 1--10 below:
1) Initialize $m^{'} = 0$ (resource-element group number)
2) Initialize $k' = 0$
3) Initialize $l' = 0$
4) If the resource element $(k^{'},l^{'})$ represents a resource-element group
and the resource-element group is not assigned to PCFICH or PHICH then perform
step 5 and 6, else go to step 7
5) Map symbol-quadruplet ${\overline{w}}^{(p)}(m')$ to the resource-element
group represented by $(k^{'},l^{'})$ for each antenna port $p$
6) Increase $m^{'}$ by 1
7) Increase $l'$ by 1
8) Repeat from step 4 if $l'  in case of extended PHICH duration in MBSFN subframes, or extended PHICH
> duration in subframes 1 and 6 for frame structure type 2 and by
>
> otherwise.
9) Increase $m^{'}$ by 1.
10) Repeat from step 5 until all PHICH mapping units have been assigned.
The PHICH duration is configurable by higher layers according to Table
6.9.3-1.
Table 6.9.3-1: PHICH duration in MBSFN and non-MBSFN subframes
+----------------+--------------------+--------------------+---+ | PHICH duration | Non-MBSFN | MBSFN subframes | | | | subframes | | | | | | on a carrier | | | | | supporting PDSCH | | +----------------+--------------------+--------------------+---+ | | Subframes 1 and 6 | All other cases | | | | | | | | | in case of frame | | | | | structure type 2 | | | +----------------+--------------------+--------------------+---+ | Normal | 1 | 1 | 1 | +----------------+--------------------+--------------------+---+ | Extended | 2 | 3 | 2 | +----------------+--------------------+--------------------+---+
## 6.10 Reference signals
Six types of downlink reference signals are defined:
\- Cell-specific Reference Signal (CRS)
\- MBSFN reference signal
\- UE-specific Reference Signal (DM-RS) associated with PDSCH
\- DeModulation Reference Signal (DM-RS) associated with EPDCCH
\- Positioning Reference Signal (PRS)
\- CSI Reference Signal (CSI-RS)
There is one reference signal transmitted per downlink antenna port.
### 6.10.1 Cell-specific Reference Signal (CRS)
Cell-specific reference signals shall be transmitted in all downlink subframes
in a cell supporting PDSCH transmission.
Cell-specific reference signals are transmitted on one or several of antenna
ports 0 to 3.
Cell-specific reference signals are defined for $\text{Δf} = \text{15}\text{\
kHz}$ only.
#### 6.10.1.1 Sequence generation
The reference-signal sequence $r_{l,n_{s}}(m)$ is defined by
where $n_{s}$ is the slot number within a radio frame and $l$ is the OFDM
symbol number within the slot. The pseudo-random sequence $c(i)$ is defined in
clause 7.2. The pseudo-random sequence generator shall be initialised with
$c_{\text{init}} = 2^{\text{10}} \cdot \left( 7 \cdot \left( n_{s} + 1 \right)
+ l + 1 \right) \cdot \left( 2 \cdot N_{\text{ID}}^{\text{cell}} + 1 \right) +
2 \cdot N_{\text{ID}}^{\text{cell}} + N_{\text{CP}}$ at the start of each OFDM
symbol where
#### 6.10.1.2 Mapping to resource elements
The reference signal sequence $r_{l,n_{s}}(m)$ shall be mapped to complex-
valued modulation symbols $a_{k,l}^{(p)}$ used as reference symbols for
antenna port $p$ in slot $n_{s}$ according to
where
The variables $v$ and $v_{\text{shift}}$ define the position in the frequency
domain for the different reference signals where $v$ is given by
The cell-specific frequency shift is given by $v_{\text{shift}} =
N_{\text{ID}}^{\text{cell}}\text{mod}6$.
Resource elements $\left( k,l \right)$ used for transmission of cell-specific
reference signals on any of the antenna ports in a slot shall not be used for
any transmission on any other antenna port in the same slot and set to zero.
In an MBSFN subframe, cell-specific reference signals shall only be
transmitted in the non-MBSFN region of the MBSFN subframe.
Figures 6.10.1.2-1 and 6.10.1.2-2 illustrate the resource elements used for
reference signal transmission according to the above definition. The notation
$R_{p}$ is used to denote a resource element used for reference signal
transmission on antenna port$p$.
Figure 6.10.1.2-1. Mapping of downlink reference signals (normal cyclic
prefix)
Figure 6.10.1.2-2. Mapping of downlink reference signals (extended cyclic
prefix)
### 6.10.2 MBSFN reference signals
MBSFN reference signals shall be transmitted in the MBSFN region of MBSFN
subframes only when the PMCH is transmitted. MBSFN reference signals are
transmitted on antenna port 4.
MBSFN reference signals are defined for extended cyclic prefix only.
#### 6.10.2.1 Sequence generation
The MBSFN reference-signal sequence $r_{l,n_{s}}(m)$ is defined by
where $n_{s}$ is the slot number within a radio frame and $l$ is the OFDM
symbol number within the slot. The pseudo-random sequence $c(i)$ is defined in
clause 7.2. The pseudo-random sequence generator shall be initialised with
$c_{\text{init}} = 2^{9} \cdot \left( 7 \cdot \left( n_{s} + 1 \right) + l + 1
\right) \cdot \left( 2 \cdot N_{\text{ID}}^{\text{MBSFN}} + 1 \right) +
N_{\text{ID}}^{\text{MBSFN}}$ at the start of each OFDM symbol.
#### 6.10.2.2 Mapping to resource elements
The reference-signal sequence $r_{l,n_{s}}(m^{'})$ in OFDM symbol $l$ shall be
mapped to complex-valued modulation symbols $a_{k,l}^{(p)}$ with $p = 4$
according to
where
Figure 6.10.2.2-1 illustrates the resource elements used for MBSFN reference
signal transmission in case of $\text{Δf} = \text{15}\text{\ kHz}$. In case of
$\text{Δf} = 7\text{.}5\text{\ kHz}$ for a MBSFN-dedicated cell, the MBSFN
reference signal shall be mapped to resource elements according to Figure
6.10.2.2-3. The notation $R_{p}$ is used to denote a resource element used for
reference signal transmission on antenna port$p$.
Figure 6.10.2.2-1: Mapping of MBSFN reference signals (extended cyclic prefix,
$\text{Δf} = \text{15}\text{\ kHz}$)
Figure 6.10.2.2-3: Mapping of MBSFN reference signals (extended cyclic prefix,
$\text{Δf} = 7\text{.}5\text{\ kHz}$)
### 6.10.3 UE-specific reference signals associated with PDSCH
UE-specific reference signals associated with PDSCH
\- are transmitted on antenna port(s) $p = 5$, $p = 7$, $p = 8$ or $p =
7,8,\text{.}\text{.}\text{.},\upsilon + 6$, where $\upsilon$ is the number of
layers used for transmission of the PDSCH;
\- are present and are a valid reference for PDSCH demodulation only if the
PDSCH transmission is associated with the corresponding antenna port according
to clause 7.1 of 3GPP TS 36.213 [4];
\- are transmitted only on the physical resource blocks upon which the
corresponding PDSCH is mapped.
A UE-specific reference signal associated with PDSCH is not transmitted in
resource elements $\left( k,l \right)$ in which one of the physical channels
or physical signals other than the UE-specific reference signals defined in
6.1 are transmitted using resource elements with the same index pair $\left(
k,l \right)$ regardless of their antenna port $p$.
#### 6.10.3.1 Sequence generation
For antenna port 5, the UE-specific reference-signal sequence $r_{n_{s}}(m)$
is defined by
where $N_{\text{RB}}^{\text{PDSCH}}$ denotes the assigned bandwidth in
resource blocks of the corresponding PDSCH transmission. The pseudo-random
sequence $c(i)$ is defined in clause 7.2. The pseudo-random sequence generator
shall be initialised with $c_{\text{init}} = \left( \left\lfloor n_{s}/2
\right\rfloor + 1 \right) \cdot \left( 2N_{\text{ID}}^{\text{cell}} + 1
\right) \cdot 2^{\text{16}} + n_{\text{RNTI}}$ at the start of each subframe
where $n_{\text{RNTI}}$ is as described in clause 7.1 3GPP TS 36.213 [4].
For any of the antenna ports $p \in \left{
7,8,\text{.}\text{.}\text{.},\upsilon + 6 \right}$, the reference-signal
sequence $r(m)$ is defined by
$r(m) = \frac{1}{\sqrt{2}}\left( 1 - 2 \cdot c(2m) \right) +
j\frac{1}{\sqrt{2}}\left( 1 - 2 \cdot c(2m + 1) \right),\text{\ \ \ \ \ \ \ \
\ \ }m = \left{ \begin{matrix}
0,1,\text{.}\text{.}\text{.},\text{12}N_{\text{RB}}^{\text{max,DL}} - 1 &
\text{normal\ cyclic\ prefix} \
0,1,\text{.}\text{.}\text{.},\text{16}N_{\text{RB}}^{\text{max,DL}} - 1 &
\text{extended\ cyclic\ prefix} \ \end{matrix} \right.\ $.
The pseudo-random sequence $c(i)$ is defined in clause 7.2. The pseudo-random
sequence generator shall be initialised with
at the start of each subframe.
The quantities $n_{\text{ID}}^{(i)}$, $i = 0,1$, are given by
\- $n_{\text{ID}}^{(i)} = N_{\text{ID}}^{\text{cell}}$ if no value for
$n_{\text{ID}}^{\text{DMRS,}i}$ is provided by higher layers or if DCI format
1A, 2B or 2C is used for the DCI associated with the PDSCH transmission
\- $n_{\text{ID}}^{(i)} = n_{\text{ID}}^{\text{DMRS,}i}$ otherwise
The value of $n_{\text{SCID}}$ is zero unless specified otherwise. For a PDSCH
transmission on ports 7 or 8, $n_{\text{SCID}}$ is given by the DCI format 2B,
2C or 2D in 3GPP TS 36.212 [3] associated with the PDSCH transmission.\ In the
case of DCI format 2B, $n_{\text{SCID}}$ is indicated by the scrambling
identity field according to Table 6.10.3.1-1. In the case of DCI format 2C or
2D, $n_{\text{SCID}}$ is given by Table 5.3.3.1.5C-1 in 3GPP TS 36.212 [3].
Table 6.10.3.1-1: Mapping of scrambling identity field in DCI format 2B to
$n_{\text{SCID}}$values for antenna ports 7 and 8
+------------------------------+---+ | Scrambling identity field in | | | | | | DCI format 2B | | | | | | (3GPP TS 36.212 [3]) | | +------------------------------+---+ | 0 | 0 | +------------------------------+---+ | 1 | 1 | +------------------------------+---+
#### 6.10.3.2 Mapping to resource elements
For antenna port 5, in a physical resource block with frequency-domain index
$n_{\text{PR}B}$ assigned for the corresponding PDSCH transmission, the
reference signal sequence $r_{n_{s}}(m)$ shall be mapped to complex-valued
modulation symbols $a_{k,l}^{(p)}$ with $p = 5$ in a subframe according to:
Normal cyclic prefix:
Extended cyclic prefix:
where $m'$ is the counter of UE-specific reference signal resource elements
within a respective OFDM symbol of the PDSCH transmission.
The cell-specific frequency shift is given by $v_{\text{shift}} =
N_{\text{ID}}^{\text{cell}}\text{mod}3$.
The mapping shall be in increasing order of the frequency-domain index
$n_{\text{PR}B}$ of the physical resource blocks assigned for the
corresponding PDSCH transmission. The quantity $N_{\text{RB}}^{\text{PDSCH}}$
denotes the assigned bandwidth in resource blocks of the corresponding PDSCH
transmission.
Figure 6.10.3.2-1 illustrates the resource elements used for UE-specific
reference signals for normal cyclic prefix for antenna port 5.
Figure 6.10.3.2-2 illustrates the resource elements used for UE-specific
reference signals for extended cyclic prefix for antenna port 5.
The notation $R_{p}$ is used to denote a resource element used for reference
signal transmission on antenna port$p$.
Figure 6.10.3.2-1: Mapping of UE-specific reference signals, antenna port 5
(normal cyclic prefix)
Figure 6.10.3.2-2: Mapping of UE-specific reference signals, antenna port 5
(extended cyclic prefix)
For antenna ports $p = 7$, $p = 8$ or $p = 7,8,\ldots,\upsilon + 6$, in a
physical resource block with frequency-domain index $n_{\text{PR}B}$ assigned
for the corresponding PDSCH transmission, a part of the reference signal
sequence $r(m)$ shall be mapped to complex-valued modulation symbols
$a_{k,l}^{(p)}$ in a subframe according to
Normal cyclic prefix:
where
The sequence ${\overline{w}}_{p}(i)$ is given by Table 6.10.3.2-1.
Table 6.10.3.2-1: The sequence ${\overline{w}}_{p}(i)$ for normal cyclic
prefix
* * *
Antenna port $p$  
7  
8  
9  
10  
11  
12  
13  
14
* * *
Extended cyclic prefix:
where
The sequence ${\overline{w}}_{p}(i)$ is given by Table 6.10.3.2-2.
Table 6.10.3.2-2: The sequence ${\overline{w}}_{p}(i)$ for extended cyclic
prefix
* * *
Antenna port $p$  
7  
8
* * *
For extended cyclic prefix, UE-specific reference signals are not supported on
antenna ports 9 to 14.
Resource elements $\left( k,l \right)$ used for transmission of UE-specific
reference signals to one UE on any of the antenna ports in the set $S$, where
$S = \left{ 7,8,\text{11},\text{13} \right}$ or $S = \left{
9,\text{10},\text{12},\text{14} \right}$ shall
\- not be used for transmission of PDSCH on any antenna port in the same slot,
and
\- not be used for UE-specific reference signals to the same UE on any antenna
port other than those in $S$ in the same slot.
Figure 6.10.3.2-3 illustrates the resource elements used for UE-specific
reference signals for normal cyclic prefix for antenna ports 7, 8, 9 and 10\.
Figure 6.10.3.2-4 illustrates the resource elements used for UE-specific
reference signals for extended cyclic prefix for antenna ports 7, 8.
Figure 6.10.3.2-3: Mapping of UE-specific reference signals, antenna ports 7,
8, 9 and 10 (normal cyclic prefix)
Figure 6.10.3.2-4: Mapping of UE-specific reference signals, antenna ports 7
and 8 (extended cyclic prefix)
### 6.10.3A Demodulation reference signals associated with EPDCCH
The demodulation reference signal associated with EPDCCH
\- is transmitted on the same antenna port $p \in \left{
\text{107},\text{108},\text{109},\text{110} \right}$ as the associated EPDCCH
physical resource;
\- is present and is a valid reference for EPDCCH demodulation only if the
EPDCCH transmission is associated with the corresponding antenna port;
\- is transmitted only on the physical resource blocks upon which the
corresponding EPDCCH is mapped.
A demodulation reference signal associated with EPDCCH is not transmitted in
resource elements $\left( k,l \right)$ in which one of the physical channels
or physical signals other than the demodulation reference signals defined in
6.1 are transmitted using resource elements with the same index pair $\left(
k,l \right)$ regardless of their antenna port $p$.
#### 6.10.3A.1 Sequence generation
For any of the antenna ports $p \in \left{
\text{107},\text{108},\text{109},\text{110} \right}$, the reference-signal
sequence $r(m)$ is defined by
$r(m) = \frac{1}{\sqrt{2}}\left( 1 - 2 \cdot c(2m) \right) +
j\frac{1}{\sqrt{2}}\left( 1 - 2 \cdot c(2m + 1) \right),\text{\ \ \ \ \ \ \ \
\ \ }m = \left{ \begin{matrix}
0,1,\text{.}\text{.}\text{.},\text{12}N_{\text{RB}}^{\text{max,DL}} - 1 &
\text{normal\ cyclic\ prefix} \
0,1,\text{.}\text{.}\text{.},\text{16}N_{\text{RB}}^{\text{max,DL}} - 1 &
\text{extended\ cyclic\ prefix} \ \end{matrix} \right.\ $.
The pseudo-random sequence $c(n)$ is defined in clause 7.2. The pseudo-random
sequence generator shall be initialised with
at the start of each subframe where $n_{\text{SCID}}^{\text{EPDCCH}} = 2$ and
$n_{\text{ID}\text{,i}}^{\text{EPDCCH}}$ is configured by higher layers. The
EPDCCH set to which the EPDCCH associated with the demodulation reference
signal belong is denoted $i \in \left{ 0,1 \right}$.
#### 6.10.3A.2 Mapping to resource elements
For the antenna port $p \in \left{ \text{107},\text{108},\text{109},\text{110}
\right}$ in a physical resource block $n_{\text{PRB}}$ assigned for the
associated EPDCCH, a part of the reference signal sequence $r(m)$ shall be
mapped to complex-valued modulation symbols $a_{k,l}^{(p)}$ in a subframe
according to
Normal cyclic prefix:
where
The sequence ${\overline{w}}_{p}(i)$ is given by Table 6.10.3A.2-1.
Table 6.10.3A.2-1: The sequence ${\overline{w}}_{p}(i)$ for normal cyclic
prefix
* * *
Antenna port $p$  
107  
108  
109  
110
* * *
Extended cyclic prefix:
where
The sequence ${\overline{w}}_{p}(i)$ is given by Table 6.10.3A.2-2.
Table 6.10.3A.2-2: The sequence ${\overline{w}}_{p}(i)$ for extended cyclic
prefix
* * *
Antenna port $p$  
107  
108
* * *
For extended cyclic prefix, demodulation reference signals are not supported
on antenna ports 109 to 110.
Resource elements $\left( k,l \right)$ used for transmission of demodulation
reference signals to one UE on any of the antenna ports in the set $S$, where
$S = \left{ \text{107},\text{108} \right}$ or $S = \left{
\text{109},\text{110} \right}$ shall
\- not be used for transmission of EPDCCH on any antenna port in the same
slot, and
\- not be used for demodulation reference signals to the same UE on any
antenna port other than those in $S$ in the same slot.
Replacing antenna port numbers 7 -- 10 by 107 -- 110 in Figure 6.10.3.2-3
provides an illustration of the resource elements used for demodulation
reference signals associated with EPDCCH for normal cyclic prefix. Replacing
antenna port numbers 7 -- 8 by 107 -- 108 in Figure 6.10.3.2-4 provides an
illustration of the resource elements used for demodulation reference signals
associated with EPDCCH for extended cyclic prefix.
### 6.10.4 Positioning reference signals
Positioning reference signals shall only be transmitted in resource blocks in
downlink subframes configured for positioning reference signal transmission.
If both normal and MBSFN subframes are configured as positioning subframes
within a cell, the OFDM symbols in a MBSFN subframe configured for positioning
reference signal transmission shall use the same cyclic prefix as used for
subframe #0. If only MBSFN subframes are configured as positioning subframes
within a cell, the OFDM symbols configured for positioning reference signals
in the MBSFN region of these subframes shall use extended cyclic prefix
length. In a subframe configured for positioning reference signal
transmission, the starting positions of the OFDM symbols configured for
positioning reference signal transmission shall be identical to those in a
subframe in which all OFDM symbols have the same cyclic prefix length as the
OFDM symbols configured for positioning reference signal transmission.
Positioning reference signals are transmitted on antenna port 6.
The positioning reference signals shall not be mapped to resource elements
$\left( k,l \right)$ allocated to PBCH, PSS or SSS regardless of their antenna
port $p$.
Positioning reference signals are defined for $\text{Δf} = \text{15}\text{\
kHz}$ only.
#### 6.10.4.1 Sequence generation
The reference-signal sequence $r_{l,n_{s}}(m)$ is defined by
where $n_{s}$ is the slot number within a radio frame, $l$ is the OFDM symbol
number within the slot. The pseudo-random sequence $c(i)$ is defined in clause
7.2. The pseudo-random sequence generator shall be initialised with
$c_{\text{init}} = 2^{\text{10}} \cdot \left( 7 \cdot \left( n_{s} + 1 \right)
+ l + 1 \right) \cdot \left( 2 \cdot N_{\text{ID}}^{\text{cell}} + 1 \right) +
2 \cdot N_{\text{ID}}^{\text{cell}} + N_{\text{CP}}$ at the start of each OFDM
symbol where
#### 6.10.4.2 Mapping to resource elements
The reference signal sequence $r_{l,n_{s}}(m)$ shall be mapped to complex-
valued modulation symbols $a_{k,l}^{(p)}$ used as reference signal for antenna
port $p = 6$ in slot $n_{s}$ according to
where
Normal cyclic prefix:
Extended cyclic prefix:
The bandwidth for positioning reference signals $N_{\text{RB}}^{\text{PRS}}$
is configured by higher layers and the cell-specific frequency shift is given
by {width="1.082638888888889in" height="0.23958333333333334in"}.
Figure 6.10.4.2-1: Mapping of positioning reference signals (normal cyclic
prefix)
Figure 6.10.4.2-2: Mapping of positioning reference signals (extended cyclic
prefix)
#### 6.10.4.3 Positioning reference signal subframe configuration
The cell specific subframe configuration period $T_{\text{PRS}}$ and the cell
specific subframe offset $\Delta_{\text{PRS}}$ for the transmission of
positioning reference signals are listed in Table 6.10.4.3-1. The PRS
configuration index $I_{\text{PRS}}$ is configured by higher layers.
Positioning reference signals are transmitted only in configured DL subframes.
Positioning reference signals shall not be transmitted in special subframes.
Positioning reference signals shall be transmitted in $N_{\text{PRS}}$
consecutive downlink subframes, where $N_{\text{PRS}}$ is configured by higher
layers.
The positioning reference signal instances, for the first subframe of the
$N_{\text{PRS}}$ downlink subframes, shall satisfy $\left( \text{10} \times
n_{f} + \left\lfloor \frac{n_{s}}{2} \right\rfloor - \Delta_{\text{PRS}}
\right)\text{mod}T_{\text{PRS}} = 0$.
Table 6.10.4.3-1: Positioning reference signal subframe configuration
+----------------------+----------------------+----------------------+ | PRS configuration | PRS periodicity | PRS subframe offset | | Index | $T_{\text{PRS}}$ | $ | | $I_{\text{PRS}}$ | | \Delta_{\text{PRS}}$ | | | (subframes) | | | | | (subframes) | +----------------------+----------------------+----------------------+ | 0 -- 159 | 160 | | +----------------------+----------------------+----------------------+ | 160 -- 479 | 320 | | +----------------------+----------------------+----------------------+ | 480 -- 1119 | 640 | | +----------------------+----------------------+----------------------+ | 1120 -- 2399 | 1280 | | +----------------------+----------------------+----------------------+ | 2400-4095 | Reserved | | +----------------------+----------------------+----------------------+
### 6.10.5 CSI reference signals
CSI reference signals are transmitted on one, two, four or eight antenna ports
using $p = \text{15}$, $p = \text{15},\text{16}$, $p =
\text{15},\text{.}\text{.}\text{.},\text{18}$ and $p =
\text{15},\text{.}\text{.}\text{.},\text{22}$, respectively.
CSI reference signals are defined for $\text{Δf} = \text{15}\text{\ kHz}$
only.
#### 6.10.5.1 Sequence generation
The reference-signal sequence $r_{l,n_{s}}(m)$ is defined by
where $n_{s}$ is the slot number within a radio frame and $l$ is the OFDM
symbol number within the slot. The pseudo-random sequence $c(i)$ is defined in
clause 7.2. The pseudo-random sequence generator shall be initialised with
$c_{\text{init}} = 2^{\text{10}} \cdot \left( 7 \cdot \left( n_{s} + 1 \right)
+ l + 1 \right) \cdot \left( 2 \cdot N_{\text{ID}}^{\text{CSI}} + 1 \right) +
2 \cdot N_{\text{ID}}^{\text{CSI}} + N_{\text{CP}}$ at the start of each OFDM
symbol where
$N_{\text{CP}} = \left{ \begin{matrix} 1 & \text{for\ normal\ CP} \ 0 &
\text{for\ extended\ CP} \ \end{matrix} \right.\ $
The quantity $N_{\text{ID}}^{\text{CSI}}$ equals $N_{\text{ID}}^{\text{cell}}$
unless configured by higher layers.
#### 6.10.5.2 Mapping to resource elements
In subframes configured for CSI reference signal transmission, the reference
signal sequence $r_{l,n_{s}}(m)$ shall be mapped to complex-valued modulation
symbols $a_{k,l}^{(p)}$ used as reference symbols on antenna port $p$
according to
where
The quantity $(k\text{',}l')$ and the necessary conditions on $n_{s}$ are
given by Tables 6.10.5.2-1 and 6.10.5.2-2 for normal and extended cyclic
prefix, respectively.
Multiple CSI reference signal configurations can be used in a given cell. A UE
can be configured with multiple sets of CSI reference signals,
\- up to three configurations for which the UE shall assume non-zero
transmission power for the CSI-RS, and
\- zero or more configurations for which the UE shall assume zero transmission
power.
The CSI-RS configurations for which the UE shall assume non-zero transmission
power are provided by higher layers.
The CSI-RS configurations for which the UE shall assume zero transmission
power in a subframe are given by a bitmap derived according to clause 7.2.7 in
3GPP TS 36.213 [4]. For each bit set to one in the 16-bit bitmap, the UE shall
assume zero transmission power for the resource elements corresponding to the
four CSI reference signal column in Tables 6.10.5.2-1 and 6.10.5.2-2 for
normal and extended cyclic prefix, respectively, except for resource elements
that overlap with those for which the UE shall assume non-zero transmission
power CSI-RS as configured by higher layers. The most significant bit
corresponds to the lowest CSI reference signal configuration index and
subsequent bits in the bitmap correspond to configurations with indices in
increasing order.
CSI reference signals can only occur in
\- downlink slots where $n_{s}\text{mod}2$ fulfils the condition in Tables
6.10.5.2-1 and 6.10.5.2-2 for normal and extended cyclic prefix, respectively,
and
\- where the subframe number fulfils the conditions in clause 6.10.5.3.
The UE shall assume that CSI reference signals are not transmitted
\- in the special subframe(s) in case of frame structure type 2,
\- in subframes where transmission of a CSI-RS would collide with
_SystemInformationBlockType1_ messages,
\- in the primary cell in subframes configured for transmission of paging
messages in the primary cell for any UE with the cell-specific paging
configuration.
The UE shall assume that none of the CSI reference signals corresponding to a
CSI reference signal configuration are transmitted in subframes where
transmission of any of those CSI reference signals would collide with
transmission of synchronization signals or PBCH.
Resource elements $\left( k,l \right)$ used for transmission of CSI reference
signals on any of the antenna ports in the set $S$, where $S = \left{
\text{15} \right}$, $S = \left{ \text{15},\text{16} \right}$, $S = \left{
\text{17},\text{18} \right}$, $S = \left{ \text{19},\text{20} \right}$ or $S =
\left{ \text{21},\text{22} \right}$ shall not be used for transmission of
PDSCH on any antenna port in the same slot.
The mapping for CSI reference signal configuration 0 is illustrated in Figures
6.10.5.2-1 and 6.10.5.2-2.
Table 6.10.5.2-1: Mapping from CSI reference signal configuration to
$(k\text{',}l')$ for normal cyclic prefix
+---------+---------+---------+---+--------+---+--------+---+ | | CSI | Number | | | | | | | | re | of CSI | | | | | | | | ference | re | | | | | | | | signal | ference | | | | | | | | | signals | | | | | | | | config | con | | | | | | | | uration | figured | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | | 1 or 2 | 4 | 8 | | | | +---------+---------+---------+---+--------+---+--------+---+ | | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | > Frame | 0 | (9,5) | 0 | (9,5) | 0 | (9,5) | 0 | | > st | | | | | | | | | ructure | | | | | | | | | > type | | | | | | | | | > 1 and | | | | | | | | | > 2 | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 1 | (11,2) | 1 | (11,2) | 1 | (11,2) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 2 | (9,2) | 1 | (9,2) | 1 | (9,2) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 3 | (7,2) | 1 | (7,2) | 1 | (7,2) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 4 | (9,5) | 1 | (9,5) | 1 | (9,5) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 5 | (8,5) | 0 | (8,5) | 0 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 6 | (10,2) | 1 | (10,2) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 7 | (8,2) | 1 | (8,2) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 8 | (6,2) | 1 | (6,2) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 9 | (8,5) | 1 | (8,5) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 10 | (3,5) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 11 | (2,5) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 12 | (5,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 13 | (4,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 14 | (3,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 15 | (2,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 16 | (1,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 17 | (0,2) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 18 | (3,5) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 19 | (2,5) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | > Frame | 20 | (11,1) | 1 | (11,1) | 1 | (11,1) | 1 | | > st | | | | | | | | | ructure | | | | | | | | | > type | | | | | | | | | > 2 | | | | | | | | | > only | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 21 | (9,1) | 1 | (9,1) | 1 | (9,1) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 22 | (7,1) | 1 | (7,1) | 1 | (7,1) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 23 | (10,1) | 1 | (10,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 24 | (8,1) | 1 | (8,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 25 | (6,1) | 1 | (6,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 26 | (5,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 27 | (4,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 28 | (3,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 29 | (2,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 30 | (1,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 31 | (0,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+
Table 6.10.5.2-2: Mapping from CSI reference signal configuration to
$(k\text{',}l')$ for extended cyclic prefix.
+---------+---------+---------+---+--------+---+--------+---+ | | CSI | Number | | | | | | | | re | of CSI | | | | | | | | ference | re | | | | | | | | signal | ference | | | | | | | | | signals | | | | | | | | config | con | | | | | | | | uration | figured | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | | 1 or 2 | 4 | 8 | | | | +---------+---------+---------+---+--------+---+--------+---+ | | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | > Frame | 0 | (11,4) | 0 | (11,4) | 0 | (11,4) | 0 | | > st | | | | | | | | | ructure | | | | | | | | | > type | | | | | | | | | > 1 and | | | | | | | | | > 2 | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 1 | (9,4) | 0 | (9,4) | 0 | (9,4) | 0 | +---------+---------+---------+---+--------+---+--------+---+ | | 2 | (10,4) | 1 | (10,4) | 1 | (10,4) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 3 | (9,4) | 1 | (9,4) | 1 | (9,4) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 4 | (5,4) | 0 | (5,4) | 0 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 5 | (3,4) | 0 | (3,4) | 0 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 6 | (4,4) | 1 | (4,4) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 7 | (3,4) | 1 | (3,4) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 8 | (8,4) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 9 | (6,4) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 10 | (2,4) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 11 | (0,4) | 0 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 12 | (7,4) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 13 | (6,4) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 14 | (1,4) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 15 | (0,4) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | > Frame | 16 | (11,1) | 1 | (11,1) | 1 | (11,1) | 1 | | > st | | | | | | | | | ructure | | | | | | | | | > type | | | | | | | | | > 2 | | | | | | | | | > only | | | | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 17 | (10,1) | 1 | (10,1) | 1 | (10,1) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 18 | (9,1) | 1 | (9,1) | 1 | (9,1) | 1 | +---------+---------+---------+---+--------+---+--------+---+ | | 19 | (5,1) | 1 | (5,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 20 | (4,1) | 1 | (4,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 21 | (3,1) | 1 | (3,1) | 1 | | | +---------+---------+---------+---+--------+---+--------+---+ | | 22 | (8,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 23 | (7,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 24 | (6,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 25 | (2,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 26 | (1,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+ | | 27 | (0,1) | 1 | | | | | +---------+---------+---------+---+--------+---+--------+---+
Figure 6.10.5.2-1: Mapping of CSI reference signals (CSI configuration 0,
normal cyclic prefix)
Figure 6.10.5.2-2: Mapping of CSI reference signals (CSI configuration 0,
extended cyclic prefix)
#### 6.10.5.3 CSI reference signal subframe configuration
The subframe configuration period $T_{\text{CSI-RS}}$ and the subframe offset
$\Delta_{\text{CSI-RS}}$ for the occurence of CSI reference signals are listed
in Table 6.10.5.3-1. The parameter $I_{\text{CSI} - \text{RS}}$ can be
configured separately for CSI reference signals for which the UE shall assume
non-zero and zero transmission power. Subframes containing CSI reference
signals shall satisfy $\left( \text{10}n_{f} + \left\lfloor n_{s}/2
\right\rfloor - \Delta_{\text{CSI} - \text{RS}} \right)\text{mod}T_{\text{CSI}
- \text{RS}} = 0$.
Table 6.10.5.3-1: CSI reference signal subframe configuration
+----------------------+----------------------+----------------------+ | C | CSI-RS periodicity | CSI-RS subframe | | SI-RS-SubframeConfig | $T_{\text{CSI-RS}}$ | offset | | $I_{\tex | | $\De | | t{CSI} - \text{RS}}$ | (subframes) | lta_{\text{CSI-RS}}$ | | | | | | | | (subframes) | +----------------------+----------------------+----------------------+ | 0 -- 4 | 5 | | +----------------------+----------------------+----------------------+ | 5 -- 14 | 10 | | +----------------------+----------------------+----------------------+ | 15 -- 34 | 20 | | +----------------------+----------------------+----------------------+ | 35 -- 74 | 40 | | +----------------------+----------------------+----------------------+ | 75 -- 154 | 80 | | +----------------------+----------------------+----------------------+
## 6.11 Synchronization signals
There are 504 unique physical-layer cell identities. The physical-layer cell
identities are grouped into 168 unique physical-layer cell-identity groups,
each group containing three unique identities. The grouping is such that each
physical-layer cell identity is part of one and only one physical-layer cell-
identity group. A physical-layer cell identity $N_{\text{ID}}^{\text{cell}} =
3N_{\text{ID}}^{(1)} + N_{\text{ID}}^{(2)}$is thus uniquely defined by a
number$N_{\text{ID}}^{(1)}$in the range of 0 to 167, representing the
physical-layer cell-identity group, and a number$N_{\text{ID}}^{(2)}$ in the
range of 0 to 2, representing the physical-layer identity within the physical-
layer cell-identity group.
### 6.11.1 Primary synchronization signal
#### 6.11.1.1 Sequence generation
The sequence $d(n)$ used for the primary synchronization signal is generated
from a frequency-domain Zadoff-Chu sequence according to
where the Zadoff-Chu root sequence index $u$ is given by Table 6.11.1.1-1.
Table 6.11.1.1-1: Root indices for the primary synchronization signal
* * *
      Root index $u$
0 25 1 29 2 34
* * *
#### 6.11.1.2 Mapping to resource elements
The mapping of the sequence to resource elements depends on the frame
structure. The UE shall not assume that the primary synchronization signal is
transmitted on the same antenna port as any of the downlink reference signals.
The UE shall not assume that any transmission instance of the primary
synchronization signal is transmitted on the same antenna port, or ports, used
for any other transmission instance of the primary synchronization signal.
The sequence $d\left( n \right)$ shall be mapped to the resource elements
according to
For frame structure type 1, the primary synchronization signal shall be mapped
to the last OFDM symbol in slots 0 and 10.
For frame structure type 2, the primary synchronization signal shall be mapped
to the third OFDM symbol in subframes 1 and 6. Resource elements $(k,l)$ in
the OFDM symbols used for transmission of the primary synchronization signal
where
are reserved and not used for transmission of the primary synchronization
signal.
### 6.11.2 Secondary synchronization signal
#### 6.11.2.1 Sequence generation
The sequence $d(0),\text{.}\text{.}\text{.},d(\text{61})$used for the second
synchronization signal is an interleaved concatenation of two length-31 binary
sequences. The concatenated sequence is scrambled with a scrambling sequence
given by the primary synchronization signal.
The combination of two length-31 sequences defining the secondary
synchronization signal differs between subframe 0 and subframe 5 according to
where $0 \leq n \leq \text{30}$. The indices $m_{0}$ and $m_{1}$ are derived
from the physical-layer cell-identity group $N_{\text{ID}}^{(1)}$ according to
where the output of the above expression is listed in Table 6.11.2.1-1.
The two sequences $s_{0}^{(m_{0})}(n)$ and $s_{1}^{(m_{1})}(n)$ are defined as
two different cyclic shifts of the m-sequence $\overset{\sim}{s}(n)$ according
to
where$\overset{\sim}{s}(i) = 1 - 2x(i)$, $0 \leq i \leq \text{30}$, is defined
by
with initial conditions$\begin{matrix} x(0) = 0, & x(1) = 0, & x(2) = 0, &
x(3) = 0, & x(4) = 1 \ \end{matrix}$.
The two scrambling sequences $c_{0}(n)$ and $c_{1}(n)$ depend on the primary
synchronization signal and are defined by two different cyclic shifts of the
m-sequence $\overset{\sim}{c}(n)$ according to
where $N_{\text{ID}}^{(2)} \in \left{ 0,1,2 \right}$ is the physical-layer
identity within the physical-layer cell identity group $N_{\text{ID}}^{(1)}$
and $\overset{\sim}{c}(i) = 1 - 2x(i)$, $0 \leq i \leq \text{30}$, is defined
by
with initial conditions $\begin{matrix} x(0) = 0, & x(1) = 0, & x(2) = 0, &
x(3) = 0, & x(4) = 1 \ \end{matrix}$.
The scrambling sequences $z_{1}^{(m_{0})}(n)$ and $z_{1}^{(m_{1})}(n)$ are
defined by a cyclic shift of the m-sequence $\overset{\sim}{z}(n)$ according
to
where $m_{0}$ and $m_{1}$ are obtained from Table 6.11.2.1-1 and
$\overset{\sim}{z}(i) = 1 - 2x(i)$, $0 \leq i \leq \text{30}$, is defined by
with initial conditions $\begin{matrix} x(0) = 0, & x(1) = 0, & x(2) = 0, &
x(3) = 0, & x(4) = 1 \ \end{matrix}$.
Table 6.11.2.1-1: Mapping between physical-layer cell-identity group
$N_{\text{ID}}^{(1)}$ and the indices $m_{0}$ and $m_{1}$
* * *
0 0 1 34 4 6 68 9 12 102 15 19 136 22 27 1 1 2 35 5 7 69 10 13 103 16 20 137
23 28 2 2 3 36 6 8 70 11 14 104 17 21 138 24 29 3 3 4 37 7 9 71 12 15 105 18
22 139 25 30 4 4 5 38 8 10 72 13 16 106 19 23 140 0 6 5 5 6 39 9 11 73 14 17
107 20 24 141 1 7 6 6 7 40 10 12 74 15 18 108 21 25 142 2 8 7 7 8 41 11 13 75
16 19 109 22 26 143 3 9 8 8 9 42 12 14 76 17 20 110 23 27 144 4 10 9 9 10 43
13 15 77 18 21 111 24 28 145 5 11 10 10 11 44 14 16 78 19 22 112 25 29 146 6
12 11 11 12 45 15 17 79 20 23 113 26 30 147 7 13 12 12 13 46 16 18 80 21 24
114 0 5 148 8 14 13 13 14 47 17 19 81 22 25 115 1 6 149 9 15 14 14 15 48 18 20
82 23 26 116 2 7 150 10 16 15 15 16 49 19 21 83 24 27 117 3 8 151 11 17 16 16
17 50 20 22 84 25 28 118 4 9 152 12 18 17 17 18 51 21 23 85 26 29 119 5 10 153
13 19 18 18 19 52 22 24 86 27 30 120 6 11 154 14 20 19 19 20 53 23 25 87 0 4
121 7 12 155 15 21 20 20 21 54 24 26 88 1 5 122 8 13 156 16 22 21 21 22 55 25
27 89 2 6 123 9 14 157 17 23 22 22 23 56 26 28 90 3 7 124 10 15 158 18 24 23
23 24 57 27 29 91 4 8 125 11 16 159 19 25 24 24 25 58 28 30 92 5 9 126 12 17
160 20 26 25 25 26 59 0 3 93 6 10 127 13 18 161 21 27 26 26 27 60 1 4 94 7 11
128 14 19 162 22 28 27 27 28 61 2 5 95 8 12 129 15 20 163 23 29 28 28 29 62 3
6 96 9 13 130 16 21 164 24 30 29 29 30 63 4 7 97 10 14 131 17 22 165 0 7 30 0
2 64 5 8 98 11 15 132 18 23 166 1 8 31 1 3 65 6 9 99 12 16 133 19 24 167 2 9
32 2 4 66 7 10 100 13 17 134 20 25 - - - 33 3 5 67 8 11 101 14 18 135 21 26 -
- -
* * *
#### 6.11.2.2 Mapping to resource elements
The mapping of the sequence to resource elements depends on the frame
structure. In a subframe for frame structure type 1 and in a half-frame for
frame structure type 2, the same antenna port as for the primary
synchronization signal shall be used for the secondary synchronization signal.
The sequence $d\left( n \right)$ shall be mapped to resource elements
according to
Resource elements $(k,l)$ where
are reserved and not used for transmission of the secondary synchronization
signal.
## 6.12 OFDM baseband signal generation
The time-continuous signal $s_{l}^{(p)}\left( t \right)$ on antenna port $p$
in OFDM symbol $l$ in a downlink slot is defined by
for $0 \leq t  0$starts at time
$\sum_{}^{}{(N_{\text{CP},l^{'}} + N)T_{s}}$ within the slot. In case the
first OFDM symbol(s) in a slot use normal cyclic prefix and the remaining OFDM
symbols use extended cyclic prefix, the starting position the OFDM symbols
with extended cyclic prefix shall be identical to those in a slot where all
OFDM symbols use extended cyclic prefix. Thus there will be a part of the time
slot between the two cyclic prefix regions where the transmitted signal is not
specified.
Table 6.12-1 lists the value of $N_{\text{CP},l}$that shall be used. Note that
different OFDM symbols within a slot in some cases have different cyclic
prefix lengths.
Table 6.12-1: OFDM parameters
* * *
Configuration Cyclic prefix length $N_{\text{CP},l}$  
Normal cyclic prefix  
Extended cyclic prefix
* * *
## 6.13 Modulation and upconversion
Modulation and upconversion to the carrier frequency of the complex-valued
OFDM baseband signal for each antenna port is shown in Figure 6.13-1. The
filtering required prior to transmission is defined by the requirements in
3GPP TS 36.104 [6].
Figure 6.13-1: Downlink modulation
# 7 Generic functions
## 7.1 Modulation mapper
The modulation mapper takes binary digits, 0 or 1, as input and produces
complex-valued modulation symbols, _x=I+jQ_ , as output.
## 7.1.1 BPSK
In case of BPSK modulation, a single bit, $b(i)$, is mapped to a complex-
valued modulation symbol _x_ =_I_ +j _Q_ according to Table 7.1.1-1.
Table 7.1.1-1: BPSK modulation mapping
* * *
      *I*   *Q*
0  
1
* * *
## 7.1.2 QPSK
In case of QPSK modulation, pairs of bits, $b(i),b(i + 1)$, are mapped to
complex-valued modulation symbols _x_ =_I_ +j _Q_ according to Table 7.1.2-1.
Table 7.1.2-1: QPSK modulation mapping
* * *
       *I*   *Q*
00  
01  
10  
11
* * *
## 7.1.3 16QAM
In case of 16QAM modulation, quadruplets of bits, $b(i),b(i + 1),b(i + 2),b(i
+ 3)$, are mapped to complex-valued modulation symbols _x_ =_I_ +j _Q_
according to Table 7.1.3-1.
Table 7.1.3-1: 16QAM modulation mapping
* * *
         *I*   *Q*
0000  
0001  
0010  
0011  
0100  
0101  
0110  
0111  
1000  
1001  
1010  
1011  
1100  
1101  
1110  
1111
* * *
## 7.1.4 64QAM
In case of 64QAM modulation, hextuplets of bits, $b(i),b(i + 1),b(i + 2),b(i +
3),b(i + 4),b(i + 5)$, are mapped to complex-valued modulation symbols _x_
=_I_ +j _Q_ according to Table 7.1.4-1.
Table 7.1.4-1: 64QAM modulation mapping
* * *
           *I*   *Q*            *I*   *Q*
000000 100000  
000001 100001  
000010 100010  
000011 100011  
000100 100100  
000101 100101  
000110 100110  
000111 100111  
001000 101000  
001001 101001  
001010 101010  
001011 101011  
001100 101100  
001101 101101  
001110 101110  
001111 101111  
010000 110000  
010001 110001  
010010 110010  
010011 110011  
010100 110100  
010101 110101  
010110 110110  
010111 110111  
011000 111000  
011001 111001  
011010 111010  
011011 111011  
011100 111100  
011101 111101  
011110 111110  
011111 111111
* * *
## 7.2 Pseudo-random sequence generation
Pseudo-random sequences are defined by a length-31 Gold sequence. The output
sequence $c(n)$ of length$M_{\text{PN}}$, where$n =
0,1,\text{.}\text{.}\text{.},M_{\text{PN}} - 1$, is defined by
where $N_{C} = \text{1600}$ and the first m-sequence shall be initialized
with$x_{1}(0) = 1,x_{1}(n) = 0,n = 1,2,\text{.}\text{.}\text{.},\text{30}$.
The initialization of the second m-sequence is denoted by $c_{\text{init}} =
\sum_{}^{}{x_{2}(i) \cdot 2^{i}}$ with the value depending on the application
of the sequence.
# 8 Timing
## 8.1 Uplink-downlink frame timing
Transmission of the uplink radio frame number $i$ from the UE shall start
$(N_{\text{TA}} + N_{\text{TA\ offset}}) \times T_{s}$ seconds before the
start of the corresponding downlink radio frame at the UE, where $0 \leq
N_{\text{TA}} \leq \text{20512}$, $N_{\text{TA\ offset}} = 0$for frame
structure type 1 and $N_{\text{TA\ offset}} = \text{624}$ for frame structure
type 2. Note that not all slots in a radio frame may be transmitted. One
example hereof is TDD, where only a subset of the slots in a radio frame is
transmitted.
Figure 8.1-1: Uplink-downlink timing relation
#