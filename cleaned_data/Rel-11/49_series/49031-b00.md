# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document defines the coding of information in an extension of the
Base Station System Application Part (BSSAP) that is needed to support
location services on interfaces based on use of BSSAP.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies procedures and information coding that are
needed to define and support the BSSAP LCS Extension (BSSAP-LE). The BSSAP-LE
message set is applicable to the following GSM interfaces defined in 3GPP TS
43.059:
\- Lb interface (BSC-SMLC).
\- Lp interface (SMLC-SMLC).
The present document defines message formats and encoding for BSSAP-LE and the
particular subsets of it that are applicable to each of the above interfaces.
The present document also defines the support for BSSAP-LE message transfer on
each of these interfaces using either ITU-T and ANSI versions of SS7 MTP or
IETF M3UA/SCTP and SCCP. Additional requirements for the above interfaces that
are applicable to BSSAP-LE are also defined -- e.g. usage of BSSAP (as defined
in 3GPP TS 24.008 and 48.008) on the Lb interface.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
```{=html}
``` \- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[1a] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[2] 3GPP TS 43.059: \"Functional Stage 2 Description of Location Services in
GERAN\".
[3] 3GPP TS 44.018: \"Mobile radio interface layer 3 specification; Radio
Resource Control Protocol\".
[3a] 3GPP TS 24.008: \"Mobile radio interface layer 3 specification; Core
Network Protocols; Stage 3\".
[4] 3GPP TS 44.031: \"Location Services (LCS); Mobile Station (MS) -- Serving
Mobile Location Center (SMLC); Radio Resource LCS Protocol (RRLP)\".
[5] 3GPP TS 44.071: \"Location Services (LCS); Mobile radio interface layer 3
Location Services (LCS) specification\".
[6] 3GPP TS 48.006: \"Signaling transport mechanism specification for the Base
Station Subsystem -- Mobile-services Switching Centre (BSS - MSC) interface\".
[7] 3GPP TS 48.008: \"Mobile-services Switching Centre -- Base Station System
(MSC-BSS) interface; Layer 3 specification\".
[8] 3GPP TS 48.031: \"Location Services (LCS); Serving Mobile Location Center
-- Serving Mobile Location Center (SMLC - SMLC); SMLCPP specification\".
[9] 3GPP TS 48.071: \"Serving Mobile Location Center -- Base Station Subsystem
(SMLC-BSS) interface Layer 3 specification\".
[10] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[10a] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[11] ITU-T Recommendation Q.702: \"Signalling data link\".
[12] ITU-T Recommendation Q.703: \"Signalling link\".
[13] ITU-T Recommendation Q.704: \"Signalling network functions and
messages\".
[14] ITU-T Recommendation Q.707: \"Testing and maintenance\".
[15] ITU-T Recommendation Q.711: \"Functional description of the signalling
connection control part\".
[16] ITU-T Recommendation Q.712: \"Definition and function of signalling
connection control part messages\".
[17] ITU-T Recommendation Q.713: \"Signalling connection control part formats
and codes\".
[18] ITU-T Recommendation Q.714: \"Signalling connection control part
procedures\".
[19] ANSI T1.111 (1996): \"Signalling System Number 7 -- Message Transfer
Part\".
[20] ANSI T1.112 (1996): \"Signalling System Number 7 (SS7) - Signalling
Connection Control Part Functional Description\".
[21] TIA/EIA/IS-J-STD-036 (2000): \"Wireless Enhanced Emergency Services\".
[22] 3GPP TS 48.018: \"General Packet Radio Service (GPRS); Base Station
System (BSS) - Serving GPRS Support Node (SGSN); BSS GPRS Protocol (BSSGP)\".
[23] IETF STD 51, RFC 1661(07/1994): \"The Point-To-Point Protocol (PPP)\".
[24] IETF STD 51, RFC 1662(07/1994): \"PPP in HDLC-like Framing\".
[25] IETF RFC 2507(02/1999): \"IP header compression\".
[26] IETF RFC 1990(07/1994): \"The PPP Multilink Protocol (MP)\".
[27] IETF RFC 2686(09/1999): \"The Multi-Class Extension to Multi-Link PPP\".
[28] IETF RFC 2509(02/1999): \"IP Header Compression over PPP\".
[29] 3GPP TS 29.202: \"SS7 Signalling Transport in Core Network; Stage 3\".
[30] Galileo OS SIS ICD/D.0 \"Galileo Open Service, Signal In Space Interface
Control Document/Draft 0\".
[31] Global Navigation Satellite System GLONASS Interface Control Document,
Version 5, 2002.
# 3 Definitions, abbreviations and symbols
For the purposes of the present document, the definitions, symbols and
abbreviations listed in 3GPP TS 21.905 and 3GPP TS 43.059 apply.
# 4 Definition of BSSAP-LE
BSSAP-LE is an extension to BSSAP that contains messages and parameters
specific to the support of LCS. The following subsets of BSSAP-LE are defined:
DTAP-LE, BSSMAP-LE.
## 4.1 DTAP-LE Messages
DTAP-LE messages are transfered between an SMLC and a Type A LMU and comprise
the following individual messages:
\- REGISTER;
\- FACILITY;
\- RELEASE COMPLETE.
The content, encoding and certain procedures asssociated with DTAP-LE messages
are defined in 3GPP TS 44.071.
## 4.2 BSSMAP-LE Messages
BSSMAP-LE messages are transferred between a BSS and SMLC and comprise the
following individual messages:
BSSMAP-LE Positioning Messages:
\- Perform Location Request;
\- Perform Location Response;
\- Perform Location Abort;
\- Perform Location Information.
BSSMAP-LE Information Messages:
\- Connection Oriented Information;
\- Connectionless Information.
BSSMAP-LE General Messages:
\- Reset;
\- Reset Acknowledge.
The content and encoding of BSSMAP-LE messages are defined in the present
document.
# 5 Procedures applicable to use of BSSAP-LE
## 5.1 Location Request
The Location Request procedure is applicable to the Lb interface. Its purpose
is to obtain a location estimate for a target MS that is already in dedicated
mode, in packet transfer mode, in packet idle mode, or in dual transfer mode.
It is also used to provide an MS with LCS assistance data or with a
deciphering key for LCS broadcast assistance data. The initiator of a location
request is the BSS. The procedure makes use of SCCP connection oriented
signaling on the Lb interface.
### 5.1.1 Successful Operation
The initiator of the location request sends a BSSMAP-LE Perform Location
Request to the SMLC associated with the current serving cell for the target
MS. The message contains the following mandatory (M), conditional (C) and
optional (O) information, where conditional parameters are required if
available.
\- Location Type (M).
\- GANSS Location Type (C)
\- Cell Identifier (M).
\- Classmark Information Type 3 (C).
\- LCS Client Type (C).
\- Chosen Channel (C).
\- LCS Priority (C).
\- LCS QoS (C).
\- Requested GPS Assistance Data (C).
\- BSSLAP APDU (C).
\- LCS Capability (O).
\- Packet Measurement Report (O).
\- Measured Cell Identity List (O).
\- IMSI of target MS (O).
\- IMEI of target MS (O).
\- Requested GANSS Assistance Data (C).
If requested, the SMLC performs positioning of the target MS using a
particular position method or a combination of more than one positioning
method. If neither the Classmark Information Type 3 IE nor the LCS Capability
IE is present, the SMLC shall instigate only network based positioning methods
(e.g. TA and U-TDOA but not GPS or E-OTD).
Alternatively, if requested otherwise, the SMLC may provide positioning
assistance data to the MS. The SMLC may invoke the following other BSSAP-LE
procedures to perform these procedures:
\- connection oriented information transfer;
\- connectionless information transfer;
\- LMU connection establishment;
\- LMU connection release;
\- DTAP-LE information transfer.
Additional procedures defined in 3GPP TS 24.008 and 3GPP TS 48.008 may also be
performed. If a location estimate was requested and was subsequently obtained,
the SMLC shall return a BSSMAP-LE Perform Location Response to the initiator
of the location request. This message contains the following mandatory,
conditional and optional parameters.
\- Location Estimate (M).
\- Positioning Data (C).
\- GANSS Positioning Data (C).
Restrictions on the geographic shape encoded within the Location Estimate
parameter may exist for certain LCS client types. The SMLC shall comply with
any restrictions defined in 3GPP specifications and, in a particular country,
with any restrictions defined for a specific LCS client type in relevant
national standards. For example, in the US, national interim standard
TIA/EIA/IS-J-STD-036 [21] restricts the geographic shape for an emergency
services LCS client to minimally either an \"ellipsoid point\" or an
\"ellipsoid point with uncertainty circle and confidence\" as defined in 3GPP
TS 23.032.
If assistance data was instead requested for an MS and the SMLC was able
successfully to transfer this to the MS, the SMLC shall return a BSSMAP-LE
Perform Location Response to the initiator of the location request (serving
BSC). This message shall contain no parameters. The absence of an LCS Cause
parameter in this case implies that the transfer was successful.
Otherwise, if a deciphering key was requested for LCS broadcast assistance
data and the SMLC has access to the appropriate keys, the SMLC shall return a
BSSMAP-LE Perform Location Response to the initiator of the location request.
This message contains the following mandatory parameters.
\- Deciphering Keys (M).
### 5.1.2 Unsuccessful Operation
If the SMLC is unable to obtain any of the location information requested or
if requested LCS assistance data could not be transferred or requested
deciphering keys for broadcast assistance data could not be returned, the SMLC
shall return a BSSMAP-LE Perform Location Response to the initiator of the
Location Request carrying the following parameters:
\- LCS Cause (M);
\- Positioning Data (O).
\- GANSS Positioning Data (O).
If assistance data or deciphering keys for a specific positioning method is
not supported in the network or in the location area, the SMLC shall indicate
this with LCS Cause value \"Position method failure\" accompanied with
diagnostic value \"Position Method Not Available in Network\" or \"Position
Method Not Available in Location Area\".
### 5.1.3 Abnormal Conditions
If an ongoing location request is preempted at the initiator by an inter-BSC
handover or if the main signaling link to the target MS is lost or released or
if there is a timeout waiting for the positioning response, or if there is an
Inter NSE cell change in the PS Domain (e.g. detected by the BSS at receipt of
BSSGP FLUSH-LL PDU) for which the BSS is unable to maintain the positioning
procedure, the initiator shall send a BSSMAP-LE Perform Location Abort to the
SMLC containing the following parameters.
\- LCS Cause (M).
On receipt of this message, the SMLC shall stop positioning of the target MS
and may release any resources (e.g. LMUs) previously allocated. If the SMLC
has not yet returned a BSSMAP-LE Perform Location Response to the initiator,
it shall return this message containing an LCS Cause indicating an abort and,
optionally, positioning data, GANSS positioning data. The initiator shall then
release the SCCP connection. If the SMLC cannot proceed with positioning due
to some protocol violation or error condition (e.g. inter-BSC handover
indication received from the serving BSC), it shall return a BSSMAP-LE Perform
Location Response to the initiator containing an LCS cause and, optionally,
positioning data, GANSS positioning data. The initiator need not reply at the
BSSAP-LE level to this message. However, the initiator may return a BSSMAP-LE
perform Location Abort which shall not be treated as an error by the SMLC.
### 5.1.4 Overload
If the SMLC is in an overload condition, it may reject a BSSMAP-LE Perform
Location request by returning a BSSMAP-LE Perform Location response containing
an LCS Cause parameter indicating congestion. The initiator of the location
service request (BSC) may reduce the frequency of future location service
requests until rejection due to overload has ceased. In reducing the frequency
of location service requests, a BSC shall reduce lower priority requests, to
zero if necessary, before reducing the frequency of higher priority requests.
An SMLC shall similarly reject location service requests of a lower priority,
to zero if necessary, due to overload before rejecting location service
requests of a higher priority. An SMLC in an overload condition may optionally
employ the following procedures to alleviate overload:
a) Allow higher priority location service requests to preempt lower priority
requests for which location service procedures are already in progress.
b) Abort lower priority location service requests already in progress.
c) Reduce the supported QoS for lower priority requests for a location
estimate -- e.g. by reducing accuracy or increasing response time.
d) Employ MS based positioning methods, where supported by the target MS and
SMLC, rather than MS assisted or network based methods (except TA).
The priority of a location service request shall be defined according to the
value in the LCS Priority parameter. If this parameter is absent in a BSSMAP-
LE Perform Location request, the lowest priority shall be assumed.
## 5.2 Connection Oriented Information Transfer
The Connection Oriented Information transfer procedure is applicable to the Lb
interface. It enables two way transfer of BSSLAP messages between an SMLC and
the BSS serving a target MS. The initiator of the procedure can be either the
BSS serving the target MS or the SMLC. The procedure is only valid while a
location request procedure for the target MS is ongoing. The procedure makes
use of SCCP connection oriented signaling on the Lb interface and uses the
same SCCP connection as the location request procedure for the particular
target MS.
### 5.2.1 Successful Operation
An SMLC or BSS with a BSSLAP message to transfer concerning a particular
target MS sends a BSSMAP-LE Connection Oriented Information message to a
recipient carrying the following parameters:
\- BSSLAP APDU (M);
\- (Segmentation (C)).
If the sender is an SMLC, the message is transferred to the BSS. The BSS shall
then perform the positioning operation requested by the BSSLAP APDU (refer to
3GPP TS 48.071). If the BSSLAP APDU contains an RRLP APDU, the BSS shall
transfer this to the target MS.
If the sender is a BSS and the intended recipient is the SMLC for a target MS,
the message is transferred to the SMLC. The SMLC shall then perform
interpretation of the BSSLAP APDU.
### 5.2.2 Abnormal Conditions
At an intermediate entity, if a received BSSMAP-LE Connection Oriented
Information message contains unrecognized information or if the message cannot
be sent on, the message shall be discarded.
At the recipient entity, if a received BSSMAP-LE Connection Oriented
Information message contains invalid or unrecognized information as defined
for BSSAP-LE, any ongoing positioning procedure shall be terminated and
associated resources may be released. If the recipient is a BSS, the SMLC
shall be notified -- e.g. using a BSSLAP Reject or Abort. If the recipient is
an SMLC, a new positioning attempt (e.g. using a different position method)
may be started.
If a BSS receives an error from SGSN after having attempted to transfer the
information via SGSN to an MS for PS domain positioning, the BSS shall notify
the SMLC with a BSSLAP Abort message.
### 5.2.3 Segmentation
Segmentation is only included for support of interoperability with Legacy
(3GPP R4 and older) equipment when a segmented message is received from a
Legacy node. 3GPP R5 and later equipment shall not initiate the use of
segmentation.
The Segmentation parameter shall not be included if the BSSLAP message is not
segmented.
If the size of an embedded BSSLAP message is too large to fit into one BSSMAP-
LE message, the sending entity divides the BSSLAP message to a necessary
number of BSSMAP-LE messages each containing a BSSLAP APDU IE and a
Segmentation IE. In the BSSLAP APDU IE it includes as many octets as possible.
The segmentation IE contains a segment number field and an indication of the
final segment. Message identification shall not be used. The order number of a
segment in the Segment Number field in the Segmentation IE is incremented by
one starting from zero, i.e. the value is 0 for the first segment, 1 for the
next and so on. The receiving entity may use the segment number in order to
recognize the start of a new BSSLAP message and verify that all segments were
reliably transferred.
In case of handover interrupting the information transfer procedure, the
exception procedures described in 3GPP TS 43.059 shall be used.
## 5.3 Connectionless Information Transfer
The Connectionless Information transfer procedure is applicable to the Lb and
Lp interfaces. It enables two way transfer of LLP messages between an SMLC and
a Type B LMU. The procedure also enables two way transfer of SMLCPP messages
between two SMLCs. The initiator of the procedure can be a BSS or SMLC. The
procedure makes use of SCCP connectionless signaling.
### 5.3.1 Successful Operation
An SMLC or BSS needing to transfer an LLP message concerning a Type B LMU or
an SMLCPP message sends a BSSMAP-LE Connectionless Information message to a
recipient carrying the following parameters:
\- Source Entity (M);
\- Destination Entity (M);
\- APDU (M);
\- Segmentation (C);
\- Return Error Request (O).
The source entity identifies the sender. The recipient entity identifies the
final destination. The Segmentation IE provides segmentation and message
identification for a segmented APDU. The Return Error Request may be included
to request notification in the event of unsuccessful transfer and indicate the
type of notification needed. If the recipient entity is not the final
destination, the recipient shall transfer the BSSMAP-LE Connectionless
Information message to either the final destination or an intermediate entity
capable of onward transfer to the final destination.
### 5.3.2 Unsuccessful Operation
If the message cannot be transferred by an intermediate entity or destination
entity (e.g. reassembly of a segmented message fails) and the Return Error
Request is not included, the message shall be discarded. If the Return Error
Request is included, the intermediate or destination entity shall, depending
on the Return Error Request type, send a BSSMAP‑LE Connectionless Information
message to, or towards, the original source containing the following
parameters:
\- Source Entity (M);
\- Destination Entity (M);
\- APDU (C);
\- Segmentation (C);
\- Return Error Cause (M).
The Source entity shall indicate the Destination Entity in the original
received message. The Destination Entity shall indicate the Source Entity in
the original message. The Return Error cause shall indicate the reason for
unsuccessful transfer. The APDU and Segmentation IEs shall, depending on the
Return Error Request type, contain any originally received APDU and
Segmentation IEs, respectively.
If a received BSSMAP-LE Connectionless Information message containing a Return
Error Cause cannot be transferred by an intermediate entity, it shall be
discarded with no return error message.
### 5.3.3 Abnormal Conditions
At an intermediate entity, if a received BSSMAP-LE Connectionless Information
message contains unrecognized or invalid information, the message shall be
discarded.
At the recipient entity, if a received BSSMAP-LE Connectionless Information
message contains invalid or unrecognized information as defined for BSSAP-LE,
the message shall be discarded.
### 5.3.4 Segmentation
The Segmentation parameter shall not be included if the APDU is not segmented.
If the size of an APDU containing an embedded SMLCPP message is too large to
fit into one BSSMAP-LE message, the sending entity divides the SMLCPP message
to a necessary number of BSSMAP-LE messages each containing an APDU IE and a
Segmentation IE. In the APDU IE it includes as many octets as possible.
The segmentation IE contains a segment number, an indication of the final
segment and the message ID. The order number of a segment in the Segment
Number field in the APDU IE is incremented by one starting from zero, i.e. the
value is 0 for the first segment, 1 for the next and so on. The receiving
entity recognizes that a segment is missing or duplicated, when:
\- There is more than one segment with the same segment number and same
Message ID.
\- The segment number does not increase by steps of one starting from zero.
If the recipient recognizes a missing or duplicated element, it shall discard
the entire message (i.e. all received segment with the message ID).
The message identity in the Message ID field in the APDU IE is used to
recognize a particular message to which that segment belongs. The sending
entity can select any of the available values (0-65535) that is not currently
used between it and the receiving entity.
If an APDU segment is received with Return Error cause IE (due to invocation
of the return error option), reassembly does not apply and the APDU segment
and error cause maybe returned to the original source application.
## 5.4 LMU Connection Establishment
The LMU Connection Establishment procedure is applicable to the Ls interface.
Its purpose is to establish a signaling connection between an SMLC and Type A
LMU via the visted MSC for the LMU. The procedure can be initiated by either
the SMLC or MSC. The procedure makes use of SCCP connection oriented signaling
on the Ls interface.
### 5.4.1 LMU Connection Establishment initiated by the SMLC
#### 5.4.1.1 Successful Operation
The SMLC sends a BSSMAP-LE LMU Connection Request message to the VMSC for the
LMU. This message contains the following parameters.
\- IMSI (M).
\- Sender Address (O).
\- Security (C).
The IMSI identifies the LMU. The sender address, if included, identifies the
SMLC. The Security parameter shall be included if authentication or ciphering
of the LMU are required. On receipt of this message, the MSC shall attempt to
establish a signalling link to the LMU (refer to 3GPP TS 43.071).
Authentication and ciphering shall be invoked if requested by the SMLC. Once
the signaling link has been established, the MSC shall return a BSSMAP-LE LMU
Connection Accept to the SMLC with the following parameters.
\- Call Number (O).
The call number shall be included if the MSC has the capability to support
signaling to an LMU using a traffic channel (refer to 3GPP TS 43.071).
#### 5.4.1.2 Unsuccessful Operation
If the LMU is not recognized in the MSC (e.g. no VLR record) or a signaling
link cannot be setup to the LMU (e.g. paging of the LMU fails) or
authentication or ciphering cannot be performed when requested by the SMLC,
any signaling link to the LMU shall be released, if not required for other MM
or CM procedures and a BSSMAP-LE LMU Connection Reject shall be returned to
the SMLC with the following parameters.
\- Reject Cause (M).
#### 5.4.1.3 Abnormal Conditions
If the SMLC or MSC detects release of the SCCP connection on the Ls interface
for an LMU, the connection establishment procedure shall be considered to have
failed and any associated resources may be released.
### 5.4.2 LMU Connection Establishment initiated by the MSC
#### 5.4.2.1 Successful Operation
The MSC shall initiate the LMU connection establishment procedure when no LMU
connection to the SMLC currently exists and the MSC receives a CM Service
Request from the LMU specifying the LCS service. The MSC shall then send a
BSSMAP-LE LMU Connection Request message to the SMLC associated with either
the IMSI or current cell location of the LMU. This message shall contain the
following parameters.
\- IMSI (M).
\- Sender Address (M).
\- Call Number (C).
The IMSI identifies the LMU. The sender address identifies the MSC. The call
number shall be included if the MSC has the capability to support signaling to
an LMU using a traffic channel (refer to 3GPP TS 43.071). On receipt of this
message, the SMLC shall return a BSSMAP-LE LMU Connection Accept to the MSC
with the following parameters.
\- Security (C).
The Security parameter shall be included if authentication or ciphering of the
LMU are required On receipt of this message, the MSC shall perform
authentication and/or ciphering if requested by the SMLC and shall complete
the establishment of an MM connection to the LMU to support LCS.
#### 5.4.2.2 Unsuccessful Operation
If the LMU is not recognized in the SMLC or a signaling connection cannot be
supported (e.g. due to congestion), a BSSMAP-LE LMU Connection Reject shall be
returned to the MSC with the following parameters.
\- Reject Cause (M).
The MSC shall then reject the CM service request from the LMU.
#### 5.4.2.3 Abnormal Conditions
If the SMLC or MSC detects release of the SCCP connection on the Ls interface
for an LMU, the connection establishment procedure shall be considered to have
failed and any associated resources may be released.
## 5.5 (void)
## 5.6 DTAP-LE Information Transfer
The DTAP-LE Information transfer procedure is applicable to the Lb interface.
It supports two way LLP message transfer between an SMLC and Type A LMU. The
procedure is only valid when a signaling connection between an SMLC and Type A
LMU has been established. The procedure uses SCCP connection oriented
signaling using the SCCP connection previously established between the SMLC
and BSC when the signaling connection between the SMLC and LMU was
established.
### 5.6.1 DTAP-LE Information Transfer Initiated by the SMLC
The SMLC initiates the procedure when it has an LLP message to transfer to a
type A LMU. The message may first be segmented. The SMLC shall then transfer
each LLP segment to the BSC inside a DTAP-LE REGISTER, FACILITY or RELEASE
COMPLETE message. The usage of these messages is as defined in 3GPP TS 44.071.
The BSC relays each DTAP-LE message to the LMU.
### 5.6.2 DTAP-LE Information Transfer Initiated by the BSC
The BSC initiates the procedure when a DTAP message is received from an LMU.
The BSC then relays the DTAP message to the SMLC.
## 5.7 Reset
The reset procedure is an optional procedure within a PLMN applicable to the
Lb interface. It enables an SMLC or BSS that has undergone a failure with loss
of memory of LMU signalling connections and location service transactions to
indicate this to a partner entity (SMLC or BSS). The recipient entity can then
release its own connection and transaction resources. The reset procedure may
not be applicable when only a limited part of an SMLC or BSS has suffered a
failure, since error recovery procedures specific to individual connections
and transactions may then be used.
### 5.7.1 Normal Operation
In the event of a failure at an SMLC or BSS that results in the loss of LMU
connection information and location service information, a Reset message may
be sent to the partner SMLC or BSS across the Lb interface. The message
carries no parameters and is sent using connectionless SCCP procedures. The
sending entity shall ensure that all information on LMU connections and
location service transactions to the other entity is reinitialized to indicate
no existing connections and transactions.
On receiving a Reset message, the recipient SMLC or BSS shall clear all
references and state information for LMU connections and location service
transactions to the sending entity and shall release any associated resources
including, in the case of a recipient BSS, any signaling connections or
circuit connections to LMUs controlled by a sending SMLC. The recipient entity
shall then return a Reset Acknowledge message.
For a reset on the Lb interface where the SMLC and BSS support circuit
connections to LMUs (in addition to signaling connections), the entity that
does not control assignment of circuits shall initiate blocking procedures
(Block or Circuit Group Block procedure as defined in 3GPP TS 48.008) for all
circuits that are locally blocked on its own side. The initiation of blocking
may occur before sending or receipt, whichever applies, of the Reset
Acknowledge.
### 5.7.2 Abnormal Conditions
If an initiating SMLC or BSS receives no response to a Reset message following
an O&M administered time period, it shall resend the Reset message. For
successive no response conditions, sending shall occur a maximum of \"n\"
times, where \"n\" is an O&M administered parameter. Following \"n\"
unsuccessful, reset attempts, the procedure shall be terminated and
maintenance shall be informed.
## 5.8 Perform Location Information
The Perform Location Information procedure is applicable to the Lb interface.
It enables an SMLC to be informed by the BSS when a target MS in the PS domain
(A/Gb-mode) has changed serving cell. The procedure is only valid while a
location request procedure for the target MS is ongoing. The procedure makes
use of SCCP connection oriented signaling on the Lb interface and uses the
same SCCP connection as the location request procedure for the particular
target MS.
The BSS initiates the procedure when a location request procedure for the
target MS is ongoing in the PS domain and the BSS has determined that the
target MS has changed cell (e.g. by reception of a BSSGP FLUSH-LL PDU). The
BSS sends a Perform Location Information message to the SMLC. This procedure
may also optionally be initiated by the BSS for Intra-BSC handover during
positioning of a target MS in the CS domain when no BSSLAP procedure is
ongoing. The message contains the following mandatory (M) and conditional (C)
information.
\- Cell Identifier (M).
\- BSSLAP APDU (C).
The BSSLAP APDU shall be included and include the Timing Advance value, if
that value is available for the target MS in the new cell.
On receiving the Perform Location Information message, the SMLC shall store
the new Cell Identifier value and the Timing Advance value, if provided.
# 6 Usage of BSSAP-LE and BSSAP on the Lb Interface
## 6.1 Applicable Message Sets
The following BSSAP-LE message sets are applicable to the Lb interface between
an SMLC and BSS:
\- All DTAP-LE messages;
\- All BSSMAP-LE positioning messages;
\- All BSSMAP-LE information messages;
\- All BSSMAP-LE general messages.
The following BSSMAP messages defined in 3GPP TS 48.008 are applicable to the
Lb interface to support signaling to a Type A LMU using an SDCCH:
\- Cipher Mode Command (SMLC to BSC);
\- Cipher Mode Complete (BSC to SMLC);
\- Cipher Mode Reject (BSC to SMLC);
\- Classmark Update (BSC to SMLC);
\- Clear Command (SMLC to BSC);
\- Clear Complete (BSC to SMLC);
\- Clear Request (BSC to SMLC);
\- Complete Layer 3 Information (BSC to SMLC);
\- Confusion (BSC to SMLC);
\- Handover Required (BSC to SMLC);
\- Handover Required Reject (SMLC to BSC);
\- Handover Performed (BSC to SMLC);
\- Paging (SMLC to BSC).
The following additional BSSMAP messages defined in 3GPP TS 48.008 are
applicable to the Lb interface to support signaling to a Type A LMU using a
TCH:
\- Assignment Request (SMLC to BSC);
\- Assignment Complete (BSC to SMLC);
\- Assignment Failure (BSC to SMLC);
\- Block (two way);
\- Blocking Acknowledge (two way);
\- Unblock (two way);
\- Unblocking Ack. (two way);
\- Unequipped circuit (two way).
The following DTAP messages defined in 3GPP TS 24.008 and 3GPP TS 44.018 are
applicable to the Lb interface to support signaling to a Type A LMU using an
SDCCH:
\- RR Paging Response;
\- All MM Messages.
The following additional CM level DTAP messages defined in 3GPP TS 24.008 are
applicable to the Lb interface to support signaling to a Type A LMU using a
TCH.
\- Call Confirmed (LMU to SMLC).
\- Connect (LMU to SMLC).
\- Connect Acknowledge (SMLC to LMU).
\- Setup (SMLC to LMU).
\- Disconnect (two way).
\- Release (two way).
\- Release Complete (two way).
## 6.2 MTP Functions
Except where defined otherwise in the present document, MTP and M3UA/SCTP
requirements on the Lb interface for the BSS are the same as those defined for
the A interface in 3GPP TS 48.006 for the BSC. MTP and M3UA/SCTP requirements
on the Lb interface for the SMLC are the same as those defined for the A
interface in 3GPP TS 48.006 for the MSC. STP functions are not required in the
SMLC and a single signaling link set may be used between the BSS and SMLC. The
BSS shall be homed to a single SMLC and shall only use the Lb signaling
interface for signaling communication with the SMLC.
## 6.3 SCCP Functions
### 6.3.1 General
Except where defined otherwise in the present document, SCCP requirements on
the Lb interface for the BSS are the same as those defined for the A interface
in 3GPP TS 48.006 for the BSC. SCCP requirements on the Lb interface for the
SMLC are the same as those defined for the A interface in 3GPP TS 48.006 for
the MSC. Requirements concerning support of a type A LMU are the same as those
in 3GPP TS 48.006 regarding support of a normal MS. In particular, usage of
SCCP to transfer DTAP-LE messages between a type A LMU and SMLC are the same
as those regarding transfer of other DTAP messages.
### 6.3.2 Modifications for Connectionless SCCP
Connectionless SCCP messages and procedures are used to transfer BSSMAP-LE
Connectionless Information messages and those BSSMAP messages applicable to
the Lb interface for which connectionless SCCP transfer is defined in 3GPP TS
48.008. Refer to 3GPP TS 43.059 for a description of the procedures in the
SMLC and BSC. SCCP protocol class 1 shall be used when multiple BSSMAP-LE
messages are transferred containing segments of a single fragmented LLP or
SMLCPP message.
### 6.3.3 Modifications for Connection Oriented SCCP
> Use of connection oriented SCCP messages and procedures on the Lb interfaces
> to support signaling access to a type A LMU using DTAP-LE, DTAP and BSSMAP
> messages is the same as that defined in 3GPP TS 48.006 on the A interface to
> support access to a normal MS.
>
> To support positioning of a target MS, connection oriented SCCP messages and
> procedures using protocol class 2 shall be used to transfer BSSMAP-LE
> positioning messages and BSSMAP-LE Connection Oriented Information messages
> over the Lb interface. A separate dedicated SCCP connection shall be used to
> support positioning for each target MS. Connection establishment shall be
> instigated by the BSS when the positioning attempt commences. Connection
> release shall be instigated by either the BSS or SMLC when the positioning
> attempt has been completed or has failed. The SMLC is primarily responsible
> for ensuring release -- e.g. in the event that the BSS waits for the SMLC to
> instigate release.
>
> Transfer of BSSMAP-LE messages using an SCCP connection to support
> positioning of a particular target MS is shown in the following figure. In
> particular, a BSSMAP-LE message shall be included in the data field of the
> SCCP CR and a BSSMAP-LE message may be included in the data field of an SCCP
> CC, CREF or RLSD message.
Figure 6.3.3: SCCP Connection Oriented Signaling on Lb Interface for
Positioning
### 6.3.4 Contents of the SCCP Data Field
> The contents of the SCCP data field are the same as that defined for the A
> interface in 3GPP TS 48.006 for MSC-BSC signaling. In particular, the same
> conventions are used to transfer and discriminate between any BSSAP and DTAP
> message contained within the SCCP data field. Since all BSSAP-LE messages
> applicable to the Lb interface use the same encoding as for the A interface,
> the conventions used to discriminate a BSSMAP message are applicable to any
> BSSMAP-LE message on the Lb interface, while the conventions for a DTAP
> message apply to any DTAP-LE message.
### 6.3.5 Abnormal Conditions
If a user-out-of-service information or signalling-point-inaccessible
information is received by a BSS or SMLC, no new attempt to establish SCCP
connections towards the affected point code shall be started until the
corresponding user-in-service information or signalling-point-accessible
information is received.
When a user-out-of-service information or signalling-point-inaccessible is
received, an optional timer may be started. If the timer expires all the SCCP
connections towards the affected point code shall be released. When the user-
in-service or signalling-point-accessible is received, the timer is stopped.
If an SCCP connection is released, the optional timer expires or a connection
refusal is received, any dependent BSSAP-LE procedure between the SMLC and BSS
shall be terminated and, at a BSS, any associated SCCP connection or location
service transaction to an MSC, or any associated signaling or circuit
connection to an LMU, shall be released using appropriate signalling
procedures.
# 7 (void)
# 8 Use of BSSAP-LE on the Lp Interface
## 8.1 Applicable Message Sets
The following BSSAP-LE messages are applicable to the Lp interface between an
SMLC and a peer SMLC.
\- BSSMAP-LE Connectionless Information message.
## 8.2 MTP Functions
SS7 signaling on the Lp interface may be supported using 56 kbps or 64 kbps
digital signaling channels. These may be supported within either E1 or T1
physical links.
Two SMLCs may be connected by direct point-to-point SS7 signaling links or
links may be employed via intermediate STPs. Alternatively, signaling transfer
between two SMLCs may be supported via intermediate BSSs and/or MSCs using the
Lb and/or Ls interfaces. Signaling requirements to support message transfer on
the Lp interface via an intermediate Lb interface are the same as those
defined elsewhere in the present document for these interfaces. This sub-
clause defines the requirements applicable to direct SMLC-SMLC SS7 links and
SS7 links from an SMLC to an STP.
For E1 links or where ITU-T/ITU SS7 signaling is applicable, the MTP functions
as specified in ITU-T Recommendations Q.702, Q.703, Q.704 and Q.707 are
applicable. For T1 links or where ANSI SS7 signaling is applicable, the MTP
functions as specified in ANSI T1.111 are applicable. Only the requirements in
these recommendations for a signaling end point are applicable.
Where an SMLC has no signaling links to an STP, certain exceptions and
modifications to normal ITU-T and ANSI requirements may be applied within a
PLMN administration.
It is recommended that when IP transport (via M3UA/SCTP) is used, the data
link layer is implemented using Ethernet. A node using IP transport having
interfaces connected via low bandwidth PPP links like E1/T1 shall also support
IP Header Compression [25] and the PPP extensions ML/MC-PPP [26], [27]. In
this case, the negotiation of header compression [25] over PPP shall be
performed according to [28].
## 8.3 SCCP functions
### 8.3.1 General
For E1 links or where ITU-T/ITU SS7 signaling is applicable, the SCCP
functions as specified in either ITU-T Blue Book Recommendations Q.711, Q.712,
Q.713 and Q.714 or ITU White Book Recommendations Q.711, Q.712, Q.713 and
Q.714 are applicable, as amended by the exceptions and modifications defined
here. For T1 links or where ANSI SS7 signaling is applicable, the MTP
functions as specified in ANSI T1.112 are applicable, as amended by the
exceptions and modifications defined here. For M3UA/SCTP signalling, functions
as specified in 3GPP TS 29.202 [29] are applicable, as amended by the
exceptions and modifications defined here.
### 8.3.2 Allowed Exceptions to ITU-T Recommendations Q.711-714
Only the following SCCP messages are applicable to the Lp interface:
\- Inactivity Test (IT);
\- Subsystem Allowed (SSA);
\- Subsystem Prohibited (SSP);
\- Subsystem Status Test (SST);
\- Unitdata (UDT);
\- Unitdata Service (UDTS).
Support of only SCCP protocol classes 0 and 1 is required.
The SCCP called party address in a UDT may contain only the subsystem number
(SSN) or a signaling point code (SPC) plus SSN or a global title. Use of a
global title is not required for SMLC to SMLC signaling within the same PLMN.
SSN values applicable to the Lp interface are defined in 3GPP TS 23.003.
### 8.3.3 Allowed Exceptions to ANSI T1.112
Only the following SCCP messages are applicable to the Lp interface:
\- Inactivity Test (IT);
\- Subsystem Allowed (SSA);
\- Subsystem Prohibited (SSP);
\- Subsystem Status Test (SST);
\- Unitdata (UDT);
\- Unitdata Service (UDTS).
Support of only SCCP protocol classes 0 and 1 is required.
The SCCP called party address in a UDT may contain only the subsystem number
(SSN) or a signaling point code (SPC) plus SSN or a global title. Use of a
global title is not required for SMLC to SMLC signaling within the same PLMN.
SSN values applicable to the Lp interface are defined in 3GPP TS 23.003.
### 8.3.4 Usage of Connectionless SCCP
Connectionless SCCP messages and procedures shall be used to transfer BSSMAP-
LE Connectionless Information messages. Refer to 3GPP TS 43.059 for a
description of the procedures in the SMLC. SCCP protocol class 1 shall be used
when multiple BSSMAP-LE messages are sent containing segments of a single
fragmented SMLCPP message.
### 8.3.5 Usage of Connection Oriented SCCP
> Connection oriented SCCP messages and procedures are not applicable to the
> Lp interface.
### 8.3.6 Contents of the SCCP Data Field
The contents of the SCCP data field are shown in the following figure.
+-----------+----------------------------+---+---+---+---+---+---+-----+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +-----------+----------------------------+---+---+---+---+---+---+-----+ | Octet 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | D=0 | +-----------+----------------------------+---+---+---+---+---+---+-----+ | Octet 2 | Length indicator = n | | | | | | | | +-----------+----------------------------+---+---+---+---+---+---+-----+ | Octet 3 | BSSMAP-LE Message Contents | | | | | | | | | | | | | | | | | | | to | | | | | | | | | | | | | | | | | | | | Octet n+2 | | | | | | | | | +-----------+----------------------------+---+---+---+---+---+---+-----+
Figure 8.3.6-1: SCCP Data Field for a BSSMAP-LE Message
The Discrimination Indicator is coded in bit 1 of octet one and indicates the
type of the BSSAP-LE message.
* * *
Discrmination Indicator BSSAP-LE Message Type 0 BSSMAP-LE
* * *
The length indicator is coded in one octet, and is the binary representation
of the number of octets of the subsequent BSSMAP-LE message content.
NOTE: The contained BSSMAP-LE message may itself contains an APDU containing
either a complete LLP or SMLCPP message or a part of segmented SMLCPP message.
# 9 Message Functional Definitions and Contents
For each message there is, in this sub-clause, a table listing the signalling
elements in their order of appearance in the transmitted message.
## 9.1 BSSMAP-LE PERFORM LOCATION REQUEST message
This message is sent to request a location estimate for a target MS and
contains sufficient information to enable location according to the required
QoS using any positioning method supported by the PLMN and, where necessary,
MS. The message is also used to request LCS assistance data transfer to an MS
or request deciphering keys for LCS broadcast assistance data. The message can
be sent from the BSS to the SMLC.
Table 9.1: BSSMAP-LE PERFORM LOCATION REQUEST message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 Location Type Location Type M TLV 3-4 Cell Identifier
Cell Identifier M TLV 3-10 Classmark Information Type 3 Classmark Information
Type 3 O TLV 2-n LCS Client Type LCS Client Type C TLV 3 Chosen Channel Chosen
Channel O TLV 2-n LCS Priority LCS Priority O TLV 3 LCS QoS LCS QoS O TLV 6
Requested GPS Assistance Data Requested GPS Assistance Data O TLV 3-n BSSLAP
APDU APDU O TLV 2-n LCS Capability LCS Capability O TLV 3-n Packet Measurement
Report Packet Measurement Report O TLV 2-n Measured Cell Identity List Cell
Identity List O TLV 6-n IMSI IMSI O (Note 1) TLV 5-10 IMEI IMEI O (Note 1) TLV
10 GANSS Location Type GANSS Location Type C TLV 3 Requested GANSS Assistance
Data Requested GANSS Assistance Data O TLV 3-n NOTE 1: The IMSI should be sent
preferably if known. The IMEI could be sent if the IMSI is not known, or in
addition to the IMSI for the purpose of allowing correlation between the two
identities.
* * *
### 9.1.1 Location Type
This parameter defines the type of location information being requested.
### 9.1.2 Cell Identifier
This parameter gives the current cell location of the target MS. The format
shall either be the cell global identification or the LAC plus CI form.
### 9.1.3 Classmark Information Type 3
This parameter indicates the positioning methods supported by the MS as
obtained from the MS Classmark 3 received earlier from the target MS.
### 9.1.4 LCS Client Type
This parameter defines the type of the originating LCS Client. It shall be
included if the Location Type indicates a request for a location estimate and
may be included in other cases to assist an SMLC to appropriately prioritize a
location request.
### 9.1.5 Chosen Channel
This parameter defines the type of radio channel currently assigned to the
target MS.
### 9.1.6 LCS Priority
This parameter defines the priority of the location request.
### 9.1.6a LCS QoS
This parameter provides the required Quality of Service for the LCS Request.
Quality of Service may include horizontal accuracy, vertical accuracy and
allowed response time.
### 9.1.7 Requested GPS Assistance Data
This parameter identifies the specific GPS assistance data that may be
requested.
### 9.1.8 BSSLAP APDU
This parameter provides additional measurements (e.g. timing advance and
measurement report) in a BSSLAP TA Layer3 message for the target MS from the
BSS. The measurements are contained inside a BSSLAP APDU. This parameter shall
be included for location requests for the PS Domain in A/Gb-mode when the
timing advance value is available in the BSS.
### 9.1.9 LCS Capability
This parameter provides information about the LCS capabilities of the target
MS. This IE and the Classmark Information Type 3 IE are mutually exclusive.
### 9.1.10 Packet Measurement Report
This parameter provides information about the neighbour measurements that the
target MS has performed for a positioning request in the PS domain.
### 9.1.11 Measured Cell Identity List
This parameter provides information about the cell identities relative to the
packet measurement report IE.
### 9.1.12 IMSI
This parameter identifies the IMSI of the target Mobile Station.
### 9.1.13 IMEI
This parameter identifies the IMEI of the target Mobile Station.
### 9.1.14 GANSS Location Type
This parameter identifies the GANSS Location type.
### 9.1.15 Requested GANSS Assistance Data
This parameter identifies the specific GNSS (e.g. Galileo) assistance data
that may be requested.
## 9.2 BSSMAP-LE PERFORM LOCATION RESPONSE message
This message is sent in response to a BSSMAP-LE Perform Location Request to
return a successful location estimate for a target MS or to indicate some
failure in obtaining this. The message is also sent in response to a BSSMAP-LE
Perform Location Request to return deciphering keys or an indication that LCS
assistance data has been successfully delivered to an MS. The message can be
sent from the SMLC to the BSS.
Table 9.2: BSSMAP-LE PERFORM LOCATION RESPONSE message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 Location Estimate Geographic Location C TLV 2-22
Positioning Data Positioning Data O TLV 2-n Deciphering Keys Deciphering Keys
O TLV 17 LCS Cause LCS Cause O TLV 3-4 Velocity Data Velocity Data O TLV 6-9
GANSS Positioning Data GANSS Positioning Data O TLV 3-n
* * *
### 9.2.1 Location Estimate
This parameter provides a location estimate for the target MS in the case of a
successful location attempt.
### 9.2.2 Positioning Data
This parameter provides additional information for the positioning attempt
from the SMLC.
### 9.2.3 Deciphering Keys
This parameter provides two deciphering keys that can be used to decode LCS
broadcast assitance data by the MS. The SMLC shall provide the current
deciphering key for the MS\'s present location. The SMLC shall also provide
the next deciphering key applicable after the current deciphering key .
### 9.2.4 LCS Cause
The LCS Cause is included if and only if a requested location estimate was not
successfully obtained (e.g. location estimate not available), requested
deciphering keys were not successfully returned or requested LCS assistance
data was not successfully transferred to the MS. The parameter provides the
reason for the failure. If the LCS Cause is included, the Location Estimate
and Deciphering Key shall not be included.
### 9.2.5 Velocity Data
This parameter gives an estimate of the velocity of an MS and for certain
encodings the uncertainty of the estimate. The estimate is expressed in terms
of any of the velocity descriptions defined by 3GPP TS 23.032 and is composed
of the velocity type plus the encoding of that type.
### 9.2.6 GANSS Positioning Data
This parameter provides additional information for the positioning attempt in
case where GANSS has been used. It describes the nature of GANSS used.
## 9.3 BSSMAP-LE PERFORM LOCATION ABORT message
This message is sent by the instigator of a location request to abort the
positioning attempt or the request for assistance data or deciphering keys.
This message can be sent from the BSS to the SMLC.
Table 9.3: BSSMAP-LE PERFORM LOCATION ABORT message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 LCS Cause LCS Cause M TLV 3-4
* * *
### 9.3.1 LCS Cause
The LCS Cause provides the reason for the aborting the location attempt.
## 9.4 (void)
## 9.5 (void)
## 9.6 (void)
## 9.7 (void)
## 9.8 BSSMAP-LE CONNECTION ORIENTED INFORMATION message
This message is sent in association with an existing signaling connection
between an SMLC and another entity to transfer information between the SMLC
and other entity belonging to a higher level protocol. The message can be sent
from a BSS to an SMLC and from an SMLC to a BSS.
Table 9.8: BSSMAP-LE CONNECTION ORIENTED INFORMATION message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 BSSLAP APDU APDU M TLV 3-n Segmentation Segmentation C
TLV 3
* * *
### 9.8.1 BSSLAP APDU
This parameter contains a BSSLAP message.
### 9.8.2 Segmentation
This parameter contains segmentation information for a segmented APDU. The
parameter shall not include message information. The parameter shall be
included if and only if the BSSLAP APDU is segmented.
## 9.9 BSSMAP-LE CONNECTIONLESS INFORMATION message
This message conveys signaling information associated with a higher protocol
level between an SMLC and another entity when there is no existing signaling
connection association. The message can be sent from a BSC to an SMLC, from an
SMLC to a BSC and from an SMLC to another SMLC.
Table 9.9: BSSMAP-LE CONNECTIONLESS INFORMATION message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 Source Identity Network Element Identity M TLV 3-n
Destination Identity Network Element Identity M TLV 3-n APDU APDU O TLV 3-n
Segmentation Segmentation C TLV 5 Return Error Request Return Error Request O
TLV 2 Return Error Cause Return Error Cause O TLV 3
* * *
### 9.9.1 Source Identity
This parameter identifies the original source of the message. The original
source can either be an SMLC or a Type B LMU. The source is identified by
association with either a location area or a cell site.
### 9.9.2 Destination Identity
This parameter identifies the final destination of the message. The final
destination can either be an SMLC or a Type B LMU. The destination is
identified by association with either a location area or a cell site.
### 9.9.3 APDU
This parameter contains an embedded APDU. For information transfer between an
SMLC and Type B LMU this shall be an LLP APDU. For information transfer
between two peer SMLCs, this shall be an SMLCPP APDU.
### 9.9.4 Segmentation
This parameter contains segmentation and message information for a segmented
APDU. The parameter shall be included if and only if a segmented APDU is
present.
### 9.9.5 Return Error Request
This parameter may be included to request an error response if BSSMAP-LE
message cannot be delivered successfully to its final destination. This
parameter shall not be included if the Return Error cause is present.
### 9.9.6 Return Error Cause
This parameter indicates an error response for a BSSMAP-LE connectionless
information message that could not be delivered to its final destination. The
APDU should be present and the same as the APDU in the original undelivered
message. The source and destination identities shall be included and the same
as the destination and source identities, respectively, in the original
undelivered message.
## 9.10 BSSMAP-LE RESET message
This message is sent to indicate a failure in the sending entity with loss of
memory of LMU connections and location service transactions that were
established or were being established. The message may be sent from an SMLC to
a BSS and from a BSS to an SMLC.
This message is sent as a connectionless SCCP message.
Table 9.10: BSSMAP-LE RESET message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 Cause Cause M TLV 3-4
* * *
## 9.11 BSSMAP-LE RESET ACKNOWLEDGE message
This message is sent in response to a Reset message to indicate that
references and resources associated with LMU connections and location service
transactions towards the entity sending the Reset have been released. The
message may be sent from an SMLC to a BSS and from a BSS to an SMLC.
This message is sent as a connectionless SCCP message.
Table 9.11: BSSMAP-LE RESET ACKNOWLEDGE message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1
* * *
## 9.12 BSSMAP-LE PERFORM LOCATION INFORMATION message
This message is sent from the BSS to the SMLC to notify the SMLC that the
target MS is now located in a new cell.
Table 9.12: BSSMAP-LE PERFORM LOCATION INFORMATION message content
* * *
Information element Type/Reference Presence Format Length in octets Message
type Message Type M V 1 Cell Identifier Cell Identifier M TLV 3-10 BSSLAP APDU
APDU O TLV 2-n
* * *
### 9.12.1 Cell Identifier
This parameter gives the new cell location of the target MS. The format shall
either be the cell global identification or the LAC plus CI form.
### 9.12.2 BSSLAP APDU
This parameter provides additional measurements (timing advance) in a BSSLAP
TA Layer3 message for the target MS from the BSS. The measurements are
contained inside a BSSLAP APDU.
# 10 Message format and information element coding
This sub-clause specifies the coding of the Information Elements used by the
BSSAP-LE protocol. The spare bits in the coding of an IE shall be set to zero
by the sender and shall be ignored by the receiver.
All unassigned codes (whether omitted or explicitely _Unassigned_ in the text)
shall be treated as unknown.
The following conventions are assumed for the sequence of transmission of bits
and bytes:
\- Each bit position is marked as 1 to 8. Bit 1 is the least significant bit
and is transmitted first.
\- In an element octets are identified by number, octet 1 is transmitted
first, then octet 2 etc.
When a field extends over more than one octet, the order of bit values
progressively decreases as the octet number increases. The least significant
bit of the field is represented by the lowest numbered bit of the highest
numbered octet of the field.
\- For variable length elements a length indicator is included, this indicates
the number of octets following in the element.
\- All fields within Information Elements are mandatory unless otherwise
specified. The Information Element Identifier shall always be included.
All spare bits are set to 0.
For any information element of format TLV, the length indicator octet, as in
3GPP TS 48.008, defines the number of octets in the information element that
follow the length indicator octet.
## 10.1 Message type
Message type uniquely identifies the message being sent. It is a single octet
element, mandatory in all messages.
Table 10.1: Message type information element
* * *
Category 8 7 6 5 4 3 2 1 Message Type 0 0 0 0 0 0 0 0 Reserved. POSITIONING
MESSAGES  
0 0 1 0 1 0 1 1 BSSMAP-LE PERFORM LOCATION REQUEST 0 0 1 0 1 1 0 1 BSSMAP-LE
PERFORM LOCATION RESPONSE 0 0 1 0 1 1 1 0 BSSMAP-LE PERFORM LOCATION ABORT 0 0
1 0 1 1 1 1 BSSMAP-LE PERFORM LOCATION INFORMATION Reserved (NOTE)  
0 0 0 0 0 0 0 1 Reserved (note) 0 0 0 0 0 0 1 0 Reserved (note) 0 0 0 0 0 0 1
1 Reserved (note) 0 0 0 0 0 1 0 0 Reserved (note) INFORMATION MESSAGES  
0 0 1 0 1 0 1 0 BSSMAP-LE CONNECTION ORIENTED INFORMATION 0 0 1 1 1 0 1 0
BSSMAP-LE CONNECTIONLESS INFORMATION GENERAL MESSAGES  
0 0 1 1 0 0 0 0 RESET 0 0 1 1 0 0 0 1 RESET ACKNOWLEDGE NOTE: These values of
the codepoints shall not be used as they were used in an earlier version of
the protocol.
* * *
## 10.2 Information Element Identifiers
The next list shows the coding of the Information Element Identifiers used in
the present document.
Table 10.2: Information Element Identifier coding
* * *
8 7 6 5 4 3 2 1 Information element Reference 0 0 1 1 1 1 1 0 LCS QoS 10.16 0
1 0 0 0 0 1 1 LCS Priority 10.15 0 1 0 0 0 1 0 0 Location Type 10.18 1 0 0 0 0
0 1 0 GANSS Location Type 10.33 0 1 0 0 0 1 0 1 Geographic Location 10.9 0 1 0
0 0 1 1 0 Positioning Data 10.20 1 0 0 0 0 0 1 1 GANSS Positioning Data 10.32
0 1 0 1 0 1 0 1 Velocity Data 10.30 0 1 0 0 0 1 1 1 LCS Cause 10.13 0 1 0 0 1
0 0 0 LCS Client Type 10.14 0 1 0 0 1 0 0 1 APDU 10.3 0 1 0 0 1 0 1 0 Network
Element Identity 10.19 0 1 0 0 1 0 1 1 Requested GPS Assistance Data 10.10 0 1
0 0 0 0 0 1 Requested GANSS Assistance Data 10.31 0 1 0 0 1 1 0 0 Deciphering
Keys 10.8 0 1 0 0 1 1 0 1 Return Error Request 10.21 0 1 0 0 1 1 1 0 Return
Error Cause 10.22 0 1 0 0 1 1 1 1 Segmentation 10.24 0 0 0 1 0 0 1 1 Classmark
Information Type 3 10.7 0 0 0 0 0 1 0 0 Cause 10.4 0 0 0 0 0 1 0 1 Cell
Identifier 10.5 0 0 1 0 0 0 0 1 Chosen Channel 10.6 0 0 0 0 0 0 0 0 IMSI 10.11
0 0 0 0 0 0 0 1 Reserved (note)  
0 0 0 0 0 0 1 0 Reserved (note)  
0 0 0 0 0 0 1 1 Reserved (note)  
0 0 0 0 0 1 0 0 Reserved (note)  
0 1 0 1 0 0 0 0 LCS Capability 10.26 0 1 0 1 0 0 0 1 Packet Measurement Report
10.27 0 1 0 1 0 0 1 0 Cell Identity List 10.28 1 0 0 0 0 0 0 0 IMEI 10.29
NOTE: These values of the codepoints shall not be used as they were used in an
earlier version of the protocol.
* * *
## 10.3 APDU
This is a variable length information element that conveys an embedded message
or message segment associated with a higher level protocol.
+-----------+---------------+-------------+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +-----------+---------------+-------------+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +-----------+---------------+-------------+---+---+---+---+---+---+ | Octet 2-3 | Length | | | | | | | | | | indicator | | | | | | | | +-----------+---------------+-------------+---+---+---+---+---+---+ | Octet 4 | Spare | Protocol ID | | | | | | | +-----------+---------------+-------------+---+---+---+---+---+---+ | Octet 5 | The rest of | | | | | | | | | | the | | | | | | | | | to | information | | | | | | | | | | element | | | | | | | | | Octet n | contains a | | | | | | | | | | message or | | | | | | | | | | message | | | | | | | | | | segment whose | | | | | | | | | | content and | | | | | | | | | | encoding are | | | | | | | | | | defined | | | | | | | | | | according to | | | | | | | | | | the protocol | | | | | | | | | | ID. | | | | | | | | +-----------+---------------+-------------+---+---+---+---+---+---+
Figure 10.3.1: APDU IE
Length Indicator (octets 2-3).
The most significant bit is bit 8 of Octet 2, and the least significant bit is
bit 1 in Octet 3. The length indicator defines the total number of octets
after length indicator.
Protocol ID (bits 7-1 of octet 4).
0000000 reserved
0000001 BSSLAP
0000010 LLP
0000011 SMLCPP
Embedded Message (octets 5-n)
* * *
BSSLAP the embedded message is as defined in 3GPP TS 48.071 LLP the embedded
message contains a Facility Information Element as defined in 3GPP TS 44.071
excluding the Facility IEI and length of Facility IEI octets defined in 3GPP
TS 44.071. SMLCPP the embedded message is as defined in 3GPP TS 48.031
* * *
## 10.4 Cause
This is a variable length information element indicating the reason for
sending a Reset message.
* * *
            8                                                                                                           7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 The rest of the information element is coded as the value part of the
Cause IE defined in 3GPP TS 48.008.
* * *
Figure 10.4.1: Cause IE
## 10.5 Cell Identifier
This is a variable length information element identifying a particular cell.
* * *
            8                                                                                                                     7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 The rest of the information element is coded as the value part of the
Cell Identifier IE defined in 3GPP TS 48.008.
* * *
Figure 10.5.1: Cell Identifier IE
## 10.6 Chosen Channel
This information element identifiers a type of radio interface channel.
* * *
            8                                                                                                                    7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 The rest of the information element is coded as the value part of the
Chosen Channel IE defined in 3GPP TS 48.008.
* * *
Figure 10.6.1: Chosen Channel IE
## 10.7 Classmark Information Type 3
This information element contains classmark information for a target MS
obtained from the MS Classmark 3 defined in 3GPP TS 24.008.
* * *
            8                                                                                                                                  7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 The rest of the information element is coded as the value part of the
Classmark Information Type 3 IE defined in 3GPP TS 48.008.
* * *
Figure 10.7.1: Classmark Information Type 3 IE
## 10.8 Deciphering Keys
This information element defines the deciphering keys which should used by the
MS to decode LCS broadcast assistance data. The parameter includes following
data fields. All fields shall be included:
+----------+-------------------------------+-----------+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 2 | Length indicator | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 3 | spare | Ciphering | | | | | | | | | | | | | | | | | | | | Key Flag | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 4 | Current Deciphering Key Value | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | ... | | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 10 | | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 11 | Next Deciphering Key Value | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | ... | | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+ | Octet 17 | | | | | | | | | +----------+-------------------------------+-----------+---+---+---+---+---+---+
Figure 10.8.1: Deciphering Keys IE
**Ciphering Key Flag (octet 3)**
This flag indicates the current Ciphering Key Flag used in the LCS assistance
data broadcast messages in the location area.
**Current Deciphering Key Value (octet 4 -- 10)**
Current Deciphering Key contains the 56 bit deciphering key that is currently
in use in location area for deciphering the LCS assistance data broadcast
messages.
**Next Deciphering Key (octet 11 -- 17)**
Next Deciphering Key contains the 56 bit deciphering key that will be used
next in location area for deciphering the LCS assistance data broadcast
messages.
## 10.9 Geographic Location
This is a variable length information element providing an estimate of a
geographic location.
+---------+---------------------+---+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 2 | Length indicator | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 3 | The rest of the | | | | | | | | | | information element | | | | | | | | | to | contains an octet | | | | | | | | | | sequence identical | | | | | | | | | Octet n | to that for | | | | | | | | | | Geographical | | | | | | | | | | Information defined | | | | | | | | | | in 3GPP TS 23.032.. | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+
Figure 10.9.1: Geographic Location IE
**Geographical Information (octet 3 to n)**
This parameter gives an estimate of the location of an MS in universal
coordinates and for certain shapes the accuracy of the estimate. The estimate
is expressed in terms of the geographical shapes defined by 3GPP TS 23.032.
and is composed of the type of shape plus the encoding of the shape itself.
Any type of shape defined in 3GPP TS 23.032 can be filled in in the Location
Estimate parameter.
## 10.10 Requested GPS Assistance Data
This is a variable length information element identifying the GPS assistance
data requested for an MS.
+------------+------------------------+---+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +------------+------------------------+---+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +------------+------------------------+---+---+---+---+---+---+---+ | Octet 2 | Length indicator | | | | | | | | +------------+------------------------+---+---+---+---+---+---+---+ | Octet 3 | H | G | F | E | D | C | B | A | +------------+------------------------+---+---+---+---+---+---+---+ | Octet 4 | P | O | N | M | L | K | J | I | +------------+------------------------+---+---+---+---+---+---+---+ | Octet 5 | Satellite related data | | | | | | | | | | | | | | | | | | | to | | | | | | | | | | | | | | | | | | | | Octet 8+2n | | | | | | | | | +------------+------------------------+---+---+---+---+---+---+---+
Figure 10.10.1: Requested GPS Assistance Data IE
Octet 3
bit A Almanac
0: Almanac is not requested
1: Almanac is requested
bit B UTC Model
0: UTC Model is not requested
1: UTC Model is requested
bit C Ionospheric Model
0: Ionospheric Model is not requested
1: Ionospheric Model is requested
bit D Navigation Model
0: Navigation Model is not requested -- octets 5 to 8+2n are not present
1: Navigation Model is requested -- octets 5 to 8+2n are present
bit E DGPS Corrections
0: DGPS Corrections are not requested
1: DGPS Corrections are requested
bit F Reference Location
0: Reference Location is not requested
1: Reference Location is requested
bit G Reference Time
0: Reference Time is not requested
1: Reference Time is requested
bit H Acquisition Assistance
0: Acquisition Assistance is not requested
1: Acquisition Assistance is requested
bit I Real-Time Integrity
0: Real-Time Integrity is not requested
1: Real-Time Integrity is requested
bit J Ephemeris Extension
0: Ephemeris Extension is not requested
1: Ephemeris Extension is requested
bit K Ephemeris Extension Check
0: Ephemeris Extension Check is not requested
1: Ephemeris Extension Check is requested
bits L through P are Spare bits
At least one of bits A, B, C, D, E, F, G, H or I, J or K, shall be set to the
value \"1\".
Bits D, J and K are mutually exclusive, only one of these can be set to one at
the same time.
+------------+----------+-------------+-------+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 5 | GPS Week | | Spare | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 6 | GPS Week | | | | | | | | | | | | | | | | | | | | I | | | | | | | | | | | | | | | | | | | | NSAT | | | | | | | | | | | | | | | | | | | | Spare | | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 7 | GPS_Toe | | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 8 | NSAT | T-Toe limit | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 9 | spare | SatID 1 | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 10 | IODE 1 | | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | ... | | | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 7+2n | spare | SatID n | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+ | Octet 8+2n | IODE n | | | | | | | | +------------+----------+-------------+-------+---+---+---+---+---+
Figure 10.10.2: Coding of Satellite Related Data
**GPS Week (bits 7-8 octet 5 and octet 6)**
This field contains a 10 bit binary representation of the GPS Week of the
assistance currently held by the MS. The most significant bit of the GPS Week
is bit 8 in octet 5 and the least significant bit is bit 1 in octet 6.
**GPS_Toe (octet 7)**
This field contains a binary representation of the GPS time of ephemeris in
hours of the newest ephemeris set contained in handset memory (range 0-167).
**NSAT (octet 8, bits 5-8)**
This field contains a binary representation of the number of satellites to be
considered for the current GPS assistance request. If the MS has no ephemeris
data, this field shall be set to zero. If the MS has ephemeris data whose age
exceeds the T-Toe limit, this field may be set to zero. If the SMLC receives a
zero value for this field, it shall ignore the GPS Week and GPS_Toe fields and
assume that the MS has no ephemeris data.
**T-Toe limit (octet 8, bits 1-4)**
This field contains a binary representation of the ephemeris age tolerance of
the MS to the network in hours (range 0-10).
**SatID x (x = 1,2, ... n) (octet 7 + 2x, bits 1-6)**
This field is present only if NSAT exceeds zero and contains a binary
representation of the identity of a satellite for which the assistance request
is applicable. The number of satellite fields is indicated in the field NSAT.
**IODE x (x = 1,2, ... n) (octet 8 + 2x)**
This field is present only if NSAT exceeds zero and contains a binary
representation of the Issue of Data Ephemeris held in the MS, which identifies
the sequence number for the satellite x (x = 1, 2, ..., n). The SMLC shall
derive the issue date and time for the IODE of each satellite x from the GPS
Week and GPS_Toe fields (e.g. when a particular IODE value for a satellite x
was issued more than once within the period of T-Toe limit).
**GPS Extended Ephemeris**
This octet shall be present when the GPS Ephemeris Extension bit is set to "1"
and absent otherwise.
* * *
            8                7   6   5   4   3   2   1
Octet 5 Validity Hours
* * *
Figure 10.10.2a: Coding of Information Extension for Ephemeris Extension
(conditional)
Validity Hours indicate the validity time for which the Ephemeris Extension
should be valid in multiples of four hours.
**GPS Ephemeris Extension Check**
These octets shall be present when the GPS Ephemeris Extension Check bit is
set to "1" and absent otherwise.
* * *
            8                                    7                                  6   5   4   3   2   1
Octet 5 GPS Ephemeris Extension Begin Week GPS Ephemeris Extension End Week  
Octet 6 GPS Ephemeris Extension Begin TOW  
Octet 7 GPS Ephemeris Extension End TOW
* * *
Figure 10.10.2b: Coding of Information Extension for Ephemeris Extension Check
(conditional)
These octets define the time duration of the Ephemeris Extension held by the
MS.
The GPS Ephemeris extension Week (Begin and End) is the defined as the GPS
Week modulo 4.
The GPS Ephemeris extension TOW (Begin and End) is represented in hours into
the GPS week.
## 10.11 IMSI
This information element identifies the International Mobile Subscriber
Identity of the target MS (see 3GPP TS 23.003 [10a]).
* * *
               8                                                                                                    7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octets 3-n IMSI coded as the value part of the _Mobile Identity_ IE defined in
3GPP TS 24.008 (NOTE 1)  
NOTE 1: The _Type of identity_ field in the _Mobile Identity_ IE shall be
ignored by the receiver.
* * *
Figure 10.11.1: IMSI IE
## 10.12 (void)
## 10.13 LCS Cause
The LCS Cause parameter is of variable length IE and provides the reason for
an unsuccessful location request.
* * *
            8                         7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 Cause value  
Octet 4 Diagnostic value (note)
* * *
NOTE: The inclusion of this octet depends on the cause value.
Figure 10.13.1: LCS Cause IE
Table 10.13.1: Cause value
+-----------------------------------------------------------+ | LCS Cause value (octet 3) | | | | Bits | | | | 8 7 6 5 4 3 2 1 | | | | 0 0 0 0 0 0 0 0 Unspecified | | | | 0 0 0 0 0 0 0 1 System Failure | | | | 0 0 0 0 0 0 1 0 Protocol Error | | | | 0 0 0 0 0 0 1 1 Data missing in position request | | | | 0 0 0 0 0 1 0 0 Unexpected data value in position request | | | | 0 0 0 0 0 1 0 1 Position method failure | | | | 0 0 0 0 0 1 1 0 Target MS Unreachable | | | | 0 0 0 0 0 1 1 1 Location request aborted | | | | 0 0 0 0 1 0 0 0 Facility not supported | | | | 0 0 0 0 1 0 0 1 Inter-BSC Handover Ongoing | | | | 0 0 0 0 1 0 1 0 Intra-BSC Handover Complete | | | | 0 0 0 0 1 0 1 1 Congestion | | | | 0 0 0 0 1 1 0 0 Inter NSE cell change | | | | 0 0 0 0 1 1 0 1 Routing Area Update | | | | 0 0 0 0 1 1 1 0 PTMSI reallocation | | | | 0 0 0 0 1 1 1 1 Suspension of GPRS services | | | | 0 0 0 1 0 0 0 0 | | | | to _unspecified_ in this version of the protocol | | | | 1 1 1 1 1 1 1 1 | +-----------------------------------------------------------+
Diagnostic value (octet 4):
this octet may be included if the cause value indicates \"position method
failure\", the binary encoding of this octet shall encode the same set of
values as defined for the PositionMethodFailure-Diagnostic in 3GPP TS 29.002.
Values outside those defined in 3GPP TS 29.002 shall be ignored by a receiver.
## 10.14 LCS Client Type
This information element identifies the type of LCS Client.
* * *
            8                  7                6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 Client Category Client Subtype
* * *
Figure 10.14.1: LCS Client Type IE
The client category (bits 8-5 of octet 3) and the client subtype (bits 4-1 of
octet 3) are coded as follows.
+-----------------+----------------+---------------------------------------------+ | Client Category | Client Subtype | Explanation | +-----------------+----------------+---------------------------------------------+ | 0000 | 0000 | Value Added Client | | | | | | | all values | unspecified | | | | | | | | reserved | +-----------------+----------------+---------------------------------------------+ | 0010 | 0000 | PLMN operator | | | | | | | 0001 | unspecified | | | | | | | 0010 | broadcast service | | | | | | | 0011 | O&M | | | | | | | 0100 | anonymous statistics | | | | | | | other values | Target MS service support (note 1) | | | | | | | | reserved | | | | | | | | note 1: includes a CAMEL phase 3 LCS client | +-----------------+----------------+---------------------------------------------+ | 0011 | 0000 | Emergency services | | | | | | | other values | unspecified | | | | | | | | reserved | +-----------------+----------------+---------------------------------------------+ | 0100 | 0000 | Lawful Intercept services | | | | | | | other values | unspecified | | | | | | | | reserved | +-----------------+----------------+---------------------------------------------+ | 0101 -- 1111 | all values | reserved | +-----------------+----------------+---------------------------------------------+
## 10.15 LCS Priority
This information element defines the priority level of a location request.
* * *
            8                                                                  7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 This octet is coded as the LCS-Priority octet in 3GPP TS 29.002.
* * *
Figure 10.15.1: LCS Priority IE
## 10.16 LCS QoS
This information element defines the Quality of Service for a location
request.
* * *
            8                  7                     6      5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 spare VEL VERT  
Octet 4 HA Horizontal Accuracy  
Octet 5 VA Vertical Accuracy  
Octet 6 RT spare
* * *
Figure 10.16.1: LCS QoS IE
Octet 3
bit 1 VERT = vertical coordinate indicator\ 0: vertical coordinate not
requested\ 1: vertical coordinate is requested
bit 2 VEL = Velocity Requested
0: do not report velocity
1: report velocity if available
Octet 4
bit 8 HA = horizontal accuracy indicator\ 0: Horizontal Accuracy is not
specified\ 1: Horizontal Accuracy is specified
bits 7-1 Horizontal Accuracy:\ spare (set all zeroes) if HA=0\ set to 7 bit
uncertainty code in 3GPP TS 23.032 if HA=1
Octet 5 -- applicable only if VERT = 1
bit 8 VA = vertical accuracy indicator\ 0: Vertical Accuracy is not specified\
1: Vertical Accuracy is specified
bits 7-1 Vertical Accuracy:\ spare (set all zeroes) if VA=0\ set to 7 bit
uncertainty altitude code in 3GPP TS 23.032 if VA=1
Octet 6
[bits 8-7 RT = response time category]{.underline}
00: Response Time is not specified
01: Low Delay
10: Delay Tolerant
11: reserved
bits 6-1 spare
## 10.17 (void)
## 10.18 Location Type
This is a variable length information element defining the type of location
information being requested.
* * *
            8                      7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 Location Information  
Octet 4 Positioning Method
* * *
Figure 10.18.1: Location Type IE
Coding of location information (octet 3):
00000000 current geographic location\ 00000001 location assistance information
for the target MS\ 00000010 deciphering keys for broadcast assistance data for
the target MS\ all other values are reserved
Positioning Method (octet 4)
This octet shall be included if the location information in octet 3 indicates
\"location assistance information for the target MS\" or \"deciphering keys
for broadcast assistance data for the target MS\" and shall be omitted
otherwise.
00000000 reserved
00000001 Mobile Assisted E-OTD
00000010 Mobile Based E-OTD
00000011 Assisted GPS
00000100 Assisted GANSS
00000101 Assisted GPS and Assisted GANSS
all other values are reserved
if Positionning Method (octet 4) is equal to 00000100 or 00000101 then, the
GANSS definition is provided in the GANSS Location Type. If the GANSS Location
Type is missing it means that all the satellite systems included in GANSS are
refered.
## 10.19 Network Element Identity
This is a variable length information element identifying a network element.
by association with either a designated cell site or a designated location
area.
+---------+--------------------------------+-----------------------+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +---------+--------------------------------+-----------------------+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +---------+--------------------------------+-----------------------+---+---+---+---+---+---+ | Octet 2 | Length indicator | | | | | | | | +---------+--------------------------------+-----------------------+---+---+---+---+---+---+ | Octet 3 | spare | Identity Discrminator | | | | | | | +---------+--------------------------------+-----------------------+---+---+---+---+---+---+ | Octet 4 | Network Element Identification | | | | | | | | | | | | | | | | | | | to | | | | | | | | | | | | | | | | | | | | Octet n | | | | | | | | | +---------+--------------------------------+-----------------------+---+---+---+---+---+---+
Figure 10.19.1: Network Element Identity IE
Identity Discriminator (bits 4-1 of octet 3)
0000 Identification using the MCC + MNC +LAC + CI as defined in 3GPP TS 23.003
0001 Identification using LAC + CI as defined in 3GPP TS 23.003
0100 Identification using the MCC + MNC + LAC as defined in 3GPP TS 23.003
0101 Identification using the LAC as defined in 3GPP TS 23.003
0110 Identification using LMU ID as defined below
All other values are reserved.
* * *
             8                7   6   5   4   3   2   1
Octet 4\ MCC+MNC+LAC+CI  
to\  
Octet 10
* * *
Figure 10.19.2: Coding of Network Element Identification\ using the
MCC+MNC+LAC+CI
Octets 4 to 10 are coded as the Cell Identification of the Cell Identifier IE
for Cell identification discriminator = 0000 defined in 3GPP TS 48.008.
* * *
             8          7   6   5   4   3   2   1
Octet 4\ LAC + CI  
to\  
Octet 7
* * *
Figure 10.19.3: Coding of Network Element Identification using the LAC + CI
Octets 4 to 7 are coded as the Cell Identification of the Cell Identifier IE
for Cell identification discriminator = 0001 defined in 3GPP TS 48.008.
+---------+----------+---+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +---------+----------+---+---+---+---+---+---+---+ | Octet 4 | MCC+ MNC | | | | | | | | | | | | | | | | | | | to | | | | | | | | | | | | | | | | | | | | Octet 6 | | | | | | | | | +---------+----------+---+---+---+---+---+---+---+ | Octet 7 | LAC | | | | | | | | | | | | | | | | | | | to | | | | | | | | | | | | | | | | | | | | Octet 8 | | | | | | | | | +---------+----------+---+---+---+---+---+---+---+
Figure 10.19.4: Coding of Network Element Identification\ using the MCC + MNC
+ LAC
Octets 4 to 8 are coded as the corresponding octets in the Cell Identification
of the Cell Identifier List IE for Cell identification discriminator = 0100
defined in 3GPP TS 48.008.
* * *
            8                 7   6   5   4   3   2   1
Octet 4 LAC  
Octet 5 LAC - continued
* * *
Figure 10.19.5: Coding of Network Element Identification using the LAC
Octets 4 to 5 are coded as the corresponding octets in the Cell Identification
of the Cell Identifier List IE for Cell identification discriminator = 0101
defined in 3GPP TS 48.008.
* * *
            8                    7   6   5   4   3   2   1
Octet 4 LMU ID  
... LMU ID - continued  
Octet n LMU ID - continued
* * *
Figure 10.19.6: Coding of Network Element Identification using the LMU ID
Octets 4 and possible additional octets are coded as one to six octets of
unformatted data. The maximum allowed length for the LMU ID is 6 (in this case
octet 4-9 carry the LMU ID). This type of Network Element Identity is a BSS
allocated address for an LMU. It shall not be used for addressing an SMLC and
shall not be used when the Network Element Identity is sent to the core
network (i.e. one of the other choices above shall be used in such a case).
## 10.20 Positioning Data
This is a variable length information element providing positioning data
associated with a successful or unsuccessful location attempt for a target MS.
* * *
                            8                      7                                6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 spare Positioning Data Discriminator  
Octets 4 to 4+m-1 Positioning Method 1
Octets 4+nm-m to 4+nm-1 Positioning Method n
* * *
Figure 10.20.1: Positioning Data IE
The positioning data discrminator (bits 4-1 of octet 3) defines the type of
data and number of octets m provided for each positioning method:
0000 indicate usage of each positioning method that was attempted either
successfully or unsuccessfully; 1 octet of data is provided for each
positioning method included
all other values are reserved.
Coding of the positioning method octets for positioning data discriminator =
0000:
* * *
Octet x positioning method usage
* * *
Coding of positioning method (bits 8-4):
00000 Timing Advance
00001 Reserved (Note)
00010 Reserved (Note)
00011 Mobile Assisted E-OTD
00100 Mobile Based E-OTD
00101 Mobile Assisted GPS
00110 Mobile Based GPS
00111 Conventional GPS
01000 U-TDOA
01001 Reserved for UTRAN use only
01010 Reserved for UTRAN use only
01011 Reserved for UTRAN use only
01100 Cell ID
01101
to reserved for GSM
01111
10000
to reserved for network specific positioning methods
11111
Coding of usage (bits 3-1)
000 Attempted unsuccessfully due to failure or interruption
001 Attempted successfully: results not used to generate location
010 Attempted successfully: results used to verify but not generate location
011 Attempted successfully: results used to generate location
100 Attempted successfully: case where MS supports multiple mobile based
positioning methods and the actual method or methods used by the MS cannot be
determined
NOTE: These values of the codepoints shall not be used as they were used in an
earlier version of the protocol.
## 10.21 Return Error Request
The Return Error Request parameter indicates a request from the source of a
BSSMAP-LE connectionless information message for an error response if the
message cannot be delivered to its final destination.
* * *
            8                   7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 Return Error Type
* * *
Figure 10.21.1: Return Error Request IE
Coding of Return Error Type (octet 3):
00000000 Return an unsegmented APDU or the first segment of a segmented APDU;
no Return Error shall be sent if no APDU was received or if a subsequent
segment of a segmented APDU was received
00000001
to Reserved for future use
11111111
## 10.22 Return Error Cause
The Return Error Cause parameter provides the reason for unsuccessful delivery
of a BSSMAP-LE Connectionless Information message to its final destination.
* * *
            8                  7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 Cause value
* * *
Figure 10.22.1: Return Error Cause IE
Table 10.22.1: Cause value
+----------------------------------------------------+ | > Cause value (octet 3) | | > | | > Bits | | > | | > 8 7 6 5 4 3 2 1 | | > | | > 0 0 0 0 0 0 0 0 Unspecified | | > | | > 0 0 0 0 0 0 0 1 System Failure | | > | | > 0 0 0 0 0 0 1 0 Protocol Error | | > | | > 0 0 0 0 0 0 1 1 Destination unknown | | > | | > 0 0 0 0 0 1 0 0 Destination unreachable | | > | | > 0 0 0 0 0 1 0 1 Congestion | | > | | > 0 0 0 0 0 1 1 0 | | > | | > to _unspecified_ in this version of the protocol | | > | | > 1 1 1 1 1 1 1 1 | +----------------------------------------------------+
## 10.23 (void)
## 10.24 Segmentation
This is a variable length information element that carries information for a
segmented APDU.
* * *
               8                                      7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octets 3-n Segmentation and Message Information
* * *
Figure 10.24.1: Segmentation IE
There are two options for the coding of the Segmentation and Message
Information portion; 1 octet containing segmentation information only and 3
octets containing segmentation and message information.
Encoding of Segmentation Information:
* * *
            8       7   6                5   4   3   2   1
Octet 3 Spare S Segment Number
* * *
Figure 10.24.2: Segmentation Information
Encoding of Segmentation and Message Information:
* * *
              8            7   6                5   4   3   2   1
Octet 3 Spare S Segment Number  
Octet 4-5 Message ID
* * *
Figure 10.24.3: Segmentation and Message Information
S (Segmentation Bit, bit 5 of octet 3)
0 final segment of a segmented message
1 non-final segment of a segmented message
Segment Number (bits 4-1 of octet 3)
This field contains a 4 bit binary representation of the segment number. The
first segment has the value \'0000\', the next \'0001\', and so on.
Message ID (octets 4 and 5)
This field contains a 16 bit binary representation of the message identity,
i.e. values 0-65535 are possible.
This field is used to identify to which messages different segments belong to.
## 10.25 (void)
## 10.26 LCS Capability
This is a variable length information element that carries the LCS
capabilities for the target MS.
* * *
              8                                                                                                                                                             7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3-n Rest of element coded as the value part of the LCS Capability
information element in 3GPP TS 48.018, not including 3GPP TS 48.018 IEI and
length indicator.
* * *
Figure 10.26.1: LCS Capability IE
## 10.27 Packet Measurement Report
This is a variable length information element that carries the packet
measurement report for the target MS.
* * *
              8                                                                                                                                                                                                                                                                                                                                                                      7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3-n Rest of element coded as the Packet Measurement Report message or
the Packet Enhanced Measurement Report message starting with the 6-bit
MESSAGE_TYPE (see clause 11 in 3GPP TS 44.060) and ending with the Non-
distribution contents (i.e. the RLC/MAC padding bits are not included). The
end of the message is padded with 0-bits to the nearest octet boundary.
* * *
Figure 10.27.1: Packet Measurement Report IE
## 10.28 Cell Identity List
This is a variable length information element identifying a particular cell.
* * *
            8                                                                                                                        7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 The rest of the information element is coded as the value part of the
Cell Identity List IE defined in 3GPP TS 48.071.
* * *
Figure 10.28.1: Cell Identifier IE
## 10.29 IMEI
This information element identifies the International Mobile Station Equipment
Identity of the target MS (see 3GPP TS 23.003).
* * *
                8                                                                                                    7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octets 3-10 IMEI coded as the value part of the _Mobile Identity_ IE defined
in 3GPP TS 24.008 (NOTE 1)  
NOTE 1: The _Type of identity_ field in the _Mobile Identity_ IE shall be
ignored by the receiver.
* * *
Figure 10.29.1: IMEI IE
## 10.30 Velocity Data
This is a variable length information element providing an estimate of a
velocity data.
+---------+---------------------+---+---+---+---+---+---+---+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 1 | IEI | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 2 | Length indicator | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+ | Octet 3 | The rest of the | | | | | | | | | | information element | | | | | | | | | to | contains an octet | | | | | | | | | | sequence identical | | | | | | | | | Octet n | to that for | | | | | | | | | | Description of | | | | | | | | | | Velocity defined in | | | | | | | | | | 3GPP TS 23.032. | | | | | | | | +---------+---------------------+---+---+---+---+---+---+---+
Figure 10.30.1: Velocity Data IE
**Description of Velocity (octet 3 to n)**
This parameter gives an estimate of the velocity of an MS in speed and bearing
and for certain descriptions, the accuracy of the estimate. The estimate is
expressed in terms of the velocity description defined by 3GPP TS 23.032.
## 10.31 Requested GANSS Assistance Data
This is a variable length information element identifying the GANSS assistance
data requested for an MS.
* * *
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 H G F E D C B A Octet m1 to Octet p1 Generic assistance data for
GNSS1, coding according to Figure 10.31.2  
...  
Octet pz-1+1 to Octet pz Generic assistance data for GNSSz, coding according
to Figure 10.31.2
* * *
> Octet p~n~ denote the last octet for GNSS~n~
Figure 10.31.1: Requested GANSS Assistance Data IE, general structure
+------------+------------+---+---+------------+----------+---+---+---+ | Octet m | L | K | J | I | GANSS ID | | | | +------------+------------+---+---+------------+----------+---+---+---+ | Octet m+1 | T | S | R | Q | P | O | N | M | +------------+------------+---+---+------------+----------+---+---+---+ | Octet m+2 | W | V | U | I | | | | | | | | | | nformation | | | | | | | | | | extension | | | | | | | | | | length | | | | | | | | | | indicator | | | | | +------------+------------+---+---+------------+----------+---+---+---+ | Octet m+3 | I | | | | | | | | | | nformation | | | | | | | | | to | extensions | | | | | | | | | | for | | | | | | | | | Octet | assistance | | | | | | | | | m+2+a | data | | | | | | | | | | (Co | | | | | | | | | | nditional) | | | | | | | | | | | | | | | | | | | | Coding | | | | | | | | | | according | | | | | | | | | | to Figure | | | | | | | | | | 10.31.3 | | | | | | | | +------------+------------+---+---+------------+----------+---+---+---+ | Octet | Satellite | | | | | | | | | m+3+a | related | | | | | | | | | | data | | | | | | | | | to | (Co | | | | | | | | | | nditional) | | | | | | | | | Octet | | | | | | | | | | m+5+a+2n | Coding | | | | | | | | | | according | | | | | | | | | | to Figure | | | | | | | | | | 10.31.4 | | | | | | | | +------------+------------+---+---+------------+----------+---+---+---+
> a = length of "Information extensions for assistance data" as indicated in
> "Information extension length indicator", range 0..31
Figure 10.31.2: Requested GANSS Assistance Data for one GNSS
For each of the following bits, a "1" indicates that the GANSS assistance data
is requested for that particular parameter and a "0" indicates that the data
is not requested. For each bit, or GANSS ID indicating "SBAS", there may be
one or more extension octets. These octets are defined in Figure 10.31.3 and
they shall occur in "Information extensions for assistance data " field in the
same order as they are introduced in Figure 10.31.3. For each bit set to "1",
or GANSS ID indicating "SBAS", the respective octet or octets shall be
present. The total amount of octets in "Information extensions for assistance
data" field is indicated in "Information extension length indicator".
Octet 3 in figure 10.31.1 defines the common assistance elements:
bit A GANSS Reference Time
bit B Reference Location
bit C GANSS Ionospheric Model
bit D GANSS Additional Ionospheric Model for Data ID = '00'
bit E GANSS Additional Ionospheric Model for Data ID = '11'
bit F GANSS Earth Orientation Parameters
bits G through H are Spare bits
Octet m in figure 10.31.2 defines the generic assistance elements:
GANSS ID (bits 1-4)
This field indicates the GNSS for which the following assistance data is
requested. (Range: 0 -- 8).
0000: Galileo
0001: Satellite Based Augmentation Systems (SBAS)
0010: Modernized GPS
0011: Quasi Zenith Satellite System (QZSS)
0100: GLONASS
If GANSS ID is set to '0001' (SBAS), the Extension Octet 5+n+3 (Figure
10.31.3f) shall be included.
bit I GANSS Real-Time Integrity
bit J GANSS Differential Corrections
bit K GANSS Almanac
0: GANSS Almanac is not requested
1: GANSS Almanac is requested. If GANSS ID indicates modernized GPS or QZSS
and bit S is set to "0", this bit shall be interpreted as Model-4 for
modernized GPS and as Model-2 for QZSS, defined in Table A.54 of TS44.031[4]
bit L GANSS Reference Measurement Information
Octet m+1 in figure 10.31.2 defines the generic assistance elements:
bit M GANSS Navigation Model
0: GANSS Navigation Model is not requested -- Satellite Related Data in figure
10.31.2 is not present for this GNSS.)
1: GANSS Navigation Model is requested -- Satellite Related Data in figure
10.31.2 is present for this GNSS.)
bit N GANSS Ephemeris Extension
0: GANSS Ephemeris Extension is not requested
1: GANSS Ephemeris Extension is requested
bit O GANSS Time Model GNSS-UTC
0: GANSS Time Model GNSS-UTC is not requested
1: GANSS Time Model GNSS-UTC is requested. If GANSS ID indicates QZSS and bit
S is set to "0", this bit shall be interpreted as Model-1, defined in Table
A.55 of TS44.031[4]
bit P GANSS Time Model GNSS-GNSS
bit Q GANSS Data Bit Assistance
bit R GANSS Ephemeris Extension Check
0: GANSS Ephemeris Extension Check is not requested
1: GANSS Ephemeris Extension Check is requested
bit S GANSS Additional Assistance Data Choices
0: GANSS Additional Assistance Data Choices octets are not included
1: GANSS Additional Assistance Data Choices octets are included
bit T Last Requested GANSS Assistance Data indicator
0: More Requested GANSS Assistance Data is included in the IE
1: This Requested GANSS Assistance Data is the last one in the IE
The T bit indicates whether the current Requested GANSS Assistance Data for a
GNSS as defined in figure 10.31.2 is the last one. If bit T is set to "0",
another structure of Figure 10.31.2 shall follow the current one.
bit U GANSS Auxiliary Information
bit V Spare
bit W Bit Field Extension indicator
0: Bit Field Extension octet is not included
1: Bit Field Extension octet is included
At least one of bits A to F, or I to R, or U, or W shall be set to the value
\"1\".
Bits M, N and R are mutually exclusive for the additional assistance requests
from the MS. In such case only one of these can be set to one at the same
time.
**GANSS Differential Corrections Extension**
This octet shall be present when the GANSS Differential Corrections bit is set
to "1" and absent otherwise.
* * *
                      8    7    6    5    4    3    2    1
Extension Octet 1 S8 S7 S6 S5 S4 S3 S2 S1
* * *
Figure 10.31.3a: Coding of Information Extension for GANSS Differential
Corrections (conditional)
Differential corrections are requested for each of the bits S1 to S8 set to
"1".
If GANSS ID indicates Galileo, the bits shall be interpreted as follows:
bit S1 L1
bit S2 E5a
bit S3 E5b
bit S4 E6
bit S5 spare
bit S6 spare
bit S7 spare
bit S8 spare
If GANSS ID indicates SBAS, Modernized GPS, QZSS, or GLONASS, the bits shall
be interpreted as in Table A.59 of 3GPP TS 44.031 [4], where bits S1 to S8 in
Figure 10.31.3a correspond to Signal 1 to Signal 8 in Table A.59 of 3GPP TS
44.031, respectively.
**GANSS Time Model GNSS-GNSS Extension**
This octet shall be present when the GANSS Time Model GNSS-GNSS bit is set to
"1" and absent otherwise.
* * *
                      8       7       6       5       4         3      2         1
Extension Octet 2 spare spare spare spare GLONASS QZSS Galileo GPS
* * *
Figure 10.31.3b: Coding of Information Extension for GANSS Time Model GNSS-
GNSS (conditional)
The reference system for requested GANSS time models is as indicated in GANSS
ID. The models are requested for each system with respective bit set to "1".
**GANSS Data Bit Assistance Extension**
These octets shall be present when the GANSS Data Bit Assistance bit (bit Q)
is set to "1" and absent otherwise.
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Exte | GANSS | spare | | | | | | | | nsion | TOD | | | | | | | | | Octet | ( | | | | | | | | | 3 | range | | | | | | | | | | 0 -- | | | | | | | | | | 59) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Exte | si | si | si | si | si | si | si | si | | nsion | gnal8 | gnal7 | gnal6 | gnal5 | gnal4 | gnal3 | gnal2 | gnal1 | | Octet | | | | | | | | | | 4 | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Exte | GANSS | Num | | | | | | | | nsion | Data | Sat | | | | | | | | Octet | Bit | | | | | | | | | 5 | Int | | | | | | | | | | erval | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Exte | GANSS | Spare | | | | | | | | nsion | Sat | | | | | | | | | | ID 1 | | | | | | | | | Octet | | | | | | | | | | 6 | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ... | ... | ... | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Exte | GANSS | Spare | | | | | | | | nsion | Sat | | | | | | | | | | ID N | | | | | | | | | Octet | | | | | | | | | | 5+n | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Figure 10.31.3c: Coding of Information Extension for Data Bit Assistance
(conditional)
**GANSS TOD**
This field contains the reference time of the first bit of the requested data
in integer seconds in GANSS system time. The time is given as modulo 60 s from
GANSS TOD.
**GANSS Signals: signal1 -- signal8 (Extension Octet 4)**
Each bit in Extension Octet 4 specifies the GANSS signal type of the GANSS
Data Bit Assistance requested. The GANSS Signals value shall be interpreted as
in Table A.59 of 3GPP TS 44.031 [4].
**GANSS Data Bit Interval**
This field represents the time length for which the Data Bit Assistance is
requested. The Data Bit Assistance shall be relative to the time interval
(GANSS TOD, GANSS TOD + Data Bit Interval).
The Data Bit Interval _r_ , expressed in seconds, is mapped to a binary number
K with the following formula:
_r_ =0.1* 2 ^K^
Value K=15 means that the time interval is not specified.
The number of bits sent by the SMLC shall be estimated exploiting information
about Data Bit Interval (sec) and Symbol Rate (sps). This number of bits shall
be rounded up to the next higher multiple of 8. The total number of bits for
each signal shall not exceed 1024 as defined in A.4.2.6.2 of 3GPP TS 44.031
[4].
**Num Sat**
This field contains a binary representation of the number of GANSS satellites
for which the Data Bit Assistance is requested.
Range 0-15:
0 no GANSS satellite ID is specified, octets 6 to 5+n are not present. In this
case, Data Bit Assistance is requested for all the satellites supposed in
visibility;
1-15 number of satellites for which the Data Bit Assistance is requested.
**GANSS Sat ID**
This field is present only if Num Sat is not equal to 0; it contains a binary
representation of the identity of a GANSS satellite for which the Data Bit
Assistance request is applicable.
**GANSS Ephemeris Extension**
This octet shall be present when the GANSS Ephemeris Extension bit is set to
\"1\" and absent otherwise.
* * *
                          8               7   6   5   4   3   2   1
Extension Octet 5+n+1 Validity Time
* * *
Figure 10.31.3d: Coding of Information for Ephemeris Extension (conditional)
Validity Time indicates the validity time for which the Ephemeris Extension
should be valid in multiples of four hours.
**GANSS Ephemeris Extension Check**
These octets shall be present when the GANSS Ephemeris Extension Check bit is
set to "1" and absent otherwise.
* * *
                          8                                           7                                           6       5   4   3   2   1
Extension Octet 5+n+1 GANSS Ephemeris Extension Begin Day GANSS Ephemeris
Extension Begin TOD (MSB)  
Extension Octet 5+n+2 GANSS Ephemeris Extension Begin TOD (LSB) GANSS
Ephemeris Extension End Day Spare
* * *
Figure 10.31.3e: Coding of Information Extension for Ephemeris Extension Check
(conditional)
These octets define the time duration of the Ephemeris Extension held by the
MS.
The GANSS Ephemeris extension Day (Begin and End) is the defined as the GANSS
Day modulo 32.
The GANSS Ephemeris extension TOD (Begin and End) is represented in hours into
the GANSS day.
**SBAS ID**
This octet shall be present when GANSS ID in octet m is set to value '0001'
(SBAS) and absent otherwise.
* * *
                          8       7       6       5       4       3         2   1
Extension Octet 5+n+3 spare spare spare spare spare SBAS ID
* * *
Figure 10.31.3f: Coding of Information Extension for GANSS ID indicating
"SBAS" (conditional)
SBAS ID (bits 1-3)
This field indicates the SBAS for which the assistance data request is
applicable.
000: WAAS
001: EGNOS
010: MSAS
011: GAGAN
**GANSS Additional Assistance Data Choices**
These octets shall be present when the GANSS Additional Assistance Data
Choices bit is set to "1" and absent otherwise.
* * *
                              **8**            **7**              **6**   **5**   **4**   **3**   **2**   **1**
**Extension Octet 5+n+4** Orbit model ID Clock model ID Spare  
**Extension Octet 5+n+5** UTC Model ID Almanac model ID Spare
* * *
**Figure 10.31.3g: Coding of Information Extension for GANSS Additional
Assistance Data Choices (conditional)**
These parameters specify the model type when non-native models are requested
or when several native models exist. If SMLC supports the requested GANSS but
can not provide the requested model, the native model shall be provided.
These parameters shall be considered only if the respective request bit ('K'
for Almanac, 'M' for Clock and Orbit model, 'O' for UTC model) is set to "1"
and ignored otherwise.
The values of each parameter shall be interpreted as follows:
Range 0-7:
0 Native model
1-7 The model number as defined in Tables A.49.1, A.49.2, A.54, and
A.55/A.55.17 of TS44.031[4] for Clock model, Orbit model, Almanac model, and
UTC model, respectively.
(Note: Future extensions shall be added here)
**Bit Field Extension**
This octet shall be present when the Bit Field Extension bit is set to "1" and
absent otherwise.
* * *
                                               8       7       6       5       4       3       2       1
Octet m+2+a (As defined in Figure 10.31.2) spare spare spare spare spare spare
spare spare
* * *
Figure 10.31.3h: Coding of Information Extension for Bit Field Extension
(conditional)
This octet extends the bit field of octects m...m+2.
**Satellite Related Data**
Satellite Related Data for Navigation Models (Figure 10.31.4) is present only
when the GANSS Navigation Model bit is set to the value "1".
* * *
                   8                7              6   5   4   3   2   1
Octet m+3+a GANSS Week/Day Spare  
Octet m+4+a GANSS Week/Day  
Octet m+5+a GANSS_Toe  
Octet m+6+a NSAT T-Toe limit  
Octet m+7+a IOD 1 GANSSSatID 1  
Octet m+8+a IOD 1  
...  
Octet m+5+2n+a IOD n GANSSSatID n  
Octet m+6+2n+a IOD n
* * *
Figure 10.31.4: Coding of Satellite Related Data for Navigation Models
(conditional)
**GANSS Week (bits 5-8 octet m+3+a and octet m+4+a)**
If GANSS ID does not indicate 'GLONASS', this field contains a 12 bit binary
representation of the GANSS Week of the assistance currently held by the MS.
The most significant bit of the GANSS Week is bit 8 in octet m+3+a and the
least significant bit is bit 1 in octet m+4+a.
If GANSS ID is set to 'GLONASS', this field contains a 11 bit binary
representation of the calendar number of day within the four-year interval
starting from 1^st^ of January in a leap year, as defined by the parameter
N~T~ in [31] of the assistance currently held by the MS. The most significant
bit of N~T~ is bit 7 in octet m+3+a and the least significant bit is bit 1 in
octet m+4+a. Bit 8 in octet m+3+a shall be set to zero.
**GANSS_Toe (octet m+5+a)**
If GANSS ID does not indicate 'GLONASS', this field contains a binary
representation of the GANSS time of ephemeris in hours of the newest ephemeris
set contained in handset memory (range 0-167 hours).
If GANSS ID is set to 'GLONASS', this field contains a binary representation
of the time of ephemeris in units of 15 minutes of the newest ephemeris set
contained in handset memory (binary range 0 to 95 representing time values
between 0 and 1425 minutes).
**NSAT (octet m+6+a, bits 5-8)**
This field contains a binary representation of the number of satellites to be
considered for the current GANSS assistance request. If the MS has no GANSS
ephemeris data, this field shall be set to zero. If the MS has GANSS ephemeris
data whose age exceeds the T-Toe limit, this field may be set to zero. If the
SMLC receives a zero value for this field, it shall ignore the GANSS Week/Day
and GANSS_Toe fields and assume that the MS has no GANSS ephemeris data.
**T-Toe limit (octet m+6+a, bits 1-4)**
If GANSS ID does not indicate 'GLONASS', this field contains a binary
representation of the GANSS ephemeris age tolerance of the MS to the network
in hours (range 0-10 hours).
If GANSS ID is set to 'GLONASS', this field contains a binary representation
of the GANSS ephemeris age tolerance of the MS to the network in units of 30
minutes (binary range 0 to 15 representing time values of 0 to 450 minutes).
**GANSSSatID x (x = 1,2, ... n) (octet m+5+a + 2x, bits 1-6)**
This field is present only if NSAT exceeds zero and contains a binary
representation of the identity of a GANSS satellite for which the assistance
request is applicable. The number of satellite fields is indicated in the
field NSAT.
**IOD x (x = 1,2, ... n) (bits 7-8 octet m+5+a+2x and octet m+6+a + 2x)**
This field is present only if NSAT exceeds zero and contains a binary
representation of the Issue of Data as defined in 3GPP TS 44.031 [4], Table
A.48.2 held in the MS, which identifies the GANSS Navigation Model for a
satellite x (x = 1, 2, ..., n). The SMLC shall derive the issue date and time
for the IOD of each GANSS satellite x from the GANSS Week/Day and GANSS_Toe
fields (e.g. when a particular IOD value for a GANSS satellite x was issued
more than once within the period of T-Toe limit). The most significant bit of
the IOD x is bit 8 in octet m+5+a+2x and the least significant bit is bit 1 in
octet m+6+a+2x.
## 10.32 GANSS Positioning Data
This is a variable length information element providing positioning data
associated with a successful or unsuccessful location attempt for a target MS
using GANSS.
* * *
                  8                  7          6       5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octets 3 to n Method GANSS Id Usage
* * *
Figure 10.32.1: GANSS Positioning Data IE
Method :
00 MS-Based
01 MS-Assisted
10 Conventional
11 Reserved
Coding of the GANSS Id :
000 Galileo
001 Satellite Based Augmentation Systems (SBAS)
010 Modernized GPS
011 Quasi Zenith Satellite System (QZSS)
100 GLONASS
Coding of usage (bits 3-1)
000 Attempted unsuccessfully due to failure or interruption
001 Attempted successfully: results not used to generate location
010 Attempted successfully: results used to verify but not generate location
011 Attempted successfully: results used to generate location
100 Attempted successfully: case where MS supports multiple mobile based
positioning methods and the actual method or methods used by the MS cannot be
determined
## 10.33 GANSS Location Type
This is a variable length information element defining the constellation used
when the Location Type / Positioning method is set to 00000100 or 00000101.
* * *
            8                  7   6   5   4   3   2   1
Octet 1 IEI  
Octet 2 Length indicator  
Octet 3 GANSS Bitmap
* * *
Figure 10.33.1: GANSS Location Type IE
GANSS Bitmap
* * *
     8       7       6       5         4      3                2      1
     spare   spare   spare   GLONASS   QZSS   Modernized GPS   SBAS   Galileo
* * *
When a bit is set to "1", it means that the corresponding system is refered by
GANSS.
###### ## Annex A (informative): Change history