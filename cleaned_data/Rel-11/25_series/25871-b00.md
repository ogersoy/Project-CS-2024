# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document captures evaluation results and analysis from the study
item on "Uplink MIMO for HSPA" described in [2].
The work under this study intends to capture the feasibility and merits of UL
MIMO in terms of average user throughput for the following configuration
  * Up to 2 streams can be transmitted by the UE
  * UL MIMO transmission applies to E-DCH physical channels
  * Both 2x2 and 2x4 configurations are considered
Additionally, the following are also investigated:
  * Impact on infrastructure implementation
  * Impact on UE implementation
  * Impact on specifications
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] **RP-101432, "Proposed study item on Uplink MIMO"**
**[3]** 3GPP TS 25.101, "**User Equipment (UE) radio transmission and
reception (FDD)"**
**[4]** 3GPP TS 25.104, "**Base Station (BS) radio transmission and reception
(FDD)"**
**[5]** 3GPP TS 25.201, "**Physical layer - general description"**
**[6]** 3GPP TS 25.211, "**Physical channels and mapping of transport channels
onto physical channels (FDD)"**
**[7]** 3GPP TS 25.212, "**Multiplexing and channel coding (FDD)"**
[8] 3GPP TS 25.213, "Spreading and modulation (FDD)"
[9] 3GPP TS 25.214, "Physical layer procedures (FDD)"
[10] 3GPP TS 25.215, "Physical layer; Measurements (FDD)"
[11] 3GPP TS 25.306, "UE Radio Access capabilities"
[12] 3GPP TS 25.319, "Enhanced uplink; Overall description; Stage 2"
[13] 3GPP TS 25.321, "Medium Access Control (MAC) protocol specification"
[14] 3GPP TS 25.322, "Radio Link Control (RLC) protocol specification"
[15] 3GPP TS 25.331, "Radio Resource Control (RRC); Protocol specification"
[16] 3GPP TS 25.423, "UTRAN Iur interface Radio Network Subsystem Application
Part (RNSAP) signalling"
[17] 3GPP TS 25.433, "UTRAN Iub interface Node B Application Part (NBAP)
signalling"
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
## 3.2 Symbols
Void
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 Design Objective for UL MIMO
The UL MIMO for HSPA design objective can be summarized as follows:
  * Increase in peak, average and cell edge spectral efficiencies:
    * Improve upon the spectral efficiencies achievable with UL 16QAM SIMO
  * Allow for 2x2 and 2x4 modes of operation. However the design of the UL MIMO feature should be independent of the number of NodeB receive antennas.
  * Minimize additional pilot and control channel overhead
    * In order to support the UL MIMO feature, as in the downlink, a secondary pilot and control information on the second stream would need to be transmitted by the UE on the uplink. Furthermore, as in UL CLTD, the NodeB would need to transmit the precoding information to the UE on the downlink. It would be desirable to minimize the amount of transmitted power to carry these pieces of information.
  * Commonality with UL CLTD
    * If the UL CLTD feature were introduced, it would be desirable to ensure commonality between UL CLTD and UL MIMO.
  * Minimize impact to existing NodeB Advanced Receivers to accommodate UL MIMO functionality
  * Minimize impact to UE and NodeB implementations to accommodate UL MIMO functionality relative to CLTD
  * Coexistence with legacy devices
    * The UL MIMO design must ensure that legacy devices are not negatively impacted by UL MIMO UEs.
  * Minimize Cubic Metric Impact:
    * The introduction of additional channels on the uplink causes some impact on the cubic metric. The design should be sensitive to this fact..
# 5 Physical Layer Structure Alternatives for UL MIMO
One of the most important design choices for UL MIMO is whether a single or
dual transport block transfer should be employed in the case of rank-2 MIMO
channel and, for the dual TB case, whether the TBs are transmitted
independently over the spatial channels or interleaved. Thus, three candidate
MIMO architectures can be distinguished:
  * _Option I -- single TB rank-2 transmission_. The main advantage of this architecture is low control signalling overhead: it is sufficient to indicate a single E-TFC and, possibly, the transmission rank in uplink, whilst the only additionally required signaling in DL is possibly the transmission rank. In addition, the number of HARQ processes does not increase for rank-2, compared to rank-1 transmission. For maximum simplicity, the modulation, OVSF code allocation, systematic and parity bit mapping, as well as power allocation should be the same for the strong and weak spatial channels. An alternative approach, with a more flexible distribution of some of the parameters between the spatial streams might provide some performance gains but would require additional control signalling, thus losing the main advantage of the single TB option. Thus a disadvantage of Option I is a poor channel adaptation ability in the case of a significant imbalance between the MIMO spatial streams when comparing to option II.
  * _Option II -- dual TB rank-2 transmission_ , independently over the spatial streams. The advantage of this architecture is the flexibility to independently assign a different E-TFC to each spatial stream, i.e. to make an adaptation of data rate on each stream in order to maximize the throughput, at the cost of the overhead to signal the scheduling and HARQ-related information associated with each stream in UL and the ACK/NACK and E-TFC selection information for each stream in DL. Additionally, to ensure the quality of the secondary stream, it may be necessary to introduce an additional control loop that dynamically adjusts the TBS assigned to the second data stream.
  * _Option III -- dual TB rank-2 transmission, TBs interleaved between the two spatial channels_. This can be viewed as a hybrid between options I and II above. Due to the interleaving, each transport block is transmitted over the same channel conditions, corresponding to an average over the two spatial streams.. In terms of signalling, the HARQ overhead is the same as in the case of Option II. The amount of scheduling information for Option III lies between that of Option I at the minimum and Option II at the maximum. One advantage of option III as compared to option II is that there is no need to introduce an additional loop controlling the second stream for achieving a targeted BLER.
Additional details about the physical layer structures of Options I and II are
provided in the sections below.
## 5.1 Signalling Requirements to support UL MIMO
For UL MIMO scheme using two transport blocks (Option II), the following
additional signalling channels are required. Design alternatives for these
channels will be presented in Sections 5.2 and 5.3.
**Downlink** :
  * Physical layer signalling containing parameters that dictate the E-TFC selection for the secondary stream would need to be introduced.
  * A HARQ feedback channel indicator is required for the second data stream. This channel could be an extension of the E-HICH channel.
  * A physical channel to signal the PCI bits, which signals the precoder used by UE, is required. The channel used for this purpose in UL CLTD can potentially be re-used for UL MIMO. The rank to be used for the uplink transmissions would also need to be signalled by the NodeB.
**Uplink** :
  * A new channel called the S-DPCCH channel is introduced. This is a pilot channel for channel sounding of secondary stream. The same channel design employed for UL CLTD can potentially be re-used.
  * New signalling, for example, a new channel like the E-DPCCH for signalling the E-TFC on the secondary stream is required.
  * It may also be necessary to indicate the rank (single or dual) that is used by the UE for data transmission. If so, either a physical channel needs to be defined for this purpose or an existing channel is modified to allow rank signalling.
For an UL MIMO scheme using a single transport block (Option I), some of the
above channels may not be required, namely:
  * The HARQ feedback channel indicator, similar to the E-HICH channel for secondary stream is unnecessary since there is only one transport block requiring ACK/NACK signalling.
  * On the uplink, the E-DPCCH like channel for signalling the secondary stream E-TFC is not required since there is only one E-TFC to be signalled.
Note that it may be necessary for the UE to signal the rank of the
transmission for the single transport block scheme as well.
## 5.2 Physical Channels
### 5.2.1 Introduction of Precoding in the UE transmitter
Two orthogonal precoding vectors are used for the two spatial streams, as in
the case of DL MIMO and UL CLTD. For CLTD, a channel-sounding pilot is
transmitted on each spatial stream, but the data channel is transmitted only
on the primary stream. For MIMO, data are also sent on the secondary stream.
If similar pilot and data channel structures are used for UL MIMO, the UE can
readily fall back to CLTD by turning off the data transmission on the
secondary stream.
The precoders to be used at the UE are indicated by the NodeB on the downlink
and are chosen from a precoder codebook. Further study is needed to determine
the size of the precoder codebook and the frequency in which the precoder
choice is indicated.
### 5.2.2 Introduction of Uplink Physical Channels
#### 5.2.2.1 Secondary DPCCH (S-DPCCH)
In UL CLTD, a secondary pilot channel; the S-DPCCH, was introduced for channel
sounding of the secondary stream to enable selection of the best possible
precoding vector to be used for future transmissions. It might also be used to
assist in data demodulation.
For UL MIMO, the S-DPCCH is required both for channel sounding for precoder
selection and potentially to also act as a phase reference for demodulation of
data transmitted on the secondary spatial stream. The S-DPCCH may be mapped to
a separate channelization code or alternatively to the same channelization
code as DPCCH but with an orthogonal pilot pattern. The second option is
similar to the structure of the diversity CPICH on the downlink.
An important design consideration is the amount of power required on the
S-DPCCH. Legacy UE's use the DPCCH as a phase reference for the demodulation
of data with low TBS. Additionally, the E-DPCCH channel is also used as phase
for high TBS, for which E-DPCCH is 'boosted', i.e., sent at a higher power. If
we assume that precoded pilots are used and that the precoders are chosen in
such a so that the primary stream is much stronger than the secondary stream
in UL MIMO, the S-DPCCH may need to be boosted if it is used as phase
reference for data demodulation on the second stream.
#### 5.2.2.2 Secondary E-DPCCH (S-E-DPCCH)
For UL MIMO scheme using two transport blocks (Option II), new signalling is
necessary to carry the E-TFC information corresponding to the second data
stream. This could, for example, be accomplished by a new channel referred to
as the S-E-DPCCH channel.
The S-E-DPCCH may carry the E-TFC for the transport block transmitted on the
secondary stream by a UE and is required for the UL MIMO operation using two
transport blocks. The S-E-DPCCH channel can be transmitted using either the
primary or secondary precoding vectors. It may be more advantageous to
transmit S-E-DPCCH on the primary precoding vector if the network selects
precoder so as to optimize the performance associated with the primary stream.
Further study is needed to determine if the S-E-DPCCH is to be 'boosted',
i.e., sent at a higher power in case high TBS values are used on the second
stream. If boosting is applied, distributions of the available transmit power
between the E-DPCCH and S-E-DPCCH and other physical channels needs to be
determined.
For UL MIMO scheme using a single transport block (Option I), the S-E-DPCCH
channel may not be needed since only a single E-TFC needs to be signalled.
However, since the range of possible transport block sizes (TBS) is doubled;
this requires a new E-TFC encoding rule. Either a new E-TFC encoding rule is
introduced that quantizes the range of TBS more coarsely and thus convey the
additional information using the same number of bits as currently allocated
for the E-TFCI, or the E-DPCCH coding must be modified to accommodate this
additional information.
#### 5.2.2.3 Secondary E- DPDCH (S-E-DPDCH)
The S-E-DPDCH channels are the new set of channels required by UL MIMO UEs for
transmission of the channel bits on the secondary spatial stream. These are
similar to the E-DPDCH channels that carry the channel bits on the primary
spatial stream. Some key design issues related to S-E-DPDCH are as follows:
Power allocation:
  * The amount of power allocated to the E-DPDCH and S-E-DPDCH channels is an important design consideration. The power allocation can either be symmetric; i.e., the amount of power allocated to the E-DPDCH and S-E-DPDCH channels is the same or it can be asymmetric; for example, using waterfilling. Additional signalling may be necessary to support the asymmetric power allocation which may be unattractive from a practical point of view.
Channelization code allocation:
  * In the high SNR region (where dual stream transmissions are likely to be scheduled), it is most likely that the primary stream is short of code space and is operating in the 2xSF2+2xSF4 configuration. The second stream could then be chosen to be any of the subset of codes and spreading factors as in the primary stream. However in order to simplify NodeB receiver implementation with regard to spatial separation of the two streams (similar to DL MIMO), the second stream could be restricted to the configuration 2xSF2+2xSF4.
#### 5.2.2.4 Uplink Physical Channel Configuration
At the NodeB, an estimate of the effective channel including the effect of the
precoder is required for demodulation of the E-DPDCH data used (since that is
the channel experienced by E-DPDCH). On the other hand, computation of the new
precoder to be used for future transmissions requires an estimate of the
underlying propagation channel that does not include the precoder.
A precoded pilot structure will readily yield the former estimate, from which
the latter must be computed using knowledge of the precoder used. With un-
precoded pilots, the reverse is true, i.e., the latter estimate is readily
obtained, while the former must be computed based on the precoder used. The
precoder is computed by the serving NodeB and is thus not readily available at
the non-serving NodeBs in soft handover scenarios without requiring additional
uplink signalling. Additionally, channel sounding with un-precoded pilots may
be sensitive to PA inaccuracies since each pilot is transmitted from a
separate physical antenna. Due to this and also because precoded pilots are
used in UL CLTD, the precoded pilot structure may be the preferred option. A
design in which the UE uses an additional overhead channel to signal the
precoder used could justify further evaluation of this design choice.
Table 5.1 summarizes the uplink physical channel configuration across the
primary and secondary precoding vectors.
Table 5.1: Uplink Physical Channel Configuration across both precoding vectors
* * *
**Uplink Channel** **Precoding Vector Used** DPCCH Primary DPDCH Primary HS-
DPCCH Primary E-DPCCH Primary S-E-DPCCH (if present) Primary or Secondary
E-DPDCH Primary S-DPCCH Secondary S-E-DPDCH Secondary
* * *
An example of the uplink physical configuration is given in Figure 5.1
{width="4.770833333333333in" height="3.501388888888889in"}
Figure 5.1: Example of an uplink physical channel configuration for UL MIMO
### 5.2.3 Introduction of Downlink Physical Channels
#### 5.2.3.1 DL Feedback of UL Precoding Information
A desirable objective for the precoder feedback channel is to reuse the design
used in UL CLTD. Further study is required to decide whether the two bits of
PCI feedback are also sufficient for UL MIMO.
The F-DPCH which traditionally carries UL TPC bits could be re-used to carry
the precoding feedback information; the feedback could also be carried by the
F-PCICH, introduced for UL CLTD. Further study may be needed to finalize the
design of the precoding feedback channel.
If the precoding feedback quantization study determines that a larger number
of feedback bits are required, then a new physical channel may need to be
introduced.
#### 5.2.3.2 DL Feedback of HARQ acknowledgement indicators
For an UL MIMO scheme using dual transport blocks, an additional HARQ
indicator bit is required. A straightforward extension is to allocate a
secondary E-HICH ACK/NACK indicator on the channelization code on which the
primary E-HICH ACK/NACK indicator is allocated. In this case the UE would
still de-spread a single SF128 channelization code as in legacy operation, but
needs to monitor/receive another orthogonal signature sequence index to
process the secondary E-HICH ACK/NACK indicator.
Alternatively, a more aggressive approach may also be considered where a
single ACK/NACK is transmitted since the operation of UL MIMO will likely be
in favourable channel conditions. One alternative of this approach is to
transmit an ACK only when both transport blocks are decoded correctly;
otherwise, a NACK is transmitted.
The relative pros and cons of these design options need further consideration.
For an UL MIMO scheme using a single transport block, the existing E-HICH
channel could simply be re-used to transmit the ACK/NACK.
#### 5.2.3.3 DL Feedback of relative grants for each stream on E-RGCH
For an UL MIMO scheme using dual transport blocks, the same design principles
used for the secondary E-HICH ACK/NACK indicator can be applied to the
relative grant indicator for the secondary stream, if applicable, since the
E-HICH and E-RGCH follow identical physical channel structures.
As in the previous sub-section, two schemes can be distinguished:
  * Two relative grants, one grant per stream in which case, a secondary relative grant indicator is allocated on the channelization code on which the primary relative grant indicator is allocated. Alternatively, a second parameter is signalled to indicate the E-TFC on the second stream.
  * Single relative grant affecting both streams. One relative grant can increase or decrease the absolute grant for both primary and secondary stream in increments of one step.
For an UL MIMO scheme using a single transport block, the existing E-RGCH
channel could simply be re-used to transmit the relative grant indicator.
## 5.3 Channel Coding and Multiplexing
### 5.3.1 E-DCH TTI Configuration
Since the objective of UL MIMO is to improve data rates, the chosen TTI should
enable high data rates. The 10ms TTI configuration has a peak data rate
limitation of 2Mbps. Assuming that UL MIMO were able to double the peak data
rate to 4Mbps, the peak rate would still be lower than that achieved using a
2ms TTI configuration. The achievable rate for 2ms TTI is currently 5.76 Mbps
for QPSK capable UEs and 11.32 Mbps for 16QAM capable UEs. Therefore, it is
reasonable to assume that only 2ms TTI is used for UL MIMO.
### 5.3.2 E-DCH Coding
As per current specifications (TS 25.212):
\- There is only one CCTrCH of E-DCH type per UE;
\- There is only one E-DCH transport channel per CCTrCH of E-DCH type;
\- There is only one transport block per TTI per E-DCH transport channel
A few design options exist with regard to E-DCH transmission
  * Two HARQ processes per TTI, Single E-DCH transport channel. This scheme would be used in the case of UL MIMO operation with two transport block.
  * Single HARQ process per TTI, Single E-DCH transport channel. This scheme would apply in the case where a single transport block is used in UL MIMO operation.
The two design options are described in more detail in sections 5.3.2.1 and
5.3.2.2.
#### 5.3.2.1 Two HARQ process per TTI, Single E-DCH transport channel
One method to support transmission on a pair of precoding vectors at the
physical layer across two antennas is to allow for two HARQ processes in the
same TTI. In each HARQ process, a single transport block is transmitted as
shown in Figure 5.2. The number of E-DCH transport channels still equals one
in this scheme. This design philosophy is similar to the independent
processing of two HS-DSCH transport blocks in DL 2x2 MIMO.
{width="5.621527777777778in" height="5.601388888888889in"}
Figure 5.2: Simultaneous transmission of two independent transport blocks;
each transport block is sent in a separate HARQ process; two HARQ processes
per E-DCH per TTI
#### 5.3.2.2 Single HARQ process per TTI, Single E-DCH transport channel
As shown in Figure 5.3, the processing structure in this scheme is almost
identical to the processing structure as defined in the legacy non-MIMO case.
Since the number of physical channels has doubled due to the introduction of
S-E-DPDCH, there are now two separate Interleaving/Physical Channel Mapping
stages- one for the E-DPDCH physical channels and the other for the S-E-DPDCH
channels.
This scheme allows transmission of a larger transport block than the non-MIMO
case, due to spatial multiplexing at the physical layer, in which half the
symbols sent on a primary precoding vector and the remaining half of the
symbols sent on the secondary precoding vector. Compared to the two transport
block MIMO scheme, this scheme requires reduced signalling overhead but may
require redesign of the E-TFC mapping and/or E-DPCCH encoding rules, as
described in Section 5.2.2.2.
{width="4.5881944444444445in" height="6.684027777777778in"}
Figure 5.3: Single transport block, Single E-DCH transport channel, Single
CCTrCH
### 5.3.3 E-DPCCH
For an UL MIMO scheme using dual transport blocks and two streams are
transmitted simultaneously, the E-DPCCH information bits for both streams need
to be transmitted in the same TTI on the uplink. A few design options exist:
Per Stream Transmission:
  * E-DPCCH for the first stream is transmitted using the primary precoding vector and the S-E-DPCCH, if introduced, for the second stream is transmitted using the secondary or orthogonal precoding vector. The primary and secondary E-DPCCH can be transmitted either on the same branch (either I or Q) or on different branches. The same channelization code or different channelization codes can be used for the primary and secondary E-DPCCH.
I/Q multiplexing:
  * Transmit both E-DPCCH for the first stream and S-E-DPCCH, if introduced, for the second stream using the primary precoding vector. The 60 (=30*2) channel bits at the output of the encoder are I/Q multiplexed into a single channelization code (SF256). Alternatively, the E-DPCCH and the S-E-DPCCH are transmitted on separate channelization codes.
Joint Coding and Spreading Factor Reduction:
  * The information bits of the S-E-DPCCH could be jointly encoded with the E-DPCCH bits. The spreading factor of the E-DPCCH is then reduced by a factor of 2 to accommodate the doubling of channel bits from 30 to 60.
The channelization code index of E-DPCCH and S-E-DPCCH (SF256) as well as the
branch to transmit on (I or Q branch) needs to be determined based on cubic
metric analysis that takes into account the other channels that are also
simultaneously transmitted.
Two sets of RSN bits will be required in the case of rank-2 transmission of
two transport blocks due to separate ACK/NAK transmissions for each transport
block. If a single ACK/NAK is transmitted (single transport block; rank-2
transmission) then a single set of RSN bits is sufficient. Changes to happy
bit signalling may be considered further if needed.
### 5.3.4 E-AGCH
The MAC i/is design assumes a single E-DCH even when the UE transmits on two
streams and hence the UE has a single primary E-RNTI. The E-AGCH is a common
channel that masks the 16 CRC bits with the UE's primary E-RNTI. Hence,
whenever the NodeB needs to signal rank-2 transmissions, information
pertaining to the E-TFC selection on each stream needs to be communicated in
the same TTI. In this case, examples of design options that can be considered:
Independent Coding and Dual Channelization Codes:
  * Two channels are configured in the UE (each channel could be identical to the legacy E-AGCH channel, or a new type of channel could be introduced) and require the UL MIMO UE to monitor both channels every TTI.
Joint Coding with Legacy Channel Reuse:
  * A new type of channel coding is defined where the information bits are jointly encoded and rate matched to 60 channel bits. The legacy E-AGCH physical channel (SF256, QPSK) could be reused in this case.
Independent Coding and Spreading Factor Reduction
  * A new type of E-AGCH physical channel is defined where the legacy E-AGCH channel coding is used and spreading factor is reduced by 2 (SF128, QPSK).
Further study is needed to understand better the code/power/UE complexity
tradeoffs between these options. As an alternative to the above approaches, a
scheme where a single grant applies to both streams may be considered.
## 5.4 Physical Layer Procedures
Due to the introduction of new physical channels on the uplink to support UL
MIMO operation, the setting of the uplink channel gain factors for these
channels and the potential modification of channel gain factors for existing
physical channels needs to be considered.
The range of power offsets on the second stream is expected to be similar to
the range of power offsets on the second stream.
  * Setting of S-E-DPDCH: Existing methods defined today for the power offset computation of E-DPDCH can be reused for S-E-DPDCH. Indeed, the reference gain factors _β~ed,ref~_ signalled for the reference E-TFCs can be applied to both E-DPDCHs and S-E-DPDCHs.
  * Setting of S-E-DPCCH: The power levels of the S-E-DPCCH channel, if introduced, could be set to be the same as the E-DPCCH channel. Further study is needed to determine if boosting can be applied to this channel.
  * Setting of S-DPCCH: Since S-DPCCH serves as a phase reference to the S-E-DPDCHs, the concept of E-DPCCH boosting that was adopted in Rel-7 can potentially be re-used should boosting be required for this channel.
### 5.4.1 Uplink power control
Uplink power control for legacy UEs not configured in UL MIMO involves an
inner loop and an outer loop. The inner loop compares the receive SNR to a
target to issue an up/down power control command, and the outer loop adjusts
the inner loop target SNR based on the E-DCH packet decoding status to target
a desired BLER level after a desired number of HARQ transmission attempts. For
UL MIMO, exactly the same procedures could be followed; with the inner loop
receive SNR being measured on the primary stream, and the outer loop
adjustments made to target a BLER level for the packet sent on the primary
stream.
Other possible alternatives involve basing inner and/or outer loops on the
secondary stream SNR/BLER respectively, or having two independent loops for
the primary and secondary streams. These are undesirable for the following
reasons:
  * The secondary stream is usually weaker than the primary one.
  * Power control attempts to maintain the targeted receive performance by inverting the propagation channel, and inverting the weak secondary stream will result in excessive transmit power overhead.
Additionally, having two independent power control loops complicates the
precoder selection, which will then require knowledge of the instantaneous
relative power ratios on the two streams. Additional signaling may then be
required to provide this information. Alternatively, the NodeB could estimate
the relative power ratios based on the history of power-control up/down
commands issued on the two streams which is subject to errors due to
inaccuracies in the reception of the TPC commands transmitted on the F-DPCH.
Therefore, it is recommended that a single power control inner/outer loop is
used for UL MIMO.
# 6 MAC layer structure alternatives for UL MIMO
In this section, we present the MAC Layer structure alternatives for Uplink
MIMO for HSPA. A design of the MAC layer for Uplink MIMO may be based on some
the following principles:-
  * Single E-DCH transport channel per uplink frequency
  * One HARQ entity per E-DCH
  * One HARQ process per TTI for single stream transmission
  * There could be one or two HARQ processes per TTI for dual stream transmissions
    * Option 1: Two HARQ processes per TTI for dual stream transmissions with two separate transport blocks to be transmitted, one on each stream and ACK/NAK feedback per stream
    * Option 2: One HARQ processes per TTI for dual stream transmissions with single transport block to be transmitted across both streams and a single ACK/NACK feedback
  * For each HARQ process, the HARQ entity provides the E-TFC, the retransmission sequence number (RSN) and the power offset to be used by L1 for each of the transport blocks (one or two) transmitted in a TTI. Redundancy version (RV) of the HARQ transmission in each process is derived by L1 from RSN, and CFN in case of 10ms TTI and from the sub-frame number in case of 2ms TTI
  * For each HARQ process, the multiplexing and TSN setting entity continues to be responsible for concatenating multiple MAC-d PDUs or segments of MAC-d PDUs into MAC-is PDUs, and to multiplex one or multiple MAC-is PDUs into a single MAC-i PDU to be transmitted in the next TTI
  * The NodeB signals the grant values that the UE should use for E-DCH transmission. There are a few options that can be considered here:-
    * Option 1: The NodeB signals a separate grant per stream
    * Option 2: The Node B signals a single grant shared by both streams
  * It is FFS whether the Node B may also signal the transmission rank to the UE
  * Upon receiving the grant(s) via E-AGCH and optionally E-RGCH if configured by the NW, the E-TFC selection function determines the transport block size(s). It is FFS whether the E-TFC selection determines whether to perform single or dual stream transmission
  * If the UE is power headroom limited , i.e the serving grants cause the UE to transmit beyond the maximum UE transmit power, then some form of power and rate scaling is required to set it equal to the maximum UE transmit power. A few options could be considered here:-
    * Option 1: Provide the UE enough freedom to select between single or dual stream transmission by trying to maximize the throughput
    * Option 2: Scale (T/P) by a constant α such that the UE transmit power does not exceed the maximum UE transmit power
# 7 Performance Evaluation Methodology
The simulations are based on the following methodology:
  * A single ILPC loop and a single OLPC loop are active. For the MIMO architecture with dual TBs sent independently over the two spatial channels, a desired BLER level is targeted for the primary stream after a desired number of HARQ attempts.
  * The serving Node-B is responsible for determining precoding weights and rank.
  * The reference pre-coder is unquantized and any quantized pre-coders should be described.
  * Rate adaptation is applied for both streams targeting a total received Ec/No (RoT).
  * All control and data channels use the same precoding vector as the DPCCH, with the exception of the secondary DPCCH and the secondary E-DPDCH (if it is transmitted, i.e., during dual stream transmission by a UL MIMO UE), which use an orthogonal precoding vector. The pre-coder for the secondary E-DPCCH (S-E-DPCCH) channel should be described if the channel is simulated.
  * When pre-coder is quantized (i.e., not ideal SVD based), pre-coder selection is based on maximization of primary stream received SNR or maximization of sum throughput
  * Rank adaptation is based on maximization of sum throughput.
  * For a MIMO scheme using two transport blocks, the quality target for the secondary stream is to achieve the same BLER level as the primary stream.
Any approach applied to compensate the impact of phase discontinuity caused by
change of pre-coder is described explicitly. The simulation includes rate
adaptation (scheduling), and most of the gains in UL MIMO are expected to
occur in scenarios similar to that of a single user in an isolated cell.
Hence, performance evaluation based on the above assumptions was considered
sufficient, avoiding the need for separate link and system simulations.
## 7.1 Simulation assumptions
The simulation assumptions for UL MIMO for HSPA are shown in Table 7.1. An
asterisk (*) is used to indicate simulation cases of lower priority.
Table 7.1 Simulation parameters for UL MIMO performance evaluation
+----------------------------------+----------------------------------+ | **Parameter** | **Value** | +----------------------------------+----------------------------------+ | Physical Channels | E-DPDCH, DPCCH for SIMO | | | | | | E-DPDCH, DPCCH, S-DPCCH for | | | CL-BFTD | | | | | | E-DPDCH, S-E-DPDCH, DPCCH, | | | S-DPCCH for MIMO | | | | | | E-DPCCH and S-E-DPCCH are to be | | | described (for CL-BFTD and MIMO | | | transmissions) | +----------------------------------+----------------------------------+ | E-DCH TTI [ms] | 2 | +----------------------------------+----------------------------------+ | TBS [bits] | variable 120 -- 22995 bits | +----------------------------------+----------------------------------+ | Modulation | 16QAM for TBS ≥ 8105, QPSK | | | otherwise | +----------------------------------+----------------------------------+ | Noise rise target [dB] | [5, 10, 15, 20] | +----------------------------------+----------------------------------+ | Number of physical data channels | During dual stream transmission: | | and spreading factor | 2xSF2+2xSF4 | | | | | | Otherwise: Based on TBS and | | | rate-matching parameters | +----------------------------------+----------------------------------+ | ∆T2TP [dB] (Ratio of primary | 10dB | | E-DPDCH power to the power of | | | the phase reference for the | | | primary stream) | | +----------------------------------+----------------------------------+ | 20*log10(βed/βc) [dB] | Based on Scheduled Grant | +----------------------------------+----------------------------------+ | 20*log10(βec/βc) [dB] | Based on Scheduled Grant | +----------------------------------+----------------------------------+ | Power ratio between Secondary | 0 | | DPCCH and DPCCH (S-DPCCH/DPCCH) | | | [dB] | | +----------------------------------+----------------------------------+ | Power ratio between Secondary | 0 | | E-DPDCH and E-DPDCH (if rank 2 | | | transmissions are scheduled) | | | [dB] | | +----------------------------------+----------------------------------+ | Number of H-ARQ Processes | 8 | +----------------------------------+----------------------------------+ | Target Number of H-ARQ | 4 | | Transmissions | | +----------------------------------+----------------------------------+ | H-ARQ operating point | 10 % BLER after 1 H-ARQ attempt | | | OR | | | | | | 30 % BLER after 1 H-ARQ attempt | | | (*) | +----------------------------------+----------------------------------+ | Number of Rx Antennas | 2, 4 | +----------------------------------+----------------------------------+ | Channel Encoder | 3GPP Release 6 Turbo Encoder | +----------------------------------+----------------------------------+ | PL~max~ | 0.33 | +----------------------------------+----------------------------------+ | PL~non,max~ | 0.66 | +----------------------------------+----------------------------------+ | Turbo Decoder | Log MAP | +----------------------------------+----------------------------------+ | Number of iterations for turbo | 8 | | decoder | | +----------------------------------+----------------------------------+ | DPCCH Slot Format | 1 (8 Pilot, 2 TPC) | +----------------------------------+----------------------------------+ | Secondary DPCCH Slot Format | 1 (8 Pilot, 2 TPC) | +----------------------------------+----------------------------------+ | Channel Estimation | Realistic | +----------------------------------+----------------------------------+ | Compensation of phase | To be described | | discontinuity | | +----------------------------------+----------------------------------+ | Inner Loop Power Control | ON [based on primary stream | | | SNR] | +----------------------------------+----------------------------------+ | Outer Loop Power Control | ON [based on primary stream CRC | | | status] | +----------------------------------+----------------------------------+ | Inner Loop PC Step Size | ±1 dB | +----------------------------------+----------------------------------+ | UL TPC Delay (sent on F-DPCH) | 2 slots | +----------------------------------+----------------------------------+ | UL TPC Error Rate (sent on | 4 % | | F-DPCH) | | +----------------------------------+----------------------------------+ | Scheduling delay | described as needed | +----------------------------------+----------------------------------+ | Delay for marginal loop | described as needed | +----------------------------------+----------------------------------+ | Propagation Channel | PA3, VA3 [as defined in Table | | | 7.2] | +----------------------------------+----------------------------------+ | NodeB Receiver Type | LMMSE | +----------------------------------+----------------------------------+ | Antenna imbalance [dB] | 0 | +----------------------------------+----------------------------------+ | UE Tx Antenna Correlation | 0 | +----------------------------------+----------------------------------+ | UE DTX | OFF | +----------------------------------+----------------------------------+ | Pre-coder | Unquantized, Practical* (to be | | | described) | +----------------------------------+----------------------------------+ | Precoding Codebook Size | described as needed | +----------------------------------+----------------------------------+ | Precoding Feedback Error Rate | described as needed | +----------------------------------+----------------------------------+ | Precoding Feedback Update Rate | described as needed | +----------------------------------+----------------------------------+ | Precoding Feedback Delay | described as needed | +----------------------------------+----------------------------------+
Table 7.2: Propagation Conditions for Multipath Fading Environments of PA3 and
VA3
+----------------+----------------+----------------+----------------+ | **ITU |** ITU | | | | Pedestrian A**| vehicular A** | | | | | | | | | **Speed |** Speed | | | | 3km/h**| 3km/h** | | | | | | | | | **(PA3)** | **(VA3)** | | | +----------------+----------------+----------------+----------------+ | **Relative |** Relative | **Relative |** Relative | | Delay**| Mean Power | Delay** | Mean Power | | | [dB]**| | [dB]** | | **[ns]** | | **[ns]** | | +----------------+----------------+----------------+----------------+ | 0 | 0 | 0 | 0 | +----------------+----------------+----------------+----------------+ | 110 | -9.7 | 310 | -1.0 | +----------------+----------------+----------------+----------------+ | 190 | -19.2 | 710 | -9.0 | +----------------+----------------+----------------+----------------+ | 410 | -22.8 | 1090 | -10.0 | +----------------+----------------+----------------+----------------+ | | 1730 | -15.0 | | +----------------+----------------+----------------+----------------+ | | 2510 | -20.0 | | +----------------+----------------+----------------+----------------+
_The definition of pre-coder feedback delay can be illustrated by the example
in Figure 7.1 which shows timing diagrams corresponding to 3 slots feedback
delay._ The estimation of precoding weights on UL DPCCH is at (n-1)th slot and
the corresponding precoding weight is applied at (n+2)th slot.
In the example shown, the 2 PCI bits carried by two symbols are transmitted
every slot on the F-DPCH channel.
A similar definition also applies to the scheduling delay. If receive SNR
estimates based on UL DPCCH transmitted at slot index n-1 are used to compute
new TBS which are scheduled at slot index n+2, the scheduling delay is said to
be (n+2)-(n-1)=3 slots.
{width="7.29375in" height="2.0076388888888888in"}
Figure 7.1: An example of 3 slots feedback delay
## 7.2 Performance evaluation metrics
The following performance measures are used for evaluation:
  * Average throughput
  * Received Ec/No (average, 90^th^ percentile)
The average throughput assumes all HARQ interlaces are active, and takes into
account the number of HARQ attempts required for each packet, and also the
residual BLER after the maximum number of HARQ attempts (i.e., packets failing
after all HARQ attempts do not count towards the throughput). For the sake of
clarity,
{width="4.611111111111111in" height="1.0833333333333333in"}
and the values in the case of UL MIMO are computed as
{width="6.25in" height="1.1111111111111112in"}
where{width="0.1527777777777778in" height="0.19375in"}is 1 during dual stream
transmission and 0 during single stream transmission. For UL CLTD, the same
formula applies with{width="0.1527777777777778in" height="0.19375in"}set
always to zero.
The performance for a UL MIMO UE shall be evaluated and compared with a UE
capable of only single antenna transmissions, as well as with a UE configured
with closed loop transmit diversity.
# 8 Performance evaluation results
## 8.1 Dual TB Transmission Scheme (Option II)
The parameters of the E-TFC set used to simulate Option II are given in Table
8.1. The first four columns show the peak data rates, TBS, modulation, and the
coding rate. The Ecp/No column was generated by simulating SIMO transmissions
in AWGN with 2 receive antennas, ∆T2TP=10dB and without power control. The
true DPCCH (pilot) SNR, combined across receive antennas, required to meet 10%
BLER after the 1^st^ HARQ attempt in this simulation is recorded in the Ecp/No
column. The scheduler uses Table 8.1 to map the received SNRs to TBS values,
and to determine the modulation scheme and DPCCH boost to be used for each
TBS.
Table 8.1: Parameters of the E-TFC set used in the simulations
* * *
**Data rate,\** TBS, bits**** Modulation**** Coding rate**** Qualcomm****
NSN**** Ericsson**kbps**
                                                                     **Ecp/No \[dB\]**   **Ecp/No \[dB\]**   **Ecp/No \[dB\]**
60.0 120 QPSK 0.010 -25.6 -23.4
796.5 1593 QPSK 0.138 -15.8 -15.95
1428.0 2856 QPSK 0.248 -13.4 -13.40
2456.5 4913 QPSK 0.426 -11 -10.90
3429.5 6859 QPSK 0.595 -8.8 -8.73
4052.5 8105 16QAM 0.352 -7.4 -7.08
4992.5 9985 16QAM 0.433 -6 -5.67
5658.0 11316 16QAM 0.491 -5 -4.67
7899.0 15798 16QAM 0.686 -1.8 -1.73
9731.0 19462 16QAM 0.845 0.8 0.87
11497.5 22995 16QAM 0.998 7.4 7.43
* * *
In addition to the simulation assumptions listed in Section 7.1, the following
assumptions have been made by the respective companies and the corresponding
results may be interpreted accordingly.
**Qualcomm**
  * Physical channel structure includes the DPCCH, E-DPCCH, S-E-DPCCH and E-DPDCH channels precoded with the primary transmit weight vector, whereas the S-DPCCH and the S-E-DPDCH channels are precoded with the secondary weight vector.
  * Practical channel estimation was applied with a 4 slot not causal filter with weights [0.4 0.3 0.2 0.1].
  * SVD of maximum-energy channel tap was used was used for unquantized PCI and a 2 bit phase only codebook when quantization was simulated which maximized the single stream post equalizer SNR.
  * The PCI update rate and feedback delay were assumed to be 3 slots each. No PCI feedback error was assumed.
  * The scheduling delay was assumed to be 3 slots while the marginal loop delay was 3 TTIs. The step sizes for the marginal loop was set to be +0.0125 and -0.1125.
**NSN**
  * Physical channel structure includes the DPCCH, E-DPCCH, and E-DPDCH channels precoded with the primary transmit weight vector, and the S-DPCCH, S-E-DPCCH, and S-E-DPDCH channels precoded with the secondary weight vector.
  * Practical channel estimation was applied with a 3 slot causal filter with equal weights, channel synthesis for phase discontinuity compensation.
  * 2 bit phase only codebook when quantization was simulated which maximized the primary stream SINR.
  * The PCI update rate and feedback delay were assumed to be 3 slots and 4 slots respectively. No PCI feedback error was assumed.
  * The scheduling delay was assumed to be 4 slots.
  * Delay of the marginal loop for the second stream BLER control of dual TB MIMO was assumed to be 4 slots; the marginal loop steps are 1 dB × (1 -- BLER_target) and 1 dB × BLER_target.
**Ericsson**
  * No boosting was applied in the simulations. Instead the beta factors for the traffic were varied for each TBS.
  * Ideal channel estimation was assumed.
  * 2 bit phase only codebook when quantization was simulated which maximized the SNR of the primary stream.
  * The PCI update rate was assumed to be 1 slot and no feedback delay was assumed. No PCI feedback error was also assumed.
  * The E-TFCI associated with the primary stream is determined based on legacy procedures using the grant, which is determined in order to satisfy the RoT target as input. Also the transmit power (i.e. the beta factors based on the determined E-TFCI) is determined using legacy procedures.
  * For determining the T/P for a given E-TFCI the interpolation formula with a reference E-TFCI =31 and T/P=5.11 dB (this corresponds to signalled value 13 in Table 1B.1 in sub clause 4.2.1.3 in [3] was used.
**Huawei**
  * Practical channel estimation was applied with a 3 slot non-causal filter with equal weights. Channel synthesis was also assumed for phase discontinuity compensation..
  * 2 bit phase only codebook for quantized PCI was assumed.
  * The PCI update rate was assumed to be 1 slot and 3 slot feedback delay was assumed. No PCI feedback error was assumed.
  * The scheduling delay was assumed to be 3 slots.
  * No boosting was applied in the simulations.
  * The E-TFCI table from previous releases is used to determine both the primary and secondary stream TB sizes.The E-TFCI associated with the primary stream is determined based on legacy procedures using the grant. From the {width="0.2638888888888889in" height="0.25in"} of the primary stream, the corresponding TBS of the primary stream is determined. The {width="0.2916666666666667in" height="0.25in"}of the secondary stream is calculated as {width="1.375in" height="0.94375in"}, and the corresponding TBS is determined.
A summary of the performance results as a function of the Rx Ec/No per antenna
are shown in the following tables.
Table 8.2: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x2); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
Table 8.3: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x2); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
Table 8.4: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x4); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
Table 8.5: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x4); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
Table 8.2: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x2); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
**Mode** |  | **Unquantized PCI** | **Quantized PCI** |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---  
|  | **Average Rx Ec/No [dB]** | **Average Rx Ec/No [dB]** |  |  |  |  |  |  |   
|  | 5 | 10 | 15 | 20 | 5 | 10 | 15 | 20 |   
**SIMO** | Qualcomm | Throughput [kbps] | 4786 | 7273 | 8907 | 9557 | 4786 | 7273 | 8907 | 9557  
| NSN |  |  |  |  |  | 4846 | 7042 | 8691 | 8693  
| Ericsson |  |  |  |  |  | 4655 | 6831 | 7935 | 10002  
|  | Average Rx Ec/No [dB] |  |  |  |  | 4.8 | 9.8 | 14.6 | 16.7  
| Huawei | Throughput [kbps] |  |  |  |  | 5162 | 6858 | 7554 | 7698  
|  | Average Rx Ec/No [dB] |  |  |  |  | 5.0 | 10.9 | 16.3 | 19.4  
**CLTD** | Qualcomm | Throughput [kbps] | 5274 | 8075 | 9480 | 9973 | 5125 | 7842 | 9276 | 9645  
|  | Gain [%] | 10 | 11 | 6 | 4 | 7 | 8 | 4 | 1  
| NSN | Throughput [kbps] |  |  |  |  | 4975 | 7126 | 8202 | 8270  
|  | Gain [%] |  |  |  |  | 3 | 1 | -6 | -5  
| Ericsson | Throughput [kbps] |  |  |  |  | 4734 | 6841 | 8016 | 10007  
|  | Gain [%] |  |  |  |  | 1.7 | 0.15 | 1.0 | 0.05  
|  | Average Rx Ec/No [dB] |  |  |  |  | 4.7 | 9.7 | 14.5 | 16.5  
| Huawei | Throughput [kbps] |  |  |  |  | 5398 | 7315 | 8188 | 8517  
|  | Gain [%] |  |  |  |  | 4.6 | 6.7 | 8.4 | 10.6  
|  | Average Rx Ec/No [dB] |  |  |  |  | 5.0 | 10.9 | 16.3 | 19.4  
**MIMO** **(Dual TB)** | Qualcomm | Throughput [kbps] | 5302 | 8923 | 12045 | 13719 | 5194 | 8149 | 10776 | 12641  
|  | Gain [%] | 11 | 23 | 35 | 44 | 9 | 12 | 21 | 32  
| NSN | Throughput [kbps] |  |  |  |  | 5086 | 7811 | 10771 | 12460  
|  | Gain [%] |  |  |  |  | 5 | 11 | 24 | 43  
| Ericsson | Throughput [kbps] |  |  |  |  | 4726 | 7910 | 10475 | 11945  
|  | Gain [%] |  |  |  |  | 1.5 | 15.8 | 32.0 | 19.4  
|  | Average Rx Ec/No [dB] |  |  |  |  | 4.7 | 9.8 | 14.7 | 19.6  
| Huawei | Throughput [kbps] |  |  |  |  | 4716 | 7822 | 9116 | 9205  
|  | Gain [%] |  |  |  |  | -8.6 | 14 | 20.7 | 19.6  
|  | Average Rx Ec/No [dB] |  |  |  |  | 5.0 | 10.9 | 16.3 | 21.6  
Table 8.3: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x2); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
* * *
**Mode** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
5 10 15 20 5 10 15 20  
**SIMO** Qualcomm Throughput [kbps] 4290 6322 7696 8303 4290 6322 7696 8303
NSN 4335 6512 8409 8787 Ericsson  
Huawei Throughput [kbps] 4432 6468 6967 6926 Average Rx Ec/No [dB] 5.0 10.9
16.3 21.4 **CLTD** Qualcomm Throughput [kbps] 4201 6084 7280 7786 4158 5986
7231 7765 Gain [%] -2 -4 -5 -6 -3 -5 -6 -6 NSN Throughput [kbps] 4488 6442
7644 8049 Gain [%] 4 -1 -9 -8 Ericsson Throughput [kbps]  
Gain [%]  
Huawei Throughput [kbps] 4406 6332 7013 6974 Gain [%] -0.5 -2 0.6 0.7 Average
Rx Ec/No [dB] 5.0 10.9 16.2 21.3 **MIMO (Dual TB)** Qualcomm Throughput [kbps]
4219 6855 9057 10187 4186 6755 8909 10099 Gain [%] -2 8 18 23 -2 7 16 22 NSN
Throughput [kbps] 4571 6951 9785 11681 Gain [%] 5 7 16 33 Ericsson Throughput
[kbps]  
Gain [%]  
Huawei Throughput [kbps] 4377 7073 8122 8154 Gain [%] -1.2 9.4 16.6 17.7
Average Rx Ec/No [dB] 5 11.1 16.1 19.8
* * *
Table 8.4: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x4); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
* * *
**Mode** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
5 10 15 20 5 10 15 20  
**SIMO** Qualcomm Throughput [kbps] 6973 9234 9924 6973 9234 9924  
NSN 6675 8823 10313 10441 Ericsson 6173 7575 9862 10089 Average Rx Ec/No [dB]
4.8 9.7 13.3 13.4 **CLTD** Qualcomm Throughput [kbps] 7159 9344 10033 7038
9238 9934  
Gain [%] 3 1 1 1 0 0  
NSN Throughput [kbps] 6877 8626 9910 10223 Gain [%] 3 -2 -4 -2 Ericsson
Throughput [kbps] 6178 7586 9886 10090 Gain [%] 0.1 0.15 0.24 0 Average Rx
Ec/No [dB] 4.8 9.7 13.3 13.4 **MIMO** Qualcomm Throughput [kbps] 8932 13845
16955 8577 13395 17030  
Gain [%] 28 50 71 23 45 72  
NSN Throughput [kbps] 8059 12415 14643 19318 Gain [%] 21 41 42 85 Ericsson
Throughput [kbps] 7784 12742 15481 17399 Gain [%] 26.1 68.2 57.0 72.5 Average
Rx Ec/No [dB] 4.7 9.7 14.5 18.9
* * *
Table 8.5: UE Throughput [kbps] as a function of Rx Ec/No: SIMO, UL CLTD and
UL MIMO (2x4); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI
and Quantized PCI -- 2 bit phase
* * *
**Mode** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
5 10 15 20 5 10 15 20  
**SIMO** Qualcomm Throughput [kbps] 6168 8069 8922 9205 6168 8069 8922 9205
NSN 6258 8800 9911 10446 Ericsson  
**CLTD** Qualcomm Throughput [kbps] 5994 7793 8697 9005 5987 7841 8751 9085
Gain [%] -3 -3 -3 -2 -3 -3 -2 -1 NSN Throughput [kbps] 6668 8723 9855 10410
Gain [%] 7 -1 -1 0 Ericsson Throughput [kbps]  
Gain [%]  
**MIMO** Qualcomm Throughput [kbps] 7769 11580 14312 15735 7763 11532 14281
15790 Gain [%] 26 44 60 71 26 43 60 72 NSN Throughput [kbps] 7967 12020 15482
19295 Gain [%] 27 37 56 85 Ericsson Throughput [kbps]  
Gain [%]
* * *
**In the simulations conducted, the scheduler chooses packet sizes that
attempt to meet the RoT constraint. However, limited scheduling opportunities
due to packet retransmissions along with effects of power-control and channel
variations cause the instantaneous Rx Ec/No to have a distribution which may
exceed the RoT constraint. In Table 8.6, the 90^th^ percentile Rx Ec/No
measured per pilot-symbol (256 chips) for different average Rx Ec/No values is
shown for a (2x2) antenna configuration with a 2bit quantized phase only pre-
coder for the PA3 channel.**
Table 8.6: 90^th^ percentile RxEc/No [dB] as a function of the average Rx
Ec/No [dB]
* * *
**90^th^ percentile RxEc/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20**  
**CLTD** Qualcomm 7.2 11.9 16.7 21.8 NSN 6.9 9.9 15.7 23.2 Ericsson  
**MIMO** Qualcomm 7.2 12.4 18.3 22.3 NSN 7.7 11.5 16.5 21.2 Ericsson
* * *
The following tables show the the average Tx Ec/No [dB] as a function of the
average Rx Ec/No [dB].
Table 8.7: Tx Ec/No as a function of the average Rx Ec/No: UL CLTD and UL MIMO
(2x2); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI and
Quantized PCI -- 2 bit phase
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**SIMO** Qualcomm 7.2 12.3 17.4 22.4 7.2 12.3 17.4 22.4 NSN **5.9** **10.2**
**17.8** **17.6** Ericsson 6.9 11.9 16.7 19.1 Huawei 7.0 13.0 18.4 21.5
**CLTD** Qualcomm 4.2 9.2 14.4 19.4 4.9 9.9 14.8 19.9 NSN **3.3** **7.0**
**15.0** **24.8** Ericsson 4.3 9.3 14.1 16.2 Huawei 4.5 10.4 15.9 19.0
**MIMO** Qualcomm 4.3 10.2 15.6 20.8 5.0 10.5 15.8 20.9 NSN **5.9** **11.5**
**15.6** **20.7** Ericsson 4.3 10.3 15.7 20.6 Huawei 6.0 11.9 17.1 22.6
* * *
Table 8.8: Tx Ec/No as a function of the average Rx Ec/No: UL CLTD and UL MIMO
(2x2); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI and
Quantized PCI -- 2 bit phase
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**SIMO** Qualcomm 7.2 12.3 17.4 22.4 7.2 12.3 17.4 22.4 NSN 4.6 8.8 13.3 14.4
Ericsson 6.9 11.9 16.7 19.1 Huawei 5.9 11.8 17.3 22.4 **CLTD** Qualcomm 4.2
9.2 14.4 19.4 4.9 9.9 14.8 19.9 NSN 3.9 8.4 14.2 20.0 Ericsson 4.3 9.3 14.1
16.2 Huawei 4.5 10.4 15.8 20.9 **MIMO** Qualcomm 4.3 10.2 15.6 20.8 5.0 10.5
15.8 20.9 NSN 4.8 10.3 15.6 22.8 Ericsson 4.3 10.3 15.7 20.6 Huawei 5.3 11.5
16.6 20.3
* * *
Table 8.9: Tx Ec/No as a function of the average Rx Ec/No: UL CLTD and UL MIMO
(2x4); Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI and
Quantized PCI -- 2 bit phase
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**SIMO** Qualcomm 6.0 11.0 16.0 6.0 11.0 16.0  
NSN **3.8** **7.1** **13.5** **13.9** Ericsson 5.8 10.7 14.5 14.5 **CLTD**
Qualcomm 4.1 9.2 14.2 4.5 9.6 14.5  
NSN **2.9** **8.2** **13.2** **14.3** Ericsson 3.9 8.8 12.5 12.5 **MIMO**
Qualcomm 5.1 10.4 15.4 5.3 10.4 15.4  
NSN **4.1** **7.9** **10.0** **16.5** Ericsson 4.9 10.1 14.9 19.3
* * *
Table 8.10: Tx Ec/No as a function of the average Rx Ec/No: UL CLTD and UL
MIMO (2x4); Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI and
Quantized PCI -- 2 bit phase
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**SIMO** Qualcomm 5.4 10.5 15.5 5.4 10.5 15.5  
NSN 3.6 7.3 12.6 14.4 Ericsson  
**CLTD** Qualcomm 4.4 9.4 14.3 4.5 9.5 14.5  
NSN 3.2 7.7 12.6 14.3 Ericsson  
**MIMO** Qualcomm 5.0 10.1 15.1 5.1 10.2 15.1  
NSN 4.0 7.7 10.6 17.5 Ericsson
* * *
## 8.2 Dual TB interleaved transmission scheme (Option III)
In this section, the simulation results corresponding to MIMO Option III are
summarized, based on the reference R1-112632. The gains over SIMO are given
relative to the SIMO reference results included in subclause 8.1.
Table 8.11: UE Throughput [kbps] as a function of Rx Ec/No: UL MIMO (2x2);
Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI and Quantized
PCI -- 2 bit phase
**Mode** |  | **Unquantized PCI** | **Quantized PCI** |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---  
|  | **Average Rx Ec/No [dB]** | **Average Rx Ec/No [dB]** |  |  |  |  |  |  |   
|  | 5 | 10 | 15 | 20 | 5 | 10 | 15 | 20 |   
**MIMO** **Option III** | NSN | Throughput [kbps] |  |  |  |  | 4895 | 6861 | 9518 | 11067  
|  | Gain [%] |  |  |  |  | 1 | -3 | 10 | 27  
Table 8.12: UE Throughput [kbps] as a function of Rx Ec/No: UL MIMO (2x2);
Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI and Quantized
PCI -- 2 bit phase
**Mode** |  | **Unquantized PCI** | **Quantized PCI** |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---  
|  | **Average Rx Ec/No [dB]** | **Average Rx Ec/No [dB]** |  |  |  |  |  |  |   
|  | 5 | 10 | 15 | 20 | 5 | 10 | 15 | 20 |   
**MIMO** **Option III** | NSN | Throughput [kbps] |  |  |  |  | 4527 | 5987 | 9160 | 11140  
|  | Gain [%] |  |  |  |  | 4 | -8 | 9 | 27  
Table 8.13: 90^th^ percentile RxEc/No [dB] as a function of the average Rx
Ec/No [dB], UL MIMO (2x2), PA3 channel
* * *
**90^th^ percentile RxEc/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20**  
**MIMO Option III** NSN 7.1 13.2 18.0 23.8
* * *
Table 8.14: 90^th^ percentile RxEc/No [dB] as a function of the average Rx
Ec/No [dB], UL MIMO (2x2), VA3 channel
* * *
**90^th^ percentile RxEc/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20**  
**MIMO Option III** NSN 7.4 13.7 17.7 23.2
* * *
Table 8.15: Tx Ec/No as a function of the average Rx Ec/No: UL MIMO (2x2); PA3
Channel
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**MIMO Option III** NSN ** 3.6**** 10.5** ** 16.7**** 24.8**
* * *
Table 8.16: Tx Ec/No as a function of the average Rx Ec/No: UL MIMO (2x2); VA3
Channel
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**MIMO Option III** NSN 3.7 10.0 15.1 21.6
* * *
## 8.3 Single TB transmission scheme (Option I)
In this section, the simulation results corresponding to MIMO Option I are
summarized, based on the reference R1-112632. The gains over SIMO are given
relative to the SIMO reference results included in subclause 8.1.
Table 8.17: UE Throughput [kbps] as a function of Rx Ec/No: UL MIMO (2x2);
Adaptive rank (1 or 2) selection; PA3 Channel; Unquantized PCI and Quantized
PCI -- 2 bit phase
**Mode** |  | **Unquantized PCI** | **Quantized PCI** |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---  
|  | **Average Rx Ec/No [dB]** | **Average Rx Ec/No [dB]** |  |  |  |  |  |  |   
|  | 5 | 10 | 15 | 20 | 5 | 10 | 15 | 20 |   
**MIMO** **Option I** | NSN | Throughput [kbps] |  |  |  |  | 5011 | 6845 | 9252 | 10935  
|  | Gain [%] |  |  |  |  | 3 | -3 | 6 | 26  
Table 8.18: UE Throughput [kbps] as a function of Rx Ec/No: UL MIMO (2x2);
Adaptive rank (1 or 2) selection; VA3 Channel; Unquantized PCI and Quantized
PCI -- 2 bit phase
**Mode** |  | **Unquantized PCI** | **Quantized PCI** |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---  
|  | **Average Rx Ec/No [dB]** | **Average Rx Ec/No [dB]** |  |  |  |  |  |  |   
|  | 5 | 10 | 15 | 20 | 5 | 10 | 15 | 20 |   
**MIMO** **Option I** | NSN | Throughput [kbps] |  |  |  |  | 4563 | 6348 | 8705 | 10384  
|  | Gain [%] |  |  |  |  | 5 | -3 | 4 | 18  
Table 8.19: 90^th^ percentile RxEc/No [dB] as a function of the average Rx
Ec/No [dB], UL MIMO (2x2), PA3 channel
* * *
**90^th^ percentile RxEc/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20**  
**MIMO Option I** NSN 6.9 13.2 19.1 24.6
* * *
Table 8.20: 90^th^ percentile RxEc/No [dB] as a function of the average Rx
Ec/No [dB], UL MIMO (2x2), VA3 channel
* * *
**90^th^ percentile RxEc/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20**  
**MIMO Option I** NSN 7.4 12.7 19 24.4
* * *
Table 8.21: Tx Ec/No as a function of the average Rx Ec/No: UL MIMO (2x2); PA3
Channel
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**MIMO Option I** NSN ** 2.9**** 10.9** ** 16.9**** 24.9**
* * *
Table 8.22: Tx Ec/No as a function of the average Rx Ec/No: UL MIMO (2x2); VA3
Channel
* * *
**Average Tx Ec/No [dB]** **Unquantized PCI** **Quantized PCI**  
**Average Rx Ec/No [dB]** **Average Rx Ec/No [dB]**  
**5** **10** **15** **20** **5** **10** **15** **20**  
**MIMO Option I** NSN 3.7 9.2 16.1 23.0
* * *
# 9 Cubic metric evaluation
Depending on the UE power amplifier (PA) architecture and the ACLR
requirements specified for UL MIMO the impact on the cubic metric is one
factor that could be considered when designing the pre-coders. For this
purpose this section evaluates the impact on the cubic metric associated with
the following two pre-coding codebooks:
> **Alternative 1** : Each stream is transmitted from an individual physical
> antenna. I.e. for each pre-coding vectors there is only one non-zero antenna
> weight (see Figure 9.1).
>
> **Alternative 2** : Each stream is pre-coded with a vector such that each
> stream is transmitted from both physical antennas (see Figure 9.2).
When evaluating the merits of different pre-coders for rank-2 transmissions it
should be noted that the cubic metric is one of several factors that should be
considered. One example of another factor that should be considered (for
alternative 1) is the potential impact on channel estimation when the UE
switches between rank-2 and rank-1 transmissions.
{width="6.66875in" height="2.2993055555555557in"}
Figure 9.1: A physical channel layout where the identity matrix is used as
pre-coder.
{width="6.701388888888889in" height="2.3in"}
Figure 9.2: A physical channel layout where all the E-DPDCH and E-DPCCH
associated with the first stream and the DPCCH as well as HS-DPCCH are pre-
coded with one pre-coding vector. The S-DPCCH and the E-DPDCH and E-DPCCH
associated with the second stream are pre-coded with another orthogonal pre-
coding vector.
## 9.1 Studied codebook
In the evaluations the input signals are pre-coded with the pre-coding matrix
{width="1.0694444444444444in" height="0.5277777777777778in"} (9.1)
where {width="0.5694444444444444in" height="0.2916666666666667in"} denotes the
pre-coding vector used for the signals associated with the first stream and
{width="0.5833333333333334in" height="0.2916666666666667in"} is the pre-coding
vector applied to the signals associated with the second stream. For
alternative 1 - where each stream is transmitted from separate physical
antennas - the pre-coding matrix is given by
{width="0.8611111111111112in" height="0.5in"} (9.2)
For alternative 2 it is assumed that{width="0.9861111111111112in"
height="0.4583333333333333in"}, {width="2.44375in"
height="0.4722222222222222in"}, and that the applied pre-coding vectors are
orthogonal. Notice that the used codebook has a size of 4 and that it is
identical to the codebook used for downlink MIMO.
## 9.2 Simulation methodology
The cubic metric is defined as (in dB)
{width="3.6805555555555554in" height="0.4583333333333333in"} (9.3)
where {width="1.4583333333333333in" height="0.2638888888888889in"}is the so-
called raw cubic metric, {width="2.0965277777777778in"
height="0.2638888888888889in"}dB is the raw cubic metric of a reference WCDMA
speech signal, {width="1.125in" height="0.5in"}, _rms_ denotes the root-mean-
square, and _K_ is an empirical constant that for SC-HSUPA transmission is
1.85.
Once the cubic metric has been computed for a signal it is rounded up to so
that it belongs to the set {width="1.3194444444444444in"
height="0.2361111111111111in"} (note that the maximum cubic metric is 3.5 dB).
Given a quantized cubic metric value {width="0.5555555555555556in"
height="0.2638888888888889in"}, the maximum power backoff (MPR) is given as
{width="1.3055555555555556in" height="0.2638888888888889in"} (9.4)
When evaluating the cubic metric for the two different alternatives the
following is assumed:
  1. Random waveforms are generated for stream 1 and stream 2 (note that the random generated waveforms for the two streams are independent).
  2. Given the random waveforms:
     * For alternative 1 the cubic metric is computed at each of the two antennas.
     * For alternative 2 the cubic metric for the combined waveform for each physical antenna is computed.
  3. The average cubic metric (average of different seeds, streams and pre-coding vectors) is computed for the two alternatives.
## 9.3 Studied simulation cases
The studied scenarios are summarized in Table 9.1. It is assumed that the
DPCCH and S-DPCCH are transmitted with the same power, that the power offset
used for the E-DPCCH(s) is 1 dB, and that the power offset used for HS-DPCCH
is 4.1 dB. In the simulations a RRC filter is used and the sampling rate is 16
samples per chip. It can also be noted that if a high power offsets is used
for E-DPCCH(s) the difference in cubic metric between alternative 1 and
alternative 2 may become slightly smaller.
Table 9.1: Summary of the studied simulation cases.
* * *
**Simulation case** **Description** **E-DPDCH power offset [dB]** 1 2 SF2 + 2
SF4 (QPSK) + 0/1 HS-DPCCH 19.76 2 2 SF2 + 2 SF4 (16QAM) + 0/1 HS-DPCCH 22.76
* * *
## 9.4 Results
Figure 9.3 shows the CM for simulation case 1 and 2 outlined above. Both the
case where HS-DPCCH is transmitted and the case where HS-DPCCH is not
transmitted are considered. It can be seen that there is a cubic metric
benefit associated with alternative 1. More specifically, we observe that:
  * There is a difference in CM ranges between 0.7 to 0.9 dB depending on the simulation case.
  * The difference between alternative 1 and alternative 2 reduces as the data rate increases.
{width="4.600694444444445in" height="3.602777777777778in"}
Figure 9.3: Summary of cubic metric for the two studied scenarios.
# 10 Impact on implementation
## 10.1 Impact on UE implementation
### 10.1.1 Impact on UE transmitter
Figures 10.1, 10.2 and 10.3 show an example of a UE transmitter implementation
of UL MIMO for HSPA. Figure 10.1 shows the channel coding and multiplexing
processing assuming 2 E-DCH transport blocks are transmitted in a single 2ms
TTI. Figure 10.2 shows the spreading, precoding and modulation processing for
the rank-1 transmission.
Figure 10.3 shows the spreading, precoding and modulation processing for a
rank-2 transmission. In this case, it is assumed that the S-E-DPCCH is
transmitted on the primary stream.
{width="6.497916666666667in" height="2.5541666666666667in"}
Figure 10.1: Channel Coding and Multiplexing of E-DCH due to UL MIMO for HSPA:
2 E-DCH TBs/2ms TTI
{width="6.498611111111111in" height="4.111805555555556in"}
Figure 10.2: Spreading, Precoding, and Modulation due to UL MIMO for HSPA:
Rank-1 transmission
{width="6.503472222222222in" height="4.111805555555556in"}
Figure 10.3: Spreading, Precoding, Modulation due to UL MIMO for HSPA: Rank-2
transmission
Note: Alternatively, S-E-DPCCH may be transmitted using the secondary
precoding vector.
### 10.1.2 Impact on UE receiver
The impacts to the UE receiver implementation due to UL MIMO for HSPA that
could be expected are:
  1. Despread and demodulate the physical channel containing the PCI feedback bits and decode the PCI information.
  2. Despread and demodulate the physical channel containing the HARQ feedback for the secondary E-DCH transport block and decode the HARQ information. For an UL MIMO scheme using a single transport block, this channel may not be transmitted and so the associated processing may not be required.
  3. Despread, demodulate and decode the physical channel(s) containing parameters used for E-TFC selection on the second data stream. For an UL MIMO scheme using a single transport block, this channel may not be transmitted and so the associated processing may not be required.
  4. Translate received parameters for each HARQ process to the transport block size of the primary and secondary E-DCH transport blocks as well as the power level of the data (E-DPDCHs, S-E-DPDCHs) and associated control channels (E-DPCCH, S-E-DPCCH, S-DPCCH)
The impact to the UE implementation due to UL MIMO for HSPA is summarized in
Table 10.1. In the table, for the purposes of detailing impact, it is assumed
that two transport blocks can be transmitted and the PCI information is
transmitted using the F-DPCH channel as in the case of CLTD.
Table 10.1: Summary of Impact to UE implementation due to UL MIMO for HSPA
* * *
                                                                                           **Baseline UE Rel-10 E-DCH Category 7**   **UL MIMO UE (Rank-1 transmission) or UL CLTD UE**                                **UL MIMO UE (Rank-2 transmission)**
Maximum Number of E-DCH transport blocks within a 2ms TTI 1 1 2 Maximum number
of bits of an E-DCH transport block transmitted within a 2 ms E-DCH TTI 22996
22996 22996 Peak Data Rate [Mbps] 11.5 11.5 23 E-TFC Selection 25.321 Same as
baseline Based on parameters signalled from the NodeB, the TBS is chosen for
both the primary and secondary streams. Channel Coding and Multiplexing 25.212
Same as baseline Baseline + channel coding and multiplexing of secondary E-DCH
transport block Downlink Physical Channels 25.211 Baseline + F-DPCH^1^
Baseline + F-DPCH^1^ + physical channels for ACK and parameters for selecting
TBS on the secondary stream Uplink Physical Channels 25.211 Baseline +S-DPCCH
(SF256) Baseline + S-DPCCH (SF256) + S-E-DPDCHs (2xSF2+2xSF4) + S-E-DPCCH
(SF256) Uplink Physical Channel Power Setting Compute S-DPCCH power level as a
fixed offset with respect to DPCCH power level S-DPCCH, S-E-DPDCH and S-E-
DPCCH power levels need to be computed Precoding related logic None 4 complex
multipliers 4 complex multipliers PCI Feedback Update Rate N/A Once per sub
frame (2ms) Up to once per sub frame (2 ms) Number of DACs 1 2 2 Number of RF
Upconverters 1 2 2 Number of Power Amplifiers 1 2 2 Number of Duplexers 1 2 2
Number of Transmit Antennas 1 2^2^ 2^2^
* * *
1: If PCI feedback is not sent on the same F-DPCH that carries the UL TPC bit
2: If the non-UL MIMO legacy UE already supports Rx diversity, there is no
need to have an additional 2^nd^ transmit antenna
## 10.2 Impact on UTRAN Implementation
The impacts to UTRAN implementation that could be expected from uplink MIMO
for HSPA are summarized in Table 10.2.
Table 10.2: Summary of UTRAN Implementation Impact due to UL MIMO for HSPA
+----------------+----------------+----------------+----------------+ | | **Baseline |** UL MIMO | **UL MIMO | | | (Rel-10)** | (Rank-1 | (Rank-2 | | | | transmission) | t | | | | or UL CLTD**| ransmission)** | +----------------+----------------+----------------+----------------+ | Number of HARQ | 1 | 1 | 2 | | processes per | | | | | 2ms TTI | | | | +----------------+----------------+----------------+----------------+ | NodeB MAC-e | | Same as | Generate | | scheduler | | baseline | separate | | | | | serving grants | | | | | for primary | | | | | and secondary | | | | | HARQ process | +----------------+----------------+----------------+----------------+ | NodeB receiver | | Same as | | | RF | | baseline | | +----------------+----------------+----------------+----------------+ | Additional | | 1. Despread | | | NodeB receiver | | S-DPCCH | | | front end | | | | | baseband | | 2. Remove | | | processing | | precoding | | | | | from DPCCH | | | | | and | | | | | S-DPCCH | | | | | despread | | | | | outputs to | | | | | derive the | | | | | physical | | | | | 2x2 | | | | | channel | | | | | estimates | | | | | for each | | | | | detected | | | | | path from | | | | | DPCCH and | | | | | S-DPCCH | | | | | despread | | | | | outputs | | | | | | | | | | 3. PCI bit | | | | | | | | | | determination | | | | | based on | | | | | the | | | | | physical | | | | | 2x2 | | | | | channel | | | | | estimates | | | | | (eg. SVD | | | | | based) | | | | | | | | | | 4. Optional: | | | | | Perform | | | | | channel | | | | | synthesis. | | | | | | | | | | 5. Joint | | | | | Sp | | | | | atial/Temporal | | | | | MIMO LMMSE | | | | | equalizer | | +----------------+----------------+----------------+----------------+ | Downlink | | Baseline + PCI | Baseline +PCI | | Physical | | bits sent on | bits sent on | | Channels | | F-DPCH | F-DPCH + | | | | | signalling | | | | | overhead for | | | | | the secondary | | | | | transport | | | | | block | +----------------+----------------+----------------+----------------+ | Channel | | Same as | Baseline + | | Decoding and | | baseline | Decode | | Multiplexing | | | secondary | | | | | E-DCH | | | | | transport | | | | | block when 2 | | | | | E-DCH | | | | | transport | | | | | blocks are | | | | | transmitted | +----------------+----------------+----------------+----------------+ | RNC | | Modification | | | Implementation | | to RRC and | | | | | NBAP | | | | | configuration | | | | | procedures and | | | | | signalling | | +----------------+----------------+----------------+----------------+
# 11 Impact on specifications
This section discusses the updates that are likely to be required in order to
introduce HSUPA MIMO (FDD) into RAN specifications. It is assumed that a two-
transport block architecture is used for rank-2 transmission, as described in
section 5.
## 11.1 Impact on 25.1xx Technical Specifications
### 11.1.1 TS 25.101
TS 25.101 is the "User Equipment (UE) radio transmission and reception (FDD)"
specification.
The HSUPA MIMO introduction may require a set of requirements for UE
transmission with two antenna connectors, as well as requirements relating to
the reception of the downlink control channels supporting HSUPA MIMO
signalling.
The UE performance requirements for reception of the E-DCH related control
channels are provided in Section 10 of TS 25.101. The requirements may need to
be extended to support for potential modifications in the E-HICH, E-AGCH, and
E-RGCH channels caused by the HSUPA MIMO introduction.
If a new channel for carrying PCI feedback is introduced then the performance
requirements for this channel may be needed in Section 10.
### 11.1.2 TS 25.104
TS 25.104 is the "Base Station (BS) radio transmission and reception (FDD)"
specification.
Updates may be need to Section 8.11, which sets the E-DPDCH demodulation
requirements, such that UL MIMO demodulation requirements are provided.
Section 8.12, setting E-DPCCH signalling detection requirements, may need to
be extended to include either the modified E-DPCCH testing requirements or
requirements for a combination of the E-DPCCH and S-E-DPCCH channels in the
MIMO mode (if the S-E-DPCCH channel is introduced).
## 11.2 Impact on 25.2xx Technical Specifications
### 11.2.1 TS 25.201
TS 25.201 "Physical layer - General description" provides a general high-level
description of the of the WCDMA physical layer.
Modifications will be required to the document to reflect that the MIMO mode
is supported by the HSUPA transmission. In particular, Section 4.2.4 (Physical
layer procedures) should state that the physical layer procedures for E-DCH
MIMO transmission are covered by the specification.
### 11.2.2 TS 25.211
TS 25.211 "Physical channels and mapping of transport channels onto physical
channels (FDD)" describes the physical channels structure and the mapping
between the transport and physical channels.
Since an introduction of new physical channels is assumed for HSUPA MIMO,
corresponding changes will be required to TS 25.211. In particular, the
S-DPCCH secondary pilot channel will be introduced, although this is likely to
be defined in a compatible manner for the CLTD feature. The S-E-DPDCH physical
channel will need to be introduced.
Also, updates to E-DPCCH or a new S-E-DPCCH channel may be introduced for
control information signaling for HSUPA MIMO or both for control information
signaling and MIMO channel estimation. Section 5.2 of TS 25.211 should be
augmented to include the information about the format of the new uplink
physical channels or modifications of the existing channels. The mapping
between the transport channels and the new physical channels will be needed in
Section 6.1. The timing for the new physical channels will need to be
specified in Section 7.
In addition, changes will be needed in the downlink physical channels to
signal the control information such as the precoding transmit weight vector
index (PCI), transmission rank and scheduling grants (which may be done via
F-PCICH, HS-SCCH, E-AGCH, E-RGCH, and potentially new channels), H-ARQ
ACK/NACK (E-HICH). These changes will need to be reflected in Sections 5 and 7
of TS 25.211 if not already introduced by UL Closed Loop Transmit Diversity.
### 11.2.3 TS 25.212
TS 25.212 "Multiplexing and channel coding (FDD)" describes physical layer
processing from the stage the transport block arrives at the physical layer to
the stage when binary data are ready for mapping to physical channels.
Assuming the two TB architecture for rank-2 transmission, the processing for
each TB is likely to be the same as for the legacy single TB processing and no
MIMO-specific changes may be required in the E-DCH TB processing section 4.8.
With the introduction of HSUPA MIMO, the main changes will be required to the
sections on coding for E-DPCCH (Section 4.9 of TS 25.212), and coding for
E-AGCH (Section 4.10 of TS 25.212) that are considered in more detail below.
In addition, changes may be needed for E-RGCH and E-HICH mapping rules
described in Sections 4.11 and 4.12, respectively.
#### 11.2.3.1 Coding for E-DPCCH and/or S-E-DPCCH
The UL rank and E-TFC signalling method is for future study, however some
changes are expected, namely either a new format of the existing E-DPCCH or an
introduction a new L1 channel, the S-E-DPCCH is required.
#### 11.2.3.2 Coding for E-AGCH
Changes may be required to the E-AGCH channel coding rules set by Section 4.10
so that additional information relating to the recommended rank and/or
primary/secondary E-TFCI is included.
### 11.2.4 TS 25.213
TS 25.213 "Spreading and modulation (FDD)" defines mapping of incoming bit
streams to the constellation points, spreading of mapped QAM symbols, relative
power setting between the physical channels, as well as scrambling.
For HSUPA MIMO, TS 25.213 will need to be updated to include a description of
the spreading and modulation procedures for new physical channels, namely
S-DPCCH (unless already introduced in a forward-compatible manner by the CL TD
feature), S-E-DPCCH (if introduced), and S-E-DPDCH. The definition should
include the channelization code allocation for new channels, the I/Q mapping
rules, the modulation scheme (BPSK, 4PAM), and the quantization tables for
beta coefficients. In addition, the parameters of the existing physical
channels may also be updated or extended for rank-2 transmission.
### 11.2.5 TS 25.214
TS 25.214 "Physical layer procedures (FDD)" defines the PHY layer procedures,
including procedures related to the E-DCH operation.
Section 5 of TS 25.214 defines the power control procedures of WCDMA and will
need to be updated with the introduction of HSUPA MIMO to specify relative
power offsets (beta coefficient definitions) for new physical channels
(S-DPCCH, S-E-DPCCH if introduced, S-E-DPDCH) and potentially modify the beta
coefficients definition procedures for existing physical channels. Channel
power scaling rules at maximum and minimum power limits may need to be
extended.
The HSUPA MIMO procedure will need to be specified, either as an extension to
Section 6B or as a new section. This should cover the codebook definition,
precoding weight application to physical channels, as well as the associated
signalling. The timing relationship between the reception of a PCI or rank
indication and its application by the UE would need to be specified in TS
25.214.
### 11.2.6 TS 25.215
TS 25.215 "Physical layer - Measurements (FDD)" defines measurements to be
supported by UEs and the network. The impact to this specification is FFS.
## 11.3 Impact on 25.3xx Technical Specifications
25.3xx series includes the Medium Access Control (MAC), Radio Link Control
(RLC), Packet Data Convergence Protocol (PDCP), Radio Link Control (RLC) and
Radio Resource Control (RRC) protocols. To support HSUPA MIMO, changes may be
needed for TS 25.306, TS 25.319, TS 25.321, TS 25.322 and TS 25.331
specifications.
### 11.3.1 TS 25.306
TS 25.306 is the "UE Radio Access capabilities" specification. The HSUPA MIMO
is expected to require new UE class(es), together with the related
parameterization.
### 11.3.2 TS 25.319
TS 25.319 is the "Enhanced uplink; Overall description" specification.
Section 6 (Overall architecture of enhanced uplink DCH) will need to be
updated in Subsection 6.3 (Basic physical structure) to include a description
of the new uplink physical channels structure to be created with the
introduction of HSUPA MIMO.
MAC changes for HSUPA MIMO (Section 7) will need to define support for
parallel dual transport block transmission.
H-ARQ protocol description in Section 8 of 25.319 will need to be extended.
Section 9 (Node B controlled scheduling) will need to be updated to include
information about the MIMO scheduling functions at the Node B and UE. Also the
UE behavior related to the transmission rank selection procedure will need to
be specified.
### 11.3.4 TS 25.321
TS 25.321 is the "Medium Access Control (MAC) protocol specification" The main
required changes for the MAC protocol in order to support the HSUPA MIMO mode
include:
  * Support for MIMO scheduling and transmission rank adaptation;
  * Support for E-TFC and rank selection for the MIMO case;
  * MIMO H-ARQ support at the UE and NodeB sides (including interaction of rank adaptation and H-ARQ);
  * Support of multiplexing and demultiplexing of MAC PDUs in the MIMO mode;
  * TB segmentation and desegmentation for the dual-TB MIMO modes;
The above changes should be primarily done by extending section 11.8.
### 11.3.5 TS 25.322
TS 25.322 is the "Radio Link Control (RLC) protocol specification". Potential
changes in the RLC protocol may be needed to support reordering of the PDUs
originating from the MIMO transmissions.
### 11.3.6 TS 25.331
TS 25.331 is the "Radio Resource Control (RRC) protocol specification". The
RRC protocol will need to be extended to include the signalling relevant to
the support, configuration and activation of HSUPA MIMO transmission.
## 11.4 Impact on 25.4xx Technical Specifications
### 11.4.1 TS 25.423
TS 25.423 is the "UTRAN Iur interface Radio Network Subsystem Application Part
(RNSAP) signaling specification". The RNSAP protocol will need to be extended
to include the signalling relevant to the support, configuration and
activation of HSUPA MIMO transmission.
### 11.4.2 TS 25.433
TS 25.433 is the "UTRAN Iub interface Node B Application Part (NBAP) signaling
specification". The NBAP protocol will need to be extended to include the
signalling relevant to the support, configuration and activation of HSUPA MIMO
transmission.
# 12 Conclusion
UL MIMO offers promising throughput gains for HSPA. The gains are especially
significant at higher Rise over Thermal (RoT) values and for systems with more
than two antennas at the NodeB.
For an UL MIMO (2x2) scheme, the gains in throughput ranged from around 10% at
a RoT setting of 10dB to over 40% when the RoT was 20dB in the study
conducted. For an UL MIMO (2x4) scheme, the throughput gains were around 25%
at 10dB RoT and were over 70% when the RoT was 20dB. In scenarios where dual
stream transmissions were not applicable, single stream operation was enabled.
Similar trends were observed for both the Pedestrian A and Vehicular channels
that were studied. For further details on the results, see Section 8.
The implementation impact of UL MIMO has also been considered both from the UE
and the UTRAN perspectives. For more details on the impacts to implementation,
see Section 10. The impact on the specifications has also been taken into
account in Section 11. UL MIMO is not considered to be an excessively complex
feature to specify or to implement.
#