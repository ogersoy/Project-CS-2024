# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is a technical specification of the overall support of
High Speed Downlink Packet Access in UTRA.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 25.855: \"High Speed Downlink Packet Access (HSDPA): Overall UTRAN
Description\".
[2] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol specification\".
[3] 3GPP TS 25.319: \"FDD Enhanced Uplink: Overall description\".
[4] 3GPP TS 25.214: \"Physical Layer Procedures (FDD)\".
[5] 3GPP TS 25.331 \"Radio Resource Control (RRC)\".
[6] 3GPP TS 25.211 \"Physical channels and mapping of transport channels onto
physical channels (FDD)\".
[7] 3GPP TS 25.301 \"Radio interface protocol architecture\".
[8] 3GPP TS25.304 \"User Equipment (UE) procedures in idle mode and procedures
for cell reselection in connected mode\".
[9] 3GPP TS25.221 \"Transport channels and physical channels (TDD)\".
[10] 3GPP TS 25.224: \"Physical Layer Procedures (TDD)\".
[11] 3GPP TS 25.222: \"Multplexing and Channel Coding (TDD)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply.
**Data block:** The data transmitted to one UE on HS-DSCH in one transport
block (one or two transport blocks are transmitted per TTI in single and dual
stream transmission respectively per HS-DSCH, three transport blocks are
transmitted per TTI in three streams transmission per HS-DSCH and four
transport blocks are transmitted per TTI in four streams transmission per HS-
DSCH).
**Priority class:** One flow of data within a HS-DSCH transport channel. One
HS-DSCH can transport several priority classes (no more priority classes per
TTI than the number of transport blocks). There is only one priority class per
TTI (MAC-hs only) or several priority classes per TTI (MAC-ehs only).
**HARQ Process:** Peer state machines capable of achieving error correction by
retransmission. One process can be used only for one data block at a time.
**HARQ Entity:** Consists of all the HARQ processes of a UE for one HS-DSCH
transport channel, controlling part or all the available soft buffer capacity.
**Serving HS-DSCH radio link:** The radio link that the HS-PDSCH physical
channel(s) allocated to the UE belongs to.
**Serving HS-DSCH cell:** The cell associated with the UTRAN access point
performing transmission and reception of the serving HS-DSCH radio link for a
given UE. The serving HS-DSCH cell is always part of the current active set of
the UE.
**Serving HS-DSCH Node B:** A role a Node B may take with respect to a UE
having one or several HS-PDSCHs allocated. The serving HS-DSCH Node B is the
Node B controlling the serving HS-DSCH cell.
**HS-SCCH set:** a set of HS-SCCH which is used for HS-PDSCH allocation. There
is a maximum of four HS-SCCHs in a given HS-SCCH set. There can be multiple
HS-SCCH sets in one cell. HS-SCCH sets are independent, i.e. they can overlap
or have no intersection.
**Serving HS-SCCH set:** the HS-SCCH set being used by a given UE for HS-PDSCH
allocations.
**MAC-d flow:** a MAC-d flow is a flow of MAC-d PDUs which belong to logical
channels which are MAC-d multiplexed.
**Common MAC Flow** : a Common MAC Flow is a flow of MAC-c PDU mapped to HS-
DSCH configured for UEs in Cell_FACH.
**Paging MAC Flow** : a Paging MAC Flow is a flow of MAC-c PDU mapped to HS-
DSCH configured for UEs in Cell_PCH and URA_PCH.
**Multiflow:** A mode of operation with two simultaneous HS-DSCH transport
channels per carrier frequency, where the HS-DSCH transport channels may
belong to the same or different Node Bs.
**Assisting serving HS-DSCH Cell:** In addition to the serving HS-DSCH cell, a
cell in the same frequency, where the UE is configured to simultaneously
monitor a HS-SCCH set and receive HS-DSCH if it is scheduled in that cell.
**Assisting secondary serving HS-DSCH Cell:** In addition to the serving HS-
DSCH cell, a cell in the secondary downlink frequency, where the UE is
configured to simultaneously monitor a HS-SCCH set and receive HS-DSCH if it
is scheduled in that cell.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
16QAM 16 Quadrature Amplitude Modulation
CCTrCH Coded Composite Transport Channel
CQI Channel Quality Indicator
HARQ Hybrid Automatic Repeat Request
HSDPA High Speed Downlink Packet Access
HS-DSCH High Speed Downlink Shared Channel
HS-PDSCH High Speed Physical Downlink Shared Channel
HS-SCCH Shared Control Channel for HS-DSCH
HS-SICH Shared Information Channel for HS-DSCH
MCS Modulation and Coding scheme
MIMO single user Multple Input Multiple Output
MU-MIMO Multi-User Multiple Input Multiple Output
NW Network
QPSK Quadrature Phase Shift Keying
TFCI Transport Format Combination Indicator
TFRC Transport Format Resource Combination
TFRI Transport Format and Resource Indicator
TPC Transmit Power Control
TSN Transmission Sequence Number
UE User Equipment
# 4 Background and Introduction
High Speed Downlink Packet Access is based on techniques such as adaptive
modulation and hybrid ARQ to achieve high throughput, reduce delay and achieve
high peak rates.
It relies on a new type of transport channel, the HS-DSCH, which is terminated
in the Node B.
In FDD and 1.28Mcps TDD, the HS-DSCH reception is also supported in CELL_FACH,
CELL_PCH and URA_PCH state.
# 5 Basic structure of HS-DSCH
## 5.1 Protocol structure
The HS-DSCH functionality should be able to operate in an environment where
certain cells are not updated with HS-DSCH functionality. The PDCP and MAC-d
layers are unchanged from the Release \'99 and Release 4 architecture. In
addition to the RLC layer from Release \'99, it is possible to use Release 7
RLC layer, which is modified to support flexible RLC PDU sizes for RLC AM,
when MAC-ehs is configured.
RLC can operate in either AM or UM mode. RLC can operate in TM mode when BCCH
or PCCH is mapped on HS-DSCH in FDD and 1.28Mcps TDD.
PDCP can be configured either to perform or not to perform header compression.
MAC-d is retained in the S-RNC. Transport channel type switching is therefore
feasible.
The new functionalities of hybrid ARQ, segmentation (MAC-ehs only) and HS-DSCH
scheduling are included in the MAC layer. In the UTRAN these functions are
included in a new entities called MAC-hs and MAC-ehs located in Node B. Upper
layers configure which of the two entities, MAC-hs or MAC-ehs, is to be
applied to handle HS-DSCH functionality. The transport channel that the HS-
DSCH functionality uses is called HS-DSCH (High Speed Downlink Shared Channel)
and is controlled by the MAC-hs or MAC-ehs.
Two MAC protocol configurations are possible on the UTRAN side:
\- Configuration with MAC-c/sh: In this case, the MAC-hs or MAC-ehs in Node B
is located below MAC-c/sh in CRNC. MAC-c/sh shall provide functions to HS-DSCH
identical to those provided for the DSCH in the Release \'99. The HS-DSCH FP
(frame protocol) will handle the data transport from SRNC to CRNC (if the Iur
interface is involved) and between CRNC and the Node B.
\- Configuration without MAC-c/sh: In this case, the CRNC does not have any
user plane function for the HS-DSCH. MAC-d in SRNC is located directly above
MAC-hs or MAC-ehs in Node B, i.e. in the HS-DSCH user plane the SRNC is
directly connected to the Node B, thus bypassing the CRNC.
Both configurations are transparent to both the UE and Node B. Figures 5.1-1
and 5.1-2 show the respective radio interface protocol architecture with
termination points for the above two configurations.
The same architecture supports both FDD and TDD modes of operation, though
some details of the associated signalling for HS-DSCH are different.
In FDD, CELL_FACH, CELL_PCH and URA_PCH state HS-DSCH reception is defined in
clauses 14, and 15, a single Iub HS-DSCH FP connection can be shared by CCCH
and MAC-d(s) of different UEs.
In 1.28Mcps TDD, CELL_FACH, CELL_PCH and URA_PCH state HS-DSCH reception is
defined in clauses 16, and 17, a single Iub HS-DSCH FP connection can be
shared by CCCH and MAC-d(s) of different UEs.
Figure 5.1-1: Protocol Architecture of HS-DSCH, Configuration with MAC-c/sh
Figure 5.1-2: Protocol Architecture of HS-DSCH, Configuration without MAC-c/sh
## 5.2 Basic physical structure
### 5.2.1 HS-DSCH Characteristics
The HS-DSCH transport channel has the following characteristics:
\- An HS-DSCH transport channel is processed and decoded from one CCTrCH;
\- For FDD and 3.84 Mcps/7.68 Mcps TDD, there is only one CCTrCH of HS-DSCH
type per UE, for 1.28 Mcps TDD, there is only one CCTrCH of HS-DSCH type per
carrier per UE;
\- The CCTrCH can be mapped to one or several physical channels;
\- There is only one HS-DSCH per CCTrCH;
\- Existence in downlink only;
\- Possibility to use beam forming;
\- Possibility to use MIMO;
\- Possibility to use MIMO mode with four transmit antennas;
\- Possibility of applying link adaptation techniques other than power
control;
\- Possibility to be broadcast in the entire cell;
\- For FDD, when operating in CELL_DCH state, is always associated with a DPCH
or a F-DPCH (FDD only) and one or more shared physical control channels (HS-
SCCHs);
\- For TDD, is associated with one or more shared physical control channels
(HS-SCCHs).
### 5.2.2 DL HS-DSCH Physical layer model
#### 5.2.2.1 FDD Downlink Physical layer Model
Figure 5.2.2.1-1: Model of the UE\'s Downlink physical layer - HS-PDSCH with
associated DPCH or F-DPCH (FDD only) in CELL_DCH state. HS-PDSCH is
transmitted from cell 1 in this figure
When operating in CELL_DCH state the basic downlink channel configuration
consists of one or several HS-PDSCHs along with an associated DPCH or a F-DPCH
(FDD only) combined with a number of separate shared physical control
channels, HS-SCCHs.
When operating in CELL_FACH, CELL_PCH and URA_PCH state, as defined in clauses
14 and 15, the basic downlink channel configuration consists of one or several
HS-PDSCHs along with a number of separate shared physical control channels,
HS-SCCHs.
The set of shared physical control channels allocated to the UE at a given
time is called an HS-SCCH set. The UTRAN may use more than one HS-SCCH set in
one given cell. There is a fixed time offset between the start of the HS-SCCH
information and the start of the corresponding HS-PDSCH subframe.
Figure 5.2.2.1-2: Model of the UE\'s Downlink physical layer in CELL_FACH,
CELL_PCH and URA_PCH state (FDD only)-
The UE is provided one HS-SCCH set on HS-PDSCH configuration/re-configuration
via RRC signalling.
When operating in CELL_FACH CELL_PCH and URA_PCH state as defined in clauses
14 and 15, the UE obtains the HS-SCCH and HS-PDSCH configuration from system
information broadcast.
The number of HS-SCCHs in a HS-SCCH set as seen from the UE\'s point-of-view
can range from a minimum of one HS-SCCH to a maximum of four HS-SCCHs. The UE
shall monitor continuously all the HS-SCCHs in the allocated set.
A two-step signalling approach is used for indicating which UE has been
scheduled and for signalling the necessary information required for the UE to
decode the HS-PDSCHs.
For each HS-DSCH TTI, each Shared Control Channel (HS-SCCH) carries HS-DSCH-
related downlink signalling for one UE. The following information is carried
on the HS-SCCH:
**_-_** Transport Format and Resource Indicator (TFRI):\ The TFRI includes
information about the dynamic part of the HS-DSCH transport format, including
transport block size. The HS-SCCH also includes information about the
modulation scheme and the set of physical channels (channelisation codes) onto
which HS-DSCH is mapped in the corresponding HS-DSCH TTI. If MIMO mode is
configured, it also contains the number of transport blocks and the precoding
weight information which informs the UE of which precoding weight that is
applied to the primary transport block.
\- Hybrid-ARQ-related Information (HARQ information):\ This includes the HARQ
protocol related information for the corresponding HS-DSCH TTI (subclause
7.1.2.1) and information about the redundancy version.
The HS-SCCH carries a UE identity (via a UE-specific CRC) that identifies the
UE for which it is carrying the information necessary for decoding the HS-
PDSCH(s).
The HS-PDSCH channelisation codes that are used in a given cell are not sent
to the UE using RRC signalling. The HS-SCCH signals the set of HS-PDSCH
channelisation codes which are allocated to a UE for a given TTI.
The first part of the HS-SCCH contains the channelisation code set, precoding
weight information, number of transport blocks and the modulation scheme for
the HS-DSCH allocation with the second part containing the transport block
size and H-ARQ related information. One CRC is calculated over both parts and
the UE id, and attached to the HS-SCCH information.
In case of HS-DSCH transmission to the same UE in consecutive HS-DSCH TTIs,
the same HS-SCCH should be used for the corresponding associated downlink
signalling.
When operating in CELL_DCH state the upper layer signalling on the DCCH can be
mapped to the DCH mapped to the associated DPCH or the HS-DSCH.
#### 5.2.2.2 TDD Downlink Physical layer model
Figure 5.2.2.2-1: Model of the UE\'s physical layer (3.84 and 7.68 Mcps TDD)
Figure 5.2.2.2-2: Model of the UE\'s physical layer in CELL_DCH state (1.28
Mcps TDD)
Figure 5.2.2.2-3: Model of the UE\'s physical layer in CELL_DCH state
(1.28Mcps TDD multi-frequency HS-DSCH operation mode only)
Figure 5.2.2.2-4: Model of the UE\'s physical layer in CELL_FACH, CELL_PCH and
URA_PCH state (1.28 Mcps TDD)
When operating in CELL_DCH state, the TDD overall downlink signalling
structure is based on associated dedicated physical channels and shared
physical control channels. The downlink signalling information for support of
HS-DSCH is carried by the HS-SCCH.
For 1.28 Mcps TDD multi-frequency HS-DSCH operation mode, the associated
downlink control channel and uplink control channel pair controlling the HS-
DSCH transmission on the certain carrier shall be allocated on the same
carrier. The downlink control channel carries the HS-DSCH operation related
info and the uplink control channel carries the feedback info from the UE
side.
When operating in CELL_FACH, CELL_PCH and URA_PCH state, as defined in
subclauses 16 and 17, the basic downlink channel configuration consists of one
or several HS-PDSCHs along with a number of shared physical control channels,
HS-SCCHs, The UE obtains the HS-SCCH and HS-DSCH configuration from system
information broadcast.
As in Release \'99, the associated dedicated physical channel can also be a
fractionated channel for efficient resource usage with a corresponding
repetition period in terms of TTIs. The UE is informed of an HS-DSCH
allocation by means of a signalling message on an HS-SCCH.
For 3.84 Mcps TDD and 7.68Mcps TDD, the UE shall be allocated a set of up to
four HS-SCCHs, and shall monitor all of these HS-SCCHs continuously. In any
given TTI, a maximum of one of these HS-SCCHs may be addressed to the UE. In
the case that a UE detects a message for it on a specific HS-SCCH, then it may
restrict its monitoring of HS-SCCHs to only that HS-SCCH in the next TTI.
For 1.28 Mcps TDD, the UE shall be allocated a set of up to four HS-SCCHs per
carrier, and shall monitor all of these HS-SCCHs continuously. In any given
TTI, a maximum of one of these HS-SCCHs may be addressed to the UE on each
carrier. In the case that a UE detects a message for it on a specific HS-SCCH
on the certain carrier then it may restrict its monitoring of HS-SCCHs to only
that HS-SCCH in the next TTI on this carrier.
### 5.2.3 UL Physical layer model
Figure 5.2.3-1: Model of the UE\'s Uplink physical layer in CELL_DCH state
Figure 5.2.3-2: Model of the UE\'s Uplink physical layer in CELL_DCH state
(1.28 Mcps TDD multi-frequency HS-DSCH operation mode only)
In FDD, when operating in CELL_DCH state the uplink signalling uses an
additional DPCCH with SF=256 that is code multiplexed with the existing
dedicated uplink physical channels. The HS-DSCH related uplink signalling
consists of H-ARQ acknowledgement and channel quality indicator.
In FDD, when operating in CELL_FACH, CELL_PCH and URA_PCH state HS-DSCH
reception is as defined in clause 14 and the UE uses the common E-DCH for
uplink transmission if the UE and cell support it, otherwise it uses the RACH
for uplink transmission. The transmission of HS-DPCCH for HS-DSCH related
ACK/NACK and CQI signalling is only supported when the UE is using a common
E-DCH resource, is transmitting DTCH/DCCH data, has successfully resolved
collision, and has been so configured by the network. Otherwise the
transmission of HS-DPCCH is not supported.
In TDD, when operating in CELL_DCH state, the UE shall use a shared uplink
resource (the HS-SICH) for transmitting ACK/NACK and CQI information. The
relation between the HS-SCCH in DL and the HS-SICH in UL is pre-defined and is
not signalled dynamically on the HS-SCCH.
In 1.28Mcps TDD, when operating in CELL_FACH, CELL_PCH and URA_PCH state, HS-
DSCH reception is defined in subclause 16 and 17. UE uses E-DCH for uplink
transmission. UE in CELL_FACH state with dedicated H-RNTI can send ACK/NACK
and CQI signalling on related HS-SICH.
For 1.28 Mcps TDD multi-frequency HS-DSCH operation mode, the associated
downlink control channel and uplink control channel pair controlling the HS-
DSCH transmission on the certain carrier shall be allocated on the same
carrier. The downlink control channel carries the HS-DSCH operation related
info and the uplink control channel carries the feedback info from the UE
side.
### 5.2.4 HS-DSCH physical-layer structure in the code domain
#### 5.2.4.1 FDD
HS-DSCH relies on channelisation codes at a fixed spreading factor, SF=16. A
UE may be assigned multiple channelisation codes in the same TTI, depending on
its UE capability. Furthermore, multiplexing of multiple UEs in the code
domain within a HS-DSCH TTI is allowed.
#### 5.2.4.2 TDD
HS-DSCH relies on one or more channelisation codes with either SF=16 or SF=1,
but not both simultaneously. Transmission on one or more timeslots is also
allowed. Furthermore, a combination of code multiplexing and time multiplexing
by timeslot within a HS-DSCH TTI is allowed, but the same set of
channelisation codes must be used in all timeslots allocated to the HS-DSCH.
The HS-DSCH TTI is not allowed to cross the frame (3.84 Mcps TDD) or the sub-
frame (1.28 Mcps TDD with HS-DSCH not including TS0) boundary. For 1.28Mcps
TDD with HS-DSCH including TS0, the HS-DSCH TTI is allowed to cross the sub-
frame.
## 5.3 Transport channel attributes
The following is a list of HS-DSCH transport channel attributes:
1\. Transport block size - dynamic for first transmission. An identical
transport block size shall be applied for any retransmission. In TDD, there
shall be no support for blind transport format detection. If FDD, the blind
transport format detection is supported in HS-SCCH less operation as defined
in subclause 12.1.
2\. Transport block set size. The transport block set contains only one
transport block for single stream transmission and two transport blocks for
dual stream transmission, three transport blocks for three streams
transmission and four transport blocks for four streams transmission.
3\. Transmission Time Interval (TTI). For FDD the HS-DSCH TTI is fixed and
equal to 2ms. The HS-DSCH TTI for 3.84 Mcps TDD is 10 ms. For 1.28 Mcps TDD a
fixed 5 ms TTI shall apply.
4\. Coding parameters:
\- Type of error protection: turbo code rate 1/3.
5\. Modulation - dynamic for first transmission and retransmission. Support
for QPSK is mandatory in the UE whereas support for 16QAM and 64 QAM depends
on the UE capability.
6\. Redundancy version - dynamic.
7\. CRC size - fixed size of 24 bits. There is one CRC per TB, i.e. one CRC
per TTI for single stream transmission, two CRCs per TTI for dual stream
transmission, three CRCs per TTI for three streams transmission and four CRCs
per TTI for four streams transmission.
# 6 MAC architecture
## 6.1 HS-DSCH MAC architecture -- UE side
This subclause describes the architecture of the MAC and functional split
required to support HS-DSCH on the UE side. Both MAC-hs and MAC-ehs handle the
HS-DSCH specific functions. Upper layers configure which of the two entities,
MAC-hs or MAC-ehs, is to be applied to handle HS-DSCH functionality.
### 6.1.1 Overall architecture
Figure 6.1.1-1 shows the overall MAC architecture. The data received on HS-
DSCH is mapped to the MAC-hs or MAC-ehs. The MAC-hs or MAC-ehs is configured
via the MAC Control SAP by RRC similar to the MAC-c/sh and MAC-d, to set the
parameters in the MAC-hs or MAC-ehs such as allowed transport format
combinations for the HS-DSCH.
The associated Downlink Signalling carries information for support of HS-DSCH
while the associated Uplink Signalling carries feedback information.
In FDD, when operating in CELL_FACH CELL_PCH and URA_PCH state HS-DSCH
reception is defined in clause 14 and the transmission of HS-DPCCH for HS-DSCH
related ACK/NACK and CQI signalling is only supported when the UE is using a
common E-DCH resource, is transmitting DTCH/DCCH data, has successfully
resolved collision, and has been so configured by the network. Otherwise the
transmission of HS-DPCCH is not supported.
In 1.28Mcps TDD, when operating in CELL_FACH HS-DSCH reception is defined in
clause 16 and UE with dedicated H-RNTI sends ACK/NACK and CQI signalling on
the related HS-SICH.
Figure 6.1.1-1: UE side MAC architecture with HS-DSCH (MAC-hs)
Figure 6.1.1-2: UE side MAC architecture with HS-DSCH (MAC-ehs)
### 6.1.2 Details of MAC-d
The MAC-d entity is modified with the addition of a link to the MAC-hs or MAC-
ehs entity. The links to MAC-hs, MAC-ehs and MAC-c/sh cannot be configured
simultaneously in one UE.
The mapping between C/T MUX entity in MAC-d and the reordering buffer in MAC-
hs is configured by higher layers. One reordering buffer maps to one C/T MUX
entity and many reordering buffers can map to the same C/T MUX entity. If MAC-
ehs is configured, C/T MUX toward MAC-ehs is not used.
Figure 6.1.2-1: MAC-d architecture for MAC-hs
Figure 6.1.2-1b: MAC-d architecture for MAC-ehs
Figure 6.1.2-2: Simplified architecture showing MAC-hs inter-working in UE
Figure 6.1.2-3: Simplified architecture showing MAC-ehs inter-working in UE
### 6.1.3 Details of MAC-c/sh
The MAC-c/sh/m on the UE side is not modified for HS-DSCH operation in
CELL_DCH state.
In FDD and 1.28Mcps TDD, when operating in CELL_FACH, CELL_PCH and URA_PCH
state, HS-DSCH reception is as defined in clauses 14 and 15 for FDD, 16 and 17
for 1.28Mcps TDD, and the MAC-c/sh is depicted in figure 6.1.3-1.
Figure 6.1.3-1: UE side MAC architecture / MAC-c/sh/m details
### 6.1.4 Details of MAC-hs
In the model below the MAC-hs comprises the following entity:
  * HARQ:\ The HARQ entity is responsible for handling the HARQ protocol. For FDD and 3.84 Mcps/7.68 Mcps TDD,there shall be one HARQ process per HS-DSCH per TTI, for 1.28 Mcps TDD, there shall be one HARQ process per HS-DSCH on each carrier per TTI. The HARQ functional entity handles all the tasks that are required for hybrid ARQ. It is for example responsible for generating ACKs or NACKs. The detailed configuration of the hybrid ARQ protocol is provided by RRC over the MAC-Control SAP.
\- Reordering:\ The reordering entity organises received data blocks according
to the received TSN. Data blocks with consecutive TSNs are delivered to higher
layers upon reception. A timer mechanism determines delivery of non-
consecutive data blocks to higher layers. There is one reordering entity for
each priority class.
\- The following is allowed:
\- One MAC-hs PDU contains only MAC-d PDUs with the same priority, and from
the same MAC-d flow;
\- Different MAC-d PDU sizes can be supported in a given MAC-hs PDU.
Figure 6.1.4-1: UE side MAC architecture/MAC-hs details
Figure 6.1.4-2: UE side MAC architecture / MAC-hs details (1.28Mcps TDD multi-
frequency HS-DSCH operation mode only)
### 6.1.5 Details of MAC-ehs
The model for MAC-ehs comprises the following entities:
  * HARQ:\ The HARQ entity is responsible for handling the HARQ protocol. There shall be one HARQ process per HS-DSCH per TTI for single stream transmission and two HARQ processes per HS-DSCH per TTI for dual stream transmission. For 1.28 Mcps TDD multi-frequency HS-DSCH cell, there shall be one HARQ process per HS-DSCH on each carrier per TTI. The HARQ functional entity handles all the tasks that are required for hybrid ARQ. It is for example responsible for generating ACKs or NACKs. The detailed configuration of the hybrid ARQ protocol is provided by RRC over the MAC-Control SAP. There can be 1 to 8 HARQ entities, depending on the configuration. For 1.28 Mcps TDD multi-frequency HS-DSCH cell, there can be 1 to 6 HARQ entities, depending on the configurations.
\- Disassembly
The disassembly entity disassembles the MAC-ehs PDUs.
\- Reordering queue distribution
The reordering queue distribution function routes the received MAC-ehs SDUs or
segments of MAC-ehs SDUs to correct reordering queues based on the received
logical channel identifier.
\- Reordering:\ The reordering entity organises received MAC-ehs SDUs or
segments of MAC-ehs SDUs according to the received TSN. Data blocks with
consecutive TSNs are delivered to higher layers upon reception. A timer
mechanism determines delivery of non-consecutive data blocks to higher layers.
There is one reordering entity for each priority class.
\- Reassembly:
The reassembly entity reassembles segmented MAC-ehs SDUs (corresponding to
either MAC-c or MAC-d PDUs) and forwards the MAC PDUs to LCH-ID demultiplexing
entity.
\- LCH-ID demultiplexing:\ The demultiplexing entity routes the MAC-ehs SDUs
to correct logical channel based on the received logical channel identifier.
\- The following is allowed:
> \- The MAC-ehs SDUs included in a MAC-ehs PDU can have a different size and
> a different priority and can be mapped to different MAC-d flows.
Figure 6.1.5-1: UE side MAC architecture/MAC-ehs details
Figure 6.1.5-2: UE side MAC architecture/MAC-ehs details (1.28Mcps TDD multi-
frequency HS-DSCH operation mode only)
## 6.2 HS-DSCH MAC architecture -- UTRAN side
This subclause describes the modifications to the MAC model with respect to
the Release \'99 model to support the features for HS-DSCH on the UTRAN side.
Both MAC-hs and MAC-ehs are responsible for handling the data transmitted on
the HS-DSCH. Furthermore they are responsible for the management of the
physical resources allocated to HS-DSCH. Upper layers configure which of the
two entities, MAC-hs or MAC-ehs, is to be applied to handle HS-DSCH
functionality.
### 6.2.1 Overall architecture
New MAC functional entities, the MAC-hs and the MAC-ehs, are added to the MAC
architecture of Release \'99. Both the MAC-hs and the MAC-ehs are located in
the Node B. If an HS-DSCH is assigned to the UE the MAC-hs and MAC-ehs SDUs,
i.e. MAC-d PDUs to be transmitted are transferred from MAC-c/sh to the MAC-hs
or MAC-ehs via the Iub interface in case of Configuration with MAC-c/sh, or
from the MAC-d via Iur/Iub in case of Configuration without MAC-c/sh.
In FDD and 1.28Mcps TDD, in HS-DSCH transmission for the UE in CELL_FACH,
CELL_PCH and URA_PCH state, the HS-DSCH operation is as defined in clause 14
and 15 for FDD, 16 and 17 for 1.28Mcps TDD, and the same overall MAC
architecture is used, with the addition that MAC-c/sh SDUs from CCCH and PCCH
can be transferred to MAC-ehs.
Figure 6.2.1-1: UTRAN side overall MAC architecture, MAC-hs
Figure 6.2.1-1b: UTRAN side overall MAC architecture, MAC-ehs
The multiplexing chain for HS-DSCH on the UTRAN side is illustrated below:
Figure 6.2.1-2: UTRAN side of MAC multiplexing for MAC-hs
Figure 6.2.1-3: Multiplexing and protocol architecture for MAC-ehs.
NOTE: In figure 6.2.1-3 the MAC-ehs support multiplexing between different UEs
similarly to MAC-hs.
### 6.2.2 Details of MAC-c/sh
The data for the HS-DSCH is subject to flow control between the serving and
the drift RNC.
A new flow control function is included to support the data transfer between
MAC-d and MAC-hs/MAC-ehs.
Figure 6.2.2-1: UTRAN side MAC architecture/MAC-c/sh details
In FDD and 1.28Mcps TDD, when operating in CELL_FACH, CELL_PCH and URA_PCH,
HS-DSCH reception is as defined in clauses 14 and 15 for FDD, 16 and 17 for
1.28Mcps TDD, and the MAC-c/sh can transfer CCCH and PCCH PDUs to MAC-ehs and
the MAC-c/sh does not include any MAC-c/sh protocol header for those logical
channels. MAC-c adds the U-RNTI when required to the RLC PDU of the SRB#1.
### 6.2.3 Details of MAC-hs
MAC-hs receives configuration parameters from the RRC layer via the MAC-
Control SAP. There shall be priority handling per MAC-d PDU in the MAC-hs. The
MAC-hs is comprised of four different functional entities:
\- Flow Control:\ This is the companion flow control function to the flow
control function in the MAC-c/sh in case of Configuration with MAC-c/sh and
MAC-d in case of Configuration without MAC-c/sh. Both entities together
provide a controlled data flow between the MAC-c/sh and the MAC-hs
(Configuration with MAC-c/sh) or the MAC-d and MAC-hs (Configuration without
MAC-c/sh) taking the transmission capabilities of the air interface into
account in a dynamic manner. This function is intended to limit layer 2
signalling latency and reduce discarded and retransmitted data as a result of
HS-DSCH congestion. Flow control is provided independently per priority class
for each MAC-d flow.
> \- Scheduling/Priority Handling:\ This function manages HS-DSCH resources
> between HARQ entities and data flows according to their priority class.
> Based on status reports from associated uplink signalling either new
> transmission or retransmission is determined when operating in CELL_DCH
> state. In FDD, When operating in CELL_FACH, CELL_PCH and URA_PCH state HS-
> DSCH reception as defined in clauses 14 and 15, the MAC-hs can perform
> retransmission without uplink signalling. Further it sets the priority class
> identifier and TSN for each new data block being serviced. To maintain
> proper transmission priority a new transmission can be initiated on a HARQ
> process at any time. The TSN is unique to each priority class within a HS-
> DSCH, and is incremented for each new data block. It is not permitted to
> schedule new transmissions, including retransmissions originating in the RLC
> layer, within the same TTI, along with retransmissions originating from the
> HARQ layer.
>
> \- HARQ:\ One HARQ entity handles the hybrid ARQ functionality for one user.
> One HARQ entity is capable of supporting multiple instances (HARQ process)
> of stop and wait HARQ protocols. For FDD and 3.84 Mcps/7.68 Mcps TDD, there
> shall be one HARQ process per TTI , for 1.28 Mcps TDD, there shall be one
> HARQ process per HS-DSCH on each carrier per TTI.
>
> In 1.28 Mcps TDD multi-frequency HS-DSCH cell:
>
> \- multiple HARQ processes are assigned for HS-DSCH operaton on every
> carrier for every user , namely HARQ sub-entity; only one HARQ process in
> HARQ sub-entity is allowed to receive HS-DSCH in one TTI for each carrier.
>
> \- Choice of 6bit or 9bit TSN is configured by upper layer signalling.
\- TFRC selection:\ Selection of an appropriate transport format and resource
combination for the data to be transmitted on HS-DSCH.
Figure 6.2.3-1: UTRAN side MAC architecture/MAC-hs details
Figure 6.2.3-2: UTRAN side MAC architecture / MAC-hs details(1.28Mcps TDD
multi-frequency HS-DSCH operation mode only)
### 6.2.4 Details of MAC-ehs
MAC-ehs receives configuration parameters from the RRC layer via the MAC-
Control SAP. There shall be priority handling per MAC-ehs SDU in the MAC-ehs.
The MAC-ehs comprises of six different functional entities:
\- Flow Control:\ The flow control for MAC-ehs is identical to the flow
control for MAC-hs.
> \- Scheduling/Priority Handling:\ This function manages HS-DSCH resources
> between HARQ entities and data flows according to their priority class. In
> FDD, the scheduler determines for each TTI if single or dual stream
> transmission should be used. Based on status reports from associated uplink
> signalling either new transmission or retransmission is determined when
> operating in CELL_DCH state. In FDD, when operating in CELL_FACH, CELL_PCH
> and URA_PCH state HS-DSCH reception, the MAC-ehs can perform retransmission
> without uplink signalling. Further it sets the logical channel identifiers
> for each new reordering SDU and TSNs for each new reordering PDU being
> serviced. To maintain proper transmission priority a new transmission can be
> initiated on a HARQ process at any time. The TSN is unique to each priority
> class within a HS-DSCH. It is not permitted to schedule new transmissions,
> including retransmissions originating in the RLC layer, within the same TTI
> over the same HS-DSCH, along with retransmissions originating from the HARQ
> layer.
>
> \- HARQ:\ One HARQ entity handles the hybrid ARQ functionality for one user
> per HS-DSCH transport channel. One HARQ entity is capable of supporting
> multiple instances (HARQ process) of stop and wait HARQ protocols. There
> shall be one HARQ entity per HS-DSCH, one HARQ process per TTI for single
> stream transmission and two HARQ processes per TTI for dual stream
> transmission.
>
> In 1.28 Mcps TDD multi-frequency HS-DSCH cell:
>
> \- multiple HARQ processes are assigned for HS-DSCH operaton on every
> carrier for every user, namely HARQ sub-entity; only one HARQ process in
> HARQ sub-entity is allowed to receive HS-DSCH in one TTI for each carrier.
>
> \- Choice of 6bit or 9bit TSN is configured by upper layer signalling.
\- TFRC selection:\ The TFRC selection for MAC-ehs is identical to the TFRC
selection of the MAC-hs.
  * Priority Queue MUX:\ This function determinates the number of octets to be included in a MAC-ehs PDU from each priority queue based on the scheduling decision and available TRFC for this function.
> \- Segmentation:\ This function performs necessary segmentation of MAC-ehs
> SDUs.
Figure 6.2.4-1: UTRAN side MAC architecture/MAC-ehs details.
Figure 6.2.4-2: UTRAN side MAC architecture / MAC-ehs details (1.28Mcps TDD
multi-frequency HS-DSCH operation mode only)
# 7 HARQ protocol
The HARQ protocol is based on an asynchronous downlink and synchronous uplink
scheme. The ARQ combining scheme is based on Incremental redundancy. Chase
Combining is considered to be a particular case of Incremental Redundancy. The
UE soft memory capability shall be defined according to the needs for Chase
combining. The soft memory is partitioned across the HARQ processes in a semi-
static fashion through upper layer signalling. The UTRAN should take into
account the UE soft memory capability when configuring the different transport
formats (including possibly multiple redundancy versions for the same
effective code rate) and when selecting transport formats for transmission and
retransmission.
## 7.1 Signalling
### 7.1.1 Uplink
In the uplink, a report is used indicating either ACK (positive
acknowledgement) or NACK (negative acknowledgement).
### 7.1.2 Downlink
#### 7.1.2.1 Shared control channel signalling
The following HARQ protocol parameters are carried on the HS-SCCH:
\- HARQ process identifier:
\- Every HARQ process is assigned an identifier, which is used to couple the
processes in the transmitter and the receiver. For dual stream, three stream
and four stream transmissions a pair of HARQ process identifiers is indicated
by the HS-SCCH.
\- New data indicator:
\- It is used to distinguish between data blocks. It is specific to the HARQ
process. It is incremented for each new data block. For MIMO mode and MIMO
mode with four transmit antennas, the new data indicator is implied by the
redundancy version indicator carried on the HS-SCCH.
#### 7.1.2.2 In-band signalling on HS-DSCH
The following parameters are signalled in-band in the MAC-hs header to support
in-sequence delivery and priority handling at the UE. These parameters are
protected by the same CRC as the Data block. For MAC-hs the parameters are:
\- Re-ordering Queue Identity:
\- It is used to identify the re-ordering buffer destination of a MAC-hs PDU.
\- Transmission sequence number:
\- It is incremented for each new data block destined to a re-ordering buffer.
It is used for reordering to support in-sequence delivery.
For MAC-ehs, the parameters are:
\- Logical Channel Identity:
\- It is used to identify the logical channel and the re-ordering buffer
destination of a MAC-ehs SDUs or segments of MAC-ehs SDUs.
\- Transmission sequence number:
\- It is used for reordering to support in-sequence delivery.
> \- Length of the MAC-ehs SDU or the segment of the MAC-ehs SDU included in
> the MAC-ehs PDU.
Additionally the following parameter is signalled in-band in the MAC-ehs
header to support MAC-ehs SDU segmentation in Node B and reassembly at the UE.
\- Segmentation indication.
## 7.2 Void
## 7.3 Void
## 7.4 Error handling
The most frequent error cases to be handled are the following:
\- NACK is detected as an ACK. The NW starts afresh with new data in the HARQ
process. The data block is discarded in the NW and lost. Retransmission is
left up to higher layers.
\- ACK is detected as a NACK: If the network retransmits the data block, the
UE will re-send an ACK to the network. If in this case the transmitter at the
network sends an abort indicator by incrementing the New Packet Indicator, the
receiver at the UE will continue to process the data block as in the normal
case.
\- If a CRC error on the HS-SCCH is detected, UE receives no data and sends no
status report. If the absence of the status report is detected, NW can
retransmit the block.
# 8 Signalling parameters
## 8.1 Downlink signalling parameters
### 8.1.1 UE identification
This identifies the UE (or UEs) for which data is transmitted in the
corresponding HS-DSCH TTI. The UE identity is implicitly carried on the HS-
SCCH through inclusion in the CRC calculation.
### 8.1.2 Transport Block Sizes
This defines what transport block size is used in the corresponding HS-DSCH
TTI. The signalled parameter is an index to a pre-defined set of available
transport block sizes. Note that for MIMO, there can be two transport block
sizes in a TTI and for combined dual cell HSDPA with MIMO, there can be up to
four transport block sizes in a TTI. For MIMO mode with four transmit antennas
the second and the third transport block sizes are same for three stream
transmission and for four stream transmission, the size of first and fourth
transport blocks is identical for four stream transmission [4].
### 8.1.3 Channelisation codes (FDD only)
This identifies to the UE (or UEs) the codes it (they) should receive and
decode.
### 8.1.4 HS-PDSCH configuration (TDD only)
This identifies to a UE the timeslots and codes it should receive and decode.
Additionally, which transport formats are applied on HS-DSCH is also
signalled. An identical set of channelisation codes is used in each of the
identified timeslots.
### 8.1.5 HARQ information
Details of signalling parameters for the HARQ Protocol can be found in
subclause 7.1.2. In addition, to support the Incremental Redundancy combining
scheme, the Redundancy version is also signalled on the HS-SCCH.
### 8.1.6 Measurement feedback rate (FDD only)
This identifies the feedback rate for downlink quality measurement. This
information may be sent at a much lower rate than the other parameters
described in this subclause.
### 8.1.7 HS-PDSCH power offset
Default power offset between HS-DSCH code channel and P-CPICH (or S-CPICH in
case beamforming with S-CPICH is used).
### 8.1.8 Void
### 8.1.9 Void
### 8.1.10 HS-SCCH Cyclic Sequence Number (HCSN) (TDD only)
A cyclic counter that is incremented each time a HS-SCCH transmission is sent
to a given UE. Separate counters are maintained for each UE. The counter is
used by the UE to estimate the BLER on the HS-SCCH for the purposes of closed
loop power control.
In 1.28Mcps TDD, in HS-DSCH transmission in CELL_FACH and CELL_PCH state as
defined in subclause 16 and 17, UE without a dedicated H-RNTI in CELL_FACH
state and UE in CELL_PCH state ignores the value of HCSN.
## 8.2 Uplink signalling parameters
### 8.2.1 ACK/NACK
A one-bit indication per stream is used by the HARQ protocol to indicate a
successful/unsuccessful transmission on the HS-DSCH for single and dual stream
transmisions. For three stream transmission one bit indication is used to
indicate a successful/unsuccessful transmission for the first transport block,
while one bit indication is used to indicate a successful/unsuccessful
transmission of second and third transport blocks. Note that the bit indicates
a successful transmission of both the transport blocks when both second and
third transport blocks are successfully decoded individually. For four stream
transmission, one bit indication is used to indicate a successful/unsuccessful
transmission of first and fourth transport blocks. Note that the bit indicates
a successful transmission of both the transport blocks when both second and
third transport blocks are successfully decoded individually. While one bit
indication is used to indicate a successful/unsuccessful transmission of
second and third transport blocks. Note that the bit indicates a successful
transmission of both the transport blocks when both second and third transport
blocks are successfully decoded individually.
In FDD in HS-DSCH reception in CELL_FACH state is as defined in clause 14, the
ACK/NACK feedback is provided only if the UE is transmitting on a common E-DCH
resource, is transmitting DTCH/DCCH traffic, has successfully resolved
collision, and has been so configured by the network. Otherwise ACK/NACK
feedback is not provided.
In 1.28Mcps TDD in HS-DSCH reception in CELL_FACH state as defined in clause
16, the ACK/NACK feedback is provided only when UE has a dedicated H-RNTI.
### 8.2.2 Measurement report
Measurement feedback information contains channel quality indicator that may
be used to select transport format and resource by HS-DSCH serving Node-B. For
FDD, the transmission rate of the measurement report to the network is
configured by higher layer signalling. For TDD, when operating in CELL_DCH
state, when operating in CELL_DCH state, a measurement report is associated
with each HS-SCCH transmission.
In FDD in HS-DSCH reception in CELL_FACH state as defined in clause 14, the
measurement result on RACH can be used for link adaptation as defined in
subclause 14.2. Other measurement feedback information, such as CQI, can be
sent if the UE is transmitting on a common E-DCH resource, is transmitting
DTCH/DCCH has successfully resolved collision, and has been so configured by
the network. The transmission rate of this other measurement feedback
information is configured by higher layer signalling.
In 1.28Mcps TDD in HS-DSCH reception in CELL_FACH state as defined in clause
16, the measurement result on RACH can be used for initial link adaptation as
defined in subclause 16.2. When UE is allocated a dedicated H-RNTI, a
measurement report is associated with each HS-SCCH transmission.
# 9 Mobility procedures
While in CELL_DCH state, the UE may be allocated one or more HS-PDSCH(s),
allowing it to receive data on the HS-DSCH(s).
Mobile evaluated hard-handover and soft-handover mechanisms provide the RRC
connection mobility in CELL_DCH state. The mobility procedures are affected by
the fact that the HS-PDSCH allocation for a given UE belongs to only one of
the radio links assigned to the UE, the _serving HS-DSCH radio link_. The cell
associated with the serving HS-DSCH radio link is defined as the _serving HS-
DSCH cell_.
A _serving HS-DSCH cell change_ facilitates the transfer of the role of
serving HS-DSCH radio link from one radio link belonging to the source HS-DSCH
cell to a radio link belonging to the target HS-DSCH cell.
Figure 9-1: Serving HS-DSCH cell change
The serving HS-DSCH cell change may be further categorised in regards to
whether the decision of the target HS-DSCH cell is made by the UE or by the
network. In Release 5, only network controlled serving HS-DSCH cell changes
shall be supported.
In case of a _network-controlled serving HS-DSCH cell change_ the network
makes the decision of the target HS-DSCH cell, and the decision could be based
on UE measurement reports and other information available in the network. A
network controlled HS-DSCH cell change is performed as an RRC layer signalling
procedure and is based on the existing handover procedures in CELL_DCH state.
## 9.1 Serving HS-DSCH cell change
With regard to the way a serving HS-DSCH cell change is performed with respect
to the dedicated physical channel configuration, the following categories
exist:
1\. Serving HS-DSCH cell change while keeping the dedicated physical channel
configuration and the active set;
2\. Serving HS-DSCH cell change in combination with an establishment, release
and/or reconfiguration of dedicated physical channels (note: this may by
definition imply an update of the active set);
3\. Serving HS-DSCH cell change in combination with active set update in soft
handover.
With respect to synchronisation between UE and UTRAN as to when transmission
and reception is stopped and re-started, two possibilities for a serving HS-
DSCH cell change exist:
1\. Synchronised serving HS-DSCH cell change: Start and stop of HS-DSCH
transmission and reception is performed at a certain time typically selected
by the network;
2\. Unsynchronised serving HS-DSCH cell change: Start and stop of HS-DSCH
transmission and reception is performed \"as soon as possible\" (stated by UE
performance requirements) at either side.
The serving HS-DSCH cell change may also be categorised with respect to the
serving HS-DSCH Node B:
1\. Intra-Node B serving HS-DSCH cell change: The source and target HS-DSCH
cells are both controlled by the same Node B. The serving HS-DSCH Node B is
not changed.
2\. Inter-Node B serving HS-DSCH cell change: The Node B controlling the
target HS-DSCH cell is different from the Node B controlling the source HS-
DSCH cell.
The cell-Node B relations shall remain transparent for the UE and the UE
should therefore shall not be aware of whether the serving HS-DSCH cell change
procedure is of a intra-Node B or inter-Node B nature.
At an Inter-Node B serving HS-DSCH cell change, a _serving HS-DSCH Node B
relocation_ needs to be performed at the UTRAN. Serving HS-DSCH Node B
relocation and serving HS-DSCH cell change are two separate procedures, even
if serving HS-DSCH Node B relocation cannot be performed without a serving HS-
DSCH cell change (but the other way is possible).
Figure 9.1-1: Inter-Node B serving HS-DSCH cell change combined with serving
HS-DSCH Node B relocation
During a serving HS-DSCH Node B relocation, the HARQ entities located in the
source HS-DSCH Node B belonging to the specific UE are deleted and new HARQ
entities in the target HS-DSCH Node B are established. Different CRNCs may
control the source and target HS-DSCH Node B.
## 9.2 Serving HS-DSCH cell change mechanisms
In the case of AM RLC mode, the polling function either pre- or post- HS-DSCH
cell change can be utilised to obtain the status of the data transmission to
the UE at the RLC level.
## 9.3 Intra-Node B synchronised serving HS-DSCH cell change
Figure 9.3-1 illustrates an intra-Node B serving HS-DSCH cell change while
keeping the dedicated physical channel configuration and the active set, using
the Physical channel reconfiguration procedure. The transition from source to
target HS-DSCH cell is performed synchronised, i.e. at a given activation
time.
In this example, the UE transmits a MEASUREMENT REPORT message containing
intra-frequency measurement results, here assumed to be triggered by the event
1D \"change of best cell\". When the SRNC has performed the handover decision,
the Node B is prepared for the serving HS-DSCH cell change at an activation
time indicated with CPHY-RL-Commit-REQ primitive. The SRNC then sends a
PHYSICAL CHANNEL RECONFIGURATION message, which indicates the target HS-DSCH
cell and the activation time to the UE. Since the same Node B controls both
the source and target HS-DSCH cells we assume there is no need to reset the
MAC-hs or MAC-ehs entities. When the UE has completed the serving HS-DSCH cell
change it transmits a PHYSICAL CHANNEL RECONFIGURATION COMPLETE message to the
network.
In this example it is assumed that HS-DSCH transport channel and radio bearer
parameters do not change. If transport channel or radio bearer parameters
shall be changed, the serving HS-DSCH cell change would need to be executed by
a Transport channel reconfiguration procedure or a Radio bearer
reconfiguration procedure, respectively.
Figure 9.3-1: Intra-Node B synchronised serving HS-DSCH cell change
## 9.4 Inter-Node B synchronised serving HS-DSCH cell change during hard
handover
Figure 9.4-1 illustrates a synchronised inter-Node B serving HS-DSCH cell
change in combination with hard handover. The reconfiguration is performed in
two steps within UTRAN. On the radio interface only a single RRC procedure is
used.
Here we assume the UE transmits a MEASUREMENT REPORT message containing intra-
frequency measurement results, triggered by the event 1D \"change of best
cell\". The SRNC determines the need for hard handover based on received
measurement reports and/or load control algorithms (measurements may be
performed in compressed mode for FDD).
In the first step, the SRNC establishes a new radio link in the target Node B.
In the second step this newly created radio link is prepared for a
synchronised reconfiguration to be executed at a given activation time
indicated in the CPHY-RL-Commit-REQ primitive. After the first step, the
target Node B starts transmission and reception on dedicated channels. At the
indicated activation time, transmission of HS-DSCH is started in the target
HS-DSCH Node B and stopped in the source HS-DSCH Node B.
The SRNC then sends a TRANSPORT CHANNEL RECONFIGURATION message on the old
configuration. This message indicates the configuration after handover, both
for DCH and HS-DSCH. The TRANSPORT CHANNEL RECONFIGURATION message includes a
flag indicating that the MAC-hs or the MAC-ehs entity in the UE shall be
reset. The message also includes an update of transport channel related
parameters for the HS-DSCH in the target HS-DSCH cell.
The UE terminates transmission and reception on the old radio link at the
activation time indicated in the TRANSPORT CHANNEL RECONFIGURATION message,
and configures its physical layer to begin reception on the new radio link.
After L1 synchronisation has been established, the UE sends a TRANSPORT
CHANNEL RECONFIGURATION COMPLETE message. The SRNC then terminates reception
and transmission on the old radio link for dedicated channels and releases all
resources allocated to the considered UE.
Note that in this inter-Node B handover example, RLC for
transmission/reception on HS-DSCH is stopped at both the UTRAN and UE sides
prior to reconfiguration and continued when the reconfiguration is completed.
It is furthermore assumed in this example that the TRANSPORT CHANNEL
RECONFIGURATION message indicates to the UE that the MAC-hs or MAC-ehs entity
should be reset. A reset of the UE MAC-hs or MAC-ehs entity triggers the
delivery of the content in the re-ordering buffer to higher layers.
Figure 9.4-1: Inter-Node B synchronised serving HS-DSCH cell change during
hard handover
## 9.5 Inter-Node B synchronised serving HS-DSCH cell change after active set
update (radio link addition)
Figure 9.5-1 illustrates an inter-Node B serving HS-DSCH cell change performed
subsequent to an active set update. In this example it is assumed that a new
radio link is added which belongs to a target Node B different from the source
Node B. The cell which is added to the active set is assumed to become the
serving HS-DSCH cell in the second step. This combined procedure is comprised
of an ordinary Active Set Update procedure in the first step and a
synchronised serving HS-DSCH cell change in the second step.
We assume the UE transmits a MEASUREMENT REPORT message containing intra-
frequency measurement results. The SRNC determines the need for the combined
radio link addition and serving HS-DSCH cell change based on received
measurement reports and/or load control algorithms (measurements may be
performed in compressed mode for FDD).
As the first step, the SRNC establishes the new radio link in the target Node
B for the dedicated physical channels and transmits an ACTIVE SET UPDATE
message to the UE. The ACTIVE SET UPDATE message includes the necessary
information for establishment of the dedicated physical channels in the added
radio link (but not the HS-PDSCH). When the UE has added the new radio link it
returns an ACTIVE SET UPDATE COMPLETE message.
The SRNC will now carry on with the next step of the procedure, which is the
serving HS-DSCH cell change. The target HS-DSCH cell is the newly added radio
link, so far only including dedicated physical channels. For the synchronised
serving HS-DSCH cell change, both the source and target Node Bs are first
prepared for execution of the handover at the activation time indicated with
CPHY-RL-Commit-REQ primitive.
The SRNC then sends a TRANSPORT CHANNEL RECONFIGURATION message, which
indicates the target HS-DSCH cell and the activation time to the UE. The
message may also include a configuration of transport channel related
parameters for the target HS-DSCH cell, including an indication to reset the
MAC-hs or MAC-ehs entity.
Since source and target HS-DSCH cell are controlled by different Node Bs, MAC-
hs or MAC-ehs in source and target Node B need to be released and setup,
respectively, which is assumed to be done with CMAC-HS-Release-REQ and CMAC-
HS-Setup-REQ primitives. These MAC-hs and MAC-ehs control primitives are
assumed to be carried on the same NBAP/RNSAP messages, which carry the CPHY-
RL-Reconfig-REQ primitives. Execution of release and setup of MAC-hs or MAC-
ehs entities shall also be performed at the indicated activation time.
When the UE has completed the serving HS-DSCH cell change it returns a
TRANSPORT CHANNEL RECONFIGURATION COMPLETE message to the network.
Figure 9.5-1: Inter-Node B synchronised serving HS-DSCH cell change after
active set update
## 9.6 Serving HS-DSCH cell change with target cell pre-configuration
Figure 9.6-1 illustrates the inter-Node B serving HS-DSCH cell change
procedure with target cell pre-configuration. Target cell pre-configuration
adds robustness to the serving HS-DSCH cell change procedure by allowing the
network to send the serving HS-DSCH cell change command either over the source
cell and/or over the target cell using the HS-SCCH. The use of target cell
pre-configuration is configured by the network during the active set update
procedure.
The UE transmits a MEASUREMENT REPORT 1A or 1C message containing intra-
frequency measurement results requesting the addition of a new cell into the
active set. The SRNC establishes the new radio link in the target Node B for
the dedicated physical channels and transmits an ACTIVE SET UPDATE message to
the UE. The ACTIVE SET UPDATE message includes the necessary information for
establishment of the dedicated physical channels in the added radio link. If
SRNC decides to preconfigure the target cell, the ACTIVE SET UPDATE message
will also include the HS serving cell related configuration (e.g. H-RNTI, HS-
SCCH configuration, etc.) of the new cell. When the UE has added the new radio
link it returns an ACTIVE SET UPDATE COMPLETE message.
In a second step, the UE transmits a MEASUREMENT REPORT 1D to request the
change of the HS-DSCH serving cell to a target cell. The MEASUREMENT REPORT
message may include a calculated Activation time of the requested cell change,
that the UE has calculated using an offset signalled in the ACTIVE SET UPDATE
message before, if configured by the NW in the ASU message. The UE then starts
monitoring one HS-SCCH channel in the target cell in addition to the HS-SCCH
channels it is already monitoring in the serving HS-DSCH cell and secondary
serving HS-DSCH cells if configured. The SRNC then may send a RADIO BEARER
SETUP, RADIO BEARER RECONFIGURATION, TRANSPORT CHANNEL RECONFIGURATION or
PHYSICAL CHANNEL RECONFIGURATION message, which indicates the target HS-DSCH
cell and possibly an activation time to the UE depending on the configuration.
The message may also include a configuration of transport channel related
parameters for the target HS-DSCH cell, including an indication to reset the
MAC-hs or MAC-ehs entity.
In parallel, the target Node B may transmit the HS-SCCH in the target cell to
initiate the serving HS-DSCH cell change. If the UE has not received a RADIO
BEARER SETUP, RADIO BEARER RECONFIGURATION, TRANSPORT CHANNEL RECONFIGURATION
or PHYSICAL CHANNEL RECONFIGURATION message, it will upon receiving the HS-
SCCH in the target cell execute serving HS-DSCH cell change.
Since source and target HS-DSCH cells may be controlled by different Node Bs,
MAC-hs or MAC-ehs in source and target Node B need to be released and setup,
respectively, which is assumed to be done with CMAC-HS-Release-REQ and CMAC-
HS-Setup-REQ primitives. These MAC-hs and MAC-ehs control primitives are
assumed to be carried on the same NBAP/RNSAP messages, which carry the CPHY-
RL-Reconfig-REQ primitives. Execution of release and setup of MAC-hs or MAC-
ehs entities may also be performed at the indicated activation time.
When the UE has completed the serving HS-DSCH cell change it returns a RADIO
BEARER SETUP COMPLETE, RADIO BEARER RECONFIGURATION COMPLETE, TRANSPORT
CHANNEL RECONFIGURATION COMPLETE or PHYSICAL CHANNEL RECONFIGURATION COMPLETE
message to the network, regardless if the cell change was triggered by
reception of RADIO BEARER SETUP, RADIO BEARER RECONFIGURATION, TRANSPORT
CHANNEL RECONFIGURATION or PHYSICAL CHANNEL RECONFIGURATION message in the
source cell or HS-SCCH in the target cell. The response message type,
including the RRC transaction Id that shall be used, are provided in the
configuration given in the ACTIVE SET UPDATE message.
Figure 9.6-1: Inter-Node B serving HS-DSCH cell change with target cell pre-
configuration
# 10 Resource management
For HS-DSCH, the resources at a cell level shall be:
\- Channelisation Codes and timeslots (TDD) that can be used for the mapping
of HS-PDSCH and the HS-SCCH physical channels.
\- Power that can be used for HS-DSCH, i.e. for HS-DSCHs and HS-SCCHs.
The HS-DSCH resources are assigned by the CRNC to a Node B on a cell basis.
The HS-SCCH set for a given UE is decided by the Node B.
# 11 Discontinuous UL DPCCH transmission and discontinous reception of F-DPCH
and HSPA DL channels in FDD
In FDD the discontinous transmission and reception is a configuration of
CELL_DCH state, when F-DPCH is configured without DCH configured in Downlink
or Uplink, where the resources are allocated but discontinuous uplink DPCCH
transmission (Uplink DTX) and discontinuous downlink reception (Downlink DRX)
are possible during data inactivity. One of the options of the Uplink DTX also
allows the Node B to DRX (Uplink DRX), by restricting the starting points of
new data transmission after inactivity by the UE. The Node B has a fast
mechanism to revert to the continuous DL transmission, and the UE can revert
to the continuous UL transmission autonomously and instantaneously based on
standardised rules if more data arrives to the transmission buffer.
The discontinuous transmission and reception schemes are always enabled, upon
configuration, only after a certain configurable time. This allows
synchronisation and power control stabilisation.
From the continuous transmission, the UE and Node B can autonomously and
instantaneously revert to discontinuous UL and DL transmission based on
standardised rules.
The discontinuous transmission and reception also allows a configuration of a
new UL DPCCH slot format with an increased number of TPC bits as defined in
[6].
The configuration of Uplink DTX, Downlink DRX is always in the control of the
SRNC. In order to allow SHO with Node Bs under the control of another RNC, the
SRNC must be aware of the capabilities of all the Node Bs that provide RLs in
the UE active set.
## 11.1 Discontinuous uplink transmission
The discontinuous uplink transmission is a mechanism that defines how the UE
will discontinuously transmit the uplink DPCCH, when configured by the RNC.
The uplink DPCCH burst pattern and the uplink DPCCH preamble and postamble
together define the discontinuous uplink DPCCH operation. The discontinuous
uplink transmission is dependent on the E-DCH and HS-DPCCH activity as
described in [3] and below. The uplink DTX is mechanism that can be configured
without configuring also the uplink DRX (subclause 11.1.1), or Downlink DRX
(subclause 11.2). Additionally, the uplink DTX can operate with or without
configuring the HS-SCCH-less HS-DSCH transmission mechanisms (clause 12).
There are two patterns that can be defined for discontinuous uplink DPCCH
operation, _UE_DTX_cycle_1_ and _UE_DTX_cycle_2_. The latter is used whenever
there is no uplink data transmission activity, whilst the former is applied
depending on the duration of E-DCH inactivity. This allows uplink DPCCH
transmission rate to autonomously (based on standardised rules) adapt to the
data transmission activity, and data transmission dependent gains: for higher
data transmission activity uplink DPCCH can be configured to be transmitted
more frequently and operation is more similar to Rel-6, and for lower data
transmission activity DPCCH can be configured to be transmitted less often to
achieve higher DTX gain.
The DPCCH burst patterns can be offset using _UE_DTX_DRX_Offset_ so that
different UEs can have the DPCCH transmission phase in their DTX cycles at
different times. This offset is common for the Uplink DRX and Downlink DRX
schemes, as specified in subclasues 11.1.1 and 11.2 respectively.
The DPCCH is transmitted whenever E-DCH or HS-DPCCH is transmitted.
_UE_DTX_cycle_1_ and _UE_DTX_cycle_2_ define only the DPCCH DTX during the
E-DCH and HS-DPCCH inactivity, and have no impact on the E-DCH or HS-DPCCH
ACK/NACK transmissions as if Uplink DRX is not configured as described in
subclause 11.1.1, the E-DCH transmission is performed as defined in Rel6. When
Uplink DRX is configured, the start times of E-DCH transmissions for new data
transmissions can be restricted, after some configurable inactivity time, to a
MAC_DTX_cycle which coincides with the _UE_DTX_cycle_1_.
When the UE is not transmitting data (on E-DCH) or HS-DPCCH, the UE shall not
transmit DPCCH except for a short burst of _UE_DPCCH_burst_1_ subframes once
every _UE_DTX_cycle_1_ subframes. If the UE has not transmitted E-DCH during
the last _inactivity_threshold_for_UE_DTX_cycle_2_ E-DCH subframes, the UE
shall not transmit DPCCH except for a short burst of _UE_DPCCH_burst_2_
subframes once every _UE_DTX_cycle_2_ subframes. The UE shall DTX if it does
not have any data to transmit and when no DPCCH or HS-DPCCH transmission is
defined.
Before the uplink DPCCH transmission the UE has to transmit a 2 slots default
preamble uplink DPCCH and afterwards a 1 slot postamble uplink DPCCH. In
association with _UE_DTX_cycle_2_ if _UE_DTX_long_preamble_ is TRUE and if
there was no E-DCH transmission for the last
_Inactivity_Threshold_for_UE_DTX_cycle_2_ subframes the UE has to apply a
longer preamble of (max.) 15 slots before restarting E-DCH transmission.
The CQI on HS-DPCCH is transmitted in the HS-DPCCH sub-frames when the CQI
reporting period defined transmission overlaps with the DPCCH transmission.
However, the RNC can also configure the discontinuous uplink transmission such
that the CQI reporting takes priority over the DTX pattern for a number of
subframes after an HS-DSCH reception. If there has been no HS-DSCH reception
after a configurable period, the DTX takes priority over the CQI reporting.
The UE only receives the TPC commands on F-DPCH corresponding to actually
transmitted UL DPCCH slots.
The serving Node B can command the UE to disable (respectively re-enable) the
discontinuous uplink DPCCH transmission and revert back to continuous DPCCH
transmission by using a specific HS-SCCH- command.
The Uplink DPCCH burst pattern is illustrated in Figure 11.1-1 for 2ms E-DCH
TTI and Figure 11.1-2 for 10ms E-DCH TTI. The uplink DPCCH burst pattern
defines the minimum set of slots where the UE shall transmit the UL-DPCCH.
Thus the pattern defines the length of the transmission cycle (UE_DTX_cycle_1,
UE_DTX_cycle_2), number of slot, and slot position in the transmission cycle
that UE shall transmit UL-DPCCH.
Figure 11.1-1: Example for UL DPCCH discontinuous burst pattern for 2ms E-DCH
TTI
**Figure 11.1-2: Example for UL DPCCH discontinuous burst pattern for 10ms
E-DCH TTI**
### 11.1.1 Uplink DRX
The RNC can configure the UE to restrict the start of E-DCH transmissions to
the MAC_DTX_cycle pattern, if there has been no E-DCH transmission for a
configurable number of TTIs (_UE_Inactivity_Threshold)_. The allowed E-DCH
start times can be offset using _UE_DTX_DRX_Offset_ so that different UEs have
the allowed E-DCH start time at different time instants.The network should
configure MAC_DTX_cycle in such manner that it does not collide with an
inactived HARQ process. The uplink DRX cannot be configured without an Uplink
DTX configuration as specified in subclause 11.1.
Whenever the UE transmits one E-DCH TTI the UE can use subsequent TTIs for
E-DCH transmission as long as its transmission is continued (re-started)
within _UE_Inactivity_Threshold_ TTIs, and in addition the pending
retransmissions can be done in the corresponding HARQ processes
(retransmission times are not impacted by the inactivity threshold).
## 11.2 Downlink DRX
The downlink DRX is configurable by the RNC and allows the UE to restrict the
downlink reception times. Note that UE is also allowed to receive
continuously; discontinuous reception is not required even if it would be
configured. Nevertheless, the Downlink DRX cannot be configured without an
Uplink DTX configuration as specified in subclause 11.1.
When the discontinuous downlink reception is enabled, the UE is not required
to receive physical downlink channels, except if any of the following
conditions apply:
1\. The UE has received DRX de-activation that was not followed by a DRX
activation
2\. The UE shall receive E-HICH (sub-)frame corresponding to an E-DCH
transmission.
3\. The UE shall receive an HS-SCCH subframe due to the HS-SCCH reception
pattern.
4\. The UE shall receive an HS-PDSCH subframe due to correctly received HS-
SCCH
5\. The UE has detected an E-AGCH or an E-RGCH subframe transmission from
cell(s) in the serving RLS during the required HS-SCCH reception time and the
UE still needs to decode the rest of the E-AGCH or E-RGCH frame.
6\. The UE has received an HS-SCCH or an HS-PDSCH subframe during the last
_Inactivity_ __Threshold_for_UE_DRX_cycle_ subframes.
7\. The UE has sent scheduled E-DCH transmission during
_Inactivity_Threshold_for_UE_Grant_Monitoring_ and/or has scheduled data in
the buffer for transmission.
The HS-SCCH reception pattern is defined in such a way that the UE must
receive one HS-SCCH sub-frame every _UE_DRX_cycle_ sub-frames. The HS-SCCH
reception pattern can be offset using _UE_DTX_DRX_Offset_ so that different
UEs have the HS-SCCH reception phase at different times.
The serving Node B can command the UE to disable (respectively re-enable) the
discontinuous downlink reception and revert back to continuous downlink
reception by using a specific HS-SCCH- command.
The HS-SCCH reception pattern is illustrated by Figure 11.2-1 for a 2 ms TTI
E-DCH. The grey subframes correspond to the HS-SCCH reception pattern
_UE_DRX_cycle_ =4. The HS-SCCH discontinuous reception radio frame is 10 ms
long independently from E-DCH TTI and it is indexed using CFN_DRX. The HS-SCCH
discontinuous radio frame is divided to five HS-SCCH subframes are numbered
S_DRX=0 to S_DRX=4. S_DRX defines the HS-SCCH reception timing as defined in
[4].
{width="6.683333333333334in" height="3.841666666666667in"}
Figure 11.2-1: Example for HS-SCCH reception pattern, 2ms E-DCH TTI
The HS-SCCH reception pattern is illustrated by Figure 11.2-2 for a 10 ms TTI
E-DCH. The grey subframes correspond to the HS-SCCH reception pattern
_UE_DRX_cycle_ =5.
{width="6.683333333333334in" height="3.841666666666667in"}
Figure 11.2-2: Example for HS-SCCH reception pattern, 10ms E-DCH TTI
Furthermore, there should be no impact to the UE mobility since the UE cannot
DRX if it is required to perform measurements as specified in [5]
# 11a Downlink Control Channel Discontinuous Reception in CELL_DCH state
(1.28Mcps TDD only)
In 1.28Mcps TDD, the downlink control channel discontinuous reception is a
configuration of CELL_DCH state. The Node B has a fast mechanism to revert to
the continuous DL transmission autonomously and instantaneously based on
standardised rules if more data arrives to the transmission buffer.
When the downlink control channel discontinuous reception is enabled, the UE
is not required to receive physical downlink control channels, except if any
of the following conditions apply:
1\. The UE has received DRX de-activation.
2\. The UE shall receive E-HICH subframes corresponding to an E-DCH
transmission.
3\. The UE shall receive an HS-SCCH subframe due to the HS-SCCH reception
pattern.
4\. The UE shall monitor the HS-SCCH subframes when the timer Inactivity
Threshold for HS-SCCH DRX cycle (described in [10])has not expired.
5\. The UE shall monitor the full E-AGCH transmissions from the serving E-DCH
cell:
\- when TEBS is larger than zero,
\- or due to the E-AGCH reception pattern,
\- or when UE should receive an E-HICH transmission,
\- or the timer E_AGCH_Inactivity_Monitor_Threshold has not expired.
The HS-SCCH reception pattern is defined in such a way that the UE must
receive one HS-SCCH sub-frame every HS-SCCH DRX cycle sub-frames. The HS-SCCH
reception pattern can be offset using HS-SCCH DRX offset so that different UEs
have the HS-SCCH reception phase at different times.
The HS-SCCH reception pattern is illustrated by Figure 11a-1. The grey
subframes correspond to the HS-SCCH reception pattern HS-SCCH DRX cycle =4.
Figure 11a-1: Example for HS-SCCH reception pattern for LCR TDD
The E-AGCH reception pattern is defined as a same way as the HS-SCCH reception
pattern.
## 12 HS-SCCH-less HS-DSCH transmission in FDD
The HS-SCCH-less HS-DSCH transmission is a mechanism whereby the first HS-DSCH
transmission of small transport blocks on predefined HS-DSCH is performed
without the accompanying HS-SCCH and HARQ retransmissions of the first HS-DSCH
transmission are accompanied by the HS-SCCH.
HS-SCCH-less HS-DSCH transmission mechanism is configuration of CELL_DCH
state, when F-DPCH is configured without DCH configured in Downlink or Uplink.
The HS-SCCH-less HS-DSCH transmission mechanism can be configured with or
without a configuration of discontinous transmission and reception as defined
in subclause 11. However, if Downlink DRX is configured the times at which the
UE is mandated to be receiving HS-PDSCH and/or HS-SCCH should be taken into
account by the Node B scheduler.
Furthermore, an HS-SCCH-less HS-DSCH transmission has the following
characteristics:
\- The modulation used is restricted to QPSK.
\- Only 4 pre-defined TB formats for MAC-hs or MAC-ehs PDUs are allowed.
\- These 4 formats are chosen semi-statically, and maybe independently
configured per UE.
\- The HS-PDSCH CRC is 24-bits long and is UE specific.
\- Its generation follows the same procedure as the CRC currently on the HS-
SCCH, and therefore is covered by the 16-bit UE specific H-RNTI.
\- At most two pre-defined HS-PDSCH OVSF codes are assigned per UE
\- The pre-defined HS-PDSCH OVSF codes are semi-statically assigned per UE.
\- At anytime, the UE may receive an HS-SCCH-less HS-DSCH transmission on one
or two of the configured codes and must perform blind decoding on all 4
configured formats.
\- In order to perform blind decoding on the pre-defined HS-PDSCH OVSF codes,
UE must maintain a cyclic soft buffer storing 13 contiguous TTIs.
\- The UE does not transmit negative acknowledgements (NACK) in the first
transmission when decoding the chosen formats. It transmits ACK or NACKs for
the retransmissions.
\- HARQ is limited to:
\- 2 retransmissions.
\- The redundancy version is pre-defined and not configurable.
\- The HARQ retransmissions of an HS-SCCH-less HS-DSCH transmission are
accompanied by an HS-SCCH, which is sent with the same channel coding and
decoding as the Release 5/6 HS-SCCH. Some of the bits of the HS-SCCH are
reinterpreted in order to signal the UE the following information.
\- That the HS-SCCH is intended for HS-SCCH-less operation
\- Whether the retransmission is the first retransmission or the second
retransmission
\- The channelization code and the transport block size used by the HARQ
process
\- The HARQ combining information -- in the form of an offset from the current
TTI indicating where the previous transmission was sent
In addition, the UE continues to attempt reception of the legacy HS-SCCH in
the configured HS-SCCH set.
For a UE configured for HS-SCCH-less operation, the serving HS-DSCH cell can
deactivate and reactivate HS-SCCH-less operation by transmitting an HS-SCCH
order to the UE.
## 12.1 HS-SCCH-less timing and operation
The timing of the HS-SCCH-less operation is similar to the timing in legacy
HSDPA operation. It is depicted in Figure 12.1-1.
{width="4.070138888888889in" height="1.2944444444444445in"}
Figure 12.1-1: Illustration of the HS-SCCH-less operation
The first and second retransmissions can be asynchronous with respect to the
first transmission, and with respect to each other. The accompanying HS-SCCH
follows the same timing relationship with the HS-PDSCH transmission as legacy
transmissions do; namely the HS-SCCH starts and ends one slot before the HS-
PDSCH transmission boundaries.
If the UE is able to decode the first transmission successfully, it sends an
ACK to the Node B over the HS-DPCCH. If it is not able to decode the first
transmission, it buffers the data sent on the TTI. The retransmissions do not
require any blind combining or decoding operation as the HS-SCCH accompanying
the retransmissions carry the information needed.
In order to combine the initial HS-SCCH-less HS-DSCH transmission with the
subsequent retransmissions, the new HS-SCCH format contains a pointer to the
TTI where the previous transmission has been performed. In addition, the
redundancy version is pre-defined for the initial transmission as well as the
potential subsequent retransmissions.
# 13 MIMO modelling and operation in HSDPA channel in FDD
In FDD, certain categories of UE in CELL_DCH state may be configured to
operate in a MIMO mode.
In FDD, certain UEs in CELL_DCH state may be configured to operate in a MIMO
mode and restriction to single stream transmission only. The UE's capability
of supporting the MIMO mode when single-stream restriction is configured is
independent from the UE's support for MIMO mode when single-stream restriction
is not configured.
When the UE is configured in the MIMO mode, the HS-DSCH shall be operated
according to the following:
\- Use of MIMO in a cell does not enforce use of transmit diversity on
overhead channels
\- A MIMO capable UE can be signalled to operate in "MIMO mode" by RRC. When
not in MIMO mode it would operate as a regular non-MIMO UE.
\- in MIMO mode when single-stream restriction is not configured dynamic
scheduling of single and dual stream transmission is possible.
\- in MIMO mode when single-stream restriction is configured only single
stream transmission is possible.
\- when operating in MIMO mode, the use of F-DPCH as associated channel shall
be supported
\- when operating in MIMO mode and using F-DPCH as associated channel, only
single antenna transmission or STTD has to be supported on F-DPCH.
\- when operating in MIMO mode, the use of DPCH as associated channel shall be
supported.
\- additionally the data rate on DPCH should be limited (e.g. to 64 kbps) when
operating in MIMO mode.
\- the Rel-6 transport block sizes shall be reused without changes
\- the Node B signals the number of scheduled streams (not applicable when
single-stream restriction is configured) and the used antenna weights through
HS-SCCH.
\- a precoding codebook with 4 vectors has been defined
\- the precoding will stay constant during one HS-PDSCH TTI in MIMO mode
\- for dual stream transmissions, orthogonal precoding vectors are used
\- the Node B scheduler decides on which precoding vector(s) is/are used
\- the UE signals 1 out of 4 possible precoding vectors in the uplink
\- the UE sends sufficient information to the Node B to select the number of
streams (not applicable when single-stream restriction is configured) and the
MCSs of each stream
\- for the purpose of CQI evaluation, the UE assumes to get symmetric code
allocation across streams (not applicable when single-stream restriction is
configured).
\- the UE will ACK/NACK each transmitted transport block separately.
# 13a MIMO modelling and operation in HSDPA channel in 1.28Mcps TDD
In 1.28Mcps TDD, certain categories of UE in CELL_DCH state may be configured
to operate in a dual stream MIMO mode.
When the UE is configured in the MIMO mode, the HS-DSCH shall be operated
according to the following:
\- A MIMO capable UE can be signalled to operate in \"MIMO mode\" by RRC. When
not in MIMO mode it would operate as a regular non-MIMO UE.
\- in MIMO mode dynamic scheduling of single and dual stream transmission is
possible.
\- the Node B signals the number of data streams through HS-SCCH.
\- the Node B scheduler determines the number of data stream, single or dual
stream, according to the uplink channel estimation and CQI reports from the
UE.
\- the Node B scheduler determines the orthogonal dual stream precoding
vectors, which is obtained by SVD method of reciprocal uplink channel
estimation matrix at Node B.
\- the Node B shall not schedule UEs with different midamble allocation
schemes in the same timeslot.
\- for dual stream transmission, the two streams are denoted as stream1 and
stream2 respectively.
\- two midamble allocation patterns (pattern 1 and pattern 2) for the special
default midamble allocation scheme as in [9] shall be used for dual stream
transmission. For dual stream transmission, the association between the
special midamble allocation pattern and the data stream is predefined, i.e.
pattern 1 corresponds to stream1 and pattern 2 corresponds to stream2.
\- for dual stream transmission, the relative position of the control
signalling field in HS-SCCH and HS-SICH for the two streams is also
predefined.
\- the total bits of HS-SCCH for single and dual stream are the same.
\- for dual stream transmission, the same code allocation shall be used across
the two streams.
\- the precoding will stay constant during one HS-PDSCH TTI in MIMO mode.
\- for single stream transmission, the structure of HS-SICH is kept the same
as the legacy HS-SICH.
\- for dual stream transmission, the uplink control signalling, i.e. ACK/NACK,
RMF and RTBS information of each stream, shall be sent within one HS-SICH TTI,
then a new format of HS-SICH with SF=8 shall be used to keep the same code
rate as the legacy HS-SICH.
\- for the Node B acquiring the entire channel estimation of the two antennas
of the UE, UE should time switched transmit the uplink channels by the two
antennas, and the transmit antenna may be selected by HCSN or ECSN.
# 13b MU-MIMO operation in HSDPA channel in 1.28Mcps TDD
In 1.28Mcps TDD, MU-MIMO operation in HSDPA channel includes the following
contents.
\- Four midamble allocation patterns (pattern 1A, pattern 1B, pattern 2A,
pattern 2B) for the special default midamble allocation scheme as in [9] shall
be used for MU-MIMO operation. For the UEs sharing the same downlink physical
resource in the same TTI, the different midamble allocation patterns shall be
allocated to them.
\- A MU-MIMO capable UE can be signalled to operate in \"MU-MIMO mode\" by
RRC.
\- MU-MIMO can be applied in CELL_DCH and CELL_FACH.
\- If UE is configured in MU-MIMO mode and the default midamble allocation
scheme is signalled to UE by RRC, the default or special default midamble
allocation scheme can be used. Whether the default or special default midamble
allocation scheme is used is signalled to UE dynamically through HS-SCCH in
[11].
\- When UE is configured in MU-MIMO mode, HS-SCCH type 4 or type 8 is used to
inform the UE of the HS-DSCH related control information.
\- In CELL_DCH and CELL_FACH, the Node B scheduler decides whether to allocate
the same downlink physical resource to multiple UEs in the same TTI based on
the spatial isolation between the wireless channels of these UEs.
\- In CELL_DCH, standalone midamble channel can be used to improve the uplink
channel estimation, thus improving the wireless channel spatial isolation
decision performance.
# 13c MIMO mode with four transmit antennas modelling and operation in HSDPA
channel in FDD (FDD only)
MIMO mode with four transmit antennas operation is characterized as
simultaneous transmission of up to four streams to one UE in CELL_DCH. Certain
categories of UE in CELL_DCH state may be configured with MIMO mode with four
transmit antennas operation. A MIMO mode with four transmit antennas capable
UE can be signalled by RRC.
When the UE is configured with MIMO mode with four transmit antennas
operation:
\- It should be possible to operate 64QAM on all streams simultaneously.
\- If more than one HS-DSCH cell are configured, the TSN field in the MAC-ehs
header use 14 contiguous bits. If one HS-DSCH cell is configured and \"MIMO
mode with four transmit antennas only with dual stream restriction\" is not
configured, the TSN field in the MAC-ehs header use 14 contiguous bits.
\- Up to four HS-DSCH cells could be configured.
\- For three stream transmission, the TB of the second stream and the TB of
the third stream should be of equal size. For four stream transmission, the TB
of the first stream and the TB of the fourth stream should be of equal size,
and the TB of the second stream and the TB of the third stream should be of
equal size.
\- The UE sends the CQI, PCI and the number of TBs preferred information to
the Node B, so that the Node B can select the number of streams and the MCSs.
For the purpose of CQI, PCI and the number of TBs preferred evaluation, the UE
assumes to get symmetric code allocation across streams.
\- The Node B signals the number of scheduled streams and the used antenna
weights through HS-SCCH, a precoding codebook with 64 matrices has been
defined, the precoding will stay constant during one HS-PDSCH TTI with MIMO
mode with four transmit antennas operation, the Node B scheduler decides on
which precoding matrix to be used.
\- The UE signals 1 out of 16 possible precoding matrices per stream.
\- The DRX status is common for all streams. The DRX activation and
deactivation is possible with HS-SCCH orders.
\- When operating in MIMO mode with four transmit antennas, the use of DPCH as
associated channel shall be supported, additionally the data rate on DPCH
should be limited (e.g. to 64 kbps) when operating in MIMO mode with four
transmit antennas.
\- The mobility procedures, as defined in section 9, are supported based on
the serving HS-DSCH cell. A serving cell change similar to the one shown in
Figure 18-1 is possible for MIMO mode with four transmit antennas operation.
\- HS-SCCH-less operation is restricted to the serving HS-DSCH cell.
\- When operating in MIMO mode with four transmit antennas and using F-DPCH as
associated channel, only single antenna transmission or STTD has to be
supported on F-DPCH as defined in [6].
\- The Node B transmits 4 common pilots all the time, and 2 demodulation
common non-precoded pilots only when HS-PDSCHs are transmitted and
demodulation common non-precoded pilots are activated, where the activation
state of demodulation common non-precoded pilots is decided by the Node B and
signalled to the UE by HS-SCCH orders.
# 14 HS-DSCH reception in CELL_FACH state (FDD only)
The HS-DSCH reception in CELL_FACH state is enabled by the UTRAN by including
the parameters for HS-DSCH reception in CELL_FACH state in the system
information broadcast. Parameters include HS-SCCH, HS-DSCH configuration and
common H-RNTI. UTRAN may also reconfigure HS-DSCH reception parameters
(H-RNTI) by dedicated RRC signalling.
When HS-DSCH reception is configured in the cell, it shall take precedence
instead of reception of S-CCPCH and FACH in CELL_FACH state.
The HS-DSCH is used to enable the reception of BCCH, CCCH, DCCH and DTCH
logical channel data.
The BCCH is mapped on HS-DSCH for transmitting system information change
information to the UEs in CELL_FACH state receiving HS-DSCH. The transmission
of BCCH on HS-DSCH is performed by using BCCH specific H-RNTI on specific HS-
SCCH code indicated in system information broadcast.
Simultaneous reception of HS-DSCH and S-CCPCH is only required in case of
reception of MBMS ptm transmission.
The UE in CELL_FACH state receiving HS-DSCH performs normal cell reselection
process except during periods when it is transmitting on common E-DCH
resource, during which the UE is prevented from making cell reselections. The
inter frequency and inter RAT cell reselection is supported by HS-DSCH
measurement occasions as defined in subclause 14.3. When UE enters to a new
cell, it obtains the valid HS-SCCH configuration from system information
broadcast and performs Cell Update procedure.
UTRAN obtains the knowledge of the UE supporting the enhanced CELL_FACH state
from the RRC Connection Request / Setup Complete messages and the Cell / URA
update messages.
The HS-DSCH reception in CELL_FACH state utilizes the enhanced L2 architecture
with flexible RLC PDU size and MAC-ehs segmentation as defined in clause 6 and
in [7].
## 14.1 UE operation
When HS-DSCH reception is configured in the system information broadcast, the
UE shall after sending the RRC connection request or Cell Update, while not
having a valid C-RNTI, monitor the common H-RNTI value on the HS-SCCH.
When the UE detects the common H-RNTI the UE shall receive the corresponding
HS-DSCH TTI;
\- if after decoding the data, the CRC is correct the UE shall pass the data
to MAC-ehs;
\- if the UE received MAC-ehs PDU containing CCCH message, the UE passes MAC-
ehs PDU to MAC-ehs reordering reassembly function. The UE identity is included
in the RRC message;
\- if the UE received MAC-ehs PDU containing SRB#1 message the UE passes MAC-
ehs PDU to MAC-ehs reordering reassembly function. UE shall decode the U-RNTI
in MAC-c header to determine whether the MAC SDU is intended for it.
When the UE has an RRC connection and a valid C-RNTI and H-RNTI, the UE shall
monitor the dedicated H-RNTI on the HS-SCCH.
When the UE detects the dedicated H-RNTI value the UE shall receive the
corresponding HS-DSCH TTI;
\- if after decoding the data, the CRC is correct the UE passes the data to
MAC-ehs for reassembly and reordering;
\- after MAC-ehs processing the UE passes the complete MAC-ehs SDU directly to
the corresponding RLC entity.
For receiving system information change information, the UE shall monitor in
addition to the common H-RNTI or the dedicated H-RNTI the BCCH specific H-RNTI
on the specific HS-SCCH code indicated in system information broadcast.
When the UE detects the BCCH specific H-RNTI value the UE shall receive the
corresponding HS-DSCH TTI;
\- if after decoding the data, the CRC is correct the UE passes the data to
MAC-ehs.
The UE shall transmit HARQ-ACK information in uplink on HS-DPCCH only when it
is transmitting on a common E-DCH resource and \"ACK/NACK support on HS-
DPCCH\" is configured. Along with this, the UE shall transmit CQI information
in uplink on HS-DPCCH when \"Measurement Feedback Info\" is provided. For
uplink transmission the UE shall use the common E-DCH if the UE and cell
support it, otherwise the UE shall use the RACH.
During the state transition from CELL_FACH to CELL_DCH, if the reconfiguration
message does not include new H-RNTI the UE keeps monitoring the HS-SCCH with
the H-RNTI value used in CELL_FACH state during the uplink synchronisation
procedure, if the uplink synchronization procedure is necessary. The UE shall
continue to use the H-RNTI in CELL_DCH state after completing the state
transition to CELL_DCH state.
## 14.2 Initial link adaptation
The UE includes available, i.e. UE does not delay reporting due to performing
measurements, measurement results on RACH to uplink RRC messages based on
configuration parameters set in SIB11/12. The UE includes the measurement
results on RACH in Cell Update message when performing Cell update procedure.
If UE has valid C-RNTI and H-RNTI the UE sends the Measurement Report message
on SRB#2.
The HS-DSCH data frame header includes a \"RACH Measurement Result\" field to
which the RNC can include the received measurement results on RACH. The Node B
HS-DSCH scheduler can use this information to determine the MCS and DL
transmit power for the HS-SCCH and HS-PDSCH transmissions.
Figure 14.2-1: Link adaptation based on measurement results on RACH
## 14.3 Measurement Occasion
When HS-DSCH reception in CELL_FACH with measurement occasions is configured
the measurement period is 10ms. The measurement occasion cycle length
coefficient is signalled to the UE and to the Node B by a corresponding IE in
RRC and NBAP signalling protocol(s).
The Node B uses the dedicated H-RNTI and the cycle length coefficient to
calculate the UE's measurement period and considers it accordingly in the
scheduling of HS-DSCH transmissions. UE disregards the measurement occasions
while a common E-DCH resource is allocated to the UE
The Node B HS-DSCH scheduling can ensure that the complete HS-SCCH and HS-
PDSCH frames are received by the UE outside its measurement period.
## 14.4 Discontinuous reception
In CELL_FACH state, the UE performs continuous reception of the HS-SCCH
(expect measurement occasion frames) if DRX operation in CELL_FACH is not
configured. The discontinuous reception is enabled for the UE by the UTRAN by
the following methods:
  * Moving the UE to CELL/URA_PCH state by means of dedicated RRC reconfiguration procedure.
  * Configuring the UE with a DRX Cycle configuration for usage in CELL_FACH state. Details of the DRX operation are described in subclause 14.4.1 and 14.4.2.
In the reconfiguration procedure to CELL_PCH or URA_PCH states, the UTRAN may
indicate two DRX cycles and inactivity time. The UE shall use the first DRX
cycle and start the inactivity timer after completing the state transition. If
the inactivity timer expires in CELL/URA_PCH state the UE shall start using
second DRX cycles.
### 14.4.1 HS-DSCH DRX operation in CELL_FACH state
For the HS-DSCH DRX operation in CELL_FACH, the UTRAN indicates an inactivity
time, a DRX cycle length and a RX burst length. This information is stored by
the UE for use when in CELL_FACH state. The HS-DSCH DRX operation in CELL_FACH
state is only possible when the UE has a dedicated H-RNTI configured.
The HS-DSCH DRX operation in CELL_FACH state is initialized when the
inactivity timer expires. The inactivity timer is triggered whenever no data
transmission activities are ongoing. At this point, the UE is shall
continuously receive HS-DSCH for the length of the inactivity time configured.
Once the inactivity timer has expired, the UE may choose not to receive HS-
DSCH for a given time within the period of the configured DRX Cycle. The UE
shall receive HS-DSCH for the RX burst length of the DRX Cycle configured.
This operation is illustrated in Figure 14.4.1-1.
The UE shall interrupt DRX operation in CELL_FACH state and continuously
receive HS-DSCH, if data transmission activity is initiated.
Figure 14.4.1-1: Discontinuous HS-DSCH reception in CELL_FACH state
### 14.4.2 HS-DSCH DRX operation with second DRX cycle in CELL_FACH
For the HS-DSCH DRX operation in CELL_FACH, the UTRAN indicates 1^st^
inactivity time, 2^nd^ inactivity time, 1^st^ DRX cycle length, 2^nd^ DRX
cycle length; 1^st^ RX burst length and 2^nd^ RX burst length in case of
2-level DRX. For the HS-DSCH DRX operation in CELL_FACH, the UTRAN indicates
2^nd^ inactivity time, 2^nd^ DRX cycle length and 2^nd^ RX burst length in
case of 1-level DRX. This information is stored by the UE for use when in
CELL_FACH state. The HS-DSCH DRX operation in CELL_FACH state is only possible
when the UE has a dedicated H-RNTI configured.
{width="4.025in" height="2.1104166666666666in"}
Figure 14.4.2-0a: HS-DSCH DRX in CELL_FACH with 2-level DRX
{width="4.006944444444445in" height="2.482638888888889in"}
Figure 14.4.2-0b: HS-DSCH DRX in CELL_FACH with 1-level DRX
The HS-DSCH DRX operation in CELL_FACH state is initialized when the 1^st^ or
2^nd^ inactivity timer expires. The 1^st^ inactivity timer is triggered
whenever no data transmission activities are ongoing. At this point, the UE is
shall continuously receive HS-DSCH for the length of the 1^st^ inactivity time
configured. Once the 1^st^ inactivity timer has expired, the UE may choose not
to receive HS-DSCH for a given time within the period of the configured 1^st^
DRX cycle length. The UE shall receive HS-DSCH for the 1^st^ RX burst length
of the 1^st^ DRX cycle length configured. In case of 2-level DRX the 2^nd^
inactivity timer is triggered, when the 1^st^ inactivity timer expires. Once
the 2^nd^ inactivity timer has expired, the UE may choose not to receive HS-
DSCH for a given time within the period of the configured 2^nd^ DRX second
cycle length. The UE shall receive HS-DSCH for the 2^nd^ RX burst length of
the 2^nd^ DRX cycle length configured.
This operation is illustrated in Figure 14.4.2-1.
The UE shall interrupt DRX operation in CELL_FACH state and continuously
receive HS-DSCH, if data transmission activity is initiated. The UE shall also
interrupt DRX operation in CELL_FACH state upon reception of an HS-SCCH order
for NodeB triggered HS-DPCCH transmission during either of the 1^st^ or 2^nd^
Rx burst lengths.
{width="6.247222222222222in" height="1.3340277777777778in"}
Figure 14.4.2-1: Discontinuous HS-DSCH reception with second DRX cycle in
CELL_FACH state with 2-level DRX
{width="5.722222222222222in" height="1.3666666666666667in"}
Figure 14.4.2-2: Discontinuous HS-DSCH reception with second DRX cycle in
CELL_FACH state with 1-level DRX
# 15 HS-DSCH reception in CELL_PCH and URA_PCH states (FDD only)
The HS-DSCH reception in CELL_PCH and URA_PCH state is enabled by the UTRAN by
including the parameters for HS-DSCH reception in CELL_PCH and URA_PCH state
in the system information broadcast Parameters include PICH, HS-SCCH, and HS-
DSCH configuration used in CELL_PCH and URA_PCH state. The HS-DSCH reception
in CELL_PCH and URA_PCH state supports discontinuous reception as when DRX is
used the UE needs only to monitor one Page Indicator, PI, in one Paging
Occasion per DRX cycle.
When HS-DSCH reception is enabled in the cell, it shall take precedence
instead of reception of S-CCPCH and PCH for paging messages in CELL_PCH and
URA_PCH states.
In CELL_PCH state the HS-DSCH is used to enable the reception of BCCH, DCCH,
DTCH and PCCH logical channel data. In URA_PCH state the HS-DSCH is used to
enable the reception of PCCH logical channel data.
UTRAN obtains the knowledge of the UE supporting the reception of HS-DSCH in
CELL_PCH and URA_PCH state from the RRC Connection Setup Complete message and
the URA update message.
When the HS-DSCH reception in CELL_PCH is enabled, the UTRAN can configure the
UEs to store the C-RNTIs and dedicated H-RNTIs when performing reconfiguration
to CELL_PCH.
For UEs with stored C-RNTI and dedicated H-RNTI, the network should use the
stored dedicated H-RNTI to transmit DCCH and DTCH to the UE. When UE receives
the dedicated H-RNTI on HS-SCCH, the UE shall initiate actions on measurement
reporting on RRC as defined in subclause 14.2. When UE has uplink data to
transmit, UEs shall initiate the measurement reporting on RRC as defined in
subclause 14.2. The UE shall use the stored C-RNTI to transmit DTCH and DCCH
without first performing the Cell Update procedure.
If UTRAN has not configured the UE to store the C-RNTI and H-RNTI in CELL_PCH
the UTRAN should send paging message on PCCH mapped on HS-DSCH by HS-PDSCH
code and transport block sizes broadcasted in system information. One HS-PDSCH
code, maximum two transport block sizes and the number of PCCH transmissions
_(n)_ are broadcasted in system information.
In CELL_PCH state, when the UE is configured with a dedicated H-RNTI, the UE
is required to monitor the dedicated H-RNTI and BCCH specific H-RNTI on the
configured set of 5 associated HS-SCCHs subframes after the paging indication
is sent on the PICH. In CELL_PCH state, when the UE is not configured with a
dedicated H-RNTI, or in URA_PCH state, the UE is required to monitor the HS-
PDSCH code after paging indication on PICH.
The BCCH is mapped on HS-DSCH for transmitting system information change
information. The transmission of BCCH on HS-DSCH is performed by using BCCH
specific H-RNTI on specific HS-SCCH code indicated in system information
broadcast.
The UE in CELL_PCH and URA_PCH states receiving HS-DSCH performs normal cell
reselection process. The inter frequency and inter RAT cell reselection is
supported as previous releases. When UE enters to a new cell, it obtains the
valid HS-SCCH configuration from system information broadcast and performs
Cell Update procedure.
The HS-DSCH reception in CELL_PCH and URA_PCH state utilizes the enhanced L2
architecture with flexible RLC PDU size and MAC-ehs segmentation as defined in
clause 6 and in [7].
## 15.1 UE operation
When HS-DSCH reception is configured in the system information broadcast, the
UE shall after receiving a paging indication on PICH for its specific paging
group, perform the following:
In CELL_PCH state, when the UE is not configured with a dedicated H-RNTI, or
in URA_PCH state, the UE shall start receiving the broadcasted HS-PDSCH code
using indicated transport block sizes used for PCCH transmissions in the first
HS-DSCH subframe associated with the PICH:
\- considering that paging message is transmitted in _n_ subframes;
\- combine retransmissions to same HARQ buffer;
  * if after decoding the data, the CRC is correct the UE shall pass the data to MAC-ehs;
\- if the CRC fails after receiving _n_ subframes the UE resumes the DRX
operation.
NOTE: When the UE receives the HS-PDSCH due to reception of PCCH, the UE is
not required to receive any HS-SCCH.
The parameter _n_ is broadcasted in system information and the maximum value
of _n_ is 5 subframes.
In CELL_PCH state, when the UE is configured with a dedicated H-RNTI, start
monitoring the HS-SCCH with the stored dedicated H-RNTI and BCCH specific
H-RNTI for 5 subframes after time offset defined between PICH and HS-SCCH:
\- if the UE detects the dedicated H-RNTI on the HS-SCCH, the UE shall receive
the corresponding HS-DSCH TTI and indicate RRC to initiate sending the
measurement results on RACH in uplink:
\- if after decoding the data, the CRC is correct the UE passes the data to
MAC-ehs for reassembly and reordering;
\- after MAC-ehs processing the UE passes the complete MAC-ehs SDU directly to
the corresponding RLC entity.
\- if the UE does not detect the dedicated H-RNTI in any of the 5 subframes
the UE resumes the DRX operation.
\- if the UE detects the BCCH specific H-RNTI on the HS-SCCH, the UE shall
receive the corresponding HS-DSCH TTI:
\- if after decoding the data, the CRC is correct the UE passes the data to
MAC-ehs and resumes the DRX operation;
\- if the data has not been successfully decoded after 5 subframes the UE
resumes the DRX operation;
\- if the UE does not detect the BCCH specific H-RNTI in any of the 5
subframes the UE resumes the DRX operation.
The UE shall perform the state transition to CELL_FACH state when sending the
measurement results on RACH as defined in 14.2. For uplink transmission the UE
shall use the common E-DCH if the UE and cell support it, otherwise it shall
use the RACH. After initiating the uplink transmission, the UE shall remain in
CELL_ FACH state, unless a state change is triggered by RRC signalling. In
case, that state change to CELL_DCH is indicated in RRC message the UE shall
initiate uplink synchronisation procedure immediately, if the uplink
synchronization procedure is necessary, even if MAC layer has not indicated
transmission of the RRC message containing the measurement results on RACH.
During the state transition from CELL_PCH to CELL_DCH, if the reconfiguration
message on DCCH does not include new H-RNTI the UE keeps monitoring the HS-
SCCH with the dedicated H-RNTI value used in CELL_PCH state during the uplink
synchronisation procedure. The UE shall continue to use the dedicated H-RNTI
in CELL_DCH state after completing the state transition to CELL_DCH state.
# 16 HS-DSCH reception in CELL_FACH state (1.28Mcps TDD only)
The HS-DSCH reception in CELL_FACH state is always linked with E-DCH
transmission in CELL_FACH and Idle mode.
The HS-DSCH reception in CELL_FACH state is enabled by the UTRAN by including
the parameters for HS-DSCH reception in CELL_FACH state in the system
information broadcast. Parameters include HS-SCCH, HS-SICH, HS-DSCH
configuration and common H-RNTI. UTRAN may also reconfigure HS-DSCH reception
parameters (H-RNTI) by dedicated RRC signalling.
In a multi-frequency cell, HS-DSCH resource in CELL_FACH state can be
established on primary frequency and secondary frequencies. HS-DSCH resources
include HS-SCCH, HS-SICH, and HS-PDSCH. UTRAN can configure a working
frequency for a particular UE. Uplink transmission and downlink HS-DSCH
reception for a specific UE is on the same carrier, on which both the uplink
random access resource and downlink HS-DSCH resource should be established.
When HS-DSCH reception is configured in the cell, it shall take precedence
instead of reception of S-CCPCH and FACH for dedicated signalling data in
CELL_FACH state.
The BCCH is mapped on HS-DSCH for transmitting system information change
information to the UEs in CELL_FACH state receiving HS-DSCH. The transmission
of BCCH on HS-DSCH is performed by using BCCH specific H-RNTI on specific HS-
SCCH code indicated in system information broadcast. In a multi-frequency
cell, the transmission of BCCH on HS-DSCH is performed on all frequencies
where CELL_FACH state UEs stay and UE detects the BCCH specific H-RNTI on its
working frequency.
Simultaneous reception of HS-DSCH and S-CCPCH is only required in case of
reception of CTCH and MBMS ptm transmission.
The UE in CELL_FACH state receiving HS-DSCH performs normal cell reselection
process. When UE enters to a new cell, it obtains the valid HS-SCCH
configuration from system information broadcast and performs Cell Update
procedure.
UTRAN obtains the knowledge of the UE supporting the enhanced CELL_FACH state
from the RRC Connection Request message. The support of Enhanced CELL_FACH
state is optional for UE.
The HSDPA reception in CELL_FACH state utilizes the enhanced L2 architecture
with flexible RLC PDU size and MAC-ehs segmentation as defined in clause 6 and
in [7]. The UE in CELL_FACH state receiving HS-DSCH uses E-DCH for the uplink
transmission.
## 16.1 UE operation
When HS-DSCH reception is configured in the system information broadcast, the
UE shall after sending the RRC connection request or Cell Update, while not
having a dedicated H-RNTI, monitor the common H-RNTI value on the HS-SCCH.
In a multi-frequency cell, UE performs initial access on primary frequency,
i.e. UE sends RRC Connection Request or CELL Update when entering a new cell
after cell re-selection on primary frequency. And then UE monitors common
H-RNTI on primary frequency.
When the UE detects the common H-RNTI the UE shall receive the corresponding
HS-DSCH TTI;
\- if after decoding the data, the CRC is correct the UE shall pass the data
to MAC-ehs;
\- if the UE received MAC-ehs PDU containing CCCH message, the UE passes MAC-
ehs PDU to MAC-ehs reordering reassembly function. The UE identity is included
in the RRC message;
\- if the UE received MAC-ehs PDU containing SRB#1 message the UE passes MAC-
ehs PDU to MAC-ehs reordering reassembly function. UE shall decode the U-RNTI
in MAC-c header to determine if the MAC PDU is for it.
When receiving UE's initial access request, i.e. RRC connection request or
Cell Update after cell re-selection, RNC configure a dedicated H-RNTI, E-RNTI
and a working frequency for the UE. When the UE has an RRC connection and a
valid H-RNTI, the UE shall monitor the dedicated H-RNTI on the HS-SCCH.
When the UE detects the correct H-RNTI value the UE shall receive the
corresponding HS-DSCH TTI;
\- if after decoding the data, the CRC is correct the UE passes the data to
MAC-ehs for reassembly and reordering;
\- after MAC-ehs processing the UE passes the complete MAC-ehs SDU directly to
the corresponding RLC entity.
For uplink transmission the UE uses E-DCH. Uplink transmission and downlink
HS-DSCH reception for a specific UE is on a same carrier.
During the state transition from CELL_FACH to CELL_DCH, if the reconfiguration
message does not include new H-RNTI the UE keeps monitoring the HS-SCCH with
the H-RNTI value used in CELL_FACH state during the uplink synchronisation
procedure. The UE shall continue to use the H-RNTI in CELL_DCH state after
completing the state transition to CELL_DCH state.
## 16.2 Initial link adaptation
If UE has no dedicated H-RNTI, the UE includes available, i.e. UE does not
delay reporting due to performing measurements, measurement results on RACH to
uplink RRC messages based on configuration parameters set in SIB11/12. The UE
includes the measurement results on RACH in Cell Update message when
performing Cell update procedure.
The HS-DSCH data frame header includes a \"Measured Results on RACH\" field to
which the RNC can include the received measurement results on RACH. The Node B
HS-DSCH scheduler can use this information to determine the MCS,
retransmission times and DL transmit power for the HS-SCCH and HS-PDSCH
transmissions.
{width="4.586111111111111in" height="1.9048611111111111in"}
Figure 16.2-1: Link adaptation based on measurement results on RACH
## 16.3 Link adaptation when H-RNTI is allocated
If UE has valid H-RNTI the UE sends ACK/NACK feedback and CQI report on the
related HS-SICH. The Node B HS-DSCH scheduler can use this information to
determine the MCS, retransmission and DL transmit power for the HS-SCCH and
HS-PDSCH transmissions.
Maintaining of Uplink synchronization is not needed in CELL_FACH state, UE
could be out of synchronization after a period of transmission pause. When DL
transmission is recommenced following a transmission pause, Node B shall order
UE to establish the UL synchronization via HS-SCCH in case it detects the UE
is out of UL synchronization. The synchronization detection in Node B is based
on timer mechanism. Response to the synchronization establishment command, UE
then initiates the UL synchronization procedure. When it accomplishes the UL
synchronization establishment, UE sends E-RUCCH to Node B. During the
procedure, no HS-SICH is sent. If Node B receives E-RUCCH from the UE, the
Node B can then resume the HS-DSCH transmission for the UE.
## 16.4 Discontinuous reception
In CELL_FACH state, the UE performs continuous reception of the HS-SCCH
(expect measurement occasion frames) if DRX operation in CELL_FACH is not
configured. The discontinuous reception is enabled for the UE by the UTRAN by
the following methods:
  * Moving the UE to CELL/URA_PCH state by means of dedicated RRC reconfiguration procedure.
  * Configuring the UE with a DRX Cycle configuration for usage in CELL_FACH state. The DRX configuration is CELL specific. Details of the DRX operation are described in 16.4.1.
In the reconfiguration procedure to CELL_PCH or URA_PCH states, the UTRAN may
indicate two DRX cycles and inactivity time. The UE shall use the first DRX
cycle and start the inactivity timer after completing the state transition. If
the inactivity timer expires in CELL/URA_PCH state the UE shall start using
second DRX cycles.
### 16.4.1 HS-DSCH DRX operation in CELL_FACH state
For the HS-DSCH DRX operation in CELL_FACH, the UTRAN indicates an inactivity
timer, a DRX cycle length and a RX burst length. This information is stored by
the UE for use when in CELL_FACH state. The HS-DSCH DRX operation in CELL_FACH
state is only possible when the UE has a dedicated H-RNTI configured.
The HS-DSCH DRX operation in CELL_FACH state is initialized when the
inactivity timer expires. The inactivity timer is triggered whenever no data
transmission activities are on-going. At this point, the UE shall continuously
receive HS-DSCH for the length of the inactivity timer configured. Once the
inactivity timer has expired, the UE may choose not to receive HS-DSCH for a
given time within the period of the configured DRX Cycle. The UE shall receive
HS-DSCH for the RX burst length of the DRX Cycle configured.
The UE shall interrupt DRX operation in CELL_FACH state and continuously
receive HS-DSCH, if data transmission activity is initiated.
UE with dedicated H-RNTI, after state transition from CELL_PCH to CELL_FACH,
shall not initiate discontinuously reception until it has detected its
dedicated H-RNTI on HS-SCCH indicating HS-DSCH reception.
## 16.5 Measurement Occasion
When HS-SCCH(s) in TS0 is configured for HS-DSCH transmission in CELL_FACH
state in a certain frequency, the Node B HS-DSCH scheduling shall ensure that
the HS-SCCH(s) in the TS0 is not received by the UE in its measurement period.
To achieve this, the measurement period N is set to a fixed value, and the
measurement occasion cycle length coefficient is signalled to the UE and to
the Node B by a corresponding IE in RRC and NBAP signalling protocol(s). The
Node B uses the dedicated H-RNTI, measurement period N and the cycle length
coefficient to calculate the UE's measurement period and considers it
accordingly in the scheduling of HS-DSCH transmissions on that frequency.
When DRX is configured, Measurement Occasion is still used for interfrequency
and interRAT measurements. In the case of the overlapping of RX burst and
Measurement Occasion, the UE perform interfrequency and interRAT measurements
according to Measurement Occasion.
# 17 HS-DSCH reception in CELL_PCH and URA_PCH states (1.28Mcps TDD only)
The HS-DSCH reception in CELL_PCH and URA_PCH state is enabled by the UTRAN by
including the parameters for HS-DSCH reception in CELL_PCH and URA_PCH state
in the system information broadcast Parameters include PICH, HS-SCCH, and HS-
DSCH configuration used for PCCH and DCCH/DTCH transmission in CELL_PCH and
URA_PCH state. The HS-DSCH reception in CELL_PCH and URA_PCH state supports
discontinuous reception as when DRX is used the UE needs only to monitor one
Page Indicator, PI, in one Paging Occasion per DRX cycle.
In a multi-frequency cell, resources for HS-DSCH reception in CELL_PCH and
URA_PCH including PICH, HS-SCCH and HS-DSCH configuration is only on primary
frequency.
UTRAN obtains the knowledge of the UE supporting the reception of HS-DSCH in
CELL_PCH and URA_PCH state from the RRC Connection Request/Complete message.
The support of HS-DSCH reception in CELL_PCH and URA_PCH state is optional for
UE.
When the HS-DSCH reception in CELL_PCH is enabled, the UTRAN can configure the
UEs to store the E-RNTIs and dedicated H-RNTIs when performing reconfiguration
to CELL_PCH.
For UE with stored H-RNTI, the network should use the stored dedicated H-RNTI
to inform the UE to establish the uplink synchronization via HS-SCCH before
transmitting DCCH and DTCH to the UE. When UE receives dedicated H-RNTI on HS-
SCCH, the UE shall initiate the uplink synchronization procedure and transit
to CELL_FACH state.
For UE without the E-RNTI and H-RNTI in CELL_PCH and URA_PCH, if PCH is
configured in the cell, the PCCH is sent on the legacy PCH, otherwise UTRAN
can send paging message on PCCH mapped on HS-DSCH.
The same paging block structure for PCH is used when PCCH is mapped on HS-
DSCH, details in [8].
The BCCH is mapped on HS-DSCH for transmitting system information change
information to the UEs with dedicated H-RINT in CELL_PCH state receiving HS-
DSCH. The transmission of BCCH on HS-DSCH is performed by using BCCH specific
H-RNTI on specific HS-SCCH code indicated in system information broadcast. In
a multi-frequency cell, the transmission of BCCH on HS-DSCH to the UE in
CELL_PCH state is only on primary frequency.
The UE in CELL_PCH and URA_PCH states receiving HS-DSCH performs normal cell
reselection process. The inter frequency and inter RAT cell reselection is
supported as previous releases. When UE enters to a new cell, it obtains the
valid HS-SCCH configuration from system information broadcast and performs
Cell Update procedure.
The DCCH/DTCH over HSDPA reception in CELL_PCH state utilizes the enhanced L2
architecture with flexible RLC PDU size and MAC-ehs segmentation as defined in
clause 6 and in [7].
## 17.1 UE operation
When HS-DSCH reception is configured in the system information broadcast, the
UE shall after receiving a paging indication on PICH for its specific PI,
start monitoring either a stored dedicated H-RNTI value on the HS-SCCH or if
the UE does not have a dedicated H-RNTI value, it shall start monitoring the
broadcasted HS-PDSCH code using indicated transport block sizes used for PCCH
transmissions.
In a multi-frequency cell, UEs in URA_PCH or CELL_PCH stay on primary
frequency.
The UE shall monitor either the HS-SCCH or the HS-PDSCH after time offset
N~GAP~ defined between PICH and HS-SCCH or the HS-PDSCH.
When the UE in URA_PCH or CELL_PCH without dedicated H-RNTI detects the PICH
identifying PCCH transmission, the UE shall receive the corresponding HS-DSCH
TTIs:
\- considering that paging message is retransmitted in 2*m subframes, the
parameter _m_ is the number of frame that each paging sub-channel occupies.
\- combine retransmissions to same HARQ buffer;
\- if the CRC is correct the UE shall pass the data to MAC-ehs;
\- if the CRC fails after receiving 2*m subframes the UE resumes the DRX
operation.
NOTE: When the UE receives the HS-PDSCH due to reception of PCCH, the UE is
not required to receive any HS-SCCH.
When the UE in CELL_PCH with dedicated H-RNTI detects the PICH identifying
DCCH/DTCH transmission, the UE shall receive the corresponding HS-SCCH
subframes:
\- if the UE detects the dedicated H-RNTI on the HS-SCCH, the UE shall
initiate the uplink synchronization procedure and transit to CELL_FACH state;
\- if UE does not detect the dedicated on H-RNTI on HS-SCCH in any of the n
subframes the UE resumes the DRX operation, n is configured by higher layer.
The UE in CELL_PCH with dedicated H-RNTI shall also detect BCCH specific
H-RNTI when it detects the PICH identifying DCCH/DTCH transmission:
\- if the UE detects the BCCH specific H-RNTI on the HS-SCCH in any of the n
subframes, the UE shall receive the corresponding HS-DSCH TTI.
For uplink transmission the UE shall use the E-DCH. The UE shall perform the
state transition to CELL_FACH state when initiate the uplink transmission.
After initiating the uplink transmission, the UE shall remain in CELL_ FACH
state, unless a state change is triggered by RRC signalling.
During the state transition from CELL_PCH to CELL_DCH, if the reconfiguration
message on DCCH does not include new H-RNTI the UE keeps monitoring the HS-
SCCH with the dedicated H-RNTI value used in CELL_PCH or URA_PCH state during
the uplink synchronisation procedure. The UE shall continue to use the
dedicated H-RNTI in CELL_DCH state after completing the state.
# 18 Dual Cell HSDPA Operation (FDD only)
Dual Cell operation is characterized as simultaneous reception of up to two
HS-DSCH transport channels. Certain categories of UEs may be configured with
Dual Cell operation with or without MIMO in CELL_DCH state. Dual Cell
operation may be activated and deactivated using HS-SCCH orders.
When the UE is configured with Dual Cell operation, a common transmitting MAC-
ehs entity is used for data transmission, and the HS-DSCH channels shall be
operated in the following manner,
\- the receiving MAC-ehs entity supports up to two HS-DSCH transport channels.
\- each of these HS-DSCH transport channels has its own associated uplink and
downlink signalling, and own HARQ entity (further composed of multiple HARQ
processes).
\- reordering, duplicate detection, segmentation and reassembly functions are
joint for these HS-DSCH transport channels and HARQ entities.
When the UE is configured with Dual Cell HSDPA operation:
\- the mobility procedures, as defined in section 9, are supported based on
the serving HS-DSCH cell. Figure 18-1 shows an example of combined active set
update and HS-Serving Cell Change based on received measurement report 1A. The
procedure may also be performed in two steps with separate Active Set Update
and Radio Bearer Reconfiguration messages.
\- the DRX status and activation and deactivation of the DRX with HS-SCCH is
common to both serving and secondary serving HS-DSCH cells, and the related
HS-SCCH signaling can be sent on either serving or secondary serving HS-DSCH
cell,
\- HS-SCCH-less operation is restricted to the serving HS-DSCH cell.
\- there is only one CCTrCH of HS-DSCH type per cell.
\- the maximum number of HS-SCCHs as seen from the UE\'s point of view is 6
with a maximum of 4 HS-SCCHs per cell.
\- DC-HSDPA operation configured on two frequency bands is called Dual Band
Operation and is described in subsection 18.2.
\- for dual cell HSDPA operation or Dual Band Operation, DC-HSDPA operation
when MIMO is configured is described in 18.1.
\- for dual cell HSDPA operation or Dual Band Operation, DC-HSDPA operation
when MIMO mode with four transmit antennas is configured is described in 13c.
\- for dual cell HSDPA operation on single frequency band, the UE may be
configured with Dual Cell E-DCH operation as is described in [3].
Figure 18-1: Intra-Node B synchronised serving HS-DSCH cell change for Dual
Cell operation
## 18.1 Dual Cell HSDPA and MIMO
In FDD, certain categories of UE in CELL_DCH state may be configured to
operate in Dual Cell HSDPA and MIMO mode per cell. MIMO operation per cell is
performed as per section 13.
When the UE is configured with Dual Cell HSDPA and MIMO, the HS-DSCH shall be
operated in the following manner:
\- A single channelization code HS-DPCCH is used to carry feedback information
(ACK/NACK, CQI and precoding control information) related to the two HS-DSCH
transport channels.
\- CQI reports related to the two HS-DSCH transport channels are transmitted
in a TDM manner.
\- The CQI report corresponding to the HS-DSCH on the serving HS-DSCH cell, is
referred to as CQI1, and the CQI report corresponding to the HS-DSCH on the
secondary serving HS-DSCH cell, is referred to as CQI2. In case of repetition,
CQI1 repetitions are transmitted first, followed by all CQI2 repetitions. In
case of UL DTX operation, all repetitions of both CQI1 and CQI2 are
transmitted whenever CQI is supposed to be transmitted according to Rel-7 UL
DTX specification.
\- When the serving HS-DSCH cell deactivates Dual Cell HSDPA operation, the UE
reverts to Rel-7 MIMO format for HS-DPCCH (similarly as for Rel-8 Dual Cell
HSDPA operation without MIMO), and CQI2 is not transmitted.
\- The TSN field in the MAC-ehs header is extended to 14 contiguous bits.
\- The maximum number of MAC-ehs PDUs per TTI is 4. Either one of the serving
HS-DSCH cell and the secondary serving HS-DSCH cell, or both of the cells, can
be configured with MIMO operation.
\- The maximum number of MAC-ehs PDUs per TTI is 8. Either one of the serving
HS-DSCH cell and the secondary serving HS-DSCH cell, or both of the cells, can
be configured with MIMO mode with four transmit antennas operation.
## 18.2 Dual Band HSDPA Operation
Dual Band operation is characterized as simultaneous reception of up to two
HS-DSCH transport channel which are carried over two radio frequency bands.
Certain categories of UEs may be configured with Dual Band operation in
CELL_DCH state. Dual Band operation may be activated and deactivated using HS-
SCCH orders.
# 19 HS-SCCH-less HS-DSCH transmission in 1.28Mcps TDD
The HS-DSCH semi-persistent scheduling transmission is a mechanism whereby the
first HS-DSCH transmission of transport blocks on the semi-persistent HS-DSCH
resources is performed without the accompanying HS-SCCH and HARQ
retransmissions of the first HS-DSCH transmission on the semi-persistent HS-
DSCH resources are accompanied by a new format HS-SCCH.
HS-DSCH semi-persistent scheduling transmission mechanism is a configuration
of CELL_DCH state, when the semi-persistent HS-DSCH resources are configured
for a UE. And the semi-persistent HS-DSCH resources can be configured and
reconfigured by a new format HS-SCCH.
Furthermore, an HS-DSCH semi-persistent scheduling transmission has the
following characteristics:
\- Only 4 pre-defined TB formats for MAC-hs or MAC-ehs PDUs are allowed.
\- These 4 formats are chosen semi-statically, and maybe independently
configured per UE.
\- HARQ is limited to:
\- The redundancy version is pre-defined.
\- The HARQ retransmissions of an HS-DSCH semi-persistent scheduling are
accompanied by an HS-SCCH.
In addition, the UE continues to attempt reception of the legacy HS-SCCH in
the configured HS-SCCH set. The Node B shall transmit at most one HS-SCCH to a
UE in one TTI.
## 19.1 HS-DSCH semi-persistent scheduling timing and operation
For the retransmission of the HS-DSCH semi-persistent scheduling transmission,
the timing for HS-SCCH and HS-DSCH and the timing for HS-DSCH and HS-SICH is
similar to the timing in legacy HSDPA operation.
The retransmissions can be asynchronous with respect to the first
transmission, and with respect to each other. The accompanying HS-SCCH follows
the same timing relationship with the HS-PDSCH transmission as legacy
transmissions do.
If the UE is able to decode the first transmission successfully, it sends an
ACK to the Node B over the HS-SICH. If it is not able to decode the first
transmission, it sends an NACK to the Node B over the HS-SICH and buffers the
data sent on the TTI. The retransmissions do not require any blind combining
or decoding operation as the new format HS-SCCH accompanying the
retransmissions carry the information needed.
In order to combine the initial HS-DSCH semi-persistent scheduling
transmission with the subsequent retransmissions, the new HS-SCCH format
contains a pointer to the TTI where the previous transmission has been
performed.
If the UE has both semi-persistent HS-PDSCH resources and legacy scheduling
resources in the same TTI, UE shall only receive data on legacy scheduling HS-
PDSCH resources.
## 19.2 Assignment/reassignment of semi-persistent HS-PDSCH resources for HS-
DSCH semi-persistent scheduling transmission
For the HS-DSCH semi-persistent scheduling transmission, Node B sends the
control commands on HS-SCCH to assign/reassign the semi-persistent HS-PDSCH
resources.
If the UE receives these commands correctly, the UE shall feedback the RTBS
with the value of zero and ACK on the HS-SCCH associated HS-SICH. UE should
stop receiving data on the previous HS-PDSCH and stop sending feedback on the
corresponding HS-SICH and begin to receive data on the reassigned HS-PDSCH and
send feedback on its associated HS-SICH.
Node B checks the feedback on HS-SICH to judge whether the HS-SCCH commands
have been received by the UE correctly.
If the Node B determines the UE has received the HS-SCCH commands correctly,
it can schedule the previous semi-persistent HS-PDSCH resources to other
users. Otherwise, it shall send the assignment/reassignment commands again.
# 20 Four Carrier HSDPA Operation (FDD only)
Four Carrier HSDPA operation is characterized as simultaneous reception of up
to four HS-DSCH transport channels. Certain categories of UEs may be
configured with Four Carrier HSDPA operation with or without MIMO/MIMO mode
with four transmit antennas in CELL_DCH state. Four Carrier HSDPA operation
may be activated and deactivated using HS-SCCH orders.
When the UE is configured with Four Carrier HSDPA operation, a common
transmitting MAC-ehs entity is used for data transmission, and the HS-DSCH
channels shall be operated in the following manner:
\- The transmitting and receiving MAC-ehs entity support up to four HS-DSCH
transport channels.
\- Each of these HS-DSCH transport channels has its own associated uplink and
downlink signalling, and own HARQ entity (further composed of multiple HARQ
processes).
\- Reordering, duplicate detection, segmentation and reassembly functions are
joint for these HS-DSCH transport channels and HARQ entities.
When the UE is configured with Four Carrier HSDPA operation:
\- There is one serving HS-DSCH cell and up to three secondary serving HS-DSCH
cells.
\- The TSN field in the MAC-ehs header is extended to 14 contiguous bits.
\- The mobility procedures, as defined in section 9, are supported based on
the serving HS-DSCH cell. A serving cell change similar to the one shown in
Figure 18-1 is possible for Four Carrier HSDPA operation.
\- The DRX status is common for all serving HS-DSCH cells. The DRX activation
and deactivation is possible with HS-SCCH orders.
\- HS-SCCH-less operation is restricted to the serving HS-DSCH cell.
\- Transmit diversity is configurable per downlink frequency.
\- Certain categories of UEs may be configured to operate in MIMO mode or MIMO
mode with four transmit antennas per serving HS-DSCH cell, as follows:
\- MIMO operation per serving HS-DSCH cell is performed as per section 13.
\- MIMO mode with four transmit antennas operation per serving HS-DSCH cell is
performed as per section 13c.
\- HS-DPCCH is be used to carry feedback information (ACK/NACK, CQI and
precoding control information) related to the HS-DSCH transport channels.
\- CQI reports related to all activated serving HS-DSCH cells are transmitted
\- The maximum number of MAC-ehs PDUs per TTI is 12, when three serving HS-
DSCH cells are active. The maximum number of MAC-ehs PDUs per TTI is 16, when
four serving HS-DSCH cells are active.
\- Certain categories of UEs may be configured to operate in multiple radio
frequency as follows:
\- The UE is configured with up to four HS-DSCH transport channels which are
carried over 1 or 2 radio frequency bands.
\- The downlink frequencies within a single frequency band are configured
adjacent or non-adjacent if UE supports non-contiguous multi-cell operation.
Non-adjacent operation of downlink frequencies due to the deactivation of the
configured downlink frequencies within a single frequency band may take place.
A UE may be configured with non-adjacent downlink frequencies within a single
frequency band with MIMO when the UE has signalled support for this
combination.
\- Four Carrier HSDPA operation may be configured with Dual Cell E-DCH
operation, as described in [3]. DCH is supported if the UE has only one
Configured Uplink frequency.
\- Synchronization and RLF:
\- For physical channel establishment for the downlink frequencies associated
with an Activated Uplink Frequency, the rules as specified for Dual Cell E-DCH
operation are applied.
\- Physical channel establishment is not performed for the downlink
frequencies not associated with an Activated Uplink Frequency.
\- RLF is based on the primary downlink frequency.
\- Measurements:
\- If only one uplink frequency is configured, the UE performs intra-frequency
measurement only on the primary downlink frequency.
\- If two uplink frequencies are configured, the UE performs intra-frequency
measurement on the corresponding primary downlink frequency and secondary
downlink frequency.
# 21 Eight Carrier HSDPA Operation (FDD only)
Eight Carrier HSDPA operation is characterized as simultaneous reception of up
to eight HS-DSCH transport channels. Certain categories of UEs may be
configured with Eight Carrier HSDPA operation with or without MIMO in CELL_DCH
state. Eight Carrier HSDPA operation may be activated and deactivated using
HS-SCCH orders transmitted from the serving Node-B.
When the UE is configured with Eight Carrier HSDPA operation, a common
transmitting MAC-ehs entity is used for data transmission, and the HS-DSCH
channels shall be operated in the following manner:
\- The transmitting and receiving MAC-ehs entity support up to eight HS-DSCH
transport channels.
\- Each of these HS-DSCH transport channels has its own associated uplink and
downlink signalling, and own HARQ entity (further composed of multiple HARQ
processes).
\- Reordering, duplicate detection, segmentation and reassembly functions are
joint for these HS-DSCH transport channels and HARQ entities.
When the UE is configured with Eight Carrier HSDPA operation:
\- There is one serving HS-DSCH cell and up to seven secondary serving HS-DSCH
cells.
\- The TSN field in the MAC-ehs header is extended to 14 contiguous bits.
\- The mobility procedures, as defined in section 9, are supported based on
the serving HS-DSCH cell. A serving cell change similar to the one shown in
Figure 18-1 is possible for Eight Carrier HSDPA operation.
\- The DRX status is common for all serving HS-DSCH cells. The DRX activation
and deactivation is possible with HS-SCCH orders.
\- HS-SCCH-less operation is restricted to the serving HS-DSCH cell.
\- Transmit diversity is configurable per downlink frequency.
\- Certain categories of UEs may be configured to operate in MIMO mode per
serving HS-DSCH cell, as follows:
\- MIMO operation per serving HS-DSCH cell is performed as per section 13.
\- CQI reports related to all activated serving HS-DSCH cells are transmitted
\- The maximum number of MAC-ehs PDUs per TTI is 16, when eight serving HS-
DSCH cells configured with MIMO operation are active.
\- Certain categories of UEs may be configured to operate in multiple radio
frequencies as follows:
\- The UE is configured with up to eight HS-DSCH transport channels which are
carried over 1 or 2 radio frequency bands.
\- The downlink frequencies within a single frequency band are configured
adjacent. Non-adjacent operation of downlink frequencies due to the
deactivation of the configured downlink frequencies within a single frequency
band may take place.
\- If more than three secondary serving HS-DSCH cells are configured then two
HS-DPCCH codes are used to carry feedback information (ACK/NACK, CQI and
precoding control information) related to the HS-DSCH transport channels. The
HS-DPCCH1 carries feedback information associated with the serving HS-DSCH
cell and the 1st, 2nd, and 3rd secondary serving HS-DSCH cells. The HS-DPCCH2
carries feedback information associated with the 4th, 5th, 6th, and 7th
secondary serving HS-DSCH cells.
\- Eight Carrier HSDPA operation may be configured with Dual Cell E-DCH
operation, as described in [3]. DCH is supported if the UE has only one
Configured Uplink frequency.
\- Synchronization and RLF:
\- For physical channel establishment for the downlink frequencies associated
with an Activated Uplink Frequency, the rules as specified for Dual Cell E-DCH
operation are applied.
\- Physical channel establishment is not performed for the downlink
frequencies not associated with an Activated Uplink Frequency.
\- RLF is based on the primary downlink frequency.
\- Measurements:
\- If only one uplink frequency is configured, the UE performs intra-frequency
measurement only on the primary downlink frequency.
\- If two uplink frequencies are configured, the UE performs intra-frequency
measurement on the corresponding primary downlink frequency and secondary
downlink frequency.
# 22 Multiflow Operation (FDD only)
Multiflow operation is characterized as simultaneous reception of up to four
HS-DSCH transport channels in the CELL_DCH state, where up to two HS-DSCH
transport channels may reside at the same frequency and belong either to same
or different Node Bs. Table 22-1 lists configurations supported by this
version of the standard.
Table 22-1: Multiflow configurations
* * *
Name Carrier Frequency A Carrier Frequency B
One Frequency, two cells The serving HS-DSCH cell,\ N/A the assisting serving
HS-DSCH cell
Two frequencies, three cells The serving HS-DSCH cell,\ A secondary serving
HS-DSCH cell the assisting serving HS-DSCH cell
Two frequencies, three cells The serving HS-DSCH cell,\ An assisting secondary
serving HS-DSCH cell the assisting serving HS-DSCH cell
Two frequencies, four cells The serving HS-DSCH cell,\ A secondary serving HS-
DSCH cell,\ the assisting serving HS-DSCH cell an assisting secondary serving
HS-DSCH cell
* * *
Depending on its capabilities, a UE may be configured to operate in multiple
radio frequencies as follows:
\- Certain UE type may be configured with up to four HS-DSCH transport
channels operating in pairs on two carrier frequencies adjacent to each other.
\- Certain UE type may be configured with up to four HS-DSCH transport
channels operating in pairs on two carrier frequencies on two different
frequency bands.
\- Certain UE type may be configured with up to four HS-DSCH transport
channels in pairs on two carrier frequencies on the same frequency band, but
not adjacent to each other.
\- Certain UE types may be configured with three or four HS-DSCH transport
channel operating in pairs on two adjacent carrier frequencies and with Dual
Cell E-DCH operation, as described in [3].
When the UE is configured with Multiflow operation:
\- There is one serving HS-DSCH cell. There can be an assisting serving HS-
DSCH cell and additional secondary serving and assisting secondary serving HS-
DSCH cells as defined in Table 22-1.
\- The serving and secondary serving HS-DSCH cells have the same downlink
timing, and the same applies to the assisting serving and assisting secondary
serving HS-DSCH cells. Configured HS-DSCH cells may have at most two different
downlink timings.
\- The mobility procedures, as defined in section 9, are supported based on
the serving HS-DSCH cell. A serving cell change similar to the one shown in
Figure 18-1 is possible for Multiflow operation.
\- When configured with MIMO on at least one of the HS-DSCH cells and/or there
are more than two HS-DSCH cells, the TSN field in the MAC-ehs header is
extended to 14 contiguous bits.
\- The secondary serving and assisting secondary serving HS-DSCH cells can be
activated and deactivated using HS-SCCH orders, which can be sent only from
one of the cells belonging to the same Node B.
\- The DTX/DRX status is common for all the HS-DSCH cells.
\- HS-SCCH-less operation is restricted to the serving HS-DSCH cell.
\- UEs of certain capabilities may be configured to operate in MIMO mode as
follows:
\- Depending on the UE capabilities, either single or dual stream MIMO
transmission can be configured per serving HS-DSCH cell.
\- MIMO operation per serving HS-DSCH cell is performed as per section 13.
\- The maximum number of MAC-ehs PDUs per TTI is 1 for each activated serving
HS-DSCH cell for an HS-DSCH cell configured in the non-MIMO mode, and at most
2 for each activated serving HS-DSCH cell configured in MIMO mode.
\- Synchronization and Radio Link Failure:
\- When Multiflow is configured to operate on a single carrier frequency, the
synchronization and RLF operates as defined for single carrier HSDPA.
\- When Multiflow is configured to operate on two carrier frequencies, the
synchronization and RLF operate as defined for Dual-Cell HSDPA.
\- Measurements:
\- If only one uplink frequency is configured, the UE performs intra-frequency
measurement only on the primary downlink frequency.
\- If two uplink frequencies are configured, the UE performs intra-frequency
measurement on the corresponding primary downlink frequency and secondary
downlink frequency.
\- Combination with UL MIMO or UL CLTD:
\- It is possible to configure Multiflow operation together with UL MIMO or UL
CLTD.\ In case of inter-Node B Multiflow operation combined with UL MIMO or UL
CLTD, HS-SCCH orders related to UL MIMO or UL CLTD are limited only to the
cells belonging to the serving Node B.
When the UE is configured with intra-Node B Multiflow operation, the HS-DSCH
channels shall be operated in the following manner:
\- The downlink data is split at the MAC-ehs level.
\- A common transmitting MAC-ehs entity is used for data transmission.
\- The transmitting and receiving MAC-ehs entity support up to four HS-DSCH
transport channels.
\- Reordering, duplicate detection, segmentation and reassembly functions are
common for these HS-DSCH transport channels and HARQ entities.
\- Each of HS-DSCH transport channels has its own associated uplink and
downlink signalling, and own HARQ entity (further composed of multiple HARQ
processes).
{width="2.3965277777777776in" height="2.0541666666666667in"}
Figure 22-1: Protocol Architecture of intra-Node B Multiflow (configuration
without MAC-c/sh)
When the UE is configured with inter-Node B Multiflow operation, the HS-DSCH
channels shall be operated in the following manner:
\- The downlink data is split at the RLC level. If configured by the network,
a UE uses the RLC level re-ordering timer.
\- Two transmitting MAC-ehs entities are used for data transmission.
\- Each transmitting and receiving MAC-ehs entity support up to two HS-DSCH
transport channels.
\- Each MAC-ehs entity performs independently reordering, duplicate detection,
segmentation and reassembly functions for the correspondent HS-DSCH transport
channels and HARQ entities.
\- Each of these HS-DSCH transport channels has its own associated uplink and
downlink signalling, and own HARQ entity (further composed of multiple HARQ
processes).
{width="3.4430555555555555in" height="3.99375in"}
Figure 22-2: Protocol Architecture of inter-Node B Multiflow (configuration
without MAC-c/sh)
# 23 Further Enhancements to CELL_FACH state (FDD only)
The following sub-features related to downlink improvements are included as
part of Further Enhancements to CELL_FACH:
\- NodeB triggered HS-DPCCH transmission;
\- HS-DSCH DRX operation with second DRX cycle in CELL_FACH (see subclause
14.4.2).
## 23.1 NodeB triggered HS-DPCCH transmission
The sub-feature of NodeB triggered HS-DPCCH transmission enables the network
to request the UE to obtain a common E-DCH resource and provide HS-DPCCH
feedback in CELL_FACH state.
The network may request the UE to obtain a common E-DCH resource and provide
HS-DPCCH feedback by means of an HS-SCCH order. An ACK is not transmitted on
the uplink in response to the HS-SCCH order and instead, the UE begins the
random access procedure to obtain a common E-DCH resource to be used. The UE
selects the next available uplink access slot upon initiation of the physical
random access procedure for the access. In the presence of uplink data, E-DCH
can also be transmitted on the obtained common E-DCH resource provided there
is sufficient grant. In the absence of uplink data, the UE sends an SI in the
MAC-i PDU and its E-RNTI in MAC-i Header 0 for collision resolution purposes.
The HS-DPCCH transmissions also begin during collision resolution at the
allowed start time for E-DCH transmissions. The network may configure an
implicit resource release timer. If configured, the timer is started at the
allowed start time of the E-DCH transmission. Thereon, legacy implicit and
explicit common E-DCH resource release procedures are used to terminate the
HS-DPCCH transmission. If the timer is not configured by the network, legacy
procedures to release the common E-DCH resources apply.
In CELL_PCH state, when the HS-DSCH reception is enabled and the UE has stored
dedicated H-RNTI and E-RNTI, the network can transmit an HS-SCCH order for
NodeB triggered HS-DPCCH transmission to the UE.
Upon reception of an HS-SCCH order for NodeB triggered HS-DPCCH transmission,
if random access procedure fails and there is no uplink data in the UE buffer,
the UE does not re-initiate the random access procedure unless another HS-SCCH
order is received.
On the interaction between NodeB triggered HS-DPCCH transmission and Fallback
to R99 PRACH sub-features:-
\- For NodeB triggered HS-DPCCH transmission, if an indication to fallback to
R99 PRACH is received, the UE ignores the received fallback indication and
does not fallback to R99 PRACH.
\- If an HS-SCCH order for NodeB triggered HS-DPCCH transmission is received
during the time from when the UE has already started the PRACH preamble
procedure for uplink data but before receiving indication to fallback to R99
PRACH, the UE ignores the received HS-SCCH order and will continue with the
fallback to R99 PRACH procedure.
\- If the HS-SCCH order for NodeB triggered HS-DPCCH transmission is received
during the time from when the UE receives an indication to fallback to R99
PRACH to the time of successful completion of the RACH transmission procedure,
the UE ignores the received HS-SCCH order.
###### ### Annex A: Void
#