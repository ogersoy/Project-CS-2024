# Foreword
This Technical Specification (TS) was been produced by ETSI Technical
Committee Telecommunications and Internet converged Services and Protocols for
Advanced Networking (TISPAN) and originally published as ETSI TS 183 058 [7].
It was transferred to the 3^rd^ Generation Partnership Project (3GPP) in
January 2008.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the Stage 3 of the real-time transfer of Tariff
Information between a Charge Determination Point (CDP) and a Charge Generation
Point (CGP) by means of the Session Initiation Protocol (SIP).
It identifies the protocol procedures and switching functions needed to
support the transfer of tariff information related to IP multimedia services.
The information needed to support the ISDN User part (ISUP) signalling aspects
of charging (ES 201 296 [6]) for Advice of Charge information purposes is also
specified, however, it can be used for other purposes as well where
applicable.
The present document is applicable to an environment where different operators
are working together. It is also applicable to a single network operator
environment.
Whether the present document is applicable to a national environment and/or
can be used for inter-network purposes depends on regulatory demands and/or
bilateral agreements. It should be noted that there are network requirements
and signalling limitations that are not covered because they are outside the
scope of the present document. Examples of these are as follows:
\- the on-line provided advice of charge information may not accurately
reflect the correct charging rate due to discount rates, special charging
arrangements, etc. It is out of scope to ensure alignment of this information;
\- complaint handling between network operators in case of incorrect advice of
charge information;
\- explicit encryption or special security mechanisms;
\- usage of the transferred tariff information for charging purposes;
\- interaction between UE and CGP for possible confirmation of provided
tariffs;
\- any function behind the CGP towards the UE.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
The following referenced documents are indispensable for the application of
the present document. For dated references, only the edition cited applies.
For non-specific references, the latest edition of the referenced document
(including any amendments) applies.
[1] 3GPP TS 22.173: \"IP Multimedia Core Network Subsystem (IMS) Multimedia
Telephony Service and supplementary services; Stage 1\".
[2] IETF RFC 2976: \"The SIP INFO Method\".
[3] IETF RFC 4006: \"Diameter Credit-Control Application\".
[4] 3GPP TS 24.229: \"Internet Protocol (IP) multimedia call control protocol
based on Session Initiation Protocol (SIP) and Session Description Protocol
(SDP); Stage 3\".
[5] ISO 4217: \"International Organization for Standardization; Type Currency
Code List\".
[6] ETSI ES 201 296 (V1.3.1): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP); Signalling aspects of
charging\".
[7] ETSI TS 183 058 V2.0.0: \"Telecommunications and Internet Converged
Services and Protocols for Advanced Networking (TISPAN); SIP Transfer of IP
Multimedia Service Tariff Information; Protocol specification\".
[8] RFC 3261 (June 2002): \"SIP: Session Initiation Protocol\".
[9] RFC 3023 (January 2001): \"XML Media Types\".
[10] RFC 4288 (December 2005): \"Media Type Specifications and Registration
Procedures\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 22.173 [1] and the following apply:
**absolute time:** time of the day representing GMT
**add-on charge:** single additional charge which does not change the current
tariff
NOTE: An add-on charge can either be metered in non-monetary units (e.g.
meter‑pulse) or in monetary-units (e.g. currency).
**charge:** number of charge units (for the usage of a chargeable event
(telecommunication service))
**Charge Determination Point (CDP):** determines which tariff/add-on charge
should be applied, and inserts the tariff/add-on charge information to the
appropriate SIP requests or responses
NOTE: Example of a CDP is a SIP AS at the visited IMS network providing the
premium rate service.
**Charge Generation Point (CGP):** receives the tariff/add-on charge
information that was added by a CDP and transferred in the appropriate SIP
requests or responses
NOTE: Example of a CGP is an originating SIP AS at the home IMS network for
advice of charge purposes.
**charge unit:** base element for the charging process, expressed in non-
monetary or monetary units
**charging:** function within the telecommunications network and the
associated OCS/BD components whereby information related to a chargeable event
is collected, formatted, transferred and evaluated in order to make it
possible to determine usage for which the charged party may be billed (offline
charging) or the subscriber's account balance may be debited (online
charging).
**real-time:** time, typically in number of seconds, to perform the on-line
mechanism used for fraud control and cost control
**subtariff:** within a tariff sequence, a charge unit per time unit
NOTE: Each subtariff has an individual duration and an individual charge unit.
**tariff:** set of parameters defining the network utilization charges for the
use of a particular bearer / session / service
NOTE 1: A tariff can either be metered in non-monetary units (e.g.
meter‑pulse) or in monetary units\ (e.g. currency).
NOTE 2: Relationship between tariff and charge units (charging) should be
clarified.
NOTE 3: A tariff consists of a tariff sequence.
**tariff determination instance:** particular charging-related process with a
corresponding communication between a charge determination point and a charge
registration/charge generation point
**tariff sequence:** list of consecutive subtariffs which has to be applied
for the charging of the communication event
NOTE: The subtariffs are applied at the start of the communication event and
are applied consecutively according to the list of the subtariffs. The last
subtariff may have an unlimited duration.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
AOC Advice Of Charge
AOCRG Add-On ChaRGe information
ASE Application Service Element
CDP Charge Determination Point
CGP Charge Generation Point
CRGT ChaRGe Tariff information
GMT Greenwich Mean Time
ID IDentification
IMS IP Multimedia Subsystem
IP Internet Protocol
ISDN Integrated Service Data Network
ISUP ISDN User Part
NGN Next Generation Network
PSTN Public Switch Telephone Network
SIP Session Initiation Protocol
UE User Equipment
# 4 SIP Transfer of Charging Information
## 4.1 Description
### 4.1.1 General description
The present document specifies the procedures for the realtime transfer of
charging information in SIP between a Charge Determination Point (CDP) and a
Charge Generation Point (CGP). CDP is a network function that determines which
tariff/add-on charge should be applied and inserts the charging information to
the appropriate SIP requests or responses, whereas the CGP is a network
function that receives the tariff/add-on charge information that was added by
a CDP.
Example of CDP is a SIP AS at the visited IMS network providing the premium
rate service. Example of the CGP is the originating SIP AS at the home IMS
network for advice of charge purposes.
The functionality is needed to support the tariff/add-on charge information of
value added services that are charged by the operator of the originating end
user, the home IMS operator, in case the operator of the originating end user
has no knowledge about the tariff/add-on charge information related to these
value-added services.
A charge determination and charge generation point of the communication may be
located within the network of one operator (single network operator
environment) or may be located in different networks of different operators
(multi‑operator environment).
The configuration of several charge determination points for one communication
is possible. It is assumed that there is only one CGP for the communication.
The transferred tariff/add-on charge information represents direct Tariff
Information (no pointers to charge data), either in monetary (e.g. currency)
units or non-monetary (e.g. meter‑pulse) units.
The following functionality is provided:
> i) apply a communication attempt charge for unsuccessful communications;
>
> ii) apply a communication setup charge (once) at start of charging;
iii) apply an initial communication tariff at start of charging and an
(optional) next tariff at an absolute time during the communication;
> iv) change immediately the current tariff;
>
> v) apply immediately an add-on charge (either a number of non-monetary units
> or an amount of monetary units) during the communication. This add-on charge
> is additive and does not change the tariff in force;
>
> vi) differentiation as to whether the tariff/add-on charge information is to
> be used for advice of charge purposes only, or for subscriber charging
> purposes (which would also allow it to be used for advice of charge
> purposes);
>
> vii) perform validation (e.g. check range of parameters, check whether a
> request from a certain network operator can be accepted);
>
> viii) apply a \"one time charge\" (i.e. non-periodic charge/flat rate) as a
> minimum communication charge at start of charging;
### 4.1.2 Network provider option
Not applicable.
## 4.2 Coding requirements
CDP and CGP shall support the INFO method according to RFC 2976 [2] in support
of SIP Transfer of Tariff Information.
CDP and CGP shall support multipart MIME content.
The SIP Transfer of Tariff Information XML schema, version 1.0, is defined in
annex C. The Tariff Information XML schema shall be transported as a SIP MIME
body. The MIME type for the Tariff Information is
\"application/vnd.etsi.sci+xml\" (in accordance with subclause 5.1). Any SIP
message that transports a body with Tariff Information shall identify the
payload as MIME type \"application/vnd.etsi.sci+xml\" (in accordance with
subclause 5.1).
## 4.3 Functional requirements
### 4.3.1 Overall requirements
a) CGP receives tariff information and shall not send it further, however, the
received tariff information can be used for the AoC info provision to the UE.
b) There is only one CGP per service usage and the CGP is always located
within the home network of the served subscriber.
c) CDP determines the tariff to be applied or an add on charge, and provides
for transfer to the CGP.
d) There can be one or more CDP per service usage. CDP may be located in the
originating or in the terminating network.
e) Sending of next Tariff Information.
A determination point shall not send next Tariff Information with a switch-
over time that is more than 23 h and 45 min after the current time.
f) Format of the Tariff Information.
All information issued for the same communication has to be in the same
format, i.e. monetary or non-monetary. This needs bilateral agreements between
the network operators concerned.
If non-monetary formats are used, the corresponding monetary value of a non-
monetary unit needs bilateral agreements between the network operators
concerned.
A CDP has to encode the Tariff Information in a format that can be validated
by the receiving CGP.
### 4.3.2 Procedures at a Charge Determination Point
#### 4.3.2.0 General
The CDP shall assume that the UE supports version 1.0 of the MIME type
associated with Tariff Information (see subclause 5.1), if support for the
MIME type associated with Tariff Information in the Accept header is not
indicated. If both the \"sv\" and \"schemaversion\" parameters are present,
then the CDP shall ignore the value of the \"schemaversion\" parameter.
If the CDP includes the SIP Transfer of Tariff Information XML body (see
subclause 5.1), it shall set the Content-Type header field to MIME type
associated with Tariff Information (see subclause 5.1) and shall include in
its \"sv\" or \"schemaversion\" parameter\'s value the versions of SIP
Transfer of Tariff Information XML schema that can be used to validate the SIP
Transfer of Tariff Information XML body.
#### 4.3.2.1 Procedures during communication set-up
##### 4.3.2.1.1 Tariff indication
When a Charge Determination Point has determined that:
\- the tariff which has to be activated immediately at start of charging;
and/or
\- the next tariff which has to be activated at an absolute switch-over time;
and/or
\- the absolute switch-over time (GMT),
has to be transmitted to the charge generation point, the application process
shall issue the Tariff indication.
A Tariff indication may be re-issued during communication set-up phase (i.e.
at any time up to the dialog confirmation), replacing previously issued
information.
If the tariff is time dependent, then the next tariff and the absolute time at
which the current tariff has to be replaced by this next tariff shall be sent.
It can be sent together with the current tariff in the initial Tariff
indication. The next tariff and the tariff switch-over time shall always be
sent together.
The current tariff and the next tariff have the same tariff parameter
structure, i.e. a Communication Attempt charge, a Communication Setup charge
and a Communication charge (up to a maximum of 4 communication subtariffs).
The tariff format used for the communication is indicated by the first Tariff
indication and shall not be changed during the communication.
The following clauses specify the procedures for some specific cases.
##### 4.3.2.1.2 Communication attempt charge
The communication attempt charge is a direct charge, to be charged only for
unsuccessful communications.
If a communication attempt charge is relevant to the communication, the
communication attempt Tariff Information shall be included in the Tariff
indication.
To cover the scenario in the generation point where the received absolute
switch-over time has already been reached at the receipt of the Tariff
indication or just before start of charging, the communication attempt charge
shall also be sent in the first Next Tariff parameter.
In case of monetary-format, the charge amount is indicated by a currency
factor multiplied by a currency scale.
In case of non-monetary format, the charge amount is indicated by a number of
meter-pulse units.
##### 4.3.2.1.3 Communication set-up charge
The communication setup charge is a direct charge, to be charged once at start
of charging.
If communication setup charge is relevant to the communication, the
communication setup Tariff Information shall be included in the first Tariff
indication.
To cover the scenario in the generation point where the received absolute
switch-over time has already been reached at the receipt of the Tariff
indication or just before start of charging, the communication setup charge
shall also be sent in the first Next Tariff parameter.
In the case of monetary-format, the charge amount is indicated by a currency
factor multiplied with a currency scale.
In the case of non-monetary-format the charge amount is indicated by a number
of meter-pulse units.
##### 4.3.2.1.4 Communication charge
The communication charge is a direct charge, to be applied at start of
charging.
If communication charge is relevant, this information shall be included in the
first Tariff indication and before start of charging.
a) Non-monetary-format.
In case of non-monetary-format, the charge amount is indicated by a number of
meter-pulse units to be applied per time unit. The Communication charge is
free when its value is zero.
b) Monetary-format.
In case of monetary-format, the charge amount per time unit is indicated by a
currency factor multiplied by a currency scale. The communication charging is
free of charge when the product is zero.
NOTE: With the currency-format only one fixed time unit is used. This fixed
time unit is one second, according to RFC 4006 [3].
c) Communication charge sequence.
The communication charge may be a sequence of up to 4 communication
subtariffs. Except for the last subtariff, each subtariff shall be limited by
its tariff duration. The last (or single) subtariff of the sequence may be
either unlimited (tariff duration = 0) or limited.
At expiry of the tariff duration timer of the last (single) communication
subtariff of the communication charge sequence, the following options are
possible:
\- the communication charge sequence is re-applied; or
\- the communication charge sequence is not re-applied.
The chosen option is indicated in the tariffControlIndicators.
If a communication charge sequence is relevant to the communication, the
complete sequence shall be provided.
d) Absolute switch-over time.
The absolute switch-over time is the time at which the current tariff has to
be replaced by the next tariff.
The next tariff and the tariff switch-over time shall always be provided
together.
e) Minimum Communication Charge at Start of Charging.
To apply a minimum communication charge in case of non-monetary format, the
first subtariff of the sequence is defined with N pulses, a duration which
corresponds to the required duration and a time interval equal to zero.
To apply a minimum communication charge in case of monetary format, the first
subtariff is defined with N currency units and a duration which corresponds to
the required duration. A flag in CommunicationChargeCurrency
(subTariffControl) indicates whether the tariff is a \"one time charge\" for
the minimum communication charge or not.
#### 4.3.2.2 Procedures after start of charging
The following clauses and clause 4.3.2.3 specify the procedures for some
specific cases.
##### 4.3.2.2.1 Change current tariff
The current tariff can be changed by issuing a Tariff indication with the new
current tariff.
##### 4.3.2.2.2 Add-on charge
If a charge determination point determines that a certain amount of charge has
to be added, the application process issues an Add-on-charge indication. The
current tariff is not changed.
An Add-on-charge indication is allowed after start of charging only.
The charge is either in non-monetary format or in monetary format.
The add-on charge in non-monetary-format is a number of meter-pulse units. The
add-on charge in monetary format is indicated by the currency factor
multiplied by the currency scale.
#### 4.3.2.3 Subsequent Tariff indications
In addition to the first Tariff indication, the application process in a
determination point issues subsequent Tariff indication during the
communication in the following cases:
a) The current tariff is changed. A Tariff indication with the new current
tariff t has to be issued immediately.
b) The next tariff and its tariff switch-over time were not issued at
communication setup. This exceptional case occurs when the switch-over time
was more than 23 h and 45 min after the moment the communication is set-up. A
Tariff indication with the next tariff and the corresponding switchover time
has to be issued at least before the switchover time.
### 4.3.3 Procedures at the charge generation point
The following general rule applies: Currently stored information related to
one network operator is replaced by information related to this operator
received subsequently.
#### 4.3.3.0 General
The CGP shall include the Accept header field with
\- \"application/vnd.etsi.sci+xml\", the MIME type associated with Tariff
Information (see subclause 5.1), and indicate the versions of the XML Schema
for SIP Transfer of Tariff Information it supports; and
\- any other MIME type the CGP is willing and capable of accepting.
#### 4.3.3.1 Procedures during communication set-up
##### 4.3.3.1.1 Tariff indication
The receipt of the Tariff indication indicates:
\- the tariff which has to be activated immediately at start of charging; or
\- the next tariff which has to be activated at an absolute switch-over time;
or
\- the absolute switch-over time.
A Tariff indication may be received more than once during communication set-up
phase (i.e. at any time up to the dialog confirmation), replacing previously
received information.
If the tariff is time dependent, then the next tariff and the absolute time at
which the current tariff has to be replaced by this next tariff will be
received. They can be received together with the current tariff in the initial
Tariff indication.
The current tariff and the next tariff have the same tariff parameter
structure, i.e. a communication attempt charge, a communication setup charge
and a communication charge (up to a maximum of 4 communication subtariffs).
The tariff parameters have either the non-monetary format or the monetary
format. The tariff-format used for the communication is indicated by the first
Tariff indication and shall not be changed during the communication.
Validation shall be performed (e.g. check of range of parameters, check of
network identification).
The following clauses specify the procedures for some specific cases.
##### 4.3.3.1.2 Communication attempt charge
The communication attempt charge is a direct charge, to be charged only for
unsuccessful communications.
If a communication attempt charge is relevant to the communication, the
communication attempt charge information shall be included in the Tariff
indication.
In the case of monetary-format, the charge amount is indicated by a currency
factor multiplied by a currency scale. The communication attempt charging
shall not be performed if the product is zero or the parameter is not present.
In the case of non-monetary-format, the charge amount is indicated by a number
of meter-pulse units. The communication attempt charging shall not be
performed if the value is zero or the parameter is not present.
##### 4.3.3.1.3 Communication setup charge
The communication setup charge is a direct charge, to be charged once at start
of charging.
If a communication setup charge is relevant to the communication, the
communication setup charge information is included in the first Tariff
indication.
In the case of monetary-format, the charge amount is indicated by a currency
factor multiplied with a currency scale. The communication setup charging
shall not be performed when the product is zero or the parameter is not
present.
In the case of non-monetary-format the charge amount is indicated by a number
of meter-pulse units. The communication setup charge shall not be performed
when the number is zero or the parameter is not present.
##### 4.3.3.1.4 Communication charge
The communication charge is a direct charge, to be applied at start of
charging.
As part of the Current Tariff, the Communication Tariff is applied immediately
at start of charging.
As part of the Next Tariff, the Communication Tariff is applied at the
absolute time indicated by the absolute switch‑over time parameter. The switch
procedure is a network matter.
If the absolute switch-over time given in the Tariff indication is already
passed, then the communication charge of the next tariff instead of the
current tariff shall immediately be applied (see also clause 4.3.1 b).
a) Non-monetary-format.
In case of non-monetary-format, the charge amount is indicated by a number of
meter-pulse units to be applied per time unit. The communication is free of
charge when its value is zero.
b) Monetary-format.
In case of monetary-format, the charge amount per time unit is indicated by a
currency factor multiplied by a currency scale. The communication is free of
charge when the product is zero.
NOTE: With the currency-format only one fixed time unit is used. This fixed
time unit is one second, according to RFC 4006 [3].
c) Communication charge sequence.
The communication charge may be a sequence of up to 4 communication
subtariffs. Except for the last subtariff, each subtariff shall be limited by
its tariff duration. The last (or single) subtariff of the sent sequence may
be either unlimited (tariff duration = 0) or limited.
Initially, charging shall use the first subtariff. At expiry of the tariff
duration timer, the subsequent subtariff shall be applied.
At expiry of the tariff duration timer of the last (single) communication
subtariff of the communication charge sequence, the following options are
possible:
\- the communication charge sequence is re-applied; or
\- the communication charge sequence is not re-applied.
The option to be applied is indicated in the tariffControlIndicators.
If a communication charge sequence is relevant to the communication, the
complete sequence shall be provided.
When the communication charge sequence is not re-applied, the following
network provider option exists: either the communication continues \"free of
charge\" or the communication is released.
d) Absolute switch-over time.
The absolute switch-over time is the time at which the current tariff has to
be replaced by the next tariff. In a multi-operator environment, the
procedures of how the subtariffs of the next tariff are applied are subject of
bilateral or multilateral agreements.
e) Minimum communication charge at start of charging.
To apply a minimum communication charge in case of pulse format, the first
subtariff of the sequence shall defined with N pulses, a duration which
corresponds to the required duration and a time interval equal to zero.
To apply a minimum communication charge in case of currency format, the first
subtariff shall be defined with N currency units and a duration which
corresponds to the required duration. A flag in CommunicationChargeCurrency
(subTariffControl) indicates whether the tariff is a \"one time charge\" for
the minimum communication charge or not.
#### 4.3.3.2 Procedures after start of charge
If the communication setup charge is applied, all following received
communication attempts and communication setup charges shall be ignored.
The following clauses and clause 4.3.2.4 specify the procedures for some
specific cases.
##### 4.3.3.2.1 Change current tariff
a) On receipt of the Tariff indication with the new tariff, the current tariff
shall be changed
After successful validation (e.g. check of range of parameters, check of
network identification), the new current tariff shall immediately be applied
to the communication according to the following two tariff change procedures:
\- tariff change without restart of the charging process (see b));
\- tariff change with restart of the charging process (see c)).
Which immediate tariff change procedure shall be used is indicated in the
ChargingContolIndicators by \"immediateChangeOfActuallyAppliedTariff\": value
1 means \"with restart\", value 0 means \"without restart\".
b) Tariff Change without restart of the charging process.
The charging process for the actual communication shall be continued with the
new current tariff. I.e. the tariff change procedure is the same as the one
which is performed at a tariff switchover from the current to the next tariff.
This means that:
\- at the change of a tariff sequence, the new applied subtariff of the new
tariff sequence is retrieved via the elapsed communication duration;
\- at the change of a non-periodic tariff, the new non-periodic tariff is not
applied (no double counting);
\- the new communication attempt and communication setup charge are not
applied.
c) Tariff Change with restart of the charging process.
The charging process with the actual current tariff shall be closed and
restarted with the new current tariff. This means that:
\- at the change of a tariff sequence, the charging process restarts with the
first communication subtariff of the new tariff sequence;
\- at the change of a non-periodic tariff, the new non-periodic tariff is
applied;
\- the new communication attempt and communication setup charge are not
applied.
d) In a multi-operator environment, the procedures of how the subtariffs of
the next tariff are applied are subject of bilateral or multilateral
agreements.
##### 4.3.3.2.2 Add-on Charge
On receipt of the Add-on-charge indication, the given amount of charge has to
be added. The current tariff shall not be changed.
An Add-on-charge indication is allowed after start of charging only.
The charge is either in non-monetary format or in monetary format.
The add-on charge in non-monetary-format is a number of meter-pulse units. The
add-on charge in monetary format is indicated by the currency factor
multiplied by the currency scale.
#### 4.3.3.3 Subsequent Tariff indications
In addition to the first Tariff indication, subsequent Tariff indications
during the communication may be received in the following cases:
a) The current tariff has to be changed. A Tariff indication with the new
current tariff together with the next tariff and its switch-over time will be
received.
b) The next tariff and its tariff switch-over time were not received at
communication setup. A Tariff indication with the next tariff and the
corresponding switchover time will be received before the switchover time.
### 4.3.4 Handling of identifiers
The initial indication, i.e. either a Tariff indication or an Add-on-charge
indication, issued by the application process in a charge determination point
shall contain the originationIdentification A.
The initial acknowledgement (i.e. the first Tariff/Add-on-charge response) to
this initial (Tariff/Add-on-charge) indication (with originationIdentification
and without destinationIdentification) issued by the application process in
the generation point shall contain the originationIdentification B and the
destinationIdentification A in order to allow mapping between the sending and
receiving direction.
The destinationIdentification A equals the originationIdentification A, and
the destinationIdentification B equals the originationIdentification B.
All subsequent Tariff and Add-on-charge indications associated with the same
tariff determination instance contain the originationIdentification A and
destinationIdentification B. All subsequent Tariff and Add-on-charge responses
associated with the same tariff determination instance shall contain the
originationIdentification B and destinationIdentification A.
## 4.4 Signalling requirements
### 4.4.1 General
When sending Tariff Information, the CDP shall encode this information
according to the XML-schema defined in annex C and send it to the CGP. In
addition, for this MIME body the AS:
\- shall set the Content-Type header to \"application/vnd.etsi.sci+xml\" and
set the Content-Disposition to \"render\" with the \"handling\" parameter set
to \"optional\".
In the case the Tariff Information is transported in a message that is
forwarded by CDP that contains already a content body, CDP shall generate a
multipart/mixed MIME body containing two sub-parts:
\- one with the Tariff Information; the Content-Type and Content-Disposition
of this sub-part should be coded as specified for non-multipart bodies;
\- one with the received body; headers describing the content of the received
SIP message (e.g. Content-type) should be moved into the headers of the this
subpart.
### 4.4.2 Procedures during communication set-up
#### 4.4.2.1 Procedures at the CDP
When an INVITE request is received, the CDP operates as a routing B2B UA as
specified in clause 5.7.5 of\ 3GPP TS 24.229 [4] and includes the tariff
information in the content body of a reliable 1xx provisional response, or in
the content body of a 200 OK.
### 4.4.3 Procedures after start of charging
#### 4.4.3.1 Procedures at the CDP
The CDP operates as a routing B2B UA as specified in clause 5.7.5 of 3GPP TS
24.229 [4] and may send tariff information at any moment during the active
phase of the communication. When sending the tariff information, the CDP shall
include the tariff information in the content body of a mid-dialog request, a
mid-dialog response or in the content body of a 200 OK response forwarded by
the CDP or of an INFO request generated by the CDP.
## 4.5 Interaction with other services
Not applicable.
## 4.6 Interactions with other networks
### 4.6.1 Interaction with PSTN/ISDN
In case of interaction with networks which do not provide tariff information
in the signalling system, the tariff information shall be discarded and the
communication shall continue according to the basic call procedures.
The elements and types of the SIP Transfer of Tariff Information XML schema,
version 1.0 (defined in annex C), shall be mapped to/from the regarding
elements and types of the Tariff Charging ASE defined in clause 8 of ES 201
296 [6], as described in table 1. When the MGCF is able to interwork the ISUP
charging ASE to a XML instance, the MGCF shall send to the ISDN network an
ISUP charging acknowledgment \"accepted\". Was the interworking not
successful, the MGCF acts as described in clause 6.3.6 of ES 201 296 [6] or no
acknowledgement is sent.
Table 1: Mapping of Tariff elements
+----------------------------------+----------------------------------+ | SIP Transfer of Tariff | ISUP Signalling aspects of | | Information | Tariff | | | | | XML schema | Charging ASE | +----------------------------------+----------------------------------+ | - messageType | - chargingMessageType | | | | | > \- crgt | > \- crgt | | > | > | | > \- aocrg | > \- aocrg | +----------------------------------+----------------------------------+ | ChargingTariffInformationType | ChargingTariffInformation | | | | | - chargingControlIndicators | - chargingControlIndicators | | | | | - chargingTariff | - chargingTariff | | | | | > \- tariffCurrency | > \- tariffCurrency | | > | | | > \- tariffPulse | - - tariffPulse | | | | | - originationIdentification | - originationIdentification | | | | | - destinationIdentification | - destinationIdentification | | | | | currency | - currency | +----------------------------------+----------------------------------+ | AddOnChargeInformationType | AddOnChargeInformation | | | | | - chargingControlIndicators | - chargingControlIndicators | | | | | - addOnCharge | - addOnCharge | | | | | > \- addOnChargeCurrency | > \- addOnChargeCurrency | | > | > | | > \- addOnChargePulse | > \- addOnChargePulse | | | | | - originationIdentification | - originationIdentification | | | | | - destinationIdentification | - destinationIdentification | | | | | currency | currency | +----------------------------------+----------------------------------+ | TariffSwitchPulseType | TariffSwitchPulse | | | | | - nextTariffPulse | - nextTariffPulse | | | | | tarffSwitchOverTimer | tarffSwitchOverTimer | +----------------------------------+----------------------------------+ | CommunicationChargePulseType | CommunicationChargePulse | | | | | - pulseUnits | - pulseUnits | | | | | - chargeUnitTimeInterval | - chargeUnitTimeInterval | | | | | TariffDuration | TariffDuration | +----------------------------------+----------------------------------+ | TariffPulseFormatType | TariffPulseFormat | | | | | - | - | | communicationChargeSequencePulse | communicationChargeSequencePulse | | | | | - tariffControlIndicators | - tariffControlIndicators | | | | | - callAttemptChargePulse | - callAttemptChargePulse | | | | | callSetupChargePulse | callSetupChargePulse | +----------------------------------+----------------------------------+ | CommunicationChargeCurrencyType | CommunicationChargeCurrency | | | | | - currencyFactorScale | - currencyFactorScale | | | | | - tariffDuration | - tariffDuration | | | | | subTariffControl | subTariffControl | +----------------------------------+----------------------------------+ | TariffSwitchCurrencyType | TariffSwitchCurrency | | | | | - nextTariffCurrency | - nextTariffCurrency | | | | | tariffSwitchOverTimer | tariffSwitchOverTimer | +----------------------------------+----------------------------------+ | TariffCurrencyFormatType | TariffCurrencyFormat | | | | | - communicationChargeSequence | - communicationChargeSequence | | Currency | Currency | | | | | - tariffControlIndicators | - tariffControlIndicators | | | | | - callAttemptChargeCurrency | - callAttemptChargeCurrency | | | | | callSetupChargeCurrency | callSetupChargeCurrency | +----------------------------------+----------------------------------+ | CurrencyFactorScaleType | CurrencyFactorScale | | | | | - currencyFactor | - currencyFactor | | | | | currencyScale | currencyScale | +----------------------------------+----------------------------------+ | TariffPulseType | TariffPulse | | | | | - currentTariffPulse | - currentTariffPulse | | | | | tariffSwitchPulse | tariffSwitchPulse | +----------------------------------+----------------------------------+ | TariffCurrencyType | TariffCurrency | | | | | - currentTariffCurrency | - currentTariffCurrency | | | | | tariffSwitchCurrency | tariffSwitchCurrency | +----------------------------------+----------------------------------+ | ChargingControlIndicatorsType | ChargingControlIndicators | | | | | - | - | | immediateChangeOfActuallyApplied | immediateChangeOfActuallyApplied | | Tariff | Tariff | | | | | delayUntilStart | delayUntilStart | +----------------------------------+----------------------------------+ | Cha | ChargingReferenceIdentification | | rgingReferenceIdentificationType | | | | - networkIdentification | | - networkIdentification | | | | referenceID | | referenceID | | +----------------------------------+----------------------------------+ | bitType | STRING | +----------------------------------+----------------------------------+ | eightBitType | OCTET STRING (size (1)) | +----------------------------------+----------------------------------+ | sixteenBitType | OCTET STRING (size (2)) | +----------------------------------+----------------------------------+ | NetworkIdentificationType | NetworkIdentification | +----------------------------------+----------------------------------+ | CurrencyType | Currency | | | | | EUR | Euro | | | | | USD | uSDollar | | | | | CNY | chineseYuan | | | | | ... | ... | +----------------------------------+----------------------------------+ | CurrencyFactorType | CurrencyFactor | +----------------------------------+----------------------------------+ | CurrencyScaleType | CurrencyScale | +----------------------------------+----------------------------------+ | TariffDurationType | TariffDuration | +----------------------------------+----------------------------------+
### 4.6.2 Interaction with PSTN/ISDN Emulation
For Further Study.
### 4.6.3 Interaction with external IP networks
The procedures of 3GPP TS 24.229 **[4]** shall apply.
# 5 Extensions within the present document
## 5.1 SIP Transfer of Tariff Information XML body
### 5.1.1 General
This subclause contains the SIP Transfer of Tariff Information XML body in XML
format. The SIP Transfer of Tariff Information XML shall be valid against the
SIP Transfer of Tariff Information XML schema defined in Annex C.
See subclause 5.1.2 for the associated MIME type definition.
### 5.1.2 MIME type definition
#### 5.1.2.1 Introduction
This subclause defines the MIME type for \"application/vnd.etsi.sci+xml\". A
SIP Transfer of Tariff Information XML Document can be identified with this
media type.
#### 5.1.2.2 Syntax
The following optional parameters are defined:
\- \"charset\": the parameter has identical semantics to the charset parameter
of the \"application/xml\" media type as specified in RFC 3023 [9].
\- \"sv\" or \"schemaversion\": the syntax for the \"sv\" or \"schemaversion\"
parameter is specified in table 2:
Table 2: Syntax of the \"sv\" or \"schemaversion\" parameter
m-parameter /= (\"sv\" / \"schemaversion\") EQUAL LDQUOT [ sv-value-list ]
RDQUOT
sv-value-list = sv-value-range *( \",\" sv-value )
sv-value-range = sv-value [ \"-\" sv-value ]
sv-value = number / token
number = 1*DIGIT [ \".\" 1*DIGIT ]
The BNF for m-parameter is taken from IETF RFC 3261 [8] and modified
accordingly.
#### 5.1.2.3 Operation
The encoding considerations for \"application/vnd.etsi.sci+xml\" are identical
to those of \"application/xml\" as described in RFC 3023 [9].
The \"sv\" or \"schemaversion\" parameter's value is used to indicate:
\- the versions of SIP Transfer of Tariff Information XML schema that can be
used to validate the SIP Transfer of Tariff Information XML body (if the MIME
type and parameter are present in the Content-Type header) or
\- the accepted versions of the SIP Transfer of Tariff Information XML body
(if the MIME type and parameter are present in the Accept header).
If the \"sv\" and \"schemaversion\" parameter are absent, it shall be assumed
that version 1.0 of the XML Schema for the SIP Transfer of Tariff Information
XML body is supported.
###### ## Annex A (informative): Signalling flows
NOTE: The UNI AOC messages (to the left of the CGP) are out of scope of the
present document and are shown for explanation reasons.
Figure 1: Transfer of Tariff Information during communication set-up
Figure 1 gives an example for transfer of Tariff Information during the
communication set-up phase. When an INVITE request is received, the CDP
includes the Tariff Information in the content body of a reliable 1xx
provisional response, in this example the 183 Session progress response. The
Tariff Information includes the current tariff T1, the next tariff T2, and the
absolute switch-over time 10 h and 00 min.
The CGP applies T1 when the dialog is confirmed after the reception of the 200
OK. At 10 h and 00 min the CGP switches to T2.
Figure 2: Transfer of Add-on-charge
Figure 2 gives an example for transfer of Add-on-charge after start of
charging. The CDP includes the Tariff Information in the content body of an
INFO request.
After the reception of the INFO request the CGP applies the Add-on charge.
Figure 3: Immediate tariff change without restart of the charging instance
Figure 3 gives an example for an immediate tariff change without a restart of
the charging instance. After start of charging, the CDP includes the Tariff
Information in the content body of an INFO request. The Tariff Information
includes the new current tariff T2, which is a tariff sequence with the sub-
tariffs T21 (duration 1 h) and T22 (duration unlimited), and the indication
that no restart shall be applied.
After the reception of the INFO request the CGP applies T22, because T22 is
valid 1 h and 30 min after communication start.
Figure 4: Immediate tariff change with restart of the charging instance
Figure 4 gives an example for an immediate tariff change with a restart of the
charging instance. After start of charging, the CDP includes the Tariff
Information in the content body of an INFO request. The Tariff Information
includes the new current tariff T2, which is a tariff sequence with the sub-
tariffs T21 (duration 1 h) and T22 (duration unlimited), and the indication
that a restart shall be applied.
After the reception of the INFO request the CGP restarts the charging instance
and applies T21 for 1 h, and then switches to T22.
###### ## Annex B (informative): SIP Transfer of Tariff Information parameters
# B.1 General
This annex describes the parameters needed to transport SIP NNI information.
# B.2 NNI Information
## B.2.0 General
For SIP Transfer of Tariff Information the regarding SIP messages shall be
able to transport the following basic information:
  * Charging Message Type, see clause B.2.1.
  * Add On Charge Information, see clause B.2.2.
  * Charge Tariff Information, see clause B.2.3.
## B.2.1 Charge Message Type
The following Charge Message Types shall be applicable:
crgt Charge Tariff Information.
aocrg Add On Charge Information.
## B.2.2 Add On Charge Information
### B.2.2.0 General
Add On Charge Information is used to add an amount of charge for the
communication and does not alter the current tariff. The Destination
Identification is not available in an initial AddOnCharge Information message,
in all subsequent ones it is included. In the message the add-on charge has
either the pulse or currency format.
Add On Charge Information shall contain the following elements:
  * Charging Control Indicators (optional), see clause B.3.2.1; and
  * Add On Charge, see clause B.2.2.1; and
  * Origination Identification, see clause B.3.1.1; and
  * Destination Identification (optional), see clause B.3.1.2; and
  * Currency (optional), see clause B.3.2.2.
### B.2.2.1 Add On Charge
#### B.2.2.1.0 General
Add On Charge shall contain the following elements:
  * Add On Charge Currency, see clause B.2.2.1.1; or
  * Add On Charge Pulse, see clause B.2.2.1.2.
#### B.2.2.1.1 Add On Charge Currency
The Add On Charge Currency element shall be coded as Currency Factor Scale
type, see clause B.3.2.3.
#### B.2.2.1.2 Add On Charge Pulse
The Add On Charge Pulse element shall be coded as Pulse Units type, see clause
B.3.2.4.
## B.2.3 Tariff Information
### B.2.3.0 General
This information is used to transfer explicit tariff data to the originating
subscriber\'s network and the charge registration AS during communication set-
up and also in the active phase of a communication. The Destination
Identification is not available in an initial Tariff Information, in all
subsequent ones it is included.
Tariff Information shall contain the following elements:
  * Control Indicators, see clause B.3.2.1; and
  * Tariff, see clause B.2.3.1; and
  * Origination Identification, see clause B.3.1.1; and
  * Destination Identification (optional), see clause B.3.2; and
  * Currency, see clause B.3.2.2.
### B.2.3.1 Tariff
#### B.2.3.1.0 General
The Tariff shall contain the following elements
  * Tariff Currency, see clause B.2.3.1.1; or
  * Tariff Pulse, see clause B.2.3.1.2.
#### B.2.3.1.1 Tariff Currency
##### B.2.3.1.1.0 General
The Tariff Currency shall contain the following elements:
  * Current Tariff Currency (optional), see clause B.2.3.1.1.1; and
  * Tariff Switch Currency (optional), see clause B.2.3.1.1.2.
##### B.2.3.1.1.1 Current Tariff Currency
The Current Tariff Currency shall be coded as communication charge currency
type, see clause B.3.2.5.
##### B.2.3.1.1.2 Tariff Switch Currency
###### B.2.3.1.1.2.0 General
The Tariff Switch Currency shall be coded as Tariff Switch Currency type, see
clause B.2.3.1.1.2.1.
##### B.2.3.1.1.2.1 Tariff Switch Currency {#b.2.3.1.1.2.1-tariff-switch-
currency .H6}
###### # B.2.3.1.1.2.1.0 General
Tariff Switch Currency shall contain the following elements:
  * Next Tariff Currency, see clause B.2.3.1.1.2.1.1; and
  * Tariff Switchover Time, see clause B.2.3.1.1.2.1.2.
##### B.2.3.1.1.2.1.1 Next Tariff Currency {#b.2.3.1.1.2.1.1-next-tariff-
currency .H6}
###### # B.2.3.1.1.2.1.1.0 General
Next Tariff Currency shall be coded as Tariff Currency Format type, see clause
B.2.3.1.1.2.1.1.1.
##### B.2.3.1.1.2.1.1.1 Tariff Currency Format type
{#b.2.3.1.1.2.1.1.1-tariff-currency-format-type .H6}
###### # B.2.3.1.1.2.1.1.1.0 General
The Tariff Currency Format type shall contain the following elements:
  * Communication Charge Sequence Currency (optional), see clause B.3.2.5; and
  * Tariff Control Indicators, see clause B.3.2.6; and
  * Call Attempt Charge Currency (optional), see clause B.3.2.7; and,
  * Call Setup Charge Currency (optional), see clause B.3.2.8.
##### B.2.3.1.1.2.1.1.1.1 Communication Charge Sequence Currency
{#b.2.3.1.1.2.1.1.1.1-communication-charge-sequence-currency .H6}
The communication charge sequence currency is a direct charge in currency per
time unit. Only one fixed time unit is used. This time unit has to be agreed
between all cooperating networks, e.g. one second. Being fixed, the time unit
is not transferred.
The Communication Charge Sequence Currency shall contain a sequence with 1 up
to 4 elements coded as Communication Charge Currency, see clause B.3.2.5.
##### B.2.3.1.1.2.1.2 Tariff Switchover Time {#b.2.3.1.1.2.1.2-tariff-
switchover-time .H6}
Tariff Switchover Time shall be coded as Tariff Switchover Time type, see
clause B.3.2.6.
#### B.2.3.1.2 Tariff Pulse
The Tariff Pulse shall contain the following elements:
  * Current Tariff Pulse (optional), see clause B.2.3.1.2.1; and
  * Tariff Switch Pulse (optional), see clause B.2.3.1.2.2.
##### B.2.3.1.2.1 Current Tariff Pulse
Current Tariff Pulse shall be coded as Tariff Pulse Format type, see clause
B.3.2.11.
##### B.2.3.1.2.2 Tariff Switch Pulse
Tariff Switch Pulse shall be coded as Tariff Switch Pulse type, see clause
B.2.3.1.2.2.1.
##### B.2.3.1.2.2.1 Tariff Switch Pulse Type {#b.2.3.1.2.2.1-tariff-switch-
pulse-type .H6}
The Tariff Switch Pulse type shall contain the following elements:
  * Next Tariff Pulse, see clause B.2.3.1.2.2.1.1; and
  * Tariff Switchover Time, see clause B.2.3.1.2.2.1.2.
##### B.2.3.1.2.2.1.1 Next Tariff Pulse {#b.2.3.1.2.2.1.1-next-tariff-pulse
.H6}
Next Tariff Pulse shall be coded as Tariff Pulse Format type, see clause
B.3.2.11.
##### B.2.3.1.2.2.1.2 Tariff Switchover Time {#b.2.3.1.2.2.1.2-tariff-
switchover-time .H6}
Tariff Switchover Time shall be coded as Tariff Switchover Time type, see
clause B.3.2.9.
# B.3 Common information elements/types
## B.3.1 Identification
### B.3.1.1 Origination identification
The Origination identification shall be expressed as charging reference
identification, see clause B.3.1.3.
### B.3.1.2 Destination identification
The destination identification shall be expressed as charging reference
identification, see clause B.3.1.3.
### B.3.1.3 Charge reference identification
Charge reference identification shall contain the following elements:
  * Network identification, see clause B.3.1.4; and
  * Reference ID, see clause B.3.1.5.
### B.3.1.4 Network identification
For the network identification the following structure of the network
identification values may be used:
{itu-t (0) administration (2) \ (x) network (y) element
identification (z)}
> Where the value for x is the value of the national regulation authority, the
> value for y is under the control of the Data Country Codes (DCCs) as defined
> in ITU-T Rec. X.121 concerned, and the value for z is under the control of
> the network concerned.
Any other valid object identifier value according to ITU-T X.660 may also be
used. The last component of the object identifier value will usually identify
the node creating the charging reference.
### B.3.1.5 Reference ID
The reference ID element shall have INTEGER values from 0..4 294 967 295
(maximum value 232 - 1).
### B.3.1.6 Network operators
Network operators shall be coded as network identification, see clause
B.3.1.4.
## B.3.2 Charge
### B.3.2.1 Charge control indicators
#### B.3.2.1.0 General
The charge control indicators shall contain 1 up to 8 bit-strings with the
following elements:
  * Immediate change of actually applied tariff, see clause B.3.2.1.1; and
  * Delay until start, see clause B.3.2.1.2.
#### B.3.2.1.1 Immediate change of actually applied tariff
The immediate change of actually applied tariff element shall be coded as
follows:
0 - immediate tariff change without restart.
1 - immediate tariff change with restart.
It is only used to change the actually applied tariff.
#### B.3.2.1.2 Delay until start
The delay until start element shall be coded as follows:
0 - start tariffing, if it is not already started, without waiting for the
\'start\' signal.
1 - delay start of tariffing up to the receipt of the \'start\' signal.
### B.3.2.2 Currency
The currency element (optional)shall be coded according to ISO 4217 [5]. The
absence of this element shall be interpreted as 'no indication'.
### B.3.2.3 Currency factor scale
The charge amount is indicated by the currency factor multiplied with the
currency scale. \"no charge\" indicates currency factor scale has the value 0.
Currency factor scale shall contain the following elements:
  * Currency factor, see clause B.3.2.3.1; and
  * Currency scale, see clause B.3.2.3.2.
#### B.3.2.3.1 Currency factor
The currency factor shall have INTEGER values from 0 to 999 999. Value 0
indicates \"no charge\" and is the default-value.
#### B.3.2.3.2 Currency scale
The currency scale shall have INTEGER values from -7 to 3. The actual value
for currency scale is given by 10x, where x is the value of the currency
scale. The default value is \'no Scale\'.
The coding of currency scale is as follows, all other values are spare:
7 (249): 0,0000001
6 (250): 0,000001
5 (251): 0,00001
4 (252): 0,0001
3 (253): 0,001
2 (254): 0,01
1 (255): 0,1
0 : 1
1 : 10
2 : 100
3 : 1 000
### B.3.2.4 Pulse units type
Pulse units is binary coded and has the value range from 0 to 255.
### B.3.2.5 Communication charge currency type
Communication charge currency shall contain the following elements:
  * Currency factor scale, see clause B.3.2.3; and
  * Tariff duration, see clause B.3.2.5.1; and
  * Sub tariff control, see clause B.3.2.5.2.
#### B.3.2.5.1 Tariff duration
Tariff duration shall be coded as tariff duration type, see clause B.3.2.12.
#### B.3.2.5.2 Sub tariff control
Sub tariff control shall be coded as sub tariff control type, see clause
B.3.2.13.
### B.3.2.6 Tariff control iIndicators
The tariff control indicators shall contain a bit-string of 1 up to 8 non-
cyclic tariff elements.
The coding of the non-cyclic Ttariff is as follows:
0: Cyclic tariff ( at expiration of the tariff duration of the last
communication tariff of the communication charge sequence, the communication
charge sequence is re-applied).
1: Non-cyclic tariff ( at expiration of the tariff duration of the last
communication tariff of the communication charge sequence, do not re-apply the
communication charge sequence).
### B.3.2.7 Call attempt charge currency
The call attempt charge is a direct charge, to be charged only for
unsuccessful calls.
The call attempt charge currency shall be coded as Currency Factor Scale, see
clause B.3.2.3.
### B.3.2.8 Call setup charge currency
The call set-up charge is a direct charge, to be charged once at start of
charging.
The call setup charge currency shall be coded as Currency Factor Scale, see
clause B.3.2.3.
### B.3.2.9 Tariff switchover time type
This time is the absolute time at which the next tariff has to become active.
It is represented in steps of 15 min.
The tariff switchover time shall be coded as:
0 : spare.
1 : 0 h 15 min.
2 : 0 h 30 min.
3 : 0 h 45 min.
4 : 1 h 0 min.
..
96 : 24 h 0 min.
97-255 : spare.
### B.3.2.10 Communication charge pulse type
Communication charge pulse shall contain the following elements:
  * Pulse Units, see clause B.3.2.10.1; and
  * Charge Unit Time Interval, see clause B.3.2.10.2; and
  * Tariff Duration, see clause B.3.2.10.3.
#### B.3.2.10.1 Pulse units
Pulse units shall be coded as pulse units type, see clause B.3.2.4.
#### B.3.2.10.2 Charge unit time interval
Charge unit time interval shall be coded as charge unit time interval type,
see clause B.3.2.14.
#### B.3.2.10.3 Tariff duration
Tariff duration shall be coded as tariff duration type, see clause B.3.2.12.
### B.3.2.11 Tariff pulse format type
Tariff pulse format shall contain the following elements:
  * Communication charge sequence pulse (optional), see clause B.3.2.11.1; and
  * Tariff control indicators, see clause B.3.2.6; and
  * Call attempt charge pulse (optional), see clause B.3.2.11.2; and
  * Call setup charge pulse (optional), see clause B.3.2.11.3.
The communication charges are meter-pulse units, which are to be applied per
charge unit time interval. The call attempt pulse units are to be charged only
for unsuccessful calls. The call set-up pulse units are to be charged once at
start of charging.
#### B.3.2.11.1 Communication charge sequence pulse
The communication charge sequence pulse shall contain a sequence of 1 up to 4
elements coded as communication charge pulse, see clause B.3.2.10.
#### B.3.2.11.2 Call attempt charge pulse
Call attempt charge pulse shall be coded as pulse units, see clause B.3.2.4.
#### B.3.2.11.3 Call setup charge pulse
Call setup charge pulse shall be coded as pulse units, see clause B.3.2.4.
### B.3.2.12 Tariff duration type
The duration indicates for how long time the communication charge component is
valid. Expiration of the tariff duration timer leads to the activation of the
next communication charge (if present). In the case where there is no next
communication charge in the communication charge sequence, the action to be
performed is indicated by the tariff control indicators.
Tariff duration shall have a INTEGER values form 0 to 36 000.
Tariff duration identifies with 0 unlimited duration and else in seconds unit.
0 = unlimited
1 = 1 s
2 = 2 s
...
36 000 = 10 h
### B.3.2.13 Sub tariff control type
Sub tariff control shall contain 1 up to 8 one time charge elements. The
coding of the one time charge element is as follows:
0 - Periodic charge.
1 - One time charge.
### B.3.2.14 Charge unit time interval type
The charge unit time interval is binary coded and has the value range from 0
to 35 997. It begins with 200 msec and then in steps of 50 msec.
The LSBit is the least significant bit of the first octet.
The MSBit is the most significant bit of the last octet.
The coding of the ChargeUnitTimeInterval is the following:
0 : no periodic metering
1 : 200 msec
2 : 250 msec
..
35 997 : 30 min
All other values are spare.
###### ## Annex C (normative): SIP Transfer of Tariff Information XML schema:
\
\
\
\XML Schema Definition for the AOC
information\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\ (x)
network (y) node identification (z)} -->
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
###### ## Annex D (informative): IANA registration templates
## D.1 IANA registry for Application Media Types
### D.1.1 IANA Registration template for application/vnd.etsi.sci+xml
NOTE 1: The information in the present Clause is for registration at IANA. RFC
4288 [10], section 9, describes the process that applies in case of changes to
the registry of media types. Any future changes to the XML schema in Annex C
or to the present Annex D.1.1 would require that this procedure is invoked.
NOTE 2: The MIME type \"application/vnd.etsi.sci+xml\" has originally been
registered at IANA based on ETSI TS 183 058 v2.0.0. The maintenance
responsibility for this specification has been transfered to 3GPP. Some
corrections to the syntax of the XML schema are only included in the present
specification, The original IANA registration is therefore outdated.
**MIME media type name:**
application
**MIME subtype name:**
vnd.etsi.sci+xml
**Required parameters:**
None
**Optional parameters:**
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in RFC 3023 [9].
\"sv\" or \"schemaversion\" the parameter\'s value is used to indicate:
\- the versions of the SIP Transfer of Tariff Information XML schema that can
be used to validate the SIP Transfer of Tariff Information XML body (if the
MIME type and parameter are present in the Content-Type header field) or
\- the accepted versions of the SIP Transfer of Tariff Information XML body
(if the MIME type and parameter are present in the Accept header field).
If the \"sv\" and \"schemaversion\" parameter are absent, it shall be assumed
that version 1.0 of the SIP Transfer of Tariff Information XML body is
supported.
**Encoding considerations:**
Same as encoding considerations of application/xml as specified in RFC 3023
[9]
**Security considerations:**
Same as general security considerations for application/xml as specified in
section 10 of RFC 3023 [9].
In addition, this content type provides a format for exchanging information in
SIP, so the security considerations from RFC 3261 [8] apply.
**Interoperability considerations:**
Same as Interoperability considerations as specified in section 3.1 of RFC
3023 [9].
If both \"sv\" and \"schemaversion\" are specified, then the value of
\"schemaversion\" is ignored.
**Published specification:**
3GPP TS 29.658, version 8.4.0: \"SIP Transfer of IP Multimedia Service Tariff
Information; Protocol specification\"
Available via \.
**Applications which use this media:**
Applications that use the 3GPP IP multimedia (IM) Core Network (CN) subsystem
as defined by 3GPP.
**Intended usage:**
COMMON
**Additional information :**
1\. **Magic number(s)** : none
2\. **File extension(s)** : none
3\. **Macintosh file type code** : none
4\. **Object Identifiers** : none
#