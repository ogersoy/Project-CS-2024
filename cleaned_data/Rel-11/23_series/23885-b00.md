# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The objective of the feasibility study is to investigate a solution for
supporting Single Radio Voice Call Continuity (SRVCC) from 3GPP UTRAN/GERAN CS
access to 3GPP E-UTRAN/HSPA access, for voice call initiated in LTE/HSPA
access and previously handed over to UTRAN/GERAN CS access, as well as for the
voice call directly initiated in UTRAN/GERAN CS access.
This Technical Report investigates solutions for SRVCC for voice calls that
are anchored in the IMS.
Coordination between the SRVCC for voice call and the handover of non‑voice PS
bearers is also covered.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.278: \"Service requirements for the Evolved Packet System
(EPS)\".
[3] 3GPP TS 23.292: \"IP Multimedia System (IMS) centralized services; Stage
2\".
[4] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage
2\".
[5] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[6] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[7] 3GPP TS 23.216: \" Single Radio Voice Call Continuity (SRVCC): Stage 2\".
[8] 3GPP TR 23.856: \"Feasibility study of SR-VCC enhancements\".
[9] 3GPP TS 23.221: \"Architectural requirements (Release 9)\".
[10] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
[11] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[12] 3GPP TS 25.413: \"UTRAN Iu interface Radio Access Network Application
Part (RANAP) signalling\".
[13] 3GPP TS 44.018: \"Mobile radio interface layer 3 specification; Radio
Resource Control (RRC) protocol\".
[14] 3GPP TS 29.280: \"Evolved Packet System (EPS); 3GPP Sv interface (MME to
MSC, and SGSN to MSC) for SRVCC\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Reverse Single Radio Voice Call Continuity:** Voice call continuity from
UTRAN/GERAN access to IMS over E-UTRAN/HSPA access for calls that are anchored
in IMS when the UE is capable of transmitting/receiving on only one of those
access networks at a given time. This is also referred to as Single Radio
Voice Call Continuity from E-UTRAN/HSPA to UTRAN/GERAN in this technical
report.
**Single Radio Voice Call Continuity:** Voice call continuity from IMS over
E-UTRAN/HSPA access to UTRAN/GERAN access for calls that are anchored in IMS
when the UE is capable of transmitting/receiving on only one of those access
networks at a given time. This is also referred to as Single Radio Voice Call
Continuity from UTRAN/GERAN to E-UTRAN/HSPA in this technical report.
**Service Continuity** : see TS 22.278 [2].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
rSRVCC Reverse Single Radio Voice Call Continuity
SRVCC Single Radio Voice Call Continuity
# 4 Requirements and Assumptions
## 4.1 Assumptions
For SRVCC from 3GPP UTRAN/GERAN CS access to 3GPP E-UTRAN/HSPA access shall
re-use existing functions defined for SRVCC from E‑UTRAN/HSPA to UTRAN/GERAN
in TS 23.216 [7] as much as possible. The solution shall minimize impacts to
Rel‑8 SRVCC mechanisms. The results of the study on performance enhancements
in TR 23.856 [8] shall be taken into account in this study. The following
scenarios shall be studied:
\- SRVCC from GERAN without DTM support to E-UTRAN.
\- SRVCC from UTRAN/GERAN with PS HO support to E-UTRAN.
\- SRVCC from GERAN without DTM support to UTRAN (HSPA).
\- SRVCC from UTRAN/GERAN with PS HO support to UTRAN (HSPA).
It is assumed that the support of IMS voice over PS Session is homogeneous in
the E-UTRAN network.
## 4.2 Architectural requirements
\- The rSRVCC solution shall not require UE with multiple RATs capability to
simultaneously signal on two different RATs.
\- Impact on user service quality experience, e.g. QoS, call drop,
interruption time, should be minimized.
\- Overall duration of the 3GPP UTRAN/GERAN CS access to 3GPP E-UTRAN/HSPA
access handover procedure shall be minimized.
\- RAT/domain selection change shall be network initiated and under network
control.
\- In case where the UE has disabled its E-UTRAN capability due to mismatch
with the voice capabilities of the network, it shall be able for the UE to re-
enable its E-UTRAN capability.
\- It shall be possible to restrict RAT/domain selection change to specific
access systems and specific subscribers, depending on operator policies (for
example restrict handover of voice calls from UTRAN/GERAN CS access to PS
domain)and capabilities of the network and the UE, and these shall be network
initiated and under network control .
\- In roaming cases, the VPLMN shall be able to control the RAT/domain
selection change while taking into account any related HPLMN policies. In
particular, the HPLMN shall be able to restrict handover to PS domain for a
given VPLMN.
\- E-UTRAN shall not be required to convert any CS specific RAB information
for rSRVCC operation.
\- Handovers from UTRAN/GERAN CS access to E-UTRAN/HSPA for voice call
initiated in LTE and previously handed over to UTRAN/GERAN CS access as well
as for voice calls directly initiated in UTRAN/GERAN CS access shall be
supported, provided that the calls have been anchored in IMS at the time of
their establishment (for example in the case of voice calls directly initiated
in UTRAN/GERAN CS access the MSC Server has been enhanced for ICS).
\- The signalling to the HPLMN for inter-domain handover in the VPLMN should
be minimized.
\- Impacts to Rel-10 SRVCC mechanisms shall be minimized.
\- For calls that have been handed over from PS via SRVCC, provided that the
UE and the network support rSRVCC procedures, rSRVCC should be possible no
matter which SRVCC Release 10 procedure applied:
\- ATCF with media anchored in the ATGW
\- ATCF without media anchored in the ATGW
\- ATCF not included at registration or no ATCF (i.e. SRVCC Release 9
architecture)
NOTE 1: In some of the aforementioned scenarios, the performance requirements
might not always be possible to fulfill.
\- In case of active PS bearer(s) on UTRAN/GERAN, PS bearer handover to
E-UTRAN/HSPA shall be handled as specified in TS 23.401 [5] in conjunction
with SRVCC to E-UTRAN/HSPA as specified in TS 23.216 [7]. The rSRVCC solution
shall not impact the PS bearer handover.
\- The solution shall be applicable to networks where UTRAN/GERAN PS domain
cannot provide IMS voice service.
\- After transfer from UTRAN/GERAN CS domain to E-UTRAN/HSPA PS-domain, it
shall support moving the session back to UTRAN/GERAN CS domain..
\- The solution shall support the MSC to initiate reverse SRVCC due to traffic
reasons (e.g., for capacity reason, re-enabling high speed broadband access
when LTE is available)
\- The solution shall support the UE to return to the source BSS/RAN when HO
failed and shall not cause any audible disruption on the voice call.
## 4.3 Performance requirements
The RAT change procedure executed to enable **Service Continuity** for an
established voice call shall target an interruption time not higher than 300
ms.
## 4.4 Reverse SRVCC deployment scenarios
This section details the most likely reasons that can lead operators to deploy
rSRVCC, and the handover scenarios which are most important in the different
cases:
1) Providing users better service:
As packet services are better provided over E-UTRAN/HSPA, the operator deploys
rSRVCC to make sure that users get service on E-UTRAN/HSPA as soon as
E-UTRAN/HSPA becomes available (i.e. typically when the E-UTRAN/HSPA cell
quality is better than a given threshold).
2) Optimizing network usage:
The operator wants to minimize the CS core network usage and to optimize the
radio network usage, so it chooses to handover calls to PS as soon as
E-UTRAN/HSPA becomes available. (i.e. typically when the E-UTRAN/HSPA cell
quality is better than a given threshold)
3) Enhancing coverage:
The operator wants to enhance its radio coverage by adding the possibility to
handover calls to E-UTRAN where GERAN/UTRAN coverage is getting weak.
It could either be that the E-UTRAN cell quality is getting better than the
GERAN/UTRAN cell quality, or that the GERAN/UTRAN cell quality gets worse than
a given threshold, while the E-UTRAN cell quality is better than another one.
It is expected that scenarios 1) and 2) will be the most common, and
consequently, that even if coverage triggered rSRVCC handovers are expected to
occur, they should not be the most frequent.
# 5 Architecture model and reference points
## 5.1 General
The architecture for SRVCC from UTRAN/GERAN to E-UTRAN/HSPA reuses the
architecture model as defined in TS 23.216 [7].
The overall model and impacts to the various elements is provided in the
following clauses.
## 5.2 Reference architecture
### 5.2.1 3GPP UTRAN/GERAN and E-UTRAN SRVCC architecture
NOTE 1: The following figure only shows the necessary components related to
MSC Server enhanced with SRVCC.
NOTE 2: MSC Server shown in the figure is enhanced for SRVCC.
NOTE 3: This architecture also applies to roaming scenario (i.e. S8, S6a are
not impacted due to SRVCC).
NOTE 4: Both Gn-SGSN and S4-SGSN are supported.
Figure 5.2.1-1: SRVCC architecture for UTRAN/GERAN to E-UTRAN
### 5.2.2 3GPP UTRAN/GERAN and UTRAN (HSPA) SRVCC architecture
Figure 5.2.2-1: SRVCC architecture for UTRAN/GERAN to UTRAN (HSPA) with Gn
based SGSN
NOTE 1: The above figures only show the necessary components related to MSC
Server enhanced with SRVCC.
NOTE 2: MSC Server shown in the above figures are enhanced for SRVCC.
NOTE 3: This architecture also applies to roaming scenario.
Figure 5.2.2-2: SRVCC architecture for UTRAN/GERAN to UTRAN (HSPA) with S4
based SGSN
## 5.3 Functional Entities
NOTE: IMS components are not described here. Please refer to TS 23.237 [4] and
TS 23.292 [3].
### 5.3.1 MSC Server enhanced for SRVCC
In addition to the standard MSC Server behaviour defined in TS 23.216 [7], an
MSC Server which has been enhanced for SRVCC from UTRAN/GERAN to E-UTRAN/HSPA
provides the following functions:
\- Handling the Relocation Preparation procedure requested for the voice
component from BSC/RSC via Sv reference point;
## 5.4 Reference points
No reference point is introduced for the purpose of SRVCC from UTRAN/GERAN CS
access to E-UTRAN/HSPA access.
# 6 Solutions
## 6.1 Solution 1: Session transfer initiated on E-UTRAN/HSPA
### 6.1.1 Functional Description
A prerequisite for calls to be possible to handover from UTRAN/GERAN to
E-UTRAN/HSPA is that they have been anchored in IMS at the time of their
establishment. For calls established on the UTRAN/GERAN side with no voice
over IMS support implies the existence of ICS capabilities in the network or
in the UE.
Editor\'s Note: The functional description of the MSC enhanced for rSRVCC and
of the UE enhanced for rSRVCC need to be added to this section.
### 6.1.2 Information flows
#### 6.1.2.1 GERAN/UTRAN Attach procedure
The UTRAN/GERAN Attach procedure for an SRVCC from UTRAN/GERAN to E-UTRAN
capable UE is performed as defined in clause 6.5 of TS 23.060 [6] with the
following additions:
1) The UE indicates to the network its capability to perform SRVCC from
UTRAN/GERAN to E-UTRAN as follows:
a) In case of a network of Network Mode of Operation type I:
\- The \" rSRVCC capability indication\" is sent by the UE in the Attach
Request message sent to the SGSN at combined GPRS/IMSI Attach, and in the
Routing Area Update Request message at combined RA/LA Update.
\- If received by the SGSN, the \" rSRVCC capability indication\" is
transmitted by the SGSN to the MSC in the Location Updating procedure.
b) In case of a network of Network Mode of Operation types II or III:
\- The \" rSRVCC capability indication\" is sent by the UE in the Location
Updating Request it sends to the network.
2) If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication in the Insert Subscriber Data sent
to the MSC at Attach or at Location Area Update.
3) The MSC enhanced for rSRVCC shall subscribe to the registration event
package at Attach or Location Area Update. This will be used for it to monitor
the IMS registration status of the UE.
Editor\'s Note: Whether this is possible in case the MSC does not register the
user on behalf of the UE (as an MSC enhanced for ICS does) is FFS.
Editor\'s Note: Whether the MSC can correlate the registration status received
from the SCC AS with the identity used by the UE in the ongoing session is
FFS.
#### 6.1.2.2 E-UTRAN attach procedure
The E-UTRAN attach procedure for 3GPP rSRVCC UE is performed as defined in
clause 6.3.1 of TS 23.216 [7] with the following additions:
1) rSRVCC UE includes the \"rSRVCC capability indication\" as part of the \"MS
Network Capability\" in the Attach Request message and in Tracking Area
Updates.
2) If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication as part of the subscription data
sent to the MME.
#### 6.1.2.3 Call establishment procedure in GERAN/UTRAN
If the MSC server enhanced for rSRVCC determines that rSRVCC is allowed for a
given call, it shall include an \"rSRVCC possible indication\" to the RNS/BSS
at call set up to/from an rSRVCC capable UE in:
1) The RAB Assignment Message sent over the Iu-CS interface for a network in
Iu mode.
2) The Assignment Request sent over the A interface for a network in A/Gb
mode.
The setting of the \"rSRVCC possible indication\" by the MSC shall at least
take into account the following elements:
1) rSRVCC capability of the UE
The \"rSRVCC capability indication\" is received from the GERAN/UTRAN to
E-UTRAN SRVCC capable UE at Attach or Location Area Update, see clause
6.1.2.1.
2) Authorization of the user for rSRVCC
The \"rSRVCC allowed\" information is received from the GERAN/UTRAN to E-UTRAN
SRVCC capable UE at Attach or Location Area Update, see clause 6.1.2.1.
3) Prior anchoring of a voice call in the SCC AS
At call establishment, the rSRVCC capable MSC server shall consider the call
as anchored in the SCC AS in the two following cases:
a) The voice calls was initiated by the UE on UTRAN/GERAN using CS domain
procedures and the MSC has itself anchored using ICS procedures (which can
only be the case if the MSC is enhanced for ICS).
b) The voice call was initiated on GERAN/UTRAN by a UE enhanced for ICS, using
the Gm or the I1 interface for service control purposes.
To enable the MSC enhanced for rSRVCC to distinguish such calls, rSRVCC
capable UEs which are also ICS capable (as defined in TS 23.292 [3]) shall
include an \"IMS anchoring performed\" indicator in a CS CALL SETUP message
corresponding to bearer control signalling for a call established using Gm or
I1. The presence of that indicator shall be understood by the MSC enhanced for
rSRVCC as the fact that the UE has anchored the call in IMS using ICS
capabilities.
4) IMS registration status of the UE
Additionally, operator policies or local policies could be used for the MSC
enhanced for rSRVCC in setting the \"rSRVCC possible indication\" sent towards
the RNS/BSS at call establishment.
The BSS/RNS shall use that indication to decide for which cells the UE shall
report measurements, as a basis for triggering a SRVCC handover from
GERAN/UTRAN to E-UTRAN/HSPA.
#### 6.1.2.4 SRVCC from E-UTRAN/HSPA to GERAN/UTRAN
The procedures defined in 6.2 and 6.3 of TS 23.216 [7] apply with the
following additions:
If received from the UE and the HSS respectively, the MME/SGSN shall include
the \"rSRVCC capability indication\" as well as the \"rSRVCC allowed\" in the
SRVCC PS to CS Request it sends to the target MSC (via the MSC enhanced for
SRVCC).
In case the MSC server enhanced for rSRVCC determines that rSRVCC is allowed
for a given call, it shall include an \"rSRVCC possible indication\" to the
RNS/BSS in the Handover Request/Iu Relocation Request it sends towards the
BSS/RNS.
Once the SRVCC handover procedure is over, the MSC enhanced for rSRVCC shall
subscribe to the registration event package at Attach or Location Area Update.
This will be used for it to monitor the IMS registration status of the UE.
Editor\'s Note: Whether this is possible in case the MSC does not register the
user on behalf of the UE (as an MSC enhanced for ICS does) is FFS.
Editor\'s Note: Whether the MSC can correlate the registration status received
from the SCC AS with the identity used by the UE in the ongoing session is
FFS.
#### 6.1.2.5 Handover procedure in GERAN/UTRAN
If the CS domain call is subject to radio-level handover (e.g. intra-RAT,
inter-RAT, intra-MSC, inter-MSC, etc) while remaining in the CS domain, the
\"rSRVCC possible indication\" needs to be forwarded to the target radio
access (RNS/BSS) provided that it still applies.
Editor\'s Note: The way this information is conveyed needs to be further
detailed.
#### 6.1.2.6 Call flows for SRVCC from UTRAN/GERAN to E-UTRAN
##### 6.1.2.6.1 SRVCC handover from GERAN without DTM support to E-UTRAN
Depicted in Figure 6.1.2.6.1-1 is a call flow for SRVCC handover from GERAN
without DTM support to E-UTRAN.
Figure 6.1.2.6.1-1: SRVCC handover from GERAN without DTM support to E-UTRAN
At the beginning of the call flow, all PS bearers are suspended. The source
system is configured to know that the target MME/TA where the UE is moving
support IMS VoIP.
1\. Based on UE measurement reports the source BSS decides to trigger a
handover to E-UTRAN.
2\. Source BSS sends a Handover Required (Source to Target Transparent
Container) message to the source MSC.
3\. Source MSC executes the inter-MSC handover procedure by exchanging Prepare
HO Request/ Response messages with the MSC Server. The MSC server checks
whether the IMS registration of the user on the UE is still valid or not. In
case it is not, it rejects the handover request, indicating in the cause value
that rSRVCC is not possible any longer. That should trigger the RAN to
reconfigure the cells the UE shall measure. If the IMS registration is still
valid, the MSC Server signals successful CS handover without allocating any
E-UTRAN resources.
4\. Source MSC sends a Handover Required Acknowledge message to the source
BSS.
5\. Source BSS sends a Handover Command to the UE instructing it to perform a
CS to PS handover to E-UTRAN. Note that this message does not contain any
transparent container information.
6\. UE re-tunes to E-UTRAN radio and performs a TAU procedure as specified in
TS 23.401 [5]. UE uses the Active flag in the TAU Request to MME to resume the
suspended SIP signalling bearer and any other suspended non-voice bearers. The
MME requests the context from the source SGSN. The MME will inform S-GW and
PDN-GW(s) to resume the suspended bearers
7\. Subsequently UE initiates the Session Transfer procedure e.g. by sending a
SIP INVITE (STI) message to the SCC AS. Standard IMS Service Continuity
procedures are applied for execution of the Session Transfer, see TS 23.237
[4]. As part of this procedure the remote end is updated with the SDP of the
IMS access leg. The downlink flow of VoIP packets is switched towards the PDN
GW at this point.
8\. The IMS triggers a network-initiated dedicated bearer activation for the
voice component.
9\. The IMS releases the CS access leg which result in release of resources in
the MSC Server.
##### 6.1.2.6.2 SRVCC handover from UTRAN or GERAN with PS handover support to
E-UTRAN
Depicted in Figure 6.1.2.6.2-1 is a call flow for SRVCC handover from UTRAN or
GERAN with PS handover support to E-UTRAN, including the handling of the non-
voice component. E-UTRAN neighbouring cells have to be configured in
UTRAN/GERAN for the purpose of measurements. The source system is configured
to know that the target MME/TA where the UE is moving support IMS VoIP.
Figure 6.1.2.6.2-1: SRVCC handover from UTRAN or GERAN with PS handover
support to E-UTRAN
1\. Based on UE measurement reports the RNS/BSS decides to trigger a handover
to E-UTRAN.
2\. Source RNS initiates PS relocation. The following steps are performed:
a) Source RNS/BSS sends a Relocation Required (Source to Target Transparent
Container) message to source SGSN.
b) Source SGSN sends a Forward Relocation Request message to the target MME
including information about the non-voice component only.
3\. In parallel to the previous step, the source RNS/BSS initiates CS
relocation. The following steps are performed:
a) Source RNS/BSS sends a Relocation Required (Source to Target Transparent
Container) message to the source MSC.
b) Source MSC sends a Prepare HO Request to the MSC Server.
c) The MSC server checks whether the IMS registration of the user on the UE is
still valid or not. In case it is not, it shall reject the handover request,
indicating in the cause value that rSRVCC is not possible any longer. That
should trigger the RAN to cancel the relocation procedure that was started
towards the SGSN and to reconfigure the cells the UE shall measure. In case
the IMS registration is still valid, the MSC Server sends a Forward Relocation
Request (Source to Target Transparent Container) message to the target MME.
4\. Target MME synchronises the two Forward Relocation Request messages and
requests resource allocation for the non-voice component only by exchanging
Handover Request/Acknowledge messages with the target E-UTRAN.
5\. Target MME acknowledges the prepared CS relocation towards the source
access. The following steps are performed:
a) Target MME sends a Forward Relocation Response (Target to Source
Transparent Container) message to the MSC Server.
b) MSC Server sends a Prepare HO Response to the source MSC.
c) Source MSC sends a Relocation Required Acknowledge (Target to Source
Transparent Container) message to source RNS/BSS.
6\. In parallel to the previous step, the target MME acknowledges the prepared
PS relocation towards the source access. The following steps are performed:
a) Target MME sends a Forward Relocation Response (Target to Source
Transparent Container) message to the source SGSN.
b) Source SGSN sends a Relocation Required Acknowledge (Target to Source
Transparent Container) message to the source RNS/BSS.
7\. Source RNS/BSS synchronises the two Relocation Required Acknowledge
messages and sends a HO Command message to the UE instructing it to perform a
handover to E-UTRAN, including the relocation of the voice bearer to the PS
domain.
8\. UE re-tunes to E-UTRAN radio and sends a Handover to E-UTRAN Complete
message to the E-UTRAN.
9\. Target E-UTRAN informs the target MME by sending a Handover Notify
message.
10\. Target MME completes the CS relocation. The following steps are
performed:
a) Target MME sends a Forward Relocation Complete message to the MSC Server.
MSC Server acknowledges the information by sending a Forward Relocation
Complete Acknowledge message to the source MME.
b) MSC Server sends a Handover Complete message to the source MSC.
11\. In parallel to the previous step the target MME completes the PS
relocation. The following steps are performed:
a) Target MME exchanges Forward Relocation Complete / Acknowledge messages
with the source SGSN.
b) Target MME performs the Update bearer procedure with the Serving GW and the
PDN GW. At this point the relocation of all non-voice PS bearers is completed
and the user data are flowing across E-UTRAN access in both directions.
12\. UE performs a TAU procedure if required (e.g. due to UE mobility under CS
coverage).
13\. UE initiates the Session Transfer procedure e.g. by sending a SIP INVITE
(STI) message to the SCC AS. Standard IMS Service Continuity procedures are
applied for execution of the Session Transfer, see TS 23.292 [3] and TS 23.237
[4]. As part of this procedure the remote end is updated with the SDP of the
IMS access leg. The downlink flow of VoIP packets is switched towards the PDN
GW at this point. This step can occur in parallel with step 12.
14\. The IMS triggers a network-initiated dedicated bearer for the voice
component.
15\. The IMS releases the CS access leg which result in release of resources
in the MSC Server.
#### 6.1.2.7 Call flows for SRVCC from UTRAN/GERAN to HSPA
##### 6.1.2.7.1 SRVCC handover from GERAN without DTM support to HSPA
Figure 6.1.2.7.1-1: SRVCC handover from GERAN without DTM support to HSPA
At the beginning of the call flow all PS bearers are suspended. The source
system is configured to know that the target MME/TA where the UE is moving
support IMS VoIP.
1\. The UE reports that a UTRAN has now good quality by sending a Measurement
Report to the BSS. Based on that input, the BSS decides to trigger SRVCC to
UTRAN/HSPA.
2\. Source BSS sends a Handover Required (Source to Target Transparent
Container) message to the source MSC.
3\. Source MSC executes the inter-MSC handover procedure by exchanging Prepare
HO Request/ Response messages with the MSC Server. The MSC server checks
whether the IMS registration of the user on the UE is still valid or not. In
case it is not, it shall reject the handover request, indicating in the cause
value that rSRVCC is not possible any longer. That should trigger the RAN to
reconfigure the cells the UE shall measure. In case the IMS registration is
still valid, the MSC Server signals successful CS handover without allocating
any E-UTRAN resources.
4\. Source MSC sends a Handover Required Acknowledge message to the source
BSS.
5\. Source BSS sends a Handover Command to the UE. The Handover Command
includes an indication that this is a CS to PS handover.
6\. UE re-tunes to UTRAN radio and performs a RAU procedure to resume the
suspended SIP signalling bearer and any other suspended non-voice bearers.
7\. Subsequently UE initiates the Session Transfer procedure e.g. by sending a
SIP INVITE (STI) message to the SCC AS. Standard IMS Service Continuity
procedures are applied for execution of the Session Transfer, see TS 23.292
[3] and TS 23.237 [4]. As part of this procedure the remote end is updated
with the SDP of the IMS access leg. The downlink flow of VoIP packets is
switched towards the PDN GW at this point.
8\. The IMS triggers network-initiated dedicated bearer activation for the
voice component.
9\. The IMS releases the CS access leg which result in release of resources in
the MSC Server.
##### 6.1.2.7.2 SRVCC handover from UTRAN or GERAN with PS handover support to
HSPA
Depicted in Figure 6.1.2.3.2-1 is a call flow for SRVCC handover from UTRAN or
GERAN with PS handover support to HSPA, including the handling of the non-
voice component. The source system is configured to know that the target
MME/TA where the UE is moving support IMS VoIP.
Figure 6.1.2.7.2-1: SRVCC handover from UTRAN or GERAN with PS handover
support to HSPA
1\. Based on UE measurement reports the RNS decides to trigger a handover to
UTRAN/HSPA.
2\. Source RNS initiates PS relocation. The following steps are performed:
a) Source RNS sends a Relocation Required (Source to Target Transparent
Container) message to source SGSN.
b) Source SGSN sends a Forward Relocation Request message to the target SGSN
including information about the non-voice component only.
3\. In parallel to the previous step, the source RNS initiates CS relocation.
The following steps are performed:
a) Source RNS sends a Relocation Required (Source to Target Transparent
Container) message to the source MSC.
b) Source MSC sends a Prepare HO Request to the MSC Server.
c) The MSC server checks whether the IMS registration of the user on the UE is
still valid or not. In case it is not, it shall reject the handover request,
indicating in the cause value that rSRVCC is not possible any longer. That
should trigger the RAN to cancel the relocation procedure that was started
towards the SGSN and to reconfigure the cells the UE shall measure. In case
the IMS registration is still valid, the MSC Server sends a Forward Relocation
Request (Source to Target Transparent Container) message to the target SGSN.
4\. Target SGSN synchronises the two Forward Relocation Request messages and
requests resource allocation for the non-voice component only by exchanging
Handover Request/Acknowledge messages with the target E-UTRAN.
5\. Target SGSN acknowledges the prepared CS relocation towards the source
access. The following steps are performed:
a) Target SGSN sends a Forward Relocation Response (Target to Source
Transparent Container) message to the MSC Server.
b) MSC Server sends a Prepare HO Response to the source MSC.
c) Source MSC sends a Relocation Required Acknowledge (Target to Source
Transparent Container) message to source RNS.
6\. In parallel to the previous step, the target SGSN acknowledges the
prepared PS relocation towards the source access. The following steps are
performed:
a) Target SGSN sends a Forward Relocation Response (Target to Source
Transparent Container) message to the source SGSN.
b) Source SGSN sends a Relocation Required Acknowledge (Target to Source
Transparent Container) message to the source RNS.
7\. Source RNS synchronises the two Relocation Required Acknowledge messages
and sends a HO Command message to the UE instructing it to move to UTRAN/HSPA
for VoIMS.
8\. Handover Detection at the target RNS. The UE sends an RRC message
indicating the successful handover of the PS bearers to UTRAN/HSPA.
9\. The Target RNS sends a Relocation Complete message to the Target SGSN.
10\. Target SGSN completes the CS relocation. The following steps are
performed:
a) Target SGSN sends a Forward Relocation Complete message to the MSC Server.
MSC Server acknowledges the information by sending a Forward Relocation
Complete Acknowledge message to the source SGSN.
b) MSC Server sends a Handover Complete message to the source MSC.
11\. In parallel to the previous step the target SGSN completes the PS
relocation. The following steps are performed:
a) Target SGSN exchanges Forward Relocation Complete / Acknowledge messages
with the source SGSN.
b) Target SGSN performs the Update bearer procedure with the Serving GW and
the PDN GW. At this point the relocation of all non-voice PS bearers is
completed and the user data are flowing across UTRAN access in both
directions.
12\. UE performs a RAU procedure if required (e.g. due to UE mobility under CS
coverage).
13\. UE initiates the Session Transfer procedure e.g. by sending a SIP INVITE
(STI) message to the SCC AS. Standard IMS Service Continuity procedures are
applied for execution of the Session Transfer, see TS 23.292 [3] and TS 23.237
[4]. As part of this procedure the remote end is updated with the SDP of the
IMS access leg. The downlink flow of VoIP packets is switched towards the PDN
GW at this point. This step can occur in parallel with step 12.
14\. The IMS triggers a network-initiated dedicated bearer for the voice
component.
15\. The IMS releases the CS access leg which result in release of resources
in the MSC Server.
## 6.2 Solution 2: Session transfer initiated on E-UTRAN/HSPA
### 6.2.0 General
This solution reuses the proposal from Solution 1 with simplification to CS HO
procedure.
### 6.2.1 Functional Description
A prerequisite for calls to be possible to handover from UTRAN/GERAN to
E-UTRAN/HSPA is that they have been anchored in IMS at the time of their
establishment. For calls established on the UTRAN/GERAN side with no Voice
over IMS support, that implies some ICS capabilities in the network or in the
UE.
Editor\'s Note: The functional description of the MSC enhanced for rSRVCC and
of the UE enhanced for rSRVCC need to be added to this section.
### 6.2.2 Information flows
#### 6.2.2.1 GERAN/UTRAN Attach procedure
The UTRAN/GERAN Attach procedure for an SRVCC from UTRAN/GERAN to E-UTRAN
capable UE is performed as defined in TS 23.060 [6] with the following
additions:
1) The UE indicates to the network its capability to perform SRVCC from
UTRAN/GERAN to E-UTRAN as follows:
a) In case of a network of Network Mode of Operation type I:
\- The \"rSRVCC capability indication\" is sent by the UE in the Attach
Request message sent to the SGSN at combined GPRS/IMSI Attach, and in the
Routing Area Update Request message at combined RA/LA Update.
\- If received by the SGSN, the \"rSRVCC capability indication\" is
transmitted by the SGSN to the MSC in the Location Updating Procedure.
b) In case of a network of Network Mode of Operation types II or III:
\- The \"rSRVCC capability indication\" is sent by the UE in the Location
Updating Request it sends to the network.
2) If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication in the Insert Subscriber Data sent
to the MSC at Attach or at Location Area Update.
Editor\'s Note: Whether a new \"rSRVCC allowed\" indication is required
remains to be confirmed. If the information elements already defined for SRVCC
are enough the parts related to that indication in this chapter and in the
following ones need to be revisited.
#### 6.2.2.2 E-UTRAN attach procedure
The E-UTRAN attach procedure for 3GPP rSRVCC UE is performed as defined in TS
23.216 [7] with the following additions:
1) rSRVCC UE includes the \"rSRVCC capability indication\" as part of the \"MS
Network Capability\" in the Attach Request message and in Tracking Area
Updates.
2) If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication as part of the subscription data
sent to the MME.
#### 6.2.2.3 Call establishment procedure in GERAN/UTRAN
In case the MSC server enhanced for rSRVCC determines that rSRVCC is allowed
for a given call, it shall include an \"rSRVCC possible indication\" to the
RNS/BSS at call set up to/from an rSRVCC capable UE in:
1) The RAB Assignment Message sent over the Iu-CS interface for a network in
Iu mode.
2) The Assignment Request sent over the A interface for a network in A/Gb
mode.
The setting of the \"rSRVCC possible indication\" by the MSC shall at least
take into account the following elements:
1) rSRVCC capability of the UE
The \"rSRVCC capability indication\" is received from the GERAN/UTRAN to
E-UTRAN SRVCC capable UE at Attach or Location Area Update, see clause
6.1.2.1.
2) Authorization of the user for rSRVCC
The \"rSRVCC allowed\" information is received from the GERAN/UTRAN to E-UTRAN
SRVCC capable UE at Attach or Location Area Update, see clause 6.1.2.1.
3) Prior anchoring of a voice call in the SCC AS
At call establishment, the rSRVCC capable MSC server shall consider the call
as anchored in the SCC AS in the two following cases:
a) The voice calls was initiated by the UE on UTRAN/GERAN using CS domain
procedures and the MSC has itself anchored using ICS procedures (which can
only be the case if the MSC is enhanced for ICS).
b) The voice call was initiated on GERAN/UTRAN by a UE enhanced for ICS, using
the Gm or the I1 interface for service control purposes.
To enable the MSC enhanced for rSRVCC to distinguish such calls, rSRVCC
capable UEs which are also ICS capable (as defined in TS 23.292 [3]) shall
include an \"IMS anchoring performed\" indicator in a CS CALL SETUP message
corresponding to bearer control signalling for a call established using Gm or
I1. The presence of that indicator shall be understood by the MSC enhanced for
rSRVCC as the fact that the UE has anchored the call in IMS using ICS
capabilities.
4) IMS registration status of the UE
Editor\'s Note: The IMS registration of the UE is implicitly signalled by the
ICS UE enhanced for rSRVCC through the \"IMS anchoring performed\" indication
included in the CS call setup message. How the MSC enhanced for ICS gets the
IMS registration status of the UE is FFS.
Editor\'s Note: How to handle IMS registration expiration during a call is
FFS.
Additionally, operator policies or local policies could be used for the MSC
enhanced for rSRVCC in setting the \"rSRVCC possible indication\" sent towards
the RNS/BSS at call establishment.
The BSS/RNS shall use that indication to decide for which cells the UE shall
report measurements, as a basis for triggering a SRVCC handover from
GERAN/UTRAN to E-UTRAN/HSPA.
#### 6.2.2.4 SRVCC from E-UTRAN/HSPA to GERAN/UTRAN
The procedures defined in clauses 6.2 and 6.3 of TS 23.216 [7] apply with the
following additions:
If received from the UE and the HSS respectively, the MME/SGSN shall include
the \"rSRVCC capability indication\" as well as the \"rSRVCC allowed\" in the
SRVCC PS to CS Request it sends to the target MSC (via the MSC enhanced for
SRVCC).
In case the MSC server enhanced for rSRVCC determines that rSRVCC is allowed
for a given call, it shall include an \"rSRVCC possible indication\" to the
RNS/BSS in the Handover Request/Iu Relocation Request it sends towards the
BSS/RNS.
#### 6.2.2.5 Handover procedure in GERAN/UTRAN
If the CS domain call is subject to radio-level handover (e.g. intra-RAT,
inter-RAT, intra-MSC, inter-MSC, etc) while remaining in the CS domain, the
\"rSRVCC possible indication\" needs to be forwarded to the target radio
access (RNS/BSS) provided that it still applies.
Editor\'s Note: The way this information is conveyed needs to be further
detailed.
#### 6.2.2.6 Call flows for SRVCC from UTRAN/GERAN to E-UTRAN
##### 6.2.2.6.1 SRVCC handover from GERAN without DTM support to E-UTRAN
Depicted in Figure 6.2.2.2.1-1 is a call flow for SRVCC handover from GERAN
without DTM support to E-UTRAN.
Figure 6.2.2.6.1-1: SRVCC handover from GERAN without DTM support to E-UTRAN
At the beginning of the call flow the UE is IMS registered and all PS bearers
are suspended. The source system is configured to know that the target MME/TA
where the UE is moving support IMS VoIP.
1\. Based on UE measurement reports the source BSS decides to move this UE to
E-UTRAN.
Editor\'s Note: How BSS determine this UE can be redirected to E-UTRAN is FFS!
2\. Source BSS triggers RRC connection release with redirection to E-UTRAN for
rSRVCC
3-4. UE re-tunes to E-UTRAN radio and performs a TAU procedure as specified in
TS 23.401 [5]. UE uses the Active flag in the TAU Request to MME to resume the
suspended SIP signalling bearer and any other suspended non-voice bearers. The
MME requests the context from the source SGSN. The MME will inform S-GW and
PDN-GW(s) to resume the suspended bearers
5\. Subsequently UE initiates the Session Transfer procedure e.g. by sending a
SIP INVITE (STI) message to the SCC AS. Standard IMS Service Continuity
procedures are applied for execution of the Session Transfer, see TS 23.237
[4]. As part of this procedure the remote end is updated with the SDP of the
IMS access leg. The downlink flow of VoIP packets is switched towards the PDN
GW at this point.
6\. The IMS triggers a network-initiated dedicated bearer activation for the
voice component.
7\. The IMS releases the CS access leg which result in release of resources in
the MSC Server.
##### 6.2.2.6.2 SRVCC handover from UTRAN or GERAN with PS handover support to
E-UTRAN
Depicted in Figure 6.2.2.2.2-1 is a call flow for SRVCC handover from UTRAN or
GERAN with PS handover support to E-UTRAN, including the handling of the non-
voice component. E-UTRAN neighbouring cells have to be configured in
UTRAN/GERAN for the purpose of measurements. The source system is configured
to know that the target MME/TA where the UE is moving support IMS VoIP.
Figure 6.2.2.6.2-1: SRVCC handover from UTRAN or GERAN with PS handover
support to E-UTRAN
Editor\'s Note: How to ensure the voice bearer switching only occur after the
UE has gone to the target side is FFS.
1a. Based on UE measurement reports the RNS/BSS decides to trigger a SRVCC and
PS handover to E-UTRAN.
1b. Since PS bearer is active; BSS/RNS sends an indication to UE to start
session transfer procedure.
1c. UE starts the session transfer procedure with STI to IMS
2\. Source RNS initiates PS relocation. The following steps are performed:
a) Source RNS/BSS sends a Relocation Required (Source to Target Transparent
Container) message to source SGSN.
b) Source SGSN sends a Forward Relocation Request message to the target MME
including information about the non-voice component only.
3\. Target MME handles the Forward Relocation Request messages and requests
resource allocation for the non-voice component only by exchanging Handover
Request/Acknowledge messages with the target E-UTRAN.
4\. The target MME acknowledges the prepared PS relocation towards the source
access. The following steps are performed:
a) Target MME sends a Forward Relocation Response (Target to Source
Transparent Container) message to the source SGSN.
b) Source SGSN sends a Relocation Required Acknowledge (Target to Source
Transparent Container) message to the source RNS/BSS.
5\. Source RNS/BSS receives the Relocation Required Acknowledge message for
the PS HO and sends a HO Command message to the UE instructing it to perform a
handover to E-UTRAN.
6\. UE re-tunes to E-UTRAN radio and sends a Handover to E-UTRAN Complete
message to the E-UTRAN.
7\. Target E-UTRAN informs the target MME by sending a Handover Notify
message.
8\. The target MME completes the PS relocation. The following steps are
performed:
a) Target MME exchanges Forward Relocation Complete / Acknowledge messages
with the source SGSN.
b) Target MME performs the Update bearer procedure with the Serving GW and the
PDN GW. At this point the relocation of all non-voice PS bearers is completed
and the user data are flowing across E-UTRAN access in both directions.
9\. UE performs a TAU procedure if required (e.g. due to UE mobility under CS
coverage).
10\. UE continues the Session Transfer procedure which was started at the
source side with SCC AS. As part of this procedure the remote end is updated
with the SDP of the IMS access leg. The downlink flow of VoIP packets is
switched towards the PDN GW at this point. This step can occur in parallel
with step 9.
11\. The IMS triggers a network-initiated dedicated bearer for the voice
component.
12\. The IMS releases the CS access leg which result in release of resources
in the MSC Server.
## 6.3 Solution 3+5: Media anchoring in serving network with Access Transfer
Control Functionality
### 6.3.1 Architecture Reference Model
The architecture is in accordance to SRVCC using ATCF enhancements as
specified in TS 23.237 [4]. The source MSC Server is assumed to be enhanced
for rSRVCC.
Figure 6.3.1-1 provides a further clarification of the reference architecture
for rSRVCC. The figure only depicts the specific reference points for reverse
SRVCC.
Figure 6.3.1-1: Reference Architecture for reverse SRVCC.
NOTE 1: MSC Server and SGSN/MME shown in the figure are enhanced for reverse
SRVCC. Whether SGSN, or MME, or both are enhanced depends on sub-alternatives.
Depending on the alternative chosen for the access transfer preparation, some
of the elements shown in the figure might not be impacted, see clause 6.3.2.
No matter which alternative is chosen for the access transfer preparation, the
solution proposed here does not require all MSCs in the operator's network to
be upgraded for rSRVCC. Only the ones controlling location areas close to
E-UTRAN/HSPA tracking / routing areas with VoIMS support would need to be
upgraded.
NOTE 2: CS calls started in location areas that are controlled by an MSC not
supporting rSRVCC can not be transferred to E-UTRAN.
For access transfer preparation alternatives 1 and 2, only the source SGSNs
covering cells close to E-UTRAN/HSPA cells with VoIMS support would need to be
upgraded.
For access transfer preparation alternative 3, all source SGSNs in the
operator's network would need to be upgraded.
### 6.3.2 Functional Entities
#### 6.3.2.1 ATCF
The ATCF shall be based on the functionality specified in TS 23.237 [4], with
the following enhancements:
\- At registration from MSC Server enhanced for rSRVCC, the ATCF includes
itself to the path for future session establishments over CS and correlates
the registration with the related PS registration.
\- Make media anchoring decision with additional criteria of UE\'s reverse
SRVCC capability for session setups initiated from/destined to the MSC Server
enhanced for rSRVCC;
\- Correlate the Session Transfer procedures initiated by the UE and the MSC
Server enhanced for rSRVCC.
\- If media anchoring has been made at session establishment, perform the
Access Transfer and update the ATGW with the new media path for the new (PS)
access leg, without requiring updating the remote leg;
\- If media anchoring has not been made at session establishment,
\- Optionally anchor the call in the ATGW as part of the rSRVCC procedure by
establishing the new media path between MGW and ATGW for the new (PS) access
leg,
\- And updating the remote leg once the UE is on the target access and
performs the service continuity procedure;
Editor's Note 2: If the call (voice media) is not anchored in the ATGW,
executing the remote leg update procedure following rSRVCC handover is
required, and whether or not the performance of rSRVCC will then be acceptable
is FFS.
#### 6.3.2.2 SCC AS
The SCC AS shall be based on the functionality specified in TS 23.237 [4],
with the following enhancements:
\- If indicated from the MSC Server enhanced for rSRVCC, the SCC AS shall
notify the MSC Server enhanced for rSRVCC of the STN-SR of the ATCF when
changes to this occur (i.e., during an initial IMS registration from the UE
over PS access).
#### 6.3.2.3 P-CSCF
\- If access transfer preparation alternatives 1 and 3: The P-CSCF may
interact with PCRF for the preparation of the Access Transfer if informed by
the ATCF.
#### 6.3.2.4 MSC Server enhanced for reverse SRVCC
The MSC Server enhanced for reverse SRVCC shall be based on the functionality
specified in TS 23.216 [7], TS 23.292 [3], and TS 23.237 [4], with the
following enhancements:
\- If an ATCF was allocated at IMS registration from the UE and decided to
remain in the session paths:
\- Discover the ATCF address if not already available.
\- Using the ATCF as outgoing proxy when performing IMS registration.
\- If access transfer preparation alternative 1: Initiate the session transfer
procedure from CS to IMS;
\- Initiating the CS to PS handover procedure for handover of the voice
component to the target cell via the Sv interface.
It is assumed the MSC Server supports the I2 reference point, and is capable
of registering on behalf of the user to the IMS as specified in TS 23.292 [3].
#### 6.3.2.5 SGSN enhanced for rSRVCC
The source SGSN shall:
\- If access transfer preparation alternatives 1 and 2: Handle the Relocation
Preparation procedure requested from MSC Server enhanced for rSRVCC via Sv
reference point;
\- If access transfer preparation alternative 2: Perform the bearer
reservation procedure for voice media in target access;
\- If access transfer preparation alternative 3: Establish voice bearer
without allocating radio resources for it;
\- If access transfer preparation alternatives 1 and 2: Coordinating PS
handover and CS to PS handover procedures when both procedures are performed.
#### 6.3.2.6 UE enhanced for rSRVCC
The rSRVCC UE shall:
\- Indicate to the access network and IMS that the UE is rSRVCC capable.
\- Pre-allocate ports to be used for voice after an rSRVCC handover and inform
the network about them OR use pre-defined ports after such a handover
\- Inform the network about supported Codecs that could be used for voice
after rSRVCC handover OR use a pre-defined codec for voice after such a
handover.
\- If access transfer preparation alternatives 1 and 2: receive information
about the voice bearer as part of the handover procedure and start using it as
soon as going over to the target access.
\- If access transfer preparation alternative 3: Trigger the establishment of
a voice bearer to be used after rSRVCC handover after performing IMS
registration.
\- Re-establish the session control of the media after handover to the target
access.
#### 6.3.2.7 HSS
The HSS shall be based on the functionality specified in TS 23.237 [4], with
the following enhancements:
\- Include a rSRVCC allowed indication as part of the subscriber data.
#### 6.3.2.8 MME/SGSN enhanced for rSRVCC
\- If handover preparation alternative 4: Handle the Relocation Preparation
procedure requested from MSC Server enhanced for rSRVCC via Sv reference
point;
\- If handover preparation alternative 4: Retrieve PDP context related
information from the source SGSN if PS-PS handover is not performed at the
same time as a rSRVCC handover.
\- If handover preparation alternative 4: Perform the bearer reservation
procedure for voice media in target access;
### 6.3.3 Message Flows
#### 6.3.3.1 General principles
This solution has the following characteristics:
\- It is assumed the MSC Server is enhanced for ICS and has an I2 interface to
be able to register on behalf of the UE.
\- The source RAN is capable of including E-UTRAN cells with VoIP capability
into the neighbour cell list.
\- The architecture reuses the eSRVCC architecture, i.e. SRVCC with ATCF
enhancements.
\- It is assumed that the MSC Server obtains the address of the ATCF prior
registration through the ATCF.
\- rSRVCC will be used for a UE if the UE is rSRVCC capable, the rSRVCC
allowed indication was part of the subscriber data received from HSS, and the
UE is IMS registered.
\- When registering to IMS on behalf of the UE, the MSC Server will register
through the ATCF if rSRVCC can be used for the UE (i.e., UE is rSRVCC capable
and the subscriber has the rSRVCC allowed indication set) and if an ATCF was
allocated and decided to remain in the session paths of the UE when it
registered over IMS.
\- If rSRVCC can be used for the UE, originating and terminating calls
established over CS are routed through the ATCF as per existing IMS procedures
if an ATCF was involved at registration time. The ATCF then decides whether to
anchor the media or not in the ATGW.
\- At a high level, the rSRVCC handover procedure is based on the following
steps:
1) The PS bearer for the active voice session is established in the PS core
network before sending the UE to the target access.
2) The media plane for the active voice call is switched to the target access
while the UE is instructed to move to the target access, so the UE is able to
receive/transmit voice as soon as it has tuned to the target access.
3) The control plane and the media for the held calls are switched by the UE
after tuning to the target access.
A prerequisite for the flows is that the user is registered in IMS and has at
least one PS bearer (used for SIP signalling).
#### 6.3.3.2 GERAN/UTRAN Attach procedure
The UTRAN/GERAN Attach procedure for an rSRVCC capable UE is performed as
defined in TS 23.060 [6] with the following additions:
\- The UE indicates to the network its capability to perform rSRVCC as
follows:
\- In case of a network of Network Mode of Operation type I:
\- The \"rSRVCC capability indication\" is sent by the UE in the Attach
Request message to the SGSN at combined GPRS/IMSI Attach, and in the Routing
Area Update Request message at combined RA/LA Update.
\- If received by the SGSN, the \"rSRVCC capability indication\" is sent to
the MSC in the Location Updating Procedure.
\- In case of a network of Network Mode of Operation types II or III:
\- The \"rSRVCC capability indication\" is sent by the UE in the Attach
Request message sent to the MSC.
\- If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication in the Insert Subscriber Data sent
to the MSC Server.
#### 6.3.3.3 E-UTRAN attach procedure
The E-UTRAN attach procedure for 3GPP rSRVCC UE is performed as defined in TS
23.216 [7] with the following addition:
\- rSRVCC UE includes the \"rSRVCC capability indication\" as part of the \"MS
Network Capability\" in the Attach Request message and in Tracking Area
Updates.
\- If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication as part of the subscription data
sent to the MME.
#### 6.3.3.3a Informing the source RAN about the possibility to perform rSRVCC
The MSC Server determines the possibility of performing rSRVCC based on:
\- The rSRVCC capability of the UE.
\- The presence of the rSRVCC allowed indication in the subscription data of
the user.
\- The IMS registration status of the UE (i.e., if the MSC Server has
registered through the ATCF).
\- For access transfer preparation alternatives 1 and 2: the rSRVCC capability
of the SGSN the UE is currently registered.
The MSC Server informs the RAN about the possibility to perform rSRVCC by
sending an \"rSRVCC operation possible\" to the RNC/BSC:
\- in the case of the Iu-CS interface: the Common ID message when the Iu
Connection is setup between the MSC Server and the RNC/BSC at Attach Request,
Location Area Update, at SRNS relocation, at inter-RAT handover from GERAN,
\- in the case of the A interface: in the appropriate message(s) to be defined
at stage 3 at attach request, location area update, at intra and inter-MSC
handover, at inter-RAT handover from UTRAN.
In case of inter-MSC handover, the rSRVCC operation possible indication shall
be conveyed in the prepare HO required message sent from the anchor MSC to the
target MSC.
The RAN shall use that information for deciding the cells for which the UE
shall report measurements that lead to handover request to the core network.
#### 6.3.3.4 Codec and transport address related procedure
##### 6.3.3.4.1 General
For rSRVCC to work, the network needs to know the following information about
the UE:
\- the IP address and port number used by the UE for receiving voice media on
PS access,
\- identifier of the new SGSN / old MME.
The UE needs to reserve a port for rSRVCC. The UE needs to know the IP
address, port number and codec for sending media to the ATGW (in case of media
anchoring) or the remote end (in case no media anchoring took place).
NOTE: Depending on the alternative for access transfer preparation, different
network elements that need to have that information: the ATCF (alternative 1),
the MSC (alternative 2), the source SGSN / old MME (alternative 3), and the
target MME (alternative 4).
##### 6.3.3.4.2 Information in IMS registration and handover procedure
For access transfer preparation alternatives 1 and 2: The IP address of the UE
is assigned by the network. When registering in the IMS, the UE can indicate
its IP address, port and default codec (or list of supported codecs) it will
receive media on when a transfer is performed. The MSC Server or ATCF can
learn this information and if needed the address of the P-CSCF from the IMS
(e.g. during IMS registration or using an event package).
For access transfer preparation alternative 3 and 4: the codec, IP address and
ports are sent from the UE to the network in the post registration IMS
signaling used to pre-establish a PS voice bearer.
#### 6.3.3.5 Establish a session over CS
##### 6.3.3.5.1 STN-SR allocated by the ATCF and Transfer Info sent to ATCF
When the UE performs IMS registration, the request is routed through the ATCF,
since it is assumed that that ATCF is co-located with a node processing the
IMS registration in the serving network, roaming if not home. The ATCF may
decide to be involved in the session establishments made over IMS or not at
that point, as described in TS 23.216 [7]. In case it does, and if the MSC
Server (according to TS 23.292 [3], clause 7.2.1) registered the user in the
IMS based on the CS attach before the UE has performed IMS registration, the
MSC Server will not have the address of the ATCF when the IMS registration is
performed. Therefore it is proposed to proceed as follows:
1) The MSC Server performs IMS Registration according to TS 23.292 [3], clause
7.2.1 and indicates to the SCC AS that it wishes to be informed about STN-SR
allocated by the ATCF in case of user registration over PS.
2) The UE performs IMS registration via Gm. ATCF is allocated and SCC AS is
informed if the ATCF wishes to remain in the path of future session
establishments (which is the case assumed in the following steps).
3) The SCC AS, when receiving 3rd party registration from the UE including
dynamically allocated STN-SR from the ATCF and having received the indication
of interest in the STN-SR by the MSC Server informs MSC Server about allocated
ATCF. In the case of access transfer preparation alternative #2, the SCC AS
also indicates to the MSC the IP address of the UE, the ports allocated by it,
and the codecs it supports.
4) When receiving a new STN-SR from the SCC AS, the MSC Server performs re-
registration towards the allocated ATCF (see clause 6.3.3.5.2).
If the ATCF involves in the session made over IMS, the procedure of SCC AS
providing C-MSISDN and ATU-STI to ATCF as specified in clause 6.3.1.7 of TS
23.237 [4] shall be applied.
The dynamic STI-rSR shall be provided to the UE from the ATCF. It is left for
stage 3 to decide on appropriate mean to provide the dynamic STI-rSR to the
UE.
##### 6.3.3.5.2 Registration when ATCF involved
The CS registration is done according to TS 23.292 [3] clause 7.2.1, with the
difference that the registration is routed through the ATCF.
The scenario where the ATCF is involved in the registration path, and decides
to include itself for the duration of the registration is shown in figure
6.3.3.5.2-1 below.
Figure 6.3.3.5.2-1: Registration from CS through ATCF
1\. The MSC Server decides to register the UE through CS according to TS
23.292 [3].
2\. If rSRVCC can be used for the UE and if an ATCF has decided to remain in
the path of session establishments when the UE registered over IMS, the MSC
Server sends the REGISTER to the IMS through the ATCF (using the STN-SR that
identifies the ATCF).
3\. The ATCF detects that the Register is received from the MSC Server and
decides to include itself for the session by adding itself in the route path.
4\. The Register is forwarded towards the registrar according to TS 23.292
[3].
5\. The registration process is completed.
When the ATCF involves in the session made over IMS, the procedure of SCC AS
providing C-MSISDN and ATU-STI to ATCF as specified in clause 6.3.1.7 of TS
23.237 [4] shall be applied also for the MSC Server registration.
##### 6.3.3.5.3 Origination procedures when ATCF involved
The CS origination is done according to TS 23.292 [3], clause 7.3, with the
difference that the call is routed through the ATCF (that was added to the
call path during registration according to clause 6.3.3.5.2).
NOTE: The call may also have been transferred to CS by an SRVCC PS to CS
access transfer procedure.
The scenario where the ATCF is involved in the call set up, and decides to
anchor the media in the ATGW is shown in figure 6.3.3.5.3-1 below.
Once the session is established, the ATCF will act as the access transfer
function in the call.
Figure 6.3.3.5.3-1: Originating call setup over CS through ATCF
1\. The MSC Server receives the CS setup message.
2\. The MSC Server initiates an INVITE origination according to TS 23.292 [3]
clause 7.3. As the ATCF is in the route, the MSC server, forwards the INVITE
to the ATCF.
3\. The ATCF may decide whether to anchor the media session and allocate if
needed ATGW resources to it. Anchoring criteria used could be same as for
eSRVCC (see TS 23.237 [4]).
4-5. The call setup proceeds and is routed to the remote UE-2.
6\. The call setup is completed.
##### 6.3.3.5.4 Termination procedures when ATCF involved
The CS termination is done according to TS 23.292 [3] clause 7.4, with the
difference that the call is routed through the ATCF (that was added to the
call path during registration according to clause 6.3.3.5.2).
NOTE: The call may also have ended up in CS by an SRVCC PS to CS access
transfer procedure.
The scenario where the ATCF is involved in the call set up, and decides to
anchor the media in the ATGW is shown in figure 6.3.3.5.4-1 below.
Once the session is established, the ATCF will act as the access transfer
function in the call.
Figure 6.3.3.5.4-1: Terminating call setup over CS through ATCF
1-2. UE-2 sends an INVITE towards UE-2. The call is routed towards UE-1 via
ATCF as the ATCF was added in the route during registration.
3\. The ATCF may decide whether to anchor the media session and allocate if
needed ATGW resources to it. Anchoring criteria used could be same as for
eSRVCC (see TS 23.237 [4]).
4-5. The call setup proceeds and is routed toward UE-1 according to TS 23.292
[3].
6\. The call setup is completed.
#### 6.3.3.6 CS -- PS Access Transfer Overview
##### 6.3.3.6.1 Anchored in ATGW
This clause describes the main steps of the rSRVCC procedure when using ATCF
enhancements.
The following flow assumes that the UE has indicated to both MSC and SGSN that
it is rSRVCC capable.
Figure 6.3.3.6.1-1: CS-PS Access Transfer -- with media anchored in ATGW
The media paths shown in the figure assume that the media has been anchored in
the ATGW at call set up.
1\. The MSC Server receives the trigger to initiate the access transfer.
**2\. Access Transfer preparation: This step is further detailed below in
clause 6.3.3.7.**
**3\. UE tunes to target radio access. UE sends and receives voice media over
PS.**
4\. The access transfer is completed by moving the session control to the PS
access leg. **This step is further detailed below in clause 6.3.3.8.**
NOTE: After step 4, the media path is between the UE via EPC to the ATGW.
##### 6.3.3.6.2 Not Anchored in ATGW
Figure 6.3.3.6.2-1: CS-PS Access Transfer --without media anchored in ATGW
The media paths shown in the figure assume that the media has not been
anchored in the ATGW at call set up.
1\. The MSC Server receives the trigger to initiate the access transfer.
**2\. Access Transfer preparation: This step is further detailed below in
clause 6.3.3.7.**
**3\. UE tunes to target radio access. UE sends and receives voice media over
PS.**
4\. The access transfer is completed by moving the session control to the PS
access leg. **This step is further detailed below in clause 6.3.3.8.**
#### 6.3.3.7 Access Transfer Preparation
##### 6.3.3.7.1 Access Transfer Preparation Alternative 1
The more detailed procedures of the Access Transfer Preparation step are shown
in the following figure. In this alternative, the source MSC Server together
with the ATCF interacts with the P-CSCF to initiate the voice bearer setup.
The address of the P-CSCF is known to the ATCF from the IMS registration of
the UE, and the ATCF address is known to the MSC Server from the STN-SR. It is
also assumed that PCC is used.
Figure 6.3.3.7.1-1: Access Transfer Preparation Alternative 1
1\. The RNC/BSC sends a HO required to the MSC Server including an indication
this HO is for SRVCC. If the MSC Server is the target MSC, it forwards the HO
required to the anchor MSC Server.
NOTE 1: If the UE is active in PS domain, the RNC/BSC sends also a Relocation
Required message to source SGSN. If the Relocation Required message for PS HO
arrives first and the message indicates CS to PS HO is initiated, the source
SGSN waits for the CS to PS HO request before performing inter-RAT handover
procedure.
2\. The MSC Server sends a SRVCC CS to PS HO command to the Source SGSN / old
MME. The IMSI should be included in the message to allow the source SGSN/MME
to identify UE.
> 3\. The MSC Server sends an Access Transfer Notification to the ATCF, e.g. a
> SIP re-INVITE or INVITE message, which indicates the ATCF that it should
> prepare for the transfer of media to PS.
>
> 4\. The ATCF retrieves the ports/codecs received from the UE in its IMS
> registration (The MSC is able to correlate the IMS registration made by the
> UE and the one made by the MSC on behalf of the UE for instance based on the
> C-MSISDN or on the IMEI derived instance-id used by both those
> registrations). The ATCF allocates media ports on the ATGW, then forwards
> the Transfer Preparation Request to the P-CSCF after including in that
> message the IP address/ports the UE intends to use after rSRVCC, as well as
> the IP address/ports the ATGW is sending voice media to (i.e. the SDP for
> both UE and ATGW will be included in the message).
>
> 5\. The P-CSCF interacts with the PCRF to establish a voice bearer for the
> session being transferred using the information received from the ATCF in
> the Transfer Preparation Request message. The PCC indicates that this bearer
> establishment is due to rSRVCC.
NOTE 2: The Transfer Preparation Request message could e.g., be implemented
using a INVITE or other appropriate message. It is left for stage 3 to decide
on appropriate message.
6\. The PCRF initiates the bearer setup towards P-GW and indicates that this
bearer establishment is due to rSRVCC. Once the bearer setup reaches source
SGSN / old MME, the SGSN / MME associates the new bearer with the HO CS to PS
request that was received previously. The source SGSN / old MME will handle
the bearer setup locally, without requiring a full reservation at the source
side of the voice bearer.
NOTE 3: If ISR is activated and the Serving GW does not have a downlink S1-U,
the Serving GW sends Downlink Data Notification to the MME and the SGSN before
sending the Update Bearer Request message with an indication that this is due
to rSRVCC. The serving PS node that received the CS to PS HO request from the
MSC will then answer to it with a Modify Bearer Request, without paging the
UE. The SGW will answer that message without propagating it to the PGW.
7\. Source SGSN / old MME sends a relocation request to the target SGSN/MME.
8\. Target SGSN/MME allocates resources in UTRAN/E-UTRAN.
9\. A relocation response is returned to the Source SGSN/ old MME.
10\. A SRVCC CS to PS HO response is returned from the Source SGSN/ old MME to
the MSC Server. The SGSN also includes in that message the EPS bearer
information.
11\. MSC Server sends HO required Ack to the RAN, possibly via the target MSC,
and the RAN send HO command to UE, indicating CS to PS handover. The MSC
Server also includes in that message the EPS bearer information as well as the
IP address/ports and selected codec for the ATGW, for the MGW or for the
remote end depending on the situation.
12\. In case of ATCF with media anchored in ATGW, the MSC Server sends an
Access Transfer Preparation Request, e.g. a SIP re-INVITE or PRACK message, to
the ATCF to trigger the ATCF/ATGW to have the media path switched to the IP
address/port of the UE on the target access.
In case of without media anchored in ATGW, MSC Server sends an Access Transfer
Preparation Request to ATCF and the media path between ATCF/ATGW and the MSC
Server/MGW is to be established.
Editor\'s Note 1: The responsibility to release the voice bearer in error
cases during this procedure are FFS.
Editor\'s Note 2: It is FFS how to resume suspended PS bearers after UE tunes
to target access, e.g. UE handover from GERAN not supporting DTM.
##### 6.3.3.7.2 Access Transfer Preparation Alternative 2
The more detailed procedures of the Access Transfer Preparation step are shown
in the following figure. In this alternative, the source SGSN initiates the
voice bearer setup.
Editor\'s Note 1: The role of the target MSC in this solution is FFS.
Figure 6.3.3.7.2-1: Access Transfer Preparation -- Alternative 2
1\. The RNS/BSS decides that an rSRVCC handover should take place. It
therefore sends a Relocation Required (case of the Iu interface), or a
Handover Required (in the case of the A interface) to the MSC. That message
includes an indication that an rSRVCC handover is requested.
2\. The MSC Server forwards the rSRVCC request to the source SGSN or the
source MME according to what it stored as \"serving PS node\" for the UE, in a
CS to PS HO Request. That message includes the transport address provided by
the UE (see also clause 6.3.3.4), as well as the address it is sending voice
media to (e.g. the transport address of the ATGW or of the remote end). It
also includes information related to the pre-agreed codec for voice. In
addition, the IMSI should be also included to allow the source SGSN/MME to
identify UE.
3a. When receiving that message, the SGSN/MME sends a Bearer Resource Command
to the SGW, to trigger the set up the PS voice bearer. The Traffic Aggregate
Description (TAD) includes transport address information for both ends of the
future packet voice access leg i.e. information provided by both UE and MGW.
The requested QoS corresponds to the QoS of a packet voice bearer and may take
into account the codec information.
3b. The SGW forwards the Bearer Resource Command to the PGW.
3c. The PGW interacts with the PCRF in case dynamic PCC is deployed.
3d. The PGW initiates (either based on the response of the PCRF in case of
dynamic PCC, or as its own decision) the creation of the bearer, by sending a
Create Bearer Request to the SGW. The message includes the essential EPS
bearer information i.e. the TFT (compiled from TAD information) and the QoS of
the future EPS bearer supporting packet voice on E-UTRAN side, with the
exception of the EPS Bearer ID/NSAPI, which is assigned later. The message may
also include the IP address assigned to the UE in order to cope with some
cases when the SGSN/MME is not aware of it.
3e. The SGW forwards the Create Bearer Request to the Source SGSN / Source
MME. The message includes the essential EPS bearer information, with the
exception of the EPS Bearer ID/NSAPI, which is assigned later. The message may
also include the IP address assigned to the UE in order to cope with some
cases when the SGSN is not aware of it.
3f. The source SGSN / source MME assigns the EPS Bearer ID/NSAPI for the
future packet voice bearer, and replies with a Create Bearer Response to the
SGW. It does not request the RNS/BSS to allocate any radio resources for that
bearer.
3g. The SGW sends a Create Bearer Response to the PGW, which finalizes the
voice bearer creation.
4\. When step 3f has occurred, the Source SGSN / source MME sends a Forward
Relocation Request to the Target MME/SGSN. The message includes bearer context
for all bearers, including the future packet voice bearer.
5-6. The Target MME/SGSN requests the Target eNodeB/NodeB to allocate
resources for all bearers (including the voice bearer). The Target eNode
B/Node B answers, including the transparent container destined to the UE.
7\. The Target MME/SGSN answers to the Source SGSN / source MME, indicating
that the resources have been allocated in the Target eNodeB/Node B.
8a. The source SGSN / source MME answers to MSC Server in a CS to PS HO
Response indicating the success of the procedure. The essential EPS bearer
information the UE will use for voice after rSRVCC handover and UE\'s IP
address is included in that message.
8b. When receiving that message, in case of ATCF with media anchored in ATGW,
the MSC Server sends an Access Transfer Preparation Request, e.g. a SIP re-
INVITE or INVITE message, to the ATCF to have the media path switched to the
transport address of the UE on the target access. That step could also occur
anytime after step 2.
In case of without media anchored in ATGW, MSC Server sends an Access Transfer
Preparation Request to ATCF and the media path between ATCF / ATGW and the MSC
Server / MGW is to be established.
8c. The MSC Server sends a Relocation Command to the Source RNS/BSS. This
message also includes the EPS bearer information as well as the IP
address/ports and selected codec for the ATGW, for the MGW or for the remote
end depending on the situation.
9\. When receiving the Relocation Command from the MSC Server, the source
BSS/RNS sends a HO Command to the UE. This message also includes the EPS
bearer information as well as the IP address/ports and selected codec for the
ATGW, for the MGW or for the remote end depending on the situation.
10\. The UE retunes to the target access (E-UTRAN/HSPA). The UE sets up
locally a PS voice bearer using the NAS information received from the network
in the HO Command of step 9. As a result of that message, the UE also resumes
the other existing PS bearers in case those were suspended. The UE sends a HO
Complete message to the Target eNB/Node B. It starts sending and receiving
voice using the PS voice bearer.
11\. When receiving that message from the UE, the target eNode B/Node B sends
a Handover Notify to the target MME/SGSN.
12\. The target MME/SGSN performs the bearer modification procedure towards
the SGW/PGW, effectively completing the EPS-level handover procedure. Note
that in case the PS bearers were suspended, they are resumed in the SGW/PGW as
an implicit result of the bearer modification procedure.
##### 6.3.3.7.3 Access Transfer Preparation Alternative 3
The more detailed procedures of the Access Transfer Preparation step are shown
in the following figure. This alternative is based on the Alternative 1, the
difference is the UE and ATCF negotiate the codec by standard SDP offer/answer
procedure prior to the CS call, e.g. immediately after the IMS registration.
At the same time, also the voice media bearer (QCI=1) is reserved from the
source RAT, but the media flow is not activated. For this reason, unlike in
Alternative 1, the transfer preparation for the voice media bearer is not
needed between MSC Server \-- ATCF -- P-CSCF -- PCRF, which makes the transfer
phase less complex and speeds up the procedure. On the downside, this
alternative requires more resources from the VPLMN; besides to the SIP and
media resources from ATCF, also suspended QCI=1 bearer is reserved for all UEs
with rSRVCC capability.
Only the differences to the Alternative 1 are highlighted below.
Figure 6.3.3.7.3-1: Access Transfer Preparation Alternative 3
Editor\'s Note: The role of the target MSC in this solution is FFS.
1\. After the IMS registration or after successful rSRVCC handover, the UE
negotiates the voice codec with the ATCF (via P-CSCF) using the standard SDP
offer / answer procedure. Also the IP address and port number for the RTP
voice media is negotiated at the same time. UE may use e.g. a preconfigured
PSI to send the SDP offer in INVITE to the ATCF. Or alternatively, the UE may
learn the PSI during the IMS registration. A special indicator may be set by
UE or ATCF to indicate that this media reservation is only for the rSRVCC
preparation. Note that only the IP address and port allocated by the local UE
for voice after rSRVCC are used for establishing the pre-establishing the
voice bearer in the network.
NOTE 1: when SRVCC takes place, the source MME/SGSN does not split the
suspended QCI-1 bearer from the other PS bearers, but hands it over together
with the other PS bearers. The non suspended QCI-1 bearers are released as per
the current SRVCC procedures.
2\. P-CSCF reserves the bearer for voice media (QCI=1) using the standard PCC
procedures. A special media authorization rules can be used to authorize the
QCI=1 bearer at PCRF even though the source RAT does not support GBR bearers,
or there is no sufficient bandwidth available. The media flow is not activated
at this point and the QCI=1 bearer is marked as suspended.
3\. CS call is established as described elsewhere in this solution.
When the rSRVCC occurs, the RNC/BSC sends a HO required to the MSC Server
including an indication this HO is for rSRVCC. Since the PS bearers are
suspended, no HO required is send by RAN to the source SGSN.
4\. The MSC Server sends a SRVCC CS to PS HO command to the Source SGSN or the
source MME according to what it stored as \"serving PS node\" for the UE.
5\. Source SGSN / source MME sends a relocation request to the target
SGSN/MME. That message includes an indicator that the pre-established voice
bearer status shall become active.
6\. Target SGSN/MME allocates resources in UTRAN/E-UTRAN.
7\. A relocation response is returned to the Source SGSN / source MME.
8\. A SRVCC CS to PS HO response is returned from the Source SGSN / source MME
to the MSC Server.
9\. MSC sends HO required Ack to the RAN and the RAN send HO command to UE,
indicating CS to PS handover. There is no need to add the coded information to
the HO command, as the codec was negotiated prior to the SRVCC. The HO Command
message includes the EPS bearer information related to the pre-established PS
voice bearer, as well as the transport address of either the ATGW or the
remote end.
10\. In case of ATCF with media anchored in ATGW, the MSC Server sends a re-
INVITE to the ATCF to trigger the ATCF/ATGW to have the media path switched to
the IP address/port of the UE on the target access.
In case of without media anchored in ATGW, MSC Server sends a re-INVITE or
INVITE to ATCF and the media path between ATCF/ATGW and the MSC Server/MGW is
to be established.
11\. ATCF is aware of the voice codec, IP address and port number which were
negotiated with the UE prior to the SRVCC. Depending on the selected voice
codec and the codec used in the ongoing session between ATCF and remote end,
the ATCF/ATGW may begin to perform transcoding.
Editor\'s Note: The responsibility to release the voice bearer in error cases
during this procedure are FFS.
NOTE 2: The MGW can for a certain period of time send media both on the source
access leg and the new target access leg to minimize the interruption delay
further.
12\. The UE sends a Handover Complete message on the target RAN when it has
successfully performed the handover.
13\. The target RAN notifies the target MME/SGSN of the successful handover.
14\. The target MME/SGSN initiates the Modify Bearer procedure, including an
indicator that the suspended voice bearer now needs to be activated.
NOTE 3: when the IMS session continuity procedure takes place, the TFT of the
PS voice bearer will be modified to take into account the transport address
used by the ATGW or by the remote end.
##### 6.3.3.7.4 Access Transfer Preparation Alternative 4
This alternative is similar with the Alternative 3 that UE and ATCF negotiate
the codec, IP address, and port number for the RTP media by standard IMS
session setup procedure prior to rSRVCC, e.g. sending an INVITE request
immediately after the IMS registration. The major difference is that, in this
alternative, MSC Server sends CS to PS handover request to target MME/SGSN
instead of serving PS node.
The SDP offer in the INVITE request indicates to reserve a non-GBR voice media
bearer (e.g. QCI=7) from the source RAT, e.g. by using \"b=AS:0\" line. The
radio resource of the non-GBR voice media bearer will be released by source
RAN in seconds.
After triggered to perform rSRVCC procedure, the MSC Server sends CS to PS
handover request to target MME/SGSN via Sv interface, the target MME/SGSN may
query PDP contexts/connections from source SGSN / old MME before performing
standard PS-PS handover procedure.
The target MME/SGSN shall synchronize PS HO and CS to PS HO based on the IMSI
and the rSRVCC HO indication sent from RNC/BSS to MSC Server/SGSN. The rSRVCC
HO indication shows whether CS to PS HO is triggered or CS+PS to PS HO is
triggered.
After UE tunes to target access network, UE can transfer voice media data
using the non-GBR voice bearer temporarily. After UE complete the IMS Session
Continuity procedure as described in clause 6.3.3.8, UE can transfer voice
media data using new created GBR voice bearer (QCI=1) bearer.
Figure 6.3.3.7.4-1 shows an example of the solution when ATCF is involved in
the IMS registration made by UE:
Figure 6.3.3.7.4-1: Access Transfer Preparation Alternative 4
Following step 1 and 2 are procedures prior to rSRVCC:
1\. After the IMS registration, UE negotiates the voice codec, IP address, and
port number for the RTP voice media with the ATCF (via P-CSCF) using the
standard IMS session setup procedure, e.g. sending an SIP INVITE request. UE
uses STI-rSR to send the SDP offer in a SIP INVITE request to the SCC AS via
the ATCF, and uses \"b=AS:0\" in SDP offer to indicate the bearer reservation
and session setup for rSRVCC. As bandwidth is zero, the ATGW will not handle
the uplink traffic if sent by UE fraudulently. The ATCF forwards it to SCC AS
immediately. When ATCF and SCC AS receives a SDP offer in a SIP INVITE with
valid zero bandwidth voice media, then, if the SIP INVITE is destined to the
STI-rSR, it responses with \"b=AS:0\" in the SDP answer, otherwise reject it.
2\. P-CSCF reserves the bearer for voice media using the standard PCC
procedures. Knowing from the zero bandwidth for voice media, the PCRF reserves
a non-GBR voice media bearer (e.g. QCI=7).
Following steps are procedures for Access Transfer Preparation:
3\. UE sends Measurement Report message.
4\. Source RNC/BSS knows that UE is able to perform rSRVCC as described in
clause 6.3.3.3a, and determines to trigger rSRVCC procedure. The following
steps are performed:
a) If UE is active in PS domain, and UTRAN supports PS HO or GERAN support DTM
HO, source RNC/BSS sends Handover/Relocation Required message with rSRVCC HO
indication to source SGSN. The rSRVCC HO indication can use e.g. new defined
values of \"CS to PS relocation triggered\" and \"CS+PS to PS relocation
triggered\" for Cause IE. The Cause IE is transparent to source SGSN for
Inter-RAT handover.
b) In parallel with step a), source RNC/BSS sends Handover/Relocation Required
(rSRVCC HO) message to anchor MSC Server.
5\. Target MME/SGSN handles handover request from PS domain and CS domain as
follows:
a) Receives the CS to PS handover request (rSRVCC HO, serving PS node info,
IMSI) from MSC Server enhanced for rSRVCC. The \"serving PS node info\" is
obtained according to clause 6.3.3.9.
b) If PS HO is not triggered, sends Context Request to source SGSN / old MME
and receives the response.
c) If PS HO is triggered, wait for receiving the Forward Relocation Request
(rSRVCC HO, IMSI) from source SGSN. The rSRVCC HO is received from source
RNC/BSS and transparently forwarded by the source SGSN.
6\. Target MME/SGSN synchronizes PS handover and CS to PS handover based on
the rSRVCC HO indication and IMSI. The rSRVCC HO also indicates whether PS HO
is triggered or not.
7\. Target MME/SGSN allocates resources from target eNB/RNC.
8\. If resource allocation is done, target MME/SGSN finishes the handover
preparation procedure. The following steps are performed:
a) Target MME/SGSN sends CS to PS handover response to MSC Server enhanced for
rSRVCC. When resource allocation fails, the target MME/SGSN shall send a
reject indication to the MSC Server.
b) In parallel with step a), if PS handover is triggered, target MME/SGSN
sends Forward Relocation Response to source SGSN.
9\. MSC Server enhanced for rSRVCC handles the CS to PS handover response as
follows:
a) Sends Access Transfer Preparation request (C-MSISDN, STN-SR) to the ATCF,
e.g. by using SIP INVITE request. In case of media path anchored in ATGW, if
transcoding is needed, the media path between ATCF/ATGW and the MSC Server/MGW
may be established by ATCF to make the MSC Server/MGW performing transcoding.
The ATCF interacts with ATGW to reserve the resources, have the media path
switched, and start voice data transfer for the session established at step 1.
b) In parallel with step a), sends Handover/Relocation Command to source
RNC/BSS.
10\. If PS HO is triggered, after step 8c, source SGSN sends
Handover/Relocation Command message to source RNC/BSS.
11\. Source RNC/BSS sends Handover from UTRAN/GERAN Command message to UE,
indicating CS to PS handover, e.g. by including RAB info to remove IE that
contains the CS RAB information. There is no need to add the codec and NAS
information (e.g. TFT, EPS bearer ID, etc) to the HO from UTRAN/GERAN Command,
as the codec and NAS information was negotiated prior to the rSRVCC.
NOTE: After UE tunes to E-UTRAN, to minimize the interruption delay, it can
use the non-GBR voice media bearer to continue to transfer voice data until a
GBR voice media bearer (QCI=1) for the session has been created.
12\. UE tunes to LTE/HSPA, and following steps are performed:
a) UE sends Handover complete message to target eNB/RNC, the UE also resumes
the existing PS bearers in case those were suspended.
b) Target eNB/RNC sends Handover Notify message to target MME/SGSN.
c) If PS HO is not triggered, target MME/SGSN sends Context Acknowledge to
source SGSN / old MME. When resource allocation fails or UE fails to camp on
E-UTRAN/HSPA, the target MME/SGSN shall send a reject indication to the source
SGSN / old MME, e.g. by using \"no resource available\" or \"system failure\"
cause value.
d) Target MME/SGSN performs bearer modification procedure towards the SGW/PGW,
effectively completing the EPS-level handover procedure. Note that in case the
PS bearers were suspended, they are resumed in the SGW/PGW as an implicit
result of the bearer modification procedure.
Editor\'s note: It is FFS what if UE fails to establish QCI=1 bearer after
tunes to target access, e.g. due to lack of radio resources.
##### 6.3.3.7.5 Access Transfer Preparation Alternative 5 (the combination)
The more detailed procedures of the Access Transfer Preparation steps are
shown in the following figure.
Figure 6.3.3.7.5-1: Access Transfer Preparation Alternative 5, non-DTM case
1\. The RNC/BSC sends a HO required to the MSC Server including an indication
this HO is for rSRVCC. If the MSC Server is the target MSC, it forwards the HO
required to the anchor MSC Server.
2\. The MSC Server sends a SRVCC CS to PS HO request to the Target MME. If
required, the IMSI is provided for identifying the UE.
3\. The MSC Server sends an Access Transfer Notification to the ATCF, e.g. a
SIP re-INVITE or INVITE message, which indicates the ATCF that it should
prepare for the transfer of media to PS. The ATCF allocates media ports on the
ATGW. The media ports and codecs allocated by the ATCF are provided to the MSC
Server in the response message. This step is independent of step 2.
NOTE 1: The ATCF retrieves the ports/codecs received from the UE in its IMS
registration. The ATCF is able to correlate the IMS registration made by the
UE and the one made by the MSC Server on behalf of the UE for instance based
on the C-MSISDN or on the IMEI derived instance-id used by both those
registrations.
NOTE 2: The Access Transfer Notification message could e.g., be implemented
using an INVITE or other appropriate message. It is left for stage 3 to decide
on appropriate message.
4\. If the MME has no UE context it sends Context Request using P-TMSI and RAI
to find the old SGSN.
5\. The SGSN responses with Context Response message including all UE
contexts.
6\. Target MME allocates resources in E-UTRAN.
7\. A SRVCC CS to PS HO response is returned from the target MME to the MSC
Server.
8\. MSC Server sends HO required Ack to the RAN, possibly via the target MSC,
and the RAN send HO command to UE, indicating CS to PS handover. The MSC
Server also includes in that message the IP address/ports and selected codec
for the ATGW.
9\. In case of ATCF with media anchored in ATGW, the MSC Server sends an
Access Transfer Preparation Request, e.g. a SIP re-INVITE or PRACK message, to
the ATCF to trigger the ATCF/ATGW to have the media path switched to the IP
address/port of the UE on the target access.
In case of ATCF without media anchored in ATGW, MSC Server sends an Access
Transfer Preparation Request to ATCF and the media path between ATCF/ATGW and
the MSC Server/MGW is to be established.
10\. The UEs send Handover confirmation to the eNB.
11\. The eNB send Handover Notify to the MME.
12\. The MME sends Modify Bearer Request to the SGW, which is forwarded to the
PGW to update PS bearer contexts.
13\. The MME sends the Acknowledgment to the Context Response to the SGSN.
14\. The voice media is started directly.
NOTE 3: During a short period of time prior the RAT has been changed and the
new bearer has been established, the media will be sent over the default
bearer.
15\. The UE initiates the session continuity procedures according to clause
6.3.3.8 towards the ATCF.
16\. As a result of the session continuity procedures, the bearer setup is
performed (initiated by the P-CSCF).
17\. The voice media is sent in the dedicated bearer.
Figure 6.3.3.7.5-2: Access Transfer Preparation Alternative 5, DTM case
1\. The RNC/BSC sends a HO required to the MSC Server including an indication
this HO is for rSRVCC. If the MSC Server is the target MSC, it forwards the HO
required to the anchor MSC Server.
1a. In the DTM case the UE is active in PS domain, the RNC/BSC sends also a
Relocation Required message to source SGSN.
2\. The MSC Server sends a SRVCC CS to PS HO request to the Target MME. If
required, the IMSI is provided for identifying the UE.
3\. The MSC Server sends an Access Transfer Notification to the ATCF, e.g. a
SIP re-INVITE or INVITE message, which indicates the ATCF that it should
prepare for the transfer of media to PS. The ATCF allocates media ports on the
ATGW. The media ports and codecs allocated by the ATCF are provided to the MSC
Server in the response message. This step is independent of step 2.
NOTE 4: The ATCF retrieves the ports/codecs received from the UE in its IMS
registration. The ATCF is able to correlate the IMS registration made by the
UE and the one made by the MSC Server on behalf of the UE for instance based
on the C-MSISDN or on the IMEI derived instance-id used by both those
registrations.
NOTE 5: The Access Transfer Notification message could e.g., be implemented
using an INVITE or other appropriate message. It is left for stage 3 to decide
on appropriate message.
4\. Source SGSN sends Relocation Request to the target MME.
5\. Target MME allocates resources in E-UTRAN.
6a. A relocation response is returned to the Source SGSN.
6b. Source SGSN sends HO Required Ack to RAN.
7\. A SRVCC CS to PS HO response is returned from the target MME to the MSC
Server.
8\. MSC Server sends HO required Ack to the RAN, possibly via the target MSC,
and the RAN send HO command to UE, indicating CS to PS handover. The MSC
Server also includes in that message the IP address/ports and selected codec
for the ATGW.
9\. In case of ATCF with media anchored in ATGW, the MSC Server sends an
Access Transfer Preparation Request, e.g. a SIP re-INVITE or PRACK message, to
the ATCF to trigger the ATCF/ATGW to have the media path switched to the IP
address/port of the UE on the target access.
In case of ATCF without media anchored in ATGW, MSC Server sends an Access
Transfer Preparation Request to ATCF and the media path between ATCF/ATGW and
the MSC Server/MGW is to be established.
10\. The UEs send Handover confirmation to the eNB.
11\. The eNB send Handover Notify to the MME.
12\. The MME sends Forward relocation Complete to the old SGSN.
13\. The MME sends Modify Bearer Request to the SGW which is forwarded to the
PGW to update PS bearer contexts.
14\. The voice media is started directly.
NOTE 6: During a short period of time prior the RAT has been changed and the
new bearer has been established, the media will be sent over the default
bearer.
15\. The UE initiates the session continuity procedures according to clause
6.3.3.8 towards the ATCF.
16\. As a result of the session continuity procedures, the bearer setup is
performed (initiated by the P-CSCF).
17\. The voice media is sent in the dedicated bearer.
#### 6.3.3.8 IMS Session Continuity procedure
##### 6.3.3.8.0 General
IMS Session Continuity procedure can be accomplished by sending an Access
Transfer Complete request to IMS, e.g. by using a SIP INVITE. If the ATCF was
involved in the IMS registration made by UE, the P-CSCF routes the Access
Transfer Complete request to the ATCF. The Access Transfer Complete request to
IMS is addressed using a dynamically provided STI-rSR (Session Transfer
Identifier for rSRVCC).
If the ATCF was involved and receives an Access Transfer Complete request, it
notifies the SCC AS about the fact the UE has now moved to the target access.
The SCC AS then releases the source access leg as described in 3GPP TS 23.237
[4].
If MSC Server receives the release of the original dialog, it shall release
the dialog between the MSC Server and the allocated ATCF.
##### 6.3.3.8.1 Anchored in ATGW
Following figure 6.3.3.8.1-1 shows an example that ATCF is involved in the IMS
registration made by UE and ATGW anchors the media.
Figure 6.3.3.8.1-1: IMS Session Continuity procedure -- with media anchored in
ATGW
0\. The IMS Session Continuity procedure starts when the media path switching
is requested from the MSC server during the Access transfer preparation phase
(see Step 12 in clause 6.3.3.7.1, Step 8b in clause 6.3.3.7.2, Step 10 in
clause 6.3.3.7.3, and Step 9a in clause 6.3.3.7.4 respectively).
1\. When receiving the Access Transfer Preparation request from the MSC
Server, the ATCF updates the ATGW to switch the media path to the PS access
leg. For alternative 3 and 4, the access media leg is switched to the access
media leg of the pre-established session.
2\. When the UE has moved to PS, it can receive media on the pre-decided
ports. It will re-establish the session control of the media by sending an
Access Transfer Complete request with the provided STI-rSR, e.g. by using a
SIP INVITE request. For alternative 1, 2 and 3, it shall use the media
information it already uses.
For alternative 4, if a new QCI=1 bearer has been created, UE uses it for
voice media data transfer.
3\. The Access Transfer Complete request is forwarded to the ATCF.
4\. The ATCF correlates the Access Transfer Complete request with the Access
Transfer Preparation request and the ongoing sessions, and moves the session
control of the session to the new access leg. For alternative 4, the ATCF
informs the UE to use the codec that original session used if possible.
5\. After receiving the Access Transfer Complete request, the ATCF re-
establishes the communication with the SCC AS and updates the SCC AS that the
transfer has taken place by sending an Access Transfer Update message to the
SCC AS. As there is no update in the session description, no remote end update
will be sent by the SCC AS.
6\. The SCC AS sends confirmation response to the ATCF.
7\. The UE may initiate transfer of any additional active/held session.
##### 6.3.3.8.2 Not Anchored in ATGW
Following figure 6.3.3.8.2-1 shows an example that ATCF is involved in the IMS
registration made by UE and not involved in the IMS registration made by MSC
Server.
Figure 6.3.3.8.2-1: IMS Session Continuity procedure - without media anchored
in ATGW
0\. The IMS Session Continuity procedure starts when the media path switching
is requested from the MSC server during the Access transfer preparation phase
(see Step 12 in clause 6.3.3.7.1, Step 8b in clause 6.3.3.7.2, Step 10 in
clause 6.3.3.7.3, and Step 9a in clause 6.3.3.7.4 respectively).
1\. When receiving the Access Transfer Preparation request from the MSC
Server, the ATCF reserves ATGW resources for the media path connected to MSC
Server/MGW.
2\. When the UE has moved to PS, it can receive media on the pre-decided
ports. It will re-establish the session control of the media by sending an
Access Transfer Complete request with the provided STI-rSR, e.g. by using a
SIP INVITE request. For alternative 1, 2 and 3, it shall use the media
information it already uses.
For alternative 4, if a new QCI=1 bearer has been created, UE uses it for
voice media data transfer.
3\. The Access Transfer Complete request is forwarded to the ATCF. If ATCF was
not involved in the IMS registration procedure made by UE, the Access Transfer
Complete request is forwarded to the SCC AS.
Following steps 4, 5 and 7 is for ATCF involved in the IMS registration made
by UE.
4\. The ATCF correlates the Access Transfer Complete request with the Access
Transfer Preparation request, and moves the session control of the session to
the new access leg. For alternative 4, the ATCF informs the UE to use the
codec that original session used if possible.
5\. After receiving the Access Transfer Complete request, the ATCF re-
establishes the communication with the SCC AS and updates the SCC AS that the
transfer has taken place by sending an Access Transfer Update request to the
SCC AS. The ATCF updates the ATGW to switch the media path to the PS access
leg. For alternative 1 and 2, the access media leg is switched to the access
media leg pre-negotiated during IMS registration procedure made by UE. For
alternative 3 and 4, the access media leg is switched to the access media leg
of the pre-established session.
6\. After receiving the Access Transfer Update/Access Transfer Complete
request, the SCC AS may send remote end update.
7\. The SCC AS sends confirmation response to the ATCF.
8\. The UE may initiate transfer of any additional active/held session.
#### 6.3.3.9 Identification of serving PS node
##### 6.3.3.9.1 Alternative 1: CN nodes based
**Provision of the SGSN identity to the MSC via HSS Insert Subscriber Data and
via SGSN notifications**
1\. SGSN functionality:
\- At Attach and at Inter-SGSN routing area update, the new SGSN gets the
address of the MSC serving the UE in the Insert Subscriber Data which it
receives from the HSS as part of the existing procedure.
> \- The SGSN then notifies the MSC (serving or anchor) that it has become the
> serving SGSN for the user if the UE is rSRVCC capable, and if the MSC is
> rSRVCC capable.
2\. Additional MSC functionality:
\- At IMSI Attach and at Inter-MSC Location Area Update, if an SGSN is serving
the UE, the MSC stores as \"serving PS CN node\" the address of the serving
SGSN it receives from the HSS in the Insert Subscriber Data as part of the
Location Area Update.
\- When getting notified by an SGSN, the MSC stores as \"serving PS CN node\"
the identity of the SGSN that issued the notification.
\- At SRVCC, the MSC initializes the \"serving PS CN node\" to the identity of
the MME that issued the PS to CS request.
3\. Additional HSS functionality:
\- The HSS needs to include the serving MSC identity in the Insert Subscriber
Data it sends to the SGSN.
4\. Additional UE functionality:
\- The UE signals its rSRVCC capability to the SGSN at Attach and at Routing
Area Update.
> At SRVCC handover combined with PS handover, the UE needs to slightly delay
> the sending of the Routing Area Update it sends once getting on the target
> access. (This would be required to make sure the MSC has performed the
> Location Updating towards the HSS, and that the SGSN will therefore be able
> to get the identity of the MSC it needs to notify).
##### 6.3.3.9.2 Alternative 2: UE and/or RAN provided information
UE packs one of the following information into rSRVCC IE, which can be used by
the MSC to locate source SGSN / old MME:
a. RAI, P-TMSI, and P-TMSI signature if serving PS node is in UTRAN network.
b. RAI and TLLI if serving PS node is in GERAN network.
c. GUTTI if serving PS node is in E-UTRAN network.
UE reports rSRVCC IE to RNC/BSC when it is involved in CS call establishment
(including CS MO/MT, CS handover, and SRVCC cases).
Examples of methods that could be used to report the rSRVCC IE to the RNC/BSC:
\- RRC message: examples are the ASSIGNMENT COMPLETE message and HANDOVER
COMPLETE messages (the \"RRC Measurement Report\" message shall not be used).
The inclusion of rSRVCC IE shall be according to clause 10.1.1.1.2 of TS
25.331 for non-critical extension of a RRC message with additional information
elements (currently RAN2 does not recommend modifying RRC messages to include
rSRVCC Info IE) or clause 8.6.1 of TS 44.018 [13].
\- Suspend procedure in case of non-DTM capable GERAN network
\- Additional RAU procedure or assignment procedure for UE in dedicated mode.
\- For UE in dedicated mode, in case of normal CS HO but without RA change
(e.g. inter RNC HO without RA change), following methods can be used:
a. the UE reports rSRVCC IE to RNC/BSC using handover complete procedure.
b. the source RNC/BSC sends the rSRVCC IE to target RNC/BSC by including it in
the Transparent Container.
NOTE: Which method is used needs to be decided by RAN groups / stage 3.
RNC/BSC includes the rSRVCC Info IE in Handover/Relocation Required message
for CS to PS handover, e.g. by including the rSRVCC Info IE into GERAN
Classmark.
The following figure shows an example call flow.
Figure 6.3.3.9.2-1
1\. UE involves in CS session by proceeding CS MO/MT procedure. UE packs the
serving PS node information into rSRVCC IE and reports the rSRVCC IE to
RNC/BSC. In case the used message contains already the serving PS node
information, then there is no need to include the rSRVCC IE additionally and
the RNC/BSC can construct the rSRVCC IE on its own.
2\. UE involves in CS session by performing SRVCC procedure. UE packs the
serving PS node information into rSRVCC IE and reports the rSRVCC IE to
RNC/BSC. In case the used message contains already the serving PS node
information, then there is no need to include the rSRVCC IE and the RNC/BSC
can construct the rSRVCC IE on its own. In case of inter-SGSN change or intra
SGSN with RAI change and the BSC/RNC has generated P-TMSI/TLLI+target RAI the
RNC/BSC can replace the P-TMSI/TLLI+RAI received from the UE with the RNC/BSC
generated P-TMSI/TLLI+target RAI pointing to the target SGSN.
3\. When the RNC/BSC supporting rSRVCC triggers the rSRVCC procedure, it sends
Relocation Required/Handover Required message with received rSRVCC IE content
to anchor MSC Server. The anchor MSC Server sends MAP-Handover-Preparation
request with the received rSRVCC IE content to target MSC Server.
##### 6.3.3.9.3 Alternative 3: RAN provided information
**[According to 6.3.3.9.2:]{.underline}**
**[Regarding bullet a and bullet b where GERAN is DTM capable:]{.underline}**
In case of UTRAN or DTM capable GERAN network, during attachment procedure or
RAU procedure, the RNC/BSC has the information pointed to the serving SGSN,
which can be stored in RNC/BSC in case of active CS session. When RNC/BSC
needs to start rSRVCC HO, it includes this serving SGSN address as part of the
HO signalling toward the MSC enhanced for rSRVCC.
As RNC/BSC have no UE context for the UE in PS idle mode, the UE should
initiate additional RAU to provide the RNC or BSC with the RAI/P-TMSI/P-TMSI
signature or RAI/TLLI respectively when initiating CS call.
In case of normal CS HO without RA change for PS idle mode UE, there seem two
alternative solutions as described below:
1) The serving SGSN information is to be transferred as BSC-to-BSC / RNC-to-
RNC information in Handover / Relocation Required and Handover / Relocation
Request messages and the target RNC/BSC stores the related information for
future rSRVCC HO procedure.
2) In normal CS HO procedure, the source RNC/BSC reuses the rSRVCC Info IE to
include the serving SGSN information in Handover / Relocation Required message
and the anchor MSC Server stores the related information for future rSRVCC HO
procedure.
**[Regarding bullet b where GERAN is Non-DTM capable:]{.underline}**
In case of Non-DTM capable GERAN network, according to clause 16.2.1.1.1 of TS
23.060 [6], it seems the suspend procedure can be reused to transfer RAI and
TLLI to BSC.
In this case, when UE has been involved in active CS call, the UE sends RR
Suspend (TLLI, RAI) message to the BSC and BSC stores the related information.
If the MS performs an inter-BSC handover while suspended, the TLLI and RAI
should be transferred as BSC-to-BSC information in the Handover Required and
Handover Request messages.
Please note that MSC Server only uses RAI/TLLI to resolve the address of the
serving MME and IMSI still needs to be transferred to MME for UE
identification.
**[Regarding bullet c:]{.underline}**
This applies to the scenario of CS voice call established during SRVCC from
E-UTRAN to GERAN without DTM support where the UE will be in GPRS PS suspend
state in GERAN.
In this case, the UE will send RR Suspend with TLLI/RAI to BSC that is mapped
from GUTI pointed to old serving MME and the following procedure is similar
with the bullet b.
Alternatively, SRVCC MSC Server is the anchor MSC Server and can store the
information of serving MME node. Assuming SRVCC MSC Server can also act as
rSRVCC MSC Server, the stored MME information can be used by the anchor MSC
Server to find the correct MME.
NOTE: The SRVCC MSC Server is able to find the source MME based on the
received information during SRVCC PS to CS procedure according to TS 29.280
[14].
During rSRVCC procedure, RNC/BSC includes the rSRVCC Info IE with serving
SGSN/MME information in Handover/Relocation Required message for CS to PS
handover, which is used by MSC Server to find the serving SGSN/MME correctly.
### 6.3.4 IMS registration Considerations
#### 6.3.4.1 General
As a prerequisite for rSRVCC, the UE is IMS registered over PS.
#### 6.3.4.2 ATCF controlled registration
To avoid that the IMS registration expires during an ongoing voice call over
GERAN / UTRAN without DTM support, the ATCF instructs the P-CSCF as follows:
\- While the voice call is ongoing on the CS access leg (to/from the ATCF),
the P-CSCF shall update the local registration timer of the PS access leg such
that it does not expire during the ongoing call.
\- If needed, the P-CSCF will also further instruct the S-CSCF to update its
registration timer for the PS access leg such that it does not expire during
the ongoing call.
After releasing the voice call(s), and if needed, the UE itself updates the
IMS registration, i.e. in case the original IMS registration timer on the UE
has already expired, the UE will immediately perform re-registration.
NOTE: If the UE\'s IMS registration timer expires locally during the ongoing
call, the UE ignores this until the call is completed and is able to perform a
re-registration.
Following figure shows an example of the solution:
Figure 6.3.4.2-1: ATCF controlled registration
Editor\'s Note: It is FFS that whether a resume timer is needed and what if CS
session is not anchored on ATCF.
#### 6.3.4.3 SCC AS controlled registration
During the IMS (re-)registration procedure, The UE shall send a SIP REGISTER
request with an additional time interval Tmaintain to IMS to maintain IMS
registration when UE is involved in CS session. The time interval for IMS re-
registration is called TRegistration. In order not to impact P-CSCF, the
Tmaintain shall be included in the Expires header field of the SIP REGISTER
request and the response.
The S-CSCF shall not reduce the Tmaintain if the 3^rd^ party registration
needs to be performed to a SCC AS. The S-CSCF may reduce the TRegistration
according to local policy. The S-CSCF shall forward the TRegistration to the
SCC AS via 3^rd^ party registration procedure and forward the TRegistration to
the UE, e.g. by including the TRegistration in the response to the SIP
REGISTER request.
The SCC AS may hold a time interval TTransfer corresponding to the approximate
transfer time of the SIP REGISTER request. The SCC AS shall reset the time
interval for monitoring IMS re-registration to (TRegistration + TTransfer)
when all CS sessions of the UE has been released or the UE re-registration has
been informed, and stop monitoring the IMS re-registration when CS session of
the UE can be detected. If the time expired, the SCC AS shall inform the HSS
to de-register the UE.
Following figure shows an example of the solution:
Figure 6.3.4.3-1: SCC AS controlled registration
#### 6.3.4.4 rSRVCC HO Cancellation in case of UE loss of IMS registration
The clause handles the case the IMS registration from the UE expires during an
ongoing call.
Two steps are performed to handle the IMS registration expiration.
1\. MSC Server subscribes to the UE's IMS registration status.
NOTE 1: This does not imply the use of Subscribe at stage 3.
2\. The MSC Server uses the IMS registration status to ensure that full rSRVCC
procedures are not performed, when the session may be lost due to de-
registration.
Figure 6.3.4.4-1 provides the procedures of how the MSC server subscribes to
the UE's IMS registration status and is notified with changes.
Figure 6.3.4.4-1: Subscription to UE's IMS registration status
1\. MSC Server subscribes to the UE's IMS registration status.
2-4. If the UE's IMS registration status changes, the MSC Server is notified
by the IMS network.
Figure 6.3.4.4-2 provides the procedures of how the MSC server handles errors
when HO Required is received.
Figure 6.3.4.4-2: Error handling during HO.
1\. The RNC/BSC sends a HO required to the MSC Server including an indication
this HO is for SRVCC.
2\. The MSC Server checks if HO is possible, e.g., that the UE is still
registered in IMS (additional checks may be performed, such as if MSC server
have a registration through ATCF). In this flow, the MSC Server detects that
rSRVCC cannot be performed.
3\. MSC Server cancels the HO.
NOTE 2: After receiving the HO cancellation due to rSRVCC, the RNC/BSC will
not perform further HO attempts for rSRVCC.
## 6.4 Solution 4: Session transfer by local anchoring with Indirect
Forwarding
### 6.4.1 Functional Description
This solution is a counter part of the alternative 12 in the TR 23.856 [8]
such as enhancement of the SRVCC currently studied in SA2.This alternative
aims to provide high performance in handover between CS domain voice service
and LTE/HSPA IMS based voice media service by anchoring in local network.
This solution is provided by the following components.
\- New routing number for the MSC Server/MGW enhanced for SRVCC is adapted in
this solution in order to establish the CS domain connection between UE and
the MSC Server/MGW enhanced for SRVCC.
Editor\'s Note: How UE gets new routing number is FFS. It is also possible to
route to the MSC Server/MGW enhanced for SRVCC by adding prefix information in
front of called number. In this case, added prefix is translated in the MSC.
If the MSC Server/MGW enhanced for SRVCC is collocated to every MSC in the
VPLMN, new routing number is not needed at all.
\- The call control is mainly performed in IMS infrastructure coordinated with
the CS domain call control, PCC architecture and EPC session control.
\- The PCC and EPC are enhanced for exchanging session related information
between the SCC AS and the MSC Server/MGW enhanced for SRVCC.
\- Once the MSC Server/MGW enhanced for SRVCC receives a call establishment
request from the UE, the MSC Server/MGW enhanced for SRVCC contacts to the SCC
AS to inform an IP address of the its MGW. This IP address is conveyed to SGSN
via P-CSCF, PCRF, PGW and SGW. Then SGSN use this IP address to contact to the
MGW to establish the EPC bearer between SGW and MGW for VoIP media.
\- The EPC is enhanced to establish Y shape connection anchored by the SGW.
The Y shape is structured by one leg between PGW and UE as normal EPC bearer
for packet domain, and the other one leg between PGW and the MSC Server/MGW
enhanced for SRVCC for rSRVCC specific EPC bearer. Both legs are anchored by
the SGW. The high HO performance can be achieved by this connection model
since this model utilizes the inter RAT HO and no \"session transfer\" is
required if PS HO is supported, i.e. SIP signalling session is kept both
before and after HO.
\- For both origination and termination, the SIP level call control and CS
domain call control can be executed parallel in order to minimize call setup
time.
Editor\'s Note: It is FFS how to support non-DTM support case.
Editor\'s Note: It is FFS how to handle the case where inter-MSC handover
happens in this solution.
### 6.4.2 Architecture Reference Model
The Figure 6.4.2-1 shows the architecture reference model of this solution.
Figure 6.4.2-1: rSRVCC solution using local anchoring
Editor\'s Note: The architecture figure will include the PCRF.
### 6.4.2 Information flows
#### 6.4.2.1 Initial ATTACH / TA update procedure
The E-UTRAN attach procedure for 3GPP rSRVCC UE is performed as defined in TS
23.216 [7] with the following additions:
1) rSRVCC UE includes the \"rSRVCC capability indication\" as part of the \"MS
Network Capability\" in the Attach Request message and in Tracking Area
Updates.
2) If the subscriber is allowed to have rSRVCC in the VPLMN, the HSS shall
include the \"rSRVCC allowed\" indication as part of the subscription data
sent to the MME.
#### 6.4.2.2 Call origination procedure in GERAN/UTRAN
In case rSRVCC capable UE determines to establish rSRVCC call, the following
procedure takes place.
Figure 6.4.2.2-1: Call origination procedure in GERAN/UTRAN
NOTE: Steps in A and B can be preformed in parallel. Steps in C is triggered
by SCC AS after completing both steps A and B.
1\. UE sends the INVITE message with the rSRVCC flag in SIP header if UE
wishes to perform HO to IMS in case it would be necessary during a call.
2\. When SCC AS receives the 183 Session Progress message from peer end, SCC
AS checks the rSRVCC flag. If eSRVCC flag is active, then SCC AS waits for the
step7 to arrive and initiate step 8.
3\. UE sends the setup message over the NAS signal. This message triggers the
establishment of the CS bearer from UE to MSC for SRVCC via MSC. This setup
message has the SRVCC MSC number in order to reach to the MSC Server/MGW
enhanced for SRVCC. Alternatively, called number with prefix could also route
to the MSC Server/MGW enhanced for SRVCC. This step can be initiated parallel
with the step 1.
4\. MSC sends the IMS message to the MSC Server/MGW enhanced for SRVCC.
5\. The MSC Server/MGW enhanced for SRVCC sends ANSWER message to MSC.
6\. The MSC sends connect message to UE. The voice path in the CS domain is
established at this point. The MGW waits the Create CS Session Request message
(Step 10) to come if the MGW has not received the Create CS Session Request
message.
7\. The MSC Server/MGW enhanced for SRVCC sends the PS session information to
the SCC AS. This message contains the MGW IP address information and the
Public User Identity. The MGW IP address is used in SGSN to contact to the
right MGW that terminates the voice path in CS domain. The MSC Server/MGW
enhanced for SRVCC assigns the SRVCC specific Public User Identity as the
similar way as the ICS enhanced MSC server as described in the 3GPP TS 23.292
[3].
8\. Once SCC AS receives the 183 Session Progress message, SCC AS send
Application level request to the PCRF in order to reserves the network
resources for VoIP communication. This message carries the SDP related
information, the MGW IP address information and the Public User Identity.
9\. The PCRF sends the IP CAN Session request message to the PGW in order to
enforce a PCC rule. This message carries the SDP related information, the MGW
IP address information and the Public User Identity.
10\. The PGW sends the Create Bearer Request message to the SGW. This message
carries the SDP related information, the MGW IP address information and the
Public User Identity.
11\. The SGW sends the Create Bearer Request message to the SGSN. In addition
to the SDP related information, the MGW IP address information and the Public
User Identity, SGW adds the IP address and TEID for VoIP communication.
12\. If the MGW IP address is included in the Create Bearer Request message,
the SGSN sends the Create CS Session Request message to the MGW using the MGW
IP address received in the step 11. This message carries the SGW IP address,
TEID, SDP related information and the Public User Identity. The MGW correlates
with the CS voice path that is made by stem 3 to 6 by using the Public User
Identity. The SDP related information includes codec related information,
routing information to the remote end, etc. The codec related information is
used when MGW performs a voice media transcoding.
13\. The MGW sends the Create CS session response to the SGSN. This message
carries the MGW IP address and TEID to be used for VoIP communication.
14\. The SGSN sends the Create bearer response to the SGW. This message
carries the MGW IP address and TEID to be used for VoIP communication between
the MGW and the SGW.
15\. The SGW sends the Create bearer response to the PGW.
16\. The PGW sends the acknowledge message to the PCRF.
17\. The PCRF sends the acknowledge message to the SPCC AS
18\. Once SCC AS receives the Acknowledge message in step 15. The SCC AS sends
the UPDATE message to the remote end to inform that all necessary resources
has been allocated.
19\. The remote end send 200 OK for reply to the message in step 16.
#### 6.4.2.3 Call termination procedure in GERAN/UTRAN
In case rSRVCC capable UE determines to establish rSRVCC call, the following
procedure takes place.
Figure 6.4.2.3-1: Call termination procedure in GERAN/UTRAN
1\. UE receives the INVITE message.
2\. If UE wishes to perform HO to IMS in case it would be necessary during a
call, UE sends the 183 Session Progress message with the rSRVCC flag in SIP
header. When SCC AS receives the 183 Session Progress message from UE, SCC AS
checks the rSRVCC flag. If rSRVCC flag is active, then SCC AS initiates step 8
in the Figure 6.4.2.2-1 after waiting for step 7 arrived.
3\. UE sends the setup message over the NAS signal. This setup message has the
SRVCC MSC number in order to reach to the MSC Server/MGW enhanced for SRVCC.
Alternatively, called number with prefix could also route to the MSC
Server/MGW enhanced for SRVCC. This step can be initiated parallel with the
step 1.
4\. MSC sends the IMS message to the MSC Server/MGW enhanced for SRVCC.
5\. The MSC Server/MGW enhanced for SRVCC sends ANSWER message to MSC.
6\. The MSC sends connect message to UE. The voice path in the CS domain is
established at this point. The MGW waits the Create CS Session Request message
(Step 10) to come if the MGW has not received the Create CS Session Request
message.
7\. The MSC Server/MGW enhanced for SRVCC sends the PS session information to
the SCC AS. This message contains the MGW IP address information. The MGW IP
address is used in SGSN to contact to the right MGW that terminates the voice
path in CS domain.
After step 7, The C part in the Figure 6.4.2.2-1 continues.
#### 6.4.2.4 SRVCC handover from UTRAN or GERAN to LTE
This procedure is basically same as the UTRAN to E-UTRAN Inter RAT HO
procedure as described in TS 23.401 [5]. The deltas are indicated in RED font
in the Figure 6.4.2.4-1.
Figure 6.4.2.4-1: SRVCC handover from UTRAN or GERAN to LTE
1\. Depending on the radio condition, RNS sends the Handover Required message
to SGSN. Note that RNS does send the Handover Required message to MSC since
there is no CS domain available in the LTE.
Editor\'s Note: How RNS decides to send Handover Required message to SGSN is
FFS.
2\. SGSN sends the Forward Relocation Request message to the MME with the CS
indication. The CS indication indicates that the Voice media exists in CS
domain and needs to be handed over the LTE.
3\. MME sends the Handover Request message to eNB. eNB reserves all necessary
bearer resources including a bearer resources for the VoIP media.
Editor\'s Note: Voice bearer is created by the separate bearer establishment
procedure and the detail is FFS.
4\. eNB sends the Handover Request Ack message to the MME.
5\. MME sends the Forward Relocation Response message to the SGSN. This
message contains the eNB IP address and TEID for VoIP media.
6\. MME sends the Create Indirect Data Forwarding Tunnel Request message to
the SGW. This message does not create the indirect data tunnel for VoIP media
since indirect data forwarding is not performed for VoIP media.
7\. SGW sends the Create Indirect Data Forwarding Tunnel Response message to
the MME.
8\. SGSN sends the Relocation command message to the RNS to command hand over
to the LTE.
9\. RNS sends HO command to the UE.
10\. SGSN sends the Redirect request to the MSC Server/MGW enhanced for SRVCC.
This message contains the eNB IP address and TEID that to be used for VoIP
media. This message can be sent after the SGSN receives the Forward Relocation
Response message from MME. When the MSC Server/MGW enhanced for SRVCC receives
this message, the MSC Server/MGW enhanced for SRVCC starts sending DL voice
data to the eNB. The MSC Server/MGW enhanced for SRVCC may optionally bi-cast
DL voice to both MSC and eNB.
The MSC Server/MGW enhanced for SRVCC starts the release procedure toward the
CS domain after a configurable time has passed. This process is not shown in
this flow.
11\. After UE tunes to the LTE, UE sends the HO to E-UTAN complete message to
the eNB.
12\. eNB sends HO notify to the MME.
13\. MME sends the Forward Relocation Complete Notification message to the
SGSN.
14\. SGSN sends the Forward Relocation Complete Ack message to MME.
15\. MME sends the Modify Bearer Request to the SGW. This message includes the
eNB TEID for VoIP media.
NOTE: eNB TEID information is already available at step 4.
16\. SGW sends the Modify Bearer Response to the MME.
17\. SGSN sends the Delete Indirect Data Forwarding Tunnel Request to the SGW.
This message does not include the bearer information for VoIP media.
18\. SGW sends t the Delete Indirect Data Forwarding Tunnel Response to the
SGSN.
## 6.5 Solution 5: IMS procedure is initiated by MSC Server to ATCF
### 6.5.1 Architecture Reference Model
#### 6.5.1.1 General
Figure 6.5.1.1-1 provides the reference architecture for reverse SRVCC. The
figure only depicts the specific reference points for reverse SRVCC.
NOTE 1: MSC Server shown in the figure is enhanced for reverse SRVCC
NOTE 2: The MSC server enhanced for reverse SRVCC may not be the source MSC
which connects to the source cell.
Figure 6.5.1.1-1: Reference Architecture for reverse SRVCC.
#### 6.5.1.2 Concepts of reverse SRVCC
For facilitating session transfer (reverse SRVCC) of the voice component to
the PS domain, the IMS multimedia telephony sessions needs to be anchored in
the IMS (ATCF).
For reverse SRVCC from UTRAN/GERAN to E-UTRAN/UTRAN (HSPA), MSC Server
enhanced for reverse SRVCC receives the CS handover request of UTRAN/GERAN
with the indication that whether PS handover is initiated and this is for
reverse SRVCC handling. If PS handover is initiated, the Source SGSN sends PS
handover request to the MSC Server enhanced for reverse SRVCC. MSC Server
enhanced for reverse SRVCC synchronises the CS and PS handover requests and
triggers the CS to PS Handover procedure with the target MME via the Sv
reference point. MSC Server enhanced for reverse SRVCC then initiates the
session transfer procedure to IMS (ATCF) and coordinates it with the CS to PS
Handover SRVCC procedure. Target MME then sends CS to PS handover Response to
MSC Server enhanced for reverse SRVCC, which includes all the components
information including voice for the UE to access the E-UTRAN/UTRAN (HSPA).
After UE tunes to the target access, it initiates the session transfer
procedure to IMS (ATCF), and ATCF coordinates the two session transfer
procedures.
Figure 6.5.1.2-1: Overall high level concepts for reverse SRVCC
### 6.5.2 Functional Entities
#### 6.5.2.1 ATCF
The ATCF shall be based on the functionality specified in TS 23.237 [4], with
the following enhancements:
NOTE 1: For transferring emergency session, the ATCF can be co-located with
E-SCC AS.
\- Based on operator policy, decide to
\- allocate a STN-rSR;
\- Perform the Access Transfer and update the ATGW with the new media path for
the new (PS) access leg, without requiring updating the remote leg;
\- Make anchoring decision with additional criteria of UE\'s reverse SRVCC
capability;
\- Forward the originating call destined to an IMRN pointing to the ATCF;
\- Forward the terminating call to CS domain if CS identity is received for
the call;
\- Inform the MSC Server enhanced for rSRVCC that the Access Transfer is
success after response to the Session Transfer message sent by UE;
\- Correlate the Session Transfer procedures initiated by the UE and the MSC
server enhanced for rSRVCC.
#### 6.5.2.2 SCC AS
The SCC AS shall be based on the functionality specified in TS 23.237 [4],
with the following enhancements:
\- Clear any existing STN-rSR that has been set to the HSS if a third-party
register without a STN-rSR is received;
\- Provide the STN-rSR received in a third-party register to the HSS;
\- When an ATCF is used, provide during session establishment the PUI
registered by the UE to the ATCF;
\- If the session is originated from CS domain, instruct the serving network
to redirect the call to an number point to the ATCF or instruct the serving
network to resend the call via the ATCF, which allocates the STN-rSR;
\- Route the call to the ATCF during terminating session establishment if
T-ADS selects CS domain.
\- Monitor the IMS re-registration of the UE as described in clause 6.5.3.4
and inform the HSS to de-register the UE if needed.
#### 6.5.2.3 S-CSCF
The S-CSCF shall perform IMS Registration procedure for the rSRVCC UE as
described in clause 6.5.3.6.
#### 6.5.2.4 MSC Server enhanced for reverse SRVCC
The MSC Server enhance for reverse SRVCC shall be based on the functionality
specified in TS 23.216 [7] and TS 23.292 [3], with the following enhancements:
\- Perform the session transfer procedure or emergency session transfer
procedure from CS to IMS as described in clause 6.5.3.9.1;
\- Initiating the CS to PS handover procedure for handover of the voice
component to the target cell via the Sv interface and including an emergency
indication if this is an emergency session. This procedure is only triggered
once regardless of the number of CS sessions those are in use by the UE.
\- Coordinating the CS to PS handover and session transfer procedures;
\- Not perform MAP_Update_Location procedure for CS to PS handover procedure;
\- Synchronize PS handover and CS handover procedures when both procedures are
performed.
#### 6.5.2.5 MME
The MME shall be based on the functionality specified in TS 23.401 [5], with
the following enhancements:
\- Handling the Relocation Preparation procedure requested from MSC Server
enhanced for rSRVCC via Sv reference point;
\- Perform the bearer reservation procedure for voice media in target access
as described in clause 6.5.3.9.2;
#### 6.5.2.6 UE enhanced for reverse SRVCC
The rSRVCC UE shall:
\- Indicate to the IMS that the UE is rSRVCC capable when being configured for
using IMS speech service supported by the home operator, e.g. the IMS
Multimedia Telephony Service for bi-directional speech and the operator policy
on the rSRVCC UE as specified in TS 23.237 [4] does not restrict the session
transfer.
\- Initiate RAU/LAU procedure to indicate the GERAN/UTRAN that the user is
allowed to use rSRVCC.
\- Initiate a Session Transfer procedure as described in TS 23.237 [4] after
handover to the target access is completed.
\- Perform IMS Registration procedure as described in clause 6.5.3.6.
#### 6.5.2.7 UTRAN/GERAN
When UTRAN/GERAN selects a target VoIP-capable cell for CS to PS handover, it
needs to send an indication to SGSN that this handover procedure requires
rSRVCC.
UTRAN/GERAN may be capable of determining the neighbour cell list based on the
allowance of rSRVCC and/or presence of CS sessions for a specific UE as
described in clause 6.5.3.2.
### 6.5.3 Message Flows
#### 6.5.3.1 Home control rSRVCC
When the S-CSCF receives IMS registration from a rSRVCC UE, it shall send the
rSRVCC subscription information of the user to the UE if it exists. After
receiving the rSRVCC subscription information, the UE shall perform
RAU/LAU/TAU procedure depends on where it attaches to send an \"rSRVCC
allowed\" indication to the NB/eNB.
#### 6.5.3.2 RAU/LAU/TAU procedure
RAU/LAU/TAU procedure for 3GPP rSRVCC UE is performed as defined in TS 23.060
[6] or TS 23.401 [5] with the following additions:
\- NB/eNB receives \"rSRVCC allowed\" indication as part of the \"UE Radio
Access Capability\". NB/eNB stores this information for rSRVCC operation.
NOTE 1: If the indication is populated by core network, considering not all
MSC Server/SGSN need to be enhanced for rSRVCC, if UE initiates CS session
with that MSC Server and performs CS handover, this indication will be lost in
target NB.
When UE attaches to GERAN/UTRAN, if the \"rSRVCC allowed\" indication is set
to \"true\" and/or the UE is involved in CS session, then VoIP-capable cells
may be included as candidate target cells in the NCL.
NOTE 2: The UE will receive the \"rSRVCC allowed\" indication via IMS
registration procedure.
#### 6.5.3.3 GERAN/UTRAN performs handover procedure
If the GERAN/UTRAN decides to handover the UE with CS session to a VoIP-
capable cell, it shall include an rSRVCC indication in the Handover/Relocation
Required message for CS handover, and for PS handover if happened, and destine
the Handover/Relocation Required message for CS handover to a MSC Server
enhanced for rSRVCC.
Annex Y shows an example of how the GERAN/UTRAN packs the rSRVCC indication.
#### 6.5.3.4 Maintaining IMS Registration
During the IMS (re-)registration procedure, The UE shall send a SIP REGISTER
request with an additional time interval Tmaintain to IMS to maintain IMS
registration when UE is involved in CS session. The time interval for IMS re-
registration is called TRegistration. In order not to impact P-CSCF, the
Tmaintain shall be included in the Expires header field of the SIP REGISTER
request and the response.
The S-CSCF shall not reduce the Tmaintain if the 3^rd^ party registration
needs to be performed to a SCC AS. The S-CSCF may reduce the TRegistration
according to local policy. The S-CSCF shall forward the TRegistration to the
SCC AS via 3^rd^ party registration procedure and forward the TRegistration to
the UE, e.g. by including the TRegistration in the response to the SIP
REGISTER request.
The SCC AS may hold a time interval TTransfer corresponding to the approximate
transfer time of the SIP REGISTER request. The SCC AS shall reset the time
interval for monitoring IMS re-registration to (TRegistration + TTransfer)
when all CS sessions of the UE has been released or the UE re-registration has
been informed, and stop monitoring the IMS re-registration when CS session of
the UE can be detected. If the time expired, the SCC AS shall inform the HSS
to de-register the UE.
#### 6.5.3.5 Preparation of media transfer
UE need to transfer VoIP media right after CS to PS handover procedure
described in clause 6.5.3.9.2 is finished. The ATCF and/or MSC Server enhanced
for rSRVCC needs to know the IP address and port number used by the UE for
receiving media on PS access during CS-PS access transfer. The UE needs to
know the IP address, port number and codec for sending media to the ATGW
during CS-PS access transfer.
The IP address of the UE is assigned by the network and used for IMS
registration procedure. When registering in the IMS, the UE indicates its port
number and default codec (or list of codecs) it will receive media on when a
transfer is performed. The ATCF can learn this information during IMS
registration procedure, and therefore forward the information, as well as the
IP address/port of the ATGW for receiving voice media, to the MSC Server
enhanced for rSRVCC during CS-PS access transfer as described in clause
6.5.3.9.
#### 6.5.3.6 Selection of the ATCF
In order to ensure that the MSC Server selects the ATCF during rSRVCC
procedure, who may anchor the session, a STPN-rSR (Session Transfer Number for
rSRVCC) that can be used by the MSC Server to find the ATCF shall be provided
to the serving MSC Server before rSRVCC procedure is triggered.
The ATCF shall allocate the STPN-rSR when the user registers in the IMS. The
STN-rSR shall be provided through IMS and via third-party registration to the
SCC AS. The SCC AS shall further provide the modified C-MSISDN with prefix of
STN-rSR to the HSS, which in turn shall update the serving MSC Server.
NOTE 1: The STN-rSR is not a routable number, and maybe part of the STN-SR. If
the SCC AS receives a third-party register without a STPN-rSR, it will remove
any prefix of the C-MSISDN.
The following figure shows an example of IMS registration flow where the ATCF
provides the STN-rSR to the home network. Existing IMS Registration procedures
described in TS 23.228 [11] are used to register the user in IMS.
Figure 6.5.3.6-1: IMS Registration
1\. UE sends an initial SIP REGISTER request with rSRVCC capability indication
to home network via ATCF (P-CSCF not shown in flow). The rSRVCC capability
indication is the additional time interval, reserved port, and default codec
(or list of codecs).
2\. ATCF decides, based on operator policy and in case the home network
supports rSRVCC, to allocate a STPN-rSR.
3\. The ATCF includes the STN-rSR in the request forwarded to the I/S-CSCF.
NOTE 2: Service level agreements are used to understand whether the home
network supports rSRVCC.
4\. The I/S-CSCF sends the SIP REGISTER request to the SCC AS according to the
third-party registration procedure. The S-CSCF shall forward the rSRVCC
subscription information to the UE, e.g. by including this information in the
response to the SIP REGISTER request. If the UE receives the information, it
shall trigger RAU/LAU/TAU immediately to set the rSRVCC allowed indication to
\"true\".
NOTE 3: In case of multiple registrations from the UE from multiple accesses,
the SCC AS will only receive and use a STPN-rSR from an ATCF in the mobile
network.
5\. SCC AS uses the STN-rSR as the prefix of C-MSISDN and provides the
modified C-MSISDN into the HSS.
NOTE 4: If an ATCF does not exist, the SCC AS will remove the prefix of
C-MSISDN and provide the modified C-MSISDN in the HSS.
6\. If the UE attached in GERAN/UTRAN, HSS provides the STN-rSR as prefix of
C-MSISDN to the serving MSC Server because of the change of the subscription
data.
7-8.If MSC Server is enhanced for ICS, the MSC Server will perform IMS
registration for the UE too, and if the MSC Server also is enhanced for
rSRVCC, the SIP REGISTER request may go through the ATCF determined by the
STN-rSR.
#### 6.5.3.7 Originating sessions in CS
##### 6.5.3.7.1 Serving MSC Server is not enhanced for ICS
Figure 6.5.3.7.1-1 shows an originating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and serving MSC
Server is not enhanced for ICS. If the ATCF was not included in the signalling
path then existing Mobile Origination procedures described in TS 23.228 [11]
are used.
Figure 6.5.3.7.1-1: Originating session that uses only CS media (MSC Server
not supporting ICS)
1\. UE-1 sends a SETUP message in CS domain to initiate a CS call to UE-2.
2\. MSC Server not supporting ICS fetches IMRN from UE-1\'s home network with
terminating number in order to forward the session establishment message to
IMS. SCC AS derives an IMRN pointing to the ATCF based on the STN-rSR and
roaming agreement. The MSC Server sends an ISUP IAM or SIP INVITE message to
the ATCF using the IMRN via a local MGCF.
3\~4.The ATCF decides to anchor based on local policy and allocates ATGW
resources and forwards the SIP INVITE message to the I/S-CSCF of the UE-1\'s
home network. The S-CSCF will forward the SIP INVITE message to the SCC AS
according to the originating iFC.
5\~6.SCC AS changes the request URI of the SIP INVITE request to the
terminating number and forwards the SIP INVITE request to the remote UE.
7\~8. SCC AS sends Access Transfer Info to the ATCF with a dynamic/static ATU-
STI, the UE PUI registered by the UE, and the C-MSISDN. The ATCF shall store
the Access Transfer Info.
NOTE 1: The Access Transfer Info (step 7 and 8) can be sent as part of the
existing session response (step 9) to the INVITE.
NOTE 2: The ATU-STI is a routable address pointing to the SCC AS. It could
either be dynamically allocated (for each session) or statically allocated
(for the SCC AS).
9\. Completion of originating session setup.
##### 6.5.3.7.2 Serving MSC Server is enhanced for ICS
Figure 6.5.3.7.2-1 shows an originating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and serving MSC
Server is enhanced for ICS. If the ATCF was not included in the signalling
path then existing Mobile Origination procedures described in TS 23.228 [11]
are used.
Figure 6.5.3.7.2-1: Originating session that uses only CS media (MSC Server
supporting ICS)
1\. UE-1 sends a SETUP message in CS domain to initiate a CS call to UE-2.
2\~3.MSC Server supporting ICS sends an SIP INVITE request to the I/S-CSCF of
UE-1\'s home network, the S-CSCF will forward the SIP INVITE request to the
SCC AS according to the originating iFC.
4\~5. SCC AS determines the ATCF that UE-1 used for IMS registration based on
the STN-rSR and roaming agreement. The SIP INVITE does not go through the
ATCF, SCC AS informs the MSC Server to re-send the call via the ATCF.
6\. The MSC Server re-sends the SIP INVITE request via the ATCF.
7\~10.The ATCF decides to anchor based on local policy and allocates ATGW
resources and forwards the SIP INVITE request to UE-2.
11\~13.Same as described in step 7\~9 of clause 6.5.3.7.1.
##### 6.5.3.7.3 Serving MSC Server is enhanced for rSRVCC
Figure 6.5.3.7.3-1 shows an originating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and serving MSC
Server is enhanced for rSRVCC. If the ATCF was not included in the signalling
path then existing Mobile Origination procedures described in TS 23.228 [11]
are used.
Figure 6.5.3.7.3-1: Originating session that uses only CS media (MSC Server
supporting rSRVCC)
1\. UE-1 sends a SETUP message in CS domain to initiate a CS call to UE-2.
2\. MSC Server supporting rSRVCC sends an SIP INVITE request to UE-2 via the
ATCF.
3\~6.The ATCF decides to anchor based on local policy and allocates ATGW
resources and forwards the SIP INVITE request to UE-2.
7\~9.Same as described in step 7\~9 of clause 6.5.3.7.1.
##### 6.5.3.7.4 UE is enhanced for ICS
Figure 6.5.3.7.4-1 shows an originating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and UE is enhanced
for ICS. If the ATCF was not included in the signalling path then existing
Mobile Origination procedures described in TS 23.228 [11] are used.
Figure 6.5.3.7.4-1: Originating session that uses only CS media (UE supporting
ICS)
1\~3. UE-1 sends a SIP INVITE message via Gm/I1 interface in PS/CS domain to
initiate a call to UE-2. If the SIP INVITE is sent via Gm interface, the SIP
INVITE goes through ATCF.
4\~6. SCC AS determines the ATCF that UE-1 used for IMS registration based on
the STN-rSR and roaming agreement. SCC AS derives a dynamic STN pointing to
the ATCF and responses to the SIP INVITE request with the dynamic STN to UE-1.
7\. UE-1 sends a SETUP message in CS domain destined to the dynamic STN.
8\. The MSC Server sends an ISUP IAM or SIP INVITE message to the ATCF using
the dynamic STN. If the MSC Server is not enhanced for ICS, the message will
be sent to the ATCF via a local MGCF.
9\~10.The ATCF decides to anchor based on local policy and allocates ATGW
resources and forwards the SIP INVITE message to the I/S-CSCF of the UE-1\'s
home network. The S-CSCF will forward the SIP INVITE message to the SCC AS
according to the originating iFC.
11\~15.Same as described in step 5\~9 of clause 6.5.3.7.1.
#### 6.5.3.8 Terminating sessions in CS
##### 6.5.3.8.1 UE is not enhanced for ICS
Figure 6.5.3.8.1-1 shows a terminating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and UE is not
enhanced for ICS. If the ATCF was not included in the signalling path then
existing Mobile Termination procedures described in TS 23.228 [11] are used.
Figure 6.5.3.8.1-1: Terminating session that uses only CS media (UE not
supporting ICS)
1-2. A Terminating session is sent towards the UE-1 from UE-2. The initial SIP
INVITE request is routed via the I/S-CSCF to the SCC AS.
3\. The SCC AS performs necessary T-ADS procedures according to TS 23.237 [4].
If the SCC AS knows the ATCF will be in the message path and T-ADS selects CS
domain, the SCC AS routes the request towards the UE-1 via PS domain, e.g.
destined to the UE PUI registered by the UE-1 itself. The SCC AS sends Access
Transfer Info to the ATCF with a dynamic/static ATU-STI, UE PUI, and the CS
identity of UE-1. The CS identity of UE-1 includes C-MSISDN, and if the
serving MSC Server is enhanced for ICS, the CS identity also may include SIP
PUI registered by the MSC Server for the UE-1 and information of serving MSC
Server, e.g. contact of the MSC Server.
NOTE 1: The Access Transfer Info can be sent as part of the existing INVITE.
If the T-ADS selects PS domain and UE-1 does not support ICS, the Access
Transfer Info includes ATU-STI, UE PUI, and C-MSISDN.
4\. The INVITE is routed towards the ATCF (P-CSCF not shown in flow). When
receiving the SIP INVITE request and CS identity, the ACTF decides to anchor
based on local policy, allocates ATGW resources for voice media, anchors the
voice media in the ATGW. The ATCF shall store the ATU-STI, the UE PUI, and the
C-MSISDN. The ATCF removes the ATU-STI and CS identity from the INVITE.
5\. The ATCF forwards the SIP INVITE request to the UE-1 via CS domain using
the CS identity. The forwarded SIP INVITE request will go through a local MGCF
near the ATCF if C-MSISDN in the CS identity is used.
6\. The MSC Server sends a SETUP message to the UE-1.
7\. Session setup is completed.
##### 6.5.3.8.2 UE is enhanced for ICS
Figure 6.5.3.8.2-1 shows a terminating session when the ATCF has previously
been included in the signalling path (see clause 6.5.3.6) and UE is enhanced
for ICS. If the ATCF was not included in the signalling path then existing
Mobile Termination procedures described in TS 23.228 [11] are used.
Figure 6.5.3.8.2-1: Terminating session that uses only CS media (UE supporting
ICS)
1\~2. A Terminating session is sent towards the UE-1 from UE-2. The initial
SIP INVITE request is routed via the I/S-CSCF to the SCC AS.
3\~4.The SCC AS determines the ATCF that UE-1 used for IMS registration based
on the STN-rSR and roaming agreement. SCC AS derives a dynamic STN pointing to
the ATCF and forwards the SIP INVITE request with the dynamic STN to UE-1 as
described in TS 23.237 [4].
NOTE 1: The Access Transfer Info can be sent as part of the existing INVITE.
5\. The ATCF forwards the SIP INIVTE request to the UE-1 without the Access
Transfer Info.
6\. UE-1 sends a SETUP message in CS domain destined to the dynamic STN.
7\. Completion of the CS originating session setup that is same as described
in setup 8\~15 of clause 6.5.3.9.4, and completion of the PS terminating
session setup as described in TS 23.237 [4].
#### 6.5.3.9 CS - PS Access Transfer
##### 6.5.3.9.0 Introduction
This clause describes the main steps of the rSRVCC procedure of the
alternative. There are two parallel procedures in the flow: GERAN/UTRAN to
E-UTRAN handover procedure and, IMS Service Continuity procedure initiated by
MSC Server. The IMS Service Continuity procedure initiated by MSC Server is
triggered by HO message of the GERAN/UTRAN to E-UTRAN handover procedure.
##### 6.5.3.9.1 IMS Session Continuity procedure
This clause describes the detail flow of IMS Session Continuity procedure for
the CS-PS access transfer.
Figure 6.5.3.9.1-1: IMS Session Continuity procedure of rSRVCC
1\. Source GERAN/UTRAN determines to perform handover to VoIP-capable cell
based on the measurement report and acts as described in clause 6.5.3.3, which
will result in the MSC Server enhanced for rSRVCC receiving a handover request
from CS domain. If the MSC Server enhanced for rSRVCC is not the Source MSC
Server, then the Source MSC Server will send a Prep_HO_Request message to the
MSC Server enhanced for rSRVCC.
If the C-MSISDN is not received or does not contain a STN-rSR, the MSC Server
enhanced for rSRVCC shall reject the CS handover.
2\. The MSC Server initiates Access Transfer Notification message with
C-MSISDN to the ATCF that determined by the STPN-rSR in the C-MSISDN, e.g. by
sending a SIP INVITE (C-MSISDN) request to the ATCF**.**
3\~4.If the voice media of the transferred session has not been anchored in
ATGW, the ATCF sends Configure ATGW message to ATGW and gets response from the
ATGW to reserve the resource for voice media.
5\. The ATCF correlates the Access Transfer Notification message with the
transferred session using the C-MSISDN, and informs the MSC Server enhanced
for rSRVCC that the access transfer is in progressing, e.g. by sending a SIP
\"183 Session Progress\" response.
The ATCF sends the IP address/port of UE for receiving voice media, the IP
address/port of ATGW for receiving voice media, and the codec used to the MSC
Server enhanced for rSRVCC in this step.
6\. The ATCF sends Access Transfer Update message with C-MSISDN to the SCC AS
using the static ATU-STI. The SCC AS correlates the incoming Access Transfer
Update message with the transferred session using the C-MSISDN, and if the
Session Description (SDPATGW-remote) has changed, a remote end update is
initiated according to existing procedures.
7\. The SCC AS response to the Access Transfer Update message and releases the
source access leg after a while.
8\. When UE-1 handover to the target access, the RRC connection has been ready
for data transfer, it sends Session Transfer message to IMS using pre-
configured STI-rSR, e.g. by sending a SIP INVITE (UE PUI, STI-rSR) to the IMS.
9\~10.The Session Transfer message arrives at the ATCF, the ATCF knows that
the Session Transfer message is for rSRVCC according to the STI-rSR and
correlates the Session Transfer message with the transferred session using the
UE PUI. The ATCF sends Configure ATGW message to ATGW and gets response from
the ATGW to reserve the resource for voice media and correlates it with the
resource reserved in step 3 and 4.
11\. The ATCF response to the UE.
NOTE 1: This may cause bearer modification procedure due to the change of QoS
and/or TFT for the voice bearer.
12\. The ATCF informs the MSC Server enhanced for rSRVCC that the access
transfer is successful, e.g. by sending a SIP \"200 OK\" response.
NOTE 2: After the CS-PS access transfer, the MSC Server enhanced for rSRVCC
may release the CS resources immediately instead of waiting for the
terminating of access leg.
13\. The UE may initiate transfer of any additional held/active session.
##### 6.5.3.9.2 CS to PS handover procedure
This clause describes the detail flow of CS to PS handover procedure for the
CS-PS access transfer. The bearer information, Connection Info of ATGW, and
Codec are included in Target to Source Transparent Container, e.g. using a NAS
message format.
Figure 6.5.3.9.2.1-1: Target MME/SGSN initiate resources reservation
1-2.If the UE is active in PS domain, source GERAN/UTRAN acts as described in
clause 6.5.3.3 and sends a Handover/Relocation Required (target ID, rSRVCC
indication, Source to Target transparent container) message to source SGSN,
and source SGSN sends Forward Relocation Request (target ID, rSRVCC
indication, Source to Target transparent container) message to MSC Server
enhanced for rSRVCC according to the target ID.
3-4. Source GERAN/UTRAN acts as described in clause 6.5.3.3 and sends a
Handover/Relocation Required (target ID, rSRVCC indication, index of source
SGSN, Emergency Indication, Source to Target transparent container) message to
source MSC, and if the source MSC is not the target MSC, source MSC performs
inter-MSC handover procedure e.g. sends Prepare HO Request (target ID, rSRVCC
indication, index of source SGSN, Emergency Indication, C-MSISDN, Source to
Target transparent container) message to MSC Server enhanced for rSRVCC
according to the target ID.
The index of source SGSN IE shall be included when PS HO is not performed.
Otherwise, it shall not be included.
5\. MSC Server enhanced for rSRVCC synchronizes the PS and CS handover
procedure, i.e. if Forward Relocation Request arrives first, then MSC Server
enhanced for rSRVCC waits for the message for CS handover, if the message for
CS handover arrives first, then MSC Server enhanced for rSRVCC waits for the
Forward Relocation Request message if index of source SGSN IE is not included.
MSC Server enhanced for rSRVCC sends CS to PS HO Request (IMSI, source SGSN
Info, Connection Info of UE, Connection Info of remote, Codec, Non-voice
Bearers Context, target ID, Source to Target transparent container, Emergency
Indication) message to target MME/SGSN.
The Non-voice Bearers Context IE is included only when PS-PS HO is performed.
The Source SGSN Info IE shall be included when PS-PS HO is not performed. The
target ID is understandable by target access network. The Codec can be used by
the target MME/SGSN to determine the QoS of the voice bearer.
6\. If PS-PS HO is not performed, the target MME/SGSN retrieves PDP context
from Source SGSN as described in TS 23.401 [5].
7\. Target MME/SGSN sends Bearer Resource Command to initiate the bearer setup
procedure.
8\. Target MME/SGSN allocates resources in UTRAN/E-UTRAN.
9\. Target MME/SGSN sends CS to PS HO Response message to the MSC Server
enhanced for rSRVCC.
10\. The MSC Server enhanced for rSRVCC complete the handover preparation
procedures.
NOTE 2: The ATGW can for a certain period of time send media both on the
source access leg and the new target access leg to minimize the interruption
delay further.
11\. Source GERAN/UTRAN sends Handover Command message to UE, indicating CS to
PS handover. This may include additional information such as the IP
address/port the UE shall send the media to, and codec used.
NOTE 3: After completion of CS to PS handover, the UE can start sending and
receiving voice using the PS voice bearer.
#### 6.5.3.9 Failure to complete CS-PS Access Transfer
In case of failure before MSC Server initiates IMS Service Continuity
procedure, there is no difference to TS 23.060 [6].
In case of failure after UE receives HO command or in case of handover
cancellation, the MSC Server enhanced for rSRVCC will receive information from
source access, the MSC Server enhanced for rSRVCC shall send an Access
Transfer Cancel message to the ATCF, e.g. by sending a SIP CANCEL request. If
the ATCF has sent an Access Transfer Update, the ATCF shall re-establish the
source media path, e.g. using 3PCC procedure, and send an Access Transfer
Failure message to the SCC AS, e.g. by sending a SIP BYE request with
indication that the access transfer is fail. After receiving the Access
Transfer Failure message, the SCC AS shall not release the source access leg.
# 7 Assessment of the solutions
## 7.1 Assessment Criteria
The criteria include:
\- Voice interruption not exceeding 300ms, in roaming and non-roaming
scenarios;
\- Minimal impacts on the networks;
\- Additional network resource consumption in UE/IMS;
\- Call set up delay due to rSRVCC.
## 7.2 Assessment of the solution 3+5 access transfer preparation alternatives
The following table summarizes the impacts on the different nodes of the
existing alternatives for the access transfer preparation in solution 3+5
(\"Media anchoring in serving network with Access Transfer Control
Functionality\").
+---------+---------+---------+---------+---------+---------+---------+ | Node | UE | MSC | SGSN / | ATCF / | SGW / | PCRF | | impacts | | | MME | P-CSCF | PGW | | | of the | | | | | | | | voice | | | | | | | | bearer | | | | | | | | establ | | | | | | | | ishment | | | | | | | | pr | | | | | | | | ocedure | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Alte | 1- | 1- | 1- | ** | 1- SGW | 1- | | rnative | I | Receive | Receive | ATCF:**| / PGW: | Trigger | | 1 | ndicate | rSRVCC | rSRVCC | | pass | voice | | | the | HO | HO | 1- | the | bearer | | | preal | r | request | Store | rSRVCC | establi | | | located | equest. | from | UE | ind | shment, | | | ports | | MSC | ports & | ication | in | | | and | 2- Send | (and | codec | t | cluding | | | codecs | rSRVCC | p | info. | hrough. | ind | | | in the | HO | ossibly | | | ication | | | Regis | request | from | 2- | 2- SGW | that | | | tration | to | RAN). | Receive | impact | this is | | | pro | source | | message | for | for | | | cedure. | SG | 2- Wait | from | ISR: if | rSRVCC. | | | | SN/MME. | for | MSC and | no S1-U | | | | 2- | | Create | relay | exists | 2- | | | Receive | 3- Send | Bearer | it to | when | Co | | | the | voice | Request | P-CSCF | the SGW | rrelate | | | voice | bearer | or | ind | r | the | | | bearer | setup | D | icating | eceives | service | | | info | request | ownlink | that | the | con | | | and the | to | Data | this is | Create | tinuity | | | codec | ATCF. | Notif | for | Bearer | request | | | info in | | ication | rSRVCC. | Request | from | | | the | 4- | with | | for | the UE | | | H | Receive | rSRVCC | **If | rSRVCC, | with | | | andover | HO | ind | P-CSCF | send a | the | | | command | r | ication | not | D | voice | | | from | esponse | from | col | ownlink | bearer | | | the | from | SGW. | located | Data | already | | | MSC, | source | | with | Notif | estab | | | and set | SG | 3- | ATCF:**| ication | lished. | | | up the | SN/MME. | Trigger | | ind | | | | PS | | relo | 1- | icating | | | | bearer | 5- Send | cation. | Receive | this is | | | | as a | HO | | message | for | | | | result | Command | 4- Send | from | rSRVCC. | | | | of that | in | rSRVCC | ATCF | | | | | m | cluding | HO | and | | | | | essage. | the | r | trigger | | | | | | voice | esponse | voice | | | | | 3- | b | to MSC, | bearer | | | | | Start | earer/s | in | setup | | | | | using | elected | cluding | towards | | | | | the | codec | voice | PCRF | | | | | voice | to UE. | bearer | ind | | | | | bearer | | infor | icating | | | | | right | 6- Send | mation. | that | | | | | after | switch | | this is | | | | | the | media | | for | | | | | rSRVCC | ind | | rSRVCC. | | | | | ha | ication | | | | | | | ndover. | to | | | | | | | | ATCF. | | | | | | | 4- | | | | | | | | Trigger | | | | | | | | service | | | | | | | | con | | | | | | | | tinuity | | | | | | | | pr | | | | | | | | ocedure | | | | | | | | once on | | | | | | | | E | | | | | | | | -UTRAN. | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Alte | 1- | 1- | 1- | - | - | 1- | | rnative | I | Store | Receive | | | Co | | 2 | ndicate | UE | rSRVCC | | | rrelate | | | the | ports | HO | | | the | | | preal | and | request | | | service | | | located | codec | from | | | con | | | ports | info. | MSC | | | tinuity | | | and | | (and | | | request | | | codecs | 2- | p | | | from | | | in the | Receive | ossibly | | | the UE | | | Regis | rSRVCC | from | | | with | | | tration | HO | RAN). | | | the | | | pro | r | | | | voice | | | cedure. | equest. | 2- | | | bearer | | | | | Trigger | | | already | | | 2- | 3- Send | Voice | | | estab | | | Receive | rSRVCC | bearer | | | lished. | | | the | HO | setup | | | | | | voice | request | towards | | | | | | bearer | to | SGW | | | | | | info | S | based | | | | | | and the | GSN/MME | on the | | | | | | codec | in | local & | | | | | | info in | cluding | remote | | | | | | the | info | port | | | | | | H | re | s/codec | | | | | | andover | garding | r | | | | | | command | the | eceived | | | | | | from | local & | from | | | | | | the | remote | MSC. | | | | | | MSC, | port | | | | | | | and set | s/codec | 3- | | | | | | up the | to be | Trigger | | | | | | PS | used. | relo | | | | | | bearer | | cation. | | | | | | as a | 4- | | | | | | | result | Receive | 4- Send | | | | | | of that | HO | rSRVCC | | | | | | m | r | HO | | | | | | essage. | esponse | r | | | | | | | from | esponse | | | | | | 3- | SG | to MSC, | | | | | | Start | SN/MME. | in | | | | | | using | | cluding | | | | | | the | 5- Send | voice | | | | | | voice | HO | bearer | | | | | | bearer | Command | info | | | | | | right | in | rmation | | | | | | after | cluding | | | | | | | the | the | | | | | | | rSRVCC | voice | | | | | | | ha | b | | | | | | | ndover. | earer/s | | | | | | | | elected | | | | | | | 4- | codec | | | | | | | Trigger | to the | | | | | | | service | UE. | | | | | | | con | | | | | | | | tinuity | 6- Send | | | | | | | pr | switch | | | | | | | ocedure | media | | | | | | | once on | ind | | | | | | | E | ication | | | | | | | -UTRAN. | to | | | | | | | | ATCF. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Alte | 1- | 1- | * | ** | 1- | 1- | | rnative | Trigger | Receive | *Source | ATCF:** | Receive | Trigger | | 3 | the | rSRVCC | side:**| | an | voice | | | pre | HO | | 1- | ind | bearer | | | -establ | r | 1- | Receive | ication | establi | | | ishment | equest. | Accept | message | from | shment, | | | of the | | Create | from UE | the | in | | | voice | 2- Send | Bearer | and | PCRF to | cluding | | | bearer | rSRVCC | Request | relay | setup a | ind | | | after | HO | from | it to | su | ication | | | IMS | request | SGW for | P-CSCF | spended | that | | | regis | to | the | ind | voice | this is | | | tration | source | voice | icating | bearer | for | | | or | SG | bearer | to set | (while | rSRVCC. | | | after | SN/MME. | without | up a | other | | | | rSRVCC | | all | voice | PS | 2- | | | ha | 3- | ocating | bearer | bearers | Co | | | ndover. | Receive | radio | for | are not | rrelate | | | | HO | re | rSRVCC. | susp | the | | | 2- | r | sources | | ended). | service | | | Receive | esponse | for it. |** If | | con | | | the | from | | P-CSCF | 2- Deal | tinuity | | | voice | source | 2- Deal | not | with a | request | | | bearer | SG | with | col | new | from | | | info | SN/MME. | m | located | in | the UE | | | and the | | obility | with | dicator | with | | | codec | 4- Send | with | ATCF:**| about | the | | | info in | HO | the | | the | voice | | | the | Command | su | 2- | status | bearer | | | H | in | spended | Receive | of a | already | | | andover | cluding | voice | message | bearer | estab | | | command | the | bearer. | from | -- | lished. | | | from | voice | | ATCF | whether | | | | the | bearer | 3- | and | it | | | | MSC, | to UE. | Receive | trigger | should | | | | and set | | rSRVCC | voice | be in | | | | up the | 5- Send | HO | bearer | active | | | | PS | switch | request | setup | or | | | | bearer | media | from | towards | su | | | | as a | ind | MSC | PCRF | spended | | | | result | ication | (and | ind | status | | | | of that | to | p | icating | at | | | | m | ATCF. | ossibly | that | Modify | | | | essage. | | from | this is | Bearer | | | | | | RAN). | for | R | | | | 3- | | | rSRVCC. | equest. | | | | Start | | 4- | | | | | | using | | Trigger | | | | | | the | | relo | | | | | | voice | | cation. | | | | | | bearer | | | | | | | | right | | 5- Send | | | | | | after | | rSRVCC | | | | | | the | | HO | | | | | | rSRVCC | | r | | | | | | ha | | esponse | | | | | | ndover. | | to MSC, | | | | | | | | in | | | | | | 4- | | cluding | | | | | | Trigger | | voice | | | | | | service | | bearer | | | | | | con | | infor | | | | | | tinuity | | mation. | | | | | | pr | | | | | | | | ocedure | | * | | | | | | once on | | *Target | | | | | | E | | side:** | | | | | | -UTRAN. | | | | | | | | | | 1- | | | | | | | | Receive | | | | | | | | a | | | | | | | | rel | | | | | | | | ocation | | | | | | | | request | | | | | | | | ind | | | | | | | | icating | | | | | | | | that | | | | | | | | the | | | | | | | | su | | | | | | | | spended | | | | | | | | voice | | | | | | | | bearer | | | | | | | | shall | | | | | | | | become | | | | | | | | active. | | | | | | | | | | | | | | | | 2- | | | | | | | | A | | | | | | | | ctivate | | | | | | | | the | | | | | | | | voice | | | | | | | | bearer | | | | | | | | at | | | | | | | | suc | | | | | | | | cessful | | | | | | | | SRVCC. | | | | +---------+---------+---------+---------+---------+---------+---------+ | Alte | 1- | 1- | * | ** | TBC | TBC | | rnative | Trigger | Receive | _Target | ATCF:__| | | | 4 | the | rSRVCC | side:__| | | | | | pre | HO | | 1- | | | | | -establ | r | 1- | Receive | | | | | ishment | equest. | Coo | message | | | | | of the | | rdinate | from UE | | | | | non GBR | 2- Send | the PS | and | | | | | bearer | rSRVCC | h | relay | | | | | to be | HO | andover | it to | | | | | used | request | request | P-CSCF | | | | | temp | to | from | ind | | | | | orarily | target | source | icating | | | | | for | SG | SGSN or | to set | | | | | voice | SN/MME. | with CS | up a | | | | | after | | to PS | voice | | | | | IMS | 3- | h | bearer | | | | | regist | Receive | andover | for | | | | | ration. | HO | request | rSRVCC. | | | | | | r | from | | | | | | 2- | esponse | MSC. |__If | | | | | Start | from | | P-CSCF | | | | | using | target | | not | | | | | the | SG | | col | | | | | QCI-7 | SN/MME. | | located | | | | | bearer | | | with | | | | | right | 4- Send | | ATCF:_ * | | | | | after | switch | | | | | | | the | media | | 2- | | | | | rSRVCC | ind | | Receive | | | | | ha | ication | | message | | | | | ndover. | to | | from | | | | | | ATCF. | | ATCF | | | | | 3- | | | and | | | | | Trigger | | | trigger | | | | | service | | | voice | | | | | con | | | bearer | | | | | tinuity | | | setup | | | | | pr | | | towards | | | | | ocedure | | | PCRF | | | | | once on | | | ind | | | | | the | | | icating | | | | | target | | | that | | | | | access. | | | this is | | | | | | | | for | | | | | 4- | | | rSRVCC. | | | | | Switch | | | | | | | | to | | | | | | | | using | | | | | | | | the | | | | | | | | QCI-1 | | | | | | | | bearer | | | | | | | | for | | | | | | | | voice | | | | | | | | when it | | | | | | | | has | | | | | | | | been | | | | | | | | estab | | | | | | | | lished. | | | | | | +---------+---------+---------+---------+---------+---------+---------+
Based on that summary, the following benefits/drawbacks of the different
solutions can be listed:
+-----------+-------------+-------------+-------------+-------------+ | | Alternative | Alternative | Alternative | Alternative | | | #1 | #2 | #3 | #4 | +-----------+-------------+-------------+-------------+-------------+ | Benefits | - Does not | - Does not | - Does not | - Only MME | | | require | require | prolong the | in areas | | | resource | resource | handover | where | | | allocation | allocation | procedure. | rSRVCC can | | | prior to an | prior to an | | take place | | | rSRVCC | rSRVCC | | need to be | | | handover. | handover. | | enhanced. | | | | | | | | | - Only the | - Only the | | - Does not | | | SGSNs (and | SGSNs (and | | prolong the | | | MMEs in | MMEs in | | handover | | | case of | case of | | procedure. | | | GERAN with | GERAN with | | | | | no DTM | no DTM | | | | | support) in | support) in | | | | | areas where | areas where | | | | | rSRVCC can | rSRVCC can | | | | | take place | take place | | | | | need to be | need to be | | | | | enhanced. | enhanced. | | | | | | | | | | | - Avoids | - Avoids | | | | | the need | the need | | | | | for | for | | | | | transcoding | transcoding | | | | | after | after | | | | | rSRVCC. | rSRVCC. | | | +-----------+-------------+-------------+-------------+-------------+ | Drawbacks | - Prolongs | - Prolongs | - Requires | - Requires | | | the | the | resource | resource | | | handover | handover | allocation | allocation | | | procedure. | procedure. | for each | for each | | | | | rSRVCC | rSRVCC | | | - Has | - SGSN | capable UE | capable UE | | | ATCF/P-CSCF | impact: the | even in the | even in the | | | impacts. | SGSN needs | case when | case when | | | | to decide | no rSRVCC | no rSRVCC | | | - Has SGW | how to map | will ever | will ever | | | impact. | the | take place. | take place. | | | | codec/port | | | | | | information | - Requires | - As the | | | | received | that all | codec is | | | | from the | MME/SGSN be | selected | | | | MSC to TAD | enhanced to | long before | | | | and | support the | the rSRVCC | | | | requested | pre-es | handover, | | | | QoS. | tablishment | the | | | | | of the | likelihood | | | | | voice | that | | | | | bearer | transcoding | | | | | without | is required | | | | | allocating | (at least | | | | | radio | t | | | | | resources | emporarily) | | | | | for it. | after | | | | | | rSRVCC | | | | | - Has | handover is | | | | | ATCF/P-CSCF | high. | | | | | impacts. | | | | | | | - Unclear | | | | | - PGW/SGW | how much | | | | | impact: | improvement | | | | | requires | the use of | | | | | from the | a non GBR | | | | | PGW/SGW | bearer for | | | | | that they | t | | | | | are able to | ransporting | | | | | deal with | voice | | | | | one | together | | | | | suspended | with | | | | | bearer | transcoding | | | | | while other | (in most | | | | | no | cases) will | | | | | n-suspended | bring | | | | | bearers | compared to | | | | | exist. | a voice | | | | | | break. | | | | | - Has an | | | | | | impact on | - MME | | | | | the | impact: | | | | | existing | requires | | | | | mobility | that the | | | | | procedures | MME | | | | | (including | coordinates | | | | | SRVCC): | the PS | | | | | requires | handover | | | | | from the | request | | | | | MME/SGSN | from source | | | | | that they | SGSN or | | | | | are able to | with CS to | | | | | deal with | PS handover | | | | | the | request | | | | | suspended | from MSC | | | | | bearer in | | | | | | the | | | | | | mobility | | | | | | procedures. | | | | | | | | | | | | - As the | | | | | | codec is | | | | | | selected | | | | | | long before | | | | | | the rSRVCC | | | | | | handover, | | | | | | the | | | | | | likelihood | | | | | | that | | | | | | transcoding | | | | | | is required | | | | | | (at least | | | | | | t | | | | | | emporarily) | | | | | | after | | | | | | rSRVCC | | | | | | handover is | | | | | | high. | | +-----------+-------------+-------------+-------------+-------------+
# 8 Conclusion
## 8.1 General
As an intermediate conclusion, it was agreed at SA WG2#81, to pursue a
combination of the current solutions 3 and 5 as a way forward (see clause
6.3).
All MSC Servers where rSRVCC is supported need to be enhanced for rSRVCC.
## 8.2 Access Transfer preparation / How to reserve bearer for VoIP
As an intermediate conclusion, it was agreed at SA WG2#84, to pursue
alternatives 1 and 2 (clauses 6.3.3.7.1 and 6.3.3.7.2), that minimize resource
consumption in the network compared to solutions 3 and 4 (clauses 6.3.3.7.3
and 6.3.3.7.4) which minimize handover preparation time.
As a final conclusion, it was agreed at SA WG2#86, to select Alternative 5 (
clause 6.3.3.7.5) as the recommended solution for Access Transfer preparation.
## 8.3 Source SGSN selection by MSC Server
The Alternative 1 \"CN nodes based\" documented in clause 6.3.3.9.1 is not
further considered.
The Alternative 2 \"UE and/or RAN provided information\" documented in clause
6.3.3.9.2 is selected.
## 8.4 Maintaining IMS registration over PS access during the CS session
Solution 1 (\"ATCF controlled registration\") and solution 2 (\"SCC AS
controlled registration\") permit to always allow for rSRVCC to take place
while the UE is under GERAN without DTM support but have quite large impacts
on the network/the UE.
Due to the fact that the situation in which the IMS registration would expire
during the CS session is expected to occur pretty rarely, it was decided at
SA2 #84 to rather pursue a solution that does not maintain IMS registration
but allows to handle gracefully the situations in which the IMS registration
has expired.
## 8.5 Summary
The combination of clause 5 and of the following sub-clauses represents a full
solution for Single Radio Voice Call Continuity (SRVCC) from UTRAN/GERAN to
E-UTRAN/HSPA, which is recommended for standardization:
\- Architecture Reference Model: clause 6.3.1;
\- Functional Entities: clause 6.3.2;
\- Message flows:
\- clauses 6.3.3.1 to 6.3.3.6,
\- clause 6.3.3.7.5,
\- clause 6.3.3.8,
\- clause 6.3.3.9.2;
\- IMS registration Considerations: clauses 6.3.4.1 and 6.3.4.4.
###### ### Annex A: Mechanisms to re-enable E-UTRAN capability
# A.1 Functional description
In Rel‑8 and Rel‑9 the UE disables its E-UTRAN capability as a result of voice
domain selection when the UE selects 2G/3G as defined in TS 23.221 [9] and TS
24.301 [10], for example when it passes between TAs that do not support the
appropriate voice mechanism i.e. when the UE is IMS VoIP capable and some TAs
in E-UTRAN do not support IMS VoIP.
If the UE has disabled its E-UTRAN capability and the SGSN has not informed
the UE to re-enable its E-UTRAN capability, then the UTRAN/GERAN does not
provide E-UTRAN neighbour cell list to the UE, hence it is impossible for this
UE to perform reverse SRVCC handover if it is needed.
Therefore a mechanism is required by the SGSN to signal to the UE to re-enable
its E-UTRAN capability when there are adjacent TAs that may provide the
appropriate voice mechanism for the UE (in this case IMS VoIP) for the reverse
SRVCC mechanism to function.
Three possible mechanisms are envisaged as part of this study:
Alt. A) broadcast bit in the UTRAN/GERAN network to indicate that there are
adjacent E-UTRAN cells that would drive the UE to re-enable its E-UTRAN
capability and signal this to the network with a RAU
Alt. B) indicator in the RAU-Accept message to indicate to the UE to re-enable
its E-UTRAN capability if there are adjacent E-UTRAN TAs that support IMS
VoIP.
Alt. C) the UE that supports rSRVCC does not need to disable its E-UTRAN
capability even when it passes from TAs that do not support IMS VoIP. The SGSN
is statically configured to manipulate the RFSP or the UEs Radio Access
Capability (RAC) of the UE based on statically configured information
regarding the support of IMS VoIP of the adjacent MME TAs.
# A.2 Information flows
## A.2.1 Proposed signalling flow for Alternative A to re-enable E‑UTRAN
capabilities using broadcast indicator
Figure A-1: Alternative A to re-enable E-UTRAN capabilities using Broadcast
indicator in GERAN/UTRAN
1\. The UE while performing TAU receives \"IMS Voice over PS supported
Indicator\" indicating that voice is not supported in the TA, the UE following
procedures described in TS 23.221 [9] and TS 24.301 [10] disables its E-UTRAN
capability,
2\. The UE reselects to GERAN/UTRAN and disables its E-UTRAN capability.
3\. The UE continues be attached to GERAN/UTRAN reading system information as
per the normal procedures while performing mobility in GPRS.
4-5. When the UE moves to cell that indicates that there are adjacent E-UTRAN
cells that support IMS VoIP triggers the UE to re-enable its E-UTRAN
capability. At this stage even if the UE goes to active mode and initiate a CS
voice call in GERAN/UTRAN given that the UE has signalled its E-UTRAN
capability and is able to see adjacent E-UTRAN, the RNC/BSC is able to
handover the UE to E-UTRAN using reverse SRVCC procedures.
6\. Given that the UE is able to see E-UTRAN cells, following the normal
procedures the UE is able to camp to E‑UTRAN cell and performs TAU to the MME
that supports IMS VoIP, hence initiate IMS VoIP calls.
## A.2.2 Proposed signalling flow for Alternative B to re-enable E‑UTRAN
capabilities using NAS indicator
Figure A-2: Alternative B to re-enable E-UTRAN capabilities using NAS
indicator
1\. The UE while performing TAU receives \"IMS Voice over PS supported
Indicator\" indicating that voice is not supported in the TA, the UE following
procedures described in TS 23.221 [9] and TS 24.301 [10] disables its E-UTRAN
capability,
2\. The UE reselects to GERAN/UTRAN and disables its E-UTRAN capability.
3\. The UE continues be attached to GERAN/UTRAN and perform mobility in GPRS.
4-5. When the UE moves to an SGSN that knows that the MME serving TAs adjacent
to the RA where the UE is currently attached supports IMS VoIP it signals to
the UE to re-enable its E-UTRAN capability. At this stage even if the UE goes
to active mode and initiate a CS voice call in GERAN/UTRAN given that the UE
has signalled its E-UTRAN capability and is able to see adjacent E-UTRAN, the
RNC/BSC is able to handover the UE to E-UTRAN using reverse SRVCC procedures.
6\. Given that the UE is able to see E-UTRAN cells, following the normal
procedures the UE is able to camp to E‑UTRAN cell and performs TAU to the MME
that supports IMS VoIP, hence initiate IMS VoIP calls.
## A.2.3 Proposed signalling flow for Alternative C to re-enable E-UTRAN
capabilities using change in RFSP/RAC of the UE
Figure A-3: Alternative B to re-enable E-UTRAN capabilities using changes in
RFSP/RAC of the UE
1\. The UE while performing TAU receives \"IMS Voice over PS supported
Indicator\" indicating that voice is not supported in the TA, the UE given is
rSRVCC capable does not follow procedures described in TS 23.221 [9] and TS
24.301 [10] does not disables its E-UTRAN capability. Rather the MME changes
the RFSP or manipulates the RAC of the UE making the eNodeB to change the idle
mode priority list, prioritising GERAN/UTRAN instead of E-UTRAN.
2\. The UE reselects to GERAN/UTRAN.
3\. The UE continues be attached to GERAN/UTRAN and perform mobility in GPRS.
4-5. When the UE moves to an SGSN that knows that the MME serving TAs adjacent
to the RA where the UE is currently attached supports IMS VoIP it signals to
the NodeB/BSC a new RFSP or changes the RAC of the UE in order to change the
idle mode priority list of the UE. At this stage even if the UE goes to active
mode and initiate a CS voice call in GERAN/UTRAN is able to see adjacent
E-UTRAN, the RNC/BSC is able to handover the UE to E-UTRAN using reverse SRVCC
procedures.
6\. Given that the UE is able to see E-UTRAN cells, following the normal
procedures the UE is able to camp to E-UTRAN cell and performs TAU to the MME
that supports IMS VoIP, hence initiate IMS VoIP calls.
###### ### Annex B: Mechanisms for GERAN/UTRAN sending Handover/Relocation
Required message
When GERAN/UTRAN decides to initiate handover procedure for the rSRVCC capable
UE with CS session(s) to a VoIP-capable cell, it shall use a target ID in the
Handover/Relocation Required message for CS handover that the message will be
forwarded to a MSC Server enhanced for rSRVCC by intermediate node of the
source access network. The target ID for CS handover and PS handover shall
contain, but does not need to be the same:
\- LAI or RAI. The LAI/RAI shall identify the target MME/SGSN (HSPA) and the
LAI/RAI in routing table of CS core network points to a MSC Server enhanced
for rSRVCC;
NOTE 1: The LAI/RAI can be treated as the rSRVCC indication.
\- Index of eNB ID or RNC ID. The index of eNB ID or RNC ID in the target ID
maybe related to the target MME/SGSN (HSPA);
\- Index of selected TAI if target access is E-UTRAN. The index of selected
TAI maybe related to the target eNB.
NOTE 2: Considering only the border cell need to be configured as this way,
the table of mapping the target ID to a real target ID understandable in
target access network will not be a big table.
The GERAN/UTRAN shall use a target ID in the Relocation Required message for
PS handover that messages for both CS handover and PS handover will be
forwarded to the same MSC Server enhanced for rSRVCC by intermediate node of
the source access network. The target ID for CS handover shall also contain
index of source SGSN that related to the source MSC if PS-PS HO is not
performed.
An example format of the target ID according to TS 25.413 [12] is LAI \+ RAC
(8 bits) + Extended RNC-ID (16 bits), and the most significant 4 bits of the
Extended RNC-ID is the index of source SGSN, the rest 20 bits contains index
of eNB ID, and index of selected TAI.
#