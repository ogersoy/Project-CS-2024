# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This study focuses on the enhancement of IMS to support Peer-to-Peer Content
Distribution Services in respect of GPRS, EPC and other underlying access
network technologies but not intend to modify GPRS or EPC for P2P mechanism.
The objectives are to study IMS based Peer-to-Peer Content Distribution
Services on the architectural level with the following aspects:
> \- Creating solutions in order to fulfil the use cases and requirements as
> defined by SA1 while avoiding duplicate work in other SDOs, such as IETF
> [e.g., PPSP, P2PSIP, ALTO, and DECADE], and re-using their work. The
> solutions should:
>
> \- Apply the same IMS user management/registration procedure as other IMS
> services;
>
> \- Be able to provide the UE with the appropriate AS to obtain the addresses
> of other Peers, from which the UE can retrieve the requested content;
>
> \- Re-use ISC interface for service triggering;
>
> \- Be able to select qualified User Peers among available UEs according to
> the policies preconfigured in the network:
>
> \- Elaborate alternative solutions, which support the following network
> access technologies:
>
> \- Mobile access only (e.g. UTRAN, E-UTRAN, I-WLAN);
>
> \- Fixed access only (e.g. xDSL, LAN);
>
> \- Fixed and mobile convergence scenarios.
>
> \- Evaluate possible impacts and improvements on network when IMS based
> Peer-to-Peer Content Distribution Services are deployed, such as the
> interactions that are needed to adapt the peer-to-peer overlay properties to
> the configuration and the resources of the network.
>
> \- Identify QoS, mobility, charging and security related requirements in the
> case of Peer-to-Peer Content Distribution Services on IMS.
The assessment on alternative solutions and the final conclusion of this study
should not only take TR 22.906 into consideration but also comply with the
related normative work in SA1.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 22.906: \"Study on IMS based peer-to-peer content distribution
services\".
[3] draft-ietf-ppsp-reqs-02 (February 2011): \"P2P Streaming Protocol (PPSP)
Requirements\"
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[4] draft-ietf-alto-protocol-09 (June 2011): \"ALTO Protocol\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
[5] 3GPP TS 23.203: \"Policy and charging control architecture\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [x] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[x].
**P2P:** Peer-to-Peer, as defined in TR 22.906 [2].
**Tracker:** A directory server which maintains a list of peers storing
segments for a specific content, and answers queries from peers for peer
lists.
**User Peer:** As defined in TR 22.906 [2].
**Network Peer:** As defined in TR 22.906 [2].
**Content Source Server:** As defined in TR 22.906 [2].
**Content Cache Server:** As defined in TR 22.906 [2].
**Content Delivery Network:** Is the network for content distribution
services.
**DRM Server:** The entity which manages the digital rights of digital
contents to be shared within the Content Delivery Network.
**Origin Server:** Stores the original content resources.
**Edge Server:** Is the content server located on the edge of a CDN for
content delivery.
**CDN Controller:** Is responsible for allocating of content resources from
the Origin Server to the Edge Servers as well as for allocating of a
neighbouring Edge Server to the CDN.
**Bitmap:** Describes which parts of the content are stored in a User Peer or
Network Peer.
**Swarm:** A swarm refers to a group of clients (i.e., Peers) who exchange
data to distribute the same content (e.g. video/audio program, digital file,
etc) at a given time.
**Cost Map:** Defines Path Costs amongst sets of source and destination
Network Locations. Path Costs are generic costs and can be internally computed
by a network provider according to its own needs.
**Network Map:** Is the resulting set of endpoints which are grouped together
according to the Network Location endpoint property to indicate their
proximity.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[x] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [x].
IMS P2P CDS IMS based P2P Content Distribution Services
CDN Content Delivery Network
CSS Content Source Server
CCS Content Cache Server
DRM Digital Right Management
# 4 Use cases
The use cases of the IMS P2P CDS are described in section 5 of TR 22.906.
# 5 Architectural requirements
Editor's Note: This clause will identify the architectural requirements.
## 5.1 Assumptions for the IMS P2P CDS
\- This document only considers large data volume services like content on
demand, video streaming, etc. It does not consider voice services.
## 5.2 Requirements for the IMS P2P CDS
\- The system shall support a mechanism to provide address information for
accessing an IMS based P2P content distribution service for an IMS P2P CDS UE.
\- The system shall support a mechanism to provide to User Peers an optimal
selection of User Peers and Network Peers for obtaining requested media
content from, based upon metrics including:
\- access type such as UTRAN, E-UTRAN, I-WLAN, xDSL and LAN.
\- offloading capability.
\- traffic conditions such as traffic congestion in the radio access network
and carrier network, assigned uplink/downlink bandwidth of User Peer and
Network Peer.
Editor's Note: What traffic condition information consists of is FFS.
\- path cost information (e.g. least hop routing).
\- location information such as proximity of peers, peer IP addresses
(including IPv4 and/or IPv6 types), and peer identities.
\- capabilities and workload of the IMS P2P CDS UE such as cache volume,
current battery left and number of P2P clients being served by it.
NOTE: The above lists of parameters used for optimal peer selection are not
definitive and can include other metrics upon which optimal lists of peers can
be generated.
\- The system shall provide QoS for IMS P2P CDS.
\- The IMS P2P CDS sessions shall minimize the negative impact on QoS for
ongoing sessions to the same UE and shall minimize the negative impact on QoS
for the operator network.
\- The system shall support a content delivery function to distribute contents
or content segments from the Content Source Server to the Content Cache
Servers.
\- The system shall support an interworking mechanism, which is able to
utilize an enhanced existing CDN, to distribute contents or content segments
from the Content Source Server/Origin Server to the Content Cache Servers/Edge
Servers.
\- The system shall provide a mechanism to guarantee the copyright protected
digital contents to be shared among the IMS P2P CDS users in a legal way.
# 6 Alternative Solutions
Editor's Note: This clause will describe the solution(s) for IMS based peer-
to-peer content distribution services.
## 6.1 Alternate 1 -- Signalling between User Peer and other Peers not
traversing IMS core
Editor's Note: It is proposed to include in each alternative at least the
description of architecture, reference point and necessary information flows.
The description of service instances is optional but preferred.
### 6.1.0 General
All signalling messages between User Peer and Tracker go through IMS core.
Signalling (e.g. for bitmap fetching) between User Peer and Network Peer does
not go through IMS core.
### 6.1.1 Architecture Reference Model
Figure 6.1.1-1: Overview of the IMS P2P CDS architecture for alternative 1
Editor's Note: In this architecture, P-CSCF shall act as AF of the PCC model.
Whether Tracker AS should be involved in CDS control is FFS.
Editor's Note: The specific QoS mechanism should be considered based on the
CDS procedure, which is FFS.
### 6.1.2 Functional Entities
P-CSCF, I-CSCF, S-CSCF and HSS are already defined in TS 23.228.
PCRF is already defined in TS 23.203 [5].
Newly introduced network entities include CCS, CSS and Tracker AS.
The UE should support the functionality of User Peer if it is used to provide
IMS P2P CDS applications to the user.
#### 6.1.2.1 Content Source Server (CSS)
The CSS provides content resources and executes segmenting of content
resources. It may also execute content encoding and transcoding.
#### 6.1.2.2 Content Cache Server (CCS)
CCS caches the content and/or content segments, and provides them to the IMS
P2P CDS UEs under the direction of Tracker AS.
#### 6.1.2.3 Tracker AS
The Tracker AS is an IMS AS that also executes the functionality of Tracker.
The functions include:
\- Records a Peer list and updates it according to the activity of User Peers
and Network Peers.
\- Records and maintains the index of contents/content segments and where the
contents/contents segments are cached.
\- Feedbacks Peer list when queried by an IMS P2P CDS UE.
\- The information attached to each Peer ID in the Peer list should include
e.g. the access type, traffic conditions, location, capabilities and workload
of that Peer.
\- Directs the procedure of pre-distribution of contents/contents segments
from the CSS to the CCSs.
Editor's Note: Whether the Tracker AS should be involved in QoS control for
IMS P2P CDS and how this works is FFS.
Editor's Note: Whether the existing IMS entities, such as P-CSCF, should be
upgraded to monitor and control the P2P information transferred to the Tracker
AS is FFS.
### 6.1.3 Interfaces
#### 6.1.3.1 Gm, Mw, ISC
These interfaces are SIP interfaces with the functionality as defined in TS
23.228.
For IMS P2P CDS, these interfaces are also used as follows:
\- The IMS P2P CDS UE sends a Content ID to the Tracker AS for fetching a Peer
list through these interfaces.
\- The Tracker AS collects a set of information from the IMS P2P CDS UE
through this interface, such as the index of contents/content segments cached
in that IMS P2P CDS UE, the access type, traffic conditions, location,
capabilities and workload of that IMS P2P CDS UE.
#### 6.1.3.2 PP_s1
PP_s1 is an interface between the IMS P2P CDS UE and the CCS mainly for bitmap
exchange.
#### 6.1.3.3 PP_m1
PP_m1 is an interface between the IMS P2P CDS UE and the CCS for media data
transfer.
#### 6.1.3.4 PP_s2
PP_s2 is an interface between the IMS P2P CDS UE and another IMS P2P CDS UE,
which acts as a User Peer, mainly for bitmap exchange.
#### 6.1.3.5 PP_m2
PP_m2 is an interface between the IMS P2P CDS UE and another IMS P2P CDS UE
media data transfer.
#### 6.1.3.6 Tc
Tc is an interface between the Tracker AS and the CCS. The Tracker AS collects
a set of information from the CCS through this interface, such as the index of
contents/content segments cached in that CCS, the location, workload, and
aggregated bandwidth of that CCS.
#### 6.1.3.7 Ts
Ts is an interface between the Tracker AS and the CSS. The CSS registers the
content source to the Tracker AS for creating corresponding swarms. The
Tracker AS instructs the CSS to distribute contents/content segments to the
CCSs.
#### 6.1.3.8 SC_s
SC_s is an interface between the CCS and the CSS mainly for message exchange
for content acquisition.
#### 6.1.3.9 SC_m
SC_m is an interface between the CCS and the CSS mainly for media
transmission.
#### 6.1.3.10 Rx
The Rx reference point resides between AF and PCRF. It enables transport of
application level session information from AF to PCRF.
The functions of Rx reference point conform to TS 23.203 [5].
### 6.1.4 Message flows
#### 6.1.4.1 IMS P2P CDS UE registration procedure
This procedure is a normal registration procedure as already defined in TS
23.228.
Editor's Note: What kind of information should be transferred to the Tracker
AS through this procedure is FFS. This information may include e.g. the access
type, traffic conditions, location, capabilities and workload of that IMS P2P
CDS UE.
#### 6.1.4.2 Content Distribution Procedure
##### 6.1.4.2.1 Content Delivery Establishment Procedure
Figure 6.1.4.2.1-1: Delivery Establishment Procedure for alternative 1
1\~2 After the user chooses a content, e.g. from a Web portal maintained by
the IMS P2P CDS system, a Content ID is assigned and then sent from the IMS
P2P CDS UE to the Tracker AS carried by an INTIVTE message, through IMS
entities, e.g. P-CSCF, S-CSCF. Tracker AS replies 200 OK if the IMS P2P UE is
allowed to receive P2P service.
Editor's Note: The feasibility of using INVITE to carry Content ID for Peer
list request is FFS.
Editor's Note: The usage of the ISC interface in the above procedure needs
further discussion.
Editor's Note: The mechanism for the IMS core to trigger another AS, e.g. for
playing an advertisement video in advance to playing the content requested by
the user is FFS.
3\~4 After the IMS P2P CDS UE receives a confirmed message, it sends a request
to the Tracker AS for Peer list through IMS entities.
5\~6 The Tracker AS calculates a Peer list and then sends it back to the IMS
P2P CDS UE.
7\~10 The IMS P2P CDS UE may request Peer list again in the case of e.g. some
Peers become inaccessible.
Editor's Note: The feasibility of carrying the request and response for Peer
list in SIP message needs further assessment.
##### 6.1.4.2.2 Media Transmission Procedure
After attaining a Peer list from the Tracker AS, the IMS P2P CDS UE should
request a Bitmap from each Peer in the Peer list and then decide, according to
a certain algorithm, from which CCSs or other IMS P2P CDS UEs (acting as User
Peers) to acquire the content segments. After that, the IMS P2P CDS UE fetches
content segments from selected other Peers.
Figure 6.1.4.2.2-1: Media Transmission Procedure for alternative 1
1\~2 The IMS P2P CDS UE fetches a Bitmap from each Peer in the Peer list
segments.
3 According to a certain algorithm, the IMS P2P CDS UE decides from which CCSs
or other IMS P2P CDS UEs (acting as User Peers) to acquire the content and
then sends the request messages to them.
##### 6.1.4.2.3 Content Delivery Termination Procedure
Figure 6.1.4.2.3-1: Content Delivery Termination Procedure for alternative 1
When the IMS P2P CDS UE terminates the existing P2P session, e.g. due to
switching to another content or closing the programme, it releases all the
current P2P media connections and then notifies the Tracker AS to remove
itself from all related Peer lists.
1\~2 The IMS P2P CDS UE releases all the current P2P media connections.
3\~6 The IMS P2P CDS UE terminates the existing P2P session through SIP Bye
message.
##### 6.1.4.2.4 CCS Joining Procedure
The tracker AS may instruct a CCS to join a P2P swarm based on the status of a
P2P swarm, e.g. underlying network condition change, new UE joining/leaving,
changes in traffic conditions, location, capabilities and workload of peers,
etc. The tracker AS may also instruct the CCS to retrieve the corresponding
content/content segments from a CSS if the P2P content is not available at the
CCS. This signalling flow can use the Tc interface between the tracker AS and
the CCS.
Figure 6.1.4.2.4-1: CCS Joining Procedure
1 After decided inviting a CCS to join a P2P swarm, the Tracker AS sends a
message to request the CCS to join a P2P swarm. The INVITE should include the
content ID and peer list, may also include the instruction to retrieve the
content/content segments from a CSS.
2 The CCS retrieves the content/content segments if it is instructed by the
Tracker AS to do so.
3 The CCS sends a response to the Tracker AS.
4 The Tracker AS puts CCS into the peer list of this swarm.
5The CCS then joins the P2P swarm using the peer-to-peer protocol.
#### 6.1.4.3 QoS Control Procedure
##### 6.1.4.3.1 Alternative 1
After attaining a Peer list from the Tracker AS, the UE selects Peers and
requests to establish dedicated bearer with the QoS policy from PCRF and the
packet filters generated from the local and remote addresses and port numbers.
The content data is then transmitted on the established dedicated bearer.
Figure 6.1.4.3.1-1: QoS control Procedure for Alternative 1
1 Perform step1 to step4 as specified in Figure 6.1.4.2.1-1: Session
Establishment and Initial Peer list Request.
Editor's Note: It is FFS whether the invite message needs to carry the UE's
address(es) and port(s) for the media plane .
2 Tracker AS selects peers that can provide the specific content and
identifies the Service information needed, e.g. IP address of the IP flow (s),
port numbers to be used, information on recommended QoS parameters such as
recommended bandwidth or rate, etc.
Editor's Note: How to generate the recommended QoS parameters is FFS. A
possible solution is the service provider provides Tracker AS the recommended
QoS parameters such as the minimum bandwidth for the contents, which could
guarantee the content could be downloaded in time in most occasions. And
Tracker AS selected proper QoS parameter according to UE's property (such as
caching size, access mode, etc.) and corresponding QoS parameters recommended
for the specific content.
3 Tracker AS returns service information and list of candidate peers that can
provide requested content. The message is forwarded to P-CSCF.
4 P-SCSF records candidate Peers list and provides the Service Information to
the PCRF. In the Service Information, the address(s) and port(s) corresponding
to the candidate peers could be set to wild card or omitted.
Editor's Note: It is FFS whether P-CSCF or Tracker AS acts as AF in PCC
architecture.
5 The PCRF stores the service information and responds with the
Acknowledgement to P-SCSF.
6 P-CSCF provides UE with the candidate Peer list.
7 According to a certain algorithm, the UE selects one or more peers as the
content delivery node from the candidate Peers list.
8-9 The UE fetches a Bitmap from each Peer in the Peer list segments.
According to a certain algorithm, the UE decides from which peer(s) to acquire
the content or chunks.
10 Optionally, the UE can negotiate or exchange with the selected peers about
the IP addresses and port numbers used to send/receive the content.
Editor's Note: The mechanism for negotiating or exchanging the information
above is FFS.
11 The UE requests for creation of the dedicated bearer or modification of the
packet filters( if there's already a dedicated bearer) according to the local
and remote final IP addresses and port numbers by initiating the bearer
resource modification procedure, as specified in TS 23.401.
In this procedure the UE signals a Traffic Aggregate Description (TAD) which
includes the packet filter information and requested operation
(add/modify/delete packet filters). The packet filter information is derived
from the local and remote final IP addresses and port numbers.
12 The P-GW saves packet filter(s) and interacts with the PCRF to trigger the
PCC rules and acquire QoS policy.
13 The P-GW creates TFT with the packet filter(s) , and initiates dedicated
bearer modification procedure to establish or modify the dedicated bearer with
the TFT and the QoS policy, as specified in TS 23.401.
14-15 UE sends the request messages to the selected peers to acquire content.
The Peers send the requested chunks to UE through P-GW. The corresponding IP
flows are transmitted on the dedicated EPS bearer that is associated with the
TFT of the matching downlink packet filter.
Editor's Note: This solution could solve the problem that the number of
initial Candidate Peers exceeds the limitation of TFT by limiting the number
of final peers selected by UE in 15, so it might have some impact on UE.
#### 6.1.4.3.2 Alternative 2
The operator allocates a particular APN for Content delivery service and
defines the corresponding QoS policy (such as APN‑AMBR, QCI) to the APN. When
UE uses the IMS P2P CDS service, the content data is transmitted on the bearer
which is established based on the QoS policy associated with the IMS P2P CDS
APN.
Figure 6.1.4.3.2-1: QoS Control Procedure for Alternative 1
1 The UE initiates the Attach procedure with IMS P2P CDS APN carried in the
message.
2-3 MME initiates create default bearer request with APN, QoS related
parameters in the message. Optionally, MME can retrieve the QoS parameters
associated with IMS P2P CDS APN from HSS.
4 Optionally, PCRF can be requested to update EPS bearer QoS and APN-AMBR.
5-6 P-GW enforces the QoS policy and establish default bearer.
Editor's Note: In this solution, the bearer is established based on the QoS
policy of the specific IMS P2P CDS APN. The IP flows of the requested content
data will be transmitted on this bearer. Therefore, it's a simple QoS
mechanism.But since the QoS is pre-defined, so it can't meet all the QoS
requirements of contents' delivery when different contents have individual
service QoS requirement for delivery.
#### 6.1.4.3.3 Alternative 3
This solution introduces a new entity "MediaProxy" to solve the problem of
excessive IP filters generated from the large numbers of Caches.
#### 6.1.4.3.3.1 Architecture of using MediaProxy for QoS control
The QoS architecture with MediaProxy is as follows:
Figure 6.1.4.3.3.1-1: QoS architecture with MediaProxy
The MediaProxy allocates the local IP addresses and port numbers corresponding
to the original ones for the Caches, establishes the addresses and ports
mapping relationship, modifies the corresponding IP addresses and/or ports of
the data packets of downlink media flow according to the mapping relationship,
and forwards the modified packets to the P-GW.
The Tracker sends the MediaProxy the original IP addresses and port numbers of
the Caches and retrieves the corresponding proxy allocated ones through the
interface between Tracker and MediaProxy.
Editor's note: The protocol used on the interface of Tracker and MediaProxy is
FFS.
Editor's note: Whether Tracker AS should be involved in QoS control is FFS.
#### 6.1.4.3.3.2 QoS Control Procedure
The procedure of QoS control with MediaProxy is as follows:
Figure 6.1.4.3.3.2-1: QoS control Procedure for Alternative 1
1 Perform step1 to step4 as specified in Figure 6.1.4.2.1-1: Session
Establishment and Initial Peer list Request.The invite message needs to carry
the UE's address(es) and port(s) for the media plane .
2 Tracker AS selects peers that can provide the specific content and
identifies the Service information needed, e.g. IP address of the IP flow (s),
port numbers to be used, information on recommended QoS parameters such as
recommended bandwidth or rate, etc.
Editor's Note: How to generate the recommended QoS parameters is FFS.
3 Tracker AS sends a message to the MediaProxy to request for address
allocation, with the candidate Caches' IP addresses and port numbers contained
in the message.
4 The MediaProxy allocates the corresponding local proxy IP addresses and
ports for the candidate Caches according to their original IP addresses and
port numbers , and establishes the mapping relationship between the local ones
and the original ones. The MediaProxy could allocate the local IP addresses
and port numbers according to the operator policy, for example, there're 30
Candidate Caches, it could allocate the same IP address and 30 consecutive or
partly consecutive port numbers, the packet filters are generated from the
proxy allocated IP addresses and port numbers instead of the original ones, so
according to the generation rules of the packet filter, the number of the
generated packet filters could be controlled in the limitation of 15 as
specified in TS 24.008.
5 MediaProxy informs the Tracker AS of the proxy allocated IP addresses and
port numbers of the candidate Caches with a response message.
6 Tracker AS returns to P-CSCF the service information and list of candidate
peers which contains the corresponding proxy addresses and port numbers
7 P-SCSF records candidate Peers list and provides the Service Information to
the PCRF.
Editor's Note: It is FFS whether P-CSCF or Tracker AS acts as AF in PCC
architecture.
8 The PCRF stores the information and responds with the Acknowledgement to
P-SCSF.
9 The P-CSCF instructs the PCRF to inform the P-GW of the packet filters which
contains the Caches' proxy allocated IP addresses and port numbers as well as
the UE's IP addresses and port numbers. The P-GW establishes the dedicated
bearer with the received packet filters information. As described in step4,
the MediaProxy may allocate the local IP addresses and port numbers using the
policy like allocating consecutive or partly consecutive port numbers, so
according to the generation rules of the packet filter, the excessive packet
filters problem could be avoided.
10 The P-GW creates TFT with the packet filter(s) , and initiates dedicated
bearer modification procedure to establish the dedicated bearer with the TFT
and the QoS policy, as specified in TS 23.401.
11 P-CSCF provides UE with the candidate Peer list which contains the
corresponding proxy allocated addresses and port numbers of the Candidate
Caches
12 According to certain algorithm, the UE selects one or more peers as the
content delivery node from the candidate Peers list.
13 The UE fetches the Bitmap from each Peer in the Peer list.
According to certain algorithm, the UE decides from which peer(s) to acquire
the contents or chunks.
14 Optionally, the UE can negotiate with the selected peers about the IP
addresses and port numbers used to send/receive the content.
Editor's Note: The mechanism for negotiating or exchanging the information
above is FFS.
15 If the negotiation process in step 14 happens and the original Caches' IP
addresses and/or port numbers are changed, the UE needs to inform the Tracker
AS of the updated Caches' IP addresses and/or port numbers.
16-17 The Tracker AS informs the MediaProxy about the updated Caches'
addresses and/or port numbers. The MediaProxy modifies the mapping
relationship according to the updated information.
18 UE sends the request messages to the selected peers to acquire the content
segments.
Editor's Note: It's FFS whether the messages in the content segments request
process should to be transmitted by MediaProxy or not.
19-21 The Peers send the requested chunks to UE through MediaProxy. The
MediaProxy modifies the corresponding IP addresses and/or port numbers in the
data packets of the downlink media flow with the corresponding local IP
addresses and/or port numbers according to the mapping relationship, and then
forwards the modified packets to the P-GW. The media flow is transmitted on
the dedicated bearer that is associated with the TFT generated in step10.
Editor's Note: This solution can implement the QoS control and solve the
problem of excessive IP filters by introducing MediaProxy, so it causes some
impact on the architecture, and also, the Tracker AS needs to be enhanced to
implement the interface to MediaProxy.
## 6.2 Alternate 2 -- Signalling between User Peer and other User Peers
traversing IMS core
### 6.2.0 General
All signalling messages between User Peer and Tracker go through IMS core.
Signalling (e.g. for bitmap fetching) between User Peer and other User Peers
also go through IMS core.
The QoS related architecture, functional entity and interface are the same as
depicted in alternate 1.
### 6.2.1 Architecture Reference Model
Figure 6.2.1-1: Overview of the IMS P2P CDS architecture for alternative 2
Editor's Note: It is FFS whether signalling messages between User Peer and
Network Peers shall traverse IMS core.
### 6.2.2 Functional Entities
P-CSCF, I-CSCF, S-CSCF and HSS are already defined in TS 23.228.
The functions of CCS, CSS and Tracker AS are the same as depicted in sub-
clause 6.1.2.
The UE should support the functionality of User Peer if it is used to provide
IMS P2P CDS applications to the user.
### 6.2.3 Interfaces
#### 6.2.3.1 Gm, Mw, ISC
These interfaces are SIP interfaces with the functionality as defined in TS
23.228.
For IMS P2P CDS, these interfaces are also used as follows:
\- The IMS P2P CDS UE sends a Content ID to the Tracker AS for fetching a Peer
list through these interfaces.
\- The Tracker AS collects a set of information from the IMS P2P CDS UE
through this interface, such as the index of contents/content segments cached
in that IMS P2P CDS UE, the access type, traffic conditions, location,
capabilities and workload of that IMS P2P CDS UE.
\- A User Peer fetches the bitmap information from other User Peers through
these interfaces.
Editor's Note: It is FFS whether signalling messages between User Peer and
Network Peers shall go through these interfaces.
#### 6.2.3.2 PP_s1
The interface is the same as depicted in sub-clause 6.1.3.2.
Editor's Note: This interface should be removed from the architecture if it is
decided that signalling messages between User Peer and Network Peers shall
traverse IMS core.
#### 6.2.3.3 PP_m1
The interface is the same as depicted in sub-clause 6.1.3.3.
#### 6.2.3.4 PP_m2
The interface is the same as depicted in sub-clause 6.1.3.4.
#### 6.2.3.5 Tc
The interface is the same as depicted in sub-clause 6.1.3.5.
#### 6.2.3.6 Ts
This is FFS.
#### 6.2.3.7 SC_s
This is FFS.
#### 6.2.3.8 SC_m
This is FFS.
### 6.2.4 Message flows
#### 6.2.4.1 IMS P2P CDS UE registration procedure
This procedure is the same as depicted in sub-clause 6.1.4.1.
#### 6.2.4.2 Content Distribution Procedure
##### 6.2.4.2.1 Content Delivery Establishment Procedure
This procedure is the same as depicted in sub-clause 6.1.4.2.1 except that in
the present procedure the identification of a User Peer in the Peer list uses
IMPU rather than IP address yet for Alternative 1 IP addresses are used for
both User Peer and Network Peer.
##### 6.2.4.2.2 Media Transmission Procedure
The purpose of this procedure is the same as depicted in sub-clause 6.1.4.2.2.
However the signalling messages between one User Peer and another go through
IMS core and Tracker AS to achieve better management and charging
capabilities.
Figure 6.2.4.2.2-1: Media Transmission Procedure for alternative 2
1\~5 The IMS P2P CDS UE fetches the bitmap information from each User/CCS Peer
in the Peer list across IMS Core and Tracker AS.
6\~8 According to a certain algorithm, the IMS P2P CDS UE decides from which
IMS P2P CDS UEx/CCSx (acting as Peers) to acquire the content and then sends
the request messages to them, across IMS Core and Tracker AS.
Editor's Note: It is FFS whether signalling messages between UE Peer and
Network Peers shall traverse IMS core.
Editor's Note: It is FFS in which way the message delivery in Step1\~9 can
utilize SIP signalling.
##### 6.2.4.2.3 Content Delivery Termination Procedure
=
Figure 6.2.4.2.3-1: Content Delivery Termination Procedure for alternative 2
When the IMS P2P CDS UE terminates the existing P2P session, e.g. due to
switching to another content or closing the programme, it releases all the
current P2P media connections and then notifies the Tracker AS to remove
itself from all related Peer lists.
1\~10 The IMS P2P CDS UE releases all the current P2P media connections.
11\~15 UE terminates the existing P2P session, the same defined in sub-clause
6.1.4.2.3-1.
Editor's Note: It is FFS whether signalling messages between UE Peer and
Network Peers shall traverse IMS core.
Editor's Note: It is FFS in which way the above message delivery can utilize
SIP signalling.
## 6.3 Alternate 3 -- Using direct interface for signalling between User Peer
and Tracker AS
### 6.3.0 General
User Peers interact with Tracker AS directly via direct interface (e.g. Ut)
rather than traversing IMS core.
Signaling (e.g. for bitmap fetching) between User Peer and Network Peer does
not go through IMS core.
The QoS related architecture, functional entity and interface are the same as
depicted in alternate 1.
### 6.3.1 Architecture Reference Model
Figure 6.3.1-1: Overview of the IMS P2P CDS architecture for alternative 3
The major difference between the present alternative and Alternative 1
(defined in section 6.1) is that UE shall directly interact with Tracker AS to
do the following via Ut interface rather than going through IMS core.
\- The IMS P2P CDS UE sends a Content ID to the Tracker AS for fetching a Peer
list.
\- The Tracker AS collects a set of information from the IMS P2P CDS UE, such
as the index of contents/content segments cached in that IMS P2P CDS UE, the
access type, traffic conditions, location, capabilities and workload of that
IMS P2P CDS UE.
There are two ways for IMS P2P CDS UEs to retrieve the address of Tracker AS.
\- The Tracker AS address (e.g. FQDN) can be pre-configured in UE statically.
\- The tracker AS address (e.g. FQDN) can be obtained via Gm interface during
IMS registration.
### 6.3.2 Functional Entities
The functions are the same as depicted in sub-clause 6.1.2.
### 6.3.3 Interfaces
The interfaces are the same as depicted in sub-clause 6.1.3.
### 6.3.4 Message flows
The procedures of IMS P2P CDS UE registration, Media Transmission are the same
as depicted in sub-clause 6.1.4. The procedures of Content Delivery
Establishment and Content Delivery Termination are similar to those in sub-
clause 6.1.4 with the only difference that the signalling doesn't go through
IMS Core.
#### 6.3.4.1 Peer list retrieval
Figure 6.3.4-1 shows how the IMS P2P CDS UE requests a peer list from the
Tracker AS for the desired content. In this example, the signalling between
IMS P2P CDS UE and Tracker AS does not traverse the IMS core network entities.
Figure 6.3.4.1-1: Peer list retrieval
1 After the user chooses a content, e.g. from a Web portal maintained by the
IMS P2P CDS system, a Content ID is assigned. The IMS P2P CDS UE sends a
request to the Tracker AS to obtain a list of peers from where the content
segments are available. The Content ID is included in the peer list request.
2 The Tracker AS calculates a Peer list and then sends it back to the IMS P2P
CDS UE.
3\~4 The IMS P2P CDS UE may request Peer list again in the case of e.g. some
Peers become inaccessible.
Editor's Note: The interface between the IMS P2P CDS UE and the Tracker AS is
FFS. One option might be to re-use the Ut interface, however this is also
dependent on if the signalling between IMS P2P CDS UE and Tracker AS is
compatible with that defined for the Ut reference point.
## 6.4 Architectures for IMS P2P CDS used in conjunction with CDN
### 6.4.0 General
This section provides alternative architectures for IMS P2P CDS used in
conjunction with 3^rd^ party CDN networks.
### 6.4.1 CDN component registered in IMS
If CDN components like Origin Server and Edge Server are registered in IMS, UE
is able to contact them directly through IMS core. In the following steps,
content is chopped into three pieces and stored in three places separately.
All UEs and servers are IMS registered. These servers has dedicated interface
with the Tracker AS. Network peer and User Peer already updated their
information in the Tracking List resides at the Tracker AS. Data traffic path
is not shown in the provided architecture.
  * In step 1&2, UE requests for content service and the Tracker AS replies it a peer list.
Editor's Note: The signal path for UE to obtain this peer list is FFS.
  * In step 3, UE selects peers from the list and send request to P-CSCF.
  * In step 4, IMS core forward request to corresponding devices for pieces as original UE requested.
Editor's Note: There is another option that P2P request does not go through
IMS core.
  * In step 5, UE update its status to the Tracker AS
Editor's Note: The signal path for UE to update its status is FFS.
### 6.4.2 CDN component not registered in IMS
If CDN components like Origin Server and Edge Server are not registered in
IMS, UE should contact them through CDN Controller. In the following steps,
Content is chopped into three pieces and stored in three places separately. In
CDN-1, only CDN Controller registered in IMS. The CDN controller has dedicated
interface with the Tracker AS. CDN Controller and User Peers already updated
their information in the Tracking List resides at the Tracker AS. Data traffic
path is not shown in the provided architecture.
  * In step 1&2, UE requests for content service and the Tracker AS replies it a peer list.
Editor's Note: The signal path for UE to obtain this peer list is FFS.
  * In step 3, UE selects peers from the list and send request to P-CSCF.
  * In step 4, IMS core forward request to CDN Controller.
Editor's Note: There is another option that P2P request does not go through
IMS core.
  * In step 5, CDN Controller forwards the request to corresponding edge servers.
  * In step 6, UE update its status to the Tracker AS
Editor's Note: The signal path for UE to update its status is FFS.
### 6.4.3 Integration with CDN using Network Storage Control Peer
In this alternative architecture, integration with CDN is achieved by
introducing into the IMS P2P CDS a network peer that consists of CCS
functionality as well as allowing nodes in the P2P network to dynamically
advertise content pieces available in the CDN, directly upload content pieces
to the CDN, and redirect a peer to get content from the CDN. Network Storage
Control Function is added to the IMS P2P CDS to interface to CSS and/or CDN as
shown in Figure 6.4.3-1. Its role is to make available to peers involved in a
swarm, the necessary content segments to be downloaded, either from its own
storage or by adding them to the CDN. The Network Storage Control Function can
retrieve content segments from a CSS within network peers.
Figure 6.4.3-1: Architecture for CDN Integration in P2P CDS Using a Network
Storage Control Peer
The following information flows in Figure 6.4.3-2 show how the Network Storage
Control Function can be invited to a swarm and then distribute content
segments from the CSS to the CDN such that peers can then access such content
from the CDN. The CCS could also use its own storage but this is not
represented here.
Figure 6.4.3-2: CDN Integration in P2P CDS Using a Network Storage Control
Peer
1\. UE2 joins an existing swarm and obtains a peer list
2\. CCS with Network Storage Control Function joins the swarm. This operation
may be triggered in various ways (e.g. Tracker AS may request CCS to join).
3\. Tracker AS provides swarm statistics to CCS. These statistics may for
example contain the number of copies of content pieces in the swarm, and
should be sent periodically or on demand to the CCS to enable dynamic
management of CDN hosted content.
4\. CCS uses the CDN ingestion interface to upload the content from CSS to
CDN.
5\. CCS provides the URIs of the content pieces located in the CDN to the
Tracker AS
6\. UE1 joins the swarm and obtains a peer list, now including a list of CDN
URIs as well as regular peers
7\. UE1 obtains a content piece from the CDN using HTTP GET. This phase
typically includes DNS name resolution. During this phase, the CDN uses its
normal redirection mechanism (e.g. DNS based or HTTP redirection based) to
redirect UE1's request towards one of its surrogate.
Editor\'s Note: It is FFS if authentication and security considerations need
to be taken into account for UE access to CDN.
8\. Peer to peer protocol is used as well between UEs to exchange content
pieces.
9\. At a later point in the peer to peer session, swarm statistics are sent
again to CCS by the Tracker
10\. Based on the swarm statistics, CCS decides to remove some of the content
pieces from the CDN, for example because they are now very popular in the
swarm. CCS updates its list of CDN URIs to the Tracker AS.
11\. CCS uses the CDN ingestion interface to purge the selected content pieces
from the CDN. Alternatively from using a purge, CCS could also have associated
a Time-to-Live to the content pieces uploaded in step 4.
## 6.5 Including ALTO server in IMS P2P CDS
### 6.5.1 General
User peers and network peers may query an ALTO (Application Layer Traffic
Optimization) Server for cost values between peers in a swarm to be used to
rank a list of peers of the requested content as described in draft-ietf-alto-
protocol [5]. A query may consist of a peer\'s location and the type of
information the peer requires from the ALTO Server. An ALTO Server may provide
the following:
\- a Cost Map which may rank available peers for the requested content in a
specific order depending on the cost metric used, e.g. routing hop count,
access network characteristics, peer battery capabilities;
\- a Network Map which may consist of a list of peer identities and/or peer IP
addresses, or peers in close proximity to the peer requesting content, e.g.
same cell, same access, or same operator domain.
An ALTO server may obtain information from a Tracker AS, HSS, and other
sources such as distributed hash tables which may or may not be a part of the
IMS architecture.
ALTO client to ALTO server communication may traverse IMS entities.
### 6.5.2 Architecture
Figure 6.5.2-1: ALTO service architecture
The ALTO Client may be implemented in Tracker AS, UE Peers and Network Peers
such as content cache servers. It may communicate with the ALTO Server
directly or through IMS core. To be simplified, the direct interface between
the ALTO Client and the ALTO Server is not depicted in the ALTO service
architecture.
The ALTO Server may re-use the ISC reference point in the case ALTO Client to
ALTO Server communication traverses the IMS Core Network.
The ALTO Server may interface with the HSS re-using the Sh reference point in
order to retrieve subscriber specific information, e.g. registration state,
user identities.
The ALTO client may discover peer lists from the Tracker AS.
The ALTO client shall query the ALTO Server, including the peer list, current
location, and Cost type required.
The ALTO Server shall return to the ALTO Client, a response including a
Network Map, and/or Cost Map, and ranking available peers, based on the
received input.
### 6.5.3 ALTO procedures
The ALTO protocol is a client-server protocol which allows an ALTO client to
query an ALTO server for information related to endpoints. In the case of a
list of peers from which content is available to an IMS P2P CDS UE,
information from the ALTO server can aid the IMS P2P CDS UE to determine the
optimal set of peers to contact in order to retrieve the desired content
segments. Figure 6.5.3-1 shows the interaction between ALTO client and ALTO
server, and describes the content of the messages exchanged between these
entities.
Figure 6.5.3-1: ALTO message exchange for peer list optimization
1\. The ALTO client, residing in either the IMS P2P CDS UE, or in the Tracker
AS, sends a request for Network/Cost maps to the ALTO server. The following
information may be included in the request:
\- the request includes the peer list retrieved from the Tracker AS;
\- indications of what information is desired from the ALTO server. The
following can be requested from the ALTO server:
\- Network Map -- grouping peers from the peer list -- grouping can be for
example per cell ID, per access type, per network domain;
\- Cost Map, including path costs for the peers such as hope count from the
IMS P2P CDS UE, or physical proximity (e.g. determined by geolocation);
\- the client may ask for properties of the peers in the peer list such as the
access over which peers are connected.
\- the location of the requesting peer (alternative 2).
NOTE: There can be other endpoint properties that can be requested from the
ALTO server. The above list is not exhaustive.
2\. The ALTO server retrieves information related to peers.
Editor\'s Note: The mechanisms by which the ALTO server retries peer related
information is FFS.
3\. The ALTO server organizes the peers in the peer list into groups and
assigns a cost weighting to each group and/or each peer according to the cost
type requested. Also provided is the cost mode to indicate if the cost
weighting is a numerical value or an ordinal/ranking value.
The ALTO client may query the ALTO server subsequently, in order to retrieve
updated metrics on peers, since the Cost Map may have changed due to the
dynamic nature of peers and the IMS P2P CDS UE.
#### 6.5.3a ALTO Redirection Procedure
Whenever the ALTO client needs to retrieve alto information of the peers, it
sends request to the ALTO server. But in some cases, the ALTO server is only
responsible for some of the peers, for some other peers, it doesn't have the
most appropriate information to reply. In such case, the ALTO server could
redirect the request to the other proper ALTO server(s) for those peers it
couldn't handle. An alternative redirection flow is showed in Figure 6.5.3a-1.
Figure 6.5.3a-1: ALTO redirection procedure
1 The ALTO client, residing in either the IMS P2P CDS UE, or in the Tracker
AS, sends a request for Network/Cost maps of the peers to the ALTO server.
2 The ALTO server retrieves information related to part of the peers that it's
responsible for.
3 For the other part of peers that the ALTO server is not in charge of, it
redirects the request to the other ALTO server(s) to retrieve the related alto
information.
Editor's note: How to select the other ALTO server(s) is FFS.
4 The ALTO server organizes the peers in the peer list into groups and assigns
a cost weighting to each group and/or each peer according to the cost type
requested. Also provided is the cost mode to indicate if the cost weighting is
a numerical value or an ordinal/ranking value.
### 6.5.4 Information flows
#### 6.5.4.1 Alternative 1: UE performs ALTO query
Figure 6.5.4.1-1 shows the information flows for IMS P2P CDS procedure
including ALTO query. In this alternative, the IMS P2P CDS UE performs the
ALTO query. Two options are included for the peer list retrieval: firstly, the
UE requests the peer list from the Tracker AS and secondly, the Tracker AS
sends to the UE the peer list as a result of the UE requesting a session for
content retrieval/streaming.
{width="6.118055555555555in" height="4.993055555555555in"}
Figure 6.5.4.1-1: IMS P2P CDS procedures including ALTO query performed by UE
1-2. The IMS P2P CDS UE sends s session establishment request for a desired
content stream or download.
3-4. The Tracker AS returns back a session setup response to the IMS P2P CDS
UE.
5\. The IMS P2P CDS UE requests a list of peers that are known to have all or
part of the content requested. This request may go through the IMS core
network or be transparent to the IMS core network.
6\. The Tracker AS determines the available peers that hold the content
desired by the user.
7\. As an alternative to steps 3-5, the Tracker AS, in response to the content
request received in step 2, responds with the peer list for the requested
content. In this case, the peer list can be included in a response to the
session setup request. If this step is a response to step 5, then the peer
list is sent to the IMS P2P CDS UE as requested. The request may go through
the IMS core network or be transparent to the IMS core network.
8\. The IMS P2P CDS UE performs ALTO query as described in subclause 5.6.3,
with the ALTO server responding as described in subclause 5.6.3.
9\. The IMS P2P CDS UE requests bitmaps from peers chosen from the peer list,
based on the result from the ALTO query.
10\. The IMS P2P CDS UE requests the desired content segments from peers.
#### 6.5.4.2 Alternative 2: Tracker AS performs ALTO query
Figure 6.5.4.2-1 shows the information flows for IMS P2P CDS procedure
including ALTO query. In this alternative, the Tracker AS performs the ALTO
query. The response to the peer list request is an optimized peer list with
ALTO metrics such as Cost and Network maps and endpoint properties.
{width="6.118055555555555in" height="4.993055555555555in"}
Figure 6.5.4.2-1: P2P CDS procedures including ALTO query performed by Tracker
AS
1-2. The IMS P2P CDS UE sends s session establishment request for a desired
content stream or download.
3-4. As an option, where the UE is required to perform peer list retrieval,
the Tracker AS returns back a session setup response to the IMS P2P CDS UE.
5\. As an option, the IMS P2P CDS UE requests a list of peers that are known
to have all or part of the content requested. This request may go through the
IMS core network or be transparent to the IMS core network.
6\. The Tracker AS determines the available peers that hold the content
desired by the user.
7\. The Tracker AS performs ALTO query as described in subclause 5.6.3, with
the ALTO server responding as described in subclause 5.6.3.
8\. As an alternative to steps 3-5, the Tracker AS, in response to the content
request received in step 2, responds with the optimized peer list and ALTO
metrics (Network and Cost Maps and endpoint properties) for the requested
content. In this case, the optimized peer list and ALO metrics can be included
in a response to the session setup request. If this step is a response to step
5, then the optimized peer list and ALTO metrics are sent to the IMS P2P CDS
UE as requested. The request may go through the IMS core network or be
transparent to the IMS core network.
9\. The IMS P2P CDS UE requests bitmaps from peers chosen from the peer list,
based on the result from the ALTO query.
10\. The IMS P2P CDS UE requests the desired content segments from peers.
#### 6.5.4.3 Assessment of alternatives
In subclauses 6.5.4.1 and 6.5.4.2 information flows for IMS P2P CDS procedures
are described for the cases where ALTO query is performed by the IMS P2P CDS
UE (alternative 1) and Tracker AS (alternative 2), respectively.
Alternative 1 - IMS P2P CDS UE performs ALTO query:
Advantages:
\- In the case of roaming, the IMS P2P CDS UE may contact an ALTO server in
the home network or an ALTO server in the visited network, regardless of the
location of the Tracker AS. ALTO server in the visited network has better
metrics/maps for peers in the visited network, while ALTO server in the home
network has better metrics/maps for peers in the home network.
The IMS P2P CDS UE may subsequently contact the ALTO server to request updated
metrics for the available peers. This might be necessary in the case the user
has requested content of long duration and where the peers may be mobile and
as a result the information the IMS P2P CDS UE has on peers may become out
dated. This can be useful especially in the case where the ALTO and the
Tracker AS are located in different domains (e.g. a roaming UE contacts a
local ALTO server).
Disadvantage:
\- Extra signalling burden (signalling towards the ALTO server) on the IMS P2P
CDS UE.
\- If the signalling between IMS P2P CDS UE and ALTO server doesn't go through
the IMS core network then the signalling is invisible for the network.
Alternative 2 - Tracker AS performs ALTO query:
Advantages:
\- Reduced signalling burden (signalling towards the ALTO server) on the IMS
P2P CDS UE.
\- In the case the IMS P2P CDS UE requires subsequent updated ALTO information
on peers; it would contact the tracker for an updated peer list. The tracker
can contact the ALTO server with an actual peer list and provide the related
results to the IMS P2P CDS UE. Additional new peers with the requested content
can be taken into account with this method.
Disadvantages:
\- In the case the IMS P2P CDS UE requires subsequent updated ALTO information
on peers, it would be required to contact the Tracker AS for ALTO information
and not only for peer list retrieval.
\- The ALTO information available to the IMS P2P CDS UE is restricted to the
ALTO server(s) that the Tracker AS can communicate with, thus the ALTO
information sent to the IMS P2P CDS UE, may not be optimal.
\- If the signalling between IMS P2P CDS UE and ALTO server doesn't go through
the IMS core network then the signalling is invisible for the network.
# 7 Evaluation
Editor's Note: This clause will include solution(s) assessment.
## 7.1 Criteria for the evaluation of QoS alternative solutions
Some criteria for the evaluation of QoS alternative solutions are listed as
following:
  * Criterion1: can meet the QoS requirements for different subscribers and different contents
  * Criterion2: impact on the current PCC architecture
  * Criterion3: impact on the existing 3GPP specifications related to PCC and LTE
  * Criterion4: can apply the existing solutions (such as PCC roaming mechanism) in roaming scenario
  * Criterion5: impact on the current content service flows
  * Criterion6: can meet the resources control and monitoring control requirements from the operator
It\'s proposed to use the above criteria to evaluate QoS solutions. And with
the study of QoS control, more criteria are expected.
# 8 Conclusion
Editor's Note: This clause will provide conclusions with respect to what
further specification work is required in order to provide IMS based peer-to-
peer content distribution services.
The study has been investigating a number of alternatives for the IMS Based
Peer-to-Peer Content Distribution Services. The study has concluded without
any firm recommendations on a specific solution, but the alternatives are
viewed to be possible to reuse for future discussion on the subject if or when
firm requirements are defined.
###### ### Annex A (Informative): IETF work on P2P Streaming Protocol (PPSP)
# A.1 IETF PPSP WG overview
The IETF PPSP WG focuses on the Peer-to-Peer paradigm of delivering streaming
traffic (live, time-shifted media content with near real-time requirement and
VoD), standardizing signalling operations on two important components, Peer
and Tracker, for information exchange.
The goal of PPSP is to serve as an enabling technology, building on the
development experiences of existing P2P streaming systems. Its design will
allow it to integrate with IETF protocols on distributed resource location,
traffic localization, and streaming control and data transfer mechanisms for
building a complete streaming system or a streaming delivery infrastructure.
It has been discussed and concluded in the problem statement draft of PPSP
that, in essence, there are two kinds of basic entities in P2P streaming,
i.e., the Tracker and the Peer. According to the definition in PPSP, a Tracker
refers to a directory server which maintains a list of peers storing chunks
for a specific channel or streaming file and answers queries from peers for
peer lists, while a Peer refers to a participant in a P2P streaming system
that not only receives streaming content, but also stores and uploads
streaming content to other participants.
PPSP designs a protocol for signalling between trackers and peers (the PPSP
\"tracker protocol\") and a signalling protocol for communication among the
peers (the PPSP \"peer protocol\") as shown in Figure A.1. The tracker
protocol handles the initial and periodic exchange of meta information between
trackers and peers, such as peer-list and content information. The peer
protocol controls the advertising and exchange of media data between the
peers.
{width="4.427777777777778in" height="3.8430555555555554in"}
Figure A.1-1: PPSP System Architecture
NOTE: in the above figure, the upward arrow in the right-upper corner refers
to the Peer's periodically reporting its status, e.g. the content segments
cached in the Peer, to the Tracker, while the dual direction arrow in the
left-upper corner refers to the procedure of the Peer's fetching peer list
from the Tracker.
The outputs from IETF PPSP WG that may be related to this study are listed in
the following table for tracking:
* * *
File Name Title Status draft-ietf-ppsp-problem-statement-01 Problem Statement
of P2P Streaming Protocol (PPSP) WG draft draft-ietf-ppsp-reqs-01 P2P
Streaming Protocol (PPSP) Requirements WG draft draft-gu-ppsp-peer-protocol-02
Peer Protocol Personal draft draft-gu-ppsp-tracker-protocol-04 Tracker
Protocol Personal draft Draft-lu-ppsp-mobile-04 P2P Streaming for Mobile Nodes
Personal draft
* * *
Editor's Note: The above table may be updated according to the progress of
PPSP in IETF.
# A.2 Mobility Issues in PPSP
## A.2.1 Introduction
When designing IMS P2P CDS, a number of issues related to mobility need to be
taken into account. The IETF PPSP WG requirements in draft-ietf-ppsp-reqs [3],
also takes into account issues that are exacerbated by mobility of user peers.
The following describes these issues.
## A.2.2 Asymmetric bandwidth
Often, in mobile/wireless access, the available bandwidth on the downlink is
greater than that available for the uplink. Such bandwidth restrictions need
to be taken into account by the tracker-peer communication, since a peer
acting as a resource consumer, i.e. a peer that requests streaming content,
may not capable, or may be inefficient in acting as a resource provider, i.e.
a peer that can upload content. Therefore, when generating a peer list, the
Tracker AS, and/or other network entities need to be mindful of the access
type or even actual uplink/downlink bandwidth, a peer is using, since this
restricts the peer\'s usefulness as a content provider.
## A.2.3 Battery powered device
Mobile devices normally rely on a battery for their power source, rather than
connected to the mains electricity. Thus, it is not often \"fair\" to assign
such a peer as a resource provider, even though the mobile device may be used
for the downloading of content. Therefore, when generating a peer list, the
Tracker AS, and/or other network entities need to be mindful of the power
limitations that a peer may have. It could be an option for a mobile peer to
\"opt in\" or \"opt out\" of acting as a resource provider, especially when
operating on battery power.
## A.2.4 Multiple interfaces
Since release 7, IMS has supported UEs with multiple accesses and facilitating
the transfer of IMS session across access legs. When changing access type,
either due to transfer, or loss of connectivity, the UE\'s IP address is also
changed. This is illustrated in Figure 1. The change in Peer 1\'s IP address
from IP1 to IP2, has a negative impact on Peer-to-Tracker communication and
also Peer-to-Peer communication. If Peer 2 is not updated of the change in
Peer 1\'s IP address, and in the case Peer 2 is sending Peer 1 content
segments, it may incorrectly send data to IP1. Furthermore, the Tracker AS may
send peer lists with incorrect or corrupted data about available peers. If
Peer 1\'s IP address is changed, it may no longer receive updates from the
Tracker AS.
These effects may be mitigated by a UE updating the Tracker AS and other peers
of changes in IP address.
{width="4.530555555555556in" height="4.575in"}
Figure A.2.4-1: Peers supporting multiple access network types
## A.2.5 Location
A peer list may be provided by a Tracker AS and/or other network entity based
upon location of peers. A mobile peer is free to move to a different location.
Such a change in location may be undesirable for a number of reasons:
\- the mobile peer is roaming and thus does not want to experience unnecessary
charges when acting as a resource provider
\- the mobile peer is roaming and is not eligible to receive specific content
(content which is restricted to a specific country)
\- the mobile peer is roaming to an area where the visited
operator/network/regulation has limitation on P2P behaviour, e.g. the number
of multi-paths for a single UE within a P2P session is limited
If the Tracker AS and/or other peers are not updated of a change of location,
then, content policy, undesirable charging and inefficient download may be
experienced by P2P users. Therefore, location update can be considered when
designing the IMS P2P CDS.
#