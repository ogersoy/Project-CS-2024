# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document investigates architecture solutions for making the
Network Provided Location Information (NPLI) related to the access network
that the UE is camped on available to the IMS nodes whenever the IMS operator
needs to record this information either to fulfil legal obligations, for
charging or for other purposes.
This study will gather the various existing regulatory and operator
requirements that the solution needs to fulfil, in particular:
\- whether the provision of the Network Provided Location (NPLI) Information
and local time are applicable to all the users served by a network (i.e.
\"non-roaming\" subscribers and inbound roamers) or only to the network
operator subscribers;
\- whether Network Provided Location (NPLI) and local time need to be made
available also if EPS/GPRS and IMS services of a subscriber are provided by
different networks;
\- what events trigger the need to retrieve the Network Provided Location
(NPLI) and local time.
The study is then expected to produce solution candidates which detail the
necessary Stage 2 message flows, architecture enhancements and new
functionality needed in the EPS and GPRS networks. The solution candidates
will also describe what IP Multimedia Subsystem elements are affected in order
to obtain the Network Provided Location (NPLI).
The solutions produced will then be assessed against the criteria identified
in section 7 where recommendations for normative work will also be made.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] Void.
[3] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[4] 3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) centralized services;
Stage 2\".
[5] 3GPP TS 29.328: \"IP Multimedia (IM) Subsystem Sh interface; Signalling
flows and message contents\".
[6] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\".
[7] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[8] 3GPP TS 23.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL) Phase 4; Stage 2\".
[9] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[10] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Network Provided Location Information** : Information provided by the
network. Specifically, this can be the Cell Global Identity (CGI), CSG
Identity (CSGID), Geographical Identifier (GI) and/or PLMN ID, depending on
the type of access network that the UE is camped on and on the level of
granularity that is provided. Based on operator policy and/or roaming
agreement, local time of visited network is included.
**Geographical Identifier** : Identifier of a geographical area defined within
a country or territory. The Geographical Identifier may be described in a
geospatial manner (e.g. geodetic coordinates) or as civic location information
(e.g. a postcode), or use an operator-specific format. It may be generated by
the access network, or by an IMS node. It is assumed that a given cell cannot
belong to more that one area identified by a Geographical Identifier.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
GI Geographical Identifier
NPLI Network Provided Location Information
# 4 Scenarios for Network Provided Location Information Provision
## 4.1 Lawful interception
A legal obligation exists for network operators to record the Cell-ID when
lawful interception is applied. Though the UE currently provides the Cell-ID
information, some regulators do not to trust this information because it may
have been tampered with, therefore they require a network provided Cell-ID.
For an originating or terminating IMS session involving an intercepted UE,
both the Cell-ID where intercepted UE has initiated the session and the Cell-
ID where the session was released are required. There is no requirement to be
able to track the changes in the Cell-ID value during the session.
## 4.2 Charging
The CDRs generated within IMS have to contain Network Provided Location
Information (NPLI) in order to guarantee correct billing. This applies for all
CDRs from any user/session regardless of whether the session is successfully
established or not.
In case the UE to be located is camped on a visited network (that is not an
equivalent PLMN to the HPLMN), the level of granularity of the NPLI (Cell ID,
CSG ID, GI, PLMN ID) provided between PLMNs depends on roaming agreements. In
all cases, the Cell-ID or CSGID needs to be provided to IMS nodes in the VPLMN
when the UE to be located is camped on that same VPLMN or equivalent PLMN to
the VPLMN.
In the case of an IMS voice session, for example, the NPLI of the UE needs to
be recorded for an originating or terminating IMS session establishment. The
NPLI need to be provided when the session is successfully connected/released
and when the session is dropped due to, for instance, radio condition changes.
When an IMS Session is modified, e.g. when a new media component is added to
an MMTel call, the NPLI also needs to be stored as the location of the user at
the time when the session is modified may generate a charging event.
NPLI is also needed to correctly charge for localized services. NPLI needs to
be available to any IMS node that generates charging records. The network that
the IMS node is located in will determine if Cell-ID, CSGID, GI or PLMN ID is
needed. For example, on an IMS session origination where the P-CSCF is in a
VPLMN and the S-CSCF is in the Home or equivalent PLMN, the Cell-ID or CSGID
would be in the P-CSCF CDR and the PLMN ID would be in the S-CSCF CDR.
The NPLI of the serving cell is likewise needed by IMS elements involved in
online charging. In the case of online charging, it is needed at the time of
the IMS service request, or when the IMS service request being processed form
mobile terminated services, because it may be taken into consideration for
service authorization.
The local time of the serving cell is likewise needed for both offline and
online charging, to be provided to the IMS elements in either case at the same
time as the NPLI.
Editor\'s note: It is FFS which IMS functional entities are required to
include the NPLI in the CDR and for which events. Currently TS 23.228 [7]
identifies the following as generating CDRs: P-CSCF, I-CSCF, S-CSCF, BGCF,
MRF, IBCF and transit functions. TS 23.228 [7] also identifies charging
information can be conveyed on Ma and ICS reference points.
## 4.3 IMS Emergency Calls Routing
In order to be able to route an emergency call to the appropriate PSAP, the
NPLI is required. The NPLI shall be provided to the E-CSCF before it performs
PSAP selection. The Cell-ID of the cell where the emergency call is originated
is considered to provide sufficient accuracy for a correct routeing of the
call. In some instances, depending on the specific PSAP configuration and
based on regulatory requirements, a lower level of accuracy than that provided
by the Cell-ID may be preferable, e.g. GI.
If local regulation requires support for UEs which have insufficient
credentials (e.g. UICC-less), network provided Cell-ID must also be obtained
for these UEs.
Existing mechanisms as defined in TS 23.167 [3] may be used for the PSAP
selection, those can be LCS based if the operator supports LCS or non-LCS
based if the operator does not support LCS.
In all cases, minimal impact on the session set-up time for obtaining the
network provided location information is important as in some countries
stringent requirements exist on emergency call set up time.
## 4.4 Retention of Location Information Data
Network operators have a legal obligation to record and store for a certain
amount of time information about their subscribers such as events, services
used as well as location where the service was consumed. It is expected that
when a service is provided by IMS the same requirements that exist today for
CS services will continue to apply.
## 4.5 Special Call Routing for Localised Services
For localised services and for routeing of originating or terminating sessions
dependent on the current location of the UE, the NPLI needs to be available to
the IMS before deciding on whether or where to route the session. It is
expected that localised services are provided by IMS with minimal impact
regarding session set-up time and in the same way as provided by the CS domain
today.
## 4.6 Location-based service triggering
Network operators implement services that need to be triggered based on the
location of the user. For example, an anti-fraud AS may be triggered when a
user is roaming. In order to allow this for IMS services, certified location
information needs to be available at the time of triggering Application
Servers, with at least the granularity of a PLMN ID, while processing requests
for originating or terminating session establishment and requests for SMS.
# 5 Architecture Requirements
## 5.1 General
The solution for the provision of trusted location information to the IMS
nodes is expected to fulfil the following architecture requirements. These
requirements are derived from the scenarios described in section 4 of this
document.
NOTE: Although the aim is to achieve a single solution, more than one
architecture solution may be specified if it is discovered that not all use
cases are efficiently fulfilled by a single solution.
## 5.2 High Level Requirements
\- It shall be possible for the NPLI to be provided by the access network to
the IMS for the purpose of charging, lawful interception and retention of
location information and potentially PSAP selection to be determined by the
network. The information shall be provided for the originating UE in the
originating record, and for the terminating UE in the terminating record.
\- For the purpose of charging, the NPLI and local time of the serving cell
shall be provided to the IMS.
\- For offline charging purpose the NPLI and local time shall also be provided
at the beginning of chargeable communication session or event.
\- For online charging purpose, the NPLI and local time shall be provided at
the receiving of the IMS service requests.
\- in the case of a communication originated by a roamer or terminating to a
roamer, the serving network shall provide the NPLI and local time of the
serving cell to the home network, based on the roaming agreement.
\- The local time may be represented as an explicit time stamp or as the UTC
with indication of UTC time zone offset and indication as to whether daylight
savings time is in effect.
\- For PSAP selection in the case of an IMS emergency call, the provision of
the NPLI shall be based on functions specified in TS 23.167 [3].
\- The solution shall minimize the additional signalling.
\- The solution shall not require modifications of the UE.
\- The solution shall allow for the network to provide NPLI if the UE has
insufficient credentials (e.g. UICC-less case).
\- The solution for providing the NPLI of the UE to the IMS shall not degrade
the service level, e.g. session setup delay, compared to the degradation
resulting from providing location in the corresponding CS service and shall
not be perceptible to the end user.
\- The solution should allow for the provision of NPLI to IMS nodes for IMS
subscribers using ICS in IMS Centralized Services scenarios as specified in TS
23.292 [4].
\- The number IMS entities required to do the retrieval of the NPLI should be
minimized.
\- NPLI shall be present in the SIP headers of SIP requests when iFCs are
evaluated by the S-CSCF, when this is needed for the events listed in clause
5.3.
## 5.3 Location Characteristics Requirements
\- In case the UE to be located is camped on a visited network (that is not an
equivalent PLMN to the HPLMN), depending on roaming agreements, either the
Cell-ID or only the GI identity of the visited PLMN where the UE is registered
for bearer services may be provided to the IMS nodes in the HPLMN. In all
cases, the Cell-ID or CSGID needs to be provided to IMS nodes in the VPLMN
when the UE to be located is camped on that same VPLMN or equivalent PLMN to
the VPLMN.
\- IMS nodes may require the network to provide the NPLI of the UE upon the
following events:
\- Session establishment (e.g. during the SIP INVITE for IMS Voice);
\- Session release;
\- Session modification (e.g. addition / removal of a media component during
an MMTel session);
\- SIP MESSAGE for SMS.
\- The network should be able to control which IMS nodes can obtain trusted
network provided NPLI and the network shall not provide it to non trusted
entities.
Editor\'s note: It needs to be determined if a network operator has a legal
obligation and/or operational need (e.g. CDRs) for IMS to obtain the NPLI from
the IP-CAN or if correlation between IMS records and IP-CAN records meets the
legal obligation and/or operational need.
Editor\'s note: If IMS is required to obtain the NPLI, it needs to be
determined what IMS entity (or entities) that needs to explicitly retrieve
such information from the access network.
## 5.4 Overview of IMS Functional Entities Requiring Location
Figure 5.4-1 gives a simplified overview of functional entities in IMS
requiring location information to support charging, data retention, special
call routing for localised services, emergency and lawful intercept.
Figure 5.4-1: Overview of IMS Functional Entities Requiring Location
Table 5.4-1 lists the IMS Functional entities involved in the call case and
the entities **where** location may needed due to LI, Charging, DR, special
call routing for localised services and Emergency.
Table 5.4-1: Summary of where the location may be needed in the network for a
particular call case
+---------+--------+-----+--------+--------+-----+----+------+ | Call | P-CSCF | MSC | E-CSCF | S-CSCF | TAS | AS | MGCF | | case | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | R | - | - | R | R | O | - | | Call | | | | | | | | | over | | | | | | | | | PS: | | | | | | | | | Orig | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | R | - | - | R | R | O | - | | Call | | | | | | | | | over | | | | | | | | | PS: | | | | | | | | | Term | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | - | R | - | R | R | O | - | | Call | | | | | | | | | using | | | | | | | | | ICS I2: | | | | | | | | | Orig | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | - | R | - | R | R | O | - | | Call | | | | | | | | | using | | | | | | | | | ICS I2: | | | | | | | | | Term | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | - | R | - | R | R | O | ? | | Call | | | | | | | | | using | | | | | | | | | ICS Mg: | | | | | | | | | Orig | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Basic | - | R | - | R | R | O | ? | | Call | | | | | | | | | using | | | | | | | | | ICS Mg: | | | | | | | | | Term | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | Em | R | - | R | R | - | - | - | | ergency | | | | | | | | | call | | | | | | | | | orig | | | | | | | | | ination | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | L | | | | | | | | | egend:\ | | | | | | | | | \"R\": | | | | | | | | | Needed | | | | | | | | | to be | | | | | | | | | known | | | | | | | | | for at | | | | | | | | | least | | | | | | | | | one of | | | | | | | | | LI, DR, | | | | | | | | | Ch | | | | | | | | | arging, | | | | | | | | | special | | | | | | | | | call | | | | | | | | | routing | | | | | | | | | for | | | | | | | | | lo | | | | | | | | | calised | | | | | | | | | s | | | | | | | | | ervices | | | | | | | | | or | | | | | | | | | Eme | | | | | | | | | rgency. | | | | | | | | | | | | | | | | | | \"O\": | | | | | | | | | Op | | | | | | | | | tional, | | | | | | | | | de | | | | | | | | | pending | | | | | | | | | on | | | | | | | | | s | | | | | | | | | ervice. | | | | | | | | | | | | | | | | | | \"-\": | | | | | | | | | Not | | | | | | | | | App | | | | | | | | | licable | | | | | | | | | (Not | | | | | | | | | used). | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+ | NOTE 1: | | | | | | | | | ICS Mg | | | | | | | | | in the | | | | | | | | | above | | | | | | | | | call | | | | | | | | | cases, | | | | | | | | | denotes | | | | | | | | | the | | | | | | | | | usage | | | | | | | | | of ICS | | | | | | | | | using | | | | | | | | | home | | | | | | | | | routing | | | | | | | | | via | | | | | | | | | MGCF, | | | | | | | | | where | | | | | | | | | the MSC | | | | | | | | | server | | | | | | | | | is not | | | | | | | | | e | | | | | | | | | nhanced | | | | | | | | | for | | | | | | | | | ICS; | | | | | | | | | for | | | | | | | | | origi | | | | | | | | | nation, | | | | | | | | | this | | | | | | | | | relies | | | | | | | | | on IN | | | | | | | | | (e.g. | | | | | | | | | CAMEL) | | | | | | | | | t | | | | | | | | | riggers | | | | | | | | | to | | | | | | | | | r | | | | | | | | | edirect | | | | | | | | | CS | | | | | | | | | ori | | | | | | | | | ginated | | | | | | | | | calls | | | | | | | | | to IMS. | | | | | | | | | | | | | | | | | | NOTE 2: | | | | | | | | | It is | | | | | | | | | assumed | | | | | | | | | that | | | | | | | | | the MSC | | | | | | | | | can | | | | | | | | | rely on | | | | | | | | | e | | | | | | | | | xisting | | | | | | | | | functi | | | | | | | | | onality | | | | | | | | | for | | | | | | | | | pr | | | | | | | | | oviding | | | | | | | | | the | | | | | | | | | f | | | | | | | | | eatures | | | | | | | | | listed | | | | | | | | | above. | | | | | | | | +---------+--------+-----+--------+--------+-----+----+------+
NOTE 3: The LRF has not been considered in the above assessment, and may need
to be considered in future updates.
Table 5.4-2 shows for each of the identified scenarios whether NPLI is
required, or not, during the execution of the corresponding IMS events (i.e.
before session establishment/modification can be committed).
Table 5.4-2: When NPLI is Needed
* * *
                                      Session Initiation (Offer)   Session Response (Offer Response)
Lawful Interception (LI) If available Must Data Retention (DR) If available
Must Charging If available (NOTE 4) Must Emergency Must - Routing Localized
Services Must - Location Based Service Triggering Must -
* * *
NOTE 4: For on-line charging using location-based fees, it may be required to
have NPLI in real time already at session setup.
# 6 Architecture Alternatives
## 6.1 HSS based NPLI retrieval based on existing mechanisms
### 6.1.0 General
This clause describes current mechanism for NPLI retrieval that is provided
over Sh. This scenario is applicable for location retrieval in home network
scenarios and does not consider IMS emergency calls (as emergency is a visited
NW service and the E-CSCF has no access to Sh).
Figure 6.1-1
For an MT or MO session, the AS requests the location information from the HSS
using the existing Sh-Pull (see TS 29.328 [5]). The AS can indicate, using the
Current Location IE, whether active location retrieval has to be initiated or
not. Furthermore, the AS should indicate the serving node(s) for which the
location is required (e.g., whether it should be queried from SGSN, MME, or
both).
Editor\'s note: Further enhancements may be needed to deal with terminating
call cases (as, following Active Location Retrieval, the UE might be being
released at the same time as the MT SIP signalling arrives in the VPLMN,
potentially leading to a lower paging success rate).
### 6.1.1 NPLI provision for MT call based on HSS interrogation
Figure 6.1.1-1: Information flow for Cell ID provision based on HSS
interrogation
NOTE: In this flow, it is intended to reuse existing procedures/messages and
specify new indications in existing messages and its related actions at
receiving nodes.
1\. S-CSCF receives the INVITE message and may interact with the AS according
to the service logic applied as specified in TS 23.228 [7].
2\. S-CSCF/AS sends the UE location information request message to the HSS
over Cx/Sh interface.
3-5.HSS interrogates the UE location information to the serving nodes and
indicates whether current serving cell of the UE in ACTIVE mode is needed. If
current serving cell of the UE in ACTIVE mode is requested and the serving
node is ISR active, it pages the UE and reports the HSS with the current
serving cell of the UE. Otherwise the serving node does not page the UE and
reply with the last known UE location information together with last UE access
time.
6\. Upon receiving UE location information from serving nodes, HSS determines
information to be forwarded to the S-CSCF/AS. HSS does not wait for further
reply from serving nodes if it has received the reply from one of serving
nodes and it indicates UE has successfully connected (or already connected) to
the network.
7\. S-CSCF/AS utilizes the received location information and performs further
IMS procedures based on applied service logics at S-CSCF/AS, e.g. normal
terminating call handing, call forwarding, etc.
NOTE: HSS interrogation flow illustrated from step3 to step5 can be used for
T-ADS purpose simultaneously.
### 6.1.2 NPLI provision during IMS emergency registration
This procedure enhances the existing IMS emergency call establishment
procedure in order to allow IMS to determine PSAP as soon as INVITE is
received from UE. It does not change the existing EPC/IMS architecture and the
principle specified in TS 23.167 [3].
This procedure applies when the following condition is met:
\- IMS emergency registration is used, as specified in TS 23.167 [3].
NOTE 1: If UE is roaming outside its home network, the emergency call set up
delay might be considerable.
The information flow is described below.
Figure 6.1.2-1 Cell ID provision during IMS emergency registration
  1. UE detects the emergency call event and, if it decides to, requests a PDN connectivity request with Request Type \"Emergency\" to the MME as specified in TS 23.401 [9]. This procedure can be Emergency attach procedure if the UE is required to do so.
NOTE 2: If UE does not send a new PDN connectivity request, there is no
trigger for MME to send the Notify Request in step2.
2\. MME detects whether the UE has valid subscription in step1. If this
condition is satisfied, MME sends the Notify Request to the HSS including an
emergency indication and the NPLI pertaining to the UE.
3\. The HSS stores the received NPLI together with the emergency indication as
temporary data and sends the Notify Response to the MME.
4-5. The UE initiates the IMS Emergency Registration as specified in TS 23.167
[3].
6\. The S-CSCF sends the Cx-Put/Pull to the HSS as specified in TS 23.167 [3]
and TS 23.228 [7]. In this step, the S-CSCF includes an emergency indication
to retrieve the stored NPLI.
7\. The HSS informs the S-CSCF of the NPLI stored for the UE, if available, by
sending Cx-Put Res/Pull Res message. If the HSS does not have NPLI for the UE,
the HSS requests the MME to provide the NPLI.
8\. The S-CSCF sends 200OK to the P-CSCF including the NPLI. If, as specified
in TS 23.167 [3], the operator configures INVITE with emergency indication
shall be forwarded from P-CSCF to S-CSCF, the S-CSCF sends 200OK to the P-CSCF
as specified in TS 23.228 [7].
9\. The P-CSCF sends 200OK to the UE as specified in TS 23.228 [7].
10-11. The UE initiates IMS emergency call session establishment procedure as
specified in TS 23.167 [3]. For further routing, TS 23.167 [3] applies. In
these steps, the P-CSCF or the S-CSCF informs E-CSCF of the pre-obtained NPLI
for the UE in INVITE. The E-CSCF determines the PSAP according to the NPLI.
NOTE 3: The above mentioned procedure does not restrict the use of the LCS
based location retrieval.
## 6.2 Enhanced PS domain location reporting
The current PS domain location reporting may continuously provide the PGW/GGSN
with the UE\'s cell location. The P-CSCF may subscribe to get this information
via PCC for being able to add that location information to the relevant SIP
messages.
However up-to-date cell location is only available for UEs in connected state.
Another problem of the current mechanism is that it provides the location
information by continuous reporting towards PGW/GGSN once the functionality is
activated. This may cause some heavy network signalling as every cell change
is reported and not only changes that are relevant for IMS.
The CS domain has similar location reporting requirements and also location
reporting functions for CS services. To some extent the RAN is not transparent
for CS/NAS signalling and provides the cell information with certain NAS
messages to the MSC. So the cell is available, for example, during CS call
setup in the MSC for originating and terminating calls.
The PS domain cell reporting can obviously not require that the RAN analyses
packets for SIP messages. However some enhancements are needed to limit the
signalling traffic caused by the continuous cell reporting in PS domain for
usage by IMS. Here it is proposed to enhance the current mechanism to report
cell changes only when there is activity on the IMS signalling bearer, which
makes it somehow comparable to CS domain behaviour. So the RAN would not
report every cell change, but only cell changes when IMS signalling bearer
data are transferred and the last reported cell is a different one. For GERAN
access the SGSN can reduce updating the GGSN/P-GW based on activity on the IMS
signalling bearer without involving the GERAN as the SGSN is aware of any cell
changes.
Thereby the PS domain approach can be utilised and also the related network
signalling can be kept at a reasonable level. The signalling reduction assumes
the use of a signalling bearer, i.e. IMS signalling is not transferred on some
other default bearer.
Some scenarios may require the current cell already for the first SIP message.
On the originating side of the service the UE is in active state because it
sent the SIP message. On the terminating side the current cell may be known
first after delivery of the first SIP message to the UE as the UE may be idle.
So the cell will be available for the first SIP response message, which seems
required anyhow as otherwise the Cell-ID or CSGID cannot be transferred to the
S-CSCF.
### 6.2.1 Signalling Flow for the Enhanced PS Domain Location Reporting
The following procedure describes the location information provision for the
enhanced PS domain location reporting.
Figure 6.2.1-1: Signalling flow for enhanced PS domain location reporting
1\. The PDN connection for IMS signalling is established. The PCRF requests
user location information reporting for IMS signalling events, which the P-GW
requests from MME. Any time the RABs are established the MME requests the
eNodeB to report the location for IMS signalling events.
**Mobile originating IMS session establishment:**
2\. An IMS level session establishment procedure is initiated. The SIP message
INVITE is sent from the UE to the P-CSCF.
3\. The transfer of the signalling message triggers the eNodeB to report user
location information reporting if the location changed compared to the last
reported cell. Reporting stops at P-GW, the P-GW does not forward the location
information towards the PCRF. This is to reduce the amount of PCC reports and
to adjust timing between the different paths.
4\. After receiving the SIP message, the P-CSCF retrieves user location
information from the PCRF by sending a Location Information Request message.
5a. In a GTP-based S5/S8 scenario, the PCRF sends Policy and Charging Rule
Provision to the P-GW to request the user location information.
5b. In a PMIP-based S5/S8 scenario, the PCRF sends Gateway Control and QoS
Rules Provision to the S-GW to request the user location information.
6a. In a GTP-based S5/S8 scenario, the P-GW reports the user location
information to the PCRF.
6b. In a PMIP-based S5/S8 scenario, the S-GW reports the user location
information to the PCRF.
7\. The PCRF notifies the P-CSCF of the UE\'s location information received in
step6.
8\. The P-CSCF forwards the user location information to other IMS entities
such as the S-CSCF. The added delay is the user location information retrieval
procedure between the P-CSCF and the P-GW/S-GW.
**Mobile terminating IMS session establishment:**
1\. The SIP message INVITE arrives at the S-GW.
2\. If the UE is in ECM-IDLE state, network triggered service request
procedure is performed due to inexistence of user plane connection. For more
detail of this procedure refer to clause 5.3.4.3 of TS 23.401 [9].
3\. The S-GW sends the SIP message INVITE to the UE.
4\. The transfer of the signalling message triggers the eNodeB to report user
location information reporting if the location changed compared to the last
reported cell. Reporting stops at P-GW, the P-GW does not forward the location
information towards the PCRF. This is to reduce the amount of PCC reports and
to adjust timing between the different paths.
5\. The UE sends the SIP message 200 OK back to the IMS.
6\. After receiving the SIP message, the P-CSCF retrieves user location
information from the PCRF by sending a Location Information Request message.
7a. In a GTP-based S5/S8 scenario, the PCRF sends Policy and Charging Rule
Provision to the P-GW to request the user location information.
7b. In a PMIP-based S5/S8 scenario, the PCRF sends Gateway Control and QoS
Rules Provision to the S-GW to request the user location information.
8a. In a GTP-based S5/S8 scenario, the P-GW reports the user location
information to the PCRF.
8b. In a PMIP-based S5/S8 scenario, the S-GW reports the user location
information to the PCRF.
9\. The PCRF notifies the P-CSCF of the UE\'s location information received in
step10a/step10b.
10\. The P-CSCF forwards the user location information to other IMS entities
such as the S-CSCF.
### 6.2.1a Using GTP-U Messages for Enhanced PS Domain Location Reporting
As an alternative to the location information reporting by signalling messages
GTP-U messages may be used for the enhanced PS domain location reporting. This
can offload the signalling plane and may bring advantages for the timing
behaviour. The information is as described in clause 6.2.1 the only difference
is for steps 3) of the mobile originating or steps 6) of the mobile
terminating session initiation. The location reporting is moved from
signalling to GTP user plane. Two alternatives are considered.
In alternative A the eNodeB adds the user location information to the GTP-U
extension header. The P-GW or the S-GW, respectively retrieves the location
information from the GTP-U extension header when it receives the PDUs. When
there is no uplink G-PDUs, the eNodeB generates one empty packet with the user
location information in the GTP-U header. Whether this is needed and how this
is done is FFS. If, for example, the location is always only needed together
with uplink signalling messages then it is not needed.
For alternative B a separate GTP user plane message is introduced for location
reporting. In addition a GTP-U acknowledgment message is needed. Alternative A
does not need a GTP-U acknowledgement message as the IMS message would be
repeated if the GTP-U PDU with the location information header gets lost.
Table 6.2.1-1 shows the advantages and impacts of the two alternatives of
GTP-U based Enhanced PS Domain Location Reporting.
Table 6.2.1-1: Analysis of Two Alternatives of GTP-U Messages for Enhanced PS
Domain Location Reporting
+-----------+---------------------------+---------------------------+ | | Alt A | Alt B | +-----------+---------------------------+---------------------------+ | Advantage | No additional message | Shorter message path than | | | transfer, NPLI can be put | in the control plane. | | | in the header of a data | | | | packet. | | +-----------+---------------------------+---------------------------+ | Impact | **Change to the eNodeB:** | **There are two kinds of | | | | alternatives:** | | | 1) The eNodeB insert the | | | | NPLI in the data packet | 1) New GTP-U messages | | | GTP-U header; | need to be defined. | | | | | | | 2) When there is no | This mechanism has impact | | | uplink PDUs, the eNodeB | in the eNodeB, the PGW, | | | may need to generate an | and also requires change | | | empty packet with the | in the SGW, since it | | | user location information | shall forward these | | | in the GTP-U header; | messages to the next hop, | | | | i.e., the eNodeB/PGW. | | | 3) This can be achieved | | | | by newly defined GTP-U | 2) Existing GTP-U | | | extension header type. | messages with new defined | | | | information element is | | | This mechanism reuses the | needed. | | | mechanism of extension | | | | header type and do not | This mechanism requires | | | bring additional change | change in the SGW, since | | | to the network elements. | it shall forward these | | | | messages to the | | | **Change to the PGW:** | eNodeB/PGW if the IE for | | | | location information is | | | The PGW needs to check | included. | | | each packet to find | | | | whether there is NPLI in | | | | the header. Suitable | | | | extension header type may | | | | alleviate some work from | | | | the PGW. | | +-----------+---------------------------+---------------------------+
## 6.3 LCS based NPLI provision from MME to GMLC
### 6.3.1 Overview
This alternative reuses LCS functionality for location information (i.e. Cell-
ID) provision, only involving MME and GMLC . SLg interface between MME and
GMLC is enhanced to indicate the location request is only for Cell-ID
retrieval.
The figure below shows the architecture of this alternative. For Cell-ID level
location information provision, only the enhanced GMLC is needed to be
deployed, i.e. there is no need to deploy E-SMLC.
Figure 6.3.1-1 LCS based Cell-ID Provision without E-SMLC involved
The SLg interface is enhanced to allow GMLC to only request subscriber\'s
Cell-ID from MME, without E-SMLC involved. This will be done by an explicit
Cell-ID request indication in Provide_Location_Request (PLR) message sent from
GMLC to MME. Such explicit Cell-ID request indication can be an individual
parameter (e.g. Cell-ID-Only) in PLR message, or be a sub-parameter in LCS-QoS
AVP.
When receiving PLR message which indicates only Cell-ID is requested, the MME
shall not initiate SLs procedure to E-SMCL. Instead the MME sends back
Provide_Location_Answer (PLA) message to GMLC, only including the Cell-ID of
requested subscriber but no detail geography location information. As a
result, the Cell-ID provision procedure will be accelerated as there is no
complex location procedure involved (e.g. no further LPP procedure between
E-SMLC and UE, or LPPa procedure between E-SMLC and eNodeB).
The Ml interface is utilized with enhancement to indicate that only Cell-ID is
requested. When receiving IMS signalling, the IMS nodes (e.g. E/P-CSCF)
retrieves subscriber\'s NPLI via Ml interface from the Location Retrieval
Function (LRF) which may be internally provided by the GMLC. Another option
is, the IMS nodes (e.g. E/P-CSCF) may act as LCS client to request NPLI
directly from GMLC, using the enhanced Le interface which allows LCS client
requesting subscriber\'s Cell-ID only.
With the enhancement to LCS procedure, this alternative can be used for the
NPLI provision for PSAP selection, localized service call routing, and normal
IMS service.
This procedure could also be applied to UTRAN with similar changes.
### 6.3.2 Procedure between GMLC and Serving Nodes
The figure below shows the detailed procedure between GMLC and serving node
(e.g. SGSN/MME). In this procedure, GMLC requires only Cell-ID from SGSN/MME
without triggering LCS procedures to SMLC/E-SMLC.
Figure 6.3.2-1: Location procedure between GMLC and SGSN/MME
1\. The IMS node (e.g. P-CSCF/E-CSCF) decides to retrieve UE location
information (i.e. Cell-ID). A location request is sent from IMS node to
LRF/GMLC, including a Cell-ID request indication.
2\. After receiving the Location request, the LRF transfers the location
request to GMLC internally. The GMLC sends request to HLR/HSS for getting
serving nodes.
Common MT-LR procedures defined in TS 23.271 [6] are used by GMLC to find the
serving nodes (e.g. SGSN/MME). The requesting GMLC may interact with HSS for
obtaining the serving nodes (e.g. SGSN/MME). If multiple serving nodes\'
addresses are returned by the HSS, the GMLC will select the serving node based
on local policy (e.g. the top of the return list). When sending multiple
serving nodes, the HSS uses the TADS procedure to discover the prioritized
serving node.
For emergency service, the NI-LR is used for location provision. For UICC-less
case, retrieving of the serving node address in HSS is not supported.
3\. The GMLC sends Provide_Location_Request (PLR) message to SGSN/MME,
carrying a Cell-ID request indication.
4\. The SGSN/MME may interact with RAN node to retrieve updated Cell-ID.
5\. The SGSN/MME responds with Provide_Location_Answer (PLA) message to GMLC,
only including the Cell-ID of the UE.
6\. The GMLC/LRF forwards the location information to the IMS node.
### 6.3.3 Pre-establish connection between GMLC and serving node
This procedure pre-establishes connection between SGSN/MME and GMLC, making
the GMLC aware of the Cell-ID prior to the location query from IMS nodes.
Subsequent location query from GMLC can directly go to SGSN/MME without
querying HSS for serving nodes.
In non-emergency case, SGSN/MME can push the Cell-ID to the GMLC on the first
detection of IMS signalling bearer / voice bearer (i.e. QCI=5 or 1), according
to the operator policy and/or the subscription instruction. In roaming case
the Cell-ID is pushed to H-GMLC via V-GMLC.
The figure below shows the enhanced procedures:
Figure 6.3.3-1: Pre-establishes connection between SGSN/MME and GMLC
A1) The UE performs attach procedure.
A2) The SGSN/MME detects the initiation of IMS signalling / voice bearer. This
may occur during the attach procedure, PDP/PDN connection procedure or
dedicated bearer establishment procedure.
For IMS signalling over dedicated bearer, the SGSN/MME may detect both
establishment and release of IMS signalling, and sends Cell-ID to GMLC
accordingly.
A3) According to the local policy or subscription instruction, the SGSN/MME
sends Provide Location message to GMLC, including current Cell-ID of the UE.
A4) The GMLC responds with Provide Location Response message. After step A4,
the SGSN/MME and GMLC store the addresses for each other and pre-establish
connection.
B1) Later on, the IMS node (e.g. P/E-CSCF) determines to initiate location
query, e.g. on the IMS session establishment.
B2) The IMS node (e.g. P/E-CSCF) sends location request to LRF/GMLC,
indicating Cell-ID is required.
The IMS nodes shall select the same GMLC as the SGSN/MME has selected, which
follows the same principle as EPC-NI-LR procedure used for emergency case
described in TS 23.271 [6], clause 9.1.17.
B3) The GMLC may interact with SGSN/MME to query updated Cell-ID information.
B4) After getting the Cell-ID of UE, the GMLC/LRF sends location response
back, including the Cell-ID of UE.
### 6.3.4 Procedures for localized call routing
This procedure is intended to be used for PSAP selection and localized
services requiring special call routing where the NPLI is needed before the
IMS level procedure continues. It is assumed that the alternative described in
6.4 is used for other purpose, e.g. charging. It is also noted that the
mechanism described in this clause can be used for the case of SMS message
delivery at IMS.
In this procedure, the E/S-CSCF can obtain the NPLI before selecting the
correct PSAP or the destination of the call routing.
Editor\'s note: The support of localized service based on terminating user
location is FFS.
Figure 6.3.4-1: LCS based Location Provision Architecture
Editor\'s note It is FFS whether functionality of the S-CSCF - LRF Interface
and E-CSCF - LRF Interface is the same.
The information flow of this procedure is described below.
Figure 6.3.4-2 Location information provision for the special call routing
based on the originating UE location
During the AF session establishment, P-CSCF obtains the RAT type information
where UE is currently camping on.
A1) The P-CSCF detects the AF session establishment trigger, e.g. IMS
registration.
A2) The P-CSCF sends the session establishment message (AA Request) to the
PCRF requesting RAT type information if such is detected by the PCRF.
A3) The PCRF sends the session establishment Ack message (AA Answer) to the
P-CSCF indicating current RAT type information.
NOTE 1: PCRF updates the P-CSCF of RAT type information if RAT change event
occurs, e.g. IDLE mode mobility.
With these steps, P-CSCF maintains the current RAT information while UE is in
ACTIVE state (P-CSCF may also obtain current RAT information in IDLE mode if
ISR is not active).
B1) The UE sends an INVITE to the P-CSCF. This message contains an emergency
indication if it is for emergency call.
B2) P-CSCF forwards the INVITE message to S-CSCF. If P-CSCF detects the call
is an emergency call, the INVITE message is forwarded to the E-CSCF, instead.
In sending INVITE message, P-CSCF sets the network obtained RAT type
information where UE is currently connected.
Editor\'s note: It is FFS how to handle the case where UE moves to the
different RAT after stepB2.
B3) In order to select the correct routing destination, e.g. PSAP, E/S-CSCF
requests UE\'s location information to LRF/GMLC. This information indicates
RAT type information where UE is currently connected and what type of location
information is needed, e.g. Cell ID or location estimate.
NOTE 2: This step requires the modification to the Rel9 Ml interface.
B4) LRF/GMLC queries the serving node(s) of the UE.
B5) LRF/GMLC answers the serving node(s) information of the UE. The answer may
contain multiple serving nodes information according to the registration
status.
B6) LRF/GMLC selects the serving node address based on RAT type information
received in stepB3, and sends the Provide Subscriber Location indicating the
Cell ID is requested.
B7) MME performs the Location Reporting procedure to the eNodeB and obtain
latest Cell ID information. This step may be skipped based on operator
configuration and/or regulatory requirements. If Location Reporting procedure
is not performed, the MME returns the stored Cell ID in step B8.
B8) MME sends Provide Subscriber Location Ack and informs the obtained Cell ID
information to the LRF/GMLC.
B9) LRF/GMLC reports the Cell ID information received in step B8.
NOTE 3: This step requires the modification to the Rel9 MI Interface.
B10) E/S-CSCF selects the correct routing destination based on the Cell ID of
the UE.
After these procedures, the call establishment procedure is continued, i.e. TS
23.167 [3] for the emergency and TS 23.228 [7] for the localized service.
## 6.4 NPLI provision using EPS and PCC Framework
### 6.4.0 General
This solution utilizes the EPS framework to provide the NPLI (optionally with
local time) to the PDN GW/GGSN and the PCC framework to provide NPLI to the
IMS.
Procedures described in clauses 6.4.1, 6.4.2 and 6.4.3 are used by EPC to
provide NPLI to the IMS at the time of session establishment, session release
and session modification. For IMS procedures without EPC bearer interaction,
e.g. SMS delivery, the procedure described in clause 6.4.4, or, the procedure
described in 6.7, is used for the IMS to request NPLI to be provided by the
EPS.
In this alternative, no architecture change for EPC/IMS is needed.
### 6.4.1 NPLI provision at session establishment
The following procedure describes the location information provision at the
time of IMS session origination and termination.
When the session is originated or terminated, the bearer establishment
procedure. e.g. for voice media, is triggered by the P-CSCF in receiving the
SIP message (Offer Response) from the IMS entity of terminating side or
terminating UE, respectively. During this procedure, MME forwards NPLI to the
P-CSCF via S-GW, P-GW (in case of GTP-based S5/S8) and PCRF.
This procedure does not require additional signalling for location information
provision.
NOTE 1: This procedure does not apply for cases where no bearer establishment
is required, e.g. SMS delivery.
NOTE 2: This procedure does not apply for services which require location
information at S/E-CSCF for special call routing, e.g. PSAP selection and
Localized Services.
Figure 6.4.1-1: Location information provision at session establishment
1\. IMS level session establishment procedure is initiated. This procedure is
common for IMS MO call and MT call cases.
Editor\'s note: The interaction with the IMS procedure needs to be clarified
based on the requirement, e.g. whether IMS procedure can continue in parallel
with following steps.
2\. P-CSCF authorizes the resources necessary for this session and provides
the service information to the PCRF. In this step, depending on operator
policy, the P-CSCF requests the notification of UE\'s NPLI when PCRF obtains
it as part of bearer level event.
**Steps for PMIP-based S5/S8 only (A-1 to A-9):**
PCRF initiates the gateway control and QoS rules provision procedure and
triggers the S-GW to allocate the dedicated bearer. PCRF requests UE\'s
current location from S-GW and S-GW forwards the request to the MME. During
this procedure, MME informs the S-GW of UE\'s NPLI and it is forwarded to the
PCRF. Based on operator configuration, MME may interact with the eNodeB, e.g.
via S1-AP messages, to retrieve specific location information such as E-UTRAN
CGI where UE is currently connected. Otherwise MME replies NPLI stored at MME.
Upon receiving NPLI from Create Bearer Response, the SGW initiates the Gateway
Control and QoS rules Request procedure, sending the NPLI to the PCRF. The
PCRF initiates the PCC Rules Provision Procedure and provides NPLI to the PCEF
if needed.
**Steps for GTP-based S5/S8 only (B-1 to B-9):**
PCRF initiates the policy and charging rules provision procedure requesting
NPLI from P-GW. P-GW initiates dedicated bearer activation procedure by
receiving step3 and P-GW forwards the request to the MME via S-GW. During this
procedure, MME informs the S-GW of NPLI and it is forwarded to the P-GW. Based
on operator configuration, MME may interact with the eNodeB, e.g. via S1-AP
messages, to retrieve specific location information such as E-UTRAN CGI where
UE is currently connected. Otherwise MME replies NPLI stored at MME. Upon
receiving NPLI from Create Bearer Response, the PGW initiates the IP-CAN
Session Modification procedure, sending the NPLI to the PCRF.
3\. When detecting the bearer level event on location information, PCRF
notifies the P-CSCF of the NPLI retrieved in step A-6 (in case of PMIP-based
S5/S8) or step B-8 (in case of GTP-based S5/S8).
4\. P-CSCF acknowledges to the PCRF.
### 6.4.2 NPLI provision at session release
The following procedure describes the NPLI provision at the time of IMS
session release.
The bearer deactivation procedure is triggered by the P-CSCF by receiving the
BYE message from the UE or other IMS entity or by getting other bearer release
trigger at P-CSCF, e.g. P-CSCF initiated bearer release due to O&M reason.
During this procedure, similar to the session establishment procedure case,
MME forwards the NPLI to the P-CSCF via S-GW, P-GW (in case of GTP-based
S5/S8) and PCRF.
This procedure does not require additional signalling for NPLI provision.
NOTE 1: This procedure does not apply for cases where no bearer establishment
is required, e.g. SMS delivery.
NOTE 2: This procedure does not apply for services which require NPLI at
S/E-CSCF for special call routing, e.g. PSAP selection and Localized Services.
Figure 6.4.2-1: Location information provision at session release
1\. IMS level session release procedure is initiated by P-CSCF detecting the
session release event, e.g. receiving SIP BYE message.
Editor\'s note: The interaction with the IMS procedure needs to be clarified
based on the requirement, e.g. whether IMS procedure can continue in parallel
with following steps.
2\. P-CSCF removes the authorization for the resources related to the bearer
being released and inform to PCRF. In this step, depending on operator
configuration, P-CSCF requests the notification of the NPLI when PCRF obtains
it as part of bearer level event.
**Steps for PMIP-based S5/S8 only (A-1 to A-9):**
PCRF initiates the gateway control and QoS rules provision procedure and
triggers the S-GW to deactivate the dedicated bearer. PCRF requests the NPLI
from S-GW and S-GW forwards the request to the MME. During this procedure, MME
informs the S-GW of the NPLI and it is forwarded to the PCRF. Based on
operator configuration, MME may interact with the eNodeB, e.g. via S1-AP
messages, to retrieve specific location information such as E-UTRAN CGI where
UE is currently connected. Otherwise MME replies with the NPLI stored at MME.
Upon receiving NPLI from Delete Bearer Response, the SGW initiates the Gateway
Control and QoS rules Request procedure, sending the NPLI to the PCRF. The
PCRF initiates the PCC Rules Provision Procedure and provides NPLI to the PCEF
if needed.
**Steps for GTP-based S5/S8 only (B-1 to B-9):**
PCRF initiates the policy and charging rules provision procedure requesting
the NPLI from P-GW. P-GW initiates dedicated bearer deactivation procedure by
receiving step3 and P-GW forwards the request to the MME via S-GW. During this
procedure, MME informs the S-GW of the NPLI and it is forwarded to the P-GW
and PCRF. Based on operator configuration, MME may interact with the eNodeB,
e.g. via S1-AP messages, to retrieve specific location information such as
E-UTRAN CGI where UE is currently connected. Otherwise MME replies with the
NPLI stored at MME. Upon receiving NPLI from Create Bearer Response, the PGW
initiates the IP-CAN Session Modification procedure, sending the NPLI to the
PCRF.
NOTE 3: In case of PMIP-based S5/S8, the NPLI is not reported.
3\. By detecting the bearer level event on location information, PCRF notifies
the P-CSCF of the NPLI retrieved in stepA-6 (in case of PMIP-based S5/S8) or
step .B-8 (in case of GTP-based S5/S8).
4\. P-CSCF acknowledges to the PCRF.
### 6.4.3 NPLI provision at session modification
In case of a session modification event at IMS, either of the following
procedures will take place based on required procedure at bearer level, e.g.
addition of bearer, removal of bearer, bearer QoS modification:
\- NPLI provision procedure at session establishment (Figure 6.4-1), or
\- NPLI provision procedure at session release (Figure 6.4-2), or
\- NPLI provision procedure illustrated in Figure 6.4-3 in this clause;
Figure 6.4-1 is used when the bearer establishment is triggered, e.g. addition
of a media component during an MMTel session.
Figure 6.4-2 is used when the bearer deactivation is triggered, e.g. deletion
of a media component during an MMTel session.
Figure 6.4-3 is used when the bearer modification is triggered, e.g. QoS
modification for the use of newly negotiated codec. Bearer modification
procedure is triggered by the P-CSCF in receiving the SIP message (SDP Answer)
from the IMS entity of terminating side or terminating UE, respectively.
During this procedure, MME forwards the NPLI to the P-CSCF via S-GW, P-GW (in
case of GTP-based S5/S8) and PCRF.
NPLI provision procedure illustrated in figure 6.4.3-1 does not require
additional signalling for NPLI provision.
Figure 6.4.3-1: Location information provision in bearer level session
modification
1\. Session modification trigger is detected by the P-CSCF.
Editor\'s note: The interaction with the IMS procedure needs to be clarified
based on the requirement, e.g. whether IMS procedure can continue in parallel
with following steps.
2\. P-CSCF authorizes the change in resources for this session and provides
the service information to the PCRF. In this step, depending on operator
policy, the P-CSCF requests the notification of the NPLI when PCRF obtains it
as part of bearer level event.
**Steps for PMIP-based S5/S8 only (A-1 to A-6):**
Corresponding steps as described in Figure 6.4-1 are performed except that the
create bearer procedure is replaced with update bearer procedure. Upon
receiving NPLI from Delete Bearer Response, the SGW initiates the Gateway
Control and QoS rules Request procedure, sending the NPLI to the PCRF. The
PCRF initiates the PCC Rules Provision Procedure and provides NPLI to the PCEF
if needed.
**Steps for GTP-based S5/S8 only (B-1 to B-7):**
P-CSCF initiates the policy and charging rules provision procedure requesting
the NPLI from P-GW. Corresponding steps as described in Figure 6.4-1 are
performed except that the create bearer procedure is replaced with update
bearer procedure. Upon receiving NPLI from Create Bearer Response, the PGW
initiates the IP-CAN Session Modification procedure, sending the NPLI to the
PCRF.
3\. When detecting the bearer level event on location information, PCRF
notifies the P-CSCF of the UE location information retrieved in stepA-6 (in
case of PMIP-based S5/S8) or step B-7 (in case of GTP-based S5/S8).
4\. P-CSCF acknowledges to the PCRF.
### 6.4.4 Bearer Independent NPLI Fetch by P-CSCF
The following procedure describes the NPLI fetch when P-CSCF receives IMS
signalling. The procedure is applicable for both scenarios where bearer
creations/modifications/releases are required (e.g. for session
establishment/release) or not required (e.g. for sending an IMS SMS). In this
case the P-CSCF sends an on demand request to PCRF for NPLI retrieval.
To get the NPLI, the P-CSCF sends Provide Service Info message to the PCRF
including NPLI Request indication. The bearer update procedure is reused to
carry such NPLI Request Indication and bring back the NPLI to P-CSCF.
The figure below shows the NPLI retrieval when P-CSCF receives a SIP Message
from the UE.
Figure 6.4.4-1: Bearer Independent NPLI fetch by P-CSCF
1\. The P-CSCF receives a SIP Message. This procedure is common for MO and MT
cases.
Editor\'s note: The interaction with the IMS procedure needs to be clarified
based on the requirement, e.g. whether IMS procedure can continue in parallel
with following steps.
2\. From its configured operator policies, the P-CSCF determines whether this
SIP message requires to obtain NPLI. The P-CSCF provides service information
to the PCRF with a NPLI Request indication to request the notification of the
NPLI when PCRF obtains it as part of bearer level event. The P-CSCF may
subscribe the NPLI change events, according to operator\'s policy.
**Steps for PMIP-based S5/S8 only (A-1 to A-9):**
PCRF initiates the gateway control and QoS rules provision procedure. PCRF
requests the NPLI from S-GW and S-GW forwards the notification to the MME.
During this procedure, the NPLI Request indication is sent from PCRF to S-GW
and MME, then MME informs the S-GW of the NPLI and it is forwarded to the
PCRF. Based on operator configuration, MME may interact with the eNodeB, e.g.
via S1-AP messages, to retrieve specific location information such as E-UTRAN
CGI where UE is currently connected. Otherwise MME replies with the NPLI
stored at MME. Upon receiving NPLI from Delete Bearer Response, the SGW
initiates the Gateway Control and QoS rules Request procedure, sending the
NPLI to the PCRF. The PCRF initiates the PCC Rules Provision Procedure and
provides NPLI to the PCEF if needed.
**Steps for GTP-based S5/S8 only (B-1 to B-9):**
PCRF initiates the policy and charging rules provision procedure requesting
the NPLI from P-GW. P-GW initiates bearer modification procedure after
receiving step3 only for requesting the NPLI, and P-GW forwards the
notification to the MME vis S-GW. During this procedure, MME informs the S-GW
of the NPLI and it is forwarded to the P-GW and PCRF. Based on operator
configuration, MME may interact with the eNodeB, e.g. via S1-AP messages, to
retrieve specific location information such as E-UTRAN CGI where UE is
currently connected. Otherwise MME replies with the NPLI stored at MME. Upon
receiving NPLI from Create Bearer Response, the PGW initiates the IP-CAN
Session Modification procedure, sending the NPLI to the PCRF.
NOTE: In case of PMIP-based S5/S8, the NPLI is not reported.
3\. When detecting the bearer level event on location information, PCRF
notifies the P-CSCF of the NPLI retrieved in stepA-6 (in case of PMIP-based
S5/S8) or step B-8 (in case of GTP-based S5/S8).
4\. P-CSCF acknowledges to the PCRF.
5\. After receiving the NPLI, the P-CSCF adds the NPLI to the triggering SIP
Message and forwards it to the S-CSCF if it is an originating message. For a
terminating triggering SIP message the P-CSCF adds the NPLI to the
corresponding SIP response message before forwarding the message to the
S-CSCF.
### 6.4.5 NPLI provision during IMS emergency call
For IMS emergency service, either PCC-based procedures (as described in
clauses 6.4.1 to 6.4.4) or LRF-based procedures based on LCS (as described in
TS 23.167 [3]) can be used for location provision, according to operator
policy.
P-CSCF can determine whether to trigger PCC based NPLI retrieval according to
local policies. Upon receiving SIP INVITE for IMS emergency call, the P-CSCF
queries NPLI from PCRF if there is no NPLI obtained or the NPLI is outdated.
Procedures described in clauses 6.4.1 to 6.4.4 are used by PCRF for NPLI
retrieval. After retrieving the NPLI, the P-CSCF forwards the SIP INVITE to
E-CSCF carrying the NPLI, and the E-CSCF can use this NPLI for PSAP routing.
If there is no NPLI provided the E-CSCF uses LRF-based procedure based on LCS
(as described in TS 23.167 [3]) for location retrieval.
## 6.5 Void
## 6.6 Correlation of IMS and IP-CAN CDRs
### 6.6.1 General
According to TS 23.228 [7] clause 4.9, IMS and IP-CAN CDRs can be correlated:
_\"IM CN subsystem functional elements provide support for offline and online
charging. This includes support for charging correlation, e.g. between IM CN
subsystem and PS domain. The charging architecture, charging principles and
charging data for IM CN subsystem are described in TS 32.240 [25] and TS
32.260 [26]. The charging correlation information between IM CN subsystem and
PS domain are also described in TS 24.229 [10a] and TS 29.207 [11a].\"_
The following solutions are based on correlation between IMS and IP-CAN.
### 6.6.2 IP-CAN records all cell changes
Currently, the IP-CAN has the ability to record every cell change. This
capability could be selectively activated for all connections to an IMS APN.
This would ensure the serving Cell-ID/CSGID is recorded the entire time the UE
is active on packet services associated with IMS. It may then be possible to
determine the serving Cell-ID/GSGID during IMS events from correlation between
IMS CDRs and IP-CAN CDRs. e.g. IMS CDRs indicate a UE established an IMS
session at a certain time, with associated bearer(s) identification. IP-CAN
CDRs corresponding to this(these) bearer(s) will have which cell the UE was on
at that time, with associated IMS session identification. Through correlation,
it is known which cell was serving the UE at the start of the IMS session.
NOTE: Recording every cell change can cause a significant increase in
signalling.
Editor\'s note: IP-CAN recording of every cell change does not directly align
with the objective of obtaining the serving Cell-ID/CSGID for the identified
IMS events. It is FFS to determine if correlation of the CDRs of the IMS
events with the IP-CAN CDRs that contain the serving Cell-ID/CSGID meets the
objective.
### 6.6.3 IP-CAN records serving Cell-ID/CSGID for limited conditions
Having the IP-CAN record every cell change can have a significant signalling
impact on the IP-CAN, since every change is requested to be reported to the
PGW. Signalling can be optimized if the serving cell is only requested to be
reported during IP-CAN events that correspond to IMS events. Some examples
are:
\- Establishment of IMS default bearer in IP-CAN may correlate with IMS
Registration
\- Establishment of dedicated bearer may correlate with IMS session
establishment
\- Release of dedicated bearer may correlate with IMS session end.
Editor\'s note: It is FFS to determine if all IMS charging events that need
Cell-ID/CSGID can be correlated to IP-CAN events.
## 6.7 Void
## 6.8 NPLI via GTP-U request for non-Session based IMS
### 6.8.1 Using GTP S5/S8
For IMS services that are equivalent to GSM/UMTS SMS, it is unlikely that a
dedicated bearer will be required. In this case, one proposal to consider is
the use of modified GTP Echo Request/Response style user plane GTP packets.
When an IMS \'SMS\' is detected, the IMS sub-system could request the PCRF to
request the GGSN/P-GW to send a \"GTP-U NPLI request\" towards the RAN.
For LTE in the home network, this Request should terminate on the eNodeB.
Static configuration of the eNodeB could be used to return the eNodeB ID.
However, more dynamic interaction is needed if the actual cell ID is needed --
however, it is not clear what granularity is required by the authorities. For
other cases, e.g. when roaming, the S-GW needs to forward the GTP-U request on
to the eNodeB.
In UMTS with direct tunnel, the RNC needs to insert the current NPLI in the
response. Without direct tunnel, the SGSN needs to interact with the Iu
interface Location Reporting feature.
In 2G, the SGSN responds with the NPLI.
If the UE is in Idle mode, the S-GW/SGSN can use the new GTP-U control packet
to trigger paging to retrieve the Cell ID of the UE.
This proposal is not ideal: typically it involves a mix of control and user
plane functionalities. However, it may be a relatively simple procedure to use
in LTE, and, a lightweight procedure that can be readily extended for other
purposes.
### 6.8.2 Using PMIP based S5/S8
Editor\'s note: This is FFS.
## 6.9 NPLI retrieval based on Intelligent Network exchange
This clause describes a mechanism for NPLI retrieval that is possible when the
network is using ICS-Mg mechanism. This scenario is applicable for location
retrieval in home or roaming network scenarios and does not consider IMS
emergency calls.
### 6.9.1 ICS Mg origination
Figure 6.9.1-1: NPLI retrieval based on IN exchange upon ICS Mg origination
1\. A UE sends a CS call setup message (as described in TS 23.292 [4], clause
7.3.2.1.3).
2\. An IN (e.g. CAMEL) trigger present in the user profile causes the MSC
Server to query the IN SCP to fetch an IMRN. NPLI is included in the query.
NOTE: The NPLI in this case consists of mandatory information elements
\"locationNumber\", \"locationInformation\" and \"mscAddress\" of the
\"Initial DP\" message, see TS 23.078 [8].
3\. The IN SCP stores the NPLI and provides an IMRN.
4-6. The call is routed to SCC AS as specified in TS 23.292 [4], clause
7.3.2.1.3, steps 3 to 5.
7\. The SCC AS interacts with the SCP to obtain the NPLI and sends the INVITE
to the S-CSCF, containing NPLI in the NW PANI.
## 6.10 2-phase solution
### 6.10.1 Overview
The concept of this solution is to use the UE as the primary source of user
location (the User Provided Location Information, or UPLI), where that is
considered acceptable. NPLI information is also obtained and inserted in IMS
messages for distribution to other IMS entities. The NPLI can also be used to
verify the UPLI, depending on whether there is a local operator policy to do
so.
Existing functionality described in TS 23.228 [7] and TS 24.229 [10] allows
for the UE to send location information to the network (in the P-Access-
Network-Info) . The information that the UE uses to populate the P-Access-
Network-Info (containing e.g. the Cell ID) comes originally from the network.
In the vast majority of cases the location information in the UPLI provided by
the UE will be correct and valid.
Thus for some scenarios where it is necessary to process location information
in the INVITE, this location information could be the UPLI. Using the UPLI in
this way has the advantage that there is no impact on the session
establishment delay. For scenarios where the location information is not
required in the INVITE, the NPLI retrieved (using methods described elsewhere
in the TR) is inserted in subsequent IMS messages and is available for any
applications that require it. In this case the UPLI can be ignored, or may be
included in CDRs, and/or may be stored for data retention purposes.
Therefore the approach is to use the UPLI provided in e.g. the INVITE for
functionality that requires user location. In parallel with the handling of
the INVITE, the NPLI is retrieved (by the P-CSCF, for example). The NPLI can
then be inserted in subsequent IMS messages, e.g. for fraud detection
purposes.
Optionally the NPLI can be compared with the UPLI, if it is operator policy to
validate the UPLI against the NPLI. Since the UE could be moving from cell to
cell there could of course be a difference between the UPLI and the NPLI. When
the difference is small, due to the UE moving, the UPLI can still be
considered valid. Operator policy will determine the behaviour of the network
if the UPLI is considered not to be valid.
Editor\'s note: The criteria for comparing UPLI and NPLI are for further
study.
The method used for retrieving the NPLI can be one of the alternatives
described in the other clauses of the TR.
### 6.10.2 Call flows
#### 6.10.2.1 Originating session establishment
Figure 6.10.2.1-1: Originating session establishment
1\. The PDN connection for IMS signalling is established. Depending on which
solution is being used for NPLI retrieval the PCRF might request user location
information reporting for IMS signalling events.
2\. The UE performs IMS registration.
3\. The UE initiates IMS session establishment by sending an INVITE towards
the P-CSCF. It includes the UPLI (in the P-Access-Network-Info header field).
4\. The P-CSCF forwards the INVITE. (Optionally, it will have interacted with
the P-CRF to authorize the service information, as per existing procedures.)
5\. The P-CSCF retrieves the NPLI, using one of the methods detailed in the
other clauses of this TR and can insert the NPLI in subsequent IMS messages.
\- Optionally the NPLI can be compared with the UPLI and operator policy
determines whether the UPLI can be considered valid, and what the behaviour
should be if the UPLI is considered invalid.
#### 6.10.2.2 Terminating session establishment
Figure 6.10.2.2-1: Terminating session establishment
1\. The PDN connection for IMS signalling is established. Depending on which
solution is being used for NPLI retrieval the PCRF might request user location
information reporting for IMS signalling events.
2\. The UE performs IMS registration.
3\. An INVITE is received by the P-CSCF.
4\. The P-CSCF forwards the INVITE.
5\. The UE responds to the INVITE (e.g. 200OK), including the UPLI).
6\. The P-CSCF forwards the 200OK.
7\. The P-CSCF retrieves the NPLI, using one of the methods detailed in the
other clauses of this TR.
\- Optionally the NPLI can be compared with the UPLI and operator policy
determines whether the UPLI can be considered valid, and what the behaviour
should be if the UPLI is considered invalid.
# 6A Distribution of location information within the IMS
## 6A.1 Overview
This architectural alternative describes how location information can be
distributed to IMS entities once it has been retrieved.
This architecture alternative assumes that in the general case, one IMS
entity, the P-CSCF, MSC Server, MGCF, or AS, is responsible for retrieving
location information. It further assumes that for I1- or I2-based ICS, the
entity responsible for providing the location information to IMS is the MSC
Server.
The exact mechanism for how the location information is obtained is not
described in this alternative.
Simplified example call flows are provided. More detail on the existing
origination and termination call flows can be found in TS 23.228 [7].
## 6A.2 Example call flows
The origination and termination call flows below (6A.2.1 to 6A.2.6) also apply
in the case of session modification (re-INVITE\'s).
The session release call flow below (clause 6A.2.7) applies both for the
originating and terminating case.
To simplify the call flows the AS shown in the figures can represent several
AS\'s. For example, in the case of the ICS scenarios it can represent the SCC
AS and the TAS. The CSCF represents the I-CSCF and/or the S-CSCF.
### 6A.2.1 Session Establishment/Modification -- Mobile origination (1)
This call flow shows a procedure where the retrieval of location information
is performed by the P-CSCF and added to the PANI before sending the INVITE
towards the terminating side. If location information is required by
subsequent IMS entities during their processing of the INVITE (e.g. for
routing purposes, announcements for long distance calls, home zone services or
location depending LI), this procedure is applied. Otherwise if P-CSCF can
ensure that location information is not required for further processing the
INVITE, the alternative as described in 6A.2.2 might be used.
Figure 6A.2.1-1: Mobile origination
1\. A UE sends a SIP INVITE request. It can contain a UE-originated P-Access-
Network-Info (UE PANI) parameter.
2\. The P-CSCF obtains the location information provided by the access
network.
3\. The P-CSCF populates the PANI parameter with the location information
obtained from the access network and sends the INVITE towards the next CSCF,
containing the NW PANI together with the UE PANI.
4\. If an AS is to be invoked for this session the S-CSCF (or I-CSCF) sends
the INVITE towards the AS, containing the NW PANI (assuming the AS is in the
same trust domain).
5\. The AS sends the INVITE towards the S-CSCF, containing the NW PANI.
6\. The S-CSCF routes the INVITE towards the terminating side. The PANI may be
removed or modified (e.g. to change location granularity to just indicate the
serving PLMN) before routing outside the trust domain.
### 6A.2.2 Session Establishment/Modification -- Mobile origination (2)
This procedure shows an alternative procedure where the retrieval of location
information is performed by the P-CSCF and added to the PANI within the
Response Confirmation message subsequent to the SDP Offer Response message.
This procedure can be applied when subsequent IMS entities do not require NPLI
for the processing of the INVITE during session set-up (e.g. for data
retention).
Optionally, P-CSCF may initiate the fetching of NPLI already at reception of
SDP Offer message in parallel with sending the INVITE towards the terminating
side.
Figure 6A.2.2-1: Mobile origination
1\. A UE sends a SIP INVITE request. It can contain a UE-originated P-Access-
Network-Info (UE PANI) parameter.
2a. Optionally, the P-CSCF may start procedures to obtain the location
information provided by the access network at reception of SDP Offer in
parallel with steps 2b to 7.
2b. The P-CSCF sends the INVITE towards the next CSCF.
3\. If an AS is to be invoked for this session the S-CSCF (or I-CSCF) sends
the INVITE towards the AS.
4\. The AS sends the INVITE towards the S-CSCF.
5\. The S-CSCF routes the INVITE towards the terminating side.
6a. The P-CSCF receives an offer response sent by the terminating side (via
the intervening nodes).
6b. If the P-CSCF did not initiate procedures to obtain the location
information provided by the access network at step 2a, it will initiate them
now. This step will be executed together with Authorization of QoS resources.
6c. The P-CSCF forwards the offer response to the UE.
7\. The UE provides a response confirmation towards the P-CSCF.
8\. The P-CSCF inserts the location information in the response confirmation,
and this is routed towards the terminating side in steps 9 \-- 11. The PANI
may be removed or modified (e.g. to change location granularity to just
indicate the serving PLMN) before routing outside the trust domain.
### 6A.2.3 Session Establishment/Modification -- Mobile termination
Figure 6A.2.3-1: Mobile termination
1\. The CSCF receives an incoming INVITE.
2\. Depending on filter criteria, an AS can be invoked.
3\. The AS sends the INVITE to the CSCF.
4\. The CSCF send the INVITE to the P-CSCF.
5\. The P-CSCF sends the INVITE to the UE.
6\. The UE sends a response to the INVITE. This can contain a UE-originated
P-Access-Network-Info (UE PANI) parameter.
7\. The P-CSCF invokes procedures to obtain the location information. This
step will be executed together with Authorization of QoS resources. In some
scenarios, and with some location retrieval alternatives, it might possible to
obtain or at least initiate the fetching of the location already at step 5.
8\. The P-CSCF populates the PANI parameter with the location information
obtained from the access network and sends the INVITE towards the next CSCF,
containing the NW PANI together with the UE PANI. The response is routed
towards the originating party, as shown in steps 9, 10 and 11.
### 6A.2.4 I2 ICS origination
Figure 6A.2.4-1: I2 ICS origination
1\. A UE sends a CS call setup message (as described in TS 23.292 [4], clause
7.3.2.1.2).
2\. Using existing procedures, the MSC Server obtains the location
information.
3\. The MSC Server populates the PANI parameter with the location information
and sends the INVITE towards the next CSCF, containing the NW PANI.
4\. If an AS is to be invoked for this session the S-CSCF (or I-CSCF) sends
the INVITE towards the AS, containing the NW PANI (assuming the AS is in the
same trust domain).
5\. The AS sends the INVITE towards the S-CSCF, containing the NW PANI.
6\. The S-CSCF routes the INVITE towards the terminating side. The PANI may be
removed or modified (e.g. to change location granularity to just indicate the
serving PLMN) before routing outside the trust domain.
### 6A.2.5 I1 ICS origination
Figure 6A.2.5-1: I1 ICS origination
1\. The UE sends an ICS call initiation request via the I2 reference point, as
described in TS 23.292 [4], clause 7.3.2.2.2.
2\. The SCC AS responds with the I1 call initiation result message.
3\. The UE sends a CS call setup message to establish the CS bearer control
signalling path.
4\. Using existing procedures, the MSC Server obtains the location
information.
5\. The MSC Server populates the PANI parameter with the location information
and sends the INVITE towards the next CSCF, containing the NW PANI. It is
assumed here that the MSC Server supports the I2 reference point.
6\. If an AS is to be invoked for this session the S-CSCF (or I-CSCF) sends
the INVITE towards the AS, containing the NW PANI (assuming the AS is in the
same trust domain).
7\. The AS sends the INVITE towards the S-CSCF, containing the NW PANI.
8\. The S-CSCF routes the INVITE towards the terminating side. The PANI may be
removed or modified (e.g. to change location granularity to just indicate the
serving PLMN) before routing outside the trust domain.
### 6A.2.6 ICS Mg origination
The following information flow shows the distribution of location information
when the procedure specified in TS 23.292 [4], clause 7.3.2.1.3 \"Origination
when using an MSC Server\" is used.
Figure 6A.2.6-1: ICS Mg origination
1\. A UE sends a CS call setup message (as described in TS 23.292 [4], clause
7.3.2.1.3).
2\. An IN (e.g. CAMEL) trigger present in the user profile causes the MSC
Server to query the IN SCP to fetch an IMRN. NPLI is included in the query.
3\. The IN SCP stores the NPLI and provides an IMRN.
4-6. The call is routed to SCC AS as specified in TS 23.292 [4], clause
7.3.2.1.3, steps 3 to 5.
7\. The SCC AS obtains the location information provided by the access network
(interacts with the SCP to obtain the NPLI)
8\. The SCC AS sends the INVITE to the S-CSCF, containing NPLI in the NW PANI.
### 6A.2.7 Session Release
Figure 6A.2.7-1 presents the mobile or network initiated IMS session release
for both the Mobile Originating (MO) side and the Mobile Terminating (MT)
side. The session release may be signalled by a SIP BYE message, or any SIP
3xx redirect response, or any 4xx, 5xx, or 6xx SIP final error response to an
initial INVITE request. If any 4xx, 5xx, or 6xx SIP final error response to
Re-INVITE or UPDATE request just terminates the transaction, then the session
is not released, otherwise if the error response terminates the dialog then
the session is released.
Figure 6A.2.7-1: IMS Session Release
**Terminating Side**
1\. A SIP BYE message, a SIP 3xx redirect response, or any 4xx, 5xx, or 6xx
SIP final error response to an initial INVITE or any 4xx, 5xx, or 6xx SIP
final error response to Re-INVITE or UPDATE which terminates the dialog is
received by the P-CSCF.
2\. The P-CSCF invokes procedures to obtain the location information. This
step will be executed together with the procedure to release corresponding QoS
resources in the IP-CAN.
3\. The P-CSCF forwards the BYE message, or the SIP 3xx redirect response, or
any 4xx, 5xx, or 6xx SIP final error response to the UE.
4\. The UE provides a response to the P-CSCF.
5\. The P-CSCF inserts the location information in the response confirmation,
and this is routed towards IMS Core.
**Originating Side**
6\. A SIP BYE message, a SIP 3xx redirect response, or any 4xx, 5xx, or 6xx
SIP final error response to an initial INVITE or any 4xx, 5xx, or 6xx SIP
final error response to Re-INVITE or UPDATE which terminates the dialog is
received by the P-CSCF from the UE originating the session release procedure.
7\. The P-CSCF invokes procedures to obtain the location information. This
step will be executed together with the procedure to release corresponding QoS
resources in the IP-CAN.
8\. The P-CSCF forwards the BYE message, or the SIP 3xx redirect response, or
any 4xx, 5xx, or 6xx SIP final error response within IMS Core containing the
NW PANI together with the UE PANI. PANI may be removed or modified (e.g. to
change location granularity to just indicate the serving PLMN) if routing
outside the trust domain is needed.
9-10. The Session Release procedure is completed.
### 6A.2.8 NPLI Distribution using HSS based approach
This section shows an alternative procedure where the retrieval of location
information is performed by an AS so NPLI can be distributed to the S-CSCF.
This procedure can be applied when AS and/or S-CSCF require NPLI for the
processing of the INVITE during session set-up (e.g. for Special Call Routing
for Localized Services).
Figure 6A.2.8-1: NPLI Distribution using HSS based Approach
1\. A SIP INVITE request is received bv an AS.
2\. The AS retrieves location information from HSS.
3\. The AS populates the PANI parameter with the location information obtained
from the HSS and sends the INVITE towards the next CSCF, containing the NW
PANI.
NOTE: The S-CSCF may further distribute NW PANI to other ASs within the trust
domain. The S-CSCF shall not distribute the NW PANI to the P-CSCF.
4-5. The Session Release procedure is completed.
### 6A.2.9 I2 ICS termination
Figure 6A.2.9-1: I2 ICS termination
1\. The S-CSCF receives an incoming INVITE.
2-3. Application Server(s) (including SCC AS) are invoked based on filter
criteria.
4\. The S-CSCF send the INVITE to the MSC Server.
5-6. The MSC Server performs the CS call setup with the UE and obtains the
location information while doing this.
7\. The MSC Server populates the PANI parameter with the location information
and sends the response towards the S-CSCF, containing the NW PANI.
8-10. The response is routed towards the originating party.
### 6A.2.10 ICS Mg termination
Figure 6A.2.10-1: ICS Mg termination
1\. The S-CSCF receives an incoming INVITE.
2-4. Application Server(s) (including SCC AS) are invoked based on filter
criteria.
5\. The T-ADS function of the SCC AS chooses breakout to the CS domain. A CSRN
is fetched for routing to the CS domain.
NOTE: At this point, the SCC AS can, as an implementation option, interact
with the HLR/HSS to obtain location information, e.g. MSRN.
6\. The SCC AS establishes a new session by sending an INVITE containing the
CSRN towards the Sâ€‘CSCF.
7\. The Sâ€‘CSCF then performs CS breakout according to existing IMS procedures.
The call is routed to the CS domain via the BGCF/MGCF.
8\. The MGCF sends an IAM to the MSC Server using existing procedures.
9-10. The MSC Server performs the CS call setup with the UE.
11\. The MSC Server sends the response to the MGCF.
12\. The MGCF sends the response towards the S-CSCF.
13\. The response is routed to the SCC AS.
14\. If the SCC AS has NPLI available (e.g. from step 5, or by interacting
with the HLR/HSS at this time), it populates the network PANI. The SCC AS
forwards the response to S-CSCF.
15\. The response is routed towards the originating party.
## 6A.3 Generation of the Geographical Identifier
A network which requires the GI to be generated in the IMS may implement the
mapping table between CGI/CSGID and GI in the LRF.
When the GI is not provided by the access network, the E-CSCF or S-CSCF may,
based on operator policy, query the LRF to obtain the mapping from CGI or
CSGID to GI, and insert the GI SIP signalling before forwarding it to other
IMS nodes.
# 7 Conclusions
## 7.1 Alternatives evaluation criteria and scoring
The following table provides a summary of the solutions currently described in
the TR and their characteristics when measured against compliance to the
requirements as well as impact on the system.
Table 7.1-1
+-------------+-------------+-------------+-------------+-------------+ | | | LCS-based | PCC-based | | +-------------+-------------+-------------+-------------+-------------+ | | HSS based | LCS based | PCC-based | Enhanced PS | | | retrieval | NPLI | | domain | | | | provision | | location | | | | from MME to | | reporting | | | | GMLC | | | +-------------+-------------+-------------+-------------+-------------+ | TR clause | 6.1 | 6.3 | 6.4 | 6.2 | +-------------+-------------+-------------+-------------+-------------+ | Description | The IMS AS | The P-CSCF | P-CSCF | P-CSCF | | | uses | contacts | obtains | obtains | | | Sh-pull | the GLMC in | location | location | | | towards the | order to | information | information | | | HSS to | obtain the | by using | by using | | | obtain the | Cell-ID | the PCRF, | the PCRF, | | | NPLI. This | from the | and | and | | | is an | MME. This | associated | associated | | | existing | is existing | PCC | PCC | | | procedure. | fu | signalling. | signalling. | | | | nctionality | | | | | | except that | The PCRF | The PCRF | | | | there is an | obtains | obtains | | | | indication | location | location | | | | that the | information | information | | | | request is | from the PS | from the PS | | | | for Cell-ID | domain | domain | | | | information | (S-GW/MME). | (S-GW/MME). | | | | only. This | | | | | | indication | For session | The eNB | | | | could be | based | will always | | | | implicit | services | reports the | | | | (e.g. | the | ECGI or | | | | derived | location | CSGID when | | | | from the | information | the | | | | requestor | is carried | signalling | | | | identity | from the | bearer | | | | and the | eNodeB to | transfers | | | | QoS) | the P-GW | data and | | | | | (GTP) or to | the | | | | The | the S-GW | location | | | | solution | (PMIP) in | changed | | | | relies on | the Create | compared to | | | | the | Bearer | the last | | | | PCC-based | Response. | reported | | | | approach | (in 6.4 it | location. | | | | except for | is assumed | Signalling | | | | the PSAP | that the | is either | | | | selection | location | via S1 to | | | | (ECSCF | has been | MME or via | | | | queries the | reported by | GTP to PGW. | | | | LRF, that | the eNodeB | MME decides | | | | may | to the P-GW | to send | | | | interact | already). | them on to | | | | with a | I.e. the | the PGW, | | | | separate | location is | basically | | | | GMLC or | first | to filter | | | | contain an | available | repeated | | | | integrated | when | reporting | | | | GMLC) and | session | that might | | | | session | setup is | happen due | | | | es | signalled. | to RAB | | | | tablishment | | release/est | | | | (SCSCF | For other | ablsihment. | | | | queries the | services | (See 23.401 | | | | GMLC). | (e.g. | clause | | | | | messaging) | 5.9.2.) | | | | | the PGW | | | | | | (GTP) or | The P-GW | | | | | the S-GW | doesn\'t | | | | | (PMIP) | report the | | | | | needs to | location to | | | | | request the | the PCRF, | | | | | location | to save | | | | | from | signalling | | | | | MME/eNB | and to | | | | | when asked | align | | | | | by the | runtime | | | | | PCRF. | between IMS | | | | | | signalling | | | | | | on UP and | | | | | | location | | | | | | signalling | | | | | | on control | | | | | | plane.. | +-------------+-------------+-------------+-------------+-------------+ | Impacts on | None | SLg | A | Detection | | PS domain | | reference | standalone | of | | | | point and | location | signalling | | | | MME updated | retrieval | bearer | | | | | in PS | activity. | | | | | domain is | In the | | | | | also needed | GTP-U | | | | | for | a | | | | | services | lternatives | | | | | without | the P-GW or | | | | | media and | S-GW are | | | | | probably | impacted, | | | | | for session | and GTP-U | | | | | based | is | | | | | services | modified. | | | | | that fail. | | +-------------+-------------+-------------+-------------+-------------+ | Impacts on | Insertion | P-CSCF, | NOTE 1 | None | | IMS | of PANI by | S-CSCF, | | | | | (all) | E-CSCF need | | | | | Application | to populate | | | | | Servers | the PANI | | | | | | with | | | | | | information | | | | | | received | | | | | | from LRF or | | | | | | GMLC. | | | | | | | | | | | | There are | | | | | | impacts on | | | | | | the Ml ref | | | | | | point | | | | | | (between | | | | | | S/E-CSCF | | | | | | and LRF). | | | +-------------+-------------+-------------+-------------+-------------+ | Impacts on | None | None | None | None | | the UE | | | | | +-------------+-------------+-------------+-------------+-------------+ | Other | None | GMLC | Rx and PCRF | Rx and PCRF | | impacts | | updated | updated | updated | +-------------+-------------+-------------+-------------+-------------+ | Additional | new | new | Possible | None | | signalling | M | M | additional | | | | AP/Diameter | AP/Diameter | signalling | | | | signalling | signalling | for | | | | | | location | | | | Sh-pull | Query over | based | | | | procedure | Ml from the | serv | | | | | P-CSCF | ice/routing | | | | | | and for | | | | | | call | | | | | | attempt | | | | | | records. | | +-------------+-------------+-------------+-------------+-------------+ | Support for | Support | Allows the | Yes, | Yes, | | PSAP | only | E-CSCF to | assuming | assuming | | selection | guaranteed | have the | P-CSCF will | P-CSCF will | | | in Home | location | wait for | wait for | | | network | information | location | location | | | (cannot be | before PSAP | response | response | | | assumed | routing is | before | before | | | that any | performed. | forwarding | forwarding | | | roaming | | INVITE. | INVITE. | | | partner | | | | | | delivers | | | | | | detailed | | | | | | lo | | | | | | cation/cell | | | | | | information | | | | | | to other | | | | | | networks. | | | | | | | | | | | | Whether the | | | | | | PSAP | | | | | | selection | | | | | | works for | | | | | | unau | | | | | | thenticated | | | | | | UEs is FFS | | | | +-------------+-------------+-------------+-------------+-------------+ | Support of | Whether | Yes. The | Yes for a | Yes for a | | location | NPLI | PSAP can | SIP-based | SIP-based | | information | delivery to | retrieve | PSAP. | PSAP. | | delivery to | PSAP works | location | Otherwise a | Otherwise a | | the PSAP | for | information | GLMC-based | GLMC-based | | | unau | by querying | solution | solution | | | thenticated | the GMLC. | needs to be | needs to be | | | UEs is FFS | | used in | used in | | | | | parallel. | parallel. | +-------------+-------------+-------------+-------------+-------------+ | LI support | Requires | Requires | Requires | Requires | | | use of PANI | use of PANI | use of PANI | use of PANI | | | in SIP | in SIP | in SIP | in SIP | | | messages | messages | messages | messages | | | (clause 6A) | (clause 6A) | (clause 6A) | (clause 6A) | +-------------+-------------+-------------+-------------+-------------+ | Charging | Requires | Requires | Requires | Requires | | support | use of PANI | use of PANI | use of PANI | use of PANI | | | in SIP | in SIP | in SIP | in SIP | | | messages | messages | messages | messages | | | (clause 6A) | (clause 6A) | (clause 6A) | (clause 6A) | +-------------+-------------+-------------+-------------+-------------+ | Roaming | Home | Yes (IBCF | Yes (IBCF | Yes (IBCF | | scenario | network | update | update | update | | support | support | needed to | needed to | needed to | | | only | allow PANI | allow PANI | allow PANI | | | guaranteed | to be | to be sent) | to be sent) | | | as it may | sent). (But | | | | | not be | what if the | | | | | assumed | P-CSCF is | | | | | that any | in the | | | | | roaming | HPLMN?) | | | | | partner | | | | | | delivers | | | | | | detailed | | | | | | lo | | | | | | cation/cell | | | | | | info to | | | | | | every other | | | | | | network | | | | +-------------+-------------+-------------+-------------+-------------+ | SMSoIP | Yes | Yes | Yes. Need | Yes | | support | | | new request | | | | | | for | | | | | | non-session | | | | | | signalling. | | +-------------+-------------+-------------+-------------+-------------+ | Impacts on | Arrival of | Arrival of | Arrival of | Arrival of | | session | INVITE | INVITE | INVITE | INVITE | | es | triggers | triggers | triggers | triggers | | tablishment | request | request | request | request | | performance | from AS -> | from P-CSCF | from P-CSCF | from P-CSCF | | | HSS -> | -> LRF -> | -> PCRF | -> PCRF | | | MME, and | GMLC -> | -> P-GW | -> P-GW | | | then paging | MME. The | -> S-GW | for GTP | | | via the eNB | GMLC must | -> MME | | | | (for | also query | (normal | Arrival of | | | te | the HSS to | dedicated | INVITE | | | rmination). | find the | bearer | triggers | | | Could be | correct | activation | request | | | part of | MME. | signalling) | from P-CSCF | | | T-ADS | | for GTP. | -> PCRF | | | i | | | -> S-GW | | | nteraction. | | Arrival of | for PMIP | | | | | INVITE | | | | | | triggers | | | | | | request | | | | | | from P-CSCF | | | | | | -> PCRF | | | | | | -> S-GW | | | | | | -> MME | | | | | | (normal | | | | | | dedicated | | | | | | bearer | | | | | | activation | | | | | | signalling) | | | | | | for PMIP. | | | | | | | | | | | | The | | | | | | location is | | | | | | provided by | | | | | | the MME, | | | | | | but might | | | | | | involve | | | | | | interaction | | | | | | with the | | | | | | eNB. | | +-------------+-------------+-------------+-------------+-------------+ | Support for | Location | MSC | MSC | MSC | | ICS | provided by | provides | provides | provides | | | MSC to the | location | location | location | | | HSS | | | | +-------------+-------------+-------------+-------------+-------------+ | Impacts on | | | | | | session | | | | | | es | | | | | | tablishment | | | | | | time | | | | | +-------------+-------------+-------------+-------------+-------------+ | Issues | Terminating | Support of | Can session | Need to | | | call issues | localized | es | select | | | (pre-paging | services | tablishment | between GTP | | | results in | for the | continue in | signalling | | | slower | terminating | parallel | or GTP-U | | | session set | session | with Rx | al | | | up) | case is | signalling? | ternatives. | | | | FFS. | Probably | | | | Difficulty | | not, if | In the | | | to meet | | special | terminating | | | regulatory | | routing | session | | | r | | decisions | case, | | | equirements | | need to be | location | | | as well as | | made. | information | | | to create | | | is only for | | | records in | | P-CSCF | the first | | | VPLMN since | | cannot know | SIP | | | the P-CSCF | | which IMS | response, | | | does not | | message is | and not | | | get | | last, | when the | | | location | | especially | INVITE | | | i | | when | arrives at | | | nformation. | | service | the P-CSCF. | | | | | setup | | | | | | fails. | Continuous | | | | | | NPLI update | | | | | The P-CSCF | signalling | | | | | may need to | towards | | | | | always | P-GW (GTP) | | | | | retrieve | or S-GW | | | | | NPLI when | (PMIP) when | | | | | the first | there is | | | | | IMS message | activity on | | | | | for a | IMS | | | | | service | signalling | | | | | arrives. | bearers and | | | | | | when | | | | | In the | location | | | | | terminating | changed. | | | | | session | This issue | | | | | case, | is less | | | | | location | severe when | | | | | information | user plane | | | | | is only for | solution is | | | | | the first | used to | | | | | SIP | determine | | | | | response, | cell | | | | | and not | changes | | | | | when the | | | | | | INVITE | | | | | | arrives at | | | | | | the P-CSCF. | | | | | | | | | | | | Not | | | | | | possible to | | | | | | retrieve | | | | | | the NPLI | | | | | | for call | | | | | | attempt | | | | | | CDRs | | | | | | (required | | | | | | for LI or | | | | | | data | | | | | | retention) | | +-------------+-------------+-------------+-------------+-------------+ | Main | May benefit | Works also | For | Minimal | | advantages | from | when no | successful | delay: NPLI | | | optimised | bearer is | session | available | | | TADS | set up | es | at P-GW | | | procedures | (e.g. call | tablishment | (GTP) or | | | | attempts) | no | S-GW (PMIP) | | | Can | | additional | for PCC at | | | retrieve | NPLI | PS | the same | | | the NPLI | available | signalling | theme when | | | prior the | with first | whwn | the P-CSCF | | | IMS service | INVITE. | acceptable | requests it | | | processing | | to have | | | | | | NPLI | works also | | | Works also | | available | when no | | | when no | | later in | bearer is | | | bearer is | | service | set up | | | set up | | signalling | (e.g. call | | | (e.g. call | | flow | attempts) | | | attempts) | | | | | | | | In case of | Continuous | | | NPLI | | connecting | update at | | | available | | to/from | PLMN, RAT, | | | with first | | external | time zone | | | INVITE. | | ISUP-based | change | | | | | networks, | | | | Lowest | | no | | | | number of | | additional | | | | total | | PS | | | | messages | | signalling. | | | | because of | | | | | | lowest | | Can provide | | | | number of | | new NPLI | | | | nodes | | when | | | | involved. | | session is | | | | | | modified | | | | | | for | | | | | | successful | | | | | | sessions. | | +-------------+-------------+-------------+-------------+-------------+ | MO side | HSS based | P-CSCF | For this | P-CSCF | | NPLI based | retrieval | queries | NPLI may be | fetches | | serv | by AS, | GMLC. | already | NPLI for | | ice/routing | roaming | | needed with | every | | | case | Roaming | the INVITE | INVITE, | | (AS needs | assumed to | expected to | using the | roaming | | NPLI) | get | get | \"bearer | case | | | adequate | adequate | independent | assumed to | | | location | location | NPLI | get | | | granularity | g | fetch\" as | adequate | | | | ranularity. | it cannot | location | | | | | wait for | granularity | | | | | bearer | | | | | | est | | | | | | ablishment. | | | | | | A | | | | | | dif | | | | | | ferentiator | | | | | | is needed | | | | | | for the | | | | | | P-CSCF as | | | | | | it is may | | | | | | be needed | | | | | | only for | | | | | | some of the | | | | | | UEs. If | | | | | | used for | | | | | | all UEs the | | | | | | bearer | | | | | | dependent | | | | | | fetch may | | | | | | become | | | | | | obsolete. | | +-------------+-------------+-------------+-------------+-------------+ | MT side | AS | AS to query | AS | AS | | NPLI based | requested | LRF. LCS | requested | requested | | serv | HSS based | active | HSS based | HSS based | | ice/routing | retrieval | location | retrieval | retrieval | | | with | retrieval | with paging | with paging | | (AS needs | paging, | with | may be | may be | | NPLI) | roaming | paging. | used, | used, | | | case | | roaming | roaming | | | assumed to | roaming | case | case | | | get | expected to | assumed to | assumed to | | | adequate | get | get | get | | | location | adequate | adequate | adequate | | | granularity | location | location | location | | | | granularity | granularity | granularity | +-------------+-------------+-------------+-------------+-------------+ | MO side | S-CSCF | P-CSCF | After | P-CSCF | | Successful | retrieves | queries | bearer | fetches | | m | when there | GMLC for | a | NPLI for | | edia/bearer | is | NPLI and | ctivation/m | every | | addition/m | modificatio | transfers | odification | INVITE and | | odification | n/addition. | with INVITE | P-CSCF | provides | | | No solution | to S-CSCF | transfers | NPLI with | | | for P-CSCF | | NPLI with | it to | | | described. | | UPDATE to | S-CSCF | | | | | S-CSCF | | +-------------+-------------+-------------+-------------+-------------+ | MT side | S-CSCF | P-CSCF | After | P-CSCF | | Successful | retrieves | queries | bearer | fetches | | m | when there | GMLC for | a | NPLI for | | edia/bearer | is | NPLI and | ctivation/m | every | | addition/m | modificatio | transfers | odification | INVITE and | | odification | n/addition. | with 183 | P-CSCF | provides | | | No solution | Session | transfers | NPLI with | | | for P-CSCF | Progress to | NPLI with | next SIP | | | described. | S-CSCF | the next | message to | | | | | SIP message | S-CSCF | | | | | to S-CSCF | | +-------------+-------------+-------------+-------------+-------------+ | Bearer | S-CSCF | P-CSCF | P-CSCF | P-CSCF | | independent | retrieves | needs to | needs to | needs to | | location, | when there | identify | identify | identify | | service | is | every SIP | every SIP | every SIP | | release/ | modificatio | message | message | message | | termination | n/addition. | that | that | that | | and | No solution | requires | requires | requires | | m | for P-CSCF | sending | sending | sending | | edia/bearer | described. | NPLI to | NPLI to | NPLI to | | release/ | | S-SCSF. If | S-SCSF. If | S-SCSF. If | | termination | | that | that | that | | | | specific | specific | specific | | | | message is | message is | message is | | | | in | in | in | | | | direction | direction | direction | | | | towards | towards | towards | | | | S-SCSF then | S-SCSF then | S-SCSF then | | | | the P-CSCF | the P-CSCF | the P-CSCF | | | | delays it | delays it | delays it | | | | until NPLI | until NPLI | until NPLI | | | | is | is | is | | | | received. | received. | received. | | | | If that | If that | If that | | | | specific | specific | specific | | | | message is | message is | message is | | | | towards UE | towards UE | towards UE | | | | the P-CSCF | the P-CSCF | the P-CSCF | | | | adds the | adds the | adds the | | | | NPLI to the | NPLI to the | NPLI to the | | | | related | related | related | | | | response | response | response | | | | message. | message. | message. | | | | | | | | | | The P-CSCF | If the | The P-CSCF | | | | always | release/ | always | | | | retrieves | termination | retrieves | | | | the NPLI | includes | the NPLI | | | | from PCEF. | bearer | from PCEF. | | | | | release/ | | | | | | termination | | | | | | the P-CSCF | | | | | | gets the | | | | | | NPLI during | | | | | | bearer | | | | | | handling, | | | | | | otherwise | | | | | | the P-CSCF | | | | | | retrieves | | | | | | it from | | | | | | PCEF. | | +-------------+-------------+-------------+-------------+-------------+
NOTE: How will failed service setup be handled if the location comes not with
INVITE but first with the SDP? If the service is rejected there is no further
signalling to S-CSCF. For location based services on MO side first SDP and
then decide on service delivery/routing?! Or always early media setup?
## 7.2 Specification work recommendation
The following aspects are proposed to be specified:
\- Support a PCC-based solution as defined in clause 6.4 (procedure invoked by
the P-CSCF) to obtain the NPLI. Policies in the P-CSCF determine whether the
NPLI needs to be retrieved for a particular scenario (of clause 6.4).
\- The P-CSCF policy for retrieving the NPLI can be specific per HPLMN.
\- In the originating case, P-CSCF policy is needed for whether to provide the
NPLI in the INVITE request or within a subsequent message of the dialog.
\- When a MSC Server enhanced for ICS is used, the solution as defined in
clauses 6A.2.4 and 6A.2.9 shall be used.
\- HSS based retrieval according to TS 29.328 [5] can be used when NPLI is
required but not already available (e.g. when required in an INVITE request,
when it is needed prior to session delivery, or when call is broken out to a
MGCF).
\- The level of NPLI granularity that can be retrieved by the AS via the HSS-
based procedures in roaming scenarios depends on inter-operator agreement, and
needs to be aligned with policies in the P-CSCF.
\- Enhancement of the Network Provided P-Access-Network-info header to include
NPLI (including the optional local time) and to be distributed according to
the guidance in clause 6A.
\- Transfer of NPLI by IMS signalling shall not affect the transfer of any
UPLI.
\- The level of granularity of NPLI may be changed at network/trust
boundaries.
\- For emergency sessions where network provided location is required, either
existing LRF-based procedures based on LCS according to TS 23.167 [3] are
used, or the PCC-based solution as defined in clause 6.4 is used to provide
NPLI with the INVITE to the Eâ€‘CSCF for usage according to TS 23.167 [3]. Local
policies in the P-CSCF determine whether to provide the NPLI using the PCC-
based procedures for an INVITE for an emergency session. Use of LRF-based
procedures is based on the policies of the E-CSCF according to TS 23.167 [3].
\- Regarding to the GI, clause 5.3 should be referred to.
###### ### Annex A: Analysis on the Operator Dependent Location Information
# A.1 General
In the current CDR in CS, it can contain location information other than the
NPLI such as Location Area Code (LAC) and Service Area Identifier (SAI),
Especially, the SAI is the service specific information that operator can
define.
**\- SAI = PLMN-Id \|\| LAC \|\| SAC**
The SAC is defined by the operator, and set in the RNC via O&M.
To maintain the same level of service operation in IMS, the operator dependent
location information may be required at IMS.
NOTE: This means the \"transportation\" of such information is needed but does
not need to \"specify\" the coding detail of the operator dependent location
information.
# A.2 Use Cases
Followings are the use cases of operator dependent location information.
**Use Case1: Exchange between operators as part of the charging information**
\- TTC (Telecommunication Technology Committee) in Japan, regionally defines
the area code information (i.e., Charging Area Code: CA code) for charging
purpose. Such information is exchanged between operators. Operator dependent
location information provided to IMS can be used to derive CA code at IMS.
**Use Case2: Robust and efficient PSAP selection**
\- In Japan, the number of the fire departments (i.e. PSAP), to which the call
requesting the help is routed, are more than 2000. The operator shall
determine the PSAP based on the location information of the call originating
UE. Operator dependent location information provided to IMS can be used to
resolve the PSAP at IMS.
# A.3 Analysis
In this clause, the benefit of the operator dependent location information in
addition to the NPLI is explained.
1\. Do not violate the IMS design principle \"IP-CAN agnostic\".
The above mentioned information, e.g. CA code, is considered as Service
Specific Information (SSI) and technically it is possible to derive such from
the Cell-ID. However the IMS is designed to be \"IP-CAN agnostic\" in
principle. If we require the IMS to have the \"Cell-ID to Service Specific
Information mapping\" database, it means the IMS has to be aware of the radio
dependent location information. Cell-ID information could be about both UTRAN
and E-UTRAN cells and in fact, the number of those information are pretty
large.
If we use radio independent location information, hereafter we call it
\"Geographical Identifier (GI)\", which is configured by the operator and
provided to the IMS by the NetLoc solution, for the retrieval of the service
specific information, such as CA code, can be IP-CAN agnostic and keep the
basic IMS principle unchanged (IMS just maintain \"GI to SSI mapping\"
database).
2\. Do not need to update data base at IMS when RAN configuration changes.
Figure A.3-1 illustrates the cases where Cell-ID and GI are used for as key-
parameters in IMS configuration data.
If the IMS configuration data uses the Cell-ID for key to derive SSI, the data
base has to be updated when RAN configuration data have been changed, e.g. in
case of Cell-ID has been re-numbered and/or its geographical location has been
changed.
If the IMS configuration data uses the GI for the key-parameters to derive
SSI, the data base does not affected by the RAN configuration data update as
RAN always forward \"GI\" to the IMS by a NetLoc solution.
This makes IMS configuration data be independent from the RAN configuration
update and the network operation can be simplified.
Figure A.3-1 Relationship between RAN and IMS configuration Data
3\. Cell ID does not have sufficient bit space to be used for service specific
identity other than Cell-ID itself.
The Cell ID length is 28bit as specified in TS36.331 and for macro cell, 8bit
is used to identify the cell/sector within an eNodeB and 20 bit is used for
eNodeB identification.
If NetLoc tries to use some parts of Cell-ID bit string to directly derive the
SSI, it shall be done within 20bit. As discussed in previous clause A.2, to be
selected PSAP in Japan is more than 2000 and that requires 11bit. It is not
realistic to use 11bit as 9bit only means 512 in decimal and cannot far meet
the above mentioned operator requirement.
Editors note: Application of Time Zone and/or Time related information is FFS.
Editor\'s note: It is expected in Japan the size of the GI would be around 14
bits in binary format and in France some more bits might be needed. The size
of the GI is decided depending on the regional needs.
**Conclusion**
With above analysis, it is concluded that IMS shall be able to obtain the
operator dependent location information which is independent from the RAN
configuration parameters. Therefore, NetLoc will allow the EPC to carry such
information by the transparent container, yet the actual coding of the
operator dependent location information is not necessary to be specified by
3GPP.
#