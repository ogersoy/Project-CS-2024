# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is 4^th^ part of a multi-part conformance test
specification for UEs and is valid for 3GPP Release 5 and above. The
specification contains a TTCN design frame work and the detailed test
specifications in TTCN-3 for the UE conformance at the Gm reference point.
3GPP TS 34.229-1 [5] contains a conformance test description in prose.
3GPP TS 34.229-2 [6] contains a pro-forma for the UE Implementation
Conformance Statement (ICS).
3GPP TS 34.229-3 [49] contains the conformance test description in TTCN for
the multi-tester model.
3GPP TS 34.229-4 the present document.
# 1 Scope
The present document specifies the protocol conformance testing in TTCN-3 for
the 3GPP User Equipment (UE) at the Gm interface for the basic IMS test cases
using the so-called IP-CAN test model. It also forms the basis for further
conformance testing for IM applications.
The present document is the 4^th^ part of a multi-part test specification,
3GPP TS 34.229. The following TTCN test specification and design
considerations can be found in the present document:
\- the overall test suite structure;
\- the testing architecture;
\- the test methods and PCO definitions;
\- the test configurations;
\- the design principles, assumptions, and used interfaces to the TTCN tester
(System Simulator);
\- TTCN styles and conventions;
\- the partial PIXIT proforma;
\- the TTCN-3 files for the mentioned protocols tests.
The present document is valid for UEs implemented according 3GPP Releases
starting from Release 5 up to the Release indicated on the cover page of the
present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document in the same
Release as the present document.
\- For a Release 5 UE, references to 3GPP documents are to version 5.x.y, when
available.
\- For a Release 6 UE, references to 3GPP documents are to version 6.x.y, when
available.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 34.123-1: \"User Equipment (UE) conformance specification; Part 1:
Protocol conformance specification\".
[3] Void.
[4] 3GPP TS 34.123-3: \"User Equipment (UE) conformance specification; Part 3:
Abstract Test Suites (ATS)\".
[5] 3GPP TS 34.229-1: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 1:
Protocol conformance specification \".
[6] 3GPP TS 34.229-2: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 2:
Implementation Conformance Statement (ICS) specification\".
[7] 3GPP TS 34.108: \"Common test environments for User Equipment (UE)
conformance testing\".
[8] Void.
[9] Void.
[10] Void.
[11] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[12] ETSI ES 201 873: \"Methods for Testing and Specification (MTS); The
Testing and Test Control Notation version 3\".
[13] IETF RFC 3320: \"**Signalling Compression (SigComp)** \".
[14] IETF RFC 3485: \"**The Session Initiation Protocol (SIP) and Session
Description Protocol (SDP) Static Dictionary for Signalling Compression
(SigComp)** \".
[15] IETF RFC 3486: \"**Compressing the Session Initiation Protocol (SIP)**
\".
[16] IETF RFC 3261: \"**SIP: Session Initiation Protocol** \".
[17] IETF RFC 4566: \"**SDP: Session Description Protocol** \".
[18] IETF RFC 1035: \"**Domain names - implementation and specification** \".
[19] IETF RFC 1533: \"**DHCP Options and BOOTP Vendor Extensions** \".
[20] IETF RFC 2131: \"**Dynamic Host Configuration Protocol** \".
[21] IETF RFC 3315: \"**Dynamic Host Configuration Protocol for IPv6
(DHCPv6)** \".
[22] IETF RFC 3319: \"**Dynamic Host Configuration Protocol (DHCPv6) Options
for Session Initiation Protocol (SIP) Servers** \".
[23] IETF RFC 3361: \"**Dynamic Host Configuration Protocol (DHCP-for-IPv4)
Option for Session Initiation Protocol (SIP) Servers** \".
[24] IETF RFC 3680: \"**A Session Initiation Protocol (SIP) Event Package for
Registrations** \".
[25] 3GPP TS 24.173: \"IMS multimedia telephony communication service and
supplementary services; Stage 3\".
[26] IETF RFC 4825: \"The Extensible Markup Language (XML) Configuration
Access Protocol (XCAP)\".
[27] IETF RFC 2616: \"Hypertext Transfer Protocol -- HTTP/1.1\".
[28] Void.
[29] Void.
[30] 3GPP TS 36.523-3: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
and Evolved Packet Core (EPC); User Equipment (UE) conformance specification;
Part 3: Test suites\".
[31] 3GPP TS 36.508: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Packet Core (EPC); Common test environments for User Equipment (UE)
conformance testing\".
[32] 3GPP TS 36.509: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Packet Core (EPC); Special conformance testing functions for User
Equipment (UE)\".
[33] 3GPP TS 24.109: \"Bootstrapping interface (Ub) and network application
function interface (Ua); Protocol details\".
> [34] 3GPP TS 33.220: \"Generic Authentication Architecture (GAA); Generic
> Bootstrapping Architecture\".
>
> [35] 3GPP TS 33.222: \"Generic Authentication Architecture (GAA); Access to
> network application functions using Hypertext Transfer Protocol over
> Transport Layer Security (HTTPS)\".
>
> [36] 3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access
> Protocol (XCAP) over the Ut interface for Manipulating Supplementary
> Services \".
[37] RFC 2617: \"HTTP Authentication: Basic and Digest Access
Authentication\".
[38] RFC 3966: \"The tel URI for Telephone Numbers\".
> [39] RFC 2141: "URN Syntax".
>
> [40] 3GPP TS 24.604: \"Communication Diversion (CDIV) using IP Multimedia
> (IM) Core Network (CN) subsystem; Protocol specification\".
>
> [41] 3GPP TS 24.607: \"**Originating Identification Presentation (OIP)** and
> **Originating Identification Restriction (OIR)** using IP Multimedia (IM)
> Core Network (CN) subsystem; Protocol specification\".
>
> [42] 3GPP TS 24.608: \"**Terminating Identification Presentation** (**TIP)**
> and **Terminating Identification Restriction (TIR)** using IP Multimedia
> (IM) Core Network (CN) subsystem; Protocol specification\".
>
> [43] 3GPP TS 24.611: \" Anonymous Communication Rejection **(ACR)** and
> **Communication Barring (CB)** using IP Multimedia (IM) Core Network (CN)
> subsystem; Protocol specification\".
[44] IETF RFC 4119 \"A Presence-based GEOPRIV Location Object Format\".
[45] IETF RFC 4575: \"A Session Initiation Protocol (SIP) Event Package for
Conference State\".
[46] IETF RFC 5628: \"Registration Event Package Extension for Session
Initiation Protocol (SIP) Globally Routable User Agent URIs (GRUUs)\".
[47] IETF RFC 3863 \"Presence Information Data Format (PIDF)\".
[48] IETF RFC 4745: \"Common Policy: A Document Format for Expressing Privacy
Preferences\".
[49] 3GPP TS 34.229-3: \"Internet Protocol (IP) multimedia call control
protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP); User Equipment (UE) conformance specification; Part 3:
Abstract Test Suites (ATS)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and 3GPP TS 34.229-1 [5] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and 3GPP TS 34.229-1 [5] apply.
# 4 Requirements on the TTCN development
Please refer to TS 34.229-3 [49] clause 4.
# 5 Test model
## 5.1 IMS IP-CAN test model
The IP-CAN test model is shown in Figure 5.1.1.3-1.
### 5.1.1 Ports interfacing to SS
In TTCN-3, ports are defined in all test components and in the Test System
Interface. This is the equivalent of PCOs in TTCN‑2. These ports then have to
be mapped, or connected, to the SS at the start of each test.
#### 5.1.1.1 Data ports
The IMS IP-CAN Test Suite in TTCN-3 simulates the SIP behaviour at the P_CSCF
side. TTCN-3 communicates with the UE under test through four data ports and
the emulations beneath. Each port shall be able to distinguish the use of one
of the dual protocol stacks of IPv4 / IPv6.
The type of port (client or server) used to send or received a message will
depend on the transport protocol selected for the testing, i.e. UDP or TCP.
  * UDP case: The SS will send requests and responses to the UE from its client port. The SS will receive requests and responses from the UE on its server port.
  * TCP case: The SS will receive requests from the UE and will send responses to those requests on its server port. The SS will send requests to the UE and will receive responses to those requests on its client port.
For SIP requests originated by the UE, the transport protocol in UL is
selected by the UE. This information is extracted in the TTCN-3 and used in
subsequent responses sent by the SS.
For SIP requests originated by the SS in DL UDP is used as transport protocol
at the test For the purpose of test coverage, TCP is used in the specific test
cases as specified.
NOTE: According to RFC 3261 [16] clause 18.1.1 the server side (UE) has to be
able to cope with a maximum datagram size of 65,535 bytes (independent of any
guideline to restrict the maximum size of UDP packets at the client side).
If no security associations have been set up, the unprotected client and
server ports will be used. The security ports shall be used by the TTCN-3
authors when a security association has been established.
#### 5.1.1.2 Security Associations Setup
Four unidirectional SAs are established between the UE and the SS:
SA1: port_uc to port_ps\ SA2: port_pc to port_us\ SA3: port_ps to port_uc\
SA4: port_us to port_pc
The first pair (SA1 and SA3) is for bidirectional traffic between port_uc and
port_ps. The second pair (SA2 and SA4) is for bidirectional traffic between
port_pc and port_us.
While TCP scenario will use all four SAs, in UDP, only two SAs are needed
because there is no traffic from port_ps to port_uc nor from port_us to
port_pc. Figure 5.1.1.2-1 shows one example of the use of ports and security
association in UDP and TCP.
{width="5.993055555555555in" height="2.8534722222222224in"}
Figure 5.1.1.2-1: Use of port and SA in UDP and TCP
#### 5.1.1.3 Control ports
The IMS IP-CAN Test Suite also controls the SS configuration and passes
necessary parameters to the various emulation entities in the SS. This is done
by ASPs through an **IP-CAN control port,** an **IP configuration port and a
Signalling Compression control port**.
From the protocol stack point of view, SIP is an application layer protocol
located above transport layer UDP / TCP which in turn use the services
provided by the IP/IPsec layer. The IP packages are transmitted via the
connected IP-CAN bearer, the EUTRA bearer, the UTRA bearer or the GERAN
bearer. The emulations of these protocol layers in the SS shall be compliant
with the relevant core specifications (3GPP and IETF).
The IP-CAN bearers are created, configured, modified and released though the
ASP at the IP-CAN control port. The TTCN-3 codes shall also be able to control
the UDP/IP/IPsec configurations and provide necessary parameters through the
control ASPs.
The configuration of IP-CAN in the SS depends upon the technologies the UE
supports. Unless otherwise specified, E-UTRA shall be configured for IMS test
if E-UTRA technology is supported by the UE.
{width="6.5in" height="4.9215277777777775in"}
Figure 5.1.1.3-1: IMS IP-CAN test model
### 5.1.2 SAD
Security Association Database (SAD) shall be made accessible by the IPsec
entity and contain sets of parameters corresponding to each security
association. During registration/authentication, the UE and the SS will
negotiate these parameters for setting up a security association. As the
negotiation is carried out on SIP level (through SIP message exchanges), the
resulting security parameters are obtained and stored in the IMS IP-CAN Test
Suite. A number of ASPs are defined to convey these parameters from TTCN-3
codes to SAD. ASPs manipulating the SAD are also defined.
### 5.1.3 Network interface
Similar to the majority of TCP/IP stack implementations, a network interface
(IF0, IF1, IF2, etc.) structure is used to connect the IP-CAN bearer to IP
protocol entity. When the ASP for setting up an IP-CAN bearer is called via
the IP‑CAN control port, the SS shall connect the established radio access
bearer to the relevant IF structure, in order to provide the radio bearer
connectivity to the IP/IPsec layer. In order to ease maintenance, all IP-CAN
control has been encapsulated into its own Parallel Test Component.
### 5.1.4 SigComp and related control port
SIP Compression is mandatory (clause 8 of 3GPP TS 24.229 [11]) and Signalling
compression (RFC 3320 [13], RFC 3485 [14], RFC 3486 [15], RFC4896, RFC5049)
protocol is used for SIP compression. The SigComp entity in the model is used
to carry out the compression/decompression functions. In the receiving
direction of the SS, the SigComp entity will detect whether the incoming SIP
message is compressed and, if so, decompress it. In the sending direction of
the SS, the TTCN controls whether the outgoing SIP message is compressed
through the SigComp control port. If while decompressing a message,
decompression failure occurs, the message shall be discarded. The SigComp
layer in the SS shall automatically find if a secure port or un-secure port is
being used for transmission or reception of messages. If an un-secure port is
used for transmission, then as per clause 8 of 3GPP TS 24.229 [11], it shall
not include state creation instructions. If the state creation command is
received in a compressed message on an un-secured port (clause 8 of 3GPP TS
24.229 [11]), a decompression failure shall be generated.
### 5.1.5 SIP TTCN-3 Codec
SIP is a text-based protocol, the messages exchanged between the UE and the SS
are character strings. In TTCN-3 Test Suite the messages are structured to
take the advantage of TTCN-3 functionality, and to make the debugging and
maintenance of the Test Suite easier. When the TTCN-3 Test Suite sends a
message to the UE, the SIP TTCN-3 codec converts the structured message to the
corresponding character string then transfers it to the UE. When the SS
receives a message from the UE, the TTCN-3 codec converts the received
character string to the structured message and passes it to the TTCN-3 Test
Suite.
### 5.1.6 DHCP and DNS data ports
The DHCP port is used for receiving the DHCP requests from the UE under test,
and sending corresponding responses to the UE. The DNS port is used for
receiving domain name resolution requests from the UE and sending the results
back to the UE. The TTCN which implements the required DHCP and DNS server
functions (only the functions necessary for testing purposes, not full
functionality) will receive and send on these ports.
The DHCP and DNS server functionalities in the default test configuration are
implemented as Parallel Test Components (PTCs).
## 5.2 Upper Tester (UT)
In order to support test automation and regression testing, there is an MMI
port through which MMI commands (e.g. \"Please initiate a call\") are sent to
an external entity of the system simulator. Implementations can customize the
external entity according to their needs.
## 5.3 TTCN-3
TTCN-3 is used as the specification language. ES 201 873 [12] (TTCN-3) is
applied to the notation.
## 5.4 Support of XCAP
Please refer to TS 34.229-3 [49] clause 5.5
# 6 ASP definitions
## 6.1 Control ASP
ASPs for configuring/controlling the SS are defined to operate in a pair of
ASPs, Req (request) ASP and Cnf (Confirm) ASP of the blocking mode. The TTCN-3
execution after sending a Req ASP shall wait (be blocked) for the Cnf ASP.
Because the IMS Test Suite is radio access technology independent, few
parameters are passed from the TTCN-3. Therefore the exact configuration
procedures used are determined by the implementation.
The PIXIT px_RANTech (see below) is set by the operator according to the
technology the UE supports and is passed through the TTCN to the SS. This is
defined as an enumerated type and is used to specify which platform the test
is to be run on (e.g. GERAN, UTRA or E-UTRA). Unless otherwise specified,
E-UTRA shall be chosen if it is supported by the UE.
### 6.1.1 Cell Control
+----------------------+----------------------+----------------------+ | **Name** | CreateCellReq | | +----------------------+----------------------+----------------------+ | **Port** | IPCANctl | | +----------------------+----------------------+----------------------+ | **Comment** | ASP type for | | | | creating a cell | | +----------------------+----------------------+----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +----------------------+----------------------+----------------------+ | ranTech | RANTech | | +----------------------+----------------------+----------------------+ | primaryFrequencyBand | integer | | +----------------------+----------------------+----------------------+ | union { | | Optional. | | | | | | noSSAC, | | Specific ac-Barring | | | | Factor | | ssa | | | | cBarringFactorVoice, | | | | | | | | ss | | | | acBarringFactorVideo | | | | | | | | } | | | +----------------------+----------------------+----------------------+ | mccValue | hexstring (3) | Optional | +----------------------+----------------------+----------------------+ | mncValue | hexstring (2..3) | Optional | +----------------------+----------------------+----------------------+
* * *
**Name** CreateCellCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
CreateCellReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** ReleaseCellReq  
**Port** IPCANctl  
**Comment** ASP type for releasing resources allocated to the cell  
**Parameter Name** **Parameter Type** **Comment**
* * *
* * *
**Name** ReleaseCellCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
ReleaseCellReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** RANTech **Type** enumerated **Parameters** GERAN, UTRA_FDD, UTRA_TDD,
EUTRA_FDD, EUTRA_TDD, dummy1, dummy2 **Comment** Indicates the radio access
network technology used for transport of SIP signalling messages over the air
interface
* * *
* * *
**Name** Status **Type** enumerated **Parameters** success, failure,
inconclusive **Comment** Indicates the status result of the requesting ASP
* * *
+----------------------+----------------------+----------------------+ | **Name** | ModifyCellReq | | +----------------------+----------------------+----------------------+ | **Port** | IPCANctl | | +----------------------+----------------------+----------------------+ | **Comment** | ASP type for | | | | modifying system | | | | information | | | | parameters in a cell | | +----------------------+----------------------+----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +----------------------+----------------------+----------------------+ | union { | | Optional. | | | | | | noSSAC, | | Specific ac-Barring | | | | Factor | | ssa | | | | cBarringFactorVoice, | | | | | | | | ss | | | | acBarringFactorVideo | | | | | | | | } | | | +----------------------+----------------------+----------------------+
* * *
**Name** ModifyCellCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
ModifyCellReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
### 6.1.2 IdleUpdated
* * *
**Name** IdleUpdatedReq  
**Port** IPCANctl  
**Comment** ASP type which requests the SS to bring the UE into an idle
updated state and GMM or EMM registered  
**Parameter Name** **Parameter Type** **Comment** ueAddress IPAddress UE
address to be assigned via NAS signalling bearerInfo List of integers
Optional. For use in EUTRA to specify the default bearer to be used and
possibly one or more dedicated bearers to be established in the preamble.
isEmergency Boolean Optional. To indicate if this is an emergency attach
withUICC Boolean Optional. To indicate if the UE has a UICC
* * *
* * *
**Name** IdleUpdatedCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
IdleUpdatedReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
+--------------------+-----------------------+-----------------------+ | **Name** | DetachReq | | +--------------------+-----------------------+-----------------------+ | **Port** | IPCANctl | | +--------------------+-----------------------+-----------------------+ | **Comment** | ASP type which | | | | requests the SS to | | | | bring the UE into | | | | detached state | | +--------------------+-----------------------+-----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +--------------------+-----------------------+-----------------------+ | moFlag | Boolean | Set to true if the SS | | | | is requested to | | | | accept a mobile | | | | originated detach. | | | | | | | | Set to false if the | | | | SS is requested to | | | | initiate the detach | +--------------------+-----------------------+-----------------------+
* * *
**Name** DetachCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of DetachReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** HandoverReq  
**Port** IPCANctl  
**Comment** ASP type which requests the SS to allow the UE to handover to
another RAT  
**Parameter Name** **Parameter Type** **Comment** ranTech RANTech Info to
which RAT the UE will handover handoverType HandoverType Type of handover
* * *
* * *
**Name** HandoverCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of HandoverReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** HandoverType **Type** enumerated **Parameters** ho_csfb,
ho_reselection **Comment** Indicates the type of handover to be performed
* * *
### 6.1.3 PDPContext
* * *
**Name** AddPDNReq  
**Port** IPCANctl  
**Comment** ASP type which requests the SS to be prepared to establish a new
PDN  
**Parameter Name** **Parameter Type** **Comment** ueAddress IPAddress UE
address to be assigned via NAS signalling bearerInfo List of integers For use
in EUTRA to add DRB(s) for the concerned PDN connectivity pdnTypeFor
PDNTypeFor To indicate what the bearer identified in bearerInfo is to be used
for
* * *
* * *
**Name** AddPDNCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of AddPDNReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** PDNTypeFor **Type** enumerated **Parameters** emergencyPDN, xcapPDN
**Comment** Indicates what the PDN bearer is to be used for
* * *
* * *
**Name** PCORequest  
**Port** IPCANctl  
**Comment** ASP type which returns the contents of the
ProtocolConfigurationOptions IE received in the ActivatePDPContextRequest /
EPS Bearer Request to the TTCN  
**Parameter Name** **Parameter Type** **Comment** configOptList ConfigOptList  
bearerContextId integer
* * *
* * *
**Name** PCOResponse  
**Port** IPCANctl  
**Comment** ASP type which sends back the ProtocolConfigurationOptions IE to
the SS.  
**Parameter Name** **Parameter Type** **Comment** configOptList ConfigOptList  
bearerContextId integer
* * *
+--------------------+-----------------------+-----------------------+ | **Name** | DedicatedBearerReq | | +--------------------+-----------------------+-----------------------+ | **Port** | IPCANctl | | +--------------------+-----------------------+-----------------------+ | **Comment** | ASP type which in | | | | requests the SS to | | | | establish one or more | | | | secondary PDP context | | | | / dedicated bearers; | | | | or informs the SS to | | | | expect the UE to | | | | request one or more | | | | secondary PDP context | | | | / dedicated bearers. | | | | Includes the bearer | | | | info to be configured | | | | and media ports to be | | | | used | | +--------------------+-----------------------+-----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +--------------------+-----------------------+-----------------------+ | bearerInfoList | {{bearerContextId, | | | | | | | | bearerInfo, | | | | | | | | mediaPort}} | | +--------------------+-----------------------+-----------------------+ | moFlag | boolean | Set to true if the SS | | | | is requested to | | | | accept a mobile | | | | initiated dedicated | | | | bearer establishment | | | | procedure; set to | | | | false if the SS is to | | | | establish the | | | | dedicated bearer. | +--------------------+-----------------------+-----------------------+
* * *
**Name** DedicatedBearerCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
DedicatedBearerReq, when it is completed  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** ModifyBearerReq  
**Port** IPCANctl  
**Comment** ASP type which informs the SS to expect the UE to request to
modify an existing PDP context / Dedicated Bearer. Includes the bearer info
for this to be modified to  
**Parameter Name** **Parameter Type** **Comment** bearerContextId integer  
bearerInfo integer
* * *
* * *
**Name** ModifyBearerCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
ModifyBearerReq, when it is completed  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** DeactivateBearerReq  
**Port** IPCANctl  
**Comment** ASP type which requests the SS deactivate the indicated PDP
context. A value of bearerContextId = 0 indicates that all existing PDP
contexts are to be deactivated.  
**Parameter Name** **Parameter Type** **Comment** bearerContextId integer  
moInititiated boolean Flag indicating if the PDP context deactivation is
initiated by the UE
* * *
* * *
**Name** DeactivateBearerCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
DeactivateBearerReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
+-------------+-------------------------------------------------------+ | **Name** | BearerInfo | +-------------+-------------------------------------------------------+ | **Type** | integer | +-------------+-------------------------------------------------------+ | **Comment** | References the RAB to be configured. This is RAN | | | independent and can be added to/reduced as required | | | | | | This is simply a list of RAB identifiers. It is | | | expected, in the future, for these identifiers to | | | equate to specific RAB requirements, for all | | | available radio access technologies See clause 8.1 | | | for more information. | +-------------+-------------------------------------------------------+
* * *
**Name** ConfigOptList **Type** set of ConfigOpt **Comment** Used to contain
the protocol configuration options IE used in the PDP context messages
* * *
* * *
**Name** ConfigOpt **Type** octetstring **Parameter Name** **Parameter Type**
ContainerId octetstring [2] ContainerLength octetstring [1] ContainerContents
octetstring optional
* * *
### 6.1.4 IP Configuration
* * *
**Name** InstallKeyReq  
**Port** IPconf  
**Comment** ASP type which installs the keys into the IP layer in the SS  
**Parameter Name** **Parameter Type** **Comment** MD5_96Key bitstring length
(128) SHA_1_96Key bitstring length (160) DES_EDE3_CBCKey bitstring length
(192) AES_CBCKey bitstring length (128)
* * *
* * *
**Name** InstallKeyCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of
InstallKeyReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** AssignIPaddrReq  
**Port** IPconf  
**Comment** ASP type which assigns the IP address to the IP layer in the SS  
**Parameter Name** **Parameter Type** **Comment** p_cscf_Addr IPAddr  
dhcp_Addr IPAddr  
dns_Addr IPAddr  
ue_Addr IPAddr  
peerUE_Addr IPAddr
* * *
* * *
**Name** AssignIPaddrCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of
AssignIPaddrReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** IPAddr **Type** charstring **Comment** in either colon separated or
dotted decimal format
* * *
* * *
**Name** ReleaseIPConfigurationReq  
**Port** IPconf  
**Comment** ASP type which releases the IMS IP layer configurations including
Security Associations. This ASP is meant to be used when starting a new test
case to make sure that the IP layer is in a well defined initial state
irrespective of the execution of previous tests.  
**Parameter Name** **Parameter Type** **Comment** \- - No parameters
* * *
* * *
**Name** ReleaseIPConfigurationCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of
ReleaseIPConfigurationReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** AddPCSCFaddrReq  
**Port** IPconf  
**Comment** ASP type which configures a new address of the P-CSCF component in
the IP layer in the SS  
**Parameter Name** **Parameter Type** **Comment** p_cscf_Addr IPAddr New IP
address of P-CSCF component to be simulated
* * *
* * *
**Name** AddPCSCFaddrCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of
AddPCSCFaddrReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** SignallingCompressionReq  
**Port** SigComp  
**Comment** ASP type which starts/stops signalling compression of messages  
**Parameter Name** **Parameter Type** **Comment** startCompression boolean
* * *
* * *
**Name** SignallingCompressionCnf  
**Port** SigComp  
**Comment** ASP type which returns the result of the execution of
SignallingCompressionReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** RcvdCompartmentId  
**Port** SigComp  
**Comment** ASP type which feeds back the Compartment Id back to the Sigcomp
layer, extracted from the last received message, used by SigComp layer to
store any state appropriately.  
**Parameter Name** **Parameter Type** **Comment** **compartmentId** charstring
Call-Id of the SIP message will be used as compartment Id
* * *
+----------------+----------------------------------------------------+ | **Name** | DecompFailureType | +----------------+----------------------------------------------------+ | **Type** | enumerated | +----------------+----------------------------------------------------+ | **Parameters** | stateCreation,dummy1,dummy2,dummy3 | +----------------+----------------------------------------------------+ | **Comment** | Indicates the mechanism through which | | | decompression failure errors shall be inserted | | | during compressing message | | | | | | stateCreation: This type indicates, decompression | | | failure shall be generated by inserting 'State | | | Creation' instructions in DL messages sent on | | | unsecured SS Port (clause 8 of 3GPP TS 24.229 | | | [11]) | +----------------+----------------------------------------------------+
* * *
**Name** UpdateRemotePCSCFPortNumberReq  
**Port** IPconf  
**Comment** ASP type use by TTCN to reconfigure P-CSCF server and client ports
to contact the UE at given port number  
**Parameter Name** **Parameter Type** **Comment** uePortNumber integer
* * *
* * *
**Name** UpdateRemotePCSCFPortNumberCnf  
**Port** IPconf  
**Comment** ASP type which the result of the execution of
UpdateRemotePCSCFPortNumberReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
### 6.1.5 SA Database
* * *
**Name** DoubleAddSADReq  
**Port** IPconf  
**Comment** ASP type which sets two entries of SAD in the SS  
**Parameter Name** **Parameter Type** **Comment** sa1 SA  
sa2 SA
* * *
* * *
**Name** DoubleAddSADCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of
DoubleAddSADReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** DelSADReq  
**Port** IPconf  
**Comment** ASP type which deletes the SAD entries  
**Parameter Name** **Parameter Type** **Comment** spi1 SPI  
spi2 SPI optional spi3 SPI optional spi4 SPI optional spi5 SPI optional spi6
SPI optional spi7 SPI optional spi8 SPI optional spi9 SPI optional
* * *
* * *
**Name** DelSADCnf  
**Port** IPconf  
**Comment** ASP type which returns the result of the execution of DelSADReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** SA **Port** IPconf **Comment** ASP type which sets a single entry of
parameters for a security association in the SS **Parameter Name** **Parameter
Type** spi SPI srcIPaddr IPAddr desIPaddr IPAddr srcUDPport integer desUDPport
integer intAlgo IntAlgo ciphAlgo CiphAlgo
* * *
* * *
**Name** IntAlgo **Type** enumerated **Parameters** hmac_md5_96, hmac_sha_1_96
**Comment** Integrity algorithms
* * *
* * *
**Name** CiphAlgo **Type** enumerated **Parameters** des_ede3_cbc, aes_cbc,
nociph **Comment** Ciphering algorithms, \"nociph\" means no ciphering
* * *
* * *
**Name** SPI **Type** integer (0..4294967295) **Comment** security parameter
index for IPsec
* * *
### 6.1.6 Emergency CS Call
* * *
**Name** ExpectEmergencyCSCall  
**Port** IPCANctl  
**Comment** ASP type which informs the SS to expect the UE to request an
emergency CS call  
**Parameter Name** **Parameter Type** **Comment**
* * *
* * *
**Name** EmergencyCSCallActive  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
ExpectEmergencyCSCall when it is in call active state  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
* * *
**Name** ReleaseCSCallReq  
**Port** IPCANctl  
**Comment** ASP type which requests the SS to release the CS call previously
established during ExpectEmergencyCSCall  
**Parameter Name** **Parameter Type** **Comment**
* * *
* * *
**Name** ReleaseCSCallCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of
ReleaseCSCallReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
### 6.1.7 CS Voice Call
+--------------------+-----------------------+-----------------------+ | **Name** | CSCallReq | | +--------------------+-----------------------+-----------------------+ | **Port** | IPCANctl | | +--------------------+-----------------------+-----------------------+ | **Comment** | ASP type which | | | | informs the SS to | | | | establish a CS voice | | | | call with the UE | | +--------------------+-----------------------+-----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +--------------------+-----------------------+-----------------------+ | **moFlag** | **Boolean** | **Set to true if the | | | | SS is requested to | | | | accept a mobile | | | | originated CS voice | | | | call;** | | | | | | | | **Set to false if SS | | | | is requested to | | | | establish a CS voice | | | | call** | +--------------------+-----------------------+-----------------------+ | **phoneNumber** | **charstring** | **Optional. The phone | | | | number to be | | | | signalled to the UE | | | | in the mobile | | | | terminated case** | +--------------------+-----------------------+-----------------------+
* * *
**Name** CSCallCnf  
**Port** IPCANctl  
**Comment** ASP type which returns the result of the execution of CSCallReq
when it\'s in call active state  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
### 6.1.8 IPCANConnection
* * *
**Name** ReleaseIpcanConnectionReq  
**Port** IPCANctl  
**Comment** ASP which requests the SS to release the RRC connection in EUTRA
case. The DRB resources are reserved for restoring.  
**Parameter Name** **Parameter Type** **Comment**
* * *
* * *
**Name** ReleaseIpacnConnectionCnf  
**Port** IPCANctl  
**Comment** ASP which returns the result of the execution of the ASP
ReleaseIPCANConnectionReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
+--------------------+-----------------------+-----------------------+ | **Name** | Rest | | | | oreIpcanConnectionReq | | +--------------------+-----------------------+-----------------------+ | **Port** | IPCANctl | | +--------------------+-----------------------+-----------------------+ | **Comment** | ASP which requests | | | | the SS to restore the | | | | DRB connection in | | | | EUTRA | | +--------------------+-----------------------+-----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +--------------------+-----------------------+-----------------------+ | moFlag | Boolean | In case of EUTRA | | | | | | | | Set to true | | | | | | | | - SS will wait for | | | | the UE to restore / | | | | re-establish DRB | | | | | | | | Set to false | | | | | | | | - SS is requested to | | | | page UE and restore | | | | /re-establish DRB | +--------------------+-----------------------+-----------------------+
* * *
**Name** RestoreIpcanConnectionCnf  
**Port** IPCANctl  
**Comment** ASP which returns the result of the execution of the ASP
RestoreIpcanConnectionReq  
**Parameter Name** **Parameter Type** **Comment** status Status
* * *
## 6.2 IMS-IP-CAN Data ASP definitions
### 6.2.1 ASP_DataRequest
+--------------------+-----------------------+-----------------------+ | **Name** | ASP_DataRequest | | +--------------------+-----------------------+-----------------------+ | **Port** | DataPort | | +--------------------+-----------------------+-----------------------+ | **Comment** | ASP type for | | | | receiving/sending SIP | | | | Request Messages | | +--------------------+-----------------------+-----------------------+ | **Parameter Name** | **Parameter Type** | **Comment** | +--------------------+-----------------------+-----------------------+ | sigCompInfo | SigCompInfo | OPTIONAL. Information | | | | for/from SigComp | | | | layer. Absence means | | | | compression is/shall | | | | be not applied in | | | | received/send | | | | message. | +--------------------+-----------------------+-----------------------+ | portInfo | SSPortInfo | | +--------------------+-----------------------+-----------------------+ | msg | union | SIP message | | | {REGISTER_Request, | | | | | | | | INVITE_Request, | | | | | | | | OPTIONS_Request, | | | | | | | | BYE_Request, | | | | | | | | CANCEL_Request, | | | | | | | | ACK_Request, | | | | | | | | PRACK_Request, | | | | | | | | NOTIFY_Request, | | | | | | | | SUBSCRIBE_Request, | | | | | | | | PUBLISH_Request, | | | | | | | | UPDATE_Request, | | | | | | | | REFER_Request , | | | | | | | | MESSAGE_Request} | | +--------------------+-----------------------+-----------------------+
### 6.2.2 ASP_DataResponse
* * *
**Name** ASP_DataResponse  
**Port** DataPort  
**Comment** ASP type for receiving/sending SIP RESPONSE Message  
**Parameter Name** **Parameter Type** **Comment** sigCompInfo SigCompInfo
OPTIONAL. Information for/from SigComp layer. Absence means compression
is/shall be not applied in received/send message. portInfo SSPortInfo  
msg Response SIP RESPONSE message
* * *
* * *
**Name** SigCompInfo  
**Type** Union  
**Parameter Name** **Parameter Type** **Comment** **compartmentId** charstring
Used for Sending messages from TTCN. To be used by SigComp Layer isCompressed
boolean Used for received messages. If set, means received message was
compressed
* * *
* * *
**Name** SSPortInfo  
**Type** record  
**Parameter Name** **Parameter Type** **Comment** **ipAddr** IPAddr IP address
of simulated network node transportProtocol TransportProtocol
* * *
* * *
**Name** TransportProtocol **Type** enumerated **Parameters** **UDP, TCP**
* * *
## 6.3 Ut ASP definitions
* * *
**Name** MMIMessage  
**Port** MMIPort  
**Comment** ASP type for sending messages to upper tester  
**Parameter Name** **Parameter Type** **Comment** mmiMessage charstring Action
required by upper tester
* * *
## 6.4 HTTP Layer ASP definitions
HTTP Layer ASPs are applicable to clause 5.1.1.3
Please refer to TS 34.229-3 [49] annex H.3 for details.
## 6.5 XCAP server ASP definitions
XCAP Layer ASPs are applicable to clause 5.1.1.3.
Please refer to TS 34.229-3 [49] clause 6.5 for details.
# 7 Codec definitions for IP User Data
Please refer to TS 34.229-3 [49] clause 7.
# 8 Design consideration
## 8.1 Bearer Configurations for IMS Testing
### 8.1.1 Bearer Information for UTRAN
* * *
BearerInfo RANTech = UTRAN_FDD Description 1 TS 34.108 [7], clause
6.10.2.4.1.56 To be used for IMS Signalling only 2 TS 34.108 [7], clause
6.10.2.4.6.6 Not supported in Rel-5 3 TS 34.108 [7], clause 6.10.2.4.6.7 Not
supported in Rel-5 4 TS 25.993, clause 7.1.122 Only supported in Rel-5 5 TS
25.993, clause 7.1.124 Not supported in Rel-5
* * *
### 8.1.2 Bearer Information for GERAN
No specific bearer information has yet been defined. The QoS to be used is
therefore dependant on the media applications supported by the UE.
### 8.1.3 Bearer Information for E-UTRA
* * *
BearerInfo RANTech = E-UTRA_FDD Description 1 TS 36.508 [31], clause 6.6.1
Reference default EPS bearer context #2 For IMS Signalling and media text 2 TS
36.508 [31], clause 6.6.2 Reference dedicated EPS bearer context #4 For IMS
media voice and video 3 TS 36.508 [31], clause 6.6.1 Reference default EPS
bearer context #2, except that it is on the Emergency Call PDN Default bearer
for emergency call signalling 4 TS 36.508 [31], clause 6.6.2 Reference
dedicated EPS bearer context #4 Dedicated bearer for emergency voice media
* * *
## 8.2 Security
TBD.
## 8.3 External Function Definitions
The following external functions are required to be implemented by the SS.
* * *
TTCN-3 External Function  
Name fx_MD5_Hex  
**Description** to calculate the MD5 Message-Digest Algorithm according to RFC
1231  
**Parameters** data octetstring **Return Value** octetstring
* * *
Additionally, the following external function is used as defined in TS
36.523-3 [30]:
fx_GetSystemTime
## 8.4 AT commands
No AT commands have yet been defined for IMS operations
## 8.5 Timer Tolerances
Please refer to TS 34.229-3 [49] clause 8.5 for details.
###### ## Annex A (normative): Test Suite
Please refer to TS 34.229-3 [49] annex A for details.
###### ## Annex B (normative): Partial IXIT proforma
Please refer to TS 34.229-3 [49] annex B. In addition to the PIXITs defined in
TS 34.229-3 [49] annex B.1 model specific PIXITs are defined in Table B-1:
Table B-1: PIXIT
+-------------+-------------+------------+-------------+-------------+ | Parameter | Description | Type | Default | Supported | | name | | | value | value | +-------------+-------------+------------+-------------+-------------+ | px_AuthN | Length of | integer | 127 | | | | Extended | | | | | | value | | | | | | | | | | | | min 31, max | | | | | | 127 (TS | | | | | | 34.108 | | | | | | [7] cl. | | | | | | 8.1.2) | | | | +-------------+-------------+------------+-------------+-------------+ | px_DHCPSer | IP address | IPAddr | \"10. | | | ver_IPAddr | of DHCP | | 122.11.33\" | | | | server | | | | | | | | | | | | (in v4 or | | | | | | v6 format | | | | +-------------+-------------+------------+-------------+-------------+ | px_DNS\ | DNS server | charstring | \"dnsserver | | | _DomainName | fully | | .3gpp.org\" | | | | qualified | | | | | | domain name | | | | | | (FQDN) | | | | | | | | | | | | Editors | | | | | | note: FFS | | | | +-------------+-------------+------------+-------------+-------------+ | px_RANTech | RAN | RANTech | UTRAN_FDD | enumerated | | | Technology | | | type: | | | | | | GERAN, | | | | | | | | | | | | UTRA_FDD, | | | | | | UTRA_TDD, | | | | | | | | | | | | EUTRA_FDD, | | | | | | | | | | | | EUTRA_TDD | +-------------+-------------+------------+-------------+-------------+ | px\ | IP address | IPAddr | \"10.1 | | | _UE_IPAddr | assigned to | | 22.11.145\" | | | | UE | | | | | | | | | | | | (in v4 or | | | | | | v6 format) | | | | +-------------+-------------+------------+-------------+-------------+ | px_ | IP address | IPAddr | \"10. | | | UE_IPAddr2 | assigned to | | 122.11.31\" | | | | UE for | | | | | | 2^nd^ PDN | | | | | | | | | | | | (in v4 or | | | | | | v6 format) | | | | +-------------+-------------+------------+-------------+-------------+ | px_ | UE Release | integer | 8 | | | UE_Release | | | | | +-------------+-------------+------------+-------------+-------------+
###### ## Annex C (informative): TTCN-3 style guide for the IMS IP-CAN Test
Suite
Please refer to TS 34.229-3 [49] annex E.
###### ## Annex D (informative): BNF Message Definitions
Please refer to TS 34.229-3 [49] annex F
###### ## Annex E (Normative): SIP Type Definitions and XSD References
Please refer to TS 34.229-3 [49] annex G
#