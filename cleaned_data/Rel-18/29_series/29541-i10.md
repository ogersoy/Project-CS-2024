# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nnef Service Based South-Bound Interfaces for NIDD. It provides stage 3
protocol definitions and message flows, and specifies the API for each service
offered by the NEF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
> [12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
> Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[15] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[16] 3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".
[17] 3GPP TS 29.542: \"5G System; Session management services for Non-IP Data
Delivery (NIDD); Stage 3\".
[18] 3GPP TS 23.540: \"5G System; Technical realization of Service Based Short
Message Service Stage 2\".
[19] 3GPP TS 29.577: \"5G System; IP Short Message Gateway and SMS Router For
Short Message Service; Stage 3\".
[20] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[21] 3GPP TS 24.011: \" Point-to-Point (PP) Short Message Service (SMS)
support on mobile radio interface\".
# 3 Definitions, symbols and abbreviations
## 3.1 Terms
Void.
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
DNN Data Network Name
MO Mobile Originated
NEF Network Exposure Function
NIDD Non-IP Data Delivery
SM Session Management
SMF Session Management Function
NSSAI Network Slice Selection Assistance Information
RDS Reliable Data Service
SUPI Subscription Permanent Identifier
# 4 Overview
## 4.1 Introduction
Within the 5GC, the NEF offers NIDD services to the NF (e.g. SMF) or the NEF
offers MO SMS service to the NF (e.g. SMS-SC) via the Nnef service based
southbound interface (see 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS
23.540 [18]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the NEF
and the scope of the present specification.
Figure 4.1-1: Reference model -- NEF
The functionalities supported by the NEF are listed in clause 6.2.5 of 3GPP TS
23.501 [2].
# 5 Services offered by the NEF for NIDD and SMS
## 5.1 Introduction
The table 5.1-1 shows the NEF Services and Service Operations for NIDD and
SMS:
Table 5.1-1 List of NEF Services for NIDD and SMS
Service Name Service Operations Operation Semantics Example Consumer(s) Mapped
Service Operation
* * *
Nnef_SMContext Create Request/Response SMF Nnef_SMContext_Create Delete
Request/Response SMF Nnef_SMContext_Delete Status Notify Subscribe/Notify SMF
Nnef_SMContext_DeleteNotify (NOTE) Update Request/Response SMF  
Delivery Request/Response SMF Nnef_SMContext_Delivery Nnef_SMService
MoForwardSm Request/Response SMS-SC Nnef_SMService_MoForwardSm NOTE: The
Status Notify service operation models the Nnef_SMContext_DeleteNotify service
operation specified in 3GPP TS 23.502 [3] (see clause 5.2.2.4.2).
Table 5.1-2 summarizes the corresponding APIs defined for this specification.
Table 5.1-2: API Descriptions
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex**
* * *
Nnef_SMContext 6.1 Nnef SMContext Service TS29541_Nnef_SMContext.yaml nnef-
smcontext A.2 Nnef_SMService 6.2 Nnef SMService Service
TS29541_Nnef_SMService.yaml nnef-smservice A.3
## 5.2 Nnef_SMContext Service
### 5.2.1 Service Description
The service allows a NF to manage the SM Contexts on NEF for NIDD. A NF as
service consumer (e.g. SMF) can create, update or release SM Contexts for NIDD
on NEF. A created SM Context for NIDD may also be released by NEF.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
The Nnef_SMContext service supports following service operations:
\- Create
\- Delete
\- StatusNotify
\- Update
\- Deliver
#### 5.2.2.2 Create Service Operation
##### 5.2.2.2.1 General
The Create service operation is used during the following procedure:
\- SMF-NEF Connection Establishment procedure (see 3GPP TS 23.502 [3], clause
4.25.2)
The Create service operation is invoked by a NF Service Consumer (e.g. a SMF)
towards the NEF, when the SMF received a PDU Session establishment request
from the UE with PDU Session type of \"Unstructured\", and the subscription
information corresponding to the UE requested DNN includes the \"NEF Identity
for NIDD\". There shall be only one individual SM context per PDU session.
The NF Service Consumer (e.g. the SMF) shall create the SM Context for NIDD on
NEF by sending the HTTP POST request towards the SM Contexts Collection
resource as shown in Figure 5.2.2.2.1-1.
Figure 5.2.2.2.1-1: Create Service Operation
1\. The NF Service Consumer shall send a POST request to the resource
representing the SM Contexts Collection resource of the NEF with a
\"SmContextCreateData\" object in request body, including:
\- SUPI of the UE;
\- PDU session ID;
\- S-NSSAI associated with the PDU session;
\- DNN of the PDU session;
\- NIDD information, such as GPSI, AF ID, etc.;
\- NEF ID, indicating the provisioned identity for NIDD service;
\- URI of the Individual PDU session resource for downlink data delivery (see
clause 6.1.3.2 of 3GPP TS 29.542 [17]);
\- Notification URI to receive the SM Context notifications;
\- optionally the indication of UE capability to support Reliable Data Service
(RDS);
\- optionally the configuration parameters, e.g. serving PLMN rate control,
small data rate control, etc.;
\- optionally small data rate control status, if small data rate control is
previously enabled and to be resumed
2a. On success, \"201 Created\" shall be returned and the \"Location\" header
shall be present and shall contain the URI of the created Individual SM
Context resource.
The payload body of the POST response shall contain a \"SmContextCreatedData\"
object, including:
\- SUPI of the UE;
\- PDU session ID;
\- S-NSSAI associated with the PDU session;
\- DNN of the PDU session;
\- NEF ID, indicating the provisioned identity for NIDD service;
\- optionally the indication of NEF capability to support Reliable Data
Service (RDS);
\- optionally the indication of NEF capability to support Extended Buffering;
\- optionally Maximum Packet Size in bytes for NIDD data packet.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.2.3.1-3 shall be returned, the response body should contain a
\"ProblemDetails\" object with \"cause\" attribute set to one of the
application errors listed in Table 6.1.3.2.3.1-3.
#### 5.2.2.3 Delete Service Operation
##### 5.2.2.3.1 General
The Delete service operation is used during the following procedure:
\- SMF Initiated SMF-NEF Connection Release procedure (see 3GPP TS 23.502 [3],
clause 4.25.7)
The Delete service operation is invoked by a NF Service Consumer (e.g. a SMF)
towards the NEF, when the PDU Session Release is initiated and a SM context
for NIDD has been previously created on NEF for the PDU session.
The NF Service Consumer (e.g. the SMF) shall delete the SM Context for NIDD on
NEF by invoking the \"release\" custom operation on the Individual SM Context
resource as shown in Figure 5.2.2.3.1-1.
Figure 5.2.2.3.1-1: Delete Service Operation
1\. The NF Service Consumer shall send a HTTP POST request towards the URI of
\"release\" custom operation on the Individual SM Context resource received
from the \"Location\" header during a successful Create service operation
invocation (See clause 5.2.2.2). The request body shall contain a
\"SmContextReleaseData\" object.
2a. On success, \"204 No Content\" shall be returned if no information is to
be returned to the NF service consumer; otherwise \"200 OK\" shall be returned
with a \"SmContextReleasedData\" object in response body including necessary
information to the NF service consumer, e.g.:
\- Small Data Rate Control status, if Small Data Rate Control is enforced;
\- APN Rate Status, if APN Rate Control is enforced
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.4.2-2 shall be returned, the response body should contain a
\"ProblemDetails\" object with \"cause\" attribute set to one of the
application errors listed in Table 6.1.3.3.4.2.2-2.
#### 5.2.2.4 Status Notify Service Operation
##### 5.2.2.4.1 General
The Status Notify service operation is used during the following procedure:
\- NEF Initiated SMF-NEF Connection Release procedure (see 3GPP TS 23.502 [3],
clause 4.25.8)
The Status Notify service operation is invoked by the NEF to inform a NF
Service Consumer (e.g. a SMF), when the status of the Individual SM Context
has changed.
The NEF shall inform the status change of the Individual SM Context resource
by sending the HTTP POST method towards the Notification URI as shown in
Figure 5.2.2.4.1-1.
Figure 5.2.2.4.1-1: Status Notify Service Operation
1\. The NEF shall send a POST request towards the Notification URI received in
the Create service operation request (See clause 5.2.2.2). The request body
shall contain a \"SmContextStatusNotification\" object indicating the changed
status of the Individual SM Context resource. The \"smContextId\" attribute
shall contain the URI of the SM Context resource that triggers the
notification.
2a. On success, \"204 No content\" shall be returned without response body.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.5.2.3.1-2 shall be returned, the response body should contain a
\"ProblemDetails\" object.
##### 5.2.2.4.2 Notify of Individual SM Context Release
(Nnef_SMContext_DeleteNotify)
During NEF initiated SMF-NEF connection release procedure (see 3GPP TS 23.502
[3], clause 4.25.8), the NEF shall send Status Notification to inform the NF
service consumer that the Individual SM Context is released.
The requirements in clause 5.2.2.4.1 shall be applied, with following
additions:
1\. Same as step 1 of Figure 5.2.2.4.1-1, the NEF shall set the value of
\"status\" attribute in the request body to \"RELEASED\".
\- If Small Data Rate Control is enforced, the response body should include
the Small Data Rate Control status.
\- If APN Rate Control is enforced, the response body should include the APN
Rate Status.
#### 5.2.2.5 Update Service Operation
##### 5.2.2.5.1 General
The Update service operation is invoked by a NF Service Consumer, e.g. a SMF,
towards the NEF, when the SMF detects that some of the configurations of the
PDU session has changed and the related SM Context for NIDD needs to be
updated accordingly.
The NF Service Consumer (e.g. the SMF) shall update the SM Context for NIDD on
NEF by invoking the \"update\" custom operation of the Individual SM Context
resource as shown in Figure 5.2.2.5.1-1.
Figure 5.2.2.5.1-1: Update Service Operation
1\. The NF Service Consumer shall send a POST request to the URI of \"update\"
custom operation on an Individual SM Context resource, with a
\"SmContextUpdateData\" object in request body containing the attributes to be
updated, e.g.:
\- URI of the resource to receive downlink data delivery for NIDD;
\- Notification URI to receive the SM Context notifications;
\- modified configuration parameters, e.g. serving PLMN rate control, small
data rate control, etc.
NOTE: If both the NEF and the NF service consumer (i.e. the SMF) supports
\"BIUMR\" feature, the SMF can include the updated binding indication(s) for
multiple PDU session resources (for NIDD downlink data delivery) and/or
notification URIs (for SM Context notifications), as specified in clauses
6.12.1 and 5.2.3.2.6 of 3GPP TS 29.500 [4].
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.4.3.2-2 shall be returned, the response body should contain a
ProblemDetails object with \"cause\" attribute set to one of the application
errors listed in Table 6.1.3.3.4.3.2-2.
#### 5.2.2.6 Deliver Service Operation
##### 5.2.2.6.1 General
The Deliver service operation is invoked by a NF Service Consumer, e.g. a SMF,
to transport Mobile Originated data packet via NEF.
The NF Service Consumer (e.g. the SMF) shall deliver Mobile Originate data via
NEF by invoking the \"deliver\" custom operation of the Individual SM Context
resource as shown in Figure 5.2.2.6.1-1.
Figure 5.2.2.5.6-1: Deliver Service Operation
1\. The NF Service Consumer shall send a POST request to the URI of
\"deliver\" custom operation on an Individual SM Context resource, with the
request body containing:
\- the MO data as binary body part with content type set as
\"application/octet-stream\"; and
\- a \"DeliverReqData\" object as another body part with \"data\" attribute
refer to the MO data binary part.
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.4.4.2-2 shall be returned. The response body should contain a
ProblemDetails object with \"cause\" attribute set to one of the application
errors listed in Table 6.1.3.3.4.4.2-2.
## 5.3 Nnef_SMService Service
### 5.3.1 Service Description
See 3GPP TS 23.540 [18] clause 6.8.1
#### 5.3.2.2 MoForwardSm
##### 5.3.2.2.1 General
The MoForwardSm service operation shall be used to transmit MO SMS message via
NEF.
It is used in the following procedures:
\- MSISDN-less MO SMS message transfer (see clause 5.2.4 of 3GPP TS 23.540
[18]).
The NF Service Consumer (e.g. SMS-SC) shall transmit MO SMS message to NEF by
using the HTTP POST method as shown in Figure 5.3.2.2.1-1.
Figure 5.3.2.2.1-1: SBI-based MO SM transfer
1\. The NF Service Consumer shall send a POST request to the resource
representing the UE\'s Mobile Originated Short Message Information resource
(i.e. .../sm-contexts/{supi}/sendsms) of the NEF. The payload body of the POST
request shall contain the SMS message to be sent.
2a. On success, \"200 OK\" shall be returned with \"SmsDeliveryData\" object
contains the MO SMS Delivery Report in the response body.
2b. On failure, or redirection, one of the HTTP status code listed in Table
6.2.3.2.4.2.2-2 shall be returned.
# 6 API Definitions
## 6.1 Nnef_SMContext Service API
### 6.1.1 Introduction
The Nnef_SMContext service shall use the Nnef_SMContext service API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nnef-smcontext\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nnef_SMContext API is contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 6.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be applicable. In this release of the specification, no
specific custom headers are defined for the Nnef_SMContext service.
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1 describes the resource URI structure of the Nnef_SMContext
API.
Figure 6.1.3.1-1: Resource URI structure of the Nnef_SMContext API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
SM Contexts Collection {apiRoot}/nnef-smcontext/\/sm-contexts POST
Creates an Individual SM Context resource. Individual SM Context
{apiRoot}/nnef-smcontext/\/sm-contexts/{smContextId}/release
release (POST) Deletes an Individual SM Context resource. {apiRoot}/nnef-
smcontext/\/sm-contexts/{smContextId}/update update (POST) Updates
an Individual SM Context resource. {apiRoot}/nnef-smcontext/\/sm-
contexts/{smContextId}/deliver deliver (POST) Delivers Mobile Originated data
packet.
#### 6.1.3.2 Resource: SM Contexts Collection
##### 6.1.3.2.1 Description
This resource represents the collection of the Individual SM Context resources
created in the NEF.
This resource is modelled with the Collection resource archetype (see clause
C.2 of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nnef-smcontext/\ /sm-contexts**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1 apiVersion See clause 6.1.1
##### 6.1.3.2.3 Resource Standard Methods
##### 6.1.3.2.3.1 POST {#post .H6}
This method creates an Individual SM Context resource in the SM Context
Collection.
This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.
Table 6.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmContextCreateData M 1 Representation of
the Individual SM context to be created.
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the \ Response
Body on this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 201 Created | Successful | | xtCreatedData | | | | creation of | | | | | | an Individual | | | | | | SM context. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USER_UNKNOWN | | | | | | | | | | | | - | | | | | | NIDD_CON | | | | | | FIGURATION_N | | | | | | OT_AVAILABLE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with | | | | | | response body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.2.4 Resource Custom Operations
None.
#### 6.1.3.3 Resource: Individual SM Context
##### 6.1.3.3.1 Description
This resource represents an Individual SM Context resource in the NEF.
This resource is modelled with the Document resource archetype (see clause C.2
of 3GPP TS 29.501 [5]).
##### 6.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/nnef-smcontext/\ /sm-
contexts/{smContextId}**
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1 apiVersion See clause 6.1.1 smContextId SM context
identifier assigned by the NEF during the Create service operation.
##### 6.1.3.3.3 Resource Standard Methods
There is no standard HTTP method supported by this resource.
##### 6.1.3.3.4 Resource Custom Operations
##### 6.1.3.3.4.1 Overview {#overview-2 .H6}
This resource supports custom operation(s) as specified in table
6.1.3.3.4.1-1.
Table 6.1.3.3.4.1-1: Custom operations
Custom operaration URI Mapped HTTP method Description
* * *
{resourceUri}/release POST Delete service operation. {resourceUri}/update POST
Update service operation. {resourceUri}/deliver POST Deliver service operation
##### 6.1.3.3.4.2 Operation: release {#operation-release .H6}
###### # 6.1.3.3.4.2.1 Description
This custom operation releases an Individual SM Context resource previously
created in the NEF.
###### # 6.1.3.3.4.2.2 Operation Definition
This operation shall support the request data structures specified in table
6.1.3.2.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.2.4.2.2-2.
Table 6.1.3.3.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmContextReleaseData M 1 Representation of
the information to release the Individual SM context.
* * *
Table 6.1.3.3.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | SmContex | M | 1 | 200 OK | Successful | | tReleasedData | | | | release of an | | | | | | Individual SM | | | | | | context with | | | | | | information | | | | | | sent to the | | | | | | NF service | | | | | | consumer. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | release of an | | | | | | Individual SM | | | | | | context | | | | | | without | | | | | | information | | | | | | sent to the | | | | | | NF service | | | | | | consumer. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with | | | | | | response body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.4.3 Operation: update {#operation-update .H6}
###### # 6.1.3.3.4.3.1 Description
This custom operation updates an individual SM Context resource.
###### # 6.1.3.3.4.3.2 Operation Definition
This operation shall support the request data structures specified in table
6.1.3.3.4.3.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.3.2-2.
Table 6.1.3.3.4.3.2-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
SmContextUpdateData M 1 Representation of the updates to apply to the
Individual SM context.
Table 6.1.3.3.4.3.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | update of the | | | | | | Individual SM | | | | | | context, when | | | | | | the NEF does | | | | | | not need to | | | | | | return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with | | | | | | response body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.4.3.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.4.3.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.4.4 Operation: deliver {#operation-deliver .H6}
###### # 6.1.3.3.4.4.1 Description
This custom operation transports Mobile Originated data packet via NEF.
###### # 6.1.3.3.4.4.2 Operation Definition
This operation shall support the request data structures specified in table
6.1.3.3.4.4.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.4.2-2.
Table 6.1.3.3.4.4.2-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
DeliverReqData M 1 The data for Deliver service request, including the Mobile
Originated data to be delivered via NEF.
Table 6.1.3.3.4.4.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | delivery of | | | | | | Mobile | | | | | | Originate | | | | | | data via NEF. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with | | | | | | response body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.4.4.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.4.4.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.1.5 Notifications
#### 6.1.5.1 General
This clause specifies the notifications provided by the Nnef_SMContext
service.
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
#### 6.1.5.2 Status Notification
##### 6.1.5.2.1 Description
If the NF Service Consumer (e.g. the SMF) has provided the Notification URI
for getting notified about change of SM Context status, the NEF shall notify
the NF Service Consumer when the SM Context status is updated.
##### 6.1.5.2.2 Target URI
The Notification URI **\"{notificationUri}\"** shall be used with the resource
URI variables defined in table 6.1.5.2.2-1.
Table 6.1.5.2.2-1: Resource URI variables for this resource
Name Definition
* * *
notificationUri String formatted as URI with the Notification Uri
##### 6.1.5.2.3 Standard Methods
##### 6.1.5.2.3.1 POST {#post-1 .H6}
This method shall support the request data structures specified in table
6.1.5.2.3.1-1 and the response data structures and response codes specified in
table 6.1.5.2.3.1-2.
Table 6.1.5.2.3.1-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
SmContextStatusNotification M 1 Representation of the SM Context status
notification.
Table 6.1.5.2.3.1-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | notification | | | | | | of the SM | | | | | | context | | | | | | status change | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply, | | | | | | with response | | | | | | body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.2.3.1-3: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. For the case, when a request is redirected to the same target resource
via a different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance ID
towards which the notification is redirected
* * *
Table 6.1.5.2.3.1-4: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. For the case, when a request is redirected to the same target resource
via a different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance ID
towards which the notification is redirected
* * *
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nnef_SMContext
service based interface protocol.
Table 6.1.6.1-1: Nnef_SMContext specific Data Types
Data type Clause defined Description Applicability
* * *
SmContextCreateData 6.1.6.2.2 Information within Create SM Context Request  
SmContextCreatedData 6.1.6.2.3 Information within Create SM Context Response  
SmContextReleaseData 6.1.6.2.4  
SmContextReleasedData 6.1.6.2.5  
SmContextStatusNotification 6.1.6.2.6 Information within Notify SM Context
Status Request  
NiddInformation 6.1.6.2.7 NIDD information associated to the SM Context  
SmContextConfiguration 6.1.6.2.8 NIDD related configurations that should be
applied for the SM Context on NEF  
SmallDataRateControl 6.1.6.2.9 Data rate control information  
SmContextUpdateData 6.1.6.2.10 Information within Update SM Context Request  
DeliverReqData 6.1.6.2.11 Information within Deliver Service Operation Request  
SmContextStatus 6.1.6.3.3 Enumeration of the status for an Individual SM
Context  
SmallDataRateControlTimeUnit 6.1.6.3.4 Enumeration of the time units that are
applied to data rate control  
ReleaseCause 6.1.6.3.5 Enumeration of causes for SM Context release
Table 6.1.6.1-2 specifies data types re-used by the Nnef_SMContext service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the N~\~ service based interface.
Table 6.1.6.1-2: Nnef_SMContext re-used Data Types
Data type Reference Comments Applicability
* * *
Uri 3GPP TS 29.571 [14] Uniform Resource Identifier  
Supi 3GPP TS 29.571 [14] Subscription Permanent Identifier  
Gpsi 3GPP TS 29.571 [14] General Public Subscription Identifier  
SupportedFeatures 3GPP TS 29.571 [14] Supported features  
PduSessionId 3GPP TS 29.571 [14] PDU Session Identifier  
Dnn 3GPP TS 29.571 [14] Data Network Name  
Snssai 3GPP TS 29.571 [14] Single Network Slice Selection Assistance
Information  
ProblemDetails 3GPP TS 29.571 [14] Error description  
SmallDataRateStatus 3GPP TS 29.571 [14] Small Data Rate Control Status  
ExternalGroupId 3GPP TS 29.571 [14] External Group Identifier  
RefToBinaryData 3GPP TS 29.571 [14] Reference to binary data part  
RedirectResponse 3GPP TS 29.571 [14] Redirect Response
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: SmContextCreateData
Table 6.1.6.2.2-1: Definition of type SmContextCreateData
* * *
Attribute name Data type P Cardinality Description Applicability
* * *
supi Supi M 1 This IE shall contain the subscriber permanent identify of the
UE.
pduSessionId PduSessionId M 1 This IE shall contain the PDU Session ID
indicating the PDU session associated with the SM Context for NIDD to be
created.
dnn Dnn M 1 This IE shall contain the requested DNN.
snssai Snssai M 1 This IE shall contain the requested S-NSSAI for the home
PLMN.
nefId string M 1 This IE shall contain the NEF ID of the target NEF (see
clause 6.1.6.2.48 of 3GPP TS 29.510 [10]).
dlNiddEndPoint Uri M 1 This IE shall contain the URI of the Individual PDU
session resource (see clause 6.1.3.2 of 3GPP TS 29.542 [17]) provided by the
NF service consumer to handle downlink NIDD data delivery.
notificationUri Uri M 1 This IE shall contain the URI to receive SM Context
Status Notifications sent by the NEF.
niddInfo NiddInformation O 0..1 When present, this IE shall contain the
information used for the SM Context.
rdsSupport boolean O 0..1 When present, this IE shall indicate the UE
capability to support RDS.\  
\  
The value of this IE shall be set as following:\  
\- true: UE supports RDS\  
\- false (default): UE does not support RDS
smContextConfig SmContextConfiguration O 0..1 When present, this IE shall
contain the configuration for the NIDD.
supportedFeatures SupportedFeatures C 0..1 This IE shall be present if at
least one optional feature defined in clause 6.1.8 is supported.
* * *
##### 6.1.6.2.3 Type: SmContextCreatedData
Table 6.1.6.2.3-1: Definition of type SmContextCreatedData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | supi | Supi | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | s | | | | | | | ubscriber | | | | | | | permanent | | | | | | | identify | | | | | | | of the | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | pdu | Pdu | M | 1 | This IE | | | SessionId | SessionId | | | shall | | | | | | | contain | | | | | | | the PDU | | | | | | | Session | | | | | | | ID | | | | | | | i | | | | | | | ndicating | | | | | | | the PDU | | | | | | | session | | | | | | | a | | | | | | | ssociated | | | | | | | with the | | | | | | | SM | | | | | | | Context | | | | | | | for NIDD | | | | | | | to be | | | | | | | created. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | requested | | | | | | | DNN. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | requested | | | | | | | S-NSSAI | | | | | | | for the | | | | | | | home | | | | | | | PLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | nefId | string | M | 1 | This IE | | | | | | | shall | | | | | | | contain | | | | | | | the NEF | | | | | | | ID of the | | | | | | | target | | | | | | | NEF (see | | | | | | | clause 6 | | | | | | | .1.6.2.48 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.510 | | | | | | | [10]). | | +-----------+-----------+---+-----------+-----------+-----------+ | r | boolean | O | 0..1 | When | | | dsSupport | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the NEF | | | | | | | c | | | | | | | apability | | | | | | | to | | | | | | | support | | | | | | | RDS. | | | | | | | | | | | | | | The value | | | | | | | of this | | | | | | | IE shall | | | | | | | be set as | | | | | | | fo | | | | | | | llowing:\ | | | | | | | - true: | | | | | | | NEF | | | | | | | supports | | | | | | | RDS\ | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | NEF does | | | | | | | not | | | | | | | support | | | | | | | RDS | | +-----------+-----------+---+-----------+-----------+-----------+ | extB | boolean | O | 0..1 | When | | | ufSupport | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | whether | | | | | | | Extended | | | | | | | Buffering | | | | | | | applies | | | | | | | or not. | | | | | | | | | | | | | | The value | | | | | | | of this | | | | | | | IE shall | | | | | | | be set as | | | | | | | f | | | | | | | ollowing: | | | | | | | | | | | | | | - true: | | | | | | | Extended | | | | | | | Buffering | | | | | | | applies | | | | | | | | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | Extended | | | | | | | Buffering | | | | | | | does not | | | | | | | apply | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | This IE | | | dFeatures | dFeatures | | | shall be | | | | | | | present | | | | | | | if at | | | | | | | least one | | | | | | | optional | | | | | | | feature | | | | | | | defined | | | | | | | in clause | | | | | | | 6.1.8 is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | maxP | integer | O | 0..1 | Maximum | | | acketSize | | | | Packet | | | | | | | Size in | | | | | | | bytes for | | | | | | | NIDD data | | | | | | | packet. | | | | | | | | | | | | | | When | | | | | | | received | | | | | | | from the | | | | | | | NEF, SMF | | | | | | | shall | | | | | | | inform | | | | | | | the UE of | | | | | | | the | | | | | | | Maximum | | | | | | | Packet | | | | | | | Size in | | | | | | | the PCO | | | | | | | in the | | | | | | | PDU | | | | | | | Session | | | | | | | Esta | | | | | | | blishment | | | | | | | Accept | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.4 Type: SmContextReleaseData
Table 6.1.6.2.4-1: Definition of type SmContextReleaseData
Attribute name Data type P Cardinality Description Applicability
* * *
cause ReleaseCause M 1 The cause to release the SM Context
##### 6.1.6.2.5 Type: SmContextReleasedData
Table 6.1.6.2.5-1: Definition of type SmContextReleasedData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | s | S | C | 0..1 | This IE | | | mallDataR | mallDataR | | | shall be | | | ateStatus | ateStatus | | | present | | | | | | | if the | | | | | | | Small | | | | | | | Data Rate | | | | | | | Control | | | | | | | is | | | | | | | enabled | | | | | | | for the | | | | | | | SM | | | | | | | Context. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the Small | | | | | | | Data Rate | | | | | | | Control | | | | | | | Status, | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.31.14.3 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 23.5 | | | | | | | 01 [2]. | | +-----------+-----------+---+-----------+-----------+-----------+ | apnR | ApnR | C | 0..1 | This IE | | | ateStatus | ateStatus | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | APN Rate | | | | | | | Control | | | | | | | is | | | | | | | enabled | | | | | | | for the | | | | | | | SM | | | | | | | Context. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the APN | | | | | | | Rate | | | | | | | Status, | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.4.4.40 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.57 | | | | | | | 1 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.6 Type: SmContextStatusNotification
Table 6.1.6.2.6-1: Definition of type SmContextStatusNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | status | SmCont | M | 1 | This IE | | | | extStatus | | | shall | | | | | | | contain | | | | | | | the | | | | | | | current | | | | | | | status of | | | | | | | the SM | | | | | | | Context | | +-----------+-----------+---+-----------+-----------+-----------+ | sm | Uri | M | 1 | This IE | | | ContextId | | | | shall | | | | | | | contain | | | | | | | the URI | | | | | | | of the SM | | | | | | | Context | | | | | | | resource | | | | | | | that | | | | | | | triggers | | | | | | | the | | | | | | | noti | | | | | | | fication. | | +-----------+-----------+---+-----------+-----------+-----------+ | cause | Rel | M | 1 | The cause | | | | easeCause | | | to | | | | | | | release | | | | | | | the SM | | | | | | | Context | | +-----------+-----------+---+-----------+-----------+-----------+ | s | S | C | 0..1 | This IE | | | mallDataR | mallDataR | | | shall be | | | ateStatus | ateStatus | | | present | | | | | | | if the SM | | | | | | | Context | | | | | | | is | | | | | | | released | | | | | | | and Small | | | | | | | Data Rate | | | | | | | Control | | | | | | | is | | | | | | | enabled | | | | | | | for the | | | | | | | SM | | | | | | | Context. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the Small | | | | | | | Data Rate | | | | | | | Control | | | | | | | Status, | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.31.14.3 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 23.5 | | | | | | | 01 [2]. | | +-----------+-----------+---+-----------+-----------+-----------+ | apnR | ApnR | C | 0..1 | This IE | | | ateStatus | ateStatus | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | APN Rate | | | | | | | Control | | | | | | | is | | | | | | | enabled | | | | | | | for the | | | | | | | SM | | | | | | | Context. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the APN | | | | | | | Rate | | | | | | | Status, | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.4.4.40 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.57 | | | | | | | 1 [14]. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.7 Type: NiddInformation
Table 6.1.6.2.7-1: Definition of type NiddInformation
Attribute name Data type P Cardinality Description Applicability
* * *
extGroupId ExternalGroupId O 0..1 When present, this IE shall contain the
External group Id of the UE.  
gpsi Gpsi O 0..1 When present, this IE shall contain the GPSI of the UE.  
afId string O 0..1 The string identifying the AF as the owner of associated
NIDD Configuration, which is received from Nidd Information in UDM (See clause
6.1.6.2.35 of 3GPP TS 29.503 [16]).  
NOTE: At least one of the attributes in the table shall be present.
##### 6.1.6.2.8 Type: SmContextConfiguration
Table 6.1.6.2.8-1: Definition of type SmContextConfiguration
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | s | Sm | O | 0..1 | When | | | malDataRa | allDataRa | | | present, | | | teControl | teControl | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | c | | | | | | | onfigured | | | | | | | Small | | | | | | | Data Rate | | | | | | | Control | | | | | | | for | | | | | | | downlink | | | | | | | data, as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.31.14.3 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 23.5 | | | | | | | 01 [2]. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | S | C | 0..1 | This IE | | | mallDataR | mallDataR | | | shall | | | ateStatus | ateStatus | | | contain | | | | | | | the Small | | | | | | | Data Rate | | | | | | | Status if | | | | | | | the Small | | | | | | | Data Rate | | | | | | | Status is | | | | | | | available | | | | | | | (see | | | | | | | clause | | | | | | | 5.31.14.3 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 23.50 | | | | | | | 1 [2]). | | +-----------+-----------+---+-----------+-----------+-----------+ | s | integer | O | 0..1 | When | | | ervPlmnDa | | | | present, | | | taRateCtl | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | maximum | | | | | | | allowed | | | | | | | number of | | | | | | | Downlink | | | | | | | NAS Data | | | | | | | PDUs per | | | | | | | deci hour | | | | | | | of the | | | | | | | serving | | | | | | | PLMN, as | | | | | | | specified | | | | | | | in | | | | | | | clause | | | | | | | 5.31.14.2 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 23.5 | | | | | | | 01 [2]. | | | | | | | | | | | | | | In Update | | | | | | | service | | | | | | | o | | | | | | | peration, | | | | | | | this IE | | | | | | | may be | | | | | | | set to | | | | | | | null | | | | | | | value | | | | | | | i | | | | | | | ndicating | | | | | | | the | | | | | | | Serving | | | | | | | PLMN Rate | | | | | | | Control | | | | | | | is | | | | | | | disabled. | | | | | | | | | | | | | | Minimum: | | | | | | | 10 | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: At | | | | | | | least one | | | | | | | of the | | | | | | | a | | | | | | | ttributes | | | | | | | in the | | | | | | | table | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.9 Type: SmallDataRateControl
Table 6.1.6.2.8-1: Definition of type SmallDataRateControl
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | timeUnit | S | M | 1 | This IE | | | | mallDataR | | | shall | | | | ateContro | | | indicate | | | | lTimeUnit | | | the time | | | | | | | unit for | | | | | | | which the | | | | | | | data rate | | | | | | | control | | | | | | | is | | | | | | | applied. | | +-----------+-----------+---+-----------+-----------+-----------+ | maxPac | integer | O | 0..1 | If | | | ketRateUl | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | uplink | | | | | | | packets | | | | | | | allowed | | | | | | | to be | | | | | | | sent | | | | | | | within | | | | | | | the time | | | | | | | unit. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | maxPac | integer | O | 0..1 | If | | | ketRateDl | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | downlink | | | | | | | packets | | | | | | | allowed | | | | | | | to be | | | | | | | sent | | | | | | | within | | | | | | | the time | | | | | | | unit. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | maxAddi | integer | O | 0..1 | If | | | tionalPac | | | | present, | | | ketRateUl | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | a | | | | | | | dditional | | | | | | | maximum | | | | | | | number of | | | | | | | uplink | | | | | | | packets | | | | | | | allowed | | | | | | | to be | | | | | | | sent | | | | | | | within | | | | | | | the time | | | | | | | unit. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | maxAddi | integer | O | 0..1 | If | | | tionalPac | | | | present, | | | ketRateDl | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | a | | | | | | | dditional | | | | | | | maximum | | | | | | | number of | | | | | | | downlink | | | | | | | packets | | | | | | | allowed | | | | | | | to be | | | | | | | sent | | | | | | | within | | | | | | | the time | | | | | | | unit. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | At least | | | | | | | one of | | | | | | | p | | | | | | | arameters | | | | | | | maxPack | | | | | | | etRateUl, | | | | | | | or | | | | | | | maxPac | | | | | | | ketRateDl | | | | | | | should be | | | | | | | included. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Parameter | | | | | | | maxAddi | | | | | | | tionalPac | | | | | | | ketRateUl | | | | | | | should be | | | | | | | absent if | | | | | | | parameter | | | | | | | maxPac | | | | | | | ketRateUl | | | | | | | is | | | | | | | absent. | | | | | | | | | | | | | | NOTE 3: | | | | | | | Parameter | | | | | | | maxAddi | | | | | | | tionalPac | | | | | | | ketRateDl | | | | | | | should be | | | | | | | absent if | | | | | | | parameter | | | | | | | maxPac | | | | | | | ketRateDl | | | | | | | is | | | | | | | absent. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.10 Type: SmContextUpdateData
Table 6.1.6.2.10-1: Definition of type SmContextUpdateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | dlNid | Uri | O | 0..1 | When | | | dEndPoint | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain a | | | | | | | new URI | | | | | | | of | | | | | | | I | | | | | | | ndividual | | | | | | | PDU | | | | | | | session | | | | | | | resource | | | | | | | (see | | | | | | | claus | | | | | | | e 6.1.3.2 | | | | | | | of | | | | | | | 3GPP | | | | | | | TS 29.54 | | | | | | | 2 [17]) | | | | | | | handling | | | | | | | downlink | | | | | | | NIDD data | | | | | | | delivery. | | | | | | | | | | | | | | The NEF | | | | | | | shall | | | | | | | send | | | | | | | downlink | | | | | | | data to | | | | | | | the | | | | | | | resource | | | | | | | i | | | | | | | dentified | | | | | | | by the | | | | | | | new URI | | | | | | | after the | | | | | | | update is | | | | | | | c | | | | | | | ompleted. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifi | Uri | O | 0..1 | When | | | cationUri | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain a | | | | | | | new URI | | | | | | | to | | | | | | | receive | | | | | | | SM | | | | | | | Context | | | | | | | Status | | | | | | | Noti | | | | | | | fications | | | | | | | sent by | | | | | | | the NEF. | | | | | | | | | | | | | | The NEF | | | | | | | shall | | | | | | | send SM | | | | | | | Contact | | | | | | | Status | | | | | | | Not | | | | | | | ification | | | | | | | to this | | | | | | | new URI | | | | | | | after the | | | | | | | update is | | | | | | | c | | | | | | | ompleted. | | +-----------+-----------+---+-----------+-----------+-----------+ | smCont | SmCo | O | 0..1 | When | | | extConfig | ntextConf | | | present, | | | | iguration | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | conf | | | | | | | iguration | | | | | | | for the | | | | | | | NIDD. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: At | | | | | | | least one | | | | | | | of the | | | | | | | a | | | | | | | ttributes | | | | | | | in the | | | | | | | table | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.11 Type: DeliverReqData
Table 6.1.6.2.12-1: Definition of type DeliverReqData
Attribute name Data type P Cardinality Description
* * *
data RefToBinaryData M 1 This IE shall contain the reference to Mobile
Originated data to be delivered via NEF.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
##### 6.1.6.3.3 Enumeration: SmContextStatus
The enumeration SmContextStatus represents status of Individual SM Context in
the NEF. It shall comply with the provisions defined in table 6.1.5.3.3-1.
Table 6.1.6.3.3-1: Enumeration SmContextStatus
Enumeration value Description Applicability
* * *
\"RELEASED\" Indicates that the Individual SM Context for NIDD is released.
##### 6.1.6.3.4 Enumeration: SmallDataRateControlTimeUnit
The enumeration SmallDataRateControlTimeUnit represents the allowed time unit.
It shall comply with the provisions defined in table 6.1.5.3.3-1.
Table 6.1.6.3.4-1: Enumeration SmallDataRateControlTimeUnit
Enumeration value Description Applicability
* * *
\"MINUTE\" Indicates the rate control is applied per minute.  
\"HOUR\" Indicates the rate control is applied per hour.  
\"DAY\" Indicates the rate control is applied per day.  
\"WEEK\" Indicates the rate control is applied per week.  
\"6MINUTES\" Indicates the rate control is applied per 6 minutes.
##### 6.1.6.3.5 Enumeration: ReleaseCause
The enumeration ReleaseCause represents cause for release of the SM Context in
the NEF. It shall comply with the provisions defined in table 6.1.6.3.5-1.
Table 6.1.6.3.5-1: Enumeration ReleaseCause
Enumeration value Description Applicability
* * *
\"PDU_SESSION_RELEASED\" Indicates the SM Context is to be released due to
corresponding PDU Session is released.
### 6.1.7 Error Handling
#### 6.1.7.1 General
For the Nnef_SMContext API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nnef_SMContext API.
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4]. No specific procedures for the Nnef_SMContext service are
specified.
#### 6.1.7.3 Application Errors
The application errors defined for the Nnef_SMContext service are listed in
Table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
\"USER_UNKNOWN\" 403 This application error indicates that the User Identity
does not exist in the NEF. \"NIDD_CONFIGURATION_NOT_AVAILABLE\" 403 This
application error indicates that there is no valid NIDD configuration exists
for the requested SM Context in the NEF, and NIDD configuration triggered by
the NEF (see clause 4.4.12.2 of 3GPP TS 29.522 [15]) is not supported or has
failed. \"CONTEXT_NOT_FOUND\" 404 This application error indicates that the SM
Context referred by the requested resource URI does not exist in the NEF.
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the Nnef_SMContext API.
They shall be negotiated using the extensibility mechanism defined in clause
6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Supported Features
+----------------+--------------+------------------------------------+ | Feature number | Feature Name | Description | +================+==============+====================================+ | 1 | BIUMR | Binding Indication Update for | | | | Multiple Resources | | | | | | | | This feature bit indicates whether | | | | the NF Service Consumer (i.e. SMF) | | | | and NEF supports Binding | | | | Indication Update for multiple | | | | resources and/or contexts, as | | | | specified in clauses 6.12.1 and | | | | 5.2.3.2.6 of 3GPP TS 29.500 [4]. | +----------------+--------------+------------------------------------+
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nnef_SMContext API may be authorized by means of the OAuth2 protocol (see IETF
RFC 6749 [9]), based on local configuration, using the \"Client Credentials\"
authorization grant, where the NRF (see 3GPP TS 29.510 [10]) plays the role of
the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nnef_SMContext API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nnef_SMContext service.
The Nnef_SMContext API defines a single scope \"nnef-smcontext\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different NEF service instance, within
the same NEF or a different NEF of an NEF set, e.g. when an NEF service
instance is part of an NEF (service) set or when using indirect communications
(see 3GPP TS 29.500 [4]).
An SCP that reselects a different NEF producer instance will return the NF
Instance ID of the new NEF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an NEF within an NEF set redirects a service request to a different NEF of
the set using an 307 Temporary Redirect or 308 Permanent Redirect status code,
the identity of the new NEF towards which the service request is redirected
shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary
Redirect or 308 Permanent Redirect response as specified in clause 6.10.9.1 of
3GPP TS 29.500 [4].
## 6.2 Nnef_SMService Service API
### 6.2.1 Introduction
The Nnef_SMService shall use the Nnef_SMService API.
The API URI of the Nnef_SMService API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nnef-smservice\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nnef_SMService API is contained in Annex A.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.2.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
Multipart messages shall also be supported (see clause 6.1.2.4) using the
content type \"multipart/related\", comprising:
\- one JSON body part with the \"application/json\" content type; and
\- one binary body part with 3gpp vendor specific content subtypes.
The 3gpp vendor specific content subtypes defined in Table 6.2.2.2.2-1 shall
be supported.
Table 6.2.2.2.2-1: 3GPP vendor specific content subtypes
content subtype Description
* * *
vnd.3gpp.sms Binary encoded payload, encoding SMS payload, as specified in
3GPP TS 23.040 [20] and 3GPP TS 24.011 [21]. NOTE: Using 3GPP vendor content
subtypes allows to describe the nature of the opaque payload (e.g. SMS
payload) without having to rely on metadata in the JSON payload.
See clause 6.1.2.4 for the binary payloads supported in the binary body part
of multipart messages.
#### 6.2.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
#### 6.2.2.4 HTTP multipart messages
HTTP multipart messages shall be supported, to transfer opaque SMS payload
(e.g. SMS message, CP Ack, etc.), in the following service operations (and
HTTP messages):
\- MoForwardSm service operation;
HTTP multipart messages shall include one JSON body part and one binary body
part comprising content of SMS payload content (see clause 6.1.6.5).
The JSON body part shall be the \"root\" body part of the multipart message.
It shall be encoded as the first body part of the multipart message. The
\"Start\" parameter does not need to be included.
The multipart message shall include a \"type\" parameter (see IETF RFC 2387
[18]) specifying the media type of the root body part, i.e.
\"application/json\".
NOTE: The \"root\" body part (or \"root\" object) is the first body part the
application processes when receiving a multipart/related message, see IETF RFC
2387 [18]. The default root is the first body within the multipart/related
message. The \"Start\" parameter indicates the root body part, e.g. when this
is not the first body part in the message.
A binary body part shall include a Content-ID header (see IETF RFC 2045 [19]),
and the JSON body part shall make a reference to the binary body part using
the Content-ID header field.
Examples of multipart/related messages can be found in Annex B.
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1 describes the resource URI structure of the Nnef_SMService
API.
Figure 6.2.3.1-1: Resource URI structure of the Nnef_SMService API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
+---------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +===============+================+================+================+ | MoSmInfo | {apiRoot} | sendsms | MO short | | | /nnef-smservic | | message | | | e/\/mo-sm-info/ | | | | | {supi}/sendsms | | | +---------------+----------------+----------------+----------------+
#### 6.2.3.2 Resource: MoSmInfo
##### 6.2.3.2.1 Description
This resource represents the collection of Mobile Originated Short Message
Information in NEF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.2.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nnef-smcontext/\ /sm-
contexts/{supi}/sendsms**
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
supi Supi Represents the Subscription Permanent Identifier (see 3GPP TS 23.501
[2] clause 5.9.2)\ pattern: See pattern of type Supi in 3GPP TS 29.571 [15]
* * *
##### 6.2.3.2.3 Resource Standard Methods
No HTTP method has been defined for the Mobile Originated Short Message
Information collection resource.
##### 6.2.3.2.4 Resource Custom Operations
##### 6.2.3.2.4.1 Overview {#overview-4 .H6}
Table 6.2.3.2.4.1-1: Custom operations
Operation name Custom operaration URI Mapped HTTP method Description
* * *
sendsms /sm-contexts/{supi}/sendsms POST Send MO SMS message or the related
Delivery Report.
##### 6.2.3.2.4.2 Operation: sendsms {#operation-sendsms .H6}
##### 6.2.3.2.4.2.1 Description {#description-7 .H6}
This custom operation is used for NF Service Consumers to send SMS message in
uplink direction.
##### 6.2.3.2.4.2.2 Operation Definition {#operation-definition-3 .H6}
This custom operation is used to send a SMS payload to an UE\'s Mobile
Originated Short Message Information resource in the NEF.
This operation shall support the request data structures specified in table
6.2.3.2.4.2.2-1 and the response data structure and response codes specified
in table 6.2.3.2.4.2.2-2.
Table 6.2.3.2.4.2.2-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
SmsData M 1 Representation of the MO SMS message to be sent.
Table 6.2.3.2.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | Sm | M | 1 | 200 OK | This case | | sDeliveryData | | | | represents | | | | | | the | | | | | | successful of | | | | | | sending SMS | | | | | | message in | | | | | | uplink | | | | | | direction, | | | | | | with | | | | | | necessary | | | | | | response data | | | | | | on the | | | | | | received | | | | | | delivery | | | | | | report. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NEF or | | | | | | NEF (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NEF or | | | | | | NEF (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | This case | | roblemDetails | | | Request | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SMS_PAYL | | | | | | OAD_MISSING, | | | | | | > if the | | | | | | > expected | | | | | | > SMS payload | | | | | | > content is | | | | | | > missing; | | | | | | > | | | | | | > \- | | | | | | > SMS_PA | | | | | | YLOAD_ERROR, | | | | | | > if error | | | | | | > exists in | | | | | | > the SMS | | | | | | > payload | | | | | | > content. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > UNKNOWN\ | | | | | | _SERVICE_CEN | | | | | | TRE_ADDRESS, | | | | | | > if the | | | | | | > SMS-SC was | | | | | | > unknown; | | | | | | > | | | | | | > \- | | | | | | > SE | | | | | | RVICE_CENTRE | | | | | | _CONGESTION, | | | | | | > if the | | | | | | > SMS-SC was | | | | | | > in | | | | | | > congestion; | | | | | | > | | | | | | > \- | | | | | | > U | | | | | | SER_NOT_SER | | | | | | VICE_CENTER, | | | | | | > if the user | | | | | | > didn\'t | | | | | | > belongs to | | | | | | > the SMS-SC; | | | | | | > | | | | | | > \- | | | | | | > | | | | | | FACILITY_NO | | | | | | T_SUPPORTED, | | | | | | > if the | | | | | | > facility | | | | | | > not | | | | | | > supported; | | | | | | > | | | | | | > \- | | | | | | > INVALID_ | | | | | | SME_ADDRESS, | | | | | | > if the SME | | | | | | > address is | | | | | | > invalid.. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 504 Gateway | This case | | roblemDetails | | | Timeout | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS message. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > UNREACHA | | | | | | BLE_SMS_SC, | | | | | | > if the | | | | | | > response is | | | | | | > timeout. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | \ | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.2.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NEF or | | | | | | NEF (service) | | | | | | set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.2.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined.
### 6.2.5 Notifications
In this release of this specification, no notification procedures are defined.
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the data types defined for the Nnef_SMService
service based interface protocol.
Table 6.2.6.1-1: Nnef_SMService specific Data Types
Data type Clause defined Description Applicability
* * *
N/A
Table 6.2.6.1-2 specifies data types re-used by the Nnef_SMContext service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the N~\~ service based interface.
Table 6.1.6.1-2: Nnef_SMService re-used Data Types
Data type Reference Comments Applicability
* * *
ProblemDetails 3GPP TS 29.571 [15] Common Data Type used in response bodies  
RedirectResponse 3GPP TS 29.571 [15] Redirect Response  
Supi 3GPP TS 29.571 [15] Subscription Permanent Identifier  
RefToBinaryData 3GPP TS 29.571 [15] Information for indicating the binary
content of SMS payload.  
SupportedFeatures 3GPP TS 29.571 [15] Supported Features  
SmsData 3GPP TS 29.577 [19] Information within request message invoking
MoForwardSm service operation, for delivering MO SMS.  
SmsDeliveryData 3GPP TS 29.577 [19] Information within response message
invoking MoForwardSm service operation, for delivering MO SMS Delivery Report.  
AppPortId 3GPP TS 29.503 [16] Application Port Id
#### 6.2.6.2 Structured data types
In this release of this specification, no structure to be used in resource
representations is defined.
#### 6.2.6.3 Simple data types and enumerations
##### 6.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.2.6.3.2 Simple data types
The simple data types defined in table 6.2.6.3.2-1 shall be supported.
Table 6.2.6.3.2-1: Simple data types
Type Name Type Definition Description Applicability
* * *
N/A
#### 6.2.6.4 Data types describing alternative data types or combinations of
data types
None.
#### 6.2.6.5 Binary data
##### 6.1.6.5.1 Binary Data Types
Table 6.2.6.5.1-1: Binary Data Types
Name Clause defined Content type
* * *
SMS Payload Information 6.2.6.5.2 vnd.3gpp.sms
##### 6.2.6.5.2 SMS Payload Information
SMS Payload Information shall encode a SMS payload as specified in 3GPP TS
23.040 [20] and 3GPP TS 24.011 [21], using the vnd.3gpp.sms content-type.
SMS Payload Information may encode e.g. the following content:
> \- CP-DATA, CP-ACK, CP-ERROR as specified in 3GPP TS 23.040 [20] and 3GPP TS
> 24.011 [21].
### 6.2.7 Error Handling
#### 6.2.7.1 General
For the Nnef_SMService API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nnef_SMService API.
#### 6.2.7.2 Protocol Errors
No specific procedures for the Nnef_SMService service are specified.
#### 6.2.7.3 Application Errors
The application errors defined for the Nnef_SMService service are listed in
Table 6.2.7.3-1.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
SMS_PAYLOAD_MISSING 400 Bad Request The expected SMS payload content is
missing. SMS_PAYLOAD_ERROR 400 Bad Request Errors exist in the format of SMS
payload. SERVICE_CENTRE_CONGESTION 403 Forbidden The delivery of the MO short
message failed because SMS-SC was in congestion. USER_NOT_SERVICE_CENTER 403
Forbidden The delivery of the short message failed because the user didn\'t
belongs to the SMS-SC. FACILITY_NOT_SUPPORTED 403 Forbidden The delivery of
the MO short message failed because of facility not supported.
INVALID_SME_ADDRESS 403 Forbidden The delivery of the MO short message failed
because the SME address is invalid. UNREACHABLE_SMS_SC 504 Gateway Timeout The
delivery of the MO short message failed because the response is timeout.
### 6.2.8 Feature negotiation
The optional features in table 6.2.8-1 are defined for the Nnef_SMService API.
They shall be negotiated using the extensibility mechanism defined in clause
6.6 of 3GPP TS 29.500 [4].
Table 6.2.8-1: Supported Features
Feature number Feature Name Description
* * *
N/A
### 6.2.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nnef_SMService API may be authorized by means of the OAuth2 protocol (see IETF
RFC 6749 [9]), based on local configuration, using the \"Client Credentials\"
authorization grant, where the NRF (see 3GPP TS 29.510 [10]) plays the role of
the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nnef_SMService API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nnef_SMService service.
The Nnef_SMService API defines a single scope \"nnef-smservice\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the Nnef_SMContext API. It
consists of OpenAPI 3.0.0 specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository, that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Nnef_SMContext API
openapi: 3.0.0
info:
title: Nnef_SMContext
version: 1.2.0-alpha.1
description: \|
Nnef SMContext Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.541 V18.0.0; 5G System; Session Management Services
for Non-IP Data Delivery (NIDD).
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.541/
servers:
\- url: \'{apiRoot}/nnef-smcontext/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nnef-smcontext
paths:
/sm-contexts:
post:
summary: Create SM Context
operationId: Create
tags:
\- SM Contexts Collection (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextCreateData\'
responses:
\'201\':
description: Success
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextCreatedData\'
headers:
Location:
description: >
\'Contains the URI of the newly created Individual SM Context resource,
according to the structure:
{apiRoot}/nnef-smcontext/\/sm-contexts/{smContextId}\'
required: true
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
StatusNotify:
\'{\$request.body#/notificationUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextStatusNotification\'
responses:
\'204\':
description: No Content, Notification was succesfull
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextId}/release:
post:
summary: Delete SM Context
operationId: Delete
tags:
\- Individual SM Context (Document)
parameters:
\- name: smContextId
in: path
description: SM Context Resource ID
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextReleaseData\'
responses:
\'200\':
description: OK. Resource representation is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextReleasedData\'
\'204\':
description: No Content.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextId}/update:
post:
summary: Update SM Context
operationId: Update
tags:
\- Individual SM Context (Document)
parameters:
\- name: smContextId
in: path
description: SM Context Resource ID
required: true
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextUpdateData\'
responses:
\'204\':
description: No Content.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextId}/deliver:
post:
summary: Deliver Uplink MO Data
operationId: Deliver
tags:
\- Individual SM Context (Document)
parameters:
\- name: smContextId
in: path
description: SM Context Resource ID
required: true
schema:
type: string
requestBody:
required: true
content:
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/DeliverReqData\'
binaryMoData:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryMoData:
contentType: application/octet-stream
headers:
Content-Id:
schema:
type: string
responses:
\'204\':
description: No Content.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nnef-smcontext: Access to the Nnef_SMContext API
schemas:
#
# Structured Data Types
#
SmContextCreateData:
description: Representation of the Individual SM context to be created.
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
nefId:
type: string
description: This IE shall contain the NEF ID of the target NEF.
dlNiddEndPoint:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notificationUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
niddInfo:
\$ref: \'#/components/schemas/NiddInformation\'
rdsSupport:
type: boolean
description: \|
When present, this IE shall indicate the UE capability to support RDS.
The value of this IE shall be set as following
\- true UE supports RDS
\- false (default) UE does not support RDS
smContextConfig:
\$ref: \'#/components/schemas/SmContextConfiguration\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- supi
\- pduSessionId
\- dnn
\- snssai
\- nefId
\- dlNiddEndPoint
\- notificationUri
SmContextCreatedData:
description: Representation of an Individual SM context successfully created.
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
nefId:
type: string
description: This IE shall contain the NEF ID of the target NEF.
rdsSupport:
type: boolean
default: false
description: \|
When present, this IE shall indicate the NEF capability to support RDS.
The value of this IE shall be set as following
\- true NEF supports RDS
\- false (default) NEF does not support RDS
extBufSupport:
type: boolean
default: false
description: \|
When present, this IE shall indicate whether Extended Buffering applies or
not.
The value of this IE shall be set as following
  * true Extended Buffering applies
\- false (default) Extended Buffering does not apply
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
maxPacketSize:
type: integer
required:
\- supi
\- pduSessionId
\- dnn
\- snssai
\- nefId
SmContextReleaseData:
description: Representation of the information to release the Individual SM
context.
type: object
properties:
cause:
\$ref: \'#/components/schemas/ReleaseCause\'
required:
\- cause
SmContextReleasedData:
description: Successful release of an Individual SM context with information
sent to the NF service consumer.
type: object
properties:
smallDataRateStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SmallDataRateStatus\'
apnRateStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApnRateStatus\'
SmContextStatusNotification:
description: Representation of the SM Context status notification.
type: object
properties:
status:
\$ref: \'#/components/schemas/SmContextStatus\'
smContextId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
cause:
\$ref: \'#/components/schemas/ReleaseCause\'
smallDataRateStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SmallDataRateStatus\'
apnRateStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApnRateStatus\'
required:
\- status
\- smContextId
NiddInformation:
description: Informaiton related to NIDD used for the SM Context.
type: object
properties:
extGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExternalGroupId\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
afId:
type: string
description: When present, this IE shall contain the AF Id used for the SM
Context.
SmContextConfiguration:
description: NIDD Configuration for the SM context.
type: object
properties:
smalDataRateControl:
\$ref: \'#/components/schemas/SmallDataRateControl\'
smallDataRateStatus:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SmallDataRateStatus\'
servPlmnDataRateCtl:
type: integer
minimum: 10
nullable: true
description: >
When present, this IE shall contain the maximum allowed number of
Downlink NAS Data PDUs per deci hour of the serving PLMN, as specified
in subclause 5.31.14.2 of 3GPP TS 23.501 [2].
Minimum 10
SmallDataRateControl:
description: Configuration of Small Data Rate Control for the SM Context.
type: object
properties:
timeUnit:
\$ref: \'#/components/schemas/SmallDataRateControlTimeUnit\'
maxPacketRateUl:
type: integer
maxPacketRateDl:
type: integer
maxAdditionalPacketRateUl:
type: integer
maxAdditionalPacketRateDl:
type: integer
required:
\- timeUnit
SmContextUpdateData:
description: Representation of the updates to apply to the Individual SM
context.
type: object
properties:
dlNiddEndPoint:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notificationUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
smContextConfig:
\$ref: \'#/components/schemas/SmContextConfiguration\'
DeliverReqData:
description: The data for Deliver service request, including the Mobile
Originated data to be delivered via NEF.
type: object
properties:
data:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
required:
\- data
#
# Simple Data Types
#
#
# Enumeration Data Types
#
SmContextStatus:
anyOf:
\- type: string
enum:
\- RELEASED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are
\- RELEASED: Indicates that the Individual SM Context for NIDD is released.
SmallDataRateControlTimeUnit:
anyOf:
\- type: string
enum:
\- MINUTE
\- HOUR
\- DAY
\- WEEK
\- 6MINUTES
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Possible values are
\- MINUTE: Indicates the rate control is applied per minute.
\- HOUR: Indicates the rate control is applied per hour.
\- DAY: Indicates the rate control is applied per day.
\- WEEK: Indicates the rate control is applied per week.
\- 6MINUTES: Indicates the rate control is applied per 6 minutes.
ReleaseCause:
anyOf:
\- type: string
enum:
\- PDU_SESSION_RELEASED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
The cause to release the SM Context. Possible values are
\- PDU_SESSION_RELEASED: Indicates that the Individual SM Context for NIDD is
released.
# A.3 Nnef_SMService API
openapi: 3.0.0
info:
title: Nnef_SMService
version: 1.1.0-alpha.1
description: \|
Nnef SMService Service.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.541 V18.0.0; 5G System; Session Management Services
for Non-IP Data Delivery (NIDD).
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.541/
servers:
\- url: \'{apiRoot}/nnef-smservice/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nnef-smservice
paths:
/sm-contexts/{supi}/sendsms:
post:
summary: Send SMS payload for a given UE
operationId: SendSMS
tags:
\- Send MO SMS message and the delivery report
parameters:
\- name: supi
in: path
required: true
description: Subscription Permanent Identifier (SUPI)
schema:
type: string
requestBody:
content:
multipart/related: # message with a binary body part
schema:
type: object
properties:
jsonData:
\$ref: \'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
required: true
responses:
\'200\':
description: sending delivery report
content:
multipart/related: # message with a binary body part
schema:
type: object
properties:
jsonData:
\$ref: \'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsDeliveryData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/504\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nnef-smcontext: Access to the Nnef_SMContext API
# schemas:
# COMPLEX TYPES:
# SIMPLE TYPES:
# ENUMS:
#