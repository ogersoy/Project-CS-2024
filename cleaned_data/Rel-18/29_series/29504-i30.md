# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and high level data model
for the Nudr Service Based Interface. It provides stage 3 protocol definitions
and message flows, and specifies the API for each service offered by the
Unified Data Repository (UDR). The data model and usage of the subscription
data is specified in 3GPP TS 29.505 [2], and the data model and usage of the
policy data, structured data for exposure and application data are specified
in 3GPP TS 29.519 [3].
The 5G System architecture is specified in 3GPP TS 23.501 [4]. The stage 2
definition and related procedures for Nudr SBI service are specified in 3GPP
TS 23.502 [5] and 3GPP TS 23.503 [6].
The Technical Realization of the Service Based Architecture is specified in
3GPP TS 29.500 [7] and the Principles and Guidelines for Services Definition
is specified in 3GPP TS 29.501 [8].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 29.505: \"5G System; Usage of the Unified Data Repository Services
for Subscription Data; Stage 3\".
[3] 3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository Service
for Policy Data, Structured Data for Exposure and Application Data; Stage 3\".
[4] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[5] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[6] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[7] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[8] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[9] IETF RFC 6901(April 2013): \"JavaScript Object Notation (JSON) Pointer\".
[10] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[11] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[12] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[13] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[14] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[15] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[16] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".
[17] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[18] IETF RFC 7396: \"JSON Merge Patch\".
[19] IETF RFC 6902: \"JavaScript Object Notation (JSON) Patch\".
[20] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[21] OpenAPI Initiative, \"OpenAPI Specification Version 3.0.0\",
[https://spec.openapis.org/oas/v3.0.0]{.underline}
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
GPSI Generic Public Subscription Identifier
NEF Network Exposure Function
PCF Policy Control Function
SUPI Subscription Permanent Identifier
UDM Unified Data Management
UDR Unified Data Repository
# 4 Overview
The Unified Data Repository (UDR) is the network entity in the 5G Core Network
(5GC) supporting the following functionalities:
\- Storage and retrieval of subscription data as specified in 3GPP TS 29.505
[2];
\- Storage and retrieval of policy data as specified in 3GPP TS 29.519 [3];
\- Storage and retrieval of structured data for exposure as specified in 3GPP
TS 29.519 [3];
\- Storage and retrieval of application data (including **Packet Flow
Descriptions (PFDs) for application detection** , application request
information for multiple UEs) as specified in 3GPP TS 29.519 [3];
\- Subscription to notification and the notification of subscribed data
changes.
\- Storage and retrieval of NF-Group Id mapping data.
Figures 4-1 shows the data storage architecture for the 5GC:
Figure 4-1: Data storage architecture
The Nudr interface is used by the network functions (i.e. UDM, PCF, NEF and
NRF) to access a particular set of the data stored in the UDR.
NOTE: Services offered by the UDR via the Nudr service based interface can
also be consumed by the HSS as specified in 3GPP TS 23.632 clause 5.2.4.
# 5 Services offered by the UDR
## 5.1 Introduction
The UDR offers the following services via the Nudr interface:
\- Nudr_DataRepository Service
NOTE: This service corresponds to the Nudr_DataManagement service in 3GPP TS
23.501 [4], 3GPP TS 23.502 [5] and 3GPP TS 23.503 [6].
\- Nudr_GroupIDmap Service
Table 5.1-1 summarizes the corresponding APIs defined for this specification.
Table 5.1-1: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName **Annex**
* * *
Nudr_DataRepository 6.1 Unified Data Repository Service TS29504_Nudr_DR.yaml
nudr-dr A.2 Nudr_GroupIDmap 6.2 Unified Data Repository Service for NF-Group
ID retrieval TS29504_Nudr_GroupIDmap.yaml nudr-group-id-map A.3
## 5.2 Nudr_DataRepository Service
### 5.2.1 Service Description
#### 5.2.1.1 Service and operation description
The UDR is acting as NF Service Producer. It provides Unified Data Repository
service to the NF service consumer. The known NF Service Consumers are the
UDM, PCF and NEF.
For the Nudr_DataRepository service, the following service operations are
defined:
\- Query
\- Create
\- Delete
\- Update
\- Subscribe
\- Unsubscribe
\- Notify
\- DataRestorationNotification
This service allows NF service consumers to retrieve, create, update, modify
and delete data stored in the UDR.
This service allows the NF service consumers to subscribe/unsubscribe the data
change notification and to be notified of the data change.
This service allows the NF service consumers to be notified upon the UDR
restoration.
#### 5.2.1.2 Service operation and data access authorization
UDR provides one Nudr_DataRepository service to all of the NF consumers, while
different types of data may have different data access authorizations, the UDR
shall be able to have the authorization management mechanism to guarantee the
safety of data access.
And the information in the Nudr_DataRepository service operation should be
able to identify the NF type of the consumer and the service operation type or
name, and to indicate the requested data information including the data set
and data subset, and the resource/data identifier. All HTTP methods for the
service operation shall include the information in the appropriate place of
the HTTP message.
If there is an illegal service operation or data access request initiated by a
NF consumer, the service failure response should be returned through the Nudr
interface with an explicit cause value.
NOTE: For allowed service operations or data access requests initiated by an
NF consumer it is not expected (unless explicitly specified otherwise) that
the UDR performs any consumer-specific application logic to check whether a
requested service operation should be rejected.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
This clause specifies the generic Nudr_DataRepository service operations
towards the different data sets as shown in Figure 4-1.
The HTTP request of the service operations contains a resource URI where the
{apiSpecificResourceUriPart} (see clause 4.4.2 in 3GPP TS 29.501 [8]) consists
of a top-level segment and sub-level segment(s), followed by query parameters
(optional or required).
If multiple query parameters are defined for a method on the resource, the
default logical relationship between the different query parameters shall be
the logical \"AND\", unless explicitly indicated on each specific resource and
operation on the Nudr_DataRepository API.
NOTE: Not all query parameters imply necessarily a logical relationship with
other parameters (e.g. \"supported-features\"); whether or not such logical
relationship exists, is determined by the semantics of the different query
parameters in each resource and operation.
For Create, Query, Update and Delete operations, the top-level segment
indicates one top level resource representing one of the data sets, which are
defined as \"/subscription-data\", \"/policy-data\", \"/exposure-data\" and
\"/application-data\" in Figure 6.1.3.1-1. And a certain child resource is
indicated by of the end URI of the sub-level segments, which are defined in
3GPP TS 29.505 [2] for use when the top-level segment is \"/subscription-
data\" and in 3GPP TS 29.519 [3] for use when the top-level segment is
\"/policy-data\", \"/exposure-data\" or \"/application-data\".
For Subscribe/Unsubscribe to data change notification operations, the resource
of the subscription to the notification should be as the child resource of
each of the data sets (i.e. \"/subscription-data\", \"/policy-data\",
\"/exposure-data\" and \"/application-data\"), which are indicated by the top-
level segment in the URI. And the resource representation of the subscription
to the notification should be indicated by the sub-level segment of each data
set.
The following procedures for each operation should be taken as the common
procedures and applicable to corresponding detail procedures with the same
service operation in 3GPP TS 29.505 [2] and 3GPP TS 29.519 [3].
#### 5.2.2.2 Query
##### 5.2.2.2.1 General
The Query service operation is used to retrieve the data stored in the UDR.
HTTP GET method shall be used for the service operation to request the certain
data record(s). One piece of data records should be a data set, a data subset,
a group of data in one data subset, or a specific data. If the data record(s)
are the attribute(s), query parameter or the combination of query parameters
should be used as the filters to control the content of result.
##### 5.2.2.2.2 Data retrieval
Figure 5.2.2.2.2-1 shows a scenario where the NF service consumer (e.g. UDM,
PCF or NEF) sends a request to the UDR to retrieve data.
Query parameters may be used for data retrieval:
i) Clause 5.2.2.2.3 specifies the query parameter used for retrieving subset
of a resource;
ii) Other query parameters are defined in 3GPP TS 29.505 [2] and 3GPP TS
29.519 [3].
Figure 5.2.2.2.2-1: Retrieving Data
1\. The NF service consumer shall send a GET request to the resource
representing the data. Query parameters may be used to restrict the response
to the requested data record(s) of the resource\'s representation. Query
parameters may also indicate the features that the NF service consumer
supports as described in clause 6.6.2 of 3GPP TS 29.500 [7].
2\. On success, the UDR shall respond with \"200 OK\" with the message body
containing the requested data record(s) restricted to the query parameters.
(and thus also to the indicated features supported by the NF service
consumer).
On failure, the UDR shall return an appropriated error code with the error
cause information.
The error codes of corresponding service operations in 3GPP TS 29.505 [2] and
3GPP TS 29.519 [3] shall align and comply with the failure response mechanism
which is defined in 3GPP TS 29.500 [7].
##### 5.2.2.2.3 Retrieval of subset of a resource
When a resource has multiple attributes, it is allowed for the NFs to retrieve
a subset of the attributes. When the attribute is of type map, it is allowed
for the NFs to retrieve individual member(s) of that map. For retrieval of
subset of a resource, a new query parameter \"fields\" is defined to carry the
identities of the attributes to be retrieved. The definition of \"fields\"
query parameter is:
1) \"fields\" query parameter is of type array; and
2) each element of the array is of type string encoded as a JSON pointer as
defined IETF RFC 6901 [9].
NOTE: identifying an individual element in the array is supported by JSON
pointer, however it is not recommended to use this feature if the client is
not exactly aware of the order of the members in the array.
If retrieval of subset of a particular resource is supported, then all the
attributes of the corresponding data type of that resource shall be optional
or conditional.
EXAMPLE 1:
Given the following representation of ExResource:
{
\"lv1Attr1\": \"value1\"
\"lv1Attr2\": \"value2\"
\"lv1Attr3\": {
\"lv2Attr1\": \"value3\"
\"lv2Attr2\": \"value4\"
}
}
To retrieve \"lv1Attr1\" and \"lv2Attr2\", the NF sends the following request:
GET /ExResource?fields=/lv1Attr1, /lv1Attr3/lv2Attr2
Upon success, the UDR then returns the following representation:
{
\"lv1Attr1\": \"value1\"
\"lv1Attr3\": {
\"lv2Attr2\": \"value4\"
}
}
EXAMPLE 2:
Given the following representation of ExResource:
{
\"Attr1\": \"value1\"
\"Attr2\": \"value2\"
\"AttrMap\": {
\"Key1\": {ExObject1}
\"Key2\": {ExObject2}
}
}
To retrieve \"Attr1\" and the second member of \"AttrMap \", the NF sends the
following request:
GET /ExResource?fields=/Attr1, /AttrMap/Key2
Upon success, the UDR then returns the following representation:
{
\"Attr1\": \"value1\"
\"AttrMap\": {
\"Key2\": {ExObject2}
}
}
#### 5.2.2.3 Create
##### 5.2.2.3.1 General
The Create service operation is used by the NF service consumer (e.g. NEF) to
create the data into the UDR.
The following procedures using the Create service operation are supported:
\- Data creation using PUT
\- Data creation using POST
##### 5.2.2.3.2 Data Creation using PUT
Figure 5.2.2.3.2-1 shows a scenario where the NF service consumer (e.g. NEF)
sends a request to the UDR to create data. The parent resource of the resource
identified by the resource URI shall be of archetype Store (see clause C.3 in
3GPP TS 29.501 [8]).
Figure 5.2.2.3.2-1: Creating Data using PUT
1\. The NF service consumer shall send a PUT request to the resource
representing the data. The payload body of the PUT request shall contain the
representation of the new data.
2\. On success, the UDR shall respond with \"201 Created\" with the payload
containing the representation of the created data, and the \"Location\" header
shall be present and contains the URI of the created data.
On failure, the UDR shall return an appropriated error code with the error
cause information.
##### 5.2.2.3.3 Data Creation using POST
Figure 5.2.2.3.3-1 shows a scenario where the NF service consumer (e.g. NEF)
sends a request to the UDR to create data. The resource identified by the
resource URI shall be of archetype Collection (see clause C.2 in 3GPP TS
29.501 [8]).
Figure 5.2.2.3.3-1: Creating Data using POST
1\. The NF service consumer shall send a POST request to create the new data
record as the child resource of the parent resource in the UDR. The payload
body of the POST request shall contain the representation of the new data.
2\. The UDR generates the data identifier and constructs the URI for the
created data record by appending the data identifier to the parent resource
URI received as request URI of the POST request.
On success, the UDR shall respond with \"201 Created\" with the payload
containing the representation of the created data, and the \"Location\" header
shall be present and contains the URI of the created data.
On failure, the UDR shall return an appropriated error code with the error
cause information.
#### 5.2.2.4 Delete
##### 5.2.2.4.1 General
The Delete service operation is used by the NF service consumer (e.g. NEF) to
remove the data from the UDR.
The following procedures using the Delete service operation are supported:
\- Data Deletion
HTTP DELETE method shall be used.
##### 5.2.2.4.2 Deleting Data
Figure 5.2.2.4.2-1 shows a scenario where the NF service consumer (e.g. NEF)
sends a request to the UDR to delete a data record.
Figure 5.2.2.4.2-1: Deleting Data
1\. The NF service consumer shall send a DELETE request to the resource
representing the data. The payload body of the request shall be empty.
2\. On success, the UDR shall respond with \"204 No Content\", the payload
body of the DELETE response shall be empty.
On failure, the UDR shall return an appropriated error code with the error
cause information.
#### 5.2.2.5 Update
##### 5.2.2.5.1 General
The Update service operation is used by the NF service consumer (e.g. UDM, PCF
or NEF) to update the data stored in the UDR.
The following procedures using the Update service operation are supported:
\- Data Update using PATCH
\- Data Update using PUT
HTTP PATCH method shall be used to add/create, delete or modify part of the
value(s) in the data record (e.g. a specific data or a group of data in one
data subset). HTTP PUT method shall be used to replace a complete data record.
##### 5.2.2.5.2 Data Update using PATCH
Figure 5.2.2.5.2-1 shows a scenario where the NF service consumer (e.g. UDM,
PCF or NEF) sends a request to the UDR to update some parts of the data
record.
Figure 5.2.2.5.2-1: Data Updating using PATCH
1\. The NF service consumer shall send a PATCH request to the resource
representing the data record. The payload body contains the modification
instruction towards the data record.
2\. On success, the UDR shall respond with \"204 No Content\".
On failure, the UDR shall return an appropriated error code with the error
cause information.
##### 5.2.2.5.3 Data Update using PUT
Figure 5.2.2.5.3-1 shows a scenario where the NF service consumer (e.g. UDM,
PCF or NEF) sends a request to the UDR to update the whole data record.
Figure 5.2.2.5.3-1: Data Updating using PUT
1\. The NF service consumer shall send a PUT request to the resource
representing the data record. The payload body contains the new data for the
resource.
2\. On success, the UDR shall respond with \"204 No Content\" or \"200 OK\".
On failure, the UDR shall return an appropriated error code with the error
cause information.
#### 5.2.2.6 Subscribe
##### 5.2.2.6.1 General
The Subscribe service operation is used for the NF service consumer to
explicitly subscribe to the data change notification from the UDR.
Permanent Subscription Data i.e. sub-resources of the ProvisionedData resource
(see 3GPP TS 29.505 [2]) can be modified only by means of provisioning at the
UDR and may be (as a deployment option) implicitly subscribed by the UDM as
described in 3GPP TS 29.501 [8] clause 4.6.2.2.1. If so and when a data
modification of permanent subscription data occurs by means of provisioning
and there is the need to notify at least one serving node (e.g. AMF, SMF,
SMSF), the UDR shall select one of the suitable and available UDMs (as
discovered via the NRF) and send a notification using the callback URI
provided by the NRF during UDM discovery.
##### 5.2.2.6.2 NF service consumer subscribes to notifications to UDR
Figure 5.2.2.6.2-1 shows a scenario where the NF service consumer (e.g. UDM,
PCF or NEF) sends a request to the UDR to subscribe to data change
notifications.
Figure 5.2.2.6.2-1: subscribing to data change notifications
1\. The NF service consumer sends a POST request to the parent resource
(...\/subs-to-notif). The NF service consumer describes the
notifications it wants to receive, and it also indicates the features it
supports (see clause 6.6.2 of 3GPP TS 29.500 [7]). The request may contain an
expiry time, suggested by the NF Service Consumer as a hint, representing the
time upto which the subscription is desired to be kept active.
2\. On success, the UDR responds with \"201 Created\" with the message body
containing a representation of the created subscription and indicating the
supported features (see clause 6.6.2 of 3GPP TS 29.500 [7]). The Location HTTP
header shall contain the URI of the created subscription. In subsequent
notifications according to clause 5.2.2.8.2, the UDR only uses the indicated
supported features.
The response based on operator policies and taking into account the expiry
time included in the request, may contain an expiry time (i.e a future
timestamp), as determined by the UDR, after which the subscription becomes
invalid. If an expiry time was included in the request, then the expiry time
returned in the response should be less than or equal to that value. Once the
subscription expires, if the NF Service Consumer wants to keep receiving
notifications, it shall create a new subscription in the UDR. The UDR shall
not provide the same expiry time (i.e a future timestamp) for many
subscriptions in order to avoid all of them expiring and recreating the
subscription at the same time. If the expiry time is not included in the
response, the NF Service Consumer shall consider the subscription to be valid
without an expiry time.
On failure, the UDR returns an appropriated error code with the error cause
information.
Once the subscription has been created, an NF Service Consumer may request the
update of the subscription in UDR (e.g., to request an extension of the
subscription lifetime before the subscription expires) by issuing a PUT or
PATCH request, as described in 3GPP TS 29.501 [8], clause 4.6.2.2.3.
##### 5.2.2.6.3 Stateless UDM subscribes to notifications to UDR
Figure 5.2.2.6.3-1 shows a scenario where the stateless UDM subscribes to
notification to the UDR.
Figure 5.2.2.6.3-1: subscribing to data change notifications via stateless UDM
1\. The stateless UDM sends a POST request to the UDR to subscribe to the
notifications.
The SubData in the POST request body shall indicate the same data for which a
change will trigger a notification.
The SubData in the POST request body shall contain a callbackReference URI to
which the notifications will be sent to. The host part of the
callbackReference URI shall be set to the FQDN of the UDM set to which the
stateless UDM belongs.
The SubData in the POST request body shall contain an original
callbackReference URI of the NF which initially triggers the subscription.
The request may contain an expiry time, suggested by the NF Service Consumer
as a hint, representing the time upto which the subscription is desired to be
kept active.
2\. On success, the UDR responds with \"201 Created\" with the message body
containing a representation of the created subscription. The Location HTTP
header shall contain the URI of the created subscription and that URI shall
contain the subscription ID allocated by the UDR.
The response based on operator policies and taking into account the expiry
time included in the request, may contain an expiry time (i.e a future
timestamp), as determined by the UDR, after which the subscription becomes
invalid. If an expiry time was included in the request, then the expiry time
returned in the response should be less than or equal to that value. Once the
subscription expires, if the NF Service Consumer wants to keep receiving
notifications, it shall create a new subscription in the UDR. The UDR shall
not provide the same expiry time (i.e a future timestamp) for many
subscriptions in order to avoid all of them expiring and recreating the
subscription at the same time. If the expiry time is not included in the
response, the NF Service Consumer shall consider the subscription to be valid
without an expiry time.
On failure, the UDR returns an appropriated error code with the error cause
information.
Once the subscription has been created, the stateless UDM may request the
update of the subscription in UDR (e.g., to request an extension of the
subscription lifetime before the subscription expires) by issuing a PUT or
PATCH request, as described in 3GPP TS 29.501 [8], clause 4.6.2.2.3.
#### 5.2.2.7 Unsubscribe
##### 5.2.2.7.1 General
The Unsubscribe service operation is used for the NF service consumer to
unsubscribe to the data change notification from the UDR.
##### 5.2.2.7.2 Unsubscribe service operation
Figure 5.2.2.7.2-1 shows a scenario where the NF service consumer (e.g. UDM,
PCF or NEF) sends a request to the UDR to unsubscribe to data change
notifications.
Figure 5.2.2.7.2-1: Unsubscribing to the data change notifications
1\. The NF service consumer sends a DELETE request to the resource identified
by the URI previously received during subscription creation, i.e. in the
Location header field of the HTTP 201 Created response.
2\. On success, the UDR responds with \"204 No Content\".
On failure, the UDR returns an appropriated error code with the error cause
information.
#### 5.2.2.8 Notify
##### 5.2.2.8.1 General
The Notify service operation is used for the UDR to notify the data change
notification to the previous subscribe operation requestor.
##### 5.2.2.8.2 Notification to NF service consumer on data change
Figure 5.2.2.8.2-1 shows a scenario where the UDR notifies the NF service
consumer about the subscribed data change. The request contains the
CallbackReference URI as previously received in the subscribe operation (see
clause 5.2.2.6).
Figure 5.2.2.8.2-1: Data Change Notification
1\. The UDR sends a POST request to the callbackReference URI as provided by
the NF service consumer in the subscribe operation.
2\. On success, the NF service consumer responds with \"204 No Content\".\ \
On failure, the NF service consumer responds an appropriated error code with
the error cause information.
##### 5.2.2.8.3 Notification to stateless UDM on data change
Figure 5.2.2.8.3-1 shows a scenario where the UDR notifies the NF service
consumer about the subscribed data change.
Figure 5.2.2.8.3-1: Data Change Notification to stateless UDM
1\. The UDR sends a POST request to the callbackReference URI as provided by
the stateless UDM in the subscribe operation.
The notification in the POST request body shall contain the original
callbackReference URI which is received in step 1 of Figure 5.2.2.6.3-1.
When the notification in the POST request body includes one or more arrays,
the UDR shall use the complete replacement representation of the arrays, see
3GPP TS29.501 [4], Annex E.
When the notification in the POST request body includes one or more arrays
where all the array elements have been removed, the UDR shall include the
original array representation, i.e. in the origValue attribute of the
ChangeItem.
2\. On success, the stateless UDM responds with \"204 No Content\".
On failure, the stateless UDM responds an appropriated error code with the
error cause information.
#### 5.2.2.9 DataRestorationNotification
##### 5.2.2.9.1 General
The DataRestorationNotification service operation is used for the UDR to send
notfications on UDR restoration event to one or a set of NFs which are subject
to the data restoration procedure.
##### 5.2.2.9.2 Notification on Data Restoration
The notification on data restoration may be based on implicit subscription to
data restoration event. When the NF service consumer (e.g. UDM) access UDR
(i.e. to access the data stored in the UDR) for the first time, the UDR shall
identify the identity of the NF service consumer via the NF instance ID
contained in the 3gpp-Sbi-NF-Peer-Info header field of the request, then the
UDR may create a default subscription on data restoration for that NF service
consumer accordingly.
Figure 5.2.2.9.2-1 shows a scenario where the UDR notifies the NF service
consumer about the need to restore data due to a potential data-loss event
occurred at the UDR. The dataRestorationCallbackUri contained in the request
is the default callback URI as discovered from NRF.
Figure 5.2.2.9.2-1: Data Restoration Notification
1\. The UDR sends a POST request to the dataRestorationCallbackUri as
discovered from NRF.
2\. On success, the NF service consumer responds with \"204 No Content\".\ \
On failure, the NF service consumer responds an appropriated error code with
the error cause information.
## 5.3 Nudr_GroupIDmap Service
### 5.3.1 Service Description
#### 5.3.1.1 Service and operation description
The Nudr_GroupIDmap service may be used by NF service consumers (e.g. NRF or
SCP) to retrieve the NF-GroupId for a given NF type and subscriber identifier;
see G3GPP TS 23.501 [4] and 3GPP TS 23.502 [5].
For the Nudr_GroupIDmap service, the following service operations are defined:
\- Query
This service allows NF service consumers to retrieve, NfGroupId data stored in
the UDR.
### 5.3.2 Service Operations
#### 5.2.2.1 Introduction
The service operations defined for the Nudr_GroupIDmap service are as follows:
\- Query: It allows an NF consumer (e.g. NRF) to retrieve the NF group ID for
a given NF type and subscriber.
#### 5.3.2.2 Query
##### 5.3.2.2.1 General
The following procedure using the Query service operation is supported:
\- NF-Group ID Retrieval
##### 5.3.2.2.2 NF-Group ID retrieval
Figure 5.3.2.2.2-1 shows a scenario where the NF service consumer (e.g. NRF)
sends a request to the UDR to retrieve the UDM-group ID.
Figure 5.3.2.2.2-1: Retrieving NF-Group Id
1\. The NF service consumer shall send a GET request to the resource
representing the data. Query parameters shall be used to identify the NF type
(e.g. UDM) of the requested NF-Group ID (e.g. UDM-Group ID) and the
subscriber-id.
2\. On success, the UDR shall respond with \"200 OK\" with the message body
containing the requested data
On failure, the UDR shall return an appropriated error code with the error
cause information.
# 6 API Definitions
## 6.1 Nudr_DataRepository Service API
### 6.1.1 API URI
The Nudr-dr shall use the Nudr-dr API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [8], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [8].
\- The \ shall be \"nudr-dr\".
\- The \ shall be \"v2\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
Nudr service shall comply with the usage of HTTP/2.0 protocol over Service
Based Interfaces. (See Clause 5, 3GPP TS 29.500[7]).
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
The usage of HTTP standard headers shall be supported on Nudr interface as
defined in clause 5.2.2 of 3GPP TS 29.500 [7].
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [11], shall be used as content type of
the HTTP bodies specified in the present specification as indicated in clause
5.4 of 3GPP TS 29.500 [7].
\- The Problem Details JSON Object (IETF RFC 7807 [17]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
\- JSON Merge Patch (IETF RFC 7396 [18]. The use of the JSON Merge Patch
format in a HTTP request body shall be signalled by the content type
\"application/merge-patch+json\".
\- JSON Patch (IETF RFC 6902 [19]). The use of the JSON Patch format in a HTTP
request body shall be signalled by the content type \"application/json-
patch+json\".
##### 6.1.2.2.3 Cache-Control
As described in IETF RFC 7234 [16] clause 5.2, a \"Cache-Control\" header
should be included in HTTP responses carrying a representation of cacheable
resources (e.g. SessionManagementSubscriptionData). If it is included, it
shall contain a \"max-age\" value, indicating the amount of time in seconds
after which the received response is considered stale.
The \"max-age\" value shall be configurable by operator policy.
##### 6.1.2.2.4 ETag
As described in IETF RFC 7232 [15] clause 2.3, an \"ETag\" (entity-tag) header
should be included in HTTP responses carrying a representation of cacheable
resources (e.g. AccessAndMobilitySubscriptionData) or modifyable resources
(e.g. Amf3GppAccessRegistration) to allow an NF Service Consumer performing a
conditional GET request with \"If-None-Match\" header or a conditional POST /
PUT / PATCH / DELETE request with \"If-Match\" header. If it is included, it
shall contain a server-generated strong validator, that allows further
matching of this value (included in subsequent client requests) with a given
resource representation stored in the server or in a cache.
##### 6.1.2.2.5 If-None-Match
As described in IETF RFC 7232 [15] clause 3.2, an NF Service Consumer may
issue conditional GET request towards UDR by including an \"If-None-Match\"
header in HTTP requests containing one or several entity tags received in
previous responses for the same resource.
##### 6.1.2.2.5a If-Match
As described in IETF RFC 7232 [15] clause 3.1, an NF Service Consumer may
issue conditional POST / PUT / PATCH / DELETE request towards UDR by including
an \"If-Match\" header in HTTP requests containing an entity tag received in
previous responses for the same resource.
##### 6.1.2.2.6 Last-Modified
As described in IETF RFC 7232 [15] clause 2.2, a \"Last-Modified\" header
should be included in HTTP responses carrying a representation of cacheable
resources (e.g. SmfSelectionSubscriptionData) to allow an NF Service Consumer
performing a conditional request with \"If-Modified-Since\" header.
##### 6.1.2.2.7 If-Modified-Since
As described in IETF RFC 7232 [15] clause 3.3, an NF Service Consumer may
issue conditional GET request towards UDR, by including an \"If-Modified-
Since\" header in HTTP requests.
##### 6.1.2.2.8 When to Use Entity-Tags and Last-Modified Dates
Both \"ETag\" and \"Last-Modified\" headers should be sent in the same HTTP
response as stated in IETF RFC 7232 [15] clause 2.4.
NOTE: \"ETag\" is a stronger validator than \"Last-Modified\" and is
preferred.
If the UDR included an \"ETag\" header with the resource then a conditional
GET request for this resource shall be performed with the \"If-None-Match\"
header, and a POST / PUT / PATCH / DELETE request for this resource shall be
performed with the \"If-Match\" header.
#### 6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
The custom HTTP headers applicable to Nudr service are specified in the
following clauses.
##### 6.1.2.3.2 3gpp-Sbi-Message-Priority
Nudr interface shall support 3gpp-Sbi-Message-Priority custom header. The
header contains the HTTP/2 message priority value. See details in Clause
5.2.3.2.2 of 3GPP TS 29.500 [7].
##### 6.1.2.3.3 3gpp-Sbi-Notification-Correlation
The 3gpp-Sbi-Notification-Correlation header field is used by a NF in a UDR
resource create/update/delete request to indicate the subscription context(s)
whose notification needs to be disabled when triggered as consequence of a
request including this header. Subsequent create/update/delete requests that
do not include the 3gpp-Sbi-Notification-Correlation header trigger the
corresponding notifications as per currently defined procedures.
This header contains subscription identifier(s), as provided by the UDR during
the subscribe operation.
The encoding of the header follows the ABNF as defined in IETF RFC 7230 [12].
Sbi-Notification-Correlation-Header = \"3gpp-Sbi-Notification-Correlation:\"
OWS subscriptionId *(OWS \",\" OWS subscriptionId ) OWS
subscriptionId = token
See clause 3.2.6 of IETF RFC 7230 [12] for the \"token\" definition.
EXAMPLE: 3gpp-Sbi-Notification-Correlation: subsid123, subsid345.
##### 6.1.2.3.4 3gpp-Sbi-Etags
The 3gpp-Sbi-Etags header field is used by the UDR in 200 OK responses to GET
requests for multiple data set retrieval, allowing to convey one Etag per
retrieved data set.
The encoding of the header follows the ABNF as defined in IETF RFC 7230 [12].
Sbi-Etags-Header = \"3gpp-Sbi-Etags:\" OWS datasetEtag *(OWS \",\" OWS
datasetEtag) OWS
datasetEtag = dataSetName \"=\" entity-tag
dataSetName = UeSubscribedDataSetName
UeSubscribedDataSetName = 1*( ALPHA / DIGIT / \"_\" )
See clause 5.4.3.11 of 3GPP TS 29.505 [2] for the \"UeSubscribedDataSetName\"
definition.
See IETF RFC 7232 [15] section 2.3 for the \"entity-tag\" definition.
EXAMPLE: 3gpp-Sbi-Etags: AM=\"xxx\", SM=\"yyy\"
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1: Resource URI structure of the Nudr_DataRepository API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
SubscriptionData /subscription-data none For sub-level resource names,
resource URIs and HTTP methods see 3GPP TS 29.505 [2] PolicyData /policy-data
none For sub-level resource names, resource URIs and HTTP methods see 3GPP TS
29.519 [3] StructuredDataForExposure /exposure-data none For sub-level
resource names, resource URIs and HTTP methods see 3GPP TS 29.519 [3]
ApplicationData /application-data none For sub-level resource names, resource
URIs and HTTP methods see 3GPP TS 29.519 [3] DataRestorationEvents /data-
restoration-events POST This is a pseudo operation.
#### 6.1.3.2 SubscriptionData
See 3GPP TS 29.505 [2].
#### 6.1.3.3 PolicyData
See 3GPP TS 29.519 [3].
#### 6.1.3.4 StructuredDataForExposure
See 3GPP TS 29.519 [3].
#### 6.1.3.5 ApplicationData
See 3GPP TS 29.519 [3].
#### 6.1.3.6 Resource: DataRestorationEvents
##### 6.1.3.6.1 Description
##### 6.1.3.6.2 Resource Definition
Resource URI: **{apiRoot}/nudr-dr/\ /data-restoration-events**
This resource shall support the resource URI variables defined in table
6.1.3.6.2-1.
Table 6.1.3.6.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1 apiVersion string See clause 6.1.1
##### 6.1.3.6.3 Resource Standard Methods
##### 6.1.3.6.3.1 POST {#post .H6}
This method will not be actually invoked.
This method shall support the URI query parameters specified in table
6.1.3.6.3.1-1.
Table 6.1.3.6.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.6.3.1-2 and the response data structures and response codes specified in
table 6.1.3.6.3.1-3.
Table 6.1.3.6.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description Any
* * *
Table 6.1.3.6.3.1-3: Data structures supported by the POST Response Body on
this resource
+-----------+---+-------------+----------+-------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +-----------+---+-------------+----------+-------------+ | n/a | | | | | +-----------+---+-------------+----------+-------------+
### 6.1.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined for the Nudr_DataRepository Service.
### 6.1.5 Notifications
#### 6.1.5.1 General
This clause specifies the general mechanism of notifications in the following
scenarios:
\- notification of changed data which are stored in the UDR;
\- notification of data restoration.
The mechanism shall be applicable to the data specified in 3GPP TS 29.505[2]
and 3GPP TS 29.519[3].
#### 6.1.5.2 Data Change Notification
The POST method shall be used for Data Change Notifications and the URI shall
be as provided during the subscription procedure.
Resource URI: {callbackReference}
Support of POST request data structures should contain the object of changed
data and conditionally the URI of original Callback reference, which is
received from the original subscribed NF.
#### 6.1.5.3 Data Restoration Notification
The POST method shall be used to inform the NF Service Consumer about a
potential data-loss event occurred at the UDR, and the callback URI shall be
dynamically discovered by UDR by querying NRF for a default notification URI.
Resource URI: {dataRestorationCallbackUri}
Support of URI query parameters is specified in table 6.1.5.3-1.
Table 6.1.5.3-1: URI query parameters supported by the POST method
* * *
Name Data type P Cardinality Description n/a
* * *
Support of request data structures is specified in table 6.1.5.3-2 and of
response data structures and response codes is specified in table 6.1.5.3-3.
Table 6.1.5.3-2: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description DataRestorationNotification M 1 Contains
identifiers representing those UEs potentially affected by a data-loss event
at the UDR.
* * *
Table 6.1.5.3-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NF or NF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NF or NF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [7] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.3-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the
Callback URI of the target NF Service Consumer (e.g. UDM) to which the request
is redirected 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected
* * *
Table 6.1.5.3-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the
Callback URI of the target NF Service Consumer (e.g. AMF) to which the request
is redirected 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected
* * *
### 6.1.5a Data Model
#### 6.1.5a.1 General
This clause specifies the application data model supported by the API.
Table 6.1.5a.1-1 specifies the data types defined for the Nudr_DataRepository
API.
Table 6.1.5a.1-1: Nudr_DataRepository specific Data Types
Data type Clause defined Description
* * *
DataRestorationNotification 6.2.5a.2.2 Contains identities representing those
UEs potentially affected by a data-loss event at the UDR
Table 6.1.5a.1-2 specifies data types re-used by the Nudr_DataRepository
service-based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Nudr_DataRepository service-based
interface.
Table 6.1.5a.1-2: Nudr_DataRepository re-used Data Types
Data type Reference Comments
* * *
Dnn 3GPP TS 29.571 [10] Data Network Name with Network Identifier only. Snssai
3GPP TS 29.571 [10] Single NSSAI NfGroupId 3GPP TS 29.571 [10] NF Group ID
IdentityRange 3GPP TS 29.510 [14] Identity Range SupiRange 3GPP TS 29.510 [14]
SUPI Range
#### 6.1.5a.2 Structured data types
##### 6.1.5a.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.5a.2.2 Type: DataRestorationNotification
Table 6.2.5a.2.2-1: Definition of type DataRestorationNotification
Attribute name Data type P Cardinality Description
* * *
supiRanges array(SupiRange) O 1..N If present, it contains the list of SUPIs
potentially subject to a data-loss event at the UDR. gpsiRanges
array(IdentityRange) O 1..N If present, it contains the list of GPSIs
potentially subject to a data-loss event at the UDR. resetIds array(string) O
1..N If present, it contains the list of Reset-IDs of those UEs potentially
subject to a data-loss event at the UDR. sNssaiList array(Snssai) O 1..N If
present, it contains the list of slices (S-NSSAIs) potentially subject to a
data-loss event at the UDR. dnnList array(Dnn) O 1..N If present, it contains
the list of DNNs potentially subject to a data-loss event at the UDR.
lastReplicationTime DateTime O 0..1 If present, it contains the timestamp of
the most recent instant when the data was assumed to be consistent at UDR
(i.e. the potential data loss event at UDR did not occur before this instant).
recoveryTime DateTime O 0..1 If present, it contains the timestamp of the
instant when the potential data loss event was recovered at UDR (i.e. all data
records stored by UDR after this time are assumed to be consistent).
udrGroupId NfGroupId O 0..1 If present, it contains the ID of the UDR Group
whose UEs have been potentially subject to a data loss event at the UDR.
### 6.1.6 Error Handling
Table 6.1.6-1 lists common response body data structures used within the nudr-
dr (Nudr_DataRepository) API
Table 6.1.6-1: Common Response Body Data Structures
+--------------+-------+--------------+--------------+--------------+ | **Data |** P**|** C | **Response** | **D | | type** | | ardinality**| | escription** | | | | | **codes** | | +==============+=======+==============+==============+==============+ | Pr | O | 0..1 | 4xx, 5xx | For error | | oblemDetails | | | responses | status | | | | | | codes, the | | | | | | UDR may | | | | | | provide | | | | | | detailed | | | | | | information. | +--------------+-------+--------------+--------------+--------------+ | NOTE: In | | | | | | addition | | | | | | common data | | | | | | structures | | | | | | as defined | | | | | | in | | | | | | 3GPP TS | | | | | | 29.500 [7] | | | | | | are | | | | | | supported. | | | | | +--------------+-------+--------------+--------------+--------------+
The \"ProblemDetails\" data structure may contain a \"cause\" attribute to
indicate the application error, see 3GPP TS 29.571 [10]. The values for
\"cause\" attribute are defined in table 6.1.6-2.
Table 6.1.6-2: Application Errors
Application Error HTTP status code Description
* * *
NF_TYPE_NOT_ALLOWED 403 Forbidden The target data set is not permitted to
access for the NF type of the NF consumer. UNSUPPORTED_MONITORED_URI 501 Not
Implemented The subscribe service operation is not able to be implemented due
to invalid resource URI to be monitored). USER_NOT_FOUND 404 Not Found The
user indicated in the HTTP/2 request does not exist in the UDR. DATA_NOT_FOUND
404 Not Found The data indicated in the HTTP/2 request is unavailable in the
UDR. INCORRECT_CONDITIONAL_GET_REQUEST 412 Precondition Failed One or more
conditions given in the request header fields evaluated to false when tested
in the UDR. UNPROCESSABLE_REQUEST 422 Unprocessable Entity The request cannot
be procesed due to semantic errors when trying to process a patch method.
DATABASE INCONSISTENCY 500 Internal Server Error Requested data cannot be
returned due to database inconsistency RESOURCE_TEMP_MOVED 307 Temporary
Redirect The resource is unavailable in the current target URI but can be
temporarily found in an alternative URI. RESOURCE_MOVED 308 Permanent Redirect
The resource is unavailable in the current target URI but can be permanently
found in an alternative URI. GROUP_IDENTIFIER_NOT_FOUND 404 Not Found The
group identifier does not exist. MODIFICATION_NOT_ALLOWED 403 Forbidden
Modification of the target resource representation is not permitted.
PLMN_NOT_FOUND 404 Not Found The \'servingPlmnId\' indicated in the HTTP/2
query is unavailable in the UDR. This status code is also used when
\'servingPlmnId\' path variable contains SNPN ID, see Table 5.2.3.2-1 in 3GPP
TS 29.505 [2]. INTERNAL_GROUP_ID_NOT_UNIQUE 403 Forbidden The internal group
ID allocated by the UDM for a newly created 5G VN Group already exists in the
UDR. NOTE: The error codes shall apply to both 3GPP TS 29.505 [2] and 3GPP TS
29.519 [3]. In addition error codes shall comply with the definition in clause
5.2.7.2 of 3GPP TS 29.500 [7].
### 6.1.7 Security
As indicated in 3GPP TS 33.501 [12], the access to the Nudr_DataRepository API
may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [13]),
using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP
TS 29.510 [14]) plays the role of the authorization server.
If Oauth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nudr_DataRepository API, shall obtain a \"token\" from
the authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [14], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nudr_DataRepository service.
The Nudr_DataRepository API defines the following scopes for OAuth2
authorization:
Table 6.1.7-1: Oauth2 scopes defined in Nudr_DataRepository API
Scope Description
* * *
\"nudr-dr\" Access to the Nudr DataRepository API \"nudr-dr:subscription-
data\" Access to the SubscriptionData data set. \"nudr-dr:subscription-
data:authentication-subscription:read\" Access to read the
AuthenticationSubscription resource of the SubscriptionData data set. \"nudr-
dr:subscription-data:authentication-subscription:modify\" Access to update the
AuthenticationSubscription resource of the SubscriptionData data set. \"nudr-
dr:subscription-data:registrations:write\" Write access to NF registration
resources of the SubscriptionData data set. \"nudr-dr:policy-data\" Access to
the PolicyData data set. \"nudr-dr:policy-data:ues:read\" Access to read the
UEs resource. \"nudr-dr:policy-data:ues:am-data:read\" Access to read the UEs
Access and Mobility Policy data. \"nudr-dr:policy-data:ues:ue-policy-
set:read\" Access to read the UEs Policy Set data. \"nudr-dr:policy-
data:ues:ue-policy-set:create\" Access to create the UEs Policy Set data.
\"nudr-dr:policy-data:ues:ue-policy-set:modify\" Access to update the UEs
Policy Set data. \"nudr-dr:policy-data:ues:sm-data:read\" Access to read the
UEs Session Management policy data. \"nudr-dr:policy-data:ues:sm-data:modify\"
Access to update the UEs Session Management policy data. \"nudr-dr:policy-
data:ues:sm-data:create\" Access to create the UEs Session Management policy
data. \"nudr-dr:policy-data:sponsor-connectivity-data:read\" Access to read
the sponsored connectivity data. \"nudr-dr:policy-data:bdt-data:read\" Access
to read the BDT data resource. \"nudr-dr:policy-data:bdt-data:create\" Access
to create the BDT data resource. \"nudr-dr:policy-data:bdt-data:modify\"
Access to update the BDT data resource. \"nudr-dr:policy-data:subs-to-
notify:create\" Access to create Subscriptions resources. \"nudr-dr:policy-
data:subs-to-notify:modify\" Access to update Subscriptions resources. \"nudr-
dr:policy-data:ues:operator-specific-data:read\" Access to read the UEs
operator specific policy data. \"nudr-dr:policy-data:ues:operator-specific-
data:modify\" Access to update the UEs operator specific policy data. \"nudr-
dr:policy-data:ues:operator-specific-data:create\" Access to create the UEs
operator specific policy data. \"nudr-dr:policy-data:slice-control-data:read\"
Access to read Slice specific Policy Control Data. \"nudr-dr:policy-
data:slice-control-data:modify\" Access to update Slice specific Policy
Control Data. \"nudr-dr:exposure-data\" Access to the ExposureData data set.
\"nudr-dr:exposure-data:access-and-mobility-data:create\" Access to create
Access and Mobility data. \"nudr-dr:exposure-data:access-and-mobility-
data:read\" Access to read Access and Mobility data. \"nudr-dr:exposure-
data:access-and-mobility-data:modify\" Access to update Access and Mobility
data. \"nudr-dr:exposure-data:session-management-data:create\" Access to
create Session Management data. \"nudr-dr:exposure-data:session-management-
data:read\" Access to read Session Management data. \"nudr-dr:exposure-
data:session-management-data:modify\" Access to update Session Management
data. \"nudr-dr:exposure-data:subs-to-notify:create\" Access to create
Subscriptions resources. \"nudr-dr:exposure-data:subs-to-notify:modify\"
Access to update Subscriptions resources. \"nudr-dr:application-data\" Access
to the ApplicationData data set. \"nudr-dr:application-data:pfds:read\" Access
to read PFDData. \"nudr-dr:application-data:pfds:modify\" Access to update
PFDData. \"nudr-dr:application-data:pfds:create\" Access to create PFDData.
\"nudr-dr:application-data:influence-data:read\" Access to read Traffic
Influence Data. \"nudr-dr:application-data:influence-data:create\" Access to
create Traffic Influence Data. \"nudr-dr:application-data:influence-
data:modify\" Access to update Traffic Influence Data. \"nudr-dr:application-
data:influence-data:subscriptions:create\" Access to create Traffic Influence
Data Subscriptions. \"nudr-dr:application-data:influence-
data:subscriptions:read\" Access to read Traffic Influence Data Subscriptions.
\"nudr-dr:application-data:influence-data:subscriptions:modify\" Access to
update Traffic Influence Data Subscriptions. \"nudr-dr:application-data:bdt-
policy-data:read\" Access to read BDT Policy Data. \"nudr-dr:application-
data:bdt-policy-data:create\" Access to create BDT Policy Data. \"nudr-
dr:application-data:bdt-policy-data:modify\" Access to update BDT Policy Data.
\"nudr-dr:application-data:iptv-config-data:read\" Access to read IPTV
Configuration Data. \"nudr-dr:application-data:iptv-config-data:create\"
Access to create IPTV Configuration Data. \"nudr-dr:application-data:iptv-
config-data:modify\" Access to update IPTV Configuration Data. \"nudr-
dr:application-data:service-param-data:read\" Access to read Service Parameter
Data. \"nudr-dr:application-data:service-param-data:create\" Access to create
Service Parameter Data. \"nudr-dr:application-data:service-param-data:modify\"
Access to update Service Parameter Data. \"nudr-dr:application-data:am-
influence-data:read\" Access to read AM Influence Data. \"nudr-dr:application-
data:am-influence-data:create\" Access to create AM Influence Data. \"nudr-
dr:application-data:am-influence-data:modify\" Access to update AM Influence
Data. \"nudr-dr:application-data:subs-to-notify:create\" Access to create
Subscriptions resources. \"nudr-dr:application-data:subs-to-notify:read\"
Access to read Subscriptions resources. \"nudr-dr:application-data:subs-to-
notify:modify\" Access to update Subscriptions resources. \"nudr-
dr:application-data:eas-deploy-data:read\" Access to read EAS Deployment
Information Data. \"nudr-dr:application-data:eas-deploy-data:create\" Access
to create EAS Deployment Information Data. \"nudr-dr:application-data:eas-
deploy-data:modify\" Access to update EAS Deployment Information Data.
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the Nudr_DataRepository
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [7].
Table 6.1.8-1: Supported Features
+----------------+-------------------------+-------------------------+ | Feature number | Feature Name | **Description** | +================+=========================+=========================+ | 1 | ResourceRemova | This feature indicates | | | lNotificationPolicyData | the support of the | | | | complete removal of a | | | | Policy Data resource. | +----------------+-------------------------+-------------------------+ | 2 | ResourceNoti | This feature indicates | | | ficationExposureDataFix | the support of | | | | corrections to | | | | Notifications of data | | | | changes in the Exposure | | | | Data resource. | +----------------+-------------------------+-------------------------+ | 3 | DomainNameProtocol | This feature supports | | | | the additional protocol | | | | matching condition for | | | | the domain name in PFD | | | | data. | +----------------+-------------------------+-------------------------+ | 4 | Enhance | This feature indicates | | | dBackgroundDataTransfer | the support of applying | | | | the Background Data | | | | Transfer Policy to a | | | | future PDU session | | | | requested by the AF for | | | | Policy Data resource | | | | and Application Data | | | | resource as defined in | | | | 3GPP TS 29.519 [3]. | | | | This feature requires | | | | the support of | | | | SessionMa | | | | nagementPolicyDataPatch | | | | feature to update | | | | Background Data | | | | Transfer data within | | | | the Session Management | | | | Policy Data. | +----------------+-------------------------+-------------------------+ | 5 | MacAddressRange | This feature indicates | | | | the support of a set of | | | | MAC addresses with a | | | | specific range for the | | | | traffic filter in the | | | | application data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 6 | MultiTemporalCondition | This feature indicates | | | | the support of multiple | | | | temporal validity | | | | conditions in the | | | | Traffic Influence Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 7 | PatchReport | If some of the | | | | modifications included | | | | in the PATCH request | | | | are not successfully | | | | implemented, the UDM | | | | reports the result of | | | | PATCH request execution | | | | to the consumer. See | | | | clause 5.2.7.2 of | | | | 3GPP TS 29.500 [7]. | +----------------+-------------------------+-------------------------+ | 8 | URLLC | This feature indicates | | | | support of Ultra | | | | Reliable Low Latency | | | | Communication (URLLC) | | | | requirements, i.e. AF | | | | application relocation | | | | and UE address(es) | | | | preservation in the | | | | Application Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 9 | SessionMa | This feature indicates | | | nagementPolicyDataPatch | the support of the HTTP | | | | PATCH method to update | | | | the session management | | | | policy data defined in | | | | a Policy Data resource | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 10 | ConditionalSubscription | This feature indicates | | | withPartialNotification | the support of | | | | subscription to | | | | notification of | | | | resource data changes | | | | conditioned to the | | | | change occurs in a | | | | fragment of the | | | | resource. It applies | | | | for Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 11 | Enhanc | This feature indicates | | | edInfluDataNotification | the support of | | | | enhancement of data | | | | change Notifications in | | | | the Influence Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 12 | PerUePerSnAuthStatus | This feature indicates | | | | the support of the | | | | Individual | | | | authentication status | | | | per UE per serving | | | | network as specified in | | | | 3GPP TS 29.505 [2]. | +----------------+-------------------------+-------------------------+ | 13 | Op | This feature indicates | | | SpecDataMapNotification | the support of the | | | | notification of data | | | | changes in the | | | | OperatorSpecificData | | | | resource by including | | | | the complete map of | | | | Operator Specific Data | | | | Containers. It applies | | | | to Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 14 | | Reserved | +----------------+-------------------------+-------------------------+ | 15 | OSDR | This feature indicates | | | esource_Create_Delete | the support of the | | | | creation and the | | | | removal of the | | | | OperatorSpecificData | | | | resource by a Policy | | | | Data NF service | | | | consumer. It applies to | | | | Policy Data resources | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 16 | AF_latency | This feature indicates | | | | the support for Edge | | | | relocation considering | | | | user plane latency. It | | | | applies for Influence | | | | Data resource as | | | | specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 17 | CHFsetSupport | This feature indicates | | | | the support of CHF | | | | redundancy and failover | | | | mechanisms based on CHF | | | | instance availability | | | | within a CHF Set, (i.e. | | | | secondary CHF address | | | | may be omitted). It | | | | applies to Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 18 | ConditionalSubscription | This feature indicates | | | WithExcludeNotification | the support in the | | | | subscription to | | | | notification of data | | | | changes of the | | | | indication of the | | | | properties whose | | | | changes do not trigger | | | | a notification. It | | | | applies to Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | | | | It requires the support | | | | of | | | | Op | | | | SpecDataMapNotification | | | | feature | +----------------+-------------------------+-------------------------+ | 19 | ProSe | This feature indicates | | | | the support of UE 5G | | | | ProSe policies and | | | | subscription | | | | information. It applies | | | | for Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 20 | NSAC | This feature indicates | | | | the support of NSAC | | | | (Network Slice | | | | Admission Control) | | | | related policy | | | | subscription | | | | information. It applies | | | | to Policy Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 21 | UESubDataSetRetrieve | This feature indicates | | | | the support of the UE | | | | Subscription Data Sets | | | | Retrieve as specified | | | | in clause 5.2.47 of | | | | 3GPP TS 29.505 [2]. | +----------------+-------------------------+-------------------------+ | 22 | SharedSmSubsData | This feature indicates | | | | the support of shared | | | | Session Management | | | | Subscription Data. If | | | | the NF consumer (UDM) | | | | does not support this | | | | feature, the UDR shall | | | | not take the | | | | alternative to include | | | | extendedSmSubsData in | | | | SmSubsData.\ | | | | It applies to | | | | Subscription Data | | | | resources as specified | | | | in 3GPP TS 29.505 [2] | +----------------+-------------------------+-------------------------+ | 23 | DeliveryOutcome | This feature indicates | | | | the support of | | | | functionality to allow | | | | PCF notifications about | | | | the outcome of the UE | | | | Policy delivery related | | | | to the invocation of AF | | | | provisioned service | | | | parameters as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 24 | AfGuideURSP | This feature indicates | | | | the support of | | | | Application guidance | | | | for URSP determination | | | | related application | | | | data as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 25 | EasDeployment | This feature indicates | | | | the support of EAS | | | | Deployment Information | | | | Data and Subscription | | | | related application | | | | data as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 26 | DCAMP | This feature indicates | | | | the support of DCAMP | | | | related application | | | | data. It applies to | | | | Application Data | | | | resources as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 27 | FilterAnyUE | This feature indicates | | | | the support of queries | | | | and subscriptions to | | | | service parameter data | | | | resource filtered by | | | | the any UE indication | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 28 | SimultConnectivity | This feature indicates | | | | the support of | | | | temporary | | | | simultaneously | | | | connectivity at edge | | | | relocation. It applies | | | | for Influence Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 29 | EeSubscriptionExt | This feature indicates | | | | the support of handling | | | | EE subscription data | | | | along with associated | | | | subscription resources | | | | as specified in | | | | 3GPP TS 29.505 [2]. | +----------------+-------------------------+-------------------------+ | 30 | PeiResource | This feature indicates | | | | the support of storing | | | | PEI in the PeiInfo | | | | resource as specified | | | | in | | | | 3GPP TS 29.505 [2]. | +----------------+-------------------------+-------------------------+ | 31 | ImmediateReportPcc | This feature indicates | | | | support of | | | | ImmediateReport within | | | | a | | | | PolicyDataSubscription | | | | in | | | | 3GPP TS 29.519 [3]. | | | | When a UDR consumer | | | | detects that the UDR | | | | supports the | | | | ImmediateReportPcc | | | | feature, it can | | | | indicate an | | | | immediateReport flag | | | | when invoking the | | | | Subscribe service | | | | operation. If the UDR | | | | receives the | | | | ImmediateReport flag in | | | | the received Subscribe | | | | service operation | | | | request, it shall | | | | return the resource\'s | | | | representation(s) of | | | | the monitored | | | | resource(s) in the | | | | service operation | | | | response body. | +----------------+-------------------------+-------------------------+ | 32 | ImmediateReport | This feature indicates | | | | support of | | | | ImmediateReport within | | | | an | | | | Subsc | | | | riptionDataSubscription | | | | in | | | | 3GPP TS 29.505 [2]. | | | | When a UDR consumer | | | | detects that the UDR | | | | supports the | | | | ImmediateReport | | | | feature, it can | | | | indicate an | | | | immediateReport flag | | | | when invoking the | | | | Subscribe service | | | | operation. If the UDR | | | | receives the | | | | ImmediateReport flag in | | | | the received Subscribe | | | | service operation | | | | request, it shall | | | | return the resource\'s | | | | representation(s) of | | | | the monitored | | | | resource(s) in the | | | | service operation | | | | response body. | +----------------+-------------------------+-------------------------+ | 33 | UESubDataSetRetrieveExt | This feature indicates | | | | the support of the | | | | Extended UE | | | | Subscription Data Sets | | | | Retrieve as specified | | | | in clause 5.2.47 of | | | | 3GPP TS 29.505 [2]. | +----------------+-------------------------+-------------------------+ | 34 | SFC | This feature indicates | | | | support of Service | | | | Function Chaining | | | | functionality. It | | | | applies for Influence | | | | Data resource as | | | | specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 35 | SubscribedV2XPolicy | This feature indicates | | | | the support of | | | | subscribed V2X policy | | | | data as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 36 | CommonEASDNAI | This feature indicates | | | | the support of the | | | | common EAS/DNAI | | | | selection as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 37 | PolSubscRetrieval | This feature indicates | | | | the support of the | | | | indication, within the | | | | PolicyDataSubscription | | | | data type, of the | | | | variable part of the | | | | Individual Policy Data | | | | subscription. It | | | | applies to Policy Data | | | | subscription resources | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 38 | A2X | This feature indicates | | | | the support of A2X | | | | communication as | | | | specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 39 | EpsUrsp | This feature indicates | | | | support of epsUrspInd | | | | within UePolicySet and | | | | UePolicySetPatch in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 40 | DCAMP_Roaming_LBO | This feature indicates | | | | support for dynamically | | | | changing AM policy for | | | | inbound roaming UE | | | | using LBO as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 41 | GMEC | This feature indicates | | | | support of Generic | | | | Group Management, | | | | Exposure and | | | | Communication | | | | functionality. It | | | | applies to Policy Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 42 | PatchCorrection | This feature introduces | | | | the correction to the | | | | PATCH method to support | | | | the service parameter | | | | urspGuidance to guide | | | | the URSP as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 43 | EnhancedUePolicy | This feature indicates | | | | the support of | | | | enhancement of the UE | | | | policy (e.g. Tracing | | | | Requirements). It | | | | applies to Policy Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 44 | ProSe_Ph2 | This feature indicates | | | | the support of UE 5G | | | | ProSe policies and | | | | subscription | | | | information for | | | | UE-to-UE relay service. | | | | It applies for Policy | | | | Data resources as | | | | specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 45 | OpSpecAmPolicyData | This feature indicates | | | | the support of the | | | | operator specific data | | | | changes in the | | | | Acce | | | | ssAndMobilityPolicyData | | | | resource. It applies to | | | | AM Policy Data resource | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 46 | CHFInformation | This feature indicates | | | | the support of | | | | provisioning of CHF | | | | information. It applies | | | | to Policy Data resource | | | | as specified in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 47 | SLAMUP | This feature indicates | | | | support of Spending | | | | Limits for AM and UE | | | | Policies in the 5GC. It | | | | applies to Policy Data | | | | resource as specified | | | | in | | | | 3GPP TS 29.519 [3]. | | | | | | | | This feature requires | | | | the support of the | | | | CHFInformation feature. | +----------------+-------------------------+-------------------------+ | 48 | AfGuideTNAPs | This feature is used in | | | | 3GPP TS 29.519 [3] | | | | and indicates the | | | | support of AF-provided | | | | guidance to the HPLMN | | | | of the UE of the list | | | | of TNAP(s) collocated | | | | with a 5G-RG. | +----------------+-------------------------+-------------------------+ | 49 | URSPEnforcement | This feature indicates | | | | support of urspEnfInd | | | | within UePolicySet and | | | | UePolicySetPatch in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+ | 50 | VPLMNSpecificURSP | This feature indicates | | | | support of vpsUrspInd | | | | within UePolicySet and | | | | UePolicySetPatch in | | | | 3GPP TS 29.519 [3]. | +----------------+-------------------------+-------------------------+
## 6.2 Nudr_GroupIDmap Service API
### 6.2.1 API URI
URIs of this API shall have the following root:
{apiRoot}/\/\
where \"apiRoot\" is defined in clause 4.4.1 of 3GPP TS 29.501 [8], the
\"apiName\" shall be set to \"nudr-group-id-map\" and the \"apiVersion\" shall
be set to \"v1\" for the current version of this specification.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, as defined in IETF RFC 7540 [13], shall be used as specified in clause
5 of 3GPP TS 29.500 [7].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [7].
HTTP messages and bodies for the Nudr_GroupIDmap service shall comply with the
OpenAPI [21] specification contained in Annex A3.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
The usage of HTTP standard headers shall be supported on Nudr interface as
defined in clause 5.2.2 of 3GPP TS 29.500 [7].
##### 6.2.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [11], shall be used as content type of
the HTTP bodies specified in the present specification as indicated in clause
5.4 of 3GPP TS 29.500 [7].
\- The Problem Details JSON Object (IETF RFC 7807 [17]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
##### 6.2.2.2.3 Cache-Control
As described in IETF RFC 7234 [16] clause 5.2, a \"Cache-Control\" header
should be included in HTTP responses carrying a representation of cacheable
resources. If it is included, it shall contain a \"max-age\" value, indicating
the amount of time in seconds after which the received response is considered
stale.
The \"max-age\" value shall be configurable by operator policy.
##### 6.2.2.2.4 ETag
As described in IETF RFC 7232 [15] clause 2.3, an \"ETag\" (entity-tag) header
should be included in HTTP responses carrying a representation of cacheable
resources to allow an NF Service Consumer performing a conditional GET request
with \"If-None-Match\" header. If it is included, it shall contain a server-
generated strong validator, that allows further matching of this value
(included in subsequent client requests) with a given resource representation
stored in the server or in a cache.
##### 6.2.2.2.5 If-None-Match
As described in IETF RFC 7232 [15] clause 3.2, an NF Service Consumer may
issue conditional GET request towards UDR by including an \"If-None-Match\"
header in HTTP requests containing one or several entity tags received in
previous responses for the same resource.
##### 6.2.2.2.6 Last-Modified
As described in IETF RFC 7232 [15] clause 2.2, a \"Last-Modified\" header
should be included in HTTP responses carrying a representation of cacheable
resources (e.g. SmfSelectionSubscriptionData) to allow an NF Service Consumer
performing a conditional request with \"If-Modified-Since\" header.
##### 6.2.2.2.7 If-Modified-Since
As described in IETF RFC 7232 [15] clause 3.3, an NF Service Consumer may
issue conditional GET request towards UDR, by including an \"If-Modified-
Since\" header in HTTP requests.
##### 6.2.2.2.8 When to Use Entity-Tags and Last-Modified Dates
Both \"ETag\" and \"Last-Modified\" headers should be sent in the same HTTP
response as stated in IETF RFC 7232 [15] clause 2.4.
NOTE: \"ETag\" is a stronger validator than \"Last-Modified\" and is
preferred.
If the UDR included an \"ETag\" header with the resource then a conditional
GET request for this resource shall be performed with the \"If-None-Match\"
header.
#### 6.2.2.3 HTTP custom headers
##### 6.2.2.3.1 General
In this release of this specification, no custom headers specific to the
Nudr_GroupIDmap service are defined. For 3GPP specific HTTP custom headers
used across all service-based interfaces, see clause 5.2.3 of 3GPP TS 29.500
[7].
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1: Resource URI structure of the nudr-group-id-map API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method Description
* * *
NfGroupIds /nf-group-ids GET
#### 6.2.3.2 Resource NfGroupIds
##### 6.2.3.2.1 Description
This resource represents the NF-Group IDs for a subscriber.
##### 6.2.3.2.2 Resource Definition
Resource URI: {apiRoot}/nudr-group-id-map/\/nf-group-ids
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.2.1
##### 6.2.3.2.3 Resource Standard Methods
##### 6.2.3.2.3.1 GET {#get .H6}
This method shall support the URI query parameters specified in table
6.2.3.2.3.1-1.
Table 6.2.3.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description
nf-type array(NFType) M 1..N see 3GPP TS 29.510 [14]
subscriberId SubscriberId M 1 Represents the Subscription Identifier SUPI or
GPSI or IMPI or IMPU (see 3GPP TS 23.501 [4] clause 5.9.2 and clause 5.9.8)\
pattern:
\^(imsi-[0-9]{5,15}\|nai-.+\|msisdn-[0-9]{5,15}\|extid-[\^@]+@[\^@]+\|impi-.+\|impu-.+\|.+)\$
* * *
NOTE: The format of the query parameter subscriberId is in line with the yaml
and thus does not follow the lower-with-hyphen format specified in 3GPP TS
29.501 [8].
This method shall support the request data structures specified in table
6.2.3.2.3.1-2 and the response data structures and response codes specified in
table 6.2.3.2.3.1-3.
Table 6.2.3.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | NfGro | M | 1 | 200 OK | Upon success, | | upIdMapResult | | | | a response | | | | | | body | | | | | | containing | | | | | | the NF-Group | | | | | | IDs for the | | | | | | requested NF | | | | | | types shall | | | | | | be returned. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be set to one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | table | | | | | | 5.2.7.1-1 of | | | | | | 3 | | | | | | GPP TS 29.500 | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
### 6.2.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined for the Nudr_GroupIDmap Service.
### 6.2.5 Notifications
In this release of this specification, no notifications are defined for the
Nudr_GroupIDmap Service.
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the structured data types defined for the
Nudr_GroupIDmap service API. For simple data types defined for the
Nudr_GroupIDmap service API see table 6.2.6.3.2-1.
Table 6.2.6.1-1: Nudr_GroupIDmap specific Data Types
Data type Clause defined Description
* * *
NfGroupIdMapResult 6.2.6.2.2 NF-Group IDs for the requested NF types
SubscriberId 6.2.6.3.2 Represents the Subscription Identifier SUPI or GPSI or
IMPI or IMPU
Table 6.2.6.1-2 specifies data types re-used by the Nudr_GroupIDmap service
API from other specifications, including a reference to their respective
specifications and when needed, a short description of their use within the
Nudr_GroupIDmap service API.
Table 6.2.6.1-2: Nudr_GroupIDmap re-used Data Types
Data type Reference Comments
* * *
ProblemDetails 3GPP TS 29.571 [10] Common data type used in response bodies
NFType 3GPP TS 29.510 [14]  
NfGroupId 3GPP TS 29.571 [10]
#### 6.2.6.2 Structured data types
##### 6.2.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.2.6.2.2 Type: NfGroupIdMapResult
Table 6.2.6.2.2-1: Definition of type NfGroupIdMapResult
Attribute name Data type P Cardinality Description
* * *
nfGroupIDs map(NfGroupId) M 1..N A map (list of key-value pairs where NFType
serves as key) of NFGroupIds
#### 6.2.6.3 Simple data types and enumerations
##### 6.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.2.6.3.2 Simple data types
The simple data types defined in table 6.2.6.3.2-1 shall be supported.
Table 6.2.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description SubscriberId string Pattern:
\^(imsi-[0-9]{5,15}\|nai-.+\|msisdn-[0-9]{5,15}\|extid-[\^@]+@[\^@]+\|impi-.+\|impu-.+\|.+)\$
* * *
### 6.2.7 Error Handling
#### 6.2.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [7].
#### 6.2.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [7].
#### 6.2.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[7] may also be used for the Nudr_GroupIDmap service. The following
application errors listed in Table 6.2.7.3-1 are specific for the
Nudr_GroupIDmap service.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
USER_NOT_FOUND 404 Not Found The user does not exist in the HPLMN
### 6.2.8 Security
As indicated in 3GPP TS 33.501 [12], the access to the Nudr_GroupIDmap API may
be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [13]), using
the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS
29.510 [14]) plays the role of the authorization server.
If Oauth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nudr_GroupIDmap API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [14], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nudr_GroupIDmap service.
The Nudr_GroupIDmap API defines scopes for OAuth2 authorization as specified
in 3GPP TS 33.501 [12]; it defines a single scope consisting on the name of
the service (i.e., \"nudr-group-id-map\"), and it does not define any
additional scopes at resource or operation level.
### 6.2.9 Feature Negotiation
The optional features in table 6.2.9-1 are defined for the Nudr_GroupIDmap
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [7].
Table 6.2.9-1: Supported Features
Feature number Feature Name Description
* * *
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This document specifies the common service operations and the top level data
model for Nudr_DataRepository Service Based Interface. There are no specific
HTTP methods or custom operations on the four top level resources in Table
6.1.3.1-1. Hence, the top level OpenAPI specification is not needed.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository, that uses the
GitLab software version control system (see 3GPP TS 29.501 [8] clause 5.3.1
and 3GPP TR 21.900 [20] clause 5B).
# A.2 Nudr_DataRepository API
This Annex specifies the formal definition of the Nudr_DataRepository service.
It consists of OpenAPI 3.0.0 specifications, in YAML format.
The OpenAPI 3.0.0 definition related to SubscriptionData shall comply with the
definition in 3GPP TS 29.505 [2].
The OpenAPI 3.0.0 definition related to PolicyData, StructuredDataForExposure
and ApplicationData shall comply with the definition in 3GPP TS 29.519 [3].
The OpenAPI file for the Nudr_DataRepository API is defined as follows:
openapi: 3.0.0
info:
version: 2.3.0-alpha.4
title: \'Nudr_DataRepository API OpenAPI file\'
description: \|
Unified Data Repository Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.504 V18.3.0; 5G System; Unified Data Repository
Services; Stage 3
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.504/\'
servers:
\- description: API root
url: \'{apiRoot}/nudr-dr/v2\'
variables:
apiRoot:
default: https://example.com
security:
\- {}
\- oAuth2ClientCredentials:
\- nudr-dr
paths:
/subscription-data/{ueId}/authentication-data/authentication-subscription:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1authentication-data\~1authentication-subscription\'
/subscription-data/{ueId}/authentication-data/authentication-status:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1authentication-data\~1authentication-status\'
/subscription-data/{ueId}/authentication-data/authentication-
status/{servingNetworkName}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1authentication-data\~1authentication-
status\~1%7BservingNetworkName%7D\'
/subscription-data/{ueId}/ue-update-confirmation-data/sor-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ue-update-confirmation-data\~1sor-data\'
/subscription-data/{ueId}/ue-update-confirmation-data/upu-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ue-update-confirmation-data\~1upu-data\'
/subscription-data/{ueId}/ue-update-confirmation-data/subscribed-cag:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ue-update-confirmation-data\~1subscribed-cag\'
/subscription-data/{ueId}/ue-update-confirmation-data/subscribed-snssais:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ue-update-confirmation-data\~1subscribed-snssais\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/am-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1am-data\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/smf-selection-
subscription-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1smf-selection-
subscription-data\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/sm-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1sm-data\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/lcs-bca-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1lcs-bca-data\'
/subscription-data/{ueId}/context-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\'
/subscription-data/{ueId}/context-data/amf-3gpp-access:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1amf-3gpp-access\'
/subscription-data/{ueId}/context-data/amf-non-3gpp-access:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1amf-non-3gpp-access\'
/subscription-data/{ueId}/context-data/smf-registrations:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1smf-registrations\'
/subscription-data/{ueId}/context-data/smf-registrations/{pduSessionId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1smf-registrations\~1%7BpduSessionId%7D\'
/subscription-data/{ueId}/operator-specific-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1operator-specific-data\'
/subscription-data/{ueId}/context-data/smsf-3gpp-access:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1smsf-3gpp-access\'
/subscription-data/{ueId}/context-data/smsf-non-3gpp-access:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1smsf-non-3gpp-access\'
/subscription-data/{ueId}/context-data/location:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1location\'
/subscription-data/{ueId}/context-data/ip-sm-gw:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ip-sm-gw\'
/subscription-data/{ueId}/context-data/mwd:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1mwd\'
/subscription-data/{ueId}/context-data/roaming-information:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1roaming-information\'
/subscription-data/{ueId}/context-data/pei-info:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1pei-info\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/sms-mng-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1sms-mng-data\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/sms-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1sms-data\'
/subscription-data/{ueId}/lcs-privacy-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1lcs-privacy-data\'
/subscription-data/{ueId}/lcs-mo-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1lcs-mo-data\'
/subscription-data/{ueId}/lcs-subscription-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1lcs-subscription-data\'
/subscription-data/{ueId}/pp-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1pp-data\'
/subscription-data/{ueId}/context-data/ee-subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ee-subscriptions\'
/subscription-data/{ueId}/context-data/ee-subscriptions/{subsId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ee-subscriptions\~1%7BsubsId%7D\'
/subscription-data/{ueId}/context-data/ee-subscriptions/{subsId}/amf-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ee-subscriptions\~1%7BsubsId%7D\~1amf-
subscriptions\'
/subscription-data/{ueId}/context-data/ee-subscriptions/{subsId}/smf-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ee-subscriptions\~1%7BsubsId%7D\~1smf-
subscriptions\'
/subscription-data/{ueId}/context-data/ee-subscriptions/{subsId}/hss-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1ee-subscriptions\~1%7BsubsId%7D\~1hss-
subscriptions\'
/subscription-data/group-data/{ueGroupId}/ee-subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-subscriptions\'
/subscription-data/group-data/{ueGroupId}/ee-subscriptions/{subsId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-subscriptions\~1%7BsubsId%7D\'
/subscription-data/group-data/{ueGroupId}/ee-subscriptions/{subsId}/amf-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-subscriptions\~1%7BsubsId%7D\~1amf-subscriptions\'
/subscription-data/group-data/{ueGroupId}/ee-subscriptions/{subsId}/smf-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-subscriptions\~1%7BsubsId%7D\~1smf-subscriptions\'
/subscription-data/group-data/{ueGroupId}/ee-subscriptions/{subsId}/hss-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-subscriptions\~1%7BsubsId%7D\~1hss-subscriptions\'
/subscription-data/group-data/{ueGroupId}/ee-profile-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1%7BueGroupId%7D\~1ee-profile-data\'
/subscription-data/group-data/5g-vn-groups:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~15g-vn-groups\'
/subscription-data/group-data/5g-vn-groups/{externalGroupId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~15g-vn-groups\~1%7BexternalGroupId%7D\'
/subscription-data/group-data/5g-vn-groups/internal:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~15g-vn-groups\~1internal\'
/subscription-data/group-data/5g-vn-groups/pp-profile-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~15g-vn-groups\~1pp-profile-data\'
/subscription-data/group-data/mbs-group-membership:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1mbs-group-membership\'
/subscription-data/group-data/mbs-group-membership/{externalGroupId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1mbs-group-membership\~1%7BexternalGroupId%7D\'
/subscription-data/group-data/mbs-group-membership/internal:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1mbs-group-membership\~1internal\'
/subscription-data/group-data/mbs-group-membership/pp-profile-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1mbs-group-membership\~1pp-profile-data\'
/subscription-data/{ueId}/ee-profile-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ee-profile-data\'
/subscription-data/{ueId}/context-data/sdm-subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1sdm-subscriptions\'
/subscription-data/{ueId}/context-data/sdm-subscriptions/{subsId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1sdm-subscriptions\~1%7BsubsId%7D\'
/subscription-data/{ueId}/context-data/nidd-authorizations:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1nidd-authorizations\'
/subscription-data/{ueId}/context-data/sdm-subscriptions/{subsId}/hss-sdm-
subscriptions:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1sdm-subscriptions\~1%7BsubsId%7D\~1hss-sdm-
subscriptions\'
/subscription-data/shared-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1shared-
data\'
/subscription-data/shared-data/{sharedDataId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1shared-
data\~1%7BsharedDataId%7D\'
/subscription-data/subs-to-notify:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1subs-to-
notify\'
/subscription-data/subs-to-notify/{subsId}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1subs-to-
notify\~1%7BsubsId%7D\'
/subscription-data/{ueId}/{servingPlmnId}/provisioned-data/trace-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1%7BservingPlmnId%7D\~1provisioned-data\~1trace-data\'
/subscription-data/{ueId}/identity-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1identity-data\'
/subscription-data/{ueId}/operator-determined-barring-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1operator-determined-barring-data\'
/subscription-data/{ueId}/nidd-authorization-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1nidd-authorization-data\'
/subscription-data/{ueId}/service-specific-authorization-data/{serviceType}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1service-specific-authorization-data\~1%7BserviceType%7D\'
/subscription-data/{ueId}/v2x-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1v2x-data\'
/subscription-data/{ueId}/pp-profile-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1pp-profile-data\'
/subscription-data/{ueId}/coverage-restriction-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1coverage-restriction-data\'
/subscription-data/group-data/group-identifiers:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-data\~1group-
data\~1group-identifiers\'
/subscription-data/{ueId}/prose-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1prose-data\'
/subscription-data/{ueId}/pp-data-store:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1pp-data-store\'
/subscription-data/{ueId}/context-data/service-specific-
authorizations/{serviceType}:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1context-data\~1service-specific-
authorizations\~1%7BserviceType%7D\'
/subscription-data/{ueId}/5mbs-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~15mbs-data\'
/subscription-data/{ueId}/uc-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1uc-data\'
/subscription-data/{ueId}/time-sync-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1time-sync-data\'
/subscription-data/{ueId}/ranging-slpos-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1ranging-slpos-data\'
/subscription-data/{ueId}/a2x-data:
\$ref: \'TS29505_Subscription_Data.yaml#/paths/\~1subscription-
data\~1%7BueId%7D\~1a2x-data\'
/policy-data/ues/{ueId}:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1ues\~1%7BueId%7D\'
/policy-data/ues/{ueId}/am-data:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1ues\~1%7BueId%7D\~1am-data\'
/policy-data/ues/{ueId}/ue-policy-set:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1ues\~1%7BueId%7D\~1ue-policy-set\'
/policy-data/ues/{ueId}/sm-data:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1ues\~1%7BueId%7D\~1sm-data\'
/policy-data/ues/{ueId}/sm-data/{usageMonId}:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1ues\~1%7BueId%7D\~1sm-data\~1%7BusageMonId%7D\'
/policy-data/sponsor-connectivity-data/{sponsorId}:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1sponsor-
connectivity-data\~1%7BsponsorId%7D\'
/policy-data/bdt-data:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1bdt-data\'
/policy-data/bdt-data/{bdtReferenceId}:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1bdt-
data\~1%7BbdtReferenceId%7D\'
/policy-data/subs-to-notify:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1subs-to-notify\'
/policy-data/subs-to-notify/{subsId}:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-data\~1subs-to-
notify\~1%7BsubsId%7D\'
/policy-data/ues/{ueId}/operator-specific-data:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1ues\~1%7BueId%7D\~1operator-specific-data\'
/application-data/pfds:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-data\~1pfds\'
/application-data/pfds/{appId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1pfds\~1%7BappId%7D\'
/application-data/influenceData:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1influenceData\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/influenceData/{influenceId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1influenceData\~1%7BinfluenceId%7D\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/policy-data/plmns/{plmnId}/ue-policy-set:
\$ref: \'TS29519_Policy_Data.yaml#/paths/\~1policy-
data\~1plmns\~1%7BplmnId%7D\~1ue-policy-set\'
/application-data/bdtPolicyData:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1bdtPolicyData\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/bdtPolicyData/{bdtPolicyId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1bdtPolicyData\~1%7BbdtPolicyId%7D\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/iptvConfigData:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1iptvConfigData\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/iptvConfigData/{configurationId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1iptvConfigData\~1%7BconfigurationId%7D\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/serviceParamData:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1serviceParamData\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/serviceParamData/{serviceParamId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1serviceParamData\~1%7BserviceParamId%7D\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/influenceData/subs-to-notify:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1influenceData\~1subs-to-notify\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/influenceData/subs-to-notify/{subscriptionId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-
data\~1influenceData\~1subs-to-notify\~1%7BsubscriptionId%7D\'
# The path segment is left not following the naming convention as defined in
3GPP TS 29.501 due to backward compatibility consideration.
/application-data/subs-to-notify:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-data\~1subs-to-
notify\'
/application-data/subs-to-notify/{subsId}:
\$ref: \'TS29519_Application_Data.yaml#/paths/\~1application-data\~1subs-to-
notify\~1%7BsubsId%7D\'
/exposure-data/{ueId}/access-and-mobility-data:
\$ref: \'TS29519_Exposure_Data.yaml#/paths/\~1exposure-
data\~1%7BueId%7D\~1access-and-mobility-data\'
/exposure-data/{ueId}/session-management-data/{pduSessionId}:
\$ref: \'TS29519_Exposure_Data.yaml#/paths/\~1exposure-
data\~1%7BueId%7D\~1session-management-data\~1%7BpduSessionId%7D\'
/exposure-data/subs-to-notify:
\$ref: \'TS29519_Exposure_Data.yaml#/paths/\~1exposure-data\~1subs-to-notify\'
/exposure-data/subs-to-notify/{subId}:
\$ref: \'TS29519_Exposure_Data.yaml#/paths/\~1exposure-data\~1subs-to-
notify\~1%7BsubId%7D\'
/data-restoration-events:
post:
# This is a pseudo operation, clients shall NOT invoke this method!
summary: subscribe to data restoration notifications
operationId: CreateIndividualSubcription
tags:
\- Subscriptions (Collection)
requestBody:
required: true
content:
application/json:
schema: {}
responses:
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
restorationNotification:
\'{dataRestorationCallbackUri}\':
# The URI in {dataRestorationCallbackUri} is the default endpoint discovered
from NRF.
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/DataRestorationNotification\'
responses:
\'204\':
description: No Content, Notification was succesfull
\'307\':
description: Temporary Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: \'The URI pointing to the resource located on the redirect target
NF service consumer\'
required: true
schema:
type: string
\'308\':
description: Permanent Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: \'The URI pointing to the resource located on the redirect target
NF service consumer\'
required: true
schema:
type: string
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nudr-dr: Access to the Nudr_DataRepository API
nudr-dr:subscription-data: Access to the SubscriptionData data set
nudr-dr:subscription-data:authentication-subscription:read: Access to read the
AuthenticationSubscription resource of the SubscriptionData data set
nudr-dr:subscription-data:authentication-subscription:modify: Access to update
the AuthenticationSubscription resource of the SubscriptionData data set
nudr-dr:subscription-data:registrations:write: Write access to NF registration
resources of the SubscriptionData data set
nudr-dr:policy-data: Access to the PolicyData data set
nudr-dr:policy-data:ues:read: Access to read the UEs resource
nudr-dr:policy-data:ues:am-data:read: Access to read the UEs Access and
Mobility policy data
nudr-dr:policy-data:ues:ue-policy-set:read: Access to read the UEs Policy Set
data
nudr-dr:policy-data:ues:ue-policy-set:create: Access to create the UEs Policy
Set data
nudr-dr:policy-data:ues:ue-policy-set:modify: Access to update the UEs Policy
Set data
nudr-dr:policy-data:ues:sm-data:read: Access to read the UEs Session
Management Policy data
nudr-dr:policy-data:ues:sm-data:modify: Access to update the UEs Session
Management Policy data
nudr-dr:policy-data:ues:sm-data:create: Access to create the UEs Session
Management Policy data
nudr-dr:policy-data:sponsor-connectivity-data:read: Access to read the
sponsored Connectivity Data
nudr-dr:policy-data:bdt-data:read: Access to read the BDT data resource
nudr-dr:policy-data:bdt-data:create: Access to create the BDT data resource
nudr-dr:policy-data:bdt-data:modify: Access to update the BDT data resource
nudr-dr:policy-data:subs-to-notify:create: Access to create Subscriptions
resources
nudr-dr:policy-data:subs-to-notify:modify: Access to update Subscriptions
resources
nudr-dr:policy-data:ues:operator-specific-data:read: Access to read the UEs
operator specific policy data
nudr-dr:policy-data:ues:operator-specific-data:modify: Access to update the
UEs operator specific policy data
nudr-dr:policy-data:ues:operator-specific-data:create: Access to create the
UEs operator specific policy data
nudr-dr:policy-data:slice-control-data:read: Access to read Slice specific
Policy Control Data
nudr-dr:policy-data:slice-control-data:modify: Access to update Slice specific
Policy Control Data
nudr-dr:exposure-data: Access to the ExposureData data set
nudr-dr:exposure-data:access-and-mobility-data:create: Access to create
ExposureData
nudr-dr:exposure-data:access-and-mobility-data:read: Access to read
ExposureData
nudr-dr:exposure-data:access-and-mobility-data:modify: Access to update
ExposureData
nudr-dr:exposure-data:session-management-data:create: Access to create
ExposureData
nudr-dr:exposure-data:session-management-data:read: Access to read
ExposureData
nudr-dr:exposure-data:session-management-data:modify: Access to update
ExposureData
nudr-dr:exposure-data:subs-to-notify:create: Access to create Subscriptions
resources
nudr-dr:exposure-data:subs-to-notify:modify: Access to update Subscriptions
resources
nudr-dr:application-data: Access to the ApplicationData data set
nudr-dr:application-data:pfds:read: Access to read PFDData
nudr-dr:application-data:pfds:modify: Access to update PFDData
nudr-dr:application-data:pfds:create: Access to create PFDData
nudr-dr:application-data:influence-data:read: Access to read Traffic Influence
Data
nudr-dr:application-data:influence-data:create: Access to create Traffic
Influence Data.
nudr-dr:application-data:influence-data:modify: Access to update Traffic
Influence Data
nudr-dr:application-data:influence-data:subscriptions:read: Access to read
Traffic Influence Data Subscriptions
nudr-dr:application-data:influence-data:subscriptions:create: Access to create
Traffic Influence Data Subscriptions
nudr-dr:application-data:influence-data:subscriptions:modify: Access to update
Traffic Influence Data Subscriptions
nudr-dr:application-data:bdt-policy-data:read: Access to read BDT Policy Data
nudr-dr:application-data:bdt-policy-data:create: Access to create BDT Policy
Data
nudr-dr:application-data:bdt-policy-data:modify: Access to update BDT Policy
Data
nudr-dr:application-data:iptv-config-data:read: Access to read IPTV
Configuration Data
nudr-dr:application-data:iptv-config-data:create: Access to create IPTV
Configuration Data
nudr-dr:application-data:iptv-config-data:modify: Access to update IPTV
Configuration Data
nudr-dr:application-data:service-param-data:read: Access to read Service
Parameter Data
nudr-dr:application-data:service-param-data:create: Access to create Service
Parameter Data
nudr-dr:application-data:service-param-data:modify: Access to update Service
Parameter Data
nudr-dr:application-data:am-influence-data:read: Access to read AM Influence
Data
nudr-dr:application-data:am-influence-data:create: Access to create AM
Influence Data
nudr-dr:application-data:am-influence-data:modify: Access to update AM
Influence Data
nudr-dr:application-data:subs-to-notify:create: Access to create Subscriptions
resources
nudr-dr:application-data:subs-to-notify:read: Access to read Subscriptions
resources
nudr-dr:application-data:subs-to-notify:modify: Access to update Subscriptions
resources
nudr-dr:application-data:eas-deploy-data:read: Access to read EAS Deployment
Information Data
nudr-dr:application-data:eas-deploy-data:create: Access to create EAS
Deployment Information Data
nudr-dr:application-data:eas-deploy-data:modify: Access to update EAS
Deployment Information Data
schemas:
DataRestorationNotification:
description: Contains identities representing those UEs potentially affected
by a data-loss event at the UDR
type: object
properties:
supiRanges:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/SupiRange\'
minItems: 1
gpsiRanges:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/IdentityRange\'
minItems: 1
resetIds:
type: array
items:
type: string
minItems: 1
sNssaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
dnnList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
minItems: 1
udrGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfGroupId\'
# A.3 Nudr_GroupIDmap API
openapi: 3.0.0
info:
version: 1.2.0-alpha.1
title: \'Nudr_GroupIDmap\'
description: \|
Unified Data Repository Service for NF-Group ID retrieval.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.504 V18.0.0; 5G System; Unified Data Repository
Services; Stage 3
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.504/\'
servers:
\- description: API root
url: \'{apiRoot}/nudr-group-id-map/v1\'
variables:
apiRoot:
default: https://example.com
security:
\- {}
\- oAuth2ClientCredentials:
\- nudr-group-id-map
paths:
/nf-group-ids:
get:
summary: Retrieves NF-Group IDs for provided Subscriber and NF types
operationId: GetNfGroupIDs
tags:
\- NF Group IDs (Document)
parameters:
\- name: nf-type
in: query
description: Type of NF
required: true
style: form
explode: false
schema:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/NFType\'
minItems: 1
\- name: subscriberId
# The name of this query parameter is left not following the naming convention
as defined in 3GPP TS 29.501 due to backward compatibility consideration.
in: query
description: Identifier of the subscriber
required: true
schema:
\$ref: \'#/components/schemas/SubscriberId\'
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/NfGroupIdMapResult\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nudr-group-id-map: Access to the Nudr_GroupIDmap API
schemas:
# COMPLEX TYPES:
NfGroupIdMapResult:
description: Contains the NFGroupIds for the requested NF types. The NFType is
the key of the map.
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfGroupId\'
minProperties: 1
# SIMPLE TYPES:
SubscriberId:
description: Represents the Subscription Identifier SUPI or GPSI or IMPI or
IMPU.
type: string
pattern:
\'\^(imsi-[0-9]{5,15}\|nai-.+\|msisdn-[0-9]{5,15}\|extid-[\^@]+@[\^@]+\|impi-.+\|impu-.+\|.+)\$\'
# ENUMS:
###### ## Annex B (Normative): ABNF grammar for 3GPP SBI HTTP custom headers
# B.1 General
This Annex contains a self-contained set of ABNF rules, comprising the re-used
rules from IETF RFCs, and the rules defined by the 3GPP custom headers defined
in this specification (see clause 6.1.2.3).
This grammar may be used as input to existing tools to help implementations to
parse 3GPP custom headers.
# B.2 ABNF definitions (Filename: \"TS29504_CustomHeaders.abnf\")
; \----------------------------------------
; RFC 5234
; \----------------------------------------
HTAB = %x09 ; horizontal tab
LF = %x0A ; linefeed
CR = %x0D ; carriage return
SP = %x20
DQUOTE = %x22 ; \" (Double Quote)
DIGIT = %x30-39 ; 0-9
ALPHA = %x41-5A / %x61-7A ; A-Z / a-z
VCHAR = %x21-7E ; visible (printing) characters
WSP = SP / HTAB ; white space
CRLF = CR LF ; Internet standard newline
; \----------------------------------------
; RFC 5322
; \----------------------------------------
obs-FWS = 1*WSP *( CRLF 1*WSP )
FWS = ( [ *WSP CRLF ] 1*WSP ) / obs-FWS
obs-NO-WS-CTL = %d1-8 / %d11 / %d12 / %d14-31 / %d127
obs-ctext = obs-NO-WS-CTL
ctext = %d33-39 / %d42-91 / %d93-126 / obs-ctext
obs-qp = \"\\\" ( obs-NO-WS-CTL / LF / CR )
quoted-pair = ( \"\\\" ( VCHAR / WSP ) ) / obs-qp
ccontent = ctext / quoted-pair / comment
comment = \"(\" *( [ FWS ] ccontent ) [ FWS ] \")\"
; \----------------------------------------
; RFC 7230
; \----------------------------------------
OWS = *( SP / HTAB )
tchar = \"!\" / \"#\" / \"\$\" / \"%\" / \"&\" / \"\'\" / \"*\" / \"+\" /
\"-\"
/ \".\" / \"\^\" / \"_\" / \"`\" / \"\|\" / \"\~\" / DIGIT / ALPHA
token = 1*tchar
obs-text = %x80-FF
; \----------------------------------------
; RFC 7232
; \----------------------------------------
entity-tag = [ weak ] opaque-tag
weak = %x57.2F ; \"W/\", case-sensitive
opaque-tag = DQUOTE *etagc DQUOTE
etagc = %x21 / %x23-7E / obs-text ; VCHAR except double quotes, plus obs-text
; \----------------------------------------
; 3GPP TS 29.504
;
; Version: 18.3.0 (September 2023)
;
; (c) 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
; \----------------------------------------
;
; Header: 3gpp-Sbi-Notification-Correlation
;
Sbi-Notification-Correlation-Header = \"3gpp-Sbi-Notification-Correlation:\"
OWS subscriptionId
*( OWS \",\" OWS subscriptionId ) OWS
subscriptionId = token
;
; Header: 3gpp-Sbi-Etags
;
Sbi-Etags-Header = \"3gpp-Sbi-Etags:\" OWS datasetEtag *( OWS \",\" OWS
datasetEtag ) OWS
datasetEtag = dataSetName \"=\" entity-tag
dataSetName = UeSubscribedDataSetName
UeSubscribedDataSetName = 1*( ALPHA / DIGIT / \"_\" )
#