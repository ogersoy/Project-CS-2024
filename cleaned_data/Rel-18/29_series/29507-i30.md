# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification provides the stage 3 definition of the Access and
Mobility Policy Control Service (Npcf_AMPolicyControl) of the 5G System.
The stage 2 definition and procedures of the Access and Mobility Policy
Control Service are contained in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
The 5G System Architecture is defined in 3GPP TS 23.501 [2].
Stage 3 call flows are provided in 3GPP TS 29.513 [7].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition of the 5G System are specified in 3GPP
TS 29.500 [5] and 3GPP TS 29.501 [6].
The Access and Mobility Policy Control Service is provided by the Policy
Control Function (PCF). This service provides Access and Mobility Policies.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[5] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[6] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[7] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[8] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[11] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[12] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[13] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[14] 3GPP TS 29.518: \"5G System; Access and Mobility Management Services;
Stage 3\".
[15] void.
[16] void.
[17] 3GPP TS 29.519: \"5G System; Usage of the Unified Data Repository service
for Policy Data, Application Data and Structured Data for Exposure; Stage 3\".
[18] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace; Trace control and configuration management\".
[19] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[20] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[21] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[22] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[23] 3GPP TS 23.316: \"Wireless and wireline convergence access support for
the 5G System (5GS)\".
[24] 3GPP TS 29.531: \"5G System; Network Slice Selection Services; Stage 3\".
[25] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[26] 3GPP TS 29.534: \"5G System; Access and Mobility Policy Authorization
Service; Stage 3\".
[27] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[28] 3GPP TS 29.523: \"5G System; Policy Control Event Exposure Service; Stage
3\".
[29] 3GPP TS 29.525: \"UE Policy Control Service; Stage 3\".
[30] 3GPP TS 29.521: \"5G System; Binding Support Management Service; Stage
3\".
[31] 3GPP TS 29.502: \"5G System; Session Management Services; Stage 3\".
[32] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs;
Stage 3\".
[33] 3GPP TS 29.594: \"5G System; Spending Limit Control Service; Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.501 [2], clause 3.1 apply:
**Allowed NSSAI**
**Alternative S-NSSAI**
**Partially Allowed NSSAI**
**Target NSSAI**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5G-BRG 5G Broadband Residential Gateway
5G-RG 5G Residential Gateway
5GC 5G Core Network
5G-CRG 5G Cable Residential Gateway
5GS 5G System
AMBR Aggregated Maximum Bit Rate
AMF Access and Mobility Management Function
BBF Broadband Forum
CHF Charging Function
DNN Data Network Name
EPC Evolved Packet Core
EPS Evolved Packet System
E-UTRAN Evolved Universal Terrestrial Radio-Access Network
FN-BRG Fixed Network Broadband Residential Gateway
FN-CRG Fixed Network Cable Residential Gateway
FN-RG Fixed Network Residential Gateway
FQDN Fully Qualified Domain Name
GBR Guaranteed Bit Rate
GPSI Generic Public Subscription Identifier
GUAMI Globally Unique AMF Identifier
HFC Hybrid Fiber-Coaxial
JSON JavaScript Object Notation
LBO Local Break Out (roaming)
MBR Maximum Bit Rate
MME Mobility Management Entity
NID Network Identifier
NRF Network Repository Function
NSSAI Network Slice Selection Assistance Information
NWDAF Network Data Analytics Function
PCF Policy Control Function
PEI Permanent Equipment Identifier
PRA Presence Reporting Area
QoS Quality of Service
RA Registration Area
RFSP RAT Frequency Selection Priority
SMF Session Management Function
S-NSSAI Single Network Slice Selection Assistance Information
SNPN Stand-alone Non-Public Network
SUPI Subscription Permanent Identifier
UDM Unified Data Management
URSP UE Route Selection Policy
V-PCF Visited Policy Control Function
W-5GAN Wireline 5G Access Network
W-5GBAN Wireline BBF Access Network
W-5GCAN Wireline 5G Cable Access Network
W-AGF Wireline Access Gateway Function
# 4 Access and Mobility Policy Control Service
## 4.1 Service Description
### 4.1.1 Overview
The Access and Mobility Policy Control Service, as defined in 3GPP TS 23.502
[3] and 3GPP TS 23.503 [4], is provided by the Policy Control Function (PCF).
This service provides access control and mobility management related policies
to the NF service consumer and offers the following functionalities:
\- policy creation based on a request from the NF service consumer during UE
registration;
\- notification of the NF service consumer of the updated policies which are
subscribed; and
\- deletion of the policy context for a UE.
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging related 5G architecture is also described in 3GPP TS 29.513 [7].
The Access and Mobility Policy Control Service (Npcf_AMPolicyControl) is part
of the Npcf service-based interface exhibited by the Policy Control Function
(PCF).
The known NF service consumer of the Npcf_AMPolicyControl service is the
Access and Mobility Management Function (AMF).
The AMF accesses the Access and Mobility Policy Control Service at the PCF via
the N15 Reference point. In the roaming scenario, the N15 reference point is
located between the V-PCF in the visited network and the AMF.
Figure 4.1.2-1: Reference Architecture for the Npcf_AMPolicyControl Service;
SBI representation
Figure 4.1.2-2: Non-roaming Reference Architecture for the
Npcf_AMPolicyControl Service; reference point representation
Figure 4.1.3-2: Roaming reference Architecture for the Npcf_AMPolicyControl
Service; reference point representation
### 4.1.3 Network Functions
#### 4.1.3.1 Policy Control Function (PCF)
The Policy Control Function (PCF):
\- Supports unified policy framework to govern network behaviour; and
\- Provides Access and Mobility Management related policies to the NF service
consumer that enforces them.
In the roaming scenario, the Visited Policy Control Function (V-PCF) provides
the functions described in this clause towards the visited network.
The policy decisions made by the PCF may be based on one or more of the
following:
\- Information obtained from the AF/NEF, e.g. high throughput indication;
\- Information obtained from the UDR;
\- Information obtained from the AMF, e.g. UE related and access related
information;
\- Information obtained from the NWDAF;
\- Information from the CHF about spending limit control;
\- Information from the TSCTSF; and
\- PCF pre-configured policy context.
#### 4.1.3.2 NF Service Consumers
The Access and Mobility Management function (AMF) provides:
\- Registration management;
\- Connection management;
\- Reachability management; and
\- Mobility Management.
## 4.2 Service Operations
### 4.2.1 Introduction
Table 4.2.1-1: Operations of the Npcf_AMPolicyControl Service
* * *
Service operation name Description Initiated by Npcf_AMPolicyControl_Create
Creates an AM Policy Association and provides corresponding policies to the NF
service consumer. NF service consumer (e.g. AMF) Npcf_AMPolicyControl_Update
Updates an AM Policy Association and provides corresponding policies to the NF
service consumer when a policy control request trigger is met or the AMF is
relocated due to UE mobility and the old PCF is selected. NF service consumer
(e.g. AMF) Npcf_AMPolicyControl_UpdateNotify Provides updated policies to the
NF service consumer. PCF (V-PCF in roaming case) Npcf_AMPolicyControl_Delete
Provides means for the NF service consumer to delete the AM Policy
Association. NF service consumer (e.g. AMF)
* * *
### 4.2.2 Npcf_AMPolicyControl_Create Service Operation
#### 4.2.2.1 General
The procedure in the present clause is applicable when the NF service consumer
(e.g. AMF) creates an AM policy association when the UE registers to the
network, and when the AMF is relocated (between the different AMF sets) and
the new AMF selects a new PCF. The procedure for the case where the AMF is
relocated and the new AMF selects the old PCF is defined in clause 4.2.3.1.
The creation of an AM policy association only applies for normally registered
UEs, i.e., it does not apply for Emergency Registered UEs.
Figure 4.2.2.1-1 illustrates the creation of a policy association.
Figure 4.2.2.1-1: Creation of a policy association
When a UE registers and a UE context is being established, the AMF can obtain
Service Area Restrictions, RFSP index, subscribed UE-AMBR, subscribed UE-
Slice-MBR(s) and GPSI(s) from the UDM during the Access and Mobility
Subscription Data retrieval procedure, and the list of NWDAF instance IDs used
for the UE and their associated Analytic ID(s) consumed by the AMF, the
Allowed NSSAI, the Partially Allowed NSSAI and the Target NSSAI from local
configuration or from the NSSF during the slice selection procedure and shall
decide based on local policies whether to request policies from the PCF.
To request policies from the PCF, the NF service consumer (e.g. AMF) shall
send an HTTP POST request with: \"{apiRoot}/npcf-am-policy-
control/v1/policies\" as Resource URI and the PolicyAssociationRequest data
structure as request body that shall include:
\- Notification URI encoded as \"notificationUri\" attribute;
\- SUPI encoded as \"supi\" attribute;
\- if the \"SliceSupport\" feature, the \"DNNReplacementControl\" feature
and/or the \"NetSliceRepl\" feature is supported in the NF service consumer
and the UE is registered via a 3GPP access, the Allowed NSSAI in the 3GPP
access encoded in the \"allowedSnssais\" attribute; and
\- if the \"PartNetSliceSupport\" feature and/or the \"NetSliceRepl\" feature
is/are supported in the NF service consumer and the UE is registered via a
3GPP access, the Partially Allowed NSSAI in the 3GPP access within the
\"partAllowedNssai\" attribute;
and that shall include when available:
\- GPSI encoded as \"gpsi\" attribute;
\- if the feature \"MultipleAccessTypes\" is not supported, the access type
encoded as \"accessType\" attribute;
\- Permanent Equipment Identifier (PEI) encoded as \"pei\" attribute;
\- User Location Information encoded as \"userLoc\" attribute;
\- UE Time Zone encoded as \"timeZone\" attribute;
\- the identifier of the serving network (the PLMN Identifier or the SNPN
Identifier)encoded as \"servingPlmn\" attribute;
NOTE 1: The SNPN Identifier consists of the PLMN Identifier and the NID.
\- if the feature \"MultipleAccessTypes\" is not supported, the RAT type
encoded as \"ratType\" attribute;
\- Service Area Restrictions (see clause 4.2.2.3.1) derived from the Service
Area Restrictions obtained from the UDM by mapping any service areas denoted
by geographical information into Tracking Area Identities (TAIs) and encoded
as \"servAreaRes\" attribute;
\- RFSP index (see clause 4.2.2.3.2) as obtained from the UDM encoded as
\"rfsp\" attribute;
\- a list of Internal Group Identifiers encoded as \"groupIds\" attribute;
\- if the NF service consumer is an AMF, the GUAMI encoded as \"guami\"
attribute;
\- if the NF service consumer is an AMF, the name of a service produced by the
AMF that expects to receive information within
Npcf_AMPolicyControl_UpdateNotify service operation encoded as \"serviceName\"
attribute;
\- Alternate or backup IPv4 Address(es) where to send Notifications encoded as
\"altNotifIpv4Addrs\" attribute;
\- Alternate or backup IPv6 Address(es) where to send Notifications encoded as
\"altNotifIpv6Addrs\" attribute;
\- Alternate or backup FQDN(s) where to send Notifications encoded as
\"altNotifFqdns\" attribute;
\- trace control and configuration parameters information encoded as
\"traceReq\" attribute;
\- if the feature \"UE-AMBR_Authorization\" is supported in the NF service
consumer, the subscribed UE-AMBR (see clause 4.2.2.3.3) in the \"ueAmbr\"
attribute;
\- if the feature \"DNNReplacementControl\" and/or the \"NetSliceRepl\"
feature is/are supported, the mapping of each S-NSSAI of the Allowed NSSAI
and, if the \"PartNetSliceSupport\" feature and/or the \"NetSliceRepl\"
feature is/are supported, the mapping of each S-NSSAI of the Partially Allowed
NSSAI to the corresponding S-NSSAI of the HPLMN encoded in the
\"mappingSnssais\" attribute;
Editor's Note: The support of Partially Allowed NSSAI requires further work in
TS 23.502 and TS 23.503.
\- if the \"PartNetSliceSupport\" feature is supported in the NF service
consumer and the UE is registered via a 3GPP access:
\- the list of the S-NSSAI(s) partially rejected in the RA, if available,
encoded via the \"snssaisPartRejected\" attribute;
\- the list of the Rejected S-NSSAI(s) in the RA, if available, encoded via
the \"rejectedSnssais\" attribute; and/or
\- the Pending NSSAI encoded, if available, via the \"pendingNssai\"
attribute;
\- if the feature \"UE-Slice-MBR_Authorization\" is supported in the NF
service consumer, the subscribed UE-Slice-MBR for each subscribed S-NSSAI of
the home PLMN mapping to a S-NSSAI of the serving PLMN if available (see
clause 4.2.2.3.5) encoded in the \"ueSliceMbrs\" attribute;
\- when the \"EneNA\" feature is supported, the list of NWDAF instance IDs
used for the UE and their associated Analytic IDs consumed by the NF service
consumer, included within the \"nwdafDatas\" attribute; and
\- if the feature \"TargetNSSAI\" is supported in the NF service consumer, the
Target NSSAI generated by the NF service consumer or received from the NSSF
encoded in the \"targetSnssais\" attribute.
Upon the reception of this HTTP POST request, the PCF shall:
\- assign a policy association ID;
\- determine the applicable policy (taking into consideration and optionally
modifying the possibly received UE-AMBR, UE-Slice-MBR(s) for the Allowed NSSAI
and the Partially Allowed NSSAI, Service Area Restrictions, RFSP index,
Allowed NSSAI, Partially Allowed NSSAI, list of the S-NSSAI(s) partially
rejected in the RA, list of the Rejected S-NSSAI(s) in the RA and/or Pending
NSSAI);
\- for the successful case, send a HTTP \"201 Created\" response with the URI
for the created resource in the \"Location\" header field
NOTE 2: The assigned policy association ID is part of the URI for the created
resource and is thus associated with the SUPI.
and the PolicyAssociation data type as response body including:
\- conditionally AMF Access and Mobility Policy (see clause 4.2.2.3), i.e.:
a) if the PCF received the \"servAreaRes\" attribute in the request, Service
Area Restrictions encoded as \"servAreaRes\" attribute; and/or
b) if the PCF received the \"rfsp\" attribute in the request, RAT Frequency
Selection Priority (RFSP) Index encoded as \"rfsp\" attribute. If the feature
\"RFSPValidityTime\" is supported and the PCF determines to provide an RFSP
index value that indicates EPC/E-UTRAN access is prioritized over 5GS access,
the PCF may provide, based on operator policies, a validity time for the RFSP
index value within the \"rfspValTime\" attribute;; and/or
c) if the feature \"UE-AMBR_Authorization\" is supported and the PCF received
the \"ueAmbr\" attribute in the request, the authorized UE-AMBR encoded as
\"ueAmbr\" attribute;
d) if the feature \"UE-Slice-MBR_Authorization\" is supported and the PCF
received the \"ueSliceMbrs\" attribute in the request, the corresponding
authorized UE-Slice-MBR(s) encoded as \"ueSliceMbrs\" attribute;
e) if the feature \"AMInfluence\" is supported, the PCF for the UE determines
that the access and mobility policies may be influenced by the traffic of PDU
session(s) and local operator policies indicate that the PCF for the UE shall
subscribe with the PCF for the PDU session for established/terminated PDU
session(s) event notifications via the AMF and the SMF, the PCF for the UE
information within the \"pcfUeInfo\" attribute, and the DNN and S-NSSAI of the
concerned PDU session(s) within the \"matchPdus\" attribute. The \"pcfUeInfo\"
attribute shall include the PCF for the UE callback URI via which the PCF(s)
for the PDU session shall send notifications about the related PDU session(s)
established/terminated events within the \"callbackUri\" attribute, and if
available, the associated PCF for the UE instance ID, PCF set ID, and the
level of SBA binding within the \"bindingInfo\" attribute;
f) if the feature \"5GAccessStratumTime\" is supported and the PCF receives
the access stratum time distribution parameters from the TSCTSF as defined in
3GPP TS 29.534 [26], the 5G access stratum time distribution parameters
encoded as \"asTimeDisParam\" attribute as defined in clause 4.2.2.3.6; and/or
> g) if the \"NetSliceUsageCtrl\" feature is supported and the PCF determines
> that one or more S-NSSAI(s) of the UE\'s Allowed NSSAI is/are on-demand
> S-NSSAI(s) and subject to network slice usage control, the network slice
> usage control information (e.g. slice deregistration inactivity timer)
> within the \"sliceUsgCtrlInfoSets\" attribute as specified in clause
> 4.2.2.3.7;
NOTE 3: In this release of the specification, network slice usage control
information provisioning by the PCF is not supported in roaming scenarios.
\- optionally one or several of the following Policy Control Request
Trigger(s) encoded as \"triggers\" attribute (see clause 4.2.3.2):
a) Location change (tracking area);
b) Change of UE presence in PRA;
c) if the \"SliceSupport\" feature, the \"DNNReplacementControl\" feature
and/or the \"NetSliceRepl\" feature is supported, change of Allowed NSSAI;
d) if the \"DNNReplacementControl\" feature is supported, change of SMF
selection information; and
e) if the \"EneNA\" feature is supported, change of NWDAF data;
f) if the \"TargetNSSAI\" feature is supported, Generation of Target NSSAI;
g) if the \"NetSliceRepl\" feature is supported, S-NSSAI Replacement;
h) if the \"PartNetSliceSupport\" feature and/or the \"NetSliceRepl\" feature
is supported, Change of the Partially Allowed NSSAI;
i) if the \"PartNetSliceSupport\" feature is supported, Change of the the
S-NSSAI(s) rejected partially in the RA, Change of the rejected S-NSSAI(s) in
the RA and/or Change of the Pending NSSAI;
\- if the Policy Control Request Trigger \"Change of UE presence in PRA\" is
provided, the presence reporting areas for which reporting is required encoded
as \"pras\" attribute;
NOTE 4: If the PCF uses a Presence Reporting Area identifier referring to a
Set of Core Network predefined Presence Reporting Areas as defined in 3GPP TS
23.501 [2], the PCF includes the identifier of this Presence Reporting Area
set within the \"praId\" attribute.
\- if the Policy Control Request Trigger \"Change of SMF selection
information\" is provided, the SMF selection information representing the
conditions upon which the AMF shall request a DNN replacement (see clause
4.2.2.3.4) encoded as \"smfSelInfo\" attribute; and
\- if the Policy Control Request Trigger \"Generation of Target NSSAI\" is
provided, the RFSP Index associated with the Target NSSAI encoded as
\"targetRfsp\" attribute;
> and
\- if errors occur when processing the HTTP POST request, apply error handling
procedures as specified in clause 5.7 and according to the following
provisions:
\- if the user information received within the \"supi\" attribute is unknown,
the PCF shall reject the request and include in an HTTP \"400 Bad Request\"
response message the \"cause\" attribute of the ProblemDetails data structure
set to \"USER_UNKNOWN\";
\- if the PCF is, due to incomplete, erroneous or missing information in the
request, not able to provision an AM policy decision, the PCF may reject the
request and include in an HTTP \"400 Bad Request\" response message the
\"cause\" attribute of the ProblemDetails data structure set to
\"ERROR_REQUEST_PARAMETERS\"; and
\- if the PCF rejects the AM policy association establishment, the NF service
consumer shall apply the policy retrieved from the UDM if available;
otherwise, the NF service consumer shall apply the operator configured policy.
If the PCF received a GUAMI, the PCF may subscribe to GUAMI changes using the
AMFStatusChange service operation of the Namf_Communication service specified
in 3GPP TS 29.518 [14], and it may use the Nnrf_NFDiscovery Service specified
in 3GPP TS 29.510 [13] (using the obtained GUAMI and possibly service name) to
query the other AMFs within the AMF set.
If the PCF received a \"traceReq\" attribute, it shall perform trace
procedures as defined in 3GPP TS 32.422 [18].
If the PCF received the list of NWDAF instance IDs used for the UE and their
associated Analytic IDs within the \"nwdafDatas\" attribute, the PCF may
select those NWDAF instances as described in 3GPP TS 29.513 [7].
The PCF may retrieve AF requirements on Access and Mobility policies from the
UDR as specified in 3GPP TS 29.519 [17] and consider them for determining the
Access and Mobility policies to be provisioned.
#### 4.2.2.2 Void
##### 4.2.2.2.0 Void
##### 4.2.2.2.1 Void
##### 4.2.2.2.2 Void
#### 4.2.2.3 AMF Access and Mobility Policy
##### 4.2.2.3.1 Service Area Restriction
If service area restrictions are enabled, the Service Area Restriction
information is encoded using the \"ServiceAreaRestriction\" data type defined
in 3GPP TS 29.571 [11] and consists of:
\- a limited allowed area represented as:
a) the maximum number of allowed TAs that can be traversed encoded as
\"maxNumOfTAs\" attribute; or
b) both of:
(i) a list of allowed Tracking Area Identities (TAIs) encoded as \"tacs\"
attributes within the \"areas\" attribute; and
(ii) the \"restrictionType\" attribute set to \"ALLOWED_AREAS\"; or
c) both a) and b) above;
\- or a limited allowed area represented as:
a) the maximum number of allowed TAs that can be traversed encoded as
\"maxNumOfTAsForNotAllowedAreas\" attribute; or
b) all of:
(i) a list of not allowed Tracking Area Identities (TAIs) encoded as \"tacs\"
attributes within the \"areas\" attribute; and
(ii) the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\"; and
(iii) the maximum number of allowed TAs that can be traversed encoded as
\"maxNumOfTAsForNotAllowedAreas\" attribute;
\- or a not allowed area represented as:
a) a list of not allowed Tracking Area Identities (TAIs) encoded as \"tacs\"
attributes within the \"areas\" attribute; and
b) the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\".
When the \"restrictionType\" attribute is set to \"NOT_ALLOWED_AREAS\", the
\"maxNumOfTAs\" attribute shall not be present.
When the \"restrictionType\" attribute is set to \"ALLOWED_AREAS\", the
\"maxNumOfTAsForNotAllowedAreas\" attribute shall not be present.
When for a limited allowed area both, \"maxNumOfTAs\" and \"areas\" attributes
are present, the \"maxNumOfTAs\" attribute represents the upper limit of the
limited allowed area. The AMF may add any not yet visited tracking areas to
the allowed area represented by the \"areas\" attribute until the total number
of TAs reaches the \"maxNumOfTAs\" attribute value.
NOTE 1: The \"maxNumOfTAs\" attribute value represents the maximum number of
TAs of the limited allowed area. When \"maxNumOfTAs\" attribute value is lower
than the number of TAs in the \"areas\" attribute it represents the maximum
number of TAs allowed inside the limited allowed area defined by the TAs
contained in the \"areas\" attribute. When the \"maxNumOfTAs\" attribute value
is higher than the number of TAs in the \"areas\" attribute it represents that
additional TAs up to the \"maxNumOfTAs\" attribute value can be dynamically
added to the area defined by the TAs contained in the \"areas\" attribute.
When for a limited allowed area the following three attributes are present:
\- \"maxNumOfTAsForNotAllowedAreas\" attribute; and
\- the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\"; and
\- the \"areas\" attribute,
the \"maxNumOfTAsForNotAllowedAreas\" attribute represents the maximum number
of TAs allowed in a limited allowed area outside the not allowed area
represented in the \"areas\" attribute. The limited allowed area is
dynamically calculated by the AMF, and the TAs outside of the dynamically
calculated limited allowed area become not allowed TAs.
NOTE 2: Both, the \"maxNumOfTAsForNotAllowedAreas\" attribute and the
\"maxNumOfTAs\" attribute, when present in a \"ServiceAreaRestriction\" data
type instance that does not include the \"areas\" attribute and the
\"restrictionType\" attribute, represent a maximum number of allowed TAs in a
limited allowed area dynamically calculated by the AMF.
When the authorized service area restrictions result in an unlimited set of
allowed tracking areas, the PCF shall include:
\- an empty \"servAreaRes\" attribute; or
\- the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\" and an empty
\"areas\" attribute.
When the authorized service area restrictions result in an unlimited set of
not-allowed tracking areas, the PCF shall include the \"restrictionType\"
attribute set to \"ALLOWED_AREAS\" and an empty \"areas\" attribute.
NOTE 3: The \"maxNumOfTAs\" attribute and the \"maxNumOfTAs\" attribute are
not used when the authorized service area restrictions result in an unlimited
set of allowed or an unlimited set of not-allowed tracking areas.
##### 4.2.2.3.2 RFSP Index
The RFSP Index is an index referring to a UE information used locally by the
Access Network in order to apply specific radio resource management
strategies. It shall be encoded using the RfspIndex data type defined in 3GPP
TS 29.571 [11].
If the feature \"TargetNSSAI\" is supported and when the PCF receives the
Target NSSAI from the NF service consumer, the PCF shall, if the Policy
Control Request Trigger \"Generation of Target NSSAI\" is provisioned in the
response, additionally provide the RFSP Index associated with the Target
NSSAI.
In order for the PCF to determine the RFSP Index value that will be
authorized, the PCF shall be configured with a mapping between the RAT Type
and/or frequency value and the RFSP Index.
NOTE 1: The RFSP index value that will be authorized is determined based on
operator policies that take into consideration e.g. accumulated usage,
analytics information related to load level information per network slice
instance, UE communication, user data congestion or service experience, etc.
The PCF may determine an RFSP Index value that indicates that the EPC/E-UTRAN
access is prioritized over 5GS access. In this case, if the feature
\"RFSPValidityTime\" is supported, the PCF may, based on operator policy, send
to the AMF a validity time associated to the provided RFSP Index within the
\"rfspValTime\" attribute. When the AMF determines to use the RFSP Index
received from the PCF, the AMF provides to the MME the validity time of the
RFSP Index, if received. The validity time indicates the time for which the
RFSP Index will be used in the MME after 5GS to EPS mobility, as specified in
clause 4.11.1.5.8 of 3GPP TS 23.502 [3].
> NOTE 2: The RFSP validity time is used by the MME to allow the UE to stay in
> EPS for a period of time and avoid the potential ping-pong issue from 5GS
> and EPS (i.e., 5GS keeps sending the UE to EPS based on authorized RFSP
> Index from PCF, and the EPS keeps sending the UE back to 5GS immediately
> based on the subscribed RFSP Index).
Upon reception of the authorized RFSP index, the NF service consumer (e.g.
AMF) shall choose the RFSP Index in use as described in 3GPP TS 23.501 [2]
clause 5.3.4.3.1.
##### 4.2.2.3.3 UE-AMBR
The UE-AMBR limits the aggregate bit rate that can be expected to be provided
across all Non-GBR QoS Flows of a UE. It shall be encoded using the Ambr data
type defined in 3GPP TS 29.571 [11].
##### 4.2.2.3.4 SMF Selection Management
If the \"DNNReplacementControl\" feature is supported, when SMF Selection
Management is enabled, the SMF selection information is encoded using the
\"SmfSelectionData\" data type, which consists of:
\- the conditions upon which the AMF shall request to the PCF the replacement
of SMF selection data, which may include:
a) an indication of whether the AMF shall request DNN replacement when the UE
requested an unsupported DNN during PDU session establishment encoded in the
\"unsuppDnn\" attribute; and/or
b) a list of candidate DNNs for replacement encoded in the \"candidates\" map,
where:
i) the key of the map is the S-NSSAI; and
ii) each entry of the map is of \"CandidateForReplacement\" data type, which:
\- shall include the S-NSSAI encoded in the \"snssai\" attribute; and
\- may include the list of candidate DNNs for the S-NSSAI encoded in the
\"dnns\" attribute;
NOTE 1: The S-NSSAIs included in the map are S-NSSAIs of the allowed NSSAI
and/or the Partially Allowed NSSAI, if the \"PartNetSliceSupport\" feature
and/or \"NetSliceRepl\" feature is/are supported, valid in the serving
network. The PCF keeps updated information of the Allowed NSSAI valid in the
serving network by subscribing to the policy control request trigger Change of
Allowed NSSAI of the served UE.
NOTE 2: When the PCF provides URSP rules (see 3GPP TS 29.525 [29]) to the UE
with new DNN information and in order to provide uniform service experience
for UEs from earlier Releases, the candidate DNNs for replacement will
consider those included within the traffic descriptors in addition to those
included as part of the Route Selection Descriptor(s) of the URSP rule(s)
provided to the UE.
\- and,
a) when included within the Npcf_AMPolicyControl_Update request, the UE
requested DNN and S-NSSAI at PDU session establishment that matched an entry
of the \"candidates\" map, encoded in the \"dnn\" attribute and in the
\"snssai\" attribute respectively, and the mapping to the home S-NSSAI encoded
in the \"mappingSnssai\" attribute if available; and
b) when included within the Npcf_AMPolicyControl_Update response, the PCF
selected DNN encoded in the \"dnn\" attribute;
NOTE 2: The PCF can select the same DNN and S-NSSAI as the UE requested DNN
and S-NSSAI. When the PCF returns an unsupported DNN, the AMF applies internal
policies to reject the PDU session establishment.
When the \"dnns\" attribute is omitted in an entry of the \"candidates\" map
it represents that the AMF shall invoke the procedure for any UE request
matching the S-NSSAI value included in the \"snssai\" attribute.
##### 4.2.2.3.5 UE-Slice-MBR
The UE-Slice-MBR limits the aggregate bit rate that can be expected to be
provided across all GBR and Non-GBR QoS Flows of a UE for an S-NSSAI. It shall
be encoded using the SliceMbr data type defined in 3GPP TS 29.571 [11].
##### 4.2.2.3.6 5G access stratum time distribution
If the feature \"5GAccessStratumTime\" is supported and the PCF receives the
access stratum time distribution parameters from the TSCTSF as defined in 3GPP
TS 29.534 [26], the 5G access stratum time distribution parameters are encoded
using the \"asTimeDisParam\" attribute of the \"AsTimeDistributionParam\" data
type, which consists of:
\- an indication of whether the 5G access stratum time distribution is enabled
encoded in the \"asTimeDistInd\" attribute if applicable;
\- the Uu Time synchronization error budget encoded in the \"uuErrorBudget\"
attribute if applicable, and
\- the clock quality detail level in the \"clkQltDetLvl\" attribute and
optionally the clock quality accpetance criteria in the \"clkQltAcptCri\"
attribute if applicable, and if the feature \"NetTimeSyncStatus\" is
supported.
If the PCF receives multiple time synchronization error budgets for a given
UE, the PCF shall encode the most stringent error budget within the
\"uuErrorBudget\" attribute.
If the PCF receives the removal of the access stratum time distribution
parameters from the TSCTSF as defined in 3GPP TS 29.534 [26] and there are no
other access stratum time distribution parameters from other requests for the
same UE, the PCF shall provide the \"asTimeDisParam\" attribute set to NULL.
##### 4.2.2.3.7 Network slice usage control
When the PCF receives a Npcf_AMPolicyControl_Create request and the
\"NetSliceUsageCtrl\" feature is supported, the PCF may check whether any of
the UE\'s S-NSSAI(s) are subject to network slice usage control. If it is the
case, the PCF may provision in the Npcf_AMPolicyControl_Create response the
network slice usage control information (e.g., slice deregistration inactivity
timer) within the \"sliceUsgCtrlInfoSets\" attribute of the PolicyAssociation
data structure for each on-demand S-NSSAI of the UE\'s Allowed NSSAI, as
specified in clause 5.15.15.3 of 3GPP TS 23.501 [2].
NOTE: In this release of the specification, network slice usage control
information provisioning by the PCF is not supported in roaming scenarios.
4.2.2.3.8 Alternative S-NSSAI
When the \"NetSliceRepl\" feature is supported, the Alternative S-NSSAI
indicates a compatible S-NSSAI for an S-NSSAI of the Allowed NSSAI and/or the
Partially Allowed NSSAI that the AMF uses as a replacement when the S-NSSAI is
not available or congested. It shall be encoded using the SnssaiReplaceInfo
data type as defined in 3GPP TS 29.571 [11].
### 4.2.3 Npcf_AMPolicyControl_Update Service Operation
#### 4.2.3.1 General
The procedure in the present clause is applicable when the NF service consumer
modifies an existing AM policy association (including the case where the AMF
is relocated and the new AMF selects the old PCF to maintain the policy
association and to update the Notification URI).
Figure 4.2.3.1-1 illustrates the update of a policy association.
Figure 4.2.3.1-1: Update of a policy association
The AMF as NF service consumer invokes this procedure when a policy control
request trigger (see clause 4.2.3.2) occurs. When a policy control request
trigger that does not require the subscription as defined in table 5.6.3.3-1
(e.g. Service Area Restriction change trigger) occurs, the NF service consumer
(e.g. AMF) shall always invoke the procedure. When a policy control request
trigger requires the subscription as defined in table 5.6.3.3-1 (e.g. location
change trigger) occurs, the NF service consumer shall only invoke the
procedure if the PCF has subscribed to that event trigger.
If an AMF knows by implementation specific means that the UE context has been
transferred to an AMF with another GUAMI within the AMF set, it may also
invoke this procedure to update the Notification URI and the GUAMI.
NOTE 1: Either the old or the new AMF can invoke this procedure.
During the AMF relocation, if the new AMF received the resource URI of the
individual AM Policy from the old AMF and selects the old PCF, the new AMF
shall also invoke this procedure to update the Notification URI and the GUAMI.
The new AMF may also update the alternate or backup IP addresses. If the
feature \"FeatureRenegotation\" is supported, the new AMF may perform feature
renegotiation, as described in clause 4.2.3.4.
To request policies from the PCF, to update the Notification URI, to
renegotiate features, to update the trace control configuration and/or to
request the termination of trace, the NF service consumer (e.g. AMF) shall
request the update of the AM Policy Association by providing the relevant
parameters about the UE context by sending an HTTP POST request with
\"{apiRoot}/npcf-am-policy-control/v1/policies/{polAssoId}/update\" as
Resource URI and the PolicyAssociationUpdateRequest data structure as request
body that shall include:
\- at least one of the following:
1\. a new Notification URI encoded in the \"notificationUri\" attribute;
2\. observed Policy Control Request Trigger(s) (see clause 4.2.3.2) encoded as
\"triggers\" attribute;
3\. if a Service Area restriction change occurred, the Service Area
Restrictions (see clause 4.2.2.3.1) as obtained from the UDM encoded as
\"servAreaRes\" attribute;
4\. if a RFSP index change occurred, the RFSP index (see clause 4.2.2.3.2) as
obtained from the UDM encoded as \"rfsp\" attribute;
5\. if a UE location change occurred and the Policy Control Request Trigger
\"Location change\" was provided, the UE location encoded as \"userLoc\"
attribute;
6\. if the Policy Control Request Trigger \"Change of UE presence in PRA\" was
provided, the current presence status of the UE for the presence reporting
areas for which reporting was requested, if not previously provided, or the
presence reporting areas for which reporting was requested and the status has
changed encoded as \"praStatuses\" attribute;
NOTE 2: If the PCF included the identifer of a Core Network predefined
Presence Reporting Area Set within the \"praId\" attribute during the
subscription to changes of UE presence in PRA, the AMF only provides the
presence reporting area information corresponding to the concerned individual
Presence Reporting Area Identifier(s) within the Set. The \"praId\" attribute
within each returned \"PresenceInfo\" data type hence includes the identifier
of the concerned individual Presence Reporting Area.
7\. if the trace control configuration needs to be updated, trace control and
configuration parameters information encoded as \"traceReq\" attribute;
8\. if trace needs to be terminated, the \"traceReq\" attribute set to the
Null value;
9\. if the \"SliceSupport\" feature, the \"DNNReplacementControl\" feature
and/or the \"NetSliceRepl\" feature is supported, the UE is registered via
3GPP access, the Allowed NSSAI changed, and the Policy Control Request Trigger
\"Change of Allowed NSSAI\" was provided, then the Allowed NSSAI encoded in
the \"allowedSnssais\" attribute;
10\. for AMF relocation scenarios, if available, alternate or backup IPv4
Address(es) where to send Notifications encoded as \"altNotifIpv4Addrs\"
attribute;
11\. for AMF relocation scenarios, if available, alternate or backup IPv6
Address(es) where to send Notifications encoded as \"altNotifIpv6Addrs\"
attribute;
12\. for AMF relocation scenarios, if available, alternate or backup FQDN(s)
where to send Notifications encoded as \"altNotifFqdns\" attribute;
13\. for AMF relocation scenarios, the GUAMI encoded as \"guami\" attribute;
NOTE 3: An alternate NF service consumer than the one that requested the
generation of the subscription resource can send the request. For instance, an
AMF as service consumer can change.
14\. if the feature \"UE-AMBR_Authorization\" is supported, and a subscribed
UE-AMBR change occurred, the UE-AMBR (see clause 4.2.2.3.3) as obtained from
the UDM encoded as \"ueAmbr\" attribute;
15\. if the feature \"DNNReplacementControl\" is supported, DNN replacement
applies and the Policy Control Request Trigger \"Change of SMF selection
information\" was provided, the \"smfSelInfo\" attribute including:
\- the UE requested DNN in the \"dnn\" attribute; and
\- the UE requested S-NSSAI in the \"snssai\" attribute and, if available, the
corresponding mapped home S-NSSAI in the \"mappingSnssai\" attribute;
when:
\- the UE requested an unsupported DNN and the \"unsuppDnn\" attribute is set
to \"true\"; or
\- the UE requested DNN and S-NSSAI matched one of the S-NSSAI and DNN
provided in the \"candidates\" attribute;
16\. if feature \"DNNReplacementControl\" is supported, the UE is registered
via 3GPP access, the Allowed NSSAI changed and/or the mapping of a S-NSSAI of
the Allowed NSSAI to the corresponding S-NSSAI of the HPLMN changed, and the
Policy Control Request Trigger \"Change of allowed NSSAI\" was provided, then
the mapping of each S-NSSAI of the Allowed NSSAI to the corresponding S-NSSAI
of the HPLMN encoded in the \"mappingSnssais\" attribute;
NOTE 4: When the feature \"DNNReplacementControl\" is supported, the AMF
applies DNN replacement for non-roaming scenarios and LBO. For a PDU session
with home routed roaming, whether to perform DNN replacement is based on
operator agreement.
17\. if feature \"UE-Slice-MBR_Authorization\" is supported, and a subscribed
UE-Slice-MBR change occurred, the subscribed UE-Slice-MBR for each subscribed
S-NSSAI of the home PLMN mapping to a S-NSSAI of the serving PLMN (see clause
4.2.2.3.5) encoded in the \"ueSliceMbrs\" attribute;
18\. if the feature \"EneNA\" is supported and an NWDAF information change
occurred, the list of NWDAF instance IDs used for the UE and their associated
Analytic ID(s) with the updated values within the \"nwdafDatas\" attribute;
NOTE 5: The NF service consumer provides the complete updated list of NWDAF
instance IDs and associated Analytic ID(s) used for the UE. If all NWDAF data
is deleted an empty list is included.
19\. if the feature \"TargetNSSAI\" is supported, a new Target NSSAI is
generated and the Policy Control Request Trigger \"Generation of Target
NSSAI\" is provided, the new generated Target NSSAI encoded in the
\"targetSnssais\" attribute;
> 20\. if the \"NetSliceRepl\" feature is supported, the AMF is aware that one
> or more S-NSSAI(s) become unavailable but cannot determine the corresponding
> Alternative S-NSSAI(s) and the Policy Control Request Trigger
> \"SLICE_REPLACE_MGMT\" was provided, these unavailable S-NSSAI(s) encoded
> within the \"unavailSnssais\" attribute; and
21\. if \"PartNetSliceSupport\" feature and/or \"NetSliceRepl\" feature is/are
supported, the UE is registered via 3GPP access and:
\- if the Partially Allowed NSSAI changed and the Policy Control Request
Trigger \"Change of the Partially Allowed NSSAI\" was subscribed by the PCF,
then the updated Partially Allowed NSSAI encoded via the \"partAllowedNssai\"
attribute; and
\- if the Partially Allowed NSSAI changed and/or the mapping of one or more of
the S-NSSAI(s) of the Partially Allowed NSSAI to the corresponding HPLMN
S-NSSAI changed, and the Policy Control Request Trigger \"Change of the
Partially Allowed NSSAI\" was subscribed by the PCF, then the mapping of each
S-NSSAI of the Partially Allowed NSSAI to the corresponding HPLMN S-NSSAI
encoded within the \"mappingSnssais\" attribute;
22\. if the \"PartNetSliceSupport\" feature is supported, the UE is registered
via 3GPP access and:
\- if the list of the S-NSSAI(s) partially rejected in the RA changed and the
Policy Control Request Trigger \"Change of the S-NSSAI(s) rejected partially
in the RA\" was subscribed by the PCF, then the updated list of the S-NSSAI(s)
partially rejected in the RA encoded via the \"snssaisPartRejected\"
attribute;
\- if the list of the Rejected S-NSSAI(s) in the RA changed and the Policy
Control Request Trigger \"Change of the Rejected S-NSSAI(s)\" was subscribed
by the PCF, then the updated list of the Rejected S-NSSAI(s) in the RA encoded
via the \"rejectedSnssais\" attribute; and
\- if the Pending NSSAI changed and the Policy Control Request Trigger
\"Change of the Pending NSSAI\" was subscribed by the PCF, then the updated
Pending NSSAI encoded via the \"pendingNssai\" attribute.
Upon the reception of the HTTP POST request, the PCF shall:
\- update the corresponding individual AM Policy resource based on the
information provided by the NF service consumer;
\- determine the applicable policy based on local policy;
\- for the successful case, send a HTTP \"200 OK\" response with the
PolicyUpdate data type as body with possible updates for that applicable
policy and Policy Control Request Trigger(s) encoded as described in clause
4.2.3.3 and according to the following provisions:
a) if the PCF received the \"servAreaRes\" attribute in the request, Service
Area Restrictions encoded as \"servAreaRes\" attribute;
b) if the PCF received the \"rfsp\" attribute in the request, RAT Frequency
Selection Priority (RFSP) Index encoded as \"rfsp\" attribute. If the feature
\"RFSPValidityTime\" is supported and the PCF determines to provide an RFSP
index value that indicates EPC/E-UTRAN access is prioritized over 5GS access,
the PCF may provide, based on operator policies, a validity time for the RFSP
index value within the \"rfspValTime\" attribute;
c) if the feature \"UE-AMBR_Authorization\" is supported and the PCF received
the \"ueAmbr\" attribute in the request, UE-AMBR encoded as \"ueAmbr\"
attribute;
d) if the PCF received the \"smfSelInfo\" attribute in the request, the
\"smfSelInfo\" attribute encoding the PCF selected DNN in the \"dnn\"
attribute corresponding to the S-NSSAI received in the \"snssai\" attribute;
NOTE 6: A PolicyUpdate data structure with only mandatory attribute(s) is
included in the \"200 OK\" response when the PCF decides not to update the
policies.
e) if the feature \"UE-Slice-MBR_Authorization\" is supported and the PCF
received the \"ueSliceMbrs\" attribute in the request, the corresponding
authorized UE-Slice-MBR(s) encoded as \"ueSliceMbrs\" attribute;
f) if the feature \"TargetNSSAI\" is supported and the PCF received the
\"targetSnssais\" attribute in the request, the RFSP Index associated with the
Target NSSAI encoded as \"targetRfsp\" attribute;
g) if the \"NetSliceUsageCtrl\" feature is supported, the updated network
slice usage control information (e.g., updated slice deregistration inactivity
timer) within the \"sliceUsgCtrlInfoSets\" attribute for each on-demand
S-NSSAI of the UE\'s Allowed NSSAI; and/or
NOTE 7: In this release of the specification, network slice usage control
information provisioning/update/removal by the PCF is not supported in roaming
scenarios.
h) if the \"NetSliceRepl\" feature is supported and the PCF received the
\"unavailSnssais\" attribute in the request, the Alternative S-NSSAI(s)
associated with the received S-NSSAI(s) within the \"snssaiReplInfos\"
attribute containing these unavailable S-NSSAI(s), and for each unavailable
S-NSSAI, the corresponding status information set to \"UNAVAILABLE\" and the
corresponding Alternative S-NSSAI;
\- if errors occur when processing the HTTP POST request, apply error handling
procedures as specified in clause 5.7 and according to the following
provisions:
a) if the PCF is, due to incomplete, erroneous or missing information in the
request, not able to provision an AM policy decision, the PCF may reject the
request and include in an HTTP \"400 Bad Request\" response message the
\"cause\" attribute of the ProblemDetails data structure set to
\"ERROR_REQUEST_PARAMETERS\".
b) if the \"ES3XX\" feature is supported and the PCF (service) instance has
changed, the PCF may respond with an HTTP 3xx redirect response pointing to a
new PCF (service) instance as defined in clause 6.5.3.3 of 3GPP TS 29.500 [5].
If the PCF received a \"traceReq\" attribute, it shall perform trace
procedures as defined in 3GPP TS 32.422 [18].
If the AMF received the request of removal of Service Area Restrictions and/or
RFSP Index and/or UE-AMBR and/or UE-Slice-MBR(s) from the UDM, the AMF shall
remove the authorized Service Area Restrictions and/or RFSP Index and/or UE-
AMBR and/or UE-Slice-MBR(s) provisioned by the PCF and apply the configured
Service Area Restrictions and/or RFSP Index and/or UE-AMBR and/or UE-Slice-
MBR(s) at the AMF without interacting with the PCF.
If feature \"DNNReplacementControl\" is supported and the AMF received the
update of the SMF selection information within the \"smfSelInfo\" attribute in
the response, the AMF shall apply the updated SMF selection information to the
new PDU Sessions only, i.e. already established PDU Sessions are not affected.
If the feature \"AMInfluence\" is supported, the PCF determines that the
access and mobility policies may be influenced by the traffic of a PDU
session(s), e.g. based on the received policy control request trigger(s), and
local operator policies indicate the PCF for the UE shall subscribe with the
PCF for the PDU session for established/terminated PDU session(s) event
notifications, the PCF shall provision/update the AMF with the PCF for the UE
information within the \"pcfUeInfo\" attribute and the complete list of
S-NSSAI and DNN combinations within the \"matchPdus\" attribute. The AMF shall
then update the affected established PDU sesssion(s), by forwarding the
received PCF for the UE information for the PDU session(s) matching the new
S-NSSAI and DNN combination(s) and removing the previously provided PCF for
the UE information for the PDU session(s) matching the removed S-NSSAI and DNN
combination(s) as defined in 3GPP TS 29.502 [31].
When the feature \"AMInfluence\" is supported, and the SBA binding indication
information for the PCF instance changes, the PCF may update the previously
provided information in the AMF. The AMF shall apply the updated PCF callback
information to the new PDU Sessions only, i.e., already established PDU
sessions are not affected.
If the PCF received a new GUAMI, the PCF may subscribe to GUAMI changes using
the AMFStatusChange service operation of the Namf_Communication service
specified in 3GPP TS 29.518 [14], and it may use the Nnrf_NFDiscovery Service
specified in 3GPP TS 29.510 [13] (using the obtained GUAMI and possibly
service name) to query the other AMFs within the AMF set.
If the PCF received a \"servAreaRes\" attribute which resulted to a change of
the Service Area Restrictions, it shall send notifications to any NF Service
Consumer(s) (e.g. AF) that have subscribed to the related event by using the
Npcf_AMPolicyAuthorization service (see TS 29.534 [26]) and/or the
Npcf_EventExposure service ((see TS 29.523 [28]).
If the PCF received a new list of NWDAF instance IDs used for the UE and their
associated Analytic IDs within the \"nwdafDatas\" attribute, the PCF may
select those NWDAF instances based on this new list as described in 3GPP TS
29.513 [7].
#### 4.2.3.2 Policy Control Request Triggers
The following Policy Control Request Triggers are defined (see clause 6.1.2.5
of 3GPP TS 23.503 [4]):
\- \"LOC_CH\", i.e. location change (tracking area): the tracking area of the
UE has changed;
\- \"PRA_CH\", i.e. change of UE presence in PRA: the UE is entering/leaving a
Presence Reporting Area, this includes reporting the initial status at the
time the request for reports is initiated;
\- \"SERV_AREA _CH\", i.e. Service Area Restriction change: the UDM notifies
the AMF that the subscribed service area restriction information has changed;
\- \"RFSP_CH\", i.e. RFSP index change: the UDM notifies the AMF that the
subscribed RFSP index has changed;
\- \"ALLOWED_NSSAI_CH\", i.e. change of allowed NSSAI of the served UE;
NOTE 1: The \"ALLOWED_NSSAI_CH\" trigger only applies if the \"SliceSupport\"
feature, the \"DNNReplacementControl\" feature and/or \"NetSliceRepl\" feature
is/are supported.
\- \"UE_AMBR_CH\", i.e. UE-AMBR change: the UDM notifies the AMF that the
subscribed UE-AMBR has changed;
NOTE 2: The \"UE_AMBR_CH\" trigger only applies if the \"UE-
AMBR_Authorization\" feature is supported.
\- \"SMF_SELECT_CH\", i.e. SMF selection information change: UE request for an
unsupported DNN or UE request for a DNN within the list of DNN candidates for
replacement per S-NSSAI;
NOTE 3: The \"SMF_SELECT_CH\" trigger only applies if the
\"DNNReplacementControl\" feature is supported and \"ALLOWED_NSSAI_CH\"
trigger is also subscribed.
\- \"ACCESS_TYPE_CH\", i.e. the access type change: the AMF notifies that the
access type and the RAT type combinations available in the AMF for a UE with
simultaneous 3GPP and non-3GPP connectivity has changed;
NOTE 4: The \"ACCESS_TYPE_CH\" trigger only applies if the
\"MultipleAccessTypes\" feature is supported as specified in Annex B.
\- \"UE_SLICE_MBR_CH\", i.e. UE-Slice-MBR change: the AMF notifies for any
changes in the subscribed UE-Slice-MBR for each subscribed S-NSSAI of the home
PLMN mapping to a S-NSSAI of the serving PLMN;
NOTE 5: The \"UE_SLICE_MBR_CH\" trigger only applies if the \"UE-Slice-
MBR_Authorization\" feature is supported.
\- \"NWDAF_DATA_CH\", i.e. NWDAF Data change:the list of NWDAF Instance IDs
and/or their associated Analytics IDs consumed by the AMF have changed;
NOTE 6: The \"NWDAF_DATA_CH\" trigger only applies if the \"EneNA\" feature is
supported.
\- \"TARGET_NSSAI\", i.e. Generation of Target NSSAI: the NF service consumer
notifies that the Target NSSAI was generated;
NOTE 7: The \"TARGET_NSSAI\" trigger only applies if the \"TargetNSSAI\"
feature is supported.
\- \"SLICE_REPLACE_MGMT\", i.e. Network slice replacement is needed for one or
more S-NSSAI(s) and the NF service consumer (i.e., AMF) cannot determine the
Alternative S-NSSAI(s) for these S-NSSAI(s); and
NOTE 8: The \"SLICE_REPLACE_MGMT\" trigger only applies if the
\"NetSliceRepl\" feature is supported.
\- \"PARTIALLY_ALLOWED_NSSAI_CH\", i.e. change of the Partially Allowed NSSAI
of the served UE;
NOTE 9: The \"PARTIALLY_ALLOWED_NSSAI_CH\" trigger only applies if the
\"PartNetSliceSupport\" feature and/or \"NetSliceRepl\" feature is/are
supported.
\- \"SNSSAIS_PARTIALLY_REJECTED_CH\", i.e. change of the S-NSSAI(s) partially
rejected in the RA for the served UE;
\- \"REJECTED_SNSSAIS_CH\", i.e. change of the Rejected S-NSSAI(s) in the RA
for the served UE;
\- \"PENDING_NSSAI_CH\", i.e. change of the Pending NSSAI of the served UE;
NOTE 10: The \"SNSSAIS_PARTIALLY_REJECTED_CH\", \"REJECTED_SNSSAIS_CH\" and
\"PENDING_NSSAI_CH\" triggers only apply if the \"PartNetSliceSupport\"
feature is supported.
#### 4.2.3.3 Encoding of updated policy
Updated policies shall be encoded within the PolicyUpdate data type that may
include:
\- AMF Access and Mobility Policy (see clause 4.2.2.3) Service Area
Restriction encoded as \"servAreaRes\" attribute;
\- AMF Access and Mobility Policy (see clause 4.2.2.3) RFSP Index encoded as
\"rfsp\" attribute and RFSP Index associated with the Target NSSAI encoded as
\"targetRfsp\" attribute;
\- if the \"UE-AMBR_Authorization\" feature is supported, AMF Access and
Mobility Policy (see clause 4.2.2.3) UE-AMBR encoded as \"ueAmbr\" attribute;
\- if the \"UE-Slice-MBR_Authorization\" feature is supported, AMF Access and
Mobility Policy (see clause 4.2.2.3) UE-Slice-MBR(s) encoded as
\"ueSliceMbrs\" attribute;
> NOTE: PCF can stop applying policies to already provided attributes under
> PolicyUpdate data type. In that case, PCF will modify those attributes by
> e.g. providing configured values. How the PCF gets those values is out of
> specification.
\- if the \"DNNReplacementControl\" feature is supported, AMF Access and
Mobility Policy (see clause 4.2.2.3) SMF selection information encoded as
\"smfSelInfo\" attribute;
\- if the \"NetSliceRepl\" feature is supported, network slice replacement
information within the \"snssaiReplInfos\" attribute;
\- updated Policy Control Request Trigger(s) (see clause 4.2.3.2) encoded as
\"triggers\" attribute i.e.:
1) either a new complete list of applicable Policy Control Request Trigger(s)
including one or several of the following:
a) Location change (tracking area);
b) Change of UE presence in PRA;
c) if the \"SliceSupport\" feature, the \"DNNReplacementControl\" feature
and/or the \"NetSliceRepl\" feature is supported, change of Allowed NSSAI;
d) if the \"DNNReplacementControl\" feature is supported, SMF selection
information change;
e) if the \"NetSliceRepl\" feature is supported, network slice replacement
information change;
f) if the \"PartNetSliceSupport\" feature and/or \"NetSliceRepl\" feature
is/are supported, Change of the Partially Allowed NSSAI; and/or
g) if the \"PartNetSliceSupport\" feature is supported, Change of the
S-NSSAI(s) rejected partially in the RA, Change of the Rejected S-NSSAI(s)
and/or Change of the Pending NSSAI;
2) a \"NULL\" value to request the removal of all previously installed Policy
Control Request Trigger(s); and
\- if the Policy Control Request Trigger \"Change of UE presence in PRA\" is
provided or if that trigger was already set but the requested presence
reporting areas need to be changed, the presence reporting areas for which
reporting is required encoded as \"pras\" attribute encoded as follows:
a) A new entry shall be added by supplying a new identifier as key and the
corresponding PresenceInfo data type instance with complete contents as value
as an entry within the map.
b) An existing entry shall be modified by supplying the existing identifier as
key and the PresenceInfo data type instance with complete contents as value as
an entry within the map.
c) An existing entry shall be deleted by supplying the existing identifier as
key and \"NULL\" as value as an entry within the map.
d) For an unmodified entry, no entry needs to be provided within the map.
\- if the Policy Control Request Trigger \"Change of UE presence in PRA\" is
removed, the presence reporting areas for which reporting was required shall
be removed by providing the \"pras\" attribute with \"NULL\" as value.;
\- if the Policy Control Request Trigger \"SMF selection information change\"
is provided or if that trigger was already set and the indication of DNN
replacement when the requested DNN is unknown needs to be set or changed, the
\"unsuppDnn\" attribute within \"smfSelInfo\" attribute shall be provided
including the appropriate value.
\- if the Policy Control Request Trigger \"SMF selection information change\"
is provided or if that trigger was already set and the list of candidate DNNs
for replacement needs to be set or changed, the \"candidates\" attribute
within the \"smfSelInfo\" attribute is encoded as follows:
a) A new entry shall be added by supplying a new S-NSSAI as key and the
corresponding CandidateForReplacement data type instance with complete
contents as value as an entry within the map.
b) An existing entry shall be modified by supplying the existing S-NSSAI as
key and the CandidateForReplacement data type instance with complete contents
as value as an entry within the map.
c) An existing entry shall be deleted by supplying the existing S-NSSAI as key
and \"NULL\" as value as an entry within the map.
d) For an unmodified entry, no entry needs to be provided within the map.
e) The complete list of candidate DNNs for which reporting is required shall
be removed by providing the \"candidates\" attribute with \"NULL\" as value.
\- if the Policy Control Request Trigger \"SMF selection information change\"
is removed, the candidate DNNs for which reporting was required shall be
removed by providing the \"smfSelInfo\" attribute with \"NULL\" as value; and
\- if the \"NetSliceUsageCtrl\" feature is supported, the PCF may check
whether any of the S-NSSAI(s) of the UE\'s Allowed NSSAI are on-demand
S-NSSAI(s) and subject to network slice usage control. If it is the case, the
PCF may provision/update/remove in the Npcf_SMPolicyControl_Update response
the network slice usage control information (e.g., slice deregistration
inactivity timer) within the \"sliceUsgCtrlInfoSets\" attribute of the
PolicyUpdate data structure for one or more of these S-NSSAI(s).
#### 4.2.3.4 Feature renegotiation during AMF relocation
During the AMF relocation, if the new AMF received the resource URI of the
individual AM Policy from the old AMF and selects the old PCF, and the feature
\"FeatureRenegotation\" is supported, the new AMF shall invoke the update of
the AM policy association as described in clause 4.2.3.1 with the following
differences:
> \- The new AMF shall include in the PolicyAssociationUpdateRequest data
> structure sent in the HTTP POST request:
>
> a. the \"FEAT_RENEG\" policy control request trigger within the \"triggers\"
> attribute;
>
> b. the \"suppFeat\" attribute with the AMF supported features; and
>
> c. for each supported feature, the required feature information elements as
> specified in clause 4.2.2.1, if applicable.
>
> NOTE 1: When the new AMF received from the old AMF the subscription to
> policy control request trigger(s) that depend on feature control, and a
> policy control request trigger is met, the required feature information
> included in the update request contains the report of the met policy control
> request trigger within the \"triggers\" attribute and the associated
> information in the corresponding attribute, when applicable.
>
> \- Upon reception of the HTTP POST request, the PCF shall update the
> \"Individual AM Policy Association\" resource, determine the applicable
> policy and include in the PolicyUpdate data structure sent in the HTTP POST
> response:
>
> NOTE 2: The determination of the applicable policy can consider the features
> supported by the new AMF.
>
> a. the \"suppFeat\" attribute with the negotiated features; and
>
> b. the complete \"Individual AM Policy Association\" resource
> representation, as specified in clause clause 4.2.2.1.
### 4.2.4 Npcf_AMPolicyControl_UpdateNotify Service Operation
#### 4.2.4.1 General
The PCF may decide to update policies or to request the termination of the
policy association and shall then use an Npcf_AMPolicyControl_UpdateNotify
service operation.
The following procedures using the Npcf_AMPolicyControl_UpdateNotify service
operation are supported:
\- policy update notification; and
\- request for termination of the policy association.
#### 4.2.4.2 Policy update notification
Figure 4.2.4.2-1 illustrates the policy update notification.
Figure 4.2.4.2-1: policy update notification
The PCF may decide to update policy control request trigger(s) and/or Access
and Mobility policies related to an Individual AM Policy Association, e.g., in
response to information provided to the PCF via external interfaces, (e.g.,
the Npcf_AMPolicyAuthorization service (see 3GPP TS 29.534 [26]),
notifications provided by the Npcf_PolicyAuthorization service (see 3GPP TS
29.514 [25]), notifications received from UDR about new or updated AF
requirements on Access and Mobility polices (see 3GPP TS 29.519 [17]), or in
response to an internal trigger within the PCF, e.g., the activation of a
pending policy counter provided via the Nchf_SpendingLimitControl Service (see
3GPP TS 29.594 [33]). The PCF shall send for this purpose an HTTP POST request
with \"{notificationUri}/update\" as URI (where the Notification URI was
previously supplied by the NF service consumer) and the PolicyUpdate data
structure as request body encoded as described in clause 4.2.3.3.
Upon the reception of the HTTP POST request, the NF service consumer shall
enforce the received updated policy.
In case of a successful update notification:
\- if the feature \"ImmediateReport\" is supported and the PCF provisioned the
policy control request triggers related to access type change, PRA change,
Allowed NSSAI change, Partially Allowed NSSAI change, change of the S-NSSAI(s)
rejected partially in the RA, change of the Rejected S-NSSAI(s) in the RA,
Pending NSSAI change and/or location change, a \"200 OK\" response code and a
response body with the corresponding available information in the
\"AmRequestedValueRep\" data structure shall be returned in the response;
\- otherwise, a \"204 No Content\" response code shall be returned in the
response.
If errors occur when processing the HTTP POST request, the NF service consumer
shall send an HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the NF service consumer determines
the received HTTP POST request needs to be redirected, the NF service consumer
shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS
29.500 [5].
If the AMF as NF service consumer is not able to handle the notification but
knows by implementation specific means that another AMF is able to handle the
notification, it shall reply with an HTTP \"307 Temporary redirect\" response
pointing to the URI of the new AMF. If the AMF is not able to handle the
notification but another unknown AMF could possibly handle the notification,
it shall reply with an HTTP \"404 Not found\" error response.
If the PCF receives a \"307 Temporary redirect\" response, the PCF shall
resend the failed policy update notification request using the received URI in
the Location header field as Notification URI. Subsequent policy update
notifications, triggered after the failed one, shall be sent to the
Notification URI provided by the NF service consumer during the corresponding
policy association creation/update.
If the PCF becomes aware that a new AMF is requiring notifications (e.g. via
the \"404 Not found\" response, via Namf_Communication service AMFStatusChange
Notifications, see 3GPP TS 29.518 [14], or via link level failures), and the
PCF knows alternate or backup IPv4, IPv6 Addess(es) or FQDN(s) where to send
Notifications (e.g. via \"altNotifIpv4Addrs\", \"altNotifIpv6Addrs\" or
\"altNotifFqdns\" attributes received when the policy association was created,
via AMFStatusChange Notifications or via the Nnrf_NFDiscovery Service
specified in 3GPP TS 29.510 [13] (using the service name and GUAMI obtained
during the creation of the subscription) to discover the other AMFs within the
AMF set), the PCF shall exchange the authority part of the corresponding
Notification URI with one of those addresses and shall use that URI in any
subsequent communication.
If the PCF received a \"404 Not found\" response, the PCF should resend the
failed policy update notification request to that URI.
If the feature \"DNNReplacementControl\" is supported and the AMF received the
update of the SMF selection information within the \"smfSelInfo\" attribute in
the request, the AMF shall apply the updated SMF selection information to the
new PDU Sessions only, i.e. already established PDU Sessions are not affected.
If the feature \"AMInfluence\" is supported, the PCF determines that the
access and mobility policies may be influenced by the traffic of a PDU
session(s) based on an AF request, UDR notification or other internal
policies, and local operator policies indicate the PCF for the UE shall
subscribe with the PCF for the PDU session for established/terminated PDU
session(s) event notifications, the PCF for the UE shall provision/update the
AMF with the PCF for the UE information within the \"pcfUeInfo\" attribute and
the complete list of S-NSSAI and DNN combinations within the \"matchPdus\"
attribute. The AMF shall update the affected established PDU sesssions,
forwarding the received PCF for the UE information for the PDU session(s)
matching the new S-NSSAI and DNN combination(s), and removing the previously
provided PCF for the UE information for the PDU session(s) matching the
removed S-NSSAI and DNN combination(s) as defined in 3GPP TS 29.502 [31].
When the feature \"AMInfluence\" is supported, and the SBA binding indication
information for the PCF instance changes, the PCF may update the previously
provided information in the AMF. The AMF shall apply the updated PCF callback
information to the new PDU Sessions only, i.e., already established PDU
sessions are not affected.
NOTE 1: Alternatively, the PCF for the UE can subscribe with the BSF to
notifications about the PCF binding information creation and/or termination
for the affected PDU session(s) as described in 3GPP TS 29.521 [30].
If the PCF changed the Service Area Restrictions as part of the policy update,
it shall send notifications to any NF Service Consumer(s) (e.g. AF) that have
subscribed to the related event by using the Npcf_AMPolicyAuthorization
service (see TS 29.534 [26]) and/or the Npcf_EventExposure service (see TS
29.523 [28]).
If the feature \"5GAccessStratumTime\" is supported and the PCF receives the
access stratum time distribution parameters or removal of the access stratum
time distribution parameters from the TSCTSF as defined in 3GPP TS 29.534
[26], the PCF may provision, update or remove the 5G access stratum time
distribution parameters by provisioning the \"asTimeDisParam\" attribute as
defined in clause 4.2.2.3.6. The AMF shall provision the 5G access stratum
time distribution parameters to the NG-RAN when receiving it from the PCF.
If the feature \"RFSPValidityTime\" is supported and the PCF determines to
modify the RFSP index value in use to indicate EPC/E-UTRAN access is
prioritized over 5GS access, the PCF shall send to the AMF the RFSP Index
value within the \"rfsp\" attribute and may provide, based on operator
policies, the validity time for the indicated RFSP Index value within the
\"rfspValTime\" attribute, as defined in clause 4.2.2.3.2.
If the feature \"NetTimeSyncStatus\" is supported and the PCF receives the
clock quality detail level and optionally the clock quality acceptance
criteria parameters from the TSCTSF as defined in 3GPP TS 29.534 [26], the PCF
may update the clock quality detail level and if applicable the clock quality
acceptance criteria parameters by provisioning the \"asTimeDisParam\"
attribute as defined in clause 4.2.2.3.6. The AMF shall provision the clock
quality detail level and the clock quality acceptance criteria parameters to
the NG-RAN when receiving it from the PCF.
If the \"NetSliceUsageCtrl\" feature is supported, the PCF may check whether
any of the S-NSSAI(s) of the UE\'s Allowed NSSAI are subject to network slice
usage control. If it is the case, the PCF may provision/update/remove in the
Npcf_AMPolicyControl_UpdateNotify request the network slice usage control
information (e.g. slice deregistration inactivity timer) within the
\"sliceUsgCtrlInfoSets\" attribute of the PolicyUpdate data structure for one
or more of these S-NSSAI(s).
NOTE 2: In this release of the specification, network slice usage control
information provisioning/update/removal by the PCF is not supported in roaming
scenarios.
If the \"NetSliceRepl\" feature is supported, then:
> \- when the PCF detects that one or more S-NSSAI(s) of the UE\'s Allowed
> NSSAI and/or Partially Allowed NSSAI become(s) unavailable for a UE based on
> an OAM trigger, a received NWDAF notification or PCF internal triggers, the
> PCF may indicate this to the AMF by providing the \"snssaiReplInfos\"
> attribute containing these impacted S-NSSAI(s), and for each impacted
> S-NSSAI, the corresponding status information set to \"UNAVAILABLE\" and
> optionally an Alternative S-NSSAI; and
>
> \- when the PCF becomes aware that one or more S-NSSAI(s) of the UE\'s
> Allowed NSSAI and/or Partially Allowed NSSAI become(s) available again, the
> PCF may indicate this to the AMF also by providing the \"snssaiReplInfos\"
> attribute containing these impacted S-NSSAI(s), and for each impacted
> S-NSSAI, the corresponding status information set to \"AVAILABLE\".
>
> NOTE 3: The PCF can provide within the \"snssaiReplInfos\" attribute both
> information about S-NSSAI(s) that are currently unavailable and information
> about S-NSSAI(s) that are available again.
#### 4.2.4.3 Request for termination of the policy association
Figure 4.2.4.3-1 illustrates the request for a termination of the policy
association.
Figure 4.2.4.3-1: request for a termination of the policy association
The PCF may request the termination of the policy association and shall then
send an HTTP POST request with \"{notificationUri}/terminate\" as URI (where
the Notification URI was previously supplied by the NF service consumer) and
the TerminationNotification data structure as request body that shall include:
\- the policy association ID encoded as \"polAssoId\" attribute; and
\- the cause why the PCF requests the termination of the policy association
encoded as \"cause\" attribute.
Upon the reception of the HTTP POST request, the NF service consumer shall:
\- either send a HTTP \"204 No Content\" response for the successful
processing of the HTTP POST request or an appropriate failure response; and
\- if errors occur when processing the HTTP POST request, send an HTTP error
response as specified in clause 5.7; or
\- if the feature \"ES3XX\" is supported, and the NF service consumer
determines the received HTTP POST request needs to be redirected, send an HTTP
redirect response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].
After the successful processing of the HTTP POST request, the NF service
consumer shall remove the context related to the policy association but still
apply the provisioned AM policies to the UE and invoke the
Npcf_AMPolicyControl_Delete Service Operation defined in clause 4.2.5 to
terminate the policy association.
If the AMF as NF service consumer is not able to handle the notification but
knows by implementation specific means that another AMF is able to handle the
notification, it shall reply with an HTTP \"307 Temporary redirect\" response
pointing to the URI of the new AMF. If the AMF is not able to handle the
notification but another unknown AMF could possibly handle the notification,
it shall reply with an HTTP \"404 Not found\" error response.
If the PCF receives a \"307 Temporary redirect\" response, the PCF shall
resend the failed request for termination of the policy association using the
received URI in the Location header field as Notification URI.
If the PCF becomes aware that a new AMF is requiring notifications (e.g. via
the \"404 Not found\" response, via Namf_Communication service AMFStatusChange
Notifications, see 3GPP TS TS 29.518 [14], or via link level failures), and
the PCF knows alternate or backup IPv4, IPv6 Address(es) or FQDN(s) where to
send Notifications (e.g. via \"altNotifIpv4Addrs\", \"altNotifIpv6Addrs\" or
\"altNotifFqdns\" attributes received when the policy association was created,
via AMFStatusChange Notifications or via the Nnrf_NFDiscovery Service
specified in 3GPP TS 29.510 [13] (using the service name and GUAMI obtained
during the creation of the subscription) to discover the other AMFs within the
AMF set), the PCF shall exchange the authority part of the corresponding
Notification URI with one of those addresses and shall resend the failed
request for termination of the policy association to that URI.
If the PCF received a \"404 Not found\" response, the PCF should resend the
failed request for termination of the policy association to that URI.
### 4.2.5 Npcf_AMPolicyControl_Delete Service Operation
Figure 4.2.5-1 illustrates the deletion of a policy association.
Figure 4.2.5-1: Deletion of a policy association
The AMF as NF service consumer requests that the policy association is deleted
when the corresponding UE context is terminated, e.g. during UE de-
registration from the network, or when the UE moves from 5GS to EPS and the UE
is not connected to the 5GC over a non-3GPP access.
During the AMF relocation, the old AMF shall invoke this procedure when:
\- the resource URI of the \"Individual AM Policy Association\" resource is
not transferred to the new AMF; or
\- the new AMF informs the old AMF that the \"Individual AM Policy
Association\" resource is not being reused (i.e. the old PCF is not being
reused).
To request that the policy association is deleted, the NF service consumer
(e.g. AMF) shall send an HTTP DELETE request with \"{apiRoot}/npcf-am-policy-
control/v1/policies/{polAssoId}\" as Resource URI.
Upon the reception of the HTTP DELETE request, the PCF shall:
\- delete the policy association;
\- send either an HTTP \"204 No Content\" response indicating the success of
the deletion or an appropriate failure response; and
\- if errors occur when processing the HTTP DELETE request, send an HTTP error
response as specified in clause 5.7; or
\- if the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP DELETE request needs to be redirected, send an HTTP redirect response as
specified in clause 6.10.9 of 3GPP TS 29.500 [5].
# 5 Npcf_AMPolicyControl API
## 5.1 Introduction
The Access and Mobility Policy Control Service shall use the
Npcf_AMPolicyControl API.
The API URI of the Npcf_AMPolicyControl API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the PCF shall have the Resource URI structure defined in clause 4.4.1 of 3GPP
TS 29.501 [6], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [6].
\- The \ shall be \"npcf-am-policy-control\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [8], shall be used as specified in clause 5 of 3GPP TS
29.500 [5].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [5].
The OpenAPI [10] specification of HTTP messages and content bodies for the
Npcf_AMPolicyControl is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [5] The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [21].
### 5.2.3 HTTP custom headers
The Npcf_AMPolicyControl API shall support HTTP custom header fields specified
in clause 5.2.3.2 of 3GPP TS 29.500 [5] and may support HTTP custom header
fields specified in clause 5.2.3.3 of 3GPP TS 29.500 [5].
In this Release of the specification, no specific custom headers are defined
for the Npcf_AMPolicyControl API.
## 5.3 Resources
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 5.3.1-1 depicts the resource URIs structure for the
Npcf_AMPolicyControl API.
### 5.3.1 Resource Structure
Figure 5.3.1-1: Resource URI structure of the Npcf_AMPolicyControl API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description AM
Policy Associations /policies POST Create a new Individual AM Policy
Association resource. Individual AM Policy Association /policies/{polAssoId}
GET Read the Individual AM Policy Association resource. DELETE Delete the
Individual AM Policy Association resource. /policies/{polAssoId}/update update
(POST) Report observed event trigger and obtain updated policies.
* * *
### 5.3.2 Resource: AM Policy Associations
#### 5.3.2.1 Description
This resource represents a collection of Individual AM policy Associations.
#### 5.3.2.2 Resource definition
Resource URI: **{apiRoot}/npcf-am-policy-control/v1/policies**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description PolicyAssociationRequest M 1 Input
parameters for the creation of a policy association.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Poli | M | 1 | 201 Created | Policy | | cyAssociation | | | | association | | | | | | was created | | | | | | and policies | | | | | | are being | | | | | | provided. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | (NOTE 2) | | roblemDetails | | | Request | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/npcf-am-
policy-control/v1/policies/{polAssoId}
* * *
### 5.3.3 Resource: Individual AM Policy Association
#### 5.3.3.1 Description
This document resource represents an individual AM policy association.
#### 5.3.3.2 Resource definition
Resource URI: **{apiRoot}/npcf-am-policy-control/v1/policies/{polAssoId}**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1. polAssoId string
Identifier of a policy association.
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Poli | M | 1 | 200 OK | | | cyAssociation | | | | | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | retrieval. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | retrieval. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (refer to | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [5]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
##### 5.3.3.3.2 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The policy | | | | | Content | association | | | | | | was | | | | | | successfully | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | deletion. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | deletion. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (refer to | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [5]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 5.3.3.4 Resource Custom Operations
##### 5.3.3.4.1 Overview
Table 5.3.3.4.1-1: Custom operations
* * *
Operation Name Custom operation URI Mapped HTTP method Description Update
/policies/{polAssoId}/update POST Report observed event trigger and obtain
updated policies.
* * *
##### 5.3.3.4.2 Operation: Update
###### 5.3.3.4.2.1 Description
The update custom operation allows an NF service consumer to report the
occurrence of one or more policy control request trigger(s) and to obtain
related updated policies.
###### 5.3.3.4.2.2 Operation Definition
This operation shall support the request data structures specified in table
5.3.3.4.2.2-1 and the response data structure and response codes specified in
table 5.3.3.4.2.2-2.
Table 5.3.3.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description PolicyAssociationUpdateRequest M 1
Describes the observed policy control request trigger(s).
* * *
Table 5.3.3.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PolicyUpdate | M | 1 | 200 OK | Describes | | | | | | updated | | | | | | policies. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | modification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual AM | | | | | | policy | | | | | | modification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | (NOTE 2) | | roblemDetails | | | Request | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (refer to | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [5]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
## 5.4 Custom Operations without associated resources
None.
## 5.5 Notifications
### 5.5.1 General
Table 5.5.1-1: Notifications overview
* * *
Notification Callback URI HTTP method or custom operation Description (service
operation) Policy Update Notification {notificationUri}/update update (POST)
Policy Update Notification. Request for termination of the policy association
{notificationUri}/terminate terminate (POST) Request for termination of the
policy association.
* * *
### 5.5.2 Policy Update Notification
#### 5.5.2.1 Description
This notification is used by the PCF to provide updates of access and mobility
policies to the NF service consumer.
#### 5.5.2.2 Operation Definition
This operation shall support the request data structures specified in table
5.5.2.2-1 and the response data structure and response codes specified in
table 5.5.2.2-2.
Table 5.5.2.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description PolicyUpdate M 1 Updated policies.
* * *
Table 5.5.2.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The policies | | | | | Content | were | | | | | | successfully | | | | | | updated. | +---------------+---+-------------+---------------+---------------+ | AmRequ | O | 0..1 | 200 OK | The current | | estedValueRep | | | | applicable | | | | | | values | | | | | | corresponding | | | | | | to the policy | | | | | | control | | | | | | request | | | | | | trigger are | | | | | | reported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | policy | | | | | | notification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | policy | | | | | | notification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | (NOTE 2) | | roblemDetails | | | Request | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The NF | | roblemDetails | | | | service | | | | | | consumer can | | | | | | use this | | | | | | response when | | | | | | the | | | | | | notification | | | | | | can be sent | | | | | | to another | | | | | | unknown host. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (refer to | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [5]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.2-3: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | String | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. May | | | | | | be included if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +-----------------+-----------+---+-------------+-----------------+
Table 5.5.2.2-4: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | String | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | String | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 5.5.3 Request for termination of the policy association
#### 5.5.3.1 Description
This notification is used by the PCF to request the termination of a policy
association.
#### 5.5.3.2 Operation Definition
This operation shall support the request data structures specified in table
5.5.3.2-1 and the response data structure and response codes specified in
table 5.5.3.2-2.
Table 5.5.3.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description TerminationNotification M 1 Request to
terminate the policy association.
* * *
Table 5.5.3.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The request | | | | | Content | for policy | | | | | | association | | | | | | termination | | | | | | was received. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 temporary | Temporary | | irectResponse | | | redirect | redirection, | | | | | | during AM | | | | | | policy | | | | | | notification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | policy | | | | | | notification. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The NF | | roblemDetails | | | | service | | | | | | consumer can | | | | | | use this | | | | | | response when | | | | | | the | | | | | | notification | | | | | | can be sent | | | | | | to another | | | | | | unknown host. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (refer to | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [5]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.3.2-3: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. May | | | | | | be included if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +-----------------+-----------+---+-------------+-----------------+
Table 5.5.3.2-4: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [5]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Npcf_AMPolicyControl
service based interface protocol.
Table 5.6.1-1: Npcf_AMPolicyControl specific Data Types
* * *
Data type Section defined Description Applicability AsTimeDistributionParam
5.6.2.10 Contains the 5G access stratum time distribution parameters.
5GAccessStratumTime CandidateForReplacement 5.6.2.8 Contains the list of
candidate DNNs for replacement per S-NSSAI. DNNReplacementControl
PolicyAssociation 5.6.2.2 Description of a policy association that is returned
by the PCF when a policy Association is created, or read.  
PolicyAssociationReleaseCause 5.6.3.4 The cause why the PCF requests the
termination of the policy association.  
PolicyAssociationRequest 5.6.2.3 Information that NF service consumer provides
when requesting the creation of a policy association.  
PolicyAssociationUpdateRequest 5.6.2.4 Information that NF service consumer
provides when requesting the update of a policy association.  
PolicyUpdate 5.6.2.5 Updated policies that the PCF provides in a notification
or in the reply to an Update Request.  
RequestTrigger 5.6.3.3 Enumeration of possible Request Triggers.  
SliceUsgCtrlInfo 5.6.2.12 Represents network slice usage control related
information. NetSliceUsageCtrl SmfSelectionData 5.6.2.7 Includes the SMF
Selection information that may be replaced by the PCF. DNNReplacementControl
SnssaiPartRejected 5.6.2.13 Represents a S-NSSAI partially rejected in the RA.
PartNetSliceSupport TerminationNotification 5.6.2.6 Request to terminate a
policy Association that the PCF provides in a notification.  
AmRequestedValueRep 5.6.2.9 Contains the current applicable values
corresponding to the policy control request triggers. ImmediateReport
UeSliceMbr 5.6.2.11 Contains a UE-Slice-MBR and the related information. UE-
Slice-MBR_Authorization
* * *
Table 5.6.1-2 specifies data types re-used by the Npcf_AMPolicyControl service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Npcf_AMPolicyControl service based interface.
Table 5.6.1-2: Npcf_AMPolicyControl re-used Data Types
* * *
Data type Reference Comments Applicability AccessType 3GPP TS 29.571 [11]
Represents an access type.  
Ambr 3GPP TS 29.571 [11] Aggregated Maximum Bit Rate. UE-AMBR_Authorization
ClockQualityAcceptanceCriterion 3GPP TS 29.571 [11] Indicates the Clock
quality acceptance criteria. NetTimeSyncStatus ClockQualityDetailLevel 3GPP TS
29.571 [11] Contains the clock quality detail level information, that
indicates whether it consists of clock quality metrics or acceptance
indication. NetTimeSyncStatus Dnn 3GPP TS 29.571 [11] DNN
DNNReplacementControl DurationSec 3GPP TS 29.571 [11] Duration in number of
seconds. RFSPValidityTime DurationSecRm 3GPP TS 29.571 [11] This data type is
defined in the same way as the \"DurationSec\" data type, but with the OpenAPI
\"nullable: true\" property.  
Fqdn 3GPP TS 29.571 [11] FQDN  
Gpsi 3GPP TS 29.571 [11] Generic Public Subscription Identifier  
GroupId 3GPP TS 29.571 [11] Represents the identifier of a group of UEs.  
Guami 3GPP TS 29.571 [11] Globally Unique AMF Identifier  
Ipv4Addr 3GPP TS 29.571 [11] Represents an IPv4 address.  
Ipv6Addr 3GPP TS 29.571 [11] Represents an IPv6 address.  
MappingOfSnssai 3GPP TS 29.531 [24] Identifies the mapping of an S-NSSAI of
the Allowed NSSAI to the corresponding S-NSSAI of the HPLMN.
DNNReplacementControl SnssaiReplaceInfo 3GPP TS 29.571 [11] Represents the
network slice replacement information. NetSliceRepl NwdafData 3GPP TS 29.512
[27] Indicates an NWDAF instance ID used for the UE and its associated
Analytics ID(s) consumed by the NF service consumer. EneNA
PartiallyAllowedSnssai 3GPP TS 29.571 [11] Represents the S-NSSAI that is
partially allowed in the Registration Area, NetSliceRepl PcfUeCallbackInfo
3GPP TS 29.571 [11] Contains the PCF for the UE information necessary for the
PCF for the PDU session to send Establishment and Termination event.
AMInfluence PduSessionInfo 3GPP TS 29.571 [11] Contains information related to
a PDU session. AMInfluence Pei 3GPP TS 29.571 [11] Permanent Equipment
Identifier  
PlmnIdNid 3GPP TS 29.571 [11] Identifies the network: PLMN Identifier or the
SNPN Identifier (the PLMN Identifier and the NID).  
PresenceInfo 3GPP TS 29.571 [11] Presence reporting area information  
PresenceInfoRm 3GPP TS 29.571 [11] This data type is defined in the same way
as the \"PresenceInfo\" data type, but with the OpenAPI \"nullable: true\"
property.  
ProblemDetails 3GPP TS 29.571 [11] Represents error related information.  
RedirectResponse 3GPP TS 29.571 [11] Contains redirection related information.
ES3XX Uri 3GPP TS 29.571 [11] Represents a URI.  
UserLocation 3GPP TS 29.571 [11] Represents user location information.  
RatType 3GPP TS 29.571 [11] Represent a RAT type.  
RfspIndex 3GPP TS 29.571 [11] Represent an RFSP Index.  
ServiceAreaRestriction 3GPP TS 29.571 [11] Within the areas attribute, only
tracking area codes shall be included.  
ServiceName 3GPP TS 29.510 [13] Name of the service instance.  
SliceMbr 3GPP TS 29.571 [11] Contains the slice Maximum Bit Rate including UL
and DL. UE-Slice-MBR_Authorization Snssai 3GPP TS 29.571 [11] Identifies an
S-NSSAI. SliceSupport, TargetNSSAI, DNNReplacementControl Supi 3GPP TS 29.571
[11] Subscription Permanent Identifier  
SupportedFeatures 3GPP TS 29.571 [11] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
TimeZone 3GPP TS 29.571 [11] Represents a time zone.  
TraceData 3GPP TS 29.571 [11] Represents trace data.  
UintegerRm 3GPP TS 29.571 [11] Indicates Unsigned Integer, but with the
OpenAPI \"nullable: true\" property. 5GAccessStratumTime
WirelineServiceAreaRestriction 3GPP TS 29.571 [11] Represent wireline service
area restriction information. WirelineWirelessConvergence
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type PolicyAssociation
Table 5.6.2.2-1: Definition of type PolicyAssociation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | request | Policy | O | 0..1 | The | | | | Associati | | | in | | | | onRequest | | | formation | | | | | | | provided | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | when | | | | | | | r | | | | | | | equesting | | | | | | | the | | | | | | | creation | | | | | | | of a | | | | | | | policy | | | | | | | as | | | | | | | sociation | | +-----------+-----------+---+-----------+-----------+-----------+ | triggers | arr | O | 1..N | Request | (NOTE 1) | | | ay(Reques | | | Triggers | | | | tTrigger) | | | that the | | | | | | | PCF | | | | | | | su | | | | | | | bscribes. | | | | | | | Only | | | | | | | values | | | | | | | \"L | | | | | | | OC_CH\", | | | | | | | \"ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \"TARGET\ | | | | | | | _NSSAI\", | | | | | | | \" | | | | | | | SMF_SELE | | | | | | | CT_CH\", | | | | | | | \"P | | | | | | | RA_CH\", | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\", | | | | | | | \"SLICE | | | | | | | _REPLACE | | | | | | | _MGMT\", | | | | | | | \"PARTI | | | | | | | ALLY_ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \ | | | | | | | "SNSSAIS\ | | | | | | | _PARTIALL | | | | | | | Y_REJECT | | | | | | | ED_CH\", | | | | | | | \"REJEC | | | | | | | TED_SNSS | | | | | | | AIS_CH\" | | | | | | | and | | | | | | | \"PE | | | | | | | NDING_NS | | | | | | | SAI_CH\" | | | | | | | are | | | | | | | p | | | | | | | ermitted. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Serv | O | 0..1 | Service | | | rvAreaRes | iceAreaRe | | | Area | | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF | | +-----------+-----------+---+-----------+-----------+-----------+ | wlSe | Wir | O | 0..1 | Wireline | WirelineW | | rvAreaRes | elineServ | | | Service | irelessCo | | | iceAreaRe | | | Area | nvergence | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF | | +-----------+-----------+---+-----------+-----------+-----------+ | rfsp | RfspIndex | O | 0..1 | RFSP | | | | | | | Index as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | rf | Du | O | 0..1 | Validity | RFSPVal | | spValTime | rationSec | | | time of | idityTime | | | | | | the RFSP | | | | | | | Index | | | | | | | value | | | | | | | provided | | | | | | | within | | | | | | | the | | | | | | | \"rfsp\" | | | | | | | a | | | | | | | ttribute. | | | | | | | | | | | | | | It may be | | | | | | | provided | | | | | | | when the | | | | | | | RFSP | | | | | | | Index | | | | | | | value | | | | | | | within | | | | | | | the | | | | | | | \"rfsp\" | | | | | | | attribute | | | | | | | indicates | | | | | | | the | | | | | | | EP | | | | | | | C/E-UTRAN | | | | | | | access is | | | | | | | pr | | | | | | | ioritized | | | | | | | over 5GS | | | | | | | access. | | | | | | | It shall | | | | | | | be | | | | | | | omitted | | | | | | | for other | | | | | | | RFSP | | | | | | | Index | | | | | | | values. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | RfspIndex | C | 0..1 | RFSP | Ta | | argetRfsp | | | | Index | rgetNSSAI | | | | | | a | | | | | | | ssociated | | | | | | | with the | | | | | | | Target | | | | | | | NSSAI. It | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | Target | | | | | | | NSSAI was | | | | | | | received | | | | | | | in the | | | | | | | request | | | | | | | and the | | | | | | | trigger | | | | | | | \"TARGET | | | | | | | _NSSAI\" | | | | | | | is | | | | | | | provided. | | +-----------+-----------+---+-----------+-----------+-----------+ | pras | map(Pres | C | 1..N | If the | | | | enceInfo) | | | Trigger | | | | | | | \" | | | | | | | PRA_CH\" | | | | | | | is | | | | | | | provided, | | | | | | | the | | | | | | | presence | | | | | | | reporting | | | | | | | area(s) | | | | | | | for which | | | | | | | reporting | | | | | | | is | | | | | | | requested | | | | | | | shall be | | | | | | | provided. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | also be | | | | | | | the key | | | | | | | of the | | | | | | | map. The | | | | | | | \"presen | | | | | | | ceState\" | | | | | | | and the | | | | | | | \ | | | | | | | "addition | | | | | | | alPraId\" | | | | | | | a | | | | | | | ttributes | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall not | | | | | | | be | | | | | | | supplied. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | include | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of either | | | | | | | a | | | | | | | presence | | | | | | | reporting | | | | | | | area or a | | | | | | | presence | | | | | | | reporting | | | | | | | area set. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | SmfSele | O | 0..1 | If the | DNN | | mfSelInfo | ctionData | | | trigger | Replaceme | | | | | | \ | ntControl | | | | | | "SMF_SEL | | | | | | | ECT_CH\" | | | | | | | is | | | | | | | provided, | | | | | | | the | | | | | | | c | | | | | | | onditions | | | | | | | for SMF | | | | | | | selection | | | | | | | in | | | | | | | formation | | | | | | | rep | | | | | | | lacement, | | | | | | | as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF shall | | | | | | | be | | | | | | | provided. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueAmbr | Ambr | O | 0..1 | UE-AMBR | UE-A | | | | | | as part | MBR_Auth | | | | | | of the | orization | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | array(Ue | O | 1..N | One or | UE-Slice- | | SliceMbrs | SliceMbr) | | | more | MBR_Auth | | | | | | UE-Sli | orization | | | | | | ce-MBR(s) | | | | | | | for | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | of | | | | | | | serving | | | | | | | PLMN as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | pcfUeInfo | PcfUeCal | O | 0..1 | Contains | AM | | | lbackInfo | | | the PCF | Influence | | | | | | for the | | | | | | | UE | | | | | | | in | | | | | | | formation | | | | | | | necessary | | | | | | | for the | | | | | | | PCF for | | | | | | | the PDU | | | | | | | session | | | | | | | to send | | | | | | | esta | | | | | | | blished/t | | | | | | | erminated | | | | | | | events | | | | | | | noti | | | | | | | fications | | | | | | | to the | | | | | | | PCF for | | | | | | | the UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | matchPdus | arr | C | 1..N | Indicates | AM | | | ay(PduSes | | | the | Influence | | | sionInfo) | | | matched | | | | | | | PDU | | | | | | | s | | | | | | | ession(s) | | | | | | | for which | | | | | | | the PCF | | | | | | | for the | | | | | | | UE | | | | | | | in | | | | | | | formation | | | | | | | in the | | | | | | | \"pc | | | | | | | fUeInfo\" | | | | | | | attribute | | | | | | | shall be | | | | | | | forwarded | | | | | | | to the | | | | | | | SMF. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | \"pc | | | | | | | fUeInfo\" | | | | | | | attribute | | | | | | | is | | | | | | | present. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | asTim | AsTim | O | 0..1 | Contains | 5 | | eDisParam | eDistribu | | | the 5G | GAccessSt | | | tionParam | | | acess | ratumTime | | | | | | stratum | | | | | | | time | | | | | | | dis | | | | | | | tribution | | | | | | | pa | | | | | | | rameters. | | +-----------+-----------+---+-----------+-----------+-----------+ | sl | map | O | 1..N | R | NetSlice | | iceUsgCtr | (SliceUsg | | | epresents | UsageCtrl | | lInfoSets | CtrlInfo) | | | the | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the | | | | | | | on-demand | | | | | | | S-NSSAI | | | | | | | (within | | | | | | | the | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | of the | | | | | | | corr | | | | | | | esponding | | | | | | | map | | | | | | | value) to | | | | | | | which the | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | related. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | M | 1 | Indicates | | | | dFeatures | | | the | | | | | | | n | | | | | | | egotiated | | | | | | | supported | | | | | | | features. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | The | | | | | | | \"ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \"TARGET\ | | | | | | | _NSSAI\", | | | | | | | \" | | | | | | | SMF_SELE | | | | | | | CT_CH\", | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\", | | | | | | | \"SLICE | | | | | | | _REPLACE | | | | | | | _MGMT\", | | | | | | | \"PARTI | | | | | | | ALLY_ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \ | | | | | | | "SNSSAIS\ | | | | | | | _PARTIALL | | | | | | | Y_REJECT | | | | | | | ED_CH\", | | | | | | | \"REJEC | | | | | | | TED_SNSS | | | | | | | AIS_CH\" | | | | | | | and | | | | | | | \"PE | | | | | | | NDING_NS | | | | | | | SAI_CH\" | | | | | | | values in | | | | | | | the | | | | | | | \"t | | | | | | | riggers\" | | | | | | | attribute | | | | | | | apply | | | | | | | under | | | | | | | feature | | | | | | | control | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | clause | | | | | | | 4.2.3.2. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The DNN | | | | | | | encoded | | | | | | | within | | | | | | | the | | | | | | | PduSe | | | | | | | ssionInfo | | | | | | | e | | | | | | | lement(s) | | | | | | | of the | | | | | | | \"ma | | | | | | | tchPdus\" | | | | | | | array | | | | | | | contains | | | | | | | a full | | | | | | | DNN or | | | | | | | only the | | | | | | | DNN | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | based on | | | | | | | the DNN | | | | | | | provided | | | | | | | by the AF | | | | | | | to the | | | | | | | PCF in | | | | | | | the | | | | | | | Am | | | | | | | Influence | | | | | | | API, as | | | | | | | specified | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 29.52 | | | | | | | 2 [32]. | | | | | | | When the | | | | | | | DNN | | | | | | | contains | | | | | | | the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only, the | | | | | | | AMF shall | | | | | | | match a | | | | | | | PDU | | | | | | | session | | | | | | | for the | | | | | | | received | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and for | | | | | | | any value | | | | | | | of the | | | | | | | Operator | | | | | | | Id | | | | | | | entifier. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type PolicyAssociationRequest
Table 5.6.2.3-1: Definition of type PolicyAssociationRequest
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | notifi | Uri | M | 1 | I | | | cationUri | | | | dentifies | | | | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | Noti | | | | | | | fications | | | | | | | sent by | | | | | | | the PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv4Addrs | Ipv4Addr) | | | or backup | | | | | | | IPv4 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv6Addrs | Ipv6Addr) | | | or backup | | | | | | | IPv6 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altN | ar | O | 1..N | Alternate | | | otifFqdns | ray(Fqdn) | | | or backup | | | | | | | FQDN(s) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | M | 1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | Id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | C | 0..1 | Generic | | | | | | | Public | | | | | | | Sub | | | | | | | scription | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | a | A | C | 0..1 | The | | | ccessType | ccessType | | | Access | | | | | | | Type | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | ac | array(Ac | C | 1..N | The | M | | cessTypes | cessType) | | | Access | ultipleAc | | | | | | Types | cessTypes | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | pei | Pei | C | 0..1 | The | | | | | | | Permanent | | | | | | | Equipment | | | | | | | I | | | | | | | dentifier | | | | | | | of the | | | | | | | served | | | | | | | UE. Shall | | | | | | | be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | userLoc | Use | C | 0..1 | The | | | | rLocation | | | location | | | | | | | of the | | | | | | | served | | | | | | | UE. Shall | | | | | | | be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | timeZone | TimeZone | C | 0..1 | The time | | | | | | | zone | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | PlmnIdNid | C | 0..1 | The | | | rvingPlmn | | | | serving | | | | | | | network | | | | | | | (a PLMN | | | | | | | or an | | | | | | | SNPN) | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | For the | | | | | | | SNPN the | | | | | | | NID | | | | | | | together | | | | | | | with the | | | | | | | PLMN ID | | | | | | | i | | | | | | | dentifies | | | | | | | the SNPN. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | ratType | RatType | C | 0..1 | The 3GPP | | | | | | | RAT Type | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | ratTypes | array | C | 1..N | The 3GPP | M | | | (RatType) | | | and | ultipleAc | | | | | | non-3GPP | cessTypes | | | | | | RAT Types | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | groupIds | array | C | 1..N | List of | | | | (GroupId) | | | Internal | | | | | | | Group | | | | | | | Id | | | | | | | entifiers | | | | | | | of the | | | | | | | served | | | | | | | UE. Shall | | | | | | | be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Serv | C | 0..1 | Service | | | rvAreaRes | iceAreaRe | | | Area | | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | wlSe | Wir | O | 0..1 | Wireline | WirelineW | | rvAreaRes | elineServ | | | Service | irelessCo | | | iceAreaRe | | | Area | nvergence | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | +-----------+-----------+---+-----------+-----------+-----------+ | rfsp | RfspIndex | C | 0..1 | RFSP | | | | | | | Index as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueAmbr | Ambr | C | 0..1 | UE-AMBR | UE-A | | | | | | as part | MBR_Auth | | | | | | of the | orization | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | array(Ue | C | 1..N | The | UE-Slice- | | SliceMbrs | SliceMbr) | | | s | MBR_Auth | | | | | | ubscribed | orization | | | | | | UE- | | | | | | | Slice-MBR | | | | | | | for each | | | | | | | s | | | | | | | ubscribed | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | home PLMN | | | | | | | mapping | | | | | | | to a | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | serving | | | | | | | PLMN. | | | | | | | Shall be | | | | | | | provided | | | | | | | when | | | | | | | a | | | | | | | vailable. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | allow | arra | C | 1..N | R | Slic | | edSnssais | y(Snssai) | | | epresents | eSupport, | | | | | | the | DNNR | | | | | | Allowed | eplacemen | | | | | | NSSAI in | tControl, | | | | | | the 3GPP | Net | | | | | | access | SliceRepl | | | | | | and | | | | | | | includes | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN. It | | | | | | | shall be | | | | | | | included | | | | | | | if the | | | | | | | feature | | | | | | | \"Slice | | | | | | | Support\" | | | | | | | or the | | | | | | | feature | | | | | | | \"DNNRe | | | | | | | placement | | | | | | | Control\" | | | | | | | is | | | | | | | supported | | | | | | | in the | | | | | | | AMF. | | +-----------+-----------+---+-----------+-----------+-----------+ | partAll | map(Parti | O | 1..N | R | Pa | | owedNssai | allyAllow | | | epresents | rtNetSlic | | | edSnssai) | | | the | eSupport, | | | | | | Partially | Net | | | | | | Allowed | SliceRepl | | | | | | NSSAI. | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Part | | | | | | | iallyAllo | | | | | | | wedSnssai | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | map(S | O | 1..N | R | P | | nssaisPar | nssaiPart | | | epresents | artNetSli | | tRejected | Rejected) | | | the set | ceSupport | | | | | | of | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | partially | | | | | | | rejected | | | | | | | in the | | | | | | | RA. | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | SnssaiPar | | | | | | | tRejected | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | reject | arra | O | 1..N | R | P | | edSnssais | y(Snssai) | | | epresents | artNetSli | | | | | | the set | ceSupport | | | | | | of | | | | | | | Rejected | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | in the | | | | | | | RA. | | +-----------+-----------+---+-----------+-----------+-----------+ | pen | arra | O | 1..N | R | P | | dingNssai | y(Snssai) | | | epresents | artNetSli | | | | | | the | ceSupport | | | | | | Pending | | | | | | | NSSAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | targ | arra | C | 1..N | R | Ta | | etSnssais | y(Snssai) | | | epresents | rgetNSSAI | | | | | | the | | | | | | | Target | | | | | | | NSSAI. It | | | | | | | shall be | | | | | | | included | | | | | | | if | | | | | | | available | | | | | | | and the | | | | | | | feature | | | | | | | \"Targ | | | | | | | etNSSAI\" | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | mappi | arra | C | 1..N | If the | DNNR | | ngSnssais | y(Mapping | | | \"DNNRe | eplacemen | | | OfSnssai) | | | placement | tControl, | | | | | | Control\" | Pa | | | | | | feature | rtNetSlic | | | | | | and/or | eSupport, | | | | | | \"NetSl | Net | | | | | | iceRepl\" | SliceRepl | | | | | | feature | | | | | | | is/are | | | | | | | s | | | | | | | upported, | | | | | | | this | | | | | | | attribute | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | mapping | | | | | | | of each | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | Allowed | | | | | | | NSSAI | | | | | | | and, if | | | | | | | the | | | | | | | \"Par | | | | | | | tNetSlice | | | | | | | Support\" | | | | | | | feature | | | | | | | and/or | | | | | | | \"NetSl | | | | | | | iceRepl\" | | | | | | | feature | | | | | | | is/are | | | | | | | also | | | | | | | s | | | | | | | upported, | | | | | | | the | | | | | | | mapping | | | | | | | of each | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | Partially | | | | | | | Allowed | | | | | | | NSSAI to | | | | | | | the | | | | | | | corr | | | | | | | esponding | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | HPLMN. | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | included | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | If the | | | | | | | feature | | | | | | | \"Mul | | | | | | | tipleAcce | | | | | | | ssTypes\" | | | | | | | is | | | | | | | s | | | | | | | upported, | | | | | | | this | | | | | | | attribute | | | | | | | contains | | | | | | | also the | | | | | | | mapping | | | | | | | of the | | | | | | | Allowed | | | | | | | NSSAI in | | | | | | | the | | | | | | | non-3GPP | | | | | | | access to | | | | | | | the | | | | | | | corr | | | | | | | esponding | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | HPLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | n3gAllow | arra | C | 1..N | R | Slic | | edSnssais | y(Snssai) | | | epresents | eSupport, | | | | | | the | Mu | | | | | | Allowed | ltipleAcc | | | | | | NSSAI in | essTypes, | | | | | | the | DNN | | | | | | non-3GPP | Replaceme | | | | | | access | ntControl | | | | | | and | | | | | | | includes | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN. It | | | | | | | shall be | | | | | | | included | | | | | | | if the | | | | | | | feature | | | | | | | \"Mul | | | | | | | tipleAcce | | | | | | | ssTypes\" | | | | | | | and, the | | | | | | | feature | | | | | | | \"Slice | | | | | | | Support\" | | | | | | | or | | | | | | | \"DNNRe | | | | | | | placement | | | | | | | Control\" | | | | | | | are | | | | | | | supported | | | | | | | in the | | | | | | | AMF and | | | | | | | the UE is | | | | | | | r | | | | | | | egistered | | | | | | | in the | | | | | | | non-3GPP | | | | | | | access. | | +-----------+-----------+---+-----------+-----------+-----------+ | guami | Guami | C | 0..1 | The | | | | | | | Globally | | | | | | | Unique | | | | | | | AMF | | | | | | | I | | | | | | | dentifier | | | | | | | (GUAMI) | | | | | | | shall be | | | | | | | provided | | | | | | | by an AMF | | | | | | | as | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Se | O | 0..1 | If the NF | | | rviceName | rviceName | | | service | | | | | | | consumer | | | | | | | is an | | | | | | | AMF, it | | | | | | | should | | | | | | | provide | | | | | | | the name | | | | | | | of a | | | | | | | service | | | | | | | produced | | | | | | | by the | | | | | | | AMF that | | | | | | | makes use | | | | | | | of | | | | | | | in | | | | | | | formation | | | | | | | received | | | | | | | within | | | | | | | the | | | | | | | Npcf_AM | | | | | | | PolicyCon | | | | | | | trol_Upd | | | | | | | ateNotify | | | | | | | service | | | | | | | o | | | | | | | peration. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | M | 1 | Indicates | | | | dFeatures | | | the | | | | | | | features | | | | | | | supported | | | | | | | by the | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | traceReq | TraceData | C | 0..1 | Trace | | | | | | | control | | | | | | | and | | | | | | | conf | | | | | | | iguration | | | | | | | p | | | | | | | arameters | | | | | | | in | | | | | | | formation | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 32.4 | | | | | | | 22 [18] | | | | | | | shall be | | | | | | | included | | | | | | | if trace | | | | | | | is | | | | | | | required | | | | | | | to be | | | | | | | a | | | | | | | ctivated. | | +-----------+-----------+---+-----------+-----------+-----------+ | n | array(N | O | 1..N | List of | EneNA | | wdafDatas | wdafData) | | | NWDAF | | | | | | | Instance | | | | | | | IDs and | | | | | | | their | | | | | | | a | | | | | | | ssociated | | | | | | | Analytics | | | | | | | IDs | | | | | | | consumed | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: If | | | | | | | the | | | | | | | serving | | | | | | | PLMN is | | | | | | | not the | | | | | | | HPLMN, | | | | | | | then | | | | | | | within | | | | | | | the | | | | | | | \"ueSl | | | | | | | iceMbrs\" | | | | | | | a | | | | | | | ttribute, | | | | | | | there | | | | | | | shall not | | | | | | | be more | | | | | | | than one | | | | | | | array | | | | | | | item with | | | | | | | the same | | | | | | | \"servin | | | | | | | gSnssai\" | | | | | | | att | | | | | | | ribute\'s | | | | | | | value in | | | | | | | this | | | | | | | release | | | | | | | of the | | | | | | | speci | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.4 Type PolicyAssociationUpdateRequest
Table 5.6.2.4-1: Definition of type PolicyAssociationUpdateRequest
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | notifi | Uri | O | 0..1 | I | | | cationUri | | | | dentifies | | | | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | Noti | | | | | | | fications | | | | | | | sent by | | | | | | | the PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv4Addrs | Ipv4Addr) | | | or backup | | | | | | | IPv4 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv6Addrs | Ipv6Addr) | | | or backup | | | | | | | IPv6 | | | | | | | Ad | | | | | | | dress(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altN | ar | O | 1..N | Alternate | | | otifFqdns | ray(Fqdn) | | | or backup | | | | | | | FQDN(s) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | triggers | arr | C | 1..N | Request | | | | ay(Reques | | | Triggers | | | | tTrigger) | | | that the | | | | | | | NF | | | | | | | service | | | | | | | consumer | | | | | | | observes. | | | | | | | | | | | | | | Shall be | | | | | | | provided | | | | | | | when a | | | | | | | policy | | | | | | | control | | | | | | | request | | | | | | | trigger | | | | | | | occurs. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Serv | C | 0..1 | Service | | | rvAreaRes | iceAreaRe | | | Area | | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \ | | | | | | | "SERV_AR | | | | | | | EA_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | wlSe | Wir | C | 0..1 | Wireline | WirelineW | | rvAreaRes | elineServ | | | Service | irelessCo | | | iceAreaRe | | | Area | nvergence | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \ | | | | | | | "SERV_AR | | | | | | | EA_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | rfsp | RfspIndex | C | 0..1 | RFSP | | | | | | | Index as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"RF | | | | | | | SP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | s | SmfSele | C | 0..1 | The UE | DNN | | mfSelInfo | ctionData | | | requested | Replaceme | | | | | | S-NSSAI | ntControl | | | | | | and UE | | | | | | | requested | | | | | | | DNN. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \" | | | | | | | SMF_SELE | | | | | | | CT_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ueAmbr | Ambr | C | 0..1 | UE-AMBR | UE-A | | | | | | as part | MBR_Auth | | | | | | of the | orization | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"UE_AM | | | | | | | BR_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | array(Ue | C | 1..N | The | UE-Slice- | | SliceMbrs | SliceMbr) | | | s | MBR_Auth | | | | | | ubscribed | orization | | | | | | UE- | | | | | | | Slice-MBR | | | | | | | for each | | | | | | | s | | | | | | | ubscribed | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | home PLMN | | | | | | | mapping | | | | | | | to a | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | serving | | | | | | | PLMN. | | | | | | | Shall be | | | | | | | provided | | | | | | | for the | | | | | | | \"UE | | | | | | | _SLICE_ | | | | | | | MBR_CH\" | | | | | | | policy | | | | | | | control | | | | | | | request | | | | | | | trigger. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | pr | map(Pres | C | 1..N | If the | | | aStatuses | enceInfo) | | | Trigger | | | | | | | \" | | | | | | | PRA_CH\" | | | | | | | is | | | | | | | reported, | | | | | | | the UE | | | | | | | presence | | | | | | | status | | | | | | | for | | | | | | | tracking | | | | | | | area for | | | | | | | which | | | | | | | changes | | | | | | | of the UE | | | | | | | presence | | | | | | | occurred | | | | | | | shall be | | | | | | | provided. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | also be | | | | | | | the key | | | | | | | of the | | | | | | | map. The | | | | | | | \"presen | | | | | | | ceState\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall be | | | | | | | supplied. | | | | | | | The | | | | | | | \ | | | | | | | "addition | | | | | | | alPraId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall not | | | | | | | be | | | | | | | supplied. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | include | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of an | | | | | | | i | | | | | | | ndividual | | | | | | | presence | | | | | | | reporting | | | | | | | area. | | +-----------+-----------+---+-----------+-----------+-----------+ | userLoc | Use | C | 0..1 | The | | | | rLocation | | | location | | | | | | | of the | | | | | | | served UE | | | | | | | shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"L | | | | | | | OC_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | allow | arra | C | 1..N | R | Slic | | edSnssais | y(Snssai) | | | epresents | eSupport, | | | | | | the | DNNR | | | | | | Allowed | eplacemen | | | | | | NSSAI in | tControl, | | | | | | the 3GPP | Net | | | | | | access | SliceRepl | | | | | | and | | | | | | | includes | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN. It | | | | | | | shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | partAll | map(Parti | C | 1..N | R | Pa | | owedNssai | allyAllow | | | epresents | rtNetSlic | | | edSnssai) | | | the | eSupport, | | | | | | updated | Net | | | | | | Partially | SliceRepl | | | | | | Allowed | | | | | | | NSSAI. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | for the | | | | | | | trigger | | | | | | | \"PARTI | | | | | | | ALLY_ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\". | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Part | | | | | | | iallyAllo | | | | | | | wedSnssai | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | map(S | C | 1..N | R | P | | nssaisPar | nssaiPart | | | epresents | artNetSli | | tRejected | Rejected) | | | the | ceSupport | | | | | | updated | | | | | | | set of | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | partially | | | | | | | rejected | | | | | | | in the | | | | | | | RA. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | for the | | | | | | | trigger | | | | | | | \ | | | | | | | "SNSSAIS\ | | | | | | | _PARTIALL | | | | | | | Y_REJECT | | | | | | | ED_CH\". | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | SnssaiPar | | | | | | | tRejected | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | reject | arra | C | 1..N | R | P | | edSnssais | y(Snssai) | | | epresents | artNetSli | | | | | | the | ceSupport | | | | | | updated | | | | | | | set of | | | | | | | Rejected | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | in the | | | | | | | RA. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | for the | | | | | | | trigger | | | | | | | \"REJECT | | | | | | | ED_SNSSA | | | | | | | IS_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | pen | arra | C | 1..N | R | P | | dingNssai | y(Snssai) | | | epresents | artNetSli | | | | | | the | ceSupport | | | | | | updated | | | | | | | Pending | | | | | | | NSSAI. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | for the | | | | | | | trigger | | | | | | | \"PEN | | | | | | | DING_NSS | | | | | | | AI_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | targ | arra | C | 1..N | R | Ta | | etSnssais | y(Snssai) | | | epresents | rgetNSSAI | | | | | | the | | | | | | | Target | | | | | | | NSSAI. It | | | | | | | shall be | | | | | | | provided | | | | | | | for the | | | | | | | trigger | | | | | | | \"TARGET\ | | | | | | | _NSSAI\". | | +-----------+-----------+---+-----------+-----------+-----------+ | mappi | arra | O | 1..N | The | DNNR | | ngSnssais | y(Mapping | | | mapping | eplacemen | | | OfSnssai) | | | of each | tControl, | | | | | | S-NSSAI | Pa | | | | | | of the | rtNetSlic | | | | | | Allowed | eSupport, | | | | | | NSSAI to | Net | | | | | | the | SliceRepl | | | | | | corr | | | | | | | esponding | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | HPLMN. It | | | | | | | shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"AL | | | | | | | LOWED_NS | | | | | | | SAI_CH\" | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | If the | | | | | | | feature | | | | | | | \"Mul | | | | | | | tipleAcce | | | | | | | ssTypes\" | | | | | | | is | | | | | | | s | | | | | | | upported, | | | | | | | this | | | | | | | attribute | | | | | | | contains | | | | | | | also the | | | | | | | mapping | | | | | | | of the | | | | | | | Allowed | | | | | | | NSSAI in | | | | | | | the | | | | | | | non-3GPP | | | | | | | access to | | | | | | | the | | | | | | | corr | | | | | | | esponding | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | HPLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | n3gAllow | arra | C | 1..N | R | Slic | | edSnssais | y(Snssai) | | | epresents | eSupport, | | | | | | the | Mu | | | | | | Allowed | ltipleAcc | | | | | | NSSAI in | essTypes, | | | | | | the | DNN | | | | | | non-3GPP | Replaceme | | | | | | access | ntControl | | | | | | and | | | | | | | includes | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN. It | | | | | | | shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"AL | | | | | | | LOWED_NS | | | | | | | SAI_CH\" | | | | | | | when the | | | | | | | feature | | | | | | | \"Mul | | | | | | | tipleAcce | | | | | | | ssTypes\" | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | unava | arra | C | 1..N | R | Net | | ilSnssais | y(Snssai) | | | epresents | SliceRepl | | | | | | the | | | | | | | un | | | | | | | available | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | that | | | | | | | require | | | | | | | network | | | | | | | slice | | | | | | | rep | | | | | | | lacement. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"SLIC | | | | | | | E_REPLAC | | | | | | | E_MGMT\" | | | | | | | when the | | | | | | | \"NetSl | | | | | | | iceRepl\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | ac | array(Ac | C | 1..N | The | M | | cessTypes | cessType) | | | Access | ultipleAc | | | | | | Types | cessTypes | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ratTypes | array | C | 1..N | The 3GPP | M | | | (RatType) | | | RAT Type | ultipleAc | | | | | | and | cessTypes | | | | | | non-3GPP | | | | | | | RAT Type | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | | | | | | Shall be | | | | | | | provided | | | | | | | for | | | | | | | trigger | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | traceReq | TraceData | C | 0..1 | Trace | | | | | | | control | | | | | | | and | | | | | | | conf | | | | | | | iguration | | | | | | | p | | | | | | | arameters | | | | | | | in | | | | | | | formation | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 32.4 | | | | | | | 22 [18] | | | | | | | shall be | | | | | | | included | | | | | | | if trace | | | | | | | is | | | | | | | required | | | | | | | to be | | | | | | | a | | | | | | | ctivated, | | | | | | | modified | | | | | | | or | | | | | | | dea | | | | | | | ctivated. | | | | | | | For trace | | | | | | | modi | | | | | | | fication, | | | | | | | it shall | | | | | | | contain a | | | | | | | complete | | | | | | | re | | | | | | | placement | | | | | | | of trace | | | | | | | data. For | | | | | | | trace | | | | | | | deac | | | | | | | tivation, | | | | | | | it shall | | | | | | | contain | | | | | | | the Null | | | | | | | value. | | +-----------+-----------+---+-----------+-----------+-----------+ | guami | Guami | C | 0..1 | The | | | | | | | Globally | | | | | | | Unique | | | | | | | AMF | | | | | | | I | | | | | | | dentifier | | | | | | | (GUAMI) | | | | | | | shall be | | | | | | | provided | | | | | | | by an AMF | | | | | | | as | | | | | | | service | | | | | | | consumer | | | | | | | during | | | | | | | the AMF | | | | | | | re | | | | | | | location. | | +-----------+-----------+---+-----------+-----------+-----------+ | n | array(N | O | 1..N | List of | EneNA | | wdafDatas | wdafData) | | | NWDAF | | | | | | | Instance | | | | | | | IDs and | | | | | | | their | | | | | | | a | | | | | | | ssociated | | | | | | | Analytics | | | | | | | IDs | | | | | | | consumed | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | Indicates | Fe | | | dFeatures | | | the | atureRene | | | | | | features | gotiation | | | | | | supported | | | | | | | by the NF | | | | | | | service | | | | | | | c | | | | | | | onsumer.\ | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | by the | | | | | | | target | | | | | | | AMF in | | | | | | | inter-AMF | | | | | | | mobility | | | | | | | scenarios | | | | | | | for | | | | | | | trigger | | | | | | | \"FEAT\ | | | | | | | _RENEG\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: If | | | | | | | the | | | | | | | serving | | | | | | | PLMN is | | | | | | | not the | | | | | | | HPLMN, | | | | | | | then | | | | | | | within | | | | | | | the | | | | | | | \"ueSl | | | | | | | iceMbrs\" | | | | | | | a | | | | | | | ttribute, | | | | | | | there | | | | | | | shall not | | | | | | | be more | | | | | | | than one | | | | | | | array | | | | | | | item with | | | | | | | the same | | | | | | | \"servin | | | | | | | gSnssai\" | | | | | | | att | | | | | | | ribute\'s | | | | | | | value in | | | | | | | this | | | | | | | release | | | | | | | of the | | | | | | | speci | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.5 Type PolicyUpdate
Table 5.6.2.5-1: Definition of type PolicyUpdate
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | re | Uri | M | 1 | The | | | sourceUri | | | | resource | | | | | | | URI of | | | | | | | the | | | | | | | i | | | | | | | ndividual | | | | | | | AM policy | | | | | | | related | | | | | | | to the | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | triggers | arr | O | 1..N | Request | (NOTE 1) | | | ay(Reques | | | Triggers | | | | tTrigger) | | | that the | (NOTE 2) | | | | | | PCF | | | | | | | su | | | | | | | bscribes. | | | | | | | Only | | | | | | | values | | | | | | | \"L | | | | | | | OC_CH\", | | | | | | | \"ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \"TARGET\ | | | | | | | _NSSAI\", | | | | | | | \" | | | | | | | SMF_SELE | | | | | | | CT_CH\", | | | | | | | \"P | | | | | | | RA_CH\", | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\", | | | | | | | \"SLICE | | | | | | | _REPLACE | | | | | | | _MGMT\", | | | | | | | \"PARTI | | | | | | | ALLY_ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \ | | | | | | | "SNSSAIS\ | | | | | | | _PARTIALL | | | | | | | Y_REJECT | | | | | | | ED_CH\", | | | | | | | \"REJEC | | | | | | | TED_SNSS | | | | | | | AIS_CH\" | | | | | | | and | | | | | | | \"PE | | | | | | | NDING_NS | | | | | | | SAI_CH\" | | | | | | | are | | | | | | | p | | | | | | | ermitted. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | Serv | O | 0..1 | Service | | | rvAreaRes | iceAreaRe | | | Area | | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | wlSe | Wir | O | 0..1 | Wireline | WirelineW | | rvAreaRes | elineServ | | | Service | irelessCo | | | iceAreaRe | | | Area | nvergence | | | striction | | | Re | | | | | | | striction | | | | | | | as part | | | | | | | of the | | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF | | +-----------+-----------+---+-----------+-----------+-----------+ | rfsp | RfspIndex | O | 0..1 | RFSP | | | | | | | Index as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | rf | Du | O | 0..1 | Validity | RFSPVal | | spValTime | rationSec | | | time of | idityTime | | | | | | the RFSP | | | | | | | Index | | | | | | | value | | | | | | | provided | | | | | | | within | | | | | | | the | | | | | | | \"rfsp\" | | | | | | | a | | | | | | | ttribute. | | | | | | | | | | | | | | It may be | | | | | | | provided | | | | | | | when the | | | | | | | RFSP | | | | | | | Index | | | | | | | value | | | | | | | within | | | | | | | the | | | | | | | \"rfsp\" | | | | | | | attribute | | | | | | | indicates | | | | | | | the | | | | | | | EP | | | | | | | C/E-UTRAN | | | | | | | access is | | | | | | | pr | | | | | | | ioritized | | | | | | | over 5GS | | | | | | | access. | | | | | | | It shall | | | | | | | be | | | | | | | omitted | | | | | | | for other | | | | | | | RFSP | | | | | | | Index | | | | | | | values. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | RfspIndex | C | 0..1 | RFSP | Ta | | argetRfsp | | | | Index | rgetNSSAI | | | | | | a | | | | | | | ssociated | | | | | | | with the | | | | | | | Target | | | | | | | NSSAI. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | Target | | | | | | | NSSAI was | | | | | | | received | | | | | | | in the | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | SmfSele | C | 0..1 | It may | DNN | | mfSelInfo | ctionData | | | include | Replaceme | | | | | | updated | ntControl | | | | | | c | | | | | | | onditions | | | | | | | for SMF | | | | | | | Selection | | | | | | | in | | | | | | | formation | | | | | | | rep | | | | | | | lacement. | | | | | | | It shall | | | | | | | include | | | | | | | the PCF | | | | | | | decision | | | | | | | of the | | | | | | | selected | | | | | | | DNN when | | | | | | | the | | | | | | | \"smf | | | | | | | SelInfo\" | | | | | | | attribute | | | | | | | c | | | | | | | ontaining | | | | | | | the UE | | | | | | | requested | | | | | | | S-NSSAI | | | | | | | and DNN | | | | | | | was sent | | | | | | | in the | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueAmbr | Ambr | C | 0..1 | UE-AMBR | UE-A | | | | | | as part | MBR_Auth | | | | | | of the | orization | | | | | | AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy. | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | array(Ue | O | 0..1 | One or | UE-Slice- | | SliceMbrs | SliceMbr) | | | more | MBR_Auth | | | | | | UE-Sli | orization | | | | | | ce-MBR(s) | | | | | | | for | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | of | | | | | | | serving | | | | | | | PLMN as | | | | | | | part of | | | | | | | the AMF | | | | | | | Access | | | | | | | and | | | | | | | Mobility | | | | | | | Policy as | | | | | | | d | | | | | | | etermined | | | | | | | by the | | | | | | | PCF. | | +-----------+-----------+---+-----------+-----------+-----------+ | pras | m | C | 1..N | If the | | | | ap(Presen | | | Trigger | | | | ceInfoRm) | | | \" | | | | | | | PRA_CH\" | | | | | | | is | | | | | | | provided | | | | | | | or if | | | | | | | that | | | | | | | trigger | | | | | | | was | | | | | | | already | | | | | | | set but | | | | | | | the | | | | | | | requested | | | | | | | presence | | | | | | | reporting | | | | | | | areas | | | | | | | need to | | | | | | | be | | | | | | | changed, | | | | | | | the | | | | | | | presence | | | | | | | reporting | | | | | | | area(s) | | | | | | | for which | | | | | | | reporting | | | | | | | is | | | | | | | requested | | | | | | | shall be | | | | | | | provided. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | also be | | | | | | | the key | | | | | | | of the | | | | | | | map. The | | | | | | | \"presen | | | | | | | ceState\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall not | | | | | | | be | | | | | | | supplied. | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | include | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of either | | | | | | | a | | | | | | | presence | | | | | | | reporting | | | | | | | area or a | | | | | | | presence | | | | | | | reporting | | | | | | | area set. | | +-----------+-----------+---+-----------+-----------+-----------+ | pcfUeInfo | PcfUeCal | O | 0..1 | Contains | AM | | | lbackInfo | | | the PCF | Influence | | | | | | for the | | | | | | | UE | | | | | | | in | | | | | | | formation | | | | | | | necessary | | | | | | | for the | | | | | | | PCF for | | | | | | | the PDU | | | | | | | session | | | | | | | to send | | | | | | | esta | | | | | | | blished/t | | | | | | | erminated | | | | | | | event | | | | | | | noti | | | | | | | fications | | | | | | | to the | | | | | | | PCF for | | | | | | | the UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | matchPdus | arr | C | 1..N | Indicates | AM | | | ay(PduSes | | | the | Influence | | | sionInfo) | | | matched | | | | | | | PDU | | | | | | | s | | | | | | | ession(s) | | | | | | | for which | | | | | | | the PCF | | | | | | | for the | | | | | | | UE | | | | | | | in | | | | | | | formation | | | | | | | in the | | | | | | | \"pc | | | | | | | fUeInfo\" | | | | | | | attribute | | | | | | | shall be | | | | | | | forwarded | | | | | | | to the | | | | | | | SMF. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | \"pc | | | | | | | fUeInfo\" | | | | | | | attribute | | | | | | | is | | | | | | | present | | | | | | | and was | | | | | | | not | | | | | | | p | | | | | | | reviously | | | | | | | pr | | | | | | | ovisioned | | | | | | | by the | | | | | | | PCF for | | | | | | | the UE. | | | | | | | | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | asTim | AsTim | O | 0..1 | Contains | 5 | | eDisParam | eDistribu | | | the 5G | GAccessSt | | | tionParam | | | acess | ratumTime | | | | | | stratum | | | | | | | time | | | | | | | dis | | | | | | | tribution | | | | | | | pa | | | | | | | rameters. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | map( | O | 1..N | Contains | Net | | ReplInfos | SnssaiRep | | | the | SliceRepl | | | laceInfo) | | | network | | | | | | | slice | | | | | | | re | | | | | | | placement | | | | | | | related | | | | | | | In | | | | | | | formation | | | | | | | for one | | | | | | | or more | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | of the | | | | | | | UE\'s | | | | | | | Allowed | | | | | | | NSSAI | | | | | | | and/or | | | | | | | Partially | | | | | | | Allowed | | | | | | | NSSAI. | | | | | | | | | | | | | | The key | | | | | | | used in | | | | | | | this map | | | | | | | for each | | | | | | | entry is | | | | | | | the | | | | | | | concerned | | | | | | | un | | | | | | | available | | | | | | | S-NSSAI | | | | | | | provided | | | | | | | within | | | | | | | the | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | of the | | | | | | | corr | | | | | | | esponding | | | | | | | SnssaiRe | | | | | | | placeInfo | | | | | | | map | | | | | | | entry. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | Indicates | Fe | | | dFeatures | | | the | atureRene | | | | | | n | gotiation | | | | | | egotiated | | | | | | | supported | | | | | | | f | | | | | | | eatures.\ | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | in the | | | | | | | HTTP POST | | | | | | | response | | | | | | | when the | | | | | | | NF | | | | | | | service | | | | | | | consumer | | | | | | | provided | | | | | | | the | | | | | | | supported | | | | | | | features | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | sl | map | O | 1..N | R | NetSlice | | iceUsgCtr | (SliceUsg | | | epresents | UsageCtrl | | lInfoSets | CtrlInfo) | | | the | | | | | | | updated | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the | | | | | | | on-demand | | | | | | | S-NSSAI | | | | | | | (within | | | | | | | the | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | of the | | | | | | | corr | | | | | | | esponding | | | | | | | map | | | | | | | value) to | | | | | | | which the | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | related. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | The | | | | | | | \"ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \"TARGET\ | | | | | | | _NSSAI\", | | | | | | | \" | | | | | | | SMF_SELE | | | | | | | CT_CH\", | | | | | | | \"A | | | | | | | CCESS_TY | | | | | | | PE_CH\", | | | | | | | \"SLICE | | | | | | | _REPLACE | | | | | | | _MGMT\", | | | | | | | \"PARTI | | | | | | | ALLY_ALL | | | | | | | OWED_NSS | | | | | | | AI_CH\", | | | | | | | \ | | | | | | | "SNSSAIS\ | | | | | | | _PARTIALL | | | | | | | Y_REJECT | | | | | | | ED_CH\", | | | | | | | \"REJEC | | | | | | | TED_SNSS | | | | | | | AIS_CH\" | | | | | | | and | | | | | | | \"PE | | | | | | | NDING_NS | | | | | | | SAI_CH\" | | | | | | | values in | | | | | | | the | | | | | | | \"t | | | | | | | riggers\" | | | | | | | attribute | | | | | | | apply | | | | | | | under | | | | | | | feature | | | | | | | control | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | clause | | | | | | | 4.2.3.2. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | \ | | | | | | | "SMF_SEL | | | | | | | ECT_CH\" | | | | | | | trigger | | | | | | | may be | | | | | | | met only | | | | | | | for new | | | | | | | PDU | | | | | | | sessions, | | | | | | | i.e. it | | | | | | | shall not | | | | | | | apply to | | | | | | | ongoing | | | | | | | PDU | | | | | | | sessions. | | | | | | | | | | | | | | NOTE 3: | | | | | | | When the | | | | | | | Pol | | | | | | | icyUpdate | | | | | | | data type | | | | | | | is used | | | | | | | in a | | | | | | | policy | | | | | | | update | | | | | | | notify | | | | | | | service | | | | | | | o | | | | | | | peration, | | | | | | | either | | | | | | | the | | | | | | | complete | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"reso | | | | | | | urceUri\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"a | | | | | | | piSpecifi | | | | | | | cResource | | | | | | | UriPart\" | | | | | | | component | | | | | | | (see | | | | | | | cl | | | | | | | ause 5.1) | | | | | | | of the | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"reso | | | | | | | urceUri\" | | | | | | | attribute | | | | | | | may be | | | | | | | used by | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF) for | | | | | | | the | | | | | | | ident | | | | | | | ification | | | | | | | of the | | | | | | | I | | | | | | | ndividual | | | | | | | AM Policy | | | | | | | As | | | | | | | sociation | | | | | | | resource | | | | | | | related | | | | | | | to the | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | NOTE 4: | | | | | | | The DNN | | | | | | | encoded | | | | | | | within | | | | | | | the | | | | | | | PduSe | | | | | | | ssionInfo | | | | | | | e | | | | | | | lement(s) | | | | | | | of the | | | | | | | \"ma | | | | | | | tchPdus\" | | | | | | | array | | | | | | | contains | | | | | | | a full | | | | | | | DNN or | | | | | | | only the | | | | | | | DNN | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | based on | | | | | | | the DNN | | | | | | | provided | | | | | | | by the AF | | | | | | | to the | | | | | | | PCF in | | | | | | | the | | | | | | | Am | | | | | | | Influence | | | | | | | API, as | | | | | | | specified | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 29.52 | | | | | | | 2 [32]. | | | | | | | When the | | | | | | | DNN | | | | | | | contains | | | | | | | the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only, the | | | | | | | AMF shall | | | | | | | match a | | | | | | | PDU | | | | | | | session | | | | | | | for the | | | | | | | received | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and for | | | | | | | any value | | | | | | | of the | | | | | | | Operator | | | | | | | Id | | | | | | | entifier. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.6 Type TerminationNotification
Table 5.6.2.6-1: Definition of type TerminationNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | re | Uri | M | 1 | The | | | sourceUri | | | | resource | | | | | | | URI of | | | | | | | the | | | | | | | i | | | | | | | ndividual | | | | | | | AM policy | | | | | | | related | | | | | | | to the | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | cause | Po | M | 1 | The cause | | | | licyAssoc | | | why the | | | | iationRel | | | PCF | | | | easeCause | | | requests | | | | | | | the | | | | | | | te | | | | | | | rmination | | | | | | | of the | | | | | | | policy | | | | | | | ass | | | | | | | ociation. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | the | | | | | | | complete | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"reso | | | | | | | urceUri\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"a | | | | | | | piSpecifi | | | | | | | cResource | | | | | | | UriPart\" | | | | | | | component | | | | | | | (see | | | | | | | cl | | | | | | | ause 5.1) | | | | | | | of the | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"reso | | | | | | | urceUri\" | | | | | | | attribute | | | | | | | may be | | | | | | | used by | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF) for | | | | | | | the | | | | | | | ident | | | | | | | ification | | | | | | | of the | | | | | | | I | | | | | | | ndividual | | | | | | | AM Policy | | | | | | | As | | | | | | | sociation | | | | | | | resource | | | | | | | related | | | | | | | to the | | | | | | | noti | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.7 Type SmfSelectionData
Table 5.6.2.7-1: Definition of type SmfSelectionData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | unsuppDnn | boolean | O | 0..1 | When it | | | | | | | is set to | | | | | | | \"true\", | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | shall | | | | | | | request | | | | | | | DNN | | | | | | | re | | | | | | | placement | | | | | | | when the | | | | | | | UE | | | | | | | requested | | | | | | | an | | | | | | | un | | | | | | | supported | | | | | | | DNN at | | | | | | | PDU | | | | | | | session | | | | | | | esta | | | | | | | blishment | | | | | | | request. | | | | | | | The | | | | | | | default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | c | m | O | 1..N | Contains | | | andidates | ap(Candid | | | the list | | | | ateForRep | | | of DNNs | | | | lacement) | | | per | | | | | | | S-NSSAI | | | | | | | that are | | | | | | | candidate | | | | | | | for | | | | | | | rep | | | | | | | lacement. | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Candi | | | | | | | dateForRe | | | | | | | placement | | | | | | | data type | | | | | | | shall | | | | | | | also be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | C | 0..1 | It shall | | | | | | | be | | | | | | | included | | | | | | | in AM | | | | | | | policy | | | | | | | as | | | | | | | sociation | | | | | | | update | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | epresents | | | | | | | the | | | | | | | allowed | | | | | | | S-NSSAI | | | | | | | the UE | | | | | | | includes | | | | | | | in the | | | | | | | PDU | | | | | | | session | | | | | | | esta | | | | | | | blishment | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | mapp | Snssai | O | 0..1 | It may be | | | ingSnssai | | | | included | | | | | | | in AM | | | | | | | policy | | | | | | | as | | | | | | | sociation | | | | | | | update | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | epresents | | | | | | | the home | | | | | | | mapping | | | | | | | of the | | | | | | | allowed | | | | | | | S-NSSAI | | | | | | | the UE | | | | | | | includes | | | | | | | in the | | | | | | | PDU | | | | | | | session | | | | | | | esta | | | | | | | blishment | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | C | 0..1 | It shall | | | | | | | be | | | | | | | included | | | | | | | in AM | | | | | | | policy | | | | | | | as | | | | | | | sociation | | | | | | | update | | | | | | | requests | | | | | | | and | | | | | | | r | | | | | | | epresents | | | | | | | the UE | | | | | | | requested | | | | | | | DNN. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | in AM | | | | | | | policy | | | | | | | as | | | | | | | sociation | | | | | | | update | | | | | | | response | | | | | | | and | | | | | | | r | | | | | | | epresents | | | | | | | the PCF | | | | | | | selected | | | | | | | DNN. | | | | | | | | | | | | | | The DNN | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | one of | | | | | | | the | | | | | | | \"un | | | | | | | suppDnn\" | | | | | | | attribute | | | | | | | and | | | | | | | \"can | | | | | | | didates\" | | | | | | | a | | | | | | | ttribute, | | | | | | | or both | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | \"smf | | | | | | | SelInfo\" | | | | | | | attribute | | | | | | | is | | | | | | | included | | | | | | | in the | | | | | | | PolicyAs | | | | | | | sociation | | | | | | | type or | | | | | | | Pol | | | | | | | icyUpdate | | | | | | | type when | | | | | | | included | | | | | | | in the | | | | | | | Npcf_AM | | | | | | | PolicyCon | | | | | | | trol_Upd | | | | | | | ateNotify | | | | | | | request. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | S-NSSAI | | | | | | | value | | | | | | | used as | | | | | | | key of | | | | | | | the map | | | | | | | is | | | | | | | encoded | | | | | | | as a | | | | | | | string as | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 29.5 | | | | | | | 71[11], | | | | | | | clause | | | | | | | 5.4.4.2. | | | | | | | | | | | | | | NOTE 3: | | | | | | | The AMF | | | | | | | shall | | | | | | | match a | | | | | | | PDU | | | | | | | session | | | | | | | for the | | | | | | | received | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and | | | | | | | replace | | | | | | | it by the | | | | | | | received | | | | | | | selected | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | for any | | | | | | | Operator | | | | | | | I | | | | | | | dentifier | | | | | | | value. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.8 Type CandidateForReplacement
Table 5.6.2.8-1: Definition of type CandidateForReplacement
+-----------+-----------+---+-----------+-----------+-----------+---+ | Attribute | Data type | P | Ca | De | Appl | | | name | | | rdinality | scription | icability | | +-----------+-----------+---+-----------+-----------+-----------+---+ | snssai | Snssai | M | 1 | The | | | | | | | | S-NSSAI | | | | | | | | in the | | | | | | | | serving | | | | | | | | PLMN. It | | | | | | | | shall | | | | | | | | contain a | | | | | | | | S-NSSAI | | | | | | | | within | | | | | | | | the | | | | | | | | Allowed | | | | | | | | NSSAI. | | | +-----------+-----------+---+-----------+-----------+-----------+---+ | dnns | a | O | 1..N | List of | | | | | rray(Dnn) | | | candidate | | | | | | | | DNNs for | | | | | | | | re | | | | | | | | placement | | | | | | | | for the | | | | | | | | S-NSSAI | | | | | | | | included | | | | | | | | in the | | | | | | | | \ | | | | | | | | "snssai\" | | | | | | | | a | | | | | | | | ttribute. | | | | | | | | If | | | | | | | | omitted, | | | | | | | | any DNN | | | | | | | | for the | | | | | | | | provided | | | | | | | | S-NSSAI | | | | | | | | is | | | | | | | | candidate | | | | | | | | for | | | | | | | | rep | | | | | | | | lacement. | | | | | | | | The DNN | | | | | | | | shall | | | | | | | | contain | | | | | | | | the | | | | | | | | Network | | | | | | | | I | | | | | | | | dentifier | | | | | | | | only. | | | | | | | | | | | | | | | | (NOTE) | | | +-----------+-----------+---+-----------+-----------+-----------+---+ | NOTE: The | | | | | | | | AMF shall | | | | | | | | match the | | | | | | | | PDU | | | | | | | | session | | | | | | | | that | | | | | | | | contain a | | | | | | | | candidate | | | | | | | | DNN | | | | | | | | Network | | | | | | | | I | | | | | | | | dentifier | | | | | | | | for any | | | | | | | | Operator | | | | | | | | I | | | | | | | | dentifier | | | | | | | | value. | | | | | | | +-----------+-----------+---+-----------+-----------+-----------+---+
#### 5.6.2.9 Type AmRequestedValueRep
Table 5.6.2.9-1: Definition of type AmRequestedValueRep
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | userLoc | Use | O | 0..1 | The | | | | rLocation | | | location | | | | | | | of the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | +-----------+-----------+---+-----------+-----------+-----------+ | pr | map(Pres | O | 1..N | The UE | | | aStatuses | enceInfo) | | | presence | | | | | | | statuses | | | | | | | for | | | | | | | tracking | | | | | | | areas. | | | | | | | | | | | | | | The | | | | | | | \"praId\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Pre | | | | | | | senceInfo | | | | | | | data type | | | | | | | shall | | | | | | | also be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | ac | array(Ac | O | 1..N | The | M | | cessTypes | cessType) | | | Access | ultipleAc | | | | | | Types | cessTypes | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | +-----------+-----------+---+-----------+-----------+-----------+ | ratTypes | array | O | 1..N | The 3GPP | M | | | (RatType) | | | RAT Type | ultipleAc | | | | | | and | cessTypes | | | | | | non-3GPP | | | | | | | RAT Type | | | | | | | where the | | | | | | | served UE | | | | | | | is | | | | | | | camping. | | +-----------+-----------+---+-----------+-----------+-----------+ | allow | arra | O | 1..N | The | Slic | | edSnssais | y(Snssai) | | | Allowed | eSupport, | | | | | | NSSAI in | DNN | | | | | | the 3GPP | Replaceme | | | | | | access | ntControl | | | | | | and | | | | | | | includes | | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN. | | +-----------+-----------+---+-----------+-----------+-----------+ | n3gAllow | arra | O | 1..N | The | Slic | | edSnssais | y(Snssai) | | | Allowed | eSupport, | | | | | | NSSAI in | Mu | | | | | | the | ltipleAcc | | | | | | non-3GPP | essTypes, | | | | | | access | DNN | | | | | | and | Replaceme | | | | | | includes | ntControl | | | | | | the | | | | | | | S-NSSAIs | | | | | | | values | | | | | | | the UE | | | | | | | can use | | | | | | | in the | | | | | | | serving | | | | | | | PLMN when | | | | | | | the UE is | | | | | | | r | | | | | | | egistered | | | | | | | in the | | | | | | | non-3GPP | | | | | | | access. | | +-----------+-----------+---+-----------+-----------+-----------+ | partAll | map(Parti | O | 1..N | R | Pa | | owedNssai | allyAllow | | | epresents | rtNetSlic | | | edSnssai) | | | the | eSupport, | | | | | | updated | Net | | | | | | Partially | SliceRepl | | | | | | Allowed | | | | | | | NSSAI. | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | Part | | | | | | | iallyAllo | | | | | | | wedSnssai | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | map(S | O | 1..N | R | P | | nssaisPar | nssaiPart | | | epresents | artNetSli | | tRejected | Rejected) | | | the | ceSupport | | | | | | updated | | | | | | | set of | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | partially | | | | | | | rejected | | | | | | | in the | | | | | | | RA. | | | | | | | | | | | | | | The | | | | | | | \ | | | | | | | "snssai\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | SnssaiPar | | | | | | | tRejected | | | | | | | data type | | | | | | | shall be | | | | | | | the key | | | | | | | of the | | | | | | | map. | | +-----------+-----------+---+-----------+-----------+-----------+ | reject | arra | O | 1..N | R | P | | edSnssais | y(Snssai) | | | epresents | artNetSli | | | | | | the | ceSupport | | | | | | updated | | | | | | | set of | | | | | | | Rejected | | | | | | | S | | | | | | | -NSSAI(s) | | | | | | | in the | | | | | | | RA. | | +-----------+-----------+---+-----------+-----------+-----------+ | pen | arra | O | 1..N | R | P | | dingNssai | y(Snssai) | | | epresents | artNetSli | | | | | | the | ceSupport | | | | | | updated | | | | | | | Pending | | | | | | | NSSAI. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.10 Type: AsTimeDistributionParam
Table 5.6.2.10-1: Definition of type AsTimeDistributionParam
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | asTi | boolean | O | 0..1 | When this | | | meDistInd | | | | attribute | | | | | | | is | | | | | | | included | | | | | | | and set | | | | | | | to true, | | | | | | | it | | | | | | | indicates | | | | | | | that the | | | | | | | access | | | | | | | stratum | | | | | | | time | | | | | | | dis | | | | | | | tribution | | | | | | | via Uu | | | | | | | reference | | | | | | | point is | | | | | | | a | | | | | | | ctivated. | | | | | | | | | | | | | | When | | | | | | | present | | | | | | | it shall | | | | | | | be set as | | | | | | | follows: | | | | | | | | | | | | | | - true: | | | | | | | a | | | | | | | ctivated. | | | | | | | | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | dea | | | | | | | ctivated. | | +-----------+-----------+---+-----------+-----------+-----------+ | uuEr | U | O | 0..1 | Indicates | | | rorBudget | integerRm | | | the time | | | | | | | synchr | | | | | | | onization | | | | | | | error | | | | | | | budget in | | | | | | | terms of | | | | | | | time | | | | | | | units of | | | | | | | nan | | | | | | | oseconds. | | +-----------+-----------+---+-----------+-----------+-----------+ | clk | ClockQ | O | 0..1 | Defines | NetTimeS | | QltDetLvl | ualityDet | | | which | yncStatus | | | ailLevell | | | clock | | | | | | | quality | | | | | | | in | | | | | | | formation | | | | | | | (clock | | | | | | | quality | | | | | | | metrics | | | | | | | or | | | | | | | accep | | | | | | | table/not | | | | | | | a | | | | | | | cceptable | | | | | | | in | | | | | | | dication) | | | | | | | to report | | | | | | | to the UE | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | clause | | | | | | | 5.27.1.12 | | | | | | | of | | | | | | | TS 23. | | | | | | | 501 [2] | | +-----------+-----------+---+-----------+-----------+-----------+ | clkQ | Cloc | O | 0..1 | Indicates | NetTimeS | | ltAcptCri | kQualityA | | | the | yncStatus | | | cceptance | | | a | | | | Criterion | | | cceptable | | | | | | | criteria | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | clause | | | | | | | 5.27.1.12 | | | | | | | of | | | | | | | TS 23. | | | | | | | 501 [2] | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.11 Type UeSliceMbr
Table 5.6.2.11-1: Definition of type UeSliceMbr
* * *
Attribute name Data type P Cardinality Description Applicability sliceMbr
SliceMbr M 1 Contains the MBR for uplink and the MBR for downlink.  
servingSnssai Snssai M 1 Indicates the S-NSSAI of serving PLMN.  
mappedHomeSnssai Snssai C 0..1 Indicates the mapped S-NSSAI of home PLMN.
Shall only be provided in the request towards the PCF when serving PLMN is not
the HPLMN.
* * *
#### 5.6.2.12 Type SliceUsgCtrlInfo
**Table 5.6.2.12-1: Definition of type SliceUsgCtrlInfo**
+----------+----------+-------+----------+----------+----------+ | **A |** Data | **P** | **Cardi |** Descr | * | | ttribute | type**| | nality** | iption**| *Applica | | name** | | | | | bility** | +----------+----------+-------+----------+----------+----------+ | snssai | Snssai | M | 1 | Contains | | | | | | | the | | | | | | | o | | | | | | | n-demand | | | | | | | S-NSSAI | | | | | | | to which | | | | | | | the | | | | | | | provided | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | inf | | | | | | | ormation | | | | | | | is | | | | | | | related. | | +----------+----------+-------+----------+----------+----------+ | d | Durat | O | 0..1 | Contains | | | eregInac | ionSecRm | | | the | | | tivTimer | | | | slice | | | | | | | deregi | | | | | | | stration | | | | | | | in | | | | | | | activity | | | | | | | timer | | | | | | | value to | | | | | | | be used | | | | | | | to | | | | | | | support | | | | | | | and | | | | | | | enforce | | | | | | | network | | | | | | | slice | | | | | | | usage | | | | | | | control | | | | | | | for the | | | | | | | o | | | | | | | n-demand | | | | | | | S-NSSAI. | | | | | | | | | | | | | | (NOTE) | | +----------+----------+-------+----------+----------+----------+ | NOTE: | | | | | | | When the | | | | | | | \"der | | | | | | | egInacti | | | | | | | vTimer\" | | | | | | | is not | | | | | | | present | | | | | | | and it | | | | | | | was | | | | | | | pr | | | | | | | eviously | | | | | | | pro | | | | | | | visioned | | | | | | | by the | | | | | | | PCF, | | | | | | | this | | | | | | | means | | | | | | | that the | | | | | | | network | | | | | | | slice | | | | | | | deregi | | | | | | | stration | | | | | | | timer | | | | | | | pr | | | | | | | eviously | | | | | | | pro | | | | | | | visioned | | | | | | | for the | | | | | | | S-NSSAI | | | | | | | id | | | | | | | entified | | | | | | | by the | | | | | | | \" | | | | | | | snssai\" | | | | | | | a | | | | | | | ttribute | | | | | | | shall no | | | | | | | longer | | | | | | | apply. | | | | | | +----------+----------+-------+----------+----------+----------+
#### 5.6.2.13 Type SnssaiPartRejected
Table 5.6.2.13-1: Definition of type SnssaiPartRejected
+----------+----------+-------+----------+----------+----------+ | **A |** Data | **P** | **Cardi |** Descr | * | | ttribute | type**| | nality** | iption**| *Applica | | name** | | | | | bility** | +----------+----------+-------+----------+----------+----------+ | snssai | Snssai | M | 1 | Contains | | | | | | | the | | | | | | | S-NSSAI | | | | | | | that is | | | | | | | rejected | | | | | | | p | | | | | | | artially | | | | | | | in the | | | | | | | RA. | | +----------+----------+-------+----------+----------+----------+ | allowe | ar | C | 1..N | Contains | | | dTaiList | ray(Tai) | | | the list | | | | | | | of | | | | | | | TAI(s) | | | | | | | of the | | | | | | | RA | | | | | | | within | | | | | | | which | | | | | | | the | | | | | | | S-NSSAI | | | | | | | is | | | | | | | allowed. | | | | | | | | | | | | | | (NOTE) | | +----------+----------+-------+----------+----------+----------+ | rejecte | ar | C | 1..N | Contains | | | dTaiList | ray(Tai) | | | the list | | | | | | | of | | | | | | | TAI(s) | | | | | | | of the | | | | | | | RA | | | | | | | within | | | | | | | which | | | | | | | the | | | | | | | S-NSSAI | | | | | | | is | | | | | | | r | | | | | | | ejected. | | | | | | | | | | | | | | (NOTE) | | +----------+----------+-------+----------+----------+----------+ | NOTE: | | | | | | | These | | | | | | | at | | | | | | | tributes | | | | | | | are | | | | | | | mutually | | | | | | | ex | | | | | | | clusive. | | | | | | | Either | | | | | | | one of | | | | | | | them | | | | | | | shall be | | | | | | | p | | | | | | | rovided. | | | | | | +----------+----------+-------+----------+----------+----------+
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous sclauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability n/a
* * *
#### 5.6.3.3 Enumeration: RequestTrigger
The enumeration RequestTrigger represents the possible Policy Control Request
Triggers. It shall comply with the provisions defined in table 5.6.3.3-1.
Table 5.6.3.3-1: Enumeration RequestTrigger
+----------------------+----------------------+----------------------+ | Enumeration value | Description | Applicability | +----------------------+----------------------+----------------------+ | LOC_CH | Location change | | | | (tracking area): the | | | | tracking area of the | | | | UE has changed. | | | | (NOTE 1) | | +----------------------+----------------------+----------------------+ | PRA_CH | Change of UE | | | | presence in PRA: the | | | | NF service consumer | | | | reports the current | | | | presence status of | | | | the UE in a Presence | | | | Reporting Area, and | | | | notifies that the UE | | | | enters/leaves the | | | | Presence Reporting | | | | Area. | | +----------------------+----------------------+----------------------+ | SERV_AREA_CH | Service Area | | | | Restriction change: | | | (NOTE 2) | the UDM notifies the | | | | NF service consumer | | | | that the subscribed | | | | service area | | | | restriction | | | | information has | | | | changed. | | +----------------------+----------------------+----------------------+ | RFSP_CH | RFSP index change: | | | | the UDM notifies the | | | (NOTE 2) | NF service consumer | | | | that the subscribed | | | | RFSP index has | | | | changed. | | +----------------------+----------------------+----------------------+ | ALLOWED_NSSAI_CH | Allowed NSSAI | SliceSupport, | | | change: the NF | DN | | | service consumer | NReplacementControl, | | | notifies that the | NetSliceRepl | | | set of UE allowed | | | | S-NSSAIs has | | | | changed. (NOTE 1) | | +----------------------+----------------------+----------------------+ | UE_AMBR_CH | UE-AMBR change: the | UE | | | UDM notifies the NF | -AMBR_Authorization | | (NOTE 2) | service consumer | | | | that the subscribed | | | | UE-AMBR has changed. | | +----------------------+----------------------+----------------------+ | SMF_SELECT_CH | SMF selection | D | | | information change: | NNReplacementControl | | | UE request for an | | | | unsupported DNN or | | | | UE request for a DNN | | | | within the list of | | | | DNN candidates for | | | | replacement per | | | | S-NSSAI. | | +----------------------+----------------------+----------------------+ | ACCESS_TYPE_CH | Access Type change: | MultipleAccessTypes | | | the NF service | | | | consumer notifies | | | | that the access type | | | | and the RAT type | | | | combinations | | | | available in the NF | | | | service consumer for | | | | a UE with | | | | simultaneous 3GPP | | | | and non-3GPP | | | | connectivity have | | | | changed. (NOTE 1) | | +----------------------+----------------------+----------------------+ | UE_SLICE_MBR_CH | UE-Slice-MBR change: | UE-Slic | | | the NF service | e-MBR_Authorization | | | consumer notifies | | | | any changes in the | | | | subscribed | | | | UE-Slice-MBR for | | | | each subscribed | | | | S-NSSAI of the home | | | | PLMN mapping to a | | | | S-NSSAI of the | | | | serving PLMN. | | +----------------------+----------------------+----------------------+ | NWDAF_DATA_CH | Indicates that the | EneNA | | | NWDAF instance IDs | | | (NOTE 2) | used for the UE | | | | and/or associated | | | | Analytics IDs have | | | | changed. | | +----------------------+----------------------+----------------------+ | TARGET_NSSAI | Generation of Target | TargetNSSAI | | | NSSAI: the NF | | | | service consumer | | | | notifies that the | | | | Target NSSAI was | | | | generated. | | +----------------------+----------------------+----------------------+ | SLICE_REPLACE_MGMT | Indicates that | NetSliceRepl | | | network slice | | | | replacement is | | | | needed for one or | | | | more S-NSSAI(s) of | | | | the UE\'s Allowed | | | | NSSAI and/or | | | | Partially Allowed | | | | NSSAI and the NF | | | | service consumer | | | | (i.e., AMF) cannot | | | | determine the | | | | Alternative | | | | S-NSSAI(s) for these | | | | S-NSSAI(s). | | +----------------------+----------------------+----------------------+ | FEAT_RENEG | The NF service | FeatureRenegotation | | | consumer notifies | | | (NOTE 2) | that the target AMF | | | | is requesting | | | | feature | | | | re-negotiaion. | | +----------------------+----------------------+----------------------+ | PARTIALLY | Partially Allowed | PartNetSliceSupport, | | _ALLOWED_NSSAI_CH | NSSAI change: the NF | NetSliceRepl | | | service consumer | | | | notifies that the | | | | set of Partially | | | | Allowed S-NSSAI(s) | | | | of the UE has | | | | changed. | | | | | | | | (NOTE 1) | | +----------------------+----------------------+----------------------+ | SNSSAIS_PAR | Change of the | PartNetSliceSupport | | TIALLY_REJECTED_CH | S-NSSAI(s) partially | | | | rejected in the RA: | | | | the NF service | | | | consumer notifies | | | | that the set of | | | | S-NSSAI(s) partially | | | | rejected in the RA | | | | for the UE has | | | | changed. | | | | | | | | (NOTE 1) | | +----------------------+----------------------+----------------------+ | R | Change of the | PartNetSliceSupport | | EJECTED_SNSSAIS_CH | Rejected S-NSSAI(s) | | | | in the RA: the NF | | | | service consumer | | | | notifies that the | | | | set of the Rejected | | | | S-NSSAI(s) in the RA | | | | for the UE has | | | | changed. | | | | | | | | (NOTE 1) | | +----------------------+----------------------+----------------------+ | PENDING_NSSAI_CH | Pending NSSAI | PartNetSliceSupport | | | change: the NF | | | | service consumer | | | | notifies that the | | | | set of Pending | | | | S-NSSAI(s) of the UE | | | | has changed. | | | | | | | | (NOTE 1) | | +----------------------+----------------------+----------------------+ | NOTE 1: This | | | | includes reporting | | | | the current value at | | | | the time the trigger | | | | is provisioned | | | | during the update or | | | | update notification | | | | of the policy | | | | association. | | | | | | | | NOTE 2: The NF | | | | service consumer | | | | always reports to | | | | the PCF. | | | +----------------------+----------------------+----------------------+
#### 5.6.3.4 Enumeration: PolicyAssociationReleaseCause
The enumeration PolicyAssociationReleaseCause represents the cause why the PCF
requests the termination of the policy association. It shall comply with the
provisions defined in table 5.6.3.4-1.
Table 5.6.3.4-1: Enumeration PolicyAssociationReleaseCause
* * *
Enumeration value Description Applicability UNSPECIFIED This value is used for
unspecified reasons.  
UE_SUBSCRIPTION This value is used to indicate that the session needs to be
terminated because the subscription of UE has changed (e.g. was removed).  
INSUFFICIENT_RES This value is used to indicate that the server is overloaded
and needs to abort the session.
* * *
## 5.7 Error handling
### 5.7.1 General
For the Npcf_AMPolicyControl API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [6]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [5] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [5].
In addition, the requirements in the following clauses are applicable for the
Npcf_AMPolicyControl API.
### 5.7.2 Protocol Errors
No specific protocol errors for the Npcf_AMPolicyControl API service are
specified.
### 5.7.3 Application Errors
The application errors defined for the Npcf_AMPolicyControl service are listed
in Table 5.7.3-1 and Table 5.7.3-2.
Table 5.7.3-1: Application errors
* * *
Application Error HTTP status code Description USER_UNKNOWN 400 Bad Request
The HTTP request is rejected because the end user specified in the request is
unknown to the PCF. ERROR_REQUEST_PARAMETERS 400 Bad Request The HTTP request
is rejected because the set of information needed by the PCF for AM Policy
selection is incomplete or erroneous or not available for the decision to be
made. PENDING_TRANSACTION 400 Bad Request This error shall be used when the
PendingTransaction feature is supported and the PCF receives an incoming
request on a policy association while it has an ongoing transaction on the
same policy association and cannot handle the request as described in clause
9.2 of 3GPP TS 29.513 [7]. POLICY_ASSOCIATION_NOT_FOUND 404 Not Found The HTTP
request is rejected because no policy association corresponding to the request
exists in the PCF. NOTE: Including a \"ProblemDetails\" data structure with
the \"cause\" attribute in the HTTP response is optional unless explicitly
mandated in the service operation clauses.
* * *
Table 5.7.3-2: Application errors when NF service consumer acts as a server to
receive a notification
+------------------------+------------------+------------------------+ | Application Error | HTTP status code | Description | +------------------------+------------------+------------------------+ | PENDING_TRANSACTION | 400 Bad Request | This error shall be | | | | used when the | | | | PendingTransaction | | | | feature is supported | | | | and the NF service | | | | consumer receives an | | | | incoming request on a | | | | policy association | | | | while it has an | | | | ongoing transaction on | | | | the same policy | | | | association and cannot | | | | handle the request as | | | | described in | | | | clause 9.2 of | | | | 3GPP TS 29.513 [7]. | | | | (NOTE 1) | +------------------------+------------------+------------------------+ | NOTE 1: This | | | | application error is | | | | included in the | | | | response to the Policy | | | | Update Notification | | | | HTTP POST request. | | | | | | | | NOTE 2: Including a | | | | \"ProblemDetails\" | | | | data structure with | | | | the \"cause\" | | | | attribute in the HTTP | | | | response is optional | | | | unless explicitly | | | | mandated in the | | | | service operation | | | | clauses. | | | +------------------------+------------------+------------------------+
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Npcf_AMPolicyControl
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [5].
Table 5.8-1: Supported Features
+----------------+--------------------+--------------------+---+ | Feature number | Feature Name | Description | | +----------------+--------------------+--------------------+---+ | 1 | SliceSupport | Indicates the | | | | | support of AM | | | | | policies | | | | | differentiation | | | | | based on the | | | | | awareness of the | | | | | allowed NSSAI. | | +----------------+--------------------+--------------------+---+ | 2 | PendingTransaction | This feature | | | | | indicates support | | | | | for the race | | | | | condition handling | | | | | as defined in | | | | | 3GP | | | | | P TS 29.513 [7]. | | +----------------+--------------------+--------------------+---+ | 3 | UE-A | Indicates the | | | | MBR_Authorization | support of UE-AMBR | | | | | control by the PCF | | | | | in the serving | | | | | network. | | +----------------+--------------------+--------------------+---+ | 4 | DNN | Indicates the | | | | ReplacementControl | support of DNN | | | | | replacement | | | | | control. | | +----------------+--------------------+--------------------+---+ | 5 | M | Indicates the | | | | ultipleAccessTypes | support of AM | | | | | policies for the | | | | | multiple access | | | | | types where the | | | | | served UE is | | | | | camping. | | +----------------+--------------------+--------------------+---+ | 6 | WirelineW | Indicates the | | | | irelessConvergence | support of | | | | | Wireline and | | | | | Wireless access | | | | | convergence. | | +----------------+--------------------+--------------------+---+ | 7 | ImmediateReport | Indicates the | | | | | support of the | | | | | current applicable | | | | | values report | | | | | corresponding to | | | | | the policy control | | | | | request triggers | | | | | for policy update | | | | | notification. | | +----------------+--------------------+--------------------+---+ | 8 | ES3XX | Extended Support | | | | | for 3xx | | | | | redirections. This | | | | | feature indicates | | | | | the support of | | | | | redirection for | | | | | any service | | | | | operation, | | | | | according to | | | | | Stateless NF | | | | | procedures as | | | | | specified in | | | | | clauses 6.5.3.2 | | | | | and 6.5.3.3 of | | | | | 3G | | | | | PP TS 29.500 [5] | | | | | and according to | | | | | HTTP redirection | | | | | principles for | | | | | indirect | | | | | communication, as | | | | | specified in | | | | | clause 6.10.9 of | | | | | 3GP | | | | | P TS 29.500 [5]. | | +----------------+--------------------+--------------------+---+ | 9 | UE-Slice- | Indicates the | | | | MBR_Authorization | support of | | | | | UE-Slice-MBR | | | | | control by the PCF | | | | | in the serving | | | | | network. | | +----------------+--------------------+--------------------+---+ | 10 | AMInfluence | Indicates the | | | | | support of the | | | | | alternative | | | | | mechanism to | | | | | support informing | | | | | the PCF for the UE | | | | | of PDU session(s) | | | | | esta | | | | | blished/terminated | | | | | events via the | | | | | delivery of the | | | | | PCF for the UE | | | | | information | | | | | necessary for the | | | | | PCF for the PDU | | | | | session to send | | | | | notifications on | | | | | PDU session(s) | | | | | esta | | | | | blished/terminated | | | | | events through the | | | | | AMF and the SMF. | | +----------------+--------------------+--------------------+---+ | 11 | EneNA | This feature | | | | | indicates the | | | | | support of NWDAF | | | | | data reporting. | | +----------------+--------------------+--------------------+---+ | 12 | TargetNSSAI | Indicates the | | | | | support for RFSP | | | | | Index associated | | | | | with the Target | | | | | NSSAI. | | +----------------+--------------------+--------------------+---+ | 13 | 5 | This feature | | | | GAccessStratumTime | indicates the | | | | | support of 5G | | | | | acess stratum time | | | | | distribution | | | | | parameters | | | | | provisioning. | | +----------------+--------------------+--------------------+---+ | 14 | Fe | This feature | | | | atureRenegotiation | indicates the | | | | | support of feature | | | | | renegotiation | | | | | during the update | | | | | of a policy | | | | | association | | | | | triggered by UE | | | | | mobility with AMF | | | | | change. | | +----------------+--------------------+--------------------+---+ | 15 | NetSliceRepl | This feature | | | | | indicates the | | | | | support of the | | | | | network slice | | | | | replacement | | | | | functionality as | | | | | part of the | | | | | enhancements of | | | | | the network | | | | | slicing | | | | | functionality. | | | | | | | | | | The following | | | | | functionalities | | | | | are supported: | | | | | | | | | | - Support the | | | | | network slice | | | | | replacement | | | | | information | | | | | management. | | | | | | | | | | This feature | | | | | requires the | | | | | support of the | | | | | \"SliceSupport\" | | | | | and/or | | | | | \"DNNRe | | | | | placementControl\" | | | | | features. | | +----------------+--------------------+--------------------+---+ | 16 | RFSPValidityTime | This feature | | | | | indicates the | | | | | support of the | | | | | provisioning of a | | | | | validity time for | | | | | the RFSP Index | | | | | value that | | | | | indicates the | | | | | EPC/E-UTRAN access | | | | | is prioritized | | | | | over 5GS access. | | +----------------+--------------------+--------------------+---+ | 17 | NetTimeSyncStatus | This feature | | | | | indicates the | | | | | support of network | | | | | timing | | | | | synchronization | | | | | status and | | | | | reporting. This | | | | | feature requires | | | | | the support of the | | | | | 5 | | | | | GAccessStratumTime | | | | | feature as well. | | +----------------+--------------------+--------------------+---+ | 18 | NetSliceUsageCtrl | This feature | | | | | indicates the | | | | | support of the | | | | | network slice | | | | | usage control | | | | | functionality as | | | | | part of the | | | | | enhancements of | | | | | the network | | | | | slicing | | | | | functionality. | | | | | | | | | | The following | | | | | functionalities | | | | | are supported: | | | | | | | | | | - Support the | | | | | provisioning by | | | | | the PCF of the | | | | | network slice | | | | | usage control | | | | | information (e.g., | | | | | slice | | | | | deregistration | | | | | inactivity timer | | | | | value). | | | | | | | | | | This feature | | | | | requires the | | | | | support of the | | | | | \"SliceSupport\" | | | | | and/or | | | | | \"DNNRe | | | | | placementControl\" | | | | | features. | | +----------------+--------------------+--------------------+---+ | 19 | P | This feature | | | | artNetSliceSupport | indicates the | | | | | partial network | | | | | slice support in a | | | | | Registration Area | | | | | functionality as | | | | | part of the | | | | | enhancements of | | | | | the network | | | | | slicing | | | | | functionality. | | | | | | | | | | The following | | | | | functionalities | | | | | are supported: | | | | | | | | | | - Support the | | | | | reporting of the | | | | | changes in the | | | | | Partially Allowed | | | | | NSSAI, S-NSSAI(s) | | | | | partially rejected | | | | | in the RA, | | | | | Rejected | | | | | S-NSSAI(s) in the | | | | | RA and/or the | | | | | Pending NSSAI to | | | | | the PCF. | | | | | | | | | | This feature | | | | | requires the | | | | | support of the | | | | | \"SliceSupport\" | | | | | and/or | | | | | \"DNNRe | | | | | placementControl\" | | | | | features. | | +----------------+--------------------+--------------------+---+
## 5.9 Security
As indicated in 3GPP TS 33.501 [19] and 3GPP TS 29.500 [5], the access to the
Npcf_AMPolicyControl API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [20]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [13])
plays the role of the authorization server.
If OAuth2 is used, an NF service sonsumer, prior to consuming services offered
by the Npcf_AMPolicyControl API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [13], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF service consumer used for
discovering the Npcf_AMPolicyControl service.
The Npcf_AMPolicyControl API defines a single scope \"npcf-am-policy-control\"
for the entire service, and it does not define any additional scopes at
resource or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [10] specification of HTTP messages and
content bodies used by the Npcf_AMPolicyControl API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[22] and clause 5.3.1 of the 3GPP TS 29.501 [6] for further information).
# A.2 Npcf_AMPolicyControl API
openapi: 3.0.0
info:
version: 1.3.0-alpha.4
title: Npcf_AMPolicyControl
description: \|
Access and Mobility Policy Control Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.507 V18.3.0; 5G System; Access and Mobility Policy
Control Service.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.507/\'
servers:
\- url: \'{apiRoot}/npcf-am-policy-control/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- npcf-am-policy-control
paths:
/policies:
post:
operationId: CreateIndividualAMPolicyAssociation
summary: Create individual AM policy association.
tags:
\- AM Policy Associations (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyAssociationRequest\'
responses:
\'201\':
description: Created
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyAssociation\'
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/npcf-am-policy-control/v1/policies/{polAssoId}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
policyUpdateNotification:
\'{\$request.body#/notificationUri}/update\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyUpdate\'
responses:
\'200\':
description: >
OK. The current applicable values corresponding to the policy control request
trigger is reported
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmRequestedValueRep\'
\'204\':
description: No Content, Notification was successful.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
policyAssocitionTerminationRequestNotification:
\'{\$request.body#/notificationUri}/terminate\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/TerminationNotification\'
responses:
\'204\':
description: No Content, Notification was successful.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/policies/{polAssoId}:
get:
operationId: ReadIndividualAMPolicyAssociation
summary: Read individual AM policy association.
tags:
\- Individual AM Policy Association (Document)
parameters:
\- name: polAssoId
in: path
description: Identifier of a policy association
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource representation is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyAssociation\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
operationId: DeleteIndividualAMPolicyAssociation
summary: Delete individual AM policy association.
tags:
\- Individual AM Policy Association (Document)
parameters:
\- name: polAssoId
in: path
description: Identifier of a policy association
required: true
schema:
type: string
responses:
\'204\':
description: No Content. Resource was successfully deleted.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/policies/{polAssoId}/update:
post:
operationId: ReportObservedEventTriggersForIndividualAMPolicyAssociation
summary: >
Report observed event triggers and obtain updated policies for an individual
AM
policy association.
tags:
\- Individual AM Policy Association (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyAssociationUpdateRequest\'
parameters:
\- name: polAssoId
in: path
description: Identifier of a policy association
required: true
schema:
type: string
responses:
\'200\':
description: OK. Updated policies are returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/PolicyUpdate\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
npcf-am-policy-control: Access to the Npcf_AMPolicyControl API
schemas:
PolicyAssociation:
description: Represents an individual AM Policy Association resource.
type: object
properties:
request:
\$ref: \'#/components/schemas/PolicyAssociationRequest\'
triggers:
type: array
items:
\$ref: \'#/components/schemas/RequestTrigger\'
minItems: 1
description: Request Triggers that the PCF subscribes.
servAreaRes:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ServiceAreaRestriction\'
wlServAreaRes:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/WirelineServiceAreaRestriction\'
rfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
rfspValTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
targetRfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
smfSelInfo:
\$ref: \'#/components/schemas/SmfSelectionData\'
ueAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
ueSliceMbrs:
type: array
items:
\$ref: \'#/components/schemas/UeSliceMbr\'
minItems: 1
description: >
One or more UE-Slice-MBR(s) for S-NSSAI(s) of serving PLMN as part of the
AMF Access and Mobility Policy as determined by the PCF.
pras:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfo\'
minProperties: 1
description: >
Contains the presence reporting area(s) for which reporting was requested.
The praId attribute within the PresenceInfo data type is the key of the map.
pcfUeInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PcfUeCallbackInfo\'
matchPdus:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionInfo\'
nullable: true
asTimeDisParam:
\$ref: \'#/components/schemas/AsTimeDistributionParam\'
sliceUsgCtrlInfoSets:
type: object
additionalProperties:
\$ref: \'#/components/schemas/SliceUsgCtrlInfo\'
minProperties: 1
description: >
Represents the network slice usage control information.
The key of the map is the on-demand S-NSSAI (within the \"snssai\" attribute
of the
corresponding map value) to which the network slice usage control information
is
related.
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- suppFeat
PolicyAssociationRequest:
description: >
Information which the NF service consumer provides when requesting the
creation of a policy
association. The serviveName property corresponds to the serviceName in the
main body
of the specification**.**
type: object
properties:
notificationUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
altNotifIpv4Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
minItems: 1
description: Alternate or backup IPv4 Address(es) where to send Notifications.
altNotifIpv6Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
minItems: 1
description: Alternate or backup IPv6 Address(es) where to send Notifications.
altNotifFqdns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
minItems: 1
description: Alternate or backup FQDN(s) where to send Notifications.
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
accessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
accessTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
minItems: 1
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
userLoc:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
timeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
servingPlmn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
ratTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
minItems: 1
groupIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
minItems: 1
servAreaRes:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ServiceAreaRestriction\'
wlServAreaRes:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/WirelineServiceAreaRestriction\'
rfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
ueAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
ueSliceMbrs:
type: array
items:
\$ref: \'#/components/schemas/UeSliceMbr\'
minItems: 1
description: >
The subscribed UE Slice-MBR for each subscribed S-NSSAI of the home PLMN
mapping to
a S-NSSAI of the serving PLMN Shall be provided when available.
allowedSnssais:
description: array of allowed S-NSSAIs for the 3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
partAllowedNssai:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartiallyAllowedSnssai\'
minProperties: 1
description: >
Represents the Partially Allowed NSSAI. The \"snssai\" attribute within the
PartiallyAllowedSnssai data type shall be the key of the map.
snssaisPartRejected:
type: object
additionalProperties:
\$ref: \'#/components/schemas/SnssaiPartRejected\'
minProperties: 1
description: >
Represents the set of S-NSSAI(s) partially rejected in the RA.
The \"snssai\" attribute within the SnssaiPartRejected data type shall be the
key of the
map.
rejectedSnssais:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
pendingNssai:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
targetSnssais:
description: array of target S-NSSAIs.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
mappingSnssais:
description: >
mapping of each S-NSSAI of the Allowed NSSAI to the corresponding S-NSSAI of
the HPLMN.
type: array
items:
\$ref: \'TS29531_Nnssf_NSSelection.yaml#/components/schemas/MappingOfSnssai\'
minItems: 1
n3gAllowedSnssais:
description: array of allowed S-NSSAIs for the Non-3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
serviveName:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/ServiceName\'
traceReq:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TraceData\'
nwdafDatas:
type: array
items:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/NwdafData\'
minItems: 1
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- notificationUri
\- suppFeat
\- supi
PolicyAssociationUpdateRequest:
description: >
Represents information that the NF service consumer provides when requesting
the update of
a policy association**.**
type: object
properties:
notificationUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
altNotifIpv4Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
minItems: 1
description: Alternate or backup IPv4 Address(es) where to send Notifications.
altNotifIpv6Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
minItems: 1
description: Alternate or backup IPv6 Address(es) where to send Notifications.
altNotifFqdns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
minItems: 1
description: Alternate or backup FQDN(s) where to send Notifications.
triggers:
type: array
items:
\$ref: \'#/components/schemas/RequestTrigger\'
minItems: 1
description: Request Triggers that the NF service consumer observes.
servAreaRes:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ServiceAreaRestriction\'
wlServAreaRes:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/WirelineServiceAreaRestriction\'
rfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
smfSelInfo:
\$ref: \'#/components/schemas/SmfSelectionData\'
ueAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
ueSliceMbrs:
type: array
items:
\$ref: \'#/components/schemas/UeSliceMbr\'
minItems: 1
description: >
The subscribed UE-Slice-MBR for each subscribed S-NSSAI of the home PLMN
mapping
to a S-NSSAI of the serving PLMN Shall be provided for the \"UE_SLICE_MBR_CH\"
policy control request trigger.
praStatuses:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfo\'
minProperties: 1
description: >
Contains the UE presence status for tracking area for which changes of the UE
presence
occurred. The praId attribute within the PresenceInfo data type is the key of
the map.
userLoc:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
allowedSnssais:
description: array of allowed S-NSSAIs for the 3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
partAllowedNssai:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartiallyAllowedSnssai\'
minProperties: 1
description: >
Represents the Partially Allowed NSSAI. The \"snssai\" attribute within the
PartiallyAllowedSnssai data type shall be the key of the map.
snssaisPartRejected:
type: object
additionalProperties:
\$ref: \'#/components/schemas/SnssaiPartRejected\'
minProperties: 1
description: >
Represents the set of S-NSSAI(s) partially rejected in the RA.
The \"snssai\" attribute within the SnssaiPartRejected data type shall be the
key of the
map.
rejectedSnssais:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
pendingNssai:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
targetSnssais:
description: array of target S-NSSAIs.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
mappingSnssais:
description: >
mapping of each S-NSSAI of the Allowed NSSAI to the corresponding S-NSSAI of
the HPLMN.
type: array
items:
\$ref: \'TS29531_Nnssf_NSSelection.yaml#/components/schemas/MappingOfSnssai\'
minItems: 1
accessTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
minItems: 1
ratTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
minItems: 1
n3gAllowedSnssais:
description: array of allowed S-NSSAIs for the Non-3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
unavailSnssais:
description: >
Represents the unavailable S-NSSAI(s) from the UE\'s Allowed NSSAI and/or
Partially Allowed NSSAI that require network slice replacement.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
traceReq:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TraceData\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
nwdafDatas:
type: array
items:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/NwdafData\'
minItems: 1
nullable: true
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
PolicyUpdate:
description: >
Represents updated policies that the PCF provides in a notification or in a
reply to an
Update Request**.**
type: object
properties:
resourceUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
triggers:
type: array
items:
\$ref: \'#/components/schemas/RequestTrigger\'
minItems: 1
nullable: true
description: Request Triggers that the PCF subscribes.
servAreaRes:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ServiceAreaRestriction\'
wlServAreaRes:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/WirelineServiceAreaRestriction\'
rfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
rfspValTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
targetRfsp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RfspIndex\'
smfSelInfo:
\$ref: \'#/components/schemas/SmfSelectionData\'
ueAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
ueSliceMbrs:
type: array
items:
\$ref: \'#/components/schemas/UeSliceMbr\'
minItems: 1
description: >
One or more UE-Slice-MBR(s) for S-NSSAI(s) of serving PLMN the allowed NSSAI
as
part of the AMF Access and Mobility Policy as determined by the PCF.
pras:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfoRm\'
description: >
Contains the presence reporting area(s) for which reporting was requested. The
praId
attribute within the PresenceInfo data type is the key of the map.
minProperties: 1
nullable: true
pcfUeInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PcfUeCallbackInfo\'
matchPdus:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionInfo\'
nullable: true
asTimeDisParam:
\$ref: \'#/components/schemas/AsTimeDistributionParam\'
snssaiReplInfos:
nullable: true
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SnssaiReplaceInfo\'
minProperties: 1
description: >
Contains the network slice replacement information.
The key of the map is the concerned unavailable S-NSSAI (within the \"snssai\"
attribute
of the corresponding map value) to which the network slice replacement
information is
related.
sliceUsgCtrlInfoSets:
type: object
additionalProperties:
\$ref: \'#/components/schemas/SliceUsgCtrlInfo\'
minProperties: 1
description: >
Represents the updated network slice usage control information.
The key of the map is the on-demand S-NSSAI (within the \"snssai\" attribute
of the
corresponding map value) to which the network slice usage control information
is
related.
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- resourceUri
TerminationNotification:
description: >
Represents a request to terminate a policy Association that the PCF provides
in a
notification.
type: object
properties:
resourceUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
cause:
\$ref: \'#/components/schemas/PolicyAssociationReleaseCause\'
required:
\- resourceUri
\- cause
SmfSelectionData:
description: Represents the SMF Selection information that may be replaced by
the PCF.
type: object
properties:
unsuppDnn:
type: boolean
candidates:
type: object
additionalProperties:
\$ref: \'#/components/schemas/CandidateForReplacement\'
minProperties: 1
description: >
Contains the list of DNNs per S-NSSAI that are candidates for replacement. The
snssai
attribute within the CandidateForReplacement data type is the key of the map.
nullable: true
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
mappingSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
nullable: true
CandidateForReplacement:
description: Represents a list of candidate DNNs for replacement for an
S-NSSAI**.**
type: object
properties:
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
dnns:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
minItems: 1
nullable: true
required:
\- snssai
nullable: true
AmRequestedValueRep:
description: >
Represents the current applicable values corresponding to the policy control
request
triggers**.**
type: object
properties:
userLoc:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
praStatuses:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfo\'
minProperties: 1
description: >
Contains the UE presence statuses for tracking areas. The praId attribute
within the
PresenceInfo data type is the key of the map.
accessTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
minItems: 1
ratTypes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
allowedSnssais:
description: array of allowed S-NSSAIs for the 3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
n3gAllowedSnssais:
description: array of allowed S-NSSAIs for the Non-3GPP access.
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
partAllowedNssai:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartiallyAllowedSnssai\'
minProperties: 1
description: >
Represents the Partially Allowed NSSAI. The \"snssai\" attribute within the
PartiallyAllowedSnssai data type shall be the key of the map.
snssaisPartRejected:
type: object
additionalProperties:
\$ref: \'#/components/schemas/SnssaiPartRejected\'
minProperties: 1
description: >
Represents the set of S-NSSAI(s) partially rejected in the RA.
The \"snssai\" attribute within the SnssaiPartRejected data type shall be the
key of the
map.
rejectedSnssais:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
pendingNssai:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
AsTimeDistributionParam:
description: Contains the 5G acess stratum time distribution parameters**.**
type: object
properties:
asTimeDistInd:
type: boolean
uuErrorBudget:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UintegerRm\'
clkQltDetLvl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ClockQualityDetailLevel\'
clkQltAcptCri:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/ClockQualityAcceptanceCriterion\'
nullable: true
UeSliceMbr:
description: Contains a UE-Slice-MBR and the related information.
type: object
properties:
sliceMbr:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SliceMbr\'
minProperties: 1
description: Contains the MBR for uplink and the MBR for downlink.
servingSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
mappedHomeSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
required:
\- sliceMbr
\- servingSnssai
nullable: true
SliceUsgCtrlInfo:
description: Represents network slice usage control information.
type: object
properties:
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
deregInactivTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSecRm\'
required:
\- snssai
SnssaiPartRejected:
description: Represents the list of the S-NSSAI(s) partially rejected in the
RA.
type: object
properties:
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
allowedTaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
minItems: 1
rejectedTaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
minItems: 1
required:
\- snssai
oneOf:
\- required: [ allowedTaiList ]
\- required: [ rejectedTaiList ]
RequestTrigger:
anyOf:
\- type: string
enum:
\- LOC_CH
\- PRA_CH
\- SERV_AREA_CH
\- RFSP_CH
\- ALLOWED_NSSAI_CH
\- UE_AMBR_CH
\- UE_SLICE_MBR_CH
\- SMF_SELECT_CH
\- ACCESS_TYPE_CH
\- NWDAF_DATA_CH
\- TARGET_NSSAI
\- SLICE_REPLACE_MGMT
\- FEAT_RENEG
\- PARTIALLY_ALLOWED_NSSAI_CH
\- SNSSAIS_PARTIALLY_REJECTED_CH
\- REJECTED_SNSSAIS_CH
\- PENDING_NSSAI_CH
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Represents the possible request triggers.
Possible values are:
\- LOC_CH: Location change (tracking area). The tracking area of the UE has
changed.
\- PRA_CH: Change of UE presence in PRA. The AMF reports the current presence
status
of the UE in a Presence Reporting Area, and notifies that the UE enters/leaves
the
Presence Reporting Area.
\- SERV_AREA_CH: Service Area Restriction change. The UDM notifies the AMF
that the
subscribed service area restriction information has changed.
\- RFSP_CH: RFSP index change. The UDM notifies the AMF that the subscribed
RFSP index has
changed.
\- ALLOWED_NSSAI_CH: Allowed NSSAI change. The AMF notifies that the set of UE
allowed
S-NSSAIs has changed.
\- UE_AMBR_CH: UE-AMBR change. The UDM notifies the AMF that the subscribed
UE-AMBR has
changed.
\- SMF_SELECT_CH: SMF selection information change. The UE requested for an
unsupported
DNN or UE requested for a DNN within the list of DNN candidates for
replacement per
S-NSSAI.
\- ACCESS_TYPE_CH: Access Type change. The AMF notifies that the access type
and the RAT
type combinations available in the AMF for a UE with simultaneous 3GPP and
non-3GPP
connectivity has changed.
\- UE_SLICE_MBR_CH: UE-Slice-MBR change. The NF service consumer notifies any
changes
in the subscribed UE-Slice-MBR for each subscribed S-NSSAI of the home PLMN
mapping
to a S-NSSAI of the serving PLMN.
\- NWDAF_DATA_CH: NDWAF DATA CHANGE. The AMF notifies that the NWDAF instance
IDs used
for the UE and/or associated Analytics IDs used for the UE and available in
the AMF
have changed.
\- TARGET_NSSAI: Generation of Target NSSAI. The NF service consumer notifies
that the
Target NSSAI was generated.
\- SLICE_REPLACE_MGMT: Indicates that slice replacement is needed for one or
more S-NSSAI(s)
of the UE\'s Allowed NSSAI and/or Partially Allowed NSSAI and the AMF cannot
determine the
Alternative S-NSSAI(s) for these S-NSSAI(s).
\- FEAT_RENEG: The NF service consumer notifies that the target AMF is
requesting feature
re-negotiation.
\- PARTIALLY_ALLOWED_NSSAI_CH: Partially Allowed NSSAI change. The NF service
consumer
notifies that the set of Partially Allowed S-NSSAI(s) of the UE has changed.
\- SNSSAIS_PARTIALLY_REJECTED_CH: Change of the S-NSSAI(s) partially rejected
in the RA. The
NF service consumer notifies that the set of S-NSSAI(s) partially rejected in
the RA for
the UE has changed.
\- REJECTED_SNSSAIS_CH: Change of the Rejected S-NSSAI(s) in the RA. The NF
service consumer
notifies that the set of the Rejected S-NSSAI(s) in the RA for the UE has
changed.
\- PENDING_NSSAI_CH: Pending NSSAI change. The NF service consumer notifies
that the set of
Pending S-NSSAI(s) of the UE has changed.
PolicyAssociationReleaseCause:
anyOf:
\- type: string
enum:
\- UNSPECIFIED
\- UE_SUBSCRIPTION
\- INSUFFICIENT_RES
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: \|
Represents the cause why the PCF requests the termination of the policy
association.
Possible values are:
\- UNSPECIFIED: This value is used for unspecified reasons.
\- UE_SUBSCRIPTION: This value is used to indicate that the session needs to
be
terminated because the subscription of UE has changed (e.g. was removed).
\- INSUFFICIENT_RES: This value is used to indicate that the server is
overloaded and
needs to abort the session.
###### ## Annex B (normative): Wireless and wireline convergence access
support
# B.1 Scope
This annex defines procedures for wireless and wireline convergence access
support for 5GS. The stage 2 definition and procedures are contained in 3GPP
TS 23.316 [23]. The System Architecture for wireless and wireline convergence
access is defined in 3GPP TS 23.501 [2].
# B.2 Npcf_AMPolicyControl Service
## B.2.1 Service Description
### B.2.1.1 Overview
Clause 4.1.1 applies with the modification that the UE is replaced by the
5G-RG and the W-AGF, which is acting as a UE towards the 5GC on behalf of the
FN-RG.
### B.2.1.2 Service Architecture
Clause 4.1.2 applies with the exception that roaming functionality shall not
apply in this Release of the specification for access and mobility policy
control for 5G-RG connecting via W-5GAN and FN-RG. Roaming architecture is
only applicable to a 5G-RG connecting to the 5GC via NG RAN.
### B.2.1.3 Network Functions
#### B.2.1.3.1 Policy Control Function (PCF)
The PCF functionality defined in clause 4.1.3.1 shall apply with the following
modifications for wireline access:
\- The UE-AMBR control by the serving network does not apply.
\- The Service Area Restrictions for a FN-BRG do not apply.
\- The PCF provides access and mobility related policy control as described in
this Annex.
#### B.2.1.3.2 NF Service Consumers
The NF service consumer functionality defined in clause 4.1.3.2 shall apply
with the following exceptions:
\- The UE-AMBR control by the visited network is only applicable for a 5G-RG
registered over 3GPP access.
\- The NF service consumer enforces access and mobility related policy control
as described in this Annex.
# B.3 Service Operation
## B.3.1 Introduction
The descriptions in clause 4.2.1 are applied with the following differences:
\- UE is replaced by the 5G-RG.
## B.3.2 Npcf_AMPolicyControl_Create Service Operation
### B.3.2.1 General
The procedure defined in clause 4.2.2.1 is applied with following differences:
\- UE is replaced by the 5G-RG or FN-RG if applicable.
\- Handling of RFSP information is not applicable if the 5G-RG or FN-RG
connects the 5GC via wireline access.
\- When the 5G-BRG or FN-BRG connects the 5GC via W-5BBAN, the
\"n3gaLocation\" attribute shall be included in the \"ueLoc\" attribute and:
\- Global Line ID including the line Id and either PLMN Id or operator Id
shall be encoded within the \"gli\" attribute; and
\- the \"w5gbanLineType\" attribute to indicate whether the W-5GBAN access is
DSL or PON may be included.
\- The HFC Node Identifier in the \"hfcNodeId\" attribute of the
\"n3gaLocation\" attribute included in the \"userLoc\" attribute within the
PolicyAssociationRequest data structure when the 5G-CRG or FN-CRG connects to
the 5GC via W-5GCAN.
\- Only the policy control request triggers defined in clause B.3.4.2 are
provided by the PCF when the 5G-RG or FN-RG connects the 5GC via wireline
access.
\- The PolicyAssociationRequest data structure shall include, if available,
and if the feature \"WirelineWirelessConvergence\" is supported, wireline
access Service Area Restrictions (see clause B.3.2.2.2) derived from the
wireline access Service Area Restrictions obtained from the UDM by mapping any
service areas denoted by geographical information into Line IDs (for a 5G-BRG)
or HFC Node IDs (for a 5G-CRG and FN-CRG) encoded as \"wlServAreaRes\"
attribute.
\- The PolicyAssociation data type returned as body of the HTTP \"201
Created\" response shall include if the feature
\"WirelineWirelessConvergence\" is supported, and if the PCF received the
\"wlServAreaRes\" in the request, wireline Service Area Restrictions encoded
as \"wlServAreaRes\" attribute.
\- If the feature \"MultipleAccessTypes\" is supported, the NF service
consumer (e.g. AMF) shall include:
a) the RAT type entry corresponding to non-3GPP wireline access and/or the RAT
type entry corresponding to the 3GPP access encoded in the \"ratTypes\"
attribute, if available; and
b) the \"accessTypes\" attribute indicating registration in the 3GPP access,
or registration in the non-3GPP access, or registration in both 3GPP and
non-3GPP access, if available.
NOTE: When both, 3GPP access and non-3GPP accesses are available, the
\"accessType\" attribute and the \"ratType\" attribute within the
PolicyAssociationRequest type contain the access type and RAT type
corresponding to the 3GPP access.
\- If the feature \"SliceSupport\" or the feature \"DNNReplacementControl\" is
supported in the AMF, the UE is registered in the non-3GPP access, and the
feature \"MultipleAccessTypes\" is supported, the NF service consumer (e.g.
AMF) shall include the Allowed NSSAI in the non-3GPP access encoded in the
\"n3gAllowedSnssais\" attribute.
\- If the feature \"DNNReplacementControl\" is supported, the UE is registered
in the non-3GPP access, and the feature \"MultipleAccessTypes\" is supported,
the NF service consumer (e.g. AMF) may include the mapping of each S-NSSAI of
the Allowed NSSAI in the non-3GPP access to the corresponding S-NSSAI of the
HPLMN encoded in the \"mappingSnssais\" attribute.
\- The PEI that may be included within the \"pei\" attribute shall have one of
the following representations:
a) If the 5G-BRG supports only wireline access, the PEI shall be the 5G-BRG
MAC address.
b) If the 5G-CRG supports only wireline access, the PEI shall be the cable
modem MAC address.
c) If the 5G-RG supports at least one 3GPP access technology, the PEI shall be
the allocated IMEI or IMEISV.
d) For the FN-BRG and FN-CRG, the PEI shall be the FN-RG MAC address.
NOTE: When the PEI includes an indication that the MAC address cannot be used
as Equipment identifier of the FN-RG, the PEI cannot be trusted for regulatory
purposes and cannot be used for equipment based policy evaluation.
### B.3.2.2 AMF Access and Mobility Policy
#### B.3.2.2.1 General
The functionality defined in clause 4.2.2.3 shall apply with the following
modifications:
\- UE-AMBR defined in clause 4.2.2.3.3 shall not apply for wireline access.
\- RFSP Index defined in clause 4.2.2.3.2 shall not apply for wireline access.
\- Service Area Restriction defined in clause 4.2.2.3.1 is only applicable for
a 5G-RG connected via NG-RAN. The wireline access Service Area Restriction
defined in clause B.3.2.2.2 shall apply for a FN-CRG and/or a 5G-RG (5G-BRG
and 5G-CRG) connected via wireline access.
#### B.3.2.2.2 Wireline Service Area Restriction
If service area restrictions are enabled, and if the feature
\"WirelineWirelessConvergence\" is supported, the Service Area Restriction
information is encoded using the \"WirelineServiceAreaRestriction\" data type
defined in 3GPP TS 29.571 [11] and consists of:
\- either a limited allowed area represented as both of:
(i) a list of either Line IDs encoded as \"globLineIds\" (for a 5G-BRG) or
HFC-Node IDs (for 5G-CRG and FN-CRG) encoded as \"hfcNIds\" attribute within
the \"areas\" attribute; and
(ii) the \"restrictionType\" attribute set to \"ALLOWED_AREAS\";
\- or a limited not allowed area represented as both of:
(i) a list of either Line IDs encoded as \"globLineIds\" (for a 5G-BRG) or
HFC-Node IDs (for 5G-CRG and FN-CRG) encoded as \"hfcNIds\" attribute within
the \"areas\" attribute; and
(ii) the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\";
When the authorized wireline service area restrictions result in an unlimited
set of allowed HFC-Node IDs or Line IDs, the PCF shall include:
\- an empty \"wlServAreaRes\" attribute; or
\- the \"restrictionType\" attribute set to \"NOT_ALLOWED_AREAS\" and an empty
\"areas\" attribute.
When the authorized wireline service area restrictions result in an unlimited
set of not-allowed HFC-Node IDs or Line IDs, the PCF shall include the
\"restrictionType\" attribute set to \"ALLOWED_AREAS\" and an empty \"areas\"
attribute.
#### B.3.2.2.3 Void
## B.3.3 Npcf_AMPolicyControl_UpdateNotify Service Operation
### B.3.3.1 General
The functionality defined in clause 4.2.4.2 and 4.2.4.3 shall apply.
## B.3.4 Npcf_AMPolicyControl_Update Service Operation
### B.3.4.1 General
The general procedure specified in clause 4.2.3.2 to modify an existing AM
policy association shall apply with the exception that for a FN-RG or a 5G-RG
registering via wireline access only, the existing AM policy association shall
not be updated due to location change (tracking area), change of UE presence
in PRA, or RFSP index change.
If the feature \"MultipleAccessTypes\" is supported, the NF service consumer
may include in the PolicyAssociationUpdateRequest data structure:
\- if the Access Type and/or the RAT type changed and the access type change
Policy Control Request Trigger was previously provisioned (see clause
B.3.4.2), the list of Access Type and RAT Type combinations available encoded
in the \"accessTypes\" attribute, \"ratTypes\" attribute.
When the feature \"MultipleAccessTypes\" is supported the PCF may include in
the PolicyUpdate data type the access type change Policy Control Request
Trigger (see clause B.3.4.2) encoded within the \"triggers\" attribute.
If the feature \"SliceSupport\" or the feature \"DNNReplacementControl\" is
supported in the AMF, the UE is registered in the non-3GPP access, and the
feature \"MultipleAccessTypes\" is supported, the NF service consumer (e.g.
AMF) shall include the Allowed NSSAI in the non-3GPP access encoded in the
\"n3gAllowedSnssais\" attribute together with the \"ALLOWED_NSSAI_CH\" policy
control request trigger when a change of the Allowed NSSAI for the non-3GPP
access occurred.
If the feature \"DNNReplacementControl\" is supported, the UE is registered in
the non-3GPP access, and the feature \"MultipleAccessTypes\" is supported, the
Allowed NSSAI changed and/or the mapping of a S-NSSAI of the Allowed NSSAI to
the corresponding S-NSSAI of the HPLMN changed, and the Policy Control Request
Trigger \"Change of allowed NSSAI\" was provided then NF service consumer
(e.g. AMF) may include the mapping of each S-NSSAI of the Allowed NSSAI in the
non-3GPP access to the corresponding S-NSSAI of the HPLMN encoded in the
\"mappingSnssais\" attribute.
In addition, if the feature \"WirelineWirelessConvergence\" is supported:
\- the PolicyAssociationUpdateRequest data structure shall include if a
wireline access Service Area restriction change occurred, the wireline access
Service Area Restrictions (see clause B.3.2.2.2) derived from the ones
obtained from the UDM encoded as \"wlServAreaRes\" attribute;
\- the PolicyUpdate data returned in the response, if the PCF received the \"
wlServAreaRes\" attribute in the request, wireline access Service Area
Restrictions encoded as \"wlServAreaRes\" attribute.
### B.3.4.2 Policy Control Request Triggers
For a 5G-RG registering via NG-RAN, the Policy Control Request Triggers
defined in clause 4.2.3.2 shall apply.
For a FN-RG or a 5G-RG registering via wireline access, only the following
Policy Control Request Triggers defined in clause 4.2.3.2 shall apply:
\- \"SERV_AREA _CH\", i.e. Service Area Restriction change: the UDM notifies
the NF service consumer that the subscribed service area restriction
information has changed;
\- \"ALLOWED_NSSAI_CH\", i.e. change of allowed NSSAI of the served UE;
NOTE 1: The \"ALLOWED_NSSAI_CH\" trigger only applies if the feature
\"SliceSupport\" or the feature \"DNNReplacementControl\" is supported.
NOTE 2: The \"SERV_AREA_CH\" trigger is also used to notify that the
subscribed wireline access service area restriction information has changed.
\- \"ACCESS_TYPE_CH\", i.e. the access type change: the NF service consumer
notifies that the access type and the RAT type combinations available in the
NF service consumer for a UE with simultaneous 3GPP and non-3GPP connectivity
has changed; and
NOTE 3: The \"ACCESS_TYPE_CH\" trigger only applies if the
\"MultipleAccessTypes\" feature is supported.
\- \"SMF_SELECT_CH\", i.e. SMF selection information change.
NOTE 4: The \"SMF_SELECT_CH\" trigger only applies if the
\"DNNReplacementControl\" feature is supported.
### B.3.4.3 Encoding of updated policy
Updated policies shall be encoded within the PolicyUpdate as specified in
clause 4.2.3.3 with the modifications listed in clauses B.3.4.1, B.3.4.2, and
this clause.
\- AMF Access and Mobility Policy (see clause B.3.2.2.2) Service Area
Restriction for wireline access is encoded as \"wlServAreaRes\" attribute.
## B.3.5 Npcf_AMPolicyControl_Delete Service Operation
### B.3.5.1 General
The functionality defined in clause 4.2.5 shall apply.
#