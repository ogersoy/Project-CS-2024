# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# Introduction
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
MFAF Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the MFAF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3]. The stage 2 definition and procedures of
Messaging Framework Adaptation are contained in 3GPP TS 23.288 [14] and 3GPP
TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
> [12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
> Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\"
[15] 3GPP TS 29.574: \"5G System; Data Collection Coordination Services; Stage
3\".
[16] Void.
[17] Void.
[18] Void.
[19] Void.
[20] 3GPP TS 29.520: \"5G System; Network Data Analytics Services; Stage 3\".
[21] Void.
[22] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[23] 3GPP TS 29.575: \"5G System; 5G System; Analytics Data Repository
Services; Stage 3\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
> AF Application Function
>
> AMF Access and Mobility Management Function
>
> DCCF Data Collection Coordination Function
MFAF Messaging Framework Adaptor Function
NEF Network Exposure Function
NF Network Function
NRF Network Repository Function
NSSF Network Slice Selection Function
NWDAF Network Data Analytics Function
PCF Policy Control Function
SMF Session Management Function
UDM Unified Data Management
# 4 Services offered by the MFAF
## 4.1 Introduction
The Messaging Framework Adaptor Services are used for the Messaging Framework
Adaptor Function (MFAF) to enable the 5GS to interact with the messaging
framework using Nmfaf services. The MFAF offers to other NFs the following
services:
\- Nmfaf_3daDataManagement; and
\- Nmfaf_3caDataManagement.
Table 4.1-1: Service provided by MFAF
+-------------+-------------+-------------+-------------+-------------+ | Service | Description | Service | Operation | Example | | Name | | Operations | | Consumer(s) | | | | | Semantics | | +=============+=============+=============+=============+=============+ | Nm | 3GPP DCCF | Configure | Request / | DCCF, NWDAF | | faf_3daDat | Adaptor | | Response | | | aManagement | (3DA) Data | | | | | | Management | | | | | | Service | | | | | | enables the | | | | | | DCCF to | | | | | | convey to | | | | | | the | | | | | | messaging | | | | | | framework, | | | | | | information | | | | | | about the | | | | | | data the | | | | | | messaging | | | | | | framework | | | | | | will | | | | | | receive | | | | | | from a Data | | | | | | Source, | | | | | | formatting | | | | | | and | | | | | | processing | | | | | | i | | | | | | nstructions | | | | | | and the | | | | | | Data | | | | | | Consumer | | | | | | and | | | | | | n | | | | | | otification | | | | | | endpoints. | | | | +-------------+-------------+-------------+-------------+-------------+ | | | Deconfigure | Request / | DCCF, NWDAF | | | | | Response | | +-------------+-------------+-------------+-------------+-------------+ | Nm | 3GPP | Notify | Subscribe / | NWDAF, PCF, | | faf_3caDat | Consumer | | Notify | NSSF, AMF, | | aManagement | Adaptor | | | SMF, NEF, | | | (3CA) Data | | | AF | | | Management | | | | | | Service | | | | | | delivers | | | | | | data to | | | | | | each Data | | | | | | Consumer or | | | | | | n | | | | | | otification | | | | | | endpoint | | | | | | after | | | | | | formatting | | | | | | and | | | | | | processing | | | | | | of data | | | | | | received by | | | | | | the | | | | | | messaging | | | | | | framework. | | | | +-------------+-------------+-------------+-------------+-------------+ | | | Fetch | Request / | NWDAF, PCF, | | | | | Response | NSSF, AMF, | | | | | | SMF, NEF, | | | | | | AF | +-------------+-------------+-------------+-------------+-------------+ | NOTE: The | | | | | | services | | | | | | correspond | | | | | | to the | | | | | | Nm | | | | | | faf_3caDat | | | | | | aManagement | | | | | | service and | | | | | | Nm | | | | | | faf_3daDat | | | | | | aManagement | | | | | | service as | | | | | | defined in | | | | | | 3GPP TS 23. | | | | | | 288 [14]. | | | | | +-------------+-------------+-------------+-------------+-------------+
Table 4.1-2 summarizes the corresponding APIs defined for this specification.
Table 4.1-2: API Descriptions
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex**
* * *
Nmfaf_3daDataManagement 4.2 API for Nmfaf_3daDataManagement
Nmfaf_3daDataManagement.yaml nmfaf_3dadatamanagement Annex A.2
Nmfaf_3daDataManagement API Nmfaf_3caDataManagement 4.3 API for
Nmfaf_3caDataManagement Nmfaf_3caDataManagement.yaml nmfaf_3cadatamanagement
Annex A.3 Nmfaf_3caDataManagement API
## 4.2 Nmfaf_3daDataManagement Service
### 4.2.1 Service Description
#### 4.2.1.1 Overview
The Nmfaf_3daDataManagement service as defined in 3GPP TS 23.288 [14], is
provided by the Messaging Framework Adaptor Function (MFAF).
This service:
\- allows NF consumers to configure or reconfigure the MFAF to map data or
analytics received by the MFAF to out-bound notification endpoints; and
\- allows NF consumers to reconfigure the MFAF to stop mapping data or
analytics received by the MFAF to out-bound notification endpoints.
#### 4.2.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Network Data
Analytics Exposure architecture is defined in 3GPP TS 23.288 [14].
The Nmfaf_3daDataManagement service is part of the Nmfaf service-based
interface exhibited by the Messaging Framework Adaptor Function (MFAF).
Known consumer of the Nmfaf_3daDataManagement service is:
\- Data Collection Coordination Function (DCCF)
Figure 4.2.1.2-1: Reference Architecture for the Nmfaf_3daDataManagement
Service; SBI representation
Figure 4.2.1.2-2: Reference Architecture for the Nmfaf_3daDataManagement
Service; reference point representation
#### 4.2.1.3 Network Functions
##### 4.2.1.3.1 Messaging Framework Adaptor Function (MFAF)
The Messaging Framework Adaptor Function (MFAF) provides the functionality to
allow NF consumers to configure or reconfigure the behaviour of mapping data
or analytics received by the MFAF to out-bound notification endpoints.
##### 4.2.1.3.2 NF Service Consumers
The Data Collection Coordination Function (DCCF) and the NWDAF support:
\- configuring the MFAF to map data or analytics received by the MFAF to out-
bound notification endpoints and to format and process the out-bound data or
analytics; and
\- reconfiguring the MFAF to stop the sending of data to consumers.
### 4.2.2 Service Operations
#### 4.2.2.1 Introduction
Table 4.2.2.1-1: Operations of the Nmfaf_3daDataManagement Service
Service operation name Description Initiated by
* * *
Nmfaf_3daDataManagement_Configure This service operation is used by an NF to
configure or reconfigure the MFAF to map data or analytics received by the
MFAF to out-bound notification endpoints and to format and process the
outbound data or analytics NF service consumer (DCCF)
Nmfaf_3daDataManagement_Deconfigure This service operation is used by an NF to
stop mapping data or analytics received by the MFAF to one or more outbound
notification endpoints. NF service consumer (DCCF)
#### 4.2.2.2 Nmfaf_3daDataManagement_Configure service operation
##### 4.2.2.2.1 General
The Nmfaf_3daDataManagement_Configure service operation is used by an NF
service consumer to configure or update the configuration of the MFAF for
mapping data or analytics received by the MFAF to out-bound notification
endpoints, and formatting and processing the out-bound data or analytics.
##### 4.2.2.2.2 Initial configuration for mapping data or analytics
Figure 4.2.2.2.2-1 shows a scenario where the NF service consumer (e.g. DCCF)
sends a request to the MFAF to request the configuration of mapping data or
analytics (as shown in 3GPP TS 23.288 [14]).
Figure 4.2.2.2.2-1: NF service consumer create the configuration
The NF service consumer shall invoke the Nmfaf_3daDataManagement_Configure
service operation to create the configuration(s). The NF service consumer
shall send an HTTP POST request with
\"{apiRoot}/nmfaf-3dadatamanagement/\/configurations\" as Resource
URI representing the \"MFAF Configurations\", as shown in figure 4.2.2.2.2-1,
step 1, to create a configuration for an \"Individual MFAF Configuration\"
according to the information in message body. The MfafConfiguration data
structure provided in the request body
shall include:
\- a description of the configurations as \"messageConfigurations\" attribute
that, for each configuration, the MessageConfiguration data type shall include
1) a notification URI of Data Consumer or Analytics Consumer or other endpoint
where to receive the requested mapping data or analytics as
\"notificationURI\" attribute; and
2)- if the configuration is used for mapping analytics or data collection, a
Notification Correlation ID for the Data or Analytics Consumer (or other
endpoint) as \"correId\" attribute;
and may include:
1) the formatting instructions as \"formatIstruct\" attribute;
2) the processing instructions as \"procIntruct\" attribute or
\"multiProcInstructs\" attribute if the \"MultiProcessingInstruction\" feature
is supported;
3) the MFAF notification information to identify the Event Notifications
received from the NWDAF or Data Source NF (e.g. AMF, SMF), which can be sent
to the consumer or other notification endpoints, as \"mfafNotiInfo\"
attribute;
4) NF instance identifier of the ADRF as \"adrfId\" attribute; and
x) the notification endpoints within the \"notifEndpoints\" attribute, if the
\"DataAnaCollect\" feature is supported.
Upon the reception of an HTTP POST request with:
\"{apiRoot}/nmfaf-3dadatamanagement/\/configurations\" as Resource
URI and MfafConfiguration data structure as request body, the MFAF shall:
\- create a new configuration;
\- assign a transaction reference id;
\- if no MFAF notification information has been provided in the request,
determine the MFAF notification information and add it to the configuration
that is created and will be returned to the NF service consumer;
\- store the configuration.
If the MFAF created an \"Individual MFAF Configuration\" resource, the MFAF
shall respond with \"201 Created\" with the message body containing a
representation of the created subscription, as shown in figure 4.2.2.2.2-1,
step 2.
If an error occurs when processing the HTTP POST request, the MFAF shall send
an HTTP error response as specified in clause 5.1.7.
##### 4.2.2.2.3 Update the configuration of existing individual mapping data
or analytics
Figure 4.2.2.2.3-1 shows a scenario where the NF service consumer sends a
request to the MFAF to update the configuration of mapping data or analytics
(as shown in 3GPP TS 23.288 [14])
Figure 4.2.2.2.3-1: NF service consumer updates configuration
The NF service consumer shall invoke the Nmfaf_3daDataManagement_Configure
service operation to update the configuration(s). The NF service consumer
shall send an HTTP PUT request with
\"{apiRoot}/nmfaf-3dadatamanagement/\/configurations/{transRefId}\"
as Resource URI representing the \"Individual MFAF Configuration\", as shown
in figure 4.2.2.2.3-1, step 1, to update the subscription for an \"Individual
MFAF Configuration\" resource identified by the {transRefId}. The
MfafConfiguration data structure provided in the request body shall include:
\- a description of the configurations as \"messageConfigurations\" attribute
that, for each configuration, the MfafConfiguration data structure provided in
the request body shall include the same contents as described in 4.2.2.2.2.
Upon the reception of an HTTP PUT request with:
\"{apiRoot}/nmfaf-3dadatamanagement/\/configurations/{transRefId}\"
as Resource URI and MfafConfiguration data structure as request body, the MFAF
shall:
\- update the configuration of corresponding transaction reference Id; and
\- store the configuration.
If the MFAF successfully processed and accepted the received HTTP PUT request,
the MFAF shall update an \"Individual MFAF Configuration\" resource, and shall
respond with:
a) HTTP \"200 OK\" status code with the message body containing a
representation of the updated configuration, as shown in figure 4.2.2.2.3-1,
step 2a. or
b) HTTP \"204 No Content\" status code, as shown in figure 4.2.2.2.3-1, step
2b.
If an error occurs when processing the HTTP PUT request, the MFAF shall send
an HTTP error response as specified in clause 5.1.7.
If the MFAF determines the received HTTP PUT request needs to be redirected,
the MFAF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
#### 4.2.2.3 Nmfaf_3daDataManagement_Deconfigure service operation
##### 4.2.2.3.1 General
The Nmfaf_3daDataManagement_Deconfigure service operation is used by an NF
service consumer to stop mapping data or analytics received by the MFAF to one
or more out-bound notification endpoints.
##### 4.2.2.3.2 Stop mapping data or analytics
Figure 4.2.2.3.2-1 shows a scenario where the NF service consumer sends a
request to the MFAF to update the configuration to stop mapping data or
analytics (as shown in 3GPP TS 23.288 [14])
Figure 4.2.2.3.2-1: NF service consumer stops mapping data or analytics
The NF service consumer shall invoke the Nmfaf_3daDataManagement_Deconfigure
service operation to stop the MFAF to map data or analytics. The NF service
consumer shall send an HTTP DELETE request with
\"{apiRoot}/nmfaf-3dadatamanagement/\/configurations/{transRefId}\"
as Resource URI, where {transRefId} represents the \"Individual MFAF
Configuration\" to be deleted, as shown in figure 4.2.2.3.2-1, step 1.
Upon the reception of an HTTP DELETE request and if the MFAF successfully
processed and accepted the received HTTP DELETE request from the NF service
consumer, the MFAF shall acknowledge the request by sending a \"204 No
Content\" response to the NF service consumer, as shown in figure 4.2.2.3.2-1,
step 2. Further, the MFAF shall remove the individual resource linked to the
delete request.
If errors occur when processing the HTTP DELETE request, the MFAF shall send
an HTTP error response as specified in clause 5.1.7.
If the MFAF determines the received HTTP DELETE request needs to be
redirected, the MFAF shall send an HTTP redirect response as specified in
clause 6.10.9 of 3GPP TS 29.500 [4].
## 4.3 Nmfaf_3caDataManagement Service
### 4.3.1 Service Description
#### 4.3.1.1 Overview
The Nmfaf_3caDataManagement service as defined in 3GPP TS 23.288 [14], is
provided by the Messaging Framework Adaptor Function (MFAF).
This service:
\- allows NF consumers to collect the data or analytics from the MFAF.
#### 4.3.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Network Data
Analytics Exposure architecture is defined in 3GPP TS 23.288 [14].
The Nmfaf_3caDataManagement service is part of the Nmfaf service-based
interface exhibited by the Messaging Framework Adaptor Function (MFAF).
Known consumers of the Nmfaf_3caDataManagement service are:
\- Network Data Analytics Function (NWDAF)
\- Policy Control Function (PCF)
\- Network Slice Selection Function (NSSF)
\- Access and Mobility Management Function (AMF)
\- Session Management Function (SMF)
\- Network Exposure Function (NEF)
\- Application Function (AF)
Figure 4.3.1.2-1: Reference Architecture for the Nmfaf_3caDataManagement
Service; SBI representation
Figure 4.3.1.2-2: Reference Architecture for the Nmfaf_3caDataManagement
Service; reference point representation
#### 4.3.1.3 Network Functions
##### 4.3.1.3.1 Messaging Framework Adaptor Function (MFAF)
The Messaging Framework Adaptor Function (MFAF) provides the functionality to
supply data or analytics, or an indication of availability of data or
analytics to notification endpoints configured in Nmfaf_3caDataManagement
service as described in clause 4.2.1.
##### 4.3.1.3.2 NF Service Consumers
The NWDAF, PCF, NSSF, AMF, SMF, NEF, and AF:
\- supports retrieving data or analytics from the MFAF.
The MFAF:
\- supports providing data or analytics or notification of availability of
data or analytics to notification endpoints.
### 4.3.2 Service Operations
#### 4.3.2.1 Introduction
Table 4.3.2.1-1: Operations of the Nmfaf_3caDataManagement Service
Service operation name Description Initiated by
* * *
Nmfaf_3caDataManagement_Fetch This service operation is used by an NF to
retrieve stored data or analytics from the MFAF. NF service consumer (NWDAF,
PCF, NSSF, AMF, SMF, NEF and AF) Nmfaf_3caDataManagement_Subscribe This is a
pseudo operation, the actual subscription is created via
Nmfaf_3daDataManagement Service. (NOTE)  
Nmfaf_3caDataManagement_Notify This service operation is used by an NF with
either data or analytics to provide data or analytics or notification of
availability of data or analytics to notification endpoints. MFAF NOTE: In the
current release OpenAPI 3.0.0 is adopted, with OpenAPI 3.0.0 it is not
possible to document a stand-alone callback operation, thus the Notify
operation has to be defined in combination with a Subscribe operation.
NOTE: Nmfaf_3caDataManagement_Subscribe service operation is not used by any
NF service consumers in this release.
#### 4.3.2.2 Nmfaf_3caDataManagement_Fetch service operation
##### 4.3.2.2.1 General
The Nmfaf_3caDataManagement_Fetch service operation allows consumer to
retrieves data or analytics from the MFAF as indicated by
Nmfaf_3caDataManagement_Notify Fetch Instruction.
##### 4.3.2.2.2 Retrieve data or analytics from the MFAF
Figure 4.3.2.2.2-1 shows a scenario where the NF service consumer (e.g. NWDAF)
sends a request to the MFAF to retrieve the data or analytics as indicated by
Nmfaf_3caDataManagement_Notify Fetch Instruction.
Figure 4.3.2.2.2-1: NF service consumer retrieve data or analytics from the
MFAF
The NF service consumer shall invoke the Nmfaf_3caDataManagement_Fetch service
operation to retrieve stored data or analytics. The NF service consumer shall
send an HTTP POST request to the URI \"{fetchUri}\" which was previously
provided by the MFAF within a FetchInstruction data structure in an MFAF
notification, as shown in figure 4.3.2.2.2-1, step 1, to fetch data or
analytics from the MFAF.
The request body shall include fetch correlation identifiers, which were also
previously provided by the MFAF in the \"fetchCorrIds\" attribute within a
FetchInstruction data structure in an MFAF notification.
Upon the reception of the HTTP POST request, the MFAF shall:
\- find the data or analytics according to the requested parameters.
If the requested data is found, the MFAF shall respond with \"200 OK\" status
code with the message body containing the NmfafDataAnaNotification data
structure. The NmfafDataAnaNotification data structure in the response body
shall include one of the following:
\- information about network data analytics function events that occurred in
the \"anaNotifications\" attribute;
\- data collected from data sources (e.g. SMF, NEF) in the \"dataNotif\"
attribute.
If errors occur when processing the HTTP POST request, the NF service consumer
shall send an HTTP error response as specified in clause 5.2.7.
If the MFAF determines the received HTTP POST request needs to be redirected,
the MFAF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
#### 4.3.2.2A Nmfaf_3caDataManagement_Subscribe service operation
This is a pseudo operation, the MFAF does not actually provide Subscribe
service operation through Nmfaf_3caDataManagement service. The actual
subscription is created via Nmfaf_3daDataManagement Service.
#### 4.3.2.3 Nmfaf_3caDataManagement_Notify service operation
##### 4.3.2.3.1 General
The Nmfaf_3caDataManagement_Notify service operation provides data or
analytics or notification of availability of data or analytics to notification
endpoints.
##### 4.3.2.3.2 Notification about the subscribed data or analytics
Figure 4.3.2.3.2-1 shows a scenario where the MFAF sends a request to the NF
service consumer to notify it about data or analytics or fetch instructions.
The subscription corresponding to the notification is created by the service
consumer via Nmfaf_3daDataManagement Service Operation.
Figure 4.3.2.3.2-1: MFAF notifies the NF service consumer about subscribed
data or analytics or fetch instructions
The MFAF shall invoke the Nmfaf_3caDataManagement_Notify service operation to
notify about subscribed data or analytics, or notification about the
availability of data or analytics. The MFAF shall send an HTTP POST request to
the \"{notificationURI}\" received in the subscription (see clause 5.2.5 for
the definition of this notificationURI), as shown in figure 4.3.2.3.2-1, step
1. The NmfafDataRetrievalNotification data structure provided in the request
body shall include:
\- notification correlation Id within the \"correId\" attribute;
and shall include one of the following:
\- fetch instructions indicate whether the data or analytics are to be fetched
by the Consumer in the \"fetchInstruction\" attribute;
\- information about the MFAF data or analytics in the \"dataAnaNotif\"
attribute, which contains one of the following:
\- information about network data analytics function events that occurred in
the \"anaNotifications\" attribute;
\- data collected from data sources (e.g. SMF, NEF) in the \"dataNotif\"
attribute.
Upon the reception of an HTTP POST request with \"{notificationURI}\" as
Resource URI and NmfafDataRetrievalNotification data structure as request
body, if the NF service consumer successfully processed and accepted the
received HTTP POST request, the NF Service Consumer shall:
\- store the notification;
\- respond with HTTP \"204 No Content\" status code.
If errors occur when processing the HTTP POST request, the NF service consumer
shall send an HTTP error response as specified in clause 5.2.7.
If the NF service consumer determines the received HTTP POST request needs to
be redirected, the NF service consumer shall send an HTTP redirect response as
specified in clause 6.10.9 of 3GPP TS 29.500 [4].
After the successful processing of the HTTP POST request, if the MFAF requests
the NF service consumer to retrieve the data or analytics with the
\"fetchInstruct\" attribute, the NF service consumer may invoke the
Nmfaf_3caDataManagement_Fetch service operation to retrieve the notified data
or analytics as defined in clause 4.3.2.2.
# 5 API Definitions
## 5.1 Nmfaf_3daDataManagement Service API
### 5.1.1 Introduction
The Nmfaf_3daDataManagement Service shall use the Nmfaf_3daDataManagement API.
The API URI of the Nmfaf_3daDataManagement API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nmfaf-3dadatamanagement\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
5.1.3.
### 5.1.2 Usage of HTTP
#### 5.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nmfaf_3daDataManagement API is contained in Annex A.
#### 5.1.2.2 HTTP standard headers
##### 5.1.2.2.1 General
See clause 5.1.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 5.1.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 5.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.1.3.2 of 3GPP TS
29.500 [4] shall be applicable.
### 5.1.3 Resources
#### 5.1.3.1 Overview
This clause describes the structure for the Resource URIs, the resources and
methods used for the service.
Figure 5.1.3.1-1 depicts the resource URIs structure for the
Nmfaf_3daDataManagement API.
Figure 5.1.3.1-1: Resource URI structure of the Nmfaf_3daDataManagement API
Table 5.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.1.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
MFAF Configurations /configurations POST Creates a new individual MFAF
Configuration resource. Individual MFAF Configuration
/configurations/{transRefId} PUT Modifies an existing Individual MFAF
Configuration subresource. DELETE Deletes an Individual MFAF Configuration
identified by subresource {transRefId}.
#### 5.1.3.2 Resource: MFAF Configurations
##### 5.1.3.2.1 Description
The MFAF Configurations resource represents all configuration to the
Nmfaf_3daDataManagement Service at a given MFAF. The resource allows an NF
service consumer to create a new Individual MFAF Configuration resource.
##### 5.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nmfaf-3dadatamanagement/\
/configurations**
The \ shall be set as described in clause 5.1.1.
This resource shall support the resource URI variables defined in table
5.1.3.2.2-1.
Table 5.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1
##### 5.1.3.2.3 Resource Standard Methods
###### 5.1.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.1.3.2.3.1-1.
Table 5.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
Name Data type P Cardinality Description Applicability
* * *
n/a
This method shall support the request data structures specified in table
5.1.3.2.3.1-2 and the response data structures and response codes specified in
table 5.1.3.2.3.1-3.
Table 5.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
MfafConfiguration M 1 Create a new Individual MFAF Configuration resource.
Table 5.1.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+-------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+=============+===============+ | Mfaf | M | 1 | 201 Created | The creation | | Configuration | | | | of an | | | | | | Individual | | | | | | MFAF | | | | | | Configuration | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+-------------+---------------+ | NOTE: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | +---------------+---+-------------+-------------+---------------+
Table 5.1.3.2.3.1-4: Headers supported by the 201 response code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/nmfaf-3dadatamanagement/\/configurations/{transRefId}
##### 5.1.3.2.4 Resource Custom Operations
None in this release of the specification.
#### 5.1.3.3 Resource: Individual MFAF Configuration
##### 5.1.3.2.1 Description
The Individual MFAF Configurations resource represents an individual
configuration created in the MFAF and associated with transaction reference
Id.
##### 5.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/nmfaf-3dadatamanagement/\
/configurations/{transRefId}**
The \ shall be set as described in clause 5.1.1.
This resource shall support the resource URI variables defined in table
5.1.3.3.2-1.
Table 5.1.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1.1 transRefId string Unique identifier of the
individual MFAF Configurations resource.
##### 5.1.3.3.3 Resource Standard Methods
###### 5.1.3.3.3.1 PUT
This method shall support the URI query parameters specified in table
5.1.3.3.3.1-1.
Table 5.1.3.3.3.1-1: URI query parameters supported by the PUT method on this
resource
Name Data type P Cardinality Description Applicability
* * *
n/a
This method shall support the request data structures specified in table
5.1.3.3.3.1-2 and the response data structures and response codes specified in
table 5.1.3.3.3.1-3.
Table 5.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this
resource
Data type P Cardinality Description
* * *
MfafConfiguration M 1 The updated MFAF Configuration.
Table 5.1.3.3.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | Mfaf | M | 1 | 200 OK | The update of | | Configuration | | | | an Individual | | | | | | MFAF | | | | | | Configuration | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | MFAF | | | | | | Configuration | | | | | | resource was | | | | | | modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | modification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (cf. | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.1.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target MFAF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.1.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target MFAF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
###### 5.1.3.3.3.2 DELETE
This method shall support the URI query parameters specified in table
5.1.3.3.3.2-1.
Table 5.1.3.3.3.2-1: URI query parameters supported by the DELETE method on
this resource
Name Data type P Cardinality Description Applicability
* * *
n/a
This method shall support the request data structures specified in table
5.1.3.3.3.2-2 and the response data structures and response codes specified in
table 5.1.3.3.3.2-3.
Table 5.1.3.3.3.2-2: Data structures supported by the DELETE Request Body on
this resource
Data type P Cardinality Description
* * *
n/a
Table 5.1.3.3.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | case: The | | | | | | Individual | | | | | | MFAF | | | | | | Configuration | | | | | | resource | | | | | | matching the | | | | | | transRefId | | | | | | was deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | deletion | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | resource | | | | | | deletion | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | manadatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (cf. | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.1.3.3.3.2-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target MFAF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.1.3.3.3.2-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target MFAF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 5.1.4 Custom Operations without associated resources
None in this release of the specification.
### 5.1.5 Notifications
None in this release of the specification.
### 5.1.6 Data Model
#### 5.1.6.1 General
This clause specifies the application data model supported by the API.
Table 5.1.6.1-1 specifies the data types defined for the
Nmfaf_3daDataManagement service based interface protocol.
Table 5.1.6.1-1: Nmfaf_3daDataManagement specific Data Types
Data type Clause defined Description Applicability
* * *
MfafConfiguration 5.1.6.2.2 The description of MFAF configuration  
MessageConfiguration 5.1.6.2.3 The description of the configurations.  
MfafNotiInfo 5.1.6.2.4 The MFAF notification information.
Table 5.1.6.1-2 specifies data types re-used by the Nmfaf_3daDataManagement
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Nmfaf_3daDataManagement service based
interface.
Table 5.1.6.1-2: Nmfaf_3daDataManagement re-used Data Types
Data type Reference Comments Applicability
* * *
FormattingInstruction 3GPP TS 29.574 [15] Contains data or analytics
formatting Instructions.  
NotifyEndpoint 3GPP TS 29.574 [15] The information of notification endpoint.
DataAnaCollect ProcessingInstruction 3GPP TS 29.574 [15] Contains instructions
related to the processing  
SupportedFeatures 3GPP TS 29.571 [22] Used to negotiate the applicability of
the optional features defined in table 5.1.8-1.  
Uri 3GPP TS 29.571 [22] URI.
#### 5.1.6.2 Structured data types
##### 5.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 5.1.6.2.2 Type: MfafConfiguration
Table 5.1.6.2.2-1: Definition of type MfafConfiguration
Attribute name Data type P Cardinality Description Applicability
* * *
messageConfigurations array(MessageConfiguration) M 1..N The configuration of
the MFAF for mapping data or analytics.
##### 5.1.6.2.3 Type: MessageConfiguration
Table 5.1.6.2.3-1: Definition of type MessageConfiguration
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | correId | string | M | 1 | If the | | | | | | | conf | | | | | | | iguration | | | | | | | is used | | | | | | | for | | | | | | | mapping | | | | | | | analytics | | | | | | | or data | | | | | | | co | | | | | | | llection, | | | | | | | rep | | | | | | | resenting | | | | | | | the | | | | | | | Analytics | | | | | | | Consumer | | | | | | | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID or | | | | | | | Data | | | | | | | Consumer | | | | | | | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID. | | +-----------+-----------+---+-----------+-----------+-----------+ | forma | For | O | 0..1 | F | | | tInstruct | mattingIn | | | ormatting | | | | struction | | | ins | | | | | | | tructions | | | | | | | to be | | | | | | | used for | | | | | | | sending | | | | | | | event | | | | | | | notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | mfa | Mfa | C | 0..1 | The MFAF | | | fNotiInfo | fNotiInfo | | | not | | | | | | | ification | | | | | | | inf | | | | | | | ormation. | | | | | | | It shall | | | | | | | be | | | | | | | provided | | | | | | | in a | | | | | | | response | | | | | | | message | | | | | | | if it had | | | | | | | not been | | | | | | | provided | | | | | | | in the | | | | | | | r | | | | | | | espective | | | | | | | request | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifi | Uri | M | 1 | The | | | cationURI | | | | not | | | | | | | ification | | | | | | | URI of | | | | | | | Data | | | | | | | Consumer | | | | | | | or | | | | | | | Analytics | | | | | | | Consumer | | | | | | | or other | | | | | | | endpoint | | | | | | | where to | | | | | | | receive | | | | | | | the | | | | | | | requested | | | | | | | mapping | | | | | | | data or | | | | | | | analytics | | +-----------+-----------+---+-----------+-----------+-----------+ | notif | arr | O | 1..N | The | DataA | | Endpoints | ay(Notify | | | a | naCollect | | | Endpoint) | | | dditional | | | | | | | in | | | | | | | formation | | | | | | | of | | | | | | | not | | | | | | | ification | | | | | | | target | | | | | | | address | | | | | | | and | | | | | | | co | | | | | | | rrelation | | | | | | | id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | pro | Pro | O | 0..1 | P | | | cInstruct | cessingIn | | | rocessing | | | | struction | | | ins | | | | | | | tructions | | | | | | | to be | | | | | | | used for | | | | | | | sending | | | | | | | event | | | | | | | notif | | | | | | | ications. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | multiProc | a | O | 1..N | P | MultiPro | | Instructs | rray(Proc | | | rocessing | cessingIn | | | essingIns | | | ins | struction | | | truction) | | | tructions | | | | | | | to be | | | | | | | used for | | | | | | | sending | | | | | | | event | | | | | | | notif | | | | | | | ications. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | adrfId | NfI | O | 0..1 | NF | | | | nstanceId | | | instance | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | ADRF in | | | | | | | which | | | | | | | data and | | | | | | | analytics | | | | | | | can be | | | | | | | stored. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | clau | | | | | | | se 5.1.8. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | The | | | | | | | \"mu | | | | | | | ltiProcIn | | | | | | | structs\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used | | | | | | | instead | | | | | | | of the | | | | | | | \"procI | | | | | | | nstruct\" | | | | | | | attribute | | | | | | | when the | | | | | | | \"M | | | | | | | ultiProce | | | | | | | ssingInst | | | | | | | ruction\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | | | | | | | | | | | | | NOTE 2 It | | | | | | | shall be | | | | | | | present | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | if at | | | | | | | least one | | | | | | | feature | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 5.1.8 | | | | | | | is | | | | | | | s | | | | | | | upported, | | | | | | | and it | | | | | | | shall be | | | | | | | present | | | | | | | in the | | | | | | | POST | | | | | | | response | | | | | | | if the NF | | | | | | | service | | | | | | | consumer | | | | | | | includes | | | | | | | the | | | | | | | \"s | | | | | | | uppFeat\" | | | | | | | attribute | | | | | | | in the | | | | | | | POST | | | | | | | request. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.1.6.2.4 Type: MfafNotiInfo
Table 5.1.6.2.4-1: Definition of type MfafNotiInfo
Attribute name Data type P Cardinality Description Applicability
* * *
mfafNotifUri Uri M 1 The notification URI of MFAF Notification Target Address.  
mfafCorreId string M 1 The MFAF Notification Correlation ID
#### 5.1.6.3 Simple data types and enumerations
##### 5.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 5.1.6.3.2 Simple data types
The simple data types defined in table 5.1.6.3.2-1 shall be supported.
Table 5.1.6.3.2-1: Simple data types
Type Name Type Definition Description Applicability
* * *
#### 5.1.6.4 Data types describing alternative data types or combinations of
data types
None in current specification.
#### 5.1.6.5 Binary data
None in current specification.
### 5.1.7 Error Handling
#### 5.1.7.1 General
For the Nmfaf_3daDataManagement API, HTTP error responses shall be supported
as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and
application errors specified in table 5.1.7.2-1 of 3GPP TS 29.500 [4] shall be
supported for an HTTP method if the corresponding HTTP status codes are
specified as mandatory for that HTTP method in table 5.1.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nmfaf_3daDataManagement API.
#### 5.1.7.2 Protocol Errors
No specific procedures for the Nmfaf_3daDataManagement service are specified.
#### 5.1.7.3 Application Errors
The application errors defined for the Nmfaf_3daDataManagement service are
listed in Table 5.1.7.3-1.
Table 5.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
### 5.1.8 Feature negotiation
The optional features in table 5.1.8-1 are defined for the
Nmfaf_3daDataManagement API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 5.1.8-1: Supported Features
Feature number Feature Name Description
* * *
1 MultiProcessingInstruction Indicates the support of multiple processing
instructions. 2 DataAnaCollect This feature indicates support for the
enhancement of data and analytics process.
### 5.1.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nmfaf_3daDataManagement API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nmfaf_3daDataManagement API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nmfaf_3daDataManagement service.
The Nmfaf_3daDataManagement API defines a single scope
\"nmfaf_3dadatamanagement\" for the entire service, and it does not define any
additional scopes at resource or operation level.
## 5.2 Nmfaf_3caDataManagement Service API
### 5.2.1 Introduction
The Nmfaf_3caDataManagement Service shall use the Nmfaf_3caDataManagement API.
The API URI of the Nmfaf_3caDataManagement API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nmfaf-3cadatamanagement\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
5.2.3.
### 5.2.2 Usage of HTTP
#### 5.2.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nmfaf_3caDataManagement API is contained in Annex A.
#### 5.2.2.2 HTTP standard headers
##### 5.2.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 5.2.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 5.2.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be applicable.
### 5.2.3 Resources
There are no resources defined for this API in this release of the
specification.
### 5.2.4 Custom Operations without associated resources
There are no custom operations without associated resources defined for this
API in this release of the specification.
### 5.2.5 Notifications
#### 5.2.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 5.2.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | MFAF | {no | POST | Report one or | | Notification | tificationURI} | | several | | | | | observed data | | | (NOTE) | | or analytics. | +----------------+----------------+----------------+----------------+ | Fetch | {fetchUri} | POST | Fetch one or | | Notification | | | several | | | | | notified data | | | | | or analytics. | +----------------+----------------+----------------+----------------+ | NOTE: The | | | | | n | | | | | otificationURI | | | | | is not | | | | | provided by NF | | | | | service | | | | | consumer via | | | | | Nmfaf-3ca | | | | | DataManagement | | | | | API, it is | | | | | provided via | | | | | Nmfaf-3da | | | | | DataManagement | | | | | API during the | | | | | configuration | | | | | for mapping | | | | | data or | | | | | analytics. | | | | +----------------+----------------+----------------+----------------+
#### 5.2.5.2 MFAF Notification
##### 5.2.5.2.1 Description
The MFAF Notification is used by the MFAF to provide data or analytics or
notification of availability of data or analytics to notification endpoints.
##### 5.2.5.2.2 Target URI
The Callback URI **\"{** notificationURI**}\"** shall be used with the
callback URI variables defined in table 5.2.5.2.2-1.
Table 5.2.5.2.2-1: Callback URI variables
Name Definition
* * *
notificationURI The notification URI of Data Consumer or Analytics Consumer or
other endpoint where to receive the requested data or analytics. The
notificationURI is not provided by NF service consumer via
Nmfaf-3caDataManagement API, it is provided via Nmfaf-3daDataManagement API
during the configuration for mapping data or analytics.
##### 5.2.5.2.3 Standard Methods
###### 5.2.5.2.3.1 POST
This method shall support the request data structures specified in table
5.2.5.2.3.1-1 and the response data structures and response codes specified in
table 5.2.5.2.3.1-2.
Table 5.2.5.2.3.1-1: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
NmfafDataRetrievalNotification M 1 The data or analytics or notification of
availability of data or analytics to notification endpoints.
Table 5.2.5.2.3.1-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The MFAF | | | | | Content | notification | | | | | | is treated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | retrieval | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | retrieval | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (cf. | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.2.5.2.3.1-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | service | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.2.5.2.3.1-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | service | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 5.2.5.3 Fetch Notification
##### 5.2.5.3.1 Description
The Fetch Notification is used by the NF service consumer to retrieve data or
analytics from the MFAF.
##### 5.2.5.3.2 Target URI
The Callback URI **\"{fetchUri}\"** shall be used with the callback URI
variables defined in table 5.2.5.3.2-1.
Table 5.2.5.3.2-1: Callback URI variables
Name Data type Definition
* * *
fetchUri Uri Fetch Uri as assigned during the procedure of notification about
the subscribed data or analytics within the FetchInstruction data type (see
table 5.2.6.2.3-1).
##### 5.2.5.3.3 Standard Methods
###### 5.2.5.3.3.1 POST
This method shall support the URI query parameters specified in table
5.2.5.3.3.1-1.
Table 5.2.5.3.3.1-1: URI query parameters supported by the POST method on this
resource
Name Data type P Cardinality Description Applicability
* * *
n/a
This method shall support the request data structures specified in table
5.2.5.3.3.1-2 and the response data structures and response codes specified in
table 5.2.5.3.3.1-3.
Table 5.2.5.3.3.1-2: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
array(string) M 1..N Indicate the fetch correlation identifier(s).
Table 5.2.5.3.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | NmfafDataAn | M | 1 | 200 OK | The stored | | aNotification | | | | data or | | | | | | analytics | | | | | | related to | | | | | | the fetch | | | | | | correlation | | | | | | i | | | | | | dentifier(s). | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | retrieval | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during the | | | | | | retrieval | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (cf. | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.2.5.3.3.1-4: Headers supported by the by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | service | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.2.5.3.3.1-5: Headers supported by the 308 response code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | should be | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | service | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 5.2.6 Data Model
#### 5.2.6.1 General
This clause specifies the application data model supported by the API.
Table 5.2.6.1-1 specifies the data types defined for the
Nmfaf_3caDataManagement service based interface protocol.
Table 5.2.6.1-1: Nmfaf_3caDataManagement specific Data Types
Data type Clause defined Description Applicability
* * *
FetchInstruction 5.2.6.2.3 The fetch instruction indicates whether the data or
analytics are to be fetched by the Consumer.  
NmfafDataAnaNotification 5.2.6.2.4 MFAF data or analytics.  
NmfafDataRetrievalNotification 5.2.6.2.2 The data or analytics or notification
of availability of data or analytics to notification endpoints.
Table 5.2.6.1-2 specifies data types re-used by the Nmfaf_3caDataManagement
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Nmfaf_3caDataManagement service based
interface.
Table 5.2.6.1-2: Nmfaf_3caDataManagement re-used Data Types
Data type Reference Comments Applicability
* * *
DataNotification 3GPP TS 29.575 [23] Represents a data subscription
notification of one of various possible data sources  
DateTime 3GPP TS 29.571 [22] Identifies a specific time.  
NnwdafEventsSubscriptionNotification 3GPP TS 29.520 [20] Represents an NWDAF
analytics subscription notification.  
Uri 3GPP TS 29.571 [22] URI.
#### 5.2.6.2 Structured data types
##### 5.2.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 5.2.6.2.2 Type: NmfafDataRetrievalNotification
Table 5.2.6.2.2-1: Definition of type NmfafDataRetrievalNotification
Attribute name Data type P Cardinality Description Applicability
* * *
correId string M 1 Represents the Analytics Consumer Notification Correlation
ID or Data Consumer Notification Correlation ID. It shall be set to the same
value as the \"correId\" attribute of MessageConfiguration data type.  
dataAnaNotif NmfafDataAnaNotification C 0..1 Represents notifications of
analytics and data. (NOTE)  
fetchInstruction FetchInstruction C 0..1 The fetch instruction indicate
whether the data or analytics are to be fetched by the Consumer. (NOTE)  
NOTE: Exactly one of the \"dataAnaNotif\" and \"fetchInstruction\" shall be
included.
##### 5.2.6.2.3 Type: FetchInstruction
Table 5.2.6.2.3-1: Definition of type FetchInstruction
Attribute name Data type P Cardinality Description Applicability
* * *
fetchUri Uri M 1 The target address used by a data or analytics consumer to
fetch the data or analytics.  
fetchCorrIds array(string) M 1..N The fetch correlation identifier(s) of the
MFAF Data or Analytics  
expiry DateTime O 0..1 Indicates an expiration time, i.e. a deadline to fetch
the data.
##### 5.2.6.2.4 Type: NmfafDataAnaNotification
Table 5.2.6.2.4-1: Definition of type NmfafDataAnaNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | anaNoti | array(N | C | 1..N | List of | | | fications | nwdafEven | | | analytics | | | | tsSubscri | | | sub | | | | ptionNoti | | | scription | | | | fication) | | | notif | | | | | | | ications. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dataNotif | DataNot | C | 0..1 | Data | | | | ification | | | sub | | | | | | | scription | | | | | | | noti | | | | | | | fication. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Exactly | | | | | | | one of | | | | | | | these | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | If the | | | | | | | MFAF has | | | | | | | received | | | | | | | the | | | | | | | noti | | | | | | | fications | | | | | | | from | | | | | | | another | | | | | | | source | | | | | | | without a | | | | | | | t | | | | | | | imestamp, | | | | | | | then the | | | | | | | MFAF adds | | | | | | | itself a | | | | | | | timestamp | | | | | | | based on | | | | | | | the time | | | | | | | it | | | | | | | received | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | in | | | | | | | "time | | | | | | | StampGen" | | | | | | | attribute | | | | | | | contained | | | | | | | in | | | | | | | dataNot | | | | | | | ification | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | EventNot | | | | | | | ification | | | | | | | data type | | | | | | | in the | | | | | | | NnwdafEve | | | | | | | ntsSubscr | | | | | | | iptionNot | | | | | | | ification | | | | | | | data | | | | | | | type. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.2.6.3 Simple data types and enumerations
##### 5.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 5.2.6.3.2 Simple data types
None in this release of the specification.
#### 5.2.6.4 Data types describing alternative data types or combinations of
data types
None in this release of the specification.
#### 5.2.6.5 Binary data
None in this release of the specification.
### 5.2.7 Error Handling
#### 5.2.7.1 General
For the Nmfaf_3caDataManagement API, HTTP error responses shall be supported
as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and
application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be
supported for an HTTP method if the corresponding HTTP status codes are
specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nmfaf_3caDataManagement API.
#### 5.2.7.2 Protocol Errors
No specific procedures for the Nmfaf_3caDataManagement service are specified.
#### 5.2.7.3 Application Errors
The application errors defined for the Nmfaf_3caDataManagement service are
listed in Table 5.2.7.3-1.
Table 5.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
### 5.2.8 Feature negotiation
The optional features in table 5.2.8-1 are defined for the
Nmfaf_3caDataManagement API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 5.2.8-1: Supported Features
Feature number Feature Name Description
* * *
### 5.2.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nmfaf_3caDataManagement API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nmfaf_3caDataManagement API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nmfaf_3caDataManagement service.
The Nmfaf_3caDataManagement API defines a single scope
\"nmfaf_3cadatamanagement\" for the entire service, and it does not define any
additional scopes at resource or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI 3.0.0 specifications in YAML
format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Nmfaf_3daDataManagement API
openapi: 3.0.0
info:
version: 1.1.0-alpha.2
title: Nmfaf_3daDataManagement
description: \|
MFAF 3GPP DCCF Adaptor (3DA) Data Management Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.576 V18.1.0; 5G System; Messaging Framework Adaptor
Services; Stage 3.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.576/\'
servers:
\- url: \'{apiRoot}/nmfaf-3dadatamanagement/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- oAuth2ClientCredentials:
\- nmfaf-3dadatamanagement
\- {}
paths:
/configurations:
post:
summary: Creates a new Individual MFAF Configuration resource.
operationId: CreateMFAFConfiguration
tags:
\- MFAF Configuration(Collection)
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/MfafConfiguration\'
required: true
description: >
Contains the information for the creation of a new Individual MFAF
Configuration resource.
responses:
\'201\':
description: Successful creation of new Individual MFAF Configuration
resource.
headers:
Location:
description: >
Contains the URI of the newly created resource, according to the structure
{apiRoot}/nmfaf-3dadatamanagement/\/configurations/{transRefId}
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/MfafConfiguration\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/configurations/{transRefId}:
put:
summary: Updates an existing Individual MFAF Configuration resource.
operationId: UpdateMFAFConfiguration
tags:
\- Individual MFAF Configuration (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/MfafConfiguration\'
parameters:
\- name: transRefId
in: path
description: Unique identifier of the individual MFAF Configurations resource.
required: true
schema:
type: string
responses:
\'200\':
description: The updated MFAF Configuration resource is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/MfafConfiguration\'
\'204\':
description: The Individual MFAF Configuration resource was modified
successfully.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: Deletes an existing Individual MFAF Configuration resource.
operationId: DeleteMFAFConfiguration
tags:
\- Individual MFAF Configuration (Document)
parameters:
\- name: transRefId
in: path
description: Unique identifier of the individual MFAF Configurations resource.
required: true
schema:
type: string
responses:
\'204\':
description: >
No Content. The Individual MFAF Configuration resource matching
the transRefId was deleted.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nmfaf-3dadatamanagement: Access to the nmfaf-3dadatamanagement API
schemas:
MfafConfiguration:
description: Represents an Individual MFAF Configuration.
type: object
required:
\- messageConfigurations
properties:
messageConfigurations:
type: array
items:
\$ref: \'#/components/schemas/MessageConfiguration\'
minItems: 1
description: The configuration of the MFAF for mapping data or analytics.
MessageConfiguration:
description: Represents the message configuration.
type: object
required:
\- notificationURI
\- correId
properties:
correId:
type: string
description: >
If the configuration is used for mapping analytics or data collection,
representing the Analytics Consumer Notification Correlation ID or
Data Consumer Notification Correlation ID.
formatInstruct:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/FormattingInstruction\'
mfafNotiInfo:
\$ref: \'#/components/schemas/MfafNotiInfo\'
notificationURI:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notifEndpoints:
type: array
items:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/NotifyEndpoint\'
minItems: 1
description: The information of notification endpoints.
procInstruct:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/ProcessingInstruction\'
multiProcInstructs:
type: array
items:
\$ref:
\'TS29574_Ndccf_DataManagement.yaml#/components/schemas/ProcessingInstruction\'
minItems: 1
description: Processing instructions to be used for sending event
notifications.
adrfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
MfafNotiInfo:
description: >
The MFAF notification information. It shall be provided in a response message
if it had not been provided in the respective request message.
type: object
required:
\- mfafNotifUri
\- mfafCorreId
properties:
mfafNotifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
mfafCorreId:
type: string
# A.3 Nmfaf_3caDataManagement API
openapi: 3.0.0
info:
version: 1.1.0-alpha.2
title: Nmfaf_3caDataManagement
description: \|
MFAF 3GPP Consumer Adaptor (3CA) Data Management Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.576 V18.2.0; 5G System; Messaging Framework Adaptor
Services; Stage 3.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.576/\'
servers:
\- url: \'{apiRoot}/nmfaf-3cadatamanagement/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- oAuth2ClientCredentials:
\- nmfaf-3cadatamanagement
\- {}
paths:
/mfaf-data-analytics:
post:
# This is a pseudo operation, clients shall NOT invoke this method!
requestBody:
required: true
content:
application/json:
# Unspecified schema for the JSON body, since this is used by neither the NF
service consumer nor the MFAF.
schema: {}
responses:
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
Notification:
\'{notificationURI}\':
# The URI in {notificationURI} is obtained out of band by the MFAF, i.e. it is
provided via the Nmfaf-3daDataManagement API during the configuration for
mapping data or analytics.
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NmfafDataRetrievalNotification\'
responses:
\'204\':
description: The receipt of the Notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
Fetch:
\'{request.body#/fetchInstruction/fetchUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
type: array
items:
type: string
minItems: 1
description: Indicate the fetch correlation identifier.
responses:
\'200\':
description: Expected response to a valid request.
content:
application/json:
schema:
\$ref: \'#/components/schemas/NmfafDataAnaNotification\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nmfaf-3cadatamanagement: Access to the nmfaf-3cadatamanagement API
schemas:
NmfafDataRetrievalNotification:
description: >
Represents the data or analytics or notification of availability of data or
analytics
to notification endpoints.
type: object
required:
\- correId
oneOf:
\- required: [dataAnaNotif]
\- required: [fetchInstruction]
properties:
correId:
type: string
description: >
Represents the Analytics Consumer Notification Correlation ID
or Data Consumer Notification Correlation ID. It shall be set to the same
value as the \"correId\" attribute of MessageConfiguration data type.
dataAnaNotif:
\$ref: \'#/components/schemas/NmfafDataAnaNotification\'
fetchInstruction:
\$ref: \'#/components/schemas/FetchInstruction\'
FetchInstruction:
description: >
The fetch instructions indicate whether the data or analytics are to be
fetched by the
consumer.
type: object
required:
\- fetchUri
\- fetchCorrIds
properties:
fetchUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
fetchCorrIds:
type: array
items:
type: string
minItems: 1
description: The fetch correlation identifier(s) of the MFAF Data or
Analytics.
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
NmfafDataAnaNotification:
description: MFAF data or analytics.
type: object
oneOf:
\- required: [anaNotifications]
\- required: [dataNotif]
properties:
anaNotifications:
type: array
items:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/NnwdafEventsSubscriptionNotification\'
minItems: 1
description: List of analytics subscription notifications.
dataNotif:
\$ref:
\'TS29575_Nadrf_DataManagement.yaml#/components/schemas/DataNotification\'
#