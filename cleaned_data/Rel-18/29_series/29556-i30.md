# Foreword {#foreword .TT}
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**Should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**Can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**Will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Neasdf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the EASDF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.548 [14].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The Oauth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".
[15] IETF RFC 6902: \"JavaScript Object Notation (JSON) Patch\".
[16] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[17] Void.
[18] IETF RFC 7871: \"Client Subnet in DNS Queries\".
[19] 3GPP TS 23.003: \"Numbering, addressing and identification\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**One-Time DNS Rule:** A DNS Rule that applies only once to a specific DNS
message earlier buffered in the EASDF and reported to the SMF (see clause
5.2.3.2.4).
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
BD AIT Baseline DNS Action Information Template
BD MDT Baseline DNS Message Detection Template
EASDF Edge Application Server Discovery Function
ECS EDNS Client Subnet
EDNS Extension mechanisms for DNS
HR-SBO Home Routed Session BreakOut
MDT (DNS Query or DNS Response) Message Detection Template
# 4 Overview
## 4.1 Introduction
Within the 5GC, the EASDF offers services to the SMF via the Neasdf service
based interface (see 3GPP TS 23.548 [14], 3GPP TS 23.501 [2] and 3GPP TS
23.502 [3]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the EASDF
and the scope of the present specification.
Figure 4.1-1: Reference model -- EASDF
The functionalities supported by the EASDF are listed in clause 5.1.1 of 3GPP
TS 23.548 [14].
In roaming scenarios, the V-EASDF offers service to the SMF in the VPLMN in
both LBO roaming and HR with Session Breakout (HR-SBO) roaming scenarios (see
clause 4.2 of 3GPP TS 23.548 [14]).
# 5 Services offered by the EASDF
## 5.1 Introduction
The EASDF offers to other NFs the following service:
Table 5.1-1: NF Service provided by EASDF
Service Name Description Example Consumer
* * *
Neasdf_DNSContext This service enables the consumer to create, update and
delete DNS context in EASDF, or subscribe to DNS message reporting from EASDF.
SMF, V-SMF Neasdf_BaselineDNSPattern This service enables the consumer to
create, update and delete Baseline DNS pattern in EASDF. SMF, V-SMF
The Neasdf_DNSContext service and Neasdf_BaselineDNSPattern service are
specified in 3GPP TS 23.548 [14].
Table 5.1-2 summarizes the corresponding APIs defined for this specification.
Table 5.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName Annex
* * *
Neasdf_DNSContext 6.1 EASDF DNSContext Service TS29556_Neasdf_DNSContext.yaml
neasdf-dnscontext A.2 Neasdf_BaselineDNSPattern 6.2 EASDF BaselineDNSPattern
Service TS29556_Neasdf_BaselineDNSPattern.yaml neasdf-baselinednspattern A.3
## 5.2 Neasdf_DNSContext Service
### 5.2.1 Service Description
The Neasdf_DNSContext service operates on the DNS contexts. The EASDF is
acting as NF Service Producer, while the SMF is the NF Service Consumer.
Following functionalities are provided by the Neasdf_DNSContext service:
\- Create a DNS context in EASDF;
\- Update a DNS context in EASDF;
\- Delete a DNS context in EASDF;
\- Enable the EASDF to report DNS signalling related information to the NF
service consumer when receiving DNS Query or DNS Response.
The Neasdf_DNSContext service supports the following service operations.
Table 5.2.1-1: Service operations supported by the Neasdf_DNSContext service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | Create | Create a DNS | Re | SMF, V-SMF | | | context in | quest/Response | | | | EASDF. | | | +----------------+----------------+----------------+----------------+ | Update | Update a DNS | Re | SMF, V-SMF | | | context in | quest/Response | | | | EASDF. | | | +----------------+----------------+----------------+----------------+ | Delete | Delete a DNS | Re | SMF, V-SMF | | | context in | quest/Response | | | | EASDF. | | | +----------------+----------------+----------------+----------------+ | Notify | EASDF reports | Su | SMF, V-SMF | | | DNS signalling | bscribe/Notify | | | | related | | | | | information to | | | | | the NF service | | | | | consumer when | | | | | receiving DNS | | | | | Query or DNS | | | | | Response. | | | +----------------+----------------+----------------+----------------+
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
See Table 5.2.1-1 for an overview of the service operations supported by the
Neasdf_DNSContext service.
#### 5.2.2.2 Create
##### 5.2.2.2.1 General
The Create service operation shall be used to create an individual DNS context
for a given PDU Session in the EASDF.
It is used in the following procedures:
\- EAS Discovery Procedure with EASDF (see clause 6.2.3.2.2 of 3GPP TS 23.548
[14]); and
\- EAS Discovery Procedure with V-EASDF for HR-SBO (see clauses 6.7.2.2 and
6.7.2.3) of 3GPP TS 23.548 [14].
There shall be only one individual DNS context created in an EASDF per PDU
session.
The NF Service Consumer (e.g. SMF) shall create a DNS context by using the
HTTP POST method as shown in Figure 5.2.2.2.1-1.
Figure 5.2.2.2.1-1: DNS context creation
1\. The NF Service Consumer shall send a POST request to the resource
representing the DNS contexts collection resource of the EASDF. The payload
body of the POST request shall contain:
\- the UE IP address, S-NSSAI and the DNN of the related PDU session;
\- a notification URI for receiving DNS context related event notifications,
if notifications are requested;
\- one or more DNS rules.
In addition, for a DNS context creation in the V-EASDF for HR-SBO in VPLMN:
\- the UE IP address shall be set to an unspecified address, i.e. to the IPv4
address 0.0.0.0, if the IP address of the UE\'s PDU session is not known yet;
\- the S-NSSAI shall correspond to the VPLMN S-NSSAI value; and
\- the payload body of the POST request shall contain the HPLMN ID.
Editor\'s note: it is FFS how to encode the unspecified IPv6 Prefix (the value
shall match the IPv6 prefix pattern defined in TS 29.571).
2a. On success, a \"201 Created\" response shall be returned with the
\"Location\" header containing the URI of the created resource.
The POST response body shall include:
\- the IP address of the EASDF (to be sent by the SMF to the UE).
2b. On failure, or redirection, one of the HTTP status code listed in Table
6.1.3.2.3.1-3 shall be returned.
#### 5.2.2.3 Update
##### 5.2.2.3.1 General
The Update service operation shall be used to update an individual DNS context
previously created in the EASDF. The update operation may apply to the whole
DNS context (complete replacement of the data of the existing DNS context by
new data), or it may apply to modify a subset of the parameters of the DNS
context.
It is used in the following procedures:
\- EAS Discovery Procedure with EASDF (see clause 6.2.3.2.2 of 3GPP TS 23.548
[14]); and
\- EAS Discovery Procedure with V-EASDF for HR-SBO (see clauses 6.7.2.2 and
6.7.2.3) of 3GPP TS 23.548 [14].
To perform a partial update of the DNS context of a given DNS context Id, the
NF Service Consumer shall issue an HTTP PATCH request, as shown in Figure
5.2.2.3.1-1. This partial update shall be used to add, delete and/or replace
individual parameters of the DNS context.
Figure 5.2.2.3.1-1: DNS context Partial Update
1\. The NF Service Consumer (e.g. SMF) shall send a PATCH request to the
resource URI representing the individual DNS context, identified by the
{dnsContextId}. The payload body of the PATCH request shall contain the list
of operations (add/delete/replace) to be applied to parameters in the
individual DNS context.
2a. On success, if all the modification instructions in the PATCH request have
been implemented, \"204 No Content\" shall be returned.
2b. If some of the modification instructions for unknown attribute(s) in the
PATCH request have been ignored, the EASDF shall respond with \"200 OK\" with
the response body containing PatchResult, as specified in clause 5.2.7.2 of
3GPP TS 29.500 [4].
2c. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.2-3 shall be returned.
To perform a complete replacement of the data of the DNS context of a given
DNS context Id, the NF Service Consumer shall issue an HTTP PUT request, as
shown in Figure 5.2.2.3.1-2:
Figure 5.2.2.3.1-2: DNS context Complete Replacement
1\. The NF service consumer (e.g. SMF) shall send a PUT request to the
resource URI representing the individual DNS context, identified by the
{dnsContextId}. The payload body of the PUT request shall contain a
representation of the individual DNS context to be completely replaced in the
EASDF.
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.3-3 shall be returned.
For HR-SBO in VPLMN, if the V-SMF has created the DNS context with an
unspecified UE IP address, the V-SMF shall use either of the procedures above
including the UE IP address assigned by the HPLMN to complete the
configuration of the context in the V-EASDF.
#### 5.2.2.4 Delete
##### 5.2.2.4.1 General
The Delete Service operation shall be used by the NF service consumer (e.g.
SMF) to delete the individual DNS context in the EASDF.
Figure 5.2.2.4.1-1: DNS context deletion
1\. The NF Service Consumer (e.g. SMF) shall send a DELETE request to delete
the individual DNS context represented by the {dnsContextId}. The request body
shall be empty.
2a. On success, \"204 No Content\" shall be returned. The response body shall
be empty.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.1-3 shall be returned.
#### 5.2.2.5 Notify
##### 5.2.2.5.1 General
The Notify service operation shall be used to notify the NF Service Consumer
(e.g. SMF or V-SMF) about a DNS context related event, e.g. if a received DNS
Query message or DNS response message matches a DNS detection template of an
DNS rule and the associated action requires to report the message to the NF
service producer.
It is used in the following procedures:
\- EAS Discovery Procedure with EASDF (see clause 6.2.3.2.2 of 3GPP TS 23.548
[14]); and
\- EAS Discovery Procedure with V-EASDF for HR-SBO (see clauses 6.7.2.2 and
6.7.2.3) of 3GPP TS 23.548 [14].
The EASDF shall send an HTTP POST request targeting the DNS context
notification URI provided by the NF Service Consumer in the Create or Update
service operation (see clause 5.2.2.2.1). See also Figure 5.2.2.5.1-1.
Figure 5.2.2.5.1-1: DNS Context Notify
1\. The EASDF shall send a HTTP POST request to the DNS context notification
URI, and the payload body of the POST request shall contain a
DnsContextNotification data structure, with the DNS message report that was
subscribed by the NF Service Consumer.
2a. On success, \"204 No Content\" shall be returned and the payload body of
the POST response shall be empty.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.5.2.3.1-3 shall be returned.
If the EASDF receives a \"404 Not Found\" response with the application error
\"DNS_CONTEXT_NOT_FOUND\", the EASDF should consider that the DNS context is
no longer valid and delete the DNS context.
The EASDF should not keep on sending notification requests to an NF service
consumer and may consider that the DNS context is no longer valid and delete
the DNS context, if it receives one or more \"404 Not Found\" responses
without an application error or with other application errors.
### 5.2.3 DNS messages processing by EASDF
#### 5.2.3.1 Introduction
This clause specifies how the EASDF shall process DNS messages according to
the instructions received from the SMF.
#### 5.2.3.2 DNS message processing model
##### 5.2.3.2.1 DNS Context
The SMF shall control how the EASDF processes DNS messages received for a
particular UE\'s PDU session by creating one single DNS context per PDU
session including the following information:
\- the UE IP address, S-NSSAI and DNN of the PDU session;
\- the H-PLMN ID for a PDU session supporting HR-SBO in VPLMN; and
\- one or more DNS rules.
There shall be at most one DNS context created in the EASDF with the same UE
IP address, S-NSSAI and DNN, and for HR-SBO in VPLMN, in addition with the
same H-PLMN ID. If the EASDF receives a request to create a DNS context for
which another DNS context already exists with the same UE IP address, S-NSSAI
and DNN, and for HR-SBO in VPLMN, in addition with the same H-PLMN ID,, the
EASDF shall proceed with creating the DNS context and shall delete the earlier
existing DNS context with the same UE IP address, S-NSSAI and DNN, and for HR-
SBO in VPLMN, in addition with the same H-PLMN ID.
As an exception, for HR-SBO in VPLMN, several DNS contexts may be created in
the V-EASDF with an unspecified UE IP address and the same S-NSSAI, DNN and
H-PLMN ID (see clause 5.2.2.2.1). The V-EASDF shall support creating such DNS
contexts without deleting earlier DNS contexts with the same unspecified UE IP
address, S-NSSAI, DNN and H-PLMN ID.
##### 5.2.3.2.2 DNS Rule
A DNS rule shall apply either to DNS Query messages or DNS Response messages.
A DNS rule shall contain:
\- the DNS Rule ID uniquely identifying the DNS rule within the DNS context,
for a DNS rule other than a One-Time DNS rule;
\- precedence information, indicating the order in which the EASDF shall
attempt to match DNS messages against all the DNS rules provisioned in the DNS
context, for a DNS rule other than a One-Time DNS rule;
\- for a DNS rule provisioned for DNS Query messages:
\- for a DNS rule other than a One-Time DNS rule:
\- at least one DNS Query Message Detection Template (MDT) or Baseline DNS
Query Message Detection Template (BD MDT) ID referring to a BD MDT provisioned
in a baseline DNS pattern; such a DNS rule may contain one or more DNS Query
MDTs and/or BD MDT IDs referring to BD MDTs provisioned in one or more
baseline DNS patterns; or
\- for a One-Time DNS rule:
\- the DNS message identifier uniquely identifying the DNS message buffered in
the EASDF;
\- for a DNS rule provisioned for DNS Response messages:
\- for a DNS rule other than a One-Time DNS rule:
\- at least one DNS Response MDT or Baseline DNS Response MDT ID referring to
a BD MDT provisioned in a baseline DNS pattern; a DNS rule may contain one or
more DNS Response MDTs and/or BD MDT IDs referring to BD MDTs provisioned in
one or more baseline DNS patterns;
\- for a One-Time DNS rule:
\- the DNS message identifier uniquely identifying the DNS message buffered in
the EASDF;
\- a list of actions to apply to all DNS messages matching at least one DNS
MDT of the DNS rule or one BD MDT referred by the DNS rule.
See clauses 5.2.3.5 and 5.2.3.2.4 for the description of baseline DNS patterns
and One-Time DNS rules respectively.
Figure 5.2.3.2-1 provides an overview of DNS contexts, DNS rules (other than
One-Time DNS rules) and baseline DNS patterns, depicting one DNS context
created with N DNS rules, some of them referring to baseline DNS patterns.
Figure 5.2.3.2-1: Overview of DNS contexts, DNS rules and Baseline DNS
Patterns
##### 5.2.3.2.3 Processing flow for incoming DNS messages
Upon receipt of a DNS message, the EASDF shall first identify the DNS context
corresponding to the DNS message as follows:
\- for DNS Query message: by using the source IP address of the DNS Query
message and by matching it with the UE IP address provisioned in the DNS Query
MDTs if any or with the UE IP address provisioned in the DNS context; and
\- for a DNS Response message: by matching the DNS response with the DNS Query
(either by the EASDF assigning a specific Transaction ID when forwarding the
DNS Query message and by matching the Transaction ID in the DNS Query and DNS
Response, or by the EASDF using a unique couple of source IP address and UDP
port per DNS context when forwarding the DNS Query message and by matching the
DNS Response message using the destination IP address and UDP port) and by
retrieving the DNS context that is associated with the DNS query.
NOTE 1: The EASDF has direct user plane connectivity (i.e., without any NAT)
with the PSA UPF over N6 for the transmission of DNS signalling exchanged with
the UE. The deployment of a NAT between EASDF and PSA UPF is not supported.
To support DNS contexts with the same (private) UE IP address from different
S-NSSAI and DNNs, the EASDF may associate a specific EASDF address with a
specific S-NSSAI and DNN and provide this address to the SMF during the
creation of a DNS context associated with this S-NSSAI and DNN. If so, the
EASDF shall also use the destination IP address of DNS Query messages to
identify the DNS context matching an incoming DNS request.
To support DNS contexts with the same (private) UE IP address from different
PLMNs and from different S-NSSAI and DNNs, the V-EASDF may associate a
specific V-EASDF address with a specific HPLMN ID, S-NSSAI and DNN and provide
this address to the V-SMF during the creation of a DNS context associated with
this HPLMN ID, S-NSSAI and DNN. If so, the V-EASDF shall also use the
destination IP address of DNS Query messages to identify the DNS context
matching an incoming DNS request.
A DNS context containing an unspecified UE IP address shall be considered to
never match any DNS Query message.
If there is no DNS context matching a DNS Query or Response message, the EASDF
should forward the DNS Query message towards a preconfigured DNS server and
the DNS response towards the UE.
After finding the DNS context, the EASDF shall look up for a DNS rule matching
the DNS message, among all DNS rules provisioned in the DNS Context, starting
with the DNS rules with the highest precedence and continuing then with DNS
rules with a lower precedence, in decreasing order of precedence. If there is
no DNS rule matching the DNS message, the EASDF should forward the DNS Query
message towards a preconfigured DNS server/resolver for resolution.
NOTE 2: The SMF can provision in the DNS context a DNS rule with the lowest
precedence and with a DNS Query MDT or a DNS Response MDT containing a
wildcard FQDN, such as to associate a default behavior to all DNS messages not
matching any other DNS rule, e.g. forward DNS Query messages to a specific DNS
Server.
After having found a matching DNS rule, the EASDF shall stop looking up for
other DNS rules and shall apply the list of actions provisioned in the
matching DNS rule.
A DNS message matches a DNS rule if it matches at least one MDT of the DNS
Rule or one BD MDT referred by the DNS rule.
The DNS message processing models for DNS Query and DNS Response are depicted
in Figure 5.2.3.2-2 and 5.2.3.2-3 respectively.
Figure 5.2.3.2-2: DNS Query processing flow in the EASDF
Figure 5.2.3.2-3: DNS Response processing flow in the EASDF
##### 5.2.3.2.4 Processing of a One-Time DNS Rule applicable to a specific DNS
message earlier buffered in the EASDF
The SMF may instruct the EASDF to apply certain actions (e.g. forward, drop or
respond to a DNS message) to a specific DNS message, that has been earlier
buffered in the EASDF and reported to the SMF, by creating a new DNS rule in
the DNS context that includes:
\- the DNS message identifier uniquely identifying the DNS message within the
DNS context, as reported earlier by the EASDF in the DNSContext Notify
request; and
\- the requested actions to apply to the DNS message.
Such a DNS rule shall not contain any DNS Rule ID, precedence, MBT nor BD MDT.
Upon receipt of an DNSContext Update request that creates such a DNS rule, the
EASDF shall apply the requested actions to the specific DNS message identified
by the DNS message identifier and then delete the DNS Rule. If there is no
buffered DNS message corresponding to the DNS message identifier received in
the DNS rule, the EASDF shall reject the request with an error.
NOTE: A DNS rule that includes a DNS message identifier is referred as a
\"One-Time\" DNS rule throughout this specification since the DNS rule is
applied only once for the indicated DNS message and the DNS rule is not
further stored by the EASDF.
#### 5.2.3.3 DNS Message Detection Template
##### 5.2.3.3.1 General
The contents of a DNS Query MDT or a DNS Response MDT may be provisioned
directly in a DNS rule itself or in a BD MDT provisioned in a baseline DNS
pattern. In the latter case, a DNS rule may refer to one or more BD MDTs (that
are all either DNS Query MDTs or DNS Response MDTs) of one or more baseline
DNS patterns by referencing the BD MDT IDs of the BD MDTs of the baseline DNS
patterns.
The following clauses define the contents of DNS Query MDTs and DNS Response
MDTs, provisioned in a DNS rule or in a BD MDT.
##### 5.2.3.3.2 DNS Query MDT
A DNS Query Message Detection Template may include:
\- a UE IP address;
\- a list of FQDN ranges or a wildcard FQDN representing \"any FQDN\" (see
clauses 6.1.6.2.5 and 6.1.6.2.6).
A UE IP address may only be provisioned in a DNS Query MDT, i.e. it cannot be
provisioned in a Baseline DNS MDT. However, a DNS rule may be provisioned with
a reference to one or more Baseline DNS Query MDTs together with a UE IP
address (see clause 6.1.6.2.20), in which case the referenced Baseline DNS
Query MDTs shall be matched for the specific UE IP address.
When present in a DNS Query MDT, or together with the reference to a Baseline
DNS Query MDT, the UE IP address shall be used for matching the DNS Query
message with the related DNS rule (see clause 5.2.3.2). Otherwise, the UE IP
address provisioned in the DNS context shall be used.
FQDNs shall be matched against the Query Domain Name of DNS Query messages.
##### 5.2.3.3.3 DNS Response MDT
A DNS Response Message Detection Template may include:
\- a list of FQDN ranges or a wildcard FQDN representing \"any FQDN\"; and/or
\- a list of EAS IP addresses ranges.
FQDNs shall be matched against the Domain Names in the Answers of DNS Response
messages.
EAS IP addresses ranges shall be matched against the IP addresses returned in
the Answers of DNS Response messages.
#### 5.2.3.4 Actions applicable to DNS message
##### 5.2.3.4.1 General
Each DNS rule shall be provisioned with the list of actions to apply to all
DNS messages matching the DNS rule.
The SMF may request the EASDF to apply one or more of the following actions:
1) REPORT DNS message content to the SMF.
The SMF may further request the EASDF to send a report only once to the SMF,
i.e. only when a first DNS message matches any MDT of the DNS rule. If so, the
EASDF shall skip this action (i.e. report to SMF) for any subsequent DNS
message matching the DNS rule.
The SMF may further request the EASDF to reset the reporting-once indication,
in which case the EASDF shall send (only) one more report at the next DNS
message that matches the DNS rule.
2) BUFFER DNS message.
3) FORWARD DNS message.
The SMF may further request the EASDF to set the destination IP address of the
DNS Query message to a specific DNS Server address. The DNS Server address may
either be included in the DNS rule or in a Baseline DNS Action Information
Template (BD AIT); in the latter case, the DNS rule shall refer to the
corresponding BD AIT ID. If no DNS Server address is provided by the SMF, the
EASDF shall forward the DNS message to a locally pre-configured DNS
server/resolver.
The SMF may request the EASDF to build an EDNS Client Subnet (ECS) option to
be included in the DNS Query message as defined in IETF RFC 7871 [18], or to
be used for replacing the ECS option if an ECS option is received in the DNS
Query message from the UE. The information for the EASDF to build the ECS
option may either be included in the DNS rule or in a Baseline DNS Action
Information Template (BD AIT); in the latter case, the DNS rule shall refer to
the corresponding BD AIT ID.
When forwarding a DNS Query message, if the SMF did not request the EASDF to
build an ECS option, the EASDF shall remove the ECS option received from the
UE in the DNS Query, if any.
When forwarding a DNS Response message to the UE, based on configuration, the
EASDF shall either remove any received ECS option or, if an ECS option was
received in the DNS Query from the UE, replace it with the latter ECS option.
4) DISCARD DNS message.
5) RESPOND to DNS Query message.\ \ If both the SMF and the EASDF support the
CEASD feature (see clause 6.1.8), the SMF may instruct the EASDF to build a
DNS Response message to a DNS Query message and to send it to the UE by
setting the applyAction to the value \"RESPOND\", e.g. when a set of UEs shall
use the same EAS (see clause 6.2.3.2.5 of 3GPP TS 23.548 [14]). When
requesting so, the SMF shall indicate to the EASDF the EAS IP address(es) that
the DNS response shall contain.\ Upon receipt of such a request, the EASDF
shall build a DNS Response message to the DNS Query message, that includes the
EAS IP address(es) indicated by the SMF and send it to the UE.
The SMF may change the list of actions associated to a DNS rule (other than a
One-Time DNS rule), e.g. to replace the actions to REPORT and BUFFER DNS Query
messages to the SMF by the action to FORWARD the DNS messages. In such a case,
any earlier buffered DNS message (matching the DNS rule) and any further
incoming DNS message shall be processed according to the new instructions
received from the SMF, e.g. they shall all be forwarded. The SMF may
alternatively request the EASDF to apply certain actions to a specific DNS
message by creating a One-Time DNS rule as defined in clause 5.2.3.2.4.
##### 5.2.3.4.2 Event reporting by EASDF
The EASDF shall send a report to the SMF:
\- to report the contents of DNS (Query or Response) messages matching a DNS
rule provisioned with the action to report the DNS message contents.
The EASDF shall send reports to the SMF as defined in clause 5.2.2.5. The
notification request sent to the SMF may contain one or more reports, for DNS
Query and/or DNS Response messages matching one or more DNS rules provisioned
in the DNS context. For each report, the EASDF may provide a DNS message
identifier uniquely identifying the DNS message reported to the SMF within the
DNS context (see clause 5.2.3.2.4).
#### 5.2.3.5 Baseline DNS Patterns
##### 5.2.3.5.1 General
The SMF may create, modify or delete baseline DNS patterns in the EASDF using
the Neasdf_BaselineDnsPattern service (see clause 5.3).
A baseline DNS pattern contains baseline DNS information that may apply to
multiple PDU sessions, e.g. to all PDU sessions with a certain DNN and
S-NSSAI.
A baseline DNS pattern may contain:
\- one or several BD MDTs; and/or
\- one or several BD AITs.
A baseline DNS pattern may contain BD MDTs for DNS Query messages and BD MDTs
for DNS Response messages. One BD MDT shall be either a DNS Query MDT or a DNS
Response MDT (see clause 5.2.3.3).
A BD AIT may include:
\- one or more local DNS Server IP address(es); and/or
\- ECS option information.
NOTE 1: Multiple DNS Server IP addresses can be provided for resiliency.
A BD MDT and a BD AIT shall be uniquely identified in the EASDF by the
combination of the following information:
\- the URI of the baseline DNS pattern in which the BD MDT or BD AIT is
defined; the URI shall be chosen by the SMF when creating the baseline DNS
pattern (see clause 6.2.3); and
\- an MDT or AIT identifier (string) uniquely identifying the MDT or AIT
within the baseline DNS pattern; this identifier shall be chosen by the SMF
when creating the BD MDT or BD AIT.
The URI of a baseline DNS pattern shall be unique per SMF set, if an SMF set
controls the EASDF, or unique per SMF otherwise.
NOTE 2: The URI of a baseline DNS pattern includes an identifier of the SMF or
SMF set (see clause 6.2.3.1) and SMF implementation specific information. This
ensures the uniqueness of the URI in the EASDF when several SMFs or SMF sets
control the same EASDF. As an example, an SMF can encode the URI of the
baseline DNS pattern and the MDT or AIT identifier to include the DNAI or a
sequence number. The EASDF is not meant to understand the structure of this
information.
When a BD MDT or BD AIT of a baseline DNS pattern is modified by the SMF, the
modified BD MDT or BD AIT shall apply to all DNS rules of all DNS contexts
referring to that BD MDT or BD AIT.
## 5.3 Neasdf_BaselineDNSPattern Service
### 5.3.1 Service Description
The Neasdf_BaselineDNSPattern service operates on the Baseline DNS patterns in
EASDF, which contains the DNS base information that may apply to multiple PDU
sessions, e.g. DNS Query and Response MDTs applicable to all PDU sessions with
a certain DNN and S-NSSAI. The EASDF is acting as NF Service Producer, while
the SMF is the NF Service Consumer.
Following functionalities are provided by the Neasdf_BaselineDNSPattern
service:
\- Create a Baseline DNS Pattern in EASDF;
\- Update the Baseline DNS Pattern in EASDF;
\- Delete the Baseline DNS Pattern in EASDF.
The Neasdf_BaselineDNSPattern service supports the following service
operations.
Table 5.3.1-1: Service operations supported by the Neasdf_BaselineDNSPattern
service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | Create | Create a | Re | SMF, V-SMF | | | Baseline DNS | quest/Response | | | | Pattern in | | | | | EASDF. | | | +----------------+----------------+----------------+----------------+ | Update | Update the | Re | SMF, V-SMF | | | Baseline DNS | quest/Response | | | | Pattern in | | | | | EASDF. | | | +----------------+----------------+----------------+----------------+ | Delete | Delete the | Re | SMF, V-SMF | | | Baseline DNS | quest/Response | | | | Pattern in | | | | | EASDF. | | | +----------------+----------------+----------------+----------------+
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
See Table 5.3.1-1 for an overview of the service operations supported by the
Neasdf_BaselineDNSPattern service.
#### 5.3.2.2 Create
##### 5.3.2.2.1 General
The Create service operation shall be used to create the Baseline DNS Pattern
in the EASDF.
It is used in the following procedures:
\- BaselineDNSPattern management in the EASDF procedure (see clause 6.2.3.4.4
of 3GPP TS 23.548 [14]).
The NF Service Consumer (e.g. SMF) shall create the Baseline DNS Pattern by
using the HTTP PUT method as shown in Figure 5.3.2.2.1-1.
Figure 5.3.2.2.1-1: Baseline DNS Pattern creation
1\. The NF Service Consumer shall send a PUT request to create the Baseline
DNS Pattern in the EASDF. The payload body of the PUT request may contain:
\- one or more Baseline DNS message detection templates (MDTs);
\- one or more Baseline DNS action information templates (AITs).
2a. On success, a \"201 Created\" response shall be returned with the
\"Location\" header containing the URI of the created resource.
2b. On failure, or redirection, one of the HTTP status code listed in Table
6.2.3.2.3.2-3 shall be returned.
#### 5.3.2.3 Update
##### 5.3.2.3.1 General
The Update service operation shall be used to update an individual Baseline
DNS Pattern previously created in the EASDF. The update operation may apply to
the whole Baseline DNS Pattern (complete replacement of the data of the
existing Baseline DNS Pattern by new data), or it may apply to modify a subset
of the parameters of the Baseline DNS Pattern.
It is used in the following procedures:
\- BaselineDNSPattern management in the EASDF procedure (see clause 6.2.3.4.4
of 3GPP TS 23.548 [14]).
To perform a partial update of the Baseline DNS Pattern, the NF Service
Consumer shall issue an HTTP PATCH request, as shown in Figure 5.3.2.3.1-1.
This partial update shall be used to add, delete and/or replace individual
parameters of the Baseline DNS Pattern.
Figure 5.3.2.3.1-1: Baseline DNS Pattern Partial Update
1\. The NF Service Consumer (e.g. SMF) shall send a PATCH request to the
resource URI representing the individual Baseline DNS Pattern. The payload
body of the PATCH request shall contain the list of operations
(add/delete/replace) to be applied to parameters in the individual Baseline
DNS Pattern.
2a. On success, if all the modification instructions in the PATCH request have
been implemented, \"204 No Content\" shall be returned.
2b. If some of the modification instructions for unknown attribute(s) in the
PATCH request have been ignored, the EASDF shall respond with \"200 OK\" with
the response body containing PatchResult, as specified in clause 5.2.7.2 of
3GPP TS 29.500 [4].
2c. On failure or redirection, one of the HTTP status code listed in Table
6.2.3.2.3.1-3 shall be returned.
To perform a complete replacement of the data of the Baseline DNS Pattern, the
NF Service Consumer shall issue an HTTP PUT request, as shown in Figure
5.3.2.3.1-2:
Figure 5.3.2.3.1-2: Baseline DNS Pattern Complete Replacement
1\. The NF service consumer (e.g. SMF) shall send a PUT request to the
resource URI representing the individual Baseline DNS Pattern. The payload
body of the PUT request shall contain a representation of the individual
Baseline DNS Pattern to be completely replaced in the EASDF.
2a. On success, \"204 No Content\" shall be returned.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.2.3.2.3.2-3 shall be returned.
#### 5.3.2.4 Delete
##### 5.3.2.4.1 General
The Delete service operation shall be used to delete an individual Baseline
DNS Pattern previously created in the EASDF.
It is used in the following procedures:
\- BaselineDNSPattern management in the EASDF procedure (see clause 6.2.3.4.4
of 3GPP TS 23.548 [14]).
To perform a deletion of the Baseline DNS Pattern, the NF Service Consumer
shall issue an HTTP DELETE request, as shown in Figure 5.3.2.4.1-1.
Figure 5.3.2.4.1-1: Baseline DNS Pattern Deletion
1\. The NF Service Consumer (e.g. SMF) shall send a DELETE request to delete
the individual Baseline DNS Pattern. The request body shall be empty.
2a. On success, \"204 No Content\" shall be returned. The response body shall
be empty.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.2.3.2.3.3-3 shall be returned.
# 6 API Definitions
## 6.1 Neasdf_DNSContext Service API
### 6.1.1 Introduction
The Neasdf_DNSContext shall use the Neasdf_DNSContext API.
The API URI of the Neasdf_DNSContext API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"neasdf-dnscontext\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Neasdf_DNSContext API is contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [12], shall be used as content type of
the HTTP bodies specified in the present specification as specified in clause
5.4 of 3GPP TS 29.500 [4]. The use of the JSON format shall be signalled by
the content type \"application/json\".
\- \"Problem Details\" JSON Object shall be used to indicate additional
details of the error in a HTTP response body and shall be signalled by the
content type \"application/problem+json\", as defined in IETF RFC 7807 [13];
\- JSON Patch (IETF RFC 6902 [15]). The use of the JSON Patch format in a HTTP
request body shall be signalled by the content type \"application/json-
patch+json\".
#### 6.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported. In this
release of this specification, no custom headers specific to the
Neasdf_DNSContext service are defined.
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1 describes the resource URI structure of the Neasdf_DNSContext
API.
Figure 6.1.3.1-1: Resource URI structure of the Neasdf_DNSContext API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+-----------------+-----------------+-------------+-----------------+ | Resource name | Resource URI | HTTP method | Description | | | | | | | | | | (service | | | | | operation) | +=================+=================+=============+=================+ | DNS contexts | /dns-contexts | POST | Create | | collection | | | | +-----------------+-----------------+-------------+-----------------+ | Individual DNS | /dns-contexts | PATCH | Update (partial | | context | /{dnsContextId} | | update) | +-----------------+-----------------+-------------+-----------------+ | | | PUT | Update | | | | | (complete | | | | | replacement) | +-----------------+-----------------+-------------+-----------------+ | | | DELETE | Delete | +-----------------+-----------------+-------------+-----------------+
#### 6.1.3.2 Resource: DNS contexts collection
##### 6.1.3.2.1 Description
This resource represents the collection of the individual DNS contexts created
in the EASDF.
This resource is modelled with the Collection resource archetype (see clause
C.2 of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/neasdf-dnscontext/\ /dns-contexts**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1 apiVersion string See clause 6.1.1
##### 6.1.3.2.3 Resource Standard Methods
##### 6.1.3.2.3.1 POST {#post .H6}
This method creates an individual DNS context resource in the EASDF.
This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.
Table 6.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description DnsContextCreateData M 1 Representation of
the DNS context to be created in the EASDF
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | DnsConte | M | 1 | 201 Created | Successful | | xtCreatedData | | | | creation of a | | | | | | DNS context | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | The \"cause\" | | roblemDetails | | | Request | attribute may | | | | | | be set to one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | BASEL | | | | | | INE_DNS_PAT | | | | | | TERN_UNKNOWN | | | | | | | | | | | | - | | | | | | B | | | | | | ASELINE_DNS\ | | | | | | _MDT_UNKNOWN | | | | | | | | | | | | - | | | | | | B | | | | | | ASELINE_DNS\ | | | | | | _AIT_UNKNOWN | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.1-4: Headers supported by the 201 response code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/neasdf-
dnscontext/\/dns-contexts/{dnsContextId}
* * *
Table 6.1.3.2.3.1-5: Headers supported by the 307 response code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance within the same
EASDF or EASDF (service) set. For the case, when a request is redirected to
the same target resource via a different SCP, see clause 6.10.9.1 in 3GPP TS
29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target EASDF
(service) instance ID towards which the request is redirected
* * *
Table 6.1.3.2.3.1-6: Headers supported by the 308 response code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance within the same
EASDF or EASDF (service) set. For the case, when a request is redirected to
the same target resource via a different SCP, see clause 6.10.9.1 in 3GPP TS
29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target EASDF
(service) instance ID towards which the request is redirected
* * *
##### 6.1.3.2.4 Resource Custom Operations
None.
#### 6.1.3.3 Resource: Individual DNS context
##### 6.1.3.3.1 Description
This resource represents an individual DNS context created in the EASDF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/neasdf-dnscontext/\ /dns-
contexts/{dnsContextId}**
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1. apiVersion string See clause 6.1.1.
dnsContextId string DNS context Identifier assigned by the EASDF during the
Create service operation.
##### 6.1.3.3.3 Resource Standard Methods
##### 6.1.3.3.3.1 DELETE {#delete-2 .H6}
This method deletes an individual DNS context resource in the EASDF.
This method shall support the URI query parameters specified in table
6.1.3.3.3.1-1.
Table 6.1.3.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.1-2 and the response data structures and response codes specified in
table 6.1.3.3.3.1-3.
Table 6.1.3.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.1.3.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | deletion of | | | | | | the DNS | | | | | | context. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates | | roblemDetails | | | | that the | | | | | | deletion of | | | | | | the DNS | | | | | | context | | | | | | failed due to | | | | | | an | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DNS_CONTEXT | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.1.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.1.3.3.3.2 PATCH {#patch .H6}
This method updates (partial update) an individual DNS context resource in the
EASDF.
This method shall support the URI query parameters specified in table
6.1.3.3.3.2-1.
Table 6.1.3.3.3.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.2-2 and the response data structures and response codes specified in
table 6.1.3.3.3.2-3.
Table 6.1.3.3.3.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1..N It contains the
list of changes to be made to the DNS context, according to the JSON PATCH
format specified in IETF RFC 6902 [15].
* * *
Table 6.1.3.3.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon partial | | | | | | success, e.g. | | | | | | some of the | | | | | | requested | | | | | | modifications | | | | | | for unknown | | | | | | attribute(s) | | | | | | are discarded | | | | | | while the | | | | | | rest of the | | | | | | modification | | | | | | instructions | | | | | | are fully | | | | | | accepted, the | | | | | | EASDF shall | | | | | | return the | | | | | | execution | | | | | | report. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | update of the | | | | | | DNS context. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates | | roblemDetails | | | | that the | | | | | | modification | | | | | | of the DNS | | | | | | context | | | | | | failed due to | | | | | | an | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DNS_CONTEXT | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.2-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.1.3.3.3.2-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.1.3.3.3.3 PUT {#put .H6}
This method updates (complete replacement) an individual DNS context resource
in the EASDF.
This method shall support the URI query parameters specified in table
6.1.3.3.3.3-1.
Table 6.1.3.3.3.3-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.3-2 and the response data structures and response codes specified in
table 6.1.3.3.3.3-3.
Table 6.1.3.3.3.3-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description DnsContextCreateData M 1 DNS Context Data
to replace the existing DNS context data
* * *
Table 6.1.3.3.3.3-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | update of the | | | | | | DNS context. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.3-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.1.3.3.3.3-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.1.3.3.4 Resource Custom Operations
There are no resource custom operations for the Neasdf_DNSContext service in
this release of the specification.
### 6.1.4 Custom Operations without associated resources
There are no custom operations defined without any associated resources for
the Neasdf_DNSContext service in this release of this specification.
### 6.1.5 Notifications
#### 6.1.5.1 General
This clause specifies the notifications supported by the Neasdf_DNSContext
service.
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 6.1.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | DNS Context | {notifyUri} | POST | DNS Context | | Notification | | | Notify | | | (Notification | | | | | URI provided | | | | | by NF Service | | | | | Consumer) | | | +----------------+----------------+----------------+----------------+
#### 6.1.5.2 DNS Context Notify
##### 6.1.5.2.1 Description
The Event Notification is used by the EASDF to report one or several observed
Events to a NF service consumer(e.g. SMF) that has subscribed to such
Notifications.
##### 6.1.5.2.2 Target URI
The Callback URI **\"{notifyUri}\"** shall be used with the callback URI
variables defined in table 6.1.5.2.2-1.
Table 6.1.5.2.2-1: Callback URI variables
Name Definition
* * *
notifyUri String formatted as URI with the Callback Uri
##### 6.1.5.2.3 Standard Methods
##### 6.1.5.2.3.1 POST {#post-1 .H6}
This method shall support the request data structures specified in table
6.1.5.2.3.1-1 and the response data structures and response codes specified in
table 6.1.5.2.3.1-1.
Table 6.1.5.2.3.1-2: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
DnsContextNotification M 1 Representation of the DNS context notification
Table 6.1.5.2.3.1-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | Successful | | | | | Content | notification | | | | | | of the DNS | | | | | | context | | | | | | change | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates | | roblemDetails | | | | that the | | | | | | notification | | | | | | for the DNS | | | | | | context | | | | | | failed due to | | | | | | an | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DNS_CONTEXT | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.2.3.1-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance. For the case when a request is redirected to the
same target resource via a different SCP, see clause 6.10.9.1 in 3GPP TS
29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the notification is redirected
Table 6.1.5.2.3.1-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance. For the case when a request is redirected to the
same target resource via a different SCP, see clause 6.10.9.1 in 3GPP TS
29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the notification is redirected
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Neasdf_DNSContext
service based interface protocol.
Table 6.1.6.1-1: Neasdf_DNSContext specific Data Types
+----------------+----------------+----------------+---------------+ | Data type | Clause defined | Description | Applicability | +================+================+================+===============+ | DnsCon | 6.1.6.2.2 | Data in DNS | | | textCreateData | | Context Create | | | | | request | | +----------------+----------------+----------------+---------------+ | DnsCont | 6.1.6.2.3 | Data in DNS | | | extCreatedData | | Context Create | | | | | response | | +----------------+----------------+----------------+---------------+ | DnsRule | 6.1.6.2.4 | DNS handling | | | | | rule | | +----------------+----------------+----------------+---------------+ | DnsQueryMdt | 6.1.6.2.5 | DNS Query | | | | | Message | | | | | Detection | | | | | Template | | +----------------+----------------+----------------+---------------+ | DnsRspMdt | 6.1.6.2.6 | DNS Response | | | | | Message | | | | | Detection | | | | | Template | | +----------------+----------------+----------------+---------------+ | Ip | 6.1.6.2.7 | IPv4 addresses | | | v4AddressRange | | range | | +----------------+----------------+----------------+---------------+ | I | 6.1.6.2.8 | IPv6 addresses | | | pv6PrefixRange | | range | | +----------------+----------------+----------------+---------------+ | Action | 6.1.6.2.9 | Action to | | | | | apply to DNS | | | | | messages | | | | | matching a | | | | | message | | | | | detection | | | | | template | | +----------------+----------------+----------------+---------------+ | DnsConte | 6.1.6.2.10 | DNS context | | | xtNotification | | notification | | +----------------+----------------+----------------+---------------+ | Forwar | 6.1.6.2.11 | Forwarding | | | dingParameters | | instructions | | +----------------+----------------+----------------+---------------+ | EcsOption | 6.1.6.2.12 | ECS Option | | | | | information | | +----------------+----------------+----------------+---------------+ | DnsCont | 6.1.6.2.13 | DNS context | | | extEventReport | | Event report | | +----------------+----------------+----------------+---------------+ | DnsQueryReport | 6.1.6.2.14 | DNS Query | | | | | Event Report | | +----------------+----------------+----------------+---------------+ | DnsRspReport | 6.1.6.2.15 | DNS Response | | | | | Event Report | | +----------------+----------------+----------------+---------------+ | EcsOptionInfo | 6.1.6.2.16 | ECS option | | | | | information | | +----------------+----------------+----------------+---------------+ | DnsSer | 6.1.6.2.17 | DNS Server | | | verAddressInfo | | address | | | | | information | | +----------------+----------------+----------------+---------------+ | Ba | 6.1.6.2.18 | Baseline DNS | | | selineDnsMdtId | | Message | | | | | Detection | | | | | Template | | | | | Identifier | | +----------------+----------------+----------------+---------------+ | Ba | 6.1.6.2.19 | Baseline DNS | | | selineDnsAitId | | Action | | | | | Information | | | | | Template | | | | | Identifier | | +----------------+----------------+----------------+---------------+ | BaselineD | 6.1.6.2.20 | Baseline DNS | | | nsQueryMdtInfo | | Query MDT ID | | | | | and | | | | | | | | | | optionally | | | | | associated | | | | | information | | +----------------+----------------+----------------+---------------+ | Baselin | 6.1.6.2.21 | Baseline DNS | | | eDnsRspMdtInfo | | Response MDT | | | | | ID and | | | | | | | | | | optionally | | | | | associated | | | | | information | | +----------------+----------------+----------------+---------------+ | Res | 6.1.6.2.22 | Instructions | | | pondParameters | | to apply to | | | | | build a DNS | | | | | response | | | | | message | | +----------------+----------------+----------------+---------------+ | ApplyAction | 6.1.6.3.3 | Action to | | | | | apply to the | | | | | DNS packet | | +----------------+----------------+----------------+---------------+
Table 6.1.6.1-2 specifies data types re-used by the Neasdf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Neasdf_DNSContext service based interface.
Table 6.1.6.1-2: Neasdf_DNSContext re-used Data Types
Data type Reference Comments Applicability
* * *
IPv4Addr 3GPP TS 29.571 [16] IPv4 address  
IPv6Prefix 3GPP TS 29.571 [16] IPv6 prefix  
Dnn 3GPP TS 29.571 [16] DNN  
Uri 3GPP TS 29.571 [16] URI  
Uint32 3GPP TS 29.571 [16] Unsigned 32-bit integer  
IpAddr 3GPP TS 29.571 [16] IP address  
IPv6Addr 3GPP TS 29.571 [16] IPv6 address  
SupportedFeatures 3GPP TS 29.571 [16] Supported features  
DateTime 3GPP TS 29.571 [16] Date and time  
PatchResult 3GPP TS 29.571 [16]  
FqdnPatternMatchingRule 3GPP TS 29.571 [16] FQDN Pattern Matching Rule  
Fqdn 3GPP TS 29.571 [16]  
Snssai 3GPP TS 29.571 [16]  
PlmnId 3GPP TS 29.571 [16] PLMN Identity
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: DnsContextCreateData
Table 6.1.6.2.2-1: Definition of type DnsContextCreateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | u | Ipv4Addr | C | 0..1 | UE IPv4 | | | eIpv4Addr | | | | address | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueI | I | C | 0..1 | UE IPv6 | | | pv6Prefix | pv6Prefix | | | prefix | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | M | 1 | DNN of | | | | | | | the PDU | | | | | | | session | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | sNssai | Snssai | M | 1 | S-NSSAI | | | | | | | of the | | | | | | | PDU | | | | | | | session | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | hplmnId | PlmnId | C | 0..1 | This IE | HR-SBO | | | | | | shall be | | | | | | | included | | | | | | | by the | | | | | | | V-SMF | | | | | | | towards | | | | | | | the | | | | | | | V-EASDF, | | | | | | | for a PDU | | | | | | | session | | | | | | | s | | | | | | | upporting | | | | | | | HR-SBO. | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | be set to | | | | | | | the | | | | | | | H-PLMN ID | | | | | | | of the | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsRules | map | M | 1..N | Map of | | | | (DnsRule) | | | DNS | | | | | | | message | | | | | | | handling | | | | | | | rules. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifyUri | Uri | C | 0..1 | Callback | | | | | | | URI to | | | | | | | receive | | | | | | | notif | | | | | | | ications. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if the NF | | | | | | | service | | | | | | | consumer | | | | | | | s | | | | | | | ubscribes | | | | | | | to | | | | | | | receive | | | | | | | DNS | | | | | | | context | | | | | | | notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | This IE | | | dFeatures | dFeatures | | | shall be | | | | | | | present | | | | | | | if at | | | | | | | least one | | | | | | | optional | | | | | | | feature | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 6.1.8 | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | At least | | | | | | | one of | | | | | | | the | | | | | | | u | | | | | | | eIpv4Addr | | | | | | | and | | | | | | | ueI | | | | | | | pv6Prefix | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | present. | | | | | | | If the | | | | | | | EASDF | | | | | | | supports | | | | | | | the | | | | | | | HR-SBO | | | | | | | feature | | | | | | | (i.e. if | | | | | | | it | | | | | | | supports | | | | | | | acting as | | | | | | | a | | | | | | | V-EASDF), | | | | | | | for a PDU | | | | | | | session | | | | | | | s | | | | | | | upporting | | | | | | | HR-SBO, | | | | | | | the V-SMF | | | | | | | shall set | | | | | | | the | | | | | | | u | | | | | | | eIpv4Addr | | | | | | | IE and/or | | | | | | | ueI | | | | | | | pv6Prefix | | | | | | | to an | | | | | | | un | | | | | | | specified | | | | | | | address | | | | | | | (see | | | | | | | clause 5 | | | | | | | .2.2.2.1) | | | | | | | if the UE | | | | | | | IP | | | | | | | address | | | | | | | is not | | | | | | | yet | | | | | | | known. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The UE IP | | | | | | | address | | | | | | | shall be | | | | | | | used | | | | | | | together | | | | | | | with the | | | | | | | DNN and | | | | | | | S-NSSAI | | | | | | | to | | | | | | | uniquely | | | | | | | identify | | | | | | | the DNS | | | | | | | context | | | | | | | a | | | | | | | ssociated | | | | | | | with a | | | | | | | PDU | | | | | | | session | | | | | | | (e.g. in | | | | | | | de | | | | | | | ployments | | | | | | | where the | | | | | | | same | | | | | | | EASDF is | | | | | | | used for | | | | | | | PDU | | | | | | | sessions | | | | | | | to DNs | | | | | | | with | | | | | | | ov | | | | | | | erlapping | | | | | | | IP | | | | | | | address | | | | | | | spaces) | | | | | | | and to | | | | | | | associate | | | | | | | the DNS | | | | | | | context | | | | | | | with a | | | | | | | specific | | | | | | | DN (and | | | | | | | e.g. | | | | | | | related | | | | | | | tunnels | | | | | | | c | | | | | | | onnecting | | | | | | | to the | | | | | | | DN). | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.3 Type: DnsContextCreatedData
Table 6.1.6.2.3-1: Definition of type DNSContextCreatedData
Attribute name Data type P Cardinality Description Applicability
* * *
easdfIpv4Addr IPv4Addr C 0..1 EASDF IPv4 address  
easdfIpv6Addr IPv6Addr C 0..1 EASDF IPv6 address  
supportedFeatures SupportedFeatures C 0..1 This IE shall be present if at
least one optional feature defined in clause 6.1.8 is supported.  
NOTE: At least one of the easdfIpv4Addr and easdfIpv6Addr attributes shall be
present.
##### 6.1.6.2.4 Type: DnsRule
Table 6.1.6.2.4-1: Definition of type DnsRule
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | dnsRuleId | string | C | 0..1 | Unique | | | | | | | I | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS rule | | | | | | | within | | | | | | | the DNS | | | | | | | context | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | present | | | | | | | for a DNS | | | | | | | rule | | | | | | | other | | | | | | | than a | | | | | | | One-Time | | | | | | | DNS rule. | | +-----------+-----------+---+-----------+-----------+-----------+ | label | string | O | 0..1 | DNS | | | | | | | rule\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE 5) | | +-----------+-----------+---+-----------+-----------+-----------+ | p | Uint32 | C | 0..1 | P | | | recedence | | | | recedence | | | | | | | of the | | | | | | | DNS | | | | | | | message | | | | | | | handling | | | | | | | rule. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | present | | | | | | | for a DNS | | | | | | | rule | | | | | | | other | | | | | | | than a | | | | | | | One-Time | | | | | | | DNS rule. | | | | | | | | | | | | | | The lower | | | | | | | p | | | | | | | recedence | | | | | | | values | | | | | | | indicate | | | | | | | higher | | | | | | | p | | | | | | | recedence | | | | | | | of the | | | | | | | DNS rule, | | | | | | | and the | | | | | | | higher | | | | | | | p | | | | | | | recedence | | | | | | | values | | | | | | | indicate | | | | | | | lower | | | | | | | p | | | | | | | recedence | | | | | | | of the | | | | | | | DNS rule | | | | | | | when | | | | | | | matching | | | | | | | a DNS | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsQue | map(Dns | C | 1..N | Map of | | | ryMdtList | QueryMdt) | | | DNS Query | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | b | arr | C | 1..N | List of | | | aseDnsQue | ay(Baseli | | | Baseline | | | ryMdtList | neDnsQuer | | | DNS Query | | | | yMdtInfo) | | | Message | | | | | | | Detection | | | | | | | Template | | | | | | | IDs and | | | | | | | o | | | | | | | ptionally | | | | | | | a | | | | | | | ssociated | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsR | map(D | C | 1..N | Map of | | | spMdtList | nsRspMdt) | | | DNS | | | | | | | Response | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | | | | | | | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | baseDnsR | a | C | 1..N | List of | | | spMdtList | rray(Base | | | Baseline | | | | lineDnsRs | | | DNS | | | | pMdtInfo) | | | Response | | | | | | | Message | | | | | | | Detection | | | | | | | Template | | | | | | | IDs and | | | | | | | o | | | | | | | ptionally | | | | | | | a | | | | | | | ssociated | | | | | | | inf | | | | | | | ormation. | | | | | | | (NOTE 4) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsMsgId | string | C | 0..1 | DNS | | | | | | | message | | | | | | | i | | | | | | | dentifier | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | present | | | | | | | for a | | | | | | | One-Time | | | | | | | DNS Rule | | | | | | | and it | | | | | | | shall be | | | | | | | set to | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS | | | | | | | message | | | | | | | buffered | | | | | | | in the | | | | | | | EASDF for | | | | | | | which the | | | | | | | DNS rule | | | | | | | shall | | | | | | | apply | | | | | | | (see | | | | | | | clause 5. | | | | | | | 2.3.2.4). | | | | | | | | | | | | | | (NOTE 6) | | +-----------+-----------+---+-----------+-----------+-----------+ | a | ma | M | 1..N | Map of | | | ctionList | p(Action) | | | Actions | | | | | | | to apply | | | | | | | to DNS | | | | | | | messages | | | | | | | matching | | | | | | | the DNS | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: A | | | | | | | DNS rule | | | | | | | shall be | | | | | | | pr | | | | | | | ovisioned | | | | | | | either | | | | | | | for DNS | | | | | | | Query | | | | | | | messages | | | | | | | or for | | | | | | | DNS | | | | | | | Response | | | | | | | messages. | | | | | | | | | | | | | | NOTE 2: A | | | | | | | DNS rule | | | | | | | including | | | | | | | the | | | | | | | dnsMsgId | | | | | | | IE shall | | | | | | | be | | | | | | | c | | | | | | | onsidered | | | | | | | as a | | | | | | | One-Time | | | | | | | DNS Rule | | | | | | | (see | | | | | | | clause 5. | | | | | | | 2.3.2.4). | | | | | | | | | | | | | | NOTE 3: | | | | | | | For a DNS | | | | | | | rule | | | | | | | other | | | | | | | than a | | | | | | | One-Time | | | | | | | DNS rule | | | | | | | pr | | | | | | | ovisioned | | | | | | | for DNS | | | | | | | Query | | | | | | | messages, | | | | | | | at least | | | | | | | one of | | | | | | | the | | | | | | | dnsQue | | | | | | | ryMdtList | | | | | | | and | | | | | | | b | | | | | | | aseDnsQue | | | | | | | ryMdtList | | | | | | | IEs shall | | | | | | | be | | | | | | | present. | | | | | | | | | | | | | | NOTE 4: | | | | | | | For a DNS | | | | | | | Rule | | | | | | | other | | | | | | | than a | | | | | | | One-Time | | | | | | | DNS rule | | | | | | | pr | | | | | | | ovisioned | | | | | | | for DNS | | | | | | | Response | | | | | | | messages, | | | | | | | at least | | | | | | | one of | | | | | | | the | | | | | | | dnsR | | | | | | | spMdtList | | | | | | | and | | | | | | | baseDnsR | | | | | | | spMdtList | | | | | | | IEs shall | | | | | | | be | | | | | | | present. | | | | | | | | | | | | | | NOTE 5: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | DNS rule. | | | | | | | It may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | | | | | | | | | NOTE 6: | | | | | | | An EASDF | | | | | | | can | | | | | | | encode | | | | | | | the DNS | | | | | | | message | | | | | | | i | | | | | | | dentifier | | | | | | | as the ID | | | | | | | field in | | | | | | | the | | | | | | | header of | | | | | | | the DNS | | | | | | | message, | | | | | | | or as any | | | | | | | other | | | | | | | string | | | | | | | uniquely | | | | | | | id | | | | | | | entifying | | | | | | | the DNS | | | | | | | message | | | | | | | within | | | | | | | the DNS | | | | | | | context. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.5 Type: DnsQueryMdt
Table 6.1.6.2.5-1: Definition of type DnsQueryMdt
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | mdtId | string | M | 1 | I | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS Query | | | | | | | message | | | | | | | detection | | | | | | | template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | label | string | O | 0..1 | DNS Query | | | | | | | MDT\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | sourc | Ipv4Addr | O | 0..1 | UE IPv4 | | | eIpv4Addr | | | | address | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceI | I | O | 0..1 | UE IPv6 | | | pv6Prefix | pv6Prefix | | | prefix | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | fqdnPa | arr | O | 1..N | List of | | | tternList | ay(FqdnPa | | | FQDN | | | | tternMatc | | | patterns, | | | | hingRule) | | | where | | | | | | | each FQDN | | | | | | | pattern | | | | | | | is | | | | | | | described | | | | | | | by a FQDN | | | | | | | Pattern | | | | | | | Matching | | | | | | | Rule. | | | | | | | | | | | | | | An FQDN | | | | | | | value is | | | | | | | c | | | | | | | onsidered | | | | | | | part of | | | | | | | the | | | | | | | template | | | | | | | if and | | | | | | | only if | | | | | | | the FQDN | | | | | | | in the | | | | | | | Queries | | | | | | | field in | | | | | | | the DNS | | | | | | | Query | | | | | | | message | | | | | | | fully | | | | | | | matches | | | | | | | at least | | | | | | | one FQDN | | | | | | | pattern. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | If | | | | | | | neither | | | | | | | the | | | | | | | sourc | | | | | | | eIpv4Addr | | | | | | | IE nor | | | | | | | the | | | | | | | sourceI | | | | | | | pv6Prefix | | | | | | | IE is | | | | | | | present, | | | | | | | the UE IP | | | | | | | address | | | | | | | in the | | | | | | | DNS | | | | | | | Context | | | | | | | Data | | | | | | | shall be | | | | | | | assumed. | | | | | | | | | | | | | | NOTE 2: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | DNS Query | | | | | | | MDT. It | | | | | | | may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | | | | | | | | | NOTE 3: | | | | | | | The list | | | | | | | of FQDN | | | | | | | patterns | | | | | | | may | | | | | | | encode | | | | | | | some FQDN | | | | | | | patterns | | | | | | | with a | | | | | | | string | | | | | | | matching | | | | | | | rule and | | | | | | | others | | | | | | | with a | | | | | | | regular | | | | | | | e | | | | | | | xpression | | | | | | | (when the | | | | | | | FQDN | | | | | | | patterns | | | | | | | cannot be | | | | | | | described | | | | | | | by a | | | | | | | string | | | | | | | matching | | | | | | | rule). | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.6 Type: DnsRspMdt
Table 6.1.6.2.6-1: Definition of type DnsRspMdt
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | mdtId | string | M | 1 | I | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS | | | | | | | Response | | | | | | | message | | | | | | | detection | | | | | | | template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | label | string | O | 0..1 | DNS | | | | | | | Response | | | | | | | MDT\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | fqdnPa | arr | O | 1..N | List of | | | tternList | ay(FqdnPa | | | FQDN | | | | tternMatc | | | patterns, | | | | hingRule) | | | where | | | | | | | each FQDN | | | | | | | pattern | | | | | | | is | | | | | | | described | | | | | | | by a FQDN | | | | | | | Pattern | | | | | | | Matching | | | | | | | Rule. | | | | | | | | | | | | | | An FQDN | | | | | | | value is | | | | | | | c | | | | | | | onsidered | | | | | | | part of | | | | | | | the | | | | | | | template | | | | | | | if and | | | | | | | only if | | | | | | | the FQDN | | | | | | | in the | | | | | | | Queries | | | | | | | field in | | | | | | | the DNS | | | | | | | Response | | | | | | | message | | | | | | | fully | | | | | | | matches | | | | | | | at least | | | | | | | one FQDN | | | | | | | pattern. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | easIpv4A | array | O | 1..N | List of | | | ddrRanges | (Ipv4Addr | | | EAS IPv4 | | | | essRange) | | | addresses | | | | | | | ranges | | +-----------+-----------+---+-----------+-----------+-----------+ | e | arra | O | 1..N | List of | | | asIpv6Pre | y(Ipv6Pre | | | EAS IPv6 | | | fixRanges | fixRange) | | | prefixes | | | | | | | ranges | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | DNS | | | | | | | Response | | | | | | | MDT. It | | | | | | | may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The list | | | | | | | of FQDN | | | | | | | patterns | | | | | | | may | | | | | | | encode | | | | | | | some FQDN | | | | | | | patterns | | | | | | | with a | | | | | | | string | | | | | | | matching | | | | | | | rule and | | | | | | | others | | | | | | | with a | | | | | | | regular | | | | | | | e | | | | | | | xpression | | | | | | | (when the | | | | | | | FQDN | | | | | | | patterns | | | | | | | cannot be | | | | | | | described | | | | | | | by a | | | | | | | string | | | | | | | matching | | | | | | | rule). | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.7 Type: Ipv4AddressRange
Table 6.1.6.2.7-1: Definition of type IPv4AddressRange
Attribute name Data type P Cardinality Description
* * *
start Ipv4Addr M 1 First value identifying the start of an IPv4 address range
end Ipv4Addr M 1 Last value identifying the end of an IPv4 address range
##### 6.1.6.2.8 Type: Ipv6PrefixRange
Table 6.1.6.2.8-1: Definition of type IPv6PrefixRange
Attribute name Data type P Cardinality Description
* * *
start Ipv6Prefix M 1 First value identifying the start of an IPv6 prefix range
end Ipv6Prefix M 1 Last value identifying the end of an IPv6 prefix range
##### 6.1.6.2.9 Type: Action
Table 6.1.6.2.9-1: Definition of type Action
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | ap | Ap | M | 1 | Action to | | | plyAction | plyAction | | | apply to | | | | | | | the DNS | | | | | | | message | | +-----------+-----------+---+-----------+-----------+-----------+ | fwdParas | Fo | O | 0..1 | This IE | | | | rwardingP | | | may be | | | | arameters | | | present | | | | | | | if the | | | | | | | ap | | | | | | | plyAction | | | | | | | IE is set | | | | | | | to \" | | | | | | | F | | | | | | | ORWARD\". | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | contain | | | | | | | forward | | | | | | | ins | | | | | | | tructions | | | | | | | to apply | | | | | | | to the | | | | | | | DNS | | | | | | | message | | | | | | | before | | | | | | | f | | | | | | | orwarding | | | | | | | it. | | +-----------+-----------+---+-----------+-----------+-----------+ | reporti | boolean | O | 0..1 | Repor | | | ngOnceInd | | | | ting-once | | | | | | | I | | | | | | | ndication | | | | | | | | | | | | | | This IE | | | | | | | may be | | | | | | | present | | | | | | | if the | | | | | | | ap | | | | | | | plyAction | | | | | | | is set to | | | | | | | \" | | | | | | | REPORT\". | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | be set as | | | | | | | follows: | | | | | | | | | | | | | | - true: | | | | | | | only one | | | | | | | report | | | | | | | shall be | | | | | | | sent to | | | | | | | the SMF, | | | | | | | i.e. one | | | | | | | report | | | | | | | shall | | | | | | | only be | | | | | | | sent when | | | | | | | a first | | | | | | | DNS | | | | | | | message | | | | | | | matches | | | | | | | any | | | | | | | Message | | | | | | | Detection | | | | | | | Template | | | | | | | of the | | | | | | | DNS rule. | | | | | | | | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | a report | | | | | | | shall be | | | | | | | sent to | | | | | | | the SMF | | | | | | | for any | | | | | | | DNS | | | | | | | message | | | | | | | matching | | | | | | | any | | | | | | | Message | | | | | | | Detection | | | | | | | Template | | | | | | | of the | | | | | | | DNS rule. | | +-----------+-----------+---+-----------+-----------+-----------+ | res | boolean | O | 0..1 | Reset the | | | etReporti | | | | Repor | | | ngOnceInd | | | | ting-once | | | | | | | I | | | | | | | ndication | | | | | | | | | | | | | | This IE | | | | | | | may be | | | | | | | present | | | | | | | in a | | | | | | | request | | | | | | | modifying | | | | | | | a DNS | | | | | | | rule, if | | | | | | | the | | | | | | | ap | | | | | | | plyAction | | | | | | | is set to | | | | | | | \ | | | | | | | "REPORT\" | | | | | | | and the | | | | | | | reporti | | | | | | | ngOnceInd | | | | | | | is set to | | | | | | | \"true\". | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | be set as | | | | | | | follows: | | | | | | | | | | | | | | - true: | | | | | | | reset the | | | | | | | Repor | | | | | | | ting-once | | | | | | | In | | | | | | | dication, | | | | | | | i.e. send | | | | | | | (only) | | | | | | | one more | | | | | | | report to | | | | | | | the SMF | | | | | | | when a | | | | | | | next | | | | | | | first DNS | | | | | | | message | | | | | | | matches | | | | | | | any | | | | | | | Message | | | | | | | Detection | | | | | | | Template | | | | | | | of the | | | | | | | DNS rule. | | | | | | | | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | do not | | | | | | | reset the | | | | | | | Repor | | | | | | | ting-once | | | | | | | I | | | | | | | ndication | | +-----------+-----------+---+-----------+-----------+-----------+ | respParas | RespondP | C | 0..1 | This IE | CEASD | | | arameters | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | ap | | | | | | | plyAction | | | | | | | IE is set | | | | | | | to \" | | | | | | | R | | | | | | | ESPOND\". | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | contain | | | | | | | ins | | | | | | | tructions | | | | | | | to apply | | | | | | | to build | | | | | | | the DNS | | | | | | | response | | | | | | | message. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.10 Type: DnsContextNotification
Table 6.1.6.2.10-1: Definition of type DnsContextNotification
Attribute name Data type P Cardinality Description
* * *
eventreportList array(DnsContextEventReport) O 1..N List of event reports
##### 6.1.6.2.11 Type: ForwardingParameters
Table 6.1.6.2.11-1: Definition of type ForwardingParameters
Attribute name Data type P Cardinality Description
* * *
ecsOptionInfo EcsOptionInfo O 0..1 Information to build optional EDNS Client
Subnet (ECS) option to be included in the DNS Query as defined in IETF RFC
7871 [18], or to be used for replacing the ECS option received in the DNS
Query message from the UE. dnsServerAddressInfo DnsServerAddressInfo O 0..1
DNS Server Address Information to be used as destination address of the
outgoing DNS Query
##### 6.1.6.2.12 Type: EcsOption
Table 6.1.6.2.12-1: Definition of type EcsOption
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | sou | integer | M | 1 | Leftmost number | | rcePrefixLength | | | | of significant | | | | | | bits of the IP | | | | | | address as | | | | | | defined for the | | | | | | SOURCE | | | | | | PREFIX-LENGTH | | | | | | in clause 6 of | | | | | | IETF R | | | | | | FC 7871 [18]. | | | | | | | | | | | | Minimum=0. | | | | | | Maximum=128 | +-----------------+-----------+---+-------------+-----------------+ | sc | integer | O | 0..1 | Leftmost number | | opePrefixLength | | | | of bits of the | | | | | | IP address that | | | | | | the DNS | | | | | | response covers | | | | | | as defined for | | | | | | the SCOPE | | | | | | PREFIX-LENGTH | | | | | | in clause 6 of | | | | | | IETF R | | | | | | FC 7871 [18]. | | | | | | This attribute | | | | | | shall only be | | | | | | sent in EASDF | | | | | | notification to | | | | | | the SMF. | | | | | | | | | | | | Minimum=0. | | | | | | Maximum=128 | +-----------------+-----------+---+-------------+-----------------+ | ipAddr | IpAddr | M | 1 | IP address as | | | | | | defined for the | | | | | | ADDRESS in | | | | | | clause 6 of | | | | | | IETF | | | | | | RFC 7871 [18] | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.6.2.13 Type: DnsContextEventReport
Table 6.1.6.2.13-1: Definition of type DnsContextEventReport
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | timestamp | DateTime | M | 1 | Time of | | | | | | detection of | | | | | | the event | +---------------+---------------+---+-------------+---------------+ | dnsRuleId | Uint32 | C | 0..1 | Identifies | | | | | | the DNS rule | | | | | | that | | | | | | triggered the | | | | | | report. This | | | | | | IE shall be | | | | | | present if | | | | | | the report is | | | | | | triggered by | | | | | | an event | | | | | | matching a | | | | | | DNS rule. | +---------------+---------------+---+-------------+---------------+ | d | D | O | 0..1 | DNS Query | | nsQueryReport | nsQueryReport | | | Report | +---------------+---------------+---+-------------+---------------+ | dnsRspReport | DnsRspReport | O | 0..1 | DNS Response | | | | | | Report | +---------------+---------------+---+-------------+---------------+ | dnsMsgId | string | O | 0..1 | DNS message | | | | | | identifier | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | be set to a | | | | | | unique | | | | | | identifier of | | | | | | the DNS | | | | | | message for | | | | | | which the | | | | | | event is | | | | | | reported (see | | | | | | clau | | | | | | se 5.2.3.2.4) | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.14 Type: DnsQueryReport
Table 6.1.6.2.14-1: Definition of type DnsQueryReport
Attribute name Data type P Cardinality Description
* * *
fqdn Fqdn O 0..1 FQDN received in the DNS Query
##### 6.1.6.2.15 Type: DnsRspReport
Table 6.1.6.2.15-1: Definition of type DnsRspReport
Attribute name Data type P Cardinality Description
* * *
fqdn Fqdn O 0..1 FQDN received in the DNS Response easIpv4Addresses
array(Ipv4Addr) O 1..N EAS IPv4 address(es) received in the DNS Response
easIpv6Addresses array(Ipv6Addr) O 1..N EAS IPv6 address(es) received in the
DNS Response ecsOption EcsOption O 0..1 EDNS Client Subnet (ECS) option
received in the DNS Response (as defined in IETF RFC 7871 [18])
##### 6.1.6.2.16 Type: EcsOptionInfo
Table 6.1.6.2.16-1: Definition of type EcsOptionInfo
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | ecsOption | EcsOption | C | 0..1 | Information | | | | | | to build | | | | | | optional EDNS | | | | | | Client Subnet | | | | | | (ECS) option | | | | | | to be | | | | | | included in | | | | | | the DNS Query | | | | | | as defined in | | | | | | IETF | | | | | | RFC | | | | | | 7871 [18], | | | | | | or to be used | | | | | | for replacing | | | | | | the ECS | | | | | | option | | | | | | received in | | | | | | the DNS Query | | | | | | message from | | | | | | the UE. (NOTE | | | | | | 1) | +---------------+---------------+---+-------------+---------------+ | baseDnsAitId | Bas | C | 0..1 | Identifier of | | | elineDnsAitId | | | the Baseline | | | | | | DNS Action | | | | | | Information | | | | | | Template that | | | | | | contains | | | | | | information | | | | | | to build | | | | | | optional EDNS | | | | | | Client Subnet | | | | | | (ECS) option | | | | | | to be | | | | | | included in | | | | | | the DNS Query | | | | | | as defined in | | | | | | IETF | | | | | | RFC | | | | | | 7871 [18], | | | | | | or to be used | | | | | | for replacing | | | | | | the ECS | | | | | | option | | | | | | received in | | | | | | the DNS Query | | | | | | message from | | | | | | the UE. | | | | | | | | | | | | (NOTE 1, | | | | | | NOTE 2) | +---------------+---------------+---+-------------+---------------+ | NOTE 1: | | | | | | Either the | | | | | | ecsOption IE | | | | | | or the | | | | | | baseDnsAitId | | | | | | IE shall be | | | | | | present. | | | | | | | | | | | | NOTE 2: The | | | | | | referenced | | | | | | baseline DNS | | | | | | Action | | | | | | Information | | | | | | Template may | | | | | | contain other | | | | | | information | | | | | | beyond the | | | | | | information | | | | | | to build the | | | | | | ECS option, | | | | | | in which case | | | | | | the EADSF | | | | | | shall only | | | | | | apply the | | | | | | information | | | | | | to build the | | | | | | ECS option. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.17 Type: DnsServerAddressInfo
Table 6.1.6.2.17-1: Definition of type DnsServerAddressInfo
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | dnsServ | array(IpAddr) | C | 1..N | DNS Server | | erAddressList | | | | Address to be | | | | | | used as | | | | | | destination | | | | | | address of | | | | | | the outgoing | | | | | | DNS Query. | | | | | | More than one | | | | | | IP address | | | | | | may be | | | | | | provided for | | | | | | resiliency. | | | | | | (NOTE 1) | +---------------+---------------+---+-------------+---------------+ | baseDnsAitId | Bas | C | 0..1 | Identifier of | | | elineDnsAitId | | | the Baseline | | | | | | DNS Action | | | | | | Information | | | | | | Template that | | | | | | contains DNS | | | | | | Server | | | | | | Address to be | | | | | | used as | | | | | | destination | | | | | | address of | | | | | | the outgoing | | | | | | DNS Query. | | | | | | (NOTE 1, | | | | | | NOTE 2) | +---------------+---------------+---+-------------+---------------+ | NOTE 1: | | | | | | Either the | | | | | | dnsServ | | | | | | erAddressList | | | | | | IE or the | | | | | | baseDnsAitId | | | | | | IE shall be | | | | | | present. | | | | | | | | | | | | NOTE 2: The | | | | | | referenced | | | | | | baseline DNS | | | | | | Action | | | | | | Information | | | | | | Template may | | | | | | contain other | | | | | | information | | | | | | beyond the | | | | | | DNS Server | | | | | | Address | | | | | | information, | | | | | | in which case | | | | | | the EADSF | | | | | | shall only | | | | | | apply the DNS | | | | | | Server | | | | | | Address | | | | | | information. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.18 Type: BaselineDnsMdtId
Table 6.1.6.2.18-1: Definition of type BaselineDnsMdtId
Attribute name Data type P Cardinality Description Applicability
* * *
baseDnsPatternUri Uri M 1 URI of the baseline DNS pattern returned in the
Location header in the baseline DNS pattern creation response  
mdtId string M 1 Identifier of the baseline DNS Message Detection Template ID
within the baseline DNS pattern
##### 6.1.6.2.19 Type: BaselineDnsAitId
Table 6.1.6.2.19-1: Definition of type BaselineDnsAitId
Attribute name Data type P Cardinality Description Applicability
* * *
baseDnsPatternUri Uri M 1 URI of the baseline DNS pattern returned in the
Location header in the baseline DNS pattern creation response  
aitId string M 1 Identifier of the baseline DNS Action Information Template ID
within the baseline DNS pattern
##### 6.1.6.2.20 Type: BaselineDnsQueryMdtInfo
Table 6.1.6.2.20-1: Definition of type BaselineDnsQueryMdtInfo
Attribute name Data type P Cardinality Description Applicability
* * *
sourceIpv4Addr Ipv4Addr O 0..1 UE IPv4 address (NOTE)  
sourceIpv6Prefix Ipv6Prefix O 0..1 UE IPv6 prefix (NOTE)  
baseDnsMdtList array(BaselineDnsMdtId) M 1..N List of Baseline DNS Query
Message Detection Template IDs.  
NOTE: If neither the sourceIpv4Addr IE nor the sourceIpv6Prefix IE is present,
the UE IP address in the DNS Context Data shall be assumed.
##### 6.1.6.2.21 Type: BaselineDnsRspMdtInfo
Table 6.1.6.2.21-1: Definition of type BaselineDnsRspMdtInfo
Attribute name Data type P Cardinality Description Applicability
* * *
baseDnsMdtList array(BaselineDnsMdtId) M 1..N List of Baseline DNS Response
Message Detection Template IDs.
##### 6.1.6.2.22 Type: RespondParameters
Table 6.1.6.2.22-1: Definition of type RespondParameters
Attribute name Data type P Cardinality Description
* * *
easIpv4Addresses array(Ipv4Addr) O 1..N EAS IPv4 address(es) to be included in
the DNS Response easIpv6Addresses array(Ipv6Addr) O 1..N EAS IPv6 address(es)
to be included in the DNS Response
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability \
* * *
##### 6.1.6.3.3 Enumeration: ApplyAction
The enumeration ApplyAction represents an action to apply to the DNS packet.
It shall comply with the provisions defined in table 6.1.6.3.3-1.
Table 6.1.6.3.3-1: Enumeration ApplyAction
Enumeration value Description Applicability
* * *
\"BUFFER\" Buffer the DNS Query or Response message  
\"REPORT\" Report the DNS Query or Response message content to the SMF  
\"FORWARD\" Forward the DNS Query or Response message, after applying the
instructions indicated in the forwarding parameters if any  
\"DISCARD\" Discard DNS messages  
\"RESPOND\" Respond to a DNS Query message, i.e. build and send a DNS Response
message to the UE, after applying the instructions indicated in the respond
parameters. CEASD
#### 6.1.6.4 Data types describing alternative data types or combinations of
data types
There is no alternative data types or combinations of data types used for the
Neasdf_DNSContext service in this version of the API.
#### 6.1.6.5 Binary data
There is no binary data used for the Neasdf_DNSContext service in this version
of the API.
### 6.1.7 Error Handling
#### 6.1.7.1 General
For the Neasdf_DNSContext API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Neasdf_DNSContext API.
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4]. No further specific procedures for the Neasdf_DNSContext
service are specified.
#### 6.1.7.3 Application Errors
The application errors defined for the Neasdf_DNSContext service are listed in
Table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
BASELINE_DNS_PATTERN_UNKNOWN 400 Bad Request The request to create or modify a
DNS context is rejected due to a baseline DNS pattern being unknown to the
EASDF (i.e the URI of the baseline DNS pattern is unknown).
BASELINE_DNS_MDT_UNKNOWN 400 Bad Request The request to create or modify a DNS
context is rejected due to a baseline DNS Message Detection Template being
unknown to the EASDF (the baseline DNS pattern is known).
BASELINE_DNS_AIT_UNKNOWN 400 Bad Request The request to create or modify a DNS
context is rejected due to a baseline DNS Action Information Template being
unknown to the EASDF (the baseline DNS pattern is known).
DNS_CONTEXT_NOT_FOUND 404 Not Found The request to modify or delete a DNS
context, or the notification about an event of a DNS context, is rejected
because the DNS context is not found.
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the Neasdf_DNSContext
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Supported Features
+----------------------+--------------+-----+----------------------+ | Feature number | Feature Name | M/O | Description | +======================+==============+=====+======================+ | 1 | CEASD | O | Support of Common | | | | | EAS Discovery for a | | | | | set of UEs | | | | | | | | | | defined as part of | | | | | EDGE Phase 2 in 3GPP | | | | | Release 18. | | | | | | | | | | An NF Service | | | | | Consumer and EASDF | | | | | which support this | | | | | feature shall | | | | | support DNS rules | | | | | with an applyAction | | | | | requesting the EASDF | | | | | to respond to a DNS | | | | | query with EAS IP | | | | | addresses provided | | | | | by the NF Service | | | | | Consumer, i.e. with | | | | | the ApplyAction | | | | | value \"RESPOND\". | | | | | See | | | | | clauses 5.2.3.4.1 | | | | | and 6.1.6.3.3. | +----------------------+--------------+-----+----------------------+ | 2 | HR-SBO | O | Support of EAS | | | | | Discovery Procedure | | | | | with V-EASDF for | | | | | HR-SBO | | | | | | | | | | An EASDF which | | | | | supports this | | | | | feature shall | | | | | support behaving as | | | | | a V-EASDF including | | | | | support of: | | | | | | | | | | - DNS context | | | | | creation with an | | | | | unspecified UE IP | | | | | address and DNS | | | | | context update with | | | | | the UE IP address | | | | | assigned by the | | | | | H-PLMN; and | | | | | | | | | | - DNS context | | | | | creation and | | | | | handling with the | | | | | H-PLMN ID of the | | | | | H-PLMN of the HR PDU | | | | | session. | +----------------------+--------------+-----+----------------------+ | Feature number: The | | | | | order number of the | | | | | feature within the | | | | | s**upportedFeatures | | | | | attribute (starting | | | | | with 1).** | | | | | | | | | | **Feature: A short | | | | | name that can be | | | | | used to refer to the | | | | | bit and to the | | | | | feature.** | | | | | | | | | | **M/O: Defines if | | | | | the implementation | | | | | of the feature is | | | | | mandatory | | | | | (** \"**M** \"**) or | | | | | optional | | | | | (** \"**O** \"**).** | | | | | | | | | | Description: A clear | | | | | textual description | | | | | of the feature. | | | | +----------------------+--------------+-----+----------------------+
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Neasdf_DNSContext API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Neasdf_DNSContext API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Neasdf_DNSContext service.
The Neasdf_DNSContext API defines a single scope \"neasdf-dnscontext\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different EASDF service instance within
the same EASDF, or to a different EASDF of an EASDF set, when using direct or
indirect communications (see 3GPP TS 29.500 [4]).
An SCP that reselects a different EASDF producer instance will return the NF
Instance ID of the new EASDF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an EASDF redirects a service request to a different EASDF using an 307
Temporary Redirect or 308 Permanent Redirect status code, the identity of the
new EASDF towards which the service request is redirected shall be indicated
in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308
Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500
[4].
## 6.2 Neasdf_BaselineDNSPattern Service API
### 6.2.1 Introduction
The Neasdf_BaselineDNSPattern service shall use the Neasdf_BaselineDNSPattern
API.
The API URI of the Neasdf_BaselineDNSPattern API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"neasdf-baselinednspattern\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.2.3.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Neasdf_BaselineDNSPattern API is contained in Annex A.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.2.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [12], shall be used as content type of
the HTTP bodies specified in the present specification as specified in clause
5.4 of 3GPP TS 29.500 [4]. The use of the JSON format shall be signalled by
the content type \"application/json\".
\- \"Problem Details\" JSON Object shall be used to indicate additional
details of the error in a HTTP response body and shall be signalled by the
content type \"application/problem+json\", as defined in IETF RFC 7807 [13].
\- JSON Patch (IETF RFC 6902 [15]). The use of the JSON Patch format in a HTTP
request body shall be signalled by the content type \"application/json-
patch+json\".
#### 6.2.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1 describes the resource URI structure of the
Neasdf_BaselineDNSPattern API.
Figure 6.2.3.1-1: Resource URI structure of the Neasdf_BaselineDNSPattern API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
+-----------------+-----------------+-------------+-----------------+ | Resource name | Resource URI | HTTP method | Description | | | | | | | | | | (service | | | | | operation) | +=================+=================+=============+=================+ | Individual | /base-dns-pat | PUT | Create a new | | Baseline DNS | terns/{smfId}/{ | | Baseline DNS | | Pattern | smfImplementati | | pattern, or | | | onSegmentPaths} | | replace the | | | | | existing | | | | | Baseline DNS | | | | | pattern, by | | | | | providing an | | | | | Baseline DNS | | | | | pattern | +-----------------+-----------------+-------------+-----------------+ | | | PATCH | Update (partial | | | | | update) | +-----------------+-----------------+-------------+-----------------+ | | | DELETE | Delete | +-----------------+-----------------+-------------+-----------------+
#### 6.2.3.2 Resource: Individual Baseline DNS Pattern
##### 6.2.3.2.1 Description
This resource represents an individual Baseline DNS Pattern created in the
EASDF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.2.3.2.2 Resource Definition
Resource URI: **{apiRoot}/neasdf-baselinednspattern/\ /base-dns-
patterns/{smfId}/{smfImplementationSegmentPaths}**
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
+------------+-----------+-------------------------------------------+ | Name | Data type | Definition | +============+===========+===========================================+ | apiRoot | string | See clause 6.2.1. | +------------+-----------+-------------------------------------------+ | apiVersion | string | See clause 6.2.1. | +------------+-----------+-------------------------------------------+ | smfId | VarNfId | Represents the SMF Set Identifier (see NF | | | | Set Identifier in clause 28.12 of | | | | 3GPP TS 23.003 [19]) or the Set ID part | | | | within the SMF Set Identifier (see \ within the NF Set Identifier in | | | | clause 28.12 of 3GPP TS 23.003 [19]) or | | | | NF Instance Id of the SMF. | | | | | | | | The SMF Set Identifier or the Set ID part | | | | within the SMF Set ID shall be included | | | | if the EASDF is controlled by the SMF | | | | set, or the NF Instance Id of the SMF | | | | shall be included if the EASDF is | | | | controlled by a SMF. | +------------+-----------+-------------------------------------------+
EXAMPLE 1: .../base-dns-
patterns/smfInstanceId=4947a69a-f61b-4bc1-b9da-47c9c5d14b64/{smfImplementationSegmentPaths}
EXAMPLE 2: .../base-dns-
patterns/smfSetId=set1.smfset.5gc.mnc012.mcc345/{smfImplementationSegmentPaths}
EXAMPLE 3: .../base-dns-patterns/setId=set1/{smfImplementationSegmentPaths}
##### 6.2.3.2.3 Resource Standard Methods
##### 6.2.3.2.3.1 PATCH {#patch-1 .H6}
This method updates (partial update) an individual Baseline DNS Pattern
resource in the EASDF.
This method shall support the URI query parameters specified in table
6.2.3.2.3.1-1.
Table 6.2.3.3.3.1-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.2.3.2.3.1-2 and the response data structures and response codes specified in
table 6.2.3.2.3.1-3.
Table 6.2.3.2.3.1-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1..N It contains the
list of changes to be made to the Baseline DNS pattern, according to the JSON
PATCH format specified in IETF RFC 6902 [15].
* * *
Table 6.2.3.2.3.1-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon partial | | | | | | success, e.g. | | | | | | some of the | | | | | | requested | | | | | | modifications | | | | | | for unknown | | | | | | attribute(s) | | | | | | are discarded | | | | | | while the | | | | | | rest of the | | | | | | modification | | | | | | instructions | | | | | | are fully | | | | | | accepted, the | | | | | | EASDF shall | | | | | | return the | | | | | | execution | | | | | | report. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | update of the | | | | | | Baseline DNS | | | | | | Pattern. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates | | roblemDetails | | | | that the | | | | | | modification | | | | | | of the | | | | | | baseline DNS | | | | | | pattern | | | | | | failed due to | | | | | | an | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | BASELINE\ | | | | | | _DNS_PATTERN | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.2.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.2.3.2.3.2 PUT {#put-1 .H6}
This method creates or updates (complete replacement) an individual Baseline
DNS Pattern resource in the EASDF.
This method shall support the URI query parameters specified in table
6.2.3.2.3.2-1.
Table 6.2.3.2.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.2.3.2.3.2-2 and the response data structures and response codes specified in
table 6.2.3.2.3.2-3.
Table 6.2.3.2.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description BaseDnsPatternCreateData M 1 Baseline DNS
Pattern Data to be created or to replace the existing Baseline DNS Pattern
data
* * *
Table 6.2.3.2.3.2-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | DnsBasePatte | M | 1 | 201 Created | Successful | | rnCreatedData | | | | creation of a | | | | | | Baseline DNS | | | | | | Pattern | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | update of the | | | | | | Baseline DNS | | | | | | Pattern. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.2-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.2.3.2.3.2-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.2.3.2.3.3 DELETE {#delete-3 .H6}
This method deletes an individual Baseline DNS Pattern resource in the EASDF.
This method shall support the URI query parameters specified in table
6.2.3.2.3.3-1.
Table 6.2.3.2.3.3-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.2.3.3.3.3-2 and the response data structures and response codes specified in
table 6.2.3.2.3.3-3.
Table 6.2.3.2.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.2.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | deletion of | | | | | | the Baseline | | | | | | DNS Pattern. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection.. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection.. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates | | roblemDetails | | | | that the | | | | | | deletion of | | | | | | the baseline | | | | | | DNS pattern | | | | | | failed due to | | | | | | an | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | BASELINE\ | | | | | | _DNS_PATTERN | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.3-4: Headers supported by the 307 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
Table 6.2.3.2.3.3-5: Headers supported by the 308 Response Code on this
resource
Name Data type P Cardinality Description
* * *
Location string M 1 An alternative URI of the resource located on an
alternative service instance within the same EASDF or EASDF (service) set. For
the case, when a request is redirected to the same target resource via a
different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-
Id string O 0..1 Identifier of the target EASDF (service) instance ID towards
which the request is redirected
##### 6.2.3.3.4 Resource Custom Operations
##### 6.2.3.3.4.1 Overview {#overview-3 .H6}
Table 6.2.3.3.4.1-1: Custom operations
+----------------+----------------------+--------------------+---------------------+ | Operation Name | Custom operation URI | Mapped HTTP method | Description | | | | | | | | | | (Service operation) | +================+======================+====================+=====================+ | | | | | +----------------+----------------------+--------------------+---------------------+
### 6.2.4 Custom Operations without associated resources
There are no custom operations defined without any associated resources for
the Neasdf_BaselineDNSPattern service in this release of this specification.
### 6.2.5 Notifications
There are no notifications defined for the Neasdf_BaselineDNSPattern service
in this release of the specification.
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the data types defined for the
Neasdf_BaselineDNSPattern service based interface protocol.
Table 6.2.6.1-1: Neasdf_BaselineDNSPattern specific Data Types
Data type Clause defined Description Applicability
* * *
BaseDnsPatternCreateData 6.2.6.2.2 Data in Baseline DNS Pattern Create request  
BaseDnsPatternCreatedData 6.2.6.2.3 Data in Baseline DNS Pattern Create
response  
BaselineDnsMdt 6.2.6.2.4 Baseline DNS message detection template  
BaselineDnsAit 6.2.6.2.5 Baseline DNS action information Template  
VarNfId 6.2.6.2.6 SMF or SMF Set Id or Set Id part in SMF set identifier
Table 6.2.6.1-2 specifies data types re-used by the Neasdf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Neasdf_BaselineDNSPattern service based interface.
Table 6.2.6.1-2: Neasdf_BaselineDNSPattern re-used Data Types
Data type Reference Comments Applicability
* * *
DnsQueryMdt 6.1.6.2.5 DNS Query Message Detection Template  
DnsRspMdt 6.1.6.2.6 DNS Response Message Detection Template  
EcsOption 6.1.6.2.12 ECS Option information  
IpAddr 3GPP TS 29.571 [16] IP address  
NfSetId 3GPP TS 29.571 [16] NF Set Id  
NfInstanceId 3GPP TS 29.571 [16] NF Instance Id  
PatchResult 3GPP TS 29.571 [16]
#### 6.2.6.2 Structured data types
##### 6.2.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.2.6.2.2 Type: BaseDnsPatternCreateData
Table 6.2.6.2.2-1: Definition of type BaseDnsPatternCreateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | label | string | O | 0..1 | Baseline | | | | | | | DNS | | | | | | | p | | | | | | | attern\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | baseD | m | O | 1..N | When | | | nsMdtList | ap(Baseli | | | present, | | | | neDnsMdt) | | | this IE | | | | | | | contains | | | | | | | the map | | | | | | | of DNS | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | carrying | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | baseline | | | | | | | DNS | | | | | | | Message | | | | | | | Detection | | | | | | | Template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | baseD | m | O | 1..N | When | | | nsAitList | ap(Baseli | | | present, | | | | neDnsAit) | | | this IE | | | | | | | contains | | | | | | | the map | | | | | | | of | | | | | | | Baseline | | | | | | | DNS | | | | | | | action | | | | | | | in | | | | | | | formation | | | | | | | T | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | carrying | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | baseline | | | | | | | DNS | | | | | | | Message | | | | | | | Detection | | | | | | | Template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | This IE | | | dFeatures | dFeatures | | | shall be | | | | | | | present | | | | | | | if at | | | | | | | least one | | | | | | | optional | | | | | | | feature | | | | | | | defined | | | | | | | in | | | | | | | cla | | | | | | | use 6.2.8 | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | baseline | | | | | | | DNS | | | | | | | pattern. | | | | | | | It may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.2.6.2.3 Type: BaseDnsPatternCreatedData
Table 6.2.6.2.3-1: Definition of type BaseDnsPatternCreatedData
Attribute name Data type P Cardinality Description Applicability
* * *
supportedFeatures SupportedFeatures C 0..1 This IE shall be present if at
least one optional feature defined in clause 6.2.8 is supported.
##### 6.2.6.2.4 Type: BaselineDnsMdt
Table 6.2.6.2.4-1: Definition of type BaselineDnsMdt
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | mdtId | string | M | 1 | I | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS | | | | | | | message | | | | | | | detection | | | | | | | template | | | | | | | within | | | | | | | the | | | | | | | baseline | | | | | | | DNS | | | | | | | pattern, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | +-----------+-----------+---+-----------+-----------+-----------+ | label | string | O | 0..1 | Baseline | | | | | | | DNS | | | | | | | MDT\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsQue | map(Dns | C | 1..N | Map of | | | ryMdtList | QueryMdt) | | | DNS Query | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | carrying | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS Query | | | | | | | message | | | | | | | detection | | | | | | | template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | | | | | | | | | | | | | If | | | | | | | present, | | | | | | | only | | | | | | | fqdnList | | | | | | | attribute | | | | | | | shall be | | | | | | | included | | | | | | | in the | | | | | | | DNS Query | | | | | | | message | | | | | | | detection | | | | | | | template. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnsR | map(D | C | 1..N | Map of | | | spMdtList | nsRspMdt) | | | DNS | | | | | | | Response | | | | | | | message | | | | | | | detection | | | | | | | t | | | | | | | emplates. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map shall | | | | | | | be a | | | | | | | (unique) | | | | | | | valid | | | | | | | JSON | | | | | | | string | | | | | | | per | | | | | | | clause 7 | | | | | | | of | | | | | | | IET | | | | | | | F RFC 825 | | | | | | | 9 [12], | | | | | | | carrying | | | | | | | the | | | | | | | i | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS | | | | | | | Response | | | | | | | message | | | | | | | detection | | | | | | | template, | | | | | | | with a | | | | | | | maximum | | | | | | | of 32 | | | | | | | ch | | | | | | | aracters. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | the | | | | | | | dnsQue | | | | | | | ryMdtList | | | | | | | IE or the | | | | | | | dnsR | | | | | | | spMdtList | | | | | | | IE shall | | | | | | | be | | | | | | | present. | | | | | | | | | | | | | | NOTE 2: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | baseline | | | | | | | DNS MDT. | | | | | | | It may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.2.6.2.5 Type: BaselineDnsAit
Table 6.2.6.2.5-1: Definition of type BaselineDnsAit
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | aitId | string | M | 1 | I | | | | | | | dentifier | | | | | | | of the | | | | | | | DNS | | | | | | | message | | | | | | | handling | | | | | | | action | | | | | | | within | | | | | | | the | | | | | | | baseline | | | | | | | DNS | | | | | | | pattern | | +-----------+-----------+---+-----------+-----------+-----------+ | label | string | O | 0..1 | Baseline | | | | | | | DNS | | | | | | | AIT\'s | | | | | | | label | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | ecsOption | EcsOption | C | 0..1 | In | | | | | | | formation | | | | | | | to build | | | | | | | optional | | | | | | | EDNS | | | | | | | Client | | | | | | | Subnet | | | | | | | (ECS) | | | | | | | option to | | | | | | | be | | | | | | | included | | | | | | | in the | | | | | | | DNS Query | | | | | | | as | | | | | | | defined | | | | | | | in IETF | | | | | | | RFC 787 | | | | | | | 1 [18], | | | | | | | or to be | | | | | | | used for | | | | | | | replacing | | | | | | | the ECS | | | | | | | option | | | | | | | received | | | | | | | in the | | | | | | | DNS Query | | | | | | | message | | | | | | | from the | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | arra | C | 1..N | DNS | | | sServerAd | y(IpAddr) | | | Server | | | dressList | | | | Address | | | | | | | to be | | | | | | | used as | | | | | | | de | | | | | | | stination | | | | | | | address | | | | | | | of the | | | | | | | outgoing | | | | | | | DNS Query | | | | | | | More than | | | | | | | one IP | | | | | | | address | | | | | | | may be | | | | | | | provided | | | | | | | for | | | | | | | re | | | | | | | siliency. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | This | | | | | | | attribute | | | | | | | may | | | | | | | contain | | | | | | | free | | | | | | | in | | | | | | | formation | | | | | | | d | | | | | | | escribing | | | | | | | the scope | | | | | | | of the | | | | | | | baseline | | | | | | | DNS AIT. | | | | | | | It may be | | | | | | | used e.g. | | | | | | | for | | | | | | | trouble- | | | | | | | shooting. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.2.6.2.6 Type: VarNfId
Table 6.2.6.2.6-1: Definition of type VarNfId
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | smfSetId | NfSetId | C | 0..1 | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | includes | | | | | | | the SMF | | | | | | | Set Id | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | setId | string | C | 0..1 | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | includes | | | | | | | Set Id | | | | | | | part in | | | | | | | NF Set | | | | | | | I | | | | | | | dentifier | | | | | | | (see | | | | | | | clause | | | | | | | 28.12 of | | | | | | | 3GPP | | | | | | | TS 23.00 | | | | | | | 3 [7]), | | | | | | | formatted | | | | | | | as the | | | | | | | following | | | | | | | string: | | | | | | | | | | | | | | > \ | | | | | | | "set\ ID>\" | | | | | | | | | | | | | | with | | | | | | | | | | | | | | > \ ID> | | | | | | | > encoded | | | | | | | > as a | | | | | | | > string | | | | | | | > of | | | | | | | > c | | | | | | | haracters | | | | | | | > c | | | | | | | onsisting | | | | | | | > of | | | | | | | > a | | | | | | | lphabetic | | | | | | | > c | | | | | | | haracters | | | | | | | > (A-Z | | | | | | | > and | | | | | | | > a-z), | | | | | | | > digits | | | | | | | > (0-9) | | | | | | | > and/or | | | | | | | > the | | | | | | | > hyphen | | | | | | | > (-) and | | | | | | | > that | | | | | | | > shall | | | | | | | > end | | | | | | | > with | | | | | | | > either | | | | | | | > an | | | | | | | > a | | | | | | | lphabetic | | | | | | | > | | | | | | | character | | | | | | | > or a | | | | | | | > digit. | | | | | | | > | | | | | | | > | | | | | | | Pattern: | | | | | | | > \'\^( | | | | | | | [A-Za-z0 | | | | | | | -9\\-]* | | | | | | | [A-Za-z0 | | | | | | | -9])\$\' | | | | | | | | | | | | | | E | | | | | | | xamples:\ | | | | | | | \ | | | | | | | "setxyz\" | | | | | | | | | | | | | | \"set12\" | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | smfI | NfI | C | 0..1 | This IE | | | nstanceId | nstanceId | | | shall be | | | | | | | present | | | | | | | if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | includes | | | | | | | SMF | | | | | | | Instance | | | | | | | Id (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | smfSetId | | | | | | | attribute | | | | | | | or setId | | | | | | | or | | | | | | | smfI | | | | | | | nstanceId | | | | | | | attribute | | | | | | | shall be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
### 6.2.7 Error Handling
#### 6.2.7.1 General
For the Neasdf_BaselineDNSPattern API, HTTP error responses shall be supported
as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and
application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be
supported for an HTTP method if the corresponding HTTP status codes are
specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Neasdf_BaselineDNSPattern API.
#### 6.2.7.2 Protocol Errors
No specific procedures for the Neasdf_BaselineDNSPattern API service are
specified.
#### 6.2.7.3 Application Errors
The application errors defined for the Neasdf_BaselineDNSPattern service are
listed in Table 6.2.7.3-1.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
BASELINE_DNS_PATTERN_NOT_FOUND 404 Not Found The request to modify or delete a
baseline DNS pattern is rejected because the baseline DNS pattern is not found
(i.e. the URI of the baseline DNS pattern is not found).
### 6.2.8 Feature negotiation
The optional features in table 6.2.8-1 are defined for the
Neasdf_BaselineDNSPattern API. They shall be negotiated using the
extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.2.8-1: Supported Features
Feature number Feature Name Description
* * *
### 6.2.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Neasdf_BaselineDNSPattern API may be authorized by means of the OAuth2
protocol (see IETF RFC 6749 [9]), based on local configuration, using the
\"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510
[10]) plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Neasdf_BaselineDNSPattern API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Neasdf_BaselineDNSPattern service.
The Neasdf_BaselineDNSPattern API defines a single scope \"neasdf-
baselinednspattern\" for the entire service, and it does not define any
additional scopes at resource or operation level.
### 6.2.10 HTTP redirection
An HTTP request may be redirected to a different EASDFF service instance
within the same EASDF, or to a different EASDF of an EASDF set, when using
direct or indirect communications (see 3GPP TS 29.500 [4]).
An SCP that reselects a different EASDF producer instance will return the NF
Instance ID of the new EASDF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an EASDF redirects a service request to a different EASDF using an 307
Temporary Redirect or 308 Permanent Redirect status code, the identity of the
new EASDF towards which the service request is redirected shall be indicated
in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308
Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500
[4].
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Neasdf_DNSContext API
openapi: 3.0.0
info:
version: \'1.1.0-alpha.3\'
title: \'Neasdf_DNSContext\'
description: \|
EASDF DNS Context Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.556 V18.2.0; 5G System; Edge Application Server
Discovery Services; Stage3
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.556/
servers:
\- url: \'{apiRoot}/neasdf-dnscontext/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- {}
\- oAuth2ClientCredentials:
\- neasdf-dnscontext
paths:
/dns-contexts:
post:
summary: Create
tags:
\- DNS contexts collection
operationId: CreateDnsContext
requestBody:
description: representation of the DNS context to be created in the EASDF
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/DnsContextCreateData\'
callbacks:
dnsContextNotification:
\'{\$request.body#/notifyUri}\':
post:
requestBody: # contents of the DNS context Notify request
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/DnsContextNotification\'
responses:
\'204\':
description: successful notification
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: successful creation of a DNS context
content:
application/json:
schema:
\$ref: \'#/components/schemas/DnsContextCreatedData\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/neasdf-dnscontext/\/dns-
contexts/{dnsContextId}\'
required: true
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/dns-contexts/{dnsContextId}:
delete:
summary: Delete the DNS Context
tags:
\- Individual DNS context
operationId: DeleteDnsContext
parameters:
\- name: dnsContextId
in: path
description: DNS context Identifier
required: true
schema:
type: string
responses:
\'204\':
description: successful deletion of an SM context
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
patch:
summary: Updates the DNS context
operationId: UpdateDnsContext
tags:
\- Individual DNS context
parameters:
\- name: dnsContextId
in: path
description: DNS context Identifier
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
required: true
responses:
\'200\':
description: Partial update of the DNS context
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Successful update of the DNS context
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
summary: Updates the DNS context (complete replacement)
operationId: ReplaceDnsContext
tags:
\- Individual DNS context
parameters:
\- name: dnsContextId
in: path
description: DNS context Identifier
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/DnsContextCreateData\'
responses:
\'204\':
description: Successful update of the DNS context
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
neasdf-dnscontext: Access to the neasdf-dnscontext API
schemas:
#
# STRUCTURED DATA TYPES
#
DnsContextCreateData:
description: Data within Create request
type: object
properties:
ueIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
hplmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
dnsRules:
description: map of DNS message handling rules where a valid JSON string
serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/DnsRule\'
minProperties: 1
notifyUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- dnn
\- sNssai
\- dnsRules
anyOf:
\- required: [ ueIpv4Addr ]
\- required: [ ueIpv6Prefix ]
DnsContextCreatedData:
description: Data within Create response
type: object
properties:
easdfIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
easdfIpv6Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
anyOf:
\- required: [ easdfIpv4Addr ]
\- required: [ easdfIpv6Addr ]
DnsRule:
description: DNS message handling rule
type: object
properties:
dnsRuleId:
type: string
label:
type: string
precedence:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
dnsQueryMdtList:
description: map of DNS query message detection templates where a valid JSON
string serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/DnsQueryMdt\'
minProperties: 1
baseDnsQueryMdtList:
type: array
items:
\$ref: \'#/components/schemas/BaselineDnsQueryMdtInfo\'
minItems: 1
dnsRspMdtList:
description: map of DNS response message detection templates where a valid
JSON string serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/DnsRspMdt\'
minProperties: 1
baseDnsRspMdtList:
type: array
items:
\$ref: \'#/components/schemas/BaselineDnsRspMdtInfo\'
minItems: 1
dnsMsgId:
type: string
actionList:
description: map of actions where a valid JSON string serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/Action\'
minProperties: 1
required:
\- actionList
allOf:
\- not:
required: [ dnsQueryMdtList, dnsRspMdtList ]
\- not:
required: [ dnsQueryMdtList, baseDnsRspMdtList ]
\- not:
required: [ baseDnsQueryMdtList, dnsRspMdtList ]
\- not:
required: [ baseDnsQueryMdtList, baseDnsRspMdtList ]
DnsQueryMdt:
description: DNS Query message detection template
type: object
properties:
mdtId:
type: string
label:
type: string
sourceIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
sourceIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
fqdnPatternList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/FqdnPatternMatchingRule\'
minItems: 1
required:
\- mdtId
DnsRspMdt:
description: DNS Response message detection template
type: object
properties:
mdtId:
type: string
label:
type: string
fqdnPatternList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/FqdnPatternMatchingRule\'
minItems: 1
easIpv4AddrRanges:
type: array
items:
\$ref: \'#/components/schemas/Ipv4AddressRange\'
minItems: 1
easIpv6PrefixRanges:
type: array
items:
\$ref: \'#/components/schemas/Ipv6PrefixRange\'
minItems: 1
required:
\- mdtId
Ipv4AddressRange:
description: Range of IPv4 addresses
type: object
properties:
start:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
end:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
required:
\- start
\- end
Ipv6PrefixRange:
description: Range of IPv6 prefixes
type: object
properties:
start:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
end:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
required:
\- start
\- end
Action:
description: Action to apply to DNS messages matching a message detection
template
type: object
properties:
applyAction:
\$ref: \'#/components/schemas/ApplyAction\'
fwdParas:
\$ref: \'#/components/schemas/ForwardingParameters\'
reportingOnceInd:
type: boolean
default: false
resetReportingOnceInd:
type: boolean
default: false
respParas:
\$ref: \'#/components/schemas/RespondParameters\'
required:
\- applyAction
DnsContextNotification:
description: Data within DNS Context Notify
type: object
properties:
eventreportList:
type: array
items:
\$ref: \'#/components/schemas/DnsContextEventReport\'
minItems: 1
ForwardingParameters:
description: Forwarding instructions
type: object
properties:
ecsOptionInfo:
\$ref: \'#/components/schemas/EcsOptionInfo\'
dnsServerAddressInfo:
\$ref: \'#/components/schemas/DnsServerAddressInfo\'
EcsOptionInfo:
description: ECS Option Information
type: object
properties:
ecsOption:
\$ref: \'#/components/schemas/EcsOption\'
baseDnsAitId:
\$ref: \'#/components/schemas/BaselineDnsAitId\'
oneOf:
\- required: [ ecsOption ]
\- required: [ baseDnsAitId ]
DnsServerAddressInfo:
description: DNS Server Address Information
type: object
properties:
dnsServerAddressList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
minItems: 1
baseDnsAitId:
\$ref: \'#/components/schemas/BaselineDnsAitId\'
oneOf:
\- required: [ dnsServerAddressList ]
\- required: [ baseDnsAitId ]
BaselineDnsMdtId:
description: Baseline DNS Message Detection Template Identifier
type: object
properties:
baseDnsPatternUri:
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
mdtId:
type: string
required:
\- baseDnsPatternUri
\- mdtId
BaselineDnsAitId:
description: Baseline DNS Action Information Template Identifier
type: object
properties:
baseDnsPatternUri:
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
aitId:
type: string
required:
\- baseDnsPatternUri
\- aitId
EcsOption:
description: ECS Option Information
type: object
properties:
sourcePrefixLength:
type: integer
minimum: 0
maximum: 128
scopePrefixLength:
type: integer
minimum: 0
maximum: 128
ipAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
required:
\- sourcePrefixLength
\- ipAddr
DnsContextEventReport:
description: DNS context event report
type: object
properties:
timestamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
dnsRuleId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
dnsQueryReport:
\$ref: \'#/components/schemas/DnsQueryReport\'
dnsRspReport:
\$ref: \'#/components/schemas/DnsRspReport\'
dnsMsgId:
type: string
required:
\- timestamp
DnsQueryReport:
description: DNS Query Event Report
type: object
properties:
fqdn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
DnsRspReport:
description: DNS Response Event Report
type: object
properties:
fqdn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
easIpv4Addresses:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
minItems: 1
easIpv6Addresses:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
minItems: 1
ecsOption:
\$ref: \'#/components/schemas/EcsOption\'
BaselineDnsQueryMdtInfo:
description: Baseline DNS Query MDT Information
type: object
properties:
sourceIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
sourceIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
baseDnsMdtList:
type: array
items:
\$ref: \'#/components/schemas/BaselineDnsMdtId\'
minItems: 1
required:
\- baseDnsMdtList
BaselineDnsRspMdtInfo:
description: Baseline DNS Response MDT Information
type: object
properties:
baseDnsMdtList:
type: array
items:
\$ref: \'#/components/schemas/BaselineDnsMdtId\'
minItems: 1
required:
\- baseDnsMdtList
RespondParameters:
description: Respond instructions
type: object
properties:
easIpv4Addresses:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
minItems: 1
easIpv6Addresses:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
minItems: 1
#
# SIMPLE DATA TYPES
#
#
# ENUMERATIONS
#
ApplyAction:
anyOf:
\- type: string
enum:
\- BUFFER
\- REPORT
\- FORWARD
\- DISCARD
\- RESPOND
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Action to apply to the DNS packet
# A.3 Neasdf_BaselineDNSPattern API
openapi: 3.0.0
info:
version: \'1.1.0-alpha.2\'
title: \'Neasdf_BaselineDNSPattern\'
description: \|
EASDF Baseline DNS Pattern Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.556 V18.1.0; 5G System; Edge Application Server
Discovery Services; Stage 3
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.556/\'
servers:
\- url: \'{apiRoot}/neasdf-baselinednspattern/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- {}
\- oAuth2ClientCredentials:
\- neasdf-baselinednspattern
paths:
/base-dns-patterns/{smfId}/{smfImplementationSegmentPaths}:
patch:
summary: Updates the Baseline DNS Pattern
operationId: UpdateBaseDNSPattern
tags:
\- Individual Baseline DNS Pattern
parameters:
\- name: smfId
in: path
description: SMF or SMF set identifier or Set Id part in SMF set identifier
required: true
schema:
\$ref: \'#/components/schemas/VarNfId\'
style: simple
explode: true
\- name: smfImplementationSegmentPaths
in: path
description: SMF Implementation Dependent Segment Paths
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
required: true
responses:
\'200\':
description: Partial update of the Baseline DNS Pattern
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Successful update of the Baseline DNS Pattern
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
summary: Creates or Updates the Baseline DNS Pattern (complete replacement)
operationId: CreateOrReplaceBaseDnsPattern
tags:
\- Individual Baseline DNS Pattern
parameters:
\- name: smfId
in: path
description: SMF or SMF set identifier or Set Id part in SMF set identifier
required: true
schema:
\$ref: \'#/components/schemas/VarNfId\'
style: simple
explode: true
\- name: smfImplementationSegmentPaths
in: path
description: SMF Implementation Dependent Segment Paths
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/BaseDnsPatternCreateData\'
responses:
\'201\':
description: successful creation of a Baseline DNS pattern
content:
application/json:
schema:
\$ref: \'#/components/schemas/BaseDnsPatternCreatedData\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/neasdf-baselinednspattern/\/base-dns-
patterns/{smfId}/{smfImplementationSegmentPaths}\'
required: true
schema:
type: string
\'204\':
description: Successful update of the Baseline DNS Pattern
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: Deletes a Baseline DNS Pattern
tags:
\- Individual Baseline DNS Pattern
operationId: DeleteBaseDnsPattern
parameters:
\- name: smfId
in: path
description: SMF or SMF set identifier or Set Id part in SMF set identifier
required: true
schema:
\$ref: \'#/components/schemas/VarNfId\'
style: simple
explode: true
\- name: smfImplementationSegmentPaths
in: path
description: SMF Implementation Dependent Segment Paths
required: true
schema:
type: string
responses:
\'204\':
description: successful deletion of a Baseline DNS Pattern
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
neasdf-baselinednspattern: Access to the neasdf-baselinednspattern API
schemas:
#
# STRUCTURED DATA TYPES
#
BaseDnsPatternCreateData:
description: Data in Baseline DNS Pattern Create request
type: object
properties:
label:
type: string
baseDnsMdtList:
description: map of baseline DNS message detection templates where a valid
JSON string serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/BaselineDnsMdt\'
minProperties: 1
baseDnsAitList:
description: map of Baseline DNS action information Template where a valid
JSON string serves as key
type: object
additionalProperties:
\$ref: \'#/components/schemas/BaselineDnsAit\'
minProperties: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
BaseDnsPatternCreatedData:
description: Data in Baseline DNS Pattern Create response
type: object
properties:
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
BaselineDnsMdt:
description: Baseline DNS message detection template
type: object
properties:
mdtId:
type: string
label:
type: string
dnsQueryMdtList:
description: map of DNS query message detection templates where a valid JSON
string serves as key
type: object
additionalProperties:
\$ref: \'TS29556_Neasdf_DNSContext.yaml#/components/schemas/DnsQueryMdt\'
minProperties: 1
dnsRspMdtList:
description: map of DNS response message detection templates where a valid
JSON string serves as key
type: object
additionalProperties:
\$ref: \'TS29556_Neasdf_DNSContext.yaml#/components/schemas/DnsRspMdt\'
minProperties: 1
required:
\- mdtId
oneOf:
\- required: [ dnsQueryMdtList ]
\- required: [ dnsRspMdtList ]
BaselineDnsAit:
description: Baseline DNS action information Template
type: object
properties:
aitId:
type: string
label:
type: string
ecsOption:
\$ref: \'TS29556_Neasdf_DNSContext.yaml#/components/schemas/EcsOption\'
dnsServerAddressList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
minItems: 1
required:
\- aitId
VarNfId:
description: SMF or SMF Set Id or Set Id part in NF Set Id
type: object
properties:
smfSetId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfSetId\'
setId:
type: string
pattern: \'\^([A-Za-z0-9\\-]*[A-Za-z0-9])\$\'
smfInstanceId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
#
# SIMPLE DATA TYPES
#
#
# ENUMERATIONS
#
#