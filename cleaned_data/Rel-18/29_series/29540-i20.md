# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nsmsf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the SMSF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[7] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[8] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[9] IETF RFC 2387: \"The MIME Multipart/Related Content-type\".
[10] IETF RFC 2045: \"Multipurpose Internet Mail Extensions (MIME) Part One:
Format of Internet Message Bodies\".
[11] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[12] 3GPP TS 24.011: \"Point-to-Point (PP) Short Message Service (SMS) support
on mobile radio interface\".
[13] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[14] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[15] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[16] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[17] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[18] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[19] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[20] IETF RFC 6902: \"JavaScript Object Notation (JSON) Patch\".
[21] 3GPP TS 23.540: \"5G System; Technical realization of Service Based Short
Message Service Stage 2\".
[22] 3GPP TS 29.577: \"5G System; IP Short Message Gateway and SMS Router For
Short Message Services Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5GC 5G Core Network
AMF Access Management Function
JSON Javascript Object Notation
SMSF SMS Function
# 4 Overview
Within the 5GC, the SMSF offers services to the AMF, _SMS-GMSC, IP-SM-GW and
SMS Router_ via the Nsmsf service based interface (see 3GPP TS 23.501 [2],
3GPP TS 23.502 [3] and 3GPP TS 23.540 [21]).
Figures 4.1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the SMSF
and the scope of the present specification.
Figure 4-1: Reference model -- SMSF
The functionalities supported by the SMSF are listed in clause 6.2.13 of 3GPP
TS 23.501 [2].
The services and service operations provided by the Nsmsf interface are listed
in clause 5.2.9 of 3GPP TS 23.502 [3] and clause 6.4 of 3GPP TS 23.540 [21].
# 5 Services offered by the SMSF
## 5.1 Introduction
The SMSF supports the following services.
Table 5.1-1: NF Services provided by SMSF
+------------------+------------------------+------------------------+ | Service Name | Description | Example Consumer | +==================+========================+========================+ | Nsmsf_SMService | This service allows | AMF, SMS-GMSC, SMS | | | AMF to authorize SMS | Router, IP-SM-GW | | | and activate SMS for | | | | the served user on | | | | SMSF. | | | | | | | | This service also | | | | allows the SMS-GMSC, | | | | SMS Router and | | | | IP-SM-GW to send the | | | | SMS payload in | | | | downlink direction to | | | | the SMSF. | | +------------------+------------------------+------------------------+
Table 5.1-2 summarizes the corresponding APIs defined for this specification.
Table 5.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName **Annex**
* * *
Nsmsf_SMService 6.1 SMSF SMService TS29540_Nsmsf_SMService.yaml nsmsf-sms A.2
## 5.2 Nsmsf_SMService Service
### 5.2.1 Service Description
The Nsmsf_SMService service provides the service capability for the NF Service
Consumer (e.g. AMF) to authorize SMS and activate SMS for a service user on
SMSF, for the NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) to
send the SMS payload in downlink direction to the SMSF. The following are the
key functionalities of this NF service:
\- Activation or deactivation of SMS service for a given service user, which
results in creating/updating/deleting an UE Context for SMS in SMSF;
\- Send SMS payload in uplink direction to SMSF;
\- Send SMS payload in downlink direction to SMSF.
The Nsmsf_SMService service supports the following service operations.
Table 5.2.1-1: Service operations supported by the Nsmsf_SMService service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | Activate | Activate SMS | Re | AMF | | | service for a | quest/Response | | | | given service | | | | | user, which | | | | | results in | | | | | creating or | | | | | updating a UE | | | | | Context for | | | | | SMS in SMSF. | | | +----------------+----------------+----------------+----------------+ | Deactivate | Deactivate SMS | Re | AMF | | | service for a | quest/Response | | | | given service | | | | | user, which | | | | | results in | | | | | deleting or | | | | | updating a UE | | | | | Context for | | | | | SMS in SMSF. | | | +----------------+----------------+----------------+----------------+ | UplinkSMS | Send SMS | Re | AMF | | | payload in | quest/Response | | | | uplink | | | | | direction to | | | | | SMSF. | | | +----------------+----------------+----------------+----------------+ | MtForwardSm | Send SMS | Re | _SMS-GMSC, SMS | | | payload in | quest/Response | Router, | | | downlink | | IP-SM-GW_ | | | direction to | | | | | SMSF. | | | +----------------+----------------+----------------+----------------+
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
This clause introduces the related procedures using Nsmsf_SMService service
operations for supporting SMS service.
#### 5.2.2.2 Activate
##### 5.2.2.2.1 General
The Activate service operation shall be used by the NF Service Consumer (e.g.
AMF) to activate SMS service for a given service user, which results in
creating or updating an individual UE Context for SMS in the SMSF, in the
following procedures:
\- Registration Procedure for SMS over NAS (see clause 4.13.3.1 of 3GPP TS
23.502 [3]);
\- Registration Update Procedure for SMS over NAS due to AMF change (see
clause 4.13.3.1 of 3GPP TS 23.502 [3]);
\- Registration Update Procedure for SMS over NAS to add authorization for SMS
over a new additional Access Type;
\- AMF initiated modification to UE Context in SMSF, e.g. modify the backup
AMF information.
There shall be only one individual UE Context for SMS per service user.
##### 5.2.2.2.2 Registration procedure using Activate service operation
The NF Service Consumer (e.g. AMF) shall activate SMS service for a given
service user by using the HTTP PUT method as shown in Figure 5.2.2.2.2-1.
Figure 5.2.2.2.2-1: Activation of SMS service
1\. The NF Service Consumer (e.g. AMF) shall send a PUT request to the
resource representing the UE Context for SMS (i.e. .../ue-contexts/{supi}) in
the SMSF to activate SMS service for a given service user. The payload body of
the PUT request shall contain a representation of the individual UE Context
resource to be created or updated.
Depending on whether the target UE Context for SMS has already been created,
the SMSF performs 2a or 2b:
2a. If the target UE Context for SMS is not created in SMSF, the SMSF
registers itself in UDM for the Access Type(s) provided, retrieves
subscription data from the UDM, performs service authorization for the given
UE, and create UE Context for SMS for this UE.
If successful, \"201 Created\" shall be returned, the payload body of the PUT
response shall contain the representation of the created resource and the
\"Location\" header shall contain the URI of the created resource.
2b. If the target UE Context for SMS has already been created, the SMSF
updates the UE Context for SMS with the NF Service Consumer (e.g. AMF)
provided parameters.
If successful, \"204 No Content\" shall be returned.
2c. If the target UE Context for SMS has already been created and the NF
Service Consumer (e.g. AMF) provided parameters contains 2 access types (i.e.
an additional Access Type), the SMSF registers itself in UDM for the new
Access Type for the given UE, performs service authorization for the given UE
for the new Access Type and updates the UE context for SMS for this UE with
the new additional Access Type.
If successful, \"204 No Content\" shall be returned.
2d. On failure, the appropriate HTTP status code (e.g. \"403 Forbidden\")
indicating the error shall be returned.
A ProblemDetails IE shall be included in the payload body of PUT response,
with the \"cause\" attribute of ProblemDetails set to application error codes
specified in table 6.1.7.3-1.
2e. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned.
A RedirectResponse IE may be included in the payload body of PUT response, as
specified in table 6.1.3.3.3.1-3.
##### 5.2.2.2.3 Modify UE Context in SMSF using HTTP PATCH Method
The NF Service Consumer (e.g. AMF) may update UE context in SMSF for a given
service user by using the HTTP PATCH method as shown in Figure 5.2.2.2.3-1.
Figure 5.2.2.2.3-1: Modify UE Context in SMSF using HTTP PATCH Method
1\. The NF Service Consumer (e.g. AMF) shall send a PATCH request to the
resource representing the UE Context for SMS (i.e. .../ue-contexts/{supi}) in
the SMSF to modify the UE Context in SMSF for a given service user. The
request body shall contain a list of PatchItem for each the JSON pointer is
set to the attribute to be modified.
2a. On success, the request is accepted, and all the modification instructions
in the PATCH request have been implemented, the SMSF shall respond with \"204
No Content\".
2b. On partial success, the request is accepted, but some of the modification
instructions in the PATCH request have been discarded:
\- the SMSF shall respond with \"200 OK\" including PatchResult to indicate
the failed modifications, if the NF service consumer has included in the
supported-feature query parameter the \"PatchReport\" feature; or
-the SMSF shall respond with \"200 OK\" with the response body containing UeSmsContextData, if the NF service consumer does not support the \"PatchReport\" feature.
2c. On failure, the appropriate HTTP status code (e.g. \"403 Forbidden\")
indicating the error shall be returned. A ProblemDetails IE shall be included
in the payload body of PATCH response, with the \"cause\" attribute of
ProblemDetails set to application error codes specified in table 6.1.7.3-1.
If the modification is not allowed, HTTP status code \"403 Forbidden\" should
be returned including additional error information in the response body (in
the \"ProblemDetails\" element).
If the resource does not exist, e.g. the attribute to be modified cannot be
found, HTTP status code \"404 Not Found\" should be returned including
additional error information in the response body (in the \"ProblemDetails\"
element).
2d. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned. A RedirectResponse IE may be included in the
payload body of PATCH response, as specified in table 6.1.3.3.3.1-3.
#### 5.2.2.3 Deactivate
##### 5.2.2.3.1 General
The Deactivate service operation shall be used by the NF Service Consumer
(e.g. AMF) to deactivate SMS service for a given service user, which results
in deleting or updating an individual UE Context for SMS in the SMSF, in the
following procedures:
\- De-Registration Procedure to remove SMS service authorization from SMSF for
SMS over NAS (see clause 4.13.3.2 of 3GPP TS 23.502 [3]);
\- De-Registration procedure to remove SMS service authorization from SMSF for
one of the registered Access Type (see clause 4.13.3.2 of 3GPP TS 23.502 [3]);
##### 5.2.2.3.2 De-Registration procedure to remove SMS service authorization
from SMSF
The NF Service Consumer (e.g. AMF) shall deactivate SMS service for a given
service user by using the HTTP DELETE method as shown in Figure 5.2.2.3.2-1.
Figure 5.2.2.3.2-1: Deactivation of SMS service
1\. The NF Service Consumer (e.g. AMF) shall send a DELETE request to the
resource representing the UE Context for SMS (i.e. .../ue-contexts/{supi}) in
the SMSF.
2a. The SMSF deactivates the SMS service for the service user, and deletes the
UE context for SMS from the SMSF.
On success, \"204 No Content\" shall be returned.
2b. On failure, the appropriate HTTP status code (e.g. \"404 Not Found\")
indicating the error shall be returned.
A ProblemDetails IE shall be included in the payload body of DELETE response,
with the \"cause\" attribute of ProblemDetails set to application error codes
specified in table 6.1.7.3-1.
2c. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned.
A RedirectResponse IE may be included in the payload body of DELETE response,
as specified in table 6.1.3.3.3.2-3.
##### 5.2.2.3.3 De-Registration procedure to remove SMS service authorization
from SMSF for one of the registered Access Type
When the UE has SMS service activated on both of the Access Types and the NF
Service Consumer (e.g. AMF) wants to deactivate SMS service for the given UE
for one of the affected Access Type, the NF Service Consumer (e.g. AMF) shall
use HTTP PUT method as shown in Figure 5.2.2.3.3-1.
Figure 5.2.2.3.3-1: Removal of SMS service authorization over one of the
access types
1\. The NF Service Consumer (e.g. AMF) shall send a PUT request to the
resource representing the UE Context for SMS (i.e. .../ue-contexts/{supi}) in
the SMSF. The payload body of the PUT request shall contain a representation
of the individual UE Context resource to be updated. Only one Access Type that
is allowed for SMS service shall be included in the PUT request payload body.
2a. Since the target UE Context for SMS was already created at the SMSF with
both 3GPP and non-3GPP Access Types for the same NF Service Consumer (e.g.
AMF) and the NF Service Consumer provided parameters contains only one Access
Type, the SMSF deregisters itself in the UDM for the affected Access Type
(i.e. the access type not included in the PUT request) for the given UE and
updates the UE context for SMS by removing the affected Access Type.
On success, \"204 No Content\" shall be returned.
2b. On failure, the appropriate HTTP status code (e.g. \"403 Forbidden\")
indicating the error shall be returned.
A ProblemDetails IE shall be included in the payload body of PUT response,
with the \"cause\" attribute of ProblemDetails set to application error codes
specified in table 6.1.7.3-1.
2c. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned.
A RedirectResponse IE may be included in the payload body of PUT response, as
specified in table 6.1.3.3.3.1-3.
#### 5.2.2.4 UplinkSMS
##### 5.2.2.4.1 General
The UplinkSMS service operation shall be used by NF Service Consumer (e.g.
AMF) to send SMS payload (e.g. SMS message or Ack) in the uplink direction to
SMSF, in the following procedures:
\- MO SMS delivery procedure (see clause 4.13.3.3-4.13.3.5 of 3GPP TS 23.502
[3]);
\- MT SMS delivery procedure (see clause 4.13.3.6-4.13.3.8 of 3GPP TS 23.502
[3]);
##### 5.2.2.4.2 Procedures of sending SMS payload in uplink direction using
UplinkSMS service operation
The NF Service Consumer (e.g. AMF) shall send SMS payload in uplink direction
by using the \"sendsms\" custom operation as shown in Figure 5.2.2.4.2-1.
Figure 5.2.2.4.2-1: Send SMS payload in uplink direction
1\. The NF Service Consumer (e.g. AMF) shall send a POST request to the
resource representing the UEContext (i.e. .../ue-contexts/{supi}/sendsms) of
the SMSF. The payload body of the POST request shall contain the SMS record to
be sent.
2a. On success, \"200 OK\" shall be returned with \"SmsRecordDeliveryData\"
object in the response body.
The SMSF may immediately respond to the NF service consumer, after successful
inspection of the SMS payload, and set the \"deliveryStatus\" attribute to
\"SMS_DELIVERY_SMSF_ACCEPTED\"; the SMSF may also attempt to forward the SMS
payload to SMS-GMSC/IWMSC/IP-SM-GW/SMS Router.
If successful, \"200 OK\" shall be returned. If needed, the payload body of
the POST response shall contain the status of SMS record delivery attempts at
the SMSF.
2b. On failure, the appropriate HTTP status code (e.g. \"403 Forbidden\")
indicating the error shall be returned.
A ProblemDetails IE shall be included in the payload body of POST response,
with the \"cause\" attribute of ProblemDetails set to application error codes
specified in table 6.1.7.3-1.
2c. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned.
A RedirectResponse IE may be included in the payload body of POST response, as
specified in table 6.1.3.3.4.2.2-2.
#### 5.2.2.5 MtForwardSm
##### 5.2.2.5.1 General
The MtForwardSm service operation shall be used by NF Service Consumer (e.g.
SMS GMSC, SMS Router and IP-SM-GW) to send SMS payload (e.g. SMS message) in
the downlink direction to SMSF, in the following procedures:
\- Successful Mobile Terminated short message transfer as defined in 3GPP TS
23.540 [21] clause 5.1.2, clause 5.1.3 and clause 5.1.4.
\- Unsuccessful Mobile Terminated short message transfer as defined in 3GPP TS
23.540 [21] clause 5.1.5, clause 5.1.6 and clause 5.1.9.
##### 5.2.2.5.2 Procedures of sending SMS payload in downlink direction using
MtForwardSm service operation
The NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) shall send
SMS payload in downlink direction by using the \"send-mt-sms\" custom
operation as shown in Figure 5.2.2.5.2-1.
Figure 5.2.2.5.2-1: Send SMS payload in downlink direction
1\. The NF Service Consumer (e.g. SMS GMSC, SMS Router and IP-SM-GW) shall
send a POST request to the resource representing the UEContext (i.e. .../ue-
contexts/{supi}/send-mt-sms) of the SMSF. The payload body of the POST request
shall contain the MT SMS record to be sent.
> 2a. On success, \"200 OK\" shall be returned with \"SmsDeliveryData\" object
> contains the MT SMS Delivery Report in the response body.
2b. On failure, the appropriate HTTP status code (e.g. \"403 Forbidden\")
indicating the error shall be returned.
A ProblemDetails IE shall be included in the payload body of POST response,
with the \"cause\" attribute of ProblemDetails set to application error codes
specified in table 6.1.7.3-1.
2c. On redirection, the appropriate HTTP status code (e.g. \"307 Temporary
Redirect\") shall be returned.
A RedirectResponse IE may be included in the payload body of POST response, as
specified in table 6.1.3.3.4.x.2-2.
# 6 API Definitions
## 6.1 Nsmsf_SMService Service API
### 6.1.1 API URI
The Nsmsf_SMService shall use the Nsmsf_SMService API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nsmsf-sms\".
\- The \ shall be \"v2\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, as defined in IETF RFC 7540 [7], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nsmsf_SMService service shall comply with the
OpenAPI [19] specification contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
The usage of HTTP standard headers is specified in clause 5.2.2 of 3GPP TS
29.500 [4].
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- the JSON format (IETF RFC 8259 [8]). The use of the JSON format shall be
signalled by the content type \"application/json\". See also clause 5.4 of
3GPP TS 29.500 [4].
\- the Problem Details JSON Object (IETF RFC 7807 [17]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
\- the JSON Patch (IETF RFC 6902 [20]). The use of the JSON Patch format in a
HTTP request body shall be signalled by the content type \"application/json-
patch+json\".
Multipart messages shall also be supported (see clause 6.1.2.4) using the
content type \"multipart/related\", comprising:
\- one JSON body part with the \"application/json\" content type; and
\- one binary body part with 3gpp vendor specific content subtypes.
The 3gpp vendor specific content subtypes defined in Table 6.1.2.2.2-1 shall
be supported.
Table 6.1.2.2.2-1: 3GPP vendor specific content subtypes
* * *
content subtype Description vnd.3gpp.sms Binary encoded payload, encoding SMS
payload, as specified in 3GPP TS 23.040 [11] and 3GPP TS 24.011 [12]. NOTE:
Using 3GPP vendor content subtypes allows to describe the nature of the opaque
payload (e.g. SMS payload) without having to rely on metadata in the JSON
payload.
* * *
See clause 6.1.2.4 for the binary payloads supported in the binary body part
of multipart messages.
##### 6.1.2.2.3 ETag
As described in IETF RFC 7232 [18] clause 2.32, an \"ETag\" (entity-tag)
header should be included in HTTP responses except for non-cacheable resources
to allow an NF Service Consumer performing a conditional request with \"If-
Match\" header. If it is included, it shall contain a server-generated strong
validator, that allows further matching of this value (included in subsequent
client requests) with a given resource representation stored in the server or
in a cache.
##### 6.1.2.2.4 If-Match
As described in IETF RFC 7232 [18] clause 3.1, an NF Service Consumer may
issue conditional DELETE request towards SMSF by including an \"If-Match\"
header in HTTP requests containing an entity tags received in previous
response for the same resource.
#### 6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
In this release of this specification, no custom headers specific to the
Nsmsf_SMService service are defined. For 3GPP specific HTTP custom headers
used across all service based interfaces, see clause 5.2.3 of 3GPP TS 29.500
[4].
#### 6.1.2.4 HTTP multipart messages
HTTP multipart messages shall be supported, to transfer opaque SMS payload
(e.g. SMS message, CP Ack, etc.), in the following service operations (and
HTTP messages):
\- UplinkSMS service operation;
HTTP multipart messages shall include one JSON body part and one binary body
part comprising content of SMS payload content (see clause 6.1.6.4).
The JSON body part shall be the \"root\" body part of the multipart message.
It shall be encoded as the first body part of the multipart message. The
\"Start\" parameter does not need to be included.
The multipart message shall include a \"type\" parameter (see IETF RFC 2387
[9]) specifying the media type of the root body part, i.e.
\"application/json\".
NOTE: The \"root\" body part (or \"root\" object) is the first body part the
application processes when receiving a multipart/related message, see IETF RFC
2387 [9]. The default root is the first body within the multipart/related
message. The \"Start\" parameter indicates the root body part, e.g. when this
is not the first body part in the message.
A binary body part shall include a Content-ID header (see IETF RFC 2045 [10]),
and the JSON body part shall make a reference to the binary body part using
the Content-ID header field.
Examples of multipart/related messages can be found in Annex B.
### 6.1.3 Resources
#### 6.1.3.1 Overview
The figure 6.1.3.1-1 describes the resource URI structure of the Nsmsf-sms
API.
Figure 6.1.3.1-1: Resource URI structure of the nsmsf-sms API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+---------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +===============+================+================+================+ | UEContext\ | /ue-c | PUT | It is used for | | (Document) | ontexts/{supi} | | the Activate | | | | | service | | | | | operation, for | | | | | the purpose | | | | | of: | | | | | | | | | | - Activate | | | | | SMS service | | | | | for a given | | | | | UE, which | | | | | results in | | | | | creating an | | | | | individual UE | | | | | Context | | | | | resource in | | | | | SMSF. | | | | | | | | | | - Update SMS | | | | | service | | | | | parameters for | | | | | a given UE, | | | | | which results | | | | | in updating an | | | | | existing | | | | | individual UE | | | | | Context | | | | | resource in | | | | | SMSF. | | | | | | | | | | - Deactivate | | | | | SMS service | | | | | for a given UE | | | | | for one of the | | | | | two registered | | | | | Access Types, | | | | | which results | | | | | in updating an | | | | | existing | | | | | individual UE | | | | | context | | | | | resource in | | | | | SMSF. | +---------------+----------------+----------------+----------------+ | | | PATCH | It is used for | | | | | the Activate | | | | | service | | | | | operation, for | | | | | the purpose | | | | | of: | | | | | | | | | | - Partially | | | | | update SMS | | | | | service | | | | | parameters for | | | | | a given UE, | | | | | which results | | | | | in updating an | | | | | existing | | | | | individual UE | | | | | Context | | | | | resource in | | | | | SMSF. | +---------------+----------------+----------------+----------------+ | | | DELETE | It is used for | | | | | the Deactivate | | | | | service | | | | | operation, for | | | | | the purpose | | | | | of: | | | | | | | | | | - Deactivate | | | | | SMS service | | | | | for a given | | | | | UE, which | | | | | results in | | | | | deleting an | | | | | existing | | | | | individual UE | | | | | Context | | | | | resource in | | | | | SMSF. | +---------------+----------------+----------------+----------------+ | | /ue-contexts/ | sendsms | It is used for | | | {supi}/sendsms | | the UplinkSMS | | | | (POST) | service | | | | | operation, to | | | | | allow NF | | | | | Service | | | | | Consumer to | | | | | send SMS | | | | | payload in | | | | | uplink | | | | | direction. | +---------------+----------------+----------------+----------------+ | | /ue | send-mt-sms | It is used for | | | -contexts/{sup | | the | | | i}/send-mt-sms | (POST) | MtForwardSm | | | | | service | | | | | operation, to | | | | | allow NF | | | | | Service | | | | | Consumer to | | | | | send SMS | | | | | payload in | | | | | downlink | | | | | direction. | +---------------+----------------+----------------+----------------+
#### 6.1.3.2 Resource: UEContexts (Store)
##### 6.1.3.2.1 Description
This resource represents the collection of UE Context for SMS in SMSF.
This resource is modelled with the Store resource archetype (see clause C.3 of
3GPP TS 29.501 [5]).
No HTTP method has been defined for this resource.
##### 6.1.3.2.2 Resource Definition
Resource URI: {apiRoot}/nsmsf-sms/\/ue-contexts
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1
##### 6.1.3.2.3 Resource Standard Methods
No HTTP method has been defined for the UE Context collection resource.
#### 6.1.3.3 Resource: UEContext (Document)
##### 6.1.3.3.1 Description
This resource represents an individual UE Context for SMS in SMSF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
A PUT method to this resource can be invoked by the NF Service Consumer (e.g.
AMF) to:
\- activate SMS service for a given UE, which results in creating new
individual UE Context for SMS in SMSF, during the Registration procedure for
SMS over NAS (see 3GPP TS 23.502 [3] clause 4.13.3.1);
\- update SMS service parameters for a given UE, which results in updating
individual UE Context for SMS in SMSF, during the Registration Update
procedure due to AMF change (see 3GPP TS 23.502 [3] clause 4.13.3.1).
\- update SMS service parameters for a given UE, which results in updating
individual UE Context for SMS in SMSF, to add a new Access Type for SMS over
NAS.
\- Deactivate SMS service for a given UE for one of the two registered Access
Types, which results in updating an existing individual UE context resource in
SMSF to remove the affected Access Type for SMS over NAS.
A DELETE method to this resource can be invoked by the NF Service Consumer
(e.g. AMF) to:
\- deactivate SMS service for a given UE, which results in deleting existing
individual UE Context for SMS in SMSF, during the De-Registration procedure
form SMS over NAS (see 3GPP TS 23.502 [3] clause 4.13.3.2).
##### 6.1.3.3.2 Resource Definition
Resource URI: {apiRoot}/nsmsf-sms/\/ue-contexts/{supi}
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
+---------+-----------+----------------------------------------------+ | Name | Data type | Definition | +=========+===========+==============================================+ | apiRoot | string | See clause 6.1.1 | +---------+-----------+----------------------------------------------+ | supi | Supi | Represents the Subscription Permanent | | | | Identifier (see 3GPP TS 23.501 [2] clause | | | | 5.9.2) | | | | | | | | pattern: See pattern of type Supi in | | | | 3GPP TS 29.571 [6] | +---------+-----------+----------------------------------------------+
##### 6.1.3.3.3 Resource Standard Methods
##### 6.1.3.3.3.1 PUT {#put .H6}
This method creates an individual resource of UE Context for SMS in the SMSF,
or updates the indicated resource of UE Context for SMS in the SMSF.
This method shall support the URI query parameters specified in table
6.1.3.3.3.1-1.
Table 6.1.3.3.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.1-2 and the response data structures and response codes specified in
table 6.1.3.3.3.1-3.
Table 6.1.3.3.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description UeSmsContextData M 1 Representation of the
UE Context for SMS to be created in the SMSF, or to be updated in the SMSF.
* * *
Table 6.1.3.3.3.1-3: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | UeS | M | 1 | 201 Created | This case | | msContextData | | | | represents | | | | | | the | | | | | | successful | | | | | | creation of | | | | | | an UE Context | | | | | | for SMS. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | This case | | | | | Content | represents | | | | | | the | | | | | | successful | | | | | | update of an | | | | | | UE Context | | | | | | for SMS. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | When used to | | roblemDetails | | | | represent the | | | | | | failure of | | | | | | creation / | | | | | | update of an | | | | | | UE Context | | | | | | for SMS, the | | | | | | \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error codes: | | | | | | | | | | | | > \- | | | | | | > SERVICE_ | | | | | | NOT_ALLOWED, | | | | | | > if SMS | | | | | | > service is | | | | | | > not allowed | | | | | | > for the | | | | | | > given | | | | | | > service | | | | | | > user; | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | When used to | | roblemDetails | | | | represent the | | | | | | failure of | | | | | | creation / | | | | | | update of an | | | | | | UE Context | | | | | | for SMS, the | | | | | | \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error codes: | | | | | | | | | | | | > \- | | | | | | > USER | | | | | | _NOT_FOUND, | | | | | | > if the | | | | | | > provided | | | | | | > subscriber | | | | | | > identifier | | | | | | > is invalid | | | | | | > or the | | | | | | > service | | | | | | > user is not | | | | | | > found from | | | | | | > UDM; | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nsmsf-
sms/\/ue-contexts/{supi} ETag string O 0..1 Entity Tag, containing
a strong validator, as described in IETF RFC 7232 [18], clause 2.3.
* * *
Table 6.1.3.3.3.1-5: Headers supported by the 204 Response Code on this
resource
Name Data type P Cardinality Description
* * *
ETag string O 0..1 Entity Tag, containing a strong validator, as described in
IETF RFC 7232 [18], clause 2.3.
Table 6.1.3.3.3.1-6: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.3.1-7: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.3.2 DELETE {#delete .H6}
This method deletes an individual resource of UE Context for SMS in the SMSF.
This method shall support the URI query parameters specified in table
6.1.3.3.3.2-1.
Table 6.1.3.3.3.2-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.2-2 and the response data structures and response codes specified in
table 6.1.3.3.3.2-3.
Table 6.1.3.3.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.1.3.3.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | deletion of | | | | | | an UE Context | | | | | | for SMS. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | When used to | | roblemDetails | | | | represent an | | | | | | unsuccessful | | | | | | deletion of | | | | | | an UE Context | | | | | | for SMS, the | | | | | | \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | may be used | | | | | | to include | | | | | | one of the | | | | | | following | | | | | | application | | | | | | error codes: | | | | | | | | | | | | > \- | | | | | | > CONTEXT | | | | | | _NOT_FOUND, | | | | | | > if the UE | | | | | | > context for | | | | | | > SMS to be | | | | | | > operated is | | | | | | > invalid or | | | | | | > not found | | | | | | > in SMSF. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.2-4: Headers supported by the DELETE method on this resource
* * *
Name Data type P Cardinality Description If-Match String O 0..1 Validator for
conditional requests, as described in IETF RFC 7232 [18], clause 3.1
* * *
Table 6.1.3.3.3.2-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | String | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | String | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.3.2-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.3.3 PATCH {#patch .H6}
This method shall support the URI query parameters specified in table
6.1.3.3.3.3-1.
Table 6.1.3.3.3.3-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description supported-features SupportedFeatures
O 0..1 see 3GPP TS 29.500 [4] clause 6.6
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.3-2 and the response data structures and response codes specified in
table 6.1.3.3.3.3-3.
Table 6.1.3.3.3.3-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1..N Items describe the
modifications to the Event Subscription
* * *
Table 6.1.3.3.3.3-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | PatchResult | C | 1 | 200 OK | Upon partial | | | | | | success, if | | | | | | the NF | | | | | | service | | | | | | consumer has | | | | | | indicated | | | | | | \" | | | | | | PatchReport\" | | | | | | in the | | | | | | suppo | | | | | | rted-feature, | | | | | | the execution | | | | | | report is | | | | | | returned. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | UeS | C | 0..1 | 200 OK | Upon partial | | msContextData | | | | success, if | | | | | | the NF | | | | | | service | | | | | | consumer does | | | | | | not support | | | | | | the | | | | | | \" | | | | | | PatchReport\" | | | | | | feature, the | | | | | | SMSF shall | | | | | | return a | | | | | | UeS | | | | | | msContextData | | | | | | object in the | | | | | | response. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | One or more | | roblemDetails | | | | attributes | | | | | | are not | | | | | | allowed to be | | | | | | modified. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | M | | | | | | ODIFICATION_ | | | | | | NOT_ALLOWED, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | | | | | | | | NOTE 3: One | | | | | | of | | | | | | UeS | | | | | | msContextData | | | | | | or | | | | | | PatchResult | | | | | | shall be | | | | | | returned, | | | | | | depending on | | | | | | whether the | | | | | | NF service | | | | | | consumer | | | | | | support | | | | | | \" | | | | | | PatchReport\" | | | | | | feature or | | | | | | not. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.3-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.3.3-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.3.4 Resource Custom Operations
###### 6.1.3.3.4.1 Overview
Table 6.1.3.3.4.1-1: Custom operations
Operation Name Custom operaration URI Mapped HTTP method Description
* * *
sendsms /ue-contexts/{supi}/sendsms POST Send SMS payload or CP Ack in uplink
direction. send-mt-sms /ue-contexts/{supi}/send-mt-sms POST Send MT SMS
payload, or the related CP Ack.
###### 6.1.3.3.4.2 Operation: sendsms
###### # 6.1.3.3.4.2.1 Description {#description-2 .list-paragraph}
This custom operation is used for NF Service Consumers to send SMS record in
uplink direction.
###### # 6.1.3.3.4.2.2 Operation Definition {#operation-definition .list-
paragraph}
This custom operation is used to send a SMS payload to an individual UEContext
resource in the SMSF.
This operation shall support the request data structures specified in table
6.1.3.3.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.2.2-2.
Table 6.1.3.3.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmsRecordData M 1 Representation of the
SMS Record to be created in the SMSF.
* * *
Table 6.1.3.3.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | SmsRecor | M | 1 | 200 OK | This case | | dDeliveryData | | | | represents | | | | | | the | | | | | | successful of | | | | | | sending SMS | | | | | | record in | | | | | | uplink | | | | | | direction, | | | | | | with | | | | | | necessary | | | | | | response | | | | | | data. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | This case | | roblemDetails | | | Request | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SMS_PAYL | | | | | | OAD_MISSING, | | | | | | > if the | | | | | | > expected | | | | | | > SMS payload | | | | | | > content is | | | | | | > missing; | | | | | | > | | | | | | > \- | | | | | | > SMS_PA | | | | | | YLOAD_ERROR, | | | | | | > if error | | | | | | > exists in | | | | | | > the SMS | | | | | | > payload | | | | | | > content. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SERVICE_ | | | | | | NOT_ALLOWED, | | | | | | > if SMS | | | | | | > service is | | | | | | > not allowed | | | | | | > for the | | | | | | > given | | | | | | > service | | | | | | > user; | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > CONTEXT | | | | | | _NOT_FOUND, | | | | | | > if the UE | | | | | | > context for | | | | | | > SMS to be | | | | | | > operated is | | | | | | > invalid or | | | | | | > not found | | | | | | > in SMSF. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.4.2.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.4.2.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
###### 6.1.3.3.4.3 Operation: send-mt-sms
###### # 6.1.3.3.4.3.1 Description {#description-3 .list-paragraph}
This custom operation is used for NF Service Consumers to send SMS record in
downlink direction.
###### # 6.1.3.3.4.3.2 Operation Definition {#operation-definition-1 .list-
paragraph}
This custom operation is used to send a SMS payload to an individual UEContext
resource in the SMSF.
This operation shall support the request data structures specified in table
6.1.3.3.4.3.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.3.2-2.
Table 6.1.3.3.4.3.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmsData M 1 Representation of the MT SMS
sent to the SMSF.
* * *
Table 6.1.3.3.4.3.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Sm | M | 1 | 200 OK | This case | | sDeliveryData | | | | represents | | | | | | the | | | | | | successful of | | | | | | sending SMS | | | | | | message in | | | | | | downlink | | | | | | direction, | | | | | | with | | | | | | necessary | | | | | | response data | | | | | | on the | | | | | | received | | | | | | delivery | | | | | | report. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | This case | | roblemDetails | | | Request | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SMS_PAYL | | | | | | OAD_MISSING, | | | | | | > if the | | | | | | > expected | | | | | | > SMS payload | | | | | | > content is | | | | | | > missing; | | | | | | > | | | | | | > \- | | | | | | > SMS_PA | | | | | | YLOAD_ERROR, | | | | | | > if error | | | | | | > exists in | | | | | | > the SMS | | | | | | > payload | | | | | | > content. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > SERVICE_ | | | | | | NOT_ALLOWED, | | | | | | > if SMS | | | | | | > service is | | | | | | > not allowed | | | | | | > for the | | | | | | > given | | | | | | > service | | | | | | > user; | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | This case | | roblemDetails | | | | represents an | | | | | | unsuccessful | | | | | | delivery of | | | | | | SMS payload. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > CONTEXT | | | | | | _NOT_FOUND, | | | | | | > if the UE | | | | | | > context for | | | | | | > SMS to be | | | | | | > operated is | | | | | | > invalid or | | | | | | > not found | | | | | | > in SMSF. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.4.3.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.3.4.3.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same SMSF | | | | | | or SMSF | | | | | | (service) set. | | | | | | | | | | | | For the case, | | | | | | when a request | | | | | | is redirected | | | | | | to the same | | | | | | target resource | | | | | | via a different | | | | | | SCP, see | | | | | | clause 6.10.9.1 | | | | | | in | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.1.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined.
### 6.1.5 Notifications
In this release of this specification, no notification procedures are defined.
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nsmsf service based
interface protocol.
Table 6.1.6.1-1: Nsmsf specific Data Types
Data type Clause defined Description
* * *
UeSmsContextData 6.1.6.2.2 Information used for activating SMS service for a
service user, or updating the parameters for SMS service. SmsRecordData
6.1.6.2.3 Information within request message invoking UplinkSMS service
operation, for delivering SMS payload. SmsRecordDeliveryData 6.1.6.2.5
Information for result of invoking UplinkSMS service operation. RecordId
6.1.6.3.2 Record ID used to identify a message carrying SMS payload.
SmsDeliveryStatus 6.1.6.3.3 Status of SMS delivery attempts.
Table 6.1.6.1-2 specifies data types re-used by the Nsmsf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Nsmsf service based interface.
Table 6.1.6.1-2: Nsmsf re-used Data Types
Data type Reference Comments
* * *
ProblemDetails 3GPP TS 29.571 [6] Common Data Type used in response bodies
RedirectResponse 3GPP TS 29.571 [6] Redirect Response Supi 3GPP TS 29.571 [6]
Subscription Permanent Identifier Gpsi 3GPP TS 29.571 [6] General Public
Subscription Identifier Pei 3GPP TS 29.571 [6] Permanent Equipment, it
contains an IMEI or IMEISV. Guami 3GPP TS 29.571 [6] Globally Unique AMF
Identifier AccessType 3GPP TS 29.571 [6] Access Type (3GPP or non-3GPP access)
UserLocation 3GPP TS 29.571 [6] User location information TimeZone 3GPP TS
29.571 [6] User time zone information NfInstanceId 3GPP TS 29.571 [6] NF
Instance ID RefToBinaryData 3GPP TS 29.571 [6] Information for indicating the
binary content of SMS payload. TraceData 3GPP TS 29.571 [6] Trace control and
configuration parameters BackupAmfInfo 3GPP TS 29.571 [6] Backup AMF
Information NfGroupId 3GPP TS 29.571 [6] Network Function Group Id RatType
3GPP TS 29.571 [6] RAT Type SupportedFeatures 3GPP TS 29.571 [6] Supported
Features PatchItem 3GPP TS 29.571 [6] Patch item PatchResult 3GPP TS 29.571
[6] PATCH result SmsData 3GPP TS 29.577 [22] Information within request
message for delivering SMS. SmsDeliveryData 3GPP TS 29.577 [22] Information
within response message invoking MtForwardSm service operation, for delivering
MT SMS Delivery Report.
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: UeSmsContextData
Table 6.1.6.2.2-1: Definition of type UeSmsContextData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | supi | Supi | M | 1 | This IE shall | | | | | | be present, | | | | | | and it shall | | | | | | contain the | | | | | | subscriber | | | | | | permanent | | | | | | identify of | | | | | | the service | | | | | | user. | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | generic | | | | | | public | | | | | | subscriber | | | | | | identifier of | | | | | | the service | | | | | | user. | +---------------+---------------+---+-------------+---------------+ | pei | Pei | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | IMEI or | | | | | | IMEISV of the | | | | | | service user. | +---------------+---------------+---+-------------+---------------+ | accessType | AccessType | M | 1 | This IE shall | | | | | | be present, | | | | | | and it shall | | | | | | contain the | | | | | | access type | | | | | | from which | | | | | | the service | | | | | | user accesses | | | | | | to network. | +---------------+---------------+---+-------------+---------------+ | additio | AccessType | C | 0..1 | This IE shall | | nalAccessType | | | | be present in | | | | | | activate | | | | | | service | | | | | | operations to | | | | | | indicate that | | | | | | the service | | | | | | user accesses | | | | | | the network | | | | | | and request | | | | | | SMS service | | | | | | from both | | | | | | 3GPP access | | | | | | and Non-3GPP | | | | | | access. | | | | | | | | | | | | This IE shall | | | | | | be absent in | | | | | | deactivate | | | | | | service | | | | | | operations to | | | | | | indicate that | | | | | | service user | | | | | | is no longer | | | | | | served with | | | | | | SMS service | | | | | | via two | | | | | | access types. | | | | | | In this case | | | | | | the | | | | | | accessType | | | | | | attribute | | | | | | shall | | | | | | indicate the | | | | | | remaining | | | | | | access type. | +---------------+---------------+---+-------------+---------------+ | amfId | NfInstanceId | M | 1 | This IE shall | | | | | | be present, | | | | | | and it shall | | | | | | contain the | | | | | | NF instance | | | | | | ID of the | | | | | | requesting | | | | | | AMF. | +---------------+---------------+---+-------------+---------------+ | guamis | array(Guami) | O | 1..N | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | GUAMI(s) of | | | | | | the AMF. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | UE location | | | | | | information | | | | | | (e.g. TAI and | | | | | | CGI). | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | current time | | | | | | zone of the | | | | | | service user. | +---------------+---------------+---+-------------+---------------+ | traceData | TraceData | O | 0..1 | Trace Data. | | | | | | The Null | | | | | | value | | | | | | indicates | | | | | | that trace is | | | | | | not active. | +---------------+---------------+---+-------------+---------------+ | backupAmfInfo | array(B | C | 1..N | This IE shall | | | ackupAmfInfo) | | | be included | | | | | | if the NF | | | | | | service | | | | | | consumer is | | | | | | an AMF and | | | | | | the AMF | | | | | | supports the | | | | | | AMF | | | | | | management | | | | | | without UDSF | | | | | | when the UE | | | | | | Context for | | | | | | SMS to be | | | | | | created in | | | | | | the SMSF, or | | | | | | to be updated | | | | | | in the SMSF. | | | | | | | | | | | | The SMSF uses | | | | | | this | | | | | | attribute to | | | | | | do an NRF | | | | | | query in | | | | | | order to | | | | | | invoke later | | | | | | services in a | | | | | | backup AMF | | | | | | e.g. | | | | | | Namf_MT. | | | | | | | | | | | | Absence of | | | | | | this | | | | | | attribute | | | | | | indicates the | | | | | | backup AMF | | | | | | Info is not | | | | | | provided or | | | | | | the previous | | | | | | provided | | | | | | backup AMF | | | | | | Info is | | | | | | removed. | +---------------+---------------+---+-------------+---------------+ | udmGroupId | NfGroupId | O | 0..1 | Identity of | | | | | | the UDM group | | | | | | serving the | | | | | | supi | +---------------+---------------+---+-------------+---------------+ | rou | string | O | 0..1 | When present, | | tingIndicator | | | | it shall | | | | | | indicate the | | | | | | Routing | | | | | | Indicator of | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | hNwPubKeyId | integer | O | 0..1 | When present, | | | | | | it shall | | | | | | indicate the | | | | | | Home Network | | | | | | Public Key | | | | | | Identifier of | | | | | | the UE. (see | | | | | | NOTE). | +---------------+---------------+---+-------------+---------------+ | ratType | RatType | C | 0..1 | When present, | | | | | | it shall | | | | | | indicate the | | | | | | RAT type of | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | addi | RatType | C | 0..1 | When present, | | tionalRatType | | | | it shall | | | | | | indicate the | | | | | | RAT type of | | | | | | the UE | | | | | | corresponding | | | | | | to | | | | | | addition | | | | | | alAccessType. | | | | | | This IE shall | | | | | | not be | | | | | | included if | | | | | | additio | | | | | | nalAccessType | | | | | | IE is not | | | | | | present. | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+ | NOTE: If | | | | | | present, this | | | | | | attribute | | | | | | shall be used | | | | | | together with | | | | | | rout | | | | | | ingIndicator. | | | | | | This | | | | | | attribute is | | | | | | only used by | | | | | | the HPLMN in | | | | | | roaming | | | | | | scenarios. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.3 Type: SmsRecordData
Table 6.1.6.2.3-1: Definition of type SmsRecordData
Attribute name Data type P Cardinality Description
* * *
smsRecordId RecordId M 1 This IE shall be present, and it shall contain the
record id uniquely identify a message carrying SMS payload. smsPayload
RefToBinaryData M 1 This IE shall be present, and it shall contain the
reference to the SMS Payload Information binary data (see clause 6.1.6.4) gpsi
Gpsi O 0..1 When present, this IE shall contain the global permanent
subscriber identifier of the service user. pei Pei O 0..1 When present, this
IE shall contain the IMEI or IMEISV of the service user. accessType AccessType
O 0..1 When present, this IE shall contain the access type from which the
service user accesses to network. ueLocation UserLocation O 0..1 When present,
this IE shall contain the UE location information (e.g. TAI and CGI).
ueTimeZone TimeZone O 0..1 When present, this IE shall contain the time zone
of the service user.
##### 6.1.6.2.4 Void
##### 6.1.6.2.5 Type: SmsRecordDeliveryData
Table 6.1.6.2.5-1: Definition of type SmsRecordDeliveryData
Attribute name Data type P Cardinality Description
* * *
smsRecordId RecordId M 1 This IE shall be present, and it shall contain the
record id uniquely identify a message carrying SMS payload. deliveryStatus
SmsDeliveryStatus M 1 This IE shall be present, and it shall indicate the
status of SMS payload delivery attempt in the SMSF, after SMSF receiving SMS
payload on Nsmsf interface.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
+-----------+-----------------+--------------------------------------+ | Type Name | Type Definition | Description | +-----------+-----------------+--------------------------------------+ | RecordId | string | String uniquely identifying a record | | | | in the SMSF. The format of RecordId | | | | is implementation specific, e.g. | | | | using UUID format. | | | | | | | | In an OpenAPI Specification [19] | | | | schema, the format shall be | | | | designated as \"RecordId\". | +-----------+-----------------+--------------------------------------+
##### 6.1.6.3.3 Enumeration: SmsDeliveryStatus
The enumeration SmsDeliveryStatus represents the status of SMS payload
delivery attempt at the SMSF. It shall comply with the previsions defined in
table 6.1.6.3.3-1.
Table 6.1.6.3.3-1: Enumeration SmsDeliveryStatus
Enumeration value Description
* * *
SMS_DELIVERY_PENDING The SMS payload delivery at SMSF is pended.
SMS_DELIVERY_COMPLETED The SMS payload delivery at SMSF is completed.
SMS_DELIVERY_FAILED The SMS payload delivery at SMSF is failed due to certain
reasons. SMS_DELIVERY_SMSF_ACCEPTED The SMS payload is accepted by the SMSF
for further delivery.
#### 6.1.6.4 Binary data
##### 6.1.6.4.1 Introduction
This clause defines the binary data that shall be supported in a binary body
part in an HTTP multipart message (see clauses 6.1.2.2.2 and 6.1.2.4), to
support delivery of binary content of SMS payload.
Table 6.1.6.4.1-1: Binary Data Types
Name Clause defined Content type
* * *
SMS Payload Information 6.1.6.4.2 vnd.3gpp.sms
##### 6.1.6.4.2 SMS Payload Information
SMS Payload Information shall encode a SMS payload as specified in 3GPP TS
23.040 [11] and 3GPP TS 24.011 [12], using the vnd.3gpp.sms content-type.
SMS Payload Information may encode e.g. the following content:
\- CP-DATA, CP-ACK, CP-ERROR as specified in 3GPP TS 23.040 [11] and 3GPP TS
24.011 [12];
### 6.1.7 Error Handling
#### 6.1.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.1.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[4] may also be used for the Nsmsf_SMService service, and the following
application errors listed in Table 6.1.7.3-1 are specific for the
Nsmsf_SMService service.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
USER_NOT_FOUND 404 Not Found The provided subscriber identifier is invalid or
the service user not found. CONTEXT_NOT_FOUND 404 Not Found The UE context for
SMS to be operated is invalid or not found in SMSF. SERVICE_NOT_ALLOWED 403
Forbidden The requested service is not allowed for this service user.
SMS_PAYLOAD_MISSING 400 Bad Request The expected SMS payload content is
missing. SMS_PAYLOAD_ERROR 400 Bad Request Errors exist in the format of SMS
payload.
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the Nsmsf_SMService
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Features of supportedFeatures attribute used by Nsmsf_SMService
service
+-----------------------+-------------+-----+-----------------------+ | Feature Number | Feature | M/O | Description | +-----------------------+-------------+-----+-----------------------+ | 1 | ES3XX | M | Extended Support of | | | | | HTTP 307/308 | | | | | redirection | | | | | | | | | | An NF Service | | | | | Consumer (e.g. AMF) | | | | | that supports this | | | | | feature shall support | | | | | handling of HTTP | | | | | 307/308 redirection | | | | | for any service | | | | | operation of the | | | | | Nsmsf_SMService | | | | | service. An NF | | | | | Service Consumer that | | | | | does not support this | | | | | feature does only | | | | | support HTTP | | | | | redirection as | | | | | specified for 3GPP | | | | | Release 15. | +-----------------------+-------------+-----+-----------------------+ | 2 | PatchReport | O | If some of the | | | | | modifications | | | | | included in the PATCH | | | | | request are not | | | | | successfully | | | | | implemented, the SMSF | | | | | reports the result of | | | | | PATCH request | | | | | execution to the | | | | | consumer. See | | | | | clause 5.2.7.2 of | | | | | 3GPP TS 29.500 [4]. | +-----------------------+-------------+-----+-----------------------+ | Feature number: The | | | | | order number of the | | | | | feature within the | | | | | s**upportedFeatures | | | | | attribute (starting | | | | | with 1).** | | | | | | | | | | **Feature: A short | | | | | name that can be used | | | | | to refer to the bit | | | | | and to the feature.** | | | | | | | | | | **M/O: Defines if the | | | | | implementation of the | | | | | feature is mandatory | | | | | (** \"**M** \"**) or | | | | | optional | | | | | (** \"**O** \"**).** | | | | | | | | | | Description: A clear | | | | | textual description | | | | | of the feature. | | | | +-----------------------+-------------+-----+-----------------------+
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [13] and 3GPP TS 29.500 [4], the access to the
Nsmsf_SMService API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [14]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [15])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nsmsf_SMService API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [15], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nsmsf_SMService service.
The Nsmsf_SMService API defines a single scope \"nsmsf-sms\" for OAuth2
authorization (as specified in 3GPP TS 33.501 [13]) for the entire API, and it
does not define any additional scopes at resource or operation level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different SMSF service instance, within
the same SMSF or a different SMSF of an SMSF set, e.g. when an SMSF service
instance is part of an SMSF (service) set or when using indirect
communications (see 3GPP TS 29.500 [4]). See the ES3XX feature in clause
6.1.8.
An SCP that reselects a different SMSF producer instance will return the NF
Instance ID of the new SMSF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an SMSF within an SMSF set redirects a service request to a different SMSF
of the set using a 307 Temporary Redirect or 308 Permanent Redirect status
code, the identity of the new SMSF towards which the service request is
redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307
Temporary Redirect or 308 Permanent Redirect response as specified in clause
6.10.9.1 of 3GPP TS 29.500 [4].
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the Nsmsf_SMService service. It
consists of OpenAPI 3.0.0 specifications, in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on
a Git-based repository that uses the GitLab software version control system
(see 3GPP TS 29.501 [5] clause 5.3.1 and 3GPP TR 21.900 [16] clause 5B).
# A.2 Nsmsf_SMService API
openapi: 3.0.0
info:
version: \'2.3.0-alpha.2\'
title: \'Nsmsf_SMService Service API\'
description: \|
SMSF SMService.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.540 V18.1.0; 5G System; SMS Services; Stage 3
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.540/\'
security:
\- oAuth2ClientCredentials:
\- nsmsf-sms
\- {}
servers:
\- url: \'{apiRoot}/nsmsf-sms/v2\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
paths:
/ue-contexts/{supi}:
put:
summary: Activate SMS Service for a given UE
operationId: SMServiceActivation
tags:
\- Activation of SMS service
parameters:
\- name: supi
in: path
required: true
description: Subscriber Permanent Identifier (SUPI)
schema:
type: string
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/UeSmsContextData\'
required: true
responses:
\'201\':
description: UE Context for SMS is created in SMSF
content:
application/json:
schema:
\$ref: \'#/components/schemas/UeSmsContextData\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nsmsf-sms/\/ue-contexts/{supi}\'
required: true
schema:
type: string
ETag:
description: Entity Tag, containing a strong validator, as described in IETF
RFC 7232, 2.3
schema:
type: string
\'204\':
description: UE Context for SMS is updated in SMSF
headers:
ETag:
description: Entity Tag, containing a strong validator, as described in IETF
RFC 7232, 2.3
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
description: Invalid Service Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
description: Unable to create/update UE Context for SMS in SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'404\':
description: Unable to found subscription for service user or UE Context for
SMS in SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
description: Service Unavailable
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
default:
description: Unexpected error
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
patch:
summary: Update a parameter in the UE SMS Context in SMSF
operationId: SMSServiceParameterUpdate
tags:
\- Parameter update in the UE SMS Context in SMSF
parameters:
\- name: supi
in: path
required: true
description: Subscriber Permanent Identifier (SUPI)
schema:
type: string
\- name: supported-features
in: query
description: Features required to be supported by the target NF
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
minItems: 1
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
oneOf:
\- \$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\- \$ref: \'#/components/schemas/UeSmsContextData\'
\'204\':
description: Successful response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'422\':
description: Unprocessable Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
delete:
summary: Deactivate SMS Service for a given UE
operationId: SMServiceDeactivation
tags:
\- Deactivation of SMS service
parameters:
\- name: supi
in: path
required: true
description: Subscriber Permanent Identifier (SUPI)
schema:
type: string
\- name: If-Match
in: header
description: Validator for conditional requests, as described in IETF RFC
7232, 3.1
schema:
type: string
responses:
\'204\':
description: UE Context for SMS is deleted from SMSF
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
description: Invalid Service Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
description: Unable to found UE Context for SMS in SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
description: Service Unavailable
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
/ue-contexts/{supi}/sendsms:
post:
summary: Send SMS payload for a given UE
operationId: SendSMS
tags:
\- Send SMS payload in uplink direction
parameters:
\- name: supi
in: path
required: true
description: Subscriber Permanent Identifier (SUPI)
schema:
type: string
requestBody:
content:
multipart/related:
schema:
type: object
properties:
jsonData:
\$ref: \'#/components/schemas/SmsRecordData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
required: true
responses:
\'200\':
description: SMS payload is received by SMSF, and is being delivered out
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmsRecordDeliveryData\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
description: Invalid Service Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
description: Unable to deliver SMS at SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'404\':
description: Unable to found UE Context for SMS in SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
description: Service Unavailable
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
/ue-contexts/{supi}/send-mt-sms:
post:
summary: Send MT SMS payload for a given UE
operationId: SendMtSMS
tags:
\- Send SMS payload in downlink direction
parameters:
\- name: supi
in: path
required: true
description: Subscriber Permanent Identifier (SUPI)
schema:
type: string
requestBody:
content:
multipart/related:
schema:
type: object
properties:
jsonData:
\$ref: \'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
required: true
responses:
\'200\':
description: sending delivery report
content:
multipart/related:
schema:
type: object
properties:
jsonData:
\$ref: \'TS29577_Nipsmgw_SMService.yaml#/components/schemas/SmsDeliveryData\'
binaryPayload:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryPayload:
contentType: application/vnd.3gpp.sms
headers:
Content-Id:
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
description: Invalid Service Request
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
description: Unable to deliver SMS at SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'404\':
description: Unable to found UE Context for SMS in SMSF
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
description: Service Unavailable
content:
application/problem+json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nsmsf-sms: Access to the nsmsf-sms API
schemas:
UeSmsContextData:
description: Represents the information used for activating the SMS service
for a service user, or updating the parameters of the SMS service.
type: object
required:
\- supi
\- amfId
\- accessType
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
amfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
guamis:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
minItems: 1
accessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
additionalAccessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
traceData:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TraceData\'
backupAmfInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BackupAmfInfo\'
minItems: 1
udmGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfGroupId\'
routingIndicator:
type: string
hNwPubKeyId:
type: integer
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
additionalRatType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
SmsRecordData:
description: Represents the information sent within a request message of the
UplinkSMS service operation, for delivering SMS payload.
type: object
required:
\- smsRecordId
\- smsPayload
properties:
smsRecordId:
\$ref: \'#/components/schemas/RecordId\'
smsPayload:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
accessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
RecordId:
description: Represents a record ID, used to identify a message carrying SMS
payload.
type: string
SmsRecordDeliveryData:
description: Represents information on the result of invoking the UplinkSMS
service operation.
type: object
required:
\- smsRecordId
\- deliveryStatus
properties:
smsRecordId:
\$ref: \'#/components/schemas/RecordId\'
deliveryStatus:
\$ref: \'#/components/schemas/SmsDeliveryStatus\'
SmsDeliveryStatus:
description: Represents the Status of an SMS delivery attempt.
type: string
enum:
\- SMS_DELIVERY_PENDING
\- SMS_DELIVERY_COMPLETED
\- SMS_DELIVERY_FAILED
\- SMS_DELIVERY_SMSF_ACCEPTED
###### ## Annex B (Informative): HTTP Multipart Messages
# B.1 Example of HTTP multipart message
This Annex provides a (partial) example of HTTP multipart message. The example
does not aim to be a complete representation of the HTTP message, e.g.
additional information or headers can be included.
This Annex is informative and the normative descriptions in this specification
prevail over the description in this Annex if there is any difference.
# B.2 Void
# B.3 Example HTTP multipart message with SMS binary data
Example HTTP multipart message with SMS binary data:
> POST /example.com/nsmsf-sms/v1/ue-contexts/{supi}/sendsms HTTP/2
>
> Content-Type: multipart/related; boundary=----Boundary
>
> Content-Length: xyz
>
> \------Boundary
>
> Content-Type: application/json
>
> {
>
> \"smsRecordId\": \"777c3edf-129f-486e-a3f8-c48e7b515605\",
>
> \"smsPayload\": {
>
> \"contentId\": \"sms\"
>
> },
>
> \"gpsi\": \"msisdn-8613915900000\",
>
> \"pei\": \"imei-123456789012345\",
>
> \"accessType\": \"3GPP_ACCESS\",
>
> \"ueLocation\": {
>
> \"nrLocation\": {
>
> \"tai\": {
>
> \"plmnId\": {
>
> \"mcc\": \"46\",
>
> \"mnc\": \"000\"
>
> },
>
> \"tac\": \"A01001\",
>
> \"ncgi\": {
>
> \"plmnId\": {
>
> \"mcc\": \"46\",
>
> \"mnc\": \"000\"
>
> },
>
> \"nrCellId\": \"225BD6007\"
>
> }
>
> }
>
> },
>
> \"ueTimeZone\": \"+08:00\"
>
> }
>
> \------Boundary
>
> Content-Type: application/vnd.3gpp.sms
>
> Content-Id: sms
>
> { ... SMS Message binary data ...}
>
> \------Boundary
The JSON part of the HTTP POST message includes an attribute named
\"smsPayload\" which refers to RefToBinaryData structure. The \"contentId\" of
RefToBinaryData is encoded as a string and used to reference the value of the
Content-ID header field of the binary body part.
#